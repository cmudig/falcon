var SW=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var aIe=SW((uMe,VA)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();function Uf(){}function bD(e){return e()}function pN(){return Object.create(null)}function Id(e){e.forEach(bD)}function TD(e){return typeof e=="function"}function Md(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function xW(e){return Object.keys(e).length===0}function _i(e,t){e.appendChild(t)}function Dg(e,t,n){e.insertBefore(t,n||null)}function Ku(e){e.parentNode&&e.parentNode.removeChild(e)}function kW(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function ls(e){return document.createElement(e)}function ED(e){return document.createTextNode(e)}function bf(){return ED(" ")}function Aw(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function Gr(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function BW(e){return Array.from(e.childNodes)}function FW(e,t){t=""+t,e.data!==t&&(e.data=t)}function yN(e,t,n,i){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}function IW(e,t,{bubbles:n=!1,cancelable:i=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(e,n,i,t),s}let H_;function k_(e){H_=e}function ok(){if(!H_)throw new Error("Function called outside component initialization");return H_}function MW(e){ok().$$.on_mount.push(e)}function AW(e){ok().$$.on_destroy.push(e)}function lk(){const e=ok();return(t,n,{cancelable:i=!1}={})=>{const s=e.$$.callbacks[t];if(s){const l=IW(t,n,{cancelable:i});return s.slice().forEach(c=>{c.call(e,l)}),!l.defaultPrevented}return!0}}function Ns(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(i=>i.call(this,t))}const Tf=[],ru=[];let zf=[];const Cv=[],OW=Promise.resolve();let Rv=!1;function NW(){Rv||(Rv=!0,OW.then(vD))}function Lv(e){zf.push(e)}function ck(e){Cv.push(e)}const Z1=new Set;let nf=0;function vD(){if(nf!==0)return;const e=H_;do{try{for(;nf<Tf.length;){const t=Tf[nf];nf++,k_(t),CW(t.$$)}}catch(t){throw Tf.length=0,nf=0,t}for(k_(null),Tf.length=0,nf=0;ru.length;)ru.pop()();for(let t=0;t<zf.length;t+=1){const n=zf[t];Z1.has(n)||(Z1.add(n),n())}zf.length=0}while(Tf.length);for(;Cv.length;)Cv.pop()();Rv=!1,Z1.clear(),k_(e)}function CW(e){if(e.fragment!==null){e.update(),Id(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Lv)}}function RW(e){const t=[],n=[];zf.forEach(i=>e.indexOf(i)===-1?t.push(i):n.push(i)),n.forEach(i=>i()),zf=t}const Km=new Set;let Oc;function LW(){Oc={r:0,c:[],p:Oc}}function PW(){Oc.r||Id(Oc.c),Oc=Oc.p}function aa(e,t){e&&e.i&&(Km.delete(e),e.i(t))}function wl(e,t,n,i){if(e&&e.o){if(Km.has(e))return;Km.add(e),Oc.c.push(()=>{Km.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}const DW=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"];[...DW];function dk(e,t,n){const i=e.$$.props[t];i!==void 0&&(e.$$.bound[i]=n,n(e.$$.ctx[i]))}function Ju(e){e&&e.c()}function Ad(e,t,n,i){const{fragment:s,after_update:l}=e.$$;s&&s.m(t,n),i||Lv(()=>{const c=e.$$.on_mount.map(bD).filter(TD);e.$$.on_destroy?e.$$.on_destroy.push(...c):Id(c),e.$$.on_mount=[]}),l.forEach(Lv)}function Od(e,t){const n=e.$$;n.fragment!==null&&(RW(n.after_update),Id(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function $W(e,t){e.$$.dirty[0]===-1&&(Tf.push(e),NW(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Nd(e,t,n,i,s,l,c,d=[-1]){const f=H_;k_(e);const u=e.$$={fragment:null,ctx:[],props:l,update:Uf,not_equal:s,bound:pN(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(f?f.$$.context:[])),callbacks:pN(),dirty:d,skip_bound:!1,root:t.target||f.$$.root};c&&c(u.root);let a=!1;if(u.ctx=n?n(e,t.props||{},(m,w,...y)=>{const o=y.length?y[0]:w;return u.ctx&&s(u.ctx[m],u.ctx[m]=o)&&(!u.skip_bound&&u.bound[m]&&u.bound[m](o),a&&$W(e,m)),w}):[],u.update(),a=!0,Id(u.before_update),u.fragment=i?i(u.ctx):!1,t.target){if(t.hydrate){const m=BW(t.target);u.fragment&&u.fragment.l(m),m.forEach(Ku)}else u.fragment&&u.fragment.c();t.intro&&aa(e.$$.fragment),Ad(e,t.target,t.anchor,t.customElement),vD()}k_(f)}class Cd{$destroy(){Od(this,1),this.$destroy=Uf}$on(t,n){if(!TD(n))return Uf;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}$set(t){this.$$set&&!xW(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function UW(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]]);return n}function Ae(e,t,n,i){function s(l){return l instanceof n?l:new n(function(c){c(l)})}return new(n||(n=Promise))(function(l,c){function d(a){try{u(i.next(a))}catch(m){c(m)}}function f(a){try{u(i.throw(a))}catch(m){c(m)}}function u(a){a.done?l(a.value):s(a.value).then(d,f)}u((i=i.apply(e,t||[])).next())})}function mN(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ke(e){return this instanceof Ke?(this.v=e,this):new Ke(e)}function dr(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),s,l=[];return s={},c("next"),c("throw"),c("return"),s[Symbol.asyncIterator]=function(){return this},s;function c(w){i[w]&&(s[w]=function(y){return new Promise(function(o,T){l.push([w,y,o,T])>1||d(w,y)})})}function d(w,y){try{f(i[w](y))}catch(o){m(l[0][3],o)}}function f(w){w.value instanceof Ke?Promise.resolve(w.value.v).then(u,a):m(l[0][2],w)}function u(w){d("next",w)}function a(w){d("throw",w)}function m(w,y){w(y),l.shift(),l.length&&d(l[0][0],l[0][1])}}function Jm(e){var t,n;return t={},i("next"),i("throw",function(s){throw s}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(s,l){t[s]=e[s]?function(c){return(n=!n)?{value:Ke(e[s](c)),done:!1}:l?l(c):c}:l}}function ul(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof mN=="function"?mN(e):e[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(l){n[l]=e[l]&&function(c){return new Promise(function(d,f){c=e[l](c),s(d,f,c.done,c.value)})}}function s(l,c,d,f){Promise.resolve(f).then(function(u){l({value:u,done:d})},c)}}const zW=new TextDecoder("utf-8"),Pv=e=>zW.decode(e),jW=new TextEncoder,M0=e=>jW.encode(e),[xo,fIe]=(()=>{const e=()=>{throw new Error("BigInt64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw e()}static from(){throw e()}constructor(){throw e()}}return typeof BigInt64Array<"u"?[BigInt64Array,!0]:[t,!1]})(),[ko,uIe]=(()=>{const e=()=>{throw new Error("BigUint64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw e()}static from(){throw e()}constructor(){throw e()}}return typeof BigUint64Array<"u"?[BigUint64Array,!0]:[t,!1]})(),qW=e=>typeof e=="number",SD=e=>typeof e=="boolean",_n=e=>typeof e=="function",Gi=e=>e!=null&&Object(e)===e,bl=e=>Gi(e)&&_n(e.then),Qu=e=>Gi(e)&&_n(e[Symbol.iterator]),Rd=e=>Gi(e)&&_n(e[Symbol.asyncIterator]),Dv=e=>Gi(e)&&Gi(e.schema),xD=e=>Gi(e)&&"done"in e&&"value"in e,kD=e=>Gi(e)&&_n(e.stat)&&qW(e.fd),BD=e=>Gi(e)&&fk(e.body),A0=e=>"_getDOMStream"in e&&"_getNodeStream"in e,GW=e=>Gi(e)&&_n(e.abort)&&_n(e.getWriter)&&!A0(e),fk=e=>Gi(e)&&_n(e.cancel)&&_n(e.getReader)&&!A0(e),HW=e=>Gi(e)&&_n(e.end)&&_n(e.write)&&SD(e.writable)&&!A0(e),FD=e=>Gi(e)&&_n(e.read)&&_n(e.pipe)&&SD(e.readable)&&!A0(e),WW=e=>Gi(e)&&_n(e.clear)&&_n(e.bytes)&&_n(e.position)&&_n(e.setPosition)&&_n(e.capacity)&&_n(e.getBufferIdentifier)&&_n(e.createLong),uk=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function VW(e){const t=e[0]?[e[0]]:[];let n,i,s,l;for(let c,d,f=0,u=0,a=e.length;++f<a;){if(c=t[u],d=e[f],!c||!d||c.buffer!==d.buffer||d.byteOffset<c.byteOffset){d&&(t[++u]=d);continue}if({byteOffset:n,byteLength:s}=c,{byteOffset:i,byteLength:l}=d,n+s<i||i+l<n){d&&(t[++u]=d);continue}t[u]=new Uint8Array(c.buffer,n,i-n+l)}return t}function W_(e,t,n=0,i=t.byteLength){const s=e.byteLength,l=new Uint8Array(e.buffer,e.byteOffset,s),c=new Uint8Array(t.buffer,t.byteOffset,Math.min(i,s));return l.set(c,n),e}function br(e,t){const n=VW(e),i=n.reduce((a,m)=>a+m.byteLength,0);let s,l,c,d=0,f=-1;const u=Math.min(t||Number.POSITIVE_INFINITY,i);for(const a=n.length;++f<a;){if(s=n[f],l=s.subarray(0,Math.min(s.length,u-d)),u<=d+l.length){l.length<s.length?n[f]=s.subarray(l.length):l.length===s.length&&f++,c?W_(c,l,d):c=l;break}W_(c||(c=new Uint8Array(u)),l,d),d+=l.length}return[c||new Uint8Array(0),n.slice(f),i-(c?c.byteLength:0)]}function gt(e,t){let n=xD(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=M0(n)),n instanceof ArrayBuffer?new e(n):n instanceof uk?new e(n):WW(n)?gt(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const YW=e=>gt(Int8Array,e),XW=e=>gt(Int16Array,e),Ef=e=>gt(Int32Array,e),KW=e=>gt(xo,e),yt=e=>gt(Uint8Array,e),JW=e=>gt(Uint16Array,e),QW=e=>gt(Uint32Array,e),ZW=e=>gt(ko,e),eV=e=>gt(Float32Array,e),tV=e=>gt(Float64Array,e),nV=e=>gt(Uint8ClampedArray,e),$v=e=>(e.next(),e);function*Fa(e,t){const n=function*(s){yield s},i=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof uk?n(t):Qu(t)?t:n(t);return yield*$v(function*(s){let l=null;do l=s.next(yield gt(e,l));while(!l.done)}(i[Symbol.iterator]())),new e}const iV=e=>Fa(Int8Array,e),sV=e=>Fa(Int16Array,e),rV=e=>Fa(Int32Array,e),ID=e=>Fa(Uint8Array,e),aV=e=>Fa(Uint16Array,e),oV=e=>Fa(Uint32Array,e),lV=e=>Fa(Float32Array,e),cV=e=>Fa(Float64Array,e),dV=e=>Fa(Uint8ClampedArray,e);function Br(e,t){return dr(this,arguments,function*(){if(bl(t))return yield Ke(yield Ke(yield*Jm(ul(Br(e,yield Ke(t))))));const i=function(c){return dr(this,arguments,function*(){yield yield Ke(yield Ke(c))})},s=function(c){return dr(this,arguments,function*(){yield Ke(yield*Jm(ul($v(function*(d){let f=null;do f=d.next(yield f==null?void 0:f.value);while(!f.done)}(c[Symbol.iterator]())))))})},l=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof uk?i(t):Qu(t)?s(t):Rd(t)?t:i(t);return yield Ke(yield*Jm(ul($v(function(c){return dr(this,arguments,function*(){let d=null;do d=yield Ke(c.next(yield yield Ke(gt(e,d))));while(!d.done)})}(l[Symbol.asyncIterator]()))))),yield Ke(new e)})}const fV=e=>Br(Int8Array,e),uV=e=>Br(Int16Array,e),hV=e=>Br(Int32Array,e),MD=e=>Br(Uint8Array,e),_V=e=>Br(Uint16Array,e),gV=e=>Br(Uint32Array,e),pV=e=>Br(Float32Array,e),yV=e=>Br(Float64Array,e),mV=e=>Br(Uint8ClampedArray,e);function O0(e,t,n){if(e!==0){n=n.slice(0,t+1);for(let i=-1;++i<=t;)n[i]+=e}return n}function AD(e,t){let n=0;const i=e.length;if(i!==t.length)return!1;if(i>0)do if(e[n]!==t[n])return!1;while(++n<i);return!0}const wV=Object.freeze(Object.defineProperty({__proto__:null,compareArrayLike:AD,joinUint8Arrays:br,memcpy:W_,rebaseValueOffsets:O0,toArrayBufferView:gt,toArrayBufferViewAsyncIterator:Br,toArrayBufferViewIterator:Fa,toBigInt64Array:KW,toBigUint64Array:ZW,toFloat32Array:eV,toFloat32ArrayAsyncIterator:pV,toFloat32ArrayIterator:lV,toFloat64Array:tV,toFloat64ArrayAsyncIterator:yV,toFloat64ArrayIterator:cV,toInt16Array:XW,toInt16ArrayAsyncIterator:uV,toInt16ArrayIterator:sV,toInt32Array:Ef,toInt32ArrayAsyncIterator:hV,toInt32ArrayIterator:rV,toInt8Array:YW,toInt8ArrayAsyncIterator:fV,toInt8ArrayIterator:iV,toUint16Array:JW,toUint16ArrayAsyncIterator:_V,toUint16ArrayIterator:aV,toUint32Array:QW,toUint32ArrayAsyncIterator:gV,toUint32ArrayIterator:oV,toUint8Array:yt,toUint8ArrayAsyncIterator:MD,toUint8ArrayIterator:ID,toUint8ClampedArray:nV,toUint8ClampedArrayAsyncIterator:mV,toUint8ClampedArrayIterator:dV},Symbol.toStringTag,{value:"Module"})),ds={fromIterable(e){return sm(bV(e))},fromAsyncIterable(e){return sm(TV(e))},fromDOMStream(e){return sm(EV(e))},fromNodeStream(e){return sm(SV(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},sm=e=>(e.next(),e);function*bV(e){let t,n=!1,i=[],s,l,c,d=0;function f(){return l==="peek"?br(i,c)[0]:([s,i,d]=br(i,c),s)}({cmd:l,size:c}=yield null);const u=ID(e)[Symbol.iterator]();try{do if({done:t,value:s}=Number.isNaN(c-d)?u.next():u.next(c-d),!t&&s.byteLength>0&&(i.push(s),d+=s.byteLength),t||c<=d)do({cmd:l,size:c}=yield f());while(c<d);while(!t)}catch(a){(n=!0)&&typeof u.throw=="function"&&u.throw(a)}finally{n===!1&&typeof u.return=="function"&&u.return(null)}return null}function TV(e){return dr(this,arguments,function*(){let n,i=!1,s=[],l,c,d,f=0;function u(){return c==="peek"?br(s,d)[0]:([l,s,f]=br(s,d),l)}({cmd:c,size:d}=yield yield Ke(null));const a=MD(e)[Symbol.asyncIterator]();try{do if({done:n,value:l}=Number.isNaN(d-f)?yield Ke(a.next()):yield Ke(a.next(d-f)),!n&&l.byteLength>0&&(s.push(l),f+=l.byteLength),n||d<=f)do({cmd:c,size:d}=yield yield Ke(u()));while(d<f);while(!n)}catch(m){(i=!0)&&typeof a.throw=="function"&&(yield Ke(a.throw(m)))}finally{i===!1&&typeof a.return=="function"&&(yield Ke(a.return(new Uint8Array(0))))}return yield Ke(null)})}function EV(e){return dr(this,arguments,function*(){let n=!1,i=!1,s=[],l,c,d,f=0;function u(){return c==="peek"?br(s,d)[0]:([l,s,f]=br(s,d),l)}({cmd:c,size:d}=yield yield Ke(null));const a=new vV(e);try{do if({done:n,value:l}=Number.isNaN(d-f)?yield Ke(a.read()):yield Ke(a.read(d-f)),!n&&l.byteLength>0&&(s.push(yt(l)),f+=l.byteLength),n||d<=f)do({cmd:c,size:d}=yield yield Ke(u()));while(d<f);while(!n)}catch(m){(i=!0)&&(yield Ke(a.cancel(m)))}finally{i===!1?yield Ke(a.cancel()):e.locked&&a.releaseLock()}return yield Ke(null)})}class vV{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return Ae(this,void 0,void 0,function*(){const{reader:n,source:i}=this;n&&(yield n.cancel(t).catch(()=>{})),i&&i.locked&&this.releaseLock()})}read(t){return Ae(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=yt(n)),n})}}const eE=(e,t)=>{const n=s=>i([t,s]);let i;return[t,n,new Promise(s=>(i=s)&&e.once(t,n))]};function SV(e){return dr(this,arguments,function*(){const n=[];let i="error",s=!1,l=null,c,d,f=0,u=[],a;function m(){return c==="peek"?br(u,d)[0]:([a,u,f]=br(u,d),a)}if({cmd:c,size:d}=yield yield Ke(null),e.isTTY)return yield yield Ke(new Uint8Array(0)),yield Ke(null);try{n[0]=eE(e,"end"),n[1]=eE(e,"error");do{if(n[2]=eE(e,"readable"),[i,l]=yield Ke(Promise.race(n.map(y=>y[2]))),i==="error")break;if((s=i==="end")||(Number.isFinite(d-f)?(a=yt(e.read(d-f)),a.byteLength<d-f&&(a=yt(e.read()))):a=yt(e.read()),a.byteLength>0&&(u.push(a),f+=a.byteLength)),s||d<=f)do({cmd:c,size:d}=yield yield Ke(m()));while(d<f)}while(!s)}finally{yield Ke(w(n,i==="error"?l:null))}return yield Ke(null);function w(y,o){return a=u=null,new Promise((T,b)=>{for(const[S,x]of y)e.off(S,x);try{const S=e.destroy;S&&S.call(e,o),o=void 0}catch(S){o=S||o}finally{o!=null?b(o):T()}})}})}var Li;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Li||(Li={}));var Nn;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(Nn||(Nn={}));var bn;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(bn||(bn={}));var Hi;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Hi||(Hi={}));var nt;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(nt||(nt={}));var Ps;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Ps||(Ps={}));var Nt;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Nt||(Nt={}));var te;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth"})(te||(te={}));var er;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(er||(er={}));const xV=void 0;function td(e){if(e===null)return"null";if(e===xV)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof xo||e instanceof ko?`[${[...e].map(t=>td(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const OD=Symbol.for("isArrowBigNum");function Fr(e,...t){return t.length===0?Object.setPrototypeOf(gt(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}Fr.prototype[OD]=!0;Fr.prototype.toJSON=function(){return`"${Y_(this)}"`};Fr.prototype.valueOf=function(){return ND(this)};Fr.prototype.toString=function(){return Y_(this)};Fr.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return ND(this);case"string":return Y_(this);case"default":return CD(this)}return Y_(this)};function jf(...e){return Fr.apply(this,e)}function qf(...e){return Fr.apply(this,e)}function V_(...e){return Fr.apply(this,e)}Object.setPrototypeOf(jf.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(qf.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(V_.prototype,Object.create(Uint32Array.prototype));Object.assign(jf.prototype,Fr.prototype,{constructor:jf,signed:!0,TypedArray:Int32Array,BigIntArray:xo});Object.assign(qf.prototype,Fr.prototype,{constructor:qf,signed:!1,TypedArray:Uint32Array,BigIntArray:ko});Object.assign(V_.prototype,Fr.prototype,{constructor:V_,signed:!0,TypedArray:Uint32Array,BigIntArray:ko});function ND(e){const{buffer:t,byteOffset:n,length:i,signed:s}=e,l=new ko(t,n,i),c=s&&l[l.length-1]&BigInt(1)<<BigInt(63);let d=BigInt(c?1:0),f=BigInt(0);if(c){for(const u of l)d+=~u*(BigInt(1)<<BigInt(32)*f++);d*=BigInt(-1)}else for(const u of l)d+=u*(BigInt(1)<<BigInt(32)*f++);return d}const Y_=e=>e.byteLength===8?`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`:RD(e),CD=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:RD(e);function RD(e){let t="";const n=new Uint32Array(2);let i=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const s=new Uint32Array((i=new Uint16Array(i).reverse()).buffer);let l=-1;const c=i.length-1;do{for(n[0]=i[l=0];l<c;)i[l++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+i[l];i[l]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(s[0]||s[1]||s[2]||s[3]);return t??"0"}class $g{static new(t,n){switch(n){case!0:return new jf(t);case!1:return new qf(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case xo:return new jf(t)}return t.byteLength===16?new V_(t):new qf(t)}static signed(t){return new jf(t)}static unsigned(t){return new qf(t)}static decimal(t){return new V_(t)}constructor(t,n){return $g.new(t,n)}}const kV=Object.freeze(Object.defineProperty({__proto__:null,BN:$g,bignumToBigInt:CD,bignumToString:Y_,isArrowBigNumSymbol:OD},Symbol.toStringTag,{value:"Module"}));function Tr(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var LD,PD,DD,$D,UD,zD,jD,qD,GD,HD,WD,VD,YD,XD,KD,JD,QD,ZD,e4;class Ge{static isNull(t){return(t==null?void 0:t.typeId)===te.Null}static isInt(t){return(t==null?void 0:t.typeId)===te.Int}static isFloat(t){return(t==null?void 0:t.typeId)===te.Float}static isBinary(t){return(t==null?void 0:t.typeId)===te.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===te.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===te.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===te.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===te.Date}static isTime(t){return(t==null?void 0:t.typeId)===te.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===te.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===te.Interval}static isList(t){return(t==null?void 0:t.typeId)===te.List}static isStruct(t){return(t==null?void 0:t.typeId)===te.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===te.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===te.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===te.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===te.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===te.Dictionary}static isDenseUnion(t){return Ge.isUnion(t)&&t.mode===Nn.Dense}static isSparseUnion(t){return Ge.isUnion(t)&&t.mode===Nn.Sparse}get typeId(){return te.NONE}}LD=Symbol.toStringTag;Ge[LD]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(Ge.prototype);let ha=class extends Ge{toString(){return"Null"}get typeId(){return te.Null}};PD=Symbol.toStringTag;ha[PD]=(e=>e[Symbol.toStringTag]="Null")(ha.prototype);class oi extends Ge{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return te.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?xo:ko}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}DD=Symbol.toStringTag;oi[DD]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(oi.prototype);class hk extends oi{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class _k extends oi{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class Tl extends oi{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}let N0=class extends oi{constructor(){super(!0,64)}get ArrayType(){return xo}};class gk extends oi{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class pk extends oi{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class yk extends oi{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}let mk=class extends oi{constructor(){super(!1,64)}get ArrayType(){return ko}};Object.defineProperty(hk.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(_k.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(Tl.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(N0.prototype,"ArrayType",{value:xo});Object.defineProperty(gk.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(pk.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(yk.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(mk.prototype,"ArrayType",{value:ko});class mo extends Ge{constructor(t){super(),this.precision=t}get typeId(){return te.Float}get ArrayType(){switch(this.precision){case bn.HALF:return Uint16Array;case bn.SINGLE:return Float32Array;case bn.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}$D=Symbol.toStringTag;mo[$D]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(mo.prototype);class t4 extends mo{constructor(){super(bn.HALF)}}class wk extends mo{constructor(){super(bn.SINGLE)}}class C0 extends mo{constructor(){super(bn.DOUBLE)}}Object.defineProperty(t4.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(wk.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(C0.prototype,"ArrayType",{value:Float64Array});let X_=class extends Ge{constructor(){super()}get typeId(){return te.Binary}toString(){return"Binary"}};UD=Symbol.toStringTag;X_[UD]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(X_.prototype);let au=class extends Ge{constructor(){super()}get typeId(){return te.Utf8}toString(){return"Utf8"}};zD=Symbol.toStringTag;au[zD]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(au.prototype);let ou=class extends Ge{constructor(){super()}get typeId(){return te.Bool}toString(){return"Bool"}};jD=Symbol.toStringTag;ou[jD]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(ou.prototype);let K_=class extends Ge{constructor(t,n,i=128){super(),this.scale=t,this.precision=n,this.bitWidth=i}get typeId(){return te.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};qD=Symbol.toStringTag;K_[qD]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(K_.prototype);class nd extends Ge{constructor(t){super(),this.unit=t}get typeId(){return te.Date}toString(){return`Date${(this.unit+1)*32}<${Hi[this.unit]}>`}}GD=Symbol.toStringTag;nd[GD]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(nd.prototype);class BV extends nd{constructor(){super(Hi.DAY)}}class n4 extends nd{constructor(){super(Hi.MILLISECOND)}}class _a extends Ge{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return te.Time}toString(){return`Time${this.bitWidth}<${nt[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return xo}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}HD=Symbol.toStringTag;_a[HD]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(_a.prototype);class FV extends _a{constructor(){super(nt.SECOND,32)}}class IV extends _a{constructor(){super(nt.MILLISECOND,32)}}class MV extends _a{constructor(){super(nt.MICROSECOND,64)}}class AV extends _a{constructor(){super(nt.NANOSECOND,64)}}class wo extends Ge{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return te.Timestamp}toString(){return`Timestamp<${nt[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}WD=Symbol.toStringTag;wo[WD]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(wo.prototype);class OV extends wo{constructor(t){super(nt.SECOND,t)}}class NV extends wo{constructor(t){super(nt.MILLISECOND,t)}}class CV extends wo{constructor(t){super(nt.MICROSECOND,t)}}class RV extends wo{constructor(t){super(nt.NANOSECOND,t)}}class id extends Ge{constructor(t){super(),this.unit=t}get typeId(){return te.Interval}toString(){return`Interval<${Ps[this.unit]}>`}}VD=Symbol.toStringTag;id[VD]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(id.prototype);class LV extends id{constructor(){super(Ps.DAY_TIME)}}class PV extends id{constructor(){super(Ps.YEAR_MONTH)}}let sd=class extends Ge{constructor(t){super(),this.children=[t]}get typeId(){return te.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};YD=Symbol.toStringTag;sd[YD]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(sd.prototype);class kn extends Ge{constructor(t){super(),this.children=t}get typeId(){return te.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}XD=Symbol.toStringTag;kn[XD]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(kn.prototype);class El extends Ge{constructor(t,n,i){super(),this.mode=t,this.children=i,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((s,l,c)=>(s[l]=c)&&s||s,Object.create(null))}get typeId(){return te.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}KD=Symbol.toStringTag;El[KD]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(El.prototype);class DV extends El{constructor(t,n){super(Nn.Dense,t,n)}}class $V extends El{constructor(t,n){super(Nn.Sparse,t,n)}}let J_=class extends Ge{constructor(t){super(),this.byteWidth=t}get typeId(){return te.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};JD=Symbol.toStringTag;J_[JD]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(J_.prototype);let lu=class extends Ge{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return te.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};QD=Symbol.toStringTag;lu[QD]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(lu.prototype);class cu extends Ge{constructor(t,n=!1){super(),this.children=[t],this.keysSorted=n}get typeId(){return te.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}ZD=Symbol.toStringTag;cu[ZD]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(cu.prototype);const UV=(e=>()=>++e)(-1);class bo extends Ge{constructor(t,n,i,s){super(),this.indices=n,this.dictionary=t,this.isOrdered=s||!1,this.id=i==null?UV():Tr(i)}get typeId(){return te.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}e4=Symbol.toStringTag;bo[e4]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(bo.prototype);function Hr(e){const t=e;switch(e.typeId){case te.Decimal:return e.bitWidth/32;case te.Timestamp:return 2;case te.Date:return 1+t.unit;case te.Interval:return 1+t.unit;case te.FixedSizeList:return t.listSize;case te.FixedSizeBinary:return t.byteWidth;default:return 1}}class ht{visitMany(t,...n){return t.map((i,s)=>this.visit(i,...n.map(l=>l[s])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return zV(this,t,n)}getVisitFnByTypeId(t,n=!0){return vf(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function zV(e,t,n=!0){return typeof t=="number"?vf(e,t,n):typeof t=="string"&&t in te?vf(e,te[t],n):t&&t instanceof Ge?vf(e,wN(t),n):t!=null&&t.type&&t.type instanceof Ge?vf(e,wN(t.type),n):vf(e,te.NONE,n)}function vf(e,t,n=!0){let i=null;switch(t){case te.Null:i=e.visitNull;break;case te.Bool:i=e.visitBool;break;case te.Int:i=e.visitInt;break;case te.Int8:i=e.visitInt8||e.visitInt;break;case te.Int16:i=e.visitInt16||e.visitInt;break;case te.Int32:i=e.visitInt32||e.visitInt;break;case te.Int64:i=e.visitInt64||e.visitInt;break;case te.Uint8:i=e.visitUint8||e.visitInt;break;case te.Uint16:i=e.visitUint16||e.visitInt;break;case te.Uint32:i=e.visitUint32||e.visitInt;break;case te.Uint64:i=e.visitUint64||e.visitInt;break;case te.Float:i=e.visitFloat;break;case te.Float16:i=e.visitFloat16||e.visitFloat;break;case te.Float32:i=e.visitFloat32||e.visitFloat;break;case te.Float64:i=e.visitFloat64||e.visitFloat;break;case te.Utf8:i=e.visitUtf8;break;case te.Binary:i=e.visitBinary;break;case te.FixedSizeBinary:i=e.visitFixedSizeBinary;break;case te.Date:i=e.visitDate;break;case te.DateDay:i=e.visitDateDay||e.visitDate;break;case te.DateMillisecond:i=e.visitDateMillisecond||e.visitDate;break;case te.Timestamp:i=e.visitTimestamp;break;case te.TimestampSecond:i=e.visitTimestampSecond||e.visitTimestamp;break;case te.TimestampMillisecond:i=e.visitTimestampMillisecond||e.visitTimestamp;break;case te.TimestampMicrosecond:i=e.visitTimestampMicrosecond||e.visitTimestamp;break;case te.TimestampNanosecond:i=e.visitTimestampNanosecond||e.visitTimestamp;break;case te.Time:i=e.visitTime;break;case te.TimeSecond:i=e.visitTimeSecond||e.visitTime;break;case te.TimeMillisecond:i=e.visitTimeMillisecond||e.visitTime;break;case te.TimeMicrosecond:i=e.visitTimeMicrosecond||e.visitTime;break;case te.TimeNanosecond:i=e.visitTimeNanosecond||e.visitTime;break;case te.Decimal:i=e.visitDecimal;break;case te.List:i=e.visitList;break;case te.Struct:i=e.visitStruct;break;case te.Union:i=e.visitUnion;break;case te.DenseUnion:i=e.visitDenseUnion||e.visitUnion;break;case te.SparseUnion:i=e.visitSparseUnion||e.visitUnion;break;case te.Dictionary:i=e.visitDictionary;break;case te.Interval:i=e.visitInterval;break;case te.IntervalDayTime:i=e.visitIntervalDayTime||e.visitInterval;break;case te.IntervalYearMonth:i=e.visitIntervalYearMonth||e.visitInterval;break;case te.FixedSizeList:i=e.visitFixedSizeList;break;case te.Map:i=e.visitMap;break}if(typeof i=="function")return i;if(!n)return()=>null;throw new Error(`Unrecognized type '${te[t]}'`)}function wN(e){switch(e.typeId){case te.Null:return te.Null;case te.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?te.Int8:te.Uint8;case 16:return n?te.Int16:te.Uint16;case 32:return n?te.Int32:te.Uint32;case 64:return n?te.Int64:te.Uint64}return te.Int}case te.Float:switch(e.precision){case bn.HALF:return te.Float16;case bn.SINGLE:return te.Float32;case bn.DOUBLE:return te.Float64}return te.Float;case te.Binary:return te.Binary;case te.Utf8:return te.Utf8;case te.Bool:return te.Bool;case te.Decimal:return te.Decimal;case te.Time:switch(e.unit){case nt.SECOND:return te.TimeSecond;case nt.MILLISECOND:return te.TimeMillisecond;case nt.MICROSECOND:return te.TimeMicrosecond;case nt.NANOSECOND:return te.TimeNanosecond}return te.Time;case te.Timestamp:switch(e.unit){case nt.SECOND:return te.TimestampSecond;case nt.MILLISECOND:return te.TimestampMillisecond;case nt.MICROSECOND:return te.TimestampMicrosecond;case nt.NANOSECOND:return te.TimestampNanosecond}return te.Timestamp;case te.Date:switch(e.unit){case Hi.DAY:return te.DateDay;case Hi.MILLISECOND:return te.DateMillisecond}return te.Date;case te.Interval:switch(e.unit){case Ps.DAY_TIME:return te.IntervalDayTime;case Ps.YEAR_MONTH:return te.IntervalYearMonth}return te.Interval;case te.Map:return te.Map;case te.List:return te.List;case te.Struct:return te.Struct;case te.Union:switch(e.mode){case Nn.Dense:return te.DenseUnion;case Nn.Sparse:return te.SparseUnion}return te.Union;case te.FixedSizeBinary:return te.FixedSizeBinary;case te.FixedSizeList:return te.FixedSizeList;case te.Dictionary:return te.Dictionary}throw new Error(`Unrecognized type '${te[e.typeId]}'`)}ht.prototype.visitInt8=null;ht.prototype.visitInt16=null;ht.prototype.visitInt32=null;ht.prototype.visitInt64=null;ht.prototype.visitUint8=null;ht.prototype.visitUint16=null;ht.prototype.visitUint32=null;ht.prototype.visitUint64=null;ht.prototype.visitFloat16=null;ht.prototype.visitFloat32=null;ht.prototype.visitFloat64=null;ht.prototype.visitDateDay=null;ht.prototype.visitDateMillisecond=null;ht.prototype.visitTimestampSecond=null;ht.prototype.visitTimestampMillisecond=null;ht.prototype.visitTimestampMicrosecond=null;ht.prototype.visitTimestampNanosecond=null;ht.prototype.visitTimeSecond=null;ht.prototype.visitTimeMillisecond=null;ht.prototype.visitTimeMicrosecond=null;ht.prototype.visitTimeNanosecond=null;ht.prototype.visitDenseUnion=null;ht.prototype.visitSparseUnion=null;ht.prototype.visitIntervalDayTime=null;ht.prototype.visitIntervalYearMonth=null;const i4=new Float64Array(1),sf=new Uint32Array(i4.buffer);function bk(e){const t=(e&31744)>>10,n=(e&1023)/1024,i=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return i*(n?Number.NaN:1/0);case 0:return i*(n?6103515625e-14*n:0)}return i*Math.pow(2,t-15)*(1+n)}function Tk(e){if(e!==e)return 32256;i4[0]=e;const t=(sf[1]&2147483648)>>16&65535;let n=sf[1]&2146435072,i=0;return n>=1089470464?sf[0]>0?n=31744:(n=(n&2080374784)>>16,i=(sf[1]&1048575)>>10):n<=1056964608?(i=1048576+(sf[1]&1048575),i=1048576+(i<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,i=(sf[1]&1048575)+512>>10),t|n|i&65535}const jV=Object.freeze(Object.defineProperty({__proto__:null,float64ToUint16:Tk,uint16ToFloat64:bk},Symbol.toStringTag,{value:"Module"}));class it extends ht{}function ct(e){return(t,n,i)=>{if(t.setValid(n,i!=null))return e(t,n,i)}}const qV=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},Ek=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},GV=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},HV=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},s4=(e,t,n,i)=>{if(n+1<t.length){const{[n]:s,[n+1]:l}=t;e.set(i.subarray(0,l-s),s)}},WV=({offset:e,values:t},n,i)=>{const s=e+n;i?t[s>>3]|=1<<s%8:t[s>>3]&=~(1<<s%8)},Bo=({values:e},t,n)=>{e[t]=n},vk=({values:e},t,n)=>{e[t]=n},r4=({values:e},t,n)=>{e[t]=Tk(n)},VV=(e,t,n)=>{switch(e.type.precision){case bn.HALF:return r4(e,t,n);case bn.SINGLE:case bn.DOUBLE:return vk(e,t,n)}},Sk=({values:e},t,n)=>{qV(e,t,n.valueOf())},xk=({values:e},t,n)=>{Ek(e,t*2,n.valueOf())},a4=({stride:e,values:t},n,i)=>{t.set(i.subarray(0,e),e*n)},YV=({values:e,valueOffsets:t},n,i)=>s4(e,t,n,i),XV=({values:e,valueOffsets:t},n,i)=>{s4(e,t,n,M0(i))},o4=(e,t,n)=>{e.type.unit===Hi.DAY?Sk(e,t,n):xk(e,t,n)},kk=({values:e},t,n)=>Ek(e,t*2,n/1e3),Bk=({values:e},t,n)=>Ek(e,t*2,n),Fk=({values:e},t,n)=>GV(e,t*2,n),Ik=({values:e},t,n)=>HV(e,t*2,n),l4=(e,t,n)=>{switch(e.type.unit){case nt.SECOND:return kk(e,t,n);case nt.MILLISECOND:return Bk(e,t,n);case nt.MICROSECOND:return Fk(e,t,n);case nt.NANOSECOND:return Ik(e,t,n)}},Mk=({values:e},t,n)=>{e[t]=n},Ak=({values:e},t,n)=>{e[t]=n},Ok=({values:e},t,n)=>{e[t]=n},Nk=({values:e},t,n)=>{e[t]=n},c4=(e,t,n)=>{switch(e.type.unit){case nt.SECOND:return Mk(e,t,n);case nt.MILLISECOND:return Ak(e,t,n);case nt.MICROSECOND:return Ok(e,t,n);case nt.NANOSECOND:return Nk(e,t,n)}},d4=({values:e,stride:t},n,i)=>{e.set(i.subarray(0,t),t*n)},KV=(e,t,n)=>{const i=e.children[0],s=e.valueOffsets,l=Ds.getVisitFn(i);if(Array.isArray(n))for(let c=-1,d=s[t],f=s[t+1];d<f;)l(i,d++,n[++c]);else for(let c=-1,d=s[t],f=s[t+1];d<f;)l(i,d++,n.get(++c))},JV=(e,t,n)=>{const i=e.children[0],{valueOffsets:s}=e,l=Ds.getVisitFn(i);let{[t]:c,[t+1]:d}=s;const f=n instanceof Map?n.entries():Object.entries(n);for(const u of f)if(l(i,c,u),++c>=d)break},QV=(e,t)=>(n,i,s,l)=>i&&n(i,e,t[l]),ZV=(e,t)=>(n,i,s,l)=>i&&n(i,e,t.get(l)),eY=(e,t)=>(n,i,s,l)=>i&&n(i,e,t.get(s.name)),tY=(e,t)=>(n,i,s,l)=>i&&n(i,e,t[s.name]),nY=(e,t,n)=>{const i=e.type.children.map(l=>Ds.getVisitFn(l.type)),s=n instanceof Map?eY(t,n):n instanceof qe?ZV(t,n):Array.isArray(n)?QV(t,n):tY(t,n);e.type.children.forEach((l,c)=>s(i[c],e.children[c],l,c))},iY=(e,t,n)=>{e.type.mode===Nn.Dense?f4(e,t,n):u4(e,t,n)},f4=(e,t,n)=>{const i=e.type.typeIdToChildIndex[e.typeIds[t]],s=e.children[i];Ds.visit(s,e.valueOffsets[t],n)},u4=(e,t,n)=>{const i=e.type.typeIdToChildIndex[e.typeIds[t]],s=e.children[i];Ds.visit(s,t,n)},sY=(e,t,n)=>{var i;(i=e.dictionary)===null||i===void 0||i.set(e.values[t],n)},h4=(e,t,n)=>{e.type.unit===Ps.DAY_TIME?Ck(e,t,n):Rk(e,t,n)},Ck=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},Rk=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},rY=(e,t,n)=>{const{stride:i}=e,s=e.children[0],l=Ds.getVisitFn(s);if(Array.isArray(n))for(let c=-1,d=t*i;++c<i;)l(s,d+c,n[c]);else for(let c=-1,d=t*i;++c<i;)l(s,d+c,n.get(c))};it.prototype.visitBool=ct(WV);it.prototype.visitInt=ct(Bo);it.prototype.visitInt8=ct(Bo);it.prototype.visitInt16=ct(Bo);it.prototype.visitInt32=ct(Bo);it.prototype.visitInt64=ct(Bo);it.prototype.visitUint8=ct(Bo);it.prototype.visitUint16=ct(Bo);it.prototype.visitUint32=ct(Bo);it.prototype.visitUint64=ct(Bo);it.prototype.visitFloat=ct(VV);it.prototype.visitFloat16=ct(r4);it.prototype.visitFloat32=ct(vk);it.prototype.visitFloat64=ct(vk);it.prototype.visitUtf8=ct(XV);it.prototype.visitBinary=ct(YV);it.prototype.visitFixedSizeBinary=ct(a4);it.prototype.visitDate=ct(o4);it.prototype.visitDateDay=ct(Sk);it.prototype.visitDateMillisecond=ct(xk);it.prototype.visitTimestamp=ct(l4);it.prototype.visitTimestampSecond=ct(kk);it.prototype.visitTimestampMillisecond=ct(Bk);it.prototype.visitTimestampMicrosecond=ct(Fk);it.prototype.visitTimestampNanosecond=ct(Ik);it.prototype.visitTime=ct(c4);it.prototype.visitTimeSecond=ct(Mk);it.prototype.visitTimeMillisecond=ct(Ak);it.prototype.visitTimeMicrosecond=ct(Ok);it.prototype.visitTimeNanosecond=ct(Nk);it.prototype.visitDecimal=ct(d4);it.prototype.visitList=ct(KV);it.prototype.visitStruct=ct(nY);it.prototype.visitUnion=ct(iY);it.prototype.visitDenseUnion=ct(f4);it.prototype.visitSparseUnion=ct(u4);it.prototype.visitDictionary=ct(sY);it.prototype.visitInterval=ct(h4);it.prototype.visitIntervalDayTime=ct(Ck);it.prototype.visitIntervalYearMonth=ct(Rk);it.prototype.visitFixedSizeList=ct(rY);it.prototype.visitMap=ct(JV);const Ds=new it,tr=Symbol.for("parent"),Gf=Symbol.for("rowIndex");class R0{constructor(t,n){return this[tr]=t,this[Gf]=n,new Proxy(this,new oY)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Gf],n=this[tr],i=n.type.children,s={};for(let l=-1,c=i.length;++l<c;)s[i[l].name]=Wi.visit(n.children[l],t);return s}toString(){return`{${[...this].map(([t,n])=>`${td(t)}: ${td(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new aY(this[tr],this[Gf])}}class aY{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,Wi.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(R0.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[tr]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Gf]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class oY{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[tr].type.children.map(n=>n.name)}has(t,n){return t[tr].type.children.findIndex(i=>i.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[tr].type.children.findIndex(i=>i.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const i=t[tr].type.children.findIndex(s=>s.name===n);if(i!==-1){const s=Wi.visit(t[tr].children[i],t[Gf]);return Reflect.set(t,n,s),s}}set(t,n,i){const s=t[tr].type.children.findIndex(l=>l.name===n);return s!==-1?(Ds.visit(t[tr].children[s],t[Gf],i),Reflect.set(t,n,i)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,i):!1}}class Qe extends ht{}function st(e){return(t,n)=>t.getValid(n)?e(t,n):null}const lY=(e,t)=>864e5*e[t],Lk=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),cY=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,dY=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,_4=e=>new Date(e),fY=(e,t)=>_4(lY(e,t)),uY=(e,t)=>_4(Lk(e,t)),hY=(e,t)=>null,g4=(e,t,n)=>{if(n+1>=t.length)return null;const i=t[n],s=t[n+1];return e.subarray(i,s)},_Y=({offset:e,values:t},n)=>{const i=e+n;return(t[i>>3]&1<<i%8)!==0},p4=({values:e},t)=>fY(e,t),y4=({values:e},t)=>uY(e,t*2),Ul=({stride:e,values:t},n)=>t[e*n],gY=({stride:e,values:t},n)=>bk(t[e*n]),m4=({values:e},t)=>e[t],pY=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),yY=({values:e,valueOffsets:t},n)=>g4(e,t,n),mY=({values:e,valueOffsets:t},n)=>{const i=g4(e,t,n);return i!==null?Pv(i):null},wY=({values:e},t)=>e[t],bY=({type:e,values:t},n)=>e.precision!==bn.HALF?t[n]:bk(t[n]),TY=(e,t)=>e.type.unit===Hi.DAY?p4(e,t):y4(e,t),w4=({values:e},t)=>1e3*Lk(e,t*2),b4=({values:e},t)=>Lk(e,t*2),T4=({values:e},t)=>cY(e,t*2),E4=({values:e},t)=>dY(e,t*2),EY=(e,t)=>{switch(e.type.unit){case nt.SECOND:return w4(e,t);case nt.MILLISECOND:return b4(e,t);case nt.MICROSECOND:return T4(e,t);case nt.NANOSECOND:return E4(e,t)}},v4=({values:e},t)=>e[t],S4=({values:e},t)=>e[t],x4=({values:e},t)=>e[t],k4=({values:e},t)=>e[t],vY=(e,t)=>{switch(e.type.unit){case nt.SECOND:return v4(e,t);case nt.MILLISECOND:return S4(e,t);case nt.MICROSECOND:return x4(e,t);case nt.NANOSECOND:return k4(e,t)}},SY=({values:e,stride:t},n)=>$g.decimal(e.subarray(t*n,t*(n+1))),xY=(e,t)=>{const{valueOffsets:n,stride:i,children:s}=e,{[t*i]:l,[t*i+1]:c}=n,f=s[0].slice(l,c-l);return new qe([f])},kY=(e,t)=>{const{valueOffsets:n,children:i}=e,{[t]:s,[t+1]:l}=n,c=i[0];return new Ug(c.slice(s,l-s))},BY=(e,t)=>new R0(e,t),FY=(e,t)=>e.type.mode===Nn.Dense?B4(e,t):F4(e,t),B4=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[n];return Wi.visit(i,e.valueOffsets[t])},F4=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[n];return Wi.visit(i,t)},IY=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},MY=(e,t)=>e.type.unit===Ps.DAY_TIME?I4(e,t):M4(e,t),I4=({values:e},t)=>e.subarray(2*t,2*(t+1)),M4=({values:e},t)=>{const n=e[t],i=new Int32Array(2);return i[0]=Math.trunc(n/12),i[1]=Math.trunc(n%12),i},AY=(e,t)=>{const{stride:n,children:i}=e,l=i[0].slice(t*n,n);return new qe([l])};Qe.prototype.visitNull=st(hY);Qe.prototype.visitBool=st(_Y);Qe.prototype.visitInt=st(wY);Qe.prototype.visitInt8=st(Ul);Qe.prototype.visitInt16=st(Ul);Qe.prototype.visitInt32=st(Ul);Qe.prototype.visitInt64=st(m4);Qe.prototype.visitUint8=st(Ul);Qe.prototype.visitUint16=st(Ul);Qe.prototype.visitUint32=st(Ul);Qe.prototype.visitUint64=st(m4);Qe.prototype.visitFloat=st(bY);Qe.prototype.visitFloat16=st(gY);Qe.prototype.visitFloat32=st(Ul);Qe.prototype.visitFloat64=st(Ul);Qe.prototype.visitUtf8=st(mY);Qe.prototype.visitBinary=st(yY);Qe.prototype.visitFixedSizeBinary=st(pY);Qe.prototype.visitDate=st(TY);Qe.prototype.visitDateDay=st(p4);Qe.prototype.visitDateMillisecond=st(y4);Qe.prototype.visitTimestamp=st(EY);Qe.prototype.visitTimestampSecond=st(w4);Qe.prototype.visitTimestampMillisecond=st(b4);Qe.prototype.visitTimestampMicrosecond=st(T4);Qe.prototype.visitTimestampNanosecond=st(E4);Qe.prototype.visitTime=st(vY);Qe.prototype.visitTimeSecond=st(v4);Qe.prototype.visitTimeMillisecond=st(S4);Qe.prototype.visitTimeMicrosecond=st(x4);Qe.prototype.visitTimeNanosecond=st(k4);Qe.prototype.visitDecimal=st(SY);Qe.prototype.visitList=st(xY);Qe.prototype.visitStruct=st(BY);Qe.prototype.visitUnion=st(FY);Qe.prototype.visitDenseUnion=st(B4);Qe.prototype.visitSparseUnion=st(F4);Qe.prototype.visitDictionary=st(IY);Qe.prototype.visitInterval=st(MY);Qe.prototype.visitIntervalDayTime=st(I4);Qe.prototype.visitIntervalYearMonth=st(M4);Qe.prototype.visitFixedSizeList=st(AY);Qe.prototype.visitMap=st(kY);const Wi=new Qe,rr=Symbol.for("keys"),Hf=Symbol.for("vals");class Ug{constructor(t){return this[rr]=new qe([t.children[0]]).memoize(),this[Hf]=t.children[1],new Proxy(this,new NY)}[Symbol.iterator](){return new OY(this[rr],this[Hf])}get size(){return this[rr].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[rr],n=this[Hf],i={};for(let s=-1,l=t.length;++s<l;)i[t.get(s)]=Wi.visit(n,s);return i}toString(){return`{${[...this].map(([t,n])=>`${td(t)}: ${td(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class OY{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),Wi.visit(this.vals,t)]})}}class NY{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[rr].toArray().map(String)}has(t,n){return t[rr].includes(n)}getOwnPropertyDescriptor(t,n){if(t[rr].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const i=t[rr].indexOf(n);if(i!==-1){const s=Wi.visit(Reflect.get(t,Hf),i);return Reflect.set(t,n,s),s}}set(t,n,i){const s=t[rr].indexOf(n);return s!==-1?(Ds.visit(Reflect.get(t,Hf),s,i),Reflect.set(t,n,i)):Reflect.has(t,n)?Reflect.set(t,n,i):!1}}Object.defineProperties(Ug.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[rr]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Hf]:{writable:!0,enumerable:!1,configurable:!1,value:null}});function CY(e,t,n){const i=e.length,s=t>-1?t:i+t%i;return n?n(e,s):s}let bN;function Pk(e,t,n,i){const{length:s=0}=e;let l=typeof t!="number"?0:t,c=typeof n!="number"?s:n;return l<0&&(l=(l%s+s)%s),c<0&&(c=(c%s+s)%s),c<l&&(bN=l,l=c,c=bN),c>s&&(c=s),i?i(e,l,c):[l,c]}const TN=e=>e!==e;function Ld(e){if(typeof e!=="object"||e===null)return TN(e)?TN:n=>n===e;if(e instanceof Date){const n=e.valueOf();return i=>i instanceof Date?i.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?AD(e,n):!1:e instanceof Map?LY(e):Array.isArray(e)?RY(e):e instanceof qe?PY(e):DY(e,!0)}function RY(e){const t=[];for(let n=-1,i=e.length;++n<i;)t[n]=Ld(e[n]);return L0(t)}function LY(e){let t=-1;const n=[];for(const i of e.values())n[++t]=Ld(i);return L0(n)}function PY(e){const t=[];for(let n=-1,i=e.length;++n<i;)t[n]=Ld(e.get(n));return L0(t)}function DY(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const i=[];for(let s=-1,l=n.length;++s<l;)i[s]=Ld(e[n[s]]);return L0(i,n)}function L0(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return $Y(e,n);case Map:return EN(e,n,n.keys());case Ug:case R0:case Object:case void 0:return EN(e,n,t||Object.keys(n))}return n instanceof qe?UY(e,n):!1}}function $Y(e,t){const n=e.length;if(t.length!==n)return!1;for(let i=-1;++i<n;)if(!e[i](t[i]))return!1;return!0}function UY(e,t){const n=e.length;if(t.length!==n)return!1;for(let i=-1;++i<n;)if(!e[i](t.get(i)))return!1;return!0}function EN(e,t,n){const i=n[Symbol.iterator](),s=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),l=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let c=0;const d=e.length;let f=l.next(),u=i.next(),a=s.next();for(;c<d&&!u.done&&!a.done&&!f.done&&!(u.value!==a.value||!e[c](f.value));++c,u=i.next(),a=s.next(),f=l.next());return c===d&&u.done&&a.done&&f.done?!0:(i.return&&i.return(),s.return&&s.return(),l.return&&l.return(),!1)}const zY=Object.freeze(Object.defineProperty({__proto__:null,clampIndex:CY,clampRange:Pk,createElementComparator:Ld},Symbol.toStringTag,{value:"Module"}));function P0(e,t,n,i){return(n&1<<i)!==0}function Dk(e,t,n,i){return(n&1<<i)>>i}function jY(e,t,n){return n?!!(e[t>>3]|=1<<t%8)||!0:!(e[t>>3]&=~(1<<t%8))&&!1}function D0(e,t,n){const i=n.byteLength+7&-8;if(e>0||n.byteLength<i){const s=new Uint8Array(i);return s.set(e%8===0?n.subarray(e>>3):Q_(new du(n,e,t,null,P0)).subarray(0,i)),s}return n}function Q_(e){const t=[];let n=0,i=0,s=0;for(const c of e)c&&(s|=1<<i),++i===8&&(t[n++]=s,s=i=0);(n===0||i>0)&&(t[n++]=s);const l=new Uint8Array(t.length+7&-8);return l.set(t),l}class du{constructor(t,n,i,s,l){this.bytes=t,this.length=i,this.context=s,this.get=l,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function Ow(e,t,n){if(n-t<=0)return 0;if(n-t<8){let l=0;for(const c of new du(e,t,n-t,e,Dk))l+=c;return l}const i=n>>3<<3,s=t+(t%8===0?0:8-t%8);return Ow(e,t,s)+Ow(e,i,n)+A4(e,s>>3,i-s>>3)}function A4(e,t,n){let i=0,s=Math.trunc(t);const l=new DataView(e.buffer,e.byteOffset,e.byteLength),c=n===void 0?e.byteLength:s+n;for(;c-s>=4;)i+=Qm(l.getUint32(s)),s+=4;for(;c-s>=2;)i+=Qm(l.getUint16(s)),s+=2;for(;c-s>=1;)i+=Qm(l.getUint8(s)),s+=1;return i}function Qm(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const qY=Object.freeze(Object.defineProperty({__proto__:null,BitIterator:du,getBit:Dk,getBool:P0,packBools:Q_,popcnt_array:A4,popcnt_bit_range:Ow,popcnt_uint32:Qm,setBool:jY,truncateBitmap:D0},Symbol.toStringTag,{value:"Module"})),GY=-1;class At{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let t=0;const{valueOffsets:n,values:i,nullBitmap:s,typeIds:l}=this;return n&&(t+=n.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),l&&(t+=l.byteLength),this.children.reduce((c,d)=>c+d.byteLength,t)}get nullCount(){let t=this._nullCount,n;return t<=GY&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-Ow(n,this.offset,this.offset+this.length)),t}constructor(t,n,i,s,l,c=[],d){this.type=t,this.children=c,this.dictionary=d,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(i||0,0)),this._nullCount=Math.floor(Math.max(s||0,-1));let f;l instanceof At?(this.stride=l.stride,this.values=l.values,this.typeIds=l.typeIds,this.nullBitmap=l.nullBitmap,this.valueOffsets=l.valueOffsets):(this.stride=Hr(t),l&&((f=l[0])&&(this.valueOffsets=f),(f=l[1])&&(this.values=f),(f=l[2])&&(this.nullBitmap=f),(f=l[3])&&(this.typeIds=f))),this.nullable=this._nullCount!==0&&this.nullBitmap&&this.nullBitmap.byteLength>0}getValid(t){if(this.nullable&&this.nullCount>0){const n=this.offset+t;return(this.nullBitmap[n>>3]&1<<n%8)!==0}return!0}setValid(t,n){if(!this.nullable)return n;if(!this.nullBitmap||this.nullBitmap.byteLength<=t>>3){const{nullBitmap:f}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:f,_nullCount:0})}const{nullBitmap:i,offset:s}=this,l=s+t>>3,c=(s+t)%8,d=i[l]>>c&1;return n?d===0&&(i[l]|=1<<c,this._nullCount=this.nullCount+1):d===1&&(i[l]&=~(1<<c),this._nullCount=this.nullCount-1),n}clone(t=this.type,n=this.offset,i=this.length,s=this._nullCount,l=this,c=this.children){return new At(t,n,i,s,l,c,this.dictionary)}slice(t,n){const{stride:i,typeId:s,children:l}=this,c=+(this._nullCount===0)-1,d=s===16?i:1,f=this._sliceBuffers(t,n,i,s);return this.clone(this.type,this.offset+t,n,c,f,l.length===0||this.valueOffsets?l:this._sliceChildren(l,d*t,d*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===te.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:i}=this,s=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);s[n>>3]=(1<<n-(n&-8))-1,i>0&&s.set(D0(this.offset,n,this.nullBitmap),0);const l=this.buffers;return l[er.VALIDITY]=s,this.clone(this.type,0,t,i+(t-n),l)}_sliceBuffers(t,n,i,s){let l;const{buffers:c}=this;return(l=c[er.TYPE])&&(c[er.TYPE]=l.subarray(t,t+n)),(l=c[er.OFFSET])&&(c[er.OFFSET]=l.subarray(t,t+n+1))||(l=c[er.DATA])&&(c[er.DATA]=s===6?l:l.subarray(i*t,i*(t+n))),c}_sliceChildren(t,n,i){return t.map(s=>s.slice(n,i))}}At.prototype.children=Object.freeze([]);class B_ extends ht{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:i=0,["length"]:s=0}=t;return new At(n,i,s,0)}visitBool(t){const{["type"]:n,["offset"]:i=0}=t,s=yt(t.nullBitmap),l=gt(n.ArrayType,t.data),{["length"]:c=l.length>>3,["nullCount"]:d=t.nullBitmap?-1:0}=t;return new At(n,i,c,d,[void 0,l,s])}visitInt(t){const{["type"]:n,["offset"]:i=0}=t,s=yt(t.nullBitmap),l=gt(n.ArrayType,t.data),{["length"]:c=l.length,["nullCount"]:d=t.nullBitmap?-1:0}=t;return new At(n,i,c,d,[void 0,l,s])}visitFloat(t){const{["type"]:n,["offset"]:i=0}=t,s=yt(t.nullBitmap),l=gt(n.ArrayType,t.data),{["length"]:c=l.length,["nullCount"]:d=t.nullBitmap?-1:0}=t;return new At(n,i,c,d,[void 0,l,s])}visitUtf8(t){const{["type"]:n,["offset"]:i=0}=t,s=yt(t.data),l=yt(t.nullBitmap),c=Ef(t.valueOffsets),{["length"]:d=c.length-1,["nullCount"]:f=t.nullBitmap?-1:0}=t;return new At(n,i,d,f,[c,s,l])}visitBinary(t){const{["type"]:n,["offset"]:i=0}=t,s=yt(t.data),l=yt(t.nullBitmap),c=Ef(t.valueOffsets),{["length"]:d=c.length-1,["nullCount"]:f=t.nullBitmap?-1:0}=t;return new At(n,i,d,f,[c,s,l])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:i=0}=t,s=yt(t.nullBitmap),l=gt(n.ArrayType,t.data),{["length"]:c=l.length/Hr(n),["nullCount"]:d=t.nullBitmap?-1:0}=t;return new At(n,i,c,d,[void 0,l,s])}visitDate(t){const{["type"]:n,["offset"]:i=0}=t,s=yt(t.nullBitmap),l=gt(n.ArrayType,t.data),{["length"]:c=l.length/Hr(n),["nullCount"]:d=t.nullBitmap?-1:0}=t;return new At(n,i,c,d,[void 0,l,s])}visitTimestamp(t){const{["type"]:n,["offset"]:i=0}=t,s=yt(t.nullBitmap),l=gt(n.ArrayType,t.data),{["length"]:c=l.length/Hr(n),["nullCount"]:d=t.nullBitmap?-1:0}=t;return new At(n,i,c,d,[void 0,l,s])}visitTime(t){const{["type"]:n,["offset"]:i=0}=t,s=yt(t.nullBitmap),l=gt(n.ArrayType,t.data),{["length"]:c=l.length/Hr(n),["nullCount"]:d=t.nullBitmap?-1:0}=t;return new At(n,i,c,d,[void 0,l,s])}visitDecimal(t){const{["type"]:n,["offset"]:i=0}=t,s=yt(t.nullBitmap),l=gt(n.ArrayType,t.data),{["length"]:c=l.length/Hr(n),["nullCount"]:d=t.nullBitmap?-1:0}=t;return new At(n,i,c,d,[void 0,l,s])}visitList(t){const{["type"]:n,["offset"]:i=0,["child"]:s}=t,l=yt(t.nullBitmap),c=Ef(t.valueOffsets),{["length"]:d=c.length-1,["nullCount"]:f=t.nullBitmap?-1:0}=t;return new At(n,i,d,f,[c,void 0,l],[s])}visitStruct(t){const{["type"]:n,["offset"]:i=0,["children"]:s=[]}=t,l=yt(t.nullBitmap),{length:c=s.reduce((f,{length:u})=>Math.max(f,u),0),nullCount:d=t.nullBitmap?-1:0}=t;return new At(n,i,c,d,[void 0,void 0,l],s)}visitUnion(t){const{["type"]:n,["offset"]:i=0,["children"]:s=[]}=t,l=yt(t.nullBitmap),c=gt(n.ArrayType,t.typeIds),{["length"]:d=c.length,["nullCount"]:f=t.nullBitmap?-1:0}=t;if(Ge.isSparseUnion(n))return new At(n,i,d,f,[void 0,void 0,l,c],s);const u=Ef(t.valueOffsets);return new At(n,i,d,f,[u,void 0,l,c],s)}visitDictionary(t){const{["type"]:n,["offset"]:i=0}=t,s=yt(t.nullBitmap),l=gt(n.indices.ArrayType,t.data),{["dictionary"]:c=new qe([new B_().visit({type:n.dictionary})])}=t,{["length"]:d=l.length,["nullCount"]:f=t.nullBitmap?-1:0}=t;return new At(n,i,d,f,[void 0,l,s],[],c)}visitInterval(t){const{["type"]:n,["offset"]:i=0}=t,s=yt(t.nullBitmap),l=gt(n.ArrayType,t.data),{["length"]:c=l.length/Hr(n),["nullCount"]:d=t.nullBitmap?-1:0}=t;return new At(n,i,c,d,[void 0,l,s])}visitFixedSizeList(t){const{["type"]:n,["offset"]:i=0,["child"]:s=new B_().visit({type:n.valueType})}=t,l=yt(t.nullBitmap),{["length"]:c=s.length/Hr(n),["nullCount"]:d=t.nullBitmap?-1:0}=t;return new At(n,i,c,d,[void 0,void 0,l],[s])}visitMap(t){const{["type"]:n,["offset"]:i=0,["child"]:s=new B_().visit({type:n.childType})}=t,l=yt(t.nullBitmap),c=Ef(t.valueOffsets),{["length"]:d=c.length-1,["nullCount"]:f=t.nullBitmap?-1:0}=t;return new At(n,i,d,f,[c,void 0,l],[s])}}function Ye(e){return new B_().visit(e)}class vN{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function O4(e){return e.reduce((t,n)=>t+n.nullCount,0)}function N4(e){return e.reduce((t,n,i)=>(t[i+1]=t[i]+n.length,t),new Uint32Array(e.length+1))}function C4(e,t,n,i){const s=[];for(let l=-1,c=e.length;++l<c;){const d=e[l],f=t[l],{length:u}=d;if(f>=i)break;if(n>=f+u)continue;if(f>=n&&f+u<=i){s.push(d);continue}const a=Math.max(0,n-f),m=Math.min(i-f,u);s.push(d.slice(a,m-a))}return s.length===0&&s.push(e[0].slice(0,0)),s}function $k(e,t,n,i){let s=0,l=0,c=t.length-1;do{if(s>=c-1)return n<t[c]?i(e,s,n-t[s]):null;l=s+Math.trunc((c-s)*.5),n<t[l]?c=l:s=l}while(s<c)}function Uk(e,t){return e.getValid(t)}function Wf(e){function t(n,i,s){return e(n[i],s)}return function(n){const i=this.data;return $k(i,this._offsets,n,t)}}function R4(e){let t;function n(i,s,l){return e(i[s],l,t)}return function(i,s){const l=this.data;t=s;const c=$k(l,this._offsets,i,n);return t=void 0,c}}function L4(e){let t;function n(i,s,l){let c=l,d=0,f=0;for(let u=s-1,a=i.length;++u<a;){const m=i[u];if(~(d=e(m,t,c)))return f+d;c=0,f+=m.length}return-1}return function(i,s){t=i;const l=this.data,c=typeof s!="number"?n(l,0,0):$k(l,this._offsets,s,n);return t=void 0,c}}class Ze extends ht{}function HY(e,t){return t===null&&e.length>0?0:-1}function WY(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let i=0;for(const s of new du(n,e.offset+(t||0),e.length,n,P0)){if(!s)return i;++i}return-1}function ft(e,t,n){if(t===void 0)return-1;if(t===null)return WY(e,n);const i=Wi.getVisitFn(e),s=Ld(t);for(let l=(n||0)-1,c=e.length;++l<c;)if(s(i(e,l)))return l;return-1}function P4(e,t,n){const i=Wi.getVisitFn(e),s=Ld(t);for(let l=(n||0)-1,c=e.length;++l<c;)if(s(i(e,l)))return l;return-1}Ze.prototype.visitNull=HY;Ze.prototype.visitBool=ft;Ze.prototype.visitInt=ft;Ze.prototype.visitInt8=ft;Ze.prototype.visitInt16=ft;Ze.prototype.visitInt32=ft;Ze.prototype.visitInt64=ft;Ze.prototype.visitUint8=ft;Ze.prototype.visitUint16=ft;Ze.prototype.visitUint32=ft;Ze.prototype.visitUint64=ft;Ze.prototype.visitFloat=ft;Ze.prototype.visitFloat16=ft;Ze.prototype.visitFloat32=ft;Ze.prototype.visitFloat64=ft;Ze.prototype.visitUtf8=ft;Ze.prototype.visitBinary=ft;Ze.prototype.visitFixedSizeBinary=ft;Ze.prototype.visitDate=ft;Ze.prototype.visitDateDay=ft;Ze.prototype.visitDateMillisecond=ft;Ze.prototype.visitTimestamp=ft;Ze.prototype.visitTimestampSecond=ft;Ze.prototype.visitTimestampMillisecond=ft;Ze.prototype.visitTimestampMicrosecond=ft;Ze.prototype.visitTimestampNanosecond=ft;Ze.prototype.visitTime=ft;Ze.prototype.visitTimeSecond=ft;Ze.prototype.visitTimeMillisecond=ft;Ze.prototype.visitTimeMicrosecond=ft;Ze.prototype.visitTimeNanosecond=ft;Ze.prototype.visitDecimal=ft;Ze.prototype.visitList=ft;Ze.prototype.visitStruct=ft;Ze.prototype.visitUnion=ft;Ze.prototype.visitDenseUnion=P4;Ze.prototype.visitSparseUnion=P4;Ze.prototype.visitDictionary=ft;Ze.prototype.visitInterval=ft;Ze.prototype.visitIntervalDayTime=ft;Ze.prototype.visitIntervalYearMonth=ft;Ze.prototype.visitFixedSizeList=ft;Ze.prototype.visitMap=ft;const Nw=new Ze;class et extends ht{}function rt(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===te.Timestamp||t instanceof oi&&t.bitWidth!==64||t instanceof _a&&t.bitWidth!==64||t instanceof mo&&t.precision!==bn.HALF))return new vN(e.data.length,i=>{const s=e.data[i];return s.values.subarray(0,s.length)[Symbol.iterator]()});let n=0;return new vN(e.data.length,i=>{const l=e.data[i].length,c=e.slice(n,n+l);return n+=l,new VY(c)})}class VY{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}et.prototype.visitNull=rt;et.prototype.visitBool=rt;et.prototype.visitInt=rt;et.prototype.visitInt8=rt;et.prototype.visitInt16=rt;et.prototype.visitInt32=rt;et.prototype.visitInt64=rt;et.prototype.visitUint8=rt;et.prototype.visitUint16=rt;et.prototype.visitUint32=rt;et.prototype.visitUint64=rt;et.prototype.visitFloat=rt;et.prototype.visitFloat16=rt;et.prototype.visitFloat32=rt;et.prototype.visitFloat64=rt;et.prototype.visitUtf8=rt;et.prototype.visitBinary=rt;et.prototype.visitFixedSizeBinary=rt;et.prototype.visitDate=rt;et.prototype.visitDateDay=rt;et.prototype.visitDateMillisecond=rt;et.prototype.visitTimestamp=rt;et.prototype.visitTimestampSecond=rt;et.prototype.visitTimestampMillisecond=rt;et.prototype.visitTimestampMicrosecond=rt;et.prototype.visitTimestampNanosecond=rt;et.prototype.visitTime=rt;et.prototype.visitTimeSecond=rt;et.prototype.visitTimeMillisecond=rt;et.prototype.visitTimeMicrosecond=rt;et.prototype.visitTimeNanosecond=rt;et.prototype.visitDecimal=rt;et.prototype.visitList=rt;et.prototype.visitStruct=rt;et.prototype.visitUnion=rt;et.prototype.visitDenseUnion=rt;et.prototype.visitSparseUnion=rt;et.prototype.visitDictionary=rt;et.prototype.visitInterval=rt;et.prototype.visitIntervalDayTime=rt;et.prototype.visitIntervalYearMonth=rt;et.prototype.visitFixedSizeList=rt;et.prototype.visitMap=rt;const zk=new et,YY=(e,t)=>e+t;class zl extends ht{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===nt.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitStruct(t,n){return t.children.reduce((i,s)=>i+ga.visit(s,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((i,s)=>i+ga.visit(s,n),0)}visitDictionary(t,n){var i;return t.type.indices.bitWidth/8+(((i=t.dictionary)===null||i===void 0?void 0:i.getByteLength(t.values[n]))||0)}}const XY=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),KY=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),JY=({valueOffsets:e,stride:t,children:n},i)=>{const s=n[0],{[i*t]:l}=e,{[i*t+1]:c}=e,d=ga.getVisitFn(s.type),f=s.slice(l,c-l);let u=8;for(let a=-1,m=c-l;++a<m;)u+=d(f,a);return u},QY=({stride:e,children:t},n)=>{const i=t[0],s=i.slice(n*e,e),l=ga.getVisitFn(i.type);let c=0;for(let d=-1,f=s.length;++d<f;)c+=l(s,d);return c},ZY=(e,t)=>e.type.mode===Nn.Dense?D4(e,t):$4(e,t),D4=({type:e,children:t,typeIds:n,valueOffsets:i},s)=>{const l=e.typeIdToChildIndex[n[s]];return 8+ga.visit(t[l],i[s])},$4=({children:e},t)=>4+ga.visitMany(e,e.map(()=>t)).reduce(YY,0);zl.prototype.visitUtf8=XY;zl.prototype.visitBinary=KY;zl.prototype.visitList=JY;zl.prototype.visitFixedSizeList=QY;zl.prototype.visitUnion=ZY;zl.prototype.visitDenseUnion=D4;zl.prototype.visitSparseUnion=$4;const ga=new zl;var U4;const z4={},j4={};class qe{constructor(t){var n,i,s;const l=t[0]instanceof qe?t.flatMap(d=>d.data):t;if(l.length===0||l.some(d=>!(d instanceof At)))throw new TypeError("Vector constructor expects an Array of Data instances.");const c=(n=l[0])===null||n===void 0?void 0:n.type;switch(l.length){case 0:this._offsets=[0];break;case 1:{const{get:d,set:f,indexOf:u,byteLength:a}=z4[c.typeId],m=l[0];this.isValid=w=>Uk(m,w),this.get=w=>d(m,w),this.set=(w,y)=>f(m,w,y),this.indexOf=w=>u(m,w),this.getByteLength=w=>a(m,w),this._offsets=[0,m.length];break}default:Object.setPrototypeOf(this,j4[c.typeId]),this._offsets=N4(l);break}this.data=l,this.type=c,this.stride=Hr(c),this.numChildren=(s=(i=c.children)===null||i===void 0?void 0:i.length)!==null&&s!==void 0?s:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return this._byteLength===-1&&(this._byteLength=this.data.reduce((t,n)=>t+n.byteLength,0)),this._byteLength}get nullCount(){return this._nullCount===-1&&(this._nullCount=O4(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${te[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>0}getByteLength(t){return 0}[Symbol.iterator](){return zk.visit(this)}concat(...t){return new qe(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new qe(Pk(this,t,n,({data:i,_offsets:s},l,c)=>C4(i,s,l,c)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:i,stride:s,ArrayType:l}=this;switch(t.typeId){case te.Int:case te.Float:case te.Decimal:case te.Time:case te.Timestamp:switch(n.length){case 0:return new l;case 1:return n[0].values.subarray(0,i*s);default:return n.reduce((c,{values:d,length:f})=>(c.array.set(d.subarray(0,f*s),c.offset),c.offset+=f*s,c),{array:new l(i*s),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(i=>i.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new qe(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return Ge.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(Ge.isDictionary(this.type)){const t=new Cw(this.data[0].dictionary),n=this.data.map(i=>{const s=i.clone();return s.dictionary=t,s});return new qe(n)}return new Cw(this)}unmemoize(){if(Ge.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(i=>{const s=i.clone();return s.dictionary=t,s});return new qe(n)}return this}}U4=Symbol.toStringTag;qe[U4]=(e=>{e.type=Ge.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._nullCount=-1,e._byteLength=-1,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(te).map(n=>te[n]).filter(n=>typeof n=="number"&&n!==te.NONE);for(const n of t){const i=Wi.getVisitFnByTypeId(n),s=Ds.getVisitFnByTypeId(n),l=Nw.getVisitFnByTypeId(n),c=ga.getVisitFnByTypeId(n);z4[n]={get:i,set:s,indexOf:l,byteLength:c},j4[n]=Object.create(e,{isValid:{value:Wf(Uk)},get:{value:Wf(Wi.getVisitFnByTypeId(n))},set:{value:R4(Ds.getVisitFnByTypeId(n))},indexOf:{value:L4(Nw.getVisitFnByTypeId(n))},getByteLength:{value:Wf(ga.getVisitFnByTypeId(n))}})}return"Vector"})(qe.prototype);class Cw extends qe{constructor(t){super(t.data);const n=this.get,i=this.set,s=this.slice,l=new Array(this.length);Object.defineProperty(this,"get",{value(c){const d=l[c];if(d!==void 0)return d;const f=n.call(this,c);return l[c]=f,f}}),Object.defineProperty(this,"set",{value(c,d){i.call(this,c,d),l[c]=d}}),Object.defineProperty(this,"slice",{value:(c,d)=>new Cw(s.call(this,c,d))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new qe(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function $0(e){if(e){if(e instanceof At)return new qe([e]);if(e instanceof qe)return new qe(e.data);if(e.type instanceof Ge)return new qe([Ye(e)]);if(Array.isArray(e))return new qe(e.flatMap(t=>eX(t)));if(ArrayBuffer.isView(e)){e instanceof DataView&&(e=new Uint8Array(e.buffer));const t={offset:0,length:e.length,nullCount:0,data:e};if(e instanceof Int8Array)return new qe([Ye(Object.assign(Object.assign({},t),{type:new hk}))]);if(e instanceof Int16Array)return new qe([Ye(Object.assign(Object.assign({},t),{type:new _k}))]);if(e instanceof Int32Array)return new qe([Ye(Object.assign(Object.assign({},t),{type:new Tl}))]);if(e instanceof xo)return new qe([Ye(Object.assign(Object.assign({},t),{type:new N0}))]);if(e instanceof Uint8Array||e instanceof Uint8ClampedArray)return new qe([Ye(Object.assign(Object.assign({},t),{type:new gk}))]);if(e instanceof Uint16Array)return new qe([Ye(Object.assign(Object.assign({},t),{type:new pk}))]);if(e instanceof Uint32Array)return new qe([Ye(Object.assign(Object.assign({},t),{type:new yk}))]);if(e instanceof ko)return new qe([Ye(Object.assign(Object.assign({},t),{type:new mk}))]);if(e instanceof Float32Array)return new qe([Ye(Object.assign(Object.assign({},t),{type:new wk}))]);if(e instanceof Float64Array)return new qe([Ye(Object.assign(Object.assign({},t),{type:new C0}))]);throw new Error("Unrecognized input")}}throw new Error("Unrecognized input")}function eX(e){return e instanceof At?[e]:e instanceof qe?e.data:$0(e).data}function tX(e){if(!e||e.length<=0)return function(s){return!0};let t="";const n=e.filter(i=>i===i);return n.length>0&&(t=`
    switch (x) {${n.map(i=>`
        case ${nX(i)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function nX(e){return typeof e!="bigint"?td(e):`${td(e)}n`}const tE=(e,t)=>(Math.ceil(e)*t+63&-64||64)/t,iX=(e,t=0)=>e.length>=t?e.subarray(0,t):W_(new e.constructor(t),e,0);class U0{constructor(t,n=1){this.buffer=t,this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,i=this.length*n,s=this.buffer.length;i>=s&&this._resize(s===0?tE(i*1,this.BYTES_PER_ELEMENT):tE(i*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=tE(t*this.stride,this.BYTES_PER_ELEMENT);const n=iX(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=W_(new this.ArrayType(t),this.buffer)}}U0.prototype.offset=0;class zg extends U0{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class q4 extends zg{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:i}=this.reserve(t-this.length+1),s=t>>3,l=t%8,c=i[s]>>l&1;return n?c===0&&(i[s]|=1<<l,++this.numValid):c===1&&(i[s]&=~(1<<l),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class G4 extends zg{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,n){const i=this.length-1,s=this.reserve(t-i+1).buffer;return i<t++&&s.fill(s[i],i,t),s[t]=s[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let di=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=Hr(t),this._nulls=new q4,n&&n.length>0&&(this._isValid=tX(n))}toVector(){return new qe([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:i,_nulls:s,_typeIds:l,children:c}=this;return n&&(t+=n.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),l&&(t+=l.byteLength),c.reduce((d,f)=>d+f.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,i)=>n+i.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,i,s;const{type:l,length:c,nullCount:d,_typeIds:f,_offsets:u,_values:a,_nulls:m}=this;(n=f==null?void 0:f.flush(c))?s=u==null?void 0:u.flush(c):(s=u==null?void 0:u.flush(c))?t=a==null?void 0:a.flush(u.last()):t=a==null?void 0:a.flush(c),d>0&&(i=m==null?void 0:m.flush(c));const w=this.children.map(y=>y.flush());return this.clear(),Ye({type:l,length:c,nullCount:d,children:w,child:w[0],data:t,typeIds:n,nullBitmap:i,valueOffsets:s})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,i,s;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(i=this._offsets)===null||i===void 0||i.clear(),(s=this._typeIds)===null||s===void 0||s.clear();for(const l of this.children)l.clear();return this}};di.prototype.length=1;di.prototype.stride=1;di.prototype.children=null;di.prototype.finished=!1;di.prototype.nullValues=null;di.prototype._isValid=()=>!0;class jl extends di{constructor(t){super(t),this._values=new zg(new this.ArrayType(0),this.stride)}setValue(t,n){const i=this._values;return i.reserve(t-i.length+1),super.setValue(t,n)}}class z0 extends di{constructor(t){super(t),this._pendingLength=0,this._offsets=new G4}setValue(t,n){const i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.length),this._pendingLength+=n instanceof Ug?n[rr].length:n.length,i.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class Uv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,i,s){return t.prep(8,24),t.writeInt64(BigInt(s??0)),t.pad(4),t.writeInt32(i),t.writeInt64(BigInt(n??0)),t.offset()}}const nE=2,Xr=4,eo=4,qt=4,Yo=new Int32Array(2),SN=new Float32Array(Yo.buffer),xN=new Float64Array(Yo.buffer),rm=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var zv;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(zv||(zv={}));let fu=class H4{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new H4(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return Yo[0]=this.readInt32(t),SN[0]}readFloat64(t){return Yo[rm?0:1]=this.readInt32(t),Yo[rm?1:0]=this.readInt32(t+4),xN[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){SN[0]=n,this.writeInt32(t,Yo[0])}writeFloat64(t,n){xN[0]=n,this.writeInt32(t,Yo[rm?0:1]),this.writeInt32(t+4,Yo[rm?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Xr+eo)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<eo;n++)t+=String.fromCharCode(this.readInt8(this.position_+Xr+n));return t}__offset(t,n){const i=t-this.readInt32(t);return n<this.readInt16(i)?this.readInt16(i+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const i=this.readInt32(t);t+=Xr;const s=this.bytes_.subarray(t,t+i);return n===zv.UTF8_BYTES?s:this.text_decoder_.decode(s)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+Xr}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=eo)throw new Error("FlatBuffers: file identifier must be length "+eo);for(let n=0;n<eo;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+Xr+n))return!1;return!0}createScalarList(t,n){const i=[];for(let s=0;s<n;++s){const l=t(s);l!==null&&i.push(l)}return i}createObjList(t,n){const i=[];for(let s=0;s<n;++s){const l=t(s);l!==null&&i.push(l.unpack())}return i}},W4=class V4{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=fu.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const i=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<i+t+n;){const s=this.bb.capacity();this.bb=V4.growByteBuffer(this.bb),this.space+=this.bb.capacity()-s}this.pad(i)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,i){(this.force_defaults||n!=i)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,i){(this.force_defaults||n!=i)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,i){(this.force_defaults||n!=i)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,i){(this.force_defaults||n!==i)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,i){(this.force_defaults||n!=i)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,i){(this.force_defaults||n!=i)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,i){(this.force_defaults||n!=i)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,i){n!=i&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const i=n<<1,s=fu.allocate(i);return s.setPosition(i-n),s.bytes().set(t.bytes(),i-n),s}addOffset(t){this.prep(Xr,0),this.writeInt32(this.offset()-t+Xr)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const i=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const s=2;this.addInt16(t-this.object_start);const l=(i+s)*nE;this.addInt16(l);let c=0;const d=this.space;e:for(n=0;n<this.vtables.length;n++){const f=this.bb.capacity()-this.vtables[n];if(l==this.bb.readInt16(f)){for(let u=nE;u<l;u+=nE)if(this.bb.readInt16(d+u)!=this.bb.readInt16(f+u))continue e;c=this.vtables[n];break}}return c?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,c-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,i){const s=i?qt:0;if(n){const l=n;if(this.prep(this.minalign,Xr+eo+s),l.length!=eo)throw new Error("FlatBuffers: file identifier must be length "+eo);for(let c=eo-1;c>=0;c--)this.writeInt8(l.charCodeAt(c))}this.prep(this.minalign,Xr+s),this.addOffset(t),s&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const i=this.bb.capacity()-t,s=i-this.bb.readInt32(i);if(!(n<this.bb.readInt16(s)&&this.bb.readInt16(s+n)!=0))throw new Error("FlatBuffers: field "+n+" must be set")}startVector(t,n,i){this.notNested(),this.vector_num_elems=n,this.prep(Xr,t*n),this.prep(i,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let i=0,s=this.space,l=this.bb.bytes();i<n.length;i++)l[s++]=n[i];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let i=0;i<t.length;++i){const s=t[i];if(s!==null)n.push(this.createObjectOffset(s));else throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};class gn{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new gn).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+qt),(n||new gn).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,i){return gn.startKeyValue(t),gn.addKey(t,n),gn.addValue(t,i),gn.endKeyValue(t)}}var uu;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(uu||(uu={}));var hu;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(hu||(hu={}));var Rw;(function(e){e[e.DenseArray=0]="DenseArray"})(Rw||(Rw={}));class fs{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new fs).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+qt),(n||new fs).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,i){return fs.startInt(t),fs.addBitWidth(t,n),fs.addIsSigned(t,i),fs.endInt(t)}}class to{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new to).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+qt),(n||new to).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new fs).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):Rw.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,Rw.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class Nc{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new Nc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+qt),(n||new Nc).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return Nc.startBinary(t),Nc.endBinary(t)}}class Cc{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new Cc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+qt),(n||new Cc).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return Cc.startBool(t),Cc.endBool(t)}}var Lw;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Lw||(Lw={}));let Zm=class Sf{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new Sf).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+qt),(n||new Sf).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Lw.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,Lw.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return Sf.startDate(t),Sf.addUnit(t,n),Sf.endDate(t)}};class Oi{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new Oi).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+qt),(n||new Oi).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,i,s){return Oi.startDecimal(t),Oi.addPrecision(t,n),Oi.addScale(t,i),Oi.addBitWidth(t,s),Oi.endDecimal(t)}}var _u;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(_u||(_u={}));class Kr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new Kr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+qt),(n||new Kr).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return Kr.startFixedSizeBinary(t),Kr.addByteWidth(t,n),Kr.endFixedSizeBinary(t)}}class Jr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new Jr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+qt),(n||new Jr).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return Jr.startFixedSizeList(t),Jr.addListSize(t,n),Jr.endFixedSizeList(t)}}var Pw;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(Pw||(Pw={}));class Qr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new Qr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+qt),(n||new Qr).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Pw.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,Pw.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return Qr.startFloatingPoint(t),Qr.addPrecision(t,n),Qr.endFloatingPoint(t)}}var Dw;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Dw||(Dw={}));class Zr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new Zr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+qt),(n||new Zr).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Dw.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,Dw.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return Zr.startInterval(t),Zr.addUnit(t,n),Zr.endInterval(t)}}class Rc{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new Rc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+qt),(n||new Rc).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return Rc.startList(t),Rc.endList(t)}}let ew=class xf{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new xf).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+qt),(n||new xf).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return xf.startMap(t),xf.addKeysSorted(t,n),xf.endMap(t)}};class Lc{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new Lc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+qt),(n||new Lc).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return Lc.startNull(t),Lc.endNull(t)}}class Pc{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new Pc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+qt),(n||new Pc).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return Pc.startStruct_(t),Pc.endStruct_(t)}}let Zh=class mc{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new mc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+qt),(n||new mc).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):_u.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,_u.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,i){return mc.startTime(t),mc.addUnit(t,n),mc.addBitWidth(t,i),mc.endTime(t)}};class Fs{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new Fs).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+qt),(n||new Fs).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):_u.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,_u.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,i){return Fs.startTimestamp(t),Fs.addUnit(t,n),Fs.addTimezone(t,i),Fs.endTimestamp(t)}}var $w;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})($w||($w={}));let wc=class bc{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new bc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+qt),(n||new bc).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):$w.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,$w.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addInt32(n[i]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,i){return bc.startUnion(t),bc.addMode(t,n),bc.addTypeIds(t,i),bc.endUnion(t)}};class Dc{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new Dc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+qt),(n||new Dc).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return Dc.startUtf8(t),Dc.endUtf8(t)}}var dt;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(dt||(dt={}));let Bs=class tw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new tw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+qt),(n||new tw).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):dt.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new to).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const i=this.bb.__offset(this.bb_pos,14);return i?(n||new tw).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const i=this.bb.__offset(this.bb_pos,16);return i?(n||new gn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,dt.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},qr=class Va{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new Va).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+qt),(n||new Va).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):hu.Little}fields(t,n){const i=this.bb.__offset(this.bb_pos,6);return i?(n||new Bs).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new gn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,hu.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let i=n.length-1;i>=0;i--)t.addInt64(n[i]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,i,s,l){return Va.startSchema(t),Va.addEndianness(t,n),Va.addFields(t,i),Va.addCustomMetadata(t,s),Va.addFeatures(t,l),Va.endSchema(t)}};class as{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new as).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+qt),(n||new as).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):uu.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new qr).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new Uv).__init(this.bb.__vector(this.bb_pos+i)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const i=this.bb.__offset(this.bb_pos,10);return i?(n||new Uv).__init(this.bb.__vector(this.bb_pos+i)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const i=this.bb.__offset(this.bb_pos,12);return i?(n||new gn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,uu.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class vt{constructor(t=[],n,i){this.fields=t||[],this.metadata=n||new Map,i||(i=qv(t)),this.dictionaries=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),i=this.fields.filter(s=>n.has(s.name));return new vt(i,this.metadata)}selectAt(t){const n=t.map(i=>this.fields[i]).filter(Boolean);return new vt(n,this.metadata)}assign(...t){const n=t[0]instanceof vt?t[0]:Array.isArray(t[0])?new vt(t[0]):new vt(t),i=[...this.fields],s=am(am(new Map,this.metadata),n.metadata),l=n.fields.filter(d=>{const f=i.findIndex(u=>u.name===d.name);return~f?(i[f]=d.clone({metadata:am(am(new Map,i[f].metadata),d.metadata)}))&&!1:!0}),c=qv(l,new Map);return new vt([...i,...l],s,new Map([...this.dictionaries,...c]))}}vt.prototype.fields=null;vt.prototype.metadata=null;vt.prototype.dictionaries=null;let Rt=class jv{static new(...t){let[n,i,s,l]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],i===void 0&&(i=t[0].type),s===void 0&&(s=t[0].nullable),l===void 0&&(l=t[0].metadata)),new jv(`${n}`,i,s,l)}constructor(t,n,i=!1,s){this.name=t,this.type=n,this.nullable=i,this.metadata=s||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,i,s,l]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,i=this.type,s=this.nullable,l=this.metadata]=t:{name:n=this.name,type:i=this.type,nullable:s=this.nullable,metadata:l=this.metadata}=t[0],jv.new(n,i,s,l)}};Rt.prototype.type=null;Rt.prototype.name=null;Rt.prototype.nullable=null;Rt.prototype.metadata=null;function am(e,t){return new Map([...e||new Map,...t||new Map])}function qv(e,t=new Map){for(let n=-1,i=e.length;++n<i;){const l=e[n].type;if(Ge.isDictionary(l)){if(!t.has(l.id))t.set(l.id,l.dictionary);else if(t.get(l.id)!==l.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}l.children&&l.children.length>0&&qv(l.children,t)}return t}var sX=W4,rX=fu;class Z_{static decode(t){t=new rX(yt(t));const n=as.getRootAsFooter(t),i=vt.decode(n.schema());return new aX(i,n)}static encode(t){const n=new sX,i=vt.encode(n,t.schema);as.startRecordBatchesVector(n,t.numRecordBatches);for(const c of[...t.recordBatches()].slice().reverse())pa.encode(n,c);const s=n.endVector();as.startDictionariesVector(n,t.numDictionaries);for(const c of[...t.dictionaryBatches()].slice().reverse())pa.encode(n,c);const l=n.endVector();return as.startFooter(n),as.addSchema(n,i),as.addVersion(n,Li.V4),as.addRecordBatches(n,s),as.addDictionaries(n,l),as.finishFooterBuffer(n,as.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=Li.V4,i,s){this.schema=t,this.version=n,i&&(this._recordBatches=i),s&&(this._dictionaryBatches=s)}*recordBatches(){for(let t,n=-1,i=this.numRecordBatches;++n<i;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,i=this.numDictionaries;++n<i;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class aX extends Z_{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return pa.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return pa.decode(n)}return null}}class pa{static decode(t){return new pa(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:i}=n,s=BigInt(n.offset),l=BigInt(n.bodyLength);return Uv.createBlock(t,s,i,l)}constructor(t,n,i){this.metaDataLength=t,this.offset=Tr(i),this.bodyLength=Tr(n)}}const tn=Object.freeze({done:!0,value:void 0});class kN{constructor(t){this._json=t}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class jk{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class oX extends jk{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return Ae(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(tn);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return ds.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return ds.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return Ae(this,void 0,void 0,function*(){return yield this.abort(t),tn})}return(t){return Ae(this,void 0,void 0,function*(){return yield this.close(),tn})}read(t){return Ae(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return Ae(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,i)=>{this.resolvers.push({resolve:n,reject:i})}):Promise.resolve(tn)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class Vf extends oX{write(t){if((t=yt(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?Pv(this.toUint8Array(!0)):this.toUint8Array(!1).then(Pv)}toUint8Array(t=!1){return t?br(this._values)[0]:(()=>Ae(this,void 0,void 0,function*(){var n,i,s,l;const c=[];let d=0;try{for(var f=!0,u=ul(this),a;a=yield u.next(),n=a.done,!n;){l=a.value,f=!1;try{const m=l;c.push(m),d+=m.byteLength}finally{f=!0}}}catch(m){i={error:m}}finally{try{!f&&!n&&(s=u.return)&&(yield s.call(u))}finally{if(i)throw i.error}}return br(c,d)[0]}))()}}class eg{constructor(t){t&&(this.source=new lX(ds.fromIterable(t)))}[Symbol.iterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class vl{constructor(t){t instanceof vl?this.source=t.source:t instanceof Vf?this.source=new ac(ds.fromAsyncIterable(t)):FD(t)?this.source=new ac(ds.fromNodeStream(t)):fk(t)?this.source=new ac(ds.fromDOMStream(t)):BD(t)?this.source=new ac(ds.fromDOMStream(t.body)):Qu(t)?this.source=new ac(ds.fromIterable(t)):bl(t)?this.source=new ac(ds.fromAsyncIterable(t)):Rd(t)&&(this.source=new ac(ds.fromAsyncIterable(t)))}[Symbol.asyncIterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}get closed(){return this.source.closed}cancel(t){return this.source.cancel(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class lX{constructor(t){this.source=t}cancel(t){this.return(t)}peek(t){return this.next(t,"peek").value}read(t){return this.next(t,"read").value}next(t,n="read"){return this.source.next({cmd:n,size:t})}throw(t){return Object.create(this.source.throw&&this.source.throw(t)||tn)}return(t){return Object.create(this.source.return&&this.source.return(t)||tn)}}class ac{constructor(t){this.source=t,this._closedPromise=new Promise(n=>this._closedPromiseResolve=n)}cancel(t){return Ae(this,void 0,void 0,function*(){yield this.return(t)})}get closed(){return this._closedPromise}read(t){return Ae(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return Ae(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(t,n="read"){return Ae(this,void 0,void 0,function*(){return yield this.source.next({cmd:n,size:t})})}throw(t){return Ae(this,void 0,void 0,function*(){const n=this.source.throw&&(yield this.source.throw(t))||tn;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}return(t){return Ae(this,void 0,void 0,function*(){const n=this.source.return&&(yield this.source.return(t))||tn;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}}class BN extends eg{constructor(t,n){super(),this.position=0,this.buffer=yt(t),this.size=n===void 0?this.buffer.byteLength:n}readInt32(t){const{buffer:n,byteOffset:i}=this.readAt(t,4);return new DataView(n,i).getInt32(0,!0)}seek(t){return this.position=Math.min(t,this.size),t<this.size}read(t){const{buffer:n,size:i,position:s}=this;return n&&s<i?(typeof t!="number"&&(t=Number.POSITIVE_INFINITY),this.position=Math.min(i,s+Math.min(i-s,t)),n.subarray(s,this.position)):null}readAt(t,n){const i=this.buffer,s=Math.min(this.size,t+n);return i?i.subarray(t,s):new Uint8Array(n)}close(){this.buffer&&(this.buffer=null)}throw(t){return this.close(),{done:!0,value:t}}return(t){return this.close(),{done:!0,value:t}}}class Uw extends vl{constructor(t,n){super(),this.position=0,this._handle=t,typeof n=="number"?this.size=n:this._pending=(()=>Ae(this,void 0,void 0,function*(){this.size=(yield t.stat()).size,delete this._pending}))()}readInt32(t){return Ae(this,void 0,void 0,function*(){const{buffer:n,byteOffset:i}=yield this.readAt(t,4);return new DataView(n,i).getInt32(0,!0)})}seek(t){return Ae(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(t,this.size),t<this.size})}read(t){return Ae(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:n,size:i,position:s}=this;if(n&&s<i){typeof t!="number"&&(t=Number.POSITIVE_INFINITY);let l=s,c=0,d=0;const f=Math.min(i,l+Math.min(i-l,t)),u=new Uint8Array(Math.max(0,(this.position=f)-l));for(;(l+=d)<f&&(c+=d)<u.byteLength;)({bytesRead:d}=yield n.read(u,c,u.byteLength-c,l));return u}return null})}readAt(t,n){return Ae(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:i,size:s}=this;if(i&&t+n<s){const l=Math.min(s,t+n),c=new Uint8Array(l-t);return(yield i.read(c,0,n,t)).buffer}return new Uint8Array(n)})}close(){return Ae(this,void 0,void 0,function*(){const t=this._handle;this._handle=null,t&&(yield t.close())})}throw(t){return Ae(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}return(t){return Ae(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}}const cX=1<<16;function Af(e){return e<0&&(e=4294967295+e+1),`0x${e.toString(16)}`}const gu=8,qk=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class Gk{constructor(t){this.buffer=t}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(t){const n=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),i=new Uint32Array([t.buffer[1]>>>16,t.buffer[1]&65535,t.buffer[0]>>>16,t.buffer[0]&65535]);let s=n[3]*i[3];this.buffer[0]=s&65535;let l=s>>>16;return s=n[2]*i[3],l+=s,s=n[3]*i[2]>>>0,l+=s,this.buffer[0]+=l<<16,this.buffer[1]=l>>>0<s?cX:0,this.buffer[1]+=l>>>16,this.buffer[1]+=n[1]*i[3]+n[2]*i[2]+n[3]*i[1],this.buffer[1]+=n[0]*i[3]+n[1]*i[2]+n[2]*i[1]+n[3]*i[0]<<16,this}_plus(t){const n=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],n<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=n}lessThan(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]}equals(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]}greaterThan(t){return t.lessThan(this)}hex(){return`${Af(this.buffer[1])} ${Af(this.buffer[0])}`}}class Mt extends Gk{times(t){return this._times(t),this}plus(t){return this._plus(t),this}static from(t,n=new Uint32Array(2)){return Mt.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(2)){return Mt.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(2)){const i=t.length,s=new Mt(n);for(let l=0;l<i;){const c=gu<i-l?gu:i-l,d=new Mt(new Uint32Array([Number.parseInt(t.slice(l,l+c),10),0])),f=new Mt(new Uint32Array([qk[c],0]));s.times(f),s.plus(d),l+=c}return s}static convertArray(t){const n=new Uint32Array(t.length*2);for(let i=-1,s=t.length;++i<s;)Mt.from(t[i],new Uint32Array(n.buffer,n.byteOffset+2*i*4,2));return n}static multiply(t,n){return new Mt(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new Mt(new Uint32Array(t.buffer)).plus(n)}}class pi extends Gk{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(t){return this._times(t),this}plus(t){return this._plus(t),this}lessThan(t){const n=this.buffer[1]<<0,i=t.buffer[1]<<0;return n<i||n===i&&this.buffer[0]<t.buffer[0]}static from(t,n=new Uint32Array(2)){return pi.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(2)){return pi.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(2)){const i=t.startsWith("-"),s=t.length,l=new pi(n);for(let c=i?1:0;c<s;){const d=gu<s-c?gu:s-c,f=new pi(new Uint32Array([Number.parseInt(t.slice(c,c+d),10),0])),u=new pi(new Uint32Array([qk[d],0]));l.times(u),l.plus(f),c+=d}return i?l.negate():l}static convertArray(t){const n=new Uint32Array(t.length*2);for(let i=-1,s=t.length;++i<s;)pi.from(t[i],new Uint32Array(n.buffer,n.byteOffset+2*i*4,2));return n}static multiply(t,n){return new pi(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new pi(new Uint32Array(t.buffer)).plus(n)}}class Qs{constructor(t){this.buffer=t}high(){return new pi(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new pi(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(t){const n=new Mt(new Uint32Array([this.buffer[3],0])),i=new Mt(new Uint32Array([this.buffer[2],0])),s=new Mt(new Uint32Array([this.buffer[1],0])),l=new Mt(new Uint32Array([this.buffer[0],0])),c=new Mt(new Uint32Array([t.buffer[3],0])),d=new Mt(new Uint32Array([t.buffer[2],0])),f=new Mt(new Uint32Array([t.buffer[1],0])),u=new Mt(new Uint32Array([t.buffer[0],0]));let a=Mt.multiply(l,u);this.buffer[0]=a.low();const m=new Mt(new Uint32Array([a.high(),0]));return a=Mt.multiply(s,u),m.plus(a),a=Mt.multiply(l,f),m.plus(a),this.buffer[1]=m.low(),this.buffer[3]=m.lessThan(a)?1:0,this.buffer[2]=m.high(),new Mt(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(Mt.multiply(i,u)).plus(Mt.multiply(s,f)).plus(Mt.multiply(l,d)),this.buffer[3]+=Mt.multiply(n,u).plus(Mt.multiply(i,f)).plus(Mt.multiply(s,d)).plus(Mt.multiply(l,c)).low(),this}plus(t){const n=new Uint32Array(4);return n[3]=this.buffer[3]+t.buffer[3]>>>0,n[2]=this.buffer[2]+t.buffer[2]>>>0,n[1]=this.buffer[1]+t.buffer[1]>>>0,n[0]=this.buffer[0]+t.buffer[0]>>>0,n[0]<this.buffer[0]>>>0&&++n[1],n[1]<this.buffer[1]>>>0&&++n[2],n[2]<this.buffer[2]>>>0&&++n[3],this.buffer[3]=n[3],this.buffer[2]=n[2],this.buffer[1]=n[1],this.buffer[0]=n[0],this}hex(){return`${Af(this.buffer[3])} ${Af(this.buffer[2])} ${Af(this.buffer[1])} ${Af(this.buffer[0])}`}static multiply(t,n){return new Qs(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new Qs(new Uint32Array(t.buffer)).plus(n)}static from(t,n=new Uint32Array(4)){return Qs.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(4)){return Qs.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(4)){const i=t.startsWith("-"),s=t.length,l=new Qs(n);for(let c=i?1:0;c<s;){const d=gu<s-c?gu:s-c,f=new Qs(new Uint32Array([Number.parseInt(t.slice(c,c+d),10),0,0,0])),u=new Qs(new Uint32Array([qk[d],0,0,0]));l.times(u),l.plus(f),c+=d}return i?l.negate():l}static convertArray(t){const n=new Uint32Array(t.length*4);for(let i=-1,s=t.length;++i<s;)Qs.from(t[i],new Uint32Array(n.buffer,n.byteOffset+4*4*i,4));return n}}const dX=Object.freeze(Object.defineProperty({__proto__:null,BaseInt64:Gk,Int128:Qs,Int64:pi,Uint64:Mt},Symbol.toStringTag,{value:"Module"}));class Y4 extends ht{constructor(t,n,i,s){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=t,this.nodes=n,this.buffers=i,this.dictionaries=s}visit(t){return super.visit(t instanceof Rt?t.type:t)}visitNull(t,{length:n}=this.nextFieldNode()){return Ye({type:t,length:n})}visitBool(t,{length:n,nullCount:i}=this.nextFieldNode()){return Ye({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitInt(t,{length:n,nullCount:i}=this.nextFieldNode()){return Ye({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitFloat(t,{length:n,nullCount:i}=this.nextFieldNode()){return Ye({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitUtf8(t,{length:n,nullCount:i}=this.nextFieldNode()){return Ye({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitBinary(t,{length:n,nullCount:i}=this.nextFieldNode()){return Ye({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitFixedSizeBinary(t,{length:n,nullCount:i}=this.nextFieldNode()){return Ye({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitDate(t,{length:n,nullCount:i}=this.nextFieldNode()){return Ye({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitTimestamp(t,{length:n,nullCount:i}=this.nextFieldNode()){return Ye({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitTime(t,{length:n,nullCount:i}=this.nextFieldNode()){return Ye({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitDecimal(t,{length:n,nullCount:i}=this.nextFieldNode()){return Ye({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitList(t,{length:n,nullCount:i}=this.nextFieldNode()){return Ye({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}visitStruct(t,{length:n,nullCount:i}=this.nextFieldNode()){return Ye({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),children:this.visitMany(t.children)})}visitUnion(t){return t.mode===Nn.Sparse?this.visitSparseUnion(t):this.visitDenseUnion(t)}visitDenseUnion(t,{length:n,nullCount:i}=this.nextFieldNode()){return Ye({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),typeIds:this.readTypeIds(t),valueOffsets:this.readOffsets(t),children:this.visitMany(t.children)})}visitSparseUnion(t,{length:n,nullCount:i}=this.nextFieldNode()){return Ye({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),typeIds:this.readTypeIds(t),children:this.visitMany(t.children)})}visitDictionary(t,{length:n,nullCount:i}=this.nextFieldNode()){return Ye({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t.indices),dictionary:this.readDictionary(t)})}visitInterval(t,{length:n,nullCount:i}=this.nextFieldNode()){return Ye({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitFixedSizeList(t,{length:n,nullCount:i}=this.nextFieldNode()){return Ye({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),child:this.visit(t.children[0])})}visitMap(t,{length:n,nullCount:i}=this.nextFieldNode()){return Ye({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(t,n,i=this.nextBufferRange()){return n>0&&this.readData(t,i)||new Uint8Array(0)}readOffsets(t,n){return this.readData(t,n)}readTypeIds(t,n){return this.readData(t,n)}readData(t,{length:n,offset:i}=this.nextBufferRange()){return this.bytes.subarray(i,i+n)}readDictionary(t){return this.dictionaries.get(t.id)}}class fX extends Y4{constructor(t,n,i,s){super(new Uint8Array(0),n,i,s),this.sources=t}readNullBitmap(t,n,{offset:i}=this.nextBufferRange()){return n<=0?new Uint8Array(0):Q_(this.sources[i])}readOffsets(t,{offset:n}=this.nextBufferRange()){return gt(Uint8Array,gt(Int32Array,this.sources[n]))}readTypeIds(t,{offset:n}=this.nextBufferRange()){return gt(Uint8Array,gt(t.ArrayType,this.sources[n]))}readData(t,{offset:n}=this.nextBufferRange()){const{sources:i}=this;return Ge.isTimestamp(t)||(Ge.isInt(t)||Ge.isTime(t))&&t.bitWidth===64||Ge.isDate(t)&&t.unit===Hi.MILLISECOND?gt(Uint8Array,pi.convertArray(i[n])):Ge.isDecimal(t)?gt(Uint8Array,Qs.convertArray(i[n])):Ge.isBinary(t)||Ge.isFixedSizeBinary(t)?uX(i[n]):Ge.isBool(t)?Q_(i[n]):Ge.isUtf8(t)?M0(i[n].join("")):gt(Uint8Array,gt(t.ArrayType,i[n].map(s=>+s)))}}function uX(e){const t=e.join(""),n=new Uint8Array(t.length/2);for(let i=0;i<t.length;i+=2)n[i>>1]=Number.parseInt(t.slice(i,i+2),16);return n}class Hk extends z0{constructor(t){super(t),this._values=new U0(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,yt(n))}_flushPending(t,n){const i=this._offsets,s=this._values.reserve(n).buffer;let l=0;for(const[c,d]of t)if(d===void 0)i.set(c,0);else{const f=d.length;s.set(d,l),i.set(c,f),l+=f}}}class X4 extends di{constructor(t){super(t),this._values=new q4}setValue(t,n){this._values.set(t,+n)}}class jg extends jl{}jg.prototype._setValue=o4;class Wk extends jg{}Wk.prototype._setValue=Sk;class Vk extends jg{}Vk.prototype._setValue=xk;class Yk extends jl{}Yk.prototype._setValue=d4;class K4 extends di{constructor({type:t,nullValues:n,dictionaryHashFunction:i}){super({type:new bo(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=rd({type:this.type.indices,nullValues:n}),this.dictionary=rd({type:this.type.dictionary,nullValues:null}),typeof i=="function"&&(this.valueToKey=i)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const i=this.indices;return n=i.setValid(t,n),this.length=i.length,n}setValue(t,n){const i=this._keysToIndices,s=this.valueToKey(n);let l=i[s];return l===void 0&&(i[s]=l=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,l)}flush(){const t=this.type,n=this._dictionary,i=this.dictionary.toVector(),s=this.indices.flush().clone(t);return s.dictionary=n?n.concat(i):i,this.finished||(this._dictionaryOffset+=i.length),this._dictionary=s.dictionary,this.clear(),s}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class Xk extends jl{}Xk.prototype._setValue=a4;class J4 extends di{setValue(t,n){const[i]=this.children,s=t*this.stride;for(let l=-1,c=n.length;++l<c;)i.set(s+l,n[l])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const i=this.children.push(t);return this.type=new lu(this.type.listSize,new Rt(n,t.type,!0)),i}}class qg extends jl{setValue(t,n){this._values.set(t,n)}}class Q4 extends qg{setValue(t,n){super.setValue(t,Tk(n))}}class Z4 extends qg{}class e6 extends qg{}class Gg extends jl{}Gg.prototype._setValue=h4;class Kk extends Gg{}Kk.prototype._setValue=Ck;class Jk extends Gg{}Jk.prototype._setValue=Rk;class Ia extends jl{setValue(t,n){this._values.set(t,n)}}class t6 extends Ia{}class n6 extends Ia{}class i6 extends Ia{}class s6 extends Ia{}class r6 extends Ia{}class a6 extends Ia{}class o6 extends Ia{}class l6 extends Ia{}class c6 extends z0{constructor(t){super(t),this._offsets=new G4}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new sd(new Rt(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[i]=this.children;for(const[s,l]of t)if(typeof l>"u")n.set(s,0);else{const c=l.length,d=n.set(s,c).buffer[s];for(let f=-1;++f<c;)i.set(d+f,l[f])}}}class d6 extends z0{set(t,n){return super.set(t,n)}setValue(t,n){const i=n instanceof Map?n:new Map(Object.entries(n)),s=this._pending||(this._pending=new Map),l=s.get(t);l&&(this._pendingLength-=l.size),this._pendingLength+=i.size,s.set(t,i)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new cu(new Rt(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[i]=this.children;for(const[s,l]of t)if(l===void 0)n.set(s,0);else{let{[s]:c,[s+1]:d}=n.set(s,l.size).buffer;for(const f of l.entries())if(i.set(c,f),++c>=d)break}}}class f6 extends di{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class u6 extends di{setValue(t,n){const{children:i,type:s}=this;switch(Array.isArray(n)||n.constructor){case!0:return s.children.forEach((l,c)=>i[c].set(t,n[c]));case Map:return s.children.forEach((l,c)=>i[c].set(t,n.get(l.name)));default:return s.children.forEach((l,c)=>i[c].set(t,n[l.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(i=>i.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const i=this.children.push(t);return this.type=new kn([...this.type.children,new Rt(n,t.type,!0)]),i}}class Pd extends jl{}Pd.prototype._setValue=l4;class Qk extends Pd{}Qk.prototype._setValue=kk;class Zk extends Pd{}Zk.prototype._setValue=Bk;class eB extends Pd{}eB.prototype._setValue=Fk;class tB extends Pd{}tB.prototype._setValue=Ik;class Dd extends jl{}Dd.prototype._setValue=c4;class nB extends Dd{}nB.prototype._setValue=Mk;class iB extends Dd{}iB.prototype._setValue=Ak;class sB extends Dd{}sB.prototype._setValue=Ok;class rB extends Dd{}rB.prototype._setValue=Nk;class j0 extends di{constructor(t){super(t),this._typeIds=new zg(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,i){return i===void 0&&(i=this._valueToChildTypeId(this,n,t)),this.setValid(t,this.isValid(n))&&this.setValue(t,n,i),this}setValue(t,n,i){this._typeIds.set(t,i);const s=this.type.typeIdToChildIndex[i],l=this.children[s];l==null||l.set(t,n)}addChild(t,n=`${this.children.length}`){const i=this.children.push(t),{type:{children:s,mode:l,typeIds:c}}=this,d=[...s,new Rt(n,t.type)];return this.type=new El(l,[...c,i],d),i}_valueToChildTypeId(t,n,i){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class h6 extends j0{}class _6 extends j0{constructor(t){super(t),this._offsets=new zg(new Int32Array(0))}setValue(t,n,i){const s=this._typeIds.set(t,i).buffer[t],l=this.getChildAt(this.type.typeIdToChildIndex[s]),c=this._offsets.set(t,l.length).buffer[t];l==null||l.set(c,n)}}class aB extends z0{constructor(t){super(t),this._values=new U0(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,M0(n))}_flushPending(t,n){}}aB.prototype._flushPending=Hk.prototype._flushPending;class hX extends ht{visitNull(){return f6}visitBool(){return X4}visitInt(){return Ia}visitInt8(){return t6}visitInt16(){return n6}visitInt32(){return i6}visitInt64(){return s6}visitUint8(){return r6}visitUint16(){return a6}visitUint32(){return o6}visitUint64(){return l6}visitFloat(){return qg}visitFloat16(){return Q4}visitFloat32(){return Z4}visitFloat64(){return e6}visitUtf8(){return aB}visitBinary(){return Hk}visitFixedSizeBinary(){return Xk}visitDate(){return jg}visitDateDay(){return Wk}visitDateMillisecond(){return Vk}visitTimestamp(){return Pd}visitTimestampSecond(){return Qk}visitTimestampMillisecond(){return Zk}visitTimestampMicrosecond(){return eB}visitTimestampNanosecond(){return tB}visitTime(){return Dd}visitTimeSecond(){return nB}visitTimeMillisecond(){return iB}visitTimeMicrosecond(){return sB}visitTimeNanosecond(){return rB}visitDecimal(){return Yk}visitList(){return c6}visitStruct(){return u6}visitUnion(){return j0}visitDenseUnion(){return _6}visitSparseUnion(){return h6}visitDictionary(){return K4}visitInterval(){return Gg}visitIntervalDayTime(){return Kk}visitIntervalYearMonth(){return Jk}visitFixedSizeList(){return J4}visitMap(){return d6}}const _X=new hX;class tt extends ht{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((i,s)=>this.compareFields(i,n[s]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function es(e,t){return t instanceof e.constructor}function Hg(e,t){return e===t||es(e,t)}function Fo(e,t){return e===t||es(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function q0(e,t){return e===t||es(e,t)&&e.precision===t.precision}function gX(e,t){return e===t||es(e,t)&&e.byteWidth===t.byteWidth}function oB(e,t){return e===t||es(e,t)&&e.unit===t.unit}function Wg(e,t){return e===t||es(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function Vg(e,t){return e===t||es(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function pX(e,t){return e===t||es(e,t)&&e.children.length===t.children.length&&ya.compareManyFields(e.children,t.children)}function yX(e,t){return e===t||es(e,t)&&e.children.length===t.children.length&&ya.compareManyFields(e.children,t.children)}function lB(e,t){return e===t||es(e,t)&&e.mode===t.mode&&e.typeIds.every((n,i)=>n===t.typeIds[i])&&ya.compareManyFields(e.children,t.children)}function mX(e,t){return e===t||es(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&ya.visit(e.indices,t.indices)&&ya.visit(e.dictionary,t.dictionary)}function cB(e,t){return e===t||es(e,t)&&e.unit===t.unit}function wX(e,t){return e===t||es(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&ya.compareManyFields(e.children,t.children)}function bX(e,t){return e===t||es(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&ya.compareManyFields(e.children,t.children)}tt.prototype.visitNull=Hg;tt.prototype.visitBool=Hg;tt.prototype.visitInt=Fo;tt.prototype.visitInt8=Fo;tt.prototype.visitInt16=Fo;tt.prototype.visitInt32=Fo;tt.prototype.visitInt64=Fo;tt.prototype.visitUint8=Fo;tt.prototype.visitUint16=Fo;tt.prototype.visitUint32=Fo;tt.prototype.visitUint64=Fo;tt.prototype.visitFloat=q0;tt.prototype.visitFloat16=q0;tt.prototype.visitFloat32=q0;tt.prototype.visitFloat64=q0;tt.prototype.visitUtf8=Hg;tt.prototype.visitBinary=Hg;tt.prototype.visitFixedSizeBinary=gX;tt.prototype.visitDate=oB;tt.prototype.visitDateDay=oB;tt.prototype.visitDateMillisecond=oB;tt.prototype.visitTimestamp=Wg;tt.prototype.visitTimestampSecond=Wg;tt.prototype.visitTimestampMillisecond=Wg;tt.prototype.visitTimestampMicrosecond=Wg;tt.prototype.visitTimestampNanosecond=Wg;tt.prototype.visitTime=Vg;tt.prototype.visitTimeSecond=Vg;tt.prototype.visitTimeMillisecond=Vg;tt.prototype.visitTimeMicrosecond=Vg;tt.prototype.visitTimeNanosecond=Vg;tt.prototype.visitDecimal=Hg;tt.prototype.visitList=pX;tt.prototype.visitStruct=yX;tt.prototype.visitUnion=lB;tt.prototype.visitDenseUnion=lB;tt.prototype.visitSparseUnion=lB;tt.prototype.visitDictionary=mX;tt.prototype.visitInterval=cB;tt.prototype.visitIntervalDayTime=cB;tt.prototype.visitIntervalYearMonth=cB;tt.prototype.visitFixedSizeList=wX;tt.prototype.visitMap=bX;const ya=new tt;function zw(e,t){return ya.compareSchemas(e,t)}function TX(e,t){return ya.compareFields(e,t)}function g6(e,t){return ya.visit(e,t)}function rd(e){const t=e.type,n=new(_X.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const i=e.children||[],s={nullValues:e.nullValues},l=Array.isArray(i)?(c,d)=>i[d]||s:({name:c})=>i[c]||s;for(const[c,d]of t.children.entries()){const{type:f}=d,u=l(d,c);n.children.push(rd(Object.assign(Object.assign({},u),{type:f})))}}return n}function dB(e,t){if(e instanceof At||e instanceof qe||e.type instanceof Ge||ArrayBuffer.isView(e))return $0(e);const n={type:t??nw(e),nullValues:[null]},i=[...y6(n)(e)],s=i.length===1?i[0]:i.reduce((l,c)=>l.concat(c));return Ge.isDictionary(s.type)?s.memoize():s}function p6(e){const t=dB(e),n=new $n(new vt(t.type.children),t.data[0]);return new pn(n)}function nw(e){if(e.length===0)return new ha;let t=0,n=0,i=0,s=0,l=0,c=0,d=0,f=0;for(const u of e){if(u==null){++t;continue}switch(typeof u){case"bigint":++c;continue;case"boolean":++d;continue;case"number":++s;continue;case"string":++l;continue;case"object":Array.isArray(u)?++n:Object.prototype.toString.call(u)==="[object Date]"?++f:++i;continue}throw new TypeError("Unable to infer Vector type from input values, explicit type declaration expected.")}if(s+t===e.length)return new C0;if(l+t===e.length)return new bo(new au,new Tl);if(c+t===e.length)return new N0;if(d+t===e.length)return new ou;if(f+t===e.length)return new n4;if(n+t===e.length){const u=e,a=nw(u[u.findIndex(m=>m!=null)]);if(u.every(m=>m==null||g6(a,nw(m))))return new sd(new Rt("",a,!0))}else if(i+t===e.length){const u=new Map;for(const a of e)for(const m of Object.keys(a))!u.has(m)&&a[m]!=null&&u.set(m,new Rt(m,nw([a[m]]),!0));return new kn([...u.values()])}throw new TypeError("Unable to infer Vector type from input values, explicit type declaration expected.")}function y6(e){const{["queueingStrategy"]:t="count"}=e,{["highWaterMark"]:n=t!=="bytes"?Number.POSITIVE_INFINITY:Math.pow(2,14)}=e,i=t!=="bytes"?"length":"byteLength";return function*(s){let l=0;const c=rd(e);for(const d of s)c.append(d)[i]>=n&&++l&&(yield c.toVector());(c.finish().length>0||l===0)&&(yield c.toVector())}}function EX(e){const{["queueingStrategy"]:t="count"}=e,{["highWaterMark"]:n=t!=="bytes"?Number.POSITIVE_INFINITY:Math.pow(2,14)}=e,i=t!=="bytes"?"length":"byteLength";return function(s){return dr(this,arguments,function*(){var l,c,d,f;let u=0;const a=rd(e);try{for(var m=!0,w=ul(s),y;y=yield Ke(w.next()),l=y.done,!l;){f=y.value,m=!1;try{const o=f;a.append(o)[i]>=n&&++u&&(yield yield Ke(a.toVector()))}finally{m=!0}}}catch(o){c={error:o}}finally{try{!m&&!l&&(d=w.return)&&(yield Ke(d.call(w)))}finally{if(c)throw c.error}}(a.finish().length>0||u===0)&&(yield yield Ke(a.toVector()))})}}function iE(e,t){return vX(e,t.map(n=>n.data.concat()))}function vX(e,t){const n=[...e.fields],i=[],s={numBatches:t.reduce((m,w)=>Math.max(m,w.length),0)};let l=0,c=0,d=-1;const f=t.length;let u,a=[];for(;s.numBatches-- >0;){for(c=Number.POSITIVE_INFINITY,d=-1;++d<f;)a[d]=u=t[d].shift(),c=Math.min(c,u?u.length:c);Number.isFinite(c)&&(a=SX(n,c,a,t,s),c>0&&(i[l++]=Ye({type:new kn(n),length:c,nullCount:0,children:a.slice()})))}return[e=e.assign(n),i.map(m=>new $n(e,m))]}function SX(e,t,n,i,s){var l;const c=(t+63&-64)>>3;for(let d=-1,f=i.length;++d<f;){const u=n[d],a=u==null?void 0:u.length;if(a>=t)a===t?n[d]=u:(n[d]=u.slice(0,t),s.numBatches=Math.max(s.numBatches,i[d].unshift(u.slice(t,a-t))));else{const m=e[d];e[d]=m.clone({nullable:!0}),n[d]=(l=u==null?void 0:u._changeLengthAndBackfillNullBitmap(t))!==null&&l!==void 0?l:Ye({type:m.type,length:t,nullCount:t,nullBitmap:new Uint8Array(c)})}}return n}var m6;class pn{constructor(...t){var n,i;if(t.length===0)return this.batches=[],this.schema=new vt([]),this._offsets=[0],this;let s,l;t[0]instanceof vt&&(s=t.shift()),t[t.length-1]instanceof Uint32Array&&(l=t.pop());const c=f=>{if(f){if(f instanceof $n)return[f];if(f instanceof pn)return f.batches;if(f instanceof At){if(f.type instanceof kn)return[new $n(new vt(f.type.children),f)]}else{if(Array.isArray(f))return f.flatMap(u=>c(u));if(typeof f[Symbol.iterator]=="function")return[...f].flatMap(u=>c(u));if(typeof f=="object"){const u=Object.keys(f),a=u.map(y=>new qe([f[y]])),m=new vt(u.map((y,o)=>new Rt(String(y),a[o].type))),[,w]=iE(m,a);return w.length===0?[new $n(f)]:w}}}return[]},d=t.flatMap(f=>c(f));if(s=(i=s??((n=d[0])===null||n===void 0?void 0:n.schema))!==null&&i!==void 0?i:new vt([]),!(s instanceof vt))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const f of d){if(!(f instanceof $n))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!zw(s,f.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=s,this.batches=d,this._offsets=l??N4(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=O4(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?zk.visit(new qe(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,i=this.data.concat(t.flatMap(({data:s})=>s));return new pn(n,i.map(s=>new $n(n,s)))}slice(t,n){const i=this.schema;[t,n]=Pk({length:this.numRows},t,n);const s=C4(this.data,this._offsets,t,n);return new pn(i,s.map(l=>new $n(i,l)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(i=>i.children[t]);if(n.length===0){const{type:i}=this.schema.fields[t],s=Ye({type:i,length:0,nullCount:0});n.push(s._changeLengthAndBackfillNullBitmap(this.numRows))}return new qe(n)}return null}setChild(t,n){var i;return this.setChildAt((i=this.schema.fields)===null||i===void 0?void 0:i.findIndex(s=>s.name===t),n)}setChildAt(t,n){let i=this.schema,s=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new qe([Ye({type:new ha,length:this.numRows})]));const l=i.fields.slice(),c=l[t].clone({type:n.type}),d=this.schema.fields.map((f,u)=>this.getChildAt(u));[l[t],d[t]]=[c,n],[i,s]=iE(i,d)}return new pn(i,s)}select(t){const n=this.schema.fields.reduce((i,s,l)=>i.set(s.name,l),new Map);return this.selectAt(t.map(i=>n.get(i)).filter(i=>i>-1))}selectAt(t){const n=this.schema.selectAt(t),i=this.batches.map(s=>s.selectAt(t));return new pn(n,i)}assign(t){const n=this.schema.fields,[i,s]=t.schema.fields.reduce((d,f,u)=>{const[a,m]=d,w=n.findIndex(y=>y.name===f.name);return~w?m[w]=u:a.push(u),d},[[],[]]),l=this.schema.assign(t.schema),c=[...n.map((d,f)=>[f,s[f]]).map(([d,f])=>f===void 0?this.getChildAt(d):t.getChildAt(f)),...i.map(d=>t.getChildAt(d))].filter(Boolean);return new pn(...iE(l,c))}}m6=Symbol.toStringTag;pn[m6]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=Wf(Uk),e.get=Wf(Wi.getVisitFn(te.Struct)),e.set=R4(Ds.getVisitFn(te.Struct)),e.indexOf=L4(Nw.getVisitFn(te.Struct)),e.getByteLength=Wf(ga.getVisitFn(te.Struct)),"Table"))(pn.prototype);function xX(e){const t={},n=Object.entries(e);for(const[i,s]of n)t[i]=$0(s);return new pn(t)}function w6(e){const t={},n=Object.entries(e);for(const[i,s]of n)t[i]=dB(s);return new pn(t)}var b6;let $n=class e_{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof vt))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=Ye({nullCount:0,type:new kn(this.schema.fields),children:this.schema.fields.map(n=>Ye({type:n.type,nullCount:0}))})]=t,!(this.data instanceof At))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=FN(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:i,children:s,length:l}=Object.keys(n).reduce((f,u,a)=>(f.children[a]=n[u],f.length=Math.max(f.length,n[u].length),f.fields[a]=Rt.new({name:u,type:n[u].type,nullable:!0}),f),{length:0,fields:new Array,children:new Array}),c=new vt(i),d=Ye({type:new kn(i),length:l,children:s,nullCount:0});[this.schema,this.data]=FN(c,d.children,l);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=T6(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return Wi.visit(this.data,t)}set(t,n){return Ds.visit(this.data,t,n)}indexOf(t,n){return Nw.visit(this.data,t,n)}getByteLength(t){return ga.visit(this.data,t)}[Symbol.iterator](){return zk.visit(new qe([this.data]))}toArray(){return[...this]}concat(...t){return new pn(this.schema,[this,...t])}slice(t,n){const[i]=new qe([this.data]).slice(t,n).data;return new e_(this.schema,i)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(i=>i.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new qe([this.data.children[t]]):null}setChild(t,n){var i;return this.setChildAt((i=this.schema.fields)===null||i===void 0?void 0:i.findIndex(s=>s.name===t),n)}setChildAt(t,n){let i=this.schema,s=this.data;if(t>-1&&t<this.numCols){n||(n=new qe([Ye({type:new ha,length:this.numRows})]));const l=i.fields.slice(),c=s.children.slice(),d=l[t].clone({type:n.type});[l[t],c[t]]=[d,n.data[0]],i=new vt(l,new Map(this.schema.metadata)),s=Ye({type:new kn(l),children:c})}return new e_(i,s)}select(t){const n=this.schema.select(t),i=new kn(n.fields),s=[];for(const l of t){const c=this.schema.fields.findIndex(d=>d.name===l);~c&&(s[c]=this.data.children[c])}return new e_(n,Ye({type:i,length:this.numRows,children:s}))}selectAt(t){const n=this.schema.selectAt(t),i=t.map(l=>this.data.children[l]).filter(Boolean),s=Ye({type:new kn(n.fields),length:this.numRows,children:i});return new e_(n,s)}};b6=Symbol.toStringTag;$n[b6]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))($n.prototype);function FN(e,t,n=t.reduce((i,s)=>Math.max(i,s.length),0)){var i;const s=[...e.fields],l=[...t],c=(n+63&-64)>>3;for(const[d,f]of e.fields.entries()){const u=t[d];(!u||u.length!==n)&&(s[d]=f.clone({nullable:!0}),l[d]=(i=u==null?void 0:u._changeLengthAndBackfillNullBitmap(n))!==null&&i!==void 0?i:Ye({type:f.type,length:n,nullCount:n,nullBitmap:new Uint8Array(c)}))}return[e.assign(s),Ye({type:new kn(s),length:n,children:l})]}function T6(e,t,n=new Map){for(let i=-1,s=e.length;++i<s;){const c=e[i].type,d=t[i];if(Ge.isDictionary(c)){if(!n.has(c.id))d.dictionary&&n.set(c.id,d.dictionary);else if(n.get(c.id)!==d.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}c.children&&c.children.length>0&&T6(c.children,d.children,n)}return n}class fB extends $n{constructor(t){const n=t.fields.map(s=>Ye({type:s.type})),i=Ye({type:new kn(t.fields),nullCount:0,children:n});super(t,i)}}var jw;(function(e){e[e.BUFFER=0]="BUFFER"})(jw||(jw={}));var qw;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(qw||(qw={}));class Xo{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new Xo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+qt),(n||new Xo).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):qw.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):jw.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,qw.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,jw.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,i){return Xo.startBodyCompression(t),Xo.addCodec(t,n),Xo.addMethod(t,i),Xo.endBodyCompression(t)}}let E6=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,i){return t.prep(8,16),t.writeInt64(BigInt(i??0)),t.writeInt64(BigInt(n??0)),t.offset()}},v6=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,i){return t.prep(8,16),t.writeInt64(BigInt(i??0)),t.writeInt64(BigInt(n??0)),t.offset()}},Ya=class Gv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new Gv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+qt),(n||new Gv).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const i=this.bb.__offset(this.bb_pos,6);return i?(n||new v6).__init(this.bb.__vector(this.bb_pos+i)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new E6).__init(this.bb.__vector(this.bb_pos+i)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new Xo).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},kf=class Hv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new Hv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+qt),(n||new Hv).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Ya).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var tg;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(tg||(tg={}));let qo=class Ur{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new Ur).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+qt),(n||new Ur).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):uu.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):tg.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const i=this.bb.__offset(this.bb_pos,12);return i?(n||new gn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,uu.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,tg.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,i,s,l,c){return Ur.startMessage(t),Ur.addVersion(t,n),Ur.addHeaderType(t,i),Ur.addHeader(t,s),Ur.addBodyLength(t,l),Ur.addCustomMetadata(t,c),Ur.endMessage(t)}};class kX extends ht{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return Lc.startNull(n),Lc.endNull(n)}visitInt(t,n){return fs.startInt(n),fs.addBitWidth(n,t.bitWidth),fs.addIsSigned(n,t.isSigned),fs.endInt(n)}visitFloat(t,n){return Qr.startFloatingPoint(n),Qr.addPrecision(n,t.precision),Qr.endFloatingPoint(n)}visitBinary(t,n){return Nc.startBinary(n),Nc.endBinary(n)}visitBool(t,n){return Cc.startBool(n),Cc.endBool(n)}visitUtf8(t,n){return Dc.startUtf8(n),Dc.endUtf8(n)}visitDecimal(t,n){return Oi.startDecimal(n),Oi.addScale(n,t.scale),Oi.addPrecision(n,t.precision),Oi.addBitWidth(n,t.bitWidth),Oi.endDecimal(n)}visitDate(t,n){return Zm.startDate(n),Zm.addUnit(n,t.unit),Zm.endDate(n)}visitTime(t,n){return Zh.startTime(n),Zh.addUnit(n,t.unit),Zh.addBitWidth(n,t.bitWidth),Zh.endTime(n)}visitTimestamp(t,n){const i=t.timezone&&n.createString(t.timezone)||void 0;return Fs.startTimestamp(n),Fs.addUnit(n,t.unit),i!==void 0&&Fs.addTimezone(n,i),Fs.endTimestamp(n)}visitInterval(t,n){return Zr.startInterval(n),Zr.addUnit(n,t.unit),Zr.endInterval(n)}visitList(t,n){return Rc.startList(n),Rc.endList(n)}visitStruct(t,n){return Pc.startStruct_(n),Pc.endStruct_(n)}visitUnion(t,n){wc.startTypeIdsVector(n,t.typeIds.length);const i=wc.createTypeIdsVector(n,t.typeIds);return wc.startUnion(n),wc.addMode(n,t.mode),wc.addTypeIds(n,i),wc.endUnion(n)}visitDictionary(t,n){const i=this.visit(t.indices,n);return to.startDictionaryEncoding(n),to.addId(n,BigInt(t.id)),to.addIsOrdered(n,t.isOrdered),i!==void 0&&to.addIndexType(n,i),to.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return Kr.startFixedSizeBinary(n),Kr.addByteWidth(n,t.byteWidth),Kr.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return Jr.startFixedSizeList(n),Jr.addListSize(n,t.listSize),Jr.endFixedSizeList(n)}visitMap(t,n){return ew.startMap(n),ew.addKeysSorted(n,t.keysSorted),ew.endMap(n)}}const sE=new kX;function BX(e,t=new Map){return new vt(IX(e,t),iw(e.customMetadata),t)}function S6(e){return new ys(e.count,x6(e.columns),k6(e.columns))}function FX(e){return new ma(S6(e.data),e.id,e.isDelta)}function IX(e,t){return(e.fields||[]).filter(Boolean).map(n=>Rt.fromJSON(n,t))}function IN(e,t){return(e.children||[]).filter(Boolean).map(n=>Rt.fromJSON(n,t))}function x6(e){return(e||[]).reduce((t,n)=>[...t,new $d(n.count,MX(n.VALIDITY)),...x6(n.children)],[])}function k6(e,t=[]){for(let n=-1,i=(e||[]).length;++n<i;){const s=e[n];s.VALIDITY&&t.push(new ia(t.length,s.VALIDITY.length)),s.TYPE&&t.push(new ia(t.length,s.TYPE.length)),s.OFFSET&&t.push(new ia(t.length,s.OFFSET.length)),s.DATA&&t.push(new ia(t.length,s.DATA.length)),t=k6(s.children,t)}return t}function MX(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function AX(e,t){let n,i,s,l,c,d;return!t||!(l=e.dictionary)?(c=AN(e,IN(e,t)),s=new Rt(e.name,c,e.nullable,iw(e.customMetadata))):t.has(n=l.id)?(i=(i=l.indexType)?MN(i):new Tl,d=new bo(t.get(n),i,n,l.isOrdered),s=new Rt(e.name,d,e.nullable,iw(e.customMetadata))):(i=(i=l.indexType)?MN(i):new Tl,t.set(n,c=AN(e,IN(e,t))),d=new bo(c,i,n,l.isOrdered),s=new Rt(e.name,d,e.nullable,iw(e.customMetadata))),s||null}function iw(e){return new Map(Object.entries(e||{}))}function MN(e){return new oi(e.isSigned,e.bitWidth)}function AN(e,t){const n=e.type.name;switch(n){case"NONE":return new ha;case"null":return new ha;case"binary":return new X_;case"utf8":return new au;case"bool":return new ou;case"list":return new sd((t||[])[0]);case"struct":return new kn(t||[]);case"struct_":return new kn(t||[])}switch(n){case"int":{const i=e.type;return new oi(i.isSigned,i.bitWidth)}case"floatingpoint":{const i=e.type;return new mo(bn[i.precision])}case"decimal":{const i=e.type;return new K_(i.scale,i.precision,i.bitWidth)}case"date":{const i=e.type;return new nd(Hi[i.unit])}case"time":{const i=e.type;return new _a(nt[i.unit],i.bitWidth)}case"timestamp":{const i=e.type;return new wo(nt[i.unit],i.timezone)}case"interval":{const i=e.type;return new id(Ps[i.unit])}case"union":{const i=e.type;return new El(Nn[i.mode],i.typeIds||[],t||[])}case"fixedsizebinary":{const i=e.type;return new J_(i.byteWidth)}case"fixedsizelist":{const i=e.type;return new lu(i.listSize,(t||[])[0])}case"map":{const i=e.type;return new cu((t||[])[0],i.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var OX=W4,NX=fu;class Qn{static fromJSON(t,n){const i=new Qn(0,Li.V4,n);return i._createHeader=CX(t,n),i}static decode(t){t=new NX(yt(t));const n=qo.getRootAsMessage(t),i=n.bodyLength(),s=n.version(),l=n.headerType(),c=new Qn(i,s,l);return c._createHeader=RX(n,l),c}static encode(t){const n=new OX;let i=-1;return t.isSchema()?i=vt.encode(n,t.header()):t.isRecordBatch()?i=ys.encode(n,t.header()):t.isDictionaryBatch()&&(i=ma.encode(n,t.header())),qo.startMessage(n),qo.addVersion(n,Li.V4),qo.addHeader(n,i),qo.addHeaderType(n,t.headerType),qo.addBodyLength(n,BigInt(t.bodyLength)),qo.finishMessageBuffer(n,qo.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof vt)return new Qn(0,Li.V4,Nt.Schema,t);if(t instanceof ys)return new Qn(n,Li.V4,Nt.RecordBatch,t);if(t instanceof ma)return new Qn(n,Li.V4,Nt.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Nt.Schema}isRecordBatch(){return this.headerType===Nt.RecordBatch}isDictionaryBatch(){return this.headerType===Nt.DictionaryBatch}constructor(t,n,i,s){this._version=n,this._headerType=i,this.body=new Uint8Array(0),s&&(this._createHeader=()=>s),this._bodyLength=Tr(t)}}class ys{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,i){this._nodes=n,this._buffers=i,this._length=Tr(t)}}class ma{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,i=!1){this._data=t,this._isDelta=i,this._id=Tr(n)}}class ia{constructor(t,n){this.offset=Tr(t),this.length=Tr(n)}}class $d{constructor(t,n){this.length=Tr(t),this.nullCount=Tr(n)}}function CX(e,t){return()=>{switch(t){case Nt.Schema:return vt.fromJSON(e);case Nt.RecordBatch:return ys.fromJSON(e);case Nt.DictionaryBatch:return ma.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${Nt[t]}, type: ${t} }`)}}function RX(e,t){return()=>{switch(t){case Nt.Schema:return vt.decode(e.header(new qr));case Nt.RecordBatch:return ys.decode(e.header(new Ya),e.version());case Nt.DictionaryBatch:return ma.decode(e.header(new kf),e.version())}throw new Error(`Unrecognized Message type: { name: ${Nt[t]}, type: ${t} }`)}}Rt.encode=WX;Rt.decode=GX;Rt.fromJSON=AX;vt.encode=HX;vt.decode=LX;vt.fromJSON=BX;ys.encode=VX;ys.decode=PX;ys.fromJSON=S6;ma.encode=YX;ma.decode=DX;ma.fromJSON=FX;$d.encode=XX;$d.decode=UX;ia.encode=KX;ia.decode=$X;function LX(e,t=new Map){const n=qX(e,t);return new vt(n,sw(e),t)}function PX(e,t=Li.V4){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new ys(e.length(),zX(e),jX(e,t))}function DX(e,t=Li.V4){return new ma(ys.decode(e.data(),t),e.id(),e.isDelta())}function $X(e){return new ia(e.offset(),e.length())}function UX(e){return new $d(e.length(),e.nullCount())}function zX(e){const t=[];for(let n,i=-1,s=-1,l=e.nodesLength();++i<l;)(n=e.nodes(i))&&(t[++s]=$d.decode(n));return t}function jX(e,t){const n=[];for(let i,s=-1,l=-1,c=e.buffersLength();++s<c;)(i=e.buffers(s))&&(t<Li.V4&&(i.bb_pos+=8*(s+1)),n[++l]=ia.decode(i));return n}function qX(e,t){const n=[];for(let i,s=-1,l=-1,c=e.fieldsLength();++s<c;)(i=e.fields(s))&&(n[++l]=Rt.decode(i,t));return n}function ON(e,t){const n=[];for(let i,s=-1,l=-1,c=e.childrenLength();++s<c;)(i=e.children(s))&&(n[++l]=Rt.decode(i,t));return n}function GX(e,t){let n,i,s,l,c,d;return!t||!(d=e.dictionary())?(s=CN(e,ON(e,t)),i=new Rt(e.name(),s,e.nullable(),sw(e))):t.has(n=Tr(d.id()))?(l=(l=d.indexType())?NN(l):new Tl,c=new bo(t.get(n),l,n,d.isOrdered()),i=new Rt(e.name(),c,e.nullable(),sw(e))):(l=(l=d.indexType())?NN(l):new Tl,t.set(n,s=CN(e,ON(e,t))),c=new bo(s,l,n,d.isOrdered()),i=new Rt(e.name(),c,e.nullable(),sw(e))),i||null}function sw(e){const t=new Map;if(e)for(let n,i,s=-1,l=Math.trunc(e.customMetadataLength());++s<l;)(n=e.customMetadata(s))&&(i=n.key())!=null&&t.set(i,n.value());return t}function NN(e){return new oi(e.isSigned(),e.bitWidth())}function CN(e,t){const n=e.typeType();switch(n){case dt.NONE:return new ha;case dt.Null:return new ha;case dt.Binary:return new X_;case dt.Utf8:return new au;case dt.Bool:return new ou;case dt.List:return new sd((t||[])[0]);case dt.Struct_:return new kn(t||[])}switch(n){case dt.Int:{const i=e.type(new fs);return new oi(i.isSigned(),i.bitWidth())}case dt.FloatingPoint:{const i=e.type(new Qr);return new mo(i.precision())}case dt.Decimal:{const i=e.type(new Oi);return new K_(i.scale(),i.precision(),i.bitWidth())}case dt.Date:{const i=e.type(new Zm);return new nd(i.unit())}case dt.Time:{const i=e.type(new Zh);return new _a(i.unit(),i.bitWidth())}case dt.Timestamp:{const i=e.type(new Fs);return new wo(i.unit(),i.timezone())}case dt.Interval:{const i=e.type(new Zr);return new id(i.unit())}case dt.Union:{const i=e.type(new wc);return new El(i.mode(),i.typeIdsArray()||[],t||[])}case dt.FixedSizeBinary:{const i=e.type(new Kr);return new J_(i.byteWidth())}case dt.FixedSizeList:{const i=e.type(new Jr);return new lu(i.listSize(),(t||[])[0])}case dt.Map:{const i=e.type(new ew);return new cu((t||[])[0],i.keysSorted())}}throw new Error(`Unrecognized type: "${dt[n]}" (${n})`)}function HX(e,t){const n=t.fields.map(l=>Rt.encode(e,l));qr.startFieldsVector(e,n.length);const i=qr.createFieldsVector(e,n),s=t.metadata&&t.metadata.size>0?qr.createCustomMetadataVector(e,[...t.metadata].map(([l,c])=>{const d=e.createString(`${l}`),f=e.createString(`${c}`);return gn.startKeyValue(e),gn.addKey(e,d),gn.addValue(e,f),gn.endKeyValue(e)})):-1;return qr.startSchema(e),qr.addFields(e,i),qr.addEndianness(e,JX?hu.Little:hu.Big),s!==-1&&qr.addCustomMetadata(e,s),qr.endSchema(e)}function WX(e,t){let n=-1,i=-1,s=-1;const l=t.type;let c=t.typeId;Ge.isDictionary(l)?(c=l.dictionary.typeId,s=sE.visit(l,e),i=sE.visit(l.dictionary,e)):i=sE.visit(l,e);const d=(l.children||[]).map(a=>Rt.encode(e,a)),f=Bs.createChildrenVector(e,d),u=t.metadata&&t.metadata.size>0?Bs.createCustomMetadataVector(e,[...t.metadata].map(([a,m])=>{const w=e.createString(`${a}`),y=e.createString(`${m}`);return gn.startKeyValue(e),gn.addKey(e,w),gn.addValue(e,y),gn.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),Bs.startField(e),Bs.addType(e,i),Bs.addTypeType(e,c),Bs.addChildren(e,f),Bs.addNullable(e,!!t.nullable),n!==-1&&Bs.addName(e,n),s!==-1&&Bs.addDictionary(e,s),u!==-1&&Bs.addCustomMetadata(e,u),Bs.endField(e)}function VX(e,t){const n=t.nodes||[],i=t.buffers||[];Ya.startNodesVector(e,n.length);for(const c of n.slice().reverse())$d.encode(e,c);const s=e.endVector();Ya.startBuffersVector(e,i.length);for(const c of i.slice().reverse())ia.encode(e,c);const l=e.endVector();return Ya.startRecordBatch(e),Ya.addLength(e,BigInt(t.length)),Ya.addNodes(e,s),Ya.addBuffers(e,l),Ya.endRecordBatch(e)}function YX(e,t){const n=ys.encode(e,t.data);return kf.startDictionaryBatch(e),kf.addId(e,BigInt(t.id)),kf.addIsDelta(e,t.isDelta),kf.addData(e,n),kf.endDictionaryBatch(e)}function XX(e,t){return v6.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function KX(e,t){return E6.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const JX=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),uB=e=>`Expected ${Nt[e]} Message in stream, but was null or length 0.`,hB=e=>`Header pointer of flatbuffer-encoded ${Nt[e]} Message is null or length 0.`,B6=(e,t)=>`Expected to read ${e} metadata bytes, but only read ${t}.`,F6=(e,t)=>`Expected to read ${e} bytes for message body, but only read ${t}.`;class _B{constructor(t){this.source=t instanceof eg?t:new eg(t)}[Symbol.iterator](){return this}next(){let t;return(t=this.readMetadataLength()).done||t.value===-1&&(t=this.readMetadataLength()).done||(t=this.readMetadata(t.value)).done?tn:t}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}readMessage(t){let n;if((n=this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(uB(t));return n.value}readMessageBody(t){if(t<=0)return new Uint8Array(0);const n=yt(this.source.read(t));if(n.byteLength<t)throw new Error(F6(t,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()}readSchema(t=!1){const n=Nt.Schema,i=this.readMessage(n),s=i==null?void 0:i.header();if(t&&!s)throw new Error(hB(n));return s}readMetadataLength(){const t=this.source.read(G0),n=t&&new fu(t),i=(n==null?void 0:n.readInt32(0))||0;return{done:i===0,value:i}}readMetadata(t){const n=this.source.read(t);if(!n)return tn;if(n.byteLength<t)throw new Error(B6(t,n.byteLength));return{done:!1,value:Qn.decode(n)}}}class I6{constructor(t,n){this.source=t instanceof vl?t:kD(t)?new Uw(t,n):new vl(t)}[Symbol.asyncIterator](){return this}next(){return Ae(this,void 0,void 0,function*(){let t;return(t=yield this.readMetadataLength()).done||t.value===-1&&(t=yield this.readMetadataLength()).done||(t=yield this.readMetadata(t.value)).done?tn:t})}throw(t){return Ae(this,void 0,void 0,function*(){return yield this.source.throw(t)})}return(t){return Ae(this,void 0,void 0,function*(){return yield this.source.return(t)})}readMessage(t){return Ae(this,void 0,void 0,function*(){let n;if((n=yield this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(uB(t));return n.value})}readMessageBody(t){return Ae(this,void 0,void 0,function*(){if(t<=0)return new Uint8Array(0);const n=yt(yield this.source.read(t));if(n.byteLength<t)throw new Error(F6(t,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()})}readSchema(t=!1){return Ae(this,void 0,void 0,function*(){const n=Nt.Schema,i=yield this.readMessage(n),s=i==null?void 0:i.header();if(t&&!s)throw new Error(hB(n));return s})}readMetadataLength(){return Ae(this,void 0,void 0,function*(){const t=yield this.source.read(G0),n=t&&new fu(t),i=(n==null?void 0:n.readInt32(0))||0;return{done:i===0,value:i}})}readMetadata(t){return Ae(this,void 0,void 0,function*(){const n=yield this.source.read(t);if(!n)return tn;if(n.byteLength<t)throw new Error(B6(t,n.byteLength));return{done:!1,value:Qn.decode(n)}})}}class M6 extends _B{constructor(t){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=t instanceof kN?t:new kN(t)}next(){const{_json:t}=this;if(!this._schema)return this._schema=!0,{done:!1,value:Qn.fromJSON(t.schema,Nt.Schema)};if(this._dictionaryIndex<t.dictionaries.length){const n=t.dictionaries[this._dictionaryIndex++];return this._body=n.data.columns,{done:!1,value:Qn.fromJSON(n,Nt.DictionaryBatch)}}if(this._batchIndex<t.batches.length){const n=t.batches[this._batchIndex++];return this._body=n.columns,{done:!1,value:Qn.fromJSON(n,Nt.RecordBatch)}}return this._body=[],tn}readMessageBody(t){return n(this._body);function n(i){return(i||[]).reduce((s,l)=>[...s,...l.VALIDITY&&[l.VALIDITY]||[],...l.TYPE&&[l.TYPE]||[],...l.OFFSET&&[l.OFFSET]||[],...l.DATA&&[l.DATA]||[],...n(l.children)],[])}}readMessage(t){let n;if((n=this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(uB(t));return n.value}readSchema(){const t=Nt.Schema,n=this.readMessage(t),i=n==null?void 0:n.header();if(!n||!i)throw new Error(hB(t));return i}}const G0=4,Wv="ARROW1",ng=new Uint8Array(Wv.length);for(let e=0;e<Wv.length;e+=1)ng[e]=Wv.codePointAt(e);function gB(e,t=0){for(let n=-1,i=ng.length;++n<i;)if(ng[n]!==e[t+n])return!1;return!0}const Yg=ng.length,A6=Yg+G0,QX=Yg*2+G0;class Cs extends jk{constructor(t){super(),this._impl=t}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(t){return this._impl.throw(t)}return(t){return this._impl.return(t)}cancel(){return this._impl.cancel()}reset(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this}open(t){const n=this._impl.open(t);return bl(n)?n.then(()=>this):this}readRecordBatch(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return ds.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return ds.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}static from(t){return t instanceof Cs?t:Dv(t)?tK(t):kD(t)?sK(t):bl(t)?(()=>Ae(this,void 0,void 0,function*(){return yield Cs.from(yield t)}))():BD(t)||fk(t)||FD(t)||Rd(t)?iK(new vl(t)):nK(new eg(t))}static readAll(t){return t instanceof Cs?t.isSync()?RN(t):LN(t):Dv(t)||ArrayBuffer.isView(t)||Qu(t)||xD(t)?RN(t):LN(t)}}class pu extends Cs{constructor(t){super(t),this._impl=t}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return dr(this,arguments,function*(){yield Ke(yield*Jm(ul(this[Symbol.iterator]())))})}}class ig extends Cs{constructor(t){super(t),this._impl=t}readAll(){var t,n,i,s;return Ae(this,void 0,void 0,function*(){const l=new Array;try{for(var c=!0,d=ul(this),f;f=yield d.next(),t=f.done,!t;){s=f.value,c=!1;try{const u=s;l.push(u)}finally{c=!0}}}catch(u){n={error:u}}finally{try{!c&&!t&&(i=d.return)&&(yield i.call(d))}finally{if(n)throw n.error}}return l})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class H0 extends pu{constructor(t){super(t),this._impl=t}}class O6 extends ig{constructor(t){super(t),this._impl=t}}class N6{get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}constructor(t=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this}_loadRecordBatch(t,n){const i=this._loadVectors(t,n,this.schema.fields),s=Ye({type:new kn(this.schema.fields),length:t.length,children:i});return new $n(this.schema,s)}_loadDictionaryBatch(t,n){const{id:i,isDelta:s}=t,{dictionaries:l,schema:c}=this,d=l.get(i);if(s||!d){const f=c.dictionaries.get(i),u=this._loadVectors(t.data,n,[f]);return(d&&s?d.concat(new qe(u)):new qe(u)).memoize()}return d.memoize()}_loadVectors(t,n,i){return new Y4(n,t.nodes,t.buffers,this.dictionaries).visitMany(i)}}class Gw extends N6{constructor(t,n){super(n),this._reader=Dv(t)?new M6(this._handle=t):new _B(this._handle=t)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(t){return this.closed||(this.autoDestroy=R6(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):tn}return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):tn}next(){if(this.closed)return tn;let t;const{_reader:n}=this;for(;t=this._readNextMessageAndValidate();)if(t.isSchema())this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const i=t.header(),s=n.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(i,s)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const i=t.header(),s=n.readMessageBody(t.bodyLength),l=this._loadDictionaryBatch(i,s);this.dictionaries.set(i.id,l)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new fB(this.schema)}):this.return()}_readNextMessageAndValidate(t){return this._reader.readMessage(t)}}class Hw extends N6{constructor(t,n){super(n),this._reader=new I6(this._handle=t)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return Ae(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(t){return Ae(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=R6(this,t),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(t){return Ae(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(t):tn})}return(t){return Ae(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(t):tn})}next(){return Ae(this,void 0,void 0,function*(){if(this.closed)return tn;let t;const{_reader:n}=this;for(;t=yield this._readNextMessageAndValidate();)if(t.isSchema())yield this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const i=t.header(),s=yield n.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(i,s)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const i=t.header(),s=yield n.readMessageBody(t.bodyLength),l=this._loadDictionaryBatch(i,s);this.dictionaries.set(i.id,l)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new fB(this.schema)}):yield this.return()})}_readNextMessageAndValidate(t){return Ae(this,void 0,void 0,function*(){return yield this._reader.readMessage(t)})}}class C6 extends Gw{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(t,n){super(t instanceof BN?t:new BN(t),n)}isSync(){return!0}isFile(){return!0}open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const n of this._footer.dictionaryBatches())n&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(t)}readRecordBatch(t){var n;if(this.closed)return null;this._footer||this.open();const i=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(t);if(i&&this._handle.seek(i.offset)){const s=this._reader.readMessage(Nt.RecordBatch);if(s!=null&&s.isRecordBatch()){const l=s.header(),c=this._reader.readMessageBody(s.bodyLength);return this._loadRecordBatch(l,c)}}return null}_readDictionaryBatch(t){var n;const i=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(t);if(i&&this._handle.seek(i.offset)){const s=this._reader.readMessage(Nt.DictionaryBatch);if(s!=null&&s.isDictionaryBatch()){const l=s.header(),c=this._reader.readMessageBody(s.bodyLength),d=this._loadDictionaryBatch(l,c);this.dictionaries.set(l.id,d)}}}_readFooter(){const{_handle:t}=this,n=t.size-A6,i=t.readInt32(n),s=t.readAt(n-i,i);return Z_.decode(s)}_readNextMessageAndValidate(t){var n;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const i=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(this._recordBatchIndex);if(i&&this._handle.seek(i.offset))return this._reader.readMessage(t)}return null}}class ZX extends Hw{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(t,...n){const i=typeof n[0]!="number"?n.shift():void 0,s=n[0]instanceof Map?n.shift():void 0;super(t instanceof Uw?t:new Uw(t,i),s)}isFile(){return!0}isAsync(){return!0}open(t){const n=Object.create(null,{open:{get:()=>super.open}});return Ae(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const i of this._footer.dictionaryBatches())i&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield n.open.call(this,t)})}readRecordBatch(t){var n;return Ae(this,void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());const i=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(t);if(i&&(yield this._handle.seek(i.offset))){const s=yield this._reader.readMessage(Nt.RecordBatch);if(s!=null&&s.isRecordBatch()){const l=s.header(),c=yield this._reader.readMessageBody(s.bodyLength);return this._loadRecordBatch(l,c)}}return null})}_readDictionaryBatch(t){var n;return Ae(this,void 0,void 0,function*(){const i=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(t);if(i&&(yield this._handle.seek(i.offset))){const s=yield this._reader.readMessage(Nt.DictionaryBatch);if(s!=null&&s.isDictionaryBatch()){const l=s.header(),c=yield this._reader.readMessageBody(s.bodyLength),d=this._loadDictionaryBatch(l,c);this.dictionaries.set(l.id,d)}}})}_readFooter(){return Ae(this,void 0,void 0,function*(){const{_handle:t}=this;t._pending&&(yield t._pending);const n=t.size-A6,i=yield t.readInt32(n),s=yield t.readAt(n-i,i);return Z_.decode(s)})}_readNextMessageAndValidate(t){return Ae(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=this._footer.getRecordBatch(this._recordBatchIndex);if(n&&(yield this._handle.seek(n.offset)))return yield this._reader.readMessage(t)}return null})}}class eK extends Gw{constructor(t,n){super(t,n)}_loadVectors(t,n,i){return new fX(n,t.nodes,t.buffers,this.dictionaries).visitMany(i)}}function R6(e,t){return t&&typeof t.autoDestroy=="boolean"?t.autoDestroy:e.autoDestroy}function*RN(e){const t=Cs.from(e);try{if(!t.open({autoDestroy:!1}).closed)do yield t;while(!t.reset().open().closed)}finally{t.cancel()}}function LN(e){return dr(this,arguments,function*(){const n=yield Ke(Cs.from(e));try{if(!(yield Ke(n.open({autoDestroy:!1}))).closed)do yield yield Ke(n);while(!(yield Ke(n.reset().open())).closed)}finally{yield Ke(n.cancel())}})}function tK(e){return new pu(new eK(e))}function nK(e){const t=e.peek(Yg+7&-8);return t&&t.byteLength>=4?gB(t)?new H0(new C6(e.read())):new pu(new Gw(e)):new pu(new Gw(function*(){}()))}function iK(e){return Ae(this,void 0,void 0,function*(){const t=yield e.peek(Yg+7&-8);return t&&t.byteLength>=4?gB(t)?new H0(new C6(yield e.read())):new ig(new Hw(e)):new ig(new Hw(function(){return dr(this,arguments,function*(){})}()))})}function sK(e){return Ae(this,void 0,void 0,function*(){const{size:t}=yield e.stat(),n=new Uw(e,t);return t>=QX&&gB(yield n.readAt(0,Yg+7&-8))?new O6(new ZX(n)):new ig(new Hw(n))})}class dn extends ht{static assemble(...t){const n=s=>s.flatMap(l=>Array.isArray(l)?n(l):l instanceof $n?l.data.children:l.data),i=new dn;return i.visitMany(n(t)),i}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof qe)return this.visitMany(t.data),this;const{type:n}=t;if(!Ge.isDictionary(n)){const{length:i,nullCount:s}=t;if(i>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");Ge.isNull(n)||gr.call(this,s<=0?new Uint8Array(0):D0(t.offset,i,t.nullBitmap)),this.nodes.push(new $d(i,s))}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function gr(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new ia(this._byteLength,t)),this._byteLength+=t,this}function rK(e){const{type:t,length:n,typeIds:i,valueOffsets:s}=e;if(gr.call(this,i),t.mode===Nn.Sparse)return Vv.call(this,e);if(t.mode===Nn.Dense){if(e.offset<=0)return gr.call(this,s),Vv.call(this,e);{const l=i.reduce((a,m)=>Math.max(a,m),i[0]),c=new Int32Array(l+1),d=new Int32Array(l+1).fill(-1),f=new Int32Array(n),u=O0(-s[0],n,s);for(let a,m,w=-1;++w<n;)(m=d[a=i[w]])===-1&&(m=d[a]=u[a]),f[w]=u[w]-m,++c[a];gr.call(this,f);for(let a,m=-1,w=t.children.length;++m<w;)if(a=e.children[m]){const y=t.typeIds[m],o=Math.min(n,c[y]);this.visit(a.slice(d[y],o))}}}return this}function aK(e){let t;return e.nullCount>=e.length?gr.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?gr.call(this,D0(e.offset,e.length,t)):gr.call(this,Q_(e.values))}function ql(e){return gr.call(this,e.values.subarray(0,e.length*e.stride))}function L6(e){const{length:t,values:n,valueOffsets:i}=e,s=i[0],l=i[t],c=Math.min(l-s,n.byteLength-s);return gr.call(this,O0(-i[0],t,i)),gr.call(this,n.subarray(s,s+c)),this}function pB(e){const{length:t,valueOffsets:n}=e;return n&&gr.call(this,O0(n[0],t,n)),this.visit(e.children[0])}function Vv(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}dn.prototype.visitBool=aK;dn.prototype.visitInt=ql;dn.prototype.visitFloat=ql;dn.prototype.visitUtf8=L6;dn.prototype.visitBinary=L6;dn.prototype.visitFixedSizeBinary=ql;dn.prototype.visitDate=ql;dn.prototype.visitTimestamp=ql;dn.prototype.visitTime=ql;dn.prototype.visitDecimal=ql;dn.prototype.visitList=pB;dn.prototype.visitStruct=Vv;dn.prototype.visitUnion=rK;dn.prototype.visitInterval=ql;dn.prototype.visitFixedSizeList=pB;dn.prototype.visitMap=pB;class oK extends ht{visit(t){return t==null?void 0:super.visit(t)}visitNull({typeId:t}){return{name:dt[t].toLowerCase()}}visitInt({typeId:t,bitWidth:n,isSigned:i}){return{name:dt[t].toLowerCase(),bitWidth:n,isSigned:i}}visitFloat({typeId:t,precision:n}){return{name:dt[t].toLowerCase(),precision:bn[n]}}visitBinary({typeId:t}){return{name:dt[t].toLowerCase()}}visitBool({typeId:t}){return{name:dt[t].toLowerCase()}}visitUtf8({typeId:t}){return{name:dt[t].toLowerCase()}}visitDecimal({typeId:t,scale:n,precision:i,bitWidth:s}){return{name:dt[t].toLowerCase(),scale:n,precision:i,bitWidth:s}}visitDate({typeId:t,unit:n}){return{name:dt[t].toLowerCase(),unit:Hi[n]}}visitTime({typeId:t,unit:n,bitWidth:i}){return{name:dt[t].toLowerCase(),unit:nt[n],bitWidth:i}}visitTimestamp({typeId:t,timezone:n,unit:i}){return{name:dt[t].toLowerCase(),unit:nt[i],timezone:n}}visitInterval({typeId:t,unit:n}){return{name:dt[t].toLowerCase(),unit:Ps[n]}}visitList({typeId:t}){return{name:dt[t].toLowerCase()}}visitStruct({typeId:t}){return{name:dt[t].toLowerCase()}}visitUnion({typeId:t,mode:n,typeIds:i}){return{name:dt[t].toLowerCase(),mode:Nn[n],typeIds:[...i]}}visitDictionary(t){return this.visit(t.dictionary)}visitFixedSizeBinary({typeId:t,byteWidth:n}){return{name:dt[t].toLowerCase(),byteWidth:n}}visitFixedSizeList({typeId:t,listSize:n}){return{name:dt[t].toLowerCase(),listSize:n}}visitMap({typeId:t,keysSorted:n}){return{name:dt[t].toLowerCase(),keysSorted:n}}}class W0 extends ht{static assemble(...t){const n=new W0;return t.map(({schema:i,data:s})=>n.visitMany(i.fields,s.children))}visit({name:t},n){const{length:i}=n,{offset:s,nullCount:l,nullBitmap:c}=n,d=Ge.isDictionary(n.type)?n.type.indices:n.type,f=Object.assign([],n.buffers,{[er.VALIDITY]:void 0});return Object.assign({name:t,count:i,VALIDITY:Ge.isNull(d)?void 0:l<=0?Array.from({length:i},()=>1):[...new du(c,s,i,null,Dk)]},super.visit(n.clone(d,s,i,0,f)))}visitNull(){return{}}visitBool({values:t,offset:n,length:i}){return{DATA:[...new du(t,n,i,null,P0)]}}visitInt(t){return{DATA:t.type.bitWidth<64?[...t.values]:[...Sh(t.values,2)]}}visitFloat(t){return{DATA:[...t.values]}}visitUtf8(t){return{DATA:[...new qe([t])],OFFSET:[...t.valueOffsets]}}visitBinary(t){return{DATA:[...PN(new qe([t]))],OFFSET:[...t.valueOffsets]}}visitFixedSizeBinary(t){return{DATA:[...PN(new qe([t]))]}}visitDate(t){return{DATA:t.type.unit===Hi.DAY?[...t.values]:[...Sh(t.values,2)]}}visitTimestamp(t){return{DATA:[...Sh(t.values,2)]}}visitTime(t){return{DATA:t.type.unit<nt.MICROSECOND?[...t.values]:[...Sh(t.values,2)]}}visitDecimal(t){return{DATA:[...Sh(t.values,4)]}}visitList(t){return{OFFSET:[...t.valueOffsets],children:this.visitMany(t.type.children,t.children)}}visitStruct(t){return{children:this.visitMany(t.type.children,t.children)}}visitUnion(t){return{TYPE:[...t.typeIds],OFFSET:t.type.mode===Nn.Dense?[...t.valueOffsets]:void 0,children:this.visitMany(t.type.children,t.children)}}visitInterval(t){return{DATA:[...t.values]}}visitFixedSizeList(t){return{children:this.visitMany(t.type.children,t.children)}}visitMap(t){return{OFFSET:[...t.valueOffsets],children:this.visitMany(t.type.children,t.children)}}}function*PN(e){for(const t of e)yield t.reduce((n,i)=>`${n}${("0"+(i&255).toString(16)).slice(-2)}`,"").toUpperCase()}function*Sh(e,t){const n=new Uint32Array(e.buffer);for(let i=-1,s=n.length/t;++i<s;)yield`${$g.new(n.subarray((i+0)*t,(i+1)*t),!1)}`}class Xg extends jk{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new Vf,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Gi(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return bl(t)?t.then(n=>this.writeAll(n)):Rd(t)?wB(this,t):mB(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof Vf?this._sink=t:(this._sink=new Vf,t&&GW(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&HW(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!zw(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof pn&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof $n&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!zw(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof $n?t instanceof fB||this._writeRecordBatch(t):t instanceof pn?this.writeAll(t.batches):Qu(t)&&this.writeAll(t)}_writeMessage(t,n=8){const i=n-1,s=Qn.encode(t),l=s.byteLength,c=this._writeLegacyIpcFormat?4:8,d=l+c+i&~i,f=d-l-c;return t.headerType===Nt.RecordBatch?this._recordBatchBlocks.push(new pa(d,t.bodyLength,this._position)):t.headerType===Nt.DictionaryBatch&&this._dictionaryBlocks.push(new pa(d,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(d-c)),l>0&&this._write(s),this._writePadding(f)}_write(t){if(this._started){const n=yt(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(Qn.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(ng)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:i,bufferRegions:s,buffers:l}=dn.assemble(t),c=new ys(t.numRows,i,s),d=Qn.from(c,n);return this._writeDictionaries(t)._writeMessage(d)._writeBodyBuffers(l)}_writeDictionaryBatch(t,n,i=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:s,nodes:l,bufferRegions:c,buffers:d}=dn.assemble(new qe([t])),f=new ys(t.length,l,c),u=new ma(f,n,i),a=Qn.from(u,s);return this._writeMessage(a)._writeBodyBuffers(d)}_writeBodyBuffers(t){let n,i,s;for(let l=-1,c=t.length;++l<c;)(n=t[l])&&(i=n.byteLength)>0&&(this._write(n),(s=(i+7&-8)-i)>0&&this._writePadding(s));return this}_writeDictionaries(t){for(let[n,i]of t.dictionaries){let s=this._dictionaryDeltaOffsets.get(n)||0;if(s===0||(i=i==null?void 0:i.slice(s)).length>0)for(const l of i.data)this._writeDictionaryBatch(l,n,s>0),s+=l.length}return this}}class Kg extends Xg{static writeAll(t,n){const i=new Kg(n);return bl(t)?t.then(s=>i.writeAll(s)):Rd(t)?wB(i,t):mB(i,t)}}class Jg extends Xg{static writeAll(t){const n=new Jg;return bl(t)?t.then(i=>n.writeAll(i)):Rd(t)?wB(n,t):mB(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=Z_.encode(new Z_(t,Li.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}class yB extends Xg{static writeAll(t){return new yB().writeAll(t)}constructor(){super(),this._autoDestroy=!0,this._recordBatches=[],this._dictionaries=[]}_writeMessage(){return this}_writeFooter(t){return this}_writeSchema(t){return this._write(`{
  "schema": ${JSON.stringify({fields:t.fields.map(n=>P6(n))},null,2)}`)}_writeDictionaries(t){return t.dictionaries.size>0&&this._dictionaries.push(t),this}_writeDictionaryBatch(t,n,i=!1){return this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0)),this._write(this._dictionaryBlocks.length===0?"    ":`,
    `),this._write(`${lK(t,n,i)}`),this._dictionaryBlocks.push(new pa(0,0,0)),this}_writeRecordBatch(t){return this._writeDictionaries(t),this._recordBatches.push(t),this}close(){if(this._dictionaries.length>0){this._write(`,
  "dictionaries": [
`);for(const t of this._dictionaries)super._writeDictionaries(t);this._write(`
  ]`)}if(this._recordBatches.length>0){for(let t=-1,n=this._recordBatches.length;++t<n;)this._write(t===0?`,
  "batches": [
    `:`,
    `),this._write(`${cK(this._recordBatches[t])}`),this._recordBatchBlocks.push(new pa(0,0,0));this._write(`
  ]`)}return this._schema&&this._write(`
}`),this._dictionaries=[],this._recordBatches=[],super.close()}}function mB(e,t){let n=t;t instanceof pn&&(n=t.batches,e.reset(void 0,t.schema));for(const i of n)e.write(i);return e.finish()}function wB(e,t){var n,i,s,l,c,d,f;return Ae(this,void 0,void 0,function*(){try{for(n=!0,i=ul(t);s=yield i.next(),l=s.done,!l;){f=s.value,n=!1;try{const u=f;e.write(u)}finally{n=!0}}}catch(u){c={error:u}}finally{try{!n&&!l&&(d=i.return)&&(yield d.call(i))}finally{if(c)throw c.error}}return e.finish()})}function P6({name:e,type:t,nullable:n}){const i=new oK;return{name:e,nullable:n,type:i.visit(t),children:(t.children||[]).map(s=>P6(s)),dictionary:Ge.isDictionary(t)?{id:t.id,isOrdered:t.isOrdered,indexType:i.visit(t.indices)}:void 0}}function lK(e,t,n=!1){const[i]=W0.assemble(new $n({[t]:e}));return JSON.stringify({id:t,isDelta:n,data:{count:e.length,columns:i}},null,2)}function cK(e){const[t]=W0.assemble(e);return JSON.stringify({count:e.numRows,columns:t},null,2)}function dK(e,t){if(Rd(e))return uK(e,t);if(Qu(e))return fK(e,t);throw new Error("toDOMStream() must be called with an Iterable or AsyncIterable")}function fK(e,t){let n=null;const i=(t==null?void 0:t.type)==="bytes"||!1,s=(t==null?void 0:t.highWaterMark)||Math.pow(2,24);return new ReadableStream(Object.assign(Object.assign({},t),{start(c){l(c,n||(n=e[Symbol.iterator]()))},pull(c){n?l(c,n):c.close()},cancel(){(n!=null&&n.return&&n.return()||!0)&&(n=null)}}),Object.assign({highWaterMark:i?s:void 0},t));function l(c,d){let f,u=null,a=c.desiredSize||null;for(;!(u=d.next(i?a:null)).done;)if(ArrayBuffer.isView(u.value)&&(f=yt(u.value))&&(a!=null&&i&&(a=a-f.byteLength+1),u.value=f),c.enqueue(u.value),a!=null&&--a<=0)return;c.close()}}function uK(e,t){let n=null;const i=(t==null?void 0:t.type)==="bytes"||!1,s=(t==null?void 0:t.highWaterMark)||Math.pow(2,24);return new ReadableStream(Object.assign(Object.assign({},t),{start(c){return Ae(this,void 0,void 0,function*(){yield l(c,n||(n=e[Symbol.asyncIterator]()))})},pull(c){return Ae(this,void 0,void 0,function*(){n?yield l(c,n):c.close()})},cancel(){return Ae(this,void 0,void 0,function*(){(n!=null&&n.return&&(yield n.return())||!0)&&(n=null)})}}),Object.assign({highWaterMark:i?s:void 0},t));function l(c,d){return Ae(this,void 0,void 0,function*(){let f,u=null,a=c.desiredSize||null;for(;!(u=yield d.next(i?a:null)).done;)if(ArrayBuffer.isView(u.value)&&(f=yt(u.value))&&(a!=null&&i&&(a=a-f.byteLength+1),u.value=f),c.enqueue(u.value),a!=null&&--a<=0)return;c.close()})}}function hK(e){return new _K(e)}class _K{constructor(t){this._numChunks=0,this._finished=!1,this._bufferedSize=0;const{["readableStrategy"]:n,["writableStrategy"]:i,["queueingStrategy"]:s="count"}=t,l=UW(t,["readableStrategy","writableStrategy","queueingStrategy"]);this._controller=null,this._builder=rd(l),this._getSize=s!=="bytes"?DN:$N;const{["highWaterMark"]:c=s==="bytes"?Math.pow(2,14):1e3}=Object.assign({},n),{["highWaterMark"]:d=s==="bytes"?Math.pow(2,14):1e3}=Object.assign({},i);this.readable=new ReadableStream({cancel:()=>{this._builder.clear()},pull:f=>{this._maybeFlush(this._builder,this._controller=f)},start:f=>{this._maybeFlush(this._builder,this._controller=f)}},{highWaterMark:c,size:s!=="bytes"?DN:$N}),this.writable=new WritableStream({abort:()=>{this._builder.clear()},write:()=>{this._maybeFlush(this._builder,this._controller)},close:()=>{this._maybeFlush(this._builder.finish(),this._controller)}},{highWaterMark:d,size:f=>this._writeValueAndReturnChunkSize(f)})}_writeValueAndReturnChunkSize(t){const n=this._bufferedSize;return this._bufferedSize=this._getSize(this._builder.append(t)),this._bufferedSize-n}_maybeFlush(t,n){n!=null&&(this._bufferedSize>=n.desiredSize&&++this._numChunks&&this._enqueue(n,t.toVector()),t.finished&&((t.length>0||this._numChunks===0)&&++this._numChunks&&this._enqueue(n,t.toVector()),!this._finished&&(this._finished=!0)&&this._enqueue(n,null)))}_enqueue(t,n){this._bufferedSize=0,this._controller=null,n==null?t.close():t.enqueue(n)}}const DN=e=>{var t;return(t=e==null?void 0:e.length)!==null&&t!==void 0?t:0},$N=e=>{var t;return(t=e==null?void 0:e.byteLength)!==null&&t!==void 0?t:0};function bB(e,t){const n=new Vf;let i=null;const s=new ReadableStream({cancel(){return Ae(this,void 0,void 0,function*(){yield n.close()})},start(d){return Ae(this,void 0,void 0,function*(){yield c(d,i||(i=yield l()))})},pull(d){return Ae(this,void 0,void 0,function*(){i?yield c(d,i):d.close()})}});return{writable:new WritableStream(n,Object.assign({highWaterMark:Math.pow(2,14)},e)),readable:s};function l(){return Ae(this,void 0,void 0,function*(){return yield(yield Cs.from(n)).open(t)})}function c(d,f){return Ae(this,void 0,void 0,function*(){let u=d.desiredSize,a=null;for(;!(a=yield f.next()).done;)if(d.enqueue(a.value),u!=null&&--u<=0)return;d.close()})}}function TB(e,t){const n=new this(e),i=new vl(n),s=new ReadableStream({cancel(){return Ae(this,void 0,void 0,function*(){yield i.cancel()})},pull(c){return Ae(this,void 0,void 0,function*(){yield l(c)})},start(c){return Ae(this,void 0,void 0,function*(){yield l(c)})}},Object.assign({highWaterMark:Math.pow(2,14)},t));return{writable:new WritableStream(n,e),readable:s};function l(c){return Ae(this,void 0,void 0,function*(){let d=null,f=c.desiredSize;for(;d=yield i.read(f||null);)if(c.enqueue(d),f!=null&&(f-=d.byteLength)<=0)return;c.close()})}}function EB(e){const t=Cs.from(e);return bl(t)?t.then(n=>EB(n)):t.isAsync()?t.readAll().then(n=>new pn(n)):new pn(t.readAll())}function gK(e,t="stream"){return(t==="stream"?Kg:Jg).writeAll(e).toUint8Array(!0)}const pK=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},kV),dX),qY),jV),wV),zY),{compareSchemas:zw,compareFields:TX,compareTypes:g6});ds.toDOMStream=dK;di.throughDOM=hK;Cs.throughDOM=bB;H0.throughDOM=bB;pu.throughDOM=bB;Xg.throughDOM=TB;Jg.throughDOM=TB;Kg.throughDOM=TB;const yK=Object.freeze(Object.defineProperty({__proto__:null,AsyncByteQueue:Vf,AsyncByteStream:vl,AsyncMessageReader:I6,AsyncRecordBatchFileReader:O6,AsyncRecordBatchStreamReader:ig,Binary:X_,BinaryBuilder:Hk,Bool:ou,BoolBuilder:X4,get BufferType(){return er},Builder:di,ByteStream:eg,Data:At,DataType:Ge,DateBuilder:jg,DateDay:BV,DateDayBuilder:Wk,DateMillisecond:n4,DateMillisecondBuilder:Vk,get DateUnit(){return Hi},Date_:nd,Decimal:K_,DecimalBuilder:Yk,DenseUnion:DV,DenseUnionBuilder:_6,Dictionary:bo,DictionaryBuilder:K4,Field:Rt,FixedSizeBinary:J_,FixedSizeBinaryBuilder:Xk,FixedSizeList:lu,FixedSizeListBuilder:J4,Float:mo,Float16:t4,Float16Builder:Q4,Float32:wk,Float32Builder:Z4,Float64:C0,Float64Builder:e6,FloatBuilder:qg,Int:oi,Int16:_k,Int16Builder:n6,Int32:Tl,Int32Builder:i6,Int64:N0,Int64Builder:s6,Int8:hk,Int8Builder:t6,IntBuilder:Ia,Interval:id,IntervalBuilder:Gg,IntervalDayTime:LV,IntervalDayTimeBuilder:Kk,get IntervalUnit(){return Ps},IntervalYearMonth:PV,IntervalYearMonthBuilder:Jk,JSONMessageReader:M6,List:sd,ListBuilder:c6,MapBuilder:d6,MapRow:Ug,Map_:cu,Message:Qn,get MessageHeader(){return tg},MessageReader:_B,get MetadataVersion(){return Li},Null:ha,NullBuilder:f6,get Precision(){return bn},RecordBatch:$n,RecordBatchFileReader:H0,RecordBatchFileWriter:Jg,RecordBatchJSONWriter:yB,RecordBatchReader:Cs,RecordBatchStreamReader:pu,RecordBatchStreamWriter:Kg,RecordBatchWriter:Xg,Schema:vt,SparseUnion:$V,SparseUnionBuilder:h6,Struct:kn,StructBuilder:u6,StructRow:R0,Table:pn,Time:_a,TimeBuilder:Dd,TimeMicrosecond:MV,TimeMicrosecondBuilder:sB,TimeMillisecond:IV,TimeMillisecondBuilder:iB,TimeNanosecond:AV,TimeNanosecondBuilder:rB,TimeSecond:FV,TimeSecondBuilder:nB,get TimeUnit(){return nt},Timestamp:wo,TimestampBuilder:Pd,TimestampMicrosecond:CV,TimestampMicrosecondBuilder:eB,TimestampMillisecond:NV,TimestampMillisecondBuilder:Zk,TimestampNanosecond:RV,TimestampNanosecondBuilder:tB,TimestampSecond:OV,TimestampSecondBuilder:Qk,get Type(){return te},Uint16:pk,Uint16Builder:a6,Uint32:yk,Uint32Builder:o6,Uint64:mk,Uint64Builder:l6,Uint8:gk,Uint8Builder:r6,Union:El,UnionBuilder:j0,get UnionMode(){return Nn},Utf8:au,Utf8Builder:aB,Vector:qe,Visitor:ht,builderThroughAsyncIterable:EX,builderThroughIterable:y6,makeBuilder:rd,makeData:Ye,makeTable:xX,makeVector:$0,tableFromArrays:w6,tableFromIPC:EB,tableFromJSON:p6,tableToIPC:gK,util:pK,vectorFromArray:dB},Symbol.toStringTag,{value:"Module"}));class D6{constructor(t,n){this.length=t,this._bits=n||new Uint32Array((t>>>5)+1)}get(t){return t|=0,!!(this._bits[t>>>5]&1<<(t&31))}get bits(){return this._bits}set(t,n){t|=0;const i=t>>>5,s=1<<(t&31);return n?this._bits[i]|=s:this._bits[i]&=~s,this}union(t){for(let n=0;n<this._bits.length;n++)this._bits[n]=this._bits[n]|t._bits[n]}*[Symbol.iterator](){for(let t=0;t<this.length;t++)yield this.get(t)}}function xh(...e){if(e.length==0)return null;if(e.length==1)return e[0];const t=new D6(e[0].length,new Uint32Array(e[0].bits));for(let n=1;n<e.length;n++){const i=e[n];t.union(i)}return t}function mK(e,t,n){return Math.ceil((t-e)/(3.49*n))}const wK=Float64Array,rE=Float64Array;var bK=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function TK(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function i(){if(this instanceof i){var s=[null];s.push.apply(s,arguments);var l=Function.bind.apply(t,s);return new l}return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var s=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:function(){return e[i]}})}),n}function EK(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=n;return t}var vK=EK;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var SK=function(e){return e!=null&&($6(e)||xK(e)||!!e._isBuffer)};function $6(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function xK(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&$6(e.slice(0,0))}var kK=vK,BK=SK,FK=typeof Float64Array<"u";function IK(e,t){return e[0]-t[0]}function MK(){var e=this.stride,t=new Array(e.length),n;for(n=0;n<t.length;++n)t[n]=[Math.abs(e[n]),n];t.sort(IK);var i=new Array(t.length);for(n=0;n<i.length;++n)i[n]=t[n][1];return i}function AK(e,t){var n=["View",t,"d",e].join("");t<0&&(n="View_Nil"+e);var i=e==="generic";if(t===-1){var s="function "+n+"(a){this.data=a;};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+n+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+n+"(a){return new "+n+"(a);}",T=new Function(s);return T()}else if(t===0){var s="function "+n+"(a,d) {this.data = a;this.offset = d};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+n+"_copy() {return new "+n+"(this.data,this.offset)};proto.pick=function "+n+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+n+"_get(){return "+(i?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+n+"_set(v){return "+(i?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+n+"(a,b,c,d){return new "+n+"(a,d)}",T=new Function("TrivialArray",s);return T(Ww[e][0])}var s=["'use strict'"],l=kK(t),c=l.map(function(b){return"i"+b}),d="this.offset+"+l.map(function(b){return"this.stride["+b+"]*i"+b}).join("+"),f=l.map(function(b){return"b"+b}).join(","),u=l.map(function(b){return"c"+b}).join(",");s.push("function "+n+"(a,"+f+","+u+",d){this.data=a","this.shape=["+f+"]","this.stride=["+u+"]","this.offset=d|0}","var proto="+n+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),s.push("Object.defineProperty(proto,'size',{get:function "+n+"_size(){return "+l.map(function(b){return"this.shape["+b+"]"}).join("*"),"}})"),t===1?s.push("proto.order=[0]"):(s.push("Object.defineProperty(proto,'order',{get:"),t<4?(s.push("function "+n+"_order(){"),t===2?s.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):t===3&&s.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):s.push("ORDER})")),s.push("proto.set=function "+n+"_set("+c.join(",")+",v){"),i?s.push("return this.data.set("+d+",v)}"):s.push("return this.data["+d+"]=v}"),s.push("proto.get=function "+n+"_get("+c.join(",")+"){"),i?s.push("return this.data.get("+d+")}"):s.push("return this.data["+d+"]}"),s.push("proto.index=function "+n+"_index(",c.join(),"){return "+d+"}"),s.push("proto.hi=function "+n+"_hi("+c.join(",")+"){return new "+n+"(this.data,"+l.map(function(b){return["(typeof i",b,"!=='number'||i",b,"<0)?this.shape[",b,"]:i",b,"|0"].join("")}).join(",")+","+l.map(function(b){return"this.stride["+b+"]"}).join(",")+",this.offset)}");var a=l.map(function(b){return"a"+b+"=this.shape["+b+"]"}),m=l.map(function(b){return"c"+b+"=this.stride["+b+"]"});s.push("proto.lo=function "+n+"_lo("+c.join(",")+"){var b=this.offset,d=0,"+a.join(",")+","+m.join(","));for(var w=0;w<t;++w)s.push("if(typeof i"+w+"==='number'&&i"+w+">=0){d=i"+w+"|0;b+=c"+w+"*d;a"+w+"-=d}");s.push("return new "+n+"(this.data,"+l.map(function(b){return"a"+b}).join(",")+","+l.map(function(b){return"c"+b}).join(",")+",b)}"),s.push("proto.step=function "+n+"_step("+c.join(",")+"){var "+l.map(function(b){return"a"+b+"=this.shape["+b+"]"}).join(",")+","+l.map(function(b){return"b"+b+"=this.stride["+b+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var w=0;w<t;++w)s.push("if(typeof i"+w+"==='number'){d=i"+w+"|0;if(d<0){c+=b"+w+"*(a"+w+"-1);a"+w+"=ceil(-a"+w+"/d)}else{a"+w+"=ceil(a"+w+"/d)}b"+w+"*=d}");s.push("return new "+n+"(this.data,"+l.map(function(b){return"a"+b}).join(",")+","+l.map(function(b){return"b"+b}).join(",")+",c)}");for(var y=new Array(t),o=new Array(t),w=0;w<t;++w)y[w]="a[i"+w+"]",o[w]="b[i"+w+"]";s.push("proto.transpose=function "+n+"_transpose("+c+"){"+c.map(function(b,S){return b+"=("+b+"===undefined?"+S+":"+b+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+n+"(this.data,"+y.join(",")+","+o.join(",")+",this.offset)}"),s.push("proto.pick=function "+n+"_pick("+c+"){var a=[],b=[],c=this.offset");for(var w=0;w<t;++w)s.push("if(typeof i"+w+"==='number'&&i"+w+">=0){c=(c+this.stride["+w+"]*i"+w+")|0}else{a.push(this.shape["+w+"]);b.push(this.stride["+w+"])}");s.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),s.push("return function construct_"+n+"(data,shape,stride,offset){return new "+n+"(data,"+l.map(function(b){return"shape["+b+"]"}).join(",")+","+l.map(function(b){return"stride["+b+"]"}).join(",")+",offset)}");var T=new Function("CTOR_LIST","ORDER",s.join(`
`));return T(Ww[e],MK)}function OK(e){if(BK(e))return"buffer";if(FK)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(e)?"array":"generic"}var Ww={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function NK(e,t,n,i){if(e===void 0){var u=Ww.array[0];return u([])}else typeof e=="number"&&(e=[e]);t===void 0&&(t=[e.length]);var s=t.length;if(n===void 0){n=new Array(s);for(var l=s-1,c=1;l>=0;--l)n[l]=c,c*=t[l]}if(i===void 0){i=0;for(var l=0;l<s;++l)n[l]<0&&(i-=(t[l]-1)*n[l])}for(var d=OK(e),f=Ww[d];f.length<=s+1;)f.push(AK(d,f.length-1));var u=f[s+1];return u(e,t,n,i)}var CK=NK;const RK=Gl(CK);var t_="n",Bf="d",Tc="s",Vw="p",Ec="o",rw="i",LK=DK;function Yv(e,t,n){if(n===0){for(var i=[[]],s=0;s<t.length;++s)if(!t[s])for(var l=i.length,c=0;c<l;++c){var d=i[c].slice();d.push(Tc+s),i.push(d)}if(i.length===1)return"";var f=[];e==="generic"?f.push(Bf,".set(",Ec,",",Bf,".get(",Ec,")+"):f.push(Bf,"[",Ec,"]+=");for(var s=1;s<i.length;++s){var d=i[s],u=(d.length+1)%2;s>1&&!u?f.push("+"):u&&f.push("-"),e==="generic"?f.push(Bf,".get("):f.push(Bf,"["),f.push(Ec,"-",d.join("-")),e==="generic"?f.push(")"):f.push("]")}return e==="generic"?f.push(");"):f.push(";"),f.join("")}t[n-1]=!0;var a=[Yv(e,t,n-1),Ec,"+=",Vw,n-1,";for(",rw,n-1,"=1;",rw,n-1,"<",t_,n-1,";++",rw,n-1,"){"];return t[n-1]=!1,a.push(Yv(e,t,n-1),Ec,"+=",Vw,n-1,";}"),a.join("")}function PK(e,t){for(var n=["prefixSum",t.length,"d",e,"s",t.join("s")].join(""),i=["function ",n,"(arr){var ",Bf,"=arr.data,",t_,"=arr.shape,",Tc,"=arr.stride,",Ec,"=arr.offset,"],s=t.length,l=0;l<s;++l)i.push(t_,l,"=",t_,"[",t[l],"],");for(var l=0;l<s;++l)i.push(Tc,l,"=",Tc,"[",t[l],"],");for(var l=0;l<s;++l)i.push(rw,l,"=0,");for(var l=s-1;l>0;--l)i.push(Vw,l,"=",Tc,l,"-",t_,l-1,"*",Tc,l-1,",");i.push(Vw,"0=",Tc,0,";");for(var c=new Array(s),l=0;l<s;++l)c[l]=!0;i.push(Yv(e,c,s),"}return ",n);var d=new Function(i.join(""));return d()}var UN={};function DK(e){var t=e.dtype+e.order.join(),n=UN[t];return n||(n=UN[t]=PK(e.dtype,e.order)),n(e),e}const $K=Gl(LK);var U6={};function UK(e,t){for(var n=1,i=e.length,s=e[0],l=e[0],c=1;c<i;++c)if(l=s,s=e[c],t(s,l)){if(c===n){n++;continue}e[n++]=s}return e.length=n,e}function zK(e){for(var t=1,n=e.length,i=e[0],s=e[0],l=1;l<n;++l,s=i)if(s=i,i=e[l],i!==s){if(l===t){t++;continue}e[t++]=i}return e.length=t,e}function jK(e,t,n){return e.length===0?e:t?(n||e.sort(t),UK(e,t)):(n||e.sort(),zK(e))}var qK=jK,GK=qK;function z6(e,t,n){var i=e.length,s=t.arrayArgs.length,l=t.indexArgs.length>0,c=[],d=[],f=0,u=0,a,m;for(a=0;a<i;++a)d.push(["i",a,"=0"].join(""));for(m=0;m<s;++m)for(a=0;a<i;++a)u=f,f=e[a],a===0?d.push(["d",m,"s",a,"=t",m,"p",f].join("")):d.push(["d",m,"s",a,"=(t",m,"p",f,"-s",u,"*t",m,"p",u,")"].join(""));for(d.length>0&&c.push("var "+d.join(",")),a=i-1;a>=0;--a)f=e[a],c.push(["for(i",a,"=0;i",a,"<s",f,";++i",a,"){"].join(""));for(c.push(n),a=0;a<i;++a){for(u=f,f=e[a],m=0;m<s;++m)c.push(["p",m,"+=d",m,"s",a].join(""));l&&(a>0&&c.push(["index[",u,"]-=s",u].join("")),c.push(["++index[",f,"]"].join(""))),c.push("}")}return c.join(`
`)}function HK(e,t,n,i){for(var s=t.length,l=n.arrayArgs.length,c=n.blockSize,d=n.indexArgs.length>0,f=[],u=0;u<l;++u)f.push(["var offset",u,"=p",u].join(""));for(var u=e;u<s;++u)f.push(["for(var j"+u+"=SS[",t[u],"]|0;j",u,">0;){"].join("")),f.push(["if(j",u,"<",c,"){"].join("")),f.push(["s",t[u],"=j",u].join("")),f.push(["j",u,"=0"].join("")),f.push(["}else{s",t[u],"=",c].join("")),f.push(["j",u,"-=",c,"}"].join("")),d&&f.push(["index[",t[u],"]=j",u].join(""));for(var u=0;u<l;++u){for(var a=["offset"+u],m=e;m<s;++m)a.push(["j",m,"*t",u,"p",t[m]].join(""));f.push(["p",u,"=(",a.join("+"),")"].join(""))}f.push(z6(t,n,i));for(var u=e;u<s;++u)f.push("}");return f.join(`
`)}function WK(e){for(var t=0,n=e[0].length;t<n;){for(var i=1;i<e.length;++i)if(e[i][t]!==e[0][t])return t;++t}return t}function aE(e,t,n){for(var i=e.body,s=[],l=[],c=0;c<e.args.length;++c){var d=e.args[c];if(!(d.count<=0)){var f=new RegExp(d.name,"g"),u="",a=t.arrayArgs.indexOf(c);switch(t.argTypes[c]){case"offset":var m=t.offsetArgIndex.indexOf(c),w=t.offsetArgs[m];a=w.array,u="+q"+m;case"array":u="p"+a+u;var y="l"+c,o="a"+a;if(t.arrayBlockIndices[a]===0)d.count===1?n[a]==="generic"?d.lvalue?(s.push(["var ",y,"=",o,".get(",u,")"].join("")),i=i.replace(f,y),l.push([o,".set(",u,",",y,")"].join(""))):i=i.replace(f,[o,".get(",u,")"].join("")):i=i.replace(f,[o,"[",u,"]"].join("")):n[a]==="generic"?(s.push(["var ",y,"=",o,".get(",u,")"].join("")),i=i.replace(f,y),d.lvalue&&l.push([o,".set(",u,",",y,")"].join(""))):(s.push(["var ",y,"=",o,"[",u,"]"].join("")),i=i.replace(f,y),d.lvalue&&l.push([o,"[",u,"]=",y].join("")));else{for(var T=[d.name],b=[u],S=0;S<Math.abs(t.arrayBlockIndices[a]);S++)T.push("\\s*\\[([^\\]]+)\\]"),b.push("$"+(S+1)+"*t"+a+"b"+S);if(f=new RegExp(T.join(""),"g"),u=b.join("+"),n[a]==="generic")throw new Error("cwise: Generic arrays not supported in combination with blocks!");i=i.replace(f,[o,"[",u,"]"].join(""))}break;case"scalar":i=i.replace(f,"Y"+t.scalarArgs.indexOf(c));break;case"index":i=i.replace(f,"index");break;case"shape":i=i.replace(f,"shape");break}}}return[s.join(`
`),i,l.join(`
`)].join(`
`).trim()}function VK(e){for(var t=new Array(e.length),n=!0,i=0;i<e.length;++i){var s=e[i],l=s.match(/\d+/);l?l=l[0]:l="",s.charAt(0)===0?t[i]="u"+s.charAt(1)+l:t[i]=s.charAt(0)+l,i>0&&(n=n&&t[i]===t[i-1])}return n?t[0]:t.join("")}function YK(e,t){for(var n=t[1].length-Math.abs(e.arrayBlockIndices[0])|0,i=new Array(e.arrayArgs.length),s=new Array(e.arrayArgs.length),l=0;l<e.arrayArgs.length;++l)s[l]=t[2*l],i[l]=t[2*l+1];for(var c=[],d=[],f=[],u=[],a=[],l=0;l<e.arrayArgs.length;++l){e.arrayBlockIndices[l]<0?(f.push(0),u.push(n),c.push(n),d.push(n+e.arrayBlockIndices[l])):(f.push(e.arrayBlockIndices[l]),u.push(e.arrayBlockIndices[l]+n),c.push(0),d.push(e.arrayBlockIndices[l]));for(var m=[],w=0;w<i[l].length;w++)f[l]<=i[l][w]&&i[l][w]<u[l]&&m.push(i[l][w]-f[l]);a.push(m)}for(var y=["SS"],o=["'use strict'"],T=[],w=0;w<n;++w)T.push(["s",w,"=SS[",w,"]"].join(""));for(var l=0;l<e.arrayArgs.length;++l){y.push("a"+l),y.push("t"+l),y.push("p"+l);for(var w=0;w<n;++w)T.push(["t",l,"p",w,"=t",l,"[",f[l]+w,"]"].join(""));for(var w=0;w<Math.abs(e.arrayBlockIndices[l]);++w)T.push(["t",l,"b",w,"=t",l,"[",c[l]+w,"]"].join(""))}for(var l=0;l<e.scalarArgs.length;++l)y.push("Y"+l);if(e.shapeArgs.length>0&&T.push("shape=SS.slice(0)"),e.indexArgs.length>0){for(var b=new Array(n),l=0;l<n;++l)b[l]="0";T.push(["index=[",b.join(","),"]"].join(""))}for(var l=0;l<e.offsetArgs.length;++l){for(var S=e.offsetArgs[l],x=[],w=0;w<S.offset.length;++w)S.offset[w]!==0&&(S.offset[w]===1?x.push(["t",S.array,"p",w].join("")):x.push([S.offset[w],"*t",S.array,"p",w].join("")));x.length===0?T.push("q"+l+"=0"):T.push(["q",l,"=",x.join("+")].join(""))}var k=GK([].concat(e.pre.thisVars).concat(e.body.thisVars).concat(e.post.thisVars));T=T.concat(k),T.length>0&&o.push("var "+T.join(","));for(var l=0;l<e.arrayArgs.length;++l)o.push("p"+l+"|=0");e.pre.body.length>3&&o.push(aE(e.pre,e,s));var I=aE(e.body,e,s),B=WK(a);B<n?o.push(HK(B,a[0],e,I)):o.push(z6(a[0],e,I)),e.post.body.length>3&&o.push(aE(e.post,e,s)),e.debug&&console.log("-----Generated cwise routine for ",t,`:
`+o.join(`
`)+`
----------`);var O=[e.funcName||"unnamed","_cwise_loop_",i[0].join("s"),"m",B,VK(s)].join(""),A=new Function(["function ",O,"(",y.join(","),"){",o.join(`
`),"} return ",O].join(""));return A()}var XK=YK,KK=XK;function JK(e){var t=["'use strict'","var CACHED={}"],n=[],i=e.funcName+"_cwise_thunk";t.push(["return function ",i,"(",e.shimArgs.join(","),"){"].join(""));for(var s=[],l=[],c=[["array",e.arrayArgs[0],".shape.slice(",Math.max(0,e.arrayBlockIndices[0]),e.arrayBlockIndices[0]<0?","+e.arrayBlockIndices[0]+")":")"].join("")],d=[],f=[],u=0;u<e.arrayArgs.length;++u){var a=e.arrayArgs[u];n.push(["t",a,"=array",a,".dtype,","r",a,"=array",a,".order"].join("")),s.push("t"+a),s.push("r"+a),l.push("t"+a),l.push("r"+a+".join()"),c.push("array"+a+".data"),c.push("array"+a+".stride"),c.push("array"+a+".offset|0"),u>0&&(d.push("array"+e.arrayArgs[0]+".shape.length===array"+a+".shape.length+"+(Math.abs(e.arrayBlockIndices[0])-Math.abs(e.arrayBlockIndices[u]))),f.push("array"+e.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[0])+"]===array"+a+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[u])+"]"))}e.arrayArgs.length>1&&(t.push("if (!("+d.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),t.push("for(var shapeIndex=array"+e.arrayArgs[0]+".shape.length-"+Math.abs(e.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),t.push("if (!("+f.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),t.push("}"));for(var u=0;u<e.scalarArgs.length;++u)c.push("scalar"+e.scalarArgs[u]);n.push(["type=[",l.join(","),"].join()"].join("")),n.push("proc=CACHED[type]"),t.push("var "+n.join(",")),t.push(["if(!proc){","CACHED[type]=proc=compile([",s.join(","),"])}","return proc(",c.join(","),")}"].join("")),e.debug&&console.log(`-----Generated thunk:
`+t.join(`
`)+`
----------`);var m=new Function("compile",t.join(`
`));return m(KK.bind(void 0,e))}var QK=JK,ZK=QK;function eJ(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function tJ(e){var t=new eJ;t.pre=e.pre,t.body=e.body,t.post=e.post;var n=e.args.slice(0);t.argTypes=n;for(var i=0;i<n.length;++i){var s=n[i];if(s==="array"||typeof s=="object"&&s.blockIndices){if(t.argTypes[i]="array",t.arrayArgs.push(i),t.arrayBlockIndices.push(s.blockIndices?s.blockIndices:0),t.shimArgs.push("array"+i),i<t.pre.args.length&&t.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array args");if(i<t.post.args.length&&t.post.args[i].count>0)throw new Error("cwise: post() block may not reference array args")}else if(s==="scalar")t.scalarArgs.push(i),t.shimArgs.push("scalar"+i);else if(s==="index"){if(t.indexArgs.push(i),i<t.pre.args.length&&t.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array index");if(i<t.body.args.length&&t.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array index");if(i<t.post.args.length&&t.post.args[i].count>0)throw new Error("cwise: post() block may not reference array index")}else if(s==="shape"){if(t.shapeArgs.push(i),i<t.pre.args.length&&t.pre.args[i].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(i<t.body.args.length&&t.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array shape");if(i<t.post.args.length&&t.post.args[i].lvalue)throw new Error("cwise: post() block may not write to array shape")}else if(typeof s=="object"&&s.offset)t.argTypes[i]="offset",t.offsetArgs.push({array:s.array,offset:s.offset}),t.offsetArgIndex.push(i);else throw new Error("cwise: Unknown argument type "+n[i])}if(t.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(t.pre.args.length>n.length)throw new Error("cwise: Too many arguments in pre() block");if(t.body.args.length>n.length)throw new Error("cwise: Too many arguments in body() block");if(t.post.args.length>n.length)throw new Error("cwise: Too many arguments in post() block");return t.debug=!!e.printCode||!!e.debug,t.funcName=e.funcName||"cwise",t.blockSize=e.blockSize||64,ZK(t)}var nJ=tJ;(function(e){var t=nJ,n={body:"",args:[],thisVars:[],localVars:[]};function i(w){if(!w)return n;for(var y=0;y<w.args.length;++y){var o=w.args[y];y===0?w.args[y]={name:o,lvalue:!0,rvalue:!!w.rvalue,count:w.count||1}:w.args[y]={name:o,lvalue:!1,rvalue:!0,count:1}}return w.thisVars||(w.thisVars=[]),w.localVars||(w.localVars=[]),w}function s(w){return t({args:w.args,pre:i(w.pre),body:i(w.body),post:i(w.proc),funcName:w.funcName})}function l(w){for(var y=[],o=0;o<w.args.length;++o)y.push("a"+o);var T=new Function("P",["return function ",w.funcName,"_ndarrayops(",y.join(","),") {P(",y.join(","),");return a0}"].join(""));return T(s(w))}var c={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var w in c){var y=c[w];e[w]=l({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+y+"c"},funcName:w}),e[w+"eq"]=l({args:["array","array"],body:{args:["a","b"],body:"a"+y+"=b"},rvalue:!0,funcName:w+"eq"}),e[w+"s"]=l({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+y+"s"},funcName:w+"s"}),e[w+"seq"]=l({args:["array","scalar"],body:{args:["a","s"],body:"a"+y+"=s"},rvalue:!0,funcName:w+"seq"})}})();var d={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var w in d){var y=d[w];e[w]=l({args:["array","array"],body:{args:["a","b"],body:"a="+y+"b"},funcName:w}),e[w+"eq"]=l({args:["array"],body:{args:["a"],body:"a="+y+"a"},rvalue:!0,count:2,funcName:w+"eq"})}})();var f={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var w in f){var y=f[w];e[w]=l({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+y+"c"},funcName:w}),e[w+"s"]=l({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+y+"s"},funcName:w+"s"}),e[w+"eq"]=l({args:["array","array"],body:{args:["a","b"],body:"a=a"+y+"b"},rvalue:!0,count:2,funcName:w+"eq"}),e[w+"seq"]=l({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+y+"s"},rvalue:!0,count:2,funcName:w+"seq"})}})();var u=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];(function(){for(var w=0;w<u.length;++w){var y=u[w];e[y]=l({args:["array","array"],pre:{args:[],body:"this_f=Math."+y,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:y}),e[y+"eq"]=l({args:["array"],pre:{args:[],body:"this_f=Math."+y,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:y+"eq"})}})();var a=["max","min","atan2","pow"];(function(){for(var w=0;w<a.length;++w){var y=a[w];e[y]=l({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+y,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:y}),e[y+"s"]=l({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+y,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:y+"s"}),e[y+"eq"]=l({args:["array","array"],pre:{args:[],body:"this_f=Math."+y,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:y+"eq"}),e[y+"seq"]=l({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+y,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:y+"seq"})}})();var m=["atan2","pow"];(function(){for(var w=0;w<m.length;++w){var y=m[w];e[y+"op"]=l({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+y,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:y+"op"}),e[y+"ops"]=l({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+y,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:y+"ops"}),e[y+"opeq"]=l({args:["array","array"],pre:{args:[],body:"this_f=Math."+y,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:y+"opeq"}),e[y+"opseq"]=l({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+y,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:y+"opseq"})}})(),e.any=t({args:["array"],pre:n,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),e.all=t({args:["array"],pre:n,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),e.sum=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),e.prod=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),e.norm2squared=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),e.norm2=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),e.norminf=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),e.norm1=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),e.sup=t({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),e.inf=t({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),e.argmin=t({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),e.argmax=t({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),e.random=l({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),e.assign=l({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),e.assigns=l({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),e.equals=t({args:["array","array"],pre:n,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})})(U6);const om=Gl(U6),Ff=class{constructor(e,t,n,i){this.data=e,this.ndarray=RK(e,t,n,i)}get shape(){return this.ndarray.shape}get offset(){return this.ndarray.offset}get strides(){return this.ndarray.stride}get length(){return this.ndarray.size}set shape(e){this.ndarray.shape=e}set offset(e){this.ndarray.offset=e}set strides(e){this.ndarray.stride=e}get(...e){return this.ndarray.get(...e)}set(...e){return this.ndarray.set(...e)}fill(e){this.data.fill(e)}increment(e,t=1){const n=this.ndarray.index(...e);this.data[n]+=t}addToItself(e){return om.addeq(this.ndarray,e.ndarray),this}subToItself(e){return om.subeq(this.ndarray,e.ndarray),this}add(e,t=rE){const n=new Ff(new t(this.length),this.shape);return om.add(n.ndarray,this.ndarray,e.ndarray),n}sub(e,t=rE){const n=new Ff(new t(this.length),this.shape);return om.sub(n.ndarray,this.ndarray,e.ndarray),n}slice(...e){const t=this.ndarray.pick(...e);return new Ff(this.data,t.shape,t.stride,t.offset)}cumulativeSum(){return $K(this.ndarray),this}static typedArray(e,t,n,i,s){const l=new e(t);return new Ff(l,n,i,s)}static allocCumulative(e,t,n,i){return this.typedArray(wK,e,t,n,i)}static allocCounts(e,t,n,i){return this.typedArray(rE,e,t,n,i)}toString2D(){let e="";for(let t=0;t<this.shape[0];t++){let n="";for(let i=0;i<this.shape[1];i++)n+=this.get(t,i)+" ";e+=n+`
`}return e}toString1D(){let e="";for(let t=0;t<this.shape[0];t++)e+=this.get(t)+" ";return e}toString(){return this.shape.length===1?this.toString1D():this.shape.length===2?this.toString2D():"not implemented yet"}deepCopy(e){const t=Ff.typedArray(e,this.length,this.shape,this.strides,this.offset);for(let n=0;n<this.length;n++)t.data[n]=this.data[n];return t}};let os=Ff;os.ALL=null;class iJ{constructor(t,n,i,s=0,l=1/0){this.numRows=t,this.rowGetter=n,this.mask=i,this.offset=s,this.length=l}*filteredRows(){if(this.mask===null)for(let n=0;n<this.numRows;n++)yield this.rowGetter(n);else for(let n=0;n<this.numRows;n++){const i=this.rowGetter(n);!this.mask.get(n)&&(yield i)}}*[Symbol.iterator](){let t=0,n=0;for(const i of this.filteredRows()){if(t>=this.length)break;n>=this.offset&&(t++,yield i),n++}}}function co(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function sJ(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Qg(e){let t,n,i;e.length!==2?(t=co,n=(d,f)=>co(e(d),f),i=(d,f)=>e(d)-f):(t=e===co||e===sJ?e:rJ,n=e,i=e);function s(d,f,u=0,a=d.length){if(u<a){if(t(f,f)!==0)return a;do{const m=u+a>>>1;n(d[m],f)<0?u=m+1:a=m}while(u<a)}return u}function l(d,f,u=0,a=d.length){if(u<a){if(t(f,f)!==0)return a;do{const m=u+a>>>1;n(d[m],f)<=0?u=m+1:a=m}while(u<a)}return u}function c(d,f,u=0,a=d.length){const m=s(d,f,u,a-1);return m>u&&i(d[m-1],f)>-i(d[m],f)?m-1:m}return{left:s,center:c,right:l}}function rJ(){return 0}function j6(e){return e===null?NaN:+e}function*aJ(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(i=+i)>=i&&(yield i)}}const q6=Qg(co),Yw=q6.right,oJ=q6.left;Qg(j6).center;const Zg=Yw;function lJ(e,t){let n=0,i,s=0,l=0;if(t===void 0)for(let c of e)c!=null&&(c=+c)>=c&&(i=c-s,s+=i/++n,l+=i*(c-s));else{let c=-1;for(let d of e)(d=t(d,++c,e))!=null&&(d=+d)>=d&&(i=d-s,s+=i/++n,l+=i*(d-s))}if(n>1)return l/(n-1)}function cJ(e,t){const n=lJ(e,t);return n&&Math.sqrt(n)}class vi{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let i=0;for(let s=0;s<this._n&&s<32;s++){const l=n[s],c=t+l,d=Math.abs(t)<Math.abs(l)?t-(c-l):l-(c-t);d&&(n[i++]=d),t=c}return n[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let n=this._n,i,s,l,c=0;if(n>0){for(c=t[--n];n>0&&(i=c,s=t[--n],c=i+s,l=s-(c-i),!l););n>0&&(l<0&&t[n-1]<0||l>0&&t[n-1]>0)&&(s=l*2,i=c+s,s==i-c&&(c=i))}return c}}class zN extends Map{constructor(t,n=W6){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[i,s]of t)this.set(i,s)}get(t){return super.get(Xv(this,t))}has(t){return super.has(Xv(this,t))}set(t,n){return super.set(G6(this,t),n)}delete(t){return super.delete(H6(this,t))}}class Xw extends Set{constructor(t,n=W6){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const i of t)this.add(i)}has(t){return super.has(Xv(this,t))}add(t){return super.add(G6(this,t))}delete(t){return super.delete(H6(this,t))}}function Xv({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function G6({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function H6({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function W6(e){return e!==null&&typeof e=="object"?e.valueOf():e}function dJ(e,t){return Array.from(t,n=>e[n])}function fJ(e=co){if(e===co)return V6;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const i=e(t,n);return i||i===0?i:(e(n,n)===0)-(e(t,t)===0)}}function V6(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const uJ=Math.sqrt(50),hJ=Math.sqrt(10),_J=Math.sqrt(2);function Kw(e,t,n){const i=(t-e)/Math.max(0,n),s=Math.floor(Math.log10(i)),l=i/Math.pow(10,s),c=l>=uJ?10:l>=hJ?5:l>=_J?2:1;let d,f,u;return s<0?(u=Math.pow(10,-s)/c,d=Math.round(e*u),f=Math.round(t*u),d/u<e&&++d,f/u>t&&--f,u=-u):(u=Math.pow(10,s)*c,d=Math.round(e/u),f=Math.round(t/u),d*u<e&&++d,f*u>t&&--f),f<d&&.5<=n&&n<2?Kw(e,t,n*2):[d,f,u]}function Kv(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const i=t<e,[s,l,c]=i?Kw(t,e,n):Kw(e,t,n);if(!(l>=s))return[];const d=l-s+1,f=new Array(d);if(i)if(c<0)for(let u=0;u<d;++u)f[u]=(l-u)/-c;else for(let u=0;u<d;++u)f[u]=(l-u)*c;else if(c<0)for(let u=0;u<d;++u)f[u]=(s+u)/-c;else for(let u=0;u<d;++u)f[u]=(s+u)*c;return f}function Jv(e,t,n){return t=+t,e=+e,n=+n,Kw(e,t,n)[2]}function Sl(e,t,n){t=+t,e=+e,n=+n;const i=t<e,s=i?Jv(t,e,n):Jv(e,t,n);return(i?-1:1)*(s<0?1/-s:s)}function Gc(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(n<s||n===void 0&&s>=s)&&(n=s)}return n}function Qv(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(n>s||n===void 0&&s>=s)&&(n=s)}return n}function Y6(e,t,n=0,i=1/0,s){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(e.length-1,i)),!(n<=t&&t<=i))return e;for(s=s===void 0?V6:fJ(s);i>n;){if(i-n>600){const f=i-n+1,u=t-n+1,a=Math.log(f),m=.5*Math.exp(2*a/3),w=.5*Math.sqrt(a*m*(f-m)/f)*(u-f/2<0?-1:1),y=Math.max(n,Math.floor(t-u*m/f+w)),o=Math.min(i,Math.floor(t+(f-u)*m/f+w));Y6(e,t,y,o,s)}const l=e[t];let c=n,d=i;for(kh(e,n,t),s(e[i],l)>0&&kh(e,n,i);c<d;){for(kh(e,c,d),++c,--d;s(e[c],l)<0;)++c;for(;s(e[d],l)>0;)--d}s(e[n],l)===0?kh(e,n,d):(++d,kh(e,d,i)),d<=t&&(n=d+1),t<=d&&(i=d-1)}return e}function kh(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function Zv(e,t,n){if(e=Float64Array.from(aJ(e,n)),!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return Qv(e);if(t>=1)return Gc(e);var i,s=(i-1)*t,l=Math.floor(s),c=Gc(Y6(e,l).subarray(0,l+1)),d=Qv(e.subarray(l+1));return c+(d-c)*(s-l)}}function X6(e,t,n=j6){if(!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,s=(i-1)*t,l=Math.floor(s),c=+n(e[l],l,e),d=+n(e[l+1],l+1,e);return c+(d-c)*(s-l)}}function gJ(e,t){let n=0,i=0;if(t===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(++n,i+=s);else{let s=-1;for(let l of e)(l=t(l,++s,e))!=null&&(l=+l)>=l&&(++n,i+=l)}if(n)return i/n}function K6(e,t){return Zv(e,.5,t)}function*pJ(e){for(const t of e)yield*t}function J6(e){return Array.from(pJ(e))}function _s(e,t,n){e=+e,t=+t,n=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+n;for(var i=-1,s=Math.max(0,Math.ceil((t-e)/n))|0,l=new Array(s);++i<s;)l[i]=e+i*n;return l}function Q6(e,t){let n=0;if(t===void 0)for(let i of e)(i=+i)&&(n+=i);else{let i=-1;for(let s of e)(s=+t(s,++i,e))&&(n+=s)}return n}var yJ={value:()=>{}};function Z6(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new aw(n)}function aw(e){this._=e}function mJ(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",s=n.indexOf(".");if(s>=0&&(i=n.slice(s+1),n=n.slice(0,s)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}aw.prototype=Z6.prototype={constructor:aw,on:function(e,t){var n=this._,i=mJ(e+"",n),s,l=-1,c=i.length;if(arguments.length<2){for(;++l<c;)if((s=(e=i[l]).type)&&(s=wJ(n[s],e.name)))return s;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++l<c;)if(s=(e=i[l]).type)n[s]=jN(n[s],e.name,t);else if(t==null)for(s in n)n[s]=jN(n[s],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new aw(e)},call:function(e,t){if((s=arguments.length-2)>0)for(var n=new Array(s),i=0,s,l;i<s;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(l=this._[e],i=0,s=l.length;i<s;++i)l[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],s=0,l=i.length;s<l;++s)i[s].value.apply(t,n)}};function wJ(e,t){for(var n=0,i=e.length,s;n<i;++n)if((s=e[n]).name===t)return s.value}function jN(e,t,n){for(var i=0,s=e.length;i<s;++i)if(e[i].name===t){e[i]=yJ,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}function Zu(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ep(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Hl(){}var ad=.7,yu=1/ad,Yf="\\s*([+-]?\\d+)\\s*",sg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",oa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",bJ=/^#([0-9a-f]{3,8})$/,TJ=new RegExp(`^rgb\\(${Yf},${Yf},${Yf}\\)$`),EJ=new RegExp(`^rgb\\(${oa},${oa},${oa}\\)$`),vJ=new RegExp(`^rgba\\(${Yf},${Yf},${Yf},${sg}\\)$`),SJ=new RegExp(`^rgba\\(${oa},${oa},${oa},${sg}\\)$`),xJ=new RegExp(`^hsl\\(${sg},${oa},${oa}\\)$`),kJ=new RegExp(`^hsla\\(${sg},${oa},${oa},${sg}\\)$`),qN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Zu(Hl,rg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:GN,formatHex:GN,formatHex8:BJ,formatHsl:FJ,formatRgb:HN,toString:HN});function GN(){return this.rgb().formatHex()}function BJ(){return this.rgb().formatHex8()}function FJ(){return e$(this).formatHsl()}function HN(){return this.rgb().formatRgb()}function rg(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=bJ.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?WN(t):n===3?new Fn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?lm(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?lm(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=TJ.exec(e))?new Fn(t[1],t[2],t[3],1):(t=EJ.exec(e))?new Fn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=vJ.exec(e))?lm(t[1],t[2],t[3],t[4]):(t=SJ.exec(e))?lm(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=xJ.exec(e))?XN(t[1],t[2]/100,t[3]/100,1):(t=kJ.exec(e))?XN(t[1],t[2]/100,t[3]/100,t[4]):qN.hasOwnProperty(e)?WN(qN[e]):e==="transparent"?new Fn(NaN,NaN,NaN,0):null}function WN(e){return new Fn(e>>16&255,e>>8&255,e&255,1)}function lm(e,t,n,i){return i<=0&&(e=t=n=NaN),new Fn(e,t,n,i)}function vB(e){return e instanceof Hl||(e=rg(e)),e?(e=e.rgb(),new Fn(e.r,e.g,e.b,e.opacity)):new Fn}function xl(e,t,n,i){return arguments.length===1?vB(e):new Fn(e,t,n,i??1)}function Fn(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}Zu(Fn,xl,ep(Hl,{brighter(e){return e=e==null?yu:Math.pow(yu,e),new Fn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ad:Math.pow(ad,e),new Fn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Fn(Hc(this.r),Hc(this.g),Hc(this.b),Jw(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:VN,formatHex:VN,formatHex8:IJ,formatRgb:YN,toString:YN}));function VN(){return`#${$c(this.r)}${$c(this.g)}${$c(this.b)}`}function IJ(){return`#${$c(this.r)}${$c(this.g)}${$c(this.b)}${$c((isNaN(this.opacity)?1:this.opacity)*255)}`}function YN(){const e=Jw(this.opacity);return`${e===1?"rgb(":"rgba("}${Hc(this.r)}, ${Hc(this.g)}, ${Hc(this.b)}${e===1?")":`, ${e})`}`}function Jw(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Hc(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function $c(e){return e=Hc(e),(e<16?"0":"")+e.toString(16)}function XN(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ar(e,t,n,i)}function e$(e){if(e instanceof ar)return new ar(e.h,e.s,e.l,e.opacity);if(e instanceof Hl||(e=rg(e)),!e)return new ar;if(e instanceof ar)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,s=Math.min(t,n,i),l=Math.max(t,n,i),c=NaN,d=l-s,f=(l+s)/2;return d?(t===l?c=(n-i)/d+(n<i)*6:n===l?c=(i-t)/d+2:c=(t-n)/d+4,d/=f<.5?l+s:2-l-s,c*=60):d=f>0&&f<1?0:c,new ar(c,d,f,e.opacity)}function Qw(e,t,n,i){return arguments.length===1?e$(e):new ar(e,t,n,i??1)}function ar(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Zu(ar,Qw,ep(Hl,{brighter(e){return e=e==null?yu:Math.pow(yu,e),new ar(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ad:Math.pow(ad,e),new ar(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,s=2*n-i;return new Fn(oE(e>=240?e-240:e+120,s,i),oE(e,s,i),oE(e<120?e+240:e-120,s,i),this.opacity)},clamp(){return new ar(KN(this.h),cm(this.s),cm(this.l),Jw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Jw(this.opacity);return`${e===1?"hsl(":"hsla("}${KN(this.h)}, ${cm(this.s)*100}%, ${cm(this.l)*100}%${e===1?")":`, ${e})`}`}}));function KN(e){return e=(e||0)%360,e<0?e+360:e}function cm(e){return Math.max(0,Math.min(1,e||0))}function oE(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const t$=Math.PI/180,n$=180/Math.PI,Zw=18,i$=.96422,s$=1,r$=.82521,a$=4/29,Xf=6/29,o$=3*Xf*Xf,MJ=Xf*Xf*Xf;function l$(e){if(e instanceof la)return new la(e.l,e.a,e.b,e.opacity);if(e instanceof io)return c$(e);e instanceof Fn||(e=vB(e));var t=fE(e.r),n=fE(e.g),i=fE(e.b),s=lE((.2225045*t+.7168786*n+.0606169*i)/s$),l,c;return t===n&&n===i?l=c=s:(l=lE((.4360747*t+.3850649*n+.1430804*i)/i$),c=lE((.0139322*t+.0971045*n+.7141733*i)/r$)),new la(116*s-16,500*(l-s),200*(s-c),e.opacity)}function eb(e,t,n,i){return arguments.length===1?l$(e):new la(e,t,n,i??1)}function la(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}Zu(la,eb,ep(Hl,{brighter(e){return new la(this.l+Zw*(e??1),this.a,this.b,this.opacity)},darker(e){return new la(this.l-Zw*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=i$*cE(t),e=s$*cE(e),n=r$*cE(n),new Fn(dE(3.1338561*t-1.6168667*e-.4906146*n),dE(-.9787684*t+1.9161415*e+.033454*n),dE(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function lE(e){return e>MJ?Math.pow(e,1/3):e/o$+a$}function cE(e){return e>Xf?e*e*e:o$*(e-a$)}function dE(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function fE(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function AJ(e){if(e instanceof io)return new io(e.h,e.c,e.l,e.opacity);if(e instanceof la||(e=l$(e)),e.a===0&&e.b===0)return new io(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*n$;return new io(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function tb(e,t,n,i){return arguments.length===1?AJ(e):new io(e,t,n,i??1)}function io(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}function c$(e){if(isNaN(e.h))return new la(e.l,0,0,e.opacity);var t=e.h*t$;return new la(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Zu(io,tb,ep(Hl,{brighter(e){return new io(this.h,this.c,this.l+Zw*(e??1),this.opacity)},darker(e){return new io(this.h,this.c,this.l-Zw*(e??1),this.opacity)},rgb(){return c$(this).rgb()}}));var d$=-.14861,SB=1.78277,xB=-.29227,V0=-.90649,ag=1.97294,JN=ag*V0,QN=ag*SB,ZN=SB*xB-V0*d$;function OJ(e){if(e instanceof Wc)return new Wc(e.h,e.s,e.l,e.opacity);e instanceof Fn||(e=vB(e));var t=e.r/255,n=e.g/255,i=e.b/255,s=(ZN*i+JN*t-QN*n)/(ZN+JN-QN),l=i-s,c=(ag*(n-s)-xB*l)/V0,d=Math.sqrt(c*c+l*l)/(ag*s*(1-s)),f=d?Math.atan2(c,l)*n$-120:NaN;return new Wc(f<0?f+360:f,d,s,e.opacity)}function eS(e,t,n,i){return arguments.length===1?OJ(e):new Wc(e,t,n,i??1)}function Wc(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Zu(Wc,eS,ep(Hl,{brighter(e){return e=e==null?yu:Math.pow(yu,e),new Wc(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ad:Math.pow(ad,e),new Wc(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*t$,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),s=Math.sin(e);return new Fn(255*(t+n*(d$*i+SB*s)),255*(t+n*(xB*i+V0*s)),255*(t+n*(ag*i)),this.opacity)}}));function f$(e,t,n,i,s){var l=e*e,c=l*e;return((1-3*e+3*l-c)*t+(4-6*l+3*c)*n+(1+3*e+3*l-3*c)*i+c*s)/6}function u$(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),s=e[i],l=e[i+1],c=i>0?e[i-1]:2*s-l,d=i<t-1?e[i+2]:2*l-s;return f$((n-i/t)*t,c,s,l,d)}}function h$(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t),s=e[(i+t-1)%t],l=e[i%t],c=e[(i+1)%t],d=e[(i+2)%t];return f$((n-i/t)*t,s,l,c,d)}}const Y0=e=>()=>e;function _$(e,t){return function(n){return e+n*t}}function NJ(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function X0(e,t){var n=t-e;return n?_$(e,n>180||n<-180?n-360*Math.round(n/360):n):Y0(isNaN(e)?t:e)}function CJ(e){return(e=+e)==1?In:function(t,n){return n-t?NJ(t,n,e):Y0(isNaN(t)?n:t)}}function In(e,t){var n=t-e;return n?_$(e,n):Y0(isNaN(e)?t:e)}const tS=function e(t){var n=CJ(t);function i(s,l){var c=n((s=xl(s)).r,(l=xl(l)).r),d=n(s.g,l.g),f=n(s.b,l.b),u=In(s.opacity,l.opacity);return function(a){return s.r=c(a),s.g=d(a),s.b=f(a),s.opacity=u(a),s+""}}return i.gamma=e,i}(1);function g$(e){return function(t){var n=t.length,i=new Array(n),s=new Array(n),l=new Array(n),c,d;for(c=0;c<n;++c)d=xl(t[c]),i[c]=d.r||0,s[c]=d.g||0,l[c]=d.b||0;return i=e(i),s=e(s),l=e(l),d.opacity=1,function(f){return d.r=i(f),d.g=s(f),d.b=l(f),d+""}}}var RJ=g$(u$),LJ=g$(h$);function kB(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),s;return function(l){for(s=0;s<n;++s)i[s]=e[s]*(1-l)+t[s]*l;return i}}function p$(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function PJ(e,t){return(p$(t)?kB:y$)(e,t)}function y$(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,s=new Array(i),l=new Array(n),c;for(c=0;c<i;++c)s[c]=Wl(e[c],t[c]);for(;c<n;++c)l[c]=t[c];return function(d){for(c=0;c<i;++c)l[c]=s[c](d);return l}}function m$(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function ir(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function w$(e,t){var n={},i={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?n[s]=Wl(e[s],t[s]):i[s]=t[s];return function(l){for(s in n)i[s]=n[s](l);return i}}var nS=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,uE=new RegExp(nS.source,"g");function DJ(e){return function(){return e}}function $J(e){return function(t){return e(t)+""}}function b$(e,t){var n=nS.lastIndex=uE.lastIndex=0,i,s,l,c=-1,d=[],f=[];for(e=e+"",t=t+"";(i=nS.exec(e))&&(s=uE.exec(t));)(l=s.index)>n&&(l=t.slice(n,l),d[c]?d[c]+=l:d[++c]=l),(i=i[0])===(s=s[0])?d[c]?d[c]+=s:d[++c]=s:(d[++c]=null,f.push({i:c,x:ir(i,s)})),n=uE.lastIndex;return n<t.length&&(l=t.slice(n),d[c]?d[c]+=l:d[++c]=l),d.length<2?f[0]?$J(f[0].x):DJ(t):(t=f.length,function(u){for(var a=0,m;a<t;++a)d[(m=f[a]).i]=m.x(u);return d.join("")})}function Wl(e,t){var n=typeof t,i;return t==null||n==="boolean"?Y0(t):(n==="number"?ir:n==="string"?(i=rg(t))?(t=i,tS):b$:t instanceof rg?tS:t instanceof Date?m$:p$(t)?kB:Array.isArray(t)?y$:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?w$:ir)(e,t)}function UJ(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function zJ(e,t){var n=X0(+e,+t);return function(i){var s=n(i);return s-360*Math.floor(s/360)}}function tp(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var eC=180/Math.PI,iS={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function T$(e,t,n,i,s,l){var c,d,f;return(c=Math.sqrt(e*e+t*t))&&(e/=c,t/=c),(f=e*n+t*i)&&(n-=e*f,i-=t*f),(d=Math.sqrt(n*n+i*i))&&(n/=d,i/=d,f/=d),e*i<t*n&&(e=-e,t=-t,f=-f,c=-c),{translateX:s,translateY:l,rotate:Math.atan2(t,e)*eC,skewX:Math.atan(f)*eC,scaleX:c,scaleY:d}}var dm;function jJ(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?iS:T$(t.a,t.b,t.c,t.d,t.e,t.f)}function qJ(e){return e==null||(dm||(dm=document.createElementNS("http://www.w3.org/2000/svg","g")),dm.setAttribute("transform",e),!(e=dm.transform.baseVal.consolidate()))?iS:(e=e.matrix,T$(e.a,e.b,e.c,e.d,e.e,e.f))}function E$(e,t,n,i){function s(u){return u.length?u.pop()+" ":""}function l(u,a,m,w,y,o){if(u!==m||a!==w){var T=y.push("translate(",null,t,null,n);o.push({i:T-4,x:ir(u,m)},{i:T-2,x:ir(a,w)})}else(m||w)&&y.push("translate("+m+t+w+n)}function c(u,a,m,w){u!==a?(u-a>180?a+=360:a-u>180&&(u+=360),w.push({i:m.push(s(m)+"rotate(",null,i)-2,x:ir(u,a)})):a&&m.push(s(m)+"rotate("+a+i)}function d(u,a,m,w){u!==a?w.push({i:m.push(s(m)+"skewX(",null,i)-2,x:ir(u,a)}):a&&m.push(s(m)+"skewX("+a+i)}function f(u,a,m,w,y,o){if(u!==m||a!==w){var T=y.push(s(y)+"scale(",null,",",null,")");o.push({i:T-4,x:ir(u,m)},{i:T-2,x:ir(a,w)})}else(m!==1||w!==1)&&y.push(s(y)+"scale("+m+","+w+")")}return function(u,a){var m=[],w=[];return u=e(u),a=e(a),l(u.translateX,u.translateY,a.translateX,a.translateY,m,w),c(u.rotate,a.rotate,m,w),d(u.skewX,a.skewX,m,w),f(u.scaleX,u.scaleY,a.scaleX,a.scaleY,m,w),u=a=null,function(y){for(var o=-1,T=w.length,b;++o<T;)m[(b=w[o]).i]=b.x(y);return m.join("")}}}var GJ=E$(jJ,"px, ","px)","deg)"),HJ=E$(qJ,", ",")",")"),WJ=1e-12;function tC(e){return((e=Math.exp(e))+1/e)/2}function VJ(e){return((e=Math.exp(e))-1/e)/2}function YJ(e){return((e=Math.exp(2*e))-1)/(e+1)}const XJ=function e(t,n,i){function s(l,c){var d=l[0],f=l[1],u=l[2],a=c[0],m=c[1],w=c[2],y=a-d,o=m-f,T=y*y+o*o,b,S;if(T<WJ)S=Math.log(w/u)/t,b=function(A){return[d+A*y,f+A*o,u*Math.exp(t*A*S)]};else{var x=Math.sqrt(T),k=(w*w-u*u+i*T)/(2*u*n*x),I=(w*w-u*u-i*T)/(2*w*n*x),B=Math.log(Math.sqrt(k*k+1)-k),O=Math.log(Math.sqrt(I*I+1)-I);S=(O-B)/t,b=function(A){var R=A*S,P=tC(B),D=u/(n*x)*(P*YJ(t*R+B)-VJ(B));return[d+D*y,f+D*o,u*P/tC(t*R+B)]}}return b.duration=S*1e3*t/Math.SQRT2,b}return s.rho=function(l){var c=Math.max(.001,+l),d=c*c,f=d*d;return e(c,d,f)},s}(Math.SQRT2,2,4);function v$(e){return function(t,n){var i=e((t=Qw(t)).h,(n=Qw(n)).h),s=In(t.s,n.s),l=In(t.l,n.l),c=In(t.opacity,n.opacity);return function(d){return t.h=i(d),t.s=s(d),t.l=l(d),t.opacity=c(d),t+""}}}const KJ=v$(X0);var JJ=v$(In);function QJ(e,t){var n=In((e=eb(e)).l,(t=eb(t)).l),i=In(e.a,t.a),s=In(e.b,t.b),l=In(e.opacity,t.opacity);return function(c){return e.l=n(c),e.a=i(c),e.b=s(c),e.opacity=l(c),e+""}}function S$(e){return function(t,n){var i=e((t=tb(t)).h,(n=tb(n)).h),s=In(t.c,n.c),l=In(t.l,n.l),c=In(t.opacity,n.opacity);return function(d){return t.h=i(d),t.c=s(d),t.l=l(d),t.opacity=c(d),t+""}}}const ZJ=S$(X0);var eQ=S$(In);function x$(e){return function t(n){n=+n;function i(s,l){var c=e((s=eS(s)).h,(l=eS(l)).h),d=In(s.s,l.s),f=In(s.l,l.l),u=In(s.opacity,l.opacity);return function(a){return s.h=c(a),s.s=d(a),s.l=f(Math.pow(a,n)),s.opacity=u(a),s+""}}return i.gamma=t,i}(1)}const tQ=x$(X0);var nQ=x$(In);function BB(e,t){t===void 0&&(t=e,e=Wl);for(var n=0,i=t.length-1,s=t[0],l=new Array(i<0?0:i);n<i;)l[n]=e(s,s=t[++n]);return function(c){var d=Math.max(0,Math.min(i-1,Math.floor(c*=i)));return l[d](c-d)}}function iQ(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e(i/(t-1));return n}const sQ=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Wl,interpolateArray:PJ,interpolateBasis:u$,interpolateBasisClosed:h$,interpolateCubehelix:tQ,interpolateCubehelixLong:nQ,interpolateDate:m$,interpolateDiscrete:UJ,interpolateHcl:ZJ,interpolateHclLong:eQ,interpolateHsl:KJ,interpolateHslLong:JJ,interpolateHue:zJ,interpolateLab:QJ,interpolateNumber:ir,interpolateNumberArray:kB,interpolateObject:w$,interpolateRgb:tS,interpolateRgbBasis:RJ,interpolateRgbBasisClosed:LJ,interpolateRound:tp,interpolateString:b$,interpolateTransformCss:GJ,interpolateTransformSvg:HJ,interpolateZoom:XJ,piecewise:BB,quantize:iQ},Symbol.toStringTag,{value:"Module"}));var mu=0,n_=0,Bh=0,k$=1e3,nb,i_,ib=0,od=0,K0=0,og=typeof performance=="object"&&performance.now?performance:Date,B$=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function FB(){return od||(B$(rQ),od=og.now()+K0)}function rQ(){od=0}function sb(){this._call=this._time=this._next=null}sb.prototype=F$.prototype={constructor:sb,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?FB():+n)+(t==null?0:+t),!this._next&&i_!==this&&(i_?i_._next=this:nb=this,i_=this),this._call=e,this._time=n,sS()},stop:function(){this._call&&(this._call=null,this._time=1/0,sS())}};function F$(e,t,n){var i=new sb;return i.restart(e,t,n),i}function aQ(){FB(),++mu;for(var e=nb,t;e;)(t=od-e._time)>=0&&e._call.call(void 0,t),e=e._next;--mu}function nC(){od=(ib=og.now())+K0,mu=n_=0;try{aQ()}finally{mu=0,lQ(),od=0}}function oQ(){var e=og.now(),t=e-ib;t>k$&&(K0-=t,ib=e)}function lQ(){for(var e,t=nb,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:nb=n);i_=e,sS(i)}function sS(e){if(!mu){n_&&(n_=clearTimeout(n_));var t=e-od;t>24?(e<1/0&&(n_=setTimeout(nC,e-og.now()-K0)),Bh&&(Bh=clearInterval(Bh))):(Bh||(ib=og.now(),Bh=setInterval(oQ,k$)),mu=1,B$(nC))}}function cQ(e,t,n){var i=new sb,s=t;return t==null?(i.restart(e,t,n),i):(i._restart=i.restart,i.restart=function(l,c,d){c=+c,d=d==null?FB():+d,i._restart(function f(u){u+=s,i._restart(f,s+=c,d),l(u)},c,d)},i.restart(e,t,n),i)}const rS=Math.PI,aS=2*rS,vc=1e-6,dQ=aS-vc;function I$(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function fQ(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return I$;const n=10**t;return function(i){this._+=i[0];for(let s=1,l=i.length;s<l;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}let IB=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?I$:fQ(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,i,s){this._append`Q${+t},${+n},${this._x1=+i},${this._y1=+s}`}bezierCurveTo(t,n,i,s,l,c){this._append`C${+t},${+n},${+i},${+s},${this._x1=+l},${this._y1=+c}`}arcTo(t,n,i,s,l){if(t=+t,n=+n,i=+i,s=+s,l=+l,l<0)throw new Error(`negative radius: ${l}`);let c=this._x1,d=this._y1,f=i-t,u=s-n,a=c-t,m=d-n,w=a*a+m*m;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(w>vc)if(!(Math.abs(m*f-u*a)>vc)||!l)this._append`L${this._x1=t},${this._y1=n}`;else{let y=i-c,o=s-d,T=f*f+u*u,b=y*y+o*o,S=Math.sqrt(T),x=Math.sqrt(w),k=l*Math.tan((rS-Math.acos((T+w-b)/(2*S*x)))/2),I=k/x,B=k/S;Math.abs(I-1)>vc&&this._append`L${t+I*a},${n+I*m}`,this._append`A${l},${l},0,0,${+(m*y>a*o)},${this._x1=t+B*f},${this._y1=n+B*u}`}}arc(t,n,i,s,l,c){if(t=+t,n=+n,i=+i,c=!!c,i<0)throw new Error(`negative radius: ${i}`);let d=i*Math.cos(s),f=i*Math.sin(s),u=t+d,a=n+f,m=1^c,w=c?s-l:l-s;this._x1===null?this._append`M${u},${a}`:(Math.abs(this._x1-u)>vc||Math.abs(this._y1-a)>vc)&&this._append`L${u},${a}`,i&&(w<0&&(w=w%aS+aS),w>dQ?this._append`A${i},${i},0,1,${m},${t-d},${n-f}A${i},${i},0,1,${m},${this._x1=u},${this._y1=a}`:w>vc&&this._append`A${i},${i},0,${+(w>=rS)},${m},${this._x1=t+i*Math.cos(l)},${this._y1=n+i*Math.sin(l)}`)}rect(t,n,i,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${i=+i}v${+s}h${-i}Z`}toString(){return this._}};function J0(){return new IB}J0.prototype=IB.prototype;const fo=11102230246251565e-32,Vn=134217729,uQ=(3+8*fo)*fo;function hE(e,t,n,i,s){let l,c,d,f,u=t[0],a=i[0],m=0,w=0;a>u==a>-u?(l=u,u=t[++m]):(l=a,a=i[++w]);let y=0;if(m<e&&w<n)for(a>u==a>-u?(c=u+l,d=l-(c-u),u=t[++m]):(c=a+l,d=l-(c-a),a=i[++w]),l=c,d!==0&&(s[y++]=d);m<e&&w<n;)a>u==a>-u?(c=l+u,f=c-l,d=l-(c-f)+(u-f),u=t[++m]):(c=l+a,f=c-l,d=l-(c-f)+(a-f),a=i[++w]),l=c,d!==0&&(s[y++]=d);for(;m<e;)c=l+u,f=c-l,d=l-(c-f)+(u-f),u=t[++m],l=c,d!==0&&(s[y++]=d);for(;w<n;)c=l+a,f=c-l,d=l-(c-f)+(a-f),a=i[++w],l=c,d!==0&&(s[y++]=d);return(l!==0||y===0)&&(s[y++]=l),y}function hQ(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}function np(e){return new Float64Array(e)}const _Q=(3+16*fo)*fo,gQ=(2+12*fo)*fo,pQ=(9+64*fo)*fo*fo,rf=np(4),iC=np(8),sC=np(12),rC=np(16),ui=np(4);function yQ(e,t,n,i,s,l,c){let d,f,u,a,m,w,y,o,T,b,S,x,k,I,B,O,A,R;const P=e-s,D=n-s,U=t-l,Y=i-l;I=P*Y,w=Vn*P,y=w-(w-P),o=P-y,w=Vn*Y,T=w-(w-Y),b=Y-T,B=o*b-(I-y*T-o*T-y*b),O=U*D,w=Vn*U,y=w-(w-U),o=U-y,w=Vn*D,T=w-(w-D),b=D-T,A=o*b-(O-y*T-o*T-y*b),S=B-A,m=B-S,rf[0]=B-(S+m)+(m-A),x=I+S,m=x-I,k=I-(x-m)+(S-m),S=k-O,m=k-S,rf[1]=k-(S+m)+(m-O),R=x+S,m=R-x,rf[2]=x-(R-m)+(S-m),rf[3]=R;let z=hQ(4,rf),W=gQ*c;if(z>=W||-z>=W||(m=e-P,d=e-(P+m)+(m-s),m=n-D,u=n-(D+m)+(m-s),m=t-U,f=t-(U+m)+(m-l),m=i-Y,a=i-(Y+m)+(m-l),d===0&&f===0&&u===0&&a===0)||(W=pQ*c+uQ*Math.abs(z),z+=P*a+Y*d-(U*u+D*f),z>=W||-z>=W))return z;I=d*Y,w=Vn*d,y=w-(w-d),o=d-y,w=Vn*Y,T=w-(w-Y),b=Y-T,B=o*b-(I-y*T-o*T-y*b),O=f*D,w=Vn*f,y=w-(w-f),o=f-y,w=Vn*D,T=w-(w-D),b=D-T,A=o*b-(O-y*T-o*T-y*b),S=B-A,m=B-S,ui[0]=B-(S+m)+(m-A),x=I+S,m=x-I,k=I-(x-m)+(S-m),S=k-O,m=k-S,ui[1]=k-(S+m)+(m-O),R=x+S,m=R-x,ui[2]=x-(R-m)+(S-m),ui[3]=R;const H=hE(4,rf,4,ui,iC);I=P*a,w=Vn*P,y=w-(w-P),o=P-y,w=Vn*a,T=w-(w-a),b=a-T,B=o*b-(I-y*T-o*T-y*b),O=U*u,w=Vn*U,y=w-(w-U),o=U-y,w=Vn*u,T=w-(w-u),b=u-T,A=o*b-(O-y*T-o*T-y*b),S=B-A,m=B-S,ui[0]=B-(S+m)+(m-A),x=I+S,m=x-I,k=I-(x-m)+(S-m),S=k-O,m=k-S,ui[1]=k-(S+m)+(m-O),R=x+S,m=R-x,ui[2]=x-(R-m)+(S-m),ui[3]=R;const V=hE(H,iC,4,ui,sC);I=d*a,w=Vn*d,y=w-(w-d),o=d-y,w=Vn*a,T=w-(w-a),b=a-T,B=o*b-(I-y*T-o*T-y*b),O=f*u,w=Vn*f,y=w-(w-f),o=f-y,w=Vn*u,T=w-(w-u),b=u-T,A=o*b-(O-y*T-o*T-y*b),S=B-A,m=B-S,ui[0]=B-(S+m)+(m-A),x=I+S,m=x-I,k=I-(x-m)+(S-m),S=k-O,m=k-S,ui[1]=k-(S+m)+(m-O),R=x+S,m=R-x,ui[2]=x-(R-m)+(S-m),ui[3]=R;const J=hE(V,sC,4,ui,rC);return rC[J-1]}function fm(e,t,n,i,s,l){const c=(t-l)*(n-s),d=(e-s)*(i-l),f=c-d;if(c===0||d===0||c>0!=d>0)return f;const u=Math.abs(c+d);return Math.abs(f)>=_Q*u?f:-yQ(e,t,n,i,s,l,u)}const aC=Math.pow(2,-52),um=new Uint32Array(512);class rb{static from(t,n=EQ,i=vQ){const s=t.length,l=new Float64Array(s*2);for(let c=0;c<s;c++){const d=t[c];l[2*c]=n(d),l[2*c+1]=i(d)}return new rb(l)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const i=Math.max(2*n-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:i,_hullTri:s,_hullHash:l}=this,c=t.length>>1;let d=1/0,f=1/0,u=-1/0,a=-1/0;for(let D=0;D<c;D++){const U=t[2*D],Y=t[2*D+1];U<d&&(d=U),Y<f&&(f=Y),U>u&&(u=U),Y>a&&(a=Y),this._ids[D]=D}const m=(d+u)/2,w=(f+a)/2;let y=1/0,o,T,b;for(let D=0;D<c;D++){const U=_E(m,w,t[2*D],t[2*D+1]);U<y&&(o=D,y=U)}const S=t[2*o],x=t[2*o+1];y=1/0;for(let D=0;D<c;D++){if(D===o)continue;const U=_E(S,x,t[2*D],t[2*D+1]);U<y&&U>0&&(T=D,y=U)}let k=t[2*T],I=t[2*T+1],B=1/0;for(let D=0;D<c;D++){if(D===o||D===T)continue;const U=bQ(S,x,k,I,t[2*D],t[2*D+1]);U<B&&(b=D,B=U)}let O=t[2*b],A=t[2*b+1];if(B===1/0){for(let Y=0;Y<c;Y++)this._dists[Y]=t[2*Y]-t[0]||t[2*Y+1]-t[1];Of(this._ids,this._dists,0,c-1);const D=new Uint32Array(c);let U=0;for(let Y=0,z=-1/0;Y<c;Y++){const W=this._ids[Y];this._dists[W]>z&&(D[U++]=W,z=this._dists[W])}this.hull=D.subarray(0,U),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(fm(S,x,k,I,O,A)<0){const D=T,U=k,Y=I;T=b,k=O,I=A,b=D,O=U,A=Y}const R=TQ(S,x,k,I,O,A);this._cx=R.x,this._cy=R.y;for(let D=0;D<c;D++)this._dists[D]=_E(t[2*D],t[2*D+1],R.x,R.y);Of(this._ids,this._dists,0,c-1),this._hullStart=o;let P=3;i[o]=n[b]=T,i[T]=n[o]=b,i[b]=n[T]=o,s[o]=0,s[T]=1,s[b]=2,l.fill(-1),l[this._hashKey(S,x)]=o,l[this._hashKey(k,I)]=T,l[this._hashKey(O,A)]=b,this.trianglesLen=0,this._addTriangle(o,T,b,-1,-1,-1);for(let D=0,U,Y;D<this._ids.length;D++){const z=this._ids[D],W=t[2*z],H=t[2*z+1];if(D>0&&Math.abs(W-U)<=aC&&Math.abs(H-Y)<=aC||(U=W,Y=H,z===o||z===T||z===b))continue;let V=0;for(let ne=0,Fe=this._hashKey(W,H);ne<this._hashSize&&(V=l[(Fe+ne)%this._hashSize],!(V!==-1&&V!==i[V]));ne++);V=n[V];let J=V,G;for(;G=i[J],fm(W,H,t[2*J],t[2*J+1],t[2*G],t[2*G+1])>=0;)if(J=G,J===V){J=-1;break}if(J===-1)continue;let oe=this._addTriangle(J,z,i[J],-1,-1,s[J]);s[z]=this._legalize(oe+2),s[J]=oe,P++;let he=i[J];for(;G=i[he],fm(W,H,t[2*he],t[2*he+1],t[2*G],t[2*G+1])<0;)oe=this._addTriangle(he,z,G,s[z],-1,s[he]),s[z]=this._legalize(oe+2),i[he]=he,P--,he=G;if(J===V)for(;G=n[J],fm(W,H,t[2*G],t[2*G+1],t[2*J],t[2*J+1])<0;)oe=this._addTriangle(G,z,J,-1,s[J],s[G]),this._legalize(oe+2),s[G]=oe,i[J]=J,P--,J=G;this._hullStart=n[z]=J,i[J]=n[he]=z,i[z]=he,l[this._hashKey(W,H)]=z,l[this._hashKey(t[2*J],t[2*J+1])]=J}this.hull=new Uint32Array(P);for(let D=0,U=this._hullStart;D<P;D++)this.hull[D]=U,U=i[U];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(mQ(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:i,coords:s}=this;let l=0,c=0;for(;;){const d=i[t],f=t-t%3;if(c=f+(t+2)%3,d===-1){if(l===0)break;t=um[--l];continue}const u=d-d%3,a=f+(t+1)%3,m=u+(d+2)%3,w=n[c],y=n[t],o=n[a],T=n[m];if(wQ(s[2*w],s[2*w+1],s[2*y],s[2*y+1],s[2*o],s[2*o+1],s[2*T],s[2*T+1])){n[t]=T,n[d]=w;const S=i[m];if(S===-1){let k=this._hullStart;do{if(this._hullTri[k]===m){this._hullTri[k]=t;break}k=this._hullPrev[k]}while(k!==this._hullStart)}this._link(t,S),this._link(d,i[c]),this._link(c,m);const x=u+(d+1)%3;l<um.length&&(um[l++]=x)}else{if(l===0)break;t=um[--l]}}return c}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,i,s,l,c){const d=this.trianglesLen;return this._triangles[d]=t,this._triangles[d+1]=n,this._triangles[d+2]=i,this._link(d,s),this._link(d+1,l),this._link(d+2,c),this.trianglesLen+=3,d}}function mQ(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function _E(e,t,n,i){const s=e-n,l=t-i;return s*s+l*l}function wQ(e,t,n,i,s,l,c,d){const f=e-c,u=t-d,a=n-c,m=i-d,w=s-c,y=l-d,o=f*f+u*u,T=a*a+m*m,b=w*w+y*y;return f*(m*b-T*y)-u*(a*b-T*w)+o*(a*y-m*w)<0}function bQ(e,t,n,i,s,l){const c=n-e,d=i-t,f=s-e,u=l-t,a=c*c+d*d,m=f*f+u*u,w=.5/(c*u-d*f),y=(u*a-d*m)*w,o=(c*m-f*a)*w;return y*y+o*o}function TQ(e,t,n,i,s,l){const c=n-e,d=i-t,f=s-e,u=l-t,a=c*c+d*d,m=f*f+u*u,w=.5/(c*u-d*f),y=e+(u*a-d*m)*w,o=t+(c*m-f*a)*w;return{x:y,y:o}}function Of(e,t,n,i){if(i-n<=20)for(let s=n+1;s<=i;s++){const l=e[s],c=t[l];let d=s-1;for(;d>=n&&t[e[d]]>c;)e[d+1]=e[d--];e[d+1]=l}else{const s=n+i>>1;let l=n+1,c=i;Fh(e,s,l),t[e[n]]>t[e[i]]&&Fh(e,n,i),t[e[l]]>t[e[i]]&&Fh(e,l,i),t[e[n]]>t[e[l]]&&Fh(e,n,l);const d=e[l],f=t[d];for(;;){do l++;while(t[e[l]]<f);do c--;while(t[e[c]]>f);if(c<l)break;Fh(e,l,c)}e[n+1]=e[c],e[c]=d,i-l+1>=c-n?(Of(e,t,l,i),Of(e,t,n,c-1)):(Of(e,t,n,c-1),Of(e,t,l,i))}}function Fh(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function EQ(e){return e[0]}function vQ(e){return e[1]}const oC=1e-6;class Uc{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,i){t=+t,n=+n,i=+i;const s=t+i,l=n;if(i<0)throw new Error("negative radius");this._x1===null?this._+=`M${s},${l}`:(Math.abs(this._x1-s)>oC||Math.abs(this._y1-l)>oC)&&(this._+="L"+s+","+l),i&&(this._+=`A${i},${i},0,1,1,${t-i},${n}A${i},${i},0,1,1,${this._x1=s},${this._y1=l}`)}rect(t,n,i,s){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+i}v${+s}h${-i}Z`}value(){return this._||null}}class oS{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let SQ=class{constructor(t,[n,i,s,l]=[0,0,960,500]){if(!((s=+s)>=(n=+n))||!((l=+l)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=s,this.xmin=n,this.ymax=l,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:i},vectors:s}=this,l=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let y=0,o=0,T=i.length,b,S;y<T;y+=3,o+=2){const x=i[y]*2,k=i[y+1]*2,I=i[y+2]*2,B=t[x],O=t[x+1],A=t[k],R=t[k+1],P=t[I],D=t[I+1],U=A-B,Y=R-O,z=P-B,W=D-O,H=(U*W-Y*z)*2;if(Math.abs(H)<1e-9){let V=1e9;const J=i[0]*2;V*=Math.sign((t[J]-B)*W-(t[J+1]-O)*z),b=(B+P)/2-V*W,S=(O+D)/2+V*z}else{const V=1/H,J=U*U+Y*Y,G=z*z+W*W;b=B+(W*J-Y*G)*V,S=O+(U*G-z*J)*V}l[o]=b,l[o+1]=S}let c=n[n.length-1],d,f=c*4,u,a=t[2*c],m,w=t[2*c+1];s.fill(0);for(let y=0;y<n.length;++y)c=n[y],d=f,u=a,m=w,f=c*4,a=t[2*c],w=t[2*c+1],s[d+2]=s[f]=m-w,s[d+3]=s[f+1]=a-u}render(t){const n=t==null?t=new Uc:void 0,{delaunay:{halfedges:i,inedges:s,hull:l},circumcenters:c,vectors:d}=this;if(l.length<=1)return null;for(let a=0,m=i.length;a<m;++a){const w=i[a];if(w<a)continue;const y=Math.floor(a/3)*2,o=Math.floor(w/3)*2,T=c[y],b=c[y+1],S=c[o],x=c[o+1];this._renderSegment(T,b,S,x,t)}let f,u=l[l.length-1];for(let a=0;a<l.length;++a){f=u,u=l[a];const m=Math.floor(s[u]/3)*2,w=c[m],y=c[m+1],o=f*4,T=this._project(w,y,d[o+2],d[o+3]);T&&this._renderSegment(w,y,T[0],T[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Uc:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const i=n==null?n=new Uc:void 0,s=this._clip(t);if(s===null||!s.length)return;n.moveTo(s[0],s[1]);let l=s.length;for(;s[0]===s[l-2]&&s[1]===s[l-1]&&l>1;)l-=2;for(let c=2;c<l;c+=2)(s[c]!==s[c-2]||s[c+1]!==s[c-1])&&n.lineTo(s[c],s[c+1]);return n.closePath(),i&&i.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,i=t.length/2;n<i;++n){const s=this.cellPolygon(n);s&&(s.index=n,yield s)}}cellPolygon(t){const n=new oS;return this.renderCell(t,n),n.value()}_renderSegment(t,n,i,s,l){let c;const d=this._regioncode(t,n),f=this._regioncode(i,s);d===0&&f===0?(l.moveTo(t,n),l.lineTo(i,s)):(c=this._clipSegment(t,n,i,s,d,f))&&(l.moveTo(c[0],c[1]),l.lineTo(c[2],c[3]))}contains(t,n,i){return n=+n,n!==n||(i=+i,i!==i)?!1:this.delaunay._step(t,n,i)===t}*neighbors(t){const n=this._clip(t);if(n)for(const i of this.delaunay.neighbors(t)){const s=this._clip(i);if(s){e:for(let l=0,c=n.length;l<c;l+=2)for(let d=0,f=s.length;d<f;d+=2)if(n[l]==s[d]&&n[l+1]==s[d+1]&&n[(l+2)%c]==s[(d+f-2)%f]&&n[(l+3)%c]==s[(d+f-1)%f]){yield i;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:i,halfedges:s,triangles:l}}=this,c=i[t];if(c===-1)return null;const d=[];let f=c;do{const u=Math.floor(f/3);if(d.push(n[u*2],n[u*2+1]),f=f%3===2?f-2:f+1,l[f]!==t)break;f=s[f]}while(f!==c&&f!==-1);return d}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:i}=this,s=t*4;return i[s]||i[s+1]?this._clipInfinite(t,n,i[s],i[s+1],i[s+2],i[s+3]):this._clipFinite(t,n)}_clipFinite(t,n){const i=n.length;let s=null,l,c,d=n[i-2],f=n[i-1],u,a=this._regioncode(d,f),m,w=0;for(let y=0;y<i;y+=2)if(l=d,c=f,d=n[y],f=n[y+1],u=a,a=this._regioncode(d,f),u===0&&a===0)m=w,w=0,s?s.push(d,f):s=[d,f];else{let o,T,b,S,x;if(u===0){if((o=this._clipSegment(l,c,d,f,u,a))===null)continue;[T,b,S,x]=o}else{if((o=this._clipSegment(d,f,l,c,a,u))===null)continue;[S,x,T,b]=o,m=w,w=this._edgecode(T,b),m&&w&&this._edge(t,m,w,s,s.length),s?s.push(T,b):s=[T,b]}m=w,w=this._edgecode(S,x),m&&w&&this._edge(t,m,w,s,s.length),s?s.push(S,x):s=[S,x]}if(s)m=w,w=this._edgecode(s[0],s[1]),m&&w&&this._edge(t,m,w,s,s.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return s}_clipSegment(t,n,i,s,l,c){for(;;){if(l===0&&c===0)return[t,n,i,s];if(l&c)return null;let d,f,u=l||c;u&8?(d=t+(i-t)*(this.ymax-n)/(s-n),f=this.ymax):u&4?(d=t+(i-t)*(this.ymin-n)/(s-n),f=this.ymin):u&2?(f=n+(s-n)*(this.xmax-t)/(i-t),d=this.xmax):(f=n+(s-n)*(this.xmin-t)/(i-t),d=this.xmin),l?(t=d,n=f,l=this._regioncode(t,n)):(i=d,s=f,c=this._regioncode(i,s))}}_clipInfinite(t,n,i,s,l,c){let d=Array.from(n),f;if((f=this._project(d[0],d[1],i,s))&&d.unshift(f[0],f[1]),(f=this._project(d[d.length-2],d[d.length-1],l,c))&&d.push(f[0],f[1]),d=this._clipFinite(t,d))for(let u=0,a=d.length,m,w=this._edgecode(d[a-2],d[a-1]);u<a;u+=2)m=w,w=this._edgecode(d[u],d[u+1]),m&&w&&(u=this._edge(t,m,w,d,u),a=d.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(d=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return d}_edge(t,n,i,s,l){for(;n!==i;){let c,d;switch(n){case 5:n=4;continue;case 4:n=6,c=this.xmax,d=this.ymin;break;case 6:n=2;continue;case 2:n=10,c=this.xmax,d=this.ymax;break;case 10:n=8;continue;case 8:n=9,c=this.xmin,d=this.ymax;break;case 9:n=1;continue;case 1:n=5,c=this.xmin,d=this.ymin;break}(s[l]!==c||s[l+1]!==d)&&this.contains(t,c,d)&&(s.splice(l,0,c,d),l+=2)}if(s.length>4)for(let c=0;c<s.length;c+=2){const d=(c+2)%s.length,f=(c+4)%s.length;(s[c]===s[d]&&s[d]===s[f]||s[c+1]===s[d+1]&&s[d+1]===s[f+1])&&(s.splice(d,2),c-=2)}return l}_project(t,n,i,s){let l=1/0,c,d,f;if(s<0){if(n<=this.ymin)return null;(c=(this.ymin-n)/s)<l&&(f=this.ymin,d=t+(l=c)*i)}else if(s>0){if(n>=this.ymax)return null;(c=(this.ymax-n)/s)<l&&(f=this.ymax,d=t+(l=c)*i)}if(i>0){if(t>=this.xmax)return null;(c=(this.xmax-t)/i)<l&&(d=this.xmax,f=n+(l=c)*s)}else if(i<0){if(t<=this.xmin)return null;(c=(this.xmin-t)/i)<l&&(d=this.xmin,f=n+(l=c)*s)}return[d,f]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}};const xQ=2*Math.PI,af=Math.pow;function kQ(e){return e[0]}function BQ(e){return e[1]}function FQ(e){const{triangles:t,coords:n}=e;for(let i=0;i<t.length;i+=3){const s=2*t[i],l=2*t[i+1],c=2*t[i+2];if((n[c]-n[s])*(n[l+1]-n[s+1])-(n[l]-n[s])*(n[c+1]-n[s+1])>1e-10)return!1}return!0}function IQ(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class MB{static from(t,n=kQ,i=BQ,s){return new MB("length"in t?MQ(t,n,i,s):Float64Array.from(AQ(t,n,i,s)))}constructor(t){this._delaunator=new rb(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&FQ(t)){this.collinear=Int32Array.from({length:n.length/2},(w,y)=>y).sort((w,y)=>n[2*w]-n[2*y]||n[2*w+1]-n[2*y+1]);const f=this.collinear[0],u=this.collinear[this.collinear.length-1],a=[n[2*f],n[2*f+1],n[2*u],n[2*u+1]],m=1e-8*Math.hypot(a[3]-a[1],a[2]-a[0]);for(let w=0,y=n.length/2;w<y;++w){const o=IQ(n[2*w],n[2*w+1],m);n[2*w]=o[0],n[2*w+1]=o[1]}this._delaunator=new rb(n)}else delete this.collinear;const i=this.halfedges=this._delaunator.halfedges,s=this.hull=this._delaunator.hull,l=this.triangles=this._delaunator.triangles,c=this.inedges.fill(-1),d=this._hullIndex.fill(-1);for(let f=0,u=i.length;f<u;++f){const a=l[f%3===2?f-2:f+1];(i[f]===-1||c[a]===-1)&&(c[a]=f)}for(let f=0,u=s.length;f<u;++f)d[s[f]]=f;s.length<=2&&s.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=s[0],c[s[0]]=1,s.length===2&&(c[s[1]]=0,this.triangles[1]=s[1],this.triangles[2]=s[1]))}voronoi(t){return new SQ(this,t)}*neighbors(t){const{inedges:n,hull:i,_hullIndex:s,halfedges:l,triangles:c,collinear:d}=this;if(d){const m=d.indexOf(t);m>0&&(yield d[m-1]),m<d.length-1&&(yield d[m+1]);return}const f=n[t];if(f===-1)return;let u=f,a=-1;do{if(yield a=c[u],u=u%3===2?u-2:u+1,c[u]!==t)return;if(u=l[u],u===-1){const m=i[(s[t]+1)%i.length];m!==a&&(yield m);return}}while(u!==f)}find(t,n,i=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const s=i;let l;for(;(l=this._step(i,t,n))>=0&&l!==i&&l!==s;)i=l;return l}_step(t,n,i){const{inedges:s,hull:l,_hullIndex:c,halfedges:d,triangles:f,points:u}=this;if(s[t]===-1||!u.length)return(t+1)%(u.length>>1);let a=t,m=af(n-u[t*2],2)+af(i-u[t*2+1],2);const w=s[t];let y=w;do{let o=f[y];const T=af(n-u[o*2],2)+af(i-u[o*2+1],2);if(T<m&&(m=T,a=o),y=y%3===2?y-2:y+1,f[y]!==t)break;if(y=d[y],y===-1){if(y=l[(c[t]+1)%l.length],y!==o&&af(n-u[y*2],2)+af(i-u[y*2+1],2)<m)return y;break}}while(y!==w);return a}render(t){const n=t==null?t=new Uc:void 0,{points:i,halfedges:s,triangles:l}=this;for(let c=0,d=s.length;c<d;++c){const f=s[c];if(f<c)continue;const u=l[c]*2,a=l[f]*2;t.moveTo(i[u],i[u+1]),t.lineTo(i[a],i[a+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const i=t==null?t=new Uc:void 0,{points:s}=this;for(let l=0,c=s.length;l<c;l+=2){const d=s[l],f=s[l+1];t.moveTo(d+n,f),t.arc(d,f,n,0,xQ)}return i&&i.value()}renderHull(t){const n=t==null?t=new Uc:void 0,{hull:i,points:s}=this,l=i[0]*2,c=i.length;t.moveTo(s[l],s[l+1]);for(let d=1;d<c;++d){const f=2*i[d];t.lineTo(s[f],s[f+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new oS;return this.renderHull(t),t.value()}renderTriangle(t,n){const i=n==null?n=new Uc:void 0,{points:s,triangles:l}=this,c=l[t*=3]*2,d=l[t+1]*2,f=l[t+2]*2;return n.moveTo(s[c],s[c+1]),n.lineTo(s[d],s[d+1]),n.lineTo(s[f],s[f+1]),n.closePath(),i&&i.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,i=t.length/3;n<i;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new oS;return this.renderTriangle(t,n),n.value()}}function MQ(e,t,n,i){const s=e.length,l=new Float64Array(s*2);for(let c=0;c<s;++c){const d=e[c];l[c*2]=t.call(i,d,c,e),l[c*2+1]=n.call(i,d,c,e)}return l}function*AQ(e,t,n,i){let s=0;for(const l of e)yield t.call(i,l,s,e),yield n.call(i,l,s,e),++s}var lC={},gE={},pE=34,Ih=10,yE=13;function M$(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function OQ(e,t){var n=M$(e);return function(i,s){return t(n(i),s,e)}}function cC(e){var t=Object.create(null),n=[];return e.forEach(function(i){for(var s in i)s in t||n.push(t[s]=s)}),n}function Ai(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function NQ(e){return e<0?"-"+Ai(-e,6):e>9999?"+"+Ai(e,6):Ai(e,4)}function CQ(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds(),s=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":NQ(e.getUTCFullYear())+"-"+Ai(e.getUTCMonth()+1,2)+"-"+Ai(e.getUTCDate(),2)+(s?"T"+Ai(t,2)+":"+Ai(n,2)+":"+Ai(i,2)+"."+Ai(s,3)+"Z":i?"T"+Ai(t,2)+":"+Ai(n,2)+":"+Ai(i,2)+"Z":n||t?"T"+Ai(t,2)+":"+Ai(n,2)+"Z":"")}function RQ(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function i(m,w){var y,o,T=s(m,function(b,S){if(y)return y(b,S-1);o=b,y=w?OQ(b,w):M$(b)});return T.columns=o||[],T}function s(m,w){var y=[],o=m.length,T=0,b=0,S,x=o<=0,k=!1;m.charCodeAt(o-1)===Ih&&--o,m.charCodeAt(o-1)===yE&&--o;function I(){if(x)return gE;if(k)return k=!1,lC;var O,A=T,R;if(m.charCodeAt(A)===pE){for(;T++<o&&m.charCodeAt(T)!==pE||m.charCodeAt(++T)===pE;);return(O=T)>=o?x=!0:(R=m.charCodeAt(T++))===Ih?k=!0:R===yE&&(k=!0,m.charCodeAt(T)===Ih&&++T),m.slice(A+1,O-1).replace(/""/g,'"')}for(;T<o;){if((R=m.charCodeAt(O=T++))===Ih)k=!0;else if(R===yE)k=!0,m.charCodeAt(T)===Ih&&++T;else if(R!==n)continue;return m.slice(A,O)}return x=!0,m.slice(A,o)}for(;(S=I())!==gE;){for(var B=[];S!==lC&&S!==gE;)B.push(S),S=I();w&&(B=w(B,b++))==null||y.push(B)}return y}function l(m,w){return m.map(function(y){return w.map(function(o){return a(y[o])}).join(e)})}function c(m,w){return w==null&&(w=cC(m)),[w.map(a).join(e)].concat(l(m,w)).join(`
`)}function d(m,w){return w==null&&(w=cC(m)),l(m,w).join(`
`)}function f(m){return m.map(u).join(`
`)}function u(m){return m.map(a).join(e)}function a(m){return m==null?"":m instanceof Date?CQ(m):t.test(m+="")?'"'+m.replace(/"/g,'""')+'"':m}return{parse:i,parseRows:s,format:c,formatBody:d,formatRows:f,formatRow:u,formatValue:a}}function LQ(e,t){var n,i=1;e==null&&(e=0),t==null&&(t=0);function s(){var l,c=n.length,d,f=0,u=0;for(l=0;l<c;++l)d=n[l],f+=d.x,u+=d.y;for(f=(f/c-e)*i,u=(u/c-t)*i,l=0;l<c;++l)d=n[l],d.x-=f,d.y-=u}return s.initialize=function(l){n=l},s.x=function(l){return arguments.length?(e=+l,s):e},s.y=function(l){return arguments.length?(t=+l,s):t},s.strength=function(l){return arguments.length?(i=+l,s):i},s}function PQ(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return A$(this.cover(t,n),t,n,e)}function A$(e,t,n,i){if(isNaN(t)||isNaN(n))return e;var s,l=e._root,c={data:i},d=e._x0,f=e._y0,u=e._x1,a=e._y1,m,w,y,o,T,b,S,x;if(!l)return e._root=c,e;for(;l.length;)if((T=t>=(m=(d+u)/2))?d=m:u=m,(b=n>=(w=(f+a)/2))?f=w:a=w,s=l,!(l=l[S=b<<1|T]))return s[S]=c,e;if(y=+e._x.call(null,l.data),o=+e._y.call(null,l.data),t===y&&n===o)return c.next=l,s?s[S]=c:e._root=c,e;do s=s?s[S]=new Array(4):e._root=new Array(4),(T=t>=(m=(d+u)/2))?d=m:u=m,(b=n>=(w=(f+a)/2))?f=w:a=w;while((S=b<<1|T)===(x=(o>=w)<<1|y>=m));return s[x]=l,s[S]=c,e}function DQ(e){var t,n,i=e.length,s,l,c=new Array(i),d=new Array(i),f=1/0,u=1/0,a=-1/0,m=-1/0;for(n=0;n<i;++n)isNaN(s=+this._x.call(null,t=e[n]))||isNaN(l=+this._y.call(null,t))||(c[n]=s,d[n]=l,s<f&&(f=s),s>a&&(a=s),l<u&&(u=l),l>m&&(m=l));if(f>a||u>m)return this;for(this.cover(f,u).cover(a,m),n=0;n<i;++n)A$(this,c[n],d[n],e[n]);return this}function $Q(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,i=this._y0,s=this._x1,l=this._y1;if(isNaN(n))s=(n=Math.floor(e))+1,l=(i=Math.floor(t))+1;else{for(var c=s-n||1,d=this._root,f,u;n>e||e>=s||i>t||t>=l;)switch(u=(t<i)<<1|e<n,f=new Array(4),f[u]=d,d=f,c*=2,u){case 0:s=n+c,l=i+c;break;case 1:n=s-c,l=i+c;break;case 2:s=n+c,i=l-c;break;case 3:n=s-c,i=l-c;break}this._root&&this._root.length&&(this._root=d)}return this._x0=n,this._y0=i,this._x1=s,this._y1=l,this}function UQ(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function zQ(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ti(e,t,n,i,s){this.node=e,this.x0=t,this.y0=n,this.x1=i,this.y1=s}function jQ(e,t,n){var i,s=this._x0,l=this._y0,c,d,f,u,a=this._x1,m=this._y1,w=[],y=this._root,o,T;for(y&&w.push(new Ti(y,s,l,a,m)),n==null?n=1/0:(s=e-n,l=t-n,a=e+n,m=t+n,n*=n);o=w.pop();)if(!(!(y=o.node)||(c=o.x0)>a||(d=o.y0)>m||(f=o.x1)<s||(u=o.y1)<l))if(y.length){var b=(c+f)/2,S=(d+u)/2;w.push(new Ti(y[3],b,S,f,u),new Ti(y[2],c,S,b,u),new Ti(y[1],b,d,f,S),new Ti(y[0],c,d,b,S)),(T=(t>=S)<<1|e>=b)&&(o=w[w.length-1],w[w.length-1]=w[w.length-1-T],w[w.length-1-T]=o)}else{var x=e-+this._x.call(null,y.data),k=t-+this._y.call(null,y.data),I=x*x+k*k;if(I<n){var B=Math.sqrt(n=I);s=e-B,l=t-B,a=e+B,m=t+B,i=y.data}}return i}function qQ(e){if(isNaN(a=+this._x.call(null,e))||isNaN(m=+this._y.call(null,e)))return this;var t,n=this._root,i,s,l,c=this._x0,d=this._y0,f=this._x1,u=this._y1,a,m,w,y,o,T,b,S;if(!n)return this;if(n.length)for(;;){if((o=a>=(w=(c+f)/2))?c=w:f=w,(T=m>=(y=(d+u)/2))?d=y:u=y,t=n,!(n=n[b=T<<1|o]))return this;if(!n.length)break;(t[b+1&3]||t[b+2&3]||t[b+3&3])&&(i=t,S=b)}for(;n.data!==e;)if(s=n,!(n=n.next))return this;return(l=n.next)&&delete n.next,s?(l?s.next=l:delete s.next,this):t?(l?t[b]=l:delete t[b],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(i?i[S]=n:this._root=n),this):(this._root=l,this)}function GQ(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function HQ(){return this._root}function WQ(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function VQ(e){var t=[],n,i=this._root,s,l,c,d,f;for(i&&t.push(new Ti(i,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(i=n.node,l=n.x0,c=n.y0,d=n.x1,f=n.y1)&&i.length){var u=(l+d)/2,a=(c+f)/2;(s=i[3])&&t.push(new Ti(s,u,a,d,f)),(s=i[2])&&t.push(new Ti(s,l,a,u,f)),(s=i[1])&&t.push(new Ti(s,u,c,d,a)),(s=i[0])&&t.push(new Ti(s,l,c,u,a))}return this}function YQ(e){var t=[],n=[],i;for(this._root&&t.push(new Ti(this._root,this._x0,this._y0,this._x1,this._y1));i=t.pop();){var s=i.node;if(s.length){var l,c=i.x0,d=i.y0,f=i.x1,u=i.y1,a=(c+f)/2,m=(d+u)/2;(l=s[0])&&t.push(new Ti(l,c,d,a,m)),(l=s[1])&&t.push(new Ti(l,a,d,f,m)),(l=s[2])&&t.push(new Ti(l,c,m,a,u)),(l=s[3])&&t.push(new Ti(l,a,m,f,u))}n.push(i)}for(;i=n.pop();)e(i.node,i.x0,i.y0,i.x1,i.y1);return this}function XQ(e){return e[0]}function KQ(e){return arguments.length?(this._x=e,this):this._x}function JQ(e){return e[1]}function QQ(e){return arguments.length?(this._y=e,this):this._y}function AB(e,t,n){var i=new OB(t??XQ,n??JQ,NaN,NaN,NaN,NaN);return e==null?i:i.addAll(e)}function OB(e,t,n,i,s,l){this._x=e,this._y=t,this._x0=n,this._y0=i,this._x1=s,this._y1=l,this._root=void 0}function dC(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Fi=AB.prototype=OB.prototype;Fi.copy=function(){var e=new OB(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,i;if(!t)return e;if(!t.length)return e._root=dC(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var s=0;s<4;++s)(i=t.source[s])&&(i.length?n.push({source:i,target:t.target[s]=new Array(4)}):t.target[s]=dC(i));return e};Fi.add=PQ;Fi.addAll=DQ;Fi.cover=$Q;Fi.data=UQ;Fi.extent=zQ;Fi.find=jQ;Fi.remove=qQ;Fi.removeAll=GQ;Fi.root=HQ;Fi.size=WQ;Fi.visit=VQ;Fi.visitAfter=YQ;Fi.x=KQ;Fi.y=QQ;function Ei(e){return function(){return e}}function il(e){return(e()-.5)*1e-6}function ZQ(e){return e.x+e.vx}function eZ(e){return e.y+e.vy}function tZ(e){var t,n,i,s=1,l=1;typeof e!="function"&&(e=Ei(e==null?1:+e));function c(){for(var u,a=t.length,m,w,y,o,T,b,S=0;S<l;++S)for(m=AB(t,ZQ,eZ).visitAfter(d),u=0;u<a;++u)w=t[u],T=n[w.index],b=T*T,y=w.x+w.vx,o=w.y+w.vy,m.visit(x);function x(k,I,B,O,A){var R=k.data,P=k.r,D=T+P;if(R){if(R.index>w.index){var U=y-R.x-R.vx,Y=o-R.y-R.vy,z=U*U+Y*Y;z<D*D&&(U===0&&(U=il(i),z+=U*U),Y===0&&(Y=il(i),z+=Y*Y),z=(D-(z=Math.sqrt(z)))/z*s,w.vx+=(U*=z)*(D=(P*=P)/(b+P)),w.vy+=(Y*=z)*D,R.vx-=U*(D=1-D),R.vy-=Y*D)}return}return I>y+D||O<y-D||B>o+D||A<o-D}}function d(u){if(u.data)return u.r=n[u.data.index];for(var a=u.r=0;a<4;++a)u[a]&&u[a].r>u.r&&(u.r=u[a].r)}function f(){if(t){var u,a=t.length,m;for(n=new Array(a),u=0;u<a;++u)m=t[u],n[m.index]=+e(m,u,t)}}return c.initialize=function(u,a){t=u,i=a,f()},c.iterations=function(u){return arguments.length?(l=+u,c):l},c.strength=function(u){return arguments.length?(s=+u,c):s},c.radius=function(u){return arguments.length?(e=typeof u=="function"?u:Ei(+u),f(),c):e},c}function nZ(e){return e.index}function fC(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function iZ(e){var t=nZ,n=m,i,s=Ei(30),l,c,d,f,u,a=1;e==null&&(e=[]);function m(b){return 1/Math.min(d[b.source.index],d[b.target.index])}function w(b){for(var S=0,x=e.length;S<a;++S)for(var k=0,I,B,O,A,R,P,D;k<x;++k)I=e[k],B=I.source,O=I.target,A=O.x+O.vx-B.x-B.vx||il(u),R=O.y+O.vy-B.y-B.vy||il(u),P=Math.sqrt(A*A+R*R),P=(P-l[k])/P*b*i[k],A*=P,R*=P,O.vx-=A*(D=f[k]),O.vy-=R*D,B.vx+=A*(D=1-D),B.vy+=R*D}function y(){if(c){var b,S=c.length,x=e.length,k=new Map(c.map((B,O)=>[t(B,O,c),B])),I;for(b=0,d=new Array(S);b<x;++b)I=e[b],I.index=b,typeof I.source!="object"&&(I.source=fC(k,I.source)),typeof I.target!="object"&&(I.target=fC(k,I.target)),d[I.source.index]=(d[I.source.index]||0)+1,d[I.target.index]=(d[I.target.index]||0)+1;for(b=0,f=new Array(x);b<x;++b)I=e[b],f[b]=d[I.source.index]/(d[I.source.index]+d[I.target.index]);i=new Array(x),o(),l=new Array(x),T()}}function o(){if(c)for(var b=0,S=e.length;b<S;++b)i[b]=+n(e[b],b,e)}function T(){if(c)for(var b=0,S=e.length;b<S;++b)l[b]=+s(e[b],b,e)}return w.initialize=function(b,S){c=b,u=S,y()},w.links=function(b){return arguments.length?(e=b,y(),w):e},w.id=function(b){return arguments.length?(t=b,w):t},w.iterations=function(b){return arguments.length?(a=+b,w):a},w.strength=function(b){return arguments.length?(n=typeof b=="function"?b:Ei(+b),o(),w):n},w.distance=function(b){return arguments.length?(s=typeof b=="function"?b:Ei(+b),T(),w):s},w}const sZ=1664525,rZ=1013904223,uC=4294967296;function aZ(){let e=1;return()=>(e=(sZ*e+rZ)%uC)/uC}function oZ(e){return e.x}function lZ(e){return e.y}var cZ=10,dZ=Math.PI*(3-Math.sqrt(5));function fZ(e){var t,n=1,i=.001,s=1-Math.pow(i,1/300),l=0,c=.6,d=new Map,f=F$(m),u=Z6("tick","end"),a=aZ();e==null&&(e=[]);function m(){w(),u.call("tick",t),n<i&&(f.stop(),u.call("end",t))}function w(T){var b,S=e.length,x;T===void 0&&(T=1);for(var k=0;k<T;++k)for(n+=(l-n)*s,d.forEach(function(I){I(n)}),b=0;b<S;++b)x=e[b],x.fx==null?x.x+=x.vx*=c:(x.x=x.fx,x.vx=0),x.fy==null?x.y+=x.vy*=c:(x.y=x.fy,x.vy=0);return t}function y(){for(var T=0,b=e.length,S;T<b;++T){if(S=e[T],S.index=T,S.fx!=null&&(S.x=S.fx),S.fy!=null&&(S.y=S.fy),isNaN(S.x)||isNaN(S.y)){var x=cZ*Math.sqrt(.5+T),k=T*dZ;S.x=x*Math.cos(k),S.y=x*Math.sin(k)}(isNaN(S.vx)||isNaN(S.vy))&&(S.vx=S.vy=0)}}function o(T){return T.initialize&&T.initialize(e,a),T}return y(),t={tick:w,restart:function(){return f.restart(m),t},stop:function(){return f.stop(),t},nodes:function(T){return arguments.length?(e=T,y(),d.forEach(o),t):e},alpha:function(T){return arguments.length?(n=+T,t):n},alphaMin:function(T){return arguments.length?(i=+T,t):i},alphaDecay:function(T){return arguments.length?(s=+T,t):+s},alphaTarget:function(T){return arguments.length?(l=+T,t):l},velocityDecay:function(T){return arguments.length?(c=1-T,t):1-c},randomSource:function(T){return arguments.length?(a=T,d.forEach(o),t):a},force:function(T,b){return arguments.length>1?(b==null?d.delete(T):d.set(T,o(b)),t):d.get(T)},find:function(T,b,S){var x=0,k=e.length,I,B,O,A,R;for(S==null?S=1/0:S*=S,x=0;x<k;++x)A=e[x],I=T-A.x,B=b-A.y,O=I*I+B*B,O<S&&(R=A,S=O);return R},on:function(T,b){return arguments.length>1?(u.on(T,b),t):u.on(T)}}}function uZ(){var e,t,n,i,s=Ei(-30),l,c=1,d=1/0,f=.81;function u(y){var o,T=e.length,b=AB(e,oZ,lZ).visitAfter(m);for(i=y,o=0;o<T;++o)t=e[o],b.visit(w)}function a(){if(e){var y,o=e.length,T;for(l=new Array(o),y=0;y<o;++y)T=e[y],l[T.index]=+s(T,y,e)}}function m(y){var o=0,T,b,S=0,x,k,I;if(y.length){for(x=k=I=0;I<4;++I)(T=y[I])&&(b=Math.abs(T.value))&&(o+=T.value,S+=b,x+=b*T.x,k+=b*T.y);y.x=x/S,y.y=k/S}else{T=y,T.x=T.data.x,T.y=T.data.y;do o+=l[T.data.index];while(T=T.next)}y.value=o}function w(y,o,T,b){if(!y.value)return!0;var S=y.x-t.x,x=y.y-t.y,k=b-o,I=S*S+x*x;if(k*k/f<I)return I<d&&(S===0&&(S=il(n),I+=S*S),x===0&&(x=il(n),I+=x*x),I<c&&(I=Math.sqrt(c*I)),t.vx+=S*y.value*i/I,t.vy+=x*y.value*i/I),!0;if(y.length||I>=d)return;(y.data!==t||y.next)&&(S===0&&(S=il(n),I+=S*S),x===0&&(x=il(n),I+=x*x),I<c&&(I=Math.sqrt(c*I)));do y.data!==t&&(k=l[y.data.index]*i/I,t.vx+=S*k,t.vy+=x*k);while(y=y.next)}return u.initialize=function(y,o){e=y,n=o,a()},u.strength=function(y){return arguments.length?(s=typeof y=="function"?y:Ei(+y),a(),u):s},u.distanceMin=function(y){return arguments.length?(c=y*y,u):Math.sqrt(c)},u.distanceMax=function(y){return arguments.length?(d=y*y,u):Math.sqrt(d)},u.theta=function(y){return arguments.length?(f=y*y,u):Math.sqrt(f)},u}function hZ(e){var t=Ei(.1),n,i,s;typeof e!="function"&&(e=Ei(e==null?0:+e));function l(d){for(var f=0,u=n.length,a;f<u;++f)a=n[f],a.vx+=(s[f]-a.x)*i[f]*d}function c(){if(n){var d,f=n.length;for(i=new Array(f),s=new Array(f),d=0;d<f;++d)i[d]=isNaN(s[d]=+e(n[d],d,n))?0:+t(n[d],d,n)}}return l.initialize=function(d){n=d,c()},l.strength=function(d){return arguments.length?(t=typeof d=="function"?d:Ei(+d),c(),l):t},l.x=function(d){return arguments.length?(e=typeof d=="function"?d:Ei(+d),c(),l):e},l}function _Z(e){var t=Ei(.1),n,i,s;typeof e!="function"&&(e=Ei(e==null?0:+e));function l(d){for(var f=0,u=n.length,a;f<u;++f)a=n[f],a.vy+=(s[f]-a.y)*i[f]*d}function c(){if(n){var d,f=n.length;for(i=new Array(f),s=new Array(f),d=0;d<f;++d)i[d]=isNaN(s[d]=+e(n[d],d,n))?0:+t(n[d],d,n)}}return l.initialize=function(d){n=d,c()},l.strength=function(d){return arguments.length?(t=typeof d=="function"?d:Ei(+d),c(),l):t},l.y=function(d){return arguments.length?(e=typeof d=="function"?d:Ei(+d),c(),l):e},l}function gZ(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function ab(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function wu(e){return e=ab(Math.abs(e)),e?e[1]:NaN}function pZ(e,t){return function(n,i){for(var s=n.length,l=[],c=0,d=e[0],f=0;s>0&&d>0&&(f+d+1>i&&(d=Math.max(1,i-f)),l.push(n.substring(s-=d,s+d)),!((f+=d+1)>i));)d=e[c=(c+1)%e.length];return l.reverse().join(t)}}function yZ(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var mZ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ld(e){if(!(t=mZ.exec(e)))throw new Error("invalid format: "+e);var t;return new NB({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ld.prototype=NB.prototype;function NB(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}NB.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function wZ(e){e:for(var t=e.length,n=1,i=-1,s;n<t;++n)switch(e[n]){case".":i=s=n;break;case"0":i===0&&(i=n),s=n;break;default:if(!+e[n])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(s+1):e}var O$;function bZ(e,t){var n=ab(e,t);if(!n)return e+"";var i=n[0],s=n[1],l=s-(O$=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,c=i.length;return l===c?i:l>c?i+new Array(l-c+1).join("0"):l>0?i.slice(0,l)+"."+i.slice(l):"0."+new Array(1-l).join("0")+ab(e,Math.max(0,t+l-1))[0]}function hC(e,t){var n=ab(e,t);if(!n)return e+"";var i=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+i:i.length>s+1?i.slice(0,s+1)+"."+i.slice(s+1):i+new Array(s-i.length+2).join("0")}const _C={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:gZ,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>hC(e*100,t),r:hC,s:bZ,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function gC(e){return e}var pC=Array.prototype.map,yC=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function N$(e){var t=e.grouping===void 0||e.thousands===void 0?gC:pZ(pC.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",l=e.numerals===void 0?gC:yZ(pC.call(e.numerals,String)),c=e.percent===void 0?"%":e.percent+"",d=e.minus===void 0?"":e.minus+"",f=e.nan===void 0?"NaN":e.nan+"";function u(m){m=ld(m);var w=m.fill,y=m.align,o=m.sign,T=m.symbol,b=m.zero,S=m.width,x=m.comma,k=m.precision,I=m.trim,B=m.type;B==="n"?(x=!0,B="g"):_C[B]||(k===void 0&&(k=12),I=!0,B="g"),(b||w==="0"&&y==="=")&&(b=!0,w="0",y="=");var O=T==="$"?n:T==="#"&&/[boxX]/.test(B)?"0"+B.toLowerCase():"",A=T==="$"?i:/[%p]/.test(B)?c:"",R=_C[B],P=/[defgprs%]/.test(B);k=k===void 0?6:/[gprs]/.test(B)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k));function D(U){var Y=O,z=A,W,H,V;if(B==="c")z=R(U)+z,U="";else{U=+U;var J=U<0||1/U<0;if(U=isNaN(U)?f:R(Math.abs(U),k),I&&(U=wZ(U)),J&&+U==0&&o!=="+"&&(J=!1),Y=(J?o==="("?o:d:o==="-"||o==="("?"":o)+Y,z=(B==="s"?yC[8+O$/3]:"")+z+(J&&o==="("?")":""),P){for(W=-1,H=U.length;++W<H;)if(V=U.charCodeAt(W),48>V||V>57){z=(V===46?s+U.slice(W+1):U.slice(W))+z,U=U.slice(0,W);break}}}x&&!b&&(U=t(U,1/0));var G=Y.length+U.length+z.length,oe=G<S?new Array(S-G+1).join(w):"";switch(x&&b&&(U=t(oe+U,oe.length?S-z.length:1/0),oe=""),y){case"<":U=Y+U+z+oe;break;case"=":U=Y+oe+U+z;break;case"^":U=oe.slice(0,G=oe.length>>1)+Y+U+z+oe.slice(G);break;default:U=oe+Y+U+z;break}return l(U)}return D.toString=function(){return m+""},D}function a(m,w){var y=u((m=ld(m),m.type="f",m)),o=Math.max(-8,Math.min(8,Math.floor(wu(w)/3)))*3,T=Math.pow(10,-o),b=yC[8+o/3];return function(S){return y(T*S)+b}}return{format:u,formatPrefix:a}}var hm,Q0,CB;TZ({thousands:",",grouping:[3],currency:["$",""]});function TZ(e){return hm=N$(e),Q0=hm.format,CB=hm.formatPrefix,hm}function C$(e){return Math.max(0,-wu(Math.abs(e)))}function R$(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(wu(t)/3)))*3-wu(Math.abs(e)))}function L$(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,wu(t)-wu(e))+1}var $e=1e-6,ob=1e-12,_t=Math.PI,an=_t/2,lb=_t/4,xi=_t*2,ln=180/_t,ut=_t/180,mt=Math.abs,eh=Math.atan,$s=Math.atan2,ze=Math.cos,_m=Math.ceil,P$=Math.exp,lS=Math.hypot,cb=Math.log,mE=Math.pow,Re=Math.sin,Is=Math.sign||function(e){return e>0?1:e<0?-1:0},ki=Math.sqrt,RB=Math.tan;function D$(e){return e>1?0:e<-1?_t:Math.acos(e)}function Vi(e){return e>1?an:e<-1?-an:Math.asin(e)}function Un(){}function db(e,t){e&&wC.hasOwnProperty(e.type)&&wC[e.type](e,t)}var mC={Feature:function(e,t){db(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,s=n.length;++i<s;)db(n[i].geometry,t)}},wC={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,s=n.length;++i<s;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){cS(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,s=n.length;++i<s;)cS(n[i],t,0)},Polygon:function(e,t){bC(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,s=n.length;++i<s;)bC(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,s=n.length;++i<s;)db(n[i],t)}};function cS(e,t,n){var i=-1,s=e.length-n,l;for(t.lineStart();++i<s;)l=e[i],t.point(l[0],l[1],l[2]);t.lineEnd()}function bC(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)cS(e[n],t,1);t.polygonEnd()}function no(e,t){e&&mC.hasOwnProperty(e.type)?mC[e.type](e,t):db(e,t)}var fb=new vi,ub=new vi,$$,U$,dS,fS,uS,wa={point:Un,lineStart:Un,lineEnd:Un,polygonStart:function(){fb=new vi,wa.lineStart=EZ,wa.lineEnd=vZ},polygonEnd:function(){var e=+fb;ub.add(e<0?xi+e:e),this.lineStart=this.lineEnd=this.point=Un},sphere:function(){ub.add(xi)}};function EZ(){wa.point=SZ}function vZ(){z$($$,U$)}function SZ(e,t){wa.point=z$,$$=e,U$=t,e*=ut,t*=ut,dS=e,fS=ze(t=t/2+lb),uS=Re(t)}function z$(e,t){e*=ut,t*=ut,t=t/2+lb;var n=e-dS,i=n>=0?1:-1,s=i*n,l=ze(t),c=Re(t),d=uS*c,f=fS*l+d*ze(s),u=d*i*Re(s);fb.add($s(u,f)),dS=e,fS=l,uS=c}function xZ(e){return ub=new vi,no(e,wa),ub*2}function hb(e){return[$s(e[1],e[0]),Vi(e[2])]}function cd(e){var t=e[0],n=e[1],i=ze(n);return[i*ze(t),i*Re(t),Re(n)]}function gm(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function bu(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function wE(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function pm(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function _b(e){var t=ki(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var en,Ci,sn,us,Sc,j$,q$,Kf,F_,Ko,To,Ja={point:hS,lineStart:TC,lineEnd:EC,polygonStart:function(){Ja.point=H$,Ja.lineStart=kZ,Ja.lineEnd=BZ,F_=new vi,wa.polygonStart()},polygonEnd:function(){wa.polygonEnd(),Ja.point=hS,Ja.lineStart=TC,Ja.lineEnd=EC,fb<0?(en=-(sn=180),Ci=-(us=90)):F_>$e?us=90:F_<-$e&&(Ci=-90),To[0]=en,To[1]=sn},sphere:function(){en=-(sn=180),Ci=-(us=90)}};function hS(e,t){Ko.push(To=[en=e,sn=e]),t<Ci&&(Ci=t),t>us&&(us=t)}function G$(e,t){var n=cd([e*ut,t*ut]);if(Kf){var i=bu(Kf,n),s=[i[1],-i[0],0],l=bu(s,i);_b(l),l=hb(l);var c=e-Sc,d=c>0?1:-1,f=l[0]*ln*d,u,a=mt(c)>180;a^(d*Sc<f&&f<d*e)?(u=l[1]*ln,u>us&&(us=u)):(f=(f+360)%360-180,a^(d*Sc<f&&f<d*e)?(u=-l[1]*ln,u<Ci&&(Ci=u)):(t<Ci&&(Ci=t),t>us&&(us=t))),a?e<Sc?cs(en,e)>cs(en,sn)&&(sn=e):cs(e,sn)>cs(en,sn)&&(en=e):sn>=en?(e<en&&(en=e),e>sn&&(sn=e)):e>Sc?cs(en,e)>cs(en,sn)&&(sn=e):cs(e,sn)>cs(en,sn)&&(en=e)}else Ko.push(To=[en=e,sn=e]);t<Ci&&(Ci=t),t>us&&(us=t),Kf=n,Sc=e}function TC(){Ja.point=G$}function EC(){To[0]=en,To[1]=sn,Ja.point=hS,Kf=null}function H$(e,t){if(Kf){var n=e-Sc;F_.add(mt(n)>180?n+(n>0?360:-360):n)}else j$=e,q$=t;wa.point(e,t),G$(e,t)}function kZ(){wa.lineStart()}function BZ(){H$(j$,q$),wa.lineEnd(),mt(F_)>$e&&(en=-(sn=180)),To[0]=en,To[1]=sn,Kf=null}function cs(e,t){return(t-=e)<0?t+360:t}function FZ(e,t){return e[0]-t[0]}function vC(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function IZ(e){var t,n,i,s,l,c,d;if(us=sn=-(en=Ci=1/0),Ko=[],no(e,Ja),n=Ko.length){for(Ko.sort(FZ),t=1,i=Ko[0],l=[i];t<n;++t)s=Ko[t],vC(i,s[0])||vC(i,s[1])?(cs(i[0],s[1])>cs(i[0],i[1])&&(i[1]=s[1]),cs(s[0],i[1])>cs(i[0],i[1])&&(i[0]=s[0])):l.push(i=s);for(c=-1/0,n=l.length-1,t=0,i=l[n];t<=n;i=s,++t)s=l[t],(d=cs(i[1],s[0]))>c&&(c=d,en=s[0],sn=i[1])}return Ko=To=null,en===1/0||Ci===1/0?[[NaN,NaN],[NaN,NaN]]:[[en,Ci],[sn,us]]}var s_,gb,pb,yb,mb,wb,bb,Tb,_S,gS,pS,W$,V$,mi,wi,bi,fr={sphere:Un,point:LB,lineStart:SC,lineEnd:xC,polygonStart:function(){fr.lineStart=OZ,fr.lineEnd=NZ},polygonEnd:function(){fr.lineStart=SC,fr.lineEnd=xC}};function LB(e,t){e*=ut,t*=ut;var n=ze(t);ip(n*ze(e),n*Re(e),Re(t))}function ip(e,t,n){++s_,pb+=(e-pb)/s_,yb+=(t-yb)/s_,mb+=(n-mb)/s_}function SC(){fr.point=MZ}function MZ(e,t){e*=ut,t*=ut;var n=ze(t);mi=n*ze(e),wi=n*Re(e),bi=Re(t),fr.point=AZ,ip(mi,wi,bi)}function AZ(e,t){e*=ut,t*=ut;var n=ze(t),i=n*ze(e),s=n*Re(e),l=Re(t),c=$s(ki((c=wi*l-bi*s)*c+(c=bi*i-mi*l)*c+(c=mi*s-wi*i)*c),mi*i+wi*s+bi*l);gb+=c,wb+=c*(mi+(mi=i)),bb+=c*(wi+(wi=s)),Tb+=c*(bi+(bi=l)),ip(mi,wi,bi)}function xC(){fr.point=LB}function OZ(){fr.point=CZ}function NZ(){Y$(W$,V$),fr.point=LB}function CZ(e,t){W$=e,V$=t,e*=ut,t*=ut,fr.point=Y$;var n=ze(t);mi=n*ze(e),wi=n*Re(e),bi=Re(t),ip(mi,wi,bi)}function Y$(e,t){e*=ut,t*=ut;var n=ze(t),i=n*ze(e),s=n*Re(e),l=Re(t),c=wi*l-bi*s,d=bi*i-mi*l,f=mi*s-wi*i,u=lS(c,d,f),a=Vi(u),m=u&&-a/u;_S.add(m*c),gS.add(m*d),pS.add(m*f),gb+=a,wb+=a*(mi+(mi=i)),bb+=a*(wi+(wi=s)),Tb+=a*(bi+(bi=l)),ip(mi,wi,bi)}function RZ(e){s_=gb=pb=yb=mb=wb=bb=Tb=0,_S=new vi,gS=new vi,pS=new vi,no(e,fr);var t=+_S,n=+gS,i=+pS,s=lS(t,n,i);return s<ob&&(t=wb,n=bb,i=Tb,gb<$e&&(t=pb,n=yb,i=mb),s=lS(t,n,i),s<ob)?[NaN,NaN]:[$s(n,t)*ln,Vi(i/s)*ln]}function yS(e,t){function n(i,s){return i=e(i,s),t(i[0],i[1])}return e.invert&&t.invert&&(n.invert=function(i,s){return i=t.invert(i,s),i&&e.invert(i[0],i[1])}),n}function mS(e,t){return mt(e)>_t&&(e-=Math.round(e/xi)*xi),[e,t]}mS.invert=mS;function X$(e,t,n){return(e%=xi)?t||n?yS(BC(e),FC(t,n)):BC(e):t||n?FC(t,n):mS}function kC(e){return function(t,n){return t+=e,mt(t)>_t&&(t-=Math.round(t/xi)*xi),[t,n]}}function BC(e){var t=kC(e);return t.invert=kC(-e),t}function FC(e,t){var n=ze(e),i=Re(e),s=ze(t),l=Re(t);function c(d,f){var u=ze(f),a=ze(d)*u,m=Re(d)*u,w=Re(f),y=w*n+a*i;return[$s(m*s-y*l,a*n-w*i),Vi(y*s+m*l)]}return c.invert=function(d,f){var u=ze(f),a=ze(d)*u,m=Re(d)*u,w=Re(f),y=w*s-m*l;return[$s(m*s+w*l,a*n+y*i),Vi(y*n-a*i)]},c}function LZ(e){e=X$(e[0]*ut,e[1]*ut,e.length>2?e[2]*ut:0);function t(n){return n=e(n[0]*ut,n[1]*ut),n[0]*=ln,n[1]*=ln,n}return t.invert=function(n){return n=e.invert(n[0]*ut,n[1]*ut),n[0]*=ln,n[1]*=ln,n},t}function PZ(e,t,n,i,s,l){if(n){var c=ze(t),d=Re(t),f=i*n;s==null?(s=t+i*xi,l=t-f/2):(s=IC(c,s),l=IC(c,l),(i>0?s<l:s>l)&&(s+=i*xi));for(var u,a=s;i>0?a>l:a<l;a-=f)u=hb([c,-d*ze(a),-d*Re(a)]),e.point(u[0],u[1])}}function IC(e,t){t=cd(t),t[0]-=e,_b(t);var n=D$(-t[1]);return((-t[2]<0?-n:n)+xi-$e)%xi}function K$(){var e=[],t;return{point:function(n,i,s){t.push([n,i,s])},lineStart:function(){e.push(t=[])},lineEnd:Un,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function ow(e,t){return mt(e[0]-t[0])<$e&&mt(e[1]-t[1])<$e}function ym(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function J$(e,t,n,i,s){var l=[],c=[],d,f;if(e.forEach(function(o){if(!((T=o.length-1)<=0)){var T,b=o[0],S=o[T],x;if(ow(b,S)){if(!b[2]&&!S[2]){for(s.lineStart(),d=0;d<T;++d)s.point((b=o[d])[0],b[1]);s.lineEnd();return}S[0]+=2*$e}l.push(x=new ym(b,o,null,!0)),c.push(x.o=new ym(b,null,x,!1)),l.push(x=new ym(S,o,null,!1)),c.push(x.o=new ym(S,null,x,!0))}}),!!l.length){for(c.sort(t),MC(l),MC(c),d=0,f=c.length;d<f;++d)c[d].e=n=!n;for(var u=l[0],a,m;;){for(var w=u,y=!0;w.v;)if((w=w.n)===u)return;a=w.z,s.lineStart();do{if(w.v=w.o.v=!0,w.e){if(y)for(d=0,f=a.length;d<f;++d)s.point((m=a[d])[0],m[1]);else i(w.x,w.n.x,1,s);w=w.n}else{if(y)for(a=w.p.z,d=a.length-1;d>=0;--d)s.point((m=a[d])[0],m[1]);else i(w.x,w.p.x,-1,s);w=w.p}w=w.o,a=w.z,y=!y}while(!w.v);s.lineEnd()}}}function MC(e){if(t=e.length){for(var t,n=0,i=e[0],s;++n<t;)i.n=s=e[n],s.p=i,i=s;i.n=s=e[0],s.p=i}}function bE(e){return mt(e[0])<=_t?e[0]:Is(e[0])*((mt(e[0])+_t)%xi-_t)}function DZ(e,t){var n=bE(t),i=t[1],s=Re(i),l=[Re(n),-ze(n),0],c=0,d=0,f=new vi;s===1?i=an+$e:s===-1&&(i=-an-$e);for(var u=0,a=e.length;u<a;++u)if(w=(m=e[u]).length)for(var m,w,y=m[w-1],o=bE(y),T=y[1]/2+lb,b=Re(T),S=ze(T),x=0;x<w;++x,o=I,b=O,S=A,y=k){var k=m[x],I=bE(k),B=k[1]/2+lb,O=Re(B),A=ze(B),R=I-o,P=R>=0?1:-1,D=P*R,U=D>_t,Y=b*O;if(f.add($s(Y*P*Re(D),S*A+Y*ze(D))),c+=U?R+P*xi:R,U^o>=n^I>=n){var z=bu(cd(y),cd(k));_b(z);var W=bu(l,z);_b(W);var H=(U^R>=0?-1:1)*Vi(W[2]);(i>H||i===H&&(z[0]||z[1]))&&(d+=U^R>=0?1:-1)}}return(c<-$e||c<$e&&f<-ob)^d&1}function Q$(e,t,n,i){return function(s){var l=t(s),c=K$(),d=t(c),f=!1,u,a,m,w={point:y,lineStart:T,lineEnd:b,polygonStart:function(){w.point=S,w.lineStart=x,w.lineEnd=k,a=[],u=[]},polygonEnd:function(){w.point=y,w.lineStart=T,w.lineEnd=b,a=J6(a);var I=DZ(u,i);a.length?(f||(s.polygonStart(),f=!0),J$(a,UZ,I,n,s)):I&&(f||(s.polygonStart(),f=!0),s.lineStart(),n(null,null,1,s),s.lineEnd()),f&&(s.polygonEnd(),f=!1),a=u=null},sphere:function(){s.polygonStart(),s.lineStart(),n(null,null,1,s),s.lineEnd(),s.polygonEnd()}};function y(I,B){e(I,B)&&s.point(I,B)}function o(I,B){l.point(I,B)}function T(){w.point=o,l.lineStart()}function b(){w.point=y,l.lineEnd()}function S(I,B){m.push([I,B]),d.point(I,B)}function x(){d.lineStart(),m=[]}function k(){S(m[0][0],m[0][1]),d.lineEnd();var I=d.clean(),B=c.result(),O,A=B.length,R,P,D;if(m.pop(),u.push(m),m=null,!!A){if(I&1){if(P=B[0],(R=P.length-1)>0){for(f||(s.polygonStart(),f=!0),s.lineStart(),O=0;O<R;++O)s.point((D=P[O])[0],D[1]);s.lineEnd()}return}A>1&&I&2&&B.push(B.pop().concat(B.shift())),a.push(B.filter($Z))}}return w}}function $Z(e){return e.length>1}function UZ(e,t){return((e=e.x)[0]<0?e[1]-an-$e:an-e[1])-((t=t.x)[0]<0?t[1]-an-$e:an-t[1])}const AC=Q$(function(){return!0},zZ,qZ,[-_t,-an]);function zZ(e){var t=NaN,n=NaN,i=NaN,s;return{lineStart:function(){e.lineStart(),s=1},point:function(l,c){var d=l>0?_t:-_t,f=mt(l-t);mt(f-_t)<$e?(e.point(t,n=(n+c)/2>0?an:-an),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(d,n),e.point(l,n),s=0):i!==d&&f>=_t&&(mt(t-i)<$e&&(t-=i*$e),mt(l-d)<$e&&(l-=d*$e),n=jZ(t,n,l,c),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(d,n),s=0),e.point(t=l,n=c),i=d},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-s}}}function jZ(e,t,n,i){var s,l,c=Re(e-n);return mt(c)>$e?eh((Re(t)*(l=ze(i))*Re(n)-Re(i)*(s=ze(t))*Re(e))/(s*l*c)):(t+i)/2}function qZ(e,t,n,i){var s;if(e==null)s=n*an,i.point(-_t,s),i.point(0,s),i.point(_t,s),i.point(_t,0),i.point(_t,-s),i.point(0,-s),i.point(-_t,-s),i.point(-_t,0),i.point(-_t,s);else if(mt(e[0]-t[0])>$e){var l=e[0]<t[0]?_t:-_t;s=n*l/2,i.point(-l,s),i.point(0,s),i.point(l,s)}else i.point(t[0],t[1])}function GZ(e){var t=ze(e),n=6*ut,i=t>0,s=mt(t)>$e;function l(a,m,w,y){PZ(y,e,n,w,a,m)}function c(a,m){return ze(a)*ze(m)>t}function d(a){var m,w,y,o,T;return{lineStart:function(){o=y=!1,T=1},point:function(b,S){var x=[b,S],k,I=c(b,S),B=i?I?0:u(b,S):I?u(b+(b<0?_t:-_t),S):0;if(!m&&(o=y=I)&&a.lineStart(),I!==y&&(k=f(m,x),(!k||ow(m,k)||ow(x,k))&&(x[2]=1)),I!==y)T=0,I?(a.lineStart(),k=f(x,m),a.point(k[0],k[1])):(k=f(m,x),a.point(k[0],k[1],2),a.lineEnd()),m=k;else if(s&&m&&i^I){var O;!(B&w)&&(O=f(x,m,!0))&&(T=0,i?(a.lineStart(),a.point(O[0][0],O[0][1]),a.point(O[1][0],O[1][1]),a.lineEnd()):(a.point(O[1][0],O[1][1]),a.lineEnd(),a.lineStart(),a.point(O[0][0],O[0][1],3)))}I&&(!m||!ow(m,x))&&a.point(x[0],x[1]),m=x,y=I,w=B},lineEnd:function(){y&&a.lineEnd(),m=null},clean:function(){return T|(o&&y)<<1}}}function f(a,m,w){var y=cd(a),o=cd(m),T=[1,0,0],b=bu(y,o),S=gm(b,b),x=b[0],k=S-x*x;if(!k)return!w&&a;var I=t*S/k,B=-t*x/k,O=bu(T,b),A=pm(T,I),R=pm(b,B);wE(A,R);var P=O,D=gm(A,P),U=gm(P,P),Y=D*D-U*(gm(A,A)-1);if(!(Y<0)){var z=ki(Y),W=pm(P,(-D-z)/U);if(wE(W,A),W=hb(W),!w)return W;var H=a[0],V=m[0],J=a[1],G=m[1],oe;V<H&&(oe=H,H=V,V=oe);var he=V-H,ne=mt(he-_t)<$e,Fe=ne||he<$e;if(!ne&&G<J&&(oe=J,J=G,G=oe),Fe?ne?J+G>0^W[1]<(mt(W[0]-H)<$e?J:G):J<=W[1]&&W[1]<=G:he>_t^(H<=W[0]&&W[0]<=V)){var de=pm(P,(-D+z)/U);return wE(de,A),[W,hb(de)]}}}function u(a,m){var w=i?e:_t-e,y=0;return a<-w?y|=1:a>w&&(y|=2),m<-w?y|=4:m>w&&(y|=8),y}return Q$(c,d,l,i?[0,-e]:[-_t,e-_t])}function HZ(e,t,n,i,s,l){var c=e[0],d=e[1],f=t[0],u=t[1],a=0,m=1,w=f-c,y=u-d,o;if(o=n-c,!(!w&&o>0)){if(o/=w,w<0){if(o<a)return;o<m&&(m=o)}else if(w>0){if(o>m)return;o>a&&(a=o)}if(o=s-c,!(!w&&o<0)){if(o/=w,w<0){if(o>m)return;o>a&&(a=o)}else if(w>0){if(o<a)return;o<m&&(m=o)}if(o=i-d,!(!y&&o>0)){if(o/=y,y<0){if(o<a)return;o<m&&(m=o)}else if(y>0){if(o>m)return;o>a&&(a=o)}if(o=l-d,!(!y&&o<0)){if(o/=y,y<0){if(o>m)return;o>a&&(a=o)}else if(y>0){if(o<a)return;o<m&&(m=o)}return a>0&&(e[0]=c+a*w,e[1]=d+a*y),m<1&&(t[0]=c+m*w,t[1]=d+m*y),!0}}}}}var r_=1e9,mm=-r_;function Z$(e,t,n,i){function s(u,a){return e<=u&&u<=n&&t<=a&&a<=i}function l(u,a,m,w){var y=0,o=0;if(u==null||(y=c(u,m))!==(o=c(a,m))||f(u,a)<0^m>0)do w.point(y===0||y===3?e:n,y>1?i:t);while((y=(y+m+4)%4)!==o);else w.point(a[0],a[1])}function c(u,a){return mt(u[0]-e)<$e?a>0?0:3:mt(u[0]-n)<$e?a>0?2:1:mt(u[1]-t)<$e?a>0?1:0:a>0?3:2}function d(u,a){return f(u.x,a.x)}function f(u,a){var m=c(u,1),w=c(a,1);return m!==w?m-w:m===0?a[1]-u[1]:m===1?u[0]-a[0]:m===2?u[1]-a[1]:a[0]-u[0]}return function(u){var a=u,m=K$(),w,y,o,T,b,S,x,k,I,B,O,A={point:R,lineStart:Y,lineEnd:z,polygonStart:D,polygonEnd:U};function R(H,V){s(H,V)&&a.point(H,V)}function P(){for(var H=0,V=0,J=y.length;V<J;++V)for(var G=y[V],oe=1,he=G.length,ne=G[0],Fe,de,ke=ne[0],Ue=ne[1];oe<he;++oe)Fe=ke,de=Ue,ne=G[oe],ke=ne[0],Ue=ne[1],de<=i?Ue>i&&(ke-Fe)*(i-de)>(Ue-de)*(e-Fe)&&++H:Ue<=i&&(ke-Fe)*(i-de)<(Ue-de)*(e-Fe)&&--H;return H}function D(){a=m,w=[],y=[],O=!0}function U(){var H=P(),V=O&&H,J=(w=J6(w)).length;(V||J)&&(u.polygonStart(),V&&(u.lineStart(),l(null,null,1,u),u.lineEnd()),J&&J$(w,d,H,l,u),u.polygonEnd()),a=u,w=y=o=null}function Y(){A.point=W,y&&y.push(o=[]),B=!0,I=!1,x=k=NaN}function z(){w&&(W(T,b),S&&I&&m.rejoin(),w.push(m.result())),A.point=R,I&&a.lineEnd()}function W(H,V){var J=s(H,V);if(y&&o.push([H,V]),B)T=H,b=V,S=J,B=!1,J&&(a.lineStart(),a.point(H,V));else if(J&&I)a.point(H,V);else{var G=[x=Math.max(mm,Math.min(r_,x)),k=Math.max(mm,Math.min(r_,k))],oe=[H=Math.max(mm,Math.min(r_,H)),V=Math.max(mm,Math.min(r_,V))];HZ(G,oe,e,t,n,i)?(I||(a.lineStart(),a.point(G[0],G[1])),a.point(oe[0],oe[1]),J||a.lineEnd(),O=!1):J&&(a.lineStart(),a.point(H,V),O=!1)}x=H,k=V,I=J}return A}}function OC(e,t,n){var i=_s(e,t-$e,n).concat(t);return function(s){return i.map(function(l){return[s,l]})}}function NC(e,t,n){var i=_s(e,t-$e,n).concat(t);return function(s){return i.map(function(l){return[l,s]})}}function WZ(){var e,t,n,i,s,l,c,d,f=10,u=f,a=90,m=360,w,y,o,T,b=2.5;function S(){return{type:"MultiLineString",coordinates:x()}}function x(){return _s(_m(i/a)*a,n,a).map(o).concat(_s(_m(d/m)*m,c,m).map(T)).concat(_s(_m(t/f)*f,e,f).filter(function(k){return mt(k%a)>$e}).map(w)).concat(_s(_m(l/u)*u,s,u).filter(function(k){return mt(k%m)>$e}).map(y))}return S.lines=function(){return x().map(function(k){return{type:"LineString",coordinates:k}})},S.outline=function(){return{type:"Polygon",coordinates:[o(i).concat(T(c).slice(1),o(n).reverse().slice(1),T(d).reverse().slice(1))]}},S.extent=function(k){return arguments.length?S.extentMajor(k).extentMinor(k):S.extentMinor()},S.extentMajor=function(k){return arguments.length?(i=+k[0][0],n=+k[1][0],d=+k[0][1],c=+k[1][1],i>n&&(k=i,i=n,n=k),d>c&&(k=d,d=c,c=k),S.precision(b)):[[i,d],[n,c]]},S.extentMinor=function(k){return arguments.length?(t=+k[0][0],e=+k[1][0],l=+k[0][1],s=+k[1][1],t>e&&(k=t,t=e,e=k),l>s&&(k=l,l=s,s=k),S.precision(b)):[[t,l],[e,s]]},S.step=function(k){return arguments.length?S.stepMajor(k).stepMinor(k):S.stepMinor()},S.stepMajor=function(k){return arguments.length?(a=+k[0],m=+k[1],S):[a,m]},S.stepMinor=function(k){return arguments.length?(f=+k[0],u=+k[1],S):[f,u]},S.precision=function(k){return arguments.length?(b=+k,w=OC(l,s,90),y=NC(t,e,b),o=OC(d,c,90),T=NC(i,n,b),S):b},S.extentMajor([[-180,-90+$e],[180,90-$e]]).extentMinor([[-180,-80-$e],[180,80+$e]])}const lg=e=>e;var TE=new vi,wS=new vi,eU,tU,bS,TS,tl={point:Un,lineStart:Un,lineEnd:Un,polygonStart:function(){tl.lineStart=VZ,tl.lineEnd=XZ},polygonEnd:function(){tl.lineStart=tl.lineEnd=tl.point=Un,TE.add(mt(wS)),wS=new vi},result:function(){var e=TE/2;return TE=new vi,e}};function VZ(){tl.point=YZ}function YZ(e,t){tl.point=nU,eU=bS=e,tU=TS=t}function nU(e,t){wS.add(TS*e-bS*t),bS=e,TS=t}function XZ(){nU(eU,tU)}const CC=tl;var Tu=1/0,Eb=Tu,cg=-Tu,vb=cg,KZ={point:JZ,lineStart:Un,lineEnd:Un,polygonStart:Un,polygonEnd:Un,result:function(){var e=[[Tu,Eb],[cg,vb]];return cg=vb=-(Eb=Tu=1/0),e}};function JZ(e,t){e<Tu&&(Tu=e),e>cg&&(cg=e),t<Eb&&(Eb=t),t>vb&&(vb=t)}const Sb=KZ;var ES=0,vS=0,a_=0,xb=0,kb=0,Nf=0,SS=0,xS=0,o_=0,iU,sU,ea,ta,or={point:dd,lineStart:RC,lineEnd:LC,polygonStart:function(){or.lineStart=eee,or.lineEnd=tee},polygonEnd:function(){or.point=dd,or.lineStart=RC,or.lineEnd=LC},result:function(){var e=o_?[SS/o_,xS/o_]:Nf?[xb/Nf,kb/Nf]:a_?[ES/a_,vS/a_]:[NaN,NaN];return ES=vS=a_=xb=kb=Nf=SS=xS=o_=0,e}};function dd(e,t){ES+=e,vS+=t,++a_}function RC(){or.point=QZ}function QZ(e,t){or.point=ZZ,dd(ea=e,ta=t)}function ZZ(e,t){var n=e-ea,i=t-ta,s=ki(n*n+i*i);xb+=s*(ea+e)/2,kb+=s*(ta+t)/2,Nf+=s,dd(ea=e,ta=t)}function LC(){or.point=dd}function eee(){or.point=nee}function tee(){rU(iU,sU)}function nee(e,t){or.point=rU,dd(iU=ea=e,sU=ta=t)}function rU(e,t){var n=e-ea,i=t-ta,s=ki(n*n+i*i);xb+=s*(ea+e)/2,kb+=s*(ta+t)/2,Nf+=s,s=ta*e-ea*t,SS+=s*(ea+e),xS+=s*(ta+t),o_+=s*3,dd(ea=e,ta=t)}const PC=or;function aU(e){this._context=e}aU.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,xi);break}}},result:Un};var kS=new vi,EE,oU,lU,l_,c_,Bb={point:Un,lineStart:function(){Bb.point=iee},lineEnd:function(){EE&&cU(oU,lU),Bb.point=Un},polygonStart:function(){EE=!0},polygonEnd:function(){EE=null},result:function(){var e=+kS;return kS=new vi,e}};function iee(e,t){Bb.point=cU,oU=l_=e,lU=c_=t}function cU(e,t){l_-=e,c_-=t,kS.add(ki(l_*l_+c_*c_)),l_=e,c_=t}const DC=Bb;let $C,Fb,UC,zC;class jC{constructor(t){this._append=t==null?dU:see(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==UC||this._append!==Fb){const i=this._radius,s=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,UC=i,Fb=this._append,zC=this._,this._=s}this._+=zC;break}}}result(){const t=this._;return this._="",t.length?t:null}}function dU(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function see(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return dU;if(t!==$C){const n=10**t;$C=t,Fb=function(s){let l=1;this._+=s[0];for(const c=s.length;l<c;++l)this._+=Math.round(arguments[l]*n)/n+s[l]}}return Fb}function fU(e,t){let n=3,i=4.5,s,l;function c(d){return d&&(typeof i=="function"&&l.pointRadius(+i.apply(this,arguments)),no(d,s(l))),l.result()}return c.area=function(d){return no(d,s(CC)),CC.result()},c.measure=function(d){return no(d,s(DC)),DC.result()},c.bounds=function(d){return no(d,s(Sb)),Sb.result()},c.centroid=function(d){return no(d,s(PC)),PC.result()},c.projection=function(d){return arguments.length?(s=d==null?(e=null,lg):(e=d).stream,c):e},c.context=function(d){return arguments.length?(l=d==null?(t=null,new jC(n)):new aU(t=d),typeof i!="function"&&l.pointRadius(i),c):t},c.pointRadius=function(d){return arguments.length?(i=typeof d=="function"?d:(l.pointRadius(+d),+d),c):i},c.digits=function(d){if(!arguments.length)return n;if(d==null)n=null;else{const f=Math.floor(d);if(!(f>=0))throw new RangeError(`invalid digits: ${d}`);n=f}return t===null&&(l=new jC(n)),c},c.projection(e).digits(n).context(t)}function Z0(e){return function(t){var n=new BS;for(var i in e)n[i]=e[i];return n.stream=t,n}}function BS(){}BS.prototype={constructor:BS,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function PB(e,t,n){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),i!=null&&e.clipExtent(null),no(n,e.stream(Sb)),t(Sb.result()),i!=null&&e.clipExtent(i),e}function eT(e,t,n){return PB(e,function(i){var s=t[1][0]-t[0][0],l=t[1][1]-t[0][1],c=Math.min(s/(i[1][0]-i[0][0]),l/(i[1][1]-i[0][1])),d=+t[0][0]+(s-c*(i[1][0]+i[0][0]))/2,f=+t[0][1]+(l-c*(i[1][1]+i[0][1]))/2;e.scale(150*c).translate([d,f])},n)}function DB(e,t,n){return eT(e,[[0,0],t],n)}function $B(e,t,n){return PB(e,function(i){var s=+t,l=s/(i[1][0]-i[0][0]),c=(s-l*(i[1][0]+i[0][0]))/2,d=-l*i[0][1];e.scale(150*l).translate([c,d])},n)}function UB(e,t,n){return PB(e,function(i){var s=+t,l=s/(i[1][1]-i[0][1]),c=-l*i[0][0],d=(s-l*(i[1][1]+i[0][1]))/2;e.scale(150*l).translate([c,d])},n)}var qC=16,ree=ze(30*ut);function GC(e,t){return+t?oee(e,t):aee(e)}function aee(e){return Z0({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function oee(e,t){function n(i,s,l,c,d,f,u,a,m,w,y,o,T,b){var S=u-i,x=a-s,k=S*S+x*x;if(k>4*t&&T--){var I=c+w,B=d+y,O=f+o,A=ki(I*I+B*B+O*O),R=Vi(O/=A),P=mt(mt(O)-1)<$e||mt(l-m)<$e?(l+m)/2:$s(B,I),D=e(P,R),U=D[0],Y=D[1],z=U-i,W=Y-s,H=x*z-S*W;(H*H/k>t||mt((S*z+x*W)/k-.5)>.3||c*w+d*y+f*o<ree)&&(n(i,s,l,c,d,f,U,Y,P,I/=A,B/=A,O,T,b),b.point(U,Y),n(U,Y,P,I,B,O,u,a,m,w,y,o,T,b))}}return function(i){var s,l,c,d,f,u,a,m,w,y,o,T,b={point:S,lineStart:x,lineEnd:I,polygonStart:function(){i.polygonStart(),b.lineStart=B},polygonEnd:function(){i.polygonEnd(),b.lineStart=x}};function S(R,P){R=e(R,P),i.point(R[0],R[1])}function x(){m=NaN,b.point=k,i.lineStart()}function k(R,P){var D=cd([R,P]),U=e(R,P);n(m,w,a,y,o,T,m=U[0],w=U[1],a=R,y=D[0],o=D[1],T=D[2],qC,i),i.point(m,w)}function I(){b.point=S,i.lineEnd()}function B(){x(),b.point=O,b.lineEnd=A}function O(R,P){k(s=R,P),l=m,c=w,d=y,f=o,u=T,b.point=k}function A(){n(m,w,a,y,o,T,l,c,s,d,f,u,qC,i),b.lineEnd=I,I()}return b}}var lee=Z0({point:function(e,t){this.stream.point(e*ut,t*ut)}});function cee(e){return Z0({point:function(t,n){var i=e(t,n);return this.stream.point(i[0],i[1])}})}function dee(e,t,n,i,s){function l(c,d){return c*=i,d*=s,[t+e*c,n-e*d]}return l.invert=function(c,d){return[(c-t)/e*i,(n-d)/e*s]},l}function HC(e,t,n,i,s,l){if(!l)return dee(e,t,n,i,s);var c=ze(l),d=Re(l),f=c*e,u=d*e,a=c/e,m=d/e,w=(d*n-c*t)/e,y=(d*t+c*n)/e;function o(T,b){return T*=i,b*=s,[f*T-u*b+t,n-u*T-f*b]}return o.invert=function(T,b){return[i*(a*T-m*b+w),s*(y-m*T-a*b)]},o}function Ma(e){return uU(function(){return e})()}function uU(e){var t,n=150,i=480,s=250,l=0,c=0,d=0,f=0,u=0,a,m=0,w=1,y=1,o=null,T=AC,b=null,S,x,k,I=lg,B=.5,O,A,R,P,D;function U(H){return R(H[0]*ut,H[1]*ut)}function Y(H){return H=R.invert(H[0],H[1]),H&&[H[0]*ln,H[1]*ln]}U.stream=function(H){return P&&D===H?P:P=lee(cee(a)(T(O(I(D=H)))))},U.preclip=function(H){return arguments.length?(T=H,o=void 0,W()):T},U.postclip=function(H){return arguments.length?(I=H,b=S=x=k=null,W()):I},U.clipAngle=function(H){return arguments.length?(T=+H?GZ(o=H*ut):(o=null,AC),W()):o*ln},U.clipExtent=function(H){return arguments.length?(I=H==null?(b=S=x=k=null,lg):Z$(b=+H[0][0],S=+H[0][1],x=+H[1][0],k=+H[1][1]),W()):b==null?null:[[b,S],[x,k]]},U.scale=function(H){return arguments.length?(n=+H,z()):n},U.translate=function(H){return arguments.length?(i=+H[0],s=+H[1],z()):[i,s]},U.center=function(H){return arguments.length?(l=H[0]%360*ut,c=H[1]%360*ut,z()):[l*ln,c*ln]},U.rotate=function(H){return arguments.length?(d=H[0]%360*ut,f=H[1]%360*ut,u=H.length>2?H[2]%360*ut:0,z()):[d*ln,f*ln,u*ln]},U.angle=function(H){return arguments.length?(m=H%360*ut,z()):m*ln},U.reflectX=function(H){return arguments.length?(w=H?-1:1,z()):w<0},U.reflectY=function(H){return arguments.length?(y=H?-1:1,z()):y<0},U.precision=function(H){return arguments.length?(O=GC(A,B=H*H),W()):ki(B)},U.fitExtent=function(H,V){return eT(U,H,V)},U.fitSize=function(H,V){return DB(U,H,V)},U.fitWidth=function(H,V){return $B(U,H,V)},U.fitHeight=function(H,V){return UB(U,H,V)};function z(){var H=HC(n,0,0,w,y,m).apply(null,t(l,c)),V=HC(n,i-H[0],s-H[1],w,y,m);return a=X$(d,f,u),A=yS(t,V),R=yS(a,A),O=GC(A,B),W()}function W(){return P=D=null,U}return function(){return t=e.apply(this,arguments),U.invert=t.invert&&Y,z()}}function zB(e){var t=0,n=_t/3,i=uU(e),s=i(t,n);return s.parallels=function(l){return arguments.length?i(t=l[0]*ut,n=l[1]*ut):[t*ln,n*ln]},s}function fee(e){var t=ze(e);function n(i,s){return[i*t,Re(s)/t]}return n.invert=function(i,s){return[i/t,Vi(s*t)]},n}function uee(e,t){var n=Re(e),i=(n+Re(t))/2;if(mt(i)<$e)return fee(e);var s=1+n*(2*i-n),l=ki(s)/i;function c(d,f){var u=ki(s-2*i*Re(f))/i;return[u*Re(d*=i),l-u*ze(d)]}return c.invert=function(d,f){var u=l-f,a=$s(d,mt(u))*Is(u);return u*i<0&&(a-=_t*Is(d)*Is(u)),[a/i,Vi((s-(d*d+u*u)*i*i)/(2*i))]},c}function Ib(){return zB(uee).scale(155.424).center([0,33.6442])}function hU(){return Ib().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function hee(e){var t=e.length;return{point:function(n,i){for(var s=-1;++s<t;)e[s].point(n,i)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function _ee(){var e,t,n=hU(),i,s=Ib().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l,c=Ib().rotate([157,0]).center([-3,19.9]).parallels([8,18]),d,f,u={point:function(w,y){f=[w,y]}};function a(w){var y=w[0],o=w[1];return f=null,i.point(y,o),f||(l.point(y,o),f)||(d.point(y,o),f)}a.invert=function(w){var y=n.scale(),o=n.translate(),T=(w[0]-o[0])/y,b=(w[1]-o[1])/y;return(b>=.12&&b<.234&&T>=-.425&&T<-.214?s:b>=.166&&b<.234&&T>=-.214&&T<-.115?c:n).invert(w)},a.stream=function(w){return e&&t===w?e:e=hee([n.stream(t=w),s.stream(w),c.stream(w)])},a.precision=function(w){return arguments.length?(n.precision(w),s.precision(w),c.precision(w),m()):n.precision()},a.scale=function(w){return arguments.length?(n.scale(w),s.scale(w*.35),c.scale(w),a.translate(n.translate())):n.scale()},a.translate=function(w){if(!arguments.length)return n.translate();var y=n.scale(),o=+w[0],T=+w[1];return i=n.translate(w).clipExtent([[o-.455*y,T-.238*y],[o+.455*y,T+.238*y]]).stream(u),l=s.translate([o-.307*y,T+.201*y]).clipExtent([[o-.425*y+$e,T+.12*y+$e],[o-.214*y-$e,T+.234*y-$e]]).stream(u),d=c.translate([o-.205*y,T+.212*y]).clipExtent([[o-.214*y+$e,T+.166*y+$e],[o-.115*y-$e,T+.234*y-$e]]).stream(u),m()},a.fitExtent=function(w,y){return eT(a,w,y)},a.fitSize=function(w,y){return DB(a,w,y)},a.fitWidth=function(w,y){return $B(a,w,y)},a.fitHeight=function(w,y){return UB(a,w,y)};function m(){return e=t=null,a}return a.scale(1070)}function _U(e){return function(t,n){var i=ze(t),s=ze(n),l=e(i*s);return l===1/0?[2,0]:[l*s*Re(t),l*Re(n)]}}function sp(e){return function(t,n){var i=ki(t*t+n*n),s=e(i),l=Re(s),c=ze(s);return[$s(t*l,i*c),Vi(i&&n*l/i)]}}var gU=_U(function(e){return ki(2/(1+e))});gU.invert=sp(function(e){return 2*Vi(e/2)});function gee(){return Ma(gU).scale(124.75).clipAngle(180-.001)}var pU=_U(function(e){return(e=D$(e))&&e/Re(e)});pU.invert=sp(function(e){return e});function pee(){return Ma(pU).scale(79.4188).clipAngle(180-.001)}function tT(e,t){return[e,cb(RB((an+t)/2))]}tT.invert=function(e,t){return[e,2*eh(P$(t))-an]};function yee(){return yU(tT).scale(961/xi)}function yU(e){var t=Ma(e),n=t.center,i=t.scale,s=t.translate,l=t.clipExtent,c=null,d,f,u;t.scale=function(m){return arguments.length?(i(m),a()):i()},t.translate=function(m){return arguments.length?(s(m),a()):s()},t.center=function(m){return arguments.length?(n(m),a()):n()},t.clipExtent=function(m){return arguments.length?(m==null?c=d=f=u=null:(c=+m[0][0],d=+m[0][1],f=+m[1][0],u=+m[1][1]),a()):c==null?null:[[c,d],[f,u]]};function a(){var m=_t*i(),w=t(LZ(t.rotate()).invert([0,0]));return l(c==null?[[w[0]-m,w[1]-m],[w[0]+m,w[1]+m]]:e===tT?[[Math.max(w[0]-m,c),d],[Math.min(w[0]+m,f),u]]:[[c,Math.max(w[1]-m,d)],[f,Math.min(w[1]+m,u)]])}return a()}function wm(e){return RB((an+e)/2)}function mee(e,t){var n=ze(e),i=e===t?Re(e):cb(n/ze(t))/cb(wm(t)/wm(e)),s=n*mE(wm(e),i)/i;if(!i)return tT;function l(c,d){s>0?d<-an+$e&&(d=-an+$e):d>an-$e&&(d=an-$e);var f=s/mE(wm(d),i);return[f*Re(i*c),s-f*ze(i*c)]}return l.invert=function(c,d){var f=s-d,u=Is(i)*ki(c*c+f*f),a=$s(c,mt(f))*Is(f);return f*i<0&&(a-=_t*Is(c)*Is(f)),[a/i,2*eh(mE(s/u,1/i))-an]},l}function wee(){return zB(mee).scale(109.5).parallels([30,30])}function Mb(e,t){return[e,t]}Mb.invert=Mb;function bee(){return Ma(Mb).scale(152.63)}function Tee(e,t){var n=ze(e),i=e===t?Re(e):(n-ze(t))/(t-e),s=n/i+e;if(mt(i)<$e)return Mb;function l(c,d){var f=s-d,u=i*c;return[f*Re(u),s-f*ze(u)]}return l.invert=function(c,d){var f=s-d,u=$s(c,mt(f))*Is(f);return f*i<0&&(u-=_t*Is(c)*Is(f)),[u/i,s-Is(i)*ki(c*c+f*f)]},l}function Eee(){return zB(Tee).scale(131.154).center([0,13.9389])}var I_=1.340264,M_=-.081106,A_=893e-6,O_=.003796,Ab=ki(3)/2,vee=12;function mU(e,t){var n=Vi(Ab*Re(t)),i=n*n,s=i*i*i;return[e*ze(n)/(Ab*(I_+3*M_*i+s*(7*A_+9*O_*i))),n*(I_+M_*i+s*(A_+O_*i))]}mU.invert=function(e,t){for(var n=t,i=n*n,s=i*i*i,l=0,c,d,f;l<vee&&(d=n*(I_+M_*i+s*(A_+O_*i))-t,f=I_+3*M_*i+s*(7*A_+9*O_*i),n-=c=d/f,i=n*n,s=i*i*i,!(mt(c)<ob));++l);return[Ab*e*(I_+3*M_*i+s*(7*A_+9*O_*i))/ze(n),Vi(Re(n)/Ab)]};function See(){return Ma(mU).scale(177.158)}function wU(e,t){var n=ze(t),i=ze(e)*n;return[n*Re(e)/i,Re(t)/i]}wU.invert=sp(eh);function xee(){return Ma(wU).scale(144.049).clipAngle(60)}function kee(){var e=1,t=0,n=0,i=1,s=1,l=0,c,d,f=null,u,a,m,w=1,y=1,o=Z0({point:function(I,B){var O=k([I,B]);this.stream.point(O[0],O[1])}}),T=lg,b,S;function x(){return w=e*i,y=e*s,b=S=null,k}function k(I){var B=I[0]*w,O=I[1]*y;if(l){var A=O*c-B*d;B=B*c+O*d,O=A}return[B+t,O+n]}return k.invert=function(I){var B=I[0]-t,O=I[1]-n;if(l){var A=O*c+B*d;B=B*c-O*d,O=A}return[B/w,O/y]},k.stream=function(I){return b&&S===I?b:b=o(T(S=I))},k.postclip=function(I){return arguments.length?(T=I,f=u=a=m=null,x()):T},k.clipExtent=function(I){return arguments.length?(T=I==null?(f=u=a=m=null,lg):Z$(f=+I[0][0],u=+I[0][1],a=+I[1][0],m=+I[1][1]),x()):f==null?null:[[f,u],[a,m]]},k.scale=function(I){return arguments.length?(e=+I,x()):e},k.translate=function(I){return arguments.length?(t=+I[0],n=+I[1],x()):[t,n]},k.angle=function(I){return arguments.length?(l=I%360*ut,d=Re(l),c=ze(l),x()):l*ln},k.reflectX=function(I){return arguments.length?(i=I?-1:1,x()):i<0},k.reflectY=function(I){return arguments.length?(s=I?-1:1,x()):s<0},k.fitExtent=function(I,B){return eT(k,I,B)},k.fitSize=function(I,B){return DB(k,I,B)},k.fitWidth=function(I,B){return $B(k,I,B)},k.fitHeight=function(I,B){return UB(k,I,B)},k}function bU(e,t){var n=t*t,i=n*n;return[e*(.8707-.131979*n+i*(-.013791+i*(.003971*n-.001529*i))),t*(1.007226+n*(.015085+i*(-.044475+.028874*n-.005916*i)))]}bU.invert=function(e,t){var n=t,i=25,s;do{var l=n*n,c=l*l;n-=s=(n*(1.007226+l*(.015085+c*(-.044475+.028874*l-.005916*c)))-t)/(1.007226+l*(.015085*3+c*(-.044475*7+.028874*9*l-.005916*11*c)))}while(mt(s)>$e&&--i>0);return[e/(.8707+(l=n*n)*(-.131979+l*(-.013791+l*l*l*(.003971-.001529*l)))),n]};function Bee(){return Ma(bU).scale(175.295)}function TU(e,t){return[ze(t)*Re(e),Re(t)]}TU.invert=sp(Vi);function Fee(){return Ma(TU).scale(249.5).clipAngle(90+$e)}function EU(e,t){var n=ze(t),i=1+ze(e)*n;return[n*Re(e)/i,Re(t)/i]}EU.invert=sp(function(e){return 2*eh(e)});function Iee(){return Ma(EU).scale(250).clipAngle(142)}function vU(e,t){return[cb(RB((an+t)/2)),-e]}vU.invert=function(e,t){return[-t,2*eh(P$(e))-an]};function Mee(){var e=yU(vU),t=e.center,n=e.rotate;return e.center=function(i){return arguments.length?t([-i[1],i[0]]):(i=t(),[i[1],-i[0]])},e.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}function Aee(e,t){return e.parent===t.parent?1:2}function Oee(e){return e.reduce(Nee,0)/e.length}function Nee(e,t){return e+t.x}function Cee(e){return 1+e.reduce(Ree,0)}function Ree(e,t){return Math.max(e,t.y)}function Lee(e){for(var t;t=e.children;)e=t[0];return e}function Pee(e){for(var t;t=e.children;)e=t[t.length-1];return e}function Dee(){var e=Aee,t=1,n=1,i=!1;function s(l){var c,d=0;l.eachAfter(function(w){var y=w.children;y?(w.x=Oee(y),w.y=Cee(y)):(w.x=c?d+=e(w,c):0,w.y=0,c=w)});var f=Lee(l),u=Pee(l),a=f.x-e(f,u)/2,m=u.x+e(u,f)/2;return l.eachAfter(i?function(w){w.x=(w.x-l.x)*t,w.y=(l.y-w.y)*n}:function(w){w.x=(w.x-a)/(m-a)*t,w.y=(1-(l.y?w.y/l.y:1))*n})}return s.separation=function(l){return arguments.length?(e=l,s):e},s.size=function(l){return arguments.length?(i=!1,t=+l[0],n=+l[1],s):i?null:[t,n]},s.nodeSize=function(l){return arguments.length?(i=!0,t=+l[0],n=+l[1],s):i?[t,n]:null},s}function $ee(e){var t=0,n=e.children,i=n&&n.length;if(!i)t=1;else for(;--i>=0;)t+=n[i].value;e.value=t}function Uee(){return this.eachAfter($ee)}function zee(e,t){let n=-1;for(const i of this)e.call(t,i,++n,this);return this}function jee(e,t){for(var n=this,i=[n],s,l,c=-1;n=i.pop();)if(e.call(t,n,++c,this),s=n.children)for(l=s.length-1;l>=0;--l)i.push(s[l]);return this}function qee(e,t){for(var n=this,i=[n],s=[],l,c,d,f=-1;n=i.pop();)if(s.push(n),l=n.children)for(c=0,d=l.length;c<d;++c)i.push(l[c]);for(;n=s.pop();)e.call(t,n,++f,this);return this}function Gee(e,t){let n=-1;for(const i of this)if(e.call(t,i,++n,this))return i}function Hee(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,i=t.children,s=i&&i.length;--s>=0;)n+=i[s].value;t.value=n})}function Wee(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Vee(e){for(var t=this,n=Yee(t,e),i=[t];t!==n;)t=t.parent,i.push(t);for(var s=i.length;e!==n;)i.splice(s,0,e),e=e.parent;return i}function Yee(e,t){if(e===t)return e;var n=e.ancestors(),i=t.ancestors(),s=null;for(e=n.pop(),t=i.pop();e===t;)s=e,e=n.pop(),t=i.pop();return s}function Xee(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Kee(){return Array.from(this)}function Jee(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Qee(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Zee(){var e=this,t,n=[e],i,s,l;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,i=e.children)for(s=0,l=i.length;s<l;++s)n.push(i[s]);while(n.length)}function jB(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=nte)):t===void 0&&(t=tte);for(var n=new Eu(e),i,s=[n],l,c,d,f;i=s.pop();)if((c=t(i.data))&&(f=(c=Array.from(c)).length))for(i.children=c,d=f-1;d>=0;--d)s.push(l=c[d]=new Eu(c[d])),l.parent=i,l.depth=i.depth+1;return n.eachBefore(SU)}function ete(){return jB(this).eachBefore(ite)}function tte(e){return e.children}function nte(e){return Array.isArray(e)?e[1]:null}function ite(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function SU(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Eu(e){this.data=e,this.depth=this.height=0,this.parent=null}Eu.prototype=jB.prototype={constructor:Eu,count:Uee,each:zee,eachAfter:qee,eachBefore:jee,find:Gee,sum:Hee,sort:Wee,path:Vee,ancestors:Xee,descendants:Kee,leaves:Jee,links:Qee,copy:ete,[Symbol.iterator]:Zee};function lw(e){return e==null?null:xU(e)}function xU(e){if(typeof e!="function")throw new Error;return e}function kc(){return 0}function If(e){return function(){return e}}const ste=1664525,rte=1013904223,WC=4294967296;function ate(){let e=1;return()=>(e=(ste*e+rte)%WC)/WC}function ote(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function lte(e,t){let n=e.length,i,s;for(;n;)s=t()*n--|0,i=e[n],e[n]=e[s],e[s]=i;return e}function cte(e,t){for(var n=0,i=(e=lte(Array.from(e),t)).length,s=[],l,c;n<i;)l=e[n],c&&kU(c,l)?++n:(c=fte(s=dte(s,l)),n=0);return c}function dte(e,t){var n,i;if(vE(t,e))return[t];for(n=0;n<e.length;++n)if(bm(t,e[n])&&vE(d_(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(i=n+1;i<e.length;++i)if(bm(d_(e[n],e[i]),t)&&bm(d_(e[n],t),e[i])&&bm(d_(e[i],t),e[n])&&vE(BU(e[n],e[i],t),e))return[e[n],e[i],t];throw new Error}function bm(e,t){var n=e.r-t.r,i=t.x-e.x,s=t.y-e.y;return n<0||n*n<i*i+s*s}function kU(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,i=t.x-e.x,s=t.y-e.y;return n>0&&n*n>i*i+s*s}function vE(e,t){for(var n=0;n<t.length;++n)if(!kU(e,t[n]))return!1;return!0}function fte(e){switch(e.length){case 1:return ute(e[0]);case 2:return d_(e[0],e[1]);case 3:return BU(e[0],e[1],e[2])}}function ute(e){return{x:e.x,y:e.y,r:e.r}}function d_(e,t){var n=e.x,i=e.y,s=e.r,l=t.x,c=t.y,d=t.r,f=l-n,u=c-i,a=d-s,m=Math.sqrt(f*f+u*u);return{x:(n+l+f/m*a)/2,y:(i+c+u/m*a)/2,r:(m+s+d)/2}}function BU(e,t,n){var i=e.x,s=e.y,l=e.r,c=t.x,d=t.y,f=t.r,u=n.x,a=n.y,m=n.r,w=i-c,y=i-u,o=s-d,T=s-a,b=f-l,S=m-l,x=i*i+s*s-l*l,k=x-c*c-d*d+f*f,I=x-u*u-a*a+m*m,B=y*o-w*T,O=(o*I-T*k)/(B*2)-i,A=(T*b-o*S)/B,R=(y*k-w*I)/(B*2)-s,P=(w*S-y*b)/B,D=A*A+P*P-1,U=2*(l+O*A+R*P),Y=O*O+R*R-l*l,z=-(Math.abs(D)>1e-6?(U+Math.sqrt(U*U-4*D*Y))/(2*D):Y/U);return{x:i+O+A*z,y:s+R+P*z,r:z}}function VC(e,t,n){var i=e.x-t.x,s,l,c=e.y-t.y,d,f,u=i*i+c*c;u?(l=t.r+n.r,l*=l,f=e.r+n.r,f*=f,l>f?(s=(u+f-l)/(2*u),d=Math.sqrt(Math.max(0,f/u-s*s)),n.x=e.x-s*i-d*c,n.y=e.y-s*c+d*i):(s=(u+l-f)/(2*u),d=Math.sqrt(Math.max(0,l/u-s*s)),n.x=t.x+s*i-d*c,n.y=t.y+s*c+d*i)):(n.x=t.x+n.r,n.y=t.y)}function YC(e,t){var n=e.r+t.r-1e-6,i=t.x-e.x,s=t.y-e.y;return n>0&&n*n>i*i+s*s}function XC(e){var t=e._,n=e.next._,i=t.r+n.r,s=(t.x*n.r+n.x*t.r)/i,l=(t.y*n.r+n.y*t.r)/i;return s*s+l*l}function Tm(e){this._=e,this.next=null,this.previous=null}function hte(e,t){if(!(l=(e=ote(e)).length))return 0;var n,i,s,l,c,d,f,u,a,m,w;if(n=e[0],n.x=0,n.y=0,!(l>1))return n.r;if(i=e[1],n.x=-i.r,i.x=n.r,i.y=0,!(l>2))return n.r+i.r;VC(i,n,s=e[2]),n=new Tm(n),i=new Tm(i),s=new Tm(s),n.next=s.previous=i,i.next=n.previous=s,s.next=i.previous=n;e:for(f=3;f<l;++f){VC(n._,i._,s=e[f]),s=new Tm(s),u=i.next,a=n.previous,m=i._.r,w=n._.r;do if(m<=w){if(YC(u._,s._)){i=u,n.next=i,i.previous=n,--f;continue e}m+=u._.r,u=u.next}else{if(YC(a._,s._)){n=a,n.next=i,i.previous=n,--f;continue e}w+=a._.r,a=a.previous}while(u!==a.next);for(s.previous=n,s.next=i,n.next=i.previous=i=s,c=XC(n);(s=s.next)!==i;)(d=XC(s))<c&&(n=s,c=d);i=n.next}for(n=[i._],s=i;(s=s.next)!==i;)n.push(s._);for(s=cte(n,t),f=0;f<l;++f)n=e[f],n.x-=s.x,n.y-=s.y;return s.r}function _te(e){return Math.sqrt(e.value)}function gte(){var e=null,t=1,n=1,i=kc;function s(l){const c=ate();return l.x=t/2,l.y=n/2,e?l.eachBefore(KC(e)).eachAfter(SE(i,.5,c)).eachBefore(JC(1)):l.eachBefore(KC(_te)).eachAfter(SE(kc,1,c)).eachAfter(SE(i,l.r/Math.min(t,n),c)).eachBefore(JC(Math.min(t,n)/(2*l.r))),l}return s.radius=function(l){return arguments.length?(e=lw(l),s):e},s.size=function(l){return arguments.length?(t=+l[0],n=+l[1],s):[t,n]},s.padding=function(l){return arguments.length?(i=typeof l=="function"?l:If(+l),s):i},s}function KC(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function SE(e,t,n){return function(i){if(s=i.children){var s,l,c=s.length,d=e(i)*t||0,f;if(d)for(l=0;l<c;++l)s[l].r+=d;if(f=hte(s,n),d)for(l=0;l<c;++l)s[l].r-=d;i.r=f+d}}}function JC(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function FU(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function rp(e,t,n,i,s){for(var l=e.children,c,d=-1,f=l.length,u=e.value&&(i-t)/e.value;++d<f;)c=l[d],c.y0=n,c.y1=s,c.x0=t,c.x1=t+=c.value*u}function pte(){var e=1,t=1,n=0,i=!1;function s(c){var d=c.height+1;return c.x0=c.y0=n,c.x1=e,c.y1=t/d,c.eachBefore(l(t,d)),i&&c.eachBefore(FU),c}function l(c,d){return function(f){f.children&&rp(f,f.x0,c*(f.depth+1)/d,f.x1,c*(f.depth+2)/d);var u=f.x0,a=f.y0,m=f.x1-n,w=f.y1-n;m<u&&(u=m=(u+m)/2),w<a&&(a=w=(a+w)/2),f.x0=u,f.y0=a,f.x1=m,f.y1=w}}return s.round=function(c){return arguments.length?(i=!!c,s):i},s.size=function(c){return arguments.length?(e=+c[0],t=+c[1],s):[e,t]},s.padding=function(c){return arguments.length?(n=+c,s):n},s}var yte={depth:-1},QC={},xE={};function mte(e){return e.id}function wte(e){return e.parentId}function ZC(){var e=mte,t=wte,n;function i(s){var l=Array.from(s),c=e,d=t,f,u,a,m,w,y,o,T,b=new Map;if(n!=null){const S=l.map((I,B)=>bte(n(I,B,s))),x=S.map(e3),k=new Set(S).add("");for(const I of x)k.has(I)||(k.add(I),S.push(I),x.push(e3(I)),l.push(xE));c=(I,B)=>S[B],d=(I,B)=>x[B]}for(a=0,f=l.length;a<f;++a)u=l[a],y=l[a]=new Eu(u),(o=c(u,a,s))!=null&&(o+="")&&(T=y.id=o,b.set(T,b.has(T)?QC:y)),(o=d(u,a,s))!=null&&(o+="")&&(y.parent=o);for(a=0;a<f;++a)if(y=l[a],o=y.parent){if(w=b.get(o),!w)throw new Error("missing: "+o);if(w===QC)throw new Error("ambiguous: "+o);w.children?w.children.push(y):w.children=[y],y.parent=w}else{if(m)throw new Error("multiple roots");m=y}if(!m)throw new Error("no root");if(n!=null){for(;m.data===xE&&m.children.length===1;)m=m.children[0],--f;for(let S=l.length-1;S>=0&&(y=l[S],y.data===xE);--S)y.data=null}if(m.parent=yte,m.eachBefore(function(S){S.depth=S.parent.depth+1,--f}).eachBefore(SU),m.parent=null,f>0)throw new Error("cycle");return m}return i.id=function(s){return arguments.length?(e=lw(s),i):e},i.parentId=function(s){return arguments.length?(t=lw(s),i):t},i.path=function(s){return arguments.length?(n=lw(s),i):n},i}function bte(e){e=`${e}`;let t=e.length;return FS(e,t-1)&&!FS(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function e3(e){let t=e.length;if(t<2)return"";for(;--t>1&&!FS(e,t););return e.slice(0,t)}function FS(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function Tte(e,t){return e.parent===t.parent?1:2}function kE(e){var t=e.children;return t?t[0]:e.t}function BE(e){var t=e.children;return t?t[t.length-1]:e.t}function Ete(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function vte(e){for(var t=0,n=0,i=e.children,s=i.length,l;--s>=0;)l=i[s],l.z+=t,l.m+=t,t+=l.s+(n+=l.c)}function Ste(e,t,n){return e.a.parent===t.parent?e.a:n}function cw(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}cw.prototype=Object.create(Eu.prototype);function xte(e){for(var t=new cw(e,0),n,i=[t],s,l,c,d;n=i.pop();)if(l=n._.children)for(n.children=new Array(d=l.length),c=d-1;c>=0;--c)i.push(s=n.children[c]=new cw(l[c],c)),s.parent=n;return(t.parent=new cw(null,0)).children=[t],t}function kte(){var e=Tte,t=1,n=1,i=null;function s(u){var a=xte(u);if(a.eachAfter(l),a.parent.m=-a.z,a.eachBefore(c),i)u.eachBefore(f);else{var m=u,w=u,y=u;u.eachBefore(function(x){x.x<m.x&&(m=x),x.x>w.x&&(w=x),x.depth>y.depth&&(y=x)});var o=m===w?1:e(m,w)/2,T=o-m.x,b=t/(w.x+o+T),S=n/(y.depth||1);u.eachBefore(function(x){x.x=(x.x+T)*b,x.y=x.depth*S})}return u}function l(u){var a=u.children,m=u.parent.children,w=u.i?m[u.i-1]:null;if(a){vte(u);var y=(a[0].z+a[a.length-1].z)/2;w?(u.z=w.z+e(u._,w._),u.m=u.z-y):u.z=y}else w&&(u.z=w.z+e(u._,w._));u.parent.A=d(u,w,u.parent.A||m[0])}function c(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function d(u,a,m){if(a){for(var w=u,y=u,o=a,T=w.parent.children[0],b=w.m,S=y.m,x=o.m,k=T.m,I;o=BE(o),w=kE(w),o&&w;)T=kE(T),y=BE(y),y.a=u,I=o.z+x-w.z-b+e(o._,w._),I>0&&(Ete(Ste(o,u,m),u,I),b+=I,S+=I),x+=o.m,b+=w.m,k+=T.m,S+=y.m;o&&!BE(y)&&(y.t=o,y.m+=x-S),w&&!kE(T)&&(T.t=w,T.m+=b-k,m=u)}return m}function f(u){u.x*=t,u.y=u.depth*n}return s.separation=function(u){return arguments.length?(e=u,s):e},s.size=function(u){return arguments.length?(i=!1,t=+u[0],n=+u[1],s):i?null:[t,n]},s.nodeSize=function(u){return arguments.length?(i=!0,t=+u[0],n=+u[1],s):i?[t,n]:null},s}function nT(e,t,n,i,s){for(var l=e.children,c,d=-1,f=l.length,u=e.value&&(s-n)/e.value;++d<f;)c=l[d],c.x0=t,c.x1=i,c.y0=n,c.y1=n+=c.value*u}var IU=(1+Math.sqrt(5))/2;function MU(e,t,n,i,s,l){for(var c=[],d=t.children,f,u,a=0,m=0,w=d.length,y,o,T=t.value,b,S,x,k,I,B,O;a<w;){y=s-n,o=l-i;do b=d[m++].value;while(!b&&m<w);for(S=x=b,B=Math.max(o/y,y/o)/(T*e),O=b*b*B,I=Math.max(x/O,O/S);m<w;++m){if(b+=u=d[m].value,u<S&&(S=u),u>x&&(x=u),O=b*b*B,k=Math.max(x/O,O/S),k>I){b-=u;break}I=k}c.push(f={value:b,dice:y<o,children:d.slice(a,m)}),f.dice?rp(f,n,i,s,T?i+=o*b/T:l):nT(f,n,i,T?n+=y*b/T:s,l),T-=b,a=m}return c}const AU=function e(t){function n(i,s,l,c,d){MU(t,i,s,l,c,d)}return n.ratio=function(i){return e((i=+i)>1?i:1)},n}(IU);function Bte(){var e=AU,t=!1,n=1,i=1,s=[0],l=kc,c=kc,d=kc,f=kc,u=kc;function a(w){return w.x0=w.y0=0,w.x1=n,w.y1=i,w.eachBefore(m),s=[0],t&&w.eachBefore(FU),w}function m(w){var y=s[w.depth],o=w.x0+y,T=w.y0+y,b=w.x1-y,S=w.y1-y;b<o&&(o=b=(o+b)/2),S<T&&(T=S=(T+S)/2),w.x0=o,w.y0=T,w.x1=b,w.y1=S,w.children&&(y=s[w.depth+1]=l(w)/2,o+=u(w)-y,T+=c(w)-y,b-=d(w)-y,S-=f(w)-y,b<o&&(o=b=(o+b)/2),S<T&&(T=S=(T+S)/2),e(w,o,T,b,S))}return a.round=function(w){return arguments.length?(t=!!w,a):t},a.size=function(w){return arguments.length?(n=+w[0],i=+w[1],a):[n,i]},a.tile=function(w){return arguments.length?(e=xU(w),a):e},a.padding=function(w){return arguments.length?a.paddingInner(w).paddingOuter(w):a.paddingInner()},a.paddingInner=function(w){return arguments.length?(l=typeof w=="function"?w:If(+w),a):l},a.paddingOuter=function(w){return arguments.length?a.paddingTop(w).paddingRight(w).paddingBottom(w).paddingLeft(w):a.paddingTop()},a.paddingTop=function(w){return arguments.length?(c=typeof w=="function"?w:If(+w),a):c},a.paddingRight=function(w){return arguments.length?(d=typeof w=="function"?w:If(+w),a):d},a.paddingBottom=function(w){return arguments.length?(f=typeof w=="function"?w:If(+w),a):f},a.paddingLeft=function(w){return arguments.length?(u=typeof w=="function"?w:If(+w),a):u},a}function Fte(e,t,n,i,s){var l=e.children,c,d=l.length,f,u=new Array(d+1);for(u[0]=f=c=0;c<d;++c)u[c+1]=f+=l[c].value;a(0,d,e.value,t,n,i,s);function a(m,w,y,o,T,b,S){if(m>=w-1){var x=l[m];x.x0=o,x.y0=T,x.x1=b,x.y1=S;return}for(var k=u[m],I=y/2+k,B=m+1,O=w-1;B<O;){var A=B+O>>>1;u[A]<I?B=A+1:O=A}I-u[B-1]<u[B]-I&&m+1<B&&--B;var R=u[B]-k,P=y-R;if(b-o>S-T){var D=y?(o*P+b*R)/y:b;a(m,B,R,o,T,D,S),a(B,w,P,D,T,b,S)}else{var U=y?(T*P+S*R)/y:S;a(m,B,R,o,T,b,U),a(B,w,P,o,U,b,S)}}}function Ite(e,t,n,i,s){(e.depth&1?nT:rp)(e,t,n,i,s)}const Mte=function e(t){function n(i,s,l,c,d){if((f=i._squarify)&&f.ratio===t)for(var f,u,a,m,w=-1,y,o=f.length,T=i.value;++w<o;){for(u=f[w],a=u.children,m=u.value=0,y=a.length;m<y;++m)u.value+=a[m].value;u.dice?rp(u,s,l,c,T?l+=(d-l)*u.value/T:d):nT(u,s,l,T?s+=(c-s)*u.value/T:c,d),T-=u.value}else i._squarify=f=MU(t,i,s,l,c,d),f.ratio=t}return n.ratio=function(i){return e((i=+i)>1?i:1)},n}(IU);function Aa(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Vl(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const IS=Symbol("implicit");function qB(){var e=new zN,t=[],n=[],i=IS;function s(l){let c=e.get(l);if(c===void 0){if(i!==IS)return i;e.set(l,c=t.push(l)-1)}return n[c%n.length]}return s.domain=function(l){if(!arguments.length)return t.slice();t=[],e=new zN;for(const c of l)e.has(c)||e.set(c,t.push(c)-1);return s},s.range=function(l){return arguments.length?(n=Array.from(l),s):n.slice()},s.unknown=function(l){return arguments.length?(i=l,s):i},s.copy=function(){return qB(t,n).unknown(i)},Aa.apply(s,arguments),s}function Ate(e){return function(){return e}}function MS(e){return+e}var t3=[0,1];function $i(e){return e}function AS(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Ate(isNaN(t)?NaN:.5)}function Ote(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function Nte(e,t,n){var i=e[0],s=e[1],l=t[0],c=t[1];return s<i?(i=AS(s,i),l=n(c,l)):(i=AS(i,s),l=n(l,c)),function(d){return l(i(d))}}function Cte(e,t,n){var i=Math.min(e.length,t.length)-1,s=new Array(i),l=new Array(i),c=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++c<i;)s[c]=AS(e[c],e[c+1]),l[c]=n(t[c],t[c+1]);return function(d){var f=Zg(e,d,1,i)-1;return l[f](s[f](d))}}function ap(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function iT(){var e=t3,t=t3,n=Wl,i,s,l,c=$i,d,f,u;function a(){var w=Math.min(e.length,t.length);return c!==$i&&(c=Ote(e[0],e[w-1])),d=w>2?Cte:Nte,f=u=null,m}function m(w){return w==null||isNaN(w=+w)?l:(f||(f=d(e.map(i),t,n)))(i(c(w)))}return m.invert=function(w){return c(s((u||(u=d(t,e.map(i),ir)))(w)))},m.domain=function(w){return arguments.length?(e=Array.from(w,MS),a()):e.slice()},m.range=function(w){return arguments.length?(t=Array.from(w),a()):t.slice()},m.rangeRound=function(w){return t=Array.from(w),n=tp,a()},m.clamp=function(w){return arguments.length?(c=w?!0:$i,a()):c!==$i},m.interpolate=function(w){return arguments.length?(n=w,a()):n},m.unknown=function(w){return arguments.length?(l=w,m):l},function(w,y){return i=w,s=y,a()}}function OU(){return iT()($i,$i)}function NU(e,t,n,i){var s=Sl(e,t,n),l;switch(i=ld(i??",f"),i.type){case"s":{var c=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(l=R$(s,c))&&(i.precision=l),CB(i,c)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(l=L$(s,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=l-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(l=C$(s))&&(i.precision=l-(i.type==="%")*2);break}}return Q0(i)}function Ud(e){var t=e.domain;return e.ticks=function(n){var i=t();return Kv(i[0],i[i.length-1],n??10)},e.tickFormat=function(n,i){var s=t();return NU(s[0],s[s.length-1],n??10,i)},e.nice=function(n){n==null&&(n=10);var i=t(),s=0,l=i.length-1,c=i[s],d=i[l],f,u,a=10;for(d<c&&(u=c,c=d,d=u,u=s,s=l,l=u);a-- >0;){if(u=Jv(c,d,n),u===f)return i[s]=c,i[l]=d,t(i);if(u>0)c=Math.floor(c/u)*u,d=Math.ceil(d/u)*u;else if(u<0)c=Math.ceil(c*u)/u,d=Math.floor(d*u)/u;else break;f=u}return e},e}function GB(){var e=OU();return e.copy=function(){return ap(e,GB())},Aa.apply(e,arguments),Ud(e)}function CU(e){var t;function n(i){return i==null||isNaN(i=+i)?t:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(e=Array.from(i,MS),n):e.slice()},n.unknown=function(i){return arguments.length?(t=i,n):t},n.copy=function(){return CU(e).unknown(t)},e=arguments.length?Array.from(e,MS):[0,1],Ud(n)}function RU(e,t){e=e.slice();var n=0,i=e.length-1,s=e[n],l=e[i],c;return l<s&&(c=n,n=i,i=c,c=s,s=l,l=c),e[n]=t.floor(s),e[i]=t.ceil(l),e}function n3(e){return Math.log(e)}function i3(e){return Math.exp(e)}function Rte(e){return-Math.log(-e)}function Lte(e){return-Math.exp(-e)}function Pte(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Dte(e){return e===10?Pte:e===Math.E?Math.exp:t=>Math.pow(e,t)}function $te(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function s3(e){return(t,n)=>-e(-t,n)}function HB(e){const t=e(n3,i3),n=t.domain;let i=10,s,l;function c(){return s=$te(i),l=Dte(i),n()[0]<0?(s=s3(s),l=s3(l),e(Rte,Lte)):e(n3,i3),t}return t.base=function(d){return arguments.length?(i=+d,c()):i},t.domain=function(d){return arguments.length?(n(d),c()):n()},t.ticks=d=>{const f=n();let u=f[0],a=f[f.length-1];const m=a<u;m&&([u,a]=[a,u]);let w=s(u),y=s(a),o,T;const b=d==null?10:+d;let S=[];if(!(i%1)&&y-w<b){if(w=Math.floor(w),y=Math.ceil(y),u>0){for(;w<=y;++w)for(o=1;o<i;++o)if(T=w<0?o/l(-w):o*l(w),!(T<u)){if(T>a)break;S.push(T)}}else for(;w<=y;++w)for(o=i-1;o>=1;--o)if(T=w>0?o/l(-w):o*l(w),!(T<u)){if(T>a)break;S.push(T)}S.length*2<b&&(S=Kv(u,a,b))}else S=Kv(w,y,Math.min(y-w,b)).map(l);return m?S.reverse():S},t.tickFormat=(d,f)=>{if(d==null&&(d=10),f==null&&(f=i===10?"s":","),typeof f!="function"&&(!(i%1)&&(f=ld(f)).precision==null&&(f.trim=!0),f=Q0(f)),d===1/0)return f;const u=Math.max(1,i*d/t.ticks().length);return a=>{let m=a/l(Math.round(s(a)));return m*i<i-.5&&(m*=i),m<=u?f(a):""}},t.nice=()=>n(RU(n(),{floor:d=>l(Math.floor(s(d))),ceil:d=>l(Math.ceil(s(d)))})),t}function LU(){const e=HB(iT()).domain([1,10]);return e.copy=()=>ap(e,LU()).base(e.base()),Aa.apply(e,arguments),e}function r3(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function a3(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function WB(e){var t=1,n=e(r3(t),a3(t));return n.constant=function(i){return arguments.length?e(r3(t=+i),a3(t)):t},Ud(n)}function PU(){var e=WB(iT());return e.copy=function(){return ap(e,PU()).constant(e.constant())},Aa.apply(e,arguments)}function o3(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Ute(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function zte(e){return e<0?-e*e:e*e}function VB(e){var t=e($i,$i),n=1;function i(){return n===1?e($i,$i):n===.5?e(Ute,zte):e(o3(n),o3(1/n))}return t.exponent=function(s){return arguments.length?(n=+s,i()):n},Ud(t)}function YB(){var e=VB(iT());return e.copy=function(){return ap(e,YB()).exponent(e.exponent())},Aa.apply(e,arguments),e}function jte(){return YB.apply(null,arguments).exponent(.5)}function DU(){var e=[],t=[],n=[],i;function s(){var c=0,d=Math.max(1,t.length);for(n=new Array(d-1);++c<d;)n[c-1]=X6(e,c/d);return l}function l(c){return c==null||isNaN(c=+c)?i:t[Zg(n,c)]}return l.invertExtent=function(c){var d=t.indexOf(c);return d<0?[NaN,NaN]:[d>0?n[d-1]:e[0],d<n.length?n[d]:e[e.length-1]]},l.domain=function(c){if(!arguments.length)return e.slice();e=[];for(let d of c)d!=null&&!isNaN(d=+d)&&e.push(d);return e.sort(co),s()},l.range=function(c){return arguments.length?(t=Array.from(c),s()):t.slice()},l.unknown=function(c){return arguments.length?(i=c,l):i},l.quantiles=function(){return n.slice()},l.copy=function(){return DU().domain(e).range(t).unknown(i)},Aa.apply(l,arguments)}function $U(){var e=0,t=1,n=1,i=[.5],s=[0,1],l;function c(f){return f!=null&&f<=f?s[Zg(i,f,0,n)]:l}function d(){var f=-1;for(i=new Array(n);++f<n;)i[f]=((f+1)*t-(f-n)*e)/(n+1);return c}return c.domain=function(f){return arguments.length?([e,t]=f,e=+e,t=+t,d()):[e,t]},c.range=function(f){return arguments.length?(n=(s=Array.from(f)).length-1,d()):s.slice()},c.invertExtent=function(f){var u=s.indexOf(f);return u<0?[NaN,NaN]:u<1?[e,i[0]]:u>=n?[i[n-1],t]:[i[u-1],i[u]]},c.unknown=function(f){return arguments.length&&(l=f),c},c.thresholds=function(){return i.slice()},c.copy=function(){return $U().domain([e,t]).range(s).unknown(l)},Aa.apply(Ud(c),arguments)}function UU(){var e=[.5],t=[0,1],n,i=1;function s(l){return l!=null&&l<=l?t[Zg(e,l,0,i)]:n}return s.domain=function(l){return arguments.length?(e=Array.from(l),i=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(l){return arguments.length?(t=Array.from(l),i=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(l){var c=t.indexOf(l);return[e[c-1],e[c]]},s.unknown=function(l){return arguments.length?(n=l,s):n},s.copy=function(){return UU().domain(e).range(t).unknown(n)},Aa.apply(s,arguments)}const FE=new Date,IE=new Date;function En(e,t,n,i){function s(l){return e(l=arguments.length===0?new Date:new Date(+l)),l}return s.floor=l=>(e(l=new Date(+l)),l),s.ceil=l=>(e(l=new Date(l-1)),t(l,1),e(l),l),s.round=l=>{const c=s(l),d=s.ceil(l);return l-c<d-l?c:d},s.offset=(l,c)=>(t(l=new Date(+l),c==null?1:Math.floor(c)),l),s.range=(l,c,d)=>{const f=[];if(l=s.ceil(l),d=d==null?1:Math.floor(d),!(l<c)||!(d>0))return f;let u;do f.push(u=new Date(+l)),t(l,d),e(l);while(u<l&&l<c);return f},s.filter=l=>En(c=>{if(c>=c)for(;e(c),!l(c);)c.setTime(c-1)},(c,d)=>{if(c>=c)if(d<0)for(;++d<=0;)for(;t(c,-1),!l(c););else for(;--d>=0;)for(;t(c,1),!l(c););}),n&&(s.count=(l,c)=>(FE.setTime(+l),IE.setTime(+c),e(FE),e(IE),Math.floor(n(FE,IE))),s.every=l=>(l=Math.floor(l),!isFinite(l)||!(l>0)?null:l>1?s.filter(i?c=>i(c)%l===0:c=>s.count(0,c)%l===0):s)),s}const vu=En(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);vu.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?En(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):vu);vu.range;const so=1e3,Ms=so*60,ro=Ms*60,Eo=ro*24,XB=Eo*7,l3=Eo*30,ME=Eo*365,ao=En(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*so)},(e,t)=>(t-e)/so,e=>e.getUTCSeconds());ao.range;const sT=En(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*so)},(e,t)=>{e.setTime(+e+t*Ms)},(e,t)=>(t-e)/Ms,e=>e.getMinutes());sT.range;const rT=En(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ms)},(e,t)=>(t-e)/Ms,e=>e.getUTCMinutes());rT.range;const aT=En(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*so-e.getMinutes()*Ms)},(e,t)=>{e.setTime(+e+t*ro)},(e,t)=>(t-e)/ro,e=>e.getHours());aT.range;const oT=En(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ro)},(e,t)=>(t-e)/ro,e=>e.getUTCHours());oT.range;const uo=En(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ms)/Eo,e=>e.getDate()-1);uo.range;const hl=En(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Eo,e=>e.getUTCDate()-1);hl.range;const zU=En(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Eo,e=>Math.floor(e/Eo));zU.range;function zd(e){return En(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Ms)/XB)}const th=zd(0),Ob=zd(1),qte=zd(2),Gte=zd(3),Su=zd(4),Hte=zd(5),Wte=zd(6);th.range;Ob.range;qte.range;Gte.range;Su.range;Hte.range;Wte.range;function jd(e){return En(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/XB)}const nh=jd(0),Nb=jd(1),Vte=jd(2),Yte=jd(3),xu=jd(4),Xte=jd(5),Kte=jd(6);nh.range;Nb.range;Vte.range;Yte.range;xu.range;Xte.range;Kte.range;const dg=En(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());dg.range;const fg=En(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());fg.range;const ba=En(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ba.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:En(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});ba.range;const Ta=En(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ta.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:En(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Ta.range;function jU(e,t,n,i,s,l){const c=[[ao,1,so],[ao,5,5*so],[ao,15,15*so],[ao,30,30*so],[l,1,Ms],[l,5,5*Ms],[l,15,15*Ms],[l,30,30*Ms],[s,1,ro],[s,3,3*ro],[s,6,6*ro],[s,12,12*ro],[i,1,Eo],[i,2,2*Eo],[n,1,XB],[t,1,l3],[t,3,3*l3],[e,1,ME]];function d(u,a,m){const w=a<u;w&&([u,a]=[a,u]);const y=m&&typeof m.range=="function"?m:f(u,a,m),o=y?y.range(u,+a+1):[];return w?o.reverse():o}function f(u,a,m){const w=Math.abs(a-u)/m,y=Qg(([,,b])=>b).right(c,w);if(y===c.length)return e.every(Sl(u/ME,a/ME,m));if(y===0)return vu.every(Math.max(Sl(u,a,m),1));const[o,T]=c[w/c[y-1][2]<c[y][2]/w?y-1:y];return o.every(T)}return[d,f]}const[Jte,Qte]=jU(Ta,fg,nh,zU,oT,rT),[Zte,ene]=jU(ba,dg,th,uo,aT,sT);function AE(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function OE(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Mh(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function qU(e){var t=e.dateTime,n=e.date,i=e.time,s=e.periods,l=e.days,c=e.shortDays,d=e.months,f=e.shortMonths,u=Ah(s),a=Oh(s),m=Ah(l),w=Oh(l),y=Ah(c),o=Oh(c),T=Ah(d),b=Oh(d),S=Ah(f),x=Oh(f),k={a:J,A:G,b:oe,B:he,c:null,d:_3,e:_3,f:vne,g:Nne,G:Rne,H:bne,I:Tne,j:Ene,L:GU,m:Sne,M:xne,p:ne,q:Fe,Q:y3,s:m3,S:kne,u:Bne,U:Fne,V:Ine,w:Mne,W:Ane,x:null,X:null,y:One,Y:Cne,Z:Lne,"%":p3},I={a:de,A:ke,b:Ue,B:at,c:null,d:g3,e:g3,f:Une,g:Kne,G:Qne,H:Pne,I:Dne,j:$ne,L:WU,m:zne,M:jne,p:Tt,q:Ft,Q:y3,s:m3,S:qne,u:Gne,U:Hne,V:Wne,w:Vne,W:Yne,x:null,X:null,y:Xne,Y:Jne,Z:Zne,"%":p3},B={a:D,A:U,b:Y,B:z,c:W,d:u3,e:u3,f:pne,g:f3,G:d3,H:h3,I:h3,j:une,L:gne,m:fne,M:hne,p:P,q:dne,Q:mne,s:wne,S:_ne,u:rne,U:ane,V:one,w:sne,W:lne,x:H,X:V,y:f3,Y:d3,Z:cne,"%":yne};k.x=O(n,k),k.X=O(i,k),k.c=O(t,k),I.x=O(n,I),I.X=O(i,I),I.c=O(t,I);function O(_e,q){return function(j){var L=[],K=-1,Q=0,ae=_e.length,se,ge,Ee;for(j instanceof Date||(j=new Date(+j));++K<ae;)_e.charCodeAt(K)===37&&(L.push(_e.slice(Q,K)),(ge=c3[se=_e.charAt(++K)])!=null?se=_e.charAt(++K):ge=se==="e"?" ":"0",(Ee=q[se])&&(se=Ee(j,ge)),L.push(se),Q=K+1);return L.push(_e.slice(Q,K)),L.join("")}}function A(_e,q){return function(j){var L=Mh(1900,void 0,1),K=R(L,_e,j+="",0),Q,ae;if(K!=j.length)return null;if("Q"in L)return new Date(L.Q);if("s"in L)return new Date(L.s*1e3+("L"in L?L.L:0));if(q&&!("Z"in L)&&(L.Z=0),"p"in L&&(L.H=L.H%12+L.p*12),L.m===void 0&&(L.m="q"in L?L.q:0),"V"in L){if(L.V<1||L.V>53)return null;"w"in L||(L.w=1),"Z"in L?(Q=OE(Mh(L.y,0,1)),ae=Q.getUTCDay(),Q=ae>4||ae===0?Nb.ceil(Q):Nb(Q),Q=hl.offset(Q,(L.V-1)*7),L.y=Q.getUTCFullYear(),L.m=Q.getUTCMonth(),L.d=Q.getUTCDate()+(L.w+6)%7):(Q=AE(Mh(L.y,0,1)),ae=Q.getDay(),Q=ae>4||ae===0?Ob.ceil(Q):Ob(Q),Q=uo.offset(Q,(L.V-1)*7),L.y=Q.getFullYear(),L.m=Q.getMonth(),L.d=Q.getDate()+(L.w+6)%7)}else("W"in L||"U"in L)&&("w"in L||(L.w="u"in L?L.u%7:"W"in L?1:0),ae="Z"in L?OE(Mh(L.y,0,1)).getUTCDay():AE(Mh(L.y,0,1)).getDay(),L.m=0,L.d="W"in L?(L.w+6)%7+L.W*7-(ae+5)%7:L.w+L.U*7-(ae+6)%7);return"Z"in L?(L.H+=L.Z/100|0,L.M+=L.Z%100,OE(L)):AE(L)}}function R(_e,q,j,L){for(var K=0,Q=q.length,ae=j.length,se,ge;K<Q;){if(L>=ae)return-1;if(se=q.charCodeAt(K++),se===37){if(se=q.charAt(K++),ge=B[se in c3?q.charAt(K++):se],!ge||(L=ge(_e,j,L))<0)return-1}else if(se!=j.charCodeAt(L++))return-1}return L}function P(_e,q,j){var L=u.exec(q.slice(j));return L?(_e.p=a.get(L[0].toLowerCase()),j+L[0].length):-1}function D(_e,q,j){var L=y.exec(q.slice(j));return L?(_e.w=o.get(L[0].toLowerCase()),j+L[0].length):-1}function U(_e,q,j){var L=m.exec(q.slice(j));return L?(_e.w=w.get(L[0].toLowerCase()),j+L[0].length):-1}function Y(_e,q,j){var L=S.exec(q.slice(j));return L?(_e.m=x.get(L[0].toLowerCase()),j+L[0].length):-1}function z(_e,q,j){var L=T.exec(q.slice(j));return L?(_e.m=b.get(L[0].toLowerCase()),j+L[0].length):-1}function W(_e,q,j){return R(_e,t,q,j)}function H(_e,q,j){return R(_e,n,q,j)}function V(_e,q,j){return R(_e,i,q,j)}function J(_e){return c[_e.getDay()]}function G(_e){return l[_e.getDay()]}function oe(_e){return f[_e.getMonth()]}function he(_e){return d[_e.getMonth()]}function ne(_e){return s[+(_e.getHours()>=12)]}function Fe(_e){return 1+~~(_e.getMonth()/3)}function de(_e){return c[_e.getUTCDay()]}function ke(_e){return l[_e.getUTCDay()]}function Ue(_e){return f[_e.getUTCMonth()]}function at(_e){return d[_e.getUTCMonth()]}function Tt(_e){return s[+(_e.getUTCHours()>=12)]}function Ft(_e){return 1+~~(_e.getUTCMonth()/3)}return{format:function(_e){var q=O(_e+="",k);return q.toString=function(){return _e},q},parse:function(_e){var q=A(_e+="",!1);return q.toString=function(){return _e},q},utcFormat:function(_e){var q=O(_e+="",I);return q.toString=function(){return _e},q},utcParse:function(_e){var q=A(_e+="",!0);return q.toString=function(){return _e},q}}}var c3={"-":"",_:" ",0:"0"},Pn=/^\s*\d+/,tne=/^%/,nne=/[\\^$*+?|[\]().{}]/g;function xt(e,t,n){var i=e<0?"-":"",s=(i?-e:e)+"",l=s.length;return i+(l<n?new Array(n-l+1).join(t)+s:s)}function ine(e){return e.replace(nne,"\\$&")}function Ah(e){return new RegExp("^(?:"+e.map(ine).join("|")+")","i")}function Oh(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function sne(e,t,n){var i=Pn.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function rne(e,t,n){var i=Pn.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function ane(e,t,n){var i=Pn.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function one(e,t,n){var i=Pn.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function lne(e,t,n){var i=Pn.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function d3(e,t,n){var i=Pn.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function f3(e,t,n){var i=Pn.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function cne(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function dne(e,t,n){var i=Pn.exec(t.slice(n,n+1));return i?(e.q=i[0]*3-3,n+i[0].length):-1}function fne(e,t,n){var i=Pn.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function u3(e,t,n){var i=Pn.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function une(e,t,n){var i=Pn.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function h3(e,t,n){var i=Pn.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function hne(e,t,n){var i=Pn.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function _ne(e,t,n){var i=Pn.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function gne(e,t,n){var i=Pn.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function pne(e,t,n){var i=Pn.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function yne(e,t,n){var i=tne.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function mne(e,t,n){var i=Pn.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function wne(e,t,n){var i=Pn.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function _3(e,t){return xt(e.getDate(),t,2)}function bne(e,t){return xt(e.getHours(),t,2)}function Tne(e,t){return xt(e.getHours()%12||12,t,2)}function Ene(e,t){return xt(1+uo.count(ba(e),e),t,3)}function GU(e,t){return xt(e.getMilliseconds(),t,3)}function vne(e,t){return GU(e,t)+"000"}function Sne(e,t){return xt(e.getMonth()+1,t,2)}function xne(e,t){return xt(e.getMinutes(),t,2)}function kne(e,t){return xt(e.getSeconds(),t,2)}function Bne(e){var t=e.getDay();return t===0?7:t}function Fne(e,t){return xt(th.count(ba(e)-1,e),t,2)}function HU(e){var t=e.getDay();return t>=4||t===0?Su(e):Su.ceil(e)}function Ine(e,t){return e=HU(e),xt(Su.count(ba(e),e)+(ba(e).getDay()===4),t,2)}function Mne(e){return e.getDay()}function Ane(e,t){return xt(Ob.count(ba(e)-1,e),t,2)}function One(e,t){return xt(e.getFullYear()%100,t,2)}function Nne(e,t){return e=HU(e),xt(e.getFullYear()%100,t,2)}function Cne(e,t){return xt(e.getFullYear()%1e4,t,4)}function Rne(e,t){var n=e.getDay();return e=n>=4||n===0?Su(e):Su.ceil(e),xt(e.getFullYear()%1e4,t,4)}function Lne(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+xt(t/60|0,"0",2)+xt(t%60,"0",2)}function g3(e,t){return xt(e.getUTCDate(),t,2)}function Pne(e,t){return xt(e.getUTCHours(),t,2)}function Dne(e,t){return xt(e.getUTCHours()%12||12,t,2)}function $ne(e,t){return xt(1+hl.count(Ta(e),e),t,3)}function WU(e,t){return xt(e.getUTCMilliseconds(),t,3)}function Une(e,t){return WU(e,t)+"000"}function zne(e,t){return xt(e.getUTCMonth()+1,t,2)}function jne(e,t){return xt(e.getUTCMinutes(),t,2)}function qne(e,t){return xt(e.getUTCSeconds(),t,2)}function Gne(e){var t=e.getUTCDay();return t===0?7:t}function Hne(e,t){return xt(nh.count(Ta(e)-1,e),t,2)}function VU(e){var t=e.getUTCDay();return t>=4||t===0?xu(e):xu.ceil(e)}function Wne(e,t){return e=VU(e),xt(xu.count(Ta(e),e)+(Ta(e).getUTCDay()===4),t,2)}function Vne(e){return e.getUTCDay()}function Yne(e,t){return xt(Nb.count(Ta(e)-1,e),t,2)}function Xne(e,t){return xt(e.getUTCFullYear()%100,t,2)}function Kne(e,t){return e=VU(e),xt(e.getUTCFullYear()%100,t,2)}function Jne(e,t){return xt(e.getUTCFullYear()%1e4,t,4)}function Qne(e,t){var n=e.getUTCDay();return e=n>=4||n===0?xu(e):xu.ceil(e),xt(e.getUTCFullYear()%1e4,t,4)}function Zne(){return"+0000"}function p3(){return"%"}function y3(e){return+e}function m3(e){return Math.floor(+e/1e3)}var of,KB,YU,JB,XU;eie({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function eie(e){return of=qU(e),KB=of.format,YU=of.parse,JB=of.utcFormat,XU=of.utcParse,of}function tie(e){return new Date(e)}function nie(e){return e instanceof Date?+e:+new Date(+e)}function QB(e,t,n,i,s,l,c,d,f,u){var a=OU(),m=a.invert,w=a.domain,y=u(".%L"),o=u(":%S"),T=u("%I:%M"),b=u("%I %p"),S=u("%a %d"),x=u("%b %d"),k=u("%B"),I=u("%Y");function B(O){return(f(O)<O?y:d(O)<O?o:c(O)<O?T:l(O)<O?b:i(O)<O?s(O)<O?S:x:n(O)<O?k:I)(O)}return a.invert=function(O){return new Date(m(O))},a.domain=function(O){return arguments.length?w(Array.from(O,nie)):w().map(tie)},a.ticks=function(O){var A=w();return e(A[0],A[A.length-1],O??10)},a.tickFormat=function(O,A){return A==null?B:u(A)},a.nice=function(O){var A=w();return(!O||typeof O.range!="function")&&(O=t(A[0],A[A.length-1],O??10)),O?w(RU(A,O)):a},a.copy=function(){return ap(a,QB(e,t,n,i,s,l,c,d,f,u))},a}function KU(){return Aa.apply(QB(Zte,ene,ba,dg,th,uo,aT,sT,ao,KB).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function iie(){return Aa.apply(QB(Jte,Qte,Ta,fg,nh,hl,oT,rT,ao,JB).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function lT(){var e=0,t=1,n,i,s,l,c=$i,d=!1,f;function u(m){return m==null||isNaN(m=+m)?f:c(s===0?.5:(m=(l(m)-n)*s,d?Math.max(0,Math.min(1,m)):m))}u.domain=function(m){return arguments.length?([e,t]=m,n=l(e=+e),i=l(t=+t),s=n===i?0:1/(i-n),u):[e,t]},u.clamp=function(m){return arguments.length?(d=!!m,u):d},u.interpolator=function(m){return arguments.length?(c=m,u):c};function a(m){return function(w){var y,o;return arguments.length?([y,o]=w,c=m(y,o),u):[c(0),c(1)]}}return u.range=a(Wl),u.rangeRound=a(tp),u.unknown=function(m){return arguments.length?(f=m,u):f},function(m){return l=m,n=m(e),i=m(t),s=n===i?0:1/(i-n),u}}function Yl(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function ZB(){var e=Ud(lT()($i));return e.copy=function(){return Yl(e,ZB())},Vl.apply(e,arguments)}function JU(){var e=HB(lT()).domain([1,10]);return e.copy=function(){return Yl(e,JU()).base(e.base())},Vl.apply(e,arguments)}function QU(){var e=WB(lT());return e.copy=function(){return Yl(e,QU()).constant(e.constant())},Vl.apply(e,arguments)}function e2(){var e=VB(lT());return e.copy=function(){return Yl(e,e2()).exponent(e.exponent())},Vl.apply(e,arguments)}function sie(){return e2.apply(null,arguments).exponent(.5)}function cT(){var e=0,t=.5,n=1,i=1,s,l,c,d,f,u=$i,a,m=!1,w;function y(T){return isNaN(T=+T)?w:(T=.5+((T=+a(T))-l)*(i*T<i*l?d:f),u(m?Math.max(0,Math.min(1,T)):T))}y.domain=function(T){return arguments.length?([e,t,n]=T,s=a(e=+e),l=a(t=+t),c=a(n=+n),d=s===l?0:.5/(l-s),f=l===c?0:.5/(c-l),i=l<s?-1:1,y):[e,t,n]},y.clamp=function(T){return arguments.length?(m=!!T,y):m},y.interpolator=function(T){return arguments.length?(u=T,y):u};function o(T){return function(b){var S,x,k;return arguments.length?([S,x,k]=b,u=BB(T,[S,x,k]),y):[u(0),u(.5),u(1)]}}return y.range=o(Wl),y.rangeRound=o(tp),y.unknown=function(T){return arguments.length?(w=T,y):w},function(T){return a=T,s=T(e),l=T(t),c=T(n),d=s===l?0:.5/(l-s),f=l===c?0:.5/(c-l),i=l<s?-1:1,y}}function ZU(){var e=Ud(cT()($i));return e.copy=function(){return Yl(e,ZU())},Vl.apply(e,arguments)}function e8(){var e=HB(cT()).domain([.1,1,10]);return e.copy=function(){return Yl(e,e8()).base(e.base())},Vl.apply(e,arguments)}function t8(){var e=WB(cT());return e.copy=function(){return Yl(e,t8()).constant(e.constant())},Vl.apply(e,arguments)}function t2(){var e=VB(cT());return e.copy=function(){return Yl(e,t2()).exponent(e.exponent())},Vl.apply(e,arguments)}function rie(){return t2.apply(null,arguments).exponent(.5)}function Ot(e){return function(){return e}}const w3=Math.abs,Yn=Math.atan2,oc=Math.cos,aie=Math.max,NE=Math.min,Dr=Math.sin,zc=Math.sqrt,Xn=1e-12,ku=Math.PI,Cb=ku/2,n8=2*ku;function oie(e){return e>1?0:e<-1?ku:Math.acos(e)}function b3(e){return e>=1?Cb:e<=-1?-Cb:Math.asin(e)}function dT(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);t=i}return e},()=>new IB(t)}function lie(e){return e.innerRadius}function cie(e){return e.outerRadius}function die(e){return e.startAngle}function fie(e){return e.endAngle}function uie(e){return e&&e.padAngle}function hie(e,t,n,i,s,l,c,d){var f=n-e,u=i-t,a=c-s,m=d-l,w=m*f-a*u;if(!(w*w<Xn))return w=(a*(t-l)-m*(e-s))/w,[e+w*f,t+w*u]}function Em(e,t,n,i,s,l,c){var d=e-n,f=t-i,u=(c?l:-l)/zc(d*d+f*f),a=u*f,m=-u*d,w=e+a,y=t+m,o=n+a,T=i+m,b=(w+o)/2,S=(y+T)/2,x=o-w,k=T-y,I=x*x+k*k,B=s-l,O=w*T-o*y,A=(k<0?-1:1)*zc(aie(0,B*B*I-O*O)),R=(O*k-x*A)/I,P=(-O*x-k*A)/I,D=(O*k+x*A)/I,U=(-O*x+k*A)/I,Y=R-b,z=P-S,W=D-b,H=U-S;return Y*Y+z*z>W*W+H*H&&(R=D,P=U),{cx:R,cy:P,x01:-a,y01:-m,x11:R*(s/B-1),y11:P*(s/B-1)}}function _ie(){var e=lie,t=cie,n=Ot(0),i=null,s=die,l=fie,c=uie,d=null,f=dT(u);function u(){var a,m,w=+e.apply(this,arguments),y=+t.apply(this,arguments),o=s.apply(this,arguments)-Cb,T=l.apply(this,arguments)-Cb,b=w3(T-o),S=T>o;if(d||(d=a=f()),y<w&&(m=y,y=w,w=m),!(y>Xn))d.moveTo(0,0);else if(b>n8-Xn)d.moveTo(y*oc(o),y*Dr(o)),d.arc(0,0,y,o,T,!S),w>Xn&&(d.moveTo(w*oc(T),w*Dr(T)),d.arc(0,0,w,T,o,S));else{var x=o,k=T,I=o,B=T,O=b,A=b,R=c.apply(this,arguments)/2,P=R>Xn&&(i?+i.apply(this,arguments):zc(w*w+y*y)),D=NE(w3(y-w)/2,+n.apply(this,arguments)),U=D,Y=D,z,W;if(P>Xn){var H=b3(P/w*Dr(R)),V=b3(P/y*Dr(R));(O-=H*2)>Xn?(H*=S?1:-1,I+=H,B-=H):(O=0,I=B=(o+T)/2),(A-=V*2)>Xn?(V*=S?1:-1,x+=V,k-=V):(A=0,x=k=(o+T)/2)}var J=y*oc(x),G=y*Dr(x),oe=w*oc(B),he=w*Dr(B);if(D>Xn){var ne=y*oc(k),Fe=y*Dr(k),de=w*oc(I),ke=w*Dr(I),Ue;if(b<ku)if(Ue=hie(J,G,de,ke,ne,Fe,oe,he)){var at=J-Ue[0],Tt=G-Ue[1],Ft=ne-Ue[0],_e=Fe-Ue[1],q=1/Dr(oie((at*Ft+Tt*_e)/(zc(at*at+Tt*Tt)*zc(Ft*Ft+_e*_e)))/2),j=zc(Ue[0]*Ue[0]+Ue[1]*Ue[1]);U=NE(D,(w-j)/(q-1)),Y=NE(D,(y-j)/(q+1))}else U=Y=0}A>Xn?Y>Xn?(z=Em(de,ke,J,G,y,Y,S),W=Em(ne,Fe,oe,he,y,Y,S),d.moveTo(z.cx+z.x01,z.cy+z.y01),Y<D?d.arc(z.cx,z.cy,Y,Yn(z.y01,z.x01),Yn(W.y01,W.x01),!S):(d.arc(z.cx,z.cy,Y,Yn(z.y01,z.x01),Yn(z.y11,z.x11),!S),d.arc(0,0,y,Yn(z.cy+z.y11,z.cx+z.x11),Yn(W.cy+W.y11,W.cx+W.x11),!S),d.arc(W.cx,W.cy,Y,Yn(W.y11,W.x11),Yn(W.y01,W.x01),!S))):(d.moveTo(J,G),d.arc(0,0,y,x,k,!S)):d.moveTo(J,G),!(w>Xn)||!(O>Xn)?d.lineTo(oe,he):U>Xn?(z=Em(oe,he,ne,Fe,w,-U,S),W=Em(J,G,de,ke,w,-U,S),d.lineTo(z.cx+z.x01,z.cy+z.y01),U<D?d.arc(z.cx,z.cy,U,Yn(z.y01,z.x01),Yn(W.y01,W.x01),!S):(d.arc(z.cx,z.cy,U,Yn(z.y01,z.x01),Yn(z.y11,z.x11),!S),d.arc(0,0,w,Yn(z.cy+z.y11,z.cx+z.x11),Yn(W.cy+W.y11,W.cx+W.x11),S),d.arc(W.cx,W.cy,U,Yn(W.y11,W.x11),Yn(W.y01,W.x01),!S))):d.arc(0,0,w,B,I,S)}if(d.closePath(),a)return d=null,a+""||null}return u.centroid=function(){var a=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,m=(+s.apply(this,arguments)+ +l.apply(this,arguments))/2-ku/2;return[oc(m)*a,Dr(m)*a]},u.innerRadius=function(a){return arguments.length?(e=typeof a=="function"?a:Ot(+a),u):e},u.outerRadius=function(a){return arguments.length?(t=typeof a=="function"?a:Ot(+a),u):t},u.cornerRadius=function(a){return arguments.length?(n=typeof a=="function"?a:Ot(+a),u):n},u.padRadius=function(a){return arguments.length?(i=a==null?null:typeof a=="function"?a:Ot(+a),u):i},u.startAngle=function(a){return arguments.length?(s=typeof a=="function"?a:Ot(+a),u):s},u.endAngle=function(a){return arguments.length?(l=typeof a=="function"?a:Ot(+a),u):l},u.padAngle=function(a){return arguments.length?(c=typeof a=="function"?a:Ot(+a),u):c},u.context=function(a){return arguments.length?(d=a??null,u):d},u}function i8(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function s8(e){this._context=e}s8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function n2(e){return new s8(e)}function r8(e){return e[0]}function a8(e){return e[1]}function o8(e,t){var n=Ot(!0),i=null,s=n2,l=null,c=dT(d);e=typeof e=="function"?e:e===void 0?r8:Ot(e),t=typeof t=="function"?t:t===void 0?a8:Ot(t);function d(f){var u,a=(f=i8(f)).length,m,w=!1,y;for(i==null&&(l=s(y=c())),u=0;u<=a;++u)!(u<a&&n(m=f[u],u,f))===w&&((w=!w)?l.lineStart():l.lineEnd()),w&&l.point(+e(m,u,f),+t(m,u,f));if(y)return l=null,y+""||null}return d.x=function(f){return arguments.length?(e=typeof f=="function"?f:Ot(+f),d):e},d.y=function(f){return arguments.length?(t=typeof f=="function"?f:Ot(+f),d):t},d.defined=function(f){return arguments.length?(n=typeof f=="function"?f:Ot(!!f),d):n},d.curve=function(f){return arguments.length?(s=f,i!=null&&(l=s(i)),d):s},d.context=function(f){return arguments.length?(f==null?i=l=null:l=s(i=f),d):i},d}function l8(e,t,n){var i=null,s=Ot(!0),l=null,c=n2,d=null,f=dT(u);e=typeof e=="function"?e:e===void 0?r8:Ot(+e),t=typeof t=="function"?t:Ot(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?a8:Ot(+n);function u(m){var w,y,o,T=(m=i8(m)).length,b,S=!1,x,k=new Array(T),I=new Array(T);for(l==null&&(d=c(x=f())),w=0;w<=T;++w){if(!(w<T&&s(b=m[w],w,m))===S)if(S=!S)y=w,d.areaStart(),d.lineStart();else{for(d.lineEnd(),d.lineStart(),o=w-1;o>=y;--o)d.point(k[o],I[o]);d.lineEnd(),d.areaEnd()}S&&(k[w]=+e(b,w,m),I[w]=+t(b,w,m),d.point(i?+i(b,w,m):k[w],n?+n(b,w,m):I[w]))}if(x)return d=null,x+""||null}function a(){return o8().defined(s).curve(c).context(l)}return u.x=function(m){return arguments.length?(e=typeof m=="function"?m:Ot(+m),i=null,u):e},u.x0=function(m){return arguments.length?(e=typeof m=="function"?m:Ot(+m),u):e},u.x1=function(m){return arguments.length?(i=m==null?null:typeof m=="function"?m:Ot(+m),u):i},u.y=function(m){return arguments.length?(t=typeof m=="function"?m:Ot(+m),n=null,u):t},u.y0=function(m){return arguments.length?(t=typeof m=="function"?m:Ot(+m),u):t},u.y1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:Ot(+m),u):n},u.lineX0=u.lineY0=function(){return a().x(e).y(t)},u.lineY1=function(){return a().x(e).y(n)},u.lineX1=function(){return a().x(i).y(t)},u.defined=function(m){return arguments.length?(s=typeof m=="function"?m:Ot(!!m),u):s},u.curve=function(m){return arguments.length?(c=m,l!=null&&(d=c(l)),u):c},u.context=function(m){return arguments.length?(m==null?l=d=null:d=c(l=m),u):l},u}const gie={draw(e,t){const n=zc(t/ku);e.moveTo(n,0),e.arc(0,0,n,0,n8)}};function pie(e,t){let n=null,i=dT(s);e=typeof e=="function"?e:Ot(e||gie),t=typeof t=="function"?t:Ot(t===void 0?64:+t);function s(){let l;if(n||(n=l=i()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),l)return n=null,l+""||null}return s.type=function(l){return arguments.length?(e=typeof l=="function"?l:Ot(l),s):e},s.size=function(l){return arguments.length?(t=typeof l=="function"?l:Ot(+l),s):t},s.context=function(l){return arguments.length?(n=l??null,s):n},s}function kl(){}function Rb(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function fT(e){this._context=e}fT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Rb(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Rb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function yie(e){return new fT(e)}function c8(e){this._context=e}c8.prototype={areaStart:kl,areaEnd:kl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Rb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function mie(e){return new c8(e)}function d8(e){this._context=e}d8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:Rb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function wie(e){return new d8(e)}function f8(e,t){this._basis=new fT(e),this._beta=t}f8.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var i=e[0],s=t[0],l=e[n]-i,c=t[n]-s,d=-1,f;++d<=n;)f=d/n,this._basis.point(this._beta*e[d]+(1-this._beta)*(i+f*l),this._beta*t[d]+(1-this._beta)*(s+f*c));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const bie=function e(t){function n(i){return t===1?new fT(i):new f8(i,t)}return n.beta=function(i){return e(+i)},n}(.85);function Lb(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function i2(e,t){this._context=e,this._k=(1-t)/6}i2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Lb(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Lb(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Tie=function e(t){function n(i){return new i2(i,t)}return n.tension=function(i){return e(+i)},n}(0);function s2(e,t){this._context=e,this._k=(1-t)/6}s2.prototype={areaStart:kl,areaEnd:kl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Lb(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Eie=function e(t){function n(i){return new s2(i,t)}return n.tension=function(i){return e(+i)},n}(0);function r2(e,t){this._context=e,this._k=(1-t)/6}r2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Lb(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const vie=function e(t){function n(i){return new r2(i,t)}return n.tension=function(i){return e(+i)},n}(0);function a2(e,t,n){var i=e._x1,s=e._y1,l=e._x2,c=e._y2;if(e._l01_a>Xn){var d=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,f=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*d-e._x0*e._l12_2a+e._x2*e._l01_2a)/f,s=(s*d-e._y0*e._l12_2a+e._y2*e._l01_2a)/f}if(e._l23_a>Xn){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,a=3*e._l23_a*(e._l23_a+e._l12_a);l=(l*u+e._x1*e._l23_2a-t*e._l12_2a)/a,c=(c*u+e._y1*e._l23_2a-n*e._l12_2a)/a}e._context.bezierCurveTo(i,s,l,c,e._x2,e._y2)}function u8(e,t){this._context=e,this._alpha=t}u8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:a2(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Sie=function e(t){function n(i){return t?new u8(i,t):new i2(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function h8(e,t){this._context=e,this._alpha=t}h8.prototype={areaStart:kl,areaEnd:kl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:a2(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const xie=function e(t){function n(i){return t?new h8(i,t):new s2(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function _8(e,t){this._context=e,this._alpha=t}_8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:a2(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const kie=function e(t){function n(i){return t?new _8(i,t):new r2(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function g8(e){this._context=e}g8.prototype={areaStart:kl,areaEnd:kl,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Bie(e){return new g8(e)}function T3(e){return e<0?-1:1}function E3(e,t,n){var i=e._x1-e._x0,s=t-e._x1,l=(e._y1-e._y0)/(i||s<0&&-0),c=(n-e._y1)/(s||i<0&&-0),d=(l*s+c*i)/(i+s);return(T3(l)+T3(c))*Math.min(Math.abs(l),Math.abs(c),.5*Math.abs(d))||0}function v3(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function CE(e,t,n){var i=e._x0,s=e._y0,l=e._x1,c=e._y1,d=(l-i)/3;e._context.bezierCurveTo(i+d,s+d*t,l-d,c-d*n,l,c)}function Pb(e){this._context=e}Pb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:CE(this,this._t0,v3(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,CE(this,v3(this,n=E3(this,e,t)),n);break;default:CE(this,this._t0,n=E3(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function p8(e){this._context=new y8(e)}(p8.prototype=Object.create(Pb.prototype)).point=function(e,t){Pb.prototype.point.call(this,t,e)};function y8(e){this._context=e}y8.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,s,l){this._context.bezierCurveTo(t,e,i,n,l,s)}};function Fie(e){return new Pb(e)}function Iie(e){return new p8(e)}function m8(e){this._context=e}m8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var i=S3(e),s=S3(t),l=0,c=1;c<n;++l,++c)this._context.bezierCurveTo(i[0][l],s[0][l],i[1][l],s[1][l],e[c],t[c]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function S3(e){var t,n=e.length-1,i,s=new Array(n),l=new Array(n),c=new Array(n);for(s[0]=0,l[0]=2,c[0]=e[0]+2*e[1],t=1;t<n-1;++t)s[t]=1,l[t]=4,c[t]=4*e[t]+2*e[t+1];for(s[n-1]=2,l[n-1]=7,c[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)i=s[t]/l[t-1],l[t]-=i,c[t]-=i*c[t-1];for(s[n-1]=c[n-1]/l[n-1],t=n-2;t>=0;--t)s[t]=(c[t]-s[t+1])/l[t];for(l[n-1]=(e[n]+s[n-1])/2,t=0;t<n-1;++t)l[t]=2*e[t+1]-s[t+1];return[s,l]}function Mie(e){return new m8(e)}function uT(e,t){this._context=e,this._t=t}uT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Aie(e){return new uT(e,.5)}function Oie(e){return new uT(e,0)}function Nie(e){return new uT(e,1)}function f_(e,t,n){this.k=e,this.x=t,this.y=n}f_.prototype={constructor:f_,scale:function(e){return e===1?this:new f_(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new f_(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};f_.prototype;function*w8(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)i=t(i,++n,e),i!=null&&i!==""&&(i=+i)>=i&&(yield i)}}function o2(e,t,n){const i=Float64Array.from(w8(e,n));return i.sort(co),t.map(s=>X6(i,s))}function l2(e,t){return o2(e,[.25,.5,.75],t)}function c2(e,t){const n=e.length,i=cJ(e,t),s=l2(e,t),l=(s[2]-s[0])/1.34;return 1.06*(Math.min(i,l)||i||Math.abs(s[0])||1)*Math.pow(n,-.2)}function d2(e){const t=e.maxbins||20,n=e.base||10,i=Math.log(n),s=e.divide||[5,2];let l=e.extent[0],c=e.extent[1],d,f,u,a,m,w;const y=e.span||c-l||Math.abs(l)||1;if(e.step)d=e.step;else if(e.steps){for(a=y/t,m=0,w=e.steps.length;m<w&&e.steps[m]<a;++m);d=e.steps[Math.max(0,m-1)]}else{for(f=Math.ceil(Math.log(t)/i),u=e.minstep||0,d=Math.max(u,Math.pow(n,Math.round(Math.log(y)/i)-f));Math.ceil(y/d)>t;)d*=n;for(m=0,w=s.length;m<w;++m)a=d/s[m],a>=u&&y/a<=t&&(d=a)}a=Math.log(d);const o=a>=0?0:~~(-a/i)+1,T=Math.pow(n,-o-1);return(e.nice||e.nice===void 0)&&(a=Math.floor(l/d+T)*d,l=l<a?a-d:a,c=Math.ceil(c/d)*d),{start:l,stop:c===l?l+d:c,step:d}}var Us=Math.random;function Cie(e){Us=e}function b8(e,t,n,i){if(!e.length)return[void 0,void 0];const s=Float64Array.from(w8(e,i)),l=s.length,c=t;let d,f,u,a;for(u=0,a=Array(c);u<c;++u){for(d=0,f=0;f<l;++f)d+=s[~~(Us()*l)];a[u]=d/l}return a.sort(co),[Zv(a,n/2),Zv(a,1-n/2)]}function T8(e,t,n,i){i=i||(w=>w);const s=e.length,l=new Float64Array(s);let c=0,d=1,f=i(e[0]),u=f,a=f+t,m;for(;d<s;++d){if(m=i(e[d]),m>=a){for(u=(f+u)/2;c<d;++c)l[c]=u;a=m+t,f=m}u=m}for(u=(f+u)/2;c<d;++c)l[c]=u;return n?Rie(l,t+t/4):l}function Rie(e,t){const n=e.length;let i=0,s=1,l,c;for(;e[i]===e[s];)++s;for(;s<n;){for(l=s+1;e[s]===e[l];)++l;if(e[s]-e[s-1]<t){for(c=s+(i+l-s-s>>1);c<s;)e[c++]=e[s];for(;c>s;)e[c--]=e[i]}i=s,s=l}return e}function Lie(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function Pie(e,t){t==null&&(t=e,e=0);let n,i,s;const l={min(c){return arguments.length?(n=c||0,s=i-n,l):n},max(c){return arguments.length?(i=c||0,s=i-n,l):i},sample(){return n+Math.floor(s*Us())},pdf(c){return c===Math.floor(c)&&c>=n&&c<i?1/s:0},cdf(c){const d=Math.floor(c);return d<n?0:d>=i?1:(d-n+1)/s},icdf(c){return c>=0&&c<=1?n-1+Math.floor(c*s):NaN}};return l.min(e).max(t)}const E8=Math.sqrt(2*Math.PI),Die=Math.SQRT2;let Nh=NaN;function hT(e,t){e=e||0,t=t??1;let n=0,i=0,s,l;if(Nh===Nh)n=Nh,Nh=NaN;else{do n=Us()*2-1,i=Us()*2-1,s=n*n+i*i;while(s===0||s>1);l=Math.sqrt(-2*Math.log(s)/s),n*=l,Nh=i*l}return e+n*t}function f2(e,t,n){n=n??1;const i=(e-(t||0))/n;return Math.exp(-.5*i*i)/(n*E8)}function _T(e,t,n){t=t||0,n=n??1;const i=(e-t)/n,s=Math.abs(i);let l;if(s>37)l=0;else{const c=Math.exp(-s*s/2);let d;s<7.07106781186547?(d=.0352624965998911*s+.700383064443688,d=d*s+6.37396220353165,d=d*s+33.912866078383,d=d*s+112.079291497871,d=d*s+221.213596169931,d=d*s+220.206867912376,l=c*d,d=.0883883476483184*s+1.75566716318264,d=d*s+16.064177579207,d=d*s+86.7807322029461,d=d*s+296.564248779674,d=d*s+637.333633378831,d=d*s+793.826512519948,d=d*s+440.413735824752,l=l/d):(d=s+.65,d=s+4/d,d=s+3/d,d=s+2/d,d=s+1/d,l=c/d/2.506628274631)}return i>0?1-l:l}function gT(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*Die*$ie(2*e-1)}function $ie(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function u2(e,t){let n,i;const s={mean(l){return arguments.length?(n=l||0,s):n},stdev(l){return arguments.length?(i=l??1,s):i},sample:()=>hT(n,i),pdf:l=>f2(l,n,i),cdf:l=>_T(l,n,i),icdf:l=>gT(l,n,i)};return s.mean(e).stdev(t)}function h2(e,t){const n=u2();let i=0;const s={data(l){return arguments.length?(e=l,i=l?l.length:0,s.bandwidth(t)):e},bandwidth(l){return arguments.length?(t=l,!t&&e&&(t=c2(e)),s):t},sample(){return e[~~(Us()*i)]+t*n.sample()},pdf(l){let c=0,d=0;for(;d<i;++d)c+=n.pdf((l-e[d])/t);return c/t/i},cdf(l){let c=0,d=0;for(;d<i;++d)c+=n.cdf((l-e[d])/t);return c/i},icdf(){throw Error("KDE icdf not supported.")}};return s.data(e)}function _2(e,t){return e=e||0,t=t??1,Math.exp(e+hT()*t)}function g2(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const i=(Math.log(e)-t)/n;return Math.exp(-.5*i*i)/(n*E8*e)}function p2(e,t,n){return _T(Math.log(e),t,n)}function y2(e,t,n){return Math.exp(gT(e,t,n))}function v8(e,t){let n,i;const s={mean(l){return arguments.length?(n=l||0,s):n},stdev(l){return arguments.length?(i=l??1,s):i},sample:()=>_2(n,i),pdf:l=>g2(l,n,i),cdf:l=>p2(l,n,i),icdf:l=>y2(l,n,i)};return s.mean(e).stdev(t)}function S8(e,t){let n=0,i;function s(c){const d=[];let f=0,u;for(u=0;u<n;++u)f+=d[u]=c[u]==null?1:+c[u];for(u=0;u<n;++u)d[u]/=f;return d}const l={weights(c){return arguments.length?(i=s(t=c||[]),l):t},distributions(c){return arguments.length?(c?(n=c.length,e=c):(n=0,e=[]),l.weights(t)):e},sample(){const c=Us();let d=e[n-1],f=i[0],u=0;for(;u<n-1;f+=i[++u])if(c<f){d=e[u];break}return d.sample()},pdf(c){let d=0,f=0;for(;f<n;++f)d+=i[f]*e[f].pdf(c);return d},cdf(c){let d=0,f=0;for(;f<n;++f)d+=i[f]*e[f].cdf(c);return d},icdf(){throw Error("Mixture icdf not supported.")}};return l.distributions(e).weights(t)}function m2(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Us()}function w2(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function b2(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function T2(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function x8(e,t){let n,i;const s={min(l){return arguments.length?(n=l||0,s):n},max(l){return arguments.length?(i=l??1,s):i},sample:()=>m2(n,i),pdf:l=>w2(l,n,i),cdf:l=>b2(l,n,i),icdf:l=>T2(l,n,i)};return t==null&&(t=e??1,e=0),s.min(e).max(t)}function E2(e,t,n){let i=0,s=0;for(const l of e){const c=n(l);t(l)==null||c==null||isNaN(c)||(i+=(c-i)/++s)}return{coef:[i],predict:()=>i,rSquared:0}}function op(e,t,n,i){const s=i-e*e,l=Math.abs(s)<1e-24?0:(n-e*t)/s;return[t-l*e,l]}function pT(e,t,n,i){e=e.filter(y=>{let o=t(y),T=n(y);return o!=null&&(o=+o)>=o&&T!=null&&(T=+T)>=T}),i&&e.sort((y,o)=>t(y)-t(o));const s=e.length,l=new Float64Array(s),c=new Float64Array(s);let d=0,f=0,u=0,a,m,w;for(w of e)l[d]=a=+t(w),c[d]=m=+n(w),++d,f+=(a-f)/d,u+=(m-u)/d;for(d=0;d<s;++d)l[d]-=f,c[d]-=u;return[l,c,f,u]}function lp(e,t,n,i){let s=-1,l,c;for(const d of e)l=t(d),c=n(d),l!=null&&(l=+l)>=l&&c!=null&&(c=+c)>=c&&i(l,c,++s)}function ih(e,t,n,i,s){let l=0,c=0;return lp(e,t,n,(d,f)=>{const u=f-s(d),a=f-i;l+=u*u,c+=a*a}),1-l/c}function v2(e,t,n){let i=0,s=0,l=0,c=0,d=0;lp(e,t,n,(a,m)=>{++d,i+=(a-i)/d,s+=(m-s)/d,l+=(a*m-l)/d,c+=(a*a-c)/d});const f=op(i,s,l,c),u=a=>f[0]+f[1]*a;return{coef:f,predict:u,rSquared:ih(e,t,n,s,u)}}function k8(e,t,n){let i=0,s=0,l=0,c=0,d=0;lp(e,t,n,(a,m)=>{++d,a=Math.log(a),i+=(a-i)/d,s+=(m-s)/d,l+=(a*m-l)/d,c+=(a*a-c)/d});const f=op(i,s,l,c),u=a=>f[0]+f[1]*Math.log(a);return{coef:f,predict:u,rSquared:ih(e,t,n,s,u)}}function B8(e,t,n){const[i,s,l,c]=pT(e,t,n);let d=0,f=0,u=0,a=0,m=0,w,y,o;lp(e,t,n,(x,k)=>{w=i[m++],y=Math.log(k),o=w*k,d+=(k*y-d)/m,f+=(o-f)/m,u+=(o*y-u)/m,a+=(w*o-a)/m});const[T,b]=op(f/c,d/c,u/c,a/c),S=x=>Math.exp(T+b*(x-l));return{coef:[Math.exp(T-b*l),b],predict:S,rSquared:ih(e,t,n,c,S)}}function F8(e,t,n){let i=0,s=0,l=0,c=0,d=0,f=0;lp(e,t,n,(m,w)=>{const y=Math.log(m),o=Math.log(w);++f,i+=(y-i)/f,s+=(o-s)/f,l+=(y*o-l)/f,c+=(y*y-c)/f,d+=(w-d)/f});const u=op(i,s,l,c),a=m=>u[0]*Math.pow(m,u[1]);return u[0]=Math.exp(u[0]),{coef:u,predict:a,rSquared:ih(e,t,n,d,a)}}function S2(e,t,n){const[i,s,l,c]=pT(e,t,n),d=i.length;let f=0,u=0,a=0,m=0,w=0,y,o,T,b;for(y=0;y<d;)o=i[y],T=s[y++],b=o*o,f+=(b-f)/y,u+=(b*o-u)/y,a+=(b*b-a)/y,m+=(o*T-m)/y,w+=(b*T-w)/y;const S=a-f*f,x=f*S-u*u,k=(w*f-m*u)/x,I=(m*S-w*u)/x,B=-k*f,O=A=>(A=A-l,k*A*A+I*A+B+c);return{coef:[B-I*l+k*l*l+c,I-2*k*l,k],predict:O,rSquared:ih(e,t,n,c,O)}}function I8(e,t,n,i){if(i===0)return E2(e,t,n);if(i===1)return v2(e,t,n);if(i===2)return S2(e,t,n);const[s,l,c,d]=pT(e,t,n),f=s.length,u=[],a=[],m=i+1;let w,y,o,T,b;for(w=0;w<m;++w){for(o=0,T=0;o<f;++o)T+=Math.pow(s[o],w)*l[o];for(u.push(T),b=new Float64Array(m),y=0;y<m;++y){for(o=0,T=0;o<f;++o)T+=Math.pow(s[o],w+y);b[y]=T}a.push(b)}a.push(u);const S=zie(a),x=k=>{k-=c;let I=d+S[0]+S[1]*k+S[2]*k*k;for(w=3;w<m;++w)I+=S[w]*Math.pow(k,w);return I};return{coef:Uie(m,S,-c,d),predict:x,rSquared:ih(e,t,n,d,x)}}function Uie(e,t,n,i){const s=Array(e);let l,c,d,f;for(l=0;l<e;++l)s[l]=0;for(l=e-1;l>=0;--l)for(d=t[l],f=1,s[l]+=d,c=1;c<=l;++c)f*=(l+1-c)/c,s[l-c]+=d*Math.pow(n,c)*f;return s[0]+=i,s}function zie(e){const t=e.length-1,n=[];let i,s,l,c,d;for(i=0;i<t;++i){for(c=i,s=i+1;s<t;++s)Math.abs(e[i][s])>Math.abs(e[i][c])&&(c=s);for(l=i;l<t+1;++l)d=e[l][i],e[l][i]=e[l][c],e[l][c]=d;for(s=i+1;s<t;++s)for(l=t;l>=i;l--)e[l][s]-=e[l][i]*e[i][s]/e[i][i]}for(s=t-1;s>=0;--s){for(d=0,l=s+1;l<t;++l)d+=e[l][s]*n[l];n[s]=(e[t][s]-d)/e[s][s]}return n}const x3=2,k3=1e-12;function M8(e,t,n,i){const[s,l,c,d]=pT(e,t,n,!0),f=s.length,u=Math.max(2,~~(i*f)),a=new Float64Array(f),m=new Float64Array(f),w=new Float64Array(f).fill(1);for(let y=-1;++y<=x3;){const o=[0,u-1];for(let b=0;b<f;++b){const S=s[b],x=o[0],k=o[1],I=S-s[x]>s[k]-S?x:k;let B=0,O=0,A=0,R=0,P=0;const D=1/Math.abs(s[I]-S||1);for(let z=x;z<=k;++z){const W=s[z],H=l[z],V=jie(Math.abs(S-W)*D)*w[z],J=W*V;B+=V,O+=J,A+=H*V,R+=H*J,P+=W*J}const[U,Y]=op(O/B,A/B,R/B,P/B);a[b]=U+Y*S,m[b]=Math.abs(l[b]-a[b]),qie(s,b+1,o)}if(y===x3)break;const T=K6(m);if(Math.abs(T)<k3)break;for(let b=0,S,x;b<f;++b)S=m[b]/(6*T),w[b]=S>=1?k3:(x=1-S*S)*x}return Gie(s,a,c,d)}function jie(e){return(e=1-e*e*e)*e*e}function qie(e,t,n){const i=e[t];let s=n[0],l=n[1]+1;if(!(l>=e.length))for(;t>s&&e[l]-i<=i-e[s];)n[0]=++s,n[1]=l,++l}function Gie(e,t,n,i){const s=e.length,l=[];let c=0,d=0,f=[],u;for(;c<s;++c)u=e[c]+n,f[0]===u?f[1]+=(t[c]-f[1])/++d:(d=0,f[1]+=i,f=[u,t[c]],l.push(f));return f[1]+=i,l}const Hie=.5*Math.PI/180;function yT(e,t,n,i){n=n||25,i=Math.max(n,i||200);const s=T=>[T,e(T)],l=t[0],c=t[1],d=c-l,f=d/i,u=[s(l)],a=[];if(n===i){for(let T=1;T<i;++T)u.push(s(l+T/n*d));return u.push(s(c)),u}else{a.push(s(c));for(let T=n;--T>0;)a.push(s(l+T/n*d))}let m=u[0],w=a[a.length-1];const y=1/d,o=Wie(m[1],a);for(;w;){const T=s((m[0]+w[0])/2);T[0]-m[0]>=f&&Vie(m,T,w,y,o)>Hie?a.push(T):(m=w,u.push(w),a.pop()),w=a[a.length-1]}return u}function Wie(e,t){let n=e,i=e;const s=t.length;for(let l=0;l<s;++l){const c=t[l][1];c<n&&(n=c),c>i&&(i=c)}return 1/(i-n)}function Vie(e,t,n,i,s){const l=Math.atan2(s*(n[1]-e[1]),i*(n[0]-e[0])),c=Math.atan2(s*(t[1]-e[1]),i*(t[0]-e[0]));return Math.abs(l-c)}function vm(e){return e.length}function Cf(e){const t=new Map(e.map((n,i)=>[n,i]));return n=>t.get(n)}function N_({start:e,step:t,stop:n}){return(n-e)/t}function Yie(e,t,n=!1){return n?A8(e,t):d2({maxbins:e,extent:t})}function A8(e,t){const n=(t[1]-t[0])/e,i=t[0],s=t[t.length-1];return console.log(n,i,s),{start:i,stop:s,step:n}}function Xie(e,t,n=!1){if(console.log("hit"),n)return A8(e,t);const s=KU().domain(t).ticks(e),l=s[0].getTime(),c=s[s.length-1].getTime(),d=(c-l)/s.length;return{start:l,stop:c,step:d}}function Kie(e,t,n=!1){return(e.time?Xie:Yie)(e.bins,t,n)}function Jie(e){let t=[],n=e.start,i=n+e.step;for(;i<=e.stop;)t.push({binStart:n,binEnd:i}),n=i,i+=e.step;return t}function Qie(e,t){const n=Zie(e,t);return i=>[n(i[0]),n(i[1])]}function Zie(e,t,n=Math.floor){const i=[1,t],s=e,l=GB().domain(s).range(i);return l.clamp(!0),c=>{const d=l(c);return n(d)}}function B3(e,...t){return new Map(Array.from(e.entries()).filter(([n,i])=>!t.includes(n)))}function dw({start:e,step:t,stop:n}){const i=N_({start:e,step:t,stop:n}),s=i-1;return l=>{const c=Math.floor((l-e)/t);return c>=i?s:c}}function ese({start:e,stop:t},n){const i=tse({start:e,stop:t},n);return dw({start:e,step:i,stop:t})}function tse({start:e,stop:t},n){return(t-e)/n}class nse{constructor(){this.views=[]}remove(t){const n=this.views.findIndex(i=>i==t);n!==-1&&this.views.splice(n,1)}add(t){this.views.findIndex(i=>i==t)===-1&&this.views.push(t)}get passive(){return this.views.filter(t=>!t.isActive)}get active(){const t=this.views.find(n=>n.isActive);if(t)return t}get size(){return this.views.length}forEach(t){this.views.forEach(t)}[Symbol.iterator](){return this.views[Symbol.iterator]()}}class O8{constructor(t){this.isActive=!1,this.linkTogetherWithOtherViews(t),this.onChangeListeners=new Set}linkTogetherWithOtherViews(t){this.falcon=t}onChange(t){return this.onChangeListeners.add(t),()=>this.onChangeListeners.delete(t)}addOnChangeListener(t){return this.onChange(t)}signalOnChange(t){this.onChangeListeners.forEach(n=>{n(t)})}markThisViewActive(){this.falcon.views.forEach(t=>{t.isActive=!1}),this.isActive=!0}}class C_ extends O8{constructor(t){super(t),this.state={total:null,filter:null}}async all(){const t=await this.falcon.db.length(this.falcon.filters.size>0?this.falcon.filters:void 0);return this.state.total=t,this.state.filter=t,this.signalOnChange(this.state),this}async countFromActiveContinuous1D(t){const n=await this.falcon.index.get(this);if(n===void 0)throw Error("Cannot count for undefined index in 0D");if(!t)this.state.filter=n.noFilter.get(0);else{const i=n.filter.get(t[0]),s=n.filter.get(t[1]);this.state.filter=s-i}this.signalOnChange(this.state)}async countFromActiveCategorical1D(t,n){const i=await this.falcon.index.get(this);if(i===void 0)throw Error("Cannot count for undefined index in 0D");if(t===void 0)this.state.filter=i.noFilter.get(0);else{const s=Cf(n);let l=0;for(const c of t){const d=s(c);d!==void 0&&(l+=i.filter.get(d))}this.state.filter=l}this.signalOnChange(this.state)}async attach(){this.falcon.views.add(this),await this.falcon.link()}async detach(){this.falcon.views.remove(this),this.falcon.index.delete(this)}}class Vc extends O8{constructor(t,n){super(t),this.dimension=n,this.state={total:null,filter:null,bin:null},this.toPixels=()=>[0,0]}async update(t){this.dimension=t,await this.falcon.link()}async createBins(){var t;if(((t=this.dimension)==null?void 0:t.range)===void 0&&(this.dimension.range=await this.falcon.db.range(this.dimension)),this.dimension.type==="continuous"){const n=this.dimension.binConfig!==void 0;if(n)this.dimension.range=[this.dimension.binConfig.start,this.dimension.binConfig.stop];else if(!n)this.dimension.bins=this.dimension.bins??await this.falcon.db.estimateNumBins(this.dimension,200,15),this.dimension.binConfig=Kie(this.dimension,this.dimension.range,this.dimension.exact??!1);else throw Error("Invalid bin config or bins not specified");const{start:i,stop:s}=this.dimension.binConfig;this.toPixels=Qie([i,s],this.dimension.resolution)}this.dimension.type==="continuous"?this.state.bin=Jie(this.dimension.binConfig):this.state.bin=this.dimension.range}async all(){await this.createBins();const t=await this.falcon.db.histogramView1D(this,this.falcon.filters.size>0?this.falcon.otherFilters(this):void 0);return this.state.total=t.noFilter.data,this.state.filter=t.filter.data,this.signalOnChange(this.state),this}async computeIndex(t=!1){(!this.isActive||t)&&(await this.falcon.views.forEach(async n=>{n instanceof Vc&&(!("range"in n.dimension)||n.dimension.type==="continuous"&&!("binConfig"in n.dimension))&&await n.all()}),this.markThisViewActive(),this.falcon.index=this.falcon.db.falconIndexView1D(this,this.falcon.views.passive,this.falcon.passiveFilters))}async activate(){await this.computeIndex()}async select(t,n=!1){if(t)if(this.dimension.type==="continuous"){if(this.lastFilter&&this.lastFilter[0]===t[0]&&this.lastFilter[1]===t[1]&&n===!1)return;this.falcon.filters.set(this.dimension,t);let s=this.toPixels(t);this.isActive&&this.falcon.views.passive.forEach(async l=>{await l.countFromActiveContinuous1D(s)}),this.lastFilter=t}else this.falcon.filters.set(this.dimension,t),this.isActive&&this.falcon.views.passive.forEach(async i=>{await i.countFromActiveCategorical1D(t,this.dimension.range)}),this.lastFilter=t;else if(this.isActive)if(this.dimension.type==="continuous"){if(this.lastFilter===t)return;this.falcon.filters.delete(this.dimension),this.falcon.views.passive.forEach(async s=>{await s.countFromActiveContinuous1D()}),this.lastFilter=t}else this.falcon.filters.delete(this.dimension),this.falcon.views.passive.forEach(async i=>{await i.countFromActiveCategorical1D()}),this.lastFilter=t}async countFromActiveContinuous1D(t){const n=await this.falcon.index.get(this);if(n===void 0)throw Error("Index not defined for 1D passive view");if(!t)this.state.filter=n.noFilter.data;else{const i=n.filter.slice(t[0],null),l=n.filter.slice(t[1],null).sub(i);this.state.filter=l.data}this.signalOnChange(this.state)}async countFromActiveCategorical1D(t,n){const i=await this.falcon.index.get(this);if(i===void 0)throw Error("Index not defined for 1D passive view");if(!t)this.state.filter=i.noFilter.data;else{let s;this.dimension.type==="continuous"?s=os.allocCounts(N_(this.dimension.binConfig)):s=os.allocCounts(this.dimension.range.length),s.data.fill(0);const l=Cf(n);for(const c of t){const d=l(c);if(d!==void 0){const f=i.filter.slice(d,null);s.addToItself(f)}}this.state.filter=s.data}this.signalOnChange(this.state)}async attach(){this.falcon.views.add(this),await this.falcon.link()}async detach(){this.falcon.views.remove(this),this.falcon.index.delete(this),this.isActive&&await this.falcon.link()}}class x2{constructor(t,n=64){this.blocking=!0,this.filterMaskIndex=new ose(n),this.data=t}static async fromArrowFile(t){const i=await(await fetch(t)).arrayBuffer(),s=EB(i);return new x2(s)}estimateNumBins(t,n=200,i=15){const s=this.data.getChild(t.name);if(s.length<=1)return 1;if(t.range){const l=Math.sqrt(rse(s)),[c,d]=t.range,f=mK(c,d,l);return Math.min(f,n)}return i}length(t){if(t){const n=xh(...this.getFilterMasks(t).values());let i=0;for(const s of n)s===!1&&i++;return i}else return this.data.numRows}range(t){const n=this.data.getChild(t.name);if(n!==null){if(t.type==="continuous")return sse(n);if(t.type==="categorical")return ise(n).filter(s=>s!==null);throw Error("Unsupported Dimension type for range")}else throw Error("Dimension name does not exist in arrow table")}dimensionExists(t){return this.data.getChild(t.name)!==null}tableExists(){return this.data&&this.data.numCols>0}async entries(t=0,n=1/0,i){const s=xh(...this.getFilterMasks(i??new Map).values());return new iJ(this.data.numRows,l=>this.data.get(l),s,t,n)}histogramView1D(t,n){let i,s,l,c;const d=xh(...this.getFilterMasks(n??new Map).values());if(t.dimension.type==="continuous"){const u=t.dimension.binConfig;c=N_(u),l=dw(u)}else if(t.dimension.type==="categorical")c=vm(t.dimension.range),l=Cf(t.dimension.range);else throw new Error("Unsupported dimension type for array allocation");s=os.allocCounts(c),i=d?os.allocCounts(c):s;const f=this.data.getChild(t.dimension.name);for(let u=0;u<this.data.numRows;u++){const a=f.get(u),m=l(a);0<=m&&m<c&&lf(a)&&(s.increment([m]),d&&!d.get(u)&&i.increment([m]))}return{noFilter:s,filter:i}}falconIndexView1D(t,n,i){const s=this.data.getChild(t.dimension.name),l=this.getFilterMasks(i),c=new Map;let d,f;if(t.dimension.type==="continuous"){const u=t.dimension.resolution,a=t.dimension.resolution+1;f=ese(t.dimension.binConfig,u),d=a}else if(t.dimension.type==="categorical")f=Cf(t.dimension.range),d=vm(t.dimension.range);else throw new Error("Unsupported dimension type for index1D");return t.dimension.type==="continuous"?n.forEach(u=>{const a=this.cubeSlice1DContinuous(u,s,l,d,f);c.set(u,a)}):n.forEach(u=>{const a=this.cubeSlice1DCategorical(u,s,l,d,f);c.set(u,a)}),c}excludeDimensionsFilterMasks(t,n){const i=new Map(n);return t instanceof C_||t instanceof Vc&&i.delete(t.dimension),i}cubeSlice1DCategorical(t,n,i,s,l){let c,d;const f=this.excludeDimensionsFilterMasks(t,i),u=xh(...f.values());if(t instanceof C_){d=os.allocCounts(s),c=os.allocCounts(1,[1]);for(let a=0;a<this.data.numRows;a++){if(u&&u.get(a))continue;const m=l(n.get(a));0<=m&&m<s&&d.increment([m]),c.increment([0])}}else if(t instanceof Vc){let a,m;if(t.dimension.type==="continuous"){const y=t.dimension.binConfig;a=dw(y),m=N_(y)}else a=Cf(t.dimension.range),m=vm(t.dimension.range);d=os.allocCounts(s*m,[s,m]),c=os.allocCounts(m,[m]);const w=this.data.getChild(t.dimension.name);for(let y=0;y<this.data.numRows;y++){if(u&&u.get(y))continue;const o=n.get(y),T=w.get(y),b=a(T),S=l(o);0<=b&&b<m&&lf(T)&&(0<=S&&S<s&&lf(o)&&d.increment([S,b]),c.increment([b]))}}else throw Error("Unsupported passive view type in cube computation");return{noFilter:c,filter:d}}cubeSlice1DContinuous(t,n,i,s,l){let c,d;const f=this.excludeDimensionsFilterMasks(t,i),u=xh(...f.values());if(t instanceof C_){d=os.allocCumulative(s),c=os.allocCounts(1,[1]);for(let a=0;a<this.data.numRows;a++){if(u&&u.get(a))continue;const m=n.get(a),w=l(m)+1;0<=w&&w<s&&lf(m)&&d.increment([w]),c.increment([0])}d.cumulativeSum()}else if(t instanceof Vc){let a,m;if(t.dimension.type==="continuous"){const y=t.dimension.binConfig;a=dw(y),m=N_(y)}else a=Cf(t.dimension.range),m=vm(t.dimension.range);d=os.allocCumulative(s*m,[s,m]),c=os.allocCounts(m,[m]);const w=this.data.getChild(t.dimension.name);for(let y=0;y<this.data.numRows;y++){if(u&&u.get(y))continue;const o=n.get(y),T=w.get(y),b=l(o)+1,S=a(T);0<=S&&S<m&&lf(T)&&(0<=b&&b<s&&lf(o)&&d.increment([b,S]),c.increment([S]))}for(let y=0;y<d.shape[1];y++)d.slice(null,y).cumulativeSum()}else throw Error("only 0D and 1D views");return{noFilter:c,filter:d}}getFilterMasks(t){if(!t.size)return new Map;const n=new Map;for(const[i,s]of t){let l;i.type==="continuous"?l=this.getContinuousFilterMask(i,s):l=this.getCategoricalFilterMask(i,s),n.set(i,l)}return n}getCategoricalFilterMask(t,n){const i=new Set(n),s=`${t.name} ${n}`;if(!this.filterMaskIndex.has(s)){const c=this.data.getChild(t.name),d=F3(c,f=>i.has(f));this.filterMaskIndex.set(s,d)}return this.filterMaskIndex.get(s)}getContinuousFilterMask(t,n){const i=`${t.name} ${n}`;if(!this.filterMaskIndex.has(i)){const l=this.data.getChild(t.name),c=F3(l,d=>d>n[0]&&d<=n[1]);this.filterMaskIndex.set(i,c)}return this.filterMaskIndex.get(i)}}function lf(e){return e!==null}function F3(e,t){const n=new D6(e.length);for(let i=0;i<e.length;i++){const s=e.get(i);t(s)||n.set(i,!0)}return n}function ise(e){const t=new Set;for(const n of e)t.add(n);return Array.from(t)}function sse(e){const t=e.get(0);let n=t,i=t;for(const s of e)s>n?n=s:s<i&&(i=s);return[Number(i),Number(n)]}function rse(e){let t=0,n=e.length,i=ase(e);for(const s of e)t+=(s-i)**2;return n>1?t/(n-1):t}function ase(e){let t=0,n=e.length;for(const i of e)t+=i;return t/n}class ose extends Map{constructor(t){super(),this.limit=t}set(t,n){return this.size>=this.limit&&this.delete(this.keys().next().value),super.set(t,n)}}var N8={exports:{}};const lse=TK(yK);(function(e,t){(function(i,s){e.exports=s(lse)})(bK,function(n){return(()=>{var i={2190:c=>{c.exports=function(f,u,a){if(f.filter)return f.filter(u,a);if(f==null)throw new TypeError;if(typeof u!="function")throw new TypeError;for(var m=[],w=0;w<f.length;w++)if(d.call(f,w)){var y=f[w];u.call(a,y,w,f)&&m.push(y)}return m};var d=Object.prototype.hasOwnProperty},6314:(c,d,f)=>{var u=f(2190);c.exports=function(){return u(["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],function(m){return typeof f.g[m]=="function"})}},7123:(c,d,f)=>{f.r(d),f.d(d,{DbCon:()=>Ft,default:()=>_e,Client:()=>b.Client,Processor:()=>b.Processor});var u=f(6729),a=f.n(u),m=f(2003),w=f(9539),y=f.n(w),o=f(2818),T=f(2607),b=f(4221),S=f(9262),x=f(5141),k=f(2033),A={};for(const q in o)["default","DbCon","Client","Processor"].indexOf(q)<0&&(A[q]=()=>o[q]);f.d(d,A);var I=f(4494),A={};for(const q in I)["default","DbCon","Client","Processor"].indexOf(q)<0&&(A[q]=()=>I[q]);f.d(d,A);var B=f(1396),A={};for(const q in B)["default","DbCon","Client","Processor"].indexOf(q)<0&&(A[q]=()=>B[q]);f.d(d,A);var A={};for(const q in T)["default","DbCon","Client","Processor"].indexOf(q)<0&&(A[q]=()=>T[q]);f.d(d,A);var O=f(3962),A={};for(const q in O)["default","DbCon","Client","Processor"].indexOf(q)<0&&(A[q]=()=>O[q]);f.d(d,A);var R=f(8764).Buffer;function P(q,j){var L=Object.keys(q);if(Object.getOwnPropertySymbols){var K=Object.getOwnPropertySymbols(q);j&&(K=K.filter(function(Q){return Object.getOwnPropertyDescriptor(q,Q).enumerable})),L.push.apply(L,K)}return L}function D(q){for(var j=1;j<arguments.length;j++){var L=arguments[j]!=null?arguments[j]:{};j%2?P(Object(L),!0).forEach(function(K){ne(q,K,L[K])}):Object.getOwnPropertyDescriptors?Object.defineProperties(q,Object.getOwnPropertyDescriptors(L)):P(Object(L)).forEach(function(K){Object.defineProperty(q,K,Object.getOwnPropertyDescriptor(L,K))})}return q}function U(q){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?U=function(L){return typeof L}:U=function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},U(q)}function Y(q,j){return J(q)||V(q,j)||W(q,j)||z()}function z(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W(q,j){if(q){if(typeof q=="string")return H(q,j);var L=Object.prototype.toString.call(q).slice(8,-1);if(L==="Object"&&q.constructor&&(L=q.constructor.name),L==="Map"||L==="Set")return Array.from(q);if(L==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(L))return H(q,j)}}function H(q,j){(j==null||j>q.length)&&(j=q.length);for(var L=0,K=new Array(j);L<j;L++)K[L]=q[L];return K}function V(q,j){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(q)))){var L=[],K=!0,Q=!1,ae=void 0;try{for(var se=q[Symbol.iterator](),ge;!(K=(ge=se.next()).done)&&(L.push(ge.value),!(j&&L.length===j));K=!0);}catch(Ee){Q=!0,ae=Ee}finally{try{!K&&se.return!=null&&se.return()}finally{if(Q)throw ae}}return L}}function J(q){if(Array.isArray(q))return q}function G(q,j){if(!(q instanceof j))throw new TypeError("Cannot call a class as a function")}function oe(q,j){for(var L=0;L<j.length;L++){var K=j[L];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(q,K.key,K)}}function he(q,j,L){return j&&oe(q.prototype,j),L&&oe(q,L),q}function ne(q,j,L){return j in q?Object.defineProperty(q,j,{value:L,enumerable:!0,configurable:!0,writable:!0}):q[j]=L,q}var Fe=3;function de(q){return Array.isArray(q)?q:[q]}function ke(q,j,L){var K=this;S.XHRConnection.call(this,q,j,L),L.headers["Content-Type"]==="application/vnd.apache.thrift.binary"&&(this.flush=function(){if(K.url===void 0||K.url==="")return K.send_buf;var Q=K.getXmlHttpRequestObject();Q.responseType="arraybuffer",Q.onreadystatechange=function(){Q.readyState===4&&Q.status===200&&K.setRecvBuffer(Q.response)},Q.open("POST",K.url,!0),Object.keys(K.headers).forEach(function(ae){Q.setRequestHeader(ae,K.headers[ae])}),Q.send(K.send_buf)})}y().inherits(ke,S.XHRConnection),ke.prototype.getXmlHttpRequestObject=function(){var q=S.XHRConnection.prototype.getXmlHttpRequestObject.call(this);return q.withCredentials=ke.withCredentials,q};function Ue(){for(var q=arguments.length,j=new Array(q),L=0;L<q;L++)j[L]=arguments[L];S.TJSONProtocol.apply(this,j)}y().inherits(Ue,S.TJSONProtocol),Ue.prototype.writeString=function(q){return q instanceof R||(q=String(q)),S.TJSONProtocol.prototype.writeString.call(this,q)},Ue.prototype.readI64=function(){var q=S.TJSONProtocol.prototype.readI64.call(this);return q.toNumber(!0)},Ue.prototype.readBinary=function(){return S.TJSONProtocol.prototype.readString.call(this)};function at(){for(var q=arguments.length,j=new Array(q),L=0;L<q;L++)j[L]=arguments[L];S.TBinaryProtocol.apply(this,j)}y().inherits(at,S.TBinaryProtocol),at.prototype.writeString=function(q){return q instanceof R||(q=String(q)),S.TBinaryProtocol.prototype.writeString.call(this,q)},at.prototype.readI64=function(){var q=S.TBinaryProtocol.prototype.readI64.call(this);return q.toNumber(!0)},at.prototype.readBinary=function(){return S.TBinaryProtocol.prototype.readBinary.call(this).toString("base64")};function Tt(q,j){var L=new URL(q),K=L.protocol,Q=L.hostname,ae=L.port;ae===""&&(ae=K==="https:"?"443":"80");var se=null;{var ge=new ke(Q,ae,{transport:S.TBufferedTransport,protocol:j?at:Ue,path:"/",headers:{"Content-Type":"application/vnd.apache.thrift.".concat(j?"binary":"json")},https:K==="https:"});ge.on("error",console.error),se=(0,S.createXHRClient)(b,ge)}return se}var Ft=function(){function q(){var j=this;return G(this,q),ne(this,"updateQueryTimes",function(L,K,Q,ae){j.queryTimes[K]=ae}),ne(this,"events",new(a())),ne(this,"EVENT_NAMES",{ERROR:"error",METHOD_CALLED:"method-called"}),ne(this,"handleErrors",function(L){return function(){for(var K=arguments.length,Q=new Array(K),ae=0;ae<K;ae++)Q[ae]=arguments[ae];return L.apply(j,Q).catch(function(se){throw j.events.emit(j.EVENT_NAMES.ERROR,se),se})}}),ne(this,"callbackify",function(L,K){return function(){for(var Q=null,ae=arguments.length,se=new Array(ae),ge=0;ge<ae;ge++)se[ge]=arguments[ge];se.length===K+1&&(Q=se.pop());var Ee=j[L].apply(j,se);return Q&&Ee.catch(function(Ve){return Q(Ve)}).then(function(Ve){return Q(null,Ve)}),Ee}}),ne(this,"overSingleClient","SINGLE_CLIENT"),ne(this,"overAllClients","ALL_CLIENTS"),ne(this,"wrapThrift",function(L,K,Q){return function(){if(j._sessionId){for(var ae=arguments.length,se=new Array(ae),ge=0;ge<ae;ge++)se[ge]=arguments[ge];var Ee=Q(se);return j.events.emit(j.EVENT_NAMES.METHOD_CALLED,L),K===j.overSingleClient?j._client[0][L].apply(j._client[0],[j._sessionId[0]].concat(Ee)):Promise.all(j._client.map(function(Ve,Vt){return Ve[L].apply(Ve,[j._sessionId[Vt]].concat(Ee))}))}else return Promise.reject(new Error("You are not connected to a server. Try running the connect method first."))}}),ne(this,"connect",this.callbackify("connectAsync",0)),ne(this,"disconnectAsync",this.handleErrors(function(){return Promise.all(j._client.map(function(L,K){return L.disconnect(j._sessionId[K]).catch(function(Q){if(Q&&!j.isTimeoutError(Q))throw Q})})).then(function(){return j._sessionId=null,j._client=null,j._numConnections=0,j.serverPingTimes=null,j})})),ne(this,"disconnect",this.callbackify("disconnectAsync",0)),ne(this,"getStatusAsync",this.handleErrors(this.wrapThrift("get_status",this.overSingleClient,function(L){return L}))),ne(this,"getStatus",this.callbackify("getStatusAsync",0)),ne(this,"getHardwareInfoAsync",this.handleErrors(this.wrapThrift("get_hardware_info",this.overSingleClient,function(L){return L}))),ne(this,"getHardwareInfo",this.callbackify("getHardwareInfoAsync",0)),ne(this,"getFirstGeoFileInArchiveAsync",this.handleErrors(this.wrapThrift("get_first_geo_file_in_archive",this.overSingleClient,function(L){return L}))),ne(this,"getFilesInArchiveAsync",this.handleErrors(this.wrapThrift("get_all_files_in_archive",this.overSingleClient,function(L){return L}))),ne(this,"getUsersAsync",this.handleErrors(this.wrapThrift("get_users",this.overSingleClient,function(L){return L}))),ne(this,"importTableStatusAsync",this.handleErrors(this.wrapThrift("import_table_status",this.overSingleClient,function(L){return L}))),ne(this,"getRolesAsync",this.handleErrors(this.wrapThrift("get_roles",this.overSingleClient,function(L){return L}))),ne(this,"getDashboardsAsync",this.handleErrors(this.wrapThrift("get_dashboards",this.overSingleClient,function(L){return L}))),ne(this,"getDashboardAsync",this.handleErrors(this.wrapThrift("get_dashboard",this.overSingleClient,function(L){return L}))),ne(this,"createDashboardAsync",this.handleErrors(this.wrapThrift("create_dashboard",this.overAllClients,function(L){return L}))),ne(this,"replaceDashboardAsync",this.handleErrors(this.wrapThrift("replace_dashboard",this.overAllClients,function(L){return L}))),ne(this,"deleteDashboardAsync",this.handleErrors(this.wrapThrift("delete_dashboard",this.overAllClients,function(L){return L}))),ne(this,"deleteDashboardsAsync",this.handleErrors(this.wrapThrift("delete_dashboards",this.overAllClients,function(L){return L}))),ne(this,"shareDashboardAsync",this.handleErrors(this.wrapThrift("share_dashboard",this.overAllClients,function(L){var K=Y(L,4),Q=K[0],ae=K[1],se=K[2],ge=K[3];return[Q,ae,se,new T.TDashboardPermissions(ge)]}))),ne(this,"shareDashboardsAsync",this.handleErrors(this.wrapThrift("share_dashboards",this.overAllClients,function(L){var K=Y(L,3),Q=K[0],ae=K[1],se=K[2];return[Q,ae,new T.TDashboardPermissions(se)]}))),ne(this,"unshareDashboardAsync",this.handleErrors(this.wrapThrift("unshare_dashboard",this.overAllClients,function(L){var K=Y(L,4),Q=K[0],ae=K[1],se=K[2],ge=K[3];return[Q,ae,se,new T.TDashboardPermissions(ge)]}))),ne(this,"unshareDashboardsAsync",this.handleErrors(this.wrapThrift("unshare_dashboards",this.overAllClients,function(L){var K=Y(L,3),Q=K[0],ae=K[1],se=K[2];return[Q,ae,new T.TDashboardPermissions(se)]}))),ne(this,"getDashboardGranteesAsync",this.handleErrors(this.wrapThrift("get_dashboard_grantees",this.overSingleClient,function(L){return L}))),ne(this,"getDbObjectsForGranteeAsync",this.handleErrors(this.wrapThrift("get_db_objects_for_grantee",this.overSingleClient,function(L){return L}))),ne(this,"getDbObjectPrivsAsync",this.handleErrors(this.wrapThrift("get_db_object_privs",this.overSingleClient,function(L){var K=Y(L,2),Q=K[0],ae=K[1];return[Q,T.TDBObjectType[ae]]}))),ne(this,"getAllRolesForUserAsync",this.handleErrors(this.wrapThrift("get_all_roles_for_user",this.overSingleClient,function(L){return L}))),ne(this,"getAllEffectiveRolesForUserAsync",this.handleErrors(this.wrapThrift("get_all_effective_roles_for_user",this.overSingleClient,function(L){return L}))),ne(this,"hasObjectPrivilegesAsync",this.handleErrors(this.wrapThrift("has_object_privilege",this.overSingleClient,function(L){return L}))),ne(this,"hasDbPrivilegesAsync",function(L,K,Q){return j.hasObjectPrivilegesAsync(L,K,T.TDBObjectType.DatabaseDBObjectType,new T.TDBObjectPermissions({database_permissions_:new T.TDatabasePermissions(Q)}))}),ne(this,"getSessionInfoAsync",this.handleErrors(this.wrapThrift("get_session_info",this.overSingleClient,function(L){return L}))),ne(this,"createCustomExpressionAsync",this.handleErrors(this.wrapThrift("create_custom_expression",this.overSingleClient,function(L){return L}))),ne(this,"getCustomExpressionsAsync",this.handleErrors(this.wrapThrift("get_custom_expressions",this.overSingleClient,function(L){return L}))),ne(this,"updateCustomExpressionAsync",this.handleErrors(this.wrapThrift("update_custom_expression",this.overSingleClient,function(L){return L}))),ne(this,"deleteCustomExpressionsAsync",this.handleErrors(this.wrapThrift("delete_custom_expressions",this.overSingleClient,function(L){return L}))),ne(this,"detectColumnTypesAsync",this.handleErrors(function(L,K){var Q=j.wrapThrift("detect_column_types",j.overSingleClient,function(){return[L,k.Dq(K)]});return Q().then(function(ae){return j.importerRowDesc=ae.row_set.row_desc,ae})})),ne(this,"queryAsync",this.handleErrors(function(L,K){var Q=!0,ae=!1,se=null,ge=!1,Ee=-1,Ve=(j._nonce++).toString();K&&(Q=K.hasOwnProperty("columnarResults")?K.columnarResults:Q,ae=K.hasOwnProperty("eliminateNullRows")?K.eliminateNullRows:ae,se=K.hasOwnProperty("queryId")?K.queryId:se,ge=K.hasOwnProperty("returnTiming")?K.returnTiming:ge,Ee=K.hasOwnProperty("limit")?K.limit:Ee,Ve=K.hasOwnProperty("logValues")?U(K.logValues)==="object"?JSON.stringify(K.logValues):K.logValues:Ve);var Vt=se in j.queryTimes?j.queryTimes[se]:j.DEFAULT_QUERY_TIME,nn=0,Lt={returnTiming:ge,eliminateNullRows:ae,query:L,queryId:se,conId:nn,estimatedQueryTime:Vt,startTime:Date.now()},is=-1,vs=j.wrapThrift("sql_execute",j.overSingleClient,function(ue){return ue}),Ss=function ue(){return vs(L,Q,Ve,Ee,is).catch(function(Mi){if(Mi.name==="NetworkError"){if(j.removeConnection(0),j._numConnections===0)throw Mi.msg="No remaining database connections",Mi;return ue()}throw Mi})};return j.processResults(Lt,Ss())})),ne(this,"query",this.callbackify("queryAsync",2)),ne(this,"queryDFAsync",this.handleErrors(function(L,K){var Q=0,ae=-1,se=j.wrapThrift("sql_execute_df",j.overSingleClient,function(){return[L,o.TDeviceType.CPU,Q,ae,T.TArrowTransport.WIRE]});return se().then(function(ge){j._logging&&console.log(L,"on Server",0,"- Execution Time:",ge.execution_time_ms,"ms");var Ee=R.from(ge.df_buffer,"base64"),Ve=(0,m.tableFromIPC)(Ee);return K&&K.returnTiming&&(Ve={results:Ve,timing:{execution_time_ms:ge.execution_time_ms}}),Ve})})),ne(this,"queryDF",this.callbackify("queryDFAsync",2)),ne(this,"validateQuery",this.handleErrors(function(L){var K=j.wrapThrift("sql_validate",j.overSingleClient,function(Q){return Q});return K(L).then(function(Q){var ae=Q.reduce(function(se,ge){return se[ge.col_name]=ge,se},{});return j.convertFromThriftTypes(ae)})})),ne(this,"getTablesAsync",this.handleErrors(function(){var L=j.wrapThrift("get_tables",j.overSingleClient,function(K){return K});return L().then(function(K){return K.map(function(Q){return{name:Q,label:"obs"}})})})),ne(this,"getTables",this.callbackify("getTablesAsync",0)),ne(this,"getTablesWithMetaAsync",this.handleErrors(function(){var L=j.wrapThrift("get_tables_meta",j.overSingleClient,function(K){return K});return L().then(function(K){return K.map(function(Q){return{name:Q.table_name,num_cols:Number(Q.num_cols.toString()),col_datum_types:Q.col_types.map(function(ae){return j._datumEnum[ae.type]}),is_view:Q.is_view,is_replicated:Q.is_replicated,shard_count:Number(Q.shard_count.toString()),max_rows:isFinite(Q.max_rows)?Number(Q.max_rows.toString()):-1}})})})),ne(this,"getTablesWithMeta",this.callbackify("getTablesWithMetaAsync",0)),ne(this,"getTablesMetaAsync",this.handleErrors(this.wrapThrift("get_tables_meta",this.overSingleClient,function(L){return L}))),ne(this,"getTablesMeta",this.callbackify("getTablesMetaAsync",0)),ne(this,"getTableEpochByNameAsync",this.handleErrors(this.wrapThrift("get_table_epoch_by_name",this.overSingleClient,function(L){return L}))),ne(this,"getTableEpochByName",this.callbackify("getTableEpochByNameAsync",0)),ne(this,"getTableFunctionNamesAsync",this.handleErrors(this.wrapThrift("get_table_function_names",this.overSingleClient,function(L){return L}))),ne(this,"getTableFunctionNames",this.callbackify("getTableFunctionNamesAsync",0)),ne(this,"getRuntimeTableFunctionNamesAsync",this.handleErrors(this.wrapThrift("get_runtime_table_function_names",this.overSingleClient,function(L){return L}))),ne(this,"getRuntimeTableFunctionNames",this.callbackify("getRuntimeTableFunctionNamesAsync",0)),ne(this,"getTableFunctionDetailsAsync",this.handleErrors(this.wrapThrift("get_table_function_details",this.overSingleClient,function(L){return L}))),ne(this,"getTableFunctionDetails",this.callbackify("getTableFunctionDetailsAsync",0)),ne(this,"getCompletionHintsAsync",this.handleErrors(this.wrapThrift("get_completion_hints",this.overSingleClient,function(L){var K=Y(L,2),Q=K[0],ae=K[1].cursor;return[Q,ae]}))),ne(this,"getCompletionHints",this.callbackify("getCompletionHintsAsync",2)),ne(this,"buildTFileTypeMap",function(){for(var L in T.TFileType)T.TFileType.hasOwnProperty(L)&&(j.TFileTypeMap[T.TFileType[L]]=L)}),ne(this,"buildTImportHeaderRowMap",function(){for(var L in T.TImportHeaderRow)T.TImportHeaderRow.hasOwnProperty(L)&&(j.TImportHeaderRowMap[T.TImportHeaderRow[L]]=L)}),ne(this,"buildTEncodingTypeMap",function(){for(var L in o.TEncodingType)o.TEncodingType.hasOwnProperty(L)&&(j.TEncodingTypeMap[o.TEncodingType[L]]=L)}),ne(this,"buildTRasterPointTypeMap",function(){for(var L in T.TRasterPointType)T.TRasterPointType.hasOwnProperty(L)&&(j.TRasterPointTypeMap[T.TRasterPointType[L]]=L)}),ne(this,"buildTRasterPointTransformMap",function(){for(var L in T.TRasterPointTransform)T.TRasterPointTransform.hasOwnProperty(L)&&(j.TRasterPointTransformMap[T.TRasterPointTransform[L]]=L)}),ne(this,"buildTSourceTypeMap",function(){for(var L in T.TSourceType)T.TSourceType.hasOwnProperty(L)&&(j.TSourceTypeMap[T.TSourceType[L]]=L)}),ne(this,"getFieldsAsync",this.handleErrors(function(L){var K=j.wrapThrift("get_table_details",j.overSingleClient,function(Q){return Q});return K(L).then(function(Q){if(Q){var ae=Q.row_desc.reduce(function(se,ge){return se[ge.col_name]=ge,se},{});return D(D({},Q),{},{columns:j.convertFromThriftTypes(ae)})}else throw new Error("Table (".concat(L,") not found"))})})),ne(this,"getFields",this.callbackify("getFieldsAsync",1)),ne(this,"createTableAsync",this.handleErrors(this.wrapThrift("create_table",this.overAllClients,function(L){var K=Y(L,3),Q=K[0],ae=K[1],se=K[2];return[Q,k.HP(ae,j.importerRowDesc),se]}))),ne(this,"createTable",this.callbackify("createTableAsync",4)),ne(this,"importTableAsync",this.handleErrors(this.wrapThrift("import_table",this.overAllClients,function(L){var K=Y(L,3),Q=K[0],ae=K[1],se=K[2];return[Q,ae,k.Dq(se)]}))),ne(this,"importTableGeoAsync",this.handleErrors(this.wrapThrift("import_geo_table",this.overAllClients,function(L){var K=Y(L,4),Q=K[0],ae=K[1],se=K[2],ge=K[3];return[Q,ae,k.Dq(se),k.HP(ge,j.importerRowDesc),new T.TCreateParams]}))),ne(this,"renderVegaAsync",this.handleErrors(function(L,K,Q){var ae=null,se=Fe;Q&&(ae=Q.hasOwnProperty("queryId")?Q.queryId:ae,se=Q.hasOwnProperty("compressionLevel")?Q.compressionLevel:se);var ge=ae in j.queryTimes?j.queryTimes[ae]:j.DEFAULT_QUERY_TIME,Ee=(j._nonce++).toString();Q&&(Ee=Q.hasOwnProperty("logValues")?U(Q.logValues)==="object"?JSON.stringify(Q.logValues):Q.logValues:Ee);var Ve=0;j._lastRenderCon=Ve;var Vt={isImage:!0,query:"render: ".concat(K),queryId:ae,conId:Ve,estimatedQueryTime:ge},nn=j.wrapThrift("render_vega",j.overSingleClient,function(Lt){return Lt});return j.processResults(Vt,nn(L,K,se,Ee))})),ne(this,"renderVega",this.callbackify("renderVegaAsync",3)),ne(this,"getResultRowForPixelAsync",this.handleErrors(function(L,K,Q){var ae=arguments.length>3&&arguments[3]!==void 0?arguments[3]:2;K instanceof T.TPixel||(K=new T.TPixel(K));var se=!0,ge=(j._nonce++).toString();return j._client[j._lastRenderCon].get_result_row_for_pixel(j._sessionId[j._lastRenderCon],L,K,Q,se,ae,ge).then(function(Ee){Ee=Array.isArray(Ee)?Ee.pixel_rows:[Ee];for(var Ve={isImage:!1,eliminateNullRows:!1,query:"pixel request",queryId:-2},Vt=(0,x.Z)(j._logging,j.updateQueryTimes),nn=Ee.length,Lt=0;Lt<nn;Lt++)Ee[Lt].row_set=Vt(Ve,j._datumEnum,Ee[Lt]);return Ee})})),ne(this,"getResultRowForPixel",this.callbackify("getResultRowForPixelAsync",4)),this._useBinaryProtocol=!1,this._host=null,this._user=null,this._password=null,this._port=null,this._dbName=null,this._client=null,this._sessionId=null,this._protocol=null,this._disableAutoReconnect=!1,this._datumEnum={},this.TFileTypeMap={},this.TEncodingTypeMap={},this.TImportHeaderRowMap={},this.TRasterPointTypeMap={},this.TRasterPointTransformMap={},this.TSourceTypeMap={},this._logging=!1,this._platform="heavydb",this._nonce=0,this._balanceStrategy="adaptive",this._numConnections=0,this._lastRenderCon=0,this.queryTimes={},this.serverQueueTimes=null,this.serverPingTimes=null,this.pingCount=null,this.DEFAULT_QUERY_TIME=50,this.NUM_PINGS_PER_SERVER=4,this.importerRowDesc=null,this.invertDatumTypes(),this.buildTFileTypeMap(),this.buildTEncodingTypeMap(),this.buildTImportHeaderRowMap(),this.buildTRasterPointTypeMap(),this.buildTRasterPointTransformMap(),this.buildTSourceTypeMap(),this.processResults=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},K=arguments.length>1?arguments[1]:void 0;return K.catch(function(Q){throw j._logging&&L.query&&console.error(L.query,`
`,Q),Q}).then(function(Q){var ae=(0,x.Z)(j._logging,j.updateQueryTimes),se=ae(L,j._datumEnum,Q);return se})},this}return he(q,[{key:"removeConnection",value:function(L){if(L<0||L>=this.numConnections){var K={msg:"Remove connection id invalid"};throw K}this._client.splice(L,1),this._sessionId.splice(L,1),this._numConnections--}},{key:"xhrWithCredentials",value:function(L){ke.withCredentials=!!L}},{key:"initClients",value:function(){var L=Array.isArray(this._host)&&Array.isArray(this._port)&&Array.isArray(this._dbName);if(!L)throw new Error("Host, port, and dbName must be arrays.");if(this._client=[],this._sessionId=[],this._host[0]){if(!this._port[0])throw new Error("Please enter a port.")}else throw new Error("Please enter a host name.");var K=this._host.length;if(K<1)throw new Error("Must have at least one server to connect to.");if(K!==this._port.length)throw new Error("Array connection parameters must be of equal length.");this._protocol||(this._protocol=this._host.map(function(){return window.location.protocol.replace(":","")}));for(var Q=this.getEndpoints(),ae=[],se=0;se<K;se++){var ge=Tt(Q[se],this._useBinaryProtocol);ae.push(ge)}return this._client=ae,this._numConnections=this._client.length,this}},{key:"connectAsync",value:function(){var L=this;if(!Array.isArray(this._user)||!Array.isArray(this._password))return Promise.reject("Username and password must be arrays.");if(this._dbName[0])if(this._user[0]){if(!this._password[0])return Promise.reject("Please enter a password.")}else return Promise.reject("Please enter a username.");else return Promise.reject("Please enter a database.");var K=this._host.length;if(K<1)return Promise.reject("Must have at least one server to connect to.");if(K!==this._port.length||K!==this._user.length||K!==this._password.length||K!==this._dbName.length)return Promise.reject("Array connection parameters must be of equal length.");var Q=[];return this.initClients(),Q=this._client,this._client=[],Promise.all(Q.map(function(ae,se){return ae.connect(L._user[se],L._password[se],L._dbName[se]).then(function(ge){return L._client.push(ae),L._sessionId.push(ge),null})})).then(function(){return L})}},{key:"convertFromThriftTypes",value:function(L){var K=[];for(var Q in L)L.hasOwnProperty(Q)&&K.push({name:Q,type:this._datumEnum[L[Q].col_type.type],precision:L[Q].col_type.precision,is_array:L[Q].col_type.is_array,is_dict:L[Q].col_type.encoding===o.TEncodingType.DICT});return K}},{key:"invertDatumTypes",value:function(){var L=o.TDatumType;for(var K in L)L.hasOwnProperty(K)&&(this._datumEnum[L[K]]=K)}},{key:"importTableAsyncWrapper",value:function(L){return L?this.importTableGeoAsync.bind(this):this.importTableAsync.bind(this)}},{key:"importTable",value:function(L,K,Q,ae,se,ge){if(se){var Ee=this.callbackify("importTableGeoAsync",4);return Ee(L,K,Q,ae,ge)}else{var Ve=this.callbackify("importTableAsync",3);return Ve(L,K,Q,ge)}}},{key:"sessionId",value:function(L){return arguments.length?(this._sessionId=de(L),this):this._sessionId}},{key:"useBinaryProtocol",value:function(L){return arguments.length?(this._useBinaryProtocol=!!L,this):this._useBinaryProtocol}},{key:"host",value:function(L){return arguments.length?(this._host=de(L),this):this._host}},{key:"port",value:function(L){return arguments.length?(this._port=de(L),this):this._port}},{key:"user",value:function(L){return arguments.length?(this._user=de(L),this):this._user}},{key:"password",value:function(L){return arguments.length?(this._password=de(L),this):this._password}},{key:"dbName",value:function(L){return arguments.length?(this._dbName=de(L),this):this._dbName}},{key:"logging",value:function(L){if(typeof L>"u")return this._logging;if(typeof L!="boolean")return"logging can only be set with boolean values";this._logging=L;var K=L?"enabled":"disabled";return"SQL logging is now ".concat(K)}},{key:"platform",value:function(L){return arguments.length?(this._platform=L,this):this._platform}},{key:"numConnections",value:function(){return this._numConnections}},{key:"protocol",value:function(L){return arguments.length?(this._protocol=de(L),this):this._protocol}},{key:"disableAutoReconnect",value:function(L){return arguments.length?(this._disableAutoReconnect=L,this):this._disableAutoReconnect}},{key:"getEndpoints",value:function(){var L=this;return this._host.map(function(K,Q){return"".concat(L._protocol[Q],"://").concat(K,":").concat(L._port[Q])})}},{key:"setLicenseKey",value:function(L,K){var Q=K.protocol,ae=K.host,se=K.port,ge=Array.isArray(this._client)&&this._client[0],Ee=this._sessionId&&this._sessionId[0];if(!ge){var Ve="".concat(Q,"://").concat(ae,":").concat(se);ge=Tt(Ve,this._useBinaryProtocol),Ee=""}return ge.set_license_key(Ee,L,this._nonce++)}},{key:"getLicenseClaims",value:function(L){var K=L.protocol,Q=L.host,ae=L.port,se=Array.isArray(this._client)&&this._client[0],ge=this._sessionId&&this._sessionId[0];if(!se){var Ee="".concat(K,"://").concat(Q,":").concat(ae);se=Tt(Ee,this._useBinaryProtocol),ge=""}return se.get_license_claims(ge,this._nonce++)}},{key:"isTimeoutError",value:function(L){return L instanceof T.TDBException&&(String(L.error_msg).indexOf("Session not valid.")!==-1||String(L.error_msg).indexOf("User should re-authenticate.")!==-1)}}]),q}();const _e=Ft},2033:(c,d,f)=>{f.d(d,{Dq:()=>a,HP:()=>m,RK:()=>w,kS:()=>y});var u=f(2607),a=function(T){return new u.TCopyParams(T)},m=function(T,b){return T.forEach(function(S,x){b[x].col_name=S.clean_col_name,b[x].col_type.encoding=S.col_type.encoding,b[x].col_type.precision=S.col_type.precision,b[x].col_type.comp_param=S.col_type.comp_param,b[x].col_type.scale=S.col_type.scale,b[x].col_type.type=S.col_type.type}),b};function w(o,T){var b=Math.pow(10,T-3),S=o/b;return S}function y(o){return o.toNumber?!!o.toNumber(!0):!!o}},5141:(c,d,f)=>{f.d(d,{Z:()=>w});var u=f(2033);function a(y,o,T){var b={fields:[],results:[]},S=y.row_desc.length,x=typeof y.columns[0]>"u"?0:y.columns[0].nulls.length;b.fields=y.row_desc.map(function(J){return{name:J.col_name,type:T[J.col_type.type],is_array:J.col_type.is_array}});for(var k=0;k<x;k++){if(o){for(var I=!1,B=0;B<S;B++)if(y.columns[B].nulls[k]){I=!0;break}if(I)continue}for(var O={},A=0;A<S;A++){var R=b.fields[A].name,P=b.fields[A].type,D=b.fields[A].is_array,U=y.columns[A].nulls[k],Y=y.row_desc[A].col_type.precision;if(U){O[R]=null;continue}if(D){O[R]=[];for(var z=y.columns[A].data.arr_col[k].nulls.length,W=0;W<z;W++){if(y.columns[A].data.arr_col[k].nulls[W]){O[R].push("NULL");continue}switch(P){case"BOOL":O[R].push((0,u.kS)(y.columns[A].data.arr_col[k].data.int_col[W]));break;case"SMALLINT":case"INT":case"BIGINT":case"TINYINT":O[R].push(y.columns[A].data.arr_col[k].data.int_col[W]);break;case"FLOAT":case"DOUBLE":case"DECIMAL":O[R].push(y.columns[A].data.arr_col[k].data.real_col[W]);break;case"STR":O[R].push(y.columns[A].data.arr_col[k].data.str_col[W]);break;case"TIME":case"TIMESTAMP":case"DATE":var H=(0,u.RK)(y.columns[A].data.int_col[k],Y);O[R].push(H);break;default:throw new Error("Unrecognized array field type: ".concat(P))}}}else switch(P){case"BOOL":O[R]=(0,u.kS)(y.columns[A].data.int_col[k]);break;case"SMALLINT":case"INT":case"BIGINT":case"TINYINT":O[R]=y.columns[A].data.int_col[k];break;case"FLOAT":case"DOUBLE":case"DECIMAL":O[R]=y.columns[A].data.real_col[k];break;case"STR":O[R]=y.columns[A].data.str_col[k];break;case"TIME":case"TIMESTAMP":case"DATE":var V=(0,u.RK)(y.columns[A].data.int_col[k],Y);O[R]=new Date(V);break;case"POINT":case"LINESTRING":case"POLYGON":case"MULTIPOLYGON":O[R]=y.columns[A].data.str_col[k];break;default:throw new Error("Unrecognized field type: ".concat(P))}}b.results.push(O)}return b}function m(y,o,T){var b=y.row_desc.length,S={fields:[],results:[]};S.fields=y.row_desc.map(function(G){return{name:G.col_name,type:T[G.col_type.type],is_array:G.col_type.is_array}}),S.results=[];var x=0;typeof y.rows<"u"&&y.rows!==null&&(x=y.rows.length);for(var k=0;k<x;k++){if(o){for(var I=!1,B=0;B<b;B++)if(y.rows[k].columns[B].is_null){I=!0;break}if(I)continue}for(var O={},A=0;A<b;A++){var R=S.fields[A].name,P=S.fields[A].type,D=S.fields[A].is_array,U=y.row_desc[A].col_type.precision;if(D){if(y.rows[k].cols[A].is_null){O[R]="NULL";continue}O[R]=[];for(var Y=y.rows[k].cols[A].val.arr_val.length,z=0;z<Y;z++){var W=y.rows[k].cols[A].val.arr_val[z];if(W.is_null){O[R].push("NULL");continue}switch(P){case"BOOL":O[R].push((0,u.kS)(W.val.int_val));break;case"SMALLINT":case"INT":case"BIGINT":case"TINYINT":O[R].push(W.val.int_val);break;case"FLOAT":case"DOUBLE":case"DECIMAL":O[R].push(W.val.real_val);break;case"STR":O[R].push(W.val.str_val);break;case"TIME":case"TIMESTAMP":case"DATE":var H=(0,u.RK)(W.val.int_val,U);O[R].push(H);break;default:throw new Error("Unrecognized array field type: ".concat(P))}}}else{var V=y.rows[k].cols[A];if(V.is_null){O[R]="NULL";continue}switch(P){case"BOOL":O[R]=(0,u.kS)(V.val.int_val);break;case"SMALLINT":case"INT":case"BIGINT":case"TINYINT":O[R]=V.val.int_val;break;case"FLOAT":case"DOUBLE":case"DECIMAL":O[R]=V.val.real_val;break;case"STR":O[R]=V.val.str_val;break;case"TIME":case"TIMESTAMP":case"DATE":var J=(0,u.RK)(V.val.int_val,U);O[R]=new Date(J);break;case"POINT":case"LINESTRING":case"POLYGON":case"MULTIPOLYGON":O[R]=V.val.str_val;break;default:throw new Error("Unrecognized field type: ".concat(P))}}}S.results.push(O)}return S}function w(y,o){return function(T,b,S){var x=!1,k=!1,I=null,B=null,O=null,A=null;if(typeof T<"u"&&(x=T.isImage?T.isImage:!1,k=T.eliminateNullRows?T.eliminateNullRows:!1,I=T.query?T.query:null,B=T.queryId?T.queryId:null,O=typeof T.conId>"u"?null:T.conId,A=typeof T.estimatedQueryTime>"u"?null:T.estimatedQueryTime),S.execution_time_ms&&O!==null&&A!==null&&o(O,B,A,S.execution_time_ms),y&&S.execution_time_ms&&console.log(I,"on Server",O,"- Execution Time:",S.execution_time_ms,"ms, Total Time:",S.total_time_ms,"ms, Real Time:",T.startTime?Date.now()-T.startTime:void 0,"ms"),x)return S;var R=null;if(!S.row_set)throw new Error("No result to process");return S.row_set.is_columnar?R=a(S.row_set,k,b):R=m(S.row_set,k,b),R.timing={execution_time_ms:S.execution_time_ms,total_time_ms:S.total_time_ms},T.returnTiming?R:R.results}}},9742:(c,d)=>{d.byteLength=T,d.toByteArray=S,d.fromByteArray=I;for(var f=[],u=[],a=typeof Uint8Array<"u"?Uint8Array:Array,m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w=0,y=m.length;w<y;++w)f[w]=m[w],u[m.charCodeAt(w)]=w;u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63;function o(B){var O=B.length;if(O%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var A=B.indexOf("=");A===-1&&(A=O);var R=A===O?0:4-A%4;return[A,R]}function T(B){var O=o(B),A=O[0],R=O[1];return(A+R)*3/4-R}function b(B,O,A){return(O+A)*3/4-A}function S(B){var O,A=o(B),R=A[0],P=A[1],D=new a(b(B,R,P)),U=0,Y=P>0?R-4:R,z;for(z=0;z<Y;z+=4)O=u[B.charCodeAt(z)]<<18|u[B.charCodeAt(z+1)]<<12|u[B.charCodeAt(z+2)]<<6|u[B.charCodeAt(z+3)],D[U++]=O>>16&255,D[U++]=O>>8&255,D[U++]=O&255;return P===2&&(O=u[B.charCodeAt(z)]<<2|u[B.charCodeAt(z+1)]>>4,D[U++]=O&255),P===1&&(O=u[B.charCodeAt(z)]<<10|u[B.charCodeAt(z+1)]<<4|u[B.charCodeAt(z+2)]>>2,D[U++]=O>>8&255,D[U++]=O&255),D}function x(B){return f[B>>18&63]+f[B>>12&63]+f[B>>6&63]+f[B&63]}function k(B,O,A){for(var R,P=[],D=O;D<A;D+=3)R=(B[D]<<16&16711680)+(B[D+1]<<8&65280)+(B[D+2]&255),P.push(x(R));return P.join("")}function I(B){for(var O,A=B.length,R=A%3,P=[],D=16383,U=0,Y=A-R;U<Y;U+=D)P.push(k(B,U,U+D>Y?Y:U+D));return R===1?(O=B[A-1],P.push(f[O>>2]+f[O<<4&63]+"==")):R===2&&(O=(B[A-2]<<8)+B[A-1],P.push(f[O>>10]+f[O>>4&63]+f[O<<2&63]+"=")),P.join("")}},3818:(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0});var f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},u=typeof window<"u"&&typeof window.document<"u",a=(typeof self>"u"?"undefined":f(self))==="object"&&self.constructor&&self.constructor.name==="DedicatedWorkerGlobalScope",m=typeof process<"u"&&process.versions!=null&&process.versions.node!=null,w=function(){return typeof window<"u"&&window.name==="nodejs"||navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")};d.isBrowser=u,d.isWebWorker=a,d.isNode=m,d.isJsDom=w},8764:(c,d,f)=>{/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */const u=f(9742),a=f(645),m=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;d.Buffer=T,d.SlowBuffer=D,d.INSPECT_MAX_BYTES=50;const w=2147483647;d.kMaxLength=w,T.TYPED_ARRAY_SUPPORT=y(),!T.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function y(){try{const C=new Uint8Array(1),M={foo:function(){return 42}};return Object.setPrototypeOf(M,Uint8Array.prototype),Object.setPrototypeOf(C,M),C.foo()===42}catch{return!1}}Object.defineProperty(T.prototype,"parent",{enumerable:!0,get:function(){if(T.isBuffer(this))return this.buffer}}),Object.defineProperty(T.prototype,"offset",{enumerable:!0,get:function(){if(T.isBuffer(this))return this.byteOffset}});function o(C){if(C>w)throw new RangeError('The value "'+C+'" is invalid for option "size"');const M=new Uint8Array(C);return Object.setPrototypeOf(M,T.prototype),M}function T(C,M,N){if(typeof C=="number"){if(typeof M=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return k(C)}return b(C,M,N)}T.poolSize=8192;function b(C,M,N){if(typeof C=="string")return I(C,M);if(ArrayBuffer.isView(C))return O(C);if(C==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof C);if(Sn(C,ArrayBuffer)||C&&Sn(C.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Sn(C,SharedArrayBuffer)||C&&Sn(C.buffer,SharedArrayBuffer)))return A(C,M,N);if(typeof C=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const $=C.valueOf&&C.valueOf();if($!=null&&$!==C)return T.from($,M,N);const X=R(C);if(X)return X;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof C[Symbol.toPrimitive]=="function")return T.from(C[Symbol.toPrimitive]("string"),M,N);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof C)}T.from=function(C,M,N){return b(C,M,N)},Object.setPrototypeOf(T.prototype,Uint8Array.prototype),Object.setPrototypeOf(T,Uint8Array);function S(C){if(typeof C!="number")throw new TypeError('"size" argument must be of type number');if(C<0)throw new RangeError('The value "'+C+'" is invalid for option "size"')}function x(C,M,N){return S(C),C<=0?o(C):M!==void 0?typeof N=="string"?o(C).fill(M,N):o(C).fill(M):o(C)}T.alloc=function(C,M,N){return x(C,M,N)};function k(C){return S(C),o(C<0?0:P(C)|0)}T.allocUnsafe=function(C){return k(C)},T.allocUnsafeSlow=function(C){return k(C)};function I(C,M){if((typeof M!="string"||M==="")&&(M="utf8"),!T.isEncoding(M))throw new TypeError("Unknown encoding: "+M);const N=U(C,M)|0;let $=o(N);const X=$.write(C,M);return X!==N&&($=$.slice(0,X)),$}function B(C){const M=C.length<0?0:P(C.length)|0,N=o(M);for(let $=0;$<M;$+=1)N[$]=C[$]&255;return N}function O(C){if(Sn(C,Uint8Array)){const M=new Uint8Array(C);return A(M.buffer,M.byteOffset,M.byteLength)}return B(C)}function A(C,M,N){if(M<0||C.byteLength<M)throw new RangeError('"offset" is outside of buffer bounds');if(C.byteLength<M+(N||0))throw new RangeError('"length" is outside of buffer bounds');let $;return M===void 0&&N===void 0?$=new Uint8Array(C):N===void 0?$=new Uint8Array(C,M):$=new Uint8Array(C,M,N),Object.setPrototypeOf($,T.prototype),$}function R(C){if(T.isBuffer(C)){const M=P(C.length)|0,N=o(M);return N.length===0||C.copy(N,0,0,M),N}if(C.length!==void 0)return typeof C.length!="number"||$o(C.length)?o(0):B(C);if(C.type==="Buffer"&&Array.isArray(C.data))return B(C.data)}function P(C){if(C>=w)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+w.toString(16)+" bytes");return C|0}function D(C){return+C!=C&&(C=0),T.alloc(+C)}T.isBuffer=function(M){return M!=null&&M._isBuffer===!0&&M!==T.prototype},T.compare=function(M,N){if(Sn(M,Uint8Array)&&(M=T.from(M,M.offset,M.byteLength)),Sn(N,Uint8Array)&&(N=T.from(N,N.offset,N.byteLength)),!T.isBuffer(M)||!T.isBuffer(N))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(M===N)return 0;let $=M.length,X=N.length;for(let ee=0,ie=Math.min($,X);ee<ie;++ee)if(M[ee]!==N[ee]){$=M[ee],X=N[ee];break}return $<X?-1:X<$?1:0},T.isEncoding=function(M){switch(String(M).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},T.concat=function(M,N){if(!Array.isArray(M))throw new TypeError('"list" argument must be an Array of Buffers');if(M.length===0)return T.alloc(0);let $;if(N===void 0)for(N=0,$=0;$<M.length;++$)N+=M[$].length;const X=T.allocUnsafe(N);let ee=0;for($=0;$<M.length;++$){let ie=M[$];if(Sn(ie,Uint8Array))ee+ie.length>X.length?(T.isBuffer(ie)||(ie=T.from(ie)),ie.copy(X,ee)):Uint8Array.prototype.set.call(X,ie,ee);else if(T.isBuffer(ie))ie.copy(X,ee);else throw new TypeError('"list" argument must be an Array of Buffers');ee+=ie.length}return X};function U(C,M){if(T.isBuffer(C))return C.length;if(ArrayBuffer.isView(C)||Sn(C,ArrayBuffer))return C.byteLength;if(typeof C!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof C);const N=C.length,$=arguments.length>2&&arguments[2]===!0;if(!$&&N===0)return 0;let X=!1;for(;;)switch(M){case"ascii":case"latin1":case"binary":return N;case"utf8":case"utf-8":return Ss(C).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N*2;case"hex":return N>>>1;case"base64":return fi(C).length;default:if(X)return $?-1:Ss(C).length;M=(""+M).toLowerCase(),X=!0}}T.byteLength=U;function Y(C,M,N){let $=!1;if((M===void 0||M<0)&&(M=0),M>this.length||((N===void 0||N>this.length)&&(N=this.length),N<=0)||(N>>>=0,M>>>=0,N<=M))return"";for(C||(C="utf8");;)switch(C){case"hex":return Tt(this,M,N);case"utf8":case"utf-8":return Fe(this,M,N);case"ascii":return Ue(this,M,N);case"latin1":case"binary":return at(this,M,N);case"base64":return ne(this,M,N);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ft(this,M,N);default:if($)throw new TypeError("Unknown encoding: "+C);C=(C+"").toLowerCase(),$=!0}}T.prototype._isBuffer=!0;function z(C,M,N){const $=C[M];C[M]=C[N],C[N]=$}T.prototype.swap16=function(){const M=this.length;if(M%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let N=0;N<M;N+=2)z(this,N,N+1);return this},T.prototype.swap32=function(){const M=this.length;if(M%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let N=0;N<M;N+=4)z(this,N,N+3),z(this,N+1,N+2);return this},T.prototype.swap64=function(){const M=this.length;if(M%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let N=0;N<M;N+=8)z(this,N,N+7),z(this,N+1,N+6),z(this,N+2,N+5),z(this,N+3,N+4);return this},T.prototype.toString=function(){const M=this.length;return M===0?"":arguments.length===0?Fe(this,0,M):Y.apply(this,arguments)},T.prototype.toLocaleString=T.prototype.toString,T.prototype.equals=function(M){if(!T.isBuffer(M))throw new TypeError("Argument must be a Buffer");return this===M?!0:T.compare(this,M)===0},T.prototype.inspect=function(){let M="";const N=d.INSPECT_MAX_BYTES;return M=this.toString("hex",0,N).replace(/(.{2})/g,"$1 ").trim(),this.length>N&&(M+=" ... "),"<Buffer "+M+">"},m&&(T.prototype[m]=T.prototype.inspect),T.prototype.compare=function(M,N,$,X,ee){if(Sn(M,Uint8Array)&&(M=T.from(M,M.offset,M.byteLength)),!T.isBuffer(M))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof M);if(N===void 0&&(N=0),$===void 0&&($=M?M.length:0),X===void 0&&(X=0),ee===void 0&&(ee=this.length),N<0||$>M.length||X<0||ee>this.length)throw new RangeError("out of range index");if(X>=ee&&N>=$)return 0;if(X>=ee)return-1;if(N>=$)return 1;if(N>>>=0,$>>>=0,X>>>=0,ee>>>=0,this===M)return 0;let ie=ee-X,Ie=$-N;const Pe=Math.min(ie,Ie),De=this.slice(X,ee),He=M.slice(N,$);for(let We=0;We<Pe;++We)if(De[We]!==He[We]){ie=De[We],Ie=He[We];break}return ie<Ie?-1:Ie<ie?1:0};function W(C,M,N,$,X){if(C.length===0)return-1;if(typeof N=="string"?($=N,N=0):N>2147483647?N=2147483647:N<-2147483648&&(N=-2147483648),N=+N,$o(N)&&(N=X?0:C.length-1),N<0&&(N=C.length+N),N>=C.length){if(X)return-1;N=C.length-1}else if(N<0)if(X)N=0;else return-1;if(typeof M=="string"&&(M=T.from(M,$)),T.isBuffer(M))return M.length===0?-1:H(C,M,N,$,X);if(typeof M=="number")return M=M&255,typeof Uint8Array.prototype.indexOf=="function"?X?Uint8Array.prototype.indexOf.call(C,M,N):Uint8Array.prototype.lastIndexOf.call(C,M,N):H(C,[M],N,$,X);throw new TypeError("val must be string, number or Buffer")}function H(C,M,N,$,X){let ee=1,ie=C.length,Ie=M.length;if($!==void 0&&($=String($).toLowerCase(),$==="ucs2"||$==="ucs-2"||$==="utf16le"||$==="utf-16le")){if(C.length<2||M.length<2)return-1;ee=2,ie/=2,Ie/=2,N/=2}function Pe(He,We){return ee===1?He[We]:He.readUInt16BE(We*ee)}let De;if(X){let He=-1;for(De=N;De<ie;De++)if(Pe(C,De)===Pe(M,He===-1?0:De-He)){if(He===-1&&(He=De),De-He+1===Ie)return He*ee}else He!==-1&&(De-=De-He),He=-1}else for(N+Ie>ie&&(N=ie-Ie),De=N;De>=0;De--){let He=!0;for(let We=0;We<Ie;We++)if(Pe(C,De+We)!==Pe(M,We)){He=!1;break}if(He)return De}return-1}T.prototype.includes=function(M,N,$){return this.indexOf(M,N,$)!==-1},T.prototype.indexOf=function(M,N,$){return W(this,M,N,$,!0)},T.prototype.lastIndexOf=function(M,N,$){return W(this,M,N,$,!1)};function V(C,M,N,$){N=Number(N)||0;const X=C.length-N;$?($=Number($),$>X&&($=X)):$=X;const ee=M.length;$>ee/2&&($=ee/2);let ie;for(ie=0;ie<$;++ie){const Ie=parseInt(M.substr(ie*2,2),16);if($o(Ie))return ie;C[N+ie]=Ie}return ie}function J(C,M,N,$){return Pr(Ss(M,C.length-N),C,N,$)}function G(C,M,N,$){return Pr(ue(M),C,N,$)}function oe(C,M,N,$){return Pr(fi(M),C,N,$)}function he(C,M,N,$){return Pr(Mi(M,C.length-N),C,N,$)}T.prototype.write=function(M,N,$,X){if(N===void 0)X="utf8",$=this.length,N=0;else if($===void 0&&typeof N=="string")X=N,$=this.length,N=0;else if(isFinite(N))N=N>>>0,isFinite($)?($=$>>>0,X===void 0&&(X="utf8")):(X=$,$=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ee=this.length-N;if(($===void 0||$>ee)&&($=ee),M.length>0&&($<0||N<0)||N>this.length)throw new RangeError("Attempt to write outside buffer bounds");X||(X="utf8");let ie=!1;for(;;)switch(X){case"hex":return V(this,M,N,$);case"utf8":case"utf-8":return J(this,M,N,$);case"ascii":case"latin1":case"binary":return G(this,M,N,$);case"base64":return oe(this,M,N,$);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return he(this,M,N,$);default:if(ie)throw new TypeError("Unknown encoding: "+X);X=(""+X).toLowerCase(),ie=!0}},T.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ne(C,M,N){return M===0&&N===C.length?u.fromByteArray(C):u.fromByteArray(C.slice(M,N))}function Fe(C,M,N){N=Math.min(C.length,N);const $=[];let X=M;for(;X<N;){const ee=C[X];let ie=null,Ie=ee>239?4:ee>223?3:ee>191?2:1;if(X+Ie<=N){let Pe,De,He,We;switch(Ie){case 1:ee<128&&(ie=ee);break;case 2:Pe=C[X+1],(Pe&192)===128&&(We=(ee&31)<<6|Pe&63,We>127&&(ie=We));break;case 3:Pe=C[X+1],De=C[X+2],(Pe&192)===128&&(De&192)===128&&(We=(ee&15)<<12|(Pe&63)<<6|De&63,We>2047&&(We<55296||We>57343)&&(ie=We));break;case 4:Pe=C[X+1],De=C[X+2],He=C[X+3],(Pe&192)===128&&(De&192)===128&&(He&192)===128&&(We=(ee&15)<<18|(Pe&63)<<12|(De&63)<<6|He&63,We>65535&&We<1114112&&(ie=We))}}ie===null?(ie=65533,Ie=1):ie>65535&&(ie-=65536,$.push(ie>>>10&1023|55296),ie=56320|ie&1023),$.push(ie),X+=Ie}return ke($)}const de=4096;function ke(C){const M=C.length;if(M<=de)return String.fromCharCode.apply(String,C);let N="",$=0;for(;$<M;)N+=String.fromCharCode.apply(String,C.slice($,$+=de));return N}function Ue(C,M,N){let $="";N=Math.min(C.length,N);for(let X=M;X<N;++X)$+=String.fromCharCode(C[X]&127);return $}function at(C,M,N){let $="";N=Math.min(C.length,N);for(let X=M;X<N;++X)$+=String.fromCharCode(C[X]);return $}function Tt(C,M,N){const $=C.length;(!M||M<0)&&(M=0),(!N||N<0||N>$)&&(N=$);let X="";for(let ee=M;ee<N;++ee)X+=Uo[C[ee]];return X}function Ft(C,M,N){const $=C.slice(M,N);let X="";for(let ee=0;ee<$.length-1;ee+=2)X+=String.fromCharCode($[ee]+$[ee+1]*256);return X}T.prototype.slice=function(M,N){const $=this.length;M=~~M,N=N===void 0?$:~~N,M<0?(M+=$,M<0&&(M=0)):M>$&&(M=$),N<0?(N+=$,N<0&&(N=0)):N>$&&(N=$),N<M&&(N=M);const X=this.subarray(M,N);return Object.setPrototypeOf(X,T.prototype),X};function _e(C,M,N){if(C%1!==0||C<0)throw new RangeError("offset is not uint");if(C+M>N)throw new RangeError("Trying to access beyond buffer length")}T.prototype.readUintLE=T.prototype.readUIntLE=function(M,N,$){M=M>>>0,N=N>>>0,$||_e(M,N,this.length);let X=this[M],ee=1,ie=0;for(;++ie<N&&(ee*=256);)X+=this[M+ie]*ee;return X},T.prototype.readUintBE=T.prototype.readUIntBE=function(M,N,$){M=M>>>0,N=N>>>0,$||_e(M,N,this.length);let X=this[M+--N],ee=1;for(;N>0&&(ee*=256);)X+=this[M+--N]*ee;return X},T.prototype.readUint8=T.prototype.readUInt8=function(M,N){return M=M>>>0,N||_e(M,1,this.length),this[M]},T.prototype.readUint16LE=T.prototype.readUInt16LE=function(M,N){return M=M>>>0,N||_e(M,2,this.length),this[M]|this[M+1]<<8},T.prototype.readUint16BE=T.prototype.readUInt16BE=function(M,N){return M=M>>>0,N||_e(M,2,this.length),this[M]<<8|this[M+1]},T.prototype.readUint32LE=T.prototype.readUInt32LE=function(M,N){return M=M>>>0,N||_e(M,4,this.length),(this[M]|this[M+1]<<8|this[M+2]<<16)+this[M+3]*16777216},T.prototype.readUint32BE=T.prototype.readUInt32BE=function(M,N){return M=M>>>0,N||_e(M,4,this.length),this[M]*16777216+(this[M+1]<<16|this[M+2]<<8|this[M+3])},T.prototype.readBigUInt64LE=ss(function(M){M=M>>>0,nn(M,"offset");const N=this[M],$=this[M+7];(N===void 0||$===void 0)&&Lt(M,this.length-8);const X=N+this[++M]*2**8+this[++M]*2**16+this[++M]*2**24,ee=this[++M]+this[++M]*2**8+this[++M]*2**16+$*2**24;return BigInt(X)+(BigInt(ee)<<BigInt(32))}),T.prototype.readBigUInt64BE=ss(function(M){M=M>>>0,nn(M,"offset");const N=this[M],$=this[M+7];(N===void 0||$===void 0)&&Lt(M,this.length-8);const X=N*2**24+this[++M]*2**16+this[++M]*2**8+this[++M],ee=this[++M]*2**24+this[++M]*2**16+this[++M]*2**8+$;return(BigInt(X)<<BigInt(32))+BigInt(ee)}),T.prototype.readIntLE=function(M,N,$){M=M>>>0,N=N>>>0,$||_e(M,N,this.length);let X=this[M],ee=1,ie=0;for(;++ie<N&&(ee*=256);)X+=this[M+ie]*ee;return ee*=128,X>=ee&&(X-=Math.pow(2,8*N)),X},T.prototype.readIntBE=function(M,N,$){M=M>>>0,N=N>>>0,$||_e(M,N,this.length);let X=N,ee=1,ie=this[M+--X];for(;X>0&&(ee*=256);)ie+=this[M+--X]*ee;return ee*=128,ie>=ee&&(ie-=Math.pow(2,8*N)),ie},T.prototype.readInt8=function(M,N){return M=M>>>0,N||_e(M,1,this.length),this[M]&128?(255-this[M]+1)*-1:this[M]},T.prototype.readInt16LE=function(M,N){M=M>>>0,N||_e(M,2,this.length);const $=this[M]|this[M+1]<<8;return $&32768?$|4294901760:$},T.prototype.readInt16BE=function(M,N){M=M>>>0,N||_e(M,2,this.length);const $=this[M+1]|this[M]<<8;return $&32768?$|4294901760:$},T.prototype.readInt32LE=function(M,N){return M=M>>>0,N||_e(M,4,this.length),this[M]|this[M+1]<<8|this[M+2]<<16|this[M+3]<<24},T.prototype.readInt32BE=function(M,N){return M=M>>>0,N||_e(M,4,this.length),this[M]<<24|this[M+1]<<16|this[M+2]<<8|this[M+3]},T.prototype.readBigInt64LE=ss(function(M){M=M>>>0,nn(M,"offset");const N=this[M],$=this[M+7];(N===void 0||$===void 0)&&Lt(M,this.length-8);const X=this[M+4]+this[M+5]*2**8+this[M+6]*2**16+($<<24);return(BigInt(X)<<BigInt(32))+BigInt(N+this[++M]*256+this[++M]*65536+this[++M]*16777216)}),T.prototype.readBigInt64BE=ss(function(M){M=M>>>0,nn(M,"offset");const N=this[M],$=this[M+7];(N===void 0||$===void 0)&&Lt(M,this.length-8);const X=(N<<24)+this[++M]*2**16+this[++M]*2**8+this[++M];return(BigInt(X)<<BigInt(32))+BigInt(this[++M]*16777216+this[++M]*65536+this[++M]*256+$)}),T.prototype.readFloatLE=function(M,N){return M=M>>>0,N||_e(M,4,this.length),a.read(this,M,!0,23,4)},T.prototype.readFloatBE=function(M,N){return M=M>>>0,N||_e(M,4,this.length),a.read(this,M,!1,23,4)},T.prototype.readDoubleLE=function(M,N){return M=M>>>0,N||_e(M,8,this.length),a.read(this,M,!0,52,8)},T.prototype.readDoubleBE=function(M,N){return M=M>>>0,N||_e(M,8,this.length),a.read(this,M,!1,52,8)};function q(C,M,N,$,X,ee){if(!T.isBuffer(C))throw new TypeError('"buffer" argument must be a Buffer instance');if(M>X||M<ee)throw new RangeError('"value" argument is out of bounds');if(N+$>C.length)throw new RangeError("Index out of range")}T.prototype.writeUintLE=T.prototype.writeUIntLE=function(M,N,$,X){if(M=+M,N=N>>>0,$=$>>>0,!X){const Ie=Math.pow(2,8*$)-1;q(this,M,N,$,Ie,0)}let ee=1,ie=0;for(this[N]=M&255;++ie<$&&(ee*=256);)this[N+ie]=M/ee&255;return N+$},T.prototype.writeUintBE=T.prototype.writeUIntBE=function(M,N,$,X){if(M=+M,N=N>>>0,$=$>>>0,!X){const Ie=Math.pow(2,8*$)-1;q(this,M,N,$,Ie,0)}let ee=$-1,ie=1;for(this[N+ee]=M&255;--ee>=0&&(ie*=256);)this[N+ee]=M/ie&255;return N+$},T.prototype.writeUint8=T.prototype.writeUInt8=function(M,N,$){return M=+M,N=N>>>0,$||q(this,M,N,1,255,0),this[N]=M&255,N+1},T.prototype.writeUint16LE=T.prototype.writeUInt16LE=function(M,N,$){return M=+M,N=N>>>0,$||q(this,M,N,2,65535,0),this[N]=M&255,this[N+1]=M>>>8,N+2},T.prototype.writeUint16BE=T.prototype.writeUInt16BE=function(M,N,$){return M=+M,N=N>>>0,$||q(this,M,N,2,65535,0),this[N]=M>>>8,this[N+1]=M&255,N+2},T.prototype.writeUint32LE=T.prototype.writeUInt32LE=function(M,N,$){return M=+M,N=N>>>0,$||q(this,M,N,4,4294967295,0),this[N+3]=M>>>24,this[N+2]=M>>>16,this[N+1]=M>>>8,this[N]=M&255,N+4},T.prototype.writeUint32BE=T.prototype.writeUInt32BE=function(M,N,$){return M=+M,N=N>>>0,$||q(this,M,N,4,4294967295,0),this[N]=M>>>24,this[N+1]=M>>>16,this[N+2]=M>>>8,this[N+3]=M&255,N+4};function j(C,M,N,$,X){Vt(M,$,X,C,N,7);let ee=Number(M&BigInt(4294967295));C[N++]=ee,ee=ee>>8,C[N++]=ee,ee=ee>>8,C[N++]=ee,ee=ee>>8,C[N++]=ee;let ie=Number(M>>BigInt(32)&BigInt(4294967295));return C[N++]=ie,ie=ie>>8,C[N++]=ie,ie=ie>>8,C[N++]=ie,ie=ie>>8,C[N++]=ie,N}function L(C,M,N,$,X){Vt(M,$,X,C,N,7);let ee=Number(M&BigInt(4294967295));C[N+7]=ee,ee=ee>>8,C[N+6]=ee,ee=ee>>8,C[N+5]=ee,ee=ee>>8,C[N+4]=ee;let ie=Number(M>>BigInt(32)&BigInt(4294967295));return C[N+3]=ie,ie=ie>>8,C[N+2]=ie,ie=ie>>8,C[N+1]=ie,ie=ie>>8,C[N]=ie,N+8}T.prototype.writeBigUInt64LE=ss(function(M,N=0){return j(this,M,N,BigInt(0),BigInt("0xffffffffffffffff"))}),T.prototype.writeBigUInt64BE=ss(function(M,N=0){return L(this,M,N,BigInt(0),BigInt("0xffffffffffffffff"))}),T.prototype.writeIntLE=function(M,N,$,X){if(M=+M,N=N>>>0,!X){const Pe=Math.pow(2,8*$-1);q(this,M,N,$,Pe-1,-Pe)}let ee=0,ie=1,Ie=0;for(this[N]=M&255;++ee<$&&(ie*=256);)M<0&&Ie===0&&this[N+ee-1]!==0&&(Ie=1),this[N+ee]=(M/ie>>0)-Ie&255;return N+$},T.prototype.writeIntBE=function(M,N,$,X){if(M=+M,N=N>>>0,!X){const Pe=Math.pow(2,8*$-1);q(this,M,N,$,Pe-1,-Pe)}let ee=$-1,ie=1,Ie=0;for(this[N+ee]=M&255;--ee>=0&&(ie*=256);)M<0&&Ie===0&&this[N+ee+1]!==0&&(Ie=1),this[N+ee]=(M/ie>>0)-Ie&255;return N+$},T.prototype.writeInt8=function(M,N,$){return M=+M,N=N>>>0,$||q(this,M,N,1,127,-128),M<0&&(M=255+M+1),this[N]=M&255,N+1},T.prototype.writeInt16LE=function(M,N,$){return M=+M,N=N>>>0,$||q(this,M,N,2,32767,-32768),this[N]=M&255,this[N+1]=M>>>8,N+2},T.prototype.writeInt16BE=function(M,N,$){return M=+M,N=N>>>0,$||q(this,M,N,2,32767,-32768),this[N]=M>>>8,this[N+1]=M&255,N+2},T.prototype.writeInt32LE=function(M,N,$){return M=+M,N=N>>>0,$||q(this,M,N,4,2147483647,-2147483648),this[N]=M&255,this[N+1]=M>>>8,this[N+2]=M>>>16,this[N+3]=M>>>24,N+4},T.prototype.writeInt32BE=function(M,N,$){return M=+M,N=N>>>0,$||q(this,M,N,4,2147483647,-2147483648),M<0&&(M=4294967295+M+1),this[N]=M>>>24,this[N+1]=M>>>16,this[N+2]=M>>>8,this[N+3]=M&255,N+4},T.prototype.writeBigInt64LE=ss(function(M,N=0){return j(this,M,N,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),T.prototype.writeBigInt64BE=ss(function(M,N=0){return L(this,M,N,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function K(C,M,N,$,X,ee){if(N+$>C.length)throw new RangeError("Index out of range");if(N<0)throw new RangeError("Index out of range")}function Q(C,M,N,$,X){return M=+M,N=N>>>0,X||K(C,M,N,4),a.write(C,M,N,$,23,4),N+4}T.prototype.writeFloatLE=function(M,N,$){return Q(this,M,N,!0,$)},T.prototype.writeFloatBE=function(M,N,$){return Q(this,M,N,!1,$)};function ae(C,M,N,$,X){return M=+M,N=N>>>0,X||K(C,M,N,8),a.write(C,M,N,$,52,8),N+8}T.prototype.writeDoubleLE=function(M,N,$){return ae(this,M,N,!0,$)},T.prototype.writeDoubleBE=function(M,N,$){return ae(this,M,N,!1,$)},T.prototype.copy=function(M,N,$,X){if(!T.isBuffer(M))throw new TypeError("argument should be a Buffer");if($||($=0),!X&&X!==0&&(X=this.length),N>=M.length&&(N=M.length),N||(N=0),X>0&&X<$&&(X=$),X===$||M.length===0||this.length===0)return 0;if(N<0)throw new RangeError("targetStart out of bounds");if($<0||$>=this.length)throw new RangeError("Index out of range");if(X<0)throw new RangeError("sourceEnd out of bounds");X>this.length&&(X=this.length),M.length-N<X-$&&(X=M.length-N+$);const ee=X-$;return this===M&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(N,$,X):Uint8Array.prototype.set.call(M,this.subarray($,X),N),ee},T.prototype.fill=function(M,N,$,X){if(typeof M=="string"){if(typeof N=="string"?(X=N,N=0,$=this.length):typeof $=="string"&&(X=$,$=this.length),X!==void 0&&typeof X!="string")throw new TypeError("encoding must be a string");if(typeof X=="string"&&!T.isEncoding(X))throw new TypeError("Unknown encoding: "+X);if(M.length===1){const ie=M.charCodeAt(0);(X==="utf8"&&ie<128||X==="latin1")&&(M=ie)}}else typeof M=="number"?M=M&255:typeof M=="boolean"&&(M=Number(M));if(N<0||this.length<N||this.length<$)throw new RangeError("Out of range index");if($<=N)return this;N=N>>>0,$=$===void 0?this.length:$>>>0,M||(M=0);let ee;if(typeof M=="number")for(ee=N;ee<$;++ee)this[ee]=M;else{const ie=T.isBuffer(M)?M:T.from(M,X),Ie=ie.length;if(Ie===0)throw new TypeError('The value "'+M+'" is invalid for argument "value"');for(ee=0;ee<$-N;++ee)this[ee+N]=ie[ee%Ie]}return this};const se={};function ge(C,M,N){se[C]=class extends N{constructor(){super(),Object.defineProperty(this,"message",{value:M.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${C}]`,this.stack,delete this.name}get code(){return C}set code(X){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:X,writable:!0})}toString(){return`${this.name} [${C}]: ${this.message}`}}}ge("ERR_BUFFER_OUT_OF_BOUNDS",function(C){return C?`${C} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ge("ERR_INVALID_ARG_TYPE",function(C,M){return`The "${C}" argument must be of type number. Received type ${typeof M}`},TypeError),ge("ERR_OUT_OF_RANGE",function(C,M,N){let $=`The value of "${C}" is out of range.`,X=N;return Number.isInteger(N)&&Math.abs(N)>4294967296?X=Ee(String(N)):typeof N=="bigint"&&(X=String(N),(N>BigInt(2)**BigInt(32)||N<-(BigInt(2)**BigInt(32)))&&(X=Ee(X)),X+="n"),$+=` It must be ${M}. Received ${X}`,$},RangeError);function Ee(C){let M="",N=C.length;const $=C[0]==="-"?1:0;for(;N>=$+4;N-=3)M=`_${C.slice(N-3,N)}${M}`;return`${C.slice(0,N)}${M}`}function Ve(C,M,N){nn(M,"offset"),(C[M]===void 0||C[M+N]===void 0)&&Lt(M,C.length-(N+1))}function Vt(C,M,N,$,X,ee){if(C>N||C<M){const ie=typeof M=="bigint"?"n":"";let Ie;throw ee>3?M===0||M===BigInt(0)?Ie=`>= 0${ie} and < 2${ie} ** ${(ee+1)*8}${ie}`:Ie=`>= -(2${ie} ** ${(ee+1)*8-1}${ie}) and < 2 ** ${(ee+1)*8-1}${ie}`:Ie=`>= ${M}${ie} and <= ${N}${ie}`,new se.ERR_OUT_OF_RANGE("value",Ie,C)}Ve($,X,ee)}function nn(C,M){if(typeof C!="number")throw new se.ERR_INVALID_ARG_TYPE(M,"number",C)}function Lt(C,M,N){throw Math.floor(C)!==C?(nn(C,N),new se.ERR_OUT_OF_RANGE(N||"offset","an integer",C)):M<0?new se.ERR_BUFFER_OUT_OF_BOUNDS:new se.ERR_OUT_OF_RANGE(N||"offset",`>= ${N?1:0} and <= ${M}`,C)}const is=/[^+/0-9A-Za-z-_]/g;function vs(C){if(C=C.split("=")[0],C=C.trim().replace(is,""),C.length<2)return"";for(;C.length%4!==0;)C=C+"=";return C}function Ss(C,M){M=M||1/0;let N;const $=C.length;let X=null;const ee=[];for(let ie=0;ie<$;++ie){if(N=C.charCodeAt(ie),N>55295&&N<57344){if(!X){if(N>56319){(M-=3)>-1&&ee.push(239,191,189);continue}else if(ie+1===$){(M-=3)>-1&&ee.push(239,191,189);continue}X=N;continue}if(N<56320){(M-=3)>-1&&ee.push(239,191,189),X=N;continue}N=(X-55296<<10|N-56320)+65536}else X&&(M-=3)>-1&&ee.push(239,191,189);if(X=null,N<128){if((M-=1)<0)break;ee.push(N)}else if(N<2048){if((M-=2)<0)break;ee.push(N>>6|192,N&63|128)}else if(N<65536){if((M-=3)<0)break;ee.push(N>>12|224,N>>6&63|128,N&63|128)}else if(N<1114112){if((M-=4)<0)break;ee.push(N>>18|240,N>>12&63|128,N>>6&63|128,N&63|128)}else throw new Error("Invalid code point")}return ee}function ue(C){const M=[];for(let N=0;N<C.length;++N)M.push(C.charCodeAt(N)&255);return M}function Mi(C,M){let N,$,X;const ee=[];for(let ie=0;ie<C.length&&!((M-=2)<0);++ie)N=C.charCodeAt(ie),$=N>>8,X=N%256,ee.push(X),ee.push($);return ee}function fi(C){return u.toByteArray(vs(C))}function Pr(C,M,N,$){let X;for(X=0;X<$&&!(X+N>=M.length||X>=C.length);++X)M[X+N]=C[X];return X}function Sn(C,M){return C instanceof M||C!=null&&C.constructor!=null&&C.constructor.name!=null&&C.constructor.name===M.name}function $o(C){return C!==C}const Uo=function(){const C="0123456789abcdef",M=new Array(256);for(let N=0;N<16;++N){const $=N*16;for(let X=0;X<16;++X)M[$+X]=C[N]+C[X]}return M}();function ss(C){return typeof BigInt>"u"?zo:C}function zo(){throw new Error("BigInt not supported")}},8769:(c,d,f)=>{var u,a=TypeError,m=Object.getOwnPropertyDescriptor;if(m)try{m({},"")}catch{m=null}var w=function(){throw new a},y=m?function(){try{return arguments.callee,w}catch{try{return m(arguments,"callee").get}catch{return w}}}():w,o=f(1405)(),T=Object.getPrototypeOf||function(U){return U.__proto__},b=u,S=u,x=u,k=typeof Uint8Array>"u"?u:T(Uint8Array),I={"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?u:ArrayBuffer,"%ArrayBufferPrototype%":typeof ArrayBuffer>"u"?u:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":o?T([][Symbol.iterator]()):u,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":u,"%AsyncFunction%":S,"%AsyncFunctionPrototype%":u,"%AsyncGenerator%":u,"%AsyncGeneratorFunction%":x,"%AsyncGeneratorPrototype%":u,"%AsyncIteratorPrototype%":u,"%Atomics%":typeof Atomics>"u"?u:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":typeof DataView>"u"?u:DataView,"%DataViewPrototype%":typeof DataView>"u"?u:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":typeof Float32Array>"u"?u:Float32Array,"%Float32ArrayPrototype%":typeof Float32Array>"u"?u:Float32Array.prototype,"%Float64Array%":typeof Float64Array>"u"?u:Float64Array,"%Float64ArrayPrototype%":typeof Float64Array>"u"?u:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":u,"%GeneratorFunction%":b,"%GeneratorPrototype%":u,"%Int8Array%":typeof Int8Array>"u"?u:Int8Array,"%Int8ArrayPrototype%":typeof Int8Array>"u"?u:Int8Array.prototype,"%Int16Array%":typeof Int16Array>"u"?u:Int16Array,"%Int16ArrayPrototype%":typeof Int16Array>"u"?u:Int8Array.prototype,"%Int32Array%":typeof Int32Array>"u"?u:Int32Array,"%Int32ArrayPrototype%":typeof Int32Array>"u"?u:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":o?T(T([][Symbol.iterator]())):u,"%JSON%":typeof JSON=="object"?JSON:u,"%JSONParse%":typeof JSON=="object"?JSON.parse:u,"%Map%":typeof Map>"u"?u:Map,"%MapIteratorPrototype%":typeof Map>"u"||!o?u:T(new Map()[Symbol.iterator]()),"%MapPrototype%":typeof Map>"u"?u:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?u:Promise,"%PromisePrototype%":typeof Promise>"u"?u:Promise.prototype,"%PromiseProto_then%":typeof Promise>"u"?u:Promise.prototype.then,"%Promise_all%":typeof Promise>"u"?u:Promise.all,"%Promise_reject%":typeof Promise>"u"?u:Promise.reject,"%Promise_resolve%":typeof Promise>"u"?u:Promise.resolve,"%Proxy%":typeof Proxy>"u"?u:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":typeof Reflect>"u"?u:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":typeof Set>"u"?u:Set,"%SetIteratorPrototype%":typeof Set>"u"||!o?u:T(new Set()[Symbol.iterator]()),"%SetPrototype%":typeof Set>"u"?u:Set.prototype,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?u:SharedArrayBuffer,"%SharedArrayBufferPrototype%":typeof SharedArrayBuffer>"u"?u:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":o?T(""[Symbol.iterator]()):u,"%StringPrototype%":String.prototype,"%Symbol%":o?Symbol:u,"%SymbolPrototype%":o?Symbol.prototype:u,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":y,"%TypedArray%":k,"%TypedArrayPrototype%":k?k.prototype:u,"%TypeError%":a,"%TypeErrorPrototype%":a.prototype,"%Uint8Array%":typeof Uint8Array>"u"?u:Uint8Array,"%Uint8ArrayPrototype%":typeof Uint8Array>"u"?u:Uint8Array.prototype,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?u:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":typeof Uint8ClampedArray>"u"?u:Uint8ClampedArray.prototype,"%Uint16Array%":typeof Uint16Array>"u"?u:Uint16Array,"%Uint16ArrayPrototype%":typeof Uint16Array>"u"?u:Uint16Array.prototype,"%Uint32Array%":typeof Uint32Array>"u"?u:Uint32Array,"%Uint32ArrayPrototype%":typeof Uint32Array>"u"?u:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":typeof WeakMap>"u"?u:WeakMap,"%WeakMapPrototype%":typeof WeakMap>"u"?u:WeakMap.prototype,"%WeakSet%":typeof WeakSet>"u"?u:WeakSet,"%WeakSetPrototype%":typeof WeakSet>"u"?u:WeakSet.prototype},B=f(8612),O=B.call(Function.call,String.prototype.replace),A=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,R=/\\(\\)?/g,P=function(Y){var z=[];return O(Y,A,function(W,H,V,J){z[z.length]=V?O(J,R,"$1"):H||W}),z},D=function(Y,z){if(!(Y in I))throw new SyntaxError("intrinsic "+Y+" does not exist!");if(typeof I[Y]>"u"&&!z)throw new a("intrinsic "+Y+" exists, but is not available. Please file an issue!");return I[Y]};c.exports=function(Y,z){if(typeof Y!="string"||Y.length===0)throw new TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof z!="boolean")throw new TypeError('"allowMissing" argument must be a boolean');for(var W=P(Y),H=D("%"+(W.length>0?W[0]:"")+"%",z),V=1;V<W.length;V+=1)if(H!=null)if(m&&V+1>=W.length){var J=m(H,W[V]);if(!z&&!(W[V]in H))throw new a("base intrinsic for "+Y+" exists, but the property is not available.");H=J&&"get"in J&&!("originalValue"in J.get)?J.get:H[W[V]]}else H=H[W[V]];return H}},4147:(c,d,f)=>{var u=f(8612),a=f(8769),m=a("%Function.prototype.apply%"),w=a("%Function.prototype.call%"),y=a("%Reflect.apply%",!0)||u.call(w,m),o=a("%Object.defineProperty%",!0);if(o)try{o({},"a",{value:1})}catch{o=null}c.exports=function(){return y(u,w,arguments)};var T=function(){return y(u,m,arguments)};o?o(c.exports,"apply",{value:T}):c.exports.apply=T},8914:(c,d,f)=>{var u=f(8769),a=f(4147),m=a(u("String.prototype.indexOf"));c.exports=function(y,o){var T=u(y,!!o);return typeof T=="function"&&m(y,".prototype.")?a(T):T}},4079:(c,d,f)=>{var u=f(8769),a=u("%Object.getOwnPropertyDescriptor%");if(a)try{a([],"length")}catch{a=null}c.exports=a},6729:c=>{var d=Object.prototype.hasOwnProperty,f="~";function u(){}Object.create&&(u.prototype=Object.create(null),new u().__proto__||(f=!1));function a(o,T,b){this.fn=o,this.context=T,this.once=b||!1}function m(o,T,b,S,x){if(typeof b!="function")throw new TypeError("The listener must be a function");var k=new a(b,S||o,x),I=f?f+T:T;return o._events[I]?o._events[I].fn?o._events[I]=[o._events[I],k]:o._events[I].push(k):(o._events[I]=k,o._eventsCount++),o}function w(o,T){--o._eventsCount===0?o._events=new u:delete o._events[T]}function y(){this._events=new u,this._eventsCount=0}y.prototype.eventNames=function(){var T=[],b,S;if(this._eventsCount===0)return T;for(S in b=this._events)d.call(b,S)&&T.push(f?S.slice(1):S);return Object.getOwnPropertySymbols?T.concat(Object.getOwnPropertySymbols(b)):T},y.prototype.listeners=function(T){var b=f?f+T:T,S=this._events[b];if(!S)return[];if(S.fn)return[S.fn];for(var x=0,k=S.length,I=new Array(k);x<k;x++)I[x]=S[x].fn;return I},y.prototype.listenerCount=function(T){var b=f?f+T:T,S=this._events[b];return S?S.fn?1:S.length:0},y.prototype.emit=function(T,b,S,x,k,I){var B=f?f+T:T;if(!this._events[B])return!1;var O=this._events[B],A=arguments.length,R,P;if(O.fn){switch(O.once&&this.removeListener(T,O.fn,void 0,!0),A){case 1:return O.fn.call(O.context),!0;case 2:return O.fn.call(O.context,b),!0;case 3:return O.fn.call(O.context,b,S),!0;case 4:return O.fn.call(O.context,b,S,x),!0;case 5:return O.fn.call(O.context,b,S,x,k),!0;case 6:return O.fn.call(O.context,b,S,x,k,I),!0}for(P=1,R=new Array(A-1);P<A;P++)R[P-1]=arguments[P];O.fn.apply(O.context,R)}else{var D=O.length,U;for(P=0;P<D;P++)switch(O[P].once&&this.removeListener(T,O[P].fn,void 0,!0),A){case 1:O[P].fn.call(O[P].context);break;case 2:O[P].fn.call(O[P].context,b);break;case 3:O[P].fn.call(O[P].context,b,S);break;case 4:O[P].fn.call(O[P].context,b,S,x);break;default:if(!R)for(U=1,R=new Array(A-1);U<A;U++)R[U-1]=arguments[U];O[P].fn.apply(O[P].context,R)}}return!0},y.prototype.on=function(T,b,S){return m(this,T,b,S,!1)},y.prototype.once=function(T,b,S){return m(this,T,b,S,!0)},y.prototype.removeListener=function(T,b,S,x){var k=f?f+T:T;if(!this._events[k])return this;if(!b)return w(this,k),this;var I=this._events[k];if(I.fn)I.fn===b&&(!x||I.once)&&(!S||I.context===S)&&w(this,k);else{for(var B=0,O=[],A=I.length;B<A;B++)(I[B].fn!==b||x&&!I[B].once||S&&I[B].context!==S)&&O.push(I[B]);O.length?this._events[k]=O.length===1?O[0]:O:w(this,k)}return this},y.prototype.removeAllListeners=function(T){var b;return T?(b=f?f+T:T,this._events[b]&&w(this,b)):(this._events=new u,this._eventsCount=0),this},y.prototype.off=y.prototype.removeListener,y.prototype.addListener=y.prototype.on,y.prefixed=f,y.EventEmitter=y,c.exports=y},7187:c=>{var d=typeof Reflect=="object"?Reflect:null,f=d&&typeof d.apply=="function"?d.apply:function(D,U,Y){return Function.prototype.apply.call(D,U,Y)},u;d&&typeof d.ownKeys=="function"?u=d.ownKeys:Object.getOwnPropertySymbols?u=function(D){return Object.getOwnPropertyNames(D).concat(Object.getOwnPropertySymbols(D))}:u=function(D){return Object.getOwnPropertyNames(D)};function a(P){console&&console.warn&&console.warn(P)}var m=Number.isNaN||function(D){return D!==D};function w(){w.init.call(this)}c.exports=w,c.exports.once=R,w.EventEmitter=w,w.prototype._events=void 0,w.prototype._eventsCount=0,w.prototype._maxListeners=void 0;var y=10;function o(P){if(typeof P!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof P)}Object.defineProperty(w,"defaultMaxListeners",{enumerable:!0,get:function(){return y},set:function(P){if(typeof P!="number"||P<0||m(P))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+P+".");y=P}}),w.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},w.prototype.setMaxListeners=function(D){if(typeof D!="number"||D<0||m(D))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+D+".");return this._maxListeners=D,this};function T(P){return P._maxListeners===void 0?w.defaultMaxListeners:P._maxListeners}w.prototype.getMaxListeners=function(){return T(this)},w.prototype.emit=function(D){for(var U=[],Y=1;Y<arguments.length;Y++)U.push(arguments[Y]);var z=D==="error",W=this._events;if(W!==void 0)z=z&&W.error===void 0;else if(!z)return!1;if(z){var H;if(U.length>0&&(H=U[0]),H instanceof Error)throw H;var V=new Error("Unhandled error."+(H?" ("+H.message+")":""));throw V.context=H,V}var J=W[D];if(J===void 0)return!1;if(typeof J=="function")f(J,this,U);else for(var G=J.length,oe=B(J,G),Y=0;Y<G;++Y)f(oe[Y],this,U);return!0};function b(P,D,U,Y){var z,W,H;if(o(U),W=P._events,W===void 0?(W=P._events=Object.create(null),P._eventsCount=0):(W.newListener!==void 0&&(P.emit("newListener",D,U.listener?U.listener:U),W=P._events),H=W[D]),H===void 0)H=W[D]=U,++P._eventsCount;else if(typeof H=="function"?H=W[D]=Y?[U,H]:[H,U]:Y?H.unshift(U):H.push(U),z=T(P),z>0&&H.length>z&&!H.warned){H.warned=!0;var V=new Error("Possible EventEmitter memory leak detected. "+H.length+" "+String(D)+" listeners added. Use emitter.setMaxListeners() to increase limit");V.name="MaxListenersExceededWarning",V.emitter=P,V.type=D,V.count=H.length,a(V)}return P}w.prototype.addListener=function(D,U){return b(this,D,U,!1)},w.prototype.on=w.prototype.addListener,w.prototype.prependListener=function(D,U){return b(this,D,U,!0)};function S(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function x(P,D,U){var Y={fired:!1,wrapFn:void 0,target:P,type:D,listener:U},z=S.bind(Y);return z.listener=U,Y.wrapFn=z,z}w.prototype.once=function(D,U){return o(U),this.on(D,x(this,D,U)),this},w.prototype.prependOnceListener=function(D,U){return o(U),this.prependListener(D,x(this,D,U)),this},w.prototype.removeListener=function(D,U){var Y,z,W,H,V;if(o(U),z=this._events,z===void 0)return this;if(Y=z[D],Y===void 0)return this;if(Y===U||Y.listener===U)--this._eventsCount===0?this._events=Object.create(null):(delete z[D],z.removeListener&&this.emit("removeListener",D,Y.listener||U));else if(typeof Y!="function"){for(W=-1,H=Y.length-1;H>=0;H--)if(Y[H]===U||Y[H].listener===U){V=Y[H].listener,W=H;break}if(W<0)return this;W===0?Y.shift():O(Y,W),Y.length===1&&(z[D]=Y[0]),z.removeListener!==void 0&&this.emit("removeListener",D,V||U)}return this},w.prototype.off=w.prototype.removeListener,w.prototype.removeAllListeners=function(D){var U,Y,z;if(Y=this._events,Y===void 0)return this;if(Y.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):Y[D]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete Y[D]),this;if(arguments.length===0){var W=Object.keys(Y),H;for(z=0;z<W.length;++z)H=W[z],H!=="removeListener"&&this.removeAllListeners(H);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(U=Y[D],typeof U=="function")this.removeListener(D,U);else if(U!==void 0)for(z=U.length-1;z>=0;z--)this.removeListener(D,U[z]);return this};function k(P,D,U){var Y=P._events;if(Y===void 0)return[];var z=Y[D];return z===void 0?[]:typeof z=="function"?U?[z.listener||z]:[z]:U?A(z):B(z,z.length)}w.prototype.listeners=function(D){return k(this,D,!0)},w.prototype.rawListeners=function(D){return k(this,D,!1)},w.listenerCount=function(P,D){return typeof P.listenerCount=="function"?P.listenerCount(D):I.call(P,D)},w.prototype.listenerCount=I;function I(P){var D=this._events;if(D!==void 0){var U=D[P];if(typeof U=="function")return 1;if(U!==void 0)return U.length}return 0}w.prototype.eventNames=function(){return this._eventsCount>0?u(this._events):[]};function B(P,D){for(var U=new Array(D),Y=0;Y<D;++Y)U[Y]=P[Y];return U}function O(P,D){for(;D+1<P.length;D++)P[D]=P[D+1];P.pop()}function A(P){for(var D=new Array(P.length),U=0;U<D.length;++U)D[U]=P[U].listener||P[U];return D}function R(P,D){return new Promise(function(U,Y){function z(){W!==void 0&&P.removeListener("error",W),U([].slice.call(arguments))}var W;D!=="error"&&(W=function(V){P.removeListener(D,z),Y(V)},P.once("error",W)),P.once(D,z)})}},9804:c=>{var d=Object.prototype.hasOwnProperty,f=Object.prototype.toString;c.exports=function(a,m,w){if(f.call(m)!=="[object Function]")throw new TypeError("iterator must be a function");var y=a.length;if(y===+y)for(var o=0;o<y;o++)m.call(w,a[o],o,a);else for(var T in a)d.call(a,T)&&m.call(w,a[T],T,a)}},7648:c=>{var d="Function.prototype.bind called on incompatible ",f=Array.prototype.slice,u=Object.prototype.toString,a="[object Function]";c.exports=function(w){var y=this;if(typeof y!="function"||u.call(y)!==a)throw new TypeError(d+y);for(var o=f.call(arguments,1),T,b=function(){if(this instanceof T){var B=y.apply(this,o.concat(f.call(arguments)));return Object(B)===B?B:this}else return y.apply(w,o.concat(f.call(arguments)))},S=Math.max(0,y.length-o.length),x=[],k=0;k<S;k++)x.push("$"+k);if(T=Function("binder","return function ("+x.join(",")+"){ return binder.apply(this,arguments); }")(b),y.prototype){var I=function(){};I.prototype=y.prototype,T.prototype=new I,I.prototype=null}return T}},8612:(c,d,f)=>{var u=f(7648);c.exports=Function.prototype.bind||u},1405:(c,d,f)=>{var u=f.g.Symbol,a=f(5419);c.exports=function(){return typeof u!="function"||typeof Symbol!="function"||typeof u("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:a()}},5419:c=>{c.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var f={},u=Symbol("test"),a=Object(u);if(typeof u=="string"||Object.prototype.toString.call(u)!=="[object Symbol]"||Object.prototype.toString.call(a)!=="[object Symbol]")return!1;var m=42;f[u]=m;for(u in f)return!1;if(typeof Object.keys=="function"&&Object.keys(f).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(f).length!==0)return!1;var w=Object.getOwnPropertySymbols(f);if(w.length!==1||w[0]!==u||!Object.prototype.propertyIsEnumerable.call(f,u))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var y=Object.getOwnPropertyDescriptor(f,u);if(y.value!==m||y.enumerable!==!0)return!1}return!0}},645:(c,d)=>{/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */d.read=function(f,u,a,m,w){var y,o,T=w*8-m-1,b=(1<<T)-1,S=b>>1,x=-7,k=a?w-1:0,I=a?-1:1,B=f[u+k];for(k+=I,y=B&(1<<-x)-1,B>>=-x,x+=T;x>0;y=y*256+f[u+k],k+=I,x-=8);for(o=y&(1<<-x)-1,y>>=-x,x+=m;x>0;o=o*256+f[u+k],k+=I,x-=8);if(y===0)y=1-S;else{if(y===b)return o?NaN:(B?-1:1)*(1/0);o=o+Math.pow(2,m),y=y-S}return(B?-1:1)*o*Math.pow(2,y-m)},d.write=function(f,u,a,m,w,y){var o,T,b,S=y*8-w-1,x=(1<<S)-1,k=x>>1,I=w===23?Math.pow(2,-24)-Math.pow(2,-77):0,B=m?0:y-1,O=m?1:-1,A=u<0||u===0&&1/u<0?1:0;for(u=Math.abs(u),isNaN(u)||u===1/0?(T=isNaN(u)?1:0,o=x):(o=Math.floor(Math.log(u)/Math.LN2),u*(b=Math.pow(2,-o))<1&&(o--,b*=2),o+k>=1?u+=I/b:u+=I*Math.pow(2,1-k),u*b>=2&&(o++,b/=2),o+k>=x?(T=0,o=x):o+k>=1?(T=(u*b-1)*Math.pow(2,w),o=o+k):(T=u*Math.pow(2,k-1)*Math.pow(2,w),o=0));w>=8;f[a+B]=T&255,B+=O,T/=256,w-=8);for(o=o<<w|T,S+=w;S>0;f[a+B]=o&255,B+=O,o/=256,S-=8);f[a+B-O]|=A*128}},5717:c=>{typeof Object.create=="function"?c.exports=function(f,u){u&&(f.super_=u,f.prototype=Object.create(u.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}))}:c.exports=function(f,u){if(u){f.super_=u;var a=function(){};a.prototype=u.prototype,f.prototype=new a,f.prototype.constructor=f}}},2584:c=>{var d=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",f=Object.prototype.toString,u=function(y){return d&&y&&typeof y=="object"&&Symbol.toStringTag in y?!1:f.call(y)==="[object Arguments]"},a=function(y){return u(y)?!0:y!==null&&typeof y=="object"&&typeof y.length=="number"&&y.length>=0&&f.call(y)!=="[object Array]"&&f.call(y.callee)==="[object Function]"},m=function(){return u(arguments)}();u.isLegacyArguments=a,c.exports=m?u:a},8662:c=>{var d=Object.prototype.toString,f=Function.prototype.toString,u=/^\s*(?:function)?\*/,a=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",m=Object.getPrototypeOf,w=function(){if(!a)return!1;try{return Function("return function*() {}")()}catch{}},y=w(),o=y?m(y):{};c.exports=function(b){if(typeof b!="function")return!1;if(u.test(f.call(b)))return!0;if(!a){var S=d.call(b);return S==="[object GeneratorFunction]"}return m(b)===o}},5692:(c,d,f)=>{var u=f(9804),a=f(6314),m=f(8914),w=m("Object.prototype.toString"),y=f(1405)(),o=y&&typeof Symbol.toStringTag=="symbol",T=a(),b=m("Array.prototype.indexOf",!0)||function(A,R){for(var P=0;P<A.length;P+=1)if(A[P]===R)return P;return-1},S=m("String.prototype.slice"),x={},k=f(4079),I=Object.getPrototypeOf;o&&k&&I&&u(T,function(O){var A=new f.g[O];if(!(Symbol.toStringTag in A))throw new EvalError("this engine has support for Symbol.toStringTag, but "+O+" does not have the property! Please report this.");var R=I(A),P=k(R,Symbol.toStringTag);if(!P){var D=I(R);P=k(D,Symbol.toStringTag)}x[O]=P.get});var B=function(A){var R=!1;return u(x,function(P,D){if(!R)try{R=P.call(A)===D}catch{}}),R};c.exports=function(A){if(!A||typeof A!="object")return!1;if(!o){var R=S(w(A),8,-1);return b(T,R)>-1}return k?B(A):!1}},6792:(c,d,f)=>{var u=null;typeof WebSocket<"u"?u=WebSocket:typeof MozWebSocket<"u"?u=MozWebSocket:typeof f.g<"u"?u=f.g.WebSocket||f.g.MozWebSocket:typeof window<"u"?u=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(u=self.WebSocket||self.MozWebSocket),c.exports=u},135:(c,d,f)=>{for(var u=f(8764).Buffer,a=4294967296,m=[],w=0;w<256;w++)m[w]=(w>15?"":"0")+w.toString(16);var y=c.exports=function(o,T){o instanceof u?(this.buffer=o,this.offset=T||0):Object.prototype.toString.call(o)=="[object Uint8Array]"?(this.buffer=new u(o),this.offset=T||0):(this.buffer=this.buffer||new u(8),this.offset=0,this.setValue.apply(this,arguments))};y.MAX_INT=Math.pow(2,53),y.MIN_INT=-Math.pow(2,53),y.prototype={constructor:y,_2scomp:function(){for(var o=this.buffer,T=this.offset,b=1,S=T+7;S>=T;S--){var x=(o[S]^255)+b;o[S]=x&255,b=x>>8}},setValue:function(o,T){var b=!1;if(arguments.length==1)if(typeof o=="number"){if(b=o<0,o=Math.abs(o),T=o%a,o=o/a,o>a)throw new RangeError(o+" is outside Int64 range");o=o|0}else if(typeof o=="string")o=(o+"").replace(/^0x/,""),T=o.substr(-8),o=o.length>8?o.substr(0,o.length-8):"",o=parseInt(o,16),T=parseInt(T,16);else throw new Error(o+" must be a Number or String");for(var S=this.buffer,x=this.offset,k=7;k>=0;k--)S[x+k]=T&255,T=k==4?o:T>>>8;b&&this._2scomp()},toNumber:function(o){for(var T=this.buffer,b=this.offset,S=T[b]&128,x=0,k=1,I=7,B=1;I>=0;I--,B*=256){var O=T[b+I];S&&(O=(O^255)+k,k=O>>8,O=O&255),x+=O*B}return!o&&x>=y.MAX_INT?S?-1/0:1/0:S?-x:x},valueOf:function(){return this.toNumber(!1)},toString:function(o){return this.valueOf().toString(o||10)},toOctetString:function(o){for(var T=new Array(8),b=this.buffer,S=this.offset,x=0;x<8;x++)T[x]=m[b[S+x]];return T.join(o||"")},toBuffer:function(o){if(o&&this.offset===0)return this.buffer;var T=new u(8);return this.buffer.copy(T,0,this.offset,this.offset+8),T},copy:function(o,T){this.buffer.copy(o,T||0,this.offset,this.offset+8)},compare:function(o){if((this.buffer[this.offset]&128)!=(o.buffer[o.offset]&128))return o.buffer[o.offset]-this.buffer[this.offset];for(var T=0;T<8;T++)if(this.buffer[this.offset+T]!==o.buffer[o.offset+T])return this.buffer[this.offset+T]-o.buffer[o.offset+T];return 0},equals:function(o){return this.compare(o)===0},inspect:function(){return"[Int64 value:"+this+" octets:"+this.toOctetString(" ")+"]"}}},8486:c=>{/*!
 *
 * Copyright 2009-2017 Kris Kowal under the terms of the MIT
 * license found at https://github.com/kriskowal/q/blob/v1/LICENSE
 *
 * With parts by Tyler Close
 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
 * at http://www.opensource.org/licenses/mit-license.html
 * Forked at ref_send.js version: 2009-05-11
 *
 * With parts by Mark Miller
 * Copyright (C) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */(function(d){typeof bootstrap=="function"?bootstrap("promise",d):c.exports=d()})(function(){var d=!1;try{throw new Error}catch(C){d=!!C.stack}var f=V(),u,a=function(){},m=function(){var C={task:void 0,next:null},M=C,N=!1,$=void 0,X=!1,ee=[];function ie(){for(var He,We;C.next;)C=C.next,He=C.task,C.task=void 0,We=C.domain,We&&(C.domain=void 0,We.enter()),Ie(He,We);for(;ee.length;)He=ee.pop(),Ie(He);N=!1}function Ie(He,We){try{He()}catch(jo){if(X)throw We&&We.exit(),setTimeout(ie,0),We&&We.enter(),jo;setTimeout(function(){throw jo},0)}We&&We.exit()}if(m=function(He){M=M.next={task:He,domain:X&&process.domain,next:null},N||(N=!0,$())},typeof process=="object"&&process.toString()==="[object process]"&&process.nextTick)X=!0,$=function(){process.nextTick(ie)};else if(typeof setImmediate=="function")typeof window<"u"?$=setImmediate.bind(window,ie):$=function(){setImmediate(ie)};else if(typeof MessageChannel<"u"){var Pe=new MessageChannel;Pe.port1.onmessage=function(){$=De,Pe.port1.onmessage=ie,ie()};var De=function(){Pe.port2.postMessage(0)};$=function(){setTimeout(ie,0),De()}}else $=function(){setTimeout(ie,0)};return m.runAfter=function(He){ee.push(He),N||(N=!0,$())},m}(),w=Function.call;function y(C){return function(){return w.apply(C,arguments)}}var o=y(Array.prototype.slice),T=y(Array.prototype.reduce||function(C,M){var N=0,$=this.length;if(arguments.length===1)do{if(N in this){M=this[N++];break}if(++N>=$)throw new TypeError}while(1);for(;N<$;N++)N in this&&(M=C(M,this[N],N));return M}),b=y(Array.prototype.indexOf||function(C){for(var M=0;M<this.length;M++)if(this[M]===C)return M;return-1}),S=y(Array.prototype.map||function(C,M){var N=this,$=[];return T(N,function(X,ee,ie){$.push(C.call(M,ee,ie,N))},void 0),$}),x=Object.create||function(C){function M(){}return M.prototype=C,new M},k=Object.defineProperty||function(C,M,N){return C[M]=N.value,C},I=y(Object.prototype.hasOwnProperty),B=Object.keys||function(C){var M=[];for(var N in C)I(C,N)&&M.push(N);return M},O=y(Object.prototype.toString);function A(C){return C===Object(C)}function R(C){return O(C)==="[object StopIteration]"||C instanceof P}var P;typeof ReturnValue<"u"?P=ReturnValue:P=function(C){this.value=C};var D="From previous event:";function U(C,M){if(d&&M.stack&&typeof C=="object"&&C!==null&&C.stack){for(var N=[],$=M;$;$=$.source)$.stack&&(!C.__minimumStackCounter__||C.__minimumStackCounter__>$.stackCounter)&&(k(C,"__minimumStackCounter__",{value:$.stackCounter,configurable:!0}),N.unshift($.stack));N.unshift(C.stack);var X=N.join(`
`+D+`
`),ee=Y(X);k(C,"stack",{value:ee,configurable:!0})}}function Y(C){for(var M=C.split(`
`),N=[],$=0;$<M.length;++$){var X=M[$];!H(X)&&!z(X)&&X&&N.push(X)}return N.join(`
`)}function z(C){return C.indexOf("(module.js:")!==-1||C.indexOf("(node.js:")!==-1}function W(C){var M=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(C);if(M)return[M[1],Number(M[2])];var N=/at ([^ ]+):(\d+):(?:\d+)$/.exec(C);if(N)return[N[1],Number(N[2])];var $=/.*@(.+):(\d+)$/.exec(C);if($)return[$[1],Number($[2])]}function H(C){var M=W(C);if(!M)return!1;var N=M[0],$=M[1];return N===u&&$>=f&&$<=zo}function V(){if(d)try{throw new Error}catch($){var C=$.stack.split(`
`),M=C[0].indexOf("@")>0?C[1]:C[2],N=W(M);return N?(u=N[0],N[1]):void 0}}function J(C,M,N){return function(){return typeof console<"u"&&typeof console.warn=="function"&&console.warn(M+" is deprecated, use "+N+" instead.",new Error("").stack),C.apply(C,arguments)}}function G(C){return C instanceof de?C:Tt(C)?Vt(C):Ve(C)}G.resolve=G,G.nextTick=m,G.longStackSupport=!1;var oe=1;typeof process=="object"&&process&&{BROWSER:!0}&&{BROWSER:!0}.Q_DEBUG&&(G.longStackSupport=!0),G.defer=he;function he(){var C=[],M=[],N,$=x(he.prototype),X=x(de.prototype);if(X.promiseDispatch=function(ie,Ie,Pe){var De=o(arguments);C?(C.push(De),Ie==="when"&&Pe[1]&&M.push(Pe[1])):G.nextTick(function(){N.promiseDispatch.apply(N,De)})},X.valueOf=function(){if(C)return X;var ie=Ue(N);return at(ie)&&(N=ie),ie},X.inspect=function(){return N?N.inspect():{state:"pending"}},G.longStackSupport&&d)try{throw new Error}catch(ie){X.stack=ie.stack.substring(ie.stack.indexOf(`
`)+1),X.stackCounter=oe++}function ee(ie){N=ie,G.longStackSupport&&d&&(X.source=ie),T(C,function(Ie,Pe){G.nextTick(function(){ie.promiseDispatch.apply(ie,Pe)})},void 0),C=void 0,M=void 0}return $.promise=X,$.resolve=function(ie){N||ee(G(ie))},$.fulfill=function(ie){N||ee(Ve(ie))},$.reject=function(ie){N||ee(Ee(ie))},$.notify=function(ie){N||T(M,function(Ie,Pe){G.nextTick(function(){Pe(ie)})},void 0)},$}he.prototype.makeNodeResolver=function(){var C=this;return function(M,N){M?C.reject(M):arguments.length>2?C.resolve(o(arguments,1)):C.resolve(N)}},G.Promise=ne,G.promise=ne;function ne(C){if(typeof C!="function")throw new TypeError("resolver must be a function.");var M=he();try{C(M.resolve,M.reject,M.notify)}catch(N){M.reject(N)}return M.promise}ne.race=Fe,ne.all=fi,ne.reject=Ee,ne.resolve=G,G.passByCopy=function(C){return C},de.prototype.passByCopy=function(){return this},G.join=function(C,M){return G(C).join(M)},de.prototype.join=function(C){return G([this,C]).spread(function(M,N){if(M===N)return M;throw new Error("Q can't join: not the same: "+M+" "+N)})},G.race=Fe;function Fe(C){return ne(function(M,N){for(var $=0,X=C.length;$<X;$++)G(C[$]).then(M,N)})}de.prototype.race=function(){return this.then(G.race)},G.makePromise=de;function de(C,M,N){M===void 0&&(M=function(ee){return Ee(new Error("Promise does not support operation: "+ee))}),N===void 0&&(N=function(){return{state:"unknown"}});var $=x(de.prototype);if($.promiseDispatch=function(ee,ie,Ie){var Pe;try{C[ie]?Pe=C[ie].apply($,Ie):Pe=M.call($,ie,Ie)}catch(De){Pe=Ee(De)}ee&&ee(Pe)},$.inspect=N,N){var X=N();X.state==="rejected"&&($.exception=X.reason),$.valueOf=function(){var ee=N();return ee.state==="pending"||ee.state==="rejected"?$:ee.value}}return $}de.prototype.toString=function(){return"[object Promise]"},de.prototype.then=function(C,M,N){var $=this,X=he(),ee=!1;function ie(De){try{return typeof C=="function"?C(De):De}catch(He){return Ee(He)}}function Ie(De){if(typeof M=="function"){U(De,$);try{return M(De)}catch(He){return Ee(He)}}return Ee(De)}function Pe(De){return typeof N=="function"?N(De):De}return G.nextTick(function(){$.promiseDispatch(function(De){ee||(ee=!0,X.resolve(ie(De)))},"when",[function(De){ee||(ee=!0,X.resolve(Ie(De)))}])}),$.promiseDispatch(void 0,"when",[void 0,function(De){var He,We=!1;try{He=Pe(De)}catch(jo){if(We=!0,G.onerror)G.onerror(jo);else throw jo}We||X.notify(He)}]),X.promise},G.tap=function(C,M){return G(C).tap(M)},de.prototype.tap=function(C){return C=G(C),this.then(function(M){return C.fcall(M).thenResolve(M)})},G.when=ke;function ke(C,M,N,$){return G(C).then(M,N,$)}de.prototype.thenResolve=function(C){return this.then(function(){return C})},G.thenResolve=function(C,M){return G(C).thenResolve(M)},de.prototype.thenReject=function(C){return this.then(function(){throw C})},G.thenReject=function(C,M){return G(C).thenReject(M)},G.nearer=Ue;function Ue(C){if(at(C)){var M=C.inspect();if(M.state==="fulfilled")return M.value}return C}G.isPromise=at;function at(C){return C instanceof de}G.isPromiseAlike=Tt;function Tt(C){return A(C)&&typeof C.then=="function"}G.isPending=Ft;function Ft(C){return at(C)&&C.inspect().state==="pending"}de.prototype.isPending=function(){return this.inspect().state==="pending"},G.isFulfilled=_e;function _e(C){return!at(C)||C.inspect().state==="fulfilled"}de.prototype.isFulfilled=function(){return this.inspect().state==="fulfilled"},G.isRejected=q;function q(C){return at(C)&&C.inspect().state==="rejected"}de.prototype.isRejected=function(){return this.inspect().state==="rejected"};var j=[],L=[],K=[],Q=!0;function ae(){j.length=0,L.length=0,Q||(Q=!0)}function se(C,M){Q&&(typeof process=="object"&&typeof process.emit=="function"&&G.nextTick.runAfter(function(){b(L,C)!==-1&&(process.emit("unhandledRejection",M,C),K.push(C))}),L.push(C),M&&typeof M.stack<"u"?j.push(M.stack):j.push("(no stack) "+M))}function ge(C){if(Q){var M=b(L,C);M!==-1&&(typeof process=="object"&&typeof process.emit=="function"&&G.nextTick.runAfter(function(){var N=b(K,C);N!==-1&&(process.emit("rejectionHandled",j[M],C),K.splice(N,1))}),L.splice(M,1),j.splice(M,1))}}G.resetUnhandledRejections=ae,G.getUnhandledReasons=function(){return j.slice()},G.stopUnhandledRejectionTracking=function(){ae(),Q=!1},ae(),G.reject=Ee;function Ee(C){var M=de({when:function(N){return N&&ge(this),N?N(C):this}},function(){return this},function(){return{state:"rejected",reason:C}});return se(M,C),M}G.fulfill=Ve;function Ve(C){return de({when:function(){return C},get:function(M){return C[M]},set:function(M,N){C[M]=N},delete:function(M){delete C[M]},post:function(M,N){return M==null?C.apply(void 0,N):C[M].apply(C,N)},apply:function(M,N){return C.apply(M,N)},keys:function(){return B(C)}},void 0,function(){return{state:"fulfilled",value:C}})}function Vt(C){var M=he();return G.nextTick(function(){try{C.then(M.resolve,M.reject,M.notify)}catch(N){M.reject(N)}}),M.promise}G.master=nn;function nn(C){return de({isDef:function(){}},function(N,$){return Mi(C,N,$)},function(){return G(C).inspect()})}G.spread=Lt;function Lt(C,M,N){return G(C).spread(M,N)}de.prototype.spread=function(C,M){return this.all().then(function(N){return C.apply(void 0,N)},M)},G.async=is;function is(C){return function(){function M(ee,ie){var Ie;if(typeof StopIteration>"u"){try{Ie=N[ee](ie)}catch(Pe){return Ee(Pe)}return Ie.done?G(Ie.value):ke(Ie.value,$,X)}else{try{Ie=N[ee](ie)}catch(Pe){return R(Pe)?G(Pe.value):Ee(Pe)}return ke(Ie,$,X)}}var N=C.apply(this,arguments),$=M.bind(M,"next"),X=M.bind(M,"throw");return $()}}G.spawn=vs;function vs(C){G.done(G.async(C)())}G.return=Ss;function Ss(C){throw new P(C)}G.promised=ue;function ue(C){return function(){return Lt([this,fi(arguments)],function(M,N){return C.apply(M,N)})}}G.dispatch=Mi;function Mi(C,M,N){return G(C).dispatch(M,N)}de.prototype.dispatch=function(C,M){var N=this,$=he();return G.nextTick(function(){N.promiseDispatch($.resolve,C,M)}),$.promise},G.get=function(C,M){return G(C).dispatch("get",[M])},de.prototype.get=function(C){return this.dispatch("get",[C])},G.set=function(C,M,N){return G(C).dispatch("set",[M,N])},de.prototype.set=function(C,M){return this.dispatch("set",[C,M])},G.del=G.delete=function(C,M){return G(C).dispatch("delete",[M])},de.prototype.del=de.prototype.delete=function(C){return this.dispatch("delete",[C])},G.mapply=G.post=function(C,M,N){return G(C).dispatch("post",[M,N])},de.prototype.mapply=de.prototype.post=function(C,M){return this.dispatch("post",[C,M])},G.send=G.mcall=G.invoke=function(C,M){return G(C).dispatch("post",[M,o(arguments,2)])},de.prototype.send=de.prototype.mcall=de.prototype.invoke=function(C){return this.dispatch("post",[C,o(arguments,1)])},G.fapply=function(C,M){return G(C).dispatch("apply",[void 0,M])},de.prototype.fapply=function(C){return this.dispatch("apply",[void 0,C])},G.try=G.fcall=function(C){return G(C).dispatch("apply",[void 0,o(arguments,1)])},de.prototype.fcall=function(){return this.dispatch("apply",[void 0,o(arguments)])},G.fbind=function(C){var M=G(C),N=o(arguments,1);return function(){return M.dispatch("apply",[this,N.concat(o(arguments))])}},de.prototype.fbind=function(){var C=this,M=o(arguments);return function(){return C.dispatch("apply",[this,M.concat(o(arguments))])}},G.keys=function(C){return G(C).dispatch("keys",[])},de.prototype.keys=function(){return this.dispatch("keys",[])},G.all=fi;function fi(C){return ke(C,function(M){var N=0,$=he();return T(M,function(X,ee,ie){var Ie;at(ee)&&(Ie=ee.inspect()).state==="fulfilled"?M[ie]=Ie.value:(++N,ke(ee,function(Pe){M[ie]=Pe,--N===0&&$.resolve(M)},$.reject,function(Pe){$.notify({index:ie,value:Pe})}))},void 0),N===0&&$.resolve(M),$.promise})}de.prototype.all=function(){return fi(this)},G.any=Pr;function Pr(C){if(C.length===0)return G.resolve();var M=G.defer(),N=0;return T(C,function($,X,ee){var ie=C[ee];N++,ke(ie,Ie,Pe,De);function Ie(He){M.resolve(He)}function Pe(He){if(N--,N===0){var We=He||new Error(""+He);We.message="Q can't get fulfillment value from any promise, all promises were rejected. Last error message: "+We.message,M.reject(We)}}function De(He){M.notify({index:ee,value:He})}},void 0),M.promise}de.prototype.any=function(){return Pr(this)},G.allResolved=J(Sn,"allResolved","allSettled");function Sn(C){return ke(C,function(M){return M=S(M,G),ke(fi(S(M,function(N){return ke(N,a,a)})),function(){return M})})}de.prototype.allResolved=function(){return Sn(this)},G.allSettled=$o;function $o(C){return G(C).allSettled()}de.prototype.allSettled=function(){return this.then(function(C){return fi(S(C,function(M){M=G(M);function N(){return M.inspect()}return M.then(N,N)}))})},G.fail=G.catch=function(C,M){return G(C).then(void 0,M)},de.prototype.fail=de.prototype.catch=function(C){return this.then(void 0,C)},G.progress=Uo;function Uo(C,M){return G(C).then(void 0,void 0,M)}de.prototype.progress=function(C){return this.then(void 0,void 0,C)},G.fin=G.finally=function(C,M){return G(C).finally(M)},de.prototype.fin=de.prototype.finally=function(C){if(!C||typeof C.apply!="function")throw new Error("Q can't apply finally callback");return C=G(C),this.then(function(M){return C.fcall().then(function(){return M})},function(M){return C.fcall().then(function(){throw M})})},G.done=function(C,M,N,$){return G(C).done(M,N,$)},de.prototype.done=function(C,M,N){var $=function(ee){G.nextTick(function(){if(U(ee,X),G.onerror)G.onerror(ee);else throw ee})},X=C||M||N?this.then(C,M,N):this;typeof process=="object"&&process&&process.domain&&($=process.domain.bind($)),X.then(void 0,$)},G.timeout=function(C,M,N){return G(C).timeout(M,N)},de.prototype.timeout=function(C,M){var N=he(),$=setTimeout(function(){(!M||typeof M=="string")&&(M=new Error(M||"Timed out after "+C+" ms"),M.code="ETIMEDOUT"),N.reject(M)},C);return this.then(function(X){clearTimeout($),N.resolve(X)},function(X){clearTimeout($),N.reject(X)},N.notify),N.promise},G.delay=function(C,M){return M===void 0&&(M=C,C=void 0),G(C).delay(M)},de.prototype.delay=function(C){return this.then(function(M){var N=he();return setTimeout(function(){N.resolve(M)},C),N.promise})},G.nfapply=function(C,M){return G(C).nfapply(M)},de.prototype.nfapply=function(C){var M=he(),N=o(C);return N.push(M.makeNodeResolver()),this.fapply(N).fail(M.reject),M.promise},G.nfcall=function(C){var M=o(arguments,1);return G(C).nfapply(M)},de.prototype.nfcall=function(){var C=o(arguments),M=he();return C.push(M.makeNodeResolver()),this.fapply(C).fail(M.reject),M.promise},G.nfbind=G.denodeify=function(C){if(C===void 0)throw new Error("Q can't wrap an undefined function");var M=o(arguments,1);return function(){var N=M.concat(o(arguments)),$=he();return N.push($.makeNodeResolver()),G(C).fapply(N).fail($.reject),$.promise}},de.prototype.nfbind=de.prototype.denodeify=function(){var C=o(arguments);return C.unshift(this),G.denodeify.apply(void 0,C)},G.nbind=function(C,M){var N=o(arguments,2);return function(){var $=N.concat(o(arguments)),X=he();$.push(X.makeNodeResolver());function ee(){return C.apply(M,arguments)}return G(ee).fapply($).fail(X.reject),X.promise}},de.prototype.nbind=function(){var C=o(arguments,0);return C.unshift(this),G.nbind.apply(void 0,C)},G.nmapply=G.npost=function(C,M,N){return G(C).npost(M,N)},de.prototype.nmapply=de.prototype.npost=function(C,M){var N=o(M||[]),$=he();return N.push($.makeNodeResolver()),this.dispatch("post",[C,N]).fail($.reject),$.promise},G.nsend=G.nmcall=G.ninvoke=function(C,M){var N=o(arguments,2),$=he();return N.push($.makeNodeResolver()),G(C).dispatch("post",[M,N]).fail($.reject),$.promise},de.prototype.nsend=de.prototype.nmcall=de.prototype.ninvoke=function(C){var M=o(arguments,1),N=he();return M.push(N.makeNodeResolver()),this.dispatch("post",[C,M]).fail(N.reject),N.promise},G.nodeify=ss;function ss(C,M){return G(C).nodeify(M)}de.prototype.nodeify=function(C){if(C)this.then(function(M){G.nextTick(function(){C(null,M)})},function(M){G.nextTick(function(){C(M)})});else return this},G.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var zo=V();return G})},7533:(c,d)=>{var f=Math.pow(2,8),u=Math.pow(2,16),a=Math.pow(2,24),m=Math.pow(2,32),w=Math.pow(2,40),y=Math.pow(2,48),o=Math.pow(2,52),T=Math.pow(2,1022);d.readByte=function(b){return b>127?b-256:b},d.readI16=function(b,S){S=S||0;var x=b[S+1];return x+=b[S]<<8,b[S]&128&&(x-=u),x},d.readI32=function(b,S){S=S||0;var x=b[S+3];return x+=b[S+2]<<8,x+=b[S+1]<<16,x+=b[S]*a,b[S]&128&&(x-=m),x},d.writeI16=function(b,S){return b[1]=S&255,S>>=8,b[0]=S&255,b},d.writeI32=function(b,S){return b[3]=S&255,S>>=8,b[2]=S&255,S>>=8,b[1]=S&255,S>>=8,b[0]=S&255,b},d.readDouble=function(b,S){S=S||0;var x=b[S]&128,k=(b[S+1]&240)>>4;k+=(b[S]&127)<<4;var I=b[S+7];switch(I+=b[S+6]<<8,I+=b[S+5]<<16,I+=b[S+4]*a,I+=b[S+3]*m,I+=b[S+2]*w,I+=(b[S+1]&15)*y,k){case 0:k=-1022;break;case 2047:return I?NaN:x?-1/0:1/0;default:I+=o,k-=1023}return x&&(I*=-1),I*Math.pow(2,k-52)},d.writeDouble=function(b,S){var x,k,I;return b[0]=S<0?128:0,S=Math.abs(S),S!==S?(x=0x8000000000000,k=2047):S===1/0?(x=0,k=2047):(k=Math.floor(Math.log(S)/Math.LN2),I=Math.pow(2,-k),S*I<1&&(k--,I*=2),k+1023>=2047?(x=0,k=2047):k+1023>=1?(x=(S*I-1)*o,k+=1023):(x=S*T*o,k=0)),b[1]=k<<4&240,b[0]|=k>>4&127,b[7]=x&255,x=Math.floor(x/f),b[6]=x&255,x=Math.floor(x/f),b[5]=x&255,x=Math.floor(x/f),b[4]=x&255,x>>=8,b[3]=x&255,x>>=8,b[2]=x&255,x>>=8,b[1]|=x&15,b}},4711:(c,d,f)=>{var u=f(8764).Buffer,a=f(1291),m=f(7533),w=f(135),y=f(5406),o=y.Type;c.exports=x;var T=-65536,b=-2147418112,S=255;x.VERSION_MASK=T,x.VERSION_1=b,x.TYPE_MASK=S;function x(k,I,B){this.trans=k,this.strictRead=I!==void 0?I:!1,this.strictWrite=B!==void 0?B:!0,this._seqid=null}x.prototype.flush=function(){return this.trans.flush()},x.prototype.writeMessageBegin=function(k,I,B){this.strictWrite?(this.writeI32(b|I),this.writeString(k),this.writeI32(B)):(this.writeString(k),this.writeByte(I),this.writeI32(B)),this._seqid!==null?a.warning("SeqId already set",{name:k}):(this._seqid=B,this.trans.setCurrSeqId(B))},x.prototype.writeMessageEnd=function(){this._seqid!==null?this._seqid=null:a.warning("No seqid to unset")},x.prototype.writeStructBegin=function(k){},x.prototype.writeStructEnd=function(){},x.prototype.writeFieldBegin=function(k,I,B){this.writeByte(I),this.writeI16(B)},x.prototype.writeFieldEnd=function(){},x.prototype.writeFieldStop=function(){this.writeByte(o.STOP)},x.prototype.writeMapBegin=function(k,I,B){this.writeByte(k),this.writeByte(I),this.writeI32(B)},x.prototype.writeMapEnd=function(){},x.prototype.writeListBegin=function(k,I){this.writeByte(k),this.writeI32(I)},x.prototype.writeListEnd=function(){},x.prototype.writeSetBegin=function(k,I){this.writeByte(k),this.writeI32(I)},x.prototype.writeSetEnd=function(){},x.prototype.writeBool=function(k){k?this.writeByte(1):this.writeByte(0)},x.prototype.writeByte=function(k){this.trans.write(new u([k]))},x.prototype.writeI16=function(k){this.trans.write(m.writeI16(new u(2),k))},x.prototype.writeI32=function(k){this.trans.write(m.writeI32(new u(4),k))},x.prototype.writeI64=function(k){k.buffer?this.trans.write(k.buffer):this.trans.write(new w(k).buffer)},x.prototype.writeDouble=function(k){this.trans.write(m.writeDouble(new u(8),k))},x.prototype.writeStringOrBinary=function(k,I,B){if(typeof B=="string")this.writeI32(u.byteLength(B,I)),this.trans.write(new u(B,I));else if(B instanceof u||Object.prototype.toString.call(B)=="[object Uint8Array]")this.writeI32(B.length),this.trans.write(B);else throw new Error(k+" called without a string/Buffer argument: "+B)},x.prototype.writeString=function(k){this.writeStringOrBinary("writeString","utf8",k)},x.prototype.writeBinary=function(k){this.writeStringOrBinary("writeBinary","binary",k)},x.prototype.readMessageBegin=function(){var k=this.readI32(),I,B,O;if(k<0){var A=k&T;if(A!=b)throw new y.TProtocolException(y.TProtocolExceptionType.BAD_VERSION,"Bad version in readMessageBegin: "+k);I=k&S,B=this.readString(),O=this.readI32()}else{if(this.strictRead)throw new y.TProtocolException(y.TProtocolExceptionType.BAD_VERSION,"No protocol version header");B=this.trans.read(k),I=this.readByte(),O=this.readI32()}return{fname:B,mtype:I,rseqid:O}},x.prototype.readMessageEnd=function(){},x.prototype.readStructBegin=function(){return{fname:""}},x.prototype.readStructEnd=function(){},x.prototype.readFieldBegin=function(){var k=this.readByte();if(k==o.STOP)return{fname:null,ftype:k,fid:0};var I=this.readI16();return{fname:null,ftype:k,fid:I}},x.prototype.readFieldEnd=function(){},x.prototype.readMapBegin=function(){var k=this.readByte(),I=this.readByte(),B=this.readI32();return{ktype:k,vtype:I,size:B}},x.prototype.readMapEnd=function(){},x.prototype.readListBegin=function(){var k=this.readByte(),I=this.readI32();return{etype:k,size:I}},x.prototype.readListEnd=function(){},x.prototype.readSetBegin=function(){var k=this.readByte(),I=this.readI32();return{etype:k,size:I}},x.prototype.readSetEnd=function(){},x.prototype.readBool=function(){var k=this.readByte();return k!==0},x.prototype.readByte=function(){return this.trans.readByte()},x.prototype.readI16=function(){return this.trans.readI16()},x.prototype.readI32=function(){return this.trans.readI32()},x.prototype.readI64=function(){var k=this.trans.read(8);return new w(k)},x.prototype.readDouble=function(){return this.trans.readDouble()},x.prototype.readBinary=function(){var k=this.readI32();if(k===0)return new u(0);if(k<0)throw new y.TProtocolException(y.TProtocolExceptionType.NEGATIVE_SIZE,"Negative binary size");return this.trans.read(k)},x.prototype.readString=function(){var k=this.readI32();if(k===0)return"";if(k<0)throw new y.TProtocolException(y.TProtocolExceptionType.NEGATIVE_SIZE,"Negative string size");return this.trans.readString(k)},x.prototype.getTransport=function(){return this.trans},x.prototype.skip=function(k){switch(k){case o.BOOL:this.readBool();break;case o.BYTE:this.readByte();break;case o.I16:this.readI16();break;case o.I32:this.readI32();break;case o.I64:this.readI64();break;case o.DOUBLE:this.readDouble();break;case o.STRING:this.readString();break;case o.STRUCT:for(this.readStructBegin();;){var I=this.readFieldBegin();if(I.ftype===o.STOP)break;this.skip(I.ftype),this.readFieldEnd()}this.readStructEnd();break;case o.MAP:for(var B=this.readMapBegin(),O=0;O<B.size;++O)this.skip(B.ktype),this.skip(B.vtype);this.readMapEnd();break;case o.SET:for(var A=this.readSetBegin(),R=0;R<A.size;++R)this.skip(A.etype);this.readSetEnd();break;case o.LIST:for(var P=this.readListBegin(),D=0;D<P.size;++D)this.skip(P.etype);this.readListEnd();break;default:throw new Error("Invalid type: "+k)}}},9262:(c,d,f)=>{d.Thrift=f(5406);var u=f(5455);d.WSConnection=u.WSConnection,d.createWSConnection=u.createWSConnection,d.createWSClient=u.createWSClient;var a=f(4050);d.XHRConnection=a.XHRConnection,d.createXHRConnection=a.createXHRConnection,d.createXHRClient=a.createXHRClient,d.Int64=f(135),d.Q=f(8486);var m=f(4184);d.Multiplexer=m.Multiplexer,d.TBufferedTransport=f(8869),d.TFramedTransport=f(7584),d.TWebSocketTransport=f(5764),d.Protocol=f(5086),d.TJSONProtocol=f(5086),d.TBinaryProtocol=f(4711),d.TCompactProtocol=f(9277)},8869:(c,d,f)=>{var u=f(8764).Buffer,a=f(7533),m=f(3590),w=f(5190);c.exports=y;function y(o,T){this.defaultReadBufferSize=1024,this.writeBufferSize=512,this.inBuf=new u(this.defaultReadBufferSize),this.readCursor=0,this.writeCursor=0,this.outBuffers=[],this.outCount=0,this.onFlush=T}y.prototype=new w,y.prototype.reset=function(){this.inBuf=new u(this.defaultReadBufferSize),this.readCursor=0,this.writeCursor=0,this.outBuffers=[],this.outCount=0},y.receiver=function(o,T){var b=new y;return function(S){if(b.writeCursor+S.length>b.inBuf.length){var x=new u(b.writeCursor+S.length);b.inBuf.copy(x,0,0,b.writeCursor),b.inBuf=x}S.copy(b.inBuf,b.writeCursor,0),b.writeCursor+=S.length,o(b,T)}},y.prototype.commitPosition=function(){var o=this.writeCursor-this.readCursor,T=o*2>this.defaultReadBufferSize?o*2:this.defaultReadBufferSize,b=new u(T);o>0&&this.inBuf.copy(b,0,this.readCursor,this.writeCursor),this.readCursor=0,this.writeCursor=o,this.inBuf=b},y.prototype.rollbackPosition=function(){this.readCursor=0},y.prototype.isOpen=function(){return!0},y.prototype.open=function(){},y.prototype.close=function(){},y.prototype.setCurrSeqId=function(o){this._seqid=o},y.prototype.ensureAvailable=function(o){if(this.readCursor+o>this.writeCursor)throw new m},y.prototype.read=function(o){this.ensureAvailable(o);var T=new u(o);return this.inBuf.copy(T,0,this.readCursor,this.readCursor+o),this.readCursor+=o,T},y.prototype.readByte=function(){return this.ensureAvailable(1),a.readByte(this.inBuf[this.readCursor++])},y.prototype.readI16=function(){this.ensureAvailable(2);var o=a.readI16(this.inBuf,this.readCursor);return this.readCursor+=2,o},y.prototype.readI32=function(){this.ensureAvailable(4);var o=a.readI32(this.inBuf,this.readCursor);return this.readCursor+=4,o},y.prototype.readDouble=function(){this.ensureAvailable(8);var o=a.readDouble(this.inBuf,this.readCursor);return this.readCursor+=8,o},y.prototype.readString=function(o){this.ensureAvailable(o);var T=this.inBuf.toString("utf8",this.readCursor,this.readCursor+o);return this.readCursor+=o,T},y.prototype.borrow=function(){var o={buf:this.inBuf,readIndex:this.readCursor,writeIndex:this.writeCursor};return o},y.prototype.consume=function(o){this.readCursor+=o},y.prototype.write=function(o){typeof o=="string"&&(o=new u(o,"utf8")),this.outBuffers.push(o),this.outCount+=o.length},y.prototype.flush=function(){var o=this._seqid;if(this._seqid=null,!(this.outCount<1)){var T=new u(this.outCount),b=0;this.outBuffers.forEach(function(S){S.copy(T,b,0),b+=S.length}),this.onFlush&&this.onFlush(T,o),this.outBuffers=[],this.outCount=0}}},9277:(c,d,f)=>{var u=f(8764).Buffer,a=f(1291),m=f(135),w=f(5406),y=w.Type;c.exports=B;var o=Math.pow(2,8),T=Math.pow(2,24),b=Math.pow(2,32),S=Math.pow(2,40),x=Math.pow(2,48),k=Math.pow(2,52),I=Math.pow(2,1022);function B(O){this.trans=O,this.lastField_=[],this.lastFieldId_=0,this.string_limit_=0,this.string_buf_=null,this.string_buf_size_=0,this.container_limit_=0,this.booleanField_={name:null,hasBoolValue:!1},this.boolValue_={hasBoolValue:!1,boolValue:!1}}B.PROTOCOL_ID=-126,B.VERSION_N=1,B.VERSION_MASK=31,B.TYPE_MASK=-32,B.TYPE_BITS=7,B.TYPE_SHIFT_AMOUNT=5,B.Types={CT_STOP:0,CT_BOOLEAN_TRUE:1,CT_BOOLEAN_FALSE:2,CT_BYTE:3,CT_I16:4,CT_I32:5,CT_I64:6,CT_DOUBLE:7,CT_BINARY:8,CT_LIST:9,CT_SET:10,CT_MAP:11,CT_STRUCT:12},B.TTypeToCType=[B.Types.CT_STOP,0,B.Types.CT_BOOLEAN_TRUE,B.Types.CT_BYTE,B.Types.CT_DOUBLE,0,B.Types.CT_I16,0,B.Types.CT_I32,0,B.Types.CT_I64,B.Types.CT_BINARY,B.Types.CT_STRUCT,B.Types.CT_MAP,B.Types.CT_SET,B.Types.CT_LIST],B.prototype.getTransport=function(){return this.trans},B.prototype.getCompactType=function(O){return B.TTypeToCType[O]},B.prototype.getTType=function(O){switch(O){case y.STOP:return y.STOP;case B.Types.CT_BOOLEAN_FALSE:case B.Types.CT_BOOLEAN_TRUE:return y.BOOL;case B.Types.CT_BYTE:return y.BYTE;case B.Types.CT_I16:return y.I16;case B.Types.CT_I32:return y.I32;case B.Types.CT_I64:return y.I64;case B.Types.CT_DOUBLE:return y.DOUBLE;case B.Types.CT_BINARY:return y.STRING;case B.Types.CT_LIST:return y.LIST;case B.Types.CT_SET:return y.SET;case B.Types.CT_MAP:return y.MAP;case B.Types.CT_STRUCT:return y.STRUCT;default:throw new w.TProtocolException(w.TProtocolExceptionType.INVALID_DATA,"Unknown type: "+O)}return y.STOP},B.prototype.flush=function(){return this.trans.flush()},B.prototype.writeMessageBegin=function(O,A,R){this.writeByte(B.PROTOCOL_ID),this.writeByte(B.VERSION_N&B.VERSION_MASK|A<<B.TYPE_SHIFT_AMOUNT&B.TYPE_MASK),this.writeVarint32(R),this.writeString(O),this._seqid?a.warning("SeqId already set",{name:O}):(this._seqid=R,this.trans.setCurrSeqId(R))},B.prototype.writeMessageEnd=function(){},B.prototype.writeStructBegin=function(O){this.lastField_.push(this.lastFieldId_),this.lastFieldId_=0},B.prototype.writeStructEnd=function(){this.lastFieldId_=this.lastField_.pop()},B.prototype.writeFieldBegin=function(O,A,R){if(A!=y.BOOL)return this.writeFieldBeginInternal(O,A,R,-1);this.booleanField_.name=O,this.booleanField_.fieldType=A,this.booleanField_.fieldId=R},B.prototype.writeFieldEnd=function(){},B.prototype.writeFieldStop=function(){this.writeByte(B.Types.CT_STOP)},B.prototype.writeMapBegin=function(O,A,R){R===0?this.writeByte(0):(this.writeVarint32(R),this.writeByte(this.getCompactType(O)<<4|this.getCompactType(A)))},B.prototype.writeMapEnd=function(){},B.prototype.writeListBegin=function(O,A){this.writeCollectionBegin(O,A)},B.prototype.writeListEnd=function(){},B.prototype.writeSetBegin=function(O,A){this.writeCollectionBegin(O,A)},B.prototype.writeSetEnd=function(){},B.prototype.writeBool=function(O){this.booleanField_.name!==null?(this.writeFieldBeginInternal(this.booleanField_.name,this.booleanField_.fieldType,this.booleanField_.fieldId,O?B.Types.CT_BOOLEAN_TRUE:B.Types.CT_BOOLEAN_FALSE),this.booleanField_.name=null):this.writeByte(O?B.Types.CT_BOOLEAN_TRUE:B.Types.CT_BOOLEAN_FALSE)},B.prototype.writeByte=function(O){this.trans.write(new u([O]))},B.prototype.writeI16=function(O){this.writeVarint32(this.i32ToZigzag(O))},B.prototype.writeI32=function(O){this.writeVarint32(this.i32ToZigzag(O))},B.prototype.writeI64=function(O){this.writeVarint64(this.i64ToZigzag(O))},B.prototype.writeDouble=function(O){var A=new u(8),R,P,D;A[7]=O<0?128:0,O=Math.abs(O),O!==O?(R=0x8000000000000,P=2047):O===1/0?(R=0,P=2047):(P=Math.floor(Math.log(O)/Math.LN2),D=Math.pow(2,-P),O*D<1&&(P--,D*=2),P+1023>=2047?(R=0,P=2047):P+1023>=1?(R=(O*D-1)*k,P+=1023):(R=O*I*k,P=0)),A[6]=P<<4&240,A[7]|=P>>4&127,A[0]=R&255,R=Math.floor(R/o),A[1]=R&255,R=Math.floor(R/o),A[2]=R&255,R=Math.floor(R/o),A[3]=R&255,R>>=8,A[4]=R&255,R>>=8,A[5]=R&255,R>>=8,A[6]|=R&15,this.trans.write(A)},B.prototype.writeStringOrBinary=function(O,A,R){if(typeof R=="string")this.writeVarint32(u.byteLength(R,A)),this.trans.write(new u(R,A));else if(R instanceof u||Object.prototype.toString.call(R)=="[object Uint8Array]")this.writeVarint32(R.length),this.trans.write(R);else throw new Error(O+" called without a string/Buffer argument: "+R)},B.prototype.writeString=function(O){this.writeStringOrBinary("writeString","utf8",O)},B.prototype.writeBinary=function(O){this.writeStringOrBinary("writeBinary","binary",O)},B.prototype.writeFieldBeginInternal=function(O,A,R,P){var D=P==-1?this.getCompactType(A):P;R>this.lastFieldId_&&R-this.lastFieldId_<=15?this.writeByte(R-this.lastFieldId_<<4|D):(this.writeByte(D),this.writeI16(R)),this.lastFieldId_=R},B.prototype.writeCollectionBegin=function(O,A){A<=14?this.writeByte(A<<4|this.getCompactType(O)):(this.writeByte(240|this.getCompactType(O)),this.writeVarint32(A))},B.prototype.writeVarint32=function(O){for(var A=new u(5),R=0;;)if(O&-128)A[R++]=O&127|128,O=O>>>7;else{A[R++]=O;break}var P=new u(R);A.copy(P,0,0,R),this.trans.write(P)},B.prototype.writeVarint64=function(O){if(typeof O=="number"&&(O=new m(O)),!(O instanceof m))throw new w.TProtocolException(w.TProtocolExceptionType.INVALID_DATA,"Expected Int64 or Number, found: "+O);for(var A=new u(10),R=0,P=O.buffer.readUInt32BE(0,!0),D=O.buffer.readUInt32BE(4,!0),U=0;;)if(!(D&-128)&&P===0){A[R++]=D;break}else A[R++]=D&127|128,U=P<<25,D=D>>>7,P=P>>>7,D=D|U;var Y=new u(R);A.copy(Y,0,0,R),this.trans.write(Y)},B.prototype.i64ToZigzag=function(O){if(typeof O=="string"?O=new m(parseInt(O,10)):typeof O=="number"&&(O=new m(O)),!(O instanceof m))throw new w.TProtocolException(w.TProtocolExceptionType.INVALID_DATA,"Expected Int64 or Number, found: "+O);var A=O.buffer.readUInt32BE(0,!0),R=O.buffer.readUInt32BE(4,!0),P=A>>>31;return A=(A<<1|R>>>31)^(P?4294967295:0),R=R<<1^(P?4294967295:0),new m(A,R)},B.prototype.i32ToZigzag=function(O){return O<<1^(O&2147483648?4294967295:0)},B.prototype.readMessageBegin=function(){var O=this.trans.readByte();if(O!=B.PROTOCOL_ID)throw new w.TProtocolException(w.TProtocolExceptionType.BAD_VERSION,"Bad protocol identifier "+O);var A=this.trans.readByte(),R=A&B.VERSION_MASK;if(R!=B.VERSION_N)throw new w.TProtocolException(w.TProtocolExceptionType.BAD_VERSION,"Bad protocol version "+R);var P=A>>B.TYPE_SHIFT_AMOUNT&B.TYPE_BITS,D=this.readVarint32(),U=this.readString();return{fname:U,mtype:P,rseqid:D}},B.prototype.readMessageEnd=function(){},B.prototype.readStructBegin=function(){return this.lastField_.push(this.lastFieldId_),this.lastFieldId_=0,{fname:""}},B.prototype.readStructEnd=function(){this.lastFieldId_=this.lastField_.pop()},B.prototype.readFieldBegin=function(){var O=0,A=this.trans.readByte(A),R=A&15;if(R==B.Types.CT_STOP)return{fname:null,ftype:w.Type.STOP,fid:0};var P=(A&240)>>>4;P===0?O=this.readI16():O=this.lastFieldId_+P;var D=this.getTType(R);return(R==B.Types.CT_BOOLEAN_TRUE||R==B.Types.CT_BOOLEAN_FALSE)&&(this.boolValue_.hasBoolValue=!0,this.boolValue_.boolValue=R==B.Types.CT_BOOLEAN_TRUE),this.lastFieldId_=O,{fname:null,ftype:D,fid:O}},B.prototype.readFieldEnd=function(){},B.prototype.readMapBegin=function(){var O=this.readVarint32();if(O<0)throw new w.TProtocolException(w.TProtocolExceptionType.NEGATIVE_SIZE,"Negative map size");var A=0;O!==0&&(A=this.trans.readByte());var R=this.getTType((A&240)>>>4),P=this.getTType(A&15);return{ktype:R,vtype:P,size:O}},B.prototype.readMapEnd=function(){},B.prototype.readListBegin=function(){var O=this.trans.readByte(),A=O>>>4&15;if(A==15&&(A=this.readVarint32()),A<0)throw new w.TProtocolException(w.TProtocolExceptionType.NEGATIVE_SIZE,"Negative list size");var R=this.getTType(O&15);return{etype:R,size:A}},B.prototype.readListEnd=function(){},B.prototype.readSetBegin=function(){return this.readListBegin()},B.prototype.readSetEnd=function(){},B.prototype.readBool=function(){var O=!1;if(this.boolValue_.hasBoolValue===!0)O=this.boolValue_.boolValue,this.boolValue_.hasBoolValue=!1;else{var A=this.trans.readByte();A.rsize,O=A.value==B.Types.CT_BOOLEAN_TRUE}return O},B.prototype.readByte=function(){return this.trans.readByte()},B.prototype.readI16=function(){return this.readI32()},B.prototype.readI32=function(){return this.zigzagToI32(this.readVarint32())},B.prototype.readI64=function(){return this.zigzagToI64(this.readVarint64())},B.prototype.readDouble=function(){var O=this.trans.read(8),A=0,R=O[A+7]&128,P=(O[A+6]&240)>>4;P+=(O[A+7]&127)<<4;var D=O[A];switch(D+=O[A+1]<<8,D+=O[A+2]<<16,D+=O[A+3]*T,D+=O[A+4]*b,D+=O[A+5]*S,D+=(O[A+6]&15)*x,P){case 0:P=-1022;break;case 2047:return D?NaN:R?-1/0:1/0;default:D+=k,P-=1023}return R&&(D*=-1),D*Math.pow(2,P-52)},B.prototype.readBinary=function(){var O=this.readVarint32();if(O===0)return new u(0);if(O<0)throw new w.TProtocolException(w.TProtocolExceptionType.NEGATIVE_SIZE,"Negative binary size");return this.trans.read(O)},B.prototype.readString=function(){var O=this.readVarint32();if(O===0)return"";if(O<0)throw new w.TProtocolException(w.TProtocolExceptionType.NEGATIVE_SIZE,"Negative string size");return this.trans.readString(O)},B.prototype.readVarint32=function(){return this.readVarint64().toNumber()},B.prototype.readVarint64=function(){for(var O=0,A=0,R=0,P=0;;){var D=this.trans.readByte();if(O++,P<=25?A=A|(D&127)<<P:25<P&&P<32?(A=A|(D&127)<<P,R=R|(D&127)>>>32-P):R=R|(D&127)<<P-32,P+=7,!(D&128))break;if(O>=10)throw new w.TProtocolException(w.TProtocolExceptionType.INVALID_DATA,"Variable-length int over 10 bytes.")}return new m(R,A)},B.prototype.zigzagToI32=function(O){return O>>>1^-1*(O&1)},B.prototype.zigzagToI64=function(O){var A=O.buffer.readUInt32BE(0,!0),R=O.buffer.readUInt32BE(4,!0),P=new m(A&0,R&1);P._2scomp();var D=P.buffer.readUInt32BE(0,!0),U=P.buffer.readUInt32BE(4,!0),Y=A<<31;return A=A>>>1^D,R=(R>>>1|Y)^U,new m(A,R)},B.prototype.skip=function(O){switch(O){case y.BOOL:this.readBool();break;case y.BYTE:this.readByte();break;case y.I16:this.readI16();break;case y.I32:this.readI32();break;case y.I64:this.readI64();break;case y.DOUBLE:this.readDouble();break;case y.STRING:this.readString();break;case y.STRUCT:for(this.readStructBegin();;){var A=this.readFieldBegin();if(A.ftype===y.STOP)break;this.skip(A.ftype),this.readFieldEnd()}this.readStructEnd();break;case y.MAP:for(var R=this.readMapBegin(),P=0;P<R.size;++P)this.skip(R.ktype),this.skip(R.vtype);this.readMapEnd();break;case y.SET:for(var D=this.readSetBegin(),U=0;U<D.size;++U)this.skip(D.etype);this.readSetEnd();break;case y.LIST:for(var Y=this.readListBegin(),z=0;z<Y.size;++z)this.skip(Y.etype);this.readListEnd();break;default:throw new Error("Invalid type: "+O)}}},6243:c=>{c.exports=d;function d(f,u){f.Client&&(f=f.Client);var a=function(y,o){u.write(y,o)},m=new u.transport(void 0,a),w=new f(m,u.protocol);return m.client=w,u.client=w,w}},7584:(c,d,f)=>{var u=f(8764).Buffer,a=f(7533),m=f(3590),w=f(5190);c.exports=y;function y(o,T){this.inBuf=o||new u(0),this.outBuffers=[],this.outCount=0,this.readPos=0,this.onFlush=T}y.prototype=new w,y.receiver=function(o,T){var b=null;return function(S){for(b&&(S=u.concat([b,S]),b=null);S.length;){if(S.length<4){b=S;return}var x=a.readI32(S,0);if(S.length<4+x){b=S;return}var k=S.slice(4,4+x);b=S.slice(4+x),o(new y(k),T),S=b,b=null}}},y.prototype.commitPosition=function(){},y.prototype.rollbackPosition=function(){},y.prototype.isOpen=function(){return!0},y.prototype.open=function(){},y.prototype.close=function(){},y.prototype.setCurrSeqId=function(o){this._seqid=o},y.prototype.ensureAvailable=function(o){if(this.readPos+o>this.inBuf.length)throw new m},y.prototype.read=function(o){this.ensureAvailable(o);var T=this.readPos+o;if(this.inBuf.length<T)throw new Error("read("+o+") failed - not enough data");var b=this.inBuf.slice(this.readPos,T);return this.readPos=T,b},y.prototype.readByte=function(){return this.ensureAvailable(1),a.readByte(this.inBuf[this.readPos++])},y.prototype.readI16=function(){this.ensureAvailable(2);var o=a.readI16(this.inBuf,this.readPos);return this.readPos+=2,o},y.prototype.readI32=function(){this.ensureAvailable(4);var o=a.readI32(this.inBuf,this.readPos);return this.readPos+=4,o},y.prototype.readDouble=function(){this.ensureAvailable(8);var o=a.readDouble(this.inBuf,this.readPos);return this.readPos+=8,o},y.prototype.readString=function(o){this.ensureAvailable(o);var T=this.inBuf.toString("utf8",this.readPos,this.readPos+o);return this.readPos+=o,T},y.prototype.borrow=function(){return{buf:this.inBuf,readIndex:this.readPos,writeIndex:this.inBuf.length}},y.prototype.consume=function(o){this.readPos+=o},y.prototype.write=function(o,T){typeof o=="string"&&(o=new u(o,T||"utf8")),this.outBuffers.push(o),this.outCount+=o.length},y.prototype.flush=function(){var o=this._seqid;this._seqid=null;var T=new u(this.outCount),b=0;if(this.outBuffers.forEach(function(x){x.copy(T,b,0),b+=x.length}),this.onFlush){var S=new u(T.length+4);a.writeI32(S,T.length),T.copy(S,4,0,T.length),this.onFlush&&this.onFlush(S,o)}this.outBuffers=[],this.outCount=0}},5190:(c,d,f)=>{var u=f(8764).Buffer,a=f(9539),m=f(9277),w=f(4711),y=f(3590);function o(V){Error.call(this),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.message=V}a.inherits(o,Error),c.exports=U;var T=0,b=1,S=0,x=32/8,k=48/8,I=64/8,B=96/8,O=112/8,A=4095,R=1,P=1073741823;function D(V){var J=f(8869);this.outputBuffer=null;var G=this;this.transport=new J(null,function(oe){G.outputBuffer=oe}),this.transport.inBuf=V||u.alloc(0),this.transport.writeCursor=this.transport.inBuf.length,this.protocol=new m(this.transport)}D.prototype.readVarint32=function(){return this.protocol.readVarint32()},D.prototype.writeVarint32=function(V){this.protocol.writeVarint32(V)},D.prototype.readString=function(){return this.protocol.readString()},D.prototype.writeString=function(V){this.protocol.writeString(V)},D.prototype.getOutCount=function(){return this.transport.outCount},D.prototype.write=function(V){this.transport.write(V)},D.prototype.toBuffer=function(){return this.transport.flush(),this.outputBuffer},U.SubprotocolId={BINARY:0,JSON:1,COMPACT:2};function U(){this.maxFrameSize=P,this.protocolId=U.SubprotocolId.BINARY,this.rheaders={},this.wheaders={},this.inBuf=u.alloc(0),this.outCount=0,this.flags=null,this.seqid=0,this.shouldWriteHeaders=!0}var Y=function(V,J){if(typeof V!="string"||typeof J!="string")throw new o("Header key and values must be strings")},z=function(V){for(var J=Object.keys(U.SubprotocolId),G=0;G<J.length;G++)if(V===U.SubprotocolId[J[G]])return!0;throw new Error(V+" is not a valid protocol id")};U.prototype.setSeqId=function(V){this.seqid=V},U.prototype.getSeqId=function(V){return this.seqid},U.prototype.setFlags=function(V){this.flags=V},U.prototype.getReadHeaders=function(){return this.rheaders},U.prototype.setReadHeader=function(V,J){Y(V,J),this.rheaders[V]=J},U.prototype.clearReadHeaders=function(){this.rheaders={}},U.prototype.getWriteHeaders=function(){return this.wheaders},U.prototype.setWriteHeader=function(V,J){Y(V,J),this.wheaders[V]=J},U.prototype.clearWriteHeaders=function(){this.wheaders={}},U.prototype.setMaxFrameSize=function(V){this.maxFrameSize=V},U.prototype.setProtocolId=function(V){z(V),this.protocolId=V},U.prototype.getProtocolId=function(){return this.protocolId};var W=function(V){var J=V.readInt32BE();return(J&w.VERSION_MASK)===w.VERSION_1},H=function(V){var J=V.readInt8(T),G=V.readInt8(b);return J===m.PROTOCOL_ID&&(G&m.VERSION_MASK)===m.VERSION_N};U.prototype.readHeaders=function(){var V=this.inBuf,J=!1;if(W(V)&&(this.setProtocolId(U.SubprotocolId.BINARY),J=!0),H(V)&&(this.setProtocolId(U.SubprotocolId.COMPACT),J=!0),J){this.shouldWriteHeaders=!1;return}var G=V.readInt32BE(S);if(G>this.maxFrameSize)throw new o("Frame exceeds maximum frame size");var oe=V.readInt16BE(x);if(this.shouldWriteHeaders=oe===A,!!this.shouldWriteHeaders){this.setFlags(V.readInt16BE(k)),this.setSeqId(V.readInt32BE(I));var he=V.readInt16BE(B)*4,ne=O+he;if(ne>V.length)throw new o("Header size is greater than frame size");var Fe=u.alloc(he);V.copy(Fe,0,O,ne);var de=new D(Fe);this.setProtocolId(de.readVarint32());var ke=de.readVarint32();if(ke>0)throw new o("Transforms are not yet supported");for(;;)try{var Ue=de.readVarint32();if(Ue!==R)break;for(var at=de.readVarint32(),Tt=0;Tt<at;Tt++){var Ft=de.readString(),_e=de.readString();this.setReadHeader(Ft,_e)}}catch(q){if(q instanceof y)break;throw q}return this.read(ne),this.getReadHeaders()}},U.prototype.writeHeaders=function(){if(this.shouldWriteHeaders){var V=this.getWriteHeaders(),J=new D;J.writeVarint32(this.protocolId),J.writeVarint32(0);var G=Object.keys(V);if(G.length>0){J.writeVarint32(R),J.writeVarint32(G.length);for(var oe=0;oe<G.length;oe++){var he=G[oe],ne=V[he];J.writeString(he),J.writeString(ne)}}var Fe=J.getOutCount(),de=(4-Fe%4)%4,ke=u.alloc(2);ke.writeInt16BE(Math.floor((Fe+de)/4));var Ue=u.alloc(de);Ue.fill(0),J.write(Ue);var at=J.toBuffer(),Tt=u.alloc(4);Tt.writeInt32BE(10+this.outCount+at.length);var Ft=u.alloc(2);Ft.writeInt16BE(A);var _e=u.alloc(2);_e.writeInt16BE(0);var q=u.alloc(4);q.writeInt32BE(this.getSeqId());var j=u.concat([Tt,Ft,_e,q,ke,at]);this.outBuffers.unshift(j),this.outCount+=j.length}}},3590:(c,d,f)=>{var u=f(9539);c.exports=a;function a(m){Error.call(this),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.message=m}u.inherits(a,Error)},5197:(c,d,f)=>{var u=f(8764).Buffer,a=f(135),m=c.exports={},w=Math.pow(2,24),y=Math.pow(2,31),o=Math.pow(2,32),T=Math.pow(10,11);m.toDecimalString=function(b){var S=b.buffer,x=b.offset;if(!S[x]&&!(S[x+1]&224)||!~S[x]&&!~(S[x+1]&224))return b.toString();var k=S[x]&128;if(k){for(var I=!1,B=new u(8),O=7;O>=0;--O)B[O]=~S[x+O]+(I?0:1)&255,I|=S[x+O];S=B}var A=S[x+1]+(S[x]<<8),R=S[x+7]+(S[x+6]<<8)+(S[x+5]<<16)+S[x+4]*w+(S[x+3]+(S[x+2]<<8))*o+A*74976710656,P=Math.floor(R/T)+A*2814;return R=("00000000000"+String(R%T)).slice(-11),(k?"-":"")+String(P)+R},m.fromDecimalString=function(b){var S=b.charAt(0)==="-";if(b.length<(S?17:16))return new a(+b);if(b.length>(S?20:19))throw new RangeError("Too many digits for Int64: "+b);var x=+b.slice(S?1:0,-15),k=+b.slice(-15)+x*2764472320,I=Math.floor(k/o)+x*232830;if(k=k%o,I>=y&&!(S&&I==y&&k==0))throw new RangeError("The magnitude is too large for Int64.");return S&&(I=~I,k===0?I=I+1&4294967295:k=~k+1,I=2147483648|I),new a(I,k)}},6502:(c,d,f)=>{var u=f(135);f(5197),c.exports=function(){var a,m,w={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},y,o=function(A){throw new SyntaxError(A)},T=function(A){return A&&A!==m&&o("Expected '"+A+"' instead of '"+m+"'"),m=y.charAt(a),a+=1,m},b=function(){var A,R="";for(m==="-"&&(R="-",T("-"));m>="0"&&m<="9";)R+=m,T();if(m===".")for(R+=".";T()&&m>="0"&&m<="9";)R+=m;if(m==="e"||m==="E")for(R+=m,T(),(m==="-"||m==="+")&&(R+=m,T());m>="0"&&m<="9";)R+=m,T();if(A=+R,!isFinite(A))o("Bad number");else return A>=u.MAX_INT||A<=u.MIN_INT?R:A},S=function(){var A,R,P="",D;if(m==='"')for(;T();){if(m==='"')return T(),P;if(m==="\\")if(T(),m==="u"){for(D=0,R=0;R<4&&(A=parseInt(T(),16),!!isFinite(A));R+=1)D=D*16+A;P+=String.fromCharCode(D)}else if(typeof w[m]=="string")P+=w[m];else break;else P+=m}o("Bad string")},x=function(){for(;m&&m<=" ";)T()},k=function(){switch(m){case"t":return T("t"),T("r"),T("u"),T("e"),!0;case"f":return T("f"),T("a"),T("l"),T("s"),T("e"),!1;case"n":return T("n"),T("u"),T("l"),T("l"),null}o("Unexpected '"+m+"'")},I,B=function(){var A=[];if(m==="["){if(T("["),x(),m==="]")return T("]"),A;for(;m;){if(A.push(I()),x(),m==="]")return T("]"),A;T(","),x()}}o("Bad array")},O=function(){var A,R={};if(m==="{"){if(T("{"),x(),m==="}")return T("}"),R;for(;m;){if(A=S(),x(),T(":"),Object.hasOwnProperty.call(R,A)&&o('Duplicate key "'+A+'"'),R[A]=I(),x(),m==="}")return T("}"),R;T(","),x()}}o("Bad object")};return I=function(){switch(x(),m){case"{":return O();case"[":return B();case'"':return S();case"-":return b();default:return m>="0"&&m<="9"?b():k()}},function(A){var R;return y=A,a=0,m=" ",R=I(),x(),m&&o("Syntax error"),R}}()},5086:(c,d,f)=>{var u=f(8764).Buffer,a=f(135),m=f(5406),w=m.Type;f(9539);var y=f(5197),o=f(6502),T=f(3590);c.exports=b;function b(S){this.tstack=[],this.tpos=[],this.trans=S}b.Type={},b.Type[w.BOOL]='"tf"',b.Type[w.BYTE]='"i8"',b.Type[w.I16]='"i16"',b.Type[w.I32]='"i32"',b.Type[w.I64]='"i64"',b.Type[w.DOUBLE]='"dbl"',b.Type[w.STRUCT]='"rec"',b.Type[w.STRING]='"str"',b.Type[w.MAP]='"map"',b.Type[w.LIST]='"lst"',b.Type[w.SET]='"set"',b.RType={},b.RType.tf=w.BOOL,b.RType.i8=w.BYTE,b.RType.i16=w.I16,b.RType.i32=w.I32,b.RType.i64=w.I64,b.RType.dbl=w.DOUBLE,b.RType.rec=w.STRUCT,b.RType.str=w.STRING,b.RType.map=w.MAP,b.RType.lst=w.LIST,b.RType.set=w.SET,b.Version=1,b.prototype.flush=function(){return this.writeToTransportIfStackIsFlushable(),this.trans.flush()},b.prototype.writeToTransportIfStackIsFlushable=function(){this.tstack.length===1&&this.trans.write(this.tstack.pop())},b.prototype.writeMessageBegin=function(S,x,k){this.tstack.push([b.Version,'"'+S+'"',x,k])},b.prototype.writeMessageEnd=function(){var S=this.tstack.pop();this.wobj=this.tstack.pop(),this.wobj.push(S),this.wbuf="["+this.wobj.join(",")+"]",this.trans.write(this.wbuf)},b.prototype.writeStructBegin=function(S){this.tpos.push(this.tstack.length),this.tstack.push({})},b.prototype.writeStructEnd=function(){var S=this.tpos.pop(),x=this.tstack[S],k="{",I=!0;for(var B in x)I?I=!1:k+=",",k+=B+":"+x[B];k+="}",this.tstack[S]=k,this.writeToTransportIfStackIsFlushable()},b.prototype.writeFieldBegin=function(S,x,k){this.tpos.push(this.tstack.length),this.tstack.push({fieldId:'"'+k+'"',fieldType:b.Type[x]})},b.prototype.writeFieldEnd=function(){var S=this.tstack.pop(),x=this.tstack.pop();":"+S==":[object Object]"?this.tstack[this.tstack.length-1][x.fieldId]="{"+x.fieldType+":"+JSON.stringify(S)+"}":this.tstack[this.tstack.length-1][x.fieldId]="{"+x.fieldType+":"+S+"}",this.tpos.pop(),this.writeToTransportIfStackIsFlushable()},b.prototype.writeFieldStop=function(){},b.prototype.writeMapBegin=function(S,x,k){this.tpos.push(this.tstack.length),this.tstack.push([b.Type[S],b.Type[x],0])},b.prototype.writeMapEnd=function(){var S=this.tpos.pop();if(S!=this.tstack.length){(this.tstack.length-S-1)%2!==0&&this.tstack.push("");var x=(this.tstack.length-S-1)/2;this.tstack[S][this.tstack[S].length-1]=x;for(var k="}",I=!0;this.tstack.length>S+1;){var B=this.tstack.pop(),O=this.tstack.pop();I?I=!1:k=","+k,isNaN(O)||(O='"'+O+'"'),k=O+":"+B+k}k="{"+k,this.tstack[S].push(k),this.tstack[S]="["+this.tstack[S].join(",")+"]",this.writeToTransportIfStackIsFlushable()}},b.prototype.writeListBegin=function(S,x){this.tpos.push(this.tstack.length),this.tstack.push([b.Type[S],x])},b.prototype.writeListEnd=function(){for(var S=this.tpos.pop();this.tstack.length>S+1;){var x=this.tstack[S+1];this.tstack.splice(S+1,1),this.tstack[S].push(x)}this.tstack[S]="["+this.tstack[S].join(",")+"]",this.writeToTransportIfStackIsFlushable()},b.prototype.writeSetBegin=function(S,x){this.tpos.push(this.tstack.length),this.tstack.push([b.Type[S],x])},b.prototype.writeSetEnd=function(){for(var S=this.tpos.pop();this.tstack.length>S+1;){var x=this.tstack[S+1];this.tstack.splice(S+1,1),this.tstack[S].push(x)}this.tstack[S]="["+this.tstack[S].join(",")+"]",this.writeToTransportIfStackIsFlushable()},b.prototype.writeBool=function(S){this.tstack.push(S?1:0)},b.prototype.writeByte=function(S){this.tstack.push(S)},b.prototype.writeI16=function(S){this.tstack.push(S)},b.prototype.writeI32=function(S){this.tstack.push(S)},b.prototype.writeI64=function(S){S instanceof a?this.tstack.push(y.toDecimalString(S)):this.tstack.push(S)},b.prototype.writeDouble=function(S){this.tstack.push(S)},b.prototype.writeString=function(S){if(S===null)this.tstack.push(null);else{if(typeof S=="string")var x=S;else if(S instanceof u)var x=S.toString("utf8");else throw new Error("writeString called without a string/Buffer argument: "+S);for(var k="",I=0;I<x.length;I++){var B=x.charAt(I);B==='"'?k+='\\"':B==="\\"?k+="\\\\":B==="\b"?k+="\\b":B==="\f"?k+="\\f":B===`
`?k+="\\n":B==="\r"?k+="\\r":B==="	"?k+="\\t":k+=B}this.tstack.push('"'+k+'"')}},b.prototype.writeBinary=function(S){if(typeof S=="string")var x=new u(S,"binary");else if(S instanceof u||Object.prototype.toString.call(S)=="[object Uint8Array]")var x=S;else throw new Error("writeBinary called without a string/Buffer argument: "+S);this.tstack.push('"'+x.toString("base64")+'"')},b.prototype.readMessageBegin=function(){this.rstack=[],this.rpos=[];var S=this.trans.borrow();if(S.readIndex>=S.writeIndex)throw new T;var x=S.readIndex;if(S.buf[x]!==91)throw new Error("Malformed JSON input, no opening bracket");x++;for(var k=1,I=!1;x<S.writeIndex;x++){var B=S.buf[x];if(I)B===34?I=!1:B===92&&(x+=1);else if(B===91)k+=1;else if(B===93){if(k-=1,k===0)break}else B===34&&(I=!0)}if(k!==0)throw new T;this.robj=o(S.buf.slice(S.readIndex,x+1).toString()),this.trans.consume(x+1-S.readIndex);var O=this.robj.shift();if(O!=b.Version)throw new Error("Wrong thrift protocol version: "+O);var A={};return A.fname=this.robj.shift(),A.mtype=this.robj.shift(),A.rseqid=this.robj.shift(),this.rstack.push(this.robj.shift()),A},b.prototype.readMessageEnd=function(){},b.prototype.readStructBegin=function(){var S={};return S.fname="",this.rstack[this.rstack.length-1]instanceof Array&&this.rstack.push(this.rstack[this.rstack.length-1].shift()),S},b.prototype.readStructEnd=function(){this.rstack.pop()},b.prototype.readFieldBegin=function(){var S={},x=-1,k=w.STOP;for(var I in this.rstack[this.rstack.length-1])if(I!==null){x=parseInt(I,10),this.rpos.push(this.rstack.length);var B=this.rstack[this.rstack.length-1][x];delete this.rstack[this.rstack.length-1][x],this.rstack.push(B);break}if(x!=-1)for(var O in this.rstack[this.rstack.length-1])b.RType[O]!==null&&(k=b.RType[O],this.rstack[this.rstack.length-1]=this.rstack[this.rstack.length-1][O]);return S.fname="",S.ftype=k,S.fid=x,S},b.prototype.readFieldEnd=function(){for(var S=this.rpos.pop();this.rstack.length>S;)this.rstack.pop()},b.prototype.readMapBegin=function(){var S=this.rstack.pop(),x=S.shift();x instanceof Array&&(this.rstack.push(S),S=x,x=S.shift());var k={};return k.ktype=b.RType[x],k.vtype=b.RType[S.shift()],k.size=S.shift(),this.rpos.push(this.rstack.length),this.rstack.push(S.shift()),k},b.prototype.readMapEnd=function(){this.readFieldEnd()},b.prototype.readListBegin=function(){var S=this.rstack[this.rstack.length-1],x={};return x.etype=b.RType[S.shift()],x.size=S.shift(),this.rpos.push(this.rstack.length),this.rstack.push(S.shift()),x},b.prototype.readListEnd=function(){var S=this.rpos.pop()-2,x=this.rstack;x.pop(),x instanceof Array&&x.length>S&&x[S].length>0&&x.push(x[S].shift())},b.prototype.readSetBegin=function(){return this.readListBegin()},b.prototype.readSetEnd=function(){return this.readListEnd()},b.prototype.readBool=function(){return this.readValue()=="1"},b.prototype.readByte=function(){return this.readI32()},b.prototype.readI16=function(){return this.readI32()},b.prototype.readI32=function(S){return+this.readValue()},b.prototype.readValue=function(S){S===void 0&&(S=this.rstack[this.rstack.length-1]);var x={};if(S instanceof Array)S.length===0?x.value=void 0:x.value=S.shift();else if(!(S instanceof a)&&S instanceof Object){for(var k in S)if(k!==null){this.rstack.push(S[k]),delete S[k],x.value=k;break}}else x.value=S,this.rstack.pop();return x.value},b.prototype.readI64=function(){var S=this.readValue();return typeof S=="string"?y.fromDecimalString(S):new a(S)},b.prototype.readDouble=function(){return this.readI32()},b.prototype.readBinary=function(){return new u(this.readValue(),"base64")},b.prototype.readString=function(){return this.readValue()},b.prototype.getTransport=function(){return this.trans},b.prototype.skip=function(S){switch(S){case w.BOOL:this.readBool();break;case w.BYTE:this.readByte();break;case w.I16:this.readI16();break;case w.I32:this.readI32();break;case w.I64:this.readI64();break;case w.DOUBLE:this.readDouble();break;case w.STRING:this.readString();break;case w.STRUCT:for(this.readStructBegin();;){var x=this.readFieldBegin();if(x.ftype===w.STOP)break;this.skip(x.ftype),this.readFieldEnd()}this.readStructEnd();break;case w.MAP:for(var k=this.readMapBegin(),I=0;I<k.size;++I)this.skip(k.ktype),this.skip(k.vtype);this.readMapEnd();break;case w.SET:for(var B=this.readSetBegin(),O=0;O<B.size;++O)this.skip(B.etype);this.readSetEnd();break;case w.LIST:for(var A=this.readListBegin(),R=0;R<A.size;++R)this.skip(A.etype);this.readListEnd();break;default:throw new Error("Invalid type: "+S)}}},1291:(c,d,f)=>{var u=f(9539),a=function(){},m=console.log,w="error";function y(I){return function(){var B=["thrift: ["+I+"] "].concat(Array.from(arguments));return m(u.format.apply(null,B))}}var o=a,T=a,b=a,S=a,x=a;d.setLogFunc=function(I){m=I};var k=d.setLogLevel=function(I){switch(o=T=b=S=x=a,w=I,w){case"trace":o=y("TRACE");case"debug":T=y("DEBUG");case"error":b=y("ERROR");case"warning":S=y("WARN");case"info":x=y("INFO")}};k(w),d.getLogLevel=function(){return w},d.trace=function(){return o.apply(null,arguments)},d.debug=function(){return T.apply(null,arguments)},d.error=function(){return b.apply(null,arguments)},d.warning=function(){return S.apply(null,arguments)},d.info=function(){return x.apply(null,arguments)}},4184:(c,d,f)=>{var u=f(9539),a=f(5406);d.Multiplexer=w;function m(y,o,T){function b(S,x,k){o.call(this,S,x,k)}return u.inherits(b,o),b.prototype.writeMessageBegin=function(S,x,k){x==a.MessageType.CALL||x==a.MessageType.ONEWAY?(T.seqId2Service[k]=y,b.super_.prototype.writeMessageBegin.call(this,y+":"+S,x,k)):b.super_.prototype.writeMessageBegin.call(this,S,x,k)},b}function w(){this.seqid=0}w.prototype.createClient=function(y,o,T){o.Client&&(o=o.Client);var b=function(B,O){T.write(B,O)},S=new T.transport(void 0,b),x=new m(y,T.protocol,T),k=new o(S,x),I=this;return k.new_seqid=function(){return I.seqid+=1,I.seqid},typeof T.client!="object"&&(T.client={}),T.client[y]=k,k}},5406:(c,d,f)=>{var u=f(9539),a=d.Type={STOP:0,VOID:1,BOOL:2,BYTE:3,I08:3,DOUBLE:4,I16:6,I32:8,I64:10,STRING:11,UTF7:11,STRUCT:12,MAP:13,SET:14,LIST:15,UTF8:16,UTF16:17};d.MessageType={CALL:1,REPLY:2,EXCEPTION:3,ONEWAY:4},d.TException=m;function m(S){Error.call(this),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.message=S}u.inherits(m,Error);var w=d.TApplicationExceptionType={UNKNOWN:0,UNKNOWN_METHOD:1,INVALID_MESSAGE_TYPE:2,WRONG_METHOD_NAME:3,BAD_SEQUENCE_ID:4,MISSING_RESULT:5,INTERNAL_ERROR:6,PROTOCOL_ERROR:7,INVALID_TRANSFORM:8,INVALID_PROTOCOL:9,UNSUPPORTED_CLIENT_TYPE:10};d.TApplicationException=y;function y(S,x){m.call(this),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,this.constructor),this.type=S||w.UNKNOWN,this.name=this.constructor.name,this.message=x}u.inherits(y,m),y.prototype.read=function(S){for(var x=S.readStructBegin("TApplicationException");x=S.readFieldBegin(),x.ftype!=a.STOP;){switch(x.fid){case 1:x.ftype==a.STRING?(x=S.readString(),this.message=x):x=S.skip(x.ftype);break;case 2:x.ftype==a.I32?(x=S.readI32(),this.type=x):x=S.skip(x.ftype);break;default:x=S.skip(x.ftype);break}S.readFieldEnd()}S.readStructEnd()},y.prototype.write=function(S){S.writeStructBegin("TApplicationException"),this.message&&(S.writeFieldBegin("message",a.STRING,1),S.writeString(this.message),S.writeFieldEnd()),this.code&&(S.writeFieldBegin("type",a.I32,2),S.writeI32(this.code),S.writeFieldEnd()),S.writeFieldStop(),S.writeStructEnd()},d.TProtocolExceptionType={UNKNOWN:0,INVALID_DATA:1,NEGATIVE_SIZE:2,SIZE_LIMIT:3,BAD_VERSION:4,NOT_IMPLEMENTED:5,DEPTH_LIMIT:6},d.TProtocolException=o;function o(S,x){Error.call(this),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.type=S,this.message=x}u.inherits(o,Error),d.objectLength=function(S){return Object.keys(S).length},d.inherits=function(S,x){u.inherits(S,x)};var T,b;T=function(S,x){if(!S)return S;var k;x.shift===void 0?k=x:k=x[0];var I=k,B=S.length,O=[],A,R;for(A=0;A<B;A++)R=S[A],k===null?O.push(R):k===b||k===T?O.push(k(R,x.slice(1))):O.push(new I(R));return O},b=function(S,x){if(!S)return S;var k;x.shift===void 0?k=x:k=x[0];var I=k,B={},O;for(var A in S)S.hasOwnProperty(A)&&(O=S[A],k===null?B[A]=O:k===b||k===T?B[A]=k(O,x.slice(1)):B[A]=new I(O));return B},c.exports.copyMap=b,c.exports.copyList=T},5455:(c,d,f)=>{var u=f(8764).Buffer,a=f(9539),m=f(6792),w=f(7187).EventEmitter,y=f(5406),o=f(8869),T=f(5086),b=f(3590),S=f(6243),x=f(3818);d.WSConnection=k;function k(I,B,O){w.call(this),this.options=O||{},this.host=I,this.port=B,this.secure=this.options.secure||!1,this.transport=this.options.transport||o,this.protocol=this.options.protocol||T,this.path=this.options.path,this.send_pending=[],this.seqId2Service={},this.wsOptions={host:this.host,port:this.port||80,path:this.options.path||"/",headers:this.options.headers||{}};for(var A in this.options.wsOptions)this.wsOptions[A]=this.options.wsOptions[A]}a.inherits(k,w),k.prototype.__reset=function(){this.socket=null,this.send_pending=[]},k.prototype.__onOpen=function(){this.emit("open"),this.send_pending.length>0&&(this.send_pending.forEach(function(I){this.socket.send(I)},this),this.send_pending=[])},k.prototype.__onClose=function(I){this.emit("close"),this.__reset()},k.prototype.__decodeCallback=function(I){var B=new this.protocol(I);try{for(;;){var O=B.readMessageBegin(),A=O.rseqid*-1,R=this.client,P=this.seqId2Service[O.rseqid];P&&(R=this.client[P],delete this.seqId2Service[O.rseqid]),R._reqs[A]=function(D,U){I.commitPosition();var Y=R._reqs[O.rseqid];delete R._reqs[O.rseqid],Y&&Y(D,U)},R["recv_"+O.fname]?R["recv_"+O.fname](B,O.mtype,A):(delete R._reqs[A],this.emit("error",new y.TApplicationException(y.TApplicationExceptionType.WRONG_METHOD_NAME,"Received a response to an unknown RPC function")))}}catch(D){if(D instanceof b)I.rollbackPosition();else throw D}},k.prototype.__onData=function(I){Object.prototype.toString.call(I)==="[object ArrayBuffer]"&&(I=new Uint8Array(I));var B=new u(I);this.transport.receiver(this.__decodeCallback.bind(this))(B)},k.prototype.__onMessage=function(I){this.__onData(I.data)},k.prototype.__onError=function(I){this.emit("error",I),this.socket.close()},k.prototype.isOpen=function(){return this.socket&&this.socket.readyState===this.socket.OPEN},k.prototype.open=function(){this.socket&&this.socket.readyState!==this.socket.CLOSED||(x.isBrowser?this.socket=new m(this.uri()):this.socket=new m(this.uri(),"",this.wsOptions),this.socket.binaryType="arraybuffer",this.socket.onopen=this.__onOpen.bind(this),this.socket.onmessage=this.__onMessage.bind(this),this.socket.onerror=this.__onError.bind(this),this.socket.onclose=this.__onClose.bind(this))},k.prototype.close=function(){this.socket.close()},k.prototype.uri=function(){var I=this.secure?"wss":"ws",B="",O=this.path||"/",A=this.host;return this.port&&(I==="wss"&&this.port!==443||I==="ws"&&this.port!==80)&&(B=":"+this.port),I+"://"+A+B+O},k.prototype.write=function(I){this.isOpen()?this.socket.send(I):this.send_pending.push(I)},d.createWSConnection=function(I,B,O){return new k(I,B,O)},d.createWSClient=S},5764:(c,d,f)=>{var u=f(1291);c.exports=a;function a(m){this.__reset(m)}a.prototype.__reset=function(m){this.url=m,this.socket=null,this.callbacks=[],this.send_pending=[],this.send_buf="",this.recv_buf="",this.rb_wpos=0,this.rb_rpos=0},a.prototype.flush=function(m,w){var y=this;this.isOpen()?(this.socket.send(this.send_buf),this.callbacks.push(function(){var o=w;return function(T){y.setRecvBuffer(T),o()}}())):this.send_pending.push({buf:this.send_buf,cb:w})},a.prototype.__onOpen=function(){var m=this;this.send_pending.length>0&&(this.send_pending.forEach(function(w){m.socket.send(w.buf),m.callbacks.push(function(){var y=w.cb;return function(o){m.setRecvBuffer(o),y()}}())}),this.send_pending=[])},a.prototype.__onClose=function(m){this.__reset(this.url)},a.prototype.__onMessage=function(m){this.callbacks.length&&this.callbacks.shift()(m.data)},a.prototype.__onError=function(m){u.error("websocket: "+m.toString()),this.socket.close()},a.prototype.setRecvBuffer=function(m){this.recv_buf=m,this.recv_buf_sz=this.recv_buf.length,this.wpos=this.recv_buf.length,this.rpos=0},a.prototype.isOpen=function(){return this.socket&&this.socket.readyState==this.socket.OPEN},a.prototype.open=function(){this.socket&&this.socket.readyState!=this.socket.CLOSED||(this.socket=new WebSocket(this.url),this.socket.onopen=this.__onOpen.bind(this),this.socket.onmessage=this.__onMessage.bind(this),this.socket.onerror=this.__onError.bind(this),this.socket.onclose=this.__onClose.bind(this))},a.prototype.close=function(){this.socket.close()},a.prototype.read=function(m){var w=this.wpos-this.rpos;if(w===0)return"";var y=m;w<m&&(y=w);var o=this.read_buf.substr(this.rpos,y);return this.rpos+=y,o},a.prototype.readAll=function(){return this.recv_buf},a.prototype.write=function(m){this.send_buf=m},a.prototype.getSendBuffer=function(){return this.send_buf}},4050:(c,d,f)=>{var u=f(8764).Buffer,a=f(9539),m=f(7187).EventEmitter,w=f(5406),y=f(8869),o=f(5086),T=f(3590),b=f(6243);d.XHRConnection=S;function S(x,k,I){this.options=I||{},this.wpos=0,this.rpos=0,this.useCORS=I&&I.useCORS,this.send_buf="",this.recv_buf="",this.transport=I.transport||y,this.protocol=I.protocol||o,this.headers=I.headers||{},x=x||window.location.host,k=k||window.location.port;var B=I.https?"https://":"http://",O=I.path||"/";k===""&&(k=void 0),!k||k===80||k==="80"?this.url=B+x+O:this.url=B+x+":"+k+O,this.seqId2Service={}}a.inherits(S,m),S.prototype.getXmlHttpRequestObject=function(){try{return new XMLHttpRequest}catch{}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch{}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch{}throw"Your browser doesn't support XHR."},S.prototype.flush=function(){var x=this;if(this.url===void 0||this.url==="")return this.send_buf;var k=this.getXmlHttpRequestObject();k.overrideMimeType&&k.overrideMimeType("application/json"),k.onreadystatechange=function(){this.readyState==4&&this.status==200&&x.setRecvBuffer(this.responseText)},k.open("POST",this.url,!0),Object.keys(this.headers).forEach(function(I){k.setRequestHeader(I,x.headers[I])}),k.send(this.send_buf)},S.prototype.setRecvBuffer=function(x){if(this.recv_buf=x,this.recv_buf_sz=this.recv_buf.length,this.wpos=this.recv_buf.length,this.rpos=0,Object.prototype.toString.call(x)=="[object ArrayBuffer]")var k=new Uint8Array(x);var I=new u(k||x);this.transport.receiver(this.__decodeCallback.bind(this))(I)},S.prototype.__decodeCallback=function(x){var k=new this.protocol(x);try{for(;;){var I=k.readMessageBegin(),B=I.rseqid*-1,O=this.client,A=this.seqId2Service[I.rseqid];A&&(O=this.client[A],delete this.seqId2Service[I.rseqid]),O._reqs[B]=function(R,P){x.commitPosition();var D=O._reqs[I.rseqid];delete O._reqs[I.rseqid],D&&D(R,P)},O["recv_"+I.fname]?O["recv_"+I.fname](k,I.mtype,B):(delete O._reqs[B],this.emit("error",new w.TApplicationException(w.TApplicationExceptionType.WRONG_METHOD_NAME,"Received a response to an unknown RPC function")))}}catch(R){if(R instanceof T)x.rollbackPosition();else throw R}},S.prototype.isOpen=function(){return!0},S.prototype.open=function(){},S.prototype.close=function(){},S.prototype.read=function(x){var k=this.wpos-this.rpos;if(k===0)return"";var I=x;k<x&&(I=k);var B=this.read_buf.substr(this.rpos,I);return this.rpos+=I,B},S.prototype.readAll=function(){return this.recv_buf},S.prototype.write=function(x){this.send_buf=x,this.flush()},S.prototype.getSendBuffer=function(){return this.send_buf},d.createXHRConnection=function(x,k,I){return new S(x,k,I)},d.createXHRClient=b},384:c=>{c.exports=function(f){return f&&typeof f=="object"&&typeof f.copy=="function"&&typeof f.fill=="function"&&typeof f.readUInt8=="function"}},5955:(c,d,f)=>{var u=f(2584),a=f(8662),m=f(6430),w=f(5692);function y(ue){return ue.call.bind(ue)}var o=typeof BigInt<"u",T=typeof Symbol<"u",b=y(Object.prototype.toString),S=y(Number.prototype.valueOf),x=y(String.prototype.valueOf),k=y(Boolean.prototype.valueOf);if(o)var I=y(BigInt.prototype.valueOf);if(T)var B=y(Symbol.prototype.valueOf);function O(ue,Mi){if(typeof ue!="object")return!1;try{return Mi(ue),!0}catch{return!1}}d.isArgumentsObject=u,d.isGeneratorFunction=a,d.isTypedArray=w;function A(ue){return typeof Promise<"u"&&ue instanceof Promise||ue!==null&&typeof ue=="object"&&typeof ue.then=="function"&&typeof ue.catch=="function"}d.isPromise=A;function R(ue){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(ue):w(ue)||j(ue)}d.isArrayBufferView=R;function P(ue){return m(ue)==="Uint8Array"}d.isUint8Array=P;function D(ue){return m(ue)==="Uint8ClampedArray"}d.isUint8ClampedArray=D;function U(ue){return m(ue)==="Uint16Array"}d.isUint16Array=U;function Y(ue){return m(ue)==="Uint32Array"}d.isUint32Array=Y;function z(ue){return m(ue)==="Int8Array"}d.isInt8Array=z;function W(ue){return m(ue)==="Int16Array"}d.isInt16Array=W;function H(ue){return m(ue)==="Int32Array"}d.isInt32Array=H;function V(ue){return m(ue)==="Float32Array"}d.isFloat32Array=V;function J(ue){return m(ue)==="Float64Array"}d.isFloat64Array=J;function G(ue){return m(ue)==="BigInt64Array"}d.isBigInt64Array=G;function oe(ue){return m(ue)==="BigUint64Array"}d.isBigUint64Array=oe;function he(ue){return b(ue)==="[object Map]"}he.working=typeof Map<"u"&&he(new Map);function ne(ue){return typeof Map>"u"?!1:he.working?he(ue):ue instanceof Map}d.isMap=ne;function Fe(ue){return b(ue)==="[object Set]"}Fe.working=typeof Set<"u"&&Fe(new Set);function de(ue){return typeof Set>"u"?!1:Fe.working?Fe(ue):ue instanceof Set}d.isSet=de;function ke(ue){return b(ue)==="[object WeakMap]"}ke.working=typeof WeakMap<"u"&&ke(new WeakMap);function Ue(ue){return typeof WeakMap>"u"?!1:ke.working?ke(ue):ue instanceof WeakMap}d.isWeakMap=Ue;function at(ue){return b(ue)==="[object WeakSet]"}at.working=typeof WeakSet<"u"&&at(new WeakSet);function Tt(ue){return at(ue)}d.isWeakSet=Tt;function Ft(ue){return b(ue)==="[object ArrayBuffer]"}Ft.working=typeof ArrayBuffer<"u"&&Ft(new ArrayBuffer);function _e(ue){return typeof ArrayBuffer>"u"?!1:Ft.working?Ft(ue):ue instanceof ArrayBuffer}d.isArrayBuffer=_e;function q(ue){return b(ue)==="[object DataView]"}q.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&q(new DataView(new ArrayBuffer(1),0,1));function j(ue){return typeof DataView>"u"?!1:q.working?q(ue):ue instanceof DataView}d.isDataView=j;function L(ue){return b(ue)==="[object SharedArrayBuffer]"}L.working=typeof SharedArrayBuffer<"u"&&L(new SharedArrayBuffer);function K(ue){return typeof SharedArrayBuffer>"u"?!1:L.working?L(ue):ue instanceof SharedArrayBuffer}d.isSharedArrayBuffer=K;function Q(ue){return b(ue)==="[object AsyncFunction]"}d.isAsyncFunction=Q;function ae(ue){return b(ue)==="[object Map Iterator]"}d.isMapIterator=ae;function se(ue){return b(ue)==="[object Set Iterator]"}d.isSetIterator=se;function ge(ue){return b(ue)==="[object Generator]"}d.isGeneratorObject=ge;function Ee(ue){return b(ue)==="[object WebAssembly.Module]"}d.isWebAssemblyCompiledModule=Ee;function Ve(ue){return O(ue,S)}d.isNumberObject=Ve;function Vt(ue){return O(ue,x)}d.isStringObject=Vt;function nn(ue){return O(ue,k)}d.isBooleanObject=nn;function Lt(ue){return o&&O(ue,I)}d.isBigIntObject=Lt;function is(ue){return T&&O(ue,B)}d.isSymbolObject=is;function vs(ue){return Ve(ue)||Vt(ue)||nn(ue)||Lt(ue)||is(ue)}d.isBoxedPrimitive=vs;function Ss(ue){return typeof Uint8Array<"u"&&(_e(ue)||K(ue))}d.isAnyArrayBuffer=Ss,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(ue){Object.defineProperty(d,ue,{enumerable:!1,value:function(){throw new Error(ue+" is not supported in userland")}})})},9539:(c,d,f)=>{var u=Object.getOwnPropertyDescriptors||function(j){for(var L=Object.keys(j),K={},Q=0;Q<L.length;Q++)K[L[Q]]=Object.getOwnPropertyDescriptor(j,L[Q]);return K},a=/%[sdj%]/g;d.format=function(q){if(!z(q)){for(var j=[],L=0;L<arguments.length;L++)j.push(o(arguments[L]));return j.join(" ")}for(var L=1,K=arguments,Q=K.length,ae=String(q).replace(a,function(ge){if(ge==="%%")return"%";if(L>=Q)return ge;switch(ge){case"%s":return String(K[L++]);case"%d":return Number(K[L++]);case"%j":try{return JSON.stringify(K[L++])}catch{return"[Circular]"}default:return ge}}),se=K[L];L<Q;se=K[++L])D(se)||!J(se)?ae+=" "+se:ae+=" "+o(se);return ae},d.deprecate=function(q,j){if(typeof process<"u"&&process.noDeprecation===!0)return q;if(typeof process>"u")return function(){return d.deprecate(q,j).apply(this,arguments)};var L=!1;function K(){if(!L){if(process.throwDeprecation)throw new Error(j);process.traceDeprecation?console.trace(j):console.error(j),L=!0}return q.apply(this,arguments)}return K};var m={},w=/^$/;if({BROWSER:!0}.NODE_DEBUG){var y={BROWSER:!0}.NODE_DEBUG;y=y.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),w=new RegExp("^"+y+"$","i")}d.debuglog=function(q){if(q=q.toUpperCase(),!m[q])if(w.test(q)){var j=process.pid;m[q]=function(){var L=d.format.apply(d,arguments);console.error("%s %d: %s",q,j,L)}}else m[q]=function(){};return m[q]};function o(q,j){var L={seen:[],stylize:b};return arguments.length>=3&&(L.depth=arguments[2]),arguments.length>=4&&(L.colors=arguments[3]),P(j)?L.showHidden=j:j&&d._extend(L,j),H(L.showHidden)&&(L.showHidden=!1),H(L.depth)&&(L.depth=2),H(L.colors)&&(L.colors=!1),H(L.customInspect)&&(L.customInspect=!0),L.colors&&(L.stylize=T),x(L,q,L.depth)}d.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function T(q,j){var L=o.styles[j];return L?"\x1B["+o.colors[L][0]+"m"+q+"\x1B["+o.colors[L][1]+"m":q}function b(q,j){return q}function S(q){var j={};return q.forEach(function(L,K){j[L]=!0}),j}function x(q,j,L){if(q.customInspect&&j&&he(j.inspect)&&j.inspect!==d.inspect&&!(j.constructor&&j.constructor.prototype===j)){var K=j.inspect(L,q);return z(K)||(K=x(q,K,L)),K}var Q=k(q,j);if(Q)return Q;var ae=Object.keys(j),se=S(ae);if(q.showHidden&&(ae=Object.getOwnPropertyNames(j)),oe(j)&&(ae.indexOf("message")>=0||ae.indexOf("description")>=0))return I(j);if(ae.length===0){if(he(j)){var ge=j.name?": "+j.name:"";return q.stylize("[Function"+ge+"]","special")}if(V(j))return q.stylize(RegExp.prototype.toString.call(j),"regexp");if(G(j))return q.stylize(Date.prototype.toString.call(j),"date");if(oe(j))return I(j)}var Ee="",Ve=!1,Vt=["{","}"];if(R(j)&&(Ve=!0,Vt=["[","]"]),he(j)){var nn=j.name?": "+j.name:"";Ee=" [Function"+nn+"]"}if(V(j)&&(Ee=" "+RegExp.prototype.toString.call(j)),G(j)&&(Ee=" "+Date.prototype.toUTCString.call(j)),oe(j)&&(Ee=" "+I(j)),ae.length===0&&(!Ve||j.length==0))return Vt[0]+Ee+Vt[1];if(L<0)return V(j)?q.stylize(RegExp.prototype.toString.call(j),"regexp"):q.stylize("[Object]","special");q.seen.push(j);var Lt;return Ve?Lt=B(q,j,L,se,ae):Lt=ae.map(function(is){return O(q,j,L,se,is,Ve)}),q.seen.pop(),A(Lt,Ee,Vt)}function k(q,j){if(H(j))return q.stylize("undefined","undefined");if(z(j)){var L="'"+JSON.stringify(j).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return q.stylize(L,"string")}if(Y(j))return q.stylize(""+j,"number");if(P(j))return q.stylize(""+j,"boolean");if(D(j))return q.stylize("null","null")}function I(q){return"["+Error.prototype.toString.call(q)+"]"}function B(q,j,L,K,Q){for(var ae=[],se=0,ge=j.length;se<ge;++se)at(j,String(se))?ae.push(O(q,j,L,K,String(se),!0)):ae.push("");return Q.forEach(function(Ee){Ee.match(/^\d+$/)||ae.push(O(q,j,L,K,Ee,!0))}),ae}function O(q,j,L,K,Q,ae){var se,ge,Ee;if(Ee=Object.getOwnPropertyDescriptor(j,Q)||{value:j[Q]},Ee.get?Ee.set?ge=q.stylize("[Getter/Setter]","special"):ge=q.stylize("[Getter]","special"):Ee.set&&(ge=q.stylize("[Setter]","special")),at(K,Q)||(se="["+Q+"]"),ge||(q.seen.indexOf(Ee.value)<0?(D(L)?ge=x(q,Ee.value,null):ge=x(q,Ee.value,L-1),ge.indexOf(`
`)>-1&&(ae?ge=ge.split(`
`).map(function(Ve){return"  "+Ve}).join(`
`).substr(2):ge=`
`+ge.split(`
`).map(function(Ve){return"   "+Ve}).join(`
`))):ge=q.stylize("[Circular]","special")),H(se)){if(ae&&Q.match(/^\d+$/))return ge;se=JSON.stringify(""+Q),se.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(se=se.substr(1,se.length-2),se=q.stylize(se,"name")):(se=se.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),se=q.stylize(se,"string"))}return se+": "+ge}function A(q,j,L){var K=q.reduce(function(Q,ae){return ae.indexOf(`
`)>=0,Q+ae.replace(/\u001b\[\d\d?m/g,"").length+1},0);return K>60?L[0]+(j===""?"":j+`
 `)+" "+q.join(`,
  `)+" "+L[1]:L[0]+j+" "+q.join(", ")+" "+L[1]}d.types=f(5955);function R(q){return Array.isArray(q)}d.isArray=R;function P(q){return typeof q=="boolean"}d.isBoolean=P;function D(q){return q===null}d.isNull=D;function U(q){return q==null}d.isNullOrUndefined=U;function Y(q){return typeof q=="number"}d.isNumber=Y;function z(q){return typeof q=="string"}d.isString=z;function W(q){return typeof q=="symbol"}d.isSymbol=W;function H(q){return q===void 0}d.isUndefined=H;function V(q){return J(q)&&Fe(q)==="[object RegExp]"}d.isRegExp=V,d.types.isRegExp=V;function J(q){return typeof q=="object"&&q!==null}d.isObject=J;function G(q){return J(q)&&Fe(q)==="[object Date]"}d.isDate=G,d.types.isDate=G;function oe(q){return J(q)&&(Fe(q)==="[object Error]"||q instanceof Error)}d.isError=oe,d.types.isNativeError=oe;function he(q){return typeof q=="function"}d.isFunction=he;function ne(q){return q===null||typeof q=="boolean"||typeof q=="number"||typeof q=="string"||typeof q=="symbol"||typeof q>"u"}d.isPrimitive=ne,d.isBuffer=f(384);function Fe(q){return Object.prototype.toString.call(q)}function de(q){return q<10?"0"+q.toString(10):q.toString(10)}var ke=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Ue(){var q=new Date,j=[de(q.getHours()),de(q.getMinutes()),de(q.getSeconds())].join(":");return[q.getDate(),ke[q.getMonth()],j].join(" ")}d.log=function(){console.log("%s - %s",Ue(),d.format.apply(d,arguments))},d.inherits=f(5717),d._extend=function(q,j){if(!j||!J(j))return q;for(var L=Object.keys(j),K=L.length;K--;)q[L[K]]=j[L[K]];return q};function at(q,j){return Object.prototype.hasOwnProperty.call(q,j)}var Tt=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;d.promisify=function(j){if(typeof j!="function")throw new TypeError('The "original" argument must be of type Function');if(Tt&&j[Tt]){var L=j[Tt];if(typeof L!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(L,Tt,{value:L,enumerable:!1,writable:!1,configurable:!0}),L}function L(){for(var K,Q,ae=new Promise(function(Ee,Ve){K=Ee,Q=Ve}),se=[],ge=0;ge<arguments.length;ge++)se.push(arguments[ge]);se.push(function(Ee,Ve){Ee?Q(Ee):K(Ve)});try{j.apply(this,se)}catch(Ee){Q(Ee)}return ae}return Object.setPrototypeOf(L,Object.getPrototypeOf(j)),Tt&&Object.defineProperty(L,Tt,{value:L,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(L,u(j))},d.promisify.custom=Tt;function Ft(q,j){if(!q){var L=new Error("Promise was rejected with a falsy value");L.reason=q,q=L}return j(q)}function _e(q){if(typeof q!="function")throw new TypeError('The "original" argument must be of type Function');function j(){for(var L=[],K=0;K<arguments.length;K++)L.push(arguments[K]);var Q=L.pop();if(typeof Q!="function")throw new TypeError("The last argument must be of type Function");var ae=this,se=function(){return Q.apply(ae,arguments)};q.apply(this,L).then(function(ge){process.nextTick(se.bind(null,null,ge))},function(ge){process.nextTick(Ft.bind(null,ge,se))})}return Object.setPrototypeOf(j,Object.getPrototypeOf(q)),Object.defineProperties(j,u(q)),j}d.callbackify=_e},6430:(c,d,f)=>{var u=f(9804),a=f(6314),m=f(8914),w=m("Object.prototype.toString"),y=f(1405)(),o=y&&typeof Symbol.toStringTag=="symbol",T=a(),b=m("String.prototype.slice"),S={},x=f(4079),k=Object.getPrototypeOf;o&&x&&k&&u(T,function(O){if(typeof f.g[O]=="function"){var A=new f.g[O];if(!(Symbol.toStringTag in A))throw new EvalError("this engine has support for Symbol.toStringTag, but "+O+" does not have the property! Please report this.");var R=k(A),P=x(R,Symbol.toStringTag);if(!P){var D=k(R);P=x(D,Symbol.toStringTag)}S[O]=P.get}});var I=function(A){var R=!1;return u(S,function(P,D){if(!R)try{var U=P.call(A);U===D&&(R=U)}catch{}}),R},B=f(5692);c.exports=function(A){return B(A)?o?I(A):b(w(A),8,-1):!1}},4221:(c,d,f)=>{const a=f(9262).Thrift;f(135),f(2818);const m=f(4494),w=f(3962),y=f(1396),o=f(2607),T=class{constructor(r){this.user=null,this.passwd=null,this.dbname=null,r&&(r.user!==void 0&&r.user!==null&&(this.user=r.user),r.passwd!==void 0&&r.passwd!==null&&(this.passwd=r.passwd),r.dbname!==void 0&&r.dbname!==null&&(this.dbname=r.dbname))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.user=r.readString():r.skip(_);break;case 2:_==a.Type.STRING?this.passwd=r.readString():r.skip(_);break;case 3:_==a.Type.STRING?this.dbname=r.readString():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_connect_args"),this.user!==null&&this.user!==void 0&&(r.writeFieldBegin("user",a.Type.STRING,1),r.writeString(this.user),r.writeFieldEnd()),this.passwd!==null&&this.passwd!==void 0&&(r.writeFieldBegin("passwd",a.Type.STRING,2),r.writeString(this.passwd),r.writeFieldEnd()),this.dbname!==null&&this.dbname!==void 0&&(r.writeFieldBegin("dbname",a.Type.STRING,3),r.writeString(this.dbname),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},b=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=r.success),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:_==a.Type.STRING?this.success=r.readString():r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_connect_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRING,0),r.writeString(this.success),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},S=class{constructor(r){this.inputToken=null,this.dbname=null,r&&(r.inputToken!==void 0&&r.inputToken!==null&&(this.inputToken=r.inputToken),r.dbname!==void 0&&r.dbname!==null&&(this.dbname=r.dbname))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.inputToken=r.readString():r.skip(_);break;case 2:_==a.Type.STRING?this.dbname=r.readString():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_krb5_connect_args"),this.inputToken!==null&&this.inputToken!==void 0&&(r.writeFieldBegin("inputToken",a.Type.STRING,1),r.writeString(this.inputToken),r.writeFieldEnd()),this.dbname!==null&&this.dbname!==void 0&&(r.writeFieldBegin("dbname",a.Type.STRING,2),r.writeString(this.dbname),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},x=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new o.TKrb5Session(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:_==a.Type.STRUCT?(this.success=new o.TKrb5Session,this.success.read(r)):r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_krb5_connect_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},k=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_disconnect_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},I=class{constructor(r){if(this.e=null,r instanceof o.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_disconnect_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},B=class{constructor(r){this.session=null,this.dbname=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.dbname!==void 0&&r.dbname!==null&&(this.dbname=r.dbname))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.STRING?this.dbname=r.readString():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_switch_database_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.dbname!==null&&this.dbname!==void 0&&(r.writeFieldBegin("dbname",a.Type.STRING,2),r.writeString(this.dbname),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},O=class{constructor(r){if(this.e=null,r instanceof o.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_switch_database_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},A=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_clone_session_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},R=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=r.success),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:_==a.Type.STRING?this.success=r.readString():r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_clone_session_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRING,0),r.writeString(this.success),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},P=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_server_status_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},D=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new o.TServerStatus(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:_==a.Type.STRUCT?(this.success=new o.TServerStatus,this.success.read(r)):r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_server_status_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},U=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_status_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Y=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[o.TServerStatus])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:if(_==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=new o.TServerStatus,F.read(r),this.success.push(F)}r.readListEnd()}else r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_status_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRUCT,this.success.length);for(let p in this.success)this.success.hasOwnProperty(p)&&(p=this.success[p],p.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},z=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_hardware_info_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},W=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new o.TClusterHardwareInfo(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:_==a.Type.STRUCT?(this.success=new o.TClusterHardwareInfo,this.success.read(r)):r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_hardware_info_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},H=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_tables_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},V=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:if(_==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=r.readString(),this.success.push(F)}r.readListEnd()}else r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_tables_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRING,this.success.length);for(let p in this.success)this.success.hasOwnProperty(p)&&(p=this.success[p],r.writeString(p));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},J=class{constructor(r){this.session=null,this.database_name=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.database_name!==void 0&&r.database_name!==null&&(this.database_name=r.database_name))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.STRING?this.database_name=r.readString():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_tables_for_database_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.database_name!==null&&this.database_name!==void 0&&(r.writeFieldBegin("database_name",a.Type.STRING,2),r.writeString(this.database_name),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},G=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:if(_==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=r.readString(),this.success.push(F)}r.readListEnd()}else r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_tables_for_database_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRING,this.success.length);for(let p in this.success)this.success.hasOwnProperty(p)&&(p=this.success[p],r.writeString(p));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},oe=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_physical_tables_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},he=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:if(_==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=r.readString(),this.success.push(F)}r.readListEnd()}else r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_physical_tables_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRING,this.success.length);for(let p in this.success)this.success.hasOwnProperty(p)&&(p=this.success[p],r.writeString(p));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ne=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_views_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Fe=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:if(_==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=r.readString(),this.success.push(F)}r.readListEnd()}else r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_views_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRING,this.success.length);for(let p in this.success)this.success.hasOwnProperty(p)&&(p=this.success[p],r.writeString(p));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},de=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_tables_meta_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ke=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[o.TTableMeta])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:if(_==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=new o.TTableMeta,F.read(r),this.success.push(F)}r.readListEnd()}else r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_tables_meta_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRUCT,this.success.length);for(let p in this.success)this.success.hasOwnProperty(p)&&(p=this.success[p],p.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Ue=class{constructor(r){this.session=null,this.table_name=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.STRING?this.table_name=r.readString():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_table_details_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",a.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},at=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new o.TTableDetails(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:_==a.Type.STRUCT?(this.success=new o.TTableDetails,this.success.read(r)):r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_table_details_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Tt=class{constructor(r){this.session=null,this.table_name=null,this.database_name=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.database_name!==void 0&&r.database_name!==null&&(this.database_name=r.database_name))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.STRING?this.table_name=r.readString():r.skip(_);break;case 3:_==a.Type.STRING?this.database_name=r.readString():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_table_details_for_database_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",a.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.database_name!==null&&this.database_name!==void 0&&(r.writeFieldBegin("database_name",a.Type.STRING,3),r.writeString(this.database_name),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Ft=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new o.TTableDetails(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:_==a.Type.STRUCT?(this.success=new o.TTableDetails,this.success.read(r)):r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_table_details_for_database_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},_e=class{constructor(r){this.session=null,this.table_name=null,this.include_system_columns=!0,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.include_system_columns!==void 0&&r.include_system_columns!==null&&(this.include_system_columns=r.include_system_columns))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.STRING?this.table_name=r.readString():r.skip(_);break;case 3:_==a.Type.BOOL?this.include_system_columns=r.readBool():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_internal_table_details_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",a.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.include_system_columns!==null&&this.include_system_columns!==void 0&&(r.writeFieldBegin("include_system_columns",a.Type.BOOL,3),r.writeBool(this.include_system_columns),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},q=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new o.TTableDetails(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:_==a.Type.STRUCT?(this.success=new o.TTableDetails,this.success.read(r)):r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_internal_table_details_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},j=class{constructor(r){this.session=null,this.table_name=null,this.database_name=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.database_name!==void 0&&r.database_name!==null&&(this.database_name=r.database_name))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.STRING?this.table_name=r.readString():r.skip(_);break;case 3:_==a.Type.STRING?this.database_name=r.readString():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_internal_table_details_for_database_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",a.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.database_name!==null&&this.database_name!==void 0&&(r.writeFieldBegin("database_name",a.Type.STRING,3),r.writeString(this.database_name),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},L=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new o.TTableDetails(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:_==a.Type.STRUCT?(this.success=new o.TTableDetails,this.success.read(r)):r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_internal_table_details_for_database_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},K=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_users_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Q=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:if(_==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=r.readString(),this.success.push(F)}r.readListEnd()}else r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_users_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRING,this.success.length);for(let p in this.success)this.success.hasOwnProperty(p)&&(p=this.success[p],r.writeString(p));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ae=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_databases_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},se=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[o.TDBInfo])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:if(_==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=new o.TDBInfo,F.read(r),this.success.push(F)}r.readListEnd()}else r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_databases_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRUCT,this.success.length);for(let p in this.success)this.success.hasOwnProperty(p)&&(p=this.success[p],p.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ge=class{constructor(r){}read(r){for(r.readStructBegin();;){const _=r.readFieldBegin().ftype;if(_==a.Type.STOP)break;r.skip(_),r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_version_args"),r.writeFieldStop(),r.writeStructEnd()}},Ee=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=r.success),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:_==a.Type.STRING?this.success=r.readString():r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_version_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRING,0),r.writeString(this.success),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Ve=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_start_heap_profile_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Vt=class{constructor(r){if(this.e=null,r instanceof o.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_start_heap_profile_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},nn=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_stop_heap_profile_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Lt=class{constructor(r){if(this.e=null,r instanceof o.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_stop_heap_profile_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},is=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_heap_profile_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},vs=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=r.success),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:_==a.Type.STRING?this.success=r.readString():r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_heap_profile_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRING,0),r.writeString(this.success),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Ss=class{constructor(r){this.session=null,this.memory_level=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.memory_level!==void 0&&r.memory_level!==null&&(this.memory_level=r.memory_level))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.STRING?this.memory_level=r.readString():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_memory_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.memory_level!==null&&this.memory_level!==void 0&&(r.writeFieldBegin("memory_level",a.Type.STRING,2),r.writeString(this.memory_level),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ue=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[o.TNodeMemoryInfo])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:if(_==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=new o.TNodeMemoryInfo,F.read(r),this.success.push(F)}r.readListEnd()}else r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_memory_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRUCT,this.success.length);for(let p in this.success)this.success.hasOwnProperty(p)&&(p=this.success[p],p.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Mi=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_clear_cpu_memory_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},fi=class{constructor(r){if(this.e=null,r instanceof o.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_clear_cpu_memory_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Pr=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_clear_gpu_memory_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Sn=class{constructor(r){if(this.e=null,r instanceof o.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_clear_gpu_memory_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},$o=class{constructor(r){this.parent_session=null,this.leaf_session=null,this.start_time_str=null,this.label=null,this.for_running_query_kernel=null,r&&(r.parent_session!==void 0&&r.parent_session!==null&&(this.parent_session=r.parent_session),r.leaf_session!==void 0&&r.leaf_session!==null&&(this.leaf_session=r.leaf_session),r.start_time_str!==void 0&&r.start_time_str!==null&&(this.start_time_str=r.start_time_str),r.label!==void 0&&r.label!==null&&(this.label=r.label),r.for_running_query_kernel!==void 0&&r.for_running_query_kernel!==null&&(this.for_running_query_kernel=r.for_running_query_kernel))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.parent_session=r.readString():r.skip(_);break;case 2:_==a.Type.STRING?this.leaf_session=r.readString():r.skip(_);break;case 3:_==a.Type.STRING?this.start_time_str=r.readString():r.skip(_);break;case 4:_==a.Type.STRING?this.label=r.readString():r.skip(_);break;case 5:_==a.Type.BOOL?this.for_running_query_kernel=r.readBool():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_cur_session_args"),this.parent_session!==null&&this.parent_session!==void 0&&(r.writeFieldBegin("parent_session",a.Type.STRING,1),r.writeString(this.parent_session),r.writeFieldEnd()),this.leaf_session!==null&&this.leaf_session!==void 0&&(r.writeFieldBegin("leaf_session",a.Type.STRING,2),r.writeString(this.leaf_session),r.writeFieldEnd()),this.start_time_str!==null&&this.start_time_str!==void 0&&(r.writeFieldBegin("start_time_str",a.Type.STRING,3),r.writeString(this.start_time_str),r.writeFieldEnd()),this.label!==null&&this.label!==void 0&&(r.writeFieldBegin("label",a.Type.STRING,4),r.writeString(this.label),r.writeFieldEnd()),this.for_running_query_kernel!==null&&this.for_running_query_kernel!==void 0&&(r.writeFieldBegin("for_running_query_kernel",a.Type.BOOL,5),r.writeBool(this.for_running_query_kernel),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Uo=class{constructor(r){if(this.e=null,r instanceof o.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_cur_session_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ss=class{constructor(r){this.parent_session=null,this.leaf_session=null,this.start_time_str=null,this.label=null,this.for_running_query_kernel=null,r&&(r.parent_session!==void 0&&r.parent_session!==null&&(this.parent_session=r.parent_session),r.leaf_session!==void 0&&r.leaf_session!==null&&(this.leaf_session=r.leaf_session),r.start_time_str!==void 0&&r.start_time_str!==null&&(this.start_time_str=r.start_time_str),r.label!==void 0&&r.label!==null&&(this.label=r.label),r.for_running_query_kernel!==void 0&&r.for_running_query_kernel!==null&&(this.for_running_query_kernel=r.for_running_query_kernel))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.parent_session=r.readString():r.skip(_);break;case 2:_==a.Type.STRING?this.leaf_session=r.readString():r.skip(_);break;case 3:_==a.Type.STRING?this.start_time_str=r.readString():r.skip(_);break;case 4:_==a.Type.STRING?this.label=r.readString():r.skip(_);break;case 5:_==a.Type.BOOL?this.for_running_query_kernel=r.readBool():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_invalidate_cur_session_args"),this.parent_session!==null&&this.parent_session!==void 0&&(r.writeFieldBegin("parent_session",a.Type.STRING,1),r.writeString(this.parent_session),r.writeFieldEnd()),this.leaf_session!==null&&this.leaf_session!==void 0&&(r.writeFieldBegin("leaf_session",a.Type.STRING,2),r.writeString(this.leaf_session),r.writeFieldEnd()),this.start_time_str!==null&&this.start_time_str!==void 0&&(r.writeFieldBegin("start_time_str",a.Type.STRING,3),r.writeString(this.start_time_str),r.writeFieldEnd()),this.label!==null&&this.label!==void 0&&(r.writeFieldBegin("label",a.Type.STRING,4),r.writeString(this.label),r.writeFieldEnd()),this.for_running_query_kernel!==null&&this.for_running_query_kernel!==void 0&&(r.writeFieldBegin("for_running_query_kernel",a.Type.BOOL,5),r.writeBool(this.for_running_query_kernel),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},zo=class{constructor(r){if(this.e=null,r instanceof o.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_invalidate_cur_session_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},C=class{constructor(r){this.session=null,this.db_id=null,this.table_id=null,this.new_epoch=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.db_id!==void 0&&r.db_id!==null&&(this.db_id=r.db_id),r.table_id!==void 0&&r.table_id!==null&&(this.table_id=r.table_id),r.new_epoch!==void 0&&r.new_epoch!==null&&(this.new_epoch=r.new_epoch))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.I32?this.db_id=r.readI32():r.skip(_);break;case 3:_==a.Type.I32?this.table_id=r.readI32():r.skip(_);break;case 4:_==a.Type.I32?this.new_epoch=r.readI32():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_table_epoch_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.db_id!==null&&this.db_id!==void 0&&(r.writeFieldBegin("db_id",a.Type.I32,2),r.writeI32(this.db_id),r.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0&&(r.writeFieldBegin("table_id",a.Type.I32,3),r.writeI32(this.table_id),r.writeFieldEnd()),this.new_epoch!==null&&this.new_epoch!==void 0&&(r.writeFieldBegin("new_epoch",a.Type.I32,4),r.writeI32(this.new_epoch),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},M=class{constructor(r){if(this.e=null,r instanceof o.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_table_epoch_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},N=class{constructor(r){this.session=null,this.table_name=null,this.new_epoch=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.new_epoch!==void 0&&r.new_epoch!==null&&(this.new_epoch=r.new_epoch))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.STRING?this.table_name=r.readString():r.skip(_);break;case 3:_==a.Type.I32?this.new_epoch=r.readI32():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_table_epoch_by_name_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",a.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.new_epoch!==null&&this.new_epoch!==void 0&&(r.writeFieldBegin("new_epoch",a.Type.I32,3),r.writeI32(this.new_epoch),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},$=class{constructor(r){if(this.e=null,r instanceof o.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_table_epoch_by_name_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},X=class{constructor(r){this.session=null,this.db_id=null,this.table_id=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.db_id!==void 0&&r.db_id!==null&&(this.db_id=r.db_id),r.table_id!==void 0&&r.table_id!==null&&(this.table_id=r.table_id))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.I32?this.db_id=r.readI32():r.skip(_);break;case 3:_==a.Type.I32?this.table_id=r.readI32():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_table_epoch_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.db_id!==null&&this.db_id!==void 0&&(r.writeFieldBegin("db_id",a.Type.I32,2),r.writeI32(this.db_id),r.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0&&(r.writeFieldBegin("table_id",a.Type.I32,3),r.writeI32(this.table_id),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ee=class{constructor(r){this.success=null,r&&r.success!==void 0&&r.success!==null&&(this.success=r.success)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:_==a.Type.I32?this.success=r.readI32():r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_table_epoch_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.I32,0),r.writeI32(this.success),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ie=class{constructor(r){this.session=null,this.table_name=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.STRING?this.table_name=r.readString():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_table_epoch_by_name_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",a.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Ie=class{constructor(r){this.success=null,r&&r.success!==void 0&&r.success!==null&&(this.success=r.success)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:_==a.Type.I32?this.success=r.readI32():r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_table_epoch_by_name_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.I32,0),r.writeI32(this.success),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Pe=class{constructor(r){this.session=null,this.db_id=null,this.table_id=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.db_id!==void 0&&r.db_id!==null&&(this.db_id=r.db_id),r.table_id!==void 0&&r.table_id!==null&&(this.table_id=r.table_id))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.I32?this.db_id=r.readI32():r.skip(_);break;case 3:_==a.Type.I32?this.table_id=r.readI32():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_table_epochs_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.db_id!==null&&this.db_id!==void 0&&(r.writeFieldBegin("db_id",a.Type.I32,2),r.writeI32(this.db_id),r.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0&&(r.writeFieldBegin("table_id",a.Type.I32,3),r.writeI32(this.table_id),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},De=class{constructor(r){this.success=null,r&&r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[o.TTableEpochInfo]))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:if(_==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=new o.TTableEpochInfo,F.read(r),this.success.push(F)}r.readListEnd()}else r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_table_epochs_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRUCT,this.success.length);for(let p in this.success)this.success.hasOwnProperty(p)&&(p=this.success[p],p.write(r));r.writeListEnd(),r.writeFieldEnd()}r.writeFieldStop(),r.writeStructEnd()}},He=class{constructor(r){this.session=null,this.db_id=null,this.table_epochs=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.db_id!==void 0&&r.db_id!==null&&(this.db_id=r.db_id),r.table_epochs!==void 0&&r.table_epochs!==null&&(this.table_epochs=a.copyList(r.table_epochs,[o.TTableEpochInfo])))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.I32?this.db_id=r.readI32():r.skip(_);break;case 3:if(_==a.Type.LIST){this.table_epochs=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=new o.TTableEpochInfo,F.read(r),this.table_epochs.push(F)}r.readListEnd()}else r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_set_table_epochs_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.db_id!==null&&this.db_id!==void 0&&(r.writeFieldBegin("db_id",a.Type.I32,2),r.writeI32(this.db_id),r.writeFieldEnd()),this.table_epochs!==null&&this.table_epochs!==void 0){r.writeFieldBegin("table_epochs",a.Type.LIST,3),r.writeListBegin(a.Type.STRUCT,this.table_epochs.length);for(let p in this.table_epochs)this.table_epochs.hasOwnProperty(p)&&(p=this.table_epochs[p],p.write(r));r.writeListEnd(),r.writeFieldEnd()}r.writeFieldStop(),r.writeStructEnd()}},We=class{constructor(r){}read(r){for(r.readStructBegin();;){const _=r.readFieldBegin().ftype;if(_==a.Type.STOP)break;r.skip(_),r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_table_epochs_result"),r.writeFieldStop(),r.writeStructEnd()}},jo=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_session_info_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Hp=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new o.TSessionInfo(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:_==a.Type.STRUCT?(this.success=new o.TSessionInfo,this.success.read(r)):r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_session_info_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ZA=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_queries_info_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Wp=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[o.TQueryInfo])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:if(_==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=new o.TQueryInfo,F.read(r),this.success.push(F)}r.readListEnd()}else r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_queries_info_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRUCT,this.success.length);for(let p in this.success)this.success.hasOwnProperty(p)&&(p=this.success[p],p.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},eO=class{constructor(r){this.session=null,this.leaf_info=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.leaf_info!==void 0&&r.leaf_info!==null&&(this.leaf_info=new o.TLeafInfo(r.leaf_info)))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.STRUCT?(this.leaf_info=new o.TLeafInfo,this.leaf_info.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_leaf_info_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.leaf_info!==null&&this.leaf_info!==void 0&&(r.writeFieldBegin("leaf_info",a.Type.STRUCT,2),this.leaf_info.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Vp=class{constructor(r){if(this.e=null,r instanceof o.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_leaf_info_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},tO=class{constructor(r){this.session=null,this.query=null,this.column_format=null,this.nonce=null,this.first_n=-1,this.at_most_n=-1,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.query!==void 0&&r.query!==null&&(this.query=r.query),r.column_format!==void 0&&r.column_format!==null&&(this.column_format=r.column_format),r.nonce!==void 0&&r.nonce!==null&&(this.nonce=r.nonce),r.first_n!==void 0&&r.first_n!==null&&(this.first_n=r.first_n),r.at_most_n!==void 0&&r.at_most_n!==null&&(this.at_most_n=r.at_most_n))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.STRING?this.query=r.readString():r.skip(_);break;case 3:_==a.Type.BOOL?this.column_format=r.readBool():r.skip(_);break;case 4:_==a.Type.STRING?this.nonce=r.readString():r.skip(_);break;case 5:_==a.Type.I32?this.first_n=r.readI32():r.skip(_);break;case 6:_==a.Type.I32?this.at_most_n=r.readI32():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_sql_execute_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.query!==null&&this.query!==void 0&&(r.writeFieldBegin("query",a.Type.STRING,2),r.writeString(this.query),r.writeFieldEnd()),this.column_format!==null&&this.column_format!==void 0&&(r.writeFieldBegin("column_format",a.Type.BOOL,3),r.writeBool(this.column_format),r.writeFieldEnd()),this.nonce!==null&&this.nonce!==void 0&&(r.writeFieldBegin("nonce",a.Type.STRING,4),r.writeString(this.nonce),r.writeFieldEnd()),this.first_n!==null&&this.first_n!==void 0&&(r.writeFieldBegin("first_n",a.Type.I32,5),r.writeI32(this.first_n),r.writeFieldEnd()),this.at_most_n!==null&&this.at_most_n!==void 0&&(r.writeFieldBegin("at_most_n",a.Type.I32,6),r.writeI32(this.at_most_n),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Yp=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new o.TQueryResult(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:_==a.Type.STRUCT?(this.success=new o.TQueryResult,this.success.read(r)):r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_sql_execute_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},nO=class{constructor(r){this.session=null,this.query=null,this.device_type=null,this.device_id=0,this.first_n=-1,this.transport_method=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.query!==void 0&&r.query!==null&&(this.query=r.query),r.device_type!==void 0&&r.device_type!==null&&(this.device_type=r.device_type),r.device_id!==void 0&&r.device_id!==null&&(this.device_id=r.device_id),r.first_n!==void 0&&r.first_n!==null&&(this.first_n=r.first_n),r.transport_method!==void 0&&r.transport_method!==null&&(this.transport_method=r.transport_method))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.STRING?this.query=r.readString():r.skip(_);break;case 3:_==a.Type.I32?this.device_type=r.readI32():r.skip(_);break;case 4:_==a.Type.I32?this.device_id=r.readI32():r.skip(_);break;case 5:_==a.Type.I32?this.first_n=r.readI32():r.skip(_);break;case 6:_==a.Type.I32?this.transport_method=r.readI32():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_sql_execute_df_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.query!==null&&this.query!==void 0&&(r.writeFieldBegin("query",a.Type.STRING,2),r.writeString(this.query),r.writeFieldEnd()),this.device_type!==null&&this.device_type!==void 0&&(r.writeFieldBegin("device_type",a.Type.I32,3),r.writeI32(this.device_type),r.writeFieldEnd()),this.device_id!==null&&this.device_id!==void 0&&(r.writeFieldBegin("device_id",a.Type.I32,4),r.writeI32(this.device_id),r.writeFieldEnd()),this.first_n!==null&&this.first_n!==void 0&&(r.writeFieldBegin("first_n",a.Type.I32,5),r.writeI32(this.first_n),r.writeFieldEnd()),this.transport_method!==null&&this.transport_method!==void 0&&(r.writeFieldBegin("transport_method",a.Type.I32,6),r.writeI32(this.transport_method),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Xp=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new o.TDataFrame(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:_==a.Type.STRUCT?(this.success=new o.TDataFrame,this.success.read(r)):r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_sql_execute_df_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},iO=class{constructor(r){this.session=null,this.query=null,this.device_id=0,this.first_n=-1,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.query!==void 0&&r.query!==null&&(this.query=r.query),r.device_id!==void 0&&r.device_id!==null&&(this.device_id=r.device_id),r.first_n!==void 0&&r.first_n!==null&&(this.first_n=r.first_n))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.STRING?this.query=r.readString():r.skip(_);break;case 3:_==a.Type.I32?this.device_id=r.readI32():r.skip(_);break;case 4:_==a.Type.I32?this.first_n=r.readI32():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_sql_execute_gdf_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.query!==null&&this.query!==void 0&&(r.writeFieldBegin("query",a.Type.STRING,2),r.writeString(this.query),r.writeFieldEnd()),this.device_id!==null&&this.device_id!==void 0&&(r.writeFieldBegin("device_id",a.Type.I32,3),r.writeI32(this.device_id),r.writeFieldEnd()),this.first_n!==null&&this.first_n!==void 0&&(r.writeFieldBegin("first_n",a.Type.I32,4),r.writeI32(this.first_n),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Kp=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new o.TDataFrame(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:_==a.Type.STRUCT?(this.success=new o.TDataFrame,this.success.read(r)):r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_sql_execute_gdf_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},sO=class{constructor(r){this.session=null,this.df=null,this.device_type=null,this.device_id=0,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.df!==void 0&&r.df!==null&&(this.df=new o.TDataFrame(r.df)),r.device_type!==void 0&&r.device_type!==null&&(this.device_type=r.device_type),r.device_id!==void 0&&r.device_id!==null&&(this.device_id=r.device_id))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.STRUCT?(this.df=new o.TDataFrame,this.df.read(r)):r.skip(_);break;case 3:_==a.Type.I32?this.device_type=r.readI32():r.skip(_);break;case 4:_==a.Type.I32?this.device_id=r.readI32():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_deallocate_df_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.df!==null&&this.df!==void 0&&(r.writeFieldBegin("df",a.Type.STRUCT,2),this.df.write(r),r.writeFieldEnd()),this.device_type!==null&&this.device_type!==void 0&&(r.writeFieldBegin("device_type",a.Type.I32,3),r.writeI32(this.device_type),r.writeFieldEnd()),this.device_id!==null&&this.device_id!==void 0&&(r.writeFieldBegin("device_id",a.Type.I32,4),r.writeI32(this.device_id),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Jp=class{constructor(r){if(this.e=null,r instanceof o.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_deallocate_df_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},rO=class{constructor(r){this.query_session=null,this.interrupt_session=null,r&&(r.query_session!==void 0&&r.query_session!==null&&(this.query_session=r.query_session),r.interrupt_session!==void 0&&r.interrupt_session!==null&&(this.interrupt_session=r.interrupt_session))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.query_session=r.readString():r.skip(_);break;case 2:_==a.Type.STRING?this.interrupt_session=r.readString():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_interrupt_args"),this.query_session!==null&&this.query_session!==void 0&&(r.writeFieldBegin("query_session",a.Type.STRING,1),r.writeString(this.query_session),r.writeFieldEnd()),this.interrupt_session!==null&&this.interrupt_session!==void 0&&(r.writeFieldBegin("interrupt_session",a.Type.STRING,2),r.writeString(this.interrupt_session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Qp=class{constructor(r){if(this.e=null,r instanceof o.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_interrupt_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},aO=class{constructor(r){this.session=null,this.query=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.query!==void 0&&r.query!==null&&(this.query=r.query))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.STRING?this.query=r.readString():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_sql_validate_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.query!==null&&this.query!==void 0&&(r.writeFieldBegin("query",a.Type.STRING,2),r.writeString(this.query),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Zp=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[o.TColumnType])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:if(_==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=new o.TColumnType,F.read(r),this.success.push(F)}r.readListEnd()}else r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_sql_validate_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRUCT,this.success.length);for(let p in this.success)this.success.hasOwnProperty(p)&&(p=this.success[p],p.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},oO=class{constructor(r){this.session=null,this.sql=null,this.cursor=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.sql!==void 0&&r.sql!==null&&(this.sql=r.sql),r.cursor!==void 0&&r.cursor!==null&&(this.cursor=r.cursor))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.STRING?this.sql=r.readString():r.skip(_);break;case 3:_==a.Type.I32?this.cursor=r.readI32():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_completion_hints_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.sql!==null&&this.sql!==void 0&&(r.writeFieldBegin("sql",a.Type.STRING,2),r.writeString(this.sql),r.writeFieldEnd()),this.cursor!==null&&this.cursor!==void 0&&(r.writeFieldBegin("cursor",a.Type.I32,3),r.writeI32(this.cursor),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ey=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[m.TCompletionHint])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:if(_==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=new m.TCompletionHint,F.read(r),this.success.push(F)}r.readListEnd()}else r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_completion_hints_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRUCT,this.success.length);for(let p in this.success)this.success.hasOwnProperty(p)&&(p=this.success[p],p.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},lO=class{constructor(r){this.session=null,this.mode=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.mode!==void 0&&r.mode!==null&&(this.mode=r.mode))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.I32?this.mode=r.readI32():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_execution_mode_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.mode!==null&&this.mode!==void 0&&(r.writeFieldBegin("mode",a.Type.I32,2),r.writeI32(this.mode),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ty=class{constructor(r){if(this.e=null,r instanceof o.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_execution_mode_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},cO=class{constructor(r){this.session=null,this.widget_id=null,this.vega_json=null,this.compression_level=null,this.nonce=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.widget_id!==void 0&&r.widget_id!==null&&(this.widget_id=r.widget_id),r.vega_json!==void 0&&r.vega_json!==null&&(this.vega_json=r.vega_json),r.compression_level!==void 0&&r.compression_level!==null&&(this.compression_level=r.compression_level),r.nonce!==void 0&&r.nonce!==null&&(this.nonce=r.nonce))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.I64?this.widget_id=r.readI64():r.skip(_);break;case 3:_==a.Type.STRING?this.vega_json=r.readString():r.skip(_);break;case 4:_==a.Type.I32?this.compression_level=r.readI32():r.skip(_);break;case 5:_==a.Type.STRING?this.nonce=r.readString():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_render_vega_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.widget_id!==null&&this.widget_id!==void 0&&(r.writeFieldBegin("widget_id",a.Type.I64,2),r.writeI64(this.widget_id),r.writeFieldEnd()),this.vega_json!==null&&this.vega_json!==void 0&&(r.writeFieldBegin("vega_json",a.Type.STRING,3),r.writeString(this.vega_json),r.writeFieldEnd()),this.compression_level!==null&&this.compression_level!==void 0&&(r.writeFieldBegin("compression_level",a.Type.I32,4),r.writeI32(this.compression_level),r.writeFieldEnd()),this.nonce!==null&&this.nonce!==void 0&&(r.writeFieldBegin("nonce",a.Type.STRING,5),r.writeString(this.nonce),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ny=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new o.TRenderResult(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:_==a.Type.STRUCT?(this.success=new o.TRenderResult,this.success.read(r)):r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_render_vega_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},dO=class{constructor(r){this.session=null,this.widget_id=null,this.pixel=null,this.table_col_names=null,this.column_format=null,this.pixelRadius=null,this.nonce=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.widget_id!==void 0&&r.widget_id!==null&&(this.widget_id=r.widget_id),r.pixel!==void 0&&r.pixel!==null&&(this.pixel=new o.TPixel(r.pixel)),r.table_col_names!==void 0&&r.table_col_names!==null&&(this.table_col_names=a.copyMap(r.table_col_names,[a.copyList,null])),r.column_format!==void 0&&r.column_format!==null&&(this.column_format=r.column_format),r.pixelRadius!==void 0&&r.pixelRadius!==null&&(this.pixelRadius=r.pixelRadius),r.nonce!==void 0&&r.nonce!==null&&(this.nonce=r.nonce))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.I64?this.widget_id=r.readI64():r.skip(_);break;case 3:_==a.Type.STRUCT?(this.pixel=new o.TPixel,this.pixel.read(r)):r.skip(_);break;case 4:if(_==a.Type.MAP){this.table_col_names={};const g=r.readMapBegin().size||0;for(let v=0;v<g;++v){let F=null,Z=null;F=r.readString(),Z=[];const je=r.readListBegin().size||0;for(let Yt=0;Yt<je;++Yt){let ja=null;ja=r.readString(),Z.push(ja)}r.readListEnd(),this.table_col_names[F]=Z}r.readMapEnd()}else r.skip(_);break;case 5:_==a.Type.BOOL?this.column_format=r.readBool():r.skip(_);break;case 6:_==a.Type.I32?this.pixelRadius=r.readI32():r.skip(_);break;case 7:_==a.Type.STRING?this.nonce=r.readString():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_result_row_for_pixel_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.widget_id!==null&&this.widget_id!==void 0&&(r.writeFieldBegin("widget_id",a.Type.I64,2),r.writeI64(this.widget_id),r.writeFieldEnd()),this.pixel!==null&&this.pixel!==void 0&&(r.writeFieldBegin("pixel",a.Type.STRUCT,3),this.pixel.write(r),r.writeFieldEnd()),this.table_col_names!==null&&this.table_col_names!==void 0){r.writeFieldBegin("table_col_names",a.Type.MAP,4),r.writeMapBegin(a.Type.STRING,a.Type.LIST,a.objectLength(this.table_col_names));for(let p in this.table_col_names)if(this.table_col_names.hasOwnProperty(p)){let _=this.table_col_names[p];r.writeString(p),r.writeListBegin(a.Type.STRING,_.length);for(let h in _)_.hasOwnProperty(h)&&(h=_[h],r.writeString(h));r.writeListEnd()}r.writeMapEnd(),r.writeFieldEnd()}this.column_format!==null&&this.column_format!==void 0&&(r.writeFieldBegin("column_format",a.Type.BOOL,5),r.writeBool(this.column_format),r.writeFieldEnd()),this.pixelRadius!==null&&this.pixelRadius!==void 0&&(r.writeFieldBegin("pixelRadius",a.Type.I32,6),r.writeI32(this.pixelRadius),r.writeFieldEnd()),this.nonce!==null&&this.nonce!==void 0&&(r.writeFieldBegin("nonce",a.Type.STRING,7),r.writeString(this.nonce),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},iy=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new o.TPixelTableRowResult(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:_==a.Type.STRUCT?(this.success=new o.TPixelTableRowResult,this.success.read(r)):r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_result_row_for_pixel_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},fO=class{constructor(r){this.session=null,this.custom_expression=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.custom_expression!==void 0&&r.custom_expression!==null&&(this.custom_expression=new o.TCustomExpression(r.custom_expression)))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.STRUCT?(this.custom_expression=new o.TCustomExpression,this.custom_expression.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_create_custom_expression_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.custom_expression!==null&&this.custom_expression!==void 0&&(r.writeFieldBegin("custom_expression",a.Type.STRUCT,2),this.custom_expression.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},sy=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=r.success),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:_==a.Type.I32?this.success=r.readI32():r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_create_custom_expression_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.I32,0),r.writeI32(this.success),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},uO=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_custom_expressions_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ry=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[o.TCustomExpression])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:if(_==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=new o.TCustomExpression,F.read(r),this.success.push(F)}r.readListEnd()}else r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_custom_expressions_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRUCT,this.success.length);for(let p in this.success)this.success.hasOwnProperty(p)&&(p=this.success[p],p.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},hO=class{constructor(r){this.session=null,this.id=null,this.expression_json=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.id!==void 0&&r.id!==null&&(this.id=r.id),r.expression_json!==void 0&&r.expression_json!==null&&(this.expression_json=r.expression_json))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.I32?this.id=r.readI32():r.skip(_);break;case 3:_==a.Type.STRING?this.expression_json=r.readString():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_update_custom_expression_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.id!==null&&this.id!==void 0&&(r.writeFieldBegin("id",a.Type.I32,2),r.writeI32(this.id),r.writeFieldEnd()),this.expression_json!==null&&this.expression_json!==void 0&&(r.writeFieldBegin("expression_json",a.Type.STRING,3),r.writeString(this.expression_json),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ay=class{constructor(r){if(this.e=null,r instanceof o.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_update_custom_expression_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},_O=class{constructor(r){this.session=null,this.custom_expression_ids=null,this.do_soft_delete=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.custom_expression_ids!==void 0&&r.custom_expression_ids!==null&&(this.custom_expression_ids=a.copyList(r.custom_expression_ids,[null])),r.do_soft_delete!==void 0&&r.do_soft_delete!==null&&(this.do_soft_delete=r.do_soft_delete))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:if(_==a.Type.LIST){this.custom_expression_ids=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=r.readI32(),this.custom_expression_ids.push(F)}r.readListEnd()}else r.skip(_);break;case 3:_==a.Type.BOOL?this.do_soft_delete=r.readBool():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_delete_custom_expressions_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.custom_expression_ids!==null&&this.custom_expression_ids!==void 0){r.writeFieldBegin("custom_expression_ids",a.Type.LIST,2),r.writeListBegin(a.Type.I32,this.custom_expression_ids.length);for(let p in this.custom_expression_ids)this.custom_expression_ids.hasOwnProperty(p)&&(p=this.custom_expression_ids[p],r.writeI32(p));r.writeListEnd(),r.writeFieldEnd()}this.do_soft_delete!==null&&this.do_soft_delete!==void 0&&(r.writeFieldBegin("do_soft_delete",a.Type.BOOL,3),r.writeBool(this.do_soft_delete),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},oy=class{constructor(r){if(this.e=null,r instanceof o.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_delete_custom_expressions_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},gO=class{constructor(r){this.session=null,this.dashboard_id=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.dashboard_id!==void 0&&r.dashboard_id!==null&&(this.dashboard_id=r.dashboard_id))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.I32?this.dashboard_id=r.readI32():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_dashboard_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.dashboard_id!==null&&this.dashboard_id!==void 0&&(r.writeFieldBegin("dashboard_id",a.Type.I32,2),r.writeI32(this.dashboard_id),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ly=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new o.TDashboard(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:_==a.Type.STRUCT?(this.success=new o.TDashboard,this.success.read(r)):r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_dashboard_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},pO=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_dashboards_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},cy=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[o.TDashboard])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:if(_==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=new o.TDashboard,F.read(r),this.success.push(F)}r.readListEnd()}else r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_dashboards_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRUCT,this.success.length);for(let p in this.success)this.success.hasOwnProperty(p)&&(p=this.success[p],p.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},yO=class{constructor(r){this.session=null,this.dashboard_name=null,this.dashboard_state=null,this.image_hash=null,this.dashboard_metadata=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.dashboard_name!==void 0&&r.dashboard_name!==null&&(this.dashboard_name=r.dashboard_name),r.dashboard_state!==void 0&&r.dashboard_state!==null&&(this.dashboard_state=r.dashboard_state),r.image_hash!==void 0&&r.image_hash!==null&&(this.image_hash=r.image_hash),r.dashboard_metadata!==void 0&&r.dashboard_metadata!==null&&(this.dashboard_metadata=r.dashboard_metadata))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.STRING?this.dashboard_name=r.readString():r.skip(_);break;case 3:_==a.Type.STRING?this.dashboard_state=r.readString():r.skip(_);break;case 4:_==a.Type.STRING?this.image_hash=r.readString():r.skip(_);break;case 5:_==a.Type.STRING?this.dashboard_metadata=r.readString():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_create_dashboard_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.dashboard_name!==null&&this.dashboard_name!==void 0&&(r.writeFieldBegin("dashboard_name",a.Type.STRING,2),r.writeString(this.dashboard_name),r.writeFieldEnd()),this.dashboard_state!==null&&this.dashboard_state!==void 0&&(r.writeFieldBegin("dashboard_state",a.Type.STRING,3),r.writeString(this.dashboard_state),r.writeFieldEnd()),this.image_hash!==null&&this.image_hash!==void 0&&(r.writeFieldBegin("image_hash",a.Type.STRING,4),r.writeString(this.image_hash),r.writeFieldEnd()),this.dashboard_metadata!==null&&this.dashboard_metadata!==void 0&&(r.writeFieldBegin("dashboard_metadata",a.Type.STRING,5),r.writeString(this.dashboard_metadata),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},dy=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=r.success),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:_==a.Type.I32?this.success=r.readI32():r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_create_dashboard_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.I32,0),r.writeI32(this.success),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},mO=class{constructor(r){this.session=null,this.dashboard_id=null,this.dashboard_name=null,this.dashboard_owner=null,this.dashboard_state=null,this.image_hash=null,this.dashboard_metadata=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.dashboard_id!==void 0&&r.dashboard_id!==null&&(this.dashboard_id=r.dashboard_id),r.dashboard_name!==void 0&&r.dashboard_name!==null&&(this.dashboard_name=r.dashboard_name),r.dashboard_owner!==void 0&&r.dashboard_owner!==null&&(this.dashboard_owner=r.dashboard_owner),r.dashboard_state!==void 0&&r.dashboard_state!==null&&(this.dashboard_state=r.dashboard_state),r.image_hash!==void 0&&r.image_hash!==null&&(this.image_hash=r.image_hash),r.dashboard_metadata!==void 0&&r.dashboard_metadata!==null&&(this.dashboard_metadata=r.dashboard_metadata))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.I32?this.dashboard_id=r.readI32():r.skip(_);break;case 3:_==a.Type.STRING?this.dashboard_name=r.readString():r.skip(_);break;case 4:_==a.Type.STRING?this.dashboard_owner=r.readString():r.skip(_);break;case 5:_==a.Type.STRING?this.dashboard_state=r.readString():r.skip(_);break;case 6:_==a.Type.STRING?this.image_hash=r.readString():r.skip(_);break;case 7:_==a.Type.STRING?this.dashboard_metadata=r.readString():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_replace_dashboard_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.dashboard_id!==null&&this.dashboard_id!==void 0&&(r.writeFieldBegin("dashboard_id",a.Type.I32,2),r.writeI32(this.dashboard_id),r.writeFieldEnd()),this.dashboard_name!==null&&this.dashboard_name!==void 0&&(r.writeFieldBegin("dashboard_name",a.Type.STRING,3),r.writeString(this.dashboard_name),r.writeFieldEnd()),this.dashboard_owner!==null&&this.dashboard_owner!==void 0&&(r.writeFieldBegin("dashboard_owner",a.Type.STRING,4),r.writeString(this.dashboard_owner),r.writeFieldEnd()),this.dashboard_state!==null&&this.dashboard_state!==void 0&&(r.writeFieldBegin("dashboard_state",a.Type.STRING,5),r.writeString(this.dashboard_state),r.writeFieldEnd()),this.image_hash!==null&&this.image_hash!==void 0&&(r.writeFieldBegin("image_hash",a.Type.STRING,6),r.writeString(this.image_hash),r.writeFieldEnd()),this.dashboard_metadata!==null&&this.dashboard_metadata!==void 0&&(r.writeFieldBegin("dashboard_metadata",a.Type.STRING,7),r.writeString(this.dashboard_metadata),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},fy=class{constructor(r){if(this.e=null,r instanceof o.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_replace_dashboard_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},wO=class{constructor(r){this.session=null,this.dashboard_id=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.dashboard_id!==void 0&&r.dashboard_id!==null&&(this.dashboard_id=r.dashboard_id))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.I32?this.dashboard_id=r.readI32():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_delete_dashboard_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.dashboard_id!==null&&this.dashboard_id!==void 0&&(r.writeFieldBegin("dashboard_id",a.Type.I32,2),r.writeI32(this.dashboard_id),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},uy=class{constructor(r){if(this.e=null,r instanceof o.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_delete_dashboard_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},bO=class{constructor(r){this.session=null,this.dashboard_ids=null,this.groups=null,this.permissions=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.dashboard_ids!==void 0&&r.dashboard_ids!==null&&(this.dashboard_ids=a.copyList(r.dashboard_ids,[null])),r.groups!==void 0&&r.groups!==null&&(this.groups=a.copyList(r.groups,[null])),r.permissions!==void 0&&r.permissions!==null&&(this.permissions=new o.TDashboardPermissions(r.permissions)))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:if(_==a.Type.LIST){this.dashboard_ids=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=r.readI32(),this.dashboard_ids.push(F)}r.readListEnd()}else r.skip(_);break;case 3:if(_==a.Type.LIST){this.groups=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=r.readString(),this.groups.push(F)}r.readListEnd()}else r.skip(_);break;case 4:_==a.Type.STRUCT?(this.permissions=new o.TDashboardPermissions,this.permissions.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_share_dashboards_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.dashboard_ids!==null&&this.dashboard_ids!==void 0){r.writeFieldBegin("dashboard_ids",a.Type.LIST,2),r.writeListBegin(a.Type.I32,this.dashboard_ids.length);for(let p in this.dashboard_ids)this.dashboard_ids.hasOwnProperty(p)&&(p=this.dashboard_ids[p],r.writeI32(p));r.writeListEnd(),r.writeFieldEnd()}if(this.groups!==null&&this.groups!==void 0){r.writeFieldBegin("groups",a.Type.LIST,3),r.writeListBegin(a.Type.STRING,this.groups.length);for(let p in this.groups)this.groups.hasOwnProperty(p)&&(p=this.groups[p],r.writeString(p));r.writeListEnd(),r.writeFieldEnd()}this.permissions!==null&&this.permissions!==void 0&&(r.writeFieldBegin("permissions",a.Type.STRUCT,4),this.permissions.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},hy=class{constructor(r){if(this.e=null,r instanceof o.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_share_dashboards_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},TO=class{constructor(r){this.session=null,this.dashboard_ids=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.dashboard_ids!==void 0&&r.dashboard_ids!==null&&(this.dashboard_ids=a.copyList(r.dashboard_ids,[null])))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:if(_==a.Type.LIST){this.dashboard_ids=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=r.readI32(),this.dashboard_ids.push(F)}r.readListEnd()}else r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_delete_dashboards_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.dashboard_ids!==null&&this.dashboard_ids!==void 0){r.writeFieldBegin("dashboard_ids",a.Type.LIST,2),r.writeListBegin(a.Type.I32,this.dashboard_ids.length);for(let p in this.dashboard_ids)this.dashboard_ids.hasOwnProperty(p)&&(p=this.dashboard_ids[p],r.writeI32(p));r.writeListEnd(),r.writeFieldEnd()}r.writeFieldStop(),r.writeStructEnd()}},_y=class{constructor(r){if(this.e=null,r instanceof o.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_delete_dashboards_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},EO=class{constructor(r){this.session=null,this.dashboard_id=null,this.groups=null,this.objects=null,this.permissions=null,this.grant_role=!1,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.dashboard_id!==void 0&&r.dashboard_id!==null&&(this.dashboard_id=r.dashboard_id),r.groups!==void 0&&r.groups!==null&&(this.groups=a.copyList(r.groups,[null])),r.objects!==void 0&&r.objects!==null&&(this.objects=a.copyList(r.objects,[null])),r.permissions!==void 0&&r.permissions!==null&&(this.permissions=new o.TDashboardPermissions(r.permissions)),r.grant_role!==void 0&&r.grant_role!==null&&(this.grant_role=r.grant_role))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.I32?this.dashboard_id=r.readI32():r.skip(_);break;case 3:if(_==a.Type.LIST){this.groups=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=r.readString(),this.groups.push(F)}r.readListEnd()}else r.skip(_);break;case 4:if(_==a.Type.LIST){this.objects=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=r.readString(),this.objects.push(F)}r.readListEnd()}else r.skip(_);break;case 5:_==a.Type.STRUCT?(this.permissions=new o.TDashboardPermissions,this.permissions.read(r)):r.skip(_);break;case 6:_==a.Type.BOOL?this.grant_role=r.readBool():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_share_dashboard_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.dashboard_id!==null&&this.dashboard_id!==void 0&&(r.writeFieldBegin("dashboard_id",a.Type.I32,2),r.writeI32(this.dashboard_id),r.writeFieldEnd()),this.groups!==null&&this.groups!==void 0){r.writeFieldBegin("groups",a.Type.LIST,3),r.writeListBegin(a.Type.STRING,this.groups.length);for(let p in this.groups)this.groups.hasOwnProperty(p)&&(p=this.groups[p],r.writeString(p));r.writeListEnd(),r.writeFieldEnd()}if(this.objects!==null&&this.objects!==void 0){r.writeFieldBegin("objects",a.Type.LIST,4),r.writeListBegin(a.Type.STRING,this.objects.length);for(let p in this.objects)this.objects.hasOwnProperty(p)&&(p=this.objects[p],r.writeString(p));r.writeListEnd(),r.writeFieldEnd()}this.permissions!==null&&this.permissions!==void 0&&(r.writeFieldBegin("permissions",a.Type.STRUCT,5),this.permissions.write(r),r.writeFieldEnd()),this.grant_role!==null&&this.grant_role!==void 0&&(r.writeFieldBegin("grant_role",a.Type.BOOL,6),r.writeBool(this.grant_role),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},gy=class{constructor(r){if(this.e=null,r instanceof o.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_share_dashboard_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},vO=class{constructor(r){this.session=null,this.dashboard_id=null,this.groups=null,this.objects=null,this.permissions=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.dashboard_id!==void 0&&r.dashboard_id!==null&&(this.dashboard_id=r.dashboard_id),r.groups!==void 0&&r.groups!==null&&(this.groups=a.copyList(r.groups,[null])),r.objects!==void 0&&r.objects!==null&&(this.objects=a.copyList(r.objects,[null])),r.permissions!==void 0&&r.permissions!==null&&(this.permissions=new o.TDashboardPermissions(r.permissions)))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.I32?this.dashboard_id=r.readI32():r.skip(_);break;case 3:if(_==a.Type.LIST){this.groups=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=r.readString(),this.groups.push(F)}r.readListEnd()}else r.skip(_);break;case 4:if(_==a.Type.LIST){this.objects=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=r.readString(),this.objects.push(F)}r.readListEnd()}else r.skip(_);break;case 5:_==a.Type.STRUCT?(this.permissions=new o.TDashboardPermissions,this.permissions.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_unshare_dashboard_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.dashboard_id!==null&&this.dashboard_id!==void 0&&(r.writeFieldBegin("dashboard_id",a.Type.I32,2),r.writeI32(this.dashboard_id),r.writeFieldEnd()),this.groups!==null&&this.groups!==void 0){r.writeFieldBegin("groups",a.Type.LIST,3),r.writeListBegin(a.Type.STRING,this.groups.length);for(let p in this.groups)this.groups.hasOwnProperty(p)&&(p=this.groups[p],r.writeString(p));r.writeListEnd(),r.writeFieldEnd()}if(this.objects!==null&&this.objects!==void 0){r.writeFieldBegin("objects",a.Type.LIST,4),r.writeListBegin(a.Type.STRING,this.objects.length);for(let p in this.objects)this.objects.hasOwnProperty(p)&&(p=this.objects[p],r.writeString(p));r.writeListEnd(),r.writeFieldEnd()}this.permissions!==null&&this.permissions!==void 0&&(r.writeFieldBegin("permissions",a.Type.STRUCT,5),this.permissions.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},py=class{constructor(r){if(this.e=null,r instanceof o.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_unshare_dashboard_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},SO=class{constructor(r){this.session=null,this.dashboard_ids=null,this.groups=null,this.permissions=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.dashboard_ids!==void 0&&r.dashboard_ids!==null&&(this.dashboard_ids=a.copyList(r.dashboard_ids,[null])),r.groups!==void 0&&r.groups!==null&&(this.groups=a.copyList(r.groups,[null])),r.permissions!==void 0&&r.permissions!==null&&(this.permissions=new o.TDashboardPermissions(r.permissions)))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:if(_==a.Type.LIST){this.dashboard_ids=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=r.readI32(),this.dashboard_ids.push(F)}r.readListEnd()}else r.skip(_);break;case 3:if(_==a.Type.LIST){this.groups=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=r.readString(),this.groups.push(F)}r.readListEnd()}else r.skip(_);break;case 4:_==a.Type.STRUCT?(this.permissions=new o.TDashboardPermissions,this.permissions.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_unshare_dashboards_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.dashboard_ids!==null&&this.dashboard_ids!==void 0){r.writeFieldBegin("dashboard_ids",a.Type.LIST,2),r.writeListBegin(a.Type.I32,this.dashboard_ids.length);for(let p in this.dashboard_ids)this.dashboard_ids.hasOwnProperty(p)&&(p=this.dashboard_ids[p],r.writeI32(p));r.writeListEnd(),r.writeFieldEnd()}if(this.groups!==null&&this.groups!==void 0){r.writeFieldBegin("groups",a.Type.LIST,3),r.writeListBegin(a.Type.STRING,this.groups.length);for(let p in this.groups)this.groups.hasOwnProperty(p)&&(p=this.groups[p],r.writeString(p));r.writeListEnd(),r.writeFieldEnd()}this.permissions!==null&&this.permissions!==void 0&&(r.writeFieldBegin("permissions",a.Type.STRUCT,4),this.permissions.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},yy=class{constructor(r){if(this.e=null,r instanceof o.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_unshare_dashboards_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},xO=class{constructor(r){this.session=null,this.dashboard_id=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.dashboard_id!==void 0&&r.dashboard_id!==null&&(this.dashboard_id=r.dashboard_id))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.I32?this.dashboard_id=r.readI32():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_dashboard_grantees_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.dashboard_id!==null&&this.dashboard_id!==void 0&&(r.writeFieldBegin("dashboard_id",a.Type.I32,2),r.writeI32(this.dashboard_id),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},my=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[o.TDashboardGrantees])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:if(_==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=new o.TDashboardGrantees,F.read(r),this.success.push(F)}r.readListEnd()}else r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_dashboard_grantees_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRUCT,this.success.length);for(let p in this.success)this.success.hasOwnProperty(p)&&(p=this.success[p],p.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},kO=class{constructor(r){this.session=null,this.link=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.link!==void 0&&r.link!==null&&(this.link=r.link))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.STRING?this.link=r.readString():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_link_view_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.link!==null&&this.link!==void 0&&(r.writeFieldBegin("link",a.Type.STRING,2),r.writeString(this.link),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},wy=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new o.TFrontendView(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:_==a.Type.STRUCT?(this.success=new o.TFrontendView,this.success.read(r)):r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_link_view_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},BO=class{constructor(r){this.session=null,this.view_state=null,this.view_metadata=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.view_state!==void 0&&r.view_state!==null&&(this.view_state=r.view_state),r.view_metadata!==void 0&&r.view_metadata!==null&&(this.view_metadata=r.view_metadata))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.STRING?this.view_state=r.readString():r.skip(_);break;case 3:_==a.Type.STRING?this.view_metadata=r.readString():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_create_link_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.view_state!==null&&this.view_state!==void 0&&(r.writeFieldBegin("view_state",a.Type.STRING,2),r.writeString(this.view_state),r.writeFieldEnd()),this.view_metadata!==null&&this.view_metadata!==void 0&&(r.writeFieldBegin("view_metadata",a.Type.STRING,3),r.writeString(this.view_metadata),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},by=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=r.success),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:_==a.Type.STRING?this.success=r.readString():r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_create_link_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRING,0),r.writeString(this.success),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},FO=class{constructor(r){this.session=null,this.table_name=null,this.rows=null,this.column_names=[],r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.rows!==void 0&&r.rows!==null&&(this.rows=a.copyList(r.rows,[o.TRow])),r.column_names!==void 0&&r.column_names!==null&&(this.column_names=a.copyList(r.column_names,[null])))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.STRING?this.table_name=r.readString():r.skip(_);break;case 3:if(_==a.Type.LIST){this.rows=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=new o.TRow,F.read(r),this.rows.push(F)}r.readListEnd()}else r.skip(_);break;case 4:if(_==a.Type.LIST){this.column_names=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=r.readString(),this.column_names.push(F)}r.readListEnd()}else r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_load_table_binary_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",a.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.rows!==null&&this.rows!==void 0){r.writeFieldBegin("rows",a.Type.LIST,3),r.writeListBegin(a.Type.STRUCT,this.rows.length);for(let p in this.rows)this.rows.hasOwnProperty(p)&&(p=this.rows[p],p.write(r));r.writeListEnd(),r.writeFieldEnd()}if(this.column_names!==null&&this.column_names!==void 0){r.writeFieldBegin("column_names",a.Type.LIST,4),r.writeListBegin(a.Type.STRING,this.column_names.length);for(let p in this.column_names)this.column_names.hasOwnProperty(p)&&(p=this.column_names[p],r.writeString(p));r.writeListEnd(),r.writeFieldEnd()}r.writeFieldStop(),r.writeStructEnd()}},Ty=class{constructor(r){if(this.e=null,r instanceof o.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_load_table_binary_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},IO=class{constructor(r){this.session=null,this.table_name=null,this.cols=null,this.column_names=[],r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.cols!==void 0&&r.cols!==null&&(this.cols=a.copyList(r.cols,[o.TColumn])),r.column_names!==void 0&&r.column_names!==null&&(this.column_names=a.copyList(r.column_names,[null])))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.STRING?this.table_name=r.readString():r.skip(_);break;case 3:if(_==a.Type.LIST){this.cols=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=new o.TColumn,F.read(r),this.cols.push(F)}r.readListEnd()}else r.skip(_);break;case 4:if(_==a.Type.LIST){this.column_names=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=r.readString(),this.column_names.push(F)}r.readListEnd()}else r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_load_table_binary_columnar_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",a.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.cols!==null&&this.cols!==void 0){r.writeFieldBegin("cols",a.Type.LIST,3),r.writeListBegin(a.Type.STRUCT,this.cols.length);for(let p in this.cols)this.cols.hasOwnProperty(p)&&(p=this.cols[p],p.write(r));r.writeListEnd(),r.writeFieldEnd()}if(this.column_names!==null&&this.column_names!==void 0){r.writeFieldBegin("column_names",a.Type.LIST,4),r.writeListBegin(a.Type.STRING,this.column_names.length);for(let p in this.column_names)this.column_names.hasOwnProperty(p)&&(p=this.column_names[p],r.writeString(p));r.writeListEnd(),r.writeFieldEnd()}r.writeFieldStop(),r.writeStructEnd()}},Ey=class{constructor(r){if(this.e=null,r instanceof o.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_load_table_binary_columnar_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},MO=class{constructor(r){this.session=null,this.table_name=null,this.cols=null,this.column_names=[],this.assign_render_groups=!0,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.cols!==void 0&&r.cols!==null&&(this.cols=a.copyList(r.cols,[o.TColumn])),r.column_names!==void 0&&r.column_names!==null&&(this.column_names=a.copyList(r.column_names,[null])),r.assign_render_groups!==void 0&&r.assign_render_groups!==null&&(this.assign_render_groups=r.assign_render_groups))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.STRING?this.table_name=r.readString():r.skip(_);break;case 3:if(_==a.Type.LIST){this.cols=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=new o.TColumn,F.read(r),this.cols.push(F)}r.readListEnd()}else r.skip(_);break;case 4:if(_==a.Type.LIST){this.column_names=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=r.readString(),this.column_names.push(F)}r.readListEnd()}else r.skip(_);break;case 5:_==a.Type.BOOL?this.assign_render_groups=r.readBool():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_load_table_binary_columnar_polys_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",a.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.cols!==null&&this.cols!==void 0){r.writeFieldBegin("cols",a.Type.LIST,3),r.writeListBegin(a.Type.STRUCT,this.cols.length);for(let p in this.cols)this.cols.hasOwnProperty(p)&&(p=this.cols[p],p.write(r));r.writeListEnd(),r.writeFieldEnd()}if(this.column_names!==null&&this.column_names!==void 0){r.writeFieldBegin("column_names",a.Type.LIST,4),r.writeListBegin(a.Type.STRING,this.column_names.length);for(let p in this.column_names)this.column_names.hasOwnProperty(p)&&(p=this.column_names[p],r.writeString(p));r.writeListEnd(),r.writeFieldEnd()}this.assign_render_groups!==null&&this.assign_render_groups!==void 0&&(r.writeFieldBegin("assign_render_groups",a.Type.BOOL,5),r.writeBool(this.assign_render_groups),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},vy=class{constructor(r){if(this.e=null,r instanceof o.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_load_table_binary_columnar_polys_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},AO=class{constructor(r){this.session=null,this.table_name=null,this.arrow_stream=null,this.use_column_names=!1,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.arrow_stream!==void 0&&r.arrow_stream!==null&&(this.arrow_stream=r.arrow_stream),r.use_column_names!==void 0&&r.use_column_names!==null&&(this.use_column_names=r.use_column_names))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.STRING?this.table_name=r.readString():r.skip(_);break;case 3:_==a.Type.STRING?this.arrow_stream=r.readBinary():r.skip(_);break;case 4:_==a.Type.BOOL?this.use_column_names=r.readBool():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_load_table_binary_arrow_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",a.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.arrow_stream!==null&&this.arrow_stream!==void 0&&(r.writeFieldBegin("arrow_stream",a.Type.STRING,3),r.writeBinary(this.arrow_stream),r.writeFieldEnd()),this.use_column_names!==null&&this.use_column_names!==void 0&&(r.writeFieldBegin("use_column_names",a.Type.BOOL,4),r.writeBool(this.use_column_names),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Sy=class{constructor(r){if(this.e=null,r instanceof o.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_load_table_binary_arrow_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},OO=class{constructor(r){this.session=null,this.table_name=null,this.rows=null,this.column_names=[],r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.rows!==void 0&&r.rows!==null&&(this.rows=a.copyList(r.rows,[o.TStringRow])),r.column_names!==void 0&&r.column_names!==null&&(this.column_names=a.copyList(r.column_names,[null])))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.STRING?this.table_name=r.readString():r.skip(_);break;case 3:if(_==a.Type.LIST){this.rows=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=new o.TStringRow,F.read(r),this.rows.push(F)}r.readListEnd()}else r.skip(_);break;case 4:if(_==a.Type.LIST){this.column_names=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=r.readString(),this.column_names.push(F)}r.readListEnd()}else r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_load_table_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",a.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.rows!==null&&this.rows!==void 0){r.writeFieldBegin("rows",a.Type.LIST,3),r.writeListBegin(a.Type.STRUCT,this.rows.length);for(let p in this.rows)this.rows.hasOwnProperty(p)&&(p=this.rows[p],p.write(r));r.writeListEnd(),r.writeFieldEnd()}if(this.column_names!==null&&this.column_names!==void 0){r.writeFieldBegin("column_names",a.Type.LIST,4),r.writeListBegin(a.Type.STRING,this.column_names.length);for(let p in this.column_names)this.column_names.hasOwnProperty(p)&&(p=this.column_names[p],r.writeString(p));r.writeListEnd(),r.writeFieldEnd()}r.writeFieldStop(),r.writeStructEnd()}},xy=class{constructor(r){if(this.e=null,r instanceof o.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_load_table_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},NO=class{constructor(r){this.session=null,this.file_name=null,this.copy_params=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.file_name!==void 0&&r.file_name!==null&&(this.file_name=r.file_name),r.copy_params!==void 0&&r.copy_params!==null&&(this.copy_params=new o.TCopyParams(r.copy_params)))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.STRING?this.file_name=r.readString():r.skip(_);break;case 3:_==a.Type.STRUCT?(this.copy_params=new o.TCopyParams,this.copy_params.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_detect_column_types_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.file_name!==null&&this.file_name!==void 0&&(r.writeFieldBegin("file_name",a.Type.STRING,2),r.writeString(this.file_name),r.writeFieldEnd()),this.copy_params!==null&&this.copy_params!==void 0&&(r.writeFieldBegin("copy_params",a.Type.STRUCT,3),this.copy_params.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ky=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new o.TDetectResult(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:_==a.Type.STRUCT?(this.success=new o.TDetectResult,this.success.read(r)):r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_detect_column_types_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},CO=class{constructor(r){this.session=null,this.table_name=null,this.row_desc=null,this.create_params=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.row_desc!==void 0&&r.row_desc!==null&&(this.row_desc=a.copyList(r.row_desc,[o.TColumnType])),r.create_params!==void 0&&r.create_params!==null&&(this.create_params=new o.TCreateParams(r.create_params)))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.STRING?this.table_name=r.readString():r.skip(_);break;case 3:if(_==a.Type.LIST){this.row_desc=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=new o.TColumnType,F.read(r),this.row_desc.push(F)}r.readListEnd()}else r.skip(_);break;case 4:_==a.Type.STRUCT?(this.create_params=new o.TCreateParams,this.create_params.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_create_table_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",a.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.row_desc!==null&&this.row_desc!==void 0){r.writeFieldBegin("row_desc",a.Type.LIST,3),r.writeListBegin(a.Type.STRUCT,this.row_desc.length);for(let p in this.row_desc)this.row_desc.hasOwnProperty(p)&&(p=this.row_desc[p],p.write(r));r.writeListEnd(),r.writeFieldEnd()}this.create_params!==null&&this.create_params!==void 0&&(r.writeFieldBegin("create_params",a.Type.STRUCT,4),this.create_params.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},By=class{constructor(r){if(this.e=null,r instanceof o.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_create_table_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},RO=class{constructor(r){this.session=null,this.table_name=null,this.file_name=null,this.copy_params=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.file_name!==void 0&&r.file_name!==null&&(this.file_name=r.file_name),r.copy_params!==void 0&&r.copy_params!==null&&(this.copy_params=new o.TCopyParams(r.copy_params)))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.STRING?this.table_name=r.readString():r.skip(_);break;case 3:_==a.Type.STRING?this.file_name=r.readString():r.skip(_);break;case 4:_==a.Type.STRUCT?(this.copy_params=new o.TCopyParams,this.copy_params.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_import_table_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",a.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.file_name!==null&&this.file_name!==void 0&&(r.writeFieldBegin("file_name",a.Type.STRING,3),r.writeString(this.file_name),r.writeFieldEnd()),this.copy_params!==null&&this.copy_params!==void 0&&(r.writeFieldBegin("copy_params",a.Type.STRUCT,4),this.copy_params.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Fy=class{constructor(r){if(this.e=null,r instanceof o.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_import_table_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},LO=class{constructor(r){this.session=null,this.table_name=null,this.file_name=null,this.copy_params=null,this.row_desc=null,this.create_params=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.file_name!==void 0&&r.file_name!==null&&(this.file_name=r.file_name),r.copy_params!==void 0&&r.copy_params!==null&&(this.copy_params=new o.TCopyParams(r.copy_params)),r.row_desc!==void 0&&r.row_desc!==null&&(this.row_desc=a.copyList(r.row_desc,[o.TColumnType])),r.create_params!==void 0&&r.create_params!==null&&(this.create_params=new o.TCreateParams(r.create_params)))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.STRING?this.table_name=r.readString():r.skip(_);break;case 3:_==a.Type.STRING?this.file_name=r.readString():r.skip(_);break;case 4:_==a.Type.STRUCT?(this.copy_params=new o.TCopyParams,this.copy_params.read(r)):r.skip(_);break;case 5:if(_==a.Type.LIST){this.row_desc=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=new o.TColumnType,F.read(r),this.row_desc.push(F)}r.readListEnd()}else r.skip(_);break;case 6:_==a.Type.STRUCT?(this.create_params=new o.TCreateParams,this.create_params.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_import_geo_table_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",a.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.file_name!==null&&this.file_name!==void 0&&(r.writeFieldBegin("file_name",a.Type.STRING,3),r.writeString(this.file_name),r.writeFieldEnd()),this.copy_params!==null&&this.copy_params!==void 0&&(r.writeFieldBegin("copy_params",a.Type.STRUCT,4),this.copy_params.write(r),r.writeFieldEnd()),this.row_desc!==null&&this.row_desc!==void 0){r.writeFieldBegin("row_desc",a.Type.LIST,5),r.writeListBegin(a.Type.STRUCT,this.row_desc.length);for(let p in this.row_desc)this.row_desc.hasOwnProperty(p)&&(p=this.row_desc[p],p.write(r));r.writeListEnd(),r.writeFieldEnd()}this.create_params!==null&&this.create_params!==void 0&&(r.writeFieldBegin("create_params",a.Type.STRUCT,6),this.create_params.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Iy=class{constructor(r){if(this.e=null,r instanceof o.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_import_geo_table_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},PO=class{constructor(r){this.session=null,this.import_id=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.import_id!==void 0&&r.import_id!==null&&(this.import_id=r.import_id))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.STRING?this.import_id=r.readString():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_import_table_status_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.import_id!==null&&this.import_id!==void 0&&(r.writeFieldBegin("import_id",a.Type.STRING,2),r.writeString(this.import_id),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},My=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new o.TImportStatus(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:_==a.Type.STRUCT?(this.success=new o.TImportStatus,this.success.read(r)):r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_import_table_status_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},DO=class{constructor(r){this.session=null,this.archive_path=null,this.copy_params=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.archive_path!==void 0&&r.archive_path!==null&&(this.archive_path=r.archive_path),r.copy_params!==void 0&&r.copy_params!==null&&(this.copy_params=new o.TCopyParams(r.copy_params)))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.STRING?this.archive_path=r.readString():r.skip(_);break;case 3:_==a.Type.STRUCT?(this.copy_params=new o.TCopyParams,this.copy_params.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_first_geo_file_in_archive_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.archive_path!==null&&this.archive_path!==void 0&&(r.writeFieldBegin("archive_path",a.Type.STRING,2),r.writeString(this.archive_path),r.writeFieldEnd()),this.copy_params!==null&&this.copy_params!==void 0&&(r.writeFieldBegin("copy_params",a.Type.STRUCT,3),this.copy_params.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Ay=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=r.success),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:_==a.Type.STRING?this.success=r.readString():r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_first_geo_file_in_archive_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRING,0),r.writeString(this.success),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},$O=class{constructor(r){this.session=null,this.archive_path=null,this.copy_params=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.archive_path!==void 0&&r.archive_path!==null&&(this.archive_path=r.archive_path),r.copy_params!==void 0&&r.copy_params!==null&&(this.copy_params=new o.TCopyParams(r.copy_params)))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.STRING?this.archive_path=r.readString():r.skip(_);break;case 3:_==a.Type.STRUCT?(this.copy_params=new o.TCopyParams,this.copy_params.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_all_files_in_archive_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.archive_path!==null&&this.archive_path!==void 0&&(r.writeFieldBegin("archive_path",a.Type.STRING,2),r.writeString(this.archive_path),r.writeFieldEnd()),this.copy_params!==null&&this.copy_params!==void 0&&(r.writeFieldBegin("copy_params",a.Type.STRUCT,3),this.copy_params.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Oy=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:if(_==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=r.readString(),this.success.push(F)}r.readListEnd()}else r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_all_files_in_archive_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRING,this.success.length);for(let p in this.success)this.success.hasOwnProperty(p)&&(p=this.success[p],r.writeString(p));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},UO=class{constructor(r){this.session=null,this.file_name=null,this.copy_params=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.file_name!==void 0&&r.file_name!==null&&(this.file_name=r.file_name),r.copy_params!==void 0&&r.copy_params!==null&&(this.copy_params=new o.TCopyParams(r.copy_params)))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.STRING?this.file_name=r.readString():r.skip(_);break;case 3:_==a.Type.STRUCT?(this.copy_params=new o.TCopyParams,this.copy_params.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_layers_in_geo_file_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.file_name!==null&&this.file_name!==void 0&&(r.writeFieldBegin("file_name",a.Type.STRING,2),r.writeString(this.file_name),r.writeFieldEnd()),this.copy_params!==null&&this.copy_params!==void 0&&(r.writeFieldBegin("copy_params",a.Type.STRUCT,3),this.copy_params.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Ny=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[o.TGeoFileLayerInfo])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:if(_==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=new o.TGeoFileLayerInfo,F.read(r),this.success.push(F)}r.readListEnd()}else r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_layers_in_geo_file_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRUCT,this.success.length);for(let p in this.success)this.success.hasOwnProperty(p)&&(p=this.success[p],p.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},zO=class{constructor(r){this.session=null,this.query=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.query!==void 0&&r.query!==null&&(this.query=r.query))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.STRING?this.query=r.readString():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_query_get_outer_fragment_count_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.query!==null&&this.query!==void 0&&(r.writeFieldBegin("query",a.Type.STRING,2),r.writeString(this.query),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Cy=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=r.success),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:_==a.Type.I64?this.success=r.readI64():r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_query_get_outer_fragment_count_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.I64,0),r.writeI64(this.success),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},jO=class{constructor(r){this.session=null,this.table_id=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_id!==void 0&&r.table_id!==null&&(this.table_id=r.table_id))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.I32?this.table_id=r.readI32():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_check_table_consistency_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0&&(r.writeFieldBegin("table_id",a.Type.I32,2),r.writeI32(this.table_id),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Ry=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new o.TTableMeta(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:_==a.Type.STRUCT?(this.success=new o.TTableMeta,this.success.read(r)):r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_check_table_consistency_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},qO=class{constructor(r){this.leaf_session=null,this.parent_session=null,this.query_ra=null,this.start_time_str=null,this.just_explain=null,this.outer_fragment_indices=null,r&&(r.leaf_session!==void 0&&r.leaf_session!==null&&(this.leaf_session=r.leaf_session),r.parent_session!==void 0&&r.parent_session!==null&&(this.parent_session=r.parent_session),r.query_ra!==void 0&&r.query_ra!==null&&(this.query_ra=r.query_ra),r.start_time_str!==void 0&&r.start_time_str!==null&&(this.start_time_str=r.start_time_str),r.just_explain!==void 0&&r.just_explain!==null&&(this.just_explain=r.just_explain),r.outer_fragment_indices!==void 0&&r.outer_fragment_indices!==null&&(this.outer_fragment_indices=a.copyList(r.outer_fragment_indices,[null])))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.leaf_session=r.readString():r.skip(_);break;case 2:_==a.Type.STRING?this.parent_session=r.readString():r.skip(_);break;case 3:_==a.Type.STRING?this.query_ra=r.readString():r.skip(_);break;case 4:_==a.Type.STRING?this.start_time_str=r.readString():r.skip(_);break;case 5:_==a.Type.BOOL?this.just_explain=r.readBool():r.skip(_);break;case 6:if(_==a.Type.LIST){this.outer_fragment_indices=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=r.readI64(),this.outer_fragment_indices.push(F)}r.readListEnd()}else r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_start_query_args"),this.leaf_session!==null&&this.leaf_session!==void 0&&(r.writeFieldBegin("leaf_session",a.Type.STRING,1),r.writeString(this.leaf_session),r.writeFieldEnd()),this.parent_session!==null&&this.parent_session!==void 0&&(r.writeFieldBegin("parent_session",a.Type.STRING,2),r.writeString(this.parent_session),r.writeFieldEnd()),this.query_ra!==null&&this.query_ra!==void 0&&(r.writeFieldBegin("query_ra",a.Type.STRING,3),r.writeString(this.query_ra),r.writeFieldEnd()),this.start_time_str!==null&&this.start_time_str!==void 0&&(r.writeFieldBegin("start_time_str",a.Type.STRING,4),r.writeString(this.start_time_str),r.writeFieldEnd()),this.just_explain!==null&&this.just_explain!==void 0&&(r.writeFieldBegin("just_explain",a.Type.BOOL,5),r.writeBool(this.just_explain),r.writeFieldEnd()),this.outer_fragment_indices!==null&&this.outer_fragment_indices!==void 0){r.writeFieldBegin("outer_fragment_indices",a.Type.LIST,6),r.writeListBegin(a.Type.I64,this.outer_fragment_indices.length);for(let p in this.outer_fragment_indices)this.outer_fragment_indices.hasOwnProperty(p)&&(p=this.outer_fragment_indices[p],r.writeI64(p));r.writeListEnd(),r.writeFieldEnd()}r.writeFieldStop(),r.writeStructEnd()}},Ly=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new o.TPendingQuery(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:_==a.Type.STRUCT?(this.success=new o.TPendingQuery,this.success.read(r)):r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_start_query_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},GO=class{constructor(r){this.pending_query=null,this.subquery_id=null,this.start_time_str=null,r&&(r.pending_query!==void 0&&r.pending_query!==null&&(this.pending_query=new o.TPendingQuery(r.pending_query)),r.subquery_id!==void 0&&r.subquery_id!==null&&(this.subquery_id=r.subquery_id),r.start_time_str!==void 0&&r.start_time_str!==null&&(this.start_time_str=r.start_time_str))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRUCT?(this.pending_query=new o.TPendingQuery,this.pending_query.read(r)):r.skip(_);break;case 2:_==a.Type.I64?this.subquery_id=r.readI64():r.skip(_);break;case 3:_==a.Type.STRING?this.start_time_str=r.readString():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_execute_query_step_args"),this.pending_query!==null&&this.pending_query!==void 0&&(r.writeFieldBegin("pending_query",a.Type.STRUCT,1),this.pending_query.write(r),r.writeFieldEnd()),this.subquery_id!==null&&this.subquery_id!==void 0&&(r.writeFieldBegin("subquery_id",a.Type.I64,2),r.writeI64(this.subquery_id),r.writeFieldEnd()),this.start_time_str!==null&&this.start_time_str!==void 0&&(r.writeFieldBegin("start_time_str",a.Type.STRING,3),r.writeString(this.start_time_str),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Py=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new o.TStepResult(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:_==a.Type.STRUCT?(this.success=new o.TStepResult,this.success.read(r)):r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_execute_query_step_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},HO=class{constructor(r){this.serialized_rows=null,this.row_desc=null,this.query_id=null,this.subquery_id=null,this.is_final_subquery_result=null,r&&(r.serialized_rows!==void 0&&r.serialized_rows!==null&&(this.serialized_rows=new w.TSerializedRows(r.serialized_rows)),r.row_desc!==void 0&&r.row_desc!==null&&(this.row_desc=a.copyList(r.row_desc,[o.TColumnType])),r.query_id!==void 0&&r.query_id!==null&&(this.query_id=r.query_id),r.subquery_id!==void 0&&r.subquery_id!==null&&(this.subquery_id=r.subquery_id),r.is_final_subquery_result!==void 0&&r.is_final_subquery_result!==null&&(this.is_final_subquery_result=r.is_final_subquery_result))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRUCT?(this.serialized_rows=new w.TSerializedRows,this.serialized_rows.read(r)):r.skip(_);break;case 2:if(_==a.Type.LIST){this.row_desc=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=new o.TColumnType,F.read(r),this.row_desc.push(F)}r.readListEnd()}else r.skip(_);break;case 3:_==a.Type.I64?this.query_id=r.readI64():r.skip(_);break;case 4:_==a.Type.I64?this.subquery_id=r.readI64():r.skip(_);break;case 5:_==a.Type.BOOL?this.is_final_subquery_result=r.readBool():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_broadcast_serialized_rows_args"),this.serialized_rows!==null&&this.serialized_rows!==void 0&&(r.writeFieldBegin("serialized_rows",a.Type.STRUCT,1),this.serialized_rows.write(r),r.writeFieldEnd()),this.row_desc!==null&&this.row_desc!==void 0){r.writeFieldBegin("row_desc",a.Type.LIST,2),r.writeListBegin(a.Type.STRUCT,this.row_desc.length);for(let p in this.row_desc)this.row_desc.hasOwnProperty(p)&&(p=this.row_desc[p],p.write(r));r.writeListEnd(),r.writeFieldEnd()}this.query_id!==null&&this.query_id!==void 0&&(r.writeFieldBegin("query_id",a.Type.I64,3),r.writeI64(this.query_id),r.writeFieldEnd()),this.subquery_id!==null&&this.subquery_id!==void 0&&(r.writeFieldBegin("subquery_id",a.Type.I64,4),r.writeI64(this.subquery_id),r.writeFieldEnd()),this.is_final_subquery_result!==null&&this.is_final_subquery_result!==void 0&&(r.writeFieldBegin("is_final_subquery_result",a.Type.BOOL,5),r.writeBool(this.is_final_subquery_result),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Dy=class{constructor(r){if(this.e=null,r instanceof o.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_broadcast_serialized_rows_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},WO=class{constructor(r){this.session=null,this.widget_id=null,this.node_idx=null,this.vega_json=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.widget_id!==void 0&&r.widget_id!==null&&(this.widget_id=r.widget_id),r.node_idx!==void 0&&r.node_idx!==null&&(this.node_idx=r.node_idx),r.vega_json!==void 0&&r.vega_json!==null&&(this.vega_json=r.vega_json))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.I64?this.widget_id=r.readI64():r.skip(_);break;case 3:_==a.Type.I16?this.node_idx=r.readI16():r.skip(_);break;case 4:_==a.Type.STRING?this.vega_json=r.readString():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_start_render_query_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.widget_id!==null&&this.widget_id!==void 0&&(r.writeFieldBegin("widget_id",a.Type.I64,2),r.writeI64(this.widget_id),r.writeFieldEnd()),this.node_idx!==null&&this.node_idx!==void 0&&(r.writeFieldBegin("node_idx",a.Type.I16,3),r.writeI16(this.node_idx),r.writeFieldEnd()),this.vega_json!==null&&this.vega_json!==void 0&&(r.writeFieldBegin("vega_json",a.Type.STRING,4),r.writeString(this.vega_json),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},$y=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new o.TPendingRenderQuery(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:_==a.Type.STRUCT?(this.success=new o.TPendingRenderQuery,this.success.read(r)):r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_start_render_query_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},VO=class{constructor(r){this.pending_render=null,this.merged_data=null,r&&(r.pending_render!==void 0&&r.pending_render!==null&&(this.pending_render=new o.TPendingRenderQuery(r.pending_render)),r.merged_data!==void 0&&r.merged_data!==null&&(this.merged_data=a.copyMap(r.merged_data,[a.copyMap,a.copyMap,a.copyMap,a.copyList,o.TRenderDatum])))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRUCT?(this.pending_render=new o.TPendingRenderQuery,this.pending_render.read(r)):r.skip(_);break;case 2:if(_==a.Type.MAP){this.merged_data={};const g=r.readMapBegin().size||0;for(let v=0;v<g;++v){let F=null,Z=null;F=r.readString(),Z={};const je=r.readMapBegin().size||0;for(let Yt=0;Yt<je;++Yt){let ja=null,X1=null;ja=r.readString(),X1={};const TW=r.readMapBegin().size||0;for(let fN=0;fN<TW;++fN){let uN=null,K1=null;uN=r.readString(),K1={};const EW=r.readMapBegin().size||0;for(let hN=0;hN<EW;++hN){let _N=null,J1=null;_N=r.readString(),J1=[];const vW=r.readListBegin().size||0;for(let gN=0;gN<vW;++gN){let Q1=null;Q1=new o.TRenderDatum,Q1.read(r),J1.push(Q1)}r.readListEnd(),K1[_N]=J1}r.readMapEnd(),X1[uN]=K1}r.readMapEnd(),Z[ja]=X1}r.readMapEnd(),this.merged_data[F]=Z}r.readMapEnd()}else r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_execute_next_render_step_args"),this.pending_render!==null&&this.pending_render!==void 0&&(r.writeFieldBegin("pending_render",a.Type.STRUCT,1),this.pending_render.write(r),r.writeFieldEnd()),this.merged_data!==null&&this.merged_data!==void 0){r.writeFieldBegin("merged_data",a.Type.MAP,2),r.writeMapBegin(a.Type.STRING,a.Type.MAP,a.objectLength(this.merged_data));for(let p in this.merged_data)if(this.merged_data.hasOwnProperty(p)){let _=this.merged_data[p];r.writeString(p),r.writeMapBegin(a.Type.STRING,a.Type.MAP,a.objectLength(_));for(let h in _)if(_.hasOwnProperty(h)){let E=_[h];r.writeString(h),r.writeMapBegin(a.Type.STRING,a.Type.MAP,a.objectLength(E));for(let g in E)if(E.hasOwnProperty(g)){let v=E[g];r.writeString(g),r.writeMapBegin(a.Type.STRING,a.Type.LIST,a.objectLength(v));for(let F in v)if(v.hasOwnProperty(F)){let Z=v[F];r.writeString(F),r.writeListBegin(a.Type.STRUCT,Z.length);for(let ye in Z)Z.hasOwnProperty(ye)&&(ye=Z[ye],ye.write(r));r.writeListEnd()}r.writeMapEnd()}r.writeMapEnd()}r.writeMapEnd()}r.writeMapEnd(),r.writeFieldEnd()}r.writeFieldStop(),r.writeStructEnd()}},Uy=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new o.TRenderStepResult(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:_==a.Type.STRUCT?(this.success=new o.TRenderStepResult,this.success.read(r)):r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_execute_next_render_step_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},YO=class{constructor(r){this.session=null,this.insert_data=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.insert_data!==void 0&&r.insert_data!==null&&(this.insert_data=new o.TInsertData(r.insert_data)))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.STRUCT?(this.insert_data=new o.TInsertData,this.insert_data.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_insert_data_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.insert_data!==null&&this.insert_data!==void 0&&(r.writeFieldBegin("insert_data",a.Type.STRUCT,2),this.insert_data.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},zy=class{constructor(r){if(this.e=null,r instanceof o.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_insert_data_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},XO=class{constructor(r){this.session=null,this.insert_chunks=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.insert_chunks!==void 0&&r.insert_chunks!==null&&(this.insert_chunks=new o.TInsertChunks(r.insert_chunks)))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.STRUCT?(this.insert_chunks=new o.TInsertChunks,this.insert_chunks.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_insert_chunks_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.insert_chunks!==null&&this.insert_chunks!==void 0&&(r.writeFieldBegin("insert_chunks",a.Type.STRUCT,2),this.insert_chunks.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},jy=class{constructor(r){if(this.e=null,r instanceof o.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_insert_chunks_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},KO=class{constructor(r){this.session=null,this.table_id=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_id!==void 0&&r.table_id!==null&&(this.table_id=r.table_id))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.I32?this.table_id=r.readI32():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_checkpoint_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0&&(r.writeFieldBegin("table_id",a.Type.I32,2),r.writeI32(this.table_id),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},qy=class{constructor(r){if(this.e=null,r instanceof o.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_checkpoint_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},JO=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_roles_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Gy=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:if(_==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=r.readString(),this.success.push(F)}r.readListEnd()}else r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_roles_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRING,this.success.length);for(let p in this.success)this.success.hasOwnProperty(p)&&(p=this.success[p],r.writeString(p));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},QO=class{constructor(r){this.session=null,this.roleName=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.roleName!==void 0&&r.roleName!==null&&(this.roleName=r.roleName))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.STRING?this.roleName=r.readString():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_db_objects_for_grantee_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.roleName!==null&&this.roleName!==void 0&&(r.writeFieldBegin("roleName",a.Type.STRING,2),r.writeString(this.roleName),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Hy=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[o.TDBObject])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:if(_==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=new o.TDBObject,F.read(r),this.success.push(F)}r.readListEnd()}else r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_db_objects_for_grantee_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRUCT,this.success.length);for(let p in this.success)this.success.hasOwnProperty(p)&&(p=this.success[p],p.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ZO=class{constructor(r){this.session=null,this.objectName=null,this.type=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.objectName!==void 0&&r.objectName!==null&&(this.objectName=r.objectName),r.type!==void 0&&r.type!==null&&(this.type=r.type))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.STRING?this.objectName=r.readString():r.skip(_);break;case 3:_==a.Type.I32?this.type=r.readI32():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_db_object_privs_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.objectName!==null&&this.objectName!==void 0&&(r.writeFieldBegin("objectName",a.Type.STRING,2),r.writeString(this.objectName),r.writeFieldEnd()),this.type!==null&&this.type!==void 0&&(r.writeFieldBegin("type",a.Type.I32,3),r.writeI32(this.type),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Wy=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[o.TDBObject])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:if(_==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=new o.TDBObject,F.read(r),this.success.push(F)}r.readListEnd()}else r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_db_object_privs_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRUCT,this.success.length);for(let p in this.success)this.success.hasOwnProperty(p)&&(p=this.success[p],p.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},eN=class{constructor(r){this.session=null,this.userName=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.userName!==void 0&&r.userName!==null&&(this.userName=r.userName))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.STRING?this.userName=r.readString():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_all_roles_for_user_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.userName!==null&&this.userName!==void 0&&(r.writeFieldBegin("userName",a.Type.STRING,2),r.writeString(this.userName),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Vy=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:if(_==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=r.readString(),this.success.push(F)}r.readListEnd()}else r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_all_roles_for_user_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRING,this.success.length);for(let p in this.success)this.success.hasOwnProperty(p)&&(p=this.success[p],r.writeString(p));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},tN=class{constructor(r){this.session=null,this.userName=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.userName!==void 0&&r.userName!==null&&(this.userName=r.userName))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.STRING?this.userName=r.readString():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_all_effective_roles_for_user_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.userName!==null&&this.userName!==void 0&&(r.writeFieldBegin("userName",a.Type.STRING,2),r.writeString(this.userName),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Yy=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:if(_==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=r.readString(),this.success.push(F)}r.readListEnd()}else r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_all_effective_roles_for_user_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRING,this.success.length);for(let p in this.success)this.success.hasOwnProperty(p)&&(p=this.success[p],r.writeString(p));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},nN=class{constructor(r){this.session=null,this.granteeName=null,this.roleName=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.granteeName!==void 0&&r.granteeName!==null&&(this.granteeName=r.granteeName),r.roleName!==void 0&&r.roleName!==null&&(this.roleName=r.roleName))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.STRING?this.granteeName=r.readString():r.skip(_);break;case 3:_==a.Type.STRING?this.roleName=r.readString():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_has_role_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.granteeName!==null&&this.granteeName!==void 0&&(r.writeFieldBegin("granteeName",a.Type.STRING,2),r.writeString(this.granteeName),r.writeFieldEnd()),this.roleName!==null&&this.roleName!==void 0&&(r.writeFieldBegin("roleName",a.Type.STRING,3),r.writeString(this.roleName),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Xy=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=r.success),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:_==a.Type.BOOL?this.success=r.readBool():r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_has_role_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.BOOL,0),r.writeBool(this.success),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},iN=class{constructor(r){this.session=null,this.granteeName=null,this.ObjectName=null,this.objectType=null,this.permissions=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.granteeName!==void 0&&r.granteeName!==null&&(this.granteeName=r.granteeName),r.ObjectName!==void 0&&r.ObjectName!==null&&(this.ObjectName=r.ObjectName),r.objectType!==void 0&&r.objectType!==null&&(this.objectType=r.objectType),r.permissions!==void 0&&r.permissions!==null&&(this.permissions=new o.TDBObjectPermissions(r.permissions)))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.STRING?this.granteeName=r.readString():r.skip(_);break;case 3:_==a.Type.STRING?this.ObjectName=r.readString():r.skip(_);break;case 4:_==a.Type.I32?this.objectType=r.readI32():r.skip(_);break;case 5:_==a.Type.STRUCT?(this.permissions=new o.TDBObjectPermissions,this.permissions.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_has_object_privilege_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.granteeName!==null&&this.granteeName!==void 0&&(r.writeFieldBegin("granteeName",a.Type.STRING,2),r.writeString(this.granteeName),r.writeFieldEnd()),this.ObjectName!==null&&this.ObjectName!==void 0&&(r.writeFieldBegin("ObjectName",a.Type.STRING,3),r.writeString(this.ObjectName),r.writeFieldEnd()),this.objectType!==null&&this.objectType!==void 0&&(r.writeFieldBegin("objectType",a.Type.I32,4),r.writeI32(this.objectType),r.writeFieldEnd()),this.permissions!==null&&this.permissions!==void 0&&(r.writeFieldBegin("permissions",a.Type.STRUCT,5),this.permissions.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Ky=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=r.success),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:_==a.Type.BOOL?this.success=r.readBool():r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_has_object_privilege_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.BOOL,0),r.writeBool(this.success),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},sN=class{constructor(r){this.session=null,this.key=null,this.nonce="",r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.key!==void 0&&r.key!==null&&(this.key=r.key),r.nonce!==void 0&&r.nonce!==null&&(this.nonce=r.nonce))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.STRING?this.key=r.readString():r.skip(_);break;case 3:_==a.Type.STRING?this.nonce=r.readString():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_license_key_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.key!==null&&this.key!==void 0&&(r.writeFieldBegin("key",a.Type.STRING,2),r.writeString(this.key),r.writeFieldEnd()),this.nonce!==null&&this.nonce!==void 0&&(r.writeFieldBegin("nonce",a.Type.STRING,3),r.writeString(this.nonce),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Jy=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new o.TLicenseInfo(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:_==a.Type.STRUCT?(this.success=new o.TLicenseInfo,this.success.read(r)):r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_license_key_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},rN=class{constructor(r){this.session=null,this.nonce="",r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.nonce!==void 0&&r.nonce!==null&&(this.nonce=r.nonce))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:_==a.Type.STRING?this.nonce=r.readString():r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_license_claims_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.nonce!==null&&this.nonce!==void 0&&(r.writeFieldBegin("nonce",a.Type.STRING,2),r.writeString(this.nonce),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Qy=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new o.TLicenseInfo(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:_==a.Type.STRUCT?(this.success=new o.TLicenseInfo,this.success.read(r)):r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_license_claims_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},aN=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_device_parameters_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Zy=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyMap(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:if(_==a.Type.MAP){this.success={};const g=r.readMapBegin().size||0;for(let v=0;v<g;++v){let F=null,Z=null;F=r.readString(),Z=r.readString(),this.success[F]=Z}r.readMapEnd()}else r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_device_parameters_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.MAP,0),r.writeMapBegin(a.Type.STRING,a.Type.STRING,a.objectLength(this.success));for(let p in this.success)if(this.success.hasOwnProperty(p)){let _=this.success[p];r.writeString(p),r.writeString(_)}r.writeMapEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},oN=class{constructor(r){this.session=null,this.udfs=null,this.udtfs=null,this.device_ir_map=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.udfs!==void 0&&r.udfs!==null&&(this.udfs=a.copyList(r.udfs,[y.TUserDefinedFunction])),r.udtfs!==void 0&&r.udtfs!==null&&(this.udtfs=a.copyList(r.udtfs,[y.TUserDefinedTableFunction])),r.device_ir_map!==void 0&&r.device_ir_map!==null&&(this.device_ir_map=a.copyMap(r.device_ir_map,[null])))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:if(_==a.Type.LIST){this.udfs=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=new y.TUserDefinedFunction,F.read(r),this.udfs.push(F)}r.readListEnd()}else r.skip(_);break;case 3:if(_==a.Type.LIST){this.udtfs=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=new y.TUserDefinedTableFunction,F.read(r),this.udtfs.push(F)}r.readListEnd()}else r.skip(_);break;case 4:if(_==a.Type.MAP){this.device_ir_map={};const g=r.readMapBegin().size||0;for(let v=0;v<g;++v){let F=null,Z=null;F=r.readString(),Z=r.readString(),this.device_ir_map[F]=Z}r.readMapEnd()}else r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_register_runtime_extension_functions_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.udfs!==null&&this.udfs!==void 0){r.writeFieldBegin("udfs",a.Type.LIST,2),r.writeListBegin(a.Type.STRUCT,this.udfs.length);for(let p in this.udfs)this.udfs.hasOwnProperty(p)&&(p=this.udfs[p],p.write(r));r.writeListEnd(),r.writeFieldEnd()}if(this.udtfs!==null&&this.udtfs!==void 0){r.writeFieldBegin("udtfs",a.Type.LIST,3),r.writeListBegin(a.Type.STRUCT,this.udtfs.length);for(let p in this.udtfs)this.udtfs.hasOwnProperty(p)&&(p=this.udtfs[p],p.write(r));r.writeListEnd(),r.writeFieldEnd()}if(this.device_ir_map!==null&&this.device_ir_map!==void 0){r.writeFieldBegin("device_ir_map",a.Type.MAP,4),r.writeMapBegin(a.Type.STRING,a.Type.STRING,a.objectLength(this.device_ir_map));for(let p in this.device_ir_map)if(this.device_ir_map.hasOwnProperty(p)){let _=this.device_ir_map[p];r.writeString(p),r.writeString(_)}r.writeMapEnd(),r.writeFieldEnd()}r.writeFieldStop(),r.writeStructEnd()}},em=class{constructor(r){if(this.e=null,r instanceof o.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_register_runtime_extension_functions_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},lN=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_table_function_names_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},tm=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:if(_==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=r.readString(),this.success.push(F)}r.readListEnd()}else r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_table_function_names_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRING,this.success.length);for(let p in this.success)this.success.hasOwnProperty(p)&&(p=this.success[p],r.writeString(p));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},cN=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 0:r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_runtime_table_function_names_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},nm=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:if(_==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=r.readString(),this.success.push(F)}r.readListEnd()}else r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_runtime_table_function_names_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRING,this.success.length);for(let p in this.success)this.success.hasOwnProperty(p)&&(p=this.success[p],r.writeString(p));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},dN=class{constructor(r){this.session=null,this.udtf_names=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.udtf_names!==void 0&&r.udtf_names!==null&&(this.udtf_names=a.copyList(r.udtf_names,[null])))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 1:_==a.Type.STRING?this.session=r.readString():r.skip(_);break;case 2:if(_==a.Type.LIST){this.udtf_names=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=r.readString(),this.udtf_names.push(F)}r.readListEnd()}else r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_table_function_details_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.udtf_names!==null&&this.udtf_names!==void 0){r.writeFieldBegin("udtf_names",a.Type.LIST,2),r.writeListBegin(a.Type.STRING,this.udtf_names.length);for(let p in this.udtf_names)this.udtf_names.hasOwnProperty(p)&&(p=this.udtf_names[p],r.writeString(p));r.writeListEnd(),r.writeFieldEnd()}r.writeFieldStop(),r.writeStructEnd()}},im=class{constructor(r){if(this.success=null,this.e=null,r instanceof o.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[y.TUserDefinedTableFunction])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin(),_=p.ftype,h=p.fid;if(_==a.Type.STOP)break;switch(h){case 0:if(_==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let v=0;v<g;++v){let F=null;F=new y.TUserDefinedTableFunction,F.read(r),this.success.push(F)}r.readListEnd()}else r.skip(_);break;case 1:_==a.Type.STRUCT?(this.e=new o.TDBException,this.e.read(r)):r.skip(_);break;default:r.skip(_)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_table_function_details_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRUCT,this.success.length);for(let p in this.success)this.success.hasOwnProperty(p)&&(p=this.success[p],p.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}};d.Client=class{constructor(p,_){this.output=p,this.pClass=_,this._seqid=0,this._reqs={}}seqid(){return this._seqid}new_seqid(){return this._seqid+=1}connect(p,_,h){this._seqid=this.new_seqid();const E=this;return new Promise((g,v)=>{E._reqs[E.seqid()]=(F,Z)=>F?v(F):g(Z),E.send_connect(p,_,h)})}send_connect(p,_,h){const E=new this.pClass(this.output),g={user:p,passwd:_,dbname:h},v=new T(g);try{return E.writeMessageBegin("connect",a.MessageType.CALL,this.seqid()),v.write(E),E.writeMessageEnd(),this.output.flush()}catch(F){throw delete this._reqs[this.seqid()],typeof E.reset=="function"&&E.reset(),F}}recv_connect(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new b;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("connect failed: unknown result")}krb5_connect(p,_){this._seqid=this.new_seqid();const h=this;return new Promise((E,g)=>{h._reqs[h.seqid()]=(v,F)=>v?g(v):E(F),h.send_krb5_connect(p,_)})}send_krb5_connect(p,_){const h=new this.pClass(this.output),E={inputToken:p,dbname:_},g=new S(E);try{return h.writeMessageBegin("krb5_connect",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(v){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),v}}recv_krb5_connect(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new x;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("krb5_connect failed: unknown result")}disconnect(p){this._seqid=this.new_seqid();const _=this;return new Promise((h,E)=>{_._reqs[_.seqid()]=(g,v)=>g?E(g):h(v),_.send_disconnect(p)})}send_disconnect(p){const _=new this.pClass(this.output),h={session:p},E=new k(h);try{return _.writeMessageBegin("disconnect",a.MessageType.CALL,this.seqid()),E.write(_),_.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof _.reset=="function"&&_.reset(),g}}recv_disconnect(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new I;if(g.read(p),p.readMessageEnd(),g.e!==null)return E(g.e);E(null)}switch_database(p,_){this._seqid=this.new_seqid();const h=this;return new Promise((E,g)=>{h._reqs[h.seqid()]=(v,F)=>v?g(v):E(F),h.send_switch_database(p,_)})}send_switch_database(p,_){const h=new this.pClass(this.output),E={session:p,dbname:_},g=new B(E);try{return h.writeMessageBegin("switch_database",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(v){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),v}}recv_switch_database(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new O;if(g.read(p),p.readMessageEnd(),g.e!==null)return E(g.e);E(null)}clone_session(p){this._seqid=this.new_seqid();const _=this;return new Promise((h,E)=>{_._reqs[_.seqid()]=(g,v)=>g?E(g):h(v),_.send_clone_session(p)})}send_clone_session(p){const _=new this.pClass(this.output),h={session:p},E=new A(h);try{return _.writeMessageBegin("clone_session",a.MessageType.CALL,this.seqid()),E.write(_),_.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof _.reset=="function"&&_.reset(),g}}recv_clone_session(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new R;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("clone_session failed: unknown result")}get_server_status(p){this._seqid=this.new_seqid();const _=this;return new Promise((h,E)=>{_._reqs[_.seqid()]=(g,v)=>g?E(g):h(v),_.send_get_server_status(p)})}send_get_server_status(p){const _=new this.pClass(this.output),h={session:p},E=new P(h);try{return _.writeMessageBegin("get_server_status",a.MessageType.CALL,this.seqid()),E.write(_),_.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof _.reset=="function"&&_.reset(),g}}recv_get_server_status(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new D;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("get_server_status failed: unknown result")}get_status(p){this._seqid=this.new_seqid();const _=this;return new Promise((h,E)=>{_._reqs[_.seqid()]=(g,v)=>g?E(g):h(v),_.send_get_status(p)})}send_get_status(p){const _=new this.pClass(this.output),h={session:p},E=new U(h);try{return _.writeMessageBegin("get_status",a.MessageType.CALL,this.seqid()),E.write(_),_.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof _.reset=="function"&&_.reset(),g}}recv_get_status(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new Y;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("get_status failed: unknown result")}get_hardware_info(p){this._seqid=this.new_seqid();const _=this;return new Promise((h,E)=>{_._reqs[_.seqid()]=(g,v)=>g?E(g):h(v),_.send_get_hardware_info(p)})}send_get_hardware_info(p){const _=new this.pClass(this.output),h={session:p},E=new z(h);try{return _.writeMessageBegin("get_hardware_info",a.MessageType.CALL,this.seqid()),E.write(_),_.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof _.reset=="function"&&_.reset(),g}}recv_get_hardware_info(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new W;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("get_hardware_info failed: unknown result")}get_tables(p){this._seqid=this.new_seqid();const _=this;return new Promise((h,E)=>{_._reqs[_.seqid()]=(g,v)=>g?E(g):h(v),_.send_get_tables(p)})}send_get_tables(p){const _=new this.pClass(this.output),h={session:p},E=new H(h);try{return _.writeMessageBegin("get_tables",a.MessageType.CALL,this.seqid()),E.write(_),_.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof _.reset=="function"&&_.reset(),g}}recv_get_tables(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new V;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("get_tables failed: unknown result")}get_tables_for_database(p,_){this._seqid=this.new_seqid();const h=this;return new Promise((E,g)=>{h._reqs[h.seqid()]=(v,F)=>v?g(v):E(F),h.send_get_tables_for_database(p,_)})}send_get_tables_for_database(p,_){const h=new this.pClass(this.output),E={session:p,database_name:_},g=new J(E);try{return h.writeMessageBegin("get_tables_for_database",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(v){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),v}}recv_get_tables_for_database(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new G;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("get_tables_for_database failed: unknown result")}get_physical_tables(p){this._seqid=this.new_seqid();const _=this;return new Promise((h,E)=>{_._reqs[_.seqid()]=(g,v)=>g?E(g):h(v),_.send_get_physical_tables(p)})}send_get_physical_tables(p){const _=new this.pClass(this.output),h={session:p},E=new oe(h);try{return _.writeMessageBegin("get_physical_tables",a.MessageType.CALL,this.seqid()),E.write(_),_.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof _.reset=="function"&&_.reset(),g}}recv_get_physical_tables(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new he;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("get_physical_tables failed: unknown result")}get_views(p){this._seqid=this.new_seqid();const _=this;return new Promise((h,E)=>{_._reqs[_.seqid()]=(g,v)=>g?E(g):h(v),_.send_get_views(p)})}send_get_views(p){const _=new this.pClass(this.output),h={session:p},E=new ne(h);try{return _.writeMessageBegin("get_views",a.MessageType.CALL,this.seqid()),E.write(_),_.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof _.reset=="function"&&_.reset(),g}}recv_get_views(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new Fe;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("get_views failed: unknown result")}get_tables_meta(p){this._seqid=this.new_seqid();const _=this;return new Promise((h,E)=>{_._reqs[_.seqid()]=(g,v)=>g?E(g):h(v),_.send_get_tables_meta(p)})}send_get_tables_meta(p){const _=new this.pClass(this.output),h={session:p},E=new de(h);try{return _.writeMessageBegin("get_tables_meta",a.MessageType.CALL,this.seqid()),E.write(_),_.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof _.reset=="function"&&_.reset(),g}}recv_get_tables_meta(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new ke;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("get_tables_meta failed: unknown result")}get_table_details(p,_){this._seqid=this.new_seqid();const h=this;return new Promise((E,g)=>{h._reqs[h.seqid()]=(v,F)=>v?g(v):E(F),h.send_get_table_details(p,_)})}send_get_table_details(p,_){const h=new this.pClass(this.output),E={session:p,table_name:_},g=new Ue(E);try{return h.writeMessageBegin("get_table_details",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(v){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),v}}recv_get_table_details(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new at;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("get_table_details failed: unknown result")}get_table_details_for_database(p,_,h){this._seqid=this.new_seqid();const E=this;return new Promise((g,v)=>{E._reqs[E.seqid()]=(F,Z)=>F?v(F):g(Z),E.send_get_table_details_for_database(p,_,h)})}send_get_table_details_for_database(p,_,h){const E=new this.pClass(this.output),g={session:p,table_name:_,database_name:h},v=new Tt(g);try{return E.writeMessageBegin("get_table_details_for_database",a.MessageType.CALL,this.seqid()),v.write(E),E.writeMessageEnd(),this.output.flush()}catch(F){throw delete this._reqs[this.seqid()],typeof E.reset=="function"&&E.reset(),F}}recv_get_table_details_for_database(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new Ft;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("get_table_details_for_database failed: unknown result")}get_internal_table_details(p,_,h){this._seqid=this.new_seqid();const E=this;return new Promise((g,v)=>{E._reqs[E.seqid()]=(F,Z)=>F?v(F):g(Z),E.send_get_internal_table_details(p,_,h)})}send_get_internal_table_details(p,_,h){const E=new this.pClass(this.output),g={session:p,table_name:_,include_system_columns:h},v=new _e(g);try{return E.writeMessageBegin("get_internal_table_details",a.MessageType.CALL,this.seqid()),v.write(E),E.writeMessageEnd(),this.output.flush()}catch(F){throw delete this._reqs[this.seqid()],typeof E.reset=="function"&&E.reset(),F}}recv_get_internal_table_details(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new q;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("get_internal_table_details failed: unknown result")}get_internal_table_details_for_database(p,_,h){this._seqid=this.new_seqid();const E=this;return new Promise((g,v)=>{E._reqs[E.seqid()]=(F,Z)=>F?v(F):g(Z),E.send_get_internal_table_details_for_database(p,_,h)})}send_get_internal_table_details_for_database(p,_,h){const E=new this.pClass(this.output),g={session:p,table_name:_,database_name:h},v=new j(g);try{return E.writeMessageBegin("get_internal_table_details_for_database",a.MessageType.CALL,this.seqid()),v.write(E),E.writeMessageEnd(),this.output.flush()}catch(F){throw delete this._reqs[this.seqid()],typeof E.reset=="function"&&E.reset(),F}}recv_get_internal_table_details_for_database(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new L;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("get_internal_table_details_for_database failed: unknown result")}get_users(p){this._seqid=this.new_seqid();const _=this;return new Promise((h,E)=>{_._reqs[_.seqid()]=(g,v)=>g?E(g):h(v),_.send_get_users(p)})}send_get_users(p){const _=new this.pClass(this.output),h={session:p},E=new K(h);try{return _.writeMessageBegin("get_users",a.MessageType.CALL,this.seqid()),E.write(_),_.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof _.reset=="function"&&_.reset(),g}}recv_get_users(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new Q;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("get_users failed: unknown result")}get_databases(p){this._seqid=this.new_seqid();const _=this;return new Promise((h,E)=>{_._reqs[_.seqid()]=(g,v)=>g?E(g):h(v),_.send_get_databases(p)})}send_get_databases(p){const _=new this.pClass(this.output),h={session:p},E=new ae(h);try{return _.writeMessageBegin("get_databases",a.MessageType.CALL,this.seqid()),E.write(_),_.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof _.reset=="function"&&_.reset(),g}}recv_get_databases(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new se;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("get_databases failed: unknown result")}get_version(){this._seqid=this.new_seqid();const p=this;return new Promise((_,h)=>{p._reqs[p.seqid()]=(E,g)=>E?h(E):_(g),p.send_get_version()})}send_get_version(){const p=new this.pClass(this.output),_=new ge;try{return p.writeMessageBegin("get_version",a.MessageType.CALL,this.seqid()),_.write(p),p.writeMessageEnd(),this.output.flush()}catch(h){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),h}}recv_get_version(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new Ee;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("get_version failed: unknown result")}start_heap_profile(p){this._seqid=this.new_seqid();const _=this;return new Promise((h,E)=>{_._reqs[_.seqid()]=(g,v)=>g?E(g):h(v),_.send_start_heap_profile(p)})}send_start_heap_profile(p){const _=new this.pClass(this.output),h={session:p},E=new Ve(h);try{return _.writeMessageBegin("start_heap_profile",a.MessageType.CALL,this.seqid()),E.write(_),_.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof _.reset=="function"&&_.reset(),g}}recv_start_heap_profile(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new Vt;if(g.read(p),p.readMessageEnd(),g.e!==null)return E(g.e);E(null)}stop_heap_profile(p){this._seqid=this.new_seqid();const _=this;return new Promise((h,E)=>{_._reqs[_.seqid()]=(g,v)=>g?E(g):h(v),_.send_stop_heap_profile(p)})}send_stop_heap_profile(p){const _=new this.pClass(this.output),h={session:p},E=new nn(h);try{return _.writeMessageBegin("stop_heap_profile",a.MessageType.CALL,this.seqid()),E.write(_),_.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof _.reset=="function"&&_.reset(),g}}recv_stop_heap_profile(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new Lt;if(g.read(p),p.readMessageEnd(),g.e!==null)return E(g.e);E(null)}get_heap_profile(p){this._seqid=this.new_seqid();const _=this;return new Promise((h,E)=>{_._reqs[_.seqid()]=(g,v)=>g?E(g):h(v),_.send_get_heap_profile(p)})}send_get_heap_profile(p){const _=new this.pClass(this.output),h={session:p},E=new is(h);try{return _.writeMessageBegin("get_heap_profile",a.MessageType.CALL,this.seqid()),E.write(_),_.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof _.reset=="function"&&_.reset(),g}}recv_get_heap_profile(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new vs;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("get_heap_profile failed: unknown result")}get_memory(p,_){this._seqid=this.new_seqid();const h=this;return new Promise((E,g)=>{h._reqs[h.seqid()]=(v,F)=>v?g(v):E(F),h.send_get_memory(p,_)})}send_get_memory(p,_){const h=new this.pClass(this.output),E={session:p,memory_level:_},g=new Ss(E);try{return h.writeMessageBegin("get_memory",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(v){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),v}}recv_get_memory(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new ue;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("get_memory failed: unknown result")}clear_cpu_memory(p){this._seqid=this.new_seqid();const _=this;return new Promise((h,E)=>{_._reqs[_.seqid()]=(g,v)=>g?E(g):h(v),_.send_clear_cpu_memory(p)})}send_clear_cpu_memory(p){const _=new this.pClass(this.output),h={session:p},E=new Mi(h);try{return _.writeMessageBegin("clear_cpu_memory",a.MessageType.CALL,this.seqid()),E.write(_),_.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof _.reset=="function"&&_.reset(),g}}recv_clear_cpu_memory(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new fi;if(g.read(p),p.readMessageEnd(),g.e!==null)return E(g.e);E(null)}clear_gpu_memory(p){this._seqid=this.new_seqid();const _=this;return new Promise((h,E)=>{_._reqs[_.seqid()]=(g,v)=>g?E(g):h(v),_.send_clear_gpu_memory(p)})}send_clear_gpu_memory(p){const _=new this.pClass(this.output),h={session:p},E=new Pr(h);try{return _.writeMessageBegin("clear_gpu_memory",a.MessageType.CALL,this.seqid()),E.write(_),_.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof _.reset=="function"&&_.reset(),g}}recv_clear_gpu_memory(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new Sn;if(g.read(p),p.readMessageEnd(),g.e!==null)return E(g.e);E(null)}set_cur_session(p,_,h,E,g){this._seqid=this.new_seqid();const v=this;return new Promise((F,Z)=>{v._reqs[v.seqid()]=(ye,je)=>ye?Z(ye):F(je),v.send_set_cur_session(p,_,h,E,g)})}send_set_cur_session(p,_,h,E,g){const v=new this.pClass(this.output),F={parent_session:p,leaf_session:_,start_time_str:h,label:E,for_running_query_kernel:g},Z=new $o(F);try{return v.writeMessageBegin("set_cur_session",a.MessageType.CALL,this.seqid()),Z.write(v),v.writeMessageEnd(),this.output.flush()}catch(ye){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),ye}}recv_set_cur_session(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new Uo;if(g.read(p),p.readMessageEnd(),g.e!==null)return E(g.e);E(null)}invalidate_cur_session(p,_,h,E,g){this._seqid=this.new_seqid();const v=this;return new Promise((F,Z)=>{v._reqs[v.seqid()]=(ye,je)=>ye?Z(ye):F(je),v.send_invalidate_cur_session(p,_,h,E,g)})}send_invalidate_cur_session(p,_,h,E,g){const v=new this.pClass(this.output),F={parent_session:p,leaf_session:_,start_time_str:h,label:E,for_running_query_kernel:g},Z=new ss(F);try{return v.writeMessageBegin("invalidate_cur_session",a.MessageType.CALL,this.seqid()),Z.write(v),v.writeMessageEnd(),this.output.flush()}catch(ye){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),ye}}recv_invalidate_cur_session(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new zo;if(g.read(p),p.readMessageEnd(),g.e!==null)return E(g.e);E(null)}set_table_epoch(p,_,h,E){this._seqid=this.new_seqid();const g=this;return new Promise((v,F)=>{g._reqs[g.seqid()]=(Z,ye)=>Z?F(Z):v(ye),g.send_set_table_epoch(p,_,h,E)})}send_set_table_epoch(p,_,h,E){const g=new this.pClass(this.output),v={session:p,db_id:_,table_id:h,new_epoch:E},F=new C(v);try{return g.writeMessageBegin("set_table_epoch",a.MessageType.CALL,this.seqid()),F.write(g),g.writeMessageEnd(),this.output.flush()}catch(Z){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),Z}}recv_set_table_epoch(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new M;if(g.read(p),p.readMessageEnd(),g.e!==null)return E(g.e);E(null)}set_table_epoch_by_name(p,_,h){this._seqid=this.new_seqid();const E=this;return new Promise((g,v)=>{E._reqs[E.seqid()]=(F,Z)=>F?v(F):g(Z),E.send_set_table_epoch_by_name(p,_,h)})}send_set_table_epoch_by_name(p,_,h){const E=new this.pClass(this.output),g={session:p,table_name:_,new_epoch:h},v=new N(g);try{return E.writeMessageBegin("set_table_epoch_by_name",a.MessageType.CALL,this.seqid()),v.write(E),E.writeMessageEnd(),this.output.flush()}catch(F){throw delete this._reqs[this.seqid()],typeof E.reset=="function"&&E.reset(),F}}recv_set_table_epoch_by_name(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new $;if(g.read(p),p.readMessageEnd(),g.e!==null)return E(g.e);E(null)}get_table_epoch(p,_,h){this._seqid=this.new_seqid();const E=this;return new Promise((g,v)=>{E._reqs[E.seqid()]=(F,Z)=>F?v(F):g(Z),E.send_get_table_epoch(p,_,h)})}send_get_table_epoch(p,_,h){const E=new this.pClass(this.output),g={session:p,db_id:_,table_id:h},v=new X(g);try{return E.writeMessageBegin("get_table_epoch",a.MessageType.CALL,this.seqid()),v.write(E),E.writeMessageEnd(),this.output.flush()}catch(F){throw delete this._reqs[this.seqid()],typeof E.reset=="function"&&E.reset(),F}}recv_get_table_epoch(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new ee;return g.read(p),p.readMessageEnd(),g.success!==null?E(null,g.success):E("get_table_epoch failed: unknown result")}get_table_epoch_by_name(p,_){this._seqid=this.new_seqid();const h=this;return new Promise((E,g)=>{h._reqs[h.seqid()]=(v,F)=>v?g(v):E(F),h.send_get_table_epoch_by_name(p,_)})}send_get_table_epoch_by_name(p,_){const h=new this.pClass(this.output),E={session:p,table_name:_},g=new ie(E);try{return h.writeMessageBegin("get_table_epoch_by_name",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(v){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),v}}recv_get_table_epoch_by_name(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new Ie;return g.read(p),p.readMessageEnd(),g.success!==null?E(null,g.success):E("get_table_epoch_by_name failed: unknown result")}get_table_epochs(p,_,h){this._seqid=this.new_seqid();const E=this;return new Promise((g,v)=>{E._reqs[E.seqid()]=(F,Z)=>F?v(F):g(Z),E.send_get_table_epochs(p,_,h)})}send_get_table_epochs(p,_,h){const E=new this.pClass(this.output),g={session:p,db_id:_,table_id:h},v=new Pe(g);try{return E.writeMessageBegin("get_table_epochs",a.MessageType.CALL,this.seqid()),v.write(E),E.writeMessageEnd(),this.output.flush()}catch(F){throw delete this._reqs[this.seqid()],typeof E.reset=="function"&&E.reset(),F}}recv_get_table_epochs(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new De;return g.read(p),p.readMessageEnd(),g.success!==null?E(null,g.success):E("get_table_epochs failed: unknown result")}set_table_epochs(p,_,h){this._seqid=this.new_seqid();const E=this;return new Promise((g,v)=>{E._reqs[E.seqid()]=(F,Z)=>F?v(F):g(Z),E.send_set_table_epochs(p,_,h)})}send_set_table_epochs(p,_,h){const E=new this.pClass(this.output),g={session:p,db_id:_,table_epochs:h},v=new He(g);try{return E.writeMessageBegin("set_table_epochs",a.MessageType.CALL,this.seqid()),v.write(E),E.writeMessageEnd(),this.output.flush()}catch(F){throw delete this._reqs[this.seqid()],typeof E.reset=="function"&&E.reset(),F}}recv_set_table_epochs(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}new We().read(p),p.readMessageEnd(),E(null)}get_session_info(p){this._seqid=this.new_seqid();const _=this;return new Promise((h,E)=>{_._reqs[_.seqid()]=(g,v)=>g?E(g):h(v),_.send_get_session_info(p)})}send_get_session_info(p){const _=new this.pClass(this.output),h={session:p},E=new jo(h);try{return _.writeMessageBegin("get_session_info",a.MessageType.CALL,this.seqid()),E.write(_),_.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof _.reset=="function"&&_.reset(),g}}recv_get_session_info(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new Hp;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("get_session_info failed: unknown result")}get_queries_info(p){this._seqid=this.new_seqid();const _=this;return new Promise((h,E)=>{_._reqs[_.seqid()]=(g,v)=>g?E(g):h(v),_.send_get_queries_info(p)})}send_get_queries_info(p){const _=new this.pClass(this.output),h={session:p},E=new ZA(h);try{return _.writeMessageBegin("get_queries_info",a.MessageType.CALL,this.seqid()),E.write(_),_.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof _.reset=="function"&&_.reset(),g}}recv_get_queries_info(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new Wp;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("get_queries_info failed: unknown result")}set_leaf_info(p,_){this._seqid=this.new_seqid();const h=this;return new Promise((E,g)=>{h._reqs[h.seqid()]=(v,F)=>v?g(v):E(F),h.send_set_leaf_info(p,_)})}send_set_leaf_info(p,_){const h=new this.pClass(this.output),E={session:p,leaf_info:_},g=new eO(E);try{return h.writeMessageBegin("set_leaf_info",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(v){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),v}}recv_set_leaf_info(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new Vp;if(g.read(p),p.readMessageEnd(),g.e!==null)return E(g.e);E(null)}sql_execute(p,_,h,E,g,v){this._seqid=this.new_seqid();const F=this;return new Promise((Z,ye)=>{F._reqs[F.seqid()]=(je,Yt)=>je?ye(je):Z(Yt),F.send_sql_execute(p,_,h,E,g,v)})}send_sql_execute(p,_,h,E,g,v){const F=new this.pClass(this.output),Z={session:p,query:_,column_format:h,nonce:E,first_n:g,at_most_n:v},ye=new tO(Z);try{return F.writeMessageBegin("sql_execute",a.MessageType.CALL,this.seqid()),ye.write(F),F.writeMessageEnd(),this.output.flush()}catch(je){throw delete this._reqs[this.seqid()],typeof F.reset=="function"&&F.reset(),je}}recv_sql_execute(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new Yp;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("sql_execute failed: unknown result")}sql_execute_df(p,_,h,E,g,v){this._seqid=this.new_seqid();const F=this;return new Promise((Z,ye)=>{F._reqs[F.seqid()]=(je,Yt)=>je?ye(je):Z(Yt),F.send_sql_execute_df(p,_,h,E,g,v)})}send_sql_execute_df(p,_,h,E,g,v){const F=new this.pClass(this.output),Z={session:p,query:_,device_type:h,device_id:E,first_n:g,transport_method:v},ye=new nO(Z);try{return F.writeMessageBegin("sql_execute_df",a.MessageType.CALL,this.seqid()),ye.write(F),F.writeMessageEnd(),this.output.flush()}catch(je){throw delete this._reqs[this.seqid()],typeof F.reset=="function"&&F.reset(),je}}recv_sql_execute_df(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new Xp;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("sql_execute_df failed: unknown result")}sql_execute_gdf(p,_,h,E){this._seqid=this.new_seqid();const g=this;return new Promise((v,F)=>{g._reqs[g.seqid()]=(Z,ye)=>Z?F(Z):v(ye),g.send_sql_execute_gdf(p,_,h,E)})}send_sql_execute_gdf(p,_,h,E){const g=new this.pClass(this.output),v={session:p,query:_,device_id:h,first_n:E},F=new iO(v);try{return g.writeMessageBegin("sql_execute_gdf",a.MessageType.CALL,this.seqid()),F.write(g),g.writeMessageEnd(),this.output.flush()}catch(Z){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),Z}}recv_sql_execute_gdf(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new Kp;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("sql_execute_gdf failed: unknown result")}deallocate_df(p,_,h,E){this._seqid=this.new_seqid();const g=this;return new Promise((v,F)=>{g._reqs[g.seqid()]=(Z,ye)=>Z?F(Z):v(ye),g.send_deallocate_df(p,_,h,E)})}send_deallocate_df(p,_,h,E){const g=new this.pClass(this.output),v={session:p,df:_,device_type:h,device_id:E},F=new sO(v);try{return g.writeMessageBegin("deallocate_df",a.MessageType.CALL,this.seqid()),F.write(g),g.writeMessageEnd(),this.output.flush()}catch(Z){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),Z}}recv_deallocate_df(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new Jp;if(g.read(p),p.readMessageEnd(),g.e!==null)return E(g.e);E(null)}interrupt(p,_){this._seqid=this.new_seqid();const h=this;return new Promise((E,g)=>{h._reqs[h.seqid()]=(v,F)=>v?g(v):E(F),h.send_interrupt(p,_)})}send_interrupt(p,_){const h=new this.pClass(this.output),E={query_session:p,interrupt_session:_},g=new rO(E);try{return h.writeMessageBegin("interrupt",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(v){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),v}}recv_interrupt(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new Qp;if(g.read(p),p.readMessageEnd(),g.e!==null)return E(g.e);E(null)}sql_validate(p,_){this._seqid=this.new_seqid();const h=this;return new Promise((E,g)=>{h._reqs[h.seqid()]=(v,F)=>v?g(v):E(F),h.send_sql_validate(p,_)})}send_sql_validate(p,_){const h=new this.pClass(this.output),E={session:p,query:_},g=new aO(E);try{return h.writeMessageBegin("sql_validate",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(v){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),v}}recv_sql_validate(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new Zp;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("sql_validate failed: unknown result")}get_completion_hints(p,_,h){this._seqid=this.new_seqid();const E=this;return new Promise((g,v)=>{E._reqs[E.seqid()]=(F,Z)=>F?v(F):g(Z),E.send_get_completion_hints(p,_,h)})}send_get_completion_hints(p,_,h){const E=new this.pClass(this.output),g={session:p,sql:_,cursor:h},v=new oO(g);try{return E.writeMessageBegin("get_completion_hints",a.MessageType.CALL,this.seqid()),v.write(E),E.writeMessageEnd(),this.output.flush()}catch(F){throw delete this._reqs[this.seqid()],typeof E.reset=="function"&&E.reset(),F}}recv_get_completion_hints(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new ey;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("get_completion_hints failed: unknown result")}set_execution_mode(p,_){this._seqid=this.new_seqid();const h=this;return new Promise((E,g)=>{h._reqs[h.seqid()]=(v,F)=>v?g(v):E(F),h.send_set_execution_mode(p,_)})}send_set_execution_mode(p,_){const h=new this.pClass(this.output),E={session:p,mode:_},g=new lO(E);try{return h.writeMessageBegin("set_execution_mode",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(v){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),v}}recv_set_execution_mode(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new ty;if(g.read(p),p.readMessageEnd(),g.e!==null)return E(g.e);E(null)}render_vega(p,_,h,E,g){this._seqid=this.new_seqid();const v=this;return new Promise((F,Z)=>{v._reqs[v.seqid()]=(ye,je)=>ye?Z(ye):F(je),v.send_render_vega(p,_,h,E,g)})}send_render_vega(p,_,h,E,g){const v=new this.pClass(this.output),F={session:p,widget_id:_,vega_json:h,compression_level:E,nonce:g},Z=new cO(F);try{return v.writeMessageBegin("render_vega",a.MessageType.CALL,this.seqid()),Z.write(v),v.writeMessageEnd(),this.output.flush()}catch(ye){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),ye}}recv_render_vega(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new ny;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("render_vega failed: unknown result")}get_result_row_for_pixel(p,_,h,E,g,v,F){this._seqid=this.new_seqid();const Z=this;return new Promise((ye,je)=>{Z._reqs[Z.seqid()]=(Yt,ja)=>Yt?je(Yt):ye(ja),Z.send_get_result_row_for_pixel(p,_,h,E,g,v,F)})}send_get_result_row_for_pixel(p,_,h,E,g,v,F){const Z=new this.pClass(this.output),ye={session:p,widget_id:_,pixel:h,table_col_names:E,column_format:g,pixelRadius:v,nonce:F},je=new dO(ye);try{return Z.writeMessageBegin("get_result_row_for_pixel",a.MessageType.CALL,this.seqid()),je.write(Z),Z.writeMessageEnd(),this.output.flush()}catch(Yt){throw delete this._reqs[this.seqid()],typeof Z.reset=="function"&&Z.reset(),Yt}}recv_get_result_row_for_pixel(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new iy;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("get_result_row_for_pixel failed: unknown result")}create_custom_expression(p,_){this._seqid=this.new_seqid();const h=this;return new Promise((E,g)=>{h._reqs[h.seqid()]=(v,F)=>v?g(v):E(F),h.send_create_custom_expression(p,_)})}send_create_custom_expression(p,_){const h=new this.pClass(this.output),E={session:p,custom_expression:_},g=new fO(E);try{return h.writeMessageBegin("create_custom_expression",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(v){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),v}}recv_create_custom_expression(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new sy;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("create_custom_expression failed: unknown result")}get_custom_expressions(p){this._seqid=this.new_seqid();const _=this;return new Promise((h,E)=>{_._reqs[_.seqid()]=(g,v)=>g?E(g):h(v),_.send_get_custom_expressions(p)})}send_get_custom_expressions(p){const _=new this.pClass(this.output),h={session:p},E=new uO(h);try{return _.writeMessageBegin("get_custom_expressions",a.MessageType.CALL,this.seqid()),E.write(_),_.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof _.reset=="function"&&_.reset(),g}}recv_get_custom_expressions(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new ry;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("get_custom_expressions failed: unknown result")}update_custom_expression(p,_,h){this._seqid=this.new_seqid();const E=this;return new Promise((g,v)=>{E._reqs[E.seqid()]=(F,Z)=>F?v(F):g(Z),E.send_update_custom_expression(p,_,h)})}send_update_custom_expression(p,_,h){const E=new this.pClass(this.output),g={session:p,id:_,expression_json:h},v=new hO(g);try{return E.writeMessageBegin("update_custom_expression",a.MessageType.CALL,this.seqid()),v.write(E),E.writeMessageEnd(),this.output.flush()}catch(F){throw delete this._reqs[this.seqid()],typeof E.reset=="function"&&E.reset(),F}}recv_update_custom_expression(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new ay;if(g.read(p),p.readMessageEnd(),g.e!==null)return E(g.e);E(null)}delete_custom_expressions(p,_,h){this._seqid=this.new_seqid();const E=this;return new Promise((g,v)=>{E._reqs[E.seqid()]=(F,Z)=>F?v(F):g(Z),E.send_delete_custom_expressions(p,_,h)})}send_delete_custom_expressions(p,_,h){const E=new this.pClass(this.output),g={session:p,custom_expression_ids:_,do_soft_delete:h},v=new _O(g);try{return E.writeMessageBegin("delete_custom_expressions",a.MessageType.CALL,this.seqid()),v.write(E),E.writeMessageEnd(),this.output.flush()}catch(F){throw delete this._reqs[this.seqid()],typeof E.reset=="function"&&E.reset(),F}}recv_delete_custom_expressions(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new oy;if(g.read(p),p.readMessageEnd(),g.e!==null)return E(g.e);E(null)}get_dashboard(p,_){this._seqid=this.new_seqid();const h=this;return new Promise((E,g)=>{h._reqs[h.seqid()]=(v,F)=>v?g(v):E(F),h.send_get_dashboard(p,_)})}send_get_dashboard(p,_){const h=new this.pClass(this.output),E={session:p,dashboard_id:_},g=new gO(E);try{return h.writeMessageBegin("get_dashboard",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(v){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),v}}recv_get_dashboard(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new ly;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("get_dashboard failed: unknown result")}get_dashboards(p){this._seqid=this.new_seqid();const _=this;return new Promise((h,E)=>{_._reqs[_.seqid()]=(g,v)=>g?E(g):h(v),_.send_get_dashboards(p)})}send_get_dashboards(p){const _=new this.pClass(this.output),h={session:p},E=new pO(h);try{return _.writeMessageBegin("get_dashboards",a.MessageType.CALL,this.seqid()),E.write(_),_.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof _.reset=="function"&&_.reset(),g}}recv_get_dashboards(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new cy;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("get_dashboards failed: unknown result")}create_dashboard(p,_,h,E,g){this._seqid=this.new_seqid();const v=this;return new Promise((F,Z)=>{v._reqs[v.seqid()]=(ye,je)=>ye?Z(ye):F(je),v.send_create_dashboard(p,_,h,E,g)})}send_create_dashboard(p,_,h,E,g){const v=new this.pClass(this.output),F={session:p,dashboard_name:_,dashboard_state:h,image_hash:E,dashboard_metadata:g},Z=new yO(F);try{return v.writeMessageBegin("create_dashboard",a.MessageType.CALL,this.seqid()),Z.write(v),v.writeMessageEnd(),this.output.flush()}catch(ye){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),ye}}recv_create_dashboard(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new dy;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("create_dashboard failed: unknown result")}replace_dashboard(p,_,h,E,g,v,F){this._seqid=this.new_seqid();const Z=this;return new Promise((ye,je)=>{Z._reqs[Z.seqid()]=(Yt,ja)=>Yt?je(Yt):ye(ja),Z.send_replace_dashboard(p,_,h,E,g,v,F)})}send_replace_dashboard(p,_,h,E,g,v,F){const Z=new this.pClass(this.output),ye={session:p,dashboard_id:_,dashboard_name:h,dashboard_owner:E,dashboard_state:g,image_hash:v,dashboard_metadata:F},je=new mO(ye);try{return Z.writeMessageBegin("replace_dashboard",a.MessageType.CALL,this.seqid()),je.write(Z),Z.writeMessageEnd(),this.output.flush()}catch(Yt){throw delete this._reqs[this.seqid()],typeof Z.reset=="function"&&Z.reset(),Yt}}recv_replace_dashboard(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new fy;if(g.read(p),p.readMessageEnd(),g.e!==null)return E(g.e);E(null)}delete_dashboard(p,_){this._seqid=this.new_seqid();const h=this;return new Promise((E,g)=>{h._reqs[h.seqid()]=(v,F)=>v?g(v):E(F),h.send_delete_dashboard(p,_)})}send_delete_dashboard(p,_){const h=new this.pClass(this.output),E={session:p,dashboard_id:_},g=new wO(E);try{return h.writeMessageBegin("delete_dashboard",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(v){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),v}}recv_delete_dashboard(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new uy;if(g.read(p),p.readMessageEnd(),g.e!==null)return E(g.e);E(null)}share_dashboards(p,_,h,E){this._seqid=this.new_seqid();const g=this;return new Promise((v,F)=>{g._reqs[g.seqid()]=(Z,ye)=>Z?F(Z):v(ye),g.send_share_dashboards(p,_,h,E)})}send_share_dashboards(p,_,h,E){const g=new this.pClass(this.output),v={session:p,dashboard_ids:_,groups:h,permissions:E},F=new bO(v);try{return g.writeMessageBegin("share_dashboards",a.MessageType.CALL,this.seqid()),F.write(g),g.writeMessageEnd(),this.output.flush()}catch(Z){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),Z}}recv_share_dashboards(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new hy;if(g.read(p),p.readMessageEnd(),g.e!==null)return E(g.e);E(null)}delete_dashboards(p,_){this._seqid=this.new_seqid();const h=this;return new Promise((E,g)=>{h._reqs[h.seqid()]=(v,F)=>v?g(v):E(F),h.send_delete_dashboards(p,_)})}send_delete_dashboards(p,_){const h=new this.pClass(this.output),E={session:p,dashboard_ids:_},g=new TO(E);try{return h.writeMessageBegin("delete_dashboards",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(v){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),v}}recv_delete_dashboards(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new _y;if(g.read(p),p.readMessageEnd(),g.e!==null)return E(g.e);E(null)}share_dashboard(p,_,h,E,g,v){this._seqid=this.new_seqid();const F=this;return new Promise((Z,ye)=>{F._reqs[F.seqid()]=(je,Yt)=>je?ye(je):Z(Yt),F.send_share_dashboard(p,_,h,E,g,v)})}send_share_dashboard(p,_,h,E,g,v){const F=new this.pClass(this.output),Z={session:p,dashboard_id:_,groups:h,objects:E,permissions:g,grant_role:v},ye=new EO(Z);try{return F.writeMessageBegin("share_dashboard",a.MessageType.CALL,this.seqid()),ye.write(F),F.writeMessageEnd(),this.output.flush()}catch(je){throw delete this._reqs[this.seqid()],typeof F.reset=="function"&&F.reset(),je}}recv_share_dashboard(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new gy;if(g.read(p),p.readMessageEnd(),g.e!==null)return E(g.e);E(null)}unshare_dashboard(p,_,h,E,g){this._seqid=this.new_seqid();const v=this;return new Promise((F,Z)=>{v._reqs[v.seqid()]=(ye,je)=>ye?Z(ye):F(je),v.send_unshare_dashboard(p,_,h,E,g)})}send_unshare_dashboard(p,_,h,E,g){const v=new this.pClass(this.output),F={session:p,dashboard_id:_,groups:h,objects:E,permissions:g},Z=new vO(F);try{return v.writeMessageBegin("unshare_dashboard",a.MessageType.CALL,this.seqid()),Z.write(v),v.writeMessageEnd(),this.output.flush()}catch(ye){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),ye}}recv_unshare_dashboard(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new py;if(g.read(p),p.readMessageEnd(),g.e!==null)return E(g.e);E(null)}unshare_dashboards(p,_,h,E){this._seqid=this.new_seqid();const g=this;return new Promise((v,F)=>{g._reqs[g.seqid()]=(Z,ye)=>Z?F(Z):v(ye),g.send_unshare_dashboards(p,_,h,E)})}send_unshare_dashboards(p,_,h,E){const g=new this.pClass(this.output),v={session:p,dashboard_ids:_,groups:h,permissions:E},F=new SO(v);try{return g.writeMessageBegin("unshare_dashboards",a.MessageType.CALL,this.seqid()),F.write(g),g.writeMessageEnd(),this.output.flush()}catch(Z){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),Z}}recv_unshare_dashboards(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new yy;if(g.read(p),p.readMessageEnd(),g.e!==null)return E(g.e);E(null)}get_dashboard_grantees(p,_){this._seqid=this.new_seqid();const h=this;return new Promise((E,g)=>{h._reqs[h.seqid()]=(v,F)=>v?g(v):E(F),h.send_get_dashboard_grantees(p,_)})}send_get_dashboard_grantees(p,_){const h=new this.pClass(this.output),E={session:p,dashboard_id:_},g=new xO(E);try{return h.writeMessageBegin("get_dashboard_grantees",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(v){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),v}}recv_get_dashboard_grantees(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new my;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("get_dashboard_grantees failed: unknown result")}get_link_view(p,_){this._seqid=this.new_seqid();const h=this;return new Promise((E,g)=>{h._reqs[h.seqid()]=(v,F)=>v?g(v):E(F),h.send_get_link_view(p,_)})}send_get_link_view(p,_){const h=new this.pClass(this.output),E={session:p,link:_},g=new kO(E);try{return h.writeMessageBegin("get_link_view",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(v){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),v}}recv_get_link_view(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new wy;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("get_link_view failed: unknown result")}create_link(p,_,h){this._seqid=this.new_seqid();const E=this;return new Promise((g,v)=>{E._reqs[E.seqid()]=(F,Z)=>F?v(F):g(Z),E.send_create_link(p,_,h)})}send_create_link(p,_,h){const E=new this.pClass(this.output),g={session:p,view_state:_,view_metadata:h},v=new BO(g);try{return E.writeMessageBegin("create_link",a.MessageType.CALL,this.seqid()),v.write(E),E.writeMessageEnd(),this.output.flush()}catch(F){throw delete this._reqs[this.seqid()],typeof E.reset=="function"&&E.reset(),F}}recv_create_link(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new by;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("create_link failed: unknown result")}load_table_binary(p,_,h,E){this._seqid=this.new_seqid();const g=this;return new Promise((v,F)=>{g._reqs[g.seqid()]=(Z,ye)=>Z?F(Z):v(ye),g.send_load_table_binary(p,_,h,E)})}send_load_table_binary(p,_,h,E){const g=new this.pClass(this.output),v={session:p,table_name:_,rows:h,column_names:E},F=new FO(v);try{return g.writeMessageBegin("load_table_binary",a.MessageType.CALL,this.seqid()),F.write(g),g.writeMessageEnd(),this.output.flush()}catch(Z){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),Z}}recv_load_table_binary(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new Ty;if(g.read(p),p.readMessageEnd(),g.e!==null)return E(g.e);E(null)}load_table_binary_columnar(p,_,h,E){this._seqid=this.new_seqid();const g=this;return new Promise((v,F)=>{g._reqs[g.seqid()]=(Z,ye)=>Z?F(Z):v(ye),g.send_load_table_binary_columnar(p,_,h,E)})}send_load_table_binary_columnar(p,_,h,E){const g=new this.pClass(this.output),v={session:p,table_name:_,cols:h,column_names:E},F=new IO(v);try{return g.writeMessageBegin("load_table_binary_columnar",a.MessageType.CALL,this.seqid()),F.write(g),g.writeMessageEnd(),this.output.flush()}catch(Z){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),Z}}recv_load_table_binary_columnar(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new Ey;if(g.read(p),p.readMessageEnd(),g.e!==null)return E(g.e);E(null)}load_table_binary_columnar_polys(p,_,h,E,g){this._seqid=this.new_seqid();const v=this;return new Promise((F,Z)=>{v._reqs[v.seqid()]=(ye,je)=>ye?Z(ye):F(je),v.send_load_table_binary_columnar_polys(p,_,h,E,g)})}send_load_table_binary_columnar_polys(p,_,h,E,g){const v=new this.pClass(this.output),F={session:p,table_name:_,cols:h,column_names:E,assign_render_groups:g},Z=new MO(F);try{return v.writeMessageBegin("load_table_binary_columnar_polys",a.MessageType.CALL,this.seqid()),Z.write(v),v.writeMessageEnd(),this.output.flush()}catch(ye){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),ye}}recv_load_table_binary_columnar_polys(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new vy;if(g.read(p),p.readMessageEnd(),g.e!==null)return E(g.e);E(null)}load_table_binary_arrow(p,_,h,E){this._seqid=this.new_seqid();const g=this;return new Promise((v,F)=>{g._reqs[g.seqid()]=(Z,ye)=>Z?F(Z):v(ye),g.send_load_table_binary_arrow(p,_,h,E)})}send_load_table_binary_arrow(p,_,h,E){const g=new this.pClass(this.output),v={session:p,table_name:_,arrow_stream:h,use_column_names:E},F=new AO(v);try{return g.writeMessageBegin("load_table_binary_arrow",a.MessageType.CALL,this.seqid()),F.write(g),g.writeMessageEnd(),this.output.flush()}catch(Z){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),Z}}recv_load_table_binary_arrow(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new Sy;if(g.read(p),p.readMessageEnd(),g.e!==null)return E(g.e);E(null)}load_table(p,_,h,E){this._seqid=this.new_seqid();const g=this;return new Promise((v,F)=>{g._reqs[g.seqid()]=(Z,ye)=>Z?F(Z):v(ye),g.send_load_table(p,_,h,E)})}send_load_table(p,_,h,E){const g=new this.pClass(this.output),v={session:p,table_name:_,rows:h,column_names:E},F=new OO(v);try{return g.writeMessageBegin("load_table",a.MessageType.CALL,this.seqid()),F.write(g),g.writeMessageEnd(),this.output.flush()}catch(Z){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),Z}}recv_load_table(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new xy;if(g.read(p),p.readMessageEnd(),g.e!==null)return E(g.e);E(null)}detect_column_types(p,_,h){this._seqid=this.new_seqid();const E=this;return new Promise((g,v)=>{E._reqs[E.seqid()]=(F,Z)=>F?v(F):g(Z),E.send_detect_column_types(p,_,h)})}send_detect_column_types(p,_,h){const E=new this.pClass(this.output),g={session:p,file_name:_,copy_params:h},v=new NO(g);try{return E.writeMessageBegin("detect_column_types",a.MessageType.CALL,this.seqid()),v.write(E),E.writeMessageEnd(),this.output.flush()}catch(F){throw delete this._reqs[this.seqid()],typeof E.reset=="function"&&E.reset(),F}}recv_detect_column_types(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new ky;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("detect_column_types failed: unknown result")}create_table(p,_,h,E){this._seqid=this.new_seqid();const g=this;return new Promise((v,F)=>{g._reqs[g.seqid()]=(Z,ye)=>Z?F(Z):v(ye),g.send_create_table(p,_,h,E)})}send_create_table(p,_,h,E){const g=new this.pClass(this.output),v={session:p,table_name:_,row_desc:h,create_params:E},F=new CO(v);try{return g.writeMessageBegin("create_table",a.MessageType.CALL,this.seqid()),F.write(g),g.writeMessageEnd(),this.output.flush()}catch(Z){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),Z}}recv_create_table(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new By;if(g.read(p),p.readMessageEnd(),g.e!==null)return E(g.e);E(null)}import_table(p,_,h,E){this._seqid=this.new_seqid();const g=this;return new Promise((v,F)=>{g._reqs[g.seqid()]=(Z,ye)=>Z?F(Z):v(ye),g.send_import_table(p,_,h,E)})}send_import_table(p,_,h,E){const g=new this.pClass(this.output),v={session:p,table_name:_,file_name:h,copy_params:E},F=new RO(v);try{return g.writeMessageBegin("import_table",a.MessageType.CALL,this.seqid()),F.write(g),g.writeMessageEnd(),this.output.flush()}catch(Z){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),Z}}recv_import_table(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new Fy;if(g.read(p),p.readMessageEnd(),g.e!==null)return E(g.e);E(null)}import_geo_table(p,_,h,E,g,v){this._seqid=this.new_seqid();const F=this;return new Promise((Z,ye)=>{F._reqs[F.seqid()]=(je,Yt)=>je?ye(je):Z(Yt),F.send_import_geo_table(p,_,h,E,g,v)})}send_import_geo_table(p,_,h,E,g,v){const F=new this.pClass(this.output),Z={session:p,table_name:_,file_name:h,copy_params:E,row_desc:g,create_params:v},ye=new LO(Z);try{return F.writeMessageBegin("import_geo_table",a.MessageType.CALL,this.seqid()),ye.write(F),F.writeMessageEnd(),this.output.flush()}catch(je){throw delete this._reqs[this.seqid()],typeof F.reset=="function"&&F.reset(),je}}recv_import_geo_table(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new Iy;if(g.read(p),p.readMessageEnd(),g.e!==null)return E(g.e);E(null)}import_table_status(p,_){this._seqid=this.new_seqid();const h=this;return new Promise((E,g)=>{h._reqs[h.seqid()]=(v,F)=>v?g(v):E(F),h.send_import_table_status(p,_)})}send_import_table_status(p,_){const h=new this.pClass(this.output),E={session:p,import_id:_},g=new PO(E);try{return h.writeMessageBegin("import_table_status",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(v){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),v}}recv_import_table_status(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new My;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("import_table_status failed: unknown result")}get_first_geo_file_in_archive(p,_,h){this._seqid=this.new_seqid();const E=this;return new Promise((g,v)=>{E._reqs[E.seqid()]=(F,Z)=>F?v(F):g(Z),E.send_get_first_geo_file_in_archive(p,_,h)})}send_get_first_geo_file_in_archive(p,_,h){const E=new this.pClass(this.output),g={session:p,archive_path:_,copy_params:h},v=new DO(g);try{return E.writeMessageBegin("get_first_geo_file_in_archive",a.MessageType.CALL,this.seqid()),v.write(E),E.writeMessageEnd(),this.output.flush()}catch(F){throw delete this._reqs[this.seqid()],typeof E.reset=="function"&&E.reset(),F}}recv_get_first_geo_file_in_archive(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new Ay;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("get_first_geo_file_in_archive failed: unknown result")}get_all_files_in_archive(p,_,h){this._seqid=this.new_seqid();const E=this;return new Promise((g,v)=>{E._reqs[E.seqid()]=(F,Z)=>F?v(F):g(Z),E.send_get_all_files_in_archive(p,_,h)})}send_get_all_files_in_archive(p,_,h){const E=new this.pClass(this.output),g={session:p,archive_path:_,copy_params:h},v=new $O(g);try{return E.writeMessageBegin("get_all_files_in_archive",a.MessageType.CALL,this.seqid()),v.write(E),E.writeMessageEnd(),this.output.flush()}catch(F){throw delete this._reqs[this.seqid()],typeof E.reset=="function"&&E.reset(),F}}recv_get_all_files_in_archive(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new Oy;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("get_all_files_in_archive failed: unknown result")}get_layers_in_geo_file(p,_,h){this._seqid=this.new_seqid();const E=this;return new Promise((g,v)=>{E._reqs[E.seqid()]=(F,Z)=>F?v(F):g(Z),E.send_get_layers_in_geo_file(p,_,h)})}send_get_layers_in_geo_file(p,_,h){const E=new this.pClass(this.output),g={session:p,file_name:_,copy_params:h},v=new UO(g);try{return E.writeMessageBegin("get_layers_in_geo_file",a.MessageType.CALL,this.seqid()),v.write(E),E.writeMessageEnd(),this.output.flush()}catch(F){throw delete this._reqs[this.seqid()],typeof E.reset=="function"&&E.reset(),F}}recv_get_layers_in_geo_file(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new Ny;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("get_layers_in_geo_file failed: unknown result")}query_get_outer_fragment_count(p,_){this._seqid=this.new_seqid();const h=this;return new Promise((E,g)=>{h._reqs[h.seqid()]=(v,F)=>v?g(v):E(F),h.send_query_get_outer_fragment_count(p,_)})}send_query_get_outer_fragment_count(p,_){const h=new this.pClass(this.output),E={session:p,query:_},g=new zO(E);try{return h.writeMessageBegin("query_get_outer_fragment_count",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(v){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),v}}recv_query_get_outer_fragment_count(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new Cy;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("query_get_outer_fragment_count failed: unknown result")}check_table_consistency(p,_){this._seqid=this.new_seqid();const h=this;return new Promise((E,g)=>{h._reqs[h.seqid()]=(v,F)=>v?g(v):E(F),h.send_check_table_consistency(p,_)})}send_check_table_consistency(p,_){const h=new this.pClass(this.output),E={session:p,table_id:_},g=new jO(E);try{return h.writeMessageBegin("check_table_consistency",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(v){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),v}}recv_check_table_consistency(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new Ry;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("check_table_consistency failed: unknown result")}start_query(p,_,h,E,g,v){this._seqid=this.new_seqid();const F=this;return new Promise((Z,ye)=>{F._reqs[F.seqid()]=(je,Yt)=>je?ye(je):Z(Yt),F.send_start_query(p,_,h,E,g,v)})}send_start_query(p,_,h,E,g,v){const F=new this.pClass(this.output),Z={leaf_session:p,parent_session:_,query_ra:h,start_time_str:E,just_explain:g,outer_fragment_indices:v},ye=new qO(Z);try{return F.writeMessageBegin("start_query",a.MessageType.CALL,this.seqid()),ye.write(F),F.writeMessageEnd(),this.output.flush()}catch(je){throw delete this._reqs[this.seqid()],typeof F.reset=="function"&&F.reset(),je}}recv_start_query(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new Ly;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("start_query failed: unknown result")}execute_query_step(p,_,h){this._seqid=this.new_seqid();const E=this;return new Promise((g,v)=>{E._reqs[E.seqid()]=(F,Z)=>F?v(F):g(Z),E.send_execute_query_step(p,_,h)})}send_execute_query_step(p,_,h){const E=new this.pClass(this.output),g={pending_query:p,subquery_id:_,start_time_str:h},v=new GO(g);try{return E.writeMessageBegin("execute_query_step",a.MessageType.CALL,this.seqid()),v.write(E),E.writeMessageEnd(),this.output.flush()}catch(F){throw delete this._reqs[this.seqid()],typeof E.reset=="function"&&E.reset(),F}}recv_execute_query_step(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new Py;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("execute_query_step failed: unknown result")}broadcast_serialized_rows(p,_,h,E,g){this._seqid=this.new_seqid();const v=this;return new Promise((F,Z)=>{v._reqs[v.seqid()]=(ye,je)=>ye?Z(ye):F(je),v.send_broadcast_serialized_rows(p,_,h,E,g)})}send_broadcast_serialized_rows(p,_,h,E,g){const v=new this.pClass(this.output),F={serialized_rows:p,row_desc:_,query_id:h,subquery_id:E,is_final_subquery_result:g},Z=new HO(F);try{return v.writeMessageBegin("broadcast_serialized_rows",a.MessageType.CALL,this.seqid()),Z.write(v),v.writeMessageEnd(),this.output.flush()}catch(ye){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),ye}}recv_broadcast_serialized_rows(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new Dy;if(g.read(p),p.readMessageEnd(),g.e!==null)return E(g.e);E(null)}start_render_query(p,_,h,E){this._seqid=this.new_seqid();const g=this;return new Promise((v,F)=>{g._reqs[g.seqid()]=(Z,ye)=>Z?F(Z):v(ye),g.send_start_render_query(p,_,h,E)})}send_start_render_query(p,_,h,E){const g=new this.pClass(this.output),v={session:p,widget_id:_,node_idx:h,vega_json:E},F=new WO(v);try{return g.writeMessageBegin("start_render_query",a.MessageType.CALL,this.seqid()),F.write(g),g.writeMessageEnd(),this.output.flush()}catch(Z){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),Z}}recv_start_render_query(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new $y;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("start_render_query failed: unknown result")}execute_next_render_step(p,_){this._seqid=this.new_seqid();const h=this;return new Promise((E,g)=>{h._reqs[h.seqid()]=(v,F)=>v?g(v):E(F),h.send_execute_next_render_step(p,_)})}send_execute_next_render_step(p,_){const h=new this.pClass(this.output),E={pending_render:p,merged_data:_},g=new VO(E);try{return h.writeMessageBegin("execute_next_render_step",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(v){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),v}}recv_execute_next_render_step(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new Uy;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("execute_next_render_step failed: unknown result")}insert_data(p,_){this._seqid=this.new_seqid();const h=this;return new Promise((E,g)=>{h._reqs[h.seqid()]=(v,F)=>v?g(v):E(F),h.send_insert_data(p,_)})}send_insert_data(p,_){const h=new this.pClass(this.output),E={session:p,insert_data:_},g=new YO(E);try{return h.writeMessageBegin("insert_data",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(v){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),v}}recv_insert_data(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new zy;if(g.read(p),p.readMessageEnd(),g.e!==null)return E(g.e);E(null)}insert_chunks(p,_){this._seqid=this.new_seqid();const h=this;return new Promise((E,g)=>{h._reqs[h.seqid()]=(v,F)=>v?g(v):E(F),h.send_insert_chunks(p,_)})}send_insert_chunks(p,_){const h=new this.pClass(this.output),E={session:p,insert_chunks:_},g=new XO(E);try{return h.writeMessageBegin("insert_chunks",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(v){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),v}}recv_insert_chunks(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new jy;if(g.read(p),p.readMessageEnd(),g.e!==null)return E(g.e);E(null)}checkpoint(p,_){this._seqid=this.new_seqid();const h=this;return new Promise((E,g)=>{h._reqs[h.seqid()]=(v,F)=>v?g(v):E(F),h.send_checkpoint(p,_)})}send_checkpoint(p,_){const h=new this.pClass(this.output),E={session:p,table_id:_},g=new KO(E);try{return h.writeMessageBegin("checkpoint",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(v){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),v}}recv_checkpoint(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new qy;if(g.read(p),p.readMessageEnd(),g.e!==null)return E(g.e);E(null)}get_roles(p){this._seqid=this.new_seqid();const _=this;return new Promise((h,E)=>{_._reqs[_.seqid()]=(g,v)=>g?E(g):h(v),_.send_get_roles(p)})}send_get_roles(p){const _=new this.pClass(this.output),h={session:p},E=new JO(h);try{return _.writeMessageBegin("get_roles",a.MessageType.CALL,this.seqid()),E.write(_),_.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof _.reset=="function"&&_.reset(),g}}recv_get_roles(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new Gy;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("get_roles failed: unknown result")}get_db_objects_for_grantee(p,_){this._seqid=this.new_seqid();const h=this;return new Promise((E,g)=>{h._reqs[h.seqid()]=(v,F)=>v?g(v):E(F),h.send_get_db_objects_for_grantee(p,_)})}send_get_db_objects_for_grantee(p,_){const h=new this.pClass(this.output),E={session:p,roleName:_},g=new QO(E);try{return h.writeMessageBegin("get_db_objects_for_grantee",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(v){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),v}}recv_get_db_objects_for_grantee(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new Hy;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("get_db_objects_for_grantee failed: unknown result")}get_db_object_privs(p,_,h){this._seqid=this.new_seqid();const E=this;return new Promise((g,v)=>{E._reqs[E.seqid()]=(F,Z)=>F?v(F):g(Z),E.send_get_db_object_privs(p,_,h)})}send_get_db_object_privs(p,_,h){const E=new this.pClass(this.output),g={session:p,objectName:_,type:h},v=new ZO(g);try{return E.writeMessageBegin("get_db_object_privs",a.MessageType.CALL,this.seqid()),v.write(E),E.writeMessageEnd(),this.output.flush()}catch(F){throw delete this._reqs[this.seqid()],typeof E.reset=="function"&&E.reset(),F}}recv_get_db_object_privs(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new Wy;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("get_db_object_privs failed: unknown result")}get_all_roles_for_user(p,_){this._seqid=this.new_seqid();const h=this;return new Promise((E,g)=>{h._reqs[h.seqid()]=(v,F)=>v?g(v):E(F),h.send_get_all_roles_for_user(p,_)})}send_get_all_roles_for_user(p,_){const h=new this.pClass(this.output),E={session:p,userName:_},g=new eN(E);try{return h.writeMessageBegin("get_all_roles_for_user",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(v){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),v}}recv_get_all_roles_for_user(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new Vy;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("get_all_roles_for_user failed: unknown result")}get_all_effective_roles_for_user(p,_){this._seqid=this.new_seqid();const h=this;return new Promise((E,g)=>{h._reqs[h.seqid()]=(v,F)=>v?g(v):E(F),h.send_get_all_effective_roles_for_user(p,_)})}send_get_all_effective_roles_for_user(p,_){const h=new this.pClass(this.output),E={session:p,userName:_},g=new tN(E);try{return h.writeMessageBegin("get_all_effective_roles_for_user",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(v){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),v}}recv_get_all_effective_roles_for_user(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new Yy;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("get_all_effective_roles_for_user failed: unknown result")}has_role(p,_,h){this._seqid=this.new_seqid();const E=this;return new Promise((g,v)=>{E._reqs[E.seqid()]=(F,Z)=>F?v(F):g(Z),E.send_has_role(p,_,h)})}send_has_role(p,_,h){const E=new this.pClass(this.output),g={session:p,granteeName:_,roleName:h},v=new nN(g);try{return E.writeMessageBegin("has_role",a.MessageType.CALL,this.seqid()),v.write(E),E.writeMessageEnd(),this.output.flush()}catch(F){throw delete this._reqs[this.seqid()],typeof E.reset=="function"&&E.reset(),F}}recv_has_role(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new Xy;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("has_role failed: unknown result")}has_object_privilege(p,_,h,E,g){this._seqid=this.new_seqid();const v=this;return new Promise((F,Z)=>{v._reqs[v.seqid()]=(ye,je)=>ye?Z(ye):F(je),v.send_has_object_privilege(p,_,h,E,g)})}send_has_object_privilege(p,_,h,E,g){const v=new this.pClass(this.output),F={session:p,granteeName:_,ObjectName:h,objectType:E,permissions:g},Z=new iN(F);try{return v.writeMessageBegin("has_object_privilege",a.MessageType.CALL,this.seqid()),Z.write(v),v.writeMessageEnd(),this.output.flush()}catch(ye){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),ye}}recv_has_object_privilege(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new Ky;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("has_object_privilege failed: unknown result")}set_license_key(p,_,h){this._seqid=this.new_seqid();const E=this;return new Promise((g,v)=>{E._reqs[E.seqid()]=(F,Z)=>F?v(F):g(Z),E.send_set_license_key(p,_,h)})}send_set_license_key(p,_,h){const E=new this.pClass(this.output),g={session:p,key:_,nonce:h},v=new sN(g);try{return E.writeMessageBegin("set_license_key",a.MessageType.CALL,this.seqid()),v.write(E),E.writeMessageEnd(),this.output.flush()}catch(F){throw delete this._reqs[this.seqid()],typeof E.reset=="function"&&E.reset(),F}}recv_set_license_key(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new Jy;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("set_license_key failed: unknown result")}get_license_claims(p,_){this._seqid=this.new_seqid();const h=this;return new Promise((E,g)=>{h._reqs[h.seqid()]=(v,F)=>v?g(v):E(F),h.send_get_license_claims(p,_)})}send_get_license_claims(p,_){const h=new this.pClass(this.output),E={session:p,nonce:_},g=new rN(E);try{return h.writeMessageBegin("get_license_claims",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(v){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),v}}recv_get_license_claims(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new Qy;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("get_license_claims failed: unknown result")}get_device_parameters(p){this._seqid=this.new_seqid();const _=this;return new Promise((h,E)=>{_._reqs[_.seqid()]=(g,v)=>g?E(g):h(v),_.send_get_device_parameters(p)})}send_get_device_parameters(p){const _=new this.pClass(this.output),h={session:p},E=new aN(h);try{return _.writeMessageBegin("get_device_parameters",a.MessageType.CALL,this.seqid()),E.write(_),_.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof _.reset=="function"&&_.reset(),g}}recv_get_device_parameters(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new Zy;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("get_device_parameters failed: unknown result")}register_runtime_extension_functions(p,_,h,E){this._seqid=this.new_seqid();const g=this;return new Promise((v,F)=>{g._reqs[g.seqid()]=(Z,ye)=>Z?F(Z):v(ye),g.send_register_runtime_extension_functions(p,_,h,E)})}send_register_runtime_extension_functions(p,_,h,E){const g=new this.pClass(this.output),v={session:p,udfs:_,udtfs:h,device_ir_map:E},F=new oN(v);try{return g.writeMessageBegin("register_runtime_extension_functions",a.MessageType.CALL,this.seqid()),F.write(g),g.writeMessageEnd(),this.output.flush()}catch(Z){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),Z}}recv_register_runtime_extension_functions(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new em;if(g.read(p),p.readMessageEnd(),g.e!==null)return E(g.e);E(null)}get_table_function_names(p){this._seqid=this.new_seqid();const _=this;return new Promise((h,E)=>{_._reqs[_.seqid()]=(g,v)=>g?E(g):h(v),_.send_get_table_function_names(p)})}send_get_table_function_names(p){const _=new this.pClass(this.output),h={session:p},E=new lN(h);try{return _.writeMessageBegin("get_table_function_names",a.MessageType.CALL,this.seqid()),E.write(_),_.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof _.reset=="function"&&_.reset(),g}}recv_get_table_function_names(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new tm;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("get_table_function_names failed: unknown result")}get_runtime_table_function_names(p){this._seqid=this.new_seqid();const _=this;return new Promise((h,E)=>{_._reqs[_.seqid()]=(g,v)=>g?E(g):h(v),_.send_get_runtime_table_function_names(p)})}send_get_runtime_table_function_names(p){const _=new this.pClass(this.output),h={session:p},E=new cN(h);try{return _.writeMessageBegin("get_runtime_table_function_names",a.MessageType.CALL,this.seqid()),E.write(_),_.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof _.reset=="function"&&_.reset(),g}}recv_get_runtime_table_function_names(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new nm;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("get_runtime_table_function_names failed: unknown result")}get_table_function_details(p,_){this._seqid=this.new_seqid();const h=this;return new Promise((E,g)=>{h._reqs[h.seqid()]=(v,F)=>v?g(v):E(F),h.send_get_table_function_details(p,_)})}send_get_table_function_details(p,_){const h=new this.pClass(this.output),E={session:p,udtf_names:_},g=new dN(E);try{return h.writeMessageBegin("get_table_function_details",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(v){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),v}}recv_get_table_function_details(p,_,h){const E=this._reqs[h]||function(){};if(delete this._reqs[h],_==a.MessageType.EXCEPTION){const v=new a.TApplicationException;return v.read(p),p.readMessageEnd(),E(v)}const g=new im;return g.read(p),p.readMessageEnd(),g.e!==null?E(g.e):g.success!==null?E(null,g.success):E("get_table_function_details failed: unknown result")}},d.Processor=class{constructor(p){this._handler=p}process(p,_){const h=p.readMessageBegin();if(this["process_"+h.fname])return this["process_"+h.fname].call(this,h.rseqid,p,_);{p.skip(a.Type.STRUCT),p.readMessageEnd();const E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN_METHOD,"Unknown function "+h.fname);_.writeMessageBegin(h.fname,a.MessageType.EXCEPTION,h.rseqid),E.write(_),_.writeMessageEnd(),_.flush()}}process_connect(p,_,h){const E=new T;E.read(_),_.readMessageEnd(),this._handler.connect.length===3?Promise.resolve(this._handler.connect.bind(this._handler)(E.user,E.passwd,E.dbname)).then(g=>{const v=new b({success:g});h.writeMessageBegin("connect",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new b(g),h.writeMessageBegin("connect",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("connect",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.connect(E.user,E.passwd,E.dbname,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new b(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("connect",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("connect",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_krb5_connect(p,_,h){const E=new S;E.read(_),_.readMessageEnd(),this._handler.krb5_connect.length===2?Promise.resolve(this._handler.krb5_connect.bind(this._handler)(E.inputToken,E.dbname)).then(g=>{const v=new x({success:g});h.writeMessageBegin("krb5_connect",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new x(g),h.writeMessageBegin("krb5_connect",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("krb5_connect",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.krb5_connect(E.inputToken,E.dbname,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new x(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("krb5_connect",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("krb5_connect",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_disconnect(p,_,h){const E=new k;E.read(_),_.readMessageEnd(),this._handler.disconnect.length===1?Promise.resolve(this._handler.disconnect.bind(this._handler)(E.session)).then(g=>{const v=new I({success:g});h.writeMessageBegin("disconnect",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new I(g),h.writeMessageBegin("disconnect",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("disconnect",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.disconnect(E.session,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new I(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("disconnect",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("disconnect",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_switch_database(p,_,h){const E=new B;E.read(_),_.readMessageEnd(),this._handler.switch_database.length===2?Promise.resolve(this._handler.switch_database.bind(this._handler)(E.session,E.dbname)).then(g=>{const v=new O({success:g});h.writeMessageBegin("switch_database",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new O(g),h.writeMessageBegin("switch_database",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("switch_database",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.switch_database(E.session,E.dbname,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new O(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("switch_database",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("switch_database",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_clone_session(p,_,h){const E=new A;E.read(_),_.readMessageEnd(),this._handler.clone_session.length===1?Promise.resolve(this._handler.clone_session.bind(this._handler)(E.session)).then(g=>{const v=new R({success:g});h.writeMessageBegin("clone_session",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new R(g),h.writeMessageBegin("clone_session",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("clone_session",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.clone_session(E.session,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new R(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("clone_session",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("clone_session",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_get_server_status(p,_,h){const E=new P;E.read(_),_.readMessageEnd(),this._handler.get_server_status.length===1?Promise.resolve(this._handler.get_server_status.bind(this._handler)(E.session)).then(g=>{const v=new D({success:g});h.writeMessageBegin("get_server_status",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new D(g),h.writeMessageBegin("get_server_status",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_server_status",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_server_status(E.session,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new D(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("get_server_status",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_server_status",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_get_status(p,_,h){const E=new U;E.read(_),_.readMessageEnd(),this._handler.get_status.length===1?Promise.resolve(this._handler.get_status.bind(this._handler)(E.session)).then(g=>{const v=new Y({success:g});h.writeMessageBegin("get_status",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new Y(g),h.writeMessageBegin("get_status",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_status",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_status(E.session,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new Y(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("get_status",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_status",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_get_hardware_info(p,_,h){const E=new z;E.read(_),_.readMessageEnd(),this._handler.get_hardware_info.length===1?Promise.resolve(this._handler.get_hardware_info.bind(this._handler)(E.session)).then(g=>{const v=new W({success:g});h.writeMessageBegin("get_hardware_info",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new W(g),h.writeMessageBegin("get_hardware_info",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_hardware_info",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_hardware_info(E.session,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new W(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("get_hardware_info",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_hardware_info",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_get_tables(p,_,h){const E=new H;E.read(_),_.readMessageEnd(),this._handler.get_tables.length===1?Promise.resolve(this._handler.get_tables.bind(this._handler)(E.session)).then(g=>{const v=new V({success:g});h.writeMessageBegin("get_tables",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new V(g),h.writeMessageBegin("get_tables",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_tables",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_tables(E.session,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new V(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("get_tables",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_tables",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_get_tables_for_database(p,_,h){const E=new J;E.read(_),_.readMessageEnd(),this._handler.get_tables_for_database.length===2?Promise.resolve(this._handler.get_tables_for_database.bind(this._handler)(E.session,E.database_name)).then(g=>{const v=new G({success:g});h.writeMessageBegin("get_tables_for_database",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new G(g),h.writeMessageBegin("get_tables_for_database",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_tables_for_database",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_tables_for_database(E.session,E.database_name,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new G(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("get_tables_for_database",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_tables_for_database",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_get_physical_tables(p,_,h){const E=new oe;E.read(_),_.readMessageEnd(),this._handler.get_physical_tables.length===1?Promise.resolve(this._handler.get_physical_tables.bind(this._handler)(E.session)).then(g=>{const v=new he({success:g});h.writeMessageBegin("get_physical_tables",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new he(g),h.writeMessageBegin("get_physical_tables",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_physical_tables",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_physical_tables(E.session,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new he(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("get_physical_tables",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_physical_tables",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_get_views(p,_,h){const E=new ne;E.read(_),_.readMessageEnd(),this._handler.get_views.length===1?Promise.resolve(this._handler.get_views.bind(this._handler)(E.session)).then(g=>{const v=new Fe({success:g});h.writeMessageBegin("get_views",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new Fe(g),h.writeMessageBegin("get_views",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_views",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_views(E.session,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new Fe(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("get_views",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_views",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_get_tables_meta(p,_,h){const E=new de;E.read(_),_.readMessageEnd(),this._handler.get_tables_meta.length===1?Promise.resolve(this._handler.get_tables_meta.bind(this._handler)(E.session)).then(g=>{const v=new ke({success:g});h.writeMessageBegin("get_tables_meta",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new ke(g),h.writeMessageBegin("get_tables_meta",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_tables_meta",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_tables_meta(E.session,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new ke(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("get_tables_meta",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_tables_meta",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_get_table_details(p,_,h){const E=new Ue;E.read(_),_.readMessageEnd(),this._handler.get_table_details.length===2?Promise.resolve(this._handler.get_table_details.bind(this._handler)(E.session,E.table_name)).then(g=>{const v=new at({success:g});h.writeMessageBegin("get_table_details",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new at(g),h.writeMessageBegin("get_table_details",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_table_details",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_table_details(E.session,E.table_name,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new at(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("get_table_details",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_table_details",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_get_table_details_for_database(p,_,h){const E=new Tt;E.read(_),_.readMessageEnd(),this._handler.get_table_details_for_database.length===3?Promise.resolve(this._handler.get_table_details_for_database.bind(this._handler)(E.session,E.table_name,E.database_name)).then(g=>{const v=new Ft({success:g});h.writeMessageBegin("get_table_details_for_database",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new Ft(g),h.writeMessageBegin("get_table_details_for_database",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_table_details_for_database",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_table_details_for_database(E.session,E.table_name,E.database_name,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new Ft(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("get_table_details_for_database",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_table_details_for_database",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_get_internal_table_details(p,_,h){const E=new _e;E.read(_),_.readMessageEnd(),this._handler.get_internal_table_details.length===3?Promise.resolve(this._handler.get_internal_table_details.bind(this._handler)(E.session,E.table_name,E.include_system_columns)).then(g=>{const v=new q({success:g});h.writeMessageBegin("get_internal_table_details",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new q(g),h.writeMessageBegin("get_internal_table_details",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_internal_table_details",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_internal_table_details(E.session,E.table_name,E.include_system_columns,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new q(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("get_internal_table_details",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_internal_table_details",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_get_internal_table_details_for_database(p,_,h){const E=new j;E.read(_),_.readMessageEnd(),this._handler.get_internal_table_details_for_database.length===3?Promise.resolve(this._handler.get_internal_table_details_for_database.bind(this._handler)(E.session,E.table_name,E.database_name)).then(g=>{const v=new L({success:g});h.writeMessageBegin("get_internal_table_details_for_database",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new L(g),h.writeMessageBegin("get_internal_table_details_for_database",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_internal_table_details_for_database",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_internal_table_details_for_database(E.session,E.table_name,E.database_name,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new L(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("get_internal_table_details_for_database",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_internal_table_details_for_database",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_get_users(p,_,h){const E=new K;E.read(_),_.readMessageEnd(),this._handler.get_users.length===1?Promise.resolve(this._handler.get_users.bind(this._handler)(E.session)).then(g=>{const v=new Q({success:g});h.writeMessageBegin("get_users",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new Q(g),h.writeMessageBegin("get_users",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_users",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_users(E.session,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new Q(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("get_users",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_users",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_get_databases(p,_,h){const E=new ae;E.read(_),_.readMessageEnd(),this._handler.get_databases.length===1?Promise.resolve(this._handler.get_databases.bind(this._handler)(E.session)).then(g=>{const v=new se({success:g});h.writeMessageBegin("get_databases",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new se(g),h.writeMessageBegin("get_databases",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_databases",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_databases(E.session,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new se(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("get_databases",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_databases",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_get_version(p,_,h){new ge().read(_),_.readMessageEnd(),this._handler.get_version.length===0?Promise.resolve(this._handler.get_version.bind(this._handler)()).then(g=>{const v=new Ee({success:g});h.writeMessageBegin("get_version",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new Ee(g),h.writeMessageBegin("get_version",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_version",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_version((g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new Ee(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("get_version",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_version",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_start_heap_profile(p,_,h){const E=new Ve;E.read(_),_.readMessageEnd(),this._handler.start_heap_profile.length===1?Promise.resolve(this._handler.start_heap_profile.bind(this._handler)(E.session)).then(g=>{const v=new Vt({success:g});h.writeMessageBegin("start_heap_profile",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new Vt(g),h.writeMessageBegin("start_heap_profile",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("start_heap_profile",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.start_heap_profile(E.session,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new Vt(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("start_heap_profile",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("start_heap_profile",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_stop_heap_profile(p,_,h){const E=new nn;E.read(_),_.readMessageEnd(),this._handler.stop_heap_profile.length===1?Promise.resolve(this._handler.stop_heap_profile.bind(this._handler)(E.session)).then(g=>{const v=new Lt({success:g});h.writeMessageBegin("stop_heap_profile",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new Lt(g),h.writeMessageBegin("stop_heap_profile",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("stop_heap_profile",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.stop_heap_profile(E.session,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new Lt(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("stop_heap_profile",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("stop_heap_profile",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_get_heap_profile(p,_,h){const E=new is;E.read(_),_.readMessageEnd(),this._handler.get_heap_profile.length===1?Promise.resolve(this._handler.get_heap_profile.bind(this._handler)(E.session)).then(g=>{const v=new vs({success:g});h.writeMessageBegin("get_heap_profile",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new vs(g),h.writeMessageBegin("get_heap_profile",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_heap_profile",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_heap_profile(E.session,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new vs(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("get_heap_profile",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_heap_profile",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_get_memory(p,_,h){const E=new Ss;E.read(_),_.readMessageEnd(),this._handler.get_memory.length===2?Promise.resolve(this._handler.get_memory.bind(this._handler)(E.session,E.memory_level)).then(g=>{const v=new ue({success:g});h.writeMessageBegin("get_memory",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new ue(g),h.writeMessageBegin("get_memory",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_memory",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_memory(E.session,E.memory_level,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new ue(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("get_memory",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_memory",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_clear_cpu_memory(p,_,h){const E=new Mi;E.read(_),_.readMessageEnd(),this._handler.clear_cpu_memory.length===1?Promise.resolve(this._handler.clear_cpu_memory.bind(this._handler)(E.session)).then(g=>{const v=new fi({success:g});h.writeMessageBegin("clear_cpu_memory",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new fi(g),h.writeMessageBegin("clear_cpu_memory",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("clear_cpu_memory",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.clear_cpu_memory(E.session,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new fi(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("clear_cpu_memory",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("clear_cpu_memory",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_clear_gpu_memory(p,_,h){const E=new Pr;E.read(_),_.readMessageEnd(),this._handler.clear_gpu_memory.length===1?Promise.resolve(this._handler.clear_gpu_memory.bind(this._handler)(E.session)).then(g=>{const v=new Sn({success:g});h.writeMessageBegin("clear_gpu_memory",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new Sn(g),h.writeMessageBegin("clear_gpu_memory",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("clear_gpu_memory",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.clear_gpu_memory(E.session,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new Sn(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("clear_gpu_memory",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("clear_gpu_memory",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_set_cur_session(p,_,h){const E=new $o;E.read(_),_.readMessageEnd(),this._handler.set_cur_session.length===5?Promise.resolve(this._handler.set_cur_session.bind(this._handler)(E.parent_session,E.leaf_session,E.start_time_str,E.label,E.for_running_query_kernel)).then(g=>{const v=new Uo({success:g});h.writeMessageBegin("set_cur_session",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new Uo(g),h.writeMessageBegin("set_cur_session",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("set_cur_session",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.set_cur_session(E.parent_session,E.leaf_session,E.start_time_str,E.label,E.for_running_query_kernel,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new Uo(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("set_cur_session",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("set_cur_session",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_invalidate_cur_session(p,_,h){const E=new ss;E.read(_),_.readMessageEnd(),this._handler.invalidate_cur_session.length===5?Promise.resolve(this._handler.invalidate_cur_session.bind(this._handler)(E.parent_session,E.leaf_session,E.start_time_str,E.label,E.for_running_query_kernel)).then(g=>{const v=new zo({success:g});h.writeMessageBegin("invalidate_cur_session",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new zo(g),h.writeMessageBegin("invalidate_cur_session",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("invalidate_cur_session",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.invalidate_cur_session(E.parent_session,E.leaf_session,E.start_time_str,E.label,E.for_running_query_kernel,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new zo(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("invalidate_cur_session",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("invalidate_cur_session",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_set_table_epoch(p,_,h){const E=new C;E.read(_),_.readMessageEnd(),this._handler.set_table_epoch.length===4?Promise.resolve(this._handler.set_table_epoch.bind(this._handler)(E.session,E.db_id,E.table_id,E.new_epoch)).then(g=>{const v=new M({success:g});h.writeMessageBegin("set_table_epoch",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new M(g),h.writeMessageBegin("set_table_epoch",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("set_table_epoch",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.set_table_epoch(E.session,E.db_id,E.table_id,E.new_epoch,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new M(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("set_table_epoch",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("set_table_epoch",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_set_table_epoch_by_name(p,_,h){const E=new N;E.read(_),_.readMessageEnd(),this._handler.set_table_epoch_by_name.length===3?Promise.resolve(this._handler.set_table_epoch_by_name.bind(this._handler)(E.session,E.table_name,E.new_epoch)).then(g=>{const v=new $({success:g});h.writeMessageBegin("set_table_epoch_by_name",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new $(g),h.writeMessageBegin("set_table_epoch_by_name",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("set_table_epoch_by_name",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.set_table_epoch_by_name(E.session,E.table_name,E.new_epoch,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new $(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("set_table_epoch_by_name",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("set_table_epoch_by_name",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_get_table_epoch(p,_,h){const E=new X;E.read(_),_.readMessageEnd(),this._handler.get_table_epoch.length===3?Promise.resolve(this._handler.get_table_epoch.bind(this._handler)(E.session,E.db_id,E.table_id)).then(g=>{const v=new ee({success:g});h.writeMessageBegin("get_table_epoch",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_table_epoch",a.MessageType.EXCEPTION,p),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_table_epoch(E.session,E.db_id,E.table_id,(g,v)=>{let F;g===null||typeof g>"u"?(F=new ee(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("get_table_epoch",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_table_epoch",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_get_table_epoch_by_name(p,_,h){const E=new ie;E.read(_),_.readMessageEnd(),this._handler.get_table_epoch_by_name.length===2?Promise.resolve(this._handler.get_table_epoch_by_name.bind(this._handler)(E.session,E.table_name)).then(g=>{const v=new Ie({success:g});h.writeMessageBegin("get_table_epoch_by_name",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_table_epoch_by_name",a.MessageType.EXCEPTION,p),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_table_epoch_by_name(E.session,E.table_name,(g,v)=>{let F;g===null||typeof g>"u"?(F=new Ie(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("get_table_epoch_by_name",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_table_epoch_by_name",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_get_table_epochs(p,_,h){const E=new Pe;E.read(_),_.readMessageEnd(),this._handler.get_table_epochs.length===3?Promise.resolve(this._handler.get_table_epochs.bind(this._handler)(E.session,E.db_id,E.table_id)).then(g=>{const v=new De({success:g});h.writeMessageBegin("get_table_epochs",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_table_epochs",a.MessageType.EXCEPTION,p),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_table_epochs(E.session,E.db_id,E.table_id,(g,v)=>{let F;g===null||typeof g>"u"?(F=new De(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("get_table_epochs",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_table_epochs",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_set_table_epochs(p,_,h){const E=new He;E.read(_),_.readMessageEnd(),this._handler.set_table_epochs.length===3?Promise.resolve(this._handler.set_table_epochs.bind(this._handler)(E.session,E.db_id,E.table_epochs)).then(g=>{const v=new We({success:g});h.writeMessageBegin("set_table_epochs",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("set_table_epochs",a.MessageType.EXCEPTION,p),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.set_table_epochs(E.session,E.db_id,E.table_epochs,(g,v)=>{let F;g===null||typeof g>"u"?(F=new We(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("set_table_epochs",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("set_table_epochs",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_get_session_info(p,_,h){const E=new jo;E.read(_),_.readMessageEnd(),this._handler.get_session_info.length===1?Promise.resolve(this._handler.get_session_info.bind(this._handler)(E.session)).then(g=>{const v=new Hp({success:g});h.writeMessageBegin("get_session_info",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new Hp(g),h.writeMessageBegin("get_session_info",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_session_info",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_session_info(E.session,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new Hp(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("get_session_info",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_session_info",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_get_queries_info(p,_,h){const E=new ZA;E.read(_),_.readMessageEnd(),this._handler.get_queries_info.length===1?Promise.resolve(this._handler.get_queries_info.bind(this._handler)(E.session)).then(g=>{const v=new Wp({success:g});h.writeMessageBegin("get_queries_info",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new Wp(g),h.writeMessageBegin("get_queries_info",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_queries_info",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_queries_info(E.session,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new Wp(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("get_queries_info",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_queries_info",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_set_leaf_info(p,_,h){const E=new eO;E.read(_),_.readMessageEnd(),this._handler.set_leaf_info.length===2?Promise.resolve(this._handler.set_leaf_info.bind(this._handler)(E.session,E.leaf_info)).then(g=>{const v=new Vp({success:g});h.writeMessageBegin("set_leaf_info",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new Vp(g),h.writeMessageBegin("set_leaf_info",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("set_leaf_info",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.set_leaf_info(E.session,E.leaf_info,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new Vp(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("set_leaf_info",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("set_leaf_info",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_sql_execute(p,_,h){const E=new tO;E.read(_),_.readMessageEnd(),this._handler.sql_execute.length===6?Promise.resolve(this._handler.sql_execute.bind(this._handler)(E.session,E.query,E.column_format,E.nonce,E.first_n,E.at_most_n)).then(g=>{const v=new Yp({success:g});h.writeMessageBegin("sql_execute",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new Yp(g),h.writeMessageBegin("sql_execute",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("sql_execute",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.sql_execute(E.session,E.query,E.column_format,E.nonce,E.first_n,E.at_most_n,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new Yp(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("sql_execute",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("sql_execute",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_sql_execute_df(p,_,h){const E=new nO;E.read(_),_.readMessageEnd(),this._handler.sql_execute_df.length===6?Promise.resolve(this._handler.sql_execute_df.bind(this._handler)(E.session,E.query,E.device_type,E.device_id,E.first_n,E.transport_method)).then(g=>{const v=new Xp({success:g});h.writeMessageBegin("sql_execute_df",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new Xp(g),h.writeMessageBegin("sql_execute_df",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("sql_execute_df",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.sql_execute_df(E.session,E.query,E.device_type,E.device_id,E.first_n,E.transport_method,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new Xp(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("sql_execute_df",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("sql_execute_df",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_sql_execute_gdf(p,_,h){const E=new iO;E.read(_),_.readMessageEnd(),this._handler.sql_execute_gdf.length===4?Promise.resolve(this._handler.sql_execute_gdf.bind(this._handler)(E.session,E.query,E.device_id,E.first_n)).then(g=>{const v=new Kp({success:g});h.writeMessageBegin("sql_execute_gdf",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new Kp(g),h.writeMessageBegin("sql_execute_gdf",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("sql_execute_gdf",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.sql_execute_gdf(E.session,E.query,E.device_id,E.first_n,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new Kp(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("sql_execute_gdf",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("sql_execute_gdf",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_deallocate_df(p,_,h){const E=new sO;E.read(_),_.readMessageEnd(),this._handler.deallocate_df.length===4?Promise.resolve(this._handler.deallocate_df.bind(this._handler)(E.session,E.df,E.device_type,E.device_id)).then(g=>{const v=new Jp({success:g});h.writeMessageBegin("deallocate_df",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new Jp(g),h.writeMessageBegin("deallocate_df",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("deallocate_df",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.deallocate_df(E.session,E.df,E.device_type,E.device_id,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new Jp(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("deallocate_df",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("deallocate_df",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_interrupt(p,_,h){const E=new rO;E.read(_),_.readMessageEnd(),this._handler.interrupt.length===2?Promise.resolve(this._handler.interrupt.bind(this._handler)(E.query_session,E.interrupt_session)).then(g=>{const v=new Qp({success:g});h.writeMessageBegin("interrupt",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new Qp(g),h.writeMessageBegin("interrupt",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("interrupt",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.interrupt(E.query_session,E.interrupt_session,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new Qp(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("interrupt",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("interrupt",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_sql_validate(p,_,h){const E=new aO;E.read(_),_.readMessageEnd(),this._handler.sql_validate.length===2?Promise.resolve(this._handler.sql_validate.bind(this._handler)(E.session,E.query)).then(g=>{const v=new Zp({success:g});h.writeMessageBegin("sql_validate",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new Zp(g),h.writeMessageBegin("sql_validate",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("sql_validate",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.sql_validate(E.session,E.query,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new Zp(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("sql_validate",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("sql_validate",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_get_completion_hints(p,_,h){const E=new oO;E.read(_),_.readMessageEnd(),this._handler.get_completion_hints.length===3?Promise.resolve(this._handler.get_completion_hints.bind(this._handler)(E.session,E.sql,E.cursor)).then(g=>{const v=new ey({success:g});h.writeMessageBegin("get_completion_hints",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new ey(g),h.writeMessageBegin("get_completion_hints",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_completion_hints",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_completion_hints(E.session,E.sql,E.cursor,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new ey(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("get_completion_hints",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_completion_hints",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_set_execution_mode(p,_,h){const E=new lO;E.read(_),_.readMessageEnd(),this._handler.set_execution_mode.length===2?Promise.resolve(this._handler.set_execution_mode.bind(this._handler)(E.session,E.mode)).then(g=>{const v=new ty({success:g});h.writeMessageBegin("set_execution_mode",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new ty(g),h.writeMessageBegin("set_execution_mode",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("set_execution_mode",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.set_execution_mode(E.session,E.mode,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new ty(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("set_execution_mode",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("set_execution_mode",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_render_vega(p,_,h){const E=new cO;E.read(_),_.readMessageEnd(),this._handler.render_vega.length===5?Promise.resolve(this._handler.render_vega.bind(this._handler)(E.session,E.widget_id,E.vega_json,E.compression_level,E.nonce)).then(g=>{const v=new ny({success:g});h.writeMessageBegin("render_vega",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new ny(g),h.writeMessageBegin("render_vega",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("render_vega",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.render_vega(E.session,E.widget_id,E.vega_json,E.compression_level,E.nonce,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new ny(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("render_vega",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("render_vega",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_get_result_row_for_pixel(p,_,h){const E=new dO;E.read(_),_.readMessageEnd(),this._handler.get_result_row_for_pixel.length===7?Promise.resolve(this._handler.get_result_row_for_pixel.bind(this._handler)(E.session,E.widget_id,E.pixel,E.table_col_names,E.column_format,E.pixelRadius,E.nonce)).then(g=>{const v=new iy({success:g});h.writeMessageBegin("get_result_row_for_pixel",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new iy(g),h.writeMessageBegin("get_result_row_for_pixel",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_result_row_for_pixel",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_result_row_for_pixel(E.session,E.widget_id,E.pixel,E.table_col_names,E.column_format,E.pixelRadius,E.nonce,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new iy(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("get_result_row_for_pixel",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_result_row_for_pixel",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_create_custom_expression(p,_,h){const E=new fO;E.read(_),_.readMessageEnd(),this._handler.create_custom_expression.length===2?Promise.resolve(this._handler.create_custom_expression.bind(this._handler)(E.session,E.custom_expression)).then(g=>{const v=new sy({success:g});h.writeMessageBegin("create_custom_expression",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new sy(g),h.writeMessageBegin("create_custom_expression",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("create_custom_expression",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.create_custom_expression(E.session,E.custom_expression,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new sy(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("create_custom_expression",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("create_custom_expression",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_get_custom_expressions(p,_,h){const E=new uO;E.read(_),_.readMessageEnd(),this._handler.get_custom_expressions.length===1?Promise.resolve(this._handler.get_custom_expressions.bind(this._handler)(E.session)).then(g=>{const v=new ry({success:g});h.writeMessageBegin("get_custom_expressions",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new ry(g),h.writeMessageBegin("get_custom_expressions",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_custom_expressions",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_custom_expressions(E.session,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new ry(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("get_custom_expressions",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_custom_expressions",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_update_custom_expression(p,_,h){const E=new hO;E.read(_),_.readMessageEnd(),this._handler.update_custom_expression.length===3?Promise.resolve(this._handler.update_custom_expression.bind(this._handler)(E.session,E.id,E.expression_json)).then(g=>{const v=new ay({success:g});h.writeMessageBegin("update_custom_expression",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new ay(g),h.writeMessageBegin("update_custom_expression",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("update_custom_expression",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.update_custom_expression(E.session,E.id,E.expression_json,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new ay(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("update_custom_expression",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("update_custom_expression",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_delete_custom_expressions(p,_,h){const E=new _O;E.read(_),_.readMessageEnd(),this._handler.delete_custom_expressions.length===3?Promise.resolve(this._handler.delete_custom_expressions.bind(this._handler)(E.session,E.custom_expression_ids,E.do_soft_delete)).then(g=>{const v=new oy({success:g});h.writeMessageBegin("delete_custom_expressions",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new oy(g),h.writeMessageBegin("delete_custom_expressions",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("delete_custom_expressions",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.delete_custom_expressions(E.session,E.custom_expression_ids,E.do_soft_delete,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new oy(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("delete_custom_expressions",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("delete_custom_expressions",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_get_dashboard(p,_,h){const E=new gO;E.read(_),_.readMessageEnd(),this._handler.get_dashboard.length===2?Promise.resolve(this._handler.get_dashboard.bind(this._handler)(E.session,E.dashboard_id)).then(g=>{const v=new ly({success:g});h.writeMessageBegin("get_dashboard",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new ly(g),h.writeMessageBegin("get_dashboard",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_dashboard",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_dashboard(E.session,E.dashboard_id,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new ly(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("get_dashboard",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_dashboard",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_get_dashboards(p,_,h){const E=new pO;E.read(_),_.readMessageEnd(),this._handler.get_dashboards.length===1?Promise.resolve(this._handler.get_dashboards.bind(this._handler)(E.session)).then(g=>{const v=new cy({success:g});h.writeMessageBegin("get_dashboards",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new cy(g),h.writeMessageBegin("get_dashboards",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_dashboards",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_dashboards(E.session,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new cy(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("get_dashboards",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_dashboards",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_create_dashboard(p,_,h){const E=new yO;E.read(_),_.readMessageEnd(),this._handler.create_dashboard.length===5?Promise.resolve(this._handler.create_dashboard.bind(this._handler)(E.session,E.dashboard_name,E.dashboard_state,E.image_hash,E.dashboard_metadata)).then(g=>{const v=new dy({success:g});h.writeMessageBegin("create_dashboard",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new dy(g),h.writeMessageBegin("create_dashboard",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("create_dashboard",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.create_dashboard(E.session,E.dashboard_name,E.dashboard_state,E.image_hash,E.dashboard_metadata,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new dy(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("create_dashboard",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("create_dashboard",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_replace_dashboard(p,_,h){const E=new mO;E.read(_),_.readMessageEnd(),this._handler.replace_dashboard.length===7?Promise.resolve(this._handler.replace_dashboard.bind(this._handler)(E.session,E.dashboard_id,E.dashboard_name,E.dashboard_owner,E.dashboard_state,E.image_hash,E.dashboard_metadata)).then(g=>{const v=new fy({success:g});h.writeMessageBegin("replace_dashboard",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new fy(g),h.writeMessageBegin("replace_dashboard",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("replace_dashboard",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.replace_dashboard(E.session,E.dashboard_id,E.dashboard_name,E.dashboard_owner,E.dashboard_state,E.image_hash,E.dashboard_metadata,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new fy(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("replace_dashboard",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("replace_dashboard",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_delete_dashboard(p,_,h){const E=new wO;E.read(_),_.readMessageEnd(),this._handler.delete_dashboard.length===2?Promise.resolve(this._handler.delete_dashboard.bind(this._handler)(E.session,E.dashboard_id)).then(g=>{const v=new uy({success:g});h.writeMessageBegin("delete_dashboard",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new uy(g),h.writeMessageBegin("delete_dashboard",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("delete_dashboard",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.delete_dashboard(E.session,E.dashboard_id,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new uy(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("delete_dashboard",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("delete_dashboard",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_share_dashboards(p,_,h){const E=new bO;E.read(_),_.readMessageEnd(),this._handler.share_dashboards.length===4?Promise.resolve(this._handler.share_dashboards.bind(this._handler)(E.session,E.dashboard_ids,E.groups,E.permissions)).then(g=>{const v=new hy({success:g});h.writeMessageBegin("share_dashboards",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new hy(g),h.writeMessageBegin("share_dashboards",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("share_dashboards",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.share_dashboards(E.session,E.dashboard_ids,E.groups,E.permissions,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new hy(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("share_dashboards",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("share_dashboards",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_delete_dashboards(p,_,h){const E=new TO;E.read(_),_.readMessageEnd(),this._handler.delete_dashboards.length===2?Promise.resolve(this._handler.delete_dashboards.bind(this._handler)(E.session,E.dashboard_ids)).then(g=>{const v=new _y({success:g});h.writeMessageBegin("delete_dashboards",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new _y(g),h.writeMessageBegin("delete_dashboards",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("delete_dashboards",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.delete_dashboards(E.session,E.dashboard_ids,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new _y(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("delete_dashboards",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("delete_dashboards",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_share_dashboard(p,_,h){const E=new EO;E.read(_),_.readMessageEnd(),this._handler.share_dashboard.length===6?Promise.resolve(this._handler.share_dashboard.bind(this._handler)(E.session,E.dashboard_id,E.groups,E.objects,E.permissions,E.grant_role)).then(g=>{const v=new gy({success:g});h.writeMessageBegin("share_dashboard",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new gy(g),h.writeMessageBegin("share_dashboard",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("share_dashboard",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.share_dashboard(E.session,E.dashboard_id,E.groups,E.objects,E.permissions,E.grant_role,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new gy(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("share_dashboard",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("share_dashboard",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_unshare_dashboard(p,_,h){const E=new vO;E.read(_),_.readMessageEnd(),this._handler.unshare_dashboard.length===5?Promise.resolve(this._handler.unshare_dashboard.bind(this._handler)(E.session,E.dashboard_id,E.groups,E.objects,E.permissions)).then(g=>{const v=new py({success:g});h.writeMessageBegin("unshare_dashboard",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new py(g),h.writeMessageBegin("unshare_dashboard",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("unshare_dashboard",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.unshare_dashboard(E.session,E.dashboard_id,E.groups,E.objects,E.permissions,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new py(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("unshare_dashboard",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("unshare_dashboard",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_unshare_dashboards(p,_,h){const E=new SO;E.read(_),_.readMessageEnd(),this._handler.unshare_dashboards.length===4?Promise.resolve(this._handler.unshare_dashboards.bind(this._handler)(E.session,E.dashboard_ids,E.groups,E.permissions)).then(g=>{const v=new yy({success:g});h.writeMessageBegin("unshare_dashboards",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new yy(g),h.writeMessageBegin("unshare_dashboards",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("unshare_dashboards",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.unshare_dashboards(E.session,E.dashboard_ids,E.groups,E.permissions,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new yy(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("unshare_dashboards",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("unshare_dashboards",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_get_dashboard_grantees(p,_,h){const E=new xO;E.read(_),_.readMessageEnd(),this._handler.get_dashboard_grantees.length===2?Promise.resolve(this._handler.get_dashboard_grantees.bind(this._handler)(E.session,E.dashboard_id)).then(g=>{const v=new my({success:g});h.writeMessageBegin("get_dashboard_grantees",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new my(g),h.writeMessageBegin("get_dashboard_grantees",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_dashboard_grantees",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_dashboard_grantees(E.session,E.dashboard_id,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new my(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("get_dashboard_grantees",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_dashboard_grantees",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_get_link_view(p,_,h){const E=new kO;E.read(_),_.readMessageEnd(),this._handler.get_link_view.length===2?Promise.resolve(this._handler.get_link_view.bind(this._handler)(E.session,E.link)).then(g=>{const v=new wy({success:g});h.writeMessageBegin("get_link_view",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new wy(g),h.writeMessageBegin("get_link_view",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_link_view",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_link_view(E.session,E.link,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new wy(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("get_link_view",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_link_view",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_create_link(p,_,h){const E=new BO;E.read(_),_.readMessageEnd(),this._handler.create_link.length===3?Promise.resolve(this._handler.create_link.bind(this._handler)(E.session,E.view_state,E.view_metadata)).then(g=>{const v=new by({success:g});h.writeMessageBegin("create_link",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new by(g),h.writeMessageBegin("create_link",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("create_link",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.create_link(E.session,E.view_state,E.view_metadata,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new by(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("create_link",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("create_link",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_load_table_binary(p,_,h){const E=new FO;E.read(_),_.readMessageEnd(),this._handler.load_table_binary.length===4?Promise.resolve(this._handler.load_table_binary.bind(this._handler)(E.session,E.table_name,E.rows,E.column_names)).then(g=>{const v=new Ty({success:g});h.writeMessageBegin("load_table_binary",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new Ty(g),h.writeMessageBegin("load_table_binary",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("load_table_binary",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.load_table_binary(E.session,E.table_name,E.rows,E.column_names,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new Ty(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("load_table_binary",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("load_table_binary",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_load_table_binary_columnar(p,_,h){const E=new IO;E.read(_),_.readMessageEnd(),this._handler.load_table_binary_columnar.length===4?Promise.resolve(this._handler.load_table_binary_columnar.bind(this._handler)(E.session,E.table_name,E.cols,E.column_names)).then(g=>{const v=new Ey({success:g});h.writeMessageBegin("load_table_binary_columnar",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new Ey(g),h.writeMessageBegin("load_table_binary_columnar",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("load_table_binary_columnar",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.load_table_binary_columnar(E.session,E.table_name,E.cols,E.column_names,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new Ey(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("load_table_binary_columnar",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("load_table_binary_columnar",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_load_table_binary_columnar_polys(p,_,h){const E=new MO;E.read(_),_.readMessageEnd(),this._handler.load_table_binary_columnar_polys.length===5?Promise.resolve(this._handler.load_table_binary_columnar_polys.bind(this._handler)(E.session,E.table_name,E.cols,E.column_names,E.assign_render_groups)).then(g=>{const v=new vy({success:g});h.writeMessageBegin("load_table_binary_columnar_polys",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new vy(g),h.writeMessageBegin("load_table_binary_columnar_polys",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("load_table_binary_columnar_polys",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.load_table_binary_columnar_polys(E.session,E.table_name,E.cols,E.column_names,E.assign_render_groups,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new vy(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("load_table_binary_columnar_polys",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("load_table_binary_columnar_polys",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_load_table_binary_arrow(p,_,h){const E=new AO;E.read(_),_.readMessageEnd(),this._handler.load_table_binary_arrow.length===4?Promise.resolve(this._handler.load_table_binary_arrow.bind(this._handler)(E.session,E.table_name,E.arrow_stream,E.use_column_names)).then(g=>{const v=new Sy({success:g});h.writeMessageBegin("load_table_binary_arrow",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new Sy(g),h.writeMessageBegin("load_table_binary_arrow",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("load_table_binary_arrow",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.load_table_binary_arrow(E.session,E.table_name,E.arrow_stream,E.use_column_names,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new Sy(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("load_table_binary_arrow",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("load_table_binary_arrow",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_load_table(p,_,h){const E=new OO;E.read(_),_.readMessageEnd(),this._handler.load_table.length===4?Promise.resolve(this._handler.load_table.bind(this._handler)(E.session,E.table_name,E.rows,E.column_names)).then(g=>{const v=new xy({success:g});h.writeMessageBegin("load_table",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new xy(g),h.writeMessageBegin("load_table",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("load_table",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.load_table(E.session,E.table_name,E.rows,E.column_names,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new xy(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("load_table",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("load_table",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_detect_column_types(p,_,h){const E=new NO;E.read(_),_.readMessageEnd(),this._handler.detect_column_types.length===3?Promise.resolve(this._handler.detect_column_types.bind(this._handler)(E.session,E.file_name,E.copy_params)).then(g=>{const v=new ky({success:g});h.writeMessageBegin("detect_column_types",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new ky(g),h.writeMessageBegin("detect_column_types",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("detect_column_types",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.detect_column_types(E.session,E.file_name,E.copy_params,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new ky(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("detect_column_types",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("detect_column_types",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_create_table(p,_,h){const E=new CO;E.read(_),_.readMessageEnd(),this._handler.create_table.length===4?Promise.resolve(this._handler.create_table.bind(this._handler)(E.session,E.table_name,E.row_desc,E.create_params)).then(g=>{const v=new By({success:g});h.writeMessageBegin("create_table",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new By(g),h.writeMessageBegin("create_table",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("create_table",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.create_table(E.session,E.table_name,E.row_desc,E.create_params,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new By(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("create_table",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("create_table",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_import_table(p,_,h){const E=new RO;E.read(_),_.readMessageEnd(),this._handler.import_table.length===4?Promise.resolve(this._handler.import_table.bind(this._handler)(E.session,E.table_name,E.file_name,E.copy_params)).then(g=>{const v=new Fy({success:g});h.writeMessageBegin("import_table",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new Fy(g),h.writeMessageBegin("import_table",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("import_table",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.import_table(E.session,E.table_name,E.file_name,E.copy_params,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new Fy(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("import_table",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("import_table",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_import_geo_table(p,_,h){const E=new LO;E.read(_),_.readMessageEnd(),this._handler.import_geo_table.length===6?Promise.resolve(this._handler.import_geo_table.bind(this._handler)(E.session,E.table_name,E.file_name,E.copy_params,E.row_desc,E.create_params)).then(g=>{const v=new Iy({success:g});h.writeMessageBegin("import_geo_table",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new Iy(g),h.writeMessageBegin("import_geo_table",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("import_geo_table",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.import_geo_table(E.session,E.table_name,E.file_name,E.copy_params,E.row_desc,E.create_params,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new Iy(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("import_geo_table",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("import_geo_table",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_import_table_status(p,_,h){const E=new PO;E.read(_),_.readMessageEnd(),this._handler.import_table_status.length===2?Promise.resolve(this._handler.import_table_status.bind(this._handler)(E.session,E.import_id)).then(g=>{const v=new My({success:g});h.writeMessageBegin("import_table_status",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new My(g),h.writeMessageBegin("import_table_status",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("import_table_status",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.import_table_status(E.session,E.import_id,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new My(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("import_table_status",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("import_table_status",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_get_first_geo_file_in_archive(p,_,h){const E=new DO;E.read(_),_.readMessageEnd(),this._handler.get_first_geo_file_in_archive.length===3?Promise.resolve(this._handler.get_first_geo_file_in_archive.bind(this._handler)(E.session,E.archive_path,E.copy_params)).then(g=>{const v=new Ay({success:g});h.writeMessageBegin("get_first_geo_file_in_archive",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new Ay(g),h.writeMessageBegin("get_first_geo_file_in_archive",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_first_geo_file_in_archive",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_first_geo_file_in_archive(E.session,E.archive_path,E.copy_params,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new Ay(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("get_first_geo_file_in_archive",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_first_geo_file_in_archive",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_get_all_files_in_archive(p,_,h){const E=new $O;E.read(_),_.readMessageEnd(),this._handler.get_all_files_in_archive.length===3?Promise.resolve(this._handler.get_all_files_in_archive.bind(this._handler)(E.session,E.archive_path,E.copy_params)).then(g=>{const v=new Oy({success:g});h.writeMessageBegin("get_all_files_in_archive",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new Oy(g),h.writeMessageBegin("get_all_files_in_archive",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_all_files_in_archive",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_all_files_in_archive(E.session,E.archive_path,E.copy_params,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new Oy(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("get_all_files_in_archive",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_all_files_in_archive",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_get_layers_in_geo_file(p,_,h){const E=new UO;E.read(_),_.readMessageEnd(),this._handler.get_layers_in_geo_file.length===3?Promise.resolve(this._handler.get_layers_in_geo_file.bind(this._handler)(E.session,E.file_name,E.copy_params)).then(g=>{const v=new Ny({success:g});h.writeMessageBegin("get_layers_in_geo_file",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new Ny(g),h.writeMessageBegin("get_layers_in_geo_file",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_layers_in_geo_file",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_layers_in_geo_file(E.session,E.file_name,E.copy_params,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new Ny(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("get_layers_in_geo_file",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_layers_in_geo_file",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_query_get_outer_fragment_count(p,_,h){const E=new zO;E.read(_),_.readMessageEnd(),this._handler.query_get_outer_fragment_count.length===2?Promise.resolve(this._handler.query_get_outer_fragment_count.bind(this._handler)(E.session,E.query)).then(g=>{const v=new Cy({success:g});h.writeMessageBegin("query_get_outer_fragment_count",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new Cy(g),h.writeMessageBegin("query_get_outer_fragment_count",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("query_get_outer_fragment_count",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.query_get_outer_fragment_count(E.session,E.query,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new Cy(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("query_get_outer_fragment_count",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("query_get_outer_fragment_count",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_check_table_consistency(p,_,h){const E=new jO;E.read(_),_.readMessageEnd(),this._handler.check_table_consistency.length===2?Promise.resolve(this._handler.check_table_consistency.bind(this._handler)(E.session,E.table_id)).then(g=>{const v=new Ry({success:g});h.writeMessageBegin("check_table_consistency",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new Ry(g),h.writeMessageBegin("check_table_consistency",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("check_table_consistency",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.check_table_consistency(E.session,E.table_id,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new Ry(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("check_table_consistency",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("check_table_consistency",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_start_query(p,_,h){const E=new qO;E.read(_),_.readMessageEnd(),this._handler.start_query.length===6?Promise.resolve(this._handler.start_query.bind(this._handler)(E.leaf_session,E.parent_session,E.query_ra,E.start_time_str,E.just_explain,E.outer_fragment_indices)).then(g=>{const v=new Ly({success:g});h.writeMessageBegin("start_query",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new Ly(g),h.writeMessageBegin("start_query",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("start_query",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.start_query(E.leaf_session,E.parent_session,E.query_ra,E.start_time_str,E.just_explain,E.outer_fragment_indices,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new Ly(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("start_query",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("start_query",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_execute_query_step(p,_,h){const E=new GO;E.read(_),_.readMessageEnd(),this._handler.execute_query_step.length===3?Promise.resolve(this._handler.execute_query_step.bind(this._handler)(E.pending_query,E.subquery_id,E.start_time_str)).then(g=>{const v=new Py({success:g});h.writeMessageBegin("execute_query_step",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new Py(g),h.writeMessageBegin("execute_query_step",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("execute_query_step",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.execute_query_step(E.pending_query,E.subquery_id,E.start_time_str,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new Py(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("execute_query_step",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("execute_query_step",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_broadcast_serialized_rows(p,_,h){const E=new HO;E.read(_),_.readMessageEnd(),this._handler.broadcast_serialized_rows.length===5?Promise.resolve(this._handler.broadcast_serialized_rows.bind(this._handler)(E.serialized_rows,E.row_desc,E.query_id,E.subquery_id,E.is_final_subquery_result)).then(g=>{const v=new Dy({success:g});h.writeMessageBegin("broadcast_serialized_rows",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new Dy(g),h.writeMessageBegin("broadcast_serialized_rows",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("broadcast_serialized_rows",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.broadcast_serialized_rows(E.serialized_rows,E.row_desc,E.query_id,E.subquery_id,E.is_final_subquery_result,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new Dy(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("broadcast_serialized_rows",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("broadcast_serialized_rows",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_start_render_query(p,_,h){const E=new WO;E.read(_),_.readMessageEnd(),this._handler.start_render_query.length===4?Promise.resolve(this._handler.start_render_query.bind(this._handler)(E.session,E.widget_id,E.node_idx,E.vega_json)).then(g=>{const v=new $y({success:g});h.writeMessageBegin("start_render_query",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new $y(g),h.writeMessageBegin("start_render_query",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("start_render_query",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.start_render_query(E.session,E.widget_id,E.node_idx,E.vega_json,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new $y(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("start_render_query",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("start_render_query",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_execute_next_render_step(p,_,h){const E=new VO;E.read(_),_.readMessageEnd(),this._handler.execute_next_render_step.length===2?Promise.resolve(this._handler.execute_next_render_step.bind(this._handler)(E.pending_render,E.merged_data)).then(g=>{const v=new Uy({success:g});h.writeMessageBegin("execute_next_render_step",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new Uy(g),h.writeMessageBegin("execute_next_render_step",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("execute_next_render_step",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.execute_next_render_step(E.pending_render,E.merged_data,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new Uy(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("execute_next_render_step",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("execute_next_render_step",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_insert_data(p,_,h){const E=new YO;E.read(_),_.readMessageEnd(),this._handler.insert_data.length===2?Promise.resolve(this._handler.insert_data.bind(this._handler)(E.session,E.insert_data)).then(g=>{const v=new zy({success:g});h.writeMessageBegin("insert_data",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new zy(g),h.writeMessageBegin("insert_data",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("insert_data",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.insert_data(E.session,E.insert_data,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new zy(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("insert_data",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("insert_data",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_insert_chunks(p,_,h){const E=new XO;E.read(_),_.readMessageEnd(),this._handler.insert_chunks.length===2?Promise.resolve(this._handler.insert_chunks.bind(this._handler)(E.session,E.insert_chunks)).then(g=>{const v=new jy({success:g});h.writeMessageBegin("insert_chunks",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new jy(g),h.writeMessageBegin("insert_chunks",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("insert_chunks",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.insert_chunks(E.session,E.insert_chunks,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new jy(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("insert_chunks",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("insert_chunks",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_checkpoint(p,_,h){const E=new KO;E.read(_),_.readMessageEnd(),this._handler.checkpoint.length===2?Promise.resolve(this._handler.checkpoint.bind(this._handler)(E.session,E.table_id)).then(g=>{const v=new qy({success:g});h.writeMessageBegin("checkpoint",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new qy(g),h.writeMessageBegin("checkpoint",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("checkpoint",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.checkpoint(E.session,E.table_id,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new qy(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("checkpoint",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("checkpoint",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_get_roles(p,_,h){const E=new JO;E.read(_),_.readMessageEnd(),this._handler.get_roles.length===1?Promise.resolve(this._handler.get_roles.bind(this._handler)(E.session)).then(g=>{const v=new Gy({success:g});h.writeMessageBegin("get_roles",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new Gy(g),h.writeMessageBegin("get_roles",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_roles",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_roles(E.session,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new Gy(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("get_roles",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_roles",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_get_db_objects_for_grantee(p,_,h){const E=new QO;E.read(_),_.readMessageEnd(),this._handler.get_db_objects_for_grantee.length===2?Promise.resolve(this._handler.get_db_objects_for_grantee.bind(this._handler)(E.session,E.roleName)).then(g=>{const v=new Hy({success:g});h.writeMessageBegin("get_db_objects_for_grantee",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new Hy(g),h.writeMessageBegin("get_db_objects_for_grantee",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_db_objects_for_grantee",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_db_objects_for_grantee(E.session,E.roleName,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new Hy(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("get_db_objects_for_grantee",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_db_objects_for_grantee",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_get_db_object_privs(p,_,h){const E=new ZO;E.read(_),_.readMessageEnd(),this._handler.get_db_object_privs.length===3?Promise.resolve(this._handler.get_db_object_privs.bind(this._handler)(E.session,E.objectName,E.type)).then(g=>{const v=new Wy({success:g});h.writeMessageBegin("get_db_object_privs",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new Wy(g),h.writeMessageBegin("get_db_object_privs",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_db_object_privs",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_db_object_privs(E.session,E.objectName,E.type,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new Wy(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("get_db_object_privs",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_db_object_privs",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_get_all_roles_for_user(p,_,h){const E=new eN;E.read(_),_.readMessageEnd(),this._handler.get_all_roles_for_user.length===2?Promise.resolve(this._handler.get_all_roles_for_user.bind(this._handler)(E.session,E.userName)).then(g=>{const v=new Vy({success:g});h.writeMessageBegin("get_all_roles_for_user",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new Vy(g),h.writeMessageBegin("get_all_roles_for_user",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_all_roles_for_user",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_all_roles_for_user(E.session,E.userName,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new Vy(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("get_all_roles_for_user",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_all_roles_for_user",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_get_all_effective_roles_for_user(p,_,h){const E=new tN;E.read(_),_.readMessageEnd(),this._handler.get_all_effective_roles_for_user.length===2?Promise.resolve(this._handler.get_all_effective_roles_for_user.bind(this._handler)(E.session,E.userName)).then(g=>{const v=new Yy({success:g});h.writeMessageBegin("get_all_effective_roles_for_user",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new Yy(g),h.writeMessageBegin("get_all_effective_roles_for_user",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_all_effective_roles_for_user",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_all_effective_roles_for_user(E.session,E.userName,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new Yy(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("get_all_effective_roles_for_user",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_all_effective_roles_for_user",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_has_role(p,_,h){const E=new nN;E.read(_),_.readMessageEnd(),this._handler.has_role.length===3?Promise.resolve(this._handler.has_role.bind(this._handler)(E.session,E.granteeName,E.roleName)).then(g=>{const v=new Xy({success:g});h.writeMessageBegin("has_role",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new Xy(g),h.writeMessageBegin("has_role",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("has_role",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.has_role(E.session,E.granteeName,E.roleName,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new Xy(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("has_role",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("has_role",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_has_object_privilege(p,_,h){const E=new iN;E.read(_),_.readMessageEnd(),this._handler.has_object_privilege.length===5?Promise.resolve(this._handler.has_object_privilege.bind(this._handler)(E.session,E.granteeName,E.ObjectName,E.objectType,E.permissions)).then(g=>{const v=new Ky({success:g});h.writeMessageBegin("has_object_privilege",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new Ky(g),h.writeMessageBegin("has_object_privilege",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("has_object_privilege",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.has_object_privilege(E.session,E.granteeName,E.ObjectName,E.objectType,E.permissions,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new Ky(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("has_object_privilege",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("has_object_privilege",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_set_license_key(p,_,h){const E=new sN;E.read(_),_.readMessageEnd(),this._handler.set_license_key.length===3?Promise.resolve(this._handler.set_license_key.bind(this._handler)(E.session,E.key,E.nonce)).then(g=>{const v=new Jy({success:g});h.writeMessageBegin("set_license_key",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new Jy(g),h.writeMessageBegin("set_license_key",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("set_license_key",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.set_license_key(E.session,E.key,E.nonce,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new Jy(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("set_license_key",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("set_license_key",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_get_license_claims(p,_,h){const E=new rN;E.read(_),_.readMessageEnd(),this._handler.get_license_claims.length===2?Promise.resolve(this._handler.get_license_claims.bind(this._handler)(E.session,E.nonce)).then(g=>{const v=new Qy({success:g});h.writeMessageBegin("get_license_claims",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new Qy(g),h.writeMessageBegin("get_license_claims",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_license_claims",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_license_claims(E.session,E.nonce,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new Qy(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("get_license_claims",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_license_claims",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_get_device_parameters(p,_,h){const E=new aN;E.read(_),_.readMessageEnd(),this._handler.get_device_parameters.length===1?Promise.resolve(this._handler.get_device_parameters.bind(this._handler)(E.session)).then(g=>{const v=new Zy({success:g});h.writeMessageBegin("get_device_parameters",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new Zy(g),h.writeMessageBegin("get_device_parameters",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_device_parameters",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_device_parameters(E.session,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new Zy(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("get_device_parameters",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_device_parameters",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_register_runtime_extension_functions(p,_,h){const E=new oN;E.read(_),_.readMessageEnd(),this._handler.register_runtime_extension_functions.length===4?Promise.resolve(this._handler.register_runtime_extension_functions.bind(this._handler)(E.session,E.udfs,E.udtfs,E.device_ir_map)).then(g=>{const v=new em({success:g});h.writeMessageBegin("register_runtime_extension_functions",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new em(g),h.writeMessageBegin("register_runtime_extension_functions",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("register_runtime_extension_functions",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.register_runtime_extension_functions(E.session,E.udfs,E.udtfs,E.device_ir_map,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new em(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("register_runtime_extension_functions",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("register_runtime_extension_functions",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_get_table_function_names(p,_,h){const E=new lN;E.read(_),_.readMessageEnd(),this._handler.get_table_function_names.length===1?Promise.resolve(this._handler.get_table_function_names.bind(this._handler)(E.session)).then(g=>{const v=new tm({success:g});h.writeMessageBegin("get_table_function_names",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new tm(g),h.writeMessageBegin("get_table_function_names",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_table_function_names",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_table_function_names(E.session,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new tm(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("get_table_function_names",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_table_function_names",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_get_runtime_table_function_names(p,_,h){const E=new cN;E.read(_),_.readMessageEnd(),this._handler.get_runtime_table_function_names.length===1?Promise.resolve(this._handler.get_runtime_table_function_names.bind(this._handler)(E.session)).then(g=>{const v=new nm({success:g});h.writeMessageBegin("get_runtime_table_function_names",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new nm(g),h.writeMessageBegin("get_runtime_table_function_names",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_runtime_table_function_names",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_runtime_table_function_names(E.session,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new nm(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("get_runtime_table_function_names",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_runtime_table_function_names",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}process_get_table_function_details(p,_,h){const E=new dN;E.read(_),_.readMessageEnd(),this._handler.get_table_function_details.length===2?Promise.resolve(this._handler.get_table_function_details.bind(this._handler)(E.session,E.udtf_names)).then(g=>{const v=new im({success:g});h.writeMessageBegin("get_table_function_details",a.MessageType.REPLY,p),v.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let v;g instanceof o.TDBException?(v=new im(g),h.writeMessageBegin("get_table_function_details",a.MessageType.REPLY,p)):(v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_table_function_details",a.MessageType.EXCEPTION,p)),v.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_table_function_details(E.session,E.udtf_names,(g,v)=>{let F;g===null||typeof g>"u"||g instanceof o.TDBException?(F=new im(g!==null||typeof g>"u"?g:{success:v}),h.writeMessageBegin("get_table_function_details",a.MessageType.REPLY,p)):(F=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_table_function_details",a.MessageType.EXCEPTION,p)),F.write(h),h.writeMessageEnd(),h.flush()})}}},2818:(c,d,f)=>{const a=f(9262).Thrift;f(135);const m=c.exports={};m.TDeviceType={CPU:0,GPU:1},m.TDatumType={SMALLINT:0,INT:1,BIGINT:2,FLOAT:3,DECIMAL:4,DOUBLE:5,STR:6,TIME:7,TIMESTAMP:8,DATE:9,BOOL:10,INTERVAL_DAY_TIME:11,INTERVAL_YEAR_MONTH:12,POINT:13,LINESTRING:14,POLYGON:15,MULTIPOLYGON:16,TINYINT:17,GEOMETRY:18,GEOGRAPHY:19},m.TEncodingType={NONE:0,FIXED:1,RL:2,DIFF:3,DICT:4,SPARSE:5,GEOINT:6,DATE_IN_DAYS:7},c.exports.TTypeInfo=class{constructor(w){this.type=null,this.encoding=null,this.nullable=null,this.is_array=null,this.precision=null,this.scale=null,this.comp_param=null,this.size=-1,w&&(w.type!==void 0&&w.type!==null&&(this.type=w.type),w.encoding!==void 0&&w.encoding!==null&&(this.encoding=w.encoding),w.nullable!==void 0&&w.nullable!==null&&(this.nullable=w.nullable),w.is_array!==void 0&&w.is_array!==null&&(this.is_array=w.is_array),w.precision!==void 0&&w.precision!==null&&(this.precision=w.precision),w.scale!==void 0&&w.scale!==null&&(this.scale=w.scale),w.comp_param!==void 0&&w.comp_param!==null&&(this.comp_param=w.comp_param),w.size!==void 0&&w.size!==null&&(this.size=w.size))}read(w){for(w.readStructBegin();;){const y=w.readFieldBegin(),o=y.ftype,T=y.fid;if(o==a.Type.STOP)break;switch(T){case 1:o==a.Type.I32?this.type=w.readI32():w.skip(o);break;case 4:o==a.Type.I32?this.encoding=w.readI32():w.skip(o);break;case 2:o==a.Type.BOOL?this.nullable=w.readBool():w.skip(o);break;case 3:o==a.Type.BOOL?this.is_array=w.readBool():w.skip(o);break;case 5:o==a.Type.I32?this.precision=w.readI32():w.skip(o);break;case 6:o==a.Type.I32?this.scale=w.readI32():w.skip(o);break;case 7:o==a.Type.I32?this.comp_param=w.readI32():w.skip(o);break;case 8:o==a.Type.I32?this.size=w.readI32():w.skip(o);break;default:w.skip(o)}w.readFieldEnd()}w.readStructEnd()}write(w){w.writeStructBegin("TTypeInfo"),this.type!==null&&this.type!==void 0&&(w.writeFieldBegin("type",a.Type.I32,1),w.writeI32(this.type),w.writeFieldEnd()),this.encoding!==null&&this.encoding!==void 0&&(w.writeFieldBegin("encoding",a.Type.I32,4),w.writeI32(this.encoding),w.writeFieldEnd()),this.nullable!==null&&this.nullable!==void 0&&(w.writeFieldBegin("nullable",a.Type.BOOL,2),w.writeBool(this.nullable),w.writeFieldEnd()),this.is_array!==null&&this.is_array!==void 0&&(w.writeFieldBegin("is_array",a.Type.BOOL,3),w.writeBool(this.is_array),w.writeFieldEnd()),this.precision!==null&&this.precision!==void 0&&(w.writeFieldBegin("precision",a.Type.I32,5),w.writeI32(this.precision),w.writeFieldEnd()),this.scale!==null&&this.scale!==void 0&&(w.writeFieldBegin("scale",a.Type.I32,6),w.writeI32(this.scale),w.writeFieldEnd()),this.comp_param!==null&&this.comp_param!==void 0&&(w.writeFieldBegin("comp_param",a.Type.I32,7),w.writeI32(this.comp_param),w.writeFieldEnd()),this.size!==null&&this.size!==void 0&&(w.writeFieldBegin("size",a.Type.I32,8),w.writeI32(this.size),w.writeFieldEnd()),w.writeFieldStop(),w.writeStructEnd()}}},4494:(c,d,f)=>{const a=f(9262).Thrift;f(135);const m=c.exports={};m.TCompletionHintType={COLUMN:0,TABLE:1,VIEW:2,SCHEMA:3,CATALOG:4,REPOSITORY:5,FUNCTION:6,KEYWORD:7},c.exports.TCompletionHint=class{constructor(w){this.type=null,this.hints=null,this.replaced=null,w&&(w.type!==void 0&&w.type!==null&&(this.type=w.type),w.hints!==void 0&&w.hints!==null&&(this.hints=a.copyList(w.hints,[null])),w.replaced!==void 0&&w.replaced!==null&&(this.replaced=w.replaced))}read(w){for(w.readStructBegin();;){const y=w.readFieldBegin(),o=y.ftype,T=y.fid;if(o==a.Type.STOP)break;switch(T){case 1:o==a.Type.I32?this.type=w.readI32():w.skip(o);break;case 2:if(o==a.Type.LIST){this.hints=[];const S=w.readListBegin().size||0;for(let x=0;x<S;++x){let k=null;k=w.readString(),this.hints.push(k)}w.readListEnd()}else w.skip(o);break;case 3:o==a.Type.STRING?this.replaced=w.readString():w.skip(o);break;default:w.skip(o)}w.readFieldEnd()}w.readStructEnd()}write(w){if(w.writeStructBegin("TCompletionHint"),this.type!==null&&this.type!==void 0&&(w.writeFieldBegin("type",a.Type.I32,1),w.writeI32(this.type),w.writeFieldEnd()),this.hints!==null&&this.hints!==void 0){w.writeFieldBegin("hints",a.Type.LIST,2),w.writeListBegin(a.Type.STRING,this.hints.length);for(let y in this.hints)this.hints.hasOwnProperty(y)&&(y=this.hints[y],w.writeString(y));w.writeListEnd(),w.writeFieldEnd()}this.replaced!==null&&this.replaced!==void 0&&(w.writeFieldBegin("replaced",a.Type.STRING,3),w.writeString(this.replaced),w.writeFieldEnd()),w.writeFieldStop(),w.writeStructEnd()}}},1396:(c,d,f)=>{const a=f(9262).Thrift;f(135);const m=c.exports={};m.TExtArgumentType={Int8:0,Int16:1,Int32:2,Int64:3,Float:4,Double:5,Void:6,PInt8:7,PInt16:8,PInt32:9,PInt64:10,PFloat:11,PDouble:12,PBool:13,Bool:14,ArrayInt8:15,ArrayInt16:16,ArrayInt32:17,ArrayInt64:18,ArrayFloat:19,ArrayDouble:20,ArrayBool:21,GeoPoint:22,GeoLineString:23,Cursor:24,GeoPolygon:25,GeoMultiPolygon:26,ColumnInt8:27,ColumnInt16:28,ColumnInt32:29,ColumnInt64:30,ColumnFloat:31,ColumnDouble:32,ColumnBool:33,TextEncodingNone:34,TextEncodingDict:35,ColumnListInt8:36,ColumnListInt16:37,ColumnListInt32:38,ColumnListInt64:39,ColumnListFloat:40,ColumnListDouble:41,ColumnListBool:42,ColumnTextEncodingDict:43,ColumnListTextEncodingDict:44,ColumnTimestamp:45,Timestamp:46},m.TOutputBufferSizeType={kConstant:0,kUserSpecifiedConstantParameter:1,kUserSpecifiedRowMultiplier:2,kTableFunctionSpecifiedParameter:3,kPreFlightParameter:4},c.exports.TUserDefinedFunction=class{constructor(w){this.name=null,this.argTypes=null,this.retType=null,w&&(w.name!==void 0&&w.name!==null&&(this.name=w.name),w.argTypes!==void 0&&w.argTypes!==null&&(this.argTypes=a.copyList(w.argTypes,[null])),w.retType!==void 0&&w.retType!==null&&(this.retType=w.retType))}read(w){for(w.readStructBegin();;){const y=w.readFieldBegin(),o=y.ftype,T=y.fid;if(o==a.Type.STOP)break;switch(T){case 1:o==a.Type.STRING?this.name=w.readString():w.skip(o);break;case 2:if(o==a.Type.LIST){this.argTypes=[];const S=w.readListBegin().size||0;for(let x=0;x<S;++x){let k=null;k=w.readI32(),this.argTypes.push(k)}w.readListEnd()}else w.skip(o);break;case 3:o==a.Type.I32?this.retType=w.readI32():w.skip(o);break;default:w.skip(o)}w.readFieldEnd()}w.readStructEnd()}write(w){if(w.writeStructBegin("TUserDefinedFunction"),this.name!==null&&this.name!==void 0&&(w.writeFieldBegin("name",a.Type.STRING,1),w.writeString(this.name),w.writeFieldEnd()),this.argTypes!==null&&this.argTypes!==void 0){w.writeFieldBegin("argTypes",a.Type.LIST,2),w.writeListBegin(a.Type.I32,this.argTypes.length);for(let y in this.argTypes)this.argTypes.hasOwnProperty(y)&&(y=this.argTypes[y],w.writeI32(y));w.writeListEnd(),w.writeFieldEnd()}this.retType!==null&&this.retType!==void 0&&(w.writeFieldBegin("retType",a.Type.I32,3),w.writeI32(this.retType),w.writeFieldEnd()),w.writeFieldStop(),w.writeStructEnd()}},c.exports.TUserDefinedTableFunction=class{constructor(w){this.name=null,this.sizerType=null,this.sizerArgPos=null,this.inputArgTypes=null,this.outputArgTypes=null,this.sqlArgTypes=null,this.annotations=null,w&&(w.name!==void 0&&w.name!==null&&(this.name=w.name),w.sizerType!==void 0&&w.sizerType!==null&&(this.sizerType=w.sizerType),w.sizerArgPos!==void 0&&w.sizerArgPos!==null&&(this.sizerArgPos=w.sizerArgPos),w.inputArgTypes!==void 0&&w.inputArgTypes!==null&&(this.inputArgTypes=a.copyList(w.inputArgTypes,[null])),w.outputArgTypes!==void 0&&w.outputArgTypes!==null&&(this.outputArgTypes=a.copyList(w.outputArgTypes,[null])),w.sqlArgTypes!==void 0&&w.sqlArgTypes!==null&&(this.sqlArgTypes=a.copyList(w.sqlArgTypes,[null])),w.annotations!==void 0&&w.annotations!==null&&(this.annotations=a.copyList(w.annotations,[a.copyMap,null])))}read(w){for(w.readStructBegin();;){const y=w.readFieldBegin(),o=y.ftype,T=y.fid;if(o==a.Type.STOP)break;switch(T){case 1:o==a.Type.STRING?this.name=w.readString():w.skip(o);break;case 2:o==a.Type.I32?this.sizerType=w.readI32():w.skip(o);break;case 3:o==a.Type.I32?this.sizerArgPos=w.readI32():w.skip(o);break;case 4:if(o==a.Type.LIST){this.inputArgTypes=[];const S=w.readListBegin().size||0;for(let x=0;x<S;++x){let k=null;k=w.readI32(),this.inputArgTypes.push(k)}w.readListEnd()}else w.skip(o);break;case 5:if(o==a.Type.LIST){this.outputArgTypes=[];const S=w.readListBegin().size||0;for(let x=0;x<S;++x){let k=null;k=w.readI32(),this.outputArgTypes.push(k)}w.readListEnd()}else w.skip(o);break;case 6:if(o==a.Type.LIST){this.sqlArgTypes=[];const S=w.readListBegin().size||0;for(let x=0;x<S;++x){let k=null;k=w.readI32(),this.sqlArgTypes.push(k)}w.readListEnd()}else w.skip(o);break;case 7:if(o==a.Type.LIST){this.annotations=[];const S=w.readListBegin().size||0;for(let x=0;x<S;++x){let k=null;k={};const B=w.readMapBegin().size||0;for(let O=0;O<B;++O){let A=null,R=null;A=w.readString(),R=w.readString(),k[A]=R}w.readMapEnd(),this.annotations.push(k)}w.readListEnd()}else w.skip(o);break;default:w.skip(o)}w.readFieldEnd()}w.readStructEnd()}write(w){if(w.writeStructBegin("TUserDefinedTableFunction"),this.name!==null&&this.name!==void 0&&(w.writeFieldBegin("name",a.Type.STRING,1),w.writeString(this.name),w.writeFieldEnd()),this.sizerType!==null&&this.sizerType!==void 0&&(w.writeFieldBegin("sizerType",a.Type.I32,2),w.writeI32(this.sizerType),w.writeFieldEnd()),this.sizerArgPos!==null&&this.sizerArgPos!==void 0&&(w.writeFieldBegin("sizerArgPos",a.Type.I32,3),w.writeI32(this.sizerArgPos),w.writeFieldEnd()),this.inputArgTypes!==null&&this.inputArgTypes!==void 0){w.writeFieldBegin("inputArgTypes",a.Type.LIST,4),w.writeListBegin(a.Type.I32,this.inputArgTypes.length);for(let y in this.inputArgTypes)this.inputArgTypes.hasOwnProperty(y)&&(y=this.inputArgTypes[y],w.writeI32(y));w.writeListEnd(),w.writeFieldEnd()}if(this.outputArgTypes!==null&&this.outputArgTypes!==void 0){w.writeFieldBegin("outputArgTypes",a.Type.LIST,5),w.writeListBegin(a.Type.I32,this.outputArgTypes.length);for(let y in this.outputArgTypes)this.outputArgTypes.hasOwnProperty(y)&&(y=this.outputArgTypes[y],w.writeI32(y));w.writeListEnd(),w.writeFieldEnd()}if(this.sqlArgTypes!==null&&this.sqlArgTypes!==void 0){w.writeFieldBegin("sqlArgTypes",a.Type.LIST,6),w.writeListBegin(a.Type.I32,this.sqlArgTypes.length);for(let y in this.sqlArgTypes)this.sqlArgTypes.hasOwnProperty(y)&&(y=this.sqlArgTypes[y],w.writeI32(y));w.writeListEnd(),w.writeFieldEnd()}if(this.annotations!==null&&this.annotations!==void 0){w.writeFieldBegin("annotations",a.Type.LIST,7),w.writeListBegin(a.Type.MAP,this.annotations.length);for(let y in this.annotations)if(this.annotations.hasOwnProperty(y)){y=this.annotations[y],w.writeMapBegin(a.Type.STRING,a.Type.STRING,a.objectLength(y));for(let o in y)if(y.hasOwnProperty(o)){let T=y[o];w.writeString(o),w.writeString(T)}w.writeMapEnd()}w.writeListEnd(),w.writeFieldEnd()}w.writeFieldStop(),w.writeStructEnd()}}},2607:(c,d,f)=>{const a=f(9262).Thrift;f(135);const m=f(2818);f(4494);const w=f(3962);f(1396);const y=c.exports={};y.TExecuteMode={GPU:1,CPU:2},y.TSourceType={DELIMITED_FILE:0,GEO_FILE:1,PARQUET_FILE:2,RASTER_FILE:3,ODBC:4},y.TPartitionDetail={DEFAULT:0,REPLICATED:1,SHARDED:2,OTHER:3},y.TGeoFileLayerContents={EMPTY:0,GEO:1,NON_GEO:2,UNSUPPORTED_GEO:3},y.TImportHeaderRow={AUTODETECT:0,NO_HEADER:1,HAS_HEADER:2},y.TRole={SERVER:0,AGGREGATOR:1,LEAF:2,STRING_DICTIONARY:3},y.TTableType={DEFAULT:0,TEMPORARY:1,FOREIGN:2,VIEW:3},y.TTableRefreshUpdateType={ALL:0,APPEND:1},y.TTableRefreshTimingType={MANUAL:0,SCHEDULED:1},y.TTableRefreshIntervalType={NONE:0,HOUR:1,DAY:2},y.TMergeType={UNION:0,REDUCE:1},y.TRasterPointType={NONE:0,AUTO:1,SMALLINT:2,INT:3,FLOAT:4,DOUBLE:5,POINT:6},y.TRasterPointTransform={NONE:0,AUTO:1,FILE:2,WORLD:3},y.TQueryType={UNKNOWN:0,READ:1,WRITE:2,SCHEMA_READ:3,SCHEMA_WRITE:4},y.TArrowTransport={SHARED_MEMORY:0,WIRE:1},y.TExpressionRangeType={INVALID:0,INTEGER:1,FLOAT:2,DOUBLE:3},y.TDBObjectType={AbstractDBObjectType:0,DatabaseDBObjectType:1,TableDBObjectType:2,DashboardDBObjectType:3,ViewDBObjectType:4,ServerDBObjectType:5},y.TDataSourceType={TABLE:0},c.exports.TDatumVal=class{constructor(o){this.int_val=null,this.real_val=null,this.str_val=null,this.arr_val=null,o&&(o.int_val!==void 0&&o.int_val!==null&&(this.int_val=o.int_val),o.real_val!==void 0&&o.real_val!==null&&(this.real_val=o.real_val),o.str_val!==void 0&&o.str_val!==null&&(this.str_val=o.str_val),o.arr_val!==void 0&&o.arr_val!==null&&(this.arr_val=a.copyList(o.arr_val,[null])))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I64?this.int_val=o.readI64():o.skip(b);break;case 2:b==a.Type.DOUBLE?this.real_val=o.readDouble():o.skip(b);break;case 3:b==a.Type.STRING?this.str_val=o.readString():o.skip(b);break;case 4:if(b==a.Type.LIST){this.arr_val=[];const k=o.readListBegin().size||0;for(let I=0;I<k;++I){let B=null;B=new y.TDatum,B.read(o),this.arr_val.push(B)}o.readListEnd()}else o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("TDatumVal"),this.int_val!==null&&this.int_val!==void 0&&(o.writeFieldBegin("int_val",a.Type.I64,1),o.writeI64(this.int_val),o.writeFieldEnd()),this.real_val!==null&&this.real_val!==void 0&&(o.writeFieldBegin("real_val",a.Type.DOUBLE,2),o.writeDouble(this.real_val),o.writeFieldEnd()),this.str_val!==null&&this.str_val!==void 0&&(o.writeFieldBegin("str_val",a.Type.STRING,3),o.writeString(this.str_val),o.writeFieldEnd()),this.arr_val!==null&&this.arr_val!==void 0){o.writeFieldBegin("arr_val",a.Type.LIST,4),o.writeListBegin(a.Type.STRUCT,this.arr_val.length);for(let T in this.arr_val)this.arr_val.hasOwnProperty(T)&&(T=this.arr_val[T],T.write(o));o.writeListEnd(),o.writeFieldEnd()}o.writeFieldStop(),o.writeStructEnd()}},c.exports.TDatum=class{constructor(o){this.val=null,this.is_null=null,o&&(o.val!==void 0&&o.val!==null&&(this.val=new y.TDatumVal(o.val)),o.is_null!==void 0&&o.is_null!==null&&(this.is_null=o.is_null))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRUCT?(this.val=new y.TDatumVal,this.val.read(o)):o.skip(b);break;case 2:b==a.Type.BOOL?this.is_null=o.readBool():o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("TDatum"),this.val!==null&&this.val!==void 0&&(o.writeFieldBegin("val",a.Type.STRUCT,1),this.val.write(o),o.writeFieldEnd()),this.is_null!==null&&this.is_null!==void 0&&(o.writeFieldBegin("is_null",a.Type.BOOL,2),o.writeBool(this.is_null),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TStringValue=class{constructor(o){this.str_val=null,this.is_null=null,o&&(o.str_val!==void 0&&o.str_val!==null&&(this.str_val=o.str_val),o.is_null!==void 0&&o.is_null!==null&&(this.is_null=o.is_null))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.str_val=o.readString():o.skip(b);break;case 2:b==a.Type.BOOL?this.is_null=o.readBool():o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("TStringValue"),this.str_val!==null&&this.str_val!==void 0&&(o.writeFieldBegin("str_val",a.Type.STRING,1),o.writeString(this.str_val),o.writeFieldEnd()),this.is_null!==null&&this.is_null!==void 0&&(o.writeFieldBegin("is_null",a.Type.BOOL,2),o.writeBool(this.is_null),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TColumnType=class{constructor(o){this.col_name=null,this.col_type=null,this.is_reserved_keyword=null,this.src_name=null,this.is_system=null,this.is_physical=null,this.col_id=null,this.default_value=null,o&&(o.col_name!==void 0&&o.col_name!==null&&(this.col_name=o.col_name),o.col_type!==void 0&&o.col_type!==null&&(this.col_type=new m.TTypeInfo(o.col_type)),o.is_reserved_keyword!==void 0&&o.is_reserved_keyword!==null&&(this.is_reserved_keyword=o.is_reserved_keyword),o.src_name!==void 0&&o.src_name!==null&&(this.src_name=o.src_name),o.is_system!==void 0&&o.is_system!==null&&(this.is_system=o.is_system),o.is_physical!==void 0&&o.is_physical!==null&&(this.is_physical=o.is_physical),o.col_id!==void 0&&o.col_id!==null&&(this.col_id=o.col_id),o.default_value!==void 0&&o.default_value!==null&&(this.default_value=o.default_value))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.col_name=o.readString():o.skip(b);break;case 2:b==a.Type.STRUCT?(this.col_type=new m.TTypeInfo,this.col_type.read(o)):o.skip(b);break;case 3:b==a.Type.BOOL?this.is_reserved_keyword=o.readBool():o.skip(b);break;case 4:b==a.Type.STRING?this.src_name=o.readString():o.skip(b);break;case 5:b==a.Type.BOOL?this.is_system=o.readBool():o.skip(b);break;case 6:b==a.Type.BOOL?this.is_physical=o.readBool():o.skip(b);break;case 7:b==a.Type.I64?this.col_id=o.readI64():o.skip(b);break;case 8:b==a.Type.STRING?this.default_value=o.readString():o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("TColumnType"),this.col_name!==null&&this.col_name!==void 0&&(o.writeFieldBegin("col_name",a.Type.STRING,1),o.writeString(this.col_name),o.writeFieldEnd()),this.col_type!==null&&this.col_type!==void 0&&(o.writeFieldBegin("col_type",a.Type.STRUCT,2),this.col_type.write(o),o.writeFieldEnd()),this.is_reserved_keyword!==null&&this.is_reserved_keyword!==void 0&&(o.writeFieldBegin("is_reserved_keyword",a.Type.BOOL,3),o.writeBool(this.is_reserved_keyword),o.writeFieldEnd()),this.src_name!==null&&this.src_name!==void 0&&(o.writeFieldBegin("src_name",a.Type.STRING,4),o.writeString(this.src_name),o.writeFieldEnd()),this.is_system!==null&&this.is_system!==void 0&&(o.writeFieldBegin("is_system",a.Type.BOOL,5),o.writeBool(this.is_system),o.writeFieldEnd()),this.is_physical!==null&&this.is_physical!==void 0&&(o.writeFieldBegin("is_physical",a.Type.BOOL,6),o.writeBool(this.is_physical),o.writeFieldEnd()),this.col_id!==null&&this.col_id!==void 0&&(o.writeFieldBegin("col_id",a.Type.I64,7),o.writeI64(this.col_id),o.writeFieldEnd()),this.default_value!==null&&this.default_value!==void 0&&(o.writeFieldBegin("default_value",a.Type.STRING,8),o.writeString(this.default_value),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TRow=class{constructor(o){this.cols=null,o&&o.cols!==void 0&&o.cols!==null&&(this.cols=a.copyList(o.cols,[y.TDatum]))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:if(b==a.Type.LIST){this.cols=[];const k=o.readListBegin().size||0;for(let I=0;I<k;++I){let B=null;B=new y.TDatum,B.read(o),this.cols.push(B)}o.readListEnd()}else o.skip(b);break;case 0:o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("TRow"),this.cols!==null&&this.cols!==void 0){o.writeFieldBegin("cols",a.Type.LIST,1),o.writeListBegin(a.Type.STRUCT,this.cols.length);for(let T in this.cols)this.cols.hasOwnProperty(T)&&(T=this.cols[T],T.write(o));o.writeListEnd(),o.writeFieldEnd()}o.writeFieldStop(),o.writeStructEnd()}},c.exports.TColumnData=class{constructor(o){this.int_col=null,this.real_col=null,this.str_col=null,this.arr_col=null,o&&(o.int_col!==void 0&&o.int_col!==null&&(this.int_col=a.copyList(o.int_col,[null])),o.real_col!==void 0&&o.real_col!==null&&(this.real_col=a.copyList(o.real_col,[null])),o.str_col!==void 0&&o.str_col!==null&&(this.str_col=a.copyList(o.str_col,[null])),o.arr_col!==void 0&&o.arr_col!==null&&(this.arr_col=a.copyList(o.arr_col,[null])))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:if(b==a.Type.LIST){this.int_col=[];const k=o.readListBegin().size||0;for(let I=0;I<k;++I){let B=null;B=o.readI64(),this.int_col.push(B)}o.readListEnd()}else o.skip(b);break;case 2:if(b==a.Type.LIST){this.real_col=[];const k=o.readListBegin().size||0;for(let I=0;I<k;++I){let B=null;B=o.readDouble(),this.real_col.push(B)}o.readListEnd()}else o.skip(b);break;case 3:if(b==a.Type.LIST){this.str_col=[];const k=o.readListBegin().size||0;for(let I=0;I<k;++I){let B=null;B=o.readString(),this.str_col.push(B)}o.readListEnd()}else o.skip(b);break;case 4:if(b==a.Type.LIST){this.arr_col=[];const k=o.readListBegin().size||0;for(let I=0;I<k;++I){let B=null;B=new y.TColumn,B.read(o),this.arr_col.push(B)}o.readListEnd()}else o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("TColumnData"),this.int_col!==null&&this.int_col!==void 0){o.writeFieldBegin("int_col",a.Type.LIST,1),o.writeListBegin(a.Type.I64,this.int_col.length);for(let T in this.int_col)this.int_col.hasOwnProperty(T)&&(T=this.int_col[T],o.writeI64(T));o.writeListEnd(),o.writeFieldEnd()}if(this.real_col!==null&&this.real_col!==void 0){o.writeFieldBegin("real_col",a.Type.LIST,2),o.writeListBegin(a.Type.DOUBLE,this.real_col.length);for(let T in this.real_col)this.real_col.hasOwnProperty(T)&&(T=this.real_col[T],o.writeDouble(T));o.writeListEnd(),o.writeFieldEnd()}if(this.str_col!==null&&this.str_col!==void 0){o.writeFieldBegin("str_col",a.Type.LIST,3),o.writeListBegin(a.Type.STRING,this.str_col.length);for(let T in this.str_col)this.str_col.hasOwnProperty(T)&&(T=this.str_col[T],o.writeString(T));o.writeListEnd(),o.writeFieldEnd()}if(this.arr_col!==null&&this.arr_col!==void 0){o.writeFieldBegin("arr_col",a.Type.LIST,4),o.writeListBegin(a.Type.STRUCT,this.arr_col.length);for(let T in this.arr_col)this.arr_col.hasOwnProperty(T)&&(T=this.arr_col[T],T.write(o));o.writeListEnd(),o.writeFieldEnd()}o.writeFieldStop(),o.writeStructEnd()}},c.exports.TColumn=class{constructor(o){this.data=null,this.nulls=null,o&&(o.data!==void 0&&o.data!==null&&(this.data=new y.TColumnData(o.data)),o.nulls!==void 0&&o.nulls!==null&&(this.nulls=a.copyList(o.nulls,[null])))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRUCT?(this.data=new y.TColumnData,this.data.read(o)):o.skip(b);break;case 2:if(b==a.Type.LIST){this.nulls=[];const k=o.readListBegin().size||0;for(let I=0;I<k;++I){let B=null;B=o.readBool(),this.nulls.push(B)}o.readListEnd()}else o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("TColumn"),this.data!==null&&this.data!==void 0&&(o.writeFieldBegin("data",a.Type.STRUCT,1),this.data.write(o),o.writeFieldEnd()),this.nulls!==null&&this.nulls!==void 0){o.writeFieldBegin("nulls",a.Type.LIST,2),o.writeListBegin(a.Type.BOOL,this.nulls.length);for(let T in this.nulls)this.nulls.hasOwnProperty(T)&&(T=this.nulls[T],o.writeBool(T));o.writeListEnd(),o.writeFieldEnd()}o.writeFieldStop(),o.writeStructEnd()}},c.exports.TStringRow=class{constructor(o){this.cols=null,o&&o.cols!==void 0&&o.cols!==null&&(this.cols=a.copyList(o.cols,[y.TStringValue]))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:if(b==a.Type.LIST){this.cols=[];const k=o.readListBegin().size||0;for(let I=0;I<k;++I){let B=null;B=new y.TStringValue,B.read(o),this.cols.push(B)}o.readListEnd()}else o.skip(b);break;case 0:o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("TStringRow"),this.cols!==null&&this.cols!==void 0){o.writeFieldBegin("cols",a.Type.LIST,1),o.writeListBegin(a.Type.STRUCT,this.cols.length);for(let T in this.cols)this.cols.hasOwnProperty(T)&&(T=this.cols[T],T.write(o));o.writeListEnd(),o.writeFieldEnd()}o.writeFieldStop(),o.writeStructEnd()}},c.exports.TKrb5Session=class{constructor(o){this.sessionId=null,this.krbToken=null,o&&(o.sessionId!==void 0&&o.sessionId!==null&&(this.sessionId=o.sessionId),o.krbToken!==void 0&&o.krbToken!==null&&(this.krbToken=o.krbToken))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.sessionId=o.readString():o.skip(b);break;case 2:b==a.Type.STRING?this.krbToken=o.readString():o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("TKrb5Session"),this.sessionId!==null&&this.sessionId!==void 0&&(o.writeFieldBegin("sessionId",a.Type.STRING,1),o.writeString(this.sessionId),o.writeFieldEnd()),this.krbToken!==null&&this.krbToken!==void 0&&(o.writeFieldBegin("krbToken",a.Type.STRING,2),o.writeString(this.krbToken),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TStepResult=class{constructor(o){this.serialized_rows=null,this.execution_finished=null,this.merge_type=null,this.sharded=null,this.row_desc=null,this.node_id=null,o&&(o.serialized_rows!==void 0&&o.serialized_rows!==null&&(this.serialized_rows=new w.TSerializedRows(o.serialized_rows)),o.execution_finished!==void 0&&o.execution_finished!==null&&(this.execution_finished=o.execution_finished),o.merge_type!==void 0&&o.merge_type!==null&&(this.merge_type=o.merge_type),o.sharded!==void 0&&o.sharded!==null&&(this.sharded=o.sharded),o.row_desc!==void 0&&o.row_desc!==null&&(this.row_desc=a.copyList(o.row_desc,[y.TColumnType])),o.node_id!==void 0&&o.node_id!==null&&(this.node_id=o.node_id))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRUCT?(this.serialized_rows=new w.TSerializedRows,this.serialized_rows.read(o)):o.skip(b);break;case 2:b==a.Type.BOOL?this.execution_finished=o.readBool():o.skip(b);break;case 3:b==a.Type.I32?this.merge_type=o.readI32():o.skip(b);break;case 4:b==a.Type.BOOL?this.sharded=o.readBool():o.skip(b);break;case 5:if(b==a.Type.LIST){this.row_desc=[];const k=o.readListBegin().size||0;for(let I=0;I<k;++I){let B=null;B=new y.TColumnType,B.read(o),this.row_desc.push(B)}o.readListEnd()}else o.skip(b);break;case 6:b==a.Type.I32?this.node_id=o.readI32():o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("TStepResult"),this.serialized_rows!==null&&this.serialized_rows!==void 0&&(o.writeFieldBegin("serialized_rows",a.Type.STRUCT,1),this.serialized_rows.write(o),o.writeFieldEnd()),this.execution_finished!==null&&this.execution_finished!==void 0&&(o.writeFieldBegin("execution_finished",a.Type.BOOL,2),o.writeBool(this.execution_finished),o.writeFieldEnd()),this.merge_type!==null&&this.merge_type!==void 0&&(o.writeFieldBegin("merge_type",a.Type.I32,3),o.writeI32(this.merge_type),o.writeFieldEnd()),this.sharded!==null&&this.sharded!==void 0&&(o.writeFieldBegin("sharded",a.Type.BOOL,4),o.writeBool(this.sharded),o.writeFieldEnd()),this.row_desc!==null&&this.row_desc!==void 0){o.writeFieldBegin("row_desc",a.Type.LIST,5),o.writeListBegin(a.Type.STRUCT,this.row_desc.length);for(let T in this.row_desc)this.row_desc.hasOwnProperty(T)&&(T=this.row_desc[T],T.write(o));o.writeListEnd(),o.writeFieldEnd()}this.node_id!==null&&this.node_id!==void 0&&(o.writeFieldBegin("node_id",a.Type.I32,6),o.writeI32(this.node_id),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TRowSet=class{constructor(o){this.row_desc=null,this.rows=null,this.columns=null,this.is_columnar=null,o&&(o.row_desc!==void 0&&o.row_desc!==null&&(this.row_desc=a.copyList(o.row_desc,[y.TColumnType])),o.rows!==void 0&&o.rows!==null&&(this.rows=a.copyList(o.rows,[y.TRow])),o.columns!==void 0&&o.columns!==null&&(this.columns=a.copyList(o.columns,[y.TColumn])),o.is_columnar!==void 0&&o.is_columnar!==null&&(this.is_columnar=o.is_columnar))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:if(b==a.Type.LIST){this.row_desc=[];const k=o.readListBegin().size||0;for(let I=0;I<k;++I){let B=null;B=new y.TColumnType,B.read(o),this.row_desc.push(B)}o.readListEnd()}else o.skip(b);break;case 2:if(b==a.Type.LIST){this.rows=[];const k=o.readListBegin().size||0;for(let I=0;I<k;++I){let B=null;B=new y.TRow,B.read(o),this.rows.push(B)}o.readListEnd()}else o.skip(b);break;case 3:if(b==a.Type.LIST){this.columns=[];const k=o.readListBegin().size||0;for(let I=0;I<k;++I){let B=null;B=new y.TColumn,B.read(o),this.columns.push(B)}o.readListEnd()}else o.skip(b);break;case 4:b==a.Type.BOOL?this.is_columnar=o.readBool():o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("TRowSet"),this.row_desc!==null&&this.row_desc!==void 0){o.writeFieldBegin("row_desc",a.Type.LIST,1),o.writeListBegin(a.Type.STRUCT,this.row_desc.length);for(let T in this.row_desc)this.row_desc.hasOwnProperty(T)&&(T=this.row_desc[T],T.write(o));o.writeListEnd(),o.writeFieldEnd()}if(this.rows!==null&&this.rows!==void 0){o.writeFieldBegin("rows",a.Type.LIST,2),o.writeListBegin(a.Type.STRUCT,this.rows.length);for(let T in this.rows)this.rows.hasOwnProperty(T)&&(T=this.rows[T],T.write(o));o.writeListEnd(),o.writeFieldEnd()}if(this.columns!==null&&this.columns!==void 0){o.writeFieldBegin("columns",a.Type.LIST,3),o.writeListBegin(a.Type.STRUCT,this.columns.length);for(let T in this.columns)this.columns.hasOwnProperty(T)&&(T=this.columns[T],T.write(o));o.writeListEnd(),o.writeFieldEnd()}this.is_columnar!==null&&this.is_columnar!==void 0&&(o.writeFieldBegin("is_columnar",a.Type.BOOL,4),o.writeBool(this.is_columnar),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TQueryResult=class{constructor(o){this.row_set=null,this.execution_time_ms=null,this.total_time_ms=null,this.nonce=null,this.debug=null,this.success=!0,this.query_type=0,o&&(o.row_set!==void 0&&o.row_set!==null&&(this.row_set=new y.TRowSet(o.row_set)),o.execution_time_ms!==void 0&&o.execution_time_ms!==null&&(this.execution_time_ms=o.execution_time_ms),o.total_time_ms!==void 0&&o.total_time_ms!==null&&(this.total_time_ms=o.total_time_ms),o.nonce!==void 0&&o.nonce!==null&&(this.nonce=o.nonce),o.debug!==void 0&&o.debug!==null&&(this.debug=o.debug),o.success!==void 0&&o.success!==null&&(this.success=o.success),o.query_type!==void 0&&o.query_type!==null&&(this.query_type=o.query_type))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRUCT?(this.row_set=new y.TRowSet,this.row_set.read(o)):o.skip(b);break;case 2:b==a.Type.I64?this.execution_time_ms=o.readI64():o.skip(b);break;case 3:b==a.Type.I64?this.total_time_ms=o.readI64():o.skip(b);break;case 4:b==a.Type.STRING?this.nonce=o.readString():o.skip(b);break;case 5:b==a.Type.STRING?this.debug=o.readString():o.skip(b);break;case 6:b==a.Type.BOOL?this.success=o.readBool():o.skip(b);break;case 7:b==a.Type.I32?this.query_type=o.readI32():o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("TQueryResult"),this.row_set!==null&&this.row_set!==void 0&&(o.writeFieldBegin("row_set",a.Type.STRUCT,1),this.row_set.write(o),o.writeFieldEnd()),this.execution_time_ms!==null&&this.execution_time_ms!==void 0&&(o.writeFieldBegin("execution_time_ms",a.Type.I64,2),o.writeI64(this.execution_time_ms),o.writeFieldEnd()),this.total_time_ms!==null&&this.total_time_ms!==void 0&&(o.writeFieldBegin("total_time_ms",a.Type.I64,3),o.writeI64(this.total_time_ms),o.writeFieldEnd()),this.nonce!==null&&this.nonce!==void 0&&(o.writeFieldBegin("nonce",a.Type.STRING,4),o.writeString(this.nonce),o.writeFieldEnd()),this.debug!==null&&this.debug!==void 0&&(o.writeFieldBegin("debug",a.Type.STRING,5),o.writeString(this.debug),o.writeFieldEnd()),this.success!==null&&this.success!==void 0&&(o.writeFieldBegin("success",a.Type.BOOL,6),o.writeBool(this.success),o.writeFieldEnd()),this.query_type!==null&&this.query_type!==void 0&&(o.writeFieldBegin("query_type",a.Type.I32,7),o.writeI32(this.query_type),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TDataFrame=class{constructor(o){this.sm_handle=null,this.sm_size=null,this.df_handle=null,this.df_size=null,this.execution_time_ms=null,this.arrow_conversion_time_ms=null,this.df_buffer=null,o&&(o.sm_handle!==void 0&&o.sm_handle!==null&&(this.sm_handle=o.sm_handle),o.sm_size!==void 0&&o.sm_size!==null&&(this.sm_size=o.sm_size),o.df_handle!==void 0&&o.df_handle!==null&&(this.df_handle=o.df_handle),o.df_size!==void 0&&o.df_size!==null&&(this.df_size=o.df_size),o.execution_time_ms!==void 0&&o.execution_time_ms!==null&&(this.execution_time_ms=o.execution_time_ms),o.arrow_conversion_time_ms!==void 0&&o.arrow_conversion_time_ms!==null&&(this.arrow_conversion_time_ms=o.arrow_conversion_time_ms),o.df_buffer!==void 0&&o.df_buffer!==null&&(this.df_buffer=o.df_buffer))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.sm_handle=o.readBinary():o.skip(b);break;case 2:b==a.Type.I64?this.sm_size=o.readI64():o.skip(b);break;case 3:b==a.Type.STRING?this.df_handle=o.readBinary():o.skip(b);break;case 4:b==a.Type.I64?this.df_size=o.readI64():o.skip(b);break;case 5:b==a.Type.I64?this.execution_time_ms=o.readI64():o.skip(b);break;case 6:b==a.Type.I64?this.arrow_conversion_time_ms=o.readI64():o.skip(b);break;case 7:b==a.Type.STRING?this.df_buffer=o.readBinary():o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("TDataFrame"),this.sm_handle!==null&&this.sm_handle!==void 0&&(o.writeFieldBegin("sm_handle",a.Type.STRING,1),o.writeBinary(this.sm_handle),o.writeFieldEnd()),this.sm_size!==null&&this.sm_size!==void 0&&(o.writeFieldBegin("sm_size",a.Type.I64,2),o.writeI64(this.sm_size),o.writeFieldEnd()),this.df_handle!==null&&this.df_handle!==void 0&&(o.writeFieldBegin("df_handle",a.Type.STRING,3),o.writeBinary(this.df_handle),o.writeFieldEnd()),this.df_size!==null&&this.df_size!==void 0&&(o.writeFieldBegin("df_size",a.Type.I64,4),o.writeI64(this.df_size),o.writeFieldEnd()),this.execution_time_ms!==null&&this.execution_time_ms!==void 0&&(o.writeFieldBegin("execution_time_ms",a.Type.I64,5),o.writeI64(this.execution_time_ms),o.writeFieldEnd()),this.arrow_conversion_time_ms!==null&&this.arrow_conversion_time_ms!==void 0&&(o.writeFieldBegin("arrow_conversion_time_ms",a.Type.I64,6),o.writeI64(this.arrow_conversion_time_ms),o.writeFieldEnd()),this.df_buffer!==null&&this.df_buffer!==void 0&&(o.writeFieldBegin("df_buffer",a.Type.STRING,7),o.writeBinary(this.df_buffer),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TDBInfo=class{constructor(o){this.db_name=null,this.db_owner=null,o&&(o.db_name!==void 0&&o.db_name!==null&&(this.db_name=o.db_name),o.db_owner!==void 0&&o.db_owner!==null&&(this.db_owner=o.db_owner))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.db_name=o.readString():o.skip(b);break;case 2:b==a.Type.STRING?this.db_owner=o.readString():o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("TDBInfo"),this.db_name!==null&&this.db_name!==void 0&&(o.writeFieldBegin("db_name",a.Type.STRING,1),o.writeString(this.db_name),o.writeFieldEnd()),this.db_owner!==null&&this.db_owner!==void 0&&(o.writeFieldBegin("db_owner",a.Type.STRING,2),o.writeString(this.db_owner),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TDBException=class extends a.TException{constructor(o){super(o),this.name="TDBException",this.error_msg=null,o&&o.error_msg!==void 0&&o.error_msg!==null&&(this.error_msg=o.error_msg)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.error_msg=o.readString():o.skip(b);break;case 0:o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("TDBException"),this.error_msg!==null&&this.error_msg!==void 0&&(o.writeFieldBegin("error_msg",a.Type.STRING,1),o.writeString(this.error_msg),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TCopyParams=class{constructor(o){this.delimiter=null,this.null_str=null,this.has_header=0,this.quoted=null,this.quote=null,this.escape=null,this.line_delim=null,this.array_delim=null,this.array_begin=null,this.array_end=null,this.threads=null,this.source_type=0,this.s3_access_key=null,this.s3_secret_key=null,this.s3_region=null,this.geo_coords_encoding=6,this.geo_coords_comp_param=32,this.geo_coords_type=18,this.geo_coords_srid=4326,this.sanitize_column_names=!0,this.geo_layer_name=null,this.s3_endpoint=null,this.geo_assign_render_groups=!0,this.geo_explode_collections=!1,this.source_srid=0,this.s3_session_token=null,this.raster_point_type=1,this.raster_import_bands=null,this.raster_scanlines_per_thread=null,this.raster_point_transform=1,this.raster_point_compute_angle=!1,this.raster_import_dimensions=null,this.odbc_dsn=null,this.odbc_connection_string=null,this.odbc_sql_select=null,this.odbc_sql_order_by=null,this.odbc_username=null,this.odbc_password=null,this.odbc_credential_string=null,this.add_metadata_columns=null,o&&(o.delimiter!==void 0&&o.delimiter!==null&&(this.delimiter=o.delimiter),o.null_str!==void 0&&o.null_str!==null&&(this.null_str=o.null_str),o.has_header!==void 0&&o.has_header!==null&&(this.has_header=o.has_header),o.quoted!==void 0&&o.quoted!==null&&(this.quoted=o.quoted),o.quote!==void 0&&o.quote!==null&&(this.quote=o.quote),o.escape!==void 0&&o.escape!==null&&(this.escape=o.escape),o.line_delim!==void 0&&o.line_delim!==null&&(this.line_delim=o.line_delim),o.array_delim!==void 0&&o.array_delim!==null&&(this.array_delim=o.array_delim),o.array_begin!==void 0&&o.array_begin!==null&&(this.array_begin=o.array_begin),o.array_end!==void 0&&o.array_end!==null&&(this.array_end=o.array_end),o.threads!==void 0&&o.threads!==null&&(this.threads=o.threads),o.source_type!==void 0&&o.source_type!==null&&(this.source_type=o.source_type),o.s3_access_key!==void 0&&o.s3_access_key!==null&&(this.s3_access_key=o.s3_access_key),o.s3_secret_key!==void 0&&o.s3_secret_key!==null&&(this.s3_secret_key=o.s3_secret_key),o.s3_region!==void 0&&o.s3_region!==null&&(this.s3_region=o.s3_region),o.geo_coords_encoding!==void 0&&o.geo_coords_encoding!==null&&(this.geo_coords_encoding=o.geo_coords_encoding),o.geo_coords_comp_param!==void 0&&o.geo_coords_comp_param!==null&&(this.geo_coords_comp_param=o.geo_coords_comp_param),o.geo_coords_type!==void 0&&o.geo_coords_type!==null&&(this.geo_coords_type=o.geo_coords_type),o.geo_coords_srid!==void 0&&o.geo_coords_srid!==null&&(this.geo_coords_srid=o.geo_coords_srid),o.sanitize_column_names!==void 0&&o.sanitize_column_names!==null&&(this.sanitize_column_names=o.sanitize_column_names),o.geo_layer_name!==void 0&&o.geo_layer_name!==null&&(this.geo_layer_name=o.geo_layer_name),o.s3_endpoint!==void 0&&o.s3_endpoint!==null&&(this.s3_endpoint=o.s3_endpoint),o.geo_assign_render_groups!==void 0&&o.geo_assign_render_groups!==null&&(this.geo_assign_render_groups=o.geo_assign_render_groups),o.geo_explode_collections!==void 0&&o.geo_explode_collections!==null&&(this.geo_explode_collections=o.geo_explode_collections),o.source_srid!==void 0&&o.source_srid!==null&&(this.source_srid=o.source_srid),o.s3_session_token!==void 0&&o.s3_session_token!==null&&(this.s3_session_token=o.s3_session_token),o.raster_point_type!==void 0&&o.raster_point_type!==null&&(this.raster_point_type=o.raster_point_type),o.raster_import_bands!==void 0&&o.raster_import_bands!==null&&(this.raster_import_bands=o.raster_import_bands),o.raster_scanlines_per_thread!==void 0&&o.raster_scanlines_per_thread!==null&&(this.raster_scanlines_per_thread=o.raster_scanlines_per_thread),o.raster_point_transform!==void 0&&o.raster_point_transform!==null&&(this.raster_point_transform=o.raster_point_transform),o.raster_point_compute_angle!==void 0&&o.raster_point_compute_angle!==null&&(this.raster_point_compute_angle=o.raster_point_compute_angle),o.raster_import_dimensions!==void 0&&o.raster_import_dimensions!==null&&(this.raster_import_dimensions=o.raster_import_dimensions),o.odbc_dsn!==void 0&&o.odbc_dsn!==null&&(this.odbc_dsn=o.odbc_dsn),o.odbc_connection_string!==void 0&&o.odbc_connection_string!==null&&(this.odbc_connection_string=o.odbc_connection_string),o.odbc_sql_select!==void 0&&o.odbc_sql_select!==null&&(this.odbc_sql_select=o.odbc_sql_select),o.odbc_sql_order_by!==void 0&&o.odbc_sql_order_by!==null&&(this.odbc_sql_order_by=o.odbc_sql_order_by),o.odbc_username!==void 0&&o.odbc_username!==null&&(this.odbc_username=o.odbc_username),o.odbc_password!==void 0&&o.odbc_password!==null&&(this.odbc_password=o.odbc_password),o.odbc_credential_string!==void 0&&o.odbc_credential_string!==null&&(this.odbc_credential_string=o.odbc_credential_string),o.add_metadata_columns!==void 0&&o.add_metadata_columns!==null&&(this.add_metadata_columns=o.add_metadata_columns))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.delimiter=o.readString():o.skip(b);break;case 2:b==a.Type.STRING?this.null_str=o.readString():o.skip(b);break;case 3:b==a.Type.I32?this.has_header=o.readI32():o.skip(b);break;case 4:b==a.Type.BOOL?this.quoted=o.readBool():o.skip(b);break;case 5:b==a.Type.STRING?this.quote=o.readString():o.skip(b);break;case 6:b==a.Type.STRING?this.escape=o.readString():o.skip(b);break;case 7:b==a.Type.STRING?this.line_delim=o.readString():o.skip(b);break;case 8:b==a.Type.STRING?this.array_delim=o.readString():o.skip(b);break;case 9:b==a.Type.STRING?this.array_begin=o.readString():o.skip(b);break;case 10:b==a.Type.STRING?this.array_end=o.readString():o.skip(b);break;case 11:b==a.Type.I32?this.threads=o.readI32():o.skip(b);break;case 12:b==a.Type.I32?this.source_type=o.readI32():o.skip(b);break;case 13:b==a.Type.STRING?this.s3_access_key=o.readString():o.skip(b);break;case 14:b==a.Type.STRING?this.s3_secret_key=o.readString():o.skip(b);break;case 15:b==a.Type.STRING?this.s3_region=o.readString():o.skip(b);break;case 16:b==a.Type.I32?this.geo_coords_encoding=o.readI32():o.skip(b);break;case 17:b==a.Type.I32?this.geo_coords_comp_param=o.readI32():o.skip(b);break;case 18:b==a.Type.I32?this.geo_coords_type=o.readI32():o.skip(b);break;case 19:b==a.Type.I32?this.geo_coords_srid=o.readI32():o.skip(b);break;case 20:b==a.Type.BOOL?this.sanitize_column_names=o.readBool():o.skip(b);break;case 21:b==a.Type.STRING?this.geo_layer_name=o.readString():o.skip(b);break;case 22:b==a.Type.STRING?this.s3_endpoint=o.readString():o.skip(b);break;case 23:b==a.Type.BOOL?this.geo_assign_render_groups=o.readBool():o.skip(b);break;case 24:b==a.Type.BOOL?this.geo_explode_collections=o.readBool():o.skip(b);break;case 25:b==a.Type.I32?this.source_srid=o.readI32():o.skip(b);break;case 26:b==a.Type.STRING?this.s3_session_token=o.readString():o.skip(b);break;case 27:b==a.Type.I32?this.raster_point_type=o.readI32():o.skip(b);break;case 28:b==a.Type.STRING?this.raster_import_bands=o.readString():o.skip(b);break;case 29:b==a.Type.I32?this.raster_scanlines_per_thread=o.readI32():o.skip(b);break;case 30:b==a.Type.I32?this.raster_point_transform=o.readI32():o.skip(b);break;case 31:b==a.Type.BOOL?this.raster_point_compute_angle=o.readBool():o.skip(b);break;case 32:b==a.Type.STRING?this.raster_import_dimensions=o.readString():o.skip(b);break;case 33:b==a.Type.STRING?this.odbc_dsn=o.readString():o.skip(b);break;case 34:b==a.Type.STRING?this.odbc_connection_string=o.readString():o.skip(b);break;case 35:b==a.Type.STRING?this.odbc_sql_select=o.readString():o.skip(b);break;case 36:b==a.Type.STRING?this.odbc_sql_order_by=o.readString():o.skip(b);break;case 37:b==a.Type.STRING?this.odbc_username=o.readString():o.skip(b);break;case 38:b==a.Type.STRING?this.odbc_password=o.readString():o.skip(b);break;case 39:b==a.Type.STRING?this.odbc_credential_string=o.readString():o.skip(b);break;case 40:b==a.Type.STRING?this.add_metadata_columns=o.readString():o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("TCopyParams"),this.delimiter!==null&&this.delimiter!==void 0&&(o.writeFieldBegin("delimiter",a.Type.STRING,1),o.writeString(this.delimiter),o.writeFieldEnd()),this.null_str!==null&&this.null_str!==void 0&&(o.writeFieldBegin("null_str",a.Type.STRING,2),o.writeString(this.null_str),o.writeFieldEnd()),this.has_header!==null&&this.has_header!==void 0&&(o.writeFieldBegin("has_header",a.Type.I32,3),o.writeI32(this.has_header),o.writeFieldEnd()),this.quoted!==null&&this.quoted!==void 0&&(o.writeFieldBegin("quoted",a.Type.BOOL,4),o.writeBool(this.quoted),o.writeFieldEnd()),this.quote!==null&&this.quote!==void 0&&(o.writeFieldBegin("quote",a.Type.STRING,5),o.writeString(this.quote),o.writeFieldEnd()),this.escape!==null&&this.escape!==void 0&&(o.writeFieldBegin("escape",a.Type.STRING,6),o.writeString(this.escape),o.writeFieldEnd()),this.line_delim!==null&&this.line_delim!==void 0&&(o.writeFieldBegin("line_delim",a.Type.STRING,7),o.writeString(this.line_delim),o.writeFieldEnd()),this.array_delim!==null&&this.array_delim!==void 0&&(o.writeFieldBegin("array_delim",a.Type.STRING,8),o.writeString(this.array_delim),o.writeFieldEnd()),this.array_begin!==null&&this.array_begin!==void 0&&(o.writeFieldBegin("array_begin",a.Type.STRING,9),o.writeString(this.array_begin),o.writeFieldEnd()),this.array_end!==null&&this.array_end!==void 0&&(o.writeFieldBegin("array_end",a.Type.STRING,10),o.writeString(this.array_end),o.writeFieldEnd()),this.threads!==null&&this.threads!==void 0&&(o.writeFieldBegin("threads",a.Type.I32,11),o.writeI32(this.threads),o.writeFieldEnd()),this.source_type!==null&&this.source_type!==void 0&&(o.writeFieldBegin("source_type",a.Type.I32,12),o.writeI32(this.source_type),o.writeFieldEnd()),this.s3_access_key!==null&&this.s3_access_key!==void 0&&(o.writeFieldBegin("s3_access_key",a.Type.STRING,13),o.writeString(this.s3_access_key),o.writeFieldEnd()),this.s3_secret_key!==null&&this.s3_secret_key!==void 0&&(o.writeFieldBegin("s3_secret_key",a.Type.STRING,14),o.writeString(this.s3_secret_key),o.writeFieldEnd()),this.s3_region!==null&&this.s3_region!==void 0&&(o.writeFieldBegin("s3_region",a.Type.STRING,15),o.writeString(this.s3_region),o.writeFieldEnd()),this.geo_coords_encoding!==null&&this.geo_coords_encoding!==void 0&&(o.writeFieldBegin("geo_coords_encoding",a.Type.I32,16),o.writeI32(this.geo_coords_encoding),o.writeFieldEnd()),this.geo_coords_comp_param!==null&&this.geo_coords_comp_param!==void 0&&(o.writeFieldBegin("geo_coords_comp_param",a.Type.I32,17),o.writeI32(this.geo_coords_comp_param),o.writeFieldEnd()),this.geo_coords_type!==null&&this.geo_coords_type!==void 0&&(o.writeFieldBegin("geo_coords_type",a.Type.I32,18),o.writeI32(this.geo_coords_type),o.writeFieldEnd()),this.geo_coords_srid!==null&&this.geo_coords_srid!==void 0&&(o.writeFieldBegin("geo_coords_srid",a.Type.I32,19),o.writeI32(this.geo_coords_srid),o.writeFieldEnd()),this.sanitize_column_names!==null&&this.sanitize_column_names!==void 0&&(o.writeFieldBegin("sanitize_column_names",a.Type.BOOL,20),o.writeBool(this.sanitize_column_names),o.writeFieldEnd()),this.geo_layer_name!==null&&this.geo_layer_name!==void 0&&(o.writeFieldBegin("geo_layer_name",a.Type.STRING,21),o.writeString(this.geo_layer_name),o.writeFieldEnd()),this.s3_endpoint!==null&&this.s3_endpoint!==void 0&&(o.writeFieldBegin("s3_endpoint",a.Type.STRING,22),o.writeString(this.s3_endpoint),o.writeFieldEnd()),this.geo_assign_render_groups!==null&&this.geo_assign_render_groups!==void 0&&(o.writeFieldBegin("geo_assign_render_groups",a.Type.BOOL,23),o.writeBool(this.geo_assign_render_groups),o.writeFieldEnd()),this.geo_explode_collections!==null&&this.geo_explode_collections!==void 0&&(o.writeFieldBegin("geo_explode_collections",a.Type.BOOL,24),o.writeBool(this.geo_explode_collections),o.writeFieldEnd()),this.source_srid!==null&&this.source_srid!==void 0&&(o.writeFieldBegin("source_srid",a.Type.I32,25),o.writeI32(this.source_srid),o.writeFieldEnd()),this.s3_session_token!==null&&this.s3_session_token!==void 0&&(o.writeFieldBegin("s3_session_token",a.Type.STRING,26),o.writeString(this.s3_session_token),o.writeFieldEnd()),this.raster_point_type!==null&&this.raster_point_type!==void 0&&(o.writeFieldBegin("raster_point_type",a.Type.I32,27),o.writeI32(this.raster_point_type),o.writeFieldEnd()),this.raster_import_bands!==null&&this.raster_import_bands!==void 0&&(o.writeFieldBegin("raster_import_bands",a.Type.STRING,28),o.writeString(this.raster_import_bands),o.writeFieldEnd()),this.raster_scanlines_per_thread!==null&&this.raster_scanlines_per_thread!==void 0&&(o.writeFieldBegin("raster_scanlines_per_thread",a.Type.I32,29),o.writeI32(this.raster_scanlines_per_thread),o.writeFieldEnd()),this.raster_point_transform!==null&&this.raster_point_transform!==void 0&&(o.writeFieldBegin("raster_point_transform",a.Type.I32,30),o.writeI32(this.raster_point_transform),o.writeFieldEnd()),this.raster_point_compute_angle!==null&&this.raster_point_compute_angle!==void 0&&(o.writeFieldBegin("raster_point_compute_angle",a.Type.BOOL,31),o.writeBool(this.raster_point_compute_angle),o.writeFieldEnd()),this.raster_import_dimensions!==null&&this.raster_import_dimensions!==void 0&&(o.writeFieldBegin("raster_import_dimensions",a.Type.STRING,32),o.writeString(this.raster_import_dimensions),o.writeFieldEnd()),this.odbc_dsn!==null&&this.odbc_dsn!==void 0&&(o.writeFieldBegin("odbc_dsn",a.Type.STRING,33),o.writeString(this.odbc_dsn),o.writeFieldEnd()),this.odbc_connection_string!==null&&this.odbc_connection_string!==void 0&&(o.writeFieldBegin("odbc_connection_string",a.Type.STRING,34),o.writeString(this.odbc_connection_string),o.writeFieldEnd()),this.odbc_sql_select!==null&&this.odbc_sql_select!==void 0&&(o.writeFieldBegin("odbc_sql_select",a.Type.STRING,35),o.writeString(this.odbc_sql_select),o.writeFieldEnd()),this.odbc_sql_order_by!==null&&this.odbc_sql_order_by!==void 0&&(o.writeFieldBegin("odbc_sql_order_by",a.Type.STRING,36),o.writeString(this.odbc_sql_order_by),o.writeFieldEnd()),this.odbc_username!==null&&this.odbc_username!==void 0&&(o.writeFieldBegin("odbc_username",a.Type.STRING,37),o.writeString(this.odbc_username),o.writeFieldEnd()),this.odbc_password!==null&&this.odbc_password!==void 0&&(o.writeFieldBegin("odbc_password",a.Type.STRING,38),o.writeString(this.odbc_password),o.writeFieldEnd()),this.odbc_credential_string!==null&&this.odbc_credential_string!==void 0&&(o.writeFieldBegin("odbc_credential_string",a.Type.STRING,39),o.writeString(this.odbc_credential_string),o.writeFieldEnd()),this.add_metadata_columns!==null&&this.add_metadata_columns!==void 0&&(o.writeFieldBegin("add_metadata_columns",a.Type.STRING,40),o.writeString(this.add_metadata_columns),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TCreateParams=class{constructor(o){this.is_replicated=null,o&&o.is_replicated!==void 0&&o.is_replicated!==null&&(this.is_replicated=o.is_replicated)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.BOOL?this.is_replicated=o.readBool():o.skip(b);break;case 0:o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("TCreateParams"),this.is_replicated!==null&&this.is_replicated!==void 0&&(o.writeFieldBegin("is_replicated",a.Type.BOOL,1),o.writeBool(this.is_replicated),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TDetectResult=class{constructor(o){this.row_set=null,this.copy_params=null,o&&(o.row_set!==void 0&&o.row_set!==null&&(this.row_set=new y.TRowSet(o.row_set)),o.copy_params!==void 0&&o.copy_params!==null&&(this.copy_params=new y.TCopyParams(o.copy_params)))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRUCT?(this.row_set=new y.TRowSet,this.row_set.read(o)):o.skip(b);break;case 2:b==a.Type.STRUCT?(this.copy_params=new y.TCopyParams,this.copy_params.read(o)):o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("TDetectResult"),this.row_set!==null&&this.row_set!==void 0&&(o.writeFieldBegin("row_set",a.Type.STRUCT,1),this.row_set.write(o),o.writeFieldEnd()),this.copy_params!==null&&this.copy_params!==void 0&&(o.writeFieldBegin("copy_params",a.Type.STRUCT,2),this.copy_params.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TImportStatus=class{constructor(o){this.elapsed=null,this.rows_completed=null,this.rows_estimated=null,this.rows_rejected=null,o&&(o.elapsed!==void 0&&o.elapsed!==null&&(this.elapsed=o.elapsed),o.rows_completed!==void 0&&o.rows_completed!==null&&(this.rows_completed=o.rows_completed),o.rows_estimated!==void 0&&o.rows_estimated!==null&&(this.rows_estimated=o.rows_estimated),o.rows_rejected!==void 0&&o.rows_rejected!==null&&(this.rows_rejected=o.rows_rejected))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I64?this.elapsed=o.readI64():o.skip(b);break;case 2:b==a.Type.I64?this.rows_completed=o.readI64():o.skip(b);break;case 3:b==a.Type.I64?this.rows_estimated=o.readI64():o.skip(b);break;case 4:b==a.Type.I64?this.rows_rejected=o.readI64():o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("TImportStatus"),this.elapsed!==null&&this.elapsed!==void 0&&(o.writeFieldBegin("elapsed",a.Type.I64,1),o.writeI64(this.elapsed),o.writeFieldEnd()),this.rows_completed!==null&&this.rows_completed!==void 0&&(o.writeFieldBegin("rows_completed",a.Type.I64,2),o.writeI64(this.rows_completed),o.writeFieldEnd()),this.rows_estimated!==null&&this.rows_estimated!==void 0&&(o.writeFieldBegin("rows_estimated",a.Type.I64,3),o.writeI64(this.rows_estimated),o.writeFieldEnd()),this.rows_rejected!==null&&this.rows_rejected!==void 0&&(o.writeFieldBegin("rows_rejected",a.Type.I64,4),o.writeI64(this.rows_rejected),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TFrontendView=class{constructor(o){this.view_name=null,this.view_state=null,this.image_hash=null,this.update_time=null,this.view_metadata=null,o&&(o.view_name!==void 0&&o.view_name!==null&&(this.view_name=o.view_name),o.view_state!==void 0&&o.view_state!==null&&(this.view_state=o.view_state),o.image_hash!==void 0&&o.image_hash!==null&&(this.image_hash=o.image_hash),o.update_time!==void 0&&o.update_time!==null&&(this.update_time=o.update_time),o.view_metadata!==void 0&&o.view_metadata!==null&&(this.view_metadata=o.view_metadata))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.view_name=o.readString():o.skip(b);break;case 2:b==a.Type.STRING?this.view_state=o.readString():o.skip(b);break;case 3:b==a.Type.STRING?this.image_hash=o.readString():o.skip(b);break;case 4:b==a.Type.STRING?this.update_time=o.readString():o.skip(b);break;case 5:b==a.Type.STRING?this.view_metadata=o.readString():o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("TFrontendView"),this.view_name!==null&&this.view_name!==void 0&&(o.writeFieldBegin("view_name",a.Type.STRING,1),o.writeString(this.view_name),o.writeFieldEnd()),this.view_state!==null&&this.view_state!==void 0&&(o.writeFieldBegin("view_state",a.Type.STRING,2),o.writeString(this.view_state),o.writeFieldEnd()),this.image_hash!==null&&this.image_hash!==void 0&&(o.writeFieldBegin("image_hash",a.Type.STRING,3),o.writeString(this.image_hash),o.writeFieldEnd()),this.update_time!==null&&this.update_time!==void 0&&(o.writeFieldBegin("update_time",a.Type.STRING,4),o.writeString(this.update_time),o.writeFieldEnd()),this.view_metadata!==null&&this.view_metadata!==void 0&&(o.writeFieldBegin("view_metadata",a.Type.STRING,5),o.writeString(this.view_metadata),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TServerStatus=class{constructor(o){this.read_only=null,this.version=null,this.rendering_enabled=null,this.start_time=null,this.edition=null,this.host_name=null,this.poly_rendering_enabled=null,this.role=null,this.renderer_status_json=null,o&&(o.read_only!==void 0&&o.read_only!==null&&(this.read_only=o.read_only),o.version!==void 0&&o.version!==null&&(this.version=o.version),o.rendering_enabled!==void 0&&o.rendering_enabled!==null&&(this.rendering_enabled=o.rendering_enabled),o.start_time!==void 0&&o.start_time!==null&&(this.start_time=o.start_time),o.edition!==void 0&&o.edition!==null&&(this.edition=o.edition),o.host_name!==void 0&&o.host_name!==null&&(this.host_name=o.host_name),o.poly_rendering_enabled!==void 0&&o.poly_rendering_enabled!==null&&(this.poly_rendering_enabled=o.poly_rendering_enabled),o.role!==void 0&&o.role!==null&&(this.role=o.role),o.renderer_status_json!==void 0&&o.renderer_status_json!==null&&(this.renderer_status_json=o.renderer_status_json))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.BOOL?this.read_only=o.readBool():o.skip(b);break;case 2:b==a.Type.STRING?this.version=o.readString():o.skip(b);break;case 3:b==a.Type.BOOL?this.rendering_enabled=o.readBool():o.skip(b);break;case 4:b==a.Type.I64?this.start_time=o.readI64():o.skip(b);break;case 5:b==a.Type.STRING?this.edition=o.readString():o.skip(b);break;case 6:b==a.Type.STRING?this.host_name=o.readString():o.skip(b);break;case 7:b==a.Type.BOOL?this.poly_rendering_enabled=o.readBool():o.skip(b);break;case 8:b==a.Type.I32?this.role=o.readI32():o.skip(b);break;case 9:b==a.Type.STRING?this.renderer_status_json=o.readString():o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("TServerStatus"),this.read_only!==null&&this.read_only!==void 0&&(o.writeFieldBegin("read_only",a.Type.BOOL,1),o.writeBool(this.read_only),o.writeFieldEnd()),this.version!==null&&this.version!==void 0&&(o.writeFieldBegin("version",a.Type.STRING,2),o.writeString(this.version),o.writeFieldEnd()),this.rendering_enabled!==null&&this.rendering_enabled!==void 0&&(o.writeFieldBegin("rendering_enabled",a.Type.BOOL,3),o.writeBool(this.rendering_enabled),o.writeFieldEnd()),this.start_time!==null&&this.start_time!==void 0&&(o.writeFieldBegin("start_time",a.Type.I64,4),o.writeI64(this.start_time),o.writeFieldEnd()),this.edition!==null&&this.edition!==void 0&&(o.writeFieldBegin("edition",a.Type.STRING,5),o.writeString(this.edition),o.writeFieldEnd()),this.host_name!==null&&this.host_name!==void 0&&(o.writeFieldBegin("host_name",a.Type.STRING,6),o.writeString(this.host_name),o.writeFieldEnd()),this.poly_rendering_enabled!==null&&this.poly_rendering_enabled!==void 0&&(o.writeFieldBegin("poly_rendering_enabled",a.Type.BOOL,7),o.writeBool(this.poly_rendering_enabled),o.writeFieldEnd()),this.role!==null&&this.role!==void 0&&(o.writeFieldBegin("role",a.Type.I32,8),o.writeI32(this.role),o.writeFieldEnd()),this.renderer_status_json!==null&&this.renderer_status_json!==void 0&&(o.writeFieldBegin("renderer_status_json",a.Type.STRING,9),o.writeString(this.renderer_status_json),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TPixel=class{constructor(o){this.x=null,this.y=null,o&&(o.x!==void 0&&o.x!==null&&(this.x=o.x),o.y!==void 0&&o.y!==null&&(this.y=o.y))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I64?this.x=o.readI64():o.skip(b);break;case 2:b==a.Type.I64?this.y=o.readI64():o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("TPixel"),this.x!==null&&this.x!==void 0&&(o.writeFieldBegin("x",a.Type.I64,1),o.writeI64(this.x),o.writeFieldEnd()),this.y!==null&&this.y!==void 0&&(o.writeFieldBegin("y",a.Type.I64,2),o.writeI64(this.y),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TPixelTableRowResult=class{constructor(o){this.pixel=null,this.vega_table_name=null,this.table_id=null,this.row_id=null,this.row_set=null,this.nonce=null,o&&(o.pixel!==void 0&&o.pixel!==null&&(this.pixel=new y.TPixel(o.pixel)),o.vega_table_name!==void 0&&o.vega_table_name!==null&&(this.vega_table_name=o.vega_table_name),o.table_id!==void 0&&o.table_id!==null&&(this.table_id=a.copyList(o.table_id,[null])),o.row_id!==void 0&&o.row_id!==null&&(this.row_id=a.copyList(o.row_id,[null])),o.row_set!==void 0&&o.row_set!==null&&(this.row_set=new y.TRowSet(o.row_set)),o.nonce!==void 0&&o.nonce!==null&&(this.nonce=o.nonce))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRUCT?(this.pixel=new y.TPixel,this.pixel.read(o)):o.skip(b);break;case 2:b==a.Type.STRING?this.vega_table_name=o.readString():o.skip(b);break;case 3:if(b==a.Type.LIST){this.table_id=[];const k=o.readListBegin().size||0;for(let I=0;I<k;++I){let B=null;B=o.readI64(),this.table_id.push(B)}o.readListEnd()}else o.skip(b);break;case 4:if(b==a.Type.LIST){this.row_id=[];const k=o.readListBegin().size||0;for(let I=0;I<k;++I){let B=null;B=o.readI64(),this.row_id.push(B)}o.readListEnd()}else o.skip(b);break;case 5:b==a.Type.STRUCT?(this.row_set=new y.TRowSet,this.row_set.read(o)):o.skip(b);break;case 6:b==a.Type.STRING?this.nonce=o.readString():o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("TPixelTableRowResult"),this.pixel!==null&&this.pixel!==void 0&&(o.writeFieldBegin("pixel",a.Type.STRUCT,1),this.pixel.write(o),o.writeFieldEnd()),this.vega_table_name!==null&&this.vega_table_name!==void 0&&(o.writeFieldBegin("vega_table_name",a.Type.STRING,2),o.writeString(this.vega_table_name),o.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0){o.writeFieldBegin("table_id",a.Type.LIST,3),o.writeListBegin(a.Type.I64,this.table_id.length);for(let T in this.table_id)this.table_id.hasOwnProperty(T)&&(T=this.table_id[T],o.writeI64(T));o.writeListEnd(),o.writeFieldEnd()}if(this.row_id!==null&&this.row_id!==void 0){o.writeFieldBegin("row_id",a.Type.LIST,4),o.writeListBegin(a.Type.I64,this.row_id.length);for(let T in this.row_id)this.row_id.hasOwnProperty(T)&&(T=this.row_id[T],o.writeI64(T));o.writeListEnd(),o.writeFieldEnd()}this.row_set!==null&&this.row_set!==void 0&&(o.writeFieldBegin("row_set",a.Type.STRUCT,5),this.row_set.write(o),o.writeFieldEnd()),this.nonce!==null&&this.nonce!==void 0&&(o.writeFieldBegin("nonce",a.Type.STRING,6),o.writeString(this.nonce),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TRenderResult=class{constructor(o){this.image=null,this.nonce=null,this.execution_time_ms=null,this.render_time_ms=null,this.total_time_ms=null,this.vega_metadata=null,o&&(o.image!==void 0&&o.image!==null&&(this.image=o.image),o.nonce!==void 0&&o.nonce!==null&&(this.nonce=o.nonce),o.execution_time_ms!==void 0&&o.execution_time_ms!==null&&(this.execution_time_ms=o.execution_time_ms),o.render_time_ms!==void 0&&o.render_time_ms!==null&&(this.render_time_ms=o.render_time_ms),o.total_time_ms!==void 0&&o.total_time_ms!==null&&(this.total_time_ms=o.total_time_ms),o.vega_metadata!==void 0&&o.vega_metadata!==null&&(this.vega_metadata=o.vega_metadata))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.image=o.readBinary():o.skip(b);break;case 2:b==a.Type.STRING?this.nonce=o.readString():o.skip(b);break;case 3:b==a.Type.I64?this.execution_time_ms=o.readI64():o.skip(b);break;case 4:b==a.Type.I64?this.render_time_ms=o.readI64():o.skip(b);break;case 5:b==a.Type.I64?this.total_time_ms=o.readI64():o.skip(b);break;case 6:b==a.Type.STRING?this.vega_metadata=o.readString():o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("TRenderResult"),this.image!==null&&this.image!==void 0&&(o.writeFieldBegin("image",a.Type.STRING,1),o.writeBinary(this.image),o.writeFieldEnd()),this.nonce!==null&&this.nonce!==void 0&&(o.writeFieldBegin("nonce",a.Type.STRING,2),o.writeString(this.nonce),o.writeFieldEnd()),this.execution_time_ms!==null&&this.execution_time_ms!==void 0&&(o.writeFieldBegin("execution_time_ms",a.Type.I64,3),o.writeI64(this.execution_time_ms),o.writeFieldEnd()),this.render_time_ms!==null&&this.render_time_ms!==void 0&&(o.writeFieldBegin("render_time_ms",a.Type.I64,4),o.writeI64(this.render_time_ms),o.writeFieldEnd()),this.total_time_ms!==null&&this.total_time_ms!==void 0&&(o.writeFieldBegin("total_time_ms",a.Type.I64,5),o.writeI64(this.total_time_ms),o.writeFieldEnd()),this.vega_metadata!==null&&this.vega_metadata!==void 0&&(o.writeFieldBegin("vega_metadata",a.Type.STRING,6),o.writeString(this.vega_metadata),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TGpuSpecification=class{constructor(o){this.num_sm=null,this.clock_frequency_kHz=null,this.memory=null,this.compute_capability_major=null,this.compute_capability_minor=null,o&&(o.num_sm!==void 0&&o.num_sm!==null&&(this.num_sm=o.num_sm),o.clock_frequency_kHz!==void 0&&o.clock_frequency_kHz!==null&&(this.clock_frequency_kHz=o.clock_frequency_kHz),o.memory!==void 0&&o.memory!==null&&(this.memory=o.memory),o.compute_capability_major!==void 0&&o.compute_capability_major!==null&&(this.compute_capability_major=o.compute_capability_major),o.compute_capability_minor!==void 0&&o.compute_capability_minor!==null&&(this.compute_capability_minor=o.compute_capability_minor))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I32?this.num_sm=o.readI32():o.skip(b);break;case 2:b==a.Type.I64?this.clock_frequency_kHz=o.readI64():o.skip(b);break;case 3:b==a.Type.I64?this.memory=o.readI64():o.skip(b);break;case 4:b==a.Type.I16?this.compute_capability_major=o.readI16():o.skip(b);break;case 5:b==a.Type.I16?this.compute_capability_minor=o.readI16():o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("TGpuSpecification"),this.num_sm!==null&&this.num_sm!==void 0&&(o.writeFieldBegin("num_sm",a.Type.I32,1),o.writeI32(this.num_sm),o.writeFieldEnd()),this.clock_frequency_kHz!==null&&this.clock_frequency_kHz!==void 0&&(o.writeFieldBegin("clock_frequency_kHz",a.Type.I64,2),o.writeI64(this.clock_frequency_kHz),o.writeFieldEnd()),this.memory!==null&&this.memory!==void 0&&(o.writeFieldBegin("memory",a.Type.I64,3),o.writeI64(this.memory),o.writeFieldEnd()),this.compute_capability_major!==null&&this.compute_capability_major!==void 0&&(o.writeFieldBegin("compute_capability_major",a.Type.I16,4),o.writeI16(this.compute_capability_major),o.writeFieldEnd()),this.compute_capability_minor!==null&&this.compute_capability_minor!==void 0&&(o.writeFieldBegin("compute_capability_minor",a.Type.I16,5),o.writeI16(this.compute_capability_minor),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.THardwareInfo=class{constructor(o){this.num_gpu_hw=null,this.num_cpu_hw=null,this.num_gpu_allocated=null,this.start_gpu=null,this.host_name=null,this.gpu_info=null,o&&(o.num_gpu_hw!==void 0&&o.num_gpu_hw!==null&&(this.num_gpu_hw=o.num_gpu_hw),o.num_cpu_hw!==void 0&&o.num_cpu_hw!==null&&(this.num_cpu_hw=o.num_cpu_hw),o.num_gpu_allocated!==void 0&&o.num_gpu_allocated!==null&&(this.num_gpu_allocated=o.num_gpu_allocated),o.start_gpu!==void 0&&o.start_gpu!==null&&(this.start_gpu=o.start_gpu),o.host_name!==void 0&&o.host_name!==null&&(this.host_name=o.host_name),o.gpu_info!==void 0&&o.gpu_info!==null&&(this.gpu_info=a.copyList(o.gpu_info,[y.TGpuSpecification])))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I16?this.num_gpu_hw=o.readI16():o.skip(b);break;case 2:b==a.Type.I16?this.num_cpu_hw=o.readI16():o.skip(b);break;case 3:b==a.Type.I16?this.num_gpu_allocated=o.readI16():o.skip(b);break;case 4:b==a.Type.I16?this.start_gpu=o.readI16():o.skip(b);break;case 5:b==a.Type.STRING?this.host_name=o.readString():o.skip(b);break;case 6:if(b==a.Type.LIST){this.gpu_info=[];const k=o.readListBegin().size||0;for(let I=0;I<k;++I){let B=null;B=new y.TGpuSpecification,B.read(o),this.gpu_info.push(B)}o.readListEnd()}else o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("THardwareInfo"),this.num_gpu_hw!==null&&this.num_gpu_hw!==void 0&&(o.writeFieldBegin("num_gpu_hw",a.Type.I16,1),o.writeI16(this.num_gpu_hw),o.writeFieldEnd()),this.num_cpu_hw!==null&&this.num_cpu_hw!==void 0&&(o.writeFieldBegin("num_cpu_hw",a.Type.I16,2),o.writeI16(this.num_cpu_hw),o.writeFieldEnd()),this.num_gpu_allocated!==null&&this.num_gpu_allocated!==void 0&&(o.writeFieldBegin("num_gpu_allocated",a.Type.I16,3),o.writeI16(this.num_gpu_allocated),o.writeFieldEnd()),this.start_gpu!==null&&this.start_gpu!==void 0&&(o.writeFieldBegin("start_gpu",a.Type.I16,4),o.writeI16(this.start_gpu),o.writeFieldEnd()),this.host_name!==null&&this.host_name!==void 0&&(o.writeFieldBegin("host_name",a.Type.STRING,5),o.writeString(this.host_name),o.writeFieldEnd()),this.gpu_info!==null&&this.gpu_info!==void 0){o.writeFieldBegin("gpu_info",a.Type.LIST,6),o.writeListBegin(a.Type.STRUCT,this.gpu_info.length);for(let T in this.gpu_info)this.gpu_info.hasOwnProperty(T)&&(T=this.gpu_info[T],T.write(o));o.writeListEnd(),o.writeFieldEnd()}o.writeFieldStop(),o.writeStructEnd()}},c.exports.TClusterHardwareInfo=class{constructor(o){this.hardware_info=null,o&&o.hardware_info!==void 0&&o.hardware_info!==null&&(this.hardware_info=a.copyList(o.hardware_info,[y.THardwareInfo]))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:if(b==a.Type.LIST){this.hardware_info=[];const k=o.readListBegin().size||0;for(let I=0;I<k;++I){let B=null;B=new y.THardwareInfo,B.read(o),this.hardware_info.push(B)}o.readListEnd()}else o.skip(b);break;case 0:o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("TClusterHardwareInfo"),this.hardware_info!==null&&this.hardware_info!==void 0){o.writeFieldBegin("hardware_info",a.Type.LIST,1),o.writeListBegin(a.Type.STRUCT,this.hardware_info.length);for(let T in this.hardware_info)this.hardware_info.hasOwnProperty(T)&&(T=this.hardware_info[T],T.write(o));o.writeListEnd(),o.writeFieldEnd()}o.writeFieldStop(),o.writeStructEnd()}},c.exports.TMemoryData=class{constructor(o){this.slab=null,this.start_page=null,this.num_pages=null,this.touch=null,this.chunk_key=null,this.buffer_epoch=null,this.is_free=null,o&&(o.slab!==void 0&&o.slab!==null&&(this.slab=o.slab),o.start_page!==void 0&&o.start_page!==null&&(this.start_page=o.start_page),o.num_pages!==void 0&&o.num_pages!==null&&(this.num_pages=o.num_pages),o.touch!==void 0&&o.touch!==null&&(this.touch=o.touch),o.chunk_key!==void 0&&o.chunk_key!==null&&(this.chunk_key=a.copyList(o.chunk_key,[null])),o.buffer_epoch!==void 0&&o.buffer_epoch!==null&&(this.buffer_epoch=o.buffer_epoch),o.is_free!==void 0&&o.is_free!==null&&(this.is_free=o.is_free))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I64?this.slab=o.readI64():o.skip(b);break;case 2:b==a.Type.I32?this.start_page=o.readI32():o.skip(b);break;case 3:b==a.Type.I64?this.num_pages=o.readI64():o.skip(b);break;case 4:b==a.Type.I32?this.touch=o.readI32():o.skip(b);break;case 5:if(b==a.Type.LIST){this.chunk_key=[];const k=o.readListBegin().size||0;for(let I=0;I<k;++I){let B=null;B=o.readI64(),this.chunk_key.push(B)}o.readListEnd()}else o.skip(b);break;case 6:b==a.Type.I32?this.buffer_epoch=o.readI32():o.skip(b);break;case 7:b==a.Type.BOOL?this.is_free=o.readBool():o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("TMemoryData"),this.slab!==null&&this.slab!==void 0&&(o.writeFieldBegin("slab",a.Type.I64,1),o.writeI64(this.slab),o.writeFieldEnd()),this.start_page!==null&&this.start_page!==void 0&&(o.writeFieldBegin("start_page",a.Type.I32,2),o.writeI32(this.start_page),o.writeFieldEnd()),this.num_pages!==null&&this.num_pages!==void 0&&(o.writeFieldBegin("num_pages",a.Type.I64,3),o.writeI64(this.num_pages),o.writeFieldEnd()),this.touch!==null&&this.touch!==void 0&&(o.writeFieldBegin("touch",a.Type.I32,4),o.writeI32(this.touch),o.writeFieldEnd()),this.chunk_key!==null&&this.chunk_key!==void 0){o.writeFieldBegin("chunk_key",a.Type.LIST,5),o.writeListBegin(a.Type.I64,this.chunk_key.length);for(let T in this.chunk_key)this.chunk_key.hasOwnProperty(T)&&(T=this.chunk_key[T],o.writeI64(T));o.writeListEnd(),o.writeFieldEnd()}this.buffer_epoch!==null&&this.buffer_epoch!==void 0&&(o.writeFieldBegin("buffer_epoch",a.Type.I32,6),o.writeI32(this.buffer_epoch),o.writeFieldEnd()),this.is_free!==null&&this.is_free!==void 0&&(o.writeFieldBegin("is_free",a.Type.BOOL,7),o.writeBool(this.is_free),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TNodeMemoryInfo=class{constructor(o){this.host_name=null,this.page_size=null,this.max_num_pages=null,this.num_pages_allocated=null,this.is_allocation_capped=null,this.node_memory_data=null,o&&(o.host_name!==void 0&&o.host_name!==null&&(this.host_name=o.host_name),o.page_size!==void 0&&o.page_size!==null&&(this.page_size=o.page_size),o.max_num_pages!==void 0&&o.max_num_pages!==null&&(this.max_num_pages=o.max_num_pages),o.num_pages_allocated!==void 0&&o.num_pages_allocated!==null&&(this.num_pages_allocated=o.num_pages_allocated),o.is_allocation_capped!==void 0&&o.is_allocation_capped!==null&&(this.is_allocation_capped=o.is_allocation_capped),o.node_memory_data!==void 0&&o.node_memory_data!==null&&(this.node_memory_data=a.copyList(o.node_memory_data,[y.TMemoryData])))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.host_name=o.readString():o.skip(b);break;case 2:b==a.Type.I64?this.page_size=o.readI64():o.skip(b);break;case 3:b==a.Type.I64?this.max_num_pages=o.readI64():o.skip(b);break;case 4:b==a.Type.I64?this.num_pages_allocated=o.readI64():o.skip(b);break;case 5:b==a.Type.BOOL?this.is_allocation_capped=o.readBool():o.skip(b);break;case 6:if(b==a.Type.LIST){this.node_memory_data=[];const k=o.readListBegin().size||0;for(let I=0;I<k;++I){let B=null;B=new y.TMemoryData,B.read(o),this.node_memory_data.push(B)}o.readListEnd()}else o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("TNodeMemoryInfo"),this.host_name!==null&&this.host_name!==void 0&&(o.writeFieldBegin("host_name",a.Type.STRING,1),o.writeString(this.host_name),o.writeFieldEnd()),this.page_size!==null&&this.page_size!==void 0&&(o.writeFieldBegin("page_size",a.Type.I64,2),o.writeI64(this.page_size),o.writeFieldEnd()),this.max_num_pages!==null&&this.max_num_pages!==void 0&&(o.writeFieldBegin("max_num_pages",a.Type.I64,3),o.writeI64(this.max_num_pages),o.writeFieldEnd()),this.num_pages_allocated!==null&&this.num_pages_allocated!==void 0&&(o.writeFieldBegin("num_pages_allocated",a.Type.I64,4),o.writeI64(this.num_pages_allocated),o.writeFieldEnd()),this.is_allocation_capped!==null&&this.is_allocation_capped!==void 0&&(o.writeFieldBegin("is_allocation_capped",a.Type.BOOL,5),o.writeBool(this.is_allocation_capped),o.writeFieldEnd()),this.node_memory_data!==null&&this.node_memory_data!==void 0){o.writeFieldBegin("node_memory_data",a.Type.LIST,6),o.writeListBegin(a.Type.STRUCT,this.node_memory_data.length);for(let T in this.node_memory_data)this.node_memory_data.hasOwnProperty(T)&&(T=this.node_memory_data[T],T.write(o));o.writeListEnd(),o.writeFieldEnd()}o.writeFieldStop(),o.writeStructEnd()}},c.exports.TTableMeta=class{constructor(o){this.table_name=null,this.num_cols=null,this.is_view=null,this.is_replicated=null,this.shard_count=null,this.max_rows=null,this.table_id=null,this.max_table_id=null,this.col_types=null,this.col_names=null,o&&(o.table_name!==void 0&&o.table_name!==null&&(this.table_name=o.table_name),o.num_cols!==void 0&&o.num_cols!==null&&(this.num_cols=o.num_cols),o.is_view!==void 0&&o.is_view!==null&&(this.is_view=o.is_view),o.is_replicated!==void 0&&o.is_replicated!==null&&(this.is_replicated=o.is_replicated),o.shard_count!==void 0&&o.shard_count!==null&&(this.shard_count=o.shard_count),o.max_rows!==void 0&&o.max_rows!==null&&(this.max_rows=o.max_rows),o.table_id!==void 0&&o.table_id!==null&&(this.table_id=o.table_id),o.max_table_id!==void 0&&o.max_table_id!==null&&(this.max_table_id=o.max_table_id),o.col_types!==void 0&&o.col_types!==null&&(this.col_types=a.copyList(o.col_types,[m.TTypeInfo])),o.col_names!==void 0&&o.col_names!==null&&(this.col_names=a.copyList(o.col_names,[null])))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.table_name=o.readString():o.skip(b);break;case 2:b==a.Type.I64?this.num_cols=o.readI64():o.skip(b);break;case 4:b==a.Type.BOOL?this.is_view=o.readBool():o.skip(b);break;case 5:b==a.Type.BOOL?this.is_replicated=o.readBool():o.skip(b);break;case 6:b==a.Type.I64?this.shard_count=o.readI64():o.skip(b);break;case 7:b==a.Type.I64?this.max_rows=o.readI64():o.skip(b);break;case 8:b==a.Type.I64?this.table_id=o.readI64():o.skip(b);break;case 9:b==a.Type.I64?this.max_table_id=o.readI64():o.skip(b);break;case 10:if(b==a.Type.LIST){this.col_types=[];const k=o.readListBegin().size||0;for(let I=0;I<k;++I){let B=null;B=new m.TTypeInfo,B.read(o),this.col_types.push(B)}o.readListEnd()}else o.skip(b);break;case 11:if(b==a.Type.LIST){this.col_names=[];const k=o.readListBegin().size||0;for(let I=0;I<k;++I){let B=null;B=o.readString(),this.col_names.push(B)}o.readListEnd()}else o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("TTableMeta"),this.table_name!==null&&this.table_name!==void 0&&(o.writeFieldBegin("table_name",a.Type.STRING,1),o.writeString(this.table_name),o.writeFieldEnd()),this.num_cols!==null&&this.num_cols!==void 0&&(o.writeFieldBegin("num_cols",a.Type.I64,2),o.writeI64(this.num_cols),o.writeFieldEnd()),this.is_view!==null&&this.is_view!==void 0&&(o.writeFieldBegin("is_view",a.Type.BOOL,4),o.writeBool(this.is_view),o.writeFieldEnd()),this.is_replicated!==null&&this.is_replicated!==void 0&&(o.writeFieldBegin("is_replicated",a.Type.BOOL,5),o.writeBool(this.is_replicated),o.writeFieldEnd()),this.shard_count!==null&&this.shard_count!==void 0&&(o.writeFieldBegin("shard_count",a.Type.I64,6),o.writeI64(this.shard_count),o.writeFieldEnd()),this.max_rows!==null&&this.max_rows!==void 0&&(o.writeFieldBegin("max_rows",a.Type.I64,7),o.writeI64(this.max_rows),o.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0&&(o.writeFieldBegin("table_id",a.Type.I64,8),o.writeI64(this.table_id),o.writeFieldEnd()),this.max_table_id!==null&&this.max_table_id!==void 0&&(o.writeFieldBegin("max_table_id",a.Type.I64,9),o.writeI64(this.max_table_id),o.writeFieldEnd()),this.col_types!==null&&this.col_types!==void 0){o.writeFieldBegin("col_types",a.Type.LIST,10),o.writeListBegin(a.Type.STRUCT,this.col_types.length);for(let T in this.col_types)this.col_types.hasOwnProperty(T)&&(T=this.col_types[T],T.write(o));o.writeListEnd(),o.writeFieldEnd()}if(this.col_names!==null&&this.col_names!==void 0){o.writeFieldBegin("col_names",a.Type.LIST,11),o.writeListBegin(a.Type.STRING,this.col_names.length);for(let T in this.col_names)this.col_names.hasOwnProperty(T)&&(T=this.col_names[T],o.writeString(T));o.writeListEnd(),o.writeFieldEnd()}o.writeFieldStop(),o.writeStructEnd()}},c.exports.TTableRefreshInfo=class{constructor(o){this.update_type=null,this.timing_type=null,this.start_date_time=null,this.interval_type=null,this.interval_count=null,this.last_refresh_time=null,this.next_refresh_time=null,o&&(o.update_type!==void 0&&o.update_type!==null&&(this.update_type=o.update_type),o.timing_type!==void 0&&o.timing_type!==null&&(this.timing_type=o.timing_type),o.start_date_time!==void 0&&o.start_date_time!==null&&(this.start_date_time=o.start_date_time),o.interval_type!==void 0&&o.interval_type!==null&&(this.interval_type=o.interval_type),o.interval_count!==void 0&&o.interval_count!==null&&(this.interval_count=o.interval_count),o.last_refresh_time!==void 0&&o.last_refresh_time!==null&&(this.last_refresh_time=o.last_refresh_time),o.next_refresh_time!==void 0&&o.next_refresh_time!==null&&(this.next_refresh_time=o.next_refresh_time))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I32?this.update_type=o.readI32():o.skip(b);break;case 2:b==a.Type.I32?this.timing_type=o.readI32():o.skip(b);break;case 3:b==a.Type.STRING?this.start_date_time=o.readString():o.skip(b);break;case 4:b==a.Type.I32?this.interval_type=o.readI32():o.skip(b);break;case 5:b==a.Type.I64?this.interval_count=o.readI64():o.skip(b);break;case 6:b==a.Type.STRING?this.last_refresh_time=o.readString():o.skip(b);break;case 7:b==a.Type.STRING?this.next_refresh_time=o.readString():o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("TTableRefreshInfo"),this.update_type!==null&&this.update_type!==void 0&&(o.writeFieldBegin("update_type",a.Type.I32,1),o.writeI32(this.update_type),o.writeFieldEnd()),this.timing_type!==null&&this.timing_type!==void 0&&(o.writeFieldBegin("timing_type",a.Type.I32,2),o.writeI32(this.timing_type),o.writeFieldEnd()),this.start_date_time!==null&&this.start_date_time!==void 0&&(o.writeFieldBegin("start_date_time",a.Type.STRING,3),o.writeString(this.start_date_time),o.writeFieldEnd()),this.interval_type!==null&&this.interval_type!==void 0&&(o.writeFieldBegin("interval_type",a.Type.I32,4),o.writeI32(this.interval_type),o.writeFieldEnd()),this.interval_count!==null&&this.interval_count!==void 0&&(o.writeFieldBegin("interval_count",a.Type.I64,5),o.writeI64(this.interval_count),o.writeFieldEnd()),this.last_refresh_time!==null&&this.last_refresh_time!==void 0&&(o.writeFieldBegin("last_refresh_time",a.Type.STRING,6),o.writeString(this.last_refresh_time),o.writeFieldEnd()),this.next_refresh_time!==null&&this.next_refresh_time!==void 0&&(o.writeFieldBegin("next_refresh_time",a.Type.STRING,7),o.writeString(this.next_refresh_time),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TTableDetails=class{constructor(o){this.row_desc=null,this.fragment_size=null,this.page_size=null,this.max_rows=null,this.view_sql=null,this.shard_count=null,this.key_metainfo=null,this.is_temporary=null,this.partition_detail=null,this.table_type=null,this.refresh_info=null,o&&(o.row_desc!==void 0&&o.row_desc!==null&&(this.row_desc=a.copyList(o.row_desc,[y.TColumnType])),o.fragment_size!==void 0&&o.fragment_size!==null&&(this.fragment_size=o.fragment_size),o.page_size!==void 0&&o.page_size!==null&&(this.page_size=o.page_size),o.max_rows!==void 0&&o.max_rows!==null&&(this.max_rows=o.max_rows),o.view_sql!==void 0&&o.view_sql!==null&&(this.view_sql=o.view_sql),o.shard_count!==void 0&&o.shard_count!==null&&(this.shard_count=o.shard_count),o.key_metainfo!==void 0&&o.key_metainfo!==null&&(this.key_metainfo=o.key_metainfo),o.is_temporary!==void 0&&o.is_temporary!==null&&(this.is_temporary=o.is_temporary),o.partition_detail!==void 0&&o.partition_detail!==null&&(this.partition_detail=o.partition_detail),o.table_type!==void 0&&o.table_type!==null&&(this.table_type=o.table_type),o.refresh_info!==void 0&&o.refresh_info!==null&&(this.refresh_info=new y.TTableRefreshInfo(o.refresh_info)))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:if(b==a.Type.LIST){this.row_desc=[];const k=o.readListBegin().size||0;for(let I=0;I<k;++I){let B=null;B=new y.TColumnType,B.read(o),this.row_desc.push(B)}o.readListEnd()}else o.skip(b);break;case 2:b==a.Type.I64?this.fragment_size=o.readI64():o.skip(b);break;case 3:b==a.Type.I64?this.page_size=o.readI64():o.skip(b);break;case 4:b==a.Type.I64?this.max_rows=o.readI64():o.skip(b);break;case 5:b==a.Type.STRING?this.view_sql=o.readString():o.skip(b);break;case 6:b==a.Type.I64?this.shard_count=o.readI64():o.skip(b);break;case 7:b==a.Type.STRING?this.key_metainfo=o.readString():o.skip(b);break;case 8:b==a.Type.BOOL?this.is_temporary=o.readBool():o.skip(b);break;case 9:b==a.Type.I32?this.partition_detail=o.readI32():o.skip(b);break;case 10:b==a.Type.I32?this.table_type=o.readI32():o.skip(b);break;case 11:b==a.Type.STRUCT?(this.refresh_info=new y.TTableRefreshInfo,this.refresh_info.read(o)):o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("TTableDetails"),this.row_desc!==null&&this.row_desc!==void 0){o.writeFieldBegin("row_desc",a.Type.LIST,1),o.writeListBegin(a.Type.STRUCT,this.row_desc.length);for(let T in this.row_desc)this.row_desc.hasOwnProperty(T)&&(T=this.row_desc[T],T.write(o));o.writeListEnd(),o.writeFieldEnd()}this.fragment_size!==null&&this.fragment_size!==void 0&&(o.writeFieldBegin("fragment_size",a.Type.I64,2),o.writeI64(this.fragment_size),o.writeFieldEnd()),this.page_size!==null&&this.page_size!==void 0&&(o.writeFieldBegin("page_size",a.Type.I64,3),o.writeI64(this.page_size),o.writeFieldEnd()),this.max_rows!==null&&this.max_rows!==void 0&&(o.writeFieldBegin("max_rows",a.Type.I64,4),o.writeI64(this.max_rows),o.writeFieldEnd()),this.view_sql!==null&&this.view_sql!==void 0&&(o.writeFieldBegin("view_sql",a.Type.STRING,5),o.writeString(this.view_sql),o.writeFieldEnd()),this.shard_count!==null&&this.shard_count!==void 0&&(o.writeFieldBegin("shard_count",a.Type.I64,6),o.writeI64(this.shard_count),o.writeFieldEnd()),this.key_metainfo!==null&&this.key_metainfo!==void 0&&(o.writeFieldBegin("key_metainfo",a.Type.STRING,7),o.writeString(this.key_metainfo),o.writeFieldEnd()),this.is_temporary!==null&&this.is_temporary!==void 0&&(o.writeFieldBegin("is_temporary",a.Type.BOOL,8),o.writeBool(this.is_temporary),o.writeFieldEnd()),this.partition_detail!==null&&this.partition_detail!==void 0&&(o.writeFieldBegin("partition_detail",a.Type.I32,9),o.writeI32(this.partition_detail),o.writeFieldEnd()),this.table_type!==null&&this.table_type!==void 0&&(o.writeFieldBegin("table_type",a.Type.I32,10),o.writeI32(this.table_type),o.writeFieldEnd()),this.refresh_info!==null&&this.refresh_info!==void 0&&(o.writeFieldBegin("refresh_info",a.Type.STRUCT,11),this.refresh_info.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TColumnRange=class{constructor(o){this.type=null,this.col_id=null,this.table_id=null,this.has_nulls=null,this.int_min=null,this.int_max=null,this.bucket=null,this.fp_min=null,this.fp_max=null,o&&(o.type!==void 0&&o.type!==null&&(this.type=o.type),o.col_id!==void 0&&o.col_id!==null&&(this.col_id=o.col_id),o.table_id!==void 0&&o.table_id!==null&&(this.table_id=o.table_id),o.has_nulls!==void 0&&o.has_nulls!==null&&(this.has_nulls=o.has_nulls),o.int_min!==void 0&&o.int_min!==null&&(this.int_min=o.int_min),o.int_max!==void 0&&o.int_max!==null&&(this.int_max=o.int_max),o.bucket!==void 0&&o.bucket!==null&&(this.bucket=o.bucket),o.fp_min!==void 0&&o.fp_min!==null&&(this.fp_min=o.fp_min),o.fp_max!==void 0&&o.fp_max!==null&&(this.fp_max=o.fp_max))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I32?this.type=o.readI32():o.skip(b);break;case 2:b==a.Type.I32?this.col_id=o.readI32():o.skip(b);break;case 3:b==a.Type.I32?this.table_id=o.readI32():o.skip(b);break;case 4:b==a.Type.BOOL?this.has_nulls=o.readBool():o.skip(b);break;case 5:b==a.Type.I64?this.int_min=o.readI64():o.skip(b);break;case 6:b==a.Type.I64?this.int_max=o.readI64():o.skip(b);break;case 7:b==a.Type.I64?this.bucket=o.readI64():o.skip(b);break;case 8:b==a.Type.DOUBLE?this.fp_min=o.readDouble():o.skip(b);break;case 9:b==a.Type.DOUBLE?this.fp_max=o.readDouble():o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("TColumnRange"),this.type!==null&&this.type!==void 0&&(o.writeFieldBegin("type",a.Type.I32,1),o.writeI32(this.type),o.writeFieldEnd()),this.col_id!==null&&this.col_id!==void 0&&(o.writeFieldBegin("col_id",a.Type.I32,2),o.writeI32(this.col_id),o.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0&&(o.writeFieldBegin("table_id",a.Type.I32,3),o.writeI32(this.table_id),o.writeFieldEnd()),this.has_nulls!==null&&this.has_nulls!==void 0&&(o.writeFieldBegin("has_nulls",a.Type.BOOL,4),o.writeBool(this.has_nulls),o.writeFieldEnd()),this.int_min!==null&&this.int_min!==void 0&&(o.writeFieldBegin("int_min",a.Type.I64,5),o.writeI64(this.int_min),o.writeFieldEnd()),this.int_max!==null&&this.int_max!==void 0&&(o.writeFieldBegin("int_max",a.Type.I64,6),o.writeI64(this.int_max),o.writeFieldEnd()),this.bucket!==null&&this.bucket!==void 0&&(o.writeFieldBegin("bucket",a.Type.I64,7),o.writeI64(this.bucket),o.writeFieldEnd()),this.fp_min!==null&&this.fp_min!==void 0&&(o.writeFieldBegin("fp_min",a.Type.DOUBLE,8),o.writeDouble(this.fp_min),o.writeFieldEnd()),this.fp_max!==null&&this.fp_max!==void 0&&(o.writeFieldBegin("fp_max",a.Type.DOUBLE,9),o.writeDouble(this.fp_max),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TDictionaryGeneration=class{constructor(o){this.dict_id=null,this.entry_count=null,o&&(o.dict_id!==void 0&&o.dict_id!==null&&(this.dict_id=o.dict_id),o.entry_count!==void 0&&o.entry_count!==null&&(this.entry_count=o.entry_count))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I32?this.dict_id=o.readI32():o.skip(b);break;case 2:b==a.Type.I64?this.entry_count=o.readI64():o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("TDictionaryGeneration"),this.dict_id!==null&&this.dict_id!==void 0&&(o.writeFieldBegin("dict_id",a.Type.I32,1),o.writeI32(this.dict_id),o.writeFieldEnd()),this.entry_count!==null&&this.entry_count!==void 0&&(o.writeFieldBegin("entry_count",a.Type.I64,2),o.writeI64(this.entry_count),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TTableGeneration=class{constructor(o){this.table_id=null,this.tuple_count=null,this.start_rowid=null,o&&(o.table_id!==void 0&&o.table_id!==null&&(this.table_id=o.table_id),o.tuple_count!==void 0&&o.tuple_count!==null&&(this.tuple_count=o.tuple_count),o.start_rowid!==void 0&&o.start_rowid!==null&&(this.start_rowid=o.start_rowid))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I32?this.table_id=o.readI32():o.skip(b);break;case 2:b==a.Type.I64?this.tuple_count=o.readI64():o.skip(b);break;case 3:b==a.Type.I64?this.start_rowid=o.readI64():o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("TTableGeneration"),this.table_id!==null&&this.table_id!==void 0&&(o.writeFieldBegin("table_id",a.Type.I32,1),o.writeI32(this.table_id),o.writeFieldEnd()),this.tuple_count!==null&&this.tuple_count!==void 0&&(o.writeFieldBegin("tuple_count",a.Type.I64,2),o.writeI64(this.tuple_count),o.writeFieldEnd()),this.start_rowid!==null&&this.start_rowid!==void 0&&(o.writeFieldBegin("start_rowid",a.Type.I64,3),o.writeI64(this.start_rowid),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TPendingQuery=class{constructor(o){this.id=null,this.column_ranges=null,this.dictionary_generations=null,this.table_generations=null,this.parent_session_id=null,o&&(o.id!==void 0&&o.id!==null&&(this.id=o.id),o.column_ranges!==void 0&&o.column_ranges!==null&&(this.column_ranges=a.copyList(o.column_ranges,[y.TColumnRange])),o.dictionary_generations!==void 0&&o.dictionary_generations!==null&&(this.dictionary_generations=a.copyList(o.dictionary_generations,[y.TDictionaryGeneration])),o.table_generations!==void 0&&o.table_generations!==null&&(this.table_generations=a.copyList(o.table_generations,[y.TTableGeneration])),o.parent_session_id!==void 0&&o.parent_session_id!==null&&(this.parent_session_id=o.parent_session_id))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I64?this.id=o.readI64():o.skip(b);break;case 2:if(b==a.Type.LIST){this.column_ranges=[];const k=o.readListBegin().size||0;for(let I=0;I<k;++I){let B=null;B=new y.TColumnRange,B.read(o),this.column_ranges.push(B)}o.readListEnd()}else o.skip(b);break;case 3:if(b==a.Type.LIST){this.dictionary_generations=[];const k=o.readListBegin().size||0;for(let I=0;I<k;++I){let B=null;B=new y.TDictionaryGeneration,B.read(o),this.dictionary_generations.push(B)}o.readListEnd()}else o.skip(b);break;case 4:if(b==a.Type.LIST){this.table_generations=[];const k=o.readListBegin().size||0;for(let I=0;I<k;++I){let B=null;B=new y.TTableGeneration,B.read(o),this.table_generations.push(B)}o.readListEnd()}else o.skip(b);break;case 5:b==a.Type.STRING?this.parent_session_id=o.readString():o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("TPendingQuery"),this.id!==null&&this.id!==void 0&&(o.writeFieldBegin("id",a.Type.I64,1),o.writeI64(this.id),o.writeFieldEnd()),this.column_ranges!==null&&this.column_ranges!==void 0){o.writeFieldBegin("column_ranges",a.Type.LIST,2),o.writeListBegin(a.Type.STRUCT,this.column_ranges.length);for(let T in this.column_ranges)this.column_ranges.hasOwnProperty(T)&&(T=this.column_ranges[T],T.write(o));o.writeListEnd(),o.writeFieldEnd()}if(this.dictionary_generations!==null&&this.dictionary_generations!==void 0){o.writeFieldBegin("dictionary_generations",a.Type.LIST,3),o.writeListBegin(a.Type.STRUCT,this.dictionary_generations.length);for(let T in this.dictionary_generations)this.dictionary_generations.hasOwnProperty(T)&&(T=this.dictionary_generations[T],T.write(o));o.writeListEnd(),o.writeFieldEnd()}if(this.table_generations!==null&&this.table_generations!==void 0){o.writeFieldBegin("table_generations",a.Type.LIST,4),o.writeListBegin(a.Type.STRUCT,this.table_generations.length);for(let T in this.table_generations)this.table_generations.hasOwnProperty(T)&&(T=this.table_generations[T],T.write(o));o.writeListEnd(),o.writeFieldEnd()}this.parent_session_id!==null&&this.parent_session_id!==void 0&&(o.writeFieldBegin("parent_session_id",a.Type.STRING,5),o.writeString(this.parent_session_id),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TVarLen=class{constructor(o){this.payload=null,this.is_null=null,o&&(o.payload!==void 0&&o.payload!==null&&(this.payload=o.payload),o.is_null!==void 0&&o.is_null!==null&&(this.is_null=o.is_null))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.payload=o.readBinary():o.skip(b);break;case 2:b==a.Type.BOOL?this.is_null=o.readBool():o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("TVarLen"),this.payload!==null&&this.payload!==void 0&&(o.writeFieldBegin("payload",a.Type.STRING,1),o.writeBinary(this.payload),o.writeFieldEnd()),this.is_null!==null&&this.is_null!==void 0&&(o.writeFieldBegin("is_null",a.Type.BOOL,2),o.writeBool(this.is_null),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TDataBlockPtr=class{constructor(o){this.fixed_len_data=null,this.var_len_data=null,o&&(o.fixed_len_data!==void 0&&o.fixed_len_data!==null&&(this.fixed_len_data=o.fixed_len_data),o.var_len_data!==void 0&&o.var_len_data!==null&&(this.var_len_data=a.copyList(o.var_len_data,[y.TVarLen])))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.fixed_len_data=o.readBinary():o.skip(b);break;case 2:if(b==a.Type.LIST){this.var_len_data=[];const k=o.readListBegin().size||0;for(let I=0;I<k;++I){let B=null;B=new y.TVarLen,B.read(o),this.var_len_data.push(B)}o.readListEnd()}else o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("TDataBlockPtr"),this.fixed_len_data!==null&&this.fixed_len_data!==void 0&&(o.writeFieldBegin("fixed_len_data",a.Type.STRING,1),o.writeBinary(this.fixed_len_data),o.writeFieldEnd()),this.var_len_data!==null&&this.var_len_data!==void 0){o.writeFieldBegin("var_len_data",a.Type.LIST,2),o.writeListBegin(a.Type.STRUCT,this.var_len_data.length);for(let T in this.var_len_data)this.var_len_data.hasOwnProperty(T)&&(T=this.var_len_data[T],T.write(o));o.writeListEnd(),o.writeFieldEnd()}o.writeFieldStop(),o.writeStructEnd()}},c.exports.TInsertData=class{constructor(o){this.db_id=null,this.table_id=null,this.column_ids=null,this.data=null,this.num_rows=null,this.is_default=null,o&&(o.db_id!==void 0&&o.db_id!==null&&(this.db_id=o.db_id),o.table_id!==void 0&&o.table_id!==null&&(this.table_id=o.table_id),o.column_ids!==void 0&&o.column_ids!==null&&(this.column_ids=a.copyList(o.column_ids,[null])),o.data!==void 0&&o.data!==null&&(this.data=a.copyList(o.data,[y.TDataBlockPtr])),o.num_rows!==void 0&&o.num_rows!==null&&(this.num_rows=o.num_rows),o.is_default!==void 0&&o.is_default!==null&&(this.is_default=a.copyList(o.is_default,[null])))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I32?this.db_id=o.readI32():o.skip(b);break;case 2:b==a.Type.I32?this.table_id=o.readI32():o.skip(b);break;case 3:if(b==a.Type.LIST){this.column_ids=[];const k=o.readListBegin().size||0;for(let I=0;I<k;++I){let B=null;B=o.readI32(),this.column_ids.push(B)}o.readListEnd()}else o.skip(b);break;case 4:if(b==a.Type.LIST){this.data=[];const k=o.readListBegin().size||0;for(let I=0;I<k;++I){let B=null;B=new y.TDataBlockPtr,B.read(o),this.data.push(B)}o.readListEnd()}else o.skip(b);break;case 5:b==a.Type.I64?this.num_rows=o.readI64():o.skip(b);break;case 6:if(b==a.Type.LIST){this.is_default=[];const k=o.readListBegin().size||0;for(let I=0;I<k;++I){let B=null;B=o.readBool(),this.is_default.push(B)}o.readListEnd()}else o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("TInsertData"),this.db_id!==null&&this.db_id!==void 0&&(o.writeFieldBegin("db_id",a.Type.I32,1),o.writeI32(this.db_id),o.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0&&(o.writeFieldBegin("table_id",a.Type.I32,2),o.writeI32(this.table_id),o.writeFieldEnd()),this.column_ids!==null&&this.column_ids!==void 0){o.writeFieldBegin("column_ids",a.Type.LIST,3),o.writeListBegin(a.Type.I32,this.column_ids.length);for(let T in this.column_ids)this.column_ids.hasOwnProperty(T)&&(T=this.column_ids[T],o.writeI32(T));o.writeListEnd(),o.writeFieldEnd()}if(this.data!==null&&this.data!==void 0){o.writeFieldBegin("data",a.Type.LIST,4),o.writeListBegin(a.Type.STRUCT,this.data.length);for(let T in this.data)this.data.hasOwnProperty(T)&&(T=this.data[T],T.write(o));o.writeListEnd(),o.writeFieldEnd()}if(this.num_rows!==null&&this.num_rows!==void 0&&(o.writeFieldBegin("num_rows",a.Type.I64,5),o.writeI64(this.num_rows),o.writeFieldEnd()),this.is_default!==null&&this.is_default!==void 0){o.writeFieldBegin("is_default",a.Type.LIST,6),o.writeListBegin(a.Type.BOOL,this.is_default.length);for(let T in this.is_default)this.is_default.hasOwnProperty(T)&&(T=this.is_default[T],o.writeBool(T));o.writeListEnd(),o.writeFieldEnd()}o.writeFieldStop(),o.writeStructEnd()}},c.exports.TChunkData=class{constructor(o){this.data_buffer=null,this.index_buffer=null,o&&(o.data_buffer!==void 0&&o.data_buffer!==null&&(this.data_buffer=o.data_buffer),o.index_buffer!==void 0&&o.index_buffer!==null&&(this.index_buffer=o.index_buffer))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.data_buffer=o.readBinary():o.skip(b);break;case 2:b==a.Type.STRING?this.index_buffer=o.readBinary():o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("TChunkData"),this.data_buffer!==null&&this.data_buffer!==void 0&&(o.writeFieldBegin("data_buffer",a.Type.STRING,1),o.writeBinary(this.data_buffer),o.writeFieldEnd()),this.index_buffer!==null&&this.index_buffer!==void 0&&(o.writeFieldBegin("index_buffer",a.Type.STRING,2),o.writeBinary(this.index_buffer),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TInsertChunks=class{constructor(o){this.db_id=null,this.table_id=null,this.data=null,this.valid_indices=null,this.num_rows=null,o&&(o.db_id!==void 0&&o.db_id!==null&&(this.db_id=o.db_id),o.table_id!==void 0&&o.table_id!==null&&(this.table_id=o.table_id),o.data!==void 0&&o.data!==null&&(this.data=a.copyList(o.data,[y.TChunkData])),o.valid_indices!==void 0&&o.valid_indices!==null&&(this.valid_indices=a.copyList(o.valid_indices,[null])),o.num_rows!==void 0&&o.num_rows!==null&&(this.num_rows=o.num_rows))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I32?this.db_id=o.readI32():o.skip(b);break;case 2:b==a.Type.I32?this.table_id=o.readI32():o.skip(b);break;case 3:if(b==a.Type.LIST){this.data=[];const k=o.readListBegin().size||0;for(let I=0;I<k;++I){let B=null;B=new y.TChunkData,B.read(o),this.data.push(B)}o.readListEnd()}else o.skip(b);break;case 4:if(b==a.Type.LIST){this.valid_indices=[];const k=o.readListBegin().size||0;for(let I=0;I<k;++I){let B=null;B=o.readI64(),this.valid_indices.push(B)}o.readListEnd()}else o.skip(b);break;case 5:b==a.Type.I64?this.num_rows=o.readI64():o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("TInsertChunks"),this.db_id!==null&&this.db_id!==void 0&&(o.writeFieldBegin("db_id",a.Type.I32,1),o.writeI32(this.db_id),o.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0&&(o.writeFieldBegin("table_id",a.Type.I32,2),o.writeI32(this.table_id),o.writeFieldEnd()),this.data!==null&&this.data!==void 0){o.writeFieldBegin("data",a.Type.LIST,3),o.writeListBegin(a.Type.STRUCT,this.data.length);for(let T in this.data)this.data.hasOwnProperty(T)&&(T=this.data[T],T.write(o));o.writeListEnd(),o.writeFieldEnd()}if(this.valid_indices!==null&&this.valid_indices!==void 0){o.writeFieldBegin("valid_indices",a.Type.LIST,4),o.writeListBegin(a.Type.I64,this.valid_indices.length);for(let T in this.valid_indices)this.valid_indices.hasOwnProperty(T)&&(T=this.valid_indices[T],o.writeI64(T));o.writeListEnd(),o.writeFieldEnd()}this.num_rows!==null&&this.num_rows!==void 0&&(o.writeFieldBegin("num_rows",a.Type.I64,5),o.writeI64(this.num_rows),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TPendingRenderQuery=class{constructor(o){this.id=null,o&&o.id!==void 0&&o.id!==null&&(this.id=o.id)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I64?this.id=o.readI64():o.skip(b);break;case 0:o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("TPendingRenderQuery"),this.id!==null&&this.id!==void 0&&(o.writeFieldBegin("id",a.Type.I64,1),o.writeI64(this.id),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TRenderParseResult=class{constructor(o){this.merge_type=null,this.node_id=null,this.execution_time_ms=null,this.render_time_ms=null,this.total_time_ms=null,o&&(o.merge_type!==void 0&&o.merge_type!==null&&(this.merge_type=o.merge_type),o.node_id!==void 0&&o.node_id!==null&&(this.node_id=o.node_id),o.execution_time_ms!==void 0&&o.execution_time_ms!==null&&(this.execution_time_ms=o.execution_time_ms),o.render_time_ms!==void 0&&o.render_time_ms!==null&&(this.render_time_ms=o.render_time_ms),o.total_time_ms!==void 0&&o.total_time_ms!==null&&(this.total_time_ms=o.total_time_ms))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I32?this.merge_type=o.readI32():o.skip(b);break;case 2:b==a.Type.I32?this.node_id=o.readI32():o.skip(b);break;case 3:b==a.Type.I64?this.execution_time_ms=o.readI64():o.skip(b);break;case 4:b==a.Type.I64?this.render_time_ms=o.readI64():o.skip(b);break;case 5:b==a.Type.I64?this.total_time_ms=o.readI64():o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("TRenderParseResult"),this.merge_type!==null&&this.merge_type!==void 0&&(o.writeFieldBegin("merge_type",a.Type.I32,1),o.writeI32(this.merge_type),o.writeFieldEnd()),this.node_id!==null&&this.node_id!==void 0&&(o.writeFieldBegin("node_id",a.Type.I32,2),o.writeI32(this.node_id),o.writeFieldEnd()),this.execution_time_ms!==null&&this.execution_time_ms!==void 0&&(o.writeFieldBegin("execution_time_ms",a.Type.I64,3),o.writeI64(this.execution_time_ms),o.writeFieldEnd()),this.render_time_ms!==null&&this.render_time_ms!==void 0&&(o.writeFieldBegin("render_time_ms",a.Type.I64,4),o.writeI64(this.render_time_ms),o.writeFieldEnd()),this.total_time_ms!==null&&this.total_time_ms!==void 0&&(o.writeFieldBegin("total_time_ms",a.Type.I64,5),o.writeI64(this.total_time_ms),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TRawRenderPassDataResult=class{constructor(o){this.num_pixel_channels=null,this.num_pixel_samples=null,this.pixels=null,this.row_ids_A=null,this.row_ids_B=null,this.table_ids=null,this.accum_data=null,this.accum_depth=null,o&&(o.num_pixel_channels!==void 0&&o.num_pixel_channels!==null&&(this.num_pixel_channels=o.num_pixel_channels),o.num_pixel_samples!==void 0&&o.num_pixel_samples!==null&&(this.num_pixel_samples=o.num_pixel_samples),o.pixels!==void 0&&o.pixels!==null&&(this.pixels=o.pixels),o.row_ids_A!==void 0&&o.row_ids_A!==null&&(this.row_ids_A=o.row_ids_A),o.row_ids_B!==void 0&&o.row_ids_B!==null&&(this.row_ids_B=o.row_ids_B),o.table_ids!==void 0&&o.table_ids!==null&&(this.table_ids=o.table_ids),o.accum_data!==void 0&&o.accum_data!==null&&(this.accum_data=o.accum_data),o.accum_depth!==void 0&&o.accum_depth!==null&&(this.accum_depth=o.accum_depth))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I32?this.num_pixel_channels=o.readI32():o.skip(b);break;case 2:b==a.Type.I32?this.num_pixel_samples=o.readI32():o.skip(b);break;case 3:b==a.Type.STRING?this.pixels=o.readBinary():o.skip(b);break;case 4:b==a.Type.STRING?this.row_ids_A=o.readBinary():o.skip(b);break;case 5:b==a.Type.STRING?this.row_ids_B=o.readBinary():o.skip(b);break;case 6:b==a.Type.STRING?this.table_ids=o.readBinary():o.skip(b);break;case 7:b==a.Type.STRING?this.accum_data=o.readBinary():o.skip(b);break;case 8:b==a.Type.I32?this.accum_depth=o.readI32():o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("TRawRenderPassDataResult"),this.num_pixel_channels!==null&&this.num_pixel_channels!==void 0&&(o.writeFieldBegin("num_pixel_channels",a.Type.I32,1),o.writeI32(this.num_pixel_channels),o.writeFieldEnd()),this.num_pixel_samples!==null&&this.num_pixel_samples!==void 0&&(o.writeFieldBegin("num_pixel_samples",a.Type.I32,2),o.writeI32(this.num_pixel_samples),o.writeFieldEnd()),this.pixels!==null&&this.pixels!==void 0&&(o.writeFieldBegin("pixels",a.Type.STRING,3),o.writeBinary(this.pixels),o.writeFieldEnd()),this.row_ids_A!==null&&this.row_ids_A!==void 0&&(o.writeFieldBegin("row_ids_A",a.Type.STRING,4),o.writeBinary(this.row_ids_A),o.writeFieldEnd()),this.row_ids_B!==null&&this.row_ids_B!==void 0&&(o.writeFieldBegin("row_ids_B",a.Type.STRING,5),o.writeBinary(this.row_ids_B),o.writeFieldEnd()),this.table_ids!==null&&this.table_ids!==void 0&&(o.writeFieldBegin("table_ids",a.Type.STRING,6),o.writeBinary(this.table_ids),o.writeFieldEnd()),this.accum_data!==null&&this.accum_data!==void 0&&(o.writeFieldBegin("accum_data",a.Type.STRING,7),o.writeBinary(this.accum_data),o.writeFieldEnd()),this.accum_depth!==null&&this.accum_depth!==void 0&&(o.writeFieldBegin("accum_depth",a.Type.I32,8),o.writeI32(this.accum_depth),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TRawPixelData=class{constructor(o){this.width=null,this.height=null,this.render_pass_map=null,o&&(o.width!==void 0&&o.width!==null&&(this.width=o.width),o.height!==void 0&&o.height!==null&&(this.height=o.height),o.render_pass_map!==void 0&&o.render_pass_map!==null&&(this.render_pass_map=a.copyMap(o.render_pass_map,[y.TRawRenderPassDataResult])))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I32?this.width=o.readI32():o.skip(b);break;case 2:b==a.Type.I32?this.height=o.readI32():o.skip(b);break;case 3:if(b==a.Type.MAP){this.render_pass_map={};const k=o.readMapBegin().size||0;for(let I=0;I<k;++I){let B=null,O=null;B=o.readI32(),O=new y.TRawRenderPassDataResult,O.read(o),this.render_pass_map[B]=O}o.readMapEnd()}else o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("TRawPixelData"),this.width!==null&&this.width!==void 0&&(o.writeFieldBegin("width",a.Type.I32,1),o.writeI32(this.width),o.writeFieldEnd()),this.height!==null&&this.height!==void 0&&(o.writeFieldBegin("height",a.Type.I32,2),o.writeI32(this.height),o.writeFieldEnd()),this.render_pass_map!==null&&this.render_pass_map!==void 0){o.writeFieldBegin("render_pass_map",a.Type.MAP,3),o.writeMapBegin(a.Type.I32,a.Type.STRUCT,a.objectLength(this.render_pass_map));for(let T in this.render_pass_map)if(this.render_pass_map.hasOwnProperty(T)){let b=this.render_pass_map[T];o.writeI32(T),b.write(o)}o.writeMapEnd(),o.writeFieldEnd()}o.writeFieldStop(),o.writeStructEnd()}},c.exports.TRenderDatum=class{constructor(o){this.type=null,this.cnt=null,this.value=null,o&&(o.type!==void 0&&o.type!==null&&(this.type=o.type),o.cnt!==void 0&&o.cnt!==null&&(this.cnt=o.cnt),o.value!==void 0&&o.value!==null&&(this.value=o.value))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I32?this.type=o.readI32():o.skip(b);break;case 2:b==a.Type.I32?this.cnt=o.readI32():o.skip(b);break;case 3:b==a.Type.STRING?this.value=o.readBinary():o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("TRenderDatum"),this.type!==null&&this.type!==void 0&&(o.writeFieldBegin("type",a.Type.I32,1),o.writeI32(this.type),o.writeFieldEnd()),this.cnt!==null&&this.cnt!==void 0&&(o.writeFieldBegin("cnt",a.Type.I32,2),o.writeI32(this.cnt),o.writeFieldEnd()),this.value!==null&&this.value!==void 0&&(o.writeFieldBegin("value",a.Type.STRING,3),o.writeBinary(this.value),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TRenderStepResult=class{constructor(o){this.merge_data=null,this.raw_pixel_data=null,this.execution_time_ms=null,this.render_time_ms=null,this.total_time_ms=null,o&&(o.merge_data!==void 0&&o.merge_data!==null&&(this.merge_data=a.copyMap(o.merge_data,[a.copyMap,a.copyMap,a.copyMap,a.copyList,y.TRenderDatum])),o.raw_pixel_data!==void 0&&o.raw_pixel_data!==null&&(this.raw_pixel_data=new y.TRawPixelData(o.raw_pixel_data)),o.execution_time_ms!==void 0&&o.execution_time_ms!==null&&(this.execution_time_ms=o.execution_time_ms),o.render_time_ms!==void 0&&o.render_time_ms!==null&&(this.render_time_ms=o.render_time_ms),o.total_time_ms!==void 0&&o.total_time_ms!==null&&(this.total_time_ms=o.total_time_ms))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:if(b==a.Type.MAP){this.merge_data={};const k=o.readMapBegin().size||0;for(let I=0;I<k;++I){let B=null,O=null;B=o.readString(),O={};const R=o.readMapBegin().size||0;for(let P=0;P<R;++P){let D=null,U=null;D=o.readString(),U={};const z=o.readMapBegin().size||0;for(let W=0;W<z;++W){let H=null,V=null;H=o.readString(),V={};const G=o.readMapBegin().size||0;for(let oe=0;oe<G;++oe){let he=null,ne=null;he=o.readString(),ne=[];const de=o.readListBegin().size||0;for(let ke=0;ke<de;++ke){let Ue=null;Ue=new y.TRenderDatum,Ue.read(o),ne.push(Ue)}o.readListEnd(),V[he]=ne}o.readMapEnd(),U[H]=V}o.readMapEnd(),O[D]=U}o.readMapEnd(),this.merge_data[B]=O}o.readMapEnd()}else o.skip(b);break;case 2:b==a.Type.STRUCT?(this.raw_pixel_data=new y.TRawPixelData,this.raw_pixel_data.read(o)):o.skip(b);break;case 3:b==a.Type.I64?this.execution_time_ms=o.readI64():o.skip(b);break;case 4:b==a.Type.I64?this.render_time_ms=o.readI64():o.skip(b);break;case 5:b==a.Type.I64?this.total_time_ms=o.readI64():o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("TRenderStepResult"),this.merge_data!==null&&this.merge_data!==void 0){o.writeFieldBegin("merge_data",a.Type.MAP,1),o.writeMapBegin(a.Type.STRING,a.Type.MAP,a.objectLength(this.merge_data));for(let T in this.merge_data)if(this.merge_data.hasOwnProperty(T)){let b=this.merge_data[T];o.writeString(T),o.writeMapBegin(a.Type.STRING,a.Type.MAP,a.objectLength(b));for(let S in b)if(b.hasOwnProperty(S)){let x=b[S];o.writeString(S),o.writeMapBegin(a.Type.STRING,a.Type.MAP,a.objectLength(x));for(let k in x)if(x.hasOwnProperty(k)){let I=x[k];o.writeString(k),o.writeMapBegin(a.Type.STRING,a.Type.LIST,a.objectLength(I));for(let B in I)if(I.hasOwnProperty(B)){let O=I[B];o.writeString(B),o.writeListBegin(a.Type.STRUCT,O.length);for(let A in O)O.hasOwnProperty(A)&&(A=O[A],A.write(o));o.writeListEnd()}o.writeMapEnd()}o.writeMapEnd()}o.writeMapEnd()}o.writeMapEnd(),o.writeFieldEnd()}this.raw_pixel_data!==null&&this.raw_pixel_data!==void 0&&(o.writeFieldBegin("raw_pixel_data",a.Type.STRUCT,2),this.raw_pixel_data.write(o),o.writeFieldEnd()),this.execution_time_ms!==null&&this.execution_time_ms!==void 0&&(o.writeFieldBegin("execution_time_ms",a.Type.I64,3),o.writeI64(this.execution_time_ms),o.writeFieldEnd()),this.render_time_ms!==null&&this.render_time_ms!==void 0&&(o.writeFieldBegin("render_time_ms",a.Type.I64,4),o.writeI64(this.render_time_ms),o.writeFieldEnd()),this.total_time_ms!==null&&this.total_time_ms!==void 0&&(o.writeFieldBegin("total_time_ms",a.Type.I64,5),o.writeI64(this.total_time_ms),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TDatabasePermissions=class{constructor(o){this.create_=null,this.delete_=null,this.view_sql_editor_=null,this.access_=null,o&&(o.create_!==void 0&&o.create_!==null&&(this.create_=o.create_),o.delete_!==void 0&&o.delete_!==null&&(this.delete_=o.delete_),o.view_sql_editor_!==void 0&&o.view_sql_editor_!==null&&(this.view_sql_editor_=o.view_sql_editor_),o.access_!==void 0&&o.access_!==null&&(this.access_=o.access_))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.BOOL?this.create_=o.readBool():o.skip(b);break;case 2:b==a.Type.BOOL?this.delete_=o.readBool():o.skip(b);break;case 3:b==a.Type.BOOL?this.view_sql_editor_=o.readBool():o.skip(b);break;case 4:b==a.Type.BOOL?this.access_=o.readBool():o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("TDatabasePermissions"),this.create_!==null&&this.create_!==void 0&&(o.writeFieldBegin("create_",a.Type.BOOL,1),o.writeBool(this.create_),o.writeFieldEnd()),this.delete_!==null&&this.delete_!==void 0&&(o.writeFieldBegin("delete_",a.Type.BOOL,2),o.writeBool(this.delete_),o.writeFieldEnd()),this.view_sql_editor_!==null&&this.view_sql_editor_!==void 0&&(o.writeFieldBegin("view_sql_editor_",a.Type.BOOL,3),o.writeBool(this.view_sql_editor_),o.writeFieldEnd()),this.access_!==null&&this.access_!==void 0&&(o.writeFieldBegin("access_",a.Type.BOOL,4),o.writeBool(this.access_),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TTablePermissions=class{constructor(o){this.create_=null,this.drop_=null,this.select_=null,this.insert_=null,this.update_=null,this.delete_=null,this.truncate_=null,this.alter_=null,o&&(o.create_!==void 0&&o.create_!==null&&(this.create_=o.create_),o.drop_!==void 0&&o.drop_!==null&&(this.drop_=o.drop_),o.select_!==void 0&&o.select_!==null&&(this.select_=o.select_),o.insert_!==void 0&&o.insert_!==null&&(this.insert_=o.insert_),o.update_!==void 0&&o.update_!==null&&(this.update_=o.update_),o.delete_!==void 0&&o.delete_!==null&&(this.delete_=o.delete_),o.truncate_!==void 0&&o.truncate_!==null&&(this.truncate_=o.truncate_),o.alter_!==void 0&&o.alter_!==null&&(this.alter_=o.alter_))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.BOOL?this.create_=o.readBool():o.skip(b);break;case 2:b==a.Type.BOOL?this.drop_=o.readBool():o.skip(b);break;case 3:b==a.Type.BOOL?this.select_=o.readBool():o.skip(b);break;case 4:b==a.Type.BOOL?this.insert_=o.readBool():o.skip(b);break;case 5:b==a.Type.BOOL?this.update_=o.readBool():o.skip(b);break;case 6:b==a.Type.BOOL?this.delete_=o.readBool():o.skip(b);break;case 7:b==a.Type.BOOL?this.truncate_=o.readBool():o.skip(b);break;case 8:b==a.Type.BOOL?this.alter_=o.readBool():o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("TTablePermissions"),this.create_!==null&&this.create_!==void 0&&(o.writeFieldBegin("create_",a.Type.BOOL,1),o.writeBool(this.create_),o.writeFieldEnd()),this.drop_!==null&&this.drop_!==void 0&&(o.writeFieldBegin("drop_",a.Type.BOOL,2),o.writeBool(this.drop_),o.writeFieldEnd()),this.select_!==null&&this.select_!==void 0&&(o.writeFieldBegin("select_",a.Type.BOOL,3),o.writeBool(this.select_),o.writeFieldEnd()),this.insert_!==null&&this.insert_!==void 0&&(o.writeFieldBegin("insert_",a.Type.BOOL,4),o.writeBool(this.insert_),o.writeFieldEnd()),this.update_!==null&&this.update_!==void 0&&(o.writeFieldBegin("update_",a.Type.BOOL,5),o.writeBool(this.update_),o.writeFieldEnd()),this.delete_!==null&&this.delete_!==void 0&&(o.writeFieldBegin("delete_",a.Type.BOOL,6),o.writeBool(this.delete_),o.writeFieldEnd()),this.truncate_!==null&&this.truncate_!==void 0&&(o.writeFieldBegin("truncate_",a.Type.BOOL,7),o.writeBool(this.truncate_),o.writeFieldEnd()),this.alter_!==null&&this.alter_!==void 0&&(o.writeFieldBegin("alter_",a.Type.BOOL,8),o.writeBool(this.alter_),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TDashboardPermissions=class{constructor(o){this.create_=null,this.delete_=null,this.view_=null,this.edit_=null,o&&(o.create_!==void 0&&o.create_!==null&&(this.create_=o.create_),o.delete_!==void 0&&o.delete_!==null&&(this.delete_=o.delete_),o.view_!==void 0&&o.view_!==null&&(this.view_=o.view_),o.edit_!==void 0&&o.edit_!==null&&(this.edit_=o.edit_))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.BOOL?this.create_=o.readBool():o.skip(b);break;case 2:b==a.Type.BOOL?this.delete_=o.readBool():o.skip(b);break;case 3:b==a.Type.BOOL?this.view_=o.readBool():o.skip(b);break;case 4:b==a.Type.BOOL?this.edit_=o.readBool():o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("TDashboardPermissions"),this.create_!==null&&this.create_!==void 0&&(o.writeFieldBegin("create_",a.Type.BOOL,1),o.writeBool(this.create_),o.writeFieldEnd()),this.delete_!==null&&this.delete_!==void 0&&(o.writeFieldBegin("delete_",a.Type.BOOL,2),o.writeBool(this.delete_),o.writeFieldEnd()),this.view_!==null&&this.view_!==void 0&&(o.writeFieldBegin("view_",a.Type.BOOL,3),o.writeBool(this.view_),o.writeFieldEnd()),this.edit_!==null&&this.edit_!==void 0&&(o.writeFieldBegin("edit_",a.Type.BOOL,4),o.writeBool(this.edit_),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TViewPermissions=class{constructor(o){this.create_=null,this.drop_=null,this.select_=null,this.insert_=null,this.update_=null,this.delete_=null,o&&(o.create_!==void 0&&o.create_!==null&&(this.create_=o.create_),o.drop_!==void 0&&o.drop_!==null&&(this.drop_=o.drop_),o.select_!==void 0&&o.select_!==null&&(this.select_=o.select_),o.insert_!==void 0&&o.insert_!==null&&(this.insert_=o.insert_),o.update_!==void 0&&o.update_!==null&&(this.update_=o.update_),o.delete_!==void 0&&o.delete_!==null&&(this.delete_=o.delete_))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.BOOL?this.create_=o.readBool():o.skip(b);break;case 2:b==a.Type.BOOL?this.drop_=o.readBool():o.skip(b);break;case 3:b==a.Type.BOOL?this.select_=o.readBool():o.skip(b);break;case 4:b==a.Type.BOOL?this.insert_=o.readBool():o.skip(b);break;case 5:b==a.Type.BOOL?this.update_=o.readBool():o.skip(b);break;case 6:b==a.Type.BOOL?this.delete_=o.readBool():o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("TViewPermissions"),this.create_!==null&&this.create_!==void 0&&(o.writeFieldBegin("create_",a.Type.BOOL,1),o.writeBool(this.create_),o.writeFieldEnd()),this.drop_!==null&&this.drop_!==void 0&&(o.writeFieldBegin("drop_",a.Type.BOOL,2),o.writeBool(this.drop_),o.writeFieldEnd()),this.select_!==null&&this.select_!==void 0&&(o.writeFieldBegin("select_",a.Type.BOOL,3),o.writeBool(this.select_),o.writeFieldEnd()),this.insert_!==null&&this.insert_!==void 0&&(o.writeFieldBegin("insert_",a.Type.BOOL,4),o.writeBool(this.insert_),o.writeFieldEnd()),this.update_!==null&&this.update_!==void 0&&(o.writeFieldBegin("update_",a.Type.BOOL,5),o.writeBool(this.update_),o.writeFieldEnd()),this.delete_!==null&&this.delete_!==void 0&&(o.writeFieldBegin("delete_",a.Type.BOOL,6),o.writeBool(this.delete_),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TServerPermissions=class{constructor(o){this.create_=null,this.drop_=null,this.alter_=null,this.usage_=null,o&&(o.create_!==void 0&&o.create_!==null&&(this.create_=o.create_),o.drop_!==void 0&&o.drop_!==null&&(this.drop_=o.drop_),o.alter_!==void 0&&o.alter_!==null&&(this.alter_=o.alter_),o.usage_!==void 0&&o.usage_!==null&&(this.usage_=o.usage_))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.BOOL?this.create_=o.readBool():o.skip(b);break;case 2:b==a.Type.BOOL?this.drop_=o.readBool():o.skip(b);break;case 3:b==a.Type.BOOL?this.alter_=o.readBool():o.skip(b);break;case 4:b==a.Type.BOOL?this.usage_=o.readBool():o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("TServerPermissions"),this.create_!==null&&this.create_!==void 0&&(o.writeFieldBegin("create_",a.Type.BOOL,1),o.writeBool(this.create_),o.writeFieldEnd()),this.drop_!==null&&this.drop_!==void 0&&(o.writeFieldBegin("drop_",a.Type.BOOL,2),o.writeBool(this.drop_),o.writeFieldEnd()),this.alter_!==null&&this.alter_!==void 0&&(o.writeFieldBegin("alter_",a.Type.BOOL,3),o.writeBool(this.alter_),o.writeFieldEnd()),this.usage_!==null&&this.usage_!==void 0&&(o.writeFieldBegin("usage_",a.Type.BOOL,4),o.writeBool(this.usage_),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TDBObjectPermissions=class{constructor(o){this.database_permissions_=null,this.table_permissions_=null,this.dashboard_permissions_=null,this.view_permissions_=null,this.server_permissions_=null,o&&(o.database_permissions_!==void 0&&o.database_permissions_!==null&&(this.database_permissions_=new y.TDatabasePermissions(o.database_permissions_)),o.table_permissions_!==void 0&&o.table_permissions_!==null&&(this.table_permissions_=new y.TTablePermissions(o.table_permissions_)),o.dashboard_permissions_!==void 0&&o.dashboard_permissions_!==null&&(this.dashboard_permissions_=new y.TDashboardPermissions(o.dashboard_permissions_)),o.view_permissions_!==void 0&&o.view_permissions_!==null&&(this.view_permissions_=new y.TViewPermissions(o.view_permissions_)),o.server_permissions_!==void 0&&o.server_permissions_!==null&&(this.server_permissions_=new y.TServerPermissions(o.server_permissions_)))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRUCT?(this.database_permissions_=new y.TDatabasePermissions,this.database_permissions_.read(o)):o.skip(b);break;case 2:b==a.Type.STRUCT?(this.table_permissions_=new y.TTablePermissions,this.table_permissions_.read(o)):o.skip(b);break;case 3:b==a.Type.STRUCT?(this.dashboard_permissions_=new y.TDashboardPermissions,this.dashboard_permissions_.read(o)):o.skip(b);break;case 4:b==a.Type.STRUCT?(this.view_permissions_=new y.TViewPermissions,this.view_permissions_.read(o)):o.skip(b);break;case 5:b==a.Type.STRUCT?(this.server_permissions_=new y.TServerPermissions,this.server_permissions_.read(o)):o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("TDBObjectPermissions"),this.database_permissions_!==null&&this.database_permissions_!==void 0&&(o.writeFieldBegin("database_permissions_",a.Type.STRUCT,1),this.database_permissions_.write(o),o.writeFieldEnd()),this.table_permissions_!==null&&this.table_permissions_!==void 0&&(o.writeFieldBegin("table_permissions_",a.Type.STRUCT,2),this.table_permissions_.write(o),o.writeFieldEnd()),this.dashboard_permissions_!==null&&this.dashboard_permissions_!==void 0&&(o.writeFieldBegin("dashboard_permissions_",a.Type.STRUCT,3),this.dashboard_permissions_.write(o),o.writeFieldEnd()),this.view_permissions_!==null&&this.view_permissions_!==void 0&&(o.writeFieldBegin("view_permissions_",a.Type.STRUCT,4),this.view_permissions_.write(o),o.writeFieldEnd()),this.server_permissions_!==null&&this.server_permissions_!==void 0&&(o.writeFieldBegin("server_permissions_",a.Type.STRUCT,5),this.server_permissions_.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TDBObject=class{constructor(o){this.objectName=null,this.objectType=null,this.privs=null,this.grantee=null,this.privilegeObjectType=null,this.objectId=null,o&&(o.objectName!==void 0&&o.objectName!==null&&(this.objectName=o.objectName),o.objectType!==void 0&&o.objectType!==null&&(this.objectType=o.objectType),o.privs!==void 0&&o.privs!==null&&(this.privs=a.copyList(o.privs,[null])),o.grantee!==void 0&&o.grantee!==null&&(this.grantee=o.grantee),o.privilegeObjectType!==void 0&&o.privilegeObjectType!==null&&(this.privilegeObjectType=o.privilegeObjectType),o.objectId!==void 0&&o.objectId!==null&&(this.objectId=o.objectId))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.objectName=o.readString():o.skip(b);break;case 2:b==a.Type.I32?this.objectType=o.readI32():o.skip(b);break;case 3:if(b==a.Type.LIST){this.privs=[];const k=o.readListBegin().size||0;for(let I=0;I<k;++I){let B=null;B=o.readBool(),this.privs.push(B)}o.readListEnd()}else o.skip(b);break;case 4:b==a.Type.STRING?this.grantee=o.readString():o.skip(b);break;case 5:b==a.Type.I32?this.privilegeObjectType=o.readI32():o.skip(b);break;case 6:b==a.Type.I32?this.objectId=o.readI32():o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("TDBObject"),this.objectName!==null&&this.objectName!==void 0&&(o.writeFieldBegin("objectName",a.Type.STRING,1),o.writeString(this.objectName),o.writeFieldEnd()),this.objectType!==null&&this.objectType!==void 0&&(o.writeFieldBegin("objectType",a.Type.I32,2),o.writeI32(this.objectType),o.writeFieldEnd()),this.privs!==null&&this.privs!==void 0){o.writeFieldBegin("privs",a.Type.LIST,3),o.writeListBegin(a.Type.BOOL,this.privs.length);for(let T in this.privs)this.privs.hasOwnProperty(T)&&(T=this.privs[T],o.writeBool(T));o.writeListEnd(),o.writeFieldEnd()}this.grantee!==null&&this.grantee!==void 0&&(o.writeFieldBegin("grantee",a.Type.STRING,4),o.writeString(this.grantee),o.writeFieldEnd()),this.privilegeObjectType!==null&&this.privilegeObjectType!==void 0&&(o.writeFieldBegin("privilegeObjectType",a.Type.I32,5),o.writeI32(this.privilegeObjectType),o.writeFieldEnd()),this.objectId!==null&&this.objectId!==void 0&&(o.writeFieldBegin("objectId",a.Type.I32,6),o.writeI32(this.objectId),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TDashboardGrantees=class{constructor(o){this.name=null,this.is_user=null,this.permissions=null,o&&(o.name!==void 0&&o.name!==null&&(this.name=o.name),o.is_user!==void 0&&o.is_user!==null&&(this.is_user=o.is_user),o.permissions!==void 0&&o.permissions!==null&&(this.permissions=new y.TDashboardPermissions(o.permissions)))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.name=o.readString():o.skip(b);break;case 2:b==a.Type.BOOL?this.is_user=o.readBool():o.skip(b);break;case 3:b==a.Type.STRUCT?(this.permissions=new y.TDashboardPermissions,this.permissions.read(o)):o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("TDashboardGrantees"),this.name!==null&&this.name!==void 0&&(o.writeFieldBegin("name",a.Type.STRING,1),o.writeString(this.name),o.writeFieldEnd()),this.is_user!==null&&this.is_user!==void 0&&(o.writeFieldBegin("is_user",a.Type.BOOL,2),o.writeBool(this.is_user),o.writeFieldEnd()),this.permissions!==null&&this.permissions!==void 0&&(o.writeFieldBegin("permissions",a.Type.STRUCT,3),this.permissions.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TDashboard=class{constructor(o){this.dashboard_name=null,this.dashboard_state=null,this.image_hash=null,this.update_time=null,this.dashboard_metadata=null,this.dashboard_id=null,this.dashboard_owner=null,this.is_dash_shared=null,this.dashboard_permissions=null,o&&(o.dashboard_name!==void 0&&o.dashboard_name!==null&&(this.dashboard_name=o.dashboard_name),o.dashboard_state!==void 0&&o.dashboard_state!==null&&(this.dashboard_state=o.dashboard_state),o.image_hash!==void 0&&o.image_hash!==null&&(this.image_hash=o.image_hash),o.update_time!==void 0&&o.update_time!==null&&(this.update_time=o.update_time),o.dashboard_metadata!==void 0&&o.dashboard_metadata!==null&&(this.dashboard_metadata=o.dashboard_metadata),o.dashboard_id!==void 0&&o.dashboard_id!==null&&(this.dashboard_id=o.dashboard_id),o.dashboard_owner!==void 0&&o.dashboard_owner!==null&&(this.dashboard_owner=o.dashboard_owner),o.is_dash_shared!==void 0&&o.is_dash_shared!==null&&(this.is_dash_shared=o.is_dash_shared),o.dashboard_permissions!==void 0&&o.dashboard_permissions!==null&&(this.dashboard_permissions=new y.TDashboardPermissions(o.dashboard_permissions)))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.dashboard_name=o.readString():o.skip(b);break;case 2:b==a.Type.STRING?this.dashboard_state=o.readString():o.skip(b);break;case 3:b==a.Type.STRING?this.image_hash=o.readString():o.skip(b);break;case 4:b==a.Type.STRING?this.update_time=o.readString():o.skip(b);break;case 5:b==a.Type.STRING?this.dashboard_metadata=o.readString():o.skip(b);break;case 6:b==a.Type.I32?this.dashboard_id=o.readI32():o.skip(b);break;case 7:b==a.Type.STRING?this.dashboard_owner=o.readString():o.skip(b);break;case 8:b==a.Type.BOOL?this.is_dash_shared=o.readBool():o.skip(b);break;case 9:b==a.Type.STRUCT?(this.dashboard_permissions=new y.TDashboardPermissions,this.dashboard_permissions.read(o)):o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("TDashboard"),this.dashboard_name!==null&&this.dashboard_name!==void 0&&(o.writeFieldBegin("dashboard_name",a.Type.STRING,1),o.writeString(this.dashboard_name),o.writeFieldEnd()),this.dashboard_state!==null&&this.dashboard_state!==void 0&&(o.writeFieldBegin("dashboard_state",a.Type.STRING,2),o.writeString(this.dashboard_state),o.writeFieldEnd()),this.image_hash!==null&&this.image_hash!==void 0&&(o.writeFieldBegin("image_hash",a.Type.STRING,3),o.writeString(this.image_hash),o.writeFieldEnd()),this.update_time!==null&&this.update_time!==void 0&&(o.writeFieldBegin("update_time",a.Type.STRING,4),o.writeString(this.update_time),o.writeFieldEnd()),this.dashboard_metadata!==null&&this.dashboard_metadata!==void 0&&(o.writeFieldBegin("dashboard_metadata",a.Type.STRING,5),o.writeString(this.dashboard_metadata),o.writeFieldEnd()),this.dashboard_id!==null&&this.dashboard_id!==void 0&&(o.writeFieldBegin("dashboard_id",a.Type.I32,6),o.writeI32(this.dashboard_id),o.writeFieldEnd()),this.dashboard_owner!==null&&this.dashboard_owner!==void 0&&(o.writeFieldBegin("dashboard_owner",a.Type.STRING,7),o.writeString(this.dashboard_owner),o.writeFieldEnd()),this.is_dash_shared!==null&&this.is_dash_shared!==void 0&&(o.writeFieldBegin("is_dash_shared",a.Type.BOOL,8),o.writeBool(this.is_dash_shared),o.writeFieldEnd()),this.dashboard_permissions!==null&&this.dashboard_permissions!==void 0&&(o.writeFieldBegin("dashboard_permissions",a.Type.STRUCT,9),this.dashboard_permissions.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TLicenseInfo=class{constructor(o){this.claims=null,o&&o.claims!==void 0&&o.claims!==null&&(this.claims=a.copyList(o.claims,[null]))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:if(b==a.Type.LIST){this.claims=[];const k=o.readListBegin().size||0;for(let I=0;I<k;++I){let B=null;B=o.readString(),this.claims.push(B)}o.readListEnd()}else o.skip(b);break;case 0:o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("TLicenseInfo"),this.claims!==null&&this.claims!==void 0){o.writeFieldBegin("claims",a.Type.LIST,1),o.writeListBegin(a.Type.STRING,this.claims.length);for(let T in this.claims)this.claims.hasOwnProperty(T)&&(T=this.claims[T],o.writeString(T));o.writeListEnd(),o.writeFieldEnd()}o.writeFieldStop(),o.writeStructEnd()}},c.exports.TSessionInfo=class{constructor(o){this.user=null,this.database=null,this.start_time=null,this.is_super=null,o&&(o.user!==void 0&&o.user!==null&&(this.user=o.user),o.database!==void 0&&o.database!==null&&(this.database=o.database),o.start_time!==void 0&&o.start_time!==null&&(this.start_time=o.start_time),o.is_super!==void 0&&o.is_super!==null&&(this.is_super=o.is_super))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.user=o.readString():o.skip(b);break;case 2:b==a.Type.STRING?this.database=o.readString():o.skip(b);break;case 3:b==a.Type.I64?this.start_time=o.readI64():o.skip(b);break;case 4:b==a.Type.BOOL?this.is_super=o.readBool():o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("TSessionInfo"),this.user!==null&&this.user!==void 0&&(o.writeFieldBegin("user",a.Type.STRING,1),o.writeString(this.user),o.writeFieldEnd()),this.database!==null&&this.database!==void 0&&(o.writeFieldBegin("database",a.Type.STRING,2),o.writeString(this.database),o.writeFieldEnd()),this.start_time!==null&&this.start_time!==void 0&&(o.writeFieldBegin("start_time",a.Type.I64,3),o.writeI64(this.start_time),o.writeFieldEnd()),this.is_super!==null&&this.is_super!==void 0&&(o.writeFieldBegin("is_super",a.Type.BOOL,4),o.writeBool(this.is_super),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TGeoFileLayerInfo=class{constructor(o){this.name=null,this.contents=null,o&&(o.name!==void 0&&o.name!==null&&(this.name=o.name),o.contents!==void 0&&o.contents!==null&&(this.contents=o.contents))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.name=o.readString():o.skip(b);break;case 2:b==a.Type.I32?this.contents=o.readI32():o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("TGeoFileLayerInfo"),this.name!==null&&this.name!==void 0&&(o.writeFieldBegin("name",a.Type.STRING,1),o.writeString(this.name),o.writeFieldEnd()),this.contents!==null&&this.contents!==void 0&&(o.writeFieldBegin("contents",a.Type.I32,2),o.writeI32(this.contents),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TTableEpochInfo=class{constructor(o){this.table_id=null,this.table_epoch=null,this.leaf_index=null,o&&(o.table_id!==void 0&&o.table_id!==null&&(this.table_id=o.table_id),o.table_epoch!==void 0&&o.table_epoch!==null&&(this.table_epoch=o.table_epoch),o.leaf_index!==void 0&&o.leaf_index!==null&&(this.leaf_index=o.leaf_index))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I32?this.table_id=o.readI32():o.skip(b);break;case 2:b==a.Type.I32?this.table_epoch=o.readI32():o.skip(b);break;case 3:b==a.Type.I32?this.leaf_index=o.readI32():o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("TTableEpochInfo"),this.table_id!==null&&this.table_id!==void 0&&(o.writeFieldBegin("table_id",a.Type.I32,1),o.writeI32(this.table_id),o.writeFieldEnd()),this.table_epoch!==null&&this.table_epoch!==void 0&&(o.writeFieldBegin("table_epoch",a.Type.I32,2),o.writeI32(this.table_epoch),o.writeFieldEnd()),this.leaf_index!==null&&this.leaf_index!==void 0&&(o.writeFieldBegin("leaf_index",a.Type.I32,3),o.writeI32(this.leaf_index),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TCustomExpression=class{constructor(o){this.id=null,this.name=null,this.expression_json=null,this.data_source_type=null,this.data_source_id=null,this.is_deleted=null,this.data_source_name=null,o&&(o.id!==void 0&&o.id!==null&&(this.id=o.id),o.name!==void 0&&o.name!==null&&(this.name=o.name),o.expression_json!==void 0&&o.expression_json!==null&&(this.expression_json=o.expression_json),o.data_source_type!==void 0&&o.data_source_type!==null&&(this.data_source_type=o.data_source_type),o.data_source_id!==void 0&&o.data_source_id!==null&&(this.data_source_id=o.data_source_id),o.is_deleted!==void 0&&o.is_deleted!==null&&(this.is_deleted=o.is_deleted),o.data_source_name!==void 0&&o.data_source_name!==null&&(this.data_source_name=o.data_source_name))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I32?this.id=o.readI32():o.skip(b);break;case 2:b==a.Type.STRING?this.name=o.readString():o.skip(b);break;case 4:b==a.Type.STRING?this.expression_json=o.readString():o.skip(b);break;case 5:b==a.Type.I32?this.data_source_type=o.readI32():o.skip(b);break;case 6:b==a.Type.I32?this.data_source_id=o.readI32():o.skip(b);break;case 7:b==a.Type.BOOL?this.is_deleted=o.readBool():o.skip(b);break;case 8:b==a.Type.STRING?this.data_source_name=o.readString():o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("TCustomExpression"),this.id!==null&&this.id!==void 0&&(o.writeFieldBegin("id",a.Type.I32,1),o.writeI32(this.id),o.writeFieldEnd()),this.name!==null&&this.name!==void 0&&(o.writeFieldBegin("name",a.Type.STRING,2),o.writeString(this.name),o.writeFieldEnd()),this.expression_json!==null&&this.expression_json!==void 0&&(o.writeFieldBegin("expression_json",a.Type.STRING,4),o.writeString(this.expression_json),o.writeFieldEnd()),this.data_source_type!==null&&this.data_source_type!==void 0&&(o.writeFieldBegin("data_source_type",a.Type.I32,5),o.writeI32(this.data_source_type),o.writeFieldEnd()),this.data_source_id!==null&&this.data_source_id!==void 0&&(o.writeFieldBegin("data_source_id",a.Type.I32,6),o.writeI32(this.data_source_id),o.writeFieldEnd()),this.is_deleted!==null&&this.is_deleted!==void 0&&(o.writeFieldBegin("is_deleted",a.Type.BOOL,7),o.writeBool(this.is_deleted),o.writeFieldEnd()),this.data_source_name!==null&&this.data_source_name!==void 0&&(o.writeFieldBegin("data_source_name",a.Type.STRING,8),o.writeString(this.data_source_name),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TQueryInfo=class{constructor(o){this.query_session_id=null,this.query_public_session_id=null,this.current_status=null,this.executor_id=null,this.submitted=null,this.query_str=null,this.login_name=null,this.client_address=null,this.db_name=null,this.exec_device_type=null,o&&(o.query_session_id!==void 0&&o.query_session_id!==null&&(this.query_session_id=o.query_session_id),o.query_public_session_id!==void 0&&o.query_public_session_id!==null&&(this.query_public_session_id=o.query_public_session_id),o.current_status!==void 0&&o.current_status!==null&&(this.current_status=o.current_status),o.executor_id!==void 0&&o.executor_id!==null&&(this.executor_id=o.executor_id),o.submitted!==void 0&&o.submitted!==null&&(this.submitted=o.submitted),o.query_str!==void 0&&o.query_str!==null&&(this.query_str=o.query_str),o.login_name!==void 0&&o.login_name!==null&&(this.login_name=o.login_name),o.client_address!==void 0&&o.client_address!==null&&(this.client_address=o.client_address),o.db_name!==void 0&&o.db_name!==null&&(this.db_name=o.db_name),o.exec_device_type!==void 0&&o.exec_device_type!==null&&(this.exec_device_type=o.exec_device_type))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.query_session_id=o.readString():o.skip(b);break;case 2:b==a.Type.STRING?this.query_public_session_id=o.readString():o.skip(b);break;case 3:b==a.Type.STRING?this.current_status=o.readString():o.skip(b);break;case 4:b==a.Type.I32?this.executor_id=o.readI32():o.skip(b);break;case 5:b==a.Type.STRING?this.submitted=o.readString():o.skip(b);break;case 6:b==a.Type.STRING?this.query_str=o.readString():o.skip(b);break;case 7:b==a.Type.STRING?this.login_name=o.readString():o.skip(b);break;case 8:b==a.Type.STRING?this.client_address=o.readString():o.skip(b);break;case 9:b==a.Type.STRING?this.db_name=o.readString():o.skip(b);break;case 10:b==a.Type.STRING?this.exec_device_type=o.readString():o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("TQueryInfo"),this.query_session_id!==null&&this.query_session_id!==void 0&&(o.writeFieldBegin("query_session_id",a.Type.STRING,1),o.writeString(this.query_session_id),o.writeFieldEnd()),this.query_public_session_id!==null&&this.query_public_session_id!==void 0&&(o.writeFieldBegin("query_public_session_id",a.Type.STRING,2),o.writeString(this.query_public_session_id),o.writeFieldEnd()),this.current_status!==null&&this.current_status!==void 0&&(o.writeFieldBegin("current_status",a.Type.STRING,3),o.writeString(this.current_status),o.writeFieldEnd()),this.executor_id!==null&&this.executor_id!==void 0&&(o.writeFieldBegin("executor_id",a.Type.I32,4),o.writeI32(this.executor_id),o.writeFieldEnd()),this.submitted!==null&&this.submitted!==void 0&&(o.writeFieldBegin("submitted",a.Type.STRING,5),o.writeString(this.submitted),o.writeFieldEnd()),this.query_str!==null&&this.query_str!==void 0&&(o.writeFieldBegin("query_str",a.Type.STRING,6),o.writeString(this.query_str),o.writeFieldEnd()),this.login_name!==null&&this.login_name!==void 0&&(o.writeFieldBegin("login_name",a.Type.STRING,7),o.writeString(this.login_name),o.writeFieldEnd()),this.client_address!==null&&this.client_address!==void 0&&(o.writeFieldBegin("client_address",a.Type.STRING,8),o.writeString(this.client_address),o.writeFieldEnd()),this.db_name!==null&&this.db_name!==void 0&&(o.writeFieldBegin("db_name",a.Type.STRING,9),o.writeString(this.db_name),o.writeFieldEnd()),this.exec_device_type!==null&&this.exec_device_type!==void 0&&(o.writeFieldBegin("exec_device_type",a.Type.STRING,10),o.writeString(this.exec_device_type),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},c.exports.TLeafInfo=class{constructor(o){this.leaf_id=null,this.num_leaves=null,o&&(o.leaf_id!==void 0&&o.leaf_id!==null&&(this.leaf_id=o.leaf_id),o.num_leaves!==void 0&&o.num_leaves!==null&&(this.num_leaves=o.num_leaves))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I32?this.leaf_id=o.readI32():o.skip(b);break;case 2:b==a.Type.I32?this.num_leaves=o.readI32():o.skip(b);break;default:o.skip(b)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("TLeafInfo"),this.leaf_id!==null&&this.leaf_id!==void 0&&(o.writeFieldBegin("leaf_id",a.Type.I32,1),o.writeI32(this.leaf_id),o.writeFieldEnd()),this.num_leaves!==null&&this.num_leaves!==void 0&&(o.writeFieldBegin("num_leaves",a.Type.I32,2),o.writeI32(this.num_leaves),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}}},3962:(c,d,f)=>{const a=f(9262).Thrift;f(135);const m=f(2818),w=c.exports={};w.TResultSetLayout={GroupByPerfectHash:0,GroupByBaselineHash:1,Projection:2,NonGroupedAggregate:3},w.TCountDistinctImplType={Invalid:0,Bitmap:1,UnorderedSet:2},w.TAggKind={AVG:0,MIN:1,MAX:2,SUM:3,COUNT:4,APPROX_COUNT_DISTINCT:5,SAMPLE:6,SINGLE_VALUE:7},c.exports.TSlotSize=class{constructor(y){this.padded=null,this.logical=null,y&&(y.padded!==void 0&&y.padded!==null&&(this.padded=y.padded),y.logical!==void 0&&y.logical!==null&&(this.logical=y.logical))}read(y){for(y.readStructBegin();;){const o=y.readFieldBegin(),T=o.ftype,b=o.fid;if(T==a.Type.STOP)break;switch(b){case 1:T==a.Type.I16?this.padded=y.readI16():y.skip(T);break;case 2:T==a.Type.I16?this.logical=y.readI16():y.skip(T);break;default:y.skip(T)}y.readFieldEnd()}y.readStructEnd()}write(y){y.writeStructBegin("TSlotSize"),this.padded!==null&&this.padded!==void 0&&(y.writeFieldBegin("padded",a.Type.I16,1),y.writeI16(this.padded),y.writeFieldEnd()),this.logical!==null&&this.logical!==void 0&&(y.writeFieldBegin("logical",a.Type.I16,2),y.writeI16(this.logical),y.writeFieldEnd()),y.writeFieldStop(),y.writeStructEnd()}},c.exports.TColSlotContext=class{constructor(y){this.slot_sizes=null,this.col_to_slot_map=null,y&&(y.slot_sizes!==void 0&&y.slot_sizes!==null&&(this.slot_sizes=a.copyList(y.slot_sizes,[w.TSlotSize])),y.col_to_slot_map!==void 0&&y.col_to_slot_map!==null&&(this.col_to_slot_map=a.copyList(y.col_to_slot_map,[a.copyList,null])))}read(y){for(y.readStructBegin();;){const o=y.readFieldBegin(),T=o.ftype,b=o.fid;if(T==a.Type.STOP)break;switch(b){case 1:if(T==a.Type.LIST){this.slot_sizes=[];const x=y.readListBegin().size||0;for(let k=0;k<x;++k){let I=null;I=new w.TSlotSize,I.read(y),this.slot_sizes.push(I)}y.readListEnd()}else y.skip(T);break;case 2:if(T==a.Type.LIST){this.col_to_slot_map=[];const x=y.readListBegin().size||0;for(let k=0;k<x;++k){let I=null;I=[];const O=y.readListBegin().size||0;for(let A=0;A<O;++A){let R=null;R=y.readI32(),I.push(R)}y.readListEnd(),this.col_to_slot_map.push(I)}y.readListEnd()}else y.skip(T);break;default:y.skip(T)}y.readFieldEnd()}y.readStructEnd()}write(y){if(y.writeStructBegin("TColSlotContext"),this.slot_sizes!==null&&this.slot_sizes!==void 0){y.writeFieldBegin("slot_sizes",a.Type.LIST,1),y.writeListBegin(a.Type.STRUCT,this.slot_sizes.length);for(let o in this.slot_sizes)this.slot_sizes.hasOwnProperty(o)&&(o=this.slot_sizes[o],o.write(y));y.writeListEnd(),y.writeFieldEnd()}if(this.col_to_slot_map!==null&&this.col_to_slot_map!==void 0){y.writeFieldBegin("col_to_slot_map",a.Type.LIST,2),y.writeListBegin(a.Type.LIST,this.col_to_slot_map.length);for(let o in this.col_to_slot_map)if(this.col_to_slot_map.hasOwnProperty(o)){o=this.col_to_slot_map[o],y.writeListBegin(a.Type.I32,o.length);for(let T in o)o.hasOwnProperty(T)&&(T=o[T],y.writeI32(T));y.writeListEnd()}y.writeListEnd(),y.writeFieldEnd()}y.writeFieldStop(),y.writeStructEnd()}},c.exports.TCountDistinctDescriptor=class{constructor(y){this.impl_type=null,this.min_val=null,this.bitmap_sz_bits=null,this.approximate=null,this.device_type=null,this.sub_bitmap_count=null,y&&(y.impl_type!==void 0&&y.impl_type!==null&&(this.impl_type=y.impl_type),y.min_val!==void 0&&y.min_val!==null&&(this.min_val=y.min_val),y.bitmap_sz_bits!==void 0&&y.bitmap_sz_bits!==null&&(this.bitmap_sz_bits=y.bitmap_sz_bits),y.approximate!==void 0&&y.approximate!==null&&(this.approximate=y.approximate),y.device_type!==void 0&&y.device_type!==null&&(this.device_type=y.device_type),y.sub_bitmap_count!==void 0&&y.sub_bitmap_count!==null&&(this.sub_bitmap_count=y.sub_bitmap_count))}read(y){for(y.readStructBegin();;){const o=y.readFieldBegin(),T=o.ftype,b=o.fid;if(T==a.Type.STOP)break;switch(b){case 1:T==a.Type.I32?this.impl_type=y.readI32():y.skip(T);break;case 2:T==a.Type.I64?this.min_val=y.readI64():y.skip(T);break;case 3:T==a.Type.I64?this.bitmap_sz_bits=y.readI64():y.skip(T);break;case 4:T==a.Type.BOOL?this.approximate=y.readBool():y.skip(T);break;case 5:T==a.Type.I32?this.device_type=y.readI32():y.skip(T);break;case 6:T==a.Type.I64?this.sub_bitmap_count=y.readI64():y.skip(T);break;default:y.skip(T)}y.readFieldEnd()}y.readStructEnd()}write(y){y.writeStructBegin("TCountDistinctDescriptor"),this.impl_type!==null&&this.impl_type!==void 0&&(y.writeFieldBegin("impl_type",a.Type.I32,1),y.writeI32(this.impl_type),y.writeFieldEnd()),this.min_val!==null&&this.min_val!==void 0&&(y.writeFieldBegin("min_val",a.Type.I64,2),y.writeI64(this.min_val),y.writeFieldEnd()),this.bitmap_sz_bits!==null&&this.bitmap_sz_bits!==void 0&&(y.writeFieldBegin("bitmap_sz_bits",a.Type.I64,3),y.writeI64(this.bitmap_sz_bits),y.writeFieldEnd()),this.approximate!==null&&this.approximate!==void 0&&(y.writeFieldBegin("approximate",a.Type.BOOL,4),y.writeBool(this.approximate),y.writeFieldEnd()),this.device_type!==null&&this.device_type!==void 0&&(y.writeFieldBegin("device_type",a.Type.I32,5),y.writeI32(this.device_type),y.writeFieldEnd()),this.sub_bitmap_count!==null&&this.sub_bitmap_count!==void 0&&(y.writeFieldBegin("sub_bitmap_count",a.Type.I64,6),y.writeI64(this.sub_bitmap_count),y.writeFieldEnd()),y.writeFieldStop(),y.writeStructEnd()}},c.exports.TResultSetBufferDescriptor=class{constructor(y){this.layout=null,this.keyless=null,this.entry_count=null,this.idx_target_as_key=null,this.min_val=null,this.max_val=null,this.bucket=null,this.group_col_widths=null,this.key_bytewidth=null,this.col_slot_context=null,this.target_groupby_indices=null,this.count_distinct_descriptors=null,this.force_4byte_float=null,y&&(y.layout!==void 0&&y.layout!==null&&(this.layout=y.layout),y.keyless!==void 0&&y.keyless!==null&&(this.keyless=y.keyless),y.entry_count!==void 0&&y.entry_count!==null&&(this.entry_count=y.entry_count),y.idx_target_as_key!==void 0&&y.idx_target_as_key!==null&&(this.idx_target_as_key=y.idx_target_as_key),y.min_val!==void 0&&y.min_val!==null&&(this.min_val=y.min_val),y.max_val!==void 0&&y.max_val!==null&&(this.max_val=y.max_val),y.bucket!==void 0&&y.bucket!==null&&(this.bucket=y.bucket),y.group_col_widths!==void 0&&y.group_col_widths!==null&&(this.group_col_widths=a.copyList(y.group_col_widths,[null])),y.key_bytewidth!==void 0&&y.key_bytewidth!==null&&(this.key_bytewidth=y.key_bytewidth),y.col_slot_context!==void 0&&y.col_slot_context!==null&&(this.col_slot_context=new w.TColSlotContext(y.col_slot_context)),y.target_groupby_indices!==void 0&&y.target_groupby_indices!==null&&(this.target_groupby_indices=a.copyList(y.target_groupby_indices,[null])),y.count_distinct_descriptors!==void 0&&y.count_distinct_descriptors!==null&&(this.count_distinct_descriptors=a.copyList(y.count_distinct_descriptors,[w.TCountDistinctDescriptor])),y.force_4byte_float!==void 0&&y.force_4byte_float!==null&&(this.force_4byte_float=y.force_4byte_float))}read(y){for(y.readStructBegin();;){const o=y.readFieldBegin(),T=o.ftype,b=o.fid;if(T==a.Type.STOP)break;switch(b){case 1:T==a.Type.I32?this.layout=y.readI32():y.skip(T);break;case 2:T==a.Type.BOOL?this.keyless=y.readBool():y.skip(T);break;case 3:T==a.Type.I32?this.entry_count=y.readI32():y.skip(T);break;case 4:T==a.Type.I32?this.idx_target_as_key=y.readI32():y.skip(T);break;case 5:T==a.Type.I64?this.min_val=y.readI64():y.skip(T);break;case 6:T==a.Type.I64?this.max_val=y.readI64():y.skip(T);break;case 7:T==a.Type.I64?this.bucket=y.readI64():y.skip(T);break;case 8:if(T==a.Type.LIST){this.group_col_widths=[];const x=y.readListBegin().size||0;for(let k=0;k<x;++k){let I=null;I=y.readI16(),this.group_col_widths.push(I)}y.readListEnd()}else y.skip(T);break;case 9:T==a.Type.I16?this.key_bytewidth=y.readI16():y.skip(T);break;case 10:T==a.Type.STRUCT?(this.col_slot_context=new w.TColSlotContext,this.col_slot_context.read(y)):y.skip(T);break;case 11:if(T==a.Type.LIST){this.target_groupby_indices=[];const x=y.readListBegin().size||0;for(let k=0;k<x;++k){let I=null;I=y.readI32(),this.target_groupby_indices.push(I)}y.readListEnd()}else y.skip(T);break;case 12:if(T==a.Type.LIST){this.count_distinct_descriptors=[];const x=y.readListBegin().size||0;for(let k=0;k<x;++k){let I=null;I=new w.TCountDistinctDescriptor,I.read(y),this.count_distinct_descriptors.push(I)}y.readListEnd()}else y.skip(T);break;case 13:T==a.Type.BOOL?this.force_4byte_float=y.readBool():y.skip(T);break;default:y.skip(T)}y.readFieldEnd()}y.readStructEnd()}write(y){if(y.writeStructBegin("TResultSetBufferDescriptor"),this.layout!==null&&this.layout!==void 0&&(y.writeFieldBegin("layout",a.Type.I32,1),y.writeI32(this.layout),y.writeFieldEnd()),this.keyless!==null&&this.keyless!==void 0&&(y.writeFieldBegin("keyless",a.Type.BOOL,2),y.writeBool(this.keyless),y.writeFieldEnd()),this.entry_count!==null&&this.entry_count!==void 0&&(y.writeFieldBegin("entry_count",a.Type.I32,3),y.writeI32(this.entry_count),y.writeFieldEnd()),this.idx_target_as_key!==null&&this.idx_target_as_key!==void 0&&(y.writeFieldBegin("idx_target_as_key",a.Type.I32,4),y.writeI32(this.idx_target_as_key),y.writeFieldEnd()),this.min_val!==null&&this.min_val!==void 0&&(y.writeFieldBegin("min_val",a.Type.I64,5),y.writeI64(this.min_val),y.writeFieldEnd()),this.max_val!==null&&this.max_val!==void 0&&(y.writeFieldBegin("max_val",a.Type.I64,6),y.writeI64(this.max_val),y.writeFieldEnd()),this.bucket!==null&&this.bucket!==void 0&&(y.writeFieldBegin("bucket",a.Type.I64,7),y.writeI64(this.bucket),y.writeFieldEnd()),this.group_col_widths!==null&&this.group_col_widths!==void 0){y.writeFieldBegin("group_col_widths",a.Type.LIST,8),y.writeListBegin(a.Type.I16,this.group_col_widths.length);for(let o in this.group_col_widths)this.group_col_widths.hasOwnProperty(o)&&(o=this.group_col_widths[o],y.writeI16(o));y.writeListEnd(),y.writeFieldEnd()}if(this.key_bytewidth!==null&&this.key_bytewidth!==void 0&&(y.writeFieldBegin("key_bytewidth",a.Type.I16,9),y.writeI16(this.key_bytewidth),y.writeFieldEnd()),this.col_slot_context!==null&&this.col_slot_context!==void 0&&(y.writeFieldBegin("col_slot_context",a.Type.STRUCT,10),this.col_slot_context.write(y),y.writeFieldEnd()),this.target_groupby_indices!==null&&this.target_groupby_indices!==void 0){y.writeFieldBegin("target_groupby_indices",a.Type.LIST,11),y.writeListBegin(a.Type.I32,this.target_groupby_indices.length);for(let o in this.target_groupby_indices)this.target_groupby_indices.hasOwnProperty(o)&&(o=this.target_groupby_indices[o],y.writeI32(o));y.writeListEnd(),y.writeFieldEnd()}if(this.count_distinct_descriptors!==null&&this.count_distinct_descriptors!==void 0){y.writeFieldBegin("count_distinct_descriptors",a.Type.LIST,12),y.writeListBegin(a.Type.STRUCT,this.count_distinct_descriptors.length);for(let o in this.count_distinct_descriptors)this.count_distinct_descriptors.hasOwnProperty(o)&&(o=this.count_distinct_descriptors[o],o.write(y));y.writeListEnd(),y.writeFieldEnd()}this.force_4byte_float!==null&&this.force_4byte_float!==void 0&&(y.writeFieldBegin("force_4byte_float",a.Type.BOOL,13),y.writeBool(this.force_4byte_float),y.writeFieldEnd()),y.writeFieldStop(),y.writeStructEnd()}},c.exports.TTargetInfo=class{constructor(y){this.is_agg=null,this.kind=null,this.type=null,this.arg_type=null,this.skip_nulls=null,this.is_distinct=null,y&&(y.is_agg!==void 0&&y.is_agg!==null&&(this.is_agg=y.is_agg),y.kind!==void 0&&y.kind!==null&&(this.kind=y.kind),y.type!==void 0&&y.type!==null&&(this.type=new m.TTypeInfo(y.type)),y.arg_type!==void 0&&y.arg_type!==null&&(this.arg_type=new m.TTypeInfo(y.arg_type)),y.skip_nulls!==void 0&&y.skip_nulls!==null&&(this.skip_nulls=y.skip_nulls),y.is_distinct!==void 0&&y.is_distinct!==null&&(this.is_distinct=y.is_distinct))}read(y){for(y.readStructBegin();;){const o=y.readFieldBegin(),T=o.ftype,b=o.fid;if(T==a.Type.STOP)break;switch(b){case 1:T==a.Type.BOOL?this.is_agg=y.readBool():y.skip(T);break;case 2:T==a.Type.I32?this.kind=y.readI32():y.skip(T);break;case 3:T==a.Type.STRUCT?(this.type=new m.TTypeInfo,this.type.read(y)):y.skip(T);break;case 4:T==a.Type.STRUCT?(this.arg_type=new m.TTypeInfo,this.arg_type.read(y)):y.skip(T);break;case 5:T==a.Type.BOOL?this.skip_nulls=y.readBool():y.skip(T);break;case 6:T==a.Type.BOOL?this.is_distinct=y.readBool():y.skip(T);break;default:y.skip(T)}y.readFieldEnd()}y.readStructEnd()}write(y){y.writeStructBegin("TTargetInfo"),this.is_agg!==null&&this.is_agg!==void 0&&(y.writeFieldBegin("is_agg",a.Type.BOOL,1),y.writeBool(this.is_agg),y.writeFieldEnd()),this.kind!==null&&this.kind!==void 0&&(y.writeFieldBegin("kind",a.Type.I32,2),y.writeI32(this.kind),y.writeFieldEnd()),this.type!==null&&this.type!==void 0&&(y.writeFieldBegin("type",a.Type.STRUCT,3),this.type.write(y),y.writeFieldEnd()),this.arg_type!==null&&this.arg_type!==void 0&&(y.writeFieldBegin("arg_type",a.Type.STRUCT,4),this.arg_type.write(y),y.writeFieldEnd()),this.skip_nulls!==null&&this.skip_nulls!==void 0&&(y.writeFieldBegin("skip_nulls",a.Type.BOOL,5),y.writeBool(this.skip_nulls),y.writeFieldEnd()),this.is_distinct!==null&&this.is_distinct!==void 0&&(y.writeFieldBegin("is_distinct",a.Type.BOOL,6),y.writeBool(this.is_distinct),y.writeFieldEnd()),y.writeFieldStop(),y.writeStructEnd()}},c.exports.TCountDistinctSetStorage=class{constructor(y){this.bitmap=null,this.sparse_set=null,y&&(y.bitmap!==void 0&&y.bitmap!==null&&(this.bitmap=y.bitmap),y.sparse_set!==void 0&&y.sparse_set!==null&&(this.sparse_set=a.copyList(y.sparse_set,[null])))}read(y){for(y.readStructBegin();;){const o=y.readFieldBegin(),T=o.ftype,b=o.fid;if(T==a.Type.STOP)break;switch(b){case 1:T==a.Type.STRING?this.bitmap=y.readBinary():y.skip(T);break;case 2:if(T==a.Type.SET){this.sparse_set=[];const x=y.readSetBegin().size||0;for(let k=0;k<x;++k){let I=null;I=y.readI64(),this.sparse_set.push(I)}y.readSetEnd()}else y.skip(T);break;default:y.skip(T)}y.readFieldEnd()}y.readStructEnd()}write(y){if(y.writeStructBegin("TCountDistinctSetStorage"),this.bitmap!==null&&this.bitmap!==void 0&&(y.writeFieldBegin("bitmap",a.Type.STRING,1),y.writeBinary(this.bitmap),y.writeFieldEnd()),this.sparse_set!==null&&this.sparse_set!==void 0){y.writeFieldBegin("sparse_set",a.Type.SET,2),y.writeSetBegin(a.Type.I64,this.sparse_set.length);for(let o in this.sparse_set)this.sparse_set.hasOwnProperty(o)&&(o=this.sparse_set[o],y.writeI64(o));y.writeSetEnd(),y.writeFieldEnd()}y.writeFieldStop(),y.writeStructEnd()}},c.exports.TCountDistinctSet=class{constructor(y){this.type=null,this.storage=null,this.remote_ptr=null,y&&(y.type!==void 0&&y.type!==null&&(this.type=y.type),y.storage!==void 0&&y.storage!==null&&(this.storage=new w.TCountDistinctSetStorage(y.storage)),y.remote_ptr!==void 0&&y.remote_ptr!==null&&(this.remote_ptr=y.remote_ptr))}read(y){for(y.readStructBegin();;){const o=y.readFieldBegin(),T=o.ftype,b=o.fid;if(T==a.Type.STOP)break;switch(b){case 1:T==a.Type.I32?this.type=y.readI32():y.skip(T);break;case 2:T==a.Type.STRUCT?(this.storage=new w.TCountDistinctSetStorage,this.storage.read(y)):y.skip(T);break;case 3:T==a.Type.I64?this.remote_ptr=y.readI64():y.skip(T);break;default:y.skip(T)}y.readFieldEnd()}y.readStructEnd()}write(y){y.writeStructBegin("TCountDistinctSet"),this.type!==null&&this.type!==void 0&&(y.writeFieldBegin("type",a.Type.I32,1),y.writeI32(this.type),y.writeFieldEnd()),this.storage!==null&&this.storage!==void 0&&(y.writeFieldBegin("storage",a.Type.STRUCT,2),this.storage.write(y),y.writeFieldEnd()),this.remote_ptr!==null&&this.remote_ptr!==void 0&&(y.writeFieldBegin("remote_ptr",a.Type.I64,3),y.writeI64(this.remote_ptr),y.writeFieldEnd()),y.writeFieldStop(),y.writeStructEnd()}},c.exports.TSerializedRows=class{constructor(y){this.buffers=null,this.buffer_lengths=null,this.buffers_total_size=null,this.total_compression_time_ms=null,this.descriptor=null,this.targets=null,this.target_init_vals=null,this.varlen_buffer=null,this.count_distinct_sets=null,this.explanation=null,y&&(y.buffers!==void 0&&y.buffers!==null&&(this.buffers=a.copyList(y.buffers,[null])),y.buffer_lengths!==void 0&&y.buffer_lengths!==null&&(this.buffer_lengths=a.copyList(y.buffer_lengths,[null])),y.buffers_total_size!==void 0&&y.buffers_total_size!==null&&(this.buffers_total_size=y.buffers_total_size),y.total_compression_time_ms!==void 0&&y.total_compression_time_ms!==null&&(this.total_compression_time_ms=y.total_compression_time_ms),y.descriptor!==void 0&&y.descriptor!==null&&(this.descriptor=new w.TResultSetBufferDescriptor(y.descriptor)),y.targets!==void 0&&y.targets!==null&&(this.targets=a.copyList(y.targets,[w.TTargetInfo])),y.target_init_vals!==void 0&&y.target_init_vals!==null&&(this.target_init_vals=a.copyList(y.target_init_vals,[null])),y.varlen_buffer!==void 0&&y.varlen_buffer!==null&&(this.varlen_buffer=a.copyList(y.varlen_buffer,[null])),y.count_distinct_sets!==void 0&&y.count_distinct_sets!==null&&(this.count_distinct_sets=a.copyList(y.count_distinct_sets,[w.TCountDistinctSet])),y.explanation!==void 0&&y.explanation!==null&&(this.explanation=y.explanation))}read(y){for(y.readStructBegin();;){const o=y.readFieldBegin(),T=o.ftype,b=o.fid;if(T==a.Type.STOP)break;switch(b){case 1:if(T==a.Type.LIST){this.buffers=[];const x=y.readListBegin().size||0;for(let k=0;k<x;++k){let I=null;I=y.readBinary(),this.buffers.push(I)}y.readListEnd()}else y.skip(T);break;case 2:if(T==a.Type.LIST){this.buffer_lengths=[];const x=y.readListBegin().size||0;for(let k=0;k<x;++k){let I=null;I=y.readI64(),this.buffer_lengths.push(I)}y.readListEnd()}else y.skip(T);break;case 3:T==a.Type.I64?this.buffers_total_size=y.readI64():y.skip(T);break;case 4:T==a.Type.I32?this.total_compression_time_ms=y.readI32():y.skip(T);break;case 5:T==a.Type.STRUCT?(this.descriptor=new w.TResultSetBufferDescriptor,this.descriptor.read(y)):y.skip(T);break;case 6:if(T==a.Type.LIST){this.targets=[];const x=y.readListBegin().size||0;for(let k=0;k<x;++k){let I=null;I=new w.TTargetInfo,I.read(y),this.targets.push(I)}y.readListEnd()}else y.skip(T);break;case 7:if(T==a.Type.LIST){this.target_init_vals=[];const x=y.readListBegin().size||0;for(let k=0;k<x;++k){let I=null;I=y.readI64(),this.target_init_vals.push(I)}y.readListEnd()}else y.skip(T);break;case 8:if(T==a.Type.LIST){this.varlen_buffer=[];const x=y.readListBegin().size||0;for(let k=0;k<x;++k){let I=null;I=y.readBinary(),this.varlen_buffer.push(I)}y.readListEnd()}else y.skip(T);break;case 9:if(T==a.Type.LIST){this.count_distinct_sets=[];const x=y.readListBegin().size||0;for(let k=0;k<x;++k){let I=null;I=new w.TCountDistinctSet,I.read(y),this.count_distinct_sets.push(I)}y.readListEnd()}else y.skip(T);break;case 10:T==a.Type.STRING?this.explanation=y.readString():y.skip(T);break;default:y.skip(T)}y.readFieldEnd()}y.readStructEnd()}write(y){if(y.writeStructBegin("TSerializedRows"),this.buffers!==null&&this.buffers!==void 0){y.writeFieldBegin("buffers",a.Type.LIST,1),y.writeListBegin(a.Type.STRING,this.buffers.length);for(let o in this.buffers)this.buffers.hasOwnProperty(o)&&(o=this.buffers[o],y.writeBinary(o));y.writeListEnd(),y.writeFieldEnd()}if(this.buffer_lengths!==null&&this.buffer_lengths!==void 0){y.writeFieldBegin("buffer_lengths",a.Type.LIST,2),y.writeListBegin(a.Type.I64,this.buffer_lengths.length);for(let o in this.buffer_lengths)this.buffer_lengths.hasOwnProperty(o)&&(o=this.buffer_lengths[o],y.writeI64(o));y.writeListEnd(),y.writeFieldEnd()}if(this.buffers_total_size!==null&&this.buffers_total_size!==void 0&&(y.writeFieldBegin("buffers_total_size",a.Type.I64,3),y.writeI64(this.buffers_total_size),y.writeFieldEnd()),this.total_compression_time_ms!==null&&this.total_compression_time_ms!==void 0&&(y.writeFieldBegin("total_compression_time_ms",a.Type.I32,4),y.writeI32(this.total_compression_time_ms),y.writeFieldEnd()),this.descriptor!==null&&this.descriptor!==void 0&&(y.writeFieldBegin("descriptor",a.Type.STRUCT,5),this.descriptor.write(y),y.writeFieldEnd()),this.targets!==null&&this.targets!==void 0){y.writeFieldBegin("targets",a.Type.LIST,6),y.writeListBegin(a.Type.STRUCT,this.targets.length);for(let o in this.targets)this.targets.hasOwnProperty(o)&&(o=this.targets[o],o.write(y));y.writeListEnd(),y.writeFieldEnd()}if(this.target_init_vals!==null&&this.target_init_vals!==void 0){y.writeFieldBegin("target_init_vals",a.Type.LIST,7),y.writeListBegin(a.Type.I64,this.target_init_vals.length);for(let o in this.target_init_vals)this.target_init_vals.hasOwnProperty(o)&&(o=this.target_init_vals[o],y.writeI64(o));y.writeListEnd(),y.writeFieldEnd()}if(this.varlen_buffer!==null&&this.varlen_buffer!==void 0){y.writeFieldBegin("varlen_buffer",a.Type.LIST,8),y.writeListBegin(a.Type.STRING,this.varlen_buffer.length);for(let o in this.varlen_buffer)this.varlen_buffer.hasOwnProperty(o)&&(o=this.varlen_buffer[o],y.writeBinary(o));y.writeListEnd(),y.writeFieldEnd()}if(this.count_distinct_sets!==null&&this.count_distinct_sets!==void 0){y.writeFieldBegin("count_distinct_sets",a.Type.LIST,9),y.writeListBegin(a.Type.STRUCT,this.count_distinct_sets.length);for(let o in this.count_distinct_sets)this.count_distinct_sets.hasOwnProperty(o)&&(o=this.count_distinct_sets[o],o.write(y));y.writeListEnd(),y.writeFieldEnd()}this.explanation!==null&&this.explanation!==void 0&&(y.writeFieldBegin("explanation",a.Type.STRING,10),y.writeString(this.explanation),y.writeFieldEnd()),y.writeFieldStop(),y.writeStructEnd()}}},2003:c=>{c.exports=n}},s={};function l(c){if(s[c])return s[c].exports;var d=s[c]={exports:{}};return i[c](d,d.exports,l),d.exports}return l.n=c=>{var d=c&&c.__esModule?()=>c.default:()=>c;return l.d(d,{a:d}),d},l.d=(c,d)=>{for(var f in d)l.o(d,f)&&!l.o(c,f)&&Object.defineProperty(c,f,{enumerable:!0,get:d[f]})},l.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),l.o=(c,d)=>Object.prototype.hasOwnProperty.call(c,d),l.r=c=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},l(7123)})()})})(N8);var cse=N8.exports;const dse=Gl(cse);new dse;function fse(e){return!Array.isArray(e)}class use extends x2{constructor(t){let n;fse(t)?n=w6(t):n=p6(t),super(n)}}class hse{constructor(t){this.db=t,this.views=new nse,this.filters=new Map,this.index=new Map}async view0D(t){await this.assertDataExists();const n=new C_(this);return this.views.add(n),t&&n.addOnChangeListener(t),n}async view1D(t,n){await this.assertDataExists(t);const i=new Vc(this,t);return this.views.add(i),n&&i.addOnChangeListener(n),i}async entries({offset:t=0,length:n=1/0}={}){return this.db.entries(t,n,this.filters)}async all(){for(const t of this.views)await t.all()}async link(){const t=this.views.active;t?(await t.computeIndex(!0),await t.select(t.lastFilter,!0)):await this.all()}get passiveFilters(){const t=this.views.active;if(t instanceof C_)throw Error("No filter for 0D view / count");if(t instanceof Vc)return B3(this.filters,t.dimension);throw Error("2D view not implemented yet")}otherFilters(t){return B3(this.filters,t.dimension)}async assertDataExists(...t){if(!await this.db.tableExists())throw new Error("Table does not exists in the database");t==null||t.forEach(async i=>{if(i&&!await this.db.dimensionExists(i))throw new Error(`Dimension '${i.name}' does not exist in the data table`)})}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var _se=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var l in s)s.hasOwnProperty(l)&&(i[l]=s[l])},e(t,n)};return function(t,n){e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),gse=Object.prototype.hasOwnProperty;function OS(e,t){return gse.call(e,t)}function NS(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var i=[];for(var s in e)OS(e,s)&&i.push(s);return i}function gs(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function CS(e){for(var t=0,n=e.length,i;t<n;){if(i=e.charCodeAt(t),i>=48&&i<=57){t++;continue}return!1}return!0}function xc(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function C8(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function RS(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(RS(e[t]))return!0}else if(typeof e=="object"){for(var i=NS(e),s=i.length,l=0;l<s;l++)if(RS(e[i[l]]))return!0}}return!1}function I3(e,t){var n=[e];for(var i in t){var s=typeof t[i]=="object"?JSON.stringify(t[i],null,2):t[i];typeof s<"u"&&n.push(i+": "+s)}return n.join(`
`)}var R8=function(e){_se(t,e);function t(n,i,s,l,c){var d=this.constructor,f=e.call(this,I3(n,{name:i,index:s,operation:l,tree:c}))||this;return f.name=i,f.index=s,f.operation=l,f.tree=c,Object.setPrototypeOf(f,d.prototype),f.message=I3(n,{name:i,index:s,operation:l,tree:c}),f}return t}(Error),rn=R8,pse=gs,Rf={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var i=e[t];return delete e[t],{newDocument:n,removed:i}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:function(e,t,n){var i=Db(n,this.path);i&&(i=gs(i));var s=Yc(n,{op:"remove",path:this.from}).removed;return Yc(n,{op:"add",path:this.path,value:s}),{newDocument:n,removed:i}},copy:function(e,t,n){var i=Db(n,this.from);return Yc(n,{op:"add",path:this.path,value:gs(i)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:ug(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},yse={add:function(e,t,n){return CS(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var i=e.splice(t,1);return{newDocument:n,removed:i[0]}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:Rf.move,copy:Rf.copy,test:Rf.test,_get:Rf._get};function Db(e,t){if(t=="")return e;var n={op:"_get",path:t};return Yc(e,n),n.value}function Yc(e,t,n,i,s,l){if(n===void 0&&(n=!1),i===void 0&&(i=!0),s===void 0&&(s=!0),l===void 0&&(l=0),n&&(typeof n=="function"?n(t,0,e,t.path):$b(t,0)),t.path===""){var c={newDocument:e};if(t.op==="add")return c.newDocument=t.value,c;if(t.op==="replace")return c.newDocument=t.value,c.removed=e,c;if(t.op==="move"||t.op==="copy")return c.newDocument=Db(e,t.from),t.op==="move"&&(c.removed=e),c;if(t.op==="test"){if(c.test=ug(e,t.value),c.test===!1)throw new rn("Test operation failed","TEST_OPERATION_FAILED",l,t,e);return c.newDocument=e,c}else{if(t.op==="remove")return c.removed=e,c.newDocument=null,c;if(t.op==="_get")return t.value=e,c;if(n)throw new rn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",l,t,e);return c}}else{i||(e=gs(e));var d=t.path||"",f=d.split("/"),u=e,a=1,m=f.length,w=void 0,y=void 0,o=void 0;for(typeof n=="function"?o=n:o=$b;;){if(y=f[a],y&&y.indexOf("~")!=-1&&(y=C8(y)),s&&(y=="__proto__"||y=="prototype"&&a>0&&f[a-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&w===void 0&&(u[y]===void 0?w=f.slice(0,a).join("/"):a==m-1&&(w=t.path),w!==void 0&&o(t,0,e,w)),a++,Array.isArray(u)){if(y==="-")y=u.length;else{if(n&&!CS(y))throw new rn("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",l,t,e);CS(y)&&(y=~~y)}if(a>=m){if(n&&t.op==="add"&&y>u.length)throw new rn("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",l,t,e);var c=yse[t.op].call(t,u,y,e);if(c.test===!1)throw new rn("Test operation failed","TEST_OPERATION_FAILED",l,t,e);return c}}else if(a>=m){var c=Rf[t.op].call(t,u,y,e);if(c.test===!1)throw new rn("Test operation failed","TEST_OPERATION_FAILED",l,t,e);return c}if(u=u[y],n&&a<m&&(!u||typeof u!="object"))throw new rn("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",l,t,e)}}}function mT(e,t,n,i,s){if(i===void 0&&(i=!0),s===void 0&&(s=!0),n&&!Array.isArray(t))throw new rn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(e=gs(e));for(var l=new Array(t.length),c=0,d=t.length;c<d;c++)l[c]=Yc(e,t[c],n,!0,s,c),e=l[c].newDocument;return l.newDocument=e,l}function mse(e,t,n){var i=Yc(e,t);if(i.test===!1)throw new rn("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return i.newDocument}function $b(e,t,n,i){if(typeof e!="object"||e===null||Array.isArray(e))throw new rn("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Rf[e.op]){if(typeof e.path!="string")throw new rn("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new rn('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new rn("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new rn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&RS(e.value))throw new rn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var s=e.path.split("/").length,l=i.split("/").length;if(s!==l+1&&s!==l)throw new rn("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==i)throw new rn("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var c={op:"_get",path:e.from,value:void 0},d=L8([c],n);if(d&&d.name==="OPERATION_PATH_UNRESOLVABLE")throw new rn("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new rn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function L8(e,t,n){try{if(!Array.isArray(e))throw new rn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)mT(gs(t),gs(e),n||!0);else{n=n||$b;for(var i=0;i<e.length;i++)n(e[i],i,t,void 0)}}catch(s){if(s instanceof rn)return s;throw s}}function ug(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),i=Array.isArray(t),s,l,c;if(n&&i){if(l=e.length,l!=t.length)return!1;for(s=l;s--!==0;)if(!ug(e[s],t[s]))return!1;return!0}if(n!=i)return!1;var d=Object.keys(e);if(l=d.length,l!==Object.keys(t).length)return!1;for(s=l;s--!==0;)if(!t.hasOwnProperty(d[s]))return!1;for(s=l;s--!==0;)if(c=d[s],!ug(e[c],t[c]))return!1;return!0}return e!==e&&t!==t}const wse=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:rn,_areEquals:ug,applyOperation:Yc,applyPatch:mT,applyReducer:mse,deepClone:pse,getValueByPointer:Db,validate:L8,validator:$b},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var k2=new WeakMap,bse=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),Tse=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function Ese(e){return k2.get(e)}function vse(e,t){return e.observers.get(t)}function Sse(e,t){e.observers.delete(t.callback)}function xse(e,t){t.unobserve()}function kse(e,t){var n=[],i,s=Ese(e);if(!s)s=new bse(e),k2.set(e,s);else{var l=vse(s,t);i=l&&l.observer}if(i)return i;if(i={},s.value=gs(e),t){i.callback=t,i.next=null;var c=function(){LS(i)},d=function(){clearTimeout(i.next),i.next=setTimeout(c)};typeof window<"u"&&(window.addEventListener("mouseup",d),window.addEventListener("keyup",d),window.addEventListener("mousedown",d),window.addEventListener("keydown",d),window.addEventListener("change",d))}return i.patches=n,i.object=e,i.unobserve=function(){LS(i),clearTimeout(i.next),Sse(s,i),typeof window<"u"&&(window.removeEventListener("mouseup",d),window.removeEventListener("keyup",d),window.removeEventListener("mousedown",d),window.removeEventListener("keydown",d),window.removeEventListener("change",d))},s.observers.set(t,new Tse(t,i)),i}function LS(e,t){t===void 0&&(t=!1);var n=k2.get(e.object);B2(n.value,e.object,e.patches,"",t),e.patches.length&&mT(n.value,e.patches);var i=e.patches;return i.length>0&&(e.patches=[],e.callback&&e.callback(i)),i}function B2(e,t,n,i,s){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var l=NS(t),c=NS(e),d=!1,f=c.length-1;f>=0;f--){var u=c[f],a=e[u];if(OS(t,u)&&!(t[u]===void 0&&a!==void 0&&Array.isArray(t)===!1)){var m=t[u];typeof a=="object"&&a!=null&&typeof m=="object"&&m!=null&&Array.isArray(a)===Array.isArray(m)?B2(a,m,n,i+"/"+xc(u),s):a!==m&&(s&&n.push({op:"test",path:i+"/"+xc(u),value:gs(a)}),n.push({op:"replace",path:i+"/"+xc(u),value:gs(m)}))}else Array.isArray(e)===Array.isArray(t)?(s&&n.push({op:"test",path:i+"/"+xc(u),value:gs(a)}),n.push({op:"remove",path:i+"/"+xc(u)}),d=!0):(s&&n.push({op:"test",path:i,value:e}),n.push({op:"replace",path:i,value:t}))}if(!(!d&&l.length==c.length))for(var f=0;f<l.length;f++){var u=l[f];!OS(e,u)&&t[u]!==void 0&&n.push({op:"add",path:i+"/"+xc(u),value:gs(t[u])})}}}function Bse(e,t,n){n===void 0&&(n=!1);var i=[];return B2(e,t,i,"",n),i}const Fse=Object.freeze(Object.defineProperty({__proto__:null,compare:Bse,generate:LS,observe:kse,unobserve:xse},Symbol.toStringTag,{value:"Module"}));Object.assign({},wse,Fse,{JsonPatchError:R8,deepClone:gs,escapePathComponent:xc,unescapePathComponent:C8});var Ise=/("(?:[^\\"]|\\.)*")|[:,]/g,Mse=function(t,n){var i,s,l;return n=n||{},i=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),s=i===""?1/0:n.maxLength===void 0?80:n.maxLength,l=n.replacer,function c(d,f,u){var a,m,w,y,o,T,b,S,x,k,I,B;if(d&&typeof d.toJSON=="function"&&(d=d.toJSON()),I=JSON.stringify(d,l),I===void 0)return I;if(b=s-f.length-u,I.length<=b&&(x=I.replace(Ise,function(O,A){return A||O+" "}),x.length<=b))return x;if(l!=null&&(d=JSON.parse(I),l=void 0),typeof d=="object"&&d!==null){if(S=f+i,w=[],m=0,Array.isArray(d))for(k="[",a="]",b=d.length;m<b;m++)w.push(c(d[m],S,m===b-1?0:1)||"null");else for(k="{",a="}",T=Object.keys(d),b=T.length;m<b;m++)y=T[m],o=JSON.stringify(y)+": ",B=c(d[y],S,o.length+(m===b-1?0:1)),B!==void 0&&w.push(o+B);if(w.length>0)return[k,i+w.join(`,
`+S),a].join(`
`+f)}return I}(t,"",0)};const RE=Gl(Mse);function ts(e,t,n){return e.fields=t||[],e.fname=n,e}function on(e){return e==null?null:e.fname}function ii(e){return e==null?null:e.fields}function P8(e){return e.length===1?Ase(e[0]):Ose(e)}const Ase=e=>function(t){return t[e]},Ose=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function ce(e){throw Error(e)}function Oa(e){const t=[],n=e.length;let i=null,s=0,l="",c,d,f;e=e+"";function u(){t.push(l+e.substring(c,d)),l="",c=d+1}for(c=d=0;d<n;++d)if(f=e[d],f==="\\")l+=e.substring(c,d++),c=d;else if(f===i)u(),i=null,s=-1;else{if(i)continue;c===s&&f==='"'||c===s&&f==="'"?(c=d+1,i=f):f==="."&&!s?d>c?u():c=d+1:f==="["?(d>c&&u(),s=c=d+1):f==="]"&&(s||ce("Access path missing open bracket: "+e),s>0&&u(),s=0,c=d+1)}return s&&ce("Access path missing closing bracket: "+e),i&&ce("Access path missing closing quote: "+e),d>c&&(d++,u()),t}function Yi(e,t,n){const i=Oa(e);return e=i.length===1?i[0]:e,ts((n&&n.get||P8)(i),[e],t||e)}const cp=Yi("id"),li=ts(e=>e,[],"identity"),nl=ts(()=>0,[],"zero"),sh=ts(()=>1,[],"one"),zs=ts(()=>!0,[],"true"),Ho=ts(()=>!1,[],"false");function Nse(e,t,n){const i=[t].concat([].slice.call(n));console[e].apply(console,i)}const D8=0,F2=1,I2=2,$8=3,U8=4;function M2(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Nse,i=e||D8;return{level(s){return arguments.length?(i=+s,this):i},error(){return i>=F2&&n(t||"error","ERROR",arguments),this},warn(){return i>=I2&&n(t||"warn","WARN",arguments),this},info(){return i>=$8&&n(t||"log","INFO",arguments),this},debug(){return i>=U8&&n(t||"log","DEBUG",arguments),this}}}var fe=Array.isArray;function Be(e){return e===Object(e)}const M3=e=>e!=="__proto__";function rh(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((i,s)=>{for(const l in s)if(l==="signals")i.signals=Cse(i.signals,s.signals);else{const c=l==="legend"?{layout:1}:l==="style"?!0:null;ah(i,l,s[l],c)}return i},{})}function ah(e,t,n,i){if(!M3(t))return;let s,l;if(Be(n)&&!fe(n)){l=Be(e[t])?e[t]:e[t]={};for(s in n)i&&(i===!0||i[s])?ah(l,s,n[s]):M3(s)&&(l[s]=n[s])}else e[t]=n}function Cse(e,t){if(e==null)return t;const n={},i=[];function s(l){n[l.name]||(n[l.name]=1,i.push(l))}return t.forEach(s),e.forEach(s),i}function wt(e){return e[e.length-1]}function ei(e){return e==null||e===""?null:+e}const z8=e=>t=>e*Math.exp(t),j8=e=>t=>Math.log(e*t),q8=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),G8=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,Ub=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function wT(e,t,n,i){const s=n(e[0]),l=n(wt(e)),c=(l-s)*t;return[i(s-c),i(l-c)]}function H8(e,t){return wT(e,t,ei,li)}function W8(e,t){var n=Math.sign(e[0]);return wT(e,t,j8(n),z8(n))}function V8(e,t,n){return wT(e,t,Ub(n),Ub(1/n))}function Y8(e,t,n){return wT(e,t,q8(n),G8(n))}function bT(e,t,n,i,s){const l=i(e[0]),c=i(wt(e)),d=t!=null?i(t):(l+c)/2;return[s(d+(l-d)*n),s(d+(c-d)*n)]}function A2(e,t,n){return bT(e,t,n,ei,li)}function O2(e,t,n){const i=Math.sign(e[0]);return bT(e,t,n,j8(i),z8(i))}function zb(e,t,n,i){return bT(e,t,n,Ub(i),Ub(1/i))}function N2(e,t,n,i){return bT(e,t,n,q8(i),G8(i))}function X8(e){return 1+~~(new Date(e).getMonth()/3)}function K8(e){return 1+~~(new Date(e).getUTCMonth()/3)}function xe(e){return e!=null?fe(e)?e:[e]:[]}function J8(e,t,n){let i=e[0],s=e[1],l;return s<i&&(l=s,s=i,i=l),l=s-i,l>=n-t?[t,n]:[i=Math.min(Math.max(i,t),n-l),i+l]}function lt(e){return typeof e=="function"}const Rse="descending";function C2(e,t,n){n=n||{},t=xe(t)||[];const i=[],s=[],l={},c=n.comparator||Lse;return xe(e).forEach((d,f)=>{d!=null&&(i.push(t[f]===Rse?-1:1),s.push(d=lt(d)?d:Yi(d,null,n)),(ii(d)||[]).forEach(u=>l[u]=1))}),s.length===0?null:ts(c(s,i),Object.keys(l))}const TT=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),Lse=(e,t)=>e.length===1?Pse(e[0],t[0]):Dse(e,t,e.length),Pse=(e,t)=>function(n,i){return TT(e(n),e(i))*t},Dse=(e,t,n)=>(t.push(0),function(i,s){let l,c=0,d=-1;for(;c===0&&++d<n;)l=e[d],c=TT(l(i),l(s));return c*t[d]});function ci(e){return lt(e)?e:()=>e}function R2(e,t){let n;return i=>{n&&clearTimeout(n),n=setTimeout(()=>(t(i),n=null),e)}}function ot(e){for(let t,n,i=1,s=arguments.length;i<s;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function Ea(e,t){let n=0,i,s,l,c;if(e&&(i=e.length))if(t==null){for(s=e[n];n<i&&(s==null||s!==s);s=e[++n]);for(l=c=s;n<i;++n)s=e[n],s!=null&&(s<l&&(l=s),s>c&&(c=s))}else{for(s=t(e[n]);n<i&&(s==null||s!==s);s=t(e[++n]));for(l=c=s;n<i;++n)s=t(e[n]),s!=null&&(s<l&&(l=s),s>c&&(c=s))}return[l,c]}function Q8(e,t){const n=e.length;let i=-1,s,l,c,d,f;if(t==null){for(;++i<n;)if(l=e[i],l!=null&&l>=l){s=c=l;break}if(i===n)return[-1,-1];for(d=f=i;++i<n;)l=e[i],l!=null&&(s>l&&(s=l,d=i),c<l&&(c=l,f=i))}else{for(;++i<n;)if(l=t(e[i],i,e),l!=null&&l>=l){s=c=l;break}if(i===n)return[-1,-1];for(d=f=i;++i<n;)l=t(e[i],i,e),l!=null&&(s>l&&(s=l,d=i),c<l&&(c=l,f=i))}return[d,f]}const $se=Object.prototype.hasOwnProperty;function Le(e,t){return $se.call(e,t)}const Sm={};function oh(e){let t={},n;function i(l){return Le(t,l)&&t[l]!==Sm}const s={size:0,empty:0,object:t,has:i,get(l){return i(l)?t[l]:void 0},set(l,c){return i(l)||(++s.size,t[l]===Sm&&--s.empty),t[l]=c,this},delete(l){return i(l)&&(--s.size,++s.empty,t[l]=Sm),this},clear(){s.size=s.empty=0,s.object=t={}},test(l){return arguments.length?(n=l,s):n},clean(){const l={};let c=0;for(const d in t){const f=t[d];f!==Sm&&(!n||!n(f))&&(l[d]=f,++c)}s.size=c,s.empty=0,s.object=t=l}};return e&&Object.keys(e).forEach(l=>{s.set(l,e[l])}),s}function Z8(e,t,n,i,s,l){if(!n&&n!==0)return l;const c=+n;let d=e[0],f=wt(e),u;f<d&&(u=d,d=f,f=u),u=Math.abs(t-d);const a=Math.abs(f-t);return u<a&&u<=c?i:a<=c?s:l}function Te(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),ot(i,n)}function Lf(e,t,n,i){let s=t[0],l=t[t.length-1],c;return s>l&&(c=s,s=l,l=c),n=n===void 0||n,i=i===void 0||i,(n?s<=e:s<e)&&(i?e<=l:e<l)}function Xl(e){return typeof e=="boolean"}function _l(e){return Object.prototype.toString.call(e)==="[object Date]"}function e5(e){return e&&lt(e[Symbol.iterator])}function $t(e){return typeof e=="number"}function t5(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Se(e){return typeof e=="string"}function L2(e,t,n){e&&(e=t?xe(e).map(d=>d.replace(/\\(.)/g,"$1")):xe(e));const i=e&&e.length,s=n&&n.get||P8,l=d=>s(t?[d]:Oa(d));let c;if(!i)c=function(){return""};else if(i===1){const d=l(e[0]);c=function(f){return""+d(f)}}else{const d=e.map(l);c=function(f){let u=""+d[0](f),a=0;for(;++a<i;)u+="|"+d[a](f);return u}}return ts(c,e,"key")}function n5(e,t){const n=e[0],i=wt(e),s=+t;return s?s===1?i:n+s*(i-n):n}const Use=1e4;function i5(e){e=+e||Use;let t,n,i;const s=()=>{t={},n={},i=0},l=(c,d)=>(++i>e&&(n=t,t={},i=1),t[c]=d);return s(),{clear:s,has:c=>Le(t,c)||Le(n,c),get:c=>Le(t,c)?t[c]:Le(n,c)?l(c,n[c]):void 0,set:(c,d)=>Le(t,c)?t[c]=d:l(c,d)}}function s5(e,t,n,i){const s=t.length,l=n.length;if(!l)return t;if(!s)return n;const c=i||new t.constructor(s+l);let d=0,f=0,u=0;for(;d<s&&f<l;++u)c[u]=e(t[d],n[f])>0?n[f++]:t[d++];for(;d<s;++d,++u)c[u]=t[d];for(;f<l;++f,++u)c[u]=n[f];return c}function u_(e,t){let n="";for(;--t>=0;)n+=e;return n}function r5(e,t,n,i){const s=n||" ",l=e+"",c=t-l.length;return c<=0?l:i==="left"?u_(s,c)+l:i==="center"?u_(s,~~(c/2))+l+u_(s,Math.ceil(c/2)):l+u_(s,c)}function dp(e){return e&&wt(e)-e[0]||0}function be(e){return fe(e)?"["+e.map(be)+"]":Be(e)||Se(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function P2(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const zse=e=>$t(e)||_l(e)?e:Date.parse(e);function D2(e,t){return t=t||zse,e==null||e===""?null:t(e)}function $2(e){return e==null||e===""?null:e+""}function Er(e){const t={},n=e.length;for(let i=0;i<n;++i)t[e[i]]=!0;return t}function a5(e,t,n,i){const s=i??"",l=e+"",c=l.length,d=Math.max(0,t-s.length);return c<=t?l:n==="left"?s+l.slice(c-d):n==="center"?l.slice(0,Math.ceil(d/2))+s+l.slice(c-~~(d/2)):l.slice(0,d)+s}function Jo(e,t,n){if(e)if(t){const i=e.length;for(let s=0;s<i;++s){const l=t(e[s]);l&&n(l,s,e)}}else e.forEach(n)}function jse(e){return e}function qse(e){if(e==null)return jse;var t,n,i=e.scale[0],s=e.scale[1],l=e.translate[0],c=e.translate[1];return function(d,f){f||(t=n=0);var u=2,a=d.length,m=new Array(a);for(m[0]=(t+=d[0])*i+l,m[1]=(n+=d[1])*s+c;u<a;)m[u]=d[u],++u;return m}}function Gse(e,t){for(var n,i=e.length,s=i-t;s<--i;)n=e[s],e[s++]=e[i],e[i]=n}function Hse(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return A3(e,n)})}:A3(e,t)}function A3(e,t){var n=t.id,i=t.bbox,s=t.properties==null?{}:t.properties,l=o5(e,t);return n==null&&i==null?{type:"Feature",properties:s,geometry:l}:i==null?{type:"Feature",id:n,properties:s,geometry:l}:{type:"Feature",id:n,bbox:i,properties:s,geometry:l}}function o5(e,t){var n=qse(e.transform),i=e.arcs;function s(a,m){m.length&&m.pop();for(var w=i[a<0?~a:a],y=0,o=w.length;y<o;++y)m.push(n(w[y],y));a<0&&Gse(m,o)}function l(a){return n(a)}function c(a){for(var m=[],w=0,y=a.length;w<y;++w)s(a[w],m);return m.length<2&&m.push(m[0]),m}function d(a){for(var m=c(a);m.length<4;)m.push(m[0]);return m}function f(a){return a.map(d)}function u(a){var m=a.type,w;switch(m){case"GeometryCollection":return{type:m,geometries:a.geometries.map(u)};case"Point":w=l(a.coordinates);break;case"MultiPoint":w=a.coordinates.map(l);break;case"LineString":w=c(a.arcs);break;case"MultiLineString":w=a.arcs.map(c);break;case"Polygon":w=f(a.arcs);break;case"MultiPolygon":w=a.arcs.map(f);break;default:return null}return{type:m,coordinates:w}}return u(t)}function Wse(e,t){var n={},i={},s={},l=[],c=-1;t.forEach(function(u,a){var m=e.arcs[u<0?~u:u],w;m.length<3&&!m[1][0]&&!m[1][1]&&(w=t[++c],t[c]=u,t[a]=w)}),t.forEach(function(u){var a=d(u),m=a[0],w=a[1],y,o;if(y=s[m])if(delete s[y.end],y.push(u),y.end=w,o=i[w]){delete i[o.start];var T=o===y?y:y.concat(o);i[T.start=y.start]=s[T.end=o.end]=T}else i[y.start]=s[y.end]=y;else if(y=i[w])if(delete i[y.start],y.unshift(u),y.start=m,o=s[m]){delete s[o.end];var b=o===y?y:o.concat(y);i[b.start=o.start]=s[b.end=y.end]=b}else i[y.start]=s[y.end]=y;else y=[u],i[y.start=m]=s[y.end=w]=y});function d(u){var a=e.arcs[u<0?~u:u],m=a[0],w;return e.transform?(w=[0,0],a.forEach(function(y){w[0]+=y[0],w[1]+=y[1]})):w=a[a.length-1],u<0?[w,m]:[m,w]}function f(u,a){for(var m in u){var w=u[m];delete a[w.start],delete w.start,delete w.end,w.forEach(function(y){n[y<0?~y:y]=1}),l.push(w)}}return f(s,i),f(i,s),t.forEach(function(u){n[u<0?~u:u]||l.push([u])}),l}function Vse(e){return o5(e,Yse.apply(this,arguments))}function Yse(e,t,n){var i,s,l;if(arguments.length>1)i=Xse(e,t,n);else for(s=0,i=new Array(l=e.arcs.length);s<l;++s)i[s]=s;return{type:"MultiLineString",arcs:Wse(e,i)}}function Xse(e,t,n){var i=[],s=[],l;function c(m){var w=m<0?~m:m;(s[w]||(s[w]=[])).push({i:m,g:l})}function d(m){m.forEach(c)}function f(m){m.forEach(d)}function u(m){m.forEach(f)}function a(m){switch(l=m,m.type){case"GeometryCollection":m.geometries.forEach(a);break;case"LineString":d(m.arcs);break;case"MultiLineString":case"Polygon":f(m.arcs);break;case"MultiPolygon":u(m.arcs);break}}return a(t),s.forEach(n==null?function(m){i.push(m[0].i)}:function(m){n(m[0].g,m[m.length-1].g)&&i.push(m[0].i)}),i}const jn="year",Xi="quarter",si="month",mn="week",Ki="date",Zn="day",va="dayofyear",ms="hours",ws="minutes",js="seconds",vr="milliseconds",U2=[jn,Xi,si,mn,Ki,Zn,va,ms,ws,js,vr],LE=U2.reduce((e,t,n)=>(e[t]=1+n,e),{});function z2(e){const t=xe(e).slice(),n={};return t.length||ce("Missing time unit."),t.forEach(s=>{Le(LE,s)?n[s]=1:ce(`Invalid time unit: ${s}.`)}),(n[mn]||n[Zn]?1:0)+(n[Xi]||n[si]||n[Ki]?1:0)+(n[va]?1:0)>1&&ce(`Incompatible time units: ${e}`),t.sort((s,l)=>LE[s]-LE[l]),t}const Kse={[jn]:"%Y ",[Xi]:"Q%q ",[si]:"%b ",[Ki]:"%d ",[mn]:"W%U ",[Zn]:"%a ",[va]:"%j ",[ms]:"%H:00",[ws]:"00:%M",[js]:":%S",[vr]:".%L",[`${jn}-${si}`]:"%Y-%m ",[`${jn}-${si}-${Ki}`]:"%Y-%m-%d ",[`${ms}-${ws}`]:"%H:%M"};function l5(e,t){const n=ot({},Kse,t),i=z2(e),s=i.length;let l="",c=0,d,f;for(c=0;c<s;)for(d=i.length;d>c;--d)if(f=i.slice(c,d).join("-"),n[f]!=null){l+=n[f],c=d;break}return l.trim()}const Bc=new Date;function j2(e){return Bc.setFullYear(e),Bc.setMonth(0),Bc.setDate(1),Bc.setHours(0,0,0,0),Bc}function c5(e){return f5(new Date(e))}function d5(e){return PS(new Date(e))}function f5(e){return uo.count(j2(e.getFullYear())-1,e)}function PS(e){return th.count(j2(e.getFullYear())-1,e)}function DS(e){return j2(e).getDay()}function Jse(e,t,n,i,s,l,c){if(0<=e&&e<100){const d=new Date(-1,t,n,i,s,l,c);return d.setFullYear(e),d}return new Date(e,t,n,i,s,l,c)}function u5(e){return _5(new Date(e))}function h5(e){return $S(new Date(e))}function _5(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return hl.count(t-1,e)}function $S(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return nh.count(t-1,e)}function US(e){return Bc.setTime(Date.UTC(e,0,1)),Bc.getUTCDay()}function Qse(e,t,n,i,s,l,c){if(0<=e&&e<100){const d=new Date(Date.UTC(-1,t,n,i,s,l,c));return d.setUTCFullYear(n.y),d}return new Date(Date.UTC(e,t,n,i,s,l,c))}function g5(e,t,n,i,s){const l=t||1,c=wt(e),d=(S,x,k)=>(k=k||S,Zse(n[k],i[k],S===c&&l,x)),f=new Date,u=Er(e),a=u[jn]?d(jn):ci(2012),m=u[si]?d(si):u[Xi]?d(Xi):nl,w=u[mn]&&u[Zn]?d(Zn,1,mn+Zn):u[mn]?d(mn,1):u[Zn]?d(Zn,1):u[Ki]?d(Ki,1):u[va]?d(va,1):sh,y=u[ms]?d(ms):nl,o=u[ws]?d(ws):nl,T=u[js]?d(js):nl,b=u[vr]?d(vr):nl;return function(S){f.setTime(+S);const x=a(f);return s(x,m(f),w(f,x),y(f),o(f),T(f),b(f))}}function Zse(e,t,n,i){const s=n<=1?e:i?(l,c)=>i+n*Math.floor((e(l,c)-i)/n):(l,c)=>n*Math.floor(e(l,c)/n);return t?(l,c)=>t(s(l,c),c):s}function Bu(e,t,n){return t+e*7-(n+6)%7}const ere={[jn]:e=>e.getFullYear(),[Xi]:e=>Math.floor(e.getMonth()/3),[si]:e=>e.getMonth(),[Ki]:e=>e.getDate(),[ms]:e=>e.getHours(),[ws]:e=>e.getMinutes(),[js]:e=>e.getSeconds(),[vr]:e=>e.getMilliseconds(),[va]:e=>f5(e),[mn]:e=>PS(e),[mn+Zn]:(e,t)=>Bu(PS(e),e.getDay(),DS(t)),[Zn]:(e,t)=>Bu(1,e.getDay(),DS(t))},tre={[Xi]:e=>3*e,[mn]:(e,t)=>Bu(e,0,DS(t))};function p5(e,t){return g5(e,t||1,ere,tre,Jse)}const nre={[jn]:e=>e.getUTCFullYear(),[Xi]:e=>Math.floor(e.getUTCMonth()/3),[si]:e=>e.getUTCMonth(),[Ki]:e=>e.getUTCDate(),[ms]:e=>e.getUTCHours(),[ws]:e=>e.getUTCMinutes(),[js]:e=>e.getUTCSeconds(),[vr]:e=>e.getUTCMilliseconds(),[va]:e=>_5(e),[mn]:e=>$S(e),[Zn]:(e,t)=>Bu(1,e.getUTCDay(),US(t)),[mn+Zn]:(e,t)=>Bu($S(e),e.getUTCDay(),US(t))},ire={[Xi]:e=>3*e,[mn]:(e,t)=>Bu(e,0,US(t))};function y5(e,t){return g5(e,t||1,nre,ire,Qse)}const sre={[jn]:ba,[Xi]:dg.every(3),[si]:dg,[mn]:th,[Ki]:uo,[Zn]:uo,[va]:uo,[ms]:aT,[ws]:sT,[js]:ao,[vr]:vu},rre={[jn]:Ta,[Xi]:fg.every(3),[si]:fg,[mn]:nh,[Ki]:hl,[Zn]:hl,[va]:hl,[ms]:oT,[ws]:rT,[js]:ao,[vr]:vu};function lh(e){return sre[e]}function ch(e){return rre[e]}function m5(e,t,n){return e?e.offset(t,n):void 0}function w5(e,t,n){return m5(lh(e),t,n)}function b5(e,t,n){return m5(ch(e),t,n)}function T5(e,t,n,i){return e?e.range(t,n,i):void 0}function E5(e,t,n,i){return T5(lh(e),t,n,i)}function v5(e,t,n,i){return T5(ch(e),t,n,i)}const h_=1e3,__=h_*60,g_=__*60,ET=g_*24,are=ET*7,O3=ET*30,zS=ET*365,S5=[jn,si,Ki,ms,ws,js,vr],p_=S5.slice(0,-1),y_=p_.slice(0,-1),m_=y_.slice(0,-1),ore=m_.slice(0,-1),lre=[jn,mn],N3=[jn,si],x5=[jn],Ch=[[p_,1,h_],[p_,5,5*h_],[p_,15,15*h_],[p_,30,30*h_],[y_,1,__],[y_,5,5*__],[y_,15,15*__],[y_,30,30*__],[m_,1,g_],[m_,3,3*g_],[m_,6,6*g_],[m_,12,12*g_],[ore,1,ET],[lre,1,are],[N3,1,O3],[N3,3,3*O3],[x5,1,zS]];function k5(e){const t=e.extent,n=e.maxbins||40,i=Math.abs(dp(t))/n;let s=Qg(d=>d[2]).right(Ch,i),l,c;return s===Ch.length?(l=x5,c=Sl(t[0]/zS,t[1]/zS,n)):s?(s=Ch[i/Ch[s-1][2]<Ch[s][2]/i?s-1:s],l=s[0],c=s[1]):(l=S5,c=Math.max(Sl(t[0],t[1],n),1)),{units:l,step:c}}function w_(e){const t={};return n=>t[n]||(t[n]=e(n))}function cre(e,t){return n=>{const i=e(n),s=i.indexOf(t);if(s<0)return i;let l=dre(i,s);const c=l<i.length?i.slice(l):"";for(;--l>s;)if(i[l]!=="0"){++l;break}return i.slice(0,l)+c}}function dre(e,t){let n=e.lastIndexOf("e"),i;if(n>0)return n;for(n=e.length;--n>t;)if(i=e.charCodeAt(n),i>=48&&i<=57)return n+1}function B5(e){const t=w_(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(i){const s=ld(i||",");if(s.precision==null){switch(s.precision=12,s.type){case"%":s.precision-=2;break;case"e":s.precision-=1;break}return cre(t(s),t(".1f")(1)[1])}else return t(s)},formatSpan(i,s,l,c){c=ld(c??",f");const d=Sl(i,s,l),f=Math.max(Math.abs(i),Math.abs(s));let u;if(c.precision==null)switch(c.type){case"s":return isNaN(u=R$(d,f))||(c.precision=u),n(c,f);case"":case"e":case"g":case"p":case"r":{isNaN(u=L$(d,f))||(c.precision=u-(c.type==="e"));break}case"f":case"%":{isNaN(u=C$(d))||(c.precision=u-(c.type==="%")*2);break}}return t(c)}}}let jS;F5();function F5(){return jS=B5({format:Q0,formatPrefix:CB})}function I5(e){return B5(N$(e))}function jb(e){return arguments.length?jS=I5(e):jS}function C3(e,t,n){n=n||{},Be(n)||ce(`Invalid time multi-format specifier: ${n}`);const i=t(js),s=t(ws),l=t(ms),c=t(Ki),d=t(mn),f=t(si),u=t(Xi),a=t(jn),m=e(n[vr]||".%L"),w=e(n[js]||":%S"),y=e(n[ws]||"%I:%M"),o=e(n[ms]||"%I %p"),T=e(n[Ki]||n[Zn]||"%a %d"),b=e(n[mn]||"%b %d"),S=e(n[si]||"%B"),x=e(n[Xi]||"%B"),k=e(n[jn]||"%Y");return I=>(i(I)<I?m:s(I)<I?w:l(I)<I?y:c(I)<I?o:f(I)<I?d(I)<I?T:b:a(I)<I?u(I)<I?S:x:k)(I)}function M5(e){const t=w_(e.format),n=w_(e.utcFormat);return{timeFormat:i=>Se(i)?t(i):C3(t,lh,i),utcFormat:i=>Se(i)?n(i):C3(n,ch,i),timeParse:w_(e.parse),utcParse:w_(e.utcParse)}}let qS;A5();function A5(){return qS=M5({format:KB,parse:YU,utcFormat:JB,utcParse:XU})}function O5(e){return M5(qU(e))}function hg(e){return arguments.length?qS=O5(e):qS}const GS=(e,t)=>ot({},e,t);function N5(e,t){const n=e?I5(e):jb(),i=t?O5(t):hg();return GS(n,i)}function q2(e,t){const n=arguments.length;return n&&n!==2&&ce("defaultLocale expects either zero or two arguments."),n?GS(jb(e),hg(t)):GS(jb(),hg())}function fre(){return F5(),A5(),q2()}const ure=/^(data:|([A-Za-z]+:)?\/\/)/,hre=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,_re=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,R3="file://";function gre(e,t){return n=>({options:n||{},sanitize:yre,load:pre,fileAccess:!!t,file:mre(t),http:bre(e)})}async function pre(e,t){const n=await this.sanitize(e,t),i=n.href;return n.localFile?this.file(i):this.http(i,t)}async function yre(e,t){t=ot({},this.options,t);const n=this.fileAccess,i={href:null};let s,l,c;const d=hre.test(e.replace(_re,""));(e==null||typeof e!="string"||!d)&&ce("Sanitize failure, invalid URI: "+be(e));const f=ure.test(e);return(c=t.baseURL)&&!f&&(!e.startsWith("/")&&!c.endsWith("/")&&(e="/"+e),e=c+e),l=(s=e.startsWith(R3))||t.mode==="file"||t.mode!=="http"&&!f&&n,s?e=e.slice(R3.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),l=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(i,"localFile",{value:!!l}),i.href=e,t.target&&(i.target=t.target+""),t.rel&&(i.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(i.crossOrigin=t.crossOrigin+""),i}function mre(e){return e?t=>new Promise((n,i)=>{e.readFile(t,(s,l)=>{s?i(s):n(l)})}):wre}async function wre(){ce("No file system access.")}function bre(e){return e?async function(t,n){const i=ot({},this.options.http,n),s=n&&n.response,l=await e(t,i);return l.ok?lt(l[s])?l[s]():l.text():ce(l.status+""+l.statusText)}:Tre}async function Tre(){ce("No HTTP fetch method available.")}const Ere=e=>e!=null&&e===e,vre=e=>e==="true"||e==="false"||e===!0||e===!1,Sre=e=>!Number.isNaN(Date.parse(e)),C5=e=>!Number.isNaN(+e)&&!(e instanceof Date),xre=e=>C5(e)&&Number.isInteger(+e),HS={boolean:P2,integer:ei,number:ei,date:D2,string:$2,unknown:li},xm=[vre,xre,C5,Sre],kre=["boolean","integer","number","date"];function R5(e,t){if(!e||!e.length)return"unknown";const n=e.length,i=xm.length,s=xm.map((l,c)=>c+1);for(let l=0,c=0,d,f;l<n;++l)for(f=t?e[l][t]:e[l],d=0;d<i;++d)if(s[d]&&Ere(f)&&!xm[d](f)&&(s[d]=0,++c,c===xm.length))return"string";return kre[s.reduce((l,c)=>l===0?c:l,0)-1]}function L5(e,t){return t.reduce((n,i)=>(n[i]=R5(e,i),n),{})}function L3(e){const t=function(n,i){const s={delimiter:e};return G2(n,i?ot(i,s):s)};return t.responseType="text",t}function G2(e,t){return t.header&&(e=t.header.map(be).join(t.delimiter)+`
`+e),RQ(t.delimiter).parse(e+"")}G2.responseType="text";function Bre(e){return typeof Buffer=="function"&&lt(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function H2(e,t){const n=t&&t.property?Yi(t.property):li;return Be(e)&&!Bre(e)?Fre(n(e),t):n(JSON.parse(e))}H2.responseType="json";function Fre(e,t){return!fe(e)&&e5(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const Ire={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function P5(e,t){let n,i,s,l;return e=H2(e,t),t&&t.feature?(n=Hse,s=t.feature):t&&t.mesh?(n=Vse,s=t.mesh,l=Ire[t.filter]):ce("Missing TopoJSON feature or mesh parameter."),i=(i=e.objects[s])?n(e,i,l):ce("Invalid TopoJSON object: "+s),i&&i.features||[i]}P5.responseType="json";const fw={dsv:G2,csv:L3(","),tsv:L3("	"),json:H2,topojson:P5};function W2(e,t){return arguments.length>1?(fw[e]=t,this):Le(fw,e)?fw[e]:null}function D5(e){const t=W2(e);return t&&t.responseType||"text"}function $5(e,t,n,i){t=t||{};const s=W2(t.type||"json");return s||ce("Unknown data format type: "+t.type),e=s(e,t),t.parse&&Mre(e,t.parse,n,i),Le(e,"columns")&&delete e.columns,e}function Mre(e,t,n,i){if(!e.length)return;const s=hg();n=n||s.timeParse,i=i||s.utcParse;let l=e.columns||Object.keys(e[0]),c,d,f,u,a,m;t==="auto"&&(t=L5(e,l)),l=Object.keys(t);const w=l.map(y=>{const o=t[y];let T,b;if(o&&(o.startsWith("date:")||o.startsWith("utc:")))return T=o.split(/:(.+)?/,2),b=T[1],(b[0]==="'"&&b[b.length-1]==="'"||b[0]==='"'&&b[b.length-1]==='"')&&(b=b.slice(1,-1)),(T[0]==="utc"?i:n)(b);if(!HS[o])throw Error("Illegal format pattern: "+y+":"+o);return HS[o]});for(f=0,a=e.length,m=l.length;f<a;++f)for(c=e[f],u=0;u<m;++u)d=l[u],c[d]=w[u](c[d])}const vT=gre(typeof fetch<"u"&&fetch,null);function ST(e){const t=e||li,n=[],i={};return n.add=s=>{const l=t(s);return i[l]||(i[l]=1,n.push(s)),n},n.remove=s=>{const l=t(s);if(i[l]){i[l]=0;const c=n.indexOf(s);c>=0&&n.splice(c,1)}return n},n}async function uw(e,t){try{await t(e)}catch(n){e.error(n)}}const U5=Symbol("vega_id");let Are=1;function xT(e){return!!(e&&Ce(e))}function Ce(e){return e[U5]}function z5(e,t){return e[U5]=t,e}function It(e){const t=e===Object(e)?e:{data:e};return Ce(t)?t:z5(t,Are++)}function V2(e){return kT(e,It({}))}function kT(e,t){for(const n in e)t[n]=e[n];return t}function j5(e,t){return z5(t,Ce(e))}function qd(e,t){return e?t?(n,i)=>e(n,i)||Ce(t(n))-Ce(t(i)):(n,i)=>e(n,i)||Ce(n)-Ce(i):null}function q5(e){return e&&e.constructor===Gd}function Gd(){const e=[],t=[],n=[],i=[],s=[];let l=null,c=!1;return{constructor:Gd,insert(d){const f=xe(d),u=f.length;for(let a=0;a<u;++a)e.push(f[a]);return this},remove(d){const f=lt(d)?i:t,u=xe(d),a=u.length;for(let m=0;m<a;++m)f.push(u[m]);return this},modify(d,f,u){const a={field:f,value:ci(u)};return lt(d)?(a.filter=d,s.push(a)):(a.tuple=d,n.push(a)),this},encode(d,f){return lt(d)?s.push({filter:d,field:f}):n.push({tuple:d,field:f}),this},clean(d){return l=d,this},reflow(){return c=!0,this},pulse(d,f){const u={},a={};let m,w,y,o,T,b;for(m=0,w=f.length;m<w;++m)u[Ce(f[m])]=1;for(m=0,w=t.length;m<w;++m)T=t[m],u[Ce(T)]=-1;for(m=0,w=i.length;m<w;++m)o=i[m],f.forEach(x=>{o(x)&&(u[Ce(x)]=-1)});for(m=0,w=e.length;m<w;++m)T=e[m],b=Ce(T),u[b]?u[b]=1:d.add.push(It(e[m]));for(m=0,w=f.length;m<w;++m)T=f[m],u[Ce(T)]<0&&d.rem.push(T);function S(x,k,I){I?x[k]=I(x):d.encode=k,c||(a[Ce(x)]=x)}for(m=0,w=n.length;m<w;++m)y=n[m],T=y.tuple,o=y.field,b=u[Ce(T)],b>0&&(S(T,o,y.value),d.modifies(o));for(m=0,w=s.length;m<w;++m)y=s[m],o=y.filter,f.forEach(x=>{o(x)&&u[Ce(x)]>0&&S(x,y.field,y.value)}),d.modifies(y.field);if(c)d.mod=t.length||i.length?f.filter(x=>u[Ce(x)]>0):f.slice();else for(b in a)d.mod.push(a[b]);return(l||l==null&&(t.length||i.length))&&d.clean(!0),d}}}const hw="_:mod:_";function BT(){Object.defineProperty(this,hw,{writable:!0,value:{}})}BT.prototype={set(e,t,n,i){const s=this,l=s[e],c=s[hw];return t!=null&&t>=0?(l[t]!==n||i)&&(l[t]=n,c[t+":"+e]=-1,c[e]=-1):(l!==n||i)&&(s[e]=n,c[e]=fe(n)?1+n.length:-1),s},modified(e,t){const n=this[hw];if(arguments.length){if(fe(e)){for(let i=0;i<e.length;++i)if(n[e[i]])return!0;return!1}}else{for(const i in n)if(n[i])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[hw]={},this}};let Ore=0;const Nre="pulse",Cre=new BT,Rre=1,Lre=2;function jt(e,t,n,i){this.id=++Ore,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,i)}function P3(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}jt.prototype={targets(){return this._targets||(this._targets=ST(cp))},set(e){return this.value!==e?(this.value=e,1):0},skip:P3(Rre),modified:P3(Lre),parameters(e,t,n){t=t!==!1;const i=this._argval=this._argval||new BT,s=this._argops=this._argops||[],l=[];let c,d,f,u;const a=(m,w,y)=>{y instanceof jt?(y!==this&&(t&&y.targets().add(this),l.push(y)),s.push({op:y,name:m,index:w})):i.set(m,w,y)};for(c in e)if(d=e[c],c===Nre)xe(d).forEach(m=>{m instanceof jt?m!==this&&(m.targets().add(this),l.push(m)):ce("Pulse parameters must be operator instances.")}),this.source=d;else if(fe(d))for(i.set(c,-1,Array(f=d.length)),u=0;u<f;++u)a(c,u,d[u]);else a(c,-1,d);return this.marshall().clear(),n&&(s.initonly=!0),l},marshall(e){const t=this._argval||Cre,n=this._argops;let i,s,l,c;if(n){const d=n.length;for(s=0;s<d;++s)i=n[s],l=i.op,c=l.modified()&&l.stamp===e,t.set(i.name,i.index,l.value,c);if(n.initonly){for(s=0;s<d;++s)i=n[s],i.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,i,s;if(e)for(t=0,n=e.length;t<n;++t)i=e[t],s=i.op,s._targets&&s._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),i=t.call(this,n,e);if(n.clear(),i!==this.value)this.value=i;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function Pre(e,t,n,i){let s=1,l;return e instanceof jt?l=e:e&&e.prototype instanceof jt?l=new e:lt(e)?l=new jt(null,e):(s=0,l=new jt(e,t)),this.rank(l),s&&(i=n,n=t),n&&this.connect(l,l.parameters(n,i)),this.touch(l),l}function Dre(e,t){const n=e.rank,i=t.length;for(let s=0;s<i;++s)if(n<t[s].rank){this.rerank(e);return}}let $re=0;function FT(e,t,n){this.id=++$re,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Wo(e,t,n){return new FT(e,t,n)}FT.prototype={_filter:zs,_apply:li,targets(){return this._targets||(this._targets=ST(cp))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,i=n?n.length:0;for(let s=0;s<i;++s)n[s].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Wo(e);return this.targets().add(t),t},apply(e){const t=Wo(null,e);return this.targets().add(t),t},merge(){const e=Wo();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Wo();return this.targets().add(Wo(null,null,R2(e,n=>{const i=n.dataflow;t.receive(n),i&&i.run&&i.run()}))),t},between(e,t){let n=!1;return e.targets().add(Wo(null,null,()=>n=!0)),t.targets().add(Wo(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=zs,this._targets=null}};function Ure(e,t,n,i){const s=this,l=Wo(n,i),c=function(u){u.dataflow=s;try{l.receive(u)}catch(a){s.error(a)}finally{s.run()}};let d;typeof e=="string"&&typeof document<"u"?d=document.querySelectorAll(e):d=xe(e);const f=d.length;for(let u=0;u<f;++u)d[u].addEventListener(t,c);return l}function zre(e,t){const n=this.locale();return $5(e,t,n.timeParse,n.utcParse)}function jre(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function qre(e,t){const n=this;let i=0,s;try{s=await n.loader().load(e,{context:"dataflow",response:D5(t&&t.type)});try{s=n.parse(s,t)}catch(l){i=-2,n.warn("Data ingestion failed",e,l)}}catch(l){i=-1,n.warn("Loading failed",e,l)}return{data:s,status:i}}async function Gre(e,t,n){const i=this,s=i._pending||Hre(i);s.requests+=1;const l=await i.request(t,n);return i.pulse(e,i.changeset().remove(zs).insert(l.data||[])),s.done(),l}function Hre(e){let t;const n=new Promise(i=>t=i);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const Wre={skip:!0};function Vre(e,t,n,i,s){return(e instanceof jt?Xre:Yre)(this,e,t,n,i,s),this}function Yre(e,t,n,i,s,l){const c=ot({},l,Wre);let d,f;lt(n)||(n=ci(n)),i===void 0?d=u=>e.touch(n(u)):lt(i)?(f=new jt(null,i,s,!1),d=u=>{f.evaluate(u);const a=n(u),m=f.value;q5(m)?e.pulse(a,m,l):e.update(a,m,c)}):d=u=>e.update(n(u),i,c),t.apply(d)}function Xre(e,t,n,i,s,l){if(i===void 0)t.targets().add(n);else{const c=l||{},d=new jt(null,Kre(n,i),s,!1);d.modified(c.force),d.rank=t.rank,t.targets().add(d),n&&(d.skip(!0),d.value=n.value,d.targets().add(n),e.connect(n,[d]))}}function Kre(e,t){return t=lt(t)?t:ci(t),e?function(n,i){const s=t(n,i);return e.skip()||(e.skip(s!==this.value).value=s),s}:t}function Jre(e){e.rank=++this._rank}function Qre(e){const t=[e];let n,i,s;for(;t.length;)if(this.rank(n=t.pop()),i=n._targets)for(s=i.length;--s>=0;)t.push(n=i[s]),n===e&&ce("Cycle detected in dataflow graph.")}const qb={},Wr=1<<0,Qo=1<<1,Xa=1<<2,Zre=Wr|Qo,D3=Wr|Xa,cf=Wr|Qo|Xa,$3=1<<3,Rh=1<<4,U3=1<<5,z3=1<<6;function gl(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function PE(e,t){const n=[];return Jo(e,t,i=>n.push(i)),n}function j3(e,t){const n={};return e.visit(t,i=>{n[Ce(i)]=1}),i=>n[Ce(i)]?null:i}function km(e,t){return e?(n,i)=>e(n,i)&&t(n,i):t}gl.prototype={StopPropagation:qb,ADD:Wr,REM:Qo,MOD:Xa,ADD_REM:Zre,ADD_MOD:D3,ALL:cf,REFLOW:$3,SOURCE:Rh,NO_SOURCE:U3,NO_FIELDS:z3,fork(e){return new gl(this.dataflow).init(this,e)},clone(){const e=this.fork(cf);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(cf|Rh)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new gl(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&z3)&&(n.fields=e.fields),t&Wr?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Qo?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Xa?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&U3?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||cf;return t&Wr&&this.add.length||t&Qo&&this.rem.length||t&Xa&&this.mod.length},reflow(e){if(e)return this.fork(cf).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Xa,j3(this,Wr))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return fe(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?fe(e)?e.some(i=>n[i]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Wr&&(n.addF=km(n.addF,t)),e&Qo&&(n.remF=km(n.remF,t)),e&Xa&&(n.modF=km(n.modF,t)),e&Rh&&(n.srcF=km(n.srcF,t)),n},materialize(e){e=e||cf;const t=this;return e&Wr&&t.addF&&(t.add=PE(t.add,t.addF),t.addF=null),e&Qo&&t.remF&&(t.rem=PE(t.rem,t.remF),t.remF=null),e&Xa&&t.modF&&(t.mod=PE(t.mod,t.modF),t.modF=null),e&Rh&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,i=t;if(e&Rh)return Jo(n.source,n.srcF,i),n;e&Wr&&Jo(n.add,n.addF,i),e&Qo&&Jo(n.rem,n.remF,i),e&Xa&&Jo(n.mod,n.modF,i);const s=n.source;if(e&$3&&s){const l=n.add.length+n.mod.length;l===s.length||(l?Jo(s,j3(n,D3),i):Jo(s,n.srcF,i))}return n}};function Y2(e,t,n,i){const s=this;let l=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=i||null,this.pulses=n;for(const c of n)if(c.stamp===t){if(c.fields){const d=s.fields||(s.fields={});for(const f in c.fields)d[f]=1}c.changed(s.ADD)&&(l|=s.ADD),c.changed(s.REM)&&(l|=s.REM),c.changed(s.MOD)&&(l|=s.MOD)}this.changes=l}Te(Y2,gl,{fork(e){const t=new gl(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?fe(e)?e.some(i=>n[i]):n[e]:0},filter(){ce("MultiPulse does not support filtering.")},materialize(){ce("MultiPulse does not support materialization.")},visit(e,t){const n=this,i=n.pulses,s=i.length;let l=0;if(e&n.SOURCE)for(;l<s;++l)i[l].visit(e,t);else for(;l<s;++l)i[l].stamp===n.stamp&&i[l].visit(e,t);return n}});async function eae(e,t,n){const i=this,s=[];if(i._pulse)return G5(i);if(i._pending&&await i._pending,t&&await uw(i,t),!i._touched.length)return i.debug("Dataflow invoked, but nothing to do."),i;const l=++i._clock;i._pulse=new gl(i,l,e),i._touched.forEach(a=>i._enqueue(a,!0)),i._touched=ST(cp);let c=0,d,f,u;try{for(;i._heap.size()>0;){if(d=i._heap.pop(),d.rank!==d.qrank){i._enqueue(d,!0);continue}f=d.run(i._getPulse(d,e)),f.then?f=await f:f.async&&(s.push(f.async),f=qb),f!==qb&&d._targets&&d._targets.forEach(a=>i._enqueue(a)),++c}}catch(a){i._heap.clear(),u=a}if(i._input={},i._pulse=null,i.debug(`Pulse ${l}: ${c} operators`),u&&(i._postrun=[],i.error(u)),i._postrun.length){const a=i._postrun.sort((m,w)=>w.priority-m.priority);i._postrun=[];for(let m=0;m<a.length;++m)await uw(i,a[m].callback)}return n&&await uw(i,n),s.length&&Promise.all(s).then(a=>i.runAsync(null,()=>{a.forEach(m=>{try{m(i)}catch(w){i.error(w)}})})),i}async function tae(e,t,n){for(;this._running;)await this._running;const i=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(i,i),this._running}function nae(e,t,n){return this._pulse?G5(this):(this.evaluate(e,t,n),this)}function iae(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(i){this.error(i)}}function G5(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function sae(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function rae(e,t){const n=e.source,i=this._clock;return n&&fe(n)?new Y2(this,i,n.map(s=>s.pulse),t):this._input[e.id]||aae(this._pulse,n&&n.pulse)}function aae(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==qb&&(e.source=t.source),e)}const X2={skip:!1,force:!1};function oae(e,t){const n=t||X2;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function lae(e,t,n){const i=n||X2;return(e.set(t)||i.force)&&this.touch(e,i),this}function cae(e,t,n){this.touch(e,n||X2);const i=new gl(this,this._clock+(this._pulse?0:1)),s=e.pulse&&e.pulse.source||[];return i.target=e,this._input[e.id]=t.pulse(i,s),this}function dae(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),H5(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let i;return t.length?(i=t[0],t[0]=n,fae(t,0,e)):i=n,i}}}function H5(e,t,n,i){let s,l;const c=e[n];for(;n>t;){if(l=n-1>>1,s=e[l],i(c,s)<0){e[n]=s,n=l;continue}break}return e[n]=c}function fae(e,t,n){const i=t,s=e.length,l=e[t];let c=(t<<1)+1,d;for(;c<s;)d=c+1,d<s&&n(e[c],e[d])>=0&&(c=d),e[t]=e[c],t=c,c=(t<<1)+1;return e[t]=l,H5(e,i,t,n)}function Jf(){this.logger(M2()),this.logLevel(F2),this._clock=0,this._rank=0,this._locale=q2();try{this._loader=vT()}catch{}this._touched=ST(cp),this._input={},this._pulse=null,this._heap=dae((e,t)=>e.qrank-t.qrank),this._postrun=[]}function Lh(e){return function(){return this._log[e].apply(this,arguments)}}Jf.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:Lh("error"),warn:Lh("warn"),info:Lh("info"),debug:Lh("debug"),logLevel:Lh("level"),cleanThreshold:1e4,add:Pre,connect:Dre,rank:Jre,rerank:Qre,pulse:cae,touch:oae,update:lae,changeset:Gd,ingest:jre,parse:zre,preload:Gre,request:qre,events:Ure,on:Vre,evaluate:eae,run:nae,runAsync:tae,runAfter:iae,_enqueue:sae,_getPulse:rae};function re(e,t){jt.call(this,e,null,t)}Te(re,jt,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const Fu={};function W5(e){const t=V5(e);return t&&t.Definition||null}function V5(e){return e=e&&e.toLowerCase(),Le(Fu,e)?Fu[e]:null}function uae(e){return t=>{const n=e.length;let i=1,s=String(e[0](t));for(;i<n;++i)s+="|"+e[i](t);return s}}function WS(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:uae(e)}function Y5(e,t,n){return n||e+(t?"_"+t:"")}const DE=()=>{},hae={init:DE,add:DE,rem:DE,idx:0},_g={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.sum,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3}},fp=Object.keys(_g).filter(e=>e!=="__count__");function _ae(e,t){return n=>ot({name:e,out:n||e},hae,t)}[...fp,"__count__"].forEach(e=>{_g[e]=_ae(e,_g[e])});function X5(e,t){return _g[e](t)}function K5(e,t){return e.idx-t.idx}function gae(e){const t={};e.forEach(i=>t[i.name]=i);const n=i=>{i.req&&i.req.forEach(s=>{t[s]||n(t[s]=_g[s]())})};return e.forEach(n),Object.values(t).sort(K5)}function pae(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.init(this))}function yae(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function mae(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function wae(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function J5(e,t){const n=t||li,i=gae(e),s=e.slice().sort(K5);function l(c){this._ops=i,this._out=s,this.cell=c,this.init()}return l.prototype.init=pae,l.prototype.add=yae,l.prototype.rem=mae,l.prototype.set=wae,l.prototype.get=n,l.fields=e.map(c=>c.out),l}function K2(e){this._key=e?Yi(e):Ce,this.reset()}const Wn=K2.prototype;Wn.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Wn.add=function(e){this._add.push(e)};Wn.rem=function(e){this._rem.push(e)};Wn.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,i=e.length,s=t.length,l=Array(i-s),c={};let d,f,u;for(d=0;d<s;++d)c[n(t[d])]=1;for(d=0,f=0;d<i;++d)c[n(u=e[d])]?c[n(u)]=0:l[f++]=u;return this._rem=[],this._add=l};Wn.distinct=function(e){const t=this.values(),n={};let i=t.length,s=0,l;for(;--i>=0;)l=e(t[i])+"",Le(n,l)||(n[l]=1,++s);return s};Wn.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=Q8(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Wn.argmin=function(e){return this.extent(e)[0]||{}};Wn.argmax=function(e){return this.extent(e)[1]||{}};Wn.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Wn.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Wn.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=l2(this.values(),e),this._get=e),this._q};Wn.q1=function(e){return this.quartile(e)[0]};Wn.q2=function(e){return this.quartile(e)[1]};Wn.q3=function(e){return this.quartile(e)[2]};Wn.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=b8(this.values(),1e3,.05,e),this._get=e),this._ci};Wn.ci0=function(e){return this.ci(e)[0]};Wn.ci1=function(e){return this.ci(e)[1]};function Bl(e){re.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Bl.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:fp},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};Te(Bl,re,{transform(e,t){const n=this,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),s=e.modified();return n.stamp=i.stamp,n.value&&(s||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=s?n.init(e):Object.create(null),t.visit(t.SOURCE,l=>n.add(l))):(n.value=n.value||n.init(e),t.visit(t.REM,l=>n.rem(l)),t.visit(t.ADD,l=>n.add(l))),i.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&i.clean(!0).runAfter(()=>this.clean()),n.changes(i)},cross(){const e=this,t=e.value,n=e._dnames,i=n.map(()=>({})),s=n.length;function l(d){let f,u,a,m;for(f in d)for(a=d[f].tuple,u=0;u<s;++u)i[u][m=a[n[u]]]=m}l(e._prev),l(t);function c(d,f,u){const a=n[u],m=i[u++];for(const w in m){const y=d?d+"|"+w:w;f[a]=m[w],u<s?c(y,f,u):t[y]||e.cell(y,f)}}c("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],i={};function s(b){const S=xe(ii(b)),x=S.length;let k=0,I;for(;k<x;++k)i[I=S[k]]||(i[I]=1,t.push(I))}this._dims=xe(e.groupby),this._dnames=this._dims.map(b=>{const S=on(b);return s(b),n.push(S),S}),this.cellkey=e.key?e.key:WS(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const l=e.fields||[null],c=e.ops||["count"],d=e.as||[],f=l.length,u={};let a,m,w,y,o,T;for(f!==c.length&&ce("Unmatched number of fields and aggregate ops."),T=0;T<f;++T){if(a=l[T],m=c[T],a==null&&m!=="count"&&ce("Null aggregate field specified."),y=on(a),o=Y5(m,y,d[T]),n.push(o),m==="count"){this._counts.push(o);continue}w=u[y],w||(s(a),w=u[y]=[],w.field=a,this._measures.push(w)),m!=="count"&&(this._countOnly=!1),w.push(X5(m,o))}return this._measures=this._measures.map(b=>J5(b,b.field)),Object.create(null)},cellkey:WS(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const i=this._measures,s=i.length;n.agg=Array(s);for(let l=0;l<s;++l)n.agg[l]=new i[l](n)}return n.store&&(n.data=new K2),n},newtuple(e,t){const n=this._dnames,i=this._dims,s=i.length,l={};for(let c=0;c<s;++c)l[n[c]]=i[c](e);return t?j5(t.tuple,l):It(l)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const i=n.agg;for(let s=0,l=i.length;s<l;++s)i[s].add(i[s].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const i=n.agg;for(let s=0,l=i.length;s<l;++s)i[s].rem(i[s].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let i=0,s=n.length;i<s;++i)t[n[i]]=e.num;if(!this._countOnly){const i=e.agg;for(let s=0,l=i.length;s<l;++s)i[s].set(t)}return t},changes(e){const t=this._adds,n=this._mods,i=this._prev,s=this._drop,l=e.add,c=e.rem,d=e.mod;let f,u,a,m;if(i)for(u in i)f=i[u],(!s||f.num)&&c.push(f.tuple);for(a=0,m=this._alen;a<m;++a)l.push(this.celltuple(t[a])),t[a]=null;for(a=0,m=this._mlen;a<m;++a)f=n[a],(f.num===0&&s?c:d).push(this.celltuple(f)),n[a]=null;return this._alen=this._mlen=0,this._prev=null,e}});const bae=1e-14;function J2(e){re.call(this,null,e)}J2.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};Te(J2,re,{transform(e,t){const n=e.interval!==!1,i=this._bins(e),s=i.start,l=i.step,c=e.as||["bin0","bin1"],d=c[0],f=c[1];let u;return e.modified()?(t=t.reflow(!0),u=t.SOURCE):u=t.modified(ii(e.field))?t.ADD_MOD:t.ADD,t.visit(u,n?a=>{const m=i(a);a[d]=m,a[f]=m==null?null:s+l*(1+(m-s)/l)}:a=>a[d]=i(a)),t.modifies(n?c:d)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=d2(e),i=n.step;let s=n.start,l=s+Math.ceil((n.stop-s)/i)*i,c,d;(c=e.anchor)!=null&&(d=c-(s+i*Math.floor((c-s)/i)),s+=d,l+=d);const f=function(u){let a=ei(t(u));return a==null?null:a<s?-1/0:a>l?1/0:(a=Math.max(s,Math.min(a,l-i)),s+i*Math.floor(bae+(a-s)/i))};return f.start=s,f.stop=n.stop,f.step=i,this.value=ts(f,ii(t),e.name||"bin_"+on(t))}});function Q5(e,t,n){const i=e;let s=t||[],l=n||[],c={},d=0;return{add:f=>l.push(f),remove:f=>c[i(f)]=++d,size:()=>s.length,data:(f,u)=>(d&&(s=s.filter(a=>!c[i(a)]),c={},d=0),u&&f&&s.sort(f),l.length&&(s=f?s5(f,s,l.sort(f)):s.concat(l),l=[]),s)}}function Q2(e){re.call(this,[],e)}Q2.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};Te(Q2,re,{transform(e,t){const n=t.fork(t.ALL),i=Q5(Ce,this.value,n.materialize(n.ADD).add),s=e.sort,l=t.changed()||s&&(e.modified("sort")||t.modified(s.fields));return n.visit(n.REM,i.remove),this.modified(l),this.value=n.source=i.data(qd(s),l),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function Z5(e){jt.call(this,null,Tae,e)}Te(Z5,jt);function Tae(e){return this.value&&!e.modified()?this.value:C2(e.fields,e.orders)}function Z2(e){re.call(this,null,e)}Z2.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function Eae(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}Te(Z2,re,{transform(e,t){const n=m=>w=>{for(var y=Eae(d(w),e.case,l)||[],o,T=0,b=y.length;T<b;++T)c.test(o=y[T])||m(o)},i=this._parameterCheck(e,t),s=this._counts,l=this._match,c=this._stop,d=e.field,f=e.as||["text","count"],u=n(m=>s[m]=1+(s[m]||0)),a=n(m=>s[m]-=1);return i?t.visit(t.SOURCE,u):(t.visit(t.ADD,u),t.visit(t.REM,a)),this._finish(t,f)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,i=this._tuples||(this._tuples={}),s=t[0],l=t[1],c=e.fork(e.NO_SOURCE|e.NO_FIELDS);let d,f,u;for(d in n)f=i[d],u=n[d]||0,!f&&u?(i[d]=f=It({}),f[s]=d,f[l]=u,c.add.push(f)):u===0?(f&&c.rem.push(f),n[d]=null,i[d]=null):f[l]!==u&&(f[l]=u,c.mod.push(f));return c.modifies(t)}});function eF(e){re.call(this,null,e)}eF.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};Te(eF,re,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.as||["a","b"],s=i[0],l=i[1],c=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let d=this.value;return c?(d&&(n.rem=d),d=t.materialize(t.SOURCE).source,n.add=this.value=vae(d,s,l,e.filter||zs)):n.mod=d,n.source=this.value,n.modifies(i)}});function vae(e,t,n,i){for(var s=[],l={},c=e.length,d=0,f,u;d<c;++d)for(l[t]=u=e[d],f=0;f<c;++f)l[n]=e[f],i(l)&&(s.push(It(l)),l={},l[t]=u);return s}const q3={kde:h2,mixture:S8,normal:u2,lognormal:v8,uniform:x8},Sae="distributions",G3="function",xae="field";function ez(e,t){const n=e[G3];Le(q3,n)||ce("Unknown distribution function: "+n);const i=q3[n]();for(const s in e)s===xae?i.data((e.from||t()).map(e[s])):s===Sae?i[s](e[s].map(l=>ez(l,t))):typeof i[s]===G3&&i[s](e[s]);return i}function tF(e){re.call(this,null,e)}const tz=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],kae={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:tz},{name:"weights",type:"number",array:!0}]};tF.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:tz.concat(kae)},{name:"as",type:"string",array:!0,default:["value","density"]}]};Te(tF,re,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=ez(e.distribution,Bae(t)),s=e.steps||e.minsteps||25,l=e.steps||e.maxsteps||200;let c=e.method||"pdf";c!=="pdf"&&c!=="cdf"&&ce("Invalid density method: "+c),!e.extent&&!i.data&&ce("Missing density extent parameter."),c=i[c];const d=e.as||["value","density"],f=e.extent||Ea(i.data()),u=yT(c,f,s,l).map(a=>{const m={};return m[d[0]]=a[0],m[d[1]]=a[1],It(m)});this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function Bae(e){return()=>e.materialize(e.SOURCE).source}function nz(e,t){return e?e.map((n,i)=>t[i]||on(n)):null}function nF(e,t,n){const i=[],s=m=>m(f);let l,c,d,f,u,a;if(t==null)i.push(e.map(n));else for(l={},c=0,d=e.length;c<d;++c)f=e[c],u=t.map(s),a=l[u],a||(l[u]=a=[],a.dims=u,i.push(a)),a.push(n(f));return i}const iz="bin";function iF(e){re.call(this,null,e)}iF.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:iz}]};const Fae=(e,t)=>dp(Ea(e,t))/30;Te(iF,re,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,i=nF(t.source,e.groupby,li),s=e.smooth||!1,l=e.field,c=e.step||Fae(n,l),d=qd((o,T)=>l(o)-l(T)),f=e.as||iz,u=i.length;let a=1/0,m=-1/0,w=0,y;for(;w<u;++w){const o=i[w].sort(d);y=-1;for(const T of T8(o,c,s,l))T<a&&(a=T),T>m&&(m=T),o[++y][f]=T}return this.value={start:a,stop:m,step:c},t.reflow(!0).modifies(f)}});function sz(e){jt.call(this,null,Iae,e),this.modified(!0)}Te(sz,jt);function Iae(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:ts(n=>t(n,e),ii(t),on(t))}function sF(e){re.call(this,[void 0,void 0],e)}sF.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};Te(sF,re,{transform(e,t){const n=this.value,i=e.field,s=t.changed()||t.modified(i.fields)||e.modified("field");let l=n[0],c=n[1];if((s||l==null)&&(l=1/0,c=-1/0),t.visit(s?t.SOURCE:t.ADD,d=>{const f=ei(i(d));f!=null&&(f<l&&(l=f),f>c&&(c=f))}),!Number.isFinite(l)||!Number.isFinite(c)){let d=on(i);d&&(d=` for field "${d}"`),t.dataflow.warn(`Infinite extent${d}: [${l}, ${c}]`),l=c=void 0}this.value=[l,c]}});function rF(e,t){jt.call(this,e),this.parent=t,this.count=0}Te(rF,jt,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function IT(e){re.call(this,{},e),this._keys=oh();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let i=0,s=t.active;i<s;++i)n(t[i],i,t)}}Te(IT,re,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,i){const s=this.value;let l=Le(s,e)&&s[e],c,d;return l?l.value.stamp<n.stamp&&(l.init(n),this.activate(l)):(d=i||(d=this._group[e])&&d.tuple,c=n.dataflow,l=new rF(n.fork(n.NO_SOURCE),this),c.add(l).connect(t(c,e,d)),s[e]=l,this.activate(l)),l},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const i=e[n].detachSubflow;i&&i(),delete e[n],++t}if(t){const n=this._targets.filter(i=>i&&i.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,i=e?e.length:0;let s=0;for(;s<i;++s)t[s]=e[s];for(;s<n&&t[s]!=null;++s)t[s]=null;t.active=i},transform(e,t){const n=t.dataflow,i=e.key,s=e.subflow,l=this._keys,c=e.modified("key"),d=f=>this.subflow(f,s,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,f=>{const u=Ce(f),a=l.get(u);a!==void 0&&(l.delete(u),d(a).rem(f))}),t.visit(t.ADD,f=>{const u=i(f);l.set(Ce(f),u),d(u).add(f)}),c||t.modified(i.fields)?t.visit(t.MOD,f=>{const u=Ce(f),a=l.get(u),m=i(f);a===m?d(m).mod(f):(l.set(u,m),d(a).rem(f),d(m).add(f))}):t.changed(t.MOD)&&t.visit(t.MOD,f=>{d(l.get(Ce(f))).mod(f)}),c&&t.visit(t.REFLOW,f=>{const u=Ce(f),a=l.get(u),m=i(f);a!==m&&(l.set(u,m),d(a).rem(f),d(m).add(f))}),t.clean()?n.runAfter(()=>{this.clean(),l.clean()}):l.empty>n.cleanThreshold&&n.runAfter(l.clean),t}});function rz(e){jt.call(this,null,Mae,e)}Te(rz,jt);function Mae(e){return this.value&&!e.modified()?this.value:fe(e.name)?xe(e.name).map(t=>Yi(t)):Yi(e.name,e.as)}function aF(e){re.call(this,oh(),e)}aF.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};Te(aF,re,{transform(e,t){const n=t.dataflow,i=this.value,s=t.fork(),l=s.add,c=s.rem,d=s.mod,f=e.expr;let u=!0;t.visit(t.REM,m=>{const w=Ce(m);i.has(w)?i.delete(w):c.push(m)}),t.visit(t.ADD,m=>{f(m,e)?l.push(m):i.set(Ce(m),1)});function a(m){const w=Ce(m),y=f(m,e),o=i.get(w);y&&o?(i.delete(w),l.push(m)):!y&&!o?(i.set(w,1),c.push(m)):u&&y&&!o&&d.push(m)}return t.visit(t.MOD,a),e.modified()&&(u=!1,t.visit(t.REFLOW,a)),i.empty>n.cleanThreshold&&n.runAfter(i.clean),s}});function oF(e){re.call(this,[],e)}oF.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};Te(oF,re,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,s=nz(i,e.as||[]),l=e.index||null,c=s.length;return n.rem=this.value,t.visit(t.SOURCE,d=>{const f=i.map(o=>o(d)),u=f.reduce((o,T)=>Math.max(o,T.length),0);let a=0,m,w,y;for(;a<u;++a){for(w=V2(d),m=0;m<c;++m)w[s[m]]=(y=f[m][a])==null?null:y;l&&(w[l]=a),n.add.push(w)}}),this.value=n.source=n.add,l&&n.modifies(l),n.modifies(s)}});function lF(e){re.call(this,[],e)}lF.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};Te(lF,re,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,s=i.map(on),l=e.as||["key","value"],c=l[0],d=l[1],f=i.length;return n.rem=this.value,t.visit(t.SOURCE,u=>{for(let a=0,m;a<f;++a)m=V2(u),m[c]=s[a],m[d]=i[a](u),n.add.push(m)}),this.value=n.source=n.add,n.modifies(l)}});function cF(e){re.call(this,null,e)}cF.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};Te(cF,re,{transform(e,t){const n=e.expr,i=e.as,s=e.modified(),l=e.initonly?t.ADD:s?t.SOURCE:t.modified(n.fields)||t.modified(i)?t.ADD_MOD:t.ADD;return s&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(i),t.visit(l,c=>c[i]=n(c,e))}});function az(e){re.call(this,[],e)}Te(az,re,{transform(e,t){const n=t.fork(t.ALL),i=e.generator;let s=this.value,l=e.size-s.length,c,d,f;if(l>0){for(c=[];--l>=0;)c.push(f=It(i(e))),s.push(f);n.add=n.add.length?n.materialize(n.ADD).add.concat(c):c}else d=s.slice(0,-l),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(d):d,s=s.slice(-l);return n.source=this.value=s,n}});const Bm={value:"value",median:K6,mean:gJ,min:Qv,max:Gc},Aae=[];function dF(e){re.call(this,[],e)}dF.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function Oae(e){var t=e.method||Bm.value,n;if(Bm[t]==null)ce("Unrecognized imputation method: "+t);else return t===Bm.value?(n=e.value!==void 0?e.value:0,()=>n):Bm[t]}function Nae(e){const t=e.field;return n=>n?t(n):NaN}Te(dF,re,{transform(e,t){var n=t.fork(t.ALL),i=Oae(e),s=Nae(e),l=on(e.field),c=on(e.key),d=(e.groupby||[]).map(on),f=Cae(t.source,e.groupby,e.key,e.keyvals),u=[],a=this.value,m=f.domain.length,w,y,o,T,b,S,x,k,I,B;for(b=0,k=f.length;b<k;++b)for(w=f[b],o=w.values,y=NaN,x=0;x<m;++x)if(w[x]==null){for(T=f.domain[x],B={_impute:!0},S=0,I=o.length;S<I;++S)B[d[S]]=o[S];B[c]=T,B[l]=Number.isNaN(y)?y=i(w,s):y,u.push(It(B))}return u.length&&(n.add=n.materialize(n.ADD).add.concat(u)),a.length&&(n.rem=n.materialize(n.REM).rem.concat(a)),this.value=u,n}});function Cae(e,t,n,i){var s=S=>S(b),l=[],c=i?i.slice():[],d={},f={},u,a,m,w,y,o,T,b;for(c.forEach((S,x)=>d[S]=x+1),w=0,T=e.length;w<T;++w)b=e[w],o=n(b),y=d[o]||(d[o]=c.push(o)),a=(u=t?t.map(s):Aae)+"",(m=f[a])||(m=f[a]=[],l.push(m),m.values=u),m[y-1]=b;return l.domain=c,l}function fF(e){Bl.call(this,e)}fF.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:fp},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};Te(fF,Bl,{transform(e,t){const n=this,i=e.modified();let s;return n.value&&(i||t.modified(n._inputs,!0))?(s=n.value=i?n.init(e):{},t.visit(t.SOURCE,l=>n.add(l))):(s=n.value=n.value||this.init(e),t.visit(t.REM,l=>n.rem(l)),t.visit(t.ADD,l=>n.add(l))),n.changes(),t.visit(t.SOURCE,l=>{ot(l,s[n.cellkey(l)].tuple)}),t.reflow(i).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,i;for(n=0,i=this._alen;n<i;++n)this.celltuple(e[n]),e[n]=null;for(n=0,i=this._mlen;n<i;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function uF(e){re.call(this,null,e)}uF.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};Te(uF,re,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,s=nF(i,e.groupby,e.field),l=(e.groupby||[]).map(on),c=e.bandwidth,d=e.cumulative?"cdf":"pdf",f=e.as||["value","density"],u=[];let a=e.extent,m=e.steps||e.minsteps||25,w=e.steps||e.maxsteps||200;d!=="pdf"&&d!=="cdf"&&ce("Invalid density method: "+d),e.resolve==="shared"&&(a||(a=Ea(i,e.field)),m=w=e.steps||w),s.forEach(y=>{const o=h2(y,c)[d],T=e.counts?y.length:1,b=a||Ea(y);yT(o,b,m,w).forEach(S=>{const x={};for(let k=0;k<l.length;++k)x[l[k]]=y.dims[k];x[f[0]]=S[0],x[f[1]]=S[1]*T,u.push(It(x))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function oz(e){jt.call(this,null,Rae,e)}Te(oz,jt);function Rae(e){return this.value&&!e.modified()?this.value:L2(e.fields,e.flat)}function lz(e){re.call(this,[],e),this._pending=null}Te(lz,re,{transform(e,t){const n=t.dataflow;return this._pending?$E(this,t,this._pending):Lae(e)?t.StopPropagation:e.values?$E(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(s=>(this._pending=xe(s.data),l=>l.touch(this)))}:n.request(e.url,e.format).then(i=>$E(this,t,xe(i.data)))}});function Lae(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function $E(e,t,n){n.forEach(It);const i=t.fork(t.NO_FIELDS&t.NO_SOURCE);return i.rem=e.value,e.value=i.source=i.add=n,e._pending=null,i.rem.length&&i.clean(!0),i}function hF(e){re.call(this,{},e)}hF.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};Te(hF,re,{transform(e,t){const n=e.fields,i=e.index,s=e.values,l=e.default==null?null:e.default,c=e.modified(),d=n.length;let f=c?t.SOURCE:t.ADD,u=t,a=e.as,m,w,y;return s?(w=s.length,d>1&&!a&&ce('Multi-field lookup requires explicit "as" parameter.'),a&&a.length!==d*w&&ce('The "as" parameter has too few output field names.'),a=a||s.map(on),m=function(o){for(var T=0,b=0,S,x;T<d;++T)if(x=i.get(n[T](o)),x==null)for(S=0;S<w;++S,++b)o[a[b]]=l;else for(S=0;S<w;++S,++b)o[a[b]]=s[S](x)}):(a||ce("Missing output field names."),m=function(o){for(var T=0,b;T<d;++T)b=i.get(n[T](o)),o[a[T]]=b??l}),c?u=t.reflow(!0):(y=n.some(o=>t.modified(o.fields)),f|=y?t.MOD:0),t.visit(f,m),u.modifies(a)}});function cz(e){jt.call(this,null,Pae,e)}Te(cz,jt);function Pae(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let i=1/0,s=-1/0,l,c;for(l=0;l<n;++l)c=t[l],c[0]<i&&(i=c[0]),c[1]>s&&(s=c[1]);return[i,s]}function dz(e){jt.call(this,null,Dae,e)}Te(dz,jt);function Dae(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function fz(e){re.call(this,null,e)}Te(fz,re,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function _F(e){Bl.call(this,e)}_F.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:fp,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};Te(_F,Bl,{_transform:Bl.prototype.transform,transform(e,t){return this._transform($ae(e,t),t)}});function $ae(e,t){const n=e.field,i=e.value,s=(e.op==="count"?"__count__":e.op)||"sum",l=ii(n).concat(ii(i)),c=zae(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:c.map(()=>s),fields:c.map(d=>Uae(d,n,i,l)),as:c.map(d=>d+""),modified:e.modified.bind(e)}}function Uae(e,t,n,i){return ts(s=>t(s)===e?n(s):NaN,i,e+"")}function zae(e,t,n){const i={},s=[];return n.visit(n.SOURCE,l=>{const c=e(l);i[c]||(i[c]=1,s.push(c))}),s.sort(TT),t?s.slice(0,t):s}function uz(e){IT.call(this,e)}Te(uz,IT,{transform(e,t){const n=e.subflow,i=e.field,s=l=>this.subflow(Ce(l),n,t,l);return(e.modified("field")||i&&t.modified(ii(i)))&&ce("PreFacet does not support field modification."),this.initTargets(),i?(t.visit(t.MOD,l=>{const c=s(l);i(l).forEach(d=>c.mod(d))}),t.visit(t.ADD,l=>{const c=s(l);i(l).forEach(d=>c.add(It(d)))}),t.visit(t.REM,l=>{const c=s(l);i(l).forEach(d=>c.rem(d))})):(t.visit(t.MOD,l=>s(l).mod(l)),t.visit(t.ADD,l=>s(l).add(l)),t.visit(t.REM,l=>s(l).rem(l))),t.clean()&&t.runAfter(()=>this.clean()),t}});function gF(e){re.call(this,null,e)}gF.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};Te(gF,re,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,s=nz(e.fields,e.as||[]),l=i?(d,f)=>jae(d,f,i,s):kT;let c;return this.value?c=this.value:(t=t.addAll(),c=this.value={}),t.visit(t.REM,d=>{const f=Ce(d);n.rem.push(c[f]),c[f]=null}),t.visit(t.ADD,d=>{const f=l(d,It({}));c[Ce(d)]=f,n.add.push(f)}),t.visit(t.MOD,d=>{n.mod.push(l(d,c[Ce(d)]))}),n}});function jae(e,t,n,i){for(let s=0,l=n.length;s<l;++s)t[i[s]]=n[s](e);return t}function hz(e){re.call(this,null,e)}Te(hz,re,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function pF(e){re.call(this,null,e)}pF.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const qae=1e-14;Te(pF,re,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const s=t.materialize(t.SOURCE).source,l=nF(s,e.groupby,e.field),c=(e.groupby||[]).map(on),d=[],f=e.step||.01,u=e.probs||_s(f/2,1-qae,f),a=u.length;return l.forEach(m=>{const w=o2(m,u);for(let y=0;y<a;++y){const o={};for(let T=0;T<c.length;++T)o[c[T]]=m.dims[T];o[i[0]]=u[y],o[i[1]]=w[y],d.push(It(o))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=d,n}});function _z(e){re.call(this,null,e)}Te(_z,re,{transform(e,t){let n,i;return this.value?i=this.value:(n=t=t.addAll(),i=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,s=>{const l=Ce(s);n.rem.push(i[l]),i[l]=null}),t.visit(t.ADD,s=>{const l=V2(s);i[Ce(s)]=l,n.add.push(l)}),t.visit(t.MOD,s=>{const l=i[Ce(s)];for(const c in s)l[c]=s[c],n.modifies(c);n.mod.push(l)})),n}});function yF(e){re.call(this,[],e),this.count=0}yF.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};Te(yF,re,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.modified("size"),s=e.size,l=this.value.reduce((a,m)=>(a[Ce(m)]=1,a),{});let c=this.value,d=this.count,f=0;function u(a){let m,w;c.length<s?c.push(a):(w=~~((d+1)*Us()),w<c.length&&w>=f&&(m=c[w],l[Ce(m)]&&n.rem.push(m),c[w]=a)),++d}if(t.rem.length&&(t.visit(t.REM,a=>{const m=Ce(a);l[m]&&(l[m]=-1,n.rem.push(a)),--d}),c=c.filter(a=>l[Ce(a)]!==-1)),(t.rem.length||i)&&c.length<s&&t.source&&(f=d=c.length,t.visit(t.SOURCE,a=>{l[Ce(a)]||u(a)}),f=-1),i&&c.length>s){const a=c.length-s;for(let m=0;m<a;++m)l[Ce(c[m])]=-1,n.rem.push(c[m]);c=c.slice(a)}return t.mod.length&&t.visit(t.MOD,a=>{l[Ce(a)]&&n.mod.push(a)}),t.add.length&&t.visit(t.ADD,u),(t.add.length||f<0)&&(n.add=c.filter(a=>!l[Ce(a)])),this.count=d,this.value=n.source=c,n}});function mF(e){re.call(this,null,e)}mF.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};Te(mF,re,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),i=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=_s(e.start,e.stop,e.step||1).map(s=>{const l={};return l[i]=s,It(l)}),n.add=t.add.concat(this.value),n}});function gz(e){re.call(this,null,e),this.modified(!0)}Te(gz,re,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function wF(e){re.call(this,null,e)}const pz=["unit0","unit1"];wF.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:U2,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:pz}]};Te(wF,re,{transform(e,t){const n=e.field,i=e.interval!==!1,s=e.timezone==="utc",l=this._floor(e,t),c=(s?ch:lh)(l.unit).offset,d=e.as||pz,f=d[0],u=d[1],a=l.step;let m=l.start||1/0,w=l.stop||-1/0,y=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(ii(n)))&&(t=t.reflow(!0),y=t.SOURCE,m=1/0,w=-1/0),t.visit(y,o=>{const T=n(o);let b,S;T==null?(o[f]=null,i&&(o[u]=null)):(o[f]=b=S=l(T),i&&(o[u]=S=c(b,a)),b<m&&(m=b),S>w&&(w=S))}),l.start=m,l.stop=w,t.modifies(i?d:f)},_floor(e,t){const n=e.timezone==="utc",{units:i,step:s}=e.units?{units:e.units,step:e.step||1}:k5({extent:e.extent||Ea(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),l=z2(i),c=this.value||{},d=(n?y5:p5)(l,s);return d.unit=wt(l),d.units=l,d.step=s,d.start=c.start,d.stop=c.stop,this.value=d}});function yz(e){re.call(this,oh(),e)}Te(yz,re,{transform(e,t){const n=t.dataflow,i=e.field,s=this.value,l=d=>s.set(i(d),d);let c=!0;return e.modified("field")||t.modified(i.fields)?(s.clear(),t.visit(t.SOURCE,l)):t.changed()?(t.visit(t.REM,d=>s.delete(i(d))),t.visit(t.ADD,l)):c=!1,this.modified(c),s.empty>n.cleanThreshold&&n.runAfter(s.clean),t.fork()}});function mz(e){re.call(this,null,e)}Te(mz,re,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(qd(e.sort)):t.source).map(e.field))}});function Gae(e,t,n,i){const s=gg[e](t,n);return{init:s.init||nl,update:function(l,c){c[i]=s.next(l)}}}const gg={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?++e:e}}},percent_rank:function(){const e=gg.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,i=t.compare;let s=t.index;if(e<s){for(;s+1<n.length&&!i(n[s],n[s+1]);)++s;e=s}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||ce("ntile num must be greater than zero.");const n=gg.cume_dist(),i=n.next;return{init:n.init,next:s=>Math.ceil(t*i(s))}},lag:function(e,t){return t=+t||1,{next:n=>{const i=n.index-t;return i>=0?e(n.data[i]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const i=n.index+t,s=n.data;return i<s.length?e(s[i]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||ce("nth_value nth must be greater than zero."),{next:n=>{const i=n.i0+(t-1);return i<n.i1?e(n.data[i]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const i=e(n.data[n.index]);return i!=null?t=i:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:i=>{const s=i.data;return i.index<=n?t:(n=Hae(e,s,i.index))<0?(n=s.length,t=null):t=e(s[n])}}}};function Hae(e,t,n){for(let i=t.length;n<i;++n)if(e(t[n])!=null)return n;return-1}const Wae=Object.keys(gg);function wz(e){const t=xe(e.ops),n=xe(e.fields),i=xe(e.params),s=xe(e.as),l=this.outputs=[],c=this.windows=[],d={},f={},u=[],a=[];let m=!0;function w(y){xe(ii(y)).forEach(o=>d[o]=1)}w(e.sort),t.forEach((y,o)=>{const T=n[o],b=on(T),S=Y5(y,b,s[o]);if(w(T),l.push(S),Le(gg,y))c.push(Gae(y,n[o],i[o],S));else{if(T==null&&y!=="count"&&ce("Null aggregate field specified."),y==="count"){u.push(S);return}m=!1;let x=f[b];x||(x=f[b]=[],x.field=T,a.push(x)),x.push(X5(y,S))}}),(u.length||a.length)&&(this.cell=Vae(a,u,m)),this.inputs=Object.keys(d)}const bz=wz.prototype;bz.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};bz.update=function(e,t){const n=this.cell,i=this.windows,s=e.data,l=i&&i.length;let c;if(n){for(c=e.p0;c<e.i0;++c)n.rem(s[c]);for(c=e.p1;c<e.i1;++c)n.add(s[c]);n.set(t)}for(c=0;c<l;++c)i[c].update(e,t)};function Vae(e,t,n){e=e.map(f=>J5(f,f.field));const i={num:0,agg:null,store:!1,count:t};if(!n)for(var s=e.length,l=i.agg=Array(s),c=0;c<s;++c)l[c]=new e[c](i);if(i.store)var d=i.data=new K2;return i.add=function(f){if(i.num+=1,!n){d&&d.add(f);for(let u=0;u<s;++u)l[u].add(l[u].get(f),f)}},i.rem=function(f){if(i.num-=1,!n){d&&d.rem(f);for(let u=0;u<s;++u)l[u].rem(l[u].get(f),f)}},i.set=function(f){let u,a;for(d&&d.values(),u=0,a=t.length;u<a;++u)f[t[u]]=i.num;if(!n)for(u=0,a=l.length;u<a;++u)l[u].set(f)},i.init=function(){i.num=0,d&&d.reset();for(let f=0;f<s;++f)l[f].init()},i}function bF(e){re.call(this,{},e),this._mlen=0,this._mods=[]}bF.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Wae.concat(fp)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};Te(bF,re,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),i=qd(e.sort),s=WS(e.groupby),l=d=>this.group(s(d));let c=this.state;(!c||n)&&(c=this.state=new wz(e)),n||t.modified(c.inputs)?(this.value={},t.visit(t.SOURCE,d=>l(d).add(d))):(t.visit(t.REM,d=>l(d).remove(d)),t.visit(t.ADD,d=>l(d).add(d)));for(let d=0,f=this._mlen;d<f;++d)Yae(this._mods[d],c,i,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(c.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=Q5(Ce),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function Yae(e,t,n,i){const s=i.sort,l=s&&!i.ignorePeers,c=i.frame||[null,0],d=e.data(n),f=d.length,u=l?Qg(s):null,a={i0:0,i1:0,p0:0,p1:0,index:0,data:d,compare:s||ci(-1)};t.init();for(let m=0;m<f;++m)Xae(a,c,m,f),l&&Kae(a,u),t.update(a,d[m])}function Xae(e,t,n,i){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?i:Math.min(i,n+Math.abs(t[1])+1),e.index=n}function Kae(e,t){const n=e.i0,i=e.i1-1,s=e.compare,l=e.data,c=l.length-1;n>0&&!s(l[n],l[n-1])&&(e.i0=t.left(l,l[n])),i<c&&!s(l[i],l[i+1])&&(e.i1=t.right(l,l[i]))}const Jae=Object.freeze(Object.defineProperty({__proto__:null,aggregate:Bl,bin:J2,collect:Q2,compare:Z5,countpattern:Z2,cross:eF,density:tF,dotbin:iF,expression:sz,extent:sF,facet:IT,field:rz,filter:aF,flatten:oF,fold:lF,formula:cF,generate:az,impute:dF,joinaggregate:fF,kde:uF,key:oz,load:lz,lookup:hF,multiextent:cz,multivalues:dz,params:fz,pivot:_F,prefacet:uz,project:gF,proxy:hz,quantile:pF,relay:_z,sample:yF,sequence:mF,sieve:gz,subflow:rF,timeunit:wF,tupleindex:yz,values:mz,window:bF},Symbol.toStringTag,{value:"Module"}));function up(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const Qae=()=>typeof Image<"u"?Image:null;function TF(e,t,n){const i=e-t+n*2;return e?i>0?i:1:0}const Zae="identity",Iu="linear",vo="log",hp="pow",_p="sqrt",MT="symlog",fd="time",ud="utc",ca="sequential",dh="diverging",Mu="quantile",AT="quantize",OT="threshold",EF="ordinal",VS="point",Tz="band",vF="bin-ordinal",vn="continuous",gp="discrete",pp="discretizing",Hs="interpolating",SF="temporal";function eoe(e){return function(t){let n=t[0],i=t[1],s;return i<n&&(s=n,n=i,i=s),[e.invert(n),e.invert(i)]}}function toe(e){return function(t){const n=e.range();let i=t[0],s=t[1],l=-1,c,d,f,u;for(s<i&&(d=i,i=s,s=d),f=0,u=n.length;f<u;++f)n[f]>=i&&n[f]<=s&&(l<0&&(l=f),c=f);if(!(l<0))return i=e.invertExtent(n[l]),s=e.invertExtent(n[c]),[i[0]===void 0?i[1]:i[0],s[1]===void 0?s[0]:s[1]]}}function xF(){const e=qB().unknown(void 0),t=e.domain,n=e.range;let i=[0,1],s,l,c=!1,d=0,f=0,u=.5;delete e.unknown;function a(){const m=t().length,w=i[1]<i[0],y=i[1-w],o=TF(m,d,f);let T=i[w-0];s=(y-T)/(o||1),c&&(s=Math.floor(s)),T+=(y-T-s*(m-d))*u,l=s*(1-d),c&&(T=Math.round(T),l=Math.round(l));const b=_s(m).map(S=>T+s*S);return n(w?b.reverse():b)}return e.domain=function(m){return arguments.length?(t(m),a()):t()},e.range=function(m){return arguments.length?(i=[+m[0],+m[1]],a()):i.slice()},e.rangeRound=function(m){return i=[+m[0],+m[1]],c=!0,a()},e.bandwidth=function(){return l},e.step=function(){return s},e.round=function(m){return arguments.length?(c=!!m,a()):c},e.padding=function(m){return arguments.length?(f=Math.max(0,Math.min(1,m)),d=f,a()):d},e.paddingInner=function(m){return arguments.length?(d=Math.max(0,Math.min(1,m)),a()):d},e.paddingOuter=function(m){return arguments.length?(f=Math.max(0,Math.min(1,m)),a()):f},e.align=function(m){return arguments.length?(u=Math.max(0,Math.min(1,m)),a()):u},e.invertRange=function(m){if(m[0]==null||m[1]==null)return;const w=i[1]<i[0],y=w?n().reverse():n(),o=y.length-1;let T=+m[0],b=+m[1],S,x,k;if(!(T!==T||b!==b)&&(b<T&&(k=T,T=b,b=k),!(b<y[0]||T>i[1-w])))return S=Math.max(0,Yw(y,T)-1),x=T===b?S:Yw(y,b)-1,T-y[S]>l+1e-10&&++S,w&&(k=S,S=o-x,x=o-k),S>x?void 0:t().slice(S,x+1)},e.invert=function(m){const w=e.invertRange([m,m]);return w&&w[0]},e.copy=function(){return xF().domain(t()).range(i).round(c).paddingInner(d).paddingOuter(f).align(u)},a()}function Ez(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return Ez(t())},e}function noe(){return Ez(xF().paddingInner(1))}var ioe=Array.prototype.map;function soe(e){return ioe.call(e,ei)}const roe=Array.prototype.slice;function vz(){let e=[],t=[];function n(i){return i==null||i!==i?void 0:t[(Zg(e,i)-1)%t.length]}return n.domain=function(i){return arguments.length?(e=soe(i),n):e.slice()},n.range=function(i){return arguments.length?(t=roe.call(i),n):t.slice()},n.tickFormat=function(i,s){return NU(e[0],wt(e),i??10,s)},n.copy=function(){return vz().domain(n.domain()).range(n.range())},n}const Gb=new Map,Sz=Symbol("vega_scale");function xz(e){return e[Sz]=!0,e}function aoe(e){return e&&e[Sz]===!0}function ooe(e,t,n){const i=function(){const l=t();return l.invertRange||(l.invertRange=l.invert?eoe(l):l.invertExtent?toe(l):void 0),l.type=e,xz(l)};return i.metadata=Er(xe(n)),i}function kt(e,t,n){return arguments.length>1?(Gb.set(e,ooe(e,t,n)),this):kz(e)?Gb.get(e):void 0}kt(Zae,CU);kt(Iu,GB,vn);kt(vo,LU,[vn,vo]);kt(hp,YB,vn);kt(_p,jte,vn);kt(MT,PU,vn);kt(fd,KU,[vn,SF]);kt(ud,iie,[vn,SF]);kt(ca,ZB,[vn,Hs]);kt(`${ca}-${Iu}`,ZB,[vn,Hs]);kt(`${ca}-${vo}`,JU,[vn,Hs,vo]);kt(`${ca}-${hp}`,e2,[vn,Hs]);kt(`${ca}-${_p}`,sie,[vn,Hs]);kt(`${ca}-${MT}`,QU,[vn,Hs]);kt(`${dh}-${Iu}`,ZU,[vn,Hs]);kt(`${dh}-${vo}`,e8,[vn,Hs,vo]);kt(`${dh}-${hp}`,t2,[vn,Hs]);kt(`${dh}-${_p}`,rie,[vn,Hs]);kt(`${dh}-${MT}`,t8,[vn,Hs]);kt(Mu,DU,[pp,Mu]);kt(AT,$U,pp);kt(OT,UU,pp);kt(vF,vz,[gp,pp]);kt(EF,qB,gp);kt(Tz,xF,gp);kt(VS,noe,gp);function kz(e){return Gb.has(e)}function Hd(e,t){const n=Gb.get(e);return n&&n.metadata[t]}function kF(e){return Hd(e,vn)}function Au(e){return Hd(e,gp)}function YS(e){return Hd(e,pp)}function Bz(e){return Hd(e,vo)}function loe(e){return Hd(e,SF)}function Fz(e){return Hd(e,Hs)}function Iz(e){return Hd(e,Mu)}const coe=["clamp","base","constant","exponent"];function Mz(e,t){const n=t[0],i=wt(t)-n;return function(s){return e(n+s*i)}}function NT(e,t,n){return BB(BF(t||"rgb",n),e)}function Az(e,t){const n=new Array(t),i=t+1;for(let s=0;s<t;)n[s]=e(++s/i);return n}function Oz(e,t,n){const i=n-t;let s,l,c;return!i||!Number.isFinite(i)?ci(.5):(s=(l=e.type).indexOf("-"),l=s<0?l:l.slice(s+1),c=kt(l)().domain([t,n]).range([0,1]),coe.forEach(d=>e[d]?c[d](e[d]()):0),c)}function BF(e,t){const n=sQ[doe(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function doe(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const foe={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},uoe={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function Nz(e){const t=e.length/6|0,n=new Array(t);for(let i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}function Cz(e,t){for(const n in e)FF(n,t(e[n]))}const H3={};Cz(uoe,Nz);Cz(foe,e=>NT(Nz(e)));function FF(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(H3[e]=t,this):H3[e]}const _w="symbol",hoe="discrete",_oe="gradient",goe=e=>fe(e)?e.map(t=>String(t)):String(e),poe=(e,t)=>e[1]-t[1],yoe=(e,t)=>t[1]-e[1];function IF(e,t,n){let i;return $t(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(dp(e.domain())/n||1)))),Be(t)&&(i=t.step,t=t.interval),Se(t)&&(t=e.type===fd?lh(t):e.type==ud?ch(t):ce("Only time and utc scales accept interval strings."),i&&(t=t.every(i))),t}function Rz(e,t,n){let i=e.range(),s=i[0],l=wt(i),c=poe;if(s>l&&(i=l,l=s,s=i,c=yoe),s=Math.floor(s),l=Math.ceil(l),t=t.map(d=>[d,e(d)]).filter(d=>s<=d[1]&&d[1]<=l).sort(c).map(d=>d[0]),n>0&&t.length>1){const d=[t[0],wt(t)];for(;t.length>n&&t.length>=3;)t=t.filter((f,u)=>!(u%2));t.length<3&&(t=d)}return t}function MF(e,t){return e.bins?Rz(e,e.bins):e.ticks?e.ticks(t):e.domain()}function Lz(e,t,n,i,s,l){const c=t.type;let d=goe;if(c===fd||s===fd)d=e.timeFormat(i);else if(c===ud||s===ud)d=e.utcFormat(i);else if(Bz(c)){const f=e.formatFloat(i);if(l||t.bins)d=f;else{const u=Pz(t,n,!1);d=a=>u(a)?f(a):""}}else if(t.tickFormat){const f=t.domain();d=e.formatSpan(f[0],f[f.length-1],n,i)}else i&&(d=e.format(i));return d}function Pz(e,t,n){const i=MF(e,t),s=e.base(),l=Math.log(s),c=Math.max(1,s*t/i.length),d=f=>{let u=f/Math.pow(s,Math.round(Math.log(f)/l));return u*s<s-.5&&(u*=s),u<=c};return n?i.filter(d):d}const XS={[Mu]:"quantiles",[AT]:"thresholds",[OT]:"domain"},Dz={[Mu]:"quantiles",[AT]:"domain"};function $z(e,t){return e.bins?boe(e.bins):e.type===vo?Pz(e,t,!0):XS[e.type]?woe(e[XS[e.type]]()):MF(e,t)}function moe(e,t,n){const i=t[Dz[t.type]](),s=i.length;let l=s>1?i[1]-i[0]:i[0],c;for(c=1;c<s;++c)l=Math.min(l,i[c]-i[c-1]);return e.formatSpan(0,l,3*10,n)}function woe(e){const t=[-1/0].concat(e);return t.max=1/0,t}function boe(e){const t=e.slice(0,-1);return t.max=wt(e),t}const Toe=e=>XS[e.type]||e.bins;function Uz(e,t,n,i,s,l,c){const d=Dz[t.type]&&l!==fd&&l!==ud?moe(e,t,s):Lz(e,t,n,s,l,c);return i===_w&&Toe(t)?Eoe(d):i===hoe?voe(d):Soe(d)}const Eoe=e=>(t,n,i)=>{const s=W3(i[n+1],W3(i.max,1/0)),l=V3(t,e),c=V3(s,e);return l&&c?l+"  "+c:c?"< "+c:" "+l},W3=(e,t)=>e??t,voe=e=>(t,n)=>n?e(t):null,Soe=e=>t=>e(t),V3=(e,t)=>Number.isFinite(e)?t(e):null;function xoe(e){const t=e.domain(),n=t.length-1;let i=+t[0],s=+wt(t),l=s-i;if(e.type===OT){const c=n?l/n:.1;i-=c,s+=c,l=s-i}return c=>(c-i)/l}function koe(e,t,n,i){const s=i||t.type;return Se(n)&&loe(s)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&s===fd?e.timeFormat("%A, %d %B %Y, %X"):!n&&s===ud?e.utcFormat("%A, %d %B %Y, %X UTC"):Uz(e,t,5,null,n,i,!0)}function zz(e,t,n){n=n||{};const i=Math.max(3,n.maxlen||7),s=koe(e,t,n.format,n.formatType);if(YS(t.type)){const l=$z(t).slice(1).map(s),c=l.length;return`${c} boundar${c===1?"y":"ies"}: ${l.join(", ")}`}else if(Au(t.type)){const l=t.domain(),c=l.length,d=c>i?l.slice(0,i-2).map(s).join(", ")+", ending with "+l.slice(-1).map(s):l.map(s).join(", ");return`${c} value${c===1?"":"s"}: ${d}`}else{const l=t.domain();return`values from ${s(l[0])} to ${s(wt(l))}`}}let jz=0;function Boe(){jz=0}const Hb="p_";function AF(e){return e&&e.gradient}function qz(e,t,n){const i=e.gradient;let s=e.id,l=i==="radial"?Hb:"";return s||(s=e.id="gradient_"+jz++,i==="radial"?(e.x1=$r(e.x1,.5),e.y1=$r(e.y1,.5),e.r1=$r(e.r1,0),e.x2=$r(e.x2,.5),e.y2=$r(e.y2,.5),e.r2=$r(e.r2,.5),l=Hb):(e.x1=$r(e.x1,0),e.y1=$r(e.y1,0),e.x2=$r(e.x2,1),e.y2=$r(e.y2,0))),t[s]=e,"url("+(n||"")+"#"+l+s+")"}function $r(e,t){return e??t}function Gz(e,t){var n=[],i;return i={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(s,l){return n.push({offset:s,color:l}),i}}}const Y3={basis:{curve:yie},"basis-closed":{curve:mie},"basis-open":{curve:wie},bundle:{curve:bie,tension:"beta",value:.85},cardinal:{curve:Tie,tension:"tension",value:0},"cardinal-open":{curve:vie,tension:"tension",value:0},"cardinal-closed":{curve:Eie,tension:"tension",value:0},"catmull-rom":{curve:Sie,tension:"alpha",value:.5},"catmull-rom-closed":{curve:xie,tension:"alpha",value:.5},"catmull-rom-open":{curve:kie,tension:"alpha",value:.5},linear:{curve:n2},"linear-closed":{curve:Bie},monotone:{horizontal:Iie,vertical:Fie},natural:{curve:Mie},step:{curve:Aie},"step-after":{curve:Nie},"step-before":{curve:Oie}};function OF(e,t,n){var i=Le(Y3,e)&&Y3[e],s=null;return i&&(s=i.curve||i[t||"vertical"],i.tension&&n!=null&&(s=s[i.tension](n))),s}const Foe={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},Ioe=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,Moe=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,Aoe=/^((\s+,?\s*)|(,\s*))/,Ooe=/^[01]/;function Ou(e){const t=[];return(e.match(Ioe)||[]).forEach(i=>{let s=i[0];const l=s.toLowerCase(),c=Foe[l],d=Noe(l,c,i.slice(1).trim()),f=d.length;if(f<c||f&&f%c!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([s,...d.slice(0,c)]),f!==c){l==="m"&&(s=s==="M"?"L":"l");for(let u=c;u<f;u+=c)t.push([s,...d.slice(u,u+c)])}}),t}function Noe(e,t,n){const i=[];for(let s=0;t&&s<n.length;)for(let l=0;l<t;++l){const c=e==="a"&&(l===3||l===4)?Ooe:Moe,d=n.slice(s).match(c);if(d===null)throw Error("Invalid SVG path, incorrect parameter type");s+=d[0].length,i.push(+d[0]);const f=n.slice(s).match(Aoe);f!==null&&(s+=f[0].length)}return i}const Fl=Math.PI/180,Coe=1e-14,Fc=Math.PI/2,na=Math.PI*2,df=Math.sqrt(3)/2;var UE={},zE={},Hz=[].join;function Roe(e,t,n,i,s,l,c,d,f){const u=Hz.call(arguments);if(UE[u])return UE[u];const a=c*Fl,m=Math.sin(a),w=Math.cos(a);n=Math.abs(n),i=Math.abs(i);const y=w*(d-e)*.5+m*(f-t)*.5,o=w*(f-t)*.5-m*(d-e)*.5;let T=y*y/(n*n)+o*o/(i*i);T>1&&(T=Math.sqrt(T),n*=T,i*=T);const b=w/n,S=m/n,x=-m/i,k=w/i,I=b*d+S*f,B=x*d+k*f,O=b*e+S*t,A=x*e+k*t;let P=1/((O-I)*(O-I)+(A-B)*(A-B))-.25;P<0&&(P=0);let D=Math.sqrt(P);l==s&&(D=-D);const U=.5*(I+O)-D*(A-B),Y=.5*(B+A)+D*(O-I),z=Math.atan2(B-Y,I-U);let H=Math.atan2(A-Y,O-U)-z;H<0&&l===1?H+=na:H>0&&l===0&&(H-=na);const V=Math.ceil(Math.abs(H/(Fc+.001))),J=[];for(let G=0;G<V;++G){const oe=z+G*H/V,he=z+(G+1)*H/V;J[G]=[U,Y,oe,he,n,i,m,w]}return UE[u]=J}function Loe(e){const t=Hz.call(e);if(zE[t])return zE[t];var n=e[0],i=e[1],s=e[2],l=e[3],c=e[4],d=e[5],f=e[6],u=e[7];const a=u*c,m=-f*d,w=f*c,y=u*d,o=Math.cos(s),T=Math.sin(s),b=Math.cos(l),S=Math.sin(l),x=.5*(l-s),k=Math.sin(x*.5),I=8/3*k*k/Math.sin(x),B=n+o-I*T,O=i+T+I*o,A=n+b,R=i+S,P=A+I*S,D=R-I*b;return zE[t]=[a*B+m*O,w*B+y*O,a*P+m*D,w*P+y*D,a*A+m*R,w*A+y*R]}const xs=["l",0,0,0,0,0,0,0];function Poe(e,t,n){const i=xs[0]=e[0];if(i==="a"||i==="A")xs[1]=t*e[1],xs[2]=n*e[2],xs[3]=e[3],xs[4]=e[4],xs[5]=e[5],xs[6]=t*e[6],xs[7]=n*e[7];else if(i==="h"||i==="H")xs[1]=t*e[1];else if(i==="v"||i==="V")xs[1]=n*e[1];else for(var s=1,l=e.length;s<l;++s)xs[s]=(s%2==1?t:n)*e[s];return xs}function pg(e,t,n,i,s,l){var c,d=null,f=0,u=0,a=0,m=0,w,y,o,T,b=0,S=0;n==null&&(n=0),i==null&&(i=0),s==null&&(s=1),l==null&&(l=s),e.beginPath&&e.beginPath();for(var x=0,k=t.length;x<k;++x){switch(c=t[x],(s!==1||l!==1)&&(c=Poe(c,s,l)),c[0]){case"l":f+=c[1],u+=c[2],e.lineTo(f+n,u+i);break;case"L":f=c[1],u=c[2],e.lineTo(f+n,u+i);break;case"h":f+=c[1],e.lineTo(f+n,u+i);break;case"H":f=c[1],e.lineTo(f+n,u+i);break;case"v":u+=c[1],e.lineTo(f+n,u+i);break;case"V":u=c[1],e.lineTo(f+n,u+i);break;case"m":f+=c[1],u+=c[2],b=f,S=u,e.moveTo(f+n,u+i);break;case"M":f=c[1],u=c[2],b=f,S=u,e.moveTo(f+n,u+i);break;case"c":w=f+c[5],y=u+c[6],a=f+c[3],m=u+c[4],e.bezierCurveTo(f+c[1]+n,u+c[2]+i,a+n,m+i,w+n,y+i),f=w,u=y;break;case"C":f=c[5],u=c[6],a=c[3],m=c[4],e.bezierCurveTo(c[1]+n,c[2]+i,a+n,m+i,f+n,u+i);break;case"s":w=f+c[3],y=u+c[4],a=2*f-a,m=2*u-m,e.bezierCurveTo(a+n,m+i,f+c[1]+n,u+c[2]+i,w+n,y+i),a=f+c[1],m=u+c[2],f=w,u=y;break;case"S":w=c[3],y=c[4],a=2*f-a,m=2*u-m,e.bezierCurveTo(a+n,m+i,c[1]+n,c[2]+i,w+n,y+i),f=w,u=y,a=c[1],m=c[2];break;case"q":w=f+c[3],y=u+c[4],a=f+c[1],m=u+c[2],e.quadraticCurveTo(a+n,m+i,w+n,y+i),f=w,u=y;break;case"Q":w=c[3],y=c[4],e.quadraticCurveTo(c[1]+n,c[2]+i,w+n,y+i),f=w,u=y,a=c[1],m=c[2];break;case"t":w=f+c[1],y=u+c[2],d[0].match(/[QqTt]/)===null?(a=f,m=u):d[0]==="t"?(a=2*f-o,m=2*u-T):d[0]==="q"&&(a=2*f-a,m=2*u-m),o=a,T=m,e.quadraticCurveTo(a+n,m+i,w+n,y+i),f=w,u=y,a=f+c[1],m=u+c[2];break;case"T":w=c[1],y=c[2],a=2*f-a,m=2*u-m,e.quadraticCurveTo(a+n,m+i,w+n,y+i),f=w,u=y;break;case"a":X3(e,f+n,u+i,[c[1],c[2],c[3],c[4],c[5],c[6]+f+n,c[7]+u+i]),f+=c[6],u+=c[7];break;case"A":X3(e,f+n,u+i,[c[1],c[2],c[3],c[4],c[5],c[6]+n,c[7]+i]),f=c[6],u=c[7];break;case"z":case"Z":f=b,u=S,e.closePath();break}d=c}}function X3(e,t,n,i){const s=Roe(i[5],i[6],i[0],i[1],i[3],i[4],i[2],t,n);for(let l=0;l<s.length;++l){const c=Loe(s[l]);e.bezierCurveTo(c[0],c[1],c[2],c[3],c[4],c[5])}}const K3=.5773502691896257,J3={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,na)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/2.5;e.moveTo(-n,-i),e.lineTo(-n,i),e.lineTo(-i,i),e.lineTo(-i,n),e.lineTo(i,n),e.lineTo(i,i),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(i,-i),e.lineTo(i,-n),e.lineTo(-i,-n),e.lineTo(-i,-i),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),i=-n/2;e.rect(i,i,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/7,s=n/2.5,l=n/8;e.moveTo(-i,n),e.lineTo(i,n),e.lineTo(i,-l),e.lineTo(s,-l),e.lineTo(0,-n),e.lineTo(-s,-l),e.lineTo(-i,-l),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,i=df*n,s=i-n*K3,l=n/4;e.moveTo(0,-i-s),e.lineTo(-l,i-s),e.lineTo(l,i-s),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,i=df*n,s=i-n*K3;e.moveTo(0,-i-s),e.lineTo(-n,i-s),e.lineTo(n,i-s),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,i=df*n;e.moveTo(0,-i),e.lineTo(-n,i),e.lineTo(n,i),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,i=df*n;e.moveTo(0,i),e.lineTo(-n,-i),e.lineTo(n,-i),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,i=df*n;e.moveTo(i,0),e.lineTo(-i,-n),e.lineTo(-i,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,i=df*n;e.moveTo(-i,0),e.lineTo(i,-n),e.lineTo(i,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function Wz(e){return Le(J3,e)?J3[e]:Doe(e)}var jE={};function Doe(e){if(!Le(jE,e)){const t=Ou(e);jE[e]={draw:function(n,i){pg(n,t,0,0,Math.sqrt(i)/2)}}}return jE[e]}const Go=.448084975506;function $oe(e){return e.x}function Uoe(e){return e.y}function zoe(e){return e.width}function joe(e){return e.height}function qa(e){return typeof e=="function"?e:()=>+e}function Fm(e,t,n){return Math.max(t,Math.min(e,n))}function Vz(){var e=$oe,t=Uoe,n=zoe,i=joe,s=qa(0),l=s,c=s,d=s,f=null;function u(a,m,w){var y,o=m??+e.call(this,a),T=w??+t.call(this,a),b=+n.call(this,a),S=+i.call(this,a),x=Math.min(b,S)/2,k=Fm(+s.call(this,a),0,x),I=Fm(+l.call(this,a),0,x),B=Fm(+c.call(this,a),0,x),O=Fm(+d.call(this,a),0,x);if(f||(f=y=J0()),k<=0&&I<=0&&B<=0&&O<=0)f.rect(o,T,b,S);else{var A=o+b,R=T+S;f.moveTo(o+k,T),f.lineTo(A-I,T),f.bezierCurveTo(A-Go*I,T,A,T+Go*I,A,T+I),f.lineTo(A,R-O),f.bezierCurveTo(A,R-Go*O,A-Go*O,R,A-O,R),f.lineTo(o+B,R),f.bezierCurveTo(o+Go*B,R,o,R-Go*B,o,R-B),f.lineTo(o,T+k),f.bezierCurveTo(o,T+Go*k,o+Go*k,T,o+k,T),f.closePath()}if(y)return f=null,y+""||null}return u.x=function(a){return arguments.length?(e=qa(a),u):e},u.y=function(a){return arguments.length?(t=qa(a),u):t},u.width=function(a){return arguments.length?(n=qa(a),u):n},u.height=function(a){return arguments.length?(i=qa(a),u):i},u.cornerRadius=function(a,m,w,y){return arguments.length?(s=qa(a),l=m!=null?qa(m):s,d=w!=null?qa(w):s,c=y!=null?qa(y):l,u):s},u.context=function(a){return arguments.length?(f=a??null,u):f},u}function Yz(){var e,t,n,i,s=null,l,c,d,f;function u(m,w,y){const o=y/2;if(l){var T=d-w,b=m-c;if(T||b){var S=Math.sqrt(T*T+b*b),x=(T/=S)*f,k=(b/=S)*f,I=Math.atan2(b,T);s.moveTo(c-x,d-k),s.lineTo(m-T*o,w-b*o),s.arc(m,w,o,I-Math.PI,I),s.lineTo(c+x,d+k),s.arc(c,d,f,I,I+Math.PI)}else s.arc(m,w,o,0,na);s.closePath()}else l=1;c=m,d=w,f=o}function a(m){var w,y=m.length,o,T=!1,b;for(s==null&&(s=b=J0()),w=0;w<=y;++w)!(w<y&&i(o=m[w],w,m))===T&&(T=!T)&&(l=0),T&&u(+e(o,w,m),+t(o,w,m),+n(o,w,m));if(b)return s=null,b+""||null}return a.x=function(m){return arguments.length?(e=m,a):e},a.y=function(m){return arguments.length?(t=m,a):t},a.size=function(m){return arguments.length?(n=m,a):n},a.defined=function(m){return arguments.length?(i=m,a):i},a.context=function(m){return arguments.length?(m==null?s=null:s=m,a):s},a}function yp(e,t){return e??t}const mp=e=>e.x||0,wp=e=>e.y||0,qoe=e=>e.width||0,Goe=e=>e.height||0,Hoe=e=>(e.x||0)+(e.width||0),Woe=e=>(e.y||0)+(e.height||0),Voe=e=>e.startAngle||0,Yoe=e=>e.endAngle||0,Xoe=e=>e.padAngle||0,Koe=e=>e.innerRadius||0,Joe=e=>e.outerRadius||0,Qoe=e=>e.cornerRadius||0,Zoe=e=>yp(e.cornerRadiusTopLeft,e.cornerRadius)||0,ele=e=>yp(e.cornerRadiusTopRight,e.cornerRadius)||0,tle=e=>yp(e.cornerRadiusBottomRight,e.cornerRadius)||0,nle=e=>yp(e.cornerRadiusBottomLeft,e.cornerRadius)||0,ile=e=>yp(e.size,64),sle=e=>e.size||1,CT=e=>e.defined!==!1,rle=e=>Wz(e.shape||"circle"),ale=_ie().startAngle(Voe).endAngle(Yoe).padAngle(Xoe).innerRadius(Koe).outerRadius(Joe).cornerRadius(Qoe),ole=l8().x(mp).y1(wp).y0(Woe).defined(CT),lle=l8().y(wp).x1(mp).x0(Hoe).defined(CT),cle=o8().x(mp).y(wp).defined(CT),dle=Vz().x(mp).y(wp).width(qoe).height(Goe).cornerRadius(Zoe,ele,tle,nle),fle=pie().type(rle).size(ile),ule=Yz().x(mp).y(wp).defined(CT).size(sle);function NF(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function hle(e,t){return ale.context(e)(t)}function _le(e,t){const n=t[0],i=n.interpolate||"linear";return(n.orient==="horizontal"?lle:ole).curve(OF(i,n.orient,n.tension)).context(e)(t)}function gle(e,t){const n=t[0],i=n.interpolate||"linear";return cle.curve(OF(i,n.orient,n.tension)).context(e)(t)}function fh(e,t,n,i){return dle.context(e)(t,n,i)}function ple(e,t){return(t.mark.shape||t.shape).context(e)(t)}function yle(e,t){return fle.context(e)(t)}function mle(e,t){return ule.context(e)(t)}var Xz=1;function Kz(){Xz=1}function CF(e,t,n){var i=t.clip,s=e._defs,l=t.clip_id||(t.clip_id="clip"+Xz++),c=s.clipping[l]||(s.clipping[l]={id:l});return lt(i)?c.path=i(null):NF(n)?c.path=fh(null,n,0,0):(c.width=n.width||0,c.height=n.height||0),"url(#"+l+")"}function fn(e){this.clear(),e&&this.union(e)}fn.prototype={clone(){return new fn(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,i){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),i<t?(this.y2=t,this.y1=i):(this.y1=t,this.y2=i),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const i=this.rotatedPoints(e,t,n);return this.clear().add(i[0],i[1]).add(i[2],i[3]).add(i[4],i[5]).add(i[6],i[7])},rotatedPoints(e,t,n){var{x1:i,y1:s,x2:l,y2:c}=this,d=Math.cos(e),f=Math.sin(e),u=t-t*d+n*f,a=n-t*f-n*d;return[d*i-f*s+u,f*i+d*s+a,d*i-f*c+u,f*i+d*c+a,d*l-f*s+u,f*l+d*s+a,d*l-f*c+u,f*l+d*c+a]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function RT(e){this.mark=e,this.bounds=this.bounds||new fn}function LT(e){RT.call(this,e),this.items=this.items||[]}Te(LT,RT);function RF(e){this._pending=0,this._loader=e||vT()}function Q3(e){e._pending+=1}function Ph(e){e._pending-=1}RF.prototype={pending(){return this._pending},sanitizeURL(e){const t=this;return Q3(t),t._loader.sanitize(e,{context:"href"}).then(n=>(Ph(t),n)).catch(()=>(Ph(t),null))},loadImage(e){const t=this,n=Qae();return Q3(t),t._loader.sanitize(e,{context:"image"}).then(i=>{const s=i.href;if(!s||!n)throw{url:s};const l=new n,c=Le(i,"crossOrigin")?i.crossOrigin:"anonymous";return c!=null&&(l.crossOrigin=c),l.onload=()=>Ph(t),l.onerror=()=>Ph(t),l.src=s,l}).catch(i=>(Ph(t),{complete:!1,width:0,height:0,src:i&&i.url||""}))},ready(){const e=this;return new Promise(t=>{function n(i){e.pending()?setTimeout(()=>{n(!0)},10):t(i)}n(!1)})}};function Io(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const i=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(i+(n?wle(t,i):0))}return e}function wle(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const ble=na-1e-8;let PT,gw,pw,jc,KS,yw,JS,QS;const sl=(e,t)=>PT.add(e,t),mw=(e,t)=>sl(gw=e,pw=t),Z3=e=>sl(e,PT.y1),eR=e=>sl(PT.x1,e),Ic=(e,t)=>KS*e+JS*t,Mc=(e,t)=>yw*e+QS*t,qE=(e,t)=>sl(Ic(e,t),Mc(e,t)),GE=(e,t)=>mw(Ic(e,t),Mc(e,t));function bp(e,t){return PT=e,t?(jc=t*Fl,KS=QS=Math.cos(jc),yw=Math.sin(jc),JS=-yw):(KS=QS=1,jc=yw=JS=0),Tle}const Tle={beginPath(){},closePath(){},moveTo:GE,lineTo:GE,rect(e,t,n,i){jc?(qE(e+n,t),qE(e+n,t+i),qE(e,t+i),GE(e,t)):(sl(e+n,t+i),mw(e,t))},quadraticCurveTo(e,t,n,i){const s=Ic(e,t),l=Mc(e,t),c=Ic(n,i),d=Mc(n,i);tR(gw,s,c,Z3),tR(pw,l,d,eR),mw(c,d)},bezierCurveTo(e,t,n,i,s,l){const c=Ic(e,t),d=Mc(e,t),f=Ic(n,i),u=Mc(n,i),a=Ic(s,l),m=Mc(s,l);nR(gw,c,f,a,Z3),nR(pw,d,u,m,eR),mw(a,m)},arc(e,t,n,i,s,l){if(i+=jc,s+=jc,gw=n*Math.cos(s)+e,pw=n*Math.sin(s)+t,Math.abs(s-i)>ble)sl(e-n,t-n),sl(e+n,t+n);else{const c=u=>sl(n*Math.cos(u)+e,n*Math.sin(u)+t);let d,f;if(c(i),c(s),s!==i)if(i=i%na,i<0&&(i+=na),s=s%na,s<0&&(s+=na),s<i&&(l=!l,d=i,i=s,s=d),l)for(s-=na,d=i-i%Fc,f=0;f<4&&d>s;++f,d-=Fc)c(d);else for(d=i-i%Fc+Fc,f=0;f<4&&d<s;++f,d=d+Fc)c(d)}}};function tR(e,t,n,i){const s=(e-t)/(e+n-2*t);0<s&&s<1&&i(e+(t-e)*s)}function nR(e,t,n,i,s){const l=i-e+3*t-3*n,c=e+n-2*t,d=e-t;let f=0,u=0,a;Math.abs(l)>Coe?(a=c*c+d*l,a>=0&&(a=Math.sqrt(a),f=(-c+a)/l,u=(-c-a)/l)):f=.5*d/c,0<f&&f<1&&s(iR(f,e,t,n,i)),0<u&&u<1&&s(iR(u,e,t,n,i))}function iR(e,t,n,i,s){const l=1-e,c=l*l,d=e*e;return c*l*t+3*c*e*n+3*l*d*i+d*e*s}var pl=(pl=up(1,1))?pl.getContext("2d"):null;const ZS=new fn;function LF(e){return function(t,n){if(!pl)return!0;e(pl,t),ZS.clear().union(t.bounds).intersect(n).round();const{x1:i,y1:s,x2:l,y2:c}=ZS;for(let d=s;d<=c;++d)for(let f=i;f<=l;++f)if(pl.isPointInPath(f,d))return!0;return!1}}function PF(e,t){return t.contains(e.x||0,e.y||0)}function Jz(e,t){const n=e.x||0,i=e.y||0,s=e.width||0,l=e.height||0;return t.intersects(ZS.set(n,i,n+s,i+l))}function Qz(e,t){const n=e.x||0,i=e.y||0,s=e.x2!=null?e.x2:n,l=e.y2!=null?e.y2:i;return Pf(t,n,i,s,l)}function Pf(e,t,n,i,s){const{x1:l,y1:c,x2:d,y2:f}=e,u=i-t,a=s-n;let m=0,w=1,y,o,T,b;for(b=0;b<4;++b){if(b===0&&(y=-u,o=-(l-t)),b===1&&(y=u,o=d-t),b===2&&(y=-a,o=-(c-n)),b===3&&(y=a,o=f-n),Math.abs(y)<1e-10&&o<0)return!1;if(T=o/y,y<0){if(T>w)return!1;T>m&&(m=T)}else if(y>0){if(T<m)return!1;T<w&&(w=T)}}return!0}function Nu(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Xs(e,t){return e??t}function sR(e,t){const n=t.length;for(let i=0;i<n;++i)e.addColorStop(t[i].offset,t[i].color);return e}function Ele(e,t,n){const i=n.width(),s=n.height();let l;if(t.gradient==="radial")l=e.createRadialGradient(n.x1+Xs(t.x1,.5)*i,n.y1+Xs(t.y1,.5)*s,Math.max(i,s)*Xs(t.r1,0),n.x1+Xs(t.x2,.5)*i,n.y1+Xs(t.y2,.5)*s,Math.max(i,s)*Xs(t.r2,.5));else{const c=Xs(t.x1,0),d=Xs(t.y1,0),f=Xs(t.x2,1),u=Xs(t.y2,0);if(c===f||d===u||i===s)l=e.createLinearGradient(n.x1+c*i,n.y1+d*s,n.x1+f*i,n.y1+u*s);else{const a=up(Math.ceil(i),Math.ceil(s)),m=a.getContext("2d");return m.scale(i,s),m.fillStyle=sR(m.createLinearGradient(c,d,f,u),t.stops),m.fillRect(0,0,i,s),e.createPattern(a,"no-repeat")}}return sR(l,t.stops)}function Zz(e,t,n){return AF(n)?Ele(e,n,t.bounds):n}function Wb(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=Zz(e,t,t.fill),!0):!1}var vle=[];function Cu(e,t,n){var i=(i=t.strokeWidth)!=null?i:1;return i<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=Zz(e,t,t.stroke),e.lineWidth=i,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||vle),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function Sle(e,t){return e.zindex-t.zindex||e.index-t.index}function DF(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],i,s,l;for(s=0,l=t.length;s<l;++s)i=t[s],i.index=s,i.zindex&&n.push(i);return e.zdirty=!1,e.zitems=n.sort(Sle)}function Sr(e,t){var n=e.items,i,s;if(!n||!n.length)return;const l=DF(e);if(l&&l.length){for(i=0,s=n.length;i<s;++i)n[i].zindex||t(n[i]);n=l}for(i=0,s=n.length;i<s;++i)t(n[i])}function Vb(e,t){var n=e.items,i,s;if(!n||!n.length)return null;const l=DF(e);for(l&&l.length&&(n=l),s=n.length;--s>=0;)if(i=t(n[s]))return i;if(n===l){for(n=e.items,s=n.length;--s>=0;)if(!n[s].zindex&&(i=t(n[s])))return i}return null}function $F(e){return function(t,n,i){Sr(n,s=>{(!i||i.intersects(s.bounds))&&ej(e,t,s,s)})}}function xle(e){return function(t,n,i){n.items.length&&(!i||i.intersects(n.bounds))&&ej(e,t,n.items[0],n.items)}}function ej(e,t,n,i){var s=n.opacity==null?1:n.opacity;s!==0&&(e(t,i)||(Nu(t,n),n.fill&&Wb(t,n,s)&&t.fill(),n.stroke&&Cu(t,n,s)&&t.stroke()))}function DT(e){return e=e||zs,function(t,n,i,s,l,c){return i*=t.pixelRatio,s*=t.pixelRatio,Vb(n,d=>{const f=d.bounds;if(!(f&&!f.contains(l,c)||!f)&&e(t,d,i,s,l,c))return d})}}function Tp(e,t){return function(n,i,s,l){var c=Array.isArray(i)?i[0]:i,d=t??c.fill,f=c.stroke&&n.isPointInStroke,u,a;return f&&(u=c.strokeWidth,a=c.strokeCap,n.lineWidth=u??1,n.lineCap=a??"butt"),e(n,i)?!1:d&&n.isPointInPath(s,l)||f&&n.isPointInStroke(s,l)}}function UF(e){return DT(Tp(e))}function Xc(e,t){return"translate("+e+","+t+")"}function zF(e){return"rotate("+e+")"}function kle(e,t){return"scale("+e+","+t+")"}function tj(e){return Xc(e.x||0,e.y||0)}function Ble(e){return Xc(e.x||0,e.y||0)+(e.angle?" "+zF(e.angle):"")}function Fle(e){return Xc(e.x||0,e.y||0)+(e.angle?" "+zF(e.angle):"")+(e.scaleX||e.scaleY?" "+kle(e.scaleX||1,e.scaleY||1):"")}function jF(e,t,n){function i(c,d){c("transform",Ble(d)),c("d",t(null,d))}function s(c,d){return t(bp(c,d.angle),d),Io(c,d).translate(d.x||0,d.y||0)}function l(c,d){var f=d.x||0,u=d.y||0,a=d.angle||0;c.translate(f,u),a&&c.rotate(a*=Fl),c.beginPath(),t(c,d),a&&c.rotate(-a),c.translate(-f,-u)}return{type:e,tag:"path",nested:!1,attr:i,bound:s,draw:$F(l),pick:UF(l),isect:n||LF(l)}}var Ile=jF("arc",hle);function Mle(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],i=e[0].orient==="horizontal"?"y":"x",s=e.length,l=1/0,c,d;--s>=0;)e[s].defined!==!1&&(d=Math.abs(e[s][i]-n),d<l&&(l=d,c=e[s]));return c}function Ale(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),i=e.length,s,l,c;--i>=0;)if(e[i].defined!==!1&&(s=e[i].x-t[0],l=e[i].y-t[1],c=s*s+l*l,c<n))return e[i];return null}function Ole(e,t){for(var n=e.length,i,s,l;--n>=0;)if(e[n].defined!==!1&&(i=e[n].x-t[0],s=e[n].y-t[1],l=i*i+s*s,i=e[n].size||1,l<i*i))return e[n];return null}function qF(e,t,n){function i(f,u){var a=u.mark.items;a.length&&f("d",t(null,a))}function s(f,u){var a=u.items;return a.length===0?f:(t(bp(f),a),Io(f,a[0]))}function l(f,u){f.beginPath(),t(f,u)}const c=Tp(l);function d(f,u,a,m,w,y){var o=u.items,T=u.bounds;return!o||!o.length||T&&!T.contains(w,y)?null:(a*=f.pixelRatio,m*=f.pixelRatio,c(f,o,a,m)?o[0]:null)}return{type:e,tag:"path",nested:!0,attr:i,bound:s,draw:xle(l),pick:d,isect:PF,tip:n}}var Nle=qF("area",_le,Mle);function Cle(e,t){var n=t.clip;e.save(),lt(n)?(e.beginPath(),n(e),e.clip()):nj(e,t.group)}function nj(e,t){e.beginPath(),NF(t)?fh(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function ij(e){const t=Xs(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function Rle(e,t){e("transform",tj(t))}function sj(e,t){const n=ij(t);e("d",fh(null,t,n,n))}function Lle(e,t){e("class","background"),e("aria-hidden",!0),sj(e,t)}function Ple(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?sj(e,t):e("d","")}function Dle(e,t,n){const i=t.clip?CF(n,t,t):null;e("clip-path",i)}function $le(e,t){if(!t.clip&&t.items){const n=t.items,i=n.length;for(let s=0;s<i;++s)e.union(n[s].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Io(e,t),e.translate(t.x||0,t.y||0)}function yg(e,t,n,i){const s=ij(t);e.beginPath(),fh(e,t,(n||0)+s,(i||0)+s)}const Ule=Tp(yg),zle=Tp(yg,!1),jle=Tp(yg,!0);function qle(e,t,n){Sr(t,i=>{const s=i.x||0,l=i.y||0,c=i.strokeForeground,d=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&d&&(yg(e,i,s,l),Nu(e,i),i.fill&&Wb(e,i,d)&&e.fill(),i.stroke&&!c&&Cu(e,i,d)&&e.stroke()),e.save(),e.translate(s,l),i.clip&&nj(e,i),n&&n.translate(-s,-l),Sr(i,f=>{this.draw(e,f,n)}),n&&n.translate(s,l),e.restore(),c&&i.stroke&&d&&(yg(e,i,s,l),Nu(e,i),Cu(e,i,d)&&e.stroke())})}function Gle(e,t,n,i,s,l){if(t.bounds&&!t.bounds.contains(s,l)||!t.items)return null;const c=n*e.pixelRatio,d=i*e.pixelRatio;return Vb(t,f=>{let u,a,m;const w=f.bounds;if(w&&!w.contains(s,l))return;a=f.x||0,m=f.y||0;const y=a+(f.width||0),o=m+(f.height||0),T=f.clip;if(T&&(s<a||s>y||l<m||l>o))return;if(e.save(),e.translate(a,m),a=s-a,m=l-m,T&&NF(f)&&!jle(e,f,c,d))return e.restore(),null;const b=f.strokeForeground,S=t.interactive!==!1;return S&&b&&f.stroke&&zle(e,f,c,d)?(e.restore(),f):(u=Vb(f,x=>Hle(x,a,m)?this.pick(x,n,i,a,m):null),!u&&S&&(f.fill||!b&&f.stroke)&&Ule(e,f,c,d)&&(u=f),e.restore(),u||null)})}function Hle(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var Wle={type:"group",tag:"g",nested:!1,attr:Rle,bound:$le,draw:qle,pick:Gle,isect:Jz,content:Dle,background:Lle,foreground:Ple},mg={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function GF(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(i=>{e.image=i,e.image.url=e.url})),n}function HF(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function WF(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function $T(e,t){return e==="center"?t/2:e==="right"?t:0}function UT(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function Vle(e,t,n){const i=GF(t,n),s=HF(t,i),l=WF(t,i),c=(t.x||0)-$T(t.align,s),d=(t.y||0)-UT(t.baseline,l),f=!i.src&&i.toDataURL?i.toDataURL():i.src||"";e("href",f,mg["xmlns:xlink"],"xlink:href"),e("transform",Xc(c,d)),e("width",s),e("height",l),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function Yle(e,t){const n=t.image,i=HF(t,n),s=WF(t,n),l=(t.x||0)-$T(t.align,i),c=(t.y||0)-UT(t.baseline,s);return e.set(l,c,l+i,c+s)}function Xle(e,t,n){Sr(t,i=>{if(n&&!n.intersects(i.bounds))return;const s=GF(i,this);let l=HF(i,s),c=WF(i,s);if(l===0||c===0)return;let d=(i.x||0)-$T(i.align,l),f=(i.y||0)-UT(i.baseline,c),u,a,m,w;i.aspect!==!1&&(a=s.width/s.height,m=i.width/i.height,a===a&&m===m&&a!==m&&(m<a?(w=l/a,f+=(c-w)/2,c=w):(w=c*a,d+=(l-w)/2,l=w))),(s.complete||s.toDataURL)&&(Nu(e,i),e.globalAlpha=(u=i.opacity)!=null?u:1,e.imageSmoothingEnabled=i.smooth!==!1,e.drawImage(s,d,f,l,c))})}var Kle={type:"image",tag:"image",nested:!1,attr:Vle,bound:Yle,draw:Xle,pick:DT(),isect:zs,get:GF,xOffset:$T,yOffset:UT},Jle=qF("line",gle,Ale);function Qle(e,t){var n=t.scaleX||1,i=t.scaleY||1;(n!==1||i!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",Fle(t)),e("d",t.path)}function ww(e,t){var n=t.path;if(n==null)return!0;var i=t.x||0,s=t.y||0,l=t.scaleX||1,c=t.scaleY||1,d=(t.angle||0)*Fl,f=t.pathCache;(!f||f.path!==n)&&((t.pathCache=f=Ou(n)).path=n),d&&e.rotate&&e.translate?(e.translate(i,s),e.rotate(d),pg(e,f,0,0,l,c),e.rotate(-d),e.translate(-i,-s)):pg(e,f,i,s,l,c)}function Zle(e,t){return ww(bp(e,t.angle),t)?e.set(0,0,0,0):Io(e,t,!0)}var ece={type:"path",tag:"path",nested:!1,attr:Qle,bound:Zle,draw:$F(ww),pick:UF(ww),isect:LF(ww)};function tce(e,t){e("d",fh(null,t))}function nce(e,t){var n,i;return Io(e.set(n=t.x||0,i=t.y||0,n+t.width||0,i+t.height||0),t)}function rR(e,t){e.beginPath(),fh(e,t)}var ice={type:"rect",tag:"path",nested:!1,attr:tce,bound:nce,draw:$F(rR),pick:UF(rR),isect:Jz};function sce(e,t){e("transform",tj(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function rce(e,t){var n,i;return Io(e.set(n=t.x||0,i=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:i),t)}function rj(e,t,n){var i,s,l,c;return t.stroke&&Cu(e,t,n)?(i=t.x||0,s=t.y||0,l=t.x2!=null?t.x2:i,c=t.y2!=null?t.y2:s,e.beginPath(),e.moveTo(i,s),e.lineTo(l,c),!0):!1}function ace(e,t,n){Sr(t,i=>{if(!(n&&!n.intersects(i.bounds))){var s=i.opacity==null?1:i.opacity;s&&rj(e,i,s)&&(Nu(e,i),e.stroke())}})}function oce(e,t,n,i){return e.isPointInStroke?rj(e,t,1)&&e.isPointInStroke(n,i):!1}var lce={type:"rule",tag:"line",nested:!1,attr:sce,bound:rce,draw:ace,pick:DT(oce),isect:Qz},cce=jF("shape",ple),dce=jF("symbol",yle,PF);const aR=i5();var pr={height:Na,measureWidth:VF,estimateWidth:ex,width:ex,canvas:aj};aj(!0);function aj(e){pr.width=e&&pl?VF:ex}function ex(e,t){return oj(Ml(e,t),Na(e))}function oj(e,t){return~~(.8*e.length*t)}function VF(e,t){return Na(e)<=0||!(t=Ml(e,t))?0:lj(t,zT(e))}function lj(e,t){const n=`(${t}) ${e}`;let i=aR.get(n);return i===void 0&&(pl.font=t,i=pl.measureText(e).width,aR.set(n,i)),i}function Na(e){return e.fontSize!=null?+e.fontSize||0:11}function Il(e){return e.lineHeight!=null?e.lineHeight:Na(e)+2}function fce(e){return fe(e)?e.length>1?e:e[0]:e}function Ep(e){return fce(e.lineBreak&&e.text&&!fe(e.text)?e.text.split(e.lineBreak):e.text)}function YF(e){const t=Ep(e);return(fe(t)?t.length-1:0)*Il(e)}function Ml(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?hce(e,n):n}function uce(e){if(pr.width===VF){const t=zT(e);return n=>lj(n,t)}else{const t=Na(e);return n=>oj(n,t)}}function hce(e,t){var n=+e.limit,i=uce(e);if(i(t)<n)return t;var s=e.ellipsis||"",l=e.dir==="rtl",c=0,d=t.length,f;if(n-=i(s),l){for(;c<d;)f=c+d>>>1,i(t.slice(f))>n?c=f+1:d=f;return s+t.slice(c)}else{for(;c<d;)f=1+(c+d>>>1),i(t.slice(0,f))<n?c=f:d=f-1;return t.slice(0,c)+s}}function vp(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function zT(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Na(e)+"px "+vp(e,t)}function XF(e){var t=e.baseline,n=Na(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*Il(e):t==="line-bottom"?.29*n-.5*Il(e):0)}const _ce={left:"start",center:"middle",right:"end"},R_=new fn;function jT(e){var t=e.x||0,n=e.y||0,i=e.radius||0,s;return i&&(s=(e.theta||0)-Fc,t+=i*Math.cos(s),n+=i*Math.sin(s)),R_.x1=t,R_.y1=n,R_}function gce(e,t){var n=t.dx||0,i=(t.dy||0)+XF(t),s=jT(t),l=s.x1,c=s.y1,d=t.angle||0,f;e("text-anchor",_ce[t.align]||"start"),d?(f=Xc(l,c)+" "+zF(d),(n||i)&&(f+=" "+Xc(n,i))):f=Xc(l+n,c+i),e("transform",f)}function KF(e,t,n){var i=pr.height(t),s=t.align,l=jT(t),c=l.x1,d=l.y1,f=t.dx||0,u=(t.dy||0)+XF(t)-Math.round(.8*i),a=Ep(t),m;if(fe(a)?(i+=Il(t)*(a.length-1),m=a.reduce((w,y)=>Math.max(w,pr.width(t,y)),0)):m=pr.width(t,a),s==="center"?f-=m/2:s==="right"&&(f-=m),e.set(f+=c,u+=d,f+m,u+i),t.angle&&!n)e.rotate(t.angle*Fl,c,d);else if(n===2)return e.rotatedPoints(t.angle*Fl,c,d);return e}function pce(e,t,n){Sr(t,i=>{var s=i.opacity==null?1:i.opacity,l,c,d,f,u,a,m;if(!(n&&!n.intersects(i.bounds)||s===0||i.fontSize<=0||i.text==null||i.text.length===0)){if(e.font=zT(i),e.textAlign=i.align||"left",l=jT(i),c=l.x1,d=l.y1,i.angle&&(e.save(),e.translate(c,d),e.rotate(i.angle*Fl),c=d=0),c+=i.dx||0,d+=(i.dy||0)+XF(i),a=Ep(i),Nu(e,i),fe(a))for(u=Il(i),f=0;f<a.length;++f)m=Ml(i,a[f]),i.fill&&Wb(e,i,s)&&e.fillText(m,c,d),i.stroke&&Cu(e,i,s)&&e.strokeText(m,c,d),d+=u;else m=Ml(i,a),i.fill&&Wb(e,i,s)&&e.fillText(m,c,d),i.stroke&&Cu(e,i,s)&&e.strokeText(m,c,d);i.angle&&e.restore()}})}function yce(e,t,n,i,s,l){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var c=jT(t),d=c.x1,f=c.y1,u=KF(R_,t,1),a=-t.angle*Fl,m=Math.cos(a),w=Math.sin(a),y=m*s-w*l+(d-m*d+w*f),o=w*s+m*l+(f-w*d-m*f);return u.contains(y,o)}function mce(e,t){const n=KF(R_,e,2);return Pf(t,n[0],n[1],n[2],n[3])||Pf(t,n[0],n[1],n[4],n[5])||Pf(t,n[4],n[5],n[6],n[7])||Pf(t,n[2],n[3],n[6],n[7])}var wce={type:"text",tag:"text",nested:!1,attr:gce,bound:KF,draw:pce,pick:DT(yce),isect:mce},bce=qF("trail",mle,Ole),bs={arc:Ile,area:Nle,group:Wle,image:Kle,line:Jle,path:ece,rect:ice,rule:lce,shape:cce,symbol:dce,text:wce,trail:bce};function tx(e,t,n){var i=bs[e.mark.marktype],s=t||i.bound;return i.nested&&(e=e.mark),s(e.bounds||(e.bounds=new fn),e,n)}var oR={mark:null};function cj(e,t,n){var i=bs[e.marktype],s=i.bound,l=e.items,c=l&&l.length,d,f,u,a;if(i.nested)return c?u=l[0]:(oR.mark=e,u=oR),a=tx(u,s,n),t=t&&t.union(a)||a,t;if(t=t||e.bounds&&e.bounds.clear()||new fn,c)for(d=0,f=l.length;d<f;++d)t.union(tx(l[d],s,n));return e.bounds=t}const Tce=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function dj(e,t){return JSON.stringify(e,Tce,t)}function fj(e){const t=typeof e=="string"?JSON.parse(e):e;return uj(t)}function uj(e){var t=e.marktype,n=e.items,i,s,l;if(n)for(s=0,l=n.length;s<l;++s)i=t?"mark":"group",n[s][i]=e,n[s].zindex&&(n[s][i].zdirty=!0),(t||i)==="group"&&uj(n[s]);return t&&cj(e),e}function JF(e){arguments.length?this.root=fj(e):(this.root=hj({marktype:"group",name:"root",role:"frame"}),this.root.items=[new LT(this.root)])}JF.prototype={toJSON(e){return dj(this.root,e||0)},mark(e,t,n){t=t||this.root.items[0];const i=hj(e,t);return t.items[n]=i,i.zindex&&(i.group.zdirty=!0),i}};function hj(e,t){const n={bounds:new fn,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function rl(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function QF(e,t){t=t.toLowerCase();for(var n=e.childNodes,i=0,s=n.length;i<s;++i)if(n[i].tagName.toLowerCase()===t)return n[i]}function Pi(e,t,n,i){var s=e.childNodes[t],l;return(!s||s.tagName.toLowerCase()!==n.toLowerCase())&&(l=s||null,s=rl(e.ownerDocument,n,i),e.insertBefore(s,l)),s}function lr(e,t){for(var n=e.childNodes,i=n.length;i>t;)e.removeChild(n[--i]);return e}function _j(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function qT(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function Ece(e,t,n,i){var s=e&&e.mark,l,c;if(s&&(l=bs[s.marktype]).tip){for(c=qT(t,n),c[0]-=i[0],c[1]-=i[1];e=e.mark.group;)c[0]-=e.x||0,c[1]-=e.y||0;e=l.tip(s.items,c)}return e}function Al(e,t){this._active=null,this._handlers={},this._loader=e||vT(),this._tooltip=t||vce}function vce(e,t,n,i){e.element().setAttribute("title",i||"")}Al.prototype={initialize(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene(e){return arguments.length?(this._scene=e,this):this._scene},on(){},off(){},_handlerIndex(e,t,n){for(let i=e?e.length:0;--i>=0;)if(e[i].type===t&&(!n||e[i].handler===n))return i;return-1},handlers(e){const t=this._handlers,n=[];if(e)n.push(...t[this.eventName(e)]);else for(const i in t)n.push(...t[i]);return n},eventName(e){const t=e.indexOf(".");return t<0?e:e.slice(0,t)},handleHref(e,t,n){this._loader.sanitize(n,{context:"href"}).then(i=>{const s=new MouseEvent(e.type,e),l=rl(null,"a");for(const c in i)l.setAttribute(c,i[c]);l.dispatchEvent(s)}).catch(()=>{})},handleTooltip(e,t,n){if(t&&t.tooltip!=null){t=Ece(t,e,this.canvas(),this._origin);const i=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,i)}},getItemBoundingClientRect(e){const t=this.canvas();if(!t)return;const n=t.getBoundingClientRect(),i=this._origin,s=e.bounds,l=s.width(),c=s.height();let d=s.x1+i[0]+n.left,f=s.y1+i[1]+n.top;for(;e.mark&&(e=e.mark.group);)d+=e.x||0,f+=e.y||0;return{x:d,y:f,width:l,height:c,left:d,top:f,right:d+l,bottom:f+c}}};function Ca(e){this._el=null,this._bgcolor=null,this._loader=new RF(e)}Ca.prototype={initialize(e,t,n,i,s){return this._el=e,this.resize(t,n,i,s)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(e){return arguments.length===0?this._bgcolor:(this._bgcolor=e,this)},resize(e,t,n,i){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=i||1,this},dirty(){},render(e){const t=this;return t._call=function(){t._render(e)},t._call(),t._call=null,t},_render(){},renderAsync(e){const t=this.render(e);return this._ready?this._ready.then(()=>t):Promise.resolve(t)},_load(e,t){var n=this,i=n._loader[e](t);if(!n._ready){const s=n._call;n._ready=n._loader.ready().then(l=>{l&&s(),n._ready=null})}return i},sanitizeURL(e){return this._load("sanitizeURL",e)},loadImage(e){return this._load("loadImage",e)}};const Sce="keydown",xce="keypress",kce="keyup",gj="dragenter",bw="dragleave",pj="dragover",nx="mousedown",Bce="mouseup",Yb="mousemove",L_="mouseout",yj="mouseover",Xb="click",Fce="dblclick",Ice="wheel",mj="mousewheel",Kb="touchstart",Jb="touchmove",Qb="touchend",Mce=[Sce,xce,kce,gj,bw,pj,nx,Bce,Yb,L_,yj,Xb,Fce,Ice,mj,Kb,Jb,Qb],ix=Yb,wg=L_,sx=Xb;function Sp(e,t){Al.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}const Ace=e=>e===Kb||e===Jb||e===Qb?[Kb,Jb,Qb]:[e];function lR(e,t){Ace(t).forEach(n=>Oce(e,n))}function Oce(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?i=>e[t](i):i=>e.fire(t,i)))}function cR(e,t,n){return function(i){const s=this._active,l=this.pickEvent(i);l===s?this.fire(e,i):((!s||!s.exit)&&this.fire(n,i),this._active=l,this.fire(t,i),this.fire(e,i))}}function dR(e){return function(t){this.fire(e,t),this._active=null}}Te(Sp,Al,{initialize(e,t,n){return this._canvas=e&&QF(e,"canvas"),[Xb,nx,Yb,L_,bw].forEach(i=>lR(this,i)),Al.prototype.initialize.call(this,e,t,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:Mce,DOMMouseScroll(e){this.fire(mj,e)},mousemove:cR(Yb,yj,L_),dragover:cR(pj,gj,bw),mouseout:dR(L_),dragleave:dR(bw),mousedown(e){this._down=this._active,this.fire(nx,e)},click(e){this._down===this._active&&(this.fire(Xb,e),this._down=null)},touchstart(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(Kb,e,!0)},touchmove(e){this.fire(Jb,e,!0)},touchend(e){this.fire(Qb,e,!0),this._touch=null},fire(e,t,n){const i=n?this._touch:this._active,s=this._handlers[e];if(t.vegaType=e,e===sx&&i&&i.href?this.handleHref(t,i,i.href):(e===ix||e===wg)&&this.handleTooltip(t,i,e!==wg),s)for(let l=0,c=s.length;l<c;++l)s[l].handler.call(this._obj,t,i)},on(e,t){const n=this.eventName(e),i=this._handlers;return this._handlerIndex(i[n],e,t)<0&&(lR(this,e),(i[n]||(i[n]=[])).push({type:e,handler:t})),this},off(e,t){const n=this.eventName(e),i=this._handlers[n],s=this._handlerIndex(i,e,t);return s>=0&&i.splice(s,1),this},pickEvent(e){const t=qT(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},pick(e,t,n,i,s){const l=this.context();return bs[e.marktype].pick.call(this,l,e,t,n,i,s)}});function Nce(){return typeof window<"u"&&window.devicePixelRatio||1}var Cce=Nce();function Rce(e,t,n,i,s,l){const c=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,d=e.getContext("2d"),f=c?Cce:s;e.width=t*f,e.height=n*f;for(const u in l)d[u]=l[u];return c&&f!==1&&(e.style.width=t+"px",e.style.height=n+"px"),d.pixelRatio=f,d.setTransform(f,0,0,f,f*i[0],f*i[1]),e}function Zb(e){Ca.call(this,e),this._options={},this._redraw=!1,this._dirty=new fn,this._tempb=new fn}const fR=Ca.prototype,Lce=(e,t,n)=>new fn().set(0,0,t,n).translate(-e[0],-e[1]);function Pce(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}Te(Zb,Ca,{initialize(e,t,n,i,s,l){return this._options=l||{},this._canvas=this._options.externalContext?null:up(1,1,this._options.type),e&&this._canvas&&(lr(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),fR.initialize.call(this,e,t,n,i,s)},resize(e,t,n,i){if(fR.resize.call(this,e,t,n,i),this._canvas)Rce(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||ce("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(e){const t=this._tempb.clear().union(e.bounds);let n=e.mark.group;for(;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)},_render(e){const t=this.context(),n=this._origin,i=this._width,s=this._height,l=this._dirty,c=Lce(n,i,s);t.save();const d=this._redraw||l.empty()?(this._redraw=!1,c.expand(1)):Pce(t,c.intersect(l),n);return this.clear(-n[0],-n[1],i,s),this.draw(t,e,d),t.restore(),l.clear(),this},draw(e,t,n){const i=bs[t.marktype];t.clip&&Cle(e,t),i.draw.call(this,e,t,n),t.clip&&e.restore()},clear(e,t,n,i){const s=this._options,l=this.context();s.type!=="pdf"&&!s.externalContext&&l.clearRect(e,t,n,i),this._bgcolor!=null&&(l.fillStyle=this._bgcolor,l.fillRect(e,t,n,i))}});function ZF(e,t){Al.call(this,e,t);const n=this;n._hrefHandler=rx(n,(i,s)=>{s&&s.href&&n.handleHref(i,s,s.href)}),n._tooltipHandler=rx(n,(i,s)=>{n.handleTooltip(i,s,i.type!==wg)})}const rx=(e,t)=>n=>{let i=n.target.__data__;i=Array.isArray(i)?i[0]:i,n.vegaType=n.type,t.call(e._obj,n,i)};Te(ZF,Al,{initialize(e,t,n){let i=this._svg;return i&&(i.removeEventListener(sx,this._hrefHandler),i.removeEventListener(ix,this._tooltipHandler),i.removeEventListener(wg,this._tooltipHandler)),this._svg=i=e&&QF(e,"svg"),i&&(i.addEventListener(sx,this._hrefHandler),i.addEventListener(ix,this._tooltipHandler),i.addEventListener(wg,this._tooltipHandler)),Al.prototype.initialize.call(this,e,t,n)},canvas(){return this._svg},on(e,t){const n=this.eventName(e),i=this._handlers;if(this._handlerIndex(i[n],e,t)<0){const l={type:e,handler:t,listener:rx(this,t)};(i[n]||(i[n]=[])).push(l),this._svg&&this._svg.addEventListener(n,l.listener)}return this},off(e,t){const n=this.eventName(e),i=this._handlers[n],s=this._handlerIndex(i,e,t);return s>=0&&(this._svg&&this._svg.removeEventListener(n,i[s].listener),i.splice(s,1)),this}});const wj="aria-hidden",eI="aria-label",tI="role",nI="aria-roledescription",bj="graphics-object",iI="graphics-symbol",Tj=(e,t,n)=>({[tI]:e,[nI]:t,[eI]:n||void 0}),Dce=Er(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),uR={axis:{desc:"axis",caption:zce},legend:{desc:"legend",caption:jce},"title-text":{desc:"title",caption:e=>`Title text '${_R(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${_R(e)}'`}},hR={ariaRole:tI,ariaRoleDescription:nI,description:eI};function Ej(e,t){const n=t.aria===!1;if(e(wj,n||void 0),n||t.description==null)for(const i in hR)e(hR[i],void 0);else{const i=t.mark.marktype;e(eI,t.description),e(tI,t.ariaRole||(i==="group"?bj:iI)),e(nI,t.ariaRoleDescription||`${i} mark`)}}function vj(e){return e.aria===!1?{[wj]:!0}:Dce[e.role]?null:uR[e.role]?Uce(e,uR[e.role]):$ce(e)}function $ce(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(i=>i.description!=null&&i.aria!==!1);return Tj(n?bj:iI,`${t} mark container`,e.description)}function Uce(e,t){try{const n=e.items[0],i=t.caption||(()=>"");return Tj(t.role||iI,t.desc,n.description||i(n))}catch{return null}}function _R(e){return xe(e.text).join(" ")}function zce(e){const t=e.datum,n=e.orient,i=t.title?Sj(e):null,s=e.context,l=s.scales[t.scale].value,c=s.dataflow.locale(),d=l.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(i?` titled '${i}'`:"")+` for a ${Au(d)?"discrete":d} scale with ${zz(c,l,e)}`}function jce(e){const t=e.datum,n=t.title?Sj(e):null,i=`${t.type||""} legend`.trim(),s=t.scales,l=Object.keys(s),c=e.context,d=c.scales[s[l[0]]].value,f=c.dataflow.locale();return Gce(i)+(n?` titled '${n}'`:"")+` for ${qce(l)} with ${zz(f,d,e)}`}function Sj(e){try{return xe(wt(e.items).items[0].text).join(" ")}catch{return null}}function qce(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+wt(e)}function Gce(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const xj=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Hce=e=>xj(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function sI(){let e="",t="",n="";const i=[],s=()=>t=n="",l=f=>{t&&(e+=`${t}>${n}`,s()),i.push(f)},c=(f,u)=>(u!=null&&(t+=` ${f}="${Hce(u)}"`),d),d={open(f){l(f),t="<"+f;for(var u=arguments.length,a=new Array(u>1?u-1:0),m=1;m<u;m++)a[m-1]=arguments[m];for(const w of a)for(const y in w)c(y,w[y]);return d},close(){const f=i.pop();return t?e+=t+(n?`>${n}</${f}>`:"/>"):e+=`</${f}>`,s(),d},attr:c,text:f=>(n+=xj(f),d),toString:()=>e};return d}const kj=e=>Bj(sI(),e)+"";function Bj(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,i=n.length;for(let s=0;s<i;++s)e.attr(n[s].name,n[s].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const i of n)i.nodeType===3?e.text(i.nodeValue):Bj(e,i)}return e.close()}const e0={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},t0={blend:"mix-blend-mode"},Fj={fill:"none","stroke-miterlimit":10},Dh=0,gR="http://www.w3.org/2000/xmlns/",yn=mg.xmlns;function rI(e){Ca.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const HE=Ca.prototype;Te(rI,Ca,{initialize(e,t,n,i,s){return this._defs={},this._clearDefs(),e&&(this._svg=Pi(e,0,"svg",yn),this._svg.setAttributeNS(gR,"xmlns",yn),this._svg.setAttributeNS(gR,"xmlns:xlink",mg["xmlns:xlink"]),this._svg.setAttribute("version",mg.version),this._svg.setAttribute("class","marks"),lr(e,1),this._root=Pi(this._svg,Dh,"g",yn),al(this._root,Fj),lr(this._svg,Dh+1)),this.background(this._bgcolor),HE.initialize.call(this,e,t,n,i,s)},background(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),HE.background.apply(this,arguments)},resize(e,t,n,i){return HE.resize.call(this,e,t,n,i),this._svg&&(al(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this},canvas(){return this._svg},svg(){const e=this._svg,t=this._bgcolor;if(!e)return null;let n;t&&(e.removeAttribute("style"),n=Pi(e,Dh,"rect",yn),al(n,{width:this._width,height:this._height,fill:t}));const i=kj(e);return t&&(e.removeChild(n),this._svg.style.setProperty("background-color",t)),i},_render(e){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e),lr(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty(e){return this._dirtyAll||!e._svg||!e._svg.ownerSVGElement||e.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;const e=this._dirty;if(!e.length||!this._dirtyID)return!0;const t=++this._dirtyID;let n,i,s,l,c,d,f;for(c=0,d=e.length;c<d;++c)if(n=e[c],i=n.mark,i.marktype!==s&&(s=i.marktype,l=bs[s]),i.zdirty&&i.dirty!==t&&(this._dirtyAll=!1,pR(n,t),i.items.forEach(u=>{u.dirty=t})),!i.zdirty){if(n.exit){l.nested&&i.items.length?(f=i.items[0],f._svg&&this._update(l,f._svg,f)):n._svg&&(f=n._svg.parentNode,f&&f.removeChild(n._svg)),n._svg=null;continue}n=l.nested?i.items[0]:n,n._update!==t&&(!n._svg||!n._svg.ownerSVGElement?(this._dirtyAll=!1,pR(n,t)):this._update(l,n._svg,n),n._update=t)}return!this._dirtyAll},mark(e,t,n){if(!this.isDirty(t))return t._svg;const i=this._svg,s=bs[t.marktype],l=t.interactive===!1?"none":null,c=s.tag==="g",d=yR(t,e,n,"g",i);d.setAttribute("class",_j(t));const f=vj(t);for(const w in f)gi(d,w,f[w]);c||gi(d,"pointer-events",l),gi(d,"clip-path",t.clip?CF(this,t,t.group):null);let u=null,a=0;const m=w=>{const y=this.isDirty(w),o=yR(w,d,u,s.tag,i);y&&(this._update(s,o,w),c&&Yce(this,o,w)),u=o,++a};return s.nested?t.items.length&&m(t.items[0]):Sr(t,m),lr(d,a),d},_update(e,t,n){oo=t,Jn=t.__values__,Ej(P_,n),e.attr(P_,n,this);const i=Kce[e.type];i&&i.call(this,e,t,n),oo&&this.style(oo,n)},style(e,t){if(t!=null){for(const n in e0){let i=n==="font"?vp(t):t[n];if(i===Jn[n])continue;const s=e0[n];i==null?e.removeAttribute(s):(AF(i)&&(i=qz(i,this._defs.gradient,Ij())),e.setAttribute(s,i+"")),Jn[n]=i}for(const n in t0)Tw(e,t0[n],t[n])}},defs(){const e=this._svg,t=this._defs;let n=t.el,i=0;for(const s in t.gradient)n||(t.el=n=Pi(e,Dh+1,"defs",yn)),i=Wce(n,t.gradient[s],i);for(const s in t.clipping)n||(t.el=n=Pi(e,Dh+1,"defs",yn)),i=Vce(n,t.clipping[s],i);n&&(i===0?(e.removeChild(n),t.el=null):lr(n,i))},_clearDefs(){const e=this._defs;e.gradient={},e.clipping={}}});function pR(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function Wce(e,t,n){let i,s,l;if(t.gradient==="radial"){let c=Pi(e,n++,"pattern",yn);al(c,{id:Hb+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),c=Pi(c,0,"rect",yn),al(c,{width:1,height:1,fill:`url(${Ij()}#${t.id})`}),e=Pi(e,n++,"radialGradient",yn),al(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=Pi(e,n++,"linearGradient",yn),al(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(i=0,s=t.stops.length;i<s;++i)l=Pi(e,i,"stop",yn),l.setAttribute("offset",t.stops[i].offset),l.setAttribute("stop-color",t.stops[i].color);return lr(e,i),n}function Vce(e,t,n){let i;return e=Pi(e,n,"clipPath",yn),e.setAttribute("id",t.id),t.path?(i=Pi(e,0,"path",yn),i.setAttribute("d",t.path)):(i=Pi(e,0,"rect",yn),al(i,{x:0,y:0,width:t.width,height:t.height})),lr(e,1),n+1}function Yce(e,t,n){t=t.lastChild.previousSibling;let i,s=0;Sr(n,l=>{i=e.mark(t,l,i),++s}),lr(t,1+s)}function yR(e,t,n,i,s){let l=e._svg,c;if(!l&&(c=t.ownerDocument,l=rl(c,i,yn),e._svg=l,e.mark&&(l.__data__=e,l.__values__={fill:"default"},i==="g"))){const d=rl(c,"path",yn);l.appendChild(d),d.__data__=e;const f=rl(c,"g",yn);l.appendChild(f),f.__data__=e;const u=rl(c,"path",yn);l.appendChild(u),u.__data__=e,u.__values__={fill:"default"}}return(l.ownerSVGElement!==s||Xce(l,n))&&t.insertBefore(l,n?n.nextSibling:t.firstChild),l}function Xce(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let oo=null,Jn=null;const Kce={group(e,t,n){const i=oo=t.childNodes[2];Jn=i.__values__,e.foreground(P_,n,this),Jn=t.__values__,oo=t.childNodes[1],e.content(P_,n,this);const s=oo=t.childNodes[0];e.background(P_,n,this);const l=n.mark.interactive===!1?"none":null;if(l!==Jn.events&&(gi(i,"pointer-events",l),gi(s,"pointer-events",l),Jn.events=l),n.strokeForeground&&n.stroke){const c=n.fill;gi(i,"display",null),this.style(s,n),gi(s,"stroke",null),c&&(n.fill=null),Jn=i.__values__,this.style(i,n),c&&(n.fill=c),oo=null}else gi(i,"display","none")},image(e,t,n){n.smooth===!1?(Tw(t,"image-rendering","optimizeSpeed"),Tw(t,"image-rendering","pixelated")):Tw(t,"image-rendering",null)},text(e,t,n){const i=Ep(n);let s,l,c,d;fe(i)?(l=i.map(f=>Ml(n,f)),s=l.join(`
`),s!==Jn.text&&(lr(t,0),c=t.ownerDocument,d=Il(n),l.forEach((f,u)=>{const a=rl(c,"tspan",yn);a.__data__=n,a.textContent=f,u&&(a.setAttribute("x",0),a.setAttribute("dy",d)),t.appendChild(a)}),Jn.text=s)):(l=Ml(n,i),l!==Jn.text&&(t.textContent=l,Jn.text=l)),gi(t,"font-family",vp(n)),gi(t,"font-size",Na(n)+"px"),gi(t,"font-style",n.fontStyle),gi(t,"font-variant",n.fontVariant),gi(t,"font-weight",n.fontWeight)}};function P_(e,t,n){t!==Jn[e]&&(n?Jce(oo,e,t,n):gi(oo,e,t),Jn[e]=t)}function Tw(e,t,n){n!==Jn[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Jn[t]=n)}function al(e,t){for(const n in t)gi(e,n,t[n])}function gi(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function Jce(e,t,n,i){n!=null?e.setAttributeNS(i,t,n):e.removeAttributeNS(i,t)}function Ij(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function aI(e){Ca.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}Te(aI,Ca,{svg(){return this._text},_render(e){const t=sI();t.open("svg",ot({},mg,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const n=this._bgcolor;return n&&n!=="transparent"&&n!=="none"&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",Fj,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this},mark(e,t){const n=bs[t.marktype],i=n.tag,s=[Ej,n.attr];e.open("g",{class:_j(t),"clip-path":t.clip?CF(this,t,t.group):null},vj(t),{"pointer-events":i!=="g"&&t.interactive===!1?"none":null});const l=c=>{const d=this.href(c);if(d&&e.open("a",d),e.open(i,this.attr(t,c,s,i!=="g"?i:null)),i==="text"){const f=Ep(c);if(fe(f)){const u={x:0,dy:Il(c)};for(let a=0;a<f.length;++a)e.open("tspan",a?u:null).text(Ml(c,f[a])).close()}else e.text(Ml(c,f))}else if(i==="g"){const f=c.strokeForeground,u=c.fill,a=c.stroke;f&&a&&(c.stroke=null),e.open("path",this.attr(t,c,n.background,"bgrect")).close(),e.open("g",this.attr(t,c,n.content)),Sr(c,m=>this.mark(e,m)),e.close(),f&&a?(u&&(c.fill=null),c.stroke=a,e.open("path",this.attr(t,c,n.foreground,"bgrect")).close(),u&&(c.fill=u)):e.open("path",this.attr(t,c,n.foreground,"bgfore")).close()}e.close(),d&&e.close()};return n.nested?t.items&&t.items.length&&l(t.items[0]):Sr(t,l),e.close()},href(e){const t=e.href;let n;if(t){if(n=this._hrefs&&this._hrefs[t])return n;this.sanitizeURL(t).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[t]=i})}return null},attr(e,t,n,i){const s={},l=(c,d,f,u)=>{s[u||c]=d};return Array.isArray(n)?n.forEach(c=>c(l,t,this)):n(l,t,this),i&&Qce(s,t,e,i,this._defs),s},defs(e){const t=this._defs.gradient,n=this._defs.clipping;if(Object.keys(t).length+Object.keys(n).length!==0){e.open("defs");for(const s in t){const l=t[s],c=l.stops;l.gradient==="radial"?(e.open("pattern",{id:Hb+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),e.close(),e.open("radialGradient",{id:s,fx:l.x1,fy:l.y1,fr:l.r1,cx:l.x2,cy:l.y2,r:l.r2})):e.open("linearGradient",{id:s,x1:l.x1,x2:l.x2,y1:l.y1,y2:l.y2});for(let d=0;d<c.length;++d)e.open("stop",{offset:c[d].offset,"stop-color":c[d].color}).close();e.close()}for(const s in n){const l=n[s];e.open("clipPath",{id:s}),l.path?e.open("path",{d:l.path}).close():e.open("rect",{x:0,y:0,width:l.width,height:l.height}).close(),e.close()}e.close()}}});function Qce(e,t,n,i,s){let l;if(t==null||(i==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),i==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;i==="image"&&t.smooth===!1&&(l=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),i==="text"&&(e["font-family"]=vp(t),e["font-size"]=Na(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const c in e0){let d=t[c];const f=e0[c];d==="transparent"&&(f==="fill"||f==="stroke")||d!=null&&(AF(d)&&(d=qz(d,s.gradient,"")),e[f]=d)}for(const c in t0){const d=t[c];d!=null&&(l=l||[],l.push(`${t0[c]}: ${d};`))}return l&&(e.style=l.join(" ")),e}const Mj="canvas",Aj="png",Oj="svg",Nj="none",ol={Canvas:Mj,PNG:Aj,SVG:Oj,None:Nj},Ru={};Ru[Mj]=Ru[Aj]={renderer:Zb,headless:Zb,handler:Sp};Ru[Oj]={renderer:rI,headless:aI,handler:ZF};Ru[Nj]={};function GT(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Ru[e]=t,this):Ru[e]}function Cj(e,t,n){const i=[],s=new fn().union(t),l=e.marktype;return l?Rj(e,s,n,i):l==="group"?Lj(e,s,n,i):ce("Intersect scene must be mark node or group item.")}function Rj(e,t,n,i){if(Zce(e,t,n)){const s=e.items,l=e.marktype,c=s.length;let d=0;if(l==="group")for(;d<c;++d)Lj(s[d],t,n,i);else for(const f=bs[l].isect;d<c;++d){const u=s[d];Pj(u,t,f)&&i.push(u)}}return i}function Zce(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function Lj(e,t,n,i){n&&n(e.mark)&&Pj(e,t,bs.group.isect)&&i.push(e);const s=e.items,l=s&&s.length;if(l){const c=e.x||0,d=e.y||0;t.translate(-c,-d);for(let f=0;f<l;++f)Rj(s[f],t,n,i);t.translate(c,d)}return i}function Pj(e,t,n){const i=e.bounds;return t.encloses(i)||t.intersects(i)&&n(e,t)}const WE=new fn;function Dj(e){const t=e.clip;if(lt(t))t(bp(WE.clear()));else if(t)WE.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(WE)}const ede=1e-9;function oI(e,t,n){return e===t?!0:n==="path"?$j(e,t):e instanceof Date&&t instanceof Date?+e==+t:$t(e)&&$t(t)?Math.abs(e-t)<=ede:!e||!t||!Be(e)&&!Be(t)?e==t:tde(e,t)}function $j(e,t){return oI(Ou(e),Ou(t))}function tde(e,t){var n=Object.keys(e),i=Object.keys(t),s,l;if(n.length!==i.length)return!1;for(n.sort(),i.sort(),l=n.length-1;l>=0;l--)if(n[l]!=i[l])return!1;for(l=n.length-1;l>=0;l--)if(s=n[l],!oI(e[s],t[s],s))return!1;return typeof e==typeof t}function nde(){Kz(),Boe()}const Lu="top",cr="left",ur="right",Ol="bottom",ide="top-left",sde="top-right",rde="bottom-left",ade="bottom-right",lI="start",ax="middle",yi="end",ode="x",lde="y",HT="group",cI="axis",dI="title",cde="frame",dde="scope",fI="legend",Uj="row-header",zj="row-footer",jj="row-title",qj="column-header",Gj="column-footer",Hj="column-title",fde="padding",ude="symbol",Wj="fit",Vj="fit-x",Yj="fit-y",hde="pad",uI="none",Im="all",ox="each",hI="flush",ll="column",cl="row";function Xj(e){re.call(this,null,e)}Te(Xj,re,{transform(e,t){const n=t.dataflow,i=e.mark,s=i.marktype,l=bs[s],c=l.bound;let d=i.bounds,f;if(l.nested)i.items.length&&n.dirty(i.items[0]),d=Mm(i,c),i.items.forEach(u=>{u.bounds.clear().union(d)});else if(s===HT||e.modified())switch(t.visit(t.MOD,u=>n.dirty(u)),d.clear(),i.items.forEach(u=>d.union(Mm(u,c))),i.role){case cI:case fI:case dI:t.reflow()}else f=t.changed(t.REM),t.visit(t.ADD,u=>{d.union(Mm(u,c))}),t.visit(t.MOD,u=>{f=f||d.alignsWith(u.bounds),n.dirty(u),d.union(Mm(u,c))}),f&&(d.clear(),i.items.forEach(u=>d.union(u.bounds)));return Dj(i),t.modifies("bounds")}});function Mm(e,t,n){return t(e.bounds.clear(),e,n)}const mR=":vega_identifier:";function _I(e){re.call(this,0,e)}_I.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};Te(_I,re,{transform(e,t){const n=_de(t.dataflow),i=e.as;let s=n.value;return t.visit(t.ADD,l=>l[i]=l[i]||++s),n.set(this.value=s),t}});function _de(e){return e._signals[mR]||(e._signals[mR]=e.add(0))}function Kj(e){re.call(this,null,e)}Te(Kj,re,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,gde(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const i=n.marktype===HT?LT:RT;return t.visit(t.ADD,s=>i.call(s,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function gde(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function Jj(e){re.call(this,null,e)}const wR={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((i,s)=>!s||!Qj(n.bounds,i.bounds,t)?(n=i,1):i.opacity=0)}},Qj=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),bR=(e,t)=>{for(var n=1,i=e.length,s=e[0].bounds,l;n<i;s=l,++n)if(Qj(s,l=e[n].bounds,t))return!0},pde=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},yde=(e,t,n)=>{var i=e.range(),s=new fn;return t===Lu||t===Ol?s.set(i[0],-1/0,i[1],1/0):s.set(-1/0,i[0],1/0,i[1]),s.expand(n||1),l=>s.encloses(l.bounds)},TR=e=>(e.forEach(t=>t.opacity=1),e),ER=(e,t)=>e.reflow(t.modified()).modifies("opacity");Te(Jj,re,{transform(e,t){const n=wR[e.method]||wR.parity,i=e.separation||0;let s=t.materialize(t.SOURCE).source,l,c;if(!s||!s.length)return;if(!e.method)return e.modified("method")&&(TR(s),t=ER(t,e)),t;if(s=s.filter(pde),!s.length)return;if(e.sort&&(s=s.slice().sort(e.sort)),l=TR(s),t=ER(t,e),l.length>=3&&bR(l,i)){do l=n(l,i);while(l.length>=3&&bR(l,i));l.length<3&&!wt(s).opacity&&(l.length>1&&(wt(l).opacity=0),wt(s).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(c=yde(e.boundScale,e.boundOrient,+e.boundTolerance),s.forEach(f=>{c(f)||(f.opacity=0)}));const d=l[0].mark.bounds.clear();return s.forEach(f=>{f.opacity&&d.union(f.bounds)}),t}});function Zj(e){re.call(this,null,e)}Te(Zj,re,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,i=>n.dirty(i)),t.fields&&t.fields.zindex){const i=t.source&&t.source[0];i&&(i.mark.zdirty=!0)}}});const Kn=new fn;function Df(e,t,n){return e[t]===n?0:(e[t]=n,1)}function mde(e){var t=e.items[0].orient;return t===cr||t===ur}function wde(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function bde(e,t,n,i){var s=t.items[0],l=s.datum,c=s.translate!=null?s.translate:.5,d=s.orient,f=wde(l),u=s.range,a=s.offset,m=s.position,w=s.minExtent,y=s.maxExtent,o=l.title&&s.items[f[2]].items[0],T=s.titlePadding,b=s.bounds,S=o&&YF(o),x=0,k=0,I,B;switch(Kn.clear().union(b),b.clear(),(I=f[0])>-1&&b.union(s.items[I].bounds),(I=f[1])>-1&&b.union(s.items[I].bounds),d){case Lu:x=m||0,k=-a,B=Math.max(w,Math.min(y,-b.y1)),b.add(0,-B).add(u,0),o&&Am(e,o,B,T,S,0,-1,b);break;case cr:x=-a,k=m||0,B=Math.max(w,Math.min(y,-b.x1)),b.add(-B,0).add(0,u),o&&Am(e,o,B,T,S,1,-1,b);break;case ur:x=n+a,k=m||0,B=Math.max(w,Math.min(y,b.x2)),b.add(0,0).add(B,u),o&&Am(e,o,B,T,S,1,1,b);break;case Ol:x=m||0,k=i+a,B=Math.max(w,Math.min(y,b.y2)),b.add(0,0).add(u,B),o&&Am(e,o,B,T,0,0,1,b);break;default:x=s.x,k=s.y}return Io(b.translate(x,k),s),Df(s,"x",x+c)|Df(s,"y",k+c)&&(s.bounds=Kn,e.dirty(s),s.bounds=b,e.dirty(s)),s.mark.bounds.clear().union(b)}function Am(e,t,n,i,s,l,c,d){const f=t.bounds;if(t.auto){const u=c*(n+s+i);let a=0,m=0;e.dirty(t),l?a=(t.x||0)-(t.x=u):m=(t.y||0)-(t.y=u),t.mark.bounds.clear().union(f.translate(-a,-m)),e.dirty(t)}d.union(f)}const vR=(e,t)=>Math.floor(Math.min(e,t)),SR=(e,t)=>Math.ceil(Math.max(e,t));function Tde(e){var t=e.items,n=t.length,i=0,s,l;const c={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;i<n;++i)if(s=t[i],l=s.items,s.marktype===HT)switch(s.role){case cI:case fI:case dI:break;case Uj:c.rowheaders.push(...l);break;case zj:c.rowfooters.push(...l);break;case qj:c.colheaders.push(...l);break;case Gj:c.colfooters.push(...l);break;case jj:c.rowtitle=l[0];break;case Hj:c.coltitle=l[0];break;default:c.marks.push(...l)}return c}function Ede(e){return new fn().set(0,0,e.width||0,e.height||0)}function vde(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Jt(e,t,n){const i=Be(e)?e[t]:e;return i??(n!==void 0?n:0)}function xR(e){return e<0?Math.ceil(-e):0}function eq(e,t,n){var i=!n.nodirty,s=n.bounds===hI?Ede:vde,l=Kn.set(0,0,0,0),c=Jt(n.align,ll),d=Jt(n.align,cl),f=Jt(n.padding,ll),u=Jt(n.padding,cl),a=n.columns||t.length,m=a<=0?1:Math.ceil(t.length/a),w=t.length,y=Array(w),o=Array(a),T=0,b=Array(w),S=Array(m),x=0,k=Array(w),I=Array(w),B=Array(w),O,A,R,P,D,U,Y,z,W,H,V;for(A=0;A<a;++A)o[A]=0;for(A=0;A<m;++A)S[A]=0;for(A=0;A<w;++A)U=t[A],D=B[A]=s(U),U.x=U.x||0,k[A]=0,U.y=U.y||0,I[A]=0,R=A%a,P=~~(A/a),T=Math.max(T,Y=Math.ceil(D.x2)),x=Math.max(x,z=Math.ceil(D.y2)),o[R]=Math.max(o[R],Y),S[P]=Math.max(S[P],z),y[A]=f+xR(D.x1),b[A]=u+xR(D.y1),i&&e.dirty(t[A]);for(A=0;A<w;++A)A%a===0&&(y[A]=0),A<a&&(b[A]=0);if(c===ox)for(R=1;R<a;++R){for(V=0,A=R;A<w;A+=a)V<y[A]&&(V=y[A]);for(A=R;A<w;A+=a)y[A]=V+o[R-1]}else if(c===Im){for(V=0,A=0;A<w;++A)A%a&&V<y[A]&&(V=y[A]);for(A=0;A<w;++A)A%a&&(y[A]=V+T)}else for(c=!1,R=1;R<a;++R)for(A=R;A<w;A+=a)y[A]+=o[R-1];if(d===ox)for(P=1;P<m;++P){for(V=0,A=P*a,O=A+a;A<O;++A)V<b[A]&&(V=b[A]);for(A=P*a;A<O;++A)b[A]=V+S[P-1]}else if(d===Im){for(V=0,A=a;A<w;++A)V<b[A]&&(V=b[A]);for(A=a;A<w;++A)b[A]=V+x}else for(d=!1,P=1;P<m;++P)for(A=P*a,O=A+a;A<O;++A)b[A]+=S[P-1];for(W=0,A=0;A<w;++A)W=y[A]+(A%a?W:0),k[A]+=W-t[A].x;for(R=0;R<a;++R)for(H=0,A=R;A<w;A+=a)H+=b[A],I[A]+=H-t[A].y;if(c&&Jt(n.center,ll)&&m>1)for(A=0;A<w;++A)D=c===Im?T:o[A%a],W=D-B[A].x2-t[A].x-k[A],W>0&&(k[A]+=W/2);if(d&&Jt(n.center,cl)&&a!==1)for(A=0;A<w;++A)D=d===Im?x:S[~~(A/a)],H=D-B[A].y2-t[A].y-I[A],H>0&&(I[A]+=H/2);for(A=0;A<w;++A)l.union(B[A].translate(k[A],I[A]));switch(W=Jt(n.anchor,ode),H=Jt(n.anchor,lde),Jt(n.anchor,ll)){case yi:W-=l.width();break;case ax:W-=l.width()/2}switch(Jt(n.anchor,cl)){case yi:H-=l.height();break;case ax:H-=l.height()/2}for(W=Math.round(W),H=Math.round(H),l.clear(),A=0;A<w;++A)t[A].mark.bounds.clear();for(A=0;A<w;++A)U=t[A],U.x+=k[A]+=W,U.y+=I[A]+=H,l.union(U.mark.bounds.union(U.bounds.translate(k[A],I[A]))),i&&e.dirty(U);return l}function Sde(e,t,n){var i=Tde(t),s=i.marks,l=n.bounds===hI?xde:kde,c=n.offset,d=n.columns||s.length,f=d<=0?1:Math.ceil(s.length/d),u=f*d,a,m,w,y,o,T,b;const S=eq(e,s,n);S.empty()&&S.set(0,0,0,0),i.rowheaders&&(T=Jt(n.headerBand,cl,null),a=Om(e,i.rowheaders,s,d,f,-Jt(c,"rowHeader"),vR,0,l,"x1",0,d,1,T)),i.colheaders&&(T=Jt(n.headerBand,ll,null),m=Om(e,i.colheaders,s,d,d,-Jt(c,"columnHeader"),vR,1,l,"y1",0,1,d,T)),i.rowfooters&&(T=Jt(n.footerBand,cl,null),w=Om(e,i.rowfooters,s,d,f,Jt(c,"rowFooter"),SR,0,l,"x2",d-1,d,1,T)),i.colfooters&&(T=Jt(n.footerBand,ll,null),y=Om(e,i.colfooters,s,d,d,Jt(c,"columnFooter"),SR,1,l,"y2",u-d,1,d,T)),i.rowtitle&&(o=Jt(n.titleAnchor,cl),b=Jt(c,"rowTitle"),b=o===yi?w+b:a-b,T=Jt(n.titleBand,cl,.5),kR(e,i.rowtitle,b,0,S,T)),i.coltitle&&(o=Jt(n.titleAnchor,ll),b=Jt(c,"columnTitle"),b=o===yi?y+b:m-b,T=Jt(n.titleBand,ll,.5),kR(e,i.coltitle,b,1,S,T))}function xde(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function kde(e,t){return e.bounds[t]}function Om(e,t,n,i,s,l,c,d,f,u,a,m,w,y){var o=n.length,T=0,b=0,S,x,k,I,B,O,A,R,P;if(!o)return T;for(S=a;S<o;S+=m)n[S]&&(T=c(T,f(n[S],u)));if(!t.length)return T;for(t.length>s&&(e.warn("Grid headers exceed limit: "+s),t=t.slice(0,s)),T+=l,x=0,I=t.length;x<I;++x)e.dirty(t[x]),t[x].mark.bounds.clear();for(S=a,x=0,I=t.length;x<I;++x,S+=m){for(O=t[x],B=O.mark.bounds,k=S;k>=0&&(A=n[k])==null;k-=w);d?(R=y==null?A.x:Math.round(A.bounds.x1+y*A.bounds.width()),P=T):(R=T,P=y==null?A.y:Math.round(A.bounds.y1+y*A.bounds.height())),B.union(O.bounds.translate(R-(O.x||0),P-(O.y||0))),O.x=R,O.y=P,e.dirty(O),b=c(b,B[u])}return b}function kR(e,t,n,i,s,l){if(t){e.dirty(t);var c=n,d=n;i?c=Math.round(s.x1+l*s.width()):d=Math.round(s.y1+l*s.height()),t.bounds.translate(c-(t.x||0),d-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=c,t.y=d,e.dirty(t)}}function Bde(e,t){const n=e[t]||{};return(i,s)=>n[i]!=null?n[i]:e[i]!=null?e[i]:s}function Fde(e,t){let n=-1/0;return e.forEach(i=>{i.offset!=null&&(n=Math.max(n,i.offset))}),n>-1/0?n:t}function Ide(e,t,n,i,s,l,c){const d=Bde(n,t),f=Fde(e,d("offset",0)),u=d("anchor",lI),a=u===yi?1:u===ax?.5:0,m={align:ox,bounds:d("bounds",hI),columns:d("direction")==="vertical"?1:e.length,padding:d("margin",8),center:d("center"),nodirty:!0};switch(t){case cr:m.anchor={x:Math.floor(i.x1)-f,column:yi,y:a*(c||i.height()+2*i.y1),row:u};break;case ur:m.anchor={x:Math.ceil(i.x2)+f,y:a*(c||i.height()+2*i.y1),row:u};break;case Lu:m.anchor={y:Math.floor(s.y1)-f,row:yi,x:a*(l||s.width()+2*s.x1),column:u};break;case Ol:m.anchor={y:Math.ceil(s.y2)+f,x:a*(l||s.width()+2*s.x1),column:u};break;case ide:m.anchor={x:f,y:f};break;case sde:m.anchor={x:l-f,y:f,column:yi};break;case rde:m.anchor={x:f,y:c-f,row:yi};break;case ade:m.anchor={x:l-f,y:c-f,column:yi,row:yi};break}return m}function Mde(e,t){var n=t.items[0],i=n.datum,s=n.orient,l=n.bounds,c=n.x,d=n.y,f,u;return n._bounds?n._bounds.clear().union(l):n._bounds=l.clone(),l.clear(),Ode(e,n,n.items[0].items[0]),l=Ade(n,l),f=2*n.padding,u=2*n.padding,l.empty()||(f=Math.ceil(l.width()+f),u=Math.ceil(l.height()+u)),i.type===ude&&Nde(n.items[0].items[0].items[0].items),s!==uI&&(n.x=c=0,n.y=d=0),n.width=f,n.height=u,Io(l.set(c,d,c+f,d+u),n),n.mark.bounds.clear().union(l),n}function Ade(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function Ode(e,t,n){var i=t.padding,s=i-n.x,l=i-n.y;if(!t.datum.title)(s||l)&&$h(e,n,s,l);else{var c=t.items[1].items[0],d=c.anchor,f=t.titlePadding||0,u=i-c.x,a=i-c.y;switch(c.orient){case cr:s+=Math.ceil(c.bounds.width())+f;break;case ur:case Ol:break;default:l+=c.bounds.height()+f}switch((s||l)&&$h(e,n,s,l),c.orient){case cr:a+=ff(t,n,c,d,1,1);break;case ur:u+=ff(t,n,c,yi,0,0)+f,a+=ff(t,n,c,d,1,1);break;case Ol:u+=ff(t,n,c,d,0,0),a+=ff(t,n,c,yi,-1,0,1)+f;break;default:u+=ff(t,n,c,d,0,0)}(u||a)&&$h(e,c,u,a),(u=Math.round(c.bounds.x1-i))<0&&($h(e,n,-u,0),$h(e,c,-u,0))}}function ff(e,t,n,i,s,l,c){const d=e.datum.type!=="symbol",f=n.datum.vgrad,u=d&&(l||!f)&&!c?t.items[0]:t,a=u.bounds[s?"y2":"x2"]-e.padding,m=f&&l?a:0,w=f&&l?0:a,y=s<=0?0:YF(n);return Math.round(i===lI?m:i===yi?w-y:.5*(a-y))}function $h(e,t,n,i){t.x+=n,t.y+=i,t.bounds.translate(n,i),t.mark.bounds.translate(n,i),e.dirty(t)}function Nde(e){const t=e.reduce((n,i)=>(n[i.column]=Math.max(i.bounds.x2-i.x,n[i.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function Cde(e,t,n,i,s){var l=t.items[0],c=l.frame,d=l.orient,f=l.anchor,u=l.offset,a=l.padding,m=l.items[0].items[0],w=l.items[1]&&l.items[1].items[0],y=d===cr||d===ur?i:n,o=0,T=0,b=0,S=0,x=0,k;if(c!==HT?d===cr?(o=s.y2,y=s.y1):d===ur?(o=s.y1,y=s.y2):(o=s.x1,y=s.x2):d===cr&&(o=i,y=0),k=f===lI?o:f===yi?y:(o+y)/2,w&&w.text){switch(d){case Lu:case Ol:x=m.bounds.height()+a;break;case cr:S=m.bounds.width()+a;break;case ur:S=-m.bounds.width()-a;break}Kn.clear().union(w.bounds),Kn.translate(S-(w.x||0),x-(w.y||0)),Df(w,"x",S)|Df(w,"y",x)&&(e.dirty(w),w.bounds.clear().union(Kn),w.mark.bounds.clear().union(Kn),e.dirty(w)),Kn.clear().union(w.bounds)}else Kn.clear();switch(Kn.union(m.bounds),d){case Lu:T=k,b=s.y1-Kn.height()-u;break;case cr:T=s.x1-Kn.width()-u,b=k;break;case ur:T=s.x2+Kn.width()+u,b=k;break;case Ol:T=k,b=s.y2+u;break;default:T=l.x,b=l.y}return Df(l,"x",T)|Df(l,"y",b)&&(Kn.translate(T,b),e.dirty(l),l.bounds.clear().union(Kn),t.bounds.clear().union(Kn),e.dirty(l)),l.bounds}function tq(e){re.call(this,null,e)}Te(tq,re,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(i=>{e.layout&&Sde(n,i,e.layout),Lde(n,i,e)}),Rde(e.mark.group)?t.reflow():t}});function Rde(e){return e&&e.mark.role!=="legend-entry"}function Lde(e,t,n){var i=t.items,s=Math.max(0,t.width||0),l=Math.max(0,t.height||0),c=new fn().set(0,0,s,l),d=c.clone(),f=c.clone(),u=[],a,m,w,y,o,T;for(o=0,T=i.length;o<T;++o)switch(m=i[o],m.role){case cI:y=mde(m)?d:f,y.union(bde(e,m,s,l));break;case dI:a=m;break;case fI:u.push(Mde(e,m));break;case cde:case dde:case Uj:case zj:case jj:case qj:case Gj:case Hj:d.union(m.bounds),f.union(m.bounds);break;default:c.union(m.bounds)}if(u.length){const b={};u.forEach(S=>{w=S.orient||ur,w!==uI&&(b[w]||(b[w]=[])).push(S)});for(const S in b){const x=b[S];eq(e,x,Ide(x,S,n.legends,d,f,s,l))}u.forEach(S=>{const x=S.bounds;if(x.equals(S._bounds)||(S.bounds=S._bounds,e.dirty(S),S.bounds=x,e.dirty(S)),n.autosize&&(n.autosize.type===Wj||n.autosize.type===Vj||n.autosize.type===Yj))switch(S.orient){case cr:case ur:c.add(x.x1,0).add(x.x2,0);break;case Lu:case Ol:c.add(0,x.y1).add(0,x.y2)}else c.union(x)})}c.union(d).union(f),a&&c.union(Cde(e,a,s,l,c)),t.clip&&c.set(0,0,t.width||0,t.height||0),Pde(e,t,c,n)}function Pde(e,t,n,i){const s=i.autosize||{},l=s.type;if(e._autosize<1||!l)return;let c=e._width,d=e._height,f=Math.max(0,t.width||0),u=Math.max(0,Math.ceil(-n.x1)),a=Math.max(0,t.height||0),m=Math.max(0,Math.ceil(-n.y1));const w=Math.max(0,Math.ceil(n.x2-f)),y=Math.max(0,Math.ceil(n.y2-a));if(s.contains===fde){const o=e.padding();c-=o.left+o.right,d-=o.top+o.bottom}l===uI?(u=0,m=0,f=c,a=d):l===Wj?(f=Math.max(0,c-u-w),a=Math.max(0,d-m-y)):l===Vj?(f=Math.max(0,c-u-w),d=a+m+y):l===Yj?(c=f+u+w,a=Math.max(0,d-m-y)):l===hde&&(c=f+u+w,d=a+m+y),e._resizeView(c,d,f,a,[u,m],s.resize)}const Dde=Object.freeze(Object.defineProperty({__proto__:null,bound:Xj,identifier:_I,mark:Kj,overlap:Jj,render:Zj,viewlayout:tq},Symbol.toStringTag,{value:"Module"}));function nq(e){re.call(this,null,e)}Te(nq,re,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),s=this.value,l=e.scale,c=e.count==null?e.values?e.values.length:10:e.count,d=IF(l,c,e.minstep),f=e.format||Lz(n,l,d,e.formatSpecifier,e.formatType,!!e.values),u=e.values?Rz(l,e.values,d):MF(l,d);return s&&(i.rem=s),s=u.map((a,m)=>It({index:m/(u.length-1||1),value:a,label:f(a)})),e.extra&&s.length&&s.push(It({index:-1,extra:{value:s[0].value},label:""})),i.source=s,i.add=s,this.value=s,i}});function iq(e){re.call(this,null,e)}function $de(){return It({})}function Ude(e){const t=oh().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}Te(iq,re,{transform(e,t){var n=t.dataflow,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),s=e.item||$de,l=e.key||Ce,c=this.value;return fe(i.encode)&&(i.encode=null),c&&(e.modified("key")||t.modified(l))&&ce("DataJoin does not support modified key function or fields."),c||(t=t.addAll(),this.value=c=Ude(l)),t.visit(t.ADD,d=>{const f=l(d);let u=c.get(f);u?u.exit?(c.empty--,i.add.push(u)):i.mod.push(u):(u=s(d),c.set(f,u),i.add.push(u)),u.datum=d,u.exit=!1}),t.visit(t.MOD,d=>{const f=l(d),u=c.get(f);u&&(u.datum=d,i.mod.push(u))}),t.visit(t.REM,d=>{const f=l(d),u=c.get(f);d===u.datum&&!u.exit&&(i.rem.push(u),u.exit=!0,++c.empty)}),t.changed(t.ADD_MOD)&&i.modifies("datum"),(t.clean()||e.clean&&c.empty>n.cleanThreshold)&&n.runAfter(c.clean),i}});function sq(e){re.call(this,null,e)}Te(sq,re,{transform(e,t){var n=t.fork(t.ADD_REM),i=e.mod||!1,s=e.encoders,l=t.encode;if(fe(l))if(n.changed()||l.every(m=>s[m]))l=l[0],n.encode=null;else return t.StopPropagation;var c=l==="enter",d=s.update||Ho,f=s.enter||Ho,u=s.exit||Ho,a=(l&&!c?s[l]:d)||Ho;if(t.changed(t.ADD)&&(t.visit(t.ADD,m=>{f(m,e),d(m,e)}),n.modifies(f.output),n.modifies(d.output),a!==Ho&&a!==d&&(t.visit(t.ADD,m=>{a(m,e)}),n.modifies(a.output))),t.changed(t.REM)&&u!==Ho&&(t.visit(t.REM,m=>{u(m,e)}),n.modifies(u.output)),c||a!==Ho){const m=t.MOD|(e.modified()?t.REFLOW:0);c?(t.visit(m,w=>{const y=f(w,e)||i;(a(w,e)||y)&&n.mod.push(w)}),n.mod.length&&n.modifies(f.output)):t.visit(m,w=>{(a(w,e)||i)&&n.mod.push(w)}),n.mod.length&&n.modifies(a.output)}return n.changed()?n:t.StopPropagation}});function rq(e){re.call(this,[],e)}Te(rq,re,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),s=this.value,l=e.type||_w,c=e.scale,d=+e.limit,f=IF(c,e.count==null?5:e.count,e.minstep),u=!!e.values||l===_w,a=e.format||Uz(n,c,f,l,e.formatSpecifier,e.formatType,u),m=e.values||$z(c,f),w,y,o,T,b;return s&&(i.rem=s),l===_w?(d&&m.length>d?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),s=m.slice(0,d-1),b=!0):s=m,lt(o=e.size)?(!e.values&&c(s[0])===0&&(s=s.slice(1)),T=s.reduce((S,x)=>Math.max(S,o(x,e)),0)):o=ci(T=o||8),s=s.map((S,x)=>It({index:x,label:a(S,x,s),value:S,offset:T,size:o(S,e)})),b&&(b=m[s.length],s.push(It({index:s.length,label:`${m.length-s.length} entries`,value:b,offset:T,size:o(b,e)})))):l===_oe?(w=c.domain(),y=Oz(c,w[0],wt(w)),m.length<3&&!e.values&&w[0]!==wt(w)&&(m=[w[0],wt(w)]),s=m.map((S,x)=>It({index:x,label:a(S,x,m),value:S,perc:y(S)}))):(o=m.length-1,y=xoe(c),s=m.map((S,x)=>It({index:x,label:a(S,x,m),value:S,perc:x?y(S):0,perc2:x===o?1:y(m[x+1])}))),i.source=s,i.add=s,this.value=s,i}});const zde=e=>e.source.x,jde=e=>e.source.y,qde=e=>e.target.x,Gde=e=>e.target.y;function gI(e){re.call(this,{},e)}gI.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};Te(gI,re,{transform(e,t){var n=e.sourceX||zde,i=e.sourceY||jde,s=e.targetX||qde,l=e.targetY||Gde,c=e.as||"path",d=e.orient||"vertical",f=e.shape||"line",u=BR.get(f+"-"+d)||BR.get(f);return u||ce("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,a=>{a[c]=u(n(a),i(a),s(a),l(a))}),t.reflow(e.modified()).modifies(c)}});const aq=(e,t,n,i)=>"M"+e+","+t+"L"+n+","+i,Hde=(e,t,n,i)=>aq(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),oq=(e,t,n,i)=>{var s=n-e,l=i-t,c=Math.hypot(s,l)/2,d=180*Math.atan2(l,s)/Math.PI;return"M"+e+","+t+"A"+c+","+c+" "+d+" 0 1 "+n+","+i},Wde=(e,t,n,i)=>oq(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),lq=(e,t,n,i)=>{const s=n-e,l=i-t,c=.2*(s+l),d=.2*(l-s);return"M"+e+","+t+"C"+(e+c)+","+(t+d)+" "+(n+d)+","+(i-c)+" "+n+","+i},Vde=(e,t,n,i)=>lq(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),Yde=(e,t,n,i)=>"M"+e+","+t+"V"+i+"H"+n,Xde=(e,t,n,i)=>"M"+e+","+t+"H"+n+"V"+i,Kde=(e,t,n,i)=>{const s=Math.cos(e),l=Math.sin(e),c=Math.cos(n),d=Math.sin(n),f=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*s+","+t*l+"A"+t+","+t+" 0 0,"+(f?1:0)+" "+t*c+","+t*d+"L"+i*c+","+i*d},Jde=(e,t,n,i)=>{const s=(e+n)/2;return"M"+e+","+t+"C"+s+","+t+" "+s+","+i+" "+n+","+i},Qde=(e,t,n,i)=>{const s=(t+i)/2;return"M"+e+","+t+"C"+e+","+s+" "+n+","+s+" "+n+","+i},Zde=(e,t,n,i)=>{const s=Math.cos(e),l=Math.sin(e),c=Math.cos(n),d=Math.sin(n),f=(t+i)/2;return"M"+t*s+","+t*l+"C"+f*s+","+f*l+" "+f*c+","+f*d+" "+i*c+","+i*d},BR=oh({line:aq,"line-radial":Hde,arc:oq,"arc-radial":Wde,curve:lq,"curve-radial":Vde,"orthogonal-horizontal":Yde,"orthogonal-vertical":Xde,"orthogonal-radial":Kde,"diagonal-horizontal":Jde,"diagonal-vertical":Qde,"diagonal-radial":Zde});function pI(e){re.call(this,null,e)}pI.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};Te(pI,re,{transform(e,t){var n=e.as||["startAngle","endAngle"],i=n[0],s=n[1],l=e.field||sh,c=e.startAngle||0,d=e.endAngle!=null?e.endAngle:2*Math.PI,f=t.source,u=f.map(l),a=u.length,m=c,w=(d-c)/Q6(u),y=_s(a),o,T,b;for(e.sort&&y.sort((S,x)=>u[S]-u[x]),o=0;o<a;++o)b=u[y[o]],T=f[y[o]],T[i]=m,T[s]=m+=b*w;return this.value=u,t.reflow(e.modified()).modifies(n)}});const efe=5;function tfe(e){const t=e.type;return!e.bins&&(t===Iu||t===hp||t===_p)}function cq(e){return kF(e)&&e!==ca}const nfe=Er(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function dq(e){re.call(this,null,e),this.modified(!0)}Te(dq,re,{transform(e,t){var n=t.dataflow,i=this.value,s=ife(e);(!i||s!==i.type)&&(this.value=i=kt(s)());for(s in e)if(!nfe[s]){if(s==="padding"&&cq(i.type))continue;lt(i[s])?i[s](e[s]):n.warn("Unsupported scale property: "+s)}return cfe(i,e,lfe(i,e,rfe(i,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function ife(e){var t=e.type,n="",i;return t===ca?ca+"-"+Iu:(sfe(e)&&(i=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=i===2?ca+"-":i===3?dh+"-":""),(n+t||Iu).toLowerCase())}function sfe(e){const t=e.type;return kF(t)&&t!==fd&&t!==ud&&(e.scheme||e.range&&e.range.length&&e.range.every(Se))}function rfe(e,t,n){const i=afe(e,t.domainRaw,n);if(i>-1)return i;var s=t.domain,l=e.type,c=t.zero||t.zero===void 0&&tfe(e),d,f;if(!s)return 0;if(cq(l)&&t.padding&&s[0]!==wt(s)&&(s=ofe(l,s,t.range,t.padding,t.exponent,t.constant)),(c||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(d=(s=s.slice()).length-1||1,c&&(s[0]>0&&(s[0]=0),s[d]<0&&(s[d]=0)),t.domainMin!=null&&(s[0]=t.domainMin),t.domainMax!=null&&(s[d]=t.domainMax),t.domainMid!=null)){f=t.domainMid;const u=f>s[d]?d+1:f<s[0]?0:d;u!==d&&n.warn("Scale domainMid exceeds domain min or max.",f),s.splice(u,0,f)}return e.domain(fq(l,s,n)),l===EF&&e.unknown(t.domainImplicit?IS:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&IF(e,t.nice)||null),s.length}function afe(e,t,n){return t?(e.domain(fq(e.type,t,n)),t.length):-1}function ofe(e,t,n,i,s,l){var c=Math.abs(wt(n)-n[0]),d=c/(c-2*i),f=e===vo?O2(t,null,d):e===_p?zb(t,null,d,.5):e===hp?zb(t,null,d,s||1):e===MT?N2(t,null,d,l||1):A2(t,null,d);return t=t.slice(),t[0]=f[0],t[t.length-1]=f[1],t}function fq(e,t,n){if(Bz(e)){var i=Math.abs(t.reduce((s,l)=>s+(l<0?-1:l>0?1:0),0));i!==t.length&&n.warn("Log scale domain includes zero: "+be(t))}return t}function lfe(e,t,n){let i=t.bins;if(i&&!fe(i)){const s=e.domain(),l=s[0],c=wt(s),d=i.step;let f=i.start==null?l:i.start,u=i.stop==null?c:i.stop;d||ce("Scale bins parameter missing step property."),f<l&&(f=d*Math.ceil(l/d)),u>c&&(u=d*Math.floor(c/d)),i=_s(f,u+d/2,d)}return i?e.bins=i:e.bins&&delete e.bins,e.type===vF&&(i?!t.domain&&!t.domainRaw&&(e.domain(i),n=i.length):e.bins=e.domain()),n}function cfe(e,t,n){var i=e.type,s=t.round||!1,l=t.range;if(t.rangeStep!=null)l=dfe(i,t,n);else if(t.scheme&&(l=ffe(i,t,n),lt(l))){if(e.interpolator)return e.interpolator(l);ce(`Scale type ${i} does not support interpolating color schemes.`)}if(l&&Fz(i))return e.interpolator(NT(lx(l,t.reverse),t.interpolate,t.interpolateGamma));l&&t.interpolate&&e.interpolate?e.interpolate(BF(t.interpolate,t.interpolateGamma)):lt(e.round)?e.round(s):lt(e.rangeRound)&&e.interpolate(s?tp:Wl),l&&e.range(lx(l,t.reverse))}function dfe(e,t,n){e!==Tz&&e!==VS&&ce("Only band and point scales support rangeStep.");var i=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,s=e===VS?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*TF(n,s,i)]}function ffe(e,t,n){var i=t.schemeExtent,s,l;return fe(t.scheme)?l=NT(t.scheme,t.interpolate,t.interpolateGamma):(s=t.scheme.toLowerCase(),l=FF(s),l||ce(`Unrecognized scheme name: ${t.scheme}`)),n=e===OT?n+1:e===vF?n-1:e===Mu||e===AT?+t.schemeCount||efe:n,Fz(e)?FR(l,i,t.reverse):lt(l)?Az(FR(l,i),n):e===EF?l:l.slice(0,n)}function FR(e,t,n){return lt(e)&&(t||n)?Mz(e,lx(t||[0,1],n)):e}function lx(e,t){return t?e.slice().reverse():e}function uq(e){re.call(this,null,e)}Te(uq,re,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(qd(e.sort)),this.modified(n),t}});const IR="zero",hq="center",_q="normalize",gq=["y0","y1"];function yI(e){re.call(this,null,e)}yI.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:IR,values:[IR,hq,_q]},{name:"as",type:"string",array:!0,length:2,default:gq}]};Te(yI,re,{transform(e,t){var n=e.as||gq,i=n[0],s=n[1],l=qd(e.sort),c=e.field||sh,d=e.offset===hq?ufe:e.offset===_q?hfe:_fe,f,u,a,m;for(f=gfe(t.source,e.groupby,l,c),u=0,a=f.length,m=f.max;u<a;++u)d(f[u],m,c,i,s);return t.reflow(e.modified()).modifies(n)}});function ufe(e,t,n,i,s){for(var l=(t-e.sum)/2,c=e.length,d=0,f;d<c;++d)f=e[d],f[i]=l,f[s]=l+=Math.abs(n(f))}function hfe(e,t,n,i,s){for(var l=1/e.sum,c=0,d=e.length,f=0,u=0,a;f<d;++f)a=e[f],a[i]=c,a[s]=c=l*(u+=Math.abs(n(a)))}function _fe(e,t,n,i,s){for(var l=0,c=0,d=e.length,f=0,u,a;f<d;++f)a=e[f],u=+n(a),u<0?(a[i]=c,a[s]=c+=u):(a[i]=l,a[s]=l+=u)}function gfe(e,t,n,i){var s=[],l=T=>T(a),c,d,f,u,a,m,w,y,o;if(t==null)s.push(e.slice());else for(c={},d=0,f=e.length;d<f;++d)a=e[d],m=t.map(l),w=c[m],w||(c[m]=w=[],s.push(w)),w.push(a);for(m=0,o=0,u=s.length;m<u;++m){for(w=s[m],d=0,y=0,f=w.length;d<f;++d)y+=Math.abs(i(w[d]));w.sum=y,y>o&&(o=y),n&&w.sort(n)}return s.max=o,s}const pfe=Object.freeze(Object.defineProperty({__proto__:null,axisticks:nq,datajoin:iq,encode:sq,legendentries:rq,linkpath:gI,pie:pI,scale:dq,sortitems:uq,stack:yI},Symbol.toStringTag,{value:"Module"}));var yfe=Math.abs,cx=Math.cos,n0=Math.sin,mfe=1e-6,pq=Math.PI,dx=pq/2,MR=wfe(2);function AR(e){return e>1?dx:e<-1?-dx:Math.asin(e)}function wfe(e){return e>0?Math.sqrt(e):0}function bfe(e,t){var n=e*n0(t),i=30,s;do t-=s=(t+n0(t)-n)/(1+cx(t));while(yfe(s)>mfe&&--i>0);return t/2}function Tfe(e,t,n){function i(s,l){return[e*s*cx(l=bfe(n,l)),t*n0(l)]}return i.invert=function(s,l){return l=AR(l/t),[s/(e*cx(l)),AR((2*l+n0(2*l))/n)]},i}var Efe=Tfe(MR/dx,MR,pq);function vfe(){return Ma(Efe).scale(169.529)}const Sfe=fU(),fx=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function xfe(e,t){return function n(){const i=t();return i.type=e,i.path=fU().projection(i),i.copy=i.copy||function(){const s=n();return fx.forEach(l=>{i[l]&&s[l](i[l]())}),s.path.pointRadius(i.path.pointRadius()),s},xz(i)}}function mI(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(i0[e]=xfe(e,t),this):i0[e]||null}function yq(e){return e&&e.path||Sfe}const i0={albers:hU,albersusa:_ee,azimuthalequalarea:gee,azimuthalequidistant:pee,conicconformal:wee,conicequalarea:Ib,conicequidistant:Eee,equalEarth:See,equirectangular:bee,gnomonic:xee,identity:kee,mercator:yee,mollweide:vfe,naturalEarth1:Bee,orthographic:Fee,stereographic:Iee,transversemercator:Mee};for(const e in i0)mI(e,i0[e]);function kfe(){}const Ga=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function mq(){var e=1,t=1,n=d;function i(f,u){return u.map(a=>s(f,a))}function s(f,u){var a=[],m=[];return l(f,u,w=>{n(w,f,u),Bfe(w)>0?a.push([w]):m.push(w)}),m.forEach(w=>{for(var y=0,o=a.length,T;y<o;++y)if(Ffe((T=a[y])[0],w)!==-1){T.push(w);return}}),{type:"MultiPolygon",value:u,coordinates:a}}function l(f,u,a){var m=new Array,w=new Array,y,o,T,b,S,x;for(y=o=-1,b=f[0]>=u,Ga[b<<1].forEach(k);++y<e-1;)T=b,b=f[y+1]>=u,Ga[T|b<<1].forEach(k);for(Ga[b<<0].forEach(k);++o<t-1;){for(y=-1,b=f[o*e+e]>=u,S=f[o*e]>=u,Ga[b<<1|S<<2].forEach(k);++y<e-1;)T=b,b=f[o*e+e+y+1]>=u,x=S,S=f[o*e+y+1]>=u,Ga[T|b<<1|S<<2|x<<3].forEach(k);Ga[b|S<<3].forEach(k)}for(y=-1,S=f[o*e]>=u,Ga[S<<2].forEach(k);++y<e-1;)x=S,S=f[o*e+y+1]>=u,Ga[S<<2|x<<3].forEach(k);Ga[S<<3].forEach(k);function k(I){var B=[I[0][0]+y,I[0][1]+o],O=[I[1][0]+y,I[1][1]+o],A=c(B),R=c(O),P,D;(P=w[A])?(D=m[R])?(delete w[P.end],delete m[D.start],P===D?(P.ring.push(O),a(P.ring)):m[P.start]=w[D.end]={start:P.start,end:D.end,ring:P.ring.concat(D.ring)}):(delete w[P.end],P.ring.push(O),w[P.end=R]=P):(P=m[R])?(D=w[A])?(delete m[P.start],delete w[D.end],P===D?(P.ring.push(O),a(P.ring)):m[D.start]=w[P.end]={start:D.start,end:P.end,ring:D.ring.concat(P.ring)}):(delete m[P.start],P.ring.unshift(B),m[P.start=A]=P):m[A]=w[R]={start:A,end:R,ring:[B,O]}}}function c(f){return f[0]*2+f[1]*(e+1)*4}function d(f,u,a){f.forEach(m=>{var w=m[0],y=m[1],o=w|0,T=y|0,b,S=u[T*e+o];w>0&&w<e&&o===w&&(b=u[T*e+o-1],m[0]=w+(a-b)/(S-b)-.5),y>0&&y<t&&T===y&&(b=u[(T-1)*e+o],m[1]=y+(a-b)/(S-b)-.5)})}return i.contour=s,i.size=function(f){if(!arguments.length)return[e,t];var u=Math.floor(f[0]),a=Math.floor(f[1]);return u>=0&&a>=0||ce("invalid size"),e=u,t=a,i},i.smooth=function(f){return arguments.length?(n=f?d:kfe,i):n===d},i}function Bfe(e){for(var t=0,n=e.length,i=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)i+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return i}function Ffe(e,t){for(var n=-1,i=t.length,s;++n<i;)if(s=Ife(e,t[n]))return s;return 0}function Ife(e,t){for(var n=t[0],i=t[1],s=-1,l=0,c=e.length,d=c-1;l<c;d=l++){var f=e[l],u=f[0],a=f[1],m=e[d],w=m[0],y=m[1];if(Mfe(f,m,t))return 0;a>i!=y>i&&n<(w-u)*(i-a)/(y-a)+u&&(s=-s)}return s}function Mfe(e,t,n){var i;return Afe(e,t,n)&&Ofe(e[i=+(e[0]===t[0])],n[i],t[i])}function Afe(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function Ofe(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function wq(e,t,n){return function(i){var s=Ea(i),l=n?Math.min(s[0],0):s[0],c=s[1],d=c-l,f=t?Sl(l,c,e):d/(e+1);return _s(l+f,c,f)}}function wI(e){re.call(this,null,e)}wI.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};Te(wI,re,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,s=e.field||li,l=mq().smooth(e.smooth!==!1),c=e.thresholds||Nfe(i,s,e),d=e.as===null?null:e.as||"contour",f=[];return i.forEach(u=>{const a=s(u),m=l.size([a.width,a.height])(a.values,fe(c)?c:c(a.values));Cfe(m,a,u,e),m.forEach(w=>{f.push(kT(u,It(d!=null?{[d]:w}:w)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=f,n}});function Nfe(e,t,n){const i=wq(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?i:i(e.map(s=>Gc(t(s).values)))}function Cfe(e,t,n,i){let s=i.scale||t.scale,l=i.translate||t.translate;if(lt(s)&&(s=s(n,i)),lt(l)&&(l=l(n,i)),(s===1||s==null)&&!l)return;const c=($t(s)?s:s[0])||1,d=($t(s)?s:s[1])||1,f=l&&l[0]||0,u=l&&l[1]||0;e.forEach(bq(t,c,d,f,u))}function bq(e,t,n,i,s){const l=e.x1||0,c=e.y1||0,d=t*n<0;function f(m){m.forEach(u)}function u(m){d&&m.reverse(),m.forEach(a)}function a(m){m[0]=(m[0]-l)*t+i,m[1]=(m[1]-c)*n+s}return function(m){return m.coordinates.forEach(f),m}}function OR(e,t,n){const i=e>=0?e:c2(t,n);return Math.round((Math.sqrt(4*i*i+1)-1)/2)}function VE(e){return lt(e)?e:ci(+e)}function Tq(){var e=f=>f[0],t=f=>f[1],n=sh,i=[-1,-1],s=960,l=500,c=2;function d(f,u){const a=OR(i[0],f,e)>>c,m=OR(i[1],f,t)>>c,w=a?a+2:0,y=m?m+2:0,o=2*w+(s>>c),T=2*y+(l>>c),b=new Float32Array(o*T),S=new Float32Array(o*T);let x=b;f.forEach(I=>{const B=w+(+e(I)>>c),O=y+(+t(I)>>c);B>=0&&B<o&&O>=0&&O<T&&(b[B+O*o]+=+n(I))}),a>0&&m>0?(uf(o,T,b,S,a),hf(o,T,S,b,m),uf(o,T,b,S,a),hf(o,T,S,b,m),uf(o,T,b,S,a),hf(o,T,S,b,m)):a>0?(uf(o,T,b,S,a),uf(o,T,S,b,a),uf(o,T,b,S,a),x=S):m>0&&(hf(o,T,b,S,m),hf(o,T,S,b,m),hf(o,T,b,S,m),x=S);const k=u?Math.pow(2,-2*c):1/Q6(x);for(let I=0,B=o*T;I<B;++I)x[I]*=k;return{values:x,scale:1<<c,width:o,height:T,x1:w,y1:y,x2:w+(s>>c),y2:y+(l>>c)}}return d.x=function(f){return arguments.length?(e=VE(f),d):e},d.y=function(f){return arguments.length?(t=VE(f),d):t},d.weight=function(f){return arguments.length?(n=VE(f),d):n},d.size=function(f){if(!arguments.length)return[s,l];var u=+f[0],a=+f[1];return u>=0&&a>=0||ce("invalid size"),s=u,l=a,d},d.cellSize=function(f){return arguments.length?((f=+f)>=1||ce("invalid cell size"),c=Math.floor(Math.log(f)/Math.LN2),d):1<<c},d.bandwidth=function(f){return arguments.length?(f=xe(f),f.length===1&&(f=[+f[0],+f[0]]),f.length!==2&&ce("invalid bandwidth"),i=f,d):i},d}function uf(e,t,n,i,s){const l=(s<<1)+1;for(let c=0;c<t;++c)for(let d=0,f=0;d<e+s;++d)d<e&&(f+=n[d+c*e]),d>=s&&(d>=l&&(f-=n[d-l+c*e]),i[d-s+c*e]=f/Math.min(d+1,e-1+l-d,l))}function hf(e,t,n,i,s){const l=(s<<1)+1;for(let c=0;c<e;++c)for(let d=0,f=0;d<t+s;++d)d<t&&(f+=n[c+d*e]),d>=s&&(d>=l&&(f-=n[c+(d-l)*e]),i[c+(d-s)*e]=f/Math.min(d+1,t-1+l-d,l))}function bI(e){re.call(this,null,e)}bI.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const Rfe=["x","y","weight","size","cellSize","bandwidth"];function Eq(e,t){return Rfe.forEach(n=>t[n]!=null?e[n](t[n]):0),e}Te(bI,re,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,s=Lfe(i,e.groupby),l=(e.groupby||[]).map(on),c=Eq(Tq(),e),d=e.as||"grid",f=[];function u(a,m){for(let w=0;w<l.length;++w)a[l[w]]=m[w];return a}return f=s.map(a=>It(u({[d]:c(a,e.counts)},a.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=f,n}});function Lfe(e,t){var n=[],i=a=>a(d),s,l,c,d,f,u;if(t==null)n.push(e);else for(s={},l=0,c=e.length;l<c;++l)d=e[l],f=t.map(i),u=s[f],u||(s[f]=u=[],u.dims=f,n.push(u)),u.push(d);return n}function TI(e){re.call(this,null,e)}TI.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};Te(TI,re,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=mq().smooth(e.smooth!==!1),s=e.values,l=e.thresholds||wq(e.count||10,e.nice,!!s),c=e.size,d,f;return s||(s=t.materialize(t.SOURCE).source,d=Eq(Tq(),e)(s,!0),f=bq(d,d.scale||1,d.scale||1,0,0),c=[d.width,d.height],s=d.values),l=fe(l)?l:l(s),s=i.size(c)(s,l),f&&s.forEach(f),this.value&&(n.rem=this.value),this.value=n.source=n.add=(s||[]).map(It),n}});const ux="Feature",EI="FeatureCollection",Pfe="MultiPoint";function vI(e){re.call(this,null,e)}vI.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};Te(vI,re,{transform(e,t){var n=this._features,i=this._points,s=e.fields,l=s&&s[0],c=s&&s[1],d=e.geojson||!s&&li,f=t.ADD,u;u=e.modified()||t.changed(t.REM)||t.modified(ii(d))||l&&t.modified(ii(l))||c&&t.modified(ii(c)),(!this.value||u)&&(f=t.SOURCE,this._features=n=[],this._points=i=[]),d&&t.visit(f,a=>n.push(d(a))),l&&c&&(t.visit(f,a=>{var m=l(a),w=c(a);m!=null&&w!=null&&(m=+m)===m&&(w=+w)===w&&i.push([m,w])}),n=n.concat({type:ux,geometry:{type:Pfe,coordinates:i}})),this.value={type:EI,features:n}}});function SI(e){re.call(this,null,e)}SI.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};Te(SI,re,{transform(e,t){var n=t.fork(t.ALL),i=this.value,s=e.field||li,l=e.as||"path",c=n.SOURCE;!i||e.modified()?(this.value=i=yq(e.projection),n.materialize().reflow()):c=s===li||t.modified(s.fields)?n.ADD_MOD:n.ADD;const d=Dfe(i,e.pointRadius);return n.visit(c,f=>f[l]=i(s(f))),i.pointRadius(d),n.modifies(l)}});function Dfe(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function xI(e){re.call(this,null,e)}xI.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};Te(xI,re,{transform(e,t){var n=e.projection,i=e.fields[0],s=e.fields[1],l=e.as||["x","y"],c=l[0],d=l[1],f;function u(a){const m=n([i(a),s(a)]);m?(a[c]=m[0],a[d]=m[1]):(a[c]=void 0,a[d]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,u):(f=t.modified(i.fields)||t.modified(s.fields),t.visit(f?t.ADD_MOD:t.ADD,u)),t.modifies(l)}});function kI(e){re.call(this,null,e)}kI.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};Te(kI,re,{transform(e,t){var n=t.fork(t.ALL),i=this.value,s=e.as||"shape",l=n.ADD;return(!i||e.modified())&&(this.value=i=$fe(yq(e.projection),e.field||Yi("datum"),e.pointRadius),n.materialize().reflow(),l=n.SOURCE),n.visit(l,c=>c[s]=i),n.modifies(s)}});function $fe(e,t,n){const i=n==null?s=>e(t(s)):s=>{var l=e.pointRadius(),c=e.pointRadius(n)(t(s));return e.pointRadius(l),c};return i.context=s=>(e.context(s),i),i}function BI(e){re.call(this,[],e),this.generator=WZ()}BI.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};Te(BI,re,{transform(e,t){var n=this.value,i=this.generator,s;if(!n.length||e.modified())for(const l in e)lt(i[l])&&i[l](e[l]);return s=i(),n.length?t.mod.push(j5(n[0],s)):t.add.push(It(s)),n[0]=s,t}});function FI(e){re.call(this,null,e)}FI.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};Te(FI,re,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,i=e.resolve==="shared",s=e.field||li,l=zfe(e.opacity,e),c=Ufe(e.color,e),d=e.as||"image",f={$x:0,$y:0,$value:0,$max:i?Gc(n.map(u=>Gc(s(u).values))):0};return n.forEach(u=>{const a=s(u),m=ot({},u,f);i||(m.$max=Gc(a.values||[])),u[d]=jfe(a,m,c.dep?c:ci(c(m)),l.dep?l:ci(l(m)))}),t.reflow(!0).modifies(d)}});function Ufe(e,t){let n;return lt(e)?(n=i=>xl(e(i,t)),n.dep=vq(e)):n=ci(xl(e||"#888")),n}function zfe(e,t){let n;return lt(e)?(n=i=>e(i,t),n.dep=vq(e)):e?n=ci(e):(n=i=>i.$value/i.$max||0,n.dep=!0),n}function vq(e){if(!lt(e))return!1;const t=Er(ii(e));return t.$x||t.$y||t.$value||t.$max}function jfe(e,t,n,i){const s=e.width,l=e.height,c=e.x1||0,d=e.y1||0,f=e.x2||s,u=e.y2||l,a=e.values,m=a?b=>a[b]:nl,w=up(f-c,u-d),y=w.getContext("2d"),o=y.getImageData(0,0,f-c,u-d),T=o.data;for(let b=d,S=0;b<u;++b){t.$y=b-d;for(let x=c,k=b*s;x<f;++x,S+=4){t.$x=x-c,t.$value=m(x+k);const I=n(t);T[S+0]=I.r,T[S+1]=I.g,T[S+2]=I.b,T[S+3]=~~(255*i(t))}}return y.putImageData(o,0,0),w}function Sq(e){re.call(this,null,e),this.modified(!0)}Te(Sq,re,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=Gfe(e.type),fx.forEach(i=>{e[i]!=null&&NR(n,i,e[i])})):fx.forEach(i=>{e.modified(i)&&NR(n,i,e[i])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&qfe(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function qfe(e,t){const n=Hfe(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function Gfe(e){const t=mI((e||"mercator").toLowerCase());return t||ce("Unrecognized projection type: "+e),t()}function NR(e,t,n){lt(e[t])&&e[t](n)}function Hfe(e){return e=xe(e),e.length===1?e[0]:{type:EI,features:e.reduce((t,n)=>t.concat(Wfe(n)),[])}}function Wfe(e){return e.type===EI?e.features:xe(e).filter(t=>t!=null).map(t=>t.type===ux?t:{type:ux,geometry:t})}const Vfe=Object.freeze(Object.defineProperty({__proto__:null,contour:TI,geojson:vI,geopath:SI,geopoint:xI,geoshape:kI,graticule:BI,heatmap:FI,isocontour:wI,kde2d:bI,projection:Sq},Symbol.toStringTag,{value:"Module"})),CR={center:LQ,collide:tZ,nbody:uZ,link:iZ,x:hZ,y:_Z},b_="forces",hx=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],Yfe=["static","iterations"],xq=["x","y","vx","vy"];function II(e){re.call(this,null,e)}II.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:xq}]};Te(II,re,{transform(e,t){var n=this.value,i=t.changed(t.ADD_REM),s=e.modified(hx),l=e.iterations||300;if(n?(i&&(t.modifies("index"),n.nodes(t.source)),(s||t.changed(t.MOD))&&kq(n,e,0,t)):(this.value=n=Kfe(t.source,e),n.on("tick",Xfe(t.dataflow,this)),e.static||(i=!0,n.tick()),t.modifies("index")),s||i||e.modified(Yfe)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/l)),e.static)for(n.stop();--l>=0;)n.tick();else if(n.stopped()&&n.restart(),!i)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let d=this._argops,f=0,u=d.length,a;f<u;++f)if(a=d[f],!(a.name!==b_||a.op._argval.force!=="link")){for(var i=a.op._argops,s=0,l=i.length,c;s<l;++s)if(i[s].name==="links"&&(c=i[s].op.source)){n.pulse(c,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(xq)}});function Xfe(e,t){return()=>e.touch(t).run()}function Kfe(e,t){const n=fZ(e),i=n.stop,s=n.restart;let l=!1;return n.stopped=()=>l,n.restart=()=>(l=!1,s()),n.stop=()=>(l=!0,i()),kq(n,t,!0).on("end",()=>l=!0)}function kq(e,t,n,i){var s=xe(t.forces),l,c,d,f;for(l=0,c=hx.length;l<c;++l)d=hx[l],d!==b_&&t.modified(d)&&e[d](t[d]);for(l=0,c=s.length;l<c;++l)f=b_+l,d=n||t.modified(b_,l)?Qfe(s[l]):i&&Jfe(s[l],i)?e.force(f):null,d&&e.force(f,d);for(c=e.numForces||0;l<c;++l)e.force(b_+l,null);return e.numForces=s.length,e}function Jfe(e,t){var n,i;for(n in e)if(lt(i=e[n])&&t.modified(ii(i)))return 1;return 0}function Qfe(e){var t,n;Le(CR,e.force)||ce("Unrecognized force: "+e.force),t=CR[e.force]();for(n in e)lt(t[n])&&Zfe(t[n],e[n],e);return t}function Zfe(e,t,n){e(lt(t)?i=>t(i,n):t)}const eue=Object.freeze(Object.defineProperty({__proto__:null,force:II},Symbol.toStringTag,{value:"Module"}));function _x(e,t,n){const i={};return e.each(s=>{const l=s.data;n(l)&&(i[t(l)]=s)}),e.lookup=i,e}function MI(e){re.call(this,null,e)}MI.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const tue=e=>e.values;Te(MI,re,{transform(e,t){t.source||ce("Nest transform requires an upstream data source.");var n=e.generate,i=e.modified(),s=t.clone(),l=this.value;return(!l||i||t.changed())&&(l&&l.each(c=>{c.children&&xT(c.data)&&s.rem.push(c.data)}),this.value=l=jB({values:xe(e.keys).reduce((c,d)=>(c.key(d),c),nue()).entries(s.source)},tue),n&&l.each(c=>{c.children&&(c=It(c.data),s.add.push(c),s.source.push(c))}),_x(l,Ce,Ce)),s.source.root=l,s}});function nue(){const e=[],t={entries:s=>i(n(s,0),0),key:s=>(e.push(s),t)};function n(s,l){if(l>=e.length)return s;const c=s.length,d=e[l++],f={},u={};let a=-1,m,w,y;for(;++a<c;)m=d(w=s[a])+"",(y=f[m])?y.push(w):f[m]=[w];for(m in f)u[m]=n(f[m],l);return u}function i(s,l){if(++l>e.length)return s;const c=[];for(const d in s)c.push({key:d,values:i(s[d],l)});return c}return t}function Mo(e){re.call(this,null,e)}const iue=(e,t)=>e.parent===t.parent?1:2;Te(Mo,re,{transform(e,t){(!t.source||!t.source.root)&&ce(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),i=this.fields,s=t.source.root,l=e.as||i;e.field?s.sum(e.field):s.count(),e.sort&&s.sort(qd(e.sort,c=>c.data)),sue(n,this.params,e),n.separation&&n.separation(e.separation!==!1?iue:sh);try{this.value=n(s)}catch(c){ce(c)}return s.each(c=>rue(c,i,l)),t.reflow(e.modified()).modifies(l).modifies("leaf")}});function sue(e,t,n){for(let i,s=0,l=t.length;s<l;++s)i=t[s],i in n&&e[i](n[i])}function rue(e,t,n){const i=e.data,s=t.length-1;for(let l=0;l<s;++l)i[n[l]]=e[t[l]];i[n[s]]=e.children?e.children.length:0}const gx=["x","y","r","depth","children"];function AI(e){Mo.call(this,e)}AI.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:gx.length,default:gx}]};Te(AI,Mo,{layout:gte,params:["radius","size","padding"],fields:gx});const px=["x0","y0","x1","y1","depth","children"];function OI(e){Mo.call(this,e)}OI.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:px.length,default:px}]};Te(OI,Mo,{layout:pte,params:["size","round","padding"],fields:px});function NI(e){re.call(this,null,e)}NI.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};Te(NI,re,{transform(e,t){t.source||ce("Stratify transform requires an upstream data source.");let n=this.value;const i=e.modified(),s=t.fork(t.ALL).materialize(t.SOURCE),l=!n||i||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return s.source=s.source.slice(),l&&(n=s.source.length?_x(ZC().id(e.key).parentId(e.parentKey)(s.source),e.key,zs):_x(ZC()([{}]),e.key,e.key)),s.source.root=this.value=n,s}});const RR={tidy:kte,cluster:Dee},yx=["x","y","depth","children"];function CI(e){Mo.call(this,e)}CI.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:yx.length,default:yx}]};Te(CI,Mo,{layout(e){const t=e||"tidy";if(Le(RR,t))return RR[t]();ce("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:yx});function RI(e){re.call(this,[],e)}RI.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};Te(RI,re,{transform(e,t){const n=this.value,i=t.source&&t.source.root,s=t.fork(t.NO_SOURCE),l={};return i||ce("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(s.rem=n,t.visit(t.SOURCE,c=>l[Ce(c)]=1),i.each(c=>{const d=c.data,f=c.parent&&c.parent.data;f&&l[Ce(d)]&&l[Ce(f)]&&s.add.push(It({source:f,target:d}))}),this.value=s.add):t.changed(t.MOD)&&(t.visit(t.MOD,c=>l[Ce(c)]=1),n.forEach(c=>{(l[Ce(c.source)]||l[Ce(c.target)])&&s.mod.push(c)})),s}});const LR={binary:Fte,dice:rp,slice:nT,slicedice:Ite,squarify:AU,resquarify:Mte},mx=["x0","y0","x1","y1","depth","children"];function LI(e){Mo.call(this,e)}LI.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:mx.length,default:mx}]};Te(LI,Mo,{layout(){const e=Bte();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Le(LR,t)?e.tile(LR[t]):ce("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:mx});const aue=Object.freeze(Object.defineProperty({__proto__:null,nest:MI,pack:AI,partition:OI,stratify:NI,tree:CI,treelinks:RI,treemap:LI},Symbol.toStringTag,{value:"Module"}));function YE(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const XE=4278190080;function oue(e,t){const n=e.bitmap();return(t||[]).forEach(i=>n.set(e(i.boundary[0]),e(i.boundary[3]))),[n,void 0]}function lue(e,t,n,i,s){const l=e.width,c=e.height,d=i||s,f=YE(l,c).getContext("2d"),u=YE(l,c).getContext("2d"),a=d&&YE(l,c).getContext("2d");n.forEach(R=>Ew(f,R,!1)),Ew(u,t,!1),d&&Ew(a,t,!0);const m=KE(f,l,c),w=KE(u,l,c),y=d&&KE(a,l,c),o=e.bitmap(),T=d&&e.bitmap();let b,S,x,k,I,B,O,A;for(S=0;S<c;++S)for(b=0;b<l;++b)I=S*l+b,B=m[I]&XE,A=w[I]&XE,O=d&&y[I]&XE,(B||O||A)&&(x=e(b),k=e(S),!s&&(B||A)&&o.set(x,k),d&&(B||O)&&T.set(x,k));return[o,T]}function KE(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function Ew(e,t,n){if(!t.length)return;const i=t[0].mark.marktype;i==="group"?t.forEach(s=>{s.items.forEach(l=>Ew(e,l.items,n))}):bs[i].draw(e,{items:n?t.map(cue):t})}function cue(e){const t=kT(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Ha=5,hi=31,bg=32,Zo=new Uint32Array(bg+1),sr=new Uint32Array(bg+1);sr[0]=0;Zo[0]=~sr[0];for(let e=1;e<=bg;++e)sr[e]=sr[e-1]<<1|1,Zo[e]=~sr[e];function due(e,t){const n=new Uint32Array(~~((e*t+bg)/bg));function i(l,c){n[l]|=c}function s(l,c){n[l]&=c}return{array:n,get:(l,c)=>{const d=c*e+l;return n[d>>>Ha]&1<<(d&hi)},set:(l,c)=>{const d=c*e+l;i(d>>>Ha,1<<(d&hi))},clear:(l,c)=>{const d=c*e+l;s(d>>>Ha,~(1<<(d&hi)))},getRange:(l,c,d,f)=>{let u=f,a,m,w,y;for(;u>=c;--u)if(a=u*e+l,m=u*e+d,w=a>>>Ha,y=m>>>Ha,w===y){if(n[w]&Zo[a&hi]&sr[(m&hi)+1])return!0}else{if(n[w]&Zo[a&hi]||n[y]&sr[(m&hi)+1])return!0;for(let o=w+1;o<y;++o)if(n[o])return!0}return!1},setRange:(l,c,d,f)=>{let u,a,m,w,y;for(;c<=f;++c)if(u=c*e+l,a=c*e+d,m=u>>>Ha,w=a>>>Ha,m===w)i(m,Zo[u&hi]&sr[(a&hi)+1]);else for(i(m,Zo[u&hi]),i(w,sr[(a&hi)+1]),y=m+1;y<w;++y)i(y,4294967295)},clearRange:(l,c,d,f)=>{let u,a,m,w,y;for(;c<=f;++c)if(u=c*e+l,a=c*e+d,m=u>>>Ha,w=a>>>Ha,m===w)s(m,sr[u&hi]|Zo[(a&hi)+1]);else for(s(m,sr[u&hi]),s(w,Zo[(a&hi)+1]),y=m+1;y<w;++y)s(y,0)},outOfBounds:(l,c,d,f)=>l<0||c<0||f>=t||d>=e}}function fue(e,t,n){const i=Math.max(1,Math.sqrt(e*t/1e6)),s=~~((e+2*n+i)/i),l=~~((t+2*n+i)/i),c=d=>~~((d+n)/i);return c.invert=d=>d*i-n,c.bitmap=()=>due(s,l),c.ratio=i,c.padding=n,c.width=e,c.height=t,c}function uue(e,t,n,i){const s=e.width,l=e.height;return function(c){const d=c.datum.datum.items[i].items,f=d.length,u=c.datum.fontSize,a=pr.width(c.datum,c.datum.text);let m=0,w,y,o,T,b,S,x;for(let k=0;k<f;++k)w=d[k].x,o=d[k].y,y=d[k].x2===void 0?w:d[k].x2,T=d[k].y2===void 0?o:d[k].y2,b=(w+y)/2,S=(o+T)/2,x=Math.abs(y-w+T-o),x>=m&&(m=x,c.x=b,c.y=S);return b=a/2,S=u/2,w=c.x-b,y=c.x+b,o=c.y-S,T=c.y+S,c.align="center",w<0&&y<=s?c.align="left":0<=w&&s<y&&(c.align="right"),c.baseline="middle",o<0&&T<=l?c.baseline="top":0<=o&&l<T&&(c.baseline="bottom"),!0}}function s0(e,t,n,i,s,l){let c=n/2;return e-c<0||e+c>s||t-(c=i/2)<0||t+c>l}function dl(e,t,n,i,s,l,c,d){const f=s*l/(i*2),u=e(t-f),a=e(t+f),m=e(n-(l=l/2)),w=e(n+l);return c.outOfBounds(u,m,a,w)||c.getRange(u,m,a,w)||d&&d.getRange(u,m,a,w)}function hue(e,t,n,i){const s=e.width,l=e.height,c=t[0],d=t[1];function f(u,a,m,w,y){const o=e.invert(u),T=e.invert(a);let b=m,S=l,x;if(!s0(o,T,w,y,s,l)&&!dl(e,o,T,y,w,b,c,d)&&!dl(e,o,T,y,w,y,c,null)){for(;S-b>=1;)x=(b+S)/2,dl(e,o,T,y,w,x,c,d)?S=x:b=x;if(b>m)return[o,T,b,!0]}}return function(u){const a=u.datum.datum.items[i].items,m=a.length,w=u.datum.fontSize,y=pr.width(u.datum,u.datum.text);let o=n?w:0,T=!1,b=!1,S=0,x,k,I,B,O,A,R,P,D,U,Y,z,W,H,V,J,G;for(let oe=0;oe<m;++oe){for(x=a[oe].x,I=a[oe].y,k=a[oe].x2===void 0?x:a[oe].x2,B=a[oe].y2===void 0?I:a[oe].y2,x>k&&(G=x,x=k,k=G),I>B&&(G=I,I=B,B=G),D=e(x),Y=e(k),U=~~((D+Y)/2),z=e(I),H=e(B),W=~~((z+H)/2),R=U;R>=D;--R)for(P=W;P>=z;--P)J=f(R,P,o,y,w),J&&([u.x,u.y,o,T]=J);for(R=U;R<=Y;++R)for(P=W;P<=H;++P)J=f(R,P,o,y,w),J&&([u.x,u.y,o,T]=J);!T&&!n&&(V=Math.abs(k-x+B-I),O=(x+k)/2,A=(I+B)/2,V>=S&&!s0(O,A,y,w,s,l)&&!dl(e,O,A,w,y,w,c,null)&&(S=V,u.x=O,u.y=A,b=!0))}return T||b?(O=y/2,A=w/2,c.setRange(e(u.x-O),e(u.y-A),e(u.x+O),e(u.y+A)),u.align="center",u.baseline="middle",!0):!1}}const _ue=[-1,-1,1,1],gue=[-1,1,-1,1];function pue(e,t,n,i){const s=e.width,l=e.height,c=t[0],d=t[1],f=e.bitmap();return function(u){const a=u.datum.datum.items[i].items,m=a.length,w=u.datum.fontSize,y=pr.width(u.datum,u.datum.text),o=[];let T=n?w:0,b=!1,S=!1,x=0,k,I,B,O,A,R,P,D,U,Y,z,W;for(let H=0;H<m;++H){for(k=a[H].x,B=a[H].y,I=a[H].x2===void 0?k:a[H].x2,O=a[H].y2===void 0?B:a[H].y2,o.push([e((k+I)/2),e((B+O)/2)]);o.length;)if([P,D]=o.pop(),!(c.get(P,D)||d.get(P,D)||f.get(P,D))){f.set(P,D);for(let V=0;V<4;++V)A=P+_ue[V],R=D+gue[V],f.outOfBounds(A,R,A,R)||o.push([A,R]);if(A=e.invert(P),R=e.invert(D),U=T,Y=l,!s0(A,R,y,w,s,l)&&!dl(e,A,R,w,y,U,c,d)&&!dl(e,A,R,w,y,w,c,null)){for(;Y-U>=1;)z=(U+Y)/2,dl(e,A,R,w,y,z,c,d)?Y=z:U=z;U>T&&(u.x=A,u.y=R,T=U,b=!0)}}!b&&!n&&(W=Math.abs(I-k+O-B),A=(k+I)/2,R=(B+O)/2,W>=x&&!s0(A,R,y,w,s,l)&&!dl(e,A,R,w,y,w,c,null)&&(x=W,u.x=A,u.y=R,S=!0))}return b||S?(A=y/2,R=w/2,c.setRange(e(u.x-A),e(u.y-R),e(u.x+A),e(u.y+R)),u.align="center",u.baseline="middle",!0):!1}}const yue=["right","center","left"],mue=["bottom","middle","top"];function wue(e,t,n,i){const s=e.width,l=e.height,c=t[0],d=t[1],f=i.length;return function(u){const a=u.boundary,m=u.datum.fontSize;if(a[2]<0||a[5]<0||a[0]>s||a[3]>l)return!1;let w=u.textWidth??0,y,o,T,b,S,x,k,I,B,O,A,R,P,D,U;for(let Y=0;Y<f;++Y){if(y=(n[Y]&3)-1,o=(n[Y]>>>2&3)-1,T=y===0&&o===0||i[Y]<0,b=y&&o?Math.SQRT1_2:1,S=i[Y]<0?-1:1,x=a[1+y]+i[Y]*y*b,A=a[4+o]+S*m*o/2+i[Y]*o*b,I=A-m/2,B=A+m/2,R=e(x),D=e(I),U=e(B),!w)if(PR(R,R,D,U,c,d,x,x,I,B,a,T))w=pr.width(u.datum,u.datum.text);else continue;if(O=x+S*w*y/2,x=O-w/2,k=O+w/2,R=e(x),P=e(k),PR(R,P,D,U,c,d,x,k,I,B,a,T))return u.x=y?y*S<0?k:x:O,u.y=o?o*S<0?B:I:A,u.align=yue[y*S+1],u.baseline=mue[o*S+1],c.setRange(R,D,P,U),!0}return!1}}function PR(e,t,n,i,s,l,c,d,f,u,a,m){return!(s.outOfBounds(e,n,t,i)||(m&&l||s).getRange(e,n,t,i))}const JE=0,QE=4,ZE=8,ev=0,tv=1,nv=2,bue={"top-left":JE+ev,top:JE+tv,"top-right":JE+nv,left:QE+ev,middle:QE+tv,right:QE+nv,"bottom-left":ZE+ev,bottom:ZE+tv,"bottom-right":ZE+nv},Tue={naive:uue,"reduced-search":hue,floodfill:pue};function Eue(e,t,n,i,s,l,c,d,f,u,a){if(!e.length)return e;const m=Math.max(i.length,s.length),w=vue(i,m),y=Sue(s,m),o=xue(e[0].datum),T=o==="group"&&e[0].datum.items[f].marktype,b=T==="area",S=kue(o,T,d,f),x=u===null||u===1/0,k=b&&a==="naive";let I=-1,B=-1;const O=e.map(D=>{const U=x?pr.width(D,D.text):void 0;return I=Math.max(I,U),B=Math.max(B,D.fontSize),{datum:D,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:S(D),textWidth:U}});u=u===null||u===1/0?Math.max(I,B)+Math.max(...i):u;const A=fue(t[0],t[1],u);let R;if(!k){n&&O.sort((Y,z)=>n(Y.datum,z.datum));let D=!1;for(let Y=0;Y<y.length&&!D;++Y)D=y[Y]===5||w[Y]<0;const U=(o&&c||b)&&e.map(Y=>Y.datum);R=l.length||U?lue(A,U||[],l,D,b):oue(A,c&&O)}const P=b?Tue[a](A,R,c,f):wue(A,R,y,w);return O.forEach(D=>D.opacity=+P(D)),O}function vue(e,t){const n=new Float64Array(t),i=e.length;for(let s=0;s<i;++s)n[s]=e[s]||0;for(let s=i;s<t;++s)n[s]=n[i-1];return n}function Sue(e,t){const n=new Int8Array(t),i=e.length;for(let s=0;s<i;++s)n[s]|=bue[e[s]];for(let s=i;s<t;++s)n[s]=n[i-1];return n}function xue(e){return e&&e.mark&&e.mark.marktype}function kue(e,t,n,i){const s=l=>[l.x,l.x,l.x,l.y,l.y,l.y];return e?e==="line"||e==="area"?l=>s(l.datum):t==="line"?l=>{const c=l.datum.items[i].items;return s(c.length?c[n==="start"?0:c.length-1]:{x:NaN,y:NaN})}:l=>{const c=l.datum.bounds;return[c.x1,(c.x1+c.x2)/2,c.x2,c.y1,(c.y1+c.y2)/2,c.y2]}:s}const wx=["x","y","opacity","align","baseline"],Bq=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function PI(e){re.call(this,null,e)}PI.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:Bq},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:wx.length,default:wx}]};Te(PI,re,{transform(e,t){function n(l){const c=e[l];return lt(c)&&t.modified(c.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&ce("Size parameter should be specified as a [width, height] array.");const s=e.as||wx;return Eue(t.materialize(t.SOURCE).source||[],e.size,e.sort,xe(e.offset==null?1:e.offset),xe(e.anchor||Bq),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(l=>{const c=l.datum;c[s[0]]=l.x,c[s[1]]=l.y,c[s[2]]=l.opacity,c[s[3]]=l.align,c[s[4]]=l.baseline}),t.reflow(i).modifies(s)}});const Bue=Object.freeze(Object.defineProperty({__proto__:null,label:PI},Symbol.toStringTag,{value:"Module"}));function Fq(e,t){var n=[],i=function(a){return a(d)},s,l,c,d,f,u;if(t==null)n.push(e);else for(s={},l=0,c=e.length;l<c;++l)d=e[l],f=t.map(i),u=s[f],u||(s[f]=u=[],u.dims=f,n.push(u)),u.push(d);return n}function DI(e){re.call(this,null,e)}DI.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};Te(DI,re,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,s=Fq(i,e.groupby),l=(e.groupby||[]).map(on),c=l.length,d=e.as||[on(e.x),on(e.y)],f=[];s.forEach(u=>{M8(u,e.x,e.y,e.bandwidth||.3).forEach(a=>{const m={};for(let w=0;w<c;++w)m[l[w]]=u.dims[w];m[d[0]]=a[0],m[d[1]]=a[1],f.push(It(m))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const bx={constant:E2,linear:v2,log:k8,exp:B8,pow:F8,quad:S2,poly:I8},Fue=(e,t)=>e==="poly"?t:e==="quad"?2:1;function $I(e){re.call(this,null,e)}$I.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(bx)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};Te($I,re,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,s=Fq(i,e.groupby),l=(e.groupby||[]).map(on),c=e.method||"linear",d=e.order==null?3:e.order,f=Fue(c,d),u=e.as||[on(e.x),on(e.y)],a=bx[c],m=[];let w=e.extent;Le(bx,c)||ce("Invalid regression method: "+c),w!=null&&c==="log"&&w[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),w=null),s.forEach(y=>{if(y.length<=f){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const T=a(y,e.x,e.y,d);if(e.params){m.push(It({keys:y.dims,coef:T.coef,rSquared:T.rSquared}));return}const b=w||Ea(y,e.x),S=x=>{const k={};for(let I=0;I<l.length;++I)k[l[I]]=y.dims[I];k[u[0]]=x[0],k[u[1]]=x[1],m.push(It(k))};c==="linear"||c==="constant"?b.forEach(x=>S([x,T.predict(x)])):yT(T.predict,b,25,200).forEach(S)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=m}return n}});const Iue=Object.freeze(Object.defineProperty({__proto__:null,loess:DI,regression:$I},Symbol.toStringTag,{value:"Module"}));function UI(e){re.call(this,null,e)}UI.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const Mue=[-1e5,-1e5,1e5,1e5];Te(UI,re,{transform(e,t){const n=e.as||"path",i=t.source;if(!i||!i.length)return t;let s=e.size;s=s?[0,0,s[0],s[1]]:(s=e.extent)?[s[0][0],s[0][1],s[1][0],s[1][1]]:Mue;const l=this.value=MB.from(i,e.x,e.y).voronoi(s);for(let c=0,d=i.length;c<d;++c){const f=l.cellPolygon(c);i[c][n]=f?Aue(f):null}return t.reflow(e.modified()).modifies(n)}});function Aue(e){const t=e[0][0],n=e[0][1];let i=e.length-1;for(;e[i][0]===t&&e[i][1]===n;--i);return"M"+e.slice(0,i+1).join("L")+"Z"}const Oue=Object.freeze(Object.defineProperty({__proto__:null,voronoi:UI},Symbol.toStringTag,{value:"Module"}));var iv=Math.PI/180,T_=1<<11>>5,vw=1<<11;function Nue(){var e=[256,256],t,n,i,s,l,c,d,f=Iq,u=[],a=Math.random,m={};m.layout=function(){for(var o=w(up()),T=$ue((e[0]>>5)*e[1]),b=null,S=u.length,x=-1,k=[],I=u.map(O=>({text:t(O),font:n(O),style:s(O),weight:l(O),rotate:c(O),size:~~(i(O)+1e-14),padding:d(O),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:O})).sort((O,A)=>A.size-O.size);++x<S;){var B=I[x];B.x=e[0]*(a()+.5)>>1,B.y=e[1]*(a()+.5)>>1,Cue(o,B,I,x),B.hasText&&y(T,B,b)&&(k.push(B),b?Lue(b,B):b=[{x:B.x+B.x0,y:B.y+B.y0},{x:B.x+B.x1,y:B.y+B.y1}],B.x-=e[0]>>1,B.y-=e[1]>>1)}return k};function w(o){o.width=o.height=1;var T=Math.sqrt(o.getContext("2d").getImageData(0,0,1,1).data.length>>2);o.width=(T_<<5)/T,o.height=vw/T;var b=o.getContext("2d");return b.fillStyle=b.strokeStyle="red",b.textAlign="center",{context:b,ratio:T}}function y(o,T,b){for(var S=T.x,x=T.y,k=Math.sqrt(e[0]*e[0]+e[1]*e[1]),I=f(e),B=a()<.5?1:-1,O=-B,A,R,P;(A=I(O+=B))&&(R=~~A[0],P=~~A[1],!(Math.min(Math.abs(R),Math.abs(P))>=k));)if(T.x=S+R,T.y=x+P,!(T.x+T.x0<0||T.y+T.y0<0||T.x+T.x1>e[0]||T.y+T.y1>e[1])&&(!b||!Rue(T,o,e[0]))&&(!b||Pue(T,b))){for(var D=T.sprite,U=T.width>>5,Y=e[0]>>5,z=T.x-(U<<4),W=z&127,H=32-W,V=T.y1-T.y0,J=(T.y+T.y0)*Y+(z>>5),G,oe=0;oe<V;oe++){G=0;for(var he=0;he<=U;he++)o[J+he]|=G<<H|(he<U?(G=D[oe*U+he])>>>W:0);J+=Y}return T.sprite=null,!0}return!1}return m.words=function(o){return arguments.length?(u=o,m):u},m.size=function(o){return arguments.length?(e=[+o[0],+o[1]],m):e},m.font=function(o){return arguments.length?(n=lc(o),m):n},m.fontStyle=function(o){return arguments.length?(s=lc(o),m):s},m.fontWeight=function(o){return arguments.length?(l=lc(o),m):l},m.rotate=function(o){return arguments.length?(c=lc(o),m):c},m.text=function(o){return arguments.length?(t=lc(o),m):t},m.spiral=function(o){return arguments.length?(f=Uue[o]||o,m):f},m.fontSize=function(o){return arguments.length?(i=lc(o),m):i},m.padding=function(o){return arguments.length?(d=lc(o),m):d},m.random=function(o){return arguments.length?(a=o,m):a},m}function Cue(e,t,n,i){if(!t.sprite){var s=e.context,l=e.ratio;s.clearRect(0,0,(T_<<5)/l,vw/l);var c=0,d=0,f=0,u=n.length,a,m,w,y,o;for(--i;++i<u;){if(t=n[i],s.save(),s.font=t.style+" "+t.weight+" "+~~((t.size+1)/l)+"px "+t.font,a=s.measureText(t.text+"m").width*l,w=t.size<<1,t.rotate){var T=Math.sin(t.rotate*iv),b=Math.cos(t.rotate*iv),S=a*b,x=a*T,k=w*b,I=w*T;a=Math.max(Math.abs(S+I),Math.abs(S-I))+31>>5<<5,w=~~Math.max(Math.abs(x+k),Math.abs(x-k))}else a=a+31>>5<<5;if(w>f&&(f=w),c+a>=T_<<5&&(c=0,d+=f,f=0),d+w>=vw)break;s.translate((c+(a>>1))/l,(d+(w>>1))/l),t.rotate&&s.rotate(t.rotate*iv),s.fillText(t.text,0,0),t.padding&&(s.lineWidth=2*t.padding,s.strokeText(t.text,0,0)),s.restore(),t.width=a,t.height=w,t.xoff=c,t.yoff=d,t.x1=a>>1,t.y1=w>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,c+=a}for(var B=s.getImageData(0,0,(T_<<5)/l,vw/l).data,O=[];--i>=0;)if(t=n[i],!!t.hasText){for(a=t.width,m=a>>5,w=t.y1-t.y0,y=0;y<w*m;y++)O[y]=0;if(c=t.xoff,c==null)return;d=t.yoff;var A=0,R=-1;for(o=0;o<w;o++){for(y=0;y<a;y++){var P=m*o+(y>>5),D=B[(d+o)*(T_<<5)+(c+y)<<2]?1<<31-y%32:0;O[P]|=D,A|=D}A?R=o:(t.y0++,w--,o--,d++)}t.y1=t.y0+R,t.sprite=O.slice(0,(t.y1-t.y0)*m)}}}function Rue(e,t,n){n>>=5;for(var i=e.sprite,s=e.width>>5,l=e.x-(s<<4),c=l&127,d=32-c,f=e.y1-e.y0,u=(e.y+e.y0)*n+(l>>5),a,m=0;m<f;m++){a=0;for(var w=0;w<=s;w++)if((a<<d|(w<s?(a=i[m*s+w])>>>c:0))&t[u+w])return!0;u+=n}return!1}function Lue(e,t){var n=e[0],i=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>i.x&&(i.x=t.x+t.x1),t.y+t.y1>i.y&&(i.y=t.y+t.y1)}function Pue(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function Iq(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function Due(e){var t=4,n=t*e[0]/e[1],i=0,s=0;return function(l){var c=l<0?-1:1;switch(Math.sqrt(1+4*c*l)-c&3){case 0:i+=n;break;case 1:s+=t;break;case 2:i-=n;break;default:s-=t;break}return[i,s]}}function $ue(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function lc(e){return typeof e=="function"?e:function(){return e}}var Uue={archimedean:Iq,rectangular:Due};const Mq=["x","y","font","fontSize","fontStyle","fontWeight","angle"],zue=["text","font","rotate","fontSize","fontStyle","fontWeight"];function zI(e){re.call(this,Nue(),e)}zI.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:Mq}]};Te(zI,re,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&ce("Wordcloud size dimensions must be non-zero.");function n(o){const T=e[o];return lt(T)&&t.modified(T.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||zue.some(n)))return;const s=t.materialize(t.SOURCE).source,l=this.value,c=e.as||Mq;let d=e.fontSize||14,f;if(lt(d)?f=e.fontSizeRange:d=ci(d),f){const o=d,T=kt("sqrt")().domain(Ea(s,o)).range(f);d=b=>T(o(b))}s.forEach(o=>{o[c[0]]=NaN,o[c[1]]=NaN,o[c[3]]=0});const u=l.words(s).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(d).random(Us).layout(),a=l.size(),m=a[0]>>1,w=a[1]>>1,y=u.length;for(let o=0,T,b;o<y;++o)T=u[o],b=T.datum,b[c[0]]=T.x+m,b[c[1]]=T.y+w,b[c[2]]=T.font,b[c[3]]=T.size,b[c[4]]=T.style,b[c[5]]=T.weight,b[c[6]]=T.rotate;return t.reflow(i).modifies(c)}});const jue=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:zI},Symbol.toStringTag,{value:"Module"})),que=e=>new Uint8Array(e),Gue=e=>new Uint16Array(e),D_=e=>new Uint32Array(e);function Hue(){let e=8,t=[],n=D_(0),i=Nm(0,e),s=Nm(0,e);return{data:()=>t,seen:()=>n=Wue(n,t.length),add(l){for(let c=0,d=t.length,f=l.length,u;c<f;++c)u=l[c],u._index=d++,t.push(u)},remove(l,c){const d=t.length,f=Array(d-l),u=t;let a,m,w;for(m=0;!c[m]&&m<d;++m)f[m]=t[m],u[m]=m;for(w=m;m<d;++m)a=t[m],c[m]?u[m]=-1:(u[m]=w,i[w]=i[m],s[w]=s[m],f[w]=a,a._index=w++),i[m]=0;return t=f,u},size:()=>t.length,curr:()=>i,prev:()=>s,reset:l=>s[l]=i[l],all:()=>e<257?255:e<65537?65535:4294967295,set(l,c){i[l]|=c},clear(l,c){i[l]&=~c},resize(l,c){const d=i.length;(l>d||c>e)&&(e=Math.max(c,e),i=Nm(l,e,i),s=Nm(l,e))}}}function Wue(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function Nm(e,t,n){const i=(t<257?que:t<65537?Gue:D_)(e);return n&&i.set(n),i}function DR(e,t,n){const i=1<<t;return{one:i,zero:~i,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(s,l){const c=this,d=c.bisect(c.range,s.value),f=s.index,u=d[0],a=d[1],m=f.length;let w;for(w=0;w<u;++w)l[f[w]]|=i;for(w=a;w<m;++w)l[f[w]]|=i;return c}}}function $R(){let e=D_(0),t=[],n=0;function i(d,f,u){if(!f.length)return[];const a=n,m=f.length,w=D_(m);let y=Array(m),o,T,b;for(b=0;b<m;++b)y[b]=d(f[b]),w[b]=b;if(y=Vue(y,w),a)o=t,T=e,t=Array(a+m),e=D_(a+m),Yue(u,o,T,a,y,w,m,t,e);else{if(u>0)for(b=0;b<m;++b)w[b]+=u;t=y,e=w}return n=a+m,{index:w,value:y}}function s(d,f){const u=n;let a,m,w;for(m=0;!f[e[m]]&&m<u;++m);for(w=m;m<u;++m)f[a=e[m]]||(e[w]=a,t[w]=t[m],++w);n=u-d}function l(d){for(let f=0,u=n;f<u;++f)e[f]=d[e[f]]}function c(d,f){let u;return f?u=f.length:(f=t,u=n),[oJ(f,d[0],0,u),Yw(f,d[1],0,u)]}return{insert:i,remove:s,bisect:c,reindex:l,index:()=>e,size:()=>n}}function Vue(e,t){return e.sort.call(t,(n,i)=>{const s=e[n],l=e[i];return s<l?-1:s>l?1:0}),dJ(e,t)}function Yue(e,t,n,i,s,l,c,d,f){let u=0,a=0,m;for(m=0;u<i&&a<c;++m)t[u]<s[a]?(d[m]=t[u],f[m]=n[u++]):(d[m]=s[a],f[m]=l[a++]+e);for(;u<i;++u,++m)d[m]=t[u],f[m]=n[u];for(;a<c;++a,++m)d[m]=s[a],f[m]=l[a]+e}function jI(e){re.call(this,Hue(),e),this._indices=null,this._dims=null}jI.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};Te(jI,re,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(i=>t.modified(i.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,i=e.query,s=this._indices={},l=this._dims=[],c=i.length;let d=0,f,u;for(;d<c;++d)f=n[d].fname,u=s[f]||(s[f]=$R()),l.push(DR(u,d,i[d]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),i=e.fields,s=e.query,l=this._indices,c=this._dims,d=this.value,f=d.curr(),u=d.prev(),a=d.all(),m=n.rem=n.add,w=n.mod,y=s.length,o={};let T,b,S,x,k,I,B,O,A;if(u.set(f),t.rem.length&&(k=this.remove(e,t,n)),t.add.length&&d.add(t.add),t.mod.length)for(I={},x=t.mod,B=0,O=x.length;B<O;++B)I[x[B]._index]=1;for(B=0;B<y;++B)A=i[B],(!c[B]||e.modified("fields",B)||t.modified(A.fields))&&(S=A.fname,(T=o[S])||(l[S]=b=$R(),o[S]=T=b.insert(A,t.source,0)),c[B]=DR(b,B,s[B]).onAdd(T,f));for(B=0,O=d.data().length;B<O;++B)k[B]||(u[B]!==f[B]?m.push(B):I[B]&&f[B]!==a&&w.push(B));return d.mask=(1<<y)-1,n},eval(e,t){const n=t.materialize().fork(),i=this._dims.length;let s=0;return t.rem.length&&(this.remove(e,t,n),s|=(1<<i)-1),e.modified("query")&&!e.modified("fields")&&(s|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),s|=(1<<i)-1),t.mod.length&&(this.modify(t,n),s|=(1<<i)-1),this.value.mask=s,n},insert(e,t,n){const i=t.add,s=this.value,l=this._dims,c=this._indices,d=e.fields,f={},u=n.add,a=s.size()+i.length,m=l.length;let w=s.size(),y,o,T;s.resize(a,m),s.add(i);const b=s.curr(),S=s.prev(),x=s.all();for(y=0;y<m;++y)o=d[y].fname,T=f[o]||(f[o]=c[o].insert(d[y],i,w)),l[y].onAdd(T,b);for(;w<a;++w)S[w]=x,b[w]!==x&&u.push(w)},modify(e,t){const n=t.mod,i=this.value,s=i.curr(),l=i.all(),c=e.mod;let d,f,u;for(d=0,f=c.length;d<f;++d)u=c[d]._index,s[u]!==l&&n.push(u)},remove(e,t,n){const i=this._indices,s=this.value,l=s.curr(),c=s.prev(),d=s.all(),f={},u=n.rem,a=t.rem;let m,w,y,o;for(m=0,w=a.length;m<w;++m)y=a[m]._index,f[y]=1,c[y]=o=l[y],l[y]=d,o!==d&&u.push(y);for(y in i)i[y].remove(w,f);return this.reindex(t,w,f),f},reindex(e,t,n){const i=this._indices,s=this.value;e.runAfter(()=>{const l=s.remove(t,n);for(const c in i)i[c].reindex(l)})},update(e,t,n){const i=this._dims,s=e.query,l=t.stamp,c=i.length;let d=0,f,u;for(n.filters=0,u=0;u<c;++u)e.modified("query",u)&&(f=u,++d);if(d===1)d=i[f].one,this.incrementOne(i[f],s[f],n.add,n.rem);else for(u=0,d=0;u<c;++u)e.modified("query",u)&&(d|=i[u].one,this.incrementAll(i[u],s[u],l,n.add),n.rem=n.add);return d},incrementAll(e,t,n,i){const s=this.value,l=s.seen(),c=s.curr(),d=s.prev(),f=e.index(),u=e.bisect(e.range),a=e.bisect(t),m=a[0],w=a[1],y=u[0],o=u[1],T=e.one;let b,S,x;if(m<y)for(b=m,S=Math.min(y,w);b<S;++b)x=f[b],l[x]!==n&&(d[x]=c[x],l[x]=n,i.push(x)),c[x]^=T;else if(m>y)for(b=y,S=Math.min(m,o);b<S;++b)x=f[b],l[x]!==n&&(d[x]=c[x],l[x]=n,i.push(x)),c[x]^=T;if(w>o)for(b=Math.max(m,o),S=w;b<S;++b)x=f[b],l[x]!==n&&(d[x]=c[x],l[x]=n,i.push(x)),c[x]^=T;else if(w<o)for(b=Math.max(y,w),S=o;b<S;++b)x=f[b],l[x]!==n&&(d[x]=c[x],l[x]=n,i.push(x)),c[x]^=T;e.range=t.slice()},incrementOne(e,t,n,i){const s=this.value,l=s.curr(),c=e.index(),d=e.bisect(e.range),f=e.bisect(t),u=f[0],a=f[1],m=d[0],w=d[1],y=e.one;let o,T,b;if(u<m)for(o=u,T=Math.min(m,a);o<T;++o)b=c[o],l[b]^=y,n.push(b);else if(u>m)for(o=m,T=Math.min(u,w);o<T;++o)b=c[o],l[b]^=y,i.push(b);if(a>w)for(o=Math.max(u,w),T=a;o<T;++o)b=c[o],l[b]^=y,n.push(b);else if(a<w)for(o=Math.max(m,a),T=w;o<T;++o)b=c[o],l[b]^=y,i.push(b);e.range=t.slice()}});function qI(e){re.call(this,null,e)}qI.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};Te(qI,re,{transform(e,t){const n=~(e.ignore||0),i=e.filter,s=i.mask;if(!(s&n))return t.StopPropagation;const l=t.fork(t.ALL),c=i.data(),d=i.curr(),f=i.prev(),u=a=>d[a]&n?null:c[a];return l.filter(l.MOD,u),s&s-1?(l.filter(l.ADD,a=>{const m=d[a]&n;return!m&&m^f[a]&n?c[a]:null}),l.filter(l.REM,a=>{const m=d[a]&n;return m&&!(m^(m^f[a]&n))?c[a]:null})):(l.filter(l.ADD,u),l.filter(l.REM,a=>(d[a]&n)===s?c[a]:null)),l.filter(l.SOURCE,a=>u(a._index))}});const Xue=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:jI,resolvefilter:qI},Symbol.toStringTag,{value:"Module"})),Kue="RawCode",hd="Literal",Jue="Property",Que="Identifier",Zue="ArrayExpression",ehe="BinaryExpression",Aq="CallExpression",the="ConditionalExpression",nhe="LogicalExpression",ihe="MemberExpression",she="ObjectExpression",rhe="UnaryExpression";function Ir(e){this.type=e}Ir.prototype.visit=function(e){let t,n,i;if(e(this))return 1;for(t=ahe(this),n=0,i=t.length;n<i;++n)if(t[n].visit(e))return 1};function ahe(e){switch(e.type){case Zue:return e.elements;case ehe:case nhe:return[e.left,e.right];case Aq:return[e.callee].concat(e.arguments);case the:return[e.test,e.consequent,e.alternate];case ihe:return[e.object,e.property];case she:return e.properties;case Jue:return[e.key,e.value];case rhe:return[e.argument];case Que:case hd:case Kue:default:return[]}}var Ra,Me,le,ri,Pt,WT=1,xp=2,_d=3,Kl=4,VT=5,Wd=6,Ni=7,kp=8,ohe=9;Ra={};Ra[WT]="Boolean";Ra[xp]="<end>";Ra[_d]="Identifier";Ra[Kl]="Keyword";Ra[VT]="Null";Ra[Wd]="Numeric";Ra[Ni]="Punctuator";Ra[kp]="String";Ra[ohe]="RegularExpression";var lhe="ArrayExpression",che="BinaryExpression",dhe="CallExpression",fhe="ConditionalExpression",Oq="Identifier",uhe="Literal",hhe="LogicalExpression",_he="MemberExpression",ghe="ObjectExpression",phe="Property",yhe="UnaryExpression",Mn="Unexpected token %0",mhe="Unexpected number",whe="Unexpected string",bhe="Unexpected identifier",The="Unexpected reserved word",Ehe="Unexpected end of input",Tx="Invalid regular expression",sv="Invalid regular expression: missing /",Nq="Octal literals are not allowed in strict mode.",vhe="Duplicate data property in object literal not allowed in strict mode",zn="ILLEGAL",Tg="Disabled.",She=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),xhe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function YT(e,t){if(!e)throw new Error("ASSERT: "+t)}function Qa(e){return e>=48&&e<=57}function GI(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function $_(e){return"01234567".indexOf(e)>=0}function khe(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function Eg(e){return e===10||e===13||e===8232||e===8233}function Bp(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&She.test(String.fromCharCode(e))}function r0(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&xhe.test(String.fromCharCode(e))}const Bhe={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function Cq(){for(;le<ri;){const e=Me.charCodeAt(le);if(khe(e)||Eg(e))++le;else break}}function Ex(e){var t,n,i,s=0;for(n=e==="u"?4:2,t=0;t<n;++t)le<ri&&GI(Me[le])?(i=Me[le++],s=s*16+"0123456789abcdef".indexOf(i.toLowerCase())):St({},Mn,zn);return String.fromCharCode(s)}function Fhe(){var e,t,n,i;for(e=Me[le],t=0,e==="}"&&St({},Mn,zn);le<ri&&(e=Me[le++],!!GI(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&St({},Mn,zn),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,i=(t-65536&1023)+56320,String.fromCharCode(n,i))}function Rq(){var e,t;for(e=Me.charCodeAt(le++),t=String.fromCharCode(e),e===92&&(Me.charCodeAt(le)!==117&&St({},Mn,zn),++le,e=Ex("u"),(!e||e==="\\"||!Bp(e.charCodeAt(0)))&&St({},Mn,zn),t=e);le<ri&&(e=Me.charCodeAt(le),!!r0(e));)++le,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Me.charCodeAt(le)!==117&&St({},Mn,zn),++le,e=Ex("u"),(!e||e==="\\"||!r0(e.charCodeAt(0)))&&St({},Mn,zn),t+=e);return t}function Ihe(){var e,t;for(e=le++;le<ri;){if(t=Me.charCodeAt(le),t===92)return le=e,Rq();if(r0(t))++le;else break}return Me.slice(e,le)}function Mhe(){var e,t,n;return e=le,t=Me.charCodeAt(le)===92?Rq():Ihe(),t.length===1?n=_d:Bhe.hasOwnProperty(t)?n=Kl:t==="null"?n=VT:t==="true"||t==="false"?n=WT:n=_d,{type:n,value:t,start:e,end:le}}function rv(){var e=le,t=Me.charCodeAt(le),n,i=Me[le],s,l,c;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++le,{type:Ni,value:String.fromCharCode(t),start:e,end:le};default:if(n=Me.charCodeAt(le+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return le+=2,{type:Ni,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:le};case 33:case 61:return le+=2,Me.charCodeAt(le)===61&&++le,{type:Ni,value:Me.slice(e,le),start:e,end:le}}}if(c=Me.substr(le,4),c===">>>=")return le+=4,{type:Ni,value:c,start:e,end:le};if(l=c.substr(0,3),l===">>>"||l==="<<="||l===">>=")return le+=3,{type:Ni,value:l,start:e,end:le};if(s=l.substr(0,2),i===s[1]&&"+-<>&|".indexOf(i)>=0||s==="=>")return le+=2,{type:Ni,value:s,start:e,end:le};if(s==="//"&&St({},Mn,zn),"<>=!+-*%&|^/".indexOf(i)>=0)return++le,{type:Ni,value:i,start:e,end:le};St({},Mn,zn)}function Ahe(e){let t="";for(;le<ri&&GI(Me[le]);)t+=Me[le++];return t.length===0&&St({},Mn,zn),Bp(Me.charCodeAt(le))&&St({},Mn,zn),{type:Wd,value:parseInt("0x"+t,16),start:e,end:le}}function Ohe(e){let t="0"+Me[le++];for(;le<ri&&$_(Me[le]);)t+=Me[le++];return(Bp(Me.charCodeAt(le))||Qa(Me.charCodeAt(le)))&&St({},Mn,zn),{type:Wd,value:parseInt(t,8),octal:!0,start:e,end:le}}function UR(){var e,t,n;if(n=Me[le],YT(Qa(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=le,e="",n!=="."){if(e=Me[le++],n=Me[le],e==="0"){if(n==="x"||n==="X")return++le,Ahe(t);if($_(n))return Ohe(t);n&&Qa(n.charCodeAt(0))&&St({},Mn,zn)}for(;Qa(Me.charCodeAt(le));)e+=Me[le++];n=Me[le]}if(n==="."){for(e+=Me[le++];Qa(Me.charCodeAt(le));)e+=Me[le++];n=Me[le]}if(n==="e"||n==="E")if(e+=Me[le++],n=Me[le],(n==="+"||n==="-")&&(e+=Me[le++]),Qa(Me.charCodeAt(le)))for(;Qa(Me.charCodeAt(le));)e+=Me[le++];else St({},Mn,zn);return Bp(Me.charCodeAt(le))&&St({},Mn,zn),{type:Wd,value:parseFloat(e),start:t,end:le}}function Nhe(){var e="",t,n,i,s,l=!1;for(t=Me[le],YT(t==="'"||t==='"',"String literal must starts with a quote"),n=le,++le;le<ri;)if(i=Me[le++],i===t){t="";break}else if(i==="\\")if(i=Me[le++],!i||!Eg(i.charCodeAt(0)))switch(i){case"u":case"x":Me[le]==="{"?(++le,e+=Fhe()):e+=Ex(i);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:$_(i)?(s="01234567".indexOf(i),s!==0&&(l=!0),le<ri&&$_(Me[le])&&(l=!0,s=s*8+"01234567".indexOf(Me[le++]),"0123".indexOf(i)>=0&&le<ri&&$_(Me[le])&&(s=s*8+"01234567".indexOf(Me[le++]))),e+=String.fromCharCode(s)):e+=i;break}else i==="\r"&&Me[le]===`
`&&++le;else{if(Eg(i.charCodeAt(0)))break;e+=i}return t!==""&&St({},Mn,zn),{type:kp,value:e,octal:l,start:n,end:le}}function Che(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(i,s)=>{if(parseInt(s,16)<=1114111)return"x";St({},Tx)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{St({},Tx)}try{return new RegExp(e,t)}catch{return null}}function Rhe(){var e,t,n,i,s;for(e=Me[le],YT(e==="/","Regular expression literal must start with a slash"),t=Me[le++],n=!1,i=!1;le<ri;)if(e=Me[le++],t+=e,e==="\\")e=Me[le++],Eg(e.charCodeAt(0))&&St({},sv),t+=e;else if(Eg(e.charCodeAt(0)))St({},sv);else if(n)e==="]"&&(n=!1);else if(e==="/"){i=!0;break}else e==="["&&(n=!0);return i||St({},sv),s=t.substr(1,t.length-2),{value:s,literal:t}}function Lhe(){var e,t,n;for(t="",n="";le<ri&&(e=Me[le],!!r0(e.charCodeAt(0)));)++le,e==="\\"&&le<ri?St({},Mn,zn):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&St({},Tx,n),{value:n,literal:t}}function Phe(){var e,t,n,i;return Pt=null,Cq(),e=le,t=Rhe(),n=Lhe(),i=Che(t.value,n.value),{literal:t.literal+n.literal,value:i,regex:{pattern:t.value,flags:n.value},start:e,end:le}}function Dhe(e){return e.type===_d||e.type===Kl||e.type===WT||e.type===VT}function Lq(){if(Cq(),le>=ri)return{type:xp,start:le,end:le};const e=Me.charCodeAt(le);return Bp(e)?Mhe():e===40||e===41||e===59?rv():e===39||e===34?Nhe():e===46?Qa(Me.charCodeAt(le+1))?UR():rv():Qa(e)?UR():rv()}function Di(){const e=Pt;return le=e.end,Pt=Lq(),le=e.end,e}function Pq(){const e=le;Pt=Lq(),le=e}function $he(e){const t=new Ir(lhe);return t.elements=e,t}function zR(e,t,n){const i=new Ir(e==="||"||e==="&&"?hhe:che);return i.operator=e,i.left=t,i.right=n,i}function Uhe(e,t){const n=new Ir(dhe);return n.callee=e,n.arguments=t,n}function zhe(e,t,n){const i=new Ir(fhe);return i.test=e,i.consequent=t,i.alternate=n,i}function HI(e){const t=new Ir(Oq);return t.name=e,t}function E_(e){const t=new Ir(uhe);return t.value=e.value,t.raw=Me.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function jR(e,t,n){const i=new Ir(_he);return i.computed=e==="[",i.object=t,i.property=n,i.computed||(n.member=!0),i}function jhe(e){const t=new Ir(ghe);return t.properties=e,t}function qR(e,t,n){const i=new Ir(phe);return i.key=t,i.value=n,i.kind=e,i}function qhe(e,t){const n=new Ir(yhe);return n.operator=e,n.argument=t,n.prefix=!0,n}function St(e,t){var n,i=Array.prototype.slice.call(arguments,2),s=t.replace(/%(\d)/g,(l,c)=>(YT(c<i.length,"Message reference must be in range"),i[c]));throw n=new Error(s),n.index=le,n.description=s,n}function XT(e){e.type===xp&&St(e,Ehe),e.type===Wd&&St(e,mhe),e.type===kp&&St(e,whe),e.type===_d&&St(e,bhe),e.type===Kl&&St(e,The),St(e,Mn,e.value)}function ai(e){const t=Di();(t.type!==Ni||t.value!==e)&&XT(t)}function Xt(e){return Pt.type===Ni&&Pt.value===e}function av(e){return Pt.type===Kl&&Pt.value===e}function Ghe(){const e=[];for(le=Pt.start,ai("[");!Xt("]");)Xt(",")?(Di(),e.push(null)):(e.push(gd()),Xt("]")||ai(","));return Di(),$he(e)}function GR(){le=Pt.start;const e=Di();return e.type===kp||e.type===Wd?(e.octal&&St(e,Nq),E_(e)):HI(e.value)}function Hhe(){var e,t,n,i;if(le=Pt.start,e=Pt,e.type===_d)return n=GR(),ai(":"),i=gd(),qR("init",n,i);if(e.type===xp||e.type===Ni)XT(e);else return t=GR(),ai(":"),i=gd(),qR("init",t,i)}function Whe(){var e=[],t,n,i,s={},l=String;for(le=Pt.start,ai("{");!Xt("}");)t=Hhe(),t.key.type===Oq?n=t.key.name:n=l(t.key.value),i="$"+n,Object.prototype.hasOwnProperty.call(s,i)?St({},vhe):s[i]=!0,e.push(t),Xt("}")||ai(",");return ai("}"),jhe(e)}function Vhe(){ai("(");const e=WI();return ai(")"),e}const Yhe={if:1};function Xhe(){var e,t,n;if(Xt("("))return Vhe();if(Xt("["))return Ghe();if(Xt("{"))return Whe();if(e=Pt.type,le=Pt.start,e===_d||Yhe[Pt.value])n=HI(Di().value);else if(e===kp||e===Wd)Pt.octal&&St(Pt,Nq),n=E_(Di());else{if(e===Kl)throw new Error(Tg);e===WT?(t=Di(),t.value=t.value==="true",n=E_(t)):e===VT?(t=Di(),t.value=null,n=E_(t)):Xt("/")||Xt("/=")?(n=E_(Phe()),Pq()):XT(Di())}return n}function Khe(){const e=[];if(ai("("),!Xt(")"))for(;le<ri&&(e.push(gd()),!Xt(")"));)ai(",");return ai(")"),e}function Jhe(){le=Pt.start;const e=Di();return Dhe(e)||XT(e),HI(e.value)}function Qhe(){return ai("."),Jhe()}function Zhe(){ai("[");const e=WI();return ai("]"),e}function e_e(){var e,t,n;for(e=Xhe();;)if(Xt("."))n=Qhe(),e=jR(".",e,n);else if(Xt("("))t=Khe(),e=Uhe(e,t);else if(Xt("["))n=Zhe(),e=jR("[",e,n);else break;return e}function HR(){const e=e_e();if(Pt.type===Ni&&(Xt("++")||Xt("--")))throw new Error(Tg);return e}function Sw(){var e,t;if(Pt.type!==Ni&&Pt.type!==Kl)t=HR();else{if(Xt("++")||Xt("--"))throw new Error(Tg);if(Xt("+")||Xt("-")||Xt("~")||Xt("!"))e=Di(),t=Sw(),t=qhe(e.value,t);else{if(av("delete")||av("void")||av("typeof"))throw new Error(Tg);t=HR()}}return t}function WR(e){let t=0;if(e.type!==Ni&&e.type!==Kl)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function t_e(){var e,t,n,i,s,l,c,d,f,u;if(e=Pt,f=Sw(),i=Pt,s=WR(i),s===0)return f;for(i.prec=s,Di(),t=[e,Pt],c=Sw(),l=[f,i,c];(s=WR(Pt))>0;){for(;l.length>2&&s<=l[l.length-2].prec;)c=l.pop(),d=l.pop().value,f=l.pop(),t.pop(),n=zR(d,f,c),l.push(n);i=Di(),i.prec=s,l.push(i),t.push(Pt),n=Sw(),l.push(n)}for(u=l.length-1,n=l[u],t.pop();u>1;)t.pop(),n=zR(l[u-1].value,l[u-2],n),u-=2;return n}function gd(){var e,t,n;return e=t_e(),Xt("?")&&(Di(),t=gd(),ai(":"),n=gd(),e=zhe(e,t,n)),e}function WI(){const e=gd();if(Xt(","))throw new Error(Tg);return e}function VI(e){Me=e,le=0,ri=Me.length,Pt=null,Pq();const t=WI();if(Pt.type!==xp)throw new Error("Unexpect token after expression.");return t}var Dq={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function $q(e){function t(c,d,f,u){let a=e(d[0]);return f&&(a=f+"("+a+")",f.lastIndexOf("new ",0)===0&&(a="("+a+")")),a+"."+c+(u<0?"":u===0?"()":"("+d.slice(1).map(e).join(",")+")")}function n(c,d,f){return u=>t(c,u,d,f)}const i="new Date",s="String",l="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(c){c.length<3&&ce("Missing arguments to clamp function."),c.length>3&&ce("Too many arguments to clamp function.");const d=c.map(e);return"Math.max("+d[1]+", Math.min("+d[2]+","+d[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:i,date:n("getDate",i,0),day:n("getDay",i,0),year:n("getFullYear",i,0),month:n("getMonth",i,0),hours:n("getHours",i,0),minutes:n("getMinutes",i,0),seconds:n("getSeconds",i,0),milliseconds:n("getMilliseconds",i,0),time:n("getTime",i,0),timezoneoffset:n("getTimezoneOffset",i,0),utcdate:n("getUTCDate",i,0),utcday:n("getUTCDay",i,0),utcyear:n("getUTCFullYear",i,0),utcmonth:n("getUTCMonth",i,0),utchours:n("getUTCHours",i,0),utcminutes:n("getUTCMinutes",i,0),utcseconds:n("getUTCSeconds",i,0),utcmilliseconds:n("getUTCMilliseconds",i,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",s,0),lower:n("toLowerCase",s,0),substring:n("substring",s),split:n("split",s),trim:n("trim",s,0),regexp:l,test:n("test",l),if:function(c){c.length<3&&ce("Missing arguments to if function."),c.length>3&&ce("Too many arguments to if function.");const d=c.map(e);return"("+d[0]+"?"+d[1]+":"+d[2]+")"}}}function n_e(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function Uq(e){e=e||{};const t=e.allowed?Er(e.allowed):{},n=e.forbidden?Er(e.forbidden):{},i=e.constants||Dq,s=(e.functions||$q)(m),l=e.globalvar,c=e.fieldvar,d=lt(l)?l:o=>`${l}["${o}"]`;let f={},u={},a=0;function m(o){if(Se(o))return o;const T=w[o.type];return T==null&&ce("Unsupported type: "+o.type),T(o)}const w={Literal:o=>o.raw,Identifier:o=>{const T=o.name;return a>0?T:Le(n,T)?ce("Illegal identifier: "+T):Le(i,T)?i[T]:Le(t,T)?T:(f[T]=1,d(T))},MemberExpression:o=>{const T=!o.computed,b=m(o.object);T&&(a+=1);const S=m(o.property);return b===c&&(u[n_e(S)]=1),T&&(a-=1),b+(T?"."+S:"["+S+"]")},CallExpression:o=>{o.callee.type!=="Identifier"&&ce("Illegal callee type: "+o.callee.type);const T=o.callee.name,b=o.arguments,S=Le(s,T)&&s[T];return S||ce("Unrecognized function: "+T),lt(S)?S(b):S+"("+b.map(m).join(",")+")"},ArrayExpression:o=>"["+o.elements.map(m).join(",")+"]",BinaryExpression:o=>"("+m(o.left)+" "+o.operator+" "+m(o.right)+")",UnaryExpression:o=>"("+o.operator+m(o.argument)+")",ConditionalExpression:o=>"("+m(o.test)+"?"+m(o.consequent)+":"+m(o.alternate)+")",LogicalExpression:o=>"("+m(o.left)+o.operator+m(o.right)+")",ObjectExpression:o=>"{"+o.properties.map(m).join(",")+"}",Property:o=>{a+=1;const T=m(o.key);return a-=1,T+":"+m(o.value)}};function y(o){const T={code:m(o),globals:Object.keys(f),fields:Object.keys(u)};return f={},u={},T}return y.functions=s,y.constants=i,y}function ov(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function i_e(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function s_e(e){let t,n,i;e.length!==2?(t=ov,n=(d,f)=>ov(e(d),f),i=(d,f)=>e(d)-f):(t=e===ov||e===i_e?e:r_e,n=e,i=e);function s(d,f,u=0,a=d.length){if(u<a){if(t(f,f)!==0)return a;do{const m=u+a>>>1;n(d[m],f)<0?u=m+1:a=m}while(u<a)}return u}function l(d,f,u=0,a=d.length){if(u<a){if(t(f,f)!==0)return a;do{const m=u+a>>>1;n(d[m],f)<=0?u=m+1:a=m}while(u<a)}return u}function c(d,f,u=0,a=d.length){const m=s(d,f,u,a-1);return m>u&&i(d[m-1],f)>-i(d[m],f)?m-1:m}return{left:s,center:c,right:l}}function r_e(){return 0}function a_e(e,...t){e=new Xw(e),t=t.map(o_e);e:for(const n of e)for(const i of t)if(!i.has(n)){e.delete(n);continue e}return e}function o_e(e){return e instanceof Xw?e:new Xw(e)}function l_e(...e){const t=new Xw;for(const n of e)for(const i of n)t.add(i);return t}const YI="intersect",VR="union",c_e="vlMulti",d_e="vlPoint",YR="or",f_e="and",Yr="_vgsid_",vg=Yi(Yr),u_e="E",h_e="R",__e="R-E",g_e="R-LE",p_e="R-RE",a0="index:unit";function XR(e,t){for(var n=t.fields,i=t.values,s=n.length,l=0,c,d;l<s;++l)if(d=n[l],d.getter=Yi.getter||Yi(d.field),c=d.getter(e),_l(c)&&(c=ei(c)),_l(i[l])&&(i[l]=ei(i[l])),_l(i[l][0])&&(i[l]=i[l].map(ei)),d.type===u_e){if(fe(i[l])?i[l].indexOf(c)<0:c!==i[l])return!1}else if(d.type===h_e){if(!Lf(c,i[l]))return!1}else if(d.type===p_e){if(!Lf(c,i[l],!0,!1))return!1}else if(d.type===__e){if(!Lf(c,i[l],!1,!1))return!1}else if(d.type===g_e&&!Lf(c,i[l],!1,!0))return!1;return!0}function y_e(e,t,n){for(var i=this.context.data[e],s=i?i.values.value:[],l=i?i[a0]&&i[a0].value:void 0,c=n===YI,d=s.length,f=0,u,a,m,w,y;f<d;++f)if(u=s[f],l&&c){if(a=a||{},m=a[w=u.unit]||0,m===-1)continue;if(y=XR(t,u),a[w]=y?-1:++m,y&&l.size===1)return!0;if(!y&&m===l.get(w).count)return!1}else if(y=XR(t,u),c^y)return y;return d&&c}const zq=s_e(vg),m_e=zq.left,w_e=zq.right;function b_e(e,t,n){const i=this.context.data[e],s=i?i.values.value:[],l=i?i[a0]&&i[a0].value:void 0,c=n===YI,d=vg(t),f=m_e(s,d);if(f===s.length||vg(s[f])!==d)return!1;if(l&&c){if(l.size===1)return!0;if(w_e(s,d)-f<l.size)return!1}return!0}function T_e(e,t){return e.map(n=>ot(t.fields?{values:t.fields.map(i=>(i.getter||(i.getter=Yi(i.field)))(n.datum))}:{[Yr]:vg(n.datum)},t))}function E_e(e,t,n,i){for(var s=this.context.data[e],l=s?s.values.value:[],c={},d={},f={},u,a,m,w,y,o,T,b,S,x,k=l.length,I=0,B,O;I<k;++I)if(u=l[I],w=u.unit,a=u.fields,m=u.values,a&&m){for(B=0,O=a.length;B<O;++B)y=a[B],T=c[y.field]||(c[y.field]={}),b=T[w]||(T[w]=[]),f[y.field]=S=y.type.charAt(0),x=lv[`${S}_union`],T[w]=x(b,xe(m[B]));n&&(b=d[w]||(d[w]=[]),b.push(xe(m).reduce((A,R,P)=>(A[a[P].field]=R,A),{})))}else y=Yr,o=vg(u),T=c[y]||(c[y]={}),b=T[w]||(T[w]=[]),b.push(o),n&&(b=d[w]||(d[w]=[]),b.push({[Yr]:o}));if(t=t||VR,c[Yr]?c[Yr]=lv[`${Yr}_${t}`](...Object.values(c[Yr])):Object.keys(c).forEach(A=>{c[A]=Object.keys(c[A]).map(R=>c[A][R]).reduce((R,P)=>R===void 0?P:lv[`${f[A]}_${t}`](R,P))}),l=Object.keys(d),n&&l.length){const A=i?d_e:c_e;c[A]=t===VR?{[YR]:l.reduce((R,P)=>(R.push(...d[P]),R),[])}:{[f_e]:l.map(R=>({[YR]:d[R]}))}}return c}var lv={[`${Yr}_union`]:l_e,[`${Yr}_intersect`]:a_e,E_union:function(e,t){if(!e.length)return t;for(var n=0,i=t.length;n<i;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=ei(t[0]),i=ei(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<i&&(e[1]=i),e):[n,i]},R_intersect:function(e,t){var n=ei(t[0]),i=ei(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?i<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>i&&(e[1]=i),e):[n,i]}};const v_e=":",S_e="@";function XI(e,t,n,i){t[0].type!==hd&&ce("First argument to selection functions must be a string literal.");const s=t[0].value,l=t.length>=2&&wt(t).value,c="unit",d=S_e+c,f=v_e+s;l===YI&&!Le(i,d)&&(i[d]=n.getData(s).indataRef(n,c)),Le(i,f)||(i[f]=n.getData(s).tuplesRef())}function jq(e){const t=this.context.data[e];return t?t.values.value:[]}function x_e(e,t,n){const i=this.context.data[e]["index:"+t],s=i?i.value.get(n):void 0;return s&&s.count}function k_e(e,t){const n=this.context.dataflow,i=this.context.data[e],s=i.input;return n.pulse(s,n.changeset().remove(zs).insert(t)),1}function B_e(e,t,n){if(e){const i=this.context.dataflow,s=e.mark.source;i.pulse(s,i.changeset().encode(e,t))}return n!==void 0?n:e}const Fp=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},F_e=Fp("format"),qq=Fp("timeFormat"),I_e=Fp("utcFormat"),M_e=Fp("timeParse"),A_e=Fp("utcParse"),Cm=new Date(2e3,0,1);function KT(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(Cm.setYear(2e3),Cm.setMonth(e),Cm.setDate(t),qq.call(this,Cm,n))}function O_e(e){return KT.call(this,e,1,"%B")}function N_e(e){return KT.call(this,e,1,"%b")}function C_e(e){return KT.call(this,0,2+e,"%A")}function R_e(e){return KT.call(this,0,2+e,"%a")}const L_e=":",P_e="@",vx="%",Gq="$";function KI(e,t,n,i){t[0].type!==hd&&ce("First argument to data functions must be a string literal.");const s=t[0].value,l=L_e+s;if(!Le(l,i))try{i[l]=n.getData(s).tuplesRef()}catch{}}function D_e(e,t,n,i){t[0].type!==hd&&ce("First argument to indata must be a string literal."),t[1].type!==hd&&ce("Second argument to indata must be a string literal.");const s=t[0].value,l=t[1].value,c=P_e+l;Le(c,i)||(i[c]=n.getData(s).indataRef(n,l))}function Ui(e,t,n,i){if(t[0].type===hd)KR(n,i,t[0].value);else for(e in n.scales)KR(n,i,e)}function KR(e,t,n){const i=vx+n;if(!Le(t,i))try{t[i]=e.scaleRef(n)}catch{}}function Ao(e,t){if(lt(e))return e;if(Se(e)){const n=t.scales[e];return n&&aoe(n.value)?n.value:void 0}}function $_e(e,t,n){t.__bandwidth=s=>s&&s.bandwidth?s.bandwidth():0,n._bandwidth=Ui,n._range=Ui,n._scale=Ui;const i=s=>"_["+(s.type===hd?be(vx+s.value):be(vx)+"+"+e(s))+"]";return{_bandwidth:s=>`this.__bandwidth(${i(s[0])})`,_range:s=>`${i(s[0])}.range()`,_scale:s=>`${i(s[0])}(${e(s[1])})`}}function JI(e,t){return function(n,i,s){if(n){const l=Ao(n,(s||this).context);return l&&l.path[e](i)}else return t(i)}}const U_e=JI("area",xZ),z_e=JI("bounds",IZ),j_e=JI("centroid",RZ);function q_e(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function QI(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(i){e.warn(i)}return n[n.length-1]}function G_e(){return QI(this.context.dataflow,"warn",arguments)}function H_e(){return QI(this.context.dataflow,"info",arguments)}function W_e(){return QI(this.context.dataflow,"debug",arguments)}function cv(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Sx(e){const t=xl(e),n=cv(t.r),i=cv(t.g),s=cv(t.b);return .2126*n+.7152*i+.0722*s}function V_e(e,t){const n=Sx(e),i=Sx(t),s=Math.max(n,i),l=Math.min(n,i);return(s+.05)/(l+.05)}function Y_e(){const e=[].slice.call(arguments);return e.unshift({}),ot(...e)}function Hq(e,t){return e===t||e!==e&&t!==t?!0:fe(e)?fe(t)&&e.length===t.length?X_e(e,t):!1:Be(e)&&Be(t)?Wq(e,t):!1}function X_e(e,t){for(let n=0,i=e.length;n<i;++n)if(!Hq(e[n],t[n]))return!1;return!0}function Wq(e,t){for(const n in e)if(!Hq(e[n],t[n]))return!1;return!0}function JR(e){return t=>Wq(e,t)}function K_e(e,t,n,i,s,l){const c=this.context.dataflow,d=this.context.data[e],f=d.input,u=c.stamp();let a=d.changes,m,w;if(c._trigger===!1||!(f.value.length||t||i))return 0;if((!a||a.stamp<u)&&(d.changes=a=c.changeset(),a.stamp=u,c.runAfter(()=>{d.modified=!0,c.pulse(f,a).run()},!0,1)),n&&(m=n===!0?zs:fe(n)||xT(n)?n:JR(n),a.remove(m)),t&&a.insert(t),i&&(m=JR(i),f.value.some(m)?a.remove(m):a.insert(i)),s)for(w in l)a.modify(s,w,l[w]);return 1}function J_e(e){const t=e.touches,n=t[0].clientX-t[1].clientX,i=t[0].clientY-t[1].clientY;return Math.hypot(n,i)}function Q_e(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const QR={};function Z_e(e,t){const n=QR[t]||(QR[t]=Yi(t));return fe(e)?e.map(n):n(e)}function ZI(e){return fe(e)||ArrayBuffer.isView(e)?e:null}function eM(e){return ZI(e)||(Se(e)?e:null)}function ege(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return ZI(e).join(...n)}function tge(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return eM(e).indexOf(...n)}function nge(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return eM(e).lastIndexOf(...n)}function ige(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return eM(e).slice(...n)}function sge(e,t,n){return lt(n)&&ce("Function argument passed to replace."),String(e).replace(t,n)}function rge(e){return ZI(e).slice().reverse()}function age(e,t,n){return TF(e||0,t||0,n||0)}function oge(e,t){const n=Ao(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function lge(e,t){const n=Ao(e,(t||this).context);return n?n.copy():void 0}function cge(e,t){const n=Ao(e,(t||this).context);return n?n.domain():[]}function dge(e,t,n){const i=Ao(e,(n||this).context);return i?fe(t)?(i.invertRange||i.invert)(t):(i.invert||i.invertExtent)(t):void 0}function fge(e,t){const n=Ao(e,(t||this).context);return n&&n.range?n.range():[]}function uge(e,t,n){const i=Ao(e,(n||this).context);return i?i(t):void 0}function hge(e,t,n,i,s){e=Ao(e,(s||this).context);const l=Gz(t,n);let c=e.domain(),d=c[0],f=wt(c),u=li;return f-d?u=Oz(e,d,f):e=(e.interpolator?kt("sequential")().interpolator(e.interpolator()):kt("linear")().interpolate(e.interpolate()).range(e.range())).domain([d=0,f=1]),e.ticks&&(c=e.ticks(+i||15),d!==c[0]&&c.unshift(d),f!==wt(c)&&c.push(f)),c.forEach(a=>l.stop(u(a),e(a))),l}function _ge(e,t,n){const i=Ao(e,(n||this).context);return function(s){return i?i.path.context(s)(t):""}}function gge(e){let t=null;return function(n){return n?pg(n,t=t||Ou(e)):e}}const Vq=e=>e.data;function Yq(e,t){const n=jq.call(t,e);return n.root&&n.root.lookup||{}}function pge(e,t,n){const i=Yq(e,this),s=i[t],l=i[n];return s&&l?s.path(l).map(Vq):void 0}function yge(e,t){const n=Yq(e,this)[t];return n?n.ancestors().map(Vq):void 0}const Xq=()=>typeof window<"u"&&window||null;function mge(){const e=Xq();return e?e.screen:{}}function wge(){const e=Xq();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function bge(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function Kq(e,t,n){if(!e)return[];const[i,s]=e,l=new fn().set(i[0],i[1],s[0],s[1]),c=n||this.context.dataflow.scenegraph().root;return Cj(c,l,Tge(t))}function Tge(e){let t=null;if(e){const n=xe(e.marktype),i=xe(e.markname);t=s=>(!n.length||n.some(l=>s.marktype===l))&&(!i.length||i.some(l=>s.name===l))}return t}function Ege(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=xe(e);const s=e[e.length-1];return s===void 0||Math.hypot(s[0]-t,s[1]-n)>i?[...e,[t,n]]:e}function vge(e){return xe(e).reduce((t,n,i)=>{let[s,l]=n;return t+=i==0?`M ${s},${l} `:i===e.length-1?" Z":`L ${s},${l} `},"")}function Sge(e,t,n){const{x:i,y:s,mark:l}=n,c=new fn().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[f,u]of t)f<c.x1&&(c.x1=f),f>c.x2&&(c.x2=f),u<c.y1&&(c.y1=u),u>c.y2&&(c.y2=u);return c.translate(i,s),Kq([[c.x1,c.y1],[c.x2,c.y2]],e,l).filter(f=>xge(f.x,f.y,t))}function xge(e,t,n){let i=0;for(let s=0,l=n.length-1;s<n.length;l=s++){const[c,d]=n[l],[f,u]=n[s];u>t!=d>t&&e<(c-f)*(t-u)/(d-u)+f&&i++}return i&1}const Sg={random(){return Us()},cumulativeNormal:_T,cumulativeLogNormal:p2,cumulativeUniform:b2,densityNormal:f2,densityLogNormal:g2,densityUniform:w2,quantileNormal:gT,quantileLogNormal:y2,quantileUniform:T2,sampleNormal:hT,sampleLogNormal:_2,sampleUniform:m2,isArray:fe,isBoolean:Xl,isDate:_l,isDefined(e){return e!==void 0},isNumber:$t,isObject:Be,isRegExp:t5,isString:Se,isTuple:xT,isValid(e){return e!=null&&e===e},toBoolean:P2,toDate(e){return D2(e)},toNumber:ei,toString:$2,indexof:tge,join:ege,lastindexof:nge,replace:sge,reverse:rge,slice:ige,flush:Z8,lerp:n5,merge:Y_e,pad:r5,peek:wt,pluck:Z_e,span:dp,inrange:Lf,truncate:a5,rgb:xl,lab:eb,hcl:tb,hsl:Qw,luminance:Sx,contrast:V_e,sequence:_s,format:F_e,utcFormat:I_e,utcParse:A_e,utcOffset:b5,utcSequence:v5,timeFormat:qq,timeParse:M_e,timeOffset:w5,timeSequence:E5,timeUnitSpecifier:l5,monthFormat:O_e,monthAbbrevFormat:N_e,dayFormat:C_e,dayAbbrevFormat:R_e,quarter:X8,utcquarter:K8,week:d5,utcweek:h5,dayofyear:c5,utcdayofyear:u5,warn:G_e,info:H_e,debug:W_e,extent(e){return Ea(e)},inScope:q_e,intersect:Kq,clampRange:J8,pinchDistance:J_e,pinchAngle:Q_e,screen:mge,containerSize:bge,windowSize:wge,bandspace:age,setdata:k_e,pathShape:gge,panLinear:H8,panLog:W8,panPow:V8,panSymlog:Y8,zoomLinear:A2,zoomLog:O2,zoomPow:zb,zoomSymlog:N2,encode:B_e,modify:K_e,lassoAppend:Ege,lassoPath:vge,intersectLasso:Sge},kge=["view","item","group","xy","x","y"],Bge="event.vega.",Jq="this.",tM={},Qq={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${be(Gq+e)}]`,functions:Fge,constants:Dq,visitors:tM},xx=Uq(Qq);function Fge(e){const t=$q(e);kge.forEach(n=>t[n]=Bge+n);for(const n in Sg)t[n]=Jq+n;return ot(t,$_e(e,Sg,tM)),t}function hn(e,t,n){return arguments.length===1?Sg[e]:(Sg[e]=t,n&&(tM[e]=n),xx&&(xx.functions[e]=Jq+e),this)}hn("bandwidth",oge,Ui);hn("copy",lge,Ui);hn("domain",cge,Ui);hn("range",fge,Ui);hn("invert",dge,Ui);hn("scale",uge,Ui);hn("gradient",hge,Ui);hn("geoArea",U_e,Ui);hn("geoBounds",z_e,Ui);hn("geoCentroid",j_e,Ui);hn("geoShape",_ge,Ui);hn("indata",x_e,D_e);hn("data",jq,KI);hn("treePath",pge,KI);hn("treeAncestors",yge,KI);hn("vlSelectionTest",y_e,XI);hn("vlSelectionIdTest",b_e,XI);hn("vlSelectionResolve",E_e,XI);hn("vlSelectionTuples",T_e);function Sa(e,t){const n={};let i;try{e=Se(e)?e:be(e)+"",i=VI(e)}catch{ce("Expression parse error: "+e)}i.visit(l=>{if(l.type!==Aq)return;const c=l.callee.name,d=Qq.visitors[c];d&&d(c,l.arguments,t,n)});const s=xx(i);return s.globals.forEach(l=>{const c=Gq+l;!Le(n,c)&&t.getSignal(l)&&(n[c]=t.signalRef(l))}),{$expr:ot({code:s.code},t.options.ast?{ast:i}:null),$fields:s.fields,$params:n}}function Ige(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(i=>t.parseOperator(i)),n.forEach(i=>t.parseOperatorParameters(i)),(e.streams||[]).forEach(i=>t.parseStream(i)),(e.updates||[]).forEach(i=>t.parseUpdate(i)),t.resolve()}const Mge=Er(["rule"]),ZR=Er(["group","image","rect"]);function Age(e,t){let n="";return Mge[t]||(e.x2&&(e.x?(ZR[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(ZR[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function nM(e){return(e+"").toLowerCase()}function Oge(e){return nM(e)==="operator"}function Nge(e){return nM(e)==="collect"}function Uh(e,t,n){n.endsWith(";")||(n="return("+n+");");const i=Function(...t.concat(n));return e&&e.functions?i.bind(e.functions):i}function Cge(e,t,n,i){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${i}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${i} : `}var Rge={operator:(e,t)=>Uh(e,["_"],t.code),parameter:(e,t)=>Uh(e,["datum","_"],t.code),event:(e,t)=>Uh(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return Uh(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:i}=t;let s="var o=item,datum=o.datum,m=0,$;";for(const l in i){const c="o["+be(l)+"]";s+=`$=${i[l].code};if(${c}!==$)${c}=$,m=1;`}return s+=Age(i,n),s+="return m;",Uh(e,["item","_"],s)},codegen:{get(e){const t=`[${e.map(be).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const i=(l,c)=>{const d=t[c];let f,u;return l.path?(f=`a${l.path}`,u=`b${l.path}`):((n=n||{})["f"+c]=l,f=`this.f${c}(a)`,u=`this.f${c}(b)`),Cge(f,u,-d,d)},s=Function("a","b","var u, v; return "+e.map(i).join("")+"0;");return n?s.bind(n):s}}};function Lge(e){const t=this;Oge(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function Pge(e){const t=this;if(e.params){const n=t.get(e.id);n||ce("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function Dge(e,t){t=t||{};const n=this;for(const i in e){const s=e[i];t[i]=fe(s)?s.map(l=>eL(l,n,t)):eL(s,n,t)}return t}function eL(e,t,n){if(!e||!Be(e))return e;for(let i=0,s=tL.length,l;i<s;++i)if(l=tL[i],Le(e,l.key))return l.parse(e,t,n);return e}var tL=[{key:"$ref",parse:$ge},{key:"$key",parse:zge},{key:"$expr",parse:Uge},{key:"$field",parse:jge},{key:"$encode",parse:Gge},{key:"$compare",parse:qge},{key:"$context",parse:Hge},{key:"$subflow",parse:Wge},{key:"$tupleid",parse:Vge}];function $ge(e,t){return t.get(e.$ref)||ce("Operator not defined: "+e.$ref)}function Uge(e,t,n){e.$params&&t.parseParameters(e.$params,n);const i="e:"+e.$expr.code;return t.fn[i]||(t.fn[i]=ts(t.parameterExpression(e.$expr),e.$fields))}function zge(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=L2(e.$key,e.$flat,t.expr.codegen))}function jge(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Yi(e.$field,e.$name,t.expr.codegen))}function qge(e,t){const n="c:"+e.$compare+"_"+e.$order,i=xe(e.$compare).map(s=>s&&s.$tupleid?Ce:s);return t.fn[n]||(t.fn[n]=C2(i,e.$order,t.expr.codegen))}function Gge(e,t){const n=e.$encode,i={};for(const s in n){const l=n[s];i[s]=ts(t.encodeExpression(l.$expr),l.$fields),i[s].output=l.$output}return i}function Hge(e,t){return t}function Wge(e,t){const n=e.$subflow;return function(i,s,l){const c=t.fork().parse(n),d=c.get(n.operators[0].id),f=c.signals.parent;return f&&f.set(l),d.detachSubflow=()=>t.detach(c),d}}function Vge(){return Ce}function Yge(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,i=e.stream!=null?t.get(e.stream):void 0,s;e.source?i=t.events(e.source,e.type,n):e.merge&&(s=e.merge.map(l=>t.get(l)),i=s[0].merge.apply(s[0],s.slice(1))),e.between&&(s=e.between.map(l=>t.get(l)),i=i.between(s[0],s[1])),e.filter&&(i=i.filter(n)),e.throttle!=null&&(i=i.throttle(+e.throttle)),e.debounce!=null&&(i=i.debounce(+e.debounce)),i==null&&ce("Invalid stream definition: "+JSON.stringify(e)),e.consume&&i.consume(!0),t.stream(e,i)}function Xge(e){var t=this,n=Be(n=e.source)?n.$ref:n,i=t.get(n),s=null,l=e.update,c=void 0;i||ce("Source not defined: "+e.source),s=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),l&&l.$expr&&(l.$params&&(c=t.parseParameters(l.$params)),l=t.handlerExpression(l.$expr)),t.update(e,i,s,l,c)}const Kge={skip:!0};function Jge(e){var t=this,n={};if(e.signals){var i=n.signals={};Object.keys(t.signals).forEach(l=>{const c=t.signals[l];e.signals(l,c)&&(i[l]=c.value)})}if(e.data){var s=n.data={};Object.keys(t.data).forEach(l=>{const c=t.data[l];e.data(l,c)&&(s[l]=c.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(l=>l.getState(e))),n}function Qge(e){var t=this,n=t.dataflow,i=e.data,s=e.signals;Object.keys(s||{}).forEach(l=>{n.update(t.signals[l],s[l],Kge)}),Object.keys(i||{}).forEach(l=>{n.pulse(t.data[l].input,n.changeset().remove(zs).insert(i[l]))}),(e.subcontext||[]).forEach((l,c)=>{const d=t.subcontext[c];d&&d.setState(l)})}function Zq(e,t,n,i){return new e7(e,t,n,i)}function e7(e,t,n,i){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=i||Rge,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function nL(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}e7.prototype=nL.prototype={fork(){const e=new nL(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,i=n.dataflow,s=e.value;if(n.set(e.id,t),Nge(e.type)&&s&&(s.$ingest?i.ingest(t,s.$ingest,s.$format):s.$request?i.preload(t,s.$request,s.$format):i.pulse(t,i.changeset().insert(s))),e.root&&(n.root=t),e.parent){let l=n.get(e.parent.$ref);l?(i.connect(l,[t]),t.targets().add(l)):(n.unresolved=n.unresolved||[]).push(()=>{l=n.get(e.parent.$ref),i.connect(l,[t]),t.targets().add(l)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const l in e.data){const c=n.data[l]||(n.data[l]={});e.data[l].forEach(d=>c[d]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[nM(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,i,s){this.dataflow.on(t,n,i,s,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:Ige,parseOperator:Lge,parseOperatorParameters:Pge,parseParameters:Dge,parseStream:Yge,parseUpdate:Xge,getState:Jge,setState:Qge};function Zge(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),t7(t,e.description()))}function t7(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function epe(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const dv="default";function tpe(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:dv,item:null}));e.on(e.events("view","mousemove"),t,(n,i)=>{const s=t.value,l=s?Se(s)?s:s.user:dv,c=i.item&&i.item.cursor||null;return s&&l===s.user&&c==s.item?s:{user:l,item:c}}),e.add(null,function(n){let i=n.cursor,s=this.value;return Se(i)||(s=i.item,i=i.user),kx(e,i&&i!==dv?i:s||i),s},{cursor:t})}function kx(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function o0(e,t){var n=e._runtime.data;return Le(n,t)||ce("Unrecognized data set: "+t),n[t]}function npe(e,t){return arguments.length<2?o0(this,e).values.value:JT.call(this,e,Gd().remove(zs).insert(t))}function JT(e,t){q5(t)||ce("Second argument to changes must be a changeset.");const n=o0(this,e);return n.modified=!0,this.pulse(n.input,t)}function ipe(e,t){return JT.call(this,e,Gd().insert(t))}function spe(e,t){return JT.call(this,e,Gd().remove(t))}function n7(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function i7(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function QT(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function rpe(e){var t=QT(e),n=n7(e),i=i7(e);e._renderer.background(e.background()),e._renderer.resize(n,i,t),e._handler.origin(t),e._resizeListeners.forEach(s=>{try{s(n,i)}catch(l){e.error(l)}})}function ape(e,t,n){var i=e._renderer,s=i&&i.canvas(),l,c,d;return s&&(d=QT(e),c=t.changedTouches?t.changedTouches[0]:t,l=qT(c,s),l[0]-=d[0],l[1]-=d[1]),t.dataflow=e,t.item=n,t.vega=ope(e,n,l),t}function ope(e,t,n){const i=t?t.mark.marktype==="group"?t:t.mark.group:null;function s(c){var d=i,f;if(c){for(f=t;f;f=f.mark.group)if(f.mark.name===c){d=f;break}}return d&&d.mark&&d.mark.interactive?d:{}}function l(c){if(!c)return n;Se(c)&&(c=s(c));const d=n.slice();for(;c;)d[0]-=c.x||0,d[1]-=c.y||0,c=c.mark&&c.mark.group;return d}return{view:ci(e),item:ci(t||{}),group:s,xy:l,x:c=>l(c)[0],y:c=>l(c)[1]}}const iL="view",lpe="timer",cpe="window",dpe={trap:!1};function fpe(e){const t=ot({defaults:{}},e),n=(i,s)=>{s.forEach(l=>{fe(i[l])&&(i[l]=Er(i[l]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function s7(e,t,n,i){e._eventListeners.push({type:n,sources:xe(t),handler:i})}function upe(e,t){var n=e._eventConfig.defaults,i=n.prevent,s=n.allow;return i===!1||s===!0?!1:i===!0||s===!1?!0:i?i[t]:s?!s[t]:e.preventDefault()}function Rm(e,t,n){const i=e._eventConfig&&e._eventConfig[t];return i===!1||Be(i)&&!i[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function hpe(e,t,n){var i=this,s=new FT(n),l=function(u,a){i.runAsync(null,()=>{e===iL&&upe(i,t)&&u.preventDefault(),s.receive(ape(i,u,a))})},c;if(e===lpe)Rm(i,"timer",t)&&i.timer(l,t);else if(e===iL)Rm(i,"view",t)&&i.addEventListener(t,l,dpe);else if(e===cpe?Rm(i,"window",t)&&typeof window<"u"&&(c=[window]):typeof document<"u"&&Rm(i,"selector",t)&&(c=Array.from(document.querySelectorAll(e))),!c)i.warn("Can not resolve event source: "+e);else{for(var d=0,f=c.length;d<f;++d)c[d].addEventListener(t,l);s7(i,c,t,l)}return s}function sL(e){return e.item}function rL(e){return e.item.mark.source}function aL(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function _pe(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","mouseover",sL),rL,aL(e)),this.on(this.events("view","mouseout",sL),rL,aL(t)),this}function gpe(){var e=this._tooltip,t=this._timers,n=this._eventListeners,i,s,l;for(i=t.length;--i>=0;)t[i].stop();for(i=n.length;--i>=0;)for(l=n[i],s=l.sources.length;--s>=0;)l.sources[s].removeEventListener(l.type,l.handler);return e&&e.call(this,this._handler,null,null,null),this}function ps(e,t,n){const i=document.createElement(e);for(const s in t)i.setAttribute(s,t[s]);return n!=null&&(i.textContent=n),i}const ppe="vega-bind",ype="vega-bind-name",mpe="vega-bind-radio";function wpe(e,t,n){if(!t)return;const i=n.param;let s=n.state;return s||(s=n.state={elements:null,active:!1,set:null,update:c=>{c!=e.signal(i.signal)&&e.runAsync(null,()=>{s.source=!0,e.signal(i.signal,c)})}},i.debounce&&(s.update=R2(i.debounce,s.update))),(i.input==null&&i.element?bpe:Epe)(s,t,i,e),s.active||(e.on(e._signals[i.signal],null,()=>{s.source?s.source=!1:s.set(e.signal(i.signal))}),s.active=!0),s}function bpe(e,t,n,i){const s=n.event||"input",l=()=>e.update(t.value);i.signal(n.signal,t.value),t.addEventListener(s,l),s7(i,t,s,l),e.set=c=>{t.value=c,t.dispatchEvent(Tpe(s))}}function Tpe(e){return typeof Event<"u"?new Event(e):{type:e}}function Epe(e,t,n,i){const s=i.signal(n.signal),l=ps("div",{class:ppe}),c=n.input==="radio"?l:l.appendChild(ps("label"));c.appendChild(ps("span",{class:ype},n.name||n.signal)),t.appendChild(l);let d=vpe;switch(n.input){case"checkbox":d=Spe;break;case"select":d=xpe;break;case"radio":d=kpe;break;case"range":d=Bpe;break}d(e,c,n,s)}function vpe(e,t,n,i){const s=ps("input");for(const l in n)l!=="signal"&&l!=="element"&&s.setAttribute(l==="input"?"type":l,n[l]);s.setAttribute("name",n.signal),s.value=i,t.appendChild(s),s.addEventListener("input",()=>e.update(s.value)),e.elements=[s],e.set=l=>s.value=l}function Spe(e,t,n,i){const s={type:"checkbox",name:n.signal};i&&(s.checked=!0);const l=ps("input",s);t.appendChild(l),l.addEventListener("change",()=>e.update(l.checked)),e.elements=[l],e.set=c=>l.checked=!!c||null}function xpe(e,t,n,i){const s=ps("select",{name:n.signal}),l=n.labels||[];n.options.forEach((c,d)=>{const f={value:c};l0(c,i)&&(f.selected=!0),s.appendChild(ps("option",f,(l[d]||c)+""))}),t.appendChild(s),s.addEventListener("change",()=>{e.update(n.options[s.selectedIndex])}),e.elements=[s],e.set=c=>{for(let d=0,f=n.options.length;d<f;++d)if(l0(n.options[d],c)){s.selectedIndex=d;return}}}function kpe(e,t,n,i){const s=ps("span",{class:mpe}),l=n.labels||[];t.appendChild(s),e.elements=n.options.map((c,d)=>{const f={type:"radio",name:n.signal,value:c};l0(c,i)&&(f.checked=!0);const u=ps("input",f);u.addEventListener("change",()=>e.update(c));const a=ps("label",{},(l[d]||c)+"");return a.prepend(u),s.appendChild(a),u}),e.set=c=>{const d=e.elements,f=d.length;for(let u=0;u<f;++u)l0(d[u].value,c)&&(d[u].checked=!0)}}function Bpe(e,t,n,i){i=i!==void 0?i:(+n.max+ +n.min)/2;const s=n.max!=null?n.max:Math.max(100,+i)||100,l=n.min||Math.min(0,s,+i)||0,c=n.step||Sl(l,s,100),d=ps("input",{type:"range",name:n.signal,min:l,max:s,step:c});d.value=i;const f=ps("span",{},+i);t.appendChild(d),t.appendChild(f);const u=()=>{f.textContent=d.value,e.update(+d.value)};d.addEventListener("input",u),d.addEventListener("change",u),e.elements=[d],e.set=a=>{d.value=a,f.textContent=a}}function l0(e,t){return e===t||e+""==t+""}function r7(e,t,n,i,s,l){return t=t||new i(e.loader()),t.initialize(n,n7(e),i7(e),QT(e),s,l).background(e.background())}function iM(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function Fpe(e,t,n,i){const s=new i(e.loader(),iM(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,QT(e),e);return t&&t.handlers().forEach(l=>{s.on(l.type,l.handler)}),s}function Ipe(e,t){const n=this,i=n._renderType,s=n._eventConfig.bind,l=GT(i);e=n._el=e?fv(n,e,!0):null,Zge(n),l||n.error("Unrecognized renderer type: "+i);const c=l.handler||Sp,d=e?l.renderer:l.headless;return n._renderer=d?r7(n,n._renderer,e,d):null,n._handler=Fpe(n,n._handler,e,c),n._redraw=!0,e&&s!=="none"&&(t=t?n._elBind=fv(n,t,!0):e.appendChild(ps("form",{class:"vega-bindings"})),n._bind.forEach(f=>{f.param.element&&s!=="container"&&(f.element=fv(n,f.param.element,!!f.param.input))}),n._bind.forEach(f=>{wpe(n,f.element||t,f)})),n}function fv(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(i){t=null,e.error(i)}return t}const zh=e=>+e||0,Mpe=e=>({top:e,bottom:e,left:e,right:e});function oL(e){return Be(e)?{top:zh(e.top),bottom:zh(e.bottom),left:zh(e.left),right:zh(e.right)}:Mpe(zh(e))}async function sM(e,t,n,i){const s=GT(t),l=s&&s.headless;return l||ce("Unrecognized renderer type: "+t),await e.runAsync(),r7(e,null,null,l,n,i).renderAsync(e._scenegraph.root)}async function Ape(e,t){e!==ol.Canvas&&e!==ol.SVG&&e!==ol.PNG&&ce("Unrecognized image type: "+e);const n=await sM(this,e,t);return e===ol.SVG?Ope(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function Ope(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function Npe(e,t){return(await sM(this,ol.Canvas,e,t)).canvas()}async function Cpe(e){return(await sM(this,ol.SVG,e)).svg()}function Rpe(e,t,n){return Zq(e,Fu,Sg,n).parse(t)}function Lpe(e){var t=this._runtime.scales;return Le(t,e)||ce("Unrecognized scale or projection: "+e),t[e].value}var a7="width",o7="height",rM="padding",lL={skip:!0};function l7(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===rM?i.left+i.right:0)}function c7(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===rM?i.top+i.bottom:0)}function Ppe(e){var t=e._signals,n=t[a7],i=t[o7],s=t[rM];function l(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,d=>{e._width=d.size,e._viewWidth=l7(e,d.size),l()},{size:n}),e._resizeHeight=e.add(null,d=>{e._height=d.size,e._viewHeight=c7(e,d.size),l()},{size:i});const c=e.add(null,l,{pad:s});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=i.rank+1,c.rank=s.rank+1}function Dpe(e,t,n,i,s,l){this.runAfter(c=>{let d=0;c._autosize=0,c.width()!==n&&(d=1,c.signal(a7,n,lL),c._resizeWidth.skip(!0)),c.height()!==i&&(d=1,c.signal(o7,i,lL),c._resizeHeight.skip(!0)),c._viewWidth!==e&&(c._resize=1,c._viewWidth=e),c._viewHeight!==t&&(c._resize=1,c._viewHeight=t),(c._origin[0]!==s[0]||c._origin[1]!==s[1])&&(c._resize=1,c._origin=s),d&&c.run("enter"),l&&c.runAfter(f=>f.resize())},!1,1)}function $pe(e){return this._runtime.getState(e||{data:Upe,signals:zpe,recurse:!0})}function Upe(e,t){return t.modified&&fe(t.input.value)&&e.indexOf("_:vega:_")}function zpe(e,t){return!(e==="parent"||t instanceof Fu.proxy)}function jpe(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function qpe(e,t){function n(i){e({timestamp:Date.now(),elapsed:i})}this._timers.push(cQ(n,t))}function Gpe(e,t,n,i){const s=e.element();s&&s.setAttribute("title",Hpe(i))}function Hpe(e){return e==null?"":fe(e)?d7(e):Be(e)&&!_l(e)?Wpe(e):e+""}function Wpe(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(fe(n)?d7(n):f7(n))}).join(`
`)}function d7(e){return"["+e.map(f7).join(", ")+"]"}function f7(e){return fe(e)?"[]":Be(e)&&!_l(e)?"{}":e}function u7(e,t){const n=this;if(t=t||{},Jf.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const l=ot({},e.locale,t.locale);n.locale(N5(l.number,l.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||ol.Canvas,n._scenegraph=new JF;const i=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||Gpe,n._redraw=!0,n._handler=new Sp().scene(i),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=fpe(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const s=Rpe(n,e,t.expr);n._runtime=s,n._signals=s.signals,n._bind=(e.bindings||[]).map(l=>({state:null,param:ot({},l)})),s.root&&s.root.set(i),i.source=s.data.root.input,n.pulse(s.data.root.input,n.changeset().insert(i.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=l7(n,n._width),n._viewHeight=c7(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,Ppe(n),epe(n),tpe(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind)}function Lm(e,t){return Le(e._signals,t)?e._signals[t]:ce("Unrecognized signal name: "+be(t))}function h7(e,t){const n=(e._targets||[]).filter(i=>i._update&&i._update.handler===t);return n.length?n[0]:null}function cL(e,t,n,i){let s=h7(n,i);return s||(s=iM(e,()=>i(t,n.value)),s.handler=i,e.on(n,null,s)),e}function dL(e,t,n){const i=h7(t,n);return i&&t._targets.remove(i),e}Te(u7,Jf,{async evaluate(e,t,n){if(await Jf.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,rpe(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(i){this.error(i)}return n&&uw(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&t7(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const i=Lm(this,e);return arguments.length===1?i.value:this.update(i,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",oL(e)):oL(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(GT(e)||ce("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(Jf.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(Lm(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:Dpe,addEventListener(e,t,n){let i=t;return n&&n.trap===!1||(i=iM(this,t),i.raw=t),this._handler.on(e,i),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),i=n.length,s,l;--i>=0;)if(l=n[i].type,s=n[i].handler,e===l&&(t===s||t===s.raw)){this._handler.off(l,s);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.indexOf(e)<0&&t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return cL(this,e,Lm(this,e),t)},removeSignalListener(e,t){return dL(this,Lm(this,e),t)},addDataListener(e,t){return cL(this,e,o0(this,e).values,t)},removeDataListener(e,t){return dL(this,o0(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=kx(this,null);this._globalCursor=!!e,t&&kx(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:qpe,events:hpe,finalize:gpe,hover:_pe,data:npe,change:JT,insert:ipe,remove:spe,scale:Lpe,initialize:Ipe,toImageURL:Ape,toCanvas:Npe,toSVG:Cpe,getState:$pe,setState:jpe});const Vpe="view",c0="[",d0="]",_7="{",g7="}",Ype=":",p7=",",Xpe="@",Kpe=">",Jpe=/[[\]{}]/,Qpe={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let y7,m7;function Jl(e,t,n){return y7=t||Vpe,m7=n||Qpe,w7(e.trim()).map(Bx)}function Zpe(e){return m7[e]}function U_(e,t,n,i,s){const l=e.length;let c=0,d;for(;t<l;++t){if(d=e[t],!c&&d===n)return t;s&&s.indexOf(d)>=0?--c:i&&i.indexOf(d)>=0&&++c}return t}function w7(e){const t=[],n=e.length;let i=0,s=0;for(;s<n;)s=U_(e,s,p7,c0+_7,d0+g7),t.push(e.substring(i,s).trim()),i=++s;if(t.length===0)throw"Empty event selector: "+e;return t}function Bx(e){return e[0]==="["?eye(e):tye(e)}function eye(e){const t=e.length;let n=1,i;if(n=U_(e,n,d0,c0,d0),n===t)throw"Empty between selector: "+e;if(i=w7(e.substring(1,n)),i.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==Kpe)throw"Expected '>' after between selector: "+e;i=i.map(Bx);const s=Bx(e.slice(1).trim());return s.between?{between:i,stream:s}:(s.between=i,s)}function tye(e){const t={source:y7},n=[];let i=[0,0],s=0,l=0,c=e.length,d=0,f,u;if(e[c-1]===g7){if(d=e.lastIndexOf(_7),d>=0){try{i=nye(e.substring(d+1,c-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,d).trim(),c=e.length}else throw"Unmatched right brace: "+e;d=0}if(!c)throw e;if(e[0]===Xpe&&(s=++d),f=U_(e,d,Ype),f<c&&(n.push(e.substring(l,f).trim()),l=d=++f),d=U_(e,d,c0),d===c)n.push(e.substring(l,c).trim());else if(n.push(e.substring(l,d).trim()),u=[],l=++d,l===c)throw"Unmatched left bracket: "+e;for(;d<c;){if(d=U_(e,d,d0),d===c)throw"Unmatched left bracket: "+e;if(u.push(e.substring(l,d).trim()),d<c-1&&e[++d]!==c0)throw"Expected left bracket: "+e;l=++d}if(!(c=n.length)||Jpe.test(n[c-1]))throw"Invalid event selector: "+e;return c>1?(t.type=n[1],s?t.markname=n[0].slice(1):Zpe(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),u!=null&&(t.filter=u),i[0]&&(t.throttle=i[0]),i[1]&&(t.debounce=i[1]),t}function nye(e){const t=e.split(p7);if(!e.length||t.length>2)throw e;return t.map(n=>{const i=+n;if(i!==i)throw e;return i})}function iye(e){return Be(e)?e:{type:e||"pad"}}const jh=e=>+e||0,sye=e=>({top:e,bottom:e,left:e,right:e});function rye(e){return Be(e)?e.signal?e:{top:jh(e.top),bottom:jh(e.bottom),left:jh(e.left),right:jh(e.right)}:sye(jh(e))}const An=e=>Be(e)&&!fe(e)?ot({},e):{value:e};function fL(e,t,n,i){return n!=null?(Be(n)&&!fe(n)||fe(n)&&n.length&&Be(n[0])?e.update[t]=n:e[i||"enter"][t]={value:n},1):0}function Gn(e,t,n){for(const i in t)fL(e,i,t[i]);for(const i in n)fL(e,i,n[i],"update")}function uh(e,t,n){for(const i in t)n&&Le(n,i)||(e[i]=ot(e[i]||{},t[i]));return e}function Mf(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const aM="mark",oM="frame",lM="scope",aye="axis",oye="axis-domain",lye="axis-grid",cye="axis-label",dye="axis-tick",fye="axis-title",uye="legend",hye="legend-band",_ye="legend-entry",gye="legend-gradient",b7="legend-label",pye="legend-symbol",yye="legend-title",mye="title",wye="title-text",bye="title-subtitle";function Tye(e,t,n,i,s){const l={},c={};let d,f,u,a;f="lineBreak",t==="text"&&s[f]!=null&&!Mf(f,e)&&uv(l,f,s[f]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),a=n===oM?s.group:n===aM?ot({},s.mark,s[t]):null;for(f in a)u=Mf(f,e)||(f==="fill"||f==="stroke")&&(Mf("fill",e)||Mf("stroke",e)),u||uv(l,f,a[f]);xe(i).forEach(m=>{const w=s.style&&s.style[m];for(const y in w)Mf(y,e)||uv(l,y,w[y])}),e=ot({},e);for(f in l)a=l[f],a.signal?(d=d||{})[f]=a:c[f]=a;return e.enter=ot(c,e.enter),d&&(e.update=ot(d,e.update)),e}function uv(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const T7=e=>Se(e)?be(e):e.signal?`(${e.signal})`:E7(e);function ZT(e){if(e.gradient!=null)return vye(e);let t=e.signal?`(${e.signal})`:e.color?Eye(e.color):e.field!=null?E7(e.field):e.value!==void 0?be(e.value):void 0;return e.scale!=null&&(t=Sye(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${xw(e.exponent)})`),e.mult!=null&&(t+=`*${xw(e.mult)}`),e.offset!=null&&(t+=`+${xw(e.offset)}`),e.round&&(t=`round(${t})`),t}const Pm=(e,t,n,i)=>`(${e}(${[t,n,i].map(ZT).join(",")})+'')`;function Eye(e){return e.c?Pm("hcl",e.h,e.c,e.l):e.h||e.s?Pm("hsl",e.h,e.s,e.l):e.l||e.a?Pm("lab",e.l,e.a,e.b):e.r||e.g||e.b?Pm("rgb",e.r,e.g,e.b):null}function vye(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:be(n));for(;t.length&&wt(t)==null;)t.pop();return t.unshift(T7(e.gradient)),`gradient(${t.join(",")})`}function xw(e){return Be(e)?"("+ZT(e)+")":e}function E7(e){return v7(Be(e)?e:{datum:e})}function v7(e){let t,n,i;if(e.signal)t="datum",i=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(i=e.parent,t+=".datum"):i=e.group}else e.datum?(t="datum",i=e.datum):ce("Invalid field reference: "+be(e));return e.signal||(i=Se(i)?Oa(i).map(be).join("]["):v7(i)),t+"["+i+"]"}function Sye(e,t){const n=T7(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+xw(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function xye(e){let t="";return e.forEach(n=>{const i=ZT(n);t+=n.test?`(${n.test})?${i}:`:i}),wt(t)===":"&&(t+="null"),t}function S7(e,t,n,i,s,l){const c={};l=l||{},l.encoders={$encode:c},e=Tye(e,t,n,i,s.config);for(const d in e)c[d]=kye(e[d],t,l,s);return l}function kye(e,t,n,i){const s={},l={};for(const c in e)e[c]!=null&&(s[c]=Fye(Bye(e[c]),i,n,l));return{$expr:{marktype:t,channels:s},$fields:Object.keys(l),$output:Object.keys(e)}}function Bye(e){return fe(e)?xye(e):ZT(e)}function Fye(e,t,n,i){const s=Sa(e,t);return s.$fields.forEach(l=>i[l]=1),ot(n,s.$params),s.$expr}const Iye="outer",Mye=["value","update","init","react","bind"];function uL(e,t){ce(e+' for "outer" push: '+be(t))}function x7(e,t){const n=e.name;if(e.push===Iye)t.signals[n]||uL("No prior signal definition",n),Mye.forEach(i=>{e[i]!==void 0&&uL("Invalid property ",i)});else{const i=t.addSignal(n,e.value);e.react===!1&&(i.react=!1),e.bind&&t.addBinding(n,e.bind)}}function Fx(e,t,n,i){this.id=-1,this.type=e,this.value=t,this.params=n,i&&(this.parent=i)}function e1(e,t,n,i){return new Fx(e,t,n,i)}function f0(e,t){return e1("operator",e,t)}function Ne(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function xg(e,t){return t?{$field:e,$name:t}:{$field:e}}const Ix=xg("key");function hL(e,t){return{$compare:e,$order:t}}function Aye(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const Oye="ascending",Nye="descending";function Cye(e){return Be(e)?(e.order===Nye?"-":"+")+t1(e.op,e.field):""}function t1(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const cM="scope",Mx="view";function Tn(e){return e&&e.signal}function Rye(e){return e&&e.expr}function kw(e){if(Tn(e))return!0;if(Be(e)){for(const t in e)if(kw(e[t]))return!0}return!1}function nr(e,t){return e??t}function Kc(e){return e&&e.signal||e}const _L="timer";function kg(e,t){return(e.merge?Pye:e.stream?Dye:e.type?$ye:ce("Invalid stream specification: "+be(e)))(e,t)}function Lye(e){return e===cM?Mx:e||Mx}function Pye(e,t){const n=e.merge.map(s=>kg(s,t)),i=dM({merge:n},e,t);return t.addStream(i).id}function Dye(e,t){const n=kg(e.stream,t),i=dM({stream:n},e,t);return t.addStream(i).id}function $ye(e,t){let n;e.type===_L?(n=t.event(_L,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(Lye(e.source),e.type);const i=dM({stream:n},e,t);return Object.keys(i).length===1?n:t.addStream(i).id}function dM(e,t,n){let i=t.between;return i&&(i.length!==2&&ce('Stream "between" parameter must have 2 entries: '+be(t)),e.between=[kg(i[0],n),kg(i[1],n)]),i=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&i.push(Uye(t.marktype,t.markname,t.markrole)),t.source===cM&&i.push("inScope(event.item)"),i.length&&(e.filter=Sa("("+i.join(")&&(")+")",n).$expr),(i=t.throttle)!=null&&(e.throttle=+i),(i=t.debounce)!=null&&(e.debounce=+i),t.consume&&(e.consume=!0),e}function Uye(e,t,n){const i="event.item";return i+(e&&e!=="*"?"&&"+i+".mark.marktype==='"+e+"'":"")+(n?"&&"+i+".mark.role==='"+n+"'":"")+(t?"&&"+i+".mark.name==='"+t+"'":"")}const zye={code:"_.$value",ast:{type:"Identifier",value:"value"}};function jye(e,t,n){const i=e.encode,s={target:n};let l=e.events,c=e.update,d=[];l||ce("Signal update missing events specification."),Se(l)&&(l=Jl(l,t.isSubscope()?cM:Mx)),l=xe(l).filter(f=>f.signal||f.scale?(d.push(f),0):1),d.length>1&&(d=[Gye(d)]),l.length&&d.push(l.length>1?{merge:l}:l[0]),i!=null&&(c&&ce("Signal encode and update are mutually exclusive."),c="encode(item(),"+be(i)+")"),s.update=Se(c)?Sa(c,t):c.expr!=null?Sa(c.expr,t):c.value!=null?c.value:c.signal!=null?{$expr:zye,$params:{$value:t.signalRef(c.signal)}}:ce("Invalid signal update specification."),e.force&&(s.options={force:!0}),d.forEach(f=>t.addUpdate(ot(qye(f,t),s)))}function qye(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):kg(e,t)}}function Gye(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function Hye(e,t){const n=t.getSignal(e.name);let i=e.update;e.init&&(i?ce("Signals can not include both init and update expressions."):(i=e.init,n.initonly=!0)),i&&(i=Sa(i,t),n.update=i.$expr,n.params=i.$params),e.on&&e.on.forEach(s=>jye(s,t,n.id))}const Ut=e=>(t,n,i)=>e1(e,n,t||void 0,i),k7=Ut("aggregate"),Wye=Ut("axisticks"),B7=Ut("bound"),Mr=Ut("collect"),gL=Ut("compare"),Vye=Ut("datajoin"),F7=Ut("encode"),Yye=Ut("expression"),Xye=Ut("facet"),Kye=Ut("field"),Jye=Ut("key"),Qye=Ut("legendentries"),Zye=Ut("load"),eme=Ut("mark"),tme=Ut("multiextent"),nme=Ut("multivalues"),ime=Ut("overlap"),sme=Ut("params"),I7=Ut("prefacet"),rme=Ut("projection"),ame=Ut("proxy"),ome=Ut("relay"),M7=Ut("render"),lme=Ut("scale"),Vd=Ut("sieve"),cme=Ut("sortitems"),A7=Ut("viewlayout"),dme=Ut("values");let fme=0;const O7={min:"min",max:"max",count:"sum"};function ume(e,t){const n=e.type||"linear";kz(n)||ce("Unrecognized scale type: "+be(n)),t.addScale(e.name,{type:n,domain:void 0})}function hme(e,t){const n=t.getScale(e.name).params;let i;n.domain=N7(e.domain,e,t),e.range!=null&&(n.range=R7(e,t,n)),e.interpolate!=null&&vme(e.interpolate,n),e.nice!=null&&(n.nice=Eme(e.nice)),e.bins!=null&&(n.bins=Tme(e.bins,t));for(i in e)Le(n,i)||i==="name"||(n[i]=As(e[i],t))}function As(e,t){return Be(e)?e.signal?t.signalRef(e.signal):ce("Unsupported object: "+be(e)):e}function Bw(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>As(n,t))}function n1(e){ce("Can not find data set: "+be(e))}function N7(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&ce("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(fe(e)?_me:e.fields?pme:gme)(e,t,n)}function _me(e,t,n){return e.map(i=>As(i,n))}function gme(e,t,n){const i=n.getData(e.data);return i||n1(e.data),Au(t.type)?i.valuesRef(n,e.field,C7(e.sort,!1)):Iz(t.type)?i.domainRef(n,e.field):i.extentRef(n,e.field)}function pme(e,t,n){const i=e.data,s=e.fields.reduce((l,c)=>(c=Se(c)?{data:i,field:c}:fe(c)||c.signal?yme(c,n):c,l.push(c),l),[]);return(Au(t.type)?mme:Iz(t.type)?wme:bme)(e,n,s)}function yme(e,t){const n="_:vega:_"+fme++,i=Mr({});if(fe(e))i.value={$ingest:e};else if(e.signal){const s="setdata("+be(n)+","+e.signal+")";i.params.input=t.signalRef(s)}return t.addDataPipeline(n,[i,Vd({})]),{data:n,field:"data"}}function mme(e,t,n){const i=C7(e.sort,!0);let s,l;const c=n.map(u=>{const a=t.getData(u.data);return a||n1(u.data),a.countsRef(t,u.field,i)}),d={groupby:Ix,pulse:c};i&&(s=i.op||"count",l=i.field?t1(s,i.field):"count",d.ops=[O7[s]],d.fields=[t.fieldRef(l)],d.as=[l]),s=t.add(k7(d));const f=t.add(Mr({pulse:Ne(s)}));return l=t.add(dme({field:Ix,sort:t.sortRef(i),pulse:Ne(f)})),Ne(l)}function C7(e,t){return e&&(!e.field&&!e.op?Be(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?ce("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!O7[e.op]&&ce("Multiple domain scales can not be sorted using "+e.op)),e}function wme(e,t,n){const i=n.map(s=>{const l=t.getData(s.data);return l||n1(s.data),l.domainRef(t,s.field)});return Ne(t.add(nme({values:i})))}function bme(e,t,n){const i=n.map(s=>{const l=t.getData(s.data);return l||n1(s.data),l.extentRef(t,s.field)});return Ne(t.add(tme({extents:i})))}function Tme(e,t){return e.signal||fe(e)?Bw(e,t):t.objectProperty(e)}function Eme(e){return Be(e)?{interval:As(e.interval),step:As(e.step)}:As(e)}function vme(e,t){t.interpolate=As(e.type||e),e.gamma!=null&&(t.interpolateGamma=As(e.gamma))}function R7(e,t,n){const i=t.config.range;let s=e.range;if(s.signal)return t.signalRef(s.signal);if(Se(s)){if(i&&Le(i,s))return e=ot({},e,{range:i[s]}),R7(e,t,n);s==="width"?s=[0,{signal:"width"}]:s==="height"?s=Au(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:ce("Unrecognized scale range value: "+be(s))}else if(s.scheme){n.scheme=fe(s.scheme)?Bw(s.scheme,t):As(s.scheme,t),s.extent&&(n.schemeExtent=Bw(s.extent,t)),s.count&&(n.schemeCount=As(s.count,t));return}else if(s.step){n.rangeStep=As(s.step,t);return}else{if(Au(e.type)&&!fe(s))return N7(s,e,t);fe(s)||ce("Unsupported range type: "+be(s))}return s.map(l=>(fe(l)?Bw:As)(l,t))}function Sme(e,t){const n=t.config.projection||{},i={};for(const s in e)s!=="name"&&(i[s]=Ax(e[s],s,t));for(const s in n)i[s]==null&&(i[s]=Ax(n[s],s,t));t.addProjection(e.name,i)}function Ax(e,t,n){return fe(e)?e.map(i=>Ax(i,t,n)):Be(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:ce("Unsupported parameter object: "+be(e)):e}const Ar="top",hh="left",_h="right",Nl="bottom",L7="center",xme="vertical",kme="start",Bme="middle",Fme="end",Ox="index",fM="label",Ime="offset",Pu="perc",Mme="perc2",Rs="value",Ip="guide-label",uM="guide-title",Ame="group-title",Ome="group-subtitle",pL="symbol",Fw="gradient",Nx="discrete",Cx="size",Nme="shape",Cme="fill",Rme="stroke",Lme="strokeWidth",Pme="strokeDash",Dme="opacity",hM=[Cx,Nme,Cme,Rme,Lme,Pme,Dme],Mp={name:1,style:1,interactive:1},Et={value:0},Ls={value:1},i1="group",P7="rect",_M="rule",$me="symbol",Yd="text";function Bg(e){return e.type=i1,e.interactive=e.interactive||!1,e}function ns(e,t){const n=(i,s)=>nr(e[i],nr(t[i],s));return n.isVertical=i=>xme===nr(e.direction,t.direction||(i?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>nr(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>nr(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>nr(e.columns,nr(t.columns,+n.isVertical(!0))),n}function D7(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function Ume(e,t,n){const i=t.config.style[n];return i&&i[e]}function s1(e,t,n){return`item.anchor === '${kme}' ? ${e} : item.anchor === '${Fme}' ? ${t} : ${n}`}const gM=s1(be(hh),be(_h),be(L7));function zme(e){const t=e("tickBand");let n=e("tickOffset"),i,s;return t?t.signal?(i={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},s={signal:`(${t.signal}) === 'extent'`},Be(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(i=1,s=!0,n=0):(i=.5,s=!1):(i=e("bandPosition"),s=e("tickExtra")),{extra:s,band:i,offset:n}}function $7(e,t){return t?e?Be(e)?Object.assign({},e,{offset:$7(e.offset,t)}):{value:e,offset:t}:t:e}function Ts(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=uh(e.encode,t,Mp)):e.interactive=!1,e}function jme(e,t,n,i){const s=ns(e,n),l=s.isVertical(),c=s.gradientThickness(),d=s.gradientLength();let f,u,a,m,w;l?(u=[0,1],a=[0,0],m=c,w=d):(u=[0,0],a=[1,0],m=d,w=c);const y={enter:f={opacity:Et,x:Et,y:Et,width:An(m),height:An(w)},update:ot({},f,{opacity:Ls,fill:{gradient:t,start:u,stop:a}}),exit:{opacity:Et}};return Gn(y,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),Ts({type:P7,role:gye,encode:y},i)}function qme(e,t,n,i,s){const l=ns(e,n),c=l.isVertical(),d=l.gradientThickness(),f=l.gradientLength();let u,a,m,w,y="";c?(u="y",m="y2",a="x",w="width",y="1-"):(u="x",m="x2",a="y",w="height");const o={opacity:Et,fill:{scale:t,field:Rs}};o[u]={signal:y+"datum."+Pu,mult:f},o[a]=Et,o[m]={signal:y+"datum."+Mme,mult:f},o[w]=An(d);const T={enter:o,update:ot({},o,{opacity:Ls}),exit:{opacity:Et}};return Gn(T,{stroke:l("gradientStrokeColor"),strokeWidth:l("gradientStrokeWidth")},{opacity:l("gradientOpacity")}),Ts({type:P7,role:hye,key:Rs,from:s,encode:T},i)}const Gme=`datum.${Pu}<=0?"${hh}":datum.${Pu}>=1?"${_h}":"${L7}"`,Hme=`datum.${Pu}<=0?"${Nl}":datum.${Pu}>=1?"${Ar}":"${Bme}"`;function yL(e,t,n,i){const s=ns(e,t),l=s.isVertical(),c=An(s.gradientThickness()),d=s.gradientLength();let f=s("labelOverlap"),u,a,m,w,y="";const o={enter:u={opacity:Et},update:a={opacity:Ls,text:{field:fM}},exit:{opacity:Et}};return Gn(o,{fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:nr(e.labelLimit,t.gradientLabelLimit)}),l?(u.align={value:"left"},u.baseline=a.baseline={signal:Hme},m="y",w="x",y="1-"):(u.align=a.align={signal:Gme},u.baseline={value:"top"},m="x",w="y"),u[m]=a[m]={signal:y+"datum."+Pu,mult:d},u[w]=a[w]=c,c.offset=nr(e.labelOffset,t.gradientLabelOffset)||0,f=f?{separation:s("labelSeparation"),method:f,order:"datum."+Ox}:void 0,Ts({type:Yd,role:b7,style:Ip,key:Rs,from:i,encode:o,overlap:f},n)}function Wme(e,t,n,i,s){const l=ns(e,t),c=n.entries,d=!!(c&&c.interactive),f=c?c.name:void 0,u=l("clipHeight"),a=l("symbolOffset"),m={data:"value"},w=`(${s}) ? datum.${Ime} : datum.${Cx}`,y=u?An(u):{field:Cx},o=`datum.${Ox}`,T=`max(1, ${s})`;let b,S,x,k,I;y.mult=.5,b={enter:S={opacity:Et,x:{signal:w,mult:.5,offset:a},y},update:x={opacity:Ls,x:S.x,y:S.y},exit:{opacity:Et}};let B=null,O=null;e.fill||(B=t.symbolBaseFillColor,O=t.symbolBaseStrokeColor),Gn(b,{fill:l("symbolFillColor",B),shape:l("symbolType"),size:l("symbolSize"),stroke:l("symbolStrokeColor",O),strokeDash:l("symbolDash"),strokeDashOffset:l("symbolDashOffset"),strokeWidth:l("symbolStrokeWidth")},{opacity:l("symbolOpacity")}),hM.forEach(D=>{e[D]&&(x[D]=S[D]={scale:e[D],field:Rs})});const A=Ts({type:$me,role:pye,key:Rs,from:m,clip:u?!0:void 0,encode:b},n.symbols),R=An(a);R.offset=l("labelOffset"),b={enter:S={opacity:Et,x:{signal:w,offset:R},y},update:x={opacity:Ls,text:{field:fM},x:S.x,y:S.y},exit:{opacity:Et}},Gn(b,{align:l("labelAlign"),baseline:l("labelBaseline"),fill:l("labelColor"),fillOpacity:l("labelOpacity"),font:l("labelFont"),fontSize:l("labelFontSize"),fontStyle:l("labelFontStyle"),fontWeight:l("labelFontWeight"),limit:l("labelLimit")});const P=Ts({type:Yd,role:b7,style:Ip,key:Rs,from:m,encode:b},n.labels);return b={enter:{noBound:{value:!u},width:Et,height:u?An(u):Et,opacity:Et},exit:{opacity:Et},update:x={opacity:Ls,row:{signal:null},column:{signal:null}}},l.isVertical(!0)?(k=`ceil(item.mark.items.length / ${T})`,x.row.signal=`${o}%${k}`,x.column.signal=`floor(${o} / ${k})`,I={field:["row",o]}):(x.row.signal=`floor(${o} / ${T})`,x.column.signal=`${o} % ${T}`,I={field:o}),x.column.signal=`(${s})?${x.column.signal}:${o}`,i={facet:{data:i,name:"value",groupby:Ox}},Bg({role:lM,from:i,encode:uh(b,c,Mp),marks:[A,P],name:f,interactive:d,sort:I})}function Vme(e,t){const n=ns(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const pM='item.orient === "left"',yM='item.orient === "right"',r1=`(${pM} || ${yM})`,Yme=`datum.vgrad && ${r1}`,Xme=s1('"top"','"bottom"','"middle"'),Kme=s1('"right"','"left"','"center"'),Jme=`datum.vgrad && ${yM} ? (${Kme}) : (${r1} && !(datum.vgrad && ${pM})) ? "left" : ${gM}`,Qme=`item._anchor || (${r1} ? "middle" : "start")`,Zme=`${Yme} ? (${pM} ? -90 : 90) : 0`,ewe=`${r1} ? (datum.vgrad ? (${yM} ? "bottom" : "top") : ${Xme}) : "top"`;function twe(e,t,n,i){const s=ns(e,t),l={enter:{opacity:Et},update:{opacity:Ls,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Et}};return Gn(l,{orient:s("titleOrient"),_anchor:s("titleAnchor"),anchor:{signal:Qme},angle:{signal:Zme},align:{signal:Jme},baseline:{signal:ewe},text:e.title,fill:s("titleColor"),fillOpacity:s("titleOpacity"),font:s("titleFont"),fontSize:s("titleFontSize"),fontStyle:s("titleFontStyle"),fontWeight:s("titleFontWeight"),limit:s("titleLimit"),lineHeight:s("titleLineHeight")},{align:s("titleAlign"),baseline:s("titleBaseline")}),Ts({type:Yd,role:yye,style:uM,from:i,encode:l},n)}function nwe(e,t){let n;return Be(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+mL(e.path)+")":e.sphere&&(n="geoShape("+mL(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function mL(e){return Be(e)&&e.signal?e.signal:be(e)}function U7(e){const t=e.role||"";return!t.indexOf("axis")||!t.indexOf("legend")||!t.indexOf("title")?t:e.type===i1?lM:t||aM}function iwe(e){return{marktype:e.type,name:e.name||void 0,role:e.role||U7(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function swe(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function mM(e,t){const n=W5(e.type);n||ce("Unrecognized transform type: "+be(e.type));const i=e1(n.type.toLowerCase(),null,z7(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(i)),i.metadata=n.metadata||{},i}function z7(e,t,n){const i={},s=e.params.length;for(let l=0;l<s;++l){const c=e.params[l];i[c.name]=rwe(c,t,n)}return i}function rwe(e,t,n){const i=e.type,s=t[e.name];if(i==="index")return awe(e,t,n);if(s===void 0){e.required&&ce("Missing required "+be(t.type)+" parameter: "+be(e.name));return}else{if(i==="param")return owe(e,t,n);if(i==="projection")return n.projectionRef(t[e.name])}return e.array&&!Tn(s)?s.map(l=>wL(e,l,n)):wL(e,s,n)}function wL(e,t,n){const i=e.type;if(Tn(t))return TL(i)?ce("Expression references can not be signals."):hv(i)?n.fieldRef(t):EL(i)?n.compareRef(t):n.signalRef(t.signal);{const s=e.expr||hv(i);return s&&lwe(t)?n.exprRef(t.expr,t.as):s&&cwe(t)?xg(t.field,t.as):TL(i)?Sa(t,n):dwe(i)?Ne(n.getData(t).values):hv(i)?xg(t):EL(i)?n.compareRef(t):t}}function awe(e,t,n){return Se(t.from)||ce('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function owe(e,t,n){const i=t[e.name];return e.array?(fe(i)||ce("Expected an array of sub-parameters. Instead: "+be(i)),i.map(s=>bL(e,s,n))):bL(e,i,n)}function bL(e,t,n){const i=e.params.length;let s;for(let c=0;c<i;++c){s=e.params[c];for(const d in s.key)if(s.key[d]!==t[d]){s=null;break}if(s)break}s||ce("Unsupported parameter: "+be(t));const l=ot(z7(s,t,n),s.key);return Ne(n.add(sme(l)))}const lwe=e=>e&&e.expr,cwe=e=>e&&e.field,dwe=e=>e==="data",TL=e=>e==="expr",hv=e=>e==="field",EL=e=>e==="compare";function fwe(e,t,n){let i,s,l,c,d;return e?(i=e.facet)&&(t||ce("Only group marks can be faceted."),i.field!=null?c=d=Iw(i,n):(e.data?d=Ne(n.getData(e.data).aggregate):(l=mM(ot({type:"aggregate",groupby:xe(i.groupby)},i.aggregate),n),l.params.key=n.keyRef(i.groupby),l.params.pulse=Iw(i,n),c=d=Ne(n.add(l))),s=n.keyRef(i.groupby,!0))):c=Ne(n.add(Mr(null,[{}]))),c||(c=Iw(e,n)),{key:s,pulse:c,parent:d}}function Iw(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Ne(t.getData(e.data).output)}function pd(e,t,n,i,s){this.scope=e,this.input=t,this.output=n,this.values=i,this.aggregate=s,this.index={}}pd.fromEntries=function(e,t){const n=t.length,i=t[n-1],s=t[n-2];let l=t[0],c=null,d=1;for(l&&l.type==="load"&&(l=t[1]),e.add(t[0]);d<n;++d)t[d].params.pulse=Ne(t[d-1]),e.add(t[d]),t[d].type==="aggregate"&&(c=t[d]);return new pd(e,l,s,i,c)};function j7(e){return Se(e)?e:null}function vL(e,t,n){const i=t1(n.op,n.field);let s;if(t.ops){for(let l=0,c=t.as.length;l<c;++l)if(t.as[l]===i)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((s=n.op.signal)?e.signalRef(s):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(i))}function qh(e,t,n,i,s,l,c){const d=t[n]||(t[n]={}),f=Cye(l);let u=j7(s),a,m;if(u!=null&&(e=t.scope,u=u+(f?"|"+f:""),a=d[u]),!a){const w=l?{field:Ix,pulse:t.countsRef(e,s,l)}:{field:e.fieldRef(s),pulse:Ne(t.output)};f&&(w.sort=e.sortRef(l)),m=e.add(e1(i,void 0,w)),c&&(t.index[s]=m),a=Ne(m),u!=null&&(d[u]=a)}return a}pd.prototype={countsRef(e,t,n){const i=this,s=i.counts||(i.counts={}),l=j7(t);let c,d,f;return l!=null&&(e=i.scope,c=s[l]),c?n&&n.field&&vL(e,c.agg.params,n):(f={groupby:e.fieldRef(t,"key"),pulse:Ne(i.output)},n&&n.field&&vL(e,f,n),d=e.add(k7(f)),c=e.add(Mr({pulse:Ne(d)})),c={agg:d,ref:Ne(c)},l!=null&&(s[l]=c)),c.ref},tuplesRef(){return Ne(this.values)},extentRef(e,t){return qh(e,this,"extent","extent",t,!1)},domainRef(e,t){return qh(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return qh(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return qh(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return qh(e,this,"indata","tupleindex",t,!0,!0)}};function uwe(e,t,n){const i=e.from.facet,s=i.name,l=Iw(i,t);let c;i.name||ce("Facet must have a name: "+be(i)),i.data||ce("Facet must reference a data set: "+be(i)),i.field?c=t.add(I7({field:t.fieldRef(i.field),pulse:l})):i.groupby?c=t.add(Xye({key:t.keyRef(i.groupby),group:Ne(t.proxy(n.parent)),pulse:l})):ce("Facet must specify groupby or field: "+be(i));const d=t.fork(),f=d.add(Mr()),u=d.add(Vd({pulse:Ne(f)}));d.addData(s,new pd(d,f,f,u)),d.addSignal("parent",null),c.params.subflow={$subflow:d.parse(e).toRuntime()}}function hwe(e,t,n){const i=t.add(I7({pulse:n.pulse})),s=t.fork();s.add(Vd()),s.addSignal("parent",null),i.params.subflow={$subflow:s.parse(e).toRuntime()}}function q7(e,t,n){const i=e.remove,s=e.insert,l=e.toggle,c=e.modify,d=e.values,f=t.add(f0()),u="if("+e.trigger+',modify("'+n+'",'+[s,i,l,c,d].map(m=>m??"null").join(",")+"),0)",a=Sa(u,t);f.update=a.$expr,f.params=a.$params}function a1(e,t){const n=U7(e),i=e.type===i1,s=e.from&&e.from.facet,l=e.overlap;let c=e.layout||n===lM||n===oM,d,f,u,a,m,w,y;const o=n===aM||c||s,T=fwe(e.from,i,t);f=t.add(Vye({key:T.key||(e.key?xg(e.key):void 0),pulse:T.pulse,clean:!i}));const b=Ne(f);f=u=t.add(Mr({pulse:b})),f=t.add(eme({markdef:iwe(e),interactive:swe(e.interactive,t),clip:nwe(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Ne(f)}));const S=Ne(f);f=a=t.add(F7(S7(e.encode,e.type,n,e.style,t,{mod:!1,pulse:S}))),f.params.parent=t.encode(),e.transform&&e.transform.forEach(O=>{const A=mM(O,t),R=A.metadata;(R.generates||R.changes)&&ce("Mark transforms should not generate new data."),R.nomod||(a.params.mod=!0),A.params.pulse=Ne(f),t.add(f=A)}),e.sort&&(f=t.add(cme({sort:t.compareRef(e.sort),pulse:Ne(f)})));const x=Ne(f);(s||c)&&(c=t.add(A7({layout:t.objectProperty(e.layout),legends:t.legends,mark:S,pulse:x})),w=Ne(c));const k=t.add(B7({mark:S,pulse:w||x}));y=Ne(k),i&&(o&&(d=t.operators,d.pop(),c&&d.pop()),t.pushState(x,w||y,b),s?uwe(e,t,T):o?hwe(e,t,T):t.parse(e),t.popState(),o&&(c&&d.push(c),d.push(k))),l&&(y=_we(l,y,t));const I=t.add(M7({pulse:y})),B=t.add(Vd({pulse:Ne(I)},void 0,t.parent()));e.name!=null&&(m=e.name,t.addData(m,new pd(t,u,I,B)),e.on&&e.on.forEach(O=>{(O.insert||O.remove||O.toggle)&&ce("Marks only support modify triggers."),q7(O,t,m)}))}function _we(e,t,n){const i=e.method,s=e.bound,l=e.separation,c={separation:Tn(l)?n.signalRef(l.signal):l,method:Tn(i)?n.signalRef(i.signal):i,pulse:t};if(e.order&&(c.sort=n.compareRef({field:e.order})),s){const d=s.tolerance;c.boundTolerance=Tn(d)?n.signalRef(d.signal):+d,c.boundScale=n.scaleRef(s.scale),c.boundOrient=s.orient}return Ne(n.add(ime(c)))}function gwe(e,t){const n=t.config.legend,i=e.encode||{},s=ns(e,n),l=i.legend||{},c=l.name||void 0,d=l.interactive,f=l.style,u={};let a=0,m,w,y;hM.forEach(k=>e[k]?(u[k]=e[k],a=a||e[k]):0),a||ce("Missing valid scale for legend.");const o=pwe(e,t.scaleType(a)),T={title:e.title!=null,scales:u,type:o,vgrad:o!=="symbol"&&s.isVertical()},b=Ne(t.add(Mr(null,[T]))),S={enter:{x:{value:0},y:{value:0}}},x=Ne(t.add(Qye(w={type:o,scale:t.scaleRef(a),count:t.objectProperty(s("tickCount")),limit:t.property(s("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return o===Fw?(y=[jme(e,a,n,i.gradient),yL(e,n,i.labels,x)],w.count=w.count||t.signalRef(`max(2,2*floor((${Kc(s.gradientLength())})/100))`)):o===Nx?y=[qme(e,a,n,i.gradient,x),yL(e,n,i.labels,x)]:(m=Vme(e,n),y=[Wme(e,n,i,x,Kc(m.columns))],w.size=wwe(e,t,y[0].marks)),y=[Bg({role:_ye,from:b,encode:S,marks:y,layout:m,interactive:d})],T.title&&y.push(twe(e,n,i.title,b)),a1(Bg({role:uye,from:b,encode:uh(mwe(s,e,n),l,Mp),marks:y,aria:s("aria"),description:s("description"),zindex:s("zindex"),name:c,interactive:d,style:f}),t)}function pwe(e,t){let n=e.type||pL;return!e.type&&ywe(e)===1&&(e.fill||e.stroke)&&(n=kF(t)?Fw:YS(t)?Nx:pL),n!==Fw?n:YS(t)?Nx:Fw}function ywe(e){return hM.reduce((t,n)=>t+(e[n]?1:0),0)}function mwe(e,t,n){const i={enter:{},update:{}};return Gn(i,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),i}function wwe(e,t,n){const i=Kc(SL("size",e,n)),s=Kc(SL("strokeWidth",e,n)),l=Kc(bwe(n[1].encode,t,Ip));return Sa(`max(ceil(sqrt(${i})+${s}),${l})`,t)}function SL(e,t,n){return t[e]?`scale("${t[e]}",datum)`:D7(e,n[0].encode)}function bwe(e,t,n){return D7("fontSize",e)||Ume("fontSize",t,n)}const Twe=`item.orient==="${hh}"?-90:item.orient==="${_h}"?90:0`;function Ewe(e,t){e=Se(e)?{text:e}:e;const n=ns(e,t.config.title),i=e.encode||{},s=i.group||{},l=s.name||void 0,c=s.interactive,d=s.style,f=[],u={},a=Ne(t.add(Mr(null,[u])));return f.push(xwe(e,n,vwe(e),a)),e.subtitle&&f.push(kwe(e,n,i.subtitle,a)),a1(Bg({role:mye,from:a,encode:Swe(n,s),marks:f,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:l,interactive:c,style:d}),t)}function vwe(e){const t=e.encode;return t&&t.title||ot({name:e.name,interactive:e.interactive,style:e.style},t)}function Swe(e,t){const n={enter:{},update:{}};return Gn(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:gM},angle:{signal:Twe},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),uh(n,t,Mp)}function xwe(e,t,n,i){const s={value:0},l=e.text,c={enter:{opacity:s},update:{opacity:{value:1}},exit:{opacity:s}};return Gn(c,{text:l,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Ts({type:Yd,role:wye,style:Ame,from:i,encode:c},n)}function kwe(e,t,n,i){const s={value:0},l=e.subtitle,c={enter:{opacity:s},update:{opacity:{value:1}},exit:{opacity:s}};return Gn(c,{text:l,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Ts({type:Yd,role:bye,style:Ome,from:i,encode:c},n)}function Bwe(e,t){const n=[];e.transform&&e.transform.forEach(i=>{n.push(mM(i,t))}),e.on&&e.on.forEach(i=>{q7(i,t,e.name)}),t.addDataPipeline(e.name,Fwe(e,t,n))}function Fwe(e,t,n){const i=[];let s=null,l=!1,c=!1,d,f,u,a,m;for(e.values?Tn(e.values)||kw(e.format)?(i.push(xL(t,e)),i.push(s=cc())):i.push(s=cc({$ingest:e.values,$format:e.format})):e.url?kw(e.url)||kw(e.format)?(i.push(xL(t,e)),i.push(s=cc())):i.push(s=cc({$request:e.url,$format:e.format})):e.source&&(s=d=xe(e.source).map(w=>Ne(t.getData(w).output)),i.push(null)),f=0,u=n.length;f<u;++f)a=n[f],m=a.metadata,!s&&!m.source&&i.push(s=cc()),i.push(a),m.generates&&(c=!0),m.modifies&&!c&&(l=!0),m.source?s=a:m.changes&&(s=null);return d&&(u=d.length-1,i[0]=ome({derive:l,pulse:u?d:d[0]}),(l||u)&&i.splice(1,0,cc())),s||i.push(cc()),i.push(Vd({})),i}function cc(e){const t=Mr({},e);return t.metadata={source:!0},t}function xL(e,t){return Zye({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const G7=e=>e===Nl||e===Ar,o1=(e,t,n)=>Tn(e)?Owe(e.signal,t,n):e===hh||e===Ar?t:n,On=(e,t,n)=>Tn(e)?Mwe(e.signal,t,n):G7(e)?t:n,yr=(e,t,n)=>Tn(e)?Awe(e.signal,t,n):G7(e)?n:t,H7=(e,t,n)=>Tn(e)?Nwe(e.signal,t,n):e===Ar?{value:t}:{value:n},Iwe=(e,t,n)=>Tn(e)?Cwe(e.signal,t,n):e===_h?{value:t}:{value:n},Mwe=(e,t,n)=>W7(`${e} === '${Ar}' || ${e} === '${Nl}'`,t,n),Awe=(e,t,n)=>W7(`${e} !== '${Ar}' && ${e} !== '${Nl}'`,t,n),Owe=(e,t,n)=>wM(`${e} === '${hh}' || ${e} === '${Ar}'`,t,n),Nwe=(e,t,n)=>wM(`${e} === '${Ar}'`,t,n),Cwe=(e,t,n)=>wM(`${e} === '${_h}'`,t,n),W7=(e,t,n)=>(t=t!=null?An(t):t,n=n!=null?An(n):n,kL(t)&&kL(n)?(t=t?t.signal||be(t.value):null,n=n?n.signal||be(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[ot({test:e},t)].concat(n||[])),kL=e=>e==null||Object.keys(e).length===1,wM=(e,t,n)=>({signal:`${e} ? (${$f(t)}) : (${$f(n)})`}),Rwe=(e,t,n,i,s)=>({signal:(i!=null?`${e} === '${hh}' ? (${$f(i)}) : `:"")+(n!=null?`${e} === '${Nl}' ? (${$f(n)}) : `:"")+(s!=null?`${e} === '${_h}' ? (${$f(s)}) : `:"")+(t!=null?`${e} === '${Ar}' ? (${$f(t)}) : `:"")+"(null)"}),$f=e=>Tn(e)?e.signal:e==null?null:be(e),Lwe=(e,t)=>t===0?0:Tn(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},Qf=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function _f(e,t,n,i){let s;if(t&&Le(t,e))return t[e];if(Le(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":s="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":s=e[5].toLowerCase()+e.slice(6)}return i[uM][s]}else if(e.startsWith("label")){switch(e){case"labelColor":s="fill";break;case"labelFont":case"labelFontSize":s=e[5].toLowerCase()+e.slice(6)}return i[Ip][s]}return null}function BL(e){const t={};for(const n of e)if(n)for(const i in n)t[i]=1;return Object.keys(t)}function Pwe(e,t){var n=t.config,i=n.style,s=n.axis,l=t.scaleType(e.scale)==="band"&&n.axisBand,c=e.orient,d,f,u;if(Tn(c)){const m=BL([n.axisX,n.axisY]),w=BL([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);d={};for(u of m)d[u]=On(c,_f(u,n.axisX,s,i),_f(u,n.axisY,s,i));f={};for(u of w)f[u]=Rwe(c.signal,_f(u,n.axisTop,s,i),_f(u,n.axisBottom,s,i),_f(u,n.axisLeft,s,i),_f(u,n.axisRight,s,i))}else d=c===Ar||c===Nl?n.axisX:n.axisY,f=n["axis"+c[0].toUpperCase()+c.slice(1)];return d||f||l?ot({},s,d,f,l):s}function Dwe(e,t,n,i){const s=ns(e,t),l=e.orient;let c,d;const f={enter:c={opacity:Et},update:d={opacity:Ls},exit:{opacity:Et}};Gn(f,{stroke:s("domainColor"),strokeCap:s("domainCap"),strokeDash:s("domainDash"),strokeDashOffset:s("domainDashOffset"),strokeWidth:s("domainWidth"),strokeOpacity:s("domainOpacity")});const u=FL(e,0),a=FL(e,1);return c.x=d.x=On(l,u,Et),c.x2=d.x2=On(l,a),c.y=d.y=yr(l,u,Et),c.y2=d.y2=yr(l,a),Ts({type:_M,role:oye,from:i,encode:f},n)}function FL(e,t){return{scale:e.scale,range:t}}function $we(e,t,n,i,s){const l=ns(e,t),c=e.orient,d=e.gridScale,f=o1(c,1,-1),u=Uwe(e.offset,f);let a,m,w;const y={enter:a={opacity:Et},update:w={opacity:Ls},exit:m={opacity:Et}};Gn(y,{stroke:l("gridColor"),strokeCap:l("gridCap"),strokeDash:l("gridDash"),strokeDashOffset:l("gridDashOffset"),strokeOpacity:l("gridOpacity"),strokeWidth:l("gridWidth")});const o={scale:e.scale,field:Rs,band:s.band,extra:s.extra,offset:s.offset,round:l("tickRound")},T=On(c,{signal:"height"},{signal:"width"}),b=d?{scale:d,range:0,mult:f,offset:u}:{value:0,offset:u},S=d?{scale:d,range:1,mult:f,offset:u}:ot(T,{mult:f,offset:u});return a.x=w.x=On(c,o,b),a.y=w.y=yr(c,o,b),a.x2=w.x2=yr(c,S),a.y2=w.y2=On(c,S),m.x=On(c,o),m.y=yr(c,o),Ts({type:_M,role:lye,key:Rs,from:i,encode:y},n)}function Uwe(e,t){if(t!==1)if(!Be(e))e=Tn(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=ot({},e);for(;n.mult!=null;)if(Be(n.mult))n=n.mult=ot({},n.mult);else return n.mult=Tn(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function zwe(e,t,n,i,s,l){const c=ns(e,t),d=e.orient,f=o1(d,-1,1);let u,a,m;const w={enter:u={opacity:Et},update:m={opacity:Ls},exit:a={opacity:Et}};Gn(w,{stroke:c("tickColor"),strokeCap:c("tickCap"),strokeDash:c("tickDash"),strokeDashOffset:c("tickDashOffset"),strokeOpacity:c("tickOpacity"),strokeWidth:c("tickWidth")});const y=An(s);y.mult=f;const o={scale:e.scale,field:Rs,band:l.band,extra:l.extra,offset:l.offset,round:c("tickRound")};return m.y=u.y=On(d,Et,o),m.y2=u.y2=On(d,y),a.x=On(d,o),m.x=u.x=yr(d,Et,o),m.x2=u.x2=yr(d,y),a.y=yr(d,o),Ts({type:_M,role:dye,key:Rs,from:i,encode:w},n)}function _v(e,t,n,i,s){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+i+","+s+")"}}function jwe(e,t,n,i,s,l){const c=ns(e,t),d=e.orient,f=e.scale,u=o1(d,-1,1),a=Kc(c("labelFlush")),m=Kc(c("labelFlushOffset")),w=c("labelAlign"),y=c("labelBaseline");let o=a===0||!!a,T;const b=An(s);b.mult=u,b.offset=An(c("labelPadding")||0),b.offset.mult=u;const S={scale:f,field:Rs,band:.5,offset:$7(l.offset,c("labelOffset"))},x=On(d,o?_v(f,a,'"left"','"right"','"center"'):{value:"center"},Iwe(d,"left","right")),k=On(d,H7(d,"bottom","top"),o?_v(f,a,'"top"','"bottom"','"middle"'):{value:"middle"}),I=_v(f,a,`-(${m})`,m,0);o=o&&m;const B={opacity:Et,x:On(d,S,b),y:yr(d,S,b)},O={enter:B,update:T={opacity:Ls,text:{field:fM},x:B.x,y:B.y,align:x,baseline:k},exit:{opacity:Et,x:B.x,y:B.y}};Gn(O,{dx:!w&&o?On(d,I):null,dy:!y&&o?yr(d,I):null}),Gn(O,{angle:c("labelAngle"),fill:c("labelColor"),fillOpacity:c("labelOpacity"),font:c("labelFont"),fontSize:c("labelFontSize"),fontWeight:c("labelFontWeight"),fontStyle:c("labelFontStyle"),limit:c("labelLimit"),lineHeight:c("labelLineHeight")},{align:w,baseline:y});const A=c("labelBound");let R=c("labelOverlap");return R=R||A?{separation:c("labelSeparation"),method:R,order:"datum.index",bound:A?{scale:f,orient:d,tolerance:A}:null}:void 0,T.align!==x&&(T.align=Qf(T.align,x)),T.baseline!==k&&(T.baseline=Qf(T.baseline,k)),Ts({type:Yd,role:cye,style:Ip,key:Rs,from:i,encode:O,overlap:R},n)}function qwe(e,t,n,i){const s=ns(e,t),l=e.orient,c=o1(l,-1,1);let d,f;const u={enter:d={opacity:Et,anchor:An(s("titleAnchor",null)),align:{signal:gM}},update:f=ot({},d,{opacity:Ls,text:An(e.title)}),exit:{opacity:Et}},a={signal:`lerp(range("${e.scale}"), ${s1(0,1,.5)})`};return f.x=On(l,a),f.y=yr(l,a),d.angle=On(l,Et,Lwe(c,90)),d.baseline=On(l,H7(l,Nl,Ar),{value:Nl}),f.angle=d.angle,f.baseline=d.baseline,Gn(u,{fill:s("titleColor"),fillOpacity:s("titleOpacity"),font:s("titleFont"),fontSize:s("titleFontSize"),fontStyle:s("titleFontStyle"),fontWeight:s("titleFontWeight"),limit:s("titleLimit"),lineHeight:s("titleLineHeight")},{align:s("titleAlign"),angle:s("titleAngle"),baseline:s("titleBaseline")}),Gwe(s,l,u,n),u.update.align=Qf(u.update.align,d.align),u.update.angle=Qf(u.update.angle,d.angle),u.update.baseline=Qf(u.update.baseline,d.baseline),Ts({type:Yd,role:fye,style:uM,from:i,encode:u},n)}function Gwe(e,t,n,i){const s=(d,f)=>d!=null?(n.update[f]=Qf(An(d),n.update[f]),!1):!Mf(f,i),l=s(e("titleX"),"x"),c=s(e("titleY"),"y");n.enter.auto=c===l?An(c):On(t,An(c),An(l))}function Hwe(e,t){const n=Pwe(e,t),i=e.encode||{},s=i.axis||{},l=s.name||void 0,c=s.interactive,d=s.style,f=ns(e,n),u=zme(f),a={scale:e.scale,ticks:!!f("ticks"),labels:!!f("labels"),grid:!!f("grid"),domain:!!f("domain"),title:e.title!=null},m=Ne(t.add(Mr({},[a]))),w=Ne(t.add(Wye({scale:t.scaleRef(e.scale),extra:t.property(u.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),y=[];let o;return a.grid&&y.push($we(e,n,i.grid,w,u)),a.ticks&&(o=f("tickSize"),y.push(zwe(e,n,i.ticks,w,o,u))),a.labels&&(o=a.ticks?o:0,y.push(jwe(e,n,i.labels,w,o,u))),a.domain&&y.push(Dwe(e,n,i.domain,m)),a.title&&y.push(qwe(e,n,i.title,m)),a1(Bg({role:aye,from:m,encode:uh(Wwe(f,e),s,Mp),marks:y,aria:f("aria"),description:f("description"),zindex:f("zindex"),name:l,interactive:c,style:d}),t)}function Wwe(e,t){const n={enter:{},update:{}};return Gn(n,{orient:e("orient"),offset:e("offset")||0,position:nr(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function V7(e,t,n){const i=xe(e.signals),s=xe(e.scales);return n||i.forEach(l=>x7(l,t)),xe(e.projections).forEach(l=>Sme(l,t)),s.forEach(l=>ume(l,t)),xe(e.data).forEach(l=>Bwe(l,t)),s.forEach(l=>hme(l,t)),(n||i).forEach(l=>Hye(l,t)),xe(e.axes).forEach(l=>Hwe(l,t)),xe(e.marks).forEach(l=>a1(l,t)),xe(e.legends).forEach(l=>gwe(l,t)),e.title&&Ewe(e.title,t),t.parseLambdas(),t}const Vwe=e=>uh({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function Ywe(e,t){const n=t.config,i=Ne(t.root=t.add(f0())),s=Xwe(e,n);s.forEach(u=>x7(u,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const l=t.add(Mr()),c=t.add(F7(S7(Vwe(e.encode),i1,oM,e.style,t,{pulse:Ne(l)}))),d=t.add(A7({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:i,pulse:Ne(c)}));t.operators.pop(),t.pushState(Ne(c),Ne(d),null),V7(e,t,s),t.operators.push(d);let f=t.add(B7({mark:i,pulse:Ne(d)}));return f=t.add(M7({pulse:Ne(f)})),f=t.add(Vd({pulse:Ne(f)})),t.addData("root",new pd(t,l,l,f)),t}function Gh(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function Xwe(e,t){const n=c=>nr(e[c],t[c]),i=[Gh("background",n("background")),Gh("autosize",iye(n("autosize"))),Gh("padding",rye(n("padding"))),Gh("width",n("width")||0),Gh("height",n("height")||0)],s=i.reduce((c,d)=>(c[d.name]=d,c),{}),l={};return xe(e.signals).forEach(c=>{Le(s,c.name)?c=ot(s[c.name],c):i.push(c),l[c.name]=c}),xe(t.signals).forEach(c=>{!Le(l,c.name)&&!Le(s,c.name)&&i.push(c)}),i}function Y7(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function IL(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}Y7.prototype=IL.prototype={parse(e){return V7(e,this)},fork(){return new IL(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof Fx?Ne(e):e;return this.add(ame({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(i,s,l){let c,d;i&&(c=i.data||(i.data={}),d=c[s]||(c[s]=[]),d.push(l))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const i in t.index)n(t.index[i],e,"index:"+i)}return this},pushState(e,t,n){this._encode.push(Ne(this.add(Vd({pulse:e})))),this._parent.push(t),this._lookup.push(n?Ne(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return wt(this._parent)},encode(){return wt(this._encode)},lookup(){return wt(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Se(e))return xg(e,t);e.signal||ce("Unsupported field reference: "+be(e));const n=e.signal;let i=this.field[n];if(!i){const s={name:this.signalRef(n)};t&&(s.as=t),this.field[n]=i=Ne(this.add(Kye(s)))}return i},compareRef(e){let t=!1;const n=l=>Tn(l)?(t=!0,this.signalRef(l.signal)):Rye(l)?(t=!0,this.exprRef(l.expr)):l,i=xe(e.field).map(n),s=xe(e.order).map(n);return t?Ne(this.add(gL({fields:i,orders:s}))):hL(i,s)},keyRef(e,t){let n=!1;const i=l=>Tn(l)?(n=!0,Ne(s[l.signal])):l,s=this.signals;return e=xe(e).map(i),n?Ne(this.add(Jye({fields:e,flat:t}))):Aye(e,t)},sortRef(e){if(!e)return e;const t=t1(e.op,e.field),n=e.order||Oye;return n.signal?Ne(this.add(gL({fields:t,orders:this.signalRef(n.signal)}))):hL(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const i=this.id();this.streams.push({id:i,source:e,type:t}),this.events[n]=i}return this.events[n]},hasOwnSignal(e){return Le(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&ce("Duplicate signal name: "+be(e));const n=t instanceof Fx?t:this.add(f0(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||ce("Unrecognized signal name: "+be(e)),this.signals[e]},signalRef(e){return this.signals[e]?Ne(this.signals[e]):(Le(this.lambdas,e)||(this.lambdas[e]=this.add(f0(null))),Ne(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const i=e[t],s=Sa(i,this),l=this.lambdas[i];l.params=s.$params,l.update=s.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!Be(e)?e:this.signalRef(e.signal||bM(e))},exprRef(e,t){const n={expr:Sa(e,this)};return t&&(n.expr.$name=t),Ne(this.add(Yye(n)))},addBinding(e,t){this.bindings||ce("Nested signals do not support binding: "+be(e)),this.bindings.push(ot({signal:e},t))},addScaleProj(e,t){Le(this.scales,e)&&ce("Duplicate scale or projection name: "+be(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,lme(t))},addProjection(e,t){this.addScaleProj(e,rme(t))},getScale(e){return this.scales[e]||ce("Unrecognized scale name: "+be(e)),this.scales[e]},scaleRef(e){return Ne(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Le(this.data,e)&&ce("Duplicate data set name: "+be(e)),this.data[e]=t},getData(e){return this.data[e]||ce("Undefined data set name: "+be(e)),this.data[e]},addDataPipeline(e,t){return Le(this.data,e)&&ce("Duplicate data set name: "+be(e)),this.addData(e,pd.fromEntries(this,t))}};function bM(e){return(fe(e)?Kwe:Jwe)(e)}function Kwe(e){const t=e.length;let n="[";for(let i=0;i<t;++i){const s=e[i];n+=(i>0?",":"")+(Be(s)?s.signal||bM(s):be(s))}return n+"]"}function Jwe(e){let t="{",n=0,i,s;for(i in e)s=e[i],t+=(++n>1?",":"")+be(i)+":"+(Be(s)?s.signal||bM(s):be(s));return t+"}"}function Qwe(){const e="sans-serif",i="#4c78a8",s="#000",l="#888",c="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:i},area:{fill:i},image:null,line:{stroke:i,strokeWidth:2},path:{stroke:i},rect:{fill:i},rule:{stroke:s},shape:{stroke:i},symbol:{fill:i,size:64},text:{fill:s,font:e,fontSize:11},trail:{fill:i,size:2},style:{"guide-label":{fill:s,font:e,fontSize:10},"guide-title":{fill:s,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:s,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:s,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:c},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:l,grid:!1,gridWidth:1,gridColor:c,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:l,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:c,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:l,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function Zwe(e,t,n){return Be(e)||ce("Input Vega specification must be an object."),t=rh(Qwe(),t,e.config),Ywe(e,new Y7(t,n)).toRuntime()}var ebe="5.25.0";ot(Fu,Jae,Dde,pfe,Vfe,eue,Bue,aue,Iue,Oue,jue,Xue);const tbe=Object.freeze(Object.defineProperty({__proto__:null,Bounds:fn,CanvasHandler:Sp,CanvasRenderer:Zb,DATE:Ki,DAY:Zn,DAYOFYEAR:va,Dataflow:Jf,Debug:U8,Error:F2,EventStream:FT,Gradient:Gz,GroupItem:LT,HOURS:ms,Handler:Al,Info:$8,Item:RT,MILLISECONDS:vr,MINUTES:ws,MONTH:si,Marks:bs,MultiPulse:Y2,None:D8,Operator:jt,Parameters:BT,Pulse:gl,QUARTER:Xi,RenderType:ol,Renderer:Ca,ResourceLoader:RF,SECONDS:js,SVGHandler:ZF,SVGRenderer:rI,SVGStringRenderer:aI,Scenegraph:JF,TIME_UNITS:U2,Transform:re,View:u7,WEEK:mn,Warn:I2,YEAR:jn,accessor:ts,accessorFields:ii,accessorName:on,array:xe,ascending:TT,bandwidthNRD:c2,bin:d2,bootstrapCI:b8,boundClip:Dj,boundContext:bp,boundItem:tx,boundMark:cj,boundStroke:Io,changeset:Gd,clampRange:J8,codegenExpression:Uq,compare:C2,constant:ci,cumulativeLogNormal:p2,cumulativeNormal:_T,cumulativeUniform:b2,dayofyear:c5,debounce:R2,defaultLocale:q2,definition:W5,densityLogNormal:g2,densityNormal:f2,densityUniform:w2,domChild:Pi,domClear:lr,domCreate:rl,domFind:QF,dotbin:T8,error:ce,expressionFunction:hn,extend:ot,extent:Ea,extentIndex:Q8,falsy:Ho,fastmap:oh,field:Yi,flush:Z8,font:zT,fontFamily:vp,fontSize:Na,format:fw,formatLocale:jb,formats:W2,hasOwnProperty:Le,id:cp,identity:li,inferType:R5,inferTypes:L5,ingest:It,inherits:Te,inrange:Lf,interpolate:BF,interpolateColors:NT,interpolateRange:Mz,intersect:Cj,intersectBoxLine:Pf,intersectPath:LF,intersectPoint:PF,intersectRule:Qz,isArray:fe,isBoolean:Xl,isDate:_l,isFunction:lt,isIterable:e5,isNumber:$t,isObject:Be,isRegExp:t5,isString:Se,isTuple:xT,key:L2,lerp:n5,lineHeight:Il,loader:vT,locale:N5,logger:M2,lruCache:i5,markup:sI,merge:s5,mergeConfig:rh,multiLineOffset:YF,one:sh,pad:r5,panLinear:H8,panLog:W8,panPow:V8,panSymlog:Y8,parse:Zwe,parseExpression:VI,parseSelector:Jl,path:J0,pathCurves:OF,pathEqual:$j,pathParse:Ou,pathRectangle:Vz,pathRender:pg,pathSymbols:Wz,pathTrail:Yz,peek:wt,point:qT,projection:mI,quantileLogNormal:y2,quantileNormal:gT,quantileUniform:T2,quantiles:o2,quantizeInterpolator:Az,quarter:X8,quartiles:l2,get random(){return Us},randomInteger:Pie,randomKDE:h2,randomLCG:Lie,randomLogNormal:v8,randomMixture:S8,randomNormal:u2,randomUniform:x8,read:$5,regressionConstant:E2,regressionExp:B8,regressionLinear:v2,regressionLoess:M8,regressionLog:k8,regressionPoly:I8,regressionPow:F8,regressionQuad:S2,renderModule:GT,repeat:u_,resetDefaultLocale:fre,resetSVGClipId:Kz,resetSVGDefIds:nde,responseType:D5,runtimeContext:Zq,sampleCurve:yT,sampleLogNormal:_2,sampleNormal:hT,sampleUniform:m2,scale:kt,sceneEqual:oI,sceneFromJSON:fj,scenePickVisit:Vb,sceneToJSON:dj,sceneVisit:Sr,sceneZOrder:DF,scheme:FF,serializeXML:kj,setRandom:Cie,span:dp,splitAccessPath:Oa,stringValue:be,textMetrics:pr,timeBin:k5,timeFloor:p5,timeFormatLocale:hg,timeInterval:lh,timeOffset:w5,timeSequence:E5,timeUnitSpecifier:l5,timeUnits:z2,toBoolean:P2,toDate:D2,toNumber:ei,toSet:Er,toString:$2,transform:V5,transforms:Fu,truncate:a5,truthy:zs,tupleid:Ce,typeParsers:HS,utcFloor:y5,utcInterval:ch,utcOffset:b5,utcSequence:v5,utcdayofyear:u5,utcquarter:K8,utcweek:h5,version:ebe,visitArray:Jo,week:d5,writeConfig:ah,zero:nl,zoomLinear:A2,zoomLog:O2,zoomPow:zb,zoomSymlog:N2},Symbol.toStringTag,{value:"Module"}));function nbe(e,t,n){let i;t.x2&&(t.x?(n&&e.x>e.x2&&(i=e.x,e.x=e.x2,e.x2=i),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(i=e.y,e.y=e.y2,e.y2=i),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var ibe={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},sbe={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},rbe={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const abe=Array.prototype.slice,dc=(e,t,n)=>{const i=n?n(t[0]):t[0];return i[e].apply(i,abe.call(t,1))},obe=(e,t,n,i,s,l,c)=>new Date(e,t||0,n??1,i||0,s||0,l||0,c||0);var lbe={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:obe,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return dc("join",arguments)},indexof:function(){return dc("indexOf",arguments)},lastindexof:function(){return dc("lastIndexOf",arguments)},slice:function(){return dc("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return dc("substring",arguments,String)},split:function(){return dc("split",arguments,String)},replace:function(){return dc("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const cbe=["view","item","group","xy","x","y"],Rx=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&Rx.add(setImmediate);const dbe={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:ibe[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,i=e(t.object);n&&(e.memberDepth+=1);const s=e(t.property);if(n&&(e.memberDepth-=1),Rx.has(i[s])){console.error(`Prevented interpretation of member "${s}" which could lead to insecure code execution`);return}return i[s]},CallExpression:(e,t)=>{const n=t.arguments;let i=t.callee.name;return i.startsWith("_")&&(i=i.slice(1)),i==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[i]||lbe[i]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>sbe[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>rbe[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,i)=>{e.memberDepth+=1;const s=e(i.key);return e.memberDepth-=1,Rx.has(e(i.value))?console.error(`Prevented interpretation of property "${s}" which could lead to insecure code execution`):n[s]=e(i.value),n},{})};function Hh(e,t,n,i,s,l){const c=d=>dbe[d.type](c,d);return c.memberDepth=0,c.fn=Object.create(t),c.params=n,c.datum=i,c.event=s,c.item=l,cbe.forEach(d=>c.fn[d]=function(){return s.vega[d](...arguments)}),c(e)}var fbe={operator(e,t){const n=t.ast,i=e.functions;return s=>Hh(n,i,s)},parameter(e,t){const n=t.ast,i=e.functions;return(s,l)=>Hh(n,i,l,s)},event(e,t){const n=t.ast,i=e.functions;return s=>Hh(n,i,void 0,void 0,s)},handler(e,t){const n=t.ast,i=e.functions;return(s,l)=>{const c=l.item&&l.item.datum;return Hh(n,i,s,c,l)}},encode(e,t){const{marktype:n,channels:i}=t,s=e.functions,l=n==="group"||n==="image"||n==="rect";return(c,d)=>{const f=c.datum;let u=0,a;for(const m in i)a=Hh(i[m].ast,s,d,f,void 0,c),c[m]!==a&&(c[m]=a,u=1);return n!=="rule"&&nbe(c,i,l),u}}};const ube="vega-lite",hbe='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',_be="5.9.0",gbe=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],pbe="https://vega.github.io/vega-lite/",ybe="Vega-Lite is a concise high-level language for interactive visualization.",mbe=["vega","chart","visualization"],wbe="build/vega-lite.js",bbe="build/vega-lite.min.js",Tbe="build/vega-lite.min.js",Ebe="build/src/index",vbe="build/src/index.d.ts",Sbe={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},xbe=["bin","build","src","vega-lite*","tsconfig.json"],kbe={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",jest:"NODE_OPTIONS=--experimental-vm-modules npx jest",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk --experimental-vm-modules ./node_modules/.bin/jest --runInBand test","test:runtime":"NODE_OPTIONS=--experimental-vm-modules TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"NODE_OPTIONS=--experimental-vm-modules TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},Bbe={type:"git",url:"https://github.com/vega/vega-lite.git"},Fbe="BSD-3-Clause",Ibe={url:"https://github.com/vega/vega-lite/issues"},Mbe={"@babel/core":"^7.21.4","@babel/preset-env":"^7.21.4","@babel/preset-typescript":"^7.21.4","@release-it/conventional-changelog":"^5.1.1","@rollup/plugin-alias":"^5.0.0","@rollup/plugin-babel":"^6.0.3","@rollup/plugin-commonjs":"^24.1.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.2","@rollup/plugin-terser":"^0.4.1","@types/chai":"^4.3.4","@types/d3":"^7.4.0","@types/jest":"^27.4.1","@types/pako":"^2.0.0","@typescript-eslint/eslint-plugin":"^5.59.1","@typescript-eslint/parser":"^5.59.1","ajv-formats":"^2.1.1",ajv:"^8.12.0",chai:"^4.3.7",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^2.2.2",d3:"^7.8.4","del-cli":"^5.0.0","eslint-config-prettier":"^8.8.0","eslint-plugin-jest":"^27.2.1","eslint-plugin-prettier":"^4.2.1",eslint:"^8.39.0","highlight.js":"^11.7.0","jest-dev-server":"^6.1.1",jest:"^27.5.1",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^2.8.8",puppeteer:"^15.0.0","release-it":"^15.10.1","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-sourcemaps":"^0.6.3",rollup:"^3.21.0",serve:"^14.2.0",terser:"^5.17.1","ts-jest":"^29.1.0","ts-json-schema-generator":"^1.2.0",typescript:"~4.9.5","vega-cli":"^5.25.0","vega-datasets":"^2.7.0","vega-embed":"^6.22.1","vega-tooltip":"^0.32.0","yaml-front-matter":"^4.1.1"},Abe={"@types/clone":"~2.1.1",clone:"~2.1.2","fast-deep-equal":"~3.1.3","fast-json-stable-stringify":"~2.1.0","json-stringify-pretty-compact":"~3.0.0",tslib:"~2.5.0","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.1"},Obe={vega:"^5.24.0"},Nbe={node:">=16"},Cbe={name:ube,author:hbe,version:_be,collaborators:gbe,homepage:pbe,description:ybe,keywords:mbe,main:wbe,unpkg:bbe,jsdelivr:Tbe,module:Ebe,types:vbe,bin:Sbe,files:xbe,scripts:kbe,repository:Bbe,license:Fbe,bugs:Ibe,devDependencies:Mbe,dependencies:Abe,peerDependencies:Obe,engines:Nbe};var X7={exports:{}};(function(e){var t=function(){function n(w,y){return y!=null&&w instanceof y}var i;try{i=Map}catch{i=function(){}}var s;try{s=Set}catch{s=function(){}}var l;try{l=Promise}catch{l=function(){}}function c(w,y,o,T,b){typeof y=="object"&&(o=y.depth,T=y.prototype,b=y.includeNonEnumerable,y=y.circular);var S=[],x=[],k=typeof Buffer<"u";typeof y>"u"&&(y=!0),typeof o>"u"&&(o=1/0);function I(B,O){if(B===null)return null;if(O===0)return B;var A,R;if(typeof B!="object")return B;if(n(B,i))A=new i;else if(n(B,s))A=new s;else if(n(B,l))A=new l(function(J,G){B.then(function(oe){J(I(oe,O-1))},function(oe){G(I(oe,O-1))})});else if(c.__isArray(B))A=[];else if(c.__isRegExp(B))A=new RegExp(B.source,m(B)),B.lastIndex&&(A.lastIndex=B.lastIndex);else if(c.__isDate(B))A=new Date(B.getTime());else{if(k&&Buffer.isBuffer(B))return Buffer.allocUnsafe?A=Buffer.allocUnsafe(B.length):A=new Buffer(B.length),B.copy(A),A;n(B,Error)?A=Object.create(B):typeof T>"u"?(R=Object.getPrototypeOf(B),A=Object.create(R)):(A=Object.create(T),R=T)}if(y){var P=S.indexOf(B);if(P!=-1)return x[P];S.push(B),x.push(A)}n(B,i)&&B.forEach(function(J,G){var oe=I(G,O-1),he=I(J,O-1);A.set(oe,he)}),n(B,s)&&B.forEach(function(J){var G=I(J,O-1);A.add(G)});for(var D in B){var U;R&&(U=Object.getOwnPropertyDescriptor(R,D)),!(U&&U.set==null)&&(A[D]=I(B[D],O-1))}if(Object.getOwnPropertySymbols)for(var Y=Object.getOwnPropertySymbols(B),D=0;D<Y.length;D++){var z=Y[D],W=Object.getOwnPropertyDescriptor(B,z);W&&!W.enumerable&&!b||(A[z]=I(B[z],O-1),W.enumerable||Object.defineProperty(A,z,{enumerable:!1}))}if(b)for(var H=Object.getOwnPropertyNames(B),D=0;D<H.length;D++){var V=H[D],W=Object.getOwnPropertyDescriptor(B,V);W&&W.enumerable||(A[V]=I(B[V],O-1),Object.defineProperty(A,V,{enumerable:!1}))}return A}return I(w,o)}c.clonePrototype=function(y){if(y===null)return null;var o=function(){};return o.prototype=y,new o};function d(w){return Object.prototype.toString.call(w)}c.__objToStr=d;function f(w){return typeof w=="object"&&d(w)==="[object Date]"}c.__isDate=f;function u(w){return typeof w=="object"&&d(w)==="[object Array]"}c.__isArray=u;function a(w){return typeof w=="object"&&d(w)==="[object RegExp]"}c.__isRegExp=a;function m(w){var y="";return w.global&&(y+="g"),w.ignoreCase&&(y+="i"),w.multiline&&(y+="m"),y}return c.__getRegExpFlags=m,c}();e.exports&&(e.exports=t)})(X7);var Rbe=X7.exports;const Lbe=Gl(Rbe);var Pbe=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var i,s,l;if(Array.isArray(t)){if(i=t.length,i!=n.length)return!1;for(s=i;s--!==0;)if(!e(t[s],n[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(l=Object.keys(t),i=l.length,i!==Object.keys(n).length)return!1;for(s=i;s--!==0;)if(!Object.prototype.hasOwnProperty.call(n,l[s]))return!1;for(s=i;s--!==0;){var c=l[s];if(!e(t[c],n[c]))return!1}return!0}return t!==t&&n!==n};const K7=Gl(Pbe);var Dbe=function(e,t){t||(t={}),typeof t=="function"&&(t={cmp:t});var n=typeof t.cycles=="boolean"?t.cycles:!1,i=t.cmp&&function(l){return function(c){return function(d,f){var u={key:d,value:c[d]},a={key:f,value:c[f]};return l(u,a)}}}(t.cmp),s=[];return function l(c){if(c&&c.toJSON&&typeof c.toJSON=="function"&&(c=c.toJSON()),c!==void 0){if(typeof c=="number")return isFinite(c)?""+c:"null";if(typeof c!="object")return JSON.stringify(c);var d,f;if(Array.isArray(c)){for(f="[",d=0;d<c.length;d++)d&&(f+=","),f+=l(c[d])||"null";return f+"]"}if(c===null)return"null";if(s.indexOf(c)!==-1){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var u=s.push(c)-1,a=Object.keys(c).sort(i&&i(c));for(f="",d=0;d<a.length;d++){var m=a[d],w=l(c[m]);w&&(f&&(f+=","),f+=JSON.stringify(m)+":"+w)}return s.splice(u,1),"{"+f+"}"}}(e)};const TM=Gl(Dbe);function EM(e){return!!e.or}function vM(e){return!!e.and}function SM(e){return!!e.not}function Mw(e,t){if(SM(e))Mw(e.not,t);else if(vM(e))for(const n of e.and)Mw(n,t);else if(EM(e))for(const n of e.or)Mw(n,t);else t(e)}function Zf(e,t){return SM(e)?{not:Zf(e.not,t)}:vM(e)?{and:e.and.map(n=>Zf(n,t))}:EM(e)?{or:e.or.map(n=>Zf(n,t))}:t(e)}const sa=K7,Je=Lbe;function J7(e){throw new Error(e)}function Du(e,t){const n={};for(const i of t)Le(e,i)&&(n[i]=e[i]);return n}function zi(e,t){const n={...e};for(const i of t)delete n[i];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>TM(e)).join(",")})`};const Ht=TM;function bt(e){if($t(e))return e;const t=Se(e)?e:TM(e);if(t.length<250)return t;let n=0;for(let i=0;i<t.length;i++){const s=t.charCodeAt(i);n=(n<<5)-n+s,n=n&n}return n}function Lx(e){return e===!1||e===null}function pt(e,t){return e.includes(t)}function yd(e,t){let n=0;for(const[i,s]of e.entries())if(t(s,i,n++))return!0;return!1}function xM(e,t){let n=0;for(const[i,s]of e.entries())if(!t(s,i,n++))return!1;return!0}function Q7(e,...t){for(const n of t)$be(e,n??{});return e}function $be(e,t){for(const n of pe(t))ah(e,n,t[n],!0)}function ra(e,t){const n=[],i={};let s;for(const l of e)s=t(l),!(s in i)&&(i[s]=1,n.push(l));return n}function Ube(e,t){const n=pe(e),i=pe(t);if(n.length!==i.length)return!1;for(const s of n)if(e[s]!==t[s])return!1;return!0}function Z7(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function kM(e,t){for(const n of e)if(t.has(n))return!0;return!1}function Px(e){const t=new Set;for(const n of e){const s=Oa(n).map((c,d)=>d===0?c:`[${c}]`),l=s.map((c,d)=>s.slice(0,d+1).join(""));for(const c of l)t.add(c)}return t}function BM(e,t){return e===void 0||t===void 0?!0:kM(Px(e),Px(t))}function Dt(e){return pe(e).length===0}const pe=Object.keys,qn=Object.values,Cl=Object.entries;function Fg(e){return e===!0||e===!1}function Qt(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function z_(e,t){return SM(e)?`!(${z_(e.not,t)})`:vM(e)?`(${e.and.map(n=>z_(n,t)).join(") && (")})`:EM(e)?`(${e.or.map(n=>z_(n,t)).join(") || (")})`:t(e)}function u0(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&u0(e[n],t)&&delete e[n],Dt(e)}function Ap(e){return e.charAt(0).toUpperCase()+e.substr(1)}function FM(e,t="datum"){const n=Oa(e),i=[];for(let s=1;s<=n.length;s++){const l=`[${n.slice(0,s).map(be).join("][")}]`;i.push(`${t}${l}`)}return i.join(" && ")}function e9(e,t="datum"){return`${t}[${be(Oa(e).join("."))}]`}function zbe(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function qs(e){return`${Oa(e).map(zbe).join("\\.")}`}function md(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function IM(e){return`${Oa(e).join(".")}`}function $u(e){return e?Oa(e).length:0}function un(...e){for(const t of e)if(t!==void 0)return t}let t9=42;function n9(e){const t=++t9;return e?String(e)+t:t}function jbe(){t9=42}function i9(e){return s9(e)?e:`__${e}`}function s9(e){return e.startsWith("__")}function Ig(e){if(e!==void 0)return(e%360+360)%360}function l1(e){return $t(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const ho="row",_o="column",c1="facet",Zt="x",Cn="y",Or="x2",La="y2",Ql="xOffset",gh="yOffset",Nr="radius",Oo="radius2",Ws="theta",No="theta2",Cr="latitude",Rr="longitude",Lr="latitude2",Gs="longitude2",Ji="color",Pa="fill",Da="stroke",Qi="shape",Co="size",Xd="angle",Ro="opacity",Zl="fillOpacity",ec="strokeOpacity",tc="strokeWidth",nc="strokeDash",Op="text",Np="order",Cp="detail",d1="key",wd="tooltip",f1="href",u1="url",h1="description",qbe={x:1,y:1,x2:1,y2:1},r9={theta:1,theta2:1,radius:1,radius2:1};function a9(e){return e in r9}const MM={longitude:1,longitude2:1,latitude:1,latitude2:1};function o9(e){switch(e){case Cr:return"y";case Lr:return"y2";case Rr:return"x";case Gs:return"x2"}}function l9(e){return e in MM}const Gbe=pe(MM),AM={...qbe,...r9,...MM,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function eu(e){return e===Ji||e===Pa||e===Da}const c9={row:1,column:1,facet:1},Os=pe(c9),OM={...AM,...c9},Hbe=pe(OM),{order:AIe,detail:OIe,tooltip:NIe,...Wbe}=OM,{row:CIe,column:RIe,facet:LIe,...Vbe}=Wbe;function Ybe(e){return!!Vbe[e]}function d9(e){return!!OM[e]}const Xbe=[Or,La,Lr,Gs,No,Oo];function f9(e){return Kd(e)!==e}function Kd(e){switch(e){case Or:return Zt;case La:return Cn;case Lr:return Cr;case Gs:return Rr;case No:return Ws;case Oo:return Nr}return e}function Rl(e){if(a9(e))switch(e){case Ws:return"startAngle";case No:return"endAngle";case Nr:return"outerRadius";case Oo:return"innerRadius"}return e}function $a(e){switch(e){case Zt:return Or;case Cn:return La;case Cr:return Lr;case Rr:return Gs;case Ws:return No;case Nr:return Oo}}function Zi(e){switch(e){case Zt:case Or:return"width";case Cn:case La:return"height"}}function u9(e){switch(e){case Zt:return"xOffset";case Cn:return"yOffset";case Or:return"x2Offset";case La:return"y2Offset";case Ws:return"thetaOffset";case Nr:return"radiusOffset";case No:return"theta2Offset";case Oo:return"radius2Offset"}}function NM(e){switch(e){case Zt:return"xOffset";case Cn:return"yOffset"}}function h9(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const Kbe=pe(AM),{x:PIe,y:DIe,x2:$Ie,y2:UIe,xOffset:zIe,yOffset:jIe,latitude:qIe,longitude:GIe,latitude2:HIe,longitude2:WIe,theta:VIe,theta2:YIe,radius:XIe,radius2:KIe,...CM}=AM,Jbe=pe(CM),RM={x:1,y:1},Ua=pe(RM);function Rn(e){return e in RM}const LM={theta:1,radius:1},Qbe=pe(LM);function _1(e){return e==="width"?Zt:Cn}const _9={xOffset:1,yOffset:1};function ph(e){return e in _9}const{text:JIe,tooltip:QIe,href:ZIe,url:eMe,description:tMe,detail:nMe,key:iMe,order:sMe,...g9}=CM,Zbe=pe(g9);function e0e(e){return!!CM[e]}function t0e(e){switch(e){case Ji:case Pa:case Da:case Co:case Qi:case Ro:case tc:case nc:return!0;case Zl:case ec:case Xd:return!1}}const p9={...RM,...LM,..._9,...g9},g1=pe(p9);function Lo(e){return!!p9[e]}function n0e(e,t){return s0e(e)[t]}const y9={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:rMe,...i0e}=y9;function s0e(e){switch(e){case Ji:case Pa:case Da:case h1:case Cp:case d1:case wd:case f1:case Np:case Ro:case Zl:case ec:case tc:case c1:case ho:case _o:return y9;case Zt:case Cn:case Ql:case gh:case Cr:case Rr:return i0e;case Or:case La:case Lr:case Gs:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Co:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case nc:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Qi:return{point:"always",geoshape:"always"};case Op:return{text:"always"};case Xd:return{point:"always",square:"always",text:"always"};case u1:return{image:"always"};case Ws:return{text:"always",arc:"always"};case Nr:return{text:"always",arc:"always"};case No:case Oo:return{arc:"always"}}}function gv(e){switch(e){case Zt:case Cn:case Ws:case Nr:case Ql:case gh:case Co:case Xd:case tc:case Ro:case Zl:case ec:case Or:case La:case No:case Oo:return;case c1:case ho:case _o:case Qi:case nc:case Op:case wd:case f1:case u1:case h1:return"discrete";case Ji:case Pa:case Da:return"flexible";case Cr:case Rr:case Lr:case Gs:case Cp:case d1:case Np:return}}const r0e={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},a0e={count:1,min:1,max:1};function So(e){return!!e&&!!e.argmin}function ic(e){return!!e&&!!e.argmax}function PM(e){return Se(e)&&!!r0e[e]}const o0e=new Set(["count","valid","missing","distinct"]);function m9(e){return Se(e)&&o0e.has(e)}function l0e(e){return Se(e)&&pt(["min","max"],e)}const c0e=new Set(["count","sum","distinct","valid","missing"]),d0e=new Set(["mean","average","median","q1","q3","min","max"]);function w9(e){return Xl(e)&&(e=B1(e,void 0)),"bin"+pe(e).map(t=>p1(e[t])?Qt(`_${t}_${Cl(e[t])}`):Qt(`_${t}_${e[t]}`)).join("")}function Wt(e){return e===!0||Jd(e)&&!e.binned}function Dn(e){return e==="binned"||Jd(e)&&e.binned===!0}function Jd(e){return Be(e)}function p1(e){return e==null?void 0:e.param}function ML(e){switch(e){case ho:case _o:case Co:case Ji:case Pa:case Da:case tc:case Ro:case Zl:case ec:case Qi:return 6;case nc:return 4;default:return 10}}function Rp(e){return!!(e!=null&&e.expr)}function Ri(e){const t=pe(e||{}),n={};for(const i of t)n[i]=hs(e[i]);return n}function b9(e){const{anchor:t,frame:n,offset:i,orient:s,angle:l,limit:c,color:d,subtitleColor:f,subtitleFont:u,subtitleFontSize:a,subtitleFontStyle:m,subtitleFontWeight:w,subtitleLineHeight:y,subtitlePadding:o,...T}=e,b={...T,...d?{fill:d}:{}},S={...t?{anchor:t}:{},...n?{frame:n}:{},...i?{offset:i}:{},...s?{orient:s}:{},...l!==void 0?{angle:l}:{},...c!==void 0?{limit:c}:{}},x={...f?{subtitleColor:f}:{},...u?{subtitleFont:u}:{},...a?{subtitleFontSize:a}:{},...m?{subtitleFontStyle:m}:{},...w?{subtitleFontWeight:w}:{},...y?{subtitleLineHeight:y}:{},...o?{subtitlePadding:o}:{}},k=Du(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:b,subtitleMarkConfig:k,nonMarkTitleProperties:S,subtitle:x}}function el(e){return Se(e)||fe(e)&&Se(e[0])}function Oe(e){return!!(e!=null&&e.signal)}function sc(e){return!!e.step}function f0e(e){return fe(e)?!1:"fields"in e&&!("data"in e)}function u0e(e){return fe(e)?!1:"fields"in e&&"data"in e}function lo(e){return fe(e)?!1:"field"in e&&"data"in e}const h0e={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},_0e=pe(h0e),g0e={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},Dx=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function T9(e){const t=fe(e.condition)?e.condition.map(AL):AL(e.condition);return{...hs(e),condition:t}}function hs(e){if(Rp(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function AL(e){if(Rp(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Kt(e){if(Rp(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Oe(e)?e:e!==void 0?{value:e}:void 0}function p0e(e){return Oe(e)?e.signal:be(e)}function OL(e){return Oe(e)?e.signal:be(e.value)}function go(e){return Oe(e)?e.signal:e==null?null:be(e)}function y0e(e,t,n){for(const i of n){const s=bd(i,t.markDef,t.config);s!==void 0&&(e[i]=Kt(s))}return e}function E9(e){return[].concat(e.type,e.style??[])}function Ct(e,t,n,i={}){const{vgChannel:s,ignoreVgConfig:l}=i;return s&&t[s]!==void 0?t[s]:t[e]!==void 0?t[e]:l&&(!s||s===e)?void 0:bd(e,t,n,i)}function bd(e,t,n,{vgChannel:i}={}){return un(i?h0(e,t,n.style):void 0,h0(e,t,n.style),i?n[t.type][i]:void 0,n[t.type][e],i?n.mark[i]:n.mark[e])}function h0(e,t,n){return v9(e,E9(t),n)}function v9(e,t,n){t=xe(t);let i;for(const s of t){const l=n[s];l&&l[e]!==void 0&&(i=l[e])}return i}function S9(e,t){return xe(e).reduce((n,i)=>(n.field.push(ve(i,t)),n.order.push(i.sort??"ascending"),n),{field:[],order:[]})}function x9(e,t){const n=[...e];return t.forEach(i=>{for(const s of n)if(sa(s,i))return;n.push(i)}),n}function k9(e,t){return sa(e,t)||!t?e:e?[...xe(e),...xe(t)].join(", "):t}function B9(e,t){const n=e.value,i=t.value;if(n==null||i===null)return{explicit:e.explicit,value:null};if((el(n)||Oe(n))&&(el(i)||Oe(i)))return{explicit:e.explicit,value:k9(n,i)};if(el(n)||Oe(n))return{explicit:e.explicit,value:n};if(el(i)||Oe(i))return{explicit:e.explicit,value:i};if(!el(n)&&!Oe(n)&&!el(i)&&!Oe(i))return{explicit:e.explicit,value:x9(n,i)};throw new Error("It should never reach here")}function DM(e){return`Invalid specification ${Ht(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const m0e='Autosize "fit" only works for single views and layered views.';function NL(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function CL(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function RL(e){return e?`Dropping "fit-${e}" because spec has discrete ${Zi(e)}.`:'Dropping "fit" because spec has discrete size.'}function $M(e){return`Unknown field for ${e}. Cannot calculate view size.`}function LL(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function w0e(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function b0e(e){return`The "nearest" transform is not supported for ${e} marks.`}function F9(e){return`Selection not supported for ${e} yet.`}function T0e(e){return`Cannot find a selection named "${e}".`}const E0e="Scale bindings are currently only supported for scales with unbinned, continuous domains.",v0e="Legend bindings are only supported for selections over an individual field or encoding channel.";function S0e(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function x0e(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const k0e="The same selection must be used to override scale domains in a layered view.",B0e='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function F0e(e){return`Unknown repeated value "${e}".`}function PL(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const I0e="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function M0e(e){return`Unrecognized parse "${e}".`}function DL(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const A0e="Attempt to add the same child twice.";function O0e(e){return`Ignoring an invalid transform: ${Ht(e)}.`}const N0e='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function $L(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function C0e(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Ht(t)} is overridden by a child projection ${Ht(n)}.`}const R0e="Arc marks uses theta channel rather than angle, replacing angle with theta.";function L0e(e){return`${e}Offset dropped because ${e} is continuous`}function P0e(e){return`There is no ${e} encoding. Replacing ${e}Offset encoding as ${e}.`}function D0e(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Ht(n)}}.`}function I9(e){return`Invalid field type "${e}".`}function $0e(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function U0e(e){return`Invalid aggregation operator "${e}".`}function M9(e,t){const{fill:n,stroke:i}=t;return`Dropping color ${e} as the plot also has ${n&&i?"fill and stroke":n?"fill":"stroke"}.`}function z0e(e){return`Position range does not support relative band size for ${e}.`}function $x(e,t){return`Dropping ${Ht(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const j0e="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function y1(e,t,n){return`${e} dropped as it is incompatible with "${t}"${n?` when ${n}`:""}.`}function q0e(e){return`${e} encoding has no scale, so specified scale is ignored.`}function G0e(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function H0e(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function W0e(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function V0e(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function pv(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function Y0e(e){return`The ${e} for range marks cannot be an expression`}function X0e(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function K0e(e,t){return`Specified orient "${e}" overridden with "${t}".`}function J0e(e){return`Cannot use the scale property "${e}" with non-color channel.`}function Q0e(e){return`Cannot use the relative band size with ${e} scale.`}function Z0e(e){return`Using unaggregated domain with raw field has no effect (${Ht(e)}).`}function eTe(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function tTe(e){return`Unaggregated domain is currently unsupported for log scale (${Ht(e)}).`}function nTe(e){return`Cannot apply size to non-oriented mark "${e}".`}function iTe(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function sTe(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function A9(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function O9(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function rTe(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${Ht(n)} and ${Ht(i)}). Using ${Ht(n)}.`}function aTe(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${Ht(n)} and ${Ht(i)}). Using the union of the two domains.`}function oTe(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function lTe(e){return`Dropping sort property ${Ht(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const UL="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",cTe="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",dTe="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",fTe="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function uTe(e){return`Cannot stack "${e}" if there is already "${e}2".`}function hTe(e){return`Cannot stack non-linear scale (${e}).`}function _Te(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function _0(e,t){return`Invalid ${e}: ${Ht(t)}.`}function gTe(e){return`Dropping day from datetime ${Ht(e)} as day cannot be combined with other units.`}function pTe(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function yTe(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function mTe(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function zL(e){return`1D error band does not support ${e}.`}function N9(e){return`Channel ${e} is required for "binned" bin.`}function wTe(e){return`Channel ${e} should not be used with "binned" bin.`}function bTe(e){return`Domain for ${e} is required for threshold scale.`}globalThis&&globalThis.__classPrivateFieldSet;globalThis&&globalThis.__classPrivateFieldGet;const C9=M2(I2);let Uu=C9;function TTe(e){return Uu=e,Uu}function ETe(){return Uu=C9,Uu}function me(...e){Uu.warn(...e)}function vTe(...e){Uu.debug(...e)}function Qd(e){if(e&&Be(e)){for(const t of zM)if(t in e)return!0}return!1}const R9=["january","february","march","april","may","june","july","august","september","october","november","december"],STe=R9.map(e=>e.substr(0,3)),L9=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],xTe=L9.map(e=>e.substr(0,3));function kTe(e){if(l1(e)&&(e=+e),$t(e))return e>4&&me(_0("quarter",e)),e-1;throw new Error(_0("quarter",e))}function BTe(e){if(l1(e)&&(e=+e),$t(e))return e-1;{const t=e.toLowerCase(),n=R9.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),s=STe.indexOf(i);if(s!==-1)return s;throw new Error(_0("month",e))}}function FTe(e){if(l1(e)&&(e=+e),$t(e))return e%7;{const t=e.toLowerCase(),n=L9.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),s=xTe.indexOf(i);if(s!==-1)return s;throw new Error(_0("day",e))}}function UM(e,t){const n=[];if(t&&e.day!==void 0&&pe(e).length>1&&(me(gTe(e)),e=Je(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const i=t?BTe(e.month):e.month;n.push(i)}else if(e.quarter!==void 0){const i=t?kTe(e.quarter):e.quarter;n.push($t(i)?i*3:`${i}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const i=t?FTe(e.day):e.day;n.push($t(i)?i+1:`${i}+1`)}else n.push(1);for(const i of["hours","minutes","seconds","milliseconds"]){const s=e[i];n.push(typeof s>"u"?0:s)}return n}function Td(e){const n=UM(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function ITe(e){const n=UM(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function MTe(e){const t=UM(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const P9={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},zM=pe(P9);function ATe(e){return!!P9[e]}function jM(e){return e.startsWith("utc")}function OTe(e){return e.substr(3)}const NTe={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function m1(e){return zM.filter(t=>D9(e,t))}function CTe(e){const t=m1(e);return t[t.length-1]}function D9(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function RTe(e,t,{end:n}={end:!1}){const i=FM(t),s=jM(e)?"utc":"";function l(f){return f==="quarter"?`(${s}quarter(${i})-1)`:`${s}${f}(${i})`}let c;const d={};for(const f of zM)D9(e,f)&&(d[f]=l(f),c=f);return n&&(d[c]+="+1"),ITe(d)}function $9(e){if(!e)return;const t=m1(e);return`timeUnitSpecifier(${Ht(t)}, ${Ht(NTe)})`}function LTe(e,t,n){if(!e)return;const i=$9(e);return`${n||jM(e)?"utc":"time"}Format(${t}, ${i})`}function Hn(e){if(!e)return;let t;return Se(e)?t={unit:e}:Be(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),jM(t.unit)&&(t.utc=!0,t.unit=OTe(t.unit)),t}function PTe(e){const{utc:t,...n}=Hn(e);return n.unit?(t?"utc":"")+pe(n).map(i=>Qt(`${i==="unit"?"":`_${i}_`}${n[i]}`)).join(""):(t?"utc":"")+"timeunit"+pe(n).map(i=>Qt(`_${i}_${n[i]}`)).join("")}function U9(e,t=n=>n){const n=Hn(e),i=CTe(n.unit);if(i&&i!=="day"){const s={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},l=n.step||1,c={...s,...i==="quarter"?{month:+s.month+l*3}:{[i]:+s[i]+l}};return`${t(Td(c))} - ${t(Td(s))}`}}function DTe(e){return e==null?void 0:e.param}function qM(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function GM(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function HM(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function WM(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function VM(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function YM(e){if(e!=null&&e.field){if(fe(e.range)&&e.range.length===2)return!0;if(Oe(e.range))return!0}return!1}function XM(e){return!!(e!=null&&e.field)&&(fe(e.oneOf)||fe(e.in))}function $Te(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function z9(e){return XM(e)||qM(e)||YM(e)||GM(e)||WM(e)||HM(e)||VM(e)}function zr(e,t){return F1(e,{timeUnit:t,wrapTime:!0})}function UTe(e,t){return e.map(n=>zr(n,t))}function j9(e,t=!0){var l;const{field:n}=e,i=(l=Hn(e.timeUnit))==null?void 0:l.unit,s=i?`time(${RTe(i,n)})`:ve(e,{expr:"datum"});if(qM(e))return`${s}===${zr(e.equal,i)}`;if(GM(e)){const c=e.lt;return`${s}<${zr(c,i)}`}else if(WM(e)){const c=e.gt;return`${s}>${zr(c,i)}`}else if(HM(e)){const c=e.lte;return`${s}<=${zr(c,i)}`}else if(VM(e)){const c=e.gte;return`${s}>=${zr(c,i)}`}else{if(XM(e))return`indexof([${UTe(e.oneOf,i).join(",")}], ${s}) !== -1`;if($Te(e))return KM(s,e.valid);if(YM(e)){const{range:c}=e,d=Oe(c)?{signal:`${c.signal}[0]`}:c[0],f=Oe(c)?{signal:`${c.signal}[1]`}:c[1];if(d!==null&&f!==null&&t)return"inrange("+s+", ["+zr(d,i)+", "+zr(f,i)+"])";const u=[];return d!==null&&u.push(`${s} >= ${zr(d,i)}`),f!==null&&u.push(`${s} <= ${zr(f,i)}`),u.length>0?u.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Ht(e)}`)}function KM(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function zTe(e){var t;return z9(e)&&e.timeUnit?{...e,timeUnit:(t=Hn(e.timeUnit))==null?void 0:t.unit}:e}const Lp={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function jTe(e){return e==="quantitative"||e==="temporal"}function q9(e){return e==="ordinal"||e==="nominal"}const Ed=Lp.quantitative,JM=Lp.ordinal,zu=Lp.temporal,QM=Lp.nominal,yh=Lp.geojson;function qTe(e){if(e)switch(e=e.toLowerCase(),e){case"q":case Ed:return"quantitative";case"t":case zu:return"temporal";case"o":case JM:return"ordinal";case"n":case QM:return"nominal";case yh:return"geojson"}}const ji={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},Ux={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function GTe(e,t){const n=Ux[e],i=Ux[t];return n===i||n==="ordinal-position"&&i==="time"||i==="ordinal-position"&&n==="time"}const HTe={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function jL(e){return HTe[e]}const G9=new Set(["linear","log","pow","sqrt","symlog"]),H9=new Set([...G9,"time","utc"]);function W9(e){return G9.has(e)}const V9=new Set(["quantile","quantize","threshold"]),WTe=new Set([...H9,...V9,"sequential","identity"]),VTe=new Set(["ordinal","bin-ordinal","point","band"]);function Ln(e){return VTe.has(e)}function Es(e){return WTe.has(e)}function hr(e){return H9.has(e)}function ju(e){return V9.has(e)}const YTe={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function XTe(e){return!Se(e)&&!!e.name}function Y9(e){return e==null?void 0:e.param}function KTe(e){return e==null?void 0:e.unionWith}function JTe(e){return Be(e)&&"field"in e}const QTe={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:aMe,domain:oMe,range:lMe,rangeMax:cMe,rangeMin:dMe,scheme:fMe,...ZTe}=QTe,e1e=pe(ZTe);function zx(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return hr(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return hr(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"clamp":return hr(e);case"nice":return hr(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Es(e)&&!pt(["log","time","utc","threshold","quantile"],e)}}function X9(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return eu(e)?void 0:J0e(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function t1e(e,t){return pt([JM,QM],t)?e===void 0||Ln(e):t===zu?pt([ji.TIME,ji.UTC,void 0],e):t===Ed?W9(e)||ju(e)||e===void 0:!0}function n1e(e,t,n=!1){if(!Lo(e))return!1;switch(e){case Zt:case Cn:case Ql:case gh:case Ws:case Nr:return hr(t)||t==="band"?!0:t==="point"?!n:!1;case Co:case tc:case Ro:case Zl:case ec:case Xd:return hr(t)||ju(t)||pt(["band","point","ordinal"],t);case Ji:case Pa:case Da:return t!=="band";case nc:case Qi:return t==="ordinal"||ju(t)}}const Ii={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},K9=Ii.arc,w1=Ii.area,b1=Ii.bar,i1e=Ii.image,T1=Ii.line,E1=Ii.point,s1e=Ii.rect,g0=Ii.rule,J9=Ii.text,ZM=Ii.tick,r1e=Ii.trail,eA=Ii.circle,tA=Ii.square,Q9=Ii.geoshape;function rc(e){return["line","area","trail"].includes(e)}function Z9(e){return["rect","bar","image","arc"].includes(e)}const a1e=new Set(pe(Ii));function xa(e){return e.type}const o1e=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],l1e=["fill","fillOpacity"],c1e=[...o1e,...l1e],d1e={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},qL=pe(d1e),f1e={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],tick:["bandSize","thickness"]},u1e={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},h1e={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},eG=pe(h1e);function vd(e){return e&&e.band!=null}const _1e={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},tG=5,g1e={binSpacing:1,continuousBandSize:tG,timeUnitBandPosition:.5},p1e={binSpacing:0,continuousBandSize:tG,timeUnitBandPosition:.5},y1e={thickness:1};function m1e(e){return xa(e)?e.type:e}function nA(e){const{channel:t,channelDef:n,markDef:i,scale:s,config:l}=e,c=sA(e);return we(n)&&!m9(n.aggregate)&&s&&hr(s.get("type"))?w1e({fieldDef:n,channel:t,markDef:i,ref:c,config:l}):c}function w1e({fieldDef:e,channel:t,markDef:n,ref:i,config:s}){return rc(n.type)?i:Ct("invalid",n,s)===null?[b1e(e,t),i]:i}function b1e(e,t){const n=iA(e,!0),s=Kd(t)==="y"?{field:{group:"height"}}:{value:0};return{test:n,...s}}function iA(e,t=!0){return KM(Se(e)?e:ve(e,{expr:"datum"}),!t)}function T1e(e){const{datum:t}=e;return Qd(t)?Td(t):`${Ht(t)}`}function Jc(e,t,n,i){const s={};if(t&&(s.scale=t),za(e)){const{datum:l}=e;Qd(l)?s.signal=Td(l):Oe(l)?s.signal=l.signal:Rp(l)?s.signal=l.expr:s.value=l}else s.field=ve(e,n);if(i){const{offset:l,band:c}=i;l&&(s.offset=l),c&&(s.band=c)}return s}function p0({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:i,startSuffix:s,bandPosition:l=.5}){const c=0<l&&l<1?"datum":void 0,d=ve(t,{expr:c,suffix:s}),f=n!==void 0?ve(n,{expr:c}):ve(t,{suffix:"end",expr:c}),u={};if(l===0||l===1){u.scale=e;const a=l===0?d:f;u.field=a}else{const a=Oe(l)?`${l.signal} * ${d} + (1-${l.signal}) * ${f}`:`${l} * ${d} + ${1-l} * ${f}`;u.signal=`scale("${e}", ${a})`}return i&&(u.offset=i),u}function sA({channel:e,channelDef:t,channel2Def:n,markDef:i,config:s,scaleName:l,scale:c,stack:d,offset:f,defaultRef:u,bandPosition:a}){if(t){if(Xe(t)){const m=c==null?void 0:c.get("type");if(Bi(t)){a??(a=cG({fieldDef:t,fieldDef2:n,markDef:i,config:s}));const{bin:w,timeUnit:y,type:o}=t;if(Wt(w)||a&&y&&o===zu)return d!=null&&d.impute?Jc(t,l,{binSuffix:"mid"},{offset:f}):a&&!Ln(m)?p0({scaleName:l,fieldOrDatumDef:t,bandPosition:a,offset:f}):Jc(t,l,Up(t,e)?{binSuffix:"range"}:{},{offset:f});if(Dn(w)){if(we(n))return p0({scaleName:l,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:a,offset:f});me(N9(e===Zt?Or:La))}}return Jc(t,l,Ln(m)?{binSuffix:"range"}:{},{offset:f,band:m==="band"?a??t.bandPosition??.5:void 0})}else if(xr(t)){const m=t.value,w=f?{offset:f}:{};return{...j_(e,m),...w}}}return lt(u)&&(u=u()),u&&{...u,...f?{offset:f}:{}}}function j_(e,t){return pt(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:pt(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:Kt(t)}function Sd(e){return e&&e!=="number"&&e!=="time"}function nG(e,t,n){return`${e}(${t}${n?`, ${Ht(n)}`:""})`}const E1e="  ";function rA({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:s,config:l}){var f,u;if(Sd(n))return _r({fieldOrDatumDef:e,format:t,formatType:n,expr:i,config:l});const c=iG(e,i,s),d=qu(e);if(t===void 0&&n===void 0&&l.customFormatTypes){if(d==="quantitative"){if(s&&l.normalizedNumberFormatType)return _r({fieldOrDatumDef:e,format:l.normalizedNumberFormat,formatType:l.normalizedNumberFormatType,expr:i,config:l});if(l.numberFormatType)return _r({fieldOrDatumDef:e,format:l.numberFormat,formatType:l.numberFormatType,expr:i,config:l})}if(d==="temporal"&&l.timeFormatType&&we(e)&&e.timeUnit===void 0)return _r({fieldOrDatumDef:e,format:l.timeFormat,formatType:l.timeFormatType,expr:i,config:l})}if(Hu(e)){const a=S1e({field:c,timeUnit:we(e)?(f=Hn(e.timeUnit))==null?void 0:f.unit:void 0,format:t,formatType:l.timeFormatType,rawTimeFormat:l.timeFormat,isUTCScale:Zd(e)&&((u=e.scale)==null?void 0:u.type)===ji.UTC});return a?{signal:a}:void 0}if(t=jx({type:d,specifiedFormat:t,config:l,normalizeStack:s}),we(e)&&Wt(e.bin)){const a=ve(e,{expr:i,binSuffix:"end"});return{signal:Pp(c,a,t,n,l)}}else return t||qu(e)==="quantitative"?{signal:`${aG(c,t)}`}:{signal:`isValid(${c}) ? ${c} : ""+${c}`}}function iG(e,t,n){return we(e)?n?`${ve(e,{expr:t,suffix:"end"})}-${ve(e,{expr:t,suffix:"start"})}`:ve(e,{expr:t}):T1e(e)}function _r({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:s,config:l,field:c}){if(c??(c=iG(e,i,s)),c!=="datum.value"&&we(e)&&Wt(e.bin)){const d=ve(e,{expr:i,binSuffix:"end"});return{signal:Pp(c,d,t,n,l)}}return{signal:nG(n,c,t)}}function sG(e,t,n,i,s,l){var c;if(!(Se(i)&&Sd(i))&&!(n===void 0&&i===void 0&&s.customFormatTypes&&qu(e)==="quantitative"&&(s.normalizedNumberFormatType&&Gu(e)&&e.stack==="normalize"||s.numberFormatType))){if(Gu(e)&&e.stack==="normalize"&&s.normalizedNumberFormat)return jx({type:"quantitative",config:s,normalizeStack:!0});if(Hu(e)){const d=we(e)?(c=Hn(e.timeUnit))==null?void 0:c.unit:void 0;return d===void 0&&s.customFormatTypes&&s.timeFormatType?void 0:v1e({specifiedFormat:n,timeUnit:d,config:s,omitTimeFormatConfig:l})}return jx({type:t,specifiedFormat:n,config:s})}}function rG(e,t,n){var i;if(e&&(Oe(e)||e==="number"||e==="time"))return e;if(Hu(t)&&n!=="time"&&n!=="utc")return we(t)&&((i=Hn(t==null?void 0:t.timeUnit))!=null&&i.utc)?"utc":"time"}function jx({type:e,specifiedFormat:t,config:n,normalizeStack:i}){if(Se(t))return t;if(e===Ed)return i?n.normalizedNumberFormat:n.numberFormat}function v1e({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:i}){return e||(t?{signal:$9(t)}:i?void 0:n.timeFormat)}function aG(e,t){return`format(${e}, "${t||""}")`}function GL(e,t,n,i){return Sd(n)?nG(n,e,t):aG(e,(Se(t)?t:void 0)??i.numberFormat)}function Pp(e,t,n,i,s){if(n===void 0&&i===void 0&&s.customFormatTypes&&s.numberFormatType)return Pp(e,t,s.numberFormat,s.numberFormatType,s);const l=GL(e,n,i,s),c=GL(t,n,i,s);return`${KM(e,!1)} ? "null" : ${l} + "${E1e}" + ${c}`}function S1e({field:e,timeUnit:t,format:n,formatType:i,rawTimeFormat:s,isUTCScale:l}){return!t||n?!t&&i?`${i}(${e}, '${n}')`:(n=Se(n)?n:s,`${l?"utc":"time"}Format(${e}, '${n}')`):LTe(t,e,l)}const v1="min",x1e={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function HL(e){return e in x1e}function oG(e){return!!(e!=null&&e.encoding)}function da(e){return e&&(e.op==="count"||!!e.field)}function lG(e){return e&&fe(e)}function Dp(e){return"row"in e||"column"in e}function aA(e){return!!e&&"header"in e}function S1(e){return"facet"in e}function k1e(e){return e.param}function B1e(e){return e&&!Se(e)&&"repeat"in e}function WL(e){const{field:t,timeUnit:n,bin:i,aggregate:s}=e;return{...n?{timeUnit:n}:{},...i?{bin:i}:{},...s?{aggregate:s}:{},field:t}}function oA(e){return"sort"in e}function cG({fieldDef:e,fieldDef2:t,markDef:n,config:i}){if(Xe(e)&&e.bandPosition!==void 0)return e.bandPosition;if(we(e)){const{timeUnit:s,bin:l}=e;if(s&&!t)return Z9(n.type)?0:bd("timeUnitBandPosition",n,i);if(Wt(l))return .5}}function dG({channel:e,fieldDef:t,fieldDef2:n,markDef:i,config:s,scaleType:l,useVlSizeChannel:c}){var u,a,m;const d=Zi(e),f=Ct(c?"size":d,i,s,{vgChannel:d});if(f!==void 0)return f;if(we(t)){const{timeUnit:w,bin:y}=t;if(w&&!n)return{band:bd("timeUnitBandSize",i,s)};if(Wt(y)&&!Ln(l))return{band:1}}if(Z9(i.type))return l?Ln(l)?((u=s[i.type])==null?void 0:u.discreteBandSize)||{band:1}:(a=s[i.type])==null?void 0:a.continuousBandSize:(m=s[i.type])==null?void 0:m.discreteBandSize}function fG(e,t,n,i){return Wt(e.bin)||e.timeUnit&&Bi(e)&&e.type==="temporal"?cG({fieldDef:e,fieldDef2:t,markDef:n,config:i})!==void 0:!1}function x1(e){return e&&"condition"in e}function k1(e){const t=e==null?void 0:e.condition;return!!t&&!fe(t)&&we(t)}function $p(e){const t=e==null?void 0:e.condition;return!!t&&!fe(t)&&Xe(t)}function F1e(e){const t=e==null?void 0:e.condition;return!!t&&(fe(t)||xr(t))}function we(e){return e&&(!!e.field||e.aggregate==="count")}function qu(e){return e==null?void 0:e.type}function za(e){return e&&"datum"in e}function fl(e){return Bi(e)&&!m0(e)||y0(e)}function VL(e){return Bi(e)&&e.type==="quantitative"&&!e.bin||y0(e)}function y0(e){return za(e)&&$t(e.datum)}function Xe(e){return we(e)||za(e)}function Bi(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function xr(e){return e&&"value"in e&&"value"in e}function Zd(e){return e&&("scale"in e||"sort"in e)}function Gu(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function uG(e){return e&&"legend"in e}function hG(e){return e&&("format"in e||"formatType"in e)}function I1e(e){return zi(e,["legend","axis","header","scale"])}function M1e(e){return"op"in e}function ve(e,t={}){let n=e.field;const i=t.prefix;let s=t.suffix,l="";if(O1e(e))n=i9("count");else{let c;if(!t.nofn)if(M1e(e))c=e.op;else{const{bin:d,aggregate:f,timeUnit:u}=e;Wt(d)?(c=w9(d),s=(t.binSuffix??"")+(t.suffix??"")):f?ic(f)?(l=`["${n}"]`,n=`argmax_${f.argmax}`):So(f)?(l=`["${n}"]`,n=`argmin_${f.argmin}`):c=String(f):u&&(c=PTe(u),s=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}c&&(n=n?`${c}_${n}`:c)}return s&&(n=`${n}_${s}`),i&&(n=`${i}_${n}`),t.forAs?IM(n):t.expr?e9(n,t.expr)+l:qs(n)+l}function m0(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return we(e)&&!!e.bin;case"temporal":return!1}throw new Error(I9(e.type))}function A1e(e){var t;return Zd(e)&&ju((t=e.scale)==null?void 0:t.type)}function O1e(e){return e.aggregate==="count"}function N1e(e,t){var c;const{field:n,bin:i,timeUnit:s,aggregate:l}=e;if(l==="count")return t.countTitle;if(Wt(i))return`${n} (binned)`;if(s){const d=(c=Hn(s))==null?void 0:c.unit;if(d)return`${n} (${m1(d).join("-")})`}else if(l)return ic(l)?`${n} for max ${l.argmax}`:So(l)?`${n} for min ${l.argmin}`:`${Ap(l)} of ${n}`;return n}function C1e(e){const{aggregate:t,bin:n,timeUnit:i,field:s}=e;if(ic(t))return`${s} for argmax(${t.argmax})`;if(So(t))return`${s} for argmin(${t.argmin})`;const l=Hn(i),c=t||(l==null?void 0:l.unit)||(l==null?void 0:l.maxbins)&&"timeunit"||Wt(n)&&"bin";return c?`${c.toUpperCase()}(${s})`:s}const _G=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return C1e(e);default:return N1e(e,t)}};let gG=_G;function pG(e){gG=e}function R1e(){pG(_G)}function tu(e,t,{allowDisabling:n,includeDefault:i=!0}){var d;const s=(d=lA(e))==null?void 0:d.title;if(!we(e))return s??e.title;const l=e,c=i?cA(l,t):void 0;return n?un(s,l.title,c):s??l.title??c}function lA(e){if(Gu(e)&&e.axis)return e.axis;if(uG(e)&&e.legend)return e.legend;if(aA(e)&&e.header)return e.header}function cA(e,t){return gG(e,t)}function w0(e){if(hG(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=lA(e)??{},{format:n,formatType:i}=t;return{format:n,formatType:i}}}function L1e(e,t){var l;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(oA(e)&&fe(e.sort))return"ordinal";const{aggregate:n,bin:i,timeUnit:s}=e;if(s)return"temporal";if(i||n&&!ic(n)&&!So(n))return"quantitative";if(Zd(e)&&((l=e.scale)!=null&&l.type))switch(Ux[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function ka(e){if(we(e))return e;if(k1(e))return e.condition}function wn(e){if(Xe(e))return e;if($p(e))return e.condition}function yG(e,t,n,i={}){if(Se(e)||$t(e)||Xl(e)){const s=Se(e)?"string":$t(e)?"number":"boolean";return me(D0e(t,s,e)),{value:e}}return Xe(e)?b0(e,t,n,i):$p(e)?{...e,condition:b0(e.condition,t,n,i)}:e}function b0(e,t,n,i){if(hG(e)){const{format:s,formatType:l,...c}=e;if(Sd(l)&&!n.customFormatTypes)return me($L(t)),b0(c,t,n,i)}else{const s=Gu(e)?"axis":uG(e)?"legend":aA(e)?"header":null;if(s&&e[s]){const{format:l,formatType:c,...d}=e[s];if(Sd(c)&&!n.customFormatTypes)return me($L(t)),b0({...e,[s]:d},t,n,i)}}return we(e)?dA(e,t,i):P1e(e)}function P1e(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=$t(n)?"quantitative":Se(n)?"nominal":Qd(n)?"temporal":void 0,{...e,type:t}}function dA(e,t,{compositeMark:n=!1}={}){const{aggregate:i,timeUnit:s,bin:l,field:c}=e,d={...e};if(!n&&i&&!PM(i)&&!ic(i)&&!So(i)&&(me(U0e(i)),delete d.aggregate),s&&(d.timeUnit=Hn(s)),c&&(d.field=`${c}`),Wt(l)&&(d.bin=B1(l,t)),Dn(l)&&!Rn(t)&&me(wTe(t)),Bi(d)){const{type:f}=d,u=qTe(f);f!==u&&(d.type=u),f!=="quantitative"&&m9(i)&&(me($0e(f,i)),d.type="quantitative")}else if(!f9(t)){const f=L1e(d,t);d.type=f}if(Bi(d)){const{compatible:f,warning:u}=D1e(d,t)||{};f===!1&&me(u)}if(oA(d)&&Se(d.sort)){const{sort:f}=d;if(HL(f))return{...d,sort:{encoding:f}};const u=f.substr(1);if(f.charAt(0)==="-"&&HL(u))return{...d,sort:{encoding:u,order:"descending"}}}if(aA(d)){const{header:f}=d;if(f){const{orient:u,...a}=f;if(u)return{...d,header:{...a,labelOrient:f.labelOrient||u,titleOrient:f.titleOrient||u}}}}return d}function B1(e,t){return Xl(e)?{maxbins:ML(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:ML(t)}:e}const gf={compatible:!0};function D1e(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case ho:case _o:case c1:return m0(e)?gf:{compatible:!1,warning:H0e(t)};case Zt:case Cn:case Ql:case gh:case Ji:case Pa:case Da:case Op:case Cp:case d1:case wd:case f1:case u1:case Xd:case Ws:case Nr:case h1:return gf;case Rr:case Gs:case Cr:case Lr:return n!==Ed?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:gf;case Ro:case Zl:case ec:case tc:case Co:case No:case Oo:case Or:case La:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:gf;case Qi:case nc:return!m0(e)&&!A1e(e)?{compatible:!1,warning:W0e(t)}:gf;case Np:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:gf}}function Hu(e){const{formatType:t}=w0(e);return t==="time"||!t&&$1e(e)}function $1e(e){return e&&(e.type==="temporal"||we(e)&&!!e.timeUnit)}function F1(e,{timeUnit:t,type:n,wrapTime:i,undefinedIfExprNotRequired:s}){var f;const l=t&&((f=Hn(t))==null?void 0:f.unit);let c=l||n==="temporal",d;return Rp(e)?d=e.expr:Oe(e)?d=e.signal:Qd(e)?(c=!0,d=Td(e)):(Se(e)||$t(e))&&c&&(d=`datetime(${Ht(e)})`,ATe(l)&&($t(e)&&e<1e4||Se(e)&&isNaN(Date.parse(e)))&&(d=Td({[l]:e}))),d?i&&c?`time(${d})`:d:s?void 0:Ht(e)}function mG(e,t){const{type:n}=e;return t.map(i=>{const s=F1(i,{timeUnit:we(e)?e.timeUnit:void 0,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:i})}function Up(e,t){return Wt(e.bin)?Lo(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const YL={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function zp(e){return e==null?void 0:e.condition}const wG=["domain","grid","labels","ticks","title"],U1e={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},bG={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},z1e={...bG,style:1,labelExpr:1,encoding:1};function XL(e){return!!z1e[e]}const j1e={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},TG=pe(j1e);function Po(e){return"mark"in e}class I1{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return Po(t)?m1e(t.mark)===this.name:!1}}function Qc(e,t){const n=e&&e[t];return n?fe(n)?yd(n,i=>!!i.field):we(n)||k1(n):!1}function EG(e,t){const n=e&&e[t];return n?fe(n)?yd(n,i=>!!i.field):we(n)||za(n)||$p(n):!1}function qx(e,t){if(Rn(t)){const n=e[t];if((we(n)||za(n))&&(q9(n.type)||we(n)&&n.timeUnit)){const i=NM(t);return EG(e,i)}}return!1}function fA(e){return yd(Hbe,t=>{if(Qc(e,t)){const n=e[t];if(fe(n))return yd(n,i=>!!i.aggregate);{const i=ka(n);return i&&!!i.aggregate}}return!1})}function vG(e,t){const n=[],i=[],s=[],l=[],c={};return uA(e,(d,f)=>{if(we(d)){const{field:u,aggregate:a,bin:m,timeUnit:w,...y}=d;if(a||w||m){const o=lA(d),T=o==null?void 0:o.title;let b=ve(d,{forAs:!0});const S={...T?[]:{title:tu(d,t,{allowDisabling:!0})},...y,field:b};if(a){let x;if(ic(a)?(x="argmax",b=ve({op:"argmax",field:a.argmax},{forAs:!0}),S.field=`${b}.${u}`):So(a)?(x="argmin",b=ve({op:"argmin",field:a.argmin},{forAs:!0}),S.field=`${b}.${u}`):a!=="boxplot"&&a!=="errorbar"&&a!=="errorband"&&(x=a),x){const k={op:x,as:b};u&&(k.field=u),l.push(k)}}else if(n.push(b),Bi(d)&&Wt(m)){if(i.push({bin:m,field:u,as:b}),n.push(ve(d,{binSuffix:"end"})),Up(d,f)&&n.push(ve(d,{binSuffix:"range"})),Rn(f)){const x={field:`${b}_end`};c[`${f}2`]=x}S.bin="binned",f9(f)||(S.type=Ed)}else if(w){s.push({timeUnit:w,field:u,as:b});const x=Bi(d)&&d.type!==zu&&"time";x&&(f===Op||f===wd?S.formatType=x:e0e(f)?S.legend={formatType:x,...S.legend}:Rn(f)&&(S.axis={formatType:x,...S.axis}))}c[f]=S}else n.push(u),c[f]=e[f]}else c[f]=e[f]}),{bins:i,timeUnits:s,aggregate:l,groupby:n,encoding:c}}function q1e(e,t,n){const i=n0e(t,n);if(i){if(i==="binned"){const s=e[t===Or?Zt:Cn];return!!(we(s)&&we(e[t])&&Dn(s.bin))}}else return!1;return!0}function G1e(e,t,n,i){const s={};for(const l of pe(e))d9(l)||me(G0e(l));for(let l of Kbe){if(!e[l])continue;const c=e[l];if(ph(l)){const d=h9(l),f=s[d];if(we(f)){if(jTe(f.type)&&we(c)&&!f.timeUnit){me(L0e(d));continue}}else l=d,me(P0e(d))}if(l==="angle"&&t==="arc"&&!e.theta&&(me(R0e),l=Ws),!q1e(e,l,t)){me(y1(l,t));continue}if(l===Co&&t==="line"){const d=ka(e[l]);if(d!=null&&d.aggregate){me(j0e);continue}}if(l===Ji&&(n?"fill"in e:"stroke"in e)){me(M9("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(l===Cp||l===Np&&!fe(c)&&!xr(c)||l===wd&&fe(c))c&&(s[l]=xe(c).reduce((d,f)=>(we(f)?d.push(dA(f,l)):me($x(f,l)),d),[]));else{if(l===wd&&c===null)s[l]=null;else if(!we(c)&&!za(c)&&!xr(c)&&!x1(c)&&!Oe(c)){me($x(c,l));continue}s[l]=yG(c,l,i)}}return s}function M1(e,t){const n={};for(const i of pe(e)){const s=yG(e[i],i,t,{compositeMark:!0});n[i]=s}return n}function H1e(e){const t=[];for(const n of pe(e))if(Qc(e,n)){const i=e[n],s=xe(i);for(const l of s)we(l)?t.push(l):k1(l)&&t.push(l.condition)}return t}function uA(e,t,n){if(e)for(const i of pe(e)){const s=e[i];if(fe(s))for(const l of s)t.call(n,l,i);else t.call(n,s,i)}}function W1e(e,t,n,i){return e?pe(e).reduce((s,l)=>{const c=e[l];return fe(c)?c.reduce((d,f)=>t.call(i,d,f,l),s):t.call(i,s,c,l)},n):n}function SG(e,t){return pe(t).reduce((n,i)=>{switch(i){case Zt:case Cn:case f1:case h1:case u1:case Or:case La:case Ql:case gh:case Ws:case No:case Nr:case Oo:case Cr:case Rr:case Lr:case Gs:case Op:case Qi:case Xd:case wd:return n;case Np:if(e==="line"||e==="trail")return n;case Cp:case d1:{const s=t[i];if(fe(s)||we(s))for(const l of xe(s))l.aggregate||n.push(ve(l,{}));return n}case Co:if(e==="trail")return n;case Ji:case Pa:case Da:case Ro:case Zl:case ec:case nc:case tc:{const s=ka(t[i]);return s&&!s.aggregate&&n.push(ve(s,{})),n}}},[])}function V1e(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let i,s;if(fe(t)){for(const l of t)l.aggregate?(i||(i=[]),i.push(l)):(s||(s=[]),s.push(l));i&&(n.tooltip=i)}else t.aggregate?n.tooltip=t:s=t;return fe(s)&&s.length===1&&(s=s[0]),{customTooltipWithoutAggregatedField:s,filteredEncoding:n}}function Gx(e,t,n,i=!0){if("tooltip"in n)return{tooltip:n.tooltip};const s=e.map(({fieldPrefix:c,titlePrefix:d})=>{const f=i?` of ${hA(t)}`:"";return{field:c+t.field,type:t.type,title:Oe(d)?{signal:`${d}"${escape(f)}"`}:d+f}}),l=H1e(n).map(I1e);return{tooltip:[...s,...ra(l,bt)]}}function hA(e){const{title:t,field:n}=e;return un(t,n)}function _A(e,t,n,i,s){const{scale:l,axis:c}=n;return({partName:d,mark:f,positionPrefix:u,endPositionPrefix:a=void 0,extraEncoding:m={}})=>{const w=hA(n);return xG(e,d,s,{mark:f,encoding:{[t]:{field:`${u}_${n.field}`,type:n.type,...w!==void 0?{title:w}:{},...l!==void 0?{scale:l}:{},...c!==void 0?{axis:c}:{}},...Se(a)?{[`${t}2`]:{field:`${a}_${n.field}`}}:{},...i,...m}})}}function xG(e,t,n,i){const{clip:s,color:l,opacity:c}=e,d=e.type;return e[t]||e[t]===void 0&&n[t]?[{...i,mark:{...n[t],...s?{clip:s}:{},...l?{color:l}:{},...c?{opacity:c}:{},...xa(i.mark)?i.mark:{type:i.mark},style:`${d}-${String(t)}`,...Xl(e[t])?{}:e[t]}}]:[]}function kG(e,t,n){const{encoding:i}=e,s=t==="vertical"?"y":"x",l=i[s],c=i[`${s}2`],d=i[`${s}Error`],f=i[`${s}Error2`];return{continuousAxisChannelDef:Dm(l,n),continuousAxisChannelDef2:Dm(c,n),continuousAxisChannelDefError:Dm(d,n),continuousAxisChannelDefError2:Dm(f,n),continuousAxis:s}}function Dm(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...i}=e;return n!==t&&me(mTe(n,t)),i}else return e}function BG(e,t){const{mark:n,encoding:i}=e,{x:s,y:l}=i;if(xa(n)&&n.orient)return n.orient;if(fl(s)){if(fl(l)){const c=we(s)&&s.aggregate,d=we(l)&&l.aggregate;if(!c&&d===t)return"vertical";if(!d&&c===t)return"horizontal";if(c===t&&d===t)throw new Error("Both x and y cannot have aggregate");return Hu(l)&&!Hu(s)?"horizontal":"vertical"}return"horizontal"}else{if(fl(l))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const T0="boxplot",Y1e=["box","median","outliers","rule","ticks"],X1e=new I1(T0,IG);function FG(e){return $t(e)?"tukey":e}function IG(e,{config:t}){e={...e,encoding:M1(e.encoding,t)};const{mark:n,encoding:i,params:s,projection:l,...c}=e,d=xa(n)?n:{type:n};s&&me(F9("boxplot"));const f=d.extent??t.boxplot.extent,u=Ct("size",d,t),a=d.invalid,m=FG(f),{bins:w,timeUnits:y,transform:o,continuousAxisChannelDef:T,continuousAxis:b,groupby:S,aggregate:x,encodingWithoutContinuousAxis:k,ticksOrient:I,boxOrient:B,customTooltipWithoutAggregatedField:O}=K1e(e,f,t),{color:A,size:R,...P}=k,D=se=>_A(d,b,T,se,t.boxplot),U=D(P),Y=D(k),z=D({...P,...R?{size:R}:{}}),W=Gx([{fieldPrefix:m==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:m==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],T,k),H={type:"tick",color:"black",opacity:1,orient:I,invalid:a,aria:!1},V=m==="min-max"?W:Gx([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],T,k),J=[...U({partName:"rule",mark:{type:"rule",invalid:a,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:V}),...U({partName:"rule",mark:{type:"rule",invalid:a,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:V}),...U({partName:"ticks",mark:H,positionPrefix:"lower_whisker",extraEncoding:V}),...U({partName:"ticks",mark:H,positionPrefix:"upper_whisker",extraEncoding:V})],G=[...m!=="tukey"?J:[],...Y({partName:"box",mark:{type:"bar",...u?{size:u}:{},orient:B,invalid:a,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:W}),...z({partName:"median",mark:{type:"tick",invalid:a,...Be(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...u?{size:u}:{},orient:I,aria:!1},positionPrefix:"mid_box",extraEncoding:W})];if(m==="min-max")return{...c,transform:(c.transform??[]).concat(o),layer:G};const oe=`datum["lower_box_${T.field}"]`,he=`datum["upper_box_${T.field}"]`,ne=`(${he} - ${oe})`,Fe=`${oe} - ${f} * ${ne}`,de=`${he} + ${f} * ${ne}`,ke=`datum["${T.field}"]`,Ue={joinaggregate:MG(T.field),groupby:S},at={transform:[{filter:`(${Fe} <= ${ke}) && (${ke} <= ${de})`},{aggregate:[{op:"min",field:T.field,as:`lower_whisker_${T.field}`},{op:"max",field:T.field,as:`upper_whisker_${T.field}`},{op:"min",field:`lower_box_${T.field}`,as:`lower_box_${T.field}`},{op:"max",field:`upper_box_${T.field}`,as:`upper_box_${T.field}`},...x],groupby:S}],layer:J},{tooltip:Tt,...Ft}=P,{scale:_e,axis:q}=T,j=hA(T),L=zi(q,["title"]),K=xG(d,"outliers",t.boxplot,{transform:[{filter:`(${ke} < ${Fe}) || (${ke} > ${de})`}],mark:"point",encoding:{[b]:{field:T.field,type:T.type,...j!==void 0?{title:j}:{},..._e!==void 0?{scale:_e}:{},...Dt(L)?{}:{axis:L}},...Ft,...A?{color:A}:{},...O?{tooltip:O}:{}}})[0];let Q;const ae=[...w,...y,Ue];return K?Q={transform:ae,layer:[K,at]}:(Q=at,Q.transform.unshift(...ae)),{...c,layer:[Q,{transform:o,layer:G}]}}function MG(e){return[{op:"q1",field:e,as:`lower_box_${e}`},{op:"q3",field:e,as:`upper_box_${e}`}]}function K1e(e,t,n){const i=BG(e,T0),{continuousAxisChannelDef:s,continuousAxis:l}=kG(e,i,T0),c=s.field,d=FG(t),f=[...MG(c),{op:"median",field:c,as:`mid_box_${c}`},{op:"min",field:c,as:(d==="min-max"?"lower_whisker_":"min_")+c},{op:"max",field:c,as:(d==="min-max"?"upper_whisker_":"max_")+c}],u=d==="min-max"||d==="tukey"?[]:[{calculate:`datum["upper_box_${c}"] - datum["lower_box_${c}"]`,as:`iqr_${c}`},{calculate:`min(datum["upper_box_${c}"] + datum["iqr_${c}"] * ${t}, datum["max_${c}"])`,as:`upper_whisker_${c}`},{calculate:`max(datum["lower_box_${c}"] - datum["iqr_${c}"] * ${t}, datum["min_${c}"])`,as:`lower_whisker_${c}`}],{[l]:a,...m}=e.encoding,{customTooltipWithoutAggregatedField:w,filteredEncoding:y}=V1e(m),{bins:o,timeUnits:T,aggregate:b,groupby:S,encoding:x}=vG(y,n),k=i==="vertical"?"horizontal":"vertical",I=i,B=[...o,...T,{aggregate:[...b,...f],groupby:S},...u];return{bins:o,timeUnits:T,transform:B,groupby:S,aggregate:b,continuousAxisChannelDef:s,continuousAxis:l,encodingWithoutContinuousAxis:x,ticksOrient:k,boxOrient:I,customTooltipWithoutAggregatedField:w}}const gA="errorbar",J1e=["ticks","rule"],Q1e=new I1(gA,AG);function AG(e,{config:t}){e={...e,encoding:M1(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:l,ticksOrient:c,markDef:d,outerSpec:f,tooltipEncoding:u}=OG(e,gA,t);delete l.size;const a=_A(d,s,i,l,t.errorbar),m=d.thickness,w=d.size,y={type:"tick",orient:c,aria:!1,...m!==void 0?{thickness:m}:{},...w!==void 0?{size:w}:{}},o=[...a({partName:"ticks",mark:y,positionPrefix:"lower",extraEncoding:u}),...a({partName:"ticks",mark:y,positionPrefix:"upper",extraEncoding:u}),...a({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...m!==void 0?{size:m}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u})];return{...f,transform:n,...o.length>1?{layer:o}:{...o[0]}}}function Z1e(e,t){const{encoding:n}=e;if(eEe(n))return{orient:BG(e,t),inputType:"raw"};const i=tEe(n),s=nEe(n),l=n.x,c=n.y;if(i){if(s)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const d=n.x2,f=n.y2;if(Xe(d)&&Xe(f))throw new Error(`${t} cannot have both x2 and y2`);if(Xe(d)){if(fl(l))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Xe(f)){if(fl(c))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const d=n.xError,f=n.xError2,u=n.yError,a=n.yError2;if(Xe(f)&&!Xe(d))throw new Error(`${t} cannot have xError2 without xError`);if(Xe(a)&&!Xe(u))throw new Error(`${t} cannot have yError2 without yError`);if(Xe(d)&&Xe(u))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Xe(d)){if(fl(l))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Xe(u)){if(fl(c))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function eEe(e){return(Xe(e.x)||Xe(e.y))&&!Xe(e.x2)&&!Xe(e.y2)&&!Xe(e.xError)&&!Xe(e.xError2)&&!Xe(e.yError)&&!Xe(e.yError2)}function tEe(e){return Xe(e.x2)||Xe(e.y2)}function nEe(e){return Xe(e.xError)||Xe(e.xError2)||Xe(e.yError)||Xe(e.yError2)}function OG(e,t,n){const{mark:i,encoding:s,params:l,projection:c,...d}=e,f=xa(i)?i:{type:i};l&&me(F9(t));const{orient:u,inputType:a}=Z1e(e,t),{continuousAxisChannelDef:m,continuousAxisChannelDef2:w,continuousAxisChannelDefError:y,continuousAxisChannelDefError2:o,continuousAxis:T}=kG(e,u,t),{errorBarSpecificAggregate:b,postAggregateCalculates:S,tooltipSummary:x,tooltipTitleWithFieldName:k}=iEe(f,m,w,y,o,a,t,n),{[T]:I,[T==="x"?"x2":"y2"]:B,[T==="x"?"xError":"yError"]:O,[T==="x"?"xError2":"yError2"]:A,...R}=s,{bins:P,timeUnits:D,aggregate:U,groupby:Y,encoding:z}=vG(R,n),W=[...U,...b],H=a!=="raw"?[]:Y,V=Gx(x,m,z,k);return{transform:[...d.transform??[],...P,...D,...W.length===0?[]:[{aggregate:W,groupby:H}],...S],groupby:H,continuousAxisChannelDef:m,continuousAxis:T,encodingWithoutContinuousAxis:z,ticksOrient:u==="vertical"?"horizontal":"vertical",markDef:f,outerSpec:d,tooltipEncoding:V}}function iEe(e,t,n,i,s,l,c,d){let f=[],u=[];const a=t.field;let m,w=!1;if(l==="raw"){const y=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":d.errorbar.center,o=e.extent?e.extent:y==="mean"?"stderr":"iqr";if(y==="median"!=(o==="iqr")&&me(yTe(y,o,c)),o==="stderr"||o==="stdev")f=[{op:o,field:a,as:`extent_${a}`},{op:y,field:a,as:`center_${a}`}],u=[{calculate:`datum["center_${a}"] + datum["extent_${a}"]`,as:`upper_${a}`},{calculate:`datum["center_${a}"] - datum["extent_${a}"]`,as:`lower_${a}`}],m=[{fieldPrefix:"center_",titlePrefix:Ap(y)},{fieldPrefix:"upper_",titlePrefix:KL(y,o,"+")},{fieldPrefix:"lower_",titlePrefix:KL(y,o,"-")}],w=!0;else{let T,b,S;o==="ci"?(T="mean",b="ci0",S="ci1"):(T="median",b="q1",S="q3"),f=[{op:b,field:a,as:`lower_${a}`},{op:S,field:a,as:`upper_${a}`},{op:T,field:a,as:`center_${a}`}],m=[{fieldPrefix:"upper_",titlePrefix:tu({field:a,aggregate:S,type:"quantitative"},d,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:tu({field:a,aggregate:b,type:"quantitative"},d,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:tu({field:a,aggregate:T,type:"quantitative"},d,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&me(pTe(e.center,e.extent)),l==="aggregated-upper-lower"?(m=[],u=[{calculate:`datum["${n.field}"]`,as:`upper_${a}`},{calculate:`datum["${a}"]`,as:`lower_${a}`}]):l==="aggregated-error"&&(m=[{fieldPrefix:"",titlePrefix:a}],u=[{calculate:`datum["${a}"] + datum["${i.field}"]`,as:`upper_${a}`}],s?u.push({calculate:`datum["${a}"] + datum["${s.field}"]`,as:`lower_${a}`}):u.push({calculate:`datum["${a}"] - datum["${i.field}"]`,as:`lower_${a}`}));for(const y of u)m.push({fieldPrefix:y.as.substring(0,6),titlePrefix:md(md(y.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:u,errorBarSpecificAggregate:f,tooltipSummary:m,tooltipTitleWithFieldName:w}}function KL(e,t,n){return`${Ap(e)} ${n} ${t}`}const pA="errorband",sEe=["band","borders"],rEe=new I1(pA,NG);function NG(e,{config:t}){e={...e,encoding:M1(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:l,markDef:c,outerSpec:d,tooltipEncoding:f}=OG(e,pA,t),u=c,a=_A(u,s,i,l,t.errorband),m=e.encoding.x!==void 0&&e.encoding.y!==void 0;let w={type:m?"area":"rect"},y={type:m?"line":"rule"};const o={...u.interpolate?{interpolate:u.interpolate}:{},...u.tension&&u.interpolate?{tension:u.tension}:{}};return m?(w={...w,...o,ariaRoleDescription:"errorband"},y={...y,...o,aria:!1}):u.interpolate?me(zL("interpolate")):u.tension&&me(zL("tension")),{...d,transform:n,layer:[...a({partName:"band",mark:w,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:f}),...a({partName:"borders",mark:y,positionPrefix:"lower",extraEncoding:f}),...a({partName:"borders",mark:y,positionPrefix:"upper",extraEncoding:f})]}}const CG={};function yA(e,t,n){const i=new I1(e,t);CG[e]={normalizer:i,parts:n}}function aEe(){return pe(CG)}yA(T0,IG,Y1e);yA(gA,AG,J1e);yA(pA,NG,sEe);const oEe=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],RG={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},LG={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},lEe=pe(RG),cEe=pe(LG),dEe={header:1,headerRow:1,headerColumn:1,headerFacet:1},PG=pe(dEe),DG=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],fEe={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},uEe={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},kr="_vgsid_",hEe={point:{on:"click",fields:[kr],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function mA(e){return e==="legend"||!!(e!=null&&e.legend)}function yv(e){return mA(e)&&Be(e)}function wA(e){return!!(e!=null&&e.select)}function $G(e){const t=[];for(const n of e||[]){if(wA(n))continue;const{expr:i,bind:s,...l}=n;if(s&&i){const c={...l,bind:s,init:i};t.push(c)}else{const c={...l,...i?{update:i}:{},...s?{bind:s}:{}};t.push(c)}}return t}function _Ee(e){return A1(e)||TA(e)||bA(e)}function bA(e){return"concat"in e}function A1(e){return"vconcat"in e}function TA(e){return"hconcat"in e}function UG({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Ba(e){return Be(e)&&e.step!==void 0}function JL(e){return e.view||e.width||e.height}const QL=20,gEe={align:1,bounds:1,center:1,columns:1,spacing:1},pEe=pe(gEe);function yEe(e,t,n){const i=n[t],s={},{spacing:l,columns:c}=i;l!==void 0&&(s.spacing=l),c!==void 0&&(S1(e)&&!Dp(e.facet)||bA(e))&&(s.columns=c),A1(e)&&(s.columns=1);for(const d of pEe)if(e[d]!==void 0)if(d==="spacing"){const f=e[d];s[d]=$t(f)?f:{row:f.row??l,column:f.column??l}}else s[d]=e[d];return s}function Hx(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function E0(e,t){const n=v0(e,t);return Ba(n)?n.step:zG}function v0(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return un(n,{step:e.step})}const zG=20,mEe={continuousWidth:200,continuousHeight:200,step:zG},wEe={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:mEe,mark:u1e,arc:{},area:{},bar:g1e,circle:{},geoshape:{},image:{},line:{},point:{},rect:p1e,rule:{color:"black"},square:{},text:{color:"black"},tick:y1e,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:YTe,projection:{},legend:fEe,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:hEe,style:{},title:{},facet:{spacing:QL},concat:{spacing:QL},normalizedNumberFormat:".0%"},Wa=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],ZL={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},eP={blue:Wa[0],orange:Wa[1],red:Wa[2],teal:Wa[3],green:Wa[4],yellow:Wa[5],purple:Wa[6],pink:Wa[7],brown:Wa[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function bEe(e={}){return{signals:[{name:"color",value:Be(e)?{...eP,...e}:eP}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function TEe(e){return{signals:[{name:"fontSize",value:Be(e)?{...ZL,...e}:ZL}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function EEe(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function jG(e){const t=pe(e||{}),n={};for(const i of t){const s=e[i];n[i]=zp(s)?T9(s):hs(s)}return n}function vEe(e){const t=pe(e),n={};for(const i of t)n[i]=jG(e[i]);return n}const SEe=[...eG,...TG,...PG,"background","padding","legend","lineBreak","scale","style","title","view"];function qG(e={}){const{color:t,font:n,fontSize:i,selection:s,...l}=e,c=rh({},Je(wEe),n?EEe(n):{},t?bEe(t):{},i?TEe(i):{},l||{});s&&ah(c,"selection",s,!0);const d=zi(c,SEe);for(const f of["background","lineBreak","padding"])c[f]&&(d[f]=hs(c[f]));for(const f of eG)c[f]&&(d[f]=Ri(c[f]));for(const f of TG)c[f]&&(d[f]=jG(c[f]));for(const f of PG)c[f]&&(d[f]=Ri(c[f]));return c.legend&&(d.legend=Ri(c.legend)),c.scale&&(d.scale=Ri(c.scale)),c.style&&(d.style=vEe(c.style)),c.title&&(d.title=Ri(c.title)),c.view&&(d.view=Ri(c.view)),d}const xEe=new Set(["view",...a1e]),kEe=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],BEe={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...f1e};function FEe(e){e=Je(e);for(const t of kEe)delete e[t];if(e.axis)for(const t in e.axis)zp(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of oEe)delete e.legend[t];if(e.mark){for(const t of qL)delete e.mark[t];e.mark.tooltip&&Be(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat($G(e.params)),delete e.params);for(const t of xEe){for(const i of qL)delete e[t][i];const n=BEe[t];if(n)for(const i of n)delete e[t][i];MEe(e,t)}for(const t of aEe())delete e[t];IEe(e);for(const t in e)Be(e[t])&&Dt(e[t])&&delete e[t];return Dt(e)?void 0:e}function IEe(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:i}=b9(e.title);Dt(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Dt(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Dt(i)?delete e.title:e.title=i}function MEe(e,t,n,i){const s=i?e[t][i]:e[t];t==="view"&&(n="cell");const l={...s,...e.style[n??t]};Dt(l)||(e.style[n??t]=l),i||delete e[t]}function O1(e){return"layer"in e}function AEe(e){return"repeat"in e}function OEe(e){return!fe(e.repeat)&&e.repeat.layer}class EA{map(t,n){return S1(t)?this.mapFacet(t,n):AEe(t)?this.mapRepeat(t,n):TA(t)?this.mapHConcat(t,n):A1(t)?this.mapVConcat(t,n):bA(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(O1(t))return this.mapLayer(t,n);if(Po(t))return this.mapUnit(t,n);throw new Error(DM(t))}mapLayer(t,n){return{...t,layer:t.layer.map(i=>this.mapLayerOrUnit(i,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(i=>this.map(i,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(i=>this.map(i,n))}}mapConcat(t,n){const{concat:i,...s}=t;return{...s,concat:i.map(l=>this.map(l,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const NEe={zero:1,center:1,normalize:1};function CEe(e){return e in NEe}const REe=new Set([K9,b1,w1,g0,E1,eA,tA,T1,J9,ZM]),LEe=new Set([b1,w1,K9]);function pf(e){return we(e)&&qu(e)==="quantitative"&&!e.bin}function tP(e,t,{orient:n,type:i}){const s=t==="x"?"y":"radius",l=t==="x",c=e[t],d=e[s];if(we(c)&&we(d))if(pf(c)&&pf(d)){if(c.stack)return t;if(d.stack)return s;const f=we(c)&&!!c.aggregate,u=we(d)&&!!d.aggregate;if(f!==u)return f?t:s;if(l&&i==="bar"){if(n==="vertical")return s;if(n==="horizontal")return t}}else{if(pf(c))return t;if(pf(d))return s}else{if(pf(c))return t;if(pf(d))return s}}function PEe(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function GG(e,t){var w,y;const n=xa(e)?e:{type:e},i=n.type;if(!REe.has(i))return null;const s=tP(t,"x",n)||tP(t,"theta",n);if(!s)return null;const l=t[s],c=we(l)?ve(l,{}):void 0,d=PEe(s),f=[],u=new Set;if(t[d]){const o=t[d],T=we(o)?ve(o,{}):void 0;T&&T!==c&&(f.push(d),u.add(T));const b=d==="x"?"xOffset":"yOffset",S=t[b],x=we(S)?ve(S,{}):void 0;x&&x!==c&&(f.push(b),u.add(x))}const a=Jbe.reduce((o,T)=>{if(T!=="tooltip"&&Qc(t,T)){const b=t[T];for(const S of xe(b)){const x=ka(S);if(x.aggregate)continue;const k=ve(x,{});(!k||!u.has(k))&&o.push({channel:T,fieldDef:x})}}return o},[]);let m;return l.stack!==void 0?Xl(l.stack)?m=l.stack?"zero":null:m=l.stack:LEe.has(i)&&(m="zero"),!m||!CEe(m)||fA(t)&&a.length===0?null:(w=l==null?void 0:l.scale)!=null&&w.type&&((y=l==null?void 0:l.scale)==null?void 0:y.type)!==ji.LINEAR?(l!=null&&l.stack&&me(hTe(l.scale.type)),null):Xe(t[$a(s)])?(l.stack!==void 0&&me(uTe(s)),null):(we(l)&&l.aggregate&&!c0e.has(l.aggregate)&&me(_Te(l.aggregate)),{groupbyChannels:f,groupbyFields:u,fieldChannel:s,impute:l.impute===null?!1:rc(i),stackBy:a,offset:m})}function DEe(e){const{point:t,line:n,...i}=e;return pe(i).length>1?i:i.type}function $Ee(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:zi(e[t],["point","line"])});return e}function mv(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?Be(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?Be(t.point)?t.point:{}:void 0}function nP(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class UEe{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(Po(t)){const{mark:i,encoding:s}=t,l=xa(i)?i:{type:i};switch(l.type){case"line":case"rule":case"trail":return!!mv(l,n[l.type],s);case"area":return!!mv(l,n[l.type],s)||!!nP(l,n[l.type])}}return!1}run(t,n,i){const{config:s}=n,{params:l,projection:c,mark:d,name:f,encoding:u,...a}=t,m=M1(u,s),w=xa(d)?d:{type:d},y=mv(w,s[w.type],m),o=w.type==="area"&&nP(w,s[w.type]),T=[{name:f,...l?{params:l}:{},mark:DEe({...w.type==="area"&&w.opacity===void 0&&w.fillOpacity===void 0?{opacity:.7}:{},...w}),encoding:zi(m,["shape"])}],b=GG(w,m);let S=m;if(b){const{fieldChannel:x,offset:k}=b;S={...m,[x]:{...m[x],...k?{stack:k}:{}}}}return S=zi(S,["y2","x2"]),o&&T.push({...c?{projection:c}:{},mark:{type:"line",...Du(w,["clip","interpolate","tension","tooltip"]),...o},encoding:S}),y&&T.push({...c?{projection:c}:{},mark:{type:"point",opacity:1,filled:!0,...Du(w,["clip","tooltip"]),...y},encoding:S}),i({...a,layer:T},{...n,config:$Ee(s)})}}function zEe(e,t){return t?Dp(e)?WG(e,t):HG(e,t):e}function wv(e,t){return t?WG(e,t):e}function Wx(e,t,n){const i=t[e];if(B1e(i)){if(i.repeat in n)return{...t,[e]:n[i.repeat]};me(F0e(i.repeat));return}return t}function HG(e,t){if(e=Wx("field",e,t),e!==void 0){if(e===null)return null;if(oA(e)&&da(e.sort)){const n=Wx("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function iP(e,t){if(we(e))return HG(e,t);{const n=Wx("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function sP(e,t){if(Xe(e)){const n=iP(e,t);if(n)return n;if(x1(e))return{condition:e.condition}}else{if($p(e)){const n=iP(e.condition,t);if(n)return{...e,condition:n};{const{condition:i,...s}=e;return s}}return e}}function WG(e,t){const n={};for(const i in e)if(Le(e,i)){const s=e[i];if(fe(s))n[i]=s.map(l=>sP(l,t)).filter(l=>l);else{const l=sP(s,t);l!==void 0&&(n[i]=l)}}return n}class jEe{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(Po(t)){const{encoding:n,mark:i}=t;if(i==="line"||xa(i)&&i.type==="line")for(const s of Xbe){const l=Kd(s),c=n[l];if(n[s]&&(we(c)&&!Dn(c.bin)||za(c)))return!0}}return!1}run(t,n,i){const{encoding:s,mark:l}=t;return me(X0e(!!s.x2,!!s.y2)),i({...t,mark:Be(l)?{...l,type:"rule"}:"rule"},n)}}class qEe extends EA{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[X1e,Q1e,rEe,new UEe,new jEe]}map(t,n){if(Po(t)){const i=Qc(t.encoding,ho),s=Qc(t.encoding,_o),l=Qc(t.encoding,c1);if(i||s||l)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:i,parentProjection:s}=n,l=wv(t.encoding,n.repeater),c={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(f=>f).join("_")}:{},...l?{encoding:l}:{}};if(i||s)return this.mapUnitWithParentEncodingOrProjection(c,n);const d=this.mapLayerOrUnit.bind(this);for(const f of this.nonFacetUnitNormalizers)if(f.hasMatchingType(c,n.config))return f.run(c,n,d);return c}mapRepeat(t,n){return OEe(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:i,spec:s,...l}=t,{row:c,column:d,layer:f}=i,{repeater:u={},repeaterPrefix:a=""}=n;return c||d?this.mapRepeat({...t,repeat:{...c?{row:c}:{},...d?{column:d}:{}},spec:{repeat:{layer:f},spec:s}},n):{...l,layer:f.map(m=>{const w={...u,layer:m},y=`${(s.name?`${s.name}_`:"")+a}child__layer_${Qt(m)}`,o=this.mapLayerOrUnit(s,{...n,repeater:w,repeaterPrefix:y});return o.name=y,o})}}mapNonLayerRepeat(t,n){const{repeat:i,spec:s,data:l,...c}=t;!fe(i)&&t.columns&&(t=zi(t,["columns"]),me(PL("repeat")));const d=[],{repeater:f={},repeaterPrefix:u=""}=n,a=!fe(i)&&i.row||[f?f.row:null],m=!fe(i)&&i.column||[f?f.column:null],w=fe(i)&&i||[f?f.repeat:null];for(const o of w)for(const T of a)for(const b of m){const S={repeat:o,row:T,column:b,layer:f.layer},x=(s.name?`${s.name}_`:"")+u+"child__"+(fe(i)?`${Qt(o)}`:(i.row?`row_${Qt(T)}`:"")+(i.column?`column_${Qt(b)}`:"")),k=this.map(s,{...n,repeater:S,repeaterPrefix:x});k.name=x,d.push(zi(k,["data"]))}const y=fe(i)?t.columns:i.column?i.column.length:1;return{data:s.data??l,align:"all",...c,columns:y,concat:d}}mapFacet(t,n){const{facet:i}=t;return Dp(i)&&t.columns&&(t=zi(t,["columns"]),me(PL("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:i,projection:s}=t,{parentEncoding:l,parentProjection:c,config:d}=n,f=aP({parentProjection:c,projection:s}),u=rP({parentEncoding:l,encoding:wv(i,n.repeater)});return this.mapUnit({...t,...f?{projection:f}:{},...u?{encoding:u}:{}},{config:d})}mapFacetedUnit(t,n){const{row:i,column:s,facet:l,...c}=t.encoding,{mark:d,width:f,projection:u,height:a,view:m,params:w,encoding:y,...o}=t,{facetMapping:T,layout:b}=this.getFacetMappingAndLayout({row:i,column:s,facet:l},n),S=wv(c,n.repeater);return this.mapFacet({...o,...b,facet:T,spec:{...f?{width:f}:{},...a?{height:a}:{},...m?{view:m}:{},...u?{projection:u}:{},mark:d,encoding:S,...w?{params:w}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:i,column:s,facet:l}=t;if(i||s){l&&me(V0e([...i?[ho]:[],...s?[_o]:[]]));const c={},d={};for(const f of[ho,_o]){const u=t[f];if(u){const{align:a,center:m,spacing:w,columns:y,...o}=u;c[f]=o;for(const T of["align","center","spacing"])u[T]!==void 0&&(d[T]??(d[T]={}),d[T][f]=u[T])}}return{facetMapping:c,layout:d}}else{const{align:c,center:d,spacing:f,columns:u,...a}=l;return{facetMapping:zEe(a,n.repeater),layout:{...c?{align:c}:{},...d?{center:d}:{},...f?{spacing:f}:{},...u?{columns:u}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:i,...s}){const{encoding:l,projection:c,...d}=t,f={...s,parentEncoding:rP({parentEncoding:n,encoding:l,layer:!0}),parentProjection:aP({parentProjection:i,projection:c})};return super.mapLayer({...d,...t.name?{name:[f.repeaterPrefix,t.name].filter(u=>u).join("_")}:{}},f)}}function rP({parentEncoding:e,encoding:t={},layer:n}){let i={};if(e){const s=new Set([...pe(e),...pe(t)]);for(const l of s){const c=t[l],d=e[l];if(Xe(c)){const f={...d,...c};i[l]=f}else $p(c)?i[l]={...c,condition:{...d,...c.condition}}:c||c===null?i[l]=c:(n||xr(d)||Oe(d)||Xe(d)||fe(d))&&(i[l]=d)}}else i=t;return!i||Dt(i)?void 0:i}function aP(e){const{parentProjection:t,projection:n}=e;return t&&n&&me(C0e({parentProjection:t,projection:n})),n??t}function vA(e){return"filter"in e}function GEe(e){return(e==null?void 0:e.stop)!==void 0}function VG(e){return"lookup"in e}function HEe(e){return"data"in e}function WEe(e){return"param"in e}function VEe(e){return"pivot"in e}function YEe(e){return"density"in e}function XEe(e){return"quantile"in e}function KEe(e){return"regression"in e}function JEe(e){return"loess"in e}function QEe(e){return"sample"in e}function ZEe(e){return"window"in e}function eve(e){return"joinaggregate"in e}function tve(e){return"flatten"in e}function nve(e){return"calculate"in e}function YG(e){return"bin"in e}function ive(e){return"impute"in e}function sve(e){return"timeUnit"in e}function rve(e){return"aggregate"in e}function ave(e){return"stack"in e}function ove(e){return"fold"in e}function lve(e){return e.map(t=>vA(t)?{filter:Zf(t.filter,zTe)}:t)}class cve extends EA{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=oP(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=oP(t,n),t.encoding){const i={};for(const[s,l]of Cl(t.encoding))i[s]=XG(l,n);t={...t,encoding:i}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:i,...s}=t;return i?{...s,params:Cl(i).map(([l,c])=>{const{init:d,bind:f,empty:u,...a}=c;a.type==="single"?(a.type="point",a.toggle=!1):a.type==="multi"&&(a.type="point"),n.emptySelections[l]=u!=="none";for(const m of qn(n.selectionPredicates[l]??{}))m.empty=u!=="none";return{name:l,value:d,select:a,bind:f}})}:t}}function oP(e,t){const{transform:n,...i}=e;if(n){const s=n.map(l=>{if(vA(l))return{filter:Vx(l,t)};if(YG(l)&&Jd(l.bin))return{...l,bin:KG(l.bin)};if(VG(l)){const{selection:c,...d}=l.from;return c?{...l,from:{param:c,...d}}:l}return l});return{...i,transform:s}}return e}function XG(e,t){var i,s;const n=Je(e);if(we(n)&&Jd(n.bin)&&(n.bin=KG(n.bin)),Zd(n)&&((s=(i=n.scale)==null?void 0:i.domain)!=null&&s.selection)){const{selection:l,...c}=n.scale.domain;n.scale.domain={...c,...l?{param:l}:{}}}if(x1(n))if(fe(n.condition))n.condition=n.condition.map(l=>{const{selection:c,param:d,test:f,...u}=l;return d?l:{...u,test:Vx(l,t)}});else{const{selection:l,param:c,test:d,...f}=XG(n.condition,t);n.condition=c?n.condition:{...f,test:Vx(n.condition,t)}}return n}function KG(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...i}=t;return{...e,extent:{...i,param:n}}}return e}function Vx(e,t){const n=i=>Zf(i,s=>{var l;const c=t.emptySelections[s]??!0,d={param:s,empty:c};return(l=t.selectionPredicates)[s]??(l[s]=[]),t.selectionPredicates[s].push(d),d});return e.selection?n(e.selection):Zf(e.test||e.filter,i=>i.selection?n(i.selection):i)}class Yx extends EA{map(t,n){const i=n.selections??[];if(t.params&&!Po(t)){const s=[];for(const l of t.params)wA(l)?i.push(l):s.push(l);t.params=s}return n.selections=i,super.map(t,n)}mapUnit(t,n){const i=n.selections;if(!i||!i.length)return t;const s=(n.path??[]).concat(t.name),l=[];for(const c of i)if(!c.views||!c.views.length)l.push(c);else for(const d of c.views)(Se(d)&&(d===t.name||s.includes(d))||fe(d)&&d.map(f=>s.indexOf(f)).every((f,u,a)=>f!==-1&&(u===0||f>a[u-1])))&&l.push(c);return l.length&&(t.params=l),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=Yx.prototype[e];Yx.prototype[e]=function(n,i){return t.call(this,n,dve(n,i))}}function dve(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function JG(e,t){t===void 0&&(t=qG(e.config));const n=_ve(e,t),{width:i,height:s}=e,l=gve(n,{width:i,height:s,autosize:e.autosize},t);return{...n,...l?{autosize:l}:{}}}const fve=new qEe,uve=new cve,hve=new Yx;function _ve(e,t={}){const n={config:t};return hve.map(fve.map(uve.map(e,n),n),n)}function lP(e){return Se(e)?{type:e}:e??{}}function gve(e,t,n){let{width:i,height:s}=t;const l=Po(e)||O1(e),c={};l?i=="container"&&s=="container"?(c.type="fit",c.contains="padding"):i=="container"?(c.type="fit-x",c.contains="padding"):s=="container"&&(c.type="fit-y",c.contains="padding"):(i=="container"&&(me(NL("width")),i=void 0),s=="container"&&(me(NL("height")),s=void 0));const d={type:"pad",...c,...n?lP(n.autosize):{},...lP(e.autosize)};if(d.type==="fit"&&!l&&(me(m0e),d.type="pad"),i=="container"&&!(d.type=="fit"||d.type=="fit-x")&&me(CL("width")),s=="container"&&!(d.type=="fit"||d.type=="fit-y")&&me(CL("height")),!sa(d,{type:"pad"}))return d}function pve(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function yve(e){return e?`fit-${_1(e)}`:"fit"}const mve=["background","padding"];function cP(e,t){const n={};for(const i of mve)e&&e[i]!==void 0&&(n[i]=hs(e[i]));return t&&(n.params=e.params),n}class Do{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new Do(Je(this.explicit),Je(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return un(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:i}){n!==void 0&&this.set(t,n,i)}set(t,n,i){return delete this[i?"implicit":"explicit"][t],this[i?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:i}){n[t]!==void 0?this.set(t,n[t],!0):i[t]!==void 0&&this.set(t,i[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of pe(t.combine())){const i=t.getWithExplicit(n);this.setWithExplicit(n,i)}}}function Vr(e){return{explicit:!0,value:e}}function rs(e){return{explicit:!1,value:e}}function QG(e){return(t,n,i,s)=>{const l=e(t.value,n.value);return l>0?t:l<0?n:N1(t,n,i,s)}}function N1(e,t,n,i){return e.explicit&&t.explicit&&me(rTe(n,i,e.value,t.value)),e}function Ll(e,t,n,i,s=N1){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:sa(e.value,t.value)?e:s(e,t,n,i)}class wve extends Do{constructor(t={},n={},i=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=i}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function Wu(e){return"url"in e}function Mg(e){return"values"in e}function ZG(e){return"name"in e&&!Wu(e)&&!Mg(e)&&!yl(e)}function yl(e){return e&&(eH(e)||tH(e)||SA(e))}function eH(e){return"sequence"in e}function tH(e){return"sphere"in e}function SA(e){return"graticule"in e}var Gt;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(Gt||(Gt={}));function nH(e){const{signals:t,hasLegend:n,index:i,...s}=e;return s.field=qs(s.field),s}function xd(e,t=!0,n=li){if(fe(e)){const i=e.map(s=>xd(s,t,n));return t?`[${i.join(", ")}]`:i}else if(Qd(e))return n(t?Td(e):MTe(e));return t?n(Ht(e)):e}function bve(e,t){for(const n of qn(e.component.selection??{})){const i=n.name;let s=`${i}${Dl}, ${n.resolve==="global"?"true":`{unit: ${Zc(e)}}`}`;for(const l of R1)l.defined(n)&&(l.signals&&(t=l.signals(e,n,t)),l.modifyExpr&&(s=l.modifyExpr(e,n,s)));t.push({name:i+Qve,on:[{events:{signal:n.name+Dl},update:`modify(${be(n.name+kd)}, ${s})`}]})}return xA(t)}function Tve(e,t){if(e.component.selection&&pe(e.component.selection).length){const n=be(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Jl("mousemove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return xA(t)}function Eve(e,t){let n=!1;for(const i of qn(e.component.selection??{})){const s=i.name,l=be(s+kd);if(t.filter(d=>d.name===s).length===0){const d=i.resolve==="global"?"union":i.resolve,f=i.type==="point"?", true, true)":")";t.push({name:i.name,update:`${wH}(${l}, ${be(d)}${f}`})}n=!0;for(const d of R1)d.defined(i)&&d.topLevelSignals&&(t=d.topLevelSignals(e,i,t))}return n&&t.filter(s=>s.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]}),xA(t)}function vve(e,t){const n=[...t],i=Zc(e,{escape:!1});for(const s of qn(e.component.selection??{})){const l={name:s.name+kd};if(s.project.hasSelectionId&&(l.transform=[{type:"collect",sort:{field:kr}}]),s.init){const d=s.project.items.map(nH);l.values=s.project.hasSelectionId?s.init.map(f=>({unit:i,[kr]:xd(f,!1)[0]})):s.init.map(f=>({unit:i,fields:d,values:xd(f,!1)}))}n.filter(d=>d.name===s.name+kd).length||n.push(l)}return n}function iH(e,t){for(const n of qn(e.component.selection??{}))for(const i of R1)i.defined(n)&&i.marks&&(t=i.marks(e,n,t));return t}function Sve(e,t){for(const n of e.children)cn(n)&&(t=iH(n,t));return t}function xve(e,t,n,i){const s=SH(e,t.param,t);return{signal:Es(n.get("type"))&&fe(i)&&i[0]>i[1]?`isValid(${s}) && reverse(${s})`:s}}function xA(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class zt{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){me(A0e);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const s of this._children)s.parent=t;this._children=[],t.removeChild(this);const i=t.parent.removeChild(t);this._parent=n,n.addChild(this,i),t.parent=this}}class Si extends zt{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,i,s){super(t,n),this.type=i,this.refCounts=s,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${n9()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}class fa extends zt{clone(){return new fa(null,Je(this.formula))}constructor(t,n){super(t),this.formula=n}static makeFromEncoding(t,n){const i=n.reduceFieldDef((s,l)=>{const{field:c,timeUnit:d}=l;if(d){const f=ve(l,{forAs:!0});s[bt({as:f,field:c,timeUnit:d})]={as:f,field:c,timeUnit:d}}return s},{});return Dt(i)?null:new fa(t,i)}static makeFromTransform(t,n){const{timeUnit:i,...s}={...n},l=Hn(i),c={...s,timeUnit:l};return new fa(t,{[bt(c)]:c})}merge(t){this.formula={...this.formula};for(const n in t.formula)this.formula[n]||(this.formula[n]=t.formula[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[i,s]of Cl(this.formula))t.has(s.as)||(n[i]=s);this.formula=n}producedFields(){return new Set(qn(this.formula).map(t=>t.as))}dependentFields(){return new Set(qn(this.formula).map(t=>t.field))}hash(){return`TimeUnit ${bt(this.formula)}`}assemble(){const t=[];for(const n of qn(this.formula)){const{field:i,as:s,timeUnit:l}=n,{unit:c,utc:d,...f}=Hn(l);t.push({field:qs(i),type:"timeunit",...c?{units:m1(c)}:{},...d?{timezone:"utc"}:{},...f,as:[s,`${s}_end`]})}return t}}const jp="_tuple_fields";class kve{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const Bve={defined:()=>!0,parse:(e,t,n)=>{const i=t.name,s=t.project??(t.project=new kve),l={},c={},d=new Set,f=(o,T)=>{const b=T==="visual"?o.channel:o.field;let S=Qt(`${i}_${b}`);for(let x=1;d.has(S);x++)S=Qt(`${i}_${b}_${x}`);return d.add(S),{[T]:S}},u=t.type,a=e.config.selection[u],m=n.value!==void 0?xe(n.value):null;let{fields:w,encodings:y}=Be(n.select)?n.select:{};if(!w&&!y&&m){for(const o of m)if(Be(o))for(const T of pe(o))Ybe(T)?(y||(y=[])).push(T):u==="interval"?(me(B0e),y=a.encodings):(w??(w=[])).push(T)}!w&&!y&&(y=a.encodings,"fields"in a&&(w=a.fields));for(const o of y??[]){const T=e.fieldDef(o);if(T){let b=T.field;if(T.aggregate){me(w0e(o,T.aggregate));continue}else if(!b){me(LL(o));continue}if(T.timeUnit){b=e.vgField(o);const S={timeUnit:T.timeUnit,as:b,field:T.field};c[bt(S)]=S}if(!l[b]){const S=u==="interval"&&Lo(o)&&Es(e.getScaleComponent(o).get("type"))?"R":T.bin?"R-RE":"E",x={field:b,channel:o,type:S,index:s.items.length};x.signals={...f(x,"data"),...f(x,"visual")},s.items.push(l[b]=x),s.hasField[b]=l[b],s.hasSelectionId=s.hasSelectionId||b===kr,l9(o)?(x.geoChannel=o,x.channel=o9(o),s.hasChannel[x.channel]=l[b]):s.hasChannel[o]=l[b]}}else me(LL(o))}for(const o of w??[]){if(s.hasField[o])continue;const T={type:"E",field:o,index:s.items.length};T.signals={...f(T,"data")},s.items.push(T),s.hasField[o]=T,s.hasSelectionId=s.hasSelectionId||o===kr}m&&(t.init=m.map(o=>s.items.map(T=>Be(o)?o[T.geoChannel||T.channel]!==void 0?o[T.geoChannel||T.channel]:o[T.field]:o))),Dt(c)||(s.timeUnit=new fa(null,c))},signals:(e,t,n)=>{const i=t.name+jp;return n.filter(l=>l.name===i).length>0||t.project.hasSelectionId?n:n.concat({name:i,value:t.project.items.map(nH)})}},po={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const i of t.project.items){const s=i.channel;if(!Lo(s))continue;const l=e.getScaleComponent(s),c=l?l.get("type"):void 0;if(!l||!Es(c)){me(E0e);continue}l.set("selectionExtent",{param:t.name,field:i.field},!0),n.push(i)}},topLevelSignals:(e,t,n)=>{const i=t.scales.filter(c=>n.filter(d=>d.name===c.signals.data).length===0);if(!e.parent||dP(e)||i.length===0)return n;const s=n.filter(c=>c.name===t.name)[0];let l=s.update;if(l.indexOf(wH)>=0)s.update=`{${i.map(c=>`${be(qs(c.field))}: ${c.signals.data}`).join(", ")}}`;else{for(const c of i){const d=`${be(qs(c.field))}: ${c.signals.data}`;l.includes(d)||(l=`${l.substring(0,l.length-1)}, ${d}}`)}s.update=l}return n.concat(i.map(c=>({name:c.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!dP(e))for(const i of t.scales){const s=n.filter(l=>l.name===i.signals.data)[0];s.push="outer",delete s.value,delete s.update}return n}};function Xx(e,t){return`domain(${be(e.scaleName(t))})`}function dP(e){return e.parent&&Eh(e.parent)&&!e.parent.parent}const nu="_brush",sH="_scale_trigger",Wh="geo_interval_init_tick",rH="_init",Fve="_center",Ive={defined:e=>e.type==="interval",parse:(e,t,n)=>{var i;if(e.hasProjection){const s={...Be(n.select)?n.select:{}};s.fields=[kr],s.encodings||(s.encodings=n.value?pe(n.value):[Rr,Cr]),n.select={type:"interval",...s}}if(t.translate&&!po.defined(t)){const s=`!event.item || event.item.mark.name !== ${be(t.name+nu)}`;for(const l of t.events){if(!l.between){me(`${l} is not an ordered event stream for interval selections.`);continue}const c=xe((i=l.between[0]).filter??(i.filter=[]));c.indexOf(s)<0&&c.push(s)}}},signals:(e,t,n)=>{const i=t.name,s=i+Dl,l=qn(t.project.hasChannel).filter(d=>d.channel===Zt||d.channel===Cn),c=t.init?t.init[0]:null;if(n.push(...l.reduce((d,f)=>d.concat(Mve(e,t,f,c&&c[f.index])),[])),e.hasProjection){const d=be(e.projectionName()),f=e.projectionName()+Fve,{x:u,y:a}=t.project.hasChannel,m=u&&u.signals.visual,w=a&&a.signals.visual,y=u?c&&c[u.index]:`${f}[0]`,o=a?c&&c[a.index]:`${f}[1]`,T=B=>e.getSizeSignalRef(B).signal,b=`[[${m?m+"[0]":"0"}, ${w?w+"[0]":"0"}],[${m?m+"[1]":T("width")}, ${w?w+"[1]":T("height")}]]`;c&&(n.unshift({name:i+rH,init:`[scale(${d}, [${u?y[0]:y}, ${a?o[0]:o}]), scale(${d}, [${u?y[1]:y}, ${a?o[1]:o}])]`}),(!u||!a)&&(n.find(O=>O.name===f)||n.unshift({name:f,update:`invert(${d}, [${T("width")}/2, ${T("height")}/2])`})));const S=`intersect(${b}, {markname: ${be(e.getName("marks"))}}, unit.mark)`,x=`{unit: ${Zc(e)}}`,k=`vlSelectionTuples(${S}, ${x})`,I=l.map(B=>B.signals.visual);return n.concat({name:s,on:[{events:[...I.length?[{signal:I.join(" || ")}]:[],...c?[{signal:Wh}]:[]],update:k}]})}else{if(!po.defined(t)){const u=i+sH,a=l.map(m=>{const w=m.channel,{data:y,visual:o}=m.signals,T=be(e.scaleName(w)),b=e.getScaleComponent(w).get("type"),S=Es(b)?"+":"";return`(!isArray(${y}) || (${S}invert(${T}, ${o})[0] === ${S}${y}[0] && ${S}invert(${T}, ${o})[1] === ${S}${y}[1]))`});a.length&&n.push({name:u,value:{},on:[{events:l.map(m=>({scale:e.scaleName(m.channel)})),update:a.join(" && ")+` ? ${u} : {}`}]})}const d=l.map(u=>u.signals.data),f=`unit: ${Zc(e)}, fields: ${i+jp}, values`;return n.concat({name:s,...c?{init:`{${f}: ${xd(c)}}`}:{},...d.length?{on:[{events:[{signal:d.join(" || ")}],update:`${d.join(" && ")} ? {${f}: [${d}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(cn(e)&&e.hasProjection&&t.init&&(n.filter(s=>s.name===Wh).length||n.unshift({name:Wh,value:null,on:[{events:"timer{1}",update:`${Wh} === null ? {} : ${Wh}`}]})),n),marks:(e,t,n)=>{const i=t.name,{x:s,y:l}=t.project.hasChannel,c=s==null?void 0:s.signals.visual,d=l==null?void 0:l.signals.visual,f=`data(${be(t.name+kd)})`;if(po.defined(t)||!s&&!l)return n;const u={x:s!==void 0?{signal:`${c}[0]`}:{value:0},y:l!==void 0?{signal:`${d}[0]`}:{value:0},x2:s!==void 0?{signal:`${c}[1]`}:{field:{group:"width"}},y2:l!==void 0?{signal:`${d}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const T of pe(u))u[T]=[{test:`${f}.length && ${f}[0].unit === ${Zc(e)}`,...u[T]},{value:0}];const{fill:a,fillOpacity:m,cursor:w,...y}=t.mark,o=pe(y).reduce((T,b)=>(T[b]=[{test:[s!==void 0&&`${c}[0] !== ${c}[1]`,l!==void 0&&`${d}[0] !== ${d}[1]`].filter(S=>S).join(" && "),value:y[b]},{value:null}],T),{});return[{name:`${i+nu}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:a},fillOpacity:{value:m}},update:u}},...n,{name:i+nu,type:"rect",clip:!0,encode:{enter:{...w?{cursor:{value:w}}:{},fill:{value:"transparent"}},update:{...u,...o}}}]}};function Mve(e,t,n,i){const s=!e.hasProjection,l=n.channel,c=n.signals.visual,d=be(s?e.scaleName(l):e.projectionName()),f=w=>`scale(${d}, ${w})`,u=e.getSizeSignalRef(l===Zt?"width":"height").signal,a=`${l}(unit)`,m=t.events.reduce((w,y)=>[...w,{events:y.between[0],update:`[${a}, ${a}]`},{events:y,update:`[${c}[0], clamp(${a}, 0, ${u})]`}],[]);if(s){const w=n.signals.data,y=po.defined(t),o=e.getScaleComponent(l),T=o?o.get("type"):void 0,b=i?{init:xd(i,!0,f)}:{value:[]};return m.push({events:{signal:t.name+sH},update:Es(T)?`[${f(`${w}[0]`)}, ${f(`${w}[1]`)}]`:"[0, 0]"}),y?[{name:w,on:[]}]:[{name:c,...b,on:m},{name:w,...i?{init:xd(i)}:{},on:[{events:{signal:c},update:`${c}[0] === ${c}[1] ? null : invert(${d}, ${c})`}]}]}else{const w=l===Zt?0:1,y=t.name+rH,o=i?{init:`[${y}[0][${w}], ${y}[1][${w}]]`}:{value:[]};return[{name:c,...o,on:m}]}}const Ave={defined:e=>e.type==="point",signals:(e,t,n)=>{const i=t.name,s=i+jp,l=t.project,c="(item().isVoronoi ? datum.datum : datum)",d=qn(e.component.selection??{}).reduce((m,w)=>w.type==="interval"?m.concat(w.name+nu):m,[]).map(m=>`indexof(item().mark.name, '${m}') < 0`).join(" && "),f=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${d?` && ${d}`:""}`;let u=`unit: ${Zc(e)}, `;if(t.project.hasSelectionId)u+=`${kr}: ${c}[${be(kr)}]`;else{const m=l.items.map(w=>{const y=e.fieldDef(w.channel);return y!=null&&y.bin?`[${c}[${be(e.vgField(w.channel,{}))}], ${c}[${be(e.vgField(w.channel,{binSuffix:"end"}))}]]`:`${c}[${be(w.field)}]`}).join(", ");u+=`fields: ${s}, values: [${m}]`}const a=t.events;return n.concat([{name:i+Dl,on:a?[{events:a,update:`${f} ? {${u}} : null`,force:!0}]:[]}])}};function mh(e,t,n,i){const s=x1(t)&&t.condition,l=i(t);if(s){const d=xe(s).map(f=>{const u=i(f);if(k1e(f)){const{param:a,empty:m}=f;return{test:vH(e,{param:a,empty:m}),...u}}else return{test:k0(e,f.test),...u}});return{[n]:[...d,...l!==void 0?[l]:[]]}}else return l!==void 0?{[n]:l}:{}}function kA(e,t="text"){const n=e.encoding[t];return mh(e,n,t,i=>C1(i,e.config))}function C1(e,t,n="datum"){if(e){if(xr(e))return Kt(e.value);if(Xe(e)){const{format:i,formatType:s}=w0(e);return rA({fieldOrDatumDef:e,format:i,formatType:s,expr:n,config:t})}}}function aH(e,t={}){const{encoding:n,markDef:i,config:s,stack:l}=e,c=n.tooltip;if(fe(c))return{tooltip:fP({tooltip:c},l,s,t)};{const d=t.reactiveGeom?"datum.datum":"datum";return mh(e,c,"tooltip",f=>{const u=C1(f,s,d);if(u)return u;if(f===null)return;let a=Ct("tooltip",i,s);if(a===!0&&(a={content:"encoding"}),Se(a))return{value:a};if(Be(a))return Oe(a)?a:a.content==="encoding"?fP(n,l,s,t):{signal:d}})}}function oH(e,t,n,{reactiveGeom:i}={}){const s={...n,...n.tooltipFormat},l={},c=i?"datum.datum":"datum",d=[];function f(a,m){const w=Kd(m),y=Bi(a)?a:{...a,type:e[w].type},o=y.title||cA(y,s),T=xe(o).join(", ");let b;if(Rn(m)){const S=m==="x"?"x2":"y2",x=ka(e[S]);if(Dn(y.bin)&&x){const k=ve(y,{expr:c}),I=ve(x,{expr:c}),{format:B,formatType:O}=w0(y);b=Pp(k,I,B,O,s),l[S]=!0}}if((Rn(m)||m===Ws||m===Nr)&&t&&t.fieldChannel===m&&t.offset==="normalize"){const{format:S,formatType:x}=w0(y);b=rA({fieldOrDatumDef:y,format:S,formatType:x,expr:c,config:s,normalizeStack:!0}).signal}b??(b=C1(y,s,c).signal),d.push({channel:m,key:T,value:b})}uA(e,(a,m)=>{we(a)?f(a,m):k1(a)&&f(a.condition,m)});const u={};for(const{channel:a,key:m,value:w}of d)!l[a]&&!u[m]&&(u[m]=w);return u}function fP(e,t,n,{reactiveGeom:i}={}){const s=oH(e,t,n,{reactiveGeom:i}),l=Cl(s).map(([c,d])=>`"${c}": ${d}`);return l.length>0?{signal:`{${l.join(", ")}}`}:void 0}function Ove(e){const{markDef:t,config:n}=e,i=Ct("aria",t,n);return i===!1?{}:{...i?{aria:i}:{},...Nve(e),...Cve(e)}}function Nve(e){const{mark:t,markDef:n,config:i}=e;if(i.aria===!1)return{};const s=Ct("ariaRoleDescription",n,i);return s!=null?{ariaRoleDescription:{value:s}}:t in g0e?{}:{ariaRoleDescription:{value:t}}}function Cve(e){const{encoding:t,markDef:n,config:i,stack:s}=e,l=t.description;if(l)return mh(e,l,"description",f=>C1(f,e.config));const c=Ct("description",n,i);if(c!=null)return{description:Kt(c)};if(i.aria===!1)return{};const d=oH(t,s,i);if(!Dt(d))return{description:{signal:Cl(d).map(([f,u],a)=>`"${a>0?"; ":""}${f}: " + (${u})`).join(" + ")}}}function Bn(e,t,n={}){const{markDef:i,encoding:s,config:l}=t,{vgChannel:c}=n;let{defaultRef:d,defaultValue:f}=n;d===void 0&&(f??(f=Ct(e,i,l,{vgChannel:c,ignoreVgConfig:!0})),f!==void 0&&(d=Kt(f)));const u=s[e];return mh(t,u,c??e,a=>sA({channel:e,channelDef:a,markDef:i,config:l,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:d}))}function lH(e,t={filled:void 0}){const{markDef:n,encoding:i,config:s}=e,{type:l}=n,c=t.filled??Ct("filled",n,s),d=pt(["bar","point","circle","square","geoshape"],l)?"transparent":void 0,f=Ct(c===!0?"color":void 0,n,s,{vgChannel:"fill"})??s.mark[c===!0&&"color"]??d,u=Ct(c===!1?"color":void 0,n,s,{vgChannel:"stroke"})??s.mark[c===!1&&"color"],a=c?"fill":"stroke",m={...f?{fill:Kt(f)}:{},...u?{stroke:Kt(u)}:{}};return n.color&&(c?n.fill:n.stroke)&&me(M9("property",{fill:"fill"in n,stroke:"stroke"in n})),{...m,...Bn("color",e,{vgChannel:a,defaultValue:c?f:u}),...Bn("fill",e,{defaultValue:i.fill?f:void 0}),...Bn("stroke",e,{defaultValue:i.stroke?u:void 0})}}function Rve(e){const{encoding:t,mark:n}=e,i=t.order;return!rc(n)&&xr(i)?mh(e,i,"zindex",s=>Kt(s.value)):{}}function Ag({channel:e,markDef:t,encoding:n={},model:i,bandPosition:s}){const l=`${e}Offset`,c=t[l],d=n[l];if((l==="xOffset"||l==="yOffset")&&d)return{offsetType:"encoding",offset:sA({channel:l,channelDef:d,markDef:t,config:i==null?void 0:i.config,scaleName:i.scaleName(l),scale:i.getScaleComponent(l),stack:null,defaultRef:Kt(c),bandPosition:s})};const f=t[l];return f?{offsetType:"visual",offset:f}:{}}function ti(e,t,{defaultPos:n,vgChannel:i}){const{encoding:s,markDef:l,config:c,stack:d}=t,f=s[e],u=s[$a(e)],a=t.scaleName(e),m=t.getScaleComponent(e),{offset:w,offsetType:y}=Ag({channel:e,markDef:l,encoding:s,model:t,bandPosition:.5}),o=BA({model:t,defaultPos:n,channel:e,scaleName:a,scale:m}),T=!f&&Rn(e)&&(s.latitude||s.longitude)?{field:t.getName(e)}:Lve({channel:e,channelDef:f,channel2Def:u,markDef:l,config:c,scaleName:a,scale:m,stack:d,offset:w,defaultRef:o,bandPosition:y==="encoding"?0:void 0});return T?{[i||e]:T}:void 0}function Lve(e){const{channel:t,channelDef:n,scaleName:i,stack:s,offset:l,markDef:c}=e;if(Xe(n)&&s&&t===s.fieldChannel){if(we(n)){let d=n.bandPosition;if(d===void 0&&c.type==="text"&&(t==="radius"||t==="theta")&&(d=.5),d!==void 0)return p0({scaleName:i,fieldOrDatumDef:n,startSuffix:"start",bandPosition:d,offset:l})}return Jc(n,i,{suffix:"end"},{offset:l})}return nA(e)}function BA({model:e,defaultPos:t,channel:n,scaleName:i,scale:s}){const{markDef:l,config:c}=e;return()=>{const d=Kd(n),f=Rl(n),u=Ct(n,l,c,{vgChannel:f});if(u!==void 0)return j_(n,u);switch(t){case"zeroOrMin":case"zeroOrMax":if(i){const a=s.get("type");if(!pt([ji.LOG,ji.TIME,ji.UTC],a)){if(s.domainDefinitelyIncludesZero())return{scale:i,value:0}}}if(t==="zeroOrMin")return d==="y"?{field:{group:"height"}}:{value:0};switch(d){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[Zi(n)],mult:.5}}}}const Pve={left:"x",center:"xc",right:"x2"},Dve={top:"y",middle:"yc",bottom:"y2"};function cH(e,t,n,i="middle"){if(e==="radius"||e==="theta")return Rl(e);const s=e==="x"?"align":"baseline",l=Ct(s,t,n);let c;return Oe(l)?(me(Y0e(s)),c=void 0):c=l,e==="x"?Pve[c||(i==="top"?"left":"center")]:Dve[c||i]}function S0(e,t,{defaultPos:n,defaultPos2:i,range:s}){return s?dH(e,t,{defaultPos:n,defaultPos2:i}):ti(e,t,{defaultPos:n})}function dH(e,t,{defaultPos:n,defaultPos2:i}){const{markDef:s,config:l}=t,c=$a(e),d=Zi(e),f=$ve(t,i,c),u=f[d]?cH(e,s,l):Rl(e);return{...ti(e,t,{defaultPos:n,vgChannel:u}),...f}}function $ve(e,t,n){const{encoding:i,mark:s,markDef:l,stack:c,config:d}=e,f=Kd(n),u=Zi(n),a=Rl(n),m=i[f],w=e.scaleName(f),y=e.getScaleComponent(f),{offset:o}=n in i||n in l?Ag({channel:n,markDef:l,encoding:i,model:e}):Ag({channel:f,markDef:l,encoding:i,model:e});if(!m&&(n==="x2"||n==="y2")&&(i.latitude||i.longitude)){const b=Zi(n),S=e.markDef[b];return S!=null?{[b]:{value:S}}:{[a]:{field:e.getName(n)}}}const T=Uve({channel:n,channelDef:m,channel2Def:i[n],markDef:l,config:d,scaleName:w,scale:y,stack:c,offset:o,defaultRef:void 0});return T!==void 0?{[a]:T}:$m(n,l)||$m(n,{[n]:h0(n,l,d.style),[u]:h0(u,l,d.style)})||$m(n,d[s])||$m(n,d.mark)||{[a]:BA({model:e,defaultPos:t,channel:n,scaleName:w,scale:y})()}}function Uve({channel:e,channelDef:t,channel2Def:n,markDef:i,config:s,scaleName:l,scale:c,stack:d,offset:f,defaultRef:u}){return Xe(t)&&d&&e.charAt(0)===d.fieldChannel.charAt(0)?Jc(t,l,{suffix:"start"},{offset:f}):nA({channel:e,channelDef:n,scaleName:l,scale:c,stack:d,markDef:i,config:s,offset:f,defaultRef:u})}function $m(e,t){const n=Zi(e),i=Rl(e);if(t[i]!==void 0)return{[i]:j_(e,t[i])};if(t[e]!==void 0)return{[i]:j_(e,t[e])};if(t[n]){const s=t[n];if(vd(s))me(z0e(n));else return{[n]:j_(e,s)}}}function Pl(e,t){const{config:n,encoding:i,markDef:s}=e,l=s.type,c=$a(t),d=Zi(t),f=i[t],u=i[c],a=e.getScaleComponent(t),m=a?a.get("type"):void 0,w=s.orient,y=i[d]??i.size??Ct("size",s,n,{vgChannel:d}),o=u9(t),T=l==="bar"&&(t==="x"?w==="vertical":w==="horizontal");return we(f)&&(Wt(f.bin)||Dn(f.bin)||f.timeUnit&&!u)&&!(y&&!vd(y))&&!i[o]&&!Ln(m)?qve({fieldDef:f,fieldDef2:u,channel:t,model:e}):(Xe(f)&&Ln(m)||T)&&!u?jve(f,t,e):dH(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function zve(e,t,n,i,s){if(vd(s))if(n){const c=n.get("type");if(c==="band"){let d=`bandwidth('${t}')`;return s.band!==1&&(d=`${s.band} * ${d}`),{signal:`max(0.25, ${d})`}}else s.band!==1&&(me(Q0e(c)),s=void 0)}else return{mult:s.band,field:{group:e}};else{if(Oe(s))return s;if(s)return{value:s}}if(n){const c=n.get("range");if(sc(c)&&$t(c.step))return{value:c.step-2}}return{value:E0(i.view,e)-2}}function jve(e,t,n){const{markDef:i,encoding:s,config:l,stack:c}=n,d=i.orient,f=n.scaleName(t),u=n.getScaleComponent(t),a=Zi(t),m=$a(t),w=u9(t),y=n.scaleName(w),o=n.getScaleComponent(NM(t)),T=d==="horizontal"&&t==="y"||d==="vertical"&&t==="x";let b;(s.size||i.size)&&(T?b=Bn("size",n,{vgChannel:a,defaultRef:Kt(i.size)}):me(nTe(i.type)));const S=!!b,x=dG({channel:t,fieldDef:e,markDef:i,config:l,scaleType:u==null?void 0:u.get("type"),useVlSizeChannel:T});b=b||{[a]:zve(a,y||f,o||u,l,x)};const k=(u==null?void 0:u.get("type"))==="band"&&vd(x)&&!S?"top":"middle",I=cH(t,i,l,k),B=I==="xc"||I==="yc",{offset:O,offsetType:A}=Ag({channel:t,markDef:i,encoding:s,model:n,bandPosition:B?.5:0}),R=nA({channel:t,channelDef:e,markDef:i,config:l,scaleName:f,scale:u,stack:c,offset:O,defaultRef:BA({model:n,defaultPos:"mid",channel:t,scaleName:f,scale:u}),bandPosition:B?A==="encoding"?0:.5:Oe(x)?{signal:`(1-${x})/2`}:vd(x)?(1-x.band)/2:0});if(a)return{[I]:R,...b};{const P=Rl(m),D=b[a],U=O?{...D,offset:O}:D;return{[I]:R,[P]:fe(R)?[R[0],{...R[1],offset:U}]:{...R,offset:U}}}}function Vh(e,t,n,i,s){if(a9(e))return 0;const l=e==="x"||e==="y2"?-t/2:t/2;if(Oe(n)||Oe(s)||Oe(i)){const c=go(n),d=go(s),f=go(i),u=f?`${f} + `:"",a=c?`(${c} ? -1 : 1) * `:"",m=d?`(${d} + ${l})`:l;return{signal:u+a+m}}else return s=s||0,i+(n?-s-l:+s+l)}function qve({fieldDef:e,fieldDef2:t,channel:n,model:i}){var I;const{config:s,markDef:l,encoding:c}=i,d=i.getScaleComponent(n),f=i.scaleName(n),u=d?d.get("type"):void 0,a=d.get("reverse"),m=dG({channel:n,fieldDef:e,markDef:l,config:s,scaleType:u}),w=(I=i.component.axes[n])==null?void 0:I[0],y=(w==null?void 0:w.get("translate"))??.5,o=Rn(n)?Ct("binSpacing",l,s)??0:0,T=$a(n),b=Rl(n),S=Rl(T),{offset:x}=Ag({channel:n,markDef:l,encoding:c,model:i,bandPosition:0}),k=Oe(m)?{signal:`(1-${m.signal})/2`}:vd(m)?(1-m.band)/2:.5;if(Wt(e.bin)||e.timeUnit)return{[S]:uP({fieldDef:e,scaleName:f,bandPosition:k,offset:Vh(T,o,a,y,x)}),[b]:uP({fieldDef:e,scaleName:f,bandPosition:Oe(k)?{signal:`1-${k.signal}`}:1-k,offset:Vh(n,o,a,y,x)})};if(Dn(e.bin)){const B=Jc(e,f,{},{offset:Vh(T,o,a,y,x)});if(we(t))return{[S]:B,[b]:Jc(t,f,{},{offset:Vh(n,o,a,y,x)})};if(Jd(e.bin)&&e.bin.step)return{[S]:B,[b]:{signal:`scale("${f}", ${ve(e,{expr:"datum"})} + ${e.bin.step})`,offset:Vh(n,o,a,y,x)}}}me(N9(T))}function uP({fieldDef:e,scaleName:t,bandPosition:n,offset:i}){return p0({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:i})}const Gve=new Set(["aria","width","height"]);function Vs(e,t){const{fill:n=void 0,stroke:i=void 0}=t.color==="include"?lH(e):{};return{...Hve(e.markDef,t),...hP(e,"fill",n),...hP(e,"stroke",i),...Bn("opacity",e),...Bn("fillOpacity",e),...Bn("strokeOpacity",e),...Bn("strokeWidth",e),...Bn("strokeDash",e),...Rve(e),...aH(e),...kA(e,"href"),...Ove(e)}}function hP(e,t,n){const{config:i,mark:s,markDef:l}=e;if(Ct("invalid",l,i)==="hide"&&n&&!rc(s)){const d=Wve(e,{invalid:!0,channels:g1});if(d)return{[t]:[{test:d,value:null},...xe(n)]}}return n?{[t]:n}:{}}function Hve(e,t){return _0e.reduce((n,i)=>(!Gve.has(i)&&e[i]!==void 0&&t[i]!=="ignore"&&(n[i]=Kt(e[i])),n),{})}function Wve(e,{invalid:t=!1,channels:n}){const i=n.reduce((l,c)=>{const d=e.getScaleComponent(c);if(d){const f=d.get("type"),u=e.vgField(c,{expr:"datum"});u&&Es(f)&&(l[u]=!0)}return l},{}),s=pe(i);if(s.length>0){const l=t?"||":"&&";return s.map(c=>iA(c,t)).join(` ${l} `)}}function FA(e){const{config:t,markDef:n}=e;if(Ct("invalid",n,t)){const s=Vve(e,{channels:Ua});if(s)return{defined:{signal:s}}}return{}}function Vve(e,{invalid:t=!1,channels:n}){const i=n.reduce((l,c)=>{var f;const d=e.getScaleComponent(c);if(d){const u=d.get("type"),a=e.vgField(c,{expr:"datum",binSuffix:(f=e.stack)!=null&&f.impute?"mid":void 0});a&&Es(u)&&(l[a]=!0)}return l},{}),s=pe(i);if(s.length>0){const l=t?"||":"&&";return s.map(c=>iA(c,t)).join(` ${l} `)}}function _P(e,t){if(t!==void 0)return{[e]:Kt(t)}}const bv="voronoi",fH={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(bv)},marks:(e,t,n)=>{const{x:i,y:s}=t.project.hasChannel,l=e.mark;if(rc(l))return me(b0e(l)),n;const c={name:e.getName(bv),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...aH(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:i||!s?"datum.datum.x || 0":"0"},y:{expr:s||!i?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let d=0,f=!1;return n.forEach((u,a)=>{const m=u.name??"";m===e.component.mark[0].name?d=a:m.indexOf(bv)>=0&&(f=!0)}),f||n.splice(d+1,0,c),n}},uH={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!mA(e.bind),parse:(e,t,n)=>bH(t,n),topLevelSignals:(e,t,n)=>{const i=t.name,s=t.project,l=t.bind,c=t.init&&t.init[0],d=fH.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return s.items.forEach((f,u)=>{const a=Qt(`${i}_${f.field}`);n.filter(w=>w.name===a).length||n.unshift({name:a,...c?{init:xd(c[u])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${d}[${be(f.field)}] : null`}]:[],bind:l[f.field]??l[f.channel]??l})}),n},signals:(e,t,n)=>{const i=t.name,s=t.project,l=n.filter(u=>u.name===i+Dl)[0],c=i+jp,d=s.items.map(u=>Qt(`${i}_${u.field}`)),f=d.map(u=>`${u} !== null`).join(" && ");return d.length&&(l.update=`${f} ? {fields: ${c}, values: [${d.join(", ")}]} : null`),delete l.value,delete l.on,n}},x0="_toggle",hH={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+x0,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+Dl,i=t.name+x0;return`${i} ? null : ${n}, `+(t.resolve==="global"?`${i} ? null : true, `:`${i} ? null : {unit: ${Zc(e)}}, `)+`${i} ? ${n} : null`}},Yve={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=Se(t.clear)?Jl(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(uH.defined(t))for(const i of t.project.items){const s=n.findIndex(l=>l.name===Qt(`${t.name}_${i.field}`));s!==-1&&n[s].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function i(s,l){s!==-1&&n[s].on&&n[s].on.push({events:t.clear,update:l})}if(t.type==="interval")for(const s of t.project.items){const l=n.findIndex(c=>c.name===s.signals.visual);if(i(l,"[0, 0]"),l===-1){const c=n.findIndex(d=>d.name===s.signals.data);i(c,"null")}}else{let s=n.findIndex(l=>l.name===t.name+Dl);i(s,"null"),hH.defined(t)&&(s=n.findIndex(l=>l.name===t.name+x0),i(s,"false"))}return n}},_H={defined:e=>{const t=e.resolve==="global"&&e.bind&&mA(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==kr;return t&&!n&&me(v0e),t&&n},parse:(e,t,n)=>{const i=Je(n);if(i.select=Se(i.select)?{type:i.select,toggle:t.toggle}:{...i.select,toggle:t.toggle},bH(t,i),Be(n.select)&&(n.select.on||n.select.clear)){const c='event.item && indexof(event.item.mark.role, "legend") < 0';for(const d of t.events)d.filter=xe(d.filter??[]),d.filter.includes(c)||d.filter.push(c)}const s=yv(t.bind)?t.bind.legend:"click",l=Se(s)?Jl(s,"view"):xe(s);t.bind={legend:{merge:l}}},topLevelSignals:(e,t,n)=>{const i=t.name,s=yv(t.bind)&&t.bind.legend,l=c=>d=>{const f=Je(d);return f.markname=c,f};for(const c of t.project.items){if(!c.hasLegend)continue;const d=`${Qt(c.field)}_legend`,f=`${i}_${d}`;if(n.filter(a=>a.name===f).length===0){const a=s.merge.map(l(`${d}_symbols`)).concat(s.merge.map(l(`${d}_labels`))).concat(s.merge.map(l(`${d}_entries`)));n.unshift({name:f,...t.init?{}:{value:null},on:[{events:a,update:"datum.value || item().items[0].items[0].datum.value",force:!0},{events:s.merge,update:`!event.item || !datum ? null : ${f}`,force:!0}]})}}return n},signals:(e,t,n)=>{const i=t.name,s=t.project,l=n.find(w=>w.name===i+Dl),c=i+jp,d=s.items.filter(w=>w.hasLegend).map(w=>Qt(`${i}_${Qt(w.field)}_legend`)),u=`${d.map(w=>`${w} !== null`).join(" && ")} ? {fields: ${c}, values: [${d.join(", ")}]} : null`;t.events&&d.length>0?l.on.push({events:d.map(w=>({signal:w})),update:u}):d.length>0&&(l.update=u,delete l.value,delete l.on);const a=n.find(w=>w.name===i+x0),m=yv(t.bind)&&t.bind.legend;return a&&(t.events?a.on.push({...a.on[0],events:m}):a.on[0].events=m),n}};function Xve(e,t,n){var s;const i=(s=e.fieldDef(t))==null?void 0:s.field;for(const l of qn(e.component.selection??{})){const c=l.project.hasField[i]??l.project.hasChannel[t];if(c&&_H.defined(l)){const d=n.get("selections")??[];d.push(l.name),n.set("selections",d,!1),c.hasLegend=!0}}}const gH="_translate_anchor",pH="_translate_delta",Kve={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const i=t.name,s=po.defined(t),l=i+gH,{x:c,y:d}=t.project.hasChannel;let f=Jl(t.translate,"scope");return s||(f=f.map(u=>(u.between[0].markname=i+nu,u))),n.push({name:l,value:{},on:[{events:f.map(u=>u.between[0]),update:"{x: x(unit), y: y(unit)"+(c!==void 0?`, extent_x: ${s?Xx(e,Zt):`slice(${c.signals.visual})`}`:"")+(d!==void 0?`, extent_y: ${s?Xx(e,Cn):`slice(${d.signals.visual})`}`:"")+"}"}]},{name:i+pH,value:{},on:[{events:f,update:`{x: ${l}.x - x(unit), y: ${l}.y - y(unit)}`}]}),c!==void 0&&gP(e,t,c,"width",n),d!==void 0&&gP(e,t,d,"height",n),n}};function gP(e,t,n,i,s){const l=t.name,c=l+gH,d=l+pH,f=n.channel,u=po.defined(t),a=s.filter(B=>B.name===n.signals[u?"data":"visual"])[0],m=e.getSizeSignalRef(i).signal,w=e.getScaleComponent(f),y=w&&w.get("type"),o=w&&w.get("reverse"),T=u?f===Zt?o?"":"-":o?"-":"":"",b=`${c}.extent_${f}`,S=`${T}${d}.${f} / ${u?`${m}`:`span(${b})`}`,x=!u||!w?"panLinear":y==="log"?"panLog":y==="symlog"?"panSymlog":y==="pow"?"panPow":"panLinear",k=u?y==="pow"?`, ${w.get("exponent")??1}`:y==="symlog"?`, ${w.get("constant")??1}`:"":"",I=`${x}(${b}, ${S}${k})`;a.on.push({events:{signal:d},update:u?I:`clampRange(${I}, 0, ${m})`})}const yH="_zoom_anchor",mH="_zoom_delta",Jve={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const i=t.name,s=po.defined(t),l=i+mH,{x:c,y:d}=t.project.hasChannel,f=be(e.scaleName(Zt)),u=be(e.scaleName(Cn));let a=Jl(t.zoom,"scope");return s||(a=a.map(m=>(m.markname=i+nu,m))),n.push({name:i+yH,on:[{events:a,update:s?"{"+[f?`x: invert(${f}, x(unit))`:"",u?`y: invert(${u}, y(unit))`:""].filter(m=>m).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:l,on:[{events:a,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),c!==void 0&&pP(e,t,c,"width",n),d!==void 0&&pP(e,t,d,"height",n),n}};function pP(e,t,n,i,s){const l=t.name,c=n.channel,d=po.defined(t),f=s.filter(x=>x.name===n.signals[d?"data":"visual"])[0],u=e.getSizeSignalRef(i).signal,a=e.getScaleComponent(c),m=a&&a.get("type"),w=d?Xx(e,c):f.name,y=l+mH,o=`${l}${yH}.${c}`,T=!d||!a?"zoomLinear":m==="log"?"zoomLog":m==="symlog"?"zoomSymlog":m==="pow"?"zoomPow":"zoomLinear",b=d?m==="pow"?`, ${a.get("exponent")??1}`:m==="symlog"?`, ${a.get("constant")??1}`:"":"",S=`${T}(${w}, ${o}, ${y}${b})`;f.on.push({events:{signal:y},update:d?S:`clampRange(${S}, 0, ${u})`})}const kd="_store",Dl="_tuple",Qve="_modify",wH="vlSelectionResolve",R1=[Ave,Ive,Bve,hH,uH,po,_H,Yve,Kve,Jve,fH];function Zve(e){let t=e.parent;for(;t&&!wr(t);)t=t.parent;return t}function Zc(e,{escape:t}={escape:!0}){let n=t?be(e.name):e.name;const i=Zve(e);if(i){const{facet:s}=i;for(const l of Os)s[l]&&(n+=` + '__facet_${l}_' + (facet[${be(i.vgField(l))}])`)}return n}function IA(e){return qn(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function bH(e,t){(Se(t.select)||!t.select.on)&&delete e.events,(Se(t.select)||!t.select.clear)&&delete e.clear,(Se(t.select)||!t.select.toggle)&&delete e.toggle}function Kx(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...Kx(e.object)),t.push(...Kx(e.property))),t)}function TH(e){return e.object.type==="MemberExpression"?TH(e.object):e.object.name==="datum"}function EH(e){const t=VI(e),n=new Set;return t.visit(i=>{i.type==="MemberExpression"&&TH(i)&&n.add(Kx(i).slice(1).join("."))}),n}class wh extends zt{clone(){return new wh(null,this.model,Je(this.filter))}constructor(t,n,i){super(t),this.model=n,this.filter=i,this.expr=k0(this.model,this.filter,this),this._dependentFields=EH(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function eSe(e,t){const n={},i=e.config.selection;if(!t||!t.length)return n;for(const s of t){const l=Qt(s.name),c=s.select,d=Se(c)?c:c.type,f=Be(c)?Je(c):{type:d},u=i[d];for(const w in u)w==="fields"||w==="encodings"||(w==="mark"&&(f[w]={...u[w],...f[w]}),(f[w]===void 0||f[w]===!0)&&(f[w]=Je(u[w]??f[w])));const a=n[l]={...f,name:l,type:d,init:s.value,bind:s.bind,events:Se(f.on)?Jl(f.on,"scope"):xe(Je(f.on))},m=Je(s);for(const w of R1)w.defined(a)&&w.parse&&w.parse(e,a,m)}return n}function vH(e,t,n,i="datum"){const s=Se(t)?t:t.param,l=Qt(s),c=be(l+kd);let d;try{d=e.getSelectionComponent(l,s)}catch{return`!!${l}`}if(d.project.timeUnit){const w=n??e.component.data.raw,y=d.project.timeUnit.clone();w.parent?y.insertAsParentOf(w):w.parent=y}const f=d.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",u=d.resolve==="global"?")":`, ${be(d.resolve)})`,a=`${f}${c}, ${i}${u}`,m=`length(data(${c}))`;return t.empty===!1?`${m} && ${a}`:`!${m} || ${a}`}function SH(e,t,n){const i=Qt(t),s=n.encoding;let l=n.field,c;try{c=e.getSelectionComponent(i,t)}catch{return i}if(!s&&!l)l=c.project.items[0].field,c.project.items.length>1&&me(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${be(l)}.`);else if(s&&!l){const d=c.project.items.filter(f=>f.channel===s);!d.length||d.length>1?(l=c.project.items[0].field,me((d.length?"Multiple ":"No ")+`matching ${be(s)} encoding found for selection ${be(n.param)}. Using "field": ${be(l)}.`)):l=d[0].field}return`${c.name}[${be(qs(l))}]`}function tSe(e,t){for(const[n,i]of Cl(e.component.selection??{})){const s=e.getName(`lookup_${n}`);e.component.data.outputNodes[s]=i.materialized=new Si(new wh(t,e,{param:n}),s,Gt.Lookup,e.component.data.outputNodeRefCounts)}}function k0(e,t,n){return z_(t,i=>Se(i)?i:DTe(i)?vH(e,i,n):j9(i))}function nSe(e,t){if(e)return fe(e)&&!el(e)?e.map(n=>cA(n,t)).join(", "):e}function Tv(e,t,n,i){var s,l;e.encode??(e.encode={}),(s=e.encode)[t]??(s[t]={}),(l=e.encode[t]).update??(l.update={}),e.encode[t].update[n]=i}function v_(e,t,n,i={header:!1}){var m,w;const{disable:s,orient:l,scale:c,labelExpr:d,title:f,zindex:u,...a}=e.combine();if(!s){for(const y in a){const o=U1e[y],T=a[y];if(o&&o!==t&&o!=="both")delete a[y];else if(zp(T)){const{condition:b,...S}=T,x=xe(b),k=YL[y];if(k){const{vgProp:I,part:B}=k,O=[...x.map(A=>{const{test:R,...P}=A;return{test:k0(null,R),...P}}),S];Tv(a,B,I,O),delete a[y]}else if(k===null){const I={signal:x.map(B=>{const{test:O,...A}=B;return`${k0(null,O)} ? ${OL(A)} : `}).join("")+OL(S)};a[y]=I}}else if(Oe(T)){const b=YL[y];if(b){const{vgProp:S,part:x}=b;Tv(a,x,S,T),delete a[y]}}pt(["labelAlign","labelBaseline"],y)&&a[y]===null&&delete a[y]}if(t==="grid"){if(!a.grid)return;if(a.encode){const{grid:y}=a.encode;a.encode={...y?{grid:y}:{}},Dt(a.encode)&&delete a.encode}return{scale:c,orient:l,...a,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:un(u,0)}}else{if(!i.header&&e.mainExtracted)return;if(d!==void 0){let o=d;(w=(m=a.encode)==null?void 0:m.labels)!=null&&w.update&&Oe(a.encode.labels.update.text)&&(o=md(d,"datum.label",a.encode.labels.update.text.signal)),Tv(a,"labels","text",{signal:o})}if(a.labelAlign===null&&delete a.labelAlign,a.encode){for(const o of wG)e.hasAxisPart(o)||delete a.encode[o];Dt(a.encode)&&delete a.encode}const y=nSe(f,n);return{scale:c,orient:l,grid:!1,...y?{title:y}:{},...a,...n.aria===!1?{aria:!1}:{},zindex:un(u,0)}}}}function xH(e){const{axes:t}=e.component,n=[];for(const i of Ua)if(t[i]){for(const s of t[i])if(!s.get("disable")&&!s.get("gridScale")){const l=i==="x"?"height":"width",c=e.getSizeSignalRef(l).signal;l!==c&&n.push({name:l,update:c})}}return n}function iSe(e,t){const{x:n=[],y:i=[]}=e;return[...n.map(s=>v_(s,"grid",t)),...i.map(s=>v_(s,"grid",t)),...n.map(s=>v_(s,"main",t)),...i.map(s=>v_(s,"main",t))].filter(s=>s)}function yP(e,t,n,i){return Object.assign.apply(null,[{},...e.map(s=>{if(s==="axisOrient"){const l=n==="x"?"bottom":"left",c=t[n==="x"?"axisBottom":"axisLeft"]||{},d=t[n==="x"?"axisTop":"axisRight"]||{},f=new Set([...pe(c),...pe(d)]),u={};for(const a of f.values())u[a]={signal:`${i.signal} === "${l}" ? ${go(c[a])} : ${go(d[a])}`};return u}return t[s]})])}function sSe(e,t,n,i){const s=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:W9(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],l=e==="x"?"axisX":"axisY",c=Oe(n)?"axisOrient":`axis${Ap(n)}`,d=[...s,...s.map(u=>l+u.substr(4))],f=["axis",c,l];return{vlOnlyAxisConfig:yP(d,i,e,n),vgAxisConfig:yP(f,i,e,n),axisConfigStyle:rSe([...f,...d],i)}}function rSe(e,t){var i;const n=[{}];for(const s of e){let l=(i=t[s])==null?void 0:i.style;if(l){l=xe(l);for(const c of l)n.push(t.style[c])}}return Object.assign.apply(null,n)}function Jx(e,t,n,i={}){var l;const s=v9(e,n,t);if(s!==void 0)return{configFrom:"style",configValue:s};for(const c of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((l=i[c])==null?void 0:l[e])!==void 0)return{configFrom:c,configValue:i[c][e]};return{}}const mP={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??aSe(n,e),gridScale:({model:e,channel:t})=>oSe(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelAlign||BH(t,n,i),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelBaseline||kH(t,n,i),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??cSe(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??dSe(t.type,n,we(t)&&!!t.timeUnit,we(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:i,scaleType:s})=>{const l=e==="x"?"width":e==="y"?"height":void 0,c=l?t.getSizeSignalRef(l):void 0;return n.tickCount??uSe({fieldOrDatumDef:i,scaleType:s,size:c,values:n.values})},tickMinStep:hSe,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const i=FH(t,n);if(i!==void 0)return i;const s=t.typedFieldDef(n),l=n==="x"?"x2":"y2",c=t.fieldDef(l);return x9(s?[WL(s)]:[],we(c)?[WL(c)]:[])},values:({axis:e,fieldOrDatumDef:t})=>_Se(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??gSe(n,t)};function aSe(e,t){return!Ln(e)&&we(t)&&!Wt(t==null?void 0:t.bin)&&!Dn(t==null?void 0:t.bin)}function oSe(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function lSe(e,t,n,i,s){const l=t==null?void 0:t.labelAngle;if(l!==void 0)return Oe(l)?l:Ig(l);{const{configValue:c}=Jx("labelAngle",i,t==null?void 0:t.style,s);return c!==void 0?Ig(c):n===Zt&&pt([QM,JM],e.type)&&!(we(e)&&e.timeUnit)?270:void 0}}function Qx(e){return`(((${e.signal} % 360) + 360) % 360)`}function kH(e,t,n,i){if(e!==void 0)if(n==="x"){if(Oe(e)){const s=Qx(e),l=Oe(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${s} && ${s} < 135) || (225 < ${s} && ${s} < 315) ? "middle" :(${s} <= 45 || 315 <= ${s}) === ${l} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Oe(t)){const s=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${s} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Oe(e)){const s=Qx(e),l=Oe(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${s} <= 45 || 315 <= ${s} || (135 <= ${s} && ${s} <= 225) ? ${i?'"middle"':"null"} : (45 <= ${s} && ${s} <= 135) === ${l} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return i?"middle":null;if(Oe(t)){const s=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${s} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function BH(e,t,n){if(e===void 0)return;const i=n==="x",s=i?0:90,l=i?"bottom":"left";if(Oe(e)){const c=Qx(e),d=Oe(t)?`(${t.signal} === "${l}")`:t===l;return{signal:`(${s?`(${c} + 90)`:c} % 180 === 0) ? ${i?null:'"center"'} :(${s} < ${c} && ${c} < ${180+s}) === ${d} ? "left" : "right"`}}if((e+s)%180===0)return i?null:"center";if(Oe(t)){const c=s<e&&e<180+s?"===":"!==";return{signal:`${`${t.signal} ${c} "${l}"`} ? "left" : "right"`}}return(s<e&&e<180+s)==(t===l)?"left":"right"}function cSe(e,t){if(t==="x"&&pt(["quantitative","temporal"],e))return!0}function dSe(e,t,n,i){if(n&&!Be(i)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function fSe(e){return e==="x"?"bottom":"left"}function uSe({fieldOrDatumDef:e,scaleType:t,size:n,values:i}){var s;if(!i&&!Ln(t)&&t!=="log"){if(we(e)){if(Wt(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&pt(["month","hours","day","quarter"],(s=Hn(e.timeUnit))==null?void 0:s.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function hSe({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(we(t)){const{timeUnit:n}=t;if(n){const i=U9(n);if(i)return{signal:i}}}}function FH(e,t){const n=t==="x"?"x2":"y2",i=e.fieldDef(t),s=e.fieldDef(n),l=i?i.title:void 0,c=s?s.title:void 0;if(l&&c)return k9(l,c);if(l)return l;if(c)return c;if(l!==void 0)return l;if(c!==void 0)return c}function _Se(e,t){const n=e.values;if(fe(n))return mG(t,n);if(Oe(n))return n}function gSe(e,t){return e==="rect"&&m0(t)?1:0}class Vu extends zt{clone(){return new Vu(null,Je(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=EH(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((i,s)=>{if(Zd(i)&&lG(i.sort)){const{field:l,timeUnit:c}=i,d=i.sort,f=d.map((u,a)=>`${j9({field:l,timeUnit:c,equal:u})} ? ${a} : `).join("")+d.length;t=new Vu(t,{calculate:f,as:Yu(i,s,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${bt(this.transform)}`}}function Yu(e,t,n){return ve(e,{prefix:t,suffix:"sort_index",...n??{}})}function L1(e,t){return pt(["top","bottom"],t)?"column":pt(["left","right"],t)||e==="row"?"row":"column"}function Xu(e,t,n,i){const s=i==="row"?n.headerRow:i==="column"?n.headerColumn:n.headerFacet;return un((t||{})[e],s[e],n.header[e])}function P1(e,t,n,i){const s={};for(const l of e){const c=Xu(l,t||{},n,i);c!==void 0&&(s[l]=c)}return s}const MA=["row","column"],AA=["header","footer"];function pSe(e,t){const n=e.component.layoutHeaders[t].title,i=e.config?e.config:void 0,s=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:l,titleAngle:c,titleOrient:d}=P1(["titleAnchor","titleAngle","titleOrient"],s.header,i,t),f=L1(t,d),u=Ig(c);return{name:`${t}-title`,type:"group",role:`${f}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...MH(u,f),...IH(f,u,l),...AH(i,s,t,lEe,RG)}}}function IH(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const i=BH(t,e==="row"?"left":"top",e==="row"?"y":"x");return i?{align:i}:{}}function MH(e,t){const n=kH(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function ySe(e,t){const n=e.component.layoutHeaders[t],i=[];for(const s of AA)if(n[s])for(const l of n[s]){const c=wSe(e,t,s,n,l);c!=null&&i.push(c)}return i}function mSe(e,t){const{sort:n}=e;return da(n)?{field:ve(n,{expr:"datum"}),order:n.order??"ascending"}:fe(n)?{field:Yu(e,t,{expr:"datum"}),order:"ascending"}:{field:ve(e,{expr:"datum"}),order:n??"ascending"}}function Zx(e,t,n){const{format:i,formatType:s,labelAngle:l,labelAnchor:c,labelOrient:d,labelExpr:f}=P1(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),u=rA({fieldOrDatumDef:e,format:i,formatType:s,expr:"parent",config:n}).signal,a=L1(t,d);return{text:{signal:f?md(md(f,"datum.label",u),"datum.value",ve(e,{expr:"parent"})):u},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...MH(l,a),...IH(a,l,c),...AH(n,e,t,cEe,LG)}}function wSe(e,t,n,i,s){if(s){let l=null;const{facetFieldDef:c}=i,d=e.config?e.config:void 0;if(c&&s.labels){const{labelOrient:m}=P1(["labelOrient"],c.header,d,t);(t==="row"&&!pt(["top","bottom"],m)||t==="column"&&!pt(["left","right"],m))&&(l=Zx(c,t,d))}const f=wr(e)&&!Dp(e.facet),u=s.axes,a=(u==null?void 0:u.length)>0;if(l||a){const m=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...i.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:mSe(c,t)}:{},...a&&f?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...l?{title:l}:{},...s.sizeSignal?{encode:{update:{[m]:s.sizeSignal}}}:{},...a?{axes:u}:{}}}}return null}const bSe={column:{start:0,end:1},row:{start:1,end:0}};function TSe(e,t){return bSe[t][e]}function ESe(e,t){const n={};for(const i of Os){const s=e[i];if(s!=null&&s.facetFieldDef){const{titleAnchor:l,titleOrient:c}=P1(["titleAnchor","titleOrient"],s.facetFieldDef.header,t,i),d=L1(i,c),f=TSe(l,d);f!==void 0&&(n[d]=f)}}return Dt(n)?void 0:n}function AH(e,t,n,i,s){const l={};for(const c of i){if(!s[c])continue;const d=Xu(c,t==null?void 0:t.header,e,n);d!==void 0&&(l[s[c]]=d)}return l}function OA(e){return[...Um(e,"width"),...Um(e,"height"),...Um(e,"childWidth"),...Um(e,"childHeight")]}function Um(e,t){const n=t==="width"?"x":"y",i=e.component.layoutSize.get(t);if(!i||i==="merged")return[];const s=e.getSizeSignalRef(t).signal;if(i==="step"){const l=e.getScaleComponent(n);if(l){const c=l.get("type"),d=l.get("range");if(Ln(c)&&sc(d)){const f=e.scaleName(n);return wr(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[wP(f,d)]:[wP(f,d),{name:s,update:OH(f,l,`domain('${f}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(i=="container"){const l=s.endsWith("width"),c=l?"containerSize()[0]":"containerSize()[1]",d=Hx(e.config.view,l?"width":"height"),f=`isFinite(${c}) ? ${c} : ${d}`;return[{name:s,init:f,on:[{update:f,events:"window:resize"}]}]}else return[{name:s,value:i}]}function wP(e,t){const n=`${e}_step`;return Oe(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function OH(e,t,n){const i=t.get("type"),s=t.get("padding"),l=un(t.get("paddingOuter"),s);let c=t.get("paddingInner");return c=i==="band"?c!==void 0?c:s:1,`bandspace(${n}, ${go(c)}, ${go(l)}) * ${e}_step`}function NH(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function CH(e,t){return pe(e).reduce((n,i)=>{const s=e[i];return{...n,...mh(t,s,i,l=>Kt(l.value))}},{})}function RH(e,t){if(wr(t))return e==="theta"?"independent":"shared";if(Eh(t))return"shared";if($A(t))return Rn(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function NA(e,t){const n=e.scale[t],i=Rn(t)?"axis":"legend";return n==="independent"?(e[i][t]==="shared"&&me(oTe(t)),"independent"):e[i][t]||"shared"}const vSe={...uEe,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},LH=pe(vSe);class SSe extends Do{}const bP={symbols:xSe,gradient:kSe,labels:BSe,entries:FSe};function xSe(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:s,legendType:l}){if(l!=="symbol")return;const{markDef:c,encoding:d,config:f,mark:u}=n,a=c.filled&&u!=="trail";let m={...y0e({},n,c1e),...lH(n,{filled:a})};const w=s.get("symbolOpacity")??f.legend.symbolOpacity,y=s.get("symbolFillColor")??f.legend.symbolFillColor,o=s.get("symbolStrokeColor")??f.legend.symbolStrokeColor,T=w===void 0?PH(d.opacity)??c.opacity:void 0;if(m.fill){if(i==="fill"||a&&i===Ji)delete m.fill;else if(m.fill.field)y?delete m.fill:(m.fill=Kt(f.legend.symbolBaseFillColor??"black"),m.fillOpacity=Kt(T??1));else if(fe(m.fill)){const b=ek(d.fill??d.color)??c.fill??(a&&c.color);b&&(m.fill=Kt(b))}}if(m.stroke){if(i==="stroke"||!a&&i===Ji)delete m.stroke;else if(m.stroke.field||o)delete m.stroke;else if(fe(m.stroke)){const b=un(ek(d.stroke||d.color),c.stroke,a?c.color:void 0);b&&(m.stroke={value:b})}}if(i!==Ro){const b=we(t)&&$H(n,s,t);b?m.opacity=[{test:b,...Kt(T??1)},Kt(f.legend.unselectedOpacity)]:T&&(m.opacity=Kt(T))}return m={...m,...e},Dt(m)?void 0:m}function kSe(e,{model:t,legendType:n,legendCmpt:i}){if(n!=="gradient")return;const{config:s,markDef:l,encoding:c}=t;let d={};const u=(i.get("gradientOpacity")??s.legend.gradientOpacity)===void 0?PH(c.opacity)||l.opacity:void 0;return u&&(d.opacity=Kt(u)),d={...d,...e},Dt(d)?void 0:d}function BSe(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:s}){const l=n.legend(i)||{},c=n.config,d=we(t)?$H(n,s,t):void 0,f=d?[{test:d,value:1},{value:c.legend.unselectedOpacity}]:void 0,{format:u,formatType:a}=l;let m;Sd(a)?m=_r({fieldOrDatumDef:t,field:"datum.value",format:u,formatType:a,config:c}):u===void 0&&a===void 0&&c.customFormatTypes&&(t.type==="quantitative"&&c.numberFormatType?m=_r({fieldOrDatumDef:t,field:"datum.value",format:c.numberFormat,formatType:c.numberFormatType,config:c}):t.type==="temporal"&&c.timeFormatType&&we(t)&&t.timeUnit===void 0&&(m=_r({fieldOrDatumDef:t,field:"datum.value",format:c.timeFormat,formatType:c.timeFormatType,config:c})));const w={...f?{opacity:f}:{},...m?{text:m}:{},...e};return Dt(w)?void 0:w}function FSe(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function PH(e){return DH(e,(t,n)=>Math.max(t,n.value))}function ek(e){return DH(e,(t,n)=>un(t,n.value))}function DH(e,t){if(F1e(e))return xe(e.condition).reduce(t,e.value);if(xr(e))return e.value}function $H(e,t,n){const i=t.get("selections");if(!(i!=null&&i.length))return;const s=be(n.field);return i.map(l=>`(!length(data(${be(Qt(l)+kd)})) || (${l}[${s}] && indexof(${l}[${s}], datum.value) >= 0))`).join(" || ")}const TP={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:i,formatType:s}=t;return sG(e,e.type,i,s,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:i}=e;return rG(i,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??RSe(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??LSe(n),symbolType:({legend:e,markDef:t,channel:n,encoding:i})=>e.symbolType??MSe(t.type,n,i.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>tu(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(eu(n)&&hr(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>ISe(t,e)};function ISe(e,t){const n=e.values;if(fe(n))return mG(t,n);if(Oe(n))return n}function MSe(e,t,n,i){if(t!=="shape"){const s=ek(n)??i;if(s)return s}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function ASe(e){const{legend:t}=e;return un(t.type,OSe(e))}function OSe({channel:e,timeUnit:t,scaleType:n}){if(eu(e)){if(pt(["quarter","month","day"],t))return"symbol";if(hr(n))return"gradient"}return"symbol"}function NSe({legendConfig:e,legendType:t,orient:n,legend:i}){return i.direction??e[t?"gradientDirection":"symbolDirection"]??CSe(n,t)}function CSe(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function RSe({legendConfig:e,model:t,direction:n,orient:i,scaleType:s}){const{gradientHorizontalMaxLength:l,gradientHorizontalMinLength:c,gradientVerticalMaxLength:d,gradientVerticalMinLength:f}=e;if(hr(s))return n==="horizontal"?i==="top"||i==="bottom"?EP(t,"width",c,l):c:EP(t,"height",f,d)}function EP(e,t,n,i){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${i})`}}function LSe(e){if(pt(["quantile","threshold","log","symlog"],e))return"greedy"}function UH(e){const t=cn(e)?PSe(e):zSe(e);return e.component.legends=t,t}function PSe(e){const{encoding:t}=e,n={};for(const i of[Ji,...DG]){const s=wn(t[i]);!s||!e.getScaleComponent(i)||i===Qi&&we(s)&&s.type===yh||(n[i]=USe(e,i))}return n}function DSe(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function $Se(e,t,n,i){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(i==null?void 0:i.title))return!0}return e===(n||{})[t]}function USe(e,t){var I;let n=e.legend(t);const{markDef:i,encoding:s,config:l}=e,c=l.legend,d=new SSe({},DSe(e,t));Xve(e,t,d);const f=n!==void 0?!n:c.disable;if(d.set("disable",f,n!==void 0),f)return d;n=n||{};const u=e.getScaleComponent(t).get("type"),a=wn(s[t]),m=we(a)?(I=Hn(a.timeUnit))==null?void 0:I.unit:void 0,w=n.orient||l.legend.orient||"right",y=ASe({legend:n,channel:t,timeUnit:m,scaleType:u}),o=NSe({legend:n,legendType:y,orient:w,legendConfig:c}),T={legend:n,channel:t,model:e,markDef:i,encoding:s,fieldOrDatumDef:a,legendConfig:c,config:l,scaleType:u,orient:w,legendType:y,direction:o};for(const B of LH){if(y==="gradient"&&B.startsWith("symbol")||y==="symbol"&&B.startsWith("gradient"))continue;const O=B in TP?TP[B](T):n[B];if(O!==void 0){const A=$Se(O,B,n,e.fieldDef(t));(A||l.legend[B]===void 0)&&d.set(B,O,A)}}const b=(n==null?void 0:n.encoding)??{},S=d.get("selections"),x={},k={fieldOrDatumDef:a,model:e,channel:t,legendCmpt:d,legendType:y};for(const B of["labels","legend","title","symbols","gradient","entries"]){const O=CH(b[B]??{},e),A=B in bP?bP[B](O,k):O;A!==void 0&&!Dt(A)&&(x[B]={...S!=null&&S.length&&we(a)?{name:`${Qt(a.field)}_legend_${B}`}:{},...S!=null&&S.length?{interactive:!!S}:{},update:A})}return Dt(x)||d.set("encode",x,!!(n!=null&&n.encoding)),d}function zSe(e){const{legends:t,resolve:n}=e.component;for(const i of e.children){UH(i);for(const s of pe(i.component.legends))n.legend[s]=NA(e.component.resolve,s),n.legend[s]==="shared"&&(t[s]=zH(t[s],i.component.legends[s]),t[s]||(n.legend[s]="independent",delete t[s]))}for(const i of pe(t))for(const s of e.children)s.component.legends[i]&&n.legend[i]==="shared"&&delete s.component.legends[i];return t}function zH(e,t){var l,c,d,f;if(!e)return t.clone();const n=e.getWithExplicit("orient"),i=t.getWithExplicit("orient");if(n.explicit&&i.explicit&&n.value!==i.value)return;let s=!1;for(const u of LH){const a=Ll(e.getWithExplicit(u),t.getWithExplicit(u),u,"legend",(m,w)=>{switch(u){case"symbolType":return jSe(m,w);case"title":return B9(m,w);case"type":return s=!0,rs("symbol")}return N1(m,w,u,"legend")});e.setWithExplicit(u,a)}return s&&((c=(l=e.implicit)==null?void 0:l.encode)!=null&&c.gradient&&u0(e.implicit,["encode","gradient"]),(f=(d=e.explicit)==null?void 0:d.encode)!=null&&f.gradient&&u0(e.explicit,["encode","gradient"])),e}function jSe(e,t){return t.value==="circle"?t:e}function qSe(e,t,n,i){var s,l;e.encode??(e.encode={}),(s=e.encode)[t]??(s[t]={}),(l=e.encode[t]).update??(l.update={}),e.encode[t].update[n]=i}function jH(e){const t=e.component.legends,n={};for(const s of pe(t)){const l=e.getScaleComponent(s),c=Ht(l.get("domains"));if(n[c])for(const d of n[c])zH(d,t[s])||n[c].push(t[s]);else n[c]=[t[s].clone()]}return qn(n).flat().map(s=>GSe(s,e.config)).filter(s=>s!==void 0)}function GSe(e,t){var c,d,f;const{disable:n,labelExpr:i,selections:s,...l}=e.combine();if(!n){if(t.aria===!1&&l.aria==null&&(l.aria=!1),(c=l.encode)!=null&&c.symbols){const u=l.encode.symbols.update;u.fill&&u.fill.value!=="transparent"&&!u.stroke&&!l.stroke&&(u.stroke={value:"transparent"});for(const a of DG)l[a]&&delete u[a]}if(l.title||delete l.title,i!==void 0){let u=i;(f=(d=l.encode)==null?void 0:d.labels)!=null&&f.update&&Oe(l.encode.labels.update.text)&&(u=md(i,"datum.label",l.encode.labels.update.text.signal)),qSe(l,"labels","text",{signal:u})}return l}}function HSe(e){return Eh(e)||$A(e)?WSe(e):qH(e)}function WSe(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),qH(e))}function qH(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:i}=n;if(t.data){const s={signal:`[${t.size.map(c=>c.signal).join(", ")}]`},l=t.data.reduce((c,d)=>{const f=Oe(d)?d.signal:`data('${e.lookupDataSource(d)}')`;return pt(c,f)||c.push(f),c},[]);if(l.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:i,size:s,fit:{signal:l.length>1?`[${l.join(", ")}]`:l[0]},...n}]}else return[{name:i,translate:{signal:"[width / 2, height / 2]"},...n}]}const VSe=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class GH extends Do{constructor(t,n,i,s){super({...n},{name:t}),this.specifiedProjection=n,this.size=i,this.data=s,this.merged=!1}get isFit(){return!!this.data}}function HH(e){e.component.projection=cn(e)?YSe(e):JSe(e)}function YSe(e){if(e.hasProjection){const t=Ri(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),i=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,s=n?XSe(e):void 0,l=new GH(e.projectionName(!0),{...Ri(e.config.projection)??{},...t??{}},i,s);return l.get("type")||l.set("type","equalEarth",!1),l}}function XSe(e){const t=[],{encoding:n}=e;for(const i of[[Rr,Cr],[Gs,Lr]])(wn(n[i[0]])||wn(n[i[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Qi)&&e.typedFieldDef(Qi).type===yh&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Gt.Main)),t}function KSe(e,t){const n=xM(VSe,s=>!!(!Le(e.explicit,s)&&!Le(t.explicit,s)||Le(e.explicit,s)&&Le(t.explicit,s)&&sa(e.get(s),t.get(s))));if(sa(e.size,t.size)){if(n)return e;if(sa(e.explicit,{}))return t;if(sa(t.explicit,{}))return e}return null}function JSe(e){if(e.children.length===0)return;let t;for(const i of e.children)HH(i);const n=xM(e.children,i=>{const s=i.component.projection;if(s)if(t){const l=KSe(t,s);return l&&(t=l),!!l}else return t=s,!0;else return!0});if(t&&n){const i=e.projectionName(!0),s=new GH(i,t.specifiedProjection,t.size,Je(t.data));for(const l of e.children){const c=l.component.projection;c&&(c.isFit&&s.data.push(...l.component.projection.data),l.renameProjection(c.get("name"),i),c.merged=!0)}return s}}function QSe(e,t,n,i){if(Up(t,n)){const s=cn(e)?e.axis(n)??e.legend(n)??{}:{},l=ve(t,{expr:"datum"}),c=ve(t,{expr:"datum",binSuffix:"end"});return{formulaAs:ve(t,{binSuffix:"range",forAs:!0}),formula:Pp(l,c,s.format,s.formatType,i)}}return{}}function WH(e,t){return`${w9(e)}_${t}`}function ZSe(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function CA(e,t,n){const i=B1(n,void 0)??{},s=WH(i,t);return e.getName(`${s}_bins`)}function exe(e){return"as"in e}function vP(e,t,n){let i,s;exe(e)?i=Se(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:i=[ve(e,{forAs:!0}),ve(e,{binSuffix:"end",forAs:!0})];const l={...B1(t,void 0)},c=WH(l,e.field),{signal:d,extentSignal:f}=ZSe(n,c);if(p1(l.extent)){const a=l.extent;s=SH(n,a.param,a),delete l.extent}const u={bin:l,field:e.field,as:[i],...d?{signal:d}:{},...f?{extentSignal:f}:{},...s?{span:s}:{}};return{key:c,binComponent:u}}class ua extends zt{clone(){return new ua(null,Je(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const i=n.reduceFieldDef((s,l,c)=>{if(Bi(l)&&Wt(l.bin)){const{key:d,binComponent:f}=vP(l,l.bin,n);s[d]={...f,...s[d],...QSe(n,l,c,n.config)}}return s},{});return Dt(i)?null:new ua(t,i)}static makeFromTransform(t,n,i){const{key:s,binComponent:l}=vP(n,n.bin,i);return new ua(t,{[s]:l})}merge(t,n){for(const i of pe(t.bins))i in this.bins?(n(t.bins[i].signal,this.bins[i].signal),this.bins[i].as=ra([...this.bins[i].as,...t.bins[i].as],bt)):this.bins[i]=t.bins[i];for(const i of t.children)t.removeChild(i),i.parent=this;t.remove()}producedFields(){return new Set(qn(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(qn(this.bins).map(t=>t.field))}hash(){return`Bin ${bt(this.bins)}`}assemble(){return qn(this.bins).flatMap(t=>{const n=[],[i,...s]=t.as,{extent:l,...c}=t.bin,d={type:"bin",field:qs(t.field),as:i,signal:t.signal,...p1(l)?{extent:null}:{extent:l},...t.span?{span:{signal:`span(${t.span})`}}:{},...c};!l&&t.extentSignal&&(n.push({type:"extent",field:qs(t.field),signal:t.extentSignal}),d.extent={signal:t.extentSignal}),n.push(d);for(const f of s)for(let u=0;u<2;u++)n.push({type:"formula",expr:ve({field:i[u]},{expr:"datum"}),as:f[u]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function txe(e,t,n,i){var l;const s=cn(i)?i.encoding[$a(t)]:void 0;if(Bi(n)&&cn(i)&&fG(n,s,i.markDef,i.config))e.add(ve(n,{})),e.add(ve(n,{suffix:"end"})),n.bin&&Up(n,t)&&e.add(ve(n,{binSuffix:"range"}));else if(l9(t)){const c=o9(t);e.add(i.getName(c))}else e.add(ve(n));return Zd(n)&&JTe((l=n.scale)==null?void 0:l.range)&&e.add(n.scale.range.field),e}function nxe(e,t){for(const n of pe(t)){const i=t[n];for(const s of pe(i))n in e?e[n][s]=new Set([...e[n][s]??[],...i[s]]):e[n]={[s]:i[s]}}}class mr extends zt{clone(){return new mr(null,new Set(this.dimensions),Je(this.measures))}constructor(t,n,i){super(t),this.dimensions=n,this.measures=i}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let i=!1;n.forEachFieldDef(c=>{c.aggregate&&(i=!0)});const s={},l=new Set;return!i||(n.forEachFieldDef((c,d)=>{const{aggregate:f,field:u}=c;if(f)if(f==="count")s["*"]??(s["*"]={}),s["*"].count=new Set([ve(c,{forAs:!0})]);else{if(So(f)||ic(f)){const a=So(f)?"argmin":"argmax",m=f[a];s[m]??(s[m]={}),s[m][a]=new Set([ve({op:a,field:m},{forAs:!0})])}else s[u]??(s[u]={}),s[u][f]=new Set([ve(c,{forAs:!0})]);Lo(d)&&n.scaleDomain(d)==="unaggregated"&&(s[u]??(s[u]={}),s[u].min=new Set([ve({field:u,aggregate:"min"},{forAs:!0})]),s[u].max=new Set([ve({field:u,aggregate:"max"},{forAs:!0})]))}else txe(l,d,c,n)}),l.size+pe(s).length===0)?null:new mr(t,l,s)}static makeFromTransform(t,n){const i=new Set,s={};for(const l of n.aggregate){const{op:c,field:d,as:f}=l;c&&(c==="count"?(s["*"]??(s["*"]={}),s["*"].count=new Set([f||ve(l,{forAs:!0})])):(s[d]??(s[d]={}),s[d][c]=new Set([f||ve(l,{forAs:!0})])))}for(const l of n.groupby??[])i.add(l);return i.size+pe(s).length===0?null:new mr(t,i,s)}merge(t){return Z7(this.dimensions,t.dimensions)?(nxe(this.measures,t.measures),!0):(vTe("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...pe(this.measures)])}producedFields(){const t=new Set;for(const n of pe(this.measures))for(const i of pe(this.measures[n])){const s=this.measures[n][i];s.size===0?t.add(`${i}_${n}`):s.forEach(t.add,t)}return t}hash(){return`Aggregate ${bt({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],i=[];for(const l of pe(this.measures))for(const c of pe(this.measures[l]))for(const d of this.measures[l][c])i.push(d),t.push(c),n.push(l==="*"?null:qs(l));return{type:"aggregate",groupby:[...this.dimensions].map(qs),ops:t,fields:n,as:i}}}class bh extends zt{constructor(t,n,i,s){super(t),this.model=n,this.name=i,this.data=s;for(const l of Os){const c=n.facet[l];if(c){const{bin:d,sort:f}=c;this[l]={name:n.getName(`${l}_domain`),fields:[ve(c),...Wt(d)?[ve(c,{binSuffix:"end"})]:[]],...da(f)?{sortField:f}:fe(f)?{sortIndexField:Yu(c,l)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Os)this[n]&&(t+=` ${n.charAt(0)}:${bt(this[n])}`);return t}get fields(){var n;const t=[];for(const i of Os)(n=this[i])!=null&&n.fields&&t.push(...this[i].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Os)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of Ua){const i=this.childModel.component.scales[n];if(i&&!i.merged){const s=i.get("type"),l=i.get("range");if(Ln(s)&&sc(l)){const c=D1(this.childModel,n),d=DA(c);d?t[n]=d:me($M(n))}}}return t}assembleRowColumnHeaderData(t,n,i){const s={row:"y",column:"x",facet:void 0}[t],l=[],c=[],d=[];s&&i&&i[s]&&(n?(l.push(`distinct_${i[s]}`),c.push("max")):(l.push(i[s]),c.push("distinct")),d.push(`distinct_${i[s]}`));const{sortField:f,sortIndexField:u}=this[t];if(f){const{op:a=v1,field:m}=f;l.push(m),c.push(a),d.push(ve(f,{forAs:!0}))}else u&&(l.push(u),c.push("max"),d.push(u));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...l.length?{fields:l,ops:c,as:d}:{}}]}}assembleFacetHeaderData(t){var f;const{columns:n}=this.model.layout,{layoutHeaders:i}=this.model.component,s=[],l={};for(const u of MA){for(const a of AA){const m=(i[u]&&i[u][a])??[];for(const w of m)if(((f=w.axes)==null?void 0:f.length)>0){l[u]=!0;break}}if(l[u]){const a=`length(data("${this.facet.name}"))`,m=u==="row"?n?{signal:`ceil(${a} / ${n})`}:1:n?{signal:`min(${a}, ${n})`}:{signal:a};s.push({name:`${this.facet.name}_${u}`,transform:[{type:"sequence",start:0,stop:m}]})}}const{row:c,column:d}=l;return(c||d)&&s.unshift(this.assembleRowColumnHeaderData("facet",null,t)),s}assemble(){const t=[];let n=null;const i=this.getChildIndependentFieldsWithStep(),{column:s,row:l,facet:c}=this;if(s&&l&&(i.x||i.y)){n=`cross_${this.column.name}_${this.row.name}`;const d=[].concat(i.x??[],i.y??[]),f=d.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:d,ops:f}]})}for(const d of[_o,ho])this[d]&&t.push(this.assembleRowColumnHeaderData(d,n,i));if(c){const d=this.assembleFacetHeaderData(i);d&&t.push(...d)}return t}}function SP(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function ixe(e,t){const n=FM(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const i=SP(t.slice(5,t.length));return`timeParse(${n},'${i}')`}else if(t.startsWith("utc:")){const i=SP(t.slice(4,t.length));return`utcParse(${n},'${i}')`}else return me(M0e(t)),null}function sxe(e){const t={};return Mw(e.filter,n=>{if(z9(n)){let i=null;qM(n)?i=hs(n.equal):HM(n)?i=hs(n.lte):GM(n)?i=hs(n.lt):WM(n)?i=hs(n.gt):VM(n)?i=hs(n.gte):YM(n)?i=n.range[0]:XM(n)&&(i=(n.oneOf??n.in)[0]),i&&(Qd(i)?t[n.field]="date":$t(i)?t[n.field]="number":Se(i)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function rxe(e){const t={};function n(i){Hu(i)?t[i.field]="date":i.type==="quantitative"&&l0e(i.aggregate)?t[i.field]="number":$u(i.field)>1?i.field in t||(t[i.field]="flatten"):Zd(i)&&da(i.sort)&&$u(i.sort.field)>1&&(i.sort.field in t||(t[i.sort.field]="flatten"))}if((cn(e)||wr(e))&&e.forEachFieldDef((i,s)=>{if(Bi(i))n(i);else{const l=Kd(s),c=e.fieldDef(l);n({...i,type:c.type})}}),cn(e)){const{mark:i,markDef:s,encoding:l}=e;if(rc(i)&&!e.encoding.order){const c=s.orient==="horizontal"?"y":"x",d=l[c];we(d)&&d.type==="quantitative"&&!(d.field in t)&&(t[d.field]="number")}}return t}function axe(e){const t={};if(cn(e)&&e.component.selection)for(const n of pe(e.component.selection)){const i=e.component.selection[n];for(const s of i.project.items)!s.channel&&$u(s.field)>1&&(t[s.field]="flatten")}return t}class ni extends zt{clone(){return new ni(null,Je(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${bt(this._parse)}`}static makeExplicit(t,n,i){var c;let s={};const l=n.data;return!yl(l)&&((c=l==null?void 0:l.format)!=null&&c.parse)&&(s=l.format.parse),this.makeWithAncestors(t,s,{},i)}static makeWithAncestors(t,n,i,s){for(const d of pe(i)){const f=s.getWithExplicit(d);f.value!==void 0&&(f.explicit||f.value===i[d]||f.value==="derived"||i[d]==="flatten"?delete i[d]:me(DL(d,i[d],f.value)))}for(const d of pe(n)){const f=s.get(d);f!==void 0&&(f===n[d]?delete n[d]:me(DL(d,n[d],f)))}const l=new Do(n,i);s.copyAll(l);const c={};for(const d of pe(l.combine())){const f=l.get(d);f!==null&&(c[d]=f)}return pe(c).length===0||s.parseNothing?null:new ni(t,c)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of pe(this._parse)){const i=this._parse[n];$u(n)===1&&(t[n]=i)}return t}producedFields(){return new Set(pe(this._parse))}dependentFields(){return new Set(pe(this._parse))}assembleTransforms(t=!1){return pe(this._parse).filter(n=>t?$u(n)>1:!0).map(n=>{const i=ixe(n,this._parse[n]);return i?{type:"formula",expr:i,as:IM(n)}:null}).filter(n=>n!==null)}}class $l extends zt{clone(){return new $l(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([kr])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:kr}}}class qp extends zt{clone(){return new qp(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${bt(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class Gp extends zt{clone(){return new Gp(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${bt(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class Bd extends zt{constructor(t){super(null),t??(t={name:"source"});let n;if(yl(t)||(n=t.format?{...zi(t.format,["parse"])}:{}),Mg(t))this._data={values:t.values};else if(Wu(t)){if(this._data={url:t.url},!n.type){let i=/(?:\.([^.]+))?$/.exec(t.url)[1];pt(["json","csv","tsv","dsv","topojson"],i)||(i="json"),n.type=i}}else tH(t)?this._data={values:[{type:"Sphere"}]}:(ZG(t)||yl(t))&&(this._data={});this._generator=yl(t),t.name&&(this._name=t.name),n&&!Dt(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var xP=globalThis&&globalThis.__classPrivateFieldSet||function(e,t,n,i,s){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?s.call(e,n):s?s.value=n:t.set(e,n),n},oxe=globalThis&&globalThis.__classPrivateFieldGet||function(e,t,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(e):i?i.value:t.get(e)},S_;function RA(e){return e instanceof Bd||e instanceof qp||e instanceof Gp}class LA{constructor(){S_.set(this,void 0),xP(this,S_,!1,"f")}setModified(){xP(this,S_,!0,"f")}get modifiedFlag(){return oxe(this,S_,"f")}}S_=new WeakMap;class ef extends LA{getNodeDepths(t,n,i){i.set(t,n);for(const s of t.children)this.getNodeDepths(s,n+1,i);return i}optimize(t){const i=[...this.getNodeDepths(t,0,new Map).entries()].sort((s,l)=>l[1]-s[1]);for(const s of i)this.run(s[0]);return this.modifiedFlag}}class PA extends LA{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class lxe extends PA{mergeNodes(t,n){const i=n.shift();for(const s of n)t.removeChild(s),s.parent=i,s.remove()}run(t){const n=t.children.map(s=>s.hash()),i={};for(let s=0;s<n.length;s++)i[n[s]]===void 0?i[n[s]]=[t.children[s]]:i[n[s]].push(t.children[s]);for(const s of pe(i))i[s].length>1&&(this.setModified(),this.mergeNodes(t,i[s]))}}class cxe extends PA{constructor(t){super(),this.requiresSelectionId=t&&IA(t)}run(t){t instanceof $l&&(this.requiresSelectionId&&(RA(t.parent)||t.parent instanceof mr||t.parent instanceof ni)||(this.setModified(),t.remove()))}}class dxe extends LA{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let i=new Set;t instanceof fa&&(i=t.producedFields(),kM(i,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const s of t.children)this.run(s,new Set([...n,...i]))}}class fxe extends PA{constructor(){super()}run(t){t instanceof Si&&!t.isRequired()&&(this.setModified(),t.remove())}}class uxe extends ef{run(t){if(!RA(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof ni)if(t instanceof ni)this.setModified(),t.merge(n);else{if(BM(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class hxe extends ef{run(t){const n=[...t.children],i=t.children.filter(s=>s instanceof ni);if(t.numChildren()>1&&i.length>=1){const s={},l=new Set;for(const c of i){const d=c.parse;for(const f of pe(d))f in s?s[f]!==d[f]&&l.add(f):s[f]=d[f]}for(const c of l)delete s[c];if(!Dt(s)){this.setModified();const c=new ni(t,s);for(const d of n){if(d instanceof ni)for(const f of pe(s))delete d.parse[f];t.removeChild(d),d.parent=c,d instanceof ni&&pe(d.parse).length===0&&d.remove()}}}}}class _xe extends ef{run(t){t instanceof Si||t.numChildren()>0||t instanceof bh||t instanceof Bd||(this.setModified(),t.remove())}}class gxe extends ef{run(t){const n=t.children.filter(s=>s instanceof fa),i=n.pop();for(const s of n)this.setModified(),i.merge(s)}}class pxe extends ef{run(t){const n=t.children.filter(s=>s instanceof mr),i={};for(const s of n){const l=bt(s.groupBy);l in i||(i[l]=[]),i[l].push(s)}for(const s of pe(i)){const l=i[s];if(l.length>1){const c=l.pop();for(const d of l)c.merge(d)&&(t.removeChild(d),d.parent=c,d.remove(),this.setModified())}}}}class yxe extends ef{constructor(t){super(),this.model=t}run(t){const n=!(RA(t)||t instanceof wh||t instanceof ni||t instanceof $l),i=[],s=[];for(const l of t.children)l instanceof ua&&(n&&!BM(t.producedFields(),l.dependentFields())?i.push(l):s.push(l));if(i.length>0){const l=i.pop();for(const c of i)l.merge(c,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof ua?t.merge(l,this.model.renameSignal.bind(this.model)):l.swapWithParent()}if(s.length>1){const l=s.pop();for(const c of s)l.merge(c,this.model.renameSignal.bind(this.model));this.setModified()}}}class mxe extends ef{run(t){const n=[...t.children];if(!yd(n,c=>c instanceof Si)||t.numChildren()<=1)return;const s=[];let l;for(const c of n)if(c instanceof Si){let d=c;for(;d.numChildren()===1;){const[f]=d.children;if(f instanceof Si)d=f;else break}s.push(...d.children),l?(t.removeChild(c),c.parent=l.parent,l.parent.removeChild(l),l.parent=d,this.setModified()):l=d}else s.push(c);if(s.length){this.setModified();for(const c of s)c.parent.removeChild(c),c.parent=l}}}class tf extends zt{clone(){return new tf(null,Je(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=ra(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??ve(t)}hash(){return`JoinAggregateTransform ${bt(this.transform)}`}assemble(){const t=[],n=[],i=[];for(const l of this.transform.joinaggregate)n.push(l.op),i.push(this.getDefaultName(l)),t.push(l.field===void 0?null:l.field);const s=this.transform.groupby;return{type:"joinaggregate",as:i,ops:n,fields:t,...s!==void 0?{groupby:s}:{}}}}function wxe(e){return e.stack.stackBy.reduce((t,n)=>{const i=n.fieldDef,s=ve(i);return s&&t.push(s),t},[])}function bxe(e){return fe(e)&&e.every(t=>Se(t))&&e.length>1}class yo extends zt{clone(){return new yo(null,Je(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:i,groupby:s,as:l,offset:c="zero"}=n,d=[],f=[];if(n.sort!==void 0)for(const m of n.sort)d.push(m.field),f.push(un(m.order,"ascending"));const u={field:d,order:f};let a;return bxe(l)?a=l:Se(l)?a=[l,`${l}_end`]:a=[`${n.stack}_start`,`${n.stack}_end`],new yo(t,{dimensionFieldDefs:[],stackField:i,groupby:s,offset:c,sort:u,facetby:[],as:a})}static makeFromEncoding(t,n){const i=n.stack,{encoding:s}=n;if(!i)return null;const{groupbyChannels:l,fieldChannel:c,offset:d,impute:f}=i,u=l.map(y=>{const o=s[y];return ka(o)}).filter(y=>!!y),a=wxe(n),m=n.encoding.order;let w;return fe(m)||we(m)?w=S9(m):w=a.reduce((y,o)=>(y.field.push(o),y.order.push(c==="y"?"descending":"ascending"),y),{field:[],order:[]}),new yo(t,{dimensionFieldDefs:u,stackField:n.vgField(c),facetby:[],stackby:a,sort:w,offset:d,impute:f,as:[n.vgField(c,{suffix:"start",forAs:!0}),n.vgField(c,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${bt(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:i}=this._stack;return t.length>0?t.map(s=>s.bin?n?[ve(s,{binSuffix:"mid"})]:[ve(s,{}),ve(s,{binSuffix:"end"})]:[ve(s)]).flat():i??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:i,stackField:s,stackby:l,sort:c,offset:d,impute:f,as:u}=this._stack;if(f)for(const a of i){const{bandPosition:m=.5,bin:w}=a;if(w){const y=ve(a,{expr:"datum"}),o=ve(a,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${m}*${y}+${1-m}*${o}`,as:ve(a,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:s,groupby:[...l,...n],key:ve(a,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:s,sort:c,as:u,offset:d}),t}}class Th extends zt{clone(){return new Th(null,Je(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=ra(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??ve(t)}hash(){return`WindowTransform ${bt(this.transform)}`}assemble(){const t=[],n=[],i=[],s=[];for(const m of this.transform.window)n.push(m.op),i.push(this.getDefaultName(m)),s.push(m.param===void 0?null:m.param),t.push(m.field===void 0?null:m.field);const l=this.transform.frame,c=this.transform.groupby;if(l&&l[0]===null&&l[1]===null&&n.every(m=>PM(m)))return{type:"joinaggregate",as:i,ops:n,fields:t,...c!==void 0?{groupby:c}:{}};const d=[],f=[];if(this.transform.sort!==void 0)for(const m of this.transform.sort)d.push(m.field),f.push(m.order??"ascending");const u={field:d,order:f},a=this.transform.ignorePeers;return{type:"window",params:s,as:i,ops:n,fields:t,sort:u,...a!==void 0?{ignorePeers:a}:{},...c!==void 0?{groupby:c}:{},...l!==void 0?{frame:l}:{}}}}function Txe(e){function t(n){if(!(n instanceof bh)){const i=n.clone();if(i instanceof Si){const s=nk+i.getSource();i.setSource(s),e.model.component.data.outputNodes[s]=i}else(i instanceof mr||i instanceof yo||i instanceof Th||i instanceof tf)&&i.addDimensions(e.fields);for(const s of n.children.flatMap(t))s.parent=i;return[i]}return n.children.flatMap(t)}return t}function tk(e){if(e instanceof bh)if(e.numChildren()===1&&!(e.children[0]instanceof Si)){const t=e.children[0];(t instanceof mr||t instanceof yo||t instanceof Th||t instanceof tf)&&t.addDimensions(e.fields),t.swapWithParent(),tk(e)}else{const t=e.model.component.data.main;VH(t);const n=Txe(e),i=e.children.map(n).flat();for(const s of i)s.parent=t}else e.children.map(tk)}function VH(e){if(e instanceof Si&&e.type===Gt.Main&&e.numChildren()===1){const t=e.children[0];t instanceof bh||(t.swapWithParent(),VH(e))}}const nk="scale_",zm=5;function ik(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!ik(t.children))return!1}return!0}function Ys(e,t){let n=!1;for(const i of t)n=e.optimize(i)||n;return n}function kP(e,t,n){let i=e.sources,s=!1;return s=Ys(new fxe,i)||s,s=Ys(new cxe(t),i)||s,i=i.filter(l=>l.numChildren()>0),s=Ys(new _xe,i)||s,i=i.filter(l=>l.numChildren()>0),n||(s=Ys(new uxe,i)||s,s=Ys(new yxe(t),i)||s,s=Ys(new dxe,i)||s,s=Ys(new hxe,i)||s,s=Ys(new pxe,i)||s,s=Ys(new gxe,i)||s,s=Ys(new lxe,i)||s,s=Ys(new mxe,i)||s),e.sources=i,s}function Exe(e,t){ik(e.sources);let n=0,i=0;for(let s=0;s<zm&&kP(e,t,!0);s++)n++;e.sources.map(tk);for(let s=0;s<zm&&kP(e,t,!1);s++)i++;ik(e.sources),Math.max(n,i)===zm&&me(`Maximum optimization runs(${zm}) reached.`)}class qi{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new qi(()=>t(n))}}function YH(e){cn(e)?vxe(e):Sxe(e)}function vxe(e){const t=e.component.scales;for(const n of pe(t)){const i=kxe(e,n);if(t[n].setWithExplicit("domains",i),Fxe(e,n),e.component.data.isFaceted){let l=e;for(;!wr(l)&&l.parent;)l=l.parent;if(l.component.resolve.scale[n]==="shared")for(const d of i.value)lo(d)&&(d.data=nk+d.data.replace(nk,""))}}}function Sxe(e){for(const n of e.children)YH(n);const t=e.component.scales;for(const n of pe(t)){let i,s=null;for(const l of e.children){const c=l.component.scales[n];if(c){i===void 0?i=c.getWithExplicit("domains"):i=Ll(i,c.getWithExplicit("domains"),"domains","scale",sk);const d=c.get("selectionExtent");s&&d&&s.param!==d.param&&me(k0e),s=d}}t[n].setWithExplicit("domains",i),s&&t[n].set("selectionExtent",s,!0)}}function xxe(e,t,n,i){if(e==="unaggregated"){const{valid:s,reason:l}=BP(t,n);if(!s){me(l);return}}else if(e===void 0&&i.useUnaggregatedDomain){const{valid:s}=BP(t,n);if(s)return"unaggregated"}return e}function kxe(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:i}=e,s=xxe(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return s!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:s}),t==="x"&&wn(i.x2)?wn(i.x)?Ll(Vo(n,s,e,"x"),Vo(n,s,e,"x2"),"domain","scale",sk):Vo(n,s,e,"x2"):t==="y"&&wn(i.y2)?wn(i.y)?Ll(Vo(n,s,e,"y"),Vo(n,s,e,"y2"),"domain","scale",sk):Vo(n,s,e,"y2"):Vo(n,s,e,t)}function Bxe(e,t,n){return e.map(i=>({signal:`{data: ${F1(i,{timeUnit:n,type:t})}}`}))}function Ev(e,t,n){var s;const i=(s=Hn(n))==null?void 0:s.unit;return t==="temporal"||i?Bxe(e,t,i):[e]}function Vo(e,t,n,i){const{encoding:s}=n,l=wn(s[i]),{type:c}=l,d=l.timeUnit;if(KTe(t)){const m=Vo(e,void 0,n,i),w=Ev(t.unionWith,c,d);return Vr([...w,...m.value])}else{if(Oe(t))return Vr([t]);if(t&&t!=="unaggregated"&&!Y9(t))return Vr(Ev(t,c,d))}const f=n.stack;if(f&&i===f.fieldChannel){if(f.offset==="normalize")return rs([[0,1]]);const m=n.requestDataName(Gt.Main);return rs([{data:m,field:n.vgField(i,{suffix:"start"})},{data:m,field:n.vgField(i,{suffix:"end"})}])}const u=Lo(i)&&we(l)?Ixe(n,i,e):void 0;if(za(l)){const m=Ev([l.datum],c,d);return rs(m)}const a=l;if(t==="unaggregated"){const m=n.requestDataName(Gt.Main),{field:w}=l;return rs([{data:m,field:ve({field:w,aggregate:"min"})},{data:m,field:ve({field:w,aggregate:"max"})}])}else if(Wt(a.bin)){if(Ln(e))return rs(e==="bin-ordinal"?[]:[{data:Fg(u)?n.requestDataName(Gt.Main):n.requestDataName(Gt.Raw),field:n.vgField(i,Up(a,i)?{binSuffix:"range"}:{}),sort:u===!0||!Be(u)?{field:n.vgField(i,{}),op:"min"}:u}]);{const{bin:m}=a;if(Wt(m)){const w=CA(n,a.field,m);return rs([new qi(()=>{const y=n.getSignalName(w);return`[${y}.start, ${y}.stop]`})])}else return rs([{data:n.requestDataName(Gt.Main),field:n.vgField(i,{})}])}}else if(a.timeUnit&&pt(["time","utc"],e)&&fG(a,cn(n)?n.encoding[$a(i)]:void 0,n.markDef,n.config)){const m=n.requestDataName(Gt.Main);return rs([{data:m,field:n.vgField(i)},{data:m,field:n.vgField(i,{suffix:"end"})}])}else return rs(u?[{data:Fg(u)?n.requestDataName(Gt.Main):n.requestDataName(Gt.Raw),field:n.vgField(i),sort:u}]:[{data:n.requestDataName(Gt.Main),field:n.vgField(i)}])}function vv(e,t){const{op:n,field:i,order:s}=e;return{op:n??(t?"sum":v1),...i?{field:qs(i)}:{},...s?{order:s}:{}}}function Fxe(e,t){var d;const n=e.component.scales[t],i=e.specifiedScales[t].domain,s=(d=e.fieldDef(t))==null?void 0:d.bin,l=Y9(i)&&i,c=Jd(s)&&p1(s.extent)&&s.extent;(l||c)&&n.set("selectionExtent",l??c,!0)}function Ixe(e,t,n){if(!Ln(n))return;const i=e.fieldDef(t),s=i.sort;if(lG(s))return{op:"min",field:Yu(i,t),order:"ascending"};const{stack:l}=e,c=l?new Set([...l.groupbyFields,...l.stackBy.map(d=>d.fieldDef.field)]):void 0;if(da(s)){const d=l&&!c.has(s.field);return vv(s,d)}else if(oG(s)){const{encoding:d,order:f}=s,u=e.fieldDef(d),{aggregate:a,field:m}=u,w=l&&!c.has(m);if(So(a)||ic(a))return vv({field:ve(u),order:f},w);if(PM(a)||!a)return vv({op:a,field:m,order:f},w)}else{if(s==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(pt(["ascending",void 0],s))return!0}}function BP(e,t){const{aggregate:n,type:i}=e;return n?Se(n)&&!d0e.has(n)?{valid:!1,reason:eTe(n)}:i==="quantitative"&&t==="log"?{valid:!1,reason:tTe(e)}:{valid:!0}:{valid:!1,reason:Z0e(e)}}function sk(e,t,n,i){return e.explicit&&t.explicit&&me(aTe(n,i,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function Mxe(e){const t=ra(e.map(c=>{if(lo(c)){const{sort:d,...f}=c;return f}return c}),bt),n=ra(e.map(c=>{if(lo(c)){const d=c.sort;return d!==void 0&&!Fg(d)&&("op"in d&&d.op==="count"&&delete d.field,d.order==="ascending"&&delete d.order),d}}).filter(c=>c!==void 0),bt);if(t.length===0)return;if(t.length===1){const c=e[0];if(lo(c)&&n.length>0){let d=n[0];if(n.length>1){me(UL);const f=n.filter(u=>Be(u)&&"op"in u&&u.op!=="min");n.every(u=>Be(u)&&"op"in u)&&f.length===1?d=f[0]:d=!0}else if(Be(d)&&"field"in d){const f=d.field;c.field===f&&(d=d.order?{order:d.order}:!0)}return{...c,sort:d}}return c}const i=ra(n.map(c=>Fg(c)||!("op"in c)||Se(c.op)&&c.op in a0e?c:(me(lTe(c)),!0)),bt);let s;i.length===1?s=i[0]:i.length>1&&(me(UL),s=!0);const l=ra(e.map(c=>lo(c)?c.data:null),c=>c);return l.length===1&&l[0]!==null?{data:l[0],fields:t.map(d=>d.field),...s?{sort:s}:{}}:{fields:t,...s?{sort:s}:{}}}function DA(e){if(lo(e)&&Se(e.field))return e.field;if(f0e(e)){let t;for(const n of e.fields)if(lo(n)&&Se(n.field)){if(!t)t=n.field;else if(t!==n.field)return me(cTe),t}return me(dTe),t}else if(u0e(e)){me(fTe);const t=e.fields[0];return Se(t)?t:void 0}}function D1(e,t){const i=e.component.scales[t].get("domains").map(s=>(lo(s)&&(s.data=e.lookupDataSource(s.data)),s));return Mxe(i)}function XH(e){return Eh(e)||$A(e)?e.children.reduce((t,n)=>t.concat(XH(n)),FP(e)):FP(e)}function FP(e){return pe(e.component.scales).reduce((t,n)=>{const i=e.component.scales[n];if(i.merged)return t;const s=i.combine(),{name:l,type:c,selectionExtent:d,domains:f,range:u,reverse:a,...m}=s,w=Axe(s.range,l,n,e),y=D1(e,n),o=d?xve(e,d,i,y):null;return t.push({name:l,type:c,...y?{domain:y}:{},...o?{domainRaw:o}:{},range:w,...a!==void 0?{reverse:a}:{},...m}),t},[])}function Axe(e,t,n,i){if(Rn(n)){if(sc(e))return{step:{signal:`${t}_step`}}}else if(Be(e)&&lo(e))return{...e,data:i.lookupDataSource(e.data)};return e}class KH extends Do{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:yd(this.get("domains"),t=>fe(t)&&t.length===2&&t[0]<=0&&t[1]>=0)}}const Oxe=["range","scheme"];function Nxe(e){const t=e.component.scales;for(const n of g1){const i=t[n];if(!i)continue;const s=Cxe(n,e);i.setWithExplicit("range",s)}}function IP(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:i,field:s}=n,l=Zi(t),c=e.getName(l);if(Be(i)&&i.binned&&i.step!==void 0)return new qi(()=>{const d=e.scaleName(t),f=`(domain("${d}")[1] - domain("${d}")[0]) / ${i.step}`;return`${e.getSignalName(c)} / (${f})`});if(Wt(i)){const d=CA(e,s,i);return new qi(()=>{const f=e.getSignalName(d),u=`(${f}.stop - ${f}.start) / ${f}.step`;return`${e.getSignalName(c)} / (${u})`})}}}function Cxe(e,t){const n=t.specifiedScales[e],{size:i}=t,l=t.getScaleComponent(e).get("type");for(const m of Oxe)if(n[m]!==void 0){const w=zx(l,m),y=X9(e,m);if(!w)me(A9(l,m,e));else if(y)me(y);else switch(m){case"range":{const o=n.range;if(fe(o)){if(Rn(e))return Vr(o.map(T=>{if(T==="width"||T==="height"){const b=t.getName(T),S=t.getSignalName.bind(t);return qi.fromName(S,b)}return T}))}else if(Be(o))return Vr({data:t.requestDataName(Gt.Main),field:o.field,sort:{op:"min",field:t.vgField(e)}});return Vr(o)}case"scheme":return Vr(Rxe(n[m]))}}const c=e===Zt||e==="xOffset"?"width":"height",d=i[c];if(Ba(d)){if(Rn(e))if(Ln(l)){const m=JH(d,t,e);if(m)return Vr({step:m})}else me(O9(c));else if(ph(e)){const m=e===Ql?"x":"y";if(t.getScaleComponent(m).get("type")==="band"){const o=QH(d,l);if(o)return Vr(o)}}}const{rangeMin:f,rangeMax:u}=n,a=Lxe(e,t);return(f!==void 0||u!==void 0)&&zx(l,"rangeMin")&&fe(a)&&a.length===2?Vr([f??a[0],u??a[1]]):rs(a)}function Rxe(e){return XTe(e)?{scheme:e.name,...zi(e,["name"])}:{scheme:e}}function Lxe(e,t){const{size:n,config:i,mark:s,encoding:l}=t,c=t.getSignalName.bind(t),{type:d}=wn(l[e]),u=t.getScaleComponent(e).get("type"),{domain:a,domainMid:m}=t.specifiedScales[e];switch(e){case Zt:case Cn:{if(pt(["point","band"],u)){const o=ZH(e,n,i.view);if(Ba(o))return{step:JH(o,t,e)}}const w=Zi(e),y=t.getName(w);return e===Cn&&Es(u)?[qi.fromName(c,y),0]:[0,qi.fromName(c,y)]}case Ql:case gh:return Pxe(e,t,u);case Co:{const w=t.component.scales[e].get("zero"),y=eW(s,w,i),o=Uxe(s,n,t,i);return ju(u)?$xe(y,o,Dxe(u,i,a,e)):[y,o]}case Ws:return[0,Math.PI*2];case Xd:return[0,360];case Nr:return[0,new qi(()=>{const w=t.getSignalName("width"),y=t.getSignalName("height");return`min(${w},${y})/2`})];case tc:return[i.scale.minStrokeWidth,i.scale.maxStrokeWidth];case nc:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Qi:return"symbol";case Ji:case Pa:case Da:return u==="ordinal"?d==="nominal"?"category":"ordinal":m!==void 0?"diverging":s==="rect"||s==="geoshape"?"heatmap":"ramp";case Ro:case Zl:case ec:return[i.scale.minOpacity,i.scale.maxOpacity]}}function JH(e,t,n){const{encoding:i}=t,s=t.getScaleComponent(n),l=NM(n),c=i[l];if(UG({step:e,offsetIsDiscrete:Xe(c)&&q9(c.type)})==="offset"&&EG(i,l)){const f=t.getScaleComponent(l);let a=`domain('${t.scaleName(l)}').length`;if(f.get("type")==="band"){const w=f.get("paddingInner")??f.get("padding")??0,y=f.get("paddingOuter")??f.get("padding")??0;a=`bandspace(${a}, ${w}, ${y})`}const m=s.get("paddingInner")??s.get("padding");return{signal:`${e.step} * ${a} / (1-${p0e(m)})`}}else return e.step}function QH(e,t){if(UG({step:e,offsetIsDiscrete:Ln(t)})==="offset")return{step:e.step}}function Pxe(e,t,n){const i=e===Ql?"x":"y",l=t.getScaleComponent(i).get("type"),c=t.scaleName(i);if(l==="band"){const d=ZH(i,t.size,t.config.view);if(Ba(d)){const f=QH(d,n);if(f)return f}return[0,{signal:`bandwidth('${c}')`}]}else{const d=t.encoding[i];return we(d)&&d.timeUnit?[0,{signal:U9(d.timeUnit,u=>`scale('${c}', ${u})`)}]:J7(`Cannot use ${e} scale if ${i} scale is not discrete.`)}}function ZH(e,t,n){const i=e===Zt?"width":"height",s=t[i];return s||v0(n,i)}function Dxe(e,t,n,i){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&fe(n)?n.length+1:(me(bTe(i)),3)}}function $xe(e,t,n){const i=()=>{const s=go(t),l=go(e),c=`(${s} - ${l}) / (${n} - 1)`;return`sequence(${l}, ${s} + ${c}, ${c})`};return Oe(t)?new qi(i):{signal:i()}}function eW(e,t,n){if(t)return Oe(t)?{signal:`${t.signal} ? 0 : ${eW(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(y1("size",e))}const MP=.95;function Uxe(e,t,n,i){const s={x:IP(n,"x"),y:IP(n,"y")};switch(e){case"bar":case"tick":{if(i.scale.maxBandSize!==void 0)return i.scale.maxBandSize;const l=AP(t,s,i.view);return $t(l)?l-1:new qi(()=>`${l.signal} - 1`)}case"line":case"trail":case"rule":return i.scale.maxStrokeWidth;case"text":return i.scale.maxFontSize;case"point":case"square":case"circle":{if(i.scale.maxSize)return i.scale.maxSize;const l=AP(t,s,i.view);return $t(l)?Math.pow(MP*l,2):new qi(()=>`pow(${MP} * ${l.signal}, 2)`)}}throw new Error(y1("size",e))}function AP(e,t,n){const i=Ba(e.width)?e.width.step:E0(n,"width"),s=Ba(e.height)?e.height.step:E0(n,"height");return t.x||t.y?new qi(()=>`min(${[t.x?t.x.signal:i,t.y?t.y.signal:s].join(", ")})`):Math.min(i,s)}function tW(e,t){cn(e)?zxe(e,t):iW(e,t)}function zxe(e,t){const n=e.component.scales,{config:i,encoding:s,markDef:l,specifiedScales:c}=e;for(const d of pe(n)){const f=c[d],u=n[d],a=e.getScaleComponent(d),m=wn(s[d]),w=f[t],y=a.get("type"),o=a.get("padding"),T=a.get("paddingInner"),b=zx(y,t),S=X9(d,t);if(w!==void 0&&(b?S&&me(S):me(A9(y,t,d))),b&&S===void 0)if(w!==void 0){const x=m.timeUnit,k=m.type;switch(t){case"domainMax":case"domainMin":Qd(f[t])||k==="temporal"||x?u.set(t,{signal:F1(f[t],{type:k,timeUnit:x})},!0):u.set(t,f[t],!0);break;default:u.copyKeyFromObject(t,f)}}else{const x=t in OP?OP[t]({model:e,channel:d,fieldOrDatumDef:m,scaleType:y,scalePadding:o,scalePaddingInner:T,domain:f.domain,domainMin:f.domainMin,domainMax:f.domainMax,markDef:l,config:i,hasNestedOffsetScale:qx(s,d),hasSecondaryRangeChannel:!!s[$a(d)]}):i.scale[t];x!==void 0&&u.set(t,x,!1)}}}const OP={bins:({model:e,fieldOrDatumDef:t})=>we(t)?jxe(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>qxe(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:i,domainMax:s,fieldOrDatumDef:l})=>Gxe(e,t,n,i,s,l),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:i,config:s})=>Hxe(e,t,s.scale,n,i,s.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:i,config:s,hasNestedOffsetScale:l})=>Wxe(e,t,n.type,i,s.scale,l),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:i,config:s,hasNestedOffsetScale:l})=>Vxe(e,t,n,i,s.scale,l),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:i})=>{const s=we(e)?e.sort:void 0;return Yxe(t,s,n,i.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:i,scaleType:s,config:l,hasSecondaryRangeChannel:c})=>Xxe(e,t,n,i,s,l.scale,c)};function nW(e){cn(e)?Nxe(e):iW(e,"range")}function iW(e,t){const n=e.component.scales;for(const i of e.children)t==="range"?nW(i):tW(i,t);for(const i of pe(n)){let s;for(const l of e.children){const c=l.component.scales[i];if(c){const d=c.getWithExplicit(t);s=Ll(s,d,t,"scale",QG((f,u)=>{switch(t){case"range":return f.step&&u.step?f.step-u.step:0}return 0}))}}n[i].setWithExplicit(t,s)}}function jxe(e,t){const n=t.bin;if(Wt(n)){const i=CA(e,t.field,n);return new qi(()=>e.getSignalName(i))}else if(Dn(n)&&Jd(n)&&n.step!==void 0)return{step:n.step}}function qxe(e,t){if(pt([Ji,Pa,Da],e)&&t!=="nominal")return"hcl"}function Gxe(e,t,n,i,s,l){var c;if(!((c=ka(l))!=null&&c.bin||fe(n)||s!=null||i!=null||pt([ji.TIME,ji.UTC],e)))return Rn(t)?!0:void 0}function Hxe(e,t,n,i,s,l){if(Rn(e)){if(hr(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:c,orient:d}=s;if(c==="bar"&&!(we(i)&&(i.bin||i.timeUnit))&&(d==="vertical"&&e==="x"||d==="horizontal"&&e==="y"))return l.continuousBandSize}if(t===ji.POINT)return n.pointPadding}}function Wxe(e,t,n,i,s,l=!1){if(e===void 0){if(Rn(t)){const{bandPaddingInner:c,barBandPaddingInner:d,rectBandPaddingInner:f,bandWithNestedOffsetPaddingInner:u}=s;return l?u:un(c,n==="bar"?d:f)}else if(ph(t)&&i===ji.BAND)return s.offsetBandPaddingInner}}function Vxe(e,t,n,i,s,l=!1){if(e===void 0){if(Rn(t)){const{bandPaddingOuter:c,bandWithNestedOffsetPaddingOuter:d}=s;if(l)return d;if(n===ji.BAND)return un(c,Oe(i)?{signal:`${i.signal}/2`}:i/2)}else if(ph(t)){if(n===ji.POINT)return .5;if(n===ji.BAND)return s.offsetBandPaddingOuter}}}function Yxe(e,t,n,i){if(n==="x"&&i.xReverse!==void 0)return Es(e)&&t==="descending"?Oe(i.xReverse)?{signal:`!${i.xReverse.signal}`}:!i.xReverse:i.xReverse;if(Es(e)&&t==="descending")return!0}function Xxe(e,t,n,i,s,l,c){if(!!n&&n!=="unaggregated"&&Es(s)){if(fe(n)){const f=n[0],u=n[n.length-1];if(f<=0&&u>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!ju(s))return!0;if(!(we(t)&&t.bin)&&pt([...Ua,...Qbe],e)){const{orient:f,type:u}=i;return pt(["bar","area","line","trail"],u)&&(f==="horizontal"&&e==="y"||f==="vertical"&&e==="x")?!1:pt(["bar","area"],u)&&!c?!0:l==null?void 0:l.zero}return!1}function Kxe(e,t,n,i,s=!1){const l=Jxe(t,n,i,s),{type:c}=e;return Lo(t)?c!==void 0?n1e(t,c)?we(n)&&!t1e(c,n.type)?(me(sTe(c,l)),l):c:(me(iTe(t,c,l)),l):l:null}function Jxe(e,t,n,i){var s;switch(t.type){case"nominal":case"ordinal":{if(eu(e)||gv(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&me(pv(e,"ordinal")),"ordinal";if(Rn(e)||ph(e)){if(pt(["rect","bar","image","rule"],n.type)||i)return"band"}else if(n.type==="arc"&&e in LM)return"band";const l=n[Zi(e)];return vd(l)||Gu(t)&&((s=t.axis)!=null&&s.tickBand)?"band":"point"}case"temporal":return eu(e)?"time":gv(e)==="discrete"?(me(pv(e,"temporal")),"ordinal"):we(t)&&t.timeUnit&&Hn(t.timeUnit).utc?"utc":"time";case"quantitative":return eu(e)?we(t)&&Wt(t.bin)?"bin-ordinal":"linear":gv(e)==="discrete"?(me(pv(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(I9(t.type))}function Qxe(e,{ignoreRange:t}={}){sW(e),YH(e);for(const n of e1e)tW(e,n);t||nW(e)}function sW(e){cn(e)?e.component.scales=Zxe(e):e.component.scales=tke(e)}function Zxe(e){const{encoding:t,mark:n,markDef:i}=e,s={};for(const l of g1){const c=wn(t[l]);if(c&&n===Q9&&l===Qi&&c.type===yh)continue;let d=c&&c.scale;if(ph(l)){const f=h9(l);if(!qx(t,f)){d&&me(q0e(l));continue}}if(c&&d!==null&&d!==!1){d??(d={});const f=qx(t,l),u=Kxe(d,l,c,i,f);s[l]=new KH(e.scaleName(`${l}`,!0),{value:u,explicit:d.type===u})}}return s}const eke=QG((e,t)=>jL(e)-jL(t));function tke(e){var t;const n=e.component.scales={},i={},s=e.component.resolve;for(const l of e.children){sW(l);for(const c of pe(l.component.scales))if((t=s.scale)[c]??(t[c]=RH(c,e)),s.scale[c]==="shared"){const d=i[c],f=l.component.scales[c].getWithExplicit("type");d?GTe(d.value,f.value)?i[c]=Ll(d,f,"type","scale",eke):(s.scale[c]="independent",delete i[c]):i[c]=f}}for(const l of pe(i)){const c=e.scaleName(l,!0),d=i[l];n[l]=new KH(c,d);for(const f of e.children){const u=f.component.scales[l];u&&(f.renameScale(u.get("name"),c),u.merged=!0)}}return n}class Sv{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function cn(e){return(e==null?void 0:e.type)==="unit"}function wr(e){return(e==null?void 0:e.type)==="facet"}function $A(e){return(e==null?void 0:e.type)==="concat"}function Eh(e){return(e==null?void 0:e.type)==="layer"}class UA{constructor(t,n,i,s,l,c,d){this.type=n,this.parent=i,this.config=l,this.correctDataNames=f=>{var u,a,m;return(u=f.from)!=null&&u.data&&(f.from.data=this.lookupDataSource(f.from.data)),(m=(a=f.from)==null?void 0:a.facet)!=null&&m.data&&(f.from.facet.data=this.lookupDataSource(f.from.facet.data)),f},this.parent=i,this.config=l,this.view=Ri(d),this.name=t.name??s,this.title=el(t.title)?{text:t.title}:t.title?Ri(t.title):void 0,this.scaleNameMap=i?i.scaleNameMap:new Sv,this.projectionNameMap=i?i.projectionNameMap:new Sv,this.signalNameMap=i?i.signalNameMap:new Sv,this.data=t.data,this.description=t.description,this.transforms=lve(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:yEe(t,n,l),this.component={data:{sources:i?i.component.data.sources:[],outputNodes:i?i.component.data.outputNodes:{},outputNodeRefCounts:i?i.component.data.outputNodeRefCounts:{},isFaceted:S1(t)||(i==null?void 0:i.component.data.isFaceted)&&t.data===void 0},layoutSize:new Do,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...c?Je(c):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){Qxe(this)}parseProjection(){HH(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){UH(this)}assembleEncodeFromView(t){const{style:n,...i}=t,s={};for(const l of pe(i)){const c=i[l];c!==void 0&&(s[l]=Kt(c))}return s}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=Kt(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n??{}}:Dt(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:i,config:s}=this,l=ESe(i.layoutHeaders,s);return{padding:t,...this.assembleDefaultLayout(),...n,...l?{titleBand:l}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const i of Os)t[i].title&&n.push(pSe(this,i));for(const i of MA)n=n.concat(ySe(this,i));return n}assembleAxes(){return iSe(this.component.axes,this.config)}assembleLegends(){return jH(this)}assembleProjections(){return HSe(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},i={...b9(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(i.text)return pt(["unit","layer"],this.type)?pt(["middle",void 0],i.anchor)&&(i.frame??(i.frame="group")):i.anchor??(i.anchor="start"),Dt(i)?void 0:i}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const i=this.assembleLayout();i&&(n.layout=i),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const s=!this.parent||wr(this.parent)?XH(this):[];s.length>0&&(n.scales=s);const l=this.assembleAxes();l.length>0&&(n.axes=l);const c=this.assembleLegends();return c.length>0&&(n.legends=c),n}getName(t){return Qt((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Gt[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),i=this.component.data.outputNodeRefCounts;return i[n]=(i[n]||0)+1,n}getSizeSignalRef(t){if(wr(this.parent)){const n=NH(t),i=_1(n),s=this.component.scales[i];if(s&&!s.merged){const l=s.get("type"),c=s.get("range");if(Ln(l)&&sc(c)){const d=s.get("name"),f=D1(this,i),u=DA(f);if(u){const a=ve({aggregate:"distinct",field:u},{expr:"datum"});return{signal:OH(d,s,a)}}else return me($M(i)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(d9(t)&&Lo(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let i=this.component.selection[t];if(!i&&this.parent&&(i=this.parent.getSelectionComponent(t,n)),!i)throw new Error(T0e(n));return i}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(i=>i.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(i=>i.hasOrientSignalRef()))}}class rW extends UA{vgField(t,n={}){const i=this.fieldDef(t);if(i)return ve(i,n)}reduceFieldDef(t,n){return W1e(this.getMapping(),(i,s,l)=>{const c=ka(s);return c?t(i,c,l):i},n)}forEachFieldDef(t,n){uA(this.getMapping(),(i,s)=>{const l=ka(i);l&&t(l,s)},n)}}class $1 extends zt{clone(){return new $1(null,Je(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Je(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"value",i[1]??"density"],n.groupby&&n.minsteps==null&&n.maxsteps==null&&n.steps==null&&(this.transform.steps=200)}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${bt(this.transform)}`}assemble(){const{density:t,...n}=this.transform;return{type:"kde",field:t,...n}}}class Og extends zt{clone(){return new Og(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:i,mark:s,markDef:l}=n;if(Ct("invalid",l,i)!=="filter")return null;const d=n.reduceFieldDef((f,u,a)=>{const m=Lo(a)&&n.getScaleComponent(a);if(m){const w=m.get("type");Es(w)&&u.aggregate!=="count"&&!rc(s)&&(f[u.field]=u)}return f},{});return pe(d).length?new Og(t,d):null}dependentFields(){return new Set(pe(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${bt(this.filter)}`}assemble(){const t=pe(this.filter).reduce((n,i)=>{const s=this.filter[i],l=ve(s,{expr:"datum"});return s!==null&&(s.type==="temporal"?n.push(`(isDate(${l}) || (isValid(${l}) && isFinite(+${l})))`):s.type==="quantitative"&&(n.push(`isValid(${l})`),n.push(`isFinite(+${l})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class U1 extends zt{clone(){return new U1(this.parent,Je(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Je(n);const{flatten:i,as:s=[]}=this.transform;this.transform.as=i.map((l,c)=>s[c]??l)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${bt(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class z1 extends zt{clone(){return new z1(null,Je(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Je(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"key",i[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${bt(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class iu extends zt{clone(){return new iu(null,Je(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let i=0;for(const s of[[Rr,Cr],[Gs,Lr]]){const l=s.map(c=>{const d=wn(n.encoding[c]);return we(d)?d.field:za(d)?{expr:`${d.datum}`}:xr(d)?{expr:`${d.value}`}:void 0});(l[0]||l[1])&&(t=new iu(t,l,null,n.getName(`geojson_${i++}`)))}if(n.channelHasField(Qi)){const s=n.typedFieldDef(Qi);s.type===yh&&(t=new iu(t,null,s.field,n.getName(`geojson_${i++}`)))}return t}constructor(t,n,i,s){super(t),this.fields=n,this.geojson=i,this.signal=s}dependentFields(){const t=(this.fields??[]).filter(Se);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${bt(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class Ng extends zt{clone(){return new Ng(null,this.projection,Je(this.fields),Je(this.as))}constructor(t,n,i,s){super(t),this.projection=n,this.fields=i,this.as=s}static parseAll(t,n){if(!n.projectionName())return t;for(const i of[[Rr,Cr],[Gs,Lr]]){const s=i.map(c=>{const d=wn(n.encoding[c]);return we(d)?d.field:za(d)?{expr:`${d.datum}`}:xr(d)?{expr:`${d.value}`}:void 0}),l=i[0]===Gs?"2":"";(s[0]||s[1])&&(t=new Ng(t,n.projectionName(),s,[n.getName(`x${l}`),n.getName(`y${l}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Se))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${bt(this.fields)} ${bt(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class ed extends zt{clone(){return new ed(null,Je(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:i,step:s}=t;return{signal:`sequence(${[n,i,...s?[s]:[]].join(",")})`}}static makeFromTransform(t,n){return new ed(t,n)}static makeFromEncoding(t,n){const i=n.encoding,s=i.x,l=i.y;if(we(s)&&we(l)){const c=s.impute?s:l.impute?l:void 0;if(c===void 0)return;const d=s.impute?l:l.impute?s:void 0,{method:f,value:u,frame:a,keyvals:m}=c.impute,w=SG(n.mark,i);return new ed(t,{impute:c.field,key:d.field,...f?{method:f}:{},...u!==void 0?{value:u}:{},...a?{frame:a}:{},...m!==void 0?{keyvals:m}:{},...w.length?{groupby:w}:{}})}return null}hash(){return`Impute ${bt(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:i,method:s,groupby:l,value:c,frame:d=[null,null]}=this.transform,f={type:"impute",field:t,key:n,...i?{keyvals:GEe(i)?this.processSequence(i):i}:{},method:"value",...l?{groupby:l}:{},value:!s||s==="value"?c:null};if(s&&s!=="value"){const u={type:"window",as:[`imputed_${t}_value`],ops:[s],fields:[t],frame:d,ignorePeers:!1,...l?{groupby:l}:{}},a={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[f,u,a]}else return[f]}}class j1 extends zt{clone(){return new j1(null,Je(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Je(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${bt(this.transform)}`}assemble(){const{loess:t,on:n,...i}=this.transform;return{type:"loess",x:n,y:t,...i}}}class Cg extends zt{clone(){return new Cg(null,Je(this.transform),this.secondary)}constructor(t,n,i){super(t),this.transform=n,this.secondary=i}static make(t,n,i,s){const l=n.component.data.sources,{from:c}=i;let d=null;if(HEe(c)){let f=lW(c.data,l);f||(f=new Bd(c.data),l.push(f));const u=n.getName(`lookup_${s}`);d=new Si(f,u,Gt.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[u]=d}else if(WEe(c)){const f=c.param;i={as:f,...i};let u;try{u=n.getSelectionComponent(Qt(f),f)}catch{throw new Error(S0e(f))}if(d=u.materialized,!d)throw new Error(x0e(f))}return new Cg(t,i,d.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?xe(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${bt({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:xe(this.transform.as)}:{}};else{let n=this.transform.as;Se(n)||(me(N0e),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class q1 extends zt{clone(){return new q1(null,Je(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Je(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"prob",i[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${bt(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class G1 extends zt{clone(){return new G1(null,Je(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Je(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${bt(this.transform)}`}assemble(){const{regression:t,on:n,...i}=this.transform;return{type:"regression",x:n,y:t,...i}}}class H1 extends zt{clone(){return new H1(null,Je(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=ra((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${bt(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:i,limit:s,op:l}=this.transform;return{type:"pivot",field:t,value:n,...s!==void 0?{limit:s}:{},...l!==void 0?{op:l}:{},...i!==void 0?{groupby:i}:{}}}}class W1 extends zt{clone(){return new W1(null,Je(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${bt(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function aW(e){let t=0;function n(i,s){if(i instanceof Bd&&!i.isGenerator&&!Wu(i.data)&&(e.push(s),s={name:null,source:s.name,transform:[]}),i instanceof ni&&(i.parent instanceof Bd&&!s.source?(s.format={...s.format??{},parse:i.assembleFormatParse()},s.transform.push(...i.assembleTransforms(!0))):s.transform.push(...i.assembleTransforms())),i instanceof bh){s.name||(s.name=`data_${t++}`),!s.source||s.transform.length>0?(e.push(s),i.data=s.name):i.data=s.source,e.push(...i.assemble());return}switch((i instanceof qp||i instanceof Gp||i instanceof Og||i instanceof wh||i instanceof Vu||i instanceof Ng||i instanceof mr||i instanceof Cg||i instanceof Th||i instanceof tf||i instanceof z1||i instanceof U1||i instanceof $1||i instanceof j1||i instanceof q1||i instanceof G1||i instanceof $l||i instanceof W1||i instanceof H1)&&s.transform.push(i.assemble()),(i instanceof ua||i instanceof fa||i instanceof ed||i instanceof yo||i instanceof iu)&&s.transform.push(...i.assemble()),i instanceof Si&&(s.source&&s.transform.length===0?i.setSource(s.source):i.parent instanceof Si?i.setSource(s.name):(s.name||(s.name=`data_${t++}`),i.setSource(s.name),i.numChildren()===1&&(e.push(s),s={name:null,source:s.name,transform:[]}))),i.numChildren()){case 0:i instanceof Si&&(!s.source||s.transform.length>0)&&e.push(s);break;case 1:n(i.children[0],s);break;default:{s.name||(s.name=`data_${t++}`);let l=s.name;!s.source||s.transform.length>0?e.push(s):l=s.source;for(const c of i.children)n(c,{name:null,source:l,transform:[]});break}}}return n}function nke(e){const t=[],n=aW(t);for(const i of e.children)n(i,{source:e.name,name:null,transform:[]});return t}function ike(e,t){const n=[],i=aW(n);let s=0;for(const c of e.sources){c.hasName()||(c.dataName=`source_${s++}`);const d=c.assemble();i(c,d)}for(const c of n)c.transform.length===0&&delete c.transform;let l=0;for(const[c,d]of n.entries())(d.transform??[]).length===0&&!d.source&&n.splice(l++,0,n.splice(c,1)[0]);for(const c of n)for(const d of c.transform??[])d.type==="lookup"&&(d.from=e.outputNodes[d.from].getSource());for(const c of n)c.name in t&&(c.values=t[c.name]);return n}function ske(e){return e==="top"||e==="left"||Oe(e)?"header":"footer"}function rke(e){for(const t of Os)ake(e,t);NP(e,"x"),NP(e,"y")}function ake(e,t){var c;const{facet:n,config:i,child:s,component:l}=e;if(e.channelHasField(t)){const d=n[t],f=Xu("title",null,i,t);let u=tu(d,i,{allowDisabling:!0,includeDefault:f===void 0||!!f});s.component.layoutHeaders[t].title&&(u=fe(u)?u.join(", "):u,u+=` / ${s.component.layoutHeaders[t].title}`,s.component.layoutHeaders[t].title=null);const a=Xu("labelOrient",d.header,i,t),m=d.header!==null?un((c=d.header)==null?void 0:c.labels,i.header.labels,!0):!1,w=pt(["bottom","right"],a)?"footer":"header";l.layoutHeaders[t]={title:d.header!==null?u:null,facetFieldDef:d,[w]:t==="facet"?[]:[oW(e,t,m)]}}}function oW(e,t,n){const i=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(i)?e.child.getSizeSignalRef(i):void 0,axes:[]}}function NP(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:i,resolve:s}=e.component;if(s.axis[t]=NA(s,t),s.axis[t]==="shared"){const l=t==="x"?"column":"row",c=i[l];for(const d of n.component.axes[t]){const f=ske(d.get("orient"));c[f]??(c[f]=[oW(e,l,!1)]);const u=v_(d,"main",e.config,{header:!0});u&&c[f][0].axes.push(u),d.mainExtracted=!0}}}}function oke(e){zA(e),B0(e,"width"),B0(e,"height")}function lke(e){zA(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";B0(e,t),B0(e,n)}function zA(e){for(const t of e.children)t.parseLayoutSize()}function B0(e,t){const n=NH(t),i=_1(n),s=e.component.resolve,l=e.component.layoutSize;let c;for(const d of e.children){const f=d.component.layoutSize.getWithExplicit(n),u=s.scale[i]??RH(i,e);if(u==="independent"&&f.value==="step"){c=void 0;break}if(c){if(u==="independent"&&c.value!==f.value){c=void 0;break}c=Ll(c,f,n,"")}else c=f}if(c){for(const d of e.children)e.renameSignal(d.getName(n),e.getName(t)),d.component.layoutSize.set(n,"merged",!1);l.setWithExplicit(t,c)}else l.setWithExplicit(t,{explicit:!1,value:void 0})}function cke(e){const{size:t,component:n}=e;for(const i of Ua){const s=Zi(i);if(t[s]){const l=t[s];n.layoutSize.set(s,Ba(l)?"step":l,!0)}else{const l=dke(e,s);n.layoutSize.set(s,l,!1)}}}function dke(e,t){const n=t==="width"?"x":"y",i=e.config,s=e.getScaleComponent(n);if(s){const l=s.get("type"),c=s.get("range");if(Ln(l)){const d=v0(i.view,t);return sc(c)||Ba(d)?"step":d}else return Hx(i.view,t)}else{if(e.hasProjection||e.mark==="arc")return Hx(i.view,t);{const l=v0(i.view,t);return Ba(l)?l.step:l}}}function rk(e,t,n){return ve(t,{suffix:`by_${ve(e)}`,...n??{}})}class q_ extends rW{constructor(t,n,i,s){super(t,"facet",n,i,s,t.resolve),this.child=WA(t.spec,this,this.getName("child"),void 0,s),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!Dp(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=pe(t),i={};for(const s of n){if(![ho,_o].includes(s)){me(y1(s,"facet"));break}const l=t[s];if(l.field===void 0){me($x(l,s));break}i[s]=this.initFacetFieldDef(l,s)}return i}initFacetFieldDef(t,n){const i=dA(t,n);return i.header?i.header=Ri(i.header):i.header===null&&(i.header=null),i}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=V1(this),this.child.parseData()}parseLayoutSize(){zA(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),rke(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Os)for(const i of AA){const s=this.component.layoutHeaders[n],l=s[i],{facetFieldDef:c}=s;if(c){const d=Xu("titleOrient",c.header,this.config,n);if(["right","bottom"].includes(d)){const f=L1(n,d);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[f]="end"}}if(l!=null&&l[0]){const d=n==="row"?"height":"width",f=i==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(d)&&(t[f]??(t[f]={}),t[f][n]=.5),s.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,i=t?this.columnDistinctSignal():n?1:void 0;let s="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(s="none"),{...this.getHeaderLayoutMixins(),...i?{columns:i}:{},bounds:"full",align:s}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof q_))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof q_?{...this.channelHasField("column")?{encode:{update:{columns:{field:ve(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],i=[];if(this.child instanceof q_){if(this.child.channelHasField("column")){const s=ve(this.child.facet.column);t.push(s),n.push("distinct"),i.push(`distinct_${s}`)}}else for(const s of Ua){const l=this.child.component.scales[s];if(l&&!l.merged){const c=l.get("type"),d=l.get("range");if(Ln(c)&&sc(d)){const f=D1(this.child,s),u=DA(f);u?(t.push(u),n.push("distinct"),i.push(`distinct_${u}`)):me($M(s))}}}return{fields:t,ops:n,as:i}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:i,column:s}=this.facet,{fields:l,ops:c,as:d}=this.getCardinalityAggregateForChild(),f=[];for(const a of Os){const m=this.facet[a];if(m){f.push(ve(m));const{bin:w,sort:y}=m;if(Wt(w)&&f.push(ve(m,{binSuffix:"end"})),da(y)){const{field:o,op:T=v1}=y,b=rk(m,y);i&&s?(l.push(b),c.push("max"),d.push(b)):(l.push(o),c.push(T),d.push(b))}else if(fe(y)){const o=Yu(m,a);l.push(o),c.push("max"),d.push(o)}}}const u=!!i&&!!s;return{name:t,data:n,groupby:f,...u||l.length>0?{aggregate:{...u?{cross:u}:{},...l.length?{fields:l,ops:c,as:d}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,i=n[t];return i?da(i.sort)?[rk(i,i.sort,{expr:"datum"})]:fe(i.sort)?[Yu(i,t,{expr:"datum"})]:[ve(i,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,i=n[t];if(i){const{sort:s}=i;return[(da(s)?s.order:!fe(s)&&s)||"ascending"]}return[]}assembleLabelTitle(){var s;const{facet:t,config:n}=this;if(t.facet)return Zx(t.facet,"facet",n);const i={row:["top","bottom"],column:["left","right"]};for(const l of MA)if(t[l]){const c=Xu("labelOrient",(s=t[l])==null?void 0:s.header,n,l);if(i[l].includes(c))return Zx(t[l],l,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,i=nke(n),s=t.assembleGroupEncodeEntry(!1),l=this.assembleLabelTitle()||t.assembleTitle(),c=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...l?{title:l}:{},...c?{style:c}:{},from:{facet:this.assembleFacet()},sort:{field:Os.map(f=>this.facetSortFields(f)).flat(),order:Os.map(f=>this.facetSortOrder(f)).flat()},...i.length>0?{data:i}:{},...s?{encode:{update:s}}:{},...t.assembleGroup(Tve(this,[]))}]}getMapping(){return this.facet}}function fke(e,t){const{row:n,column:i}=t;if(n&&i){let s=null;for(const l of[n,i])if(da(l.sort)){const{field:c,op:d=v1}=l.sort;e=s=new tf(e,{joinaggregate:[{op:d,field:c,as:rk(l,l.sort,{forAs:!0})}],groupby:[ve(l)]})}return s}return null}function lW(e,t){var n,i,s,l;for(const c of t){const d=c.data;if(e.name&&c.hasName()&&e.name!==c.dataName)continue;const f=(n=e.format)==null?void 0:n.mesh,u=(i=d.format)==null?void 0:i.feature;if(f&&u)continue;const a=(s=e.format)==null?void 0:s.feature;if((a||u)&&a!==u)continue;const m=(l=d.format)==null?void 0:l.mesh;if(!((f||m)&&f!==m)){if(Mg(e)&&Mg(d)){if(sa(e.values,d.values))return c}else if(Wu(e)&&Wu(d)){if(e.url===d.url)return c}else if(ZG(e)&&e.name===c.dataName)return c}}return null}function uke(e,t){if(e.data||!e.parent){if(e.data===null){const i=new Bd({values:[]});return t.push(i),i}const n=lW(e.data,t);if(n)return yl(e.data)||(n.data.format=Q7({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const i=new Bd(e.data);return t.push(i),i}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function hke(e,t,n){let i=0;for(const s of t.transforms){let l,c;if(nve(s))c=e=new Vu(e,s),l="derived";else if(vA(s)){const d=sxe(s);c=e=ni.makeWithAncestors(e,{},d,n)??e,e=new wh(e,t,s.filter)}else if(YG(s))c=e=ua.makeFromTransform(e,s,t),l="number";else if(sve(s))l="date",n.getWithExplicit(s.field).value===void 0&&(e=new ni(e,{[s.field]:l}),n.set(s.field,l,!1)),c=e=fa.makeFromTransform(e,s);else if(rve(s))c=e=mr.makeFromTransform(e,s),l="number",IA(t)&&(e=new $l(e));else if(VG(s))c=e=Cg.make(e,t,s,i++),l="derived";else if(ZEe(s))c=e=new Th(e,s),l="number";else if(eve(s))c=e=new tf(e,s),l="number";else if(ave(s))c=e=yo.makeFromTransform(e,s),l="derived";else if(ove(s))c=e=new z1(e,s),l="derived";else if(tve(s))c=e=new U1(e,s),l="derived";else if(VEe(s))c=e=new H1(e,s),l="derived";else if(QEe(s))e=new W1(e,s);else if(ive(s))c=e=ed.makeFromTransform(e,s),l="derived";else if(YEe(s))c=e=new $1(e,s),l="derived";else if(XEe(s))c=e=new q1(e,s),l="derived";else if(KEe(s))c=e=new G1(e,s),l="derived";else if(JEe(s))c=e=new j1(e,s),l="derived";else{me(O0e(s));continue}if(c&&l!==void 0)for(const d of c.producedFields()??[])n.set(d,l,!1)}return e}function V1(e){var T;let t=uke(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:i}=e.component.data,s=e.data,c=!(s&&(yl(s)||Wu(s)||Mg(s)))&&e.parent?e.parent.component.data.ancestorParse.clone():new wve;yl(s)?(eH(s)?t=new Gp(t,s.sequence):SA(s)&&(t=new qp(t,s.graticule)),c.parseNothing=!0):((T=s==null?void 0:s.format)==null?void 0:T.parse)===null&&(c.parseNothing=!0),t=ni.makeExplicit(t,e,c)??t,t=new $l(t);const d=e.parent&&Eh(e.parent);(cn(e)||wr(e))&&d&&(t=ua.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=hke(t,e,c));const f=axe(e),u=rxe(e);t=ni.makeWithAncestors(t,{},{...f,...u},c)??t,cn(e)&&(t=iu.parseAll(t,e),t=Ng.parseAll(t,e)),(cn(e)||wr(e))&&(d||(t=ua.makeFromEncoding(t,e)??t),t=fa.makeFromEncoding(t,e)??t,t=Vu.parseAllForSortIndex(t,e));const a=e.getDataName(Gt.Raw),m=new Si(t,a,Gt.Raw,i);if(n[a]=m,t=m,cn(e)){const b=mr.makeFromEncoding(t,e);b&&(t=b,IA(e)&&(t=new $l(t))),t=ed.makeFromEncoding(t,e)??t,t=yo.makeFromEncoding(t,e)??t}cn(e)&&(t=Og.make(t,e)??t);const w=e.getDataName(Gt.Main),y=new Si(t,w,Gt.Main,i);n[w]=y,t=y,cn(e)&&tSe(e,y);let o=null;if(wr(e)){const b=e.getName("facet");t=fke(t,e.facet)??t,o=new bh(t,e,b,y.getSource()),n[b]=o}return{...e.component.data,outputNodes:n,outputNodeRefCounts:i,raw:m,main:y,facetRoot:o,ancestorParse:c}}class _ke extends UA{constructor(t,n,i,s){var l,c,d,f;super(t,"concat",n,i,s,t.resolve),(((c=(l=t.resolve)==null?void 0:l.axis)==null?void 0:c.x)==="shared"||((f=(d=t.resolve)==null?void 0:d.axis)==null?void 0:f.y)==="shared")&&me(I0e),this.children=this.getChildren(t).map((u,a)=>WA(u,this,this.getName(`concat_${a}`),void 0,s))}parseData(){this.component.data=V1(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of pe(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return A1(t)?t.vconcat:TA(t)?t.hconcat:t.concat}parseLayoutSize(){lke(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=OA(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),i=t.assembleGroupStyle(),s=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...i?{style:i}:{},...s?{encode:{update:s}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function gke(e){return e===!1||e===null}const pke={disable:1,gridScale:1,scale:1,...bG,labelExpr:1,encode:1},cW=pe(pke);class jA extends Do{constructor(t={},n={},i=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=i}clone(){return new jA(Je(this.explicit),Je(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!gke(this.get(t))}hasOrientSignalRef(){return Oe(this.explicit.orient)}}function yke(e,t,n){const{encoding:i,config:s}=e,l=wn(i[t])??wn(i[$a(t)]),c=e.axis(t)||{},{format:d,formatType:f}=c;if(Sd(f))return{text:_r({fieldOrDatumDef:l,field:"datum.value",format:d,formatType:f,config:s}),...n};if(d===void 0&&f===void 0&&s.customFormatTypes){if(qu(l)==="quantitative"){if(Gu(l)&&l.stack==="normalize"&&s.normalizedNumberFormatType)return{text:_r({fieldOrDatumDef:l,field:"datum.value",format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,config:s}),...n};if(s.numberFormatType)return{text:_r({fieldOrDatumDef:l,field:"datum.value",format:s.numberFormat,formatType:s.numberFormatType,config:s}),...n}}if(qu(l)==="temporal"&&s.timeFormatType&&we(l)&&!l.timeUnit)return{text:_r({fieldOrDatumDef:l,field:"datum.value",format:s.timeFormat,formatType:s.timeFormatType,config:s}),...n}}return n}function mke(e){return Ua.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[xke(n,e)]),t),{})}const wke={bottom:"top",top:"bottom",left:"right",right:"left"};function bke(e){const{axes:t,resolve:n}=e.component,i={top:0,bottom:0,right:0,left:0};for(const s of e.children){s.parseAxesAndHeaders();for(const l of pe(s.component.axes))n.axis[l]=NA(e.component.resolve,l),n.axis[l]==="shared"&&(t[l]=Tke(t[l],s.component.axes[l]),t[l]||(n.axis[l]="independent",delete t[l]))}for(const s of Ua){for(const l of e.children)if(l.component.axes[s]){if(n.axis[s]==="independent"){t[s]=(t[s]??[]).concat(l.component.axes[s]);for(const c of l.component.axes[s]){const{value:d,explicit:f}=c.getWithExplicit("orient");if(!Oe(d)){if(i[d]>0&&!f){const u=wke[d];i[d]>i[u]&&c.set("orient",u,!1)}i[d]++}}}delete l.component.axes[s]}if(n.axis[s]==="independent"&&t[s]&&t[s].length>1)for(const l of t[s])l.get("grid")&&!l.explicit.grid&&(l.implicit.grid=!1)}}function Tke(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let i=0;i<n;i++){const s=e[i],l=t[i];if(!!s!=!!l)return;if(s&&l){const c=s.getWithExplicit("orient"),d=l.getWithExplicit("orient");if(c.explicit&&d.explicit&&c.value!==d.value)return;e[i]=Eke(s,l)}}}else return t.map(n=>n.clone());return e}function Eke(e,t){for(const n of cW){const i=Ll(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(s,l)=>{switch(n){case"title":return B9(s,l);case"gridScale":return{explicit:s.explicit,value:un(s.value,l.value)}}return N1(s,l,n,"axis")});e.setWithExplicit(n,i)}return e}function vke(e,t,n,i,s){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Oe(n.labelAngle)?n.labelAngle:Ig(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===FH(i,s))return!0}return e===n[t]}const Ske=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function xke(e,t){var S,x;let n=t.axis(e);const i=new jA,s=wn(t.encoding[e]),{mark:l,config:c}=t,d=(n==null?void 0:n.orient)||((S=c[e==="x"?"axisX":"axisY"])==null?void 0:S.orient)||((x=c.axis)==null?void 0:x.orient)||fSe(e),f=t.getScaleComponent(e).get("type"),u=sSe(e,f,d,t.config),a=n!==void 0?!n:Jx("disable",c.style,n==null?void 0:n.style,u).configValue;if(i.set("disable",a,n!==void 0),a)return i;n=n||{};const m=lSe(s,n,e,c.style,u),w=rG(n.formatType,s,f),y=sG(s,s.type,n.format,n.formatType,c,!0),o={fieldOrDatumDef:s,axis:n,channel:e,model:t,scaleType:f,orient:d,labelAngle:m,format:y,formatType:w,mark:l,config:c};for(const k of cW){const I=k in mP?mP[k](o):XL(k)?n[k]:void 0,B=I!==void 0,O=vke(I,k,n,t,e);if(B&&O)i.set(k,I,O);else{const{configValue:A=void 0,configFrom:R=void 0}=XL(k)&&k!=="values"?Jx(k,c.style,n.style,u):{},P=A!==void 0;B&&!P?i.set(k,I,O):(R!=="vgAxisConfig"||Ske.has(k)&&P||zp(A)||Oe(A))&&i.set(k,A,!1)}}const T=n.encoding??{},b=wG.reduce((k,I)=>{if(!i.hasAxisPart(I))return k;const B=CH(T[I]??{},t),O=I==="labels"?yke(t,e,B):B;return O!==void 0&&!Dt(O)&&(k[I]={update:O}),k},{});return Dt(b)||i.set("encode",b,!!n.encoding||n.labelAngle!==void 0),i}function kke({encoding:e,size:t}){for(const n of Ua){const i=Zi(n);Ba(t[i])&&fl(e[n])&&(delete t[i],me(O9(i)))}return t}function Bke(e,t,n){const i=Ri(e),s=Ct("orient",i,n);if(i.orient=Ake(i.type,t,s),s!==void 0&&s!==i.orient&&me(K0e(i.orient,s)),i.type==="bar"&&i.orient){const d=Ct("cornerRadiusEnd",i,n);if(d!==void 0){const f=i.orient==="horizontal"&&t.x2||i.orient==="vertical"&&t.y2?["cornerRadius"]:_1e[i.orient];for(const u of f)i[u]=d;i.cornerRadiusEnd!==void 0&&delete i.cornerRadiusEnd}}return Ct("opacity",i,n)===void 0&&(i.opacity=Ike(i.type,t)),Ct("cursor",i,n)===void 0&&(i.cursor=Fke(i,t,n)),i}function Fke(e,t,n){return t.href||e.href||Ct("href",e,n)?"pointer":e.cursor}function Ike(e,t){if(pt([E1,ZM,eA,tA],e)&&!fA(t))return .7}function Mke(e,t,{graticule:n}){if(n)return!1;const i=bd("filled",e,t),s=e.type;return un(i,s!==E1&&s!==T1&&s!==g0)}function Ake(e,t,n){switch(e){case E1:case eA:case tA:case J9:case s1e:case i1e:return}const{x:i,y:s,x2:l,y2:c}=t;switch(e){case b1:if(we(i)&&(Dn(i.bin)||we(s)&&s.aggregate&&!i.aggregate))return"vertical";if(we(s)&&(Dn(s.bin)||we(i)&&i.aggregate&&!s.aggregate))return"horizontal";if(c||l){if(n)return n;if(!l)return(we(i)&&i.type===Ed&&!Wt(i.bin)||y0(i))&&we(s)&&Dn(s.bin)?"horizontal":"vertical";if(!c)return(we(s)&&s.type===Ed&&!Wt(s.bin)||y0(s))&&we(i)&&Dn(i.bin)?"vertical":"horizontal"}case g0:if(l&&!(we(i)&&Dn(i.bin))&&c&&!(we(s)&&Dn(s.bin)))return;case w1:if(c)return we(s)&&Dn(s.bin)?"horizontal":"vertical";if(l)return we(i)&&Dn(i.bin)?"vertical":"horizontal";if(e===g0){if(i&&!s)return"vertical";if(s&&!i)return"horizontal"}case T1:case ZM:{const d=VL(i),f=VL(s);if(n)return n;if(d&&!f)return e!=="tick"?"horizontal":"vertical";if(!d&&f)return e!=="tick"?"vertical":"horizontal";if(d&&f)return"vertical";{const u=Bi(i)&&i.type===zu,a=Bi(s)&&s.type===zu;if(u&&!a)return"vertical";if(!u&&a)return"horizontal"}return}}return"vertical"}const Oke={vgMark:"arc",encodeEntry:e=>({...Vs(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ti("x",e,{defaultPos:"mid"}),...ti("y",e,{defaultPos:"mid"}),...Pl(e,"radius"),...Pl(e,"theta")})},Nke={vgMark:"area",encodeEntry:e=>({...Vs(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...S0("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...S0("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...FA(e)})},Cke={vgMark:"rect",encodeEntry:e=>({...Vs(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Pl(e,"x"),...Pl(e,"y")})},Rke={vgMark:"shape",encodeEntry:e=>({...Vs(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&we(n)&&n.type===yh?{field:ve(n,{expr:"datum"})}:{}}]}},Lke={vgMark:"image",encodeEntry:e=>({...Vs(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...Pl(e,"x"),...Pl(e,"y"),...kA(e,"url")})},Pke={vgMark:"line",encodeEntry:e=>({...Vs(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ti("x",e,{defaultPos:"mid"}),...ti("y",e,{defaultPos:"mid"}),...Bn("size",e,{vgChannel:"strokeWidth"}),...FA(e)})},Dke={vgMark:"trail",encodeEntry:e=>({...Vs(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ti("x",e,{defaultPos:"mid"}),...ti("y",e,{defaultPos:"mid"}),...Bn("size",e),...FA(e)})};function qA(e,t){const{config:n}=e;return{...Vs(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ti("x",e,{defaultPos:"mid"}),...ti("y",e,{defaultPos:"mid"}),...Bn("size",e),...Bn("angle",e),...$ke(e,n,t)}}function $ke(e,t,n){return n?{shape:{value:n}}:Bn("shape",e)}const Uke={vgMark:"symbol",encodeEntry:e=>qA(e)},zke={vgMark:"symbol",encodeEntry:e=>qA(e,"circle")},jke={vgMark:"symbol",encodeEntry:e=>qA(e,"square")},qke={vgMark:"rect",encodeEntry:e=>({...Vs(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Pl(e,"x"),...Pl(e,"y")})},Gke={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Vs(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...S0("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...S0("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...Bn("size",e,{vgChannel:"strokeWidth"})}}},Hke={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Vs(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...ti("x",e,{defaultPos:"mid"}),...ti("y",e,{defaultPos:"mid"}),...kA(e),...Bn("size",e,{vgChannel:"fontSize"}),...Bn("angle",e),..._P("align",Wke(e.markDef,n,t)),..._P("baseline",Vke(e.markDef,n,t)),...ti("radius",e,{defaultPos:null}),...ti("theta",e,{defaultPos:null})}}};function Wke(e,t,n){if(Ct("align",e,n)===void 0)return"center"}function Vke(e,t,n){if(Ct("baseline",e,n)===void 0)return"middle"}const Yke={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,i=n.orient,s=i==="horizontal"?"width":"height",l=i==="horizontal"?"height":"width";return{...Vs(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ti("x",e,{defaultPos:"mid",vgChannel:"xc"}),...ti("y",e,{defaultPos:"mid",vgChannel:"yc"}),...Bn("size",e,{defaultValue:Xke(e),vgChannel:s}),[l]:Kt(Ct("thickness",n,t))}}};function Xke(e){const{config:t,markDef:n}=e,{orient:i}=n,s=i==="horizontal"?"width":"height",l=e.getScaleComponent(i==="horizontal"?"x":"y"),c=Ct("size",n,t,{vgChannel:s})??t.tick.bandSize;if(c!==void 0)return c;{const d=l?l.get("range"):void 0;return d&&sc(d)&&$t(d.step)?d.step*3/4:E0(t.view,s)*3/4}}const jm={arc:Oke,area:Nke,bar:Cke,circle:zke,geoshape:Rke,image:Lke,line:Pke,point:Uke,rect:qke,rule:Gke,square:jke,text:Hke,tick:Yke,trail:Dke};function Kke(e){if(pt([T1,w1,r1e],e.mark)){const t=SG(e.mark,e.encoding);if(t.length>0)return Jke(e,t)}else if(e.mark===b1){const t=Dx.some(n=>Ct(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return Qke(e)}return GA(e)}const CP="faceted_path_";function Jke(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:CP+e.requestDataName(Gt.Main),data:e.requestDataName(Gt.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:GA(e,{fromPrefix:CP})}]}const RP="stack_group_";function Qke(e){var u;const[t]=GA(e,{fromPrefix:RP}),n=e.scaleName(e.stack.fieldChannel),i=(a={})=>e.vgField(e.stack.fieldChannel,a),s=(a,m)=>{const w=[i({prefix:"min",suffix:"start",expr:m}),i({prefix:"max",suffix:"start",expr:m}),i({prefix:"min",suffix:"end",expr:m}),i({prefix:"max",suffix:"end",expr:m})];return`${a}(${w.map(y=>`scale('${n}',${y})`).join(",")})`};let l,c;e.stack.fieldChannel==="x"?(l={...Du(t.encode.update,["y","yc","y2","height",...Dx]),x:{signal:s("min","datum")},x2:{signal:s("max","datum")},clip:{value:!0}},c={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...zi(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(l={...Du(t.encode.update,["x","xc","x2","width"]),y:{signal:s("min","datum")},y2:{signal:s("max","datum")},clip:{value:!0}},c={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...zi(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const a of Dx){const m=bd(a,e.markDef,e.config);t.encode.update[a]?(l[a]=t.encode.update[a],delete t.encode.update[a]):m&&(l[a]=Kt(m)),m&&(t.encode.update[a]={value:0})}const d=[];if(((u=e.stack.groupbyChannels)==null?void 0:u.length)>0)for(const a of e.stack.groupbyChannels){const m=e.fieldDef(a),w=ve(m);w&&d.push(w),(m!=null&&m.bin||m!=null&&m.timeUnit)&&d.push(ve(m,{binSuffix:"end"}))}return l=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((a,m)=>{if(t.encode.update[m])return{...a,[m]:t.encode.update[m]};{const w=bd(m,e.markDef,e.config);return w!==void 0?{...a,[m]:Kt(w)}:a}},l),l.stroke&&(l.strokeForeground={value:!0},l.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Gt.Main),name:RP+e.requestDataName(Gt.Main),groupby:d,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:l},marks:[{type:"group",encode:{update:c},marks:[t]}]}]}function Zke(e){var d;const{encoding:t,stack:n,mark:i,markDef:s,config:l}=e,c=t.order;if(!(!fe(c)&&xr(c)&&Lx(c.value)||!c&&Lx(Ct("order",s,l)))){if((fe(c)||we(c))&&!n)return S9(c,{expr:"datum"});if(rc(i)){const f=s.orient==="horizontal"?"y":"x",u=t[f];if(we(u)){const a=u.sort;if(fe(a))return{field:ve(u,{prefix:f,suffix:"sort_index",expr:"datum"})};if(da(a))return{field:ve({aggregate:fA(e.encoding)?a.op:void 0,field:a.field},{expr:"datum"})};if(oG(a)){const m=e.fieldDef(a.encoding);return{field:ve(m,{expr:"datum"}),order:a.order}}else return a===null?void 0:{field:ve(u,{binSuffix:(d=e.stack)!=null&&d.impute?"mid":void 0,expr:"datum"})}}return}}}function GA(e,t={fromPrefix:""}){const{mark:n,markDef:i,encoding:s,config:l}=e,c=un(i.clip,eBe(e),tBe(e)),d=E9(i),f=s.key,u=Zke(e),a=nBe(e),m=Ct("aria",i,l),w=jm[n].postEncodingTransform?jm[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:jm[n].vgMark,...c?{clip:!0}:{},...d?{style:d}:{},...f?{key:f.field}:{},...u?{sort:u}:{},...a||{},...m===!1?{aria:m}:{},from:{data:t.fromPrefix+e.requestDataName(Gt.Main)},encode:{update:jm[n].encodeEntry(e)},...w?{transform:w}:{}}]}function eBe(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function tBe(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function nBe(e){if(!e.component.selection)return null;const t=pe(e.component.selection).length;let n=t,i=e.parent;for(;i&&n===0;)n=pe(i.component.selection).length,i=i.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip}:null}class dW extends rW{constructor(t,n,i,s={},l){super(t,"unit",n,i,l,void 0,JL(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const c=xa(t.mark)?{...t.mark}:{type:t.mark},d=c.type;c.filled===void 0&&(c.filled=Mke(c,l,{graticule:t.data&&SA(t.data)}));const f=this.encoding=G1e(t.encoding||{},d,c.filled,l);this.markDef=Bke(c,f,l),this.size=kke({encoding:f,size:JL(t)?{...s,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:s}),this.stack=GG(this.markDef,f),this.specifiedScales=this.initScales(d,f),this.specifiedAxes=this.initAxes(f),this.specifiedLegends=this.initLegends(f),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(u=>wA(u))}get hasProjection(){const{encoding:t}=this,n=this.mark===Q9,i=t&&Gbe.some(s=>Xe(t[s]));return n||i}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return g1.reduce((i,s)=>{const l=wn(n[s]);return l&&(i[s]=this.initScale(l.scale??{})),i},{})}initScale(t){const{domain:n,range:i}=t,s=Ri(t);return fe(n)&&(s.domain=n.map(hs)),fe(i)&&(s.range=i.map(hs)),s}initAxes(t){return Ua.reduce((n,i)=>{const s=t[i];if(Xe(s)||i===Zt&&Xe(t.x2)||i===Cn&&Xe(t.y2)){const l=Xe(s)?s.axis:void 0;n[i]=l&&this.initAxis({...l})}return n},{})}initAxis(t){const n=pe(t),i={};for(const s of n){const l=t[s];i[s]=zp(l)?T9(l):hs(l)}return i}initLegends(t){return Zbe.reduce((n,i)=>{const s=wn(t[i]);if(s&&t0e(i)){const l=s.legend;n[i]=l&&Ri(l)}return n},{})}parseData(){this.component.data=V1(this)}parseLayoutSize(){cke(this)}parseSelections(){this.component.selection=eSe(this,this.selection)}parseMarkGroup(){this.component.mark=Kke(this)}parseAxesAndHeaders(){this.component.axes=mke(this)}assembleSelectionTopLevelSignals(t){return Eve(this,t)}assembleSignals(){return[...xH(this),...bve(this,[])]}assembleSelectionData(t){return vve(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return OA(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!Eh(this.parent))&&(t=iH(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return Qc(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return ka(n)}typedFieldDef(t){const n=this.fieldDef(t);return Bi(n)?n:null}}class HA extends UA{constructor(t,n,i,s,l){super(t,"layer",n,i,l,t.resolve,t.view);const c={...s,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((d,f)=>{if(O1(d))return new HA(d,this,this.getName(`layer_${f}`),c,l);if(Po(d))return new dW(d,this,this.getName(`layer_${f}`),c,l);throw new Error(DM(d))})}parseData(){this.component.data=V1(this);for(const t of this.children)t.parseData()}parseLayoutSize(){oke(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of pe(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){bke(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),xH(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),OA(this))}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const i of this.children)for(const s of xe(i.assembleGroupStyle()))t.add(s);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return Sve(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),jH(this))}}function WA(e,t,n,i,s){if(S1(e))return new q_(e,t,n,s);if(O1(e))return new HA(e,t,n,i,s);if(Po(e))return new dW(e,t,n,i,s);if(_Ee(e))return new _ke(e,t,n,s);throw new Error(DM(e))}function iBe(e,t={}){t.logger&&TTe(t.logger),t.fieldTitle&&pG(t.fieldTitle);try{const n=qG(rh(t.config,e.config)),i=JG(e,n),s=WA(i,null,"",void 0,n);return s.parse(),Exe(s.component.data,s),{spec:rBe(s,sBe(e,i.autosize,n,s),e.datasets,e.usermeta),normalized:i}}finally{t.logger&&ETe(),t.fieldTitle&&R1e()}}function sBe(e,t,n,i){const s=i.component.layoutSize.get("width"),l=i.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},i.hasAxisOrientSignalRef()&&(t.resize=!0)):Se(t)&&(t={type:t}),s&&l&&pve(t.type)){if(s==="step"&&l==="step")me(RL()),t.type="pad";else if(s==="step"||l==="step"){const c=s==="step"?"width":"height";me(RL(_1(c)));const d=c==="width"?"height":"width";t.type=yve(d)}}return{...pe(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...cP(n,!1),...cP(e,!0)}}function rBe(e,t,n={},i){const s=e.config?FEe(e.config):void 0,l=[].concat(e.assembleSelectionData([]),ike(e.component.data,n)),c=e.assembleProjections(),d=e.assembleTitle(),f=e.assembleGroupStyle(),u=e.assembleGroupEncodeEntry(!0);let a=e.assembleLayoutSignals();a=a.filter(y=>(y.name==="width"||y.name==="height")&&y.value!==void 0?(t[y.name]=+y.value,!1):!0);const{params:m,...w}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...w,...d?{title:d}:{},...f?{style:f}:{},...u?{encode:{update:u}}:{},data:l,...c.length>0?{projections:c}:{},...e.assembleGroup([...a,...e.assembleSelectionTopLevelSignals([]),...$G(m)]),...s?{config:s}:{},...i?{usermeta:i}:{}}}const aBe=Cbe.version,oBe=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:$u,accessPathWithDatum:FM,compile:iBe,contains:pt,deepEqual:sa,deleteNestedProperty:u0,duplicate:Je,entries:Cl,every:xM,fieldIntersection:BM,flatAccessWithDatum:e9,getFirstDefined:un,hasIntersection:kM,hash:bt,internalField:i9,isBoolean:Fg,isEmpty:Dt,isEqual:Ube,isInternalField:s9,isNullOrFalse:Lx,isNumeric:l1,keys:pe,logicalExpr:z_,mergeDeep:Q7,never:J7,normalize:JG,normalizeAngle:Ig,omit:zi,pick:Du,prefixGenerator:Px,removePathFromField:IM,replaceAll:md,replacePathInField:qs,resetIdCounter:jbe,setEqual:Z7,some:yd,stringify:Ht,titleCase:Ap,unique:ra,uniqueId:n9,vals:qn,varName:Qt,version:aBe},Symbol.toStringTag,{value:"Module"}));function fW(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var lBe="vega-themes",cBe="2.13.0",dBe="Themes for stylized Vega and Vega-Lite visualizations.",fBe=["vega","vega-lite","themes","style"],uBe="BSD-3-Clause",hBe={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},_Be=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],gBe="build/vega-themes.js",VA="build/vega-themes.module.js",pBe="build/vega-themes.min.js",yBe="build/vega-themes.min.js",mBe="build/vega-themes.module.d.ts",wBe={type:"git",url:"https://github.com/vega/vega-themes.git"},bBe=["src","build"],TBe={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},EBe={"@babel/core":"^7.21.4","@babel/plugin-transform-runtime":"^7.21.4","@babel/preset-env":"^7.21.4","@babel/preset-typescript":"^7.21.4","@release-it/conventional-changelog":"^5.1.1","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.2","@rollup/plugin-terser":"^0.4.1","@typescript-eslint/eslint-plugin":"^5.59.0","@typescript-eslint/parser":"^5.59.0","browser-sync":"^2.29.1",concurrently:"^8.0.1",eslint:"^8.38.0","eslint-config-prettier":"^8.8.0","eslint-plugin-prettier":"^4.2.1","gh-pages":"^5.0.0",prettier:"^2.8.7","release-it":"^15.10.1",rollup:"^3.20.6","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.2.0",typescript:"^5.0.4",vega:"^5.24.0","vega-lite":"^5.7.1"},vBe={vega:"*","vega-lite":"*"},SBe={},xBe={name:lBe,version:cBe,description:dBe,keywords:fBe,license:uBe,author:hBe,contributors:_Be,main:gBe,module:VA,unpkg:pBe,jsdelivr:yBe,types:mBe,repository:wBe,files:bBe,scripts:TBe,devDependencies:EBe,peerDependencies:vBe,dependencies:SBe};const yf="#fff",LP="#888",kBe={background:"#333",view:{stroke:LP},title:{color:yf,subtitleColor:yf},style:{"guide-label":{fill:yf},"guide-title":{fill:yf}},axis:{domainColor:yf,gridColor:LP,tickColor:yf}},fc="#4572a7",BBe={background:"#fff",arc:{fill:fc},area:{fill:fc},line:{stroke:fc,strokeWidth:2},path:{stroke:fc},rect:{fill:fc},shape:{stroke:fc},symbol:{fill:fc,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},uc="#30a2da",xv="#cbcbcb",FBe="#999",IBe="#333",PP="#f0f0f0",DP="#333",MBe={arc:{fill:uc},area:{fill:uc},axis:{domainColor:xv,grid:!0,gridColor:xv,gridWidth:1,labelColor:FBe,labelFontSize:10,titleColor:IBe,tickColor:xv,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:PP,group:{fill:PP},legend:{labelColor:DP,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:DP,titleFontSize:14,titlePadding:10},line:{stroke:uc,strokeWidth:2},path:{stroke:uc,strokeWidth:.5},rect:{fill:uc},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:uc},bar:{binSpacing:2,fill:uc,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},hc="#000",ABe={group:{fill:"#e5e5e5"},arc:{fill:hc},area:{fill:hc},line:{stroke:hc},path:{stroke:hc},rect:{fill:hc},shape:{stroke:hc},symbol:{fill:hc,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},OBe=22,NBe="normal",$P="Benton Gothic, sans-serif",UP=11.5,CBe="normal",_c="#82c6df",kv="Benton Gothic Bold, sans-serif",zP="normal",jP=13,Yh={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},RBe={background:"#ffffff",title:{anchor:"start",color:"#000000",font:kv,fontSize:OBe,fontWeight:NBe},arc:{fill:_c},area:{fill:_c},line:{stroke:_c,strokeWidth:2},path:{stroke:_c},rect:{fill:_c},shape:{stroke:_c},symbol:{fill:_c,size:30},axis:{labelFont:$P,labelFontSize:UP,labelFontWeight:CBe,titleFont:kv,titleFontSize:jP,titleFontWeight:zP},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:$P,labelFontSize:UP,symbolType:"square",titleFont:kv,titleFontSize:jP,titleFontWeight:zP},range:{category:Yh["category-6"],diverging:Yh["fireandice-6"],heatmap:Yh["fire-7"],ordinal:Yh["fire-7"],ramp:Yh["fire-7"]}},gc="#ab5787",qm="#979797",LBe={background:"#f9f9f9",arc:{fill:gc},area:{fill:gc},line:{stroke:gc},path:{stroke:gc},rect:{fill:gc},shape:{stroke:gc},symbol:{fill:gc,size:30},axis:{domainColor:qm,domainWidth:.5,gridWidth:.2,labelColor:qm,tickColor:qm,tickWidth:.2,titleColor:qm},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},pc="#3e5c69",PBe={background:"#fff",arc:{fill:pc},area:{fill:pc},line:{stroke:pc},path:{stroke:pc},rect:{fill:pc},shape:{stroke:pc},symbol:{fill:pc},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},ks="#1696d2",qP="#000000",DBe="#FFFFFF",Gm="Lato",Bv="Lato",$Be="Lato",UBe="#DEDDDD",zBe=18,Xh={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},jBe={background:DBe,title:{anchor:"start",fontSize:zBe,font:Gm},axisX:{domain:!0,domainColor:qP,domainWidth:1,grid:!1,labelFontSize:12,labelFont:Bv,labelAngle:0,tickColor:qP,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:Gm},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:UBe,gridWidth:1,labelFontSize:12,labelFont:Bv,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:Gm,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:Bv,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:Gm,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:Xh["six-groups-cat-1"],diverging:Xh["diverging-colors"],heatmap:Xh["diverging-colors"],ordinal:Xh["six-groups-seq"],ramp:Xh["shades-blue"]},area:{fill:ks},rect:{fill:ks},line:{color:ks,stroke:ks,strokeWidth:5},trail:{color:ks,stroke:ks,strokeWidth:0,size:1},path:{stroke:ks,strokeWidth:.5},point:{filled:!0},text:{font:$Be,color:ks,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:ks,stroke:null}},arc:{fill:ks},shape:{stroke:ks},symbol:{fill:ks,size:30}},yc="#3366CC",GP="#ccc",Hm="Arial, sans-serif",qBe={arc:{fill:yc},area:{fill:yc},path:{stroke:yc},rect:{fill:yc},shape:{stroke:yc},symbol:{stroke:yc},circle:{fill:yc},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:Hm,fontSize:12},"guide-title":{font:Hm,fontSize:12},"group-title":{font:Hm,fontSize:12}},title:{font:Hm,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:GP,tickColor:GP,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},YA=e=>e*(1/3+1),HP=YA(9),WP=YA(10),VP=YA(12),Kh="Segoe UI",YP="wf_standard-font, helvetica, arial, sans-serif",XP="#252423",Jh="#605E5C",KP="transparent",GBe="#C8C6C4",Ks="#118DFF",HBe="#12239E",WBe="#E66C37",VBe="#6B007B",YBe="#E044A7",XBe="#744EC2",KBe="#D9B300",JBe="#D64550",uW=Ks,hW="#DEEFFF",JP=[hW,uW],QBe=[hW,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",uW],ZBe={view:{stroke:KP},background:KP,font:Kh,header:{titleFont:YP,titleFontSize:VP,titleColor:XP,labelFont:Kh,labelFontSize:WP,labelColor:Jh},axis:{ticks:!1,grid:!1,domain:!1,labelColor:Jh,labelFontSize:HP,titleFont:YP,titleColor:XP,titleFontSize:VP,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:GBe,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Ks},line:{stroke:Ks,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:Kh,fontSize:HP,fill:Jh},arc:{fill:Ks},area:{fill:Ks,line:!0,opacity:.6},path:{stroke:Ks},rect:{fill:Ks},point:{fill:Ks,filled:!0,size:75},shape:{stroke:Ks},symbol:{fill:Ks,strokeWidth:1.5,size:50},legend:{titleFont:Kh,titleFontWeight:"bold",titleColor:Jh,labelFont:Kh,labelFontSize:WP,labelColor:Jh,symbolType:"circle",symbolSize:75},range:{category:[Ks,HBe,WBe,VBe,YBe,XBe,KBe,JBe],diverging:JP,heatmap:JP,ordinal:QBe}},e2e=xBe.version,t2e=Object.freeze(Object.defineProperty({__proto__:null,dark:kBe,excel:BBe,fivethirtyeight:MBe,ggplot2:ABe,googlecharts:qBe,latimes:RBe,powerbi:ZBe,quartz:LBe,urbaninstitute:jBe,version:e2e,vox:PBe},Symbol.toStringTag,{value:"Module"}));function Rg(e){return Rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rg(e)}function n2e(e,t){if(Rg(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t||"default");if(Rg(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function i2e(e){var t=n2e(e,"string");return Rg(t)==="symbol"?t:String(t)}function s2e(e,t,n){return t=i2e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r2e(e,t){if(e==null)return{};var n={},i=Object.keys(e),s,l;for(l=0;l<i.length;l++)s=i[l],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function a2e(e,t){if(e==null)return{};var n=r2e(e,t),i,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(s=0;s<l.length;s++)i=l[s],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}const o2e=["title","image"];function l2e(e,t,n){if(fe(e))return`[${e.map(i=>t(Se(i)?i:QP(i,n))).join(", ")}]`;if(Be(e)){let i="";const s=e,{title:l,image:c}=s,d=a2e(s,o2e);l&&(i+=`<h2>${t(l)}</h2>`),c&&(i+=`<img src="${t(c)}">`);const f=Object.keys(d);if(f.length>0){i+="<table>";for(const u of f){let a=d[u];a!==void 0&&(Be(a)&&(a=QP(a,n)),i+=`<tr><td class="key">${t(u)}:</td><td class="value">${t(a)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function c2e(e){const t=[];return function(n,i){if(typeof i!="object"||i===null)return i;const s=t.indexOf(this)+1;return t.length=s,t.length>e?"[Object]":t.indexOf(i)>=0?"[Circular]":(t.push(i),i)}}function QP(e,t){return JSON.stringify(e,c2e(t))}var d2e=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const _W="vg-tooltip-element",f2e={offsetX:10,offsetY:10,id:_W,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:u2e,maxDepth:2,formatTooltip:l2e};function u2e(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function h2e(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return d2e.toString().replace(_W,e)}function _2e(e,t,n,i){let s=e.clientX+n;s+t.width>window.innerWidth&&(s=+e.clientX-n-t.width);let l=e.clientY+i;return l+t.height>window.innerHeight&&(l=+e.clientY-i-t.height),{x:s,y:l}}function ZP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,i)}return n}function eD(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ZP(Object(n),!0).forEach(function(i){s2e(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZP(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}class g2e{constructor(t){this.options=eD(eD({},f2e),t);const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const i=document.createElement("style");i.setAttribute("id",this.options.styleId),i.innerHTML=h2e(n);const s=document.head;s.childNodes.length>0?s.insertBefore(i,s.childNodes[0]):s.appendChild(i)}}tooltipHandler(t,n,i,s){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),s==null||s===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(s,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:l,y:c}=_2e(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${c}px`,this.el.style.left=`${l}px`}}function Lg(e){return Lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lg(e)}function p2e(e,t){if(Lg(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t||"default");if(Lg(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function y2e(e){var t=p2e(e,"string");return Lg(t)==="symbol"?t:String(t)}function m2e(e,t,n){return t=y2e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w2e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Fv,tD;function b2e(){return tD||(tD=1,Fv=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),Fv}var T2e=Bt;Bt.Node=Fd;Bt.create=Bt;function Bt(e){var t=this;if(t instanceof Bt||(t=new Bt),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(s){t.push(s)});else if(arguments.length>0)for(var n=0,i=arguments.length;n<i;n++)t.push(arguments[n]);return t}Bt.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};Bt.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};Bt.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};Bt.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)v2e(this,arguments[e]);return this.length};Bt.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)S2e(this,arguments[e]);return this.length};Bt.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};Bt.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};Bt.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,i=0;n!==null;i++)e.call(t,n.value,i,this),n=n.next};Bt.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,i=this.length-1;n!==null;i--)e.call(t,n.value,i,this),n=n.prev};Bt.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};Bt.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};Bt.prototype.map=function(e,t){t=t||this;for(var n=new Bt,i=this.head;i!==null;)n.push(e.call(t,i.value,this)),i=i.next;return n};Bt.prototype.mapReverse=function(e,t){t=t||this;for(var n=new Bt,i=this.tail;i!==null;)n.push(e.call(t,i.value,this)),i=i.prev;return n};Bt.prototype.reduce=function(e,t){var n,i=this.head;if(arguments.length>1)n=t;else if(this.head)i=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=0;i!==null;s++)n=e(n,i.value,s),i=i.next;return n};Bt.prototype.reduceReverse=function(e,t){var n,i=this.tail;if(arguments.length>1)n=t;else if(this.tail)i=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=this.length-1;i!==null;s--)n=e(n,i.value,s),i=i.prev;return n};Bt.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};Bt.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};Bt.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new Bt;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=0,s=this.head;s!==null&&i<e;i++)s=s.next;for(;s!==null&&i<t;i++,s=s.next)n.push(s.value);return n};Bt.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new Bt;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=this.length,s=this.tail;s!==null&&i>t;i--)s=s.prev;for(;s!==null&&i>e;i--,s=s.prev)n.push(s.value);return n};Bt.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var i=0,s=this.head;s!==null&&i<e;i++)s=s.next;for(var l=[],i=0;s&&i<t;i++)l.push(s.value),s=this.removeNode(s);s===null&&(s=this.tail),s!==this.head&&s!==this.tail&&(s=s.prev);for(var i=0;i<n.length;i++)s=E2e(this,s,n[i]);return l};Bt.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var i=n.prev;n.prev=n.next,n.next=i}return this.head=t,this.tail=e,this};function E2e(e,t,n){var i=t===e.head?new Fd(n,null,t,e):new Fd(n,t,t.next,e);return i.next===null&&(e.tail=i),i.prev===null&&(e.head=i),e.length++,i}function v2e(e,t){e.tail=new Fd(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function S2e(e,t){e.head=new Fd(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function Fd(e,t,n,i){if(!(this instanceof Fd))return new Fd(e,t,n,i);this.list=i,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{b2e()(Bt)}catch{}const x2e=T2e,Ac=Symbol("max"),Za=Symbol("length"),mf=Symbol("lengthCalculator"),G_=Symbol("allowStale"),qc=Symbol("maxAge"),Ka=Symbol("dispose"),nD=Symbol("noDisposeOnSet"),xn=Symbol("lruList"),Js=Symbol("cache"),gW=Symbol("updateAgeOnGet"),Iv=()=>1;class k2e{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[Ac]=t.max||1/0;const n=t.length||Iv;if(this[mf]=typeof n!="function"?Iv:n,this[G_]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[qc]=t.maxAge||0,this[Ka]=t.dispose,this[nD]=t.noDisposeOnSet||!1,this[gW]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[Ac]=t||1/0,Qh(this)}get max(){return this[Ac]}set allowStale(t){this[G_]=!!t}get allowStale(){return this[G_]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[qc]=t,Qh(this)}get maxAge(){return this[qc]}set lengthCalculator(t){typeof t!="function"&&(t=Iv),t!==this[mf]&&(this[mf]=t,this[Za]=0,this[xn].forEach(n=>{n.length=this[mf](n.value,n.key),this[Za]+=n.length})),Qh(this)}get lengthCalculator(){return this[mf]}get length(){return this[Za]}get itemCount(){return this[xn].length}rforEach(t,n){n=n||this;for(let i=this[xn].tail;i!==null;){const s=i.prev;iD(this,t,i,n),i=s}}forEach(t,n){n=n||this;for(let i=this[xn].head;i!==null;){const s=i.next;iD(this,t,i,n),i=s}}keys(){return this[xn].toArray().map(t=>t.key)}values(){return this[xn].toArray().map(t=>t.value)}reset(){this[Ka]&&this[xn]&&this[xn].length&&this[xn].forEach(t=>this[Ka](t.key,t.value)),this[Js]=new Map,this[xn]=new x2e,this[Za]=0}dump(){return this[xn].map(t=>F0(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[xn]}set(t,n,i){if(i=i||this[qc],i&&typeof i!="number")throw new TypeError("maxAge must be a number");const s=i?Date.now():0,l=this[mf](n,t);if(this[Js].has(t)){if(l>this[Ac])return su(this,this[Js].get(t)),!1;const f=this[Js].get(t).value;return this[Ka]&&(this[nD]||this[Ka](t,f.value)),f.now=s,f.maxAge=i,f.value=n,this[Za]+=l-f.length,f.length=l,this.get(t),Qh(this),!0}const c=new B2e(t,n,l,s,i);return c.length>this[Ac]?(this[Ka]&&this[Ka](t,n),!1):(this[Za]+=c.length,this[xn].unshift(c),this[Js].set(t,this[xn].head),Qh(this),!0)}has(t){if(!this[Js].has(t))return!1;const n=this[Js].get(t).value;return!F0(this,n)}get(t){return Mv(this,t,!0)}peek(t){return Mv(this,t,!1)}pop(){const t=this[xn].tail;return t?(su(this,t),t.value):null}del(t){su(this,this[Js].get(t))}load(t){this.reset();const n=Date.now();for(let i=t.length-1;i>=0;i--){const s=t[i],l=s.e||0;if(l===0)this.set(s.k,s.v);else{const c=l-n;c>0&&this.set(s.k,s.v,c)}}}prune(){this[Js].forEach((t,n)=>Mv(this,n,!1))}}const Mv=(e,t,n)=>{const i=e[Js].get(t);if(i){const s=i.value;if(F0(e,s)){if(su(e,i),!e[G_])return}else n&&(e[gW]&&(i.value.now=Date.now()),e[xn].unshiftNode(i));return s.value}},F0=(e,t)=>{if(!t||!t.maxAge&&!e[qc])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[qc]&&n>e[qc]},Qh=e=>{if(e[Za]>e[Ac])for(let t=e[xn].tail;e[Za]>e[Ac]&&t!==null;){const n=t.prev;su(e,t),t=n}},su=(e,t)=>{if(t){const n=t.value;e[Ka]&&e[Ka](n.key,n.value),e[Za]-=n.length,e[Js].delete(n.key),e[xn].removeNode(t)}};class B2e{constructor(t,n,i,s,l){this.key=t,this.value=n,this.length=i,this.now=s,this.maxAge=l||0}}const iD=(e,t,n,i)=>{let s=n.value;F0(e,s)&&(su(e,n),e[G_]||(s=void 0)),s&&t.call(i,s.value,s.key,e)};var F2e=k2e;const I2e=Object.freeze({loose:!0}),M2e=Object.freeze({}),A2e=e=>e?typeof e!="object"?I2e:e:M2e;var XA=A2e,ak={exports:{}};const O2e="2.0.0",N2e=256,C2e=Number.MAX_SAFE_INTEGER||9007199254740991,R2e=16,L2e=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var KA={MAX_LENGTH:N2e,MAX_SAFE_COMPONENT_LENGTH:R2e,MAX_SAFE_INTEGER:C2e,RELEASE_TYPES:L2e,SEMVER_SPEC_VERSION:O2e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const P2e=typeof process=="object"&&process.env&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var Y1=P2e;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n}=KA,i=Y1;t=e.exports={};const s=t.re=[],l=t.src=[],c=t.t={};let d=0;const f=(u,a,m)=>{const w=d++;i(u,w,a),c[u]=w,l[w]=a,s[w]=new RegExp(a,m?"g":void 0)};f("NUMERICIDENTIFIER","0|[1-9]\\d*"),f("NUMERICIDENTIFIERLOOSE","[0-9]+"),f("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),f("MAINVERSION",`(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})`),f("MAINVERSIONLOOSE",`(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})`),f("PRERELEASEIDENTIFIER",`(?:${l[c.NUMERICIDENTIFIER]}|${l[c.NONNUMERICIDENTIFIER]})`),f("PRERELEASEIDENTIFIERLOOSE",`(?:${l[c.NUMERICIDENTIFIERLOOSE]}|${l[c.NONNUMERICIDENTIFIER]})`),f("PRERELEASE",`(?:-(${l[c.PRERELEASEIDENTIFIER]}(?:\\.${l[c.PRERELEASEIDENTIFIER]})*))`),f("PRERELEASELOOSE",`(?:-?(${l[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[c.PRERELEASEIDENTIFIERLOOSE]})*))`),f("BUILDIDENTIFIER","[0-9A-Za-z-]+"),f("BUILD",`(?:\\+(${l[c.BUILDIDENTIFIER]}(?:\\.${l[c.BUILDIDENTIFIER]})*))`),f("FULLPLAIN",`v?${l[c.MAINVERSION]}${l[c.PRERELEASE]}?${l[c.BUILD]}?`),f("FULL",`^${l[c.FULLPLAIN]}$`),f("LOOSEPLAIN",`[v=\\s]*${l[c.MAINVERSIONLOOSE]}${l[c.PRERELEASELOOSE]}?${l[c.BUILD]}?`),f("LOOSE",`^${l[c.LOOSEPLAIN]}$`),f("GTLT","((?:<|>)?=?)"),f("XRANGEIDENTIFIERLOOSE",`${l[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),f("XRANGEIDENTIFIER",`${l[c.NUMERICIDENTIFIER]}|x|X|\\*`),f("XRANGEPLAIN",`[v=\\s]*(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:${l[c.PRERELEASE]})?${l[c.BUILD]}?)?)?`),f("XRANGEPLAINLOOSE",`[v=\\s]*(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:${l[c.PRERELEASELOOSE]})?${l[c.BUILD]}?)?)?`),f("XRANGE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAIN]}$`),f("XRANGELOOSE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAINLOOSE]}$`),f("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),f("COERCERTL",l[c.COERCE],!0),f("LONETILDE","(?:~>?)"),f("TILDETRIM",`(\\s*)${l[c.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",f("TILDE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAIN]}$`),f("TILDELOOSE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAINLOOSE]}$`),f("LONECARET","(?:\\^)"),f("CARETTRIM",`(\\s*)${l[c.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",f("CARET",`^${l[c.LONECARET]}${l[c.XRANGEPLAIN]}$`),f("CARETLOOSE",`^${l[c.LONECARET]}${l[c.XRANGEPLAINLOOSE]}$`),f("COMPARATORLOOSE",`^${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]})$|^$`),f("COMPARATOR",`^${l[c.GTLT]}\\s*(${l[c.FULLPLAIN]})$|^$`),f("COMPARATORTRIM",`(\\s*)${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]}|${l[c.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",f("HYPHENRANGE",`^\\s*(${l[c.XRANGEPLAIN]})\\s+-\\s+(${l[c.XRANGEPLAIN]})\\s*$`),f("HYPHENRANGELOOSE",`^\\s*(${l[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[c.XRANGEPLAINLOOSE]})\\s*$`),f("STAR","(<|>)?=?\\s*\\*"),f("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),f("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(ak,ak.exports);var JA=ak.exports;const sD=/^[0-9]+$/,pW=(e,t)=>{const n=sD.test(e),i=sD.test(t);return n&&i&&(e=+e,t=+t),e===t?0:n&&!i?-1:i&&!n?1:e<t?-1:1},D2e=(e,t)=>pW(t,e);var $2e={compareIdentifiers:pW,rcompareIdentifiers:D2e};const Wm=Y1,{MAX_LENGTH:rD,MAX_SAFE_INTEGER:Vm}=KA,{re:aD,t:oD}=JA,U2e=XA,{compareIdentifiers:wf}=$2e;let z2e=class jr{constructor(t,n){if(n=U2e(n),t instanceof jr){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid Version: ${t}`);if(t.length>rD)throw new TypeError(`version is longer than ${rD} characters`);Wm("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const i=t.trim().match(n.loose?aD[oD.LOOSE]:aD[oD.FULL]);if(!i)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>Vm||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Vm||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Vm||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){const l=+s;if(l>=0&&l<Vm)return l}return s}):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(Wm("SemVer.compare",this.version,this.options,t),!(t instanceof jr)){if(typeof t=="string"&&t===this.version)return 0;t=new jr(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof jr||(t=new jr(t,this.options)),wf(this.major,t.major)||wf(this.minor,t.minor)||wf(this.patch,t.patch)}comparePre(t){if(t instanceof jr||(t=new jr(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const i=this.prerelease[n],s=t.prerelease[n];if(Wm("prerelease compare",n,i,s),i===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(i===void 0)return-1;if(i===s)continue;return wf(i,s)}while(++n)}compareBuild(t){t instanceof jr||(t=new jr(t,this.options));let n=0;do{const i=this.build[n],s=t.build[n];if(Wm("prerelease compare",n,i,s),i===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(i===void 0)return-1;if(i===s)continue;return wf(i,s)}while(++n)}inc(t,n,i){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,i);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,i);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,i),this.inc("pre",n,i);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,i),this.inc("pre",n,i);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);s===-1&&this.prerelease.push(0)}if(n){const s=Number(i)?1:0;wf(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=[n,s]):this.prerelease=[n,s]}break;default:throw new Error(`invalid increment argument: ${t}`)}return this.format(),this.raw=this.version,this}};var QA=z2e;const lD=QA,j2e=(e,t,n)=>new lD(e,n).compare(new lD(t,n));var vh=j2e;const q2e=vh,G2e=(e,t,n)=>q2e(e,t,n)===0;var H2e=G2e;const W2e=vh,V2e=(e,t,n)=>W2e(e,t,n)!==0;var Y2e=V2e;const X2e=vh,K2e=(e,t,n)=>X2e(e,t,n)>0;var J2e=K2e;const Q2e=vh,Z2e=(e,t,n)=>Q2e(e,t,n)>=0;var eFe=Z2e;const tFe=vh,nFe=(e,t,n)=>tFe(e,t,n)<0;var iFe=nFe;const sFe=vh,rFe=(e,t,n)=>sFe(e,t,n)<=0;var aFe=rFe;const oFe=H2e,lFe=Y2e,cFe=J2e,dFe=eFe,fFe=iFe,uFe=aFe,hFe=(e,t,n,i)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return oFe(e,n,i);case"!=":return lFe(e,n,i);case">":return cFe(e,n,i);case">=":return dFe(e,n,i);case"<":return fFe(e,n,i);case"<=":return uFe(e,n,i);default:throw new TypeError(`Invalid operator: ${t}`)}};var _Fe=hFe,Av,cD;function gFe(){if(cD)return Av;cD=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(a,m){if(m=n(m),a instanceof t){if(a.loose===!!m.loose)return a;a=a.value}c("comparator",a,m),this.options=m,this.loose=!!m.loose,this.parse(a),this.semver===e?this.value="":this.value=this.operator+this.semver.version,c("comp",this)}parse(a){const m=this.options.loose?i[s.COMPARATORLOOSE]:i[s.COMPARATOR],w=a.match(m);if(!w)throw new TypeError(`Invalid comparator: ${a}`);this.operator=w[1]!==void 0?w[1]:"",this.operator==="="&&(this.operator=""),w[2]?this.semver=new d(w[2],this.options.loose):this.semver=e}toString(){return this.value}test(a){if(c("Comparator.test",a,this.options.loose),this.semver===e||a===e)return!0;if(typeof a=="string")try{a=new d(a,this.options)}catch{return!1}return l(a,this.operator,this.semver,this.options)}intersects(a,m){if(!(a instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new f(a.value,m).test(this.value):a.operator===""?a.value===""?!0:new f(this.value,m).test(a.semver):(m=n(m),m.includePrerelease&&(this.value==="<0.0.0-0"||a.value==="<0.0.0-0")||!m.includePrerelease&&(this.value.startsWith("<0.0.0")||a.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&a.operator.startsWith(">")||this.operator.startsWith("<")&&a.operator.startsWith("<")||this.semver.version===a.semver.version&&this.operator.includes("=")&&a.operator.includes("=")||l(this.semver,"<",a.semver,m)&&this.operator.startsWith(">")&&a.operator.startsWith("<")||l(this.semver,">",a.semver,m)&&this.operator.startsWith("<")&&a.operator.startsWith(">")))}}Av=t;const n=XA,{re:i,t:s}=JA,l=_Fe,c=Y1,d=QA,f=yW();return Av}var Ov,dD;function yW(){if(dD)return Ov;dD=1;class e{constructor(W,H){if(H=i(H),W instanceof e)return W.loose===!!H.loose&&W.includePrerelease===!!H.includePrerelease?W:new e(W.raw,H);if(W instanceof s)return this.raw=W.value,this.set=[[W]],this.format(),this;if(this.options=H,this.loose=!!H.loose,this.includePrerelease=!!H.includePrerelease,this.raw=W,this.set=W.split("||").map(V=>this.parseRange(V.trim())).filter(V=>V.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${W}`);if(this.set.length>1){const V=this.set[0];if(this.set=this.set.filter(J=>!o(J[0])),this.set.length===0)this.set=[V];else if(this.set.length>1){for(const J of this.set)if(J.length===1&&T(J[0])){this.set=[J];break}}}this.format()}format(){return this.range=this.set.map(W=>W.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(W){W=W.trim();const V=((this.options.includePrerelease&&w)|(this.options.loose&&y))+":"+W,J=n.get(V);if(J)return J;const G=this.options.loose,oe=G?d[f.HYPHENRANGELOOSE]:d[f.HYPHENRANGE];W=W.replace(oe,U(this.options.includePrerelease)),l("hyphen replace",W),W=W.replace(d[f.COMPARATORTRIM],u),l("comparator trim",W),W=W.replace(d[f.TILDETRIM],a),W=W.replace(d[f.CARETTRIM],m),W=W.split(/\s+/).join(" ");let he=W.split(" ").map(ke=>S(ke,this.options)).join(" ").split(/\s+/).map(ke=>D(ke,this.options));G&&(he=he.filter(ke=>(l("loose invalid filter",ke,this.options),!!ke.match(d[f.COMPARATORLOOSE])))),l("range list",he);const ne=new Map,Fe=he.map(ke=>new s(ke,this.options));for(const ke of Fe){if(o(ke))return[ke];ne.set(ke.value,ke)}ne.size>1&&ne.has("")&&ne.delete("");const de=[...ne.values()];return n.set(V,de),de}intersects(W,H){if(!(W instanceof e))throw new TypeError("a Range is required");return this.set.some(V=>b(V,H)&&W.set.some(J=>b(J,H)&&V.every(G=>J.every(oe=>G.intersects(oe,H)))))}test(W){if(!W)return!1;if(typeof W=="string")try{W=new c(W,this.options)}catch{return!1}for(let H=0;H<this.set.length;H++)if(Y(this.set[H],W,this.options))return!0;return!1}}Ov=e;const t=F2e,n=new t({max:1e3}),i=XA,s=gFe(),l=Y1,c=QA,{re:d,t:f,comparatorTrimReplace:u,tildeTrimReplace:a,caretTrimReplace:m}=JA,{FLAG_INCLUDE_PRERELEASE:w,FLAG_LOOSE:y}=KA,o=z=>z.value==="<0.0.0-0",T=z=>z.value==="",b=(z,W)=>{let H=!0;const V=z.slice();let J=V.pop();for(;H&&V.length;)H=V.every(G=>J.intersects(G,W)),J=V.pop();return H},S=(z,W)=>(l("comp",z,W),z=B(z,W),l("caret",z),z=k(z,W),l("tildes",z),z=A(z,W),l("xrange",z),z=P(z,W),l("stars",z),z),x=z=>!z||z.toLowerCase()==="x"||z==="*",k=(z,W)=>z.trim().split(/\s+/).map(H=>I(H,W)).join(" "),I=(z,W)=>{const H=W.loose?d[f.TILDELOOSE]:d[f.TILDE];return z.replace(H,(V,J,G,oe,he)=>{l("tilde",z,V,J,G,oe,he);let ne;return x(J)?ne="":x(G)?ne=`>=${J}.0.0 <${+J+1}.0.0-0`:x(oe)?ne=`>=${J}.${G}.0 <${J}.${+G+1}.0-0`:he?(l("replaceTilde pr",he),ne=`>=${J}.${G}.${oe}-${he} <${J}.${+G+1}.0-0`):ne=`>=${J}.${G}.${oe} <${J}.${+G+1}.0-0`,l("tilde return",ne),ne})},B=(z,W)=>z.trim().split(/\s+/).map(H=>O(H,W)).join(" "),O=(z,W)=>{l("caret",z,W);const H=W.loose?d[f.CARETLOOSE]:d[f.CARET],V=W.includePrerelease?"-0":"";return z.replace(H,(J,G,oe,he,ne)=>{l("caret",z,J,G,oe,he,ne);let Fe;return x(G)?Fe="":x(oe)?Fe=`>=${G}.0.0${V} <${+G+1}.0.0-0`:x(he)?G==="0"?Fe=`>=${G}.${oe}.0${V} <${G}.${+oe+1}.0-0`:Fe=`>=${G}.${oe}.0${V} <${+G+1}.0.0-0`:ne?(l("replaceCaret pr",ne),G==="0"?oe==="0"?Fe=`>=${G}.${oe}.${he}-${ne} <${G}.${oe}.${+he+1}-0`:Fe=`>=${G}.${oe}.${he}-${ne} <${G}.${+oe+1}.0-0`:Fe=`>=${G}.${oe}.${he}-${ne} <${+G+1}.0.0-0`):(l("no pr"),G==="0"?oe==="0"?Fe=`>=${G}.${oe}.${he}${V} <${G}.${oe}.${+he+1}-0`:Fe=`>=${G}.${oe}.${he}${V} <${G}.${+oe+1}.0-0`:Fe=`>=${G}.${oe}.${he} <${+G+1}.0.0-0`),l("caret return",Fe),Fe})},A=(z,W)=>(l("replaceXRanges",z,W),z.split(/\s+/).map(H=>R(H,W)).join(" ")),R=(z,W)=>{z=z.trim();const H=W.loose?d[f.XRANGELOOSE]:d[f.XRANGE];return z.replace(H,(V,J,G,oe,he,ne)=>{l("xRange",z,V,J,G,oe,he,ne);const Fe=x(G),de=Fe||x(oe),ke=de||x(he),Ue=ke;return J==="="&&Ue&&(J=""),ne=W.includePrerelease?"-0":"",Fe?J===">"||J==="<"?V="<0.0.0-0":V="*":J&&Ue?(de&&(oe=0),he=0,J===">"?(J=">=",de?(G=+G+1,oe=0,he=0):(oe=+oe+1,he=0)):J==="<="&&(J="<",de?G=+G+1:oe=+oe+1),J==="<"&&(ne="-0"),V=`${J+G}.${oe}.${he}${ne}`):de?V=`>=${G}.0.0${ne} <${+G+1}.0.0-0`:ke&&(V=`>=${G}.${oe}.0${ne} <${G}.${+oe+1}.0-0`),l("xRange return",V),V})},P=(z,W)=>(l("replaceStars",z,W),z.trim().replace(d[f.STAR],"")),D=(z,W)=>(l("replaceGTE0",z,W),z.trim().replace(d[W.includePrerelease?f.GTE0PRE:f.GTE0],"")),U=z=>(W,H,V,J,G,oe,he,ne,Fe,de,ke,Ue,at)=>(x(V)?H="":x(J)?H=`>=${V}.0.0${z?"-0":""}`:x(G)?H=`>=${V}.${J}.0${z?"-0":""}`:oe?H=`>=${H}`:H=`>=${H}${z?"-0":""}`,x(Fe)?ne="":x(de)?ne=`<${+Fe+1}.0.0-0`:x(ke)?ne=`<${Fe}.${+de+1}.0-0`:Ue?ne=`<=${Fe}.${de}.${ke}-${Ue}`:z?ne=`<${Fe}.${de}.${+ke+1}-0`:ne=`<=${ne}`,`${H} ${ne}`.trim()),Y=(z,W,H)=>{for(let V=0;V<z.length;V++)if(!z[V].test(W))return!1;if(W.prerelease.length&&!H.includePrerelease){for(let V=0;V<z.length;V++)if(l(z[V].semver),z[V].semver!==s.ANY&&z[V].semver.prerelease.length>0){const J=z[V].semver;if(J.major===W.major&&J.minor===W.minor&&J.patch===W.patch)return!0}return!1}return!0};return Ov}const pFe=yW(),yFe=(e,t,n)=>{try{t=new pFe(t,n)}catch{return!1}return t.test(e)};var mFe=yFe,mW=w2e(mFe);function wFe(e,t,n){const i=e.open(t),s=1e4,l=250,{origin:c}=new URL(t);let d=~~(s/l);function f(a){a.source===i&&(d=0,e.removeEventListener("message",f,!1))}e.addEventListener("message",f,!1);function u(){d<=0||(i.postMessage(n,c),setTimeout(u,l),d-=1)}setTimeout(u,l)}var bFe=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function wW(e,...t){for(const n of t)TFe(e,n);return e}function TFe(e,t){for(const n of Object.keys(t))ah(e,n,t[n],!0)}function fD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,i)}return n}function ml(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fD(Object(n),!0).forEach(function(i){m2e(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fD(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}const Zs=tbe;let Pg=oBe;const Ym=typeof window<"u"?window:void 0;var wD;Pg===void 0&&((wD=Ym==null?void 0:Ym.vl)!=null&&wD.compile)&&(Pg=Ym.vl);const EFe={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},vFe={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},x_={vega:"Vega","vega-lite":"Vega-Lite"},I0={vega:Zs.version,"vega-lite":Pg?Pg.version:"not available"},SFe={vega:e=>e,"vega-lite":(e,t)=>Pg.compile(e,{config:t}).spec},xFe=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,kFe="chart-wrapper";function BFe(e){return typeof e=="function"}function uD(e,t,n,i){const s=`<html><head>${t}</head><body><pre><code class="json">`,l=`</code></pre>${n}</body></html>`,c=window.open("");c.document.write(s+e+l),c.document.title=`${x_[i]} JSON Source`}function FFe(e,t){if(e.$schema){const n=fW(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${x_[n.library]}, but mode argument sets ${x_[t]??t}.`);const i=n.library;return mW(I0[i],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${x_[i]} ${n.version}, but the current version of ${x_[i]} is v${I0[i]}.`),i}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function IFe(e){return!!(e&&"load"in e)}function hD(e){return IFe(e)?e:Zs.loader(e)}function MFe(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return Se(t.defaultStyle)&&(t.defaultStyle=!1),t}async function AFe(e,t,n={}){let i,s;Se(t)?(s=hD(n.loader),i=JSON.parse(await s.load(t))):i=t;const l=MFe(i),c=l.loader;(!s||c)&&(s=hD(n.loader??c));const d=await _D(l,s),f=await _D(n,s),u=ml(ml({},wW(f,d)),{},{config:rh(f.config??{},d.config??{})});return await NFe(e,i,u,s)}async function _D(e,t){const n=Se(e.config)?JSON.parse(await t.load(e.config)):e.config??{},i=Se(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return ml(ml(ml({},e),i?{patch:i}:{}),n?{config:n}:{})}function OFe(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function NFe(e,t,n={},i){const s=n.theme?rh(t2e[n.theme],n.config??{}):n.config,l=Xl(n.actions)?n.actions:wW({},EFe,n.actions??{}),c=ml(ml({},vFe),n.i18n),d=n.renderer??"canvas",f=n.logLevel??Zs.Warn,u=n.downloadFileName??"visualization",a=typeof e=="string"?document.querySelector(e):e;if(!a)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const B="vega-embed-style",{root:O,rootContainer:A}=OFe(a);if(!O.getElementById(B)){const R=document.createElement("style");R.id=B,R.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?bFe.toString():n.defaultStyle,A.appendChild(R)}}const m=FFe(t,n.mode);let w=SFe[m](t,s);if(m==="vega-lite"&&w.$schema){const B=fW(w.$schema);mW(I0.vega,`^${B.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${B.version}, but current version is v${I0.vega}.`)}a.classList.add("vega-embed"),l&&a.classList.add("has-actions"),a.innerHTML="";let y=a;if(l){const B=document.createElement("div");B.classList.add(kFe),a.appendChild(B),y=B}const o=n.patch;if(o&&(w=o instanceof Function?o(w):mT(w,o,!0,!1).newDocument),n.formatLocale&&Zs.formatLocale(n.formatLocale),n.timeFormatLocale&&Zs.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const B in n.expressionFunctions){const O=n.expressionFunctions[B];"fn"in O?Zs.expressionFunction(B,O.fn,O.visitor):O instanceof Function&&Zs.expressionFunction(B,O)}const{ast:T}=n,b=Zs.parse(w,m==="vega-lite"?{}:s,{ast:T}),S=new(n.viewClass||Zs.View)(b,ml({loader:i,logLevel:f,renderer:d},T?{expr:Zs.expressionInterpreter??n.expr??fbe}:{}));if(S.addSignalListener("autosize",(B,O)=>{const{type:A}=O;A=="fit-x"?(y.classList.add("fit-x"),y.classList.remove("fit-y")):A=="fit-y"?(y.classList.remove("fit-x"),y.classList.add("fit-y")):A=="fit"?y.classList.add("fit-x","fit-y"):y.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const B=BFe(n.tooltip)?n.tooltip:new g2e(n.tooltip===!0?{}:n.tooltip).call;S.tooltip(B)}let{hover:x}=n;if(x===void 0&&(x=m==="vega"),x){const{hoverSet:B,updateSet:O}=typeof x=="boolean"?{}:x;S.hover(B,O)}n&&(n.width!=null&&S.width(n.width),n.height!=null&&S.height(n.height),n.padding!=null&&S.padding(n.padding)),await S.initialize(y,n.bind).runAsync();let k;if(l!==!1){let B=a;if(n.defaultStyle!==!1){const A=document.createElement("details");A.title=c.CLICK_TO_VIEW_ACTIONS,a.append(A),B=A;const R=document.createElement("summary");R.innerHTML=xFe,A.append(R),k=P=>{A.contains(P.target)||A.removeAttribute("open")},document.addEventListener("click",k)}const O=document.createElement("div");if(B.append(O),O.classList.add("vega-actions"),l===!0||l.export!==!1){for(const A of["svg","png"])if(l===!0||l.export===!0||l.export[A]){const R=c[`${A.toUpperCase()}_ACTION`],P=document.createElement("a"),D=Be(n.scaleFactor)?n.scaleFactor[A]:n.scaleFactor;P.text=R,P.href="#",P.target="_blank",P.download=`${u}.${A}`,P.addEventListener("mousedown",async function(U){U.preventDefault();const Y=await S.toImageURL(A,D);this.href=Y}),O.append(P)}}if(l===!0||l.source!==!1){const A=document.createElement("a");A.text=c.SOURCE_ACTION,A.href="#",A.addEventListener("click",function(R){uD(RE(t),n.sourceHeader??"",n.sourceFooter??"",m),R.preventDefault()}),O.append(A)}if(m==="vega-lite"&&(l===!0||l.compiled!==!1)){const A=document.createElement("a");A.text=c.COMPILED_ACTION,A.href="#",A.addEventListener("click",function(R){uD(RE(w),n.sourceHeader??"",n.sourceFooter??"","vega"),R.preventDefault()}),O.append(A)}if(l===!0||l.editor!==!1){const A=n.editorUrl??"https://vega.github.io/editor/",R=document.createElement("a");R.text=c.EDITOR_ACTION,R.href="#",R.addEventListener("click",function(P){wFe(window,A,{config:s,mode:m,renderer:d,spec:RE(t)}),P.preventDefault()}),O.append(R)}}function I(){k&&document.removeEventListener("click",k),S.finalize()}return{view:S,spec:t,vgSpec:w,finalize:I,embedOptions:n}}const CFe=new Set(["width","height"]);function RFe(e,t){for(const[n,i]of Object.entries(t))i&&(i&&{}.toString.call(i)==="[object Function]"?i(e.data(n)):e.change(n,Zs.changeset().remove(()=>!0).insert(i)))}function Xm(e={},t={},n=new Set){const i=Object.keys(e),s=Object.keys(t);return e===t||i.length===s.length&&i.filter(l=>!n.has(l)).every(l=>e[l]===t[l])}function gD(e,t){const n=Object.keys(t);for(const i of n)try{e.removeSignalListener(i,t[i])}catch(s){console.warn("Cannot remove invalid signal listener.",s)}return n.length>0}function Nv(e,t){const n=Object.keys(t);for(const i of n)try{e.addSignalListener(i,t[i])}catch(s){console.warn("Cannot add invalid signal listener.",s)}return n.length>0}function LFe(e){return new Set(e.flatMap(t=>Object.keys(t)))}function PFe(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},i="width"in e||"width"in t,s="height"in e||"height"in t;return i&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),s&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),[...LFe([e,t])].filter(c=>c!=="width"&&c!=="height").some(c=>!(c in e)||!(c in t)||!K7(e[c],t[c]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function pD(e,t){const{width:n,height:i}=t;return typeof n<"u"&&typeof i<"u"?{...e,width:n,height:i}:typeof n<"u"?{...e,width:n}:typeof i<"u"?{...e,height:i}:e}function DFe(e){let t;return{c(){t=ls("div")},m(n,i){Dg(n,t,i),e[11](t)},p:Uf,i:Uf,o:Uf,d(n){n&&Ku(t),e[11](null)}}}function $Fe(e,t,n){let{options:i}=t,{spec:s}=t,{view:l}=t,{signalListeners:c={}}=t,{data:d={}}=t;const f=lk();let u,a={},m={},w={},y={},o;AW(()=>{b()});async function T(){b();try{n(6,u=await AFe(o,s,i)),n(1,l=u.view),Nv(l,c)&&l.runAsync(),x(l)}catch(B){S(B)}}function b(){u&&(u.finalize(),n(6,u=void 0),n(1,l=void 0))}function S(B){f("onError",{error:B}),console.warn(B)}function x(B){k(),f("onNewView",{view:B})}async function k(){d&&Object.keys(d).length>0&&u!==void 0&&(n(1,l=u.view),RFe(l,d),await l.resize().runAsync())}function I(B){ru[B?"unshift":"push"](()=>{o=B,n(0,o)})}return e.$$set=B=>{"options"in B&&n(2,i=B.options),"spec"in B&&n(3,s=B.spec),"view"in B&&n(1,l=B.view),"signalListeners"in B&&n(4,c=B.signalListeners),"data"in B&&n(5,d=B.data)},e.$$.update=()=>{if(e.$$.dirty&1056&&(Xm(d,y)||k(),n(10,y=d)),e.$$.dirty&991&&o!==void 0){if(!Xm(i,a,CFe))T();else{const B=PFe(pD(s,i),pD(w,a)),O=c,A=m;if(B){if(B.isExpensive)T();else if(u!==void 0){const R=!Xm(O,A);n(1,l=u.view),B.width!==!1&&l.width(B.width),B.height!==!1&&l.height(B.height),R&&(A&&gD(l,A),O&&Nv(l,O)),l.runAsync()}}else!Xm(O,A)&&u!==void 0&&(n(1,l=u.view),A&&gD(l,A),O&&Nv(l,O),l.runAsync())}n(7,a=i),n(8,m=c),n(9,w=s)}},[o,l,i,s,c,d,u,a,m,w,y,I]}class UFe extends Cd{constructor(t){super(),Nd(this,t,$Fe,DFe,Md,{options:2,spec:3,view:1,signalListeners:4,data:5})}}function zFe(e){let t,n,i;function s(c){e[6](c)}let l={spec:e[1],data:e[2],signalListeners:e[3],options:e[4]};return e[0]!==void 0&&(l.view=e[0]),t=new UFe({props:l}),ru.push(()=>dk(t,"view",s)),t.$on("onNewView",e[7]),t.$on("onError",e[8]),{c(){Ju(t.$$.fragment)},m(c,d){Ad(t,c,d),i=!0},p(c,[d]){const f={};d&2&&(f.spec=c[1]),d&4&&(f.data=c[2]),d&8&&(f.signalListeners=c[3]),d&16&&(f.options=c[4]),!n&&d&1&&(n=!0,f.view=c[0],ck(()=>n=!1)),t.$set(f)},i(c){i||(aa(t.$$.fragment,c),i=!0)},o(c){wl(t.$$.fragment,c),i=!1},d(c){Od(t,c)}}}const jFe="vega-lite";function qFe(e,t,n){let i,{spec:s}=t,{options:l={}}=t,{data:c={}}=t,{signalListeners:d={}}=t,{view:f=void 0}=t;function u(w){f=w,n(0,f)}function a(w){Ns.call(this,e,w)}function m(w){Ns.call(this,e,w)}return e.$$set=w=>{"spec"in w&&n(1,s=w.spec),"options"in w&&n(5,l=w.options),"data"in w&&n(2,c=w.data),"signalListeners"in w&&n(3,d=w.signalListeners),"view"in w&&n(0,f=w.view)},e.$$.update=()=>{e.$$.dirty&32&&n(4,i={...l,mode:jFe})},[f,s,c,d,i,l,u,a,m]}class bW extends Cd{constructor(t){super(),Nd(this,t,qFe,zFe,Md,{spec:1,options:5,data:2,signalListeners:3,view:0})}}function GFe(e){let t,n,i,s,l,c;function d(u){e[17](u)}let f={data:e[2],spec:e[1],options:{tooltip:!0,actions:!1,theme:"vox"}};return e[0]!==void 0&&(f.view=e[0]),n=new bW({props:f}),ru.push(()=>dk(n,"view",d)),{c(){t=ls("div"),Ju(n.$$.fragment),Gr(t,"class","container svelte-mufgje")},m(u,a){Dg(u,t,a),Ad(n,t,null),s=!0,l||(c=[Aw(t,"mouseenter",e[15]),Aw(t,"mouseleave",e[16])],l=!0)},p(u,[a]){const m={};a&4&&(m.data=u[2]),a&2&&(m.spec=u[1]),!i&&a&1&&(i=!0,m.view=u[0],ck(()=>i=!1)),n.$set(m)},i(u){s||(aa(n.$$.fragment,u),s=!0)},o(u){wl(n.$$.fragment,u),s=!1},d(u){u&&Ku(t),Od(n),l=!1,Id(c)}}}function HFe(e,t,n){let i,s;const l=lk();let{bins:c=[{bin:"chicken",count:200,filteredCount:150},{bin:"dog",count:300,filteredCount:25}]}=t,{title:d=""}=t,{width:f=400}=t,{height:u=125}=t,{countLabel:a="Count"}=t,{dimLabel:m=""}=t,{labelColor:w="hsla(0, 0%, 100%, 0.9)"}=t,{backgroundBarColor:y="hsla(0, 0%, 100%, 0.5)"}=t,{foregroundBarColor:o="hsla(172, 97%, 45%, 0.95)"}=t,{backgroundColor:T="hsl(240,23%,9%)"}=t,{onlyFiltered:b=!1}=t,S,x=!1;function k(O){Ns.call(this,e,O)}function I(O){Ns.call(this,e,O)}function B(O){S=O,n(0,S)}return e.$$set=O=>{"bins"in O&&n(3,c=O.bins),"title"in O&&n(4,d=O.title),"width"in O&&n(5,f=O.width),"height"in O&&n(6,u=O.height),"countLabel"in O&&n(7,a=O.countLabel),"dimLabel"in O&&n(8,m=O.dimLabel),"labelColor"in O&&n(9,w=O.labelColor),"backgroundBarColor"in O&&n(10,y=O.backgroundBarColor),"foregroundBarColor"in O&&n(11,o=O.foregroundBarColor),"backgroundColor"in O&&n(12,T=O.backgroundColor),"onlyFiltered"in O&&n(13,b=O.onlyFiltered)},e.$$.update=()=>{e.$$.dirty&8&&n(2,i={table:c}),e.$$.dirty&16368&&n(1,s={$schema:"https://vega.github.io/schema/vega-lite/v5.json",description:"A categorical bar chart",data:{name:"table"},background:T,width:f,height:u,title:d,layer:[{params:[{name:"select",select:{type:"point",encodings:["x"]}}],mark:{type:"bar",cursor:"pointer"},encoding:{x:{field:"bin",axis:{title:m,titleColor:w,labelColor:w}},y:{field:b?"filteredCount":"count",type:"quantitative",axis:{title:a,titleColor:w,labelColor:w,tickCount:3}},color:{value:y},stroke:{condition:[{param:"select",empty:!1,value:w}],value:"transparent"},strokeWidth:{condition:[{param:"select",empty:!1,value:3}],value:0}},color:{value:o}},{mark:{type:"bar"},encoding:{size:{legend:null},x:{field:"bin",title:""},y:{field:"filteredCount",type:"quantitative",title:""},color:{value:o}}}]}),e.$$.dirty&16385&&S&&!x&&(S.addSignalListener("select",(...O)=>{let A;O[1]&&"bin"in O[1]?A=O[1].bin:A=null,l("select",A)}),n(14,x=!0))},[S,s,i,c,d,f,u,a,m,w,y,o,T,b,x,k,I,B]}class WFe extends Cd{constructor(t){super(),Nd(this,t,HFe,GFe,Md,{bins:3,title:4,width:5,height:6,countLabel:7,dimLabel:8,labelColor:9,backgroundBarColor:10,foregroundBarColor:11,backgroundColor:12,onlyFiltered:13})}}function VFe(e){let t,n;return t=new WFe({props:{bins:e[10],title:e[0],width:e[1],height:e[2],countLabel:e[3],dimLabel:e[4],labelColor:e[5],backgroundBarColor:e[6],foregroundBarColor:e[7],backgroundColor:e[8],onlyFiltered:e[9]}}),t.$on("mouseenter",e[12]),t.$on("mouseleave",e[13]),t.$on("select",e[14]),{c(){Ju(t.$$.fragment)},m(i,s){Ad(t,i,s),n=!0},p(i,[s]){const l={};s&1024&&(l.bins=i[10]),s&1&&(l.title=i[0]),s&2&&(l.width=i[1]),s&4&&(l.height=i[2]),s&8&&(l.countLabel=i[3]),s&16&&(l.dimLabel=i[4]),s&32&&(l.labelColor=i[5]),s&64&&(l.backgroundBarColor=i[6]),s&128&&(l.foregroundBarColor=i[7]),s&256&&(l.backgroundColor=i[8]),s&512&&(l.onlyFiltered=i[9]),t.$set(l)},i(i){n||(aa(t.$$.fragment,i),n=!0)},o(i){wl(t.$$.fragment,i),n=!1},d(i){Od(t,i)}}}function YFe(e,t,n){let i,{state:s}=t,{title:l=""}=t,{width:c=400}=t,{height:d=125}=t,{countLabel:f="Count"}=t,{dimLabel:u=""}=t,{labelColor:a="hsla(0, 0%, 100%, 0.9)"}=t,{backgroundBarColor:m="hsla(0, 0%, 100%, 0.5)"}=t,{foregroundBarColor:w="hsla(172, 97%, 45%, 0.95)"}=t,{backgroundColor:y="hsl(240,23%,9%)"}=t,{onlyFiltered:o=!1}=t;function T(x){Ns.call(this,e,x)}function b(x){Ns.call(this,e,x)}function S(x){Ns.call(this,e,x)}return e.$$set=x=>{"state"in x&&n(11,s=x.state),"title"in x&&n(0,l=x.title),"width"in x&&n(1,c=x.width),"height"in x&&n(2,d=x.height),"countLabel"in x&&n(3,f=x.countLabel),"dimLabel"in x&&n(4,u=x.dimLabel),"labelColor"in x&&n(5,a=x.labelColor),"backgroundBarColor"in x&&n(6,m=x.backgroundBarColor),"foregroundBarColor"in x&&n(7,w=x.foregroundBarColor),"backgroundColor"in x&&n(8,y=x.backgroundColor),"onlyFiltered"in x&&n(9,o=x.onlyFiltered)},e.$$.update=()=>{var x;e.$$.dirty&2048&&n(10,i=((x=s==null?void 0:s.bin)==null?void 0:x.filter(k=>k!==null).map((k,I)=>({bin:k,count:s.total[I],filteredCount:s.filter[I]})))??[])},[l,c,d,f,u,a,m,w,y,o,i,s,T,b,S]}class XFe extends Cd{constructor(t){super(),Nd(this,t,YFe,VFe,Md,{state:11,title:0,width:1,height:2,countLabel:3,dimLabel:4,labelColor:5,backgroundBarColor:6,foregroundBarColor:7,backgroundColor:8,onlyFiltered:9})}}function KFe(e){let t,n,i,s,l,c;function d(u){e[18](u)}let f={data:e[2],spec:e[1],options:{tooltip:!0,actions:!1,theme:"vox"}};return e[0]!==void 0&&(f.view=e[0]),n=new bW({props:f}),ru.push(()=>dk(n,"view",d)),{c(){t=ls("div"),Ju(n.$$.fragment),Gr(t,"class","container svelte-mufgje")},m(u,a){Dg(u,t,a),Ad(n,t,null),s=!0,l||(c=[Aw(t,"mouseenter",e[16]),Aw(t,"mouseleave",e[17])],l=!0)},p(u,[a]){const m={};a&4&&(m.data=u[2]),a&2&&(m.spec=u[1]),!i&&a&1&&(i=!0,m.view=u[0],ck(()=>i=!1)),n.$set(m)},i(u){s||(aa(n.$$.fragment,u),s=!0)},o(u){wl(n.$$.fragment,u),s=!1},d(u){u&&Ku(t),Od(n),l=!1,Id(c)}}}function JFe(e,t,n){let i,s;const l=lk();let{bins:c=[{bin:[0,10],count:200,filteredCount:150},{bin:[10,20],count:300,filteredCount:25},{bin:[20,30],count:72,filteredCount:12}]}=t,{title:d=""}=t,{width:f=400}=t,{height:u=125}=t,{countLabel:a="Count"}=t,{dimLabel:m=""}=t,{labelColor:w="hsla(0, 0%, 100%, 0.9)"}=t,{backgroundBarColor:y="hsla(0, 0%, 100%, 0.5)"}=t,{foregroundBarColor:o="hsla(172, 97%, 45%, 0.95)"}=t,{backgroundColor:T="hsl(240,23%,9%)"}=t,{onlyFiltered:b=!1}=t,{type:S="quantitative"}=t,x,k=!1;function I(A){Ns.call(this,e,A)}function B(A){Ns.call(this,e,A)}function O(A){x=A,n(0,x)}return e.$$set=A=>{"bins"in A&&n(3,c=A.bins),"title"in A&&n(4,d=A.title),"width"in A&&n(5,f=A.width),"height"in A&&n(6,u=A.height),"countLabel"in A&&n(7,a=A.countLabel),"dimLabel"in A&&n(8,m=A.dimLabel),"labelColor"in A&&n(9,w=A.labelColor),"backgroundBarColor"in A&&n(10,y=A.backgroundBarColor),"foregroundBarColor"in A&&n(11,o=A.foregroundBarColor),"backgroundColor"in A&&n(12,T=A.backgroundColor),"onlyFiltered"in A&&n(13,b=A.onlyFiltered),"type"in A&&n(14,S=A.type)},e.$$.update=()=>{e.$$.dirty&8&&n(2,i={table:c}),e.$$.dirty&32752&&n(1,s={$schema:"https://vega.github.io/schema/vega-lite/v5.json",description:"A simple bar chart with embedded data.",data:{name:"table"},background:T,width:f,height:u,title:d,layer:[{params:[{name:"select",select:{type:"interval",encodings:["x"]}}],mark:{type:"bar",cursor:"col-resize"},encoding:{x:{field:"bin[0]",bin:{binned:!0},type:S,axis:{title:m,titleColor:w,labelColor:w}},x2:{field:"bin[1]"},y:{field:b?"filteredCount":"count",type:"quantitative",axis:{title:a,titleColor:w,tickCount:3,labelColor:w}},color:{value:y}}},{mark:{type:"bar"},encoding:{size:{legend:null},x:{field:"bin[0]",type:S,bin:{binned:!0},title:""},x2:{field:"bin[1]"},y:{field:"filteredCount",type:"quantitative"},color:{value:o}}}]}),e.$$.dirty&32769&&x&&!k&&(x.addSignalListener("select",(...A)=>{l("select",A[1]["bin\\.0"]??null)}),n(15,k=!0))},[x,s,i,c,d,f,u,a,m,w,y,o,T,b,S,k,I,B,O]}class QFe extends Cd{constructor(t){super(),Nd(this,t,JFe,KFe,Md,{bins:3,title:4,width:5,height:6,countLabel:7,dimLabel:8,labelColor:9,backgroundBarColor:10,foregroundBarColor:11,backgroundColor:12,onlyFiltered:13,type:14})}}function ZFe(e){let t,n;return t=new QFe({props:{bins:e[7],title:e[0],width:e[1],height:e[2],countLabel:e[3],dimLabel:e[4],onlyFiltered:e[5],type:e[6]}}),t.$on("select",e[9]),t.$on("mouseenter",e[10]),t.$on("mouseleave",e[11]),{c(){Ju(t.$$.fragment)},m(i,s){Ad(t,i,s),n=!0},p(i,[s]){const l={};s&128&&(l.bins=i[7]),s&1&&(l.title=i[0]),s&2&&(l.width=i[1]),s&4&&(l.height=i[2]),s&8&&(l.countLabel=i[3]),s&16&&(l.dimLabel=i[4]),s&32&&(l.onlyFiltered=i[5]),s&64&&(l.type=i[6]),t.$set(l)},i(i){n||(aa(t.$$.fragment,i),n=!0)},o(i){wl(t.$$.fragment,i),n=!1},d(i){Od(t,i)}}}function eIe(e){let t=[];if(e)for(let n=0;n<e.bin.length;n++)t.push({bin:[e.bin[n].binStart,e.bin[n].binEnd],count:e.total[n],filteredCount:e.filter[n]});return t}function tIe(e,t,n){let i,{state:s}=t,{title:l=""}=t,{width:c=400}=t,{height:d=125}=t,{countLabel:f="Count"}=t,{dimLabel:u=""}=t,{onlyFiltered:a=!1}=t,{type:m="quantitative"}=t;function w(T){Ns.call(this,e,T)}function y(T){Ns.call(this,e,T)}function o(T){Ns.call(this,e,T)}return e.$$set=T=>{"state"in T&&n(8,s=T.state),"title"in T&&n(0,l=T.title),"width"in T&&n(1,c=T.width),"height"in T&&n(2,d=T.height),"countLabel"in T&&n(3,f=T.countLabel),"dimLabel"in T&&n(4,u=T.dimLabel),"onlyFiltered"in T&&n(5,a=T.onlyFiltered),"type"in T&&n(6,m=T.type)},e.$$.update=()=>{e.$$.dirty&256&&n(7,i=eIe(s))},[l,c,d,f,u,a,m,i,s,w,y,o]}class nIe extends Cd{constructor(t){super(),Nd(this,t,tIe,ZFe,Md,{state:8,title:0,width:1,height:2,countLabel:3,dimLabel:4,onlyFiltered:5,type:6})}}function yD(e,t,n){const i=e.slice();i[8]=t[n],i[12]=n;const s=i[2][i[12]];i[9]=s;const l=i[8].dimension.type==="continuous"?nIe:XFe;return i[10]=l,i}function mD(e){let t,n,i,s;function l(...d){return e[3](e[8],...d)}function c(){return e[4](e[8])}return n=new e[10]({props:{type:"time"in e[8].dimension?"temporal":"quantitative",state:e[9],dimLabel:e[8].dimension.name.replaceAll("_"," ")}}),n.$on("select",l),n.$on("mouseenter",c),{c(){t=ls("div"),Ju(n.$$.fragment),i=bf(),Gr(t,"class","hist-baby")},m(d,f){Dg(d,t,f),Ad(n,t,null),_i(t,i),s=!0},p(d,f){e=d;const u={};f&2&&(u.type="time"in e[8].dimension?"temporal":"quantitative"),f&4&&(u.state=e[9]),f&2&&(u.dimLabel=e[8].dimension.name.replaceAll("_"," ")),n.$set(u)},i(d){s||(aa(n.$$.fragment,d),s=!0)},o(d){wl(n.$$.fragment,d),s=!1},d(d){d&&Ku(t),Od(n)}}}function iIe(e){var B;let t,n,i,s,l,c,d,f,u,a,m,w,y=((B=e[0])==null?void 0:B.filter.toLocaleString())+"",o,T,b,S,x=e[1],k=[];for(let O=0;O<x.length;O+=1)k[O]=mD(yD(e,x,O));const I=O=>wl(k[O],1,1,()=>{k[O]=null});return{c(){t=ls("main"),n=ls("div"),i=ls("a"),i.innerHTML='<img src="https://user-images.githubusercontent.com/65095341/224896033-afc8bd8e-d0e0-4031-a7b2-3857bef51327.svg" alt="falcon" width="400px"/>',s=bf(),l=ls("h3"),l.innerHTML=`<a href="https://github.com/cmudig/falcon" target="_blank" class="svelte-ox9rfp">FalconVis</a>
			cross-filtering with
			<a href="https://vega.github.io/vega-lite/" class="svelte-ox9rfp">Vega Lite</a>
			to explore the
			<a href="https://github.com/vega/vega-datasets/blob/main/data/movies.json" target="_blank" class="svelte-ox9rfp">movies</a> dataset.`,c=bf(),d=ls("details"),d.innerHTML=`<summary class="svelte-ox9rfp">Instructions</summary> 

			<div class="description"><img src="demo-movies.gif" alt="demo"/></div> 

			<div class="description">Filter a categorical chart by <kbd class="svelte-ox9rfp">click</kbd>ing on a bar or
				selecting multiple by <kbd class="svelte-ox9rfp">shift</kbd> + <kbd class="svelte-ox9rfp">click</kbd>ing.</div> 
			<div class="description">Filter a continuous chart by <kbd class="svelte-ox9rfp">dragging</kbd> across a range
				and by
				<kbd class="svelte-ox9rfp">dragging</kbd> the window around.</div> 
			<div class="description">Reset a filter by <kbd class="svelte-ox9rfp">click</kbd>ing outside the selection.</div>`,f=bf(),u=ls("h3"),a=ls("span"),a.textContent="selected",m=bf(),w=ls("code"),o=ED(y),T=bf(),b=ls("div");for(let O=0;O<k.length;O+=1)k[O].c();Gr(i,"href","https://github.com/cmudig/falcon"),Gr(i,"target","_blank"),Gr(i,"class","svelte-ox9rfp"),Gr(l,"class","description svelte-ox9rfp"),yN(a,"font-weight","250"),yN(w,"color","var(--primary-color)"),Gr(w,"class","svelte-ox9rfp"),Gr(u,"class","svelte-ox9rfp"),Gr(b,"class","hist svelte-ox9rfp")},m(O,A){Dg(O,t,A),_i(t,n),_i(n,i),_i(n,s),_i(n,l),_i(n,c),_i(n,d),_i(n,f),_i(n,u),_i(u,a),_i(u,m),_i(u,w),_i(w,o),_i(t,T),_i(t,b);for(let R=0;R<k.length;R+=1)k[R]&&k[R].m(b,null);S=!0},p(O,[A]){var R;if((!S||A&1)&&y!==(y=((R=O[0])==null?void 0:R.filter.toLocaleString())+"")&&FW(o,y),A&6){x=O[1];let P;for(P=0;P<x.length;P+=1){const D=yD(O,x,P);k[P]?(k[P].p(D,A),aa(k[P],1)):(k[P]=mD(D),k[P].c(),aa(k[P],1),k[P].m(b,null))}for(LW(),P=x.length;P<k.length;P+=1)I(P);PW()}},i(O){if(!S){for(let A=0;A<x.length;A+=1)aa(k[A]);S=!0}},o(O){k=k.filter(Boolean);for(let A=0;A<k.length;A+=1)wl(k[A]);S=!1},d(O){O&&Ku(t),kW(k,O)}}}function sIe(e,t,n){console.warn=()=>{};let i,s,l=[],c=[];MW(async()=>{await d()});async function d(){const a=await(await fetch("movies-3k.json")).json();for(let A=0;A<a.length;A++)a[A].Release_Date=new Date(a[A].Release_Date);const m=new use(a);i=new hse(m);const w=await i.view0D(),y=await i.view1D({type:"categorical",name:"MPAA_Rating"}),o=await i.view1D({type:"continuous",name:"US_Gross",resolution:400,bins:20}),T=await i.view1D({type:"continuous",name:"Worldwide_Gross",resolution:400,bins:20}),b=await i.view1D({type:"continuous",name:"Rotten_Tomatoes_Rating",resolution:400,bins:20}),S=await i.view1D({type:"continuous",name:"IMDB_Rating",resolution:400,bins:20}),x=await i.view1D({type:"continuous",name:"Release_Date",resolution:400,bins:20,time:!0}),k=await i.view1D({type:"continuous",name:"Production_Budget",resolution:400,bins:20}),I=await i.view1D({type:"continuous",name:"Running_Time_min",resolution:400,bins:20}),B=await i.view1D({type:"categorical",name:"Major_Genre",range:["Action","Adventure","Comedy","Drama","Documentary","Horror","Musical","Romantic Comedy","Thriller/Suspense","Western"]}),O=await i.view1D({type:"categorical",name:"Distributor",range:["20th Century Fox","Dreamworks SKG","Focus Features","Fox Searchlight","Lionsgate","MGM","Miramax","New Line","Paramount Pictures","Sony Pictures","Sony Pictures Classics","Universal","Walt Disney Pictures","Warner Bros."]});n(1,l=[y,o,T,S,b,x,k,I,B,O]),n(2,c=new Array(l.length)),l.forEach((A,R)=>{A.onChange(P=>{n(2,c[R]=P,c)})}),w.onChange(A=>{n(0,s=A)}),await i.link()}return[s,l,c,(a,m)=>{const w=m.detail;w!==null?a.select(w):a.select()},async a=>{await a.activate()}]}class rIe extends Cd{constructor(t){super(),Nd(this,t,sIe,iIe,Md,{})}}new rIe({target:document.getElementById("app")})});export default aIe();
