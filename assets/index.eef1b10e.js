var bQ=Object.defineProperty;var TQ=(t,e,n)=>e in t?bQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var vQ=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Pn=(t,e,n)=>(TQ(t,typeof e!="symbol"?e+"":e,n),n);var VLe=vQ((rPe,R3)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function xh(){}function IU(t){return t()}function oL(){return Object.create(null)}function yu(t){t.forEach(IU)}function FU(t){return typeof t=="function"}function mu(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let lb;function EQ(t,e){return lb||(lb=document.createElement("a")),lb.href=e,t===lb.href}function SQ(t){return Object.keys(t).length===0}function gr(t,e){t.appendChild(e)}function b1(t,e,n){t.insertBefore(e,n||null)}function Ly(t){t.parentNode&&t.parentNode.removeChild(t)}function xQ(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function ta(t){return document.createElement(t)}function OU(t){return document.createTextNode(t)}function cb(){return OU(" ")}function q0(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function uh(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function BQ(t){return Array.from(t.childNodes)}function kQ(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function lL(t,e,n,i){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}function IQ(t,e,{bubbles:n=!1,cancelable:i=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(t,n,i,e),s}let z_;function E_(t){z_=t}function EF(){if(!z_)throw new Error("Function called outside component initialization");return z_}function FQ(t){EF().$$.on_mount.push(t)}function OQ(t){EF().$$.on_destroy.push(t)}function SF(){const t=EF();return(e,n,{cancelable:i=!1}={})=>{const s=t.$$.callbacks[e];if(s){const o=IQ(e,n,{cancelable:i});return s.slice().forEach(c=>{c.call(t,o)}),!o.defaultPrevented}return!0}}function Mr(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(i=>i.call(this,e))}const Jg=[],Yh=[],o0=[],NB=[],MQ=Promise.resolve();let CB=!1;function AQ(){CB||(CB=!0,MQ.then(MU))}function RB(t){o0.push(t)}function xF(t){NB.push(t)}const VS=new Set;let db=0;function MU(){const t=z_;do{for(;db<Jg.length;){const e=Jg[db];db++,E_(e),NQ(e.$$)}for(E_(null),Jg.length=0,db=0;Yh.length;)Yh.pop()();for(let e=0;e<o0.length;e+=1){const n=o0[e];VS.has(n)||(VS.add(n),n())}o0.length=0}while(Jg.length);for(;NB.length;)NB.pop()();CB=!1,VS.clear(),E_(t)}function NQ(t){if(t.fragment!==null){t.update(),yu(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(RB)}}const l0=new Set;let hf;function CQ(){hf={r:0,c:[],p:hf}}function RQ(){hf.r||yu(hf.c),hf=hf.p}function vo(t,e){t&&t.i&&(l0.delete(t),t.i(e))}function Vc(t,e,n,i){if(t&&t.o){if(l0.has(t))return;l0.add(t),hf.c.push(()=>{l0.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}function BF(t,e,n,i){const s=t.$$.props[e];s!==void 0&&(t.$$.bound[s]=n,i===void 0&&n(t.$$.ctx[s]))}function Hp(t){t&&t.c()}function wu(t,e,n,i){const{fragment:s,after_update:o}=t.$$;s&&s.m(e,n),i||RB(()=>{const c=t.$$.on_mount.map(IU).filter(FU);t.$$.on_destroy?t.$$.on_destroy.push(...c):yu(c),t.$$.on_mount=[]}),o.forEach(RB)}function bu(t,e){const n=t.$$;n.fragment!==null&&(yu(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function LQ(t,e){t.$$.dirty[0]===-1&&(Jg.push(t),AQ(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Tu(t,e,n,i,s,o,c,d=[-1]){const f=z_;E_(t);const u=t.$$={fragment:null,ctx:[],props:o,update:xh,not_equal:s,bound:oL(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:oL(),dirty:d,skip_bound:!1,root:e.target||f.$$.root};c&&c(u.root);let a=!1;if(u.ctx=n?n(t,e.props||{},(_,w,...m)=>{const l=m.length?m[0]:w;return u.ctx&&s(u.ctx[_],u.ctx[_]=l)&&(!u.skip_bound&&u.bound[_]&&u.bound[_](l),a&&LQ(t,_)),w}):[],u.update(),a=!0,yu(u.before_update),u.fragment=i?i(u.ctx):!1,e.target){if(e.hydrate){const _=BQ(e.target);u.fragment&&u.fragment.l(_),_.forEach(Ly)}else u.fragment&&u.fragment.c();e.intro&&vo(t.$$.fragment),wu(t,e.target,e.anchor,e.customElement),MU()}E_(f)}class vu{$destroy(){bu(this,1),this.$destroy=xh}$on(e,n){if(!FU(n))return xh;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}$set(e){this.$$set&&!SQ(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}class AU{constructor(e,n){Pn(this,"_bits");this.length=e,this._bits=n||new Uint32Array((e>>>5)+1)}get(e){return e|=0,!!(this._bits[e>>>5]&1<<(e&31))}get bits(){return this._bits}set(e,n){e|=0;const i=e>>>5,s=1<<(e&31);return n?this._bits[i]|=s:this._bits[i]&=~s,this}union(e){for(let n=0;n<this._bits.length;n++)this._bits[n]=this._bits[n]|e._bits[n]}}function HS(...t){if(t.length==0)return null;if(t.length==1)return t[0];const e=new AU(t[0].length,new Uint32Array(t[0].bits));for(let n=1;n<t.length;n++){const i=t[n];e.union(i)}return e}var PQ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function DQ(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function jQ(t){var e=t.default;if(typeof e=="function"){var n=function(){return e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var s=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:function(){return t[i]}})}),n}function UQ(t){for(var e=new Array(t),n=0;n<t;++n)e[n]=n;return e}var zQ=UQ;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var $Q=function(t){return t!=null&&(NU(t)||qQ(t)||!!t._isBuffer)};function NU(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function qQ(t){return typeof t.readFloatLE=="function"&&typeof t.slice=="function"&&NU(t.slice(0,0))}var GQ=zQ,VQ=$Q,HQ=typeof Float64Array<"u";function WQ(t,e){return t[0]-e[0]}function YQ(){var t=this.stride,e=new Array(t.length),n;for(n=0;n<e.length;++n)e[n]=[Math.abs(t[n]),n];e.sort(WQ);var i=new Array(e.length);for(n=0;n<i.length;++n)i[n]=e[n][1];return i}function XQ(t,e){var n=["View",e,"d",t].join("");e<0&&(n="View_Nil"+t);var i=t==="generic";if(e===-1){var s="function "+n+"(a){this.data=a;};var proto="+n+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+n+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+n+"(a){return new "+n+"(a);}",T=new Function(s);return T()}else if(e===0){var s="function "+n+"(a,d) {this.data = a;this.offset = d};var proto="+n+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+n+"_copy() {return new "+n+"(this.data,this.offset)};proto.pick=function "+n+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+n+"_get(){return "+(i?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+n+"_set(v){return "+(i?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+n+"(a,b,c,d){return new "+n+"(a,d)}",T=new Function("TrivialArray",s);return T(G0[t][0])}var s=["'use strict'"],o=GQ(e),c=o.map(function(b){return"i"+b}),d="this.offset+"+o.map(function(b){return"this.stride["+b+"]*i"+b}).join("+"),f=o.map(function(b){return"b"+b}).join(","),u=o.map(function(b){return"c"+b}).join(",");s.push("function "+n+"(a,"+f+","+u+",d){this.data=a","this.shape=["+f+"]","this.stride=["+u+"]","this.offset=d|0}","var proto="+n+".prototype","proto.dtype='"+t+"'","proto.dimension="+e),s.push("Object.defineProperty(proto,'size',{get:function "+n+"_size(){return "+o.map(function(b){return"this.shape["+b+"]"}).join("*"),"}})"),e===1?s.push("proto.order=[0]"):(s.push("Object.defineProperty(proto,'order',{get:"),e<4?(s.push("function "+n+"_order(){"),e===2?s.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):e===3&&s.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):s.push("ORDER})")),s.push("proto.set=function "+n+"_set("+c.join(",")+",v){"),i?s.push("return this.data.set("+d+",v)}"):s.push("return this.data["+d+"]=v}"),s.push("proto.get=function "+n+"_get("+c.join(",")+"){"),i?s.push("return this.data.get("+d+")}"):s.push("return this.data["+d+"]}"),s.push("proto.index=function "+n+"_index(",c.join(),"){return "+d+"}"),s.push("proto.hi=function "+n+"_hi("+c.join(",")+"){return new "+n+"(this.data,"+o.map(function(b){return["(typeof i",b,"!=='number'||i",b,"<0)?this.shape[",b,"]:i",b,"|0"].join("")}).join(",")+","+o.map(function(b){return"this.stride["+b+"]"}).join(",")+",this.offset)}");var a=o.map(function(b){return"a"+b+"=this.shape["+b+"]"}),_=o.map(function(b){return"c"+b+"=this.stride["+b+"]"});s.push("proto.lo=function "+n+"_lo("+c.join(",")+"){var b=this.offset,d=0,"+a.join(",")+","+_.join(","));for(var w=0;w<e;++w)s.push("if(typeof i"+w+"==='number'&&i"+w+">=0){d=i"+w+"|0;b+=c"+w+"*d;a"+w+"-=d}");s.push("return new "+n+"(this.data,"+o.map(function(b){return"a"+b}).join(",")+","+o.map(function(b){return"c"+b}).join(",")+",b)}"),s.push("proto.step=function "+n+"_step("+c.join(",")+"){var "+o.map(function(b){return"a"+b+"=this.shape["+b+"]"}).join(",")+","+o.map(function(b){return"b"+b+"=this.stride["+b+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var w=0;w<e;++w)s.push("if(typeof i"+w+"==='number'){d=i"+w+"|0;if(d<0){c+=b"+w+"*(a"+w+"-1);a"+w+"=ceil(-a"+w+"/d)}else{a"+w+"=ceil(a"+w+"/d)}b"+w+"*=d}");s.push("return new "+n+"(this.data,"+o.map(function(b){return"a"+b}).join(",")+","+o.map(function(b){return"b"+b}).join(",")+",c)}");for(var m=new Array(e),l=new Array(e),w=0;w<e;++w)m[w]="a[i"+w+"]",l[w]="b[i"+w+"]";s.push("proto.transpose=function "+n+"_transpose("+c+"){"+c.map(function(b,S){return b+"=("+b+"===undefined?"+S+":"+b+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+n+"(this.data,"+m.join(",")+","+l.join(",")+",this.offset)}"),s.push("proto.pick=function "+n+"_pick("+c+"){var a=[],b=[],c=this.offset");for(var w=0;w<e;++w)s.push("if(typeof i"+w+"==='number'&&i"+w+">=0){c=(c+this.stride["+w+"]*i"+w+")|0}else{a.push(this.shape["+w+"]);b.push(this.stride["+w+"])}");s.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),s.push("return function construct_"+n+"(data,shape,stride,offset){return new "+n+"(data,"+o.map(function(b){return"shape["+b+"]"}).join(",")+","+o.map(function(b){return"stride["+b+"]"}).join(",")+",offset)}");var T=new Function("CTOR_LIST","ORDER",s.join(`
`));return T(G0[t],YQ)}function KQ(t){if(VQ(t))return"buffer";if(HQ)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(t)?"array":"generic"}var G0={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function JQ(t,e,n,i){if(t===void 0){var u=G0.array[0];return u([])}else typeof t=="number"&&(t=[t]);e===void 0&&(e=[t.length]);var s=e.length;if(n===void 0){n=new Array(s);for(var o=s-1,c=1;o>=0;--o)n[o]=c,c*=e[o]}if(i===void 0){i=0;for(var o=0;o<s;++o)n[o]<0&&(i-=(e[o]-1)*n[o])}for(var d=KQ(t),f=G0[d];f.length<=s+1;)f.push(XQ(d,f.length-1));var u=f[s+1];return u(t,e,n,i)}var QQ=JQ,Qg="n",ah="d",tf="s",V0="p",nf="o",c0="i",ZQ=tZ;function LB(t,e,n){if(n===0){for(var i=[[]],s=0;s<e.length;++s)if(!e[s])for(var o=i.length,c=0;c<o;++c){var d=i[c].slice();d.push(tf+s),i.push(d)}if(i.length===1)return"";var f=[];t==="generic"?f.push(ah,".set(",nf,",",ah,".get(",nf,")+"):f.push(ah,"[",nf,"]+=");for(var s=1;s<i.length;++s){var d=i[s],u=(d.length+1)%2;s>1&&!u?f.push("+"):u&&f.push("-"),t==="generic"?f.push(ah,".get("):f.push(ah,"["),f.push(nf,"-",d.join("-")),t==="generic"?f.push(")"):f.push("]")}return t==="generic"?f.push(");"):f.push(";"),f.join("")}e[n-1]=!0;var a=[LB(t,e,n-1),nf,"+=",V0,n-1,";for(",c0,n-1,"=1;",c0,n-1,"<",Qg,n-1,";++",c0,n-1,"){"];return e[n-1]=!1,a.push(LB(t,e,n-1),nf,"+=",V0,n-1,";}"),a.join("")}function eZ(t,e){for(var n=["prefixSum",e.length,"d",t,"s",e.join("s")].join(""),i=["function ",n,"(arr){var ",ah,"=arr.data,",Qg,"=arr.shape,",tf,"=arr.stride,",nf,"=arr.offset,"],s=e.length,o=0;o<s;++o)i.push(Qg,o,"=",Qg,"[",e[o],"],");for(var o=0;o<s;++o)i.push(tf,o,"=",tf,"[",e[o],"],");for(var o=0;o<s;++o)i.push(c0,o,"=0,");for(var o=s-1;o>0;--o)i.push(V0,o,"=",tf,o,"-",Qg,o-1,"*",tf,o-1,",");i.push(V0,"0=",tf,0,";");for(var c=new Array(s),o=0;o<s;++o)c[o]=!0;i.push(LB(t,c,s),"}return ",n);var d=new Function(i.join(""));return d()}var cL={};function tZ(t){var e=t.dtype+t.order.join(),n=cL[e];return n||(n=cL[e]=eZ(t.dtype,t.order)),n(t),t}var PB={};function nZ(t,e){for(var n=1,i=t.length,s=t[0],o=t[0],c=1;c<i;++c)if(o=s,s=t[c],e(s,o)){if(c===n){n++;continue}t[n++]=s}return t.length=n,t}function iZ(t){for(var e=1,n=t.length,i=t[0],s=t[0],o=1;o<n;++o,s=i)if(s=i,i=t[o],i!==s){if(o===e){e++;continue}t[e++]=i}return t.length=e,t}function sZ(t,e,n){return t.length===0?t:e?(n||t.sort(e),nZ(t,e)):(n||t.sort(),iZ(t))}var rZ=sZ,aZ=rZ;function CU(t,e,n){var i=t.length,s=e.arrayArgs.length,o=e.indexArgs.length>0,c=[],d=[],f=0,u=0,a,_;for(a=0;a<i;++a)d.push(["i",a,"=0"].join(""));for(_=0;_<s;++_)for(a=0;a<i;++a)u=f,f=t[a],a===0?d.push(["d",_,"s",a,"=t",_,"p",f].join("")):d.push(["d",_,"s",a,"=(t",_,"p",f,"-s",u,"*t",_,"p",u,")"].join(""));for(d.length>0&&c.push("var "+d.join(",")),a=i-1;a>=0;--a)f=t[a],c.push(["for(i",a,"=0;i",a,"<s",f,";++i",a,"){"].join(""));for(c.push(n),a=0;a<i;++a){for(u=f,f=t[a],_=0;_<s;++_)c.push(["p",_,"+=d",_,"s",a].join(""));o&&(a>0&&c.push(["index[",u,"]-=s",u].join("")),c.push(["++index[",f,"]"].join(""))),c.push("}")}return c.join(`
`)}function oZ(t,e,n,i){for(var s=e.length,o=n.arrayArgs.length,c=n.blockSize,d=n.indexArgs.length>0,f=[],u=0;u<o;++u)f.push(["var offset",u,"=p",u].join(""));for(var u=t;u<s;++u)f.push(["for(var j"+u+"=SS[",e[u],"]|0;j",u,">0;){"].join("")),f.push(["if(j",u,"<",c,"){"].join("")),f.push(["s",e[u],"=j",u].join("")),f.push(["j",u,"=0"].join("")),f.push(["}else{s",e[u],"=",c].join("")),f.push(["j",u,"-=",c,"}"].join("")),d&&f.push(["index[",e[u],"]=j",u].join(""));for(var u=0;u<o;++u){for(var a=["offset"+u],_=t;_<s;++_)a.push(["j",_,"*t",u,"p",e[_]].join(""));f.push(["p",u,"=(",a.join("+"),")"].join(""))}f.push(CU(e,n,i));for(var u=t;u<s;++u)f.push("}");return f.join(`
`)}function lZ(t){for(var e=0,n=t[0].length;e<n;){for(var i=1;i<t.length;++i)if(t[i][e]!==t[0][e])return e;++e}return e}function WS(t,e,n){for(var i=t.body,s=[],o=[],c=0;c<t.args.length;++c){var d=t.args[c];if(!(d.count<=0)){var f=new RegExp(d.name,"g"),u="",a=e.arrayArgs.indexOf(c);switch(e.argTypes[c]){case"offset":var _=e.offsetArgIndex.indexOf(c),w=e.offsetArgs[_];a=w.array,u="+q"+_;case"array":u="p"+a+u;var m="l"+c,l="a"+a;if(e.arrayBlockIndices[a]===0)d.count===1?n[a]==="generic"?d.lvalue?(s.push(["var ",m,"=",l,".get(",u,")"].join("")),i=i.replace(f,m),o.push([l,".set(",u,",",m,")"].join(""))):i=i.replace(f,[l,".get(",u,")"].join("")):i=i.replace(f,[l,"[",u,"]"].join("")):n[a]==="generic"?(s.push(["var ",m,"=",l,".get(",u,")"].join("")),i=i.replace(f,m),d.lvalue&&o.push([l,".set(",u,",",m,")"].join(""))):(s.push(["var ",m,"=",l,"[",u,"]"].join("")),i=i.replace(f,m),d.lvalue&&o.push([l,"[",u,"]=",m].join("")));else{for(var T=[d.name],b=[u],S=0;S<Math.abs(e.arrayBlockIndices[a]);S++)T.push("\\s*\\[([^\\]]+)\\]"),b.push("$"+(S+1)+"*t"+a+"b"+S);if(f=new RegExp(T.join(""),"g"),u=b.join("+"),n[a]==="generic")throw new Error("cwise: Generic arrays not supported in combination with blocks!");i=i.replace(f,[l,"[",u,"]"].join(""))}break;case"scalar":i=i.replace(f,"Y"+e.scalarArgs.indexOf(c));break;case"index":i=i.replace(f,"index");break;case"shape":i=i.replace(f,"shape");break}}}return[s.join(`
`),i,o.join(`
`)].join(`
`).trim()}function cZ(t){for(var e=new Array(t.length),n=!0,i=0;i<t.length;++i){var s=t[i],o=s.match(/\d+/);o?o=o[0]:o="",s.charAt(0)===0?e[i]="u"+s.charAt(1)+o:e[i]=s.charAt(0)+o,i>0&&(n=n&&e[i]===e[i-1])}return n?e[0]:e.join("")}function dZ(t,e){for(var n=e[1].length-Math.abs(t.arrayBlockIndices[0])|0,i=new Array(t.arrayArgs.length),s=new Array(t.arrayArgs.length),o=0;o<t.arrayArgs.length;++o)s[o]=e[2*o],i[o]=e[2*o+1];for(var c=[],d=[],f=[],u=[],a=[],o=0;o<t.arrayArgs.length;++o){t.arrayBlockIndices[o]<0?(f.push(0),u.push(n),c.push(n),d.push(n+t.arrayBlockIndices[o])):(f.push(t.arrayBlockIndices[o]),u.push(t.arrayBlockIndices[o]+n),c.push(0),d.push(t.arrayBlockIndices[o]));for(var _=[],w=0;w<i[o].length;w++)f[o]<=i[o][w]&&i[o][w]<u[o]&&_.push(i[o][w]-f[o]);a.push(_)}for(var m=["SS"],l=["'use strict'"],T=[],w=0;w<n;++w)T.push(["s",w,"=SS[",w,"]"].join(""));for(var o=0;o<t.arrayArgs.length;++o){m.push("a"+o),m.push("t"+o),m.push("p"+o);for(var w=0;w<n;++w)T.push(["t",o,"p",w,"=t",o,"[",f[o]+w,"]"].join(""));for(var w=0;w<Math.abs(t.arrayBlockIndices[o]);++w)T.push(["t",o,"b",w,"=t",o,"[",c[o]+w,"]"].join(""))}for(var o=0;o<t.scalarArgs.length;++o)m.push("Y"+o);if(t.shapeArgs.length>0&&T.push("shape=SS.slice(0)"),t.indexArgs.length>0){for(var b=new Array(n),o=0;o<n;++o)b[o]="0";T.push(["index=[",b.join(","),"]"].join(""))}for(var o=0;o<t.offsetArgs.length;++o){for(var S=t.offsetArgs[o],x=[],w=0;w<S.offset.length;++w)S.offset[w]!==0&&(S.offset[w]===1?x.push(["t",S.array,"p",w].join("")):x.push([S.offset[w],"*t",S.array,"p",w].join("")));x.length===0?T.push("q"+o+"=0"):T.push(["q",o,"=",x.join("+")].join(""))}var B=aZ([].concat(t.pre.thisVars).concat(t.body.thisVars).concat(t.post.thisVars));T=T.concat(B),T.length>0&&l.push("var "+T.join(","));for(var o=0;o<t.arrayArgs.length;++o)l.push("p"+o+"|=0");t.pre.body.length>3&&l.push(WS(t.pre,t,s));var F=WS(t.body,t,s),k=lZ(a);k<n?l.push(oZ(k,a[0],t,F)):l.push(CU(a[0],t,F)),t.post.body.length>3&&l.push(WS(t.post,t,s)),t.debug&&console.log("-----Generated cwise routine for ",e,`:
`+l.join(`
`)+`
----------`);var A=[t.funcName||"unnamed","_cwise_loop_",i[0].join("s"),"m",k,cZ(s)].join(""),M=new Function(["function ",A,"(",m.join(","),"){",l.join(`
`),"} return ",A].join(""));return M()}var fZ=dZ,uZ=fZ;function hZ(t){var e=["'use strict'","var CACHED={}"],n=[],i=t.funcName+"_cwise_thunk";e.push(["return function ",i,"(",t.shimArgs.join(","),"){"].join(""));for(var s=[],o=[],c=[["array",t.arrayArgs[0],".shape.slice(",Math.max(0,t.arrayBlockIndices[0]),t.arrayBlockIndices[0]<0?","+t.arrayBlockIndices[0]+")":")"].join("")],d=[],f=[],u=0;u<t.arrayArgs.length;++u){var a=t.arrayArgs[u];n.push(["t",a,"=array",a,".dtype,","r",a,"=array",a,".order"].join("")),s.push("t"+a),s.push("r"+a),o.push("t"+a),o.push("r"+a+".join()"),c.push("array"+a+".data"),c.push("array"+a+".stride"),c.push("array"+a+".offset|0"),u>0&&(d.push("array"+t.arrayArgs[0]+".shape.length===array"+a+".shape.length+"+(Math.abs(t.arrayBlockIndices[0])-Math.abs(t.arrayBlockIndices[u]))),f.push("array"+t.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[0])+"]===array"+a+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[u])+"]"))}t.arrayArgs.length>1&&(e.push("if (!("+d.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),e.push("for(var shapeIndex=array"+t.arrayArgs[0]+".shape.length-"+Math.abs(t.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),e.push("if (!("+f.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),e.push("}"));for(var u=0;u<t.scalarArgs.length;++u)c.push("scalar"+t.scalarArgs[u]);n.push(["type=[",o.join(","),"].join()"].join("")),n.push("proc=CACHED[type]"),e.push("var "+n.join(",")),e.push(["if(!proc){","CACHED[type]=proc=compile([",s.join(","),"])}","return proc(",c.join(","),")}"].join("")),t.debug&&console.log(`-----Generated thunk:
`+e.join(`
`)+`
----------`);var _=new Function("compile",e.join(`
`));return _(uZ.bind(void 0,t))}var pZ=hZ,gZ=pZ;function _Z(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function yZ(t){var e=new _Z;e.pre=t.pre,e.body=t.body,e.post=t.post;var n=t.args.slice(0);e.argTypes=n;for(var i=0;i<n.length;++i){var s=n[i];if(s==="array"||typeof s=="object"&&s.blockIndices){if(e.argTypes[i]="array",e.arrayArgs.push(i),e.arrayBlockIndices.push(s.blockIndices?s.blockIndices:0),e.shimArgs.push("array"+i),i<e.pre.args.length&&e.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array args");if(i<e.post.args.length&&e.post.args[i].count>0)throw new Error("cwise: post() block may not reference array args")}else if(s==="scalar")e.scalarArgs.push(i),e.shimArgs.push("scalar"+i);else if(s==="index"){if(e.indexArgs.push(i),i<e.pre.args.length&&e.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array index");if(i<e.body.args.length&&e.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array index");if(i<e.post.args.length&&e.post.args[i].count>0)throw new Error("cwise: post() block may not reference array index")}else if(s==="shape"){if(e.shapeArgs.push(i),i<e.pre.args.length&&e.pre.args[i].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(i<e.body.args.length&&e.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array shape");if(i<e.post.args.length&&e.post.args[i].lvalue)throw new Error("cwise: post() block may not write to array shape")}else if(typeof s=="object"&&s.offset)e.argTypes[i]="offset",e.offsetArgs.push({array:s.array,offset:s.offset}),e.offsetArgIndex.push(i);else throw new Error("cwise: Unknown argument type "+n[i])}if(e.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(e.pre.args.length>n.length)throw new Error("cwise: Too many arguments in pre() block");if(e.body.args.length>n.length)throw new Error("cwise: Too many arguments in body() block");if(e.post.args.length>n.length)throw new Error("cwise: Too many arguments in post() block");return e.debug=!!t.printCode||!!t.debug,e.funcName=t.funcName||"cwise",e.blockSize=t.blockSize||64,gZ(e)}var mZ=yZ;(function(t){var e=mZ,n={body:"",args:[],thisVars:[],localVars:[]};function i(w){if(!w)return n;for(var m=0;m<w.args.length;++m){var l=w.args[m];m===0?w.args[m]={name:l,lvalue:!0,rvalue:!!w.rvalue,count:w.count||1}:w.args[m]={name:l,lvalue:!1,rvalue:!0,count:1}}return w.thisVars||(w.thisVars=[]),w.localVars||(w.localVars=[]),w}function s(w){return e({args:w.args,pre:i(w.pre),body:i(w.body),post:i(w.proc),funcName:w.funcName})}function o(w){for(var m=[],l=0;l<w.args.length;++l)m.push("a"+l);var T=new Function("P",["return function ",w.funcName,"_ndarrayops(",m.join(","),") {P(",m.join(","),");return a0}"].join(""));return T(s(w))}var c={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var w in c){var m=c[w];t[w]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+m+"c"},funcName:w}),t[w+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a"+m+"=b"},rvalue:!0,funcName:w+"eq"}),t[w+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+m+"s"},funcName:w+"s"}),t[w+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a"+m+"=s"},rvalue:!0,funcName:w+"seq"})}})();var d={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var w in d){var m=d[w];t[w]=o({args:["array","array"],body:{args:["a","b"],body:"a="+m+"b"},funcName:w}),t[w+"eq"]=o({args:["array"],body:{args:["a"],body:"a="+m+"a"},rvalue:!0,count:2,funcName:w+"eq"})}})();var f={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var w in f){var m=f[w];t[w]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+m+"c"},funcName:w}),t[w+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+m+"s"},funcName:w+"s"}),t[w+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a=a"+m+"b"},rvalue:!0,count:2,funcName:w+"eq"}),t[w+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+m+"s"},rvalue:!0,count:2,funcName:w+"seq"})}})();var u=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];(function(){for(var w=0;w<u.length;++w){var m=u[w];t[m]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:m}),t[m+"eq"]=o({args:["array"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:m+"eq"})}})();var a=["max","min","atan2","pow"];(function(){for(var w=0;w<a.length;++w){var m=a[w];t[m]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:m}),t[m+"s"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:m+"s"}),t[m+"eq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:m+"eq"}),t[m+"seq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:m+"seq"})}})();var _=["atan2","pow"];(function(){for(var w=0;w<_.length;++w){var m=_[w];t[m+"op"]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:m+"op"}),t[m+"ops"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:m+"ops"}),t[m+"opeq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:m+"opeq"}),t[m+"opseq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:m+"opseq"})}})(),t.any=e({args:["array"],pre:n,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),t.all=e({args:["array"],pre:n,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),t.sum=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),t.prod=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),t.norm2squared=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),t.norm2=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),t.norminf=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),t.norm1=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),t.sup=e({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.inf=e({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.argmin=e({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.argmax=e({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.random=o({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),t.assign=o({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),t.assigns=o({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),t.equals=e({args:["array","array"],pre:n,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})})(PB);class si{constructor(e,n,i,s){Pn(this,"ndarray");Pn(this,"data");this.data=e,this.ndarray=QQ(e,n,i,s)}get shape(){return this.ndarray.shape}get offset(){return this.ndarray.offset}get stride(){return this.ndarray.stride}get size(){return this.ndarray.size}set shape(e){this.ndarray.shape=e}set offset(e){this.ndarray.offset=e}set stride(e){this.ndarray.stride=e}get(...e){return this.ndarray.get(...e)}set(...e){return this.ndarray.set(...e)}zeros(){this.data.fill(0)}increment(e,n=1){return this.set(...e,this.get(...e)+n),this}addOverride(e){PB.addeq(this.ndarray,e.ndarray)}sub(e){const n=new si(new Int32Array(this.size),this.shape);return PB.sub(n.ndarray,this.ndarray,e.ndarray),n}slice(...e){const n=this.ndarray.pick(...e);return new si(this.data,n.shape,n.stride,n.offset)}cumulativeSum(){return ZQ(this.ndarray),this}static typedArray(e,n,i,s,o){const c=new e(n);return new si(c,i,s,o)}static allocCumulative(e,n,i,s){return this.typedArray(Float32Array,e,n,i,s)}static allocCounts(e,n,i,s){return this.typedArray(Uint32Array,e,n,i,s)}}function Ml(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function wZ(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Py(t){let e,n,i;t.length!==2?(e=Ml,n=(d,f)=>Ml(t(d),f),i=(d,f)=>t(d)-f):(e=t===Ml||t===wZ?t:bZ,n=t,i=t);function s(d,f,u=0,a=d.length){if(u<a){if(e(f,f)!==0)return a;do{const _=u+a>>>1;n(d[_],f)<0?u=_+1:a=_}while(u<a)}return u}function o(d,f,u=0,a=d.length){if(u<a){if(e(f,f)!==0)return a;do{const _=u+a>>>1;n(d[_],f)<=0?u=_+1:a=_}while(u<a)}return u}function c(d,f,u=0,a=d.length){const _=s(d,f,u,a-1);return _>u&&i(d[_-1],f)>-i(d[_],f)?_-1:_}return{left:s,center:c,right:o}}function bZ(){return 0}function RU(t){return t===null?NaN:+t}function*TZ(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of t)(i=e(i,++n,t))!=null&&(i=+i)>=i&&(yield i)}}const LU=Py(Ml),H0=LU.right,vZ=LU.left;Py(RU).center;const Dy=H0;function EZ(t,e){let n=0,i,s=0,o=0;if(e===void 0)for(let c of t)c!=null&&(c=+c)>=c&&(i=c-s,s+=i/++n,o+=i*(c-s));else{let c=-1;for(let d of t)(d=e(d,++c,t))!=null&&(d=+d)>=d&&(i=d-s,s+=i/++n,o+=i*(d-s))}if(n>1)return o/(n-1)}function SZ(t,e){const n=EZ(t,e);return n&&Math.sqrt(n)}class ls{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let i=0;for(let s=0;s<this._n&&s<32;s++){const o=n[s],c=e+o,d=Math.abs(e)<Math.abs(o)?e-(c-o):o-(c-e);d&&(n[i++]=d),e=c}return n[i]=e,this._n=i+1,this}valueOf(){const e=this._partials;let n=this._n,i,s,o,c=0;if(n>0){for(c=e[--n];n>0&&(i=c,s=e[--n],c=i+s,o=s-(c-i),!o););n>0&&(o<0&&e[n-1]<0||o>0&&e[n-1]>0)&&(s=o*2,i=c+s,s==i-c&&(c=i))}return c}}class dL extends Map{constructor(e,n=jU){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[i,s]of e)this.set(i,s)}get(e){return super.get(DB(this,e))}has(e){return super.has(DB(this,e))}set(e,n){return super.set(PU(this,e),n)}delete(e){return super.delete(DU(this,e))}}class W0 extends Set{constructor(e,n=jU){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const i of e)this.add(i)}has(e){return super.has(DB(this,e))}add(e){return super.add(PU(this,e))}delete(e){return super.delete(DU(this,e))}}function DB({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function PU({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function DU({_intern:t,_key:e},n){const i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function jU(t){return t!==null&&typeof t=="object"?t.valueOf():t}function xZ(t,e){return Array.from(e,n=>t[n])}function BZ(t=Ml){if(t===Ml)return UU;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const i=t(e,n);return i||i===0?i:(t(n,n)===0)-(t(e,e)===0)}}function UU(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}var jB=Math.sqrt(50),UB=Math.sqrt(10),zB=Math.sqrt(2);function $B(t,e,n){var i,s=-1,o,c,d;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((i=e<t)&&(o=t,t=e,e=o),(d=zU(t,e,n))===0||!isFinite(d))return[];if(d>0){let f=Math.round(t/d),u=Math.round(e/d);for(f*d<t&&++f,u*d>e&&--u,c=new Array(o=u-f+1);++s<o;)c[s]=(f+s)*d}else{d=-d;let f=Math.round(t*d),u=Math.round(e*d);for(f/d<t&&++f,u/d>e&&--u,c=new Array(o=u-f+1);++s<o;)c[s]=(f+s)/d}return i&&c.reverse(),c}function zU(t,e,n){var i=(e-t)/Math.max(0,n),s=Math.floor(Math.log(i)/Math.LN10),o=i/Math.pow(10,s);return s>=0?(o>=jB?10:o>=UB?5:o>=zB?2:1)*Math.pow(10,s):-Math.pow(10,-s)/(o>=jB?10:o>=UB?5:o>=zB?2:1)}function Hc(t,e,n){var i=Math.abs(e-t)/Math.max(0,n),s=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),o=i/s;return o>=jB?s*=10:o>=UB?s*=5:o>=zB&&(s*=2),e<t?-s:s}function Af(t,e){let n;if(e===void 0)for(const i of t)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let s of t)(s=e(s,++i,t))!=null&&(n<s||n===void 0&&s>=s)&&(n=s)}return n}function qB(t,e){let n;if(e===void 0)for(const i of t)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let s of t)(s=e(s,++i,t))!=null&&(n>s||n===void 0&&s>=s)&&(n=s)}return n}function $U(t,e,n=0,i=t.length-1,s){for(s=s===void 0?UU:BZ(s);i>n;){if(i-n>600){const f=i-n+1,u=e-n+1,a=Math.log(f),_=.5*Math.exp(2*a/3),w=.5*Math.sqrt(a*_*(f-_)/f)*(u-f/2<0?-1:1),m=Math.max(n,Math.floor(e-u*_/f+w)),l=Math.min(i,Math.floor(e+(f-u)*_/f+w));$U(t,e,m,l,s)}const o=t[e];let c=n,d=i;for(Eg(t,n,e),s(t[i],o)>0&&Eg(t,n,i);c<d;){for(Eg(t,c,d),++c,--d;s(t[c],o)<0;)++c;for(;s(t[d],o)>0;)--d}s(t[n],o)===0?Eg(t,n,d):(++d,Eg(t,d,i)),d<=e&&(n=d+1),e<=d&&(i=d-1)}return t}function Eg(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function GB(t,e,n){if(t=Float64Array.from(TZ(t,n)),!!(i=t.length)){if((e=+e)<=0||i<2)return qB(t);if(e>=1)return Af(t);var i,s=(i-1)*e,o=Math.floor(s),c=Af($U(t,o).subarray(0,o+1)),d=qB(t.subarray(o+1));return c+(d-c)*(s-o)}}function qU(t,e,n=RU){if(!!(i=t.length)){if((e=+e)<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,s=(i-1)*e,o=Math.floor(s),c=+n(t[o],o,t),d=+n(t[o+1],o+1,t);return c+(d-c)*(s-o)}}function kZ(t,e){let n=0,i=0;if(e===void 0)for(let s of t)s!=null&&(s=+s)>=s&&(++n,i+=s);else{let s=-1;for(let o of t)(o=e(o,++s,t))!=null&&(o=+o)>=o&&(++n,i+=o)}if(n)return i/n}function GU(t,e){return GB(t,.5,e)}function*IZ(t){for(const e of t)yield*e}function VU(t){return Array.from(IZ(t))}function ar(t,e,n){t=+t,e=+e,n=(s=arguments.length)<2?(e=t,t=0,1):s<3?1:+n;for(var i=-1,s=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(s);++i<s;)o[i]=t+i*n;return o}function HU(t,e){let n=0;if(e===void 0)for(let i of t)(i=+i)&&(n+=i);else{let i=-1;for(let s of t)(s=+e(s,++i,t))&&(n+=s)}return n}function*WU(t,e){if(e==null)for(let n of t)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of t)i=e(i,++n,t),i!=null&&i!==""&&(i=+i)>=i&&(yield i)}}function kF(t,e,n){const i=Float64Array.from(WU(t,n));return i.sort(Ml),e.map(s=>qU(i,s))}function IF(t,e){return kF(t,[.25,.5,.75],e)}function FF(t,e){const n=t.length,i=SZ(t,e),s=IF(t,e),o=(s[2]-s[0])/1.34;return 1.06*(Math.min(i,o)||i||Math.abs(s[0])||1)*Math.pow(n,-.2)}function OF(t){const e=t.maxbins||20,n=t.base||10,i=Math.log(n),s=t.divide||[5,2];let o=t.extent[0],c=t.extent[1],d,f,u,a,_,w;const m=t.span||c-o||Math.abs(o)||1;if(t.step)d=t.step;else if(t.steps){for(a=m/e,_=0,w=t.steps.length;_<w&&t.steps[_]<a;++_);d=t.steps[Math.max(0,_-1)]}else{for(f=Math.ceil(Math.log(e)/i),u=t.minstep||0,d=Math.max(u,Math.pow(n,Math.round(Math.log(m)/i)-f));Math.ceil(m/d)>e;)d*=n;for(_=0,w=s.length;_<w;++_)a=d/s[_],a>=u&&m/a<=e&&(d=a)}a=Math.log(d);const l=a>=0?0:~~(-a/i)+1,T=Math.pow(n,-l-1);return(t.nice||t.nice===void 0)&&(a=Math.floor(o/d+T)*d,o=o<a?a-d:a,c=Math.ceil(c/d)*d),{start:o,stop:c===o?o+d:c,step:d}}var Rr=Math.random;function FZ(t){Rr=t}function YU(t,e,n,i){if(!t.length)return[void 0,void 0];const s=Float64Array.from(WU(t,i)),o=s.length,c=e;let d,f,u,a;for(u=0,a=Array(c);u<c;++u){for(d=0,f=0;f<o;++f)d+=s[~~(Rr()*o)];a[u]=d/o}return a.sort(Ml),[GB(a,n/2),GB(a,1-n/2)]}function XU(t,e,n,i){i=i||(w=>w);const s=t.length,o=new Float64Array(s);let c=0,d=1,f=i(t[0]),u=f,a=f+e,_;for(;d<s;++d){if(_=i(t[d]),_>=a){for(u=(f+u)/2;c<d;++c)o[c]=u;a=_+e,f=_}u=_}for(u=(f+u)/2;c<d;++c)o[c]=u;return n?OZ(o,e+e/4):o}function OZ(t,e){const n=t.length;let i=0,s=1,o,c;for(;t[i]===t[s];)++s;for(;s<n;){for(o=s+1;t[s]===t[o];)++o;if(t[s]-t[s-1]<e){for(c=s+(i+o-s-s>>1);c<s;)t[c++]=t[s];for(;c>s;)t[c--]=t[i]}i=s,s=o}return t}function MZ(t){return function(){return t=(1103515245*t+12345)%2147483647,t/2147483647}}function AZ(t,e){e==null&&(e=t,t=0);let n,i,s;const o={min(c){return arguments.length?(n=c||0,s=i-n,o):n},max(c){return arguments.length?(i=c||0,s=i-n,o):i},sample(){return n+Math.floor(s*Rr())},pdf(c){return c===Math.floor(c)&&c>=n&&c<i?1/s:0},cdf(c){const d=Math.floor(c);return d<n?0:d>=i?1:(d-n+1)/s},icdf(c){return c>=0&&c<=1?n-1+Math.floor(c*s):NaN}};return o.min(t).max(e)}const KU=Math.sqrt(2*Math.PI),NZ=Math.SQRT2;let Sg=NaN;function T1(t,e){t=t||0,e=e==null?1:e;let n=0,i=0,s,o;if(Sg===Sg)n=Sg,Sg=NaN;else{do n=Rr()*2-1,i=Rr()*2-1,s=n*n+i*i;while(s===0||s>1);o=Math.sqrt(-2*Math.log(s)/s),n*=o,Sg=i*o}return t+n*e}function MF(t,e,n){n=n==null?1:n;const i=(t-(e||0))/n;return Math.exp(-.5*i*i)/(n*KU)}function v1(t,e,n){e=e||0,n=n==null?1:n;const i=(t-e)/n,s=Math.abs(i);let o;if(s>37)o=0;else{const c=Math.exp(-s*s/2);let d;s<7.07106781186547?(d=.0352624965998911*s+.700383064443688,d=d*s+6.37396220353165,d=d*s+33.912866078383,d=d*s+112.079291497871,d=d*s+221.213596169931,d=d*s+220.206867912376,o=c*d,d=.0883883476483184*s+1.75566716318264,d=d*s+16.064177579207,d=d*s+86.7807322029461,d=d*s+296.564248779674,d=d*s+637.333633378831,d=d*s+793.826512519948,d=d*s+440.413735824752,o=o/d):(d=s+.65,d=s+4/d,d=s+3/d,d=s+2/d,d=s+1/d,o=c/d/2.506628274631)}return i>0?1-o:o}function E1(t,e,n){return t<0||t>1?NaN:(e||0)+(n==null?1:n)*NZ*CZ(2*t-1)}function CZ(t){let e=-Math.log((1-t)*(1+t)),n;return e<6.25?(e-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*e,n=128584807152564e-32+n*e,n=11157877678025181e-33+n*e,n=-1333171662854621e-31+n*e,n=20972767875968562e-33+n*e,n=6637638134358324e-30+n*e,n=-4054566272975207e-29+n*e,n=-8151934197605472e-29+n*e,n=26335093153082323e-28+n*e,n=-12975133253453532e-27+n*e,n=-5415412054294628e-26+n*e,n=10512122733215323e-25+n*e,n=-4112633980346984e-24+n*e,n=-29070369957882005e-24+n*e,n=42347877827932404e-23+n*e,n=-13654692000834679e-22+n*e,n=-13882523362786469e-21+n*e,n=.00018673420803405714+n*e,n=-.000740702534166267+n*e,n=-.006033670871430149+n*e,n=.24015818242558962+n*e,n=1.6536545626831027+n*e):e<16?(e=Math.sqrt(e)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*e,n=-27517406297064545e-23+n*e,n=18239629214389228e-24+n*e,n=15027403968909828e-22+n*e,n=-4013867526981546e-21+n*e,n=29234449089955446e-22+n*e,n=12475304481671779e-21+n*e,n=-47318229009055734e-21+n*e,n=6828485145957318e-20+n*e,n=24031110387097894e-21+n*e,n=-.0003550375203628475+n*e,n=.0009532893797373805+n*e,n=-.0016882755560235047+n*e,n=.002491442096107851+n*e,n=-.003751208507569241+n*e,n=.005370914553590064+n*e,n=1.0052589676941592+n*e,n=3.0838856104922208+n*e):Number.isFinite(e)?(e=Math.sqrt(e)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*e,n=15076572693500548e-25+n*e,n=-3789465440126737e-24+n*e,n=761570120807834e-23+n*e,n=-1496002662714924e-23+n*e,n=2914795345090108e-23+n*e,n=-6771199775845234e-23+n*e,n=22900482228026655e-23+n*e,n=-99298272942317e-20+n*e,n=4526062597223154e-21+n*e,n=-1968177810553167e-20+n*e,n=7599527703001776e-20+n*e,n=-.00021503011930044477+n*e,n=-.00013871931833623122+n*e,n=1.0103004648645344+n*e,n=4.849906401408584+n*e):n=1/0,n*t}function AF(t,e){let n,i;const s={mean(o){return arguments.length?(n=o||0,s):n},stdev(o){return arguments.length?(i=o==null?1:o,s):i},sample:()=>T1(n,i),pdf:o=>MF(o,n,i),cdf:o=>v1(o,n,i),icdf:o=>E1(o,n,i)};return s.mean(t).stdev(e)}function NF(t,e){const n=AF();let i=0;const s={data(o){return arguments.length?(t=o,i=o?o.length:0,s.bandwidth(e)):t},bandwidth(o){return arguments.length?(e=o,!e&&t&&(e=FF(t)),s):e},sample(){return t[~~(Rr()*i)]+e*n.sample()},pdf(o){let c=0,d=0;for(;d<i;++d)c+=n.pdf((o-t[d])/e);return c/e/i},cdf(o){let c=0,d=0;for(;d<i;++d)c+=n.cdf((o-t[d])/e);return c/i},icdf(){throw Error("KDE icdf not supported.")}};return s.data(t)}function CF(t,e){return t=t||0,e=e==null?1:e,Math.exp(t+T1()*e)}function RF(t,e,n){if(t<=0)return 0;e=e||0,n=n==null?1:n;const i=(Math.log(t)-e)/n;return Math.exp(-.5*i*i)/(n*KU*t)}function LF(t,e,n){return v1(Math.log(t),e,n)}function PF(t,e,n){return Math.exp(E1(t,e,n))}function JU(t,e){let n,i;const s={mean(o){return arguments.length?(n=o||0,s):n},stdev(o){return arguments.length?(i=o==null?1:o,s):i},sample:()=>CF(n,i),pdf:o=>RF(o,n,i),cdf:o=>LF(o,n,i),icdf:o=>PF(o,n,i)};return s.mean(t).stdev(e)}function QU(t,e){let n=0,i;function s(c){const d=[];let f=0,u;for(u=0;u<n;++u)f+=d[u]=c[u]==null?1:+c[u];for(u=0;u<n;++u)d[u]/=f;return d}const o={weights(c){return arguments.length?(i=s(e=c||[]),o):e},distributions(c){return arguments.length?(c?(n=c.length,t=c):(n=0,t=[]),o.weights(e)):t},sample(){const c=Rr();let d=t[n-1],f=i[0],u=0;for(;u<n-1;f+=i[++u])if(c<f){d=t[u];break}return d.sample()},pdf(c){let d=0,f=0;for(;f<n;++f)d+=i[f]*t[f].pdf(c);return d},cdf(c){let d=0,f=0;for(;f<n;++f)d+=i[f]*t[f].cdf(c);return d},icdf(){throw Error("Mixture icdf not supported.")}};return o.distributions(t).weights(e)}function DF(t,e){return e==null&&(e=t==null?1:t,t=0),t+(e-t)*Rr()}function jF(t,e,n){return n==null&&(n=e==null?1:e,e=0),t>=e&&t<=n?1/(n-e):0}function UF(t,e,n){return n==null&&(n=e==null?1:e,e=0),t<e?0:t>n?1:(t-e)/(n-e)}function zF(t,e,n){return n==null&&(n=e==null?1:e,e=0),t>=0&&t<=1?e+t*(n-e):NaN}function ZU(t,e){let n,i;const s={min(o){return arguments.length?(n=o||0,s):n},max(o){return arguments.length?(i=o==null?1:o,s):i},sample:()=>DF(n,i),pdf:o=>jF(o,n,i),cdf:o=>UF(o,n,i),icdf:o=>zF(o,n,i)};return e==null&&(e=t==null?1:t,t=0),s.min(t).max(e)}function jy(t,e,n,i){const s=i-t*t,o=Math.abs(s)<1e-24?0:(n-t*e)/s;return[e-o*t,o]}function S1(t,e,n,i){t=t.filter(m=>{let l=e(m),T=n(m);return l!=null&&(l=+l)>=l&&T!=null&&(T=+T)>=T}),i&&t.sort((m,l)=>e(m)-e(l));const s=t.length,o=new Float64Array(s),c=new Float64Array(s);let d=0,f=0,u=0,a,_,w;for(w of t)o[d]=a=+e(w),c[d]=_=+n(w),++d,f+=(a-f)/d,u+=(_-u)/d;for(d=0;d<s;++d)o[d]-=f,c[d]-=u;return[o,c,f,u]}function Uy(t,e,n,i){let s=-1,o,c;for(const d of t)o=e(d),c=n(d),o!=null&&(o=+o)>=o&&c!=null&&(c=+c)>=c&&i(o,c,++s)}function Wp(t,e,n,i,s){let o=0,c=0;return Uy(t,e,n,(d,f)=>{const u=f-s(d),a=f-i;o+=u*u,c+=a*a}),1-o/c}function $F(t,e,n){let i=0,s=0,o=0,c=0,d=0;Uy(t,e,n,(a,_)=>{++d,i+=(a-i)/d,s+=(_-s)/d,o+=(a*_-o)/d,c+=(a*a-c)/d});const f=jy(i,s,o,c),u=a=>f[0]+f[1]*a;return{coef:f,predict:u,rSquared:Wp(t,e,n,s,u)}}function e8(t,e,n){let i=0,s=0,o=0,c=0,d=0;Uy(t,e,n,(a,_)=>{++d,a=Math.log(a),i+=(a-i)/d,s+=(_-s)/d,o+=(a*_-o)/d,c+=(a*a-c)/d});const f=jy(i,s,o,c),u=a=>f[0]+f[1]*Math.log(a);return{coef:f,predict:u,rSquared:Wp(t,e,n,s,u)}}function t8(t,e,n){const[i,s,o,c]=S1(t,e,n);let d=0,f=0,u=0,a=0,_=0,w,m,l;Uy(t,e,n,(x,B)=>{w=i[_++],m=Math.log(B),l=w*B,d+=(B*m-d)/_,f+=(l-f)/_,u+=(l*m-u)/_,a+=(w*l-a)/_});const[T,b]=jy(f/c,d/c,u/c,a/c),S=x=>Math.exp(T+b*(x-o));return{coef:[Math.exp(T-b*o),b],predict:S,rSquared:Wp(t,e,n,c,S)}}function n8(t,e,n){let i=0,s=0,o=0,c=0,d=0,f=0;Uy(t,e,n,(_,w)=>{const m=Math.log(_),l=Math.log(w);++f,i+=(m-i)/f,s+=(l-s)/f,o+=(m*l-o)/f,c+=(m*m-c)/f,d+=(w-d)/f});const u=jy(i,s,o,c),a=_=>u[0]*Math.pow(_,u[1]);return u[0]=Math.exp(u[0]),{coef:u,predict:a,rSquared:Wp(t,e,n,d,a)}}function qF(t,e,n){const[i,s,o,c]=S1(t,e,n),d=i.length;let f=0,u=0,a=0,_=0,w=0,m,l,T,b;for(m=0;m<d;)l=i[m],T=s[m++],b=l*l,f+=(b-f)/m,u+=(b*l-u)/m,a+=(b*b-a)/m,_+=(l*T-_)/m,w+=(b*T-w)/m;const S=a-f*f,x=f*S-u*u,B=(w*f-_*u)/x,F=(_*S-w*u)/x,k=-B*f,A=M=>(M=M-o,B*M*M+F*M+k+c);return{coef:[k-F*o+B*o*o+c,F-2*B*o,B],predict:A,rSquared:Wp(t,e,n,c,A)}}function i8(t,e,n,i){if(i===1)return $F(t,e,n);if(i===2)return qF(t,e,n);const[s,o,c,d]=S1(t,e,n),f=s.length,u=[],a=[],_=i+1;let w,m,l,T,b;for(w=0;w<_;++w){for(l=0,T=0;l<f;++l)T+=Math.pow(s[l],w)*o[l];for(u.push(T),b=new Float64Array(_),m=0;m<_;++m){for(l=0,T=0;l<f;++l)T+=Math.pow(s[l],w+m);b[m]=T}a.push(b)}a.push(u);const S=LZ(a),x=B=>{B-=c;let F=d+S[0]+S[1]*B+S[2]*B*B;for(w=3;w<_;++w)F+=S[w]*Math.pow(B,w);return F};return{coef:RZ(_,S,-c,d),predict:x,rSquared:Wp(t,e,n,d,x)}}function RZ(t,e,n,i){const s=Array(t);let o,c,d,f;for(o=0;o<t;++o)s[o]=0;for(o=t-1;o>=0;--o)for(d=e[o],f=1,s[o]+=d,c=1;c<=o;++c)f*=(o+1-c)/c,s[o-c]+=d*Math.pow(n,c)*f;return s[0]+=i,s}function LZ(t){const e=t.length-1,n=[];let i,s,o,c,d;for(i=0;i<e;++i){for(c=i,s=i+1;s<e;++s)Math.abs(t[i][s])>Math.abs(t[i][c])&&(c=s);for(o=i;o<e+1;++o)d=t[o][i],t[o][i]=t[o][c],t[o][c]=d;for(s=i+1;s<e;++s)for(o=e;o>=i;o--)t[o][s]-=t[o][i]*t[i][s]/t[i][i]}for(s=e-1;s>=0;--s){for(d=0,o=s+1;o<e;++o)d+=t[o][s]*n[o];n[s]=(t[e][s]-d)/t[s][s]}return n}const fL=2,uL=1e-12;function s8(t,e,n,i){const[s,o,c,d]=S1(t,e,n,!0),f=s.length,u=Math.max(2,~~(i*f)),a=new Float64Array(f),_=new Float64Array(f),w=new Float64Array(f).fill(1);for(let m=-1;++m<=fL;){const l=[0,u-1];for(let b=0;b<f;++b){const S=s[b],x=l[0],B=l[1],F=S-s[x]>s[B]-S?x:B;let k=0,A=0,M=0,R=0,P=0;const j=1/Math.abs(s[F]-S||1);for(let $=x;$<=B;++$){const K=s[$],H=o[$],W=PZ(Math.abs(S-K)*j)*w[$],J=K*W;k+=W,A+=J,M+=H*W,R+=H*J,P+=K*J}const[D,z]=jy(A/k,M/k,R/k,P/k);a[b]=D+z*S,_[b]=Math.abs(o[b]-a[b]),DZ(s,b+1,l)}if(m===fL)break;const T=GU(_);if(Math.abs(T)<uL)break;for(let b=0,S,x;b<f;++b)S=_[b]/(6*T),w[b]=S>=1?uL:(x=1-S*S)*x}return jZ(s,a,c,d)}function PZ(t){return(t=1-t*t*t)*t*t}function DZ(t,e,n){const i=t[e];let s=n[0],o=n[1]+1;if(!(o>=t.length))for(;e>s&&t[o]-i<=i-t[s];)n[0]=++s,n[1]=o,++o}function jZ(t,e,n,i){const s=t.length,o=[];let c=0,d=0,f=[],u;for(;c<s;++c)u=t[c]+n,f[0]===u?f[1]+=(e[c]-f[1])/++d:(d=0,f[1]+=i,f=[u,e[c]],o.push(f));return f[1]+=i,o}const UZ=.5*Math.PI/180;function x1(t,e,n,i){n=n||25,i=Math.max(n,i||200);const s=T=>[T,t(T)],o=e[0],c=e[1],d=c-o,f=d/i,u=[s(o)],a=[];if(n===i){for(let T=1;T<i;++T)u.push(s(o+T/n*d));return u.push(s(c)),u}else{a.push(s(c));for(let T=n;--T>0;)a.push(s(o+T/n*d))}let _=u[0],w=a[a.length-1];const m=1/d,l=zZ(_[1],a);for(;w;){const T=s((_[0]+w[0])/2);T[0]-_[0]>=f&&$Z(_,T,w,m,l)>UZ?a.push(T):(_=w,u.push(w),a.pop()),w=a[a.length-1]}return u}function zZ(t,e){let n=t,i=t;const s=e.length;for(let o=0;o<s;++o){const c=e[o][1];c<n&&(n=c),c>i&&(i=c)}return 1/(i-n)}function $Z(t,e,n,i,s){const o=Math.atan2(s*(n[1]-t[1]),i*(n[0]-t[0])),c=Math.atan2(s*(e[1]-t[1]),i*(e[0]-t[0]));return Math.abs(o-c)}var qZ={value:()=>{}};function r8(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new d0(n)}function d0(t){this._=t}function GZ(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",s=n.indexOf(".");if(s>=0&&(i=n.slice(s+1),n=n.slice(0,s)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}d0.prototype=r8.prototype={constructor:d0,on:function(t,e){var n=this._,i=GZ(t+"",n),s,o=-1,c=i.length;if(arguments.length<2){for(;++o<c;)if((s=(t=i[o]).type)&&(s=VZ(n[s],t.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<c;)if(s=(t=i[o]).type)n[s]=hL(n[s],t.name,e);else if(e==null)for(s in n)n[s]=hL(n[s],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new d0(t)},call:function(t,e){if((s=arguments.length-2)>0)for(var n=new Array(s),i=0,s,o;i<s;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],i=0,s=o.length;i<s;++i)o[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],s=0,o=i.length;s<o;++s)i[s].value.apply(e,n)}};function VZ(t,e){for(var n=0,i=t.length,s;n<i;++n)if((s=t[n]).name===e)return s.value}function hL(t,e,n){for(var i=0,s=t.length;i<s;++i)if(t[i].name===e){t[i]=qZ,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}function Yp(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function zy(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function wd(){}var $f=.7,Xh=1/$f,Bh="\\s*([+-]?\\d+)\\s*",$_="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Eo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",HZ=/^#([0-9a-f]{3,8})$/,WZ=new RegExp(`^rgb\\(${Bh},${Bh},${Bh}\\)$`),YZ=new RegExp(`^rgb\\(${Eo},${Eo},${Eo}\\)$`),XZ=new RegExp(`^rgba\\(${Bh},${Bh},${Bh},${$_}\\)$`),KZ=new RegExp(`^rgba\\(${Eo},${Eo},${Eo},${$_}\\)$`),JZ=new RegExp(`^hsl\\(${$_},${Eo},${Eo}\\)$`),QZ=new RegExp(`^hsla\\(${$_},${Eo},${Eo},${$_}\\)$`),pL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Yp(wd,q_,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:gL,formatHex:gL,formatHex8:ZZ,formatHsl:eee,formatRgb:_L,toString:_L});function gL(){return this.rgb().formatHex()}function ZZ(){return this.rgb().formatHex8()}function eee(){return a8(this).formatHsl()}function _L(){return this.rgb().formatRgb()}function q_(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=HZ.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?yL(e):n===3?new ci(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?fb(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?fb(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=WZ.exec(t))?new ci(e[1],e[2],e[3],1):(e=YZ.exec(t))?new ci(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=XZ.exec(t))?fb(e[1],e[2],e[3],e[4]):(e=KZ.exec(t))?fb(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=JZ.exec(t))?bL(e[1],e[2]/100,e[3]/100,1):(e=QZ.exec(t))?bL(e[1],e[2]/100,e[3]/100,e[4]):pL.hasOwnProperty(t)?yL(pL[t]):t==="transparent"?new ci(NaN,NaN,NaN,0):null}function yL(t){return new ci(t>>16&255,t>>8&255,t&255,1)}function fb(t,e,n,i){return i<=0&&(t=e=n=NaN),new ci(t,e,n,i)}function GF(t){return t instanceof wd||(t=q_(t)),t?(t=t.rgb(),new ci(t.r,t.g,t.b,t.opacity)):new ci}function Wc(t,e,n,i){return arguments.length===1?GF(t):new ci(t,e,n,i==null?1:i)}function ci(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}Yp(ci,Wc,zy(wd,{brighter(t){return t=t==null?Xh:Math.pow(Xh,t),new ci(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?$f:Math.pow($f,t),new ci(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ci(Nf(this.r),Nf(this.g),Nf(this.b),Y0(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:mL,formatHex:mL,formatHex8:tee,formatRgb:wL,toString:wL}));function mL(){return`#${pf(this.r)}${pf(this.g)}${pf(this.b)}`}function tee(){return`#${pf(this.r)}${pf(this.g)}${pf(this.b)}${pf((isNaN(this.opacity)?1:this.opacity)*255)}`}function wL(){const t=Y0(this.opacity);return`${t===1?"rgb(":"rgba("}${Nf(this.r)}, ${Nf(this.g)}, ${Nf(this.b)}${t===1?")":`, ${t})`}`}function Y0(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Nf(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function pf(t){return t=Nf(t),(t<16?"0":"")+t.toString(16)}function bL(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new da(t,e,n,i)}function a8(t){if(t instanceof da)return new da(t.h,t.s,t.l,t.opacity);if(t instanceof wd||(t=q_(t)),!t)return new da;if(t instanceof da)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,s=Math.min(e,n,i),o=Math.max(e,n,i),c=NaN,d=o-s,f=(o+s)/2;return d?(e===o?c=(n-i)/d+(n<i)*6:n===o?c=(i-e)/d+2:c=(e-n)/d+4,d/=f<.5?o+s:2-o-s,c*=60):d=f>0&&f<1?0:c,new da(c,d,f,t.opacity)}function X0(t,e,n,i){return arguments.length===1?a8(t):new da(t,e,n,i==null?1:i)}function da(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}Yp(da,X0,zy(wd,{brighter(t){return t=t==null?Xh:Math.pow(Xh,t),new da(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?$f:Math.pow($f,t),new da(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,s=2*n-i;return new ci(YS(t>=240?t-240:t+120,s,i),YS(t,s,i),YS(t<120?t+240:t-120,s,i),this.opacity)},clamp(){return new da(TL(this.h),ub(this.s),ub(this.l),Y0(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Y0(this.opacity);return`${t===1?"hsl(":"hsla("}${TL(this.h)}, ${ub(this.s)*100}%, ${ub(this.l)*100}%${t===1?")":`, ${t})`}`}}));function TL(t){return t=(t||0)%360,t<0?t+360:t}function ub(t){return Math.max(0,Math.min(1,t||0))}function YS(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const o8=Math.PI/180,l8=180/Math.PI,K0=18,c8=.96422,d8=1,f8=.82521,u8=4/29,kh=6/29,h8=3*kh*kh,nee=kh*kh*kh;function p8(t){if(t instanceof So)return new So(t.l,t.a,t.b,t.opacity);if(t instanceof xl)return g8(t);t instanceof ci||(t=GF(t));var e=QS(t.r),n=QS(t.g),i=QS(t.b),s=XS((.2225045*e+.7168786*n+.0606169*i)/d8),o,c;return e===n&&n===i?o=c=s:(o=XS((.4360747*e+.3850649*n+.1430804*i)/c8),c=XS((.0139322*e+.0971045*n+.7141733*i)/f8)),new So(116*s-16,500*(o-s),200*(s-c),t.opacity)}function J0(t,e,n,i){return arguments.length===1?p8(t):new So(t,e,n,i==null?1:i)}function So(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}Yp(So,J0,zy(wd,{brighter(t){return new So(this.l+K0*(t==null?1:t),this.a,this.b,this.opacity)},darker(t){return new So(this.l-K0*(t==null?1:t),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=c8*KS(e),t=d8*KS(t),n=f8*KS(n),new ci(JS(3.1338561*e-1.6168667*t-.4906146*n),JS(-.9787684*e+1.9161415*t+.033454*n),JS(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function XS(t){return t>nee?Math.pow(t,1/3):t/h8+u8}function KS(t){return t>kh?t*t*t:h8*(t-u8)}function JS(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function QS(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function iee(t){if(t instanceof xl)return new xl(t.h,t.c,t.l,t.opacity);if(t instanceof So||(t=p8(t)),t.a===0&&t.b===0)return new xl(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*l8;return new xl(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Q0(t,e,n,i){return arguments.length===1?iee(t):new xl(t,e,n,i==null?1:i)}function xl(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}function g8(t){if(isNaN(t.h))return new So(t.l,0,0,t.opacity);var e=t.h*o8;return new So(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}Yp(xl,Q0,zy(wd,{brighter(t){return new xl(this.h,this.c,this.l+K0*(t==null?1:t),this.opacity)},darker(t){return new xl(this.h,this.c,this.l-K0*(t==null?1:t),this.opacity)},rgb(){return g8(this).rgb()}}));var _8=-.14861,VF=1.78277,HF=-.29227,B1=-.90649,G_=1.97294,vL=G_*B1,EL=G_*VF,SL=VF*HF-B1*_8;function see(t){if(t instanceof Cf)return new Cf(t.h,t.s,t.l,t.opacity);t instanceof ci||(t=GF(t));var e=t.r/255,n=t.g/255,i=t.b/255,s=(SL*i+vL*e-EL*n)/(SL+vL-EL),o=i-s,c=(G_*(n-s)-HF*o)/B1,d=Math.sqrt(c*c+o*o)/(G_*s*(1-s)),f=d?Math.atan2(c,o)*l8-120:NaN;return new Cf(f<0?f+360:f,d,s,t.opacity)}function VB(t,e,n,i){return arguments.length===1?see(t):new Cf(t,e,n,i==null?1:i)}function Cf(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}Yp(Cf,VB,zy(wd,{brighter(t){return t=t==null?Xh:Math.pow(Xh,t),new Cf(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?$f:Math.pow($f,t),new Cf(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*o8,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),s=Math.sin(t);return new ci(255*(e+n*(_8*i+VF*s)),255*(e+n*(HF*i+B1*s)),255*(e+n*(G_*i)),this.opacity)}}));function y8(t,e,n,i,s){var o=t*t,c=o*t;return((1-3*t+3*o-c)*e+(4-6*o+3*c)*n+(1+3*t+3*o-3*c)*i+c*s)/6}function m8(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),s=t[i],o=t[i+1],c=i>0?t[i-1]:2*s-o,d=i<e-1?t[i+2]:2*o-s;return y8((n-i/e)*e,c,s,o,d)}}function w8(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),s=t[(i+e-1)%e],o=t[i%e],c=t[(i+1)%e],d=t[(i+2)%e];return y8((n-i/e)*e,s,o,c,d)}}const k1=t=>()=>t;function b8(t,e){return function(n){return t+n*e}}function ree(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function I1(t,e){var n=e-t;return n?b8(t,n>180||n<-180?n-360*Math.round(n/360):n):k1(isNaN(t)?e:t)}function aee(t){return(t=+t)==1?di:function(e,n){return n-e?ree(e,n,t):k1(isNaN(e)?n:e)}}function di(t,e){var n=e-t;return n?b8(t,n):k1(isNaN(t)?e:t)}const HB=function t(e){var n=aee(e);function i(s,o){var c=n((s=Wc(s)).r,(o=Wc(o)).r),d=n(s.g,o.g),f=n(s.b,o.b),u=di(s.opacity,o.opacity);return function(a){return s.r=c(a),s.g=d(a),s.b=f(a),s.opacity=u(a),s+""}}return i.gamma=t,i}(1);function T8(t){return function(e){var n=e.length,i=new Array(n),s=new Array(n),o=new Array(n),c,d;for(c=0;c<n;++c)d=Wc(e[c]),i[c]=d.r||0,s[c]=d.g||0,o[c]=d.b||0;return i=t(i),s=t(s),o=t(o),d.opacity=1,function(f){return d.r=i(f),d.g=s(f),d.b=o(f),d+""}}}var oee=T8(m8),lee=T8(w8);function WF(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),s;return function(o){for(s=0;s<n;++s)i[s]=t[s]*(1-o)+e[s]*o;return i}}function v8(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function cee(t,e){return(v8(e)?WF:E8)(t,e)}function E8(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,s=new Array(i),o=new Array(n),c;for(c=0;c<i;++c)s[c]=bd(t[c],e[c]);for(;c<n;++c)o[c]=e[c];return function(d){for(c=0;c<i;++c)o[c]=s[c](d);return o}}function S8(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function la(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function x8(t,e){var n={},i={},s;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(s in e)s in t?n[s]=bd(t[s],e[s]):i[s]=e[s];return function(o){for(s in n)i[s]=n[s](o);return i}}var WB=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ZS=new RegExp(WB.source,"g");function dee(t){return function(){return t}}function fee(t){return function(e){return t(e)+""}}function B8(t,e){var n=WB.lastIndex=ZS.lastIndex=0,i,s,o,c=-1,d=[],f=[];for(t=t+"",e=e+"";(i=WB.exec(t))&&(s=ZS.exec(e));)(o=s.index)>n&&(o=e.slice(n,o),d[c]?d[c]+=o:d[++c]=o),(i=i[0])===(s=s[0])?d[c]?d[c]+=s:d[++c]=s:(d[++c]=null,f.push({i:c,x:la(i,s)})),n=ZS.lastIndex;return n<e.length&&(o=e.slice(n),d[c]?d[c]+=o:d[++c]=o),d.length<2?f[0]?fee(f[0].x):dee(e):(e=f.length,function(u){for(var a=0,_;a<e;++a)d[(_=f[a]).i]=_.x(u);return d.join("")})}function bd(t,e){var n=typeof e,i;return e==null||n==="boolean"?k1(e):(n==="number"?la:n==="string"?(i=q_(e))?(e=i,HB):B8:e instanceof q_?HB:e instanceof Date?S8:v8(e)?WF:Array.isArray(e)?E8:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?x8:la)(t,e)}function uee(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}function hee(t,e){var n=I1(+t,+e);return function(i){var s=n(i);return s-360*Math.floor(s/360)}}function $y(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var xL=180/Math.PI,YB={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function k8(t,e,n,i,s,o){var c,d,f;return(c=Math.sqrt(t*t+e*e))&&(t/=c,e/=c),(f=t*n+e*i)&&(n-=t*f,i-=e*f),(d=Math.sqrt(n*n+i*i))&&(n/=d,i/=d,f/=d),t*i<e*n&&(t=-t,e=-e,f=-f,c=-c),{translateX:s,translateY:o,rotate:Math.atan2(e,t)*xL,skewX:Math.atan(f)*xL,scaleX:c,scaleY:d}}var hb;function pee(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?YB:k8(e.a,e.b,e.c,e.d,e.e,e.f)}function gee(t){return t==null||(hb||(hb=document.createElementNS("http://www.w3.org/2000/svg","g")),hb.setAttribute("transform",t),!(t=hb.transform.baseVal.consolidate()))?YB:(t=t.matrix,k8(t.a,t.b,t.c,t.d,t.e,t.f))}function I8(t,e,n,i){function s(u){return u.length?u.pop()+" ":""}function o(u,a,_,w,m,l){if(u!==_||a!==w){var T=m.push("translate(",null,e,null,n);l.push({i:T-4,x:la(u,_)},{i:T-2,x:la(a,w)})}else(_||w)&&m.push("translate("+_+e+w+n)}function c(u,a,_,w){u!==a?(u-a>180?a+=360:a-u>180&&(u+=360),w.push({i:_.push(s(_)+"rotate(",null,i)-2,x:la(u,a)})):a&&_.push(s(_)+"rotate("+a+i)}function d(u,a,_,w){u!==a?w.push({i:_.push(s(_)+"skewX(",null,i)-2,x:la(u,a)}):a&&_.push(s(_)+"skewX("+a+i)}function f(u,a,_,w,m,l){if(u!==_||a!==w){var T=m.push(s(m)+"scale(",null,",",null,")");l.push({i:T-4,x:la(u,_)},{i:T-2,x:la(a,w)})}else(_!==1||w!==1)&&m.push(s(m)+"scale("+_+","+w+")")}return function(u,a){var _=[],w=[];return u=t(u),a=t(a),o(u.translateX,u.translateY,a.translateX,a.translateY,_,w),c(u.rotate,a.rotate,_,w),d(u.skewX,a.skewX,_,w),f(u.scaleX,u.scaleY,a.scaleX,a.scaleY,_,w),u=a=null,function(m){for(var l=-1,T=w.length,b;++l<T;)_[(b=w[l]).i]=b.x(m);return _.join("")}}}var _ee=I8(pee,"px, ","px)","deg)"),yee=I8(gee,", ",")",")"),mee=1e-12;function BL(t){return((t=Math.exp(t))+1/t)/2}function wee(t){return((t=Math.exp(t))-1/t)/2}function bee(t){return((t=Math.exp(2*t))-1)/(t+1)}const Tee=function t(e,n,i){function s(o,c){var d=o[0],f=o[1],u=o[2],a=c[0],_=c[1],w=c[2],m=a-d,l=_-f,T=m*m+l*l,b,S;if(T<mee)S=Math.log(w/u)/e,b=function(M){return[d+M*m,f+M*l,u*Math.exp(e*M*S)]};else{var x=Math.sqrt(T),B=(w*w-u*u+i*T)/(2*u*n*x),F=(w*w-u*u-i*T)/(2*w*n*x),k=Math.log(Math.sqrt(B*B+1)-B),A=Math.log(Math.sqrt(F*F+1)-F);S=(A-k)/e,b=function(M){var R=M*S,P=BL(k),j=u/(n*x)*(P*bee(e*R+k)-wee(k));return[d+j*m,f+j*l,u*P/BL(e*R+k)]}}return b.duration=S*1e3*e/Math.SQRT2,b}return s.rho=function(o){var c=Math.max(.001,+o),d=c*c,f=d*d;return t(c,d,f)},s}(Math.SQRT2,2,4);function F8(t){return function(e,n){var i=t((e=X0(e)).h,(n=X0(n)).h),s=di(e.s,n.s),o=di(e.l,n.l),c=di(e.opacity,n.opacity);return function(d){return e.h=i(d),e.s=s(d),e.l=o(d),e.opacity=c(d),e+""}}}const vee=F8(I1);var Eee=F8(di);function See(t,e){var n=di((t=J0(t)).l,(e=J0(e)).l),i=di(t.a,e.a),s=di(t.b,e.b),o=di(t.opacity,e.opacity);return function(c){return t.l=n(c),t.a=i(c),t.b=s(c),t.opacity=o(c),t+""}}function O8(t){return function(e,n){var i=t((e=Q0(e)).h,(n=Q0(n)).h),s=di(e.c,n.c),o=di(e.l,n.l),c=di(e.opacity,n.opacity);return function(d){return e.h=i(d),e.c=s(d),e.l=o(d),e.opacity=c(d),e+""}}}const xee=O8(I1);var Bee=O8(di);function M8(t){return function e(n){n=+n;function i(s,o){var c=t((s=VB(s)).h,(o=VB(o)).h),d=di(s.s,o.s),f=di(s.l,o.l),u=di(s.opacity,o.opacity);return function(a){return s.h=c(a),s.s=d(a),s.l=f(Math.pow(a,n)),s.opacity=u(a),s+""}}return i.gamma=e,i}(1)}const kee=M8(I1);var Iee=M8(di);function YF(t,e){e===void 0&&(e=t,t=bd);for(var n=0,i=e.length-1,s=e[0],o=new Array(i<0?0:i);n<i;)o[n]=t(s,s=e[++n]);return function(c){var d=Math.max(0,Math.min(i-1,Math.floor(c*=i)));return o[d](c-d)}}function Fee(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n}const Oee=Object.freeze(Object.defineProperty({__proto__:null,interpolate:bd,interpolateArray:cee,interpolateBasis:m8,interpolateBasisClosed:w8,interpolateDate:S8,interpolateDiscrete:uee,interpolateHue:hee,interpolateNumber:la,interpolateNumberArray:WF,interpolateObject:x8,interpolateRound:$y,interpolateString:B8,interpolateTransformCss:_ee,interpolateTransformSvg:yee,interpolateZoom:Tee,interpolateRgb:HB,interpolateRgbBasis:oee,interpolateRgbBasisClosed:lee,interpolateHsl:vee,interpolateHslLong:Eee,interpolateLab:See,interpolateHcl:xee,interpolateHclLong:Bee,interpolateCubehelix:kee,interpolateCubehelixLong:Iee,piecewise:YF,quantize:Fee},Symbol.toStringTag,{value:"Module"}));var Kh=0,Zg=0,xg=0,A8=1e3,Z0,e_,eT=0,qf=0,F1=0,V_=typeof performance=="object"&&performance.now?performance:Date,N8=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function XF(){return qf||(N8(Mee),qf=V_.now()+F1)}function Mee(){qf=0}function tT(){this._call=this._time=this._next=null}tT.prototype=C8.prototype={constructor:tT,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?XF():+n)+(e==null?0:+e),!this._next&&e_!==this&&(e_?e_._next=this:Z0=this,e_=this),this._call=t,this._time=n,XB()},stop:function(){this._call&&(this._call=null,this._time=1/0,XB())}};function C8(t,e,n){var i=new tT;return i.restart(t,e,n),i}function Aee(){XF(),++Kh;for(var t=Z0,e;t;)(e=qf-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Kh}function kL(){qf=(eT=V_.now())+F1,Kh=Zg=0;try{Aee()}finally{Kh=0,Cee(),qf=0}}function Nee(){var t=V_.now(),e=t-eT;e>A8&&(F1-=e,eT=t)}function Cee(){for(var t,e=Z0,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Z0=n);e_=t,XB(i)}function XB(t){if(!Kh){Zg&&(Zg=clearTimeout(Zg));var e=t-qf;e>24?(t<1/0&&(Zg=setTimeout(kL,t-V_.now()-F1)),xg&&(xg=clearInterval(xg))):(xg||(eT=V_.now(),xg=setInterval(Nee,A8)),Kh=1,N8(kL))}}function Ree(t,e,n){var i=new tT,s=e;return e==null?(i.restart(t,e,n),i):(i._restart=i.restart,i.restart=function(o,c,d){c=+c,d=d==null?XF():+d,i._restart(function f(u){u+=s,i._restart(f,s+=c,d),o(u)},c,d)},i.restart(t,e,n),i)}const KB=Math.PI,JB=2*KB,sf=1e-6,Lee=JB-sf;function QB(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Td(){return new QB}QB.prototype=Td.prototype={constructor:QB,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(t,e,n,i,s,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +i+","+(this._x1=+s)+","+(this._y1=+o)},arcTo:function(t,e,n,i,s){t=+t,e=+e,n=+n,i=+i,s=+s;var o=this._x1,c=this._y1,d=n-t,f=i-e,u=o-t,a=c-e,_=u*u+a*a;if(s<0)throw new Error("negative radius: "+s);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(_>sf)if(!(Math.abs(a*d-f*u)>sf)||!s)this._+="L"+(this._x1=t)+","+(this._y1=e);else{var w=n-o,m=i-c,l=d*d+f*f,T=w*w+m*m,b=Math.sqrt(l),S=Math.sqrt(_),x=s*Math.tan((KB-Math.acos((l+_-T)/(2*b*S)))/2),B=x/S,F=x/b;Math.abs(B-1)>sf&&(this._+="L"+(t+B*u)+","+(e+B*a)),this._+="A"+s+","+s+",0,0,"+ +(a*w>u*m)+","+(this._x1=t+F*d)+","+(this._y1=e+F*f)}},arc:function(t,e,n,i,s,o){t=+t,e=+e,n=+n,o=!!o;var c=n*Math.cos(i),d=n*Math.sin(i),f=t+c,u=e+d,a=1^o,_=o?i-s:s-i;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+f+","+u:(Math.abs(this._x1-f)>sf||Math.abs(this._y1-u)>sf)&&(this._+="L"+f+","+u),n&&(_<0&&(_=_%JB+JB),_>Lee?this._+="A"+n+","+n+",0,1,"+a+","+(t-c)+","+(e-d)+"A"+n+","+n+",0,1,"+a+","+(this._x1=f)+","+(this._y1=u):_>sf&&(this._+="A"+n+","+n+",0,"+ +(_>=KB)+","+a+","+(this._x1=t+n*Math.cos(s))+","+(this._y1=e+n*Math.sin(s))))},rect:function(t,e,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};const Al=11102230246251565e-32,ki=134217729,Pee=(3+8*Al)*Al;function ex(t,e,n,i,s){let o,c,d,f,u=e[0],a=i[0],_=0,w=0;a>u==a>-u?(o=u,u=e[++_]):(o=a,a=i[++w]);let m=0;if(_<t&&w<n)for(a>u==a>-u?(c=u+o,d=o-(c-u),u=e[++_]):(c=a+o,d=o-(c-a),a=i[++w]),o=c,d!==0&&(s[m++]=d);_<t&&w<n;)a>u==a>-u?(c=o+u,f=c-o,d=o-(c-f)+(u-f),u=e[++_]):(c=o+a,f=c-o,d=o-(c-f)+(a-f),a=i[++w]),o=c,d!==0&&(s[m++]=d);for(;_<t;)c=o+u,f=c-o,d=o-(c-f)+(u-f),u=e[++_],o=c,d!==0&&(s[m++]=d);for(;w<n;)c=o+a,f=c-o,d=o-(c-f)+(a-f),a=i[++w],o=c,d!==0&&(s[m++]=d);return(o!==0||m===0)&&(s[m++]=o),m}function Dee(t,e){let n=e[0];for(let i=1;i<t;i++)n+=e[i];return n}function qy(t){return new Float64Array(t)}const jee=(3+16*Al)*Al,Uee=(2+12*Al)*Al,zee=(9+64*Al)*Al*Al,Gu=qy(4),IL=qy(8),FL=qy(12),OL=qy(16),Ki=qy(4);function $ee(t,e,n,i,s,o,c){let d,f,u,a,_,w,m,l,T,b,S,x,B,F,k,A,M,R;const P=t-s,j=n-s,D=e-o,z=i-o;F=P*z,w=ki*P,m=w-(w-P),l=P-m,w=ki*z,T=w-(w-z),b=z-T,k=l*b-(F-m*T-l*T-m*b),A=D*j,w=ki*D,m=w-(w-D),l=D-m,w=ki*j,T=w-(w-j),b=j-T,M=l*b-(A-m*T-l*T-m*b),S=k-M,_=k-S,Gu[0]=k-(S+_)+(_-M),x=F+S,_=x-F,B=F-(x-_)+(S-_),S=B-A,_=B-S,Gu[1]=B-(S+_)+(_-A),R=x+S,_=R-x,Gu[2]=x-(R-_)+(S-_),Gu[3]=R;let $=Dee(4,Gu),K=Uee*c;if($>=K||-$>=K||(_=t-P,d=t-(P+_)+(_-s),_=n-j,u=n-(j+_)+(_-s),_=e-D,f=e-(D+_)+(_-o),_=i-z,a=i-(z+_)+(_-o),d===0&&f===0&&u===0&&a===0)||(K=zee*c+Pee*Math.abs($),$+=P*a+z*d-(D*u+j*f),$>=K||-$>=K))return $;F=d*z,w=ki*d,m=w-(w-d),l=d-m,w=ki*z,T=w-(w-z),b=z-T,k=l*b-(F-m*T-l*T-m*b),A=f*j,w=ki*f,m=w-(w-f),l=f-m,w=ki*j,T=w-(w-j),b=j-T,M=l*b-(A-m*T-l*T-m*b),S=k-M,_=k-S,Ki[0]=k-(S+_)+(_-M),x=F+S,_=x-F,B=F-(x-_)+(S-_),S=B-A,_=B-S,Ki[1]=B-(S+_)+(_-A),R=x+S,_=R-x,Ki[2]=x-(R-_)+(S-_),Ki[3]=R;const H=ex(4,Gu,4,Ki,IL);F=P*a,w=ki*P,m=w-(w-P),l=P-m,w=ki*a,T=w-(w-a),b=a-T,k=l*b-(F-m*T-l*T-m*b),A=D*u,w=ki*D,m=w-(w-D),l=D-m,w=ki*u,T=w-(w-u),b=u-T,M=l*b-(A-m*T-l*T-m*b),S=k-M,_=k-S,Ki[0]=k-(S+_)+(_-M),x=F+S,_=x-F,B=F-(x-_)+(S-_),S=B-A,_=B-S,Ki[1]=B-(S+_)+(_-A),R=x+S,_=R-x,Ki[2]=x-(R-_)+(S-_),Ki[3]=R;const W=ex(H,IL,4,Ki,FL);F=d*a,w=ki*d,m=w-(w-d),l=d-m,w=ki*a,T=w-(w-a),b=a-T,k=l*b-(F-m*T-l*T-m*b),A=f*u,w=ki*f,m=w-(w-f),l=f-m,w=ki*u,T=w-(w-u),b=u-T,M=l*b-(A-m*T-l*T-m*b),S=k-M,_=k-S,Ki[0]=k-(S+_)+(_-M),x=F+S,_=x-F,B=F-(x-_)+(S-_),S=B-A,_=B-S,Ki[1]=B-(S+_)+(_-A),R=x+S,_=R-x,Ki[2]=x-(R-_)+(S-_),Ki[3]=R;const J=ex(W,FL,4,Ki,OL);return OL[J-1]}function pb(t,e,n,i,s,o){const c=(e-o)*(n-s),d=(t-s)*(i-o),f=c-d;if(c===0||d===0||c>0!=d>0)return f;const u=Math.abs(c+d);return Math.abs(f)>=jee*u?f:-$ee(t,e,n,i,s,o,u)}const ML=Math.pow(2,-52),gb=new Uint32Array(512);class nT{static from(e,n=Wee,i=Yee){const s=e.length,o=new Float64Array(s*2);for(let c=0;c<s;c++){const d=e[c];o[2*c]=n(d),o[2*c+1]=i(d)}return new nT(o)}constructor(e){const n=e.length>>1;if(n>0&&typeof e[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=e;const i=Math.max(2*n-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:e,_hullPrev:n,_hullNext:i,_hullTri:s,_hullHash:o}=this,c=e.length>>1;let d=1/0,f=1/0,u=-1/0,a=-1/0;for(let j=0;j<c;j++){const D=e[2*j],z=e[2*j+1];D<d&&(d=D),z<f&&(f=z),D>u&&(u=D),z>a&&(a=z),this._ids[j]=j}const _=(d+u)/2,w=(f+a)/2;let m=1/0,l,T,b;for(let j=0;j<c;j++){const D=tx(_,w,e[2*j],e[2*j+1]);D<m&&(l=j,m=D)}const S=e[2*l],x=e[2*l+1];m=1/0;for(let j=0;j<c;j++){if(j===l)continue;const D=tx(S,x,e[2*j],e[2*j+1]);D<m&&D>0&&(T=j,m=D)}let B=e[2*T],F=e[2*T+1],k=1/0;for(let j=0;j<c;j++){if(j===l||j===T)continue;const D=Vee(S,x,B,F,e[2*j],e[2*j+1]);D<k&&(b=j,k=D)}let A=e[2*b],M=e[2*b+1];if(k===1/0){for(let z=0;z<c;z++)this._dists[z]=e[2*z]-e[0]||e[2*z+1]-e[1];hh(this._ids,this._dists,0,c-1);const j=new Uint32Array(c);let D=0;for(let z=0,$=-1/0;z<c;z++){const K=this._ids[z];this._dists[K]>$&&(j[D++]=K,$=this._dists[K])}this.hull=j.subarray(0,D),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(pb(S,x,B,F,A,M)<0){const j=T,D=B,z=F;T=b,B=A,F=M,b=j,A=D,M=z}const R=Hee(S,x,B,F,A,M);this._cx=R.x,this._cy=R.y;for(let j=0;j<c;j++)this._dists[j]=tx(e[2*j],e[2*j+1],R.x,R.y);hh(this._ids,this._dists,0,c-1),this._hullStart=l;let P=3;i[l]=n[b]=T,i[T]=n[l]=b,i[b]=n[T]=l,s[l]=0,s[T]=1,s[b]=2,o.fill(-1),o[this._hashKey(S,x)]=l,o[this._hashKey(B,F)]=T,o[this._hashKey(A,M)]=b,this.trianglesLen=0,this._addTriangle(l,T,b,-1,-1,-1);for(let j=0,D,z;j<this._ids.length;j++){const $=this._ids[j],K=e[2*$],H=e[2*$+1];if(j>0&&Math.abs(K-D)<=ML&&Math.abs(H-z)<=ML||(D=K,z=H,$===l||$===T||$===b))continue;let W=0;for(let se=0,Ne=this._hashKey(K,H);se<this._hashSize&&(W=o[(Ne+se)%this._hashSize],!(W!==-1&&W!==i[W]));se++);W=n[W];let J=W,V;for(;V=i[J],pb(K,H,e[2*J],e[2*J+1],e[2*V],e[2*V+1])>=0;)if(J=V,J===W){J=-1;break}if(J===-1)continue;let le=this._addTriangle(J,$,i[J],-1,-1,s[J]);s[$]=this._legalize(le+2),s[J]=le,P++;let pe=i[J];for(;V=i[pe],pb(K,H,e[2*pe],e[2*pe+1],e[2*V],e[2*V+1])<0;)le=this._addTriangle(pe,$,V,s[$],-1,s[pe]),s[$]=this._legalize(le+2),i[pe]=pe,P--,pe=V;if(J===W)for(;V=n[J],pb(K,H,e[2*V],e[2*V+1],e[2*J],e[2*J+1])<0;)le=this._addTriangle(V,$,J,-1,s[J],s[V]),this._legalize(le+2),s[V]=le,i[J]=J,P--,J=V;this._hullStart=n[$]=J,i[J]=n[pe]=$,i[$]=pe,o[this._hashKey(K,H)]=$,o[this._hashKey(e[2*J],e[2*J+1])]=J}this.hull=new Uint32Array(P);for(let j=0,D=this._hullStart;j<P;j++)this.hull[j]=D,D=i[D];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,n){return Math.floor(qee(e-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:n,_halfedges:i,coords:s}=this;let o=0,c=0;for(;;){const d=i[e],f=e-e%3;if(c=f+(e+2)%3,d===-1){if(o===0)break;e=gb[--o];continue}const u=d-d%3,a=f+(e+1)%3,_=u+(d+2)%3,w=n[c],m=n[e],l=n[a],T=n[_];if(Gee(s[2*w],s[2*w+1],s[2*m],s[2*m+1],s[2*l],s[2*l+1],s[2*T],s[2*T+1])){n[e]=T,n[d]=w;const S=i[_];if(S===-1){let B=this._hullStart;do{if(this._hullTri[B]===_){this._hullTri[B]=e;break}B=this._hullPrev[B]}while(B!==this._hullStart)}this._link(e,S),this._link(d,i[c]),this._link(c,_);const x=u+(d+1)%3;o<gb.length&&(gb[o++]=x)}else{if(o===0)break;e=gb[--o]}}return c}_link(e,n){this._halfedges[e]=n,n!==-1&&(this._halfedges[n]=e)}_addTriangle(e,n,i,s,o,c){const d=this.trianglesLen;return this._triangles[d]=e,this._triangles[d+1]=n,this._triangles[d+2]=i,this._link(d,s),this._link(d+1,o),this._link(d+2,c),this.trianglesLen+=3,d}}function qee(t,e){const n=t/(Math.abs(t)+Math.abs(e));return(e>0?3-n:1+n)/4}function tx(t,e,n,i){const s=t-n,o=e-i;return s*s+o*o}function Gee(t,e,n,i,s,o,c,d){const f=t-c,u=e-d,a=n-c,_=i-d,w=s-c,m=o-d,l=f*f+u*u,T=a*a+_*_,b=w*w+m*m;return f*(_*b-T*m)-u*(a*b-T*w)+l*(a*m-_*w)<0}function Vee(t,e,n,i,s,o){const c=n-t,d=i-e,f=s-t,u=o-e,a=c*c+d*d,_=f*f+u*u,w=.5/(c*u-d*f),m=(u*a-d*_)*w,l=(c*_-f*a)*w;return m*m+l*l}function Hee(t,e,n,i,s,o){const c=n-t,d=i-e,f=s-t,u=o-e,a=c*c+d*d,_=f*f+u*u,w=.5/(c*u-d*f),m=t+(u*a-d*_)*w,l=e+(c*_-f*a)*w;return{x:m,y:l}}function hh(t,e,n,i){if(i-n<=20)for(let s=n+1;s<=i;s++){const o=t[s],c=e[o];let d=s-1;for(;d>=n&&e[t[d]]>c;)t[d+1]=t[d--];t[d+1]=o}else{const s=n+i>>1;let o=n+1,c=i;Bg(t,s,o),e[t[n]]>e[t[i]]&&Bg(t,n,i),e[t[o]]>e[t[i]]&&Bg(t,o,i),e[t[n]]>e[t[o]]&&Bg(t,n,o);const d=t[o],f=e[d];for(;;){do o++;while(e[t[o]]<f);do c--;while(e[t[c]]>f);if(c<o)break;Bg(t,o,c)}t[n+1]=t[c],t[c]=d,i-o+1>=c-n?(hh(t,e,o,i),hh(t,e,n,c-1)):(hh(t,e,n,c-1),hh(t,e,o,i))}}function Bg(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function Wee(t){return t[0]}function Yee(t){return t[1]}const AL=1e-6;class gf{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,n){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,n){this._+=`L${this._x1=+e},${this._y1=+n}`}arc(e,n,i){e=+e,n=+n,i=+i;const s=e+i,o=n;if(i<0)throw new Error("negative radius");this._x1===null?this._+=`M${s},${o}`:(Math.abs(this._x1-s)>AL||Math.abs(this._y1-o)>AL)&&(this._+="L"+s+","+o),i&&(this._+=`A${i},${i},0,1,1,${e-i},${n}A${i},${i},0,1,1,${this._x1=s},${this._y1=o}`)}rect(e,n,i,s){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${+i}v${+s}h${-i}Z`}value(){return this._||null}}class ZB{constructor(){this._=[]}moveTo(e,n){this._.push([e,n])}closePath(){this._.push(this._[0].slice())}lineTo(e,n){this._.push([e,n])}value(){return this._.length?this._:null}}class Xee{constructor(e,[n,i,s,o]=[0,0,960,500]){if(!((s=+s)>=(n=+n))||!((o=+o)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(e.points.length*2),this.vectors=new Float64Array(e.points.length*2),this.xmax=s,this.xmin=n,this.ymax=o,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:e,hull:n,triangles:i},vectors:s}=this,o=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let m=0,l=0,T=i.length,b,S;m<T;m+=3,l+=2){const x=i[m]*2,B=i[m+1]*2,F=i[m+2]*2,k=e[x],A=e[x+1],M=e[B],R=e[B+1],P=e[F],j=e[F+1],D=M-k,z=R-A,$=P-k,K=j-A,H=(D*K-z*$)*2;if(Math.abs(H)<1e-9){let W=1e9;const J=i[0]*2;W*=Math.sign((e[J]-k)*K-(e[J+1]-A)*$),b=(k+P)/2-W*K,S=(A+j)/2+W*$}else{const W=1/H,J=D*D+z*z,V=$*$+K*K;b=k+(K*J-z*V)*W,S=A+(D*V-$*J)*W}o[l]=b,o[l+1]=S}let c=n[n.length-1],d,f=c*4,u,a=e[2*c],_,w=e[2*c+1];s.fill(0);for(let m=0;m<n.length;++m)c=n[m],d=f,u=a,_=w,f=c*4,a=e[2*c],w=e[2*c+1],s[d+2]=s[f]=_-w,s[d+3]=s[f+1]=a-u}render(e){const n=e==null?e=new gf:void 0,{delaunay:{halfedges:i,inedges:s,hull:o},circumcenters:c,vectors:d}=this;if(o.length<=1)return null;for(let a=0,_=i.length;a<_;++a){const w=i[a];if(w<a)continue;const m=Math.floor(a/3)*2,l=Math.floor(w/3)*2,T=c[m],b=c[m+1],S=c[l],x=c[l+1];this._renderSegment(T,b,S,x,e)}let f,u=o[o.length-1];for(let a=0;a<o.length;++a){f=u,u=o[a];const _=Math.floor(s[u]/3)*2,w=c[_],m=c[_+1],l=f*4,T=this._project(w,m,d[l+2],d[l+3]);T&&this._renderSegment(w,m,T[0],T[1],e)}return n&&n.value()}renderBounds(e){const n=e==null?e=new gf:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(e,n){const i=n==null?n=new gf:void 0,s=this._clip(e);if(s===null||!s.length)return;n.moveTo(s[0],s[1]);let o=s.length;for(;s[0]===s[o-2]&&s[1]===s[o-1]&&o>1;)o-=2;for(let c=2;c<o;c+=2)(s[c]!==s[c-2]||s[c+1]!==s[c-1])&&n.lineTo(s[c],s[c+1]);return n.closePath(),i&&i.value()}*cellPolygons(){const{delaunay:{points:e}}=this;for(let n=0,i=e.length/2;n<i;++n){const s=this.cellPolygon(n);s&&(s.index=n,yield s)}}cellPolygon(e){const n=new ZB;return this.renderCell(e,n),n.value()}_renderSegment(e,n,i,s,o){let c;const d=this._regioncode(e,n),f=this._regioncode(i,s);d===0&&f===0?(o.moveTo(e,n),o.lineTo(i,s)):(c=this._clipSegment(e,n,i,s,d,f))&&(o.moveTo(c[0],c[1]),o.lineTo(c[2],c[3]))}contains(e,n,i){return n=+n,n!==n||(i=+i,i!==i)?!1:this.delaunay._step(e,n,i)===e}*neighbors(e){const n=this._clip(e);if(n)for(const i of this.delaunay.neighbors(e)){const s=this._clip(i);if(s){e:for(let o=0,c=n.length;o<c;o+=2)for(let d=0,f=s.length;d<f;d+=2)if(n[o]==s[d]&&n[o+1]==s[d+1]&&n[(o+2)%c]==s[(d+f-2)%f]&&n[(o+3)%c]==s[(d+f-1)%f]){yield i;break e}}}}_cell(e){const{circumcenters:n,delaunay:{inedges:i,halfedges:s,triangles:o}}=this,c=i[e];if(c===-1)return null;const d=[];let f=c;do{const u=Math.floor(f/3);if(d.push(n[u*2],n[u*2+1]),f=f%3===2?f-2:f+1,o[f]!==e)break;f=s[f]}while(f!==c&&f!==-1);return d}_clip(e){if(e===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(e);if(n===null)return null;const{vectors:i}=this,s=e*4;return i[s]||i[s+1]?this._clipInfinite(e,n,i[s],i[s+1],i[s+2],i[s+3]):this._clipFinite(e,n)}_clipFinite(e,n){const i=n.length;let s=null,o,c,d=n[i-2],f=n[i-1],u,a=this._regioncode(d,f),_,w=0;for(let m=0;m<i;m+=2)if(o=d,c=f,d=n[m],f=n[m+1],u=a,a=this._regioncode(d,f),u===0&&a===0)_=w,w=0,s?s.push(d,f):s=[d,f];else{let l,T,b,S,x;if(u===0){if((l=this._clipSegment(o,c,d,f,u,a))===null)continue;[T,b,S,x]=l}else{if((l=this._clipSegment(d,f,o,c,a,u))===null)continue;[S,x,T,b]=l,_=w,w=this._edgecode(T,b),_&&w&&this._edge(e,_,w,s,s.length),s?s.push(T,b):s=[T,b]}_=w,w=this._edgecode(S,x),_&&w&&this._edge(e,_,w,s,s.length),s?s.push(S,x):s=[S,x]}if(s)_=w,w=this._edgecode(s[0],s[1]),_&&w&&this._edge(e,_,w,s,s.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return s}_clipSegment(e,n,i,s,o,c){for(;;){if(o===0&&c===0)return[e,n,i,s];if(o&c)return null;let d,f,u=o||c;u&8?(d=e+(i-e)*(this.ymax-n)/(s-n),f=this.ymax):u&4?(d=e+(i-e)*(this.ymin-n)/(s-n),f=this.ymin):u&2?(f=n+(s-n)*(this.xmax-e)/(i-e),d=this.xmax):(f=n+(s-n)*(this.xmin-e)/(i-e),d=this.xmin),o?(e=d,n=f,o=this._regioncode(e,n)):(i=d,s=f,c=this._regioncode(i,s))}}_clipInfinite(e,n,i,s,o,c){let d=Array.from(n),f;if((f=this._project(d[0],d[1],i,s))&&d.unshift(f[0],f[1]),(f=this._project(d[d.length-2],d[d.length-1],o,c))&&d.push(f[0],f[1]),d=this._clipFinite(e,d))for(let u=0,a=d.length,_,w=this._edgecode(d[a-2],d[a-1]);u<a;u+=2)_=w,w=this._edgecode(d[u],d[u+1]),_&&w&&(u=this._edge(e,_,w,d,u),a=d.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(d=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return d}_edge(e,n,i,s,o){for(;n!==i;){let c,d;switch(n){case 5:n=4;continue;case 4:n=6,c=this.xmax,d=this.ymin;break;case 6:n=2;continue;case 2:n=10,c=this.xmax,d=this.ymax;break;case 10:n=8;continue;case 8:n=9,c=this.xmin,d=this.ymax;break;case 9:n=1;continue;case 1:n=5,c=this.xmin,d=this.ymin;break}(s[o]!==c||s[o+1]!==d)&&this.contains(e,c,d)&&(s.splice(o,0,c,d),o+=2)}if(s.length>4)for(let c=0;c<s.length;c+=2){const d=(c+2)%s.length,f=(c+4)%s.length;(s[c]===s[d]&&s[d]===s[f]||s[c+1]===s[d+1]&&s[d+1]===s[f+1])&&(s.splice(d,2),c-=2)}return o}_project(e,n,i,s){let o=1/0,c,d,f;if(s<0){if(n<=this.ymin)return null;(c=(this.ymin-n)/s)<o&&(f=this.ymin,d=e+(o=c)*i)}else if(s>0){if(n>=this.ymax)return null;(c=(this.ymax-n)/s)<o&&(f=this.ymax,d=e+(o=c)*i)}if(i>0){if(e>=this.xmax)return null;(c=(this.xmax-e)/i)<o&&(d=this.xmax,f=n+(o=c)*s)}else if(i<0){if(e<=this.xmin)return null;(c=(this.xmin-e)/i)<o&&(d=this.xmin,f=n+(o=c)*s)}return[d,f]}_edgecode(e,n){return(e===this.xmin?1:e===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(e,n){return(e<this.xmin?1:e>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}}const Kee=2*Math.PI,Vu=Math.pow;function Jee(t){return t[0]}function Qee(t){return t[1]}function Zee(t){const{triangles:e,coords:n}=t;for(let i=0;i<e.length;i+=3){const s=2*e[i],o=2*e[i+1],c=2*e[i+2];if((n[c]-n[s])*(n[o+1]-n[s+1])-(n[o]-n[s])*(n[c+1]-n[s+1])>1e-10)return!1}return!0}function ete(t,e,n){return[t+Math.sin(t+e)*n,e+Math.cos(t-e)*n]}class KF{static from(e,n=Jee,i=Qee,s){return new KF("length"in e?tte(e,n,i,s):Float64Array.from(nte(e,n,i,s)))}constructor(e){this._delaunator=new nT(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const e=this._delaunator,n=this.points;if(e.hull&&e.hull.length>2&&Zee(e)){this.collinear=Int32Array.from({length:n.length/2},(w,m)=>m).sort((w,m)=>n[2*w]-n[2*m]||n[2*w+1]-n[2*m+1]);const f=this.collinear[0],u=this.collinear[this.collinear.length-1],a=[n[2*f],n[2*f+1],n[2*u],n[2*u+1]],_=1e-8*Math.hypot(a[3]-a[1],a[2]-a[0]);for(let w=0,m=n.length/2;w<m;++w){const l=ete(n[2*w],n[2*w+1],_);n[2*w]=l[0],n[2*w+1]=l[1]}this._delaunator=new nT(n)}else delete this.collinear;const i=this.halfedges=this._delaunator.halfedges,s=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,c=this.inedges.fill(-1),d=this._hullIndex.fill(-1);for(let f=0,u=i.length;f<u;++f){const a=o[f%3===2?f-2:f+1];(i[f]===-1||c[a]===-1)&&(c[a]=f)}for(let f=0,u=s.length;f<u;++f)d[s[f]]=f;s.length<=2&&s.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=s[0],c[s[0]]=1,s.length===2&&(c[s[1]]=0,this.triangles[1]=s[1],this.triangles[2]=s[1]))}voronoi(e){return new Xee(this,e)}*neighbors(e){const{inedges:n,hull:i,_hullIndex:s,halfedges:o,triangles:c,collinear:d}=this;if(d){const _=d.indexOf(e);_>0&&(yield d[_-1]),_<d.length-1&&(yield d[_+1]);return}const f=n[e];if(f===-1)return;let u=f,a=-1;do{if(yield a=c[u],u=u%3===2?u-2:u+1,c[u]!==e)return;if(u=o[u],u===-1){const _=i[(s[e]+1)%i.length];_!==a&&(yield _);return}}while(u!==f)}find(e,n,i=0){if(e=+e,e!==e||(n=+n,n!==n))return-1;const s=i;let o;for(;(o=this._step(i,e,n))>=0&&o!==i&&o!==s;)i=o;return o}_step(e,n,i){const{inedges:s,hull:o,_hullIndex:c,halfedges:d,triangles:f,points:u}=this;if(s[e]===-1||!u.length)return(e+1)%(u.length>>1);let a=e,_=Vu(n-u[e*2],2)+Vu(i-u[e*2+1],2);const w=s[e];let m=w;do{let l=f[m];const T=Vu(n-u[l*2],2)+Vu(i-u[l*2+1],2);if(T<_&&(_=T,a=l),m=m%3===2?m-2:m+1,f[m]!==e)break;if(m=d[m],m===-1){if(m=o[(c[e]+1)%o.length],m!==l&&Vu(n-u[m*2],2)+Vu(i-u[m*2+1],2)<_)return m;break}}while(m!==w);return a}render(e){const n=e==null?e=new gf:void 0,{points:i,halfedges:s,triangles:o}=this;for(let c=0,d=s.length;c<d;++c){const f=s[c];if(f<c)continue;const u=o[c]*2,a=o[f]*2;e.moveTo(i[u],i[u+1]),e.lineTo(i[a],i[a+1])}return this.renderHull(e),n&&n.value()}renderPoints(e,n){n===void 0&&(!e||typeof e.moveTo!="function")&&(n=e,e=null),n=n==null?2:+n;const i=e==null?e=new gf:void 0,{points:s}=this;for(let o=0,c=s.length;o<c;o+=2){const d=s[o],f=s[o+1];e.moveTo(d+n,f),e.arc(d,f,n,0,Kee)}return i&&i.value()}renderHull(e){const n=e==null?e=new gf:void 0,{hull:i,points:s}=this,o=i[0]*2,c=i.length;e.moveTo(s[o],s[o+1]);for(let d=1;d<c;++d){const f=2*i[d];e.lineTo(s[f],s[f+1])}return e.closePath(),n&&n.value()}hullPolygon(){const e=new ZB;return this.renderHull(e),e.value()}renderTriangle(e,n){const i=n==null?n=new gf:void 0,{points:s,triangles:o}=this,c=o[e*=3]*2,d=o[e+1]*2,f=o[e+2]*2;return n.moveTo(s[c],s[c+1]),n.lineTo(s[d],s[d+1]),n.lineTo(s[f],s[f+1]),n.closePath(),i&&i.value()}*trianglePolygons(){const{triangles:e}=this;for(let n=0,i=e.length/3;n<i;++n)yield this.trianglePolygon(n)}trianglePolygon(e){const n=new ZB;return this.renderTriangle(e,n),n.value()}}function tte(t,e,n,i){const s=t.length,o=new Float64Array(s*2);for(let c=0;c<s;++c){const d=t[c];o[c*2]=e.call(i,d,c,t),o[c*2+1]=n.call(i,d,c,t)}return o}function*nte(t,e,n,i){let s=0;for(const o of t)yield e.call(i,o,s,t),yield n.call(i,o,s,t),++s}var NL={},nx={},ix=34,kg=10,sx=13;function R8(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function ite(t,e){var n=R8(t);return function(i,s){return e(n(i),s,t)}}function CL(t){var e=Object.create(null),n=[];return t.forEach(function(i){for(var s in i)s in e||n.push(e[s]=s)}),n}function _s(t,e){var n=t+"",i=n.length;return i<e?new Array(e-i+1).join(0)+n:n}function ste(t){return t<0?"-"+_s(-t,6):t>9999?"+"+_s(t,6):_s(t,4)}function rte(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),i=t.getUTCSeconds(),s=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":ste(t.getUTCFullYear())+"-"+_s(t.getUTCMonth()+1,2)+"-"+_s(t.getUTCDate(),2)+(s?"T"+_s(e,2)+":"+_s(n,2)+":"+_s(i,2)+"."+_s(s,3)+"Z":i?"T"+_s(e,2)+":"+_s(n,2)+":"+_s(i,2)+"Z":n||e?"T"+_s(e,2)+":"+_s(n,2)+"Z":"")}function ate(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function i(_,w){var m,l,T=s(_,function(b,S){if(m)return m(b,S-1);l=b,m=w?ite(b,w):R8(b)});return T.columns=l||[],T}function s(_,w){var m=[],l=_.length,T=0,b=0,S,x=l<=0,B=!1;_.charCodeAt(l-1)===kg&&--l,_.charCodeAt(l-1)===sx&&--l;function F(){if(x)return nx;if(B)return B=!1,NL;var A,M=T,R;if(_.charCodeAt(M)===ix){for(;T++<l&&_.charCodeAt(T)!==ix||_.charCodeAt(++T)===ix;);return(A=T)>=l?x=!0:(R=_.charCodeAt(T++))===kg?B=!0:R===sx&&(B=!0,_.charCodeAt(T)===kg&&++T),_.slice(M+1,A-1).replace(/""/g,'"')}for(;T<l;){if((R=_.charCodeAt(A=T++))===kg)B=!0;else if(R===sx)B=!0,_.charCodeAt(T)===kg&&++T;else if(R!==n)continue;return _.slice(M,A)}return x=!0,_.slice(M,l)}for(;(S=F())!==nx;){for(var k=[];S!==NL&&S!==nx;)k.push(S),S=F();w&&(k=w(k,b++))==null||m.push(k)}return m}function o(_,w){return _.map(function(m){return w.map(function(l){return a(m[l])}).join(t)})}function c(_,w){return w==null&&(w=CL(_)),[w.map(a).join(t)].concat(o(_,w)).join(`
`)}function d(_,w){return w==null&&(w=CL(_)),o(_,w).join(`
`)}function f(_){return _.map(u).join(`
`)}function u(_){return _.map(a).join(t)}function a(_){return _==null?"":_ instanceof Date?rte(_):e.test(_+="")?'"'+_.replace(/"/g,'""')+'"':_}return{parse:i,parseRows:s,format:c,formatBody:d,formatRows:f,formatRow:u,formatValue:a}}function ote(t,e){var n,i=1;t==null&&(t=0),e==null&&(e=0);function s(){var o,c=n.length,d,f=0,u=0;for(o=0;o<c;++o)d=n[o],f+=d.x,u+=d.y;for(f=(f/c-t)*i,u=(u/c-e)*i,o=0;o<c;++o)d=n[o],d.x-=f,d.y-=u}return s.initialize=function(o){n=o},s.x=function(o){return arguments.length?(t=+o,s):t},s.y=function(o){return arguments.length?(e=+o,s):e},s.strength=function(o){return arguments.length?(i=+o,s):i},s}function lte(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return L8(this.cover(e,n),e,n,t)}function L8(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var s,o=t._root,c={data:i},d=t._x0,f=t._y0,u=t._x1,a=t._y1,_,w,m,l,T,b,S,x;if(!o)return t._root=c,t;for(;o.length;)if((T=e>=(_=(d+u)/2))?d=_:u=_,(b=n>=(w=(f+a)/2))?f=w:a=w,s=o,!(o=o[S=b<<1|T]))return s[S]=c,t;if(m=+t._x.call(null,o.data),l=+t._y.call(null,o.data),e===m&&n===l)return c.next=o,s?s[S]=c:t._root=c,t;do s=s?s[S]=new Array(4):t._root=new Array(4),(T=e>=(_=(d+u)/2))?d=_:u=_,(b=n>=(w=(f+a)/2))?f=w:a=w;while((S=b<<1|T)===(x=(l>=w)<<1|m>=_));return s[x]=o,s[S]=c,t}function cte(t){var e,n,i=t.length,s,o,c=new Array(i),d=new Array(i),f=1/0,u=1/0,a=-1/0,_=-1/0;for(n=0;n<i;++n)isNaN(s=+this._x.call(null,e=t[n]))||isNaN(o=+this._y.call(null,e))||(c[n]=s,d[n]=o,s<f&&(f=s),s>a&&(a=s),o<u&&(u=o),o>_&&(_=o));if(f>a||u>_)return this;for(this.cover(f,u).cover(a,_),n=0;n<i;++n)L8(this,c[n],d[n],t[n]);return this}function dte(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,s=this._x1,o=this._y1;if(isNaN(n))s=(n=Math.floor(t))+1,o=(i=Math.floor(e))+1;else{for(var c=s-n||1,d=this._root,f,u;n>t||t>=s||i>e||e>=o;)switch(u=(e<i)<<1|t<n,f=new Array(4),f[u]=d,d=f,c*=2,u){case 0:s=n+c,o=i+c;break;case 1:n=s-c,o=i+c;break;case 2:s=n+c,i=o-c;break;case 3:n=s-c,i=o-c;break}this._root&&this._root.length&&(this._root=d)}return this._x0=n,this._y0=i,this._x1=s,this._y1=o,this}function fte(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function ute(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function rs(t,e,n,i,s){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=s}function hte(t,e,n){var i,s=this._x0,o=this._y0,c,d,f,u,a=this._x1,_=this._y1,w=[],m=this._root,l,T;for(m&&w.push(new rs(m,s,o,a,_)),n==null?n=1/0:(s=t-n,o=e-n,a=t+n,_=e+n,n*=n);l=w.pop();)if(!(!(m=l.node)||(c=l.x0)>a||(d=l.y0)>_||(f=l.x1)<s||(u=l.y1)<o))if(m.length){var b=(c+f)/2,S=(d+u)/2;w.push(new rs(m[3],b,S,f,u),new rs(m[2],c,S,b,u),new rs(m[1],b,d,f,S),new rs(m[0],c,d,b,S)),(T=(e>=S)<<1|t>=b)&&(l=w[w.length-1],w[w.length-1]=w[w.length-1-T],w[w.length-1-T]=l)}else{var x=t-+this._x.call(null,m.data),B=e-+this._y.call(null,m.data),F=x*x+B*B;if(F<n){var k=Math.sqrt(n=F);s=t-k,o=e-k,a=t+k,_=e+k,i=m.data}}return i}function pte(t){if(isNaN(a=+this._x.call(null,t))||isNaN(_=+this._y.call(null,t)))return this;var e,n=this._root,i,s,o,c=this._x0,d=this._y0,f=this._x1,u=this._y1,a,_,w,m,l,T,b,S;if(!n)return this;if(n.length)for(;;){if((l=a>=(w=(c+f)/2))?c=w:f=w,(T=_>=(m=(d+u)/2))?d=m:u=m,e=n,!(n=n[b=T<<1|l]))return this;if(!n.length)break;(e[b+1&3]||e[b+2&3]||e[b+3&3])&&(i=e,S=b)}for(;n.data!==t;)if(s=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,s?(o?s.next=o:delete s.next,this):e?(o?e[b]=o:delete e[b],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(i?i[S]=n:this._root=n),this):(this._root=o,this)}function gte(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function _te(){return this._root}function yte(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function mte(t){var e=[],n,i=this._root,s,o,c,d,f;for(i&&e.push(new rs(i,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(i=n.node,o=n.x0,c=n.y0,d=n.x1,f=n.y1)&&i.length){var u=(o+d)/2,a=(c+f)/2;(s=i[3])&&e.push(new rs(s,u,a,d,f)),(s=i[2])&&e.push(new rs(s,o,a,u,f)),(s=i[1])&&e.push(new rs(s,u,c,d,a)),(s=i[0])&&e.push(new rs(s,o,c,u,a))}return this}function wte(t){var e=[],n=[],i;for(this._root&&e.push(new rs(this._root,this._x0,this._y0,this._x1,this._y1));i=e.pop();){var s=i.node;if(s.length){var o,c=i.x0,d=i.y0,f=i.x1,u=i.y1,a=(c+f)/2,_=(d+u)/2;(o=s[0])&&e.push(new rs(o,c,d,a,_)),(o=s[1])&&e.push(new rs(o,a,d,f,_)),(o=s[2])&&e.push(new rs(o,c,_,a,u)),(o=s[3])&&e.push(new rs(o,a,_,f,u))}n.push(i)}for(;i=n.pop();)t(i.node,i.x0,i.y0,i.x1,i.y1);return this}function bte(t){return t[0]}function Tte(t){return arguments.length?(this._x=t,this):this._x}function vte(t){return t[1]}function Ete(t){return arguments.length?(this._y=t,this):this._y}function JF(t,e,n){var i=new QF(e==null?bte:e,n==null?vte:n,NaN,NaN,NaN,NaN);return t==null?i:i.addAll(t)}function QF(t,e,n,i,s,o){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=s,this._y1=o,this._root=void 0}function RL(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var hs=JF.prototype=QF.prototype;hs.copy=function(){var t=new QF(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,i;if(!e)return t;if(!e.length)return t._root=RL(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var s=0;s<4;++s)(i=e.source[s])&&(i.length?n.push({source:i,target:e.target[s]=new Array(4)}):e.target[s]=RL(i));return t};hs.add=lte;hs.addAll=cte;hs.cover=dte;hs.data=fte;hs.extent=ute;hs.find=hte;hs.remove=pte;hs.removeAll=gte;hs.root=_te;hs.size=yte;hs.visit=mte;hs.visitAfter=wte;hs.x=Tte;hs.y=Ete;function os(t){return function(){return t}}function Sc(t){return(t()-.5)*1e-6}function Ste(t){return t.x+t.vx}function xte(t){return t.y+t.vy}function Bte(t){var e,n,i,s=1,o=1;typeof t!="function"&&(t=os(t==null?1:+t));function c(){for(var u,a=e.length,_,w,m,l,T,b,S=0;S<o;++S)for(_=JF(e,Ste,xte).visitAfter(d),u=0;u<a;++u)w=e[u],T=n[w.index],b=T*T,m=w.x+w.vx,l=w.y+w.vy,_.visit(x);function x(B,F,k,A,M){var R=B.data,P=B.r,j=T+P;if(R){if(R.index>w.index){var D=m-R.x-R.vx,z=l-R.y-R.vy,$=D*D+z*z;$<j*j&&(D===0&&(D=Sc(i),$+=D*D),z===0&&(z=Sc(i),$+=z*z),$=(j-($=Math.sqrt($)))/$*s,w.vx+=(D*=$)*(j=(P*=P)/(b+P)),w.vy+=(z*=$)*j,R.vx-=D*(j=1-j),R.vy-=z*j)}return}return F>m+j||A<m-j||k>l+j||M<l-j}}function d(u){if(u.data)return u.r=n[u.data.index];for(var a=u.r=0;a<4;++a)u[a]&&u[a].r>u.r&&(u.r=u[a].r)}function f(){if(!!e){var u,a=e.length,_;for(n=new Array(a),u=0;u<a;++u)_=e[u],n[_.index]=+t(_,u,e)}}return c.initialize=function(u,a){e=u,i=a,f()},c.iterations=function(u){return arguments.length?(o=+u,c):o},c.strength=function(u){return arguments.length?(s=+u,c):s},c.radius=function(u){return arguments.length?(t=typeof u=="function"?u:os(+u),f(),c):t},c}function kte(t){return t.index}function LL(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function Ite(t){var e=kte,n=_,i,s=os(30),o,c,d,f,u,a=1;t==null&&(t=[]);function _(b){return 1/Math.min(d[b.source.index],d[b.target.index])}function w(b){for(var S=0,x=t.length;S<a;++S)for(var B=0,F,k,A,M,R,P,j;B<x;++B)F=t[B],k=F.source,A=F.target,M=A.x+A.vx-k.x-k.vx||Sc(u),R=A.y+A.vy-k.y-k.vy||Sc(u),P=Math.sqrt(M*M+R*R),P=(P-o[B])/P*b*i[B],M*=P,R*=P,A.vx-=M*(j=f[B]),A.vy-=R*j,k.vx+=M*(j=1-j),k.vy+=R*j}function m(){if(!!c){var b,S=c.length,x=t.length,B=new Map(c.map((k,A)=>[e(k,A,c),k])),F;for(b=0,d=new Array(S);b<x;++b)F=t[b],F.index=b,typeof F.source!="object"&&(F.source=LL(B,F.source)),typeof F.target!="object"&&(F.target=LL(B,F.target)),d[F.source.index]=(d[F.source.index]||0)+1,d[F.target.index]=(d[F.target.index]||0)+1;for(b=0,f=new Array(x);b<x;++b)F=t[b],f[b]=d[F.source.index]/(d[F.source.index]+d[F.target.index]);i=new Array(x),l(),o=new Array(x),T()}}function l(){if(!!c)for(var b=0,S=t.length;b<S;++b)i[b]=+n(t[b],b,t)}function T(){if(!!c)for(var b=0,S=t.length;b<S;++b)o[b]=+s(t[b],b,t)}return w.initialize=function(b,S){c=b,u=S,m()},w.links=function(b){return arguments.length?(t=b,m(),w):t},w.id=function(b){return arguments.length?(e=b,w):e},w.iterations=function(b){return arguments.length?(a=+b,w):a},w.strength=function(b){return arguments.length?(n=typeof b=="function"?b:os(+b),l(),w):n},w.distance=function(b){return arguments.length?(s=typeof b=="function"?b:os(+b),T(),w):s},w}const Fte=1664525,Ote=1013904223,PL=4294967296;function Mte(){let t=1;return()=>(t=(Fte*t+Ote)%PL)/PL}function Ate(t){return t.x}function Nte(t){return t.y}var Cte=10,Rte=Math.PI*(3-Math.sqrt(5));function Lte(t){var e,n=1,i=.001,s=1-Math.pow(i,1/300),o=0,c=.6,d=new Map,f=C8(_),u=r8("tick","end"),a=Mte();t==null&&(t=[]);function _(){w(),u.call("tick",e),n<i&&(f.stop(),u.call("end",e))}function w(T){var b,S=t.length,x;T===void 0&&(T=1);for(var B=0;B<T;++B)for(n+=(o-n)*s,d.forEach(function(F){F(n)}),b=0;b<S;++b)x=t[b],x.fx==null?x.x+=x.vx*=c:(x.x=x.fx,x.vx=0),x.fy==null?x.y+=x.vy*=c:(x.y=x.fy,x.vy=0);return e}function m(){for(var T=0,b=t.length,S;T<b;++T){if(S=t[T],S.index=T,S.fx!=null&&(S.x=S.fx),S.fy!=null&&(S.y=S.fy),isNaN(S.x)||isNaN(S.y)){var x=Cte*Math.sqrt(.5+T),B=T*Rte;S.x=x*Math.cos(B),S.y=x*Math.sin(B)}(isNaN(S.vx)||isNaN(S.vy))&&(S.vx=S.vy=0)}}function l(T){return T.initialize&&T.initialize(t,a),T}return m(),e={tick:w,restart:function(){return f.restart(_),e},stop:function(){return f.stop(),e},nodes:function(T){return arguments.length?(t=T,m(),d.forEach(l),e):t},alpha:function(T){return arguments.length?(n=+T,e):n},alphaMin:function(T){return arguments.length?(i=+T,e):i},alphaDecay:function(T){return arguments.length?(s=+T,e):+s},alphaTarget:function(T){return arguments.length?(o=+T,e):o},velocityDecay:function(T){return arguments.length?(c=1-T,e):1-c},randomSource:function(T){return arguments.length?(a=T,d.forEach(l),e):a},force:function(T,b){return arguments.length>1?(b==null?d.delete(T):d.set(T,l(b)),e):d.get(T)},find:function(T,b,S){var x=0,B=t.length,F,k,A,M,R;for(S==null?S=1/0:S*=S,x=0;x<B;++x)M=t[x],F=T-M.x,k=b-M.y,A=F*F+k*k,A<S&&(R=M,S=A);return R},on:function(T,b){return arguments.length>1?(u.on(T,b),e):u.on(T)}}}function Pte(){var t,e,n,i,s=os(-30),o,c=1,d=1/0,f=.81;function u(m){var l,T=t.length,b=JF(t,Ate,Nte).visitAfter(_);for(i=m,l=0;l<T;++l)e=t[l],b.visit(w)}function a(){if(!!t){var m,l=t.length,T;for(o=new Array(l),m=0;m<l;++m)T=t[m],o[T.index]=+s(T,m,t)}}function _(m){var l=0,T,b,S=0,x,B,F;if(m.length){for(x=B=F=0;F<4;++F)(T=m[F])&&(b=Math.abs(T.value))&&(l+=T.value,S+=b,x+=b*T.x,B+=b*T.y);m.x=x/S,m.y=B/S}else{T=m,T.x=T.data.x,T.y=T.data.y;do l+=o[T.data.index];while(T=T.next)}m.value=l}function w(m,l,T,b){if(!m.value)return!0;var S=m.x-e.x,x=m.y-e.y,B=b-l,F=S*S+x*x;if(B*B/f<F)return F<d&&(S===0&&(S=Sc(n),F+=S*S),x===0&&(x=Sc(n),F+=x*x),F<c&&(F=Math.sqrt(c*F)),e.vx+=S*m.value*i/F,e.vy+=x*m.value*i/F),!0;if(m.length||F>=d)return;(m.data!==e||m.next)&&(S===0&&(S=Sc(n),F+=S*S),x===0&&(x=Sc(n),F+=x*x),F<c&&(F=Math.sqrt(c*F)));do m.data!==e&&(B=o[m.data.index]*i/F,e.vx+=S*B,e.vy+=x*B);while(m=m.next)}return u.initialize=function(m,l){t=m,n=l,a()},u.strength=function(m){return arguments.length?(s=typeof m=="function"?m:os(+m),a(),u):s},u.distanceMin=function(m){return arguments.length?(c=m*m,u):Math.sqrt(c)},u.distanceMax=function(m){return arguments.length?(d=m*m,u):Math.sqrt(d)},u.theta=function(m){return arguments.length?(f=m*m,u):Math.sqrt(f)},u}function Dte(t){var e=os(.1),n,i,s;typeof t!="function"&&(t=os(t==null?0:+t));function o(d){for(var f=0,u=n.length,a;f<u;++f)a=n[f],a.vx+=(s[f]-a.x)*i[f]*d}function c(){if(!!n){var d,f=n.length;for(i=new Array(f),s=new Array(f),d=0;d<f;++d)i[d]=isNaN(s[d]=+t(n[d],d,n))?0:+e(n[d],d,n)}}return o.initialize=function(d){n=d,c()},o.strength=function(d){return arguments.length?(e=typeof d=="function"?d:os(+d),c(),o):e},o.x=function(d){return arguments.length?(t=typeof d=="function"?d:os(+d),c(),o):t},o}function jte(t){var e=os(.1),n,i,s;typeof t!="function"&&(t=os(t==null?0:+t));function o(d){for(var f=0,u=n.length,a;f<u;++f)a=n[f],a.vy+=(s[f]-a.y)*i[f]*d}function c(){if(!!n){var d,f=n.length;for(i=new Array(f),s=new Array(f),d=0;d<f;++d)i[d]=isNaN(s[d]=+t(n[d],d,n))?0:+e(n[d],d,n)}}return o.initialize=function(d){n=d,c()},o.strength=function(d){return arguments.length?(e=typeof d=="function"?d:os(+d),c(),o):e},o.y=function(d){return arguments.length?(t=typeof d=="function"?d:os(+d),c(),o):t},o}function Ute(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function iT(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function Jh(t){return t=iT(Math.abs(t)),t?t[1]:NaN}function zte(t,e){return function(n,i){for(var s=n.length,o=[],c=0,d=t[0],f=0;s>0&&d>0&&(f+d+1>i&&(d=Math.max(1,i-f)),o.push(n.substring(s-=d,s+d)),!((f+=d+1)>i));)d=t[c=(c+1)%t.length];return o.reverse().join(e)}}function $te(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var qte=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Gf(t){if(!(e=qte.exec(t)))throw new Error("invalid format: "+t);var e;return new ZF({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Gf.prototype=ZF.prototype;function ZF(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}ZF.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Gte(t){e:for(var e=t.length,n=1,i=-1,s;n<e;++n)switch(t[n]){case".":i=s=n;break;case"0":i===0&&(i=n),s=n;break;default:if(!+t[n])break e;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(s+1):t}var P8;function Vte(t,e){var n=iT(t,e);if(!n)return t+"";var i=n[0],s=n[1],o=s-(P8=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,c=i.length;return o===c?i:o>c?i+new Array(o-c+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+iT(t,Math.max(0,e+o-1))[0]}function DL(t,e){var n=iT(t,e);if(!n)return t+"";var i=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+i:i.length>s+1?i.slice(0,s+1)+"."+i.slice(s+1):i+new Array(s-i.length+2).join("0")}const jL={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Ute,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>DL(t*100,e),r:DL,s:Vte,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function UL(t){return t}var zL=Array.prototype.map,$L=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function D8(t){var e=t.grouping===void 0||t.thousands===void 0?UL:zte(zL.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",s=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?UL:$te(zL.call(t.numerals,String)),c=t.percent===void 0?"%":t.percent+"",d=t.minus===void 0?"\u2212":t.minus+"",f=t.nan===void 0?"NaN":t.nan+"";function u(_){_=Gf(_);var w=_.fill,m=_.align,l=_.sign,T=_.symbol,b=_.zero,S=_.width,x=_.comma,B=_.precision,F=_.trim,k=_.type;k==="n"?(x=!0,k="g"):jL[k]||(B===void 0&&(B=12),F=!0,k="g"),(b||w==="0"&&m==="=")&&(b=!0,w="0",m="=");var A=T==="$"?n:T==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",M=T==="$"?i:/[%p]/.test(k)?c:"",R=jL[k],P=/[defgprs%]/.test(k);B=B===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,B)):Math.max(0,Math.min(20,B));function j(D){var z=A,$=M,K,H,W;if(k==="c")$=R(D)+$,D="";else{D=+D;var J=D<0||1/D<0;if(D=isNaN(D)?f:R(Math.abs(D),B),F&&(D=Gte(D)),J&&+D==0&&l!=="+"&&(J=!1),z=(J?l==="("?l:d:l==="-"||l==="("?"":l)+z,$=(k==="s"?$L[8+P8/3]:"")+$+(J&&l==="("?")":""),P){for(K=-1,H=D.length;++K<H;)if(W=D.charCodeAt(K),48>W||W>57){$=(W===46?s+D.slice(K+1):D.slice(K))+$,D=D.slice(0,K);break}}}x&&!b&&(D=e(D,1/0));var V=z.length+D.length+$.length,le=V<S?new Array(S-V+1).join(w):"";switch(x&&b&&(D=e(le+D,le.length?S-$.length:1/0),le=""),m){case"<":D=z+D+$+le;break;case"=":D=z+le+D+$;break;case"^":D=le.slice(0,V=le.length>>1)+z+D+$+le.slice(V);break;default:D=le+z+D+$;break}return o(D)}return j.toString=function(){return _+""},j}function a(_,w){var m=u((_=Gf(_),_.type="f",_)),l=Math.max(-8,Math.min(8,Math.floor(Jh(w)/3)))*3,T=Math.pow(10,-l),b=$L[8+l/3];return function(S){return m(T*S)+b}}return{format:u,formatPrefix:a}}var _b,O1,e2;Hte({thousands:",",grouping:[3],currency:["$",""]});function Hte(t){return _b=D8(t),O1=_b.format,e2=_b.formatPrefix,_b}function j8(t){return Math.max(0,-Jh(Math.abs(t)))}function U8(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Jh(e)/3)))*3-Jh(Math.abs(t)))}function z8(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Jh(e)-Jh(t))+1}var $e=1e-6,sT=1e-12,kt=Math.PI,Nn=kt/2,rT=kt/4,fs=kt*2,Rn=180/kt,It=kt/180,Dt=Math.abs,Xp=Math.atan,Lr=Math.atan2,qe=Math.cos,yb=Math.ceil,$8=Math.exp,ek=Math.hypot,aT=Math.log,rx=Math.pow,je=Math.sin,kr=Math.sign||function(t){return t>0?1:t<0?-1:0},us=Math.sqrt,t2=Math.tan;function q8(t){return t>1?0:t<-1?kt:Math.acos(t)}function Rs(t){return t>1?Nn:t<-1?-Nn:Math.asin(t)}function Ti(){}function oT(t,e){t&&GL.hasOwnProperty(t.type)&&GL[t.type](t,e)}var qL={Feature:function(t,e){oT(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,s=n.length;++i<s;)oT(n[i].geometry,e)}},GL={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,s=n.length;++i<s;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){tk(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,s=n.length;++i<s;)tk(n[i],e,0)},Polygon:function(t,e){VL(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,s=n.length;++i<s;)VL(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,s=n.length;++i<s;)oT(n[i],e)}};function tk(t,e,n){var i=-1,s=t.length-n,o;for(e.lineStart();++i<s;)o=t[i],e.point(o[0],o[1],o[2]);e.lineEnd()}function VL(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)tk(t[n],e,1);e.polygonEnd()}function wl(t,e){t&&qL.hasOwnProperty(t.type)?qL[t.type](t,e):oT(t,e)}var lT=new ls,cT=new ls,G8,V8,nk,ik,sk,Fo={point:Ti,lineStart:Ti,lineEnd:Ti,polygonStart:function(){lT=new ls,Fo.lineStart=Wte,Fo.lineEnd=Yte},polygonEnd:function(){var t=+lT;cT.add(t<0?fs+t:t),this.lineStart=this.lineEnd=this.point=Ti},sphere:function(){cT.add(fs)}};function Wte(){Fo.point=Xte}function Yte(){H8(G8,V8)}function Xte(t,e){Fo.point=H8,G8=t,V8=e,t*=It,e*=It,nk=t,ik=qe(e=e/2+rT),sk=je(e)}function H8(t,e){t*=It,e*=It,e=e/2+rT;var n=t-nk,i=n>=0?1:-1,s=i*n,o=qe(e),c=je(e),d=sk*c,f=ik*o+d*qe(s),u=d*i*je(s);lT.add(Lr(u,f)),nk=t,ik=o,sk=c}function Kte(t){return cT=new ls,wl(t,Fo),cT*2}function dT(t){return[Lr(t[1],t[0]),Rs(t[2])]}function Vf(t){var e=t[0],n=t[1],i=qe(n);return[i*qe(e),i*je(e),je(n)]}function mb(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Qh(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function ax(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function wb(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function fT(t){var e=us(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var Bn,Ts,On,nr,rf,W8,Y8,Ih,S_,pc,Dl,_l={point:rk,lineStart:HL,lineEnd:WL,polygonStart:function(){_l.point=K8,_l.lineStart=Jte,_l.lineEnd=Qte,S_=new ls,Fo.polygonStart()},polygonEnd:function(){Fo.polygonEnd(),_l.point=rk,_l.lineStart=HL,_l.lineEnd=WL,lT<0?(Bn=-(On=180),Ts=-(nr=90)):S_>$e?nr=90:S_<-$e&&(Ts=-90),Dl[0]=Bn,Dl[1]=On},sphere:function(){Bn=-(On=180),Ts=-(nr=90)}};function rk(t,e){pc.push(Dl=[Bn=t,On=t]),e<Ts&&(Ts=e),e>nr&&(nr=e)}function X8(t,e){var n=Vf([t*It,e*It]);if(Ih){var i=Qh(Ih,n),s=[i[1],-i[0],0],o=Qh(s,i);fT(o),o=dT(o);var c=t-rf,d=c>0?1:-1,f=o[0]*Rn*d,u,a=Dt(c)>180;a^(d*rf<f&&f<d*t)?(u=o[1]*Rn,u>nr&&(nr=u)):(f=(f+360)%360-180,a^(d*rf<f&&f<d*t)?(u=-o[1]*Rn,u<Ts&&(Ts=u)):(e<Ts&&(Ts=e),e>nr&&(nr=e))),a?t<rf?er(Bn,t)>er(Bn,On)&&(On=t):er(t,On)>er(Bn,On)&&(Bn=t):On>=Bn?(t<Bn&&(Bn=t),t>On&&(On=t)):t>rf?er(Bn,t)>er(Bn,On)&&(On=t):er(t,On)>er(Bn,On)&&(Bn=t)}else pc.push(Dl=[Bn=t,On=t]);e<Ts&&(Ts=e),e>nr&&(nr=e),Ih=n,rf=t}function HL(){_l.point=X8}function WL(){Dl[0]=Bn,Dl[1]=On,_l.point=rk,Ih=null}function K8(t,e){if(Ih){var n=t-rf;S_.add(Dt(n)>180?n+(n>0?360:-360):n)}else W8=t,Y8=e;Fo.point(t,e),X8(t,e)}function Jte(){Fo.lineStart()}function Qte(){K8(W8,Y8),Fo.lineEnd(),Dt(S_)>$e&&(Bn=-(On=180)),Dl[0]=Bn,Dl[1]=On,Ih=null}function er(t,e){return(e-=t)<0?e+360:e}function Zte(t,e){return t[0]-e[0]}function YL(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function ene(t){var e,n,i,s,o,c,d;if(nr=On=-(Bn=Ts=1/0),pc=[],wl(t,_l),n=pc.length){for(pc.sort(Zte),e=1,i=pc[0],o=[i];e<n;++e)s=pc[e],YL(i,s[0])||YL(i,s[1])?(er(i[0],s[1])>er(i[0],i[1])&&(i[1]=s[1]),er(s[0],i[1])>er(i[0],i[1])&&(i[0]=s[0])):o.push(i=s);for(c=-1/0,n=o.length-1,e=0,i=o[n];e<=n;i=s,++e)s=o[e],(d=er(i[1],s[0]))>c&&(c=d,Bn=s[0],On=i[1])}return pc=Dl=null,Bn===1/0||Ts===1/0?[[NaN,NaN],[NaN,NaN]]:[[Bn,Ts],[On,nr]]}var t_,uT,hT,pT,gT,_T,yT,mT,ak,ok,lk,J8,Q8,ns,is,ss,ma={sphere:Ti,point:n2,lineStart:XL,lineEnd:KL,polygonStart:function(){ma.lineStart=ine,ma.lineEnd=sne},polygonEnd:function(){ma.lineStart=XL,ma.lineEnd=KL}};function n2(t,e){t*=It,e*=It;var n=qe(e);Gy(n*qe(t),n*je(t),je(e))}function Gy(t,e,n){++t_,hT+=(t-hT)/t_,pT+=(e-pT)/t_,gT+=(n-gT)/t_}function XL(){ma.point=tne}function tne(t,e){t*=It,e*=It;var n=qe(e);ns=n*qe(t),is=n*je(t),ss=je(e),ma.point=nne,Gy(ns,is,ss)}function nne(t,e){t*=It,e*=It;var n=qe(e),i=n*qe(t),s=n*je(t),o=je(e),c=Lr(us((c=is*o-ss*s)*c+(c=ss*i-ns*o)*c+(c=ns*s-is*i)*c),ns*i+is*s+ss*o);uT+=c,_T+=c*(ns+(ns=i)),yT+=c*(is+(is=s)),mT+=c*(ss+(ss=o)),Gy(ns,is,ss)}function KL(){ma.point=n2}function ine(){ma.point=rne}function sne(){Z8(J8,Q8),ma.point=n2}function rne(t,e){J8=t,Q8=e,t*=It,e*=It,ma.point=Z8;var n=qe(e);ns=n*qe(t),is=n*je(t),ss=je(e),Gy(ns,is,ss)}function Z8(t,e){t*=It,e*=It;var n=qe(e),i=n*qe(t),s=n*je(t),o=je(e),c=is*o-ss*s,d=ss*i-ns*o,f=ns*s-is*i,u=ek(c,d,f),a=Rs(u),_=u&&-a/u;ak.add(_*c),ok.add(_*d),lk.add(_*f),uT+=a,_T+=a*(ns+(ns=i)),yT+=a*(is+(is=s)),mT+=a*(ss+(ss=o)),Gy(ns,is,ss)}function ane(t){t_=uT=hT=pT=gT=_T=yT=mT=0,ak=new ls,ok=new ls,lk=new ls,wl(t,ma);var e=+ak,n=+ok,i=+lk,s=ek(e,n,i);return s<sT&&(e=_T,n=yT,i=mT,uT<$e&&(e=hT,n=pT,i=gT),s=ek(e,n,i),s<sT)?[NaN,NaN]:[Lr(n,e)*Rn,Rs(i/s)*Rn]}function ck(t,e){function n(i,s){return i=t(i,s),e(i[0],i[1])}return t.invert&&e.invert&&(n.invert=function(i,s){return i=e.invert(i,s),i&&t.invert(i[0],i[1])}),n}function dk(t,e){return[Dt(t)>kt?t+Math.round(-t/fs)*fs:t,e]}dk.invert=dk;function ez(t,e,n){return(t%=fs)?e||n?ck(QL(t),ZL(e,n)):QL(t):e||n?ZL(e,n):dk}function JL(t){return function(e,n){return e+=t,[e>kt?e-fs:e<-kt?e+fs:e,n]}}function QL(t){var e=JL(t);return e.invert=JL(-t),e}function ZL(t,e){var n=qe(t),i=je(t),s=qe(e),o=je(e);function c(d,f){var u=qe(f),a=qe(d)*u,_=je(d)*u,w=je(f),m=w*n+a*i;return[Lr(_*s-m*o,a*n-w*i),Rs(m*s+_*o)]}return c.invert=function(d,f){var u=qe(f),a=qe(d)*u,_=je(d)*u,w=je(f),m=w*s-_*o;return[Lr(_*s+w*o,a*n+m*i),Rs(m*n-a*i)]},c}function one(t){t=ez(t[0]*It,t[1]*It,t.length>2?t[2]*It:0);function e(n){return n=t(n[0]*It,n[1]*It),n[0]*=Rn,n[1]*=Rn,n}return e.invert=function(n){return n=t.invert(n[0]*It,n[1]*It),n[0]*=Rn,n[1]*=Rn,n},e}function lne(t,e,n,i,s,o){if(!!n){var c=qe(e),d=je(e),f=i*n;s==null?(s=e+i*fs,o=e-f/2):(s=eP(c,s),o=eP(c,o),(i>0?s<o:s>o)&&(s+=i*fs));for(var u,a=s;i>0?a>o:a<o;a-=f)u=dT([c,-d*qe(a),-d*je(a)]),t.point(u[0],u[1])}}function eP(t,e){e=Vf(e),e[0]-=t,fT(e);var n=q8(-e[1]);return((-e[2]<0?-n:n)+fs-$e)%fs}function tz(){var t=[],e;return{point:function(n,i,s){e.push([n,i,s])},lineStart:function(){t.push(e=[])},lineEnd:Ti,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function f0(t,e){return Dt(t[0]-e[0])<$e&&Dt(t[1]-e[1])<$e}function bb(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function nz(t,e,n,i,s){var o=[],c=[],d,f;if(t.forEach(function(l){if(!((T=l.length-1)<=0)){var T,b=l[0],S=l[T],x;if(f0(b,S)){if(!b[2]&&!S[2]){for(s.lineStart(),d=0;d<T;++d)s.point((b=l[d])[0],b[1]);s.lineEnd();return}S[0]+=2*$e}o.push(x=new bb(b,l,null,!0)),c.push(x.o=new bb(b,null,x,!1)),o.push(x=new bb(S,l,null,!1)),c.push(x.o=new bb(S,null,x,!0))}}),!!o.length){for(c.sort(e),tP(o),tP(c),d=0,f=c.length;d<f;++d)c[d].e=n=!n;for(var u=o[0],a,_;;){for(var w=u,m=!0;w.v;)if((w=w.n)===u)return;a=w.z,s.lineStart();do{if(w.v=w.o.v=!0,w.e){if(m)for(d=0,f=a.length;d<f;++d)s.point((_=a[d])[0],_[1]);else i(w.x,w.n.x,1,s);w=w.n}else{if(m)for(a=w.p.z,d=a.length-1;d>=0;--d)s.point((_=a[d])[0],_[1]);else i(w.x,w.p.x,-1,s);w=w.p}w=w.o,a=w.z,m=!m}while(!w.v);s.lineEnd()}}}function tP(t){if(!!(e=t.length)){for(var e,n=0,i=t[0],s;++n<e;)i.n=s=t[n],s.p=i,i=s;i.n=s=t[0],s.p=i}}function ox(t){return Dt(t[0])<=kt?t[0]:kr(t[0])*((Dt(t[0])+kt)%fs-kt)}function cne(t,e){var n=ox(e),i=e[1],s=je(i),o=[je(n),-qe(n),0],c=0,d=0,f=new ls;s===1?i=Nn+$e:s===-1&&(i=-Nn-$e);for(var u=0,a=t.length;u<a;++u)if(!!(w=(_=t[u]).length))for(var _,w,m=_[w-1],l=ox(m),T=m[1]/2+rT,b=je(T),S=qe(T),x=0;x<w;++x,l=F,b=A,S=M,m=B){var B=_[x],F=ox(B),k=B[1]/2+rT,A=je(k),M=qe(k),R=F-l,P=R>=0?1:-1,j=P*R,D=j>kt,z=b*A;if(f.add(Lr(z*P*je(j),S*M+z*qe(j))),c+=D?R+P*fs:R,D^l>=n^F>=n){var $=Qh(Vf(m),Vf(B));fT($);var K=Qh(o,$);fT(K);var H=(D^R>=0?-1:1)*Rs(K[2]);(i>H||i===H&&($[0]||$[1]))&&(d+=D^R>=0?1:-1)}}return(c<-$e||c<$e&&f<-sT)^d&1}function iz(t,e,n,i){return function(s){var o=e(s),c=tz(),d=e(c),f=!1,u,a,_,w={point:m,lineStart:T,lineEnd:b,polygonStart:function(){w.point=S,w.lineStart=x,w.lineEnd=B,a=[],u=[]},polygonEnd:function(){w.point=m,w.lineStart=T,w.lineEnd=b,a=VU(a);var F=cne(u,i);a.length?(f||(s.polygonStart(),f=!0),nz(a,fne,F,n,s)):F&&(f||(s.polygonStart(),f=!0),s.lineStart(),n(null,null,1,s),s.lineEnd()),f&&(s.polygonEnd(),f=!1),a=u=null},sphere:function(){s.polygonStart(),s.lineStart(),n(null,null,1,s),s.lineEnd(),s.polygonEnd()}};function m(F,k){t(F,k)&&s.point(F,k)}function l(F,k){o.point(F,k)}function T(){w.point=l,o.lineStart()}function b(){w.point=m,o.lineEnd()}function S(F,k){_.push([F,k]),d.point(F,k)}function x(){d.lineStart(),_=[]}function B(){S(_[0][0],_[0][1]),d.lineEnd();var F=d.clean(),k=c.result(),A,M=k.length,R,P,j;if(_.pop(),u.push(_),_=null,!!M){if(F&1){if(P=k[0],(R=P.length-1)>0){for(f||(s.polygonStart(),f=!0),s.lineStart(),A=0;A<R;++A)s.point((j=P[A])[0],j[1]);s.lineEnd()}return}M>1&&F&2&&k.push(k.pop().concat(k.shift())),a.push(k.filter(dne))}}return w}}function dne(t){return t.length>1}function fne(t,e){return((t=t.x)[0]<0?t[1]-Nn-$e:Nn-t[1])-((e=e.x)[0]<0?e[1]-Nn-$e:Nn-e[1])}const nP=iz(function(){return!0},une,pne,[-kt,-Nn]);function une(t){var e=NaN,n=NaN,i=NaN,s;return{lineStart:function(){t.lineStart(),s=1},point:function(o,c){var d=o>0?kt:-kt,f=Dt(o-e);Dt(f-kt)<$e?(t.point(e,n=(n+c)/2>0?Nn:-Nn),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(d,n),t.point(o,n),s=0):i!==d&&f>=kt&&(Dt(e-i)<$e&&(e-=i*$e),Dt(o-d)<$e&&(o-=d*$e),n=hne(e,n,o,c),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(d,n),s=0),t.point(e=o,n=c),i=d},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-s}}}function hne(t,e,n,i){var s,o,c=je(t-n);return Dt(c)>$e?Xp((je(e)*(o=qe(i))*je(n)-je(i)*(s=qe(e))*je(t))/(s*o*c)):(e+i)/2}function pne(t,e,n,i){var s;if(t==null)s=n*Nn,i.point(-kt,s),i.point(0,s),i.point(kt,s),i.point(kt,0),i.point(kt,-s),i.point(0,-s),i.point(-kt,-s),i.point(-kt,0),i.point(-kt,s);else if(Dt(t[0]-e[0])>$e){var o=t[0]<e[0]?kt:-kt;s=n*o/2,i.point(-o,s),i.point(0,s),i.point(o,s)}else i.point(e[0],e[1])}function gne(t){var e=qe(t),n=6*It,i=e>0,s=Dt(e)>$e;function o(a,_,w,m){lne(m,t,n,w,a,_)}function c(a,_){return qe(a)*qe(_)>e}function d(a){var _,w,m,l,T;return{lineStart:function(){l=m=!1,T=1},point:function(b,S){var x=[b,S],B,F=c(b,S),k=i?F?0:u(b,S):F?u(b+(b<0?kt:-kt),S):0;if(!_&&(l=m=F)&&a.lineStart(),F!==m&&(B=f(_,x),(!B||f0(_,B)||f0(x,B))&&(x[2]=1)),F!==m)T=0,F?(a.lineStart(),B=f(x,_),a.point(B[0],B[1])):(B=f(_,x),a.point(B[0],B[1],2),a.lineEnd()),_=B;else if(s&&_&&i^F){var A;!(k&w)&&(A=f(x,_,!0))&&(T=0,i?(a.lineStart(),a.point(A[0][0],A[0][1]),a.point(A[1][0],A[1][1]),a.lineEnd()):(a.point(A[1][0],A[1][1]),a.lineEnd(),a.lineStart(),a.point(A[0][0],A[0][1],3)))}F&&(!_||!f0(_,x))&&a.point(x[0],x[1]),_=x,m=F,w=k},lineEnd:function(){m&&a.lineEnd(),_=null},clean:function(){return T|(l&&m)<<1}}}function f(a,_,w){var m=Vf(a),l=Vf(_),T=[1,0,0],b=Qh(m,l),S=mb(b,b),x=b[0],B=S-x*x;if(!B)return!w&&a;var F=e*S/B,k=-e*x/B,A=Qh(T,b),M=wb(T,F),R=wb(b,k);ax(M,R);var P=A,j=mb(M,P),D=mb(P,P),z=j*j-D*(mb(M,M)-1);if(!(z<0)){var $=us(z),K=wb(P,(-j-$)/D);if(ax(K,M),K=dT(K),!w)return K;var H=a[0],W=_[0],J=a[1],V=_[1],le;W<H&&(le=H,H=W,W=le);var pe=W-H,se=Dt(pe-kt)<$e,Ne=se||pe<$e;if(!se&&V<J&&(le=J,J=V,V=le),Ne?se?J+V>0^K[1]<(Dt(K[0]-H)<$e?J:V):J<=K[1]&&K[1]<=V:pe>kt^(H<=K[0]&&K[0]<=W)){var fe=wb(P,(-j+$)/D);return ax(fe,M),[K,dT(fe)]}}}function u(a,_){var w=i?t:kt-t,m=0;return a<-w?m|=1:a>w&&(m|=2),_<-w?m|=4:_>w&&(m|=8),m}return iz(c,d,o,i?[0,-t]:[-kt,t-kt])}function _ne(t,e,n,i,s,o){var c=t[0],d=t[1],f=e[0],u=e[1],a=0,_=1,w=f-c,m=u-d,l;if(l=n-c,!(!w&&l>0)){if(l/=w,w<0){if(l<a)return;l<_&&(_=l)}else if(w>0){if(l>_)return;l>a&&(a=l)}if(l=s-c,!(!w&&l<0)){if(l/=w,w<0){if(l>_)return;l>a&&(a=l)}else if(w>0){if(l<a)return;l<_&&(_=l)}if(l=i-d,!(!m&&l>0)){if(l/=m,m<0){if(l<a)return;l<_&&(_=l)}else if(m>0){if(l>_)return;l>a&&(a=l)}if(l=o-d,!(!m&&l<0)){if(l/=m,m<0){if(l>_)return;l>a&&(a=l)}else if(m>0){if(l<a)return;l<_&&(_=l)}return a>0&&(t[0]=c+a*w,t[1]=d+a*m),_<1&&(e[0]=c+_*w,e[1]=d+_*m),!0}}}}}var n_=1e9,Tb=-n_;function sz(t,e,n,i){function s(u,a){return t<=u&&u<=n&&e<=a&&a<=i}function o(u,a,_,w){var m=0,l=0;if(u==null||(m=c(u,_))!==(l=c(a,_))||f(u,a)<0^_>0)do w.point(m===0||m===3?t:n,m>1?i:e);while((m=(m+_+4)%4)!==l);else w.point(a[0],a[1])}function c(u,a){return Dt(u[0]-t)<$e?a>0?0:3:Dt(u[0]-n)<$e?a>0?2:1:Dt(u[1]-e)<$e?a>0?1:0:a>0?3:2}function d(u,a){return f(u.x,a.x)}function f(u,a){var _=c(u,1),w=c(a,1);return _!==w?_-w:_===0?a[1]-u[1]:_===1?u[0]-a[0]:_===2?u[1]-a[1]:a[0]-u[0]}return function(u){var a=u,_=tz(),w,m,l,T,b,S,x,B,F,k,A,M={point:R,lineStart:z,lineEnd:$,polygonStart:j,polygonEnd:D};function R(H,W){s(H,W)&&a.point(H,W)}function P(){for(var H=0,W=0,J=m.length;W<J;++W)for(var V=m[W],le=1,pe=V.length,se=V[0],Ne,fe,Oe=se[0],Ce=se[1];le<pe;++le)Ne=Oe,fe=Ce,se=V[le],Oe=se[0],Ce=se[1],fe<=i?Ce>i&&(Oe-Ne)*(i-fe)>(Ce-fe)*(t-Ne)&&++H:Ce<=i&&(Oe-Ne)*(i-fe)<(Ce-fe)*(t-Ne)&&--H;return H}function j(){a=_,w=[],m=[],A=!0}function D(){var H=P(),W=A&&H,J=(w=VU(w)).length;(W||J)&&(u.polygonStart(),W&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),J&&nz(w,d,H,o,u),u.polygonEnd()),a=u,w=m=l=null}function z(){M.point=K,m&&m.push(l=[]),k=!0,F=!1,x=B=NaN}function $(){w&&(K(T,b),S&&F&&_.rejoin(),w.push(_.result())),M.point=R,F&&a.lineEnd()}function K(H,W){var J=s(H,W);if(m&&l.push([H,W]),k)T=H,b=W,S=J,k=!1,J&&(a.lineStart(),a.point(H,W));else if(J&&F)a.point(H,W);else{var V=[x=Math.max(Tb,Math.min(n_,x)),B=Math.max(Tb,Math.min(n_,B))],le=[H=Math.max(Tb,Math.min(n_,H)),W=Math.max(Tb,Math.min(n_,W))];_ne(V,le,t,e,n,i)?(F||(a.lineStart(),a.point(V[0],V[1])),a.point(le[0],le[1]),J||a.lineEnd(),A=!1):J&&(a.lineStart(),a.point(H,W),A=!1)}x=H,B=W,F=J}return M}}function iP(t,e,n){var i=ar(t,e-$e,n).concat(e);return function(s){return i.map(function(o){return[s,o]})}}function sP(t,e,n){var i=ar(t,e-$e,n).concat(e);return function(s){return i.map(function(o){return[o,s]})}}function yne(){var t,e,n,i,s,o,c,d,f=10,u=f,a=90,_=360,w,m,l,T,b=2.5;function S(){return{type:"MultiLineString",coordinates:x()}}function x(){return ar(yb(i/a)*a,n,a).map(l).concat(ar(yb(d/_)*_,c,_).map(T)).concat(ar(yb(e/f)*f,t,f).filter(function(B){return Dt(B%a)>$e}).map(w)).concat(ar(yb(o/u)*u,s,u).filter(function(B){return Dt(B%_)>$e}).map(m))}return S.lines=function(){return x().map(function(B){return{type:"LineString",coordinates:B}})},S.outline=function(){return{type:"Polygon",coordinates:[l(i).concat(T(c).slice(1),l(n).reverse().slice(1),T(d).reverse().slice(1))]}},S.extent=function(B){return arguments.length?S.extentMajor(B).extentMinor(B):S.extentMinor()},S.extentMajor=function(B){return arguments.length?(i=+B[0][0],n=+B[1][0],d=+B[0][1],c=+B[1][1],i>n&&(B=i,i=n,n=B),d>c&&(B=d,d=c,c=B),S.precision(b)):[[i,d],[n,c]]},S.extentMinor=function(B){return arguments.length?(e=+B[0][0],t=+B[1][0],o=+B[0][1],s=+B[1][1],e>t&&(B=e,e=t,t=B),o>s&&(B=o,o=s,s=B),S.precision(b)):[[e,o],[t,s]]},S.step=function(B){return arguments.length?S.stepMajor(B).stepMinor(B):S.stepMinor()},S.stepMajor=function(B){return arguments.length?(a=+B[0],_=+B[1],S):[a,_]},S.stepMinor=function(B){return arguments.length?(f=+B[0],u=+B[1],S):[f,u]},S.precision=function(B){return arguments.length?(b=+B,w=iP(o,s,90),m=sP(e,t,b),l=iP(d,c,90),T=sP(i,n,b),S):b},S.extentMajor([[-180,-90+$e],[180,90-$e]]).extentMinor([[-180,-80-$e],[180,80+$e]])}const H_=t=>t;var lx=new ls,fk=new ls,rz,az,uk,hk,vc={point:Ti,lineStart:Ti,lineEnd:Ti,polygonStart:function(){vc.lineStart=mne,vc.lineEnd=bne},polygonEnd:function(){vc.lineStart=vc.lineEnd=vc.point=Ti,lx.add(Dt(fk)),fk=new ls},result:function(){var t=lx/2;return lx=new ls,t}};function mne(){vc.point=wne}function wne(t,e){vc.point=oz,rz=uk=t,az=hk=e}function oz(t,e){fk.add(hk*t-uk*e),uk=t,hk=e}function bne(){oz(rz,az)}const rP=vc;var Zh=1/0,wT=Zh,W_=-Zh,bT=W_,Tne={point:vne,lineStart:Ti,lineEnd:Ti,polygonStart:Ti,polygonEnd:Ti,result:function(){var t=[[Zh,wT],[W_,bT]];return W_=bT=-(wT=Zh=1/0),t}};function vne(t,e){t<Zh&&(Zh=t),t>W_&&(W_=t),e<wT&&(wT=e),e>bT&&(bT=e)}const TT=Tne;var pk=0,gk=0,i_=0,vT=0,ET=0,ph=0,_k=0,yk=0,s_=0,lz,cz,Qa,Za,fa={point:Hf,lineStart:aP,lineEnd:oP,polygonStart:function(){fa.lineStart=xne,fa.lineEnd=Bne},polygonEnd:function(){fa.point=Hf,fa.lineStart=aP,fa.lineEnd=oP},result:function(){var t=s_?[_k/s_,yk/s_]:ph?[vT/ph,ET/ph]:i_?[pk/i_,gk/i_]:[NaN,NaN];return pk=gk=i_=vT=ET=ph=_k=yk=s_=0,t}};function Hf(t,e){pk+=t,gk+=e,++i_}function aP(){fa.point=Ene}function Ene(t,e){fa.point=Sne,Hf(Qa=t,Za=e)}function Sne(t,e){var n=t-Qa,i=e-Za,s=us(n*n+i*i);vT+=s*(Qa+t)/2,ET+=s*(Za+e)/2,ph+=s,Hf(Qa=t,Za=e)}function oP(){fa.point=Hf}function xne(){fa.point=kne}function Bne(){dz(lz,cz)}function kne(t,e){fa.point=dz,Hf(lz=Qa=t,cz=Za=e)}function dz(t,e){var n=t-Qa,i=e-Za,s=us(n*n+i*i);vT+=s*(Qa+t)/2,ET+=s*(Za+e)/2,ph+=s,s=Za*t-Qa*e,_k+=s*(Qa+t),yk+=s*(Za+e),s_+=s*3,Hf(Qa=t,Za=e)}const lP=fa;function fz(t){this._context=t}fz.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,fs);break}}},result:Ti};var mk=new ls,cx,uz,hz,r_,a_,ST={point:Ti,lineStart:function(){ST.point=Ine},lineEnd:function(){cx&&pz(uz,hz),ST.point=Ti},polygonStart:function(){cx=!0},polygonEnd:function(){cx=null},result:function(){var t=+mk;return mk=new ls,t}};function Ine(t,e){ST.point=pz,uz=r_=t,hz=a_=e}function pz(t,e){r_-=t,a_-=e,mk.add(us(r_*r_+a_*a_)),r_=t,a_=e}const cP=ST;function gz(){this._string=[]}gz.prototype={_radius:4.5,_circle:dP(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._string.push("M",t,",",e),this._point=1;break}case 1:{this._string.push("L",t,",",e);break}default:{this._circle==null&&(this._circle=dP(this._radius)),this._string.push("M",t,",",e,this._circle);break}}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}else return null}};function dP(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function _z(t,e){var n=4.5,i,s;function o(c){return c&&(typeof n=="function"&&s.pointRadius(+n.apply(this,arguments)),wl(c,i(s))),s.result()}return o.area=function(c){return wl(c,i(rP)),rP.result()},o.measure=function(c){return wl(c,i(cP)),cP.result()},o.bounds=function(c){return wl(c,i(TT)),TT.result()},o.centroid=function(c){return wl(c,i(lP)),lP.result()},o.projection=function(c){return arguments.length?(i=c==null?(t=null,H_):(t=c).stream,o):t},o.context=function(c){return arguments.length?(s=c==null?(e=null,new gz):new fz(e=c),typeof n!="function"&&s.pointRadius(n),o):e},o.pointRadius=function(c){return arguments.length?(n=typeof c=="function"?c:(s.pointRadius(+c),+c),o):n},o.projection(t).context(e)}function M1(t){return function(e){var n=new wk;for(var i in t)n[i]=t[i];return n.stream=e,n}}function wk(){}wk.prototype={constructor:wk,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function i2(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),i!=null&&t.clipExtent(null),wl(n,t.stream(TT)),e(TT.result()),i!=null&&t.clipExtent(i),t}function A1(t,e,n){return i2(t,function(i){var s=e[1][0]-e[0][0],o=e[1][1]-e[0][1],c=Math.min(s/(i[1][0]-i[0][0]),o/(i[1][1]-i[0][1])),d=+e[0][0]+(s-c*(i[1][0]+i[0][0]))/2,f=+e[0][1]+(o-c*(i[1][1]+i[0][1]))/2;t.scale(150*c).translate([d,f])},n)}function s2(t,e,n){return A1(t,[[0,0],e],n)}function r2(t,e,n){return i2(t,function(i){var s=+e,o=s/(i[1][0]-i[0][0]),c=(s-o*(i[1][0]+i[0][0]))/2,d=-o*i[0][1];t.scale(150*o).translate([c,d])},n)}function a2(t,e,n){return i2(t,function(i){var s=+e,o=s/(i[1][1]-i[0][1]),c=-o*i[0][0],d=(s-o*(i[1][1]+i[0][1]))/2;t.scale(150*o).translate([c,d])},n)}var fP=16,Fne=qe(30*It);function uP(t,e){return+e?Mne(t,e):One(t)}function One(t){return M1({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function Mne(t,e){function n(i,s,o,c,d,f,u,a,_,w,m,l,T,b){var S=u-i,x=a-s,B=S*S+x*x;if(B>4*e&&T--){var F=c+w,k=d+m,A=f+l,M=us(F*F+k*k+A*A),R=Rs(A/=M),P=Dt(Dt(A)-1)<$e||Dt(o-_)<$e?(o+_)/2:Lr(k,F),j=t(P,R),D=j[0],z=j[1],$=D-i,K=z-s,H=x*$-S*K;(H*H/B>e||Dt((S*$+x*K)/B-.5)>.3||c*w+d*m+f*l<Fne)&&(n(i,s,o,c,d,f,D,z,P,F/=M,k/=M,A,T,b),b.point(D,z),n(D,z,P,F,k,A,u,a,_,w,m,l,T,b))}}return function(i){var s,o,c,d,f,u,a,_,w,m,l,T,b={point:S,lineStart:x,lineEnd:F,polygonStart:function(){i.polygonStart(),b.lineStart=k},polygonEnd:function(){i.polygonEnd(),b.lineStart=x}};function S(R,P){R=t(R,P),i.point(R[0],R[1])}function x(){_=NaN,b.point=B,i.lineStart()}function B(R,P){var j=Vf([R,P]),D=t(R,P);n(_,w,a,m,l,T,_=D[0],w=D[1],a=R,m=j[0],l=j[1],T=j[2],fP,i),i.point(_,w)}function F(){b.point=S,i.lineEnd()}function k(){x(),b.point=A,b.lineEnd=M}function A(R,P){B(s=R,P),o=_,c=w,d=m,f=l,u=T,b.point=B}function M(){n(_,w,a,m,l,T,o,c,s,d,f,u,fP,i),b.lineEnd=F,F()}return b}}var Ane=M1({point:function(t,e){this.stream.point(t*It,e*It)}});function Nne(t){return M1({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}})}function Cne(t,e,n,i,s){function o(c,d){return c*=i,d*=s,[e+t*c,n-t*d]}return o.invert=function(c,d){return[(c-e)/t*i,(n-d)/t*s]},o}function hP(t,e,n,i,s,o){if(!o)return Cne(t,e,n,i,s);var c=qe(o),d=je(o),f=c*t,u=d*t,a=c/t,_=d/t,w=(d*n-c*e)/t,m=(d*e+c*n)/t;function l(T,b){return T*=i,b*=s,[f*T-u*b+e,n-u*T-f*b]}return l.invert=function(T,b){return[i*(a*T-_*b+w),s*(m-_*T-a*b)]},l}function Vo(t){return yz(function(){return t})()}function yz(t){var e,n=150,i=480,s=250,o=0,c=0,d=0,f=0,u=0,a,_=0,w=1,m=1,l=null,T=nP,b=null,S,x,B,F=H_,k=.5,A,M,R,P,j;function D(H){return R(H[0]*It,H[1]*It)}function z(H){return H=R.invert(H[0],H[1]),H&&[H[0]*Rn,H[1]*Rn]}D.stream=function(H){return P&&j===H?P:P=Ane(Nne(a)(T(A(F(j=H)))))},D.preclip=function(H){return arguments.length?(T=H,l=void 0,K()):T},D.postclip=function(H){return arguments.length?(F=H,b=S=x=B=null,K()):F},D.clipAngle=function(H){return arguments.length?(T=+H?gne(l=H*It):(l=null,nP),K()):l*Rn},D.clipExtent=function(H){return arguments.length?(F=H==null?(b=S=x=B=null,H_):sz(b=+H[0][0],S=+H[0][1],x=+H[1][0],B=+H[1][1]),K()):b==null?null:[[b,S],[x,B]]},D.scale=function(H){return arguments.length?(n=+H,$()):n},D.translate=function(H){return arguments.length?(i=+H[0],s=+H[1],$()):[i,s]},D.center=function(H){return arguments.length?(o=H[0]%360*It,c=H[1]%360*It,$()):[o*Rn,c*Rn]},D.rotate=function(H){return arguments.length?(d=H[0]%360*It,f=H[1]%360*It,u=H.length>2?H[2]%360*It:0,$()):[d*Rn,f*Rn,u*Rn]},D.angle=function(H){return arguments.length?(_=H%360*It,$()):_*Rn},D.reflectX=function(H){return arguments.length?(w=H?-1:1,$()):w<0},D.reflectY=function(H){return arguments.length?(m=H?-1:1,$()):m<0},D.precision=function(H){return arguments.length?(A=uP(M,k=H*H),K()):us(k)},D.fitExtent=function(H,W){return A1(D,H,W)},D.fitSize=function(H,W){return s2(D,H,W)},D.fitWidth=function(H,W){return r2(D,H,W)},D.fitHeight=function(H,W){return a2(D,H,W)};function $(){var H=hP(n,0,0,w,m,_).apply(null,e(o,c)),W=hP(n,i-H[0],s-H[1],w,m,_);return a=ez(d,f,u),M=ck(e,W),R=ck(a,M),A=uP(M,k),K()}function K(){return P=j=null,D}return function(){return e=t.apply(this,arguments),D.invert=e.invert&&z,$()}}function o2(t){var e=0,n=kt/3,i=yz(t),s=i(e,n);return s.parallels=function(o){return arguments.length?i(e=o[0]*It,n=o[1]*It):[e*Rn,n*Rn]},s}function Rne(t){var e=qe(t);function n(i,s){return[i*e,je(s)/e]}return n.invert=function(i,s){return[i/e,Rs(s*e)]},n}function Lne(t,e){var n=je(t),i=(n+je(e))/2;if(Dt(i)<$e)return Rne(t);var s=1+n*(2*i-n),o=us(s)/i;function c(d,f){var u=us(s-2*i*je(f))/i;return[u*je(d*=i),o-u*qe(d)]}return c.invert=function(d,f){var u=o-f,a=Lr(d,Dt(u))*kr(u);return u*i<0&&(a-=kt*kr(d)*kr(u)),[a/i,Rs((s-(d*d+u*u)*i*i)/(2*i))]},c}function xT(){return o2(Lne).scale(155.424).center([0,33.6442])}function mz(){return xT().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Pne(t){var e=t.length;return{point:function(n,i){for(var s=-1;++s<e;)t[s].point(n,i)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function Dne(){var t,e,n=mz(),i,s=xT().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,c=xT().rotate([157,0]).center([-3,19.9]).parallels([8,18]),d,f,u={point:function(w,m){f=[w,m]}};function a(w){var m=w[0],l=w[1];return f=null,i.point(m,l),f||(o.point(m,l),f)||(d.point(m,l),f)}a.invert=function(w){var m=n.scale(),l=n.translate(),T=(w[0]-l[0])/m,b=(w[1]-l[1])/m;return(b>=.12&&b<.234&&T>=-.425&&T<-.214?s:b>=.166&&b<.234&&T>=-.214&&T<-.115?c:n).invert(w)},a.stream=function(w){return t&&e===w?t:t=Pne([n.stream(e=w),s.stream(w),c.stream(w)])},a.precision=function(w){return arguments.length?(n.precision(w),s.precision(w),c.precision(w),_()):n.precision()},a.scale=function(w){return arguments.length?(n.scale(w),s.scale(w*.35),c.scale(w),a.translate(n.translate())):n.scale()},a.translate=function(w){if(!arguments.length)return n.translate();var m=n.scale(),l=+w[0],T=+w[1];return i=n.translate(w).clipExtent([[l-.455*m,T-.238*m],[l+.455*m,T+.238*m]]).stream(u),o=s.translate([l-.307*m,T+.201*m]).clipExtent([[l-.425*m+$e,T+.12*m+$e],[l-.214*m-$e,T+.234*m-$e]]).stream(u),d=c.translate([l-.205*m,T+.212*m]).clipExtent([[l-.214*m+$e,T+.166*m+$e],[l-.115*m-$e,T+.234*m-$e]]).stream(u),_()},a.fitExtent=function(w,m){return A1(a,w,m)},a.fitSize=function(w,m){return s2(a,w,m)},a.fitWidth=function(w,m){return r2(a,w,m)},a.fitHeight=function(w,m){return a2(a,w,m)};function _(){return t=e=null,a}return a.scale(1070)}function wz(t){return function(e,n){var i=qe(e),s=qe(n),o=t(i*s);return o===1/0?[2,0]:[o*s*je(e),o*je(n)]}}function Vy(t){return function(e,n){var i=us(e*e+n*n),s=t(i),o=je(s),c=qe(s);return[Lr(e*o,i*c),Rs(i&&n*o/i)]}}var bz=wz(function(t){return us(2/(1+t))});bz.invert=Vy(function(t){return 2*Rs(t/2)});function jne(){return Vo(bz).scale(124.75).clipAngle(180-.001)}var Tz=wz(function(t){return(t=q8(t))&&t/je(t)});Tz.invert=Vy(function(t){return t});function Une(){return Vo(Tz).scale(79.4188).clipAngle(180-.001)}function N1(t,e){return[t,aT(t2((Nn+e)/2))]}N1.invert=function(t,e){return[t,2*Xp($8(e))-Nn]};function zne(){return vz(N1).scale(961/fs)}function vz(t){var e=Vo(t),n=e.center,i=e.scale,s=e.translate,o=e.clipExtent,c=null,d,f,u;e.scale=function(_){return arguments.length?(i(_),a()):i()},e.translate=function(_){return arguments.length?(s(_),a()):s()},e.center=function(_){return arguments.length?(n(_),a()):n()},e.clipExtent=function(_){return arguments.length?(_==null?c=d=f=u=null:(c=+_[0][0],d=+_[0][1],f=+_[1][0],u=+_[1][1]),a()):c==null?null:[[c,d],[f,u]]};function a(){var _=kt*i(),w=e(one(e.rotate()).invert([0,0]));return o(c==null?[[w[0]-_,w[1]-_],[w[0]+_,w[1]+_]]:t===N1?[[Math.max(w[0]-_,c),d],[Math.min(w[0]+_,f),u]]:[[c,Math.max(w[1]-_,d)],[f,Math.min(w[1]+_,u)]])}return a()}function vb(t){return t2((Nn+t)/2)}function $ne(t,e){var n=qe(t),i=t===e?je(t):aT(n/qe(e))/aT(vb(e)/vb(t)),s=n*rx(vb(t),i)/i;if(!i)return N1;function o(c,d){s>0?d<-Nn+$e&&(d=-Nn+$e):d>Nn-$e&&(d=Nn-$e);var f=s/rx(vb(d),i);return[f*je(i*c),s-f*qe(i*c)]}return o.invert=function(c,d){var f=s-d,u=kr(i)*us(c*c+f*f),a=Lr(c,Dt(f))*kr(f);return f*i<0&&(a-=kt*kr(c)*kr(f)),[a/i,2*Xp(rx(s/u,1/i))-Nn]},o}function qne(){return o2($ne).scale(109.5).parallels([30,30])}function BT(t,e){return[t,e]}BT.invert=BT;function Gne(){return Vo(BT).scale(152.63)}function Vne(t,e){var n=qe(t),i=t===e?je(t):(n-qe(e))/(e-t),s=n/i+t;if(Dt(i)<$e)return BT;function o(c,d){var f=s-d,u=i*c;return[f*je(u),s-f*qe(u)]}return o.invert=function(c,d){var f=s-d,u=Lr(c,Dt(f))*kr(f);return f*i<0&&(u-=kt*kr(c)*kr(f)),[u/i,s-kr(i)*us(c*c+f*f)]},o}function Hne(){return o2(Vne).scale(131.154).center([0,13.9389])}var x_=1.340264,B_=-.081106,k_=893e-6,I_=.003796,kT=us(3)/2,Wne=12;function Ez(t,e){var n=Rs(kT*je(e)),i=n*n,s=i*i*i;return[t*qe(n)/(kT*(x_+3*B_*i+s*(7*k_+9*I_*i))),n*(x_+B_*i+s*(k_+I_*i))]}Ez.invert=function(t,e){for(var n=e,i=n*n,s=i*i*i,o=0,c,d,f;o<Wne&&(d=n*(x_+B_*i+s*(k_+I_*i))-e,f=x_+3*B_*i+s*(7*k_+9*I_*i),n-=c=d/f,i=n*n,s=i*i*i,!(Dt(c)<sT));++o);return[kT*t*(x_+3*B_*i+s*(7*k_+9*I_*i))/qe(n),Rs(je(n)/kT)]};function Yne(){return Vo(Ez).scale(177.158)}function Sz(t,e){var n=qe(e),i=qe(t)*n;return[n*je(t)/i,je(e)/i]}Sz.invert=Vy(Xp);function Xne(){return Vo(Sz).scale(144.049).clipAngle(60)}function Kne(){var t=1,e=0,n=0,i=1,s=1,o=0,c,d,f=null,u,a,_,w=1,m=1,l=M1({point:function(F,k){var A=B([F,k]);this.stream.point(A[0],A[1])}}),T=H_,b,S;function x(){return w=t*i,m=t*s,b=S=null,B}function B(F){var k=F[0]*w,A=F[1]*m;if(o){var M=A*c-k*d;k=k*c+A*d,A=M}return[k+e,A+n]}return B.invert=function(F){var k=F[0]-e,A=F[1]-n;if(o){var M=A*c+k*d;k=k*c-A*d,A=M}return[k/w,A/m]},B.stream=function(F){return b&&S===F?b:b=l(T(S=F))},B.postclip=function(F){return arguments.length?(T=F,f=u=a=_=null,x()):T},B.clipExtent=function(F){return arguments.length?(T=F==null?(f=u=a=_=null,H_):sz(f=+F[0][0],u=+F[0][1],a=+F[1][0],_=+F[1][1]),x()):f==null?null:[[f,u],[a,_]]},B.scale=function(F){return arguments.length?(t=+F,x()):t},B.translate=function(F){return arguments.length?(e=+F[0],n=+F[1],x()):[e,n]},B.angle=function(F){return arguments.length?(o=F%360*It,d=je(o),c=qe(o),x()):o*Rn},B.reflectX=function(F){return arguments.length?(i=F?-1:1,x()):i<0},B.reflectY=function(F){return arguments.length?(s=F?-1:1,x()):s<0},B.fitExtent=function(F,k){return A1(B,F,k)},B.fitSize=function(F,k){return s2(B,F,k)},B.fitWidth=function(F,k){return r2(B,F,k)},B.fitHeight=function(F,k){return a2(B,F,k)},B}function xz(t,e){var n=e*e,i=n*n;return[t*(.8707-.131979*n+i*(-.013791+i*(.003971*n-.001529*i))),e*(1.007226+n*(.015085+i*(-.044475+.028874*n-.005916*i)))]}xz.invert=function(t,e){var n=e,i=25,s;do{var o=n*n,c=o*o;n-=s=(n*(1.007226+o*(.015085+c*(-.044475+.028874*o-.005916*c)))-e)/(1.007226+o*(.015085*3+c*(-.044475*7+.028874*9*o-.005916*11*c)))}while(Dt(s)>$e&&--i>0);return[t/(.8707+(o=n*n)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),n]};function Jne(){return Vo(xz).scale(175.295)}function Bz(t,e){return[qe(e)*je(t),je(e)]}Bz.invert=Vy(Rs);function Qne(){return Vo(Bz).scale(249.5).clipAngle(90+$e)}function kz(t,e){var n=qe(e),i=1+qe(t)*n;return[n*je(t)/i,je(e)/i]}kz.invert=Vy(function(t){return 2*Xp(t)});function Zne(){return Vo(kz).scale(250).clipAngle(142)}function Iz(t,e){return[aT(t2((Nn+e)/2)),-t]}Iz.invert=function(t,e){return[-e,2*Xp($8(t))-Nn]};function eie(){var t=vz(Iz),e=t.center,n=t.rotate;return t.center=function(i){return arguments.length?e([-i[1],i[0]]):(i=e(),[i[1],-i[0]])},t.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}function tie(t,e){return t.parent===e.parent?1:2}function nie(t){return t.reduce(iie,0)/t.length}function iie(t,e){return t+e.x}function sie(t){return 1+t.reduce(rie,0)}function rie(t,e){return Math.max(t,e.y)}function aie(t){for(var e;e=t.children;)t=e[0];return t}function oie(t){for(var e;e=t.children;)t=e[e.length-1];return t}function lie(){var t=tie,e=1,n=1,i=!1;function s(o){var c,d=0;o.eachAfter(function(w){var m=w.children;m?(w.x=nie(m),w.y=sie(m)):(w.x=c?d+=t(w,c):0,w.y=0,c=w)});var f=aie(o),u=oie(o),a=f.x-t(f,u)/2,_=u.x+t(u,f)/2;return o.eachAfter(i?function(w){w.x=(w.x-o.x)*e,w.y=(o.y-w.y)*n}:function(w){w.x=(w.x-a)/(_-a)*e,w.y=(1-(o.y?w.y/o.y:1))*n})}return s.separation=function(o){return arguments.length?(t=o,s):t},s.size=function(o){return arguments.length?(i=!1,e=+o[0],n=+o[1],s):i?null:[e,n]},s.nodeSize=function(o){return arguments.length?(i=!0,e=+o[0],n=+o[1],s):i?[e,n]:null},s}function cie(t){var e=0,n=t.children,i=n&&n.length;if(!i)e=1;else for(;--i>=0;)e+=n[i].value;t.value=e}function die(){return this.eachAfter(cie)}function fie(t,e){let n=-1;for(const i of this)t.call(e,i,++n,this);return this}function uie(t,e){for(var n=this,i=[n],s,o,c=-1;n=i.pop();)if(t.call(e,n,++c,this),s=n.children)for(o=s.length-1;o>=0;--o)i.push(s[o]);return this}function hie(t,e){for(var n=this,i=[n],s=[],o,c,d,f=-1;n=i.pop();)if(s.push(n),o=n.children)for(c=0,d=o.length;c<d;++c)i.push(o[c]);for(;n=s.pop();)t.call(e,n,++f,this);return this}function pie(t,e){let n=-1;for(const i of this)if(t.call(e,i,++n,this))return i}function gie(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,i=e.children,s=i&&i.length;--s>=0;)n+=i[s].value;e.value=n})}function _ie(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function yie(t){for(var e=this,n=mie(e,t),i=[e];e!==n;)e=e.parent,i.push(e);for(var s=i.length;t!==n;)i.splice(s,0,t),t=t.parent;return i}function mie(t,e){if(t===e)return t;var n=t.ancestors(),i=e.ancestors(),s=null;for(t=n.pop(),e=i.pop();t===e;)s=t,t=n.pop(),e=i.pop();return s}function wie(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function bie(){return Array.from(this)}function Tie(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function vie(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*Eie(){var t=this,e,n=[t],i,s,o;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,i=t.children)for(s=0,o=i.length;s<o;++s)n.push(i[s]);while(n.length)}function l2(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=Bie)):e===void 0&&(e=xie);for(var n=new ep(t),i,s=[n],o,c,d,f;i=s.pop();)if((c=e(i.data))&&(f=(c=Array.from(c)).length))for(i.children=c,d=f-1;d>=0;--d)s.push(o=c[d]=new ep(c[d])),o.parent=i,o.depth=i.depth+1;return n.eachBefore(Fz)}function Sie(){return l2(this).eachBefore(kie)}function xie(t){return t.children}function Bie(t){return Array.isArray(t)?t[1]:null}function kie(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function Fz(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function ep(t){this.data=t,this.depth=this.height=0,this.parent=null}ep.prototype=l2.prototype={constructor:ep,count:die,each:fie,eachAfter:hie,eachBefore:uie,find:pie,sum:gie,sort:_ie,path:yie,ancestors:wie,descendants:bie,leaves:Tie,links:vie,copy:Sie,[Symbol.iterator]:Eie};function u0(t){return t==null?null:Oz(t)}function Oz(t){if(typeof t!="function")throw new Error;return t}function of(){return 0}function oh(t){return function(){return t}}const Iie=1664525,Fie=1013904223,pP=4294967296;function Oie(){let t=1;return()=>(t=(Iie*t+Fie)%pP)/pP}function Mie(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Aie(t,e){let n=t.length,i,s;for(;n;)s=e()*n--|0,i=t[n],t[n]=t[s],t[s]=i;return t}function Nie(t,e){for(var n=0,i=(t=Aie(Array.from(t),e)).length,s=[],o,c;n<i;)o=t[n],c&&Mz(c,o)?++n:(c=Rie(s=Cie(s,o)),n=0);return c}function Cie(t,e){var n,i;if(dx(e,t))return[e];for(n=0;n<t.length;++n)if(Eb(e,t[n])&&dx(o_(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(i=n+1;i<t.length;++i)if(Eb(o_(t[n],t[i]),e)&&Eb(o_(t[n],e),t[i])&&Eb(o_(t[i],e),t[n])&&dx(Az(t[n],t[i],e),t))return[t[n],t[i],e];throw new Error}function Eb(t,e){var n=t.r-e.r,i=e.x-t.x,s=e.y-t.y;return n<0||n*n<i*i+s*s}function Mz(t,e){var n=t.r-e.r+Math.max(t.r,e.r,1)*1e-9,i=e.x-t.x,s=e.y-t.y;return n>0&&n*n>i*i+s*s}function dx(t,e){for(var n=0;n<e.length;++n)if(!Mz(t,e[n]))return!1;return!0}function Rie(t){switch(t.length){case 1:return Lie(t[0]);case 2:return o_(t[0],t[1]);case 3:return Az(t[0],t[1],t[2])}}function Lie(t){return{x:t.x,y:t.y,r:t.r}}function o_(t,e){var n=t.x,i=t.y,s=t.r,o=e.x,c=e.y,d=e.r,f=o-n,u=c-i,a=d-s,_=Math.sqrt(f*f+u*u);return{x:(n+o+f/_*a)/2,y:(i+c+u/_*a)/2,r:(_+s+d)/2}}function Az(t,e,n){var i=t.x,s=t.y,o=t.r,c=e.x,d=e.y,f=e.r,u=n.x,a=n.y,_=n.r,w=i-c,m=i-u,l=s-d,T=s-a,b=f-o,S=_-o,x=i*i+s*s-o*o,B=x-c*c-d*d+f*f,F=x-u*u-a*a+_*_,k=m*l-w*T,A=(l*F-T*B)/(k*2)-i,M=(T*b-l*S)/k,R=(m*B-w*F)/(k*2)-s,P=(w*S-m*b)/k,j=M*M+P*P-1,D=2*(o+A*M+R*P),z=A*A+R*R-o*o,$=-(Math.abs(j)>1e-6?(D+Math.sqrt(D*D-4*j*z))/(2*j):z/D);return{x:i+A+M*$,y:s+R+P*$,r:$}}function gP(t,e,n){var i=t.x-e.x,s,o,c=t.y-e.y,d,f,u=i*i+c*c;u?(o=e.r+n.r,o*=o,f=t.r+n.r,f*=f,o>f?(s=(u+f-o)/(2*u),d=Math.sqrt(Math.max(0,f/u-s*s)),n.x=t.x-s*i-d*c,n.y=t.y-s*c+d*i):(s=(u+o-f)/(2*u),d=Math.sqrt(Math.max(0,o/u-s*s)),n.x=e.x+s*i-d*c,n.y=e.y+s*c+d*i)):(n.x=e.x+n.r,n.y=e.y)}function _P(t,e){var n=t.r+e.r-1e-6,i=e.x-t.x,s=e.y-t.y;return n>0&&n*n>i*i+s*s}function yP(t){var e=t._,n=t.next._,i=e.r+n.r,s=(e.x*n.r+n.x*e.r)/i,o=(e.y*n.r+n.y*e.r)/i;return s*s+o*o}function Sb(t){this._=t,this.next=null,this.previous=null}function Pie(t,e){if(!(o=(t=Mie(t)).length))return 0;var n,i,s,o,c,d,f,u,a,_,w;if(n=t[0],n.x=0,n.y=0,!(o>1))return n.r;if(i=t[1],n.x=-i.r,i.x=n.r,i.y=0,!(o>2))return n.r+i.r;gP(i,n,s=t[2]),n=new Sb(n),i=new Sb(i),s=new Sb(s),n.next=s.previous=i,i.next=n.previous=s,s.next=i.previous=n;e:for(f=3;f<o;++f){gP(n._,i._,s=t[f]),s=new Sb(s),u=i.next,a=n.previous,_=i._.r,w=n._.r;do if(_<=w){if(_P(u._,s._)){i=u,n.next=i,i.previous=n,--f;continue e}_+=u._.r,u=u.next}else{if(_P(a._,s._)){n=a,n.next=i,i.previous=n,--f;continue e}w+=a._.r,a=a.previous}while(u!==a.next);for(s.previous=n,s.next=i,n.next=i.previous=i=s,c=yP(n);(s=s.next)!==i;)(d=yP(s))<c&&(n=s,c=d);i=n.next}for(n=[i._],s=i;(s=s.next)!==i;)n.push(s._);for(s=Nie(n,e),f=0;f<o;++f)n=t[f],n.x-=s.x,n.y-=s.y;return s.r}function Die(t){return Math.sqrt(t.value)}function jie(){var t=null,e=1,n=1,i=of;function s(o){const c=Oie();return o.x=e/2,o.y=n/2,t?o.eachBefore(mP(t)).eachAfter(fx(i,.5,c)).eachBefore(wP(1)):o.eachBefore(mP(Die)).eachAfter(fx(of,1,c)).eachAfter(fx(i,o.r/Math.min(e,n),c)).eachBefore(wP(Math.min(e,n)/(2*o.r))),o}return s.radius=function(o){return arguments.length?(t=u0(o),s):t},s.size=function(o){return arguments.length?(e=+o[0],n=+o[1],s):[e,n]},s.padding=function(o){return arguments.length?(i=typeof o=="function"?o:oh(+o),s):i},s}function mP(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function fx(t,e,n){return function(i){if(s=i.children){var s,o,c=s.length,d=t(i)*e||0,f;if(d)for(o=0;o<c;++o)s[o].r+=d;if(f=Pie(s,n),d)for(o=0;o<c;++o)s[o].r-=d;i.r=f+d}}}function wP(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function Nz(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function Hy(t,e,n,i,s){for(var o=t.children,c,d=-1,f=o.length,u=t.value&&(i-e)/t.value;++d<f;)c=o[d],c.y0=n,c.y1=s,c.x0=e,c.x1=e+=c.value*u}function Uie(){var t=1,e=1,n=0,i=!1;function s(c){var d=c.height+1;return c.x0=c.y0=n,c.x1=t,c.y1=e/d,c.eachBefore(o(e,d)),i&&c.eachBefore(Nz),c}function o(c,d){return function(f){f.children&&Hy(f,f.x0,c*(f.depth+1)/d,f.x1,c*(f.depth+2)/d);var u=f.x0,a=f.y0,_=f.x1-n,w=f.y1-n;_<u&&(u=_=(u+_)/2),w<a&&(a=w=(a+w)/2),f.x0=u,f.y0=a,f.x1=_,f.y1=w}}return s.round=function(c){return arguments.length?(i=!!c,s):i},s.size=function(c){return arguments.length?(t=+c[0],e=+c[1],s):[t,e]},s.padding=function(c){return arguments.length?(n=+c,s):n},s}var zie={depth:-1},bP={},ux={};function $ie(t){return t.id}function qie(t){return t.parentId}function TP(){var t=$ie,e=qie,n;function i(s){var o=Array.from(s),c=t,d=e,f,u,a,_,w,m,l,T,b=new Map;if(n!=null){const S=o.map((F,k)=>Gie(n(F,k,s))),x=S.map(vP),B=new Set(S).add("");for(const F of x)B.has(F)||(B.add(F),S.push(F),x.push(vP(F)),o.push(ux));c=(F,k)=>S[k],d=(F,k)=>x[k]}for(a=0,f=o.length;a<f;++a)u=o[a],m=o[a]=new ep(u),(l=c(u,a,s))!=null&&(l+="")&&(T=m.id=l,b.set(T,b.has(T)?bP:m)),(l=d(u,a,s))!=null&&(l+="")&&(m.parent=l);for(a=0;a<f;++a)if(m=o[a],l=m.parent){if(w=b.get(l),!w)throw new Error("missing: "+l);if(w===bP)throw new Error("ambiguous: "+l);w.children?w.children.push(m):w.children=[m],m.parent=w}else{if(_)throw new Error("multiple roots");_=m}if(!_)throw new Error("no root");if(n!=null){for(;_.data===ux&&_.children.length===1;)_=_.children[0],--f;for(let S=o.length-1;S>=0&&(m=o[S],m.data===ux);--S)m.data=null}if(_.parent=zie,_.eachBefore(function(S){S.depth=S.parent.depth+1,--f}).eachBefore(Fz),_.parent=null,f>0)throw new Error("cycle");return _}return i.id=function(s){return arguments.length?(t=u0(s),i):t},i.parentId=function(s){return arguments.length?(e=u0(s),i):e},i.path=function(s){return arguments.length?(n=u0(s),i):n},i}function Gie(t){t=`${t}`;let e=t.length;return bk(t,e-1)&&!bk(t,e-2)&&(t=t.slice(0,-1)),t[0]==="/"?t:`/${t}`}function vP(t){let e=t.length;if(e<2)return"";for(;--e>1&&!bk(t,e););return t.slice(0,e)}function bk(t,e){if(t[e]==="/"){let n=0;for(;e>0&&t[--e]==="\\";)++n;if((n&1)===0)return!0}return!1}function Vie(t,e){return t.parent===e.parent?1:2}function hx(t){var e=t.children;return e?e[0]:t.t}function px(t){var e=t.children;return e?e[e.length-1]:t.t}function Hie(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function Wie(t){for(var e=0,n=0,i=t.children,s=i.length,o;--s>=0;)o=i[s],o.z+=e,o.m+=e,e+=o.s+(n+=o.c)}function Yie(t,e,n){return t.a.parent===e.parent?t.a:n}function h0(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}h0.prototype=Object.create(ep.prototype);function Xie(t){for(var e=new h0(t,0),n,i=[e],s,o,c,d;n=i.pop();)if(o=n._.children)for(n.children=new Array(d=o.length),c=d-1;c>=0;--c)i.push(s=n.children[c]=new h0(o[c],c)),s.parent=n;return(e.parent=new h0(null,0)).children=[e],e}function Kie(){var t=Vie,e=1,n=1,i=null;function s(u){var a=Xie(u);if(a.eachAfter(o),a.parent.m=-a.z,a.eachBefore(c),i)u.eachBefore(f);else{var _=u,w=u,m=u;u.eachBefore(function(x){x.x<_.x&&(_=x),x.x>w.x&&(w=x),x.depth>m.depth&&(m=x)});var l=_===w?1:t(_,w)/2,T=l-_.x,b=e/(w.x+l+T),S=n/(m.depth||1);u.eachBefore(function(x){x.x=(x.x+T)*b,x.y=x.depth*S})}return u}function o(u){var a=u.children,_=u.parent.children,w=u.i?_[u.i-1]:null;if(a){Wie(u);var m=(a[0].z+a[a.length-1].z)/2;w?(u.z=w.z+t(u._,w._),u.m=u.z-m):u.z=m}else w&&(u.z=w.z+t(u._,w._));u.parent.A=d(u,w,u.parent.A||_[0])}function c(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function d(u,a,_){if(a){for(var w=u,m=u,l=a,T=w.parent.children[0],b=w.m,S=m.m,x=l.m,B=T.m,F;l=px(l),w=hx(w),l&&w;)T=hx(T),m=px(m),m.a=u,F=l.z+x-w.z-b+t(l._,w._),F>0&&(Hie(Yie(l,u,_),u,F),b+=F,S+=F),x+=l.m,b+=w.m,B+=T.m,S+=m.m;l&&!px(m)&&(m.t=l,m.m+=x-S),w&&!hx(T)&&(T.t=w,T.m+=b-B,_=u)}return _}function f(u){u.x*=e,u.y=u.depth*n}return s.separation=function(u){return arguments.length?(t=u,s):t},s.size=function(u){return arguments.length?(i=!1,e=+u[0],n=+u[1],s):i?null:[e,n]},s.nodeSize=function(u){return arguments.length?(i=!0,e=+u[0],n=+u[1],s):i?[e,n]:null},s}function C1(t,e,n,i,s){for(var o=t.children,c,d=-1,f=o.length,u=t.value&&(s-n)/t.value;++d<f;)c=o[d],c.x0=e,c.x1=i,c.y0=n,c.y1=n+=c.value*u}var Cz=(1+Math.sqrt(5))/2;function Rz(t,e,n,i,s,o){for(var c=[],d=e.children,f,u,a=0,_=0,w=d.length,m,l,T=e.value,b,S,x,B,F,k,A;a<w;){m=s-n,l=o-i;do b=d[_++].value;while(!b&&_<w);for(S=x=b,k=Math.max(l/m,m/l)/(T*t),A=b*b*k,F=Math.max(x/A,A/S);_<w;++_){if(b+=u=d[_].value,u<S&&(S=u),u>x&&(x=u),A=b*b*k,B=Math.max(x/A,A/S),B>F){b-=u;break}F=B}c.push(f={value:b,dice:m<l,children:d.slice(a,_)}),f.dice?Hy(f,n,i,s,T?i+=l*b/T:o):C1(f,n,i,T?n+=m*b/T:s,o),T-=b,a=_}return c}const Lz=function t(e){function n(i,s,o,c,d){Rz(e,i,s,o,c,d)}return n.ratio=function(i){return t((i=+i)>1?i:1)},n}(Cz);function Jie(){var t=Lz,e=!1,n=1,i=1,s=[0],o=of,c=of,d=of,f=of,u=of;function a(w){return w.x0=w.y0=0,w.x1=n,w.y1=i,w.eachBefore(_),s=[0],e&&w.eachBefore(Nz),w}function _(w){var m=s[w.depth],l=w.x0+m,T=w.y0+m,b=w.x1-m,S=w.y1-m;b<l&&(l=b=(l+b)/2),S<T&&(T=S=(T+S)/2),w.x0=l,w.y0=T,w.x1=b,w.y1=S,w.children&&(m=s[w.depth+1]=o(w)/2,l+=u(w)-m,T+=c(w)-m,b-=d(w)-m,S-=f(w)-m,b<l&&(l=b=(l+b)/2),S<T&&(T=S=(T+S)/2),t(w,l,T,b,S))}return a.round=function(w){return arguments.length?(e=!!w,a):e},a.size=function(w){return arguments.length?(n=+w[0],i=+w[1],a):[n,i]},a.tile=function(w){return arguments.length?(t=Oz(w),a):t},a.padding=function(w){return arguments.length?a.paddingInner(w).paddingOuter(w):a.paddingInner()},a.paddingInner=function(w){return arguments.length?(o=typeof w=="function"?w:oh(+w),a):o},a.paddingOuter=function(w){return arguments.length?a.paddingTop(w).paddingRight(w).paddingBottom(w).paddingLeft(w):a.paddingTop()},a.paddingTop=function(w){return arguments.length?(c=typeof w=="function"?w:oh(+w),a):c},a.paddingRight=function(w){return arguments.length?(d=typeof w=="function"?w:oh(+w),a):d},a.paddingBottom=function(w){return arguments.length?(f=typeof w=="function"?w:oh(+w),a):f},a.paddingLeft=function(w){return arguments.length?(u=typeof w=="function"?w:oh(+w),a):u},a}function Qie(t,e,n,i,s){var o=t.children,c,d=o.length,f,u=new Array(d+1);for(u[0]=f=c=0;c<d;++c)u[c+1]=f+=o[c].value;a(0,d,t.value,e,n,i,s);function a(_,w,m,l,T,b,S){if(_>=w-1){var x=o[_];x.x0=l,x.y0=T,x.x1=b,x.y1=S;return}for(var B=u[_],F=m/2+B,k=_+1,A=w-1;k<A;){var M=k+A>>>1;u[M]<F?k=M+1:A=M}F-u[k-1]<u[k]-F&&_+1<k&&--k;var R=u[k]-B,P=m-R;if(b-l>S-T){var j=m?(l*P+b*R)/m:b;a(_,k,R,l,T,j,S),a(k,w,P,j,T,b,S)}else{var D=m?(T*P+S*R)/m:S;a(_,k,R,l,T,b,D),a(k,w,P,l,D,b,S)}}}function Zie(t,e,n,i,s){(t.depth&1?C1:Hy)(t,e,n,i,s)}const ese=function t(e){function n(i,s,o,c,d){if((f=i._squarify)&&f.ratio===e)for(var f,u,a,_,w=-1,m,l=f.length,T=i.value;++w<l;){for(u=f[w],a=u.children,_=u.value=0,m=a.length;_<m;++_)u.value+=a[_].value;u.dice?Hy(u,s,o,c,T?o+=(d-o)*u.value/T:d):C1(u,s,o,T?s+=(c-s)*u.value/T:c,d),T-=u.value}else i._squarify=f=Rz(e,i,s,o,c,d),f.ratio=e}return n.ratio=function(i){return t((i=+i)>1?i:1)},n}(Cz);function Ho(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function vd(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Tk=Symbol("implicit");function c2(){var t=new dL,e=[],n=[],i=Tk;function s(o){let c=t.get(o);if(c===void 0){if(i!==Tk)return i;t.set(o,c=e.push(o)-1)}return n[c%n.length]}return s.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new dL;for(const c of o)t.has(c)||t.set(c,e.push(c)-1);return s},s.range=function(o){return arguments.length?(n=Array.from(o),s):n.slice()},s.unknown=function(o){return arguments.length?(i=o,s):i},s.copy=function(){return c2(e,n).unknown(i)},Ho.apply(s,arguments),s}function tse(t){return function(){return t}}function vk(t){return+t}var EP=[0,1];function Is(t){return t}function Ek(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:tse(isNaN(e)?NaN:.5)}function nse(t,e){var n;return t>e&&(n=t,t=e,e=n),function(i){return Math.max(t,Math.min(e,i))}}function ise(t,e,n){var i=t[0],s=t[1],o=e[0],c=e[1];return s<i?(i=Ek(s,i),o=n(c,o)):(i=Ek(i,s),o=n(o,c)),function(d){return o(i(d))}}function sse(t,e,n){var i=Math.min(t.length,e.length)-1,s=new Array(i),o=new Array(i),c=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++c<i;)s[c]=Ek(t[c],t[c+1]),o[c]=n(e[c],e[c+1]);return function(d){var f=Dy(t,d,1,i)-1;return o[f](s[f](d))}}function Wy(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function R1(){var t=EP,e=EP,n=bd,i,s,o,c=Is,d,f,u;function a(){var w=Math.min(t.length,e.length);return c!==Is&&(c=nse(t[0],t[w-1])),d=w>2?sse:ise,f=u=null,_}function _(w){return w==null||isNaN(w=+w)?o:(f||(f=d(t.map(i),e,n)))(i(c(w)))}return _.invert=function(w){return c(s((u||(u=d(e,t.map(i),la)))(w)))},_.domain=function(w){return arguments.length?(t=Array.from(w,vk),a()):t.slice()},_.range=function(w){return arguments.length?(e=Array.from(w),a()):e.slice()},_.rangeRound=function(w){return e=Array.from(w),n=$y,a()},_.clamp=function(w){return arguments.length?(c=w?!0:Is,a()):c!==Is},_.interpolate=function(w){return arguments.length?(n=w,a()):n},_.unknown=function(w){return arguments.length?(o=w,_):o},function(w,m){return i=w,s=m,a()}}function Pz(){return R1()(Is,Is)}function Dz(t,e,n,i){var s=Hc(t,e,n),o;switch(i=Gf(i==null?",f":i),i.type){case"s":{var c=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(o=U8(s,c))&&(i.precision=o),e2(i,c)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(o=z8(s,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=o-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(o=j8(s))&&(i.precision=o-(i.type==="%")*2);break}}return O1(i)}function Eu(t){var e=t.domain;return t.ticks=function(n){var i=e();return $B(i[0],i[i.length-1],n==null?10:n)},t.tickFormat=function(n,i){var s=e();return Dz(s[0],s[s.length-1],n==null?10:n,i)},t.nice=function(n){n==null&&(n=10);var i=e(),s=0,o=i.length-1,c=i[s],d=i[o],f,u,a=10;for(d<c&&(u=c,c=d,d=u,u=s,s=o,o=u);a-- >0;){if(u=zU(c,d,n),u===f)return i[s]=c,i[o]=d,e(i);if(u>0)c=Math.floor(c/u)*u,d=Math.ceil(d/u)*u;else if(u<0)c=Math.ceil(c*u)/u,d=Math.floor(d*u)/u;else break;f=u}return t},t}function jz(){var t=Pz();return t.copy=function(){return Wy(t,jz())},Ho.apply(t,arguments),Eu(t)}function Uz(t){var e;function n(i){return i==null||isNaN(i=+i)?e:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(t=Array.from(i,vk),n):t.slice()},n.unknown=function(i){return arguments.length?(e=i,n):e},n.copy=function(){return Uz(t).unknown(e)},t=arguments.length?Array.from(t,vk):[0,1],Eu(n)}function zz(t,e){t=t.slice();var n=0,i=t.length-1,s=t[n],o=t[i],c;return o<s&&(c=n,n=i,i=c,c=s,s=o,o=c),t[n]=e.floor(s),t[i]=e.ceil(o),t}function SP(t){return Math.log(t)}function xP(t){return Math.exp(t)}function rse(t){return-Math.log(-t)}function ase(t){return-Math.exp(-t)}function ose(t){return isFinite(t)?+("1e"+t):t<0?0:t}function lse(t){return t===10?ose:t===Math.E?Math.exp:e=>Math.pow(t,e)}function cse(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function BP(t){return(e,n)=>-t(-e,n)}function d2(t){const e=t(SP,xP),n=e.domain;let i=10,s,o;function c(){return s=cse(i),o=lse(i),n()[0]<0?(s=BP(s),o=BP(o),t(rse,ase)):t(SP,xP),e}return e.base=function(d){return arguments.length?(i=+d,c()):i},e.domain=function(d){return arguments.length?(n(d),c()):n()},e.ticks=d=>{const f=n();let u=f[0],a=f[f.length-1];const _=a<u;_&&([u,a]=[a,u]);let w=s(u),m=s(a),l,T;const b=d==null?10:+d;let S=[];if(!(i%1)&&m-w<b){if(w=Math.floor(w),m=Math.ceil(m),u>0){for(;w<=m;++w)for(l=1;l<i;++l)if(T=w<0?l/o(-w):l*o(w),!(T<u)){if(T>a)break;S.push(T)}}else for(;w<=m;++w)for(l=i-1;l>=1;--l)if(T=w>0?l/o(-w):l*o(w),!(T<u)){if(T>a)break;S.push(T)}S.length*2<b&&(S=$B(u,a,b))}else S=$B(w,m,Math.min(m-w,b)).map(o);return _?S.reverse():S},e.tickFormat=(d,f)=>{if(d==null&&(d=10),f==null&&(f=i===10?"s":","),typeof f!="function"&&(!(i%1)&&(f=Gf(f)).precision==null&&(f.trim=!0),f=O1(f)),d===1/0)return f;const u=Math.max(1,i*d/e.ticks().length);return a=>{let _=a/o(Math.round(s(a)));return _*i<i-.5&&(_*=i),_<=u?f(a):""}},e.nice=()=>n(zz(n(),{floor:d=>o(Math.floor(s(d))),ceil:d=>o(Math.ceil(s(d)))})),e}function $z(){const t=d2(R1()).domain([1,10]);return t.copy=()=>Wy(t,$z()).base(t.base()),Ho.apply(t,arguments),t}function kP(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function IP(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function f2(t){var e=1,n=t(kP(e),IP(e));return n.constant=function(i){return arguments.length?t(kP(e=+i),IP(e)):e},Eu(n)}function qz(){var t=f2(R1());return t.copy=function(){return Wy(t,qz()).constant(t.constant())},Ho.apply(t,arguments)}function FP(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function dse(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function fse(t){return t<0?-t*t:t*t}function u2(t){var e=t(Is,Is),n=1;function i(){return n===1?t(Is,Is):n===.5?t(dse,fse):t(FP(n),FP(1/n))}return e.exponent=function(s){return arguments.length?(n=+s,i()):n},Eu(e)}function h2(){var t=u2(R1());return t.copy=function(){return Wy(t,h2()).exponent(t.exponent())},Ho.apply(t,arguments),t}function use(){return h2.apply(null,arguments).exponent(.5)}function Gz(){var t=[],e=[],n=[],i;function s(){var c=0,d=Math.max(1,e.length);for(n=new Array(d-1);++c<d;)n[c-1]=qU(t,c/d);return o}function o(c){return c==null||isNaN(c=+c)?i:e[Dy(n,c)]}return o.invertExtent=function(c){var d=e.indexOf(c);return d<0?[NaN,NaN]:[d>0?n[d-1]:t[0],d<n.length?n[d]:t[t.length-1]]},o.domain=function(c){if(!arguments.length)return t.slice();t=[];for(let d of c)d!=null&&!isNaN(d=+d)&&t.push(d);return t.sort(Ml),s()},o.range=function(c){return arguments.length?(e=Array.from(c),s()):e.slice()},o.unknown=function(c){return arguments.length?(i=c,o):i},o.quantiles=function(){return n.slice()},o.copy=function(){return Gz().domain(t).range(e).unknown(i)},Ho.apply(o,arguments)}function Vz(){var t=0,e=1,n=1,i=[.5],s=[0,1],o;function c(f){return f!=null&&f<=f?s[Dy(i,f,0,n)]:o}function d(){var f=-1;for(i=new Array(n);++f<n;)i[f]=((f+1)*e-(f-n)*t)/(n+1);return c}return c.domain=function(f){return arguments.length?([t,e]=f,t=+t,e=+e,d()):[t,e]},c.range=function(f){return arguments.length?(n=(s=Array.from(f)).length-1,d()):s.slice()},c.invertExtent=function(f){var u=s.indexOf(f);return u<0?[NaN,NaN]:u<1?[t,i[0]]:u>=n?[i[n-1],e]:[i[u-1],i[u]]},c.unknown=function(f){return arguments.length&&(o=f),c},c.thresholds=function(){return i.slice()},c.copy=function(){return Vz().domain([t,e]).range(s).unknown(o)},Ho.apply(Eu(c),arguments)}function Hz(){var t=[.5],e=[0,1],n,i=1;function s(o){return o!=null&&o<=o?e[Dy(t,o,0,i)]:n}return s.domain=function(o){return arguments.length?(t=Array.from(o),i=Math.min(t.length,e.length-1),s):t.slice()},s.range=function(o){return arguments.length?(e=Array.from(o),i=Math.min(t.length,e.length-1),s):e.slice()},s.invertExtent=function(o){var c=e.indexOf(o);return[t[c-1],t[c]]},s.unknown=function(o){return arguments.length?(n=o,s):n},s.copy=function(){return Hz().domain(t).range(e).unknown(n)},Ho.apply(s,arguments)}var gx=new Date,_x=new Date;function mi(t,e,n,i){function s(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return s.floor=function(o){return t(o=new Date(+o)),o},s.ceil=function(o){return t(o=new Date(o-1)),e(o,1),t(o),o},s.round=function(o){var c=s(o),d=s.ceil(o);return o-c<d-o?c:d},s.offset=function(o,c){return e(o=new Date(+o),c==null?1:Math.floor(c)),o},s.range=function(o,c,d){var f=[],u;if(o=s.ceil(o),d=d==null?1:Math.floor(d),!(o<c)||!(d>0))return f;do f.push(u=new Date(+o)),e(o,d),t(o);while(u<o&&o<c);return f},s.filter=function(o){return mi(function(c){if(c>=c)for(;t(c),!o(c);)c.setTime(c-1)},function(c,d){if(c>=c)if(d<0)for(;++d<=0;)for(;e(c,-1),!o(c););else for(;--d>=0;)for(;e(c,1),!o(c););})},n&&(s.count=function(o,c){return gx.setTime(+o),_x.setTime(+c),t(gx),t(_x),Math.floor(n(gx,_x))},s.every=function(o){return o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?s.filter(i?function(c){return i(c)%o===0}:function(c){return s.count(0,c)%o===0}):s}),s}var IT=mi(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});IT.every=function(t){return t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?mi(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):IT};const p2=IT;IT.range;const Bl=1e3,Ir=Bl*60,kl=Ir*60,Wf=kl*24,g2=Wf*7,OP=Wf*30,yx=Wf*365;var Wz=mi(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+e*Bl)},function(t,e){return(e-t)/Bl},function(t){return t.getUTCSeconds()});const xc=Wz;Wz.range;var Yz=mi(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Bl)},function(t,e){t.setTime(+t+e*Ir)},function(t,e){return(e-t)/Ir},function(t){return t.getMinutes()});const _2=Yz;Yz.range;var Xz=mi(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Bl-t.getMinutes()*Ir)},function(t,e){t.setTime(+t+e*kl)},function(t,e){return(e-t)/kl},function(t){return t.getHours()});const y2=Xz;Xz.range;var Kz=mi(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ir)/Wf,t=>t.getDate()-1);const Nc=Kz;Kz.range;function Su(t){return mi(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(e,n){e.setDate(e.getDate()+n*7)},function(e,n){return(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Ir)/g2})}var Kp=Su(0),FT=Su(1),hse=Su(2),pse=Su(3),tp=Su(4),gse=Su(5),_se=Su(6);Kp.range;FT.range;hse.range;pse.range;tp.range;gse.range;_se.range;var Jz=mi(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12},function(t){return t.getMonth()});const OT=Jz;Jz.range;var m2=mi(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});m2.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:mi(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)})};const Yc=m2;m2.range;var Qz=mi(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*Ir)},function(t,e){return(e-t)/Ir},function(t){return t.getUTCMinutes()});const w2=Qz;Qz.range;var Zz=mi(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*kl)},function(t,e){return(e-t)/kl},function(t){return t.getUTCHours()});const b2=Zz;Zz.range;var e$=mi(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/Wf},function(t){return t.getUTCDate()-1});const Cc=e$;e$.range;function xu(t){return mi(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCDate(e.getUTCDate()+n*7)},function(e,n){return(n-e)/g2})}var Jp=xu(0),MT=xu(1),yse=xu(2),mse=xu(3),np=xu(4),wse=xu(5),bse=xu(6);Jp.range;MT.range;yse.range;mse.range;np.range;wse.range;bse.range;var t$=mi(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12},function(t){return t.getUTCMonth()});const AT=t$;t$.range;var T2=mi(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});T2.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:mi(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})};const Xc=T2;T2.range;function n$(t,e,n,i,s,o){const c=[[xc,1,Bl],[xc,5,5*Bl],[xc,15,15*Bl],[xc,30,30*Bl],[o,1,Ir],[o,5,5*Ir],[o,15,15*Ir],[o,30,30*Ir],[s,1,kl],[s,3,3*kl],[s,6,6*kl],[s,12,12*kl],[i,1,Wf],[i,2,2*Wf],[n,1,g2],[e,1,OP],[e,3,3*OP],[t,1,yx]];function d(u,a,_){const w=a<u;w&&([u,a]=[a,u]);const m=_&&typeof _.range=="function"?_:f(u,a,_),l=m?m.range(u,+a+1):[];return w?l.reverse():l}function f(u,a,_){const w=Math.abs(a-u)/_,m=Py(([,,b])=>b).right(c,w);if(m===c.length)return t.every(Hc(u/yx,a/yx,_));if(m===0)return p2.every(Math.max(Hc(u,a,_),1));const[l,T]=c[w/c[m-1][2]<c[m][2]/w?m-1:m];return l.every(T)}return[d,f]}const[Tse,vse]=n$(Xc,AT,Jp,Cc,b2,w2),[Ese,Sse]=n$(Yc,OT,Kp,Nc,y2,_2);function mx(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function wx(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Ig(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function i$(t){var e=t.dateTime,n=t.date,i=t.time,s=t.periods,o=t.days,c=t.shortDays,d=t.months,f=t.shortMonths,u=Fg(s),a=Og(s),_=Fg(o),w=Og(o),m=Fg(c),l=Og(c),T=Fg(d),b=Og(d),S=Fg(f),x=Og(f),B={a:J,A:V,b:le,B:pe,c:null,d:LP,e:LP,f:Wse,g:ire,G:rre,H:Gse,I:Vse,j:Hse,L:s$,m:Yse,M:Xse,p:se,q:Ne,Q:jP,s:UP,S:Kse,u:Jse,U:Qse,V:Zse,w:ere,W:tre,x:null,X:null,y:nre,Y:sre,Z:are,"%":DP},F={a:fe,A:Oe,b:Ce,B:We,c:null,d:PP,e:PP,f:dre,g:bre,G:vre,H:ore,I:lre,j:cre,L:a$,m:fre,M:ure,p:Bt,q:vt,Q:jP,s:UP,S:hre,u:pre,U:gre,V:_re,w:yre,W:mre,x:null,X:null,y:wre,Y:Tre,Z:Ere,"%":DP},k={a:j,A:D,b:z,B:$,c:K,d:CP,e:CP,f:Use,g:NP,G:AP,H:RP,I:RP,j:Lse,L:jse,m:Rse,M:Pse,p:P,q:Cse,Q:$se,s:qse,S:Dse,u:Fse,U:Ose,V:Mse,w:Ise,W:Ase,x:H,X:W,y:NP,Y:AP,Z:Nse,"%":zse};B.x=A(n,B),B.X=A(i,B),B.c=A(e,B),F.x=A(n,F),F.X=A(i,F),F.c=A(e,F);function A(ge,q){return function(G){var L=[],Y=-1,Q=0,ae=ge.length,re,_e,Ee;for(G instanceof Date||(G=new Date(+G));++Y<ae;)ge.charCodeAt(Y)===37&&(L.push(ge.slice(Q,Y)),(_e=MP[re=ge.charAt(++Y)])!=null?re=ge.charAt(++Y):_e=re==="e"?" ":"0",(Ee=q[re])&&(re=Ee(G,_e)),L.push(re),Q=Y+1);return L.push(ge.slice(Q,Y)),L.join("")}}function M(ge,q){return function(G){var L=Ig(1900,void 0,1),Y=R(L,ge,G+="",0),Q,ae;if(Y!=G.length)return null;if("Q"in L)return new Date(L.Q);if("s"in L)return new Date(L.s*1e3+("L"in L?L.L:0));if(q&&!("Z"in L)&&(L.Z=0),"p"in L&&(L.H=L.H%12+L.p*12),L.m===void 0&&(L.m="q"in L?L.q:0),"V"in L){if(L.V<1||L.V>53)return null;"w"in L||(L.w=1),"Z"in L?(Q=wx(Ig(L.y,0,1)),ae=Q.getUTCDay(),Q=ae>4||ae===0?MT.ceil(Q):MT(Q),Q=Cc.offset(Q,(L.V-1)*7),L.y=Q.getUTCFullYear(),L.m=Q.getUTCMonth(),L.d=Q.getUTCDate()+(L.w+6)%7):(Q=mx(Ig(L.y,0,1)),ae=Q.getDay(),Q=ae>4||ae===0?FT.ceil(Q):FT(Q),Q=Nc.offset(Q,(L.V-1)*7),L.y=Q.getFullYear(),L.m=Q.getMonth(),L.d=Q.getDate()+(L.w+6)%7)}else("W"in L||"U"in L)&&("w"in L||(L.w="u"in L?L.u%7:"W"in L?1:0),ae="Z"in L?wx(Ig(L.y,0,1)).getUTCDay():mx(Ig(L.y,0,1)).getDay(),L.m=0,L.d="W"in L?(L.w+6)%7+L.W*7-(ae+5)%7:L.w+L.U*7-(ae+6)%7);return"Z"in L?(L.H+=L.Z/100|0,L.M+=L.Z%100,wx(L)):mx(L)}}function R(ge,q,G,L){for(var Y=0,Q=q.length,ae=G.length,re,_e;Y<Q;){if(L>=ae)return-1;if(re=q.charCodeAt(Y++),re===37){if(re=q.charAt(Y++),_e=k[re in MP?q.charAt(Y++):re],!_e||(L=_e(ge,G,L))<0)return-1}else if(re!=G.charCodeAt(L++))return-1}return L}function P(ge,q,G){var L=u.exec(q.slice(G));return L?(ge.p=a.get(L[0].toLowerCase()),G+L[0].length):-1}function j(ge,q,G){var L=m.exec(q.slice(G));return L?(ge.w=l.get(L[0].toLowerCase()),G+L[0].length):-1}function D(ge,q,G){var L=_.exec(q.slice(G));return L?(ge.w=w.get(L[0].toLowerCase()),G+L[0].length):-1}function z(ge,q,G){var L=S.exec(q.slice(G));return L?(ge.m=x.get(L[0].toLowerCase()),G+L[0].length):-1}function $(ge,q,G){var L=T.exec(q.slice(G));return L?(ge.m=b.get(L[0].toLowerCase()),G+L[0].length):-1}function K(ge,q,G){return R(ge,e,q,G)}function H(ge,q,G){return R(ge,n,q,G)}function W(ge,q,G){return R(ge,i,q,G)}function J(ge){return c[ge.getDay()]}function V(ge){return o[ge.getDay()]}function le(ge){return f[ge.getMonth()]}function pe(ge){return d[ge.getMonth()]}function se(ge){return s[+(ge.getHours()>=12)]}function Ne(ge){return 1+~~(ge.getMonth()/3)}function fe(ge){return c[ge.getUTCDay()]}function Oe(ge){return o[ge.getUTCDay()]}function Ce(ge){return f[ge.getUTCMonth()]}function We(ge){return d[ge.getUTCMonth()]}function Bt(ge){return s[+(ge.getUTCHours()>=12)]}function vt(ge){return 1+~~(ge.getUTCMonth()/3)}return{format:function(ge){var q=A(ge+="",B);return q.toString=function(){return ge},q},parse:function(ge){var q=M(ge+="",!1);return q.toString=function(){return ge},q},utcFormat:function(ge){var q=A(ge+="",F);return q.toString=function(){return ge},q},utcParse:function(ge){var q=M(ge+="",!0);return q.toString=function(){return ge},q}}}var MP={"-":"",_:" ",0:"0"},wi=/^\s*\d+/,xse=/^%/,Bse=/[\\^$*+?|[\]().{}]/g;function Gt(t,e,n){var i=t<0?"-":"",s=(i?-t:t)+"",o=s.length;return i+(o<n?new Array(n-o+1).join(e)+s:s)}function kse(t){return t.replace(Bse,"\\$&")}function Fg(t){return new RegExp("^(?:"+t.map(kse).join("|")+")","i")}function Og(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Ise(t,e,n){var i=wi.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function Fse(t,e,n){var i=wi.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function Ose(t,e,n){var i=wi.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function Mse(t,e,n){var i=wi.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function Ase(t,e,n){var i=wi.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function AP(t,e,n){var i=wi.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function NP(t,e,n){var i=wi.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function Nse(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function Cse(t,e,n){var i=wi.exec(e.slice(n,n+1));return i?(t.q=i[0]*3-3,n+i[0].length):-1}function Rse(t,e,n){var i=wi.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function CP(t,e,n){var i=wi.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function Lse(t,e,n){var i=wi.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function RP(t,e,n){var i=wi.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function Pse(t,e,n){var i=wi.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function Dse(t,e,n){var i=wi.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function jse(t,e,n){var i=wi.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function Use(t,e,n){var i=wi.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function zse(t,e,n){var i=xse.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function $se(t,e,n){var i=wi.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function qse(t,e,n){var i=wi.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function LP(t,e){return Gt(t.getDate(),e,2)}function Gse(t,e){return Gt(t.getHours(),e,2)}function Vse(t,e){return Gt(t.getHours()%12||12,e,2)}function Hse(t,e){return Gt(1+Nc.count(Yc(t),t),e,3)}function s$(t,e){return Gt(t.getMilliseconds(),e,3)}function Wse(t,e){return s$(t,e)+"000"}function Yse(t,e){return Gt(t.getMonth()+1,e,2)}function Xse(t,e){return Gt(t.getMinutes(),e,2)}function Kse(t,e){return Gt(t.getSeconds(),e,2)}function Jse(t){var e=t.getDay();return e===0?7:e}function Qse(t,e){return Gt(Kp.count(Yc(t)-1,t),e,2)}function r$(t){var e=t.getDay();return e>=4||e===0?tp(t):tp.ceil(t)}function Zse(t,e){return t=r$(t),Gt(tp.count(Yc(t),t)+(Yc(t).getDay()===4),e,2)}function ere(t){return t.getDay()}function tre(t,e){return Gt(FT.count(Yc(t)-1,t),e,2)}function nre(t,e){return Gt(t.getFullYear()%100,e,2)}function ire(t,e){return t=r$(t),Gt(t.getFullYear()%100,e,2)}function sre(t,e){return Gt(t.getFullYear()%1e4,e,4)}function rre(t,e){var n=t.getDay();return t=n>=4||n===0?tp(t):tp.ceil(t),Gt(t.getFullYear()%1e4,e,4)}function are(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Gt(e/60|0,"0",2)+Gt(e%60,"0",2)}function PP(t,e){return Gt(t.getUTCDate(),e,2)}function ore(t,e){return Gt(t.getUTCHours(),e,2)}function lre(t,e){return Gt(t.getUTCHours()%12||12,e,2)}function cre(t,e){return Gt(1+Cc.count(Xc(t),t),e,3)}function a$(t,e){return Gt(t.getUTCMilliseconds(),e,3)}function dre(t,e){return a$(t,e)+"000"}function fre(t,e){return Gt(t.getUTCMonth()+1,e,2)}function ure(t,e){return Gt(t.getUTCMinutes(),e,2)}function hre(t,e){return Gt(t.getUTCSeconds(),e,2)}function pre(t){var e=t.getUTCDay();return e===0?7:e}function gre(t,e){return Gt(Jp.count(Xc(t)-1,t),e,2)}function o$(t){var e=t.getUTCDay();return e>=4||e===0?np(t):np.ceil(t)}function _re(t,e){return t=o$(t),Gt(np.count(Xc(t),t)+(Xc(t).getUTCDay()===4),e,2)}function yre(t){return t.getUTCDay()}function mre(t,e){return Gt(MT.count(Xc(t)-1,t),e,2)}function wre(t,e){return Gt(t.getUTCFullYear()%100,e,2)}function bre(t,e){return t=o$(t),Gt(t.getUTCFullYear()%100,e,2)}function Tre(t,e){return Gt(t.getUTCFullYear()%1e4,e,4)}function vre(t,e){var n=t.getUTCDay();return t=n>=4||n===0?np(t):np.ceil(t),Gt(t.getUTCFullYear()%1e4,e,4)}function Ere(){return"+0000"}function DP(){return"%"}function jP(t){return+t}function UP(t){return Math.floor(+t/1e3)}var Hu,v2,l$,E2,c$;Sre({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Sre(t){return Hu=i$(t),v2=Hu.format,l$=Hu.parse,E2=Hu.utcFormat,c$=Hu.utcParse,Hu}function xre(t){return new Date(t)}function Bre(t){return t instanceof Date?+t:+new Date(+t)}function S2(t,e,n,i,s,o,c,d,f,u){var a=Pz(),_=a.invert,w=a.domain,m=u(".%L"),l=u(":%S"),T=u("%I:%M"),b=u("%I %p"),S=u("%a %d"),x=u("%b %d"),B=u("%B"),F=u("%Y");function k(A){return(f(A)<A?m:d(A)<A?l:c(A)<A?T:o(A)<A?b:i(A)<A?s(A)<A?S:x:n(A)<A?B:F)(A)}return a.invert=function(A){return new Date(_(A))},a.domain=function(A){return arguments.length?w(Array.from(A,Bre)):w().map(xre)},a.ticks=function(A){var M=w();return t(M[0],M[M.length-1],A==null?10:A)},a.tickFormat=function(A,M){return M==null?k:u(M)},a.nice=function(A){var M=w();return(!A||typeof A.range!="function")&&(A=e(M[0],M[M.length-1],A==null?10:A)),A?w(zz(M,A)):a},a.copy=function(){return Wy(a,S2(t,e,n,i,s,o,c,d,f,u))},a}function kre(){return Ho.apply(S2(Ese,Sse,Yc,OT,Kp,Nc,y2,_2,xc,v2).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Ire(){return Ho.apply(S2(Tse,vse,Xc,AT,Jp,Cc,b2,w2,xc,E2).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function L1(){var t=0,e=1,n,i,s,o,c=Is,d=!1,f;function u(_){return _==null||isNaN(_=+_)?f:c(s===0?.5:(_=(o(_)-n)*s,d?Math.max(0,Math.min(1,_)):_))}u.domain=function(_){return arguments.length?([t,e]=_,n=o(t=+t),i=o(e=+e),s=n===i?0:1/(i-n),u):[t,e]},u.clamp=function(_){return arguments.length?(d=!!_,u):d},u.interpolator=function(_){return arguments.length?(c=_,u):c};function a(_){return function(w){var m,l;return arguments.length?([m,l]=w,c=_(m,l),u):[c(0),c(1)]}}return u.range=a(bd),u.rangeRound=a($y),u.unknown=function(_){return arguments.length?(f=_,u):f},function(_){return o=_,n=_(t),i=_(e),s=n===i?0:1/(i-n),u}}function Ed(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function x2(){var t=Eu(L1()(Is));return t.copy=function(){return Ed(t,x2())},vd.apply(t,arguments)}function d$(){var t=d2(L1()).domain([1,10]);return t.copy=function(){return Ed(t,d$()).base(t.base())},vd.apply(t,arguments)}function f$(){var t=f2(L1());return t.copy=function(){return Ed(t,f$()).constant(t.constant())},vd.apply(t,arguments)}function B2(){var t=u2(L1());return t.copy=function(){return Ed(t,B2()).exponent(t.exponent())},vd.apply(t,arguments)}function Fre(){return B2.apply(null,arguments).exponent(.5)}function P1(){var t=0,e=.5,n=1,i=1,s,o,c,d,f,u=Is,a,_=!1,w;function m(T){return isNaN(T=+T)?w:(T=.5+((T=+a(T))-o)*(i*T<i*o?d:f),u(_?Math.max(0,Math.min(1,T)):T))}m.domain=function(T){return arguments.length?([t,e,n]=T,s=a(t=+t),o=a(e=+e),c=a(n=+n),d=s===o?0:.5/(o-s),f=o===c?0:.5/(c-o),i=o<s?-1:1,m):[t,e,n]},m.clamp=function(T){return arguments.length?(_=!!T,m):_},m.interpolator=function(T){return arguments.length?(u=T,m):u};function l(T){return function(b){var S,x,B;return arguments.length?([S,x,B]=b,u=YF(T,[S,x,B]),m):[u(0),u(.5),u(1)]}}return m.range=l(bd),m.rangeRound=l($y),m.unknown=function(T){return arguments.length?(w=T,m):w},function(T){return a=T,s=T(t),o=T(e),c=T(n),d=s===o?0:.5/(o-s),f=o===c?0:.5/(c-o),i=o<s?-1:1,m}}function u$(){var t=Eu(P1()(Is));return t.copy=function(){return Ed(t,u$())},vd.apply(t,arguments)}function h$(){var t=d2(P1()).domain([.1,1,10]);return t.copy=function(){return Ed(t,h$()).base(t.base())},vd.apply(t,arguments)}function p$(){var t=f2(P1());return t.copy=function(){return Ed(t,p$()).constant(t.constant())},vd.apply(t,arguments)}function k2(){var t=u2(P1());return t.copy=function(){return Ed(t,k2()).exponent(t.exponent())},vd.apply(t,arguments)}function Ore(){return k2.apply(null,arguments).exponent(.5)}function Qt(t){return function(){return t}}const zP=Math.abs,Ii=Math.atan2,$d=Math.cos,Mre=Math.max,bx=Math.min,Ga=Math.sin,_f=Math.sqrt,Fi=1e-12,ip=Math.PI,NT=ip/2,g$=2*ip;function Are(t){return t>1?0:t<-1?ip:Math.acos(t)}function $P(t){return t>=1?NT:t<=-1?-NT:Math.asin(t)}function Nre(t){return t.innerRadius}function Cre(t){return t.outerRadius}function Rre(t){return t.startAngle}function Lre(t){return t.endAngle}function Pre(t){return t&&t.padAngle}function Dre(t,e,n,i,s,o,c,d){var f=n-t,u=i-e,a=c-s,_=d-o,w=_*f-a*u;if(!(w*w<Fi))return w=(a*(e-o)-_*(t-s))/w,[t+w*f,e+w*u]}function xb(t,e,n,i,s,o,c){var d=t-n,f=e-i,u=(c?o:-o)/_f(d*d+f*f),a=u*f,_=-u*d,w=t+a,m=e+_,l=n+a,T=i+_,b=(w+l)/2,S=(m+T)/2,x=l-w,B=T-m,F=x*x+B*B,k=s-o,A=w*T-l*m,M=(B<0?-1:1)*_f(Mre(0,k*k*F-A*A)),R=(A*B-x*M)/F,P=(-A*x-B*M)/F,j=(A*B+x*M)/F,D=(-A*x+B*M)/F,z=R-b,$=P-S,K=j-b,H=D-S;return z*z+$*$>K*K+H*H&&(R=j,P=D),{cx:R,cy:P,x01:-a,y01:-_,x11:R*(s/k-1),y11:P*(s/k-1)}}function jre(){var t=Nre,e=Cre,n=Qt(0),i=null,s=Rre,o=Lre,c=Pre,d=null;function f(){var u,a,_=+t.apply(this,arguments),w=+e.apply(this,arguments),m=s.apply(this,arguments)-NT,l=o.apply(this,arguments)-NT,T=zP(l-m),b=l>m;if(d||(d=u=Td()),w<_&&(a=w,w=_,_=a),!(w>Fi))d.moveTo(0,0);else if(T>g$-Fi)d.moveTo(w*$d(m),w*Ga(m)),d.arc(0,0,w,m,l,!b),_>Fi&&(d.moveTo(_*$d(l),_*Ga(l)),d.arc(0,0,_,l,m,b));else{var S=m,x=l,B=m,F=l,k=T,A=T,M=c.apply(this,arguments)/2,R=M>Fi&&(i?+i.apply(this,arguments):_f(_*_+w*w)),P=bx(zP(w-_)/2,+n.apply(this,arguments)),j=P,D=P,z,$;if(R>Fi){var K=$P(R/_*Ga(M)),H=$P(R/w*Ga(M));(k-=K*2)>Fi?(K*=b?1:-1,B+=K,F-=K):(k=0,B=F=(m+l)/2),(A-=H*2)>Fi?(H*=b?1:-1,S+=H,x-=H):(A=0,S=x=(m+l)/2)}var W=w*$d(S),J=w*Ga(S),V=_*$d(F),le=_*Ga(F);if(P>Fi){var pe=w*$d(x),se=w*Ga(x),Ne=_*$d(B),fe=_*Ga(B),Oe;if(T<ip&&(Oe=Dre(W,J,Ne,fe,pe,se,V,le))){var Ce=W-Oe[0],We=J-Oe[1],Bt=pe-Oe[0],vt=se-Oe[1],ge=1/Ga(Are((Ce*Bt+We*vt)/(_f(Ce*Ce+We*We)*_f(Bt*Bt+vt*vt)))/2),q=_f(Oe[0]*Oe[0]+Oe[1]*Oe[1]);j=bx(P,(_-q)/(ge-1)),D=bx(P,(w-q)/(ge+1))}}A>Fi?D>Fi?(z=xb(Ne,fe,W,J,w,D,b),$=xb(pe,se,V,le,w,D,b),d.moveTo(z.cx+z.x01,z.cy+z.y01),D<P?d.arc(z.cx,z.cy,D,Ii(z.y01,z.x01),Ii($.y01,$.x01),!b):(d.arc(z.cx,z.cy,D,Ii(z.y01,z.x01),Ii(z.y11,z.x11),!b),d.arc(0,0,w,Ii(z.cy+z.y11,z.cx+z.x11),Ii($.cy+$.y11,$.cx+$.x11),!b),d.arc($.cx,$.cy,D,Ii($.y11,$.x11),Ii($.y01,$.x01),!b))):(d.moveTo(W,J),d.arc(0,0,w,S,x,!b)):d.moveTo(W,J),!(_>Fi)||!(k>Fi)?d.lineTo(V,le):j>Fi?(z=xb(V,le,pe,se,_,-j,b),$=xb(W,J,Ne,fe,_,-j,b),d.lineTo(z.cx+z.x01,z.cy+z.y01),j<P?d.arc(z.cx,z.cy,j,Ii(z.y01,z.x01),Ii($.y01,$.x01),!b):(d.arc(z.cx,z.cy,j,Ii(z.y01,z.x01),Ii(z.y11,z.x11),!b),d.arc(0,0,_,Ii(z.cy+z.y11,z.cx+z.x11),Ii($.cy+$.y11,$.cx+$.x11),b),d.arc($.cx,$.cy,j,Ii($.y11,$.x11),Ii($.y01,$.x01),!b))):d.arc(0,0,_,F,B,b)}if(d.closePath(),u)return d=null,u+""||null}return f.centroid=function(){var u=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,a=(+s.apply(this,arguments)+ +o.apply(this,arguments))/2-ip/2;return[$d(a)*u,Ga(a)*u]},f.innerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:Qt(+u),f):t},f.outerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:Qt(+u),f):e},f.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:Qt(+u),f):n},f.padRadius=function(u){return arguments.length?(i=u==null?null:typeof u=="function"?u:Qt(+u),f):i},f.startAngle=function(u){return arguments.length?(s=typeof u=="function"?u:Qt(+u),f):s},f.endAngle=function(u){return arguments.length?(o=typeof u=="function"?u:Qt(+u),f):o},f.padAngle=function(u){return arguments.length?(c=typeof u=="function"?u:Qt(+u),f):c},f.context=function(u){return arguments.length?(d=u==null?null:u,f):d},f}function _$(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function y$(t){this._context=t}y$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function I2(t){return new y$(t)}function m$(t){return t[0]}function w$(t){return t[1]}function b$(t,e){var n=Qt(!0),i=null,s=I2,o=null;t=typeof t=="function"?t:t===void 0?m$:Qt(t),e=typeof e=="function"?e:e===void 0?w$:Qt(e);function c(d){var f,u=(d=_$(d)).length,a,_=!1,w;for(i==null&&(o=s(w=Td())),f=0;f<=u;++f)!(f<u&&n(a=d[f],f,d))===_&&((_=!_)?o.lineStart():o.lineEnd()),_&&o.point(+t(a,f,d),+e(a,f,d));if(w)return o=null,w+""||null}return c.x=function(d){return arguments.length?(t=typeof d=="function"?d:Qt(+d),c):t},c.y=function(d){return arguments.length?(e=typeof d=="function"?d:Qt(+d),c):e},c.defined=function(d){return arguments.length?(n=typeof d=="function"?d:Qt(!!d),c):n},c.curve=function(d){return arguments.length?(s=d,i!=null&&(o=s(i)),c):s},c.context=function(d){return arguments.length?(d==null?i=o=null:o=s(i=d),c):i},c}function T$(t,e,n){var i=null,s=Qt(!0),o=null,c=I2,d=null;t=typeof t=="function"?t:t===void 0?m$:Qt(+t),e=typeof e=="function"?e:Qt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?w$:Qt(+n);function f(a){var _,w,m,l=(a=_$(a)).length,T,b=!1,S,x=new Array(l),B=new Array(l);for(o==null&&(d=c(S=Td())),_=0;_<=l;++_){if(!(_<l&&s(T=a[_],_,a))===b)if(b=!b)w=_,d.areaStart(),d.lineStart();else{for(d.lineEnd(),d.lineStart(),m=_-1;m>=w;--m)d.point(x[m],B[m]);d.lineEnd(),d.areaEnd()}b&&(x[_]=+t(T,_,a),B[_]=+e(T,_,a),d.point(i?+i(T,_,a):x[_],n?+n(T,_,a):B[_]))}if(S)return d=null,S+""||null}function u(){return b$().defined(s).curve(c).context(o)}return f.x=function(a){return arguments.length?(t=typeof a=="function"?a:Qt(+a),i=null,f):t},f.x0=function(a){return arguments.length?(t=typeof a=="function"?a:Qt(+a),f):t},f.x1=function(a){return arguments.length?(i=a==null?null:typeof a=="function"?a:Qt(+a),f):i},f.y=function(a){return arguments.length?(e=typeof a=="function"?a:Qt(+a),n=null,f):e},f.y0=function(a){return arguments.length?(e=typeof a=="function"?a:Qt(+a),f):e},f.y1=function(a){return arguments.length?(n=a==null?null:typeof a=="function"?a:Qt(+a),f):n},f.lineX0=f.lineY0=function(){return u().x(t).y(e)},f.lineY1=function(){return u().x(t).y(n)},f.lineX1=function(){return u().x(i).y(e)},f.defined=function(a){return arguments.length?(s=typeof a=="function"?a:Qt(!!a),f):s},f.curve=function(a){return arguments.length?(c=a,o!=null&&(d=c(o)),f):c},f.context=function(a){return arguments.length?(a==null?o=d=null:d=c(o=a),f):o},f}const Ure={draw(t,e){const n=_f(e/ip);t.moveTo(n,0),t.arc(0,0,n,0,g$)}};function zre(t,e){let n=null;t=typeof t=="function"?t:Qt(t||Ure),e=typeof e=="function"?e:Qt(e===void 0?64:+e);function i(){let s;if(n||(n=s=Td()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:Qt(s),i):t},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:Qt(+s),i):e},i.context=function(s){return arguments.length?(n=s==null?null:s,i):n},i}function Kc(){}function CT(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function D1(t){this._context=t}D1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:CT(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:CT(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function $re(t){return new D1(t)}function v$(t){this._context=t}v$.prototype={areaStart:Kc,areaEnd:Kc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:CT(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function qre(t){return new v$(t)}function E$(t){this._context=t}E$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:CT(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Gre(t){return new E$(t)}function S$(t,e){this._basis=new D1(t),this._beta=e}S$.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i=t[0],s=e[0],o=t[n]-i,c=e[n]-s,d=-1,f;++d<=n;)f=d/n,this._basis.point(this._beta*t[d]+(1-this._beta)*(i+f*o),this._beta*e[d]+(1-this._beta)*(s+f*c));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const Vre=function t(e){function n(i){return e===1?new D1(i):new S$(i,e)}return n.beta=function(i){return t(+i)},n}(.85);function RT(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function F2(t,e){this._context=t,this._k=(1-e)/6}F2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:RT(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:RT(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Hre=function t(e){function n(i){return new F2(i,e)}return n.tension=function(i){return t(+i)},n}(0);function O2(t,e){this._context=t,this._k=(1-e)/6}O2.prototype={areaStart:Kc,areaEnd:Kc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:RT(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Wre=function t(e){function n(i){return new O2(i,e)}return n.tension=function(i){return t(+i)},n}(0);function M2(t,e){this._context=t,this._k=(1-e)/6}M2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:RT(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Yre=function t(e){function n(i){return new M2(i,e)}return n.tension=function(i){return t(+i)},n}(0);function A2(t,e,n){var i=t._x1,s=t._y1,o=t._x2,c=t._y2;if(t._l01_a>Fi){var d=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,f=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*d-t._x0*t._l12_2a+t._x2*t._l01_2a)/f,s=(s*d-t._y0*t._l12_2a+t._y2*t._l01_2a)/f}if(t._l23_a>Fi){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,a=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*u+t._x1*t._l23_2a-e*t._l12_2a)/a,c=(c*u+t._y1*t._l23_2a-n*t._l12_2a)/a}t._context.bezierCurveTo(i,s,o,c,t._x2,t._y2)}function x$(t,e){this._context=t,this._alpha=e}x$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:A2(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Xre=function t(e){function n(i){return e?new x$(i,e):new F2(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function B$(t,e){this._context=t,this._alpha=e}B$.prototype={areaStart:Kc,areaEnd:Kc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:A2(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Kre=function t(e){function n(i){return e?new B$(i,e):new O2(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function k$(t,e){this._context=t,this._alpha=e}k$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:A2(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Jre=function t(e){function n(i){return e?new k$(i,e):new M2(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function I$(t){this._context=t}I$.prototype={areaStart:Kc,areaEnd:Kc,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Qre(t){return new I$(t)}function qP(t){return t<0?-1:1}function GP(t,e,n){var i=t._x1-t._x0,s=e-t._x1,o=(t._y1-t._y0)/(i||s<0&&-0),c=(n-t._y1)/(s||i<0&&-0),d=(o*s+c*i)/(i+s);return(qP(o)+qP(c))*Math.min(Math.abs(o),Math.abs(c),.5*Math.abs(d))||0}function VP(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Tx(t,e,n){var i=t._x0,s=t._y0,o=t._x1,c=t._y1,d=(o-i)/3;t._context.bezierCurveTo(i+d,s+d*e,o-d,c-d*n,o,c)}function LT(t){this._context=t}LT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Tx(this,this._t0,VP(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Tx(this,VP(this,n=GP(this,t,e)),n);break;default:Tx(this,this._t0,n=GP(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function F$(t){this._context=new O$(t)}(F$.prototype=Object.create(LT.prototype)).point=function(t,e){LT.prototype.point.call(this,e,t)};function O$(t){this._context=t}O$.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,s,o){this._context.bezierCurveTo(e,t,i,n,o,s)}};function Zre(t){return new LT(t)}function eae(t){return new F$(t)}function M$(t){this._context=t}M$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var i=HP(t),s=HP(e),o=0,c=1;c<n;++o,++c)this._context.bezierCurveTo(i[0][o],s[0][o],i[1][o],s[1][o],t[c],e[c]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function HP(t){var e,n=t.length-1,i,s=new Array(n),o=new Array(n),c=new Array(n);for(s[0]=0,o[0]=2,c[0]=t[0]+2*t[1],e=1;e<n-1;++e)s[e]=1,o[e]=4,c[e]=4*t[e]+2*t[e+1];for(s[n-1]=2,o[n-1]=7,c[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)i=s[e]/o[e-1],o[e]-=i,c[e]-=i*c[e-1];for(s[n-1]=c[n-1]/o[n-1],e=n-2;e>=0;--e)s[e]=(c[e]-s[e+1])/o[e];for(o[n-1]=(t[n]+s[n-1])/2,e=0;e<n-1;++e)o[e]=2*t[e+1]-s[e+1];return[s,o]}function tae(t){return new M$(t)}function j1(t,e){this._context=t,this._t=e}j1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function nae(t){return new j1(t,.5)}function iae(t){return new j1(t,0)}function sae(t){return new j1(t,1)}function gh(t,e,n){this.k=t,this.x=e,this.y=n}gh.prototype={constructor:gh,scale:function(t){return t===1?this:new gh(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new gh(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new gh(1,0,0);gh.prototype;function Bb(t){return t.length}function _h(t){const e=new Map(t.map((n,i)=>[n,i]));return n=>e.get(n)}function p0({start:t,step:e,stop:n}){return(n-t)/e}function rae(t,e){return OF({maxbins:t,extent:e})}function aae(t,e){return rae(t.bins,e)}function oae(t){let e=[],n=t.start,i=n+t.step;for(;i<=t.stop;)e.push({binStart:n,binEnd:i}),n=i,i+=t.step;return e}function lae(t,e){const n=cae(t,e);return i=>[n(i[0]),n(i[1])]}function cae(t,e){const s=dae({domain:t,range:[0,e]});return o=>{const c=s(o);return Math.floor(c)}}function dae({domain:t,range:e}){const n={x:t[0],y:e[0]},i={x:t[1],y:e[1]},s=i.y-n.y,o=i.x-n.x;if(o<=0)throw Error("divide by 0 error, pick a non-zero domain");const c=s/o,d=i.y-c*i.x;return f=>c*f+d}function fae(t,...e){return new Map(Array.from(t.entries()).filter(([n,i])=>!e.includes(n)))}function g0({start:t,step:e}){return n=>Math.floor((n-t)/e)}function uae({start:t,stop:e},n){const i=hae({start:t,stop:e},n);return g0({start:t,step:i})}function hae({start:t,stop:e},n){return(e-t)/n}class pae{constructor(){Pn(this,"views");this.views=[]}add(e){this.views.findIndex(i=>i==e)===-1&&this.views.push(e)}get passive(){return this.views.filter(e=>!e.isActive)}get active(){return this.views.filter(e=>e.isActive)[0]}get size(){return this.views.length}forEach(e){this.views.forEach(e)}}class A${constructor(e){Pn(this,"falcon");Pn(this,"onChangeListeners");Pn(this,"isActive");this.falcon=e,this.onChangeListeners=new Set,this.isActive=!1}onChange(e){return this.onChangeListeners.add(e),()=>this.onChangeListeners.delete(e)}signalOnChange(e){this.onChangeListeners.forEach(n=>{n(e)})}makeActiveView(){this.falcon.views.forEach(e=>{e.isActive=!1}),this.isActive=!0}}class yh extends A${constructor(n){super(n);Pn(this,"state");this.state={total:null,filter:null}}async all(){const n=await this.falcon.db.length();this.state.total=n,this.state.filter=n,this.signalOnChange(this.state)}async countContinuous1DIndex(n){const i=await this.falcon.index.get(this);if(i===void 0)throw Error("Cannot count for undefined index in 0D");if(!n)this.state.filter=i.noFilter.get(0);else{const s=i.filter.get(n[0]),o=i.filter.get(n[1]);this.state.filter=o-s}this.signalOnChange(this.state)}async countCategorical1DIndex(n,i){const s=await this.falcon.index.get(this);if(s===void 0)throw Error("Cannot count for undefined index in 0D");if(n===void 0)this.state.filter=s.noFilter.get(0);else{const o=_h(i);let c=0;for(const d of n){const f=o(d);c+=s.filter.get(f)}this.state.filter=c}this.signalOnChange(this.state)}}class l_ extends A${constructor(n,i){super(n);Pn(this,"dimension");Pn(this,"state");Pn(this,"toPixels");Pn(this,"lastFilter");this.dimension=i,this.state={total:null,filter:null,bin:null},this.toPixels=()=>[0,0]}async createBins(){var n;((n=this.dimension)==null?void 0:n.range)===void 0&&(this.dimension.range=await this.falcon.db.range(this.dimension)),this.dimension.type==="continuous"&&(this.toPixels=lae(this.dimension.range,this.dimension.resolution),this.dimension.binConfig=aae(this.dimension,this.dimension.range)),this.dimension.type==="continuous"?this.state.bin=oae(this.dimension.binConfig):this.state.bin=this.dimension.range}async all(){await this.createBins();const n=await this.falcon.db.histogramView1D(this);this.state.total=n.noFilter.data,this.state.filter=n.filter.data,this.signalOnChange(this.state)}async prefetch(){this.isActive||(this.makeActiveView(),this.falcon.index=this.falcon.db.falconIndexView1D(this,this.falcon.views.passive,this.falcon.passiveFilters))}async add(n,i=!0){if(await this.prefetch(),n)if(this.dimension.type==="continuous"){if(this.lastFilter&&this.lastFilter[0]===n[0]&&this.lastFilter[1]===n[1])return;this.falcon.filters.set(this.dimension,n);let o=i?this.toPixels(n):n;(o[0]>this.dimension.resolution||o[1]>this.dimension.resolution)&&(o=[0,0]),this.falcon.views.passive.forEach(async c=>{await c.countContinuous1DIndex(o)}),this.lastFilter=n}else this.falcon.filters.set(this.dimension,n),this.falcon.views.passive.forEach(async s=>{await s.countCategorical1DIndex(n,this.dimension.range)}),this.lastFilter=n;else if(this.dimension.type==="continuous"){if(this.lastFilter===n)return;this.falcon.filters.delete(this.dimension),this.falcon.views.passive.forEach(async o=>{await o.countContinuous1DIndex()}),this.lastFilter=n}else this.falcon.filters.delete(this.dimension),this.falcon.views.passive.forEach(async s=>{await s.countCategorical1DIndex()}),this.lastFilter=n}async countContinuous1DIndex(n){const i=await this.falcon.index.get(this);if(i===void 0)throw Error("Index not defined for 1D passive view");if(!n)this.state.filter=i.noFilter.data;else{const s=i.filter.slice(n[0],null),c=i.filter.slice(n[1],null).sub(s);this.state.filter=c.data}this.signalOnChange(this.state)}async countCategorical1DIndex(n,i){const s=await this.falcon.index.get(this);if(s===void 0)throw Error("Index not defined for 1D passive view");if(!n)this.state.filter=s.noFilter.data;else{let o;this.dimension.type==="continuous"?o=si.allocCounts(p0(this.dimension.binConfig)):o=si.allocCounts(this.dimension.range.length),o.data.fill(0);const c=_h(i);for(const d of n){const f=c(d),u=s.filter.slice(f,null);o.addOverride(u)}this.state.filter=o.data}this.signalOnChange(this.state)}}class gae{constructor(e){Pn(this,"blocking");Pn(this,"data");Pn(this,"filterMaskIndex");this.blocking=!0,this.filterMaskIndex=new Map,this.data=e}length(){return this.data.numRows}range(e){const n=this.data.getChild(e.name);if(n!==null)return(e.type==="continuous"?yae:_ae)(n);throw Error(`Dimension name ${e.name} wasn't found on the arrow table`)}histogramView1D(e,n){let i,s,o,c;const d=HS(...this.getFilterMasks(n!=null?n:new Map).values());if(e.dimension.type==="continuous"){const u=e.dimension.binConfig;c=p0(u),o=g0(u),s=si.allocCounts(c),i=d?si.allocCounts(c):s}else c=Bb(e.dimension.range),o=_h(e.dimension.range),s=si.allocCounts(c),i=d?si.allocCounts(c):s;const f=this.data.getChild(e.dimension.name);for(let u=0;u<this.data.numRows;u++){const a=f.get(u),_=o(a);0<=_&&_<c&&(s.increment([_]),d&&!d.get(u)&&i.increment([_]))}return{noFilter:s,filter:i}}falconIndexView1D(e,n,i){const s=this.getFilterMasks(i),o=new Map;if(e.dimension.type==="continuous"){const c=e.dimension.resolution,d=e.dimension,f=uae(d.binConfig,c),u=this.data.getChild(d.name),a=c+1;n.forEach(_=>{const w=this.cubeSlice1DContinuous(_,u,s,a,f);o.set(_,w)})}else{const c=_h(e.dimension.range),d=Bb(e.dimension.range),f=this.data.getChild(e.dimension.name);n.forEach(u=>{const a=this.cubeSlice1DCategorical(u,f,s,c,d);o.set(u,a)})}return o}cubeSlice1DCategorical(e,n,i,s,o){let c,d;const f=new Map(i);e instanceof yh||e instanceof l_&&f.delete(e.dimension);const u=HS(...f.values());if(e instanceof yh){d=si.allocCounts(o),c=si.allocCounts(1,[1]);for(let a=0;a<this.data.numRows;a++){if(u&&u.get(a))continue;const _=s(n.get(a));0<=_&&_<o&&d.increment([_]),c.increment([0])}}else if(e instanceof l_){let a,_;if(e.dimension.type==="continuous"){const m=e.dimension.binConfig;a=g0(m),_=p0(m)}else a=_h(e.dimension.range),_=Bb(e.dimension.range);d=si.allocCounts(o*_,[o,_]),c=si.allocCounts(_,[_]);const w=this.data.getChild(e.dimension.name);for(let m=0;m<this.data.numRows;m++){if(u&&u.get(m))continue;const l=a(w.get(m)),T=s(n.get(m));0<=l&&l<_&&(0<=T&&T<o&&d.increment([T,l]),c.increment([l]))}}else throw Error("no 2d view here");return{noFilter:c,filter:d}}cubeSlice1DContinuous(e,n,i,s,o){let c,d;const f=new Map(i);e instanceof yh||e instanceof l_&&f.delete(e.dimension);const u=HS(...f.values());if(e instanceof yh){d=si.allocCumulative(s),c=si.allocCounts(1,[1]);for(let a=0;a<this.data.numRows;a++){if(u&&u.get(a))continue;const _=o(n.get(a))+1;0<=_&&_<s&&d.increment([_]),c.increment([0])}d.cumulativeSum()}else if(e instanceof l_){let a,_;if(e.dimension.type==="continuous"){const m=e.dimension.binConfig;a=g0(m),_=p0(m)}else a=_h(e.dimension.range),_=Bb(e.dimension.range);d=si.allocCumulative(s*_,[s,_]),c=si.allocCounts(_,[_]);const w=this.data.getChild(e.dimension.name);for(let m=0;m<this.data.numRows;m++){if(u&&u.get(m))continue;const l=a(w.get(m)),T=o(n.get(m))+1;0<=l&&l<_&&(0<=T&&T<s&&d.increment([T,l]),c.increment([l]))}for(let m=0;m<d.shape[1];m++)d.slice(null,m).cumulativeSum()}else throw Error("only 0D and 1D views");return{noFilter:c,filter:d}}getFilterMasks(e){if(!e.size)return new Map;const n=new Map;for(const[i,s]of e){let o;i.type==="continuous"?o=this.getContinuousFilterMask(i,s):o=this.getCategoricalFilterMask(i,s),n.set(i,o)}return n}getCategoricalFilterMask(e,n){const i=new Set(n),s=`${e.name} ${n}`;if(!this.filterMaskIndex.has(s)){const c=this.data.getChild(e.name),d=WP(c,f=>!i.has(f));this.filterMaskIndex.set(s,d)}return this.filterMaskIndex.get(s)}getContinuousFilterMask(e,n){const i=`${e.name} ${n}`;if(!this.filterMaskIndex.has(i)){const o=this.data.getChild(e.name),c=WP(o,d=>d<n[0]||d>=n[1]);this.filterMaskIndex.set(i,c)}return this.filterMaskIndex.get(i)}}function WP(t,e){const n=new AU(t.length);for(let i=0;i<t.length;i++){const s=t.get(i);e(s)&&n.set(i,!0)}return n}function _ae(t){const e=new Set;for(const n of t)e.add(n);return Array.from(e)}function yae(t){const e=t.get(0);let n=e,i=e;for(const s of t)s>n?n=s:s<i&&(i=s);return[i,n]}function mae(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}function ye(t,e,n,i){function s(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function d(a){try{u(i.next(a))}catch(_){c(_)}}function f(a){try{u(i.throw(a))}catch(_){c(_)}}function u(a){a.done?o(a.value):s(a.value).then(d,f)}u((i=i.apply(t,e||[])).next())})}function YP(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Be(t){return this instanceof Be?(this.v=t,this):new Be(t)}function Ln(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),s,o=[];return s={},c("next"),c("throw"),c("return"),s[Symbol.asyncIterator]=function(){return this},s;function c(w){i[w]&&(s[w]=function(m){return new Promise(function(l,T){o.push([w,m,l,T])>1||d(w,m)})})}function d(w,m){try{f(i[w](m))}catch(l){_(o[0][3],l)}}function f(w){w.value instanceof Be?Promise.resolve(w.value.v).then(u,a):_(o[0][2],w)}function u(w){d("next",w)}function a(w){d("throw",w)}function _(w,m){w(m),o.shift(),o.length&&d(o[0][0],o[0][1])}}function Rc(t){var e,n;return e={},i("next"),i("throw",function(s){throw s}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(s,o){e[s]=t[s]?function(c){return(n=!n)?{value:Be(t[s](c)),done:s==="return"}:o?o(c):c}:o}}function Fs(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof YP=="function"?YP(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=t[o]&&function(c){return new Promise(function(d,f){c=t[o](c),s(d,f,c.done,c.value)})}}function s(o,c,d,f){Promise.resolve(f).then(function(u){o({value:u,done:d})},c)}}const vx=2,eo=4,bl=4,Ge=4,gc=new Int32Array(2),XP=new Float32Array(gc.buffer),KP=new Float64Array(gc.buffer),kb=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;class cs{constructor(e,n){this.low=e|0,this.high=n|0}static create(e,n){return e==0&&n==0?cs.ZERO:new cs(e,n)}toFloat64(){return(this.low>>>0)+this.high*4294967296}equals(e){return this.low==e.low&&this.high==e.high}}cs.ZERO=new cs(0,0);var Sk;(function(t){t[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING"})(Sk||(Sk={}));class Pr{constructor(e){this.bytes_=e,this.position_=0}static allocate(e){return new Pr(new Uint8Array(e))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(e){this.position_=e}capacity(){return this.bytes_.length}readInt8(e){return this.readUint8(e)<<24>>24}readUint8(e){return this.bytes_[e]}readInt16(e){return this.readUint16(e)<<16>>16}readUint16(e){return this.bytes_[e]|this.bytes_[e+1]<<8}readInt32(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24}readUint32(e){return this.readInt32(e)>>>0}readInt64(e){return new cs(this.readInt32(e),this.readInt32(e+4))}readUint64(e){return new cs(this.readUint32(e),this.readUint32(e+4))}readFloat32(e){return gc[0]=this.readInt32(e),XP[0]}readFloat64(e){return gc[kb?0:1]=this.readInt32(e),gc[kb?1:0]=this.readInt32(e+4),KP[0]}writeInt8(e,n){this.bytes_[e]=n}writeUint8(e,n){this.bytes_[e]=n}writeInt16(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8}writeUint16(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8}writeInt32(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8,this.bytes_[e+2]=n>>16,this.bytes_[e+3]=n>>24}writeUint32(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8,this.bytes_[e+2]=n>>16,this.bytes_[e+3]=n>>24}writeInt64(e,n){this.writeInt32(e,n.low),this.writeInt32(e+4,n.high)}writeUint64(e,n){this.writeUint32(e,n.low),this.writeUint32(e+4,n.high)}writeFloat32(e,n){XP[0]=n,this.writeInt32(e,gc[0])}writeFloat64(e,n){KP[0]=n,this.writeInt32(e,gc[kb?0:1]),this.writeInt32(e+4,gc[kb?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+eo+bl)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let e="";for(let n=0;n<bl;n++)e+=String.fromCharCode(this.readInt8(this.position_+eo+n));return e}__offset(e,n){const i=e-this.readInt32(e);return n<this.readInt16(i)?this.readInt16(i+n):0}__union(e,n){return e.bb_pos=n+this.readInt32(n),e.bb=this,e}__string(e,n){e+=this.readInt32(e);const i=this.readInt32(e);let s="",o=0;if(e+=eo,n===Sk.UTF8_BYTES)return this.bytes_.subarray(e,e+i);for(;o<i;){let c;const d=this.readUint8(e+o++);if(d<192)c=d;else{const f=this.readUint8(e+o++);if(d<224)c=(d&31)<<6|f&63;else{const u=this.readUint8(e+o++);if(d<240)c=(d&15)<<12|(f&63)<<6|u&63;else{const a=this.readUint8(e+o++);c=(d&7)<<18|(f&63)<<12|(u&63)<<6|a&63}}}c<65536?s+=String.fromCharCode(c):(c-=65536,s+=String.fromCharCode((c>>10)+55296,(c&(1<<10)-1)+56320))}return s}__union_with_string(e,n){return typeof e=="string"?this.__string(n):this.__union(e,n)}__indirect(e){return e+this.readInt32(e)}__vector(e){return e+this.readInt32(e)+eo}__vector_len(e){return this.readInt32(e+this.readInt32(e))}__has_identifier(e){if(e.length!=bl)throw new Error("FlatBuffers: file identifier must be length "+bl);for(let n=0;n<bl;n++)if(e.charCodeAt(n)!=this.readInt8(this.position()+eo+n))return!1;return!0}createLong(e,n){return cs.create(e,n)}createScalarList(e,n){const i=[];for(let s=0;s<n;++s)e(s)!==null&&i.push(e(s));return i}createObjList(e,n){const i=[];for(let s=0;s<n;++s){const o=e(s);o!==null&&i.push(o.unpack())}return i}}class Qp{constructor(e){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null;let n;e?n=e:n=1024,this.bb=Pr.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(e){this.force_defaults=e}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(e,n){e>this.minalign&&(this.minalign=e);const i=~(this.bb.capacity()-this.space+n)+1&e-1;for(;this.space<i+e+n;){const s=this.bb.capacity();this.bb=Qp.growByteBuffer(this.bb),this.space+=this.bb.capacity()-s}this.pad(i)}pad(e){for(let n=0;n<e;n++)this.bb.writeInt8(--this.space,0)}writeInt8(e){this.bb.writeInt8(this.space-=1,e)}writeInt16(e){this.bb.writeInt16(this.space-=2,e)}writeInt32(e){this.bb.writeInt32(this.space-=4,e)}writeInt64(e){this.bb.writeInt64(this.space-=8,e)}writeFloat32(e){this.bb.writeFloat32(this.space-=4,e)}writeFloat64(e){this.bb.writeFloat64(this.space-=8,e)}addInt8(e){this.prep(1,0),this.writeInt8(e)}addInt16(e){this.prep(2,0),this.writeInt16(e)}addInt32(e){this.prep(4,0),this.writeInt32(e)}addInt64(e){this.prep(8,0),this.writeInt64(e)}addFloat32(e){this.prep(4,0),this.writeFloat32(e)}addFloat64(e){this.prep(8,0),this.writeFloat64(e)}addFieldInt8(e,n,i){(this.force_defaults||n!=i)&&(this.addInt8(n),this.slot(e))}addFieldInt16(e,n,i){(this.force_defaults||n!=i)&&(this.addInt16(n),this.slot(e))}addFieldInt32(e,n,i){(this.force_defaults||n!=i)&&(this.addInt32(n),this.slot(e))}addFieldInt64(e,n,i){(this.force_defaults||!n.equals(i))&&(this.addInt64(n),this.slot(e))}addFieldFloat32(e,n,i){(this.force_defaults||n!=i)&&(this.addFloat32(n),this.slot(e))}addFieldFloat64(e,n,i){(this.force_defaults||n!=i)&&(this.addFloat64(n),this.slot(e))}addFieldOffset(e,n,i){(this.force_defaults||n!=i)&&(this.addOffset(n),this.slot(e))}addFieldStruct(e,n,i){n!=i&&(this.nested(n),this.slot(e))}nested(e){if(e!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(e){this.vtable!==null&&(this.vtable[e]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(e){const n=e.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const i=n<<1,s=Pr.allocate(i);return s.setPosition(i-n),s.bytes().set(e.bytes(),i-n),s}addOffset(e){this.prep(eo,0),this.writeInt32(this.offset()-e+eo)}startObject(e){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=e;for(let n=0;n<e;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const e=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const i=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?e-this.vtable[n]:0);const s=2;this.addInt16(e-this.object_start);const o=(i+s)*vx;this.addInt16(o);let c=0;const d=this.space;e:for(n=0;n<this.vtables.length;n++){const f=this.bb.capacity()-this.vtables[n];if(o==this.bb.readInt16(f)){for(let u=vx;u<o;u+=vx)if(this.bb.readInt16(d+u)!=this.bb.readInt16(f+u))continue e;c=this.vtables[n];break}}return c?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,c-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e}finish(e,n,i){const s=i?Ge:0;if(n){const o=n;if(this.prep(this.minalign,eo+bl+s),o.length!=bl)throw new Error("FlatBuffers: file identifier must be length "+bl);for(let c=bl-1;c>=0;c--)this.writeInt8(o.charCodeAt(c))}this.prep(this.minalign,eo+s),this.addOffset(e),s&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(e,n){this.finish(e,n,!0)}requiredField(e,n){const i=this.bb.capacity()-e,s=i-this.bb.readInt32(i);if(!(this.bb.readInt16(s+n)!=0))throw new Error("FlatBuffers: field "+n+" must be set")}startVector(e,n,i){this.notNested(),this.vector_num_elems=n,this.prep(eo,e*n),this.prep(i,e*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(e){if(!e)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(e))return this.string_maps.get(e);const n=this.createString(e);return this.string_maps.set(e,n),n}createString(e){if(!e)return 0;let n;if(e instanceof Uint8Array)n=e;else{n=[];let i=0;for(;i<e.length;){let s;const o=e.charCodeAt(i++);if(o<55296||o>=56320)s=o;else{const c=e.charCodeAt(i++);s=(o<<10)+c+(65536-(55296<<10)-56320)}s<128?n.push(s):(s<2048?n.push(s>>6&31|192):(s<65536?n.push(s>>12&15|224):n.push(s>>18&7|240,s>>12&63|128),n.push(s>>6&63|128)),n.push(s&63|128))}}this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let i=0,s=this.space,o=this.bb.bytes();i<n.length;i++)o[s++]=n[i];return this.endVector()}createLong(e,n){return cs.create(e,n)}createObjectOffset(e){return e===null?0:typeof e=="string"?this.createString(e):e.pack(this)}createObjectOffsetList(e){const n=[];for(let i=0;i<e.length;++i){const s=e[i];if(s!==null)n.push(this.createObjectOffset(s));else throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(e,n){return n(this,e.length),this.createObjectOffsetList(e),this.endVector()}}const wae=new TextDecoder("utf-8"),xk=t=>wae.decode(t),bae=new TextEncoder,U1=t=>bae.encode(t),[KLe,N$]=(()=>{const t=()=>{throw new Error("BigInt is not available in this environment")};function e(){throw t()}return e.asIntN=()=>{throw t()},e.asUintN=()=>{throw t()},typeof BigInt<"u"?[BigInt,!0]:[e,!1]})(),[N2,JLe]=(()=>{const t=()=>{throw new Error("BigInt64Array is not available in this environment")};class e{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}}return typeof BigInt64Array<"u"?[BigInt64Array,!0]:[e,!1]})(),[z1,QLe]=(()=>{const t=()=>{throw new Error("BigUint64Array is not available in this environment")};class e{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}}return typeof BigUint64Array<"u"?[BigUint64Array,!0]:[e,!1]})(),Tae=t=>typeof t=="number",C$=t=>typeof t=="boolean",Hn=t=>typeof t=="function",Ls=t=>t!=null&&Object(t)===t,Jc=t=>Ls(t)&&Hn(t.then),Zp=t=>Ls(t)&&Hn(t[Symbol.iterator]),Bu=t=>Ls(t)&&Hn(t[Symbol.asyncIterator]),Bk=t=>Ls(t)&&Ls(t.schema),R$=t=>Ls(t)&&"done"in t&&"value"in t,L$=t=>Ls(t)&&Hn(t.stat)&&Tae(t.fd),P$=t=>Ls(t)&&C2(t.body),$1=t=>"_getDOMStream"in t&&"_getNodeStream"in t,vae=t=>Ls(t)&&Hn(t.abort)&&Hn(t.getWriter)&&!$1(t),C2=t=>Ls(t)&&Hn(t.cancel)&&Hn(t.getReader)&&!$1(t),Eae=t=>Ls(t)&&Hn(t.end)&&Hn(t.write)&&C$(t.writable)&&!$1(t),D$=t=>Ls(t)&&Hn(t.read)&&Hn(t.pipe)&&C$(t.readable)&&!$1(t),Sae=t=>Ls(t)&&Hn(t.clear)&&Hn(t.bytes)&&Hn(t.position)&&Hn(t.setPosition)&&Hn(t.capacity)&&Hn(t.getBufferIdentifier)&&Hn(t.createLong),R2=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function xae(t){const e=t[0]?[t[0]]:[];let n,i,s,o;for(let c,d,f=0,u=0,a=t.length;++f<a;){if(c=e[u],d=t[f],!c||!d||c.buffer!==d.buffer||d.byteOffset<c.byteOffset){d&&(e[++u]=d);continue}if({byteOffset:n,byteLength:s}=c,{byteOffset:i,byteLength:o}=d,n+s<i||i+o<n){d&&(e[++u]=d);continue}e[u]=new Uint8Array(c.buffer,n,i-n+o)}return e}function Y_(t,e,n=0,i=e.byteLength){const s=t.byteLength,o=new Uint8Array(t.buffer,t.byteOffset,s),c=new Uint8Array(e.buffer,e.byteOffset,Math.min(i,s));return o.set(c,n),t}function ka(t,e){const n=xae(t),i=n.reduce((a,_)=>a+_.byteLength,0);let s,o,c,d=0,f=-1;const u=Math.min(e||Number.POSITIVE_INFINITY,i);for(const a=n.length;++f<a;){if(s=n[f],o=s.subarray(0,Math.min(s.length,u-d)),u<=d+o.length){o.length<s.length?n[f]=s.subarray(o.length):o.length===s.length&&f++,c?Y_(c,o,d):c=o;break}Y_(c||(c=new Uint8Array(u)),o,d),d+=o.length}return[c||new Uint8Array(0),n.slice(f),i-(c?c.byteLength:0)]}function Ot(t,e){let n=R$(e)?e.value:e;return n instanceof t?t===Uint8Array?new t(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=U1(n)),n instanceof ArrayBuffer?new t(n):n instanceof R2?new t(n):Sae(n)?Ot(t,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new t(0):new t(n.buffer,n.byteOffset,n.byteLength/t.BYTES_PER_ELEMENT):t.from(n)):new t(0)}const Bae=t=>Ot(Int8Array,t),kae=t=>Ot(Int16Array,t),lh=t=>Ot(Int32Array,t),Iae=t=>Ot(N2,t),Nt=t=>Ot(Uint8Array,t),Fae=t=>Ot(Uint16Array,t),Oae=t=>Ot(Uint32Array,t),Mae=t=>Ot(z1,t),Aae=t=>Ot(Float32Array,t),Nae=t=>Ot(Float64Array,t),Cae=t=>Ot(Uint8ClampedArray,t),kk=t=>(t.next(),t);function*Wo(t,e){const n=function*(s){yield s},i=typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof R2?n(e):Zp(e)?e:n(e);return yield*kk(function*(s){let o=null;do o=s.next(yield Ot(t,o));while(!o.done)}(i[Symbol.iterator]())),new t}const Rae=t=>Wo(Int8Array,t),Lae=t=>Wo(Int16Array,t),Pae=t=>Wo(Int32Array,t),j$=t=>Wo(Uint8Array,t),Dae=t=>Wo(Uint16Array,t),jae=t=>Wo(Uint32Array,t),Uae=t=>Wo(Float32Array,t),zae=t=>Wo(Float64Array,t),$ae=t=>Wo(Uint8ClampedArray,t);function Ra(t,e){return Ln(this,arguments,function*(){if(Jc(e))return yield Be(yield Be(yield*Rc(Fs(Ra(t,yield Be(e))))));const i=function(c){return Ln(this,arguments,function*(){yield yield Be(yield Be(c))})},s=function(c){return Ln(this,arguments,function*(){yield Be(yield*Rc(Fs(kk(function*(d){let f=null;do f=d.next(yield f==null?void 0:f.value);while(!f.done)}(c[Symbol.iterator]())))))})},o=typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof R2?i(e):Zp(e)?s(e):Bu(e)?e:i(e);return yield Be(yield*Rc(Fs(kk(function(c){return Ln(this,arguments,function*(){let d=null;do d=yield Be(c.next(yield yield Be(Ot(t,d))));while(!d.done)})}(o[Symbol.asyncIterator]()))))),yield Be(new t)})}const qae=t=>Ra(Int8Array,t),Gae=t=>Ra(Int16Array,t),Vae=t=>Ra(Int32Array,t),U$=t=>Ra(Uint8Array,t),Hae=t=>Ra(Uint16Array,t),Wae=t=>Ra(Uint32Array,t),Yae=t=>Ra(Float32Array,t),Xae=t=>Ra(Float64Array,t),Kae=t=>Ra(Uint8ClampedArray,t);function q1(t,e,n){if(t!==0){n=n.slice(0,e+1);for(let i=-1;++i<=e;)n[i]+=t}return n}function z$(t,e){let n=0;const i=t.length;if(i!==e.length)return!1;if(i>0)do if(t[n]!==e[n])return!1;while(++n<i);return!0}const Jae=Object.freeze(Object.defineProperty({__proto__:null,memcpy:Y_,joinUint8Arrays:ka,toArrayBufferView:Ot,toInt8Array:Bae,toInt16Array:kae,toInt32Array:lh,toBigInt64Array:Iae,toUint8Array:Nt,toUint16Array:Fae,toUint32Array:Oae,toBigUint64Array:Mae,toFloat32Array:Aae,toFloat64Array:Nae,toUint8ClampedArray:Cae,toArrayBufferViewIterator:Wo,toInt8ArrayIterator:Rae,toInt16ArrayIterator:Lae,toInt32ArrayIterator:Pae,toUint8ArrayIterator:j$,toUint16ArrayIterator:Dae,toUint32ArrayIterator:jae,toFloat32ArrayIterator:Uae,toFloat64ArrayIterator:zae,toUint8ClampedArrayIterator:$ae,toArrayBufferViewAsyncIterator:Ra,toInt8ArrayAsyncIterator:qae,toInt16ArrayAsyncIterator:Gae,toInt32ArrayAsyncIterator:Vae,toUint8ArrayAsyncIterator:U$,toUint16ArrayAsyncIterator:Hae,toUint32ArrayAsyncIterator:Wae,toFloat32ArrayAsyncIterator:Yae,toFloat64ArrayAsyncIterator:Xae,toUint8ClampedArrayAsyncIterator:Kae,rebaseValueOffsets:q1,compareArrayLike:z$},Symbol.toStringTag,{value:"Module"})),tr={fromIterable(t){return Ib(Qae(t))},fromAsyncIterable(t){return Ib(Zae(t))},fromDOMStream(t){return Ib(eoe(t))},fromNodeStream(t){return Ib(noe(t))},toDOMStream(t,e){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(t,e){throw new Error('"toNodeStream" not available in this environment')}},Ib=t=>(t.next(),t);function*Qae(t){let e,n=!1,i=[],s,o,c,d=0;function f(){return o==="peek"?ka(i,c)[0]:([s,i,d]=ka(i,c),s)}({cmd:o,size:c}=yield null);const u=j$(t)[Symbol.iterator]();try{do if({done:e,value:s}=Number.isNaN(c-d)?u.next():u.next(c-d),!e&&s.byteLength>0&&(i.push(s),d+=s.byteLength),e||c<=d)do({cmd:o,size:c}=yield f());while(c<d);while(!e)}catch(a){(n=!0)&&typeof u.throw=="function"&&u.throw(a)}finally{n===!1&&typeof u.return=="function"&&u.return(null)}return null}function Zae(t){return Ln(this,arguments,function*(){let n,i=!1,s=[],o,c,d,f=0;function u(){return c==="peek"?ka(s,d)[0]:([o,s,f]=ka(s,d),o)}({cmd:c,size:d}=yield yield Be(null));const a=U$(t)[Symbol.asyncIterator]();try{do if({done:n,value:o}=Number.isNaN(d-f)?yield Be(a.next()):yield Be(a.next(d-f)),!n&&o.byteLength>0&&(s.push(o),f+=o.byteLength),n||d<=f)do({cmd:c,size:d}=yield yield Be(u()));while(d<f);while(!n)}catch(_){(i=!0)&&typeof a.throw=="function"&&(yield Be(a.throw(_)))}finally{i===!1&&typeof a.return=="function"&&(yield Be(a.return(new Uint8Array(0))))}return yield Be(null)})}function eoe(t){return Ln(this,arguments,function*(){let n=!1,i=!1,s=[],o,c,d,f=0;function u(){return c==="peek"?ka(s,d)[0]:([o,s,f]=ka(s,d),o)}({cmd:c,size:d}=yield yield Be(null));const a=new toe(t);try{do if({done:n,value:o}=Number.isNaN(d-f)?yield Be(a.read()):yield Be(a.read(d-f)),!n&&o.byteLength>0&&(s.push(Nt(o)),f+=o.byteLength),n||d<=f)do({cmd:c,size:d}=yield yield Be(u()));while(d<f);while(!n)}catch(_){(i=!0)&&(yield Be(a.cancel(_)))}finally{i===!1?yield Be(a.cancel()):t.locked&&a.releaseLock()}return yield Be(null)})}class toe{constructor(e){this.source=e,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(e){return ye(this,void 0,void 0,function*(){const{reader:n,source:i}=this;n&&(yield n.cancel(e).catch(()=>{})),i&&i.locked&&this.releaseLock()})}read(e){return ye(this,void 0,void 0,function*(){if(e===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Nt(n)),n})}}const Ex=(t,e)=>{const n=s=>i([e,s]);let i;return[e,n,new Promise(s=>(i=s)&&t.once(e,n))]};function noe(t){return Ln(this,arguments,function*(){const n=[];let i="error",s=!1,o=null,c,d,f=0,u=[],a;function _(){return c==="peek"?ka(u,d)[0]:([a,u,f]=ka(u,d),a)}if({cmd:c,size:d}=yield yield Be(null),t.isTTY)return yield yield Be(new Uint8Array(0)),yield Be(null);try{n[0]=Ex(t,"end"),n[1]=Ex(t,"error");do{if(n[2]=Ex(t,"readable"),[i,o]=yield Be(Promise.race(n.map(m=>m[2]))),i==="error")break;if((s=i==="end")||(Number.isFinite(d-f)?(a=Nt(t.read(d-f)),a.byteLength<d-f&&(a=Nt(t.read()))):a=Nt(t.read()),a.byteLength>0&&(u.push(a),f+=a.byteLength)),s||d<=f)do({cmd:c,size:d}=yield yield Be(_()));while(d<f)}while(!s)}finally{yield Be(w(n,i==="error"?o:null))}return yield Be(null);function w(m,l){return a=u=null,new Promise((T,b)=>{for(const[S,x]of m)t.off(S,x);try{const S=t.destroy;S&&S.call(t,l),l=void 0}catch(S){l=S||l}finally{l!=null?b(l):T()}})}})}var xs;(function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"})(xs||(xs={}));var pi;(function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"})(pi||(pi={}));var Zn;(function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"})(Zn||(Zn={}));var Ps;(function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"})(Ps||(Ps={}));var ct;(function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"})(ct||(ct={}));var Dr;(function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Dr||(Dr={}));var Zt;(function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"})(Zt||(Zt={}));var te;(function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth"})(te||(te={}));var sa;(function(t){t[t.OFFSET=0]="OFFSET",t[t.DATA=1]="DATA",t[t.VALIDITY=2]="VALIDITY",t[t.TYPE=3]="TYPE"})(sa||(sa={}));const ioe=void 0;function Lc(t){if(t===null)return"null";if(t===ioe)return"undefined";switch(typeof t){case"number":return`${t}`;case"bigint":return`${t}`;case"string":return`"${t}"`}return typeof t[Symbol.toPrimitive]=="function"?t[Symbol.toPrimitive]("string"):ArrayBuffer.isView(t)?t instanceof BigInt64Array||t instanceof BigUint64Array?`[${[...t].map(e=>Lc(e))}]`:`[${t}]`:ArrayBuffer.isView(t)?`[${t}]`:JSON.stringify(t,(e,n)=>typeof n=="bigint"?`${n}`:n)}const $$=Symbol.for("isArrowBigNum");function La(t,...e){return e.length===0?Object.setPrototypeOf(Ot(this.TypedArray,t),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(t,...e),this.constructor.prototype)}La.prototype[$$]=!0;La.prototype.toJSON=function(){return`"${Pc(this)}"`};La.prototype.valueOf=function(){return q$(this)};La.prototype.toString=function(){return Pc(this)};La.prototype[Symbol.toPrimitive]=function(t="default"){switch(t){case"number":return q$(this);case"string":return Pc(this);case"default":return PT(this)}return Pc(this)};function Fh(...t){return La.apply(this,t)}function Oh(...t){return La.apply(this,t)}function X_(...t){return La.apply(this,t)}Object.setPrototypeOf(Fh.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Oh.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(X_.prototype,Object.create(Uint32Array.prototype));Object.assign(Fh.prototype,La.prototype,{constructor:Fh,signed:!0,TypedArray:Int32Array,BigIntArray:N2});Object.assign(Oh.prototype,La.prototype,{constructor:Oh,signed:!1,TypedArray:Uint32Array,BigIntArray:z1});Object.assign(X_.prototype,La.prototype,{constructor:X_,signed:!0,TypedArray:Uint32Array,BigIntArray:z1});function q$(t){const{buffer:e,byteOffset:n,length:i,signed:s}=t,o=new z1(e,n,i),c=s&&o[o.length-1]&BigInt(1)<<BigInt(63);let d=BigInt(c?1:0),f=BigInt(0);if(c){for(const u of o)d+=~u*(BigInt(1)<<BigInt(32)*f++);d*=BigInt(-1)}else for(const u of o)d+=u*(BigInt(1)<<BigInt(32)*f++);return d}let Pc,PT;N$?(PT=t=>t.byteLength===8?new t.BigIntArray(t.buffer,t.byteOffset,1)[0]:Sx(t),Pc=t=>t.byteLength===8?`${new t.BigIntArray(t.buffer,t.byteOffset,1)[0]}`:Sx(t)):(Pc=Sx,PT=Pc);function Sx(t){let e="";const n=new Uint32Array(2);let i=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2);const s=new Uint32Array((i=new Uint16Array(i).reverse()).buffer);let o=-1;const c=i.length-1;do{for(n[0]=i[o=0];o<c;)i[o++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+i[o];i[o]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,e=`${n[0]}${e}`}while(s[0]||s[1]||s[2]||s[3]);return e!=null?e:"0"}class Yy{static new(e,n){switch(n){case!0:return new Fh(e);case!1:return new Oh(e)}switch(e.constructor){case Int8Array:case Int16Array:case Int32Array:case N2:return new Fh(e)}return e.byteLength===16?new X_(e):new Oh(e)}static signed(e){return new Fh(e)}static unsigned(e){return new Oh(e)}static decimal(e){return new X_(e)}constructor(e,n){return Yy.new(e,n)}}const soe=Object.freeze(Object.defineProperty({__proto__:null,isArrowBigNumSymbol:$$,get bignumToString(){return Pc},get bignumToBigInt(){return PT},BN:Yy},Symbol.toStringTag,{value:"Module"}));var G$,V$,H$,W$,Y$,X$,K$,J$,Q$,Z$,e5,t5,n5,i5,s5,r5,a5,o5,l5;class Ye{static isNull(e){return(e==null?void 0:e.typeId)===te.Null}static isInt(e){return(e==null?void 0:e.typeId)===te.Int}static isFloat(e){return(e==null?void 0:e.typeId)===te.Float}static isBinary(e){return(e==null?void 0:e.typeId)===te.Binary}static isUtf8(e){return(e==null?void 0:e.typeId)===te.Utf8}static isBool(e){return(e==null?void 0:e.typeId)===te.Bool}static isDecimal(e){return(e==null?void 0:e.typeId)===te.Decimal}static isDate(e){return(e==null?void 0:e.typeId)===te.Date}static isTime(e){return(e==null?void 0:e.typeId)===te.Time}static isTimestamp(e){return(e==null?void 0:e.typeId)===te.Timestamp}static isInterval(e){return(e==null?void 0:e.typeId)===te.Interval}static isList(e){return(e==null?void 0:e.typeId)===te.List}static isStruct(e){return(e==null?void 0:e.typeId)===te.Struct}static isUnion(e){return(e==null?void 0:e.typeId)===te.Union}static isFixedSizeBinary(e){return(e==null?void 0:e.typeId)===te.FixedSizeBinary}static isFixedSizeList(e){return(e==null?void 0:e.typeId)===te.FixedSizeList}static isMap(e){return(e==null?void 0:e.typeId)===te.Map}static isDictionary(e){return(e==null?void 0:e.typeId)===te.Dictionary}static isDenseUnion(e){return Ye.isUnion(e)&&e.mode===pi.Dense}static isSparseUnion(e){return Ye.isUnion(e)&&e.mode===pi.Sparse}get typeId(){return te.NONE}}G$=Symbol.toStringTag;Ye[G$]=(t=>(t.children=null,t.ArrayType=Array,t[Symbol.toStringTag]="DataType"))(Ye.prototype);class Oo extends Ye{toString(){return"Null"}get typeId(){return te.Null}}V$=Symbol.toStringTag;Oo[V$]=(t=>t[Symbol.toStringTag]="Null")(Oo.prototype);class Vi extends Ye{constructor(e,n){super(),this.isSigned=e,this.bitWidth=n}get typeId(){return te.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}H$=Symbol.toStringTag;Vi[H$]=(t=>(t.isSigned=null,t.bitWidth=null,t[Symbol.toStringTag]="Int"))(Vi.prototype);class L2 extends Vi{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class P2 extends Vi{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class Qc extends Vi{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class G1 extends Vi{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class D2 extends Vi{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class j2 extends Vi{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class U2 extends Vi{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class z2 extends Vi{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(L2.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(P2.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(Qc.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(G1.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(D2.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(j2.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(U2.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(z2.prototype,"ArrayType",{value:BigUint64Array});class jl extends Ye{constructor(e){super(),this.precision=e}get typeId(){return te.Float}get ArrayType(){switch(this.precision){case Zn.HALF:return Uint16Array;case Zn.SINGLE:return Float32Array;case Zn.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}W$=Symbol.toStringTag;jl[W$]=(t=>(t.precision=null,t[Symbol.toStringTag]="Float"))(jl.prototype);class c5 extends jl{constructor(){super(Zn.HALF)}}class $2 extends jl{constructor(){super(Zn.SINGLE)}}class V1 extends jl{constructor(){super(Zn.DOUBLE)}}Object.defineProperty(c5.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty($2.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(V1.prototype,"ArrayType",{value:Float64Array});class K_ extends Ye{constructor(){super()}get typeId(){return te.Binary}toString(){return"Binary"}}Y$=Symbol.toStringTag;K_[Y$]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Binary"))(K_.prototype);class sp extends Ye{constructor(){super()}get typeId(){return te.Utf8}toString(){return"Utf8"}}X$=Symbol.toStringTag;sp[X$]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Utf8"))(sp.prototype);class rp extends Ye{constructor(){super()}get typeId(){return te.Bool}toString(){return"Bool"}}K$=Symbol.toStringTag;rp[K$]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Bool"))(rp.prototype);class J_ extends Ye{constructor(e,n,i=128){super(),this.scale=e,this.precision=n,this.bitWidth=i}get typeId(){return te.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}J$=Symbol.toStringTag;J_[J$]=(t=>(t.scale=null,t.precision=null,t.ArrayType=Uint32Array,t[Symbol.toStringTag]="Decimal"))(J_.prototype);class Yf extends Ye{constructor(e){super(),this.unit=e}get typeId(){return te.Date}toString(){return`Date${(this.unit+1)*32}<${Ps[this.unit]}>`}}Q$=Symbol.toStringTag;Yf[Q$]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Date"))(Yf.prototype);class roe extends Yf{constructor(){super(Ps.DAY)}}class d5 extends Yf{constructor(){super(Ps.MILLISECOND)}}class Mo extends Ye{constructor(e,n){super(),this.unit=e,this.bitWidth=n}get typeId(){return te.Time}toString(){return`Time${this.bitWidth}<${ct[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}Z$=Symbol.toStringTag;Mo[Z$]=(t=>(t.unit=null,t.bitWidth=null,t[Symbol.toStringTag]="Time"))(Mo.prototype);class aoe extends Mo{constructor(){super(ct.SECOND,32)}}class ooe extends Mo{constructor(){super(ct.MILLISECOND,32)}}class loe extends Mo{constructor(){super(ct.MICROSECOND,64)}}class coe extends Mo{constructor(){super(ct.NANOSECOND,64)}}class Ul extends Ye{constructor(e,n){super(),this.unit=e,this.timezone=n}get typeId(){return te.Timestamp}toString(){return`Timestamp<${ct[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}e5=Symbol.toStringTag;Ul[e5]=(t=>(t.unit=null,t.timezone=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Timestamp"))(Ul.prototype);class doe extends Ul{constructor(e){super(ct.SECOND,e)}}class foe extends Ul{constructor(e){super(ct.MILLISECOND,e)}}class uoe extends Ul{constructor(e){super(ct.MICROSECOND,e)}}class hoe extends Ul{constructor(e){super(ct.NANOSECOND,e)}}class Xf extends Ye{constructor(e){super(),this.unit=e}get typeId(){return te.Interval}toString(){return`Interval<${Dr[this.unit]}>`}}t5=Symbol.toStringTag;Xf[t5]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Interval"))(Xf.prototype);class poe extends Xf{constructor(){super(Dr.DAY_TIME)}}class goe extends Xf{constructor(){super(Dr.YEAR_MONTH)}}class Kf extends Ye{constructor(e){super(),this.children=[e]}get typeId(){return te.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}n5=Symbol.toStringTag;Kf[n5]=(t=>(t.children=null,t[Symbol.toStringTag]="List"))(Kf.prototype);class oi extends Ye{constructor(e){super(),this.children=e}get typeId(){return te.Struct}toString(){return`Struct<{${this.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}i5=Symbol.toStringTag;oi[i5]=(t=>(t.children=null,t[Symbol.toStringTag]="Struct"))(oi.prototype);class Zc extends Ye{constructor(e,n,i){super(),this.mode=e,this.children=i,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((s,o,c)=>(s[o]=c)&&s||s,Object.create(null))}get typeId(){return te.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(e=>`${e.type}`).join(" | ")}>`}}s5=Symbol.toStringTag;Zc[s5]=(t=>(t.mode=null,t.typeIds=null,t.children=null,t.typeIdToChildIndex=null,t.ArrayType=Int8Array,t[Symbol.toStringTag]="Union"))(Zc.prototype);class _oe extends Zc{constructor(e,n){super(pi.Dense,e,n)}}class yoe extends Zc{constructor(e,n){super(pi.Sparse,e,n)}}class Q_ extends Ye{constructor(e){super(),this.byteWidth=e}get typeId(){return te.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}r5=Symbol.toStringTag;Q_[r5]=(t=>(t.byteWidth=null,t.ArrayType=Uint8Array,t[Symbol.toStringTag]="FixedSizeBinary"))(Q_.prototype);class ap extends Ye{constructor(e,n){super(),this.listSize=e,this.children=[n]}get typeId(){return te.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}a5=Symbol.toStringTag;ap[a5]=(t=>(t.children=null,t.listSize=null,t[Symbol.toStringTag]="FixedSizeList"))(ap.prototype);class op extends Ye{constructor(e,n=!1){super(),this.children=[e],this.keysSorted=n}get typeId(){return te.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}o5=Symbol.toStringTag;op[o5]=(t=>(t.children=null,t.keysSorted=null,t[Symbol.toStringTag]="Map_"))(op.prototype);const moe=(t=>()=>++t)(-1);class zl extends Ye{constructor(e,n,i,s){super(),this.indices=n,this.dictionary=e,this.isOrdered=s||!1,this.id=i==null?moe():typeof i=="number"?i:i.low}get typeId(){return te.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}l5=Symbol.toStringTag;zl[l5]=(t=>(t.id=null,t.indices=null,t.isOrdered=null,t.dictionary=null,t[Symbol.toStringTag]="Dictionary"))(zl.prototype);function Ya(t){const e=t;switch(t.typeId){case te.Decimal:return t.bitWidth/32;case te.Timestamp:return 2;case te.Date:return 1+e.unit;case te.Interval:return 1+e.unit;case te.FixedSizeList:return e.listSize;case te.FixedSizeBinary:return e.byteWidth;default:return 1}}class Ft{visitMany(e,...n){return e.map((i,s)=>this.visit(i,...n.map(o=>o[s])))}visit(...e){return this.getVisitFn(e[0],!1).apply(this,e)}getVisitFn(e,n=!0){return woe(this,e,n)}getVisitFnByTypeId(e,n=!0){return ch(this,e,n)}visitNull(e,...n){return null}visitBool(e,...n){return null}visitInt(e,...n){return null}visitFloat(e,...n){return null}visitUtf8(e,...n){return null}visitBinary(e,...n){return null}visitFixedSizeBinary(e,...n){return null}visitDate(e,...n){return null}visitTimestamp(e,...n){return null}visitTime(e,...n){return null}visitDecimal(e,...n){return null}visitList(e,...n){return null}visitStruct(e,...n){return null}visitUnion(e,...n){return null}visitDictionary(e,...n){return null}visitInterval(e,...n){return null}visitFixedSizeList(e,...n){return null}visitMap(e,...n){return null}}function woe(t,e,n=!0){return typeof e=="number"?ch(t,e,n):typeof e=="string"&&e in te?ch(t,te[e],n):e&&e instanceof Ye?ch(t,JP(e),n):(e==null?void 0:e.type)&&e.type instanceof Ye?ch(t,JP(e.type),n):ch(t,te.NONE,n)}function ch(t,e,n=!0){let i=null;switch(e){case te.Null:i=t.visitNull;break;case te.Bool:i=t.visitBool;break;case te.Int:i=t.visitInt;break;case te.Int8:i=t.visitInt8||t.visitInt;break;case te.Int16:i=t.visitInt16||t.visitInt;break;case te.Int32:i=t.visitInt32||t.visitInt;break;case te.Int64:i=t.visitInt64||t.visitInt;break;case te.Uint8:i=t.visitUint8||t.visitInt;break;case te.Uint16:i=t.visitUint16||t.visitInt;break;case te.Uint32:i=t.visitUint32||t.visitInt;break;case te.Uint64:i=t.visitUint64||t.visitInt;break;case te.Float:i=t.visitFloat;break;case te.Float16:i=t.visitFloat16||t.visitFloat;break;case te.Float32:i=t.visitFloat32||t.visitFloat;break;case te.Float64:i=t.visitFloat64||t.visitFloat;break;case te.Utf8:i=t.visitUtf8;break;case te.Binary:i=t.visitBinary;break;case te.FixedSizeBinary:i=t.visitFixedSizeBinary;break;case te.Date:i=t.visitDate;break;case te.DateDay:i=t.visitDateDay||t.visitDate;break;case te.DateMillisecond:i=t.visitDateMillisecond||t.visitDate;break;case te.Timestamp:i=t.visitTimestamp;break;case te.TimestampSecond:i=t.visitTimestampSecond||t.visitTimestamp;break;case te.TimestampMillisecond:i=t.visitTimestampMillisecond||t.visitTimestamp;break;case te.TimestampMicrosecond:i=t.visitTimestampMicrosecond||t.visitTimestamp;break;case te.TimestampNanosecond:i=t.visitTimestampNanosecond||t.visitTimestamp;break;case te.Time:i=t.visitTime;break;case te.TimeSecond:i=t.visitTimeSecond||t.visitTime;break;case te.TimeMillisecond:i=t.visitTimeMillisecond||t.visitTime;break;case te.TimeMicrosecond:i=t.visitTimeMicrosecond||t.visitTime;break;case te.TimeNanosecond:i=t.visitTimeNanosecond||t.visitTime;break;case te.Decimal:i=t.visitDecimal;break;case te.List:i=t.visitList;break;case te.Struct:i=t.visitStruct;break;case te.Union:i=t.visitUnion;break;case te.DenseUnion:i=t.visitDenseUnion||t.visitUnion;break;case te.SparseUnion:i=t.visitSparseUnion||t.visitUnion;break;case te.Dictionary:i=t.visitDictionary;break;case te.Interval:i=t.visitInterval;break;case te.IntervalDayTime:i=t.visitIntervalDayTime||t.visitInterval;break;case te.IntervalYearMonth:i=t.visitIntervalYearMonth||t.visitInterval;break;case te.FixedSizeList:i=t.visitFixedSizeList;break;case te.Map:i=t.visitMap;break}if(typeof i=="function")return i;if(!n)return()=>null;throw new Error(`Unrecognized type '${te[e]}'`)}function JP(t){switch(t.typeId){case te.Null:return te.Null;case te.Int:{const{bitWidth:e,isSigned:n}=t;switch(e){case 8:return n?te.Int8:te.Uint8;case 16:return n?te.Int16:te.Uint16;case 32:return n?te.Int32:te.Uint32;case 64:return n?te.Int64:te.Uint64}return te.Int}case te.Float:switch(t.precision){case Zn.HALF:return te.Float16;case Zn.SINGLE:return te.Float32;case Zn.DOUBLE:return te.Float64}return te.Float;case te.Binary:return te.Binary;case te.Utf8:return te.Utf8;case te.Bool:return te.Bool;case te.Decimal:return te.Decimal;case te.Time:switch(t.unit){case ct.SECOND:return te.TimeSecond;case ct.MILLISECOND:return te.TimeMillisecond;case ct.MICROSECOND:return te.TimeMicrosecond;case ct.NANOSECOND:return te.TimeNanosecond}return te.Time;case te.Timestamp:switch(t.unit){case ct.SECOND:return te.TimestampSecond;case ct.MILLISECOND:return te.TimestampMillisecond;case ct.MICROSECOND:return te.TimestampMicrosecond;case ct.NANOSECOND:return te.TimestampNanosecond}return te.Timestamp;case te.Date:switch(t.unit){case Ps.DAY:return te.DateDay;case Ps.MILLISECOND:return te.DateMillisecond}return te.Date;case te.Interval:switch(t.unit){case Dr.DAY_TIME:return te.IntervalDayTime;case Dr.YEAR_MONTH:return te.IntervalYearMonth}return te.Interval;case te.Map:return te.Map;case te.List:return te.List;case te.Struct:return te.Struct;case te.Union:switch(t.mode){case pi.Dense:return te.DenseUnion;case pi.Sparse:return te.SparseUnion}return te.Union;case te.FixedSizeBinary:return te.FixedSizeBinary;case te.FixedSizeList:return te.FixedSizeList;case te.Dictionary:return te.Dictionary}throw new Error(`Unrecognized type '${te[t.typeId]}'`)}Ft.prototype.visitInt8=null;Ft.prototype.visitInt16=null;Ft.prototype.visitInt32=null;Ft.prototype.visitInt64=null;Ft.prototype.visitUint8=null;Ft.prototype.visitUint16=null;Ft.prototype.visitUint32=null;Ft.prototype.visitUint64=null;Ft.prototype.visitFloat16=null;Ft.prototype.visitFloat32=null;Ft.prototype.visitFloat64=null;Ft.prototype.visitDateDay=null;Ft.prototype.visitDateMillisecond=null;Ft.prototype.visitTimestampSecond=null;Ft.prototype.visitTimestampMillisecond=null;Ft.prototype.visitTimestampMicrosecond=null;Ft.prototype.visitTimestampNanosecond=null;Ft.prototype.visitTimeSecond=null;Ft.prototype.visitTimeMillisecond=null;Ft.prototype.visitTimeMicrosecond=null;Ft.prototype.visitTimeNanosecond=null;Ft.prototype.visitDenseUnion=null;Ft.prototype.visitSparseUnion=null;Ft.prototype.visitIntervalDayTime=null;Ft.prototype.visitIntervalYearMonth=null;const f5=new Float64Array(1),Wu=new Uint32Array(f5.buffer);function q2(t){const e=(t&31744)>>10,n=(t&1023)/1024,i=Math.pow(-1,(t&32768)>>15);switch(e){case 31:return i*(n?Number.NaN:1/0);case 0:return i*(n?6103515625e-14*n:0)}return i*Math.pow(2,e-15)*(1+n)}function G2(t){if(t!==t)return 32256;f5[0]=t;const e=(Wu[1]&2147483648)>>16&65535;let n=Wu[1]&2146435072,i=0;return n>=1089470464?Wu[0]>0?n=31744:(n=(n&2080374784)>>16,i=(Wu[1]&1048575)>>10):n<=1056964608?(i=1048576+(Wu[1]&1048575),i=1048576+(i<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,i=(Wu[1]&1048575)+512>>10),e|n|i&65535}const boe=Object.freeze(Object.defineProperty({__proto__:null,uint16ToFloat64:q2,float64ToUint16:G2},Symbol.toStringTag,{value:"Module"}));class ft extends Ft{}function bt(t){return(e,n,i)=>{if(e.setValid(n,i!=null))return t(e,n,i)}}const Toe=(t,e,n)=>{t[e]=Math.trunc(n/864e5)},V2=(t,e,n)=>{t[e]=Math.trunc(n%4294967296),t[e+1]=Math.trunc(n/4294967296)},voe=(t,e,n)=>{t[e]=Math.trunc(n*1e3%4294967296),t[e+1]=Math.trunc(n*1e3/4294967296)},Eoe=(t,e,n)=>{t[e]=Math.trunc(n*1e6%4294967296),t[e+1]=Math.trunc(n*1e6/4294967296)},u5=(t,e,n,i)=>{if(n+1<e.length){const{[n]:s,[n+1]:o}=e;t.set(i.subarray(0,o-s),s)}},Soe=({offset:t,values:e},n,i)=>{const s=t+n;i?e[s>>3]|=1<<s%8:e[s>>3]&=~(1<<s%8)},Hl=({values:t},e,n)=>{t[e]=n},H2=({values:t},e,n)=>{t[e]=n},h5=({values:t},e,n)=>{t[e]=G2(n)},xoe=(t,e,n)=>{switch(t.type.precision){case Zn.HALF:return h5(t,e,n);case Zn.SINGLE:case Zn.DOUBLE:return H2(t,e,n)}},W2=({values:t},e,n)=>{Toe(t,e,n.valueOf())},Y2=({values:t},e,n)=>{V2(t,e*2,n.valueOf())},p5=({stride:t,values:e},n,i)=>{e.set(i.subarray(0,t),t*n)},Boe=({values:t,valueOffsets:e},n,i)=>u5(t,e,n,i),koe=({values:t,valueOffsets:e},n,i)=>{u5(t,e,n,U1(i))},g5=(t,e,n)=>{t.type.unit===Ps.DAY?W2(t,e,n):Y2(t,e,n)},X2=({values:t},e,n)=>V2(t,e*2,n/1e3),K2=({values:t},e,n)=>V2(t,e*2,n),J2=({values:t},e,n)=>voe(t,e*2,n),Q2=({values:t},e,n)=>Eoe(t,e*2,n),_5=(t,e,n)=>{switch(t.type.unit){case ct.SECOND:return X2(t,e,n);case ct.MILLISECOND:return K2(t,e,n);case ct.MICROSECOND:return J2(t,e,n);case ct.NANOSECOND:return Q2(t,e,n)}},Z2=({values:t},e,n)=>{t[e]=n},eO=({values:t},e,n)=>{t[e]=n},tO=({values:t},e,n)=>{t[e]=n},nO=({values:t},e,n)=>{t[e]=n},y5=(t,e,n)=>{switch(t.type.unit){case ct.SECOND:return Z2(t,e,n);case ct.MILLISECOND:return eO(t,e,n);case ct.MICROSECOND:return tO(t,e,n);case ct.NANOSECOND:return nO(t,e,n)}},m5=({values:t,stride:e},n,i)=>{t.set(i.subarray(0,e),e*n)},Ioe=(t,e,n)=>{const i=t.children[0],s=t.valueOffsets,o=jr.getVisitFn(i);if(Array.isArray(n))for(let c=-1,d=s[e],f=s[e+1];d<f;)o(i,d++,n[++c]);else for(let c=-1,d=s[e],f=s[e+1];d<f;)o(i,d++,n.get(++c))},Foe=(t,e,n)=>{const i=t.children[0],{valueOffsets:s}=t,o=jr.getVisitFn(i);let{[e]:c,[e+1]:d}=s;const f=n instanceof Map?n.entries():Object.entries(n);for(const u of f)if(o(i,c,u),++c>=d)break},Ooe=(t,e)=>(n,i,s,o)=>i&&n(i,t,e[o]),Moe=(t,e)=>(n,i,s,o)=>i&&n(i,t,e.get(o)),Aoe=(t,e)=>(n,i,s,o)=>i&&n(i,t,e.get(s.name)),Noe=(t,e)=>(n,i,s,o)=>i&&n(i,t,e[s.name]),Coe=(t,e,n)=>{const i=t.type.children.map(o=>jr.getVisitFn(o.type)),s=n instanceof Map?Aoe(e,n):n instanceof He?Moe(e,n):Array.isArray(n)?Ooe(e,n):Noe(e,n);t.type.children.forEach((o,c)=>s(i[c],t.children[c],o,c))},Roe=(t,e,n)=>{t.type.mode===pi.Dense?w5(t,e,n):b5(t,e,n)},w5=(t,e,n)=>{const i=t.type.typeIdToChildIndex[t.typeIds[e]],s=t.children[i];jr.visit(s,t.valueOffsets[e],n)},b5=(t,e,n)=>{const i=t.type.typeIdToChildIndex[t.typeIds[e]],s=t.children[i];jr.visit(s,e,n)},Loe=(t,e,n)=>{var i;(i=t.dictionary)===null||i===void 0||i.set(t.values[e],n)},T5=(t,e,n)=>{t.type.unit===Dr.DAY_TIME?iO(t,e,n):sO(t,e,n)},iO=({values:t},e,n)=>{t.set(n.subarray(0,2),2*e)},sO=({values:t},e,n)=>{t[e]=n[0]*12+n[1]%12},Poe=(t,e,n)=>{const{stride:i}=t,s=t.children[0],o=jr.getVisitFn(s);if(Array.isArray(n))for(let c=-1,d=e*i;++c<i;)o(s,d+c,n[c]);else for(let c=-1,d=e*i;++c<i;)o(s,d+c,n.get(c))};ft.prototype.visitBool=bt(Soe);ft.prototype.visitInt=bt(Hl);ft.prototype.visitInt8=bt(Hl);ft.prototype.visitInt16=bt(Hl);ft.prototype.visitInt32=bt(Hl);ft.prototype.visitInt64=bt(Hl);ft.prototype.visitUint8=bt(Hl);ft.prototype.visitUint16=bt(Hl);ft.prototype.visitUint32=bt(Hl);ft.prototype.visitUint64=bt(Hl);ft.prototype.visitFloat=bt(xoe);ft.prototype.visitFloat16=bt(h5);ft.prototype.visitFloat32=bt(H2);ft.prototype.visitFloat64=bt(H2);ft.prototype.visitUtf8=bt(koe);ft.prototype.visitBinary=bt(Boe);ft.prototype.visitFixedSizeBinary=bt(p5);ft.prototype.visitDate=bt(g5);ft.prototype.visitDateDay=bt(W2);ft.prototype.visitDateMillisecond=bt(Y2);ft.prototype.visitTimestamp=bt(_5);ft.prototype.visitTimestampSecond=bt(X2);ft.prototype.visitTimestampMillisecond=bt(K2);ft.prototype.visitTimestampMicrosecond=bt(J2);ft.prototype.visitTimestampNanosecond=bt(Q2);ft.prototype.visitTime=bt(y5);ft.prototype.visitTimeSecond=bt(Z2);ft.prototype.visitTimeMillisecond=bt(eO);ft.prototype.visitTimeMicrosecond=bt(tO);ft.prototype.visitTimeNanosecond=bt(nO);ft.prototype.visitDecimal=bt(m5);ft.prototype.visitList=bt(Ioe);ft.prototype.visitStruct=bt(Coe);ft.prototype.visitUnion=bt(Roe);ft.prototype.visitDenseUnion=bt(w5);ft.prototype.visitSparseUnion=bt(b5);ft.prototype.visitDictionary=bt(Loe);ft.prototype.visitInterval=bt(T5);ft.prototype.visitIntervalDayTime=bt(iO);ft.prototype.visitIntervalYearMonth=bt(sO);ft.prototype.visitFixedSizeList=bt(Poe);ft.prototype.visitMap=bt(Foe);const jr=new ft,ra=Symbol.for("parent"),Mh=Symbol.for("rowIndex");class H1{constructor(e,n){return this[ra]=e,this[Mh]=n,new Proxy(this,new joe)}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[Mh],n=this[ra],i=n.type.children,s={};for(let o=-1,c=i.length;++o<c;)s[i[o].name]=Ds.visit(n.children[o],e);return s}toString(){return`{${[...this].map(([e,n])=>`${Lc(e)}: ${Lc(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new Doe(this[ra],this[Mh])}}class Doe{constructor(e,n){this.childIndex=0,this.children=e.children,this.rowIndex=n,this.childFields=e.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const e=this.childIndex;return e<this.numChildren?(this.childIndex=e+1,{done:!1,value:[this.childFields[e].name,Ds.visit(this.children[e],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(H1.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[ra]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Mh]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class joe{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[ra].type.children.map(n=>n.name)}has(e,n){return e[ra].type.children.findIndex(i=>i.name===n)!==-1}getOwnPropertyDescriptor(e,n){if(e[ra].type.children.findIndex(i=>i.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,n){if(Reflect.has(e,n))return e[n];const i=e[ra].type.children.findIndex(s=>s.name===n);if(i!==-1){const s=Ds.visit(e[ra].children[i],e[Mh]);return Reflect.set(e,n,s),s}}set(e,n,i){const s=e[ra].type.children.findIndex(o=>o.name===n);return s!==-1?(jr.visit(e[ra].children[s],e[Mh],i),Reflect.set(e,n,i)):Reflect.has(e,n)||typeof n=="symbol"?Reflect.set(e,n,i):!1}}class tt extends Ft{}function ut(t){return(e,n)=>e.getValid(n)?t(e,n):null}const Uoe=(t,e)=>864e5*t[e],rO=(t,e)=>4294967296*t[e+1]+(t[e]>>>0),zoe=(t,e)=>4294967296*(t[e+1]/1e3)+(t[e]>>>0)/1e3,$oe=(t,e)=>4294967296*(t[e+1]/1e6)+(t[e]>>>0)/1e6,v5=t=>new Date(t),qoe=(t,e)=>v5(Uoe(t,e)),Goe=(t,e)=>v5(rO(t,e)),Voe=(t,e)=>null,E5=(t,e,n)=>{if(n+1>=e.length)return null;const i=e[n],s=e[n+1];return t.subarray(i,s)},Hoe=({offset:t,values:e},n)=>{const i=t+n;return(e[i>>3]&1<<i%8)!==0},S5=({values:t},e)=>qoe(t,e),x5=({values:t},e)=>Goe(t,e*2),Sd=({stride:t,values:e},n)=>e[t*n],Woe=({stride:t,values:e},n)=>q2(e[t*n]),B5=({values:t},e)=>t[e],Yoe=({stride:t,values:e},n)=>e.subarray(t*n,t*(n+1)),Xoe=({values:t,valueOffsets:e},n)=>E5(t,e,n),Koe=({values:t,valueOffsets:e},n)=>{const i=E5(t,e,n);return i!==null?xk(i):null},Joe=({values:t},e)=>t[e],Qoe=({type:t,values:e},n)=>t.precision!==Zn.HALF?e[n]:q2(e[n]),Zoe=(t,e)=>t.type.unit===Ps.DAY?S5(t,e):x5(t,e),k5=({values:t},e)=>1e3*rO(t,e*2),I5=({values:t},e)=>rO(t,e*2),F5=({values:t},e)=>zoe(t,e*2),O5=({values:t},e)=>$oe(t,e*2),ele=(t,e)=>{switch(t.type.unit){case ct.SECOND:return k5(t,e);case ct.MILLISECOND:return I5(t,e);case ct.MICROSECOND:return F5(t,e);case ct.NANOSECOND:return O5(t,e)}},M5=({values:t},e)=>t[e],A5=({values:t},e)=>t[e],N5=({values:t},e)=>t[e],C5=({values:t},e)=>t[e],tle=(t,e)=>{switch(t.type.unit){case ct.SECOND:return M5(t,e);case ct.MILLISECOND:return A5(t,e);case ct.MICROSECOND:return N5(t,e);case ct.NANOSECOND:return C5(t,e)}},nle=({values:t,stride:e},n)=>Yy.decimal(t.subarray(e*n,e*(n+1))),ile=(t,e)=>{const{valueOffsets:n,stride:i,children:s}=t,{[e*i]:o,[e*i+1]:c}=n,f=s[0].slice(o,c-o);return new He([f])},sle=(t,e)=>{const{valueOffsets:n,children:i}=t,{[e]:s,[e+1]:o}=n,c=i[0];return new Xy(c.slice(s,o-s))},rle=(t,e)=>new H1(t,e),ale=(t,e)=>t.type.mode===pi.Dense?R5(t,e):L5(t,e),R5=(t,e)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],i=t.children[n];return Ds.visit(i,t.valueOffsets[e])},L5=(t,e)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],i=t.children[n];return Ds.visit(i,e)},ole=(t,e)=>{var n;return(n=t.dictionary)===null||n===void 0?void 0:n.get(t.values[e])},lle=(t,e)=>t.type.unit===Dr.DAY_TIME?P5(t,e):D5(t,e),P5=({values:t},e)=>t.subarray(2*e,2*(e+1)),D5=({values:t},e)=>{const n=t[e],i=new Int32Array(2);return i[0]=Math.trunc(n/12),i[1]=Math.trunc(n%12),i},cle=(t,e)=>{const{stride:n,children:i}=t,o=i[0].slice(e*n,n);return new He([o])};tt.prototype.visitNull=ut(Voe);tt.prototype.visitBool=ut(Hoe);tt.prototype.visitInt=ut(Joe);tt.prototype.visitInt8=ut(Sd);tt.prototype.visitInt16=ut(Sd);tt.prototype.visitInt32=ut(Sd);tt.prototype.visitInt64=ut(B5);tt.prototype.visitUint8=ut(Sd);tt.prototype.visitUint16=ut(Sd);tt.prototype.visitUint32=ut(Sd);tt.prototype.visitUint64=ut(B5);tt.prototype.visitFloat=ut(Qoe);tt.prototype.visitFloat16=ut(Woe);tt.prototype.visitFloat32=ut(Sd);tt.prototype.visitFloat64=ut(Sd);tt.prototype.visitUtf8=ut(Koe);tt.prototype.visitBinary=ut(Xoe);tt.prototype.visitFixedSizeBinary=ut(Yoe);tt.prototype.visitDate=ut(Zoe);tt.prototype.visitDateDay=ut(S5);tt.prototype.visitDateMillisecond=ut(x5);tt.prototype.visitTimestamp=ut(ele);tt.prototype.visitTimestampSecond=ut(k5);tt.prototype.visitTimestampMillisecond=ut(I5);tt.prototype.visitTimestampMicrosecond=ut(F5);tt.prototype.visitTimestampNanosecond=ut(O5);tt.prototype.visitTime=ut(tle);tt.prototype.visitTimeSecond=ut(M5);tt.prototype.visitTimeMillisecond=ut(A5);tt.prototype.visitTimeMicrosecond=ut(N5);tt.prototype.visitTimeNanosecond=ut(C5);tt.prototype.visitDecimal=ut(nle);tt.prototype.visitList=ut(ile);tt.prototype.visitStruct=ut(rle);tt.prototype.visitUnion=ut(ale);tt.prototype.visitDenseUnion=ut(R5);tt.prototype.visitSparseUnion=ut(L5);tt.prototype.visitDictionary=ut(ole);tt.prototype.visitInterval=ut(lle);tt.prototype.visitIntervalDayTime=ut(P5);tt.prototype.visitIntervalYearMonth=ut(D5);tt.prototype.visitFixedSizeList=ut(cle);tt.prototype.visitMap=ut(sle);const Ds=new tt,ua=Symbol.for("keys"),Ah=Symbol.for("vals");class Xy{constructor(e){return this[ua]=new He([e.children[0]]).memoize(),this[Ah]=e.children[1],new Proxy(this,new fle)}[Symbol.iterator](){return new dle(this[ua],this[Ah])}get size(){return this[ua].length}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[ua],n=this[Ah],i={};for(let s=-1,o=e.length;++s<o;)i[e.get(s)]=Ds.visit(n,s);return i}toString(){return`{${[...this].map(([e,n])=>`${Lc(e)}: ${Lc(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class dle{constructor(e,n){this.keys=e,this.vals=n,this.keyIndex=0,this.numKeys=e.length}[Symbol.iterator](){return this}next(){const e=this.keyIndex;return e===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(e),Ds.visit(this.vals,e)]})}}class fle{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[ua].toArray().map(String)}has(e,n){return e[ua].includes(n)}getOwnPropertyDescriptor(e,n){if(e[ua].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,n){if(Reflect.has(e,n))return e[n];const i=e[ua].indexOf(n);if(i!==-1){const s=Ds.visit(Reflect.get(e,Ah),i);return Reflect.set(e,n,s),s}}set(e,n,i){const s=e[ua].indexOf(n);return s!==-1?(jr.visit(Reflect.get(e,Ah),s,i),Reflect.set(e,n,i)):Reflect.has(e,n)?Reflect.set(e,n,i):!1}}Object.defineProperties(Xy.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[ua]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Ah]:{writable:!0,enumerable:!1,configurable:!1,value:null}});function ule(t,e,n){const i=t.length,s=e>-1?e:i+e%i;return n?n(t,s):s}let QP;function aO(t,e,n,i){const{length:s=0}=t;let o=typeof e!="number"?0:e,c=typeof n!="number"?s:n;return o<0&&(o=(o%s+s)%s),c<0&&(c=(c%s+s)%s),c<o&&(QP=o,o=c,c=QP),c>s&&(c=s),i?i(t,o,c):[o,c]}const ZP=t=>t!==t;function ku(t){if(typeof t!=="object"||t===null)return ZP(t)?ZP:n=>n===t;if(t instanceof Date){const n=t.valueOf();return i=>i instanceof Date?i.valueOf()===n:!1}return ArrayBuffer.isView(t)?n=>n?z$(t,n):!1:t instanceof Map?ple(t):Array.isArray(t)?hle(t):t instanceof He?gle(t):_le(t,!0)}function hle(t){const e=[];for(let n=-1,i=t.length;++n<i;)e[n]=ku(t[n]);return W1(e)}function ple(t){let e=-1;const n=[];for(const i of t.values())n[++e]=ku(i);return W1(n)}function gle(t){const e=[];for(let n=-1,i=t.length;++n<i;)e[n]=ku(t.get(n));return W1(e)}function _le(t,e=!1){const n=Object.keys(t);if(!e&&n.length===0)return()=>!1;const i=[];for(let s=-1,o=n.length;++s<o;)i[s]=ku(t[n[s]]);return W1(i,n)}function W1(t,e){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return yle(t,n);case Map:return eD(t,n,n.keys());case Xy:case H1:case Object:case void 0:return eD(t,n,e||Object.keys(n))}return n instanceof He?mle(t,n):!1}}function yle(t,e){const n=t.length;if(e.length!==n)return!1;for(let i=-1;++i<n;)if(!t[i](e[i]))return!1;return!0}function mle(t,e){const n=t.length;if(e.length!==n)return!1;for(let i=-1;++i<n;)if(!t[i](e.get(i)))return!1;return!0}function eD(t,e,n){const i=n[Symbol.iterator](),s=e instanceof Map?e.keys():Object.keys(e)[Symbol.iterator](),o=e instanceof Map?e.values():Object.values(e)[Symbol.iterator]();let c=0;const d=t.length;let f=o.next(),u=i.next(),a=s.next();for(;c<d&&!u.done&&!a.done&&!f.done&&!(u.value!==a.value||!t[c](f.value));++c,u=i.next(),a=s.next(),f=o.next());return c===d&&u.done&&a.done&&f.done?!0:(i.return&&i.return(),s.return&&s.return(),o.return&&o.return(),!1)}const wle=Object.freeze(Object.defineProperty({__proto__:null,clampIndex:ule,clampRange:aO,createElementComparator:ku},Symbol.toStringTag,{value:"Module"}));function Y1(t,e,n,i){return(n&1<<i)!==0}function oO(t,e,n,i){return(n&1<<i)>>i}function ble(t,e,n){return n?!!(t[e>>3]|=1<<e%8)||!0:!(t[e>>3]&=~(1<<e%8))&&!1}function X1(t,e,n){const i=n.byteLength+7&-8;if(t>0||n.byteLength<i){const s=new Uint8Array(i);return s.set(t%8===0?n.subarray(t>>3):Z_(new lp(n,t,e,null,Y1)).subarray(0,i)),s}return n}function Z_(t){const e=[];let n=0,i=0,s=0;for(const c of t)c&&(s|=1<<i),++i===8&&(e[n++]=s,s=i=0);(n===0||i>0)&&(e[n++]=s);const o=new Uint8Array(e.length+7&-8);return o.set(e),o}class lp{constructor(e,n,i,s,o){this.bytes=e,this.length=i,this.context=s,this.get=o,this.bit=n%8,this.byteIndex=n>>3,this.byte=e[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function DT(t,e,n){if(n-e<=0)return 0;if(n-e<8){let o=0;for(const c of new lp(t,e,n-e,t,oO))o+=c;return o}const i=n>>3<<3,s=e+(e%8===0?0:8-e%8);return DT(t,e,s)+DT(t,i,n)+j5(t,s>>3,i-s>>3)}function j5(t,e,n){let i=0,s=Math.trunc(e);const o=new DataView(t.buffer,t.byteOffset,t.byteLength),c=n===void 0?t.byteLength:s+n;for(;c-s>=4;)i+=_0(o.getUint32(s)),s+=4;for(;c-s>=2;)i+=_0(o.getUint16(s)),s+=2;for(;c-s>=1;)i+=_0(o.getUint8(s)),s+=1;return i}function _0(t){let e=Math.trunc(t);return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),(e+(e>>>4)&252645135)*16843009>>>24}const Tle=Object.freeze(Object.defineProperty({__proto__:null,getBool:Y1,getBit:oO,setBool:ble,truncateBitmap:X1,packBools:Z_,BitIterator:lp,popcnt_bit_range:DT,popcnt_array:j5,popcnt_uint32:_0},Symbol.toStringTag,{value:"Module"})),vle=-1;class Kt{constructor(e,n,i,s,o,c=[],d){this.type=e,this.children=c,this.dictionary=d,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(i||0,0)),this._nullCount=Math.floor(Math.max(s||0,-1));let f;o instanceof Kt?(this.stride=o.stride,this.values=o.values,this.typeIds=o.typeIds,this.nullBitmap=o.nullBitmap,this.valueOffsets=o.valueOffsets):(this.stride=Ya(e),o&&((f=o[0])&&(this.valueOffsets=f),(f=o[1])&&(this.values=f),(f=o[2])&&(this.nullBitmap=f),(f=o[3])&&(this.typeIds=f))),this.nullable=this._nullCount!==0&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let e=0;const{valueOffsets:n,values:i,nullBitmap:s,typeIds:o}=this;return n&&(e+=n.byteLength),i&&(e+=i.byteLength),s&&(e+=s.byteLength),o&&(e+=o.byteLength),this.children.reduce((c,d)=>c+d.byteLength,e)}get nullCount(){let e=this._nullCount,n;return e<=vle&&(n=this.nullBitmap)&&(this._nullCount=e=this.length-DT(n,this.offset,this.offset+this.length)),e}getValid(e){if(this.nullable&&this.nullCount>0){const n=this.offset+e;return(this.nullBitmap[n>>3]&1<<n%8)!==0}return!0}setValid(e,n){if(!this.nullable)return n;if(!this.nullBitmap||this.nullBitmap.byteLength<=e>>3){const{nullBitmap:f}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:f,_nullCount:0})}const{nullBitmap:i,offset:s}=this,o=s+e>>3,c=(s+e)%8,d=i[o]>>c&1;return n?d===0&&(i[o]|=1<<c,this._nullCount=this.nullCount+1):d===1&&(i[o]&=~(1<<c),this._nullCount=this.nullCount-1),n}clone(e=this.type,n=this.offset,i=this.length,s=this._nullCount,o=this,c=this.children){return new Kt(e,n,i,s,o,c,this.dictionary)}slice(e,n){const{stride:i,typeId:s,children:o}=this,c=+(this._nullCount===0)-1,d=s===16?i:1,f=this._sliceBuffers(e,n,i,s);return this.clone(this.type,this.offset+e,n,c,f,o.length===0||this.valueOffsets?o:this._sliceChildren(o,d*e,d*n))}_changeLengthAndBackfillNullBitmap(e){if(this.typeId===te.Null)return this.clone(this.type,0,e,0);const{length:n,nullCount:i}=this,s=new Uint8Array((e+63&-64)>>3).fill(255,0,n>>3);s[n>>3]=(1<<n-(n&-8))-1,i>0&&s.set(X1(this.offset,n,this.nullBitmap),0);const o=this.buffers;return o[sa.VALIDITY]=s,this.clone(this.type,0,e,i+(e-n),o)}_sliceBuffers(e,n,i,s){let o;const{buffers:c}=this;return(o=c[sa.TYPE])&&(c[sa.TYPE]=o.subarray(e,e+n)),(o=c[sa.OFFSET])&&(c[sa.OFFSET]=o.subarray(e,e+n+1))||(o=c[sa.DATA])&&(c[sa.DATA]=s===6?o:o.subarray(i*e,i*(e+n))),c}_sliceChildren(e,n,i){return e.map(s=>s.slice(n,i))}}Kt.prototype.children=Object.freeze([]);class F_ extends Ft{visit(e){return this.getVisitFn(e.type).call(this,e)}visitNull(e){const{["type"]:n,["offset"]:i=0,["length"]:s=0}=e;return new Kt(n,i,s,0)}visitBool(e){const{["type"]:n,["offset"]:i=0}=e,s=Nt(e.nullBitmap),o=Ot(n.ArrayType,e.data),{["length"]:c=o.length>>3,["nullCount"]:d=e.nullBitmap?-1:0}=e;return new Kt(n,i,c,d,[void 0,o,s])}visitInt(e){const{["type"]:n,["offset"]:i=0}=e,s=Nt(e.nullBitmap),o=Ot(n.ArrayType,e.data),{["length"]:c=o.length,["nullCount"]:d=e.nullBitmap?-1:0}=e;return new Kt(n,i,c,d,[void 0,o,s])}visitFloat(e){const{["type"]:n,["offset"]:i=0}=e,s=Nt(e.nullBitmap),o=Ot(n.ArrayType,e.data),{["length"]:c=o.length,["nullCount"]:d=e.nullBitmap?-1:0}=e;return new Kt(n,i,c,d,[void 0,o,s])}visitUtf8(e){const{["type"]:n,["offset"]:i=0}=e,s=Nt(e.data),o=Nt(e.nullBitmap),c=lh(e.valueOffsets),{["length"]:d=c.length-1,["nullCount"]:f=e.nullBitmap?-1:0}=e;return new Kt(n,i,d,f,[c,s,o])}visitBinary(e){const{["type"]:n,["offset"]:i=0}=e,s=Nt(e.data),o=Nt(e.nullBitmap),c=lh(e.valueOffsets),{["length"]:d=c.length-1,["nullCount"]:f=e.nullBitmap?-1:0}=e;return new Kt(n,i,d,f,[c,s,o])}visitFixedSizeBinary(e){const{["type"]:n,["offset"]:i=0}=e,s=Nt(e.nullBitmap),o=Ot(n.ArrayType,e.data),{["length"]:c=o.length/Ya(n),["nullCount"]:d=e.nullBitmap?-1:0}=e;return new Kt(n,i,c,d,[void 0,o,s])}visitDate(e){const{["type"]:n,["offset"]:i=0}=e,s=Nt(e.nullBitmap),o=Ot(n.ArrayType,e.data),{["length"]:c=o.length/Ya(n),["nullCount"]:d=e.nullBitmap?-1:0}=e;return new Kt(n,i,c,d,[void 0,o,s])}visitTimestamp(e){const{["type"]:n,["offset"]:i=0}=e,s=Nt(e.nullBitmap),o=Ot(n.ArrayType,e.data),{["length"]:c=o.length/Ya(n),["nullCount"]:d=e.nullBitmap?-1:0}=e;return new Kt(n,i,c,d,[void 0,o,s])}visitTime(e){const{["type"]:n,["offset"]:i=0}=e,s=Nt(e.nullBitmap),o=Ot(n.ArrayType,e.data),{["length"]:c=o.length/Ya(n),["nullCount"]:d=e.nullBitmap?-1:0}=e;return new Kt(n,i,c,d,[void 0,o,s])}visitDecimal(e){const{["type"]:n,["offset"]:i=0}=e,s=Nt(e.nullBitmap),o=Ot(n.ArrayType,e.data),{["length"]:c=o.length/Ya(n),["nullCount"]:d=e.nullBitmap?-1:0}=e;return new Kt(n,i,c,d,[void 0,o,s])}visitList(e){const{["type"]:n,["offset"]:i=0,["child"]:s}=e,o=Nt(e.nullBitmap),c=lh(e.valueOffsets),{["length"]:d=c.length-1,["nullCount"]:f=e.nullBitmap?-1:0}=e;return new Kt(n,i,d,f,[c,void 0,o],[s])}visitStruct(e){const{["type"]:n,["offset"]:i=0,["children"]:s=[]}=e,o=Nt(e.nullBitmap),{length:c=s.reduce((f,{length:u})=>Math.max(f,u),0),nullCount:d=e.nullBitmap?-1:0}=e;return new Kt(n,i,c,d,[void 0,void 0,o],s)}visitUnion(e){const{["type"]:n,["offset"]:i=0,["children"]:s=[]}=e,o=Nt(e.nullBitmap),c=Ot(n.ArrayType,e.typeIds),{["length"]:d=c.length,["nullCount"]:f=e.nullBitmap?-1:0}=e;if(Ye.isSparseUnion(n))return new Kt(n,i,d,f,[void 0,void 0,o,c],s);const u=lh(e.valueOffsets);return new Kt(n,i,d,f,[u,void 0,o,c],s)}visitDictionary(e){const{["type"]:n,["offset"]:i=0}=e,s=Nt(e.nullBitmap),o=Ot(n.indices.ArrayType,e.data),{["dictionary"]:c=new He([new F_().visit({type:n.dictionary})])}=e,{["length"]:d=o.length,["nullCount"]:f=e.nullBitmap?-1:0}=e;return new Kt(n,i,d,f,[void 0,o,s],[],c)}visitInterval(e){const{["type"]:n,["offset"]:i=0}=e,s=Nt(e.nullBitmap),o=Ot(n.ArrayType,e.data),{["length"]:c=o.length/Ya(n),["nullCount"]:d=e.nullBitmap?-1:0}=e;return new Kt(n,i,c,d,[void 0,o,s])}visitFixedSizeList(e){const{["type"]:n,["offset"]:i=0,["child"]:s=new F_().visit({type:n.valueType})}=e,o=Nt(e.nullBitmap),{["length"]:c=s.length/Ya(n),["nullCount"]:d=e.nullBitmap?-1:0}=e;return new Kt(n,i,c,d,[void 0,void 0,o],[s])}visitMap(e){const{["type"]:n,["offset"]:i=0,["child"]:s=new F_().visit({type:n.childType})}=e,o=Nt(e.nullBitmap),c=lh(e.valueOffsets),{["length"]:d=c.length-1,["nullCount"]:f=e.nullBitmap?-1:0}=e;return new Kt(n,i,d,f,[c,void 0,o],[s])}}function Qe(t){return new F_().visit(t)}class tD{constructor(e=0,n){this.numChunks=e,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const e=this.chunkIterator.next();if(!e.done)return e;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function U5(t){return t.reduce((e,n)=>e+n.nullCount,0)}function z5(t){return t.reduce((e,n,i)=>(e[i+1]=e[i]+n.length,e),new Uint32Array(t.length+1))}function $5(t,e,n,i){const s=[];for(let o=-1,c=t.length;++o<c;){const d=t[o],f=e[o],{length:u}=d;if(f>=i)break;if(n>=f+u)continue;if(f>=n&&f+u<=i){s.push(d);continue}const a=Math.max(0,n-f),_=Math.min(i-f,u);s.push(d.slice(a,_-a))}return s.length===0&&s.push(t[0].slice(0,0)),s}function lO(t,e,n,i){let s=0,o=0,c=e.length-1;do{if(s>=c-1)return n<e[c]?i(t,s,n-e[s]):null;o=s+Math.trunc((c-s)*.5),n<e[o]?c=o:s=o}while(s<c)}function cO(t,e){return t.getValid(e)}function Nh(t){function e(n,i,s){return t(n[i],s)}return function(n){const i=this.data;return lO(i,this._offsets,n,e)}}function q5(t){let e;function n(i,s,o){return t(i[s],o,e)}return function(i,s){const o=this.data;e=s;const c=lO(o,this._offsets,i,n);return e=void 0,c}}function G5(t){let e;function n(i,s,o){let c=o,d=0,f=0;for(let u=s-1,a=i.length;++u<a;){const _=i[u];if(~(d=t(_,e,c)))return f+d;c=0,f+=_.length}return-1}return function(i,s){e=i;const o=this.data,c=typeof s!="number"?n(o,0,0):lO(o,this._offsets,s,n);return e=void 0,c}}class nt extends Ft{}function Ele(t,e){return e===null&&t.length>0?0:-1}function Sle(t,e){const{nullBitmap:n}=t;if(!n||t.nullCount<=0)return-1;let i=0;for(const s of new lp(n,t.offset+(e||0),t.length,n,Y1)){if(!s)return i;++i}return-1}function St(t,e,n){if(e===void 0)return-1;if(e===null)return Sle(t,n);const i=Ds.getVisitFn(t),s=ku(e);for(let o=(n||0)-1,c=t.length;++o<c;)if(s(i(t,o)))return o;return-1}function V5(t,e,n){const i=Ds.getVisitFn(t),s=ku(e);for(let o=(n||0)-1,c=t.length;++o<c;)if(s(i(t,o)))return o;return-1}nt.prototype.visitNull=Ele;nt.prototype.visitBool=St;nt.prototype.visitInt=St;nt.prototype.visitInt8=St;nt.prototype.visitInt16=St;nt.prototype.visitInt32=St;nt.prototype.visitInt64=St;nt.prototype.visitUint8=St;nt.prototype.visitUint16=St;nt.prototype.visitUint32=St;nt.prototype.visitUint64=St;nt.prototype.visitFloat=St;nt.prototype.visitFloat16=St;nt.prototype.visitFloat32=St;nt.prototype.visitFloat64=St;nt.prototype.visitUtf8=St;nt.prototype.visitBinary=St;nt.prototype.visitFixedSizeBinary=St;nt.prototype.visitDate=St;nt.prototype.visitDateDay=St;nt.prototype.visitDateMillisecond=St;nt.prototype.visitTimestamp=St;nt.prototype.visitTimestampSecond=St;nt.prototype.visitTimestampMillisecond=St;nt.prototype.visitTimestampMicrosecond=St;nt.prototype.visitTimestampNanosecond=St;nt.prototype.visitTime=St;nt.prototype.visitTimeSecond=St;nt.prototype.visitTimeMillisecond=St;nt.prototype.visitTimeMicrosecond=St;nt.prototype.visitTimeNanosecond=St;nt.prototype.visitDecimal=St;nt.prototype.visitList=St;nt.prototype.visitStruct=St;nt.prototype.visitUnion=St;nt.prototype.visitDenseUnion=V5;nt.prototype.visitSparseUnion=V5;nt.prototype.visitDictionary=St;nt.prototype.visitInterval=St;nt.prototype.visitIntervalDayTime=St;nt.prototype.visitIntervalYearMonth=St;nt.prototype.visitFixedSizeList=St;nt.prototype.visitMap=St;const jT=new nt;class it extends Ft{}function ht(t){const{type:e}=t;if(t.nullCount===0&&t.stride===1&&(e.typeId===te.Timestamp||e instanceof Vi&&e.bitWidth!==64||e instanceof Mo&&e.bitWidth!==64||e instanceof jl&&e.precision!==Zn.HALF))return new tD(t.data.length,i=>{const s=t.data[i];return s.values.subarray(0,s.length)[Symbol.iterator]()});let n=0;return new tD(t.data.length,i=>{const o=t.data[i].length,c=t.slice(n,n+o);return n+=o,new xle(c)})}class xle{constructor(e){this.vector=e,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}it.prototype.visitNull=ht;it.prototype.visitBool=ht;it.prototype.visitInt=ht;it.prototype.visitInt8=ht;it.prototype.visitInt16=ht;it.prototype.visitInt32=ht;it.prototype.visitInt64=ht;it.prototype.visitUint8=ht;it.prototype.visitUint16=ht;it.prototype.visitUint32=ht;it.prototype.visitUint64=ht;it.prototype.visitFloat=ht;it.prototype.visitFloat16=ht;it.prototype.visitFloat32=ht;it.prototype.visitFloat64=ht;it.prototype.visitUtf8=ht;it.prototype.visitBinary=ht;it.prototype.visitFixedSizeBinary=ht;it.prototype.visitDate=ht;it.prototype.visitDateDay=ht;it.prototype.visitDateMillisecond=ht;it.prototype.visitTimestamp=ht;it.prototype.visitTimestampSecond=ht;it.prototype.visitTimestampMillisecond=ht;it.prototype.visitTimestampMicrosecond=ht;it.prototype.visitTimestampNanosecond=ht;it.prototype.visitTime=ht;it.prototype.visitTimeSecond=ht;it.prototype.visitTimeMillisecond=ht;it.prototype.visitTimeMicrosecond=ht;it.prototype.visitTimeNanosecond=ht;it.prototype.visitDecimal=ht;it.prototype.visitList=ht;it.prototype.visitStruct=ht;it.prototype.visitUnion=ht;it.prototype.visitDenseUnion=ht;it.prototype.visitSparseUnion=ht;it.prototype.visitDictionary=ht;it.prototype.visitInterval=ht;it.prototype.visitIntervalDayTime=ht;it.prototype.visitIntervalYearMonth=ht;it.prototype.visitFixedSizeList=ht;it.prototype.visitMap=ht;const dO=new it,Ble=(t,e)=>t+e;class xd extends Ft{visitNull(e,n){return 0}visitInt(e,n){return e.type.bitWidth/8}visitFloat(e,n){return e.type.ArrayType.BYTES_PER_ELEMENT}visitBool(e,n){return 1/8}visitDecimal(e,n){return e.type.bitWidth/8}visitDate(e,n){return(e.type.unit+1)*4}visitTime(e,n){return e.type.bitWidth/8}visitTimestamp(e,n){return e.type.unit===ct.SECOND?4:8}visitInterval(e,n){return(e.type.unit+1)*4}visitStruct(e,n){return e.children.reduce((i,s)=>i+Ao.visit(s,n),0)}visitFixedSizeBinary(e,n){return e.type.byteWidth}visitMap(e,n){return 8+e.children.reduce((i,s)=>i+Ao.visit(s,n),0)}visitDictionary(e,n){var i;return e.type.indices.bitWidth/8+(((i=e.dictionary)===null||i===void 0?void 0:i.getByteLength(e.values[n]))||0)}}const kle=({valueOffsets:t},e)=>8+(t[e+1]-t[e]),Ile=({valueOffsets:t},e)=>8+(t[e+1]-t[e]),Fle=({valueOffsets:t,stride:e,children:n},i)=>{const s=n[0],{[i*e]:o}=t,{[i*e+1]:c}=t,d=Ao.getVisitFn(s.type),f=s.slice(o,c-o);let u=8;for(let a=-1,_=c-o;++a<_;)u+=d(f,a);return u},Ole=({stride:t,children:e},n)=>{const i=e[0],s=i.slice(n*t,t),o=Ao.getVisitFn(i.type);let c=0;for(let d=-1,f=s.length;++d<f;)c+=o(s,d);return c},Mle=(t,e)=>t.type.mode===pi.Dense?H5(t,e):W5(t,e),H5=({type:t,children:e,typeIds:n,valueOffsets:i},s)=>{const o=t.typeIdToChildIndex[n[s]];return 8+Ao.visit(e[o],i[s])},W5=({children:t},e)=>4+Ao.visitMany(t,t.map(()=>e)).reduce(Ble,0);xd.prototype.visitUtf8=kle;xd.prototype.visitBinary=Ile;xd.prototype.visitList=Fle;xd.prototype.visitFixedSizeList=Ole;xd.prototype.visitUnion=Mle;xd.prototype.visitDenseUnion=H5;xd.prototype.visitSparseUnion=W5;const Ao=new xd;var Y5;const X5={},K5={};class He{constructor(e){var n,i,s;const o=e[0]instanceof He?e.flatMap(d=>d.data):e;if(o.length===0||o.some(d=>!(d instanceof Kt)))throw new TypeError("Vector constructor expects an Array of Data instances.");const c=(n=o[0])===null||n===void 0?void 0:n.type;switch(o.length){case 0:this._offsets=[0];break;case 1:{const{get:d,set:f,indexOf:u,byteLength:a}=X5[c.typeId],_=o[0];this.isValid=w=>cO(_,w),this.get=w=>d(_,w),this.set=(w,m)=>f(_,w,m),this.indexOf=w=>u(_,w),this.getByteLength=w=>a(_,w),this._offsets=[0,_.length];break}default:Object.setPrototypeOf(this,K5[c.typeId]),this._offsets=z5(o);break}this.data=o,this.type=c,this.stride=Ya(c),this.numChildren=(s=(i=c.children)===null||i===void 0?void 0:i.length)!==null&&s!==void 0?s:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return this._byteLength===-1&&(this._byteLength=this.data.reduce((e,n)=>e+n.byteLength,0)),this._byteLength}get nullCount(){return this._nullCount===-1&&(this._nullCount=U5(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${te[this.type.typeId]}Vector`}isValid(e){return!1}get(e){return null}set(e,n){}indexOf(e,n){return-1}includes(e,n){return this.indexOf(e,n)>0}getByteLength(e){return 0}[Symbol.iterator](){return dO.visit(this)}concat(...e){return new He(this.data.concat(e.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(e,n){return new He(aO(this,e,n,({data:i,_offsets:s},o,c)=>$5(i,s,o,c)))}toJSON(){return[...this]}toArray(){const{type:e,data:n,length:i,stride:s,ArrayType:o}=this;switch(e.typeId){case te.Int:case te.Float:case te.Decimal:case te.Time:case te.Timestamp:switch(n.length){case 0:return new o;case 1:return n[0].values.subarray(0,i*s);default:return n.reduce((c,{values:d})=>(c.array.set(d,c.offset),c.offset+=d.length,c),{array:new o(i*s),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(e){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(i=>i.name===e))}getChildAt(e){return e>-1&&e<this.numChildren?new He(this.data.map(({children:n})=>n[e])):null}get isMemoized(){return Ye.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(Ye.isDictionary(this.type)){const e=new UT(this.data[0].dictionary),n=this.data.map(i=>{const s=i.clone();return s.dictionary=e,s});return new He(n)}return new UT(this)}unmemoize(){if(Ye.isDictionary(this.type)&&this.isMemoized){const e=this.data[0].dictionary.unmemoize(),n=this.data.map(i=>{const s=i.clone();return s.dictionary=e,s});return new He(n)}return this}}Y5=Symbol.toStringTag;He[Y5]=(t=>{t.type=Ye.prototype,t.data=[],t.length=0,t.stride=1,t.numChildren=0,t._nullCount=-1,t._byteLength=-1,t._offsets=new Uint32Array([0]),t[Symbol.isConcatSpreadable]=!0;const e=Object.keys(te).map(n=>te[n]).filter(n=>typeof n=="number"&&n!==te.NONE);for(const n of e){const i=Ds.getVisitFnByTypeId(n),s=jr.getVisitFnByTypeId(n),o=jT.getVisitFnByTypeId(n),c=Ao.getVisitFnByTypeId(n);X5[n]={get:i,set:s,indexOf:o,byteLength:c},K5[n]=Object.create(t,{isValid:{value:Nh(cO)},get:{value:Nh(Ds.getVisitFnByTypeId(n))},set:{value:q5(jr.getVisitFnByTypeId(n))},indexOf:{value:G5(jT.getVisitFnByTypeId(n))},getByteLength:{value:Nh(Ao.getVisitFnByTypeId(n))}})}return"Vector"})(He.prototype);class UT extends He{constructor(e){super(e.data);const n=this.get,i=this.set,s=this.slice,o=new Array(this.length);Object.defineProperty(this,"get",{value(c){const d=o[c];if(d!==void 0)return d;const f=n.call(this,c);return o[c]=f,f}}),Object.defineProperty(this,"set",{value(c,d){i.call(this,c,d),o[c]=d}}),Object.defineProperty(this,"slice",{value:(c,d)=>new UT(s.call(this,c,d))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new He(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function K1(t){if(t){if(t instanceof Kt)return new He([t]);if(t instanceof He)return new He(t.data);if(t.type instanceof Ye)return new He([Qe(t)]);if(Array.isArray(t))return new He(t.flatMap(e=>Ale(e)));if(ArrayBuffer.isView(t)){t instanceof DataView&&(t=new Uint8Array(t.buffer));const e={offset:0,length:t.length,nullCount:0,data:t};if(t instanceof Int8Array)return new He([Qe(Object.assign(Object.assign({},e),{type:new L2}))]);if(t instanceof Int16Array)return new He([Qe(Object.assign(Object.assign({},e),{type:new P2}))]);if(t instanceof Int32Array)return new He([Qe(Object.assign(Object.assign({},e),{type:new Qc}))]);if(t instanceof BigInt64Array)return new He([Qe(Object.assign(Object.assign({},e),{type:new G1}))]);if(t instanceof Uint8Array||t instanceof Uint8ClampedArray)return new He([Qe(Object.assign(Object.assign({},e),{type:new D2}))]);if(t instanceof Uint16Array)return new He([Qe(Object.assign(Object.assign({},e),{type:new j2}))]);if(t instanceof Uint32Array)return new He([Qe(Object.assign(Object.assign({},e),{type:new U2}))]);if(t instanceof BigUint64Array)return new He([Qe(Object.assign(Object.assign({},e),{type:new z2}))]);if(t instanceof Float32Array)return new He([Qe(Object.assign(Object.assign({},e),{type:new $2}))]);if(t instanceof Float64Array)return new He([Qe(Object.assign(Object.assign({},e),{type:new V1}))]);throw new Error("Unrecognized input")}}throw new Error("Unrecognized input")}function Ale(t){return t instanceof Kt?[t]:t instanceof He?t.data:K1(t).data}function Nle(t){if(!t||t.length<=0)return function(s){return!0};let e="";const n=t.filter(i=>i===i);return n.length>0&&(e=`
    switch (x) {${n.map(i=>`
        case ${Cle(i)}:`).join("")}
            return false;
    }`),t.length!==n.length&&(e=`if (x !== x) return false;
${e}`),new Function("x",`${e}
return true;`)}function Cle(t){return typeof t!="bigint"?Lc(t):N$?`${Lc(t)}n`:`"${Lc(t)}"`}const xx=(t,e)=>(t*e+63&-64||64)/e,Rle=(t,e=0)=>t.length>=e?t.subarray(0,e):Y_(new t.constructor(e),t,0);class J1{constructor(e,n=1){this.buffer=e,this.stride=n,this.BYTES_PER_ELEMENT=e.BYTES_PER_ELEMENT,this.ArrayType=e.constructor,this._resize(this.length=Math.trunc(e.length/n))}get byteLength(){return Math.trunc(this.length*this.stride*this.BYTES_PER_ELEMENT)}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(e,n){return this}append(e){return this.set(this.length,e)}reserve(e){if(e>0){this.length+=e;const n=this.stride,i=this.length*n,s=this.buffer.length;i>=s&&this._resize(s===0?xx(i*1,this.BYTES_PER_ELEMENT):xx(i*2,this.BYTES_PER_ELEMENT))}return this}flush(e=this.length){e=xx(e*this.stride,this.BYTES_PER_ELEMENT);const n=Rle(this.buffer,e);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(e){return this.buffer=Y_(new this.ArrayType(e),this.buffer)}}J1.prototype.offset=0;class Ky extends J1{last(){return this.get(this.length-1)}get(e){return this.buffer[e]}set(e,n){return this.reserve(e-this.length+1),this.buffer[e*this.stride]=n,this}}class J5 extends Ky{constructor(e=new Uint8Array(0)){super(e,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(e){return this.buffer[e>>3]>>e%8&1}set(e,n){const{buffer:i}=this.reserve(e-this.length+1),s=e>>3,o=e%8,c=i[s]>>o&1;return n?c===0&&(i[s]|=1<<o,++this.numValid):c===1&&(i[s]&=~(1<<o),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class Q5 extends Ky{constructor(e=new Int32Array(1)){super(e,1)}append(e){return this.set(this.length-1,e)}set(e,n){const i=this.length-1,s=this.reserve(e-i+1).buffer;return i<e++&&s.fill(s[i],i,e),s[e]=s[e-1]+n,this}flush(e=this.length-1){return e>this.length&&this.set(e-1,0),super.flush(e+1)}}class Xi{constructor({type:e,nullValues:n}){this.length=0,this.finished=!1,this.type=e,this.children=[],this.nullValues=n,this.stride=Ya(e),this._nulls=new J5,n&&n.length>0&&(this._isValid=Nle(n))}static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e){throw new Error('"throughDOM" not available in this environment')}toVector(){return new He([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let e=0;const{_offsets:n,_values:i,_nulls:s,_typeIds:o,children:c}=this;return n&&(e+=n.byteLength),i&&(e+=i.byteLength),s&&(e+=s.byteLength),o&&(e+=o.byteLength),c.reduce((d,f)=>d+f.byteLength,e)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let e=0;return this._offsets&&(e+=this._offsets.reservedByteLength),this._values&&(e+=this._values.reservedByteLength),this._nulls&&(e+=this._nulls.reservedByteLength),this._typeIds&&(e+=this._typeIds.reservedByteLength),this.children.reduce((n,i)=>n+i.reservedByteLength,e)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(e){return this.set(this.length,e)}isValid(e){return this._isValid(e)}set(e,n){return this.setValid(e,this.isValid(n))&&this.setValue(e,n),this}setValue(e,n){this._setValue(this,e,n)}setValid(e,n){return this.length=this._nulls.set(e,+n).length,n}addChild(e,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(e){return this.children[e]||null}flush(){let e,n,i,s;const{type:o,length:c,nullCount:d,_typeIds:f,_offsets:u,_values:a,_nulls:_}=this;(n=f==null?void 0:f.flush(c))?s=u==null?void 0:u.flush(c):(s=u==null?void 0:u.flush(c))?e=a==null?void 0:a.flush(u.last()):e=a==null?void 0:a.flush(c),d>0&&(i=_==null?void 0:_.flush(c));const w=this.children.map(m=>m.flush());return this.clear(),Qe({type:o,length:c,nullCount:d,children:w,child:w[0],data:e,typeIds:n,nullBitmap:i,valueOffsets:s})}finish(){this.finished=!0;for(const e of this.children)e.finish();return this}clear(){var e,n,i,s;this.length=0,(e=this._nulls)===null||e===void 0||e.clear(),(n=this._values)===null||n===void 0||n.clear(),(i=this._offsets)===null||i===void 0||i.clear(),(s=this._typeIds)===null||s===void 0||s.clear();for(const o of this.children)o.clear();return this}}Xi.prototype.length=1;Xi.prototype.stride=1;Xi.prototype.children=null;Xi.prototype.finished=!1;Xi.prototype.nullValues=null;Xi.prototype._isValid=()=>!0;class Bd extends Xi{constructor(e){super(e),this._values=new Ky(new this.ArrayType(0),this.stride)}setValue(e,n){const i=this._values;return i.reserve(e-i.length+1),super.setValue(e,n)}}class Q1 extends Xi{constructor(e){super(e),this._pendingLength=0,this._offsets=new Q5}setValue(e,n){const i=this._pending||(this._pending=new Map),s=i.get(e);s&&(this._pendingLength-=s.length),this._pendingLength+=n instanceof Xy?n[ua].length:n.length,i.set(e,n)}setValid(e,n){return super.setValid(e,n)?!0:((this._pending||(this._pending=new Map)).set(e,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const e=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,e&&e.size>0&&this._flushPending(e,n),this}}class Ik{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(e,n,i,s){return e.prep(8,24),e.writeInt64(s),e.pad(4),e.writeInt32(i),e.writeInt64(n),e.offset()}}class Wn{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsKeyValue(e,n){return(n||new Wn).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsKeyValue(e,n){return e.setPosition(e.position()+Ge),(n||new Wn).__init(e.readInt32(e.position())+e.position(),e)}key(e){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,e):null}value(e){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,e):null}static startKeyValue(e){e.startObject(2)}static addKey(e,n){e.addFieldOffset(0,n,0)}static addValue(e,n){e.addFieldOffset(1,n,0)}static endKeyValue(e){return e.endObject()}static createKeyValue(e,n,i){return Wn.startKeyValue(e),Wn.addKey(e,n),Wn.addValue(e,i),Wn.endKeyValue(e)}}var cp;(function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"})(cp||(cp={}));var dp;(function(t){t[t.Little=0]="Little",t[t.Big=1]="Big"})(dp||(dp={}));var zT;(function(t){t[t.DenseArray=0]="DenseArray"})(zT||(zT={}));class ir{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsInt(e,n){return(n||new ir).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInt(e,n){return e.setPosition(e.position()+Ge),(n||new ir).__init(e.readInt32(e.position())+e.position(),e)}bitWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}isSigned(){const e=this.bb.__offset(this.bb_pos,6);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startInt(e){e.startObject(2)}static addBitWidth(e,n){e.addFieldInt32(0,n,0)}static addIsSigned(e,n){e.addFieldInt8(1,+n,0)}static endInt(e){return e.endObject()}static createInt(e,n,i){return ir.startInt(e),ir.addBitWidth(e,n),ir.addIsSigned(e,i),ir.endInt(e)}}class Tl{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDictionaryEncoding(e,n){return(n||new Tl).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryEncoding(e,n){return e.setPosition(e.position()+Ge),(n||new Tl).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}indexType(e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new ir).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}dictionaryKind(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt16(this.bb_pos+e):zT.DenseArray}static startDictionaryEncoding(e){e.startObject(4)}static addId(e,n){e.addFieldInt64(0,n,e.createLong(0,0))}static addIndexType(e,n){e.addFieldOffset(1,n,0)}static addIsOrdered(e,n){e.addFieldInt8(2,+n,0)}static addDictionaryKind(e,n){e.addFieldInt16(3,n,zT.DenseArray)}static endDictionaryEncoding(e){return e.endObject()}}class yf{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsBinary(e,n){return(n||new yf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBinary(e,n){return e.setPosition(e.position()+Ge),(n||new yf).__init(e.readInt32(e.position())+e.position(),e)}static startBinary(e){e.startObject(0)}static endBinary(e){return e.endObject()}static createBinary(e){return yf.startBinary(e),yf.endBinary(e)}}class mf{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsBool(e,n){return(n||new mf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBool(e,n){return e.setPosition(e.position()+Ge),(n||new mf).__init(e.readInt32(e.position())+e.position(),e)}static startBool(e){e.startObject(0)}static endBool(e){return e.endObject()}static createBool(e){return mf.startBool(e),mf.endBool(e)}}var $T;(function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"})($T||($T={}));class to{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDate(e,n){return(n||new to).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDate(e,n){return e.setPosition(e.position()+Ge),(n||new to).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):$T.MILLISECOND}static startDate(e){e.startObject(1)}static addUnit(e,n){e.addFieldInt16(0,n,$T.MILLISECOND)}static endDate(e){return e.endObject()}static createDate(e,n){return to.startDate(e),to.addUnit(e,n),to.endDate(e)}}class ms{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDecimal(e,n){return(n||new ms).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDecimal(e,n){return e.setPosition(e.position()+Ge),(n||new ms).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}scale(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0}bitWidth(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):128}static startDecimal(e){e.startObject(3)}static addPrecision(e,n){e.addFieldInt32(0,n,0)}static addScale(e,n){e.addFieldInt32(1,n,0)}static addBitWidth(e,n){e.addFieldInt32(2,n,128)}static endDecimal(e){return e.endObject()}static createDecimal(e,n,i,s){return ms.startDecimal(e),ms.addPrecision(e,n),ms.addScale(e,i),ms.addBitWidth(e,s),ms.endDecimal(e)}}var fp;(function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"})(fp||(fp={}));class no{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFixedSizeBinary(e,n){return(n||new no).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeBinary(e,n){return e.setPosition(e.position()+Ge),(n||new no).__init(e.readInt32(e.position())+e.position(),e)}byteWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeBinary(e){e.startObject(1)}static addByteWidth(e,n){e.addFieldInt32(0,n,0)}static endFixedSizeBinary(e){return e.endObject()}static createFixedSizeBinary(e,n){return no.startFixedSizeBinary(e),no.addByteWidth(e,n),no.endFixedSizeBinary(e)}}class io{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFixedSizeList(e,n){return(n||new io).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeList(e,n){return e.setPosition(e.position()+Ge),(n||new io).__init(e.readInt32(e.position())+e.position(),e)}listSize(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeList(e){e.startObject(1)}static addListSize(e,n){e.addFieldInt32(0,n,0)}static endFixedSizeList(e){return e.endObject()}static createFixedSizeList(e,n){return io.startFixedSizeList(e),io.addListSize(e,n),io.endFixedSizeList(e)}}var qT;(function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"})(qT||(qT={}));class so{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFloatingPoint(e,n){return(n||new so).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFloatingPoint(e,n){return e.setPosition(e.position()+Ge),(n||new so).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):qT.HALF}static startFloatingPoint(e){e.startObject(1)}static addPrecision(e,n){e.addFieldInt16(0,n,qT.HALF)}static endFloatingPoint(e){return e.endObject()}static createFloatingPoint(e,n){return so.startFloatingPoint(e),so.addPrecision(e,n),so.endFloatingPoint(e)}}var GT;(function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(GT||(GT={}));class ro{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsInterval(e,n){return(n||new ro).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInterval(e,n){return e.setPosition(e.position()+Ge),(n||new ro).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):GT.YEAR_MONTH}static startInterval(e){e.startObject(1)}static addUnit(e,n){e.addFieldInt16(0,n,GT.YEAR_MONTH)}static endInterval(e){return e.endObject()}static createInterval(e,n){return ro.startInterval(e),ro.addUnit(e,n),ro.endInterval(e)}}class wf{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsList(e,n){return(n||new wf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsList(e,n){return e.setPosition(e.position()+Ge),(n||new wf).__init(e.readInt32(e.position())+e.position(),e)}static startList(e){e.startObject(0)}static endList(e){return e.endObject()}static createList(e){return wf.startList(e),wf.endList(e)}}class ao{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsMap(e,n){return(n||new ao).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMap(e,n){return e.setPosition(e.position()+Ge),(n||new ao).__init(e.readInt32(e.position())+e.position(),e)}keysSorted(){const e=this.bb.__offset(this.bb_pos,4);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startMap(e){e.startObject(1)}static addKeysSorted(e,n){e.addFieldInt8(0,+n,0)}static endMap(e){return e.endObject()}static createMap(e,n){return ao.startMap(e),ao.addKeysSorted(e,n),ao.endMap(e)}}class bf{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsNull(e,n){return(n||new bf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsNull(e,n){return e.setPosition(e.position()+Ge),(n||new bf).__init(e.readInt32(e.position())+e.position(),e)}static startNull(e){e.startObject(0)}static endNull(e){return e.endObject()}static createNull(e){return bf.startNull(e),bf.endNull(e)}}class Tf{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsStruct_(e,n){return(n||new Tf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsStruct_(e,n){return e.setPosition(e.position()+Ge),(n||new Tf).__init(e.readInt32(e.position())+e.position(),e)}static startStruct_(e){e.startObject(0)}static endStruct_(e){return e.endObject()}static createStruct_(e){return Tf.startStruct_(e),Tf.endStruct_(e)}}class Tr{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsTime(e,n){return(n||new Tr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTime(e,n){return e.setPosition(e.position()+Ge),(n||new Tr).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):fp.MILLISECOND}bitWidth(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):32}static startTime(e){e.startObject(2)}static addUnit(e,n){e.addFieldInt16(0,n,fp.MILLISECOND)}static addBitWidth(e,n){e.addFieldInt32(1,n,32)}static endTime(e){return e.endObject()}static createTime(e,n,i){return Tr.startTime(e),Tr.addUnit(e,n),Tr.addBitWidth(e,i),Tr.endTime(e)}}class vr{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsTimestamp(e,n){return(n||new vr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTimestamp(e,n){return e.setPosition(e.position()+Ge),(n||new vr).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):fp.SECOND}timezone(e){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,e):null}static startTimestamp(e){e.startObject(2)}static addUnit(e,n){e.addFieldInt16(0,n,fp.SECOND)}static addTimezone(e,n){e.addFieldOffset(1,n,0)}static endTimestamp(e){return e.endObject()}static createTimestamp(e,n,i){return vr.startTimestamp(e),vr.addUnit(e,n),vr.addTimezone(e,i),vr.endTimestamp(e)}}var VT;(function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"})(VT||(VT={}));class vs{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsUnion(e,n){return(n||new vs).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUnion(e,n){return e.setPosition(e.position()+Ge),(n||new vs).__init(e.readInt32(e.position())+e.position(),e)}mode(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):VT.Sparse}typeIds(e){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+e*4):0}typeIdsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}typeIdsArray(){const e=this.bb.__offset(this.bb_pos,6);return e?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}static startUnion(e){e.startObject(2)}static addMode(e,n){e.addFieldInt16(0,n,VT.Sparse)}static addTypeIds(e,n){e.addFieldOffset(1,n,0)}static createTypeIdsVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addInt32(n[i]);return e.endVector()}static startTypeIdsVector(e,n){e.startVector(4,n,4)}static endUnion(e){return e.endObject()}static createUnion(e,n,i){return vs.startUnion(e),vs.addMode(e,n),vs.addTypeIds(e,i),vs.endUnion(e)}}class vf{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsUtf8(e,n){return(n||new vf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUtf8(e,n){return e.setPosition(e.position()+Ge),(n||new vf).__init(e.readInt32(e.position())+e.position(),e)}static startUtf8(e){e.startObject(0)}static endUtf8(e){return e.endObject()}static createUtf8(e){return vf.startUtf8(e),vf.endUtf8(e)}}var Et;(function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.FloatingPoint=3]="FloatingPoint",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct_=13]="Struct_",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Duration=18]="Duration",t[t.LargeBinary=19]="LargeBinary",t[t.LargeUtf8=20]="LargeUtf8",t[t.LargeList=21]="LargeList"})(Et||(Et={}));class Mi{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsField(e,n){return(n||new Mi).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsField(e,n){return e.setPosition(e.position()+Ge),(n||new Mi).__init(e.readInt32(e.position())+e.position(),e)}name(e){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,e):null}nullable(){const e=this.bb.__offset(this.bb_pos,6);return e?!!this.bb.readInt8(this.bb_pos+e):!1}typeType(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):Et.NONE}type(e){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(e,this.bb_pos+n):null}dictionary(e){const n=this.bb.__offset(this.bb_pos,12);return n?(e||new Tl).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(e,n){const i=this.bb.__offset(this.bb_pos,14);return i?(n||new Mi).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}childrenLength(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,n){const i=this.bb.__offset(this.bb_pos,16);return i?(n||new Wn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__vector_len(this.bb_pos+e):0}static startField(e){e.startObject(7)}static addName(e,n){e.addFieldOffset(0,n,0)}static addNullable(e,n){e.addFieldInt8(1,+n,0)}static addTypeType(e,n){e.addFieldInt8(2,n,Et.NONE)}static addType(e,n){e.addFieldOffset(3,n,0)}static addDictionary(e,n){e.addFieldOffset(4,n,0)}static addChildren(e,n){e.addFieldOffset(5,n,0)}static createChildrenVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addOffset(n[i]);return e.endVector()}static startChildrenVector(e,n){e.startVector(4,n,4)}static addCustomMetadata(e,n){e.addFieldOffset(6,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addOffset(n[i]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static endField(e){return e.endObject()}}class Gn{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsSchema(e,n){return(n||new Gn).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSchema(e,n){return e.setPosition(e.position()+Ge),(n||new Gn).__init(e.readInt32(e.position())+e.position(),e)}endianness(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):dp.Little}fields(e,n){const i=this.bb.__offset(this.bb_pos,6);return i?(n||new Mi).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}fieldsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new Wn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}features(e){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+e*8):this.bb.createLong(0,0)}featuresLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}static startSchema(e){e.startObject(4)}static addEndianness(e,n){e.addFieldInt16(0,n,dp.Little)}static addFields(e,n){e.addFieldOffset(1,n,0)}static createFieldsVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addOffset(n[i]);return e.endVector()}static startFieldsVector(e,n){e.startVector(4,n,4)}static addCustomMetadata(e,n){e.addFieldOffset(2,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addOffset(n[i]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static addFeatures(e,n){e.addFieldOffset(3,n,0)}static createFeaturesVector(e,n){e.startVector(8,n.length,8);for(let i=n.length-1;i>=0;i--)e.addInt64(n[i]);return e.endVector()}static startFeaturesVector(e,n){e.startVector(8,n,8)}static endSchema(e){return e.endObject()}static finishSchemaBuffer(e,n){e.finish(n)}static finishSizePrefixedSchemaBuffer(e,n){e.finish(n,void 0,!0)}static createSchema(e,n,i,s,o){return Gn.startSchema(e),Gn.addEndianness(e,n),Gn.addFields(e,i),Gn.addCustomMetadata(e,s),Gn.addFeatures(e,o),Gn.endSchema(e)}}class Qs{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFooter(e,n){return(n||new Qs).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFooter(e,n){return e.setPosition(e.position()+Ge),(n||new Qs).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):cp.V1}schema(e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new Gn).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(e,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new Ik).__init(this.bb.__vector(this.bb_pos+i)+e*24,this.bb):null}dictionariesLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}recordBatches(e,n){const i=this.bb.__offset(this.bb_pos,10);return i?(n||new Ik).__init(this.bb.__vector(this.bb_pos+i)+e*24,this.bb):null}recordBatchesLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,n){const i=this.bb.__offset(this.bb_pos,12);return i?(n||new Wn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startFooter(e){e.startObject(5)}static addVersion(e,n){e.addFieldInt16(0,n,cp.V1)}static addSchema(e,n){e.addFieldOffset(1,n,0)}static addDictionaries(e,n){e.addFieldOffset(2,n,0)}static startDictionariesVector(e,n){e.startVector(24,n,8)}static addRecordBatches(e,n){e.addFieldOffset(3,n,0)}static startRecordBatchesVector(e,n){e.startVector(24,n,8)}static addCustomMetadata(e,n){e.addFieldOffset(4,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addOffset(n[i]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static endFooter(e){return e.endObject()}static finishFooterBuffer(e,n){e.finish(n)}static finishSizePrefixedFooterBuffer(e,n){e.finish(n,void 0,!0)}}class $t{constructor(e=[],n,i){this.fields=e||[],this.metadata=n||new Map,i||(i=Fk(e)),this.dictionaries=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(e=>e.name)}toString(){return`Schema<{ ${this.fields.map((e,n)=>`${n}: ${e}`).join(", ")} }>`}select(e){const n=new Set(e),i=this.fields.filter(s=>n.has(s.name));return new $t(i,this.metadata)}selectAt(e){const n=e.map(i=>this.fields[i]).filter(Boolean);return new $t(n,this.metadata)}assign(...e){const n=e[0]instanceof $t?e[0]:Array.isArray(e[0])?new $t(e[0]):new $t(e),i=[...this.fields],s=Fb(Fb(new Map,this.metadata),n.metadata),o=n.fields.filter(d=>{const f=i.findIndex(u=>u.name===d.name);return~f?(i[f]=d.clone({metadata:Fb(Fb(new Map,i[f].metadata),d.metadata)}))&&!1:!0}),c=Fk(o,new Map);return new $t([...i,...o],s,new Map([...this.dictionaries,...c]))}}$t.prototype.fields=null;$t.prototype.metadata=null;$t.prototype.dictionaries=null;class Ut{constructor(e,n,i=!1,s){this.name=e,this.type=n,this.nullable=i,this.metadata=s||new Map}static new(...e){let[n,i,s,o]=e;return e[0]&&typeof e[0]=="object"&&({name:n}=e[0],i===void 0&&(i=e[0].type),s===void 0&&(s=e[0].nullable),o===void 0&&(o=e[0].metadata)),new Ut(`${n}`,i,s,o)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...e){let[n,i,s,o]=e;return!e[0]||typeof e[0]!="object"?[n=this.name,i=this.type,s=this.nullable,o=this.metadata]=e:{name:n=this.name,type:i=this.type,nullable:s=this.nullable,metadata:o=this.metadata}=e[0],Ut.new(n,i,s,o)}}Ut.prototype.type=null;Ut.prototype.name=null;Ut.prototype.nullable=null;Ut.prototype.metadata=null;function Fb(t,e){return new Map([...t||new Map,...e||new Map])}function Fk(t,e=new Map){for(let n=-1,i=t.length;++n<i;){const o=t[n].type;if(Ye.isDictionary(o)){if(!e.has(o.id))e.set(o.id,o.dictionary);else if(e.get(o.id)!==o.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}o.children&&o.children.length>0&&Fk(o.children,e)}return e}var nD=cs,Lle=Qp,Ple=Pr;class ey{constructor(e,n=xs.V4,i,s){this.schema=e,this.version=n,i&&(this._recordBatches=i),s&&(this._dictionaryBatches=s)}static decode(e){e=new Ple(Nt(e));const n=Qs.getRootAsFooter(e),i=$t.decode(n.schema());return new Dle(i,n)}static encode(e){const n=new Lle,i=$t.encode(n,e.schema);Qs.startRecordBatchesVector(n,e.numRecordBatches);for(const c of[...e.recordBatches()].slice().reverse())No.encode(n,c);const s=n.endVector();Qs.startDictionariesVector(n,e.numDictionaries);for(const c of[...e.dictionaryBatches()].slice().reverse())No.encode(n,c);const o=n.endVector();return Qs.startFooter(n),Qs.addSchema(n,i),Qs.addVersion(n,xs.V4),Qs.addRecordBatches(n,s),Qs.addDictionaries(n,o),Qs.finishFooterBuffer(n,Qs.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let e,n=-1,i=this.numRecordBatches;++n<i;)(e=this.getRecordBatch(n))&&(yield e)}*dictionaryBatches(){for(let e,n=-1,i=this.numDictionaries;++n<i;)(e=this.getDictionaryBatch(n))&&(yield e)}getRecordBatch(e){return e>=0&&e<this.numRecordBatches&&this._recordBatches[e]||null}getDictionaryBatch(e){return e>=0&&e<this.numDictionaries&&this._dictionaryBatches[e]||null}}class Dle extends ey{constructor(e,n){super(e,n.version()),this._footer=n}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(e){if(e>=0&&e<this.numRecordBatches){const n=this._footer.recordBatches(e);if(n)return No.decode(n)}return null}getDictionaryBatch(e){if(e>=0&&e<this.numDictionaries){const n=this._footer.dictionaries(e);if(n)return No.decode(n)}return null}}class No{constructor(e,n,i){this.metaDataLength=e,this.offset=typeof i=="number"?i:i.low,this.bodyLength=typeof n=="number"?n:n.low}static decode(e){return new No(e.metaDataLength(),e.bodyLength(),e.offset())}static encode(e,n){const{metaDataLength:i}=n,s=new nD(n.offset,0),o=new nD(n.bodyLength,0);return Ik.createBlock(e,s,i,o)}}const kn=Object.freeze({done:!0,value:void 0});class iD{constructor(e){this._json=e}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class fO{tee(){return this._getDOMStream().tee()}pipe(e,n){return this._getNodeStream().pipe(e,n)}pipeTo(e,n){return this._getDOMStream().pipeTo(e,n)}pipeThrough(e,n){return this._getDOMStream().pipeThrough(e,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class jle extends fO{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(e=>this._closedPromiseResolve=e)}get closed(){return this._closedPromise}cancel(e){return ye(this,void 0,void 0,function*(){yield this.return(e)})}write(e){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(e):this.resolvers.shift().resolve({done:!1,value:e}))}abort(e){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:e}:this.resolvers.shift().reject({done:!0,value:e}))}close(){if(this._closedPromiseResolve){const{resolvers:e}=this;for(;e.length>0;)e.shift().resolve(kn);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(e){return tr.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,e)}toNodeStream(e){return tr.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,e)}throw(e){return ye(this,void 0,void 0,function*(){return yield this.abort(e),kn})}return(e){return ye(this,void 0,void 0,function*(){return yield this.close(),kn})}read(e){return ye(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return ye(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(...e){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,i)=>{this.resolvers.push({resolve:n,reject:i})}):Promise.resolve(kn)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class Ch extends jle{write(e){if((e=Nt(e)).byteLength>0)return super.write(e)}toString(e=!1){return e?xk(this.toUint8Array(!0)):this.toUint8Array(!1).then(xk)}toUint8Array(e=!1){return e?ka(this._values)[0]:(()=>ye(this,void 0,void 0,function*(){var n,i;const s=[];let o=0;try{for(var c=Fs(this),d;d=yield c.next(),!d.done;){const f=d.value;s.push(f),o+=f.byteLength}}catch(f){n={error:f}}finally{try{d&&!d.done&&(i=c.return)&&(yield i.call(c))}finally{if(n)throw n.error}}return ka(s,o)[0]}))()}}class ty{constructor(e){e&&(this.source=new Ule(tr.fromIterable(e)))}[Symbol.iterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class ed{constructor(e){e instanceof ed?this.source=e.source:e instanceof Ch?this.source=new qd(tr.fromAsyncIterable(e)):D$(e)?this.source=new qd(tr.fromNodeStream(e)):C2(e)?this.source=new qd(tr.fromDOMStream(e)):P$(e)?this.source=new qd(tr.fromDOMStream(e.body)):Zp(e)?this.source=new qd(tr.fromIterable(e)):Jc(e)?this.source=new qd(tr.fromAsyncIterable(e)):Bu(e)&&(this.source=new qd(tr.fromAsyncIterable(e)))}[Symbol.asyncIterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}get closed(){return this.source.closed}cancel(e){return this.source.cancel(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class Ule{constructor(e){this.source=e}cancel(e){this.return(e)}peek(e){return this.next(e,"peek").value}read(e){return this.next(e,"read").value}next(e,n="read"){return this.source.next({cmd:n,size:e})}throw(e){return Object.create(this.source.throw&&this.source.throw(e)||kn)}return(e){return Object.create(this.source.return&&this.source.return(e)||kn)}}class qd{constructor(e){this.source=e,this._closedPromise=new Promise(n=>this._closedPromiseResolve=n)}cancel(e){return ye(this,void 0,void 0,function*(){yield this.return(e)})}get closed(){return this._closedPromise}read(e){return ye(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return ye(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(e,n="read"){return ye(this,void 0,void 0,function*(){return yield this.source.next({cmd:n,size:e})})}throw(e){return ye(this,void 0,void 0,function*(){const n=this.source.throw&&(yield this.source.throw(e))||kn;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}return(e){return ye(this,void 0,void 0,function*(){const n=this.source.return&&(yield this.source.return(e))||kn;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}}class sD extends ty{constructor(e,n){super(),this.position=0,this.buffer=Nt(e),this.size=typeof n>"u"?this.buffer.byteLength:n}readInt32(e){const{buffer:n,byteOffset:i}=this.readAt(e,4);return new DataView(n,i).getInt32(0,!0)}seek(e){return this.position=Math.min(e,this.size),e<this.size}read(e){const{buffer:n,size:i,position:s}=this;return n&&s<i?(typeof e!="number"&&(e=Number.POSITIVE_INFINITY),this.position=Math.min(i,s+Math.min(i-s,e)),n.subarray(s,this.position)):null}readAt(e,n){const i=this.buffer,s=Math.min(this.size,e+n);return i?i.subarray(e,s):new Uint8Array(n)}close(){this.buffer&&(this.buffer=null)}throw(e){return this.close(),{done:!0,value:e}}return(e){return this.close(),{done:!0,value:e}}}class HT extends ed{constructor(e,n){super(),this.position=0,this._handle=e,typeof n=="number"?this.size=n:this._pending=(()=>ye(this,void 0,void 0,function*(){this.size=(yield e.stat()).size,delete this._pending}))()}readInt32(e){return ye(this,void 0,void 0,function*(){const{buffer:n,byteOffset:i}=yield this.readAt(e,4);return new DataView(n,i).getInt32(0,!0)})}seek(e){return ye(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(e,this.size),e<this.size})}read(e){return ye(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:n,size:i,position:s}=this;if(n&&s<i){typeof e!="number"&&(e=Number.POSITIVE_INFINITY);let o=s,c=0,d=0;const f=Math.min(i,o+Math.min(i-o,e)),u=new Uint8Array(Math.max(0,(this.position=f)-o));for(;(o+=d)<f&&(c+=d)<u.byteLength;)({bytesRead:d}=yield n.read(u,c,u.byteLength-c,o));return u}return null})}readAt(e,n){return ye(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:i,size:s}=this;if(i&&e+n<s){const o=Math.min(s,e+n),c=new Uint8Array(o-e);return(yield i.read(c,0,n,e)).buffer}return new Uint8Array(n)})}close(){return ye(this,void 0,void 0,function*(){const e=this._handle;this._handle=null,e&&(yield e.close())})}throw(e){return ye(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}return(e){return ye(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}}const zle=1<<16;function mh(t){return t<0&&(t=4294967295+t+1),`0x${t.toString(16)}`}const up=8,uO=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class hO{constructor(e){this.buffer=e}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(e){const n=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),i=new Uint32Array([e.buffer[1]>>>16,e.buffer[1]&65535,e.buffer[0]>>>16,e.buffer[0]&65535]);let s=n[3]*i[3];this.buffer[0]=s&65535;let o=s>>>16;return s=n[2]*i[3],o+=s,s=n[3]*i[2]>>>0,o+=s,this.buffer[0]+=o<<16,this.buffer[1]=o>>>0<s?zle:0,this.buffer[1]+=o>>>16,this.buffer[1]+=n[1]*i[3]+n[2]*i[2]+n[3]*i[1],this.buffer[1]+=n[0]*i[3]+n[1]*i[2]+n[2]*i[1]+n[3]*i[0]<<16,this}_plus(e){const n=this.buffer[0]+e.buffer[0]>>>0;this.buffer[1]+=e.buffer[1],n<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=n}lessThan(e){return this.buffer[1]<e.buffer[1]||this.buffer[1]===e.buffer[1]&&this.buffer[0]<e.buffer[0]}equals(e){return this.buffer[1]===e.buffer[1]&&this.buffer[0]==e.buffer[0]}greaterThan(e){return e.lessThan(this)}hex(){return`${mh(this.buffer[1])} ${mh(this.buffer[0])}`}}class Xt extends hO{times(e){return this._times(e),this}plus(e){return this._plus(e),this}static from(e,n=new Uint32Array(2)){return Xt.fromString(typeof e=="string"?e:e.toString(),n)}static fromNumber(e,n=new Uint32Array(2)){return Xt.fromString(e.toString(),n)}static fromString(e,n=new Uint32Array(2)){const i=e.length,s=new Xt(n);for(let o=0;o<i;){const c=up<i-o?up:i-o,d=new Xt(new Uint32Array([Number.parseInt(e.slice(o,o+c),10),0])),f=new Xt(new Uint32Array([uO[c],0]));s.times(f),s.plus(d),o+=c}return s}static convertArray(e){const n=new Uint32Array(e.length*2);for(let i=-1,s=e.length;++i<s;)Xt.from(e[i],new Uint32Array(n.buffer,n.byteOffset+2*i*4,2));return n}static multiply(e,n){return new Xt(new Uint32Array(e.buffer)).times(n)}static add(e,n){return new Xt(new Uint32Array(e.buffer)).plus(n)}}class Zi extends hO{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(e){return this._times(e),this}plus(e){return this._plus(e),this}lessThan(e){const n=this.buffer[1]<<0,i=e.buffer[1]<<0;return n<i||n===i&&this.buffer[0]<e.buffer[0]}static from(e,n=new Uint32Array(2)){return Zi.fromString(typeof e=="string"?e:e.toString(),n)}static fromNumber(e,n=new Uint32Array(2)){return Zi.fromString(e.toString(),n)}static fromString(e,n=new Uint32Array(2)){const i=e.startsWith("-"),s=e.length,o=new Zi(n);for(let c=i?1:0;c<s;){const d=up<s-c?up:s-c,f=new Zi(new Uint32Array([Number.parseInt(e.slice(c,c+d),10),0])),u=new Zi(new Uint32Array([uO[d],0]));o.times(u),o.plus(f),c+=d}return i?o.negate():o}static convertArray(e){const n=new Uint32Array(e.length*2);for(let i=-1,s=e.length;++i<s;)Zi.from(e[i],new Uint32Array(n.buffer,n.byteOffset+2*i*4,2));return n}static multiply(e,n){return new Zi(new Uint32Array(e.buffer)).times(n)}static add(e,n){return new Zi(new Uint32Array(e.buffer)).plus(n)}}class na{constructor(e){this.buffer=e}high(){return new Zi(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new Zi(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(e){const n=new Xt(new Uint32Array([this.buffer[3],0])),i=new Xt(new Uint32Array([this.buffer[2],0])),s=new Xt(new Uint32Array([this.buffer[1],0])),o=new Xt(new Uint32Array([this.buffer[0],0])),c=new Xt(new Uint32Array([e.buffer[3],0])),d=new Xt(new Uint32Array([e.buffer[2],0])),f=new Xt(new Uint32Array([e.buffer[1],0])),u=new Xt(new Uint32Array([e.buffer[0],0]));let a=Xt.multiply(o,u);this.buffer[0]=a.low();const _=new Xt(new Uint32Array([a.high(),0]));return a=Xt.multiply(s,u),_.plus(a),a=Xt.multiply(o,f),_.plus(a),this.buffer[1]=_.low(),this.buffer[3]=_.lessThan(a)?1:0,this.buffer[2]=_.high(),new Xt(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(Xt.multiply(i,u)).plus(Xt.multiply(s,f)).plus(Xt.multiply(o,d)),this.buffer[3]+=Xt.multiply(n,u).plus(Xt.multiply(i,f)).plus(Xt.multiply(s,d)).plus(Xt.multiply(o,c)).low(),this}plus(e){const n=new Uint32Array(4);return n[3]=this.buffer[3]+e.buffer[3]>>>0,n[2]=this.buffer[2]+e.buffer[2]>>>0,n[1]=this.buffer[1]+e.buffer[1]>>>0,n[0]=this.buffer[0]+e.buffer[0]>>>0,n[0]<this.buffer[0]>>>0&&++n[1],n[1]<this.buffer[1]>>>0&&++n[2],n[2]<this.buffer[2]>>>0&&++n[3],this.buffer[3]=n[3],this.buffer[2]=n[2],this.buffer[1]=n[1],this.buffer[0]=n[0],this}hex(){return`${mh(this.buffer[3])} ${mh(this.buffer[2])} ${mh(this.buffer[1])} ${mh(this.buffer[0])}`}static multiply(e,n){return new na(new Uint32Array(e.buffer)).times(n)}static add(e,n){return new na(new Uint32Array(e.buffer)).plus(n)}static from(e,n=new Uint32Array(4)){return na.fromString(typeof e=="string"?e:e.toString(),n)}static fromNumber(e,n=new Uint32Array(4)){return na.fromString(e.toString(),n)}static fromString(e,n=new Uint32Array(4)){const i=e.startsWith("-"),s=e.length,o=new na(n);for(let c=i?1:0;c<s;){const d=up<s-c?up:s-c,f=new na(new Uint32Array([Number.parseInt(e.slice(c,c+d),10),0,0,0])),u=new na(new Uint32Array([uO[d],0,0,0]));o.times(u),o.plus(f),c+=d}return i?o.negate():o}static convertArray(e){const n=new Uint32Array(e.length*4);for(let i=-1,s=e.length;++i<s;)na.from(e[i],new Uint32Array(n.buffer,n.byteOffset+4*4*i,4));return n}}const $le=Object.freeze(Object.defineProperty({__proto__:null,BaseInt64:hO,Uint64:Xt,Int64:Zi,Int128:na},Symbol.toStringTag,{value:"Module"}));class Z5 extends Ft{constructor(e,n,i,s){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=e,this.nodes=n,this.buffers=i,this.dictionaries=s}visit(e){return super.visit(e instanceof Ut?e.type:e)}visitNull(e,{length:n}=this.nextFieldNode()){return Qe({type:e,length:n})}visitBool(e,{length:n,nullCount:i}=this.nextFieldNode()){return Qe({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitInt(e,{length:n,nullCount:i}=this.nextFieldNode()){return Qe({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitFloat(e,{length:n,nullCount:i}=this.nextFieldNode()){return Qe({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitUtf8(e,{length:n,nullCount:i}=this.nextFieldNode()){return Qe({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitBinary(e,{length:n,nullCount:i}=this.nextFieldNode()){return Qe({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitFixedSizeBinary(e,{length:n,nullCount:i}=this.nextFieldNode()){return Qe({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitDate(e,{length:n,nullCount:i}=this.nextFieldNode()){return Qe({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitTimestamp(e,{length:n,nullCount:i}=this.nextFieldNode()){return Qe({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitTime(e,{length:n,nullCount:i}=this.nextFieldNode()){return Qe({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitDecimal(e,{length:n,nullCount:i}=this.nextFieldNode()){return Qe({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitList(e,{length:n,nullCount:i}=this.nextFieldNode()){return Qe({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}visitStruct(e,{length:n,nullCount:i}=this.nextFieldNode()){return Qe({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),children:this.visitMany(e.children)})}visitUnion(e){return e.mode===pi.Sparse?this.visitSparseUnion(e):this.visitDenseUnion(e)}visitDenseUnion(e,{length:n,nullCount:i}=this.nextFieldNode()){return Qe({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),typeIds:this.readTypeIds(e),valueOffsets:this.readOffsets(e),children:this.visitMany(e.children)})}visitSparseUnion(e,{length:n,nullCount:i}=this.nextFieldNode()){return Qe({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),typeIds:this.readTypeIds(e),children:this.visitMany(e.children)})}visitDictionary(e,{length:n,nullCount:i}=this.nextFieldNode()){return Qe({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e.indices),dictionary:this.readDictionary(e)})}visitInterval(e,{length:n,nullCount:i}=this.nextFieldNode()){return Qe({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitFixedSizeList(e,{length:n,nullCount:i}=this.nextFieldNode()){return Qe({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),child:this.visit(e.children[0])})}visitMap(e,{length:n,nullCount:i}=this.nextFieldNode()){return Qe({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(e,n,i=this.nextBufferRange()){return n>0&&this.readData(e,i)||new Uint8Array(0)}readOffsets(e,n){return this.readData(e,n)}readTypeIds(e,n){return this.readData(e,n)}readData(e,{length:n,offset:i}=this.nextBufferRange()){return this.bytes.subarray(i,i+n)}readDictionary(e){return this.dictionaries.get(e.id)}}class qle extends Z5{constructor(e,n,i,s){super(new Uint8Array(0),n,i,s),this.sources=e}readNullBitmap(e,n,{offset:i}=this.nextBufferRange()){return n<=0?new Uint8Array(0):Z_(this.sources[i])}readOffsets(e,{offset:n}=this.nextBufferRange()){return Ot(Uint8Array,Ot(Int32Array,this.sources[n]))}readTypeIds(e,{offset:n}=this.nextBufferRange()){return Ot(Uint8Array,Ot(e.ArrayType,this.sources[n]))}readData(e,{offset:n}=this.nextBufferRange()){const{sources:i}=this;return Ye.isTimestamp(e)||(Ye.isInt(e)||Ye.isTime(e))&&e.bitWidth===64||Ye.isDate(e)&&e.unit===Ps.MILLISECOND?Ot(Uint8Array,Zi.convertArray(i[n])):Ye.isDecimal(e)?Ot(Uint8Array,na.convertArray(i[n])):Ye.isBinary(e)||Ye.isFixedSizeBinary(e)?Gle(i[n]):Ye.isBool(e)?Z_(i[n]):Ye.isUtf8(e)?U1(i[n].join("")):Ot(Uint8Array,Ot(e.ArrayType,i[n].map(s=>+s)))}}function Gle(t){const e=t.join(""),n=new Uint8Array(e.length/2);for(let i=0;i<e.length;i+=2)n[i>>1]=Number.parseInt(e.slice(i,i+2),16);return n}class pO extends Q1{constructor(e){super(e),this._values=new J1(new Uint8Array(0))}get byteLength(){let e=this._pendingLength+this.length*4;return this._offsets&&(e+=this._offsets.byteLength),this._values&&(e+=this._values.byteLength),this._nulls&&(e+=this._nulls.byteLength),e}setValue(e,n){return super.setValue(e,Nt(n))}_flushPending(e,n){const i=this._offsets,s=this._values.reserve(n).buffer;let o=0;for(const[c,d]of e)if(d===void 0)i.set(c,0);else{const f=d.length;s.set(d,o),i.set(c,f),o+=f}}}class eq extends Xi{constructor(e){super(e),this._values=new J5}setValue(e,n){this._values.set(e,+n)}}class Jy extends Bd{}Jy.prototype._setValue=g5;class gO extends Jy{}gO.prototype._setValue=W2;class _O extends Jy{}_O.prototype._setValue=Y2;class yO extends Bd{}yO.prototype._setValue=m5;class tq extends Xi{constructor({type:e,nullValues:n,dictionaryHashFunction:i}){super({type:new zl(e.dictionary,e.indices,e.id,e.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=Jf({type:this.type.indices,nullValues:n}),this.dictionary=Jf({type:this.type.dictionary,nullValues:null}),typeof i=="function"&&(this.valueToKey=i)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(e){return this.indices.isValid(e)}setValid(e,n){const i=this.indices;return n=i.setValid(e,n),this.length=i.length,n}setValue(e,n){const i=this._keysToIndices,s=this.valueToKey(n);let o=i[s];return o===void 0&&(i[s]=o=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(e,o)}flush(){const e=this.type,n=this._dictionary,i=this.dictionary.toVector(),s=this.indices.flush().clone(e);return s.dictionary=n?n.concat(i):i,this.finished||(this._dictionaryOffset+=i.length),this._dictionary=s.dictionary,this.clear(),s}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(e){return typeof e=="string"?e:`${e}`}}class mO extends Bd{}mO.prototype._setValue=p5;class nq extends Xi{setValue(e,n){const[i]=this.children,s=e*this.stride;for(let o=-1,c=n.length;++o<c;)i.set(s+o,n[o])}addChild(e,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const i=this.children.push(e);return this.type=new ap(this.type.listSize,new Ut(n,e.type,!0)),i}}class Qy extends Bd{setValue(e,n){this._values.set(e,n)}}class iq extends Qy{setValue(e,n){super.setValue(e,G2(n))}}class sq extends Qy{}class rq extends Qy{}class Zy extends Bd{}Zy.prototype._setValue=T5;class wO extends Zy{}wO.prototype._setValue=iO;class bO extends Zy{}bO.prototype._setValue=sO;class Yo extends Bd{setValue(e,n){this._values.set(e,n)}}class aq extends Yo{}class oq extends Yo{}class lq extends Yo{}class cq extends Yo{}class dq extends Yo{}class fq extends Yo{}class uq extends Yo{}class hq extends Yo{}class pq extends Q1{constructor(e){super(e),this._offsets=new Q5}addChild(e,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=e,this.type=new Kf(new Ut(n,e.type,!0)),this.numChildren-1}_flushPending(e){const n=this._offsets,[i]=this.children;for(const[s,o]of e)if(typeof o>"u")n.set(s,0);else{const c=o.length,d=n.set(s,c).buffer[s];for(let f=-1;++f<c;)i.set(d+f,o[f])}}}class gq extends Q1{set(e,n){return super.set(e,n)}setValue(e,n){const i=n instanceof Map?n:new Map(Object.entries(n)),s=this._pending||(this._pending=new Map),o=s.get(e);o&&(this._pendingLength-=o.size),this._pendingLength+=i.size,s.set(e,i)}addChild(e,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=e,this.type=new op(new Ut(n,e.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(e){const n=this._offsets,[i]=this.children;for(const[s,o]of e)if(o===void 0)n.set(s,0);else{let{[s]:c,[s+1]:d}=n.set(s,o.size).buffer;for(const f of o.entries())if(i.set(c,f),++c>=d)break}}}class _q extends Xi{setValue(e,n){}setValid(e,n){return this.length=Math.max(e+1,this.length),n}}class yq extends Xi{setValue(e,n){const{children:i,type:s}=this;switch(Array.isArray(n)||n.constructor){case!0:return s.children.forEach((o,c)=>i[c].set(e,n[c]));case Map:return s.children.forEach((o,c)=>i[c].set(e,n.get(o.name)));default:return s.children.forEach((o,c)=>i[c].set(e,n[o.name]))}}setValid(e,n){return super.setValid(e,n)||this.children.forEach(i=>i.setValid(e,n)),n}addChild(e,n=`${this.numChildren}`){const i=this.children.push(e);return this.type=new oi([...this.type.children,new Ut(n,e.type,!0)]),i}}class Iu extends Bd{}Iu.prototype._setValue=_5;class TO extends Iu{}TO.prototype._setValue=X2;class vO extends Iu{}vO.prototype._setValue=K2;class EO extends Iu{}EO.prototype._setValue=J2;class SO extends Iu{}SO.prototype._setValue=Q2;class Fu extends Bd{}Fu.prototype._setValue=y5;class xO extends Fu{}xO.prototype._setValue=Z2;class BO extends Fu{}BO.prototype._setValue=eO;class kO extends Fu{}kO.prototype._setValue=tO;class IO extends Fu{}IO.prototype._setValue=nO;class Z1 extends Xi{constructor(e){super(e),this._typeIds=new Ky(new Int8Array(0),1),typeof e.valueToChildTypeId=="function"&&(this._valueToChildTypeId=e.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(e,n){return this.set(this.length,e,n)}set(e,n,i){return i===void 0&&(i=this._valueToChildTypeId(this,n,e)),this.setValid(e,this.isValid(n))&&this.setValue(e,n,i),this}setValue(e,n,i){this._typeIds.set(e,i);const s=this.type.typeIdToChildIndex[i],o=this.children[s];o==null||o.set(e,n)}addChild(e,n=`${this.children.length}`){const i=this.children.push(e),{type:{children:s,mode:o,typeIds:c}}=this,d=[...s,new Ut(n,e.type)];return this.type=new Zc(o,[...c,i],d),i}_valueToChildTypeId(e,n,i){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class mq extends Z1{}class wq extends Z1{constructor(e){super(e),this._offsets=new Ky(new Int32Array(0))}setValue(e,n,i){const s=this._typeIds.set(e,i).buffer[e],o=this.getChildAt(this.type.typeIdToChildIndex[s]),c=this._offsets.set(e,o.length).buffer[e];o==null||o.set(c,n)}}class FO extends Q1{constructor(e){super(e),this._values=new J1(new Uint8Array(0))}get byteLength(){let e=this._pendingLength+this.length*4;return this._offsets&&(e+=this._offsets.byteLength),this._values&&(e+=this._values.byteLength),this._nulls&&(e+=this._nulls.byteLength),e}setValue(e,n){return super.setValue(e,U1(n))}_flushPending(e,n){}}FO.prototype._flushPending=pO.prototype._flushPending;class Vle extends Ft{visitNull(){return _q}visitBool(){return eq}visitInt(){return Yo}visitInt8(){return aq}visitInt16(){return oq}visitInt32(){return lq}visitInt64(){return cq}visitUint8(){return dq}visitUint16(){return fq}visitUint32(){return uq}visitUint64(){return hq}visitFloat(){return Qy}visitFloat16(){return iq}visitFloat32(){return sq}visitFloat64(){return rq}visitUtf8(){return FO}visitBinary(){return pO}visitFixedSizeBinary(){return mO}visitDate(){return Jy}visitDateDay(){return gO}visitDateMillisecond(){return _O}visitTimestamp(){return Iu}visitTimestampSecond(){return TO}visitTimestampMillisecond(){return vO}visitTimestampMicrosecond(){return EO}visitTimestampNanosecond(){return SO}visitTime(){return Fu}visitTimeSecond(){return xO}visitTimeMillisecond(){return BO}visitTimeMicrosecond(){return kO}visitTimeNanosecond(){return IO}visitDecimal(){return yO}visitList(){return pq}visitStruct(){return yq}visitUnion(){return Z1}visitDenseUnion(){return wq}visitSparseUnion(){return mq}visitDictionary(){return tq}visitInterval(){return Zy}visitIntervalDayTime(){return wO}visitIntervalYearMonth(){return bO}visitFixedSizeList(){return nq}visitMap(){return gq}}const Hle=new Vle;class st extends Ft{compareSchemas(e,n){return e===n||n instanceof e.constructor&&this.compareManyFields(e.fields,n.fields)}compareManyFields(e,n){return e===n||Array.isArray(e)&&Array.isArray(n)&&e.length===n.length&&e.every((i,s)=>this.compareFields(i,n[s]))}compareFields(e,n){return e===n||n instanceof e.constructor&&e.name===n.name&&e.nullable===n.nullable&&this.visit(e.type,n.type)}}function Hs(t,e){return e instanceof t.constructor}function em(t,e){return t===e||Hs(t,e)}function Wl(t,e){return t===e||Hs(t,e)&&t.bitWidth===e.bitWidth&&t.isSigned===e.isSigned}function eE(t,e){return t===e||Hs(t,e)&&t.precision===e.precision}function Wle(t,e){return t===e||Hs(t,e)&&t.byteWidth===e.byteWidth}function OO(t,e){return t===e||Hs(t,e)&&t.unit===e.unit}function tm(t,e){return t===e||Hs(t,e)&&t.unit===e.unit&&t.timezone===e.timezone}function nm(t,e){return t===e||Hs(t,e)&&t.unit===e.unit&&t.bitWidth===e.bitWidth}function Yle(t,e){return t===e||Hs(t,e)&&t.children.length===e.children.length&&Co.compareManyFields(t.children,e.children)}function Xle(t,e){return t===e||Hs(t,e)&&t.children.length===e.children.length&&Co.compareManyFields(t.children,e.children)}function MO(t,e){return t===e||Hs(t,e)&&t.mode===e.mode&&t.typeIds.every((n,i)=>n===e.typeIds[i])&&Co.compareManyFields(t.children,e.children)}function Kle(t,e){return t===e||Hs(t,e)&&t.id===e.id&&t.isOrdered===e.isOrdered&&Co.visit(t.indices,e.indices)&&Co.visit(t.dictionary,e.dictionary)}function AO(t,e){return t===e||Hs(t,e)&&t.unit===e.unit}function Jle(t,e){return t===e||Hs(t,e)&&t.listSize===e.listSize&&t.children.length===e.children.length&&Co.compareManyFields(t.children,e.children)}function Qle(t,e){return t===e||Hs(t,e)&&t.keysSorted===e.keysSorted&&t.children.length===e.children.length&&Co.compareManyFields(t.children,e.children)}st.prototype.visitNull=em;st.prototype.visitBool=em;st.prototype.visitInt=Wl;st.prototype.visitInt8=Wl;st.prototype.visitInt16=Wl;st.prototype.visitInt32=Wl;st.prototype.visitInt64=Wl;st.prototype.visitUint8=Wl;st.prototype.visitUint16=Wl;st.prototype.visitUint32=Wl;st.prototype.visitUint64=Wl;st.prototype.visitFloat=eE;st.prototype.visitFloat16=eE;st.prototype.visitFloat32=eE;st.prototype.visitFloat64=eE;st.prototype.visitUtf8=em;st.prototype.visitBinary=em;st.prototype.visitFixedSizeBinary=Wle;st.prototype.visitDate=OO;st.prototype.visitDateDay=OO;st.prototype.visitDateMillisecond=OO;st.prototype.visitTimestamp=tm;st.prototype.visitTimestampSecond=tm;st.prototype.visitTimestampMillisecond=tm;st.prototype.visitTimestampMicrosecond=tm;st.prototype.visitTimestampNanosecond=tm;st.prototype.visitTime=nm;st.prototype.visitTimeSecond=nm;st.prototype.visitTimeMillisecond=nm;st.prototype.visitTimeMicrosecond=nm;st.prototype.visitTimeNanosecond=nm;st.prototype.visitDecimal=em;st.prototype.visitList=Yle;st.prototype.visitStruct=Xle;st.prototype.visitUnion=MO;st.prototype.visitDenseUnion=MO;st.prototype.visitSparseUnion=MO;st.prototype.visitDictionary=Kle;st.prototype.visitInterval=AO;st.prototype.visitIntervalDayTime=AO;st.prototype.visitIntervalYearMonth=AO;st.prototype.visitFixedSizeList=Jle;st.prototype.visitMap=Qle;const Co=new st;function WT(t,e){return Co.compareSchemas(t,e)}function Zle(t,e){return Co.compareFields(t,e)}function bq(t,e){return Co.visit(t,e)}function Jf(t){const e=t.type,n=new(Hle.getVisitFn(e)())(t);if(e.children&&e.children.length>0){const i=t.children||[],s={nullValues:t.nullValues},o=Array.isArray(i)?(c,d)=>i[d]||s:({name:c})=>i[c]||s;for(const[c,d]of e.children.entries()){const{type:f}=d,u=o(d,c);n.children.push(Jf(Object.assign(Object.assign({},u),{type:f})))}}return n}function NO(t,e){if(t instanceof Kt||t instanceof He||t.type instanceof Ye||ArrayBuffer.isView(t))return K1(t);const n={type:e!=null?e:y0(t),nullValues:[null]},i=[...Tq(n)(t)],s=i.length===1?i[0]:i.reduce((o,c)=>o.concat(c));return Ye.isDictionary(s.type)?s.memoize():s}function ece(t){const e=NO(t),n=new An(new $t(e.type.children),e.data[0]);return new Yn(n)}function y0(t){if(t.length===0)return new Oo;let e=0,n=0,i=0,s=0,o=0,c=0,d=0,f=0;for(const u of t){if(u==null){++e;continue}switch(typeof u){case"bigint":++c;continue;case"boolean":++d;continue;case"number":++s;continue;case"string":++o;continue;case"object":Array.isArray(u)?++n:Object.prototype.toString.call(u)==="[object Date]"?++f:++i;continue}throw new TypeError("Unable to infer Vector type from input values, explicit type declaration expected")}if(s+e===t.length)return new V1;if(o+e===t.length)return new zl(new sp,new Qc);if(c+e===t.length)return new G1;if(d+e===t.length)return new rp;if(f+e===t.length)return new d5;if(n+e===t.length){const u=t,a=y0(u[u.findIndex(_=>_!=null)]);if(u.every(_=>_==null||bq(a,y0(_))))return new Kf(new Ut("",a,!0))}else if(i+e===t.length){const u=new Map;for(const a of t)for(const _ of Object.keys(a))!u.has(_)&&a[_]!=null&&u.set(_,new Ut(_,y0([a[_]]),!0));return new oi([...u.values()])}throw new TypeError("Unable to infer Vector type from input values, explicit type declaration expected")}function Tq(t){const{["queueingStrategy"]:e="count"}=t,{["highWaterMark"]:n=e!=="bytes"?Number.POSITIVE_INFINITY:Math.pow(2,14)}=t,i=e!=="bytes"?"length":"byteLength";return function*(s){let o=0;const c=Jf(t);for(const d of s)c.append(d)[i]>=n&&++o&&(yield c.toVector());(c.finish().length>0||o===0)&&(yield c.toVector())}}function tce(t){const{["queueingStrategy"]:e="count"}=t,{["highWaterMark"]:n=e!=="bytes"?Number.POSITIVE_INFINITY:Math.pow(2,14)}=t,i=e!=="bytes"?"length":"byteLength";return function(s){return Ln(this,arguments,function*(){var o,c;let d=0;const f=Jf(t);try{for(var u=Fs(s),a;a=yield Be(u.next()),!a.done;){const _=a.value;f.append(_)[i]>=n&&++d&&(yield yield Be(f.toVector()))}}catch(_){o={error:_}}finally{try{a&&!a.done&&(c=u.return)&&(yield Be(c.call(u)))}finally{if(o)throw o.error}}(f.finish().length>0||d===0)&&(yield yield Be(f.toVector()))})}}function Bx(t,e){return nce(t,e.map(n=>n.data.concat()))}function nce(t,e){const n=[...t.fields],i=[],s={numBatches:e.reduce((_,w)=>Math.max(_,w.length),0)};let o=0,c=0,d=-1;const f=e.length;let u,a=[];for(;s.numBatches-- >0;){for(c=Number.POSITIVE_INFINITY,d=-1;++d<f;)a[d]=u=e[d].shift(),c=Math.min(c,u?u.length:c);Number.isFinite(c)&&(a=ice(n,c,a,e,s),c>0&&(i[o++]=Qe({type:new oi(n),length:c,nullCount:0,children:a.slice()})))}return[t=t.assign(n),i.map(_=>new An(t,_))]}function ice(t,e,n,i,s){var o;const c=(e+63&-64)>>3;for(let d=-1,f=i.length;++d<f;){const u=n[d],a=u==null?void 0:u.length;if(a>=e)a===e?n[d]=u:(n[d]=u.slice(0,e),s.numBatches=Math.max(s.numBatches,i[d].unshift(u.slice(e,a-e))));else{const _=t[d];t[d]=_.clone({nullable:!0}),n[d]=(o=u==null?void 0:u._changeLengthAndBackfillNullBitmap(e))!==null&&o!==void 0?o:Qe({type:_.type,length:e,nullCount:e,nullBitmap:new Uint8Array(c)})}}return n}var vq;class Yn{constructor(...e){var n,i;if(e.length===0)return this.batches=[],this.schema=new $t([]),this._offsets=[0],this;let s,o;e[0]instanceof $t&&(s=e.shift()),e[e.length-1]instanceof Uint32Array&&(o=e.pop());const c=f=>{if(f){if(f instanceof An)return[f];if(f instanceof Yn)return f.batches;if(f instanceof Kt){if(f.type instanceof oi)return[new An(new $t(f.type.children),f)]}else{if(Array.isArray(f))return f.flatMap(u=>c(u));if(typeof f[Symbol.iterator]=="function")return[...f].flatMap(u=>c(u));if(typeof f=="object"){const u=Object.keys(f),a=u.map(m=>new He([f[m]])),_=new $t(u.map((m,l)=>new Ut(String(m),a[l].type))),[,w]=Bx(_,a);return w.length===0?[new An(f)]:w}}}return[]},d=e.flatMap(f=>c(f));if(s=(i=s!=null?s:(n=d[0])===null||n===void 0?void 0:n.schema)!==null&&i!==void 0?i:new $t([]),!(s instanceof $t))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const f of d){if(!(f instanceof An))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!WT(s,f.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=s,this.batches=d,this._offsets=o!=null?o:z5(this.data)}get data(){return this.batches.map(({data:e})=>e)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((e,n)=>e+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=U5(this.data)),this._nullCount}isValid(e){return!1}get(e){return null}set(e,n){}indexOf(e,n){return-1}getByteLength(e){return 0}[Symbol.iterator](){return this.batches.length>0?dO.visit(new He(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...e){const n=this.schema,i=this.data.concat(e.flatMap(({data:s})=>s));return new Yn(n,i.map(s=>new An(n,s)))}slice(e,n){const i=this.schema;[e,n]=aO({length:this.numRows},e,n);const s=$5(this.data,this._offsets,e,n);return new Yn(i,s.map(o=>new An(i,o)))}getChild(e){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===e))}getChildAt(e){if(e>-1&&e<this.schema.fields.length){const n=this.data.map(i=>i.children[e]);if(n.length===0){const{type:i}=this.schema.fields[e],s=Qe({type:i,length:0,nullCount:0});n.push(s._changeLengthAndBackfillNullBitmap(this.numRows))}return new He(n)}return null}setChild(e,n){var i;return this.setChildAt((i=this.schema.fields)===null||i===void 0?void 0:i.findIndex(s=>s.name===e),n)}setChildAt(e,n){let i=this.schema,s=[...this.batches];if(e>-1&&e<this.numCols){n||(n=new He([Qe({type:new Oo,length:this.numRows})]));const o=i.fields.slice(),c=o[e].clone({type:n.type}),d=this.schema.fields.map((f,u)=>this.getChildAt(u));[o[e],d[e]]=[c,n],[i,s]=Bx(i,d)}return new Yn(i,s)}select(e){const n=this.schema.fields.reduce((i,s,o)=>i.set(s.name,o),new Map);return this.selectAt(e.map(i=>n.get(i)).filter(i=>i>-1))}selectAt(e){const n=this.schema.selectAt(e),i=this.batches.map(s=>s.selectAt(e));return new Yn(n,i)}assign(e){const n=this.schema.fields,[i,s]=e.schema.fields.reduce((d,f,u)=>{const[a,_]=d,w=n.findIndex(m=>m.name===f.name);return~w?_[w]=u:a.push(u),d},[[],[]]),o=this.schema.assign(e.schema),c=[...n.map((d,f)=>[f,s[f]]).map(([d,f])=>f===void 0?this.getChildAt(d):e.getChildAt(f)),...i.map(d=>e.getChildAt(d))].filter(Boolean);return new Yn(...Bx(o,c))}}vq=Symbol.toStringTag;Yn[vq]=(t=>(t.schema=null,t.batches=[],t._offsets=new Uint32Array([0]),t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,t.isValid=Nh(cO),t.get=Nh(Ds.getVisitFn(te.Struct)),t.set=q5(jr.getVisitFn(te.Struct)),t.indexOf=G5(jT.getVisitFn(te.Struct)),t.getByteLength=Nh(Ao.getVisitFn(te.Struct)),"Table"))(Yn.prototype);function sce(t){const e={},n=Object.entries(t);for(const[i,s]of n)e[i]=K1(s);return new Yn(e)}function rce(t){const e={},n=Object.entries(t);for(const[i,s]of n)e[i]=NO(s);return new Yn(e)}var Eq;class An{constructor(...e){switch(e.length){case 2:{if([this.schema]=e,!(this.schema instanceof $t))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=Qe({nullCount:0,type:new oi(this.schema.fields),children:this.schema.fields.map(n=>Qe({type:n.type,nullCount:0}))})]=e,!(this.data instanceof Kt))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=rD(this.schema,this.data.children);break}case 1:{const[n]=e,{fields:i,children:s,length:o}=Object.keys(n).reduce((f,u,a)=>(f.children[a]=n[u],f.length=Math.max(f.length,n[u].length),f.fields[a]=Ut.new({name:u,type:n[u].type,nullable:!0}),f),{length:0,fields:new Array,children:new Array}),c=new $t(i),d=Qe({type:new oi(i),length:o,children:s,nullCount:0});[this.schema,this.data]=rD(c,d.children,o);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=Sq(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(e){return this.data.getValid(e)}get(e){return Ds.visit(this.data,e)}set(e,n){return jr.visit(this.data,e,n)}indexOf(e,n){return jT.visit(this.data,e,n)}getByteLength(e){return Ao.visit(this.data,e)}[Symbol.iterator](){return dO.visit(new He([this.data]))}toArray(){return[...this]}concat(...e){return new Yn(this.schema,[this,...e])}slice(e,n){const[i]=new He([this.data]).slice(e,n).data;return new An(this.schema,i)}getChild(e){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(i=>i.name===e))}getChildAt(e){return e>-1&&e<this.schema.fields.length?new He([this.data.children[e]]):null}setChild(e,n){var i;return this.setChildAt((i=this.schema.fields)===null||i===void 0?void 0:i.findIndex(s=>s.name===e),n)}setChildAt(e,n){let i=this.schema,s=this.data;if(e>-1&&e<this.numCols){n||(n=new He([Qe({type:new Oo,length:this.numRows})]));const o=i.fields.slice(),c=s.children.slice(),d=o[e].clone({type:n.type});[o[e],c[e]]=[d,n.data[0]],i=new $t(o,new Map(this.schema.metadata)),s=Qe({type:new oi(o),children:c})}return new An(i,s)}select(e){const n=this.schema.select(e),i=new oi(n.fields),s=[];for(const o of e){const c=this.schema.fields.findIndex(d=>d.name===o);~c&&(s[c]=this.data.children[c])}return new An(n,Qe({type:i,length:this.numRows,children:s}))}selectAt(e){const n=this.schema.selectAt(e),i=e.map(o=>this.data.children[o]).filter(Boolean),s=Qe({type:new oi(n.fields),length:this.numRows,children:i});return new An(n,s)}}Eq=Symbol.toStringTag;An[Eq]=(t=>(t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(An.prototype);function rD(t,e,n=e.reduce((i,s)=>Math.max(i,s.length),0)){var i;const s=[...t.fields],o=[...e],c=(n+63&-64)>>3;for(const[d,f]of t.fields.entries()){const u=e[d];(!u||u.length!==n)&&(s[d]=f.clone({nullable:!0}),o[d]=(i=u==null?void 0:u._changeLengthAndBackfillNullBitmap(n))!==null&&i!==void 0?i:Qe({type:f.type,length:n,nullCount:n,nullBitmap:new Uint8Array(c)}))}return[t.assign(s),Qe({type:new oi(s),length:n,children:o})]}function Sq(t,e,n=new Map){for(let i=-1,s=t.length;++i<s;){const c=t[i].type,d=e[i];if(Ye.isDictionary(c)){if(!n.has(c.id))d.dictionary&&n.set(c.id,d.dictionary);else if(n.get(c.id)!==d.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}c.children&&c.children.length>0&&Sq(c.children,d.children,n)}return n}class CO extends An{constructor(e){const n=e.fields.map(s=>Qe({type:s.type})),i=Qe({type:new oi(e.fields),nullCount:0,children:n});super(e,i)}}var YT;(function(t){t[t.BUFFER=0]="BUFFER"})(YT||(YT={}));var XT;(function(t){t[t.LZ4_FRAME=0]="LZ4_FRAME",t[t.ZSTD=1]="ZSTD"})(XT||(XT={}));class _c{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsBodyCompression(e,n){return(n||new _c).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBodyCompression(e,n){return e.setPosition(e.position()+Ge),(n||new _c).__init(e.readInt32(e.position())+e.position(),e)}codec(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb_pos+e):XT.LZ4_FRAME}method(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb_pos+e):YT.BUFFER}static startBodyCompression(e){e.startObject(2)}static addCodec(e,n){e.addFieldInt8(0,n,XT.LZ4_FRAME)}static addMethod(e,n){e.addFieldInt8(1,n,YT.BUFFER)}static endBodyCompression(e){return e.endObject()}static createBodyCompression(e,n,i){return _c.startBodyCompression(e),_c.addCodec(e,n),_c.addMethod(e,i),_c.endBodyCompression(e)}}class xq{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(e,n,i){return e.prep(8,16),e.writeInt64(i),e.writeInt64(n),e.offset()}}class Bq{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(e,n,i){return e.prep(8,16),e.writeInt64(i),e.writeInt64(n),e.offset()}}class mr{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsRecordBatch(e,n){return(n||new mr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsRecordBatch(e,n){return e.setPosition(e.position()+Ge),(n||new mr).__init(e.readInt32(e.position())+e.position(),e)}length(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}nodes(e,n){const i=this.bb.__offset(this.bb_pos,6);return i?(n||new Bq).__init(this.bb.__vector(this.bb_pos+i)+e*16,this.bb):null}nodesLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}buffers(e,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new xq).__init(this.bb.__vector(this.bb_pos+i)+e*16,this.bb):null}buffersLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}compression(e){const n=this.bb.__offset(this.bb_pos,10);return n?(e||new _c).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(e){e.startObject(4)}static addLength(e,n){e.addFieldInt64(0,n,e.createLong(0,0))}static addNodes(e,n){e.addFieldOffset(1,n,0)}static startNodesVector(e,n){e.startVector(16,n,8)}static addBuffers(e,n){e.addFieldOffset(2,n,0)}static startBuffersVector(e,n){e.startVector(16,n,8)}static addCompression(e,n){e.addFieldOffset(3,n,0)}static endRecordBatch(e){return e.endObject()}}class vl{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDictionaryBatch(e,n){return(n||new vl).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryBatch(e,n){return e.setPosition(e.position()+Ge),(n||new vl).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}data(e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new mr).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startDictionaryBatch(e){e.startObject(3)}static addId(e,n){e.addFieldInt64(0,n,e.createLong(0,0))}static addData(e,n){e.addFieldOffset(1,n,0)}static addIsDelta(e,n){e.addFieldInt8(2,+n,0)}static endDictionaryBatch(e){return e.endObject()}}var ny;(function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"})(ny||(ny={}));class ri{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsMessage(e,n){return(n||new ri).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMessage(e,n){return e.setPosition(e.position()+Ge),(n||new ri).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):cp.V1}headerType(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):ny.NONE}header(e){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(e,this.bb_pos+n):null}bodyLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}customMetadata(e,n){const i=this.bb.__offset(this.bb_pos,12);return i?(n||new Wn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startMessage(e){e.startObject(5)}static addVersion(e,n){e.addFieldInt16(0,n,cp.V1)}static addHeaderType(e,n){e.addFieldInt8(1,n,ny.NONE)}static addHeader(e,n){e.addFieldOffset(2,n,0)}static addBodyLength(e,n){e.addFieldInt64(3,n,e.createLong(0,0))}static addCustomMetadata(e,n){e.addFieldOffset(4,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addOffset(n[i]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static endMessage(e){return e.endObject()}static finishMessageBuffer(e,n){e.finish(n)}static finishSizePrefixedMessageBuffer(e,n){e.finish(n,void 0,!0)}static createMessage(e,n,i,s,o,c){return ri.startMessage(e),ri.addVersion(e,n),ri.addHeaderType(e,i),ri.addHeader(e,s),ri.addBodyLength(e,o),ri.addCustomMetadata(e,c),ri.endMessage(e)}}var ace=cs;class oce extends Ft{visit(e,n){return e==null||n==null?void 0:super.visit(e,n)}visitNull(e,n){return bf.startNull(n),bf.endNull(n)}visitInt(e,n){return ir.startInt(n),ir.addBitWidth(n,e.bitWidth),ir.addIsSigned(n,e.isSigned),ir.endInt(n)}visitFloat(e,n){return so.startFloatingPoint(n),so.addPrecision(n,e.precision),so.endFloatingPoint(n)}visitBinary(e,n){return yf.startBinary(n),yf.endBinary(n)}visitBool(e,n){return mf.startBool(n),mf.endBool(n)}visitUtf8(e,n){return vf.startUtf8(n),vf.endUtf8(n)}visitDecimal(e,n){return ms.startDecimal(n),ms.addScale(n,e.scale),ms.addPrecision(n,e.precision),ms.addBitWidth(n,e.bitWidth),ms.endDecimal(n)}visitDate(e,n){return to.startDate(n),to.addUnit(n,e.unit),to.endDate(n)}visitTime(e,n){return Tr.startTime(n),Tr.addUnit(n,e.unit),Tr.addBitWidth(n,e.bitWidth),Tr.endTime(n)}visitTimestamp(e,n){const i=e.timezone&&n.createString(e.timezone)||void 0;return vr.startTimestamp(n),vr.addUnit(n,e.unit),i!==void 0&&vr.addTimezone(n,i),vr.endTimestamp(n)}visitInterval(e,n){return ro.startInterval(n),ro.addUnit(n,e.unit),ro.endInterval(n)}visitList(e,n){return wf.startList(n),wf.endList(n)}visitStruct(e,n){return Tf.startStruct_(n),Tf.endStruct_(n)}visitUnion(e,n){vs.startTypeIdsVector(n,e.typeIds.length);const i=vs.createTypeIdsVector(n,e.typeIds);return vs.startUnion(n),vs.addMode(n,e.mode),vs.addTypeIds(n,i),vs.endUnion(n)}visitDictionary(e,n){const i=this.visit(e.indices,n);return Tl.startDictionaryEncoding(n),Tl.addId(n,new ace(e.id,0)),Tl.addIsOrdered(n,e.isOrdered),i!==void 0&&Tl.addIndexType(n,i),Tl.endDictionaryEncoding(n)}visitFixedSizeBinary(e,n){return no.startFixedSizeBinary(n),no.addByteWidth(n,e.byteWidth),no.endFixedSizeBinary(n)}visitFixedSizeList(e,n){return io.startFixedSizeList(n),io.addListSize(n,e.listSize),io.endFixedSizeList(n)}visitMap(e,n){return ao.startMap(n),ao.addKeysSorted(n,e.keysSorted),ao.endMap(n)}}const kx=new oce;function lce(t,e=new Map){return new $t(dce(t,e),m0(t.customMetadata),e)}function kq(t){return new cr(t.count,Iq(t.columns),Fq(t.columns))}function cce(t){return new Ro(kq(t.data),t.id,t.isDelta)}function dce(t,e){return(t.fields||[]).filter(Boolean).map(n=>Ut.fromJSON(n,e))}function aD(t,e){return(t.children||[]).filter(Boolean).map(n=>Ut.fromJSON(n,e))}function Iq(t){return(t||[]).reduce((e,n)=>[...e,new Ou(n.count,fce(n.VALIDITY)),...Iq(n.children)],[])}function Fq(t,e=[]){for(let n=-1,i=(t||[]).length;++n<i;){const s=t[n];s.VALIDITY&&e.push(new yo(e.length,s.VALIDITY.length)),s.TYPE&&e.push(new yo(e.length,s.TYPE.length)),s.OFFSET&&e.push(new yo(e.length,s.OFFSET.length)),s.DATA&&e.push(new yo(e.length,s.DATA.length)),e=Fq(s.children,e)}return e}function fce(t){return(t||[]).reduce((e,n)=>e+ +(n===0),0)}function uce(t,e){let n,i,s,o,c,d;return!e||!(o=t.dictionary)?(c=lD(t,aD(t,e)),s=new Ut(t.name,c,t.nullable,m0(t.customMetadata))):e.has(n=o.id)?(i=(i=o.indexType)?oD(i):new Qc,d=new zl(e.get(n),i,n,o.isOrdered),s=new Ut(t.name,d,t.nullable,m0(t.customMetadata))):(i=(i=o.indexType)?oD(i):new Qc,e.set(n,c=lD(t,aD(t,e))),d=new zl(c,i,n,o.isOrdered),s=new Ut(t.name,d,t.nullable,m0(t.customMetadata))),s||null}function m0(t){return new Map(Object.entries(t||{}))}function oD(t){return new Vi(t.isSigned,t.bitWidth)}function lD(t,e){const n=t.type.name;switch(n){case"NONE":return new Oo;case"null":return new Oo;case"binary":return new K_;case"utf8":return new sp;case"bool":return new rp;case"list":return new Kf((e||[])[0]);case"struct":return new oi(e||[]);case"struct_":return new oi(e||[])}switch(n){case"int":{const i=t.type;return new Vi(i.isSigned,i.bitWidth)}case"floatingpoint":{const i=t.type;return new jl(Zn[i.precision])}case"decimal":{const i=t.type;return new J_(i.scale,i.precision,i.bitWidth)}case"date":{const i=t.type;return new Yf(Ps[i.unit])}case"time":{const i=t.type;return new Mo(ct[i.unit],i.bitWidth)}case"timestamp":{const i=t.type;return new Ul(ct[i.unit],i.timezone)}case"interval":{const i=t.type;return new Xf(Dr[i.unit])}case"union":{const i=t.type;return new Zc(pi[i.mode],i.typeIds||[],e||[])}case"fixedsizebinary":{const i=t.type;return new Q_(i.byteWidth)}case"fixedsizelist":{const i=t.type;return new ap(i.listSize,(e||[])[0])}case"map":{const i=t.type;return new op((e||[])[0],i.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var Qf=cs,hce=Qp,pce=Pr;class Ri{constructor(e,n,i,s){this._version=n,this._headerType=i,this.body=new Uint8Array(0),s&&(this._createHeader=()=>s),this._bodyLength=typeof e=="number"?e:e.low}static fromJSON(e,n){const i=new Ri(0,xs.V4,n);return i._createHeader=gce(e,n),i}static decode(e){e=new pce(Nt(e));const n=ri.getRootAsMessage(e),i=n.bodyLength(),s=n.version(),o=n.headerType(),c=new Ri(i,s,o);return c._createHeader=_ce(n,o),c}static encode(e){const n=new hce;let i=-1;return e.isSchema()?i=$t.encode(n,e.header()):e.isRecordBatch()?i=cr.encode(n,e.header()):e.isDictionaryBatch()&&(i=Ro.encode(n,e.header())),ri.startMessage(n),ri.addVersion(n,xs.V4),ri.addHeader(n,i),ri.addHeaderType(n,e.headerType),ri.addBodyLength(n,new Qf(e.bodyLength,0)),ri.finishMessageBuffer(n,ri.endMessage(n)),n.asUint8Array()}static from(e,n=0){if(e instanceof $t)return new Ri(0,xs.V4,Zt.Schema,e);if(e instanceof cr)return new Ri(n,xs.V4,Zt.RecordBatch,e);if(e instanceof Ro)return new Ri(n,xs.V4,Zt.DictionaryBatch,e);throw new Error(`Unrecognized Message header: ${e}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Zt.Schema}isRecordBatch(){return this.headerType===Zt.RecordBatch}isDictionaryBatch(){return this.headerType===Zt.DictionaryBatch}}class cr{constructor(e,n,i){this._nodes=n,this._buffers=i,this._length=typeof e=="number"?e:e.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}}class Ro{constructor(e,n,i=!1){this._data=e,this._isDelta=i,this._id=typeof n=="number"?n:n.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}}class yo{constructor(e,n){this.offset=typeof e=="number"?e:e.low,this.length=typeof n=="number"?n:n.low}}class Ou{constructor(e,n){this.length=typeof e=="number"?e:e.low,this.nullCount=typeof n=="number"?n:n.low}}function gce(t,e){return()=>{switch(e){case Zt.Schema:return $t.fromJSON(t);case Zt.RecordBatch:return cr.fromJSON(t);case Zt.DictionaryBatch:return Ro.fromJSON(t)}throw new Error(`Unrecognized Message type: { name: ${Zt[e]}, type: ${e} }`)}}function _ce(t,e){return()=>{switch(e){case Zt.Schema:return $t.decode(t.header(new Gn));case Zt.RecordBatch:return cr.decode(t.header(new mr),t.version());case Zt.DictionaryBatch:return Ro.decode(t.header(new vl),t.version())}throw new Error(`Unrecognized Message type: { name: ${Zt[e]}, type: ${e} }`)}}Ut.encode=kce;Ut.decode=xce;Ut.fromJSON=uce;$t.encode=Bce;$t.decode=yce;$t.fromJSON=lce;cr.encode=Ice;cr.decode=mce;cr.fromJSON=kq;Ro.encode=Fce;Ro.decode=wce;Ro.fromJSON=cce;Ou.encode=Oce;Ou.decode=Tce;yo.encode=Mce;yo.decode=bce;function yce(t,e=new Map){const n=Sce(t,e);return new $t(n,w0(t),e)}function mce(t,e=xs.V4){if(t.compression()!==null)throw new Error("Record batch compression not implemented");return new cr(t.length(),vce(t),Ece(t,e))}function wce(t,e=xs.V4){return new Ro(cr.decode(t.data(),e),t.id(),t.isDelta())}function bce(t){return new yo(t.offset(),t.length())}function Tce(t){return new Ou(t.length(),t.nullCount())}function vce(t){const e=[];for(let n,i=-1,s=-1,o=t.nodesLength();++i<o;)(n=t.nodes(i))&&(e[++s]=Ou.decode(n));return e}function Ece(t,e){const n=[];for(let i,s=-1,o=-1,c=t.buffersLength();++s<c;)(i=t.buffers(s))&&(e<xs.V4&&(i.bb_pos+=8*(s+1)),n[++o]=yo.decode(i));return n}function Sce(t,e){const n=[];for(let i,s=-1,o=-1,c=t.fieldsLength();++s<c;)(i=t.fields(s))&&(n[++o]=Ut.decode(i,e));return n}function cD(t,e){const n=[];for(let i,s=-1,o=-1,c=t.childrenLength();++s<c;)(i=t.children(s))&&(n[++o]=Ut.decode(i,e));return n}function xce(t,e){let n,i,s,o,c,d;return!e||!(d=t.dictionary())?(s=fD(t,cD(t,e)),i=new Ut(t.name(),s,t.nullable(),w0(t))):e.has(n=d.id().low)?(o=(o=d.indexType())?dD(o):new Qc,c=new zl(e.get(n),o,n,d.isOrdered()),i=new Ut(t.name(),c,t.nullable(),w0(t))):(o=(o=d.indexType())?dD(o):new Qc,e.set(n,s=fD(t,cD(t,e))),c=new zl(s,o,n,d.isOrdered()),i=new Ut(t.name(),c,t.nullable(),w0(t))),i||null}function w0(t){const e=new Map;if(t)for(let n,i,s=-1,o=Math.trunc(t.customMetadataLength());++s<o;)(n=t.customMetadata(s))&&(i=n.key())!=null&&e.set(i,n.value());return e}function dD(t){return new Vi(t.isSigned(),t.bitWidth())}function fD(t,e){const n=t.typeType();switch(n){case Et.NONE:return new Oo;case Et.Null:return new Oo;case Et.Binary:return new K_;case Et.Utf8:return new sp;case Et.Bool:return new rp;case Et.List:return new Kf((e||[])[0]);case Et.Struct_:return new oi(e||[])}switch(n){case Et.Int:{const i=t.type(new ir);return new Vi(i.isSigned(),i.bitWidth())}case Et.FloatingPoint:{const i=t.type(new so);return new jl(i.precision())}case Et.Decimal:{const i=t.type(new ms);return new J_(i.scale(),i.precision(),i.bitWidth())}case Et.Date:{const i=t.type(new to);return new Yf(i.unit())}case Et.Time:{const i=t.type(new Tr);return new Mo(i.unit(),i.bitWidth())}case Et.Timestamp:{const i=t.type(new vr);return new Ul(i.unit(),i.timezone())}case Et.Interval:{const i=t.type(new ro);return new Xf(i.unit())}case Et.Union:{const i=t.type(new vs);return new Zc(i.mode(),i.typeIdsArray()||[],e||[])}case Et.FixedSizeBinary:{const i=t.type(new no);return new Q_(i.byteWidth())}case Et.FixedSizeList:{const i=t.type(new io);return new ap(i.listSize(),(e||[])[0])}case Et.Map:{const i=t.type(new ao);return new op((e||[])[0],i.keysSorted())}}throw new Error(`Unrecognized type: "${Et[n]}" (${n})`)}function Bce(t,e){const n=e.fields.map(o=>Ut.encode(t,o));Gn.startFieldsVector(t,n.length);const i=Gn.createFieldsVector(t,n),s=e.metadata&&e.metadata.size>0?Gn.createCustomMetadataVector(t,[...e.metadata].map(([o,c])=>{const d=t.createString(`${o}`),f=t.createString(`${c}`);return Wn.startKeyValue(t),Wn.addKey(t,d),Wn.addValue(t,f),Wn.endKeyValue(t)})):-1;return Gn.startSchema(t),Gn.addFields(t,i),Gn.addEndianness(t,Ace?dp.Little:dp.Big),s!==-1&&Gn.addCustomMetadata(t,s),Gn.endSchema(t)}function kce(t,e){let n=-1,i=-1,s=-1;const o=e.type;let c=e.typeId;Ye.isDictionary(o)?(c=o.dictionary.typeId,s=kx.visit(o,t),i=kx.visit(o.dictionary,t)):i=kx.visit(o,t);const d=(o.children||[]).map(a=>Ut.encode(t,a)),f=Mi.createChildrenVector(t,d),u=e.metadata&&e.metadata.size>0?Mi.createCustomMetadataVector(t,[...e.metadata].map(([a,_])=>{const w=t.createString(`${a}`),m=t.createString(`${_}`);return Wn.startKeyValue(t),Wn.addKey(t,w),Wn.addValue(t,m),Wn.endKeyValue(t)})):-1;return e.name&&(n=t.createString(e.name)),Mi.startField(t),Mi.addType(t,i),Mi.addTypeType(t,c),Mi.addChildren(t,f),Mi.addNullable(t,!!e.nullable),n!==-1&&Mi.addName(t,n),s!==-1&&Mi.addDictionary(t,s),u!==-1&&Mi.addCustomMetadata(t,u),Mi.endField(t)}function Ice(t,e){const n=e.nodes||[],i=e.buffers||[];mr.startNodesVector(t,n.length);for(const c of n.slice().reverse())Ou.encode(t,c);const s=t.endVector();mr.startBuffersVector(t,i.length);for(const c of i.slice().reverse())yo.encode(t,c);const o=t.endVector();return mr.startRecordBatch(t),mr.addLength(t,new Qf(e.length,0)),mr.addNodes(t,s),mr.addBuffers(t,o),mr.endRecordBatch(t)}function Fce(t,e){const n=cr.encode(t,e.data);return vl.startDictionaryBatch(t),vl.addId(t,new Qf(e.id,0)),vl.addIsDelta(t,e.isDelta),vl.addData(t,n),vl.endDictionaryBatch(t)}function Oce(t,e){return Bq.createFieldNode(t,new Qf(e.length,0),new Qf(e.nullCount,0))}function Mce(t,e){return xq.createBuffer(t,new Qf(e.offset,0),new Qf(e.length,0))}const Ace=(()=>{const t=new ArrayBuffer(2);return new DataView(t).setInt16(0,256,!0),new Int16Array(t)[0]===256})(),RO=t=>`Expected ${Zt[t]} Message in stream, but was null or length 0.`,LO=t=>`Header pointer of flatbuffer-encoded ${Zt[t]} Message is null or length 0.`,Oq=(t,e)=>`Expected to read ${t} metadata bytes, but only read ${e}.`,Mq=(t,e)=>`Expected to read ${t} bytes for message body, but only read ${e}.`;class PO{constructor(e){this.source=e instanceof ty?e:new ty(e)}[Symbol.iterator](){return this}next(){let e;return(e=this.readMetadataLength()).done||e.value===-1&&(e=this.readMetadataLength()).done||(e=this.readMetadata(e.value)).done?kn:e}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}readMessage(e){let n;if((n=this.next()).done)return null;if(e!=null&&n.value.headerType!==e)throw new Error(RO(e));return n.value}readMessageBody(e){if(e<=0)return new Uint8Array(0);const n=Nt(this.source.read(e));if(n.byteLength<e)throw new Error(Mq(e,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()}readSchema(e=!1){const n=Zt.Schema,i=this.readMessage(n),s=i==null?void 0:i.header();if(e&&!s)throw new Error(LO(n));return s}readMetadataLength(){const e=this.source.read(tE),n=e&&new Pr(e),i=(n==null?void 0:n.readInt32(0))||0;return{done:i===0,value:i}}readMetadata(e){const n=this.source.read(e);if(!n)return kn;if(n.byteLength<e)throw new Error(Oq(e,n.byteLength));return{done:!1,value:Ri.decode(n)}}}class Aq{constructor(e,n){this.source=e instanceof ed?e:L$(e)?new HT(e,n):new ed(e)}[Symbol.asyncIterator](){return this}next(){return ye(this,void 0,void 0,function*(){let e;return(e=yield this.readMetadataLength()).done||e.value===-1&&(e=yield this.readMetadataLength()).done||(e=yield this.readMetadata(e.value)).done?kn:e})}throw(e){return ye(this,void 0,void 0,function*(){return yield this.source.throw(e)})}return(e){return ye(this,void 0,void 0,function*(){return yield this.source.return(e)})}readMessage(e){return ye(this,void 0,void 0,function*(){let n;if((n=yield this.next()).done)return null;if(e!=null&&n.value.headerType!==e)throw new Error(RO(e));return n.value})}readMessageBody(e){return ye(this,void 0,void 0,function*(){if(e<=0)return new Uint8Array(0);const n=Nt(yield this.source.read(e));if(n.byteLength<e)throw new Error(Mq(e,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()})}readSchema(e=!1){return ye(this,void 0,void 0,function*(){const n=Zt.Schema,i=yield this.readMessage(n),s=i==null?void 0:i.header();if(e&&!s)throw new Error(LO(n));return s})}readMetadataLength(){return ye(this,void 0,void 0,function*(){const e=yield this.source.read(tE),n=e&&new Pr(e),i=(n==null?void 0:n.readInt32(0))||0;return{done:i===0,value:i}})}readMetadata(e){return ye(this,void 0,void 0,function*(){const n=yield this.source.read(e);if(!n)return kn;if(n.byteLength<e)throw new Error(Oq(e,n.byteLength));return{done:!1,value:Ri.decode(n)}})}}class Nq extends PO{constructor(e){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=e instanceof iD?e:new iD(e)}next(){const{_json:e}=this;if(!this._schema)return this._schema=!0,{done:!1,value:Ri.fromJSON(e.schema,Zt.Schema)};if(this._dictionaryIndex<e.dictionaries.length){const n=e.dictionaries[this._dictionaryIndex++];return this._body=n.data.columns,{done:!1,value:Ri.fromJSON(n,Zt.DictionaryBatch)}}if(this._batchIndex<e.batches.length){const n=e.batches[this._batchIndex++];return this._body=n.columns,{done:!1,value:Ri.fromJSON(n,Zt.RecordBatch)}}return this._body=[],kn}readMessageBody(e){return n(this._body);function n(i){return(i||[]).reduce((s,o)=>[...s,...o.VALIDITY&&[o.VALIDITY]||[],...o.TYPE&&[o.TYPE]||[],...o.OFFSET&&[o.OFFSET]||[],...o.DATA&&[o.DATA]||[],...n(o.children)],[])}}readMessage(e){let n;if((n=this.next()).done)return null;if(e!=null&&n.value.headerType!==e)throw new Error(RO(e));return n.value}readSchema(){const e=Zt.Schema,n=this.readMessage(e),i=n==null?void 0:n.header();if(!n||!i)throw new Error(LO(e));return i}}const tE=4,Ok="ARROW1",iy=new Uint8Array(Ok.length);for(let t=0;t<Ok.length;t+=1)iy[t]=Ok.codePointAt(t);function DO(t,e=0){for(let n=-1,i=iy.length;++n<i;)if(iy[n]!==t[e+n])return!1;return!0}const im=iy.length,Cq=im+tE,Nce=im*2+tE;class Ar extends fO{constructor(e){super(),this._impl=e}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(e){return this._impl.throw(e)}return(e){return this._impl.return(e)}cancel(){return this._impl.cancel()}reset(e){return this._impl.reset(e),this._DOMStream=void 0,this._nodeStream=void 0,this}open(e){const n=this._impl.open(e);return Jc(n)?n.then(()=>this):this}readRecordBatch(e){return this._impl.isFile()?this._impl.readRecordBatch(e):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return tr.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return tr.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,n){throw new Error('"throughDOM" not available in this environment')}static from(e){return e instanceof Ar?e:Bk(e)?Lce(e):L$(e)?jce(e):Jc(e)?(()=>ye(this,void 0,void 0,function*(){return yield Ar.from(yield e)}))():P$(e)||C2(e)||D$(e)||Bu(e)?Dce(new ed(e)):Pce(new ty(e))}static readAll(e){return e instanceof Ar?e.isSync()?uD(e):hD(e):Bk(e)||ArrayBuffer.isView(e)||Zp(e)||R$(e)?uD(e):hD(e)}}class hp extends Ar{constructor(e){super(e),this._impl=e}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return Ln(this,arguments,function*(){yield Be(yield*Rc(Fs(this[Symbol.iterator]())))})}}class sy extends Ar{constructor(e){super(e),this._impl=e}readAll(){var e,n;return ye(this,void 0,void 0,function*(){const i=new Array;try{for(var s=Fs(this),o;o=yield s.next(),!o.done;){const c=o.value;i.push(c)}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=s.return)&&(yield n.call(s))}finally{if(e)throw e.error}}return i})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class nE extends hp{constructor(e){super(e),this._impl=e}}class Rq extends sy{constructor(e){super(e),this._impl=e}}class Lq{constructor(e=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=e}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(e){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=e,this.dictionaries=new Map,this}_loadRecordBatch(e,n){const i=this._loadVectors(e,n,this.schema.fields),s=Qe({type:new oi(this.schema.fields),length:e.length,children:i});return new An(this.schema,s)}_loadDictionaryBatch(e,n){const{id:i,isDelta:s}=e,{dictionaries:o,schema:c}=this,d=o.get(i);if(s||!d){const f=c.dictionaries.get(i),u=this._loadVectors(e.data,n,[f]);return(d&&s?d.concat(new He(u)):new He(u)).memoize()}return d.memoize()}_loadVectors(e,n,i){return new Z5(n,e.nodes,e.buffers,this.dictionaries).visitMany(i)}}class KT extends Lq{constructor(e,n){super(n),this._reader=Bk(e)?new Nq(this._handle=e):new PO(this._handle=e)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(e){return this.closed||(this.autoDestroy=Dq(this,e),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(e):kn}return(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(e):kn}next(){if(this.closed)return kn;let e;const{_reader:n}=this;for(;e=this._readNextMessageAndValidate();)if(e.isSchema())this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;const i=e.header(),s=n.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(i,s)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;const i=e.header(),s=n.readMessageBody(e.bodyLength),o=this._loadDictionaryBatch(i,s);this.dictionaries.set(i.id,o)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new CO(this.schema)}):this.return()}_readNextMessageAndValidate(e){return this._reader.readMessage(e)}}class JT extends Lq{constructor(e,n){super(n),this._reader=new Aq(this._handle=e)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return ye(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(e){return ye(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=Dq(this,e),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(e){return ye(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(e):kn})}return(e){return ye(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(e):kn})}next(){return ye(this,void 0,void 0,function*(){if(this.closed)return kn;let e;const{_reader:n}=this;for(;e=yield this._readNextMessageAndValidate();)if(e.isSchema())yield this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;const i=e.header(),s=yield n.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(i,s)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;const i=e.header(),s=yield n.readMessageBody(e.bodyLength),o=this._loadDictionaryBatch(i,s);this.dictionaries.set(i.id,o)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new CO(this.schema)}):yield this.return()})}_readNextMessageAndValidate(e){return ye(this,void 0,void 0,function*(){return yield this._reader.readMessage(e)})}}class Pq extends KT{constructor(e,n){super(e instanceof sD?e:new sD(e),n)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(e){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const n of this._footer.dictionaryBatches())n&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(e)}readRecordBatch(e){var n;if(this.closed)return null;this._footer||this.open();const i=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(e);if(i&&this._handle.seek(i.offset)){const s=this._reader.readMessage(Zt.RecordBatch);if(s!=null&&s.isRecordBatch()){const o=s.header(),c=this._reader.readMessageBody(s.bodyLength);return this._loadRecordBatch(o,c)}}return null}_readDictionaryBatch(e){var n;const i=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(e);if(i&&this._handle.seek(i.offset)){const s=this._reader.readMessage(Zt.DictionaryBatch);if(s!=null&&s.isDictionaryBatch()){const o=s.header(),c=this._reader.readMessageBody(s.bodyLength),d=this._loadDictionaryBatch(o,c);this.dictionaries.set(o.id,d)}}}_readFooter(){const{_handle:e}=this,n=e.size-Cq,i=e.readInt32(n),s=e.readAt(n-i,i);return ey.decode(s)}_readNextMessageAndValidate(e){var n;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const i=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(this._recordBatchIndex);if(i&&this._handle.seek(i.offset))return this._reader.readMessage(e)}return null}}class Cce extends JT{constructor(e,...n){const i=typeof n[0]!="number"?n.shift():void 0,s=n[0]instanceof Map?n.shift():void 0;super(e instanceof HT?e:new HT(e,i),s)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}open(e){const n=Object.create(null,{open:{get:()=>super.open}});return ye(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const i of this._footer.dictionaryBatches())i&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield n.open.call(this,e)})}readRecordBatch(e){var n;return ye(this,void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());const i=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(e);if(i&&(yield this._handle.seek(i.offset))){const s=yield this._reader.readMessage(Zt.RecordBatch);if(s!=null&&s.isRecordBatch()){const o=s.header(),c=yield this._reader.readMessageBody(s.bodyLength);return this._loadRecordBatch(o,c)}}return null})}_readDictionaryBatch(e){var n;return ye(this,void 0,void 0,function*(){const i=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(e);if(i&&(yield this._handle.seek(i.offset))){const s=yield this._reader.readMessage(Zt.DictionaryBatch);if(s!=null&&s.isDictionaryBatch()){const o=s.header(),c=yield this._reader.readMessageBody(s.bodyLength),d=this._loadDictionaryBatch(o,c);this.dictionaries.set(o.id,d)}}})}_readFooter(){return ye(this,void 0,void 0,function*(){const{_handle:e}=this;e._pending&&(yield e._pending);const n=e.size-Cq,i=yield e.readInt32(n),s=yield e.readAt(n-i,i);return ey.decode(s)})}_readNextMessageAndValidate(e){return ye(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=this._footer.getRecordBatch(this._recordBatchIndex);if(n&&(yield this._handle.seek(n.offset)))return yield this._reader.readMessage(e)}return null})}}class Rce extends KT{constructor(e,n){super(e,n)}_loadVectors(e,n,i){return new qle(n,e.nodes,e.buffers,this.dictionaries).visitMany(i)}}function Dq(t,e){return e&&typeof e.autoDestroy=="boolean"?e.autoDestroy:t.autoDestroy}function*uD(t){const e=Ar.from(t);try{if(!e.open({autoDestroy:!1}).closed)do yield e;while(!e.reset().open().closed)}finally{e.cancel()}}function hD(t){return Ln(this,arguments,function*(){const n=yield Be(Ar.from(t));try{if(!(yield Be(n.open({autoDestroy:!1}))).closed)do yield yield Be(n);while(!(yield Be(n.reset().open())).closed)}finally{yield Be(n.cancel())}})}function Lce(t){return new hp(new Rce(t))}function Pce(t){const e=t.peek(im+7&-8);return e&&e.byteLength>=4?DO(e)?new nE(new Pq(t.read())):new hp(new KT(t)):new hp(new KT(function*(){}()))}function Dce(t){return ye(this,void 0,void 0,function*(){const e=yield t.peek(im+7&-8);return e&&e.byteLength>=4?DO(e)?new nE(new Pq(yield t.read())):new sy(new JT(t)):new sy(new JT(function(){return Ln(this,arguments,function*(){})}()))})}function jce(t){return ye(this,void 0,void 0,function*(){const{size:e}=yield t.stat(),n=new HT(t,e);return e>=Nce&&DO(yield n.readAt(0,im+7&-8))?new Rq(new Cce(n)):new sy(new JT(n))})}class jn extends Ft{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(...e){const n=s=>s.flatMap(o=>Array.isArray(o)?n(o):o instanceof An?o.data.children:o.data),i=new jn;return i.visitMany(n(e)),i}visit(e){if(e instanceof He)return this.visitMany(e.data),this;const{type:n}=e;if(!Ye.isDictionary(n)){const{length:i,nullCount:s}=e;if(i>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");Ye.isNull(n)||va.call(this,s<=0?new Uint8Array(0):X1(e.offset,i,e.nullBitmap)),this.nodes.push(new Ou(i,s))}return super.visit(e)}visitNull(e){return this}visitDictionary(e){return this.visit(e.clone(e.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function va(t){const e=t.byteLength+7&-8;return this.buffers.push(t),this.bufferRegions.push(new yo(this._byteLength,e)),this._byteLength+=e,this}function Uce(t){const{type:e,length:n,typeIds:i,valueOffsets:s}=t;if(va.call(this,i),e.mode===pi.Sparse)return Mk.call(this,t);if(e.mode===pi.Dense){if(t.offset<=0)return va.call(this,s),Mk.call(this,t);{const o=i.reduce((a,_)=>Math.max(a,_),i[0]),c=new Int32Array(o+1),d=new Int32Array(o+1).fill(-1),f=new Int32Array(n),u=q1(-s[0],n,s);for(let a,_,w=-1;++w<n;)(_=d[a=i[w]])===-1&&(_=d[a]=u[a]),f[w]=u[w]-_,++c[a];va.call(this,f);for(let a,_=-1,w=e.children.length;++_<w;)if(a=t.children[_]){const m=e.typeIds[_],l=Math.min(n,c[m]);this.visit(a.slice(d[m],l))}}}return this}function zce(t){let e;return t.nullCount>=t.length?va.call(this,new Uint8Array(0)):(e=t.values)instanceof Uint8Array?va.call(this,X1(t.offset,t.length,e)):va.call(this,Z_(t.values))}function kd(t){return va.call(this,t.values.subarray(0,t.length*t.stride))}function jq(t){const{length:e,values:n,valueOffsets:i}=t,s=i[0],o=i[e],c=Math.min(o-s,n.byteLength-s);return va.call(this,q1(-i[0],e,i)),va.call(this,n.subarray(s,s+c)),this}function jO(t){const{length:e,valueOffsets:n}=t;return n&&va.call(this,q1(n[0],e,n)),this.visit(t.children[0])}function Mk(t){return this.visitMany(t.type.children.map((e,n)=>t.children[n]).filter(Boolean))[0]}jn.prototype.visitBool=zce;jn.prototype.visitInt=kd;jn.prototype.visitFloat=kd;jn.prototype.visitUtf8=jq;jn.prototype.visitBinary=jq;jn.prototype.visitFixedSizeBinary=kd;jn.prototype.visitDate=kd;jn.prototype.visitTimestamp=kd;jn.prototype.visitTime=kd;jn.prototype.visitDecimal=kd;jn.prototype.visitList=jO;jn.prototype.visitStruct=Mk;jn.prototype.visitUnion=Uce;jn.prototype.visitInterval=kd;jn.prototype.visitFixedSizeList=jO;jn.prototype.visitMap=jO;class $ce extends Ft{visit(e){return e==null?void 0:super.visit(e)}visitNull({typeId:e}){return{name:Et[e].toLowerCase()}}visitInt({typeId:e,bitWidth:n,isSigned:i}){return{name:Et[e].toLowerCase(),bitWidth:n,isSigned:i}}visitFloat({typeId:e,precision:n}){return{name:Et[e].toLowerCase(),precision:Zn[n]}}visitBinary({typeId:e}){return{name:Et[e].toLowerCase()}}visitBool({typeId:e}){return{name:Et[e].toLowerCase()}}visitUtf8({typeId:e}){return{name:Et[e].toLowerCase()}}visitDecimal({typeId:e,scale:n,precision:i,bitWidth:s}){return{name:Et[e].toLowerCase(),scale:n,precision:i,bitWidth:s}}visitDate({typeId:e,unit:n}){return{name:Et[e].toLowerCase(),unit:Ps[n]}}visitTime({typeId:e,unit:n,bitWidth:i}){return{name:Et[e].toLowerCase(),unit:ct[n],bitWidth:i}}visitTimestamp({typeId:e,timezone:n,unit:i}){return{name:Et[e].toLowerCase(),unit:ct[i],timezone:n}}visitInterval({typeId:e,unit:n}){return{name:Et[e].toLowerCase(),unit:Dr[n]}}visitList({typeId:e}){return{name:Et[e].toLowerCase()}}visitStruct({typeId:e}){return{name:Et[e].toLowerCase()}}visitUnion({typeId:e,mode:n,typeIds:i}){return{name:Et[e].toLowerCase(),mode:pi[n],typeIds:[...i]}}visitDictionary(e){return this.visit(e.dictionary)}visitFixedSizeBinary({typeId:e,byteWidth:n}){return{name:Et[e].toLowerCase(),byteWidth:n}}visitFixedSizeList({typeId:e,listSize:n}){return{name:Et[e].toLowerCase(),listSize:n}}visitMap({typeId:e,keysSorted:n}){return{name:Et[e].toLowerCase(),keysSorted:n}}}class iE extends Ft{static assemble(...e){const n=new iE;return e.map(({schema:i,data:s})=>n.visitMany(i.fields,s.children))}visit({name:e},n){const{length:i}=n,{offset:s,nullCount:o,nullBitmap:c}=n,d=Ye.isDictionary(n.type)?n.type.indices:n.type,f=Object.assign([],n.buffers,{[sa.VALIDITY]:void 0});return Object.assign({name:e,count:i,VALIDITY:Ye.isNull(d)?void 0:o<=0?Array.from({length:i},()=>1):[...new lp(c,s,i,null,oO)]},super.visit(n.clone(d,s,i,0,f)))}visitNull(){return{}}visitBool({values:e,offset:n,length:i}){return{DATA:[...new lp(e,n,i,null,Y1)]}}visitInt(e){return{DATA:e.type.bitWidth<64?[...e.values]:[...Mg(e.values,2)]}}visitFloat(e){return{DATA:[...e.values]}}visitUtf8(e){return{DATA:[...new He([e])],OFFSET:[...e.valueOffsets]}}visitBinary(e){return{DATA:[...pD(new He([e]))],OFFSET:[...e.valueOffsets]}}visitFixedSizeBinary(e){return{DATA:[...pD(new He([e]))]}}visitDate(e){return{DATA:e.type.unit===Ps.DAY?[...e.values]:[...Mg(e.values,2)]}}visitTimestamp(e){return{DATA:[...Mg(e.values,2)]}}visitTime(e){return{DATA:e.type.unit<ct.MICROSECOND?[...e.values]:[...Mg(e.values,2)]}}visitDecimal(e){return{DATA:[...Mg(e.values,4)]}}visitList(e){return{OFFSET:[...e.valueOffsets],children:this.visitMany(e.type.children,e.children)}}visitStruct(e){return{children:this.visitMany(e.type.children,e.children)}}visitUnion(e){return{TYPE:[...e.typeIds],OFFSET:e.type.mode===pi.Dense?[...e.valueOffsets]:void 0,children:this.visitMany(e.type.children,e.children)}}visitInterval(e){return{DATA:[...e.values]}}visitFixedSizeList(e){return{children:this.visitMany(e.type.children,e.children)}}visitMap(e){return{OFFSET:[...e.valueOffsets],children:this.visitMany(e.type.children,e.children)}}}function*pD(t){for(const e of t)yield e.reduce((n,i)=>`${n}${("0"+(i&255).toString(16)).slice(-2)}`,"").toUpperCase()}function*Mg(t,e){const n=new Uint32Array(t.buffer);for(let i=-1,s=n.length/e;++i<s;)yield`${Yy.new(n.subarray((i+0)*e,(i+1)*e),!1)}`}class sm extends fO{constructor(e){super(),this._position=0,this._started=!1,this._sink=new Ch,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Ls(e)||(e={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof e.autoDestroy=="boolean"?e.autoDestroy:!0,this._writeLegacyIpcFormat=typeof e.writeLegacyIpcFormat=="boolean"?e.writeLegacyIpcFormat:!1}static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,n){throw new Error('"throughDOM" not available in this environment')}toString(e=!1){return this._sink.toString(e)}toUint8Array(e=!1){return this._sink.toUint8Array(e)}writeAll(e){return Jc(e)?e.then(n=>this.writeAll(n)):Bu(e)?$O(this,e):zO(this,e)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(e){return this._sink.toDOMStream(e)}toNodeStream(e){return this._sink.toNodeStream(e)}close(){return this.reset()._sink.close()}abort(e){return this.reset()._sink.abort(e)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(e=this._sink,n=null){return e===this._sink||e instanceof Ch?this._sink=e:(this._sink=new Ch,e&&vae(e)?this.toDOMStream({type:"bytes"}).pipeTo(e):e&&Eae(e)&&this.toNodeStream({objectMode:!1}).pipe(e)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!WT(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(e){let n=null;if(this._sink){if(e==null)return this.finish()&&void 0;if(e instanceof Yn&&!(n=e.schema))return this.finish()&&void 0;if(e instanceof An&&!(n=e.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!WT(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}e instanceof An?e instanceof CO||this._writeRecordBatch(e):e instanceof Yn?this.writeAll(e.batches):Zp(e)&&this.writeAll(e)}_writeMessage(e,n=8){const i=n-1,s=Ri.encode(e),o=s.byteLength,c=this._writeLegacyIpcFormat?4:8,d=o+c+i&~i,f=d-o-c;return e.headerType===Zt.RecordBatch?this._recordBatchBlocks.push(new No(d,e.bodyLength,this._position)):e.headerType===Zt.DictionaryBatch&&this._dictionaryBlocks.push(new No(d,e.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(d-c)),o>0&&this._write(s),this._writePadding(f)}_write(e){if(this._started){const n=Nt(e);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(e){return this._writeMessage(Ri.from(e))}_writeFooter(e){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(iy)}_writePadding(e){return e>0?this._write(new Uint8Array(e)):this}_writeRecordBatch(e){const{byteLength:n,nodes:i,bufferRegions:s,buffers:o}=jn.assemble(e),c=new cr(e.numRows,i,s),d=Ri.from(c,n);return this._writeDictionaries(e)._writeMessage(d)._writeBodyBuffers(o)}_writeDictionaryBatch(e,n,i=!1){this._dictionaryDeltaOffsets.set(n,e.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:s,nodes:o,bufferRegions:c,buffers:d}=jn.assemble(new He([e])),f=new cr(e.length,o,c),u=new Ro(f,n,i),a=Ri.from(u,s);return this._writeMessage(a)._writeBodyBuffers(d)}_writeBodyBuffers(e){let n,i,s;for(let o=-1,c=e.length;++o<c;)(n=e[o])&&(i=n.byteLength)>0&&(this._write(n),(s=(i+7&-8)-i)>0&&this._writePadding(s));return this}_writeDictionaries(e){for(let[n,i]of e.dictionaries){let s=this._dictionaryDeltaOffsets.get(n)||0;if(s===0||(i=i==null?void 0:i.slice(s)).length>0)for(const o of i.data)this._writeDictionaryBatch(o,n,s>0),s+=o.length}return this}}class rm extends sm{static writeAll(e,n){const i=new rm(n);return Jc(e)?e.then(s=>i.writeAll(s)):Bu(e)?$O(i,e):zO(i,e)}}class am extends sm{static writeAll(e){const n=new am;return Jc(e)?e.then(i=>n.writeAll(i)):Bu(e)?$O(n,e):zO(n,e)}constructor(){super(),this._autoDestroy=!0}_writeSchema(e){return this._writeMagic()._writePadding(2)}_writeFooter(e){const n=ey.encode(new ey(e,xs.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(e)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}class UO extends sm{constructor(){super(),this._autoDestroy=!0,this._recordBatches=[],this._dictionaries=[]}static writeAll(e){return new UO().writeAll(e)}_writeMessage(){return this}_writeFooter(e){return this}_writeSchema(e){return this._write(`{
  "schema": ${JSON.stringify({fields:e.fields.map(n=>Uq(n))},null,2)}`)}_writeDictionaries(e){return e.dictionaries.size>0&&this._dictionaries.push(e),this}_writeDictionaryBatch(e,n,i=!1){return this._dictionaryDeltaOffsets.set(n,e.length+(this._dictionaryDeltaOffsets.get(n)||0)),this._write(this._dictionaryBlocks.length===0?"    ":`,
    `),this._write(`${qce(e,n,i)}`),this._dictionaryBlocks.push(new No(0,0,0)),this}_writeRecordBatch(e){return this._writeDictionaries(e),this._recordBatches.push(e),this}close(){if(this._dictionaries.length>0){this._write(`,
  "dictionaries": [
`);for(const e of this._dictionaries)super._writeDictionaries(e);this._write(`
  ]`)}if(this._recordBatches.length>0){for(let e=-1,n=this._recordBatches.length;++e<n;)this._write(e===0?`,
  "batches": [
    `:`,
    `),this._write(`${Gce(this._recordBatches[e])}`),this._recordBatchBlocks.push(new No(0,0,0));this._write(`
  ]`)}return this._schema&&this._write(`
}`),this._dictionaries=[],this._recordBatches=[],super.close()}}function zO(t,e){let n=e;e instanceof Yn&&(n=e.batches,t.reset(void 0,e.schema));for(const i of n)t.write(i);return t.finish()}function $O(t,e){var n,i,s,o;return ye(this,void 0,void 0,function*(){try{for(n=Fs(e);i=yield n.next(),!i.done;){const c=i.value;t.write(c)}}catch(c){s={error:c}}finally{try{i&&!i.done&&(o=n.return)&&(yield o.call(n))}finally{if(s)throw s.error}}return t.finish()})}function Uq({name:t,type:e,nullable:n}){const i=new $ce;return{name:t,nullable:n,type:i.visit(e),children:(e.children||[]).map(s=>Uq(s)),dictionary:Ye.isDictionary(e)?{id:e.id,isOrdered:e.isOrdered,indexType:i.visit(e.indices)}:void 0}}function qce(t,e,n=!1){const[i]=iE.assemble(new An({[e]:t}));return JSON.stringify({id:e,isDelta:n,data:{count:t.length,columns:i}},null,2)}function Gce(t){const[e]=iE.assemble(t);return JSON.stringify({count:t.numRows,columns:e},null,2)}function Vce(t,e){if(Bu(t))return Wce(t,e);if(Zp(t))return Hce(t,e);throw new Error("toDOMStream() must be called with an Iterable or AsyncIterable")}function Hce(t,e){let n=null;const i=(e==null?void 0:e.type)==="bytes"||!1,s=(e==null?void 0:e.highWaterMark)||Math.pow(2,24);return new ReadableStream(Object.assign(Object.assign({},e),{start(c){o(c,n||(n=t[Symbol.iterator]()))},pull(c){n?o(c,n):c.close()},cancel(){((n==null?void 0:n.return)&&n.return()||!0)&&(n=null)}}),Object.assign({highWaterMark:i?s:void 0},e));function o(c,d){let f,u=null,a=c.desiredSize||null;for(;!(u=d.next(i?a:null)).done;)if(ArrayBuffer.isView(u.value)&&(f=Nt(u.value))&&(a!=null&&i&&(a=a-f.byteLength+1),u.value=f),c.enqueue(u.value),a!=null&&--a<=0)return;c.close()}}function Wce(t,e){let n=null;const i=(e==null?void 0:e.type)==="bytes"||!1,s=(e==null?void 0:e.highWaterMark)||Math.pow(2,24);return new ReadableStream(Object.assign(Object.assign({},e),{start(c){return ye(this,void 0,void 0,function*(){yield o(c,n||(n=t[Symbol.asyncIterator]()))})},pull(c){return ye(this,void 0,void 0,function*(){n?yield o(c,n):c.close()})},cancel(){return ye(this,void 0,void 0,function*(){((n==null?void 0:n.return)&&(yield n.return())||!0)&&(n=null)})}}),Object.assign({highWaterMark:i?s:void 0},e));function o(c,d){return ye(this,void 0,void 0,function*(){let f,u=null,a=c.desiredSize||null;for(;!(u=yield d.next(i?a:null)).done;)if(ArrayBuffer.isView(u.value)&&(f=Nt(u.value))&&(a!=null&&i&&(a=a-f.byteLength+1),u.value=f),c.enqueue(u.value),a!=null&&--a<=0)return;c.close()})}}function Yce(t){return new Xce(t)}class Xce{constructor(e){this._numChunks=0,this._finished=!1,this._bufferedSize=0;const{["readableStrategy"]:n,["writableStrategy"]:i,["queueingStrategy"]:s="count"}=e,o=mae(e,["readableStrategy","writableStrategy","queueingStrategy"]);this._controller=null,this._builder=Jf(o),this._getSize=s!=="bytes"?gD:_D;const{["highWaterMark"]:c=s==="bytes"?Math.pow(2,14):1e3}=Object.assign({},n),{["highWaterMark"]:d=s==="bytes"?Math.pow(2,14):1e3}=Object.assign({},i);this.readable=new ReadableStream({cancel:()=>{this._builder.clear()},pull:f=>{this._maybeFlush(this._builder,this._controller=f)},start:f=>{this._maybeFlush(this._builder,this._controller=f)}},{highWaterMark:c,size:s!=="bytes"?gD:_D}),this.writable=new WritableStream({abort:()=>{this._builder.clear()},write:()=>{this._maybeFlush(this._builder,this._controller)},close:()=>{this._maybeFlush(this._builder.finish(),this._controller)}},{highWaterMark:d,size:f=>this._writeValueAndReturnChunkSize(f)})}_writeValueAndReturnChunkSize(e){const n=this._bufferedSize;return this._bufferedSize=this._getSize(this._builder.append(e)),this._bufferedSize-n}_maybeFlush(e,n){n!=null&&(this._bufferedSize>=n.desiredSize&&++this._numChunks&&this._enqueue(n,e.toVector()),e.finished&&((e.length>0||this._numChunks===0)&&++this._numChunks&&this._enqueue(n,e.toVector()),!this._finished&&(this._finished=!0)&&this._enqueue(n,null)))}_enqueue(e,n){this._bufferedSize=0,this._controller=null,n==null?e.close():e.enqueue(n)}}const gD=t=>{var e;return(e=t==null?void 0:t.length)!==null&&e!==void 0?e:0},_D=t=>{var e;return(e=t==null?void 0:t.byteLength)!==null&&e!==void 0?e:0};function qO(t,e){const n=new Ch;let i=null;const s=new ReadableStream({cancel(){return ye(this,void 0,void 0,function*(){yield n.close()})},start(d){return ye(this,void 0,void 0,function*(){yield c(d,i||(i=yield o()))})},pull(d){return ye(this,void 0,void 0,function*(){i?yield c(d,i):d.close()})}});return{writable:new WritableStream(n,Object.assign({highWaterMark:Math.pow(2,14)},t)),readable:s};function o(){return ye(this,void 0,void 0,function*(){return yield(yield Ar.from(n)).open(e)})}function c(d,f){return ye(this,void 0,void 0,function*(){let u=d.desiredSize,a=null;for(;!(a=yield f.next()).done;)if(d.enqueue(a.value),u!=null&&--u<=0)return;d.close()})}}function GO(t,e){const n=new this(t),i=new ed(n),s=new ReadableStream({cancel(){return ye(this,void 0,void 0,function*(){yield i.cancel()})},pull(c){return ye(this,void 0,void 0,function*(){yield o(c)})},start(c){return ye(this,void 0,void 0,function*(){yield o(c)})}},Object.assign({highWaterMark:Math.pow(2,14)},e));return{writable:new WritableStream(n,t),readable:s};function o(c){return ye(this,void 0,void 0,function*(){let d=null,f=c.desiredSize;for(;d=yield i.read(f||null);)if(c.enqueue(d),f!=null&&(f-=d.byteLength)<=0)return;c.close()})}}function zq(t){const e=Ar.from(t);return Jc(e)?e.then(n=>zq(n)):e.isAsync()?e.readAll().then(n=>new Yn(n)):new Yn(e.readAll())}function Kce(t,e="stream"){return(e==="stream"?rm:am).writeAll(t).toUint8Array(!0)}const Jce=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},soe),$le),Tle),boe),Jae),wle),{compareSchemas:WT,compareFields:Zle,compareTypes:bq});tr.toDOMStream=Vce;Xi.throughDOM=Yce;Ar.throughDOM=qO;nE.throughDOM=qO;hp.throughDOM=qO;sm.throughDOM=GO;am.throughDOM=GO;rm.throughDOM=GO;const Qce=Object.freeze(Object.defineProperty({__proto__:null,get DateUnit(){return Ps},get IntervalUnit(){return Dr},get MessageHeader(){return ny},get MetadataVersion(){return xs},get Precision(){return Zn},get TimeUnit(){return ct},get Type(){return te},get UnionMode(){return pi},get BufferType(){return sa},Data:Kt,makeData:Qe,DataType:Ye,Null:Oo,Bool:rp,Int:Vi,Int8:L2,Int16:P2,Int32:Qc,Int64:G1,Uint8:D2,Uint16:j2,Uint32:U2,Uint64:z2,Float:jl,Float16:c5,Float32:$2,Float64:V1,Utf8:sp,Binary:K_,FixedSizeBinary:Q_,Date_:Yf,DateDay:roe,DateMillisecond:d5,Timestamp:Ul,TimestampSecond:doe,TimestampMillisecond:foe,TimestampMicrosecond:uoe,TimestampNanosecond:hoe,Time:Mo,TimeSecond:aoe,TimeMillisecond:ooe,TimeMicrosecond:loe,TimeNanosecond:coe,Decimal:J_,List:Kf,Struct:oi,StructRow:H1,Union:Zc,DenseUnion:_oe,SparseUnion:yoe,Dictionary:zl,Interval:Xf,IntervalDayTime:poe,IntervalYearMonth:goe,FixedSizeList:ap,Map_:op,MapRow:Xy,Table:Yn,makeTable:sce,tableFromArrays:rce,Schema:$t,Field:Ut,Visitor:Ft,Vector:He,makeVector:K1,vectorFromArray:NO,tableFromJSON:ece,ByteStream:ty,AsyncByteStream:ed,AsyncByteQueue:Ch,RecordBatchReader:Ar,RecordBatchFileReader:nE,RecordBatchStreamReader:hp,AsyncRecordBatchFileReader:Rq,AsyncRecordBatchStreamReader:sy,RecordBatchWriter:sm,RecordBatchFileWriter:am,RecordBatchStreamWriter:rm,RecordBatchJSONWriter:UO,tableFromIPC:zq,tableToIPC:Kce,MessageReader:PO,AsyncMessageReader:Aq,JSONMessageReader:Nq,Message:Ri,RecordBatch:An,util:Jce,Builder:Xi,makeBuilder:Jf,builderThroughIterable:Tq,builderThroughAsyncIterable:tce,BinaryBuilder:pO,BoolBuilder:eq,DateBuilder:Jy,DateDayBuilder:gO,DateMillisecondBuilder:_O,DecimalBuilder:yO,DictionaryBuilder:tq,FixedSizeBinaryBuilder:mO,FixedSizeListBuilder:nq,FloatBuilder:Qy,Float16Builder:iq,Float32Builder:sq,Float64Builder:rq,IntervalBuilder:Zy,IntervalDayTimeBuilder:wO,IntervalYearMonthBuilder:bO,IntBuilder:Yo,Int8Builder:aq,Int16Builder:oq,Int32Builder:lq,Int64Builder:cq,Uint8Builder:dq,Uint16Builder:fq,Uint32Builder:uq,Uint64Builder:hq,ListBuilder:pq,MapBuilder:gq,NullBuilder:_q,StructBuilder:yq,TimestampBuilder:Iu,TimestampSecondBuilder:TO,TimestampMillisecondBuilder:vO,TimestampMicrosecondBuilder:EO,TimestampNanosecondBuilder:SO,TimeBuilder:Fu,TimeSecondBuilder:xO,TimeMillisecondBuilder:BO,TimeMicrosecondBuilder:kO,TimeNanosecondBuilder:IO,UnionBuilder:Z1,DenseUnionBuilder:wq,SparseUnionBuilder:mq,Utf8Builder:FO},Symbol.toStringTag,{value:"Module"}));var $q={exports:{}};const Zce=jQ(Qce);(function(t,e){(function(i,s){t.exports=s(Zce)})(PQ,function(n){return(()=>{var i={2190:c=>{c.exports=function(f,u,a){if(f.filter)return f.filter(u,a);if(f==null)throw new TypeError;if(typeof u!="function")throw new TypeError;for(var _=[],w=0;w<f.length;w++)if(!!d.call(f,w)){var m=f[w];u.call(a,m,w,f)&&_.push(m)}return _};var d=Object.prototype.hasOwnProperty},6314:(c,d,f)=>{var u=f(2190);c.exports=function(){return u(["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],function(_){return typeof f.g[_]=="function"})}},7123:(c,d,f)=>{f.r(d),f.d(d,{DbCon:()=>vt,default:()=>ge,Client:()=>b.Client,Processor:()=>b.Processor});var u=f(6729),a=f.n(u),_=f(2003),w=f(9539),m=f.n(w),l=f(2818),T=f(2607),b=f(4221),S=f(9262),x=f(5141),B=f(2033),M={};for(const q in l)["default","DbCon","Client","Processor"].indexOf(q)<0&&(M[q]=()=>l[q]);f.d(d,M);var F=f(4494),M={};for(const q in F)["default","DbCon","Client","Processor"].indexOf(q)<0&&(M[q]=()=>F[q]);f.d(d,M);var k=f(1396),M={};for(const q in k)["default","DbCon","Client","Processor"].indexOf(q)<0&&(M[q]=()=>k[q]);f.d(d,M);var M={};for(const q in T)["default","DbCon","Client","Processor"].indexOf(q)<0&&(M[q]=()=>T[q]);f.d(d,M);var A=f(3962),M={};for(const q in A)["default","DbCon","Client","Processor"].indexOf(q)<0&&(M[q]=()=>A[q]);f.d(d,M);var R=f(8764).Buffer;function P(q,G){var L=Object.keys(q);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(q);G&&(Y=Y.filter(function(Q){return Object.getOwnPropertyDescriptor(q,Q).enumerable})),L.push.apply(L,Y)}return L}function j(q){for(var G=1;G<arguments.length;G++){var L=arguments[G]!=null?arguments[G]:{};G%2?P(Object(L),!0).forEach(function(Y){se(q,Y,L[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(q,Object.getOwnPropertyDescriptors(L)):P(Object(L)).forEach(function(Y){Object.defineProperty(q,Y,Object.getOwnPropertyDescriptor(L,Y))})}return q}function D(q){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?D=function(L){return typeof L}:D=function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},D(q)}function z(q,G){return J(q)||W(q,G)||K(q,G)||$()}function $(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function K(q,G){if(!!q){if(typeof q=="string")return H(q,G);var L=Object.prototype.toString.call(q).slice(8,-1);if(L==="Object"&&q.constructor&&(L=q.constructor.name),L==="Map"||L==="Set")return Array.from(q);if(L==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(L))return H(q,G)}}function H(q,G){(G==null||G>q.length)&&(G=q.length);for(var L=0,Y=new Array(G);L<G;L++)Y[L]=q[L];return Y}function W(q,G){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(q)))){var L=[],Y=!0,Q=!1,ae=void 0;try{for(var re=q[Symbol.iterator](),_e;!(Y=(_e=re.next()).done)&&(L.push(_e.value),!(G&&L.length===G));Y=!0);}catch(Ee){Q=!0,ae=Ee}finally{try{!Y&&re.return!=null&&re.return()}finally{if(Q)throw ae}}return L}}function J(q){if(Array.isArray(q))return q}function V(q,G){if(!(q instanceof G))throw new TypeError("Cannot call a class as a function")}function le(q,G){for(var L=0;L<G.length;L++){var Y=G[L];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(q,Y.key,Y)}}function pe(q,G,L){return G&&le(q.prototype,G),L&&le(q,L),q}function se(q,G,L){return G in q?Object.defineProperty(q,G,{value:L,enumerable:!0,configurable:!0,writable:!0}):q[G]=L,q}var Ne=3;function fe(q){return Array.isArray(q)?q:[q]}function Oe(q,G,L){var Y=this;S.XHRConnection.call(this,q,G,L),L.headers["Content-Type"]==="application/vnd.apache.thrift.binary"&&(this.flush=function(){if(Y.url===void 0||Y.url==="")return Y.send_buf;var Q=Y.getXmlHttpRequestObject();Q.responseType="arraybuffer",Q.onreadystatechange=function(){Q.readyState===4&&Q.status===200&&Y.setRecvBuffer(Q.response)},Q.open("POST",Y.url,!0),Object.keys(Y.headers).forEach(function(ae){Q.setRequestHeader(ae,Y.headers[ae])}),Q.send(Y.send_buf)})}m().inherits(Oe,S.XHRConnection),Oe.prototype.getXmlHttpRequestObject=function(){var q=S.XHRConnection.prototype.getXmlHttpRequestObject.call(this);return q.withCredentials=Oe.withCredentials,q};function Ce(){for(var q=arguments.length,G=new Array(q),L=0;L<q;L++)G[L]=arguments[L];S.TJSONProtocol.apply(this,G)}m().inherits(Ce,S.TJSONProtocol),Ce.prototype.writeString=function(q){return q instanceof R||(q=String(q)),S.TJSONProtocol.prototype.writeString.call(this,q)},Ce.prototype.readI64=function(){var q=S.TJSONProtocol.prototype.readI64.call(this);return q.toNumber(!0)},Ce.prototype.readBinary=function(){return S.TJSONProtocol.prototype.readString.call(this)};function We(){for(var q=arguments.length,G=new Array(q),L=0;L<q;L++)G[L]=arguments[L];S.TBinaryProtocol.apply(this,G)}m().inherits(We,S.TBinaryProtocol),We.prototype.writeString=function(q){return q instanceof R||(q=String(q)),S.TBinaryProtocol.prototype.writeString.call(this,q)},We.prototype.readI64=function(){var q=S.TBinaryProtocol.prototype.readI64.call(this);return q.toNumber(!0)},We.prototype.readBinary=function(){return S.TBinaryProtocol.prototype.readBinary.call(this).toString("base64")};function Bt(q,G){var L=new URL(q),Y=L.protocol,Q=L.hostname,ae=L.port;ae===""&&(ae=Y==="https:"?"443":"80");var re=null;{var _e=new Oe(Q,ae,{transport:S.TBufferedTransport,protocol:G?We:Ce,path:"/",headers:{"Content-Type":"application/vnd.apache.thrift.".concat(G?"binary":"json")},https:Y==="https:"});_e.on("error",console.error),re=(0,S.createXHRClient)(b,_e)}return re}var vt=function(){function q(){var G=this;return V(this,q),se(this,"updateQueryTimes",function(L,Y,Q,ae){G.queryTimes[Y]=ae}),se(this,"events",new(a())),se(this,"EVENT_NAMES",{ERROR:"error",METHOD_CALLED:"method-called"}),se(this,"handleErrors",function(L){return function(){for(var Y=arguments.length,Q=new Array(Y),ae=0;ae<Y;ae++)Q[ae]=arguments[ae];return L.apply(G,Q).catch(function(re){throw G.events.emit(G.EVENT_NAMES.ERROR,re),re})}}),se(this,"callbackify",function(L,Y){return function(){for(var Q=null,ae=arguments.length,re=new Array(ae),_e=0;_e<ae;_e++)re[_e]=arguments[_e];re.length===Y+1&&(Q=re.pop());var Ee=G[L].apply(G,re);return Q&&Ee.catch(function(Je){return Q(Je)}).then(function(Je){return Q(null,Je)}),Ee}}),se(this,"overSingleClient","SINGLE_CLIENT"),se(this,"overAllClients","ALL_CLIENTS"),se(this,"wrapThrift",function(L,Y,Q){return function(){if(G._sessionId){for(var ae=arguments.length,re=new Array(ae),_e=0;_e<ae;_e++)re[_e]=arguments[_e];var Ee=Q(re);return G.events.emit(G.EVENT_NAMES.METHOD_CALLED,L),Y===G.overSingleClient?G._client[0][L].apply(G._client[0],[G._sessionId[0]].concat(Ee)):Promise.all(G._client.map(function(Je,zt){return Je[L].apply(Je,[G._sessionId[zt]].concat(Ee))}))}else return Promise.reject(new Error("You are not connected to a server. Try running the connect method first."))}}),se(this,"connect",this.callbackify("connectAsync",0)),se(this,"disconnectAsync",this.handleErrors(function(){return Promise.all(G._client.map(function(L,Y){return L.disconnect(G._sessionId[Y]).catch(function(Q){if(Q&&!G.isTimeoutError(Q))throw Q})})).then(function(){return G._sessionId=null,G._client=null,G._numConnections=0,G.serverPingTimes=null,G})})),se(this,"disconnect",this.callbackify("disconnectAsync",0)),se(this,"getStatusAsync",this.handleErrors(this.wrapThrift("get_status",this.overSingleClient,function(L){return L}))),se(this,"getStatus",this.callbackify("getStatusAsync",0)),se(this,"getHardwareInfoAsync",this.handleErrors(this.wrapThrift("get_hardware_info",this.overSingleClient,function(L){return L}))),se(this,"getHardwareInfo",this.callbackify("getHardwareInfoAsync",0)),se(this,"getFirstGeoFileInArchiveAsync",this.handleErrors(this.wrapThrift("get_first_geo_file_in_archive",this.overSingleClient,function(L){return L}))),se(this,"getFilesInArchiveAsync",this.handleErrors(this.wrapThrift("get_all_files_in_archive",this.overSingleClient,function(L){return L}))),se(this,"getUsersAsync",this.handleErrors(this.wrapThrift("get_users",this.overSingleClient,function(L){return L}))),se(this,"importTableStatusAsync",this.handleErrors(this.wrapThrift("import_table_status",this.overSingleClient,function(L){return L}))),se(this,"getRolesAsync",this.handleErrors(this.wrapThrift("get_roles",this.overSingleClient,function(L){return L}))),se(this,"getDashboardsAsync",this.handleErrors(this.wrapThrift("get_dashboards",this.overSingleClient,function(L){return L}))),se(this,"getDashboardAsync",this.handleErrors(this.wrapThrift("get_dashboard",this.overSingleClient,function(L){return L}))),se(this,"createDashboardAsync",this.handleErrors(this.wrapThrift("create_dashboard",this.overAllClients,function(L){return L}))),se(this,"replaceDashboardAsync",this.handleErrors(this.wrapThrift("replace_dashboard",this.overAllClients,function(L){return L}))),se(this,"deleteDashboardAsync",this.handleErrors(this.wrapThrift("delete_dashboard",this.overAllClients,function(L){return L}))),se(this,"deleteDashboardsAsync",this.handleErrors(this.wrapThrift("delete_dashboards",this.overAllClients,function(L){return L}))),se(this,"shareDashboardAsync",this.handleErrors(this.wrapThrift("share_dashboard",this.overAllClients,function(L){var Y=z(L,4),Q=Y[0],ae=Y[1],re=Y[2],_e=Y[3];return[Q,ae,re,new T.TDashboardPermissions(_e)]}))),se(this,"shareDashboardsAsync",this.handleErrors(this.wrapThrift("share_dashboards",this.overAllClients,function(L){var Y=z(L,3),Q=Y[0],ae=Y[1],re=Y[2];return[Q,ae,new T.TDashboardPermissions(re)]}))),se(this,"unshareDashboardAsync",this.handleErrors(this.wrapThrift("unshare_dashboard",this.overAllClients,function(L){var Y=z(L,4),Q=Y[0],ae=Y[1],re=Y[2],_e=Y[3];return[Q,ae,re,new T.TDashboardPermissions(_e)]}))),se(this,"unshareDashboardsAsync",this.handleErrors(this.wrapThrift("unshare_dashboards",this.overAllClients,function(L){var Y=z(L,3),Q=Y[0],ae=Y[1],re=Y[2];return[Q,ae,new T.TDashboardPermissions(re)]}))),se(this,"getDashboardGranteesAsync",this.handleErrors(this.wrapThrift("get_dashboard_grantees",this.overSingleClient,function(L){return L}))),se(this,"getDbObjectsForGranteeAsync",this.handleErrors(this.wrapThrift("get_db_objects_for_grantee",this.overSingleClient,function(L){return L}))),se(this,"getDbObjectPrivsAsync",this.handleErrors(this.wrapThrift("get_db_object_privs",this.overSingleClient,function(L){var Y=z(L,2),Q=Y[0],ae=Y[1];return[Q,T.TDBObjectType[ae]]}))),se(this,"getAllRolesForUserAsync",this.handleErrors(this.wrapThrift("get_all_roles_for_user",this.overSingleClient,function(L){return L}))),se(this,"getAllEffectiveRolesForUserAsync",this.handleErrors(this.wrapThrift("get_all_effective_roles_for_user",this.overSingleClient,function(L){return L}))),se(this,"hasObjectPrivilegesAsync",this.handleErrors(this.wrapThrift("has_object_privilege",this.overSingleClient,function(L){return L}))),se(this,"hasDbPrivilegesAsync",function(L,Y,Q){return G.hasObjectPrivilegesAsync(L,Y,T.TDBObjectType.DatabaseDBObjectType,new T.TDBObjectPermissions({database_permissions_:new T.TDatabasePermissions(Q)}))}),se(this,"getSessionInfoAsync",this.handleErrors(this.wrapThrift("get_session_info",this.overSingleClient,function(L){return L}))),se(this,"createCustomExpressionAsync",this.handleErrors(this.wrapThrift("create_custom_expression",this.overSingleClient,function(L){return L}))),se(this,"getCustomExpressionsAsync",this.handleErrors(this.wrapThrift("get_custom_expressions",this.overSingleClient,function(L){return L}))),se(this,"updateCustomExpressionAsync",this.handleErrors(this.wrapThrift("update_custom_expression",this.overSingleClient,function(L){return L}))),se(this,"deleteCustomExpressionsAsync",this.handleErrors(this.wrapThrift("delete_custom_expressions",this.overSingleClient,function(L){return L}))),se(this,"detectColumnTypesAsync",this.handleErrors(function(L,Y){var Q=G.wrapThrift("detect_column_types",G.overSingleClient,function(){return[L,B.Dq(Y)]});return Q().then(function(ae){return G.importerRowDesc=ae.row_set.row_desc,ae})})),se(this,"queryAsync",this.handleErrors(function(L,Y){var Q=!0,ae=!1,re=null,_e=!1,Ee=-1,Je=(G._nonce++).toString();Y&&(Q=Y.hasOwnProperty("columnarResults")?Y.columnarResults:Q,ae=Y.hasOwnProperty("eliminateNullRows")?Y.eliminateNullRows:ae,re=Y.hasOwnProperty("queryId")?Y.queryId:re,_e=Y.hasOwnProperty("returnTiming")?Y.returnTiming:_e,Ee=Y.hasOwnProperty("limit")?Y.limit:Ee,Je=Y.hasOwnProperty("logValues")?D(Y.logValues)==="object"?JSON.stringify(Y.logValues):Y.logValues:Je);var zt=re in G.queryTimes?G.queryTimes[re]:G.DEFAULT_QUERY_TIME,At=0,et={returnTiming:_e,eliminateNullRows:ae,query:L,queryId:re,conId:At,estimatedQueryTime:zt,startTime:Date.now()},fn=-1,qn=G.wrapThrift("sql_execute",G.overSingleClient,function(ue){return ue}),gs=function ue(){return qn(L,Q,Je,Ee,fn).catch(function(Bi){if(Bi.name==="NetworkError"){if(G.removeConnection(0),G._numConnections===0)throw Bi.msg="No remaining database connections",Bi;return ue()}throw Bi})};return G.processResults(et,gs())})),se(this,"query",this.callbackify("queryAsync",2)),se(this,"queryDFAsync",this.handleErrors(function(L,Y){var Q=0,ae=-1,re=G.wrapThrift("sql_execute_df",G.overSingleClient,function(){return[L,l.TDeviceType.CPU,Q,ae,T.TArrowTransport.WIRE]});return re().then(function(_e){G._logging&&console.log(L,"on Server",0,"- Execution Time:",_e.execution_time_ms,"ms");var Ee=R.from(_e.df_buffer,"base64"),Je=(0,_.tableFromIPC)(Ee);return Y&&Boolean(Y.returnTiming)&&(Je={results:Je,timing:{execution_time_ms:_e.execution_time_ms}}),Je})})),se(this,"queryDF",this.callbackify("queryDFAsync",2)),se(this,"validateQuery",this.handleErrors(function(L){var Y=G.wrapThrift("sql_validate",G.overSingleClient,function(Q){return Q});return Y(L).then(function(Q){var ae=Q.reduce(function(re,_e){return re[_e.col_name]=_e,re},{});return G.convertFromThriftTypes(ae)})})),se(this,"getTablesAsync",this.handleErrors(function(){var L=G.wrapThrift("get_tables",G.overSingleClient,function(Y){return Y});return L().then(function(Y){return Y.map(function(Q){return{name:Q,label:"obs"}})})})),se(this,"getTables",this.callbackify("getTablesAsync",0)),se(this,"getTablesWithMetaAsync",this.handleErrors(function(){var L=G.wrapThrift("get_tables_meta",G.overSingleClient,function(Y){return Y});return L().then(function(Y){return Y.map(function(Q){return{name:Q.table_name,num_cols:Number(Q.num_cols.toString()),col_datum_types:Q.col_types.map(function(ae){return G._datumEnum[ae.type]}),is_view:Q.is_view,is_replicated:Q.is_replicated,shard_count:Number(Q.shard_count.toString()),max_rows:isFinite(Q.max_rows)?Number(Q.max_rows.toString()):-1}})})})),se(this,"getTablesWithMeta",this.callbackify("getTablesWithMetaAsync",0)),se(this,"getTablesMetaAsync",this.handleErrors(this.wrapThrift("get_tables_meta",this.overSingleClient,function(L){return L}))),se(this,"getTablesMeta",this.callbackify("getTablesMetaAsync",0)),se(this,"getTableEpochByNameAsync",this.handleErrors(this.wrapThrift("get_table_epoch_by_name",this.overSingleClient,function(L){return L}))),se(this,"getTableEpochByName",this.callbackify("getTableEpochByNameAsync",0)),se(this,"getTableFunctionNamesAsync",this.handleErrors(this.wrapThrift("get_table_function_names",this.overSingleClient,function(L){return L}))),se(this,"getTableFunctionNames",this.callbackify("getTableFunctionNamesAsync",0)),se(this,"getRuntimeTableFunctionNamesAsync",this.handleErrors(this.wrapThrift("get_runtime_table_function_names",this.overSingleClient,function(L){return L}))),se(this,"getRuntimeTableFunctionNames",this.callbackify("getRuntimeTableFunctionNamesAsync",0)),se(this,"getTableFunctionDetailsAsync",this.handleErrors(this.wrapThrift("get_table_function_details",this.overSingleClient,function(L){return L}))),se(this,"getTableFunctionDetails",this.callbackify("getTableFunctionDetailsAsync",0)),se(this,"getCompletionHintsAsync",this.handleErrors(this.wrapThrift("get_completion_hints",this.overSingleClient,function(L){var Y=z(L,2),Q=Y[0],ae=Y[1].cursor;return[Q,ae]}))),se(this,"getCompletionHints",this.callbackify("getCompletionHintsAsync",2)),se(this,"buildTFileTypeMap",function(){for(var L in T.TFileType)T.TFileType.hasOwnProperty(L)&&(G.TFileTypeMap[T.TFileType[L]]=L)}),se(this,"buildTImportHeaderRowMap",function(){for(var L in T.TImportHeaderRow)T.TImportHeaderRow.hasOwnProperty(L)&&(G.TImportHeaderRowMap[T.TImportHeaderRow[L]]=L)}),se(this,"buildTEncodingTypeMap",function(){for(var L in l.TEncodingType)l.TEncodingType.hasOwnProperty(L)&&(G.TEncodingTypeMap[l.TEncodingType[L]]=L)}),se(this,"buildTRasterPointTypeMap",function(){for(var L in T.TRasterPointType)T.TRasterPointType.hasOwnProperty(L)&&(G.TRasterPointTypeMap[T.TRasterPointType[L]]=L)}),se(this,"buildTRasterPointTransformMap",function(){for(var L in T.TRasterPointTransform)T.TRasterPointTransform.hasOwnProperty(L)&&(G.TRasterPointTransformMap[T.TRasterPointTransform[L]]=L)}),se(this,"buildTSourceTypeMap",function(){for(var L in T.TSourceType)T.TSourceType.hasOwnProperty(L)&&(G.TSourceTypeMap[T.TSourceType[L]]=L)}),se(this,"getFieldsAsync",this.handleErrors(function(L){var Y=G.wrapThrift("get_table_details",G.overSingleClient,function(Q){return Q});return Y(L).then(function(Q){if(Q){var ae=Q.row_desc.reduce(function(re,_e){return re[_e.col_name]=_e,re},{});return j(j({},Q),{},{columns:G.convertFromThriftTypes(ae)})}else throw new Error("Table (".concat(L,") not found"))})})),se(this,"getFields",this.callbackify("getFieldsAsync",1)),se(this,"createTableAsync",this.handleErrors(this.wrapThrift("create_table",this.overAllClients,function(L){var Y=z(L,3),Q=Y[0],ae=Y[1],re=Y[2];return[Q,B.HP(ae,G.importerRowDesc),re]}))),se(this,"createTable",this.callbackify("createTableAsync",4)),se(this,"importTableAsync",this.handleErrors(this.wrapThrift("import_table",this.overAllClients,function(L){var Y=z(L,3),Q=Y[0],ae=Y[1],re=Y[2];return[Q,ae,B.Dq(re)]}))),se(this,"importTableGeoAsync",this.handleErrors(this.wrapThrift("import_geo_table",this.overAllClients,function(L){var Y=z(L,4),Q=Y[0],ae=Y[1],re=Y[2],_e=Y[3];return[Q,ae,B.Dq(re),B.HP(_e,G.importerRowDesc),new T.TCreateParams]}))),se(this,"renderVegaAsync",this.handleErrors(function(L,Y,Q){var ae=null,re=Ne;Q&&(ae=Q.hasOwnProperty("queryId")?Q.queryId:ae,re=Q.hasOwnProperty("compressionLevel")?Q.compressionLevel:re);var _e=ae in G.queryTimes?G.queryTimes[ae]:G.DEFAULT_QUERY_TIME,Ee=(G._nonce++).toString();Q&&(Ee=Q.hasOwnProperty("logValues")?D(Q.logValues)==="object"?JSON.stringify(Q.logValues):Q.logValues:Ee);var Je=0;G._lastRenderCon=Je;var zt={isImage:!0,query:"render: ".concat(Y),queryId:ae,conId:Je,estimatedQueryTime:_e},At=G.wrapThrift("render_vega",G.overSingleClient,function(et){return et});return G.processResults(zt,At(L,Y,re,Ee))})),se(this,"renderVega",this.callbackify("renderVegaAsync",3)),se(this,"getResultRowForPixelAsync",this.handleErrors(function(L,Y,Q){var ae=arguments.length>3&&arguments[3]!==void 0?arguments[3]:2;Y instanceof T.TPixel||(Y=new T.TPixel(Y));var re=!0,_e=(G._nonce++).toString();return G._client[G._lastRenderCon].get_result_row_for_pixel(G._sessionId[G._lastRenderCon],L,Y,Q,re,ae,_e).then(function(Ee){Ee=Array.isArray(Ee)?Ee.pixel_rows:[Ee];for(var Je={isImage:!1,eliminateNullRows:!1,query:"pixel request",queryId:-2},zt=(0,x.Z)(G._logging,G.updateQueryTimes),At=Ee.length,et=0;et<At;et++)Ee[et].row_set=zt(Je,G._datumEnum,Ee[et]);return Ee})})),se(this,"getResultRowForPixel",this.callbackify("getResultRowForPixelAsync",4)),this._useBinaryProtocol=!1,this._host=null,this._user=null,this._password=null,this._port=null,this._dbName=null,this._client=null,this._sessionId=null,this._protocol=null,this._disableAutoReconnect=!1,this._datumEnum={},this.TFileTypeMap={},this.TEncodingTypeMap={},this.TImportHeaderRowMap={},this.TRasterPointTypeMap={},this.TRasterPointTransformMap={},this.TSourceTypeMap={},this._logging=!1,this._platform="heavydb",this._nonce=0,this._balanceStrategy="adaptive",this._numConnections=0,this._lastRenderCon=0,this.queryTimes={},this.serverQueueTimes=null,this.serverPingTimes=null,this.pingCount=null,this.DEFAULT_QUERY_TIME=50,this.NUM_PINGS_PER_SERVER=4,this.importerRowDesc=null,this.invertDatumTypes(),this.buildTFileTypeMap(),this.buildTEncodingTypeMap(),this.buildTImportHeaderRowMap(),this.buildTRasterPointTypeMap(),this.buildTRasterPointTransformMap(),this.buildTSourceTypeMap(),this.processResults=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Y=arguments.length>1?arguments[1]:void 0;return Y.catch(function(Q){throw G._logging&&L.query&&console.error(L.query,`
`,Q),Q}).then(function(Q){var ae=(0,x.Z)(G._logging,G.updateQueryTimes),re=ae(L,G._datumEnum,Q);return re})},this}return pe(q,[{key:"removeConnection",value:function(L){if(L<0||L>=this.numConnections){var Y={msg:"Remove connection id invalid"};throw Y}this._client.splice(L,1),this._sessionId.splice(L,1),this._numConnections--}},{key:"xhrWithCredentials",value:function(L){Oe.withCredentials=Boolean(L)}},{key:"initClients",value:function(){var L=Array.isArray(this._host)&&Array.isArray(this._port)&&Array.isArray(this._dbName);if(!L)throw new Error("Host, port, and dbName must be arrays.");if(this._client=[],this._sessionId=[],this._host[0]){if(!this._port[0])throw new Error("Please enter a port.")}else throw new Error("Please enter a host name.");var Y=this._host.length;if(Y<1)throw new Error("Must have at least one server to connect to.");if(Y!==this._port.length)throw new Error("Array connection parameters must be of equal length.");this._protocol||(this._protocol=this._host.map(function(){return window.location.protocol.replace(":","")}));for(var Q=this.getEndpoints(),ae=[],re=0;re<Y;re++){var _e=Bt(Q[re],this._useBinaryProtocol);ae.push(_e)}return this._client=ae,this._numConnections=this._client.length,this}},{key:"connectAsync",value:function(){var L=this;if(!Array.isArray(this._user)||!Array.isArray(this._password))return Promise.reject("Username and password must be arrays.");if(this._dbName[0])if(this._user[0]){if(!this._password[0])return Promise.reject("Please enter a password.")}else return Promise.reject("Please enter a username.");else return Promise.reject("Please enter a database.");var Y=this._host.length;if(Y<1)return Promise.reject("Must have at least one server to connect to.");if(Y!==this._port.length||Y!==this._user.length||Y!==this._password.length||Y!==this._dbName.length)return Promise.reject("Array connection parameters must be of equal length.");var Q=[];return this.initClients(),Q=this._client,this._client=[],Promise.all(Q.map(function(ae,re){return ae.connect(L._user[re],L._password[re],L._dbName[re]).then(function(_e){return L._client.push(ae),L._sessionId.push(_e),null})})).then(function(){return L})}},{key:"convertFromThriftTypes",value:function(L){var Y=[];for(var Q in L)L.hasOwnProperty(Q)&&Y.push({name:Q,type:this._datumEnum[L[Q].col_type.type],precision:L[Q].col_type.precision,is_array:L[Q].col_type.is_array,is_dict:L[Q].col_type.encoding===l.TEncodingType.DICT});return Y}},{key:"invertDatumTypes",value:function(){var L=l.TDatumType;for(var Y in L)L.hasOwnProperty(Y)&&(this._datumEnum[L[Y]]=Y)}},{key:"importTableAsyncWrapper",value:function(L){return L?this.importTableGeoAsync.bind(this):this.importTableAsync.bind(this)}},{key:"importTable",value:function(L,Y,Q,ae,re,_e){if(re){var Ee=this.callbackify("importTableGeoAsync",4);return Ee(L,Y,Q,ae,_e)}else{var Je=this.callbackify("importTableAsync",3);return Je(L,Y,Q,_e)}}},{key:"sessionId",value:function(L){return arguments.length?(this._sessionId=fe(L),this):this._sessionId}},{key:"useBinaryProtocol",value:function(L){return arguments.length?(this._useBinaryProtocol=Boolean(L),this):this._useBinaryProtocol}},{key:"host",value:function(L){return arguments.length?(this._host=fe(L),this):this._host}},{key:"port",value:function(L){return arguments.length?(this._port=fe(L),this):this._port}},{key:"user",value:function(L){return arguments.length?(this._user=fe(L),this):this._user}},{key:"password",value:function(L){return arguments.length?(this._password=fe(L),this):this._password}},{key:"dbName",value:function(L){return arguments.length?(this._dbName=fe(L),this):this._dbName}},{key:"logging",value:function(L){if(typeof L>"u")return this._logging;if(typeof L!="boolean")return"logging can only be set with boolean values";this._logging=L;var Y=L?"enabled":"disabled";return"SQL logging is now ".concat(Y)}},{key:"platform",value:function(L){return arguments.length?(this._platform=L,this):this._platform}},{key:"numConnections",value:function(){return this._numConnections}},{key:"protocol",value:function(L){return arguments.length?(this._protocol=fe(L),this):this._protocol}},{key:"disableAutoReconnect",value:function(L){return arguments.length?(this._disableAutoReconnect=L,this):this._disableAutoReconnect}},{key:"getEndpoints",value:function(){var L=this;return this._host.map(function(Y,Q){return"".concat(L._protocol[Q],"://").concat(Y,":").concat(L._port[Q])})}},{key:"setLicenseKey",value:function(L,Y){var Q=Y.protocol,ae=Y.host,re=Y.port,_e=Array.isArray(this._client)&&this._client[0],Ee=this._sessionId&&this._sessionId[0];if(!_e){var Je="".concat(Q,"://").concat(ae,":").concat(re);_e=Bt(Je,this._useBinaryProtocol),Ee=""}return _e.set_license_key(Ee,L,this._nonce++)}},{key:"getLicenseClaims",value:function(L){var Y=L.protocol,Q=L.host,ae=L.port,re=Array.isArray(this._client)&&this._client[0],_e=this._sessionId&&this._sessionId[0];if(!re){var Ee="".concat(Y,"://").concat(Q,":").concat(ae);re=Bt(Ee,this._useBinaryProtocol),_e=""}return re.get_license_claims(_e,this._nonce++)}},{key:"isTimeoutError",value:function(L){return L instanceof T.TDBException&&(String(L.error_msg).indexOf("Session not valid.")!==-1||String(L.error_msg).indexOf("User should re-authenticate.")!==-1)}}]),q}();const ge=vt},2033:(c,d,f)=>{f.d(d,{Dq:()=>a,HP:()=>_,RK:()=>w,kS:()=>m});var u=f(2607),a=function(T){return new u.TCopyParams(T)},_=function(T,b){return T.forEach(function(S,x){b[x].col_name=S.clean_col_name,b[x].col_type.encoding=S.col_type.encoding,b[x].col_type.precision=S.col_type.precision,b[x].col_type.comp_param=S.col_type.comp_param,b[x].col_type.scale=S.col_type.scale,b[x].col_type.type=S.col_type.type}),b};function w(l,T){var b=Math.pow(10,T-3),S=l/b;return S}function m(l){return l.toNumber?Boolean(l.toNumber(!0)):Boolean(l)}},5141:(c,d,f)=>{f.d(d,{Z:()=>w});var u=f(2033);function a(m,l,T){var b={fields:[],results:[]},S=m.row_desc.length,x=typeof m.columns[0]>"u"?0:m.columns[0].nulls.length;b.fields=m.row_desc.map(function(J){return{name:J.col_name,type:T[J.col_type.type],is_array:J.col_type.is_array}});for(var B=0;B<x;B++){if(l){for(var F=!1,k=0;k<S;k++)if(m.columns[k].nulls[B]){F=!0;break}if(F)continue}for(var A={},M=0;M<S;M++){var R=b.fields[M].name,P=b.fields[M].type,j=b.fields[M].is_array,D=m.columns[M].nulls[B],z=m.row_desc[M].col_type.precision;if(D){A[R]=null;continue}if(j){A[R]=[];for(var $=m.columns[M].data.arr_col[B].nulls.length,K=0;K<$;K++){if(m.columns[M].data.arr_col[B].nulls[K]){A[R].push("NULL");continue}switch(P){case"BOOL":A[R].push((0,u.kS)(m.columns[M].data.arr_col[B].data.int_col[K]));break;case"SMALLINT":case"INT":case"BIGINT":case"TINYINT":A[R].push(m.columns[M].data.arr_col[B].data.int_col[K]);break;case"FLOAT":case"DOUBLE":case"DECIMAL":A[R].push(m.columns[M].data.arr_col[B].data.real_col[K]);break;case"STR":A[R].push(m.columns[M].data.arr_col[B].data.str_col[K]);break;case"TIME":case"TIMESTAMP":case"DATE":var H=(0,u.RK)(m.columns[M].data.int_col[B],z);A[R].push(H);break;default:throw new Error("Unrecognized array field type: ".concat(P))}}}else switch(P){case"BOOL":A[R]=(0,u.kS)(m.columns[M].data.int_col[B]);break;case"SMALLINT":case"INT":case"BIGINT":case"TINYINT":A[R]=m.columns[M].data.int_col[B];break;case"FLOAT":case"DOUBLE":case"DECIMAL":A[R]=m.columns[M].data.real_col[B];break;case"STR":A[R]=m.columns[M].data.str_col[B];break;case"TIME":case"TIMESTAMP":case"DATE":var W=(0,u.RK)(m.columns[M].data.int_col[B],z);A[R]=new Date(W);break;case"POINT":case"LINESTRING":case"POLYGON":case"MULTIPOLYGON":A[R]=m.columns[M].data.str_col[B];break;default:throw new Error("Unrecognized field type: ".concat(P))}}b.results.push(A)}return b}function _(m,l,T){var b=m.row_desc.length,S={fields:[],results:[]};S.fields=m.row_desc.map(function(V){return{name:V.col_name,type:T[V.col_type.type],is_array:V.col_type.is_array}}),S.results=[];var x=0;typeof m.rows<"u"&&m.rows!==null&&(x=m.rows.length);for(var B=0;B<x;B++){if(l){for(var F=!1,k=0;k<b;k++)if(m.rows[B].columns[k].is_null){F=!0;break}if(F)continue}for(var A={},M=0;M<b;M++){var R=S.fields[M].name,P=S.fields[M].type,j=S.fields[M].is_array,D=m.row_desc[M].col_type.precision;if(j){if(m.rows[B].cols[M].is_null){A[R]="NULL";continue}A[R]=[];for(var z=m.rows[B].cols[M].val.arr_val.length,$=0;$<z;$++){var K=m.rows[B].cols[M].val.arr_val[$];if(K.is_null){A[R].push("NULL");continue}switch(P){case"BOOL":A[R].push((0,u.kS)(K.val.int_val));break;case"SMALLINT":case"INT":case"BIGINT":case"TINYINT":A[R].push(K.val.int_val);break;case"FLOAT":case"DOUBLE":case"DECIMAL":A[R].push(K.val.real_val);break;case"STR":A[R].push(K.val.str_val);break;case"TIME":case"TIMESTAMP":case"DATE":var H=(0,u.RK)(K.val.int_val,D);A[R].push(H);break;default:throw new Error("Unrecognized array field type: ".concat(P))}}}else{var W=m.rows[B].cols[M];if(W.is_null){A[R]="NULL";continue}switch(P){case"BOOL":A[R]=(0,u.kS)(W.val.int_val);break;case"SMALLINT":case"INT":case"BIGINT":case"TINYINT":A[R]=W.val.int_val;break;case"FLOAT":case"DOUBLE":case"DECIMAL":A[R]=W.val.real_val;break;case"STR":A[R]=W.val.str_val;break;case"TIME":case"TIMESTAMP":case"DATE":var J=(0,u.RK)(W.val.int_val,D);A[R]=new Date(J);break;case"POINT":case"LINESTRING":case"POLYGON":case"MULTIPOLYGON":A[R]=W.val.str_val;break;default:throw new Error("Unrecognized field type: ".concat(P))}}}S.results.push(A)}return S}function w(m,l){return function(T,b,S){var x=!1,B=!1,F=null,k=null,A=null,M=null;if(typeof T<"u"&&(x=T.isImage?T.isImage:!1,B=T.eliminateNullRows?T.eliminateNullRows:!1,F=T.query?T.query:null,k=T.queryId?T.queryId:null,A=typeof T.conId>"u"?null:T.conId,M=typeof T.estimatedQueryTime>"u"?null:T.estimatedQueryTime),S.execution_time_ms&&A!==null&&M!==null&&l(A,k,M,S.execution_time_ms),m&&S.execution_time_ms&&console.log(F,"on Server",A,"- Execution Time:",S.execution_time_ms,"ms, Total Time:",S.total_time_ms,"ms, Real Time:",T.startTime?Date.now()-T.startTime:void 0,"ms"),x)return S;var R=null;if(!S.row_set)throw new Error("No result to process");return S.row_set.is_columnar?R=a(S.row_set,B,b):R=_(S.row_set,B,b),R.timing={execution_time_ms:S.execution_time_ms,total_time_ms:S.total_time_ms},T.returnTiming?R:R.results}}},9742:(c,d)=>{d.byteLength=T,d.toByteArray=S,d.fromByteArray=F;for(var f=[],u=[],a=typeof Uint8Array<"u"?Uint8Array:Array,_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w=0,m=_.length;w<m;++w)f[w]=_[w],u[_.charCodeAt(w)]=w;u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63;function l(k){var A=k.length;if(A%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var M=k.indexOf("=");M===-1&&(M=A);var R=M===A?0:4-M%4;return[M,R]}function T(k){var A=l(k),M=A[0],R=A[1];return(M+R)*3/4-R}function b(k,A,M){return(A+M)*3/4-M}function S(k){var A,M=l(k),R=M[0],P=M[1],j=new a(b(k,R,P)),D=0,z=P>0?R-4:R,$;for($=0;$<z;$+=4)A=u[k.charCodeAt($)]<<18|u[k.charCodeAt($+1)]<<12|u[k.charCodeAt($+2)]<<6|u[k.charCodeAt($+3)],j[D++]=A>>16&255,j[D++]=A>>8&255,j[D++]=A&255;return P===2&&(A=u[k.charCodeAt($)]<<2|u[k.charCodeAt($+1)]>>4,j[D++]=A&255),P===1&&(A=u[k.charCodeAt($)]<<10|u[k.charCodeAt($+1)]<<4|u[k.charCodeAt($+2)]>>2,j[D++]=A>>8&255,j[D++]=A&255),j}function x(k){return f[k>>18&63]+f[k>>12&63]+f[k>>6&63]+f[k&63]}function B(k,A,M){for(var R,P=[],j=A;j<M;j+=3)R=(k[j]<<16&16711680)+(k[j+1]<<8&65280)+(k[j+2]&255),P.push(x(R));return P.join("")}function F(k){for(var A,M=k.length,R=M%3,P=[],j=16383,D=0,z=M-R;D<z;D+=j)P.push(B(k,D,D+j>z?z:D+j));return R===1?(A=k[M-1],P.push(f[A>>2]+f[A<<4&63]+"==")):R===2&&(A=(k[M-2]<<8)+k[M-1],P.push(f[A>>10]+f[A>>4&63]+f[A<<2&63]+"=")),P.join("")}},3818:(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0});var f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},u=typeof window<"u"&&typeof window.document<"u",a=(typeof self>"u"?"undefined":f(self))==="object"&&self.constructor&&self.constructor.name==="DedicatedWorkerGlobalScope",_=typeof process<"u"&&process.versions!=null&&process.versions.node!=null,w=function(){return typeof window<"u"&&window.name==="nodejs"||navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")};d.isBrowser=u,d.isWebWorker=a,d.isNode=_,d.isJsDom=w},8764:(c,d,f)=>{/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */const u=f(9742),a=f(645),_=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;d.Buffer=T,d.SlowBuffer=j,d.INSPECT_MAX_BYTES=50;const w=2147483647;d.kMaxLength=w,T.TYPED_ARRAY_SUPPORT=m(),!T.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function m(){try{const C=new Uint8Array(1),O={foo:function(){return 42}};return Object.setPrototypeOf(O,Uint8Array.prototype),Object.setPrototypeOf(C,O),C.foo()===42}catch{return!1}}Object.defineProperty(T.prototype,"parent",{enumerable:!0,get:function(){if(!!T.isBuffer(this))return this.buffer}}),Object.defineProperty(T.prototype,"offset",{enumerable:!0,get:function(){if(!!T.isBuffer(this))return this.byteOffset}});function l(C){if(C>w)throw new RangeError('The value "'+C+'" is invalid for option "size"');const O=new Uint8Array(C);return Object.setPrototypeOf(O,T.prototype),O}function T(C,O,N){if(typeof C=="number"){if(typeof O=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return B(C)}return b(C,O,N)}T.poolSize=8192;function b(C,O,N){if(typeof C=="string")return F(C,O);if(ArrayBuffer.isView(C))return A(C);if(C==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof C);if(vn(C,ArrayBuffer)||C&&vn(C.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(vn(C,SharedArrayBuffer)||C&&vn(C.buffer,SharedArrayBuffer)))return M(C,O,N);if(typeof C=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const U=C.valueOf&&C.valueOf();if(U!=null&&U!==C)return T.from(U,O,N);const X=R(C);if(X)return X;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof C[Symbol.toPrimitive]=="function")return T.from(C[Symbol.toPrimitive]("string"),O,N);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof C)}T.from=function(C,O,N){return b(C,O,N)},Object.setPrototypeOf(T.prototype,Uint8Array.prototype),Object.setPrototypeOf(T,Uint8Array);function S(C){if(typeof C!="number")throw new TypeError('"size" argument must be of type number');if(C<0)throw new RangeError('The value "'+C+'" is invalid for option "size"')}function x(C,O,N){return S(C),C<=0?l(C):O!==void 0?typeof N=="string"?l(C).fill(O,N):l(C).fill(O):l(C)}T.alloc=function(C,O,N){return x(C,O,N)};function B(C){return S(C),l(C<0?0:P(C)|0)}T.allocUnsafe=function(C){return B(C)},T.allocUnsafeSlow=function(C){return B(C)};function F(C,O){if((typeof O!="string"||O==="")&&(O="utf8"),!T.isEncoding(O))throw new TypeError("Unknown encoding: "+O);const N=D(C,O)|0;let U=l(N);const X=U.write(C,O);return X!==N&&(U=U.slice(0,X)),U}function k(C){const O=C.length<0?0:P(C.length)|0,N=l(O);for(let U=0;U<O;U+=1)N[U]=C[U]&255;return N}function A(C){if(vn(C,Uint8Array)){const O=new Uint8Array(C);return M(O.buffer,O.byteOffset,O.byteLength)}return k(C)}function M(C,O,N){if(O<0||C.byteLength<O)throw new RangeError('"offset" is outside of buffer bounds');if(C.byteLength<O+(N||0))throw new RangeError('"length" is outside of buffer bounds');let U;return O===void 0&&N===void 0?U=new Uint8Array(C):N===void 0?U=new Uint8Array(C,O):U=new Uint8Array(C,O,N),Object.setPrototypeOf(U,T.prototype),U}function R(C){if(T.isBuffer(C)){const O=P(C.length)|0,N=l(O);return N.length===0||C.copy(N,0,0,O),N}if(C.length!==void 0)return typeof C.length!="number"||rc(C.length)?l(0):k(C);if(C.type==="Buffer"&&Array.isArray(C.data))return k(C.data)}function P(C){if(C>=w)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+w.toString(16)+" bytes");return C|0}function j(C){return+C!=C&&(C=0),T.alloc(+C)}T.isBuffer=function(O){return O!=null&&O._isBuffer===!0&&O!==T.prototype},T.compare=function(O,N){if(vn(O,Uint8Array)&&(O=T.from(O,O.offset,O.byteLength)),vn(N,Uint8Array)&&(N=T.from(N,N.offset,N.byteLength)),!T.isBuffer(O)||!T.isBuffer(N))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(O===N)return 0;let U=O.length,X=N.length;for(let ee=0,ie=Math.min(U,X);ee<ie;++ee)if(O[ee]!==N[ee]){U=O[ee],X=N[ee];break}return U<X?-1:X<U?1:0},T.isEncoding=function(O){switch(String(O).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},T.concat=function(O,N){if(!Array.isArray(O))throw new TypeError('"list" argument must be an Array of Buffers');if(O.length===0)return T.alloc(0);let U;if(N===void 0)for(N=0,U=0;U<O.length;++U)N+=O[U].length;const X=T.allocUnsafe(N);let ee=0;for(U=0;U<O.length;++U){let ie=O[U];if(vn(ie,Uint8Array))ee+ie.length>X.length?(T.isBuffer(ie)||(ie=T.from(ie)),ie.copy(X,ee)):Uint8Array.prototype.set.call(X,ie,ee);else if(T.isBuffer(ie))ie.copy(X,ee);else throw new TypeError('"list" argument must be an Array of Buffers');ee+=ie.length}return X};function D(C,O){if(T.isBuffer(C))return C.length;if(ArrayBuffer.isView(C)||vn(C,ArrayBuffer))return C.byteLength;if(typeof C!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof C);const N=C.length,U=arguments.length>2&&arguments[2]===!0;if(!U&&N===0)return 0;let X=!1;for(;;)switch(O){case"ascii":case"latin1":case"binary":return N;case"utf8":case"utf-8":return gs(C).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N*2;case"hex":return N>>>1;case"base64":return ni(C).length;default:if(X)return U?-1:gs(C).length;O=(""+O).toLowerCase(),X=!0}}T.byteLength=D;function z(C,O,N){let U=!1;if((O===void 0||O<0)&&(O=0),O>this.length||((N===void 0||N>this.length)&&(N=this.length),N<=0)||(N>>>=0,O>>>=0,N<=O))return"";for(C||(C="utf8");;)switch(C){case"hex":return Bt(this,O,N);case"utf8":case"utf-8":return Ne(this,O,N);case"ascii":return Ce(this,O,N);case"latin1":case"binary":return We(this,O,N);case"base64":return se(this,O,N);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return vt(this,O,N);default:if(U)throw new TypeError("Unknown encoding: "+C);C=(C+"").toLowerCase(),U=!0}}T.prototype._isBuffer=!0;function $(C,O,N){const U=C[O];C[O]=C[N],C[N]=U}T.prototype.swap16=function(){const O=this.length;if(O%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let N=0;N<O;N+=2)$(this,N,N+1);return this},T.prototype.swap32=function(){const O=this.length;if(O%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let N=0;N<O;N+=4)$(this,N,N+3),$(this,N+1,N+2);return this},T.prototype.swap64=function(){const O=this.length;if(O%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let N=0;N<O;N+=8)$(this,N,N+7),$(this,N+1,N+6),$(this,N+2,N+5),$(this,N+3,N+4);return this},T.prototype.toString=function(){const O=this.length;return O===0?"":arguments.length===0?Ne(this,0,O):z.apply(this,arguments)},T.prototype.toLocaleString=T.prototype.toString,T.prototype.equals=function(O){if(!T.isBuffer(O))throw new TypeError("Argument must be a Buffer");return this===O?!0:T.compare(this,O)===0},T.prototype.inspect=function(){let O="";const N=d.INSPECT_MAX_BYTES;return O=this.toString("hex",0,N).replace(/(.{2})/g,"$1 ").trim(),this.length>N&&(O+=" ... "),"<Buffer "+O+">"},_&&(T.prototype[_]=T.prototype.inspect),T.prototype.compare=function(O,N,U,X,ee){if(vn(O,Uint8Array)&&(O=T.from(O,O.offset,O.byteLength)),!T.isBuffer(O))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof O);if(N===void 0&&(N=0),U===void 0&&(U=O?O.length:0),X===void 0&&(X=0),ee===void 0&&(ee=this.length),N<0||U>O.length||X<0||ee>this.length)throw new RangeError("out of range index");if(X>=ee&&N>=U)return 0;if(X>=ee)return-1;if(N>=U)return 1;if(N>>>=0,U>>>=0,X>>>=0,ee>>>=0,this===O)return 0;let ie=ee-X,Me=U-N;const Ue=Math.min(ie,Me),ze=this.slice(X,ee),Xe=O.slice(N,U);for(let Ke=0;Ke<Ue;++Ke)if(ze[Ke]!==Xe[Ke]){ie=ze[Ke],Me=Xe[Ke];break}return ie<Me?-1:Me<ie?1:0};function K(C,O,N,U,X){if(C.length===0)return-1;if(typeof N=="string"?(U=N,N=0):N>2147483647?N=2147483647:N<-2147483648&&(N=-2147483648),N=+N,rc(N)&&(N=X?0:C.length-1),N<0&&(N=C.length+N),N>=C.length){if(X)return-1;N=C.length-1}else if(N<0)if(X)N=0;else return-1;if(typeof O=="string"&&(O=T.from(O,U)),T.isBuffer(O))return O.length===0?-1:H(C,O,N,U,X);if(typeof O=="number")return O=O&255,typeof Uint8Array.prototype.indexOf=="function"?X?Uint8Array.prototype.indexOf.call(C,O,N):Uint8Array.prototype.lastIndexOf.call(C,O,N):H(C,[O],N,U,X);throw new TypeError("val must be string, number or Buffer")}function H(C,O,N,U,X){let ee=1,ie=C.length,Me=O.length;if(U!==void 0&&(U=String(U).toLowerCase(),U==="ucs2"||U==="ucs-2"||U==="utf16le"||U==="utf-16le")){if(C.length<2||O.length<2)return-1;ee=2,ie/=2,Me/=2,N/=2}function Ue(Xe,Ke){return ee===1?Xe[Ke]:Xe.readUInt16BE(Ke*ee)}let ze;if(X){let Xe=-1;for(ze=N;ze<ie;ze++)if(Ue(C,ze)===Ue(O,Xe===-1?0:ze-Xe)){if(Xe===-1&&(Xe=ze),ze-Xe+1===Me)return Xe*ee}else Xe!==-1&&(ze-=ze-Xe),Xe=-1}else for(N+Me>ie&&(N=ie-Me),ze=N;ze>=0;ze--){let Xe=!0;for(let Ke=0;Ke<Me;Ke++)if(Ue(C,ze+Ke)!==Ue(O,Ke)){Xe=!1;break}if(Xe)return ze}return-1}T.prototype.includes=function(O,N,U){return this.indexOf(O,N,U)!==-1},T.prototype.indexOf=function(O,N,U){return K(this,O,N,U,!0)},T.prototype.lastIndexOf=function(O,N,U){return K(this,O,N,U,!1)};function W(C,O,N,U){N=Number(N)||0;const X=C.length-N;U?(U=Number(U),U>X&&(U=X)):U=X;const ee=O.length;U>ee/2&&(U=ee/2);let ie;for(ie=0;ie<U;++ie){const Me=parseInt(O.substr(ie*2,2),16);if(rc(Me))return ie;C[N+ie]=Me}return ie}function J(C,O,N,U){return Xr(gs(O,C.length-N),C,N,U)}function V(C,O,N,U){return Xr(ue(O),C,N,U)}function le(C,O,N,U){return Xr(ni(O),C,N,U)}function pe(C,O,N,U){return Xr(Bi(O,C.length-N),C,N,U)}T.prototype.write=function(O,N,U,X){if(N===void 0)X="utf8",U=this.length,N=0;else if(U===void 0&&typeof N=="string")X=N,U=this.length,N=0;else if(isFinite(N))N=N>>>0,isFinite(U)?(U=U>>>0,X===void 0&&(X="utf8")):(X=U,U=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ee=this.length-N;if((U===void 0||U>ee)&&(U=ee),O.length>0&&(U<0||N<0)||N>this.length)throw new RangeError("Attempt to write outside buffer bounds");X||(X="utf8");let ie=!1;for(;;)switch(X){case"hex":return W(this,O,N,U);case"utf8":case"utf-8":return J(this,O,N,U);case"ascii":case"latin1":case"binary":return V(this,O,N,U);case"base64":return le(this,O,N,U);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pe(this,O,N,U);default:if(ie)throw new TypeError("Unknown encoding: "+X);X=(""+X).toLowerCase(),ie=!0}},T.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function se(C,O,N){return O===0&&N===C.length?u.fromByteArray(C):u.fromByteArray(C.slice(O,N))}function Ne(C,O,N){N=Math.min(C.length,N);const U=[];let X=O;for(;X<N;){const ee=C[X];let ie=null,Me=ee>239?4:ee>223?3:ee>191?2:1;if(X+Me<=N){let Ue,ze,Xe,Ke;switch(Me){case 1:ee<128&&(ie=ee);break;case 2:Ue=C[X+1],(Ue&192)===128&&(Ke=(ee&31)<<6|Ue&63,Ke>127&&(ie=Ke));break;case 3:Ue=C[X+1],ze=C[X+2],(Ue&192)===128&&(ze&192)===128&&(Ke=(ee&15)<<12|(Ue&63)<<6|ze&63,Ke>2047&&(Ke<55296||Ke>57343)&&(ie=Ke));break;case 4:Ue=C[X+1],ze=C[X+2],Xe=C[X+3],(Ue&192)===128&&(ze&192)===128&&(Xe&192)===128&&(Ke=(ee&15)<<18|(Ue&63)<<12|(ze&63)<<6|Xe&63,Ke>65535&&Ke<1114112&&(ie=Ke))}}ie===null?(ie=65533,Me=1):ie>65535&&(ie-=65536,U.push(ie>>>10&1023|55296),ie=56320|ie&1023),U.push(ie),X+=Me}return Oe(U)}const fe=4096;function Oe(C){const O=C.length;if(O<=fe)return String.fromCharCode.apply(String,C);let N="",U=0;for(;U<O;)N+=String.fromCharCode.apply(String,C.slice(U,U+=fe));return N}function Ce(C,O,N){let U="";N=Math.min(C.length,N);for(let X=O;X<N;++X)U+=String.fromCharCode(C[X]&127);return U}function We(C,O,N){let U="";N=Math.min(C.length,N);for(let X=O;X<N;++X)U+=String.fromCharCode(C[X]);return U}function Bt(C,O,N){const U=C.length;(!O||O<0)&&(O=0),(!N||N<0||N>U)&&(N=U);let X="";for(let ee=O;ee<N;++ee)X+=ac[C[ee]];return X}function vt(C,O,N){const U=C.slice(O,N);let X="";for(let ee=0;ee<U.length-1;ee+=2)X+=String.fromCharCode(U[ee]+U[ee+1]*256);return X}T.prototype.slice=function(O,N){const U=this.length;O=~~O,N=N===void 0?U:~~N,O<0?(O+=U,O<0&&(O=0)):O>U&&(O=U),N<0?(N+=U,N<0&&(N=0)):N>U&&(N=U),N<O&&(N=O);const X=this.subarray(O,N);return Object.setPrototypeOf(X,T.prototype),X};function ge(C,O,N){if(C%1!==0||C<0)throw new RangeError("offset is not uint");if(C+O>N)throw new RangeError("Trying to access beyond buffer length")}T.prototype.readUintLE=T.prototype.readUIntLE=function(O,N,U){O=O>>>0,N=N>>>0,U||ge(O,N,this.length);let X=this[O],ee=1,ie=0;for(;++ie<N&&(ee*=256);)X+=this[O+ie]*ee;return X},T.prototype.readUintBE=T.prototype.readUIntBE=function(O,N,U){O=O>>>0,N=N>>>0,U||ge(O,N,this.length);let X=this[O+--N],ee=1;for(;N>0&&(ee*=256);)X+=this[O+--N]*ee;return X},T.prototype.readUint8=T.prototype.readUInt8=function(O,N){return O=O>>>0,N||ge(O,1,this.length),this[O]},T.prototype.readUint16LE=T.prototype.readUInt16LE=function(O,N){return O=O>>>0,N||ge(O,2,this.length),this[O]|this[O+1]<<8},T.prototype.readUint16BE=T.prototype.readUInt16BE=function(O,N){return O=O>>>0,N||ge(O,2,this.length),this[O]<<8|this[O+1]},T.prototype.readUint32LE=T.prototype.readUInt32LE=function(O,N){return O=O>>>0,N||ge(O,4,this.length),(this[O]|this[O+1]<<8|this[O+2]<<16)+this[O+3]*16777216},T.prototype.readUint32BE=T.prototype.readUInt32BE=function(O,N){return O=O>>>0,N||ge(O,4,this.length),this[O]*16777216+(this[O+1]<<16|this[O+2]<<8|this[O+3])},T.prototype.readBigUInt64LE=Ks(function(O){O=O>>>0,At(O,"offset");const N=this[O],U=this[O+7];(N===void 0||U===void 0)&&et(O,this.length-8);const X=N+this[++O]*2**8+this[++O]*2**16+this[++O]*2**24,ee=this[++O]+this[++O]*2**8+this[++O]*2**16+U*2**24;return BigInt(X)+(BigInt(ee)<<BigInt(32))}),T.prototype.readBigUInt64BE=Ks(function(O){O=O>>>0,At(O,"offset");const N=this[O],U=this[O+7];(N===void 0||U===void 0)&&et(O,this.length-8);const X=N*2**24+this[++O]*2**16+this[++O]*2**8+this[++O],ee=this[++O]*2**24+this[++O]*2**16+this[++O]*2**8+U;return(BigInt(X)<<BigInt(32))+BigInt(ee)}),T.prototype.readIntLE=function(O,N,U){O=O>>>0,N=N>>>0,U||ge(O,N,this.length);let X=this[O],ee=1,ie=0;for(;++ie<N&&(ee*=256);)X+=this[O+ie]*ee;return ee*=128,X>=ee&&(X-=Math.pow(2,8*N)),X},T.prototype.readIntBE=function(O,N,U){O=O>>>0,N=N>>>0,U||ge(O,N,this.length);let X=N,ee=1,ie=this[O+--X];for(;X>0&&(ee*=256);)ie+=this[O+--X]*ee;return ee*=128,ie>=ee&&(ie-=Math.pow(2,8*N)),ie},T.prototype.readInt8=function(O,N){return O=O>>>0,N||ge(O,1,this.length),this[O]&128?(255-this[O]+1)*-1:this[O]},T.prototype.readInt16LE=function(O,N){O=O>>>0,N||ge(O,2,this.length);const U=this[O]|this[O+1]<<8;return U&32768?U|4294901760:U},T.prototype.readInt16BE=function(O,N){O=O>>>0,N||ge(O,2,this.length);const U=this[O+1]|this[O]<<8;return U&32768?U|4294901760:U},T.prototype.readInt32LE=function(O,N){return O=O>>>0,N||ge(O,4,this.length),this[O]|this[O+1]<<8|this[O+2]<<16|this[O+3]<<24},T.prototype.readInt32BE=function(O,N){return O=O>>>0,N||ge(O,4,this.length),this[O]<<24|this[O+1]<<16|this[O+2]<<8|this[O+3]},T.prototype.readBigInt64LE=Ks(function(O){O=O>>>0,At(O,"offset");const N=this[O],U=this[O+7];(N===void 0||U===void 0)&&et(O,this.length-8);const X=this[O+4]+this[O+5]*2**8+this[O+6]*2**16+(U<<24);return(BigInt(X)<<BigInt(32))+BigInt(N+this[++O]*256+this[++O]*65536+this[++O]*16777216)}),T.prototype.readBigInt64BE=Ks(function(O){O=O>>>0,At(O,"offset");const N=this[O],U=this[O+7];(N===void 0||U===void 0)&&et(O,this.length-8);const X=(N<<24)+this[++O]*2**16+this[++O]*2**8+this[++O];return(BigInt(X)<<BigInt(32))+BigInt(this[++O]*16777216+this[++O]*65536+this[++O]*256+U)}),T.prototype.readFloatLE=function(O,N){return O=O>>>0,N||ge(O,4,this.length),a.read(this,O,!0,23,4)},T.prototype.readFloatBE=function(O,N){return O=O>>>0,N||ge(O,4,this.length),a.read(this,O,!1,23,4)},T.prototype.readDoubleLE=function(O,N){return O=O>>>0,N||ge(O,8,this.length),a.read(this,O,!0,52,8)},T.prototype.readDoubleBE=function(O,N){return O=O>>>0,N||ge(O,8,this.length),a.read(this,O,!1,52,8)};function q(C,O,N,U,X,ee){if(!T.isBuffer(C))throw new TypeError('"buffer" argument must be a Buffer instance');if(O>X||O<ee)throw new RangeError('"value" argument is out of bounds');if(N+U>C.length)throw new RangeError("Index out of range")}T.prototype.writeUintLE=T.prototype.writeUIntLE=function(O,N,U,X){if(O=+O,N=N>>>0,U=U>>>0,!X){const Me=Math.pow(2,8*U)-1;q(this,O,N,U,Me,0)}let ee=1,ie=0;for(this[N]=O&255;++ie<U&&(ee*=256);)this[N+ie]=O/ee&255;return N+U},T.prototype.writeUintBE=T.prototype.writeUIntBE=function(O,N,U,X){if(O=+O,N=N>>>0,U=U>>>0,!X){const Me=Math.pow(2,8*U)-1;q(this,O,N,U,Me,0)}let ee=U-1,ie=1;for(this[N+ee]=O&255;--ee>=0&&(ie*=256);)this[N+ee]=O/ie&255;return N+U},T.prototype.writeUint8=T.prototype.writeUInt8=function(O,N,U){return O=+O,N=N>>>0,U||q(this,O,N,1,255,0),this[N]=O&255,N+1},T.prototype.writeUint16LE=T.prototype.writeUInt16LE=function(O,N,U){return O=+O,N=N>>>0,U||q(this,O,N,2,65535,0),this[N]=O&255,this[N+1]=O>>>8,N+2},T.prototype.writeUint16BE=T.prototype.writeUInt16BE=function(O,N,U){return O=+O,N=N>>>0,U||q(this,O,N,2,65535,0),this[N]=O>>>8,this[N+1]=O&255,N+2},T.prototype.writeUint32LE=T.prototype.writeUInt32LE=function(O,N,U){return O=+O,N=N>>>0,U||q(this,O,N,4,4294967295,0),this[N+3]=O>>>24,this[N+2]=O>>>16,this[N+1]=O>>>8,this[N]=O&255,N+4},T.prototype.writeUint32BE=T.prototype.writeUInt32BE=function(O,N,U){return O=+O,N=N>>>0,U||q(this,O,N,4,4294967295,0),this[N]=O>>>24,this[N+1]=O>>>16,this[N+2]=O>>>8,this[N+3]=O&255,N+4};function G(C,O,N,U,X){zt(O,U,X,C,N,7);let ee=Number(O&BigInt(4294967295));C[N++]=ee,ee=ee>>8,C[N++]=ee,ee=ee>>8,C[N++]=ee,ee=ee>>8,C[N++]=ee;let ie=Number(O>>BigInt(32)&BigInt(4294967295));return C[N++]=ie,ie=ie>>8,C[N++]=ie,ie=ie>>8,C[N++]=ie,ie=ie>>8,C[N++]=ie,N}function L(C,O,N,U,X){zt(O,U,X,C,N,7);let ee=Number(O&BigInt(4294967295));C[N+7]=ee,ee=ee>>8,C[N+6]=ee,ee=ee>>8,C[N+5]=ee,ee=ee>>8,C[N+4]=ee;let ie=Number(O>>BigInt(32)&BigInt(4294967295));return C[N+3]=ie,ie=ie>>8,C[N+2]=ie,ie=ie>>8,C[N+1]=ie,ie=ie>>8,C[N]=ie,N+8}T.prototype.writeBigUInt64LE=Ks(function(O,N=0){return G(this,O,N,BigInt(0),BigInt("0xffffffffffffffff"))}),T.prototype.writeBigUInt64BE=Ks(function(O,N=0){return L(this,O,N,BigInt(0),BigInt("0xffffffffffffffff"))}),T.prototype.writeIntLE=function(O,N,U,X){if(O=+O,N=N>>>0,!X){const Ue=Math.pow(2,8*U-1);q(this,O,N,U,Ue-1,-Ue)}let ee=0,ie=1,Me=0;for(this[N]=O&255;++ee<U&&(ie*=256);)O<0&&Me===0&&this[N+ee-1]!==0&&(Me=1),this[N+ee]=(O/ie>>0)-Me&255;return N+U},T.prototype.writeIntBE=function(O,N,U,X){if(O=+O,N=N>>>0,!X){const Ue=Math.pow(2,8*U-1);q(this,O,N,U,Ue-1,-Ue)}let ee=U-1,ie=1,Me=0;for(this[N+ee]=O&255;--ee>=0&&(ie*=256);)O<0&&Me===0&&this[N+ee+1]!==0&&(Me=1),this[N+ee]=(O/ie>>0)-Me&255;return N+U},T.prototype.writeInt8=function(O,N,U){return O=+O,N=N>>>0,U||q(this,O,N,1,127,-128),O<0&&(O=255+O+1),this[N]=O&255,N+1},T.prototype.writeInt16LE=function(O,N,U){return O=+O,N=N>>>0,U||q(this,O,N,2,32767,-32768),this[N]=O&255,this[N+1]=O>>>8,N+2},T.prototype.writeInt16BE=function(O,N,U){return O=+O,N=N>>>0,U||q(this,O,N,2,32767,-32768),this[N]=O>>>8,this[N+1]=O&255,N+2},T.prototype.writeInt32LE=function(O,N,U){return O=+O,N=N>>>0,U||q(this,O,N,4,2147483647,-2147483648),this[N]=O&255,this[N+1]=O>>>8,this[N+2]=O>>>16,this[N+3]=O>>>24,N+4},T.prototype.writeInt32BE=function(O,N,U){return O=+O,N=N>>>0,U||q(this,O,N,4,2147483647,-2147483648),O<0&&(O=4294967295+O+1),this[N]=O>>>24,this[N+1]=O>>>16,this[N+2]=O>>>8,this[N+3]=O&255,N+4},T.prototype.writeBigInt64LE=Ks(function(O,N=0){return G(this,O,N,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),T.prototype.writeBigInt64BE=Ks(function(O,N=0){return L(this,O,N,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Y(C,O,N,U,X,ee){if(N+U>C.length)throw new RangeError("Index out of range");if(N<0)throw new RangeError("Index out of range")}function Q(C,O,N,U,X){return O=+O,N=N>>>0,X||Y(C,O,N,4),a.write(C,O,N,U,23,4),N+4}T.prototype.writeFloatLE=function(O,N,U){return Q(this,O,N,!0,U)},T.prototype.writeFloatBE=function(O,N,U){return Q(this,O,N,!1,U)};function ae(C,O,N,U,X){return O=+O,N=N>>>0,X||Y(C,O,N,8),a.write(C,O,N,U,52,8),N+8}T.prototype.writeDoubleLE=function(O,N,U){return ae(this,O,N,!0,U)},T.prototype.writeDoubleBE=function(O,N,U){return ae(this,O,N,!1,U)},T.prototype.copy=function(O,N,U,X){if(!T.isBuffer(O))throw new TypeError("argument should be a Buffer");if(U||(U=0),!X&&X!==0&&(X=this.length),N>=O.length&&(N=O.length),N||(N=0),X>0&&X<U&&(X=U),X===U||O.length===0||this.length===0)return 0;if(N<0)throw new RangeError("targetStart out of bounds");if(U<0||U>=this.length)throw new RangeError("Index out of range");if(X<0)throw new RangeError("sourceEnd out of bounds");X>this.length&&(X=this.length),O.length-N<X-U&&(X=O.length-N+U);const ee=X-U;return this===O&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(N,U,X):Uint8Array.prototype.set.call(O,this.subarray(U,X),N),ee},T.prototype.fill=function(O,N,U,X){if(typeof O=="string"){if(typeof N=="string"?(X=N,N=0,U=this.length):typeof U=="string"&&(X=U,U=this.length),X!==void 0&&typeof X!="string")throw new TypeError("encoding must be a string");if(typeof X=="string"&&!T.isEncoding(X))throw new TypeError("Unknown encoding: "+X);if(O.length===1){const ie=O.charCodeAt(0);(X==="utf8"&&ie<128||X==="latin1")&&(O=ie)}}else typeof O=="number"?O=O&255:typeof O=="boolean"&&(O=Number(O));if(N<0||this.length<N||this.length<U)throw new RangeError("Out of range index");if(U<=N)return this;N=N>>>0,U=U===void 0?this.length:U>>>0,O||(O=0);let ee;if(typeof O=="number")for(ee=N;ee<U;++ee)this[ee]=O;else{const ie=T.isBuffer(O)?O:T.from(O,X),Me=ie.length;if(Me===0)throw new TypeError('The value "'+O+'" is invalid for argument "value"');for(ee=0;ee<U-N;++ee)this[ee+N]=ie[ee%Me]}return this};const re={};function _e(C,O,N){re[C]=class extends N{constructor(){super(),Object.defineProperty(this,"message",{value:O.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${C}]`,this.stack,delete this.name}get code(){return C}set code(X){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:X,writable:!0})}toString(){return`${this.name} [${C}]: ${this.message}`}}}_e("ERR_BUFFER_OUT_OF_BOUNDS",function(C){return C?`${C} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),_e("ERR_INVALID_ARG_TYPE",function(C,O){return`The "${C}" argument must be of type number. Received type ${typeof O}`},TypeError),_e("ERR_OUT_OF_RANGE",function(C,O,N){let U=`The value of "${C}" is out of range.`,X=N;return Number.isInteger(N)&&Math.abs(N)>4294967296?X=Ee(String(N)):typeof N=="bigint"&&(X=String(N),(N>BigInt(2)**BigInt(32)||N<-(BigInt(2)**BigInt(32)))&&(X=Ee(X)),X+="n"),U+=` It must be ${O}. Received ${X}`,U},RangeError);function Ee(C){let O="",N=C.length;const U=C[0]==="-"?1:0;for(;N>=U+4;N-=3)O=`_${C.slice(N-3,N)}${O}`;return`${C.slice(0,N)}${O}`}function Je(C,O,N){At(O,"offset"),(C[O]===void 0||C[O+N]===void 0)&&et(O,C.length-(N+1))}function zt(C,O,N,U,X,ee){if(C>N||C<O){const ie=typeof O=="bigint"?"n":"";let Me;throw ee>3?O===0||O===BigInt(0)?Me=`>= 0${ie} and < 2${ie} ** ${(ee+1)*8}${ie}`:Me=`>= -(2${ie} ** ${(ee+1)*8-1}${ie}) and < 2 ** ${(ee+1)*8-1}${ie}`:Me=`>= ${O}${ie} and <= ${N}${ie}`,new re.ERR_OUT_OF_RANGE("value",Me,C)}Je(U,X,ee)}function At(C,O){if(typeof C!="number")throw new re.ERR_INVALID_ARG_TYPE(O,"number",C)}function et(C,O,N){throw Math.floor(C)!==C?(At(C,N),new re.ERR_OUT_OF_RANGE(N||"offset","an integer",C)):O<0?new re.ERR_BUFFER_OUT_OF_BOUNDS:new re.ERR_OUT_OF_RANGE(N||"offset",`>= ${N?1:0} and <= ${O}`,C)}const fn=/[^+/0-9A-Za-z-_]/g;function qn(C){if(C=C.split("=")[0],C=C.trim().replace(fn,""),C.length<2)return"";for(;C.length%4!==0;)C=C+"=";return C}function gs(C,O){O=O||1/0;let N;const U=C.length;let X=null;const ee=[];for(let ie=0;ie<U;++ie){if(N=C.charCodeAt(ie),N>55295&&N<57344){if(!X){if(N>56319){(O-=3)>-1&&ee.push(239,191,189);continue}else if(ie+1===U){(O-=3)>-1&&ee.push(239,191,189);continue}X=N;continue}if(N<56320){(O-=3)>-1&&ee.push(239,191,189),X=N;continue}N=(X-55296<<10|N-56320)+65536}else X&&(O-=3)>-1&&ee.push(239,191,189);if(X=null,N<128){if((O-=1)<0)break;ee.push(N)}else if(N<2048){if((O-=2)<0)break;ee.push(N>>6|192,N&63|128)}else if(N<65536){if((O-=3)<0)break;ee.push(N>>12|224,N>>6&63|128,N&63|128)}else if(N<1114112){if((O-=4)<0)break;ee.push(N>>18|240,N>>12&63|128,N>>6&63|128,N&63|128)}else throw new Error("Invalid code point")}return ee}function ue(C){const O=[];for(let N=0;N<C.length;++N)O.push(C.charCodeAt(N)&255);return O}function Bi(C,O){let N,U,X;const ee=[];for(let ie=0;ie<C.length&&!((O-=2)<0);++ie)N=C.charCodeAt(ie),U=N>>8,X=N%256,ee.push(X),ee.push(U);return ee}function ni(C){return u.toByteArray(qn(C))}function Xr(C,O,N,U){let X;for(X=0;X<U&&!(X+N>=O.length||X>=C.length);++X)O[X+N]=C[X];return X}function vn(C,O){return C instanceof O||C!=null&&C.constructor!=null&&C.constructor.name!=null&&C.constructor.name===O.name}function rc(C){return C!==C}const ac=function(){const C="0123456789abcdef",O=new Array(256);for(let N=0;N<16;++N){const U=N*16;for(let X=0;X<16;++X)O[U+X]=C[N]+C[X]}return O}();function Ks(C){return typeof BigInt>"u"?oc:C}function oc(){throw new Error("BigInt not supported")}},8769:(c,d,f)=>{var u,a=TypeError,_=Object.getOwnPropertyDescriptor;if(_)try{_({},"")}catch{_=null}var w=function(){throw new a},m=_?function(){try{return arguments.callee,w}catch{try{return _(arguments,"callee").get}catch{return w}}}():w,l=f(1405)(),T=Object.getPrototypeOf||function(D){return D.__proto__},b=u,S=u,x=u,B=typeof Uint8Array>"u"?u:T(Uint8Array),F={"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?u:ArrayBuffer,"%ArrayBufferPrototype%":typeof ArrayBuffer>"u"?u:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":l?T([][Symbol.iterator]()):u,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":u,"%AsyncFunction%":S,"%AsyncFunctionPrototype%":u,"%AsyncGenerator%":u,"%AsyncGeneratorFunction%":x,"%AsyncGeneratorPrototype%":u,"%AsyncIteratorPrototype%":u,"%Atomics%":typeof Atomics>"u"?u:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":typeof DataView>"u"?u:DataView,"%DataViewPrototype%":typeof DataView>"u"?u:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":typeof Float32Array>"u"?u:Float32Array,"%Float32ArrayPrototype%":typeof Float32Array>"u"?u:Float32Array.prototype,"%Float64Array%":typeof Float64Array>"u"?u:Float64Array,"%Float64ArrayPrototype%":typeof Float64Array>"u"?u:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":u,"%GeneratorFunction%":b,"%GeneratorPrototype%":u,"%Int8Array%":typeof Int8Array>"u"?u:Int8Array,"%Int8ArrayPrototype%":typeof Int8Array>"u"?u:Int8Array.prototype,"%Int16Array%":typeof Int16Array>"u"?u:Int16Array,"%Int16ArrayPrototype%":typeof Int16Array>"u"?u:Int8Array.prototype,"%Int32Array%":typeof Int32Array>"u"?u:Int32Array,"%Int32ArrayPrototype%":typeof Int32Array>"u"?u:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":l?T(T([][Symbol.iterator]())):u,"%JSON%":typeof JSON=="object"?JSON:u,"%JSONParse%":typeof JSON=="object"?JSON.parse:u,"%Map%":typeof Map>"u"?u:Map,"%MapIteratorPrototype%":typeof Map>"u"||!l?u:T(new Map()[Symbol.iterator]()),"%MapPrototype%":typeof Map>"u"?u:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?u:Promise,"%PromisePrototype%":typeof Promise>"u"?u:Promise.prototype,"%PromiseProto_then%":typeof Promise>"u"?u:Promise.prototype.then,"%Promise_all%":typeof Promise>"u"?u:Promise.all,"%Promise_reject%":typeof Promise>"u"?u:Promise.reject,"%Promise_resolve%":typeof Promise>"u"?u:Promise.resolve,"%Proxy%":typeof Proxy>"u"?u:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":typeof Reflect>"u"?u:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":typeof Set>"u"?u:Set,"%SetIteratorPrototype%":typeof Set>"u"||!l?u:T(new Set()[Symbol.iterator]()),"%SetPrototype%":typeof Set>"u"?u:Set.prototype,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?u:SharedArrayBuffer,"%SharedArrayBufferPrototype%":typeof SharedArrayBuffer>"u"?u:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":l?T(""[Symbol.iterator]()):u,"%StringPrototype%":String.prototype,"%Symbol%":l?Symbol:u,"%SymbolPrototype%":l?Symbol.prototype:u,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":m,"%TypedArray%":B,"%TypedArrayPrototype%":B?B.prototype:u,"%TypeError%":a,"%TypeErrorPrototype%":a.prototype,"%Uint8Array%":typeof Uint8Array>"u"?u:Uint8Array,"%Uint8ArrayPrototype%":typeof Uint8Array>"u"?u:Uint8Array.prototype,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?u:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":typeof Uint8ClampedArray>"u"?u:Uint8ClampedArray.prototype,"%Uint16Array%":typeof Uint16Array>"u"?u:Uint16Array,"%Uint16ArrayPrototype%":typeof Uint16Array>"u"?u:Uint16Array.prototype,"%Uint32Array%":typeof Uint32Array>"u"?u:Uint32Array,"%Uint32ArrayPrototype%":typeof Uint32Array>"u"?u:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":typeof WeakMap>"u"?u:WeakMap,"%WeakMapPrototype%":typeof WeakMap>"u"?u:WeakMap.prototype,"%WeakSet%":typeof WeakSet>"u"?u:WeakSet,"%WeakSetPrototype%":typeof WeakSet>"u"?u:WeakSet.prototype},k=f(8612),A=k.call(Function.call,String.prototype.replace),M=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,R=/\\(\\)?/g,P=function(z){var $=[];return A(z,M,function(K,H,W,J){$[$.length]=W?A(J,R,"$1"):H||K}),$},j=function(z,$){if(!(z in F))throw new SyntaxError("intrinsic "+z+" does not exist!");if(typeof F[z]>"u"&&!$)throw new a("intrinsic "+z+" exists, but is not available. Please file an issue!");return F[z]};c.exports=function(z,$){if(typeof z!="string"||z.length===0)throw new TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof $!="boolean")throw new TypeError('"allowMissing" argument must be a boolean');for(var K=P(z),H=j("%"+(K.length>0?K[0]:"")+"%",$),W=1;W<K.length;W+=1)if(H!=null)if(_&&W+1>=K.length){var J=_(H,K[W]);if(!$&&!(K[W]in H))throw new a("base intrinsic for "+z+" exists, but the property is not available.");H=J&&"get"in J&&!("originalValue"in J.get)?J.get:H[K[W]]}else H=H[K[W]];return H}},4147:(c,d,f)=>{var u=f(8612),a=f(8769),_=a("%Function.prototype.apply%"),w=a("%Function.prototype.call%"),m=a("%Reflect.apply%",!0)||u.call(w,_),l=a("%Object.defineProperty%",!0);if(l)try{l({},"a",{value:1})}catch{l=null}c.exports=function(){return m(u,w,arguments)};var T=function(){return m(u,_,arguments)};l?l(c.exports,"apply",{value:T}):c.exports.apply=T},8914:(c,d,f)=>{var u=f(8769),a=f(4147),_=a(u("String.prototype.indexOf"));c.exports=function(m,l){var T=u(m,!!l);return typeof T=="function"&&_(m,".prototype.")?a(T):T}},4079:(c,d,f)=>{var u=f(8769),a=u("%Object.getOwnPropertyDescriptor%");if(a)try{a([],"length")}catch{a=null}c.exports=a},6729:c=>{var d=Object.prototype.hasOwnProperty,f="~";function u(){}Object.create&&(u.prototype=Object.create(null),new u().__proto__||(f=!1));function a(l,T,b){this.fn=l,this.context=T,this.once=b||!1}function _(l,T,b,S,x){if(typeof b!="function")throw new TypeError("The listener must be a function");var B=new a(b,S||l,x),F=f?f+T:T;return l._events[F]?l._events[F].fn?l._events[F]=[l._events[F],B]:l._events[F].push(B):(l._events[F]=B,l._eventsCount++),l}function w(l,T){--l._eventsCount===0?l._events=new u:delete l._events[T]}function m(){this._events=new u,this._eventsCount=0}m.prototype.eventNames=function(){var T=[],b,S;if(this._eventsCount===0)return T;for(S in b=this._events)d.call(b,S)&&T.push(f?S.slice(1):S);return Object.getOwnPropertySymbols?T.concat(Object.getOwnPropertySymbols(b)):T},m.prototype.listeners=function(T){var b=f?f+T:T,S=this._events[b];if(!S)return[];if(S.fn)return[S.fn];for(var x=0,B=S.length,F=new Array(B);x<B;x++)F[x]=S[x].fn;return F},m.prototype.listenerCount=function(T){var b=f?f+T:T,S=this._events[b];return S?S.fn?1:S.length:0},m.prototype.emit=function(T,b,S,x,B,F){var k=f?f+T:T;if(!this._events[k])return!1;var A=this._events[k],M=arguments.length,R,P;if(A.fn){switch(A.once&&this.removeListener(T,A.fn,void 0,!0),M){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,b),!0;case 3:return A.fn.call(A.context,b,S),!0;case 4:return A.fn.call(A.context,b,S,x),!0;case 5:return A.fn.call(A.context,b,S,x,B),!0;case 6:return A.fn.call(A.context,b,S,x,B,F),!0}for(P=1,R=new Array(M-1);P<M;P++)R[P-1]=arguments[P];A.fn.apply(A.context,R)}else{var j=A.length,D;for(P=0;P<j;P++)switch(A[P].once&&this.removeListener(T,A[P].fn,void 0,!0),M){case 1:A[P].fn.call(A[P].context);break;case 2:A[P].fn.call(A[P].context,b);break;case 3:A[P].fn.call(A[P].context,b,S);break;case 4:A[P].fn.call(A[P].context,b,S,x);break;default:if(!R)for(D=1,R=new Array(M-1);D<M;D++)R[D-1]=arguments[D];A[P].fn.apply(A[P].context,R)}}return!0},m.prototype.on=function(T,b,S){return _(this,T,b,S,!1)},m.prototype.once=function(T,b,S){return _(this,T,b,S,!0)},m.prototype.removeListener=function(T,b,S,x){var B=f?f+T:T;if(!this._events[B])return this;if(!b)return w(this,B),this;var F=this._events[B];if(F.fn)F.fn===b&&(!x||F.once)&&(!S||F.context===S)&&w(this,B);else{for(var k=0,A=[],M=F.length;k<M;k++)(F[k].fn!==b||x&&!F[k].once||S&&F[k].context!==S)&&A.push(F[k]);A.length?this._events[B]=A.length===1?A[0]:A:w(this,B)}return this},m.prototype.removeAllListeners=function(T){var b;return T?(b=f?f+T:T,this._events[b]&&w(this,b)):(this._events=new u,this._eventsCount=0),this},m.prototype.off=m.prototype.removeListener,m.prototype.addListener=m.prototype.on,m.prefixed=f,m.EventEmitter=m,c.exports=m},7187:c=>{var d=typeof Reflect=="object"?Reflect:null,f=d&&typeof d.apply=="function"?d.apply:function(j,D,z){return Function.prototype.apply.call(j,D,z)},u;d&&typeof d.ownKeys=="function"?u=d.ownKeys:Object.getOwnPropertySymbols?u=function(j){return Object.getOwnPropertyNames(j).concat(Object.getOwnPropertySymbols(j))}:u=function(j){return Object.getOwnPropertyNames(j)};function a(P){console&&console.warn&&console.warn(P)}var _=Number.isNaN||function(j){return j!==j};function w(){w.init.call(this)}c.exports=w,c.exports.once=R,w.EventEmitter=w,w.prototype._events=void 0,w.prototype._eventsCount=0,w.prototype._maxListeners=void 0;var m=10;function l(P){if(typeof P!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof P)}Object.defineProperty(w,"defaultMaxListeners",{enumerable:!0,get:function(){return m},set:function(P){if(typeof P!="number"||P<0||_(P))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+P+".");m=P}}),w.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},w.prototype.setMaxListeners=function(j){if(typeof j!="number"||j<0||_(j))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+j+".");return this._maxListeners=j,this};function T(P){return P._maxListeners===void 0?w.defaultMaxListeners:P._maxListeners}w.prototype.getMaxListeners=function(){return T(this)},w.prototype.emit=function(j){for(var D=[],z=1;z<arguments.length;z++)D.push(arguments[z]);var $=j==="error",K=this._events;if(K!==void 0)$=$&&K.error===void 0;else if(!$)return!1;if($){var H;if(D.length>0&&(H=D[0]),H instanceof Error)throw H;var W=new Error("Unhandled error."+(H?" ("+H.message+")":""));throw W.context=H,W}var J=K[j];if(J===void 0)return!1;if(typeof J=="function")f(J,this,D);else for(var V=J.length,le=k(J,V),z=0;z<V;++z)f(le[z],this,D);return!0};function b(P,j,D,z){var $,K,H;if(l(D),K=P._events,K===void 0?(K=P._events=Object.create(null),P._eventsCount=0):(K.newListener!==void 0&&(P.emit("newListener",j,D.listener?D.listener:D),K=P._events),H=K[j]),H===void 0)H=K[j]=D,++P._eventsCount;else if(typeof H=="function"?H=K[j]=z?[D,H]:[H,D]:z?H.unshift(D):H.push(D),$=T(P),$>0&&H.length>$&&!H.warned){H.warned=!0;var W=new Error("Possible EventEmitter memory leak detected. "+H.length+" "+String(j)+" listeners added. Use emitter.setMaxListeners() to increase limit");W.name="MaxListenersExceededWarning",W.emitter=P,W.type=j,W.count=H.length,a(W)}return P}w.prototype.addListener=function(j,D){return b(this,j,D,!1)},w.prototype.on=w.prototype.addListener,w.prototype.prependListener=function(j,D){return b(this,j,D,!0)};function S(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function x(P,j,D){var z={fired:!1,wrapFn:void 0,target:P,type:j,listener:D},$=S.bind(z);return $.listener=D,z.wrapFn=$,$}w.prototype.once=function(j,D){return l(D),this.on(j,x(this,j,D)),this},w.prototype.prependOnceListener=function(j,D){return l(D),this.prependListener(j,x(this,j,D)),this},w.prototype.removeListener=function(j,D){var z,$,K,H,W;if(l(D),$=this._events,$===void 0)return this;if(z=$[j],z===void 0)return this;if(z===D||z.listener===D)--this._eventsCount===0?this._events=Object.create(null):(delete $[j],$.removeListener&&this.emit("removeListener",j,z.listener||D));else if(typeof z!="function"){for(K=-1,H=z.length-1;H>=0;H--)if(z[H]===D||z[H].listener===D){W=z[H].listener,K=H;break}if(K<0)return this;K===0?z.shift():A(z,K),z.length===1&&($[j]=z[0]),$.removeListener!==void 0&&this.emit("removeListener",j,W||D)}return this},w.prototype.off=w.prototype.removeListener,w.prototype.removeAllListeners=function(j){var D,z,$;if(z=this._events,z===void 0)return this;if(z.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):z[j]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete z[j]),this;if(arguments.length===0){var K=Object.keys(z),H;for($=0;$<K.length;++$)H=K[$],H!=="removeListener"&&this.removeAllListeners(H);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(D=z[j],typeof D=="function")this.removeListener(j,D);else if(D!==void 0)for($=D.length-1;$>=0;$--)this.removeListener(j,D[$]);return this};function B(P,j,D){var z=P._events;if(z===void 0)return[];var $=z[j];return $===void 0?[]:typeof $=="function"?D?[$.listener||$]:[$]:D?M($):k($,$.length)}w.prototype.listeners=function(j){return B(this,j,!0)},w.prototype.rawListeners=function(j){return B(this,j,!1)},w.listenerCount=function(P,j){return typeof P.listenerCount=="function"?P.listenerCount(j):F.call(P,j)},w.prototype.listenerCount=F;function F(P){var j=this._events;if(j!==void 0){var D=j[P];if(typeof D=="function")return 1;if(D!==void 0)return D.length}return 0}w.prototype.eventNames=function(){return this._eventsCount>0?u(this._events):[]};function k(P,j){for(var D=new Array(j),z=0;z<j;++z)D[z]=P[z];return D}function A(P,j){for(;j+1<P.length;j++)P[j]=P[j+1];P.pop()}function M(P){for(var j=new Array(P.length),D=0;D<j.length;++D)j[D]=P[D].listener||P[D];return j}function R(P,j){return new Promise(function(D,z){function $(){K!==void 0&&P.removeListener("error",K),D([].slice.call(arguments))}var K;j!=="error"&&(K=function(W){P.removeListener(j,$),z(W)},P.once("error",K)),P.once(j,$)})}},9804:c=>{var d=Object.prototype.hasOwnProperty,f=Object.prototype.toString;c.exports=function(a,_,w){if(f.call(_)!=="[object Function]")throw new TypeError("iterator must be a function");var m=a.length;if(m===+m)for(var l=0;l<m;l++)_.call(w,a[l],l,a);else for(var T in a)d.call(a,T)&&_.call(w,a[T],T,a)}},7648:c=>{var d="Function.prototype.bind called on incompatible ",f=Array.prototype.slice,u=Object.prototype.toString,a="[object Function]";c.exports=function(w){var m=this;if(typeof m!="function"||u.call(m)!==a)throw new TypeError(d+m);for(var l=f.call(arguments,1),T,b=function(){if(this instanceof T){var k=m.apply(this,l.concat(f.call(arguments)));return Object(k)===k?k:this}else return m.apply(w,l.concat(f.call(arguments)))},S=Math.max(0,m.length-l.length),x=[],B=0;B<S;B++)x.push("$"+B);if(T=Function("binder","return function ("+x.join(",")+"){ return binder.apply(this,arguments); }")(b),m.prototype){var F=function(){};F.prototype=m.prototype,T.prototype=new F,F.prototype=null}return T}},8612:(c,d,f)=>{var u=f(7648);c.exports=Function.prototype.bind||u},1405:(c,d,f)=>{var u=f.g.Symbol,a=f(5419);c.exports=function(){return typeof u!="function"||typeof Symbol!="function"||typeof u("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:a()}},5419:c=>{c.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var f={},u=Symbol("test"),a=Object(u);if(typeof u=="string"||Object.prototype.toString.call(u)!=="[object Symbol]"||Object.prototype.toString.call(a)!=="[object Symbol]")return!1;var _=42;f[u]=_;for(u in f)return!1;if(typeof Object.keys=="function"&&Object.keys(f).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(f).length!==0)return!1;var w=Object.getOwnPropertySymbols(f);if(w.length!==1||w[0]!==u||!Object.prototype.propertyIsEnumerable.call(f,u))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var m=Object.getOwnPropertyDescriptor(f,u);if(m.value!==_||m.enumerable!==!0)return!1}return!0}},645:(c,d)=>{/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */d.read=function(f,u,a,_,w){var m,l,T=w*8-_-1,b=(1<<T)-1,S=b>>1,x=-7,B=a?w-1:0,F=a?-1:1,k=f[u+B];for(B+=F,m=k&(1<<-x)-1,k>>=-x,x+=T;x>0;m=m*256+f[u+B],B+=F,x-=8);for(l=m&(1<<-x)-1,m>>=-x,x+=_;x>0;l=l*256+f[u+B],B+=F,x-=8);if(m===0)m=1-S;else{if(m===b)return l?NaN:(k?-1:1)*(1/0);l=l+Math.pow(2,_),m=m-S}return(k?-1:1)*l*Math.pow(2,m-_)},d.write=function(f,u,a,_,w,m){var l,T,b,S=m*8-w-1,x=(1<<S)-1,B=x>>1,F=w===23?Math.pow(2,-24)-Math.pow(2,-77):0,k=_?0:m-1,A=_?1:-1,M=u<0||u===0&&1/u<0?1:0;for(u=Math.abs(u),isNaN(u)||u===1/0?(T=isNaN(u)?1:0,l=x):(l=Math.floor(Math.log(u)/Math.LN2),u*(b=Math.pow(2,-l))<1&&(l--,b*=2),l+B>=1?u+=F/b:u+=F*Math.pow(2,1-B),u*b>=2&&(l++,b/=2),l+B>=x?(T=0,l=x):l+B>=1?(T=(u*b-1)*Math.pow(2,w),l=l+B):(T=u*Math.pow(2,B-1)*Math.pow(2,w),l=0));w>=8;f[a+k]=T&255,k+=A,T/=256,w-=8);for(l=l<<w|T,S+=w;S>0;f[a+k]=l&255,k+=A,l/=256,S-=8);f[a+k-A]|=M*128}},5717:c=>{typeof Object.create=="function"?c.exports=function(f,u){u&&(f.super_=u,f.prototype=Object.create(u.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}))}:c.exports=function(f,u){if(u){f.super_=u;var a=function(){};a.prototype=u.prototype,f.prototype=new a,f.prototype.constructor=f}}},2584:c=>{var d=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",f=Object.prototype.toString,u=function(m){return d&&m&&typeof m=="object"&&Symbol.toStringTag in m?!1:f.call(m)==="[object Arguments]"},a=function(m){return u(m)?!0:m!==null&&typeof m=="object"&&typeof m.length=="number"&&m.length>=0&&f.call(m)!=="[object Array]"&&f.call(m.callee)==="[object Function]"},_=function(){return u(arguments)}();u.isLegacyArguments=a,c.exports=_?u:a},8662:c=>{var d=Object.prototype.toString,f=Function.prototype.toString,u=/^\s*(?:function)?\*/,a=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",_=Object.getPrototypeOf,w=function(){if(!a)return!1;try{return Function("return function*() {}")()}catch{}},m=w(),l=m?_(m):{};c.exports=function(b){if(typeof b!="function")return!1;if(u.test(f.call(b)))return!0;if(!a){var S=d.call(b);return S==="[object GeneratorFunction]"}return _(b)===l}},5692:(c,d,f)=>{var u=f(9804),a=f(6314),_=f(8914),w=_("Object.prototype.toString"),m=f(1405)(),l=m&&typeof Symbol.toStringTag=="symbol",T=a(),b=_("Array.prototype.indexOf",!0)||function(M,R){for(var P=0;P<M.length;P+=1)if(M[P]===R)return P;return-1},S=_("String.prototype.slice"),x={},B=f(4079),F=Object.getPrototypeOf;l&&B&&F&&u(T,function(A){var M=new f.g[A];if(!(Symbol.toStringTag in M))throw new EvalError("this engine has support for Symbol.toStringTag, but "+A+" does not have the property! Please report this.");var R=F(M),P=B(R,Symbol.toStringTag);if(!P){var j=F(R);P=B(j,Symbol.toStringTag)}x[A]=P.get});var k=function(M){var R=!1;return u(x,function(P,j){if(!R)try{R=P.call(M)===j}catch{}}),R};c.exports=function(M){if(!M||typeof M!="object")return!1;if(!l){var R=S(w(M),8,-1);return b(T,R)>-1}return B?k(M):!1}},6792:(c,d,f)=>{var u=null;typeof WebSocket<"u"?u=WebSocket:typeof MozWebSocket<"u"?u=MozWebSocket:typeof f.g<"u"?u=f.g.WebSocket||f.g.MozWebSocket:typeof window<"u"?u=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(u=self.WebSocket||self.MozWebSocket),c.exports=u},135:(c,d,f)=>{for(var u=f(8764).Buffer,a=4294967296,_=[],w=0;w<256;w++)_[w]=(w>15?"":"0")+w.toString(16);var m=c.exports=function(l,T){l instanceof u?(this.buffer=l,this.offset=T||0):Object.prototype.toString.call(l)=="[object Uint8Array]"?(this.buffer=new u(l),this.offset=T||0):(this.buffer=this.buffer||new u(8),this.offset=0,this.setValue.apply(this,arguments))};m.MAX_INT=Math.pow(2,53),m.MIN_INT=-Math.pow(2,53),m.prototype={constructor:m,_2scomp:function(){for(var l=this.buffer,T=this.offset,b=1,S=T+7;S>=T;S--){var x=(l[S]^255)+b;l[S]=x&255,b=x>>8}},setValue:function(l,T){var b=!1;if(arguments.length==1)if(typeof l=="number"){if(b=l<0,l=Math.abs(l),T=l%a,l=l/a,l>a)throw new RangeError(l+" is outside Int64 range");l=l|0}else if(typeof l=="string")l=(l+"").replace(/^0x/,""),T=l.substr(-8),l=l.length>8?l.substr(0,l.length-8):"",l=parseInt(l,16),T=parseInt(T,16);else throw new Error(l+" must be a Number or String");for(var S=this.buffer,x=this.offset,B=7;B>=0;B--)S[x+B]=T&255,T=B==4?l:T>>>8;b&&this._2scomp()},toNumber:function(l){for(var T=this.buffer,b=this.offset,S=T[b]&128,x=0,B=1,F=7,k=1;F>=0;F--,k*=256){var A=T[b+F];S&&(A=(A^255)+B,B=A>>8,A=A&255),x+=A*k}return!l&&x>=m.MAX_INT?S?-1/0:1/0:S?-x:x},valueOf:function(){return this.toNumber(!1)},toString:function(l){return this.valueOf().toString(l||10)},toOctetString:function(l){for(var T=new Array(8),b=this.buffer,S=this.offset,x=0;x<8;x++)T[x]=_[b[S+x]];return T.join(l||"")},toBuffer:function(l){if(l&&this.offset===0)return this.buffer;var T=new u(8);return this.buffer.copy(T,0,this.offset,this.offset+8),T},copy:function(l,T){this.buffer.copy(l,T||0,this.offset,this.offset+8)},compare:function(l){if((this.buffer[this.offset]&128)!=(l.buffer[l.offset]&128))return l.buffer[l.offset]-this.buffer[this.offset];for(var T=0;T<8;T++)if(this.buffer[this.offset+T]!==l.buffer[l.offset+T])return this.buffer[this.offset+T]-l.buffer[l.offset+T];return 0},equals:function(l){return this.compare(l)===0},inspect:function(){return"[Int64 value:"+this+" octets:"+this.toOctetString(" ")+"]"}}},8486:c=>{/*!
 *
 * Copyright 2009-2017 Kris Kowal under the terms of the MIT
 * license found at https://github.com/kriskowal/q/blob/v1/LICENSE
 *
 * With parts by Tyler Close
 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
 * at http://www.opensource.org/licenses/mit-license.html
 * Forked at ref_send.js version: 2009-05-11
 *
 * With parts by Mark Miller
 * Copyright (C) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */(function(d){typeof bootstrap=="function"?bootstrap("promise",d):c.exports=d()})(function(){var d=!1;try{throw new Error}catch(C){d=!!C.stack}var f=W(),u,a=function(){},_=function(){var C={task:void 0,next:null},O=C,N=!1,U=void 0,X=!1,ee=[];function ie(){for(var Xe,Ke;C.next;)C=C.next,Xe=C.task,C.task=void 0,Ke=C.domain,Ke&&(C.domain=void 0,Ke.enter()),Me(Xe,Ke);for(;ee.length;)Xe=ee.pop(),Me(Xe);N=!1}function Me(Xe,Ke){try{Xe()}catch(lc){if(X)throw Ke&&Ke.exit(),setTimeout(ie,0),Ke&&Ke.enter(),lc;setTimeout(function(){throw lc},0)}Ke&&Ke.exit()}if(_=function(Xe){O=O.next={task:Xe,domain:X&&process.domain,next:null},N||(N=!0,U())},typeof process=="object"&&process.toString()==="[object process]"&&process.nextTick)X=!0,U=function(){process.nextTick(ie)};else if(typeof setImmediate=="function")typeof window<"u"?U=setImmediate.bind(window,ie):U=function(){setImmediate(ie)};else if(typeof MessageChannel<"u"){var Ue=new MessageChannel;Ue.port1.onmessage=function(){U=ze,Ue.port1.onmessage=ie,ie()};var ze=function(){Ue.port2.postMessage(0)};U=function(){setTimeout(ie,0),ze()}}else U=function(){setTimeout(ie,0)};return _.runAfter=function(Xe){ee.push(Xe),N||(N=!0,U())},_}(),w=Function.call;function m(C){return function(){return w.apply(C,arguments)}}var l=m(Array.prototype.slice),T=m(Array.prototype.reduce||function(C,O){var N=0,U=this.length;if(arguments.length===1)do{if(N in this){O=this[N++];break}if(++N>=U)throw new TypeError}while(1);for(;N<U;N++)N in this&&(O=C(O,this[N],N));return O}),b=m(Array.prototype.indexOf||function(C){for(var O=0;O<this.length;O++)if(this[O]===C)return O;return-1}),S=m(Array.prototype.map||function(C,O){var N=this,U=[];return T(N,function(X,ee,ie){U.push(C.call(O,ee,ie,N))},void 0),U}),x=Object.create||function(C){function O(){}return O.prototype=C,new O},B=Object.defineProperty||function(C,O,N){return C[O]=N.value,C},F=m(Object.prototype.hasOwnProperty),k=Object.keys||function(C){var O=[];for(var N in C)F(C,N)&&O.push(N);return O},A=m(Object.prototype.toString);function M(C){return C===Object(C)}function R(C){return A(C)==="[object StopIteration]"||C instanceof P}var P;typeof ReturnValue<"u"?P=ReturnValue:P=function(C){this.value=C};var j="From previous event:";function D(C,O){if(d&&O.stack&&typeof C=="object"&&C!==null&&C.stack){for(var N=[],U=O;U;U=U.source)U.stack&&(!C.__minimumStackCounter__||C.__minimumStackCounter__>U.stackCounter)&&(B(C,"__minimumStackCounter__",{value:U.stackCounter,configurable:!0}),N.unshift(U.stack));N.unshift(C.stack);var X=N.join(`
`+j+`
`),ee=z(X);B(C,"stack",{value:ee,configurable:!0})}}function z(C){for(var O=C.split(`
`),N=[],U=0;U<O.length;++U){var X=O[U];!H(X)&&!$(X)&&X&&N.push(X)}return N.join(`
`)}function $(C){return C.indexOf("(module.js:")!==-1||C.indexOf("(node.js:")!==-1}function K(C){var O=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(C);if(O)return[O[1],Number(O[2])];var N=/at ([^ ]+):(\d+):(?:\d+)$/.exec(C);if(N)return[N[1],Number(N[2])];var U=/.*@(.+):(\d+)$/.exec(C);if(U)return[U[1],Number(U[2])]}function H(C){var O=K(C);if(!O)return!1;var N=O[0],U=O[1];return N===u&&U>=f&&U<=oc}function W(){if(!!d)try{throw new Error}catch(U){var C=U.stack.split(`
`),O=C[0].indexOf("@")>0?C[1]:C[2],N=K(O);return N?(u=N[0],N[1]):void 0}}function J(C,O,N){return function(){return typeof console<"u"&&typeof console.warn=="function"&&console.warn(O+" is deprecated, use "+N+" instead.",new Error("").stack),C.apply(C,arguments)}}function V(C){return C instanceof fe?C:Bt(C)?zt(C):Je(C)}V.resolve=V,V.nextTick=_,V.longStackSupport=!1;var le=1;typeof process=="object"&&process&&{BROWSER:!0}&&{BROWSER:!0}.Q_DEBUG&&(V.longStackSupport=!0),V.defer=pe;function pe(){var C=[],O=[],N,U=x(pe.prototype),X=x(fe.prototype);if(X.promiseDispatch=function(ie,Me,Ue){var ze=l(arguments);C?(C.push(ze),Me==="when"&&Ue[1]&&O.push(Ue[1])):V.nextTick(function(){N.promiseDispatch.apply(N,ze)})},X.valueOf=function(){if(C)return X;var ie=Ce(N);return We(ie)&&(N=ie),ie},X.inspect=function(){return N?N.inspect():{state:"pending"}},V.longStackSupport&&d)try{throw new Error}catch(ie){X.stack=ie.stack.substring(ie.stack.indexOf(`
`)+1),X.stackCounter=le++}function ee(ie){N=ie,V.longStackSupport&&d&&(X.source=ie),T(C,function(Me,Ue){V.nextTick(function(){ie.promiseDispatch.apply(ie,Ue)})},void 0),C=void 0,O=void 0}return U.promise=X,U.resolve=function(ie){N||ee(V(ie))},U.fulfill=function(ie){N||ee(Je(ie))},U.reject=function(ie){N||ee(Ee(ie))},U.notify=function(ie){N||T(O,function(Me,Ue){V.nextTick(function(){Ue(ie)})},void 0)},U}pe.prototype.makeNodeResolver=function(){var C=this;return function(O,N){O?C.reject(O):arguments.length>2?C.resolve(l(arguments,1)):C.resolve(N)}},V.Promise=se,V.promise=se;function se(C){if(typeof C!="function")throw new TypeError("resolver must be a function.");var O=pe();try{C(O.resolve,O.reject,O.notify)}catch(N){O.reject(N)}return O.promise}se.race=Ne,se.all=ni,se.reject=Ee,se.resolve=V,V.passByCopy=function(C){return C},fe.prototype.passByCopy=function(){return this},V.join=function(C,O){return V(C).join(O)},fe.prototype.join=function(C){return V([this,C]).spread(function(O,N){if(O===N)return O;throw new Error("Q can't join: not the same: "+O+" "+N)})},V.race=Ne;function Ne(C){return se(function(O,N){for(var U=0,X=C.length;U<X;U++)V(C[U]).then(O,N)})}fe.prototype.race=function(){return this.then(V.race)},V.makePromise=fe;function fe(C,O,N){O===void 0&&(O=function(ee){return Ee(new Error("Promise does not support operation: "+ee))}),N===void 0&&(N=function(){return{state:"unknown"}});var U=x(fe.prototype);if(U.promiseDispatch=function(ee,ie,Me){var Ue;try{C[ie]?Ue=C[ie].apply(U,Me):Ue=O.call(U,ie,Me)}catch(ze){Ue=Ee(ze)}ee&&ee(Ue)},U.inspect=N,N){var X=N();X.state==="rejected"&&(U.exception=X.reason),U.valueOf=function(){var ee=N();return ee.state==="pending"||ee.state==="rejected"?U:ee.value}}return U}fe.prototype.toString=function(){return"[object Promise]"},fe.prototype.then=function(C,O,N){var U=this,X=pe(),ee=!1;function ie(ze){try{return typeof C=="function"?C(ze):ze}catch(Xe){return Ee(Xe)}}function Me(ze){if(typeof O=="function"){D(ze,U);try{return O(ze)}catch(Xe){return Ee(Xe)}}return Ee(ze)}function Ue(ze){return typeof N=="function"?N(ze):ze}return V.nextTick(function(){U.promiseDispatch(function(ze){ee||(ee=!0,X.resolve(ie(ze)))},"when",[function(ze){ee||(ee=!0,X.resolve(Me(ze)))}])}),U.promiseDispatch(void 0,"when",[void 0,function(ze){var Xe,Ke=!1;try{Xe=Ue(ze)}catch(lc){if(Ke=!0,V.onerror)V.onerror(lc);else throw lc}Ke||X.notify(Xe)}]),X.promise},V.tap=function(C,O){return V(C).tap(O)},fe.prototype.tap=function(C){return C=V(C),this.then(function(O){return C.fcall(O).thenResolve(O)})},V.when=Oe;function Oe(C,O,N,U){return V(C).then(O,N,U)}fe.prototype.thenResolve=function(C){return this.then(function(){return C})},V.thenResolve=function(C,O){return V(C).thenResolve(O)},fe.prototype.thenReject=function(C){return this.then(function(){throw C})},V.thenReject=function(C,O){return V(C).thenReject(O)},V.nearer=Ce;function Ce(C){if(We(C)){var O=C.inspect();if(O.state==="fulfilled")return O.value}return C}V.isPromise=We;function We(C){return C instanceof fe}V.isPromiseAlike=Bt;function Bt(C){return M(C)&&typeof C.then=="function"}V.isPending=vt;function vt(C){return We(C)&&C.inspect().state==="pending"}fe.prototype.isPending=function(){return this.inspect().state==="pending"},V.isFulfilled=ge;function ge(C){return!We(C)||C.inspect().state==="fulfilled"}fe.prototype.isFulfilled=function(){return this.inspect().state==="fulfilled"},V.isRejected=q;function q(C){return We(C)&&C.inspect().state==="rejected"}fe.prototype.isRejected=function(){return this.inspect().state==="rejected"};var G=[],L=[],Y=[],Q=!0;function ae(){G.length=0,L.length=0,Q||(Q=!0)}function re(C,O){!Q||(typeof process=="object"&&typeof process.emit=="function"&&V.nextTick.runAfter(function(){b(L,C)!==-1&&(process.emit("unhandledRejection",O,C),Y.push(C))}),L.push(C),O&&typeof O.stack<"u"?G.push(O.stack):G.push("(no stack) "+O))}function _e(C){if(!!Q){var O=b(L,C);O!==-1&&(typeof process=="object"&&typeof process.emit=="function"&&V.nextTick.runAfter(function(){var N=b(Y,C);N!==-1&&(process.emit("rejectionHandled",G[O],C),Y.splice(N,1))}),L.splice(O,1),G.splice(O,1))}}V.resetUnhandledRejections=ae,V.getUnhandledReasons=function(){return G.slice()},V.stopUnhandledRejectionTracking=function(){ae(),Q=!1},ae(),V.reject=Ee;function Ee(C){var O=fe({when:function(N){return N&&_e(this),N?N(C):this}},function(){return this},function(){return{state:"rejected",reason:C}});return re(O,C),O}V.fulfill=Je;function Je(C){return fe({when:function(){return C},get:function(O){return C[O]},set:function(O,N){C[O]=N},delete:function(O){delete C[O]},post:function(O,N){return O==null?C.apply(void 0,N):C[O].apply(C,N)},apply:function(O,N){return C.apply(O,N)},keys:function(){return k(C)}},void 0,function(){return{state:"fulfilled",value:C}})}function zt(C){var O=pe();return V.nextTick(function(){try{C.then(O.resolve,O.reject,O.notify)}catch(N){O.reject(N)}}),O.promise}V.master=At;function At(C){return fe({isDef:function(){}},function(N,U){return Bi(C,N,U)},function(){return V(C).inspect()})}V.spread=et;function et(C,O,N){return V(C).spread(O,N)}fe.prototype.spread=function(C,O){return this.all().then(function(N){return C.apply(void 0,N)},O)},V.async=fn;function fn(C){return function(){function O(ee,ie){var Me;if(typeof StopIteration>"u"){try{Me=N[ee](ie)}catch(Ue){return Ee(Ue)}return Me.done?V(Me.value):Oe(Me.value,U,X)}else{try{Me=N[ee](ie)}catch(Ue){return R(Ue)?V(Ue.value):Ee(Ue)}return Oe(Me,U,X)}}var N=C.apply(this,arguments),U=O.bind(O,"next"),X=O.bind(O,"throw");return U()}}V.spawn=qn;function qn(C){V.done(V.async(C)())}V.return=gs;function gs(C){throw new P(C)}V.promised=ue;function ue(C){return function(){return et([this,ni(arguments)],function(O,N){return C.apply(O,N)})}}V.dispatch=Bi;function Bi(C,O,N){return V(C).dispatch(O,N)}fe.prototype.dispatch=function(C,O){var N=this,U=pe();return V.nextTick(function(){N.promiseDispatch(U.resolve,C,O)}),U.promise},V.get=function(C,O){return V(C).dispatch("get",[O])},fe.prototype.get=function(C){return this.dispatch("get",[C])},V.set=function(C,O,N){return V(C).dispatch("set",[O,N])},fe.prototype.set=function(C,O){return this.dispatch("set",[C,O])},V.del=V.delete=function(C,O){return V(C).dispatch("delete",[O])},fe.prototype.del=fe.prototype.delete=function(C){return this.dispatch("delete",[C])},V.mapply=V.post=function(C,O,N){return V(C).dispatch("post",[O,N])},fe.prototype.mapply=fe.prototype.post=function(C,O){return this.dispatch("post",[C,O])},V.send=V.mcall=V.invoke=function(C,O){return V(C).dispatch("post",[O,l(arguments,2)])},fe.prototype.send=fe.prototype.mcall=fe.prototype.invoke=function(C){return this.dispatch("post",[C,l(arguments,1)])},V.fapply=function(C,O){return V(C).dispatch("apply",[void 0,O])},fe.prototype.fapply=function(C){return this.dispatch("apply",[void 0,C])},V.try=V.fcall=function(C){return V(C).dispatch("apply",[void 0,l(arguments,1)])},fe.prototype.fcall=function(){return this.dispatch("apply",[void 0,l(arguments)])},V.fbind=function(C){var O=V(C),N=l(arguments,1);return function(){return O.dispatch("apply",[this,N.concat(l(arguments))])}},fe.prototype.fbind=function(){var C=this,O=l(arguments);return function(){return C.dispatch("apply",[this,O.concat(l(arguments))])}},V.keys=function(C){return V(C).dispatch("keys",[])},fe.prototype.keys=function(){return this.dispatch("keys",[])},V.all=ni;function ni(C){return Oe(C,function(O){var N=0,U=pe();return T(O,function(X,ee,ie){var Me;We(ee)&&(Me=ee.inspect()).state==="fulfilled"?O[ie]=Me.value:(++N,Oe(ee,function(Ue){O[ie]=Ue,--N===0&&U.resolve(O)},U.reject,function(Ue){U.notify({index:ie,value:Ue})}))},void 0),N===0&&U.resolve(O),U.promise})}fe.prototype.all=function(){return ni(this)},V.any=Xr;function Xr(C){if(C.length===0)return V.resolve();var O=V.defer(),N=0;return T(C,function(U,X,ee){var ie=C[ee];N++,Oe(ie,Me,Ue,ze);function Me(Xe){O.resolve(Xe)}function Ue(Xe){if(N--,N===0){var Ke=Xe||new Error(""+Xe);Ke.message="Q can't get fulfillment value from any promise, all promises were rejected. Last error message: "+Ke.message,O.reject(Ke)}}function ze(Xe){O.notify({index:ee,value:Xe})}},void 0),O.promise}fe.prototype.any=function(){return Xr(this)},V.allResolved=J(vn,"allResolved","allSettled");function vn(C){return Oe(C,function(O){return O=S(O,V),Oe(ni(S(O,function(N){return Oe(N,a,a)})),function(){return O})})}fe.prototype.allResolved=function(){return vn(this)},V.allSettled=rc;function rc(C){return V(C).allSettled()}fe.prototype.allSettled=function(){return this.then(function(C){return ni(S(C,function(O){O=V(O);function N(){return O.inspect()}return O.then(N,N)}))})},V.fail=V.catch=function(C,O){return V(C).then(void 0,O)},fe.prototype.fail=fe.prototype.catch=function(C){return this.then(void 0,C)},V.progress=ac;function ac(C,O){return V(C).then(void 0,void 0,O)}fe.prototype.progress=function(C){return this.then(void 0,void 0,C)},V.fin=V.finally=function(C,O){return V(C).finally(O)},fe.prototype.fin=fe.prototype.finally=function(C){if(!C||typeof C.apply!="function")throw new Error("Q can't apply finally callback");return C=V(C),this.then(function(O){return C.fcall().then(function(){return O})},function(O){return C.fcall().then(function(){throw O})})},V.done=function(C,O,N,U){return V(C).done(O,N,U)},fe.prototype.done=function(C,O,N){var U=function(ee){V.nextTick(function(){if(D(ee,X),V.onerror)V.onerror(ee);else throw ee})},X=C||O||N?this.then(C,O,N):this;typeof process=="object"&&process&&process.domain&&(U=process.domain.bind(U)),X.then(void 0,U)},V.timeout=function(C,O,N){return V(C).timeout(O,N)},fe.prototype.timeout=function(C,O){var N=pe(),U=setTimeout(function(){(!O||typeof O=="string")&&(O=new Error(O||"Timed out after "+C+" ms"),O.code="ETIMEDOUT"),N.reject(O)},C);return this.then(function(X){clearTimeout(U),N.resolve(X)},function(X){clearTimeout(U),N.reject(X)},N.notify),N.promise},V.delay=function(C,O){return O===void 0&&(O=C,C=void 0),V(C).delay(O)},fe.prototype.delay=function(C){return this.then(function(O){var N=pe();return setTimeout(function(){N.resolve(O)},C),N.promise})},V.nfapply=function(C,O){return V(C).nfapply(O)},fe.prototype.nfapply=function(C){var O=pe(),N=l(C);return N.push(O.makeNodeResolver()),this.fapply(N).fail(O.reject),O.promise},V.nfcall=function(C){var O=l(arguments,1);return V(C).nfapply(O)},fe.prototype.nfcall=function(){var C=l(arguments),O=pe();return C.push(O.makeNodeResolver()),this.fapply(C).fail(O.reject),O.promise},V.nfbind=V.denodeify=function(C){if(C===void 0)throw new Error("Q can't wrap an undefined function");var O=l(arguments,1);return function(){var N=O.concat(l(arguments)),U=pe();return N.push(U.makeNodeResolver()),V(C).fapply(N).fail(U.reject),U.promise}},fe.prototype.nfbind=fe.prototype.denodeify=function(){var C=l(arguments);return C.unshift(this),V.denodeify.apply(void 0,C)},V.nbind=function(C,O){var N=l(arguments,2);return function(){var U=N.concat(l(arguments)),X=pe();U.push(X.makeNodeResolver());function ee(){return C.apply(O,arguments)}return V(ee).fapply(U).fail(X.reject),X.promise}},fe.prototype.nbind=function(){var C=l(arguments,0);return C.unshift(this),V.nbind.apply(void 0,C)},V.nmapply=V.npost=function(C,O,N){return V(C).npost(O,N)},fe.prototype.nmapply=fe.prototype.npost=function(C,O){var N=l(O||[]),U=pe();return N.push(U.makeNodeResolver()),this.dispatch("post",[C,N]).fail(U.reject),U.promise},V.nsend=V.nmcall=V.ninvoke=function(C,O){var N=l(arguments,2),U=pe();return N.push(U.makeNodeResolver()),V(C).dispatch("post",[O,N]).fail(U.reject),U.promise},fe.prototype.nsend=fe.prototype.nmcall=fe.prototype.ninvoke=function(C){var O=l(arguments,1),N=pe();return O.push(N.makeNodeResolver()),this.dispatch("post",[C,O]).fail(N.reject),N.promise},V.nodeify=Ks;function Ks(C,O){return V(C).nodeify(O)}fe.prototype.nodeify=function(C){if(C)this.then(function(O){V.nextTick(function(){C(null,O)})},function(O){V.nextTick(function(){C(O)})});else return this},V.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var oc=W();return V})},7533:(c,d)=>{var f=Math.pow(2,8),u=Math.pow(2,16),a=Math.pow(2,24),_=Math.pow(2,32),w=Math.pow(2,40),m=Math.pow(2,48),l=Math.pow(2,52),T=Math.pow(2,1022);d.readByte=function(b){return b>127?b-256:b},d.readI16=function(b,S){S=S||0;var x=b[S+1];return x+=b[S]<<8,b[S]&128&&(x-=u),x},d.readI32=function(b,S){S=S||0;var x=b[S+3];return x+=b[S+2]<<8,x+=b[S+1]<<16,x+=b[S]*a,b[S]&128&&(x-=_),x},d.writeI16=function(b,S){return b[1]=S&255,S>>=8,b[0]=S&255,b},d.writeI32=function(b,S){return b[3]=S&255,S>>=8,b[2]=S&255,S>>=8,b[1]=S&255,S>>=8,b[0]=S&255,b},d.readDouble=function(b,S){S=S||0;var x=b[S]&128,B=(b[S+1]&240)>>4;B+=(b[S]&127)<<4;var F=b[S+7];switch(F+=b[S+6]<<8,F+=b[S+5]<<16,F+=b[S+4]*a,F+=b[S+3]*_,F+=b[S+2]*w,F+=(b[S+1]&15)*m,B){case 0:B=-1022;break;case 2047:return F?NaN:x?-1/0:1/0;default:F+=l,B-=1023}return x&&(F*=-1),F*Math.pow(2,B-52)},d.writeDouble=function(b,S){var x,B,F;return b[0]=S<0?128:0,S=Math.abs(S),S!==S?(x=0x8000000000000,B=2047):S===1/0?(x=0,B=2047):(B=Math.floor(Math.log(S)/Math.LN2),F=Math.pow(2,-B),S*F<1&&(B--,F*=2),B+1023>=2047?(x=0,B=2047):B+1023>=1?(x=(S*F-1)*l,B+=1023):(x=S*T*l,B=0)),b[1]=B<<4&240,b[0]|=B>>4&127,b[7]=x&255,x=Math.floor(x/f),b[6]=x&255,x=Math.floor(x/f),b[5]=x&255,x=Math.floor(x/f),b[4]=x&255,x>>=8,b[3]=x&255,x>>=8,b[2]=x&255,x>>=8,b[1]|=x&15,b}},4711:(c,d,f)=>{var u=f(8764).Buffer,a=f(1291),_=f(7533),w=f(135),m=f(5406),l=m.Type;c.exports=x;var T=-65536,b=-2147418112,S=255;x.VERSION_MASK=T,x.VERSION_1=b,x.TYPE_MASK=S;function x(B,F,k){this.trans=B,this.strictRead=F!==void 0?F:!1,this.strictWrite=k!==void 0?k:!0,this._seqid=null}x.prototype.flush=function(){return this.trans.flush()},x.prototype.writeMessageBegin=function(B,F,k){this.strictWrite?(this.writeI32(b|F),this.writeString(B),this.writeI32(k)):(this.writeString(B),this.writeByte(F),this.writeI32(k)),this._seqid!==null?a.warning("SeqId already set",{name:B}):(this._seqid=k,this.trans.setCurrSeqId(k))},x.prototype.writeMessageEnd=function(){this._seqid!==null?this._seqid=null:a.warning("No seqid to unset")},x.prototype.writeStructBegin=function(B){},x.prototype.writeStructEnd=function(){},x.prototype.writeFieldBegin=function(B,F,k){this.writeByte(F),this.writeI16(k)},x.prototype.writeFieldEnd=function(){},x.prototype.writeFieldStop=function(){this.writeByte(l.STOP)},x.prototype.writeMapBegin=function(B,F,k){this.writeByte(B),this.writeByte(F),this.writeI32(k)},x.prototype.writeMapEnd=function(){},x.prototype.writeListBegin=function(B,F){this.writeByte(B),this.writeI32(F)},x.prototype.writeListEnd=function(){},x.prototype.writeSetBegin=function(B,F){this.writeByte(B),this.writeI32(F)},x.prototype.writeSetEnd=function(){},x.prototype.writeBool=function(B){B?this.writeByte(1):this.writeByte(0)},x.prototype.writeByte=function(B){this.trans.write(new u([B]))},x.prototype.writeI16=function(B){this.trans.write(_.writeI16(new u(2),B))},x.prototype.writeI32=function(B){this.trans.write(_.writeI32(new u(4),B))},x.prototype.writeI64=function(B){B.buffer?this.trans.write(B.buffer):this.trans.write(new w(B).buffer)},x.prototype.writeDouble=function(B){this.trans.write(_.writeDouble(new u(8),B))},x.prototype.writeStringOrBinary=function(B,F,k){if(typeof k=="string")this.writeI32(u.byteLength(k,F)),this.trans.write(new u(k,F));else if(k instanceof u||Object.prototype.toString.call(k)=="[object Uint8Array]")this.writeI32(k.length),this.trans.write(k);else throw new Error(B+" called without a string/Buffer argument: "+k)},x.prototype.writeString=function(B){this.writeStringOrBinary("writeString","utf8",B)},x.prototype.writeBinary=function(B){this.writeStringOrBinary("writeBinary","binary",B)},x.prototype.readMessageBegin=function(){var B=this.readI32(),F,k,A;if(B<0){var M=B&T;if(M!=b)throw new m.TProtocolException(m.TProtocolExceptionType.BAD_VERSION,"Bad version in readMessageBegin: "+B);F=B&S,k=this.readString(),A=this.readI32()}else{if(this.strictRead)throw new m.TProtocolException(m.TProtocolExceptionType.BAD_VERSION,"No protocol version header");k=this.trans.read(B),F=this.readByte(),A=this.readI32()}return{fname:k,mtype:F,rseqid:A}},x.prototype.readMessageEnd=function(){},x.prototype.readStructBegin=function(){return{fname:""}},x.prototype.readStructEnd=function(){},x.prototype.readFieldBegin=function(){var B=this.readByte();if(B==l.STOP)return{fname:null,ftype:B,fid:0};var F=this.readI16();return{fname:null,ftype:B,fid:F}},x.prototype.readFieldEnd=function(){},x.prototype.readMapBegin=function(){var B=this.readByte(),F=this.readByte(),k=this.readI32();return{ktype:B,vtype:F,size:k}},x.prototype.readMapEnd=function(){},x.prototype.readListBegin=function(){var B=this.readByte(),F=this.readI32();return{etype:B,size:F}},x.prototype.readListEnd=function(){},x.prototype.readSetBegin=function(){var B=this.readByte(),F=this.readI32();return{etype:B,size:F}},x.prototype.readSetEnd=function(){},x.prototype.readBool=function(){var B=this.readByte();return B!==0},x.prototype.readByte=function(){return this.trans.readByte()},x.prototype.readI16=function(){return this.trans.readI16()},x.prototype.readI32=function(){return this.trans.readI32()},x.prototype.readI64=function(){var B=this.trans.read(8);return new w(B)},x.prototype.readDouble=function(){return this.trans.readDouble()},x.prototype.readBinary=function(){var B=this.readI32();if(B===0)return new u(0);if(B<0)throw new m.TProtocolException(m.TProtocolExceptionType.NEGATIVE_SIZE,"Negative binary size");return this.trans.read(B)},x.prototype.readString=function(){var B=this.readI32();if(B===0)return"";if(B<0)throw new m.TProtocolException(m.TProtocolExceptionType.NEGATIVE_SIZE,"Negative string size");return this.trans.readString(B)},x.prototype.getTransport=function(){return this.trans},x.prototype.skip=function(B){switch(B){case l.BOOL:this.readBool();break;case l.BYTE:this.readByte();break;case l.I16:this.readI16();break;case l.I32:this.readI32();break;case l.I64:this.readI64();break;case l.DOUBLE:this.readDouble();break;case l.STRING:this.readString();break;case l.STRUCT:for(this.readStructBegin();;){var F=this.readFieldBegin();if(F.ftype===l.STOP)break;this.skip(F.ftype),this.readFieldEnd()}this.readStructEnd();break;case l.MAP:for(var k=this.readMapBegin(),A=0;A<k.size;++A)this.skip(k.ktype),this.skip(k.vtype);this.readMapEnd();break;case l.SET:for(var M=this.readSetBegin(),R=0;R<M.size;++R)this.skip(M.etype);this.readSetEnd();break;case l.LIST:for(var P=this.readListBegin(),j=0;j<P.size;++j)this.skip(P.etype);this.readListEnd();break;default:throw new Error("Invalid type: "+B)}}},9262:(c,d,f)=>{d.Thrift=f(5406);var u=f(5455);d.WSConnection=u.WSConnection,d.createWSConnection=u.createWSConnection,d.createWSClient=u.createWSClient;var a=f(4050);d.XHRConnection=a.XHRConnection,d.createXHRConnection=a.createXHRConnection,d.createXHRClient=a.createXHRClient,d.Int64=f(135),d.Q=f(8486);var _=f(4184);d.Multiplexer=_.Multiplexer,d.TBufferedTransport=f(8869),d.TFramedTransport=f(7584),d.TWebSocketTransport=f(5764),d.Protocol=f(5086),d.TJSONProtocol=f(5086),d.TBinaryProtocol=f(4711),d.TCompactProtocol=f(9277)},8869:(c,d,f)=>{var u=f(8764).Buffer,a=f(7533),_=f(3590),w=f(5190);c.exports=m;function m(l,T){this.defaultReadBufferSize=1024,this.writeBufferSize=512,this.inBuf=new u(this.defaultReadBufferSize),this.readCursor=0,this.writeCursor=0,this.outBuffers=[],this.outCount=0,this.onFlush=T}m.prototype=new w,m.prototype.reset=function(){this.inBuf=new u(this.defaultReadBufferSize),this.readCursor=0,this.writeCursor=0,this.outBuffers=[],this.outCount=0},m.receiver=function(l,T){var b=new m;return function(S){if(b.writeCursor+S.length>b.inBuf.length){var x=new u(b.writeCursor+S.length);b.inBuf.copy(x,0,0,b.writeCursor),b.inBuf=x}S.copy(b.inBuf,b.writeCursor,0),b.writeCursor+=S.length,l(b,T)}},m.prototype.commitPosition=function(){var l=this.writeCursor-this.readCursor,T=l*2>this.defaultReadBufferSize?l*2:this.defaultReadBufferSize,b=new u(T);l>0&&this.inBuf.copy(b,0,this.readCursor,this.writeCursor),this.readCursor=0,this.writeCursor=l,this.inBuf=b},m.prototype.rollbackPosition=function(){this.readCursor=0},m.prototype.isOpen=function(){return!0},m.prototype.open=function(){},m.prototype.close=function(){},m.prototype.setCurrSeqId=function(l){this._seqid=l},m.prototype.ensureAvailable=function(l){if(this.readCursor+l>this.writeCursor)throw new _},m.prototype.read=function(l){this.ensureAvailable(l);var T=new u(l);return this.inBuf.copy(T,0,this.readCursor,this.readCursor+l),this.readCursor+=l,T},m.prototype.readByte=function(){return this.ensureAvailable(1),a.readByte(this.inBuf[this.readCursor++])},m.prototype.readI16=function(){this.ensureAvailable(2);var l=a.readI16(this.inBuf,this.readCursor);return this.readCursor+=2,l},m.prototype.readI32=function(){this.ensureAvailable(4);var l=a.readI32(this.inBuf,this.readCursor);return this.readCursor+=4,l},m.prototype.readDouble=function(){this.ensureAvailable(8);var l=a.readDouble(this.inBuf,this.readCursor);return this.readCursor+=8,l},m.prototype.readString=function(l){this.ensureAvailable(l);var T=this.inBuf.toString("utf8",this.readCursor,this.readCursor+l);return this.readCursor+=l,T},m.prototype.borrow=function(){var l={buf:this.inBuf,readIndex:this.readCursor,writeIndex:this.writeCursor};return l},m.prototype.consume=function(l){this.readCursor+=l},m.prototype.write=function(l){typeof l=="string"&&(l=new u(l,"utf8")),this.outBuffers.push(l),this.outCount+=l.length},m.prototype.flush=function(){var l=this._seqid;if(this._seqid=null,!(this.outCount<1)){var T=new u(this.outCount),b=0;this.outBuffers.forEach(function(S){S.copy(T,b,0),b+=S.length}),this.onFlush&&this.onFlush(T,l),this.outBuffers=[],this.outCount=0}}},9277:(c,d,f)=>{var u=f(8764).Buffer,a=f(1291),_=f(135),w=f(5406),m=w.Type;c.exports=k;var l=Math.pow(2,8),T=Math.pow(2,24),b=Math.pow(2,32),S=Math.pow(2,40),x=Math.pow(2,48),B=Math.pow(2,52),F=Math.pow(2,1022);function k(A){this.trans=A,this.lastField_=[],this.lastFieldId_=0,this.string_limit_=0,this.string_buf_=null,this.string_buf_size_=0,this.container_limit_=0,this.booleanField_={name:null,hasBoolValue:!1},this.boolValue_={hasBoolValue:!1,boolValue:!1}}k.PROTOCOL_ID=-126,k.VERSION_N=1,k.VERSION_MASK=31,k.TYPE_MASK=-32,k.TYPE_BITS=7,k.TYPE_SHIFT_AMOUNT=5,k.Types={CT_STOP:0,CT_BOOLEAN_TRUE:1,CT_BOOLEAN_FALSE:2,CT_BYTE:3,CT_I16:4,CT_I32:5,CT_I64:6,CT_DOUBLE:7,CT_BINARY:8,CT_LIST:9,CT_SET:10,CT_MAP:11,CT_STRUCT:12},k.TTypeToCType=[k.Types.CT_STOP,0,k.Types.CT_BOOLEAN_TRUE,k.Types.CT_BYTE,k.Types.CT_DOUBLE,0,k.Types.CT_I16,0,k.Types.CT_I32,0,k.Types.CT_I64,k.Types.CT_BINARY,k.Types.CT_STRUCT,k.Types.CT_MAP,k.Types.CT_SET,k.Types.CT_LIST],k.prototype.getTransport=function(){return this.trans},k.prototype.getCompactType=function(A){return k.TTypeToCType[A]},k.prototype.getTType=function(A){switch(A){case m.STOP:return m.STOP;case k.Types.CT_BOOLEAN_FALSE:case k.Types.CT_BOOLEAN_TRUE:return m.BOOL;case k.Types.CT_BYTE:return m.BYTE;case k.Types.CT_I16:return m.I16;case k.Types.CT_I32:return m.I32;case k.Types.CT_I64:return m.I64;case k.Types.CT_DOUBLE:return m.DOUBLE;case k.Types.CT_BINARY:return m.STRING;case k.Types.CT_LIST:return m.LIST;case k.Types.CT_SET:return m.SET;case k.Types.CT_MAP:return m.MAP;case k.Types.CT_STRUCT:return m.STRUCT;default:throw new w.TProtocolException(w.TProtocolExceptionType.INVALID_DATA,"Unknown type: "+A)}return m.STOP},k.prototype.flush=function(){return this.trans.flush()},k.prototype.writeMessageBegin=function(A,M,R){this.writeByte(k.PROTOCOL_ID),this.writeByte(k.VERSION_N&k.VERSION_MASK|M<<k.TYPE_SHIFT_AMOUNT&k.TYPE_MASK),this.writeVarint32(R),this.writeString(A),this._seqid?a.warning("SeqId already set",{name:A}):(this._seqid=R,this.trans.setCurrSeqId(R))},k.prototype.writeMessageEnd=function(){},k.prototype.writeStructBegin=function(A){this.lastField_.push(this.lastFieldId_),this.lastFieldId_=0},k.prototype.writeStructEnd=function(){this.lastFieldId_=this.lastField_.pop()},k.prototype.writeFieldBegin=function(A,M,R){if(M!=m.BOOL)return this.writeFieldBeginInternal(A,M,R,-1);this.booleanField_.name=A,this.booleanField_.fieldType=M,this.booleanField_.fieldId=R},k.prototype.writeFieldEnd=function(){},k.prototype.writeFieldStop=function(){this.writeByte(k.Types.CT_STOP)},k.prototype.writeMapBegin=function(A,M,R){R===0?this.writeByte(0):(this.writeVarint32(R),this.writeByte(this.getCompactType(A)<<4|this.getCompactType(M)))},k.prototype.writeMapEnd=function(){},k.prototype.writeListBegin=function(A,M){this.writeCollectionBegin(A,M)},k.prototype.writeListEnd=function(){},k.prototype.writeSetBegin=function(A,M){this.writeCollectionBegin(A,M)},k.prototype.writeSetEnd=function(){},k.prototype.writeBool=function(A){this.booleanField_.name!==null?(this.writeFieldBeginInternal(this.booleanField_.name,this.booleanField_.fieldType,this.booleanField_.fieldId,A?k.Types.CT_BOOLEAN_TRUE:k.Types.CT_BOOLEAN_FALSE),this.booleanField_.name=null):this.writeByte(A?k.Types.CT_BOOLEAN_TRUE:k.Types.CT_BOOLEAN_FALSE)},k.prototype.writeByte=function(A){this.trans.write(new u([A]))},k.prototype.writeI16=function(A){this.writeVarint32(this.i32ToZigzag(A))},k.prototype.writeI32=function(A){this.writeVarint32(this.i32ToZigzag(A))},k.prototype.writeI64=function(A){this.writeVarint64(this.i64ToZigzag(A))},k.prototype.writeDouble=function(A){var M=new u(8),R,P,j;M[7]=A<0?128:0,A=Math.abs(A),A!==A?(R=0x8000000000000,P=2047):A===1/0?(R=0,P=2047):(P=Math.floor(Math.log(A)/Math.LN2),j=Math.pow(2,-P),A*j<1&&(P--,j*=2),P+1023>=2047?(R=0,P=2047):P+1023>=1?(R=(A*j-1)*B,P+=1023):(R=A*F*B,P=0)),M[6]=P<<4&240,M[7]|=P>>4&127,M[0]=R&255,R=Math.floor(R/l),M[1]=R&255,R=Math.floor(R/l),M[2]=R&255,R=Math.floor(R/l),M[3]=R&255,R>>=8,M[4]=R&255,R>>=8,M[5]=R&255,R>>=8,M[6]|=R&15,this.trans.write(M)},k.prototype.writeStringOrBinary=function(A,M,R){if(typeof R=="string")this.writeVarint32(u.byteLength(R,M)),this.trans.write(new u(R,M));else if(R instanceof u||Object.prototype.toString.call(R)=="[object Uint8Array]")this.writeVarint32(R.length),this.trans.write(R);else throw new Error(A+" called without a string/Buffer argument: "+R)},k.prototype.writeString=function(A){this.writeStringOrBinary("writeString","utf8",A)},k.prototype.writeBinary=function(A){this.writeStringOrBinary("writeBinary","binary",A)},k.prototype.writeFieldBeginInternal=function(A,M,R,P){var j=P==-1?this.getCompactType(M):P;R>this.lastFieldId_&&R-this.lastFieldId_<=15?this.writeByte(R-this.lastFieldId_<<4|j):(this.writeByte(j),this.writeI16(R)),this.lastFieldId_=R},k.prototype.writeCollectionBegin=function(A,M){M<=14?this.writeByte(M<<4|this.getCompactType(A)):(this.writeByte(240|this.getCompactType(A)),this.writeVarint32(M))},k.prototype.writeVarint32=function(A){for(var M=new u(5),R=0;;)if((A&-128)===0){M[R++]=A;break}else M[R++]=A&127|128,A=A>>>7;var P=new u(R);M.copy(P,0,0,R),this.trans.write(P)},k.prototype.writeVarint64=function(A){if(typeof A=="number"&&(A=new _(A)),!(A instanceof _))throw new w.TProtocolException(w.TProtocolExceptionType.INVALID_DATA,"Expected Int64 or Number, found: "+A);for(var M=new u(10),R=0,P=A.buffer.readUInt32BE(0,!0),j=A.buffer.readUInt32BE(4,!0),D=0;;)if((j&-128)===0&&P===0){M[R++]=j;break}else M[R++]=j&127|128,D=P<<25,j=j>>>7,P=P>>>7,j=j|D;var z=new u(R);M.copy(z,0,0,R),this.trans.write(z)},k.prototype.i64ToZigzag=function(A){if(typeof A=="string"?A=new _(parseInt(A,10)):typeof A=="number"&&(A=new _(A)),!(A instanceof _))throw new w.TProtocolException(w.TProtocolExceptionType.INVALID_DATA,"Expected Int64 or Number, found: "+A);var M=A.buffer.readUInt32BE(0,!0),R=A.buffer.readUInt32BE(4,!0),P=M>>>31;return M=(M<<1|R>>>31)^(P?4294967295:0),R=R<<1^(P?4294967295:0),new _(M,R)},k.prototype.i32ToZigzag=function(A){return A<<1^(A&2147483648?4294967295:0)},k.prototype.readMessageBegin=function(){var A=this.trans.readByte();if(A!=k.PROTOCOL_ID)throw new w.TProtocolException(w.TProtocolExceptionType.BAD_VERSION,"Bad protocol identifier "+A);var M=this.trans.readByte(),R=M&k.VERSION_MASK;if(R!=k.VERSION_N)throw new w.TProtocolException(w.TProtocolExceptionType.BAD_VERSION,"Bad protocol version "+R);var P=M>>k.TYPE_SHIFT_AMOUNT&k.TYPE_BITS,j=this.readVarint32(),D=this.readString();return{fname:D,mtype:P,rseqid:j}},k.prototype.readMessageEnd=function(){},k.prototype.readStructBegin=function(){return this.lastField_.push(this.lastFieldId_),this.lastFieldId_=0,{fname:""}},k.prototype.readStructEnd=function(){this.lastFieldId_=this.lastField_.pop()},k.prototype.readFieldBegin=function(){var A=0,M=this.trans.readByte(M),R=M&15;if(R==k.Types.CT_STOP)return{fname:null,ftype:w.Type.STOP,fid:0};var P=(M&240)>>>4;P===0?A=this.readI16():A=this.lastFieldId_+P;var j=this.getTType(R);return(R==k.Types.CT_BOOLEAN_TRUE||R==k.Types.CT_BOOLEAN_FALSE)&&(this.boolValue_.hasBoolValue=!0,this.boolValue_.boolValue=R==k.Types.CT_BOOLEAN_TRUE),this.lastFieldId_=A,{fname:null,ftype:j,fid:A}},k.prototype.readFieldEnd=function(){},k.prototype.readMapBegin=function(){var A=this.readVarint32();if(A<0)throw new w.TProtocolException(w.TProtocolExceptionType.NEGATIVE_SIZE,"Negative map size");var M=0;A!==0&&(M=this.trans.readByte());var R=this.getTType((M&240)>>>4),P=this.getTType(M&15);return{ktype:R,vtype:P,size:A}},k.prototype.readMapEnd=function(){},k.prototype.readListBegin=function(){var A=this.trans.readByte(),M=A>>>4&15;if(M==15&&(M=this.readVarint32()),M<0)throw new w.TProtocolException(w.TProtocolExceptionType.NEGATIVE_SIZE,"Negative list size");var R=this.getTType(A&15);return{etype:R,size:M}},k.prototype.readListEnd=function(){},k.prototype.readSetBegin=function(){return this.readListBegin()},k.prototype.readSetEnd=function(){},k.prototype.readBool=function(){var A=!1;if(this.boolValue_.hasBoolValue===!0)A=this.boolValue_.boolValue,this.boolValue_.hasBoolValue=!1;else{var M=this.trans.readByte();M.rsize,A=M.value==k.Types.CT_BOOLEAN_TRUE}return A},k.prototype.readByte=function(){return this.trans.readByte()},k.prototype.readI16=function(){return this.readI32()},k.prototype.readI32=function(){return this.zigzagToI32(this.readVarint32())},k.prototype.readI64=function(){return this.zigzagToI64(this.readVarint64())},k.prototype.readDouble=function(){var A=this.trans.read(8),M=0,R=A[M+7]&128,P=(A[M+6]&240)>>4;P+=(A[M+7]&127)<<4;var j=A[M];switch(j+=A[M+1]<<8,j+=A[M+2]<<16,j+=A[M+3]*T,j+=A[M+4]*b,j+=A[M+5]*S,j+=(A[M+6]&15)*x,P){case 0:P=-1022;break;case 2047:return j?NaN:R?-1/0:1/0;default:j+=B,P-=1023}return R&&(j*=-1),j*Math.pow(2,P-52)},k.prototype.readBinary=function(){var A=this.readVarint32();if(A===0)return new u(0);if(A<0)throw new w.TProtocolException(w.TProtocolExceptionType.NEGATIVE_SIZE,"Negative binary size");return this.trans.read(A)},k.prototype.readString=function(){var A=this.readVarint32();if(A===0)return"";if(A<0)throw new w.TProtocolException(w.TProtocolExceptionType.NEGATIVE_SIZE,"Negative string size");return this.trans.readString(A)},k.prototype.readVarint32=function(){return this.readVarint64().toNumber()},k.prototype.readVarint64=function(){for(var A=0,M=0,R=0,P=0;;){var j=this.trans.readByte();if(A++,P<=25?M=M|(j&127)<<P:25<P&&P<32?(M=M|(j&127)<<P,R=R|(j&127)>>>32-P):R=R|(j&127)<<P-32,P+=7,!(j&128))break;if(A>=10)throw new w.TProtocolException(w.TProtocolExceptionType.INVALID_DATA,"Variable-length int over 10 bytes.")}return new _(R,M)},k.prototype.zigzagToI32=function(A){return A>>>1^-1*(A&1)},k.prototype.zigzagToI64=function(A){var M=A.buffer.readUInt32BE(0,!0),R=A.buffer.readUInt32BE(4,!0),P=new _(M&0,R&1);P._2scomp();var j=P.buffer.readUInt32BE(0,!0),D=P.buffer.readUInt32BE(4,!0),z=M<<31;return M=M>>>1^j,R=(R>>>1|z)^D,new _(M,R)},k.prototype.skip=function(A){switch(A){case m.BOOL:this.readBool();break;case m.BYTE:this.readByte();break;case m.I16:this.readI16();break;case m.I32:this.readI32();break;case m.I64:this.readI64();break;case m.DOUBLE:this.readDouble();break;case m.STRING:this.readString();break;case m.STRUCT:for(this.readStructBegin();;){var M=this.readFieldBegin();if(M.ftype===m.STOP)break;this.skip(M.ftype),this.readFieldEnd()}this.readStructEnd();break;case m.MAP:for(var R=this.readMapBegin(),P=0;P<R.size;++P)this.skip(R.ktype),this.skip(R.vtype);this.readMapEnd();break;case m.SET:for(var j=this.readSetBegin(),D=0;D<j.size;++D)this.skip(j.etype);this.readSetEnd();break;case m.LIST:for(var z=this.readListBegin(),$=0;$<z.size;++$)this.skip(z.etype);this.readListEnd();break;default:throw new Error("Invalid type: "+A)}}},6243:c=>{c.exports=d;function d(f,u){f.Client&&(f=f.Client);var a=function(m,l){u.write(m,l)},_=new u.transport(void 0,a),w=new f(_,u.protocol);return _.client=w,u.client=w,w}},7584:(c,d,f)=>{var u=f(8764).Buffer,a=f(7533),_=f(3590),w=f(5190);c.exports=m;function m(l,T){this.inBuf=l||new u(0),this.outBuffers=[],this.outCount=0,this.readPos=0,this.onFlush=T}m.prototype=new w,m.receiver=function(l,T){var b=null;return function(S){for(b&&(S=u.concat([b,S]),b=null);S.length;){if(S.length<4){b=S;return}var x=a.readI32(S,0);if(S.length<4+x){b=S;return}var B=S.slice(4,4+x);b=S.slice(4+x),l(new m(B),T),S=b,b=null}}},m.prototype.commitPosition=function(){},m.prototype.rollbackPosition=function(){},m.prototype.isOpen=function(){return!0},m.prototype.open=function(){},m.prototype.close=function(){},m.prototype.setCurrSeqId=function(l){this._seqid=l},m.prototype.ensureAvailable=function(l){if(this.readPos+l>this.inBuf.length)throw new _},m.prototype.read=function(l){this.ensureAvailable(l);var T=this.readPos+l;if(this.inBuf.length<T)throw new Error("read("+l+") failed - not enough data");var b=this.inBuf.slice(this.readPos,T);return this.readPos=T,b},m.prototype.readByte=function(){return this.ensureAvailable(1),a.readByte(this.inBuf[this.readPos++])},m.prototype.readI16=function(){this.ensureAvailable(2);var l=a.readI16(this.inBuf,this.readPos);return this.readPos+=2,l},m.prototype.readI32=function(){this.ensureAvailable(4);var l=a.readI32(this.inBuf,this.readPos);return this.readPos+=4,l},m.prototype.readDouble=function(){this.ensureAvailable(8);var l=a.readDouble(this.inBuf,this.readPos);return this.readPos+=8,l},m.prototype.readString=function(l){this.ensureAvailable(l);var T=this.inBuf.toString("utf8",this.readPos,this.readPos+l);return this.readPos+=l,T},m.prototype.borrow=function(){return{buf:this.inBuf,readIndex:this.readPos,writeIndex:this.inBuf.length}},m.prototype.consume=function(l){this.readPos+=l},m.prototype.write=function(l,T){typeof l=="string"&&(l=new u(l,T||"utf8")),this.outBuffers.push(l),this.outCount+=l.length},m.prototype.flush=function(){var l=this._seqid;this._seqid=null;var T=new u(this.outCount),b=0;if(this.outBuffers.forEach(function(x){x.copy(T,b,0),b+=x.length}),this.onFlush){var S=new u(T.length+4);a.writeI32(S,T.length),T.copy(S,4,0,T.length),this.onFlush&&this.onFlush(S,l)}this.outBuffers=[],this.outCount=0}},5190:(c,d,f)=>{var u=f(8764).Buffer,a=f(9539),_=f(9277),w=f(4711),m=f(3590);function l(W){Error.call(this),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.message=W}a.inherits(l,Error),c.exports=D;var T=0,b=1,S=0,x=32/8,B=48/8,F=64/8,k=96/8,A=112/8,M=4095,R=1,P=1073741823;function j(W){var J=f(8869);this.outputBuffer=null;var V=this;this.transport=new J(null,function(le){V.outputBuffer=le}),this.transport.inBuf=W||u.alloc(0),this.transport.writeCursor=this.transport.inBuf.length,this.protocol=new _(this.transport)}j.prototype.readVarint32=function(){return this.protocol.readVarint32()},j.prototype.writeVarint32=function(W){this.protocol.writeVarint32(W)},j.prototype.readString=function(){return this.protocol.readString()},j.prototype.writeString=function(W){this.protocol.writeString(W)},j.prototype.getOutCount=function(){return this.transport.outCount},j.prototype.write=function(W){this.transport.write(W)},j.prototype.toBuffer=function(){return this.transport.flush(),this.outputBuffer},D.SubprotocolId={BINARY:0,JSON:1,COMPACT:2};function D(){this.maxFrameSize=P,this.protocolId=D.SubprotocolId.BINARY,this.rheaders={},this.wheaders={},this.inBuf=u.alloc(0),this.outCount=0,this.flags=null,this.seqid=0,this.shouldWriteHeaders=!0}var z=function(W,J){if(typeof W!="string"||typeof J!="string")throw new l("Header key and values must be strings")},$=function(W){for(var J=Object.keys(D.SubprotocolId),V=0;V<J.length;V++)if(W===D.SubprotocolId[J[V]])return!0;throw new Error(W+" is not a valid protocol id")};D.prototype.setSeqId=function(W){this.seqid=W},D.prototype.getSeqId=function(W){return this.seqid},D.prototype.setFlags=function(W){this.flags=W},D.prototype.getReadHeaders=function(){return this.rheaders},D.prototype.setReadHeader=function(W,J){z(W,J),this.rheaders[W]=J},D.prototype.clearReadHeaders=function(){this.rheaders={}},D.prototype.getWriteHeaders=function(){return this.wheaders},D.prototype.setWriteHeader=function(W,J){z(W,J),this.wheaders[W]=J},D.prototype.clearWriteHeaders=function(){this.wheaders={}},D.prototype.setMaxFrameSize=function(W){this.maxFrameSize=W},D.prototype.setProtocolId=function(W){$(W),this.protocolId=W},D.prototype.getProtocolId=function(){return this.protocolId};var K=function(W){var J=W.readInt32BE();return(J&w.VERSION_MASK)===w.VERSION_1},H=function(W){var J=W.readInt8(T),V=W.readInt8(b);return J===_.PROTOCOL_ID&&(V&_.VERSION_MASK)===_.VERSION_N};D.prototype.readHeaders=function(){var W=this.inBuf,J=!1;if(K(W)&&(this.setProtocolId(D.SubprotocolId.BINARY),J=!0),H(W)&&(this.setProtocolId(D.SubprotocolId.COMPACT),J=!0),J){this.shouldWriteHeaders=!1;return}var V=W.readInt32BE(S);if(V>this.maxFrameSize)throw new l("Frame exceeds maximum frame size");var le=W.readInt16BE(x);if(this.shouldWriteHeaders=le===M,!!this.shouldWriteHeaders){this.setFlags(W.readInt16BE(B)),this.setSeqId(W.readInt32BE(F));var pe=W.readInt16BE(k)*4,se=A+pe;if(se>W.length)throw new l("Header size is greater than frame size");var Ne=u.alloc(pe);W.copy(Ne,0,A,se);var fe=new j(Ne);this.setProtocolId(fe.readVarint32());var Oe=fe.readVarint32();if(Oe>0)throw new l("Transforms are not yet supported");for(;;)try{var Ce=fe.readVarint32();if(Ce!==R)break;for(var We=fe.readVarint32(),Bt=0;Bt<We;Bt++){var vt=fe.readString(),ge=fe.readString();this.setReadHeader(vt,ge)}}catch(q){if(q instanceof m)break;throw q}return this.read(se),this.getReadHeaders()}},D.prototype.writeHeaders=function(){if(!!this.shouldWriteHeaders){var W=this.getWriteHeaders(),J=new j;J.writeVarint32(this.protocolId),J.writeVarint32(0);var V=Object.keys(W);if(V.length>0){J.writeVarint32(R),J.writeVarint32(V.length);for(var le=0;le<V.length;le++){var pe=V[le],se=W[pe];J.writeString(pe),J.writeString(se)}}var Ne=J.getOutCount(),fe=(4-Ne%4)%4,Oe=u.alloc(2);Oe.writeInt16BE(Math.floor((Ne+fe)/4));var Ce=u.alloc(fe);Ce.fill(0),J.write(Ce);var We=J.toBuffer(),Bt=u.alloc(4);Bt.writeInt32BE(10+this.outCount+We.length);var vt=u.alloc(2);vt.writeInt16BE(M);var ge=u.alloc(2);ge.writeInt16BE(0);var q=u.alloc(4);q.writeInt32BE(this.getSeqId());var G=u.concat([Bt,vt,ge,q,Oe,We]);this.outBuffers.unshift(G),this.outCount+=G.length}}},3590:(c,d,f)=>{var u=f(9539);c.exports=a;function a(_){Error.call(this),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.message=_}u.inherits(a,Error)},5197:(c,d,f)=>{var u=f(8764).Buffer,a=f(135),_=c.exports={},w=Math.pow(2,24),m=Math.pow(2,31),l=Math.pow(2,32),T=Math.pow(10,11);_.toDecimalString=function(b){var S=b.buffer,x=b.offset;if(!S[x]&&!(S[x+1]&224)||!~S[x]&&!~(S[x+1]&224))return b.toString();var B=S[x]&128;if(B){for(var F=!1,k=new u(8),A=7;A>=0;--A)k[A]=~S[x+A]+(F?0:1)&255,F|=S[x+A];S=k}var M=S[x+1]+(S[x]<<8),R=S[x+7]+(S[x+6]<<8)+(S[x+5]<<16)+S[x+4]*w+(S[x+3]+(S[x+2]<<8))*l+M*74976710656,P=Math.floor(R/T)+M*2814;return R=("00000000000"+String(R%T)).slice(-11),(B?"-":"")+String(P)+R},_.fromDecimalString=function(b){var S=b.charAt(0)==="-";if(b.length<(S?17:16))return new a(+b);if(b.length>(S?20:19))throw new RangeError("Too many digits for Int64: "+b);var x=+b.slice(S?1:0,-15),B=+b.slice(-15)+x*2764472320,F=Math.floor(B/l)+x*232830;if(B=B%l,F>=m&&!(S&&F==m&&B==0))throw new RangeError("The magnitude is too large for Int64.");return S&&(F=~F,B===0?F=F+1&4294967295:B=~B+1,F=2147483648|F),new a(F,B)}},6502:(c,d,f)=>{var u=f(135);f(5197),c.exports=function(){var a,_,w={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},m,l=function(M){throw new SyntaxError(M)},T=function(M){return M&&M!==_&&l("Expected '"+M+"' instead of '"+_+"'"),_=m.charAt(a),a+=1,_},b=function(){var M,R="";for(_==="-"&&(R="-",T("-"));_>="0"&&_<="9";)R+=_,T();if(_===".")for(R+=".";T()&&_>="0"&&_<="9";)R+=_;if(_==="e"||_==="E")for(R+=_,T(),(_==="-"||_==="+")&&(R+=_,T());_>="0"&&_<="9";)R+=_,T();if(M=+R,!isFinite(M))l("Bad number");else return M>=u.MAX_INT||M<=u.MIN_INT?R:M},S=function(){var M,R,P="",j;if(_==='"')for(;T();){if(_==='"')return T(),P;if(_==="\\")if(T(),_==="u"){for(j=0,R=0;R<4&&(M=parseInt(T(),16),!!isFinite(M));R+=1)j=j*16+M;P+=String.fromCharCode(j)}else if(typeof w[_]=="string")P+=w[_];else break;else P+=_}l("Bad string")},x=function(){for(;_&&_<=" ";)T()},B=function(){switch(_){case"t":return T("t"),T("r"),T("u"),T("e"),!0;case"f":return T("f"),T("a"),T("l"),T("s"),T("e"),!1;case"n":return T("n"),T("u"),T("l"),T("l"),null}l("Unexpected '"+_+"'")},F,k=function(){var M=[];if(_==="["){if(T("["),x(),_==="]")return T("]"),M;for(;_;){if(M.push(F()),x(),_==="]")return T("]"),M;T(","),x()}}l("Bad array")},A=function(){var M,R={};if(_==="{"){if(T("{"),x(),_==="}")return T("}"),R;for(;_;){if(M=S(),x(),T(":"),Object.hasOwnProperty.call(R,M)&&l('Duplicate key "'+M+'"'),R[M]=F(),x(),_==="}")return T("}"),R;T(","),x()}}l("Bad object")};return F=function(){switch(x(),_){case"{":return A();case"[":return k();case'"':return S();case"-":return b();default:return _>="0"&&_<="9"?b():B()}},function(M){var R;return m=M,a=0,_=" ",R=F(),x(),_&&l("Syntax error"),R}}()},5086:(c,d,f)=>{var u=f(8764).Buffer,a=f(135),_=f(5406),w=_.Type;f(9539);var m=f(5197),l=f(6502),T=f(3590);c.exports=b;function b(S){this.tstack=[],this.tpos=[],this.trans=S}b.Type={},b.Type[w.BOOL]='"tf"',b.Type[w.BYTE]='"i8"',b.Type[w.I16]='"i16"',b.Type[w.I32]='"i32"',b.Type[w.I64]='"i64"',b.Type[w.DOUBLE]='"dbl"',b.Type[w.STRUCT]='"rec"',b.Type[w.STRING]='"str"',b.Type[w.MAP]='"map"',b.Type[w.LIST]='"lst"',b.Type[w.SET]='"set"',b.RType={},b.RType.tf=w.BOOL,b.RType.i8=w.BYTE,b.RType.i16=w.I16,b.RType.i32=w.I32,b.RType.i64=w.I64,b.RType.dbl=w.DOUBLE,b.RType.rec=w.STRUCT,b.RType.str=w.STRING,b.RType.map=w.MAP,b.RType.lst=w.LIST,b.RType.set=w.SET,b.Version=1,b.prototype.flush=function(){return this.writeToTransportIfStackIsFlushable(),this.trans.flush()},b.prototype.writeToTransportIfStackIsFlushable=function(){this.tstack.length===1&&this.trans.write(this.tstack.pop())},b.prototype.writeMessageBegin=function(S,x,B){this.tstack.push([b.Version,'"'+S+'"',x,B])},b.prototype.writeMessageEnd=function(){var S=this.tstack.pop();this.wobj=this.tstack.pop(),this.wobj.push(S),this.wbuf="["+this.wobj.join(",")+"]",this.trans.write(this.wbuf)},b.prototype.writeStructBegin=function(S){this.tpos.push(this.tstack.length),this.tstack.push({})},b.prototype.writeStructEnd=function(){var S=this.tpos.pop(),x=this.tstack[S],B="{",F=!0;for(var k in x)F?F=!1:B+=",",B+=k+":"+x[k];B+="}",this.tstack[S]=B,this.writeToTransportIfStackIsFlushable()},b.prototype.writeFieldBegin=function(S,x,B){this.tpos.push(this.tstack.length),this.tstack.push({fieldId:'"'+B+'"',fieldType:b.Type[x]})},b.prototype.writeFieldEnd=function(){var S=this.tstack.pop(),x=this.tstack.pop();":"+S==":[object Object]"?this.tstack[this.tstack.length-1][x.fieldId]="{"+x.fieldType+":"+JSON.stringify(S)+"}":this.tstack[this.tstack.length-1][x.fieldId]="{"+x.fieldType+":"+S+"}",this.tpos.pop(),this.writeToTransportIfStackIsFlushable()},b.prototype.writeFieldStop=function(){},b.prototype.writeMapBegin=function(S,x,B){this.tpos.push(this.tstack.length),this.tstack.push([b.Type[S],b.Type[x],0])},b.prototype.writeMapEnd=function(){var S=this.tpos.pop();if(S!=this.tstack.length){(this.tstack.length-S-1)%2!==0&&this.tstack.push("");var x=(this.tstack.length-S-1)/2;this.tstack[S][this.tstack[S].length-1]=x;for(var B="}",F=!0;this.tstack.length>S+1;){var k=this.tstack.pop(),A=this.tstack.pop();F?F=!1:B=","+B,isNaN(A)||(A='"'+A+'"'),B=A+":"+k+B}B="{"+B,this.tstack[S].push(B),this.tstack[S]="["+this.tstack[S].join(",")+"]",this.writeToTransportIfStackIsFlushable()}},b.prototype.writeListBegin=function(S,x){this.tpos.push(this.tstack.length),this.tstack.push([b.Type[S],x])},b.prototype.writeListEnd=function(){for(var S=this.tpos.pop();this.tstack.length>S+1;){var x=this.tstack[S+1];this.tstack.splice(S+1,1),this.tstack[S].push(x)}this.tstack[S]="["+this.tstack[S].join(",")+"]",this.writeToTransportIfStackIsFlushable()},b.prototype.writeSetBegin=function(S,x){this.tpos.push(this.tstack.length),this.tstack.push([b.Type[S],x])},b.prototype.writeSetEnd=function(){for(var S=this.tpos.pop();this.tstack.length>S+1;){var x=this.tstack[S+1];this.tstack.splice(S+1,1),this.tstack[S].push(x)}this.tstack[S]="["+this.tstack[S].join(",")+"]",this.writeToTransportIfStackIsFlushable()},b.prototype.writeBool=function(S){this.tstack.push(S?1:0)},b.prototype.writeByte=function(S){this.tstack.push(S)},b.prototype.writeI16=function(S){this.tstack.push(S)},b.prototype.writeI32=function(S){this.tstack.push(S)},b.prototype.writeI64=function(S){S instanceof a?this.tstack.push(m.toDecimalString(S)):this.tstack.push(S)},b.prototype.writeDouble=function(S){this.tstack.push(S)},b.prototype.writeString=function(S){if(S===null)this.tstack.push(null);else{if(typeof S=="string")var x=S;else if(S instanceof u)var x=S.toString("utf8");else throw new Error("writeString called without a string/Buffer argument: "+S);for(var B="",F=0;F<x.length;F++){var k=x.charAt(F);k==='"'?B+='\\"':k==="\\"?B+="\\\\":k==="\b"?B+="\\b":k==="\f"?B+="\\f":k===`
`?B+="\\n":k==="\r"?B+="\\r":k==="	"?B+="\\t":B+=k}this.tstack.push('"'+B+'"')}},b.prototype.writeBinary=function(S){if(typeof S=="string")var x=new u(S,"binary");else if(S instanceof u||Object.prototype.toString.call(S)=="[object Uint8Array]")var x=S;else throw new Error("writeBinary called without a string/Buffer argument: "+S);this.tstack.push('"'+x.toString("base64")+'"')},b.prototype.readMessageBegin=function(){this.rstack=[],this.rpos=[];var S=this.trans.borrow();if(S.readIndex>=S.writeIndex)throw new T;var x=S.readIndex;if(S.buf[x]!==91)throw new Error("Malformed JSON input, no opening bracket");x++;for(var B=1,F=!1;x<S.writeIndex;x++){var k=S.buf[x];if(F)k===34?F=!1:k===92&&(x+=1);else if(k===91)B+=1;else if(k===93){if(B-=1,B===0)break}else k===34&&(F=!0)}if(B!==0)throw new T;this.robj=l(S.buf.slice(S.readIndex,x+1).toString()),this.trans.consume(x+1-S.readIndex);var A=this.robj.shift();if(A!=b.Version)throw new Error("Wrong thrift protocol version: "+A);var M={};return M.fname=this.robj.shift(),M.mtype=this.robj.shift(),M.rseqid=this.robj.shift(),this.rstack.push(this.robj.shift()),M},b.prototype.readMessageEnd=function(){},b.prototype.readStructBegin=function(){var S={};return S.fname="",this.rstack[this.rstack.length-1]instanceof Array&&this.rstack.push(this.rstack[this.rstack.length-1].shift()),S},b.prototype.readStructEnd=function(){this.rstack.pop()},b.prototype.readFieldBegin=function(){var S={},x=-1,B=w.STOP;for(var F in this.rstack[this.rstack.length-1])if(F!==null){x=parseInt(F,10),this.rpos.push(this.rstack.length);var k=this.rstack[this.rstack.length-1][x];delete this.rstack[this.rstack.length-1][x],this.rstack.push(k);break}if(x!=-1)for(var A in this.rstack[this.rstack.length-1])b.RType[A]!==null&&(B=b.RType[A],this.rstack[this.rstack.length-1]=this.rstack[this.rstack.length-1][A]);return S.fname="",S.ftype=B,S.fid=x,S},b.prototype.readFieldEnd=function(){for(var S=this.rpos.pop();this.rstack.length>S;)this.rstack.pop()},b.prototype.readMapBegin=function(){var S=this.rstack.pop(),x=S.shift();x instanceof Array&&(this.rstack.push(S),S=x,x=S.shift());var B={};return B.ktype=b.RType[x],B.vtype=b.RType[S.shift()],B.size=S.shift(),this.rpos.push(this.rstack.length),this.rstack.push(S.shift()),B},b.prototype.readMapEnd=function(){this.readFieldEnd()},b.prototype.readListBegin=function(){var S=this.rstack[this.rstack.length-1],x={};return x.etype=b.RType[S.shift()],x.size=S.shift(),this.rpos.push(this.rstack.length),this.rstack.push(S.shift()),x},b.prototype.readListEnd=function(){var S=this.rpos.pop()-2,x=this.rstack;x.pop(),x instanceof Array&&x.length>S&&x[S].length>0&&x.push(x[S].shift())},b.prototype.readSetBegin=function(){return this.readListBegin()},b.prototype.readSetEnd=function(){return this.readListEnd()},b.prototype.readBool=function(){return this.readValue()=="1"},b.prototype.readByte=function(){return this.readI32()},b.prototype.readI16=function(){return this.readI32()},b.prototype.readI32=function(S){return+this.readValue()},b.prototype.readValue=function(S){S===void 0&&(S=this.rstack[this.rstack.length-1]);var x={};if(S instanceof Array)S.length===0?x.value=void 0:x.value=S.shift();else if(!(S instanceof a)&&S instanceof Object){for(var B in S)if(B!==null){this.rstack.push(S[B]),delete S[B],x.value=B;break}}else x.value=S,this.rstack.pop();return x.value},b.prototype.readI64=function(){var S=this.readValue();return typeof S=="string"?m.fromDecimalString(S):new a(S)},b.prototype.readDouble=function(){return this.readI32()},b.prototype.readBinary=function(){return new u(this.readValue(),"base64")},b.prototype.readString=function(){return this.readValue()},b.prototype.getTransport=function(){return this.trans},b.prototype.skip=function(S){switch(S){case w.BOOL:this.readBool();break;case w.BYTE:this.readByte();break;case w.I16:this.readI16();break;case w.I32:this.readI32();break;case w.I64:this.readI64();break;case w.DOUBLE:this.readDouble();break;case w.STRING:this.readString();break;case w.STRUCT:for(this.readStructBegin();;){var x=this.readFieldBegin();if(x.ftype===w.STOP)break;this.skip(x.ftype),this.readFieldEnd()}this.readStructEnd();break;case w.MAP:for(var B=this.readMapBegin(),F=0;F<B.size;++F)this.skip(B.ktype),this.skip(B.vtype);this.readMapEnd();break;case w.SET:for(var k=this.readSetBegin(),A=0;A<k.size;++A)this.skip(k.etype);this.readSetEnd();break;case w.LIST:for(var M=this.readListBegin(),R=0;R<M.size;++R)this.skip(M.etype);this.readListEnd();break;default:throw new Error("Invalid type: "+S)}}},1291:(c,d,f)=>{var u=f(9539),a=function(){},_=console.log,w="error";function m(F){return function(){var k=["thrift: ["+F+"] "].concat(Array.from(arguments));return _(u.format.apply(null,k))}}var l=a,T=a,b=a,S=a,x=a;d.setLogFunc=function(F){_=F};var B=d.setLogLevel=function(F){switch(l=T=b=S=x=a,w=F,w){case"trace":l=m("TRACE");case"debug":T=m("DEBUG");case"error":b=m("ERROR");case"warning":S=m("WARN");case"info":x=m("INFO")}};B(w),d.getLogLevel=function(){return w},d.trace=function(){return l.apply(null,arguments)},d.debug=function(){return T.apply(null,arguments)},d.error=function(){return b.apply(null,arguments)},d.warning=function(){return S.apply(null,arguments)},d.info=function(){return x.apply(null,arguments)}},4184:(c,d,f)=>{var u=f(9539),a=f(5406);d.Multiplexer=w;function _(m,l,T){function b(S,x,B){l.call(this,S,x,B)}return u.inherits(b,l),b.prototype.writeMessageBegin=function(S,x,B){x==a.MessageType.CALL||x==a.MessageType.ONEWAY?(T.seqId2Service[B]=m,b.super_.prototype.writeMessageBegin.call(this,m+":"+S,x,B)):b.super_.prototype.writeMessageBegin.call(this,S,x,B)},b}function w(){this.seqid=0}w.prototype.createClient=function(m,l,T){l.Client&&(l=l.Client);var b=function(k,A){T.write(k,A)},S=new T.transport(void 0,b),x=new _(m,T.protocol,T),B=new l(S,x),F=this;return B.new_seqid=function(){return F.seqid+=1,F.seqid},typeof T.client!="object"&&(T.client={}),T.client[m]=B,B}},5406:(c,d,f)=>{var u=f(9539),a=d.Type={STOP:0,VOID:1,BOOL:2,BYTE:3,I08:3,DOUBLE:4,I16:6,I32:8,I64:10,STRING:11,UTF7:11,STRUCT:12,MAP:13,SET:14,LIST:15,UTF8:16,UTF16:17};d.MessageType={CALL:1,REPLY:2,EXCEPTION:3,ONEWAY:4},d.TException=_;function _(S){Error.call(this),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.message=S}u.inherits(_,Error);var w=d.TApplicationExceptionType={UNKNOWN:0,UNKNOWN_METHOD:1,INVALID_MESSAGE_TYPE:2,WRONG_METHOD_NAME:3,BAD_SEQUENCE_ID:4,MISSING_RESULT:5,INTERNAL_ERROR:6,PROTOCOL_ERROR:7,INVALID_TRANSFORM:8,INVALID_PROTOCOL:9,UNSUPPORTED_CLIENT_TYPE:10};d.TApplicationException=m;function m(S,x){_.call(this),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,this.constructor),this.type=S||w.UNKNOWN,this.name=this.constructor.name,this.message=x}u.inherits(m,_),m.prototype.read=function(S){for(var x=S.readStructBegin("TApplicationException");x=S.readFieldBegin(),x.ftype!=a.STOP;){switch(x.fid){case 1:x.ftype==a.STRING?(x=S.readString(),this.message=x):x=S.skip(x.ftype);break;case 2:x.ftype==a.I32?(x=S.readI32(),this.type=x):x=S.skip(x.ftype);break;default:x=S.skip(x.ftype);break}S.readFieldEnd()}S.readStructEnd()},m.prototype.write=function(S){S.writeStructBegin("TApplicationException"),this.message&&(S.writeFieldBegin("message",a.STRING,1),S.writeString(this.message),S.writeFieldEnd()),this.code&&(S.writeFieldBegin("type",a.I32,2),S.writeI32(this.code),S.writeFieldEnd()),S.writeFieldStop(),S.writeStructEnd()},d.TProtocolExceptionType={UNKNOWN:0,INVALID_DATA:1,NEGATIVE_SIZE:2,SIZE_LIMIT:3,BAD_VERSION:4,NOT_IMPLEMENTED:5,DEPTH_LIMIT:6},d.TProtocolException=l;function l(S,x){Error.call(this),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.type=S,this.message=x}u.inherits(l,Error),d.objectLength=function(S){return Object.keys(S).length},d.inherits=function(S,x){u.inherits(S,x)};var T,b;T=function(S,x){if(!S)return S;var B;x.shift===void 0?B=x:B=x[0];var F=B,k=S.length,A=[],M,R;for(M=0;M<k;M++)R=S[M],B===null?A.push(R):B===b||B===T?A.push(B(R,x.slice(1))):A.push(new F(R));return A},b=function(S,x){if(!S)return S;var B;x.shift===void 0?B=x:B=x[0];var F=B,k={},A;for(var M in S)S.hasOwnProperty(M)&&(A=S[M],B===null?k[M]=A:B===b||B===T?k[M]=B(A,x.slice(1)):k[M]=new F(A));return k},c.exports.copyMap=b,c.exports.copyList=T},5455:(c,d,f)=>{var u=f(8764).Buffer,a=f(9539),_=f(6792),w=f(7187).EventEmitter,m=f(5406),l=f(8869),T=f(5086),b=f(3590),S=f(6243),x=f(3818);d.WSConnection=B;function B(F,k,A){w.call(this),this.options=A||{},this.host=F,this.port=k,this.secure=this.options.secure||!1,this.transport=this.options.transport||l,this.protocol=this.options.protocol||T,this.path=this.options.path,this.send_pending=[],this.seqId2Service={},this.wsOptions={host:this.host,port:this.port||80,path:this.options.path||"/",headers:this.options.headers||{}};for(var M in this.options.wsOptions)this.wsOptions[M]=this.options.wsOptions[M]}a.inherits(B,w),B.prototype.__reset=function(){this.socket=null,this.send_pending=[]},B.prototype.__onOpen=function(){this.emit("open"),this.send_pending.length>0&&(this.send_pending.forEach(function(F){this.socket.send(F)},this),this.send_pending=[])},B.prototype.__onClose=function(F){this.emit("close"),this.__reset()},B.prototype.__decodeCallback=function(F){var k=new this.protocol(F);try{for(;;){var A=k.readMessageBegin(),M=A.rseqid*-1,R=this.client,P=this.seqId2Service[A.rseqid];P&&(R=this.client[P],delete this.seqId2Service[A.rseqid]),R._reqs[M]=function(j,D){F.commitPosition();var z=R._reqs[A.rseqid];delete R._reqs[A.rseqid],z&&z(j,D)},R["recv_"+A.fname]?R["recv_"+A.fname](k,A.mtype,M):(delete R._reqs[M],this.emit("error",new m.TApplicationException(m.TApplicationExceptionType.WRONG_METHOD_NAME,"Received a response to an unknown RPC function")))}}catch(j){if(j instanceof b)F.rollbackPosition();else throw j}},B.prototype.__onData=function(F){Object.prototype.toString.call(F)==="[object ArrayBuffer]"&&(F=new Uint8Array(F));var k=new u(F);this.transport.receiver(this.__decodeCallback.bind(this))(k)},B.prototype.__onMessage=function(F){this.__onData(F.data)},B.prototype.__onError=function(F){this.emit("error",F),this.socket.close()},B.prototype.isOpen=function(){return this.socket&&this.socket.readyState===this.socket.OPEN},B.prototype.open=function(){this.socket&&this.socket.readyState!==this.socket.CLOSED||(x.isBrowser?this.socket=new _(this.uri()):this.socket=new _(this.uri(),"",this.wsOptions),this.socket.binaryType="arraybuffer",this.socket.onopen=this.__onOpen.bind(this),this.socket.onmessage=this.__onMessage.bind(this),this.socket.onerror=this.__onError.bind(this),this.socket.onclose=this.__onClose.bind(this))},B.prototype.close=function(){this.socket.close()},B.prototype.uri=function(){var F=this.secure?"wss":"ws",k="",A=this.path||"/",M=this.host;return this.port&&(F==="wss"&&this.port!==443||F==="ws"&&this.port!==80)&&(k=":"+this.port),F+"://"+M+k+A},B.prototype.write=function(F){this.isOpen()?this.socket.send(F):this.send_pending.push(F)},d.createWSConnection=function(F,k,A){return new B(F,k,A)},d.createWSClient=S},5764:(c,d,f)=>{var u=f(1291);c.exports=a;function a(_){this.__reset(_)}a.prototype.__reset=function(_){this.url=_,this.socket=null,this.callbacks=[],this.send_pending=[],this.send_buf="",this.recv_buf="",this.rb_wpos=0,this.rb_rpos=0},a.prototype.flush=function(_,w){var m=this;this.isOpen()?(this.socket.send(this.send_buf),this.callbacks.push(function(){var l=w;return function(T){m.setRecvBuffer(T),l()}}())):this.send_pending.push({buf:this.send_buf,cb:w})},a.prototype.__onOpen=function(){var _=this;this.send_pending.length>0&&(this.send_pending.forEach(function(w){_.socket.send(w.buf),_.callbacks.push(function(){var m=w.cb;return function(l){_.setRecvBuffer(l),m()}}())}),this.send_pending=[])},a.prototype.__onClose=function(_){this.__reset(this.url)},a.prototype.__onMessage=function(_){this.callbacks.length&&this.callbacks.shift()(_.data)},a.prototype.__onError=function(_){u.error("websocket: "+_.toString()),this.socket.close()},a.prototype.setRecvBuffer=function(_){this.recv_buf=_,this.recv_buf_sz=this.recv_buf.length,this.wpos=this.recv_buf.length,this.rpos=0},a.prototype.isOpen=function(){return this.socket&&this.socket.readyState==this.socket.OPEN},a.prototype.open=function(){this.socket&&this.socket.readyState!=this.socket.CLOSED||(this.socket=new WebSocket(this.url),this.socket.onopen=this.__onOpen.bind(this),this.socket.onmessage=this.__onMessage.bind(this),this.socket.onerror=this.__onError.bind(this),this.socket.onclose=this.__onClose.bind(this))},a.prototype.close=function(){this.socket.close()},a.prototype.read=function(_){var w=this.wpos-this.rpos;if(w===0)return"";var m=_;w<_&&(m=w);var l=this.read_buf.substr(this.rpos,m);return this.rpos+=m,l},a.prototype.readAll=function(){return this.recv_buf},a.prototype.write=function(_){this.send_buf=_},a.prototype.getSendBuffer=function(){return this.send_buf}},4050:(c,d,f)=>{var u=f(8764).Buffer,a=f(9539),_=f(7187).EventEmitter,w=f(5406),m=f(8869),l=f(5086),T=f(3590),b=f(6243);d.XHRConnection=S;function S(x,B,F){this.options=F||{},this.wpos=0,this.rpos=0,this.useCORS=F&&F.useCORS,this.send_buf="",this.recv_buf="",this.transport=F.transport||m,this.protocol=F.protocol||l,this.headers=F.headers||{},x=x||window.location.host,B=B||window.location.port;var k=F.https?"https://":"http://",A=F.path||"/";B===""&&(B=void 0),!B||B===80||B==="80"?this.url=k+x+A:this.url=k+x+":"+B+A,this.seqId2Service={}}a.inherits(S,_),S.prototype.getXmlHttpRequestObject=function(){try{return new XMLHttpRequest}catch{}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch{}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch{}throw"Your browser doesn't support XHR."},S.prototype.flush=function(){var x=this;if(this.url===void 0||this.url==="")return this.send_buf;var B=this.getXmlHttpRequestObject();B.overrideMimeType&&B.overrideMimeType("application/json"),B.onreadystatechange=function(){this.readyState==4&&this.status==200&&x.setRecvBuffer(this.responseText)},B.open("POST",this.url,!0),Object.keys(this.headers).forEach(function(F){B.setRequestHeader(F,x.headers[F])}),B.send(this.send_buf)},S.prototype.setRecvBuffer=function(x){if(this.recv_buf=x,this.recv_buf_sz=this.recv_buf.length,this.wpos=this.recv_buf.length,this.rpos=0,Object.prototype.toString.call(x)=="[object ArrayBuffer]")var B=new Uint8Array(x);var F=new u(B||x);this.transport.receiver(this.__decodeCallback.bind(this))(F)},S.prototype.__decodeCallback=function(x){var B=new this.protocol(x);try{for(;;){var F=B.readMessageBegin(),k=F.rseqid*-1,A=this.client,M=this.seqId2Service[F.rseqid];M&&(A=this.client[M],delete this.seqId2Service[F.rseqid]),A._reqs[k]=function(R,P){x.commitPosition();var j=A._reqs[F.rseqid];delete A._reqs[F.rseqid],j&&j(R,P)},A["recv_"+F.fname]?A["recv_"+F.fname](B,F.mtype,k):(delete A._reqs[k],this.emit("error",new w.TApplicationException(w.TApplicationExceptionType.WRONG_METHOD_NAME,"Received a response to an unknown RPC function")))}}catch(R){if(R instanceof T)x.rollbackPosition();else throw R}},S.prototype.isOpen=function(){return!0},S.prototype.open=function(){},S.prototype.close=function(){},S.prototype.read=function(x){var B=this.wpos-this.rpos;if(B===0)return"";var F=x;B<x&&(F=B);var k=this.read_buf.substr(this.rpos,F);return this.rpos+=F,k},S.prototype.readAll=function(){return this.recv_buf},S.prototype.write=function(x){this.send_buf=x,this.flush()},S.prototype.getSendBuffer=function(){return this.send_buf},d.createXHRConnection=function(x,B,F){return new S(x,B,F)},d.createXHRClient=b},384:c=>{c.exports=function(f){return f&&typeof f=="object"&&typeof f.copy=="function"&&typeof f.fill=="function"&&typeof f.readUInt8=="function"}},5955:(c,d,f)=>{var u=f(2584),a=f(8662),_=f(6430),w=f(5692);function m(ue){return ue.call.bind(ue)}var l=typeof BigInt<"u",T=typeof Symbol<"u",b=m(Object.prototype.toString),S=m(Number.prototype.valueOf),x=m(String.prototype.valueOf),B=m(Boolean.prototype.valueOf);if(l)var F=m(BigInt.prototype.valueOf);if(T)var k=m(Symbol.prototype.valueOf);function A(ue,Bi){if(typeof ue!="object")return!1;try{return Bi(ue),!0}catch{return!1}}d.isArgumentsObject=u,d.isGeneratorFunction=a,d.isTypedArray=w;function M(ue){return typeof Promise<"u"&&ue instanceof Promise||ue!==null&&typeof ue=="object"&&typeof ue.then=="function"&&typeof ue.catch=="function"}d.isPromise=M;function R(ue){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(ue):w(ue)||G(ue)}d.isArrayBufferView=R;function P(ue){return _(ue)==="Uint8Array"}d.isUint8Array=P;function j(ue){return _(ue)==="Uint8ClampedArray"}d.isUint8ClampedArray=j;function D(ue){return _(ue)==="Uint16Array"}d.isUint16Array=D;function z(ue){return _(ue)==="Uint32Array"}d.isUint32Array=z;function $(ue){return _(ue)==="Int8Array"}d.isInt8Array=$;function K(ue){return _(ue)==="Int16Array"}d.isInt16Array=K;function H(ue){return _(ue)==="Int32Array"}d.isInt32Array=H;function W(ue){return _(ue)==="Float32Array"}d.isFloat32Array=W;function J(ue){return _(ue)==="Float64Array"}d.isFloat64Array=J;function V(ue){return _(ue)==="BigInt64Array"}d.isBigInt64Array=V;function le(ue){return _(ue)==="BigUint64Array"}d.isBigUint64Array=le;function pe(ue){return b(ue)==="[object Map]"}pe.working=typeof Map<"u"&&pe(new Map);function se(ue){return typeof Map>"u"?!1:pe.working?pe(ue):ue instanceof Map}d.isMap=se;function Ne(ue){return b(ue)==="[object Set]"}Ne.working=typeof Set<"u"&&Ne(new Set);function fe(ue){return typeof Set>"u"?!1:Ne.working?Ne(ue):ue instanceof Set}d.isSet=fe;function Oe(ue){return b(ue)==="[object WeakMap]"}Oe.working=typeof WeakMap<"u"&&Oe(new WeakMap);function Ce(ue){return typeof WeakMap>"u"?!1:Oe.working?Oe(ue):ue instanceof WeakMap}d.isWeakMap=Ce;function We(ue){return b(ue)==="[object WeakSet]"}We.working=typeof WeakSet<"u"&&We(new WeakSet);function Bt(ue){return We(ue)}d.isWeakSet=Bt;function vt(ue){return b(ue)==="[object ArrayBuffer]"}vt.working=typeof ArrayBuffer<"u"&&vt(new ArrayBuffer);function ge(ue){return typeof ArrayBuffer>"u"?!1:vt.working?vt(ue):ue instanceof ArrayBuffer}d.isArrayBuffer=ge;function q(ue){return b(ue)==="[object DataView]"}q.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&q(new DataView(new ArrayBuffer(1),0,1));function G(ue){return typeof DataView>"u"?!1:q.working?q(ue):ue instanceof DataView}d.isDataView=G;function L(ue){return b(ue)==="[object SharedArrayBuffer]"}L.working=typeof SharedArrayBuffer<"u"&&L(new SharedArrayBuffer);function Y(ue){return typeof SharedArrayBuffer>"u"?!1:L.working?L(ue):ue instanceof SharedArrayBuffer}d.isSharedArrayBuffer=Y;function Q(ue){return b(ue)==="[object AsyncFunction]"}d.isAsyncFunction=Q;function ae(ue){return b(ue)==="[object Map Iterator]"}d.isMapIterator=ae;function re(ue){return b(ue)==="[object Set Iterator]"}d.isSetIterator=re;function _e(ue){return b(ue)==="[object Generator]"}d.isGeneratorObject=_e;function Ee(ue){return b(ue)==="[object WebAssembly.Module]"}d.isWebAssemblyCompiledModule=Ee;function Je(ue){return A(ue,S)}d.isNumberObject=Je;function zt(ue){return A(ue,x)}d.isStringObject=zt;function At(ue){return A(ue,B)}d.isBooleanObject=At;function et(ue){return l&&A(ue,F)}d.isBigIntObject=et;function fn(ue){return T&&A(ue,k)}d.isSymbolObject=fn;function qn(ue){return Je(ue)||zt(ue)||At(ue)||et(ue)||fn(ue)}d.isBoxedPrimitive=qn;function gs(ue){return typeof Uint8Array<"u"&&(ge(ue)||Y(ue))}d.isAnyArrayBuffer=gs,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(ue){Object.defineProperty(d,ue,{enumerable:!1,value:function(){throw new Error(ue+" is not supported in userland")}})})},9539:(c,d,f)=>{var u=Object.getOwnPropertyDescriptors||function(G){for(var L=Object.keys(G),Y={},Q=0;Q<L.length;Q++)Y[L[Q]]=Object.getOwnPropertyDescriptor(G,L[Q]);return Y},a=/%[sdj%]/g;d.format=function(q){if(!$(q)){for(var G=[],L=0;L<arguments.length;L++)G.push(l(arguments[L]));return G.join(" ")}for(var L=1,Y=arguments,Q=Y.length,ae=String(q).replace(a,function(_e){if(_e==="%%")return"%";if(L>=Q)return _e;switch(_e){case"%s":return String(Y[L++]);case"%d":return Number(Y[L++]);case"%j":try{return JSON.stringify(Y[L++])}catch{return"[Circular]"}default:return _e}}),re=Y[L];L<Q;re=Y[++L])j(re)||!J(re)?ae+=" "+re:ae+=" "+l(re);return ae},d.deprecate=function(q,G){if(typeof process<"u"&&process.noDeprecation===!0)return q;if(typeof process>"u")return function(){return d.deprecate(q,G).apply(this,arguments)};var L=!1;function Y(){if(!L){if(process.throwDeprecation)throw new Error(G);process.traceDeprecation?console.trace(G):console.error(G),L=!0}return q.apply(this,arguments)}return Y};var _={},w=/^$/;if({BROWSER:!0}.NODE_DEBUG){var m={BROWSER:!0}.NODE_DEBUG;m=m.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),w=new RegExp("^"+m+"$","i")}d.debuglog=function(q){if(q=q.toUpperCase(),!_[q])if(w.test(q)){var G=process.pid;_[q]=function(){var L=d.format.apply(d,arguments);console.error("%s %d: %s",q,G,L)}}else _[q]=function(){};return _[q]};function l(q,G){var L={seen:[],stylize:b};return arguments.length>=3&&(L.depth=arguments[2]),arguments.length>=4&&(L.colors=arguments[3]),P(G)?L.showHidden=G:G&&d._extend(L,G),H(L.showHidden)&&(L.showHidden=!1),H(L.depth)&&(L.depth=2),H(L.colors)&&(L.colors=!1),H(L.customInspect)&&(L.customInspect=!0),L.colors&&(L.stylize=T),x(L,q,L.depth)}d.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function T(q,G){var L=l.styles[G];return L?"\x1B["+l.colors[L][0]+"m"+q+"\x1B["+l.colors[L][1]+"m":q}function b(q,G){return q}function S(q){var G={};return q.forEach(function(L,Y){G[L]=!0}),G}function x(q,G,L){if(q.customInspect&&G&&pe(G.inspect)&&G.inspect!==d.inspect&&!(G.constructor&&G.constructor.prototype===G)){var Y=G.inspect(L,q);return $(Y)||(Y=x(q,Y,L)),Y}var Q=B(q,G);if(Q)return Q;var ae=Object.keys(G),re=S(ae);if(q.showHidden&&(ae=Object.getOwnPropertyNames(G)),le(G)&&(ae.indexOf("message")>=0||ae.indexOf("description")>=0))return F(G);if(ae.length===0){if(pe(G)){var _e=G.name?": "+G.name:"";return q.stylize("[Function"+_e+"]","special")}if(W(G))return q.stylize(RegExp.prototype.toString.call(G),"regexp");if(V(G))return q.stylize(Date.prototype.toString.call(G),"date");if(le(G))return F(G)}var Ee="",Je=!1,zt=["{","}"];if(R(G)&&(Je=!0,zt=["[","]"]),pe(G)){var At=G.name?": "+G.name:"";Ee=" [Function"+At+"]"}if(W(G)&&(Ee=" "+RegExp.prototype.toString.call(G)),V(G)&&(Ee=" "+Date.prototype.toUTCString.call(G)),le(G)&&(Ee=" "+F(G)),ae.length===0&&(!Je||G.length==0))return zt[0]+Ee+zt[1];if(L<0)return W(G)?q.stylize(RegExp.prototype.toString.call(G),"regexp"):q.stylize("[Object]","special");q.seen.push(G);var et;return Je?et=k(q,G,L,re,ae):et=ae.map(function(fn){return A(q,G,L,re,fn,Je)}),q.seen.pop(),M(et,Ee,zt)}function B(q,G){if(H(G))return q.stylize("undefined","undefined");if($(G)){var L="'"+JSON.stringify(G).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return q.stylize(L,"string")}if(z(G))return q.stylize(""+G,"number");if(P(G))return q.stylize(""+G,"boolean");if(j(G))return q.stylize("null","null")}function F(q){return"["+Error.prototype.toString.call(q)+"]"}function k(q,G,L,Y,Q){for(var ae=[],re=0,_e=G.length;re<_e;++re)We(G,String(re))?ae.push(A(q,G,L,Y,String(re),!0)):ae.push("");return Q.forEach(function(Ee){Ee.match(/^\d+$/)||ae.push(A(q,G,L,Y,Ee,!0))}),ae}function A(q,G,L,Y,Q,ae){var re,_e,Ee;if(Ee=Object.getOwnPropertyDescriptor(G,Q)||{value:G[Q]},Ee.get?Ee.set?_e=q.stylize("[Getter/Setter]","special"):_e=q.stylize("[Getter]","special"):Ee.set&&(_e=q.stylize("[Setter]","special")),We(Y,Q)||(re="["+Q+"]"),_e||(q.seen.indexOf(Ee.value)<0?(j(L)?_e=x(q,Ee.value,null):_e=x(q,Ee.value,L-1),_e.indexOf(`
`)>-1&&(ae?_e=_e.split(`
`).map(function(Je){return"  "+Je}).join(`
`).substr(2):_e=`
`+_e.split(`
`).map(function(Je){return"   "+Je}).join(`
`))):_e=q.stylize("[Circular]","special")),H(re)){if(ae&&Q.match(/^\d+$/))return _e;re=JSON.stringify(""+Q),re.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(re=re.substr(1,re.length-2),re=q.stylize(re,"name")):(re=re.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),re=q.stylize(re,"string"))}return re+": "+_e}function M(q,G,L){var Y=q.reduce(function(Q,ae){return ae.indexOf(`
`)>=0,Q+ae.replace(/\u001b\[\d\d?m/g,"").length+1},0);return Y>60?L[0]+(G===""?"":G+`
 `)+" "+q.join(`,
  `)+" "+L[1]:L[0]+G+" "+q.join(", ")+" "+L[1]}d.types=f(5955);function R(q){return Array.isArray(q)}d.isArray=R;function P(q){return typeof q=="boolean"}d.isBoolean=P;function j(q){return q===null}d.isNull=j;function D(q){return q==null}d.isNullOrUndefined=D;function z(q){return typeof q=="number"}d.isNumber=z;function $(q){return typeof q=="string"}d.isString=$;function K(q){return typeof q=="symbol"}d.isSymbol=K;function H(q){return q===void 0}d.isUndefined=H;function W(q){return J(q)&&Ne(q)==="[object RegExp]"}d.isRegExp=W,d.types.isRegExp=W;function J(q){return typeof q=="object"&&q!==null}d.isObject=J;function V(q){return J(q)&&Ne(q)==="[object Date]"}d.isDate=V,d.types.isDate=V;function le(q){return J(q)&&(Ne(q)==="[object Error]"||q instanceof Error)}d.isError=le,d.types.isNativeError=le;function pe(q){return typeof q=="function"}d.isFunction=pe;function se(q){return q===null||typeof q=="boolean"||typeof q=="number"||typeof q=="string"||typeof q=="symbol"||typeof q>"u"}d.isPrimitive=se,d.isBuffer=f(384);function Ne(q){return Object.prototype.toString.call(q)}function fe(q){return q<10?"0"+q.toString(10):q.toString(10)}var Oe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Ce(){var q=new Date,G=[fe(q.getHours()),fe(q.getMinutes()),fe(q.getSeconds())].join(":");return[q.getDate(),Oe[q.getMonth()],G].join(" ")}d.log=function(){console.log("%s - %s",Ce(),d.format.apply(d,arguments))},d.inherits=f(5717),d._extend=function(q,G){if(!G||!J(G))return q;for(var L=Object.keys(G),Y=L.length;Y--;)q[L[Y]]=G[L[Y]];return q};function We(q,G){return Object.prototype.hasOwnProperty.call(q,G)}var Bt=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;d.promisify=function(G){if(typeof G!="function")throw new TypeError('The "original" argument must be of type Function');if(Bt&&G[Bt]){var L=G[Bt];if(typeof L!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(L,Bt,{value:L,enumerable:!1,writable:!1,configurable:!0}),L}function L(){for(var Y,Q,ae=new Promise(function(Ee,Je){Y=Ee,Q=Je}),re=[],_e=0;_e<arguments.length;_e++)re.push(arguments[_e]);re.push(function(Ee,Je){Ee?Q(Ee):Y(Je)});try{G.apply(this,re)}catch(Ee){Q(Ee)}return ae}return Object.setPrototypeOf(L,Object.getPrototypeOf(G)),Bt&&Object.defineProperty(L,Bt,{value:L,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(L,u(G))},d.promisify.custom=Bt;function vt(q,G){if(!q){var L=new Error("Promise was rejected with a falsy value");L.reason=q,q=L}return G(q)}function ge(q){if(typeof q!="function")throw new TypeError('The "original" argument must be of type Function');function G(){for(var L=[],Y=0;Y<arguments.length;Y++)L.push(arguments[Y]);var Q=L.pop();if(typeof Q!="function")throw new TypeError("The last argument must be of type Function");var ae=this,re=function(){return Q.apply(ae,arguments)};q.apply(this,L).then(function(_e){process.nextTick(re.bind(null,null,_e))},function(_e){process.nextTick(vt.bind(null,_e,re))})}return Object.setPrototypeOf(G,Object.getPrototypeOf(q)),Object.defineProperties(G,u(q)),G}d.callbackify=ge},6430:(c,d,f)=>{var u=f(9804),a=f(6314),_=f(8914),w=_("Object.prototype.toString"),m=f(1405)(),l=m&&typeof Symbol.toStringTag=="symbol",T=a(),b=_("String.prototype.slice"),S={},x=f(4079),B=Object.getPrototypeOf;l&&x&&B&&u(T,function(A){if(typeof f.g[A]=="function"){var M=new f.g[A];if(!(Symbol.toStringTag in M))throw new EvalError("this engine has support for Symbol.toStringTag, but "+A+" does not have the property! Please report this.");var R=B(M),P=x(R,Symbol.toStringTag);if(!P){var j=B(R);P=x(j,Symbol.toStringTag)}S[A]=P.get}});var F=function(M){var R=!1;return u(S,function(P,j){if(!R)try{var D=P.call(M);D===j&&(R=D)}catch{}}),R},k=f(5692);c.exports=function(M){return k(M)?l?F(M):b(w(M),8,-1):!1}},4221:(c,d,f)=>{const a=f(9262).Thrift;f(135),f(2818);const _=f(4494),w=f(3962),m=f(1396),l=f(2607),T=class{constructor(r){this.user=null,this.passwd=null,this.dbname=null,r&&(r.user!==void 0&&r.user!==null&&(this.user=r.user),r.passwd!==void 0&&r.passwd!==null&&(this.passwd=r.passwd),r.dbname!==void 0&&r.dbname!==null&&(this.dbname=r.dbname))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.user=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.passwd=r.readString():r.skip(p);break;case 3:p==a.Type.STRING?this.dbname=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_connect_args"),this.user!==null&&this.user!==void 0&&(r.writeFieldBegin("user",a.Type.STRING,1),r.writeString(this.user),r.writeFieldEnd()),this.passwd!==null&&this.passwd!==void 0&&(r.writeFieldBegin("passwd",a.Type.STRING,2),r.writeString(this.passwd),r.writeFieldEnd()),this.dbname!==null&&this.dbname!==void 0&&(r.writeFieldBegin("dbname",a.Type.STRING,3),r.writeString(this.dbname),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},b=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=r.success),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRING?this.success=r.readString():r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_connect_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRING,0),r.writeString(this.success),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},S=class{constructor(r){this.inputToken=null,this.dbname=null,r&&(r.inputToken!==void 0&&r.inputToken!==null&&(this.inputToken=r.inputToken),r.dbname!==void 0&&r.dbname!==null&&(this.dbname=r.dbname))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.inputToken=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.dbname=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_krb5_connect_args"),this.inputToken!==null&&this.inputToken!==void 0&&(r.writeFieldBegin("inputToken",a.Type.STRING,1),r.writeString(this.inputToken),r.writeFieldEnd()),this.dbname!==null&&this.dbname!==void 0&&(r.writeFieldBegin("dbname",a.Type.STRING,2),r.writeString(this.dbname),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},x=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TKrb5Session(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TKrb5Session,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_krb5_connect_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},B=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_disconnect_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},F=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_disconnect_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},k=class{constructor(r){this.session=null,this.dbname=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.dbname!==void 0&&r.dbname!==null&&(this.dbname=r.dbname))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.dbname=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_switch_database_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.dbname!==null&&this.dbname!==void 0&&(r.writeFieldBegin("dbname",a.Type.STRING,2),r.writeString(this.dbname),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},A=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_switch_database_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},M=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_clone_session_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},R=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=r.success),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRING?this.success=r.readString():r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_clone_session_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRING,0),r.writeString(this.success),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},P=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_server_status_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},j=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TServerStatus(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TServerStatus,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_server_status_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},D=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_status_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},z=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[l.TServerStatus])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new l.TServerStatus,I.read(r),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_status_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRUCT,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},$=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_hardware_info_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},K=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TClusterHardwareInfo(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TClusterHardwareInfo,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_hardware_info_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},H=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_tables_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},W=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readString(),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_tables_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRING,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},J=class{constructor(r){this.session=null,this.database_name=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.database_name!==void 0&&r.database_name!==null&&(this.database_name=r.database_name))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.database_name=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_tables_for_database_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.database_name!==null&&this.database_name!==void 0&&(r.writeFieldBegin("database_name",a.Type.STRING,2),r.writeString(this.database_name),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},V=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readString(),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_tables_for_database_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRING,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},le=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_physical_tables_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},pe=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readString(),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_physical_tables_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRING,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},se=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_views_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Ne=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readString(),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_views_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRING,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},fe=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_tables_meta_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Oe=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[l.TTableMeta])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new l.TTableMeta,I.read(r),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_tables_meta_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRUCT,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Ce=class{constructor(r){this.session=null,this.table_name=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.table_name=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_table_details_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",a.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},We=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TTableDetails(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TTableDetails,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_table_details_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Bt=class{constructor(r){this.session=null,this.table_name=null,this.database_name=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.database_name!==void 0&&r.database_name!==null&&(this.database_name=r.database_name))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.table_name=r.readString():r.skip(p);break;case 3:p==a.Type.STRING?this.database_name=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_table_details_for_database_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",a.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.database_name!==null&&this.database_name!==void 0&&(r.writeFieldBegin("database_name",a.Type.STRING,3),r.writeString(this.database_name),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},vt=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TTableDetails(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TTableDetails,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_table_details_for_database_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ge=class{constructor(r){this.session=null,this.table_name=null,this.include_system_columns=!0,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.include_system_columns!==void 0&&r.include_system_columns!==null&&(this.include_system_columns=r.include_system_columns))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.table_name=r.readString():r.skip(p);break;case 3:p==a.Type.BOOL?this.include_system_columns=r.readBool():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_internal_table_details_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",a.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.include_system_columns!==null&&this.include_system_columns!==void 0&&(r.writeFieldBegin("include_system_columns",a.Type.BOOL,3),r.writeBool(this.include_system_columns),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},q=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TTableDetails(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TTableDetails,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_internal_table_details_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},G=class{constructor(r){this.session=null,this.table_name=null,this.database_name=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.database_name!==void 0&&r.database_name!==null&&(this.database_name=r.database_name))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.table_name=r.readString():r.skip(p);break;case 3:p==a.Type.STRING?this.database_name=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_internal_table_details_for_database_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",a.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.database_name!==null&&this.database_name!==void 0&&(r.writeFieldBegin("database_name",a.Type.STRING,3),r.writeString(this.database_name),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},L=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TTableDetails(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TTableDetails,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_internal_table_details_for_database_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Y=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_users_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Q=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readString(),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_users_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRING,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ae=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_databases_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},re=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[l.TDBInfo])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new l.TDBInfo,I.read(r),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_databases_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRUCT,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},_e=class{constructor(r){}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin().ftype;if(p==a.Type.STOP)break;r.skip(p),r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_version_args"),r.writeFieldStop(),r.writeStructEnd()}},Ee=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=r.success),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRING?this.success=r.readString():r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_version_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRING,0),r.writeString(this.success),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Je=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_start_heap_profile_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},zt=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_start_heap_profile_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},At=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_stop_heap_profile_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},et=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_stop_heap_profile_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},fn=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_heap_profile_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},qn=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=r.success),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRING?this.success=r.readString():r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_heap_profile_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRING,0),r.writeString(this.success),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},gs=class{constructor(r){this.session=null,this.memory_level=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.memory_level!==void 0&&r.memory_level!==null&&(this.memory_level=r.memory_level))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.memory_level=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_memory_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.memory_level!==null&&this.memory_level!==void 0&&(r.writeFieldBegin("memory_level",a.Type.STRING,2),r.writeString(this.memory_level),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ue=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[l.TNodeMemoryInfo])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new l.TNodeMemoryInfo,I.read(r),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_memory_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRUCT,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Bi=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_clear_cpu_memory_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ni=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_clear_cpu_memory_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Xr=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_clear_gpu_memory_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},vn=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_clear_gpu_memory_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},rc=class{constructor(r){this.parent_session=null,this.leaf_session=null,this.start_time_str=null,this.label=null,this.for_running_query_kernel=null,r&&(r.parent_session!==void 0&&r.parent_session!==null&&(this.parent_session=r.parent_session),r.leaf_session!==void 0&&r.leaf_session!==null&&(this.leaf_session=r.leaf_session),r.start_time_str!==void 0&&r.start_time_str!==null&&(this.start_time_str=r.start_time_str),r.label!==void 0&&r.label!==null&&(this.label=r.label),r.for_running_query_kernel!==void 0&&r.for_running_query_kernel!==null&&(this.for_running_query_kernel=r.for_running_query_kernel))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.parent_session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.leaf_session=r.readString():r.skip(p);break;case 3:p==a.Type.STRING?this.start_time_str=r.readString():r.skip(p);break;case 4:p==a.Type.STRING?this.label=r.readString():r.skip(p);break;case 5:p==a.Type.BOOL?this.for_running_query_kernel=r.readBool():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_cur_session_args"),this.parent_session!==null&&this.parent_session!==void 0&&(r.writeFieldBegin("parent_session",a.Type.STRING,1),r.writeString(this.parent_session),r.writeFieldEnd()),this.leaf_session!==null&&this.leaf_session!==void 0&&(r.writeFieldBegin("leaf_session",a.Type.STRING,2),r.writeString(this.leaf_session),r.writeFieldEnd()),this.start_time_str!==null&&this.start_time_str!==void 0&&(r.writeFieldBegin("start_time_str",a.Type.STRING,3),r.writeString(this.start_time_str),r.writeFieldEnd()),this.label!==null&&this.label!==void 0&&(r.writeFieldBegin("label",a.Type.STRING,4),r.writeString(this.label),r.writeFieldEnd()),this.for_running_query_kernel!==null&&this.for_running_query_kernel!==void 0&&(r.writeFieldBegin("for_running_query_kernel",a.Type.BOOL,5),r.writeBool(this.for_running_query_kernel),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ac=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_cur_session_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Ks=class{constructor(r){this.parent_session=null,this.leaf_session=null,this.start_time_str=null,this.label=null,this.for_running_query_kernel=null,r&&(r.parent_session!==void 0&&r.parent_session!==null&&(this.parent_session=r.parent_session),r.leaf_session!==void 0&&r.leaf_session!==null&&(this.leaf_session=r.leaf_session),r.start_time_str!==void 0&&r.start_time_str!==null&&(this.start_time_str=r.start_time_str),r.label!==void 0&&r.label!==null&&(this.label=r.label),r.for_running_query_kernel!==void 0&&r.for_running_query_kernel!==null&&(this.for_running_query_kernel=r.for_running_query_kernel))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.parent_session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.leaf_session=r.readString():r.skip(p);break;case 3:p==a.Type.STRING?this.start_time_str=r.readString():r.skip(p);break;case 4:p==a.Type.STRING?this.label=r.readString():r.skip(p);break;case 5:p==a.Type.BOOL?this.for_running_query_kernel=r.readBool():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_invalidate_cur_session_args"),this.parent_session!==null&&this.parent_session!==void 0&&(r.writeFieldBegin("parent_session",a.Type.STRING,1),r.writeString(this.parent_session),r.writeFieldEnd()),this.leaf_session!==null&&this.leaf_session!==void 0&&(r.writeFieldBegin("leaf_session",a.Type.STRING,2),r.writeString(this.leaf_session),r.writeFieldEnd()),this.start_time_str!==null&&this.start_time_str!==void 0&&(r.writeFieldBegin("start_time_str",a.Type.STRING,3),r.writeString(this.start_time_str),r.writeFieldEnd()),this.label!==null&&this.label!==void 0&&(r.writeFieldBegin("label",a.Type.STRING,4),r.writeString(this.label),r.writeFieldEnd()),this.for_running_query_kernel!==null&&this.for_running_query_kernel!==void 0&&(r.writeFieldBegin("for_running_query_kernel",a.Type.BOOL,5),r.writeBool(this.for_running_query_kernel),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},oc=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_invalidate_cur_session_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},C=class{constructor(r){this.session=null,this.db_id=null,this.table_id=null,this.new_epoch=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.db_id!==void 0&&r.db_id!==null&&(this.db_id=r.db_id),r.table_id!==void 0&&r.table_id!==null&&(this.table_id=r.table_id),r.new_epoch!==void 0&&r.new_epoch!==null&&(this.new_epoch=r.new_epoch))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.I32?this.db_id=r.readI32():r.skip(p);break;case 3:p==a.Type.I32?this.table_id=r.readI32():r.skip(p);break;case 4:p==a.Type.I32?this.new_epoch=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_table_epoch_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.db_id!==null&&this.db_id!==void 0&&(r.writeFieldBegin("db_id",a.Type.I32,2),r.writeI32(this.db_id),r.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0&&(r.writeFieldBegin("table_id",a.Type.I32,3),r.writeI32(this.table_id),r.writeFieldEnd()),this.new_epoch!==null&&this.new_epoch!==void 0&&(r.writeFieldBegin("new_epoch",a.Type.I32,4),r.writeI32(this.new_epoch),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},O=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_table_epoch_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},N=class{constructor(r){this.session=null,this.table_name=null,this.new_epoch=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.new_epoch!==void 0&&r.new_epoch!==null&&(this.new_epoch=r.new_epoch))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.table_name=r.readString():r.skip(p);break;case 3:p==a.Type.I32?this.new_epoch=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_table_epoch_by_name_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",a.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.new_epoch!==null&&this.new_epoch!==void 0&&(r.writeFieldBegin("new_epoch",a.Type.I32,3),r.writeI32(this.new_epoch),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},U=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_table_epoch_by_name_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},X=class{constructor(r){this.session=null,this.db_id=null,this.table_id=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.db_id!==void 0&&r.db_id!==null&&(this.db_id=r.db_id),r.table_id!==void 0&&r.table_id!==null&&(this.table_id=r.table_id))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.I32?this.db_id=r.readI32():r.skip(p);break;case 3:p==a.Type.I32?this.table_id=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_table_epoch_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.db_id!==null&&this.db_id!==void 0&&(r.writeFieldBegin("db_id",a.Type.I32,2),r.writeI32(this.db_id),r.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0&&(r.writeFieldBegin("table_id",a.Type.I32,3),r.writeI32(this.table_id),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ee=class{constructor(r){this.success=null,r&&r.success!==void 0&&r.success!==null&&(this.success=r.success)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.I32?this.success=r.readI32():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_table_epoch_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.I32,0),r.writeI32(this.success),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ie=class{constructor(r){this.session=null,this.table_name=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.table_name=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_table_epoch_by_name_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",a.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Me=class{constructor(r){this.success=null,r&&r.success!==void 0&&r.success!==null&&(this.success=r.success)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.I32?this.success=r.readI32():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_table_epoch_by_name_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.I32,0),r.writeI32(this.success),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Ue=class{constructor(r){this.session=null,this.db_id=null,this.table_id=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.db_id!==void 0&&r.db_id!==null&&(this.db_id=r.db_id),r.table_id!==void 0&&r.table_id!==null&&(this.table_id=r.table_id))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.I32?this.db_id=r.readI32():r.skip(p);break;case 3:p==a.Type.I32?this.table_id=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_table_epochs_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.db_id!==null&&this.db_id!==void 0&&(r.writeFieldBegin("db_id",a.Type.I32,2),r.writeI32(this.db_id),r.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0&&(r.writeFieldBegin("table_id",a.Type.I32,3),r.writeI32(this.table_id),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ze=class{constructor(r){this.success=null,r&&r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[l.TTableEpochInfo]))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new l.TTableEpochInfo,I.read(r),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_table_epochs_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRUCT,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}r.writeFieldStop(),r.writeStructEnd()}},Xe=class{constructor(r){this.session=null,this.db_id=null,this.table_epochs=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.db_id!==void 0&&r.db_id!==null&&(this.db_id=r.db_id),r.table_epochs!==void 0&&r.table_epochs!==null&&(this.table_epochs=a.copyList(r.table_epochs,[l.TTableEpochInfo])))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.I32?this.db_id=r.readI32():r.skip(p);break;case 3:if(p==a.Type.LIST){this.table_epochs=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new l.TTableEpochInfo,I.read(r),this.table_epochs.push(I)}r.readListEnd()}else r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_set_table_epochs_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.db_id!==null&&this.db_id!==void 0&&(r.writeFieldBegin("db_id",a.Type.I32,2),r.writeI32(this.db_id),r.writeFieldEnd()),this.table_epochs!==null&&this.table_epochs!==void 0){r.writeFieldBegin("table_epochs",a.Type.LIST,3),r.writeListBegin(a.Type.STRUCT,this.table_epochs.length);for(let y in this.table_epochs)this.table_epochs.hasOwnProperty(y)&&(y=this.table_epochs[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}r.writeFieldStop(),r.writeStructEnd()}},Ke=class{constructor(r){}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin().ftype;if(p==a.Type.STOP)break;r.skip(p),r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_table_epochs_result"),r.writeFieldStop(),r.writeStructEnd()}},lc=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_session_info_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Xm=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TSessionInfo(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TSessionInfo,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_session_info_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},G3=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_queries_info_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Km=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[l.TQueryInfo])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new l.TQueryInfo,I.read(r),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_queries_info_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRUCT,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},V3=class{constructor(r){this.session=null,this.leaf_info=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.leaf_info!==void 0&&r.leaf_info!==null&&(this.leaf_info=new l.TLeafInfo(r.leaf_info)))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRUCT?(this.leaf_info=new l.TLeafInfo,this.leaf_info.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_leaf_info_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.leaf_info!==null&&this.leaf_info!==void 0&&(r.writeFieldBegin("leaf_info",a.Type.STRUCT,2),this.leaf_info.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Jm=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_leaf_info_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},H3=class{constructor(r){this.session=null,this.query=null,this.column_format=null,this.nonce=null,this.first_n=-1,this.at_most_n=-1,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.query!==void 0&&r.query!==null&&(this.query=r.query),r.column_format!==void 0&&r.column_format!==null&&(this.column_format=r.column_format),r.nonce!==void 0&&r.nonce!==null&&(this.nonce=r.nonce),r.first_n!==void 0&&r.first_n!==null&&(this.first_n=r.first_n),r.at_most_n!==void 0&&r.at_most_n!==null&&(this.at_most_n=r.at_most_n))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.query=r.readString():r.skip(p);break;case 3:p==a.Type.BOOL?this.column_format=r.readBool():r.skip(p);break;case 4:p==a.Type.STRING?this.nonce=r.readString():r.skip(p);break;case 5:p==a.Type.I32?this.first_n=r.readI32():r.skip(p);break;case 6:p==a.Type.I32?this.at_most_n=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_sql_execute_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.query!==null&&this.query!==void 0&&(r.writeFieldBegin("query",a.Type.STRING,2),r.writeString(this.query),r.writeFieldEnd()),this.column_format!==null&&this.column_format!==void 0&&(r.writeFieldBegin("column_format",a.Type.BOOL,3),r.writeBool(this.column_format),r.writeFieldEnd()),this.nonce!==null&&this.nonce!==void 0&&(r.writeFieldBegin("nonce",a.Type.STRING,4),r.writeString(this.nonce),r.writeFieldEnd()),this.first_n!==null&&this.first_n!==void 0&&(r.writeFieldBegin("first_n",a.Type.I32,5),r.writeI32(this.first_n),r.writeFieldEnd()),this.at_most_n!==null&&this.at_most_n!==void 0&&(r.writeFieldBegin("at_most_n",a.Type.I32,6),r.writeI32(this.at_most_n),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Qm=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TQueryResult(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TQueryResult,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_sql_execute_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},W3=class{constructor(r){this.session=null,this.query=null,this.device_type=null,this.device_id=0,this.first_n=-1,this.transport_method=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.query!==void 0&&r.query!==null&&(this.query=r.query),r.device_type!==void 0&&r.device_type!==null&&(this.device_type=r.device_type),r.device_id!==void 0&&r.device_id!==null&&(this.device_id=r.device_id),r.first_n!==void 0&&r.first_n!==null&&(this.first_n=r.first_n),r.transport_method!==void 0&&r.transport_method!==null&&(this.transport_method=r.transport_method))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.query=r.readString():r.skip(p);break;case 3:p==a.Type.I32?this.device_type=r.readI32():r.skip(p);break;case 4:p==a.Type.I32?this.device_id=r.readI32():r.skip(p);break;case 5:p==a.Type.I32?this.first_n=r.readI32():r.skip(p);break;case 6:p==a.Type.I32?this.transport_method=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_sql_execute_df_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.query!==null&&this.query!==void 0&&(r.writeFieldBegin("query",a.Type.STRING,2),r.writeString(this.query),r.writeFieldEnd()),this.device_type!==null&&this.device_type!==void 0&&(r.writeFieldBegin("device_type",a.Type.I32,3),r.writeI32(this.device_type),r.writeFieldEnd()),this.device_id!==null&&this.device_id!==void 0&&(r.writeFieldBegin("device_id",a.Type.I32,4),r.writeI32(this.device_id),r.writeFieldEnd()),this.first_n!==null&&this.first_n!==void 0&&(r.writeFieldBegin("first_n",a.Type.I32,5),r.writeI32(this.first_n),r.writeFieldEnd()),this.transport_method!==null&&this.transport_method!==void 0&&(r.writeFieldBegin("transport_method",a.Type.I32,6),r.writeI32(this.transport_method),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Zm=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TDataFrame(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TDataFrame,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_sql_execute_df_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Y3=class{constructor(r){this.session=null,this.query=null,this.device_id=0,this.first_n=-1,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.query!==void 0&&r.query!==null&&(this.query=r.query),r.device_id!==void 0&&r.device_id!==null&&(this.device_id=r.device_id),r.first_n!==void 0&&r.first_n!==null&&(this.first_n=r.first_n))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.query=r.readString():r.skip(p);break;case 3:p==a.Type.I32?this.device_id=r.readI32():r.skip(p);break;case 4:p==a.Type.I32?this.first_n=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_sql_execute_gdf_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.query!==null&&this.query!==void 0&&(r.writeFieldBegin("query",a.Type.STRING,2),r.writeString(this.query),r.writeFieldEnd()),this.device_id!==null&&this.device_id!==void 0&&(r.writeFieldBegin("device_id",a.Type.I32,3),r.writeI32(this.device_id),r.writeFieldEnd()),this.first_n!==null&&this.first_n!==void 0&&(r.writeFieldBegin("first_n",a.Type.I32,4),r.writeI32(this.first_n),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ew=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TDataFrame(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TDataFrame,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_sql_execute_gdf_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},X3=class{constructor(r){this.session=null,this.df=null,this.device_type=null,this.device_id=0,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.df!==void 0&&r.df!==null&&(this.df=new l.TDataFrame(r.df)),r.device_type!==void 0&&r.device_type!==null&&(this.device_type=r.device_type),r.device_id!==void 0&&r.device_id!==null&&(this.device_id=r.device_id))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRUCT?(this.df=new l.TDataFrame,this.df.read(r)):r.skip(p);break;case 3:p==a.Type.I32?this.device_type=r.readI32():r.skip(p);break;case 4:p==a.Type.I32?this.device_id=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_deallocate_df_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.df!==null&&this.df!==void 0&&(r.writeFieldBegin("df",a.Type.STRUCT,2),this.df.write(r),r.writeFieldEnd()),this.device_type!==null&&this.device_type!==void 0&&(r.writeFieldBegin("device_type",a.Type.I32,3),r.writeI32(this.device_type),r.writeFieldEnd()),this.device_id!==null&&this.device_id!==void 0&&(r.writeFieldBegin("device_id",a.Type.I32,4),r.writeI32(this.device_id),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},tw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_deallocate_df_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},K3=class{constructor(r){this.query_session=null,this.interrupt_session=null,r&&(r.query_session!==void 0&&r.query_session!==null&&(this.query_session=r.query_session),r.interrupt_session!==void 0&&r.interrupt_session!==null&&(this.interrupt_session=r.interrupt_session))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.query_session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.interrupt_session=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_interrupt_args"),this.query_session!==null&&this.query_session!==void 0&&(r.writeFieldBegin("query_session",a.Type.STRING,1),r.writeString(this.query_session),r.writeFieldEnd()),this.interrupt_session!==null&&this.interrupt_session!==void 0&&(r.writeFieldBegin("interrupt_session",a.Type.STRING,2),r.writeString(this.interrupt_session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},nw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_interrupt_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},J3=class{constructor(r){this.session=null,this.query=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.query!==void 0&&r.query!==null&&(this.query=r.query))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.query=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_sql_validate_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.query!==null&&this.query!==void 0&&(r.writeFieldBegin("query",a.Type.STRING,2),r.writeString(this.query),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},iw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[l.TColumnType])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new l.TColumnType,I.read(r),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_sql_validate_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRUCT,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Q3=class{constructor(r){this.session=null,this.sql=null,this.cursor=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.sql!==void 0&&r.sql!==null&&(this.sql=r.sql),r.cursor!==void 0&&r.cursor!==null&&(this.cursor=r.cursor))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.sql=r.readString():r.skip(p);break;case 3:p==a.Type.I32?this.cursor=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_completion_hints_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.sql!==null&&this.sql!==void 0&&(r.writeFieldBegin("sql",a.Type.STRING,2),r.writeString(this.sql),r.writeFieldEnd()),this.cursor!==null&&this.cursor!==void 0&&(r.writeFieldBegin("cursor",a.Type.I32,3),r.writeI32(this.cursor),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},sw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[_.TCompletionHint])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new _.TCompletionHint,I.read(r),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_completion_hints_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRUCT,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Z3=class{constructor(r){this.session=null,this.mode=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.mode!==void 0&&r.mode!==null&&(this.mode=r.mode))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.I32?this.mode=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_execution_mode_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.mode!==null&&this.mode!==void 0&&(r.writeFieldBegin("mode",a.Type.I32,2),r.writeI32(this.mode),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},rw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_execution_mode_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},eR=class{constructor(r){this.session=null,this.widget_id=null,this.vega_json=null,this.compression_level=null,this.nonce=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.widget_id!==void 0&&r.widget_id!==null&&(this.widget_id=r.widget_id),r.vega_json!==void 0&&r.vega_json!==null&&(this.vega_json=r.vega_json),r.compression_level!==void 0&&r.compression_level!==null&&(this.compression_level=r.compression_level),r.nonce!==void 0&&r.nonce!==null&&(this.nonce=r.nonce))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.I64?this.widget_id=r.readI64():r.skip(p);break;case 3:p==a.Type.STRING?this.vega_json=r.readString():r.skip(p);break;case 4:p==a.Type.I32?this.compression_level=r.readI32():r.skip(p);break;case 5:p==a.Type.STRING?this.nonce=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_render_vega_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.widget_id!==null&&this.widget_id!==void 0&&(r.writeFieldBegin("widget_id",a.Type.I64,2),r.writeI64(this.widget_id),r.writeFieldEnd()),this.vega_json!==null&&this.vega_json!==void 0&&(r.writeFieldBegin("vega_json",a.Type.STRING,3),r.writeString(this.vega_json),r.writeFieldEnd()),this.compression_level!==null&&this.compression_level!==void 0&&(r.writeFieldBegin("compression_level",a.Type.I32,4),r.writeI32(this.compression_level),r.writeFieldEnd()),this.nonce!==null&&this.nonce!==void 0&&(r.writeFieldBegin("nonce",a.Type.STRING,5),r.writeString(this.nonce),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},aw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TRenderResult(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TRenderResult,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_render_vega_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},tR=class{constructor(r){this.session=null,this.widget_id=null,this.pixel=null,this.table_col_names=null,this.column_format=null,this.pixelRadius=null,this.nonce=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.widget_id!==void 0&&r.widget_id!==null&&(this.widget_id=r.widget_id),r.pixel!==void 0&&r.pixel!==null&&(this.pixel=new l.TPixel(r.pixel)),r.table_col_names!==void 0&&r.table_col_names!==null&&(this.table_col_names=a.copyMap(r.table_col_names,[a.copyList,null])),r.column_format!==void 0&&r.column_format!==null&&(this.column_format=r.column_format),r.pixelRadius!==void 0&&r.pixelRadius!==null&&(this.pixelRadius=r.pixelRadius),r.nonce!==void 0&&r.nonce!==null&&(this.nonce=r.nonce))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.I64?this.widget_id=r.readI64():r.skip(p);break;case 3:p==a.Type.STRUCT?(this.pixel=new l.TPixel,this.pixel.read(r)):r.skip(p);break;case 4:if(p==a.Type.MAP){this.table_col_names={};const g=r.readMapBegin().size||0;for(let E=0;E<g;++E){let I=null,Z=null;I=r.readString(),Z=[];const Ve=r.readListBegin().size||0;for(let mn=0;mn<Ve;++mn){let ol=null;ol=r.readString(),Z.push(ol)}r.readListEnd(),this.table_col_names[I]=Z}r.readMapEnd()}else r.skip(p);break;case 5:p==a.Type.BOOL?this.column_format=r.readBool():r.skip(p);break;case 6:p==a.Type.I32?this.pixelRadius=r.readI32():r.skip(p);break;case 7:p==a.Type.STRING?this.nonce=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_result_row_for_pixel_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.widget_id!==null&&this.widget_id!==void 0&&(r.writeFieldBegin("widget_id",a.Type.I64,2),r.writeI64(this.widget_id),r.writeFieldEnd()),this.pixel!==null&&this.pixel!==void 0&&(r.writeFieldBegin("pixel",a.Type.STRUCT,3),this.pixel.write(r),r.writeFieldEnd()),this.table_col_names!==null&&this.table_col_names!==void 0){r.writeFieldBegin("table_col_names",a.Type.MAP,4),r.writeMapBegin(a.Type.STRING,a.Type.LIST,a.objectLength(this.table_col_names));for(let y in this.table_col_names)if(this.table_col_names.hasOwnProperty(y)){let p=this.table_col_names[y];r.writeString(y),r.writeListBegin(a.Type.STRING,p.length);for(let h in p)p.hasOwnProperty(h)&&(h=p[h],r.writeString(h));r.writeListEnd()}r.writeMapEnd(),r.writeFieldEnd()}this.column_format!==null&&this.column_format!==void 0&&(r.writeFieldBegin("column_format",a.Type.BOOL,5),r.writeBool(this.column_format),r.writeFieldEnd()),this.pixelRadius!==null&&this.pixelRadius!==void 0&&(r.writeFieldBegin("pixelRadius",a.Type.I32,6),r.writeI32(this.pixelRadius),r.writeFieldEnd()),this.nonce!==null&&this.nonce!==void 0&&(r.writeFieldBegin("nonce",a.Type.STRING,7),r.writeString(this.nonce),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ow=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TPixelTableRowResult(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TPixelTableRowResult,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_result_row_for_pixel_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},nR=class{constructor(r){this.session=null,this.custom_expression=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.custom_expression!==void 0&&r.custom_expression!==null&&(this.custom_expression=new l.TCustomExpression(r.custom_expression)))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRUCT?(this.custom_expression=new l.TCustomExpression,this.custom_expression.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_create_custom_expression_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.custom_expression!==null&&this.custom_expression!==void 0&&(r.writeFieldBegin("custom_expression",a.Type.STRUCT,2),this.custom_expression.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},lw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=r.success),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.I32?this.success=r.readI32():r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_create_custom_expression_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.I32,0),r.writeI32(this.success),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},iR=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_custom_expressions_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},cw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[l.TCustomExpression])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new l.TCustomExpression,I.read(r),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_custom_expressions_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRUCT,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},sR=class{constructor(r){this.session=null,this.id=null,this.expression_json=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.id!==void 0&&r.id!==null&&(this.id=r.id),r.expression_json!==void 0&&r.expression_json!==null&&(this.expression_json=r.expression_json))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.I32?this.id=r.readI32():r.skip(p);break;case 3:p==a.Type.STRING?this.expression_json=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_update_custom_expression_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.id!==null&&this.id!==void 0&&(r.writeFieldBegin("id",a.Type.I32,2),r.writeI32(this.id),r.writeFieldEnd()),this.expression_json!==null&&this.expression_json!==void 0&&(r.writeFieldBegin("expression_json",a.Type.STRING,3),r.writeString(this.expression_json),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},dw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_update_custom_expression_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},rR=class{constructor(r){this.session=null,this.custom_expression_ids=null,this.do_soft_delete=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.custom_expression_ids!==void 0&&r.custom_expression_ids!==null&&(this.custom_expression_ids=a.copyList(r.custom_expression_ids,[null])),r.do_soft_delete!==void 0&&r.do_soft_delete!==null&&(this.do_soft_delete=r.do_soft_delete))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:if(p==a.Type.LIST){this.custom_expression_ids=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readI32(),this.custom_expression_ids.push(I)}r.readListEnd()}else r.skip(p);break;case 3:p==a.Type.BOOL?this.do_soft_delete=r.readBool():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_delete_custom_expressions_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.custom_expression_ids!==null&&this.custom_expression_ids!==void 0){r.writeFieldBegin("custom_expression_ids",a.Type.LIST,2),r.writeListBegin(a.Type.I32,this.custom_expression_ids.length);for(let y in this.custom_expression_ids)this.custom_expression_ids.hasOwnProperty(y)&&(y=this.custom_expression_ids[y],r.writeI32(y));r.writeListEnd(),r.writeFieldEnd()}this.do_soft_delete!==null&&this.do_soft_delete!==void 0&&(r.writeFieldBegin("do_soft_delete",a.Type.BOOL,3),r.writeBool(this.do_soft_delete),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},fw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_delete_custom_expressions_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},aR=class{constructor(r){this.session=null,this.dashboard_id=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.dashboard_id!==void 0&&r.dashboard_id!==null&&(this.dashboard_id=r.dashboard_id))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.I32?this.dashboard_id=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_dashboard_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.dashboard_id!==null&&this.dashboard_id!==void 0&&(r.writeFieldBegin("dashboard_id",a.Type.I32,2),r.writeI32(this.dashboard_id),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},uw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TDashboard(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TDashboard,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_dashboard_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},oR=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_dashboards_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},hw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[l.TDashboard])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new l.TDashboard,I.read(r),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_dashboards_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRUCT,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},lR=class{constructor(r){this.session=null,this.dashboard_name=null,this.dashboard_state=null,this.image_hash=null,this.dashboard_metadata=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.dashboard_name!==void 0&&r.dashboard_name!==null&&(this.dashboard_name=r.dashboard_name),r.dashboard_state!==void 0&&r.dashboard_state!==null&&(this.dashboard_state=r.dashboard_state),r.image_hash!==void 0&&r.image_hash!==null&&(this.image_hash=r.image_hash),r.dashboard_metadata!==void 0&&r.dashboard_metadata!==null&&(this.dashboard_metadata=r.dashboard_metadata))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.dashboard_name=r.readString():r.skip(p);break;case 3:p==a.Type.STRING?this.dashboard_state=r.readString():r.skip(p);break;case 4:p==a.Type.STRING?this.image_hash=r.readString():r.skip(p);break;case 5:p==a.Type.STRING?this.dashboard_metadata=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_create_dashboard_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.dashboard_name!==null&&this.dashboard_name!==void 0&&(r.writeFieldBegin("dashboard_name",a.Type.STRING,2),r.writeString(this.dashboard_name),r.writeFieldEnd()),this.dashboard_state!==null&&this.dashboard_state!==void 0&&(r.writeFieldBegin("dashboard_state",a.Type.STRING,3),r.writeString(this.dashboard_state),r.writeFieldEnd()),this.image_hash!==null&&this.image_hash!==void 0&&(r.writeFieldBegin("image_hash",a.Type.STRING,4),r.writeString(this.image_hash),r.writeFieldEnd()),this.dashboard_metadata!==null&&this.dashboard_metadata!==void 0&&(r.writeFieldBegin("dashboard_metadata",a.Type.STRING,5),r.writeString(this.dashboard_metadata),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},pw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=r.success),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.I32?this.success=r.readI32():r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_create_dashboard_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.I32,0),r.writeI32(this.success),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},cR=class{constructor(r){this.session=null,this.dashboard_id=null,this.dashboard_name=null,this.dashboard_owner=null,this.dashboard_state=null,this.image_hash=null,this.dashboard_metadata=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.dashboard_id!==void 0&&r.dashboard_id!==null&&(this.dashboard_id=r.dashboard_id),r.dashboard_name!==void 0&&r.dashboard_name!==null&&(this.dashboard_name=r.dashboard_name),r.dashboard_owner!==void 0&&r.dashboard_owner!==null&&(this.dashboard_owner=r.dashboard_owner),r.dashboard_state!==void 0&&r.dashboard_state!==null&&(this.dashboard_state=r.dashboard_state),r.image_hash!==void 0&&r.image_hash!==null&&(this.image_hash=r.image_hash),r.dashboard_metadata!==void 0&&r.dashboard_metadata!==null&&(this.dashboard_metadata=r.dashboard_metadata))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.I32?this.dashboard_id=r.readI32():r.skip(p);break;case 3:p==a.Type.STRING?this.dashboard_name=r.readString():r.skip(p);break;case 4:p==a.Type.STRING?this.dashboard_owner=r.readString():r.skip(p);break;case 5:p==a.Type.STRING?this.dashboard_state=r.readString():r.skip(p);break;case 6:p==a.Type.STRING?this.image_hash=r.readString():r.skip(p);break;case 7:p==a.Type.STRING?this.dashboard_metadata=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_replace_dashboard_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.dashboard_id!==null&&this.dashboard_id!==void 0&&(r.writeFieldBegin("dashboard_id",a.Type.I32,2),r.writeI32(this.dashboard_id),r.writeFieldEnd()),this.dashboard_name!==null&&this.dashboard_name!==void 0&&(r.writeFieldBegin("dashboard_name",a.Type.STRING,3),r.writeString(this.dashboard_name),r.writeFieldEnd()),this.dashboard_owner!==null&&this.dashboard_owner!==void 0&&(r.writeFieldBegin("dashboard_owner",a.Type.STRING,4),r.writeString(this.dashboard_owner),r.writeFieldEnd()),this.dashboard_state!==null&&this.dashboard_state!==void 0&&(r.writeFieldBegin("dashboard_state",a.Type.STRING,5),r.writeString(this.dashboard_state),r.writeFieldEnd()),this.image_hash!==null&&this.image_hash!==void 0&&(r.writeFieldBegin("image_hash",a.Type.STRING,6),r.writeString(this.image_hash),r.writeFieldEnd()),this.dashboard_metadata!==null&&this.dashboard_metadata!==void 0&&(r.writeFieldBegin("dashboard_metadata",a.Type.STRING,7),r.writeString(this.dashboard_metadata),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},gw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_replace_dashboard_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},dR=class{constructor(r){this.session=null,this.dashboard_id=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.dashboard_id!==void 0&&r.dashboard_id!==null&&(this.dashboard_id=r.dashboard_id))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.I32?this.dashboard_id=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_delete_dashboard_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.dashboard_id!==null&&this.dashboard_id!==void 0&&(r.writeFieldBegin("dashboard_id",a.Type.I32,2),r.writeI32(this.dashboard_id),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},_w=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_delete_dashboard_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},fR=class{constructor(r){this.session=null,this.dashboard_ids=null,this.groups=null,this.permissions=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.dashboard_ids!==void 0&&r.dashboard_ids!==null&&(this.dashboard_ids=a.copyList(r.dashboard_ids,[null])),r.groups!==void 0&&r.groups!==null&&(this.groups=a.copyList(r.groups,[null])),r.permissions!==void 0&&r.permissions!==null&&(this.permissions=new l.TDashboardPermissions(r.permissions)))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:if(p==a.Type.LIST){this.dashboard_ids=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readI32(),this.dashboard_ids.push(I)}r.readListEnd()}else r.skip(p);break;case 3:if(p==a.Type.LIST){this.groups=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readString(),this.groups.push(I)}r.readListEnd()}else r.skip(p);break;case 4:p==a.Type.STRUCT?(this.permissions=new l.TDashboardPermissions,this.permissions.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_share_dashboards_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.dashboard_ids!==null&&this.dashboard_ids!==void 0){r.writeFieldBegin("dashboard_ids",a.Type.LIST,2),r.writeListBegin(a.Type.I32,this.dashboard_ids.length);for(let y in this.dashboard_ids)this.dashboard_ids.hasOwnProperty(y)&&(y=this.dashboard_ids[y],r.writeI32(y));r.writeListEnd(),r.writeFieldEnd()}if(this.groups!==null&&this.groups!==void 0){r.writeFieldBegin("groups",a.Type.LIST,3),r.writeListBegin(a.Type.STRING,this.groups.length);for(let y in this.groups)this.groups.hasOwnProperty(y)&&(y=this.groups[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.permissions!==null&&this.permissions!==void 0&&(r.writeFieldBegin("permissions",a.Type.STRUCT,4),this.permissions.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},yw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_share_dashboards_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},uR=class{constructor(r){this.session=null,this.dashboard_ids=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.dashboard_ids!==void 0&&r.dashboard_ids!==null&&(this.dashboard_ids=a.copyList(r.dashboard_ids,[null])))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:if(p==a.Type.LIST){this.dashboard_ids=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readI32(),this.dashboard_ids.push(I)}r.readListEnd()}else r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_delete_dashboards_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.dashboard_ids!==null&&this.dashboard_ids!==void 0){r.writeFieldBegin("dashboard_ids",a.Type.LIST,2),r.writeListBegin(a.Type.I32,this.dashboard_ids.length);for(let y in this.dashboard_ids)this.dashboard_ids.hasOwnProperty(y)&&(y=this.dashboard_ids[y],r.writeI32(y));r.writeListEnd(),r.writeFieldEnd()}r.writeFieldStop(),r.writeStructEnd()}},mw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_delete_dashboards_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},hR=class{constructor(r){this.session=null,this.dashboard_id=null,this.groups=null,this.objects=null,this.permissions=null,this.grant_role=!1,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.dashboard_id!==void 0&&r.dashboard_id!==null&&(this.dashboard_id=r.dashboard_id),r.groups!==void 0&&r.groups!==null&&(this.groups=a.copyList(r.groups,[null])),r.objects!==void 0&&r.objects!==null&&(this.objects=a.copyList(r.objects,[null])),r.permissions!==void 0&&r.permissions!==null&&(this.permissions=new l.TDashboardPermissions(r.permissions)),r.grant_role!==void 0&&r.grant_role!==null&&(this.grant_role=r.grant_role))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.I32?this.dashboard_id=r.readI32():r.skip(p);break;case 3:if(p==a.Type.LIST){this.groups=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readString(),this.groups.push(I)}r.readListEnd()}else r.skip(p);break;case 4:if(p==a.Type.LIST){this.objects=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readString(),this.objects.push(I)}r.readListEnd()}else r.skip(p);break;case 5:p==a.Type.STRUCT?(this.permissions=new l.TDashboardPermissions,this.permissions.read(r)):r.skip(p);break;case 6:p==a.Type.BOOL?this.grant_role=r.readBool():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_share_dashboard_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.dashboard_id!==null&&this.dashboard_id!==void 0&&(r.writeFieldBegin("dashboard_id",a.Type.I32,2),r.writeI32(this.dashboard_id),r.writeFieldEnd()),this.groups!==null&&this.groups!==void 0){r.writeFieldBegin("groups",a.Type.LIST,3),r.writeListBegin(a.Type.STRING,this.groups.length);for(let y in this.groups)this.groups.hasOwnProperty(y)&&(y=this.groups[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}if(this.objects!==null&&this.objects!==void 0){r.writeFieldBegin("objects",a.Type.LIST,4),r.writeListBegin(a.Type.STRING,this.objects.length);for(let y in this.objects)this.objects.hasOwnProperty(y)&&(y=this.objects[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.permissions!==null&&this.permissions!==void 0&&(r.writeFieldBegin("permissions",a.Type.STRUCT,5),this.permissions.write(r),r.writeFieldEnd()),this.grant_role!==null&&this.grant_role!==void 0&&(r.writeFieldBegin("grant_role",a.Type.BOOL,6),r.writeBool(this.grant_role),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ww=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_share_dashboard_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},pR=class{constructor(r){this.session=null,this.dashboard_id=null,this.groups=null,this.objects=null,this.permissions=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.dashboard_id!==void 0&&r.dashboard_id!==null&&(this.dashboard_id=r.dashboard_id),r.groups!==void 0&&r.groups!==null&&(this.groups=a.copyList(r.groups,[null])),r.objects!==void 0&&r.objects!==null&&(this.objects=a.copyList(r.objects,[null])),r.permissions!==void 0&&r.permissions!==null&&(this.permissions=new l.TDashboardPermissions(r.permissions)))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.I32?this.dashboard_id=r.readI32():r.skip(p);break;case 3:if(p==a.Type.LIST){this.groups=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readString(),this.groups.push(I)}r.readListEnd()}else r.skip(p);break;case 4:if(p==a.Type.LIST){this.objects=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readString(),this.objects.push(I)}r.readListEnd()}else r.skip(p);break;case 5:p==a.Type.STRUCT?(this.permissions=new l.TDashboardPermissions,this.permissions.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_unshare_dashboard_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.dashboard_id!==null&&this.dashboard_id!==void 0&&(r.writeFieldBegin("dashboard_id",a.Type.I32,2),r.writeI32(this.dashboard_id),r.writeFieldEnd()),this.groups!==null&&this.groups!==void 0){r.writeFieldBegin("groups",a.Type.LIST,3),r.writeListBegin(a.Type.STRING,this.groups.length);for(let y in this.groups)this.groups.hasOwnProperty(y)&&(y=this.groups[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}if(this.objects!==null&&this.objects!==void 0){r.writeFieldBegin("objects",a.Type.LIST,4),r.writeListBegin(a.Type.STRING,this.objects.length);for(let y in this.objects)this.objects.hasOwnProperty(y)&&(y=this.objects[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.permissions!==null&&this.permissions!==void 0&&(r.writeFieldBegin("permissions",a.Type.STRUCT,5),this.permissions.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},bw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_unshare_dashboard_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},gR=class{constructor(r){this.session=null,this.dashboard_ids=null,this.groups=null,this.permissions=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.dashboard_ids!==void 0&&r.dashboard_ids!==null&&(this.dashboard_ids=a.copyList(r.dashboard_ids,[null])),r.groups!==void 0&&r.groups!==null&&(this.groups=a.copyList(r.groups,[null])),r.permissions!==void 0&&r.permissions!==null&&(this.permissions=new l.TDashboardPermissions(r.permissions)))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:if(p==a.Type.LIST){this.dashboard_ids=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readI32(),this.dashboard_ids.push(I)}r.readListEnd()}else r.skip(p);break;case 3:if(p==a.Type.LIST){this.groups=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readString(),this.groups.push(I)}r.readListEnd()}else r.skip(p);break;case 4:p==a.Type.STRUCT?(this.permissions=new l.TDashboardPermissions,this.permissions.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_unshare_dashboards_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.dashboard_ids!==null&&this.dashboard_ids!==void 0){r.writeFieldBegin("dashboard_ids",a.Type.LIST,2),r.writeListBegin(a.Type.I32,this.dashboard_ids.length);for(let y in this.dashboard_ids)this.dashboard_ids.hasOwnProperty(y)&&(y=this.dashboard_ids[y],r.writeI32(y));r.writeListEnd(),r.writeFieldEnd()}if(this.groups!==null&&this.groups!==void 0){r.writeFieldBegin("groups",a.Type.LIST,3),r.writeListBegin(a.Type.STRING,this.groups.length);for(let y in this.groups)this.groups.hasOwnProperty(y)&&(y=this.groups[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.permissions!==null&&this.permissions!==void 0&&(r.writeFieldBegin("permissions",a.Type.STRUCT,4),this.permissions.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Tw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_unshare_dashboards_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},_R=class{constructor(r){this.session=null,this.dashboard_id=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.dashboard_id!==void 0&&r.dashboard_id!==null&&(this.dashboard_id=r.dashboard_id))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.I32?this.dashboard_id=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_dashboard_grantees_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.dashboard_id!==null&&this.dashboard_id!==void 0&&(r.writeFieldBegin("dashboard_id",a.Type.I32,2),r.writeI32(this.dashboard_id),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},vw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[l.TDashboardGrantees])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new l.TDashboardGrantees,I.read(r),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_dashboard_grantees_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRUCT,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},yR=class{constructor(r){this.session=null,this.link=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.link!==void 0&&r.link!==null&&(this.link=r.link))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.link=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_link_view_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.link!==null&&this.link!==void 0&&(r.writeFieldBegin("link",a.Type.STRING,2),r.writeString(this.link),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Ew=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TFrontendView(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TFrontendView,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_link_view_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},mR=class{constructor(r){this.session=null,this.view_state=null,this.view_metadata=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.view_state!==void 0&&r.view_state!==null&&(this.view_state=r.view_state),r.view_metadata!==void 0&&r.view_metadata!==null&&(this.view_metadata=r.view_metadata))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.view_state=r.readString():r.skip(p);break;case 3:p==a.Type.STRING?this.view_metadata=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_create_link_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.view_state!==null&&this.view_state!==void 0&&(r.writeFieldBegin("view_state",a.Type.STRING,2),r.writeString(this.view_state),r.writeFieldEnd()),this.view_metadata!==null&&this.view_metadata!==void 0&&(r.writeFieldBegin("view_metadata",a.Type.STRING,3),r.writeString(this.view_metadata),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Sw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=r.success),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRING?this.success=r.readString():r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_create_link_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRING,0),r.writeString(this.success),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},wR=class{constructor(r){this.session=null,this.table_name=null,this.rows=null,this.column_names=[],r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.rows!==void 0&&r.rows!==null&&(this.rows=a.copyList(r.rows,[l.TRow])),r.column_names!==void 0&&r.column_names!==null&&(this.column_names=a.copyList(r.column_names,[null])))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.table_name=r.readString():r.skip(p);break;case 3:if(p==a.Type.LIST){this.rows=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new l.TRow,I.read(r),this.rows.push(I)}r.readListEnd()}else r.skip(p);break;case 4:if(p==a.Type.LIST){this.column_names=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readString(),this.column_names.push(I)}r.readListEnd()}else r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_load_table_binary_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",a.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.rows!==null&&this.rows!==void 0){r.writeFieldBegin("rows",a.Type.LIST,3),r.writeListBegin(a.Type.STRUCT,this.rows.length);for(let y in this.rows)this.rows.hasOwnProperty(y)&&(y=this.rows[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}if(this.column_names!==null&&this.column_names!==void 0){r.writeFieldBegin("column_names",a.Type.LIST,4),r.writeListBegin(a.Type.STRING,this.column_names.length);for(let y in this.column_names)this.column_names.hasOwnProperty(y)&&(y=this.column_names[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}r.writeFieldStop(),r.writeStructEnd()}},xw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_load_table_binary_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},bR=class{constructor(r){this.session=null,this.table_name=null,this.cols=null,this.column_names=[],r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.cols!==void 0&&r.cols!==null&&(this.cols=a.copyList(r.cols,[l.TColumn])),r.column_names!==void 0&&r.column_names!==null&&(this.column_names=a.copyList(r.column_names,[null])))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.table_name=r.readString():r.skip(p);break;case 3:if(p==a.Type.LIST){this.cols=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new l.TColumn,I.read(r),this.cols.push(I)}r.readListEnd()}else r.skip(p);break;case 4:if(p==a.Type.LIST){this.column_names=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readString(),this.column_names.push(I)}r.readListEnd()}else r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_load_table_binary_columnar_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",a.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.cols!==null&&this.cols!==void 0){r.writeFieldBegin("cols",a.Type.LIST,3),r.writeListBegin(a.Type.STRUCT,this.cols.length);for(let y in this.cols)this.cols.hasOwnProperty(y)&&(y=this.cols[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}if(this.column_names!==null&&this.column_names!==void 0){r.writeFieldBegin("column_names",a.Type.LIST,4),r.writeListBegin(a.Type.STRING,this.column_names.length);for(let y in this.column_names)this.column_names.hasOwnProperty(y)&&(y=this.column_names[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}r.writeFieldStop(),r.writeStructEnd()}},Bw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_load_table_binary_columnar_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},TR=class{constructor(r){this.session=null,this.table_name=null,this.cols=null,this.column_names=[],this.assign_render_groups=!0,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.cols!==void 0&&r.cols!==null&&(this.cols=a.copyList(r.cols,[l.TColumn])),r.column_names!==void 0&&r.column_names!==null&&(this.column_names=a.copyList(r.column_names,[null])),r.assign_render_groups!==void 0&&r.assign_render_groups!==null&&(this.assign_render_groups=r.assign_render_groups))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.table_name=r.readString():r.skip(p);break;case 3:if(p==a.Type.LIST){this.cols=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new l.TColumn,I.read(r),this.cols.push(I)}r.readListEnd()}else r.skip(p);break;case 4:if(p==a.Type.LIST){this.column_names=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readString(),this.column_names.push(I)}r.readListEnd()}else r.skip(p);break;case 5:p==a.Type.BOOL?this.assign_render_groups=r.readBool():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_load_table_binary_columnar_polys_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",a.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.cols!==null&&this.cols!==void 0){r.writeFieldBegin("cols",a.Type.LIST,3),r.writeListBegin(a.Type.STRUCT,this.cols.length);for(let y in this.cols)this.cols.hasOwnProperty(y)&&(y=this.cols[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}if(this.column_names!==null&&this.column_names!==void 0){r.writeFieldBegin("column_names",a.Type.LIST,4),r.writeListBegin(a.Type.STRING,this.column_names.length);for(let y in this.column_names)this.column_names.hasOwnProperty(y)&&(y=this.column_names[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.assign_render_groups!==null&&this.assign_render_groups!==void 0&&(r.writeFieldBegin("assign_render_groups",a.Type.BOOL,5),r.writeBool(this.assign_render_groups),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},kw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_load_table_binary_columnar_polys_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},vR=class{constructor(r){this.session=null,this.table_name=null,this.arrow_stream=null,this.use_column_names=!1,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.arrow_stream!==void 0&&r.arrow_stream!==null&&(this.arrow_stream=r.arrow_stream),r.use_column_names!==void 0&&r.use_column_names!==null&&(this.use_column_names=r.use_column_names))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.table_name=r.readString():r.skip(p);break;case 3:p==a.Type.STRING?this.arrow_stream=r.readBinary():r.skip(p);break;case 4:p==a.Type.BOOL?this.use_column_names=r.readBool():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_load_table_binary_arrow_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",a.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.arrow_stream!==null&&this.arrow_stream!==void 0&&(r.writeFieldBegin("arrow_stream",a.Type.STRING,3),r.writeBinary(this.arrow_stream),r.writeFieldEnd()),this.use_column_names!==null&&this.use_column_names!==void 0&&(r.writeFieldBegin("use_column_names",a.Type.BOOL,4),r.writeBool(this.use_column_names),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Iw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_load_table_binary_arrow_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ER=class{constructor(r){this.session=null,this.table_name=null,this.rows=null,this.column_names=[],r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.rows!==void 0&&r.rows!==null&&(this.rows=a.copyList(r.rows,[l.TStringRow])),r.column_names!==void 0&&r.column_names!==null&&(this.column_names=a.copyList(r.column_names,[null])))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.table_name=r.readString():r.skip(p);break;case 3:if(p==a.Type.LIST){this.rows=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new l.TStringRow,I.read(r),this.rows.push(I)}r.readListEnd()}else r.skip(p);break;case 4:if(p==a.Type.LIST){this.column_names=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readString(),this.column_names.push(I)}r.readListEnd()}else r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_load_table_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",a.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.rows!==null&&this.rows!==void 0){r.writeFieldBegin("rows",a.Type.LIST,3),r.writeListBegin(a.Type.STRUCT,this.rows.length);for(let y in this.rows)this.rows.hasOwnProperty(y)&&(y=this.rows[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}if(this.column_names!==null&&this.column_names!==void 0){r.writeFieldBegin("column_names",a.Type.LIST,4),r.writeListBegin(a.Type.STRING,this.column_names.length);for(let y in this.column_names)this.column_names.hasOwnProperty(y)&&(y=this.column_names[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}r.writeFieldStop(),r.writeStructEnd()}},Fw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_load_table_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},SR=class{constructor(r){this.session=null,this.file_name=null,this.copy_params=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.file_name!==void 0&&r.file_name!==null&&(this.file_name=r.file_name),r.copy_params!==void 0&&r.copy_params!==null&&(this.copy_params=new l.TCopyParams(r.copy_params)))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.file_name=r.readString():r.skip(p);break;case 3:p==a.Type.STRUCT?(this.copy_params=new l.TCopyParams,this.copy_params.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_detect_column_types_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.file_name!==null&&this.file_name!==void 0&&(r.writeFieldBegin("file_name",a.Type.STRING,2),r.writeString(this.file_name),r.writeFieldEnd()),this.copy_params!==null&&this.copy_params!==void 0&&(r.writeFieldBegin("copy_params",a.Type.STRUCT,3),this.copy_params.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Ow=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TDetectResult(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TDetectResult,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_detect_column_types_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},xR=class{constructor(r){this.session=null,this.table_name=null,this.row_desc=null,this.create_params=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.row_desc!==void 0&&r.row_desc!==null&&(this.row_desc=a.copyList(r.row_desc,[l.TColumnType])),r.create_params!==void 0&&r.create_params!==null&&(this.create_params=new l.TCreateParams(r.create_params)))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.table_name=r.readString():r.skip(p);break;case 3:if(p==a.Type.LIST){this.row_desc=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new l.TColumnType,I.read(r),this.row_desc.push(I)}r.readListEnd()}else r.skip(p);break;case 4:p==a.Type.STRUCT?(this.create_params=new l.TCreateParams,this.create_params.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_create_table_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",a.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.row_desc!==null&&this.row_desc!==void 0){r.writeFieldBegin("row_desc",a.Type.LIST,3),r.writeListBegin(a.Type.STRUCT,this.row_desc.length);for(let y in this.row_desc)this.row_desc.hasOwnProperty(y)&&(y=this.row_desc[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.create_params!==null&&this.create_params!==void 0&&(r.writeFieldBegin("create_params",a.Type.STRUCT,4),this.create_params.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Mw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_create_table_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},BR=class{constructor(r){this.session=null,this.table_name=null,this.file_name=null,this.copy_params=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.file_name!==void 0&&r.file_name!==null&&(this.file_name=r.file_name),r.copy_params!==void 0&&r.copy_params!==null&&(this.copy_params=new l.TCopyParams(r.copy_params)))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.table_name=r.readString():r.skip(p);break;case 3:p==a.Type.STRING?this.file_name=r.readString():r.skip(p);break;case 4:p==a.Type.STRUCT?(this.copy_params=new l.TCopyParams,this.copy_params.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_import_table_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",a.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.file_name!==null&&this.file_name!==void 0&&(r.writeFieldBegin("file_name",a.Type.STRING,3),r.writeString(this.file_name),r.writeFieldEnd()),this.copy_params!==null&&this.copy_params!==void 0&&(r.writeFieldBegin("copy_params",a.Type.STRUCT,4),this.copy_params.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Aw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_import_table_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},kR=class{constructor(r){this.session=null,this.table_name=null,this.file_name=null,this.copy_params=null,this.row_desc=null,this.create_params=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.file_name!==void 0&&r.file_name!==null&&(this.file_name=r.file_name),r.copy_params!==void 0&&r.copy_params!==null&&(this.copy_params=new l.TCopyParams(r.copy_params)),r.row_desc!==void 0&&r.row_desc!==null&&(this.row_desc=a.copyList(r.row_desc,[l.TColumnType])),r.create_params!==void 0&&r.create_params!==null&&(this.create_params=new l.TCreateParams(r.create_params)))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.table_name=r.readString():r.skip(p);break;case 3:p==a.Type.STRING?this.file_name=r.readString():r.skip(p);break;case 4:p==a.Type.STRUCT?(this.copy_params=new l.TCopyParams,this.copy_params.read(r)):r.skip(p);break;case 5:if(p==a.Type.LIST){this.row_desc=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new l.TColumnType,I.read(r),this.row_desc.push(I)}r.readListEnd()}else r.skip(p);break;case 6:p==a.Type.STRUCT?(this.create_params=new l.TCreateParams,this.create_params.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_import_geo_table_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",a.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.file_name!==null&&this.file_name!==void 0&&(r.writeFieldBegin("file_name",a.Type.STRING,3),r.writeString(this.file_name),r.writeFieldEnd()),this.copy_params!==null&&this.copy_params!==void 0&&(r.writeFieldBegin("copy_params",a.Type.STRUCT,4),this.copy_params.write(r),r.writeFieldEnd()),this.row_desc!==null&&this.row_desc!==void 0){r.writeFieldBegin("row_desc",a.Type.LIST,5),r.writeListBegin(a.Type.STRUCT,this.row_desc.length);for(let y in this.row_desc)this.row_desc.hasOwnProperty(y)&&(y=this.row_desc[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.create_params!==null&&this.create_params!==void 0&&(r.writeFieldBegin("create_params",a.Type.STRUCT,6),this.create_params.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Nw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_import_geo_table_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},IR=class{constructor(r){this.session=null,this.import_id=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.import_id!==void 0&&r.import_id!==null&&(this.import_id=r.import_id))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.import_id=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_import_table_status_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.import_id!==null&&this.import_id!==void 0&&(r.writeFieldBegin("import_id",a.Type.STRING,2),r.writeString(this.import_id),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Cw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TImportStatus(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TImportStatus,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_import_table_status_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},FR=class{constructor(r){this.session=null,this.archive_path=null,this.copy_params=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.archive_path!==void 0&&r.archive_path!==null&&(this.archive_path=r.archive_path),r.copy_params!==void 0&&r.copy_params!==null&&(this.copy_params=new l.TCopyParams(r.copy_params)))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.archive_path=r.readString():r.skip(p);break;case 3:p==a.Type.STRUCT?(this.copy_params=new l.TCopyParams,this.copy_params.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_first_geo_file_in_archive_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.archive_path!==null&&this.archive_path!==void 0&&(r.writeFieldBegin("archive_path",a.Type.STRING,2),r.writeString(this.archive_path),r.writeFieldEnd()),this.copy_params!==null&&this.copy_params!==void 0&&(r.writeFieldBegin("copy_params",a.Type.STRUCT,3),this.copy_params.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Rw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=r.success),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRING?this.success=r.readString():r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_first_geo_file_in_archive_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRING,0),r.writeString(this.success),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},OR=class{constructor(r){this.session=null,this.archive_path=null,this.copy_params=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.archive_path!==void 0&&r.archive_path!==null&&(this.archive_path=r.archive_path),r.copy_params!==void 0&&r.copy_params!==null&&(this.copy_params=new l.TCopyParams(r.copy_params)))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.archive_path=r.readString():r.skip(p);break;case 3:p==a.Type.STRUCT?(this.copy_params=new l.TCopyParams,this.copy_params.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_all_files_in_archive_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.archive_path!==null&&this.archive_path!==void 0&&(r.writeFieldBegin("archive_path",a.Type.STRING,2),r.writeString(this.archive_path),r.writeFieldEnd()),this.copy_params!==null&&this.copy_params!==void 0&&(r.writeFieldBegin("copy_params",a.Type.STRUCT,3),this.copy_params.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Lw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readString(),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_all_files_in_archive_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRING,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},MR=class{constructor(r){this.session=null,this.file_name=null,this.copy_params=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.file_name!==void 0&&r.file_name!==null&&(this.file_name=r.file_name),r.copy_params!==void 0&&r.copy_params!==null&&(this.copy_params=new l.TCopyParams(r.copy_params)))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.file_name=r.readString():r.skip(p);break;case 3:p==a.Type.STRUCT?(this.copy_params=new l.TCopyParams,this.copy_params.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_layers_in_geo_file_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.file_name!==null&&this.file_name!==void 0&&(r.writeFieldBegin("file_name",a.Type.STRING,2),r.writeString(this.file_name),r.writeFieldEnd()),this.copy_params!==null&&this.copy_params!==void 0&&(r.writeFieldBegin("copy_params",a.Type.STRUCT,3),this.copy_params.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Pw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[l.TGeoFileLayerInfo])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new l.TGeoFileLayerInfo,I.read(r),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_layers_in_geo_file_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRUCT,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},AR=class{constructor(r){this.session=null,this.query=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.query!==void 0&&r.query!==null&&(this.query=r.query))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.query=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_query_get_outer_fragment_count_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.query!==null&&this.query!==void 0&&(r.writeFieldBegin("query",a.Type.STRING,2),r.writeString(this.query),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Dw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=r.success),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.I64?this.success=r.readI64():r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_query_get_outer_fragment_count_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.I64,0),r.writeI64(this.success),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},NR=class{constructor(r){this.session=null,this.table_id=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_id!==void 0&&r.table_id!==null&&(this.table_id=r.table_id))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.I32?this.table_id=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_check_table_consistency_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0&&(r.writeFieldBegin("table_id",a.Type.I32,2),r.writeI32(this.table_id),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},jw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TTableMeta(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TTableMeta,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_check_table_consistency_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},CR=class{constructor(r){this.leaf_session=null,this.parent_session=null,this.query_ra=null,this.start_time_str=null,this.just_explain=null,this.outer_fragment_indices=null,r&&(r.leaf_session!==void 0&&r.leaf_session!==null&&(this.leaf_session=r.leaf_session),r.parent_session!==void 0&&r.parent_session!==null&&(this.parent_session=r.parent_session),r.query_ra!==void 0&&r.query_ra!==null&&(this.query_ra=r.query_ra),r.start_time_str!==void 0&&r.start_time_str!==null&&(this.start_time_str=r.start_time_str),r.just_explain!==void 0&&r.just_explain!==null&&(this.just_explain=r.just_explain),r.outer_fragment_indices!==void 0&&r.outer_fragment_indices!==null&&(this.outer_fragment_indices=a.copyList(r.outer_fragment_indices,[null])))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.leaf_session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.parent_session=r.readString():r.skip(p);break;case 3:p==a.Type.STRING?this.query_ra=r.readString():r.skip(p);break;case 4:p==a.Type.STRING?this.start_time_str=r.readString():r.skip(p);break;case 5:p==a.Type.BOOL?this.just_explain=r.readBool():r.skip(p);break;case 6:if(p==a.Type.LIST){this.outer_fragment_indices=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readI64(),this.outer_fragment_indices.push(I)}r.readListEnd()}else r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_start_query_args"),this.leaf_session!==null&&this.leaf_session!==void 0&&(r.writeFieldBegin("leaf_session",a.Type.STRING,1),r.writeString(this.leaf_session),r.writeFieldEnd()),this.parent_session!==null&&this.parent_session!==void 0&&(r.writeFieldBegin("parent_session",a.Type.STRING,2),r.writeString(this.parent_session),r.writeFieldEnd()),this.query_ra!==null&&this.query_ra!==void 0&&(r.writeFieldBegin("query_ra",a.Type.STRING,3),r.writeString(this.query_ra),r.writeFieldEnd()),this.start_time_str!==null&&this.start_time_str!==void 0&&(r.writeFieldBegin("start_time_str",a.Type.STRING,4),r.writeString(this.start_time_str),r.writeFieldEnd()),this.just_explain!==null&&this.just_explain!==void 0&&(r.writeFieldBegin("just_explain",a.Type.BOOL,5),r.writeBool(this.just_explain),r.writeFieldEnd()),this.outer_fragment_indices!==null&&this.outer_fragment_indices!==void 0){r.writeFieldBegin("outer_fragment_indices",a.Type.LIST,6),r.writeListBegin(a.Type.I64,this.outer_fragment_indices.length);for(let y in this.outer_fragment_indices)this.outer_fragment_indices.hasOwnProperty(y)&&(y=this.outer_fragment_indices[y],r.writeI64(y));r.writeListEnd(),r.writeFieldEnd()}r.writeFieldStop(),r.writeStructEnd()}},Uw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TPendingQuery(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TPendingQuery,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_start_query_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},RR=class{constructor(r){this.pending_query=null,this.subquery_id=null,this.start_time_str=null,r&&(r.pending_query!==void 0&&r.pending_query!==null&&(this.pending_query=new l.TPendingQuery(r.pending_query)),r.subquery_id!==void 0&&r.subquery_id!==null&&(this.subquery_id=r.subquery_id),r.start_time_str!==void 0&&r.start_time_str!==null&&(this.start_time_str=r.start_time_str))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.pending_query=new l.TPendingQuery,this.pending_query.read(r)):r.skip(p);break;case 2:p==a.Type.I64?this.subquery_id=r.readI64():r.skip(p);break;case 3:p==a.Type.STRING?this.start_time_str=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_execute_query_step_args"),this.pending_query!==null&&this.pending_query!==void 0&&(r.writeFieldBegin("pending_query",a.Type.STRUCT,1),this.pending_query.write(r),r.writeFieldEnd()),this.subquery_id!==null&&this.subquery_id!==void 0&&(r.writeFieldBegin("subquery_id",a.Type.I64,2),r.writeI64(this.subquery_id),r.writeFieldEnd()),this.start_time_str!==null&&this.start_time_str!==void 0&&(r.writeFieldBegin("start_time_str",a.Type.STRING,3),r.writeString(this.start_time_str),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},zw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TStepResult(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TStepResult,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_execute_query_step_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},LR=class{constructor(r){this.serialized_rows=null,this.row_desc=null,this.query_id=null,this.subquery_id=null,this.is_final_subquery_result=null,r&&(r.serialized_rows!==void 0&&r.serialized_rows!==null&&(this.serialized_rows=new w.TSerializedRows(r.serialized_rows)),r.row_desc!==void 0&&r.row_desc!==null&&(this.row_desc=a.copyList(r.row_desc,[l.TColumnType])),r.query_id!==void 0&&r.query_id!==null&&(this.query_id=r.query_id),r.subquery_id!==void 0&&r.subquery_id!==null&&(this.subquery_id=r.subquery_id),r.is_final_subquery_result!==void 0&&r.is_final_subquery_result!==null&&(this.is_final_subquery_result=r.is_final_subquery_result))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.serialized_rows=new w.TSerializedRows,this.serialized_rows.read(r)):r.skip(p);break;case 2:if(p==a.Type.LIST){this.row_desc=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new l.TColumnType,I.read(r),this.row_desc.push(I)}r.readListEnd()}else r.skip(p);break;case 3:p==a.Type.I64?this.query_id=r.readI64():r.skip(p);break;case 4:p==a.Type.I64?this.subquery_id=r.readI64():r.skip(p);break;case 5:p==a.Type.BOOL?this.is_final_subquery_result=r.readBool():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_broadcast_serialized_rows_args"),this.serialized_rows!==null&&this.serialized_rows!==void 0&&(r.writeFieldBegin("serialized_rows",a.Type.STRUCT,1),this.serialized_rows.write(r),r.writeFieldEnd()),this.row_desc!==null&&this.row_desc!==void 0){r.writeFieldBegin("row_desc",a.Type.LIST,2),r.writeListBegin(a.Type.STRUCT,this.row_desc.length);for(let y in this.row_desc)this.row_desc.hasOwnProperty(y)&&(y=this.row_desc[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.query_id!==null&&this.query_id!==void 0&&(r.writeFieldBegin("query_id",a.Type.I64,3),r.writeI64(this.query_id),r.writeFieldEnd()),this.subquery_id!==null&&this.subquery_id!==void 0&&(r.writeFieldBegin("subquery_id",a.Type.I64,4),r.writeI64(this.subquery_id),r.writeFieldEnd()),this.is_final_subquery_result!==null&&this.is_final_subquery_result!==void 0&&(r.writeFieldBegin("is_final_subquery_result",a.Type.BOOL,5),r.writeBool(this.is_final_subquery_result),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},$w=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_broadcast_serialized_rows_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},PR=class{constructor(r){this.session=null,this.widget_id=null,this.node_idx=null,this.vega_json=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.widget_id!==void 0&&r.widget_id!==null&&(this.widget_id=r.widget_id),r.node_idx!==void 0&&r.node_idx!==null&&(this.node_idx=r.node_idx),r.vega_json!==void 0&&r.vega_json!==null&&(this.vega_json=r.vega_json))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.I64?this.widget_id=r.readI64():r.skip(p);break;case 3:p==a.Type.I16?this.node_idx=r.readI16():r.skip(p);break;case 4:p==a.Type.STRING?this.vega_json=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_start_render_query_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.widget_id!==null&&this.widget_id!==void 0&&(r.writeFieldBegin("widget_id",a.Type.I64,2),r.writeI64(this.widget_id),r.writeFieldEnd()),this.node_idx!==null&&this.node_idx!==void 0&&(r.writeFieldBegin("node_idx",a.Type.I16,3),r.writeI16(this.node_idx),r.writeFieldEnd()),this.vega_json!==null&&this.vega_json!==void 0&&(r.writeFieldBegin("vega_json",a.Type.STRING,4),r.writeString(this.vega_json),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},qw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TPendingRenderQuery(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TPendingRenderQuery,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_start_render_query_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},DR=class{constructor(r){this.pending_render=null,this.merged_data=null,r&&(r.pending_render!==void 0&&r.pending_render!==null&&(this.pending_render=new l.TPendingRenderQuery(r.pending_render)),r.merged_data!==void 0&&r.merged_data!==null&&(this.merged_data=a.copyMap(r.merged_data,[a.copyMap,a.copyMap,a.copyMap,a.copyList,l.TRenderDatum])))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.pending_render=new l.TPendingRenderQuery,this.pending_render.read(r)):r.skip(p);break;case 2:if(p==a.Type.MAP){this.merged_data={};const g=r.readMapBegin().size||0;for(let E=0;E<g;++E){let I=null,Z=null;I=r.readString(),Z={};const Ve=r.readMapBegin().size||0;for(let mn=0;mn<Ve;++mn){let ol=null,zS=null;ol=r.readString(),zS={};const yQ=r.readMapBegin().size||0;for(let nL=0;nL<yQ;++nL){let iL=null,$S=null;iL=r.readString(),$S={};const mQ=r.readMapBegin().size||0;for(let sL=0;sL<mQ;++sL){let rL=null,qS=null;rL=r.readString(),qS=[];const wQ=r.readListBegin().size||0;for(let aL=0;aL<wQ;++aL){let GS=null;GS=new l.TRenderDatum,GS.read(r),qS.push(GS)}r.readListEnd(),$S[rL]=qS}r.readMapEnd(),zS[iL]=$S}r.readMapEnd(),Z[ol]=zS}r.readMapEnd(),this.merged_data[I]=Z}r.readMapEnd()}else r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_execute_next_render_step_args"),this.pending_render!==null&&this.pending_render!==void 0&&(r.writeFieldBegin("pending_render",a.Type.STRUCT,1),this.pending_render.write(r),r.writeFieldEnd()),this.merged_data!==null&&this.merged_data!==void 0){r.writeFieldBegin("merged_data",a.Type.MAP,2),r.writeMapBegin(a.Type.STRING,a.Type.MAP,a.objectLength(this.merged_data));for(let y in this.merged_data)if(this.merged_data.hasOwnProperty(y)){let p=this.merged_data[y];r.writeString(y),r.writeMapBegin(a.Type.STRING,a.Type.MAP,a.objectLength(p));for(let h in p)if(p.hasOwnProperty(h)){let v=p[h];r.writeString(h),r.writeMapBegin(a.Type.STRING,a.Type.MAP,a.objectLength(v));for(let g in v)if(v.hasOwnProperty(g)){let E=v[g];r.writeString(g),r.writeMapBegin(a.Type.STRING,a.Type.LIST,a.objectLength(E));for(let I in E)if(E.hasOwnProperty(I)){let Z=E[I];r.writeString(I),r.writeListBegin(a.Type.STRUCT,Z.length);for(let me in Z)Z.hasOwnProperty(me)&&(me=Z[me],me.write(r));r.writeListEnd()}r.writeMapEnd()}r.writeMapEnd()}r.writeMapEnd()}r.writeMapEnd(),r.writeFieldEnd()}r.writeFieldStop(),r.writeStructEnd()}},Gw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TRenderStepResult(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TRenderStepResult,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_execute_next_render_step_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},jR=class{constructor(r){this.session=null,this.insert_data=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.insert_data!==void 0&&r.insert_data!==null&&(this.insert_data=new l.TInsertData(r.insert_data)))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRUCT?(this.insert_data=new l.TInsertData,this.insert_data.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_insert_data_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.insert_data!==null&&this.insert_data!==void 0&&(r.writeFieldBegin("insert_data",a.Type.STRUCT,2),this.insert_data.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Vw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_insert_data_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},UR=class{constructor(r){this.session=null,this.insert_chunks=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.insert_chunks!==void 0&&r.insert_chunks!==null&&(this.insert_chunks=new l.TInsertChunks(r.insert_chunks)))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRUCT?(this.insert_chunks=new l.TInsertChunks,this.insert_chunks.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_insert_chunks_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.insert_chunks!==null&&this.insert_chunks!==void 0&&(r.writeFieldBegin("insert_chunks",a.Type.STRUCT,2),this.insert_chunks.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Hw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_insert_chunks_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},zR=class{constructor(r){this.session=null,this.table_id=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_id!==void 0&&r.table_id!==null&&(this.table_id=r.table_id))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.I32?this.table_id=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_checkpoint_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0&&(r.writeFieldBegin("table_id",a.Type.I32,2),r.writeI32(this.table_id),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Ww=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_checkpoint_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},$R=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_roles_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Yw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readString(),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_roles_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRING,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},qR=class{constructor(r){this.session=null,this.roleName=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.roleName!==void 0&&r.roleName!==null&&(this.roleName=r.roleName))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.roleName=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_db_objects_for_grantee_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.roleName!==null&&this.roleName!==void 0&&(r.writeFieldBegin("roleName",a.Type.STRING,2),r.writeString(this.roleName),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Xw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[l.TDBObject])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new l.TDBObject,I.read(r),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_db_objects_for_grantee_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRUCT,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},GR=class{constructor(r){this.session=null,this.objectName=null,this.type=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.objectName!==void 0&&r.objectName!==null&&(this.objectName=r.objectName),r.type!==void 0&&r.type!==null&&(this.type=r.type))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.objectName=r.readString():r.skip(p);break;case 3:p==a.Type.I32?this.type=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_db_object_privs_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.objectName!==null&&this.objectName!==void 0&&(r.writeFieldBegin("objectName",a.Type.STRING,2),r.writeString(this.objectName),r.writeFieldEnd()),this.type!==null&&this.type!==void 0&&(r.writeFieldBegin("type",a.Type.I32,3),r.writeI32(this.type),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Kw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[l.TDBObject])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new l.TDBObject,I.read(r),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_db_object_privs_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRUCT,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},VR=class{constructor(r){this.session=null,this.userName=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.userName!==void 0&&r.userName!==null&&(this.userName=r.userName))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.userName=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_all_roles_for_user_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.userName!==null&&this.userName!==void 0&&(r.writeFieldBegin("userName",a.Type.STRING,2),r.writeString(this.userName),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Jw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readString(),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_all_roles_for_user_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRING,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},HR=class{constructor(r){this.session=null,this.userName=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.userName!==void 0&&r.userName!==null&&(this.userName=r.userName))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.userName=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_all_effective_roles_for_user_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.userName!==null&&this.userName!==void 0&&(r.writeFieldBegin("userName",a.Type.STRING,2),r.writeString(this.userName),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Qw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readString(),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_all_effective_roles_for_user_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRING,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},WR=class{constructor(r){this.session=null,this.granteeName=null,this.roleName=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.granteeName!==void 0&&r.granteeName!==null&&(this.granteeName=r.granteeName),r.roleName!==void 0&&r.roleName!==null&&(this.roleName=r.roleName))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.granteeName=r.readString():r.skip(p);break;case 3:p==a.Type.STRING?this.roleName=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_has_role_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.granteeName!==null&&this.granteeName!==void 0&&(r.writeFieldBegin("granteeName",a.Type.STRING,2),r.writeString(this.granteeName),r.writeFieldEnd()),this.roleName!==null&&this.roleName!==void 0&&(r.writeFieldBegin("roleName",a.Type.STRING,3),r.writeString(this.roleName),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Zw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=r.success),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.BOOL?this.success=r.readBool():r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_has_role_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.BOOL,0),r.writeBool(this.success),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},YR=class{constructor(r){this.session=null,this.granteeName=null,this.ObjectName=null,this.objectType=null,this.permissions=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.granteeName!==void 0&&r.granteeName!==null&&(this.granteeName=r.granteeName),r.ObjectName!==void 0&&r.ObjectName!==null&&(this.ObjectName=r.ObjectName),r.objectType!==void 0&&r.objectType!==null&&(this.objectType=r.objectType),r.permissions!==void 0&&r.permissions!==null&&(this.permissions=new l.TDBObjectPermissions(r.permissions)))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.granteeName=r.readString():r.skip(p);break;case 3:p==a.Type.STRING?this.ObjectName=r.readString():r.skip(p);break;case 4:p==a.Type.I32?this.objectType=r.readI32():r.skip(p);break;case 5:p==a.Type.STRUCT?(this.permissions=new l.TDBObjectPermissions,this.permissions.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_has_object_privilege_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.granteeName!==null&&this.granteeName!==void 0&&(r.writeFieldBegin("granteeName",a.Type.STRING,2),r.writeString(this.granteeName),r.writeFieldEnd()),this.ObjectName!==null&&this.ObjectName!==void 0&&(r.writeFieldBegin("ObjectName",a.Type.STRING,3),r.writeString(this.ObjectName),r.writeFieldEnd()),this.objectType!==null&&this.objectType!==void 0&&(r.writeFieldBegin("objectType",a.Type.I32,4),r.writeI32(this.objectType),r.writeFieldEnd()),this.permissions!==null&&this.permissions!==void 0&&(r.writeFieldBegin("permissions",a.Type.STRUCT,5),this.permissions.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},eb=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=r.success),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.BOOL?this.success=r.readBool():r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_has_object_privilege_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.BOOL,0),r.writeBool(this.success),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},XR=class{constructor(r){this.session=null,this.key=null,this.nonce="",r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.key!==void 0&&r.key!==null&&(this.key=r.key),r.nonce!==void 0&&r.nonce!==null&&(this.nonce=r.nonce))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.key=r.readString():r.skip(p);break;case 3:p==a.Type.STRING?this.nonce=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_license_key_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.key!==null&&this.key!==void 0&&(r.writeFieldBegin("key",a.Type.STRING,2),r.writeString(this.key),r.writeFieldEnd()),this.nonce!==null&&this.nonce!==void 0&&(r.writeFieldBegin("nonce",a.Type.STRING,3),r.writeString(this.nonce),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},tb=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TLicenseInfo(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TLicenseInfo,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_license_key_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},KR=class{constructor(r){this.session=null,this.nonce="",r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.nonce!==void 0&&r.nonce!==null&&(this.nonce=r.nonce))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.nonce=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_license_claims_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.nonce!==null&&this.nonce!==void 0&&(r.writeFieldBegin("nonce",a.Type.STRING,2),r.writeString(this.nonce),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},nb=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TLicenseInfo(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TLicenseInfo,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_license_claims_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},JR=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_device_parameters_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ib=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyMap(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.MAP){this.success={};const g=r.readMapBegin().size||0;for(let E=0;E<g;++E){let I=null,Z=null;I=r.readString(),Z=r.readString(),this.success[I]=Z}r.readMapEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_device_parameters_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.MAP,0),r.writeMapBegin(a.Type.STRING,a.Type.STRING,a.objectLength(this.success));for(let y in this.success)if(this.success.hasOwnProperty(y)){let p=this.success[y];r.writeString(y),r.writeString(p)}r.writeMapEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},QR=class{constructor(r){this.session=null,this.udfs=null,this.udtfs=null,this.device_ir_map=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.udfs!==void 0&&r.udfs!==null&&(this.udfs=a.copyList(r.udfs,[m.TUserDefinedFunction])),r.udtfs!==void 0&&r.udtfs!==null&&(this.udtfs=a.copyList(r.udtfs,[m.TUserDefinedTableFunction])),r.device_ir_map!==void 0&&r.device_ir_map!==null&&(this.device_ir_map=a.copyMap(r.device_ir_map,[null])))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:if(p==a.Type.LIST){this.udfs=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new m.TUserDefinedFunction,I.read(r),this.udfs.push(I)}r.readListEnd()}else r.skip(p);break;case 3:if(p==a.Type.LIST){this.udtfs=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new m.TUserDefinedTableFunction,I.read(r),this.udtfs.push(I)}r.readListEnd()}else r.skip(p);break;case 4:if(p==a.Type.MAP){this.device_ir_map={};const g=r.readMapBegin().size||0;for(let E=0;E<g;++E){let I=null,Z=null;I=r.readString(),Z=r.readString(),this.device_ir_map[I]=Z}r.readMapEnd()}else r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_register_runtime_extension_functions_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.udfs!==null&&this.udfs!==void 0){r.writeFieldBegin("udfs",a.Type.LIST,2),r.writeListBegin(a.Type.STRUCT,this.udfs.length);for(let y in this.udfs)this.udfs.hasOwnProperty(y)&&(y=this.udfs[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}if(this.udtfs!==null&&this.udtfs!==void 0){r.writeFieldBegin("udtfs",a.Type.LIST,3),r.writeListBegin(a.Type.STRUCT,this.udtfs.length);for(let y in this.udtfs)this.udtfs.hasOwnProperty(y)&&(y=this.udtfs[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}if(this.device_ir_map!==null&&this.device_ir_map!==void 0){r.writeFieldBegin("device_ir_map",a.Type.MAP,4),r.writeMapBegin(a.Type.STRING,a.Type.STRING,a.objectLength(this.device_ir_map));for(let y in this.device_ir_map)if(this.device_ir_map.hasOwnProperty(y)){let p=this.device_ir_map[y];r.writeString(y),r.writeString(p)}r.writeMapEnd(),r.writeFieldEnd()}r.writeFieldStop(),r.writeStructEnd()}},sb=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_register_runtime_extension_functions_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ZR=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_table_function_names_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},rb=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readString(),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_table_function_names_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRING,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},eL=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_runtime_table_function_names_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ab=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readString(),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_runtime_table_function_names_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRING,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},tL=class{constructor(r){this.session=null,this.udtf_names=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.udtf_names!==void 0&&r.udtf_names!==null&&(this.udtf_names=a.copyList(r.udtf_names,[null])))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:if(p==a.Type.LIST){this.udtf_names=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readString(),this.udtf_names.push(I)}r.readListEnd()}else r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_table_function_details_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.udtf_names!==null&&this.udtf_names!==void 0){r.writeFieldBegin("udtf_names",a.Type.LIST,2),r.writeListBegin(a.Type.STRING,this.udtf_names.length);for(let y in this.udtf_names)this.udtf_names.hasOwnProperty(y)&&(y=this.udtf_names[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}r.writeFieldStop(),r.writeStructEnd()}},ob=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[m.TUserDefinedTableFunction])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new m.TUserDefinedTableFunction,I.read(r),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_table_function_details_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRUCT,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}};d.Client=class{constructor(y,p){this.output=y,this.pClass=p,this._seqid=0,this._reqs={}}seqid(){return this._seqid}new_seqid(){return this._seqid+=1}connect(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((g,E)=>{v._reqs[v.seqid()]=(I,Z)=>I?E(I):g(Z),v.send_connect(y,p,h)})}send_connect(y,p,h){const v=new this.pClass(this.output),g={user:y,passwd:p,dbname:h},E=new T(g);try{return v.writeMessageBegin("connect",a.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(I){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),I}}recv_connect(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new b;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("connect failed: unknown result")}krb5_connect(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_krb5_connect(y,p)})}send_krb5_connect(y,p){const h=new this.pClass(this.output),v={inputToken:y,dbname:p},g=new S(v);try{return h.writeMessageBegin("krb5_connect",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_krb5_connect(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new x;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("krb5_connect failed: unknown result")}disconnect(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_disconnect(y)})}send_disconnect(y){const p=new this.pClass(this.output),h={session:y},v=new B(h);try{return p.writeMessageBegin("disconnect",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_disconnect(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new F;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}switch_database(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_switch_database(y,p)})}send_switch_database(y,p){const h=new this.pClass(this.output),v={session:y,dbname:p},g=new k(v);try{return h.writeMessageBegin("switch_database",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_switch_database(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new A;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}clone_session(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_clone_session(y)})}send_clone_session(y){const p=new this.pClass(this.output),h={session:y},v=new M(h);try{return p.writeMessageBegin("clone_session",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_clone_session(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new R;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("clone_session failed: unknown result")}get_server_status(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_get_server_status(y)})}send_get_server_status(y){const p=new this.pClass(this.output),h={session:y},v=new P(h);try{return p.writeMessageBegin("get_server_status",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_get_server_status(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new j;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_server_status failed: unknown result")}get_status(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_get_status(y)})}send_get_status(y){const p=new this.pClass(this.output),h={session:y},v=new D(h);try{return p.writeMessageBegin("get_status",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_get_status(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new z;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_status failed: unknown result")}get_hardware_info(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_get_hardware_info(y)})}send_get_hardware_info(y){const p=new this.pClass(this.output),h={session:y},v=new $(h);try{return p.writeMessageBegin("get_hardware_info",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_get_hardware_info(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new K;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_hardware_info failed: unknown result")}get_tables(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_get_tables(y)})}send_get_tables(y){const p=new this.pClass(this.output),h={session:y},v=new H(h);try{return p.writeMessageBegin("get_tables",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_get_tables(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new W;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_tables failed: unknown result")}get_tables_for_database(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_get_tables_for_database(y,p)})}send_get_tables_for_database(y,p){const h=new this.pClass(this.output),v={session:y,database_name:p},g=new J(v);try{return h.writeMessageBegin("get_tables_for_database",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_get_tables_for_database(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new V;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_tables_for_database failed: unknown result")}get_physical_tables(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_get_physical_tables(y)})}send_get_physical_tables(y){const p=new this.pClass(this.output),h={session:y},v=new le(h);try{return p.writeMessageBegin("get_physical_tables",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_get_physical_tables(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new pe;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_physical_tables failed: unknown result")}get_views(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_get_views(y)})}send_get_views(y){const p=new this.pClass(this.output),h={session:y},v=new se(h);try{return p.writeMessageBegin("get_views",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_get_views(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Ne;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_views failed: unknown result")}get_tables_meta(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_get_tables_meta(y)})}send_get_tables_meta(y){const p=new this.pClass(this.output),h={session:y},v=new fe(h);try{return p.writeMessageBegin("get_tables_meta",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_get_tables_meta(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Oe;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_tables_meta failed: unknown result")}get_table_details(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_get_table_details(y,p)})}send_get_table_details(y,p){const h=new this.pClass(this.output),v={session:y,table_name:p},g=new Ce(v);try{return h.writeMessageBegin("get_table_details",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_get_table_details(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new We;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_table_details failed: unknown result")}get_table_details_for_database(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((g,E)=>{v._reqs[v.seqid()]=(I,Z)=>I?E(I):g(Z),v.send_get_table_details_for_database(y,p,h)})}send_get_table_details_for_database(y,p,h){const v=new this.pClass(this.output),g={session:y,table_name:p,database_name:h},E=new Bt(g);try{return v.writeMessageBegin("get_table_details_for_database",a.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(I){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),I}}recv_get_table_details_for_database(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new vt;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_table_details_for_database failed: unknown result")}get_internal_table_details(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((g,E)=>{v._reqs[v.seqid()]=(I,Z)=>I?E(I):g(Z),v.send_get_internal_table_details(y,p,h)})}send_get_internal_table_details(y,p,h){const v=new this.pClass(this.output),g={session:y,table_name:p,include_system_columns:h},E=new ge(g);try{return v.writeMessageBegin("get_internal_table_details",a.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(I){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),I}}recv_get_internal_table_details(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new q;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_internal_table_details failed: unknown result")}get_internal_table_details_for_database(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((g,E)=>{v._reqs[v.seqid()]=(I,Z)=>I?E(I):g(Z),v.send_get_internal_table_details_for_database(y,p,h)})}send_get_internal_table_details_for_database(y,p,h){const v=new this.pClass(this.output),g={session:y,table_name:p,database_name:h},E=new G(g);try{return v.writeMessageBegin("get_internal_table_details_for_database",a.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(I){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),I}}recv_get_internal_table_details_for_database(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new L;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_internal_table_details_for_database failed: unknown result")}get_users(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_get_users(y)})}send_get_users(y){const p=new this.pClass(this.output),h={session:y},v=new Y(h);try{return p.writeMessageBegin("get_users",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_get_users(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Q;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_users failed: unknown result")}get_databases(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_get_databases(y)})}send_get_databases(y){const p=new this.pClass(this.output),h={session:y},v=new ae(h);try{return p.writeMessageBegin("get_databases",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_get_databases(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new re;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_databases failed: unknown result")}get_version(){this._seqid=this.new_seqid();const y=this;return new Promise((p,h)=>{y._reqs[y.seqid()]=(v,g)=>v?h(v):p(g),y.send_get_version()})}send_get_version(){const y=new this.pClass(this.output),p=new _e;try{return y.writeMessageBegin("get_version",a.MessageType.CALL,this.seqid()),p.write(y),y.writeMessageEnd(),this.output.flush()}catch(h){throw delete this._reqs[this.seqid()],typeof y.reset=="function"&&y.reset(),h}}recv_get_version(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Ee;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_version failed: unknown result")}start_heap_profile(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_start_heap_profile(y)})}send_start_heap_profile(y){const p=new this.pClass(this.output),h={session:y},v=new Je(h);try{return p.writeMessageBegin("start_heap_profile",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_start_heap_profile(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new zt;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}stop_heap_profile(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_stop_heap_profile(y)})}send_stop_heap_profile(y){const p=new this.pClass(this.output),h={session:y},v=new At(h);try{return p.writeMessageBegin("stop_heap_profile",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_stop_heap_profile(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new et;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}get_heap_profile(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_get_heap_profile(y)})}send_get_heap_profile(y){const p=new this.pClass(this.output),h={session:y},v=new fn(h);try{return p.writeMessageBegin("get_heap_profile",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_get_heap_profile(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new qn;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_heap_profile failed: unknown result")}get_memory(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_get_memory(y,p)})}send_get_memory(y,p){const h=new this.pClass(this.output),v={session:y,memory_level:p},g=new gs(v);try{return h.writeMessageBegin("get_memory",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_get_memory(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new ue;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_memory failed: unknown result")}clear_cpu_memory(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_clear_cpu_memory(y)})}send_clear_cpu_memory(y){const p=new this.pClass(this.output),h={session:y},v=new Bi(h);try{return p.writeMessageBegin("clear_cpu_memory",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_clear_cpu_memory(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new ni;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}clear_gpu_memory(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_clear_gpu_memory(y)})}send_clear_gpu_memory(y){const p=new this.pClass(this.output),h={session:y},v=new Xr(h);try{return p.writeMessageBegin("clear_gpu_memory",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_clear_gpu_memory(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new vn;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}set_cur_session(y,p,h,v,g){this._seqid=this.new_seqid();const E=this;return new Promise((I,Z)=>{E._reqs[E.seqid()]=(me,Ve)=>me?Z(me):I(Ve),E.send_set_cur_session(y,p,h,v,g)})}send_set_cur_session(y,p,h,v,g){const E=new this.pClass(this.output),I={parent_session:y,leaf_session:p,start_time_str:h,label:v,for_running_query_kernel:g},Z=new rc(I);try{return E.writeMessageBegin("set_cur_session",a.MessageType.CALL,this.seqid()),Z.write(E),E.writeMessageEnd(),this.output.flush()}catch(me){throw delete this._reqs[this.seqid()],typeof E.reset=="function"&&E.reset(),me}}recv_set_cur_session(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new ac;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}invalidate_cur_session(y,p,h,v,g){this._seqid=this.new_seqid();const E=this;return new Promise((I,Z)=>{E._reqs[E.seqid()]=(me,Ve)=>me?Z(me):I(Ve),E.send_invalidate_cur_session(y,p,h,v,g)})}send_invalidate_cur_session(y,p,h,v,g){const E=new this.pClass(this.output),I={parent_session:y,leaf_session:p,start_time_str:h,label:v,for_running_query_kernel:g},Z=new Ks(I);try{return E.writeMessageBegin("invalidate_cur_session",a.MessageType.CALL,this.seqid()),Z.write(E),E.writeMessageEnd(),this.output.flush()}catch(me){throw delete this._reqs[this.seqid()],typeof E.reset=="function"&&E.reset(),me}}recv_invalidate_cur_session(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new oc;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}set_table_epoch(y,p,h,v){this._seqid=this.new_seqid();const g=this;return new Promise((E,I)=>{g._reqs[g.seqid()]=(Z,me)=>Z?I(Z):E(me),g.send_set_table_epoch(y,p,h,v)})}send_set_table_epoch(y,p,h,v){const g=new this.pClass(this.output),E={session:y,db_id:p,table_id:h,new_epoch:v},I=new C(E);try{return g.writeMessageBegin("set_table_epoch",a.MessageType.CALL,this.seqid()),I.write(g),g.writeMessageEnd(),this.output.flush()}catch(Z){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),Z}}recv_set_table_epoch(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new O;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}set_table_epoch_by_name(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((g,E)=>{v._reqs[v.seqid()]=(I,Z)=>I?E(I):g(Z),v.send_set_table_epoch_by_name(y,p,h)})}send_set_table_epoch_by_name(y,p,h){const v=new this.pClass(this.output),g={session:y,table_name:p,new_epoch:h},E=new N(g);try{return v.writeMessageBegin("set_table_epoch_by_name",a.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(I){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),I}}recv_set_table_epoch_by_name(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new U;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}get_table_epoch(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((g,E)=>{v._reqs[v.seqid()]=(I,Z)=>I?E(I):g(Z),v.send_get_table_epoch(y,p,h)})}send_get_table_epoch(y,p,h){const v=new this.pClass(this.output),g={session:y,db_id:p,table_id:h},E=new X(g);try{return v.writeMessageBegin("get_table_epoch",a.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(I){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),I}}recv_get_table_epoch(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new ee;return g.read(y),y.readMessageEnd(),g.success!==null?v(null,g.success):v("get_table_epoch failed: unknown result")}get_table_epoch_by_name(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_get_table_epoch_by_name(y,p)})}send_get_table_epoch_by_name(y,p){const h=new this.pClass(this.output),v={session:y,table_name:p},g=new ie(v);try{return h.writeMessageBegin("get_table_epoch_by_name",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_get_table_epoch_by_name(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Me;return g.read(y),y.readMessageEnd(),g.success!==null?v(null,g.success):v("get_table_epoch_by_name failed: unknown result")}get_table_epochs(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((g,E)=>{v._reqs[v.seqid()]=(I,Z)=>I?E(I):g(Z),v.send_get_table_epochs(y,p,h)})}send_get_table_epochs(y,p,h){const v=new this.pClass(this.output),g={session:y,db_id:p,table_id:h},E=new Ue(g);try{return v.writeMessageBegin("get_table_epochs",a.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(I){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),I}}recv_get_table_epochs(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new ze;return g.read(y),y.readMessageEnd(),g.success!==null?v(null,g.success):v("get_table_epochs failed: unknown result")}set_table_epochs(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((g,E)=>{v._reqs[v.seqid()]=(I,Z)=>I?E(I):g(Z),v.send_set_table_epochs(y,p,h)})}send_set_table_epochs(y,p,h){const v=new this.pClass(this.output),g={session:y,db_id:p,table_epochs:h},E=new Xe(g);try{return v.writeMessageBegin("set_table_epochs",a.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(I){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),I}}recv_set_table_epochs(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}new Ke().read(y),y.readMessageEnd(),v(null)}get_session_info(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_get_session_info(y)})}send_get_session_info(y){const p=new this.pClass(this.output),h={session:y},v=new lc(h);try{return p.writeMessageBegin("get_session_info",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_get_session_info(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Xm;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_session_info failed: unknown result")}get_queries_info(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_get_queries_info(y)})}send_get_queries_info(y){const p=new this.pClass(this.output),h={session:y},v=new G3(h);try{return p.writeMessageBegin("get_queries_info",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_get_queries_info(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Km;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_queries_info failed: unknown result")}set_leaf_info(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_set_leaf_info(y,p)})}send_set_leaf_info(y,p){const h=new this.pClass(this.output),v={session:y,leaf_info:p},g=new V3(v);try{return h.writeMessageBegin("set_leaf_info",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_set_leaf_info(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Jm;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}sql_execute(y,p,h,v,g,E){this._seqid=this.new_seqid();const I=this;return new Promise((Z,me)=>{I._reqs[I.seqid()]=(Ve,mn)=>Ve?me(Ve):Z(mn),I.send_sql_execute(y,p,h,v,g,E)})}send_sql_execute(y,p,h,v,g,E){const I=new this.pClass(this.output),Z={session:y,query:p,column_format:h,nonce:v,first_n:g,at_most_n:E},me=new H3(Z);try{return I.writeMessageBegin("sql_execute",a.MessageType.CALL,this.seqid()),me.write(I),I.writeMessageEnd(),this.output.flush()}catch(Ve){throw delete this._reqs[this.seqid()],typeof I.reset=="function"&&I.reset(),Ve}}recv_sql_execute(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Qm;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("sql_execute failed: unknown result")}sql_execute_df(y,p,h,v,g,E){this._seqid=this.new_seqid();const I=this;return new Promise((Z,me)=>{I._reqs[I.seqid()]=(Ve,mn)=>Ve?me(Ve):Z(mn),I.send_sql_execute_df(y,p,h,v,g,E)})}send_sql_execute_df(y,p,h,v,g,E){const I=new this.pClass(this.output),Z={session:y,query:p,device_type:h,device_id:v,first_n:g,transport_method:E},me=new W3(Z);try{return I.writeMessageBegin("sql_execute_df",a.MessageType.CALL,this.seqid()),me.write(I),I.writeMessageEnd(),this.output.flush()}catch(Ve){throw delete this._reqs[this.seqid()],typeof I.reset=="function"&&I.reset(),Ve}}recv_sql_execute_df(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Zm;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("sql_execute_df failed: unknown result")}sql_execute_gdf(y,p,h,v){this._seqid=this.new_seqid();const g=this;return new Promise((E,I)=>{g._reqs[g.seqid()]=(Z,me)=>Z?I(Z):E(me),g.send_sql_execute_gdf(y,p,h,v)})}send_sql_execute_gdf(y,p,h,v){const g=new this.pClass(this.output),E={session:y,query:p,device_id:h,first_n:v},I=new Y3(E);try{return g.writeMessageBegin("sql_execute_gdf",a.MessageType.CALL,this.seqid()),I.write(g),g.writeMessageEnd(),this.output.flush()}catch(Z){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),Z}}recv_sql_execute_gdf(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new ew;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("sql_execute_gdf failed: unknown result")}deallocate_df(y,p,h,v){this._seqid=this.new_seqid();const g=this;return new Promise((E,I)=>{g._reqs[g.seqid()]=(Z,me)=>Z?I(Z):E(me),g.send_deallocate_df(y,p,h,v)})}send_deallocate_df(y,p,h,v){const g=new this.pClass(this.output),E={session:y,df:p,device_type:h,device_id:v},I=new X3(E);try{return g.writeMessageBegin("deallocate_df",a.MessageType.CALL,this.seqid()),I.write(g),g.writeMessageEnd(),this.output.flush()}catch(Z){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),Z}}recv_deallocate_df(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new tw;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}interrupt(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_interrupt(y,p)})}send_interrupt(y,p){const h=new this.pClass(this.output),v={query_session:y,interrupt_session:p},g=new K3(v);try{return h.writeMessageBegin("interrupt",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_interrupt(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new nw;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}sql_validate(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_sql_validate(y,p)})}send_sql_validate(y,p){const h=new this.pClass(this.output),v={session:y,query:p},g=new J3(v);try{return h.writeMessageBegin("sql_validate",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_sql_validate(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new iw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("sql_validate failed: unknown result")}get_completion_hints(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((g,E)=>{v._reqs[v.seqid()]=(I,Z)=>I?E(I):g(Z),v.send_get_completion_hints(y,p,h)})}send_get_completion_hints(y,p,h){const v=new this.pClass(this.output),g={session:y,sql:p,cursor:h},E=new Q3(g);try{return v.writeMessageBegin("get_completion_hints",a.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(I){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),I}}recv_get_completion_hints(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new sw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_completion_hints failed: unknown result")}set_execution_mode(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_set_execution_mode(y,p)})}send_set_execution_mode(y,p){const h=new this.pClass(this.output),v={session:y,mode:p},g=new Z3(v);try{return h.writeMessageBegin("set_execution_mode",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_set_execution_mode(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new rw;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}render_vega(y,p,h,v,g){this._seqid=this.new_seqid();const E=this;return new Promise((I,Z)=>{E._reqs[E.seqid()]=(me,Ve)=>me?Z(me):I(Ve),E.send_render_vega(y,p,h,v,g)})}send_render_vega(y,p,h,v,g){const E=new this.pClass(this.output),I={session:y,widget_id:p,vega_json:h,compression_level:v,nonce:g},Z=new eR(I);try{return E.writeMessageBegin("render_vega",a.MessageType.CALL,this.seqid()),Z.write(E),E.writeMessageEnd(),this.output.flush()}catch(me){throw delete this._reqs[this.seqid()],typeof E.reset=="function"&&E.reset(),me}}recv_render_vega(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new aw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("render_vega failed: unknown result")}get_result_row_for_pixel(y,p,h,v,g,E,I){this._seqid=this.new_seqid();const Z=this;return new Promise((me,Ve)=>{Z._reqs[Z.seqid()]=(mn,ol)=>mn?Ve(mn):me(ol),Z.send_get_result_row_for_pixel(y,p,h,v,g,E,I)})}send_get_result_row_for_pixel(y,p,h,v,g,E,I){const Z=new this.pClass(this.output),me={session:y,widget_id:p,pixel:h,table_col_names:v,column_format:g,pixelRadius:E,nonce:I},Ve=new tR(me);try{return Z.writeMessageBegin("get_result_row_for_pixel",a.MessageType.CALL,this.seqid()),Ve.write(Z),Z.writeMessageEnd(),this.output.flush()}catch(mn){throw delete this._reqs[this.seqid()],typeof Z.reset=="function"&&Z.reset(),mn}}recv_get_result_row_for_pixel(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new ow;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_result_row_for_pixel failed: unknown result")}create_custom_expression(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_create_custom_expression(y,p)})}send_create_custom_expression(y,p){const h=new this.pClass(this.output),v={session:y,custom_expression:p},g=new nR(v);try{return h.writeMessageBegin("create_custom_expression",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_create_custom_expression(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new lw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("create_custom_expression failed: unknown result")}get_custom_expressions(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_get_custom_expressions(y)})}send_get_custom_expressions(y){const p=new this.pClass(this.output),h={session:y},v=new iR(h);try{return p.writeMessageBegin("get_custom_expressions",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_get_custom_expressions(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new cw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_custom_expressions failed: unknown result")}update_custom_expression(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((g,E)=>{v._reqs[v.seqid()]=(I,Z)=>I?E(I):g(Z),v.send_update_custom_expression(y,p,h)})}send_update_custom_expression(y,p,h){const v=new this.pClass(this.output),g={session:y,id:p,expression_json:h},E=new sR(g);try{return v.writeMessageBegin("update_custom_expression",a.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(I){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),I}}recv_update_custom_expression(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new dw;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}delete_custom_expressions(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((g,E)=>{v._reqs[v.seqid()]=(I,Z)=>I?E(I):g(Z),v.send_delete_custom_expressions(y,p,h)})}send_delete_custom_expressions(y,p,h){const v=new this.pClass(this.output),g={session:y,custom_expression_ids:p,do_soft_delete:h},E=new rR(g);try{return v.writeMessageBegin("delete_custom_expressions",a.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(I){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),I}}recv_delete_custom_expressions(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new fw;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}get_dashboard(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_get_dashboard(y,p)})}send_get_dashboard(y,p){const h=new this.pClass(this.output),v={session:y,dashboard_id:p},g=new aR(v);try{return h.writeMessageBegin("get_dashboard",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_get_dashboard(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new uw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_dashboard failed: unknown result")}get_dashboards(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_get_dashboards(y)})}send_get_dashboards(y){const p=new this.pClass(this.output),h={session:y},v=new oR(h);try{return p.writeMessageBegin("get_dashboards",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_get_dashboards(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new hw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_dashboards failed: unknown result")}create_dashboard(y,p,h,v,g){this._seqid=this.new_seqid();const E=this;return new Promise((I,Z)=>{E._reqs[E.seqid()]=(me,Ve)=>me?Z(me):I(Ve),E.send_create_dashboard(y,p,h,v,g)})}send_create_dashboard(y,p,h,v,g){const E=new this.pClass(this.output),I={session:y,dashboard_name:p,dashboard_state:h,image_hash:v,dashboard_metadata:g},Z=new lR(I);try{return E.writeMessageBegin("create_dashboard",a.MessageType.CALL,this.seqid()),Z.write(E),E.writeMessageEnd(),this.output.flush()}catch(me){throw delete this._reqs[this.seqid()],typeof E.reset=="function"&&E.reset(),me}}recv_create_dashboard(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new pw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("create_dashboard failed: unknown result")}replace_dashboard(y,p,h,v,g,E,I){this._seqid=this.new_seqid();const Z=this;return new Promise((me,Ve)=>{Z._reqs[Z.seqid()]=(mn,ol)=>mn?Ve(mn):me(ol),Z.send_replace_dashboard(y,p,h,v,g,E,I)})}send_replace_dashboard(y,p,h,v,g,E,I){const Z=new this.pClass(this.output),me={session:y,dashboard_id:p,dashboard_name:h,dashboard_owner:v,dashboard_state:g,image_hash:E,dashboard_metadata:I},Ve=new cR(me);try{return Z.writeMessageBegin("replace_dashboard",a.MessageType.CALL,this.seqid()),Ve.write(Z),Z.writeMessageEnd(),this.output.flush()}catch(mn){throw delete this._reqs[this.seqid()],typeof Z.reset=="function"&&Z.reset(),mn}}recv_replace_dashboard(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new gw;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}delete_dashboard(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_delete_dashboard(y,p)})}send_delete_dashboard(y,p){const h=new this.pClass(this.output),v={session:y,dashboard_id:p},g=new dR(v);try{return h.writeMessageBegin("delete_dashboard",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_delete_dashboard(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new _w;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}share_dashboards(y,p,h,v){this._seqid=this.new_seqid();const g=this;return new Promise((E,I)=>{g._reqs[g.seqid()]=(Z,me)=>Z?I(Z):E(me),g.send_share_dashboards(y,p,h,v)})}send_share_dashboards(y,p,h,v){const g=new this.pClass(this.output),E={session:y,dashboard_ids:p,groups:h,permissions:v},I=new fR(E);try{return g.writeMessageBegin("share_dashboards",a.MessageType.CALL,this.seqid()),I.write(g),g.writeMessageEnd(),this.output.flush()}catch(Z){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),Z}}recv_share_dashboards(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new yw;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}delete_dashboards(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_delete_dashboards(y,p)})}send_delete_dashboards(y,p){const h=new this.pClass(this.output),v={session:y,dashboard_ids:p},g=new uR(v);try{return h.writeMessageBegin("delete_dashboards",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_delete_dashboards(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new mw;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}share_dashboard(y,p,h,v,g,E){this._seqid=this.new_seqid();const I=this;return new Promise((Z,me)=>{I._reqs[I.seqid()]=(Ve,mn)=>Ve?me(Ve):Z(mn),I.send_share_dashboard(y,p,h,v,g,E)})}send_share_dashboard(y,p,h,v,g,E){const I=new this.pClass(this.output),Z={session:y,dashboard_id:p,groups:h,objects:v,permissions:g,grant_role:E},me=new hR(Z);try{return I.writeMessageBegin("share_dashboard",a.MessageType.CALL,this.seqid()),me.write(I),I.writeMessageEnd(),this.output.flush()}catch(Ve){throw delete this._reqs[this.seqid()],typeof I.reset=="function"&&I.reset(),Ve}}recv_share_dashboard(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new ww;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}unshare_dashboard(y,p,h,v,g){this._seqid=this.new_seqid();const E=this;return new Promise((I,Z)=>{E._reqs[E.seqid()]=(me,Ve)=>me?Z(me):I(Ve),E.send_unshare_dashboard(y,p,h,v,g)})}send_unshare_dashboard(y,p,h,v,g){const E=new this.pClass(this.output),I={session:y,dashboard_id:p,groups:h,objects:v,permissions:g},Z=new pR(I);try{return E.writeMessageBegin("unshare_dashboard",a.MessageType.CALL,this.seqid()),Z.write(E),E.writeMessageEnd(),this.output.flush()}catch(me){throw delete this._reqs[this.seqid()],typeof E.reset=="function"&&E.reset(),me}}recv_unshare_dashboard(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new bw;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}unshare_dashboards(y,p,h,v){this._seqid=this.new_seqid();const g=this;return new Promise((E,I)=>{g._reqs[g.seqid()]=(Z,me)=>Z?I(Z):E(me),g.send_unshare_dashboards(y,p,h,v)})}send_unshare_dashboards(y,p,h,v){const g=new this.pClass(this.output),E={session:y,dashboard_ids:p,groups:h,permissions:v},I=new gR(E);try{return g.writeMessageBegin("unshare_dashboards",a.MessageType.CALL,this.seqid()),I.write(g),g.writeMessageEnd(),this.output.flush()}catch(Z){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),Z}}recv_unshare_dashboards(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Tw;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}get_dashboard_grantees(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_get_dashboard_grantees(y,p)})}send_get_dashboard_grantees(y,p){const h=new this.pClass(this.output),v={session:y,dashboard_id:p},g=new _R(v);try{return h.writeMessageBegin("get_dashboard_grantees",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_get_dashboard_grantees(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new vw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_dashboard_grantees failed: unknown result")}get_link_view(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_get_link_view(y,p)})}send_get_link_view(y,p){const h=new this.pClass(this.output),v={session:y,link:p},g=new yR(v);try{return h.writeMessageBegin("get_link_view",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_get_link_view(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Ew;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_link_view failed: unknown result")}create_link(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((g,E)=>{v._reqs[v.seqid()]=(I,Z)=>I?E(I):g(Z),v.send_create_link(y,p,h)})}send_create_link(y,p,h){const v=new this.pClass(this.output),g={session:y,view_state:p,view_metadata:h},E=new mR(g);try{return v.writeMessageBegin("create_link",a.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(I){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),I}}recv_create_link(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Sw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("create_link failed: unknown result")}load_table_binary(y,p,h,v){this._seqid=this.new_seqid();const g=this;return new Promise((E,I)=>{g._reqs[g.seqid()]=(Z,me)=>Z?I(Z):E(me),g.send_load_table_binary(y,p,h,v)})}send_load_table_binary(y,p,h,v){const g=new this.pClass(this.output),E={session:y,table_name:p,rows:h,column_names:v},I=new wR(E);try{return g.writeMessageBegin("load_table_binary",a.MessageType.CALL,this.seqid()),I.write(g),g.writeMessageEnd(),this.output.flush()}catch(Z){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),Z}}recv_load_table_binary(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new xw;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}load_table_binary_columnar(y,p,h,v){this._seqid=this.new_seqid();const g=this;return new Promise((E,I)=>{g._reqs[g.seqid()]=(Z,me)=>Z?I(Z):E(me),g.send_load_table_binary_columnar(y,p,h,v)})}send_load_table_binary_columnar(y,p,h,v){const g=new this.pClass(this.output),E={session:y,table_name:p,cols:h,column_names:v},I=new bR(E);try{return g.writeMessageBegin("load_table_binary_columnar",a.MessageType.CALL,this.seqid()),I.write(g),g.writeMessageEnd(),this.output.flush()}catch(Z){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),Z}}recv_load_table_binary_columnar(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Bw;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}load_table_binary_columnar_polys(y,p,h,v,g){this._seqid=this.new_seqid();const E=this;return new Promise((I,Z)=>{E._reqs[E.seqid()]=(me,Ve)=>me?Z(me):I(Ve),E.send_load_table_binary_columnar_polys(y,p,h,v,g)})}send_load_table_binary_columnar_polys(y,p,h,v,g){const E=new this.pClass(this.output),I={session:y,table_name:p,cols:h,column_names:v,assign_render_groups:g},Z=new TR(I);try{return E.writeMessageBegin("load_table_binary_columnar_polys",a.MessageType.CALL,this.seqid()),Z.write(E),E.writeMessageEnd(),this.output.flush()}catch(me){throw delete this._reqs[this.seqid()],typeof E.reset=="function"&&E.reset(),me}}recv_load_table_binary_columnar_polys(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new kw;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}load_table_binary_arrow(y,p,h,v){this._seqid=this.new_seqid();const g=this;return new Promise((E,I)=>{g._reqs[g.seqid()]=(Z,me)=>Z?I(Z):E(me),g.send_load_table_binary_arrow(y,p,h,v)})}send_load_table_binary_arrow(y,p,h,v){const g=new this.pClass(this.output),E={session:y,table_name:p,arrow_stream:h,use_column_names:v},I=new vR(E);try{return g.writeMessageBegin("load_table_binary_arrow",a.MessageType.CALL,this.seqid()),I.write(g),g.writeMessageEnd(),this.output.flush()}catch(Z){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),Z}}recv_load_table_binary_arrow(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Iw;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}load_table(y,p,h,v){this._seqid=this.new_seqid();const g=this;return new Promise((E,I)=>{g._reqs[g.seqid()]=(Z,me)=>Z?I(Z):E(me),g.send_load_table(y,p,h,v)})}send_load_table(y,p,h,v){const g=new this.pClass(this.output),E={session:y,table_name:p,rows:h,column_names:v},I=new ER(E);try{return g.writeMessageBegin("load_table",a.MessageType.CALL,this.seqid()),I.write(g),g.writeMessageEnd(),this.output.flush()}catch(Z){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),Z}}recv_load_table(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Fw;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}detect_column_types(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((g,E)=>{v._reqs[v.seqid()]=(I,Z)=>I?E(I):g(Z),v.send_detect_column_types(y,p,h)})}send_detect_column_types(y,p,h){const v=new this.pClass(this.output),g={session:y,file_name:p,copy_params:h},E=new SR(g);try{return v.writeMessageBegin("detect_column_types",a.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(I){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),I}}recv_detect_column_types(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Ow;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("detect_column_types failed: unknown result")}create_table(y,p,h,v){this._seqid=this.new_seqid();const g=this;return new Promise((E,I)=>{g._reqs[g.seqid()]=(Z,me)=>Z?I(Z):E(me),g.send_create_table(y,p,h,v)})}send_create_table(y,p,h,v){const g=new this.pClass(this.output),E={session:y,table_name:p,row_desc:h,create_params:v},I=new xR(E);try{return g.writeMessageBegin("create_table",a.MessageType.CALL,this.seqid()),I.write(g),g.writeMessageEnd(),this.output.flush()}catch(Z){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),Z}}recv_create_table(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Mw;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}import_table(y,p,h,v){this._seqid=this.new_seqid();const g=this;return new Promise((E,I)=>{g._reqs[g.seqid()]=(Z,me)=>Z?I(Z):E(me),g.send_import_table(y,p,h,v)})}send_import_table(y,p,h,v){const g=new this.pClass(this.output),E={session:y,table_name:p,file_name:h,copy_params:v},I=new BR(E);try{return g.writeMessageBegin("import_table",a.MessageType.CALL,this.seqid()),I.write(g),g.writeMessageEnd(),this.output.flush()}catch(Z){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),Z}}recv_import_table(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Aw;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}import_geo_table(y,p,h,v,g,E){this._seqid=this.new_seqid();const I=this;return new Promise((Z,me)=>{I._reqs[I.seqid()]=(Ve,mn)=>Ve?me(Ve):Z(mn),I.send_import_geo_table(y,p,h,v,g,E)})}send_import_geo_table(y,p,h,v,g,E){const I=new this.pClass(this.output),Z={session:y,table_name:p,file_name:h,copy_params:v,row_desc:g,create_params:E},me=new kR(Z);try{return I.writeMessageBegin("import_geo_table",a.MessageType.CALL,this.seqid()),me.write(I),I.writeMessageEnd(),this.output.flush()}catch(Ve){throw delete this._reqs[this.seqid()],typeof I.reset=="function"&&I.reset(),Ve}}recv_import_geo_table(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Nw;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}import_table_status(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_import_table_status(y,p)})}send_import_table_status(y,p){const h=new this.pClass(this.output),v={session:y,import_id:p},g=new IR(v);try{return h.writeMessageBegin("import_table_status",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_import_table_status(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Cw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("import_table_status failed: unknown result")}get_first_geo_file_in_archive(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((g,E)=>{v._reqs[v.seqid()]=(I,Z)=>I?E(I):g(Z),v.send_get_first_geo_file_in_archive(y,p,h)})}send_get_first_geo_file_in_archive(y,p,h){const v=new this.pClass(this.output),g={session:y,archive_path:p,copy_params:h},E=new FR(g);try{return v.writeMessageBegin("get_first_geo_file_in_archive",a.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(I){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),I}}recv_get_first_geo_file_in_archive(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Rw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_first_geo_file_in_archive failed: unknown result")}get_all_files_in_archive(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((g,E)=>{v._reqs[v.seqid()]=(I,Z)=>I?E(I):g(Z),v.send_get_all_files_in_archive(y,p,h)})}send_get_all_files_in_archive(y,p,h){const v=new this.pClass(this.output),g={session:y,archive_path:p,copy_params:h},E=new OR(g);try{return v.writeMessageBegin("get_all_files_in_archive",a.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(I){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),I}}recv_get_all_files_in_archive(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Lw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_all_files_in_archive failed: unknown result")}get_layers_in_geo_file(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((g,E)=>{v._reqs[v.seqid()]=(I,Z)=>I?E(I):g(Z),v.send_get_layers_in_geo_file(y,p,h)})}send_get_layers_in_geo_file(y,p,h){const v=new this.pClass(this.output),g={session:y,file_name:p,copy_params:h},E=new MR(g);try{return v.writeMessageBegin("get_layers_in_geo_file",a.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(I){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),I}}recv_get_layers_in_geo_file(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Pw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_layers_in_geo_file failed: unknown result")}query_get_outer_fragment_count(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_query_get_outer_fragment_count(y,p)})}send_query_get_outer_fragment_count(y,p){const h=new this.pClass(this.output),v={session:y,query:p},g=new AR(v);try{return h.writeMessageBegin("query_get_outer_fragment_count",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_query_get_outer_fragment_count(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Dw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("query_get_outer_fragment_count failed: unknown result")}check_table_consistency(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_check_table_consistency(y,p)})}send_check_table_consistency(y,p){const h=new this.pClass(this.output),v={session:y,table_id:p},g=new NR(v);try{return h.writeMessageBegin("check_table_consistency",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_check_table_consistency(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new jw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("check_table_consistency failed: unknown result")}start_query(y,p,h,v,g,E){this._seqid=this.new_seqid();const I=this;return new Promise((Z,me)=>{I._reqs[I.seqid()]=(Ve,mn)=>Ve?me(Ve):Z(mn),I.send_start_query(y,p,h,v,g,E)})}send_start_query(y,p,h,v,g,E){const I=new this.pClass(this.output),Z={leaf_session:y,parent_session:p,query_ra:h,start_time_str:v,just_explain:g,outer_fragment_indices:E},me=new CR(Z);try{return I.writeMessageBegin("start_query",a.MessageType.CALL,this.seqid()),me.write(I),I.writeMessageEnd(),this.output.flush()}catch(Ve){throw delete this._reqs[this.seqid()],typeof I.reset=="function"&&I.reset(),Ve}}recv_start_query(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Uw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("start_query failed: unknown result")}execute_query_step(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((g,E)=>{v._reqs[v.seqid()]=(I,Z)=>I?E(I):g(Z),v.send_execute_query_step(y,p,h)})}send_execute_query_step(y,p,h){const v=new this.pClass(this.output),g={pending_query:y,subquery_id:p,start_time_str:h},E=new RR(g);try{return v.writeMessageBegin("execute_query_step",a.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(I){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),I}}recv_execute_query_step(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new zw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("execute_query_step failed: unknown result")}broadcast_serialized_rows(y,p,h,v,g){this._seqid=this.new_seqid();const E=this;return new Promise((I,Z)=>{E._reqs[E.seqid()]=(me,Ve)=>me?Z(me):I(Ve),E.send_broadcast_serialized_rows(y,p,h,v,g)})}send_broadcast_serialized_rows(y,p,h,v,g){const E=new this.pClass(this.output),I={serialized_rows:y,row_desc:p,query_id:h,subquery_id:v,is_final_subquery_result:g},Z=new LR(I);try{return E.writeMessageBegin("broadcast_serialized_rows",a.MessageType.CALL,this.seqid()),Z.write(E),E.writeMessageEnd(),this.output.flush()}catch(me){throw delete this._reqs[this.seqid()],typeof E.reset=="function"&&E.reset(),me}}recv_broadcast_serialized_rows(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new $w;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}start_render_query(y,p,h,v){this._seqid=this.new_seqid();const g=this;return new Promise((E,I)=>{g._reqs[g.seqid()]=(Z,me)=>Z?I(Z):E(me),g.send_start_render_query(y,p,h,v)})}send_start_render_query(y,p,h,v){const g=new this.pClass(this.output),E={session:y,widget_id:p,node_idx:h,vega_json:v},I=new PR(E);try{return g.writeMessageBegin("start_render_query",a.MessageType.CALL,this.seqid()),I.write(g),g.writeMessageEnd(),this.output.flush()}catch(Z){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),Z}}recv_start_render_query(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new qw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("start_render_query failed: unknown result")}execute_next_render_step(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_execute_next_render_step(y,p)})}send_execute_next_render_step(y,p){const h=new this.pClass(this.output),v={pending_render:y,merged_data:p},g=new DR(v);try{return h.writeMessageBegin("execute_next_render_step",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_execute_next_render_step(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Gw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("execute_next_render_step failed: unknown result")}insert_data(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_insert_data(y,p)})}send_insert_data(y,p){const h=new this.pClass(this.output),v={session:y,insert_data:p},g=new jR(v);try{return h.writeMessageBegin("insert_data",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_insert_data(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Vw;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}insert_chunks(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_insert_chunks(y,p)})}send_insert_chunks(y,p){const h=new this.pClass(this.output),v={session:y,insert_chunks:p},g=new UR(v);try{return h.writeMessageBegin("insert_chunks",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_insert_chunks(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Hw;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}checkpoint(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_checkpoint(y,p)})}send_checkpoint(y,p){const h=new this.pClass(this.output),v={session:y,table_id:p},g=new zR(v);try{return h.writeMessageBegin("checkpoint",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_checkpoint(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Ww;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}get_roles(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_get_roles(y)})}send_get_roles(y){const p=new this.pClass(this.output),h={session:y},v=new $R(h);try{return p.writeMessageBegin("get_roles",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_get_roles(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Yw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_roles failed: unknown result")}get_db_objects_for_grantee(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_get_db_objects_for_grantee(y,p)})}send_get_db_objects_for_grantee(y,p){const h=new this.pClass(this.output),v={session:y,roleName:p},g=new qR(v);try{return h.writeMessageBegin("get_db_objects_for_grantee",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_get_db_objects_for_grantee(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Xw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_db_objects_for_grantee failed: unknown result")}get_db_object_privs(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((g,E)=>{v._reqs[v.seqid()]=(I,Z)=>I?E(I):g(Z),v.send_get_db_object_privs(y,p,h)})}send_get_db_object_privs(y,p,h){const v=new this.pClass(this.output),g={session:y,objectName:p,type:h},E=new GR(g);try{return v.writeMessageBegin("get_db_object_privs",a.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(I){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),I}}recv_get_db_object_privs(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Kw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_db_object_privs failed: unknown result")}get_all_roles_for_user(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_get_all_roles_for_user(y,p)})}send_get_all_roles_for_user(y,p){const h=new this.pClass(this.output),v={session:y,userName:p},g=new VR(v);try{return h.writeMessageBegin("get_all_roles_for_user",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_get_all_roles_for_user(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Jw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_all_roles_for_user failed: unknown result")}get_all_effective_roles_for_user(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_get_all_effective_roles_for_user(y,p)})}send_get_all_effective_roles_for_user(y,p){const h=new this.pClass(this.output),v={session:y,userName:p},g=new HR(v);try{return h.writeMessageBegin("get_all_effective_roles_for_user",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_get_all_effective_roles_for_user(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Qw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_all_effective_roles_for_user failed: unknown result")}has_role(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((g,E)=>{v._reqs[v.seqid()]=(I,Z)=>I?E(I):g(Z),v.send_has_role(y,p,h)})}send_has_role(y,p,h){const v=new this.pClass(this.output),g={session:y,granteeName:p,roleName:h},E=new WR(g);try{return v.writeMessageBegin("has_role",a.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(I){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),I}}recv_has_role(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Zw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("has_role failed: unknown result")}has_object_privilege(y,p,h,v,g){this._seqid=this.new_seqid();const E=this;return new Promise((I,Z)=>{E._reqs[E.seqid()]=(me,Ve)=>me?Z(me):I(Ve),E.send_has_object_privilege(y,p,h,v,g)})}send_has_object_privilege(y,p,h,v,g){const E=new this.pClass(this.output),I={session:y,granteeName:p,ObjectName:h,objectType:v,permissions:g},Z=new YR(I);try{return E.writeMessageBegin("has_object_privilege",a.MessageType.CALL,this.seqid()),Z.write(E),E.writeMessageEnd(),this.output.flush()}catch(me){throw delete this._reqs[this.seqid()],typeof E.reset=="function"&&E.reset(),me}}recv_has_object_privilege(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new eb;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("has_object_privilege failed: unknown result")}set_license_key(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((g,E)=>{v._reqs[v.seqid()]=(I,Z)=>I?E(I):g(Z),v.send_set_license_key(y,p,h)})}send_set_license_key(y,p,h){const v=new this.pClass(this.output),g={session:y,key:p,nonce:h},E=new XR(g);try{return v.writeMessageBegin("set_license_key",a.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(I){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),I}}recv_set_license_key(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new tb;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("set_license_key failed: unknown result")}get_license_claims(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_get_license_claims(y,p)})}send_get_license_claims(y,p){const h=new this.pClass(this.output),v={session:y,nonce:p},g=new KR(v);try{return h.writeMessageBegin("get_license_claims",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_get_license_claims(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new nb;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_license_claims failed: unknown result")}get_device_parameters(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_get_device_parameters(y)})}send_get_device_parameters(y){const p=new this.pClass(this.output),h={session:y},v=new JR(h);try{return p.writeMessageBegin("get_device_parameters",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_get_device_parameters(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new ib;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_device_parameters failed: unknown result")}register_runtime_extension_functions(y,p,h,v){this._seqid=this.new_seqid();const g=this;return new Promise((E,I)=>{g._reqs[g.seqid()]=(Z,me)=>Z?I(Z):E(me),g.send_register_runtime_extension_functions(y,p,h,v)})}send_register_runtime_extension_functions(y,p,h,v){const g=new this.pClass(this.output),E={session:y,udfs:p,udtfs:h,device_ir_map:v},I=new QR(E);try{return g.writeMessageBegin("register_runtime_extension_functions",a.MessageType.CALL,this.seqid()),I.write(g),g.writeMessageEnd(),this.output.flush()}catch(Z){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),Z}}recv_register_runtime_extension_functions(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new sb;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}get_table_function_names(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_get_table_function_names(y)})}send_get_table_function_names(y){const p=new this.pClass(this.output),h={session:y},v=new ZR(h);try{return p.writeMessageBegin("get_table_function_names",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_get_table_function_names(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new rb;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_table_function_names failed: unknown result")}get_runtime_table_function_names(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_get_runtime_table_function_names(y)})}send_get_runtime_table_function_names(y){const p=new this.pClass(this.output),h={session:y},v=new eL(h);try{return p.writeMessageBegin("get_runtime_table_function_names",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_get_runtime_table_function_names(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new ab;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_runtime_table_function_names failed: unknown result")}get_table_function_details(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_get_table_function_details(y,p)})}send_get_table_function_details(y,p){const h=new this.pClass(this.output),v={session:y,udtf_names:p},g=new tL(v);try{return h.writeMessageBegin("get_table_function_details",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_get_table_function_details(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new ob;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_table_function_details failed: unknown result")}},d.Processor=class{constructor(y){this._handler=y}process(y,p){const h=y.readMessageBegin();if(this["process_"+h.fname])return this["process_"+h.fname].call(this,h.rseqid,y,p);{y.skip(a.Type.STRUCT),y.readMessageEnd();const v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN_METHOD,"Unknown function "+h.fname);p.writeMessageBegin(h.fname,a.MessageType.EXCEPTION,h.rseqid),v.write(p),p.writeMessageEnd(),p.flush()}}process_connect(y,p,h){const v=new T;v.read(p),p.readMessageEnd(),this._handler.connect.length===3?Promise.resolve(this._handler.connect.bind(this._handler)(v.user,v.passwd,v.dbname)).then(g=>{const E=new b({success:g});h.writeMessageBegin("connect",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new b(g),h.writeMessageBegin("connect",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("connect",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.connect(v.user,v.passwd,v.dbname,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new b(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("connect",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("connect",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_krb5_connect(y,p,h){const v=new S;v.read(p),p.readMessageEnd(),this._handler.krb5_connect.length===2?Promise.resolve(this._handler.krb5_connect.bind(this._handler)(v.inputToken,v.dbname)).then(g=>{const E=new x({success:g});h.writeMessageBegin("krb5_connect",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new x(g),h.writeMessageBegin("krb5_connect",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("krb5_connect",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.krb5_connect(v.inputToken,v.dbname,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new x(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("krb5_connect",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("krb5_connect",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_disconnect(y,p,h){const v=new B;v.read(p),p.readMessageEnd(),this._handler.disconnect.length===1?Promise.resolve(this._handler.disconnect.bind(this._handler)(v.session)).then(g=>{const E=new F({success:g});h.writeMessageBegin("disconnect",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new F(g),h.writeMessageBegin("disconnect",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("disconnect",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.disconnect(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new F(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("disconnect",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("disconnect",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_switch_database(y,p,h){const v=new k;v.read(p),p.readMessageEnd(),this._handler.switch_database.length===2?Promise.resolve(this._handler.switch_database.bind(this._handler)(v.session,v.dbname)).then(g=>{const E=new A({success:g});h.writeMessageBegin("switch_database",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new A(g),h.writeMessageBegin("switch_database",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("switch_database",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.switch_database(v.session,v.dbname,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new A(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("switch_database",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("switch_database",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_clone_session(y,p,h){const v=new M;v.read(p),p.readMessageEnd(),this._handler.clone_session.length===1?Promise.resolve(this._handler.clone_session.bind(this._handler)(v.session)).then(g=>{const E=new R({success:g});h.writeMessageBegin("clone_session",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new R(g),h.writeMessageBegin("clone_session",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("clone_session",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.clone_session(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new R(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("clone_session",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("clone_session",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_server_status(y,p,h){const v=new P;v.read(p),p.readMessageEnd(),this._handler.get_server_status.length===1?Promise.resolve(this._handler.get_server_status.bind(this._handler)(v.session)).then(g=>{const E=new j({success:g});h.writeMessageBegin("get_server_status",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new j(g),h.writeMessageBegin("get_server_status",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_server_status",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_server_status(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new j(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_server_status",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_server_status",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_status(y,p,h){const v=new D;v.read(p),p.readMessageEnd(),this._handler.get_status.length===1?Promise.resolve(this._handler.get_status.bind(this._handler)(v.session)).then(g=>{const E=new z({success:g});h.writeMessageBegin("get_status",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new z(g),h.writeMessageBegin("get_status",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_status",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_status(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new z(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_status",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_status",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_hardware_info(y,p,h){const v=new $;v.read(p),p.readMessageEnd(),this._handler.get_hardware_info.length===1?Promise.resolve(this._handler.get_hardware_info.bind(this._handler)(v.session)).then(g=>{const E=new K({success:g});h.writeMessageBegin("get_hardware_info",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new K(g),h.writeMessageBegin("get_hardware_info",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_hardware_info",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_hardware_info(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new K(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_hardware_info",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_hardware_info",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_tables(y,p,h){const v=new H;v.read(p),p.readMessageEnd(),this._handler.get_tables.length===1?Promise.resolve(this._handler.get_tables.bind(this._handler)(v.session)).then(g=>{const E=new W({success:g});h.writeMessageBegin("get_tables",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new W(g),h.writeMessageBegin("get_tables",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_tables",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_tables(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new W(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_tables",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_tables",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_tables_for_database(y,p,h){const v=new J;v.read(p),p.readMessageEnd(),this._handler.get_tables_for_database.length===2?Promise.resolve(this._handler.get_tables_for_database.bind(this._handler)(v.session,v.database_name)).then(g=>{const E=new V({success:g});h.writeMessageBegin("get_tables_for_database",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new V(g),h.writeMessageBegin("get_tables_for_database",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_tables_for_database",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_tables_for_database(v.session,v.database_name,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new V(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_tables_for_database",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_tables_for_database",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_physical_tables(y,p,h){const v=new le;v.read(p),p.readMessageEnd(),this._handler.get_physical_tables.length===1?Promise.resolve(this._handler.get_physical_tables.bind(this._handler)(v.session)).then(g=>{const E=new pe({success:g});h.writeMessageBegin("get_physical_tables",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new pe(g),h.writeMessageBegin("get_physical_tables",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_physical_tables",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_physical_tables(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new pe(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_physical_tables",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_physical_tables",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_views(y,p,h){const v=new se;v.read(p),p.readMessageEnd(),this._handler.get_views.length===1?Promise.resolve(this._handler.get_views.bind(this._handler)(v.session)).then(g=>{const E=new Ne({success:g});h.writeMessageBegin("get_views",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Ne(g),h.writeMessageBegin("get_views",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_views",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_views(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Ne(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_views",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_views",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_tables_meta(y,p,h){const v=new fe;v.read(p),p.readMessageEnd(),this._handler.get_tables_meta.length===1?Promise.resolve(this._handler.get_tables_meta.bind(this._handler)(v.session)).then(g=>{const E=new Oe({success:g});h.writeMessageBegin("get_tables_meta",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Oe(g),h.writeMessageBegin("get_tables_meta",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_tables_meta",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_tables_meta(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Oe(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_tables_meta",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_tables_meta",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_table_details(y,p,h){const v=new Ce;v.read(p),p.readMessageEnd(),this._handler.get_table_details.length===2?Promise.resolve(this._handler.get_table_details.bind(this._handler)(v.session,v.table_name)).then(g=>{const E=new We({success:g});h.writeMessageBegin("get_table_details",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new We(g),h.writeMessageBegin("get_table_details",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_table_details",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_table_details(v.session,v.table_name,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new We(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_table_details",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_table_details",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_table_details_for_database(y,p,h){const v=new Bt;v.read(p),p.readMessageEnd(),this._handler.get_table_details_for_database.length===3?Promise.resolve(this._handler.get_table_details_for_database.bind(this._handler)(v.session,v.table_name,v.database_name)).then(g=>{const E=new vt({success:g});h.writeMessageBegin("get_table_details_for_database",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new vt(g),h.writeMessageBegin("get_table_details_for_database",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_table_details_for_database",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_table_details_for_database(v.session,v.table_name,v.database_name,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new vt(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_table_details_for_database",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_table_details_for_database",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_internal_table_details(y,p,h){const v=new ge;v.read(p),p.readMessageEnd(),this._handler.get_internal_table_details.length===3?Promise.resolve(this._handler.get_internal_table_details.bind(this._handler)(v.session,v.table_name,v.include_system_columns)).then(g=>{const E=new q({success:g});h.writeMessageBegin("get_internal_table_details",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new q(g),h.writeMessageBegin("get_internal_table_details",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_internal_table_details",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_internal_table_details(v.session,v.table_name,v.include_system_columns,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new q(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_internal_table_details",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_internal_table_details",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_internal_table_details_for_database(y,p,h){const v=new G;v.read(p),p.readMessageEnd(),this._handler.get_internal_table_details_for_database.length===3?Promise.resolve(this._handler.get_internal_table_details_for_database.bind(this._handler)(v.session,v.table_name,v.database_name)).then(g=>{const E=new L({success:g});h.writeMessageBegin("get_internal_table_details_for_database",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new L(g),h.writeMessageBegin("get_internal_table_details_for_database",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_internal_table_details_for_database",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_internal_table_details_for_database(v.session,v.table_name,v.database_name,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new L(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_internal_table_details_for_database",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_internal_table_details_for_database",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_users(y,p,h){const v=new Y;v.read(p),p.readMessageEnd(),this._handler.get_users.length===1?Promise.resolve(this._handler.get_users.bind(this._handler)(v.session)).then(g=>{const E=new Q({success:g});h.writeMessageBegin("get_users",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Q(g),h.writeMessageBegin("get_users",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_users",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_users(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Q(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_users",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_users",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_databases(y,p,h){const v=new ae;v.read(p),p.readMessageEnd(),this._handler.get_databases.length===1?Promise.resolve(this._handler.get_databases.bind(this._handler)(v.session)).then(g=>{const E=new re({success:g});h.writeMessageBegin("get_databases",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new re(g),h.writeMessageBegin("get_databases",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_databases",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_databases(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new re(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_databases",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_databases",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_version(y,p,h){new _e().read(p),p.readMessageEnd(),this._handler.get_version.length===0?Promise.resolve(this._handler.get_version.bind(this._handler)()).then(g=>{const E=new Ee({success:g});h.writeMessageBegin("get_version",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Ee(g),h.writeMessageBegin("get_version",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_version",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_version((g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Ee(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_version",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_version",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_start_heap_profile(y,p,h){const v=new Je;v.read(p),p.readMessageEnd(),this._handler.start_heap_profile.length===1?Promise.resolve(this._handler.start_heap_profile.bind(this._handler)(v.session)).then(g=>{const E=new zt({success:g});h.writeMessageBegin("start_heap_profile",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new zt(g),h.writeMessageBegin("start_heap_profile",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("start_heap_profile",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.start_heap_profile(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new zt(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("start_heap_profile",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("start_heap_profile",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_stop_heap_profile(y,p,h){const v=new At;v.read(p),p.readMessageEnd(),this._handler.stop_heap_profile.length===1?Promise.resolve(this._handler.stop_heap_profile.bind(this._handler)(v.session)).then(g=>{const E=new et({success:g});h.writeMessageBegin("stop_heap_profile",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new et(g),h.writeMessageBegin("stop_heap_profile",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("stop_heap_profile",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.stop_heap_profile(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new et(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("stop_heap_profile",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("stop_heap_profile",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_heap_profile(y,p,h){const v=new fn;v.read(p),p.readMessageEnd(),this._handler.get_heap_profile.length===1?Promise.resolve(this._handler.get_heap_profile.bind(this._handler)(v.session)).then(g=>{const E=new qn({success:g});h.writeMessageBegin("get_heap_profile",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new qn(g),h.writeMessageBegin("get_heap_profile",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_heap_profile",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_heap_profile(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new qn(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_heap_profile",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_heap_profile",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_memory(y,p,h){const v=new gs;v.read(p),p.readMessageEnd(),this._handler.get_memory.length===2?Promise.resolve(this._handler.get_memory.bind(this._handler)(v.session,v.memory_level)).then(g=>{const E=new ue({success:g});h.writeMessageBegin("get_memory",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new ue(g),h.writeMessageBegin("get_memory",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_memory",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_memory(v.session,v.memory_level,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new ue(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_memory",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_memory",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_clear_cpu_memory(y,p,h){const v=new Bi;v.read(p),p.readMessageEnd(),this._handler.clear_cpu_memory.length===1?Promise.resolve(this._handler.clear_cpu_memory.bind(this._handler)(v.session)).then(g=>{const E=new ni({success:g});h.writeMessageBegin("clear_cpu_memory",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new ni(g),h.writeMessageBegin("clear_cpu_memory",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("clear_cpu_memory",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.clear_cpu_memory(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new ni(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("clear_cpu_memory",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("clear_cpu_memory",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_clear_gpu_memory(y,p,h){const v=new Xr;v.read(p),p.readMessageEnd(),this._handler.clear_gpu_memory.length===1?Promise.resolve(this._handler.clear_gpu_memory.bind(this._handler)(v.session)).then(g=>{const E=new vn({success:g});h.writeMessageBegin("clear_gpu_memory",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new vn(g),h.writeMessageBegin("clear_gpu_memory",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("clear_gpu_memory",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.clear_gpu_memory(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new vn(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("clear_gpu_memory",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("clear_gpu_memory",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_set_cur_session(y,p,h){const v=new rc;v.read(p),p.readMessageEnd(),this._handler.set_cur_session.length===5?Promise.resolve(this._handler.set_cur_session.bind(this._handler)(v.parent_session,v.leaf_session,v.start_time_str,v.label,v.for_running_query_kernel)).then(g=>{const E=new ac({success:g});h.writeMessageBegin("set_cur_session",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new ac(g),h.writeMessageBegin("set_cur_session",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("set_cur_session",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.set_cur_session(v.parent_session,v.leaf_session,v.start_time_str,v.label,v.for_running_query_kernel,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new ac(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("set_cur_session",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("set_cur_session",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_invalidate_cur_session(y,p,h){const v=new Ks;v.read(p),p.readMessageEnd(),this._handler.invalidate_cur_session.length===5?Promise.resolve(this._handler.invalidate_cur_session.bind(this._handler)(v.parent_session,v.leaf_session,v.start_time_str,v.label,v.for_running_query_kernel)).then(g=>{const E=new oc({success:g});h.writeMessageBegin("invalidate_cur_session",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new oc(g),h.writeMessageBegin("invalidate_cur_session",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("invalidate_cur_session",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.invalidate_cur_session(v.parent_session,v.leaf_session,v.start_time_str,v.label,v.for_running_query_kernel,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new oc(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("invalidate_cur_session",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("invalidate_cur_session",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_set_table_epoch(y,p,h){const v=new C;v.read(p),p.readMessageEnd(),this._handler.set_table_epoch.length===4?Promise.resolve(this._handler.set_table_epoch.bind(this._handler)(v.session,v.db_id,v.table_id,v.new_epoch)).then(g=>{const E=new O({success:g});h.writeMessageBegin("set_table_epoch",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new O(g),h.writeMessageBegin("set_table_epoch",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("set_table_epoch",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.set_table_epoch(v.session,v.db_id,v.table_id,v.new_epoch,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new O(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("set_table_epoch",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("set_table_epoch",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_set_table_epoch_by_name(y,p,h){const v=new N;v.read(p),p.readMessageEnd(),this._handler.set_table_epoch_by_name.length===3?Promise.resolve(this._handler.set_table_epoch_by_name.bind(this._handler)(v.session,v.table_name,v.new_epoch)).then(g=>{const E=new U({success:g});h.writeMessageBegin("set_table_epoch_by_name",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new U(g),h.writeMessageBegin("set_table_epoch_by_name",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("set_table_epoch_by_name",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.set_table_epoch_by_name(v.session,v.table_name,v.new_epoch,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new U(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("set_table_epoch_by_name",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("set_table_epoch_by_name",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_table_epoch(y,p,h){const v=new X;v.read(p),p.readMessageEnd(),this._handler.get_table_epoch.length===3?Promise.resolve(this._handler.get_table_epoch.bind(this._handler)(v.session,v.db_id,v.table_id)).then(g=>{const E=new ee({success:g});h.writeMessageBegin("get_table_epoch",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_table_epoch",a.MessageType.EXCEPTION,y),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_table_epoch(v.session,v.db_id,v.table_id,(g,E)=>{let I;g===null||typeof g>"u"?(I=new ee(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_table_epoch",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_table_epoch",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_table_epoch_by_name(y,p,h){const v=new ie;v.read(p),p.readMessageEnd(),this._handler.get_table_epoch_by_name.length===2?Promise.resolve(this._handler.get_table_epoch_by_name.bind(this._handler)(v.session,v.table_name)).then(g=>{const E=new Me({success:g});h.writeMessageBegin("get_table_epoch_by_name",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_table_epoch_by_name",a.MessageType.EXCEPTION,y),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_table_epoch_by_name(v.session,v.table_name,(g,E)=>{let I;g===null||typeof g>"u"?(I=new Me(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_table_epoch_by_name",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_table_epoch_by_name",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_table_epochs(y,p,h){const v=new Ue;v.read(p),p.readMessageEnd(),this._handler.get_table_epochs.length===3?Promise.resolve(this._handler.get_table_epochs.bind(this._handler)(v.session,v.db_id,v.table_id)).then(g=>{const E=new ze({success:g});h.writeMessageBegin("get_table_epochs",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_table_epochs",a.MessageType.EXCEPTION,y),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_table_epochs(v.session,v.db_id,v.table_id,(g,E)=>{let I;g===null||typeof g>"u"?(I=new ze(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_table_epochs",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_table_epochs",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_set_table_epochs(y,p,h){const v=new Xe;v.read(p),p.readMessageEnd(),this._handler.set_table_epochs.length===3?Promise.resolve(this._handler.set_table_epochs.bind(this._handler)(v.session,v.db_id,v.table_epochs)).then(g=>{const E=new Ke({success:g});h.writeMessageBegin("set_table_epochs",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("set_table_epochs",a.MessageType.EXCEPTION,y),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.set_table_epochs(v.session,v.db_id,v.table_epochs,(g,E)=>{let I;g===null||typeof g>"u"?(I=new Ke(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("set_table_epochs",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("set_table_epochs",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_session_info(y,p,h){const v=new lc;v.read(p),p.readMessageEnd(),this._handler.get_session_info.length===1?Promise.resolve(this._handler.get_session_info.bind(this._handler)(v.session)).then(g=>{const E=new Xm({success:g});h.writeMessageBegin("get_session_info",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Xm(g),h.writeMessageBegin("get_session_info",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_session_info",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_session_info(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Xm(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_session_info",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_session_info",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_queries_info(y,p,h){const v=new G3;v.read(p),p.readMessageEnd(),this._handler.get_queries_info.length===1?Promise.resolve(this._handler.get_queries_info.bind(this._handler)(v.session)).then(g=>{const E=new Km({success:g});h.writeMessageBegin("get_queries_info",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Km(g),h.writeMessageBegin("get_queries_info",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_queries_info",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_queries_info(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Km(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_queries_info",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_queries_info",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_set_leaf_info(y,p,h){const v=new V3;v.read(p),p.readMessageEnd(),this._handler.set_leaf_info.length===2?Promise.resolve(this._handler.set_leaf_info.bind(this._handler)(v.session,v.leaf_info)).then(g=>{const E=new Jm({success:g});h.writeMessageBegin("set_leaf_info",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Jm(g),h.writeMessageBegin("set_leaf_info",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("set_leaf_info",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.set_leaf_info(v.session,v.leaf_info,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Jm(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("set_leaf_info",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("set_leaf_info",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_sql_execute(y,p,h){const v=new H3;v.read(p),p.readMessageEnd(),this._handler.sql_execute.length===6?Promise.resolve(this._handler.sql_execute.bind(this._handler)(v.session,v.query,v.column_format,v.nonce,v.first_n,v.at_most_n)).then(g=>{const E=new Qm({success:g});h.writeMessageBegin("sql_execute",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Qm(g),h.writeMessageBegin("sql_execute",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("sql_execute",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.sql_execute(v.session,v.query,v.column_format,v.nonce,v.first_n,v.at_most_n,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Qm(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("sql_execute",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("sql_execute",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_sql_execute_df(y,p,h){const v=new W3;v.read(p),p.readMessageEnd(),this._handler.sql_execute_df.length===6?Promise.resolve(this._handler.sql_execute_df.bind(this._handler)(v.session,v.query,v.device_type,v.device_id,v.first_n,v.transport_method)).then(g=>{const E=new Zm({success:g});h.writeMessageBegin("sql_execute_df",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Zm(g),h.writeMessageBegin("sql_execute_df",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("sql_execute_df",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.sql_execute_df(v.session,v.query,v.device_type,v.device_id,v.first_n,v.transport_method,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Zm(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("sql_execute_df",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("sql_execute_df",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_sql_execute_gdf(y,p,h){const v=new Y3;v.read(p),p.readMessageEnd(),this._handler.sql_execute_gdf.length===4?Promise.resolve(this._handler.sql_execute_gdf.bind(this._handler)(v.session,v.query,v.device_id,v.first_n)).then(g=>{const E=new ew({success:g});h.writeMessageBegin("sql_execute_gdf",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new ew(g),h.writeMessageBegin("sql_execute_gdf",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("sql_execute_gdf",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.sql_execute_gdf(v.session,v.query,v.device_id,v.first_n,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new ew(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("sql_execute_gdf",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("sql_execute_gdf",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_deallocate_df(y,p,h){const v=new X3;v.read(p),p.readMessageEnd(),this._handler.deallocate_df.length===4?Promise.resolve(this._handler.deallocate_df.bind(this._handler)(v.session,v.df,v.device_type,v.device_id)).then(g=>{const E=new tw({success:g});h.writeMessageBegin("deallocate_df",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new tw(g),h.writeMessageBegin("deallocate_df",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("deallocate_df",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.deallocate_df(v.session,v.df,v.device_type,v.device_id,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new tw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("deallocate_df",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("deallocate_df",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_interrupt(y,p,h){const v=new K3;v.read(p),p.readMessageEnd(),this._handler.interrupt.length===2?Promise.resolve(this._handler.interrupt.bind(this._handler)(v.query_session,v.interrupt_session)).then(g=>{const E=new nw({success:g});h.writeMessageBegin("interrupt",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new nw(g),h.writeMessageBegin("interrupt",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("interrupt",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.interrupt(v.query_session,v.interrupt_session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new nw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("interrupt",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("interrupt",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_sql_validate(y,p,h){const v=new J3;v.read(p),p.readMessageEnd(),this._handler.sql_validate.length===2?Promise.resolve(this._handler.sql_validate.bind(this._handler)(v.session,v.query)).then(g=>{const E=new iw({success:g});h.writeMessageBegin("sql_validate",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new iw(g),h.writeMessageBegin("sql_validate",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("sql_validate",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.sql_validate(v.session,v.query,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new iw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("sql_validate",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("sql_validate",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_completion_hints(y,p,h){const v=new Q3;v.read(p),p.readMessageEnd(),this._handler.get_completion_hints.length===3?Promise.resolve(this._handler.get_completion_hints.bind(this._handler)(v.session,v.sql,v.cursor)).then(g=>{const E=new sw({success:g});h.writeMessageBegin("get_completion_hints",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new sw(g),h.writeMessageBegin("get_completion_hints",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_completion_hints",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_completion_hints(v.session,v.sql,v.cursor,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new sw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_completion_hints",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_completion_hints",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_set_execution_mode(y,p,h){const v=new Z3;v.read(p),p.readMessageEnd(),this._handler.set_execution_mode.length===2?Promise.resolve(this._handler.set_execution_mode.bind(this._handler)(v.session,v.mode)).then(g=>{const E=new rw({success:g});h.writeMessageBegin("set_execution_mode",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new rw(g),h.writeMessageBegin("set_execution_mode",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("set_execution_mode",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.set_execution_mode(v.session,v.mode,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new rw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("set_execution_mode",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("set_execution_mode",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_render_vega(y,p,h){const v=new eR;v.read(p),p.readMessageEnd(),this._handler.render_vega.length===5?Promise.resolve(this._handler.render_vega.bind(this._handler)(v.session,v.widget_id,v.vega_json,v.compression_level,v.nonce)).then(g=>{const E=new aw({success:g});h.writeMessageBegin("render_vega",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new aw(g),h.writeMessageBegin("render_vega",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("render_vega",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.render_vega(v.session,v.widget_id,v.vega_json,v.compression_level,v.nonce,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new aw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("render_vega",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("render_vega",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_result_row_for_pixel(y,p,h){const v=new tR;v.read(p),p.readMessageEnd(),this._handler.get_result_row_for_pixel.length===7?Promise.resolve(this._handler.get_result_row_for_pixel.bind(this._handler)(v.session,v.widget_id,v.pixel,v.table_col_names,v.column_format,v.pixelRadius,v.nonce)).then(g=>{const E=new ow({success:g});h.writeMessageBegin("get_result_row_for_pixel",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new ow(g),h.writeMessageBegin("get_result_row_for_pixel",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_result_row_for_pixel",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_result_row_for_pixel(v.session,v.widget_id,v.pixel,v.table_col_names,v.column_format,v.pixelRadius,v.nonce,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new ow(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_result_row_for_pixel",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_result_row_for_pixel",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_create_custom_expression(y,p,h){const v=new nR;v.read(p),p.readMessageEnd(),this._handler.create_custom_expression.length===2?Promise.resolve(this._handler.create_custom_expression.bind(this._handler)(v.session,v.custom_expression)).then(g=>{const E=new lw({success:g});h.writeMessageBegin("create_custom_expression",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new lw(g),h.writeMessageBegin("create_custom_expression",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("create_custom_expression",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.create_custom_expression(v.session,v.custom_expression,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new lw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("create_custom_expression",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("create_custom_expression",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_custom_expressions(y,p,h){const v=new iR;v.read(p),p.readMessageEnd(),this._handler.get_custom_expressions.length===1?Promise.resolve(this._handler.get_custom_expressions.bind(this._handler)(v.session)).then(g=>{const E=new cw({success:g});h.writeMessageBegin("get_custom_expressions",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new cw(g),h.writeMessageBegin("get_custom_expressions",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_custom_expressions",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_custom_expressions(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new cw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_custom_expressions",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_custom_expressions",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_update_custom_expression(y,p,h){const v=new sR;v.read(p),p.readMessageEnd(),this._handler.update_custom_expression.length===3?Promise.resolve(this._handler.update_custom_expression.bind(this._handler)(v.session,v.id,v.expression_json)).then(g=>{const E=new dw({success:g});h.writeMessageBegin("update_custom_expression",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new dw(g),h.writeMessageBegin("update_custom_expression",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("update_custom_expression",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.update_custom_expression(v.session,v.id,v.expression_json,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new dw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("update_custom_expression",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("update_custom_expression",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_delete_custom_expressions(y,p,h){const v=new rR;v.read(p),p.readMessageEnd(),this._handler.delete_custom_expressions.length===3?Promise.resolve(this._handler.delete_custom_expressions.bind(this._handler)(v.session,v.custom_expression_ids,v.do_soft_delete)).then(g=>{const E=new fw({success:g});h.writeMessageBegin("delete_custom_expressions",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new fw(g),h.writeMessageBegin("delete_custom_expressions",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("delete_custom_expressions",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.delete_custom_expressions(v.session,v.custom_expression_ids,v.do_soft_delete,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new fw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("delete_custom_expressions",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("delete_custom_expressions",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_dashboard(y,p,h){const v=new aR;v.read(p),p.readMessageEnd(),this._handler.get_dashboard.length===2?Promise.resolve(this._handler.get_dashboard.bind(this._handler)(v.session,v.dashboard_id)).then(g=>{const E=new uw({success:g});h.writeMessageBegin("get_dashboard",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new uw(g),h.writeMessageBegin("get_dashboard",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_dashboard",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_dashboard(v.session,v.dashboard_id,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new uw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_dashboard",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_dashboard",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_dashboards(y,p,h){const v=new oR;v.read(p),p.readMessageEnd(),this._handler.get_dashboards.length===1?Promise.resolve(this._handler.get_dashboards.bind(this._handler)(v.session)).then(g=>{const E=new hw({success:g});h.writeMessageBegin("get_dashboards",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new hw(g),h.writeMessageBegin("get_dashboards",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_dashboards",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_dashboards(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new hw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_dashboards",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_dashboards",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_create_dashboard(y,p,h){const v=new lR;v.read(p),p.readMessageEnd(),this._handler.create_dashboard.length===5?Promise.resolve(this._handler.create_dashboard.bind(this._handler)(v.session,v.dashboard_name,v.dashboard_state,v.image_hash,v.dashboard_metadata)).then(g=>{const E=new pw({success:g});h.writeMessageBegin("create_dashboard",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new pw(g),h.writeMessageBegin("create_dashboard",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("create_dashboard",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.create_dashboard(v.session,v.dashboard_name,v.dashboard_state,v.image_hash,v.dashboard_metadata,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new pw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("create_dashboard",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("create_dashboard",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_replace_dashboard(y,p,h){const v=new cR;v.read(p),p.readMessageEnd(),this._handler.replace_dashboard.length===7?Promise.resolve(this._handler.replace_dashboard.bind(this._handler)(v.session,v.dashboard_id,v.dashboard_name,v.dashboard_owner,v.dashboard_state,v.image_hash,v.dashboard_metadata)).then(g=>{const E=new gw({success:g});h.writeMessageBegin("replace_dashboard",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new gw(g),h.writeMessageBegin("replace_dashboard",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("replace_dashboard",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.replace_dashboard(v.session,v.dashboard_id,v.dashboard_name,v.dashboard_owner,v.dashboard_state,v.image_hash,v.dashboard_metadata,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new gw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("replace_dashboard",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("replace_dashboard",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_delete_dashboard(y,p,h){const v=new dR;v.read(p),p.readMessageEnd(),this._handler.delete_dashboard.length===2?Promise.resolve(this._handler.delete_dashboard.bind(this._handler)(v.session,v.dashboard_id)).then(g=>{const E=new _w({success:g});h.writeMessageBegin("delete_dashboard",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new _w(g),h.writeMessageBegin("delete_dashboard",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("delete_dashboard",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.delete_dashboard(v.session,v.dashboard_id,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new _w(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("delete_dashboard",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("delete_dashboard",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_share_dashboards(y,p,h){const v=new fR;v.read(p),p.readMessageEnd(),this._handler.share_dashboards.length===4?Promise.resolve(this._handler.share_dashboards.bind(this._handler)(v.session,v.dashboard_ids,v.groups,v.permissions)).then(g=>{const E=new yw({success:g});h.writeMessageBegin("share_dashboards",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new yw(g),h.writeMessageBegin("share_dashboards",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("share_dashboards",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.share_dashboards(v.session,v.dashboard_ids,v.groups,v.permissions,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new yw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("share_dashboards",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("share_dashboards",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_delete_dashboards(y,p,h){const v=new uR;v.read(p),p.readMessageEnd(),this._handler.delete_dashboards.length===2?Promise.resolve(this._handler.delete_dashboards.bind(this._handler)(v.session,v.dashboard_ids)).then(g=>{const E=new mw({success:g});h.writeMessageBegin("delete_dashboards",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new mw(g),h.writeMessageBegin("delete_dashboards",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("delete_dashboards",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.delete_dashboards(v.session,v.dashboard_ids,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new mw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("delete_dashboards",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("delete_dashboards",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_share_dashboard(y,p,h){const v=new hR;v.read(p),p.readMessageEnd(),this._handler.share_dashboard.length===6?Promise.resolve(this._handler.share_dashboard.bind(this._handler)(v.session,v.dashboard_id,v.groups,v.objects,v.permissions,v.grant_role)).then(g=>{const E=new ww({success:g});h.writeMessageBegin("share_dashboard",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new ww(g),h.writeMessageBegin("share_dashboard",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("share_dashboard",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.share_dashboard(v.session,v.dashboard_id,v.groups,v.objects,v.permissions,v.grant_role,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new ww(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("share_dashboard",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("share_dashboard",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_unshare_dashboard(y,p,h){const v=new pR;v.read(p),p.readMessageEnd(),this._handler.unshare_dashboard.length===5?Promise.resolve(this._handler.unshare_dashboard.bind(this._handler)(v.session,v.dashboard_id,v.groups,v.objects,v.permissions)).then(g=>{const E=new bw({success:g});h.writeMessageBegin("unshare_dashboard",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new bw(g),h.writeMessageBegin("unshare_dashboard",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("unshare_dashboard",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.unshare_dashboard(v.session,v.dashboard_id,v.groups,v.objects,v.permissions,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new bw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("unshare_dashboard",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("unshare_dashboard",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_unshare_dashboards(y,p,h){const v=new gR;v.read(p),p.readMessageEnd(),this._handler.unshare_dashboards.length===4?Promise.resolve(this._handler.unshare_dashboards.bind(this._handler)(v.session,v.dashboard_ids,v.groups,v.permissions)).then(g=>{const E=new Tw({success:g});h.writeMessageBegin("unshare_dashboards",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Tw(g),h.writeMessageBegin("unshare_dashboards",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("unshare_dashboards",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.unshare_dashboards(v.session,v.dashboard_ids,v.groups,v.permissions,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Tw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("unshare_dashboards",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("unshare_dashboards",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_dashboard_grantees(y,p,h){const v=new _R;v.read(p),p.readMessageEnd(),this._handler.get_dashboard_grantees.length===2?Promise.resolve(this._handler.get_dashboard_grantees.bind(this._handler)(v.session,v.dashboard_id)).then(g=>{const E=new vw({success:g});h.writeMessageBegin("get_dashboard_grantees",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new vw(g),h.writeMessageBegin("get_dashboard_grantees",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_dashboard_grantees",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_dashboard_grantees(v.session,v.dashboard_id,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new vw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_dashboard_grantees",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_dashboard_grantees",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_link_view(y,p,h){const v=new yR;v.read(p),p.readMessageEnd(),this._handler.get_link_view.length===2?Promise.resolve(this._handler.get_link_view.bind(this._handler)(v.session,v.link)).then(g=>{const E=new Ew({success:g});h.writeMessageBegin("get_link_view",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Ew(g),h.writeMessageBegin("get_link_view",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_link_view",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_link_view(v.session,v.link,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Ew(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_link_view",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_link_view",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_create_link(y,p,h){const v=new mR;v.read(p),p.readMessageEnd(),this._handler.create_link.length===3?Promise.resolve(this._handler.create_link.bind(this._handler)(v.session,v.view_state,v.view_metadata)).then(g=>{const E=new Sw({success:g});h.writeMessageBegin("create_link",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Sw(g),h.writeMessageBegin("create_link",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("create_link",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.create_link(v.session,v.view_state,v.view_metadata,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Sw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("create_link",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("create_link",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_load_table_binary(y,p,h){const v=new wR;v.read(p),p.readMessageEnd(),this._handler.load_table_binary.length===4?Promise.resolve(this._handler.load_table_binary.bind(this._handler)(v.session,v.table_name,v.rows,v.column_names)).then(g=>{const E=new xw({success:g});h.writeMessageBegin("load_table_binary",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new xw(g),h.writeMessageBegin("load_table_binary",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("load_table_binary",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.load_table_binary(v.session,v.table_name,v.rows,v.column_names,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new xw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("load_table_binary",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("load_table_binary",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_load_table_binary_columnar(y,p,h){const v=new bR;v.read(p),p.readMessageEnd(),this._handler.load_table_binary_columnar.length===4?Promise.resolve(this._handler.load_table_binary_columnar.bind(this._handler)(v.session,v.table_name,v.cols,v.column_names)).then(g=>{const E=new Bw({success:g});h.writeMessageBegin("load_table_binary_columnar",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Bw(g),h.writeMessageBegin("load_table_binary_columnar",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("load_table_binary_columnar",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.load_table_binary_columnar(v.session,v.table_name,v.cols,v.column_names,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Bw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("load_table_binary_columnar",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("load_table_binary_columnar",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_load_table_binary_columnar_polys(y,p,h){const v=new TR;v.read(p),p.readMessageEnd(),this._handler.load_table_binary_columnar_polys.length===5?Promise.resolve(this._handler.load_table_binary_columnar_polys.bind(this._handler)(v.session,v.table_name,v.cols,v.column_names,v.assign_render_groups)).then(g=>{const E=new kw({success:g});h.writeMessageBegin("load_table_binary_columnar_polys",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new kw(g),h.writeMessageBegin("load_table_binary_columnar_polys",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("load_table_binary_columnar_polys",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.load_table_binary_columnar_polys(v.session,v.table_name,v.cols,v.column_names,v.assign_render_groups,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new kw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("load_table_binary_columnar_polys",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("load_table_binary_columnar_polys",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_load_table_binary_arrow(y,p,h){const v=new vR;v.read(p),p.readMessageEnd(),this._handler.load_table_binary_arrow.length===4?Promise.resolve(this._handler.load_table_binary_arrow.bind(this._handler)(v.session,v.table_name,v.arrow_stream,v.use_column_names)).then(g=>{const E=new Iw({success:g});h.writeMessageBegin("load_table_binary_arrow",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Iw(g),h.writeMessageBegin("load_table_binary_arrow",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("load_table_binary_arrow",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.load_table_binary_arrow(v.session,v.table_name,v.arrow_stream,v.use_column_names,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Iw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("load_table_binary_arrow",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("load_table_binary_arrow",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_load_table(y,p,h){const v=new ER;v.read(p),p.readMessageEnd(),this._handler.load_table.length===4?Promise.resolve(this._handler.load_table.bind(this._handler)(v.session,v.table_name,v.rows,v.column_names)).then(g=>{const E=new Fw({success:g});h.writeMessageBegin("load_table",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Fw(g),h.writeMessageBegin("load_table",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("load_table",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.load_table(v.session,v.table_name,v.rows,v.column_names,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Fw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("load_table",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("load_table",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_detect_column_types(y,p,h){const v=new SR;v.read(p),p.readMessageEnd(),this._handler.detect_column_types.length===3?Promise.resolve(this._handler.detect_column_types.bind(this._handler)(v.session,v.file_name,v.copy_params)).then(g=>{const E=new Ow({success:g});h.writeMessageBegin("detect_column_types",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Ow(g),h.writeMessageBegin("detect_column_types",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("detect_column_types",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.detect_column_types(v.session,v.file_name,v.copy_params,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Ow(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("detect_column_types",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("detect_column_types",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_create_table(y,p,h){const v=new xR;v.read(p),p.readMessageEnd(),this._handler.create_table.length===4?Promise.resolve(this._handler.create_table.bind(this._handler)(v.session,v.table_name,v.row_desc,v.create_params)).then(g=>{const E=new Mw({success:g});h.writeMessageBegin("create_table",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Mw(g),h.writeMessageBegin("create_table",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("create_table",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.create_table(v.session,v.table_name,v.row_desc,v.create_params,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Mw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("create_table",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("create_table",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_import_table(y,p,h){const v=new BR;v.read(p),p.readMessageEnd(),this._handler.import_table.length===4?Promise.resolve(this._handler.import_table.bind(this._handler)(v.session,v.table_name,v.file_name,v.copy_params)).then(g=>{const E=new Aw({success:g});h.writeMessageBegin("import_table",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Aw(g),h.writeMessageBegin("import_table",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("import_table",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.import_table(v.session,v.table_name,v.file_name,v.copy_params,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Aw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("import_table",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("import_table",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_import_geo_table(y,p,h){const v=new kR;v.read(p),p.readMessageEnd(),this._handler.import_geo_table.length===6?Promise.resolve(this._handler.import_geo_table.bind(this._handler)(v.session,v.table_name,v.file_name,v.copy_params,v.row_desc,v.create_params)).then(g=>{const E=new Nw({success:g});h.writeMessageBegin("import_geo_table",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Nw(g),h.writeMessageBegin("import_geo_table",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("import_geo_table",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.import_geo_table(v.session,v.table_name,v.file_name,v.copy_params,v.row_desc,v.create_params,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Nw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("import_geo_table",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("import_geo_table",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_import_table_status(y,p,h){const v=new IR;v.read(p),p.readMessageEnd(),this._handler.import_table_status.length===2?Promise.resolve(this._handler.import_table_status.bind(this._handler)(v.session,v.import_id)).then(g=>{const E=new Cw({success:g});h.writeMessageBegin("import_table_status",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Cw(g),h.writeMessageBegin("import_table_status",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("import_table_status",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.import_table_status(v.session,v.import_id,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Cw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("import_table_status",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("import_table_status",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_first_geo_file_in_archive(y,p,h){const v=new FR;v.read(p),p.readMessageEnd(),this._handler.get_first_geo_file_in_archive.length===3?Promise.resolve(this._handler.get_first_geo_file_in_archive.bind(this._handler)(v.session,v.archive_path,v.copy_params)).then(g=>{const E=new Rw({success:g});h.writeMessageBegin("get_first_geo_file_in_archive",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Rw(g),h.writeMessageBegin("get_first_geo_file_in_archive",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_first_geo_file_in_archive",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_first_geo_file_in_archive(v.session,v.archive_path,v.copy_params,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Rw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_first_geo_file_in_archive",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_first_geo_file_in_archive",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_all_files_in_archive(y,p,h){const v=new OR;v.read(p),p.readMessageEnd(),this._handler.get_all_files_in_archive.length===3?Promise.resolve(this._handler.get_all_files_in_archive.bind(this._handler)(v.session,v.archive_path,v.copy_params)).then(g=>{const E=new Lw({success:g});h.writeMessageBegin("get_all_files_in_archive",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Lw(g),h.writeMessageBegin("get_all_files_in_archive",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_all_files_in_archive",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_all_files_in_archive(v.session,v.archive_path,v.copy_params,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Lw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_all_files_in_archive",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_all_files_in_archive",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_layers_in_geo_file(y,p,h){const v=new MR;v.read(p),p.readMessageEnd(),this._handler.get_layers_in_geo_file.length===3?Promise.resolve(this._handler.get_layers_in_geo_file.bind(this._handler)(v.session,v.file_name,v.copy_params)).then(g=>{const E=new Pw({success:g});h.writeMessageBegin("get_layers_in_geo_file",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Pw(g),h.writeMessageBegin("get_layers_in_geo_file",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_layers_in_geo_file",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_layers_in_geo_file(v.session,v.file_name,v.copy_params,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Pw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_layers_in_geo_file",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_layers_in_geo_file",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_query_get_outer_fragment_count(y,p,h){const v=new AR;v.read(p),p.readMessageEnd(),this._handler.query_get_outer_fragment_count.length===2?Promise.resolve(this._handler.query_get_outer_fragment_count.bind(this._handler)(v.session,v.query)).then(g=>{const E=new Dw({success:g});h.writeMessageBegin("query_get_outer_fragment_count",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Dw(g),h.writeMessageBegin("query_get_outer_fragment_count",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("query_get_outer_fragment_count",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.query_get_outer_fragment_count(v.session,v.query,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Dw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("query_get_outer_fragment_count",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("query_get_outer_fragment_count",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_check_table_consistency(y,p,h){const v=new NR;v.read(p),p.readMessageEnd(),this._handler.check_table_consistency.length===2?Promise.resolve(this._handler.check_table_consistency.bind(this._handler)(v.session,v.table_id)).then(g=>{const E=new jw({success:g});h.writeMessageBegin("check_table_consistency",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new jw(g),h.writeMessageBegin("check_table_consistency",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("check_table_consistency",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.check_table_consistency(v.session,v.table_id,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new jw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("check_table_consistency",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("check_table_consistency",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_start_query(y,p,h){const v=new CR;v.read(p),p.readMessageEnd(),this._handler.start_query.length===6?Promise.resolve(this._handler.start_query.bind(this._handler)(v.leaf_session,v.parent_session,v.query_ra,v.start_time_str,v.just_explain,v.outer_fragment_indices)).then(g=>{const E=new Uw({success:g});h.writeMessageBegin("start_query",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Uw(g),h.writeMessageBegin("start_query",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("start_query",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.start_query(v.leaf_session,v.parent_session,v.query_ra,v.start_time_str,v.just_explain,v.outer_fragment_indices,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Uw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("start_query",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("start_query",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_execute_query_step(y,p,h){const v=new RR;v.read(p),p.readMessageEnd(),this._handler.execute_query_step.length===3?Promise.resolve(this._handler.execute_query_step.bind(this._handler)(v.pending_query,v.subquery_id,v.start_time_str)).then(g=>{const E=new zw({success:g});h.writeMessageBegin("execute_query_step",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new zw(g),h.writeMessageBegin("execute_query_step",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("execute_query_step",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.execute_query_step(v.pending_query,v.subquery_id,v.start_time_str,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new zw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("execute_query_step",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("execute_query_step",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_broadcast_serialized_rows(y,p,h){const v=new LR;v.read(p),p.readMessageEnd(),this._handler.broadcast_serialized_rows.length===5?Promise.resolve(this._handler.broadcast_serialized_rows.bind(this._handler)(v.serialized_rows,v.row_desc,v.query_id,v.subquery_id,v.is_final_subquery_result)).then(g=>{const E=new $w({success:g});h.writeMessageBegin("broadcast_serialized_rows",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new $w(g),h.writeMessageBegin("broadcast_serialized_rows",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("broadcast_serialized_rows",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.broadcast_serialized_rows(v.serialized_rows,v.row_desc,v.query_id,v.subquery_id,v.is_final_subquery_result,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new $w(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("broadcast_serialized_rows",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("broadcast_serialized_rows",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_start_render_query(y,p,h){const v=new PR;v.read(p),p.readMessageEnd(),this._handler.start_render_query.length===4?Promise.resolve(this._handler.start_render_query.bind(this._handler)(v.session,v.widget_id,v.node_idx,v.vega_json)).then(g=>{const E=new qw({success:g});h.writeMessageBegin("start_render_query",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new qw(g),h.writeMessageBegin("start_render_query",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("start_render_query",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.start_render_query(v.session,v.widget_id,v.node_idx,v.vega_json,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new qw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("start_render_query",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("start_render_query",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_execute_next_render_step(y,p,h){const v=new DR;v.read(p),p.readMessageEnd(),this._handler.execute_next_render_step.length===2?Promise.resolve(this._handler.execute_next_render_step.bind(this._handler)(v.pending_render,v.merged_data)).then(g=>{const E=new Gw({success:g});h.writeMessageBegin("execute_next_render_step",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Gw(g),h.writeMessageBegin("execute_next_render_step",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("execute_next_render_step",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.execute_next_render_step(v.pending_render,v.merged_data,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Gw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("execute_next_render_step",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("execute_next_render_step",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_insert_data(y,p,h){const v=new jR;v.read(p),p.readMessageEnd(),this._handler.insert_data.length===2?Promise.resolve(this._handler.insert_data.bind(this._handler)(v.session,v.insert_data)).then(g=>{const E=new Vw({success:g});h.writeMessageBegin("insert_data",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Vw(g),h.writeMessageBegin("insert_data",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("insert_data",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.insert_data(v.session,v.insert_data,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Vw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("insert_data",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("insert_data",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_insert_chunks(y,p,h){const v=new UR;v.read(p),p.readMessageEnd(),this._handler.insert_chunks.length===2?Promise.resolve(this._handler.insert_chunks.bind(this._handler)(v.session,v.insert_chunks)).then(g=>{const E=new Hw({success:g});h.writeMessageBegin("insert_chunks",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Hw(g),h.writeMessageBegin("insert_chunks",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("insert_chunks",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.insert_chunks(v.session,v.insert_chunks,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Hw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("insert_chunks",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("insert_chunks",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_checkpoint(y,p,h){const v=new zR;v.read(p),p.readMessageEnd(),this._handler.checkpoint.length===2?Promise.resolve(this._handler.checkpoint.bind(this._handler)(v.session,v.table_id)).then(g=>{const E=new Ww({success:g});h.writeMessageBegin("checkpoint",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Ww(g),h.writeMessageBegin("checkpoint",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("checkpoint",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.checkpoint(v.session,v.table_id,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Ww(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("checkpoint",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("checkpoint",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_roles(y,p,h){const v=new $R;v.read(p),p.readMessageEnd(),this._handler.get_roles.length===1?Promise.resolve(this._handler.get_roles.bind(this._handler)(v.session)).then(g=>{const E=new Yw({success:g});h.writeMessageBegin("get_roles",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Yw(g),h.writeMessageBegin("get_roles",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_roles",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_roles(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Yw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_roles",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_roles",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_db_objects_for_grantee(y,p,h){const v=new qR;v.read(p),p.readMessageEnd(),this._handler.get_db_objects_for_grantee.length===2?Promise.resolve(this._handler.get_db_objects_for_grantee.bind(this._handler)(v.session,v.roleName)).then(g=>{const E=new Xw({success:g});h.writeMessageBegin("get_db_objects_for_grantee",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Xw(g),h.writeMessageBegin("get_db_objects_for_grantee",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_db_objects_for_grantee",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_db_objects_for_grantee(v.session,v.roleName,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Xw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_db_objects_for_grantee",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_db_objects_for_grantee",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_db_object_privs(y,p,h){const v=new GR;v.read(p),p.readMessageEnd(),this._handler.get_db_object_privs.length===3?Promise.resolve(this._handler.get_db_object_privs.bind(this._handler)(v.session,v.objectName,v.type)).then(g=>{const E=new Kw({success:g});h.writeMessageBegin("get_db_object_privs",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Kw(g),h.writeMessageBegin("get_db_object_privs",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_db_object_privs",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_db_object_privs(v.session,v.objectName,v.type,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Kw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_db_object_privs",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_db_object_privs",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_all_roles_for_user(y,p,h){const v=new VR;v.read(p),p.readMessageEnd(),this._handler.get_all_roles_for_user.length===2?Promise.resolve(this._handler.get_all_roles_for_user.bind(this._handler)(v.session,v.userName)).then(g=>{const E=new Jw({success:g});h.writeMessageBegin("get_all_roles_for_user",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Jw(g),h.writeMessageBegin("get_all_roles_for_user",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_all_roles_for_user",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_all_roles_for_user(v.session,v.userName,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Jw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_all_roles_for_user",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_all_roles_for_user",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_all_effective_roles_for_user(y,p,h){const v=new HR;v.read(p),p.readMessageEnd(),this._handler.get_all_effective_roles_for_user.length===2?Promise.resolve(this._handler.get_all_effective_roles_for_user.bind(this._handler)(v.session,v.userName)).then(g=>{const E=new Qw({success:g});h.writeMessageBegin("get_all_effective_roles_for_user",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Qw(g),h.writeMessageBegin("get_all_effective_roles_for_user",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_all_effective_roles_for_user",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_all_effective_roles_for_user(v.session,v.userName,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Qw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_all_effective_roles_for_user",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_all_effective_roles_for_user",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_has_role(y,p,h){const v=new WR;v.read(p),p.readMessageEnd(),this._handler.has_role.length===3?Promise.resolve(this._handler.has_role.bind(this._handler)(v.session,v.granteeName,v.roleName)).then(g=>{const E=new Zw({success:g});h.writeMessageBegin("has_role",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Zw(g),h.writeMessageBegin("has_role",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("has_role",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.has_role(v.session,v.granteeName,v.roleName,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Zw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("has_role",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("has_role",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_has_object_privilege(y,p,h){const v=new YR;v.read(p),p.readMessageEnd(),this._handler.has_object_privilege.length===5?Promise.resolve(this._handler.has_object_privilege.bind(this._handler)(v.session,v.granteeName,v.ObjectName,v.objectType,v.permissions)).then(g=>{const E=new eb({success:g});h.writeMessageBegin("has_object_privilege",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new eb(g),h.writeMessageBegin("has_object_privilege",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("has_object_privilege",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.has_object_privilege(v.session,v.granteeName,v.ObjectName,v.objectType,v.permissions,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new eb(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("has_object_privilege",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("has_object_privilege",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_set_license_key(y,p,h){const v=new XR;v.read(p),p.readMessageEnd(),this._handler.set_license_key.length===3?Promise.resolve(this._handler.set_license_key.bind(this._handler)(v.session,v.key,v.nonce)).then(g=>{const E=new tb({success:g});h.writeMessageBegin("set_license_key",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new tb(g),h.writeMessageBegin("set_license_key",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("set_license_key",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.set_license_key(v.session,v.key,v.nonce,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new tb(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("set_license_key",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("set_license_key",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_license_claims(y,p,h){const v=new KR;v.read(p),p.readMessageEnd(),this._handler.get_license_claims.length===2?Promise.resolve(this._handler.get_license_claims.bind(this._handler)(v.session,v.nonce)).then(g=>{const E=new nb({success:g});h.writeMessageBegin("get_license_claims",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new nb(g),h.writeMessageBegin("get_license_claims",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_license_claims",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_license_claims(v.session,v.nonce,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new nb(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_license_claims",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_license_claims",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_device_parameters(y,p,h){const v=new JR;v.read(p),p.readMessageEnd(),this._handler.get_device_parameters.length===1?Promise.resolve(this._handler.get_device_parameters.bind(this._handler)(v.session)).then(g=>{const E=new ib({success:g});h.writeMessageBegin("get_device_parameters",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new ib(g),h.writeMessageBegin("get_device_parameters",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_device_parameters",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_device_parameters(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new ib(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_device_parameters",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_device_parameters",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_register_runtime_extension_functions(y,p,h){const v=new QR;v.read(p),p.readMessageEnd(),this._handler.register_runtime_extension_functions.length===4?Promise.resolve(this._handler.register_runtime_extension_functions.bind(this._handler)(v.session,v.udfs,v.udtfs,v.device_ir_map)).then(g=>{const E=new sb({success:g});h.writeMessageBegin("register_runtime_extension_functions",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new sb(g),h.writeMessageBegin("register_runtime_extension_functions",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("register_runtime_extension_functions",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.register_runtime_extension_functions(v.session,v.udfs,v.udtfs,v.device_ir_map,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new sb(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("register_runtime_extension_functions",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("register_runtime_extension_functions",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_table_function_names(y,p,h){const v=new ZR;v.read(p),p.readMessageEnd(),this._handler.get_table_function_names.length===1?Promise.resolve(this._handler.get_table_function_names.bind(this._handler)(v.session)).then(g=>{const E=new rb({success:g});h.writeMessageBegin("get_table_function_names",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new rb(g),h.writeMessageBegin("get_table_function_names",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_table_function_names",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_table_function_names(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new rb(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_table_function_names",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_table_function_names",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_runtime_table_function_names(y,p,h){const v=new eL;v.read(p),p.readMessageEnd(),this._handler.get_runtime_table_function_names.length===1?Promise.resolve(this._handler.get_runtime_table_function_names.bind(this._handler)(v.session)).then(g=>{const E=new ab({success:g});h.writeMessageBegin("get_runtime_table_function_names",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new ab(g),h.writeMessageBegin("get_runtime_table_function_names",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_runtime_table_function_names",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_runtime_table_function_names(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new ab(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_runtime_table_function_names",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_runtime_table_function_names",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_table_function_details(y,p,h){const v=new tL;v.read(p),p.readMessageEnd(),this._handler.get_table_function_details.length===2?Promise.resolve(this._handler.get_table_function_details.bind(this._handler)(v.session,v.udtf_names)).then(g=>{const E=new ob({success:g});h.writeMessageBegin("get_table_function_details",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new ob(g),h.writeMessageBegin("get_table_function_details",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_table_function_details",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_table_function_details(v.session,v.udtf_names,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new ob(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_table_function_details",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_table_function_details",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}}},2818:(c,d,f)=>{const a=f(9262).Thrift;f(135);const _=c.exports={};_.TDeviceType={CPU:0,GPU:1},_.TDatumType={SMALLINT:0,INT:1,BIGINT:2,FLOAT:3,DECIMAL:4,DOUBLE:5,STR:6,TIME:7,TIMESTAMP:8,DATE:9,BOOL:10,INTERVAL_DAY_TIME:11,INTERVAL_YEAR_MONTH:12,POINT:13,LINESTRING:14,POLYGON:15,MULTIPOLYGON:16,TINYINT:17,GEOMETRY:18,GEOGRAPHY:19},_.TEncodingType={NONE:0,FIXED:1,RL:2,DIFF:3,DICT:4,SPARSE:5,GEOINT:6,DATE_IN_DAYS:7},c.exports.TTypeInfo=class{constructor(w){this.type=null,this.encoding=null,this.nullable=null,this.is_array=null,this.precision=null,this.scale=null,this.comp_param=null,this.size=-1,w&&(w.type!==void 0&&w.type!==null&&(this.type=w.type),w.encoding!==void 0&&w.encoding!==null&&(this.encoding=w.encoding),w.nullable!==void 0&&w.nullable!==null&&(this.nullable=w.nullable),w.is_array!==void 0&&w.is_array!==null&&(this.is_array=w.is_array),w.precision!==void 0&&w.precision!==null&&(this.precision=w.precision),w.scale!==void 0&&w.scale!==null&&(this.scale=w.scale),w.comp_param!==void 0&&w.comp_param!==null&&(this.comp_param=w.comp_param),w.size!==void 0&&w.size!==null&&(this.size=w.size))}read(w){for(w.readStructBegin();;){const m=w.readFieldBegin(),l=m.ftype,T=m.fid;if(l==a.Type.STOP)break;switch(T){case 1:l==a.Type.I32?this.type=w.readI32():w.skip(l);break;case 4:l==a.Type.I32?this.encoding=w.readI32():w.skip(l);break;case 2:l==a.Type.BOOL?this.nullable=w.readBool():w.skip(l);break;case 3:l==a.Type.BOOL?this.is_array=w.readBool():w.skip(l);break;case 5:l==a.Type.I32?this.precision=w.readI32():w.skip(l);break;case 6:l==a.Type.I32?this.scale=w.readI32():w.skip(l);break;case 7:l==a.Type.I32?this.comp_param=w.readI32():w.skip(l);break;case 8:l==a.Type.I32?this.size=w.readI32():w.skip(l);break;default:w.skip(l)}w.readFieldEnd()}w.readStructEnd()}write(w){w.writeStructBegin("TTypeInfo"),this.type!==null&&this.type!==void 0&&(w.writeFieldBegin("type",a.Type.I32,1),w.writeI32(this.type),w.writeFieldEnd()),this.encoding!==null&&this.encoding!==void 0&&(w.writeFieldBegin("encoding",a.Type.I32,4),w.writeI32(this.encoding),w.writeFieldEnd()),this.nullable!==null&&this.nullable!==void 0&&(w.writeFieldBegin("nullable",a.Type.BOOL,2),w.writeBool(this.nullable),w.writeFieldEnd()),this.is_array!==null&&this.is_array!==void 0&&(w.writeFieldBegin("is_array",a.Type.BOOL,3),w.writeBool(this.is_array),w.writeFieldEnd()),this.precision!==null&&this.precision!==void 0&&(w.writeFieldBegin("precision",a.Type.I32,5),w.writeI32(this.precision),w.writeFieldEnd()),this.scale!==null&&this.scale!==void 0&&(w.writeFieldBegin("scale",a.Type.I32,6),w.writeI32(this.scale),w.writeFieldEnd()),this.comp_param!==null&&this.comp_param!==void 0&&(w.writeFieldBegin("comp_param",a.Type.I32,7),w.writeI32(this.comp_param),w.writeFieldEnd()),this.size!==null&&this.size!==void 0&&(w.writeFieldBegin("size",a.Type.I32,8),w.writeI32(this.size),w.writeFieldEnd()),w.writeFieldStop(),w.writeStructEnd()}}},4494:(c,d,f)=>{const a=f(9262).Thrift;f(135);const _=c.exports={};_.TCompletionHintType={COLUMN:0,TABLE:1,VIEW:2,SCHEMA:3,CATALOG:4,REPOSITORY:5,FUNCTION:6,KEYWORD:7},c.exports.TCompletionHint=class{constructor(w){this.type=null,this.hints=null,this.replaced=null,w&&(w.type!==void 0&&w.type!==null&&(this.type=w.type),w.hints!==void 0&&w.hints!==null&&(this.hints=a.copyList(w.hints,[null])),w.replaced!==void 0&&w.replaced!==null&&(this.replaced=w.replaced))}read(w){for(w.readStructBegin();;){const m=w.readFieldBegin(),l=m.ftype,T=m.fid;if(l==a.Type.STOP)break;switch(T){case 1:l==a.Type.I32?this.type=w.readI32():w.skip(l);break;case 2:if(l==a.Type.LIST){this.hints=[];const S=w.readListBegin().size||0;for(let x=0;x<S;++x){let B=null;B=w.readString(),this.hints.push(B)}w.readListEnd()}else w.skip(l);break;case 3:l==a.Type.STRING?this.replaced=w.readString():w.skip(l);break;default:w.skip(l)}w.readFieldEnd()}w.readStructEnd()}write(w){if(w.writeStructBegin("TCompletionHint"),this.type!==null&&this.type!==void 0&&(w.writeFieldBegin("type",a.Type.I32,1),w.writeI32(this.type),w.writeFieldEnd()),this.hints!==null&&this.hints!==void 0){w.writeFieldBegin("hints",a.Type.LIST,2),w.writeListBegin(a.Type.STRING,this.hints.length);for(let m in this.hints)this.hints.hasOwnProperty(m)&&(m=this.hints[m],w.writeString(m));w.writeListEnd(),w.writeFieldEnd()}this.replaced!==null&&this.replaced!==void 0&&(w.writeFieldBegin("replaced",a.Type.STRING,3),w.writeString(this.replaced),w.writeFieldEnd()),w.writeFieldStop(),w.writeStructEnd()}}},1396:(c,d,f)=>{const a=f(9262).Thrift;f(135);const _=c.exports={};_.TExtArgumentType={Int8:0,Int16:1,Int32:2,Int64:3,Float:4,Double:5,Void:6,PInt8:7,PInt16:8,PInt32:9,PInt64:10,PFloat:11,PDouble:12,PBool:13,Bool:14,ArrayInt8:15,ArrayInt16:16,ArrayInt32:17,ArrayInt64:18,ArrayFloat:19,ArrayDouble:20,ArrayBool:21,GeoPoint:22,GeoLineString:23,Cursor:24,GeoPolygon:25,GeoMultiPolygon:26,ColumnInt8:27,ColumnInt16:28,ColumnInt32:29,ColumnInt64:30,ColumnFloat:31,ColumnDouble:32,ColumnBool:33,TextEncodingNone:34,TextEncodingDict:35,ColumnListInt8:36,ColumnListInt16:37,ColumnListInt32:38,ColumnListInt64:39,ColumnListFloat:40,ColumnListDouble:41,ColumnListBool:42,ColumnTextEncodingDict:43,ColumnListTextEncodingDict:44,ColumnTimestamp:45,Timestamp:46},_.TOutputBufferSizeType={kConstant:0,kUserSpecifiedConstantParameter:1,kUserSpecifiedRowMultiplier:2,kTableFunctionSpecifiedParameter:3,kPreFlightParameter:4},c.exports.TUserDefinedFunction=class{constructor(w){this.name=null,this.argTypes=null,this.retType=null,w&&(w.name!==void 0&&w.name!==null&&(this.name=w.name),w.argTypes!==void 0&&w.argTypes!==null&&(this.argTypes=a.copyList(w.argTypes,[null])),w.retType!==void 0&&w.retType!==null&&(this.retType=w.retType))}read(w){for(w.readStructBegin();;){const m=w.readFieldBegin(),l=m.ftype,T=m.fid;if(l==a.Type.STOP)break;switch(T){case 1:l==a.Type.STRING?this.name=w.readString():w.skip(l);break;case 2:if(l==a.Type.LIST){this.argTypes=[];const S=w.readListBegin().size||0;for(let x=0;x<S;++x){let B=null;B=w.readI32(),this.argTypes.push(B)}w.readListEnd()}else w.skip(l);break;case 3:l==a.Type.I32?this.retType=w.readI32():w.skip(l);break;default:w.skip(l)}w.readFieldEnd()}w.readStructEnd()}write(w){if(w.writeStructBegin("TUserDefinedFunction"),this.name!==null&&this.name!==void 0&&(w.writeFieldBegin("name",a.Type.STRING,1),w.writeString(this.name),w.writeFieldEnd()),this.argTypes!==null&&this.argTypes!==void 0){w.writeFieldBegin("argTypes",a.Type.LIST,2),w.writeListBegin(a.Type.I32,this.argTypes.length);for(let m in this.argTypes)this.argTypes.hasOwnProperty(m)&&(m=this.argTypes[m],w.writeI32(m));w.writeListEnd(),w.writeFieldEnd()}this.retType!==null&&this.retType!==void 0&&(w.writeFieldBegin("retType",a.Type.I32,3),w.writeI32(this.retType),w.writeFieldEnd()),w.writeFieldStop(),w.writeStructEnd()}},c.exports.TUserDefinedTableFunction=class{constructor(w){this.name=null,this.sizerType=null,this.sizerArgPos=null,this.inputArgTypes=null,this.outputArgTypes=null,this.sqlArgTypes=null,this.annotations=null,w&&(w.name!==void 0&&w.name!==null&&(this.name=w.name),w.sizerType!==void 0&&w.sizerType!==null&&(this.sizerType=w.sizerType),w.sizerArgPos!==void 0&&w.sizerArgPos!==null&&(this.sizerArgPos=w.sizerArgPos),w.inputArgTypes!==void 0&&w.inputArgTypes!==null&&(this.inputArgTypes=a.copyList(w.inputArgTypes,[null])),w.outputArgTypes!==void 0&&w.outputArgTypes!==null&&(this.outputArgTypes=a.copyList(w.outputArgTypes,[null])),w.sqlArgTypes!==void 0&&w.sqlArgTypes!==null&&(this.sqlArgTypes=a.copyList(w.sqlArgTypes,[null])),w.annotations!==void 0&&w.annotations!==null&&(this.annotations=a.copyList(w.annotations,[a.copyMap,null])))}read(w){for(w.readStructBegin();;){const m=w.readFieldBegin(),l=m.ftype,T=m.fid;if(l==a.Type.STOP)break;switch(T){case 1:l==a.Type.STRING?this.name=w.readString():w.skip(l);break;case 2:l==a.Type.I32?this.sizerType=w.readI32():w.skip(l);break;case 3:l==a.Type.I32?this.sizerArgPos=w.readI32():w.skip(l);break;case 4:if(l==a.Type.LIST){this.inputArgTypes=[];const S=w.readListBegin().size||0;for(let x=0;x<S;++x){let B=null;B=w.readI32(),this.inputArgTypes.push(B)}w.readListEnd()}else w.skip(l);break;case 5:if(l==a.Type.LIST){this.outputArgTypes=[];const S=w.readListBegin().size||0;for(let x=0;x<S;++x){let B=null;B=w.readI32(),this.outputArgTypes.push(B)}w.readListEnd()}else w.skip(l);break;case 6:if(l==a.Type.LIST){this.sqlArgTypes=[];const S=w.readListBegin().size||0;for(let x=0;x<S;++x){let B=null;B=w.readI32(),this.sqlArgTypes.push(B)}w.readListEnd()}else w.skip(l);break;case 7:if(l==a.Type.LIST){this.annotations=[];const S=w.readListBegin().size||0;for(let x=0;x<S;++x){let B=null;B={};const k=w.readMapBegin().size||0;for(let A=0;A<k;++A){let M=null,R=null;M=w.readString(),R=w.readString(),B[M]=R}w.readMapEnd(),this.annotations.push(B)}w.readListEnd()}else w.skip(l);break;default:w.skip(l)}w.readFieldEnd()}w.readStructEnd()}write(w){if(w.writeStructBegin("TUserDefinedTableFunction"),this.name!==null&&this.name!==void 0&&(w.writeFieldBegin("name",a.Type.STRING,1),w.writeString(this.name),w.writeFieldEnd()),this.sizerType!==null&&this.sizerType!==void 0&&(w.writeFieldBegin("sizerType",a.Type.I32,2),w.writeI32(this.sizerType),w.writeFieldEnd()),this.sizerArgPos!==null&&this.sizerArgPos!==void 0&&(w.writeFieldBegin("sizerArgPos",a.Type.I32,3),w.writeI32(this.sizerArgPos),w.writeFieldEnd()),this.inputArgTypes!==null&&this.inputArgTypes!==void 0){w.writeFieldBegin("inputArgTypes",a.Type.LIST,4),w.writeListBegin(a.Type.I32,this.inputArgTypes.length);for(let m in this.inputArgTypes)this.inputArgTypes.hasOwnProperty(m)&&(m=this.inputArgTypes[m],w.writeI32(m));w.writeListEnd(),w.writeFieldEnd()}if(this.outputArgTypes!==null&&this.outputArgTypes!==void 0){w.writeFieldBegin("outputArgTypes",a.Type.LIST,5),w.writeListBegin(a.Type.I32,this.outputArgTypes.length);for(let m in this.outputArgTypes)this.outputArgTypes.hasOwnProperty(m)&&(m=this.outputArgTypes[m],w.writeI32(m));w.writeListEnd(),w.writeFieldEnd()}if(this.sqlArgTypes!==null&&this.sqlArgTypes!==void 0){w.writeFieldBegin("sqlArgTypes",a.Type.LIST,6),w.writeListBegin(a.Type.I32,this.sqlArgTypes.length);for(let m in this.sqlArgTypes)this.sqlArgTypes.hasOwnProperty(m)&&(m=this.sqlArgTypes[m],w.writeI32(m));w.writeListEnd(),w.writeFieldEnd()}if(this.annotations!==null&&this.annotations!==void 0){w.writeFieldBegin("annotations",a.Type.LIST,7),w.writeListBegin(a.Type.MAP,this.annotations.length);for(let m in this.annotations)if(this.annotations.hasOwnProperty(m)){m=this.annotations[m],w.writeMapBegin(a.Type.STRING,a.Type.STRING,a.objectLength(m));for(let l in m)if(m.hasOwnProperty(l)){let T=m[l];w.writeString(l),w.writeString(T)}w.writeMapEnd()}w.writeListEnd(),w.writeFieldEnd()}w.writeFieldStop(),w.writeStructEnd()}}},2607:(c,d,f)=>{const a=f(9262).Thrift;f(135);const _=f(2818);f(4494);const w=f(3962);f(1396);const m=c.exports={};m.TExecuteMode={GPU:1,CPU:2},m.TSourceType={DELIMITED_FILE:0,GEO_FILE:1,PARQUET_FILE:2,RASTER_FILE:3,ODBC:4},m.TPartitionDetail={DEFAULT:0,REPLICATED:1,SHARDED:2,OTHER:3},m.TGeoFileLayerContents={EMPTY:0,GEO:1,NON_GEO:2,UNSUPPORTED_GEO:3},m.TImportHeaderRow={AUTODETECT:0,NO_HEADER:1,HAS_HEADER:2},m.TRole={SERVER:0,AGGREGATOR:1,LEAF:2,STRING_DICTIONARY:3},m.TTableType={DEFAULT:0,TEMPORARY:1,FOREIGN:2,VIEW:3},m.TTableRefreshUpdateType={ALL:0,APPEND:1},m.TTableRefreshTimingType={MANUAL:0,SCHEDULED:1},m.TTableRefreshIntervalType={NONE:0,HOUR:1,DAY:2},m.TMergeType={UNION:0,REDUCE:1},m.TRasterPointType={NONE:0,AUTO:1,SMALLINT:2,INT:3,FLOAT:4,DOUBLE:5,POINT:6},m.TRasterPointTransform={NONE:0,AUTO:1,FILE:2,WORLD:3},m.TQueryType={UNKNOWN:0,READ:1,WRITE:2,SCHEMA_READ:3,SCHEMA_WRITE:4},m.TArrowTransport={SHARED_MEMORY:0,WIRE:1},m.TExpressionRangeType={INVALID:0,INTEGER:1,FLOAT:2,DOUBLE:3},m.TDBObjectType={AbstractDBObjectType:0,DatabaseDBObjectType:1,TableDBObjectType:2,DashboardDBObjectType:3,ViewDBObjectType:4,ServerDBObjectType:5},m.TDataSourceType={TABLE:0},c.exports.TDatumVal=class{constructor(l){this.int_val=null,this.real_val=null,this.str_val=null,this.arr_val=null,l&&(l.int_val!==void 0&&l.int_val!==null&&(this.int_val=l.int_val),l.real_val!==void 0&&l.real_val!==null&&(this.real_val=l.real_val),l.str_val!==void 0&&l.str_val!==null&&(this.str_val=l.str_val),l.arr_val!==void 0&&l.arr_val!==null&&(this.arr_val=a.copyList(l.arr_val,[null])))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I64?this.int_val=l.readI64():l.skip(b);break;case 2:b==a.Type.DOUBLE?this.real_val=l.readDouble():l.skip(b);break;case 3:b==a.Type.STRING?this.str_val=l.readString():l.skip(b);break;case 4:if(b==a.Type.LIST){this.arr_val=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=new m.TDatum,k.read(l),this.arr_val.push(k)}l.readListEnd()}else l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TDatumVal"),this.int_val!==null&&this.int_val!==void 0&&(l.writeFieldBegin("int_val",a.Type.I64,1),l.writeI64(this.int_val),l.writeFieldEnd()),this.real_val!==null&&this.real_val!==void 0&&(l.writeFieldBegin("real_val",a.Type.DOUBLE,2),l.writeDouble(this.real_val),l.writeFieldEnd()),this.str_val!==null&&this.str_val!==void 0&&(l.writeFieldBegin("str_val",a.Type.STRING,3),l.writeString(this.str_val),l.writeFieldEnd()),this.arr_val!==null&&this.arr_val!==void 0){l.writeFieldBegin("arr_val",a.Type.LIST,4),l.writeListBegin(a.Type.STRUCT,this.arr_val.length);for(let T in this.arr_val)this.arr_val.hasOwnProperty(T)&&(T=this.arr_val[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDatum=class{constructor(l){this.val=null,this.is_null=null,l&&(l.val!==void 0&&l.val!==null&&(this.val=new m.TDatumVal(l.val)),l.is_null!==void 0&&l.is_null!==null&&(this.is_null=l.is_null))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRUCT?(this.val=new m.TDatumVal,this.val.read(l)):l.skip(b);break;case 2:b==a.Type.BOOL?this.is_null=l.readBool():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TDatum"),this.val!==null&&this.val!==void 0&&(l.writeFieldBegin("val",a.Type.STRUCT,1),this.val.write(l),l.writeFieldEnd()),this.is_null!==null&&this.is_null!==void 0&&(l.writeFieldBegin("is_null",a.Type.BOOL,2),l.writeBool(this.is_null),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TStringValue=class{constructor(l){this.str_val=null,this.is_null=null,l&&(l.str_val!==void 0&&l.str_val!==null&&(this.str_val=l.str_val),l.is_null!==void 0&&l.is_null!==null&&(this.is_null=l.is_null))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.str_val=l.readString():l.skip(b);break;case 2:b==a.Type.BOOL?this.is_null=l.readBool():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TStringValue"),this.str_val!==null&&this.str_val!==void 0&&(l.writeFieldBegin("str_val",a.Type.STRING,1),l.writeString(this.str_val),l.writeFieldEnd()),this.is_null!==null&&this.is_null!==void 0&&(l.writeFieldBegin("is_null",a.Type.BOOL,2),l.writeBool(this.is_null),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TColumnType=class{constructor(l){this.col_name=null,this.col_type=null,this.is_reserved_keyword=null,this.src_name=null,this.is_system=null,this.is_physical=null,this.col_id=null,this.default_value=null,l&&(l.col_name!==void 0&&l.col_name!==null&&(this.col_name=l.col_name),l.col_type!==void 0&&l.col_type!==null&&(this.col_type=new _.TTypeInfo(l.col_type)),l.is_reserved_keyword!==void 0&&l.is_reserved_keyword!==null&&(this.is_reserved_keyword=l.is_reserved_keyword),l.src_name!==void 0&&l.src_name!==null&&(this.src_name=l.src_name),l.is_system!==void 0&&l.is_system!==null&&(this.is_system=l.is_system),l.is_physical!==void 0&&l.is_physical!==null&&(this.is_physical=l.is_physical),l.col_id!==void 0&&l.col_id!==null&&(this.col_id=l.col_id),l.default_value!==void 0&&l.default_value!==null&&(this.default_value=l.default_value))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.col_name=l.readString():l.skip(b);break;case 2:b==a.Type.STRUCT?(this.col_type=new _.TTypeInfo,this.col_type.read(l)):l.skip(b);break;case 3:b==a.Type.BOOL?this.is_reserved_keyword=l.readBool():l.skip(b);break;case 4:b==a.Type.STRING?this.src_name=l.readString():l.skip(b);break;case 5:b==a.Type.BOOL?this.is_system=l.readBool():l.skip(b);break;case 6:b==a.Type.BOOL?this.is_physical=l.readBool():l.skip(b);break;case 7:b==a.Type.I64?this.col_id=l.readI64():l.skip(b);break;case 8:b==a.Type.STRING?this.default_value=l.readString():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TColumnType"),this.col_name!==null&&this.col_name!==void 0&&(l.writeFieldBegin("col_name",a.Type.STRING,1),l.writeString(this.col_name),l.writeFieldEnd()),this.col_type!==null&&this.col_type!==void 0&&(l.writeFieldBegin("col_type",a.Type.STRUCT,2),this.col_type.write(l),l.writeFieldEnd()),this.is_reserved_keyword!==null&&this.is_reserved_keyword!==void 0&&(l.writeFieldBegin("is_reserved_keyword",a.Type.BOOL,3),l.writeBool(this.is_reserved_keyword),l.writeFieldEnd()),this.src_name!==null&&this.src_name!==void 0&&(l.writeFieldBegin("src_name",a.Type.STRING,4),l.writeString(this.src_name),l.writeFieldEnd()),this.is_system!==null&&this.is_system!==void 0&&(l.writeFieldBegin("is_system",a.Type.BOOL,5),l.writeBool(this.is_system),l.writeFieldEnd()),this.is_physical!==null&&this.is_physical!==void 0&&(l.writeFieldBegin("is_physical",a.Type.BOOL,6),l.writeBool(this.is_physical),l.writeFieldEnd()),this.col_id!==null&&this.col_id!==void 0&&(l.writeFieldBegin("col_id",a.Type.I64,7),l.writeI64(this.col_id),l.writeFieldEnd()),this.default_value!==null&&this.default_value!==void 0&&(l.writeFieldBegin("default_value",a.Type.STRING,8),l.writeString(this.default_value),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TRow=class{constructor(l){this.cols=null,l&&l.cols!==void 0&&l.cols!==null&&(this.cols=a.copyList(l.cols,[m.TDatum]))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:if(b==a.Type.LIST){this.cols=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=new m.TDatum,k.read(l),this.cols.push(k)}l.readListEnd()}else l.skip(b);break;case 0:l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TRow"),this.cols!==null&&this.cols!==void 0){l.writeFieldBegin("cols",a.Type.LIST,1),l.writeListBegin(a.Type.STRUCT,this.cols.length);for(let T in this.cols)this.cols.hasOwnProperty(T)&&(T=this.cols[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TColumnData=class{constructor(l){this.int_col=null,this.real_col=null,this.str_col=null,this.arr_col=null,l&&(l.int_col!==void 0&&l.int_col!==null&&(this.int_col=a.copyList(l.int_col,[null])),l.real_col!==void 0&&l.real_col!==null&&(this.real_col=a.copyList(l.real_col,[null])),l.str_col!==void 0&&l.str_col!==null&&(this.str_col=a.copyList(l.str_col,[null])),l.arr_col!==void 0&&l.arr_col!==null&&(this.arr_col=a.copyList(l.arr_col,[null])))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:if(b==a.Type.LIST){this.int_col=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=l.readI64(),this.int_col.push(k)}l.readListEnd()}else l.skip(b);break;case 2:if(b==a.Type.LIST){this.real_col=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=l.readDouble(),this.real_col.push(k)}l.readListEnd()}else l.skip(b);break;case 3:if(b==a.Type.LIST){this.str_col=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=l.readString(),this.str_col.push(k)}l.readListEnd()}else l.skip(b);break;case 4:if(b==a.Type.LIST){this.arr_col=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=new m.TColumn,k.read(l),this.arr_col.push(k)}l.readListEnd()}else l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TColumnData"),this.int_col!==null&&this.int_col!==void 0){l.writeFieldBegin("int_col",a.Type.LIST,1),l.writeListBegin(a.Type.I64,this.int_col.length);for(let T in this.int_col)this.int_col.hasOwnProperty(T)&&(T=this.int_col[T],l.writeI64(T));l.writeListEnd(),l.writeFieldEnd()}if(this.real_col!==null&&this.real_col!==void 0){l.writeFieldBegin("real_col",a.Type.LIST,2),l.writeListBegin(a.Type.DOUBLE,this.real_col.length);for(let T in this.real_col)this.real_col.hasOwnProperty(T)&&(T=this.real_col[T],l.writeDouble(T));l.writeListEnd(),l.writeFieldEnd()}if(this.str_col!==null&&this.str_col!==void 0){l.writeFieldBegin("str_col",a.Type.LIST,3),l.writeListBegin(a.Type.STRING,this.str_col.length);for(let T in this.str_col)this.str_col.hasOwnProperty(T)&&(T=this.str_col[T],l.writeString(T));l.writeListEnd(),l.writeFieldEnd()}if(this.arr_col!==null&&this.arr_col!==void 0){l.writeFieldBegin("arr_col",a.Type.LIST,4),l.writeListBegin(a.Type.STRUCT,this.arr_col.length);for(let T in this.arr_col)this.arr_col.hasOwnProperty(T)&&(T=this.arr_col[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TColumn=class{constructor(l){this.data=null,this.nulls=null,l&&(l.data!==void 0&&l.data!==null&&(this.data=new m.TColumnData(l.data)),l.nulls!==void 0&&l.nulls!==null&&(this.nulls=a.copyList(l.nulls,[null])))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRUCT?(this.data=new m.TColumnData,this.data.read(l)):l.skip(b);break;case 2:if(b==a.Type.LIST){this.nulls=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=l.readBool(),this.nulls.push(k)}l.readListEnd()}else l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TColumn"),this.data!==null&&this.data!==void 0&&(l.writeFieldBegin("data",a.Type.STRUCT,1),this.data.write(l),l.writeFieldEnd()),this.nulls!==null&&this.nulls!==void 0){l.writeFieldBegin("nulls",a.Type.LIST,2),l.writeListBegin(a.Type.BOOL,this.nulls.length);for(let T in this.nulls)this.nulls.hasOwnProperty(T)&&(T=this.nulls[T],l.writeBool(T));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TStringRow=class{constructor(l){this.cols=null,l&&l.cols!==void 0&&l.cols!==null&&(this.cols=a.copyList(l.cols,[m.TStringValue]))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:if(b==a.Type.LIST){this.cols=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=new m.TStringValue,k.read(l),this.cols.push(k)}l.readListEnd()}else l.skip(b);break;case 0:l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TStringRow"),this.cols!==null&&this.cols!==void 0){l.writeFieldBegin("cols",a.Type.LIST,1),l.writeListBegin(a.Type.STRUCT,this.cols.length);for(let T in this.cols)this.cols.hasOwnProperty(T)&&(T=this.cols[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TKrb5Session=class{constructor(l){this.sessionId=null,this.krbToken=null,l&&(l.sessionId!==void 0&&l.sessionId!==null&&(this.sessionId=l.sessionId),l.krbToken!==void 0&&l.krbToken!==null&&(this.krbToken=l.krbToken))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.sessionId=l.readString():l.skip(b);break;case 2:b==a.Type.STRING?this.krbToken=l.readString():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TKrb5Session"),this.sessionId!==null&&this.sessionId!==void 0&&(l.writeFieldBegin("sessionId",a.Type.STRING,1),l.writeString(this.sessionId),l.writeFieldEnd()),this.krbToken!==null&&this.krbToken!==void 0&&(l.writeFieldBegin("krbToken",a.Type.STRING,2),l.writeString(this.krbToken),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TStepResult=class{constructor(l){this.serialized_rows=null,this.execution_finished=null,this.merge_type=null,this.sharded=null,this.row_desc=null,this.node_id=null,l&&(l.serialized_rows!==void 0&&l.serialized_rows!==null&&(this.serialized_rows=new w.TSerializedRows(l.serialized_rows)),l.execution_finished!==void 0&&l.execution_finished!==null&&(this.execution_finished=l.execution_finished),l.merge_type!==void 0&&l.merge_type!==null&&(this.merge_type=l.merge_type),l.sharded!==void 0&&l.sharded!==null&&(this.sharded=l.sharded),l.row_desc!==void 0&&l.row_desc!==null&&(this.row_desc=a.copyList(l.row_desc,[m.TColumnType])),l.node_id!==void 0&&l.node_id!==null&&(this.node_id=l.node_id))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRUCT?(this.serialized_rows=new w.TSerializedRows,this.serialized_rows.read(l)):l.skip(b);break;case 2:b==a.Type.BOOL?this.execution_finished=l.readBool():l.skip(b);break;case 3:b==a.Type.I32?this.merge_type=l.readI32():l.skip(b);break;case 4:b==a.Type.BOOL?this.sharded=l.readBool():l.skip(b);break;case 5:if(b==a.Type.LIST){this.row_desc=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=new m.TColumnType,k.read(l),this.row_desc.push(k)}l.readListEnd()}else l.skip(b);break;case 6:b==a.Type.I32?this.node_id=l.readI32():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TStepResult"),this.serialized_rows!==null&&this.serialized_rows!==void 0&&(l.writeFieldBegin("serialized_rows",a.Type.STRUCT,1),this.serialized_rows.write(l),l.writeFieldEnd()),this.execution_finished!==null&&this.execution_finished!==void 0&&(l.writeFieldBegin("execution_finished",a.Type.BOOL,2),l.writeBool(this.execution_finished),l.writeFieldEnd()),this.merge_type!==null&&this.merge_type!==void 0&&(l.writeFieldBegin("merge_type",a.Type.I32,3),l.writeI32(this.merge_type),l.writeFieldEnd()),this.sharded!==null&&this.sharded!==void 0&&(l.writeFieldBegin("sharded",a.Type.BOOL,4),l.writeBool(this.sharded),l.writeFieldEnd()),this.row_desc!==null&&this.row_desc!==void 0){l.writeFieldBegin("row_desc",a.Type.LIST,5),l.writeListBegin(a.Type.STRUCT,this.row_desc.length);for(let T in this.row_desc)this.row_desc.hasOwnProperty(T)&&(T=this.row_desc[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}this.node_id!==null&&this.node_id!==void 0&&(l.writeFieldBegin("node_id",a.Type.I32,6),l.writeI32(this.node_id),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TRowSet=class{constructor(l){this.row_desc=null,this.rows=null,this.columns=null,this.is_columnar=null,l&&(l.row_desc!==void 0&&l.row_desc!==null&&(this.row_desc=a.copyList(l.row_desc,[m.TColumnType])),l.rows!==void 0&&l.rows!==null&&(this.rows=a.copyList(l.rows,[m.TRow])),l.columns!==void 0&&l.columns!==null&&(this.columns=a.copyList(l.columns,[m.TColumn])),l.is_columnar!==void 0&&l.is_columnar!==null&&(this.is_columnar=l.is_columnar))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:if(b==a.Type.LIST){this.row_desc=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=new m.TColumnType,k.read(l),this.row_desc.push(k)}l.readListEnd()}else l.skip(b);break;case 2:if(b==a.Type.LIST){this.rows=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=new m.TRow,k.read(l),this.rows.push(k)}l.readListEnd()}else l.skip(b);break;case 3:if(b==a.Type.LIST){this.columns=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=new m.TColumn,k.read(l),this.columns.push(k)}l.readListEnd()}else l.skip(b);break;case 4:b==a.Type.BOOL?this.is_columnar=l.readBool():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TRowSet"),this.row_desc!==null&&this.row_desc!==void 0){l.writeFieldBegin("row_desc",a.Type.LIST,1),l.writeListBegin(a.Type.STRUCT,this.row_desc.length);for(let T in this.row_desc)this.row_desc.hasOwnProperty(T)&&(T=this.row_desc[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}if(this.rows!==null&&this.rows!==void 0){l.writeFieldBegin("rows",a.Type.LIST,2),l.writeListBegin(a.Type.STRUCT,this.rows.length);for(let T in this.rows)this.rows.hasOwnProperty(T)&&(T=this.rows[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}if(this.columns!==null&&this.columns!==void 0){l.writeFieldBegin("columns",a.Type.LIST,3),l.writeListBegin(a.Type.STRUCT,this.columns.length);for(let T in this.columns)this.columns.hasOwnProperty(T)&&(T=this.columns[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}this.is_columnar!==null&&this.is_columnar!==void 0&&(l.writeFieldBegin("is_columnar",a.Type.BOOL,4),l.writeBool(this.is_columnar),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TQueryResult=class{constructor(l){this.row_set=null,this.execution_time_ms=null,this.total_time_ms=null,this.nonce=null,this.debug=null,this.success=!0,this.query_type=0,l&&(l.row_set!==void 0&&l.row_set!==null&&(this.row_set=new m.TRowSet(l.row_set)),l.execution_time_ms!==void 0&&l.execution_time_ms!==null&&(this.execution_time_ms=l.execution_time_ms),l.total_time_ms!==void 0&&l.total_time_ms!==null&&(this.total_time_ms=l.total_time_ms),l.nonce!==void 0&&l.nonce!==null&&(this.nonce=l.nonce),l.debug!==void 0&&l.debug!==null&&(this.debug=l.debug),l.success!==void 0&&l.success!==null&&(this.success=l.success),l.query_type!==void 0&&l.query_type!==null&&(this.query_type=l.query_type))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRUCT?(this.row_set=new m.TRowSet,this.row_set.read(l)):l.skip(b);break;case 2:b==a.Type.I64?this.execution_time_ms=l.readI64():l.skip(b);break;case 3:b==a.Type.I64?this.total_time_ms=l.readI64():l.skip(b);break;case 4:b==a.Type.STRING?this.nonce=l.readString():l.skip(b);break;case 5:b==a.Type.STRING?this.debug=l.readString():l.skip(b);break;case 6:b==a.Type.BOOL?this.success=l.readBool():l.skip(b);break;case 7:b==a.Type.I32?this.query_type=l.readI32():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TQueryResult"),this.row_set!==null&&this.row_set!==void 0&&(l.writeFieldBegin("row_set",a.Type.STRUCT,1),this.row_set.write(l),l.writeFieldEnd()),this.execution_time_ms!==null&&this.execution_time_ms!==void 0&&(l.writeFieldBegin("execution_time_ms",a.Type.I64,2),l.writeI64(this.execution_time_ms),l.writeFieldEnd()),this.total_time_ms!==null&&this.total_time_ms!==void 0&&(l.writeFieldBegin("total_time_ms",a.Type.I64,3),l.writeI64(this.total_time_ms),l.writeFieldEnd()),this.nonce!==null&&this.nonce!==void 0&&(l.writeFieldBegin("nonce",a.Type.STRING,4),l.writeString(this.nonce),l.writeFieldEnd()),this.debug!==null&&this.debug!==void 0&&(l.writeFieldBegin("debug",a.Type.STRING,5),l.writeString(this.debug),l.writeFieldEnd()),this.success!==null&&this.success!==void 0&&(l.writeFieldBegin("success",a.Type.BOOL,6),l.writeBool(this.success),l.writeFieldEnd()),this.query_type!==null&&this.query_type!==void 0&&(l.writeFieldBegin("query_type",a.Type.I32,7),l.writeI32(this.query_type),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDataFrame=class{constructor(l){this.sm_handle=null,this.sm_size=null,this.df_handle=null,this.df_size=null,this.execution_time_ms=null,this.arrow_conversion_time_ms=null,this.df_buffer=null,l&&(l.sm_handle!==void 0&&l.sm_handle!==null&&(this.sm_handle=l.sm_handle),l.sm_size!==void 0&&l.sm_size!==null&&(this.sm_size=l.sm_size),l.df_handle!==void 0&&l.df_handle!==null&&(this.df_handle=l.df_handle),l.df_size!==void 0&&l.df_size!==null&&(this.df_size=l.df_size),l.execution_time_ms!==void 0&&l.execution_time_ms!==null&&(this.execution_time_ms=l.execution_time_ms),l.arrow_conversion_time_ms!==void 0&&l.arrow_conversion_time_ms!==null&&(this.arrow_conversion_time_ms=l.arrow_conversion_time_ms),l.df_buffer!==void 0&&l.df_buffer!==null&&(this.df_buffer=l.df_buffer))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.sm_handle=l.readBinary():l.skip(b);break;case 2:b==a.Type.I64?this.sm_size=l.readI64():l.skip(b);break;case 3:b==a.Type.STRING?this.df_handle=l.readBinary():l.skip(b);break;case 4:b==a.Type.I64?this.df_size=l.readI64():l.skip(b);break;case 5:b==a.Type.I64?this.execution_time_ms=l.readI64():l.skip(b);break;case 6:b==a.Type.I64?this.arrow_conversion_time_ms=l.readI64():l.skip(b);break;case 7:b==a.Type.STRING?this.df_buffer=l.readBinary():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TDataFrame"),this.sm_handle!==null&&this.sm_handle!==void 0&&(l.writeFieldBegin("sm_handle",a.Type.STRING,1),l.writeBinary(this.sm_handle),l.writeFieldEnd()),this.sm_size!==null&&this.sm_size!==void 0&&(l.writeFieldBegin("sm_size",a.Type.I64,2),l.writeI64(this.sm_size),l.writeFieldEnd()),this.df_handle!==null&&this.df_handle!==void 0&&(l.writeFieldBegin("df_handle",a.Type.STRING,3),l.writeBinary(this.df_handle),l.writeFieldEnd()),this.df_size!==null&&this.df_size!==void 0&&(l.writeFieldBegin("df_size",a.Type.I64,4),l.writeI64(this.df_size),l.writeFieldEnd()),this.execution_time_ms!==null&&this.execution_time_ms!==void 0&&(l.writeFieldBegin("execution_time_ms",a.Type.I64,5),l.writeI64(this.execution_time_ms),l.writeFieldEnd()),this.arrow_conversion_time_ms!==null&&this.arrow_conversion_time_ms!==void 0&&(l.writeFieldBegin("arrow_conversion_time_ms",a.Type.I64,6),l.writeI64(this.arrow_conversion_time_ms),l.writeFieldEnd()),this.df_buffer!==null&&this.df_buffer!==void 0&&(l.writeFieldBegin("df_buffer",a.Type.STRING,7),l.writeBinary(this.df_buffer),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDBInfo=class{constructor(l){this.db_name=null,this.db_owner=null,l&&(l.db_name!==void 0&&l.db_name!==null&&(this.db_name=l.db_name),l.db_owner!==void 0&&l.db_owner!==null&&(this.db_owner=l.db_owner))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.db_name=l.readString():l.skip(b);break;case 2:b==a.Type.STRING?this.db_owner=l.readString():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TDBInfo"),this.db_name!==null&&this.db_name!==void 0&&(l.writeFieldBegin("db_name",a.Type.STRING,1),l.writeString(this.db_name),l.writeFieldEnd()),this.db_owner!==null&&this.db_owner!==void 0&&(l.writeFieldBegin("db_owner",a.Type.STRING,2),l.writeString(this.db_owner),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDBException=class extends a.TException{constructor(l){super(l),this.name="TDBException",this.error_msg=null,l&&l.error_msg!==void 0&&l.error_msg!==null&&(this.error_msg=l.error_msg)}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.error_msg=l.readString():l.skip(b);break;case 0:l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TDBException"),this.error_msg!==null&&this.error_msg!==void 0&&(l.writeFieldBegin("error_msg",a.Type.STRING,1),l.writeString(this.error_msg),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TCopyParams=class{constructor(l){this.delimiter=null,this.null_str=null,this.has_header=0,this.quoted=null,this.quote=null,this.escape=null,this.line_delim=null,this.array_delim=null,this.array_begin=null,this.array_end=null,this.threads=null,this.source_type=0,this.s3_access_key=null,this.s3_secret_key=null,this.s3_region=null,this.geo_coords_encoding=6,this.geo_coords_comp_param=32,this.geo_coords_type=18,this.geo_coords_srid=4326,this.sanitize_column_names=!0,this.geo_layer_name=null,this.s3_endpoint=null,this.geo_assign_render_groups=!0,this.geo_explode_collections=!1,this.source_srid=0,this.s3_session_token=null,this.raster_point_type=1,this.raster_import_bands=null,this.raster_scanlines_per_thread=null,this.raster_point_transform=1,this.raster_point_compute_angle=!1,this.raster_import_dimensions=null,this.odbc_dsn=null,this.odbc_connection_string=null,this.odbc_sql_select=null,this.odbc_sql_order_by=null,this.odbc_username=null,this.odbc_password=null,this.odbc_credential_string=null,this.add_metadata_columns=null,l&&(l.delimiter!==void 0&&l.delimiter!==null&&(this.delimiter=l.delimiter),l.null_str!==void 0&&l.null_str!==null&&(this.null_str=l.null_str),l.has_header!==void 0&&l.has_header!==null&&(this.has_header=l.has_header),l.quoted!==void 0&&l.quoted!==null&&(this.quoted=l.quoted),l.quote!==void 0&&l.quote!==null&&(this.quote=l.quote),l.escape!==void 0&&l.escape!==null&&(this.escape=l.escape),l.line_delim!==void 0&&l.line_delim!==null&&(this.line_delim=l.line_delim),l.array_delim!==void 0&&l.array_delim!==null&&(this.array_delim=l.array_delim),l.array_begin!==void 0&&l.array_begin!==null&&(this.array_begin=l.array_begin),l.array_end!==void 0&&l.array_end!==null&&(this.array_end=l.array_end),l.threads!==void 0&&l.threads!==null&&(this.threads=l.threads),l.source_type!==void 0&&l.source_type!==null&&(this.source_type=l.source_type),l.s3_access_key!==void 0&&l.s3_access_key!==null&&(this.s3_access_key=l.s3_access_key),l.s3_secret_key!==void 0&&l.s3_secret_key!==null&&(this.s3_secret_key=l.s3_secret_key),l.s3_region!==void 0&&l.s3_region!==null&&(this.s3_region=l.s3_region),l.geo_coords_encoding!==void 0&&l.geo_coords_encoding!==null&&(this.geo_coords_encoding=l.geo_coords_encoding),l.geo_coords_comp_param!==void 0&&l.geo_coords_comp_param!==null&&(this.geo_coords_comp_param=l.geo_coords_comp_param),l.geo_coords_type!==void 0&&l.geo_coords_type!==null&&(this.geo_coords_type=l.geo_coords_type),l.geo_coords_srid!==void 0&&l.geo_coords_srid!==null&&(this.geo_coords_srid=l.geo_coords_srid),l.sanitize_column_names!==void 0&&l.sanitize_column_names!==null&&(this.sanitize_column_names=l.sanitize_column_names),l.geo_layer_name!==void 0&&l.geo_layer_name!==null&&(this.geo_layer_name=l.geo_layer_name),l.s3_endpoint!==void 0&&l.s3_endpoint!==null&&(this.s3_endpoint=l.s3_endpoint),l.geo_assign_render_groups!==void 0&&l.geo_assign_render_groups!==null&&(this.geo_assign_render_groups=l.geo_assign_render_groups),l.geo_explode_collections!==void 0&&l.geo_explode_collections!==null&&(this.geo_explode_collections=l.geo_explode_collections),l.source_srid!==void 0&&l.source_srid!==null&&(this.source_srid=l.source_srid),l.s3_session_token!==void 0&&l.s3_session_token!==null&&(this.s3_session_token=l.s3_session_token),l.raster_point_type!==void 0&&l.raster_point_type!==null&&(this.raster_point_type=l.raster_point_type),l.raster_import_bands!==void 0&&l.raster_import_bands!==null&&(this.raster_import_bands=l.raster_import_bands),l.raster_scanlines_per_thread!==void 0&&l.raster_scanlines_per_thread!==null&&(this.raster_scanlines_per_thread=l.raster_scanlines_per_thread),l.raster_point_transform!==void 0&&l.raster_point_transform!==null&&(this.raster_point_transform=l.raster_point_transform),l.raster_point_compute_angle!==void 0&&l.raster_point_compute_angle!==null&&(this.raster_point_compute_angle=l.raster_point_compute_angle),l.raster_import_dimensions!==void 0&&l.raster_import_dimensions!==null&&(this.raster_import_dimensions=l.raster_import_dimensions),l.odbc_dsn!==void 0&&l.odbc_dsn!==null&&(this.odbc_dsn=l.odbc_dsn),l.odbc_connection_string!==void 0&&l.odbc_connection_string!==null&&(this.odbc_connection_string=l.odbc_connection_string),l.odbc_sql_select!==void 0&&l.odbc_sql_select!==null&&(this.odbc_sql_select=l.odbc_sql_select),l.odbc_sql_order_by!==void 0&&l.odbc_sql_order_by!==null&&(this.odbc_sql_order_by=l.odbc_sql_order_by),l.odbc_username!==void 0&&l.odbc_username!==null&&(this.odbc_username=l.odbc_username),l.odbc_password!==void 0&&l.odbc_password!==null&&(this.odbc_password=l.odbc_password),l.odbc_credential_string!==void 0&&l.odbc_credential_string!==null&&(this.odbc_credential_string=l.odbc_credential_string),l.add_metadata_columns!==void 0&&l.add_metadata_columns!==null&&(this.add_metadata_columns=l.add_metadata_columns))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.delimiter=l.readString():l.skip(b);break;case 2:b==a.Type.STRING?this.null_str=l.readString():l.skip(b);break;case 3:b==a.Type.I32?this.has_header=l.readI32():l.skip(b);break;case 4:b==a.Type.BOOL?this.quoted=l.readBool():l.skip(b);break;case 5:b==a.Type.STRING?this.quote=l.readString():l.skip(b);break;case 6:b==a.Type.STRING?this.escape=l.readString():l.skip(b);break;case 7:b==a.Type.STRING?this.line_delim=l.readString():l.skip(b);break;case 8:b==a.Type.STRING?this.array_delim=l.readString():l.skip(b);break;case 9:b==a.Type.STRING?this.array_begin=l.readString():l.skip(b);break;case 10:b==a.Type.STRING?this.array_end=l.readString():l.skip(b);break;case 11:b==a.Type.I32?this.threads=l.readI32():l.skip(b);break;case 12:b==a.Type.I32?this.source_type=l.readI32():l.skip(b);break;case 13:b==a.Type.STRING?this.s3_access_key=l.readString():l.skip(b);break;case 14:b==a.Type.STRING?this.s3_secret_key=l.readString():l.skip(b);break;case 15:b==a.Type.STRING?this.s3_region=l.readString():l.skip(b);break;case 16:b==a.Type.I32?this.geo_coords_encoding=l.readI32():l.skip(b);break;case 17:b==a.Type.I32?this.geo_coords_comp_param=l.readI32():l.skip(b);break;case 18:b==a.Type.I32?this.geo_coords_type=l.readI32():l.skip(b);break;case 19:b==a.Type.I32?this.geo_coords_srid=l.readI32():l.skip(b);break;case 20:b==a.Type.BOOL?this.sanitize_column_names=l.readBool():l.skip(b);break;case 21:b==a.Type.STRING?this.geo_layer_name=l.readString():l.skip(b);break;case 22:b==a.Type.STRING?this.s3_endpoint=l.readString():l.skip(b);break;case 23:b==a.Type.BOOL?this.geo_assign_render_groups=l.readBool():l.skip(b);break;case 24:b==a.Type.BOOL?this.geo_explode_collections=l.readBool():l.skip(b);break;case 25:b==a.Type.I32?this.source_srid=l.readI32():l.skip(b);break;case 26:b==a.Type.STRING?this.s3_session_token=l.readString():l.skip(b);break;case 27:b==a.Type.I32?this.raster_point_type=l.readI32():l.skip(b);break;case 28:b==a.Type.STRING?this.raster_import_bands=l.readString():l.skip(b);break;case 29:b==a.Type.I32?this.raster_scanlines_per_thread=l.readI32():l.skip(b);break;case 30:b==a.Type.I32?this.raster_point_transform=l.readI32():l.skip(b);break;case 31:b==a.Type.BOOL?this.raster_point_compute_angle=l.readBool():l.skip(b);break;case 32:b==a.Type.STRING?this.raster_import_dimensions=l.readString():l.skip(b);break;case 33:b==a.Type.STRING?this.odbc_dsn=l.readString():l.skip(b);break;case 34:b==a.Type.STRING?this.odbc_connection_string=l.readString():l.skip(b);break;case 35:b==a.Type.STRING?this.odbc_sql_select=l.readString():l.skip(b);break;case 36:b==a.Type.STRING?this.odbc_sql_order_by=l.readString():l.skip(b);break;case 37:b==a.Type.STRING?this.odbc_username=l.readString():l.skip(b);break;case 38:b==a.Type.STRING?this.odbc_password=l.readString():l.skip(b);break;case 39:b==a.Type.STRING?this.odbc_credential_string=l.readString():l.skip(b);break;case 40:b==a.Type.STRING?this.add_metadata_columns=l.readString():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TCopyParams"),this.delimiter!==null&&this.delimiter!==void 0&&(l.writeFieldBegin("delimiter",a.Type.STRING,1),l.writeString(this.delimiter),l.writeFieldEnd()),this.null_str!==null&&this.null_str!==void 0&&(l.writeFieldBegin("null_str",a.Type.STRING,2),l.writeString(this.null_str),l.writeFieldEnd()),this.has_header!==null&&this.has_header!==void 0&&(l.writeFieldBegin("has_header",a.Type.I32,3),l.writeI32(this.has_header),l.writeFieldEnd()),this.quoted!==null&&this.quoted!==void 0&&(l.writeFieldBegin("quoted",a.Type.BOOL,4),l.writeBool(this.quoted),l.writeFieldEnd()),this.quote!==null&&this.quote!==void 0&&(l.writeFieldBegin("quote",a.Type.STRING,5),l.writeString(this.quote),l.writeFieldEnd()),this.escape!==null&&this.escape!==void 0&&(l.writeFieldBegin("escape",a.Type.STRING,6),l.writeString(this.escape),l.writeFieldEnd()),this.line_delim!==null&&this.line_delim!==void 0&&(l.writeFieldBegin("line_delim",a.Type.STRING,7),l.writeString(this.line_delim),l.writeFieldEnd()),this.array_delim!==null&&this.array_delim!==void 0&&(l.writeFieldBegin("array_delim",a.Type.STRING,8),l.writeString(this.array_delim),l.writeFieldEnd()),this.array_begin!==null&&this.array_begin!==void 0&&(l.writeFieldBegin("array_begin",a.Type.STRING,9),l.writeString(this.array_begin),l.writeFieldEnd()),this.array_end!==null&&this.array_end!==void 0&&(l.writeFieldBegin("array_end",a.Type.STRING,10),l.writeString(this.array_end),l.writeFieldEnd()),this.threads!==null&&this.threads!==void 0&&(l.writeFieldBegin("threads",a.Type.I32,11),l.writeI32(this.threads),l.writeFieldEnd()),this.source_type!==null&&this.source_type!==void 0&&(l.writeFieldBegin("source_type",a.Type.I32,12),l.writeI32(this.source_type),l.writeFieldEnd()),this.s3_access_key!==null&&this.s3_access_key!==void 0&&(l.writeFieldBegin("s3_access_key",a.Type.STRING,13),l.writeString(this.s3_access_key),l.writeFieldEnd()),this.s3_secret_key!==null&&this.s3_secret_key!==void 0&&(l.writeFieldBegin("s3_secret_key",a.Type.STRING,14),l.writeString(this.s3_secret_key),l.writeFieldEnd()),this.s3_region!==null&&this.s3_region!==void 0&&(l.writeFieldBegin("s3_region",a.Type.STRING,15),l.writeString(this.s3_region),l.writeFieldEnd()),this.geo_coords_encoding!==null&&this.geo_coords_encoding!==void 0&&(l.writeFieldBegin("geo_coords_encoding",a.Type.I32,16),l.writeI32(this.geo_coords_encoding),l.writeFieldEnd()),this.geo_coords_comp_param!==null&&this.geo_coords_comp_param!==void 0&&(l.writeFieldBegin("geo_coords_comp_param",a.Type.I32,17),l.writeI32(this.geo_coords_comp_param),l.writeFieldEnd()),this.geo_coords_type!==null&&this.geo_coords_type!==void 0&&(l.writeFieldBegin("geo_coords_type",a.Type.I32,18),l.writeI32(this.geo_coords_type),l.writeFieldEnd()),this.geo_coords_srid!==null&&this.geo_coords_srid!==void 0&&(l.writeFieldBegin("geo_coords_srid",a.Type.I32,19),l.writeI32(this.geo_coords_srid),l.writeFieldEnd()),this.sanitize_column_names!==null&&this.sanitize_column_names!==void 0&&(l.writeFieldBegin("sanitize_column_names",a.Type.BOOL,20),l.writeBool(this.sanitize_column_names),l.writeFieldEnd()),this.geo_layer_name!==null&&this.geo_layer_name!==void 0&&(l.writeFieldBegin("geo_layer_name",a.Type.STRING,21),l.writeString(this.geo_layer_name),l.writeFieldEnd()),this.s3_endpoint!==null&&this.s3_endpoint!==void 0&&(l.writeFieldBegin("s3_endpoint",a.Type.STRING,22),l.writeString(this.s3_endpoint),l.writeFieldEnd()),this.geo_assign_render_groups!==null&&this.geo_assign_render_groups!==void 0&&(l.writeFieldBegin("geo_assign_render_groups",a.Type.BOOL,23),l.writeBool(this.geo_assign_render_groups),l.writeFieldEnd()),this.geo_explode_collections!==null&&this.geo_explode_collections!==void 0&&(l.writeFieldBegin("geo_explode_collections",a.Type.BOOL,24),l.writeBool(this.geo_explode_collections),l.writeFieldEnd()),this.source_srid!==null&&this.source_srid!==void 0&&(l.writeFieldBegin("source_srid",a.Type.I32,25),l.writeI32(this.source_srid),l.writeFieldEnd()),this.s3_session_token!==null&&this.s3_session_token!==void 0&&(l.writeFieldBegin("s3_session_token",a.Type.STRING,26),l.writeString(this.s3_session_token),l.writeFieldEnd()),this.raster_point_type!==null&&this.raster_point_type!==void 0&&(l.writeFieldBegin("raster_point_type",a.Type.I32,27),l.writeI32(this.raster_point_type),l.writeFieldEnd()),this.raster_import_bands!==null&&this.raster_import_bands!==void 0&&(l.writeFieldBegin("raster_import_bands",a.Type.STRING,28),l.writeString(this.raster_import_bands),l.writeFieldEnd()),this.raster_scanlines_per_thread!==null&&this.raster_scanlines_per_thread!==void 0&&(l.writeFieldBegin("raster_scanlines_per_thread",a.Type.I32,29),l.writeI32(this.raster_scanlines_per_thread),l.writeFieldEnd()),this.raster_point_transform!==null&&this.raster_point_transform!==void 0&&(l.writeFieldBegin("raster_point_transform",a.Type.I32,30),l.writeI32(this.raster_point_transform),l.writeFieldEnd()),this.raster_point_compute_angle!==null&&this.raster_point_compute_angle!==void 0&&(l.writeFieldBegin("raster_point_compute_angle",a.Type.BOOL,31),l.writeBool(this.raster_point_compute_angle),l.writeFieldEnd()),this.raster_import_dimensions!==null&&this.raster_import_dimensions!==void 0&&(l.writeFieldBegin("raster_import_dimensions",a.Type.STRING,32),l.writeString(this.raster_import_dimensions),l.writeFieldEnd()),this.odbc_dsn!==null&&this.odbc_dsn!==void 0&&(l.writeFieldBegin("odbc_dsn",a.Type.STRING,33),l.writeString(this.odbc_dsn),l.writeFieldEnd()),this.odbc_connection_string!==null&&this.odbc_connection_string!==void 0&&(l.writeFieldBegin("odbc_connection_string",a.Type.STRING,34),l.writeString(this.odbc_connection_string),l.writeFieldEnd()),this.odbc_sql_select!==null&&this.odbc_sql_select!==void 0&&(l.writeFieldBegin("odbc_sql_select",a.Type.STRING,35),l.writeString(this.odbc_sql_select),l.writeFieldEnd()),this.odbc_sql_order_by!==null&&this.odbc_sql_order_by!==void 0&&(l.writeFieldBegin("odbc_sql_order_by",a.Type.STRING,36),l.writeString(this.odbc_sql_order_by),l.writeFieldEnd()),this.odbc_username!==null&&this.odbc_username!==void 0&&(l.writeFieldBegin("odbc_username",a.Type.STRING,37),l.writeString(this.odbc_username),l.writeFieldEnd()),this.odbc_password!==null&&this.odbc_password!==void 0&&(l.writeFieldBegin("odbc_password",a.Type.STRING,38),l.writeString(this.odbc_password),l.writeFieldEnd()),this.odbc_credential_string!==null&&this.odbc_credential_string!==void 0&&(l.writeFieldBegin("odbc_credential_string",a.Type.STRING,39),l.writeString(this.odbc_credential_string),l.writeFieldEnd()),this.add_metadata_columns!==null&&this.add_metadata_columns!==void 0&&(l.writeFieldBegin("add_metadata_columns",a.Type.STRING,40),l.writeString(this.add_metadata_columns),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TCreateParams=class{constructor(l){this.is_replicated=null,l&&l.is_replicated!==void 0&&l.is_replicated!==null&&(this.is_replicated=l.is_replicated)}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.BOOL?this.is_replicated=l.readBool():l.skip(b);break;case 0:l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TCreateParams"),this.is_replicated!==null&&this.is_replicated!==void 0&&(l.writeFieldBegin("is_replicated",a.Type.BOOL,1),l.writeBool(this.is_replicated),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDetectResult=class{constructor(l){this.row_set=null,this.copy_params=null,l&&(l.row_set!==void 0&&l.row_set!==null&&(this.row_set=new m.TRowSet(l.row_set)),l.copy_params!==void 0&&l.copy_params!==null&&(this.copy_params=new m.TCopyParams(l.copy_params)))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRUCT?(this.row_set=new m.TRowSet,this.row_set.read(l)):l.skip(b);break;case 2:b==a.Type.STRUCT?(this.copy_params=new m.TCopyParams,this.copy_params.read(l)):l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TDetectResult"),this.row_set!==null&&this.row_set!==void 0&&(l.writeFieldBegin("row_set",a.Type.STRUCT,1),this.row_set.write(l),l.writeFieldEnd()),this.copy_params!==null&&this.copy_params!==void 0&&(l.writeFieldBegin("copy_params",a.Type.STRUCT,2),this.copy_params.write(l),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TImportStatus=class{constructor(l){this.elapsed=null,this.rows_completed=null,this.rows_estimated=null,this.rows_rejected=null,l&&(l.elapsed!==void 0&&l.elapsed!==null&&(this.elapsed=l.elapsed),l.rows_completed!==void 0&&l.rows_completed!==null&&(this.rows_completed=l.rows_completed),l.rows_estimated!==void 0&&l.rows_estimated!==null&&(this.rows_estimated=l.rows_estimated),l.rows_rejected!==void 0&&l.rows_rejected!==null&&(this.rows_rejected=l.rows_rejected))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I64?this.elapsed=l.readI64():l.skip(b);break;case 2:b==a.Type.I64?this.rows_completed=l.readI64():l.skip(b);break;case 3:b==a.Type.I64?this.rows_estimated=l.readI64():l.skip(b);break;case 4:b==a.Type.I64?this.rows_rejected=l.readI64():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TImportStatus"),this.elapsed!==null&&this.elapsed!==void 0&&(l.writeFieldBegin("elapsed",a.Type.I64,1),l.writeI64(this.elapsed),l.writeFieldEnd()),this.rows_completed!==null&&this.rows_completed!==void 0&&(l.writeFieldBegin("rows_completed",a.Type.I64,2),l.writeI64(this.rows_completed),l.writeFieldEnd()),this.rows_estimated!==null&&this.rows_estimated!==void 0&&(l.writeFieldBegin("rows_estimated",a.Type.I64,3),l.writeI64(this.rows_estimated),l.writeFieldEnd()),this.rows_rejected!==null&&this.rows_rejected!==void 0&&(l.writeFieldBegin("rows_rejected",a.Type.I64,4),l.writeI64(this.rows_rejected),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TFrontendView=class{constructor(l){this.view_name=null,this.view_state=null,this.image_hash=null,this.update_time=null,this.view_metadata=null,l&&(l.view_name!==void 0&&l.view_name!==null&&(this.view_name=l.view_name),l.view_state!==void 0&&l.view_state!==null&&(this.view_state=l.view_state),l.image_hash!==void 0&&l.image_hash!==null&&(this.image_hash=l.image_hash),l.update_time!==void 0&&l.update_time!==null&&(this.update_time=l.update_time),l.view_metadata!==void 0&&l.view_metadata!==null&&(this.view_metadata=l.view_metadata))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.view_name=l.readString():l.skip(b);break;case 2:b==a.Type.STRING?this.view_state=l.readString():l.skip(b);break;case 3:b==a.Type.STRING?this.image_hash=l.readString():l.skip(b);break;case 4:b==a.Type.STRING?this.update_time=l.readString():l.skip(b);break;case 5:b==a.Type.STRING?this.view_metadata=l.readString():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TFrontendView"),this.view_name!==null&&this.view_name!==void 0&&(l.writeFieldBegin("view_name",a.Type.STRING,1),l.writeString(this.view_name),l.writeFieldEnd()),this.view_state!==null&&this.view_state!==void 0&&(l.writeFieldBegin("view_state",a.Type.STRING,2),l.writeString(this.view_state),l.writeFieldEnd()),this.image_hash!==null&&this.image_hash!==void 0&&(l.writeFieldBegin("image_hash",a.Type.STRING,3),l.writeString(this.image_hash),l.writeFieldEnd()),this.update_time!==null&&this.update_time!==void 0&&(l.writeFieldBegin("update_time",a.Type.STRING,4),l.writeString(this.update_time),l.writeFieldEnd()),this.view_metadata!==null&&this.view_metadata!==void 0&&(l.writeFieldBegin("view_metadata",a.Type.STRING,5),l.writeString(this.view_metadata),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TServerStatus=class{constructor(l){this.read_only=null,this.version=null,this.rendering_enabled=null,this.start_time=null,this.edition=null,this.host_name=null,this.poly_rendering_enabled=null,this.role=null,this.renderer_status_json=null,l&&(l.read_only!==void 0&&l.read_only!==null&&(this.read_only=l.read_only),l.version!==void 0&&l.version!==null&&(this.version=l.version),l.rendering_enabled!==void 0&&l.rendering_enabled!==null&&(this.rendering_enabled=l.rendering_enabled),l.start_time!==void 0&&l.start_time!==null&&(this.start_time=l.start_time),l.edition!==void 0&&l.edition!==null&&(this.edition=l.edition),l.host_name!==void 0&&l.host_name!==null&&(this.host_name=l.host_name),l.poly_rendering_enabled!==void 0&&l.poly_rendering_enabled!==null&&(this.poly_rendering_enabled=l.poly_rendering_enabled),l.role!==void 0&&l.role!==null&&(this.role=l.role),l.renderer_status_json!==void 0&&l.renderer_status_json!==null&&(this.renderer_status_json=l.renderer_status_json))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.BOOL?this.read_only=l.readBool():l.skip(b);break;case 2:b==a.Type.STRING?this.version=l.readString():l.skip(b);break;case 3:b==a.Type.BOOL?this.rendering_enabled=l.readBool():l.skip(b);break;case 4:b==a.Type.I64?this.start_time=l.readI64():l.skip(b);break;case 5:b==a.Type.STRING?this.edition=l.readString():l.skip(b);break;case 6:b==a.Type.STRING?this.host_name=l.readString():l.skip(b);break;case 7:b==a.Type.BOOL?this.poly_rendering_enabled=l.readBool():l.skip(b);break;case 8:b==a.Type.I32?this.role=l.readI32():l.skip(b);break;case 9:b==a.Type.STRING?this.renderer_status_json=l.readString():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TServerStatus"),this.read_only!==null&&this.read_only!==void 0&&(l.writeFieldBegin("read_only",a.Type.BOOL,1),l.writeBool(this.read_only),l.writeFieldEnd()),this.version!==null&&this.version!==void 0&&(l.writeFieldBegin("version",a.Type.STRING,2),l.writeString(this.version),l.writeFieldEnd()),this.rendering_enabled!==null&&this.rendering_enabled!==void 0&&(l.writeFieldBegin("rendering_enabled",a.Type.BOOL,3),l.writeBool(this.rendering_enabled),l.writeFieldEnd()),this.start_time!==null&&this.start_time!==void 0&&(l.writeFieldBegin("start_time",a.Type.I64,4),l.writeI64(this.start_time),l.writeFieldEnd()),this.edition!==null&&this.edition!==void 0&&(l.writeFieldBegin("edition",a.Type.STRING,5),l.writeString(this.edition),l.writeFieldEnd()),this.host_name!==null&&this.host_name!==void 0&&(l.writeFieldBegin("host_name",a.Type.STRING,6),l.writeString(this.host_name),l.writeFieldEnd()),this.poly_rendering_enabled!==null&&this.poly_rendering_enabled!==void 0&&(l.writeFieldBegin("poly_rendering_enabled",a.Type.BOOL,7),l.writeBool(this.poly_rendering_enabled),l.writeFieldEnd()),this.role!==null&&this.role!==void 0&&(l.writeFieldBegin("role",a.Type.I32,8),l.writeI32(this.role),l.writeFieldEnd()),this.renderer_status_json!==null&&this.renderer_status_json!==void 0&&(l.writeFieldBegin("renderer_status_json",a.Type.STRING,9),l.writeString(this.renderer_status_json),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TPixel=class{constructor(l){this.x=null,this.y=null,l&&(l.x!==void 0&&l.x!==null&&(this.x=l.x),l.y!==void 0&&l.y!==null&&(this.y=l.y))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I64?this.x=l.readI64():l.skip(b);break;case 2:b==a.Type.I64?this.y=l.readI64():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TPixel"),this.x!==null&&this.x!==void 0&&(l.writeFieldBegin("x",a.Type.I64,1),l.writeI64(this.x),l.writeFieldEnd()),this.y!==null&&this.y!==void 0&&(l.writeFieldBegin("y",a.Type.I64,2),l.writeI64(this.y),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TPixelTableRowResult=class{constructor(l){this.pixel=null,this.vega_table_name=null,this.table_id=null,this.row_id=null,this.row_set=null,this.nonce=null,l&&(l.pixel!==void 0&&l.pixel!==null&&(this.pixel=new m.TPixel(l.pixel)),l.vega_table_name!==void 0&&l.vega_table_name!==null&&(this.vega_table_name=l.vega_table_name),l.table_id!==void 0&&l.table_id!==null&&(this.table_id=a.copyList(l.table_id,[null])),l.row_id!==void 0&&l.row_id!==null&&(this.row_id=a.copyList(l.row_id,[null])),l.row_set!==void 0&&l.row_set!==null&&(this.row_set=new m.TRowSet(l.row_set)),l.nonce!==void 0&&l.nonce!==null&&(this.nonce=l.nonce))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRUCT?(this.pixel=new m.TPixel,this.pixel.read(l)):l.skip(b);break;case 2:b==a.Type.STRING?this.vega_table_name=l.readString():l.skip(b);break;case 3:if(b==a.Type.LIST){this.table_id=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=l.readI64(),this.table_id.push(k)}l.readListEnd()}else l.skip(b);break;case 4:if(b==a.Type.LIST){this.row_id=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=l.readI64(),this.row_id.push(k)}l.readListEnd()}else l.skip(b);break;case 5:b==a.Type.STRUCT?(this.row_set=new m.TRowSet,this.row_set.read(l)):l.skip(b);break;case 6:b==a.Type.STRING?this.nonce=l.readString():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TPixelTableRowResult"),this.pixel!==null&&this.pixel!==void 0&&(l.writeFieldBegin("pixel",a.Type.STRUCT,1),this.pixel.write(l),l.writeFieldEnd()),this.vega_table_name!==null&&this.vega_table_name!==void 0&&(l.writeFieldBegin("vega_table_name",a.Type.STRING,2),l.writeString(this.vega_table_name),l.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0){l.writeFieldBegin("table_id",a.Type.LIST,3),l.writeListBegin(a.Type.I64,this.table_id.length);for(let T in this.table_id)this.table_id.hasOwnProperty(T)&&(T=this.table_id[T],l.writeI64(T));l.writeListEnd(),l.writeFieldEnd()}if(this.row_id!==null&&this.row_id!==void 0){l.writeFieldBegin("row_id",a.Type.LIST,4),l.writeListBegin(a.Type.I64,this.row_id.length);for(let T in this.row_id)this.row_id.hasOwnProperty(T)&&(T=this.row_id[T],l.writeI64(T));l.writeListEnd(),l.writeFieldEnd()}this.row_set!==null&&this.row_set!==void 0&&(l.writeFieldBegin("row_set",a.Type.STRUCT,5),this.row_set.write(l),l.writeFieldEnd()),this.nonce!==null&&this.nonce!==void 0&&(l.writeFieldBegin("nonce",a.Type.STRING,6),l.writeString(this.nonce),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TRenderResult=class{constructor(l){this.image=null,this.nonce=null,this.execution_time_ms=null,this.render_time_ms=null,this.total_time_ms=null,this.vega_metadata=null,l&&(l.image!==void 0&&l.image!==null&&(this.image=l.image),l.nonce!==void 0&&l.nonce!==null&&(this.nonce=l.nonce),l.execution_time_ms!==void 0&&l.execution_time_ms!==null&&(this.execution_time_ms=l.execution_time_ms),l.render_time_ms!==void 0&&l.render_time_ms!==null&&(this.render_time_ms=l.render_time_ms),l.total_time_ms!==void 0&&l.total_time_ms!==null&&(this.total_time_ms=l.total_time_ms),l.vega_metadata!==void 0&&l.vega_metadata!==null&&(this.vega_metadata=l.vega_metadata))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.image=l.readBinary():l.skip(b);break;case 2:b==a.Type.STRING?this.nonce=l.readString():l.skip(b);break;case 3:b==a.Type.I64?this.execution_time_ms=l.readI64():l.skip(b);break;case 4:b==a.Type.I64?this.render_time_ms=l.readI64():l.skip(b);break;case 5:b==a.Type.I64?this.total_time_ms=l.readI64():l.skip(b);break;case 6:b==a.Type.STRING?this.vega_metadata=l.readString():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TRenderResult"),this.image!==null&&this.image!==void 0&&(l.writeFieldBegin("image",a.Type.STRING,1),l.writeBinary(this.image),l.writeFieldEnd()),this.nonce!==null&&this.nonce!==void 0&&(l.writeFieldBegin("nonce",a.Type.STRING,2),l.writeString(this.nonce),l.writeFieldEnd()),this.execution_time_ms!==null&&this.execution_time_ms!==void 0&&(l.writeFieldBegin("execution_time_ms",a.Type.I64,3),l.writeI64(this.execution_time_ms),l.writeFieldEnd()),this.render_time_ms!==null&&this.render_time_ms!==void 0&&(l.writeFieldBegin("render_time_ms",a.Type.I64,4),l.writeI64(this.render_time_ms),l.writeFieldEnd()),this.total_time_ms!==null&&this.total_time_ms!==void 0&&(l.writeFieldBegin("total_time_ms",a.Type.I64,5),l.writeI64(this.total_time_ms),l.writeFieldEnd()),this.vega_metadata!==null&&this.vega_metadata!==void 0&&(l.writeFieldBegin("vega_metadata",a.Type.STRING,6),l.writeString(this.vega_metadata),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TGpuSpecification=class{constructor(l){this.num_sm=null,this.clock_frequency_kHz=null,this.memory=null,this.compute_capability_major=null,this.compute_capability_minor=null,l&&(l.num_sm!==void 0&&l.num_sm!==null&&(this.num_sm=l.num_sm),l.clock_frequency_kHz!==void 0&&l.clock_frequency_kHz!==null&&(this.clock_frequency_kHz=l.clock_frequency_kHz),l.memory!==void 0&&l.memory!==null&&(this.memory=l.memory),l.compute_capability_major!==void 0&&l.compute_capability_major!==null&&(this.compute_capability_major=l.compute_capability_major),l.compute_capability_minor!==void 0&&l.compute_capability_minor!==null&&(this.compute_capability_minor=l.compute_capability_minor))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I32?this.num_sm=l.readI32():l.skip(b);break;case 2:b==a.Type.I64?this.clock_frequency_kHz=l.readI64():l.skip(b);break;case 3:b==a.Type.I64?this.memory=l.readI64():l.skip(b);break;case 4:b==a.Type.I16?this.compute_capability_major=l.readI16():l.skip(b);break;case 5:b==a.Type.I16?this.compute_capability_minor=l.readI16():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TGpuSpecification"),this.num_sm!==null&&this.num_sm!==void 0&&(l.writeFieldBegin("num_sm",a.Type.I32,1),l.writeI32(this.num_sm),l.writeFieldEnd()),this.clock_frequency_kHz!==null&&this.clock_frequency_kHz!==void 0&&(l.writeFieldBegin("clock_frequency_kHz",a.Type.I64,2),l.writeI64(this.clock_frequency_kHz),l.writeFieldEnd()),this.memory!==null&&this.memory!==void 0&&(l.writeFieldBegin("memory",a.Type.I64,3),l.writeI64(this.memory),l.writeFieldEnd()),this.compute_capability_major!==null&&this.compute_capability_major!==void 0&&(l.writeFieldBegin("compute_capability_major",a.Type.I16,4),l.writeI16(this.compute_capability_major),l.writeFieldEnd()),this.compute_capability_minor!==null&&this.compute_capability_minor!==void 0&&(l.writeFieldBegin("compute_capability_minor",a.Type.I16,5),l.writeI16(this.compute_capability_minor),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.THardwareInfo=class{constructor(l){this.num_gpu_hw=null,this.num_cpu_hw=null,this.num_gpu_allocated=null,this.start_gpu=null,this.host_name=null,this.gpu_info=null,l&&(l.num_gpu_hw!==void 0&&l.num_gpu_hw!==null&&(this.num_gpu_hw=l.num_gpu_hw),l.num_cpu_hw!==void 0&&l.num_cpu_hw!==null&&(this.num_cpu_hw=l.num_cpu_hw),l.num_gpu_allocated!==void 0&&l.num_gpu_allocated!==null&&(this.num_gpu_allocated=l.num_gpu_allocated),l.start_gpu!==void 0&&l.start_gpu!==null&&(this.start_gpu=l.start_gpu),l.host_name!==void 0&&l.host_name!==null&&(this.host_name=l.host_name),l.gpu_info!==void 0&&l.gpu_info!==null&&(this.gpu_info=a.copyList(l.gpu_info,[m.TGpuSpecification])))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I16?this.num_gpu_hw=l.readI16():l.skip(b);break;case 2:b==a.Type.I16?this.num_cpu_hw=l.readI16():l.skip(b);break;case 3:b==a.Type.I16?this.num_gpu_allocated=l.readI16():l.skip(b);break;case 4:b==a.Type.I16?this.start_gpu=l.readI16():l.skip(b);break;case 5:b==a.Type.STRING?this.host_name=l.readString():l.skip(b);break;case 6:if(b==a.Type.LIST){this.gpu_info=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=new m.TGpuSpecification,k.read(l),this.gpu_info.push(k)}l.readListEnd()}else l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("THardwareInfo"),this.num_gpu_hw!==null&&this.num_gpu_hw!==void 0&&(l.writeFieldBegin("num_gpu_hw",a.Type.I16,1),l.writeI16(this.num_gpu_hw),l.writeFieldEnd()),this.num_cpu_hw!==null&&this.num_cpu_hw!==void 0&&(l.writeFieldBegin("num_cpu_hw",a.Type.I16,2),l.writeI16(this.num_cpu_hw),l.writeFieldEnd()),this.num_gpu_allocated!==null&&this.num_gpu_allocated!==void 0&&(l.writeFieldBegin("num_gpu_allocated",a.Type.I16,3),l.writeI16(this.num_gpu_allocated),l.writeFieldEnd()),this.start_gpu!==null&&this.start_gpu!==void 0&&(l.writeFieldBegin("start_gpu",a.Type.I16,4),l.writeI16(this.start_gpu),l.writeFieldEnd()),this.host_name!==null&&this.host_name!==void 0&&(l.writeFieldBegin("host_name",a.Type.STRING,5),l.writeString(this.host_name),l.writeFieldEnd()),this.gpu_info!==null&&this.gpu_info!==void 0){l.writeFieldBegin("gpu_info",a.Type.LIST,6),l.writeListBegin(a.Type.STRUCT,this.gpu_info.length);for(let T in this.gpu_info)this.gpu_info.hasOwnProperty(T)&&(T=this.gpu_info[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TClusterHardwareInfo=class{constructor(l){this.hardware_info=null,l&&l.hardware_info!==void 0&&l.hardware_info!==null&&(this.hardware_info=a.copyList(l.hardware_info,[m.THardwareInfo]))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:if(b==a.Type.LIST){this.hardware_info=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=new m.THardwareInfo,k.read(l),this.hardware_info.push(k)}l.readListEnd()}else l.skip(b);break;case 0:l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TClusterHardwareInfo"),this.hardware_info!==null&&this.hardware_info!==void 0){l.writeFieldBegin("hardware_info",a.Type.LIST,1),l.writeListBegin(a.Type.STRUCT,this.hardware_info.length);for(let T in this.hardware_info)this.hardware_info.hasOwnProperty(T)&&(T=this.hardware_info[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TMemoryData=class{constructor(l){this.slab=null,this.start_page=null,this.num_pages=null,this.touch=null,this.chunk_key=null,this.buffer_epoch=null,this.is_free=null,l&&(l.slab!==void 0&&l.slab!==null&&(this.slab=l.slab),l.start_page!==void 0&&l.start_page!==null&&(this.start_page=l.start_page),l.num_pages!==void 0&&l.num_pages!==null&&(this.num_pages=l.num_pages),l.touch!==void 0&&l.touch!==null&&(this.touch=l.touch),l.chunk_key!==void 0&&l.chunk_key!==null&&(this.chunk_key=a.copyList(l.chunk_key,[null])),l.buffer_epoch!==void 0&&l.buffer_epoch!==null&&(this.buffer_epoch=l.buffer_epoch),l.is_free!==void 0&&l.is_free!==null&&(this.is_free=l.is_free))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I64?this.slab=l.readI64():l.skip(b);break;case 2:b==a.Type.I32?this.start_page=l.readI32():l.skip(b);break;case 3:b==a.Type.I64?this.num_pages=l.readI64():l.skip(b);break;case 4:b==a.Type.I32?this.touch=l.readI32():l.skip(b);break;case 5:if(b==a.Type.LIST){this.chunk_key=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=l.readI64(),this.chunk_key.push(k)}l.readListEnd()}else l.skip(b);break;case 6:b==a.Type.I32?this.buffer_epoch=l.readI32():l.skip(b);break;case 7:b==a.Type.BOOL?this.is_free=l.readBool():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TMemoryData"),this.slab!==null&&this.slab!==void 0&&(l.writeFieldBegin("slab",a.Type.I64,1),l.writeI64(this.slab),l.writeFieldEnd()),this.start_page!==null&&this.start_page!==void 0&&(l.writeFieldBegin("start_page",a.Type.I32,2),l.writeI32(this.start_page),l.writeFieldEnd()),this.num_pages!==null&&this.num_pages!==void 0&&(l.writeFieldBegin("num_pages",a.Type.I64,3),l.writeI64(this.num_pages),l.writeFieldEnd()),this.touch!==null&&this.touch!==void 0&&(l.writeFieldBegin("touch",a.Type.I32,4),l.writeI32(this.touch),l.writeFieldEnd()),this.chunk_key!==null&&this.chunk_key!==void 0){l.writeFieldBegin("chunk_key",a.Type.LIST,5),l.writeListBegin(a.Type.I64,this.chunk_key.length);for(let T in this.chunk_key)this.chunk_key.hasOwnProperty(T)&&(T=this.chunk_key[T],l.writeI64(T));l.writeListEnd(),l.writeFieldEnd()}this.buffer_epoch!==null&&this.buffer_epoch!==void 0&&(l.writeFieldBegin("buffer_epoch",a.Type.I32,6),l.writeI32(this.buffer_epoch),l.writeFieldEnd()),this.is_free!==null&&this.is_free!==void 0&&(l.writeFieldBegin("is_free",a.Type.BOOL,7),l.writeBool(this.is_free),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TNodeMemoryInfo=class{constructor(l){this.host_name=null,this.page_size=null,this.max_num_pages=null,this.num_pages_allocated=null,this.is_allocation_capped=null,this.node_memory_data=null,l&&(l.host_name!==void 0&&l.host_name!==null&&(this.host_name=l.host_name),l.page_size!==void 0&&l.page_size!==null&&(this.page_size=l.page_size),l.max_num_pages!==void 0&&l.max_num_pages!==null&&(this.max_num_pages=l.max_num_pages),l.num_pages_allocated!==void 0&&l.num_pages_allocated!==null&&(this.num_pages_allocated=l.num_pages_allocated),l.is_allocation_capped!==void 0&&l.is_allocation_capped!==null&&(this.is_allocation_capped=l.is_allocation_capped),l.node_memory_data!==void 0&&l.node_memory_data!==null&&(this.node_memory_data=a.copyList(l.node_memory_data,[m.TMemoryData])))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.host_name=l.readString():l.skip(b);break;case 2:b==a.Type.I64?this.page_size=l.readI64():l.skip(b);break;case 3:b==a.Type.I64?this.max_num_pages=l.readI64():l.skip(b);break;case 4:b==a.Type.I64?this.num_pages_allocated=l.readI64():l.skip(b);break;case 5:b==a.Type.BOOL?this.is_allocation_capped=l.readBool():l.skip(b);break;case 6:if(b==a.Type.LIST){this.node_memory_data=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=new m.TMemoryData,k.read(l),this.node_memory_data.push(k)}l.readListEnd()}else l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TNodeMemoryInfo"),this.host_name!==null&&this.host_name!==void 0&&(l.writeFieldBegin("host_name",a.Type.STRING,1),l.writeString(this.host_name),l.writeFieldEnd()),this.page_size!==null&&this.page_size!==void 0&&(l.writeFieldBegin("page_size",a.Type.I64,2),l.writeI64(this.page_size),l.writeFieldEnd()),this.max_num_pages!==null&&this.max_num_pages!==void 0&&(l.writeFieldBegin("max_num_pages",a.Type.I64,3),l.writeI64(this.max_num_pages),l.writeFieldEnd()),this.num_pages_allocated!==null&&this.num_pages_allocated!==void 0&&(l.writeFieldBegin("num_pages_allocated",a.Type.I64,4),l.writeI64(this.num_pages_allocated),l.writeFieldEnd()),this.is_allocation_capped!==null&&this.is_allocation_capped!==void 0&&(l.writeFieldBegin("is_allocation_capped",a.Type.BOOL,5),l.writeBool(this.is_allocation_capped),l.writeFieldEnd()),this.node_memory_data!==null&&this.node_memory_data!==void 0){l.writeFieldBegin("node_memory_data",a.Type.LIST,6),l.writeListBegin(a.Type.STRUCT,this.node_memory_data.length);for(let T in this.node_memory_data)this.node_memory_data.hasOwnProperty(T)&&(T=this.node_memory_data[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TTableMeta=class{constructor(l){this.table_name=null,this.num_cols=null,this.is_view=null,this.is_replicated=null,this.shard_count=null,this.max_rows=null,this.table_id=null,this.max_table_id=null,this.col_types=null,this.col_names=null,l&&(l.table_name!==void 0&&l.table_name!==null&&(this.table_name=l.table_name),l.num_cols!==void 0&&l.num_cols!==null&&(this.num_cols=l.num_cols),l.is_view!==void 0&&l.is_view!==null&&(this.is_view=l.is_view),l.is_replicated!==void 0&&l.is_replicated!==null&&(this.is_replicated=l.is_replicated),l.shard_count!==void 0&&l.shard_count!==null&&(this.shard_count=l.shard_count),l.max_rows!==void 0&&l.max_rows!==null&&(this.max_rows=l.max_rows),l.table_id!==void 0&&l.table_id!==null&&(this.table_id=l.table_id),l.max_table_id!==void 0&&l.max_table_id!==null&&(this.max_table_id=l.max_table_id),l.col_types!==void 0&&l.col_types!==null&&(this.col_types=a.copyList(l.col_types,[_.TTypeInfo])),l.col_names!==void 0&&l.col_names!==null&&(this.col_names=a.copyList(l.col_names,[null])))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.table_name=l.readString():l.skip(b);break;case 2:b==a.Type.I64?this.num_cols=l.readI64():l.skip(b);break;case 4:b==a.Type.BOOL?this.is_view=l.readBool():l.skip(b);break;case 5:b==a.Type.BOOL?this.is_replicated=l.readBool():l.skip(b);break;case 6:b==a.Type.I64?this.shard_count=l.readI64():l.skip(b);break;case 7:b==a.Type.I64?this.max_rows=l.readI64():l.skip(b);break;case 8:b==a.Type.I64?this.table_id=l.readI64():l.skip(b);break;case 9:b==a.Type.I64?this.max_table_id=l.readI64():l.skip(b);break;case 10:if(b==a.Type.LIST){this.col_types=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=new _.TTypeInfo,k.read(l),this.col_types.push(k)}l.readListEnd()}else l.skip(b);break;case 11:if(b==a.Type.LIST){this.col_names=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=l.readString(),this.col_names.push(k)}l.readListEnd()}else l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TTableMeta"),this.table_name!==null&&this.table_name!==void 0&&(l.writeFieldBegin("table_name",a.Type.STRING,1),l.writeString(this.table_name),l.writeFieldEnd()),this.num_cols!==null&&this.num_cols!==void 0&&(l.writeFieldBegin("num_cols",a.Type.I64,2),l.writeI64(this.num_cols),l.writeFieldEnd()),this.is_view!==null&&this.is_view!==void 0&&(l.writeFieldBegin("is_view",a.Type.BOOL,4),l.writeBool(this.is_view),l.writeFieldEnd()),this.is_replicated!==null&&this.is_replicated!==void 0&&(l.writeFieldBegin("is_replicated",a.Type.BOOL,5),l.writeBool(this.is_replicated),l.writeFieldEnd()),this.shard_count!==null&&this.shard_count!==void 0&&(l.writeFieldBegin("shard_count",a.Type.I64,6),l.writeI64(this.shard_count),l.writeFieldEnd()),this.max_rows!==null&&this.max_rows!==void 0&&(l.writeFieldBegin("max_rows",a.Type.I64,7),l.writeI64(this.max_rows),l.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0&&(l.writeFieldBegin("table_id",a.Type.I64,8),l.writeI64(this.table_id),l.writeFieldEnd()),this.max_table_id!==null&&this.max_table_id!==void 0&&(l.writeFieldBegin("max_table_id",a.Type.I64,9),l.writeI64(this.max_table_id),l.writeFieldEnd()),this.col_types!==null&&this.col_types!==void 0){l.writeFieldBegin("col_types",a.Type.LIST,10),l.writeListBegin(a.Type.STRUCT,this.col_types.length);for(let T in this.col_types)this.col_types.hasOwnProperty(T)&&(T=this.col_types[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}if(this.col_names!==null&&this.col_names!==void 0){l.writeFieldBegin("col_names",a.Type.LIST,11),l.writeListBegin(a.Type.STRING,this.col_names.length);for(let T in this.col_names)this.col_names.hasOwnProperty(T)&&(T=this.col_names[T],l.writeString(T));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TTableRefreshInfo=class{constructor(l){this.update_type=null,this.timing_type=null,this.start_date_time=null,this.interval_type=null,this.interval_count=null,this.last_refresh_time=null,this.next_refresh_time=null,l&&(l.update_type!==void 0&&l.update_type!==null&&(this.update_type=l.update_type),l.timing_type!==void 0&&l.timing_type!==null&&(this.timing_type=l.timing_type),l.start_date_time!==void 0&&l.start_date_time!==null&&(this.start_date_time=l.start_date_time),l.interval_type!==void 0&&l.interval_type!==null&&(this.interval_type=l.interval_type),l.interval_count!==void 0&&l.interval_count!==null&&(this.interval_count=l.interval_count),l.last_refresh_time!==void 0&&l.last_refresh_time!==null&&(this.last_refresh_time=l.last_refresh_time),l.next_refresh_time!==void 0&&l.next_refresh_time!==null&&(this.next_refresh_time=l.next_refresh_time))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I32?this.update_type=l.readI32():l.skip(b);break;case 2:b==a.Type.I32?this.timing_type=l.readI32():l.skip(b);break;case 3:b==a.Type.STRING?this.start_date_time=l.readString():l.skip(b);break;case 4:b==a.Type.I32?this.interval_type=l.readI32():l.skip(b);break;case 5:b==a.Type.I64?this.interval_count=l.readI64():l.skip(b);break;case 6:b==a.Type.STRING?this.last_refresh_time=l.readString():l.skip(b);break;case 7:b==a.Type.STRING?this.next_refresh_time=l.readString():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TTableRefreshInfo"),this.update_type!==null&&this.update_type!==void 0&&(l.writeFieldBegin("update_type",a.Type.I32,1),l.writeI32(this.update_type),l.writeFieldEnd()),this.timing_type!==null&&this.timing_type!==void 0&&(l.writeFieldBegin("timing_type",a.Type.I32,2),l.writeI32(this.timing_type),l.writeFieldEnd()),this.start_date_time!==null&&this.start_date_time!==void 0&&(l.writeFieldBegin("start_date_time",a.Type.STRING,3),l.writeString(this.start_date_time),l.writeFieldEnd()),this.interval_type!==null&&this.interval_type!==void 0&&(l.writeFieldBegin("interval_type",a.Type.I32,4),l.writeI32(this.interval_type),l.writeFieldEnd()),this.interval_count!==null&&this.interval_count!==void 0&&(l.writeFieldBegin("interval_count",a.Type.I64,5),l.writeI64(this.interval_count),l.writeFieldEnd()),this.last_refresh_time!==null&&this.last_refresh_time!==void 0&&(l.writeFieldBegin("last_refresh_time",a.Type.STRING,6),l.writeString(this.last_refresh_time),l.writeFieldEnd()),this.next_refresh_time!==null&&this.next_refresh_time!==void 0&&(l.writeFieldBegin("next_refresh_time",a.Type.STRING,7),l.writeString(this.next_refresh_time),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TTableDetails=class{constructor(l){this.row_desc=null,this.fragment_size=null,this.page_size=null,this.max_rows=null,this.view_sql=null,this.shard_count=null,this.key_metainfo=null,this.is_temporary=null,this.partition_detail=null,this.table_type=null,this.refresh_info=null,l&&(l.row_desc!==void 0&&l.row_desc!==null&&(this.row_desc=a.copyList(l.row_desc,[m.TColumnType])),l.fragment_size!==void 0&&l.fragment_size!==null&&(this.fragment_size=l.fragment_size),l.page_size!==void 0&&l.page_size!==null&&(this.page_size=l.page_size),l.max_rows!==void 0&&l.max_rows!==null&&(this.max_rows=l.max_rows),l.view_sql!==void 0&&l.view_sql!==null&&(this.view_sql=l.view_sql),l.shard_count!==void 0&&l.shard_count!==null&&(this.shard_count=l.shard_count),l.key_metainfo!==void 0&&l.key_metainfo!==null&&(this.key_metainfo=l.key_metainfo),l.is_temporary!==void 0&&l.is_temporary!==null&&(this.is_temporary=l.is_temporary),l.partition_detail!==void 0&&l.partition_detail!==null&&(this.partition_detail=l.partition_detail),l.table_type!==void 0&&l.table_type!==null&&(this.table_type=l.table_type),l.refresh_info!==void 0&&l.refresh_info!==null&&(this.refresh_info=new m.TTableRefreshInfo(l.refresh_info)))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:if(b==a.Type.LIST){this.row_desc=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=new m.TColumnType,k.read(l),this.row_desc.push(k)}l.readListEnd()}else l.skip(b);break;case 2:b==a.Type.I64?this.fragment_size=l.readI64():l.skip(b);break;case 3:b==a.Type.I64?this.page_size=l.readI64():l.skip(b);break;case 4:b==a.Type.I64?this.max_rows=l.readI64():l.skip(b);break;case 5:b==a.Type.STRING?this.view_sql=l.readString():l.skip(b);break;case 6:b==a.Type.I64?this.shard_count=l.readI64():l.skip(b);break;case 7:b==a.Type.STRING?this.key_metainfo=l.readString():l.skip(b);break;case 8:b==a.Type.BOOL?this.is_temporary=l.readBool():l.skip(b);break;case 9:b==a.Type.I32?this.partition_detail=l.readI32():l.skip(b);break;case 10:b==a.Type.I32?this.table_type=l.readI32():l.skip(b);break;case 11:b==a.Type.STRUCT?(this.refresh_info=new m.TTableRefreshInfo,this.refresh_info.read(l)):l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TTableDetails"),this.row_desc!==null&&this.row_desc!==void 0){l.writeFieldBegin("row_desc",a.Type.LIST,1),l.writeListBegin(a.Type.STRUCT,this.row_desc.length);for(let T in this.row_desc)this.row_desc.hasOwnProperty(T)&&(T=this.row_desc[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}this.fragment_size!==null&&this.fragment_size!==void 0&&(l.writeFieldBegin("fragment_size",a.Type.I64,2),l.writeI64(this.fragment_size),l.writeFieldEnd()),this.page_size!==null&&this.page_size!==void 0&&(l.writeFieldBegin("page_size",a.Type.I64,3),l.writeI64(this.page_size),l.writeFieldEnd()),this.max_rows!==null&&this.max_rows!==void 0&&(l.writeFieldBegin("max_rows",a.Type.I64,4),l.writeI64(this.max_rows),l.writeFieldEnd()),this.view_sql!==null&&this.view_sql!==void 0&&(l.writeFieldBegin("view_sql",a.Type.STRING,5),l.writeString(this.view_sql),l.writeFieldEnd()),this.shard_count!==null&&this.shard_count!==void 0&&(l.writeFieldBegin("shard_count",a.Type.I64,6),l.writeI64(this.shard_count),l.writeFieldEnd()),this.key_metainfo!==null&&this.key_metainfo!==void 0&&(l.writeFieldBegin("key_metainfo",a.Type.STRING,7),l.writeString(this.key_metainfo),l.writeFieldEnd()),this.is_temporary!==null&&this.is_temporary!==void 0&&(l.writeFieldBegin("is_temporary",a.Type.BOOL,8),l.writeBool(this.is_temporary),l.writeFieldEnd()),this.partition_detail!==null&&this.partition_detail!==void 0&&(l.writeFieldBegin("partition_detail",a.Type.I32,9),l.writeI32(this.partition_detail),l.writeFieldEnd()),this.table_type!==null&&this.table_type!==void 0&&(l.writeFieldBegin("table_type",a.Type.I32,10),l.writeI32(this.table_type),l.writeFieldEnd()),this.refresh_info!==null&&this.refresh_info!==void 0&&(l.writeFieldBegin("refresh_info",a.Type.STRUCT,11),this.refresh_info.write(l),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TColumnRange=class{constructor(l){this.type=null,this.col_id=null,this.table_id=null,this.has_nulls=null,this.int_min=null,this.int_max=null,this.bucket=null,this.fp_min=null,this.fp_max=null,l&&(l.type!==void 0&&l.type!==null&&(this.type=l.type),l.col_id!==void 0&&l.col_id!==null&&(this.col_id=l.col_id),l.table_id!==void 0&&l.table_id!==null&&(this.table_id=l.table_id),l.has_nulls!==void 0&&l.has_nulls!==null&&(this.has_nulls=l.has_nulls),l.int_min!==void 0&&l.int_min!==null&&(this.int_min=l.int_min),l.int_max!==void 0&&l.int_max!==null&&(this.int_max=l.int_max),l.bucket!==void 0&&l.bucket!==null&&(this.bucket=l.bucket),l.fp_min!==void 0&&l.fp_min!==null&&(this.fp_min=l.fp_min),l.fp_max!==void 0&&l.fp_max!==null&&(this.fp_max=l.fp_max))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I32?this.type=l.readI32():l.skip(b);break;case 2:b==a.Type.I32?this.col_id=l.readI32():l.skip(b);break;case 3:b==a.Type.I32?this.table_id=l.readI32():l.skip(b);break;case 4:b==a.Type.BOOL?this.has_nulls=l.readBool():l.skip(b);break;case 5:b==a.Type.I64?this.int_min=l.readI64():l.skip(b);break;case 6:b==a.Type.I64?this.int_max=l.readI64():l.skip(b);break;case 7:b==a.Type.I64?this.bucket=l.readI64():l.skip(b);break;case 8:b==a.Type.DOUBLE?this.fp_min=l.readDouble():l.skip(b);break;case 9:b==a.Type.DOUBLE?this.fp_max=l.readDouble():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TColumnRange"),this.type!==null&&this.type!==void 0&&(l.writeFieldBegin("type",a.Type.I32,1),l.writeI32(this.type),l.writeFieldEnd()),this.col_id!==null&&this.col_id!==void 0&&(l.writeFieldBegin("col_id",a.Type.I32,2),l.writeI32(this.col_id),l.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0&&(l.writeFieldBegin("table_id",a.Type.I32,3),l.writeI32(this.table_id),l.writeFieldEnd()),this.has_nulls!==null&&this.has_nulls!==void 0&&(l.writeFieldBegin("has_nulls",a.Type.BOOL,4),l.writeBool(this.has_nulls),l.writeFieldEnd()),this.int_min!==null&&this.int_min!==void 0&&(l.writeFieldBegin("int_min",a.Type.I64,5),l.writeI64(this.int_min),l.writeFieldEnd()),this.int_max!==null&&this.int_max!==void 0&&(l.writeFieldBegin("int_max",a.Type.I64,6),l.writeI64(this.int_max),l.writeFieldEnd()),this.bucket!==null&&this.bucket!==void 0&&(l.writeFieldBegin("bucket",a.Type.I64,7),l.writeI64(this.bucket),l.writeFieldEnd()),this.fp_min!==null&&this.fp_min!==void 0&&(l.writeFieldBegin("fp_min",a.Type.DOUBLE,8),l.writeDouble(this.fp_min),l.writeFieldEnd()),this.fp_max!==null&&this.fp_max!==void 0&&(l.writeFieldBegin("fp_max",a.Type.DOUBLE,9),l.writeDouble(this.fp_max),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDictionaryGeneration=class{constructor(l){this.dict_id=null,this.entry_count=null,l&&(l.dict_id!==void 0&&l.dict_id!==null&&(this.dict_id=l.dict_id),l.entry_count!==void 0&&l.entry_count!==null&&(this.entry_count=l.entry_count))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I32?this.dict_id=l.readI32():l.skip(b);break;case 2:b==a.Type.I64?this.entry_count=l.readI64():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TDictionaryGeneration"),this.dict_id!==null&&this.dict_id!==void 0&&(l.writeFieldBegin("dict_id",a.Type.I32,1),l.writeI32(this.dict_id),l.writeFieldEnd()),this.entry_count!==null&&this.entry_count!==void 0&&(l.writeFieldBegin("entry_count",a.Type.I64,2),l.writeI64(this.entry_count),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TTableGeneration=class{constructor(l){this.table_id=null,this.tuple_count=null,this.start_rowid=null,l&&(l.table_id!==void 0&&l.table_id!==null&&(this.table_id=l.table_id),l.tuple_count!==void 0&&l.tuple_count!==null&&(this.tuple_count=l.tuple_count),l.start_rowid!==void 0&&l.start_rowid!==null&&(this.start_rowid=l.start_rowid))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I32?this.table_id=l.readI32():l.skip(b);break;case 2:b==a.Type.I64?this.tuple_count=l.readI64():l.skip(b);break;case 3:b==a.Type.I64?this.start_rowid=l.readI64():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TTableGeneration"),this.table_id!==null&&this.table_id!==void 0&&(l.writeFieldBegin("table_id",a.Type.I32,1),l.writeI32(this.table_id),l.writeFieldEnd()),this.tuple_count!==null&&this.tuple_count!==void 0&&(l.writeFieldBegin("tuple_count",a.Type.I64,2),l.writeI64(this.tuple_count),l.writeFieldEnd()),this.start_rowid!==null&&this.start_rowid!==void 0&&(l.writeFieldBegin("start_rowid",a.Type.I64,3),l.writeI64(this.start_rowid),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TPendingQuery=class{constructor(l){this.id=null,this.column_ranges=null,this.dictionary_generations=null,this.table_generations=null,this.parent_session_id=null,l&&(l.id!==void 0&&l.id!==null&&(this.id=l.id),l.column_ranges!==void 0&&l.column_ranges!==null&&(this.column_ranges=a.copyList(l.column_ranges,[m.TColumnRange])),l.dictionary_generations!==void 0&&l.dictionary_generations!==null&&(this.dictionary_generations=a.copyList(l.dictionary_generations,[m.TDictionaryGeneration])),l.table_generations!==void 0&&l.table_generations!==null&&(this.table_generations=a.copyList(l.table_generations,[m.TTableGeneration])),l.parent_session_id!==void 0&&l.parent_session_id!==null&&(this.parent_session_id=l.parent_session_id))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I64?this.id=l.readI64():l.skip(b);break;case 2:if(b==a.Type.LIST){this.column_ranges=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=new m.TColumnRange,k.read(l),this.column_ranges.push(k)}l.readListEnd()}else l.skip(b);break;case 3:if(b==a.Type.LIST){this.dictionary_generations=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=new m.TDictionaryGeneration,k.read(l),this.dictionary_generations.push(k)}l.readListEnd()}else l.skip(b);break;case 4:if(b==a.Type.LIST){this.table_generations=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=new m.TTableGeneration,k.read(l),this.table_generations.push(k)}l.readListEnd()}else l.skip(b);break;case 5:b==a.Type.STRING?this.parent_session_id=l.readString():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TPendingQuery"),this.id!==null&&this.id!==void 0&&(l.writeFieldBegin("id",a.Type.I64,1),l.writeI64(this.id),l.writeFieldEnd()),this.column_ranges!==null&&this.column_ranges!==void 0){l.writeFieldBegin("column_ranges",a.Type.LIST,2),l.writeListBegin(a.Type.STRUCT,this.column_ranges.length);for(let T in this.column_ranges)this.column_ranges.hasOwnProperty(T)&&(T=this.column_ranges[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}if(this.dictionary_generations!==null&&this.dictionary_generations!==void 0){l.writeFieldBegin("dictionary_generations",a.Type.LIST,3),l.writeListBegin(a.Type.STRUCT,this.dictionary_generations.length);for(let T in this.dictionary_generations)this.dictionary_generations.hasOwnProperty(T)&&(T=this.dictionary_generations[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}if(this.table_generations!==null&&this.table_generations!==void 0){l.writeFieldBegin("table_generations",a.Type.LIST,4),l.writeListBegin(a.Type.STRUCT,this.table_generations.length);for(let T in this.table_generations)this.table_generations.hasOwnProperty(T)&&(T=this.table_generations[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}this.parent_session_id!==null&&this.parent_session_id!==void 0&&(l.writeFieldBegin("parent_session_id",a.Type.STRING,5),l.writeString(this.parent_session_id),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TVarLen=class{constructor(l){this.payload=null,this.is_null=null,l&&(l.payload!==void 0&&l.payload!==null&&(this.payload=l.payload),l.is_null!==void 0&&l.is_null!==null&&(this.is_null=l.is_null))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.payload=l.readBinary():l.skip(b);break;case 2:b==a.Type.BOOL?this.is_null=l.readBool():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TVarLen"),this.payload!==null&&this.payload!==void 0&&(l.writeFieldBegin("payload",a.Type.STRING,1),l.writeBinary(this.payload),l.writeFieldEnd()),this.is_null!==null&&this.is_null!==void 0&&(l.writeFieldBegin("is_null",a.Type.BOOL,2),l.writeBool(this.is_null),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDataBlockPtr=class{constructor(l){this.fixed_len_data=null,this.var_len_data=null,l&&(l.fixed_len_data!==void 0&&l.fixed_len_data!==null&&(this.fixed_len_data=l.fixed_len_data),l.var_len_data!==void 0&&l.var_len_data!==null&&(this.var_len_data=a.copyList(l.var_len_data,[m.TVarLen])))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.fixed_len_data=l.readBinary():l.skip(b);break;case 2:if(b==a.Type.LIST){this.var_len_data=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=new m.TVarLen,k.read(l),this.var_len_data.push(k)}l.readListEnd()}else l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TDataBlockPtr"),this.fixed_len_data!==null&&this.fixed_len_data!==void 0&&(l.writeFieldBegin("fixed_len_data",a.Type.STRING,1),l.writeBinary(this.fixed_len_data),l.writeFieldEnd()),this.var_len_data!==null&&this.var_len_data!==void 0){l.writeFieldBegin("var_len_data",a.Type.LIST,2),l.writeListBegin(a.Type.STRUCT,this.var_len_data.length);for(let T in this.var_len_data)this.var_len_data.hasOwnProperty(T)&&(T=this.var_len_data[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TInsertData=class{constructor(l){this.db_id=null,this.table_id=null,this.column_ids=null,this.data=null,this.num_rows=null,this.is_default=null,l&&(l.db_id!==void 0&&l.db_id!==null&&(this.db_id=l.db_id),l.table_id!==void 0&&l.table_id!==null&&(this.table_id=l.table_id),l.column_ids!==void 0&&l.column_ids!==null&&(this.column_ids=a.copyList(l.column_ids,[null])),l.data!==void 0&&l.data!==null&&(this.data=a.copyList(l.data,[m.TDataBlockPtr])),l.num_rows!==void 0&&l.num_rows!==null&&(this.num_rows=l.num_rows),l.is_default!==void 0&&l.is_default!==null&&(this.is_default=a.copyList(l.is_default,[null])))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I32?this.db_id=l.readI32():l.skip(b);break;case 2:b==a.Type.I32?this.table_id=l.readI32():l.skip(b);break;case 3:if(b==a.Type.LIST){this.column_ids=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=l.readI32(),this.column_ids.push(k)}l.readListEnd()}else l.skip(b);break;case 4:if(b==a.Type.LIST){this.data=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=new m.TDataBlockPtr,k.read(l),this.data.push(k)}l.readListEnd()}else l.skip(b);break;case 5:b==a.Type.I64?this.num_rows=l.readI64():l.skip(b);break;case 6:if(b==a.Type.LIST){this.is_default=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=l.readBool(),this.is_default.push(k)}l.readListEnd()}else l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TInsertData"),this.db_id!==null&&this.db_id!==void 0&&(l.writeFieldBegin("db_id",a.Type.I32,1),l.writeI32(this.db_id),l.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0&&(l.writeFieldBegin("table_id",a.Type.I32,2),l.writeI32(this.table_id),l.writeFieldEnd()),this.column_ids!==null&&this.column_ids!==void 0){l.writeFieldBegin("column_ids",a.Type.LIST,3),l.writeListBegin(a.Type.I32,this.column_ids.length);for(let T in this.column_ids)this.column_ids.hasOwnProperty(T)&&(T=this.column_ids[T],l.writeI32(T));l.writeListEnd(),l.writeFieldEnd()}if(this.data!==null&&this.data!==void 0){l.writeFieldBegin("data",a.Type.LIST,4),l.writeListBegin(a.Type.STRUCT,this.data.length);for(let T in this.data)this.data.hasOwnProperty(T)&&(T=this.data[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}if(this.num_rows!==null&&this.num_rows!==void 0&&(l.writeFieldBegin("num_rows",a.Type.I64,5),l.writeI64(this.num_rows),l.writeFieldEnd()),this.is_default!==null&&this.is_default!==void 0){l.writeFieldBegin("is_default",a.Type.LIST,6),l.writeListBegin(a.Type.BOOL,this.is_default.length);for(let T in this.is_default)this.is_default.hasOwnProperty(T)&&(T=this.is_default[T],l.writeBool(T));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TChunkData=class{constructor(l){this.data_buffer=null,this.index_buffer=null,l&&(l.data_buffer!==void 0&&l.data_buffer!==null&&(this.data_buffer=l.data_buffer),l.index_buffer!==void 0&&l.index_buffer!==null&&(this.index_buffer=l.index_buffer))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.data_buffer=l.readBinary():l.skip(b);break;case 2:b==a.Type.STRING?this.index_buffer=l.readBinary():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TChunkData"),this.data_buffer!==null&&this.data_buffer!==void 0&&(l.writeFieldBegin("data_buffer",a.Type.STRING,1),l.writeBinary(this.data_buffer),l.writeFieldEnd()),this.index_buffer!==null&&this.index_buffer!==void 0&&(l.writeFieldBegin("index_buffer",a.Type.STRING,2),l.writeBinary(this.index_buffer),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TInsertChunks=class{constructor(l){this.db_id=null,this.table_id=null,this.data=null,this.valid_indices=null,this.num_rows=null,l&&(l.db_id!==void 0&&l.db_id!==null&&(this.db_id=l.db_id),l.table_id!==void 0&&l.table_id!==null&&(this.table_id=l.table_id),l.data!==void 0&&l.data!==null&&(this.data=a.copyList(l.data,[m.TChunkData])),l.valid_indices!==void 0&&l.valid_indices!==null&&(this.valid_indices=a.copyList(l.valid_indices,[null])),l.num_rows!==void 0&&l.num_rows!==null&&(this.num_rows=l.num_rows))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I32?this.db_id=l.readI32():l.skip(b);break;case 2:b==a.Type.I32?this.table_id=l.readI32():l.skip(b);break;case 3:if(b==a.Type.LIST){this.data=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=new m.TChunkData,k.read(l),this.data.push(k)}l.readListEnd()}else l.skip(b);break;case 4:if(b==a.Type.LIST){this.valid_indices=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=l.readI64(),this.valid_indices.push(k)}l.readListEnd()}else l.skip(b);break;case 5:b==a.Type.I64?this.num_rows=l.readI64():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TInsertChunks"),this.db_id!==null&&this.db_id!==void 0&&(l.writeFieldBegin("db_id",a.Type.I32,1),l.writeI32(this.db_id),l.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0&&(l.writeFieldBegin("table_id",a.Type.I32,2),l.writeI32(this.table_id),l.writeFieldEnd()),this.data!==null&&this.data!==void 0){l.writeFieldBegin("data",a.Type.LIST,3),l.writeListBegin(a.Type.STRUCT,this.data.length);for(let T in this.data)this.data.hasOwnProperty(T)&&(T=this.data[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}if(this.valid_indices!==null&&this.valid_indices!==void 0){l.writeFieldBegin("valid_indices",a.Type.LIST,4),l.writeListBegin(a.Type.I64,this.valid_indices.length);for(let T in this.valid_indices)this.valid_indices.hasOwnProperty(T)&&(T=this.valid_indices[T],l.writeI64(T));l.writeListEnd(),l.writeFieldEnd()}this.num_rows!==null&&this.num_rows!==void 0&&(l.writeFieldBegin("num_rows",a.Type.I64,5),l.writeI64(this.num_rows),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TPendingRenderQuery=class{constructor(l){this.id=null,l&&l.id!==void 0&&l.id!==null&&(this.id=l.id)}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I64?this.id=l.readI64():l.skip(b);break;case 0:l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TPendingRenderQuery"),this.id!==null&&this.id!==void 0&&(l.writeFieldBegin("id",a.Type.I64,1),l.writeI64(this.id),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TRenderParseResult=class{constructor(l){this.merge_type=null,this.node_id=null,this.execution_time_ms=null,this.render_time_ms=null,this.total_time_ms=null,l&&(l.merge_type!==void 0&&l.merge_type!==null&&(this.merge_type=l.merge_type),l.node_id!==void 0&&l.node_id!==null&&(this.node_id=l.node_id),l.execution_time_ms!==void 0&&l.execution_time_ms!==null&&(this.execution_time_ms=l.execution_time_ms),l.render_time_ms!==void 0&&l.render_time_ms!==null&&(this.render_time_ms=l.render_time_ms),l.total_time_ms!==void 0&&l.total_time_ms!==null&&(this.total_time_ms=l.total_time_ms))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I32?this.merge_type=l.readI32():l.skip(b);break;case 2:b==a.Type.I32?this.node_id=l.readI32():l.skip(b);break;case 3:b==a.Type.I64?this.execution_time_ms=l.readI64():l.skip(b);break;case 4:b==a.Type.I64?this.render_time_ms=l.readI64():l.skip(b);break;case 5:b==a.Type.I64?this.total_time_ms=l.readI64():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TRenderParseResult"),this.merge_type!==null&&this.merge_type!==void 0&&(l.writeFieldBegin("merge_type",a.Type.I32,1),l.writeI32(this.merge_type),l.writeFieldEnd()),this.node_id!==null&&this.node_id!==void 0&&(l.writeFieldBegin("node_id",a.Type.I32,2),l.writeI32(this.node_id),l.writeFieldEnd()),this.execution_time_ms!==null&&this.execution_time_ms!==void 0&&(l.writeFieldBegin("execution_time_ms",a.Type.I64,3),l.writeI64(this.execution_time_ms),l.writeFieldEnd()),this.render_time_ms!==null&&this.render_time_ms!==void 0&&(l.writeFieldBegin("render_time_ms",a.Type.I64,4),l.writeI64(this.render_time_ms),l.writeFieldEnd()),this.total_time_ms!==null&&this.total_time_ms!==void 0&&(l.writeFieldBegin("total_time_ms",a.Type.I64,5),l.writeI64(this.total_time_ms),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TRawRenderPassDataResult=class{constructor(l){this.num_pixel_channels=null,this.num_pixel_samples=null,this.pixels=null,this.row_ids_A=null,this.row_ids_B=null,this.table_ids=null,this.accum_data=null,this.accum_depth=null,l&&(l.num_pixel_channels!==void 0&&l.num_pixel_channels!==null&&(this.num_pixel_channels=l.num_pixel_channels),l.num_pixel_samples!==void 0&&l.num_pixel_samples!==null&&(this.num_pixel_samples=l.num_pixel_samples),l.pixels!==void 0&&l.pixels!==null&&(this.pixels=l.pixels),l.row_ids_A!==void 0&&l.row_ids_A!==null&&(this.row_ids_A=l.row_ids_A),l.row_ids_B!==void 0&&l.row_ids_B!==null&&(this.row_ids_B=l.row_ids_B),l.table_ids!==void 0&&l.table_ids!==null&&(this.table_ids=l.table_ids),l.accum_data!==void 0&&l.accum_data!==null&&(this.accum_data=l.accum_data),l.accum_depth!==void 0&&l.accum_depth!==null&&(this.accum_depth=l.accum_depth))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I32?this.num_pixel_channels=l.readI32():l.skip(b);break;case 2:b==a.Type.I32?this.num_pixel_samples=l.readI32():l.skip(b);break;case 3:b==a.Type.STRING?this.pixels=l.readBinary():l.skip(b);break;case 4:b==a.Type.STRING?this.row_ids_A=l.readBinary():l.skip(b);break;case 5:b==a.Type.STRING?this.row_ids_B=l.readBinary():l.skip(b);break;case 6:b==a.Type.STRING?this.table_ids=l.readBinary():l.skip(b);break;case 7:b==a.Type.STRING?this.accum_data=l.readBinary():l.skip(b);break;case 8:b==a.Type.I32?this.accum_depth=l.readI32():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TRawRenderPassDataResult"),this.num_pixel_channels!==null&&this.num_pixel_channels!==void 0&&(l.writeFieldBegin("num_pixel_channels",a.Type.I32,1),l.writeI32(this.num_pixel_channels),l.writeFieldEnd()),this.num_pixel_samples!==null&&this.num_pixel_samples!==void 0&&(l.writeFieldBegin("num_pixel_samples",a.Type.I32,2),l.writeI32(this.num_pixel_samples),l.writeFieldEnd()),this.pixels!==null&&this.pixels!==void 0&&(l.writeFieldBegin("pixels",a.Type.STRING,3),l.writeBinary(this.pixels),l.writeFieldEnd()),this.row_ids_A!==null&&this.row_ids_A!==void 0&&(l.writeFieldBegin("row_ids_A",a.Type.STRING,4),l.writeBinary(this.row_ids_A),l.writeFieldEnd()),this.row_ids_B!==null&&this.row_ids_B!==void 0&&(l.writeFieldBegin("row_ids_B",a.Type.STRING,5),l.writeBinary(this.row_ids_B),l.writeFieldEnd()),this.table_ids!==null&&this.table_ids!==void 0&&(l.writeFieldBegin("table_ids",a.Type.STRING,6),l.writeBinary(this.table_ids),l.writeFieldEnd()),this.accum_data!==null&&this.accum_data!==void 0&&(l.writeFieldBegin("accum_data",a.Type.STRING,7),l.writeBinary(this.accum_data),l.writeFieldEnd()),this.accum_depth!==null&&this.accum_depth!==void 0&&(l.writeFieldBegin("accum_depth",a.Type.I32,8),l.writeI32(this.accum_depth),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TRawPixelData=class{constructor(l){this.width=null,this.height=null,this.render_pass_map=null,l&&(l.width!==void 0&&l.width!==null&&(this.width=l.width),l.height!==void 0&&l.height!==null&&(this.height=l.height),l.render_pass_map!==void 0&&l.render_pass_map!==null&&(this.render_pass_map=a.copyMap(l.render_pass_map,[m.TRawRenderPassDataResult])))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I32?this.width=l.readI32():l.skip(b);break;case 2:b==a.Type.I32?this.height=l.readI32():l.skip(b);break;case 3:if(b==a.Type.MAP){this.render_pass_map={};const B=l.readMapBegin().size||0;for(let F=0;F<B;++F){let k=null,A=null;k=l.readI32(),A=new m.TRawRenderPassDataResult,A.read(l),this.render_pass_map[k]=A}l.readMapEnd()}else l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TRawPixelData"),this.width!==null&&this.width!==void 0&&(l.writeFieldBegin("width",a.Type.I32,1),l.writeI32(this.width),l.writeFieldEnd()),this.height!==null&&this.height!==void 0&&(l.writeFieldBegin("height",a.Type.I32,2),l.writeI32(this.height),l.writeFieldEnd()),this.render_pass_map!==null&&this.render_pass_map!==void 0){l.writeFieldBegin("render_pass_map",a.Type.MAP,3),l.writeMapBegin(a.Type.I32,a.Type.STRUCT,a.objectLength(this.render_pass_map));for(let T in this.render_pass_map)if(this.render_pass_map.hasOwnProperty(T)){let b=this.render_pass_map[T];l.writeI32(T),b.write(l)}l.writeMapEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TRenderDatum=class{constructor(l){this.type=null,this.cnt=null,this.value=null,l&&(l.type!==void 0&&l.type!==null&&(this.type=l.type),l.cnt!==void 0&&l.cnt!==null&&(this.cnt=l.cnt),l.value!==void 0&&l.value!==null&&(this.value=l.value))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I32?this.type=l.readI32():l.skip(b);break;case 2:b==a.Type.I32?this.cnt=l.readI32():l.skip(b);break;case 3:b==a.Type.STRING?this.value=l.readBinary():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TRenderDatum"),this.type!==null&&this.type!==void 0&&(l.writeFieldBegin("type",a.Type.I32,1),l.writeI32(this.type),l.writeFieldEnd()),this.cnt!==null&&this.cnt!==void 0&&(l.writeFieldBegin("cnt",a.Type.I32,2),l.writeI32(this.cnt),l.writeFieldEnd()),this.value!==null&&this.value!==void 0&&(l.writeFieldBegin("value",a.Type.STRING,3),l.writeBinary(this.value),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TRenderStepResult=class{constructor(l){this.merge_data=null,this.raw_pixel_data=null,this.execution_time_ms=null,this.render_time_ms=null,this.total_time_ms=null,l&&(l.merge_data!==void 0&&l.merge_data!==null&&(this.merge_data=a.copyMap(l.merge_data,[a.copyMap,a.copyMap,a.copyMap,a.copyList,m.TRenderDatum])),l.raw_pixel_data!==void 0&&l.raw_pixel_data!==null&&(this.raw_pixel_data=new m.TRawPixelData(l.raw_pixel_data)),l.execution_time_ms!==void 0&&l.execution_time_ms!==null&&(this.execution_time_ms=l.execution_time_ms),l.render_time_ms!==void 0&&l.render_time_ms!==null&&(this.render_time_ms=l.render_time_ms),l.total_time_ms!==void 0&&l.total_time_ms!==null&&(this.total_time_ms=l.total_time_ms))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:if(b==a.Type.MAP){this.merge_data={};const B=l.readMapBegin().size||0;for(let F=0;F<B;++F){let k=null,A=null;k=l.readString(),A={};const R=l.readMapBegin().size||0;for(let P=0;P<R;++P){let j=null,D=null;j=l.readString(),D={};const $=l.readMapBegin().size||0;for(let K=0;K<$;++K){let H=null,W=null;H=l.readString(),W={};const V=l.readMapBegin().size||0;for(let le=0;le<V;++le){let pe=null,se=null;pe=l.readString(),se=[];const fe=l.readListBegin().size||0;for(let Oe=0;Oe<fe;++Oe){let Ce=null;Ce=new m.TRenderDatum,Ce.read(l),se.push(Ce)}l.readListEnd(),W[pe]=se}l.readMapEnd(),D[H]=W}l.readMapEnd(),A[j]=D}l.readMapEnd(),this.merge_data[k]=A}l.readMapEnd()}else l.skip(b);break;case 2:b==a.Type.STRUCT?(this.raw_pixel_data=new m.TRawPixelData,this.raw_pixel_data.read(l)):l.skip(b);break;case 3:b==a.Type.I64?this.execution_time_ms=l.readI64():l.skip(b);break;case 4:b==a.Type.I64?this.render_time_ms=l.readI64():l.skip(b);break;case 5:b==a.Type.I64?this.total_time_ms=l.readI64():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TRenderStepResult"),this.merge_data!==null&&this.merge_data!==void 0){l.writeFieldBegin("merge_data",a.Type.MAP,1),l.writeMapBegin(a.Type.STRING,a.Type.MAP,a.objectLength(this.merge_data));for(let T in this.merge_data)if(this.merge_data.hasOwnProperty(T)){let b=this.merge_data[T];l.writeString(T),l.writeMapBegin(a.Type.STRING,a.Type.MAP,a.objectLength(b));for(let S in b)if(b.hasOwnProperty(S)){let x=b[S];l.writeString(S),l.writeMapBegin(a.Type.STRING,a.Type.MAP,a.objectLength(x));for(let B in x)if(x.hasOwnProperty(B)){let F=x[B];l.writeString(B),l.writeMapBegin(a.Type.STRING,a.Type.LIST,a.objectLength(F));for(let k in F)if(F.hasOwnProperty(k)){let A=F[k];l.writeString(k),l.writeListBegin(a.Type.STRUCT,A.length);for(let M in A)A.hasOwnProperty(M)&&(M=A[M],M.write(l));l.writeListEnd()}l.writeMapEnd()}l.writeMapEnd()}l.writeMapEnd()}l.writeMapEnd(),l.writeFieldEnd()}this.raw_pixel_data!==null&&this.raw_pixel_data!==void 0&&(l.writeFieldBegin("raw_pixel_data",a.Type.STRUCT,2),this.raw_pixel_data.write(l),l.writeFieldEnd()),this.execution_time_ms!==null&&this.execution_time_ms!==void 0&&(l.writeFieldBegin("execution_time_ms",a.Type.I64,3),l.writeI64(this.execution_time_ms),l.writeFieldEnd()),this.render_time_ms!==null&&this.render_time_ms!==void 0&&(l.writeFieldBegin("render_time_ms",a.Type.I64,4),l.writeI64(this.render_time_ms),l.writeFieldEnd()),this.total_time_ms!==null&&this.total_time_ms!==void 0&&(l.writeFieldBegin("total_time_ms",a.Type.I64,5),l.writeI64(this.total_time_ms),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDatabasePermissions=class{constructor(l){this.create_=null,this.delete_=null,this.view_sql_editor_=null,this.access_=null,l&&(l.create_!==void 0&&l.create_!==null&&(this.create_=l.create_),l.delete_!==void 0&&l.delete_!==null&&(this.delete_=l.delete_),l.view_sql_editor_!==void 0&&l.view_sql_editor_!==null&&(this.view_sql_editor_=l.view_sql_editor_),l.access_!==void 0&&l.access_!==null&&(this.access_=l.access_))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.BOOL?this.create_=l.readBool():l.skip(b);break;case 2:b==a.Type.BOOL?this.delete_=l.readBool():l.skip(b);break;case 3:b==a.Type.BOOL?this.view_sql_editor_=l.readBool():l.skip(b);break;case 4:b==a.Type.BOOL?this.access_=l.readBool():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TDatabasePermissions"),this.create_!==null&&this.create_!==void 0&&(l.writeFieldBegin("create_",a.Type.BOOL,1),l.writeBool(this.create_),l.writeFieldEnd()),this.delete_!==null&&this.delete_!==void 0&&(l.writeFieldBegin("delete_",a.Type.BOOL,2),l.writeBool(this.delete_),l.writeFieldEnd()),this.view_sql_editor_!==null&&this.view_sql_editor_!==void 0&&(l.writeFieldBegin("view_sql_editor_",a.Type.BOOL,3),l.writeBool(this.view_sql_editor_),l.writeFieldEnd()),this.access_!==null&&this.access_!==void 0&&(l.writeFieldBegin("access_",a.Type.BOOL,4),l.writeBool(this.access_),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TTablePermissions=class{constructor(l){this.create_=null,this.drop_=null,this.select_=null,this.insert_=null,this.update_=null,this.delete_=null,this.truncate_=null,this.alter_=null,l&&(l.create_!==void 0&&l.create_!==null&&(this.create_=l.create_),l.drop_!==void 0&&l.drop_!==null&&(this.drop_=l.drop_),l.select_!==void 0&&l.select_!==null&&(this.select_=l.select_),l.insert_!==void 0&&l.insert_!==null&&(this.insert_=l.insert_),l.update_!==void 0&&l.update_!==null&&(this.update_=l.update_),l.delete_!==void 0&&l.delete_!==null&&(this.delete_=l.delete_),l.truncate_!==void 0&&l.truncate_!==null&&(this.truncate_=l.truncate_),l.alter_!==void 0&&l.alter_!==null&&(this.alter_=l.alter_))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.BOOL?this.create_=l.readBool():l.skip(b);break;case 2:b==a.Type.BOOL?this.drop_=l.readBool():l.skip(b);break;case 3:b==a.Type.BOOL?this.select_=l.readBool():l.skip(b);break;case 4:b==a.Type.BOOL?this.insert_=l.readBool():l.skip(b);break;case 5:b==a.Type.BOOL?this.update_=l.readBool():l.skip(b);break;case 6:b==a.Type.BOOL?this.delete_=l.readBool():l.skip(b);break;case 7:b==a.Type.BOOL?this.truncate_=l.readBool():l.skip(b);break;case 8:b==a.Type.BOOL?this.alter_=l.readBool():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TTablePermissions"),this.create_!==null&&this.create_!==void 0&&(l.writeFieldBegin("create_",a.Type.BOOL,1),l.writeBool(this.create_),l.writeFieldEnd()),this.drop_!==null&&this.drop_!==void 0&&(l.writeFieldBegin("drop_",a.Type.BOOL,2),l.writeBool(this.drop_),l.writeFieldEnd()),this.select_!==null&&this.select_!==void 0&&(l.writeFieldBegin("select_",a.Type.BOOL,3),l.writeBool(this.select_),l.writeFieldEnd()),this.insert_!==null&&this.insert_!==void 0&&(l.writeFieldBegin("insert_",a.Type.BOOL,4),l.writeBool(this.insert_),l.writeFieldEnd()),this.update_!==null&&this.update_!==void 0&&(l.writeFieldBegin("update_",a.Type.BOOL,5),l.writeBool(this.update_),l.writeFieldEnd()),this.delete_!==null&&this.delete_!==void 0&&(l.writeFieldBegin("delete_",a.Type.BOOL,6),l.writeBool(this.delete_),l.writeFieldEnd()),this.truncate_!==null&&this.truncate_!==void 0&&(l.writeFieldBegin("truncate_",a.Type.BOOL,7),l.writeBool(this.truncate_),l.writeFieldEnd()),this.alter_!==null&&this.alter_!==void 0&&(l.writeFieldBegin("alter_",a.Type.BOOL,8),l.writeBool(this.alter_),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDashboardPermissions=class{constructor(l){this.create_=null,this.delete_=null,this.view_=null,this.edit_=null,l&&(l.create_!==void 0&&l.create_!==null&&(this.create_=l.create_),l.delete_!==void 0&&l.delete_!==null&&(this.delete_=l.delete_),l.view_!==void 0&&l.view_!==null&&(this.view_=l.view_),l.edit_!==void 0&&l.edit_!==null&&(this.edit_=l.edit_))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.BOOL?this.create_=l.readBool():l.skip(b);break;case 2:b==a.Type.BOOL?this.delete_=l.readBool():l.skip(b);break;case 3:b==a.Type.BOOL?this.view_=l.readBool():l.skip(b);break;case 4:b==a.Type.BOOL?this.edit_=l.readBool():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TDashboardPermissions"),this.create_!==null&&this.create_!==void 0&&(l.writeFieldBegin("create_",a.Type.BOOL,1),l.writeBool(this.create_),l.writeFieldEnd()),this.delete_!==null&&this.delete_!==void 0&&(l.writeFieldBegin("delete_",a.Type.BOOL,2),l.writeBool(this.delete_),l.writeFieldEnd()),this.view_!==null&&this.view_!==void 0&&(l.writeFieldBegin("view_",a.Type.BOOL,3),l.writeBool(this.view_),l.writeFieldEnd()),this.edit_!==null&&this.edit_!==void 0&&(l.writeFieldBegin("edit_",a.Type.BOOL,4),l.writeBool(this.edit_),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TViewPermissions=class{constructor(l){this.create_=null,this.drop_=null,this.select_=null,this.insert_=null,this.update_=null,this.delete_=null,l&&(l.create_!==void 0&&l.create_!==null&&(this.create_=l.create_),l.drop_!==void 0&&l.drop_!==null&&(this.drop_=l.drop_),l.select_!==void 0&&l.select_!==null&&(this.select_=l.select_),l.insert_!==void 0&&l.insert_!==null&&(this.insert_=l.insert_),l.update_!==void 0&&l.update_!==null&&(this.update_=l.update_),l.delete_!==void 0&&l.delete_!==null&&(this.delete_=l.delete_))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.BOOL?this.create_=l.readBool():l.skip(b);break;case 2:b==a.Type.BOOL?this.drop_=l.readBool():l.skip(b);break;case 3:b==a.Type.BOOL?this.select_=l.readBool():l.skip(b);break;case 4:b==a.Type.BOOL?this.insert_=l.readBool():l.skip(b);break;case 5:b==a.Type.BOOL?this.update_=l.readBool():l.skip(b);break;case 6:b==a.Type.BOOL?this.delete_=l.readBool():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TViewPermissions"),this.create_!==null&&this.create_!==void 0&&(l.writeFieldBegin("create_",a.Type.BOOL,1),l.writeBool(this.create_),l.writeFieldEnd()),this.drop_!==null&&this.drop_!==void 0&&(l.writeFieldBegin("drop_",a.Type.BOOL,2),l.writeBool(this.drop_),l.writeFieldEnd()),this.select_!==null&&this.select_!==void 0&&(l.writeFieldBegin("select_",a.Type.BOOL,3),l.writeBool(this.select_),l.writeFieldEnd()),this.insert_!==null&&this.insert_!==void 0&&(l.writeFieldBegin("insert_",a.Type.BOOL,4),l.writeBool(this.insert_),l.writeFieldEnd()),this.update_!==null&&this.update_!==void 0&&(l.writeFieldBegin("update_",a.Type.BOOL,5),l.writeBool(this.update_),l.writeFieldEnd()),this.delete_!==null&&this.delete_!==void 0&&(l.writeFieldBegin("delete_",a.Type.BOOL,6),l.writeBool(this.delete_),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TServerPermissions=class{constructor(l){this.create_=null,this.drop_=null,this.alter_=null,this.usage_=null,l&&(l.create_!==void 0&&l.create_!==null&&(this.create_=l.create_),l.drop_!==void 0&&l.drop_!==null&&(this.drop_=l.drop_),l.alter_!==void 0&&l.alter_!==null&&(this.alter_=l.alter_),l.usage_!==void 0&&l.usage_!==null&&(this.usage_=l.usage_))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.BOOL?this.create_=l.readBool():l.skip(b);break;case 2:b==a.Type.BOOL?this.drop_=l.readBool():l.skip(b);break;case 3:b==a.Type.BOOL?this.alter_=l.readBool():l.skip(b);break;case 4:b==a.Type.BOOL?this.usage_=l.readBool():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TServerPermissions"),this.create_!==null&&this.create_!==void 0&&(l.writeFieldBegin("create_",a.Type.BOOL,1),l.writeBool(this.create_),l.writeFieldEnd()),this.drop_!==null&&this.drop_!==void 0&&(l.writeFieldBegin("drop_",a.Type.BOOL,2),l.writeBool(this.drop_),l.writeFieldEnd()),this.alter_!==null&&this.alter_!==void 0&&(l.writeFieldBegin("alter_",a.Type.BOOL,3),l.writeBool(this.alter_),l.writeFieldEnd()),this.usage_!==null&&this.usage_!==void 0&&(l.writeFieldBegin("usage_",a.Type.BOOL,4),l.writeBool(this.usage_),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDBObjectPermissions=class{constructor(l){this.database_permissions_=null,this.table_permissions_=null,this.dashboard_permissions_=null,this.view_permissions_=null,this.server_permissions_=null,l&&(l.database_permissions_!==void 0&&l.database_permissions_!==null&&(this.database_permissions_=new m.TDatabasePermissions(l.database_permissions_)),l.table_permissions_!==void 0&&l.table_permissions_!==null&&(this.table_permissions_=new m.TTablePermissions(l.table_permissions_)),l.dashboard_permissions_!==void 0&&l.dashboard_permissions_!==null&&(this.dashboard_permissions_=new m.TDashboardPermissions(l.dashboard_permissions_)),l.view_permissions_!==void 0&&l.view_permissions_!==null&&(this.view_permissions_=new m.TViewPermissions(l.view_permissions_)),l.server_permissions_!==void 0&&l.server_permissions_!==null&&(this.server_permissions_=new m.TServerPermissions(l.server_permissions_)))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRUCT?(this.database_permissions_=new m.TDatabasePermissions,this.database_permissions_.read(l)):l.skip(b);break;case 2:b==a.Type.STRUCT?(this.table_permissions_=new m.TTablePermissions,this.table_permissions_.read(l)):l.skip(b);break;case 3:b==a.Type.STRUCT?(this.dashboard_permissions_=new m.TDashboardPermissions,this.dashboard_permissions_.read(l)):l.skip(b);break;case 4:b==a.Type.STRUCT?(this.view_permissions_=new m.TViewPermissions,this.view_permissions_.read(l)):l.skip(b);break;case 5:b==a.Type.STRUCT?(this.server_permissions_=new m.TServerPermissions,this.server_permissions_.read(l)):l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TDBObjectPermissions"),this.database_permissions_!==null&&this.database_permissions_!==void 0&&(l.writeFieldBegin("database_permissions_",a.Type.STRUCT,1),this.database_permissions_.write(l),l.writeFieldEnd()),this.table_permissions_!==null&&this.table_permissions_!==void 0&&(l.writeFieldBegin("table_permissions_",a.Type.STRUCT,2),this.table_permissions_.write(l),l.writeFieldEnd()),this.dashboard_permissions_!==null&&this.dashboard_permissions_!==void 0&&(l.writeFieldBegin("dashboard_permissions_",a.Type.STRUCT,3),this.dashboard_permissions_.write(l),l.writeFieldEnd()),this.view_permissions_!==null&&this.view_permissions_!==void 0&&(l.writeFieldBegin("view_permissions_",a.Type.STRUCT,4),this.view_permissions_.write(l),l.writeFieldEnd()),this.server_permissions_!==null&&this.server_permissions_!==void 0&&(l.writeFieldBegin("server_permissions_",a.Type.STRUCT,5),this.server_permissions_.write(l),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDBObject=class{constructor(l){this.objectName=null,this.objectType=null,this.privs=null,this.grantee=null,this.privilegeObjectType=null,this.objectId=null,l&&(l.objectName!==void 0&&l.objectName!==null&&(this.objectName=l.objectName),l.objectType!==void 0&&l.objectType!==null&&(this.objectType=l.objectType),l.privs!==void 0&&l.privs!==null&&(this.privs=a.copyList(l.privs,[null])),l.grantee!==void 0&&l.grantee!==null&&(this.grantee=l.grantee),l.privilegeObjectType!==void 0&&l.privilegeObjectType!==null&&(this.privilegeObjectType=l.privilegeObjectType),l.objectId!==void 0&&l.objectId!==null&&(this.objectId=l.objectId))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.objectName=l.readString():l.skip(b);break;case 2:b==a.Type.I32?this.objectType=l.readI32():l.skip(b);break;case 3:if(b==a.Type.LIST){this.privs=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=l.readBool(),this.privs.push(k)}l.readListEnd()}else l.skip(b);break;case 4:b==a.Type.STRING?this.grantee=l.readString():l.skip(b);break;case 5:b==a.Type.I32?this.privilegeObjectType=l.readI32():l.skip(b);break;case 6:b==a.Type.I32?this.objectId=l.readI32():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TDBObject"),this.objectName!==null&&this.objectName!==void 0&&(l.writeFieldBegin("objectName",a.Type.STRING,1),l.writeString(this.objectName),l.writeFieldEnd()),this.objectType!==null&&this.objectType!==void 0&&(l.writeFieldBegin("objectType",a.Type.I32,2),l.writeI32(this.objectType),l.writeFieldEnd()),this.privs!==null&&this.privs!==void 0){l.writeFieldBegin("privs",a.Type.LIST,3),l.writeListBegin(a.Type.BOOL,this.privs.length);for(let T in this.privs)this.privs.hasOwnProperty(T)&&(T=this.privs[T],l.writeBool(T));l.writeListEnd(),l.writeFieldEnd()}this.grantee!==null&&this.grantee!==void 0&&(l.writeFieldBegin("grantee",a.Type.STRING,4),l.writeString(this.grantee),l.writeFieldEnd()),this.privilegeObjectType!==null&&this.privilegeObjectType!==void 0&&(l.writeFieldBegin("privilegeObjectType",a.Type.I32,5),l.writeI32(this.privilegeObjectType),l.writeFieldEnd()),this.objectId!==null&&this.objectId!==void 0&&(l.writeFieldBegin("objectId",a.Type.I32,6),l.writeI32(this.objectId),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDashboardGrantees=class{constructor(l){this.name=null,this.is_user=null,this.permissions=null,l&&(l.name!==void 0&&l.name!==null&&(this.name=l.name),l.is_user!==void 0&&l.is_user!==null&&(this.is_user=l.is_user),l.permissions!==void 0&&l.permissions!==null&&(this.permissions=new m.TDashboardPermissions(l.permissions)))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.name=l.readString():l.skip(b);break;case 2:b==a.Type.BOOL?this.is_user=l.readBool():l.skip(b);break;case 3:b==a.Type.STRUCT?(this.permissions=new m.TDashboardPermissions,this.permissions.read(l)):l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TDashboardGrantees"),this.name!==null&&this.name!==void 0&&(l.writeFieldBegin("name",a.Type.STRING,1),l.writeString(this.name),l.writeFieldEnd()),this.is_user!==null&&this.is_user!==void 0&&(l.writeFieldBegin("is_user",a.Type.BOOL,2),l.writeBool(this.is_user),l.writeFieldEnd()),this.permissions!==null&&this.permissions!==void 0&&(l.writeFieldBegin("permissions",a.Type.STRUCT,3),this.permissions.write(l),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDashboard=class{constructor(l){this.dashboard_name=null,this.dashboard_state=null,this.image_hash=null,this.update_time=null,this.dashboard_metadata=null,this.dashboard_id=null,this.dashboard_owner=null,this.is_dash_shared=null,this.dashboard_permissions=null,l&&(l.dashboard_name!==void 0&&l.dashboard_name!==null&&(this.dashboard_name=l.dashboard_name),l.dashboard_state!==void 0&&l.dashboard_state!==null&&(this.dashboard_state=l.dashboard_state),l.image_hash!==void 0&&l.image_hash!==null&&(this.image_hash=l.image_hash),l.update_time!==void 0&&l.update_time!==null&&(this.update_time=l.update_time),l.dashboard_metadata!==void 0&&l.dashboard_metadata!==null&&(this.dashboard_metadata=l.dashboard_metadata),l.dashboard_id!==void 0&&l.dashboard_id!==null&&(this.dashboard_id=l.dashboard_id),l.dashboard_owner!==void 0&&l.dashboard_owner!==null&&(this.dashboard_owner=l.dashboard_owner),l.is_dash_shared!==void 0&&l.is_dash_shared!==null&&(this.is_dash_shared=l.is_dash_shared),l.dashboard_permissions!==void 0&&l.dashboard_permissions!==null&&(this.dashboard_permissions=new m.TDashboardPermissions(l.dashboard_permissions)))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.dashboard_name=l.readString():l.skip(b);break;case 2:b==a.Type.STRING?this.dashboard_state=l.readString():l.skip(b);break;case 3:b==a.Type.STRING?this.image_hash=l.readString():l.skip(b);break;case 4:b==a.Type.STRING?this.update_time=l.readString():l.skip(b);break;case 5:b==a.Type.STRING?this.dashboard_metadata=l.readString():l.skip(b);break;case 6:b==a.Type.I32?this.dashboard_id=l.readI32():l.skip(b);break;case 7:b==a.Type.STRING?this.dashboard_owner=l.readString():l.skip(b);break;case 8:b==a.Type.BOOL?this.is_dash_shared=l.readBool():l.skip(b);break;case 9:b==a.Type.STRUCT?(this.dashboard_permissions=new m.TDashboardPermissions,this.dashboard_permissions.read(l)):l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TDashboard"),this.dashboard_name!==null&&this.dashboard_name!==void 0&&(l.writeFieldBegin("dashboard_name",a.Type.STRING,1),l.writeString(this.dashboard_name),l.writeFieldEnd()),this.dashboard_state!==null&&this.dashboard_state!==void 0&&(l.writeFieldBegin("dashboard_state",a.Type.STRING,2),l.writeString(this.dashboard_state),l.writeFieldEnd()),this.image_hash!==null&&this.image_hash!==void 0&&(l.writeFieldBegin("image_hash",a.Type.STRING,3),l.writeString(this.image_hash),l.writeFieldEnd()),this.update_time!==null&&this.update_time!==void 0&&(l.writeFieldBegin("update_time",a.Type.STRING,4),l.writeString(this.update_time),l.writeFieldEnd()),this.dashboard_metadata!==null&&this.dashboard_metadata!==void 0&&(l.writeFieldBegin("dashboard_metadata",a.Type.STRING,5),l.writeString(this.dashboard_metadata),l.writeFieldEnd()),this.dashboard_id!==null&&this.dashboard_id!==void 0&&(l.writeFieldBegin("dashboard_id",a.Type.I32,6),l.writeI32(this.dashboard_id),l.writeFieldEnd()),this.dashboard_owner!==null&&this.dashboard_owner!==void 0&&(l.writeFieldBegin("dashboard_owner",a.Type.STRING,7),l.writeString(this.dashboard_owner),l.writeFieldEnd()),this.is_dash_shared!==null&&this.is_dash_shared!==void 0&&(l.writeFieldBegin("is_dash_shared",a.Type.BOOL,8),l.writeBool(this.is_dash_shared),l.writeFieldEnd()),this.dashboard_permissions!==null&&this.dashboard_permissions!==void 0&&(l.writeFieldBegin("dashboard_permissions",a.Type.STRUCT,9),this.dashboard_permissions.write(l),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TLicenseInfo=class{constructor(l){this.claims=null,l&&l.claims!==void 0&&l.claims!==null&&(this.claims=a.copyList(l.claims,[null]))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:if(b==a.Type.LIST){this.claims=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=l.readString(),this.claims.push(k)}l.readListEnd()}else l.skip(b);break;case 0:l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TLicenseInfo"),this.claims!==null&&this.claims!==void 0){l.writeFieldBegin("claims",a.Type.LIST,1),l.writeListBegin(a.Type.STRING,this.claims.length);for(let T in this.claims)this.claims.hasOwnProperty(T)&&(T=this.claims[T],l.writeString(T));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TSessionInfo=class{constructor(l){this.user=null,this.database=null,this.start_time=null,this.is_super=null,l&&(l.user!==void 0&&l.user!==null&&(this.user=l.user),l.database!==void 0&&l.database!==null&&(this.database=l.database),l.start_time!==void 0&&l.start_time!==null&&(this.start_time=l.start_time),l.is_super!==void 0&&l.is_super!==null&&(this.is_super=l.is_super))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.user=l.readString():l.skip(b);break;case 2:b==a.Type.STRING?this.database=l.readString():l.skip(b);break;case 3:b==a.Type.I64?this.start_time=l.readI64():l.skip(b);break;case 4:b==a.Type.BOOL?this.is_super=l.readBool():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TSessionInfo"),this.user!==null&&this.user!==void 0&&(l.writeFieldBegin("user",a.Type.STRING,1),l.writeString(this.user),l.writeFieldEnd()),this.database!==null&&this.database!==void 0&&(l.writeFieldBegin("database",a.Type.STRING,2),l.writeString(this.database),l.writeFieldEnd()),this.start_time!==null&&this.start_time!==void 0&&(l.writeFieldBegin("start_time",a.Type.I64,3),l.writeI64(this.start_time),l.writeFieldEnd()),this.is_super!==null&&this.is_super!==void 0&&(l.writeFieldBegin("is_super",a.Type.BOOL,4),l.writeBool(this.is_super),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TGeoFileLayerInfo=class{constructor(l){this.name=null,this.contents=null,l&&(l.name!==void 0&&l.name!==null&&(this.name=l.name),l.contents!==void 0&&l.contents!==null&&(this.contents=l.contents))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.name=l.readString():l.skip(b);break;case 2:b==a.Type.I32?this.contents=l.readI32():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TGeoFileLayerInfo"),this.name!==null&&this.name!==void 0&&(l.writeFieldBegin("name",a.Type.STRING,1),l.writeString(this.name),l.writeFieldEnd()),this.contents!==null&&this.contents!==void 0&&(l.writeFieldBegin("contents",a.Type.I32,2),l.writeI32(this.contents),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TTableEpochInfo=class{constructor(l){this.table_id=null,this.table_epoch=null,this.leaf_index=null,l&&(l.table_id!==void 0&&l.table_id!==null&&(this.table_id=l.table_id),l.table_epoch!==void 0&&l.table_epoch!==null&&(this.table_epoch=l.table_epoch),l.leaf_index!==void 0&&l.leaf_index!==null&&(this.leaf_index=l.leaf_index))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I32?this.table_id=l.readI32():l.skip(b);break;case 2:b==a.Type.I32?this.table_epoch=l.readI32():l.skip(b);break;case 3:b==a.Type.I32?this.leaf_index=l.readI32():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TTableEpochInfo"),this.table_id!==null&&this.table_id!==void 0&&(l.writeFieldBegin("table_id",a.Type.I32,1),l.writeI32(this.table_id),l.writeFieldEnd()),this.table_epoch!==null&&this.table_epoch!==void 0&&(l.writeFieldBegin("table_epoch",a.Type.I32,2),l.writeI32(this.table_epoch),l.writeFieldEnd()),this.leaf_index!==null&&this.leaf_index!==void 0&&(l.writeFieldBegin("leaf_index",a.Type.I32,3),l.writeI32(this.leaf_index),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TCustomExpression=class{constructor(l){this.id=null,this.name=null,this.expression_json=null,this.data_source_type=null,this.data_source_id=null,this.is_deleted=null,this.data_source_name=null,l&&(l.id!==void 0&&l.id!==null&&(this.id=l.id),l.name!==void 0&&l.name!==null&&(this.name=l.name),l.expression_json!==void 0&&l.expression_json!==null&&(this.expression_json=l.expression_json),l.data_source_type!==void 0&&l.data_source_type!==null&&(this.data_source_type=l.data_source_type),l.data_source_id!==void 0&&l.data_source_id!==null&&(this.data_source_id=l.data_source_id),l.is_deleted!==void 0&&l.is_deleted!==null&&(this.is_deleted=l.is_deleted),l.data_source_name!==void 0&&l.data_source_name!==null&&(this.data_source_name=l.data_source_name))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I32?this.id=l.readI32():l.skip(b);break;case 2:b==a.Type.STRING?this.name=l.readString():l.skip(b);break;case 4:b==a.Type.STRING?this.expression_json=l.readString():l.skip(b);break;case 5:b==a.Type.I32?this.data_source_type=l.readI32():l.skip(b);break;case 6:b==a.Type.I32?this.data_source_id=l.readI32():l.skip(b);break;case 7:b==a.Type.BOOL?this.is_deleted=l.readBool():l.skip(b);break;case 8:b==a.Type.STRING?this.data_source_name=l.readString():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TCustomExpression"),this.id!==null&&this.id!==void 0&&(l.writeFieldBegin("id",a.Type.I32,1),l.writeI32(this.id),l.writeFieldEnd()),this.name!==null&&this.name!==void 0&&(l.writeFieldBegin("name",a.Type.STRING,2),l.writeString(this.name),l.writeFieldEnd()),this.expression_json!==null&&this.expression_json!==void 0&&(l.writeFieldBegin("expression_json",a.Type.STRING,4),l.writeString(this.expression_json),l.writeFieldEnd()),this.data_source_type!==null&&this.data_source_type!==void 0&&(l.writeFieldBegin("data_source_type",a.Type.I32,5),l.writeI32(this.data_source_type),l.writeFieldEnd()),this.data_source_id!==null&&this.data_source_id!==void 0&&(l.writeFieldBegin("data_source_id",a.Type.I32,6),l.writeI32(this.data_source_id),l.writeFieldEnd()),this.is_deleted!==null&&this.is_deleted!==void 0&&(l.writeFieldBegin("is_deleted",a.Type.BOOL,7),l.writeBool(this.is_deleted),l.writeFieldEnd()),this.data_source_name!==null&&this.data_source_name!==void 0&&(l.writeFieldBegin("data_source_name",a.Type.STRING,8),l.writeString(this.data_source_name),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TQueryInfo=class{constructor(l){this.query_session_id=null,this.query_public_session_id=null,this.current_status=null,this.executor_id=null,this.submitted=null,this.query_str=null,this.login_name=null,this.client_address=null,this.db_name=null,this.exec_device_type=null,l&&(l.query_session_id!==void 0&&l.query_session_id!==null&&(this.query_session_id=l.query_session_id),l.query_public_session_id!==void 0&&l.query_public_session_id!==null&&(this.query_public_session_id=l.query_public_session_id),l.current_status!==void 0&&l.current_status!==null&&(this.current_status=l.current_status),l.executor_id!==void 0&&l.executor_id!==null&&(this.executor_id=l.executor_id),l.submitted!==void 0&&l.submitted!==null&&(this.submitted=l.submitted),l.query_str!==void 0&&l.query_str!==null&&(this.query_str=l.query_str),l.login_name!==void 0&&l.login_name!==null&&(this.login_name=l.login_name),l.client_address!==void 0&&l.client_address!==null&&(this.client_address=l.client_address),l.db_name!==void 0&&l.db_name!==null&&(this.db_name=l.db_name),l.exec_device_type!==void 0&&l.exec_device_type!==null&&(this.exec_device_type=l.exec_device_type))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.query_session_id=l.readString():l.skip(b);break;case 2:b==a.Type.STRING?this.query_public_session_id=l.readString():l.skip(b);break;case 3:b==a.Type.STRING?this.current_status=l.readString():l.skip(b);break;case 4:b==a.Type.I32?this.executor_id=l.readI32():l.skip(b);break;case 5:b==a.Type.STRING?this.submitted=l.readString():l.skip(b);break;case 6:b==a.Type.STRING?this.query_str=l.readString():l.skip(b);break;case 7:b==a.Type.STRING?this.login_name=l.readString():l.skip(b);break;case 8:b==a.Type.STRING?this.client_address=l.readString():l.skip(b);break;case 9:b==a.Type.STRING?this.db_name=l.readString():l.skip(b);break;case 10:b==a.Type.STRING?this.exec_device_type=l.readString():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TQueryInfo"),this.query_session_id!==null&&this.query_session_id!==void 0&&(l.writeFieldBegin("query_session_id",a.Type.STRING,1),l.writeString(this.query_session_id),l.writeFieldEnd()),this.query_public_session_id!==null&&this.query_public_session_id!==void 0&&(l.writeFieldBegin("query_public_session_id",a.Type.STRING,2),l.writeString(this.query_public_session_id),l.writeFieldEnd()),this.current_status!==null&&this.current_status!==void 0&&(l.writeFieldBegin("current_status",a.Type.STRING,3),l.writeString(this.current_status),l.writeFieldEnd()),this.executor_id!==null&&this.executor_id!==void 0&&(l.writeFieldBegin("executor_id",a.Type.I32,4),l.writeI32(this.executor_id),l.writeFieldEnd()),this.submitted!==null&&this.submitted!==void 0&&(l.writeFieldBegin("submitted",a.Type.STRING,5),l.writeString(this.submitted),l.writeFieldEnd()),this.query_str!==null&&this.query_str!==void 0&&(l.writeFieldBegin("query_str",a.Type.STRING,6),l.writeString(this.query_str),l.writeFieldEnd()),this.login_name!==null&&this.login_name!==void 0&&(l.writeFieldBegin("login_name",a.Type.STRING,7),l.writeString(this.login_name),l.writeFieldEnd()),this.client_address!==null&&this.client_address!==void 0&&(l.writeFieldBegin("client_address",a.Type.STRING,8),l.writeString(this.client_address),l.writeFieldEnd()),this.db_name!==null&&this.db_name!==void 0&&(l.writeFieldBegin("db_name",a.Type.STRING,9),l.writeString(this.db_name),l.writeFieldEnd()),this.exec_device_type!==null&&this.exec_device_type!==void 0&&(l.writeFieldBegin("exec_device_type",a.Type.STRING,10),l.writeString(this.exec_device_type),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TLeafInfo=class{constructor(l){this.leaf_id=null,this.num_leaves=null,l&&(l.leaf_id!==void 0&&l.leaf_id!==null&&(this.leaf_id=l.leaf_id),l.num_leaves!==void 0&&l.num_leaves!==null&&(this.num_leaves=l.num_leaves))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I32?this.leaf_id=l.readI32():l.skip(b);break;case 2:b==a.Type.I32?this.num_leaves=l.readI32():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TLeafInfo"),this.leaf_id!==null&&this.leaf_id!==void 0&&(l.writeFieldBegin("leaf_id",a.Type.I32,1),l.writeI32(this.leaf_id),l.writeFieldEnd()),this.num_leaves!==null&&this.num_leaves!==void 0&&(l.writeFieldBegin("num_leaves",a.Type.I32,2),l.writeI32(this.num_leaves),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}}},3962:(c,d,f)=>{const a=f(9262).Thrift;f(135);const _=f(2818),w=c.exports={};w.TResultSetLayout={GroupByPerfectHash:0,GroupByBaselineHash:1,Projection:2,NonGroupedAggregate:3},w.TCountDistinctImplType={Invalid:0,Bitmap:1,UnorderedSet:2},w.TAggKind={AVG:0,MIN:1,MAX:2,SUM:3,COUNT:4,APPROX_COUNT_DISTINCT:5,SAMPLE:6,SINGLE_VALUE:7},c.exports.TSlotSize=class{constructor(m){this.padded=null,this.logical=null,m&&(m.padded!==void 0&&m.padded!==null&&(this.padded=m.padded),m.logical!==void 0&&m.logical!==null&&(this.logical=m.logical))}read(m){for(m.readStructBegin();;){const l=m.readFieldBegin(),T=l.ftype,b=l.fid;if(T==a.Type.STOP)break;switch(b){case 1:T==a.Type.I16?this.padded=m.readI16():m.skip(T);break;case 2:T==a.Type.I16?this.logical=m.readI16():m.skip(T);break;default:m.skip(T)}m.readFieldEnd()}m.readStructEnd()}write(m){m.writeStructBegin("TSlotSize"),this.padded!==null&&this.padded!==void 0&&(m.writeFieldBegin("padded",a.Type.I16,1),m.writeI16(this.padded),m.writeFieldEnd()),this.logical!==null&&this.logical!==void 0&&(m.writeFieldBegin("logical",a.Type.I16,2),m.writeI16(this.logical),m.writeFieldEnd()),m.writeFieldStop(),m.writeStructEnd()}},c.exports.TColSlotContext=class{constructor(m){this.slot_sizes=null,this.col_to_slot_map=null,m&&(m.slot_sizes!==void 0&&m.slot_sizes!==null&&(this.slot_sizes=a.copyList(m.slot_sizes,[w.TSlotSize])),m.col_to_slot_map!==void 0&&m.col_to_slot_map!==null&&(this.col_to_slot_map=a.copyList(m.col_to_slot_map,[a.copyList,null])))}read(m){for(m.readStructBegin();;){const l=m.readFieldBegin(),T=l.ftype,b=l.fid;if(T==a.Type.STOP)break;switch(b){case 1:if(T==a.Type.LIST){this.slot_sizes=[];const x=m.readListBegin().size||0;for(let B=0;B<x;++B){let F=null;F=new w.TSlotSize,F.read(m),this.slot_sizes.push(F)}m.readListEnd()}else m.skip(T);break;case 2:if(T==a.Type.LIST){this.col_to_slot_map=[];const x=m.readListBegin().size||0;for(let B=0;B<x;++B){let F=null;F=[];const A=m.readListBegin().size||0;for(let M=0;M<A;++M){let R=null;R=m.readI32(),F.push(R)}m.readListEnd(),this.col_to_slot_map.push(F)}m.readListEnd()}else m.skip(T);break;default:m.skip(T)}m.readFieldEnd()}m.readStructEnd()}write(m){if(m.writeStructBegin("TColSlotContext"),this.slot_sizes!==null&&this.slot_sizes!==void 0){m.writeFieldBegin("slot_sizes",a.Type.LIST,1),m.writeListBegin(a.Type.STRUCT,this.slot_sizes.length);for(let l in this.slot_sizes)this.slot_sizes.hasOwnProperty(l)&&(l=this.slot_sizes[l],l.write(m));m.writeListEnd(),m.writeFieldEnd()}if(this.col_to_slot_map!==null&&this.col_to_slot_map!==void 0){m.writeFieldBegin("col_to_slot_map",a.Type.LIST,2),m.writeListBegin(a.Type.LIST,this.col_to_slot_map.length);for(let l in this.col_to_slot_map)if(this.col_to_slot_map.hasOwnProperty(l)){l=this.col_to_slot_map[l],m.writeListBegin(a.Type.I32,l.length);for(let T in l)l.hasOwnProperty(T)&&(T=l[T],m.writeI32(T));m.writeListEnd()}m.writeListEnd(),m.writeFieldEnd()}m.writeFieldStop(),m.writeStructEnd()}},c.exports.TCountDistinctDescriptor=class{constructor(m){this.impl_type=null,this.min_val=null,this.bitmap_sz_bits=null,this.approximate=null,this.device_type=null,this.sub_bitmap_count=null,m&&(m.impl_type!==void 0&&m.impl_type!==null&&(this.impl_type=m.impl_type),m.min_val!==void 0&&m.min_val!==null&&(this.min_val=m.min_val),m.bitmap_sz_bits!==void 0&&m.bitmap_sz_bits!==null&&(this.bitmap_sz_bits=m.bitmap_sz_bits),m.approximate!==void 0&&m.approximate!==null&&(this.approximate=m.approximate),m.device_type!==void 0&&m.device_type!==null&&(this.device_type=m.device_type),m.sub_bitmap_count!==void 0&&m.sub_bitmap_count!==null&&(this.sub_bitmap_count=m.sub_bitmap_count))}read(m){for(m.readStructBegin();;){const l=m.readFieldBegin(),T=l.ftype,b=l.fid;if(T==a.Type.STOP)break;switch(b){case 1:T==a.Type.I32?this.impl_type=m.readI32():m.skip(T);break;case 2:T==a.Type.I64?this.min_val=m.readI64():m.skip(T);break;case 3:T==a.Type.I64?this.bitmap_sz_bits=m.readI64():m.skip(T);break;case 4:T==a.Type.BOOL?this.approximate=m.readBool():m.skip(T);break;case 5:T==a.Type.I32?this.device_type=m.readI32():m.skip(T);break;case 6:T==a.Type.I64?this.sub_bitmap_count=m.readI64():m.skip(T);break;default:m.skip(T)}m.readFieldEnd()}m.readStructEnd()}write(m){m.writeStructBegin("TCountDistinctDescriptor"),this.impl_type!==null&&this.impl_type!==void 0&&(m.writeFieldBegin("impl_type",a.Type.I32,1),m.writeI32(this.impl_type),m.writeFieldEnd()),this.min_val!==null&&this.min_val!==void 0&&(m.writeFieldBegin("min_val",a.Type.I64,2),m.writeI64(this.min_val),m.writeFieldEnd()),this.bitmap_sz_bits!==null&&this.bitmap_sz_bits!==void 0&&(m.writeFieldBegin("bitmap_sz_bits",a.Type.I64,3),m.writeI64(this.bitmap_sz_bits),m.writeFieldEnd()),this.approximate!==null&&this.approximate!==void 0&&(m.writeFieldBegin("approximate",a.Type.BOOL,4),m.writeBool(this.approximate),m.writeFieldEnd()),this.device_type!==null&&this.device_type!==void 0&&(m.writeFieldBegin("device_type",a.Type.I32,5),m.writeI32(this.device_type),m.writeFieldEnd()),this.sub_bitmap_count!==null&&this.sub_bitmap_count!==void 0&&(m.writeFieldBegin("sub_bitmap_count",a.Type.I64,6),m.writeI64(this.sub_bitmap_count),m.writeFieldEnd()),m.writeFieldStop(),m.writeStructEnd()}},c.exports.TResultSetBufferDescriptor=class{constructor(m){this.layout=null,this.keyless=null,this.entry_count=null,this.idx_target_as_key=null,this.min_val=null,this.max_val=null,this.bucket=null,this.group_col_widths=null,this.key_bytewidth=null,this.col_slot_context=null,this.target_groupby_indices=null,this.count_distinct_descriptors=null,this.force_4byte_float=null,m&&(m.layout!==void 0&&m.layout!==null&&(this.layout=m.layout),m.keyless!==void 0&&m.keyless!==null&&(this.keyless=m.keyless),m.entry_count!==void 0&&m.entry_count!==null&&(this.entry_count=m.entry_count),m.idx_target_as_key!==void 0&&m.idx_target_as_key!==null&&(this.idx_target_as_key=m.idx_target_as_key),m.min_val!==void 0&&m.min_val!==null&&(this.min_val=m.min_val),m.max_val!==void 0&&m.max_val!==null&&(this.max_val=m.max_val),m.bucket!==void 0&&m.bucket!==null&&(this.bucket=m.bucket),m.group_col_widths!==void 0&&m.group_col_widths!==null&&(this.group_col_widths=a.copyList(m.group_col_widths,[null])),m.key_bytewidth!==void 0&&m.key_bytewidth!==null&&(this.key_bytewidth=m.key_bytewidth),m.col_slot_context!==void 0&&m.col_slot_context!==null&&(this.col_slot_context=new w.TColSlotContext(m.col_slot_context)),m.target_groupby_indices!==void 0&&m.target_groupby_indices!==null&&(this.target_groupby_indices=a.copyList(m.target_groupby_indices,[null])),m.count_distinct_descriptors!==void 0&&m.count_distinct_descriptors!==null&&(this.count_distinct_descriptors=a.copyList(m.count_distinct_descriptors,[w.TCountDistinctDescriptor])),m.force_4byte_float!==void 0&&m.force_4byte_float!==null&&(this.force_4byte_float=m.force_4byte_float))}read(m){for(m.readStructBegin();;){const l=m.readFieldBegin(),T=l.ftype,b=l.fid;if(T==a.Type.STOP)break;switch(b){case 1:T==a.Type.I32?this.layout=m.readI32():m.skip(T);break;case 2:T==a.Type.BOOL?this.keyless=m.readBool():m.skip(T);break;case 3:T==a.Type.I32?this.entry_count=m.readI32():m.skip(T);break;case 4:T==a.Type.I32?this.idx_target_as_key=m.readI32():m.skip(T);break;case 5:T==a.Type.I64?this.min_val=m.readI64():m.skip(T);break;case 6:T==a.Type.I64?this.max_val=m.readI64():m.skip(T);break;case 7:T==a.Type.I64?this.bucket=m.readI64():m.skip(T);break;case 8:if(T==a.Type.LIST){this.group_col_widths=[];const x=m.readListBegin().size||0;for(let B=0;B<x;++B){let F=null;F=m.readI16(),this.group_col_widths.push(F)}m.readListEnd()}else m.skip(T);break;case 9:T==a.Type.I16?this.key_bytewidth=m.readI16():m.skip(T);break;case 10:T==a.Type.STRUCT?(this.col_slot_context=new w.TColSlotContext,this.col_slot_context.read(m)):m.skip(T);break;case 11:if(T==a.Type.LIST){this.target_groupby_indices=[];const x=m.readListBegin().size||0;for(let B=0;B<x;++B){let F=null;F=m.readI32(),this.target_groupby_indices.push(F)}m.readListEnd()}else m.skip(T);break;case 12:if(T==a.Type.LIST){this.count_distinct_descriptors=[];const x=m.readListBegin().size||0;for(let B=0;B<x;++B){let F=null;F=new w.TCountDistinctDescriptor,F.read(m),this.count_distinct_descriptors.push(F)}m.readListEnd()}else m.skip(T);break;case 13:T==a.Type.BOOL?this.force_4byte_float=m.readBool():m.skip(T);break;default:m.skip(T)}m.readFieldEnd()}m.readStructEnd()}write(m){if(m.writeStructBegin("TResultSetBufferDescriptor"),this.layout!==null&&this.layout!==void 0&&(m.writeFieldBegin("layout",a.Type.I32,1),m.writeI32(this.layout),m.writeFieldEnd()),this.keyless!==null&&this.keyless!==void 0&&(m.writeFieldBegin("keyless",a.Type.BOOL,2),m.writeBool(this.keyless),m.writeFieldEnd()),this.entry_count!==null&&this.entry_count!==void 0&&(m.writeFieldBegin("entry_count",a.Type.I32,3),m.writeI32(this.entry_count),m.writeFieldEnd()),this.idx_target_as_key!==null&&this.idx_target_as_key!==void 0&&(m.writeFieldBegin("idx_target_as_key",a.Type.I32,4),m.writeI32(this.idx_target_as_key),m.writeFieldEnd()),this.min_val!==null&&this.min_val!==void 0&&(m.writeFieldBegin("min_val",a.Type.I64,5),m.writeI64(this.min_val),m.writeFieldEnd()),this.max_val!==null&&this.max_val!==void 0&&(m.writeFieldBegin("max_val",a.Type.I64,6),m.writeI64(this.max_val),m.writeFieldEnd()),this.bucket!==null&&this.bucket!==void 0&&(m.writeFieldBegin("bucket",a.Type.I64,7),m.writeI64(this.bucket),m.writeFieldEnd()),this.group_col_widths!==null&&this.group_col_widths!==void 0){m.writeFieldBegin("group_col_widths",a.Type.LIST,8),m.writeListBegin(a.Type.I16,this.group_col_widths.length);for(let l in this.group_col_widths)this.group_col_widths.hasOwnProperty(l)&&(l=this.group_col_widths[l],m.writeI16(l));m.writeListEnd(),m.writeFieldEnd()}if(this.key_bytewidth!==null&&this.key_bytewidth!==void 0&&(m.writeFieldBegin("key_bytewidth",a.Type.I16,9),m.writeI16(this.key_bytewidth),m.writeFieldEnd()),this.col_slot_context!==null&&this.col_slot_context!==void 0&&(m.writeFieldBegin("col_slot_context",a.Type.STRUCT,10),this.col_slot_context.write(m),m.writeFieldEnd()),this.target_groupby_indices!==null&&this.target_groupby_indices!==void 0){m.writeFieldBegin("target_groupby_indices",a.Type.LIST,11),m.writeListBegin(a.Type.I32,this.target_groupby_indices.length);for(let l in this.target_groupby_indices)this.target_groupby_indices.hasOwnProperty(l)&&(l=this.target_groupby_indices[l],m.writeI32(l));m.writeListEnd(),m.writeFieldEnd()}if(this.count_distinct_descriptors!==null&&this.count_distinct_descriptors!==void 0){m.writeFieldBegin("count_distinct_descriptors",a.Type.LIST,12),m.writeListBegin(a.Type.STRUCT,this.count_distinct_descriptors.length);for(let l in this.count_distinct_descriptors)this.count_distinct_descriptors.hasOwnProperty(l)&&(l=this.count_distinct_descriptors[l],l.write(m));m.writeListEnd(),m.writeFieldEnd()}this.force_4byte_float!==null&&this.force_4byte_float!==void 0&&(m.writeFieldBegin("force_4byte_float",a.Type.BOOL,13),m.writeBool(this.force_4byte_float),m.writeFieldEnd()),m.writeFieldStop(),m.writeStructEnd()}},c.exports.TTargetInfo=class{constructor(m){this.is_agg=null,this.kind=null,this.type=null,this.arg_type=null,this.skip_nulls=null,this.is_distinct=null,m&&(m.is_agg!==void 0&&m.is_agg!==null&&(this.is_agg=m.is_agg),m.kind!==void 0&&m.kind!==null&&(this.kind=m.kind),m.type!==void 0&&m.type!==null&&(this.type=new _.TTypeInfo(m.type)),m.arg_type!==void 0&&m.arg_type!==null&&(this.arg_type=new _.TTypeInfo(m.arg_type)),m.skip_nulls!==void 0&&m.skip_nulls!==null&&(this.skip_nulls=m.skip_nulls),m.is_distinct!==void 0&&m.is_distinct!==null&&(this.is_distinct=m.is_distinct))}read(m){for(m.readStructBegin();;){const l=m.readFieldBegin(),T=l.ftype,b=l.fid;if(T==a.Type.STOP)break;switch(b){case 1:T==a.Type.BOOL?this.is_agg=m.readBool():m.skip(T);break;case 2:T==a.Type.I32?this.kind=m.readI32():m.skip(T);break;case 3:T==a.Type.STRUCT?(this.type=new _.TTypeInfo,this.type.read(m)):m.skip(T);break;case 4:T==a.Type.STRUCT?(this.arg_type=new _.TTypeInfo,this.arg_type.read(m)):m.skip(T);break;case 5:T==a.Type.BOOL?this.skip_nulls=m.readBool():m.skip(T);break;case 6:T==a.Type.BOOL?this.is_distinct=m.readBool():m.skip(T);break;default:m.skip(T)}m.readFieldEnd()}m.readStructEnd()}write(m){m.writeStructBegin("TTargetInfo"),this.is_agg!==null&&this.is_agg!==void 0&&(m.writeFieldBegin("is_agg",a.Type.BOOL,1),m.writeBool(this.is_agg),m.writeFieldEnd()),this.kind!==null&&this.kind!==void 0&&(m.writeFieldBegin("kind",a.Type.I32,2),m.writeI32(this.kind),m.writeFieldEnd()),this.type!==null&&this.type!==void 0&&(m.writeFieldBegin("type",a.Type.STRUCT,3),this.type.write(m),m.writeFieldEnd()),this.arg_type!==null&&this.arg_type!==void 0&&(m.writeFieldBegin("arg_type",a.Type.STRUCT,4),this.arg_type.write(m),m.writeFieldEnd()),this.skip_nulls!==null&&this.skip_nulls!==void 0&&(m.writeFieldBegin("skip_nulls",a.Type.BOOL,5),m.writeBool(this.skip_nulls),m.writeFieldEnd()),this.is_distinct!==null&&this.is_distinct!==void 0&&(m.writeFieldBegin("is_distinct",a.Type.BOOL,6),m.writeBool(this.is_distinct),m.writeFieldEnd()),m.writeFieldStop(),m.writeStructEnd()}},c.exports.TCountDistinctSetStorage=class{constructor(m){this.bitmap=null,this.sparse_set=null,m&&(m.bitmap!==void 0&&m.bitmap!==null&&(this.bitmap=m.bitmap),m.sparse_set!==void 0&&m.sparse_set!==null&&(this.sparse_set=a.copyList(m.sparse_set,[null])))}read(m){for(m.readStructBegin();;){const l=m.readFieldBegin(),T=l.ftype,b=l.fid;if(T==a.Type.STOP)break;switch(b){case 1:T==a.Type.STRING?this.bitmap=m.readBinary():m.skip(T);break;case 2:if(T==a.Type.SET){this.sparse_set=[];const x=m.readSetBegin().size||0;for(let B=0;B<x;++B){let F=null;F=m.readI64(),this.sparse_set.push(F)}m.readSetEnd()}else m.skip(T);break;default:m.skip(T)}m.readFieldEnd()}m.readStructEnd()}write(m){if(m.writeStructBegin("TCountDistinctSetStorage"),this.bitmap!==null&&this.bitmap!==void 0&&(m.writeFieldBegin("bitmap",a.Type.STRING,1),m.writeBinary(this.bitmap),m.writeFieldEnd()),this.sparse_set!==null&&this.sparse_set!==void 0){m.writeFieldBegin("sparse_set",a.Type.SET,2),m.writeSetBegin(a.Type.I64,this.sparse_set.length);for(let l in this.sparse_set)this.sparse_set.hasOwnProperty(l)&&(l=this.sparse_set[l],m.writeI64(l));m.writeSetEnd(),m.writeFieldEnd()}m.writeFieldStop(),m.writeStructEnd()}},c.exports.TCountDistinctSet=class{constructor(m){this.type=null,this.storage=null,this.remote_ptr=null,m&&(m.type!==void 0&&m.type!==null&&(this.type=m.type),m.storage!==void 0&&m.storage!==null&&(this.storage=new w.TCountDistinctSetStorage(m.storage)),m.remote_ptr!==void 0&&m.remote_ptr!==null&&(this.remote_ptr=m.remote_ptr))}read(m){for(m.readStructBegin();;){const l=m.readFieldBegin(),T=l.ftype,b=l.fid;if(T==a.Type.STOP)break;switch(b){case 1:T==a.Type.I32?this.type=m.readI32():m.skip(T);break;case 2:T==a.Type.STRUCT?(this.storage=new w.TCountDistinctSetStorage,this.storage.read(m)):m.skip(T);break;case 3:T==a.Type.I64?this.remote_ptr=m.readI64():m.skip(T);break;default:m.skip(T)}m.readFieldEnd()}m.readStructEnd()}write(m){m.writeStructBegin("TCountDistinctSet"),this.type!==null&&this.type!==void 0&&(m.writeFieldBegin("type",a.Type.I32,1),m.writeI32(this.type),m.writeFieldEnd()),this.storage!==null&&this.storage!==void 0&&(m.writeFieldBegin("storage",a.Type.STRUCT,2),this.storage.write(m),m.writeFieldEnd()),this.remote_ptr!==null&&this.remote_ptr!==void 0&&(m.writeFieldBegin("remote_ptr",a.Type.I64,3),m.writeI64(this.remote_ptr),m.writeFieldEnd()),m.writeFieldStop(),m.writeStructEnd()}},c.exports.TSerializedRows=class{constructor(m){this.buffers=null,this.buffer_lengths=null,this.buffers_total_size=null,this.total_compression_time_ms=null,this.descriptor=null,this.targets=null,this.target_init_vals=null,this.varlen_buffer=null,this.count_distinct_sets=null,this.explanation=null,m&&(m.buffers!==void 0&&m.buffers!==null&&(this.buffers=a.copyList(m.buffers,[null])),m.buffer_lengths!==void 0&&m.buffer_lengths!==null&&(this.buffer_lengths=a.copyList(m.buffer_lengths,[null])),m.buffers_total_size!==void 0&&m.buffers_total_size!==null&&(this.buffers_total_size=m.buffers_total_size),m.total_compression_time_ms!==void 0&&m.total_compression_time_ms!==null&&(this.total_compression_time_ms=m.total_compression_time_ms),m.descriptor!==void 0&&m.descriptor!==null&&(this.descriptor=new w.TResultSetBufferDescriptor(m.descriptor)),m.targets!==void 0&&m.targets!==null&&(this.targets=a.copyList(m.targets,[w.TTargetInfo])),m.target_init_vals!==void 0&&m.target_init_vals!==null&&(this.target_init_vals=a.copyList(m.target_init_vals,[null])),m.varlen_buffer!==void 0&&m.varlen_buffer!==null&&(this.varlen_buffer=a.copyList(m.varlen_buffer,[null])),m.count_distinct_sets!==void 0&&m.count_distinct_sets!==null&&(this.count_distinct_sets=a.copyList(m.count_distinct_sets,[w.TCountDistinctSet])),m.explanation!==void 0&&m.explanation!==null&&(this.explanation=m.explanation))}read(m){for(m.readStructBegin();;){const l=m.readFieldBegin(),T=l.ftype,b=l.fid;if(T==a.Type.STOP)break;switch(b){case 1:if(T==a.Type.LIST){this.buffers=[];const x=m.readListBegin().size||0;for(let B=0;B<x;++B){let F=null;F=m.readBinary(),this.buffers.push(F)}m.readListEnd()}else m.skip(T);break;case 2:if(T==a.Type.LIST){this.buffer_lengths=[];const x=m.readListBegin().size||0;for(let B=0;B<x;++B){let F=null;F=m.readI64(),this.buffer_lengths.push(F)}m.readListEnd()}else m.skip(T);break;case 3:T==a.Type.I64?this.buffers_total_size=m.readI64():m.skip(T);break;case 4:T==a.Type.I32?this.total_compression_time_ms=m.readI32():m.skip(T);break;case 5:T==a.Type.STRUCT?(this.descriptor=new w.TResultSetBufferDescriptor,this.descriptor.read(m)):m.skip(T);break;case 6:if(T==a.Type.LIST){this.targets=[];const x=m.readListBegin().size||0;for(let B=0;B<x;++B){let F=null;F=new w.TTargetInfo,F.read(m),this.targets.push(F)}m.readListEnd()}else m.skip(T);break;case 7:if(T==a.Type.LIST){this.target_init_vals=[];const x=m.readListBegin().size||0;for(let B=0;B<x;++B){let F=null;F=m.readI64(),this.target_init_vals.push(F)}m.readListEnd()}else m.skip(T);break;case 8:if(T==a.Type.LIST){this.varlen_buffer=[];const x=m.readListBegin().size||0;for(let B=0;B<x;++B){let F=null;F=m.readBinary(),this.varlen_buffer.push(F)}m.readListEnd()}else m.skip(T);break;case 9:if(T==a.Type.LIST){this.count_distinct_sets=[];const x=m.readListBegin().size||0;for(let B=0;B<x;++B){let F=null;F=new w.TCountDistinctSet,F.read(m),this.count_distinct_sets.push(F)}m.readListEnd()}else m.skip(T);break;case 10:T==a.Type.STRING?this.explanation=m.readString():m.skip(T);break;default:m.skip(T)}m.readFieldEnd()}m.readStructEnd()}write(m){if(m.writeStructBegin("TSerializedRows"),this.buffers!==null&&this.buffers!==void 0){m.writeFieldBegin("buffers",a.Type.LIST,1),m.writeListBegin(a.Type.STRING,this.buffers.length);for(let l in this.buffers)this.buffers.hasOwnProperty(l)&&(l=this.buffers[l],m.writeBinary(l));m.writeListEnd(),m.writeFieldEnd()}if(this.buffer_lengths!==null&&this.buffer_lengths!==void 0){m.writeFieldBegin("buffer_lengths",a.Type.LIST,2),m.writeListBegin(a.Type.I64,this.buffer_lengths.length);for(let l in this.buffer_lengths)this.buffer_lengths.hasOwnProperty(l)&&(l=this.buffer_lengths[l],m.writeI64(l));m.writeListEnd(),m.writeFieldEnd()}if(this.buffers_total_size!==null&&this.buffers_total_size!==void 0&&(m.writeFieldBegin("buffers_total_size",a.Type.I64,3),m.writeI64(this.buffers_total_size),m.writeFieldEnd()),this.total_compression_time_ms!==null&&this.total_compression_time_ms!==void 0&&(m.writeFieldBegin("total_compression_time_ms",a.Type.I32,4),m.writeI32(this.total_compression_time_ms),m.writeFieldEnd()),this.descriptor!==null&&this.descriptor!==void 0&&(m.writeFieldBegin("descriptor",a.Type.STRUCT,5),this.descriptor.write(m),m.writeFieldEnd()),this.targets!==null&&this.targets!==void 0){m.writeFieldBegin("targets",a.Type.LIST,6),m.writeListBegin(a.Type.STRUCT,this.targets.length);for(let l in this.targets)this.targets.hasOwnProperty(l)&&(l=this.targets[l],l.write(m));m.writeListEnd(),m.writeFieldEnd()}if(this.target_init_vals!==null&&this.target_init_vals!==void 0){m.writeFieldBegin("target_init_vals",a.Type.LIST,7),m.writeListBegin(a.Type.I64,this.target_init_vals.length);for(let l in this.target_init_vals)this.target_init_vals.hasOwnProperty(l)&&(l=this.target_init_vals[l],m.writeI64(l));m.writeListEnd(),m.writeFieldEnd()}if(this.varlen_buffer!==null&&this.varlen_buffer!==void 0){m.writeFieldBegin("varlen_buffer",a.Type.LIST,8),m.writeListBegin(a.Type.STRING,this.varlen_buffer.length);for(let l in this.varlen_buffer)this.varlen_buffer.hasOwnProperty(l)&&(l=this.varlen_buffer[l],m.writeBinary(l));m.writeListEnd(),m.writeFieldEnd()}if(this.count_distinct_sets!==null&&this.count_distinct_sets!==void 0){m.writeFieldBegin("count_distinct_sets",a.Type.LIST,9),m.writeListBegin(a.Type.STRUCT,this.count_distinct_sets.length);for(let l in this.count_distinct_sets)this.count_distinct_sets.hasOwnProperty(l)&&(l=this.count_distinct_sets[l],l.write(m));m.writeListEnd(),m.writeFieldEnd()}this.explanation!==null&&this.explanation!==void 0&&(m.writeFieldBegin("explanation",a.Type.STRING,10),m.writeString(this.explanation),m.writeFieldEnd()),m.writeFieldStop(),m.writeStructEnd()}}},2003:c=>{c.exports=n}},s={};function o(c){if(s[c])return s[c].exports;var d=s[c]={exports:{}};return i[c](d,d.exports,o),d.exports}return o.n=c=>{var d=c&&c.__esModule?()=>c.default:()=>c;return o.d(d,{a:d}),d},o.d=(c,d)=>{for(var f in d)o.o(d,f)&&!o.o(c,f)&&Object.defineProperty(c,f,{enumerable:!0,get:d[f]})},o.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),o.o=(c,d)=>Object.prototype.hasOwnProperty.call(c,d),o.r=c=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},o(7123)})()})})($q);const ede=DQ($q.exports);new ede;class tde{constructor(e){Pn(this,"db");Pn(this,"views");Pn(this,"filters");Pn(this,"index");this.db=e,this.views=new pae,this.filters=new Map,this.index=new Map}get passiveFilters(){if(this.views.active instanceof yh)throw Error("No filter for 0D view / count");return fae(this.filters,this.views.active.dimension)}view0D(){const e=new yh(this);return this.views.add(e),e}view1D(e){const n=new l_(this,e);return this.views.add(n),n}async fetchInitialViewCounts(){this.views.forEach(async e=>{await e.all()})}}const nde=new TextDecoder("utf-8"),Ak=t=>nde.decode(t),ide=new TextEncoder,VO=t=>ide.encode(t),[nPe,sde]=(()=>{const t=()=>{throw new Error("BigInt is not available in this environment")};function e(){throw t()}return e.asIntN=()=>{throw t()},e.asUintN=()=>{throw t()},typeof BigInt<"u"?[BigInt,!0]:[e,!1]})(),[om,iPe]=(()=>{const t=()=>{throw new Error("BigInt64Array is not available in this environment")};class e{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}}return typeof BigInt64Array<"u"?[BigInt64Array,!0]:[e,!1]})(),[lm,sPe]=(()=>{const t=()=>{throw new Error("BigUint64Array is not available in this environment")};class e{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}}return typeof BigUint64Array<"u"?[BigUint64Array,!0]:[e,!1]})(),rde=t=>typeof t=="number",ade=t=>typeof t=="boolean",es=t=>typeof t=="function",Ia=t=>t!=null&&Object(t)===t,ry=t=>Ia(t)&&es(t.then),sE=t=>Ia(t)&&es(t[Symbol.iterator]),HO=t=>Ia(t)&&es(t[Symbol.asyncIterator]),Nk=t=>Ia(t)&&Ia(t.schema),qq=t=>Ia(t)&&"done"in t&&"value"in t,Gq=t=>Ia(t)&&es(t.stat)&&rde(t.fd),Vq=t=>Ia(t)&&WO(t.body),Hq=t=>"_getDOMStream"in t&&"_getNodeStream"in t,WO=t=>Ia(t)&&es(t.cancel)&&es(t.getReader)&&!Hq(t),Wq=t=>Ia(t)&&es(t.read)&&es(t.pipe)&&ade(t.readable)&&!Hq(t),ode=t=>Ia(t)&&es(t.clear)&&es(t.bytes)&&es(t.position)&&es(t.setPosition)&&es(t.capacity)&&es(t.getBufferIdentifier)&&es(t.createLong),YO=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function lde(t){const e=t[0]?[t[0]]:[];let n,i,s,o;for(let c,d,f=0,u=0,a=t.length;++f<a;){if(c=e[u],d=t[f],!c||!d||c.buffer!==d.buffer||d.byteOffset<c.byteOffset){d&&(e[++u]=d);continue}if({byteOffset:n,byteLength:s}=c,{byteOffset:i,byteLength:o}=d,n+s<i||i+o<n){d&&(e[++u]=d);continue}e[u]=new Uint8Array(c.buffer,n,i-n+o)}return e}function yD(t,e,n=0,i=e.byteLength){const s=t.byteLength,o=new Uint8Array(t.buffer,t.byteOffset,s),c=new Uint8Array(e.buffer,e.byteOffset,Math.min(i,s));return o.set(c,n),t}function Lo(t,e){const n=lde(t),i=n.reduce((a,_)=>a+_.byteLength,0);let s,o,c,d=0,f=-1;const u=Math.min(e||Number.POSITIVE_INFINITY,i);for(const a=n.length;++f<a;){if(s=n[f],o=s.subarray(0,Math.min(s.length,u-d)),u<=d+o.length){o.length<s.length?n[f]=s.subarray(o.length):o.length===s.length&&f++,c?yD(c,o,d):c=o;break}yD(c||(c=new Uint8Array(u)),o,d),d+=o.length}return[c||new Uint8Array(0),n.slice(f),i-(c?c.byteLength:0)]}function un(t,e){let n=qq(e)?e.value:e;return n instanceof t?t===Uint8Array?new t(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=VO(n)),n instanceof ArrayBuffer?new t(n):n instanceof YO?new t(n):ode(n)?un(t,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new t(0):new t(n.buffer,n.byteOffset,n.byteLength/t.BYTES_PER_ELEMENT):t.from(n)):new t(0)}const Ag=t=>un(Int32Array,t),Jt=t=>un(Uint8Array,t),Ck=t=>(t.next(),t);function*cde(t,e){const n=function*(s){yield s},i=typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof YO?n(e):sE(e)?e:n(e);return yield*Ck(function*(s){let o=null;do o=s.next(yield un(t,o));while(!o.done)}(i[Symbol.iterator]())),new t}const dde=t=>cde(Uint8Array,t);function Yq(t,e){return Ln(this,arguments,function*(){if(ry(e))return yield Be(yield Be(yield*Rc(Fs(Yq(t,yield Be(e))))));const i=function(c){return Ln(this,arguments,function*(){yield yield Be(yield Be(c))})},s=function(c){return Ln(this,arguments,function*(){yield Be(yield*Rc(Fs(Ck(function*(d){let f=null;do f=d.next(yield f==null?void 0:f.value);while(!f.done)}(c[Symbol.iterator]())))))})},o=typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof YO?i(e):sE(e)?s(e):HO(e)?e:i(e);return yield Be(yield*Rc(Fs(Ck(function(c){return Ln(this,arguments,function*(){let d=null;do d=yield Be(c.next(yield yield Be(un(t,d))));while(!d.done)})}(o[Symbol.asyncIterator]()))))),yield Be(new t)})}const fde=t=>Yq(Uint8Array,t);function ude(t,e){let n=0;const i=t.length;if(i!==e.length)return!1;if(i>0)do if(t[n]!==e[n])return!1;while(++n<i);return!0}const wr={fromIterable(t){return Ob(hde(t))},fromAsyncIterable(t){return Ob(pde(t))},fromDOMStream(t){return Ob(gde(t))},fromNodeStream(t){return Ob(yde(t))},toDOMStream(t,e){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(t,e){throw new Error('"toNodeStream" not available in this environment')}},Ob=t=>(t.next(),t);function*hde(t){let e,n=!1,i=[],s,o,c,d=0;function f(){return o==="peek"?Lo(i,c)[0]:([s,i,d]=Lo(i,c),s)}({cmd:o,size:c}=yield null);const u=dde(t)[Symbol.iterator]();try{do if({done:e,value:s}=Number.isNaN(c-d)?u.next():u.next(c-d),!e&&s.byteLength>0&&(i.push(s),d+=s.byteLength),e||c<=d)do({cmd:o,size:c}=yield f());while(c<d);while(!e)}catch(a){(n=!0)&&typeof u.throw=="function"&&u.throw(a)}finally{n===!1&&typeof u.return=="function"&&u.return(null)}return null}function pde(t){return Ln(this,arguments,function*(){let n,i=!1,s=[],o,c,d,f=0;function u(){return c==="peek"?Lo(s,d)[0]:([o,s,f]=Lo(s,d),o)}({cmd:c,size:d}=yield yield Be(null));const a=fde(t)[Symbol.asyncIterator]();try{do if({done:n,value:o}=Number.isNaN(d-f)?yield Be(a.next()):yield Be(a.next(d-f)),!n&&o.byteLength>0&&(s.push(o),f+=o.byteLength),n||d<=f)do({cmd:c,size:d}=yield yield Be(u()));while(d<f);while(!n)}catch(_){(i=!0)&&typeof a.throw=="function"&&(yield Be(a.throw(_)))}finally{i===!1&&typeof a.return=="function"&&(yield Be(a.return(new Uint8Array(0))))}return yield Be(null)})}function gde(t){return Ln(this,arguments,function*(){let n=!1,i=!1,s=[],o,c,d,f=0;function u(){return c==="peek"?Lo(s,d)[0]:([o,s,f]=Lo(s,d),o)}({cmd:c,size:d}=yield yield Be(null));const a=new _de(t);try{do if({done:n,value:o}=Number.isNaN(d-f)?yield Be(a.read()):yield Be(a.read(d-f)),!n&&o.byteLength>0&&(s.push(Jt(o)),f+=o.byteLength),n||d<=f)do({cmd:c,size:d}=yield yield Be(u()));while(d<f);while(!n)}catch(_){(i=!0)&&(yield Be(a.cancel(_)))}finally{i===!1?yield Be(a.cancel()):t.locked&&a.releaseLock()}return yield Be(null)})}class _de{constructor(e){this.source=e,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(e){return ye(this,void 0,void 0,function*(){const{reader:n,source:i}=this;n&&(yield n.cancel(e).catch(()=>{})),i&&i.locked&&this.releaseLock()})}read(e){return ye(this,void 0,void 0,function*(){if(e===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Jt(n)),n})}}const Ix=(t,e)=>{const n=s=>i([e,s]);let i;return[e,n,new Promise(s=>(i=s)&&t.once(e,n))]};function yde(t){return Ln(this,arguments,function*(){const n=[];let i="error",s=!1,o=null,c,d,f=0,u=[],a;function _(){return c==="peek"?Lo(u,d)[0]:([a,u,f]=Lo(u,d),a)}if({cmd:c,size:d}=yield yield Be(null),t.isTTY)return yield yield Be(new Uint8Array(0)),yield Be(null);try{n[0]=Ix(t,"end"),n[1]=Ix(t,"error");do{if(n[2]=Ix(t,"readable"),[i,o]=yield Be(Promise.race(n.map(m=>m[2]))),i==="error")break;if((s=i==="end")||(Number.isFinite(d-f)?(a=Jt(t.read(d-f)),a.byteLength<d-f&&(a=Jt(t.read()))):a=Jt(t.read()),a.byteLength>0&&(u.push(a),f+=a.byteLength)),s||d<=f)do({cmd:c,size:d}=yield yield Be(_()));while(d<f)}while(!s)}finally{yield Be(w(n,i==="error"?o:null))}return yield Be(null);function w(m,l){return a=u=null,new Promise((T,b)=>{for(const[S,x]of m)t.off(S,x);try{const S=t.destroy;S&&S.call(t,l),l=void 0}catch(S){l=S||l}finally{l!=null?b(l):T()}})}})}var Br;(function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"})(Br||(Br={}));var Fa;(function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"})(Fa||(Fa={}));var Os;(function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"})(Os||(Os={}));var $l;(function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"})($l||($l={}));var Wt;(function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"})(Wt||(Wt={}));var td;(function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(td||(td={}));var rn;(function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"})(rn||(rn={}));var ne;(function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth"})(ne||(ne={}));var ul;(function(t){t[t.OFFSET=0]="OFFSET",t[t.DATA=1]="DATA",t[t.VALIDITY=2]="VALIDITY",t[t.TYPE=3]="TYPE"})(ul||(ul={}));const mde=void 0;function ay(t){if(t===null)return"null";if(t===mde)return"undefined";switch(typeof t){case"number":return`${t}`;case"bigint":return`${t}`;case"string":return`"${t}"`}return typeof t[Symbol.toPrimitive]=="function"?t[Symbol.toPrimitive]("string"):ArrayBuffer.isView(t)?t instanceof om||t instanceof lm?`[${[...t].map(e=>ay(e))}]`:`[${t}]`:ArrayBuffer.isView(t)?`[${t}]`:JSON.stringify(t,(e,n)=>typeof n=="bigint"?`${n}`:n)}const wde=Symbol.for("isArrowBigNum");function Pa(t,...e){return e.length===0?Object.setPrototypeOf(un(this.TypedArray,t),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(t,...e),this.constructor.prototype)}Pa.prototype[wde]=!0;Pa.prototype.toJSON=function(){return`"${Rf(this)}"`};Pa.prototype.valueOf=function(){return Xq(this)};Pa.prototype.toString=function(){return Rf(this)};Pa.prototype[Symbol.toPrimitive]=function(t="default"){switch(t){case"number":return Xq(this);case"string":return Rf(this);case"default":return Rk(this)}return Rf(this)};function Rh(...t){return Pa.apply(this,t)}function Lh(...t){return Pa.apply(this,t)}function oy(...t){return Pa.apply(this,t)}Object.setPrototypeOf(Rh.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Lh.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(oy.prototype,Object.create(Uint32Array.prototype));Object.assign(Rh.prototype,Pa.prototype,{constructor:Rh,signed:!0,TypedArray:Int32Array,BigIntArray:om});Object.assign(Lh.prototype,Pa.prototype,{constructor:Lh,signed:!1,TypedArray:Uint32Array,BigIntArray:lm});Object.assign(oy.prototype,Pa.prototype,{constructor:oy,signed:!0,TypedArray:Uint32Array,BigIntArray:lm});function Xq(t){const{buffer:e,byteOffset:n,length:i,signed:s}=t,o=new lm(e,n,i),c=s&&o[o.length-1]&BigInt(1)<<BigInt(63);let d=BigInt(c?1:0),f=BigInt(0);if(c){for(const u of o)d+=~u*(BigInt(1)<<BigInt(32)*f++);d*=BigInt(-1)}else for(const u of o)d+=u*(BigInt(1)<<BigInt(32)*f++);return d}let Rf,Rk;sde?(Rk=t=>t.byteLength===8?new t.BigIntArray(t.buffer,t.byteOffset,1)[0]:Fx(t),Rf=t=>t.byteLength===8?`${new t.BigIntArray(t.buffer,t.byteOffset,1)[0]}`:Fx(t)):(Rf=Fx,Rk=Rf);function Fx(t){let e="";const n=new Uint32Array(2);let i=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2);const s=new Uint32Array((i=new Uint16Array(i).reverse()).buffer);let o=-1;const c=i.length-1;do{for(n[0]=i[o=0];o<c;)i[o++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+i[o];i[o]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,e=`${n[0]}${e}`}while(s[0]||s[1]||s[2]||s[3]);return e!=null?e:"0"}class XO{static new(e,n){switch(n){case!0:return new Rh(e);case!1:return new Lh(e)}switch(e.constructor){case Int8Array:case Int16Array:case Int32Array:case om:return new Rh(e)}return e.byteLength===16?new oy(e):new Lh(e)}static signed(e){return new Rh(e)}static unsigned(e){return new Lh(e)}static decimal(e){return new oy(e)}constructor(e,n){return XO.new(e,n)}}var Kq,Jq,Qq,Zq,e7,t7,n7,i7,s7,r7,a7,o7,l7,c7,d7,f7,u7,h7,p7;class yt{static isNull(e){return(e==null?void 0:e.typeId)===ne.Null}static isInt(e){return(e==null?void 0:e.typeId)===ne.Int}static isFloat(e){return(e==null?void 0:e.typeId)===ne.Float}static isBinary(e){return(e==null?void 0:e.typeId)===ne.Binary}static isUtf8(e){return(e==null?void 0:e.typeId)===ne.Utf8}static isBool(e){return(e==null?void 0:e.typeId)===ne.Bool}static isDecimal(e){return(e==null?void 0:e.typeId)===ne.Decimal}static isDate(e){return(e==null?void 0:e.typeId)===ne.Date}static isTime(e){return(e==null?void 0:e.typeId)===ne.Time}static isTimestamp(e){return(e==null?void 0:e.typeId)===ne.Timestamp}static isInterval(e){return(e==null?void 0:e.typeId)===ne.Interval}static isList(e){return(e==null?void 0:e.typeId)===ne.List}static isStruct(e){return(e==null?void 0:e.typeId)===ne.Struct}static isUnion(e){return(e==null?void 0:e.typeId)===ne.Union}static isFixedSizeBinary(e){return(e==null?void 0:e.typeId)===ne.FixedSizeBinary}static isFixedSizeList(e){return(e==null?void 0:e.typeId)===ne.FixedSizeList}static isMap(e){return(e==null?void 0:e.typeId)===ne.Map}static isDictionary(e){return(e==null?void 0:e.typeId)===ne.Dictionary}static isDenseUnion(e){return yt.isUnion(e)&&e.mode===Fa.Dense}static isSparseUnion(e){return yt.isUnion(e)&&e.mode===Fa.Sparse}get typeId(){return ne.NONE}}Kq=Symbol.toStringTag;yt[Kq]=(t=>(t.children=null,t.ArrayType=Array,t[Symbol.toStringTag]="DataType"))(yt.prototype);class nd extends yt{toString(){return"Null"}get typeId(){return ne.Null}}Jq=Symbol.toStringTag;nd[Jq]=(t=>t[Symbol.toStringTag]="Null")(nd.prototype);class id extends yt{constructor(e,n){super(),this.isSigned=e,this.bitWidth=n}get typeId(){return ne.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?om:lm}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}Qq=Symbol.toStringTag;id[Qq]=(t=>(t.isSigned=null,t.bitWidth=null,t[Symbol.toStringTag]="Int"))(id.prototype);class ly extends id{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}Object.defineProperty(ly.prototype,"ArrayType",{value:Int32Array});class cy extends yt{constructor(e){super(),this.precision=e}get typeId(){return ne.Float}get ArrayType(){switch(this.precision){case Os.HALF:return Uint16Array;case Os.SINGLE:return Float32Array;case Os.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}Zq=Symbol.toStringTag;cy[Zq]=(t=>(t.precision=null,t[Symbol.toStringTag]="Float"))(cy.prototype);class QT extends yt{constructor(){super()}get typeId(){return ne.Binary}toString(){return"Binary"}}e7=Symbol.toStringTag;QT[e7]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Binary"))(QT.prototype);class ZT extends yt{constructor(){super()}get typeId(){return ne.Utf8}toString(){return"Utf8"}}t7=Symbol.toStringTag;ZT[t7]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Utf8"))(ZT.prototype);class ev extends yt{constructor(){super()}get typeId(){return ne.Bool}toString(){return"Bool"}}n7=Symbol.toStringTag;ev[n7]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Bool"))(ev.prototype);class tv extends yt{constructor(e,n,i=128){super(),this.scale=e,this.precision=n,this.bitWidth=i}get typeId(){return ne.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}i7=Symbol.toStringTag;tv[i7]=(t=>(t.scale=null,t.precision=null,t.ArrayType=Uint32Array,t[Symbol.toStringTag]="Decimal"))(tv.prototype);class nv extends yt{constructor(e){super(),this.unit=e}get typeId(){return ne.Date}toString(){return`Date${(this.unit+1)*32}<${$l[this.unit]}>`}}s7=Symbol.toStringTag;nv[s7]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Date"))(nv.prototype);class dy extends yt{constructor(e,n){super(),this.unit=e,this.bitWidth=n}get typeId(){return ne.Time}toString(){return`Time${this.bitWidth}<${Wt[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return om}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}r7=Symbol.toStringTag;dy[r7]=(t=>(t.unit=null,t.bitWidth=null,t[Symbol.toStringTag]="Time"))(dy.prototype);class iv extends yt{constructor(e,n){super(),this.unit=e,this.timezone=n}get typeId(){return ne.Timestamp}toString(){return`Timestamp<${Wt[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}a7=Symbol.toStringTag;iv[a7]=(t=>(t.unit=null,t.timezone=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Timestamp"))(iv.prototype);class sv extends yt{constructor(e){super(),this.unit=e}get typeId(){return ne.Interval}toString(){return`Interval<${td[this.unit]}>`}}o7=Symbol.toStringTag;sv[o7]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Interval"))(sv.prototype);class rv extends yt{constructor(e){super(),this.children=[e]}get typeId(){return ne.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}l7=Symbol.toStringTag;rv[l7]=(t=>(t.children=null,t[Symbol.toStringTag]="List"))(rv.prototype);class as extends yt{constructor(e){super(),this.children=e}get typeId(){return ne.Struct}toString(){return`Struct<{${this.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}c7=Symbol.toStringTag;as[c7]=(t=>(t.children=null,t[Symbol.toStringTag]="Struct"))(as.prototype);class av extends yt{constructor(e,n,i){super(),this.mode=e,this.children=i,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((s,o,c)=>(s[o]=c)&&s||s,Object.create(null))}get typeId(){return ne.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(e=>`${e.type}`).join(" | ")}>`}}d7=Symbol.toStringTag;av[d7]=(t=>(t.mode=null,t.typeIds=null,t.children=null,t.typeIdToChildIndex=null,t.ArrayType=Int8Array,t[Symbol.toStringTag]="Union"))(av.prototype);class ov extends yt{constructor(e){super(),this.byteWidth=e}get typeId(){return ne.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}f7=Symbol.toStringTag;ov[f7]=(t=>(t.byteWidth=null,t.ArrayType=Uint8Array,t[Symbol.toStringTag]="FixedSizeBinary"))(ov.prototype);class lv extends yt{constructor(e,n){super(),this.listSize=e,this.children=[n]}get typeId(){return ne.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}u7=Symbol.toStringTag;lv[u7]=(t=>(t.children=null,t.listSize=null,t[Symbol.toStringTag]="FixedSizeList"))(lv.prototype);class cv extends yt{constructor(e,n=!1){super(),this.children=[e],this.keysSorted=n}get typeId(){return ne.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}h7=Symbol.toStringTag;cv[h7]=(t=>(t.children=null,t.keysSorted=null,t[Symbol.toStringTag]="Map_"))(cv.prototype);const bde=(t=>()=>++t)(-1);class pp extends yt{constructor(e,n,i,s){super(),this.indices=n,this.dictionary=e,this.isOrdered=s||!1,this.id=i==null?bde():typeof i=="number"?i:i.low}get typeId(){return ne.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}p7=Symbol.toStringTag;pp[p7]=(t=>(t.id=null,t.indices=null,t.isOrdered=null,t.dictionary=null,t[Symbol.toStringTag]="Dictionary"))(pp.prototype);function hl(t){const e=t;switch(t.typeId){case ne.Decimal:return t.bitWidth/32;case ne.Timestamp:return 2;case ne.Date:return 1+e.unit;case ne.Interval:return 1+e.unit;case ne.FixedSizeList:return e.listSize;case ne.FixedSizeBinary:return e.byteWidth;default:return 1}}class jt{visitMany(e,...n){return e.map((i,s)=>this.visit(i,...n.map(o=>o[s])))}visit(...e){return this.getVisitFn(e[0],!1).apply(this,e)}getVisitFn(e,n=!0){return Tde(this,e,n)}getVisitFnByTypeId(e,n=!0){return dh(this,e,n)}visitNull(e,...n){return null}visitBool(e,...n){return null}visitInt(e,...n){return null}visitFloat(e,...n){return null}visitUtf8(e,...n){return null}visitBinary(e,...n){return null}visitFixedSizeBinary(e,...n){return null}visitDate(e,...n){return null}visitTimestamp(e,...n){return null}visitTime(e,...n){return null}visitDecimal(e,...n){return null}visitList(e,...n){return null}visitStruct(e,...n){return null}visitUnion(e,...n){return null}visitDictionary(e,...n){return null}visitInterval(e,...n){return null}visitFixedSizeList(e,...n){return null}visitMap(e,...n){return null}}function Tde(t,e,n=!0){return typeof e=="number"?dh(t,e,n):typeof e=="string"&&e in ne?dh(t,ne[e],n):e&&e instanceof yt?dh(t,mD(e),n):(e==null?void 0:e.type)&&e.type instanceof yt?dh(t,mD(e.type),n):dh(t,ne.NONE,n)}function dh(t,e,n=!0){let i=null;switch(e){case ne.Null:i=t.visitNull;break;case ne.Bool:i=t.visitBool;break;case ne.Int:i=t.visitInt;break;case ne.Int8:i=t.visitInt8||t.visitInt;break;case ne.Int16:i=t.visitInt16||t.visitInt;break;case ne.Int32:i=t.visitInt32||t.visitInt;break;case ne.Int64:i=t.visitInt64||t.visitInt;break;case ne.Uint8:i=t.visitUint8||t.visitInt;break;case ne.Uint16:i=t.visitUint16||t.visitInt;break;case ne.Uint32:i=t.visitUint32||t.visitInt;break;case ne.Uint64:i=t.visitUint64||t.visitInt;break;case ne.Float:i=t.visitFloat;break;case ne.Float16:i=t.visitFloat16||t.visitFloat;break;case ne.Float32:i=t.visitFloat32||t.visitFloat;break;case ne.Float64:i=t.visitFloat64||t.visitFloat;break;case ne.Utf8:i=t.visitUtf8;break;case ne.Binary:i=t.visitBinary;break;case ne.FixedSizeBinary:i=t.visitFixedSizeBinary;break;case ne.Date:i=t.visitDate;break;case ne.DateDay:i=t.visitDateDay||t.visitDate;break;case ne.DateMillisecond:i=t.visitDateMillisecond||t.visitDate;break;case ne.Timestamp:i=t.visitTimestamp;break;case ne.TimestampSecond:i=t.visitTimestampSecond||t.visitTimestamp;break;case ne.TimestampMillisecond:i=t.visitTimestampMillisecond||t.visitTimestamp;break;case ne.TimestampMicrosecond:i=t.visitTimestampMicrosecond||t.visitTimestamp;break;case ne.TimestampNanosecond:i=t.visitTimestampNanosecond||t.visitTimestamp;break;case ne.Time:i=t.visitTime;break;case ne.TimeSecond:i=t.visitTimeSecond||t.visitTime;break;case ne.TimeMillisecond:i=t.visitTimeMillisecond||t.visitTime;break;case ne.TimeMicrosecond:i=t.visitTimeMicrosecond||t.visitTime;break;case ne.TimeNanosecond:i=t.visitTimeNanosecond||t.visitTime;break;case ne.Decimal:i=t.visitDecimal;break;case ne.List:i=t.visitList;break;case ne.Struct:i=t.visitStruct;break;case ne.Union:i=t.visitUnion;break;case ne.DenseUnion:i=t.visitDenseUnion||t.visitUnion;break;case ne.SparseUnion:i=t.visitSparseUnion||t.visitUnion;break;case ne.Dictionary:i=t.visitDictionary;break;case ne.Interval:i=t.visitInterval;break;case ne.IntervalDayTime:i=t.visitIntervalDayTime||t.visitInterval;break;case ne.IntervalYearMonth:i=t.visitIntervalYearMonth||t.visitInterval;break;case ne.FixedSizeList:i=t.visitFixedSizeList;break;case ne.Map:i=t.visitMap;break}if(typeof i=="function")return i;if(!n)return()=>null;throw new Error(`Unrecognized type '${ne[e]}'`)}function mD(t){switch(t.typeId){case ne.Null:return ne.Null;case ne.Int:{const{bitWidth:e,isSigned:n}=t;switch(e){case 8:return n?ne.Int8:ne.Uint8;case 16:return n?ne.Int16:ne.Uint16;case 32:return n?ne.Int32:ne.Uint32;case 64:return n?ne.Int64:ne.Uint64}return ne.Int}case ne.Float:switch(t.precision){case Os.HALF:return ne.Float16;case Os.SINGLE:return ne.Float32;case Os.DOUBLE:return ne.Float64}return ne.Float;case ne.Binary:return ne.Binary;case ne.Utf8:return ne.Utf8;case ne.Bool:return ne.Bool;case ne.Decimal:return ne.Decimal;case ne.Time:switch(t.unit){case Wt.SECOND:return ne.TimeSecond;case Wt.MILLISECOND:return ne.TimeMillisecond;case Wt.MICROSECOND:return ne.TimeMicrosecond;case Wt.NANOSECOND:return ne.TimeNanosecond}return ne.Time;case ne.Timestamp:switch(t.unit){case Wt.SECOND:return ne.TimestampSecond;case Wt.MILLISECOND:return ne.TimestampMillisecond;case Wt.MICROSECOND:return ne.TimestampMicrosecond;case Wt.NANOSECOND:return ne.TimestampNanosecond}return ne.Timestamp;case ne.Date:switch(t.unit){case $l.DAY:return ne.DateDay;case $l.MILLISECOND:return ne.DateMillisecond}return ne.Date;case ne.Interval:switch(t.unit){case td.DAY_TIME:return ne.IntervalDayTime;case td.YEAR_MONTH:return ne.IntervalYearMonth}return ne.Interval;case ne.Map:return ne.Map;case ne.List:return ne.List;case ne.Struct:return ne.Struct;case ne.Union:switch(t.mode){case Fa.Dense:return ne.DenseUnion;case Fa.Sparse:return ne.SparseUnion}return ne.Union;case ne.FixedSizeBinary:return ne.FixedSizeBinary;case ne.FixedSizeList:return ne.FixedSizeList;case ne.Dictionary:return ne.Dictionary}throw new Error(`Unrecognized type '${ne[t.typeId]}'`)}jt.prototype.visitInt8=null;jt.prototype.visitInt16=null;jt.prototype.visitInt32=null;jt.prototype.visitInt64=null;jt.prototype.visitUint8=null;jt.prototype.visitUint16=null;jt.prototype.visitUint32=null;jt.prototype.visitUint64=null;jt.prototype.visitFloat16=null;jt.prototype.visitFloat32=null;jt.prototype.visitFloat64=null;jt.prototype.visitDateDay=null;jt.prototype.visitDateMillisecond=null;jt.prototype.visitTimestampSecond=null;jt.prototype.visitTimestampMillisecond=null;jt.prototype.visitTimestampMicrosecond=null;jt.prototype.visitTimestampNanosecond=null;jt.prototype.visitTimeSecond=null;jt.prototype.visitTimeMillisecond=null;jt.prototype.visitTimeMicrosecond=null;jt.prototype.visitTimeNanosecond=null;jt.prototype.visitDenseUnion=null;jt.prototype.visitSparseUnion=null;jt.prototype.visitIntervalDayTime=null;jt.prototype.visitIntervalYearMonth=null;const g7=new Float64Array(1),Yu=new Uint32Array(g7.buffer);function _7(t){const e=(t&31744)>>10,n=(t&1023)/1024,i=Math.pow(-1,(t&32768)>>15);switch(e){case 31:return i*(n?Number.NaN:1/0);case 0:return i*(n?6103515625e-14*n:0)}return i*Math.pow(2,e-15)*(1+n)}function vde(t){if(t!==t)return 32256;g7[0]=t;const e=(Yu[1]&2147483648)>>16&65535;let n=Yu[1]&2146435072,i=0;return n>=1089470464?Yu[0]>0?n=31744:(n=(n&2080374784)>>16,i=(Yu[1]&1048575)>>10):n<=1056964608?(i=1048576+(Yu[1]&1048575),i=1048576+(i<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,i=(Yu[1]&1048575)+512>>10),e|n|i&65535}class pt extends jt{}function Tt(t){return(e,n,i)=>{if(e.setValid(n,i!=null))return t(e,n,i)}}const Ede=(t,e,n)=>{t[e]=Math.trunc(n/864e5)},KO=(t,e,n)=>{t[e]=Math.trunc(n%4294967296),t[e+1]=Math.trunc(n/4294967296)},Sde=(t,e,n)=>{t[e]=Math.trunc(n*1e3%4294967296),t[e+1]=Math.trunc(n*1e3/4294967296)},xde=(t,e,n)=>{t[e]=Math.trunc(n*1e6%4294967296),t[e+1]=Math.trunc(n*1e6/4294967296)},y7=(t,e,n,i)=>{if(n+1<e.length){const{[n]:s,[n+1]:o}=e;t.set(i.subarray(0,o-s),s)}},Bde=({offset:t,values:e},n,i)=>{const s=t+n;i?e[s>>3]|=1<<s%8:e[s>>3]&=~(1<<s%8)},Yl=({values:t},e,n)=>{t[e]=n},JO=({values:t},e,n)=>{t[e]=n},m7=({values:t},e,n)=>{t[e]=vde(n)},kde=(t,e,n)=>{switch(t.type.precision){case Os.HALF:return m7(t,e,n);case Os.SINGLE:case Os.DOUBLE:return JO(t,e,n)}},w7=({values:t},e,n)=>{Ede(t,e,n.valueOf())},b7=({values:t},e,n)=>{KO(t,e*2,n.valueOf())},Ide=({stride:t,values:e},n,i)=>{e.set(i.subarray(0,t),t*n)},Fde=({values:t,valueOffsets:e},n,i)=>y7(t,e,n,i),Ode=({values:t,valueOffsets:e},n,i)=>{y7(t,e,n,VO(i))},Mde=(t,e,n)=>{t.type.unit===$l.DAY?w7(t,e,n):b7(t,e,n)},T7=({values:t},e,n)=>KO(t,e*2,n/1e3),v7=({values:t},e,n)=>KO(t,e*2,n),E7=({values:t},e,n)=>Sde(t,e*2,n),S7=({values:t},e,n)=>xde(t,e*2,n),Ade=(t,e,n)=>{switch(t.type.unit){case Wt.SECOND:return T7(t,e,n);case Wt.MILLISECOND:return v7(t,e,n);case Wt.MICROSECOND:return E7(t,e,n);case Wt.NANOSECOND:return S7(t,e,n)}},x7=({values:t},e,n)=>{t[e]=n},B7=({values:t},e,n)=>{t[e]=n},k7=({values:t},e,n)=>{t[e]=n},I7=({values:t},e,n)=>{t[e]=n},Nde=(t,e,n)=>{switch(t.type.unit){case Wt.SECOND:return x7(t,e,n);case Wt.MILLISECOND:return B7(t,e,n);case Wt.MICROSECOND:return k7(t,e,n);case Wt.NANOSECOND:return I7(t,e,n)}},Cde=({values:t,stride:e},n,i)=>{t.set(i.subarray(0,e),e*n)},Rde=(t,e,n)=>{const i=t.children[0],s=t.valueOffsets,o=Ur.getVisitFn(i);if(Array.isArray(n))for(let c=-1,d=s[e],f=s[e+1];d<f;)o(i,d++,n[++c]);else for(let c=-1,d=s[e],f=s[e+1];d<f;)o(i,d++,n.get(++c))},Lde=(t,e,n)=>{const i=t.children[0],{valueOffsets:s}=t,o=Ur.getVisitFn(i);let{[e]:c,[e+1]:d}=s;const f=n instanceof Map?n.entries():Object.entries(n);for(const u of f)if(o(i,c,u),++c>=d)break},Pde=(t,e)=>(n,i,s,o)=>i&&n(i,t,e[o]),Dde=(t,e)=>(n,i,s,o)=>i&&n(i,t,e.get(o)),jde=(t,e)=>(n,i,s,o)=>i&&n(i,t,e.get(s.name)),Ude=(t,e)=>(n,i,s,o)=>i&&n(i,t,e[s.name]),zde=(t,e,n)=>{const i=t.type.children.map(o=>Ur.getVisitFn(o.type)),s=n instanceof Map?jde(e,n):n instanceof an?Dde(e,n):Array.isArray(n)?Pde(e,n):Ude(e,n);t.type.children.forEach((o,c)=>s(i[c],t.children[c],o,c))},$de=(t,e,n)=>{t.type.mode===Fa.Dense?F7(t,e,n):O7(t,e,n)},F7=(t,e,n)=>{const i=t.type.typeIdToChildIndex[t.typeIds[e]],s=t.children[i];Ur.visit(s,t.valueOffsets[e],n)},O7=(t,e,n)=>{const i=t.type.typeIdToChildIndex[t.typeIds[e]],s=t.children[i];Ur.visit(s,e,n)},qde=(t,e,n)=>{var i;(i=t.dictionary)===null||i===void 0||i.set(t.values[e],n)},Gde=(t,e,n)=>{t.type.unit===td.DAY_TIME?M7(t,e,n):A7(t,e,n)},M7=({values:t},e,n)=>{t.set(n.subarray(0,2),2*e)},A7=({values:t},e,n)=>{t[e]=n[0]*12+n[1]%12},Vde=(t,e,n)=>{const{stride:i}=t,s=t.children[0],o=Ur.getVisitFn(s);if(Array.isArray(n))for(let c=-1,d=e*i;++c<i;)o(s,d+c,n[c]);else for(let c=-1,d=e*i;++c<i;)o(s,d+c,n.get(c))};pt.prototype.visitBool=Tt(Bde);pt.prototype.visitInt=Tt(Yl);pt.prototype.visitInt8=Tt(Yl);pt.prototype.visitInt16=Tt(Yl);pt.prototype.visitInt32=Tt(Yl);pt.prototype.visitInt64=Tt(Yl);pt.prototype.visitUint8=Tt(Yl);pt.prototype.visitUint16=Tt(Yl);pt.prototype.visitUint32=Tt(Yl);pt.prototype.visitUint64=Tt(Yl);pt.prototype.visitFloat=Tt(kde);pt.prototype.visitFloat16=Tt(m7);pt.prototype.visitFloat32=Tt(JO);pt.prototype.visitFloat64=Tt(JO);pt.prototype.visitUtf8=Tt(Ode);pt.prototype.visitBinary=Tt(Fde);pt.prototype.visitFixedSizeBinary=Tt(Ide);pt.prototype.visitDate=Tt(Mde);pt.prototype.visitDateDay=Tt(w7);pt.prototype.visitDateMillisecond=Tt(b7);pt.prototype.visitTimestamp=Tt(Ade);pt.prototype.visitTimestampSecond=Tt(T7);pt.prototype.visitTimestampMillisecond=Tt(v7);pt.prototype.visitTimestampMicrosecond=Tt(E7);pt.prototype.visitTimestampNanosecond=Tt(S7);pt.prototype.visitTime=Tt(Nde);pt.prototype.visitTimeSecond=Tt(x7);pt.prototype.visitTimeMillisecond=Tt(B7);pt.prototype.visitTimeMicrosecond=Tt(k7);pt.prototype.visitTimeNanosecond=Tt(I7);pt.prototype.visitDecimal=Tt(Cde);pt.prototype.visitList=Tt(Rde);pt.prototype.visitStruct=Tt(zde);pt.prototype.visitUnion=Tt($de);pt.prototype.visitDenseUnion=Tt(F7);pt.prototype.visitSparseUnion=Tt(O7);pt.prototype.visitDictionary=Tt(qde);pt.prototype.visitInterval=Tt(Gde);pt.prototype.visitIntervalDayTime=Tt(M7);pt.prototype.visitIntervalYearMonth=Tt(A7);pt.prototype.visitFixedSizeList=Tt(Vde);pt.prototype.visitMap=Tt(Lde);const Ur=new pt,aa=Symbol.for("parent"),Ph=Symbol.for("rowIndex");class QO{constructor(e,n){return this[aa]=e,this[Ph]=n,new Proxy(this,new Wde)}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[Ph],n=this[aa],i=n.type.children,s={};for(let o=-1,c=i.length;++o<c;)s[i[o].name]=js.visit(n.children[o],e);return s}toString(){return`{${[...this].map(([e,n])=>`${ay(e)}: ${ay(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new Hde(this[aa],this[Ph])}}class Hde{constructor(e,n){this.childIndex=0,this.children=e.children,this.rowIndex=n,this.childFields=e.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const e=this.childIndex;return e<this.numChildren?(this.childIndex=e+1,{done:!1,value:[this.childFields[e].name,js.visit(this.children[e],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(QO.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[aa]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Ph]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class Wde{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[aa].type.children.map(n=>n.name)}has(e,n){return e[aa].type.children.findIndex(i=>i.name===n)!==-1}getOwnPropertyDescriptor(e,n){if(e[aa].type.children.findIndex(i=>i.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,n){if(Reflect.has(e,n))return e[n];const i=e[aa].type.children.findIndex(s=>s.name===n);if(i!==-1){const s=js.visit(e[aa].children[i],e[Ph]);return Reflect.set(e,n,s),s}}set(e,n,i){const s=e[aa].type.children.findIndex(o=>o.name===n);return s!==-1?(Ur.visit(e[aa].children[s],e[Ph],i),Reflect.set(e,n,i)):Reflect.has(e,n)||typeof n=="symbol"?Reflect.set(e,n,i):!1}}class rt extends jt{}function gt(t){return(e,n)=>e.getValid(n)?t(e,n):null}const Yde=(t,e)=>864e5*t[e],ZO=(t,e)=>4294967296*t[e+1]+(t[e]>>>0),Xde=(t,e)=>4294967296*(t[e+1]/1e3)+(t[e]>>>0)/1e3,Kde=(t,e)=>4294967296*(t[e+1]/1e6)+(t[e]>>>0)/1e6,N7=t=>new Date(t),Jde=(t,e)=>N7(Yde(t,e)),Qde=(t,e)=>N7(ZO(t,e)),Zde=(t,e)=>null,C7=(t,e,n)=>{if(n+1>=e.length)return null;const i=e[n],s=e[n+1];return t.subarray(i,s)},efe=({offset:t,values:e},n)=>{const i=t+n;return(e[i>>3]&1<<i%8)!==0},R7=({values:t},e)=>Jde(t,e),L7=({values:t},e)=>Qde(t,e*2),Id=({stride:t,values:e},n)=>e[t*n],tfe=({stride:t,values:e},n)=>_7(e[t*n]),P7=({values:t},e)=>t[e],nfe=({stride:t,values:e},n)=>e.subarray(t*n,t*(n+1)),ife=({values:t,valueOffsets:e},n)=>C7(t,e,n),sfe=({values:t,valueOffsets:e},n)=>{const i=C7(t,e,n);return i!==null?Ak(i):null},rfe=({values:t},e)=>t[e],afe=({type:t,values:e},n)=>t.precision!==Os.HALF?e[n]:_7(e[n]),ofe=(t,e)=>t.type.unit===$l.DAY?R7(t,e):L7(t,e),D7=({values:t},e)=>1e3*ZO(t,e*2),j7=({values:t},e)=>ZO(t,e*2),U7=({values:t},e)=>Xde(t,e*2),z7=({values:t},e)=>Kde(t,e*2),lfe=(t,e)=>{switch(t.type.unit){case Wt.SECOND:return D7(t,e);case Wt.MILLISECOND:return j7(t,e);case Wt.MICROSECOND:return U7(t,e);case Wt.NANOSECOND:return z7(t,e)}},$7=({values:t},e)=>t[e],q7=({values:t},e)=>t[e],G7=({values:t},e)=>t[e],V7=({values:t},e)=>t[e],cfe=(t,e)=>{switch(t.type.unit){case Wt.SECOND:return $7(t,e);case Wt.MILLISECOND:return q7(t,e);case Wt.MICROSECOND:return G7(t,e);case Wt.NANOSECOND:return V7(t,e)}},dfe=({values:t,stride:e},n)=>XO.decimal(t.subarray(e*n,e*(n+1))),ffe=(t,e)=>{const{valueOffsets:n,stride:i,children:s}=t,{[e*i]:o,[e*i+1]:c}=n,f=s[0].slice(o,c-o);return new an([f])},ufe=(t,e)=>{const{valueOffsets:n,children:i}=t,{[e]:s,[e+1]:o}=n,c=i[0];return new eM(c.slice(s,o-s))},hfe=(t,e)=>new QO(t,e),pfe=(t,e)=>t.type.mode===Fa.Dense?H7(t,e):W7(t,e),H7=(t,e)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],i=t.children[n];return js.visit(i,t.valueOffsets[e])},W7=(t,e)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],i=t.children[n];return js.visit(i,e)},gfe=(t,e)=>{var n;return(n=t.dictionary)===null||n===void 0?void 0:n.get(t.values[e])},_fe=(t,e)=>t.type.unit===td.DAY_TIME?Y7(t,e):X7(t,e),Y7=({values:t},e)=>t.subarray(2*e,2*(e+1)),X7=({values:t},e)=>{const n=t[e],i=new Int32Array(2);return i[0]=Math.trunc(n/12),i[1]=Math.trunc(n%12),i},yfe=(t,e)=>{const{stride:n,children:i}=t,o=i[0].slice(e*n,n);return new an([o])};rt.prototype.visitNull=gt(Zde);rt.prototype.visitBool=gt(efe);rt.prototype.visitInt=gt(rfe);rt.prototype.visitInt8=gt(Id);rt.prototype.visitInt16=gt(Id);rt.prototype.visitInt32=gt(Id);rt.prototype.visitInt64=gt(P7);rt.prototype.visitUint8=gt(Id);rt.prototype.visitUint16=gt(Id);rt.prototype.visitUint32=gt(Id);rt.prototype.visitUint64=gt(P7);rt.prototype.visitFloat=gt(afe);rt.prototype.visitFloat16=gt(tfe);rt.prototype.visitFloat32=gt(Id);rt.prototype.visitFloat64=gt(Id);rt.prototype.visitUtf8=gt(sfe);rt.prototype.visitBinary=gt(ife);rt.prototype.visitFixedSizeBinary=gt(nfe);rt.prototype.visitDate=gt(ofe);rt.prototype.visitDateDay=gt(R7);rt.prototype.visitDateMillisecond=gt(L7);rt.prototype.visitTimestamp=gt(lfe);rt.prototype.visitTimestampSecond=gt(D7);rt.prototype.visitTimestampMillisecond=gt(j7);rt.prototype.visitTimestampMicrosecond=gt(U7);rt.prototype.visitTimestampNanosecond=gt(z7);rt.prototype.visitTime=gt(cfe);rt.prototype.visitTimeSecond=gt($7);rt.prototype.visitTimeMillisecond=gt(q7);rt.prototype.visitTimeMicrosecond=gt(G7);rt.prototype.visitTimeNanosecond=gt(V7);rt.prototype.visitDecimal=gt(dfe);rt.prototype.visitList=gt(ffe);rt.prototype.visitStruct=gt(hfe);rt.prototype.visitUnion=gt(pfe);rt.prototype.visitDenseUnion=gt(H7);rt.prototype.visitSparseUnion=gt(W7);rt.prototype.visitDictionary=gt(gfe);rt.prototype.visitInterval=gt(_fe);rt.prototype.visitIntervalDayTime=gt(Y7);rt.prototype.visitIntervalYearMonth=gt(X7);rt.prototype.visitFixedSizeList=gt(yfe);rt.prototype.visitMap=gt(ufe);const js=new rt,oo=Symbol.for("keys"),Dh=Symbol.for("vals");class eM{constructor(e){return this[oo]=new an([e.children[0]]).memoize(),this[Dh]=e.children[1],new Proxy(this,new wfe)}[Symbol.iterator](){return new mfe(this[oo],this[Dh])}get size(){return this[oo].length}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[oo],n=this[Dh],i={};for(let s=-1,o=e.length;++s<o;)i[e.get(s)]=js.visit(n,s);return i}toString(){return`{${[...this].map(([e,n])=>`${ay(e)}: ${ay(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class mfe{constructor(e,n){this.keys=e,this.vals=n,this.keyIndex=0,this.numKeys=e.length}[Symbol.iterator](){return this}next(){const e=this.keyIndex;return e===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(e),js.visit(this.vals,e)]})}}class wfe{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[oo].toArray().map(String)}has(e,n){return e[oo].includes(n)}getOwnPropertyDescriptor(e,n){if(e[oo].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,n){if(Reflect.has(e,n))return e[n];const i=e[oo].indexOf(n);if(i!==-1){const s=js.visit(Reflect.get(e,Dh),i);return Reflect.set(e,n,s),s}}set(e,n,i){const s=e[oo].indexOf(n);return s!==-1?(Ur.visit(Reflect.get(e,Dh),s,i),Reflect.set(e,n,i)):Reflect.has(e,n)?Reflect.set(e,n,i):!1}}Object.defineProperties(eM.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[oo]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Dh]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let wD;function K7(t,e,n,i){const{length:s=0}=t;let o=typeof e!="number"?0:e,c=typeof n!="number"?s:n;return o<0&&(o=(o%s+s)%s),c<0&&(c=(c%s+s)%s),c<o&&(wD=o,o=c,c=wD),c>s&&(c=s),i?i(t,o,c):[o,c]}const bD=t=>t!==t;function eg(t){if(typeof t!=="object"||t===null)return bD(t)?bD:n=>n===t;if(t instanceof Date){const n=t.valueOf();return i=>i instanceof Date?i.valueOf()===n:!1}return ArrayBuffer.isView(t)?n=>n?ude(t,n):!1:t instanceof Map?Tfe(t):Array.isArray(t)?bfe(t):t instanceof an?vfe(t):Efe(t,!0)}function bfe(t){const e=[];for(let n=-1,i=t.length;++n<i;)e[n]=eg(t[n]);return rE(e)}function Tfe(t){let e=-1;const n=[];for(const i of t.values())n[++e]=eg(i);return rE(n)}function vfe(t){const e=[];for(let n=-1,i=t.length;++n<i;)e[n]=eg(t.get(n));return rE(e)}function Efe(t,e=!1){const n=Object.keys(t);if(!e&&n.length===0)return()=>!1;const i=[];for(let s=-1,o=n.length;++s<o;)i[s]=eg(t[n[s]]);return rE(i,n)}function rE(t,e){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return Sfe(t,n);case Map:return TD(t,n,n.keys());case eM:case QO:case Object:case void 0:return TD(t,n,e||Object.keys(n))}return n instanceof an?xfe(t,n):!1}}function Sfe(t,e){const n=t.length;if(e.length!==n)return!1;for(let i=-1;++i<n;)if(!t[i](e[i]))return!1;return!0}function xfe(t,e){const n=t.length;if(e.length!==n)return!1;for(let i=-1;++i<n;)if(!t[i](e.get(i)))return!1;return!0}function TD(t,e,n){const i=n[Symbol.iterator](),s=e instanceof Map?e.keys():Object.keys(e)[Symbol.iterator](),o=e instanceof Map?e.values():Object.values(e)[Symbol.iterator]();let c=0;const d=t.length;let f=o.next(),u=i.next(),a=s.next();for(;c<d&&!u.done&&!a.done&&!f.done&&!(u.value!==a.value||!t[c](f.value));++c,u=i.next(),a=s.next(),f=o.next());return c===d&&u.done&&a.done&&f.done?!0:(i.return&&i.return(),s.return&&s.return(),o.return&&o.return(),!1)}function J7(t,e,n,i){return(n&1<<i)!==0}function Bfe(t,e,n,i){return(n&1<<i)>>i}function kfe(t,e,n){const i=n.byteLength+7&-8;if(t>0||n.byteLength<i){const s=new Uint8Array(i);return s.set(t%8===0?n.subarray(t>>3):Lk(new tM(n,t,e,null,J7)).subarray(0,i)),s}return n}function Lk(t){const e=[];let n=0,i=0,s=0;for(const c of t)c&&(s|=1<<i),++i===8&&(e[n++]=s,s=i=0);(n===0||i>0)&&(e[n++]=s);const o=new Uint8Array(e.length+7&-8);return o.set(e),o}class tM{constructor(e,n,i,s,o){this.bytes=e,this.length=i,this.context=s,this.get=o,this.bit=n%8,this.byteIndex=n>>3,this.byte=e[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function Pk(t,e,n){if(n-e<=0)return 0;if(n-e<8){let o=0;for(const c of new tM(t,e,n-e,t,Bfe))o+=c;return o}const i=n>>3<<3,s=e+(e%8===0?0:8-e%8);return Pk(t,e,s)+Pk(t,i,n)+Ife(t,s>>3,i-s>>3)}function Ife(t,e,n){let i=0,s=Math.trunc(e);const o=new DataView(t.buffer,t.byteOffset,t.byteLength),c=n===void 0?t.byteLength:s+n;for(;c-s>=4;)i+=Ox(o.getUint32(s)),s+=4;for(;c-s>=2;)i+=Ox(o.getUint16(s)),s+=2;for(;c-s>=1;)i+=Ox(o.getUint8(s)),s+=1;return i}function Ox(t){let e=Math.trunc(t);return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),(e+(e>>>4)&252645135)*16843009>>>24}const Ffe=-1;class pn{constructor(e,n,i,s,o,c=[],d){this.type=e,this.children=c,this.dictionary=d,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(i||0,0)),this._nullCount=Math.floor(Math.max(s||0,-1));let f;o instanceof pn?(this.stride=o.stride,this.values=o.values,this.typeIds=o.typeIds,this.nullBitmap=o.nullBitmap,this.valueOffsets=o.valueOffsets):(this.stride=hl(e),o&&((f=o[0])&&(this.valueOffsets=f),(f=o[1])&&(this.values=f),(f=o[2])&&(this.nullBitmap=f),(f=o[3])&&(this.typeIds=f))),this.nullable=this._nullCount!==0&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let e=0;const{valueOffsets:n,values:i,nullBitmap:s,typeIds:o}=this;return n&&(e+=n.byteLength),i&&(e+=i.byteLength),s&&(e+=s.byteLength),o&&(e+=o.byteLength),this.children.reduce((c,d)=>c+d.byteLength,e)}get nullCount(){let e=this._nullCount,n;return e<=Ffe&&(n=this.nullBitmap)&&(this._nullCount=e=this.length-Pk(n,this.offset,this.offset+this.length)),e}getValid(e){if(this.nullable&&this.nullCount>0){const n=this.offset+e;return(this.nullBitmap[n>>3]&1<<n%8)!==0}return!0}setValid(e,n){if(!this.nullable)return n;if(!this.nullBitmap||this.nullBitmap.byteLength<=e>>3){const{nullBitmap:f}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:f,_nullCount:0})}const{nullBitmap:i,offset:s}=this,o=s+e>>3,c=(s+e)%8,d=i[o]>>c&1;return n?d===0&&(i[o]|=1<<c,this._nullCount=this.nullCount+1):d===1&&(i[o]&=~(1<<c),this._nullCount=this.nullCount-1),n}clone(e=this.type,n=this.offset,i=this.length,s=this._nullCount,o=this,c=this.children){return new pn(e,n,i,s,o,c,this.dictionary)}slice(e,n){const{stride:i,typeId:s,children:o}=this,c=+(this._nullCount===0)-1,d=s===16?i:1,f=this._sliceBuffers(e,n,i,s);return this.clone(this.type,this.offset+e,n,c,f,o.length===0||this.valueOffsets?o:this._sliceChildren(o,d*e,d*n))}_changeLengthAndBackfillNullBitmap(e){if(this.typeId===ne.Null)return this.clone(this.type,0,e,0);const{length:n,nullCount:i}=this,s=new Uint8Array((e+63&-64)>>3).fill(255,0,n>>3);s[n>>3]=(1<<n-(n&-8))-1,i>0&&s.set(kfe(this.offset,n,this.nullBitmap),0);const o=this.buffers;return o[ul.VALIDITY]=s,this.clone(this.type,0,e,i+(e-n),o)}_sliceBuffers(e,n,i,s){let o;const{buffers:c}=this;return(o=c[ul.TYPE])&&(c[ul.TYPE]=o.subarray(e,e+n)),(o=c[ul.OFFSET])&&(c[ul.OFFSET]=o.subarray(e,e+n+1))||(o=c[ul.DATA])&&(c[ul.DATA]=s===6?o:o.subarray(i*e,i*(e+n))),c}_sliceChildren(e,n,i){return e.map(s=>s.slice(n,i))}}pn.prototype.children=Object.freeze([]);class O_ extends jt{visit(e){return this.getVisitFn(e.type).call(this,e)}visitNull(e){const{["type"]:n,["offset"]:i=0,["length"]:s=0}=e;return new pn(n,i,s,0)}visitBool(e){const{["type"]:n,["offset"]:i=0}=e,s=Jt(e.nullBitmap),o=un(n.ArrayType,e.data),{["length"]:c=o.length>>3,["nullCount"]:d=e.nullBitmap?-1:0}=e;return new pn(n,i,c,d,[void 0,o,s])}visitInt(e){const{["type"]:n,["offset"]:i=0}=e,s=Jt(e.nullBitmap),o=un(n.ArrayType,e.data),{["length"]:c=o.length,["nullCount"]:d=e.nullBitmap?-1:0}=e;return new pn(n,i,c,d,[void 0,o,s])}visitFloat(e){const{["type"]:n,["offset"]:i=0}=e,s=Jt(e.nullBitmap),o=un(n.ArrayType,e.data),{["length"]:c=o.length,["nullCount"]:d=e.nullBitmap?-1:0}=e;return new pn(n,i,c,d,[void 0,o,s])}visitUtf8(e){const{["type"]:n,["offset"]:i=0}=e,s=Jt(e.data),o=Jt(e.nullBitmap),c=Ag(e.valueOffsets),{["length"]:d=c.length-1,["nullCount"]:f=e.nullBitmap?-1:0}=e;return new pn(n,i,d,f,[c,s,o])}visitBinary(e){const{["type"]:n,["offset"]:i=0}=e,s=Jt(e.data),o=Jt(e.nullBitmap),c=Ag(e.valueOffsets),{["length"]:d=c.length-1,["nullCount"]:f=e.nullBitmap?-1:0}=e;return new pn(n,i,d,f,[c,s,o])}visitFixedSizeBinary(e){const{["type"]:n,["offset"]:i=0}=e,s=Jt(e.nullBitmap),o=un(n.ArrayType,e.data),{["length"]:c=o.length/hl(n),["nullCount"]:d=e.nullBitmap?-1:0}=e;return new pn(n,i,c,d,[void 0,o,s])}visitDate(e){const{["type"]:n,["offset"]:i=0}=e,s=Jt(e.nullBitmap),o=un(n.ArrayType,e.data),{["length"]:c=o.length/hl(n),["nullCount"]:d=e.nullBitmap?-1:0}=e;return new pn(n,i,c,d,[void 0,o,s])}visitTimestamp(e){const{["type"]:n,["offset"]:i=0}=e,s=Jt(e.nullBitmap),o=un(n.ArrayType,e.data),{["length"]:c=o.length/hl(n),["nullCount"]:d=e.nullBitmap?-1:0}=e;return new pn(n,i,c,d,[void 0,o,s])}visitTime(e){const{["type"]:n,["offset"]:i=0}=e,s=Jt(e.nullBitmap),o=un(n.ArrayType,e.data),{["length"]:c=o.length/hl(n),["nullCount"]:d=e.nullBitmap?-1:0}=e;return new pn(n,i,c,d,[void 0,o,s])}visitDecimal(e){const{["type"]:n,["offset"]:i=0}=e,s=Jt(e.nullBitmap),o=un(n.ArrayType,e.data),{["length"]:c=o.length/hl(n),["nullCount"]:d=e.nullBitmap?-1:0}=e;return new pn(n,i,c,d,[void 0,o,s])}visitList(e){const{["type"]:n,["offset"]:i=0,["child"]:s}=e,o=Jt(e.nullBitmap),c=Ag(e.valueOffsets),{["length"]:d=c.length-1,["nullCount"]:f=e.nullBitmap?-1:0}=e;return new pn(n,i,d,f,[c,void 0,o],[s])}visitStruct(e){const{["type"]:n,["offset"]:i=0,["children"]:s=[]}=e,o=Jt(e.nullBitmap),{length:c=s.reduce((f,{length:u})=>Math.max(f,u),0),nullCount:d=e.nullBitmap?-1:0}=e;return new pn(n,i,c,d,[void 0,void 0,o],s)}visitUnion(e){const{["type"]:n,["offset"]:i=0,["children"]:s=[]}=e,o=Jt(e.nullBitmap),c=un(n.ArrayType,e.typeIds),{["length"]:d=c.length,["nullCount"]:f=e.nullBitmap?-1:0}=e;if(yt.isSparseUnion(n))return new pn(n,i,d,f,[void 0,void 0,o,c],s);const u=Ag(e.valueOffsets);return new pn(n,i,d,f,[u,void 0,o,c],s)}visitDictionary(e){const{["type"]:n,["offset"]:i=0}=e,s=Jt(e.nullBitmap),o=un(n.indices.ArrayType,e.data),{["dictionary"]:c=new an([new O_().visit({type:n.dictionary})])}=e,{["length"]:d=o.length,["nullCount"]:f=e.nullBitmap?-1:0}=e;return new pn(n,i,d,f,[void 0,o,s],[],c)}visitInterval(e){const{["type"]:n,["offset"]:i=0}=e,s=Jt(e.nullBitmap),o=un(n.ArrayType,e.data),{["length"]:c=o.length/hl(n),["nullCount"]:d=e.nullBitmap?-1:0}=e;return new pn(n,i,c,d,[void 0,o,s])}visitFixedSizeList(e){const{["type"]:n,["offset"]:i=0,["child"]:s=new O_().visit({type:n.valueType})}=e,o=Jt(e.nullBitmap),{["length"]:c=s.length/hl(n),["nullCount"]:d=e.nullBitmap?-1:0}=e;return new pn(n,i,c,d,[void 0,void 0,o],[s])}visitMap(e){const{["type"]:n,["offset"]:i=0,["child"]:s=new O_().visit({type:n.childType})}=e,o=Jt(e.nullBitmap),c=Ag(e.valueOffsets),{["length"]:d=c.length-1,["nullCount"]:f=e.nullBitmap?-1:0}=e;return new pn(n,i,d,f,[c,void 0,o],[s])}}function Ct(t){return new O_().visit(t)}class vD{constructor(e=0,n){this.numChunks=e,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const e=this.chunkIterator.next();if(!e.done)return e;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function Q7(t){return t.reduce((e,n)=>e+n.nullCount,0)}function Z7(t){return t.reduce((e,n,i)=>(e[i+1]=e[i]+n.length,e),new Uint32Array(t.length+1))}function e9(t,e,n,i){const s=[];for(let o=-1,c=t.length;++o<c;){const d=t[o],f=e[o],{length:u}=d;if(f>=i)break;if(n>=f+u)continue;if(f>=n&&f+u<=i){s.push(d);continue}const a=Math.max(0,n-f),_=Math.min(i-f,u);s.push(d.slice(a,_-a))}return s.length===0&&s.push(t[0].slice(0,0)),s}function nM(t,e,n,i){let s=0,o=0,c=e.length-1;do{if(s>=c-1)return n<e[c]?i(t,s,n-e[s]):null;o=s+Math.trunc((c-s)*.5),n<e[o]?c=o:s=o}while(s<c)}function iM(t,e){return t.getValid(e)}function jh(t){function e(n,i,s){return t(n[i],s)}return function(n){const i=this.data;return nM(i,this._offsets,n,e)}}function t9(t){let e;function n(i,s,o){return t(i[s],o,e)}return function(i,s){const o=this.data;e=s;const c=nM(o,this._offsets,i,n);return e=void 0,c}}function n9(t){let e;function n(i,s,o){let c=o,d=0,f=0;for(let u=s-1,a=i.length;++u<a;){const _=i[u];if(~(d=t(_,e,c)))return f+d;c=0,f+=_.length}return-1}return function(i,s){e=i;const o=this.data,c=typeof s!="number"?n(o,0,0):nM(o,this._offsets,s,n);return e=void 0,c}}class at extends jt{}function Ofe(t,e){return e===null&&t.length>0?0:-1}function Mfe(t,e){const{nullBitmap:n}=t;if(!n||t.nullCount<=0)return-1;let i=0;for(const s of new tM(n,t.offset+(e||0),t.length,n,J7)){if(!s)return i;++i}return-1}function xt(t,e,n){if(e===void 0)return-1;if(e===null)return Mfe(t,n);const i=js.getVisitFn(t),s=eg(e);for(let o=(n||0)-1,c=t.length;++o<c;)if(s(i(t,o)))return o;return-1}function i9(t,e,n){const i=js.getVisitFn(t),s=eg(e);for(let o=(n||0)-1,c=t.length;++o<c;)if(s(i(t,o)))return o;return-1}at.prototype.visitNull=Ofe;at.prototype.visitBool=xt;at.prototype.visitInt=xt;at.prototype.visitInt8=xt;at.prototype.visitInt16=xt;at.prototype.visitInt32=xt;at.prototype.visitInt64=xt;at.prototype.visitUint8=xt;at.prototype.visitUint16=xt;at.prototype.visitUint32=xt;at.prototype.visitUint64=xt;at.prototype.visitFloat=xt;at.prototype.visitFloat16=xt;at.prototype.visitFloat32=xt;at.prototype.visitFloat64=xt;at.prototype.visitUtf8=xt;at.prototype.visitBinary=xt;at.prototype.visitFixedSizeBinary=xt;at.prototype.visitDate=xt;at.prototype.visitDateDay=xt;at.prototype.visitDateMillisecond=xt;at.prototype.visitTimestamp=xt;at.prototype.visitTimestampSecond=xt;at.prototype.visitTimestampMillisecond=xt;at.prototype.visitTimestampMicrosecond=xt;at.prototype.visitTimestampNanosecond=xt;at.prototype.visitTime=xt;at.prototype.visitTimeSecond=xt;at.prototype.visitTimeMillisecond=xt;at.prototype.visitTimeMicrosecond=xt;at.prototype.visitTimeNanosecond=xt;at.prototype.visitDecimal=xt;at.prototype.visitList=xt;at.prototype.visitStruct=xt;at.prototype.visitUnion=xt;at.prototype.visitDenseUnion=i9;at.prototype.visitSparseUnion=i9;at.prototype.visitDictionary=xt;at.prototype.visitInterval=xt;at.prototype.visitIntervalDayTime=xt;at.prototype.visitIntervalYearMonth=xt;at.prototype.visitFixedSizeList=xt;at.prototype.visitMap=xt;const dv=new at;class ot extends jt{}function _t(t){const{type:e}=t;if(t.nullCount===0&&t.stride===1&&(e.typeId===ne.Timestamp||e instanceof id&&e.bitWidth!==64||e instanceof dy&&e.bitWidth!==64||e instanceof cy&&e.precision!==Os.HALF))return new vD(t.data.length,i=>{const s=t.data[i];return s.values.subarray(0,s.length)[Symbol.iterator]()});let n=0;return new vD(t.data.length,i=>{const o=t.data[i].length,c=t.slice(n,n+o);return n+=o,new Afe(c)})}class Afe{constructor(e){this.vector=e,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}ot.prototype.visitNull=_t;ot.prototype.visitBool=_t;ot.prototype.visitInt=_t;ot.prototype.visitInt8=_t;ot.prototype.visitInt16=_t;ot.prototype.visitInt32=_t;ot.prototype.visitInt64=_t;ot.prototype.visitUint8=_t;ot.prototype.visitUint16=_t;ot.prototype.visitUint32=_t;ot.prototype.visitUint64=_t;ot.prototype.visitFloat=_t;ot.prototype.visitFloat16=_t;ot.prototype.visitFloat32=_t;ot.prototype.visitFloat64=_t;ot.prototype.visitUtf8=_t;ot.prototype.visitBinary=_t;ot.prototype.visitFixedSizeBinary=_t;ot.prototype.visitDate=_t;ot.prototype.visitDateDay=_t;ot.prototype.visitDateMillisecond=_t;ot.prototype.visitTimestamp=_t;ot.prototype.visitTimestampSecond=_t;ot.prototype.visitTimestampMillisecond=_t;ot.prototype.visitTimestampMicrosecond=_t;ot.prototype.visitTimestampNanosecond=_t;ot.prototype.visitTime=_t;ot.prototype.visitTimeSecond=_t;ot.prototype.visitTimeMillisecond=_t;ot.prototype.visitTimeMicrosecond=_t;ot.prototype.visitTimeNanosecond=_t;ot.prototype.visitDecimal=_t;ot.prototype.visitList=_t;ot.prototype.visitStruct=_t;ot.prototype.visitUnion=_t;ot.prototype.visitDenseUnion=_t;ot.prototype.visitSparseUnion=_t;ot.prototype.visitDictionary=_t;ot.prototype.visitInterval=_t;ot.prototype.visitIntervalDayTime=_t;ot.prototype.visitIntervalYearMonth=_t;ot.prototype.visitFixedSizeList=_t;ot.prototype.visitMap=_t;const sM=new ot,Nfe=(t,e)=>t+e;class Fd extends jt{visitNull(e,n){return 0}visitInt(e,n){return e.type.bitWidth/8}visitFloat(e,n){return e.type.ArrayType.BYTES_PER_ELEMENT}visitBool(e,n){return 1/8}visitDecimal(e,n){return e.type.bitWidth/8}visitDate(e,n){return(e.type.unit+1)*4}visitTime(e,n){return e.type.bitWidth/8}visitTimestamp(e,n){return e.type.unit===Wt.SECOND?4:8}visitInterval(e,n){return(e.type.unit+1)*4}visitStruct(e,n){return e.children.reduce((i,s)=>i+Po.visit(s,n),0)}visitFixedSizeBinary(e,n){return e.type.byteWidth}visitMap(e,n){return 8+e.children.reduce((i,s)=>i+Po.visit(s,n),0)}visitDictionary(e,n){var i;return e.type.indices.bitWidth/8+(((i=e.dictionary)===null||i===void 0?void 0:i.getByteLength(e.values[n]))||0)}}const Cfe=({valueOffsets:t},e)=>8+(t[e+1]-t[e]),Rfe=({valueOffsets:t},e)=>8+(t[e+1]-t[e]),Lfe=({valueOffsets:t,stride:e,children:n},i)=>{const s=n[0],{[i*e]:o}=t,{[i*e+1]:c}=t,d=Po.getVisitFn(s.type),f=s.slice(o,c-o);let u=8;for(let a=-1,_=c-o;++a<_;)u+=d(f,a);return u},Pfe=({stride:t,children:e},n)=>{const i=e[0],s=i.slice(n*t,t),o=Po.getVisitFn(i.type);let c=0;for(let d=-1,f=s.length;++d<f;)c+=o(s,d);return c},Dfe=(t,e)=>t.type.mode===Fa.Dense?s9(t,e):r9(t,e),s9=({type:t,children:e,typeIds:n,valueOffsets:i},s)=>{const o=t.typeIdToChildIndex[n[s]];return 8+Po.visit(e[o],i[s])},r9=({children:t},e)=>4+Po.visitMany(t,t.map(()=>e)).reduce(Nfe,0);Fd.prototype.visitUtf8=Cfe;Fd.prototype.visitBinary=Rfe;Fd.prototype.visitList=Lfe;Fd.prototype.visitFixedSizeList=Pfe;Fd.prototype.visitUnion=Dfe;Fd.prototype.visitDenseUnion=s9;Fd.prototype.visitSparseUnion=r9;const Po=new Fd;var a9;const o9={},l9={};class an{constructor(e){var n,i,s;const o=e[0]instanceof an?e.flatMap(d=>d.data):e;if(o.length===0||o.some(d=>!(d instanceof pn)))throw new TypeError("Vector constructor expects an Array of Data instances.");const c=(n=o[0])===null||n===void 0?void 0:n.type;switch(o.length){case 0:this._offsets=[0];break;case 1:{const{get:d,set:f,indexOf:u,byteLength:a}=o9[c.typeId],_=o[0];this.isValid=w=>iM(_,w),this.get=w=>d(_,w),this.set=(w,m)=>f(_,w,m),this.indexOf=w=>u(_,w),this.getByteLength=w=>a(_,w),this._offsets=[0,_.length];break}default:Object.setPrototypeOf(this,l9[c.typeId]),this._offsets=Z7(o);break}this.data=o,this.type=c,this.stride=hl(c),this.numChildren=(s=(i=c.children)===null||i===void 0?void 0:i.length)!==null&&s!==void 0?s:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return this._byteLength===-1&&(this._byteLength=this.data.reduce((e,n)=>e+n.byteLength,0)),this._byteLength}get nullCount(){return this._nullCount===-1&&(this._nullCount=Q7(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${ne[this.type.typeId]}Vector`}isValid(e){return!1}get(e){return null}set(e,n){}indexOf(e,n){return-1}includes(e,n){return this.indexOf(e,n)>0}getByteLength(e){return 0}[Symbol.iterator](){return sM.visit(this)}concat(...e){return new an(this.data.concat(e.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(e,n){return new an(K7(this,e,n,({data:i,_offsets:s},o,c)=>e9(i,s,o,c)))}toJSON(){return[...this]}toArray(){const{type:e,data:n,length:i,stride:s,ArrayType:o}=this;switch(e.typeId){case ne.Int:case ne.Float:case ne.Decimal:case ne.Time:case ne.Timestamp:switch(n.length){case 0:return new o;case 1:return n[0].values.subarray(0,i*s);default:return n.reduce((c,{values:d,length:f})=>(c.array.set(d.subarray(0,f*s),c.offset),c.offset+=f*s,c),{array:new o(i*s),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(e){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(i=>i.name===e))}getChildAt(e){return e>-1&&e<this.numChildren?new an(this.data.map(({children:n})=>n[e])):null}get isMemoized(){return yt.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(yt.isDictionary(this.type)){const e=new fv(this.data[0].dictionary),n=this.data.map(i=>{const s=i.clone();return s.dictionary=e,s});return new an(n)}return new fv(this)}unmemoize(){if(yt.isDictionary(this.type)&&this.isMemoized){const e=this.data[0].dictionary.unmemoize(),n=this.data.map(i=>{const s=i.clone();return s.dictionary=e,s});return new an(n)}return this}}a9=Symbol.toStringTag;an[a9]=(t=>{t.type=yt.prototype,t.data=[],t.length=0,t.stride=1,t.numChildren=0,t._nullCount=-1,t._byteLength=-1,t._offsets=new Uint32Array([0]),t[Symbol.isConcatSpreadable]=!0;const e=Object.keys(ne).map(n=>ne[n]).filter(n=>typeof n=="number"&&n!==ne.NONE);for(const n of e){const i=js.getVisitFnByTypeId(n),s=Ur.getVisitFnByTypeId(n),o=dv.getVisitFnByTypeId(n),c=Po.getVisitFnByTypeId(n);o9[n]={get:i,set:s,indexOf:o,byteLength:c},l9[n]=Object.create(t,{isValid:{value:jh(iM)},get:{value:jh(js.getVisitFnByTypeId(n))},set:{value:t9(Ur.getVisitFnByTypeId(n))},indexOf:{value:n9(dv.getVisitFnByTypeId(n))},getByteLength:{value:jh(Po.getVisitFnByTypeId(n))}})}return"Vector"})(an.prototype);class fv extends an{constructor(e){super(e.data);const n=this.get,i=this.set,s=this.slice,o=new Array(this.length);Object.defineProperty(this,"get",{value(c){const d=o[c];if(d!==void 0)return d;const f=n.call(this,c);return o[c]=f,f}}),Object.defineProperty(this,"set",{value(c,d){i.call(this,c,d),o[c]=d}}),Object.defineProperty(this,"slice",{value:(c,d)=>new fv(s.call(this,c,d))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new an(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}class Dk{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(e,n,i,s){return e.prep(8,24),e.writeInt64(s),e.pad(4),e.writeInt32(i),e.writeInt64(n),e.offset()}}class Xn{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsKeyValue(e,n){return(n||new Xn).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsKeyValue(e,n){return e.setPosition(e.position()+Ge),(n||new Xn).__init(e.readInt32(e.position())+e.position(),e)}key(e){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,e):null}value(e){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,e):null}static startKeyValue(e){e.startObject(2)}static addKey(e,n){e.addFieldOffset(0,n,0)}static addValue(e,n){e.addFieldOffset(1,n,0)}static endKeyValue(e){return e.endObject()}static createKeyValue(e,n,i){return Xn.startKeyValue(e),Xn.addKey(e,n),Xn.addValue(e,i),Xn.endKeyValue(e)}}var gp;(function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"})(gp||(gp={}));var _p;(function(t){t[t.Little=0]="Little",t[t.Big=1]="Big"})(_p||(_p={}));var uv;(function(t){t[t.DenseArray=0]="DenseArray"})(uv||(uv={}));class sr{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsInt(e,n){return(n||new sr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInt(e,n){return e.setPosition(e.position()+Ge),(n||new sr).__init(e.readInt32(e.position())+e.position(),e)}bitWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}isSigned(){const e=this.bb.__offset(this.bb_pos,6);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startInt(e){e.startObject(2)}static addBitWidth(e,n){e.addFieldInt32(0,n,0)}static addIsSigned(e,n){e.addFieldInt8(1,+n,0)}static endInt(e){return e.endObject()}static createInt(e,n,i){return sr.startInt(e),sr.addBitWidth(e,n),sr.addIsSigned(e,i),sr.endInt(e)}}class El{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDictionaryEncoding(e,n){return(n||new El).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryEncoding(e,n){return e.setPosition(e.position()+Ge),(n||new El).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}indexType(e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new sr).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}dictionaryKind(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt16(this.bb_pos+e):uv.DenseArray}static startDictionaryEncoding(e){e.startObject(4)}static addId(e,n){e.addFieldInt64(0,n,e.createLong(0,0))}static addIndexType(e,n){e.addFieldOffset(1,n,0)}static addIsOrdered(e,n){e.addFieldInt8(2,+n,0)}static addDictionaryKind(e,n){e.addFieldInt16(3,n,uv.DenseArray)}static endDictionaryEncoding(e){return e.endObject()}}class Ef{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsBinary(e,n){return(n||new Ef).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBinary(e,n){return e.setPosition(e.position()+Ge),(n||new Ef).__init(e.readInt32(e.position())+e.position(),e)}static startBinary(e){e.startObject(0)}static endBinary(e){return e.endObject()}static createBinary(e){return Ef.startBinary(e),Ef.endBinary(e)}}class Sf{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsBool(e,n){return(n||new Sf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBool(e,n){return e.setPosition(e.position()+Ge),(n||new Sf).__init(e.readInt32(e.position())+e.position(),e)}static startBool(e){e.startObject(0)}static endBool(e){return e.endObject()}static createBool(e){return Sf.startBool(e),Sf.endBool(e)}}var hv;(function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"})(hv||(hv={}));class lo{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDate(e,n){return(n||new lo).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDate(e,n){return e.setPosition(e.position()+Ge),(n||new lo).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):hv.MILLISECOND}static startDate(e){e.startObject(1)}static addUnit(e,n){e.addFieldInt16(0,n,hv.MILLISECOND)}static endDate(e){return e.endObject()}static createDate(e,n){return lo.startDate(e),lo.addUnit(e,n),lo.endDate(e)}}class ws{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDecimal(e,n){return(n||new ws).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDecimal(e,n){return e.setPosition(e.position()+Ge),(n||new ws).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}scale(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0}bitWidth(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):128}static startDecimal(e){e.startObject(3)}static addPrecision(e,n){e.addFieldInt32(0,n,0)}static addScale(e,n){e.addFieldInt32(1,n,0)}static addBitWidth(e,n){e.addFieldInt32(2,n,128)}static endDecimal(e){return e.endObject()}static createDecimal(e,n,i,s){return ws.startDecimal(e),ws.addPrecision(e,n),ws.addScale(e,i),ws.addBitWidth(e,s),ws.endDecimal(e)}}var yp;(function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"})(yp||(yp={}));class co{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFixedSizeBinary(e,n){return(n||new co).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeBinary(e,n){return e.setPosition(e.position()+Ge),(n||new co).__init(e.readInt32(e.position())+e.position(),e)}byteWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeBinary(e){e.startObject(1)}static addByteWidth(e,n){e.addFieldInt32(0,n,0)}static endFixedSizeBinary(e){return e.endObject()}static createFixedSizeBinary(e,n){return co.startFixedSizeBinary(e),co.addByteWidth(e,n),co.endFixedSizeBinary(e)}}class fo{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFixedSizeList(e,n){return(n||new fo).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeList(e,n){return e.setPosition(e.position()+Ge),(n||new fo).__init(e.readInt32(e.position())+e.position(),e)}listSize(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeList(e){e.startObject(1)}static addListSize(e,n){e.addFieldInt32(0,n,0)}static endFixedSizeList(e){return e.endObject()}static createFixedSizeList(e,n){return fo.startFixedSizeList(e),fo.addListSize(e,n),fo.endFixedSizeList(e)}}var pv;(function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"})(pv||(pv={}));class uo{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFloatingPoint(e,n){return(n||new uo).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFloatingPoint(e,n){return e.setPosition(e.position()+Ge),(n||new uo).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):pv.HALF}static startFloatingPoint(e){e.startObject(1)}static addPrecision(e,n){e.addFieldInt16(0,n,pv.HALF)}static endFloatingPoint(e){return e.endObject()}static createFloatingPoint(e,n){return uo.startFloatingPoint(e),uo.addPrecision(e,n),uo.endFloatingPoint(e)}}var gv;(function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(gv||(gv={}));class ho{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsInterval(e,n){return(n||new ho).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInterval(e,n){return e.setPosition(e.position()+Ge),(n||new ho).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):gv.YEAR_MONTH}static startInterval(e){e.startObject(1)}static addUnit(e,n){e.addFieldInt16(0,n,gv.YEAR_MONTH)}static endInterval(e){return e.endObject()}static createInterval(e,n){return ho.startInterval(e),ho.addUnit(e,n),ho.endInterval(e)}}class xf{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsList(e,n){return(n||new xf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsList(e,n){return e.setPosition(e.position()+Ge),(n||new xf).__init(e.readInt32(e.position())+e.position(),e)}static startList(e){e.startObject(0)}static endList(e){return e.endObject()}static createList(e){return xf.startList(e),xf.endList(e)}}class po{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsMap(e,n){return(n||new po).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMap(e,n){return e.setPosition(e.position()+Ge),(n||new po).__init(e.readInt32(e.position())+e.position(),e)}keysSorted(){const e=this.bb.__offset(this.bb_pos,4);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startMap(e){e.startObject(1)}static addKeysSorted(e,n){e.addFieldInt8(0,+n,0)}static endMap(e){return e.endObject()}static createMap(e,n){return po.startMap(e),po.addKeysSorted(e,n),po.endMap(e)}}class Bf{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsNull(e,n){return(n||new Bf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsNull(e,n){return e.setPosition(e.position()+Ge),(n||new Bf).__init(e.readInt32(e.position())+e.position(),e)}static startNull(e){e.startObject(0)}static endNull(e){return e.endObject()}static createNull(e){return Bf.startNull(e),Bf.endNull(e)}}class kf{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsStruct_(e,n){return(n||new kf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsStruct_(e,n){return e.setPosition(e.position()+Ge),(n||new kf).__init(e.readInt32(e.position())+e.position(),e)}static startStruct_(e){e.startObject(0)}static endStruct_(e){return e.endObject()}static createStruct_(e){return kf.startStruct_(e),kf.endStruct_(e)}}class Er{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsTime(e,n){return(n||new Er).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTime(e,n){return e.setPosition(e.position()+Ge),(n||new Er).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):yp.MILLISECOND}bitWidth(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):32}static startTime(e){e.startObject(2)}static addUnit(e,n){e.addFieldInt16(0,n,yp.MILLISECOND)}static addBitWidth(e,n){e.addFieldInt32(1,n,32)}static endTime(e){return e.endObject()}static createTime(e,n,i){return Er.startTime(e),Er.addUnit(e,n),Er.addBitWidth(e,i),Er.endTime(e)}}class Sr{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsTimestamp(e,n){return(n||new Sr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTimestamp(e,n){return e.setPosition(e.position()+Ge),(n||new Sr).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):yp.SECOND}timezone(e){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,e):null}static startTimestamp(e){e.startObject(2)}static addUnit(e,n){e.addFieldInt16(0,n,yp.SECOND)}static addTimezone(e,n){e.addFieldOffset(1,n,0)}static endTimestamp(e){return e.endObject()}static createTimestamp(e,n,i){return Sr.startTimestamp(e),Sr.addUnit(e,n),Sr.addTimezone(e,i),Sr.endTimestamp(e)}}var _v;(function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"})(_v||(_v={}));class Es{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsUnion(e,n){return(n||new Es).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUnion(e,n){return e.setPosition(e.position()+Ge),(n||new Es).__init(e.readInt32(e.position())+e.position(),e)}mode(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):_v.Sparse}typeIds(e){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+e*4):0}typeIdsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}typeIdsArray(){const e=this.bb.__offset(this.bb_pos,6);return e?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}static startUnion(e){e.startObject(2)}static addMode(e,n){e.addFieldInt16(0,n,_v.Sparse)}static addTypeIds(e,n){e.addFieldOffset(1,n,0)}static createTypeIdsVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addInt32(n[i]);return e.endVector()}static startTypeIdsVector(e,n){e.startVector(4,n,4)}static endUnion(e){return e.endObject()}static createUnion(e,n,i){return Es.startUnion(e),Es.addMode(e,n),Es.addTypeIds(e,i),Es.endUnion(e)}}class If{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsUtf8(e,n){return(n||new If).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUtf8(e,n){return e.setPosition(e.position()+Ge),(n||new If).__init(e.readInt32(e.position())+e.position(),e)}static startUtf8(e){e.startObject(0)}static endUtf8(e){return e.endObject()}static createUtf8(e){return If.startUtf8(e),If.endUtf8(e)}}var xn;(function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.FloatingPoint=3]="FloatingPoint",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct_=13]="Struct_",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Duration=18]="Duration",t[t.LargeBinary=19]="LargeBinary",t[t.LargeUtf8=20]="LargeUtf8",t[t.LargeList=21]="LargeList"})(xn||(xn={}));class Ai{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsField(e,n){return(n||new Ai).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsField(e,n){return e.setPosition(e.position()+Ge),(n||new Ai).__init(e.readInt32(e.position())+e.position(),e)}name(e){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,e):null}nullable(){const e=this.bb.__offset(this.bb_pos,6);return e?!!this.bb.readInt8(this.bb_pos+e):!1}typeType(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):xn.NONE}type(e){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(e,this.bb_pos+n):null}dictionary(e){const n=this.bb.__offset(this.bb_pos,12);return n?(e||new El).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(e,n){const i=this.bb.__offset(this.bb_pos,14);return i?(n||new Ai).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}childrenLength(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,n){const i=this.bb.__offset(this.bb_pos,16);return i?(n||new Xn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__vector_len(this.bb_pos+e):0}static startField(e){e.startObject(7)}static addName(e,n){e.addFieldOffset(0,n,0)}static addNullable(e,n){e.addFieldInt8(1,+n,0)}static addTypeType(e,n){e.addFieldInt8(2,n,xn.NONE)}static addType(e,n){e.addFieldOffset(3,n,0)}static addDictionary(e,n){e.addFieldOffset(4,n,0)}static addChildren(e,n){e.addFieldOffset(5,n,0)}static createChildrenVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addOffset(n[i]);return e.endVector()}static startChildrenVector(e,n){e.startVector(4,n,4)}static addCustomMetadata(e,n){e.addFieldOffset(6,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addOffset(n[i]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static endField(e){return e.endObject()}}class Vn{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsSchema(e,n){return(n||new Vn).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSchema(e,n){return e.setPosition(e.position()+Ge),(n||new Vn).__init(e.readInt32(e.position())+e.position(),e)}endianness(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):_p.Little}fields(e,n){const i=this.bb.__offset(this.bb_pos,6);return i?(n||new Ai).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}fieldsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new Xn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}features(e){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+e*8):this.bb.createLong(0,0)}featuresLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}static startSchema(e){e.startObject(4)}static addEndianness(e,n){e.addFieldInt16(0,n,_p.Little)}static addFields(e,n){e.addFieldOffset(1,n,0)}static createFieldsVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addOffset(n[i]);return e.endVector()}static startFieldsVector(e,n){e.startVector(4,n,4)}static addCustomMetadata(e,n){e.addFieldOffset(2,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addOffset(n[i]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static addFeatures(e,n){e.addFieldOffset(3,n,0)}static createFeaturesVector(e,n){e.startVector(8,n.length,8);for(let i=n.length-1;i>=0;i--)e.addInt64(n[i]);return e.endVector()}static startFeaturesVector(e,n){e.startVector(8,n,8)}static endSchema(e){return e.endObject()}static finishSchemaBuffer(e,n){e.finish(n)}static finishSizePrefixedSchemaBuffer(e,n){e.finish(n,void 0,!0)}static createSchema(e,n,i,s,o){return Vn.startSchema(e),Vn.addEndianness(e,n),Vn.addFields(e,i),Vn.addCustomMetadata(e,s),Vn.addFeatures(e,o),Vn.endSchema(e)}}class Zs{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFooter(e,n){return(n||new Zs).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFooter(e,n){return e.setPosition(e.position()+Ge),(n||new Zs).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):gp.V1}schema(e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new Vn).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(e,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new Dk).__init(this.bb.__vector(this.bb_pos+i)+e*24,this.bb):null}dictionariesLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}recordBatches(e,n){const i=this.bb.__offset(this.bb_pos,10);return i?(n||new Dk).__init(this.bb.__vector(this.bb_pos+i)+e*24,this.bb):null}recordBatchesLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,n){const i=this.bb.__offset(this.bb_pos,12);return i?(n||new Xn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startFooter(e){e.startObject(5)}static addVersion(e,n){e.addFieldInt16(0,n,gp.V1)}static addSchema(e,n){e.addFieldOffset(1,n,0)}static addDictionaries(e,n){e.addFieldOffset(2,n,0)}static startDictionariesVector(e,n){e.startVector(24,n,8)}static addRecordBatches(e,n){e.addFieldOffset(3,n,0)}static startRecordBatchesVector(e,n){e.startVector(24,n,8)}static addCustomMetadata(e,n){e.addFieldOffset(4,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addOffset(n[i]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static endFooter(e){return e.endObject()}static finishFooterBuffer(e,n){e.finish(n)}static finishSizePrefixedFooterBuffer(e,n){e.finish(n,void 0,!0)}}class en{constructor(e=[],n,i){this.fields=e||[],this.metadata=n||new Map,i||(i=jk(e)),this.dictionaries=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(e=>e.name)}toString(){return`Schema<{ ${this.fields.map((e,n)=>`${n}: ${e}`).join(", ")} }>`}select(e){const n=new Set(e),i=this.fields.filter(s=>n.has(s.name));return new en(i,this.metadata)}selectAt(e){const n=e.map(i=>this.fields[i]).filter(Boolean);return new en(n,this.metadata)}assign(...e){const n=e[0]instanceof en?e[0]:Array.isArray(e[0])?new en(e[0]):new en(e),i=[...this.fields],s=Mb(Mb(new Map,this.metadata),n.metadata),o=n.fields.filter(d=>{const f=i.findIndex(u=>u.name===d.name);return~f?(i[f]=d.clone({metadata:Mb(Mb(new Map,i[f].metadata),d.metadata)}))&&!1:!0}),c=jk(o,new Map);return new en([...i,...o],s,new Map([...this.dictionaries,...c]))}}en.prototype.fields=null;en.prototype.metadata=null;en.prototype.dictionaries=null;class Tn{constructor(e,n,i=!1,s){this.name=e,this.type=n,this.nullable=i,this.metadata=s||new Map}static new(...e){let[n,i,s,o]=e;return e[0]&&typeof e[0]=="object"&&({name:n}=e[0],i===void 0&&(i=e[0].type),s===void 0&&(s=e[0].nullable),o===void 0&&(o=e[0].metadata)),new Tn(`${n}`,i,s,o)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...e){let[n,i,s,o]=e;return!e[0]||typeof e[0]!="object"?[n=this.name,i=this.type,s=this.nullable,o=this.metadata]=e:{name:n=this.name,type:i=this.type,nullable:s=this.nullable,metadata:o=this.metadata}=e[0],Tn.new(n,i,s,o)}}Tn.prototype.type=null;Tn.prototype.name=null;Tn.prototype.nullable=null;Tn.prototype.metadata=null;function Mb(t,e){return new Map([...t||new Map,...e||new Map])}function jk(t,e=new Map){for(let n=-1,i=t.length;++n<i;){const o=t[n].type;if(yt.isDictionary(o)){if(!e.has(o.id))e.set(o.id,o.dictionary);else if(e.get(o.id)!==o.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}o.children&&o.children.length>0&&jk(o.children,e)}return e}var ED=cs,jfe=Qp,Ufe=Pr;class rM{constructor(e,n=Br.V4,i,s){this.schema=e,this.version=n,i&&(this._recordBatches=i),s&&(this._dictionaryBatches=s)}static decode(e){e=new Ufe(Jt(e));const n=Zs.getRootAsFooter(e),i=en.decode(n.schema());return new zfe(i,n)}static encode(e){const n=new jfe,i=en.encode(n,e.schema);Zs.startRecordBatchesVector(n,e.numRecordBatches);for(const c of[...e.recordBatches()].slice().reverse())mp.encode(n,c);const s=n.endVector();Zs.startDictionariesVector(n,e.numDictionaries);for(const c of[...e.dictionaryBatches()].slice().reverse())mp.encode(n,c);const o=n.endVector();return Zs.startFooter(n),Zs.addSchema(n,i),Zs.addVersion(n,Br.V4),Zs.addRecordBatches(n,s),Zs.addDictionaries(n,o),Zs.finishFooterBuffer(n,Zs.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let e,n=-1,i=this.numRecordBatches;++n<i;)(e=this.getRecordBatch(n))&&(yield e)}*dictionaryBatches(){for(let e,n=-1,i=this.numDictionaries;++n<i;)(e=this.getDictionaryBatch(n))&&(yield e)}getRecordBatch(e){return e>=0&&e<this.numRecordBatches&&this._recordBatches[e]||null}getDictionaryBatch(e){return e>=0&&e<this.numDictionaries&&this._dictionaryBatches[e]||null}}class zfe extends rM{constructor(e,n){super(e,n.version()),this._footer=n}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(e){if(e>=0&&e<this.numRecordBatches){const n=this._footer.recordBatches(e);if(n)return mp.decode(n)}return null}getDictionaryBatch(e){if(e>=0&&e<this.numDictionaries){const n=this._footer.dictionaries(e);if(n)return mp.decode(n)}return null}}class mp{constructor(e,n,i){this.metaDataLength=e,this.offset=typeof i=="number"?i:i.low,this.bodyLength=typeof n=="number"?n:n.low}static decode(e){return new mp(e.metaDataLength(),e.bodyLength(),e.offset())}static encode(e,n){const{metaDataLength:i}=n,s=new ED(n.offset,0),o=new ED(n.bodyLength,0);return Dk.createBlock(e,s,i,o)}}const In=Object.freeze({done:!0,value:void 0});class SD{constructor(e){this._json=e}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class c9{tee(){return this._getDOMStream().tee()}pipe(e,n){return this._getNodeStream().pipe(e,n)}pipeTo(e,n){return this._getDOMStream().pipeTo(e,n)}pipeThrough(e,n){return this._getDOMStream().pipeThrough(e,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class $fe extends c9{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(e=>this._closedPromiseResolve=e)}get closed(){return this._closedPromise}cancel(e){return ye(this,void 0,void 0,function*(){yield this.return(e)})}write(e){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(e):this.resolvers.shift().resolve({done:!1,value:e}))}abort(e){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:e}:this.resolvers.shift().reject({done:!0,value:e}))}close(){if(this._closedPromiseResolve){const{resolvers:e}=this;for(;e.length>0;)e.shift().resolve(In);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(e){return wr.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,e)}toNodeStream(e){return wr.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,e)}throw(e){return ye(this,void 0,void 0,function*(){return yield this.abort(e),In})}return(e){return ye(this,void 0,void 0,function*(){return yield this.close(),In})}read(e){return ye(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return ye(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(...e){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,i)=>{this.resolvers.push({resolve:n,reject:i})}):Promise.resolve(In)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class qfe extends $fe{write(e){if((e=Jt(e)).byteLength>0)return super.write(e)}toString(e=!1){return e?Ak(this.toUint8Array(!0)):this.toUint8Array(!1).then(Ak)}toUint8Array(e=!1){return e?Lo(this._values)[0]:(()=>ye(this,void 0,void 0,function*(){var n,i;const s=[];let o=0;try{for(var c=Fs(this),d;d=yield c.next(),!d.done;){const f=d.value;s.push(f),o+=f.byteLength}}catch(f){n={error:f}}finally{try{d&&!d.done&&(i=c.return)&&(yield i.call(c))}finally{if(n)throw n.error}}return Lo(s,o)[0]}))()}}class yv{constructor(e){e&&(this.source=new Gfe(wr.fromIterable(e)))}[Symbol.iterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class wp{constructor(e){e instanceof wp?this.source=e.source:e instanceof qfe?this.source=new Gd(wr.fromAsyncIterable(e)):Wq(e)?this.source=new Gd(wr.fromNodeStream(e)):WO(e)?this.source=new Gd(wr.fromDOMStream(e)):Vq(e)?this.source=new Gd(wr.fromDOMStream(e.body)):sE(e)?this.source=new Gd(wr.fromIterable(e)):ry(e)?this.source=new Gd(wr.fromAsyncIterable(e)):HO(e)&&(this.source=new Gd(wr.fromAsyncIterable(e)))}[Symbol.asyncIterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}get closed(){return this.source.closed}cancel(e){return this.source.cancel(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class Gfe{constructor(e){this.source=e}cancel(e){this.return(e)}peek(e){return this.next(e,"peek").value}read(e){return this.next(e,"read").value}next(e,n="read"){return this.source.next({cmd:n,size:e})}throw(e){return Object.create(this.source.throw&&this.source.throw(e)||In)}return(e){return Object.create(this.source.return&&this.source.return(e)||In)}}class Gd{constructor(e){this.source=e,this._closedPromise=new Promise(n=>this._closedPromiseResolve=n)}cancel(e){return ye(this,void 0,void 0,function*(){yield this.return(e)})}get closed(){return this._closedPromise}read(e){return ye(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return ye(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(e,n="read"){return ye(this,void 0,void 0,function*(){return yield this.source.next({cmd:n,size:e})})}throw(e){return ye(this,void 0,void 0,function*(){const n=this.source.throw&&(yield this.source.throw(e))||In;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}return(e){return ye(this,void 0,void 0,function*(){const n=this.source.return&&(yield this.source.return(e))||In;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}}class xD extends yv{constructor(e,n){super(),this.position=0,this.buffer=Jt(e),this.size=typeof n>"u"?this.buffer.byteLength:n}readInt32(e){const{buffer:n,byteOffset:i}=this.readAt(e,4);return new DataView(n,i).getInt32(0,!0)}seek(e){return this.position=Math.min(e,this.size),e<this.size}read(e){const{buffer:n,size:i,position:s}=this;return n&&s<i?(typeof e!="number"&&(e=Number.POSITIVE_INFINITY),this.position=Math.min(i,s+Math.min(i-s,e)),n.subarray(s,this.position)):null}readAt(e,n){const i=this.buffer,s=Math.min(this.size,e+n);return i?i.subarray(e,s):new Uint8Array(n)}close(){this.buffer&&(this.buffer=null)}throw(e){return this.close(),{done:!0,value:e}}return(e){return this.close(),{done:!0,value:e}}}class mv extends wp{constructor(e,n){super(),this.position=0,this._handle=e,typeof n=="number"?this.size=n:this._pending=(()=>ye(this,void 0,void 0,function*(){this.size=(yield e.stat()).size,delete this._pending}))()}readInt32(e){return ye(this,void 0,void 0,function*(){const{buffer:n,byteOffset:i}=yield this.readAt(e,4);return new DataView(n,i).getInt32(0,!0)})}seek(e){return ye(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(e,this.size),e<this.size})}read(e){return ye(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:n,size:i,position:s}=this;if(n&&s<i){typeof e!="number"&&(e=Number.POSITIVE_INFINITY);let o=s,c=0,d=0;const f=Math.min(i,o+Math.min(i-o,e)),u=new Uint8Array(Math.max(0,(this.position=f)-o));for(;(o+=d)<f&&(c+=d)<u.byteLength;)({bytesRead:d}=yield n.read(u,c,u.byteLength-c,o));return u}return null})}readAt(e,n){return ye(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:i,size:s}=this;if(i&&e+n<s){const o=Math.min(s,e+n),c=new Uint8Array(o-e);return(yield i.read(c,0,n,e)).buffer}return new Uint8Array(n)})}close(){return ye(this,void 0,void 0,function*(){const e=this._handle;this._handle=null,e&&(yield e.close())})}throw(e){return ye(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}return(e){return ye(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}}const Vfe=1<<16;function wh(t){return t<0&&(t=4294967295+t+1),`0x${t.toString(16)}`}const bp=8,aM=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class d9{constructor(e){this.buffer=e}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(e){const n=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),i=new Uint32Array([e.buffer[1]>>>16,e.buffer[1]&65535,e.buffer[0]>>>16,e.buffer[0]&65535]);let s=n[3]*i[3];this.buffer[0]=s&65535;let o=s>>>16;return s=n[2]*i[3],o+=s,s=n[3]*i[2]>>>0,o+=s,this.buffer[0]+=o<<16,this.buffer[1]=o>>>0<s?Vfe:0,this.buffer[1]+=o>>>16,this.buffer[1]+=n[1]*i[3]+n[2]*i[2]+n[3]*i[1],this.buffer[1]+=n[0]*i[3]+n[1]*i[2]+n[2]*i[1]+n[3]*i[0]<<16,this}_plus(e){const n=this.buffer[0]+e.buffer[0]>>>0;this.buffer[1]+=e.buffer[1],n<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=n}lessThan(e){return this.buffer[1]<e.buffer[1]||this.buffer[1]===e.buffer[1]&&this.buffer[0]<e.buffer[0]}equals(e){return this.buffer[1]===e.buffer[1]&&this.buffer[0]==e.buffer[0]}greaterThan(e){return e.lessThan(this)}hex(){return`${wh(this.buffer[1])} ${wh(this.buffer[0])}`}}class nn extends d9{times(e){return this._times(e),this}plus(e){return this._plus(e),this}static from(e,n=new Uint32Array(2)){return nn.fromString(typeof e=="string"?e:e.toString(),n)}static fromNumber(e,n=new Uint32Array(2)){return nn.fromString(e.toString(),n)}static fromString(e,n=new Uint32Array(2)){const i=e.length,s=new nn(n);for(let o=0;o<i;){const c=bp<i-o?bp:i-o,d=new nn(new Uint32Array([Number.parseInt(e.slice(o,o+c),10),0])),f=new nn(new Uint32Array([aM[c],0]));s.times(f),s.plus(d),o+=c}return s}static convertArray(e){const n=new Uint32Array(e.length*2);for(let i=-1,s=e.length;++i<s;)nn.from(e[i],new Uint32Array(n.buffer,n.byteOffset+2*i*4,2));return n}static multiply(e,n){return new nn(new Uint32Array(e.buffer)).times(n)}static add(e,n){return new nn(new Uint32Array(e.buffer)).plus(n)}}class ys extends d9{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(e){return this._times(e),this}plus(e){return this._plus(e),this}lessThan(e){const n=this.buffer[1]<<0,i=e.buffer[1]<<0;return n<i||n===i&&this.buffer[0]<e.buffer[0]}static from(e,n=new Uint32Array(2)){return ys.fromString(typeof e=="string"?e:e.toString(),n)}static fromNumber(e,n=new Uint32Array(2)){return ys.fromString(e.toString(),n)}static fromString(e,n=new Uint32Array(2)){const i=e.startsWith("-"),s=e.length,o=new ys(n);for(let c=i?1:0;c<s;){const d=bp<s-c?bp:s-c,f=new ys(new Uint32Array([Number.parseInt(e.slice(c,c+d),10),0])),u=new ys(new Uint32Array([aM[d],0]));o.times(u),o.plus(f),c+=d}return i?o.negate():o}static convertArray(e){const n=new Uint32Array(e.length*2);for(let i=-1,s=e.length;++i<s;)ys.from(e[i],new Uint32Array(n.buffer,n.byteOffset+2*i*4,2));return n}static multiply(e,n){return new ys(new Uint32Array(e.buffer)).times(n)}static add(e,n){return new ys(new Uint32Array(e.buffer)).plus(n)}}class Wa{constructor(e){this.buffer=e}high(){return new ys(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new ys(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(e){const n=new nn(new Uint32Array([this.buffer[3],0])),i=new nn(new Uint32Array([this.buffer[2],0])),s=new nn(new Uint32Array([this.buffer[1],0])),o=new nn(new Uint32Array([this.buffer[0],0])),c=new nn(new Uint32Array([e.buffer[3],0])),d=new nn(new Uint32Array([e.buffer[2],0])),f=new nn(new Uint32Array([e.buffer[1],0])),u=new nn(new Uint32Array([e.buffer[0],0]));let a=nn.multiply(o,u);this.buffer[0]=a.low();const _=new nn(new Uint32Array([a.high(),0]));return a=nn.multiply(s,u),_.plus(a),a=nn.multiply(o,f),_.plus(a),this.buffer[1]=_.low(),this.buffer[3]=_.lessThan(a)?1:0,this.buffer[2]=_.high(),new nn(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(nn.multiply(i,u)).plus(nn.multiply(s,f)).plus(nn.multiply(o,d)),this.buffer[3]+=nn.multiply(n,u).plus(nn.multiply(i,f)).plus(nn.multiply(s,d)).plus(nn.multiply(o,c)).low(),this}plus(e){const n=new Uint32Array(4);return n[3]=this.buffer[3]+e.buffer[3]>>>0,n[2]=this.buffer[2]+e.buffer[2]>>>0,n[1]=this.buffer[1]+e.buffer[1]>>>0,n[0]=this.buffer[0]+e.buffer[0]>>>0,n[0]<this.buffer[0]>>>0&&++n[1],n[1]<this.buffer[1]>>>0&&++n[2],n[2]<this.buffer[2]>>>0&&++n[3],this.buffer[3]=n[3],this.buffer[2]=n[2],this.buffer[1]=n[1],this.buffer[0]=n[0],this}hex(){return`${wh(this.buffer[3])} ${wh(this.buffer[2])} ${wh(this.buffer[1])} ${wh(this.buffer[0])}`}static multiply(e,n){return new Wa(new Uint32Array(e.buffer)).times(n)}static add(e,n){return new Wa(new Uint32Array(e.buffer)).plus(n)}static from(e,n=new Uint32Array(4)){return Wa.fromString(typeof e=="string"?e:e.toString(),n)}static fromNumber(e,n=new Uint32Array(4)){return Wa.fromString(e.toString(),n)}static fromString(e,n=new Uint32Array(4)){const i=e.startsWith("-"),s=e.length,o=new Wa(n);for(let c=i?1:0;c<s;){const d=bp<s-c?bp:s-c,f=new Wa(new Uint32Array([Number.parseInt(e.slice(c,c+d),10),0,0,0])),u=new Wa(new Uint32Array([aM[d],0,0,0]));o.times(u),o.plus(f),c+=d}return i?o.negate():o}static convertArray(e){const n=new Uint32Array(e.length*4);for(let i=-1,s=e.length;++i<s;)Wa.from(e[i],new Uint32Array(n.buffer,n.byteOffset+4*4*i,4));return n}}class f9 extends jt{constructor(e,n,i,s){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=e,this.nodes=n,this.buffers=i,this.dictionaries=s}visit(e){return super.visit(e instanceof Tn?e.type:e)}visitNull(e,{length:n}=this.nextFieldNode()){return Ct({type:e,length:n})}visitBool(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ct({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitInt(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ct({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitFloat(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ct({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitUtf8(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ct({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitBinary(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ct({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitFixedSizeBinary(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ct({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitDate(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ct({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitTimestamp(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ct({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitTime(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ct({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitDecimal(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ct({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitList(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ct({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}visitStruct(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ct({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),children:this.visitMany(e.children)})}visitUnion(e){return e.mode===Fa.Sparse?this.visitSparseUnion(e):this.visitDenseUnion(e)}visitDenseUnion(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ct({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),typeIds:this.readTypeIds(e),valueOffsets:this.readOffsets(e),children:this.visitMany(e.children)})}visitSparseUnion(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ct({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),typeIds:this.readTypeIds(e),children:this.visitMany(e.children)})}visitDictionary(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ct({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e.indices),dictionary:this.readDictionary(e)})}visitInterval(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ct({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitFixedSizeList(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ct({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),child:this.visit(e.children[0])})}visitMap(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ct({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(e,n,i=this.nextBufferRange()){return n>0&&this.readData(e,i)||new Uint8Array(0)}readOffsets(e,n){return this.readData(e,n)}readTypeIds(e,n){return this.readData(e,n)}readData(e,{length:n,offset:i}=this.nextBufferRange()){return this.bytes.subarray(i,i+n)}readDictionary(e){return this.dictionaries.get(e.id)}}class Hfe extends f9{constructor(e,n,i,s){super(new Uint8Array(0),n,i,s),this.sources=e}readNullBitmap(e,n,{offset:i}=this.nextBufferRange()){return n<=0?new Uint8Array(0):Lk(this.sources[i])}readOffsets(e,{offset:n}=this.nextBufferRange()){return un(Uint8Array,un(Int32Array,this.sources[n]))}readTypeIds(e,{offset:n}=this.nextBufferRange()){return un(Uint8Array,un(e.ArrayType,this.sources[n]))}readData(e,{offset:n}=this.nextBufferRange()){const{sources:i}=this;return yt.isTimestamp(e)||(yt.isInt(e)||yt.isTime(e))&&e.bitWidth===64||yt.isDate(e)&&e.unit===$l.MILLISECOND?un(Uint8Array,ys.convertArray(i[n])):yt.isDecimal(e)?un(Uint8Array,Wa.convertArray(i[n])):yt.isBinary(e)||yt.isFixedSizeBinary(e)?Wfe(i[n]):yt.isBool(e)?Lk(i[n]):yt.isUtf8(e)?VO(i[n].join("")):un(Uint8Array,un(e.ArrayType,i[n].map(s=>+s)))}}function Wfe(t){const e=t.join(""),n=new Uint8Array(e.length/2);for(let i=0;i<e.length;i+=2)n[i>>1]=Number.parseInt(e.slice(i,i+2),16);return n}class lt extends jt{compareSchemas(e,n){return e===n||n instanceof e.constructor&&this.compareManyFields(e.fields,n.fields)}compareManyFields(e,n){return e===n||Array.isArray(e)&&Array.isArray(n)&&e.length===n.length&&e.every((i,s)=>this.compareFields(i,n[s]))}compareFields(e,n){return e===n||n instanceof e.constructor&&e.name===n.name&&e.nullable===n.nullable&&this.visit(e.type,n.type)}}function Ws(t,e){return e instanceof t.constructor}function cm(t,e){return t===e||Ws(t,e)}function Xl(t,e){return t===e||Ws(t,e)&&t.bitWidth===e.bitWidth&&t.isSigned===e.isSigned}function aE(t,e){return t===e||Ws(t,e)&&t.precision===e.precision}function Yfe(t,e){return t===e||Ws(t,e)&&t.byteWidth===e.byteWidth}function oM(t,e){return t===e||Ws(t,e)&&t.unit===e.unit}function dm(t,e){return t===e||Ws(t,e)&&t.unit===e.unit&&t.timezone===e.timezone}function fm(t,e){return t===e||Ws(t,e)&&t.unit===e.unit&&t.bitWidth===e.bitWidth}function Xfe(t,e){return t===e||Ws(t,e)&&t.children.length===e.children.length&&sd.compareManyFields(t.children,e.children)}function Kfe(t,e){return t===e||Ws(t,e)&&t.children.length===e.children.length&&sd.compareManyFields(t.children,e.children)}function lM(t,e){return t===e||Ws(t,e)&&t.mode===e.mode&&t.typeIds.every((n,i)=>n===e.typeIds[i])&&sd.compareManyFields(t.children,e.children)}function Jfe(t,e){return t===e||Ws(t,e)&&t.id===e.id&&t.isOrdered===e.isOrdered&&sd.visit(t.indices,e.indices)&&sd.visit(t.dictionary,e.dictionary)}function cM(t,e){return t===e||Ws(t,e)&&t.unit===e.unit}function Qfe(t,e){return t===e||Ws(t,e)&&t.listSize===e.listSize&&t.children.length===e.children.length&&sd.compareManyFields(t.children,e.children)}function Zfe(t,e){return t===e||Ws(t,e)&&t.keysSorted===e.keysSorted&&t.children.length===e.children.length&&sd.compareManyFields(t.children,e.children)}lt.prototype.visitNull=cm;lt.prototype.visitBool=cm;lt.prototype.visitInt=Xl;lt.prototype.visitInt8=Xl;lt.prototype.visitInt16=Xl;lt.prototype.visitInt32=Xl;lt.prototype.visitInt64=Xl;lt.prototype.visitUint8=Xl;lt.prototype.visitUint16=Xl;lt.prototype.visitUint32=Xl;lt.prototype.visitUint64=Xl;lt.prototype.visitFloat=aE;lt.prototype.visitFloat16=aE;lt.prototype.visitFloat32=aE;lt.prototype.visitFloat64=aE;lt.prototype.visitUtf8=cm;lt.prototype.visitBinary=cm;lt.prototype.visitFixedSizeBinary=Yfe;lt.prototype.visitDate=oM;lt.prototype.visitDateDay=oM;lt.prototype.visitDateMillisecond=oM;lt.prototype.visitTimestamp=dm;lt.prototype.visitTimestampSecond=dm;lt.prototype.visitTimestampMillisecond=dm;lt.prototype.visitTimestampMicrosecond=dm;lt.prototype.visitTimestampNanosecond=dm;lt.prototype.visitTime=fm;lt.prototype.visitTimeSecond=fm;lt.prototype.visitTimeMillisecond=fm;lt.prototype.visitTimeMicrosecond=fm;lt.prototype.visitTimeNanosecond=fm;lt.prototype.visitDecimal=cm;lt.prototype.visitList=Xfe;lt.prototype.visitStruct=Kfe;lt.prototype.visitUnion=lM;lt.prototype.visitDenseUnion=lM;lt.prototype.visitSparseUnion=lM;lt.prototype.visitDictionary=Jfe;lt.prototype.visitInterval=cM;lt.prototype.visitIntervalDayTime=cM;lt.prototype.visitIntervalYearMonth=cM;lt.prototype.visitFixedSizeList=Qfe;lt.prototype.visitMap=Zfe;const sd=new lt;function eue(t,e){return sd.compareSchemas(t,e)}function Mx(t,e){return tue(t,e.map(n=>n.data.concat()))}function tue(t,e){const n=[...t.fields],i=[],s={numBatches:e.reduce((_,w)=>Math.max(_,w.length),0)};let o=0,c=0,d=-1;const f=e.length;let u,a=[];for(;s.numBatches-- >0;){for(c=Number.POSITIVE_INFINITY,d=-1;++d<f;)a[d]=u=e[d].shift(),c=Math.min(c,u?u.length:c);Number.isFinite(c)&&(a=nue(n,c,a,e,s),c>0&&(i[o++]=Ct({type:new as(n),length:c,nullCount:0,children:a.slice()})))}return[t=t.assign(n),i.map(_=>new Ci(t,_))]}function nue(t,e,n,i,s){var o;const c=(e+63&-64)>>3;for(let d=-1,f=i.length;++d<f;){const u=n[d],a=u==null?void 0:u.length;if(a>=e)a===e?n[d]=u:(n[d]=u.slice(0,e),s.numBatches=Math.max(s.numBatches,i[d].unshift(u.slice(e,a-e))));else{const _=t[d];t[d]=_.clone({nullable:!0}),n[d]=(o=u==null?void 0:u._changeLengthAndBackfillNullBitmap(e))!==null&&o!==void 0?o:Ct({type:_.type,length:e,nullCount:e,nullBitmap:new Uint8Array(c)})}}return n}var u9;class xr{constructor(...e){var n,i;if(e.length===0)return this.batches=[],this.schema=new en([]),this._offsets=[0],this;let s,o;e[0]instanceof en&&(s=e.shift()),e[e.length-1]instanceof Uint32Array&&(o=e.pop());const c=f=>{if(f){if(f instanceof Ci)return[f];if(f instanceof xr)return f.batches;if(f instanceof pn){if(f.type instanceof as)return[new Ci(new en(f.type.children),f)]}else{if(Array.isArray(f))return f.flatMap(u=>c(u));if(typeof f[Symbol.iterator]=="function")return[...f].flatMap(u=>c(u));if(typeof f=="object"){const u=Object.keys(f),a=u.map(m=>new an([f[m]])),_=new en(u.map((m,l)=>new Tn(String(m),a[l].type))),[,w]=Mx(_,a);return w.length===0?[new Ci(f)]:w}}}return[]},d=e.flatMap(f=>c(f));if(s=(i=s!=null?s:(n=d[0])===null||n===void 0?void 0:n.schema)!==null&&i!==void 0?i:new en([]),!(s instanceof en))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const f of d){if(!(f instanceof Ci))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!eue(s,f.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=s,this.batches=d,this._offsets=o!=null?o:Z7(this.data)}get data(){return this.batches.map(({data:e})=>e)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((e,n)=>e+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=Q7(this.data)),this._nullCount}isValid(e){return!1}get(e){return null}set(e,n){}indexOf(e,n){return-1}getByteLength(e){return 0}[Symbol.iterator](){return this.batches.length>0?sM.visit(new an(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...e){const n=this.schema,i=this.data.concat(e.flatMap(({data:s})=>s));return new xr(n,i.map(s=>new Ci(n,s)))}slice(e,n){const i=this.schema;[e,n]=K7({length:this.numRows},e,n);const s=e9(this.data,this._offsets,e,n);return new xr(i,s.map(o=>new Ci(i,o)))}getChild(e){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===e))}getChildAt(e){if(e>-1&&e<this.schema.fields.length){const n=this.data.map(i=>i.children[e]);if(n.length===0){const{type:i}=this.schema.fields[e],s=Ct({type:i,length:0,nullCount:0});n.push(s._changeLengthAndBackfillNullBitmap(this.numRows))}return new an(n)}return null}setChild(e,n){var i;return this.setChildAt((i=this.schema.fields)===null||i===void 0?void 0:i.findIndex(s=>s.name===e),n)}setChildAt(e,n){let i=this.schema,s=[...this.batches];if(e>-1&&e<this.numCols){n||(n=new an([Ct({type:new nd,length:this.numRows})]));const o=i.fields.slice(),c=o[e].clone({type:n.type}),d=this.schema.fields.map((f,u)=>this.getChildAt(u));[o[e],d[e]]=[c,n],[i,s]=Mx(i,d)}return new xr(i,s)}select(e){const n=this.schema.fields.reduce((i,s,o)=>i.set(s.name,o),new Map);return this.selectAt(e.map(i=>n.get(i)).filter(i=>i>-1))}selectAt(e){const n=this.schema.selectAt(e),i=this.batches.map(s=>s.selectAt(e));return new xr(n,i)}assign(e){const n=this.schema.fields,[i,s]=e.schema.fields.reduce((d,f,u)=>{const[a,_]=d,w=n.findIndex(m=>m.name===f.name);return~w?_[w]=u:a.push(u),d},[[],[]]),o=this.schema.assign(e.schema),c=[...n.map((d,f)=>[f,s[f]]).map(([d,f])=>f===void 0?this.getChildAt(d):e.getChildAt(f)),...i.map(d=>e.getChildAt(d))].filter(Boolean);return new xr(...Mx(o,c))}}u9=Symbol.toStringTag;xr[u9]=(t=>(t.schema=null,t.batches=[],t._offsets=new Uint32Array([0]),t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,t.isValid=jh(iM),t.get=jh(js.getVisitFn(ne.Struct)),t.set=t9(Ur.getVisitFn(ne.Struct)),t.indexOf=n9(dv.getVisitFn(ne.Struct)),t.getByteLength=jh(Po.getVisitFn(ne.Struct)),"Table"))(xr.prototype);var h9;class Ci{constructor(...e){switch(e.length){case 2:{if([this.schema]=e,!(this.schema instanceof en))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=Ct({nullCount:0,type:new as(this.schema.fields),children:this.schema.fields.map(n=>Ct({type:n.type,nullCount:0}))})]=e,!(this.data instanceof pn))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=BD(this.schema,this.data.children);break}case 1:{const[n]=e,{fields:i,children:s,length:o}=Object.keys(n).reduce((f,u,a)=>(f.children[a]=n[u],f.length=Math.max(f.length,n[u].length),f.fields[a]=Tn.new({name:u,type:n[u].type,nullable:!0}),f),{length:0,fields:new Array,children:new Array}),c=new en(i),d=Ct({type:new as(i),length:o,children:s,nullCount:0});[this.schema,this.data]=BD(c,d.children,o);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=p9(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(e){return this.data.getValid(e)}get(e){return js.visit(this.data,e)}set(e,n){return Ur.visit(this.data,e,n)}indexOf(e,n){return dv.visit(this.data,e,n)}getByteLength(e){return Po.visit(this.data,e)}[Symbol.iterator](){return sM.visit(new an([this.data]))}toArray(){return[...this]}concat(...e){return new xr(this.schema,[this,...e])}slice(e,n){const[i]=new an([this.data]).slice(e,n).data;return new Ci(this.schema,i)}getChild(e){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(i=>i.name===e))}getChildAt(e){return e>-1&&e<this.schema.fields.length?new an([this.data.children[e]]):null}setChild(e,n){var i;return this.setChildAt((i=this.schema.fields)===null||i===void 0?void 0:i.findIndex(s=>s.name===e),n)}setChildAt(e,n){let i=this.schema,s=this.data;if(e>-1&&e<this.numCols){n||(n=new an([Ct({type:new nd,length:this.numRows})]));const o=i.fields.slice(),c=s.children.slice(),d=o[e].clone({type:n.type});[o[e],c[e]]=[d,n.data[0]],i=new en(o,new Map(this.schema.metadata)),s=Ct({type:new as(o),children:c})}return new Ci(i,s)}select(e){const n=this.schema.select(e),i=new as(n.fields),s=[];for(const o of e){const c=this.schema.fields.findIndex(d=>d.name===o);~c&&(s[c]=this.data.children[c])}return new Ci(n,Ct({type:i,length:this.numRows,children:s}))}selectAt(e){const n=this.schema.selectAt(e),i=e.map(o=>this.data.children[o]).filter(Boolean),s=Ct({type:new as(n.fields),length:this.numRows,children:i});return new Ci(n,s)}}h9=Symbol.toStringTag;Ci[h9]=(t=>(t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Ci.prototype);function BD(t,e,n=e.reduce((i,s)=>Math.max(i,s.length),0)){var i;const s=[...t.fields],o=[...e],c=(n+63&-64)>>3;for(const[d,f]of t.fields.entries()){const u=e[d];(!u||u.length!==n)&&(s[d]=f.clone({nullable:!0}),o[d]=(i=u==null?void 0:u._changeLengthAndBackfillNullBitmap(n))!==null&&i!==void 0?i:Ct({type:f.type,length:n,nullCount:n,nullBitmap:new Uint8Array(c)}))}return[t.assign(s),Ct({type:new as(s),length:n,children:o})]}function p9(t,e,n=new Map){for(let i=-1,s=t.length;++i<s;){const c=t[i].type,d=e[i];if(yt.isDictionary(c)){if(!n.has(c.id))d.dictionary&&n.set(c.id,d.dictionary);else if(n.get(c.id)!==d.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}c.children&&c.children.length>0&&p9(c.children,d.children,n)}return n}class g9 extends Ci{constructor(e){const n=e.fields.map(s=>Ct({type:s.type})),i=Ct({type:new as(e.fields),nullCount:0,children:n});super(e,i)}}var wv;(function(t){t[t.BUFFER=0]="BUFFER"})(wv||(wv={}));var bv;(function(t){t[t.LZ4_FRAME=0]="LZ4_FRAME",t[t.ZSTD=1]="ZSTD"})(bv||(bv={}));class yc{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsBodyCompression(e,n){return(n||new yc).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBodyCompression(e,n){return e.setPosition(e.position()+Ge),(n||new yc).__init(e.readInt32(e.position())+e.position(),e)}codec(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb_pos+e):bv.LZ4_FRAME}method(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb_pos+e):wv.BUFFER}static startBodyCompression(e){e.startObject(2)}static addCodec(e,n){e.addFieldInt8(0,n,bv.LZ4_FRAME)}static addMethod(e,n){e.addFieldInt8(1,n,wv.BUFFER)}static endBodyCompression(e){return e.endObject()}static createBodyCompression(e,n,i){return yc.startBodyCompression(e),yc.addCodec(e,n),yc.addMethod(e,i),yc.endBodyCompression(e)}}class _9{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(e,n,i){return e.prep(8,16),e.writeInt64(i),e.writeInt64(n),e.offset()}}class y9{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(e,n,i){return e.prep(8,16),e.writeInt64(i),e.writeInt64(n),e.offset()}}class br{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsRecordBatch(e,n){return(n||new br).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsRecordBatch(e,n){return e.setPosition(e.position()+Ge),(n||new br).__init(e.readInt32(e.position())+e.position(),e)}length(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}nodes(e,n){const i=this.bb.__offset(this.bb_pos,6);return i?(n||new y9).__init(this.bb.__vector(this.bb_pos+i)+e*16,this.bb):null}nodesLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}buffers(e,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new _9).__init(this.bb.__vector(this.bb_pos+i)+e*16,this.bb):null}buffersLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}compression(e){const n=this.bb.__offset(this.bb_pos,10);return n?(e||new yc).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(e){e.startObject(4)}static addLength(e,n){e.addFieldInt64(0,n,e.createLong(0,0))}static addNodes(e,n){e.addFieldOffset(1,n,0)}static startNodesVector(e,n){e.startVector(16,n,8)}static addBuffers(e,n){e.addFieldOffset(2,n,0)}static startBuffersVector(e,n){e.startVector(16,n,8)}static addCompression(e,n){e.addFieldOffset(3,n,0)}static endRecordBatch(e){return e.endObject()}}class Sl{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDictionaryBatch(e,n){return(n||new Sl).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryBatch(e,n){return e.setPosition(e.position()+Ge),(n||new Sl).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}data(e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new br).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startDictionaryBatch(e){e.startObject(3)}static addId(e,n){e.addFieldInt64(0,n,e.createLong(0,0))}static addData(e,n){e.addFieldOffset(1,n,0)}static addIsDelta(e,n){e.addFieldInt8(2,+n,0)}static endDictionaryBatch(e){return e.endObject()}}var Tv;(function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"})(Tv||(Tv={}));class ai{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsMessage(e,n){return(n||new ai).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMessage(e,n){return e.setPosition(e.position()+Ge),(n||new ai).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):gp.V1}headerType(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):Tv.NONE}header(e){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(e,this.bb_pos+n):null}bodyLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}customMetadata(e,n){const i=this.bb.__offset(this.bb_pos,12);return i?(n||new Xn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startMessage(e){e.startObject(5)}static addVersion(e,n){e.addFieldInt16(0,n,gp.V1)}static addHeaderType(e,n){e.addFieldInt8(1,n,Tv.NONE)}static addHeader(e,n){e.addFieldOffset(2,n,0)}static addBodyLength(e,n){e.addFieldInt64(3,n,e.createLong(0,0))}static addCustomMetadata(e,n){e.addFieldOffset(4,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addOffset(n[i]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static endMessage(e){return e.endObject()}static finishMessageBuffer(e,n){e.finish(n)}static finishSizePrefixedMessageBuffer(e,n){e.finish(n,void 0,!0)}static createMessage(e,n,i,s,o,c){return ai.startMessage(e),ai.addVersion(e,n),ai.addHeaderType(e,i),ai.addHeader(e,s),ai.addBodyLength(e,o),ai.addCustomMetadata(e,c),ai.endMessage(e)}}var iue=cs;class sue extends jt{visit(e,n){return e==null||n==null?void 0:super.visit(e,n)}visitNull(e,n){return Bf.startNull(n),Bf.endNull(n)}visitInt(e,n){return sr.startInt(n),sr.addBitWidth(n,e.bitWidth),sr.addIsSigned(n,e.isSigned),sr.endInt(n)}visitFloat(e,n){return uo.startFloatingPoint(n),uo.addPrecision(n,e.precision),uo.endFloatingPoint(n)}visitBinary(e,n){return Ef.startBinary(n),Ef.endBinary(n)}visitBool(e,n){return Sf.startBool(n),Sf.endBool(n)}visitUtf8(e,n){return If.startUtf8(n),If.endUtf8(n)}visitDecimal(e,n){return ws.startDecimal(n),ws.addScale(n,e.scale),ws.addPrecision(n,e.precision),ws.addBitWidth(n,e.bitWidth),ws.endDecimal(n)}visitDate(e,n){return lo.startDate(n),lo.addUnit(n,e.unit),lo.endDate(n)}visitTime(e,n){return Er.startTime(n),Er.addUnit(n,e.unit),Er.addBitWidth(n,e.bitWidth),Er.endTime(n)}visitTimestamp(e,n){const i=e.timezone&&n.createString(e.timezone)||void 0;return Sr.startTimestamp(n),Sr.addUnit(n,e.unit),i!==void 0&&Sr.addTimezone(n,i),Sr.endTimestamp(n)}visitInterval(e,n){return ho.startInterval(n),ho.addUnit(n,e.unit),ho.endInterval(n)}visitList(e,n){return xf.startList(n),xf.endList(n)}visitStruct(e,n){return kf.startStruct_(n),kf.endStruct_(n)}visitUnion(e,n){Es.startTypeIdsVector(n,e.typeIds.length);const i=Es.createTypeIdsVector(n,e.typeIds);return Es.startUnion(n),Es.addMode(n,e.mode),Es.addTypeIds(n,i),Es.endUnion(n)}visitDictionary(e,n){const i=this.visit(e.indices,n);return El.startDictionaryEncoding(n),El.addId(n,new iue(e.id,0)),El.addIsOrdered(n,e.isOrdered),i!==void 0&&El.addIndexType(n,i),El.endDictionaryEncoding(n)}visitFixedSizeBinary(e,n){return co.startFixedSizeBinary(n),co.addByteWidth(n,e.byteWidth),co.endFixedSizeBinary(n)}visitFixedSizeList(e,n){return fo.startFixedSizeList(n),fo.addListSize(n,e.listSize),fo.endFixedSizeList(n)}visitMap(e,n){return po.startMap(n),po.addKeysSorted(n,e.keysSorted),po.endMap(n)}}const Ax=new sue;function rue(t,e=new Map){return new en(oue(t,e),b0(t.customMetadata),e)}function m9(t){return new Oa(t.count,w9(t.columns),b9(t.columns))}function aue(t){return new ql(m9(t.data),t.id,t.isDelta)}function oue(t,e){return(t.fields||[]).filter(Boolean).map(n=>Tn.fromJSON(n,e))}function kD(t,e){return(t.children||[]).filter(Boolean).map(n=>Tn.fromJSON(n,e))}function w9(t){return(t||[]).reduce((e,n)=>[...e,new tg(n.count,lue(n.VALIDITY)),...w9(n.children)],[])}function b9(t,e=[]){for(let n=-1,i=(t||[]).length;++n<i;){const s=t[n];s.VALIDITY&&e.push(new Il(e.length,s.VALIDITY.length)),s.TYPE&&e.push(new Il(e.length,s.TYPE.length)),s.OFFSET&&e.push(new Il(e.length,s.OFFSET.length)),s.DATA&&e.push(new Il(e.length,s.DATA.length)),e=b9(s.children,e)}return e}function lue(t){return(t||[]).reduce((e,n)=>e+ +(n===0),0)}function cue(t,e){let n,i,s,o,c,d;return!e||!(o=t.dictionary)?(c=FD(t,kD(t,e)),s=new Tn(t.name,c,t.nullable,b0(t.customMetadata))):e.has(n=o.id)?(i=(i=o.indexType)?ID(i):new ly,d=new pp(e.get(n),i,n,o.isOrdered),s=new Tn(t.name,d,t.nullable,b0(t.customMetadata))):(i=(i=o.indexType)?ID(i):new ly,e.set(n,c=FD(t,kD(t,e))),d=new pp(c,i,n,o.isOrdered),s=new Tn(t.name,d,t.nullable,b0(t.customMetadata))),s||null}function b0(t){return new Map(Object.entries(t||{}))}function ID(t){return new id(t.isSigned,t.bitWidth)}function FD(t,e){const n=t.type.name;switch(n){case"NONE":return new nd;case"null":return new nd;case"binary":return new QT;case"utf8":return new ZT;case"bool":return new ev;case"list":return new rv((e||[])[0]);case"struct":return new as(e||[]);case"struct_":return new as(e||[])}switch(n){case"int":{const i=t.type;return new id(i.isSigned,i.bitWidth)}case"floatingpoint":{const i=t.type;return new cy(Os[i.precision])}case"decimal":{const i=t.type;return new tv(i.scale,i.precision,i.bitWidth)}case"date":{const i=t.type;return new nv($l[i.unit])}case"time":{const i=t.type;return new dy(Wt[i.unit],i.bitWidth)}case"timestamp":{const i=t.type;return new iv(Wt[i.unit],i.timezone)}case"interval":{const i=t.type;return new sv(td[i.unit])}case"union":{const i=t.type;return new av(Fa[i.mode],i.typeIds||[],e||[])}case"fixedsizebinary":{const i=t.type;return new ov(i.byteWidth)}case"fixedsizelist":{const i=t.type;return new lv(i.listSize,(e||[])[0])}case"map":{const i=t.type;return new cv((e||[])[0],i.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var Zf=cs,due=Qp,fue=Pr;class ha{constructor(e,n,i,s){this._version=n,this._headerType=i,this.body=new Uint8Array(0),s&&(this._createHeader=()=>s),this._bodyLength=typeof e=="number"?e:e.low}static fromJSON(e,n){const i=new ha(0,Br.V4,n);return i._createHeader=uue(e,n),i}static decode(e){e=new fue(Jt(e));const n=ai.getRootAsMessage(e),i=n.bodyLength(),s=n.version(),o=n.headerType(),c=new ha(i,s,o);return c._createHeader=hue(n,o),c}static encode(e){const n=new due;let i=-1;return e.isSchema()?i=en.encode(n,e.header()):e.isRecordBatch()?i=Oa.encode(n,e.header()):e.isDictionaryBatch()&&(i=ql.encode(n,e.header())),ai.startMessage(n),ai.addVersion(n,Br.V4),ai.addHeader(n,i),ai.addHeaderType(n,e.headerType),ai.addBodyLength(n,new Zf(e.bodyLength,0)),ai.finishMessageBuffer(n,ai.endMessage(n)),n.asUint8Array()}static from(e,n=0){if(e instanceof en)return new ha(0,Br.V4,rn.Schema,e);if(e instanceof Oa)return new ha(n,Br.V4,rn.RecordBatch,e);if(e instanceof ql)return new ha(n,Br.V4,rn.DictionaryBatch,e);throw new Error(`Unrecognized Message header: ${e}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===rn.Schema}isRecordBatch(){return this.headerType===rn.RecordBatch}isDictionaryBatch(){return this.headerType===rn.DictionaryBatch}}class Oa{constructor(e,n,i){this._nodes=n,this._buffers=i,this._length=typeof e=="number"?e:e.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}}class ql{constructor(e,n,i=!1){this._data=e,this._isDelta=i,this._id=typeof n=="number"?n:n.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}}class Il{constructor(e,n){this.offset=typeof e=="number"?e:e.low,this.length=typeof n=="number"?n:n.low}}class tg{constructor(e,n){this.length=typeof e=="number"?e:e.low,this.nullCount=typeof n=="number"?n:n.low}}function uue(t,e){return()=>{switch(e){case rn.Schema:return en.fromJSON(t);case rn.RecordBatch:return Oa.fromJSON(t);case rn.DictionaryBatch:return ql.fromJSON(t)}throw new Error(`Unrecognized Message type: { name: ${rn[e]}, type: ${e} }`)}}function hue(t,e){return()=>{switch(e){case rn.Schema:return en.decode(t.header(new Vn));case rn.RecordBatch:return Oa.decode(t.header(new br),t.version());case rn.DictionaryBatch:return ql.decode(t.header(new Sl),t.version())}throw new Error(`Unrecognized Message type: { name: ${rn[e]}, type: ${e} }`)}}Tn.encode=Sue;Tn.decode=vue;Tn.fromJSON=cue;en.encode=Eue;en.decode=pue;en.fromJSON=rue;Oa.encode=xue;Oa.decode=gue;Oa.fromJSON=m9;ql.encode=Bue;ql.decode=_ue;ql.fromJSON=aue;tg.encode=kue;tg.decode=mue;Il.encode=Iue;Il.decode=yue;function pue(t,e=new Map){const n=Tue(t,e);return new en(n,T0(t),e)}function gue(t,e=Br.V4){if(t.compression()!==null)throw new Error("Record batch compression not implemented");return new Oa(t.length(),wue(t),bue(t,e))}function _ue(t,e=Br.V4){return new ql(Oa.decode(t.data(),e),t.id(),t.isDelta())}function yue(t){return new Il(t.offset(),t.length())}function mue(t){return new tg(t.length(),t.nullCount())}function wue(t){const e=[];for(let n,i=-1,s=-1,o=t.nodesLength();++i<o;)(n=t.nodes(i))&&(e[++s]=tg.decode(n));return e}function bue(t,e){const n=[];for(let i,s=-1,o=-1,c=t.buffersLength();++s<c;)(i=t.buffers(s))&&(e<Br.V4&&(i.bb_pos+=8*(s+1)),n[++o]=Il.decode(i));return n}function Tue(t,e){const n=[];for(let i,s=-1,o=-1,c=t.fieldsLength();++s<c;)(i=t.fields(s))&&(n[++o]=Tn.decode(i,e));return n}function OD(t,e){const n=[];for(let i,s=-1,o=-1,c=t.childrenLength();++s<c;)(i=t.children(s))&&(n[++o]=Tn.decode(i,e));return n}function vue(t,e){let n,i,s,o,c,d;return!e||!(d=t.dictionary())?(s=AD(t,OD(t,e)),i=new Tn(t.name(),s,t.nullable(),T0(t))):e.has(n=d.id().low)?(o=(o=d.indexType())?MD(o):new ly,c=new pp(e.get(n),o,n,d.isOrdered()),i=new Tn(t.name(),c,t.nullable(),T0(t))):(o=(o=d.indexType())?MD(o):new ly,e.set(n,s=AD(t,OD(t,e))),c=new pp(s,o,n,d.isOrdered()),i=new Tn(t.name(),c,t.nullable(),T0(t))),i||null}function T0(t){const e=new Map;if(t)for(let n,i,s=-1,o=Math.trunc(t.customMetadataLength());++s<o;)(n=t.customMetadata(s))&&(i=n.key())!=null&&e.set(i,n.value());return e}function MD(t){return new id(t.isSigned(),t.bitWidth())}function AD(t,e){const n=t.typeType();switch(n){case xn.NONE:return new nd;case xn.Null:return new nd;case xn.Binary:return new QT;case xn.Utf8:return new ZT;case xn.Bool:return new ev;case xn.List:return new rv((e||[])[0]);case xn.Struct_:return new as(e||[])}switch(n){case xn.Int:{const i=t.type(new sr);return new id(i.isSigned(),i.bitWidth())}case xn.FloatingPoint:{const i=t.type(new uo);return new cy(i.precision())}case xn.Decimal:{const i=t.type(new ws);return new tv(i.scale(),i.precision(),i.bitWidth())}case xn.Date:{const i=t.type(new lo);return new nv(i.unit())}case xn.Time:{const i=t.type(new Er);return new dy(i.unit(),i.bitWidth())}case xn.Timestamp:{const i=t.type(new Sr);return new iv(i.unit(),i.timezone())}case xn.Interval:{const i=t.type(new ho);return new sv(i.unit())}case xn.Union:{const i=t.type(new Es);return new av(i.mode(),i.typeIdsArray()||[],e||[])}case xn.FixedSizeBinary:{const i=t.type(new co);return new ov(i.byteWidth())}case xn.FixedSizeList:{const i=t.type(new fo);return new lv(i.listSize(),(e||[])[0])}case xn.Map:{const i=t.type(new po);return new cv((e||[])[0],i.keysSorted())}}throw new Error(`Unrecognized type: "${xn[n]}" (${n})`)}function Eue(t,e){const n=e.fields.map(o=>Tn.encode(t,o));Vn.startFieldsVector(t,n.length);const i=Vn.createFieldsVector(t,n),s=e.metadata&&e.metadata.size>0?Vn.createCustomMetadataVector(t,[...e.metadata].map(([o,c])=>{const d=t.createString(`${o}`),f=t.createString(`${c}`);return Xn.startKeyValue(t),Xn.addKey(t,d),Xn.addValue(t,f),Xn.endKeyValue(t)})):-1;return Vn.startSchema(t),Vn.addFields(t,i),Vn.addEndianness(t,Fue?_p.Little:_p.Big),s!==-1&&Vn.addCustomMetadata(t,s),Vn.endSchema(t)}function Sue(t,e){let n=-1,i=-1,s=-1;const o=e.type;let c=e.typeId;yt.isDictionary(o)?(c=o.dictionary.typeId,s=Ax.visit(o,t),i=Ax.visit(o.dictionary,t)):i=Ax.visit(o,t);const d=(o.children||[]).map(a=>Tn.encode(t,a)),f=Ai.createChildrenVector(t,d),u=e.metadata&&e.metadata.size>0?Ai.createCustomMetadataVector(t,[...e.metadata].map(([a,_])=>{const w=t.createString(`${a}`),m=t.createString(`${_}`);return Xn.startKeyValue(t),Xn.addKey(t,w),Xn.addValue(t,m),Xn.endKeyValue(t)})):-1;return e.name&&(n=t.createString(e.name)),Ai.startField(t),Ai.addType(t,i),Ai.addTypeType(t,c),Ai.addChildren(t,f),Ai.addNullable(t,!!e.nullable),n!==-1&&Ai.addName(t,n),s!==-1&&Ai.addDictionary(t,s),u!==-1&&Ai.addCustomMetadata(t,u),Ai.endField(t)}function xue(t,e){const n=e.nodes||[],i=e.buffers||[];br.startNodesVector(t,n.length);for(const c of n.slice().reverse())tg.encode(t,c);const s=t.endVector();br.startBuffersVector(t,i.length);for(const c of i.slice().reverse())Il.encode(t,c);const o=t.endVector();return br.startRecordBatch(t),br.addLength(t,new Zf(e.length,0)),br.addNodes(t,s),br.addBuffers(t,o),br.endRecordBatch(t)}function Bue(t,e){const n=Oa.encode(t,e.data);return Sl.startDictionaryBatch(t),Sl.addId(t,new Zf(e.id,0)),Sl.addIsDelta(t,e.isDelta),Sl.addData(t,n),Sl.endDictionaryBatch(t)}function kue(t,e){return y9.createFieldNode(t,new Zf(e.length,0),new Zf(e.nullCount,0))}function Iue(t,e){return _9.createBuffer(t,new Zf(e.offset,0),new Zf(e.length,0))}const Fue=(()=>{const t=new ArrayBuffer(2);return new DataView(t).setInt16(0,256,!0),new Int16Array(t)[0]===256})(),dM=t=>`Expected ${rn[t]} Message in stream, but was null or length 0.`,fM=t=>`Header pointer of flatbuffer-encoded ${rn[t]} Message is null or length 0.`,T9=(t,e)=>`Expected to read ${t} metadata bytes, but only read ${e}.`,v9=(t,e)=>`Expected to read ${t} bytes for message body, but only read ${e}.`;class E9{constructor(e){this.source=e instanceof yv?e:new yv(e)}[Symbol.iterator](){return this}next(){let e;return(e=this.readMetadataLength()).done||e.value===-1&&(e=this.readMetadataLength()).done||(e=this.readMetadata(e.value)).done?In:e}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}readMessage(e){let n;if((n=this.next()).done)return null;if(e!=null&&n.value.headerType!==e)throw new Error(dM(e));return n.value}readMessageBody(e){if(e<=0)return new Uint8Array(0);const n=Jt(this.source.read(e));if(n.byteLength<e)throw new Error(v9(e,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()}readSchema(e=!1){const n=rn.Schema,i=this.readMessage(n),s=i==null?void 0:i.header();if(e&&!s)throw new Error(fM(n));return s}readMetadataLength(){const e=this.source.read(oE),n=e&&new Pr(e),i=(n==null?void 0:n.readInt32(0))||0;return{done:i===0,value:i}}readMetadata(e){const n=this.source.read(e);if(!n)return In;if(n.byteLength<e)throw new Error(T9(e,n.byteLength));return{done:!1,value:ha.decode(n)}}}class Oue{constructor(e,n){this.source=e instanceof wp?e:Gq(e)?new mv(e,n):new wp(e)}[Symbol.asyncIterator](){return this}next(){return ye(this,void 0,void 0,function*(){let e;return(e=yield this.readMetadataLength()).done||e.value===-1&&(e=yield this.readMetadataLength()).done||(e=yield this.readMetadata(e.value)).done?In:e})}throw(e){return ye(this,void 0,void 0,function*(){return yield this.source.throw(e)})}return(e){return ye(this,void 0,void 0,function*(){return yield this.source.return(e)})}readMessage(e){return ye(this,void 0,void 0,function*(){let n;if((n=yield this.next()).done)return null;if(e!=null&&n.value.headerType!==e)throw new Error(dM(e));return n.value})}readMessageBody(e){return ye(this,void 0,void 0,function*(){if(e<=0)return new Uint8Array(0);const n=Jt(yield this.source.read(e));if(n.byteLength<e)throw new Error(v9(e,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()})}readSchema(e=!1){return ye(this,void 0,void 0,function*(){const n=rn.Schema,i=yield this.readMessage(n),s=i==null?void 0:i.header();if(e&&!s)throw new Error(fM(n));return s})}readMetadataLength(){return ye(this,void 0,void 0,function*(){const e=yield this.source.read(oE),n=e&&new Pr(e),i=(n==null?void 0:n.readInt32(0))||0;return{done:i===0,value:i}})}readMetadata(e){return ye(this,void 0,void 0,function*(){const n=yield this.source.read(e);if(!n)return In;if(n.byteLength<e)throw new Error(T9(e,n.byteLength));return{done:!1,value:ha.decode(n)}})}}class Mue extends E9{constructor(e){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=e instanceof SD?e:new SD(e)}next(){const{_json:e}=this;if(!this._schema)return this._schema=!0,{done:!1,value:ha.fromJSON(e.schema,rn.Schema)};if(this._dictionaryIndex<e.dictionaries.length){const n=e.dictionaries[this._dictionaryIndex++];return this._body=n.data.columns,{done:!1,value:ha.fromJSON(n,rn.DictionaryBatch)}}if(this._batchIndex<e.batches.length){const n=e.batches[this._batchIndex++];return this._body=n.columns,{done:!1,value:ha.fromJSON(n,rn.RecordBatch)}}return this._body=[],In}readMessageBody(e){return n(this._body);function n(i){return(i||[]).reduce((s,o)=>[...s,...o.VALIDITY&&[o.VALIDITY]||[],...o.TYPE&&[o.TYPE]||[],...o.OFFSET&&[o.OFFSET]||[],...o.DATA&&[o.DATA]||[],...n(o.children)],[])}}readMessage(e){let n;if((n=this.next()).done)return null;if(e!=null&&n.value.headerType!==e)throw new Error(dM(e));return n.value}readSchema(){const e=rn.Schema,n=this.readMessage(e),i=n==null?void 0:n.header();if(!n||!i)throw new Error(fM(e));return i}}const oE=4,Uk="ARROW1",vv=new Uint8Array(Uk.length);for(let t=0;t<Uk.length;t+=1)vv[t]=Uk.codePointAt(t);function uM(t,e=0){for(let n=-1,i=vv.length;++n<i;)if(vv[n]!==t[e+n])return!1;return!0}const um=vv.length,S9=um+oE,Aue=um*2+oE;class Nl extends c9{constructor(e){super(),this._impl=e}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(e){return this._impl.throw(e)}return(e){return this._impl.return(e)}cancel(){return this._impl.cancel()}reset(e){return this._impl.reset(e),this._DOMStream=void 0,this._nodeStream=void 0,this}open(e){const n=this._impl.open(e);return ry(n)?n.then(()=>this):this}readRecordBatch(e){return this._impl.isFile()?this._impl.readRecordBatch(e):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return wr.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return wr.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,n){throw new Error('"throughDOM" not available in this environment')}static from(e){return e instanceof Nl?e:Nk(e)?Lue(e):Gq(e)?jue(e):ry(e)?(()=>ye(this,void 0,void 0,function*(){return yield Nl.from(yield e)}))():Vq(e)||WO(e)||Wq(e)||HO(e)?Due(new wp(e)):Pue(new yv(e))}static readAll(e){return e instanceof Nl?e.isSync()?ND(e):CD(e):Nk(e)||ArrayBuffer.isView(e)||sE(e)||qq(e)?ND(e):CD(e)}}class Ev extends Nl{constructor(e){super(e),this._impl=e}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return Ln(this,arguments,function*(){yield Be(yield*Rc(Fs(this[Symbol.iterator]())))})}}class Sv extends Nl{constructor(e){super(e),this._impl=e}readAll(){var e,n;return ye(this,void 0,void 0,function*(){const i=new Array;try{for(var s=Fs(this),o;o=yield s.next(),!o.done;){const c=o.value;i.push(c)}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=s.return)&&(yield n.call(s))}finally{if(e)throw e.error}}return i})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class x9 extends Ev{constructor(e){super(e),this._impl=e}}class Nue extends Sv{constructor(e){super(e),this._impl=e}}class B9{constructor(e=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=e}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(e){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=e,this.dictionaries=new Map,this}_loadRecordBatch(e,n){const i=this._loadVectors(e,n,this.schema.fields),s=Ct({type:new as(this.schema.fields),length:e.length,children:i});return new Ci(this.schema,s)}_loadDictionaryBatch(e,n){const{id:i,isDelta:s}=e,{dictionaries:o,schema:c}=this,d=o.get(i);if(s||!d){const f=c.dictionaries.get(i),u=this._loadVectors(e.data,n,[f]);return(d&&s?d.concat(new an(u)):new an(u)).memoize()}return d.memoize()}_loadVectors(e,n,i){return new f9(n,e.nodes,e.buffers,this.dictionaries).visitMany(i)}}class xv extends B9{constructor(e,n){super(n),this._reader=Nk(e)?new Mue(this._handle=e):new E9(this._handle=e)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(e){return this.closed||(this.autoDestroy=I9(this,e),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(e):In}return(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(e):In}next(){if(this.closed)return In;let e;const{_reader:n}=this;for(;e=this._readNextMessageAndValidate();)if(e.isSchema())this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;const i=e.header(),s=n.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(i,s)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;const i=e.header(),s=n.readMessageBody(e.bodyLength),o=this._loadDictionaryBatch(i,s);this.dictionaries.set(i.id,o)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new g9(this.schema)}):this.return()}_readNextMessageAndValidate(e){return this._reader.readMessage(e)}}class Bv extends B9{constructor(e,n){super(n),this._reader=new Oue(this._handle=e)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return ye(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(e){return ye(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=I9(this,e),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(e){return ye(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(e):In})}return(e){return ye(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(e):In})}next(){return ye(this,void 0,void 0,function*(){if(this.closed)return In;let e;const{_reader:n}=this;for(;e=yield this._readNextMessageAndValidate();)if(e.isSchema())yield this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;const i=e.header(),s=yield n.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(i,s)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;const i=e.header(),s=yield n.readMessageBody(e.bodyLength),o=this._loadDictionaryBatch(i,s);this.dictionaries.set(i.id,o)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new g9(this.schema)}):yield this.return()})}_readNextMessageAndValidate(e){return ye(this,void 0,void 0,function*(){return yield this._reader.readMessage(e)})}}class k9 extends xv{constructor(e,n){super(e instanceof xD?e:new xD(e),n)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(e){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const n of this._footer.dictionaryBatches())n&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(e)}readRecordBatch(e){var n;if(this.closed)return null;this._footer||this.open();const i=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(e);if(i&&this._handle.seek(i.offset)){const s=this._reader.readMessage(rn.RecordBatch);if(s!=null&&s.isRecordBatch()){const o=s.header(),c=this._reader.readMessageBody(s.bodyLength);return this._loadRecordBatch(o,c)}}return null}_readDictionaryBatch(e){var n;const i=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(e);if(i&&this._handle.seek(i.offset)){const s=this._reader.readMessage(rn.DictionaryBatch);if(s!=null&&s.isDictionaryBatch()){const o=s.header(),c=this._reader.readMessageBody(s.bodyLength),d=this._loadDictionaryBatch(o,c);this.dictionaries.set(o.id,d)}}}_readFooter(){const{_handle:e}=this,n=e.size-S9,i=e.readInt32(n),s=e.readAt(n-i,i);return rM.decode(s)}_readNextMessageAndValidate(e){var n;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const i=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(this._recordBatchIndex);if(i&&this._handle.seek(i.offset))return this._reader.readMessage(e)}return null}}class Cue extends Bv{constructor(e,...n){const i=typeof n[0]!="number"?n.shift():void 0,s=n[0]instanceof Map?n.shift():void 0;super(e instanceof mv?e:new mv(e,i),s)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}open(e){const n=Object.create(null,{open:{get:()=>super.open}});return ye(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const i of this._footer.dictionaryBatches())i&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield n.open.call(this,e)})}readRecordBatch(e){var n;return ye(this,void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());const i=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(e);if(i&&(yield this._handle.seek(i.offset))){const s=yield this._reader.readMessage(rn.RecordBatch);if(s!=null&&s.isRecordBatch()){const o=s.header(),c=yield this._reader.readMessageBody(s.bodyLength);return this._loadRecordBatch(o,c)}}return null})}_readDictionaryBatch(e){var n;return ye(this,void 0,void 0,function*(){const i=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(e);if(i&&(yield this._handle.seek(i.offset))){const s=yield this._reader.readMessage(rn.DictionaryBatch);if(s!=null&&s.isDictionaryBatch()){const o=s.header(),c=yield this._reader.readMessageBody(s.bodyLength),d=this._loadDictionaryBatch(o,c);this.dictionaries.set(o.id,d)}}})}_readFooter(){return ye(this,void 0,void 0,function*(){const{_handle:e}=this;e._pending&&(yield e._pending);const n=e.size-S9,i=yield e.readInt32(n),s=yield e.readAt(n-i,i);return rM.decode(s)})}_readNextMessageAndValidate(e){return ye(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=this._footer.getRecordBatch(this._recordBatchIndex);if(n&&(yield this._handle.seek(n.offset)))return yield this._reader.readMessage(e)}return null})}}class Rue extends xv{constructor(e,n){super(e,n)}_loadVectors(e,n,i){return new Hfe(n,e.nodes,e.buffers,this.dictionaries).visitMany(i)}}function I9(t,e){return e&&typeof e.autoDestroy=="boolean"?e.autoDestroy:t.autoDestroy}function*ND(t){const e=Nl.from(t);try{if(!e.open({autoDestroy:!1}).closed)do yield e;while(!e.reset().open().closed)}finally{e.cancel()}}function CD(t){return Ln(this,arguments,function*(){const n=yield Be(Nl.from(t));try{if(!(yield Be(n.open({autoDestroy:!1}))).closed)do yield yield Be(n);while(!(yield Be(n.reset().open())).closed)}finally{yield Be(n.cancel())}})}function Lue(t){return new Ev(new Rue(t))}function Pue(t){const e=t.peek(um+7&-8);return e&&e.byteLength>=4?uM(e)?new x9(new k9(t.read())):new Ev(new xv(t)):new Ev(new xv(function*(){}()))}function Due(t){return ye(this,void 0,void 0,function*(){const e=yield t.peek(um+7&-8);return e&&e.byteLength>=4?uM(e)?new x9(new k9(yield t.read())):new Sv(new Bv(t)):new Sv(new Bv(function(){return Ln(this,arguments,function*(){})}()))})}function jue(t){return ye(this,void 0,void 0,function*(){const{size:e}=yield t.stat(),n=new mv(t,e);return e>=Aue&&uM(yield n.readAt(0,um+7&-8))?new Nue(new Cue(n)):new Sv(new Bv(n))})}function F9(t){const e=Nl.from(t);return ry(e)?e.then(n=>F9(n)):e.isAsync()?e.readAll().then(n=>new xr(n)):new xr(e.readAll())}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var Uue=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var o in s)s.hasOwnProperty(o)&&(i[o]=s[o])},t(e,n)};return function(e,n){t(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),zue=Object.prototype.hasOwnProperty;function zk(t,e){return zue.call(t,e)}function $k(t){if(Array.isArray(t)){for(var e=new Array(t.length),n=0;n<e.length;n++)e[n]=""+n;return e}if(Object.keys)return Object.keys(t);var i=[];for(var s in t)zk(t,s)&&i.push(s);return i}function or(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function qk(t){for(var e=0,n=t.length,i;e<n;){if(i=t.charCodeAt(e),i>=48&&i<=57){e++;continue}return!1}return!0}function af(t){return t.indexOf("/")===-1&&t.indexOf("~")===-1?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function O9(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function Gk(t){if(t===void 0)return!0;if(t){if(Array.isArray(t)){for(var e=0,n=t.length;e<n;e++)if(Gk(t[e]))return!0}else if(typeof t=="object"){for(var i=$k(t),s=i.length,o=0;o<s;o++)if(Gk(t[i[o]]))return!0}}return!1}function RD(t,e){var n=[t];for(var i in e){var s=typeof e[i]=="object"?JSON.stringify(e[i],null,2):e[i];typeof s<"u"&&n.push(i+": "+s)}return n.join(`
`)}var M9=function(t){Uue(e,t);function e(n,i,s,o,c){var d=this.constructor,f=t.call(this,RD(n,{name:i,index:s,operation:o,tree:c}))||this;return f.name=i,f.index=s,f.operation=o,f.tree=c,Object.setPrototypeOf(f,d.prototype),f.message=RD(n,{name:i,index:s,operation:o,tree:c}),f}return e}(Error),Mn=M9,$ue=or,bh={add:function(t,e,n){return t[e]=this.value,{newDocument:n}},remove:function(t,e,n){var i=t[e];return delete t[e],{newDocument:n,removed:i}},replace:function(t,e,n){var i=t[e];return t[e]=this.value,{newDocument:n,removed:i}},move:function(t,e,n){var i=kv(n,this.path);i&&(i=or(i));var s=Lf(n,{op:"remove",path:this.from}).removed;return Lf(n,{op:"add",path:this.path,value:s}),{newDocument:n,removed:i}},copy:function(t,e,n){var i=kv(n,this.from);return Lf(n,{op:"add",path:this.path,value:or(i)}),{newDocument:n}},test:function(t,e,n){return{newDocument:n,test:fy(t[e],this.value)}},_get:function(t,e,n){return this.value=t[e],{newDocument:n}}},que={add:function(t,e,n){return qk(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:n,index:e}},remove:function(t,e,n){var i=t.splice(e,1);return{newDocument:n,removed:i[0]}},replace:function(t,e,n){var i=t[e];return t[e]=this.value,{newDocument:n,removed:i}},move:bh.move,copy:bh.copy,test:bh.test,_get:bh._get};function kv(t,e){if(e=="")return t;var n={op:"_get",path:e};return Lf(t,n),n.value}function Lf(t,e,n,i,s,o){if(n===void 0&&(n=!1),i===void 0&&(i=!0),s===void 0&&(s=!0),o===void 0&&(o=0),n&&(typeof n=="function"?n(e,0,t,e.path):Iv(e,0)),e.path===""){var c={newDocument:t};if(e.op==="add")return c.newDocument=e.value,c;if(e.op==="replace")return c.newDocument=e.value,c.removed=t,c;if(e.op==="move"||e.op==="copy")return c.newDocument=kv(t,e.from),e.op==="move"&&(c.removed=t),c;if(e.op==="test"){if(c.test=fy(t,e.value),c.test===!1)throw new Mn("Test operation failed","TEST_OPERATION_FAILED",o,e,t);return c.newDocument=t,c}else{if(e.op==="remove")return c.removed=t,c.newDocument=null,c;if(e.op==="_get")return e.value=t,c;if(n)throw new Mn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,e,t);return c}}else{i||(t=or(t));var d=e.path||"",f=d.split("/"),u=t,a=1,_=f.length,w=void 0,m=void 0,l=void 0;for(typeof n=="function"?l=n:l=Iv;;){if(m=f[a],m&&m.indexOf("~")!=-1&&(m=O9(m)),s&&(m=="__proto__"||m=="prototype"&&a>0&&f[a-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&w===void 0&&(u[m]===void 0?w=f.slice(0,a).join("/"):a==_-1&&(w=e.path),w!==void 0&&l(e,0,t,w)),a++,Array.isArray(u)){if(m==="-")m=u.length;else{if(n&&!qk(m))throw new Mn("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,e,t);qk(m)&&(m=~~m)}if(a>=_){if(n&&e.op==="add"&&m>u.length)throw new Mn("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,e,t);var c=que[e.op].call(e,u,m,t);if(c.test===!1)throw new Mn("Test operation failed","TEST_OPERATION_FAILED",o,e,t);return c}}else if(a>=_){var c=bh[e.op].call(e,u,m,t);if(c.test===!1)throw new Mn("Test operation failed","TEST_OPERATION_FAILED",o,e,t);return c}if(u=u[m],n&&a<_&&(!u||typeof u!="object"))throw new Mn("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,e,t)}}}function lE(t,e,n,i,s){if(i===void 0&&(i=!0),s===void 0&&(s=!0),n&&!Array.isArray(e))throw new Mn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(t=or(t));for(var o=new Array(e.length),c=0,d=e.length;c<d;c++)o[c]=Lf(t,e[c],n,!0,s,c),t=o[c].newDocument;return o.newDocument=t,o}function Gue(t,e,n){var i=Lf(t,e);if(i.test===!1)throw new Mn("Test operation failed","TEST_OPERATION_FAILED",n,e,t);return i.newDocument}function Iv(t,e,n,i){if(typeof t!="object"||t===null||Array.isArray(t))throw new Mn("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,t,n);if(bh[t.op]){if(typeof t.path!="string")throw new Mn("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,t,n);if(t.path.indexOf("/")!==0&&t.path.length>0)throw new Mn('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,t,n);if((t.op==="move"||t.op==="copy")&&typeof t.from!="string")throw new Mn("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&t.value===void 0)throw new Mn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&Gk(t.value))throw new Mn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,t,n);if(n){if(t.op=="add"){var s=t.path.split("/").length,o=i.split("/").length;if(s!==o+1&&s!==o)throw new Mn("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,t,n)}else if(t.op==="replace"||t.op==="remove"||t.op==="_get"){if(t.path!==i)throw new Mn("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,t,n)}else if(t.op==="move"||t.op==="copy"){var c={op:"_get",path:t.from,value:void 0},d=A9([c],n);if(d&&d.name==="OPERATION_PATH_UNRESOLVABLE")throw new Mn("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,t,n)}}}else throw new Mn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,t,n)}function A9(t,e,n){try{if(!Array.isArray(t))throw new Mn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)lE(or(e),or(t),n||!0);else{n=n||Iv;for(var i=0;i<t.length;i++)n(t[i],i,e,void 0)}}catch(s){if(s instanceof Mn)return s;throw s}}function fy(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var n=Array.isArray(t),i=Array.isArray(e),s,o,c;if(n&&i){if(o=t.length,o!=e.length)return!1;for(s=o;s--!==0;)if(!fy(t[s],e[s]))return!1;return!0}if(n!=i)return!1;var d=Object.keys(t);if(o=d.length,o!==Object.keys(e).length)return!1;for(s=o;s--!==0;)if(!e.hasOwnProperty(d[s]))return!1;for(s=o;s--!==0;)if(c=d[s],!fy(t[c],e[c]))return!1;return!0}return t!==t&&e!==e}const Vue=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Mn,deepClone:$ue,getValueByPointer:kv,applyOperation:Lf,applyPatch:lE,applyReducer:Gue,validator:Iv,validate:A9,_areEquals:fy},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var hM=new WeakMap,Hue=function(){function t(e){this.observers=new Map,this.obj=e}return t}(),Wue=function(){function t(e,n){this.callback=e,this.observer=n}return t}();function Yue(t){return hM.get(t)}function Xue(t,e){return t.observers.get(e)}function Kue(t,e){t.observers.delete(e.callback)}function Jue(t,e){e.unobserve()}function Que(t,e){var n=[],i,s=Yue(t);if(!s)s=new Hue(t),hM.set(t,s);else{var o=Xue(s,e);i=o&&o.observer}if(i)return i;if(i={},s.value=or(t),e){i.callback=e,i.next=null;var c=function(){Vk(i)},d=function(){clearTimeout(i.next),i.next=setTimeout(c)};typeof window<"u"&&(window.addEventListener("mouseup",d),window.addEventListener("keyup",d),window.addEventListener("mousedown",d),window.addEventListener("keydown",d),window.addEventListener("change",d))}return i.patches=n,i.object=t,i.unobserve=function(){Vk(i),clearTimeout(i.next),Kue(s,i),typeof window<"u"&&(window.removeEventListener("mouseup",d),window.removeEventListener("keyup",d),window.removeEventListener("mousedown",d),window.removeEventListener("keydown",d),window.removeEventListener("change",d))},s.observers.set(e,new Wue(e,i)),i}function Vk(t,e){e===void 0&&(e=!1);var n=hM.get(t.object);pM(n.value,t.object,t.patches,"",e),t.patches.length&&lE(n.value,t.patches);var i=t.patches;return i.length>0&&(t.patches=[],t.callback&&t.callback(i)),i}function pM(t,e,n,i,s){if(e!==t){typeof e.toJSON=="function"&&(e=e.toJSON());for(var o=$k(e),c=$k(t),d=!1,f=c.length-1;f>=0;f--){var u=c[f],a=t[u];if(zk(e,u)&&!(e[u]===void 0&&a!==void 0&&Array.isArray(e)===!1)){var _=e[u];typeof a=="object"&&a!=null&&typeof _=="object"&&_!=null&&Array.isArray(a)===Array.isArray(_)?pM(a,_,n,i+"/"+af(u),s):a!==_&&(s&&n.push({op:"test",path:i+"/"+af(u),value:or(a)}),n.push({op:"replace",path:i+"/"+af(u),value:or(_)}))}else Array.isArray(t)===Array.isArray(e)?(s&&n.push({op:"test",path:i+"/"+af(u),value:or(a)}),n.push({op:"remove",path:i+"/"+af(u)}),d=!0):(s&&n.push({op:"test",path:i,value:t}),n.push({op:"replace",path:i,value:e}))}if(!(!d&&o.length==c.length))for(var f=0;f<o.length;f++){var u=o[f];!zk(t,u)&&e[u]!==void 0&&n.push({op:"add",path:i+"/"+af(u),value:or(e[u])})}}}function Zue(t,e,n){n===void 0&&(n=!1);var i=[];return pM(t,e,i,"",n),i}const ehe=Object.freeze(Object.defineProperty({__proto__:null,unobserve:Jue,observe:Que,generate:Vk,compare:Zue},Symbol.toStringTag,{value:"Module"}));Object.assign({},Vue,ehe,{JsonPatchError:M9,deepClone:or,escapePathComponent:af,unescapePathComponent:O9});var the=/("(?:[^\\"]|\\.)*")|[:,]/g,Nx=function(e,n){var i,s,o;return n=n||{},i=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),s=i===""?1/0:n.maxLength===void 0?80:n.maxLength,o=n.replacer,function c(d,f,u){var a,_,w,m,l,T,b,S,x,B,F,k;if(d&&typeof d.toJSON=="function"&&(d=d.toJSON()),F=JSON.stringify(d,o),F===void 0)return F;if(b=s-f.length-u,F.length<=b&&(x=F.replace(the,function(A,M){return M||A+" "}),x.length<=b))return x;if(o!=null&&(d=JSON.parse(F),o=void 0),typeof d=="object"&&d!==null){if(S=f+i,w=[],_=0,Array.isArray(d))for(B="[",a="]",b=d.length;_<b;_++)w.push(c(d[_],S,_===b-1?0:1)||"null");else for(B="{",a="}",T=Object.keys(d),b=T.length;_<b;_++)m=T[_],l=JSON.stringify(m)+": ",k=c(d[m],S,l.length+(_===b-1?0:1)),k!==void 0&&w.push(l+k);if(w.length>0)return[B,i+w.join(`,
`+S),a].join(`
`+f)}return F}(e,"",0)};function Ys(t,e,n){return t.fields=e||[],t.fname=n,t}function Cn(t){return t==null?null:t.fname}function Ui(t){return t==null?null:t.fields}function N9(t){return t.length===1?nhe(t[0]):ihe(t)}const nhe=t=>function(e){return e[t]},ihe=t=>{const e=t.length;return function(n){for(let i=0;i<e;++i)n=n[t[i]];return n}};function de(t){throw Error(t)}function Xo(t){const e=[],n=t.length;let i=null,s=0,o="",c,d,f;t=t+"";function u(){e.push(o+t.substring(c,d)),o="",c=d+1}for(c=d=0;d<n;++d)if(f=t[d],f==="\\")o+=t.substring(c,d),o+=t.substring(++d,++d),c=d;else if(f===i)u(),i=null,s=-1;else{if(i)continue;c===s&&f==='"'||c===s&&f==="'"?(c=d+1,i=f):f==="."&&!s?d>c?u():c=d+1:f==="["?(d>c&&u(),s=c=d+1):f==="]"&&(s||de("Access path missing open bracket: "+t),s>0&&u(),s=0,c=d+1)}return s&&de("Access path missing closing bracket: "+t),i&&de("Access path missing closing quote: "+t),d>c&&(d++,u()),e}function Us(t,e,n){const i=Xo(t);return t=i.length===1?i[0]:t,Ys((n&&n.get||N9)(i),[t],e||t)}const hm=Us("id"),Hi=Ys(t=>t,[],"identity"),Ec=Ys(()=>0,[],"zero"),ng=Ys(()=>1,[],"one"),zr=Ys(()=>!0,[],"true"),fc=Ys(()=>!1,[],"false");function she(t,e,n){const i=[e].concat([].slice.call(n));console[t].apply(console,i)}const C9=0,gM=1,_M=2,R9=3,L9=4;function yM(t,e,n=she){let i=t||C9;return{level(s){return arguments.length?(i=+s,this):i},error(){return i>=gM&&n(e||"error","ERROR",arguments),this},warn(){return i>=_M&&n(e||"warn","WARN",arguments),this},info(){return i>=R9&&n(e||"log","INFO",arguments),this},debug(){return i>=L9&&n(e||"log","DEBUG",arguments),this}}}var he=Array.isArray;function Fe(t){return t===Object(t)}const LD=t=>t!=="__proto__";function ig(...t){return t.reduce((e,n)=>{for(const i in n)if(i==="signals")e.signals=rhe(e.signals,n.signals);else{const s=i==="legend"?{layout:1}:i==="style"?!0:null;sg(e,i,n[i],s)}return e},{})}function sg(t,e,n,i){if(!LD(e))return;let s,o;if(Fe(n)&&!he(n)){o=Fe(t[e])?t[e]:t[e]={};for(s in n)i&&(i===!0||i[s])?sg(o,s,n[s]):LD(s)&&(o[s]=n[s])}else t[e]=n}function rhe(t,e){if(t==null)return e;const n={},i=[];function s(o){n[o.name]||(n[o.name]=1,i.push(o))}return e.forEach(s),t.forEach(s),i}function Rt(t){return t[t.length-1]}function Pi(t){return t==null||t===""?null:+t}const P9=t=>e=>t*Math.exp(e),D9=t=>e=>Math.log(t*e),j9=t=>e=>Math.sign(e)*Math.log1p(Math.abs(e/t)),U9=t=>e=>Math.sign(e)*Math.expm1(Math.abs(e))*t,Fv=t=>e=>e<0?-Math.pow(-e,t):Math.pow(e,t);function cE(t,e,n,i){const s=n(t[0]),o=n(Rt(t)),c=(o-s)*e;return[i(s-c),i(o-c)]}function z9(t,e){return cE(t,e,Pi,Hi)}function $9(t,e){var n=Math.sign(t[0]);return cE(t,e,D9(n),P9(n))}function q9(t,e,n){return cE(t,e,Fv(n),Fv(1/n))}function G9(t,e,n){return cE(t,e,j9(n),U9(n))}function dE(t,e,n,i,s){const o=i(t[0]),c=i(Rt(t)),d=e!=null?i(e):(o+c)/2;return[s(d+(o-d)*n),s(d+(c-d)*n)]}function mM(t,e,n){return dE(t,e,n,Pi,Hi)}function wM(t,e,n){const i=Math.sign(t[0]);return dE(t,e,n,D9(i),P9(i))}function Ov(t,e,n,i){return dE(t,e,n,Fv(i),Fv(1/i))}function bM(t,e,n,i){return dE(t,e,n,j9(i),U9(i))}function V9(t){return 1+~~(new Date(t).getMonth()/3)}function H9(t){return 1+~~(new Date(t).getUTCMonth()/3)}function Ie(t){return t!=null?he(t)?t:[t]:[]}function W9(t,e,n){let i=t[0],s=t[1],o;return s<i&&(o=s,s=i,i=o),o=s-i,o>=n-e?[e,n]:[i=Math.min(Math.max(i,e),n-o),i+o]}function wt(t){return typeof t=="function"}const ahe="descending";function TM(t,e,n){n=n||{},e=Ie(e)||[];const i=[],s=[],o={},c=n.comparator||ohe;return Ie(t).forEach((d,f)=>{d!=null&&(i.push(e[f]===ahe?-1:1),s.push(d=wt(d)?d:Us(d,null,n)),(Ui(d)||[]).forEach(u=>o[u]=1))}),s.length===0?null:Ys(c(s,i),Object.keys(o))}const fE=(t,e)=>(t<e||t==null)&&e!=null?-1:(t>e||e==null)&&t!=null?1:(e=e instanceof Date?+e:e,(t=t instanceof Date?+t:t)!==t&&e===e?-1:e!==e&&t===t?1:0),ohe=(t,e)=>t.length===1?lhe(t[0],e[0]):che(t,e,t.length),lhe=(t,e)=>function(n,i){return fE(t(n),t(i))*e},che=(t,e,n)=>(e.push(0),function(i,s){let o,c=0,d=-1;for(;c===0&&++d<n;)o=t[d],c=fE(o(i),o(s));return c*e[d]});function Wi(t){return wt(t)?t:()=>t}function vM(t,e){let n;return i=>{n&&clearTimeout(n),n=setTimeout(()=>(e(i),n=null),t)}}function mt(t){for(let e,n,i=1,s=arguments.length;i<s;++i){e=arguments[i];for(n in e)t[n]=e[n]}return t}function Do(t,e){let n=0,i,s,o,c;if(t&&(i=t.length))if(e==null){for(s=t[n];n<i&&(s==null||s!==s);s=t[++n]);for(o=c=s;n<i;++n)s=t[n],s!=null&&(s<o&&(o=s),s>c&&(c=s))}else{for(s=e(t[n]);n<i&&(s==null||s!==s);s=e(t[++n]));for(o=c=s;n<i;++n)s=e(t[n]),s!=null&&(s<o&&(o=s),s>c&&(c=s))}return[o,c]}function Y9(t,e){const n=t.length;let i=-1,s,o,c,d,f;if(e==null){for(;++i<n;)if(o=t[i],o!=null&&o>=o){s=c=o;break}if(i===n)return[-1,-1];for(d=f=i;++i<n;)o=t[i],o!=null&&(s>o&&(s=o,d=i),c<o&&(c=o,f=i))}else{for(;++i<n;)if(o=e(t[i],i,t),o!=null&&o>=o){s=c=o;break}if(i===n)return[-1,-1];for(d=f=i;++i<n;)o=e(t[i],i,t),o!=null&&(s>o&&(s=o,d=i),c<o&&(c=o,f=i))}return[d,f]}const dhe=Object.prototype.hasOwnProperty;function Le(t,e){return dhe.call(t,e)}const Ab={};function rg(t){let e={},n;function i(o){return Le(e,o)&&e[o]!==Ab}const s={size:0,empty:0,object:e,has:i,get(o){return i(o)?e[o]:void 0},set(o,c){return i(o)||(++s.size,e[o]===Ab&&--s.empty),e[o]=c,this},delete(o){return i(o)&&(--s.size,++s.empty,e[o]=Ab),this},clear(){s.size=s.empty=0,s.object=e={}},test(o){return arguments.length?(n=o,s):n},clean(){const o={};let c=0;for(const d in e){const f=e[d];f!==Ab&&(!n||!n(f))&&(o[d]=f,++c)}s.size=c,s.empty=0,s.object=e=o}};return t&&Object.keys(t).forEach(o=>{s.set(o,t[o])}),s}function X9(t,e,n,i,s,o){if(!n&&n!==0)return o;const c=+n;let d=t[0],f=Rt(t),u;f<d&&(u=d,d=f,f=u),u=Math.abs(e-d);const a=Math.abs(f-e);return u<a&&u<=c?i:a<=c?s:o}function ve(t,e,n){const i=t.prototype=Object.create(e.prototype);return Object.defineProperty(i,"constructor",{value:t,writable:!0,enumerable:!0,configurable:!0}),mt(i,n)}function Th(t,e,n,i){let s=e[0],o=e[e.length-1],c;return s>o&&(c=s,s=o,o=c),n=n===void 0||n,i=i===void 0||i,(n?s<=t:s<t)&&(i?t<=o:t<o)}function Od(t){return typeof t=="boolean"}function Dc(t){return Object.prototype.toString.call(t)==="[object Date]"}function K9(t){return t&&wt(t[Symbol.iterator])}function ln(t){return typeof t=="number"}function J9(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function ke(t){return typeof t=="string"}function EM(t,e,n){t&&(t=e?Ie(t).map(d=>d.replace(/\\(.)/g,"$1")):Ie(t));const i=t&&t.length,s=n&&n.get||N9,o=d=>s(e?[d]:Xo(d));let c;if(!i)c=function(){return""};else if(i===1){const d=o(t[0]);c=function(f){return""+d(f)}}else{const d=t.map(o);c=function(f){let u=""+d[0](f),a=0;for(;++a<i;)u+="|"+d[a](f);return u}}return Ys(c,t,"key")}function Q9(t,e){const n=t[0],i=Rt(t),s=+e;return s?s===1?i:n+s*(i-n):n}const fhe=1e4;function Z9(t){t=+t||fhe;let e,n,i;const s=()=>{e={},n={},i=0},o=(c,d)=>(++i>t&&(n=e,e={},i=1),e[c]=d);return s(),{clear:s,has:c=>Le(e,c)||Le(n,c),get:c=>Le(e,c)?e[c]:Le(n,c)?o(c,n[c]):void 0,set:(c,d)=>Le(e,c)?e[c]=d:o(c,d)}}function eG(t,e,n,i){const s=e.length,o=n.length;if(!o)return e;if(!s)return n;const c=i||new e.constructor(s+o);let d=0,f=0,u=0;for(;d<s&&f<o;++u)c[u]=t(e[d],n[f])>0?n[f++]:e[d++];for(;d<s;++d,++u)c[u]=e[d];for(;f<o;++f,++u)c[u]=n[f];return c}function c_(t,e){let n="";for(;--e>=0;)n+=t;return n}function tG(t,e,n,i){const s=n||" ",o=t+"",c=e-o.length;return c<=0?o:i==="left"?c_(s,c)+o:i==="center"?c_(s,~~(c/2))+o+c_(s,Math.ceil(c/2)):o+c_(s,c)}function pm(t){return t&&Rt(t)-t[0]||0}function Se(t){return he(t)?"["+t.map(Se)+"]":Fe(t)||ke(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}function SM(t){return t==null||t===""?null:!t||t==="false"||t==="0"?!1:!!t}const uhe=t=>ln(t)||Dc(t)?t:Date.parse(t);function xM(t,e){return e=e||uhe,t==null||t===""?null:e(t)}function BM(t){return t==null||t===""?null:t+""}function Ma(t){const e={},n=t.length;for(let i=0;i<n;++i)e[t[i]]=!0;return e}function nG(t,e,n,i){const s=i!=null?i:"\u2026",o=t+"",c=o.length,d=Math.max(0,e-s.length);return c<=e?o:n==="left"?s+o.slice(c-d):n==="center"?o.slice(0,Math.ceil(d/2))+s+o.slice(c-~~(d/2)):o.slice(0,d)+s}function mc(t,e,n){if(t)if(e){const i=t.length;for(let s=0;s<i;++s){const o=e(t[s]);o&&n(o,s,t)}}else t.forEach(n)}function hhe(t){return t}function phe(t){if(t==null)return hhe;var e,n,i=t.scale[0],s=t.scale[1],o=t.translate[0],c=t.translate[1];return function(d,f){f||(e=n=0);var u=2,a=d.length,_=new Array(a);for(_[0]=(e+=d[0])*i+o,_[1]=(n+=d[1])*s+c;u<a;)_[u]=d[u],++u;return _}}function ghe(t,e){for(var n,i=t.length,s=i-e;s<--i;)n=t[s],t[s++]=t[i],t[i]=n}function _he(t,e){return typeof e=="string"&&(e=t.objects[e]),e.type==="GeometryCollection"?{type:"FeatureCollection",features:e.geometries.map(function(n){return PD(t,n)})}:PD(t,e)}function PD(t,e){var n=e.id,i=e.bbox,s=e.properties==null?{}:e.properties,o=iG(t,e);return n==null&&i==null?{type:"Feature",properties:s,geometry:o}:i==null?{type:"Feature",id:n,properties:s,geometry:o}:{type:"Feature",id:n,bbox:i,properties:s,geometry:o}}function iG(t,e){var n=phe(t.transform),i=t.arcs;function s(a,_){_.length&&_.pop();for(var w=i[a<0?~a:a],m=0,l=w.length;m<l;++m)_.push(n(w[m],m));a<0&&ghe(_,l)}function o(a){return n(a)}function c(a){for(var _=[],w=0,m=a.length;w<m;++w)s(a[w],_);return _.length<2&&_.push(_[0]),_}function d(a){for(var _=c(a);_.length<4;)_.push(_[0]);return _}function f(a){return a.map(d)}function u(a){var _=a.type,w;switch(_){case"GeometryCollection":return{type:_,geometries:a.geometries.map(u)};case"Point":w=o(a.coordinates);break;case"MultiPoint":w=a.coordinates.map(o);break;case"LineString":w=c(a.arcs);break;case"MultiLineString":w=a.arcs.map(c);break;case"Polygon":w=f(a.arcs);break;case"MultiPolygon":w=a.arcs.map(f);break;default:return null}return{type:_,coordinates:w}}return u(e)}function yhe(t,e){var n={},i={},s={},o=[],c=-1;e.forEach(function(u,a){var _=t.arcs[u<0?~u:u],w;_.length<3&&!_[1][0]&&!_[1][1]&&(w=e[++c],e[c]=u,e[a]=w)}),e.forEach(function(u){var a=d(u),_=a[0],w=a[1],m,l;if(m=s[_])if(delete s[m.end],m.push(u),m.end=w,l=i[w]){delete i[l.start];var T=l===m?m:m.concat(l);i[T.start=m.start]=s[T.end=l.end]=T}else i[m.start]=s[m.end]=m;else if(m=i[w])if(delete i[m.start],m.unshift(u),m.start=_,l=s[_]){delete s[l.end];var b=l===m?m:l.concat(m);i[b.start=l.start]=s[b.end=m.end]=b}else i[m.start]=s[m.end]=m;else m=[u],i[m.start=_]=s[m.end=w]=m});function d(u){var a=t.arcs[u<0?~u:u],_=a[0],w;return t.transform?(w=[0,0],a.forEach(function(m){w[0]+=m[0],w[1]+=m[1]})):w=a[a.length-1],u<0?[w,_]:[_,w]}function f(u,a){for(var _ in u){var w=u[_];delete a[w.start],delete w.start,delete w.end,w.forEach(function(m){n[m<0?~m:m]=1}),o.push(w)}}return f(s,i),f(i,s),e.forEach(function(u){n[u<0?~u:u]||o.push([u])}),o}function mhe(t){return iG(t,whe.apply(this,arguments))}function whe(t,e,n){var i,s,o;if(arguments.length>1)i=bhe(t,e,n);else for(s=0,i=new Array(o=t.arcs.length);s<o;++s)i[s]=s;return{type:"MultiLineString",arcs:yhe(t,i)}}function bhe(t,e,n){var i=[],s=[],o;function c(_){var w=_<0?~_:_;(s[w]||(s[w]=[])).push({i:_,g:o})}function d(_){_.forEach(c)}function f(_){_.forEach(d)}function u(_){_.forEach(f)}function a(_){switch(o=_,_.type){case"GeometryCollection":_.geometries.forEach(a);break;case"LineString":d(_.arcs);break;case"MultiLineString":case"Polygon":f(_.arcs);break;case"MultiPolygon":u(_.arcs);break}}return a(e),s.forEach(n==null?function(_){i.push(_[0].i)}:function(_){n(_[0].g,_[_.length-1].g)&&i.push(_[0].i)}),i}const Ei="year",zs="quarter",zi="month",Jn="week",$s="date",Li="day",jo="dayofyear",dr="hours",fr="minutes",$r="seconds",Aa="milliseconds",kM=[Ei,zs,zi,Jn,$s,Li,jo,dr,fr,$r,Aa],Cx=kM.reduce((t,e,n)=>(t[e]=1+n,t),{});function IM(t){const e=Ie(t).slice(),n={};return e.length||de("Missing time unit."),e.forEach(s=>{Le(Cx,s)?n[s]=1:de("Invalid time unit: ".concat(s,"."))}),(n[Jn]||n[Li]?1:0)+(n[zs]||n[zi]||n[$s]?1:0)+(n[jo]?1:0)>1&&de("Incompatible time units: ".concat(t)),e.sort((s,o)=>Cx[s]-Cx[o]),e}const The={[Ei]:"%Y ",[zs]:"Q%q ",[zi]:"%b ",[$s]:"%d ",[Jn]:"W%U ",[Li]:"%a ",[jo]:"%j ",[dr]:"%H:00",[fr]:"00:%M",[$r]:":%S",[Aa]:".%L",["".concat(Ei,"-").concat(zi)]:"%Y-%m ",["".concat(Ei,"-").concat(zi,"-").concat($s)]:"%Y-%m-%d ",["".concat(dr,"-").concat(fr)]:"%H:%M"};function sG(t,e){const n=mt({},The,e),i=IM(t),s=i.length;let o="",c=0,d,f;for(c=0;c<s;)for(d=i.length;d>c;--d)if(f=i.slice(c,d).join("-"),n[f]!=null){o+=n[f],c=d;break}return o.trim()}const lf=new Date;function FM(t){return lf.setFullYear(t),lf.setMonth(0),lf.setDate(1),lf.setHours(0,0,0,0),lf}function rG(t){return oG(new Date(t))}function aG(t){return Hk(new Date(t))}function oG(t){return Nc.count(FM(t.getFullYear())-1,t)}function Hk(t){return Kp.count(FM(t.getFullYear())-1,t)}function Wk(t){return FM(t).getDay()}function vhe(t,e,n,i,s,o,c){if(0<=t&&t<100){const d=new Date(-1,e,n,i,s,o,c);return d.setFullYear(t),d}return new Date(t,e,n,i,s,o,c)}function lG(t){return dG(new Date(t))}function cG(t){return Yk(new Date(t))}function dG(t){const e=Date.UTC(t.getUTCFullYear(),0,1);return Cc.count(e-1,t)}function Yk(t){const e=Date.UTC(t.getUTCFullYear(),0,1);return Jp.count(e-1,t)}function Xk(t){return lf.setTime(Date.UTC(t,0,1)),lf.getUTCDay()}function Ehe(t,e,n,i,s,o,c){if(0<=t&&t<100){const d=new Date(Date.UTC(-1,e,n,i,s,o,c));return d.setUTCFullYear(n.y),d}return new Date(Date.UTC(t,e,n,i,s,o,c))}function fG(t,e,n,i,s){const o=e||1,c=Rt(t),d=(S,x,B)=>(B=B||S,She(n[B],i[B],S===c&&o,x)),f=new Date,u=Ma(t),a=u[Ei]?d(Ei):Wi(2012),_=u[zi]?d(zi):u[zs]?d(zs):Ec,w=u[Jn]&&u[Li]?d(Li,1,Jn+Li):u[Jn]?d(Jn,1):u[Li]?d(Li,1):u[$s]?d($s,1):u[jo]?d(jo,1):ng,m=u[dr]?d(dr):Ec,l=u[fr]?d(fr):Ec,T=u[$r]?d($r):Ec,b=u[Aa]?d(Aa):Ec;return function(S){f.setTime(+S);const x=a(f);return s(x,_(f),w(f,x),m(f),l(f),T(f),b(f))}}function She(t,e,n,i){const s=n<=1?t:i?(o,c)=>i+n*Math.floor((t(o,c)-i)/n):(o,c)=>n*Math.floor(t(o,c)/n);return e?(o,c)=>e(s(o,c),c):s}function Tp(t,e,n){return e+t*7-(n+6)%7}const xhe={[Ei]:t=>t.getFullYear(),[zs]:t=>Math.floor(t.getMonth()/3),[zi]:t=>t.getMonth(),[$s]:t=>t.getDate(),[dr]:t=>t.getHours(),[fr]:t=>t.getMinutes(),[$r]:t=>t.getSeconds(),[Aa]:t=>t.getMilliseconds(),[jo]:t=>oG(t),[Jn]:t=>Hk(t),[Jn+Li]:(t,e)=>Tp(Hk(t),t.getDay(),Wk(e)),[Li]:(t,e)=>Tp(1,t.getDay(),Wk(e))},Bhe={[zs]:t=>3*t,[Jn]:(t,e)=>Tp(t,0,Wk(e))};function uG(t,e){return fG(t,e||1,xhe,Bhe,vhe)}const khe={[Ei]:t=>t.getUTCFullYear(),[zs]:t=>Math.floor(t.getUTCMonth()/3),[zi]:t=>t.getUTCMonth(),[$s]:t=>t.getUTCDate(),[dr]:t=>t.getUTCHours(),[fr]:t=>t.getUTCMinutes(),[$r]:t=>t.getUTCSeconds(),[Aa]:t=>t.getUTCMilliseconds(),[jo]:t=>dG(t),[Jn]:t=>Yk(t),[Li]:(t,e)=>Tp(1,t.getUTCDay(),Xk(e)),[Jn+Li]:(t,e)=>Tp(Yk(t),t.getUTCDay(),Xk(e))},Ihe={[zs]:t=>3*t,[Jn]:(t,e)=>Tp(t,0,Xk(e))};function hG(t,e){return fG(t,e||1,khe,Ihe,Ehe)}const Fhe={[Ei]:Yc,[zs]:OT.every(3),[zi]:OT,[Jn]:Kp,[$s]:Nc,[Li]:Nc,[jo]:Nc,[dr]:y2,[fr]:_2,[$r]:xc,[Aa]:p2},Ohe={[Ei]:Xc,[zs]:AT.every(3),[zi]:AT,[Jn]:Jp,[$s]:Cc,[Li]:Cc,[jo]:Cc,[dr]:b2,[fr]:w2,[$r]:xc,[Aa]:p2};function ag(t){return Fhe[t]}function og(t){return Ohe[t]}function pG(t,e,n){return t?t.offset(e,n):void 0}function gG(t,e,n){return pG(ag(t),e,n)}function _G(t,e,n){return pG(og(t),e,n)}function yG(t,e,n,i){return t?t.range(e,n,i):void 0}function mG(t,e,n,i){return yG(ag(t),e,n,i)}function wG(t,e,n,i){return yG(og(t),e,n,i)}const d_=1e3,f_=d_*60,u_=f_*60,uE=u_*24,Mhe=uE*7,DD=uE*30,Kk=uE*365,bG=[Ei,zi,$s,dr,fr,$r,Aa],h_=bG.slice(0,-1),p_=h_.slice(0,-1),g_=p_.slice(0,-1),Ahe=g_.slice(0,-1),Nhe=[Ei,Jn],jD=[Ei,zi],TG=[Ei],Ng=[[h_,1,d_],[h_,5,5*d_],[h_,15,15*d_],[h_,30,30*d_],[p_,1,f_],[p_,5,5*f_],[p_,15,15*f_],[p_,30,30*f_],[g_,1,u_],[g_,3,3*u_],[g_,6,6*u_],[g_,12,12*u_],[Ahe,1,uE],[Nhe,1,Mhe],[jD,1,DD],[jD,3,3*DD],[TG,1,Kk]];function vG(t){const e=t.extent,n=t.maxbins||40,i=Math.abs(pm(e))/n;let s=Py(d=>d[2]).right(Ng,i),o,c;return s===Ng.length?(o=TG,c=Hc(e[0]/Kk,e[1]/Kk,n)):s?(s=Ng[i/Ng[s-1][2]<Ng[s][2]/i?s-1:s],o=s[0],c=s[1]):(o=bG,c=Math.max(Hc(e[0],e[1],n),1)),{units:o,step:c}}function __(t){const e={};return n=>e[n]||(e[n]=t(n))}function Che(t,e){return n=>{const i=t(n),s=i.indexOf(e);if(s<0)return i;let o=Rhe(i,s);const c=o<i.length?i.slice(o):"";for(;--o>s;)if(i[o]!=="0"){++o;break}return i.slice(0,o)+c}}function Rhe(t,e){let n=t.lastIndexOf("e"),i;if(n>0)return n;for(n=t.length;--n>e;)if(i=t.charCodeAt(n),i>=48&&i<=57)return n+1}function EG(t){const e=__(t.format),n=t.formatPrefix;return{format:e,formatPrefix:n,formatFloat(i){const s=Gf(i||",");if(s.precision==null){switch(s.precision=12,s.type){case"%":s.precision-=2;break;case"e":s.precision-=1;break}return Che(e(s),e(".1f")(1)[1])}else return e(s)},formatSpan(i,s,o,c){c=Gf(c==null?",f":c);const d=Hc(i,s,o),f=Math.max(Math.abs(i),Math.abs(s));let u;if(c.precision==null)switch(c.type){case"s":return isNaN(u=U8(d,f))||(c.precision=u),n(c,f);case"":case"e":case"g":case"p":case"r":{isNaN(u=z8(d,f))||(c.precision=u-(c.type==="e"));break}case"f":case"%":{isNaN(u=j8(d))||(c.precision=u-(c.type==="%")*2);break}}return e(c)}}}let Jk;SG();function SG(){return Jk=EG({format:O1,formatPrefix:e2})}function xG(t){return EG(D8(t))}function Mv(t){return arguments.length?Jk=xG(t):Jk}function UD(t,e,n){n=n||{},Fe(n)||de("Invalid time multi-format specifier: ".concat(n));const i=e($r),s=e(fr),o=e(dr),c=e($s),d=e(Jn),f=e(zi),u=e(zs),a=e(Ei),_=t(n[Aa]||".%L"),w=t(n[$r]||":%S"),m=t(n[fr]||"%I:%M"),l=t(n[dr]||"%I %p"),T=t(n[$s]||n[Li]||"%a %d"),b=t(n[Jn]||"%b %d"),S=t(n[zi]||"%B"),x=t(n[zs]||"%B"),B=t(n[Ei]||"%Y");return F=>(i(F)<F?_:s(F)<F?w:o(F)<F?m:c(F)<F?l:f(F)<F?d(F)<F?T:b:a(F)<F?u(F)<F?S:x:B)(F)}function BG(t){const e=__(t.format),n=__(t.utcFormat);return{timeFormat:i=>ke(i)?e(i):UD(e,ag,i),utcFormat:i=>ke(i)?n(i):UD(n,og,i),timeParse:__(t.parse),utcParse:__(t.utcParse)}}let Qk;kG();function kG(){return Qk=BG({format:v2,parse:l$,utcFormat:E2,utcParse:c$})}function IG(t){return BG(i$(t))}function uy(t){return arguments.length?Qk=IG(t):Qk}const Zk=(t,e)=>mt({},t,e);function FG(t,e){const n=t?xG(t):Mv(),i=e?IG(e):uy();return Zk(n,i)}function OM(t,e){const n=arguments.length;return n&&n!==2&&de("defaultLocale expects either zero or two arguments."),n?Zk(Mv(t),uy(e)):Zk(Mv(),uy())}function Lhe(){return SG(),kG(),OM()}const Phe=/^(data:|([A-Za-z]+:)?\/\/)/,Dhe=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,jhe=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,zD="file://";function Uhe(t,e){return n=>({options:n||{},sanitize:$he,load:zhe,fileAccess:!!e,file:qhe(e),http:Vhe(t)})}async function zhe(t,e){const n=await this.sanitize(t,e),i=n.href;return n.localFile?this.file(i):this.http(i,e)}async function $he(t,e){e=mt({},this.options,e);const n=this.fileAccess,i={href:null};let s,o,c;const d=Dhe.test(t.replace(jhe,""));(t==null||typeof t!="string"||!d)&&de("Sanitize failure, invalid URI: "+Se(t));const f=Phe.test(t);return(c=e.baseURL)&&!f&&(!t.startsWith("/")&&!c.endsWith("/")&&(t="/"+t),t=c+t),o=(s=t.startsWith(zD))||e.mode==="file"||e.mode!=="http"&&!f&&n,s?t=t.slice(zD.length):t.startsWith("//")&&(e.defaultProtocol==="file"?(t=t.slice(2),o=!0):t=(e.defaultProtocol||"http")+":"+t),Object.defineProperty(i,"localFile",{value:!!o}),i.href=t,e.target&&(i.target=e.target+""),e.rel&&(i.rel=e.rel+""),e.context==="image"&&e.crossOrigin&&(i.crossOrigin=e.crossOrigin+""),i}function qhe(t){return t?e=>new Promise((n,i)=>{t.readFile(e,(s,o)=>{s?i(s):n(o)})}):Ghe}async function Ghe(){de("No file system access.")}function Vhe(t){return t?async function(e,n){const i=mt({},this.options.http,n),s=n&&n.response,o=await t(e,i);return o.ok?wt(o[s])?o[s]():o.text():de(o.status+""+o.statusText)}:Hhe}async function Hhe(){de("No HTTP fetch method available.")}const Whe=t=>t!=null&&t===t,Yhe=t=>t==="true"||t==="false"||t===!0||t===!1,Xhe=t=>!Number.isNaN(Date.parse(t)),OG=t=>!Number.isNaN(+t)&&!(t instanceof Date),Khe=t=>OG(t)&&Number.isInteger(+t),eI={boolean:SM,integer:Pi,number:Pi,date:xM,string:BM,unknown:Hi},Nb=[Yhe,Khe,OG,Xhe],Jhe=["boolean","integer","number","date"];function MG(t,e){if(!t||!t.length)return"unknown";const n=t.length,i=Nb.length,s=Nb.map((o,c)=>c+1);for(let o=0,c=0,d,f;o<n;++o)for(f=e?t[o][e]:t[o],d=0;d<i;++d)if(s[d]&&Whe(f)&&!Nb[d](f)&&(s[d]=0,++c,c===Nb.length))return"string";return Jhe[s.reduce((o,c)=>o===0?c:o,0)-1]}function AG(t,e){return e.reduce((n,i)=>(n[i]=MG(t,i),n),{})}function $D(t){const e=function(n,i){const s={delimiter:t};return MM(n,i?mt(i,s):s)};return e.responseType="text",e}function MM(t,e){return e.header&&(t=e.header.map(Se).join(e.delimiter)+`
`+t),ate(e.delimiter).parse(t+"")}MM.responseType="text";function Qhe(t){return typeof Buffer=="function"&&wt(Buffer.isBuffer)?Buffer.isBuffer(t):!1}function AM(t,e){const n=e&&e.property?Us(e.property):Hi;return Fe(t)&&!Qhe(t)?Zhe(n(t),e):n(JSON.parse(t))}AM.responseType="json";function Zhe(t,e){return!he(t)&&K9(t)&&(t=[...t]),e&&e.copy?JSON.parse(JSON.stringify(t)):t}const epe={interior:(t,e)=>t!==e,exterior:(t,e)=>t===e};function NG(t,e){let n,i,s,o;return t=AM(t,e),e&&e.feature?(n=_he,s=e.feature):e&&e.mesh?(n=mhe,s=e.mesh,o=epe[e.filter]):de("Missing TopoJSON feature or mesh parameter."),i=(i=t.objects[s])?n(t,i,o):de("Invalid TopoJSON object: "+s),i&&i.features||[i]}NG.responseType="json";const v0={dsv:MM,csv:$D(","),tsv:$D("	"),json:AM,topojson:NG};function NM(t,e){return arguments.length>1?(v0[t]=e,this):Le(v0,t)?v0[t]:null}function CG(t){const e=NM(t);return e&&e.responseType||"text"}function RG(t,e,n,i){e=e||{};const s=NM(e.type||"json");return s||de("Unknown data format type: "+e.type),t=s(t,e),e.parse&&tpe(t,e.parse,n,i),Le(t,"columns")&&delete t.columns,t}function tpe(t,e,n,i){if(!t.length)return;const s=uy();n=n||s.timeParse,i=i||s.utcParse;let o=t.columns||Object.keys(t[0]),c,d,f,u,a,_;e==="auto"&&(e=AG(t,o)),o=Object.keys(e);const w=o.map(m=>{const l=e[m];let T,b;if(l&&(l.startsWith("date:")||l.startsWith("utc:")))return T=l.split(/:(.+)?/,2),b=T[1],(b[0]==="'"&&b[b.length-1]==="'"||b[0]==='"'&&b[b.length-1]==='"')&&(b=b.slice(1,-1)),(T[0]==="utc"?i:n)(b);if(!eI[l])throw Error("Illegal format pattern: "+m+":"+l);return eI[l]});for(f=0,a=t.length,_=o.length;f<a;++f)for(c=t[f],u=0;u<_;++u)d=o[u],c[d]=w[u](c[d])}const hE=Uhe(typeof fetch<"u"&&fetch,null);function pE(t){const e=t||Hi,n=[],i={};return n.add=s=>{const o=e(s);return i[o]||(i[o]=1,n.push(s)),n},n.remove=s=>{const o=e(s);if(i[o]){i[o]=0;const c=n.indexOf(s);c>=0&&n.splice(c,1)}return n},n}async function E0(t,e){try{await e(t)}catch(n){t.error(n)}}const LG=Symbol("vega_id");let npe=1;function gE(t){return!!(t&&De(t))}function De(t){return t[LG]}function PG(t,e){return t[LG]=e,t}function Yt(t){const e=t===Object(t)?t:{data:t};return De(e)?e:PG(e,npe++)}function CM(t){return _E(t,Yt({}))}function _E(t,e){for(const n in t)e[n]=t[n];return e}function DG(t,e){return PG(e,De(t))}function Mu(t,e){return t?e?(n,i)=>t(n,i)||De(e(n))-De(e(i)):(n,i)=>t(n,i)||De(n)-De(i):null}function jG(t){return t&&t.constructor===Au}function Au(){const t=[],e=[],n=[],i=[],s=[];let o=null,c=!1;return{constructor:Au,insert(d){const f=Ie(d),u=f.length;for(let a=0;a<u;++a)t.push(f[a]);return this},remove(d){const f=wt(d)?i:e,u=Ie(d),a=u.length;for(let _=0;_<a;++_)f.push(u[_]);return this},modify(d,f,u){const a={field:f,value:Wi(u)};return wt(d)?(a.filter=d,s.push(a)):(a.tuple=d,n.push(a)),this},encode(d,f){return wt(d)?s.push({filter:d,field:f}):n.push({tuple:d,field:f}),this},clean(d){return o=d,this},reflow(){return c=!0,this},pulse(d,f){const u={},a={};let _,w,m,l,T,b;for(_=0,w=f.length;_<w;++_)u[De(f[_])]=1;for(_=0,w=e.length;_<w;++_)T=e[_],u[De(T)]=-1;for(_=0,w=i.length;_<w;++_)l=i[_],f.forEach(x=>{l(x)&&(u[De(x)]=-1)});for(_=0,w=t.length;_<w;++_)T=t[_],b=De(T),u[b]?u[b]=1:d.add.push(Yt(t[_]));for(_=0,w=f.length;_<w;++_)T=f[_],u[De(T)]<0&&d.rem.push(T);function S(x,B,F){F?x[B]=F(x):d.encode=B,c||(a[De(x)]=x)}for(_=0,w=n.length;_<w;++_)m=n[_],T=m.tuple,l=m.field,b=u[De(T)],b>0&&(S(T,l,m.value),d.modifies(l));for(_=0,w=s.length;_<w;++_)m=s[_],l=m.filter,f.forEach(x=>{l(x)&&u[De(x)]>0&&S(x,m.field,m.value)}),d.modifies(m.field);if(c)d.mod=e.length||i.length?f.filter(x=>u[De(x)]>0):f.slice();else for(b in a)d.mod.push(a[b]);return(o||o==null&&(e.length||i.length))&&d.clean(!0),d}}}const S0="_:mod:_";function yE(){Object.defineProperty(this,S0,{writable:!0,value:{}})}yE.prototype={set(t,e,n,i){const s=this,o=s[t],c=s[S0];return e!=null&&e>=0?(o[e]!==n||i)&&(o[e]=n,c[e+":"+t]=-1,c[t]=-1):(o!==n||i)&&(s[t]=n,c[t]=he(n)?1+n.length:-1),s},modified(t,e){const n=this[S0];if(arguments.length){if(he(t)){for(let i=0;i<t.length;++i)if(n[t[i]])return!0;return!1}}else{for(const i in n)if(n[i])return!0;return!1}return e!=null&&e>=0?e+1<n[t]||!!n[e+":"+t]:!!n[t]},clear(){return this[S0]={},this}};let ipe=0;const spe="pulse",rpe=new yE,ape=1,ope=2;function hn(t,e,n,i){this.id=++ipe,this.value=t,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,e&&(this._update=e),n&&this.parameters(n,i)}function qD(t){return function(e){const n=this.flags;return arguments.length===0?!!(n&t):(this.flags=e?n|t:n&~t,this)}}hn.prototype={targets(){return this._targets||(this._targets=pE(hm))},set(t){return this.value!==t?(this.value=t,1):0},skip:qD(ape),modified:qD(ope),parameters(t,e,n){e=e!==!1;const i=this._argval=this._argval||new yE,s=this._argops=this._argops||[],o=[];let c,d,f,u;const a=(_,w,m)=>{m instanceof hn?(m!==this&&(e&&m.targets().add(this),o.push(m)),s.push({op:m,name:_,index:w})):i.set(_,w,m)};for(c in t)if(d=t[c],c===spe)Ie(d).forEach(_=>{_ instanceof hn?_!==this&&(_.targets().add(this),o.push(_)):de("Pulse parameters must be operator instances.")}),this.source=d;else if(he(d))for(i.set(c,-1,Array(f=d.length)),u=0;u<f;++u)a(c,u,d[u]);else a(c,-1,d);return this.marshall().clear(),n&&(s.initonly=!0),o},marshall(t){const e=this._argval||rpe,n=this._argops;let i,s,o,c;if(n){const d=n.length;for(s=0;s<d;++s)i=n[s],o=i.op,c=o.modified()&&o.stamp===t,e.set(i.name,i.index,o.value,c);if(n.initonly){for(s=0;s<d;++s)i=n[s],i.op.targets().remove(this);this._argops=null,this._update=null}}return e},detach(){const t=this._argops;let e,n,i,s;if(t)for(e=0,n=t.length;e<n;++e)i=t[e],s=i.op,s._targets&&s._targets.remove(this);this.pulse=null,this.source=null},evaluate(t){const e=this._update;if(e){const n=this.marshall(t.stamp),i=e.call(this,n,t);if(n.clear(),i!==this.value)this.value=i;else if(!this.modified())return t.StopPropagation}},run(t){if(t.stamp<this.stamp)return t.StopPropagation;let e;return this.skip()?(this.skip(!1),e=0):e=this.evaluate(t),this.pulse=e||t}};function lpe(t,e,n,i){let s=1,o;return t instanceof hn?o=t:t&&t.prototype instanceof hn?o=new t:wt(t)?o=new hn(null,t):(s=0,o=new hn(t,e)),this.rank(o),s&&(i=n,n=e),n&&this.connect(o,o.parameters(n,i)),this.touch(o),o}function cpe(t,e){const n=t.rank,i=e.length;for(let s=0;s<i;++s)if(n<e[s].rank){this.rerank(t);return}}let dpe=0;function mE(t,e,n){this.id=++dpe,this.value=null,n&&(this.receive=n),t&&(this._filter=t),e&&(this._apply=e)}function uc(t,e,n){return new mE(t,e,n)}mE.prototype={_filter:zr,_apply:Hi,targets(){return this._targets||(this._targets=pE(hm))},consume(t){return arguments.length?(this._consume=!!t,this):!!this._consume},receive(t){if(this._filter(t)){const e=this.value=this._apply(t),n=this._targets,i=n?n.length:0;for(let s=0;s<i;++s)n[s].receive(e);this._consume&&(t.preventDefault(),t.stopPropagation())}},filter(t){const e=uc(t);return this.targets().add(e),e},apply(t){const e=uc(null,t);return this.targets().add(e),e},merge(){const t=uc();this.targets().add(t);for(let e=0,n=arguments.length;e<n;++e)arguments[e].targets().add(t);return t},throttle(t){let e=-1;return this.filter(()=>{const n=Date.now();return n-e>t?(e=n,1):0})},debounce(t){const e=uc();return this.targets().add(uc(null,null,vM(t,n=>{const i=n.dataflow;e.receive(n),i&&i.run&&i.run()}))),e},between(t,e){let n=!1;return t.targets().add(uc(null,null,()=>n=!0)),e.targets().add(uc(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=zr,this._targets=null}};function fpe(t,e,n,i){const s=this,o=uc(n,i),c=function(u){u.dataflow=s;try{o.receive(u)}catch(a){s.error(a)}finally{s.run()}};let d;typeof t=="string"&&typeof document<"u"?d=document.querySelectorAll(t):d=Ie(t);const f=d.length;for(let u=0;u<f;++u)d[u].addEventListener(e,c);return o}function upe(t,e){const n=this.locale();return RG(t,e,n.timeParse,n.utcParse)}function hpe(t,e,n){return e=this.parse(e,n),this.pulse(t,this.changeset().insert(e))}async function ppe(t,e){const n=this;let i=0,s;try{s=await n.loader().load(t,{context:"dataflow",response:CG(e&&e.type)});try{s=n.parse(s,e)}catch(o){i=-2,n.warn("Data ingestion failed",t,o)}}catch(o){i=-1,n.warn("Loading failed",t,o)}return{data:s,status:i}}async function gpe(t,e,n){const i=this,s=i._pending||_pe(i);s.requests+=1;const o=await i.request(e,n);return i.pulse(t,i.changeset().remove(zr).insert(o.data||[])),s.done(),o}function _pe(t){let e;const n=new Promise(i=>e=i);return n.requests=0,n.done=()=>{--n.requests===0&&(t._pending=null,e(t))},t._pending=n}const ype={skip:!0};function mpe(t,e,n,i,s){return(t instanceof hn?bpe:wpe)(this,t,e,n,i,s),this}function wpe(t,e,n,i,s,o){const c=mt({},o,ype);let d,f;wt(n)||(n=Wi(n)),i===void 0?d=u=>t.touch(n(u)):wt(i)?(f=new hn(null,i,s,!1),d=u=>{f.evaluate(u);const a=n(u),_=f.value;jG(_)?t.pulse(a,_,o):t.update(a,_,c)}):d=u=>t.update(n(u),i,c),e.apply(d)}function bpe(t,e,n,i,s,o){if(i===void 0)e.targets().add(n);else{const c=o||{},d=new hn(null,Tpe(n,i),s,!1);d.modified(c.force),d.rank=e.rank,e.targets().add(d),n&&(d.skip(!0),d.value=n.value,d.targets().add(n),t.connect(n,[d]))}}function Tpe(t,e){return e=wt(e)?e:Wi(e),t?function(n,i){const s=e(n,i);return t.skip()||(t.skip(s!==this.value).value=s),s}:e}function vpe(t){t.rank=++this._rank}function Epe(t){const e=[t];let n,i,s;for(;e.length;)if(this.rank(n=e.pop()),i=n._targets)for(s=i.length;--s>=0;)e.push(n=i[s]),n===t&&de("Cycle detected in dataflow graph.")}const Av={},Xa=1<<0,wc=1<<1,pl=1<<2,Spe=Xa|wc,GD=Xa|pl,Xu=Xa|wc|pl,VD=1<<3,Cg=1<<4,HD=1<<5,WD=1<<6;function jc(t,e,n){this.dataflow=t,this.stamp=e==null?-1:e,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function Rx(t,e){const n=[];return mc(t,e,i=>n.push(i)),n}function YD(t,e){const n={};return t.visit(e,i=>{n[De(i)]=1}),i=>n[De(i)]?null:i}function Cb(t,e){return t?(n,i)=>t(n,i)&&e(n,i):e}jc.prototype={StopPropagation:Av,ADD:Xa,REM:wc,MOD:pl,ADD_REM:Spe,ADD_MOD:GD,ALL:Xu,REFLOW:VD,SOURCE:Cg,NO_SOURCE:HD,NO_FIELDS:WD,fork(t){return new jc(this.dataflow).init(this,t)},clone(){const t=this.fork(Xu);return t.add=t.add.slice(),t.rem=t.rem.slice(),t.mod=t.mod.slice(),t.source&&(t.source=t.source.slice()),t.materialize(Xu|Cg)},addAll(){let t=this;return!t.source||t.add===t.rem||!t.rem.length&&t.source.length===t.add.length||(t=new jc(this.dataflow).init(this),t.add=t.source,t.rem=[]),t},init(t,e){const n=this;return n.stamp=t.stamp,n.encode=t.encode,t.fields&&!(e&WD)&&(n.fields=t.fields),e&Xa?(n.addF=t.addF,n.add=t.add):(n.addF=null,n.add=[]),e&wc?(n.remF=t.remF,n.rem=t.rem):(n.remF=null,n.rem=[]),e&pl?(n.modF=t.modF,n.mod=t.mod):(n.modF=null,n.mod=[]),e&HD?(n.srcF=null,n.source=null):(n.srcF=t.srcF,n.source=t.source,t.cleans&&(n.cleans=t.cleans)),n},runAfter(t){this.dataflow.runAfter(t)},changed(t){const e=t||Xu;return e&Xa&&this.add.length||e&wc&&this.rem.length||e&pl&&this.mod.length},reflow(t){if(t)return this.fork(Xu).reflow();const e=this.add.length,n=this.source&&this.source.length;return n&&n!==e&&(this.mod=this.source,e&&this.filter(pl,YD(this,Xa))),this},clean(t){return arguments.length?(this.cleans=!!t,this):this.cleans},modifies(t){const e=this.fields||(this.fields={});return he(t)?t.forEach(n=>e[n]=!0):e[t]=!0,this},modified(t,e){const n=this.fields;return(e||this.mod.length)&&n?arguments.length?he(t)?t.some(i=>n[i]):n[t]:!!n:!1},filter(t,e){const n=this;return t&Xa&&(n.addF=Cb(n.addF,e)),t&wc&&(n.remF=Cb(n.remF,e)),t&pl&&(n.modF=Cb(n.modF,e)),t&Cg&&(n.srcF=Cb(n.srcF,e)),n},materialize(t){t=t||Xu;const e=this;return t&Xa&&e.addF&&(e.add=Rx(e.add,e.addF),e.addF=null),t&wc&&e.remF&&(e.rem=Rx(e.rem,e.remF),e.remF=null),t&pl&&e.modF&&(e.mod=Rx(e.mod,e.modF),e.modF=null),t&Cg&&e.srcF&&(e.source=e.source.filter(e.srcF),e.srcF=null),e},visit(t,e){const n=this,i=e;if(t&Cg)return mc(n.source,n.srcF,i),n;t&Xa&&mc(n.add,n.addF,i),t&wc&&mc(n.rem,n.remF,i),t&pl&&mc(n.mod,n.modF,i);const s=n.source;if(t&VD&&s){const o=n.add.length+n.mod.length;o===s.length||(o?mc(s,YD(n,GD),i):mc(s,n.srcF,i))}return n}};function RM(t,e,n,i){const s=this,o=n.length;let c=0;this.dataflow=t,this.stamp=e,this.fields=null,this.encode=i||null,this.pulses=n;for(let d=0;d<o;++d){const f=n[d];if(f.stamp===e){if(f.fields){const u=s.fields||(s.fields={});for(const a in f.fields)u[a]=1}f.changed(s.ADD)&&(c|=s.ADD),f.changed(s.REM)&&(c|=s.REM),f.changed(s.MOD)&&(c|=s.MOD)}}this.changes=c}ve(RM,jc,{fork(t){const e=new jc(this.dataflow).init(this,t&this.NO_FIELDS);return t!==void 0&&(t&e.ADD&&this.visit(e.ADD,n=>e.add.push(n)),t&e.REM&&this.visit(e.REM,n=>e.rem.push(n)),t&e.MOD&&this.visit(e.MOD,n=>e.mod.push(n))),e},changed(t){return this.changes&t},modified(t){const e=this,n=e.fields;return n&&e.changes&e.MOD?he(t)?t.some(i=>n[i]):n[t]:0},filter(){de("MultiPulse does not support filtering.")},materialize(){de("MultiPulse does not support materialization.")},visit(t,e){const n=this,i=n.pulses,s=i.length;let o=0;if(t&n.SOURCE)for(;o<s;++o)i[o].visit(t,e);else for(;o<s;++o)i[o].stamp===n.stamp&&i[o].visit(t,e);return n}});async function xpe(t,e,n){const i=this,s=[];if(i._pulse)return UG(i);if(i._pending&&await i._pending,e&&await E0(i,e),!i._touched.length)return i.debug("Dataflow invoked, but nothing to do."),i;const o=++i._clock;i._pulse=new jc(i,o,t),i._touched.forEach(a=>i._enqueue(a,!0)),i._touched=pE(hm);let c=0,d,f,u;try{for(;i._heap.size()>0;){if(d=i._heap.pop(),d.rank!==d.qrank){i._enqueue(d,!0);continue}f=d.run(i._getPulse(d,t)),f.then?f=await f:f.async&&(s.push(f.async),f=Av),f!==Av&&d._targets&&d._targets.forEach(a=>i._enqueue(a)),++c}}catch(a){i._heap.clear(),u=a}if(i._input={},i._pulse=null,i.debug(`Pulse ${o}: ${c} operators`),u&&(i._postrun=[],i.error(u)),i._postrun.length){const a=i._postrun.sort((_,w)=>w.priority-_.priority);i._postrun=[];for(let _=0;_<a.length;++_)await E0(i,a[_].callback)}return n&&await E0(i,n),s.length&&Promise.all(s).then(a=>i.runAsync(null,()=>{a.forEach(_=>{try{_(i)}catch(w){i.error(w)}})})),i}async function Bpe(t,e,n){for(;this._running;)await this._running;const i=()=>this._running=null;return(this._running=this.evaluate(t,e,n)).then(i,i),this._running}function kpe(t,e,n){return this._pulse?UG(this):(this.evaluate(t,e,n),this)}function Ipe(t,e,n){if(this._pulse||e)this._postrun.push({priority:n||0,callback:t});else try{t(this)}catch(i){this.error(i)}}function UG(t){return t.error("Dataflow already running. Use runAsync() to chain invocations."),t}function Fpe(t,e){const n=t.stamp<this._clock;n&&(t.stamp=this._clock),(n||e)&&(t.qrank=t.rank,this._heap.push(t))}function Ope(t,e){const n=t.source,i=this._clock;return n&&he(n)?new RM(this,i,n.map(s=>s.pulse),e):this._input[t.id]||Mpe(this._pulse,n&&n.pulse)}function Mpe(t,e){return e&&e.stamp===t.stamp?e:(t=t.fork(),e&&e!==Av&&(t.source=e.source),t)}const LM={skip:!1,force:!1};function Ape(t,e){const n=e||LM;return this._pulse?this._enqueue(t):this._touched.add(t),n.skip&&t.skip(!0),this}function Npe(t,e,n){const i=n||LM;return(t.set(e)||i.force)&&this.touch(t,i),this}function Cpe(t,e,n){this.touch(t,n||LM);const i=new jc(this,this._clock+(this._pulse?0:1)),s=t.pulse&&t.pulse.source||[];return i.target=t,this._input[t.id]=e.pulse(i,s),this}function Rpe(t){let e=[];return{clear:()=>e=[],size:()=>e.length,peek:()=>e[0],push:n=>(e.push(n),zG(e,0,e.length-1,t)),pop:()=>{const n=e.pop();let i;return e.length?(i=e[0],e[0]=n,Lpe(e,0,t)):i=n,i}}}function zG(t,e,n,i){let s,o;const c=t[n];for(;n>e;){if(o=n-1>>1,s=t[o],i(c,s)<0){t[n]=s,n=o;continue}break}return t[n]=c}function Lpe(t,e,n){const i=e,s=t.length,o=t[e];let c=(e<<1)+1,d;for(;c<s;)d=c+1,d<s&&n(t[c],t[d])>=0&&(c=d),t[e]=t[c],e=c,c=(e<<1)+1;return t[e]=o,zG(t,i,e,n)}function Uh(){this.logger(yM()),this.logLevel(gM),this._clock=0,this._rank=0,this._locale=OM();try{this._loader=hE()}catch{}this._touched=pE(hm),this._input={},this._pulse=null,this._heap=Rpe((t,e)=>t.qrank-e.qrank),this._postrun=[]}function Rg(t){return function(){return this._log[t].apply(this,arguments)}}Uh.prototype={stamp(){return this._clock},loader(t){return arguments.length?(this._loader=t,this):this._loader},locale(t){return arguments.length?(this._locale=t,this):this._locale},logger(t){return arguments.length?(this._log=t,this):this._log},error:Rg("error"),warn:Rg("warn"),info:Rg("info"),debug:Rg("debug"),logLevel:Rg("level"),cleanThreshold:1e4,add:lpe,connect:cpe,rank:vpe,rerank:Epe,pulse:Cpe,touch:Ape,update:Npe,changeset:Au,ingest:hpe,parse:upe,preload:gpe,request:ppe,events:fpe,on:mpe,evaluate:xpe,run:kpe,runAsync:Bpe,runAfter:Ipe,_enqueue:Fpe,_getPulse:Ope};function oe(t,e){hn.call(this,t,null,e)}ve(oe,hn,{run(t){if(t.stamp<this.stamp)return t.StopPropagation;let e;return this.skip()?this.skip(!1):e=this.evaluate(t),e=e||t,e.then?e=e.then(n=>this.pulse=n):e!==t.StopPropagation&&(this.pulse=e),e},evaluate(t){const e=this.marshall(t.stamp),n=this.transform(e,t);return e.clear(),n},transform(){}});const vp={};function $G(t){const e=qG(t);return e&&e.Definition||null}function qG(t){return t=t&&t.toLowerCase(),Le(vp,t)?vp[t]:null}function Ppe(t){return e=>{const n=t.length;let i=1,s=String(t[0](e));for(;i<n;++i)s+="|"+t[i](e);return s}}function tI(t){return!t||!t.length?function(){return""}:t.length===1?t[0]:Ppe(t)}function GG(t,e,n){return n||t+(e?"_"+e:"")}const Lx=()=>{},Dpe={init:Lx,add:Lx,rem:Lx,idx:0},hy={values:{init:t=>t.cell.store=!0,value:t=>t.cell.data.values(),idx:-1},count:{value:t=>t.cell.num},__count__:{value:t=>t.missing+t.valid},missing:{value:t=>t.missing},valid:{value:t=>t.valid},sum:{init:t=>t.sum=0,value:t=>t.sum,add:(t,e)=>t.sum+=+e,rem:(t,e)=>t.sum-=e},product:{init:t=>t.product=1,value:t=>t.valid?t.product:void 0,add:(t,e)=>t.product*=e,rem:(t,e)=>t.product/=e},mean:{init:t=>t.mean=0,value:t=>t.valid?t.mean:void 0,add:(t,e)=>(t.mean_d=e-t.mean,t.mean+=t.mean_d/t.valid),rem:(t,e)=>(t.mean_d=e-t.mean,t.mean-=t.valid?t.mean_d/t.valid:t.mean)},average:{value:t=>t.valid?t.mean:void 0,req:["mean"],idx:1},variance:{init:t=>t.dev=0,value:t=>t.valid>1?t.dev/(t.valid-1):void 0,add:(t,e)=>t.dev+=t.mean_d*(e-t.mean),rem:(t,e)=>t.dev-=t.mean_d*(e-t.mean),req:["mean"],idx:1},variancep:{value:t=>t.valid>1?t.dev/t.valid:void 0,req:["variance"],idx:2},stdev:{value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:t=>t.valid>1?Math.sqrt(t.dev/t.valid):void 0,req:["variance"],idx:2},stderr:{value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid*(t.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:t=>t.cell.data.distinct(t.get),req:["values"],idx:3},ci0:{value:t=>t.cell.data.ci0(t.get),req:["values"],idx:3},ci1:{value:t=>t.cell.data.ci1(t.get),req:["values"],idx:3},median:{value:t=>t.cell.data.q2(t.get),req:["values"],idx:3},q1:{value:t=>t.cell.data.q1(t.get),req:["values"],idx:3},q3:{value:t=>t.cell.data.q3(t.get),req:["values"],idx:3},min:{init:t=>t.min=void 0,value:t=>t.min=Number.isNaN(t.min)?t.cell.data.min(t.get):t.min,add:(t,e)=>{(e<t.min||t.min===void 0)&&(t.min=e)},rem:(t,e)=>{e<=t.min&&(t.min=NaN)},req:["values"],idx:4},max:{init:t=>t.max=void 0,value:t=>t.max=Number.isNaN(t.max)?t.cell.data.max(t.get):t.max,add:(t,e)=>{(e>t.max||t.max===void 0)&&(t.max=e)},rem:(t,e)=>{e>=t.max&&(t.max=NaN)},req:["values"],idx:4},argmin:{init:t=>t.argmin=void 0,value:t=>t.argmin||t.cell.data.argmin(t.get),add:(t,e,n)=>{e<t.min&&(t.argmin=n)},rem:(t,e)=>{e<=t.min&&(t.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:t=>t.argmax=void 0,value:t=>t.argmax||t.cell.data.argmax(t.get),add:(t,e,n)=>{e>t.max&&(t.argmax=n)},rem:(t,e)=>{e>=t.max&&(t.argmax=void 0)},req:["max","values"],idx:3}},gm=Object.keys(hy);function jpe(t,e){return n=>mt({name:t,out:n||t},Dpe,e)}gm.forEach(t=>{hy[t]=jpe(t,hy[t])});function VG(t,e){return hy[t](e)}function HG(t,e){return t.idx-e.idx}function Upe(t){const e={};t.forEach(i=>e[i.name]=i);const n=i=>{!i.req||i.req.forEach(s=>{e[s]||n(e[s]=hy[s]())})};return t.forEach(n),Object.values(e).sort(HG)}function zpe(){this.valid=0,this.missing=0,this._ops.forEach(t=>t.init(this))}function $pe(t,e){if(t==null||t===""){++this.missing;return}t===t&&(++this.valid,this._ops.forEach(n=>n.add(this,t,e)))}function qpe(t,e){if(t==null||t===""){--this.missing;return}t===t&&(--this.valid,this._ops.forEach(n=>n.rem(this,t,e)))}function Gpe(t){return this._out.forEach(e=>t[e.out]=e.value(this)),t}function WG(t,e){const n=e||Hi,i=Upe(t),s=t.slice().sort(HG);function o(c){this._ops=i,this._out=s,this.cell=c,this.init()}return o.prototype.init=zpe,o.prototype.add=$pe,o.prototype.rem=qpe,o.prototype.set=Gpe,o.prototype.get=n,o.fields=t.map(c=>c.out),o}function PM(t){this._key=t?Us(t):De,this.reset()}const xi=PM.prototype;xi.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};xi.add=function(t){this._add.push(t)};xi.rem=function(t){this._rem.push(t)};xi.values=function(){if(this._get=null,this._rem.length===0)return this._add;const t=this._add,e=this._rem,n=this._key,i=t.length,s=e.length,o=Array(i-s),c={};let d,f,u;for(d=0;d<s;++d)c[n(e[d])]=1;for(d=0,f=0;d<i;++d)c[n(u=t[d])]?c[n(u)]=0:o[f++]=u;return this._rem=[],this._add=o};xi.distinct=function(t){const e=this.values(),n={};let i=e.length,s=0,o;for(;--i>=0;)o=t(e[i])+"",Le(n,o)||(n[o]=1,++s);return s};xi.extent=function(t){if(this._get!==t||!this._ext){const e=this.values(),n=Y9(e,t);this._ext=[e[n[0]],e[n[1]]],this._get=t}return this._ext};xi.argmin=function(t){return this.extent(t)[0]||{}};xi.argmax=function(t){return this.extent(t)[1]||{}};xi.min=function(t){const e=this.extent(t)[0];return e!=null?t(e):void 0};xi.max=function(t){const e=this.extent(t)[1];return e!=null?t(e):void 0};xi.quartile=function(t){return(this._get!==t||!this._q)&&(this._q=IF(this.values(),t),this._get=t),this._q};xi.q1=function(t){return this.quartile(t)[0]};xi.q2=function(t){return this.quartile(t)[1]};xi.q3=function(t){return this.quartile(t)[2]};xi.ci=function(t){return(this._get!==t||!this._ci)&&(this._ci=YU(this.values(),1e3,.05,t),this._get=t),this._ci};xi.ci0=function(t){return this.ci(t)[0]};xi.ci1=function(t){return this.ci(t)[1]};function rd(t){oe.call(this,null,t),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}rd.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:gm},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};ve(rd,oe,{transform(t,e){const n=this,i=e.fork(e.NO_SOURCE|e.NO_FIELDS),s=t.modified();return n.stamp=i.stamp,n.value&&(s||e.modified(n._inputs,!0))?(n._prev=n.value,n.value=s?n.init(t):{},e.visit(e.SOURCE,o=>n.add(o))):(n.value=n.value||n.init(t),e.visit(e.REM,o=>n.rem(o)),e.visit(e.ADD,o=>n.add(o))),i.modifies(n._outputs),n._drop=t.drop!==!1,t.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),e.clean()&&n._drop&&i.clean(!0).runAfter(()=>this.clean()),n.changes(i)},cross(){const t=this,e=t.value,n=t._dnames,i=n.map(()=>({})),s=n.length;function o(d){let f,u,a,_;for(f in d)for(a=d[f].tuple,u=0;u<s;++u)i[u][_=a[n[u]]]=_}o(t._prev),o(e);function c(d,f,u){const a=n[u],_=i[u++];for(const w in _){const m=d?d+"|"+w:w;f[a]=_[w],u<s?c(m,f,u):e[m]||t.cell(m,f)}}c("",{},0)},init(t){const e=this._inputs=[],n=this._outputs=[],i={};function s(b){const S=Ie(Ui(b)),x=S.length;let B=0,F;for(;B<x;++B)i[F=S[B]]||(i[F]=1,e.push(F))}this._dims=Ie(t.groupby),this._dnames=this._dims.map(b=>{const S=Cn(b);return s(b),n.push(S),S}),this.cellkey=t.key?t.key:tI(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const o=t.fields||[null],c=t.ops||["count"],d=t.as||[],f=o.length,u={};let a,_,w,m,l,T;for(f!==c.length&&de("Unmatched number of fields and aggregate ops."),T=0;T<f;++T){if(a=o[T],_=c[T],a==null&&_!=="count"&&de("Null aggregate field specified."),m=Cn(a),l=GG(_,m,d[T]),n.push(l),_==="count"){this._counts.push(l);continue}w=u[m],w||(s(a),w=u[m]=[],w.field=a,this._measures.push(w)),_!=="count"&&(this._countOnly=!1),w.push(VG(_,l))}return this._measures=this._measures.map(b=>WG(b,b.field)),{}},cellkey:tI(),cell(t,e){let n=this.value[t];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[t]=this.newcell(t,e),this._adds[this._alen++]=n),n},newcell(t,e){const n={key:t,num:0,agg:null,tuple:this.newtuple(e,this._prev&&this._prev[t]),stamp:this.stamp,store:!1};if(!this._countOnly){const i=this._measures,s=i.length;n.agg=Array(s);for(let o=0;o<s;++o)n.agg[o]=new i[o](n)}return n.store&&(n.data=new PM),n},newtuple(t,e){const n=this._dnames,i=this._dims,s=i.length,o={};for(let c=0;c<s;++c)o[n[c]]=i[c](t);return e?DG(e.tuple,o):Yt(o)},clean(){const t=this.value;for(const e in t)t[e].num===0&&delete t[e]},add(t){const e=this.cellkey(t),n=this.cell(e,t);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(t);const i=n.agg;for(let s=0,o=i.length;s<o;++s)i[s].add(i[s].get(t),t)},rem(t){const e=this.cellkey(t),n=this.cell(e,t);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(t);const i=n.agg;for(let s=0,o=i.length;s<o;++s)i[s].rem(i[s].get(t),t)},celltuple(t){const e=t.tuple,n=this._counts;t.store&&t.data.values();for(let i=0,s=n.length;i<s;++i)e[n[i]]=t.num;if(!this._countOnly){const i=t.agg;for(let s=0,o=i.length;s<o;++s)i[s].set(e)}return e},changes(t){const e=this._adds,n=this._mods,i=this._prev,s=this._drop,o=t.add,c=t.rem,d=t.mod;let f,u,a,_;if(i)for(u in i)f=i[u],(!s||f.num)&&c.push(f.tuple);for(a=0,_=this._alen;a<_;++a)o.push(this.celltuple(e[a])),e[a]=null;for(a=0,_=this._mlen;a<_;++a)f=n[a],(f.num===0&&s?c:d).push(this.celltuple(f)),n[a]=null;return this._alen=this._mlen=0,this._prev=null,t}});const Vpe=1e-14;function DM(t){oe.call(this,null,t)}DM.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};ve(DM,oe,{transform(t,e){const n=t.interval!==!1,i=this._bins(t),s=i.start,o=i.step,c=t.as||["bin0","bin1"],d=c[0],f=c[1];let u;return t.modified()?(e=e.reflow(!0),u=e.SOURCE):u=e.modified(Ui(t.field))?e.ADD_MOD:e.ADD,e.visit(u,n?a=>{const _=i(a);a[d]=_,a[f]=_==null?null:s+o*(1+(_-s)/o)}:a=>a[d]=i(a)),e.modifies(n?c:d)},_bins(t){if(this.value&&!t.modified())return this.value;const e=t.field,n=OF(t),i=n.step;let s=n.start,o=s+Math.ceil((n.stop-s)/i)*i,c,d;(c=t.anchor)!=null&&(d=c-(s+i*Math.floor((c-s)/i)),s+=d,o+=d);const f=function(u){let a=Pi(e(u));return a==null?null:a<s?-1/0:a>o?1/0:(a=Math.max(s,Math.min(a,o-i)),s+i*Math.floor(Vpe+(a-s)/i))};return f.start=s,f.stop=n.stop,f.step=i,this.value=Ys(f,Ui(e),t.name||"bin_"+Cn(e))}});function YG(t,e,n){const i=t;let s=e||[],o=n||[],c={},d=0;return{add:f=>o.push(f),remove:f=>c[i(f)]=++d,size:()=>s.length,data:(f,u)=>(d&&(s=s.filter(a=>!c[i(a)]),c={},d=0),u&&f&&s.sort(f),o.length&&(s=f?eG(f,s,o.sort(f)):s.concat(o),o=[]),s)}}function jM(t){oe.call(this,[],t)}jM.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};ve(jM,oe,{transform(t,e){const n=e.fork(e.ALL),i=YG(De,this.value,n.materialize(n.ADD).add),s=t.sort,o=e.changed()||s&&(t.modified("sort")||e.modified(s.fields));return n.visit(n.REM,i.remove),this.modified(o),this.value=n.source=i.data(Mu(s),o),e.source&&e.source.root&&(this.value.root=e.source.root),n}});function XG(t){hn.call(this,null,Hpe,t)}ve(XG,hn);function Hpe(t){return this.value&&!t.modified()?this.value:TM(t.fields,t.orders)}function UM(t){oe.call(this,null,t)}UM.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function Wpe(t,e,n){switch(e){case"upper":t=t.toUpperCase();break;case"lower":t=t.toLowerCase();break}return t.match(n)}ve(UM,oe,{transform(t,e){const n=_=>w=>{for(var m=Wpe(d(w),t.case,o)||[],l,T=0,b=m.length;T<b;++T)c.test(l=m[T])||_(l)},i=this._parameterCheck(t,e),s=this._counts,o=this._match,c=this._stop,d=t.field,f=t.as||["text","count"],u=n(_=>s[_]=1+(s[_]||0)),a=n(_=>s[_]-=1);return i?e.visit(e.SOURCE,u):(e.visit(e.ADD,u),e.visit(e.REM,a)),this._finish(e,f)},_parameterCheck(t,e){let n=!1;return(t.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(t.stopwords||"")+"$","i"),n=!0),(t.modified("pattern")||!this._match)&&(this._match=new RegExp(t.pattern||"[\\w']+","g"),n=!0),(t.modified("field")||e.modified(t.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(t,e){const n=this._counts,i=this._tuples||(this._tuples={}),s=e[0],o=e[1],c=t.fork(t.NO_SOURCE|t.NO_FIELDS);let d,f,u;for(d in n)f=i[d],u=n[d]||0,!f&&u?(i[d]=f=Yt({}),f[s]=d,f[o]=u,c.add.push(f)):u===0?(f&&c.rem.push(f),n[d]=null,i[d]=null):f[o]!==u&&(f[o]=u,c.mod.push(f));return c.modifies(e)}});function zM(t){oe.call(this,null,t)}zM.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};ve(zM,oe,{transform(t,e){const n=e.fork(e.NO_SOURCE),i=t.as||["a","b"],s=i[0],o=i[1],c=!this.value||e.changed(e.ADD_REM)||t.modified("as")||t.modified("filter");let d=this.value;return c?(d&&(n.rem=d),d=e.materialize(e.SOURCE).source,n.add=this.value=Ype(d,s,o,t.filter||zr)):n.mod=d,n.source=this.value,n.modifies(i)}});function Ype(t,e,n,i){for(var s=[],o={},c=t.length,d=0,f,u;d<c;++d)for(o[e]=u=t[d],f=0;f<c;++f)o[n]=t[f],i(o)&&(s.push(Yt(o)),o={},o[e]=u);return s}const XD={kde:NF,mixture:QU,normal:AF,lognormal:JU,uniform:ZU},Xpe="distributions",KD="function",Kpe="field";function KG(t,e){const n=t[KD];Le(XD,n)||de("Unknown distribution function: "+n);const i=XD[n]();for(const s in t)s===Kpe?i.data((t.from||e()).map(t[s])):s===Xpe?i[s](t[s].map(o=>KG(o,e))):typeof i[s]===KD&&i[s](t[s]);return i}function $M(t){oe.call(this,null,t)}const JG=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],Jpe={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:JG},{name:"weights",type:"number",array:!0}]};$M.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:JG.concat(Jpe)},{name:"as",type:"string",array:!0,default:["value","density"]}]};ve($M,oe,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const i=KG(t.distribution,Qpe(e)),s=t.steps||t.minsteps||25,o=t.steps||t.maxsteps||200;let c=t.method||"pdf";c!=="pdf"&&c!=="cdf"&&de("Invalid density method: "+c),!t.extent&&!i.data&&de("Missing density extent parameter."),c=i[c];const d=t.as||["value","density"],f=t.extent||Do(i.data()),u=x1(c,f,s,o).map(a=>{const _={};return _[d[0]]=a[0],_[d[1]]=a[1],Yt(_)});this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function Qpe(t){return()=>t.materialize(t.SOURCE).source}function QG(t,e){return t?t.map((n,i)=>e[i]||Cn(n)):null}function qM(t,e,n){const i=[],s=_=>_(f);let o,c,d,f,u,a;if(e==null)i.push(t.map(n));else for(o={},c=0,d=t.length;c<d;++c)f=t[c],u=e.map(s),a=o[u],a||(o[u]=a=[],a.dims=u,i.push(a)),a.push(n(f));return i}const ZG="bin";function GM(t){oe.call(this,null,t)}GM.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:ZG}]};const Zpe=(t,e)=>pm(Do(t,e))/30;ve(GM,oe,{transform(t,e){if(this.value&&!(t.modified()||e.changed()))return e;const n=e.materialize(e.SOURCE).source,i=qM(e.source,t.groupby,Hi),s=t.smooth||!1,o=t.field,c=t.step||Zpe(n,o),d=Mu((l,T)=>o(l)-o(T)),f=t.as||ZG,u=i.length;let a=1/0,_=-1/0,w=0,m;for(;w<u;++w){const l=i[w].sort(d);m=-1;for(const T of XU(l,c,s,o))T<a&&(a=T),T>_&&(_=T),l[++m][f]=T}return this.value={start:a,stop:_,step:c},e.reflow(!0).modifies(f)}});function eV(t){hn.call(this,null,ege,t),this.modified(!0)}ve(eV,hn);function ege(t){const e=t.expr;return this.value&&!t.modified("expr")?this.value:Ys(n=>e(n,t),Ui(e),Cn(e))}function VM(t){oe.call(this,[void 0,void 0],t)}VM.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};ve(VM,oe,{transform(t,e){const n=this.value,i=t.field,s=e.changed()||e.modified(i.fields)||t.modified("field");let o=n[0],c=n[1];if((s||o==null)&&(o=1/0,c=-1/0),e.visit(s?e.SOURCE:e.ADD,d=>{const f=Pi(i(d));f!=null&&(f<o&&(o=f),f>c&&(c=f))}),!Number.isFinite(o)||!Number.isFinite(c)){let d=Cn(i);d&&(d=' for field "'.concat(d,'"')),e.dataflow.warn("Infinite extent".concat(d,": [").concat(o,", ").concat(c,"]")),o=c=void 0}this.value=[o,c]}});function HM(t,e){hn.call(this,t),this.parent=e,this.count=0}ve(HM,hn,{connect(t){return this.detachSubflow=t.detachSubflow,this.targets().add(t),t.source=this},add(t){this.count+=1,this.value.add.push(t)},rem(t){this.count-=1,this.value.rem.push(t)},mod(t){this.value.mod.push(t)},init(t){this.value.init(t,t.NO_SOURCE)},evaluate(){return this.value}});function wE(t){oe.call(this,{},t),this._keys=rg();const e=this._targets=[];e.active=0,e.forEach=n=>{for(let i=0,s=e.active;i<s;++i)n(e[i],i,e)}}ve(wE,oe,{activate(t){this._targets[this._targets.active++]=t},subflow(t,e,n,i){const s=this.value;let o=Le(s,t)&&s[t],c,d;return o?o.value.stamp<n.stamp&&(o.init(n),this.activate(o)):(d=i||(d=this._group[t])&&d.tuple,c=n.dataflow,o=new HM(n.fork(n.NO_SOURCE),this),c.add(o).connect(e(c,t,d)),s[t]=o,this.activate(o)),o},clean(){const t=this.value;let e=0;for(const n in t)if(t[n].count===0){const i=t[n].detachSubflow;i&&i(),delete t[n],++e}if(e){const n=this._targets.filter(i=>i&&i.count>0);this.initTargets(n)}},initTargets(t){const e=this._targets,n=e.length,i=t?t.length:0;let s=0;for(;s<i;++s)e[s]=t[s];for(;s<n&&e[s]!=null;++s)e[s]=null;e.active=i},transform(t,e){const n=e.dataflow,i=t.key,s=t.subflow,o=this._keys,c=t.modified("key"),d=f=>this.subflow(f,s,e);return this._group=t.group||{},this.initTargets(),e.visit(e.REM,f=>{const u=De(f),a=o.get(u);a!==void 0&&(o.delete(u),d(a).rem(f))}),e.visit(e.ADD,f=>{const u=i(f);o.set(De(f),u),d(u).add(f)}),c||e.modified(i.fields)?e.visit(e.MOD,f=>{const u=De(f),a=o.get(u),_=i(f);a===_?d(_).mod(f):(o.set(u,_),d(a).rem(f),d(_).add(f))}):e.changed(e.MOD)&&e.visit(e.MOD,f=>{d(o.get(De(f))).mod(f)}),c&&e.visit(e.REFLOW,f=>{const u=De(f),a=o.get(u),_=i(f);a!==_&&(o.set(u,_),d(a).rem(f),d(_).add(f))}),e.clean()?n.runAfter(()=>{this.clean(),o.clean()}):o.empty>n.cleanThreshold&&n.runAfter(o.clean),e}});function tV(t){hn.call(this,null,tge,t)}ve(tV,hn);function tge(t){return this.value&&!t.modified()?this.value:he(t.name)?Ie(t.name).map(e=>Us(e)):Us(t.name,t.as)}function WM(t){oe.call(this,rg(),t)}WM.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};ve(WM,oe,{transform(t,e){const n=e.dataflow,i=this.value,s=e.fork(),o=s.add,c=s.rem,d=s.mod,f=t.expr;let u=!0;e.visit(e.REM,_=>{const w=De(_);i.has(w)?i.delete(w):c.push(_)}),e.visit(e.ADD,_=>{f(_,t)?o.push(_):i.set(De(_),1)});function a(_){const w=De(_),m=f(_,t),l=i.get(w);m&&l?(i.delete(w),o.push(_)):!m&&!l?(i.set(w,1),c.push(_)):u&&m&&!l&&d.push(_)}return e.visit(e.MOD,a),t.modified()&&(u=!1,e.visit(e.REFLOW,a)),i.empty>n.cleanThreshold&&n.runAfter(i.clean),s}});function YM(t){oe.call(this,[],t)}YM.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};ve(YM,oe,{transform(t,e){const n=e.fork(e.NO_SOURCE),i=t.fields,s=QG(i,t.as||[]),o=t.index||null,c=s.length;return n.rem=this.value,e.visit(e.SOURCE,d=>{const f=i.map(l=>l(d)),u=f.reduce((l,T)=>Math.max(l,T.length),0);let a=0,_,w,m;for(;a<u;++a){for(w=CM(d),_=0;_<c;++_)w[s[_]]=(m=f[_][a])==null?null:m;o&&(w[o]=a),n.add.push(w)}}),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(s)}});function XM(t){oe.call(this,[],t)}XM.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};ve(XM,oe,{transform(t,e){const n=e.fork(e.NO_SOURCE),i=t.fields,s=i.map(Cn),o=t.as||["key","value"],c=o[0],d=o[1],f=i.length;return n.rem=this.value,e.visit(e.SOURCE,u=>{for(let a=0,_;a<f;++a)_=CM(u),_[c]=s[a],_[d]=i[a](u),n.add.push(_)}),this.value=n.source=n.add,n.modifies(o)}});function KM(t){oe.call(this,null,t)}KM.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};ve(KM,oe,{transform(t,e){const n=t.expr,i=t.as,s=t.modified(),o=t.initonly?e.ADD:s?e.SOURCE:e.modified(n.fields)||e.modified(i)?e.ADD_MOD:e.ADD;return s&&(e=e.materialize().reflow(!0)),t.initonly||e.modifies(i),e.visit(o,c=>c[i]=n(c,t))}});function nV(t){oe.call(this,[],t)}ve(nV,oe,{transform(t,e){const n=e.fork(e.ALL),i=t.generator;let s=this.value,o=t.size-s.length,c,d,f;if(o>0){for(c=[];--o>=0;)c.push(f=Yt(i(t))),s.push(f);n.add=n.add.length?n.materialize(n.ADD).add.concat(c):c}else d=s.slice(0,-o),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(d):d,s=s.slice(-o);return n.source=this.value=s,n}});const Rb={value:"value",median:GU,mean:kZ,min:qB,max:Af},nge=[];function JM(t){oe.call(this,[],t)}JM.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function ige(t){var e=t.method||Rb.value,n;if(Rb[e]==null)de("Unrecognized imputation method: "+e);else return e===Rb.value?(n=t.value!==void 0?t.value:0,()=>n):Rb[e]}function sge(t){const e=t.field;return n=>n?e(n):NaN}ve(JM,oe,{transform(t,e){var n=e.fork(e.ALL),i=ige(t),s=sge(t),o=Cn(t.field),c=Cn(t.key),d=(t.groupby||[]).map(Cn),f=rge(e.source,t.groupby,t.key,t.keyvals),u=[],a=this.value,_=f.domain.length,w,m,l,T,b,S,x,B,F,k;for(b=0,B=f.length;b<B;++b)for(w=f[b],l=w.values,m=NaN,x=0;x<_;++x)if(w[x]==null){for(T=f.domain[x],k={_impute:!0},S=0,F=l.length;S<F;++S)k[d[S]]=l[S];k[c]=T,k[o]=Number.isNaN(m)?m=i(w,s):m,u.push(Yt(k))}return u.length&&(n.add=n.materialize(n.ADD).add.concat(u)),a.length&&(n.rem=n.materialize(n.REM).rem.concat(a)),this.value=u,n}});function rge(t,e,n,i){var s=S=>S(b),o=[],c=i?i.slice():[],d={},f={},u,a,_,w,m,l,T,b;for(c.forEach((S,x)=>d[S]=x+1),w=0,T=t.length;w<T;++w)b=t[w],l=n(b),m=d[l]||(d[l]=c.push(l)),a=(u=e?e.map(s):nge)+"",(_=f[a])||(_=f[a]=[],o.push(_),_.values=u),_[m-1]=b;return o.domain=c,o}function QM(t){rd.call(this,t)}QM.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:gm},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};ve(QM,rd,{transform(t,e){const n=this,i=t.modified();let s;return n.value&&(i||e.modified(n._inputs,!0))?(s=n.value=i?n.init(t):{},e.visit(e.SOURCE,o=>n.add(o))):(s=n.value=n.value||this.init(t),e.visit(e.REM,o=>n.rem(o)),e.visit(e.ADD,o=>n.add(o))),n.changes(),e.visit(e.SOURCE,o=>{mt(o,s[n.cellkey(o)].tuple)}),e.reflow(i).modifies(this._outputs)},changes(){const t=this._adds,e=this._mods;let n,i;for(n=0,i=this._alen;n<i;++n)this.celltuple(t[n]),t[n]=null;for(n=0,i=this._mlen;n<i;++n)this.celltuple(e[n]),e[n]=null;this._alen=this._mlen=0}});function ZM(t){oe.call(this,null,t)}ZM.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};ve(ZM,oe,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const i=e.materialize(e.SOURCE).source,s=qM(i,t.groupby,t.field),o=(t.groupby||[]).map(Cn),c=t.bandwidth,d=t.cumulative?"cdf":"pdf",f=t.as||["value","density"],u=[];let a=t.extent,_=t.steps||t.minsteps||25,w=t.steps||t.maxsteps||200;d!=="pdf"&&d!=="cdf"&&de("Invalid density method: "+d),t.resolve==="shared"&&(a||(a=Do(i,t.field)),_=w=t.steps||w),s.forEach(m=>{const l=NF(m,c)[d],T=t.counts?m.length:1,b=a||Do(m);x1(l,b,_,w).forEach(S=>{const x={};for(let B=0;B<o.length;++B)x[o[B]]=m.dims[B];x[f[0]]=S[0],x[f[1]]=S[1]*T,u.push(Yt(x))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function iV(t){hn.call(this,null,age,t)}ve(iV,hn);function age(t){return this.value&&!t.modified()?this.value:EM(t.fields,t.flat)}function sV(t){oe.call(this,[],t),this._pending=null}ve(sV,oe,{transform(t,e){const n=e.dataflow;return this._pending?Px(this,e,this._pending):oge(t)?e.StopPropagation:t.values?Px(this,e,n.parse(t.values,t.format)):t.async?{async:n.request(t.url,t.format).then(s=>(this._pending=Ie(s.data),o=>o.touch(this)))}:n.request(t.url,t.format).then(i=>Px(this,e,Ie(i.data)))}});function oge(t){return t.modified("async")&&!(t.modified("values")||t.modified("url")||t.modified("format"))}function Px(t,e,n){n.forEach(Yt);const i=e.fork(e.NO_FIELDS&e.NO_SOURCE);return i.rem=t.value,t.value=i.source=i.add=n,t._pending=null,i.rem.length&&i.clean(!0),i}function eA(t){oe.call(this,{},t)}eA.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};ve(eA,oe,{transform(t,e){const n=t.fields,i=t.index,s=t.values,o=t.default==null?null:t.default,c=t.modified(),d=n.length;let f=c?e.SOURCE:e.ADD,u=e,a=t.as,_,w,m;return s?(w=s.length,d>1&&!a&&de('Multi-field lookup requires explicit "as" parameter.'),a&&a.length!==d*w&&de('The "as" parameter has too few output field names.'),a=a||s.map(Cn),_=function(l){for(var T=0,b=0,S,x;T<d;++T)if(x=i.get(n[T](l)),x==null)for(S=0;S<w;++S,++b)l[a[b]]=o;else for(S=0;S<w;++S,++b)l[a[b]]=s[S](x)}):(a||de("Missing output field names."),_=function(l){for(var T=0,b;T<d;++T)b=i.get(n[T](l)),l[a[T]]=b==null?o:b}),c?u=e.reflow(!0):(m=n.some(l=>e.modified(l.fields)),f|=m?e.MOD:0),e.visit(f,_),u.modifies(a)}});function rV(t){hn.call(this,null,lge,t)}ve(rV,hn);function lge(t){if(this.value&&!t.modified())return this.value;const e=t.extents,n=e.length;let i=1/0,s=-1/0,o,c;for(o=0;o<n;++o)c=e[o],c[0]<i&&(i=c[0]),c[1]>s&&(s=c[1]);return[i,s]}function aV(t){hn.call(this,null,cge,t)}ve(aV,hn);function cge(t){return this.value&&!t.modified()?this.value:t.values.reduce((e,n)=>e.concat(n),[])}function oV(t){oe.call(this,null,t)}ve(oV,oe,{transform(t,e){return this.modified(t.modified()),this.value=t,e.fork(e.NO_SOURCE|e.NO_FIELDS)}});function tA(t){rd.call(this,t)}tA.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:gm,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};ve(tA,rd,{_transform:rd.prototype.transform,transform(t,e){return this._transform(dge(t,e),e)}});function dge(t,e){const n=t.field,i=t.value,s=(t.op==="count"?"__count__":t.op)||"sum",o=Ui(n).concat(Ui(i)),c=uge(n,t.limit||0,e);return e.changed()&&t.set("__pivot__",null,null,!0),{key:t.key,groupby:t.groupby,ops:c.map(()=>s),fields:c.map(d=>fge(d,n,i,o)),as:c.map(d=>d+""),modified:t.modified.bind(t)}}function fge(t,e,n,i){return Ys(s=>e(s)===t?n(s):NaN,i,t+"")}function uge(t,e,n){const i={},s=[];return n.visit(n.SOURCE,o=>{const c=t(o);i[c]||(i[c]=1,s.push(c))}),s.sort(fE),e?s.slice(0,e):s}function lV(t){wE.call(this,t)}ve(lV,wE,{transform(t,e){const n=t.subflow,i=t.field,s=o=>this.subflow(De(o),n,e,o);return(t.modified("field")||i&&e.modified(Ui(i)))&&de("PreFacet does not support field modification."),this.initTargets(),i?(e.visit(e.MOD,o=>{const c=s(o);i(o).forEach(d=>c.mod(d))}),e.visit(e.ADD,o=>{const c=s(o);i(o).forEach(d=>c.add(Yt(d)))}),e.visit(e.REM,o=>{const c=s(o);i(o).forEach(d=>c.rem(d))})):(e.visit(e.MOD,o=>s(o).mod(o)),e.visit(e.ADD,o=>s(o).add(o)),e.visit(e.REM,o=>s(o).rem(o))),e.clean()&&e.runAfter(()=>this.clean()),e}});function nA(t){oe.call(this,null,t)}nA.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};ve(nA,oe,{transform(t,e){const n=e.fork(e.NO_SOURCE),i=t.fields,s=QG(t.fields,t.as||[]),o=i?(d,f)=>hge(d,f,i,s):_E;let c;return this.value?c=this.value:(e=e.addAll(),c=this.value={}),e.visit(e.REM,d=>{const f=De(d);n.rem.push(c[f]),c[f]=null}),e.visit(e.ADD,d=>{const f=o(d,Yt({}));c[De(d)]=f,n.add.push(f)}),e.visit(e.MOD,d=>{n.mod.push(o(d,c[De(d)]))}),n}});function hge(t,e,n,i){for(let s=0,o=n.length;s<o;++s)e[i[s]]=n[s](t);return e}function cV(t){oe.call(this,null,t)}ve(cV,oe,{transform(t,e){return this.value=t.value,t.modified("value")?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation}});function iA(t){oe.call(this,null,t)}iA.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const pge=1e-14;ve(iA,oe,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=t.as||["prob","value"];if(this.value&&!t.modified()&&!e.changed())return n.source=this.value,n;const s=e.materialize(e.SOURCE).source,o=qM(s,t.groupby,t.field),c=(t.groupby||[]).map(Cn),d=[],f=t.step||.01,u=t.probs||ar(f/2,1-pge,f),a=u.length;return o.forEach(_=>{const w=kF(_,u);for(let m=0;m<a;++m){const l={};for(let T=0;T<c.length;++T)l[c[T]]=_.dims[T];l[i[0]]=u[m],l[i[1]]=w[m],d.push(Yt(l))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=d,n}});function dV(t){oe.call(this,null,t)}ve(dV,oe,{transform(t,e){let n,i;return this.value?i=this.value:(n=e=e.addAll(),i=this.value={}),t.derive&&(n=e.fork(e.NO_SOURCE),e.visit(e.REM,s=>{const o=De(s);n.rem.push(i[o]),i[o]=null}),e.visit(e.ADD,s=>{const o=CM(s);i[De(s)]=o,n.add.push(o)}),e.visit(e.MOD,s=>{const o=i[De(s)];for(const c in s)o[c]=s[c],n.modifies(c);n.mod.push(o)})),n}});function sA(t){oe.call(this,[],t),this.count=0}sA.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};ve(sA,oe,{transform(t,e){const n=e.fork(e.NO_SOURCE),i=t.modified("size"),s=t.size,o=this.value.reduce((a,_)=>(a[De(_)]=1,a),{});let c=this.value,d=this.count,f=0;function u(a){let _,w;c.length<s?c.push(a):(w=~~((d+1)*Rr()),w<c.length&&w>=f&&(_=c[w],o[De(_)]&&n.rem.push(_),c[w]=a)),++d}if(e.rem.length&&(e.visit(e.REM,a=>{const _=De(a);o[_]&&(o[_]=-1,n.rem.push(a)),--d}),c=c.filter(a=>o[De(a)]!==-1)),(e.rem.length||i)&&c.length<s&&e.source&&(f=d=c.length,e.visit(e.SOURCE,a=>{o[De(a)]||u(a)}),f=-1),i&&c.length>s){const a=c.length-s;for(let _=0;_<a;++_)o[De(c[_])]=-1,n.rem.push(c[_]);c=c.slice(a)}return e.mod.length&&e.visit(e.MOD,a=>{o[De(a)]&&n.mod.push(a)}),e.add.length&&e.visit(e.ADD,u),(e.add.length||f<0)&&(n.add=c.filter(a=>!o[De(a)])),this.count=d,this.value=n.source=c,n}});function rA(t){oe.call(this,null,t)}rA.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};ve(rA,oe,{transform(t,e){if(this.value&&!t.modified())return;const n=e.materialize().fork(e.MOD),i=t.as||"data";return n.rem=this.value?e.rem.concat(this.value):e.rem,this.value=ar(t.start,t.stop,t.step||1).map(s=>{const o={};return o[i]=s,Yt(o)}),n.add=e.add.concat(this.value),n}});function fV(t){oe.call(this,null,t),this.modified(!0)}ve(fV,oe,{transform(t,e){return this.value=e.source,e.changed()?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation}});function aA(t){oe.call(this,null,t)}const uV=["unit0","unit1"];aA.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:kM,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:uV}]};ve(aA,oe,{transform(t,e){const n=t.field,i=t.interval!==!1,s=t.timezone==="utc",o=this._floor(t,e),c=(s?og:ag)(o.unit).offset,d=t.as||uV,f=d[0],u=d[1],a=o.step;let _=o.start||1/0,w=o.stop||-1/0,m=e.ADD;return(t.modified()||e.changed(e.REM)||e.modified(Ui(n)))&&(e=e.reflow(!0),m=e.SOURCE,_=1/0,w=-1/0),e.visit(m,l=>{const T=n(l);let b,S;T==null?(l[f]=null,i&&(l[u]=null)):(l[f]=b=S=o(T),i&&(l[u]=S=c(b,a)),b<_&&(_=b),S>w&&(w=S))}),o.start=_,o.stop=w,e.modifies(i?d:f)},_floor(t,e){const n=t.timezone==="utc",{units:i,step:s}=t.units?{units:t.units,step:t.step||1}:vG({extent:t.extent||Do(e.materialize(e.SOURCE).source,t.field),maxbins:t.maxbins}),o=IM(i),c=this.value||{},d=(n?hG:uG)(o,s);return d.unit=Rt(o),d.units=o,d.step=s,d.start=c.start,d.stop=c.stop,this.value=d}});function hV(t){oe.call(this,rg(),t)}ve(hV,oe,{transform(t,e){const n=e.dataflow,i=t.field,s=this.value,o=d=>s.set(i(d),d);let c=!0;return t.modified("field")||e.modified(i.fields)?(s.clear(),e.visit(e.SOURCE,o)):e.changed()?(e.visit(e.REM,d=>s.delete(i(d))),e.visit(e.ADD,o)):c=!1,this.modified(c),s.empty>n.cleanThreshold&&n.runAfter(s.clean),e.fork()}});function pV(t){oe.call(this,null,t)}ve(pV,oe,{transform(t,e){(!this.value||t.modified("field")||t.modified("sort")||e.changed()||t.sort&&e.modified(t.sort.fields))&&(this.value=(t.sort?e.source.slice().sort(Mu(t.sort)):e.source).map(t.field))}});function gge(t,e,n,i){const s=py[t](e,n);return{init:s.init||Ec,update:function(o,c){c[i]=s.next(o)}}}const py={row_number:function(){return{next:t=>t.index+1}},rank:function(){let t;return{init:()=>t=1,next:e=>{const n=e.index,i=e.data;return n&&e.compare(i[n-1],i[n])?t=n+1:t}}},dense_rank:function(){let t;return{init:()=>t=1,next:e=>{const n=e.index,i=e.data;return n&&e.compare(i[n-1],i[n])?++t:t}}},percent_rank:function(){const t=py.rank(),e=t.next;return{init:t.init,next:n=>(e(n)-1)/(n.data.length-1)}},cume_dist:function(){let t;return{init:()=>t=0,next:e=>{const n=e.data,i=e.compare;let s=e.index;if(t<s){for(;s+1<n.length&&!i(n[s],n[s+1]);)++s;t=s}return(1+t)/n.length}}},ntile:function(t,e){e=+e,e>0||de("ntile num must be greater than zero.");const n=py.cume_dist(),i=n.next;return{init:n.init,next:s=>Math.ceil(e*i(s))}},lag:function(t,e){return e=+e||1,{next:n=>{const i=n.index-e;return i>=0?t(n.data[i]):null}}},lead:function(t,e){return e=+e||1,{next:n=>{const i=n.index+e,s=n.data;return i<s.length?t(s[i]):null}}},first_value:function(t){return{next:e=>t(e.data[e.i0])}},last_value:function(t){return{next:e=>t(e.data[e.i1-1])}},nth_value:function(t,e){return e=+e,e>0||de("nth_value nth must be greater than zero."),{next:n=>{const i=n.i0+(e-1);return i<n.i1?t(n.data[i]):null}}},prev_value:function(t){let e;return{init:()=>e=null,next:n=>{const i=t(n.data[n.index]);return i!=null?e=i:e}}},next_value:function(t){let e,n;return{init:()=>(e=null,n=-1),next:i=>{const s=i.data;return i.index<=n?e:(n=_ge(t,s,i.index))<0?(n=s.length,e=null):e=t(s[n])}}}};function _ge(t,e,n){for(let i=e.length;n<i;++n)if(t(e[n])!=null)return n;return-1}const yge=Object.keys(py);function gV(t){const e=Ie(t.ops),n=Ie(t.fields),i=Ie(t.params),s=Ie(t.as),o=this.outputs=[],c=this.windows=[],d={},f={},u=[],a=[];let _=!0;function w(m){Ie(Ui(m)).forEach(l=>d[l]=1)}w(t.sort),e.forEach((m,l)=>{const T=n[l],b=Cn(T),S=GG(m,b,s[l]);if(w(T),o.push(S),Le(py,m))c.push(gge(m,n[l],i[l],S));else{if(T==null&&m!=="count"&&de("Null aggregate field specified."),m==="count"){u.push(S);return}_=!1;let x=f[b];x||(x=f[b]=[],x.field=T,a.push(x)),x.push(VG(m,S))}}),(u.length||a.length)&&(this.cell=mge(a,u,_)),this.inputs=Object.keys(d)}const _V=gV.prototype;_V.init=function(){this.windows.forEach(t=>t.init()),this.cell&&this.cell.init()};_V.update=function(t,e){const n=this.cell,i=this.windows,s=t.data,o=i&&i.length;let c;if(n){for(c=t.p0;c<t.i0;++c)n.rem(s[c]);for(c=t.p1;c<t.i1;++c)n.add(s[c]);n.set(e)}for(c=0;c<o;++c)i[c].update(t,e)};function mge(t,e,n){t=t.map(f=>WG(f,f.field));const i={num:0,agg:null,store:!1,count:e};if(!n)for(var s=t.length,o=i.agg=Array(s),c=0;c<s;++c)o[c]=new t[c](i);if(i.store)var d=i.data=new PM;return i.add=function(f){if(i.num+=1,!n){d&&d.add(f);for(let u=0;u<s;++u)o[u].add(o[u].get(f),f)}},i.rem=function(f){if(i.num-=1,!n){d&&d.rem(f);for(let u=0;u<s;++u)o[u].rem(o[u].get(f),f)}},i.set=function(f){let u,a;for(d&&d.values(),u=0,a=e.length;u<a;++u)f[e[u]]=i.num;if(!n)for(u=0,a=o.length;u<a;++u)o[u].set(f)},i.init=function(){i.num=0,d&&d.reset();for(let f=0;f<s;++f)o[f].init()},i}function oA(t){oe.call(this,{},t),this._mlen=0,this._mods=[]}oA.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:yge.concat(gm)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};ve(oA,oe,{transform(t,e){this.stamp=e.stamp;const n=t.modified(),i=Mu(t.sort),s=tI(t.groupby),o=d=>this.group(s(d));let c=this.state;(!c||n)&&(c=this.state=new gV(t)),n||e.modified(c.inputs)?(this.value={},e.visit(e.SOURCE,d=>o(d).add(d))):(e.visit(e.REM,d=>o(d).remove(d)),e.visit(e.ADD,d=>o(d).add(d)));for(let d=0,f=this._mlen;d<f;++d)wge(this._mods[d],c,i,t);return this._mlen=0,this._mods=[],e.reflow(n).modifies(c.outputs)},group(t){let e=this.value[t];return e||(e=this.value[t]=YG(De),e.stamp=-1),e.stamp<this.stamp&&(e.stamp=this.stamp,this._mods[this._mlen++]=e),e}});function wge(t,e,n,i){const s=i.sort,o=s&&!i.ignorePeers,c=i.frame||[null,0],d=t.data(n),f=d.length,u=o?Py(s):null,a={i0:0,i1:0,p0:0,p1:0,index:0,data:d,compare:s||Wi(-1)};e.init();for(let _=0;_<f;++_)bge(a,c,_,f),o&&Tge(a,u),e.update(a,d[_])}function bge(t,e,n,i){t.p0=t.i0,t.p1=t.i1,t.i0=e[0]==null?0:Math.max(0,n-Math.abs(e[0])),t.i1=e[1]==null?i:Math.min(i,n+Math.abs(e[1])+1),t.index=n}function Tge(t,e){const n=t.i0,i=t.i1-1,s=t.compare,o=t.data,c=o.length-1;n>0&&!s(o[n],o[n-1])&&(t.i0=e.left(o,o[n])),i<c&&!s(o[i],o[i+1])&&(t.i1=e.right(o,o[i]))}const vge=Object.freeze(Object.defineProperty({__proto__:null,aggregate:rd,bin:DM,collect:jM,compare:XG,countpattern:UM,cross:zM,density:$M,dotbin:GM,expression:eV,extent:VM,facet:wE,field:tV,filter:WM,flatten:YM,fold:XM,formula:KM,generate:nV,impute:JM,joinaggregate:QM,kde:ZM,key:iV,load:sV,lookup:eA,multiextent:rV,multivalues:aV,params:oV,pivot:tA,prefacet:lV,project:nA,proxy:cV,quantile:iA,relay:dV,sample:sA,sequence:rA,sieve:fV,subflow:HM,timeunit:aA,tupleindex:hV,values:pV,window:oA},Symbol.toStringTag,{value:"Module"}));function Uc(t,e){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=t,n.height=e,n}return null}const Ege=()=>typeof Image<"u"?Image:null;function lA(t,e,n){const i=t-e+n*2;return t?i>0?i:1:0}const Sge="identity",Ep="linear",Gl="log",_m="pow",ym="sqrt",bE="symlog",eu="time",tu="utc",xo="sequential",lg="diverging",Sp="quantile",TE="quantize",vE="threshold",cA="ordinal",nI="point",yV="band",dA="bin-ordinal",ti="continuous",mm="discrete",wm="discretizing",Hr="interpolating",fA="temporal";function xge(t){return function(e){let n=e[0],i=e[1],s;return i<n&&(s=n,n=i,i=s),[t.invert(n),t.invert(i)]}}function Bge(t){return function(e){const n=t.range();let i=e[0],s=e[1],o=-1,c,d,f,u;for(s<i&&(d=i,i=s,s=d),f=0,u=n.length;f<u;++f)n[f]>=i&&n[f]<=s&&(o<0&&(o=f),c=f);if(!(o<0))return i=t.invertExtent(n[o]),s=t.invertExtent(n[c]),[i[0]===void 0?i[1]:i[0],s[1]===void 0?s[0]:s[1]]}}function uA(){const t=c2().unknown(void 0),e=t.domain,n=t.range;let i=[0,1],s,o,c=!1,d=0,f=0,u=.5;delete t.unknown;function a(){const _=e().length,w=i[1]<i[0],m=i[1-w],l=lA(_,d,f);let T=i[w-0];s=(m-T)/(l||1),c&&(s=Math.floor(s)),T+=(m-T-s*(_-d))*u,o=s*(1-d),c&&(T=Math.round(T),o=Math.round(o));const b=ar(_).map(S=>T+s*S);return n(w?b.reverse():b)}return t.domain=function(_){return arguments.length?(e(_),a()):e()},t.range=function(_){return arguments.length?(i=[+_[0],+_[1]],a()):i.slice()},t.rangeRound=function(_){return i=[+_[0],+_[1]],c=!0,a()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(_){return arguments.length?(c=!!_,a()):c},t.padding=function(_){return arguments.length?(f=Math.max(0,Math.min(1,_)),d=f,a()):d},t.paddingInner=function(_){return arguments.length?(d=Math.max(0,Math.min(1,_)),a()):d},t.paddingOuter=function(_){return arguments.length?(f=Math.max(0,Math.min(1,_)),a()):f},t.align=function(_){return arguments.length?(u=Math.max(0,Math.min(1,_)),a()):u},t.invertRange=function(_){if(_[0]==null||_[1]==null)return;const w=i[1]<i[0],m=w?n().reverse():n(),l=m.length-1;let T=+_[0],b=+_[1],S,x,B;if(!(T!==T||b!==b)&&(b<T&&(B=T,T=b,b=B),!(b<m[0]||T>i[1-w])))return S=Math.max(0,H0(m,T)-1),x=T===b?S:H0(m,b)-1,T-m[S]>o+1e-10&&++S,w&&(B=S,S=l-x,x=l-B),S>x?void 0:e().slice(S,x+1)},t.invert=function(_){const w=t.invertRange([_,_]);return w&&w[0]},t.copy=function(){return uA().domain(e()).range(i).round(c).paddingInner(d).paddingOuter(f).align(u)},a()}function mV(t){const e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return mV(e())},t}function kge(){return mV(uA().paddingInner(1))}var Ige=Array.prototype.map;function Fge(t){return Ige.call(t,Pi)}const Oge=Array.prototype.slice;function wV(){let t=[],e=[];function n(i){return i==null||i!==i?void 0:e[(Dy(t,i)-1)%e.length]}return n.domain=function(i){return arguments.length?(t=Fge(i),n):t.slice()},n.range=function(i){return arguments.length?(e=Oge.call(i),n):e.slice()},n.tickFormat=function(i,s){return Dz(t[0],Rt(t),i==null?10:i,s)},n.copy=function(){return wV().domain(n.domain()).range(n.range())},n}const Nv={};function Mge(t,e,n){const i=function(){const o=e();return o.invertRange||(o.invertRange=o.invert?xge(o):o.invertExtent?Bge(o):void 0),o.type=t,o};return i.metadata=Ma(Ie(n)),i}function Vt(t,e,n){return arguments.length>1?(Nv[t]=Mge(t,e,n),this):bV(t)?Nv[t]:void 0}Vt(Sge,Uz);Vt(Ep,jz,ti);Vt(Gl,$z,[ti,Gl]);Vt(_m,h2,ti);Vt(ym,use,ti);Vt(bE,qz,ti);Vt(eu,kre,[ti,fA]);Vt(tu,Ire,[ti,fA]);Vt(xo,x2,[ti,Hr]);Vt("".concat(xo,"-").concat(Ep),x2,[ti,Hr]);Vt("".concat(xo,"-").concat(Gl),d$,[ti,Hr,Gl]);Vt("".concat(xo,"-").concat(_m),B2,[ti,Hr]);Vt("".concat(xo,"-").concat(ym),Fre,[ti,Hr]);Vt("".concat(xo,"-").concat(bE),f$,[ti,Hr]);Vt("".concat(lg,"-").concat(Ep),u$,[ti,Hr]);Vt("".concat(lg,"-").concat(Gl),h$,[ti,Hr,Gl]);Vt("".concat(lg,"-").concat(_m),k2,[ti,Hr]);Vt("".concat(lg,"-").concat(ym),Ore,[ti,Hr]);Vt("".concat(lg,"-").concat(bE),p$,[ti,Hr]);Vt(Sp,Gz,[wm,Sp]);Vt(TE,Vz,wm);Vt(vE,Hz,wm);Vt(dA,wV,[mm,wm]);Vt(cA,c2,mm);Vt(yV,uA,mm);Vt(nI,kge,mm);function bV(t){return Le(Nv,t)}function Nu(t,e){const n=Nv[t];return n&&n.metadata[e]}function hA(t){return Nu(t,ti)}function xp(t){return Nu(t,mm)}function iI(t){return Nu(t,wm)}function TV(t){return Nu(t,Gl)}function Age(t){return Nu(t,fA)}function vV(t){return Nu(t,Hr)}function EV(t){return Nu(t,Sp)}const Nge=["clamp","base","constant","exponent"];function SV(t,e){const n=e[0],i=Rt(e)-n;return function(s){return t(n+s*i)}}function EE(t,e,n){return YF(pA(e||"rgb",n),t)}function xV(t,e){const n=new Array(e),i=e+1;for(let s=0;s<e;)n[s]=t(++s/i);return n}function BV(t,e,n){const i=n-e;let s,o,c;return!i||!Number.isFinite(i)?Wi(.5):(s=(o=t.type).indexOf("-"),o=s<0?o:o.slice(s+1),c=Vt(o)().domain([e,n]).range([0,1]),Nge.forEach(d=>t[d]?c[d](t[d]()):0),c)}function pA(t,e){const n=Oee[Cge(t)];return e!=null&&n&&n.gamma?n.gamma(e):n}function Cge(t){return"interpolate"+t.toLowerCase().split("-").map(e=>e[0].toUpperCase()+e.slice(1)).join("")}const Rge={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Lge={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function kV(t){const e=t.length/6|0,n=new Array(e);for(let i=0;i<e;)n[i]="#"+t.slice(i*6,++i*6);return n}function IV(t,e){for(const n in t)gA(n,e(t[n]))}const JD={};IV(Lge,kV);IV(Rge,t=>EE(kV(t)));function gA(t,e){return t=t&&t.toLowerCase(),arguments.length>1?(JD[t]=e,this):JD[t]}const x0="symbol",Pge="discrete",Dge="gradient",jge=t=>he(t)?t.map(e=>String(e)):String(t),Uge=(t,e)=>t[1]-e[1],zge=(t,e)=>e[1]-t[1];function _A(t,e,n){let i;return ln(e)&&(t.bins&&(e=Math.max(e,t.bins.length)),n!=null&&(e=Math.min(e,Math.floor(pm(t.domain())/n||1)))),Fe(e)&&(i=e.step,e=e.interval),ke(e)&&(e=t.type===eu?ag(e):t.type==tu?og(e):de("Only time and utc scales accept interval strings."),i&&(e=e.every(i))),e}function FV(t,e,n){let i=t.range(),s=i[0],o=Rt(i),c=Uge;if(s>o&&(i=o,o=s,s=i,c=zge),s=Math.floor(s),o=Math.ceil(o),e=e.map(d=>[d,t(d)]).filter(d=>s<=d[1]&&d[1]<=o).sort(c).map(d=>d[0]),n>0&&e.length>1){const d=[e[0],Rt(e)];for(;e.length>n&&e.length>=3;)e=e.filter((f,u)=>!(u%2));e.length<3&&(e=d)}return e}function yA(t,e){return t.bins?FV(t,t.bins):t.ticks?t.ticks(e):t.domain()}function OV(t,e,n,i,s,o){const c=e.type;let d=jge;if(c===eu||s===eu)d=t.timeFormat(i);else if(c===tu||s===tu)d=t.utcFormat(i);else if(TV(c)){const f=t.formatFloat(i);if(o||e.bins)d=f;else{const u=MV(e,n,!1);d=a=>u(a)?f(a):""}}else if(e.tickFormat){const f=e.domain();d=t.formatSpan(f[0],f[f.length-1],n,i)}else i&&(d=t.format(i));return d}function MV(t,e,n){const i=yA(t,e),s=t.base(),o=Math.log(s),c=Math.max(1,s*e/i.length),d=f=>{let u=f/Math.pow(s,Math.round(Math.log(f)/o));return u*s<s-.5&&(u*=s),u<=c};return n?i.filter(d):d}const sI={[Sp]:"quantiles",[TE]:"thresholds",[vE]:"domain"},AV={[Sp]:"quantiles",[TE]:"domain"};function NV(t,e){return t.bins?Gge(t.bins):t.type===Gl?MV(t,e,!0):sI[t.type]?qge(t[sI[t.type]]()):yA(t,e)}function $ge(t,e,n){const i=e[AV[e.type]](),s=i.length;let o=s>1?i[1]-i[0]:i[0],c;for(c=1;c<s;++c)o=Math.min(o,i[c]-i[c-1]);return t.formatSpan(0,o,3*10,n)}function qge(t){const e=[-1/0].concat(t);return e.max=1/0,e}function Gge(t){const e=t.slice(0,-1);return e.max=Rt(t),e}const Vge=t=>sI[t.type]||t.bins;function CV(t,e,n,i,s,o,c){const d=AV[e.type]&&o!==eu&&o!==tu?$ge(t,e,s):OV(t,e,n,s,o,c);return i===x0&&Vge(e)?Hge(d):i===Pge?Wge(d):Yge(d)}const Hge=t=>(e,n,i)=>{const s=QD(i[n+1],QD(i.max,1/0)),o=ZD(e,t),c=ZD(s,t);return o&&c?o+" \u2013 "+c:c?"< "+c:"\u2265 "+o},QD=(t,e)=>t!=null?t:e,Wge=t=>(e,n)=>n?t(e):null,Yge=t=>e=>t(e),ZD=(t,e)=>Number.isFinite(t)?e(t):null;function Xge(t){const e=t.domain(),n=e.length-1;let i=+e[0],s=+Rt(e),o=s-i;if(t.type===vE){const c=n?o/n:.1;i-=c,s+=c,o=s-i}return c=>(c-i)/o}function Kge(t,e,n,i){const s=i||e.type;return ke(n)&&Age(s)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&s===eu?t.timeFormat("%A, %d %B %Y, %X"):!n&&s===tu?t.utcFormat("%A, %d %B %Y, %X UTC"):CV(t,e,5,null,n,i,!0)}function RV(t,e,n){n=n||{};const i=Math.max(3,n.maxlen||7),s=Kge(t,e,n.format,n.formatType);if(iI(e.type)){const o=NV(e).slice(1).map(s),c=o.length;return"".concat(c," boundar").concat(c===1?"y":"ies",": ").concat(o.join(", "))}else if(xp(e.type)){const o=e.domain(),c=o.length,d=c>i?o.slice(0,i-2).map(s).join(", ")+", ending with "+o.slice(-1).map(s):o.map(s).join(", ");return"".concat(c," value").concat(c===1?"":"s",": ").concat(d)}else{const o=e.domain();return"values from ".concat(s(o[0])," to ").concat(s(Rt(o)))}}let LV=0;function Jge(){LV=0}const Cv="p_";function mA(t){return t&&t.gradient}function PV(t,e,n){const i=t.gradient;let s=t.id,o=i==="radial"?Cv:"";return s||(s=t.id="gradient_"+LV++,i==="radial"?(t.x1=Va(t.x1,.5),t.y1=Va(t.y1,.5),t.r1=Va(t.r1,0),t.x2=Va(t.x2,.5),t.y2=Va(t.y2,.5),t.r2=Va(t.r2,.5),o=Cv):(t.x1=Va(t.x1,0),t.y1=Va(t.y1,0),t.x2=Va(t.x2,1),t.y2=Va(t.y2,0))),e[s]=t,"url("+(n||"")+"#"+o+s+")"}function Va(t,e){return t!=null?t:e}function DV(t,e){var n=[],i;return i={gradient:"linear",x1:t?t[0]:0,y1:t?t[1]:0,x2:e?e[0]:1,y2:e?e[1]:0,stops:n,stop:function(s,o){return n.push({offset:s,color:o}),i}}}const e4={basis:{curve:$re},"basis-closed":{curve:qre},"basis-open":{curve:Gre},bundle:{curve:Vre,tension:"beta",value:.85},cardinal:{curve:Hre,tension:"tension",value:0},"cardinal-open":{curve:Yre,tension:"tension",value:0},"cardinal-closed":{curve:Wre,tension:"tension",value:0},"catmull-rom":{curve:Xre,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Kre,tension:"alpha",value:.5},"catmull-rom-open":{curve:Jre,tension:"alpha",value:.5},linear:{curve:I2},"linear-closed":{curve:Qre},monotone:{horizontal:eae,vertical:Zre},natural:{curve:tae},step:{curve:nae},"step-after":{curve:sae},"step-before":{curve:iae}};function wA(t,e,n){var i=Le(e4,t)&&e4[t],s=null;return i&&(s=i.curve||i[e||"vertical"],i.tension&&n!=null&&(s=s[i.tension](n))),s}const Qge={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},Zge=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,e_e=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,t_e=/^((\s+,?\s*)|(,\s*))/,n_e=/^[01]/;function Bp(t){const e=[];return(t.match(Zge)||[]).forEach(i=>{let s=i[0];const o=s.toLowerCase(),c=Qge[o],d=i_e(o,c,i.slice(1).trim()),f=d.length;if(f<c||f&&f%c!==0)throw Error("Invalid SVG path, incorrect parameter count");if(e.push([s,...d.slice(0,c)]),f!==c){o==="m"&&(s=s==="M"?"L":"l");for(let u=c;u<f;u+=c)e.push([s,...d.slice(u,u+c)])}}),e}function i_e(t,e,n){const i=[];for(let s=0;e&&s<n.length;)for(let o=0;o<e;++o){const c=t==="a"&&(o===3||o===4)?n_e:e_e,d=n.slice(s).match(c);if(d===null)throw Error("Invalid SVG path, incorrect parameter type");s+=d[0].length,i.push(+d[0]);const f=n.slice(s).match(t_e);f!==null&&(s+=f[0].length)}return i}const ad=Math.PI/180,s_e=1e-14,cf=Math.PI/2,go=Math.PI*2,Ku=Math.sqrt(3)/2;var Dx={},jx={},jV=[].join;function r_e(t,e,n,i,s,o,c,d,f){const u=jV.call(arguments);if(Dx[u])return Dx[u];const a=c*ad,_=Math.sin(a),w=Math.cos(a);n=Math.abs(n),i=Math.abs(i);const m=w*(d-t)*.5+_*(f-e)*.5,l=w*(f-e)*.5-_*(d-t)*.5;let T=m*m/(n*n)+l*l/(i*i);T>1&&(T=Math.sqrt(T),n*=T,i*=T);const b=w/n,S=_/n,x=-_/i,B=w/i,F=b*d+S*f,k=x*d+B*f,A=b*t+S*e,M=x*t+B*e;let P=1/((A-F)*(A-F)+(M-k)*(M-k))-.25;P<0&&(P=0);let j=Math.sqrt(P);o==s&&(j=-j);const D=.5*(F+A)-j*(M-k),z=.5*(k+M)+j*(A-F),$=Math.atan2(k-z,F-D);let H=Math.atan2(M-z,A-D)-$;H<0&&o===1?H+=go:H>0&&o===0&&(H-=go);const W=Math.ceil(Math.abs(H/(cf+.001))),J=[];for(let V=0;V<W;++V){const le=$+V*H/W,pe=$+(V+1)*H/W;J[V]=[D,z,le,pe,n,i,_,w]}return Dx[u]=J}function a_e(t){const e=jV.call(t);if(jx[e])return jx[e];var n=t[0],i=t[1],s=t[2],o=t[3],c=t[4],d=t[5],f=t[6],u=t[7];const a=u*c,_=-f*d,w=f*c,m=u*d,l=Math.cos(s),T=Math.sin(s),b=Math.cos(o),S=Math.sin(o),x=.5*(o-s),B=Math.sin(x*.5),F=8/3*B*B/Math.sin(x),k=n+l-F*T,A=i+T+F*l,M=n+b,R=i+S,P=M+F*S,j=R-F*b;return jx[e]=[a*k+_*A,w*k+m*A,a*P+_*j,w*P+m*j,a*M+_*R,w*M+m*R]}const _r=["l",0,0,0,0,0,0,0];function o_e(t,e,n){const i=_r[0]=t[0];if(i==="a"||i==="A")_r[1]=e*t[1],_r[2]=n*t[2],_r[3]=t[3],_r[4]=t[4],_r[5]=t[5],_r[6]=e*t[6],_r[7]=n*t[7];else if(i==="h"||i==="H")_r[1]=e*t[1];else if(i==="v"||i==="V")_r[1]=n*t[1];else for(var s=1,o=t.length;s<o;++s)_r[s]=(s%2==1?e:n)*t[s];return _r}function gy(t,e,n,i,s,o){var c,d=null,f=0,u=0,a=0,_=0,w,m,l,T,b=0,S=0;n==null&&(n=0),i==null&&(i=0),s==null&&(s=1),o==null&&(o=s),t.beginPath&&t.beginPath();for(var x=0,B=e.length;x<B;++x){switch(c=e[x],(s!==1||o!==1)&&(c=o_e(c,s,o)),c[0]){case"l":f+=c[1],u+=c[2],t.lineTo(f+n,u+i);break;case"L":f=c[1],u=c[2],t.lineTo(f+n,u+i);break;case"h":f+=c[1],t.lineTo(f+n,u+i);break;case"H":f=c[1],t.lineTo(f+n,u+i);break;case"v":u+=c[1],t.lineTo(f+n,u+i);break;case"V":u=c[1],t.lineTo(f+n,u+i);break;case"m":f+=c[1],u+=c[2],b=f,S=u,t.moveTo(f+n,u+i);break;case"M":f=c[1],u=c[2],b=f,S=u,t.moveTo(f+n,u+i);break;case"c":w=f+c[5],m=u+c[6],a=f+c[3],_=u+c[4],t.bezierCurveTo(f+c[1]+n,u+c[2]+i,a+n,_+i,w+n,m+i),f=w,u=m;break;case"C":f=c[5],u=c[6],a=c[3],_=c[4],t.bezierCurveTo(c[1]+n,c[2]+i,a+n,_+i,f+n,u+i);break;case"s":w=f+c[3],m=u+c[4],a=2*f-a,_=2*u-_,t.bezierCurveTo(a+n,_+i,f+c[1]+n,u+c[2]+i,w+n,m+i),a=f+c[1],_=u+c[2],f=w,u=m;break;case"S":w=c[3],m=c[4],a=2*f-a,_=2*u-_,t.bezierCurveTo(a+n,_+i,c[1]+n,c[2]+i,w+n,m+i),f=w,u=m,a=c[1],_=c[2];break;case"q":w=f+c[3],m=u+c[4],a=f+c[1],_=u+c[2],t.quadraticCurveTo(a+n,_+i,w+n,m+i),f=w,u=m;break;case"Q":w=c[3],m=c[4],t.quadraticCurveTo(c[1]+n,c[2]+i,w+n,m+i),f=w,u=m,a=c[1],_=c[2];break;case"t":w=f+c[1],m=u+c[2],d[0].match(/[QqTt]/)===null?(a=f,_=u):d[0]==="t"?(a=2*f-l,_=2*u-T):d[0]==="q"&&(a=2*f-a,_=2*u-_),l=a,T=_,t.quadraticCurveTo(a+n,_+i,w+n,m+i),f=w,u=m,a=f+c[1],_=u+c[2];break;case"T":w=c[1],m=c[2],a=2*f-a,_=2*u-_,t.quadraticCurveTo(a+n,_+i,w+n,m+i),f=w,u=m;break;case"a":t4(t,f+n,u+i,[c[1],c[2],c[3],c[4],c[5],c[6]+f+n,c[7]+u+i]),f+=c[6],u+=c[7];break;case"A":t4(t,f+n,u+i,[c[1],c[2],c[3],c[4],c[5],c[6]+n,c[7]+i]),f=c[6],u=c[7];break;case"z":case"Z":f=b,u=S,t.closePath();break}d=c}}function t4(t,e,n,i){const s=r_e(i[5],i[6],i[0],i[1],i[3],i[4],i[2],e,n);for(let o=0;o<s.length;++o){const c=a_e(s[o]);t.bezierCurveTo(c[0],c[1],c[2],c[3],c[4],c[5])}}const n4=.5773502691896257,i4={circle:{draw:function(t,e){const n=Math.sqrt(e)/2;t.moveTo(n,0),t.arc(0,0,n,0,go)}},cross:{draw:function(t,e){var n=Math.sqrt(e)/2,i=n/2.5;t.moveTo(-n,-i),t.lineTo(-n,i),t.lineTo(-i,i),t.lineTo(-i,n),t.lineTo(i,n),t.lineTo(i,i),t.lineTo(n,i),t.lineTo(n,-i),t.lineTo(i,-i),t.lineTo(i,-n),t.lineTo(-i,-n),t.lineTo(-i,-i),t.closePath()}},diamond:{draw:function(t,e){const n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.closePath()}},square:{draw:function(t,e){var n=Math.sqrt(e),i=-n/2;t.rect(i,i,n,n)}},arrow:{draw:function(t,e){var n=Math.sqrt(e)/2,i=n/7,s=n/2.5,o=n/8;t.moveTo(-i,n),t.lineTo(i,n),t.lineTo(i,-o),t.lineTo(s,-o),t.lineTo(0,-n),t.lineTo(-s,-o),t.lineTo(-i,-o),t.closePath()}},wedge:{draw:function(t,e){var n=Math.sqrt(e)/2,i=Ku*n,s=i-n*n4,o=n/4;t.moveTo(0,-i-s),t.lineTo(-o,i-s),t.lineTo(o,i-s),t.closePath()}},triangle:{draw:function(t,e){var n=Math.sqrt(e)/2,i=Ku*n,s=i-n*n4;t.moveTo(0,-i-s),t.lineTo(-n,i-s),t.lineTo(n,i-s),t.closePath()}},"triangle-up":{draw:function(t,e){var n=Math.sqrt(e)/2,i=Ku*n;t.moveTo(0,-i),t.lineTo(-n,i),t.lineTo(n,i),t.closePath()}},"triangle-down":{draw:function(t,e){var n=Math.sqrt(e)/2,i=Ku*n;t.moveTo(0,i),t.lineTo(-n,-i),t.lineTo(n,-i),t.closePath()}},"triangle-right":{draw:function(t,e){var n=Math.sqrt(e)/2,i=Ku*n;t.moveTo(i,0),t.lineTo(-i,-n),t.lineTo(-i,n),t.closePath()}},"triangle-left":{draw:function(t,e){var n=Math.sqrt(e)/2,i=Ku*n;t.moveTo(-i,0),t.lineTo(i,-n),t.lineTo(i,n),t.closePath()}},stroke:{draw:function(t,e){const n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(n,0)}}};function UV(t){return Le(i4,t)?i4[t]:l_e(t)}var Ux={};function l_e(t){if(!Le(Ux,t)){const e=Bp(t);Ux[t]={draw:function(n,i){gy(n,e,0,0,Math.sqrt(i)/2)}}}return Ux[t]}const cc=.448084975506;function c_e(t){return t.x}function d_e(t){return t.y}function f_e(t){return t.width}function u_e(t){return t.height}function ll(t){return typeof t=="function"?t:()=>+t}function Lb(t,e,n){return Math.max(e,Math.min(t,n))}function zV(){var t=c_e,e=d_e,n=f_e,i=u_e,s=ll(0),o=s,c=s,d=s,f=null;function u(a,_,w){var m,l=_!=null?_:+t.call(this,a),T=w!=null?w:+e.call(this,a),b=+n.call(this,a),S=+i.call(this,a),x=Math.min(b,S)/2,B=Lb(+s.call(this,a),0,x),F=Lb(+o.call(this,a),0,x),k=Lb(+c.call(this,a),0,x),A=Lb(+d.call(this,a),0,x);if(f||(f=m=Td()),B<=0&&F<=0&&k<=0&&A<=0)f.rect(l,T,b,S);else{var M=l+b,R=T+S;f.moveTo(l+B,T),f.lineTo(M-F,T),f.bezierCurveTo(M-cc*F,T,M,T+cc*F,M,T+F),f.lineTo(M,R-A),f.bezierCurveTo(M,R-cc*A,M-cc*A,R,M-A,R),f.lineTo(l+k,R),f.bezierCurveTo(l+cc*k,R,l,R-cc*k,l,R-k),f.lineTo(l,T+B),f.bezierCurveTo(l,T+cc*B,l+cc*B,T,l+B,T),f.closePath()}if(m)return f=null,m+""||null}return u.x=function(a){return arguments.length?(t=ll(a),u):t},u.y=function(a){return arguments.length?(e=ll(a),u):e},u.width=function(a){return arguments.length?(n=ll(a),u):n},u.height=function(a){return arguments.length?(i=ll(a),u):i},u.cornerRadius=function(a,_,w,m){return arguments.length?(s=ll(a),o=_!=null?ll(_):s,d=w!=null?ll(w):s,c=m!=null?ll(m):o,u):s},u.context=function(a){return arguments.length?(f=a==null?null:a,u):f},u}function $V(){var t,e,n,i,s=null,o,c,d,f;function u(_,w,m){const l=m/2;if(o){var T=d-w,b=_-c;if(T||b){var S=Math.sqrt(T*T+b*b),x=(T/=S)*f,B=(b/=S)*f,F=Math.atan2(b,T);s.moveTo(c-x,d-B),s.lineTo(_-T*l,w-b*l),s.arc(_,w,l,F-Math.PI,F),s.lineTo(c+x,d+B),s.arc(c,d,f,F,F+Math.PI)}else s.arc(_,w,l,0,go);s.closePath()}else o=1;c=_,d=w,f=l}function a(_){var w,m=_.length,l,T=!1,b;for(s==null&&(s=b=Td()),w=0;w<=m;++w)!(w<m&&i(l=_[w],w,_))===T&&(T=!T)&&(o=0),T&&u(+t(l,w,_),+e(l,w,_),+n(l,w,_));if(b)return s=null,b+""||null}return a.x=function(_){return arguments.length?(t=_,a):t},a.y=function(_){return arguments.length?(e=_,a):e},a.size=function(_){return arguments.length?(n=_,a):n},a.defined=function(_){return arguments.length?(i=_,a):i},a.context=function(_){return arguments.length?(_==null?s=null:s=_,a):s},a}function bm(t,e){return t!=null?t:e}const Tm=t=>t.x||0,vm=t=>t.y||0,h_e=t=>t.width||0,p_e=t=>t.height||0,g_e=t=>(t.x||0)+(t.width||0),__e=t=>(t.y||0)+(t.height||0),y_e=t=>t.startAngle||0,m_e=t=>t.endAngle||0,w_e=t=>t.padAngle||0,b_e=t=>t.innerRadius||0,T_e=t=>t.outerRadius||0,v_e=t=>t.cornerRadius||0,E_e=t=>bm(t.cornerRadiusTopLeft,t.cornerRadius)||0,S_e=t=>bm(t.cornerRadiusTopRight,t.cornerRadius)||0,x_e=t=>bm(t.cornerRadiusBottomRight,t.cornerRadius)||0,B_e=t=>bm(t.cornerRadiusBottomLeft,t.cornerRadius)||0,k_e=t=>bm(t.size,64),I_e=t=>t.size||1,SE=t=>t.defined!==!1,F_e=t=>UV(t.shape||"circle"),O_e=jre().startAngle(y_e).endAngle(m_e).padAngle(w_e).innerRadius(b_e).outerRadius(T_e).cornerRadius(v_e),M_e=T$().x(Tm).y1(vm).y0(__e).defined(SE),A_e=T$().y(vm).x1(Tm).x0(g_e).defined(SE),N_e=b$().x(Tm).y(vm).defined(SE),C_e=zV().x(Tm).y(vm).width(h_e).height(p_e).cornerRadius(E_e,S_e,x_e,B_e),R_e=zre().type(F_e).size(k_e),L_e=$V().x(Tm).y(vm).defined(SE).size(I_e);function bA(t){return t.cornerRadius||t.cornerRadiusTopLeft||t.cornerRadiusTopRight||t.cornerRadiusBottomRight||t.cornerRadiusBottomLeft}function P_e(t,e){return O_e.context(t)(e)}function D_e(t,e){const n=e[0],i=n.interpolate||"linear";return(n.orient==="horizontal"?A_e:M_e).curve(wA(i,n.orient,n.tension)).context(t)(e)}function j_e(t,e){const n=e[0],i=n.interpolate||"linear";return N_e.curve(wA(i,n.orient,n.tension)).context(t)(e)}function cg(t,e,n,i){return C_e.context(t)(e,n,i)}function U_e(t,e){return(e.mark.shape||e.shape).context(t)(e)}function z_e(t,e){return R_e.context(t)(e)}function $_e(t,e){return L_e.context(t)(e)}var qV=1;function GV(){qV=1}function TA(t,e,n){var i=e.clip,s=t._defs,o=e.clip_id||(e.clip_id="clip"+qV++),c=s.clipping[o]||(s.clipping[o]={id:o});return wt(i)?c.path=i(null):bA(n)?c.path=cg(null,n,0,0):(c.width=n.width||0,c.height=n.height||0),"url(#"+o+")"}function Un(t){this.clear(),t&&this.union(t)}Un.prototype={clone(){return new Un(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2},set(t,e,n,i){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),i<e?(this.y2=e,this.y1=i):(this.y1=e,this.y2=i),this},add(t,e){return t<this.x1&&(this.x1=t),e<this.y1&&(this.y1=e),t>this.x2&&(this.x2=t),e>this.y2&&(this.y2=e),this},expand(t){return this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(t){return this.x1*=t,this.y1*=t,this.x2*=t,this.y2*=t,this},translate(t,e){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this},rotate(t,e,n){const i=this.rotatedPoints(t,e,n);return this.clear().add(i[0],i[1]).add(i[2],i[3]).add(i[4],i[5]).add(i[6],i[7])},rotatedPoints(t,e,n){var{x1:i,y1:s,x2:o,y2:c}=this,d=Math.cos(t),f=Math.sin(t),u=e-e*d+n*f,a=n-e*f-n*d;return[d*i-f*s+u,f*i+d*s+a,d*i-f*c+u,f*i+d*c+a,d*o-f*s+u,f*o+d*s+a,d*o-f*c+u,f*o+d*c+a]},union(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this},intersect(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this},encloses(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2},alignsWith(t){return t&&(this.x1==t.x1||this.x2==t.x2||this.y1==t.y1||this.y2==t.y2)},intersects(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)},contains(t,e){return!(t<this.x1||t>this.x2||e<this.y1||e>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function xE(t){this.mark=t,this.bounds=this.bounds||new Un}function BE(t){xE.call(this,t),this.items=this.items||[]}ve(BE,xE);function vA(t){this._pending=0,this._loader=t||hE()}function s4(t){t._pending+=1}function Lg(t){t._pending-=1}vA.prototype={pending(){return this._pending},sanitizeURL(t){const e=this;return s4(e),e._loader.sanitize(t,{context:"href"}).then(n=>(Lg(e),n)).catch(()=>(Lg(e),null))},loadImage(t){const e=this,n=Ege();return s4(e),e._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!n)throw{url:s};const o=new n,c=Le(i,"crossOrigin")?i.crossOrigin:"anonymous";return c!=null&&(o.crossOrigin=c),o.onload=()=>Lg(e),o.onerror=()=>Lg(e),o.src=s,o}).catch(i=>(Lg(e),{complete:!1,width:0,height:0,src:i&&i.url||""}))},ready(){const t=this;return new Promise(e=>{function n(i){t.pending()?setTimeout(()=>{n(!0)},10):e(i)}n(!1)})}};function Kl(t,e,n){if(e.stroke&&e.opacity!==0&&e.strokeOpacity!==0){const i=e.strokeWidth!=null?+e.strokeWidth:1;t.expand(i+(n?q_e(e,i):0))}return t}function q_e(t,e){return t.strokeJoin&&t.strokeJoin!=="miter"?0:e}const G_e=go-1e-8;let kE,B0,k0,Ff,rI,I0,aI,oI;const Bc=(t,e)=>kE.add(t,e),F0=(t,e)=>Bc(B0=t,k0=e),r4=t=>Bc(t,kE.y1),a4=t=>Bc(kE.x1,t),df=(t,e)=>rI*t+aI*e,ff=(t,e)=>I0*t+oI*e,zx=(t,e)=>Bc(df(t,e),ff(t,e)),$x=(t,e)=>F0(df(t,e),ff(t,e));function Em(t,e){return kE=t,e?(Ff=e*ad,rI=oI=Math.cos(Ff),I0=Math.sin(Ff),aI=-I0):(rI=oI=1,Ff=I0=aI=0),V_e}const V_e={beginPath(){},closePath(){},moveTo:$x,lineTo:$x,rect(t,e,n,i){Ff?(zx(t+n,e),zx(t+n,e+i),zx(t,e+i),$x(t,e)):(Bc(t+n,e+i),F0(t,e))},quadraticCurveTo(t,e,n,i){const s=df(t,e),o=ff(t,e),c=df(n,i),d=ff(n,i);o4(B0,s,c,r4),o4(k0,o,d,a4),F0(c,d)},bezierCurveTo(t,e,n,i,s,o){const c=df(t,e),d=ff(t,e),f=df(n,i),u=ff(n,i),a=df(s,o),_=ff(s,o);l4(B0,c,f,a,r4),l4(k0,d,u,_,a4),F0(a,_)},arc(t,e,n,i,s,o){if(i+=Ff,s+=Ff,B0=n*Math.cos(s)+t,k0=n*Math.sin(s)+e,Math.abs(s-i)>G_e)Bc(t-n,e-n),Bc(t+n,e+n);else{const c=u=>Bc(n*Math.cos(u)+t,n*Math.sin(u)+e);let d,f;if(c(i),c(s),s!==i)if(i=i%go,i<0&&(i+=go),s=s%go,s<0&&(s+=go),s<i&&(o=!o,d=i,i=s,s=d),o)for(s-=go,d=i-i%cf,f=0;f<4&&d>s;++f,d-=cf)c(d);else for(d=i-i%cf+cf,f=0;f<4&&d<s;++f,d=d+cf)c(d)}}};function o4(t,e,n,i){const s=(t-e)/(t+n-2*e);0<s&&s<1&&i(t+(e-t)*s)}function l4(t,e,n,i,s){const o=i-t+3*e-3*n,c=t+n-2*e,d=t-e;let f=0,u=0,a;Math.abs(o)>s_e?(a=c*c+d*o,a>=0&&(a=Math.sqrt(a),f=(-c+a)/o,u=(-c-a)/o)):f=.5*d/c,0<f&&f<1&&s(c4(f,t,e,n,i)),0<u&&u<1&&s(c4(u,t,e,n,i))}function c4(t,e,n,i,s){const o=1-t,c=o*o,d=t*t;return c*o*e+3*c*t*n+3*o*d*i+d*t*s}var zc=(zc=Uc(1,1))?zc.getContext("2d"):null;const lI=new Un;function EA(t){return function(e,n){if(!zc)return!0;t(zc,e),lI.clear().union(e.bounds).intersect(n).round();const{x1:i,y1:s,x2:o,y2:c}=lI;for(let d=s;d<=c;++d)for(let f=i;f<=o;++f)if(zc.isPointInPath(f,d))return!0;return!1}}function SA(t,e){return e.contains(t.x||0,t.y||0)}function VV(t,e){const n=t.x||0,i=t.y||0,s=t.width||0,o=t.height||0;return e.intersects(lI.set(n,i,n+s,i+o))}function HV(t,e){const n=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:n,o=t.y2!=null?t.y2:i;return vh(e,n,i,s,o)}function vh(t,e,n,i,s){const{x1:o,y1:c,x2:d,y2:f}=t,u=i-e,a=s-n;let _=0,w=1,m,l,T,b;for(b=0;b<4;++b){if(b===0&&(m=-u,l=-(o-e)),b===1&&(m=u,l=d-e),b===2&&(m=-a,l=-(c-n)),b===3&&(m=a,l=f-n),Math.abs(m)<1e-10&&l<0)return!1;if(T=l/m,m<0){if(T>w)return!1;T>_&&(_=T)}else if(m>0){if(T<_)return!1;T<w&&(w=T)}}return!0}function kp(t,e){t.globalCompositeOperation=e.blend||"source-over"}function Jr(t,e){return t==null?e:t}function d4(t,e){const n=e.length;for(let i=0;i<n;++i)t.addColorStop(e[i].offset,e[i].color);return t}function H_e(t,e,n){const i=n.width(),s=n.height();let o;if(e.gradient==="radial")o=t.createRadialGradient(n.x1+Jr(e.x1,.5)*i,n.y1+Jr(e.y1,.5)*s,Math.max(i,s)*Jr(e.r1,0),n.x1+Jr(e.x2,.5)*i,n.y1+Jr(e.y2,.5)*s,Math.max(i,s)*Jr(e.r2,.5));else{const c=Jr(e.x1,0),d=Jr(e.y1,0),f=Jr(e.x2,1),u=Jr(e.y2,0);if(c===f||d===u||i===s)o=t.createLinearGradient(n.x1+c*i,n.y1+d*s,n.x1+f*i,n.y1+u*s);else{const a=Uc(Math.ceil(i),Math.ceil(s)),_=a.getContext("2d");return _.scale(i,s),_.fillStyle=d4(_.createLinearGradient(c,d,f,u),e.stops),_.fillRect(0,0,i,s),t.createPattern(a,"no-repeat")}}return d4(o,e.stops)}function WV(t,e,n){return mA(n)?H_e(t,n,e.bounds):n}function Rv(t,e,n){return n*=e.fillOpacity==null?1:e.fillOpacity,n>0?(t.globalAlpha=n,t.fillStyle=WV(t,e,e.fill),!0):!1}var W_e=[];function Ip(t,e,n){var i=(i=e.strokeWidth)!=null?i:1;return i<=0?!1:(n*=e.strokeOpacity==null?1:e.strokeOpacity,n>0?(t.globalAlpha=n,t.strokeStyle=WV(t,e,e.stroke),t.lineWidth=i,t.lineCap=e.strokeCap||"butt",t.lineJoin=e.strokeJoin||"miter",t.miterLimit=e.strokeMiterLimit||10,t.setLineDash&&(t.setLineDash(e.strokeDash||W_e),t.lineDashOffset=e.strokeDashOffset||0),!0):!1)}function Y_e(t,e){return t.zindex-e.zindex||t.index-e.index}function xA(t){if(!t.zdirty)return t.zitems;var e=t.items,n=[],i,s,o;for(s=0,o=e.length;s<o;++s)i=e[s],i.index=s,i.zindex&&n.push(i);return t.zdirty=!1,t.zitems=n.sort(Y_e)}function Na(t,e){var n=t.items,i,s;if(!n||!n.length)return;const o=xA(t);if(o&&o.length){for(i=0,s=n.length;i<s;++i)n[i].zindex||e(n[i]);n=o}for(i=0,s=n.length;i<s;++i)e(n[i])}function Lv(t,e){var n=t.items,i,s;if(!n||!n.length)return null;const o=xA(t);for(o&&o.length&&(n=o),s=n.length;--s>=0;)if(i=e(n[s]))return i;if(n===o){for(n=t.items,s=n.length;--s>=0;)if(!n[s].zindex&&(i=e(n[s])))return i}return null}function BA(t){return function(e,n,i){Na(n,s=>{(!i||i.intersects(s.bounds))&&YV(t,e,s,s)})}}function X_e(t){return function(e,n,i){n.items.length&&(!i||i.intersects(n.bounds))&&YV(t,e,n.items[0],n.items)}}function YV(t,e,n,i){var s=n.opacity==null?1:n.opacity;s!==0&&(t(e,i)||(kp(e,n),n.fill&&Rv(e,n,s)&&e.fill(),n.stroke&&Ip(e,n,s)&&e.stroke()))}function IE(t){return t=t||zr,function(e,n,i,s,o,c){return i*=e.pixelRatio,s*=e.pixelRatio,Lv(n,d=>{const f=d.bounds;if(!(f&&!f.contains(o,c)||!f)&&t(e,d,i,s,o,c))return d})}}function Sm(t,e){return function(n,i,s,o){var c=Array.isArray(i)?i[0]:i,d=e==null?c.fill:e,f=c.stroke&&n.isPointInStroke,u,a;return f&&(u=c.strokeWidth,a=c.strokeCap,n.lineWidth=u!=null?u:1,n.lineCap=a!=null?a:"butt"),t(n,i)?!1:d&&n.isPointInPath(s,o)||f&&n.isPointInStroke(s,o)}}function kA(t){return IE(Sm(t))}function Pf(t,e){return"translate("+t+","+e+")"}function IA(t){return"rotate("+t+")"}function K_e(t,e){return"scale("+t+","+e+")"}function XV(t){return Pf(t.x||0,t.y||0)}function J_e(t){return Pf(t.x||0,t.y||0)+(t.angle?" "+IA(t.angle):"")}function Q_e(t){return Pf(t.x||0,t.y||0)+(t.angle?" "+IA(t.angle):"")+(t.scaleX||t.scaleY?" "+K_e(t.scaleX||1,t.scaleY||1):"")}function FA(t,e,n){function i(c,d){c("transform",J_e(d)),c("d",e(null,d))}function s(c,d){return e(Em(c,d.angle),d),Kl(c,d).translate(d.x||0,d.y||0)}function o(c,d){var f=d.x||0,u=d.y||0,a=d.angle||0;c.translate(f,u),a&&c.rotate(a*=ad),c.beginPath(),e(c,d),a&&c.rotate(-a),c.translate(-f,-u)}return{type:t,tag:"path",nested:!1,attr:i,bound:s,draw:BA(o),pick:kA(o),isect:n||EA(o)}}var Z_e=FA("arc",P_e);function eye(t,e){for(var n=t[0].orient==="horizontal"?e[1]:e[0],i=t[0].orient==="horizontal"?"y":"x",s=t.length,o=1/0,c,d;--s>=0;)t[s].defined!==!1&&(d=Math.abs(t[s][i]-n),d<o&&(o=d,c=t[s]));return c}function tye(t,e){for(var n=Math.pow(t[0].strokeWidth||1,2),i=t.length,s,o,c;--i>=0;)if(t[i].defined!==!1&&(s=t[i].x-e[0],o=t[i].y-e[1],c=s*s+o*o,c<n))return t[i];return null}function nye(t,e){for(var n=t.length,i,s,o;--n>=0;)if(t[n].defined!==!1&&(i=t[n].x-e[0],s=t[n].y-e[1],o=i*i+s*s,i=t[n].size||1,o<i*i))return t[n];return null}function OA(t,e,n){function i(f,u){var a=u.mark.items;a.length&&f("d",e(null,a))}function s(f,u){var a=u.items;return a.length===0?f:(e(Em(f),a),Kl(f,a[0]))}function o(f,u){f.beginPath(),e(f,u)}const c=Sm(o);function d(f,u,a,_,w,m){var l=u.items,T=u.bounds;return!l||!l.length||T&&!T.contains(w,m)?null:(a*=f.pixelRatio,_*=f.pixelRatio,c(f,l,a,_)?l[0]:null)}return{type:t,tag:"path",nested:!0,attr:i,bound:s,draw:X_e(o),pick:d,isect:SA,tip:n}}var iye=OA("area",D_e,eye);function sye(t,e){var n=e.clip;t.save(),wt(n)?(t.beginPath(),n(t),t.clip()):KV(t,e.group)}function KV(t,e){t.beginPath(),bA(e)?cg(t,e,0,0):t.rect(0,0,e.width||0,e.height||0),t.clip()}function JV(t){const e=Jr(t.strokeWidth,1);return t.strokeOffset!=null?t.strokeOffset:t.stroke&&e>.5&&e<1.5?.5-Math.abs(e-1):0}function rye(t,e){t("transform",XV(e))}function QV(t,e){const n=JV(e);t("d",cg(null,e,n,n))}function aye(t,e){t("class","background"),t("aria-hidden",!0),QV(t,e)}function oye(t,e){t("class","foreground"),t("aria-hidden",!0),e.strokeForeground?QV(t,e):t("d","")}function lye(t,e,n){const i=e.clip?TA(n,e,e):null;t("clip-path",i)}function cye(t,e){if(!e.clip&&e.items){const n=e.items,i=n.length;for(let s=0;s<i;++s)t.union(n[s].bounds)}return(e.clip||e.width||e.height)&&!e.noBound&&t.add(0,0).add(e.width||0,e.height||0),Kl(t,e),t.translate(e.x||0,e.y||0)}function _y(t,e,n,i){const s=JV(e);t.beginPath(),cg(t,e,(n||0)+s,(i||0)+s)}const dye=Sm(_y),fye=Sm(_y,!1),uye=Sm(_y,!0);function hye(t,e,n){Na(e,i=>{const s=i.x||0,o=i.y||0,c=i.strokeForeground,d=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&d&&(_y(t,i,s,o),kp(t,i),i.fill&&Rv(t,i,d)&&t.fill(),i.stroke&&!c&&Ip(t,i,d)&&t.stroke()),t.save(),t.translate(s,o),i.clip&&KV(t,i),n&&n.translate(-s,-o),Na(i,f=>{this.draw(t,f,n)}),n&&n.translate(s,o),t.restore(),c&&i.stroke&&d&&(_y(t,i,s,o),kp(t,i),Ip(t,i,d)&&t.stroke())})}function pye(t,e,n,i,s,o){if(e.bounds&&!e.bounds.contains(s,o)||!e.items)return null;const c=n*t.pixelRatio,d=i*t.pixelRatio;return Lv(e,f=>{let u,a,_;const w=f.bounds;if(w&&!w.contains(s,o))return;a=f.x||0,_=f.y||0;const m=a+(f.width||0),l=_+(f.height||0),T=f.clip;if(T&&(s<a||s>m||o<_||o>l))return;if(t.save(),t.translate(a,_),a=s-a,_=o-_,T&&bA(f)&&!uye(t,f,c,d))return t.restore(),null;const b=f.strokeForeground,S=e.interactive!==!1;return S&&b&&f.stroke&&fye(t,f,c,d)?(t.restore(),f):(u=Lv(f,x=>gye(x,a,_)?this.pick(x,n,i,a,_):null),!u&&S&&(f.fill||!b&&f.stroke)&&dye(t,f,c,d)&&(u=f),t.restore(),u||null)})}function gye(t,e,n){return(t.interactive!==!1||t.marktype==="group")&&t.bounds&&t.bounds.contains(e,n)}var _ye={type:"group",tag:"g",nested:!1,attr:rye,bound:cye,draw:hye,pick:pye,isect:VV,content:lye,background:aye,foreground:oye},yy={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function MA(t,e){var n=t.image;return(!n||t.url&&t.url!==n.url)&&(n={complete:!1,width:0,height:0},e.loadImage(t.url).then(i=>{t.image=i,t.image.url=t.url})),n}function AA(t,e){return t.width!=null?t.width:!e||!e.width?0:t.aspect!==!1&&t.height?t.height*e.width/e.height:e.width}function NA(t,e){return t.height!=null?t.height:!e||!e.height?0:t.aspect!==!1&&t.width?t.width*e.height/e.width:e.height}function FE(t,e){return t==="center"?e/2:t==="right"?e:0}function OE(t,e){return t==="middle"?e/2:t==="bottom"?e:0}function yye(t,e,n){const i=MA(e,n),s=AA(e,i),o=NA(e,i),c=(e.x||0)-FE(e.align,s),d=(e.y||0)-OE(e.baseline,o),f=!i.src&&i.toDataURL?i.toDataURL():i.src||"";t("href",f,yy["xmlns:xlink"],"xlink:href"),t("transform",Pf(c,d)),t("width",s),t("height",o),t("preserveAspectRatio",e.aspect===!1?"none":"xMidYMid")}function mye(t,e){const n=e.image,i=AA(e,n),s=NA(e,n),o=(e.x||0)-FE(e.align,i),c=(e.y||0)-OE(e.baseline,s);return t.set(o,c,o+i,c+s)}function wye(t,e,n){Na(e,i=>{if(n&&!n.intersects(i.bounds))return;const s=MA(i,this);let o=AA(i,s),c=NA(i,s);if(o===0||c===0)return;let d=(i.x||0)-FE(i.align,o),f=(i.y||0)-OE(i.baseline,c),u,a,_,w;i.aspect!==!1&&(a=s.width/s.height,_=i.width/i.height,a===a&&_===_&&a!==_&&(_<a?(w=o/a,f+=(c-w)/2,c=w):(w=c*a,d+=(o-w)/2,o=w))),(s.complete||s.toDataURL)&&(kp(t,i),t.globalAlpha=(u=i.opacity)!=null?u:1,t.imageSmoothingEnabled=i.smooth!==!1,t.drawImage(s,d,f,o,c))})}var bye={type:"image",tag:"image",nested:!1,attr:yye,bound:mye,draw:wye,pick:IE(),isect:zr,get:MA,xOffset:FE,yOffset:OE},Tye=OA("line",j_e,tye);function vye(t,e){var n=e.scaleX||1,i=e.scaleY||1;(n!==1||i!==1)&&t("vector-effect","non-scaling-stroke"),t("transform",Q_e(e)),t("d",e.path)}function O0(t,e){var n=e.path;if(n==null)return!0;var i=e.x||0,s=e.y||0,o=e.scaleX||1,c=e.scaleY||1,d=(e.angle||0)*ad,f=e.pathCache;(!f||f.path!==n)&&((e.pathCache=f=Bp(n)).path=n),d&&t.rotate&&t.translate?(t.translate(i,s),t.rotate(d),gy(t,f,0,0,o,c),t.rotate(-d),t.translate(-i,-s)):gy(t,f,i,s,o,c)}function Eye(t,e){return O0(Em(t,e.angle),e)?t.set(0,0,0,0):Kl(t,e,!0)}var Sye={type:"path",tag:"path",nested:!1,attr:vye,bound:Eye,draw:BA(O0),pick:kA(O0),isect:EA(O0)};function xye(t,e){t("d",cg(null,e))}function Bye(t,e){var n,i;return Kl(t.set(n=e.x||0,i=e.y||0,n+e.width||0,i+e.height||0),e)}function f4(t,e){t.beginPath(),cg(t,e)}var kye={type:"rect",tag:"path",nested:!1,attr:xye,bound:Bye,draw:BA(f4),pick:kA(f4),isect:VV};function Iye(t,e){t("transform",XV(e)),t("x2",e.x2!=null?e.x2-(e.x||0):0),t("y2",e.y2!=null?e.y2-(e.y||0):0)}function Fye(t,e){var n,i;return Kl(t.set(n=e.x||0,i=e.y||0,e.x2!=null?e.x2:n,e.y2!=null?e.y2:i),e)}function ZV(t,e,n){var i,s,o,c;return e.stroke&&Ip(t,e,n)?(i=e.x||0,s=e.y||0,o=e.x2!=null?e.x2:i,c=e.y2!=null?e.y2:s,t.beginPath(),t.moveTo(i,s),t.lineTo(o,c),!0):!1}function Oye(t,e,n){Na(e,i=>{if(!(n&&!n.intersects(i.bounds))){var s=i.opacity==null?1:i.opacity;s&&ZV(t,i,s)&&(kp(t,i),t.stroke())}})}function Mye(t,e,n,i){return t.isPointInStroke?ZV(t,e,1)&&t.isPointInStroke(n,i):!1}var Aye={type:"rule",tag:"line",nested:!1,attr:Iye,bound:Fye,draw:Oye,pick:IE(Mye),isect:HV},Nye=FA("shape",U_e),Cye=FA("symbol",z_e,SA);const u4=Z9();var Ea={height:Ko,measureWidth:CA,estimateWidth:cI,width:cI,canvas:eH};eH(!0);function eH(t){Ea.width=t&&zc?CA:cI}function cI(t,e){return tH(ld(t,e),Ko(t))}function tH(t,e){return~~(.8*t.length*e)}function CA(t,e){return Ko(t)<=0||!(e=ld(t,e))?0:nH(e,ME(t))}function nH(t,e){const n="(".concat(e,") ").concat(t);let i=u4.get(n);return i===void 0&&(zc.font=e,i=zc.measureText(t).width,u4.set(n,i)),i}function Ko(t){return t.fontSize!=null?+t.fontSize||0:11}function od(t){return t.lineHeight!=null?t.lineHeight:Ko(t)+2}function Rye(t){return he(t)?t.length>1?t:t[0]:t}function xm(t){return Rye(t.lineBreak&&t.text&&!he(t.text)?t.text.split(t.lineBreak):t.text)}function RA(t){const e=xm(t);return(he(e)?e.length-1:0)*od(t)}function ld(t,e){const n=e==null?"":(e+"").trim();return t.limit>0&&n.length?Pye(t,n):n}function Lye(t){if(Ea.width===CA){const e=ME(t);return n=>nH(n,e)}else{const e=Ko(t);return n=>tH(n,e)}}function Pye(t,e){var n=+t.limit,i=Lye(t);if(i(e)<n)return e;var s=t.ellipsis||"\u2026",o=t.dir==="rtl",c=0,d=e.length,f;if(n-=i(s),o){for(;c<d;)f=c+d>>>1,i(e.slice(f))>n?c=f+1:d=f;return s+e.slice(c)}else{for(;c<d;)f=1+(c+d>>>1),i(e.slice(0,f))<n?c=f:d=f-1;return e.slice(0,c)+s}}function Bm(t,e){var n=t.font;return(e&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function ME(t,e){return(t.fontStyle?t.fontStyle+" ":"")+(t.fontVariant?t.fontVariant+" ":"")+(t.fontWeight?t.fontWeight+" ":"")+Ko(t)+"px "+Bm(t,e)}function LA(t){var e=t.baseline,n=Ko(t);return Math.round(e==="top"?.79*n:e==="middle"?.3*n:e==="bottom"?-.21*n:e==="line-top"?.29*n+.5*od(t):e==="line-bottom"?.29*n-.5*od(t):0)}const Dye={left:"start",center:"middle",right:"end"},M_=new Un;function AE(t){var e=t.x||0,n=t.y||0,i=t.radius||0,s;return i&&(s=(t.theta||0)-cf,e+=i*Math.cos(s),n+=i*Math.sin(s)),M_.x1=e,M_.y1=n,M_}function jye(t,e){var n=e.dx||0,i=(e.dy||0)+LA(e),s=AE(e),o=s.x1,c=s.y1,d=e.angle||0,f;t("text-anchor",Dye[e.align]||"start"),d?(f=Pf(o,c)+" "+IA(d),(n||i)&&(f+=" "+Pf(n,i))):f=Pf(o+n,c+i),t("transform",f)}function PA(t,e,n){var i=Ea.height(e),s=e.align,o=AE(e),c=o.x1,d=o.y1,f=e.dx||0,u=(e.dy||0)+LA(e)-Math.round(.8*i),a=xm(e),_;if(he(a)?(i+=od(e)*(a.length-1),_=a.reduce((w,m)=>Math.max(w,Ea.width(e,m)),0)):_=Ea.width(e,a),s==="center"?f-=_/2:s==="right"&&(f-=_),t.set(f+=c,u+=d,f+_,u+i),e.angle&&!n)t.rotate(e.angle*ad,c,d);else if(n===2)return t.rotatedPoints(e.angle*ad,c,d);return t}function Uye(t,e,n){Na(e,i=>{var s=i.opacity==null?1:i.opacity,o,c,d,f,u,a,_;if(!(n&&!n.intersects(i.bounds)||s===0||i.fontSize<=0||i.text==null||i.text.length===0)){if(t.font=ME(i),t.textAlign=i.align||"left",o=AE(i),c=o.x1,d=o.y1,i.angle&&(t.save(),t.translate(c,d),t.rotate(i.angle*ad),c=d=0),c+=i.dx||0,d+=(i.dy||0)+LA(i),a=xm(i),kp(t,i),he(a))for(u=od(i),f=0;f<a.length;++f)_=ld(i,a[f]),i.fill&&Rv(t,i,s)&&t.fillText(_,c,d),i.stroke&&Ip(t,i,s)&&t.strokeText(_,c,d),d+=u;else _=ld(i,a),i.fill&&Rv(t,i,s)&&t.fillText(_,c,d),i.stroke&&Ip(t,i,s)&&t.strokeText(_,c,d);i.angle&&t.restore()}})}function zye(t,e,n,i,s,o){if(e.fontSize<=0)return!1;if(!e.angle)return!0;var c=AE(e),d=c.x1,f=c.y1,u=PA(M_,e,1),a=-e.angle*ad,_=Math.cos(a),w=Math.sin(a),m=_*s-w*o+(d-_*d+w*f),l=w*s+_*o+(f-w*d-_*f);return u.contains(m,l)}function $ye(t,e){const n=PA(M_,t,2);return vh(e,n[0],n[1],n[2],n[3])||vh(e,n[0],n[1],n[4],n[5])||vh(e,n[4],n[5],n[6],n[7])||vh(e,n[2],n[3],n[6],n[7])}var qye={type:"text",tag:"text",nested:!1,attr:jye,bound:PA,draw:Uye,pick:IE(zye),isect:$ye},Gye=OA("trail",$_e,nye),ur={arc:Z_e,area:iye,group:_ye,image:bye,line:Tye,path:Sye,rect:kye,rule:Aye,shape:Nye,symbol:Cye,text:qye,trail:Gye};function dI(t,e,n){var i=ur[t.mark.marktype],s=e||i.bound;return i.nested&&(t=t.mark),s(t.bounds||(t.bounds=new Un),t,n)}var h4={mark:null};function iH(t,e,n){var i=ur[t.marktype],s=i.bound,o=t.items,c=o&&o.length,d,f,u,a;if(i.nested)return c?u=o[0]:(h4.mark=t,u=h4),a=dI(u,s,n),e=e&&e.union(a)||a,e;if(e=e||t.bounds&&t.bounds.clear()||new Un,c)for(d=0,f=o.length;d<f;++d)e.union(dI(o[d],s,n));return t.bounds=e}const Vye=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function sH(t,e){return JSON.stringify(t,Vye,e)}function rH(t){const e=typeof t=="string"?JSON.parse(t):t;return aH(e)}function aH(t){var e=t.marktype,n=t.items,i,s,o;if(n)for(s=0,o=n.length;s<o;++s)i=e?"mark":"group",n[s][i]=t,n[s].zindex&&(n[s][i].zdirty=!0),(e||i)==="group"&&aH(n[s]);return e&&iH(t),t}function DA(t){arguments.length?this.root=rH(t):(this.root=oH({marktype:"group",name:"root",role:"frame"}),this.root.items=[new BE(this.root)])}DA.prototype={toJSON(t){return sH(this.root,t||0)},mark(t,e,n){e=e||this.root.items[0];const i=oH(t,e);return e.items[n]=i,i.zindex&&(i.group.zdirty=!0),i}};function oH(t,e){const n={bounds:new Un,clip:!!t.clip,group:e,interactive:t.interactive!==!1,items:[],marktype:t.marktype,name:t.name||void 0,role:t.role||void 0,zindex:t.zindex||0};return t.aria!=null&&(n.aria=t.aria),t.description&&(n.description=t.description),n}function kc(t,e,n){return!t&&typeof document<"u"&&document.createElement&&(t=document),t?n?t.createElementNS(n,e):t.createElement(e):null}function jA(t,e){e=e.toLowerCase();for(var n=t.childNodes,i=0,s=n.length;i<s;++i)if(n[i].tagName.toLowerCase()===e)return n[i]}function Bs(t,e,n,i){var s=t.childNodes[e],o;return(!s||s.tagName.toLowerCase()!==n.toLowerCase())&&(o=s||null,s=kc(t.ownerDocument,n,i),t.insertBefore(s,o)),s}function pa(t,e){for(var n=t.childNodes,i=n.length;i>e;)t.removeChild(n[--i]);return t}function lH(t){return"mark-"+t.marktype+(t.role?" role-"+t.role:"")+(t.name?" "+t.name:"")}function NE(t,e){const n=e.getBoundingClientRect();return[t.clientX-n.left-(e.clientLeft||0),t.clientY-n.top-(e.clientTop||0)]}function Hye(t,e,n,i){var s=t&&t.mark,o,c;if(s&&(o=ur[s.marktype]).tip){for(c=NE(e,n),c[0]-=i[0],c[1]-=i[1];t=t.mark.group;)c[0]-=t.x||0,c[1]-=t.y||0;t=o.tip(s.items,c)}return t}function cd(t,e){this._active=null,this._handlers={},this._loader=t||hE(),this._tooltip=e||Wye}function Wye(t,e,n,i){t.element().setAttribute("title",i||"")}cd.prototype={initialize(t,e,n){return this._el=t,this._obj=n||null,this.origin(e)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()},scene(t){return arguments.length?(this._scene=t,this):this._scene},on(){},off(){},_handlerIndex(t,e,n){for(let i=t?t.length:0;--i>=0;)if(t[i].type===e&&(!n||t[i].handler===n))return i;return-1},handlers(t){const e=this._handlers,n=[];if(t)n.push(...e[this.eventName(t)]);else for(const i in e)n.push(...e[i]);return n},eventName(t){const e=t.indexOf(".");return e<0?t:t.slice(0,e)},handleHref(t,e,n){this._loader.sanitize(n,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=kc(null,"a");for(const c in i)o.setAttribute(c,i[c]);o.dispatchEvent(s)}).catch(()=>{})},handleTooltip(t,e,n){if(e&&e.tooltip!=null){e=Hye(e,t,this.canvas(),this._origin);const i=n&&e&&e.tooltip||null;this._tooltip.call(this._obj,this,t,e,i)}},getItemBoundingClientRect(t){const e=this.canvas();if(!e)return;const n=e.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),c=s.height();let d=s.x1+i[0]+n.left,f=s.y1+i[1]+n.top;for(;t.mark&&(t=t.mark.group);)d+=t.x||0,f+=t.y||0;return{x:d,y:f,width:o,height:c,left:d,top:f,right:d+o,bottom:f+c}}};function Jo(t){this._el=null,this._bgcolor=null,this._loader=new vA(t)}Jo.prototype={initialize(t,e,n,i,s){return this._el=t,this.resize(e,n,i,s)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)},resize(t,e,n,i){return this._width=t,this._height=e,this._origin=n||[0,0],this._scale=i||1,this},dirty(){},render(t){const e=this;return e._call=function(){e._render(t)},e._call(),e._call=null,e},_render(){},renderAsync(t){const e=this.render(t);return this._ready?this._ready.then(()=>e):Promise.resolve(e)},_load(t,e){var n=this,i=n._loader[t](e);if(!n._ready){const s=n._call;n._ready=n._loader.ready().then(o=>{o&&s(),n._ready=null})}return i},sanitizeURL(t){return this._load("sanitizeURL",t)},loadImage(t){return this._load("loadImage",t)}};const Yye="keydown",Xye="keypress",Kye="keyup",cH="dragenter",M0="dragleave",dH="dragover",fI="mousedown",Jye="mouseup",Pv="mousemove",A_="mouseout",fH="mouseover",Dv="click",Qye="dblclick",Zye="wheel",uH="mousewheel",jv="touchstart",Uv="touchmove",zv="touchend",eme=[Yye,Xye,Kye,cH,M0,dH,fI,Jye,Pv,A_,fH,Dv,Qye,Zye,uH,jv,Uv,zv],uI=Pv,my=A_,hI=Dv;function km(t,e){cd.call(this,t,e),this._down=null,this._touch=null,this._first=!0,this._events={}}const tme=t=>t===jv||t===Uv||t===zv?[jv,Uv,zv]:[t];function p4(t,e){tme(e).forEach(n=>nme(t,n))}function nme(t,e){const n=t.canvas();n&&!t._events[e]&&(t._events[e]=1,n.addEventListener(e,t[e]?i=>t[e](i):i=>t.fire(e,i)))}function g4(t,e,n){return function(i){const s=this._active,o=this.pickEvent(i);o===s?this.fire(t,i):((!s||!s.exit)&&this.fire(n,i),this._active=o,this.fire(e,i),this.fire(t,i))}}function _4(t){return function(e){this.fire(t,e),this._active=null}}ve(km,cd,{initialize(t,e,n){return this._canvas=t&&jA(t,"canvas"),[Dv,fI,Pv,A_,M0].forEach(i=>p4(this,i)),cd.prototype.initialize.call(this,t,e,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:eme,DOMMouseScroll(t){this.fire(uH,t)},mousemove:g4(Pv,fH,A_),dragover:g4(dH,cH,M0),mouseout:_4(A_),dragleave:_4(M0),mousedown(t){this._down=this._active,this.fire(fI,t)},click(t){this._down===this._active&&(this.fire(Dv,t),this._down=null)},touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(jv,t,!0)},touchmove(t){this.fire(Uv,t,!0)},touchend(t){this.fire(zv,t,!0),this._touch=null},fire(t,e,n){const i=n?this._touch:this._active,s=this._handlers[t];if(e.vegaType=t,t===hI&&i&&i.href?this.handleHref(e,i,i.href):(t===uI||t===my)&&this.handleTooltip(e,i,t!==my),s)for(let o=0,c=s.length;o<c;++o)s[o].handler.call(this._obj,e,i)},on(t,e){const n=this.eventName(t),i=this._handlers;return this._handlerIndex(i[n],t,e)<0&&(p4(this,t),(i[n]||(i[n]=[])).push({type:t,handler:e})),this},off(t,e){const n=this.eventName(t),i=this._handlers[n],s=this._handlerIndex(i,t,e);return s>=0&&i.splice(s,1),this},pickEvent(t){const e=NE(t,this._canvas),n=this._origin;return this.pick(this._scene,e[0],e[1],e[0]-n[0],e[1]-n[1])},pick(t,e,n,i,s){const o=this.context();return ur[t.marktype].pick.call(this,o,t,e,n,i,s)}});function ime(){return typeof window<"u"&&window.devicePixelRatio||1}var sme=ime();function rme(t,e,n,i,s,o){const c=typeof HTMLElement<"u"&&t instanceof HTMLElement&&t.parentNode!=null,d=t.getContext("2d"),f=c?sme:s;t.width=e*f,t.height=n*f;for(const u in o)d[u]=o[u];return c&&f!==1&&(t.style.width=e+"px",t.style.height=n+"px"),d.pixelRatio=f,d.setTransform(f,0,0,f,f*i[0],f*i[1]),t}function $v(t){Jo.call(this,t),this._options={},this._redraw=!1,this._dirty=new Un,this._tempb=new Un}const y4=Jo.prototype,ame=(t,e,n)=>new Un().set(0,0,e,n).translate(-t[0],-t[1]);function ome(t,e,n){return e.expand(1).round(),t.pixelRatio%1&&e.scale(t.pixelRatio).round().scale(1/t.pixelRatio),e.translate(-(n[0]%1),-(n[1]%1)),t.beginPath(),t.rect(e.x1,e.y1,e.width(),e.height()),t.clip(),e}ve($v,Jo,{initialize(t,e,n,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:Uc(1,1,this._options.type),t&&this._canvas&&(pa(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),y4.initialize.call(this,t,e,n,i,s)},resize(t,e,n,i){if(y4.resize.call(this,t,e,n,i),this._canvas)rme(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||de("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(t){const e=this._tempb.clear().union(t.bounds);let n=t.mark.group;for(;n;)e.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(e)},_render(t){const e=this.context(),n=this._origin,i=this._width,s=this._height,o=this._dirty,c=ame(n,i,s);e.save();const d=this._redraw||o.empty()?(this._redraw=!1,c.expand(1)):ome(e,c.intersect(o),n);return this.clear(-n[0],-n[1],i,s),this.draw(e,t,d),e.restore(),o.clear(),this},draw(t,e,n){const i=ur[e.marktype];e.clip&&sye(t,e),i.draw.call(this,t,e,n),e.clip&&t.restore()},clear(t,e,n,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,e,n,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,e,n,i))}});function UA(t,e){cd.call(this,t,e);const n=this;n._hrefHandler=pI(n,(i,s)=>{s&&s.href&&n.handleHref(i,s,s.href)}),n._tooltipHandler=pI(n,(i,s)=>{n.handleTooltip(i,s,i.type!==my)})}const pI=(t,e)=>n=>{let i=n.target.__data__;i=Array.isArray(i)?i[0]:i,n.vegaType=n.type,e.call(t._obj,n,i)};ve(UA,cd,{initialize(t,e,n){let i=this._svg;return i&&(i.removeEventListener(hI,this._hrefHandler),i.removeEventListener(uI,this._tooltipHandler),i.removeEventListener(my,this._tooltipHandler)),this._svg=i=t&&jA(t,"svg"),i&&(i.addEventListener(hI,this._hrefHandler),i.addEventListener(uI,this._tooltipHandler),i.addEventListener(my,this._tooltipHandler)),cd.prototype.initialize.call(this,t,e,n)},canvas(){return this._svg},on(t,e){const n=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[n],t,e)<0){const o={type:t,handler:e,listener:pI(this,e)};(i[n]||(i[n]=[])).push(o),this._svg&&this._svg.addEventListener(n,o.listener)}return this},off(t,e){const n=this.eventName(t),i=this._handlers[n],s=this._handlerIndex(i,t,e);return s>=0&&(this._svg&&this._svg.removeEventListener(n,i[s].listener),i.splice(s,1)),this}});const hH="aria-hidden",zA="aria-label",$A="role",qA="aria-roledescription",pH="graphics-object",GA="graphics-symbol",gH=(t,e,n)=>({[$A]:t,[qA]:e,[zA]:n||void 0}),lme=Ma(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),m4={axis:{desc:"axis",caption:fme},legend:{desc:"legend",caption:ume},"title-text":{desc:"title",caption:t=>"Title text '".concat(b4(t),"'")},"title-subtitle":{desc:"subtitle",caption:t=>"Subtitle text '".concat(b4(t),"'")}},w4={ariaRole:$A,ariaRoleDescription:qA,description:zA};function _H(t,e){const n=e.aria===!1;if(t(hH,n||void 0),n||e.description==null)for(const i in w4)t(w4[i],void 0);else{const i=e.mark.marktype;t(zA,e.description),t($A,e.ariaRole||(i==="group"?pH:GA)),t(qA,e.ariaRoleDescription||"".concat(i," mark"))}}function yH(t){return t.aria===!1?{[hH]:!0}:lme[t.role]?null:m4[t.role]?dme(t,m4[t.role]):cme(t)}function cme(t){const e=t.marktype,n=e==="group"||e==="text"||t.items.some(i=>i.description!=null&&i.aria!==!1);return gH(n?pH:GA,"".concat(e," mark container"),t.description)}function dme(t,e){try{const n=t.items[0],i=e.caption||(()=>"");return gH(e.role||GA,e.desc,n.description||i(n))}catch{return null}}function b4(t){return Ie(t.text).join(" ")}function fme(t){const e=t.datum,n=t.orient,i=e.title?mH(t):null,s=t.context,o=s.scales[e.scale].value,c=s.dataflow.locale(),d=o.type,f=n==="left"||n==="right"?"Y":"X";return"".concat(f,"-axis")+(i?" titled '".concat(i,"'"):"")+" for a ".concat(xp(d)?"discrete":d," scale")+" with ".concat(RV(c,o,t))}function ume(t){const e=t.datum,n=e.title?mH(t):null,i="".concat(e.type||""," legend").trim(),s=e.scales,o=Object.keys(s),c=t.context,d=c.scales[s[o[0]]].value,f=c.dataflow.locale();return pme(i)+(n?" titled '".concat(n,"'"):"")+" for ".concat(hme(o))+" with ".concat(RV(f,d,t))}function mH(t){try{return Ie(Rt(t.items).items[0].text).join(" ")}catch{return null}}function hme(t){return t=t.map(e=>e+(e==="fill"||e==="stroke"?" color":"")),t.length<2?t[0]:t.slice(0,-1).join(", ")+" and "+Rt(t)}function pme(t){return t.length?t[0].toUpperCase()+t.slice(1):t}const wH=t=>(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),gme=t=>wH(t).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function VA(){let t="",e="",n="";const i=[],s=()=>e=n="",o=f=>{e&&(t+="".concat(e,">").concat(n),s()),i.push(f)},c=(f,u)=>(u!=null&&(e+=" ".concat(f,'="').concat(gme(u),'"')),d),d={open(f){o(f),e="<"+f;for(var u=arguments.length,a=new Array(u>1?u-1:0),_=1;_<u;_++)a[_-1]=arguments[_];for(const w of a)for(const m in w)c(m,w[m]);return d},close(){const f=i.pop();return e?t+=e+(n?">".concat(n,"</").concat(f,">"):"/>"):t+="</".concat(f,">"),s(),d},attr:c,text:f=>(n+=wH(f),d),toString:()=>t};return d}const bH=t=>TH(VA(),t)+"";function TH(t,e){if(t.open(e.tagName),e.hasAttributes()){const n=e.attributes,i=n.length;for(let s=0;s<i;++s)t.attr(n[s].name,n[s].value)}if(e.hasChildNodes()){const n=e.childNodes;for(const i of n)i.nodeType===3?t.text(i.nodeValue):TH(t,i)}return t.close()}const qv={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},Gv={blend:"mix-blend-mode"},vH={fill:"none","stroke-miterlimit":10},Pg=0,T4="http://www.w3.org/2000/xmlns/",Kn=yy.xmlns;function HA(t){Jo.call(this,t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const qx=Jo.prototype;ve(HA,Jo,{initialize(t,e,n,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=Bs(t,0,"svg",Kn),this._svg.setAttributeNS(T4,"xmlns",Kn),this._svg.setAttributeNS(T4,"xmlns:xlink",yy["xmlns:xlink"]),this._svg.setAttribute("version",yy.version),this._svg.setAttribute("class","marks"),pa(t,1),this._root=Bs(this._svg,Pg,"g",Kn),Ic(this._root,vH),pa(this._svg,Pg+1)),this.background(this._bgcolor),qx.initialize.call(this,t,e,n,i,s)},background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),qx.background.apply(this,arguments)},resize(t,e,n,i){return qx.resize.call(this,t,e,n,i),this._svg&&(Ic(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}),this._root.setAttribute("transform","translate(".concat(this._origin,")"))),this._dirty=[],this},canvas(){return this._svg},svg(){const t=this._svg,e=this._bgcolor;if(!t)return null;let n;e&&(t.removeAttribute("style"),n=Bs(t,Pg,"rect",Kn),Ic(n,{width:this._width,height:this._height,fill:e}));const i=bH(t);return e&&(t.removeChild(n),this._svg.style.setProperty("background-color",e)),i},_render(t){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t),pa(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))},isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const e=++this._dirtyID;let n,i,s,o,c,d,f;for(c=0,d=t.length;c<d;++c)if(n=t[c],i=n.mark,i.marktype!==s&&(s=i.marktype,o=ur[s]),i.zdirty&&i.dirty!==e&&(this._dirtyAll=!1,v4(n,e),i.items.forEach(u=>{u.dirty=e})),!i.zdirty){if(n.exit){o.nested&&i.items.length?(f=i.items[0],f._svg&&this._update(o,f._svg,f)):n._svg&&(f=n._svg.parentNode,f&&f.removeChild(n._svg)),n._svg=null;continue}n=o.nested?i.items[0]:n,n._update!==e&&(!n._svg||!n._svg.ownerSVGElement?(this._dirtyAll=!1,v4(n,e)):this._update(o,n._svg,n),n._update=e)}return!this._dirtyAll},mark(t,e,n){if(!this.isDirty(e))return e._svg;const i=this._svg,s=ur[e.marktype],o=e.interactive===!1?"none":null,c=s.tag==="g",d=E4(e,t,n,"g",i);d.setAttribute("class",lH(e));const f=yH(e);for(const w in f)Qi(d,w,f[w]);c||Qi(d,"pointer-events",o),Qi(d,"clip-path",e.clip?TA(this,e,e.group):null);let u=null,a=0;const _=w=>{const m=this.isDirty(w),l=E4(w,d,u,s.tag,i);m&&(this._update(s,l,w),c&&mme(this,l,w)),u=l,++a};return s.nested?e.items.length&&_(e.items[0]):Na(e,_),pa(d,a),d},_update(t,e,n){Fl=e,Ni=e.__values__,_H(N_,n),t.attr(N_,n,this);const i=bme[t.type];i&&i.call(this,t,e,n),Fl&&this.style(Fl,n)},style(t,e){if(e!=null){for(const n in qv){let i=n==="font"?Bm(e):e[n];if(i===Ni[n])continue;const s=qv[n];i==null?t.removeAttribute(s):(mA(i)&&(i=PV(i,this._defs.gradient,EH())),t.setAttribute(s,i+"")),Ni[n]=i}for(const n in Gv)A0(t,Gv[n],e[n])}},defs(){const t=this._svg,e=this._defs;let n=e.el,i=0;for(const s in e.gradient)n||(e.el=n=Bs(t,Pg+1,"defs",Kn)),i=_me(n,e.gradient[s],i);for(const s in e.clipping)n||(e.el=n=Bs(t,Pg+1,"defs",Kn)),i=yme(n,e.clipping[s],i);n&&(i===0?(t.removeChild(n),e.el=null):pa(n,i))},_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}});function v4(t,e){for(;t&&t.dirty!==e;t=t.mark.group)if(t.dirty=e,t.mark&&t.mark.dirty!==e)t.mark.dirty=e;else return}function _me(t,e,n){let i,s,o;if(e.gradient==="radial"){let c=Bs(t,n++,"pattern",Kn);Ic(c,{id:Cv+e.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),c=Bs(c,0,"rect",Kn),Ic(c,{width:1,height:1,fill:"url(".concat(EH(),"#").concat(e.id,")")}),t=Bs(t,n++,"radialGradient",Kn),Ic(t,{id:e.id,fx:e.x1,fy:e.y1,fr:e.r1,cx:e.x2,cy:e.y2,r:e.r2})}else t=Bs(t,n++,"linearGradient",Kn),Ic(t,{id:e.id,x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2});for(i=0,s=e.stops.length;i<s;++i)o=Bs(t,i,"stop",Kn),o.setAttribute("offset",e.stops[i].offset),o.setAttribute("stop-color",e.stops[i].color);return pa(t,i),n}function yme(t,e,n){let i;return t=Bs(t,n,"clipPath",Kn),t.setAttribute("id",e.id),e.path?(i=Bs(t,0,"path",Kn),i.setAttribute("d",e.path)):(i=Bs(t,0,"rect",Kn),Ic(i,{x:0,y:0,width:e.width,height:e.height})),pa(t,1),n+1}function mme(t,e,n){e=e.lastChild.previousSibling;let i,s=0;Na(n,o=>{i=t.mark(e,o,i),++s}),pa(e,1+s)}function E4(t,e,n,i,s){let o=t._svg,c;if(!o&&(c=e.ownerDocument,o=kc(c,i,Kn),t._svg=o,t.mark&&(o.__data__=t,o.__values__={fill:"default"},i==="g"))){const d=kc(c,"path",Kn);o.appendChild(d),d.__data__=t;const f=kc(c,"g",Kn);o.appendChild(f),f.__data__=t;const u=kc(c,"path",Kn);o.appendChild(u),u.__data__=t,u.__values__={fill:"default"}}return(o.ownerSVGElement!==s||wme(o,n))&&e.insertBefore(o,n?n.nextSibling:e.firstChild),o}function wme(t,e){return t.parentNode&&t.parentNode.childNodes.length>1&&t.previousSibling!=e}let Fl=null,Ni=null;const bme={group(t,e,n){const i=Fl=e.childNodes[2];Ni=i.__values__,t.foreground(N_,n,this),Ni=e.__values__,Fl=e.childNodes[1],t.content(N_,n,this);const s=Fl=e.childNodes[0];t.background(N_,n,this);const o=n.mark.interactive===!1?"none":null;if(o!==Ni.events&&(Qi(i,"pointer-events",o),Qi(s,"pointer-events",o),Ni.events=o),n.strokeForeground&&n.stroke){const c=n.fill;Qi(i,"display",null),this.style(s,n),Qi(s,"stroke",null),c&&(n.fill=null),Ni=i.__values__,this.style(i,n),c&&(n.fill=c),Fl=null}else Qi(i,"display","none")},image(t,e,n){n.smooth===!1?(A0(e,"image-rendering","optimizeSpeed"),A0(e,"image-rendering","pixelated")):A0(e,"image-rendering",null)},text(t,e,n){const i=xm(n);let s,o,c,d;he(i)?(o=i.map(f=>ld(n,f)),s=o.join(`
`),s!==Ni.text&&(pa(e,0),c=e.ownerDocument,d=od(n),o.forEach((f,u)=>{const a=kc(c,"tspan",Kn);a.__data__=n,a.textContent=f,u&&(a.setAttribute("x",0),a.setAttribute("dy",d)),e.appendChild(a)}),Ni.text=s)):(o=ld(n,i),o!==Ni.text&&(e.textContent=o,Ni.text=o)),Qi(e,"font-family",Bm(n)),Qi(e,"font-size",Ko(n)+"px"),Qi(e,"font-style",n.fontStyle),Qi(e,"font-variant",n.fontVariant),Qi(e,"font-weight",n.fontWeight)}};function N_(t,e,n){e!==Ni[t]&&(n?Tme(Fl,t,e,n):Qi(Fl,t,e),Ni[t]=e)}function A0(t,e,n){n!==Ni[e]&&(n==null?t.style.removeProperty(e):t.style.setProperty(e,n+""),Ni[e]=n)}function Ic(t,e){for(const n in e)Qi(t,n,e[n])}function Qi(t,e,n){n!=null?t.setAttribute(e,n):t.removeAttribute(e)}function Tme(t,e,n,i){n!=null?t.setAttributeNS(i,e,n):t.removeAttributeNS(i,e)}function EH(){let t;return typeof window>"u"?"":(t=window.location).hash?t.href.slice(0,-t.hash.length):t.href}function WA(t){Jo.call(this,t),this._text=null,this._defs={gradient:{},clipping:{}}}ve(WA,Jo,{svg(){return this._text},_render(t){const e=VA();e.open("svg",mt({},yy,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}));const n=this._bgcolor;return n&&n!=="transparent"&&n!=="none"&&e.open("rect",{width:this._width,height:this._height,fill:n}).close(),e.open("g",vH,{transform:"translate("+this._origin+")"}),this.mark(e,t),e.close(),this.defs(e),this._text=e.close()+"",this},mark(t,e){const n=ur[e.marktype],i=n.tag,s=[_H,n.attr];t.open("g",{class:lH(e),"clip-path":e.clip?TA(this,e,e.group):null},yH(e),{"pointer-events":i!=="g"&&e.interactive===!1?"none":null});const o=c=>{const d=this.href(c);if(d&&t.open("a",d),t.open(i,this.attr(e,c,s,i!=="g"?i:null)),i==="text"){const f=xm(c);if(he(f)){const u={x:0,dy:od(c)};for(let a=0;a<f.length;++a)t.open("tspan",a?u:null).text(ld(c,f[a])).close()}else t.text(ld(c,f))}else if(i==="g"){const f=c.strokeForeground,u=c.fill,a=c.stroke;f&&a&&(c.stroke=null),t.open("path",this.attr(e,c,n.background,"bgrect")).close(),t.open("g",this.attr(e,c,n.content)),Na(c,_=>this.mark(t,_)),t.close(),f&&a?(u&&(c.fill=null),c.stroke=a,t.open("path",this.attr(e,c,n.foreground,"bgrect")).close(),u&&(c.fill=u)):t.open("path",this.attr(e,c,n.foreground,"bgfore")).close()}t.close(),d&&t.close()};return n.nested?e.items&&e.items.length&&o(e.items[0]):Na(e,o),t.close()},href(t){const e=t.href;let n;if(e){if(n=this._hrefs&&this._hrefs[e])return n;this.sanitizeURL(e).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[e]=i})}return null},attr(t,e,n,i){const s={},o=(c,d,f,u)=>{s[u||c]=d};return Array.isArray(n)?n.forEach(c=>c(o,e,this)):n(o,e,this),i&&vme(s,e,t,i,this._defs),s},defs(t){const e=this._defs.gradient,n=this._defs.clipping;if(Object.keys(e).length+Object.keys(n).length!==0){t.open("defs");for(const s in e){const o=e[s],c=o.stops;o.gradient==="radial"?(t.open("pattern",{id:Cv+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let d=0;d<c.length;++d)t.open("stop",{offset:c[d].offset,"stop-color":c[d].color}).close();t.close()}for(const s in n){const o=n[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}});function vme(t,e,n,i,s){let o;if(e==null||(i==="bgrect"&&n.interactive===!1&&(t["pointer-events"]="none"),i==="bgfore"&&(n.interactive===!1&&(t["pointer-events"]="none"),t.display="none",e.fill!==null)))return t;i==="image"&&e.smooth===!1&&(o=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),i==="text"&&(t["font-family"]=Bm(e),t["font-size"]=Ko(e)+"px",t["font-style"]=e.fontStyle,t["font-variant"]=e.fontVariant,t["font-weight"]=e.fontWeight);for(const c in qv){let d=e[c];const f=qv[c];d==="transparent"&&(f==="fill"||f==="stroke")||d!=null&&(mA(d)&&(d=PV(d,s.gradient,"")),t[f]=d)}for(const c in Gv){const d=e[c];d!=null&&(o=o||[],o.push("".concat(Gv[c],": ").concat(d,";")))}return o&&(t.style=o.join(" ")),t}const SH="canvas",xH="png",BH="svg",kH="none",Fc={Canvas:SH,PNG:xH,SVG:BH,None:kH},Fp={};Fp[SH]=Fp[xH]={renderer:$v,headless:$v,handler:km};Fp[BH]={renderer:HA,headless:WA,handler:UA};Fp[kH]={};function CE(t,e){return t=String(t||"").toLowerCase(),arguments.length>1?(Fp[t]=e,this):Fp[t]}function IH(t,e,n){const i=[],s=new Un().union(e),o=t.marktype;return o?FH(t,s,n,i):o==="group"?OH(t,s,n,i):de("Intersect scene must be mark node or group item.")}function FH(t,e,n,i){if(Eme(t,e,n)){const s=t.items,o=t.marktype,c=s.length;let d=0;if(o==="group")for(;d<c;++d)OH(s[d],e,n,i);else for(const f=ur[o].isect;d<c;++d){const u=s[d];MH(u,e,f)&&i.push(u)}}return i}function Eme(t,e,n){return t.bounds&&e.intersects(t.bounds)&&(t.marktype==="group"||t.interactive!==!1&&(!n||n(t)))}function OH(t,e,n,i){n&&n(t.mark)&&MH(t,e,ur.group.isect)&&i.push(t);const s=t.items,o=s&&s.length;if(o){const c=t.x||0,d=t.y||0;e.translate(-c,-d);for(let f=0;f<o;++f)FH(s[f],e,n,i);e.translate(c,d)}return i}function MH(t,e,n){const i=t.bounds;return e.encloses(i)||e.intersects(i)&&n(t,e)}const Gx=new Un;function AH(t){const e=t.clip;if(wt(e))e(Em(Gx.clear()));else if(e)Gx.set(0,0,t.group.width,t.group.height);else return;t.bounds.intersect(Gx)}const Sme=1e-9;function YA(t,e,n){return t===e?!0:n==="path"?NH(t,e):t instanceof Date&&e instanceof Date?+t==+e:ln(t)&&ln(e)?Math.abs(t-e)<=Sme:!t||!e||!Fe(t)&&!Fe(e)?t==e:xme(t,e)}function NH(t,e){return YA(Bp(t),Bp(e))}function xme(t,e){var n=Object.keys(t),i=Object.keys(e),s,o;if(n.length!==i.length)return!1;for(n.sort(),i.sort(),o=n.length-1;o>=0;o--)if(n[o]!=i[o])return!1;for(o=n.length-1;o>=0;o--)if(s=n[o],!YA(t[s],e[s],s))return!1;return typeof t==typeof e}function Bme(){GV(),Jge()}const Op="top",ga="left",wa="right",dd="bottom",kme="top-left",Ime="top-right",Fme="bottom-left",Ome="bottom-right",XA="start",gI="middle",ts="end",Mme="x",Ame="y",RE="group",KA="axis",JA="title",Nme="frame",Cme="scope",QA="legend",CH="row-header",RH="row-footer",LH="row-title",PH="column-header",DH="column-footer",jH="column-title",Rme="padding",Lme="symbol",UH="fit",Pme="fit-x",Dme="fit-y",jme="pad",ZA="none",Pb="all",_I="each",eN="flush",Oc="column",Mc="row";function zH(t){oe.call(this,null,t)}ve(zH,oe,{transform(t,e){const n=e.dataflow,i=t.mark,s=i.marktype,o=ur[s],c=o.bound;let d=i.bounds,f;if(o.nested)i.items.length&&n.dirty(i.items[0]),d=Db(i,c),i.items.forEach(u=>{u.bounds.clear().union(d)});else if(s===RE||t.modified())switch(e.visit(e.MOD,u=>n.dirty(u)),d.clear(),i.items.forEach(u=>d.union(Db(u,c))),i.role){case KA:case QA:case JA:e.reflow()}else f=e.changed(e.REM),e.visit(e.ADD,u=>{d.union(Db(u,c))}),e.visit(e.MOD,u=>{f=f||d.alignsWith(u.bounds),n.dirty(u),d.union(Db(u,c))}),f&&(d.clear(),i.items.forEach(u=>d.union(u.bounds)));return AH(i),e.modifies("bounds")}});function Db(t,e,n){return e(t.bounds.clear(),t,n)}const S4=":vega_identifier:";function tN(t){oe.call(this,0,t)}tN.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};ve(tN,oe,{transform(t,e){const n=Ume(e.dataflow),i=t.as;let s=n.value;return e.visit(e.ADD,o=>o[i]=o[i]||++s),n.set(this.value=s),e}});function Ume(t){return t._signals[S4]||(t._signals[S4]=t.add(0))}function $H(t){oe.call(this,null,t)}ve($H,oe,{transform(t,e){let n=this.value;n||(n=e.dataflow.scenegraph().mark(t.markdef,zme(t),t.index),n.group.context=t.context,t.context.group||(t.context.group=n.group),n.source=this.source,n.clip=t.clip,n.interactive=t.interactive,this.value=n);const i=n.marktype===RE?BE:xE;return e.visit(e.ADD,s=>i.call(s,n)),(t.modified("clip")||t.modified("interactive"))&&(n.clip=t.clip,n.interactive=!!t.interactive,n.zdirty=!0,e.reflow()),n.items=e.source,e}});function zme(t){const e=t.groups,n=t.parent;return e&&e.size===1?e.get(Object.keys(e.object)[0]):e&&n?e.lookup(n):null}function qH(t){oe.call(this,null,t)}const x4={parity:t=>t.filter((e,n)=>n%2?e.opacity=0:1),greedy:(t,e)=>{let n;return t.filter((i,s)=>!s||!GH(n.bounds,i.bounds,e)?(n=i,1):i.opacity=0)}},GH=(t,e,n)=>n>Math.max(e.x1-t.x2,t.x1-e.x2,e.y1-t.y2,t.y1-e.y2),B4=(t,e)=>{for(var n=1,i=t.length,s=t[0].bounds,o;n<i;s=o,++n)if(GH(s,o=t[n].bounds,e))return!0},$me=t=>{const e=t.bounds;return e.width()>1&&e.height()>1},qme=(t,e,n)=>{var i=t.range(),s=new Un;return e===Op||e===dd?s.set(i[0],-1/0,i[1],1/0):s.set(-1/0,i[0],1/0,i[1]),s.expand(n||1),o=>s.encloses(o.bounds)},k4=t=>(t.forEach(e=>e.opacity=1),t),I4=(t,e)=>t.reflow(e.modified()).modifies("opacity");ve(qH,oe,{transform(t,e){const n=x4[t.method]||x4.parity,i=t.separation||0;let s=e.materialize(e.SOURCE).source,o,c;if(!s||!s.length)return;if(!t.method)return t.modified("method")&&(k4(s),e=I4(e,t)),e;if(s=s.filter($me),!s.length)return;if(t.sort&&(s=s.slice().sort(t.sort)),o=k4(s),e=I4(e,t),o.length>=3&&B4(o,i)){do o=n(o,i);while(o.length>=3&&B4(o,i));o.length<3&&!Rt(s).opacity&&(o.length>1&&(Rt(o).opacity=0),Rt(s).opacity=1)}t.boundScale&&t.boundTolerance>=0&&(c=qme(t.boundScale,t.boundOrient,+t.boundTolerance),s.forEach(f=>{c(f)||(f.opacity=0)}));const d=o[0].mark.bounds.clear();return s.forEach(f=>{f.opacity&&d.union(f.bounds)}),e}});function VH(t){oe.call(this,null,t)}ve(VH,oe,{transform(t,e){const n=e.dataflow;if(e.visit(e.ALL,i=>n.dirty(i)),e.fields&&e.fields.zindex){const i=e.source&&e.source[0];i&&(i.mark.zdirty=!0)}}});const Oi=new Un;function Eh(t,e,n){return t[e]===n?0:(t[e]=n,1)}function Gme(t){var e=t.items[0].orient;return e===ga||e===wa}function Vme(t){let e=+t.grid;return[t.ticks?e++:-1,t.labels?e++:-1,e+ +t.domain]}function Hme(t,e,n,i){var s=e.items[0],o=s.datum,c=s.translate!=null?s.translate:.5,d=s.orient,f=Vme(o),u=s.range,a=s.offset,_=s.position,w=s.minExtent,m=s.maxExtent,l=o.title&&s.items[f[2]].items[0],T=s.titlePadding,b=s.bounds,S=l&&RA(l),x=0,B=0,F,k;switch(Oi.clear().union(b),b.clear(),(F=f[0])>-1&&b.union(s.items[F].bounds),(F=f[1])>-1&&b.union(s.items[F].bounds),d){case Op:x=_||0,B=-a,k=Math.max(w,Math.min(m,-b.y1)),b.add(0,-k).add(u,0),l&&jb(t,l,k,T,S,0,-1,b);break;case ga:x=-a,B=_||0,k=Math.max(w,Math.min(m,-b.x1)),b.add(-k,0).add(0,u),l&&jb(t,l,k,T,S,1,-1,b);break;case wa:x=n+a,B=_||0,k=Math.max(w,Math.min(m,b.x2)),b.add(0,0).add(k,u),l&&jb(t,l,k,T,S,1,1,b);break;case dd:x=_||0,B=i+a,k=Math.max(w,Math.min(m,b.y2)),b.add(0,0).add(u,k),l&&jb(t,l,k,T,0,0,1,b);break;default:x=s.x,B=s.y}return Kl(b.translate(x,B),s),Eh(s,"x",x+c)|Eh(s,"y",B+c)&&(s.bounds=Oi,t.dirty(s),s.bounds=b,t.dirty(s)),s.mark.bounds.clear().union(b)}function jb(t,e,n,i,s,o,c,d){const f=e.bounds;if(e.auto){const u=c*(n+s+i);let a=0,_=0;t.dirty(e),o?a=(e.x||0)-(e.x=u):_=(e.y||0)-(e.y=u),e.mark.bounds.clear().union(f.translate(-a,-_)),t.dirty(e)}d.union(f)}const F4=(t,e)=>Math.floor(Math.min(t,e)),O4=(t,e)=>Math.ceil(Math.max(t,e));function Wme(t){var e=t.items,n=e.length,i=0,s,o;const c={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;i<n;++i)if(s=e[i],o=s.items,s.marktype===RE)switch(s.role){case KA:case QA:case JA:break;case CH:c.rowheaders.push(...o);break;case RH:c.rowfooters.push(...o);break;case PH:c.colheaders.push(...o);break;case DH:c.colfooters.push(...o);break;case LH:c.rowtitle=o[0];break;case jH:c.coltitle=o[0];break;default:c.marks.push(...o)}return c}function Yme(t){return new Un().set(0,0,t.width||0,t.height||0)}function Xme(t){const e=t.bounds.clone();return e.empty()?e.set(0,0,0,0):e.translate(-(t.x||0),-(t.y||0))}function En(t,e,n){const i=Fe(t)?t[e]:t;return i!=null?i:n!==void 0?n:0}function M4(t){return t<0?Math.ceil(-t):0}function HH(t,e,n){var i=!n.nodirty,s=n.bounds===eN?Yme:Xme,o=Oi.set(0,0,0,0),c=En(n.align,Oc),d=En(n.align,Mc),f=En(n.padding,Oc),u=En(n.padding,Mc),a=n.columns||e.length,_=a<=0?1:Math.ceil(e.length/a),w=e.length,m=Array(w),l=Array(a),T=0,b=Array(w),S=Array(_),x=0,B=Array(w),F=Array(w),k=Array(w),A,M,R,P,j,D,z,$,K,H,W;for(M=0;M<a;++M)l[M]=0;for(M=0;M<_;++M)S[M]=0;for(M=0;M<w;++M)D=e[M],j=k[M]=s(D),D.x=D.x||0,B[M]=0,D.y=D.y||0,F[M]=0,R=M%a,P=~~(M/a),T=Math.max(T,z=Math.ceil(j.x2)),x=Math.max(x,$=Math.ceil(j.y2)),l[R]=Math.max(l[R],z),S[P]=Math.max(S[P],$),m[M]=f+M4(j.x1),b[M]=u+M4(j.y1),i&&t.dirty(e[M]);for(M=0;M<w;++M)M%a===0&&(m[M]=0),M<a&&(b[M]=0);if(c===_I)for(R=1;R<a;++R){for(W=0,M=R;M<w;M+=a)W<m[M]&&(W=m[M]);for(M=R;M<w;M+=a)m[M]=W+l[R-1]}else if(c===Pb){for(W=0,M=0;M<w;++M)M%a&&W<m[M]&&(W=m[M]);for(M=0;M<w;++M)M%a&&(m[M]=W+T)}else for(c=!1,R=1;R<a;++R)for(M=R;M<w;M+=a)m[M]+=l[R-1];if(d===_I)for(P=1;P<_;++P){for(W=0,M=P*a,A=M+a;M<A;++M)W<b[M]&&(W=b[M]);for(M=P*a;M<A;++M)b[M]=W+S[P-1]}else if(d===Pb){for(W=0,M=a;M<w;++M)W<b[M]&&(W=b[M]);for(M=a;M<w;++M)b[M]=W+x}else for(d=!1,P=1;P<_;++P)for(M=P*a,A=M+a;M<A;++M)b[M]+=S[P-1];for(K=0,M=0;M<w;++M)K=m[M]+(M%a?K:0),B[M]+=K-e[M].x;for(R=0;R<a;++R)for(H=0,M=R;M<w;M+=a)H+=b[M],F[M]+=H-e[M].y;if(c&&En(n.center,Oc)&&_>1)for(M=0;M<w;++M)j=c===Pb?T:l[M%a],K=j-k[M].x2-e[M].x-B[M],K>0&&(B[M]+=K/2);if(d&&En(n.center,Mc)&&a!==1)for(M=0;M<w;++M)j=d===Pb?x:S[~~(M/a)],H=j-k[M].y2-e[M].y-F[M],H>0&&(F[M]+=H/2);for(M=0;M<w;++M)o.union(k[M].translate(B[M],F[M]));switch(K=En(n.anchor,Mme),H=En(n.anchor,Ame),En(n.anchor,Oc)){case ts:K-=o.width();break;case gI:K-=o.width()/2}switch(En(n.anchor,Mc)){case ts:H-=o.height();break;case gI:H-=o.height()/2}for(K=Math.round(K),H=Math.round(H),o.clear(),M=0;M<w;++M)e[M].mark.bounds.clear();for(M=0;M<w;++M)D=e[M],D.x+=B[M]+=K,D.y+=F[M]+=H,o.union(D.mark.bounds.union(D.bounds.translate(B[M],F[M]))),i&&t.dirty(D);return o}function Kme(t,e,n){var i=Wme(e),s=i.marks,o=n.bounds===eN?Jme:Qme,c=n.offset,d=n.columns||s.length,f=d<=0?1:Math.ceil(s.length/d),u=f*d,a,_,w,m,l,T,b;const S=HH(t,s,n);S.empty()&&S.set(0,0,0,0),i.rowheaders&&(T=En(n.headerBand,Mc,null),a=Ub(t,i.rowheaders,s,d,f,-En(c,"rowHeader"),F4,0,o,"x1",0,d,1,T)),i.colheaders&&(T=En(n.headerBand,Oc,null),_=Ub(t,i.colheaders,s,d,d,-En(c,"columnHeader"),F4,1,o,"y1",0,1,d,T)),i.rowfooters&&(T=En(n.footerBand,Mc,null),w=Ub(t,i.rowfooters,s,d,f,En(c,"rowFooter"),O4,0,o,"x2",d-1,d,1,T)),i.colfooters&&(T=En(n.footerBand,Oc,null),m=Ub(t,i.colfooters,s,d,d,En(c,"columnFooter"),O4,1,o,"y2",u-d,1,d,T)),i.rowtitle&&(l=En(n.titleAnchor,Mc),b=En(c,"rowTitle"),b=l===ts?w+b:a-b,T=En(n.titleBand,Mc,.5),A4(t,i.rowtitle,b,0,S,T)),i.coltitle&&(l=En(n.titleAnchor,Oc),b=En(c,"columnTitle"),b=l===ts?m+b:_-b,T=En(n.titleBand,Oc,.5),A4(t,i.coltitle,b,1,S,T))}function Jme(t,e){return e==="x1"?t.x||0:e==="y1"?t.y||0:e==="x2"?(t.x||0)+(t.width||0):e==="y2"?(t.y||0)+(t.height||0):void 0}function Qme(t,e){return t.bounds[e]}function Ub(t,e,n,i,s,o,c,d,f,u,a,_,w,m){var l=n.length,T=0,b=0,S,x,B,F,k,A,M,R,P;if(!l)return T;for(S=a;S<l;S+=_)n[S]&&(T=c(T,f(n[S],u)));if(!e.length)return T;for(e.length>s&&(t.warn("Grid headers exceed limit: "+s),e=e.slice(0,s)),T+=o,x=0,F=e.length;x<F;++x)t.dirty(e[x]),e[x].mark.bounds.clear();for(S=a,x=0,F=e.length;x<F;++x,S+=_){for(A=e[x],k=A.mark.bounds,B=S;B>=0&&(M=n[B])==null;B-=w);d?(R=m==null?M.x:Math.round(M.bounds.x1+m*M.bounds.width()),P=T):(R=T,P=m==null?M.y:Math.round(M.bounds.y1+m*M.bounds.height())),k.union(A.bounds.translate(R-(A.x||0),P-(A.y||0))),A.x=R,A.y=P,t.dirty(A),b=c(b,k[u])}return b}function A4(t,e,n,i,s,o){if(!!e){t.dirty(e);var c=n,d=n;i?c=Math.round(s.x1+o*s.width()):d=Math.round(s.y1+o*s.height()),e.bounds.translate(c-(e.x||0),d-(e.y||0)),e.mark.bounds.clear().union(e.bounds),e.x=c,e.y=d,t.dirty(e)}}function Zme(t,e){const n=t[e]||{};return(i,s)=>n[i]!=null?n[i]:t[i]!=null?t[i]:s}function ewe(t,e){let n=-1/0;return t.forEach(i=>{i.offset!=null&&(n=Math.max(n,i.offset))}),n>-1/0?n:e}function twe(t,e,n,i,s,o,c){const d=Zme(n,e),f=ewe(t,d("offset",0)),u=d("anchor",XA),a=u===ts?1:u===gI?.5:0,_={align:_I,bounds:d("bounds",eN),columns:d("direction")==="vertical"?1:t.length,padding:d("margin",8),center:d("center"),nodirty:!0};switch(e){case ga:_.anchor={x:Math.floor(i.x1)-f,column:ts,y:a*(c||i.height()+2*i.y1),row:u};break;case wa:_.anchor={x:Math.ceil(i.x2)+f,y:a*(c||i.height()+2*i.y1),row:u};break;case Op:_.anchor={y:Math.floor(s.y1)-f,row:ts,x:a*(o||s.width()+2*s.x1),column:u};break;case dd:_.anchor={y:Math.ceil(s.y2)+f,x:a*(o||s.width()+2*s.x1),column:u};break;case kme:_.anchor={x:f,y:f};break;case Ime:_.anchor={x:o-f,y:f,column:ts};break;case Fme:_.anchor={x:f,y:c-f,row:ts};break;case Ome:_.anchor={x:o-f,y:c-f,column:ts,row:ts};break}return _}function nwe(t,e){var n=e.items[0],i=n.datum,s=n.orient,o=n.bounds,c=n.x,d=n.y,f,u;return n._bounds?n._bounds.clear().union(o):n._bounds=o.clone(),o.clear(),swe(t,n,n.items[0].items[0]),o=iwe(n,o),f=2*n.padding,u=2*n.padding,o.empty()||(f=Math.ceil(o.width()+f),u=Math.ceil(o.height()+u)),i.type===Lme&&rwe(n.items[0].items[0].items[0].items),s!==ZA&&(n.x=c=0,n.y=d=0),n.width=f,n.height=u,Kl(o.set(c,d,c+f,d+u),n),n.mark.bounds.clear().union(o),n}function iwe(t,e){return t.items.forEach(n=>e.union(n.bounds)),e.x1=t.padding,e.y1=t.padding,e}function swe(t,e,n){var i=e.padding,s=i-n.x,o=i-n.y;if(!e.datum.title)(s||o)&&Dg(t,n,s,o);else{var c=e.items[1].items[0],d=c.anchor,f=e.titlePadding||0,u=i-c.x,a=i-c.y;switch(c.orient){case ga:s+=Math.ceil(c.bounds.width())+f;break;case wa:case dd:break;default:o+=c.bounds.height()+f}switch((s||o)&&Dg(t,n,s,o),c.orient){case ga:a+=Ju(e,n,c,d,1,1);break;case wa:u+=Ju(e,n,c,ts,0,0)+f,a+=Ju(e,n,c,d,1,1);break;case dd:u+=Ju(e,n,c,d,0,0),a+=Ju(e,n,c,ts,-1,0,1)+f;break;default:u+=Ju(e,n,c,d,0,0)}(u||a)&&Dg(t,c,u,a),(u=Math.round(c.bounds.x1-i))<0&&(Dg(t,n,-u,0),Dg(t,c,-u,0))}}function Ju(t,e,n,i,s,o,c){const d=t.datum.type!=="symbol",f=n.datum.vgrad,u=d&&(o||!f)&&!c?e.items[0]:e,a=u.bounds[s?"y2":"x2"]-t.padding,_=f&&o?a:0,w=f&&o?0:a,m=s<=0?0:RA(n);return Math.round(i===XA?_:i===ts?w-m:.5*(a-m))}function Dg(t,e,n,i){e.x+=n,e.y+=i,e.bounds.translate(n,i),e.mark.bounds.translate(n,i),t.dirty(e)}function rwe(t){const e=t.reduce((n,i)=>(n[i.column]=Math.max(i.bounds.x2-i.x,n[i.column]||0),n),{});t.forEach(n=>{n.width=e[n.column],n.height=n.bounds.y2-n.y})}function awe(t,e,n,i,s){var o=e.items[0],c=o.frame,d=o.orient,f=o.anchor,u=o.offset,a=o.padding,_=o.items[0].items[0],w=o.items[1]&&o.items[1].items[0],m=d===ga||d===wa?i:n,l=0,T=0,b=0,S=0,x=0,B;if(c!==RE?d===ga?(l=s.y2,m=s.y1):d===wa?(l=s.y1,m=s.y2):(l=s.x1,m=s.x2):d===ga&&(l=i,m=0),B=f===XA?l:f===ts?m:(l+m)/2,w&&w.text){switch(d){case Op:case dd:x=_.bounds.height()+a;break;case ga:S=_.bounds.width()+a;break;case wa:S=-_.bounds.width()-a;break}Oi.clear().union(w.bounds),Oi.translate(S-(w.x||0),x-(w.y||0)),Eh(w,"x",S)|Eh(w,"y",x)&&(t.dirty(w),w.bounds.clear().union(Oi),w.mark.bounds.clear().union(Oi),t.dirty(w)),Oi.clear().union(w.bounds)}else Oi.clear();switch(Oi.union(_.bounds),d){case Op:T=B,b=s.y1-Oi.height()-u;break;case ga:T=s.x1-Oi.width()-u,b=B;break;case wa:T=s.x2+Oi.width()+u,b=B;break;case dd:T=B,b=s.y2+u;break;default:T=o.x,b=o.y}return Eh(o,"x",T)|Eh(o,"y",b)&&(Oi.translate(T,b),t.dirty(o),o.bounds.clear().union(Oi),e.bounds.clear().union(Oi),t.dirty(o)),o.bounds}function WH(t){oe.call(this,null,t)}ve(WH,oe,{transform(t,e){const n=e.dataflow;return t.mark.items.forEach(i=>{t.layout&&Kme(n,i,t.layout),lwe(n,i,t)}),owe(t.mark.group)?e.reflow():e}});function owe(t){return t&&t.mark.role!=="legend-entry"}function lwe(t,e,n){var i=e.items,s=Math.max(0,e.width||0),o=Math.max(0,e.height||0),c=new Un().set(0,0,s,o),d=c.clone(),f=c.clone(),u=[],a,_,w,m,l,T;for(l=0,T=i.length;l<T;++l)switch(_=i[l],_.role){case KA:m=Gme(_)?d:f,m.union(Hme(t,_,s,o));break;case JA:a=_;break;case QA:u.push(nwe(t,_));break;case Nme:case Cme:case CH:case RH:case LH:case PH:case DH:case jH:d.union(_.bounds),f.union(_.bounds);break;default:c.union(_.bounds)}if(u.length){const b={};u.forEach(S=>{w=S.orient||wa,w!==ZA&&(b[w]||(b[w]=[])).push(S)});for(const S in b){const x=b[S];HH(t,x,twe(x,S,n.legends,d,f,s,o))}u.forEach(S=>{const x=S.bounds;if(x.equals(S._bounds)||(S.bounds=S._bounds,t.dirty(S),S.bounds=x,t.dirty(S)),n.autosize&&n.autosize.type===UH)switch(S.orient){case ga:case wa:c.add(x.x1,0).add(x.x2,0);break;case Op:case dd:c.add(0,x.y1).add(0,x.y2)}else c.union(x)})}c.union(d).union(f),a&&c.union(awe(t,a,s,o,c)),e.clip&&c.set(0,0,e.width||0,e.height||0),cwe(t,e,c,n)}function cwe(t,e,n,i){const s=i.autosize||{},o=s.type;if(t._autosize<1||!o)return;let c=t._width,d=t._height,f=Math.max(0,e.width||0),u=Math.max(0,Math.ceil(-n.x1)),a=Math.max(0,e.height||0),_=Math.max(0,Math.ceil(-n.y1));const w=Math.max(0,Math.ceil(n.x2-f)),m=Math.max(0,Math.ceil(n.y2-a));if(s.contains===Rme){const l=t.padding();c-=l.left+l.right,d-=l.top+l.bottom}o===ZA?(u=0,_=0,f=c,a=d):o===UH?(f=Math.max(0,c-u-w),a=Math.max(0,d-_-m)):o===Pme?(f=Math.max(0,c-u-w),d=a+_+m):o===Dme?(c=f+u+w,a=Math.max(0,d-_-m)):o===jme&&(c=f+u+w,d=a+_+m),t._resizeView(c,d,f,a,[u,_],s.resize)}const dwe=Object.freeze(Object.defineProperty({__proto__:null,bound:zH,identifier:tN,mark:$H,overlap:qH,render:VH,viewlayout:WH},Symbol.toStringTag,{value:"Module"}));function YH(t){oe.call(this,null,t)}ve(YH,oe,{transform(t,e){if(this.value&&!t.modified())return e.StopPropagation;var n=e.dataflow.locale(),i=e.fork(e.NO_SOURCE|e.NO_FIELDS),s=this.value,o=t.scale,c=t.count==null?t.values?t.values.length:10:t.count,d=_A(o,c,t.minstep),f=t.format||OV(n,o,d,t.formatSpecifier,t.formatType,!!t.values),u=t.values?FV(o,t.values,d):yA(o,d);return s&&(i.rem=s),s=u.map((a,_)=>Yt({index:_/(u.length-1||1),value:a,label:f(a)})),t.extra&&s.length&&s.push(Yt({index:-1,extra:{value:s[0].value},label:""})),i.source=s,i.add=s,this.value=s,i}});function XH(t){oe.call(this,null,t)}function fwe(){return Yt({})}function uwe(t){const e=rg().test(n=>n.exit);return e.lookup=n=>e.get(t(n)),e}ve(XH,oe,{transform(t,e){var n=e.dataflow,i=e.fork(e.NO_SOURCE|e.NO_FIELDS),s=t.item||fwe,o=t.key||De,c=this.value;return he(i.encode)&&(i.encode=null),c&&(t.modified("key")||e.modified(o))&&de("DataJoin does not support modified key function or fields."),c||(e=e.addAll(),this.value=c=uwe(o)),e.visit(e.ADD,d=>{const f=o(d);let u=c.get(f);u?u.exit?(c.empty--,i.add.push(u)):i.mod.push(u):(u=s(d),c.set(f,u),i.add.push(u)),u.datum=d,u.exit=!1}),e.visit(e.MOD,d=>{const f=o(d),u=c.get(f);u&&(u.datum=d,i.mod.push(u))}),e.visit(e.REM,d=>{const f=o(d),u=c.get(f);d===u.datum&&!u.exit&&(i.rem.push(u),u.exit=!0,++c.empty)}),e.changed(e.ADD_MOD)&&i.modifies("datum"),(e.clean()||t.clean&&c.empty>n.cleanThreshold)&&n.runAfter(c.clean),i}});function KH(t){oe.call(this,null,t)}ve(KH,oe,{transform(t,e){var n=e.fork(e.ADD_REM),i=t.mod||!1,s=t.encoders,o=e.encode;if(he(o))if(n.changed()||o.every(_=>s[_]))o=o[0],n.encode=null;else return e.StopPropagation;var c=o==="enter",d=s.update||fc,f=s.enter||fc,u=s.exit||fc,a=(o&&!c?s[o]:d)||fc;if(e.changed(e.ADD)&&(e.visit(e.ADD,_=>{f(_,t),d(_,t)}),n.modifies(f.output),n.modifies(d.output),a!==fc&&a!==d&&(e.visit(e.ADD,_=>{a(_,t)}),n.modifies(a.output))),e.changed(e.REM)&&u!==fc&&(e.visit(e.REM,_=>{u(_,t)}),n.modifies(u.output)),c||a!==fc){const _=e.MOD|(t.modified()?e.REFLOW:0);c?(e.visit(_,w=>{const m=f(w,t)||i;(a(w,t)||m)&&n.mod.push(w)}),n.mod.length&&n.modifies(f.output)):e.visit(_,w=>{(a(w,t)||i)&&n.mod.push(w)}),n.mod.length&&n.modifies(a.output)}return n.changed()?n:e.StopPropagation}});function JH(t){oe.call(this,[],t)}ve(JH,oe,{transform(t,e){if(this.value!=null&&!t.modified())return e.StopPropagation;var n=e.dataflow.locale(),i=e.fork(e.NO_SOURCE|e.NO_FIELDS),s=this.value,o=t.type||x0,c=t.scale,d=+t.limit,f=_A(c,t.count==null?5:t.count,t.minstep),u=!!t.values||o===x0,a=t.format||CV(n,c,f,o,t.formatSpecifier,t.formatType,u),_=t.values||NV(c,f),w,m,l,T,b;return s&&(i.rem=s),o===x0?(d&&_.length>d?(e.dataflow.warn("Symbol legend count exceeds limit, filtering items."),s=_.slice(0,d-1),b=!0):s=_,wt(l=t.size)?(!t.values&&c(s[0])===0&&(s=s.slice(1)),T=s.reduce((S,x)=>Math.max(S,l(x,t)),0)):l=Wi(T=l||8),s=s.map((S,x)=>Yt({index:x,label:a(S,x,s),value:S,offset:T,size:l(S,t)})),b&&(b=_[s.length],s.push(Yt({index:s.length,label:"\u2026".concat(_.length-s.length," entries"),value:b,offset:T,size:l(b,t)})))):o===Dge?(w=c.domain(),m=BV(c,w[0],Rt(w)),_.length<3&&!t.values&&w[0]!==Rt(w)&&(_=[w[0],Rt(w)]),s=_.map((S,x)=>Yt({index:x,label:a(S,x,_),value:S,perc:m(S)}))):(l=_.length-1,m=Xge(c),s=_.map((S,x)=>Yt({index:x,label:a(S,x,_),value:S,perc:x?m(S):0,perc2:x===l?1:m(_[x+1])}))),i.source=s,i.add=s,this.value=s,i}});const hwe=t=>t.source.x,pwe=t=>t.source.y,gwe=t=>t.target.x,_we=t=>t.target.y;function nN(t){oe.call(this,{},t)}nN.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};ve(nN,oe,{transform(t,e){var n=t.sourceX||hwe,i=t.sourceY||pwe,s=t.targetX||gwe,o=t.targetY||_we,c=t.as||"path",d=t.orient||"vertical",f=t.shape||"line",u=N4.get(f+"-"+d)||N4.get(f);return u||de("LinkPath unsupported type: "+t.shape+(t.orient?"-"+t.orient:"")),e.visit(e.SOURCE,a=>{a[c]=u(n(a),i(a),s(a),o(a))}),e.reflow(t.modified()).modifies(c)}});const QH=(t,e,n,i)=>"M"+t+","+e+"L"+n+","+i,ywe=(t,e,n,i)=>QH(e*Math.cos(t),e*Math.sin(t),i*Math.cos(n),i*Math.sin(n)),ZH=(t,e,n,i)=>{var s=n-t,o=i-e,c=Math.sqrt(s*s+o*o)/2,d=180*Math.atan2(o,s)/Math.PI;return"M"+t+","+e+"A"+c+","+c+" "+d+" 0 1 "+n+","+i},mwe=(t,e,n,i)=>ZH(e*Math.cos(t),e*Math.sin(t),i*Math.cos(n),i*Math.sin(n)),eW=(t,e,n,i)=>{const s=n-t,o=i-e,c=.2*(s+o),d=.2*(o-s);return"M"+t+","+e+"C"+(t+c)+","+(e+d)+" "+(n+d)+","+(i-c)+" "+n+","+i},wwe=(t,e,n,i)=>eW(e*Math.cos(t),e*Math.sin(t),i*Math.cos(n),i*Math.sin(n)),bwe=(t,e,n,i)=>"M"+t+","+e+"V"+i+"H"+n,Twe=(t,e,n,i)=>"M"+t+","+e+"H"+n+"V"+i,vwe=(t,e,n,i)=>{const s=Math.cos(t),o=Math.sin(t),c=Math.cos(n),d=Math.sin(n),f=Math.abs(n-t)>Math.PI?n<=t:n>t;return"M"+e*s+","+e*o+"A"+e+","+e+" 0 0,"+(f?1:0)+" "+e*c+","+e*d+"L"+i*c+","+i*d},Ewe=(t,e,n,i)=>{const s=(t+n)/2;return"M"+t+","+e+"C"+s+","+e+" "+s+","+i+" "+n+","+i},Swe=(t,e,n,i)=>{const s=(e+i)/2;return"M"+t+","+e+"C"+t+","+s+" "+n+","+s+" "+n+","+i},xwe=(t,e,n,i)=>{const s=Math.cos(t),o=Math.sin(t),c=Math.cos(n),d=Math.sin(n),f=(e+i)/2;return"M"+e*s+","+e*o+"C"+f*s+","+f*o+" "+f*c+","+f*d+" "+i*c+","+i*d},N4=rg({line:QH,"line-radial":ywe,arc:ZH,"arc-radial":mwe,curve:eW,"curve-radial":wwe,"orthogonal-horizontal":bwe,"orthogonal-vertical":Twe,"orthogonal-radial":vwe,"diagonal-horizontal":Ewe,"diagonal-vertical":Swe,"diagonal-radial":xwe});function iN(t){oe.call(this,null,t)}iN.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};ve(iN,oe,{transform(t,e){var n=t.as||["startAngle","endAngle"],i=n[0],s=n[1],o=t.field||ng,c=t.startAngle||0,d=t.endAngle!=null?t.endAngle:2*Math.PI,f=e.source,u=f.map(o),a=u.length,_=c,w=(d-c)/HU(u),m=ar(a),l,T,b;for(t.sort&&m.sort((S,x)=>u[S]-u[x]),l=0;l<a;++l)b=u[m[l]],T=f[m[l]],T[i]=_,T[s]=_+=b*w;return this.value=u,e.reflow(t.modified()).modifies(n)}});const Bwe=5;function kwe(t){const e=t.type;return!t.bins&&(e===Ep||e===_m||e===ym)}function tW(t){return hA(t)&&t!==xo}const Iwe=Ma(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function nW(t){oe.call(this,null,t),this.modified(!0)}ve(nW,oe,{transform(t,e){var n=e.dataflow,i=this.value,s=Fwe(t);(!i||s!==i.type)&&(this.value=i=Vt(s)());for(s in t)if(!Iwe[s]){if(s==="padding"&&tW(i.type))continue;wt(i[s])?i[s](t[s]):n.warn("Unsupported scale property: "+s)}return Rwe(i,t,Cwe(i,t,Mwe(i,t,n))),e.fork(e.NO_SOURCE|e.NO_FIELDS)}});function Fwe(t){var e=t.type,n="",i;return e===xo?xo+"-"+Ep:(Owe(t)&&(i=t.rawDomain?t.rawDomain.length:t.domain?t.domain.length+ +(t.domainMid!=null):0,n=i===2?xo+"-":i===3?lg+"-":""),(n+e||Ep).toLowerCase())}function Owe(t){const e=t.type;return hA(e)&&e!==eu&&e!==tu&&(t.scheme||t.range&&t.range.length&&t.range.every(ke))}function Mwe(t,e,n){const i=Awe(t,e.domainRaw,n);if(i>-1)return i;var s=e.domain,o=t.type,c=e.zero||e.zero===void 0&&kwe(t),d,f;if(!s)return 0;if(tW(o)&&e.padding&&s[0]!==Rt(s)&&(s=Nwe(o,s,e.range,e.padding,e.exponent,e.constant)),(c||e.domainMin!=null||e.domainMax!=null||e.domainMid!=null)&&(d=(s=s.slice()).length-1||1,c&&(s[0]>0&&(s[0]=0),s[d]<0&&(s[d]=0)),e.domainMin!=null&&(s[0]=e.domainMin),e.domainMax!=null&&(s[d]=e.domainMax),e.domainMid!=null)){f=e.domainMid;const u=f>s[d]?d+1:f<s[0]?0:d;u!==d&&n.warn("Scale domainMid exceeds domain min or max.",f),s.splice(u,0,f)}return t.domain(iW(o,s,n)),o===cA&&t.unknown(e.domainImplicit?Tk:void 0),e.nice&&t.nice&&t.nice(e.nice!==!0&&_A(t,e.nice)||null),s.length}function Awe(t,e,n){return e?(t.domain(iW(t.type,e,n)),e.length):-1}function Nwe(t,e,n,i,s,o){var c=Math.abs(Rt(n)-n[0]),d=c/(c-2*i),f=t===Gl?wM(e,null,d):t===ym?Ov(e,null,d,.5):t===_m?Ov(e,null,d,s||1):t===bE?bM(e,null,d,o||1):mM(e,null,d);return e=e.slice(),e[0]=f[0],e[e.length-1]=f[1],e}function iW(t,e,n){if(TV(t)){var i=Math.abs(e.reduce((s,o)=>s+(o<0?-1:o>0?1:0),0));i!==e.length&&n.warn("Log scale domain includes zero: "+Se(e))}return e}function Cwe(t,e,n){let i=e.bins;if(i&&!he(i)){const s=t.domain(),o=s[0],c=Rt(s),d=i.step;let f=i.start==null?o:i.start,u=i.stop==null?c:i.stop;d||de("Scale bins parameter missing step property."),f<o&&(f=d*Math.ceil(o/d)),u>c&&(u=d*Math.floor(c/d)),i=ar(f,u+d/2,d)}return i?t.bins=i:t.bins&&delete t.bins,t.type===dA&&(i?!e.domain&&!e.domainRaw&&(t.domain(i),n=i.length):t.bins=t.domain()),n}function Rwe(t,e,n){var i=t.type,s=e.round||!1,o=e.range;if(e.rangeStep!=null)o=Lwe(i,e,n);else if(e.scheme&&(o=Pwe(i,e,n),wt(o))){if(t.interpolator)return t.interpolator(o);de("Scale type ".concat(i," does not support interpolating color schemes."))}if(o&&vV(i))return t.interpolator(EE(yI(o,e.reverse),e.interpolate,e.interpolateGamma));o&&e.interpolate&&t.interpolate?t.interpolate(pA(e.interpolate,e.interpolateGamma)):wt(t.round)?t.round(s):wt(t.rangeRound)&&t.interpolate(s?$y:bd),o&&t.range(yI(o,e.reverse))}function Lwe(t,e,n){t!==yV&&t!==nI&&de("Only band and point scales support rangeStep.");var i=(e.paddingOuter!=null?e.paddingOuter:e.padding)||0,s=t===nI?1:(e.paddingInner!=null?e.paddingInner:e.padding)||0;return[0,e.rangeStep*lA(n,s,i)]}function Pwe(t,e,n){var i=e.schemeExtent,s,o;return he(e.scheme)?o=EE(e.scheme,e.interpolate,e.interpolateGamma):(s=e.scheme.toLowerCase(),o=gA(s),o||de("Unrecognized scheme name: ".concat(e.scheme))),n=t===vE?n+1:t===dA?n-1:t===Sp||t===TE?+e.schemeCount||Bwe:n,vV(t)?C4(o,i,e.reverse):wt(o)?xV(C4(o,i),n):t===cA?o:o.slice(0,n)}function C4(t,e,n){return wt(t)&&(e||n)?SV(t,yI(e||[0,1],n)):t}function yI(t,e){return e?t.slice().reverse():t}function sW(t){oe.call(this,null,t)}ve(sW,oe,{transform(t,e){const n=t.modified("sort")||e.changed(e.ADD)||e.modified(t.sort.fields)||e.modified("datum");return n&&e.source.sort(Mu(t.sort)),this.modified(n),e}});const R4="zero",rW="center",aW="normalize",oW=["y0","y1"];function sN(t){oe.call(this,null,t)}sN.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:R4,values:[R4,rW,aW]},{name:"as",type:"string",array:!0,length:2,default:oW}]};ve(sN,oe,{transform(t,e){var n=t.as||oW,i=n[0],s=n[1],o=Mu(t.sort),c=t.field||ng,d=t.offset===rW?Dwe:t.offset===aW?jwe:Uwe,f,u,a,_;for(f=zwe(e.source,t.groupby,o,c),u=0,a=f.length,_=f.max;u<a;++u)d(f[u],_,c,i,s);return e.reflow(t.modified()).modifies(n)}});function Dwe(t,e,n,i,s){for(var o=(e-t.sum)/2,c=t.length,d=0,f;d<c;++d)f=t[d],f[i]=o,f[s]=o+=Math.abs(n(f))}function jwe(t,e,n,i,s){for(var o=1/t.sum,c=0,d=t.length,f=0,u=0,a;f<d;++f)a=t[f],a[i]=c,a[s]=c=o*(u+=Math.abs(n(a)))}function Uwe(t,e,n,i,s){for(var o=0,c=0,d=t.length,f=0,u,a;f<d;++f)a=t[f],u=+n(a),u<0?(a[i]=c,a[s]=c+=u):(a[i]=o,a[s]=o+=u)}function zwe(t,e,n,i){var s=[],o=T=>T(a),c,d,f,u,a,_,w,m,l;if(e==null)s.push(t.slice());else for(c={},d=0,f=t.length;d<f;++d)a=t[d],_=e.map(o),w=c[_],w||(c[_]=w=[],s.push(w)),w.push(a);for(_=0,l=0,u=s.length;_<u;++_){for(w=s[_],d=0,m=0,f=w.length;d<f;++d)m+=Math.abs(i(w[d]));w.sum=m,m>l&&(l=m),n&&w.sort(n)}return s.max=l,s}const $we=Object.freeze(Object.defineProperty({__proto__:null,axisticks:YH,datajoin:XH,encode:KH,legendentries:JH,linkpath:nN,pie:iN,scale:nW,sortitems:sW,stack:sN},Symbol.toStringTag,{value:"Module"}));var qwe=Math.abs,mI=Math.cos,Vv=Math.sin,Gwe=1e-6,lW=Math.PI,wI=lW/2,L4=Vwe(2);function P4(t){return t>1?wI:t<-1?-wI:Math.asin(t)}function Vwe(t){return t>0?Math.sqrt(t):0}function Hwe(t,e){var n=t*Vv(e),i=30,s;do e-=s=(e+Vv(e)-n)/(1+mI(e));while(qwe(s)>Gwe&&--i>0);return e/2}function Wwe(t,e,n){function i(s,o){return[t*s*mI(o=Hwe(n,o)),e*Vv(o)]}return i.invert=function(s,o){return o=P4(o/e),[s/(t*mI(o)),P4((2*o+Vv(2*o))/n)]},i}var Ywe=Wwe(L4/wI,L4,lW);function Xwe(){return Vo(Ywe).scale(169.529)}const Kwe=_z(),bI=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function Jwe(t,e){return function n(){const i=e();return i.type=t,i.path=_z().projection(i),i.copy=i.copy||function(){const s=n();return bI.forEach(o=>{i[o]&&s[o](i[o]())}),s.path.pointRadius(i.path.pointRadius()),s},i}}function rN(t,e){if(!t||typeof t!="string")throw new Error("Projection type must be a name string.");return t=t.toLowerCase(),arguments.length>1?(Hv[t]=Jwe(t,e),this):Hv[t]||null}function cW(t){return t&&t.path||Kwe}const Hv={albers:mz,albersusa:Dne,azimuthalequalarea:jne,azimuthalequidistant:Une,conicconformal:qne,conicequalarea:xT,conicequidistant:Hne,equalEarth:Yne,equirectangular:Gne,gnomonic:Xne,identity:Kne,mercator:zne,mollweide:Xwe,naturalEarth1:Jne,orthographic:Qne,stereographic:Zne,transversemercator:eie};for(const t in Hv)rN(t,Hv[t]);function Qwe(){}const cl=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function dW(){var t=1,e=1,n=d;function i(f,u){return u.map(a=>s(f,a))}function s(f,u){var a=[],_=[];return o(f,u,w=>{n(w,f,u),Zwe(w)>0?a.push([w]):_.push(w)}),_.forEach(w=>{for(var m=0,l=a.length,T;m<l;++m)if(ebe((T=a[m])[0],w)!==-1){T.push(w);return}}),{type:"MultiPolygon",value:u,coordinates:a}}function o(f,u,a){var _=new Array,w=new Array,m,l,T,b,S,x;for(m=l=-1,b=f[0]>=u,cl[b<<1].forEach(B);++m<t-1;)T=b,b=f[m+1]>=u,cl[T|b<<1].forEach(B);for(cl[b<<0].forEach(B);++l<e-1;){for(m=-1,b=f[l*t+t]>=u,S=f[l*t]>=u,cl[b<<1|S<<2].forEach(B);++m<t-1;)T=b,b=f[l*t+t+m+1]>=u,x=S,S=f[l*t+m+1]>=u,cl[T|b<<1|S<<2|x<<3].forEach(B);cl[b|S<<3].forEach(B)}for(m=-1,S=f[l*t]>=u,cl[S<<2].forEach(B);++m<t-1;)x=S,S=f[l*t+m+1]>=u,cl[S<<2|x<<3].forEach(B);cl[S<<3].forEach(B);function B(F){var k=[F[0][0]+m,F[0][1]+l],A=[F[1][0]+m,F[1][1]+l],M=c(k),R=c(A),P,j;(P=w[M])?(j=_[R])?(delete w[P.end],delete _[j.start],P===j?(P.ring.push(A),a(P.ring)):_[P.start]=w[j.end]={start:P.start,end:j.end,ring:P.ring.concat(j.ring)}):(delete w[P.end],P.ring.push(A),w[P.end=R]=P):(P=_[R])?(j=w[M])?(delete _[P.start],delete w[j.end],P===j?(P.ring.push(A),a(P.ring)):_[j.start]=w[P.end]={start:j.start,end:P.end,ring:j.ring.concat(P.ring)}):(delete _[P.start],P.ring.unshift(k),_[P.start=M]=P):_[M]=w[R]={start:M,end:R,ring:[k,A]}}}function c(f){return f[0]*2+f[1]*(t+1)*4}function d(f,u,a){f.forEach(_=>{var w=_[0],m=_[1],l=w|0,T=m|0,b,S=u[T*t+l];w>0&&w<t&&l===w&&(b=u[T*t+l-1],_[0]=w+(a-b)/(S-b)-.5),m>0&&m<e&&T===m&&(b=u[(T-1)*t+l],_[1]=m+(a-b)/(S-b)-.5)})}return i.contour=s,i.size=function(f){if(!arguments.length)return[t,e];var u=Math.floor(f[0]),a=Math.floor(f[1]);return u>=0&&a>=0||de("invalid size"),t=u,e=a,i},i.smooth=function(f){return arguments.length?(n=f?d:Qwe,i):n===d},i}function Zwe(t){for(var e=0,n=t.length,i=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)i+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return i}function ebe(t,e){for(var n=-1,i=e.length,s;++n<i;)if(s=tbe(t,e[n]))return s;return 0}function tbe(t,e){for(var n=e[0],i=e[1],s=-1,o=0,c=t.length,d=c-1;o<c;d=o++){var f=t[o],u=f[0],a=f[1],_=t[d],w=_[0],m=_[1];if(nbe(f,_,e))return 0;a>i!=m>i&&n<(w-u)*(i-a)/(m-a)+u&&(s=-s)}return s}function nbe(t,e,n){var i;return ibe(t,e,n)&&sbe(t[i=+(t[0]===e[0])],n[i],e[i])}function ibe(t,e,n){return(e[0]-t[0])*(n[1]-t[1])===(n[0]-t[0])*(e[1]-t[1])}function sbe(t,e,n){return t<=e&&e<=n||n<=e&&e<=t}function fW(t,e,n){return function(i){var s=Do(i),o=n?Math.min(s[0],0):s[0],c=s[1],d=c-o,f=e?Hc(o,c,t):d/(t+1);return ar(o+f,c,f)}}function aN(t){oe.call(this,null,t)}aN.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};ve(aN,oe,{transform(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=e.materialize(e.SOURCE).source,s=t.field||Hi,o=dW().smooth(t.smooth!==!1),c=t.thresholds||rbe(i,s,t),d=t.as===null?null:t.as||"contour",f=[];return i.forEach(u=>{const a=s(u),_=o.size([a.width,a.height])(a.values,he(c)?c:c(a.values));abe(_,a,u,t),_.forEach(w=>{f.push(_E(u,Yt(d!=null?{[d]:w}:w)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=f,n}});function rbe(t,e,n){const i=fW(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?i:i(t.map(s=>Af(e(s).values)))}function abe(t,e,n,i){let s=i.scale||e.scale,o=i.translate||e.translate;if(wt(s)&&(s=s(n,i)),wt(o)&&(o=o(n,i)),(s===1||s==null)&&!o)return;const c=(ln(s)?s:s[0])||1,d=(ln(s)?s:s[1])||1,f=o&&o[0]||0,u=o&&o[1]||0;t.forEach(uW(e,c,d,f,u))}function uW(t,e,n,i,s){const o=t.x1||0,c=t.y1||0,d=e*n<0;function f(_){_.forEach(u)}function u(_){d&&_.reverse(),_.forEach(a)}function a(_){_[0]=(_[0]-o)*e+i,_[1]=(_[1]-c)*n+s}return function(_){return _.coordinates.forEach(f),_}}function D4(t,e,n){const i=t>=0?t:FF(e,n);return Math.round((Math.sqrt(4*i*i+1)-1)/2)}function Vx(t){return wt(t)?t:Wi(+t)}function hW(){var t=f=>f[0],e=f=>f[1],n=ng,i=[-1,-1],s=960,o=500,c=2;function d(f,u){const a=D4(i[0],f,t)>>c,_=D4(i[1],f,e)>>c,w=a?a+2:0,m=_?_+2:0,l=2*w+(s>>c),T=2*m+(o>>c),b=new Float32Array(l*T),S=new Float32Array(l*T);let x=b;f.forEach(F=>{const k=w+(+t(F)>>c),A=m+(+e(F)>>c);k>=0&&k<l&&A>=0&&A<T&&(b[k+A*l]+=+n(F))}),a>0&&_>0?(Qu(l,T,b,S,a),Zu(l,T,S,b,_),Qu(l,T,b,S,a),Zu(l,T,S,b,_),Qu(l,T,b,S,a),Zu(l,T,S,b,_)):a>0?(Qu(l,T,b,S,a),Qu(l,T,S,b,a),Qu(l,T,b,S,a),x=S):_>0&&(Zu(l,T,b,S,_),Zu(l,T,S,b,_),Zu(l,T,b,S,_),x=S);const B=u?Math.pow(2,-2*c):1/HU(x);for(let F=0,k=l*T;F<k;++F)x[F]*=B;return{values:x,scale:1<<c,width:l,height:T,x1:w,y1:m,x2:w+(s>>c),y2:m+(o>>c)}}return d.x=function(f){return arguments.length?(t=Vx(f),d):t},d.y=function(f){return arguments.length?(e=Vx(f),d):e},d.weight=function(f){return arguments.length?(n=Vx(f),d):n},d.size=function(f){if(!arguments.length)return[s,o];var u=+f[0],a=+f[1];return u>=0&&a>=0||de("invalid size"),s=u,o=a,d},d.cellSize=function(f){return arguments.length?((f=+f)>=1||de("invalid cell size"),c=Math.floor(Math.log(f)/Math.LN2),d):1<<c},d.bandwidth=function(f){return arguments.length?(f=Ie(f),f.length===1&&(f=[+f[0],+f[0]]),f.length!==2&&de("invalid bandwidth"),i=f,d):i},d}function Qu(t,e,n,i,s){const o=(s<<1)+1;for(let c=0;c<e;++c)for(let d=0,f=0;d<t+s;++d)d<t&&(f+=n[d+c*t]),d>=s&&(d>=o&&(f-=n[d-o+c*t]),i[d-s+c*t]=f/Math.min(d+1,t-1+o-d,o))}function Zu(t,e,n,i,s){const o=(s<<1)+1;for(let c=0;c<t;++c)for(let d=0,f=0;d<e+s;++d)d<e&&(f+=n[c+d*t]),d>=s&&(d>=o&&(f-=n[c+(d-o)*t]),i[c+(d-s)*t]=f/Math.min(d+1,e-1+o-d,o))}function oN(t){oe.call(this,null,t)}oN.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const obe=["x","y","weight","size","cellSize","bandwidth"];function pW(t,e){return obe.forEach(n=>e[n]!=null?t[n](e[n]):0),t}ve(oN,oe,{transform(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=e.materialize(e.SOURCE).source,s=lbe(i,t.groupby),o=(t.groupby||[]).map(Cn),c=pW(hW(),t),d=t.as||"grid",f=[];function u(a,_){for(let w=0;w<o.length;++w)a[o[w]]=_[w];return a}return f=s.map(a=>Yt(u({[d]:c(a,t.counts)},a.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=f,n}});function lbe(t,e){var n=[],i=a=>a(d),s,o,c,d,f,u;if(e==null)n.push(t);else for(s={},o=0,c=t.length;o<c;++o)d=t[o],f=e.map(i),u=s[f],u||(s[f]=u=[],u.dims=f,n.push(u)),u.push(d);return n}function lN(t){oe.call(this,null,t)}lN.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};ve(lN,oe,{transform(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=dW().smooth(t.smooth!==!1),s=t.values,o=t.thresholds||fW(t.count||10,t.nice,!!s),c=t.size,d,f;return s||(s=e.materialize(e.SOURCE).source,d=pW(hW(),t)(s,!0),f=uW(d,d.scale||1,d.scale||1,0,0),c=[d.width,d.height],s=d.values),o=he(o)?o:o(s),s=i.size(c)(s,o),f&&s.forEach(f),this.value&&(n.rem=this.value),this.value=n.source=n.add=(s||[]).map(Yt),n}});const TI="Feature",cN="FeatureCollection",cbe="MultiPoint";function dN(t){oe.call(this,null,t)}dN.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};ve(dN,oe,{transform(t,e){var n=this._features,i=this._points,s=t.fields,o=s&&s[0],c=s&&s[1],d=t.geojson||!s&&Hi,f=e.ADD,u;u=t.modified()||e.changed(e.REM)||e.modified(Ui(d))||o&&e.modified(Ui(o))||c&&e.modified(Ui(c)),(!this.value||u)&&(f=e.SOURCE,this._features=n=[],this._points=i=[]),d&&e.visit(f,a=>n.push(d(a))),o&&c&&(e.visit(f,a=>{var _=o(a),w=c(a);_!=null&&w!=null&&(_=+_)===_&&(w=+w)===w&&i.push([_,w])}),n=n.concat({type:TI,geometry:{type:cbe,coordinates:i}})),this.value={type:cN,features:n}}});function fN(t){oe.call(this,null,t)}fN.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};ve(fN,oe,{transform(t,e){var n=e.fork(e.ALL),i=this.value,s=t.field||Hi,o=t.as||"path",c=n.SOURCE;!i||t.modified()?(this.value=i=cW(t.projection),n.materialize().reflow()):c=s===Hi||e.modified(s.fields)?n.ADD_MOD:n.ADD;const d=dbe(i,t.pointRadius);return n.visit(c,f=>f[o]=i(s(f))),i.pointRadius(d),n.modifies(o)}});function dbe(t,e){const n=t.pointRadius();return t.context(null),e!=null&&t.pointRadius(e),n}function uN(t){oe.call(this,null,t)}uN.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};ve(uN,oe,{transform(t,e){var n=t.projection,i=t.fields[0],s=t.fields[1],o=t.as||["x","y"],c=o[0],d=o[1],f;function u(a){const _=n([i(a),s(a)]);_?(a[c]=_[0],a[d]=_[1]):(a[c]=void 0,a[d]=void 0)}return t.modified()?e=e.materialize().reflow(!0).visit(e.SOURCE,u):(f=e.modified(i.fields)||e.modified(s.fields),e.visit(f?e.ADD_MOD:e.ADD,u)),e.modifies(o)}});function hN(t){oe.call(this,null,t)}hN.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};ve(hN,oe,{transform(t,e){var n=e.fork(e.ALL),i=this.value,s=t.as||"shape",o=n.ADD;return(!i||t.modified())&&(this.value=i=fbe(cW(t.projection),t.field||Us("datum"),t.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,c=>c[s]=i),n.modifies(s)}});function fbe(t,e,n){const i=n==null?s=>t(e(s)):s=>{var o=t.pointRadius(),c=t.pointRadius(n)(e(s));return t.pointRadius(o),c};return i.context=s=>(t.context(s),i),i}function pN(t){oe.call(this,[],t),this.generator=yne()}pN.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};ve(pN,oe,{transform(t,e){var n=this.value,i=this.generator,s;if(!n.length||t.modified())for(const o in t)wt(i[o])&&i[o](t[o]);return s=i(),n.length?e.mod.push(DG(n[0],s)):e.add.push(Yt(s)),n[0]=s,e}});function gN(t){oe.call(this,null,t)}gN.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};ve(gN,oe,{transform(t,e){if(!e.changed()&&!t.modified())return e.StopPropagation;var n=e.materialize(e.SOURCE).source,i=t.resolve==="shared",s=t.field||Hi,o=hbe(t.opacity,t),c=ube(t.color,t),d=t.as||"image",f={$x:0,$y:0,$value:0,$max:i?Af(n.map(u=>Af(s(u).values))):0};return n.forEach(u=>{const a=s(u),_=mt({},u,f);i||(_.$max=Af(a.values||[])),u[d]=pbe(a,_,c.dep?c:Wi(c(_)),o.dep?o:Wi(o(_)))}),e.reflow(!0).modifies(d)}});function ube(t,e){let n;return wt(t)?(n=i=>Wc(t(i,e)),n.dep=gW(t)):n=Wi(Wc(t||"#888")),n}function hbe(t,e){let n;return wt(t)?(n=i=>t(i,e),n.dep=gW(t)):t?n=Wi(t):(n=i=>i.$value/i.$max||0,n.dep=!0),n}function gW(t){if(!wt(t))return!1;const e=Ma(Ui(t));return e.$x||e.$y||e.$value||e.$max}function pbe(t,e,n,i){const s=t.width,o=t.height,c=t.x1||0,d=t.y1||0,f=t.x2||s,u=t.y2||o,a=t.values,_=a?b=>a[b]:Ec,w=Uc(f-c,u-d),m=w.getContext("2d"),l=m.getImageData(0,0,f-c,u-d),T=l.data;for(let b=d,S=0;b<u;++b){e.$y=b-d;for(let x=c,B=b*s;x<f;++x,S+=4){e.$x=x-c,e.$value=_(x+B);const F=n(e);T[S+0]=F.r,T[S+1]=F.g,T[S+2]=F.b,T[S+3]=~~(255*i(e))}}return m.putImageData(l,0,0),w}function _W(t){oe.call(this,null,t),this.modified(!0)}ve(_W,oe,{transform(t,e){let n=this.value;return!n||t.modified("type")?(this.value=n=_be(t.type),bI.forEach(i=>{t[i]!=null&&j4(n,i,t[i])})):bI.forEach(i=>{t.modified(i)&&j4(n,i,t[i])}),t.pointRadius!=null&&n.path.pointRadius(t.pointRadius),t.fit&&gbe(n,t),e.fork(e.NO_SOURCE|e.NO_FIELDS)}});function gbe(t,e){const n=ybe(e.fit);e.extent?t.fitExtent(e.extent,n):e.size&&t.fitSize(e.size,n)}function _be(t){const e=rN((t||"mercator").toLowerCase());return e||de("Unrecognized projection type: "+t),e()}function j4(t,e,n){wt(t[e])&&t[e](n)}function ybe(t){return t=Ie(t),t.length===1?t[0]:{type:cN,features:t.reduce((e,n)=>e.concat(mbe(n)),[])}}function mbe(t){return t.type===cN?t.features:Ie(t).filter(e=>e!=null).map(e=>e.type===TI?e:{type:TI,geometry:e})}const wbe=Object.freeze(Object.defineProperty({__proto__:null,contour:lN,geojson:dN,geopath:fN,geopoint:uN,geoshape:hN,graticule:pN,heatmap:gN,isocontour:aN,kde2d:oN,projection:_W},Symbol.toStringTag,{value:"Module"})),U4={center:ote,collide:Bte,nbody:Pte,link:Ite,x:Dte,y:jte},y_="forces",vI=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],bbe=["static","iterations"],yW=["x","y","vx","vy"];function _N(t){oe.call(this,null,t)}_N.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:yW}]};ve(_N,oe,{transform(t,e){var n=this.value,i=e.changed(e.ADD_REM),s=t.modified(vI),o=t.iterations||300;if(n?(i&&(e.modifies("index"),n.nodes(e.source)),(s||e.changed(e.MOD))&&mW(n,t,0,e)):(this.value=n=vbe(e.source,t),n.on("tick",Tbe(e.dataflow,this)),t.static||(i=!0,n.tick()),e.modifies("index")),s||i||t.modified(bbe)||e.changed()&&t.restart){if(n.alpha(Math.max(n.alpha(),t.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/o)),t.static)for(n.stop();--o>=0;)n.tick();else if(n.stopped()&&n.restart(),!i)return e.StopPropagation}return this.finish(t,e)},finish(t,e){const n=e.dataflow;for(let d=this._argops,f=0,u=d.length,a;f<u;++f)if(a=d[f],!(a.name!==y_||a.op._argval.force!=="link")){for(var i=a.op._argops,s=0,o=i.length,c;s<o;++s)if(i[s].name==="links"&&(c=i[s].op.source)){n.pulse(c,n.changeset().reflow());break}}return e.reflow(t.modified()).modifies(yW)}});function Tbe(t,e){return()=>t.touch(e).run()}function vbe(t,e){const n=Lte(t),i=n.stop,s=n.restart;let o=!1;return n.stopped=()=>o,n.restart=()=>(o=!1,s()),n.stop=()=>(o=!0,i()),mW(n,e,!0).on("end",()=>o=!0)}function mW(t,e,n,i){var s=Ie(e.forces),o,c,d,f;for(o=0,c=vI.length;o<c;++o)d=vI[o],d!==y_&&e.modified(d)&&t[d](e[d]);for(o=0,c=s.length;o<c;++o)f=y_+o,d=n||e.modified(y_,o)?Sbe(s[o]):i&&Ebe(s[o],i)?t.force(f):null,d&&t.force(f,d);for(c=t.numForces||0;o<c;++o)t.force(y_+o,null);return t.numForces=s.length,t}function Ebe(t,e){var n,i;for(n in t)if(wt(i=t[n])&&e.modified(Ui(i)))return 1;return 0}function Sbe(t){var e,n;Le(U4,t.force)||de("Unrecognized force: "+t.force),e=U4[t.force]();for(n in t)wt(e[n])&&xbe(e[n],t[n],t);return e}function xbe(t,e,n){t(wt(e)?i=>e(i,n):e)}const Bbe=Object.freeze(Object.defineProperty({__proto__:null,force:_N},Symbol.toStringTag,{value:"Module"}));function EI(t,e,n){const i={};return t.each(s=>{const o=s.data;n(o)&&(i[e(o)]=s)}),t.lookup=i,t}function yN(t){oe.call(this,null,t)}yN.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const kbe=t=>t.values;ve(yN,oe,{transform(t,e){e.source||de("Nest transform requires an upstream data source.");var n=t.generate,i=t.modified(),s=e.clone(),o=this.value;return(!o||i||e.changed())&&(o&&o.each(c=>{c.children&&gE(c.data)&&s.rem.push(c.data)}),this.value=o=l2({values:Ie(t.keys).reduce((c,d)=>(c.key(d),c),Ibe()).entries(s.source)},kbe),n&&o.each(c=>{c.children&&(c=Yt(c.data),s.add.push(c),s.source.push(c))}),EI(o,De,De)),s.source.root=o,s}});function Ibe(){const t=[],e={entries:s=>i(n(s,0),0),key:s=>(t.push(s),e)};function n(s,o){if(o>=t.length)return s;const c=s.length,d=t[o++],f={},u={};let a=-1,_,w,m;for(;++a<c;)_=d(w=s[a])+"",(m=f[_])?m.push(w):f[_]=[w];for(_ in f)u[_]=n(f[_],o);return u}function i(s,o){if(++o>t.length)return s;const c=[];for(const d in s)c.push({key:d,values:i(s[d],o)});return c}return e}function Jl(t){oe.call(this,null,t)}const Fbe=(t,e)=>t.parent===e.parent?1:2;ve(Jl,oe,{transform(t,e){(!e.source||!e.source.root)&&de(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(t.method),i=this.fields,s=e.source.root,o=t.as||i;t.field?s.sum(t.field):s.count(),t.sort&&s.sort(Mu(t.sort,c=>c.data)),Obe(n,this.params,t),n.separation&&n.separation(t.separation!==!1?Fbe:ng);try{this.value=n(s)}catch(c){de(c)}return s.each(c=>Mbe(c,i,o)),e.reflow(t.modified()).modifies(o).modifies("leaf")}});function Obe(t,e,n){for(let i,s=0,o=e.length;s<o;++s)i=e[s],i in n&&t[i](n[i])}function Mbe(t,e,n){const i=t.data,s=e.length-1;for(let o=0;o<s;++o)i[n[o]]=t[e[o]];i[n[s]]=t.children?t.children.length:0}const SI=["x","y","r","depth","children"];function mN(t){Jl.call(this,t)}mN.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:SI.length,default:SI}]};ve(mN,Jl,{layout:jie,params:["radius","size","padding"],fields:SI});const xI=["x0","y0","x1","y1","depth","children"];function wN(t){Jl.call(this,t)}wN.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:xI.length,default:xI}]};ve(wN,Jl,{layout:Uie,params:["size","round","padding"],fields:xI});function bN(t){oe.call(this,null,t)}bN.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};ve(bN,oe,{transform(t,e){e.source||de("Stratify transform requires an upstream data source.");let n=this.value;const i=t.modified(),s=e.fork(e.ALL).materialize(e.SOURCE),o=!n||i||e.changed(e.ADD_REM)||e.modified(t.key.fields)||e.modified(t.parentKey.fields);return s.source=s.source.slice(),o&&(n=s.source.length?EI(TP().id(t.key).parentId(t.parentKey)(s.source),t.key,zr):EI(TP()([{}]),t.key,t.key)),s.source.root=this.value=n,s}});const z4={tidy:Kie,cluster:lie},BI=["x","y","depth","children"];function TN(t){Jl.call(this,t)}TN.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:BI.length,default:BI}]};ve(TN,Jl,{layout(t){const e=t||"tidy";if(Le(z4,e))return z4[e]();de("Unrecognized Tree layout method: "+e)},params:["size","nodeSize"],fields:BI});function vN(t){oe.call(this,[],t)}vN.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};ve(vN,oe,{transform(t,e){const n=this.value,i=e.source&&e.source.root,s=e.fork(e.NO_SOURCE),o={};return i||de("TreeLinks transform requires a tree data source."),e.changed(e.ADD_REM)?(s.rem=n,e.visit(e.SOURCE,c=>o[De(c)]=1),i.each(c=>{const d=c.data,f=c.parent&&c.parent.data;f&&o[De(d)]&&o[De(f)]&&s.add.push(Yt({source:f,target:d}))}),this.value=s.add):e.changed(e.MOD)&&(e.visit(e.MOD,c=>o[De(c)]=1),n.forEach(c=>{(o[De(c.source)]||o[De(c.target)])&&s.mod.push(c)})),s}});const $4={binary:Qie,dice:Hy,slice:C1,slicedice:Zie,squarify:Lz,resquarify:ese},kI=["x0","y0","x1","y1","depth","children"];function EN(t){Jl.call(this,t)}EN.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:kI.length,default:kI}]};ve(EN,Jl,{layout(){const t=Jie();return t.ratio=e=>{const n=t.tile();n.ratio&&t.tile(n.ratio(e))},t.method=e=>{Le($4,e)?t.tile($4[e]):de("Unrecognized Treemap layout method: "+e)},t},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:kI});const Abe=Object.freeze(Object.defineProperty({__proto__:null,nest:yN,pack:mN,partition:wN,stratify:bN,tree:TN,treelinks:vN,treemap:EN},Symbol.toStringTag,{value:"Module"})),Hx=4278190080;function Nbe(t,e){const n=t.bitmap();return(e||[]).forEach(i=>n.set(t(i.boundary[0]),t(i.boundary[3]))),[n,void 0]}function Cbe(t,e,n,i,s){const o=t.width,c=t.height,d=i||s,f=Uc(o,c).getContext("2d"),u=Uc(o,c).getContext("2d"),a=d&&Uc(o,c).getContext("2d");n.forEach(R=>N0(f,R,!1)),N0(u,e,!1),d&&N0(a,e,!0);const _=Wx(f,o,c),w=Wx(u,o,c),m=d&&Wx(a,o,c),l=t.bitmap(),T=d&&t.bitmap();let b,S,x,B,F,k,A,M;for(S=0;S<c;++S)for(b=0;b<o;++b)F=S*o+b,k=_[F]&Hx,M=w[F]&Hx,A=d&&m[F]&Hx,(k||A||M)&&(x=t(b),B=t(S),!s&&(k||M)&&l.set(x,B),d&&(k||A)&&T.set(x,B));return[l,T]}function Wx(t,e,n){return new Uint32Array(t.getImageData(0,0,e,n).data.buffer)}function N0(t,e,n){if(!e.length)return;const i=e[0].mark.marktype;i==="group"?e.forEach(s=>{s.items.forEach(o=>N0(t,o.items,n))}):ur[i].draw(t,{items:n?e.map(Rbe):e})}function Rbe(t){const e=_E(t,{});return e.stroke&&e.strokeOpacity!==0||e.fill&&e.fillOpacity!==0?{...e,strokeOpacity:1,stroke:"#000",fillOpacity:0}:e}const dl=5,Ji=31,wy=32,bc=new Uint32Array(wy+1),ca=new Uint32Array(wy+1);ca[0]=0;bc[0]=~ca[0];for(let t=1;t<=wy;++t)ca[t]=ca[t-1]<<1|1,bc[t]=~ca[t];function Lbe(t,e){const n=new Uint32Array(~~((t*e+wy)/wy));function i(o,c){n[o]|=c}function s(o,c){n[o]&=c}return{array:n,get:(o,c)=>{const d=c*t+o;return n[d>>>dl]&1<<(d&Ji)},set:(o,c)=>{const d=c*t+o;i(d>>>dl,1<<(d&Ji))},clear:(o,c)=>{const d=c*t+o;s(d>>>dl,~(1<<(d&Ji)))},getRange:(o,c,d,f)=>{let u=f,a,_,w,m;for(;u>=c;--u)if(a=u*t+o,_=u*t+d,w=a>>>dl,m=_>>>dl,w===m){if(n[w]&bc[a&Ji]&ca[(_&Ji)+1])return!0}else{if(n[w]&bc[a&Ji]||n[m]&ca[(_&Ji)+1])return!0;for(let l=w+1;l<m;++l)if(n[l])return!0}return!1},setRange:(o,c,d,f)=>{let u,a,_,w,m;for(;c<=f;++c)if(u=c*t+o,a=c*t+d,_=u>>>dl,w=a>>>dl,_===w)i(_,bc[u&Ji]&ca[(a&Ji)+1]);else for(i(_,bc[u&Ji]),i(w,ca[(a&Ji)+1]),m=_+1;m<w;++m)i(m,4294967295)},clearRange:(o,c,d,f)=>{let u,a,_,w,m;for(;c<=f;++c)if(u=c*t+o,a=c*t+d,_=u>>>dl,w=a>>>dl,_===w)s(_,ca[u&Ji]|bc[(a&Ji)+1]);else for(s(_,ca[u&Ji]),s(w,bc[(a&Ji)+1]),m=_+1;m<w;++m)s(m,0)},outOfBounds:(o,c,d,f)=>o<0||c<0||f>=e||d>=t}}function Pbe(t,e,n){const i=Math.max(1,Math.sqrt(t*e/1e6)),s=~~((t+2*n+i)/i),o=~~((e+2*n+i)/i),c=d=>~~((d+n)/i);return c.invert=d=>d*i-n,c.bitmap=()=>Lbe(s,o),c.ratio=i,c.padding=n,c.width=t,c.height=e,c}function Dbe(t,e,n,i){const s=t.width,o=t.height;return function(c){const d=c.datum.datum.items[i].items,f=d.length,u=c.datum.fontSize,a=Ea.width(c.datum,c.datum.text);let _=0,w,m,l,T,b,S,x;for(let B=0;B<f;++B)w=d[B].x,l=d[B].y,m=d[B].x2===void 0?w:d[B].x2,T=d[B].y2===void 0?l:d[B].y2,b=(w+m)/2,S=(l+T)/2,x=Math.abs(m-w+T-l),x>=_&&(_=x,c.x=b,c.y=S);return b=a/2,S=u/2,w=c.x-b,m=c.x+b,l=c.y-S,T=c.y+S,c.align="center",w<0&&m<=s?c.align="left":0<=w&&s<m&&(c.align="right"),c.baseline="middle",l<0&&T<=o?c.baseline="top":0<=l&&o<T&&(c.baseline="bottom"),!0}}function Wv(t,e,n,i,s,o){let c=n/2;return t-c<0||t+c>s||e-(c=i/2)<0||e+c>o}function Ac(t,e,n,i,s,o,c,d){const f=s*o/(i*2),u=t(e-f),a=t(e+f),_=t(n-(o=o/2)),w=t(n+o);return c.outOfBounds(u,_,a,w)||c.getRange(u,_,a,w)||d&&d.getRange(u,_,a,w)}function jbe(t,e,n,i){const s=t.width,o=t.height,c=e[0],d=e[1];function f(u,a,_,w,m){const l=t.invert(u),T=t.invert(a);let b=_,S=o,x;if(!Wv(l,T,w,m,s,o)&&!Ac(t,l,T,m,w,b,c,d)&&!Ac(t,l,T,m,w,m,c,null)){for(;S-b>=1;)x=(b+S)/2,Ac(t,l,T,m,w,x,c,d)?S=x:b=x;if(b>_)return[l,T,b,!0]}}return function(u){const a=u.datum.datum.items[i].items,_=a.length,w=u.datum.fontSize,m=Ea.width(u.datum,u.datum.text);let l=n?w:0,T=!1,b=!1,S=0,x,B,F,k,A,M,R,P,j,D,z,$,K,H,W,J,V;for(let le=0;le<_;++le){for(x=a[le].x,F=a[le].y,B=a[le].x2===void 0?x:a[le].x2,k=a[le].y2===void 0?F:a[le].y2,x>B&&(V=x,x=B,B=V),F>k&&(V=F,F=k,k=V),j=t(x),z=t(B),D=~~((j+z)/2),$=t(F),H=t(k),K=~~(($+H)/2),R=D;R>=j;--R)for(P=K;P>=$;--P)J=f(R,P,l,m,w),J&&([u.x,u.y,l,T]=J);for(R=D;R<=z;++R)for(P=K;P<=H;++P)J=f(R,P,l,m,w),J&&([u.x,u.y,l,T]=J);!T&&!n&&(W=Math.abs(B-x+k-F),A=(x+B)/2,M=(F+k)/2,W>=S&&!Wv(A,M,m,w,s,o)&&!Ac(t,A,M,w,m,w,c,null)&&(S=W,u.x=A,u.y=M,b=!0))}return T||b?(A=m/2,M=w/2,c.setRange(t(u.x-A),t(u.y-M),t(u.x+A),t(u.y+M)),u.align="center",u.baseline="middle",!0):!1}}const Ube=[-1,-1,1,1],zbe=[-1,1,-1,1];function $be(t,e,n,i){const s=t.width,o=t.height,c=e[0],d=e[1],f=t.bitmap();return function(u){const a=u.datum.datum.items[i].items,_=a.length,w=u.datum.fontSize,m=Ea.width(u.datum,u.datum.text),l=[];let T=n?w:0,b=!1,S=!1,x=0,B,F,k,A,M,R,P,j,D,z,$,K;for(let H=0;H<_;++H){for(B=a[H].x,k=a[H].y,F=a[H].x2===void 0?B:a[H].x2,A=a[H].y2===void 0?k:a[H].y2,l.push([t((B+F)/2),t((k+A)/2)]);l.length;)if([P,j]=l.pop(),!(c.get(P,j)||d.get(P,j)||f.get(P,j))){f.set(P,j);for(let W=0;W<4;++W)M=P+Ube[W],R=j+zbe[W],f.outOfBounds(M,R,M,R)||l.push([M,R]);if(M=t.invert(P),R=t.invert(j),D=T,z=o,!Wv(M,R,m,w,s,o)&&!Ac(t,M,R,w,m,D,c,d)&&!Ac(t,M,R,w,m,w,c,null)){for(;z-D>=1;)$=(D+z)/2,Ac(t,M,R,w,m,$,c,d)?z=$:D=$;D>T&&(u.x=M,u.y=R,T=D,b=!0)}}!b&&!n&&(K=Math.abs(F-B+A-k),M=(B+F)/2,R=(k+A)/2,K>=x&&!Wv(M,R,m,w,s,o)&&!Ac(t,M,R,w,m,w,c,null)&&(x=K,u.x=M,u.y=R,S=!0))}return b||S?(M=m/2,R=w/2,c.setRange(t(u.x-M),t(u.y-R),t(u.x+M),t(u.y+R)),u.align="center",u.baseline="middle",!0):!1}}const qbe=["right","center","left"],Gbe=["bottom","middle","top"];function Vbe(t,e,n,i){const s=t.width,o=t.height,c=e[0],d=e[1],f=i.length;return function(u){var a;const _=u.boundary,w=u.datum.fontSize;if(_[2]<0||_[5]<0||_[0]>s||_[3]>o)return!1;let m=(a=u.textWidth)!==null&&a!==void 0?a:0,l,T,b,S,x,B,F,k,A,M,R,P,j,D,z;for(let $=0;$<f;++$){if(l=(n[$]&3)-1,T=(n[$]>>>2&3)-1,b=l===0&&T===0||i[$]<0,S=l&&T?Math.SQRT1_2:1,x=i[$]<0?-1:1,B=_[1+l]+i[$]*l*S,R=_[4+T]+x*w*T/2+i[$]*T*S,k=R-w/2,A=R+w/2,P=t(B),D=t(k),z=t(A),!m)if(q4(P,P,D,z,c,d,B,B,k,A,_,b))m=Ea.width(u.datum,u.datum.text);else continue;if(M=B+x*m*l/2,B=M-m/2,F=M+m/2,P=t(B),j=t(F),q4(P,j,D,z,c,d,B,F,k,A,_,b))return u.x=l?l*x<0?F:B:M,u.y=T?T*x<0?A:k:R,u.align=qbe[l*x+1],u.baseline=Gbe[T*x+1],c.setRange(P,D,j,z),!0}return!1}}function q4(t,e,n,i,s,o,c,d,f,u,a,_){return!(s.outOfBounds(t,n,e,i)||(_&&o||s).getRange(t,n,e,i))}const Yx=0,Xx=4,Kx=8,Jx=0,Qx=1,Zx=2,Hbe={"top-left":Yx+Jx,top:Yx+Qx,"top-right":Yx+Zx,left:Xx+Jx,middle:Xx+Qx,right:Xx+Zx,"bottom-left":Kx+Jx,bottom:Kx+Qx,"bottom-right":Kx+Zx},Wbe={naive:Dbe,"reduced-search":jbe,floodfill:$be};function Ybe(t,e,n,i,s,o,c,d,f,u,a){if(!t.length)return t;const _=Math.max(i.length,s.length),w=Xbe(i,_),m=Kbe(s,_),l=Jbe(t[0].datum),T=l==="group"&&t[0].datum.items[f].marktype,b=T==="area",S=Qbe(l,T,d,f),x=u===null||u===1/0,B=b&&a==="naive";let F=-1,k=-1;const A=t.map(j=>{const D=x?Ea.width(j,j.text):void 0;return F=Math.max(F,D),k=Math.max(k,j.fontSize),{datum:j,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:S(j),textWidth:D}});u=u===null||u===1/0?Math.max(F,k)+Math.max(...i):u;const M=Pbe(e[0],e[1],u);let R;if(!B){n&&A.sort((z,$)=>n(z.datum,$.datum));let j=!1;for(let z=0;z<m.length&&!j;++z)j=m[z]===5||w[z]<0;const D=(l&&c||b)&&t.map(z=>z.datum);R=o.length||D?Cbe(M,D||[],o,j,b):Nbe(M,c&&A)}const P=b?Wbe[a](M,R,c,f):Vbe(M,R,m,w);return A.forEach(j=>j.opacity=+P(j)),A}function Xbe(t,e){const n=new Float64Array(e),i=t.length;for(let s=0;s<i;++s)n[s]=t[s]||0;for(let s=i;s<e;++s)n[s]=n[i-1];return n}function Kbe(t,e){const n=new Int8Array(e),i=t.length;for(let s=0;s<i;++s)n[s]|=Hbe[t[s]];for(let s=i;s<e;++s)n[s]=n[i-1];return n}function Jbe(t){return t&&t.mark&&t.mark.marktype}function Qbe(t,e,n,i){const s=o=>[o.x,o.x,o.x,o.y,o.y,o.y];return t?t==="line"||t==="area"?o=>s(o.datum):e==="line"?o=>{const c=o.datum.items[i].items;return s(c.length?c[n==="start"?0:c.length-1]:{x:NaN,y:NaN})}:o=>{const c=o.datum.bounds;return[c.x1,(c.x1+c.x2)/2,c.x2,c.y1,(c.y1+c.y2)/2,c.y2]}:s}const II=["x","y","opacity","align","baseline"],wW=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function SN(t){oe.call(this,null,t)}SN.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:wW},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:II.length,default:II}]};ve(SN,oe,{transform(t,e){function n(o){const c=t[o];return wt(c)&&e.modified(c.fields)}const i=t.modified();if(!(i||e.changed(e.ADD_REM)||n("sort")))return;(!t.size||t.size.length!==2)&&de("Size parameter should be specified as a [width, height] array.");const s=t.as||II;return Ybe(e.materialize(e.SOURCE).source||[],t.size,t.sort,Ie(t.offset==null?1:t.offset),Ie(t.anchor||wW),t.avoidMarks||[],t.avoidBaseMark!==!1,t.lineAnchor||"end",t.markIndex||0,t.padding===void 0?0:t.padding,t.method||"naive").forEach(o=>{const c=o.datum;c[s[0]]=o.x,c[s[1]]=o.y,c[s[2]]=o.opacity,c[s[3]]=o.align,c[s[4]]=o.baseline}),e.reflow(i).modifies(s)}});const Zbe=Object.freeze(Object.defineProperty({__proto__:null,label:SN},Symbol.toStringTag,{value:"Module"}));function bW(t,e){var n=[],i=function(a){return a(d)},s,o,c,d,f,u;if(e==null)n.push(t);else for(s={},o=0,c=t.length;o<c;++o)d=t[o],f=e.map(i),u=s[f],u||(s[f]=u=[],u.dims=f,n.push(u)),u.push(d);return n}function xN(t){oe.call(this,null,t)}xN.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};ve(xN,oe,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const i=e.materialize(e.SOURCE).source,s=bW(i,t.groupby),o=(t.groupby||[]).map(Cn),c=o.length,d=t.as||[Cn(t.x),Cn(t.y)],f=[];s.forEach(u=>{s8(u,t.x,t.y,t.bandwidth||.3).forEach(a=>{const _={};for(let w=0;w<c;++w)_[o[w]]=u.dims[w];_[d[0]]=a[0],_[d[1]]=a[1],f.push(Yt(_))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const FI={linear:$F,log:e8,exp:t8,pow:n8,quad:qF,poly:i8},e0e=(t,e)=>t==="poly"?e:t==="quad"?2:1;function BN(t){oe.call(this,null,t)}BN.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(FI)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};ve(BN,oe,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const i=e.materialize(e.SOURCE).source,s=bW(i,t.groupby),o=(t.groupby||[]).map(Cn),c=t.method||"linear",d=t.order||3,f=e0e(c,d),u=t.as||[Cn(t.x),Cn(t.y)],a=FI[c],_=[];let w=t.extent;Le(FI,c)||de("Invalid regression method: "+c),w!=null&&c==="log"&&w[0]<=0&&(e.dataflow.warn("Ignoring extent with values <= 0 for log regression."),w=null),s.forEach(m=>{if(m.length<=f){e.dataflow.warn("Skipping regression with more parameters than data points.");return}const T=a(m,t.x,t.y,d);if(t.params){_.push(Yt({keys:m.dims,coef:T.coef,rSquared:T.rSquared}));return}const b=w||Do(m,t.x),S=x=>{const B={};for(let F=0;F<o.length;++F)B[o[F]]=m.dims[F];B[u[0]]=x[0],B[u[1]]=x[1],_.push(Yt(B))};c==="linear"?b.forEach(x=>S([x,T.predict(x)])):x1(T.predict,b,25,200).forEach(S)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=_}return n}});const t0e=Object.freeze(Object.defineProperty({__proto__:null,loess:xN,regression:BN},Symbol.toStringTag,{value:"Module"}));function kN(t){oe.call(this,null,t)}kN.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const n0e=[-1e5,-1e5,1e5,1e5];ve(kN,oe,{transform(t,e){const n=t.as||"path",i=e.source;if(!i||!i.length)return e;let s=t.size;s=s?[0,0,s[0],s[1]]:(s=t.extent)?[s[0][0],s[0][1],s[1][0],s[1][1]]:n0e;const o=this.value=KF.from(i,t.x,t.y).voronoi(s);for(let c=0,d=i.length;c<d;++c){const f=o.cellPolygon(c);i[c][n]=f?i0e(f):null}return e.reflow(t.modified()).modifies(n)}});function i0e(t){const e=t[0][0],n=t[0][1];let i=t.length-1;for(;t[i][0]===e&&t[i][1]===n;--i);return"M"+t.slice(0,i+1).join("L")+"Z"}const s0e=Object.freeze(Object.defineProperty({__proto__:null,voronoi:kN},Symbol.toStringTag,{value:"Module"}));var eB=Math.PI/180,m_=1<<11>>5,C0=1<<11;function r0e(){var t=[256,256],e,n,i,s,o,c,d,f=TW,u=[],a=Math.random,_={};_.layout=function(){for(var l=w(Uc()),T=f0e((t[0]>>5)*t[1]),b=null,S=u.length,x=-1,B=[],F=u.map(A=>({text:e(A),font:n(A),style:s(A),weight:o(A),rotate:c(A),size:~~(i(A)+1e-14),padding:d(A),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:A})).sort((A,M)=>M.size-A.size);++x<S;){var k=F[x];k.x=t[0]*(a()+.5)>>1,k.y=t[1]*(a()+.5)>>1,a0e(l,k,F,x),k.hasText&&m(T,k,b)&&(B.push(k),b?l0e(b,k):b=[{x:k.x+k.x0,y:k.y+k.y0},{x:k.x+k.x1,y:k.y+k.y1}],k.x-=t[0]>>1,k.y-=t[1]>>1)}return B};function w(l){l.width=l.height=1;var T=Math.sqrt(l.getContext("2d").getImageData(0,0,1,1).data.length>>2);l.width=(m_<<5)/T,l.height=C0/T;var b=l.getContext("2d");return b.fillStyle=b.strokeStyle="red",b.textAlign="center",{context:b,ratio:T}}function m(l,T,b){for(var S=T.x,x=T.y,B=Math.sqrt(t[0]*t[0]+t[1]*t[1]),F=f(t),k=a()<.5?1:-1,A=-k,M,R,P;(M=F(A+=k))&&(R=~~M[0],P=~~M[1],!(Math.min(Math.abs(R),Math.abs(P))>=B));)if(T.x=S+R,T.y=x+P,!(T.x+T.x0<0||T.y+T.y0<0||T.x+T.x1>t[0]||T.y+T.y1>t[1])&&(!b||!o0e(T,l,t[0]))&&(!b||c0e(T,b))){for(var j=T.sprite,D=T.width>>5,z=t[0]>>5,$=T.x-(D<<4),K=$&127,H=32-K,W=T.y1-T.y0,J=(T.y+T.y0)*z+($>>5),V,le=0;le<W;le++){V=0;for(var pe=0;pe<=D;pe++)l[J+pe]|=V<<H|(pe<D?(V=j[le*D+pe])>>>K:0);J+=z}return T.sprite=null,!0}return!1}return _.words=function(l){return arguments.length?(u=l,_):u},_.size=function(l){return arguments.length?(t=[+l[0],+l[1]],_):t},_.font=function(l){return arguments.length?(n=Vd(l),_):n},_.fontStyle=function(l){return arguments.length?(s=Vd(l),_):s},_.fontWeight=function(l){return arguments.length?(o=Vd(l),_):o},_.rotate=function(l){return arguments.length?(c=Vd(l),_):c},_.text=function(l){return arguments.length?(e=Vd(l),_):e},_.spiral=function(l){return arguments.length?(f=u0e[l]||l,_):f},_.fontSize=function(l){return arguments.length?(i=Vd(l),_):i},_.padding=function(l){return arguments.length?(d=Vd(l),_):d},_.random=function(l){return arguments.length?(a=l,_):a},_}function a0e(t,e,n,i){if(!e.sprite){var s=t.context,o=t.ratio;s.clearRect(0,0,(m_<<5)/o,C0/o);var c=0,d=0,f=0,u=n.length,a,_,w,m,l;for(--i;++i<u;){if(e=n[i],s.save(),s.font=e.style+" "+e.weight+" "+~~((e.size+1)/o)+"px "+e.font,a=s.measureText(e.text+"m").width*o,w=e.size<<1,e.rotate){var T=Math.sin(e.rotate*eB),b=Math.cos(e.rotate*eB),S=a*b,x=a*T,B=w*b,F=w*T;a=Math.max(Math.abs(S+F),Math.abs(S-F))+31>>5<<5,w=~~Math.max(Math.abs(x+B),Math.abs(x-B))}else a=a+31>>5<<5;if(w>f&&(f=w),c+a>=m_<<5&&(c=0,d+=f,f=0),d+w>=C0)break;s.translate((c+(a>>1))/o,(d+(w>>1))/o),e.rotate&&s.rotate(e.rotate*eB),s.fillText(e.text,0,0),e.padding&&(s.lineWidth=2*e.padding,s.strokeText(e.text,0,0)),s.restore(),e.width=a,e.height=w,e.xoff=c,e.yoff=d,e.x1=a>>1,e.y1=w>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,c+=a}for(var k=s.getImageData(0,0,(m_<<5)/o,C0/o).data,A=[];--i>=0;)if(e=n[i],!!e.hasText){for(a=e.width,_=a>>5,w=e.y1-e.y0,m=0;m<w*_;m++)A[m]=0;if(c=e.xoff,c==null)return;d=e.yoff;var M=0,R=-1;for(l=0;l<w;l++){for(m=0;m<a;m++){var P=_*l+(m>>5),j=k[(d+l)*(m_<<5)+(c+m)<<2]?1<<31-m%32:0;A[P]|=j,M|=j}M?R=l:(e.y0++,w--,l--,d++)}e.y1=e.y0+R,e.sprite=A.slice(0,(e.y1-e.y0)*_)}}}function o0e(t,e,n){n>>=5;for(var i=t.sprite,s=t.width>>5,o=t.x-(s<<4),c=o&127,d=32-c,f=t.y1-t.y0,u=(t.y+t.y0)*n+(o>>5),a,_=0;_<f;_++){a=0;for(var w=0;w<=s;w++)if((a<<d|(w<s?(a=i[_*s+w])>>>c:0))&e[u+w])return!0;u+=n}return!1}function l0e(t,e){var n=t[0],i=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>i.x&&(i.x=e.x+e.x1),e.y+e.y1>i.y&&(i.y=e.y+e.y1)}function c0e(t,e){return t.x+t.x1>e[0].x&&t.x+t.x0<e[1].x&&t.y+t.y1>e[0].y&&t.y+t.y0<e[1].y}function TW(t){var e=t[0]/t[1];return function(n){return[e*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function d0e(t){var e=4,n=e*t[0]/t[1],i=0,s=0;return function(o){var c=o<0?-1:1;switch(Math.sqrt(1+4*c*o)-c&3){case 0:i+=n;break;case 1:s+=e;break;case 2:i-=n;break;default:s-=e;break}return[i,s]}}function f0e(t){for(var e=[],n=-1;++n<t;)e[n]=0;return e}function Vd(t){return typeof t=="function"?t:function(){return t}}var u0e={archimedean:TW,rectangular:d0e};const vW=["x","y","font","fontSize","fontStyle","fontWeight","angle"],h0e=["text","font","rotate","fontSize","fontStyle","fontWeight"];function IN(t){oe.call(this,r0e(),t)}IN.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:vW}]};ve(IN,oe,{transform(t,e){t.size&&!(t.size[0]&&t.size[1])&&de("Wordcloud size dimensions must be non-zero.");function n(l){const T=t[l];return wt(T)&&e.modified(T.fields)}const i=t.modified();if(!(i||e.changed(e.ADD_REM)||h0e.some(n)))return;const s=e.materialize(e.SOURCE).source,o=this.value,c=t.as||vW;let d=t.fontSize||14,f;if(wt(d)?f=t.fontSizeRange:d=Wi(d),f){const l=d,T=Vt("sqrt")().domain(Do(s,l)).range(f);d=b=>T(l(b))}s.forEach(l=>{l[c[0]]=NaN,l[c[1]]=NaN,l[c[3]]=0});const u=o.words(s).text(t.text).size(t.size||[500,500]).padding(t.padding||1).spiral(t.spiral||"archimedean").rotate(t.rotate||0).font(t.font||"sans-serif").fontStyle(t.fontStyle||"normal").fontWeight(t.fontWeight||"normal").fontSize(d).random(Rr).layout(),a=o.size(),_=a[0]>>1,w=a[1]>>1,m=u.length;for(let l=0,T,b;l<m;++l)T=u[l],b=T.datum,b[c[0]]=T.x+_,b[c[1]]=T.y+w,b[c[2]]=T.font,b[c[3]]=T.size,b[c[4]]=T.style,b[c[5]]=T.weight,b[c[6]]=T.rotate;return e.reflow(i).modifies(c)}});const p0e=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:IN},Symbol.toStringTag,{value:"Module"})),g0e=t=>new Uint8Array(t),_0e=t=>new Uint16Array(t),C_=t=>new Uint32Array(t);function y0e(){let t=8,e=[],n=C_(0),i=zb(0,t),s=zb(0,t);return{data:()=>e,seen:()=>n=m0e(n,e.length),add(o){for(let c=0,d=e.length,f=o.length,u;c<f;++c)u=o[c],u._index=d++,e.push(u)},remove(o,c){const d=e.length,f=Array(d-o),u=e;let a,_,w;for(_=0;!c[_]&&_<d;++_)f[_]=e[_],u[_]=_;for(w=_;_<d;++_)a=e[_],c[_]?u[_]=-1:(u[_]=w,i[w]=i[_],s[w]=s[_],f[w]=a,a._index=w++),i[_]=0;return e=f,u},size:()=>e.length,curr:()=>i,prev:()=>s,reset:o=>s[o]=i[o],all:()=>t<257?255:t<65537?65535:4294967295,set(o,c){i[o]|=c},clear(o,c){i[o]&=~c},resize(o,c){const d=i.length;(o>d||c>t)&&(t=Math.max(c,t),i=zb(o,t,i),s=zb(o,t))}}}function m0e(t,e,n){return t.length>=e?t:(n=n||new t.constructor(e),n.set(t),n)}function zb(t,e,n){const i=(e<257?g0e:e<65537?_0e:C_)(t);return n&&i.set(n),i}function G4(t,e,n){const i=1<<e;return{one:i,zero:~i,range:n.slice(),bisect:t.bisect,index:t.index,size:t.size,onAdd(s,o){const c=this,d=c.bisect(c.range,s.value),f=s.index,u=d[0],a=d[1],_=f.length;let w;for(w=0;w<u;++w)o[f[w]]|=i;for(w=a;w<_;++w)o[f[w]]|=i;return c}}}function V4(){let t=C_(0),e=[],n=0;function i(d,f,u){if(!f.length)return[];const a=n,_=f.length,w=C_(_);let m=Array(_),l,T,b;for(b=0;b<_;++b)m[b]=d(f[b]),w[b]=b;if(m=w0e(m,w),a)l=e,T=t,e=Array(a+_),t=C_(a+_),b0e(u,l,T,a,m,w,_,e,t);else{if(u>0)for(b=0;b<_;++b)w[b]+=u;e=m,t=w}return n=a+_,{index:w,value:m}}function s(d,f){const u=n;let a,_,w;for(_=0;!f[t[_]]&&_<u;++_);for(w=_;_<u;++_)f[a=t[_]]||(t[w]=a,e[w]=e[_],++w);n=u-d}function o(d){for(let f=0,u=n;f<u;++f)t[f]=d[t[f]]}function c(d,f){let u;return f?u=f.length:(f=e,u=n),[vZ(f,d[0],0,u),H0(f,d[1],0,u)]}return{insert:i,remove:s,bisect:c,reindex:o,index:()=>t,size:()=>n}}function w0e(t,e){return t.sort.call(e,(n,i)=>{const s=t[n],o=t[i];return s<o?-1:s>o?1:0}),xZ(t,e)}function b0e(t,e,n,i,s,o,c,d,f){let u=0,a=0,_;for(_=0;u<i&&a<c;++_)e[u]<s[a]?(d[_]=e[u],f[_]=n[u++]):(d[_]=s[a],f[_]=o[a++]+t);for(;u<i;++u,++_)d[_]=e[u],f[_]=n[u];for(;a<c;++a,++_)d[_]=s[a],f[_]=o[a]+t}function FN(t){oe.call(this,y0e(),t),this._indices=null,this._dims=null}FN.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};ve(FN,oe,{transform(t,e){if(this._dims){var n=t.modified("fields")||t.fields.some(i=>e.modified(i.fields));return n?this.reinit(t,e):this.eval(t,e)}else return this.init(t,e)},init(t,e){const n=t.fields,i=t.query,s=this._indices={},o=this._dims=[],c=i.length;let d=0,f,u;for(;d<c;++d)f=n[d].fname,u=s[f]||(s[f]=V4()),o.push(G4(u,d,i[d]));return this.eval(t,e)},reinit(t,e){const n=e.materialize().fork(),i=t.fields,s=t.query,o=this._indices,c=this._dims,d=this.value,f=d.curr(),u=d.prev(),a=d.all(),_=n.rem=n.add,w=n.mod,m=s.length,l={};let T,b,S,x,B,F,k,A,M;if(u.set(f),e.rem.length&&(B=this.remove(t,e,n)),e.add.length&&d.add(e.add),e.mod.length)for(F={},x=e.mod,k=0,A=x.length;k<A;++k)F[x[k]._index]=1;for(k=0;k<m;++k)M=i[k],(!c[k]||t.modified("fields",k)||e.modified(M.fields))&&(S=M.fname,(T=l[S])||(o[S]=b=V4(),l[S]=T=b.insert(M,e.source,0)),c[k]=G4(b,k,s[k]).onAdd(T,f));for(k=0,A=d.data().length;k<A;++k)B[k]||(u[k]!==f[k]?_.push(k):F[k]&&f[k]!==a&&w.push(k));return d.mask=(1<<m)-1,n},eval(t,e){const n=e.materialize().fork(),i=this._dims.length;let s=0;return e.rem.length&&(this.remove(t,e,n),s|=(1<<i)-1),t.modified("query")&&!t.modified("fields")&&(s|=this.update(t,e,n)),e.add.length&&(this.insert(t,e,n),s|=(1<<i)-1),e.mod.length&&(this.modify(e,n),s|=(1<<i)-1),this.value.mask=s,n},insert(t,e,n){const i=e.add,s=this.value,o=this._dims,c=this._indices,d=t.fields,f={},u=n.add,a=s.size()+i.length,_=o.length;let w=s.size(),m,l,T;s.resize(a,_),s.add(i);const b=s.curr(),S=s.prev(),x=s.all();for(m=0;m<_;++m)l=d[m].fname,T=f[l]||(f[l]=c[l].insert(d[m],i,w)),o[m].onAdd(T,b);for(;w<a;++w)S[w]=x,b[w]!==x&&u.push(w)},modify(t,e){const n=e.mod,i=this.value,s=i.curr(),o=i.all(),c=t.mod;let d,f,u;for(d=0,f=c.length;d<f;++d)u=c[d]._index,s[u]!==o&&n.push(u)},remove(t,e,n){const i=this._indices,s=this.value,o=s.curr(),c=s.prev(),d=s.all(),f={},u=n.rem,a=e.rem;let _,w,m,l;for(_=0,w=a.length;_<w;++_)m=a[_]._index,f[m]=1,c[m]=l=o[m],o[m]=d,l!==d&&u.push(m);for(m in i)i[m].remove(w,f);return this.reindex(e,w,f),f},reindex(t,e,n){const i=this._indices,s=this.value;t.runAfter(()=>{const o=s.remove(e,n);for(const c in i)i[c].reindex(o)})},update(t,e,n){const i=this._dims,s=t.query,o=e.stamp,c=i.length;let d=0,f,u;for(n.filters=0,u=0;u<c;++u)t.modified("query",u)&&(f=u,++d);if(d===1)d=i[f].one,this.incrementOne(i[f],s[f],n.add,n.rem);else for(u=0,d=0;u<c;++u)!t.modified("query",u)||(d|=i[u].one,this.incrementAll(i[u],s[u],o,n.add),n.rem=n.add);return d},incrementAll(t,e,n,i){const s=this.value,o=s.seen(),c=s.curr(),d=s.prev(),f=t.index(),u=t.bisect(t.range),a=t.bisect(e),_=a[0],w=a[1],m=u[0],l=u[1],T=t.one;let b,S,x;if(_<m)for(b=_,S=Math.min(m,w);b<S;++b)x=f[b],o[x]!==n&&(d[x]=c[x],o[x]=n,i.push(x)),c[x]^=T;else if(_>m)for(b=m,S=Math.min(_,l);b<S;++b)x=f[b],o[x]!==n&&(d[x]=c[x],o[x]=n,i.push(x)),c[x]^=T;if(w>l)for(b=Math.max(_,l),S=w;b<S;++b)x=f[b],o[x]!==n&&(d[x]=c[x],o[x]=n,i.push(x)),c[x]^=T;else if(w<l)for(b=Math.max(m,w),S=l;b<S;++b)x=f[b],o[x]!==n&&(d[x]=c[x],o[x]=n,i.push(x)),c[x]^=T;t.range=e.slice()},incrementOne(t,e,n,i){const s=this.value,o=s.curr(),c=t.index(),d=t.bisect(t.range),f=t.bisect(e),u=f[0],a=f[1],_=d[0],w=d[1],m=t.one;let l,T,b;if(u<_)for(l=u,T=Math.min(_,a);l<T;++l)b=c[l],o[b]^=m,n.push(b);else if(u>_)for(l=_,T=Math.min(u,w);l<T;++l)b=c[l],o[b]^=m,i.push(b);if(a>w)for(l=Math.max(u,w),T=a;l<T;++l)b=c[l],o[b]^=m,n.push(b);else if(a<w)for(l=Math.max(_,a),T=w;l<T;++l)b=c[l],o[b]^=m,i.push(b);t.range=e.slice()}});function ON(t){oe.call(this,null,t)}ON.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};ve(ON,oe,{transform(t,e){const n=~(t.ignore||0),i=t.filter,s=i.mask;if((s&n)===0)return e.StopPropagation;const o=e.fork(e.ALL),c=i.data(),d=i.curr(),f=i.prev(),u=a=>d[a]&n?null:c[a];return o.filter(o.MOD,u),s&s-1?(o.filter(o.ADD,a=>{const _=d[a]&n;return!_&&_^f[a]&n?c[a]:null}),o.filter(o.REM,a=>{const _=d[a]&n;return _&&!(_^(_^f[a]&n))?c[a]:null})):(o.filter(o.ADD,u),o.filter(o.REM,a=>(d[a]&n)===s?c[a]:null)),o.filter(o.SOURCE,a=>u(a._index))}});const T0e=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:FN,resolvefilter:ON},Symbol.toStringTag,{value:"Module"})),v0e="RawCode",nu="Literal",E0e="Property",S0e="Identifier",x0e="ArrayExpression",B0e="BinaryExpression",EW="CallExpression",k0e="ConditionalExpression",I0e="LogicalExpression",F0e="MemberExpression",O0e="ObjectExpression",M0e="UnaryExpression";function Da(t){this.type=t}Da.prototype.visit=function(t){let e,n,i;if(t(this))return 1;for(e=A0e(this),n=0,i=e.length;n<i;++n)if(e[n].visit(t))return 1};function A0e(t){switch(t.type){case x0e:return t.elements;case B0e:case I0e:return[t.left,t.right];case EW:return[t.callee].concat(t.arguments);case k0e:return[t.test,t.consequent,t.alternate];case F0e:return[t.object,t.property];case O0e:return t.properties;case E0e:return[t.key,t.value];case M0e:return[t.argument];case S0e:case nu:case v0e:default:return[]}}var Qo,Ae,ce,$i,sn,LE=1,Im=2,iu=3,Md=4,PE=5,Cu=6,bs=7,Fm=8,N0e=9;Qo={};Qo[LE]="Boolean";Qo[Im]="<end>";Qo[iu]="Identifier";Qo[Md]="Keyword";Qo[PE]="Null";Qo[Cu]="Numeric";Qo[bs]="Punctuator";Qo[Fm]="String";Qo[N0e]="RegularExpression";var C0e="ArrayExpression",R0e="BinaryExpression",L0e="CallExpression",P0e="ConditionalExpression",SW="Identifier",D0e="Literal",j0e="LogicalExpression",U0e="MemberExpression",z0e="ObjectExpression",$0e="Property",q0e="UnaryExpression",fi="Unexpected token %0",G0e="Unexpected number",V0e="Unexpected string",H0e="Unexpected identifier",W0e="Unexpected reserved word",Y0e="Unexpected end of input",OI="Invalid regular expression",tB="Invalid regular expression: missing /",xW="Octal literals are not allowed in strict mode.",X0e="Duplicate data property in object literal not allowed in strict mode",vi="ILLEGAL",by="Disabled.",K0e=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),J0e=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function DE(t,e){if(!t)throw new Error("ASSERT: "+e)}function yl(t){return t>=48&&t<=57}function MN(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function R_(t){return"01234567".indexOf(t)>=0}function Q0e(t){return t===32||t===9||t===11||t===12||t===160||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function Ty(t){return t===10||t===13||t===8232||t===8233}function Om(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t===92||t>=128&&K0e.test(String.fromCharCode(t))}function Yv(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||t===92||t>=128&&J0e.test(String.fromCharCode(t))}const Z0e={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function BW(){for(;ce<$i;){const t=Ae.charCodeAt(ce);if(Q0e(t)||Ty(t))++ce;else break}}function MI(t){var e,n,i,s=0;for(n=t==="u"?4:2,e=0;e<n;++e)ce<$i&&MN(Ae[ce])?(i=Ae[ce++],s=s*16+"0123456789abcdef".indexOf(i.toLowerCase())):qt({},fi,vi);return String.fromCharCode(s)}function eTe(){var t,e,n,i;for(t=Ae[ce],e=0,t==="}"&&qt({},fi,vi);ce<$i&&(t=Ae[ce++],!!MN(t));)e=e*16+"0123456789abcdef".indexOf(t.toLowerCase());return(e>1114111||t!=="}")&&qt({},fi,vi),e<=65535?String.fromCharCode(e):(n=(e-65536>>10)+55296,i=(e-65536&1023)+56320,String.fromCharCode(n,i))}function kW(){var t,e;for(t=Ae.charCodeAt(ce++),e=String.fromCharCode(t),t===92&&(Ae.charCodeAt(ce)!==117&&qt({},fi,vi),++ce,t=MI("u"),(!t||t==="\\"||!Om(t.charCodeAt(0)))&&qt({},fi,vi),e=t);ce<$i&&(t=Ae.charCodeAt(ce),!!Yv(t));)++ce,e+=String.fromCharCode(t),t===92&&(e=e.substr(0,e.length-1),Ae.charCodeAt(ce)!==117&&qt({},fi,vi),++ce,t=MI("u"),(!t||t==="\\"||!Yv(t.charCodeAt(0)))&&qt({},fi,vi),e+=t);return e}function tTe(){var t,e;for(t=ce++;ce<$i;){if(e=Ae.charCodeAt(ce),e===92)return ce=t,kW();if(Yv(e))++ce;else break}return Ae.slice(t,ce)}function nTe(){var t,e,n;return t=ce,e=Ae.charCodeAt(ce)===92?kW():tTe(),e.length===1?n=iu:Z0e.hasOwnProperty(e)?n=Md:e==="null"?n=PE:e==="true"||e==="false"?n=LE:n=iu,{type:n,value:e,start:t,end:ce}}function nB(){var t=ce,e=Ae.charCodeAt(ce),n,i=Ae[ce],s,o,c;switch(e){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ce,{type:bs,value:String.fromCharCode(e),start:t,end:ce};default:if(n=Ae.charCodeAt(ce+1),n===61)switch(e){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ce+=2,{type:bs,value:String.fromCharCode(e)+String.fromCharCode(n),start:t,end:ce};case 33:case 61:return ce+=2,Ae.charCodeAt(ce)===61&&++ce,{type:bs,value:Ae.slice(t,ce),start:t,end:ce}}}if(c=Ae.substr(ce,4),c===">>>=")return ce+=4,{type:bs,value:c,start:t,end:ce};if(o=c.substr(0,3),o===">>>"||o==="<<="||o===">>=")return ce+=3,{type:bs,value:o,start:t,end:ce};if(s=o.substr(0,2),i===s[1]&&"+-<>&|".indexOf(i)>=0||s==="=>")return ce+=2,{type:bs,value:s,start:t,end:ce};if(s==="//"&&qt({},fi,vi),"<>=!+-*%&|^/".indexOf(i)>=0)return++ce,{type:bs,value:i,start:t,end:ce};qt({},fi,vi)}function iTe(t){let e="";for(;ce<$i&&MN(Ae[ce]);)e+=Ae[ce++];return e.length===0&&qt({},fi,vi),Om(Ae.charCodeAt(ce))&&qt({},fi,vi),{type:Cu,value:parseInt("0x"+e,16),start:t,end:ce}}function sTe(t){let e="0"+Ae[ce++];for(;ce<$i&&R_(Ae[ce]);)e+=Ae[ce++];return(Om(Ae.charCodeAt(ce))||yl(Ae.charCodeAt(ce)))&&qt({},fi,vi),{type:Cu,value:parseInt(e,8),octal:!0,start:t,end:ce}}function H4(){var t,e,n;if(n=Ae[ce],DE(yl(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),e=ce,t="",n!=="."){if(t=Ae[ce++],n=Ae[ce],t==="0"){if(n==="x"||n==="X")return++ce,iTe(e);if(R_(n))return sTe(e);n&&yl(n.charCodeAt(0))&&qt({},fi,vi)}for(;yl(Ae.charCodeAt(ce));)t+=Ae[ce++];n=Ae[ce]}if(n==="."){for(t+=Ae[ce++];yl(Ae.charCodeAt(ce));)t+=Ae[ce++];n=Ae[ce]}if(n==="e"||n==="E")if(t+=Ae[ce++],n=Ae[ce],(n==="+"||n==="-")&&(t+=Ae[ce++]),yl(Ae.charCodeAt(ce)))for(;yl(Ae.charCodeAt(ce));)t+=Ae[ce++];else qt({},fi,vi);return Om(Ae.charCodeAt(ce))&&qt({},fi,vi),{type:Cu,value:parseFloat(t),start:e,end:ce}}function rTe(){var t="",e,n,i,s,o=!1;for(e=Ae[ce],DE(e==="'"||e==='"',"String literal must starts with a quote"),n=ce,++ce;ce<$i;)if(i=Ae[ce++],i===e){e="";break}else if(i==="\\")if(i=Ae[ce++],!i||!Ty(i.charCodeAt(0)))switch(i){case"u":case"x":Ae[ce]==="{"?(++ce,t+=eTe()):t+=MI(i);break;case"n":t+=`
`;break;case"r":t+="\r";break;case"t":t+="	";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:R_(i)?(s="01234567".indexOf(i),s!==0&&(o=!0),ce<$i&&R_(Ae[ce])&&(o=!0,s=s*8+"01234567".indexOf(Ae[ce++]),"0123".indexOf(i)>=0&&ce<$i&&R_(Ae[ce])&&(s=s*8+"01234567".indexOf(Ae[ce++]))),t+=String.fromCharCode(s)):t+=i;break}else i==="\r"&&Ae[ce]===`
`&&++ce;else{if(Ty(i.charCodeAt(0)))break;t+=i}return e!==""&&qt({},fi,vi),{type:Fm,value:t,octal:o,start:n,end:ce}}function aTe(t,e){let n=t;e.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(i,s)=>{if(parseInt(s,16)<=1114111)return"x";qt({},OI)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{qt({},OI)}try{return new RegExp(t,e)}catch{return null}}function oTe(){var t,e,n,i,s;for(t=Ae[ce],DE(t==="/","Regular expression literal must start with a slash"),e=Ae[ce++],n=!1,i=!1;ce<$i;)if(t=Ae[ce++],e+=t,t==="\\")t=Ae[ce++],Ty(t.charCodeAt(0))&&qt({},tB),e+=t;else if(Ty(t.charCodeAt(0)))qt({},tB);else if(n)t==="]"&&(n=!1);else if(t==="/"){i=!0;break}else t==="["&&(n=!0);return i||qt({},tB),s=e.substr(1,e.length-2),{value:s,literal:e}}function lTe(){var t,e,n;for(e="",n="";ce<$i&&(t=Ae[ce],!!Yv(t.charCodeAt(0)));)++ce,t==="\\"&&ce<$i?qt({},fi,vi):(n+=t,e+=t);return n.search(/[^gimuy]/g)>=0&&qt({},OI,n),{value:n,literal:e}}function cTe(){var t,e,n,i;return sn=null,BW(),t=ce,e=oTe(),n=lTe(),i=aTe(e.value,n.value),{literal:e.literal+n.literal,value:i,regex:{pattern:e.value,flags:n.value},start:t,end:ce}}function dTe(t){return t.type===iu||t.type===Md||t.type===LE||t.type===PE}function IW(){if(BW(),ce>=$i)return{type:Im,start:ce,end:ce};const t=Ae.charCodeAt(ce);return Om(t)?nTe():t===40||t===41||t===59?nB():t===39||t===34?rTe():t===46?yl(Ae.charCodeAt(ce+1))?H4():nB():yl(t)?H4():nB()}function ks(){const t=sn;return ce=t.end,sn=IW(),ce=t.end,t}function FW(){const t=ce;sn=IW(),ce=t}function fTe(t){const e=new Da(C0e);return e.elements=t,e}function W4(t,e,n){const i=new Da(t==="||"||t==="&&"?j0e:R0e);return i.operator=t,i.left=e,i.right=n,i}function uTe(t,e){const n=new Da(L0e);return n.callee=t,n.arguments=e,n}function hTe(t,e,n){const i=new Da(P0e);return i.test=t,i.consequent=e,i.alternate=n,i}function AN(t){const e=new Da(SW);return e.name=t,e}function w_(t){const e=new Da(D0e);return e.value=t.value,e.raw=Ae.slice(t.start,t.end),t.regex&&(e.raw==="//"&&(e.raw="/(?:)/"),e.regex=t.regex),e}function Y4(t,e,n){const i=new Da(U0e);return i.computed=t==="[",i.object=e,i.property=n,i.computed||(n.member=!0),i}function pTe(t){const e=new Da(z0e);return e.properties=t,e}function X4(t,e,n){const i=new Da($0e);return i.key=e,i.value=n,i.kind=t,i}function gTe(t,e){const n=new Da(q0e);return n.operator=t,n.argument=e,n.prefix=!0,n}function qt(t,e){var n,i=Array.prototype.slice.call(arguments,2),s=e.replace(/%(\d)/g,(o,c)=>(DE(c<i.length,"Message reference must be in range"),i[c]));throw n=new Error(s),n.index=ce,n.description=s,n}function jE(t){t.type===Im&&qt(t,Y0e),t.type===Cu&&qt(t,G0e),t.type===Fm&&qt(t,V0e),t.type===iu&&qt(t,H0e),t.type===Md&&qt(t,W0e),qt(t,fi,t.value)}function qi(t){const e=ks();(e.type!==bs||e.value!==t)&&jE(e)}function wn(t){return sn.type===bs&&sn.value===t}function iB(t){return sn.type===Md&&sn.value===t}function _Te(){const t=[];for(ce=sn.start,qi("[");!wn("]");)wn(",")?(ks(),t.push(null)):(t.push(su()),wn("]")||qi(","));return ks(),fTe(t)}function K4(){ce=sn.start;const t=ks();return t.type===Fm||t.type===Cu?(t.octal&&qt(t,xW),w_(t)):AN(t.value)}function yTe(){var t,e,n,i;if(ce=sn.start,t=sn,t.type===iu)return n=K4(),qi(":"),i=su(),X4("init",n,i);if(t.type===Im||t.type===bs)jE(t);else return e=K4(),qi(":"),i=su(),X4("init",e,i)}function mTe(){var t=[],e,n,i,s={},o=String;for(ce=sn.start,qi("{");!wn("}");)e=yTe(),e.key.type===SW?n=e.key.name:n=o(e.key.value),i="$"+n,Object.prototype.hasOwnProperty.call(s,i)?qt({},X0e):s[i]=!0,t.push(e),wn("}")||qi(",");return qi("}"),pTe(t)}function wTe(){qi("(");const t=NN();return qi(")"),t}const bTe={if:1};function TTe(){var t,e,n;if(wn("("))return wTe();if(wn("["))return _Te();if(wn("{"))return mTe();if(t=sn.type,ce=sn.start,t===iu||bTe[sn.value])n=AN(ks().value);else if(t===Fm||t===Cu)sn.octal&&qt(sn,xW),n=w_(ks());else{if(t===Md)throw new Error(by);t===LE?(e=ks(),e.value=e.value==="true",n=w_(e)):t===PE?(e=ks(),e.value=null,n=w_(e)):wn("/")||wn("/=")?(n=w_(cTe()),FW()):jE(ks())}return n}function vTe(){const t=[];if(qi("("),!wn(")"))for(;ce<$i&&(t.push(su()),!wn(")"));)qi(",");return qi(")"),t}function ETe(){ce=sn.start;const t=ks();return dTe(t)||jE(t),AN(t.value)}function STe(){return qi("."),ETe()}function xTe(){qi("[");const t=NN();return qi("]"),t}function BTe(){var t,e,n;for(t=TTe();;)if(wn("."))n=STe(),t=Y4(".",t,n);else if(wn("("))e=vTe(),t=uTe(t,e);else if(wn("["))n=xTe(),t=Y4("[",t,n);else break;return t}function J4(){const t=BTe();if(sn.type===bs&&(wn("++")||wn("--")))throw new Error(by);return t}function R0(){var t,e;if(sn.type!==bs&&sn.type!==Md)e=J4();else{if(wn("++")||wn("--"))throw new Error(by);if(wn("+")||wn("-")||wn("~")||wn("!"))t=ks(),e=R0(),e=gTe(t.value,e);else{if(iB("delete")||iB("void")||iB("typeof"))throw new Error(by);e=J4()}}return e}function Q4(t){let e=0;if(t.type!==bs&&t.type!==Md)return 0;switch(t.value){case"||":e=1;break;case"&&":e=2;break;case"|":e=3;break;case"^":e=4;break;case"&":e=5;break;case"==":case"!=":case"===":case"!==":e=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":e=7;break;case"<<":case">>":case">>>":e=8;break;case"+":case"-":e=9;break;case"*":case"/":case"%":e=11;break}return e}function kTe(){var t,e,n,i,s,o,c,d,f,u;if(t=sn,f=R0(),i=sn,s=Q4(i),s===0)return f;for(i.prec=s,ks(),e=[t,sn],c=R0(),o=[f,i,c];(s=Q4(sn))>0;){for(;o.length>2&&s<=o[o.length-2].prec;)c=o.pop(),d=o.pop().value,f=o.pop(),e.pop(),n=W4(d,f,c),o.push(n);i=ks(),i.prec=s,o.push(i),e.push(sn),n=R0(),o.push(n)}for(u=o.length-1,n=o[u],e.pop();u>1;)e.pop(),n=W4(o[u-1].value,o[u-2],n),u-=2;return n}function su(){var t,e,n;return t=kTe(),wn("?")&&(ks(),e=su(),qi(":"),n=su(),t=hTe(t,e,n)),t}function NN(){const t=su();if(wn(","))throw new Error(by);return t}function CN(t){Ae=t,ce=0,$i=Ae.length,sn=null,FW();const e=NN();if(sn.type!==Im)throw new Error("Unexpect token after expression.");return e}var OW={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function MW(t){function e(c,d,f,u){let a=t(d[0]);return f&&(a=f+"("+a+")",f.lastIndexOf("new ",0)===0&&(a="("+a+")")),a+"."+c+(u<0?"":u===0?"()":"("+d.slice(1).map(t).join(",")+")")}function n(c,d,f){return u=>e(c,u,d,f)}const i="new Date",s="String",o="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(c){c.length<3&&de("Missing arguments to clamp function."),c.length>3&&de("Too many arguments to clamp function.");const d=c.map(t);return"Math.max("+d[1]+", Math.min("+d[2]+","+d[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:i,date:n("getDate",i,0),day:n("getDay",i,0),year:n("getFullYear",i,0),month:n("getMonth",i,0),hours:n("getHours",i,0),minutes:n("getMinutes",i,0),seconds:n("getSeconds",i,0),milliseconds:n("getMilliseconds",i,0),time:n("getTime",i,0),timezoneoffset:n("getTimezoneOffset",i,0),utcdate:n("getUTCDate",i,0),utcday:n("getUTCDay",i,0),utcyear:n("getUTCFullYear",i,0),utcmonth:n("getUTCMonth",i,0),utchours:n("getUTCHours",i,0),utcminutes:n("getUTCMinutes",i,0),utcseconds:n("getUTCSeconds",i,0),utcmilliseconds:n("getUTCMilliseconds",i,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",s,0),lower:n("toLowerCase",s,0),substring:n("substring",s),split:n("split",s),trim:n("trim",s,0),regexp:o,test:n("test",o),if:function(c){c.length<3&&de("Missing arguments to if function."),c.length>3&&de("Too many arguments to if function.");const d=c.map(t);return"("+d[0]+"?"+d[1]+":"+d[2]+")"}}}function ITe(t){const e=t&&t.length-1;return e&&(t[0]==='"'&&t[e]==='"'||t[0]==="'"&&t[e]==="'")?t.slice(1,-1):t}function AW(t){t=t||{};const e=t.allowed?Ma(t.allowed):{},n=t.forbidden?Ma(t.forbidden):{},i=t.constants||OW,s=(t.functions||MW)(_),o=t.globalvar,c=t.fieldvar,d=wt(o)?o:l=>`${o}["${l}"]`;let f={},u={},a=0;function _(l){if(ke(l))return l;const T=w[l.type];return T==null&&de("Unsupported type: "+l.type),T(l)}const w={Literal:l=>l.raw,Identifier:l=>{const T=l.name;return a>0?T:Le(n,T)?de("Illegal identifier: "+T):Le(i,T)?i[T]:Le(e,T)?T:(f[T]=1,d(T))},MemberExpression:l=>{const T=!l.computed,b=_(l.object);T&&(a+=1);const S=_(l.property);return b===c&&(u[ITe(S)]=1),T&&(a-=1),b+(T?"."+S:"["+S+"]")},CallExpression:l=>{l.callee.type!=="Identifier"&&de("Illegal callee type: "+l.callee.type);const T=l.callee.name,b=l.arguments,S=Le(s,T)&&s[T];return S||de("Unrecognized function: "+T),wt(S)?S(b):S+"("+b.map(_).join(",")+")"},ArrayExpression:l=>"["+l.elements.map(_).join(",")+"]",BinaryExpression:l=>"("+_(l.left)+" "+l.operator+" "+_(l.right)+")",UnaryExpression:l=>"("+l.operator+_(l.argument)+")",ConditionalExpression:l=>"("+_(l.test)+"?"+_(l.consequent)+":"+_(l.alternate)+")",LogicalExpression:l=>"("+_(l.left)+l.operator+_(l.right)+")",ObjectExpression:l=>"{"+l.properties.map(_).join(",")+"}",Property:l=>{a+=1;const T=_(l.key);return a-=1,T+":"+_(l.value)}};function m(l){const T={code:_(l),globals:Object.keys(f),fields:Object.keys(u)};return f={},u={},T}return m.functions=s,m.constants=i,m}function Z4(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function FTe(t){let e=t,n=t,i=t;t.length!==2&&(e=(d,f)=>t(d)-f,n=Z4,i=(d,f)=>Z4(t(d),f));function s(d,f,u=0,a=d.length){if(u<a){if(n(f,f)!==0)return a;do{const _=u+a>>>1;i(d[_],f)<0?u=_+1:a=_}while(u<a)}return u}function o(d,f,u=0,a=d.length){if(u<a){if(n(f,f)!==0)return a;do{const _=u+a>>>1;i(d[_],f)<=0?u=_+1:a=_}while(u<a)}return u}function c(d,f,u=0,a=d.length){const _=s(d,f,u,a-1);return _>u&&e(d[_-1],f)>-e(d[_],f)?_-1:_}return{left:s,center:c,right:o}}function OTe(t,...e){t=new W0(t),e=e.map(MTe);e:for(const n of t)for(const i of e)if(!i.has(n)){t.delete(n);continue e}return t}function MTe(t){return t instanceof W0?t:new W0(t)}function ATe(...t){const e=new W0;for(const n of t)for(const i of n)e.add(i);return e}const RN="intersect",e6="union",NTe="vlMulti",CTe="vlPoint",t6="or",RTe="and",Ja="_vgsid_",vy=Us(Ja),LTe="E",PTe="R",DTe="R-E",jTe="R-LE",UTe="R-RE",Xv="index:unit";function n6(t,e){for(var n=e.fields,i=e.values,s=n.length,o=0,c,d;o<s;++o)if(d=n[o],d.getter=Us.getter||Us(d.field),c=d.getter(t),Dc(c)&&(c=Pi(c)),Dc(i[o])&&(i[o]=Pi(i[o])),Dc(i[o][0])&&(i[o]=i[o].map(Pi)),d.type===LTe){if(he(i[o])?i[o].indexOf(c)<0:c!==i[o])return!1}else if(d.type===PTe){if(!Th(c,i[o]))return!1}else if(d.type===UTe){if(!Th(c,i[o],!0,!1))return!1}else if(d.type===DTe){if(!Th(c,i[o],!1,!1))return!1}else if(d.type===jTe&&!Th(c,i[o],!1,!0))return!1;return!0}function zTe(t,e,n){for(var i=this.context.data[t],s=i?i.values.value:[],o=i?i[Xv]&&i[Xv].value:void 0,c=n===RN,d=s.length,f=0,u,a,_,w,m;f<d;++f)if(u=s[f],o&&c){if(a=a||{},_=a[w=u.unit]||0,_===-1)continue;if(m=n6(e,u),a[w]=m?-1:++_,m&&o.size===1)return!0;if(!m&&_===o.get(w).count)return!1}else if(m=n6(e,u),c^m)return m;return d&&c}const NW=FTe(vy),$Te=NW.left,qTe=NW.right;function GTe(t,e,n){const i=this.context.data[t],s=i?i.values.value:[],o=i?i[Xv]&&i[Xv].value:void 0,c=n===RN,d=vy(e),f=$Te(s,d);if(f===s.length||vy(s[f])!==d)return!1;if(o&&c){if(o.size===1)return!0;if(qTe(s,d)-f<o.size)return!1}return!0}function VTe(t,e){return t.map(n=>mt(e.fields?{values:e.fields.map(i=>(i.getter||(i.getter=Us(i.field)))(n.datum))}:{[Ja]:vy(n.datum)},e))}function HTe(t,e,n,i){for(var s=this.context.data[t],o=s?s.values.value:[],c={},d={},f={},u,a,_,w,m,l,T,b,S,x,B=o.length,F=0,k,A;F<B;++F)if(u=o[F],w=u.unit,a=u.fields,_=u.values,a&&_){for(k=0,A=a.length;k<A;++k)m=a[k],T=c[m.field]||(c[m.field]={}),b=T[w]||(T[w]=[]),f[m.field]=S=m.type.charAt(0),x=sB["".concat(S,"_union")],T[w]=x(b,Ie(_[k]));n&&(b=d[w]||(d[w]=[]),b.push(Ie(_).reduce((M,R,P)=>(M[a[P].field]=R,M),{})))}else m=Ja,l=vy(u),T=c[m]||(c[m]={}),b=T[w]||(T[w]=[]),b.push(l),n&&(b=d[w]||(d[w]=[]),b.push({[Ja]:l}));if(e=e||e6,c[Ja]?c[Ja]=sB["".concat(Ja,"_").concat(e)](...Object.values(c[Ja])):Object.keys(c).forEach(M=>{c[M]=Object.keys(c[M]).map(R=>c[M][R]).reduce((R,P)=>R===void 0?P:sB["".concat(f[M],"_").concat(e)](R,P))}),o=Object.keys(d),n&&o.length){const M=i?CTe:NTe;c[M]=e===e6?{[t6]:o.reduce((R,P)=>(R.push(...d[P]),R),[])}:{[RTe]:o.map(R=>({[t6]:d[R]}))}}return c}var sB={["".concat(Ja,"_union")]:ATe,["".concat(Ja,"_intersect")]:OTe,E_union:function(t,e){if(!t.length)return e;for(var n=0,i=e.length;n<i;++n)t.indexOf(e[n])<0&&t.push(e[n]);return t},E_intersect:function(t,e){return t.length?t.filter(n=>e.indexOf(n)>=0):e},R_union:function(t,e){var n=Pi(e[0]),i=Pi(e[1]);return n>i&&(n=e[1],i=e[0]),t.length?(t[0]>n&&(t[0]=n),t[1]<i&&(t[1]=i),t):[n,i]},R_intersect:function(t,e){var n=Pi(e[0]),i=Pi(e[1]);return n>i&&(n=e[1],i=e[0]),t.length?i<t[0]||t[1]<n?[]:(t[0]<n&&(t[0]=n),t[1]>i&&(t[1]=i),t):[n,i]}};const WTe=":",YTe="@";function LN(t,e,n,i){e[0].type!==nu&&de("First argument to selection functions must be a string literal.");const s=e[0].value,o=e.length>=2&&Rt(e).value,c="unit",d=YTe+c,f=WTe+s;o===RN&&!Le(i,d)&&(i[d]=n.getData(s).indataRef(n,c)),Le(i,f)||(i[f]=n.getData(s).tuplesRef())}function CW(t){const e=this.context.data[t];return e?e.values.value:[]}function XTe(t,e,n){const i=this.context.data[t]["index:"+e],s=i?i.value.get(n):void 0;return s&&s.count}function KTe(t,e){const n=this.context.dataflow,i=this.context.data[t],s=i.input;return n.pulse(s,n.changeset().remove(zr).insert(e)),1}function JTe(t,e,n){if(t){const i=this.context.dataflow,s=t.mark.source;i.pulse(s,i.changeset().encode(t,e))}return n!==void 0?n:t}const Mm=t=>function(e,n){return this.context.dataflow.locale()[t](n)(e)},QTe=Mm("format"),RW=Mm("timeFormat"),ZTe=Mm("utcFormat"),eve=Mm("timeParse"),tve=Mm("utcParse"),$b=new Date(2e3,0,1);function UE(t,e,n){return!Number.isInteger(t)||!Number.isInteger(e)?"":($b.setYear(2e3),$b.setMonth(t),$b.setDate(e),RW.call(this,$b,n))}function nve(t){return UE.call(this,t,1,"%B")}function ive(t){return UE.call(this,t,1,"%b")}function sve(t){return UE.call(this,0,2+t,"%A")}function rve(t){return UE.call(this,0,2+t,"%a")}const ave=":",ove="@",AI="%",LW="$";function PN(t,e,n,i){e[0].type!==nu&&de("First argument to data functions must be a string literal.");const s=e[0].value,o=ave+s;if(!Le(o,i))try{i[o]=n.getData(s).tuplesRef()}catch{}}function lve(t,e,n,i){e[0].type!==nu&&de("First argument to indata must be a string literal."),e[1].type!==nu&&de("Second argument to indata must be a string literal.");const s=e[0].value,o=e[1].value,c=ove+o;Le(c,i)||(i[c]=n.getData(s).indataRef(n,o))}function Ms(t,e,n,i){if(e[0].type===nu)i6(n,i,e[0].value);else for(t in n.scales)i6(n,i,t)}function i6(t,e,n){const i=AI+n;if(!Le(e,i))try{e[i]=t.scaleRef(n)}catch{}}function Ql(t,e){let n;return wt(t)?t:ke(t)?(n=e.scales[t])&&n.value:void 0}function cve(t,e,n){e.__bandwidth=s=>s&&s.bandwidth?s.bandwidth():0,n._bandwidth=Ms,n._range=Ms,n._scale=Ms;const i=s=>"_["+(s.type===nu?Se(AI+s.value):Se(AI)+"+"+t(s))+"]";return{_bandwidth:s=>"this.__bandwidth(".concat(i(s[0]),")"),_range:s=>"".concat(i(s[0]),".range()"),_scale:s=>"".concat(i(s[0]),"(").concat(t(s[1]),")")}}function DN(t,e){return function(n,i,s){if(n){const o=Ql(n,(s||this).context);return o&&o.path[t](i)}else return e(i)}}const dve=DN("area",Kte),fve=DN("bounds",ene),uve=DN("centroid",ane);function hve(t){const e=this.context.group;let n=!1;if(e)for(;t;){if(t===e){n=!0;break}t=t.mark.group}return n}function jN(t,e,n){try{t[e].apply(t,["EXPRESSION"].concat([].slice.call(n)))}catch(i){t.warn(i)}return n[n.length-1]}function pve(){return jN(this.context.dataflow,"warn",arguments)}function gve(){return jN(this.context.dataflow,"info",arguments)}function _ve(){return jN(this.context.dataflow,"debug",arguments)}function rB(t){const e=t/255;return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}function NI(t){const e=Wc(t),n=rB(e.r),i=rB(e.g),s=rB(e.b);return .2126*n+.7152*i+.0722*s}function yve(t,e){const n=NI(t),i=NI(e),s=Math.max(n,i),o=Math.min(n,i);return(s+.05)/(o+.05)}function mve(){const t=[].slice.call(arguments);return t.unshift({}),mt(...t)}function PW(t,e){return t===e||t!==t&&e!==e?!0:he(t)?he(e)&&t.length===e.length?wve(t,e):!1:Fe(t)&&Fe(e)?DW(t,e):!1}function wve(t,e){for(let n=0,i=t.length;n<i;++n)if(!PW(t[n],e[n]))return!1;return!0}function DW(t,e){for(const n in t)if(!PW(t[n],e[n]))return!1;return!0}function s6(t){return e=>DW(t,e)}function bve(t,e,n,i,s,o){const c=this.context.dataflow,d=this.context.data[t],f=d.input,u=c.stamp();let a=d.changes,_,w;if(c._trigger===!1||!(f.value.length||e||i))return 0;if((!a||a.stamp<u)&&(d.changes=a=c.changeset(),a.stamp=u,c.runAfter(()=>{d.modified=!0,c.pulse(f,a).run()},!0,1)),n&&(_=n===!0?zr:he(n)||gE(n)?n:s6(n),a.remove(_)),e&&a.insert(e),i&&(_=s6(i),f.value.some(_)?a.remove(_):a.insert(i)),s)for(w in o)a.modify(s,w,o[w]);return 1}function Tve(t){const e=t.touches,n=e[0].clientX-e[1].clientX,i=e[0].clientY-e[1].clientY;return Math.sqrt(n*n+i*i)}function vve(t){const e=t.touches;return Math.atan2(e[0].clientY-e[1].clientY,e[0].clientX-e[1].clientX)}const r6={};function Eve(t,e){const n=r6[e]||(r6[e]=Us(e));return he(t)?t.map(n):n(t)}function UN(t){return he(t)||ArrayBuffer.isView(t)?t:null}function zN(t){return UN(t)||(ke(t)?t:null)}function Sve(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return UN(t).join(...n)}function xve(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return zN(t).indexOf(...n)}function Bve(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return zN(t).lastIndexOf(...n)}function kve(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return zN(t).slice(...n)}function Ive(t,e,n){return wt(n)&&de("Function argument passed to replace."),String(t).replace(e,n)}function Fve(t){return UN(t).slice().reverse()}function Ove(t,e,n){return lA(t||0,e||0,n||0)}function Mve(t,e){const n=Ql(t,(e||this).context);return n&&n.bandwidth?n.bandwidth():0}function Ave(t,e){const n=Ql(t,(e||this).context);return n?n.copy():void 0}function Nve(t,e){const n=Ql(t,(e||this).context);return n?n.domain():[]}function Cve(t,e,n){const i=Ql(t,(n||this).context);return i?he(e)?(i.invertRange||i.invert)(e):(i.invert||i.invertExtent)(e):void 0}function Rve(t,e){const n=Ql(t,(e||this).context);return n&&n.range?n.range():[]}function Lve(t,e,n){const i=Ql(t,(n||this).context);return i?i(e):void 0}function Pve(t,e,n,i,s){t=Ql(t,(s||this).context);const o=DV(e,n);let c=t.domain(),d=c[0],f=Rt(c),u=Hi;return f-d?u=BV(t,d,f):t=(t.interpolator?Vt("sequential")().interpolator(t.interpolator()):Vt("linear")().interpolate(t.interpolate()).range(t.range())).domain([d=0,f=1]),t.ticks&&(c=t.ticks(+i||15),d!==c[0]&&c.unshift(d),f!==Rt(c)&&c.push(f)),c.forEach(a=>o.stop(u(a),t(a))),o}function Dve(t,e,n){const i=Ql(t,(n||this).context);return function(s){return i?i.path.context(s)(e):""}}function jve(t){let e=null;return function(n){return n?gy(n,e=e||Bp(t)):t}}const jW=t=>t.data;function UW(t,e){const n=CW.call(e,t);return n.root&&n.root.lookup||{}}function Uve(t,e,n){const i=UW(t,this),s=i[e],o=i[n];return s&&o?s.path(o).map(jW):void 0}function zve(t,e){const n=UW(t,this)[e];return n?n.ancestors().map(jW):void 0}const zW=()=>typeof window<"u"&&window||null;function $ve(){const t=zW();return t?t.screen:{}}function qve(){const t=zW();return t?[t.innerWidth,t.innerHeight]:[void 0,void 0]}function Gve(){const t=this.context.dataflow,e=t.container&&t.container();return e?[e.clientWidth,e.clientHeight]:[void 0,void 0]}function $W(t,e,n){if(!t)return[];const[i,s]=t,o=new Un().set(i[0],i[1],s[0],s[1]),c=n||this.context.dataflow.scenegraph().root;return IH(c,o,Vve(e))}function Vve(t){let e=null;if(t){const n=Ie(t.marktype),i=Ie(t.markname);e=s=>(!n.length||n.some(o=>s.marktype===o))&&(!i.length||i.some(o=>s.name===o))}return e}function Hve(t,e,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;const s=t[t.length-1];return s===void 0||Math.sqrt((s[0]-e)**2+(s[1]-n)**2)>i?(t.push([e,n]),[...t]):t}function Wve(t){return(t!=null?t:[]).reduce((e,n,i)=>{let[s,o]=n;return e+=i==0?"M ".concat(s,",").concat(o," "):i===t.length-1?" Z":"L ".concat(s,",").concat(o," ")},"")}function Yve(t,e,n){const{x:i,y:s,mark:o}=n,c=new Un().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[f,u]of e)f<c.x1&&(c.x1=f),f>c.x2&&(c.x2=f),u<c.y1&&(c.y1=u),u>c.y2&&(c.y2=u);return c.translate(i,s),$W([[c.x1,c.y1],[c.x2,c.y2]],t,o).filter(f=>Xve(f.x,f.y,e))}function Xve(t,e,n){let i=0;for(let s=0,o=n.length-1;s<n.length;o=s++){const[c,d]=n[o],[f,u]=n[s];u>e!=d>e&&t<(c-f)*(e-u)/(d-u)+f&&i++}return i&1}const Ey={random(){return Rr()},cumulativeNormal:v1,cumulativeLogNormal:LF,cumulativeUniform:UF,densityNormal:MF,densityLogNormal:RF,densityUniform:jF,quantileNormal:E1,quantileLogNormal:PF,quantileUniform:zF,sampleNormal:T1,sampleLogNormal:CF,sampleUniform:DF,isArray:he,isBoolean:Od,isDate:Dc,isDefined(t){return t!==void 0},isNumber:ln,isObject:Fe,isRegExp:J9,isString:ke,isTuple:gE,isValid(t){return t!=null&&t===t},toBoolean:SM,toDate(t){return xM(t)},toNumber:Pi,toString:BM,indexof:xve,join:Sve,lastindexof:Bve,replace:Ive,reverse:Fve,slice:kve,flush:X9,lerp:Q9,merge:mve,pad:tG,peek:Rt,pluck:Eve,span:pm,inrange:Th,truncate:nG,rgb:Wc,lab:J0,hcl:Q0,hsl:X0,luminance:NI,contrast:yve,sequence:ar,format:QTe,utcFormat:ZTe,utcParse:tve,utcOffset:_G,utcSequence:wG,timeFormat:RW,timeParse:eve,timeOffset:gG,timeSequence:mG,timeUnitSpecifier:sG,monthFormat:nve,monthAbbrevFormat:ive,dayFormat:sve,dayAbbrevFormat:rve,quarter:V9,utcquarter:H9,week:aG,utcweek:cG,dayofyear:rG,utcdayofyear:lG,warn:pve,info:gve,debug:_ve,extent(t){return Do(t)},inScope:hve,intersect:$W,clampRange:W9,pinchDistance:Tve,pinchAngle:vve,screen:$ve,containerSize:Gve,windowSize:qve,bandspace:Ove,setdata:KTe,pathShape:jve,panLinear:z9,panLog:$9,panPow:q9,panSymlog:G9,zoomLinear:mM,zoomLog:wM,zoomPow:Ov,zoomSymlog:bM,encode:JTe,modify:bve,lassoAppend:Hve,lassoPath:Wve,intersectLasso:Yve},Kve=["view","item","group","xy","x","y"],Jve="event.vega.",qW="this.",$N={},GW={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:t=>"_[".concat(Se(LW+t),"]"),functions:Qve,constants:OW,visitors:$N},CI=AW(GW);function Qve(t){const e=MW(t);Kve.forEach(n=>e[n]=Jve+n);for(const n in Ey)e[n]=qW+n;return mt(e,cve(t,Ey,$N)),e}function $n(t,e,n){return arguments.length===1?Ey[t]:(Ey[t]=e,n&&($N[t]=n),CI&&(CI.functions[t]=qW+t),this)}$n("bandwidth",Mve,Ms);$n("copy",Ave,Ms);$n("domain",Nve,Ms);$n("range",Rve,Ms);$n("invert",Cve,Ms);$n("scale",Lve,Ms);$n("gradient",Pve,Ms);$n("geoArea",dve,Ms);$n("geoBounds",fve,Ms);$n("geoCentroid",uve,Ms);$n("geoShape",Dve,Ms);$n("indata",XTe,lve);$n("data",CW,PN);$n("treePath",Uve,PN);$n("treeAncestors",zve,PN);$n("vlSelectionTest",zTe,LN);$n("vlSelectionIdTest",GTe,LN);$n("vlSelectionResolve",HTe,LN);$n("vlSelectionTuples",VTe);function Uo(t,e){const n={};let i;try{t=ke(t)?t:Se(t)+"",i=CN(t)}catch{de("Expression parse error: "+t)}i.visit(o=>{if(o.type!==EW)return;const c=o.callee.name,d=GW.visitors[c];d&&d(c,o.arguments,e,n)});const s=CI(i);return s.globals.forEach(o=>{const c=LW+o;!Le(n,c)&&e.getSignal(o)&&(n[c]=e.signalRef(o))}),{$expr:mt({code:s.code},e.options.ast?{ast:i}:null),$fields:s.fields,$params:n}}function Zve(t){const e=this,n=t.operators||[];return t.background&&(e.background=t.background),t.eventConfig&&(e.eventConfig=t.eventConfig),t.locale&&(e.locale=t.locale),n.forEach(i=>e.parseOperator(i)),n.forEach(i=>e.parseOperatorParameters(i)),(t.streams||[]).forEach(i=>e.parseStream(i)),(t.updates||[]).forEach(i=>e.parseUpdate(i)),e.resolve()}const e1e=Ma(["rule"]),a6=Ma(["group","image","rect"]);function t1e(t,e){let n="";return e1e[e]||(t.x2&&(t.x?(a6[e]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),t.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),t.y2&&(t.y?(a6[e]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),t.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function qN(t){return(t+"").toLowerCase()}function n1e(t){return qN(t)==="operator"}function i1e(t){return qN(t)==="collect"}function jg(t,e,n){n[n.length-1]!==";"&&(n="return("+n+");");const i=Function(...e.concat(n));return t&&t.functions?i.bind(t.functions):i}function s1e(t,e,n,i){return"((u = ".concat(t,") < (v = ").concat(e,") || u == null) && v != null ? ").concat(n,`
  : (u > v || v == null) && u != null ? `).concat(i,`
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? `).concat(n,`
  : v !== v && u === u ? `).concat(i," : ")}var r1e={operator:(t,e)=>jg(t,["_"],e.code),parameter:(t,e)=>jg(t,["datum","_"],e.code),event:(t,e)=>jg(t,["event"],e.code),handler:(t,e)=>{const n="var datum=event.item&&event.item.datum;return ".concat(e.code,";");return jg(t,["_","event"],n)},encode:(t,e)=>{const{marktype:n,channels:i}=e;let s="var o=item,datum=o.datum,m=0,$;";for(const o in i){const c="o["+Se(o)+"]";s+="$=".concat(i[o].code,";if(").concat(c,"!==$)").concat(c,"=$,m=1;")}return s+=t1e(i,n),s+="return m;",jg(t,["item","_"],s)},codegen:{get(t){const e="[".concat(t.map(Se).join("]["),"]"),n=Function("_","return _".concat(e,";"));return n.path=e,n},comparator(t,e){let n;const i=(o,c)=>{const d=e[c];let f,u;return o.path?(f="a".concat(o.path),u="b".concat(o.path)):((n=n||{})["f"+c]=o,f="this.f".concat(c,"(a)"),u="this.f".concat(c,"(b)")),s1e(f,u,-d,d)},s=Function("a","b","var u, v; return "+t.map(i).join("")+"0;");return n?s.bind(n):s}}};function a1e(t){const e=this;n1e(t.type)||!t.type?e.operator(t,t.update?e.operatorExpression(t.update):null):e.transform(t,t.type)}function o1e(t){const e=this;if(t.params){const n=e.get(t.id);n||de("Invalid operator id: "+t.id),e.dataflow.connect(n,n.parameters(e.parseParameters(t.params),t.react,t.initonly))}}function l1e(t,e){e=e||{};const n=this;for(const i in t){const s=t[i];e[i]=he(s)?s.map(o=>o6(o,n,e)):o6(s,n,e)}return e}function o6(t,e,n){if(!t||!Fe(t))return t;for(let i=0,s=l6.length,o;i<s;++i)if(o=l6[i],Le(t,o.key))return o.parse(t,e,n);return t}var l6=[{key:"$ref",parse:c1e},{key:"$key",parse:f1e},{key:"$expr",parse:d1e},{key:"$field",parse:u1e},{key:"$encode",parse:p1e},{key:"$compare",parse:h1e},{key:"$context",parse:g1e},{key:"$subflow",parse:_1e},{key:"$tupleid",parse:y1e}];function c1e(t,e){return e.get(t.$ref)||de("Operator not defined: "+t.$ref)}function d1e(t,e,n){t.$params&&e.parseParameters(t.$params,n);const i="e:"+t.$expr.code+"_"+t.$name;return e.fn[i]||(e.fn[i]=Ys(e.parameterExpression(t.$expr),t.$fields,t.$name))}function f1e(t,e){const n="k:"+t.$key+"_"+!!t.$flat;return e.fn[n]||(e.fn[n]=EM(t.$key,t.$flat,e.expr.codegen))}function u1e(t,e){if(!t.$field)return null;const n="f:"+t.$field+"_"+t.$name;return e.fn[n]||(e.fn[n]=Us(t.$field,t.$name,e.expr.codegen))}function h1e(t,e){const n="c:"+t.$compare+"_"+t.$order,i=Ie(t.$compare).map(s=>s&&s.$tupleid?De:s);return e.fn[n]||(e.fn[n]=TM(i,t.$order,e.expr.codegen))}function p1e(t,e){const n=t.$encode,i={};for(const s in n){const o=n[s];i[s]=Ys(e.encodeExpression(o.$expr),o.$fields),i[s].output=o.$output}return i}function g1e(t,e){return e}function _1e(t,e){const n=t.$subflow;return function(i,s,o){const c=e.fork().parse(n),d=c.get(n.operators[0].id),f=c.signals.parent;return f&&f.set(o),d.detachSubflow=()=>e.detach(c),d}}function y1e(){return De}function m1e(t){var e=this,n=t.filter!=null?e.eventExpression(t.filter):void 0,i=t.stream!=null?e.get(t.stream):void 0,s;t.source?i=e.events(t.source,t.type,n):t.merge&&(s=t.merge.map(o=>e.get(o)),i=s[0].merge.apply(s[0],s.slice(1))),t.between&&(s=t.between.map(o=>e.get(o)),i=i.between(s[0],s[1])),t.filter&&(i=i.filter(n)),t.throttle!=null&&(i=i.throttle(+t.throttle)),t.debounce!=null&&(i=i.debounce(+t.debounce)),i==null&&de("Invalid stream definition: "+JSON.stringify(t)),t.consume&&i.consume(!0),e.stream(t,i)}function w1e(t){var e=this,n=Fe(n=t.source)?n.$ref:n,i=e.get(n),s=null,o=t.update,c=void 0;i||de("Source not defined: "+t.source),s=t.target&&t.target.$expr?e.eventExpression(t.target.$expr):e.get(t.target),o&&o.$expr&&(o.$params&&(c=e.parseParameters(o.$params)),o=e.handlerExpression(o.$expr)),e.update(t,i,s,o,c)}const b1e={skip:!0};function T1e(t){var e=this,n={};if(t.signals){var i=n.signals={};Object.keys(e.signals).forEach(o=>{const c=e.signals[o];t.signals(o,c)&&(i[o]=c.value)})}if(t.data){var s=n.data={};Object.keys(e.data).forEach(o=>{const c=e.data[o];t.data(o,c)&&(s[o]=c.input.value)})}return e.subcontext&&t.recurse!==!1&&(n.subcontext=e.subcontext.map(o=>o.getState(t))),n}function v1e(t){var e=this,n=e.dataflow,i=t.data,s=t.signals;Object.keys(s||{}).forEach(o=>{n.update(e.signals[o],s[o],b1e)}),Object.keys(i||{}).forEach(o=>{n.pulse(e.data[o].input,n.changeset().remove(zr).insert(i[o]))}),(t.subcontext||[]).forEach((o,c)=>{const d=e.subcontext[c];d&&d.setState(o)})}function VW(t,e,n,i){return new HW(t,e,n,i)}function HW(t,e,n,i){this.dataflow=t,this.transforms=e,this.events=t.events.bind(t),this.expr=i||r1e,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function c6(t){this.dataflow=t.dataflow,this.transforms=t.transforms,this.events=t.events,this.expr=t.expr,this.signals=Object.create(t.signals),this.scales=Object.create(t.scales),this.nodes=Object.create(t.nodes),this.data=Object.create(t.data),this.fn=Object.create(t.fn),t.functions&&(this.functions=Object.create(t.functions),this.functions.context=this)}HW.prototype=c6.prototype={fork(){const t=new c6(this);return(this.subcontext||(this.subcontext=[])).push(t),t},detach(t){this.subcontext=this.subcontext.filter(n=>n!==t);const e=Object.keys(t.nodes);for(const n of e)t.nodes[n]._targets=null;for(const n of e)t.nodes[n].detach();t.nodes=null},get(t){return this.nodes[t]},set(t,e){return this.nodes[t]=e},add(t,e){const n=this,i=n.dataflow,s=t.value;if(n.set(t.id,e),i1e(t.type)&&s&&(s.$ingest?i.ingest(e,s.$ingest,s.$format):s.$request?i.preload(e,s.$request,s.$format):i.pulse(e,i.changeset().insert(s))),t.root&&(n.root=e),t.parent){let o=n.get(t.parent.$ref);o?(i.connect(o,[e]),e.targets().add(o)):(n.unresolved=n.unresolved||[]).push(()=>{o=n.get(t.parent.$ref),i.connect(o,[e]),e.targets().add(o)})}if(t.signal&&(n.signals[t.signal]=e),t.scale&&(n.scales[t.scale]=e),t.data)for(const o in t.data){const c=n.data[o]||(n.data[o]={});t.data[o].forEach(d=>c[d]=e)}},resolve(){return(this.unresolved||[]).forEach(t=>t()),delete this.unresolved,this},operator(t,e){this.add(t,this.dataflow.add(t.value,e))},transform(t,e){this.add(t,this.dataflow.add(this.transforms[qN(e)]))},stream(t,e){this.set(t.id,e)},update(t,e,n,i,s){this.dataflow.on(e,n,i,s,t.options)},operatorExpression(t){return this.expr.operator(this,t)},parameterExpression(t){return this.expr.parameter(this,t)},eventExpression(t){return this.expr.event(this,t)},handlerExpression(t){return this.expr.handler(this,t)},encodeExpression(t){return this.expr.encode(this,t)},parse:Zve,parseOperator:a1e,parseOperatorParameters:o1e,parseParameters:l1e,parseStream:m1e,parseUpdate:w1e,getState:T1e,setState:v1e};function E1e(t){const e=t.container();e&&(e.setAttribute("role","graphics-document"),e.setAttribute("aria-roleDescription","visualization"),WW(e,t.description()))}function WW(t,e){t&&(e==null?t.removeAttribute("aria-label"):t.setAttribute("aria-label",e))}function S1e(t){t.add(null,e=>(t._background=e.bg,t._resize=1,e.bg),{bg:t._signals.background})}const aB="default";function x1e(t){const e=t._signals.cursor||(t._signals.cursor=t.add({user:aB,item:null}));t.on(t.events("view","mousemove"),e,(n,i)=>{const s=e.value,o=s?ke(s)?s:s.user:aB,c=i.item&&i.item.cursor||null;return s&&o===s.user&&c==s.item?s:{user:o,item:c}}),t.add(null,function(n){let i=n.cursor,s=this.value;return ke(i)||(s=i.item,i=i.user),RI(t,i&&i!==aB?i:s||i),s},{cursor:e})}function RI(t,e){const n=t.globalCursor()?typeof document<"u"&&document.body:t.container();if(n)return e==null?n.style.removeProperty("cursor"):n.style.cursor=e}function Kv(t,e){var n=t._runtime.data;return Le(n,e)||de("Unrecognized data set: "+e),n[e]}function B1e(t,e){return arguments.length<2?Kv(this,t).values.value:zE.call(this,t,Au().remove(zr).insert(e))}function zE(t,e){jG(e)||de("Second argument to changes must be a changeset.");const n=Kv(this,t);return n.modified=!0,this.pulse(n.input,e)}function k1e(t,e){return zE.call(this,t,Au().insert(e))}function I1e(t,e){return zE.call(this,t,Au().remove(e))}function YW(t){var e=t.padding();return Math.max(0,t._viewWidth+e.left+e.right)}function XW(t){var e=t.padding();return Math.max(0,t._viewHeight+e.top+e.bottom)}function $E(t){var e=t.padding(),n=t._origin;return[e.left+n[0],e.top+n[1]]}function F1e(t){var e=$E(t),n=YW(t),i=XW(t);t._renderer.background(t.background()),t._renderer.resize(n,i,e),t._handler.origin(e),t._resizeListeners.forEach(s=>{try{s(n,i)}catch(o){t.error(o)}})}function O1e(t,e,n){var i=t._renderer,s=i&&i.canvas(),o,c,d;return s&&(d=$E(t),c=e.changedTouches?e.changedTouches[0]:e,o=NE(c,s),o[0]-=d[0],o[1]-=d[1]),e.dataflow=t,e.item=n,e.vega=M1e(t,n,o),e}function M1e(t,e,n){const i=e?e.mark.marktype==="group"?e:e.mark.group:null;function s(c){var d=i,f;if(c){for(f=e;f;f=f.mark.group)if(f.mark.name===c){d=f;break}}return d&&d.mark&&d.mark.interactive?d:{}}function o(c){if(!c)return n;ke(c)&&(c=s(c));const d=n.slice();for(;c;)d[0]-=c.x||0,d[1]-=c.y||0,c=c.mark&&c.mark.group;return d}return{view:Wi(t),item:Wi(e||{}),group:s,xy:o,x:c=>o(c)[0],y:c=>o(c)[1]}}const d6="view",A1e="timer",N1e="window",C1e={trap:!1};function R1e(t){const e=mt({defaults:{}},t),n=(i,s)=>{s.forEach(o=>{he(i[o])&&(i[o]=Ma(i[o]))})};return n(e.defaults,["prevent","allow"]),n(e,["view","window","selector"]),e}function KW(t,e,n,i){t._eventListeners.push({type:n,sources:Ie(e),handler:i})}function L1e(t,e){var n=t._eventConfig.defaults,i=n.prevent,s=n.allow;return i===!1||s===!0?!1:i===!0||s===!1?!0:i?i[e]:s?!s[e]:t.preventDefault()}function qb(t,e,n){const i=t._eventConfig&&t._eventConfig[e];return i===!1||Fe(i)&&!i[n]?(t.warn("Blocked ".concat(e," ").concat(n," event listener.")),!1):!0}function P1e(t,e,n){var i=this,s=new mE(n),o=function(u,a){i.runAsync(null,()=>{t===d6&&L1e(i,e)&&u.preventDefault(),s.receive(O1e(i,u,a))})},c;if(t===A1e)qb(i,"timer",e)&&i.timer(o,e);else if(t===d6)qb(i,"view",e)&&i.addEventListener(e,o,C1e);else if(t===N1e?qb(i,"window",e)&&typeof window<"u"&&(c=[window]):typeof document<"u"&&qb(i,"selector",e)&&(c=document.querySelectorAll(t)),!c)i.warn("Can not resolve event source: "+t);else{for(var d=0,f=c.length;d<f;++d)c[d].addEventListener(e,o);KW(i,c,e,o)}return s}function f6(t){return t.item}function u6(t){return t.item.mark.source}function h6(t){return function(e,n){return n.vega.view().changeset().encode(n.item,t)}}function D1e(t,e){return t=[t||"hover"],e=[e||"update",t[0]],this.on(this.events("view","mouseover",f6),u6,h6(t)),this.on(this.events("view","mouseout",f6),u6,h6(e)),this}function j1e(){var t=this._tooltip,e=this._timers,n=this._eventListeners,i,s,o;for(i=e.length;--i>=0;)e[i].stop();for(i=n.length;--i>=0;)for(o=n[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);return t&&t.call(this,this._handler,null,null,null),this}function lr(t,e,n){const i=document.createElement(t);for(const s in e)i.setAttribute(s,e[s]);return n!=null&&(i.textContent=n),i}const U1e="vega-bind",z1e="vega-bind-name",$1e="vega-bind-radio";function q1e(t,e,n){if(!e)return;const i=n.param;let s=n.state;return s||(s=n.state={elements:null,active:!1,set:null,update:c=>{c!=t.signal(i.signal)&&t.runAsync(null,()=>{s.source=!0,t.signal(i.signal,c)})}},i.debounce&&(s.update=vM(i.debounce,s.update))),(i.input==null&&i.element?G1e:H1e)(s,e,i,t),s.active||(t.on(t._signals[i.signal],null,()=>{s.source?s.source=!1:s.set(t.signal(i.signal))}),s.active=!0),s}function G1e(t,e,n,i){const s=n.event||"input",o=()=>t.update(e.value);i.signal(n.signal,e.value),e.addEventListener(s,o),KW(i,e,s,o),t.set=c=>{e.value=c,e.dispatchEvent(V1e(s))}}function V1e(t){return typeof Event<"u"?new Event(t):{type:t}}function H1e(t,e,n,i){const s=i.signal(n.signal),o=lr("div",{class:U1e}),c=n.input==="radio"?o:o.appendChild(lr("label"));c.appendChild(lr("span",{class:z1e},n.name||n.signal)),e.appendChild(o);let d=W1e;switch(n.input){case"checkbox":d=Y1e;break;case"select":d=X1e;break;case"radio":d=K1e;break;case"range":d=J1e;break}d(t,c,n,s)}function W1e(t,e,n,i){const s=lr("input");for(const o in n)o!=="signal"&&o!=="element"&&s.setAttribute(o==="input"?"type":o,n[o]);s.setAttribute("name",n.signal),s.value=i,e.appendChild(s),s.addEventListener("input",()=>t.update(s.value)),t.elements=[s],t.set=o=>s.value=o}function Y1e(t,e,n,i){const s={type:"checkbox",name:n.signal};i&&(s.checked=!0);const o=lr("input",s);e.appendChild(o),o.addEventListener("change",()=>t.update(o.checked)),t.elements=[o],t.set=c=>o.checked=!!c||null}function X1e(t,e,n,i){const s=lr("select",{name:n.signal}),o=n.labels||[];n.options.forEach((c,d)=>{const f={value:c};Jv(c,i)&&(f.selected=!0),s.appendChild(lr("option",f,(o[d]||c)+""))}),e.appendChild(s),s.addEventListener("change",()=>{t.update(n.options[s.selectedIndex])}),t.elements=[s],t.set=c=>{for(let d=0,f=n.options.length;d<f;++d)if(Jv(n.options[d],c)){s.selectedIndex=d;return}}}function K1e(t,e,n,i){const s=lr("span",{class:$1e}),o=n.labels||[];e.appendChild(s),t.elements=n.options.map((c,d)=>{const f={type:"radio",name:n.signal,value:c};Jv(c,i)&&(f.checked=!0);const u=lr("input",f);u.addEventListener("change",()=>t.update(c));const a=lr("label",{},(o[d]||c)+"");return a.prepend(u),s.appendChild(a),u}),t.set=c=>{const d=t.elements,f=d.length;for(let u=0;u<f;++u)Jv(d[u].value,c)&&(d[u].checked=!0)}}function J1e(t,e,n,i){i=i!==void 0?i:(+n.max+ +n.min)/2;const s=n.max!=null?n.max:Math.max(100,+i)||100,o=n.min||Math.min(0,s,+i)||0,c=n.step||Hc(o,s,100),d=lr("input",{type:"range",name:n.signal,min:o,max:s,step:c});d.value=i;const f=lr("span",{},+i);e.appendChild(d),e.appendChild(f);const u=()=>{f.textContent=d.value,t.update(+d.value)};d.addEventListener("input",u),d.addEventListener("change",u),t.elements=[d],t.set=a=>{d.value=a,f.textContent=a}}function Jv(t,e){return t===e||t+""==e+""}function JW(t,e,n,i,s,o){return e=e||new i(t.loader()),e.initialize(n,YW(t),XW(t),$E(t),s,o).background(t.background())}function GN(t,e){return e?function(){try{e.apply(this,arguments)}catch(n){t.error(n)}}:null}function Q1e(t,e,n,i){const s=new i(t.loader(),GN(t,t.tooltip())).scene(t.scenegraph().root).initialize(n,$E(t),t);return e&&e.handlers().forEach(o=>{s.on(o.type,o.handler)}),s}function Z1e(t,e){const n=this,i=n._renderType,s=n._eventConfig.bind,o=CE(i);t=n._el=t?oB(n,t,!0):null,E1e(n),o||n.error("Unrecognized renderer type: "+i);const c=o.handler||km,d=t?o.renderer:o.headless;return n._renderer=d?JW(n,n._renderer,t,d):null,n._handler=Q1e(n,n._handler,t,c),n._redraw=!0,t&&s!=="none"&&(e=e?n._elBind=oB(n,e,!0):t.appendChild(lr("form",{class:"vega-bindings"})),n._bind.forEach(f=>{f.param.element&&s!=="container"&&(f.element=oB(n,f.param.element,!!f.param.input))}),n._bind.forEach(f=>{q1e(n,f.element||e,f)})),n}function oB(t,e,n){if(typeof e=="string")if(typeof document<"u"){if(e=document.querySelector(e),!e)return t.error("Signal bind element not found: "+e),null}else return t.error("DOM document instance not found."),null;if(e&&n)try{e.textContent=""}catch(i){e=null,t.error(i)}return e}const Ug=t=>+t||0,eEe=t=>({top:t,bottom:t,left:t,right:t});function p6(t){return Fe(t)?{top:Ug(t.top),bottom:Ug(t.bottom),left:Ug(t.left),right:Ug(t.right)}:eEe(Ug(t))}async function VN(t,e,n,i){const s=CE(e),o=s&&s.headless;return o||de("Unrecognized renderer type: "+e),await t.runAsync(),JW(t,null,null,o,n,i).renderAsync(t._scenegraph.root)}async function tEe(t,e){t!==Fc.Canvas&&t!==Fc.SVG&&t!==Fc.PNG&&de("Unrecognized image type: "+t);const n=await VN(this,t,e);return t===Fc.SVG?nEe(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function nEe(t,e){const n=new Blob([t],{type:e});return window.URL.createObjectURL(n)}async function iEe(t,e){return(await VN(this,Fc.Canvas,t,e)).canvas()}async function sEe(t){return(await VN(this,Fc.SVG,t)).svg()}function rEe(t,e,n){return VW(t,vp,Ey,n).parse(e)}function aEe(t){var e=this._runtime.scales;return Le(e,t)||de("Unrecognized scale or projection: "+t),e[t].value}var QW="width",ZW="height",HN="padding",g6={skip:!0};function eY(t,e){var n=t.autosize(),i=t.padding();return e-(n&&n.contains===HN?i.left+i.right:0)}function tY(t,e){var n=t.autosize(),i=t.padding();return e-(n&&n.contains===HN?i.top+i.bottom:0)}function oEe(t){var e=t._signals,n=e[QW],i=e[ZW],s=e[HN];function o(){t._autosize=t._resize=1}t._resizeWidth=t.add(null,d=>{t._width=d.size,t._viewWidth=eY(t,d.size),o()},{size:n}),t._resizeHeight=t.add(null,d=>{t._height=d.size,t._viewHeight=tY(t,d.size),o()},{size:i});const c=t.add(null,o,{pad:s});t._resizeWidth.rank=n.rank+1,t._resizeHeight.rank=i.rank+1,c.rank=s.rank+1}function lEe(t,e,n,i,s,o){this.runAfter(c=>{let d=0;c._autosize=0,c.width()!==n&&(d=1,c.signal(QW,n,g6),c._resizeWidth.skip(!0)),c.height()!==i&&(d=1,c.signal(ZW,i,g6),c._resizeHeight.skip(!0)),c._viewWidth!==t&&(c._resize=1,c._viewWidth=t),c._viewHeight!==e&&(c._resize=1,c._viewHeight=e),(c._origin[0]!==s[0]||c._origin[1]!==s[1])&&(c._resize=1,c._origin=s),d&&c.run("enter"),o&&c.runAfter(f=>f.resize())},!1,1)}function cEe(t){return this._runtime.getState(t||{data:dEe,signals:fEe,recurse:!0})}function dEe(t,e){return e.modified&&he(e.input.value)&&t.indexOf("_:vega:_")}function fEe(t,e){return!(t==="parent"||e instanceof vp.proxy)}function uEe(t){return this.runAsync(null,e=>{e._trigger=!1,e._runtime.setState(t)},e=>{e._trigger=!0}),this}function hEe(t,e){function n(i){t({timestamp:Date.now(),elapsed:i})}this._timers.push(Ree(n,e))}function pEe(t,e,n,i){const s=t.element();s&&s.setAttribute("title",gEe(i))}function gEe(t){return t==null?"":he(t)?nY(t):Fe(t)&&!Dc(t)?_Ee(t):t+""}function _Ee(t){return Object.keys(t).map(e=>{const n=t[e];return e+": "+(he(n)?nY(n):iY(n))}).join(`
`)}function nY(t){return"["+t.map(iY).join(", ")+"]"}function iY(t){return he(t)?"[\u2026]":Fe(t)&&!Dc(t)?"{\u2026}":t}function sY(t,e){const n=this;if(e=e||{},Uh.call(n),e.loader&&n.loader(e.loader),e.logger&&n.logger(e.logger),e.logLevel!=null&&n.logLevel(e.logLevel),e.locale||t.locale){const o=mt({},t.locale,e.locale);n.locale(FG(o.number,o.time))}n._el=null,n._elBind=null,n._renderType=e.renderer||Fc.Canvas,n._scenegraph=new DA;const i=n._scenegraph.root;n._renderer=null,n._tooltip=e.tooltip||pEe,n._redraw=!0,n._handler=new km().scene(i),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=R1e(t.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const s=rEe(n,t,e.expr);n._runtime=s,n._signals=s.signals,n._bind=(t.bindings||[]).map(o=>({state:null,param:mt({},o)})),s.root&&s.root.set(i),i.source=s.data.root.input,n.pulse(s.data.root.input,n.changeset().insert(i.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=eY(n,n._width),n._viewHeight=tY(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,oEe(n),S1e(n),x1e(n),n.description(t.description),e.hover&&n.hover(),e.container&&n.initialize(e.container,e.bind)}function Gb(t,e){return Le(t._signals,e)?t._signals[e]:de("Unrecognized signal name: "+Se(e))}function rY(t,e){const n=(t._targets||[]).filter(i=>i._update&&i._update.handler===e);return n.length?n[0]:null}function _6(t,e,n,i){let s=rY(n,i);return s||(s=GN(t,()=>i(e,n.value)),s.handler=i,t.on(n,null,s)),t}function y6(t,e,n){const i=rY(e,n);return i&&e._targets.remove(i),t}ve(sY,Uh,{async evaluate(t,e,n){if(await Uh.prototype.evaluate.call(this,t,e),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,F1e(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(i){this.error(i)}return n&&E0(this,n),this},dirty(t){this._redraw=!0,this._renderer&&this._renderer.dirty(t)},description(t){if(arguments.length){const e=t!=null?t+"":null;return e!==this._desc&&WW(this._el,this._desc=e),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(t,e,n){const i=Gb(this,t);return arguments.length===1?i.value:this.update(i,e,n)},width(t){return arguments.length?this.signal("width",t):this.signal("width")},height(t){return arguments.length?this.signal("height",t):this.signal("height")},padding(t){return arguments.length?this.signal("padding",p6(t)):p6(this.signal("padding"))},autosize(t){return arguments.length?this.signal("autosize",t):this.signal("autosize")},background(t){return arguments.length?this.signal("background",t):this.signal("background")},renderer(t){return arguments.length?(CE(t)||de("Unrecognized renderer type: "+t),t!==this._renderType&&(this._renderType=t,this._resetRenderer()),this):this._renderType},tooltip(t){return arguments.length?(t!==this._tooltip&&(this._tooltip=t,this._resetRenderer()),this):this._tooltip},loader(t){return arguments.length?(t!==this._loader&&(Uh.prototype.loader.call(this,t),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(Gb(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:lEe,addEventListener(t,e,n){let i=e;return n&&n.trap===!1||(i=GN(this,e),i.raw=e),this._handler.on(t,i),this},removeEventListener(t,e){for(var n=this._handler.handlers(t),i=n.length,s,o;--i>=0;)if(o=n[i].type,s=n[i].handler,t===o&&(e===s||e===s.raw)){this._handler.off(o,s);break}return this},addResizeListener(t){const e=this._resizeListeners;return e.indexOf(t)<0&&e.push(t),this},removeResizeListener(t){var e=this._resizeListeners,n=e.indexOf(t);return n>=0&&e.splice(n,1),this},addSignalListener(t,e){return _6(this,t,Gb(this,t),e)},removeSignalListener(t,e){return y6(this,Gb(this,t),e)},addDataListener(t,e){return _6(this,t,Kv(this,t).values,e)},removeDataListener(t,e){return y6(this,Kv(this,t).values,e)},globalCursor(t){if(arguments.length){if(this._globalCursor!==!!t){const e=RI(this,null);this._globalCursor=!!t,e&&RI(this,e)}return this}else return this._globalCursor},preventDefault(t){return arguments.length?(this._preventDefault=t,this):this._preventDefault},timer:hEe,events:P1e,finalize:j1e,hover:D1e,data:B1e,change:zE,insert:k1e,remove:I1e,scale:aEe,initialize:Z1e,toImageURL:tEe,toCanvas:iEe,toSVG:sEe,getState:cEe,setState:uEe});const yEe="view",Qv="[",Zv="]",aY="{",oY="}",mEe=":",lY=",",wEe="@",bEe=">",TEe=/[[\]{}]/,vEe={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let cY,dY;function Ad(t,e,n){return cY=e||yEe,dY=n||vEe,fY(t.trim()).map(LI)}function EEe(t){return dY[t]}function L_(t,e,n,i,s){const o=t.length;let c=0,d;for(;e<o;++e){if(d=t[e],!c&&d===n)return e;s&&s.indexOf(d)>=0?--c:i&&i.indexOf(d)>=0&&++c}return e}function fY(t){const e=[],n=t.length;let i=0,s=0;for(;s<n;)s=L_(t,s,lY,Qv+aY,Zv+oY),e.push(t.substring(i,s).trim()),i=++s;if(e.length===0)throw"Empty event selector: "+t;return e}function LI(t){return t[0]==="["?SEe(t):xEe(t)}function SEe(t){const e=t.length;let n=1,i;if(n=L_(t,n,Zv,Qv,Zv),n===e)throw"Empty between selector: "+t;if(i=fY(t.substring(1,n)),i.length!==2)throw"Between selector must have two elements: "+t;if(t=t.slice(n+1).trim(),t[0]!==bEe)throw"Expected '>' after between selector: "+t;i=i.map(LI);const s=LI(t.slice(1).trim());return s.between?{between:i,stream:s}:(s.between=i,s)}function xEe(t){const e={source:cY},n=[];let i=[0,0],s=0,o=0,c=t.length,d=0,f,u;if(t[c-1]===oY){if(d=t.lastIndexOf(aY),d>=0){try{i=BEe(t.substring(d+1,c-1))}catch{throw"Invalid throttle specification: "+t}t=t.slice(0,d).trim(),c=t.length}else throw"Unmatched right brace: "+t;d=0}if(!c)throw t;if(t[0]===wEe&&(s=++d),f=L_(t,d,mEe),f<c&&(n.push(t.substring(o,f).trim()),o=d=++f),d=L_(t,d,Qv),d===c)n.push(t.substring(o,c).trim());else if(n.push(t.substring(o,d).trim()),u=[],o=++d,o===c)throw"Unmatched left bracket: "+t;for(;d<c;){if(d=L_(t,d,Zv),d===c)throw"Unmatched left bracket: "+t;if(u.push(t.substring(o,d).trim()),d<c-1&&t[++d]!==Qv)throw"Expected left bracket: "+t;o=++d}if(!(c=n.length)||TEe.test(n[c-1]))throw"Invalid event selector: "+t;return c>1?(e.type=n[1],s?e.markname=n[0].slice(1):EEe(n[0])?e.marktype=n[0]:e.source=n[0]):e.type=n[0],e.type.slice(-1)==="!"&&(e.consume=!0,e.type=e.type.slice(0,-1)),u!=null&&(e.filter=u),i[0]&&(e.throttle=i[0]),i[1]&&(e.debounce=i[1]),e}function BEe(t){const e=t.split(lY);if(!t.length||e.length>2)throw t;return e.map(n=>{const i=+n;if(i!==i)throw t;return i})}function kEe(t){return Fe(t)?t:{type:t||"pad"}}const zg=t=>+t||0,IEe=t=>({top:t,bottom:t,left:t,right:t});function FEe(t){return Fe(t)?t.signal?t:{top:zg(t.top),bottom:zg(t.bottom),left:zg(t.left),right:zg(t.right)}:IEe(zg(t))}const ui=t=>Fe(t)&&!he(t)?mt({},t):{value:t};function m6(t,e,n,i){return n!=null?(Fe(n)&&!he(n)||he(n)&&n.length&&Fe(n[0])?t.update[e]=n:t[i||"enter"][e]={value:n},1):0}function Si(t,e,n){for(const i in e)m6(t,i,e[i]);for(const i in n)m6(t,i,n[i],"update")}function dg(t,e,n){for(const i in e)n&&Le(n,i)||(t[i]=mt(t[i]||{},e[i]));return t}function fh(t,e){return e&&(e.enter&&e.enter[t]||e.update&&e.update[t])}const WN="mark",YN="frame",XN="scope",OEe="axis",MEe="axis-domain",AEe="axis-grid",NEe="axis-label",CEe="axis-tick",REe="axis-title",LEe="legend",PEe="legend-band",DEe="legend-entry",jEe="legend-gradient",uY="legend-label",UEe="legend-symbol",zEe="legend-title",$Ee="title",qEe="title-text",GEe="title-subtitle";function VEe(t,e,n,i,s){const o={},c={};let d,f,u,a;f="lineBreak",e==="text"&&s[f]!=null&&!fh(f,t)&&lB(o,f,s[f]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),a=n===YN?s.group:n===WN?mt({},s.mark,s[e]):null;for(f in a)u=fh(f,t)||(f==="fill"||f==="stroke")&&(fh("fill",t)||fh("stroke",t)),u||lB(o,f,a[f]);Ie(i).forEach(_=>{const w=s.style&&s.style[_];for(const m in w)fh(m,t)||lB(o,m,w[m])}),t=mt({},t);for(f in o)a=o[f],a.signal?(d=d||{})[f]=a:c[f]=a;return t.enter=mt(c,t.enter),d&&(t.update=mt(d,t.update)),t}function lB(t,e,n){t[e]=n&&n.signal?{signal:n.signal}:{value:n}}const hY=t=>ke(t)?Se(t):t.signal?`(${t.signal})`:pY(t);function qE(t){if(t.gradient!=null)return WEe(t);let e=t.signal?`(${t.signal})`:t.color?HEe(t.color):t.field!=null?pY(t.field):t.value!==void 0?Se(t.value):void 0;return t.scale!=null&&(e=YEe(t,e)),e===void 0&&(e=null),t.exponent!=null&&(e=`pow(${e},${L0(t.exponent)})`),t.mult!=null&&(e+=`*${L0(t.mult)}`),t.offset!=null&&(e+=`+${L0(t.offset)}`),t.round&&(e=`round(${e})`),e}const Vb=(t,e,n,i)=>`(${t}(${[e,n,i].map(qE).join(",")})+'')`;function HEe(t){return t.c?Vb("hcl",t.h,t.c,t.l):t.h||t.s?Vb("hsl",t.h,t.s,t.l):t.l||t.a?Vb("lab",t.l,t.a,t.b):t.r||t.g||t.b?Vb("rgb",t.r,t.g,t.b):null}function WEe(t){const e=[t.start,t.stop,t.count].map(n=>n==null?null:Se(n));for(;e.length&&Rt(e)==null;)e.pop();return e.unshift(hY(t.gradient)),`gradient(${e.join(",")})`}function L0(t){return Fe(t)?"("+qE(t)+")":t}function pY(t){return gY(Fe(t)?t:{datum:t})}function gY(t){let e,n,i;if(t.signal)e="datum",i=t.signal;else if(t.group||t.parent){for(n=Math.max(1,t.level||1),e="item";n-- >0;)e+=".mark.group";t.parent?(i=t.parent,e+=".datum"):i=t.group}else t.datum?(e="datum",i=t.datum):de("Invalid field reference: "+Se(t));return t.signal||(i=ke(i)?Xo(i).map(Se).join("]["):gY(i)),e+"["+i+"]"}function YEe(t,e){const n=hY(t.scale);return t.range!=null?e=`lerp(_range(${n}), ${+t.range})`:(e!==void 0&&(e=`_scale(${n}, ${e})`),t.band&&(e=(e?e+"+":"")+`_bandwidth(${n})`+(+t.band==1?"":"*"+L0(t.band)),t.extra&&(e=`(datum.extra ? _scale(${n}, datum.extra.value) : ${e})`)),e==null&&(e="0")),e}function XEe(t){let e="";return t.forEach(n=>{const i=qE(n);e+=n.test?`(${n.test})?${i}:`:i}),Rt(e)===":"&&(e+="null"),e}function _Y(t,e,n,i,s,o){const c={};o=o||{},o.encoders={$encode:c},t=VEe(t,e,n,i,s.config);for(const d in t)c[d]=KEe(t[d],e,o,s);return o}function KEe(t,e,n,i){const s={},o={};for(const c in t)t[c]!=null&&(s[c]=QEe(JEe(t[c]),i,n,o));return{$expr:{marktype:e,channels:s},$fields:Object.keys(o),$output:Object.keys(t)}}function JEe(t){return he(t)?XEe(t):qE(t)}function QEe(t,e,n,i){const s=Uo(t,e);return s.$fields.forEach(o=>i[o]=1),mt(n,s.$params),s.$expr}const ZEe="outer",eSe=["value","update","init","react","bind"];function w6(t,e){de(t+' for "outer" push: '+Se(e))}function yY(t,e){const n=t.name;if(t.push===ZEe)e.signals[n]||w6("No prior signal definition",n),eSe.forEach(i=>{t[i]!==void 0&&w6("Invalid property ",i)});else{const i=e.addSignal(n,t.value);t.react===!1&&(i.react=!1),t.bind&&e.addBinding(n,t.bind)}}function PI(t,e,n,i){this.id=-1,this.type=t,this.value=e,this.params=n,i&&(this.parent=i)}function GE(t,e,n,i){return new PI(t,e,n,i)}function e1(t,e){return GE("operator",t,e)}function Pe(t){const e={$ref:t.id};return t.id<0&&(t.refs=t.refs||[]).push(e),e}function Sy(t,e){return e?{$field:t,$name:e}:{$field:t}}const DI=Sy("key");function b6(t,e){return{$compare:t,$order:e}}function tSe(t,e){const n={$key:t};return e&&(n.$flat=!0),n}const nSe="ascending",iSe="descending";function sSe(t){return Fe(t)?(t.order===iSe?"-":"+")+VE(t.op,t.field):""}function VE(t,e){return(t&&t.signal?"$"+t.signal:t||"")+(t&&e?"_":"")+(e&&e.signal?"$"+e.signal:e||"")}const KN="scope",jI="view";function ei(t){return t&&t.signal}function rSe(t){return t&&t.expr}function P0(t){if(ei(t))return!0;if(Fe(t)){for(const e in t)if(P0(t[e]))return!0}return!1}function oa(t,e){return t!=null?t:e}function Df(t){return t&&t.signal||t}const T6="timer";function xy(t,e){return(t.merge?oSe:t.stream?lSe:t.type?cSe:de("Invalid stream specification: "+Se(t)))(t,e)}function aSe(t){return t===KN?jI:t||jI}function oSe(t,e){const n=t.merge.map(s=>xy(s,e)),i=JN({merge:n},t,e);return e.addStream(i).id}function lSe(t,e){const n=xy(t.stream,e),i=JN({stream:n},t,e);return e.addStream(i).id}function cSe(t,e){let n;t.type===T6?(n=e.event(T6,t.throttle),t={between:t.between,filter:t.filter}):n=e.event(aSe(t.source),t.type);const i=JN({stream:n},t,e);return Object.keys(i).length===1?n:e.addStream(i).id}function JN(t,e,n){let i=e.between;return i&&(i.length!==2&&de('Stream "between" parameter must have 2 entries: '+Se(e)),t.between=[xy(i[0],n),xy(i[1],n)]),i=e.filter?[].concat(e.filter):[],(e.marktype||e.markname||e.markrole)&&i.push(dSe(e.marktype,e.markname,e.markrole)),e.source===KN&&i.push("inScope(event.item)"),i.length&&(t.filter=Uo("("+i.join(")&&(")+")",n).$expr),(i=e.throttle)!=null&&(t.throttle=+i),(i=e.debounce)!=null&&(t.debounce=+i),e.consume&&(t.consume=!0),t}function dSe(t,e,n){const i="event.item";return i+(t&&t!=="*"?"&&"+i+".mark.marktype==='"+t+"'":"")+(n?"&&"+i+".mark.role==='"+n+"'":"")+(e?"&&"+i+".mark.name==='"+e+"'":"")}const fSe={code:"_.$value",ast:{type:"Identifier",value:"value"}};function uSe(t,e,n){const i=t.encode,s={target:n};let o=t.events,c=t.update,d=[];o||de("Signal update missing events specification."),ke(o)&&(o=Ad(o,e.isSubscope()?KN:jI)),o=Ie(o).filter(f=>f.signal||f.scale?(d.push(f),0):1),d.length>1&&(d=[pSe(d)]),o.length&&d.push(o.length>1?{merge:o}:o[0]),i!=null&&(c&&de("Signal encode and update are mutually exclusive."),c="encode(item(),"+Se(i)+")"),s.update=ke(c)?Uo(c,e):c.expr!=null?Uo(c.expr,e):c.value!=null?c.value:c.signal!=null?{$expr:fSe,$params:{$value:e.signalRef(c.signal)}}:de("Invalid signal update specification."),t.force&&(s.options={force:!0}),d.forEach(f=>e.addUpdate(mt(hSe(f,e),s)))}function hSe(t,e){return{source:t.signal?e.signalRef(t.signal):t.scale?e.scaleRef(t.scale):xy(t,e)}}function pSe(t){return{signal:"["+t.map(e=>e.scale?'scale("'+e.scale+'")':e.signal)+"]"}}function gSe(t,e){const n=e.getSignal(t.name);let i=t.update;t.init&&(i?de("Signals can not include both init and update expressions."):(i=t.init,n.initonly=!0)),i&&(i=Uo(i,e),n.update=i.$expr,n.params=i.$params),t.on&&t.on.forEach(s=>uSe(s,e,n.id))}const cn=t=>(e,n,i)=>GE(t,n,e||void 0,i),mY=cn("aggregate"),_Se=cn("axisticks"),wY=cn("bound"),ja=cn("collect"),v6=cn("compare"),ySe=cn("datajoin"),bY=cn("encode"),mSe=cn("expression"),wSe=cn("facet"),bSe=cn("field"),TSe=cn("key"),vSe=cn("legendentries"),ESe=cn("load"),SSe=cn("mark"),xSe=cn("multiextent"),BSe=cn("multivalues"),kSe=cn("overlap"),ISe=cn("params"),TY=cn("prefacet"),FSe=cn("projection"),OSe=cn("proxy"),MSe=cn("relay"),vY=cn("render"),ASe=cn("scale"),Ru=cn("sieve"),NSe=cn("sortitems"),EY=cn("viewlayout"),CSe=cn("values");let RSe=0;const SY={min:"min",max:"max",count:"sum"};function LSe(t,e){const n=t.type||"linear";bV(n)||de("Unrecognized scale type: "+Se(n)),e.addScale(t.name,{type:n,domain:void 0})}function PSe(t,e){const n=e.getScale(t.name).params;let i;n.domain=xY(t.domain,t,e),t.range!=null&&(n.range=kY(t,e,n)),t.interpolate!=null&&WSe(t.interpolate,n),t.nice!=null&&(n.nice=HSe(t.nice)),t.bins!=null&&(n.bins=VSe(t.bins,e));for(i in t)Le(n,i)||i==="name"||(n[i]=Fr(t[i],e))}function Fr(t,e){return Fe(t)?t.signal?e.signalRef(t.signal):de("Unsupported object: "+Se(t)):t}function D0(t,e){return t.signal?e.signalRef(t.signal):t.map(n=>Fr(n,e))}function HE(t){de("Can not find data set: "+Se(t))}function xY(t,e,n){if(!t){(e.domainMin!=null||e.domainMax!=null)&&de("No scale domain defined for domainMin/domainMax to override.");return}return t.signal?n.signalRef(t.signal):(he(t)?DSe:t.fields?USe:jSe)(t,e,n)}function DSe(t,e,n){return t.map(i=>Fr(i,n))}function jSe(t,e,n){const i=n.getData(t.data);return i||HE(t.data),xp(e.type)?i.valuesRef(n,t.field,BY(t.sort,!1)):EV(e.type)?i.domainRef(n,t.field):i.extentRef(n,t.field)}function USe(t,e,n){const i=t.data,s=t.fields.reduce((o,c)=>(c=ke(c)?{data:i,field:c}:he(c)||c.signal?zSe(c,n):c,o.push(c),o),[]);return(xp(e.type)?$Se:EV(e.type)?qSe:GSe)(t,n,s)}function zSe(t,e){const n="_:vega:_"+RSe++,i=ja({});if(he(t))i.value={$ingest:t};else if(t.signal){const s="setdata("+Se(n)+","+t.signal+")";i.params.input=e.signalRef(s)}return e.addDataPipeline(n,[i,Ru({})]),{data:n,field:"data"}}function $Se(t,e,n){const i=BY(t.sort,!0);let s,o;const c=n.map(u=>{const a=e.getData(u.data);return a||HE(u.data),a.countsRef(e,u.field,i)}),d={groupby:DI,pulse:c};i&&(s=i.op||"count",o=i.field?VE(s,i.field):"count",d.ops=[SY[s]],d.fields=[e.fieldRef(o)],d.as=[o]),s=e.add(mY(d));const f=e.add(ja({pulse:Pe(s)}));return o=e.add(CSe({field:DI,sort:e.sortRef(i),pulse:Pe(f)})),Pe(o)}function BY(t,e){return t&&(!t.field&&!t.op?Fe(t)?t.field="key":t={field:"key"}:!t.field&&t.op!=="count"?de("No field provided for sort aggregate op: "+t.op):e&&t.field&&t.op&&!SY[t.op]&&de("Multiple domain scales can not be sorted using "+t.op)),t}function qSe(t,e,n){const i=n.map(s=>{const o=e.getData(s.data);return o||HE(s.data),o.domainRef(e,s.field)});return Pe(e.add(BSe({values:i})))}function GSe(t,e,n){const i=n.map(s=>{const o=e.getData(s.data);return o||HE(s.data),o.extentRef(e,s.field)});return Pe(e.add(xSe({extents:i})))}function VSe(t,e){return t.signal||he(t)?D0(t,e):e.objectProperty(t)}function HSe(t){return Fe(t)?{interval:Fr(t.interval),step:Fr(t.step)}:Fr(t)}function WSe(t,e){e.interpolate=Fr(t.type||t),t.gamma!=null&&(e.interpolateGamma=Fr(t.gamma))}function kY(t,e,n){const i=e.config.range;let s=t.range;if(s.signal)return e.signalRef(s.signal);if(ke(s)){if(i&&Le(i,s))return t=mt({},t,{range:i[s]}),kY(t,e,n);s==="width"?s=[0,{signal:"width"}]:s==="height"?s=xp(t.type)?[0,{signal:"height"}]:[{signal:"height"},0]:de("Unrecognized scale range value: "+Se(s))}else if(s.scheme){n.scheme=he(s.scheme)?D0(s.scheme,e):Fr(s.scheme,e),s.extent&&(n.schemeExtent=D0(s.extent,e)),s.count&&(n.schemeCount=Fr(s.count,e));return}else if(s.step){n.rangeStep=Fr(s.step,e);return}else{if(xp(t.type)&&!he(s))return xY(s,t,e);he(s)||de("Unsupported range type: "+Se(s))}return s.map(o=>(he(o)?D0:Fr)(o,e))}function YSe(t,e){const n=e.config.projection||{},i={};for(const s in t)s!=="name"&&(i[s]=UI(t[s],s,e));for(const s in n)i[s]==null&&(i[s]=UI(n[s],s,e));e.addProjection(t.name,i)}function UI(t,e,n){return he(t)?t.map(i=>UI(i,e,n)):Fe(t)?t.signal?n.signalRef(t.signal):e==="fit"?t:de("Unsupported parameter object: "+Se(t)):t}const Ua="top",fg="left",ug="right",fd="bottom",IY="center",XSe="vertical",KSe="start",JSe="middle",QSe="end",zI="index",QN="label",ZSe="offset",Mp="perc",exe="perc2",Nr="value",Am="guide-label",ZN="guide-title",txe="group-title",nxe="group-subtitle",E6="symbol",j0="gradient",$I="discrete",qI="size",ixe="shape",sxe="fill",rxe="stroke",axe="strokeWidth",oxe="strokeDash",lxe="opacity",eC=[qI,ixe,sxe,rxe,axe,oxe,lxe],Nm={name:1,style:1,interactive:1},Pt={value:0},Cr={value:1},WE="group",FY="rect",tC="rule",cxe="symbol",Lu="text";function By(t){return t.type=WE,t.interactive=t.interactive||!1,t}function Xs(t,e){const n=(i,s)=>oa(t[i],oa(e[i],s));return n.isVertical=i=>XSe===oa(t.direction,e.direction||(i?e.symbolDirection:e.gradientDirection)),n.gradientLength=()=>oa(t.gradientLength,e.gradientLength||e.gradientWidth),n.gradientThickness=()=>oa(t.gradientThickness,e.gradientThickness||e.gradientHeight),n.entryColumns=()=>oa(t.columns,oa(e.columns,+n.isVertical(!0))),n}function OY(t,e){const n=e&&(e.update&&e.update[t]||e.enter&&e.enter[t]);return n&&n.signal?n:n?n.value:null}function dxe(t,e,n){const i=e.config.style[n];return i&&i[t]}function YE(t,e,n){return`item.anchor === '${KSe}' ? ${t} : item.anchor === '${QSe}' ? ${e} : ${n}`}const nC=YE(Se(fg),Se(ug),Se(IY));function fxe(t){const e=t("tickBand");let n=t("tickOffset"),i,s;return e?e.signal?(i={signal:`(${e.signal}) === 'extent' ? 1 : 0.5`},s={signal:`(${e.signal}) === 'extent'`},Fe(n)||(n={signal:`(${e.signal}) === 'extent' ? 0 : ${n}`})):e==="extent"?(i=1,s=!0,n=0):(i=.5,s=!1):(i=t("bandPosition"),s=t("tickExtra")),{extra:s,band:i,offset:n}}function MY(t,e){return e?t?Fe(t)?Object.assign({},t,{offset:MY(t.offset,e)}):{value:t,offset:e}:e:t}function hr(t,e){return e?(t.name=e.name,t.style=e.style||t.style,t.interactive=!!e.interactive,t.encode=dg(t.encode,e,Nm)):t.interactive=!1,t}function uxe(t,e,n,i){const s=Xs(t,n),o=s.isVertical(),c=s.gradientThickness(),d=s.gradientLength();let f,u,a,_,w;o?(u=[0,1],a=[0,0],_=c,w=d):(u=[0,0],a=[1,0],_=d,w=c);const m={enter:f={opacity:Pt,x:Pt,y:Pt,width:ui(_),height:ui(w)},update:mt({},f,{opacity:Cr,fill:{gradient:e,start:u,stop:a}}),exit:{opacity:Pt}};return Si(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),hr({type:FY,role:jEe,encode:m},i)}function hxe(t,e,n,i,s){const o=Xs(t,n),c=o.isVertical(),d=o.gradientThickness(),f=o.gradientLength();let u,a,_,w,m="";c?(u="y",_="y2",a="x",w="width",m="1-"):(u="x",_="x2",a="y",w="height");const l={opacity:Pt,fill:{scale:e,field:Nr}};l[u]={signal:m+"datum."+Mp,mult:f},l[a]=Pt,l[_]={signal:m+"datum."+exe,mult:f},l[w]=ui(d);const T={enter:l,update:mt({},l,{opacity:Cr}),exit:{opacity:Pt}};return Si(T,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),hr({type:FY,role:PEe,key:Nr,from:s,encode:T},i)}const pxe=`datum.${Mp}<=0?"${fg}":datum.${Mp}>=1?"${ug}":"${IY}"`,gxe=`datum.${Mp}<=0?"${fd}":datum.${Mp}>=1?"${Ua}":"${JSe}"`;function S6(t,e,n,i){const s=Xs(t,e),o=s.isVertical(),c=ui(s.gradientThickness()),d=s.gradientLength();let f=s("labelOverlap"),u,a,_,w,m="";const l={enter:u={opacity:Pt},update:a={opacity:Cr,text:{field:QN}},exit:{opacity:Pt}};return Si(l,{fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:oa(t.labelLimit,e.gradientLabelLimit)}),o?(u.align={value:"left"},u.baseline=a.baseline={signal:gxe},_="y",w="x",m="1-"):(u.align=a.align={signal:pxe},u.baseline={value:"top"},_="x",w="y"),u[_]=a[_]={signal:m+"datum."+Mp,mult:d},u[w]=a[w]=c,c.offset=oa(t.labelOffset,e.gradientLabelOffset)||0,f=f?{separation:s("labelSeparation"),method:f,order:"datum."+zI}:void 0,hr({type:Lu,role:uY,style:Am,key:Nr,from:i,encode:l,overlap:f},n)}function _xe(t,e,n,i,s){const o=Xs(t,e),c=n.entries,d=!!(c&&c.interactive),f=c?c.name:void 0,u=o("clipHeight"),a=o("symbolOffset"),_={data:"value"},w=`(${s}) ? datum.${ZSe} : datum.${qI}`,m=u?ui(u):{field:qI},l=`datum.${zI}`,T=`max(1, ${s})`;let b,S,x,B,F;m.mult=.5,b={enter:S={opacity:Pt,x:{signal:w,mult:.5,offset:a},y:m},update:x={opacity:Cr,x:S.x,y:S.y},exit:{opacity:Pt}};let k=null,A=null;t.fill||(k=e.symbolBaseFillColor,A=e.symbolBaseStrokeColor),Si(b,{fill:o("symbolFillColor",k),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",A),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),eC.forEach(j=>{t[j]&&(x[j]=S[j]={scale:t[j],field:Nr})});const M=hr({type:cxe,role:UEe,key:Nr,from:_,clip:u?!0:void 0,encode:b},n.symbols),R=ui(a);R.offset=o("labelOffset"),b={enter:S={opacity:Pt,x:{signal:w,offset:R},y:m},update:x={opacity:Cr,text:{field:QN},x:S.x,y:S.y},exit:{opacity:Pt}},Si(b,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});const P=hr({type:Lu,role:uY,style:Am,key:Nr,from:_,encode:b},n.labels);return b={enter:{noBound:{value:!u},width:Pt,height:u?ui(u):Pt,opacity:Pt},exit:{opacity:Pt},update:x={opacity:Cr,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(B=`ceil(item.mark.items.length / ${T})`,x.row.signal=`${l}%${B}`,x.column.signal=`floor(${l} / ${B})`,F={field:["row",l]}):(x.row.signal=`floor(${l} / ${T})`,x.column.signal=`${l} % ${T}`,F={field:l}),x.column.signal=`(${s})?${x.column.signal}:${l}`,i={facet:{data:i,name:"value",groupby:zI}},By({role:XN,from:i,encode:dg(b,c,Nm),marks:[M,P],name:f,interactive:d,sort:F})}function yxe(t,e){const n=Xs(t,e);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const iC='item.orient === "left"',sC='item.orient === "right"',XE=`(${iC} || ${sC})`,mxe=`datum.vgrad && ${XE}`,wxe=YE('"top"','"bottom"','"middle"'),bxe=YE('"right"','"left"','"center"'),Txe=`datum.vgrad && ${sC} ? (${bxe}) : (${XE} && !(datum.vgrad && ${iC})) ? "left" : ${nC}`,vxe=`item._anchor || (${XE} ? "middle" : "start")`,Exe=`${mxe} ? (${iC} ? -90 : 90) : 0`,Sxe=`${XE} ? (datum.vgrad ? (${sC} ? "bottom" : "top") : ${wxe}) : "top"`;function xxe(t,e,n,i){const s=Xs(t,e),o={enter:{opacity:Pt},update:{opacity:Cr,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Pt}};return Si(o,{orient:s("titleOrient"),_anchor:s("titleAnchor"),anchor:{signal:vxe},angle:{signal:Exe},align:{signal:Txe},baseline:{signal:Sxe},text:t.title,fill:s("titleColor"),fillOpacity:s("titleOpacity"),font:s("titleFont"),fontSize:s("titleFontSize"),fontStyle:s("titleFontStyle"),fontWeight:s("titleFontWeight"),limit:s("titleLimit"),lineHeight:s("titleLineHeight")},{align:s("titleAlign"),baseline:s("titleBaseline")}),hr({type:Lu,role:zEe,style:ZN,from:i,encode:o},n)}function Bxe(t,e){let n;return Fe(t)&&(t.signal?n=t.signal:t.path?n="pathShape("+x6(t.path)+")":t.sphere&&(n="geoShape("+x6(t.sphere)+', {type: "Sphere"})')),n?e.signalRef(n):!!t}function x6(t){return Fe(t)&&t.signal?t.signal:Se(t)}function AY(t){const e=t.role||"";return!e.indexOf("axis")||!e.indexOf("legend")||!e.indexOf("title")?e:t.type===WE?XN:e||WN}function kxe(t){return{marktype:t.type,name:t.name||void 0,role:t.role||AY(t),zindex:+t.zindex||void 0,aria:t.aria,description:t.description}}function Ixe(t,e){return t&&t.signal?e.signalRef(t.signal):t!==!1}function rC(t,e){const n=$G(t.type);n||de("Unrecognized transform type: "+Se(t.type));const i=GE(n.type.toLowerCase(),null,NY(n,t,e));return t.signal&&e.addSignal(t.signal,e.proxy(i)),i.metadata=n.metadata||{},i}function NY(t,e,n){const i={},s=t.params.length;for(let o=0;o<s;++o){const c=t.params[o];i[c.name]=Fxe(c,e,n)}return i}function Fxe(t,e,n){const i=t.type,s=e[t.name];if(i==="index")return Oxe(t,e,n);if(s===void 0){t.required&&de("Missing required "+Se(e.type)+" parameter: "+Se(t.name));return}else{if(i==="param")return Mxe(t,e,n);if(i==="projection")return n.projectionRef(e[t.name])}return t.array&&!ei(s)?s.map(o=>B6(t,o,n)):B6(t,s,n)}function B6(t,e,n){const i=t.type;if(ei(e))return I6(i)?de("Expression references can not be signals."):cB(i)?n.fieldRef(e):F6(i)?n.compareRef(e):n.signalRef(e.signal);{const s=t.expr||cB(i);return s&&Axe(e)?n.exprRef(e.expr,e.as):s&&Nxe(e)?Sy(e.field,e.as):I6(i)?Uo(e,n):Cxe(i)?Pe(n.getData(e).values):cB(i)?Sy(e):F6(i)?n.compareRef(e):e}}function Oxe(t,e,n){return ke(e.from)||de('Lookup "from" parameter must be a string literal.'),n.getData(e.from).lookupRef(n,e.key)}function Mxe(t,e,n){const i=e[t.name];return t.array?(he(i)||de("Expected an array of sub-parameters. Instead: "+Se(i)),i.map(s=>k6(t,s,n))):k6(t,i,n)}function k6(t,e,n){const i=t.params.length;let s;for(let c=0;c<i;++c){s=t.params[c];for(const d in s.key)if(s.key[d]!==e[d]){s=null;break}if(s)break}s||de("Unsupported parameter: "+Se(e));const o=mt(NY(s,e,n),s.key);return Pe(n.add(ISe(o)))}const Axe=t=>t&&t.expr,Nxe=t=>t&&t.field,Cxe=t=>t==="data",I6=t=>t==="expr",cB=t=>t==="field",F6=t=>t==="compare";function Rxe(t,e,n){let i,s,o,c,d;return t?(i=t.facet)&&(e||de("Only group marks can be faceted."),i.field!=null?c=d=U0(i,n):(t.data?d=Pe(n.getData(t.data).aggregate):(o=rC(mt({type:"aggregate",groupby:Ie(i.groupby)},i.aggregate),n),o.params.key=n.keyRef(i.groupby),o.params.pulse=U0(i,n),c=d=Pe(n.add(o))),s=n.keyRef(i.groupby,!0))):c=Pe(n.add(ja(null,[{}]))),c||(c=U0(t,n)),{key:s,pulse:c,parent:d}}function U0(t,e){return t.$ref?t:t.data&&t.data.$ref?t.data:Pe(e.getData(t.data).output)}function ru(t,e,n,i,s){this.scope=t,this.input=e,this.output=n,this.values=i,this.aggregate=s,this.index={}}ru.fromEntries=function(t,e){const n=e.length,i=e[n-1],s=e[n-2];let o=e[0],c=null,d=1;for(o&&o.type==="load"&&(o=e[1]),t.add(e[0]);d<n;++d)e[d].params.pulse=Pe(e[d-1]),t.add(e[d]),e[d].type==="aggregate"&&(c=e[d]);return new ru(t,o,s,i,c)};function CY(t){return ke(t)?t:null}function O6(t,e,n){const i=VE(n.op,n.field);let s;if(e.ops){for(let o=0,c=e.as.length;o<c;++o)if(e.as[o]===i)return}else e.ops=["count"],e.fields=[null],e.as=["count"];n.op&&(e.ops.push((s=n.op.signal)?t.signalRef(s):n.op),e.fields.push(t.fieldRef(n.field)),e.as.push(i))}function $g(t,e,n,i,s,o,c){const d=e[n]||(e[n]={}),f=sSe(o);let u=CY(s),a,_;if(u!=null&&(t=e.scope,u=u+(f?"|"+f:""),a=d[u]),!a){const w=o?{field:DI,pulse:e.countsRef(t,s,o)}:{field:t.fieldRef(s),pulse:Pe(e.output)};f&&(w.sort=t.sortRef(o)),_=t.add(GE(i,void 0,w)),c&&(e.index[s]=_),a=Pe(_),u!=null&&(d[u]=a)}return a}ru.prototype={countsRef(t,e,n){const i=this,s=i.counts||(i.counts={}),o=CY(e);let c,d,f;return o!=null&&(t=i.scope,c=s[o]),c?n&&n.field&&O6(t,c.agg.params,n):(f={groupby:t.fieldRef(e,"key"),pulse:Pe(i.output)},n&&n.field&&O6(t,f,n),d=t.add(mY(f)),c=t.add(ja({pulse:Pe(d)})),c={agg:d,ref:Pe(c)},o!=null&&(s[o]=c)),c.ref},tuplesRef(){return Pe(this.values)},extentRef(t,e){return $g(t,this,"extent","extent",e,!1)},domainRef(t,e){return $g(t,this,"domain","values",e,!1)},valuesRef(t,e,n){return $g(t,this,"vals","values",e,n||!0)},lookupRef(t,e){return $g(t,this,"lookup","tupleindex",e,!1)},indataRef(t,e){return $g(t,this,"indata","tupleindex",e,!0,!0)}};function Lxe(t,e,n){const i=t.from.facet,s=i.name,o=U0(i,e);let c;i.name||de("Facet must have a name: "+Se(i)),i.data||de("Facet must reference a data set: "+Se(i)),i.field?c=e.add(TY({field:e.fieldRef(i.field),pulse:o})):i.groupby?c=e.add(wSe({key:e.keyRef(i.groupby),group:Pe(e.proxy(n.parent)),pulse:o})):de("Facet must specify groupby or field: "+Se(i));const d=e.fork(),f=d.add(ja()),u=d.add(Ru({pulse:Pe(f)}));d.addData(s,new ru(d,f,f,u)),d.addSignal("parent",null),c.params.subflow={$subflow:d.parse(t).toRuntime()}}function Pxe(t,e,n){const i=e.add(TY({pulse:n.pulse})),s=e.fork();s.add(Ru()),s.addSignal("parent",null),i.params.subflow={$subflow:s.parse(t).toRuntime()}}function RY(t,e,n){const i=t.remove,s=t.insert,o=t.toggle,c=t.modify,d=t.values,f=e.add(e1()),u="if("+t.trigger+',modify("'+n+'",'+[s,i,o,c,d].map(_=>_==null?"null":_).join(",")+"),0)",a=Uo(u,e);f.update=a.$expr,f.params=a.$params}function KE(t,e){const n=AY(t),i=t.type===WE,s=t.from&&t.from.facet,o=t.overlap;let c=t.layout||n===XN||n===YN,d,f,u,a,_,w,m;const l=n===WN||c||s,T=Rxe(t.from,i,e);f=e.add(ySe({key:T.key||(t.key?Sy(t.key):void 0),pulse:T.pulse,clean:!i}));const b=Pe(f);f=u=e.add(ja({pulse:b})),f=e.add(SSe({markdef:kxe(t),interactive:Ixe(t.interactive,e),clip:Bxe(t.clip,e),context:{$context:!0},groups:e.lookup(),parent:e.signals.parent?e.signalRef("parent"):null,index:e.markpath(),pulse:Pe(f)}));const S=Pe(f);f=a=e.add(bY(_Y(t.encode,t.type,n,t.style,e,{mod:!1,pulse:S}))),f.params.parent=e.encode(),t.transform&&t.transform.forEach(A=>{const M=rC(A,e),R=M.metadata;(R.generates||R.changes)&&de("Mark transforms should not generate new data."),R.nomod||(a.params.mod=!0),M.params.pulse=Pe(f),e.add(f=M)}),t.sort&&(f=e.add(NSe({sort:e.compareRef(t.sort),pulse:Pe(f)})));const x=Pe(f);(s||c)&&(c=e.add(EY({layout:e.objectProperty(t.layout),legends:e.legends,mark:S,pulse:x})),w=Pe(c));const B=e.add(wY({mark:S,pulse:w||x}));m=Pe(B),i&&(l&&(d=e.operators,d.pop(),c&&d.pop()),e.pushState(x,w||m,b),s?Lxe(t,e,T):l?Pxe(t,e,T):e.parse(t),e.popState(),l&&(c&&d.push(c),d.push(B))),o&&(m=Dxe(o,m,e));const F=e.add(vY({pulse:m})),k=e.add(Ru({pulse:Pe(F)},void 0,e.parent()));t.name!=null&&(_=t.name,e.addData(_,new ru(e,u,F,k)),t.on&&t.on.forEach(A=>{(A.insert||A.remove||A.toggle)&&de("Marks only support modify triggers."),RY(A,e,_)}))}function Dxe(t,e,n){const i=t.method,s=t.bound,o=t.separation,c={separation:ei(o)?n.signalRef(o.signal):o,method:ei(i)?n.signalRef(i.signal):i,pulse:e};if(t.order&&(c.sort=n.compareRef({field:t.order})),s){const d=s.tolerance;c.boundTolerance=ei(d)?n.signalRef(d.signal):+d,c.boundScale=n.scaleRef(s.scale),c.boundOrient=s.orient}return Pe(n.add(kSe(c)))}function jxe(t,e){const n=e.config.legend,i=t.encode||{},s=Xs(t,n),o=i.legend||{},c=o.name||void 0,d=o.interactive,f=o.style,u={};let a=0,_,w,m;eC.forEach(B=>t[B]?(u[B]=t[B],a=a||t[B]):0),a||de("Missing valid scale for legend.");const l=Uxe(t,e.scaleType(a)),T={title:t.title!=null,scales:u,type:l,vgrad:l!=="symbol"&&s.isVertical()},b=Pe(e.add(ja(null,[T]))),S={enter:{x:{value:0},y:{value:0}}},x=Pe(e.add(vSe(w={type:l,scale:e.scaleRef(a),count:e.objectProperty(s("tickCount")),limit:e.property(s("symbolLimit")),values:e.objectProperty(t.values),minstep:e.property(t.tickMinStep),formatType:e.property(t.formatType),formatSpecifier:e.property(t.format)})));return l===j0?(m=[uxe(t,a,n,i.gradient),S6(t,n,i.labels,x)],w.count=w.count||e.signalRef(`max(2,2*floor((${Df(s.gradientLength())})/100))`)):l===$I?m=[hxe(t,a,n,i.gradient,x),S6(t,n,i.labels,x)]:(_=yxe(t,n),m=[_xe(t,n,i,x,Df(_.columns))],w.size=qxe(t,e,m[0].marks)),m=[By({role:DEe,from:b,encode:S,marks:m,layout:_,interactive:d})],T.title&&m.push(xxe(t,n,i.title,b)),KE(By({role:LEe,from:b,encode:dg($xe(s,t,n),o,Nm),marks:m,aria:s("aria"),description:s("description"),zindex:s("zindex"),name:c,interactive:d,style:f}),e)}function Uxe(t,e){let n=t.type||E6;return!t.type&&zxe(t)===1&&(t.fill||t.stroke)&&(n=hA(e)?j0:iI(e)?$I:E6),n!==j0?n:iI(e)?$I:j0}function zxe(t){return eC.reduce((e,n)=>e+(t[n]?1:0),0)}function $xe(t,e,n){const i={enter:{},update:{}};return Si(i,{orient:t("orient"),offset:t("offset"),padding:t("padding"),titlePadding:t("titlePadding"),cornerRadius:t("cornerRadius"),fill:t("fillColor"),stroke:t("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:t("legendX"),y:t("legendY"),format:e.format,formatType:e.formatType}),i}function qxe(t,e,n){const i=Df(M6("size",t,n)),s=Df(M6("strokeWidth",t,n)),o=Df(Gxe(n[1].encode,e,Am));return Uo(`max(ceil(sqrt(${i})+${s}),${o})`,e)}function M6(t,e,n){return e[t]?`scale("${e[t]}",datum)`:OY(t,n[0].encode)}function Gxe(t,e,n){return OY("fontSize",t)||dxe("fontSize",e,n)}const Vxe=`item.orient==="${fg}"?-90:item.orient==="${ug}"?90:0`;function Hxe(t,e){t=ke(t)?{text:t}:t;const n=Xs(t,e.config.title),i=t.encode||{},s=i.group||{},o=s.name||void 0,c=s.interactive,d=s.style,f=[],u={},a=Pe(e.add(ja(null,[u])));return f.push(Xxe(t,n,Wxe(t),a)),t.subtitle&&f.push(Kxe(t,n,i.subtitle,a)),KE(By({role:$Ee,from:a,encode:Yxe(n,s),marks:f,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:o,interactive:c,style:d}),e)}function Wxe(t){const e=t.encode;return e&&e.title||mt({name:t.name,interactive:t.interactive,style:t.style},e)}function Yxe(t,e){const n={enter:{},update:{}};return Si(n,{orient:t("orient"),anchor:t("anchor"),align:{signal:nC},angle:{signal:Vxe},limit:t("limit"),frame:t("frame"),offset:t("offset")||0,padding:t("subtitlePadding")}),dg(n,e,Nm)}function Xxe(t,e,n,i){const s={value:0},o=t.text,c={enter:{opacity:s},update:{opacity:{value:1}},exit:{opacity:s}};return Si(c,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:e("dx"),dy:e("dy"),fill:e("color"),font:e("font"),fontSize:e("fontSize"),fontStyle:e("fontStyle"),fontWeight:e("fontWeight"),lineHeight:e("lineHeight")},{align:e("align"),angle:e("angle"),baseline:e("baseline")}),hr({type:Lu,role:qEe,style:txe,from:i,encode:c},n)}function Kxe(t,e,n,i){const s={value:0},o=t.subtitle,c={enter:{opacity:s},update:{opacity:{value:1}},exit:{opacity:s}};return Si(c,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:e("dx"),dy:e("dy"),fill:e("subtitleColor"),font:e("subtitleFont"),fontSize:e("subtitleFontSize"),fontStyle:e("subtitleFontStyle"),fontWeight:e("subtitleFontWeight"),lineHeight:e("subtitleLineHeight")},{align:e("align"),angle:e("angle"),baseline:e("baseline")}),hr({type:Lu,role:GEe,style:nxe,from:i,encode:c},n)}function Jxe(t,e){const n=[];t.transform&&t.transform.forEach(i=>{n.push(rC(i,e))}),t.on&&t.on.forEach(i=>{RY(i,e,t.name)}),e.addDataPipeline(t.name,Qxe(t,e,n))}function Qxe(t,e,n){const i=[];let s=null,o=!1,c=!1,d,f,u,a,_;for(t.values?ei(t.values)||P0(t.format)?(i.push(A6(e,t)),i.push(s=Hd())):i.push(s=Hd({$ingest:t.values,$format:t.format})):t.url?P0(t.url)||P0(t.format)?(i.push(A6(e,t)),i.push(s=Hd())):i.push(s=Hd({$request:t.url,$format:t.format})):t.source&&(s=d=Ie(t.source).map(w=>Pe(e.getData(w).output)),i.push(null)),f=0,u=n.length;f<u;++f)a=n[f],_=a.metadata,!s&&!_.source&&i.push(s=Hd()),i.push(a),_.generates&&(c=!0),_.modifies&&!c&&(o=!0),_.source?s=a:_.changes&&(s=null);return d&&(u=d.length-1,i[0]=MSe({derive:o,pulse:u?d:d[0]}),(o||u)&&i.splice(1,0,Hd())),s||i.push(Hd()),i.push(Ru({})),i}function Hd(t){const e=ja({},t);return e.metadata={source:!0},e}function A6(t,e){return ESe({url:e.url?t.property(e.url):void 0,async:e.async?t.property(e.async):void 0,values:e.values?t.property(e.values):void 0,format:t.objectProperty(e.format)})}const LY=t=>t===fd||t===Ua,JE=(t,e,n)=>ei(t)?nBe(t.signal,e,n):t===fg||t===Ua?e:n,hi=(t,e,n)=>ei(t)?eBe(t.signal,e,n):LY(t)?e:n,Sa=(t,e,n)=>ei(t)?tBe(t.signal,e,n):LY(t)?n:e,PY=(t,e,n)=>ei(t)?iBe(t.signal,e,n):t===Ua?{value:e}:{value:n},Zxe=(t,e,n)=>ei(t)?sBe(t.signal,e,n):t===ug?{value:e}:{value:n},eBe=(t,e,n)=>DY(`${t} === '${Ua}' || ${t} === '${fd}'`,e,n),tBe=(t,e,n)=>DY(`${t} !== '${Ua}' && ${t} !== '${fd}'`,e,n),nBe=(t,e,n)=>aC(`${t} === '${fg}' || ${t} === '${Ua}'`,e,n),iBe=(t,e,n)=>aC(`${t} === '${Ua}'`,e,n),sBe=(t,e,n)=>aC(`${t} === '${ug}'`,e,n),DY=(t,e,n)=>(e=e!=null?ui(e):e,n=n!=null?ui(n):n,N6(e)&&N6(n)?(e=e?e.signal||Se(e.value):null,n=n?n.signal||Se(n.value):null,{signal:`${t} ? (${e}) : (${n})`}):[mt({test:t},e)].concat(n||[])),N6=t=>t==null||Object.keys(t).length===1,aC=(t,e,n)=>({signal:`${t} ? (${Sh(e)}) : (${Sh(n)})`}),rBe=(t,e,n,i,s)=>({signal:(i!=null?`${t} === '${fg}' ? (${Sh(i)}) : `:"")+(n!=null?`${t} === '${fd}' ? (${Sh(n)}) : `:"")+(s!=null?`${t} === '${ug}' ? (${Sh(s)}) : `:"")+(e!=null?`${t} === '${Ua}' ? (${Sh(e)}) : `:"")+"(null)"}),Sh=t=>ei(t)?t.signal:t==null?null:Se(t),aBe=(t,e)=>e===0?0:ei(t)?{signal:`(${t.signal}) * ${e}`}:{value:t*e},zh=(t,e)=>{const n=t.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+e.signal}:t};function eh(t,e,n,i){let s;if(e&&Le(e,t))return e[t];if(Le(n,t))return n[t];if(t.startsWith("title")){switch(t){case"titleColor":s="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":s=t[5].toLowerCase()+t.slice(6)}return i[ZN][s]}else if(t.startsWith("label")){switch(t){case"labelColor":s="fill";break;case"labelFont":case"labelFontSize":s=t[5].toLowerCase()+t.slice(6)}return i[Am][s]}return null}function C6(t){const e={};for(const n of t)if(!!n)for(const i in n)e[i]=1;return Object.keys(e)}function oBe(t,e){var n=e.config,i=n.style,s=n.axis,o=e.scaleType(t.scale)==="band"&&n.axisBand,c=t.orient,d,f,u;if(ei(c)){const _=C6([n.axisX,n.axisY]),w=C6([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);d={};for(u of _)d[u]=hi(c,eh(u,n.axisX,s,i),eh(u,n.axisY,s,i));f={};for(u of w)f[u]=rBe(c.signal,eh(u,n.axisTop,s,i),eh(u,n.axisBottom,s,i),eh(u,n.axisLeft,s,i),eh(u,n.axisRight,s,i))}else d=c===Ua||c===fd?n.axisX:n.axisY,f=n["axis"+c[0].toUpperCase()+c.slice(1)];return d||f||o?mt({},s,d,f,o):s}function lBe(t,e,n,i){const s=Xs(t,e),o=t.orient;let c,d;const f={enter:c={opacity:Pt},update:d={opacity:Cr},exit:{opacity:Pt}};Si(f,{stroke:s("domainColor"),strokeCap:s("domainCap"),strokeDash:s("domainDash"),strokeDashOffset:s("domainDashOffset"),strokeWidth:s("domainWidth"),strokeOpacity:s("domainOpacity")});const u=R6(t,0),a=R6(t,1);return c.x=d.x=hi(o,u,Pt),c.x2=d.x2=hi(o,a),c.y=d.y=Sa(o,u,Pt),c.y2=d.y2=Sa(o,a),hr({type:tC,role:MEe,from:i,encode:f},n)}function R6(t,e){return{scale:t.scale,range:e}}function cBe(t,e,n,i,s){const o=Xs(t,e),c=t.orient,d=t.gridScale,f=JE(c,1,-1),u=dBe(t.offset,f);let a,_,w;const m={enter:a={opacity:Pt},update:w={opacity:Cr},exit:_={opacity:Pt}};Si(m,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});const l={scale:t.scale,field:Nr,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")},T=hi(c,{signal:"height"},{signal:"width"}),b=d?{scale:d,range:0,mult:f,offset:u}:{value:0,offset:u},S=d?{scale:d,range:1,mult:f,offset:u}:mt(T,{mult:f,offset:u});return a.x=w.x=hi(c,l,b),a.y=w.y=Sa(c,l,b),a.x2=w.x2=Sa(c,S),a.y2=w.y2=hi(c,S),_.x=hi(c,l),_.y=Sa(c,l),hr({type:tC,role:AEe,key:Nr,from:i,encode:m},n)}function dBe(t,e){if(e!==1)if(!Fe(t))t=ei(e)?{signal:`(${e.signal}) * (${t||0})`}:e*(t||0);else{let n=t=mt({},t);for(;n.mult!=null;)if(Fe(n.mult))n=n.mult=mt({},n.mult);else return n.mult=ei(e)?{signal:`(${n.mult}) * (${e.signal})`}:n.mult*e,t;n.mult=e}return t}function fBe(t,e,n,i,s,o){const c=Xs(t,e),d=t.orient,f=JE(d,-1,1);let u,a,_;const w={enter:u={opacity:Pt},update:_={opacity:Cr},exit:a={opacity:Pt}};Si(w,{stroke:c("tickColor"),strokeCap:c("tickCap"),strokeDash:c("tickDash"),strokeDashOffset:c("tickDashOffset"),strokeOpacity:c("tickOpacity"),strokeWidth:c("tickWidth")});const m=ui(s);m.mult=f;const l={scale:t.scale,field:Nr,band:o.band,extra:o.extra,offset:o.offset,round:c("tickRound")};return _.y=u.y=hi(d,Pt,l),_.y2=u.y2=hi(d,m),a.x=hi(d,l),_.x=u.x=Sa(d,Pt,l),_.x2=u.x2=Sa(d,m),a.y=Sa(d,l),hr({type:tC,role:CEe,key:Nr,from:i,encode:w},n)}function dB(t,e,n,i,s){return{signal:'flush(range("'+t+'"), scale("'+t+'", datum.value), '+e+","+n+","+i+","+s+")"}}function uBe(t,e,n,i,s,o){const c=Xs(t,e),d=t.orient,f=t.scale,u=JE(d,-1,1),a=Df(c("labelFlush")),_=Df(c("labelFlushOffset")),w=c("labelAlign"),m=c("labelBaseline");let l=a===0||!!a,T;const b=ui(s);b.mult=u,b.offset=ui(c("labelPadding")||0),b.offset.mult=u;const S={scale:f,field:Nr,band:.5,offset:MY(o.offset,c("labelOffset"))},x=hi(d,l?dB(f,a,'"left"','"right"','"center"'):{value:"center"},Zxe(d,"left","right")),B=hi(d,PY(d,"bottom","top"),l?dB(f,a,'"top"','"bottom"','"middle"'):{value:"middle"}),F=dB(f,a,`-(${_})`,_,0);l=l&&_;const k={opacity:Pt,x:hi(d,S,b),y:Sa(d,S,b)},A={enter:k,update:T={opacity:Cr,text:{field:QN},x:k.x,y:k.y,align:x,baseline:B},exit:{opacity:Pt,x:k.x,y:k.y}};Si(A,{dx:!w&&l?hi(d,F):null,dy:!m&&l?Sa(d,F):null}),Si(A,{angle:c("labelAngle"),fill:c("labelColor"),fillOpacity:c("labelOpacity"),font:c("labelFont"),fontSize:c("labelFontSize"),fontWeight:c("labelFontWeight"),fontStyle:c("labelFontStyle"),limit:c("labelLimit"),lineHeight:c("labelLineHeight")},{align:w,baseline:m});const M=c("labelBound");let R=c("labelOverlap");return R=R||M?{separation:c("labelSeparation"),method:R,order:"datum.index",bound:M?{scale:f,orient:d,tolerance:M}:null}:void 0,T.align!==x&&(T.align=zh(T.align,x)),T.baseline!==B&&(T.baseline=zh(T.baseline,B)),hr({type:Lu,role:NEe,style:Am,key:Nr,from:i,encode:A,overlap:R},n)}function hBe(t,e,n,i){const s=Xs(t,e),o=t.orient,c=JE(o,-1,1);let d,f;const u={enter:d={opacity:Pt,anchor:ui(s("titleAnchor",null)),align:{signal:nC}},update:f=mt({},d,{opacity:Cr,text:ui(t.title)}),exit:{opacity:Pt}},a={signal:`lerp(range("${t.scale}"), ${YE(0,1,.5)})`};return f.x=hi(o,a),f.y=Sa(o,a),d.angle=hi(o,Pt,aBe(c,90)),d.baseline=hi(o,PY(o,fd,Ua),{value:fd}),f.angle=d.angle,f.baseline=d.baseline,Si(u,{fill:s("titleColor"),fillOpacity:s("titleOpacity"),font:s("titleFont"),fontSize:s("titleFontSize"),fontStyle:s("titleFontStyle"),fontWeight:s("titleFontWeight"),limit:s("titleLimit"),lineHeight:s("titleLineHeight")},{align:s("titleAlign"),angle:s("titleAngle"),baseline:s("titleBaseline")}),pBe(s,o,u,n),u.update.align=zh(u.update.align,d.align),u.update.angle=zh(u.update.angle,d.angle),u.update.baseline=zh(u.update.baseline,d.baseline),hr({type:Lu,role:REe,style:ZN,from:i,encode:u},n)}function pBe(t,e,n,i){const s=(d,f)=>d!=null?(n.update[f]=zh(ui(d),n.update[f]),!1):!fh(f,i),o=s(t("titleX"),"x"),c=s(t("titleY"),"y");n.enter.auto=c===o?ui(c):hi(e,ui(c),ui(o))}function gBe(t,e){const n=oBe(t,e),i=t.encode||{},s=i.axis||{},o=s.name||void 0,c=s.interactive,d=s.style,f=Xs(t,n),u=fxe(f),a={scale:t.scale,ticks:!!f("ticks"),labels:!!f("labels"),grid:!!f("grid"),domain:!!f("domain"),title:t.title!=null},_=Pe(e.add(ja({},[a]))),w=Pe(e.add(_Se({scale:e.scaleRef(t.scale),extra:e.property(u.extra),count:e.objectProperty(t.tickCount),values:e.objectProperty(t.values),minstep:e.property(t.tickMinStep),formatType:e.property(t.formatType),formatSpecifier:e.property(t.format)}))),m=[];let l;return a.grid&&m.push(cBe(t,n,i.grid,w,u)),a.ticks&&(l=f("tickSize"),m.push(fBe(t,n,i.ticks,w,l,u))),a.labels&&(l=a.ticks?l:0,m.push(uBe(t,n,i.labels,w,l,u))),a.domain&&m.push(lBe(t,n,i.domain,_)),a.title&&m.push(hBe(t,n,i.title,_)),KE(By({role:OEe,from:_,encode:dg(_Be(f,t),s,Nm),marks:m,aria:f("aria"),description:f("description"),zindex:f("zindex"),name:o,interactive:c,style:d}),e)}function _Be(t,e){const n={enter:{},update:{}};return Si(n,{orient:t("orient"),offset:t("offset")||0,position:oa(e.position,0),titlePadding:t("titlePadding"),minExtent:t("minExtent"),maxExtent:t("maxExtent"),range:{signal:`abs(span(range("${e.scale}")))`},translate:t("translate"),format:e.format,formatType:e.formatType}),n}function jY(t,e,n){const i=Ie(t.signals),s=Ie(t.scales);return n||i.forEach(o=>yY(o,e)),Ie(t.projections).forEach(o=>YSe(o,e)),s.forEach(o=>LSe(o,e)),Ie(t.data).forEach(o=>Jxe(o,e)),s.forEach(o=>PSe(o,e)),(n||i).forEach(o=>gSe(o,e)),Ie(t.axes).forEach(o=>gBe(o,e)),Ie(t.marks).forEach(o=>KE(o,e)),Ie(t.legends).forEach(o=>jxe(o,e)),t.title&&Hxe(t.title,e),e.parseLambdas(),e}const yBe=t=>dg({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},t);function mBe(t,e){const n=e.config,i=Pe(e.root=e.add(e1())),s=wBe(t,n);s.forEach(u=>yY(u,e)),e.description=t.description||n.description,e.eventConfig=n.events,e.legends=e.objectProperty(n.legend&&n.legend.layout),e.locale=n.locale;const o=e.add(ja()),c=e.add(bY(_Y(yBe(t.encode),WE,YN,t.style,e,{pulse:Pe(o)}))),d=e.add(EY({layout:e.objectProperty(t.layout),legends:e.legends,autosize:e.signalRef("autosize"),mark:i,pulse:Pe(c)}));e.operators.pop(),e.pushState(Pe(c),Pe(d),null),jY(t,e,s),e.operators.push(d);let f=e.add(wY({mark:i,pulse:Pe(d)}));return f=e.add(vY({pulse:Pe(f)})),f=e.add(Ru({pulse:Pe(f)})),e.addData("root",new ru(e,o,o,f)),e}function qg(t,e){return e&&e.signal?{name:t,update:e.signal}:{name:t,value:e}}function wBe(t,e){const n=c=>oa(t[c],e[c]),i=[qg("background",n("background")),qg("autosize",kEe(n("autosize"))),qg("padding",FEe(n("padding"))),qg("width",n("width")||0),qg("height",n("height")||0)],s=i.reduce((c,d)=>(c[d.name]=d,c),{}),o={};return Ie(t.signals).forEach(c=>{Le(s,c.name)?c=mt(s[c.name],c):i.push(c),o[c.name]=c}),Ie(e.signals).forEach(c=>{!Le(o,c.name)&&!Le(s,c.name)&&i.push(c)}),i}function UY(t,e){this.config=t||{},this.options=e||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function L6(t){this.config=t.config,this.options=t.options,this.legends=t.legends,this.field=Object.create(t.field),this.signals=Object.create(t.signals),this.lambdas=Object.create(t.lambdas),this.scales=Object.create(t.scales),this.events=Object.create(t.events),this.data=Object.create(t.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++t._nextsub[0],this._nextsub=t._nextsub,this._parent=t._parent.slice(),this._encode=t._encode.slice(),this._lookup=t._lookup.slice(),this._markpath=t._markpath}UY.prototype=L6.prototype={parse(t){return jY(t,this)},fork(){return new L6(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(t){return this.operators.push(t),t.id=this.id(),t.refs&&(t.refs.forEach(e=>{e.$ref=t.id}),t.refs=null),t},proxy(t){const e=t instanceof PI?Pe(t):t;return this.add(OSe({value:e}))},addStream(t){return this.streams.push(t),t.id=this.id(),t},addUpdate(t){return this.updates.push(t),t},finish(){let t,e;this.root&&(this.root.root=!0);for(t in this.signals)this.signals[t].signal=t;for(t in this.scales)this.scales[t].scale=t;function n(i,s,o){let c,d;i&&(c=i.data||(i.data={}),d=c[s]||(c[s]=[]),d.push(o))}for(t in this.data){e=this.data[t],n(e.input,t,"input"),n(e.output,t,"output"),n(e.values,t,"values");for(const i in e.index)n(e.index[i],t,"index:"+i)}return this},pushState(t,e,n){this._encode.push(Pe(this.add(Ru({pulse:t})))),this._parent.push(e),this._lookup.push(n?Pe(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Rt(this._parent)},encode(){return Rt(this._encode)},lookup(){return Rt(this._lookup)},markpath(){const t=this._markpath;return++t[t.length-1]},fieldRef(t,e){if(ke(t))return Sy(t,e);t.signal||de("Unsupported field reference: "+Se(t));const n=t.signal;let i=this.field[n];if(!i){const s={name:this.signalRef(n)};e&&(s.as=e),this.field[n]=i=Pe(this.add(bSe(s)))}return i},compareRef(t){let e=!1;const n=o=>ei(o)?(e=!0,this.signalRef(o.signal)):rSe(o)?(e=!0,this.exprRef(o.expr)):o,i=Ie(t.field).map(n),s=Ie(t.order).map(n);return e?Pe(this.add(v6({fields:i,orders:s}))):b6(i,s)},keyRef(t,e){let n=!1;const i=o=>ei(o)?(n=!0,Pe(s[o.signal])):o,s=this.signals;return t=Ie(t).map(i),n?Pe(this.add(TSe({fields:t,flat:e}))):tSe(t,e)},sortRef(t){if(!t)return t;const e=VE(t.op,t.field),n=t.order||nSe;return n.signal?Pe(this.add(v6({fields:e,orders:this.signalRef(n.signal)}))):b6(e,n)},event(t,e){const n=t+":"+e;if(!this.events[n]){const i=this.id();this.streams.push({id:i,source:t,type:e}),this.events[n]=i}return this.events[n]},hasOwnSignal(t){return Le(this.signals,t)},addSignal(t,e){this.hasOwnSignal(t)&&de("Duplicate signal name: "+Se(t));const n=e instanceof PI?e:this.add(e1(e));return this.signals[t]=n},getSignal(t){return this.signals[t]||de("Unrecognized signal name: "+Se(t)),this.signals[t]},signalRef(t){return this.signals[t]?Pe(this.signals[t]):(Le(this.lambdas,t)||(this.lambdas[t]=this.add(e1(null))),Pe(this.lambdas[t]))},parseLambdas(){const t=Object.keys(this.lambdas);for(let e=0,n=t.length;e<n;++e){const i=t[e],s=Uo(i,this),o=this.lambdas[i];o.params=s.$params,o.update=s.$expr}},property(t){return t&&t.signal?this.signalRef(t.signal):t},objectProperty(t){return!t||!Fe(t)?t:this.signalRef(t.signal||oC(t))},exprRef(t,e){const n={expr:Uo(t,this)};return e&&(n.expr.$name=e),Pe(this.add(mSe(n)))},addBinding(t,e){this.bindings||de("Nested signals do not support binding: "+Se(t)),this.bindings.push(mt({signal:t},e))},addScaleProj(t,e){Le(this.scales,t)&&de("Duplicate scale or projection name: "+Se(t)),this.scales[t]=this.add(e)},addScale(t,e){this.addScaleProj(t,ASe(e))},addProjection(t,e){this.addScaleProj(t,FSe(e))},getScale(t){return this.scales[t]||de("Unrecognized scale name: "+Se(t)),this.scales[t]},scaleRef(t){return Pe(this.getScale(t))},scaleType(t){return this.getScale(t).params.type},projectionRef(t){return this.scaleRef(t)},projectionType(t){return this.scaleType(t)},addData(t,e){return Le(this.data,t)&&de("Duplicate data set name: "+Se(t)),this.data[t]=e},getData(t){return this.data[t]||de("Undefined data set name: "+Se(t)),this.data[t]},addDataPipeline(t,e){return Le(this.data,t)&&de("Duplicate data set name: "+Se(t)),this.addData(t,ru.fromEntries(this,e))}};function oC(t){return(he(t)?bBe:TBe)(t)}function bBe(t){const e=t.length;let n="[";for(let i=0;i<e;++i){const s=t[i];n+=(i>0?",":"")+(Fe(s)?s.signal||oC(s):Se(s))}return n+"]"}function TBe(t){let e="{",n=0,i,s;for(i in t)s=t[i],e+=(++n>1?",":"")+Se(i)+":"+(Fe(s)?s.signal||oC(s):Se(s));return e+"}"}function vBe(){const t="sans-serif",i="#4c78a8",s="#000",o="#888",c="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:i},area:{fill:i},image:null,line:{stroke:i,strokeWidth:2},path:{stroke:i},rect:{fill:i},rule:{stroke:s},shape:{stroke:i},symbol:{fill:i,size:64},text:{fill:s,font:t,fontSize:11},trail:{fill:i,size:2},style:{"guide-label":{fill:s,font:t,fontSize:10},"guide-title":{fill:s,font:t,fontSize:11,fontWeight:"bold"},"group-title":{fill:s,font:t,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:s,font:t,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:c}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:o,grid:!1,gridWidth:1,gridColor:c,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:o,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:c,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:o,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function EBe(t,e,n){return Fe(t)||de("Input Vega specification must be an object."),e=ig(vBe(),e,t.config),mBe(t,new UY(e,n)).toRuntime()}var SBe="5.22.1";mt(vp,vge,dwe,$we,wbe,Bbe,Zbe,Abe,t0e,s0e,p0e,T0e);const xBe=Object.freeze(Object.defineProperty({__proto__:null,version:SBe,Dataflow:Uh,EventStream:mE,MultiPulse:RM,Operator:hn,Parameters:yE,Pulse:jc,Transform:oe,changeset:Au,definition:$G,ingest:Yt,isTuple:gE,transform:qG,transforms:vp,tupleid:De,interpolate:pA,interpolateColors:EE,interpolateRange:SV,quantizeInterpolator:xV,scale:Vt,scheme:gA,projection:rN,View:sY,defaultLocale:OM,formatLocale:Mv,locale:FG,resetDefaultLocale:Lhe,timeFormatLocale:uy,expressionFunction:$n,parse:EBe,runtimeContext:VW,codegenExpression:AW,parseExpression:CN,parseSelector:Ad,Debug:L9,Error:gM,Info:R9,None:C9,Warn:_M,accessor:Ys,accessorFields:Ui,accessorName:Cn,array:Ie,ascending:fE,clampRange:W9,compare:TM,constant:Wi,debounce:vM,error:de,extend:mt,extent:Do,extentIndex:Y9,falsy:fc,fastmap:rg,field:Us,flush:X9,hasOwnProperty:Le,id:hm,identity:Hi,inherits:ve,inrange:Th,isArray:he,isBoolean:Od,isDate:Dc,isFunction:wt,isIterable:K9,isNumber:ln,isObject:Fe,isRegExp:J9,isString:ke,key:EM,lerp:Q9,logger:yM,lruCache:Z9,merge:eG,mergeConfig:ig,one:ng,pad:tG,panLinear:z9,panLog:$9,panPow:q9,panSymlog:G9,peek:Rt,quarter:V9,repeat:c_,span:pm,splitAccessPath:Xo,stringValue:Se,toBoolean:SM,toDate:xM,toNumber:Pi,toSet:Ma,toString:BM,truncate:nG,truthy:zr,utcquarter:H9,visitArray:mc,writeConfig:sg,zero:Ec,zoomLinear:mM,zoomLog:wM,zoomPow:Ov,zoomSymlog:bM,bandwidthNRD:FF,bin:OF,bootstrapCI:YU,cumulativeLogNormal:LF,cumulativeNormal:v1,cumulativeUniform:UF,densityLogNormal:RF,densityNormal:MF,densityUniform:jF,dotbin:XU,quantileLogNormal:PF,quantileNormal:E1,quantileUniform:zF,quantiles:kF,quartiles:IF,get random(){return Rr},randomInteger:AZ,randomKDE:NF,randomLCG:MZ,randomLogNormal:JU,randomMixture:QU,randomNormal:AF,randomUniform:ZU,regressionExp:t8,regressionLinear:$F,regressionLoess:s8,regressionLog:e8,regressionPoly:i8,regressionPow:n8,regressionQuad:qF,sampleCurve:x1,sampleLogNormal:CF,sampleNormal:T1,sampleUniform:DF,setRandom:FZ,DATE:$s,DAY:Li,DAYOFYEAR:jo,HOURS:dr,MILLISECONDS:Aa,MINUTES:fr,MONTH:zi,QUARTER:zs,SECONDS:$r,TIME_UNITS:kM,WEEK:Jn,YEAR:Ei,dayofyear:rG,timeBin:vG,timeFloor:uG,timeInterval:ag,timeOffset:gG,timeSequence:mG,timeUnitSpecifier:sG,timeUnits:IM,utcFloor:hG,utcInterval:og,utcOffset:_G,utcSequence:wG,utcdayofyear:lG,utcweek:cG,week:aG,format:v0,formats:NM,inferType:MG,inferTypes:AG,loader:hE,read:RG,responseType:CG,typeParsers:eI,path:Td,Bounds:Un,CanvasHandler:km,CanvasRenderer:$v,Gradient:DV,GroupItem:BE,Handler:cd,Item:xE,Marks:ur,RenderType:Fc,Renderer:Jo,ResourceLoader:vA,SVGHandler:UA,SVGRenderer:HA,SVGStringRenderer:WA,Scenegraph:DA,boundClip:AH,boundContext:Em,boundItem:dI,boundMark:iH,boundStroke:Kl,domChild:Bs,domClear:pa,domCreate:kc,domFind:jA,font:ME,fontFamily:Bm,fontSize:Ko,intersect:IH,intersectBoxLine:vh,intersectPath:EA,intersectPoint:SA,intersectRule:HV,lineHeight:od,markup:VA,multiLineOffset:RA,pathCurves:wA,pathEqual:NH,pathParse:Bp,pathRectangle:zV,pathRender:gy,pathSymbols:UV,pathTrail:$V,point:NE,renderModule:CE,resetSVGClipId:GV,resetSVGDefIds:Bme,sceneEqual:YA,sceneFromJSON:rH,scenePickVisit:Lv,sceneToJSON:sH,sceneVisit:Na,sceneZOrder:xA,serializeXML:bH,textMetrics:Ea},Symbol.toStringTag,{value:"Module"}));function BBe(t,e,n){let i;e.x2&&(e.x?(n&&t.x>t.x2&&(i=t.x,t.x=t.x2,t.x2=i),t.width=t.x2-t.x):t.x=t.x2-(t.width||0)),e.xc&&(t.x=t.xc-(t.width||0)/2),e.y2&&(e.y?(n&&t.y>t.y2&&(i=t.y,t.y=t.y2,t.y2=i),t.height=t.y2-t.y):t.y=t.y2-(t.height||0)),e.yc&&(t.y=t.yc-(t.height||0)/2)}var kBe={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},IBe={"*":(t,e)=>t*e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,">":(t,e)=>t>e,"<":(t,e)=>t<e,"<=":(t,e)=>t<=e,">=":(t,e)=>t>=e,"==":(t,e)=>t==e,"!=":(t,e)=>t!=e,"===":(t,e)=>t===e,"!==":(t,e)=>t!==e,"&":(t,e)=>t&e,"|":(t,e)=>t|e,"^":(t,e)=>t^e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e},FBe={"+":t=>+t,"-":t=>-t,"~":t=>~t,"!":t=>!t};const OBe=Array.prototype.slice,Wd=(t,e,n)=>{const i=n?n(e[0]):e[0];return i[t].apply(i,OBe.call(e,1))},MBe=(t,e,n,i,s,o,c)=>new Date(t,e||0,n!=null?n:1,i||0,s||0,o||0,c||0);var ABe={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(t,e,n)=>Math.max(e,Math.min(n,t)),now:Date.now,utc:Date.UTC,datetime:MBe,date:t=>new Date(t).getDate(),day:t=>new Date(t).getDay(),year:t=>new Date(t).getFullYear(),month:t=>new Date(t).getMonth(),hours:t=>new Date(t).getHours(),minutes:t=>new Date(t).getMinutes(),seconds:t=>new Date(t).getSeconds(),milliseconds:t=>new Date(t).getMilliseconds(),time:t=>new Date(t).getTime(),timezoneoffset:t=>new Date(t).getTimezoneOffset(),utcdate:t=>new Date(t).getUTCDate(),utcday:t=>new Date(t).getUTCDay(),utcyear:t=>new Date(t).getUTCFullYear(),utcmonth:t=>new Date(t).getUTCMonth(),utchours:t=>new Date(t).getUTCHours(),utcminutes:t=>new Date(t).getUTCMinutes(),utcseconds:t=>new Date(t).getUTCSeconds(),utcmilliseconds:t=>new Date(t).getUTCMilliseconds(),length:t=>t.length,join:function(){return Wd("join",arguments)},indexof:function(){return Wd("indexOf",arguments)},lastindexof:function(){return Wd("lastIndexOf",arguments)},slice:function(){return Wd("slice",arguments)},reverse:t=>t.slice().reverse(),parseFloat,parseInt,upper:t=>String(t).toUpperCase(),lower:t=>String(t).toLowerCase(),substring:function(){return Wd("substring",arguments,String)},split:function(){return Wd("split",arguments,String)},replace:function(){return Wd("replace",arguments,String)},trim:t=>String(t).trim(),regexp:RegExp,test:(t,e)=>RegExp(t).test(e)};const NBe=["view","item","group","xy","x","y"],CBe={Literal:(t,e)=>e.value,Identifier:(t,e)=>{const n=e.name;return t.memberDepth>0?n:n==="datum"?t.datum:n==="event"?t.event:n==="item"?t.item:kBe[n]||t.params["$"+n]},MemberExpression:(t,e)=>{const n=!e.computed,i=t(e.object);n&&(t.memberDepth+=1);const s=t(e.property);return n&&(t.memberDepth-=1),i[s]},CallExpression:(t,e)=>{const n=e.arguments;let i=e.callee.name;return i.startsWith("_")&&(i=i.slice(1)),i==="if"?t(n[0])?t(n[1]):t(n[2]):(t.fn[i]||ABe[i]).apply(t.fn,n.map(t))},ArrayExpression:(t,e)=>e.elements.map(t),BinaryExpression:(t,e)=>IBe[e.operator](t(e.left),t(e.right)),UnaryExpression:(t,e)=>FBe[e.operator](t(e.argument)),ConditionalExpression:(t,e)=>t(e.test)?t(e.consequent):t(e.alternate),LogicalExpression:(t,e)=>e.operator==="&&"?t(e.left)&&t(e.right):t(e.left)||t(e.right),ObjectExpression:(t,e)=>e.properties.reduce((n,i)=>{t.memberDepth+=1;const s=t(i.key);return t.memberDepth-=1,n[s]=t(i.value),n},{})};function Gg(t,e,n,i,s,o){const c=d=>CBe[d.type](c,d);return c.memberDepth=0,c.fn=Object.create(e),c.params=n,c.datum=i,c.event=s,c.item=o,NBe.forEach(d=>c.fn[d]=(...f)=>s.vega[d](...f)),c(t)}var RBe={operator(t,e){const n=e.ast,i=t.functions;return s=>Gg(n,i,s)},parameter(t,e){const n=e.ast,i=t.functions;return(s,o)=>Gg(n,i,o,s)},event(t,e){const n=e.ast,i=t.functions;return s=>Gg(n,i,void 0,void 0,s)},handler(t,e){const n=e.ast,i=t.functions;return(s,o)=>{const c=o.item&&o.item.datum;return Gg(n,i,s,c,o)}},encode(t,e){const{marktype:n,channels:i}=e,s=t.functions,o=n==="group"||n==="image"||n==="rect";return(c,d)=>{const f=c.datum;let u=0,a;for(const _ in i)a=Gg(i[_].ast,s,d,f,void 0,c),c[_]!==a&&(c[_]=a,u=1);return n!=="rule"&&BBe(c,i,o),u}}};const LBe="vega-lite",PBe='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',DBe="5.5.0",jBe=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],UBe="https://vega.github.io/vega-lite/",zBe="Vega-Lite is a concise high-level language for interactive visualization.",$Be=["vega","chart","visualization"],qBe="build/vega-lite.js",GBe="build/vega-lite.min.js",VBe="build/vega-lite.min.js",HBe="build/src/index",WBe="build/src/index.d.ts",YBe={vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2pdf:"./bin/vl2pdf",vl2vg:"./bin/vl2vg"},XBe=["bin","build","src","vega-lite*","tsconfig.json"],KBe={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.js","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json","predeploy:site":"yarn presite","deploy:site":"gh-pages -d site",data:"rsync -r node_modules/vega-datasets/data/* site/data",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",eslintbase:"eslint .",format:"yarn eslintbase --fix && yarn prettierbase --write",lint:"yarn eslintbase && yarn prettierbase --check",jest:"NODE_OPTIONS=--experimental-vm-modules npx jest",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk --experimental-vm-modules ./node_modules/.bin/jest --runInBand test","test:runtime":"NODE_OPTIONS=--experimental-vm-modules TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"NODE_OPTIONS=--experimental-vm-modules TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"yarn run prebuild && yarn build && yarn shipit",shipit:"auto shipit"},JBe={type:"git",url:"https://github.com/vega/vega-lite.git"},QBe="BSD-3-Clause",ZBe={url:"https://github.com/vega/vega-lite/issues"},eke={"@auto-it/conventional-commits":"^10.37.6","@auto-it/first-time-contributor":"^10.37.6","@babel/core":"^7.19.1","@babel/preset-env":"^7.19.1","@babel/preset-typescript":"^7.18.6","@rollup/plugin-alias":"^4.0.0","@rollup/plugin-babel":"^6.0.0","@rollup/plugin-commonjs":"^23.0.0","@rollup/plugin-json":"^4.1.0","@types/jest":"^27.4.1","@rollup/plugin-node-resolve":"^14.1.0","@types/chai":"^4.3.3","@types/d3":"^7.4.0","@types/mkdirp":"^1.0.2","@types/pako":"^2.0.0","@typescript-eslint/eslint-plugin":"^5.38.0","@typescript-eslint/parser":"^5.38.0",ajv:"^8.11.0","ajv-formats":"^2.1.1",auto:"^10.37.6",chai:"^4.3.6",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^2.2.2",d3:"^7.6.1","del-cli":"^5.0.0",eslint:"^8.23.1","eslint-config-prettier":"^8.5.0","eslint-plugin-jest":"^27.0.4","eslint-plugin-prettier":"^4.2.1","gh-pages":"^4.0.0",jest:"^27.5.1","highlight.js":"^11.6.0","jest-dev-server":"^6.1.1",mkdirp:"^1.0.4",pako:"^2.0.4",prettier:"^2.7.1",puppeteer:"^15.0.0",rollup:"^2.79.1","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-sourcemaps":"^0.6.3","rollup-plugin-terser":"^7.0.2",serve:"^14.0.1",terser:"^5.15.0","ts-jest":"^29.0.1","ts-json-schema-generator":"^1.1.1","vega-cli":"^5.22.1",typescript:"~4.8.3","vega-datasets":"~2.5.1","vega-embed":"^6.21.0","vega-tooltip":"^0.28.0","yaml-front-matter":"^4.1.1"},tke={"@types/clone":"~2.1.1",clone:"~2.1.2","fast-deep-equal":"~3.1.3","fast-json-stable-stringify":"~2.1.0","json-stringify-pretty-compact":"~3.0.0",tslib:"~2.4.0","vega-event-selector":"~3.0.0","vega-expression":"~5.0.0","vega-util":"~1.17.0",yargs:"~17.6.0"},nke={vega:"^5.22.0"},ike={node:">=12"},ske={name:LBe,author:PBe,version:DBe,collaborators:jBe,homepage:UBe,description:zBe,keywords:$Be,main:qBe,unpkg:GBe,jsdelivr:VBe,module:HBe,types:WBe,bin:YBe,files:XBe,scripts:KBe,repository:JBe,license:QBe,bugs:ZBe,devDependencies:eke,dependencies:tke,peerDependencies:nke,engines:ike};var zY={exports:{}};(function(t){var e=function(){function n(w,m){return m!=null&&w instanceof m}var i;try{i=Map}catch{i=function(){}}var s;try{s=Set}catch{s=function(){}}var o;try{o=Promise}catch{o=function(){}}function c(w,m,l,T,b){typeof m=="object"&&(l=m.depth,T=m.prototype,b=m.includeNonEnumerable,m=m.circular);var S=[],x=[],B=typeof Buffer<"u";typeof m>"u"&&(m=!0),typeof l>"u"&&(l=1/0);function F(k,A){if(k===null)return null;if(A===0)return k;var M,R;if(typeof k!="object")return k;if(n(k,i))M=new i;else if(n(k,s))M=new s;else if(n(k,o))M=new o(function(J,V){k.then(function(le){J(F(le,A-1))},function(le){V(F(le,A-1))})});else if(c.__isArray(k))M=[];else if(c.__isRegExp(k))M=new RegExp(k.source,_(k)),k.lastIndex&&(M.lastIndex=k.lastIndex);else if(c.__isDate(k))M=new Date(k.getTime());else{if(B&&Buffer.isBuffer(k))return Buffer.allocUnsafe?M=Buffer.allocUnsafe(k.length):M=new Buffer(k.length),k.copy(M),M;n(k,Error)?M=Object.create(k):typeof T>"u"?(R=Object.getPrototypeOf(k),M=Object.create(R)):(M=Object.create(T),R=T)}if(m){var P=S.indexOf(k);if(P!=-1)return x[P];S.push(k),x.push(M)}n(k,i)&&k.forEach(function(J,V){var le=F(V,A-1),pe=F(J,A-1);M.set(le,pe)}),n(k,s)&&k.forEach(function(J){var V=F(J,A-1);M.add(V)});for(var j in k){var D;R&&(D=Object.getOwnPropertyDescriptor(R,j)),!(D&&D.set==null)&&(M[j]=F(k[j],A-1))}if(Object.getOwnPropertySymbols)for(var z=Object.getOwnPropertySymbols(k),j=0;j<z.length;j++){var $=z[j],K=Object.getOwnPropertyDescriptor(k,$);K&&!K.enumerable&&!b||(M[$]=F(k[$],A-1),K.enumerable||Object.defineProperty(M,$,{enumerable:!1}))}if(b)for(var H=Object.getOwnPropertyNames(k),j=0;j<H.length;j++){var W=H[j],K=Object.getOwnPropertyDescriptor(k,W);K&&K.enumerable||(M[W]=F(k[W],A-1),Object.defineProperty(M,W,{enumerable:!1}))}return M}return F(w,l)}c.clonePrototype=function(m){if(m===null)return null;var l=function(){};return l.prototype=m,new l};function d(w){return Object.prototype.toString.call(w)}c.__objToStr=d;function f(w){return typeof w=="object"&&d(w)==="[object Date]"}c.__isDate=f;function u(w){return typeof w=="object"&&d(w)==="[object Array]"}c.__isArray=u;function a(w){return typeof w=="object"&&d(w)==="[object RegExp]"}c.__isRegExp=a;function _(w){var m="";return w.global&&(m+="g"),w.ignoreCase&&(m+="i"),w.multiline&&(m+="m"),m}return c.__getRegExpFlags=_,c}();t.exports&&(t.exports=e)})(zY);const rke=zY.exports;var $Y=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var i,s,o;if(Array.isArray(e)){if(i=e.length,i!=n.length)return!1;for(s=i;s--!==0;)if(!t(e[s],n[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(o=Object.keys(e),i=o.length,i!==Object.keys(n).length)return!1;for(s=i;s--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[s]))return!1;for(s=i;s--!==0;){var c=o[s];if(!t(e[c],n[c]))return!1}return!0}return e!==e&&n!==n},lC=function(t,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var n=typeof e.cycles=="boolean"?e.cycles:!1,i=e.cmp&&function(o){return function(c){return function(d,f){var u={key:d,value:c[d]},a={key:f,value:c[f]};return o(u,a)}}}(e.cmp),s=[];return function o(c){if(c&&c.toJSON&&typeof c.toJSON=="function"&&(c=c.toJSON()),c!==void 0){if(typeof c=="number")return isFinite(c)?""+c:"null";if(typeof c!="object")return JSON.stringify(c);var d,f;if(Array.isArray(c)){for(f="[",d=0;d<c.length;d++)d&&(f+=","),f+=o(c[d])||"null";return f+"]"}if(c===null)return"null";if(s.indexOf(c)!==-1){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var u=s.push(c)-1,a=Object.keys(c).sort(i&&i(c));for(f="",d=0;d<a.length;d++){var _=a[d],w=o(c[_]);!w||(f&&(f+=","),f+=JSON.stringify(_)+":"+w)}return s.splice(u,1),"{"+f+"}"}}(t)};function cC(t){return!!t.or}function dC(t){return!!t.and}function fC(t){return!!t.not}function z0(t,e){if(fC(t))z0(t.not,e);else if(dC(t))for(const n of t.and)z0(n,e);else if(cC(t))for(const n of t.or)z0(n,e);else e(t)}function $h(t,e){return fC(t)?{not:$h(t.not,e)}:dC(t)?{and:t.and.map(n=>$h(n,e))}:cC(t)?{or:t.or.map(n=>$h(n,e))}:e(t)}const mo=$Y,dt=rke;function qY(t){throw new Error(t)}function Ap(t,e){const n={};for(const i of e)Le(t,i)&&(n[i]=t[i]);return n}function As(t,e){const n=Object.assign({},t);for(const i of e)delete n[i];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(t=>lC(t)).join(",")})`};const _n=lC;function Lt(t){if(ln(t))return t;const e=ke(t)?t:lC(t);if(e.length<250)return e;let n=0;for(let i=0;i<e.length;i++){const s=e.charCodeAt(i);n=(n<<5)-n+s,n=n&n}return n}function GI(t){return t===!1||t===null}function Mt(t,e){return t.includes(e)}function au(t,e){let n=0;for(const[i,s]of t.entries())if(e(s,i,n++))return!0;return!1}function uC(t,e){let n=0;for(const[i,s]of t.entries())if(!e(s,i,n++))return!1;return!0}function GY(t,...e){for(const n of e)ake(t,n!=null?n:{});return t}function ake(t,e){for(const n of we(e))sg(t,n,e[n],!0)}function wo(t,e){const n=[],i={};let s;for(const o of t)s=e(o),!(s in i)&&(i[s]=1,n.push(o));return n}function oke(t,e){const n=we(t),i=we(e);if(n.length!==i.length)return!1;for(const s of n)if(t[s]!==e[s])return!1;return!0}function VY(t,e){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function hC(t,e){for(const n of t)if(e.has(n))return!0;return!1}function VI(t){const e=new Set;for(const n of t){const s=Xo(n).map((c,d)=>d===0?c:`[${c}]`),o=s.map((c,d)=>s.slice(0,d+1).join(""));for(const c of o)e.add(c)}return e}function pC(t,e){return t===void 0||e===void 0?!0:hC(VI(t),VI(e))}function on(t){return we(t).length===0}const we=Object.keys,Gi=Object.values,ud=Object.entries;function ky(t){return t===!0||t===!1}function Sn(t){const e=t.replace(/\W/g,"_");return(t.match(/^\d+/)?"_":"")+e}function P_(t,e){return fC(t)?`!(${P_(t.not,e)})`:dC(t)?`(${t.and.map(n=>P_(n,e)).join(") && (")})`:cC(t)?`(${t.or.map(n=>P_(n,e)).join(") || (")})`:e(t)}function t1(t,e){if(e.length===0)return!0;const n=e.shift();return n in t&&t1(t[n],e)&&delete t[n],on(t)}function Cm(t){return t.charAt(0).toUpperCase()+t.substr(1)}function gC(t,e="datum"){const n=Xo(t),i=[];for(let s=1;s<=n.length;s++){const o=`[${n.slice(0,s).map(Se).join("][")}]`;i.push(`${e}${o}`)}return i.join(" && ")}function HY(t,e="datum"){return`${e}[${Se(Xo(t).join("."))}]`}function lke(t){return t.replace(/(\[|\]|\.|'|")/g,"\\$1")}function qr(t){return`${Xo(t).map(lke).join("\\.")}`}function ou(t,e,n){return t.replace(new RegExp(e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function _C(t){return`${Xo(t).join(".")}`}function Np(t){return t?Xo(t).length:0}function zn(...t){for(const e of t)if(e!==void 0)return e}let WY=42;function YY(t){const e=++WY;return t?String(t)+e:e}function cke(){WY=42}function XY(t){return KY(t)?t:`__${t}`}function KY(t){return t.startsWith("__")}function Iy(t){if(t!==void 0)return(t%360+360)%360}function QE(t){return ln(t)?!0:!isNaN(t)&&!isNaN(parseFloat(t))}var Rm=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};const Cl="row",Rl="column",ZE="facet",Fn="x",gi="y",za="x2",Zo="y2",Nd="xOffset",hg="yOffset",$a="radius",Zl="radius2",Wr="theta",ec="theta2",el="latitude",tl="longitude",qa="latitude2",Gr="longitude2",qs="color",nl="fill",il="stroke",Gs="shape",tc="size",Pu="angle",nc="opacity",Cd="fillOpacity",Rd="strokeOpacity",Ld="strokeWidth",Pd="strokeDash",Lm="text",Pm="order",Dm="detail",eS="key",lu="tooltip",tS="href",nS="url",iS="description",dke={x:1,y:1,x2:1,y2:1},JY={theta:1,theta2:1,radius:1,radius2:1};function QY(t){return t in JY}const yC={longitude:1,longitude2:1,latitude:1,latitude2:1};function fke(t){switch(t){case el:return"y";case qa:return"y2";case tl:return"x";case Gr:return"x2"}}function uke(t){return t in yC}const hke=we(yC),mC=Object.assign(Object.assign(Object.assign(Object.assign({},dke),JY),yC),{xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1});function qh(t){return t===qs||t===nl||t===il}const ZY={row:1,column:1,facet:1},Or=we(ZY),wC=Object.assign(Object.assign({},mC),ZY),pke=we(wC),gke=Rm(wC,["order","detail","tooltip"]),_ke=Rm(gke,["row","column","facet"]);function yke(t){return!!_ke[t]}function eX(t){return!!wC[t]}const mke=[za,Zo,qa,Gr,ec,Zl];function tX(t){return Du(t)!==t}function Du(t){switch(t){case za:return Fn;case Zo:return gi;case qa:return el;case Gr:return tl;case ec:return Wr;case Zl:return $a}return t}function hd(t){if(QY(t))switch(t){case Wr:return"startAngle";case ec:return"endAngle";case $a:return"outerRadius";case Zl:return"innerRadius"}return t}function sl(t){switch(t){case Fn:return za;case gi:return Zo;case el:return qa;case tl:return Gr;case Wr:return ec;case $a:return Zl}}function Vs(t){switch(t){case Fn:case za:return"width";case gi:case Zo:return"height"}}function wke(t){switch(t){case Fn:return"xOffset";case gi:return"yOffset";case za:return"x2Offset";case Zo:return"y2Offset";case Wr:return"thetaOffset";case $a:return"radiusOffset";case ec:return"theta2Offset";case Zl:return"radius2Offset"}}function nX(t){switch(t){case Fn:return"xOffset";case gi:return"yOffset"}}function iX(t){switch(t){case"xOffset":return"x";case"yOffset":return"y"}}const bke=we(mC),bC=Rm(mC,["x","y","x2","y2","xOffset","yOffset","latitude","longitude","latitude2","longitude2","theta","theta2","radius","radius2"]),Tke=we(bC),TC={x:1,y:1},rl=we(TC);function _i(t){return t in TC}const vC={theta:1,radius:1},vke=we(vC);function sS(t){return t==="width"?Fn:gi}const sX={xOffset:1,yOffset:1};function pg(t){return t in sX}const rX=Rm(bC,["text","tooltip","href","url","description","detail","key","order"]),Eke=we(rX);function Ske(t){return!!bC[t]}function xke(t){switch(t){case qs:case nl:case il:case tc:case Gs:case nc:case Ld:case Pd:return!0;case Cd:case Rd:case Pu:return!1}}const aX=Object.assign(Object.assign(Object.assign(Object.assign({},TC),vC),sX),rX),rS=we(aX);function Dd(t){return!!aX[t]}function Bke(t,e){return Ike(t)[e]}const oX={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},kke=Rm(oX,["geoshape"]);function Ike(t){switch(t){case qs:case nl:case il:case iS:case Dm:case eS:case lu:case tS:case Pm:case nc:case Cd:case Rd:case Ld:case ZE:case Cl:case Rl:return oX;case Fn:case gi:case Nd:case hg:case el:case tl:return kke;case za:case Zo:case qa:case Gr:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case tc:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Pd:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Gs:return{point:"always",geoshape:"always"};case Lm:return{text:"always"};case Pu:return{point:"always",square:"always",text:"always"};case nS:return{image:"always"};case Wr:return{text:"always",arc:"always"};case $a:return{text:"always",arc:"always"};case ec:case Zl:return{arc:"always"}}}function fB(t){switch(t){case Fn:case gi:case Wr:case $a:case Nd:case hg:case tc:case Pu:case Ld:case nc:case Cd:case Rd:case za:case Zo:case ec:case Zl:return;case ZE:case Cl:case Rl:case Gs:case Pd:case Lm:case lu:case tS:case nS:case iS:return"discrete";case qs:case nl:case il:return"flexible";case el:case tl:case qa:case Gr:case Dm:case eS:case Pm:return}}const Fke={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},Oke={count:1,min:1,max:1};function Vl(t){return!!t&&!!t.argmin}function jd(t){return!!t&&!!t.argmax}function EC(t){return ke(t)&&!!Fke[t]}const Mke=new Set(["count","valid","missing","distinct"]);function lX(t){return ke(t)&&Mke.has(t)}function Ake(t){return ke(t)&&Mt(["min","max"],t)}const Nke=new Set(["count","sum","distinct","valid","missing"]),Cke=new Set(["mean","average","median","q1","q3","min","max"]);function cX(t){return Od(t)&&(t=_S(t,void 0)),"bin"+we(t).map(e=>aS(t[e])?Sn(`_${e}_${ud(t[e])}`):Sn(`_${e}_${t[e]}`)).join("")}function yn(t){return t===!0||ju(t)&&!t.binned}function bi(t){return t==="binned"||ju(t)&&t.binned===!0}function ju(t){return Fe(t)}function aS(t){return t==null?void 0:t.param}function P6(t){switch(t){case Cl:case Rl:case tc:case qs:case nl:case il:case Ld:case nc:case Cd:case Rd:case Gs:return 6;case Pd:return 4;default:return 10}}function jm(t){return!!(t!=null&&t.expr)}function Ss(t){const e=we(t||{}),n={};for(const i of e)n[i]=rr(t[i]);return n}var Rke=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};function dX(t){const{anchor:e,frame:n,offset:i,orient:s,angle:o,limit:c,color:d,subtitleColor:f,subtitleFont:u,subtitleFontSize:a,subtitleFontStyle:_,subtitleFontWeight:w,subtitleLineHeight:m,subtitlePadding:l}=t,T=Rke(t,["anchor","frame","offset","orient","angle","limit","color","subtitleColor","subtitleFont","subtitleFontSize","subtitleFontStyle","subtitleFontWeight","subtitleLineHeight","subtitlePadding"]),b=Object.assign(Object.assign({},T),d?{fill:d}:{}),S=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e?{anchor:e}:{}),n?{frame:n}:{}),i?{offset:i}:{}),s?{orient:s}:{}),o!==void 0?{angle:o}:{}),c!==void 0?{limit:c}:{}),x=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},f?{subtitleColor:f}:{}),u?{subtitleFont:u}:{}),a?{subtitleFontSize:a}:{}),_?{subtitleFontStyle:_}:{}),w?{subtitleFontWeight:w}:{}),m?{subtitleLineHeight:m}:{}),l?{subtitlePadding:l}:{}),B=Ap(t,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:b,subtitleMarkConfig:B,nonMarkTitleProperties:S,subtitle:x}}function Tc(t){return ke(t)||he(t)&&ke(t[0])}function Re(t){return!!(t!=null&&t.signal)}function Ud(t){return!!t.step}function Lke(t){return he(t)?!1:"fields"in t&&!("data"in t)}function Pke(t){return he(t)?!1:"fields"in t&&"data"in t}function Ol(t){return he(t)?!1:"field"in t&&"data"in t}const Dke={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},jke=we(Dke),Uke={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},HI=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];var SC=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};function fX(t){const e=he(t.condition)?t.condition.map(D6):D6(t.condition);return Object.assign(Object.assign({},rr(t)),{condition:e})}function rr(t){if(jm(t)){const{expr:e}=t,n=SC(t,["expr"]);return Object.assign({signal:e},n)}return t}function D6(t){if(jm(t)){const{expr:e}=t,n=SC(t,["expr"]);return Object.assign({signal:e},n)}return t}function bn(t){if(jm(t)){const{expr:e}=t,n=SC(t,["expr"]);return Object.assign({signal:e},n)}return Re(t)?t:t!==void 0?{value:t}:void 0}function zke(t){return Re(t)?t.signal:Se(t)}function j6(t){return Re(t)?t.signal:Se(t.value)}function Ll(t){return Re(t)?t.signal:t==null?null:Se(t)}function $ke(t,e,n){for(const i of n){const s=cu(i,e.markDef,e.config);s!==void 0&&(t[i]=bn(s))}return t}function uX(t){var e;return[].concat(t.type,(e=t.style)!==null&&e!==void 0?e:[])}function tn(t,e,n,i={}){const{vgChannel:s,ignoreVgConfig:o}=i;return s&&e[s]!==void 0?e[s]:e[t]!==void 0?e[t]:o&&(!s||s===t)?void 0:cu(t,e,n,i)}function cu(t,e,n,{vgChannel:i}={}){return zn(i?n1(t,e,n.style):void 0,n1(t,e,n.style),i?n[e.type][i]:void 0,n[e.type][t],i?n.mark[i]:n.mark[t])}function n1(t,e,n){return hX(t,uX(e),n)}function hX(t,e,n){e=Ie(e);let i;for(const s of e){const o=n[s];o&&o[t]!==void 0&&(i=o[t])}return i}function pX(t,e){return Ie(t).reduce((n,i)=>{var s;return n.field.push(xe(i,e)),n.order.push((s=i.sort)!==null&&s!==void 0?s:"ascending"),n},{field:[],order:[]})}function gX(t,e){const n=[...t];return e.forEach(i=>{for(const s of n)if(mo(s,i))return;n.push(i)}),n}function _X(t,e){return mo(t,e)||!e?t:t?[...Ie(t),...Ie(e)].join(", "):e}function yX(t,e){const n=t.value,i=e.value;if(n==null||i===null)return{explicit:t.explicit,value:null};if((Tc(n)||Re(n))&&(Tc(i)||Re(i)))return{explicit:t.explicit,value:_X(n,i)};if(Tc(n)||Re(n))return{explicit:t.explicit,value:n};if(Tc(i)||Re(i))return{explicit:t.explicit,value:i};if(!Tc(n)&&!Re(n)&&!Tc(i)&&!Re(i))return{explicit:t.explicit,value:gX(n,i)};throw new Error("It should never reach here")}function xC(t){return`Invalid specification ${_n(t)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const qke='Autosize "fit" only works for single views and layered views.';function U6(t){return`${t=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function z6(t){const e=t=="width"?"Width":"Height",n=t=="width"?"x":"y";return`${e} "container" only works well with autosize "fit" or "fit-${n}".`}function $6(t){return t?`Dropping "fit-${t}" because spec has discrete ${Vs(t)}.`:'Dropping "fit" because spec has discrete size.'}function BC(t){return`Unknown field for ${t}. Cannot calculate view size.`}function q6(t){return`Cannot project a selection on encoding channel "${t}", which has no field.`}function Gke(t,e){return`Cannot project a selection on encoding channel "${t}" as it uses an aggregate function ("${e}").`}function Vke(t){return`The "nearest" transform is not supported for ${t} marks.`}function mX(t){return`Selection not supported for ${t} yet.`}function Hke(t){return`Cannot find a selection named "${t}".`}const Wke="Scale bindings are currently only supported for scales with unbinned, continuous domains.",Yke="Legend bindings are only supported for selections over an individual field or encoding channel.";function Xke(t){return`Lookups can only be performed on selection parameters. "${t}" is a variable parameter.`}function Kke(t){return`Cannot define and lookup the "${t}" selection in the same view. Try moving the lookup into a second, layered view?`}const Jke="The same selection must be used to override scale domains in a layered view.",Qke='Interval selections should be initialized using "x" and/or "y" keys.';function Zke(t){return`Unknown repeated value "${t}".`}function G6(t){return`The "columns" property cannot be used when "${t}" has nested row/column.`}const eIe="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function tIe(t){return`Unrecognized parse "${t}".`}function V6(t,e,n){return`An ancestor parsed field "${t}" as ${n} but a child wants to parse the field as ${e}.`}const nIe="Attempt to add the same child twice.";function iIe(t){return`Ignoring an invalid transform: ${_n(t)}.`}const sIe='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function H6(t){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${t} are dropped.`}function rIe(t){const{parentProjection:e,projection:n}=t;return`Layer's shared projection ${_n(e)} is overridden by a child projection ${_n(n)}.`}const aIe="Arc marks uses theta channel rather than angle, replacing angle with theta.";function oIe(t){return`${t}Offset dropped because ${t} is continuous`}function lIe(t){return`There is no ${t} encoding. Replacing ${t}Offset encoding as ${t}.`}function cIe(t,e,n){return`Channel ${t} is a ${e}. Converted to {value: ${_n(n)}}.`}function wX(t){return`Invalid field type "${t}".`}function dIe(t,e){return`Invalid field type "${t}" for aggregate: "${e}", using "quantitative" instead.`}function fIe(t){return`Invalid aggregation operator "${t}".`}function bX(t,e){const{fill:n,stroke:i}=e;return`Dropping color ${t} as the plot also has ${n&&i?"fill and stroke":n?"fill":"stroke"}.`}function uIe(t){return`Position range does not support relative band size for ${t}.`}function WI(t,e){return`Dropping ${_n(t)} from channel "${e}" since it does not contain any data field, datum, value, or signal.`}const hIe="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function oS(t,e,n){return`${t} dropped as it is incompatible with "${e}"${n?` when ${n}`:""}.`}function pIe(t){return`${t} encoding has no scale, so specified scale is ignored.`}function gIe(t){return`${t}-encoding is dropped as ${t} is not a valid encoding channel.`}function _Ie(t){return`${t} encoding should be discrete (ordinal / nominal / binned).`}function yIe(t){return`${t} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function mIe(t){return`Facet encoding dropped as ${t.join(" and ")} ${t.length>1?"are":"is"} also specified.`}function uB(t,e){return`Using discrete channel "${t}" to encode "${e}" field can be misleading as it does not encode ${e==="ordinal"?"order":"magnitude"}.`}function wIe(t){return`The ${t} for range marks cannot be an expression`}function bIe(t,e){return`Line mark is for continuous lines and thus cannot be used with ${t&&e?"x2 and y2":t?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function TIe(t,e){return`Specified orient "${t}" overridden with "${e}".`}function vIe(t){return`Cannot use the scale property "${t}" with non-color channel.`}function EIe(t){return`Cannot use the relative band size with ${t} scale.`}function SIe(t){return`Using unaggregated domain with raw field has no effect (${_n(t)}).`}function xIe(t){return`Unaggregated domain not applicable for "${t}" since it produces values outside the origin domain of the source data.`}function BIe(t){return`Unaggregated domain is currently unsupported for log scale (${_n(t)}).`}function kIe(t){return`Cannot apply size to non-oriented mark "${t}".`}function IIe(t,e,n){return`Channel "${t}" does not work with "${e}" scale. We are using "${n}" scale instead.`}function FIe(t,e){return`FieldDef does not work with "${t}" scale. We are using "${e}" scale instead.`}function TX(t,e,n){return`${n}-scale's "${e}" is dropped as it does not work with ${t} scale.`}function vX(t){return`The step for "${t}" is dropped because the ${t==="width"?"x":"y"} is continuous.`}function OIe(t,e,n,i){return`Conflicting ${e.toString()} property "${t.toString()}" (${_n(n)} and ${_n(i)}). Using ${_n(n)}.`}function MIe(t,e,n,i){return`Conflicting ${e.toString()} property "${t.toString()}" (${_n(n)} and ${_n(i)}). Using the union of the two domains.`}function AIe(t){return`Setting the scale to be independent for "${t}" means we also have to set the guide (axis or legend) to be independent.`}function NIe(t){return`Dropping sort property ${_n(t)} as unioned domains only support boolean or op "count", "min", and "max".`}const W6="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",CIe="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",RIe="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",LIe="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function PIe(t){return`Cannot stack "${t}" if there is already "${t}2".`}function DIe(t){return`Cannot stack non-linear scale (${t}).`}function jIe(t){return`Stacking is applied even though the aggregate function is non-summative ("${t}").`}function i1(t,e){return`Invalid ${t}: ${_n(e)}.`}function UIe(t){return`Dropping day from datetime ${_n(t)} as day cannot be combined with other units.`}function zIe(t,e){return`${e?"extent ":""}${e&&t?"and ":""}${t?"center ":""}${e&&t?"are ":"is "}not needed when data are aggregated.`}function $Ie(t,e,n){return`${t} is not usually used with ${e} for ${n}.`}function qIe(t,e){return`Continuous axis should not have customized aggregation function ${t}; ${e} already agregates the axis.`}function Y6(t){return`1D error band does not support ${t}.`}function EX(t){return`Channel ${t} is required for "binned" bin.`}function GIe(t){return`Channel ${t} should not be used with "binned" bin.`}function VIe(t){return`Domain for ${t} is required for threshold scale.`}globalThis&&globalThis.__classPrivateFieldSet;globalThis&&globalThis.__classPrivateFieldGet;const SX=yM(_M);let Cp=SX;function HIe(t){return Cp=t,Cp}function WIe(){return Cp=SX,Cp}function be(...t){Cp.warn(...t)}function YIe(...t){Cp.debug(...t)}function Uu(t){if(t&&Fe(t)){for(const e of IC)if(e in t)return!0}return!1}const xX=["january","february","march","april","may","june","july","august","september","october","november","december"],XIe=xX.map(t=>t.substr(0,3)),BX=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],KIe=BX.map(t=>t.substr(0,3));function JIe(t){if(QE(t)&&(t=+t),ln(t))return t>4&&be(i1("quarter",t)),t-1;throw new Error(i1("quarter",t))}function QIe(t){if(QE(t)&&(t=+t),ln(t))return t-1;{const e=t.toLowerCase(),n=xX.indexOf(e);if(n!==-1)return n;const i=e.substr(0,3),s=XIe.indexOf(i);if(s!==-1)return s;throw new Error(i1("month",t))}}function ZIe(t){if(QE(t)&&(t=+t),ln(t))return t%7;{const e=t.toLowerCase(),n=BX.indexOf(e);if(n!==-1)return n;const i=e.substr(0,3),s=KIe.indexOf(i);if(s!==-1)return s;throw new Error(i1("day",t))}}function kC(t,e){const n=[];if(e&&t.day!==void 0&&we(t).length>1&&(be(UIe(t)),t=dt(t),delete t.day),t.year!==void 0?n.push(t.year):n.push(2012),t.month!==void 0){const i=e?QIe(t.month):t.month;n.push(i)}else if(t.quarter!==void 0){const i=e?JIe(t.quarter):t.quarter;n.push(ln(i)?i*3:`${i}*3`)}else n.push(0);if(t.date!==void 0)n.push(t.date);else if(t.day!==void 0){const i=e?ZIe(t.day):t.day;n.push(ln(i)?i+1:`${i}+1`)}else n.push(1);for(const i of["hours","minutes","seconds","milliseconds"]){const s=t[i];n.push(typeof s>"u"?0:s)}return n}function Fy(t){const n=kC(t,!0).join(", ");return t.utc?`utc(${n})`:`datetime(${n})`}function eFe(t){const n=kC(t,!1).join(", ");return t.utc?`utc(${n})`:`datetime(${n})`}function tFe(t){const e=kC(t,!0);return t.utc?+new Date(Date.UTC(...e)):+new Date(...e)}var nFe=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};const kX={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},IC=we(kX);function iFe(t){return!!kX[t]}function FC(t){return t.startsWith("utc")}function sFe(t){return t.substr(3)}const rFe={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function OC(t){return IC.filter(e=>IX(t,e))}function IX(t,e){const n=t.indexOf(e);return!(n<0||n>0&&e==="seconds"&&t.charAt(n-1)==="i"||t.length>n+3&&e==="day"&&t.charAt(n+3)==="o"||n>0&&e==="year"&&t.charAt(n-1)==="f")}function aFe(t,e,{end:n}={end:!1}){const i=gC(e),s=FC(t)?"utc":"";function o(f){return f==="quarter"?`(${s}quarter(${i})-1)`:`${s}${f}(${i})`}let c;const d={};for(const f of IC)IX(t,f)&&(d[f]=o(f),c=f);return n&&(d[c]+="+1"),eFe(d)}function FX(t){if(!t)return;const e=OC(t);return`timeUnitSpecifier(${_n(e)}, ${_n(rFe)})`}function oFe(t,e,n){if(!t)return;const i=FX(t);return`${n||FC(t)?"utc":"time"}Format(${e}, ${i})`}function Yi(t){if(!t)return;let e;return ke(t)?e={unit:t}:Fe(t)&&(e=Object.assign(Object.assign({},t),t.unit?{unit:t.unit}:{})),FC(e.unit)&&(e.utc=!0,e.unit=sFe(e.unit)),e}function lFe(t){const e=Yi(t),{utc:n}=e,i=nFe(e,["utc"]);return i.unit?(n?"utc":"")+we(i).map(s=>Sn(`${s==="unit"?"":`_${s}_`}${i[s]}`)).join(""):(n?"utc":"")+"timeunit"+we(i).map(s=>Sn(`_${s}_${i[s]}`)).join("")}function cFe(t){return t==null?void 0:t.param}function MC(t){return!!(t!=null&&t.field)&&t.equal!==void 0}function AC(t){return!!(t!=null&&t.field)&&t.lt!==void 0}function NC(t){return!!(t!=null&&t.field)&&t.lte!==void 0}function CC(t){return!!(t!=null&&t.field)&&t.gt!==void 0}function RC(t){return!!(t!=null&&t.field)&&t.gte!==void 0}function LC(t){if(t!=null&&t.field){if(he(t.range)&&t.range.length===2)return!0;if(Re(t.range))return!0}return!1}function PC(t){return!!(t!=null&&t.field)&&(he(t.oneOf)||he(t.in))}function dFe(t){return!!(t!=null&&t.field)&&t.valid!==void 0}function OX(t){return PC(t)||MC(t)||LC(t)||AC(t)||CC(t)||NC(t)||RC(t)}function Ha(t,e){return yS(t,{timeUnit:e,wrapTime:!0})}function fFe(t,e){return t.map(n=>Ha(n,e))}function MX(t,e=!0){var n;const{field:i}=t,s=(n=Yi(t.timeUnit))===null||n===void 0?void 0:n.unit,o=s?`time(${aFe(s,i)})`:xe(t,{expr:"datum"});if(MC(t))return`${o}===${Ha(t.equal,s)}`;if(AC(t)){const c=t.lt;return`${o}<${Ha(c,s)}`}else if(CC(t)){const c=t.gt;return`${o}>${Ha(c,s)}`}else if(NC(t)){const c=t.lte;return`${o}<=${Ha(c,s)}`}else if(RC(t)){const c=t.gte;return`${o}>=${Ha(c,s)}`}else{if(PC(t))return`indexof([${fFe(t.oneOf,s).join(",")}], ${o}) !== -1`;if(dFe(t))return DC(o,t.valid);if(LC(t)){const{range:c}=t,d=Re(c)?{signal:`${c.signal}[0]`}:c[0],f=Re(c)?{signal:`${c.signal}[1]`}:c[1];if(d!==null&&f!==null&&e)return"inrange("+o+", ["+Ha(d,s)+", "+Ha(f,s)+"])";const u=[];return d!==null&&u.push(`${o} >= ${Ha(d,s)}`),f!==null&&u.push(`${o} <= ${Ha(f,s)}`),u.length>0?u.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${_n(t)}`)}function DC(t,e=!0){return e?`isValid(${t}) && isFinite(+${t})`:`!isValid(${t}) || !isFinite(+${t})`}function uFe(t){var e;return OX(t)&&t.timeUnit?Object.assign(Object.assign({},t),{timeUnit:(e=Yi(t.timeUnit))===null||e===void 0?void 0:e.unit}):t}const Um={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function hFe(t){return t==="quantitative"||t==="temporal"}function AX(t){return t==="ordinal"||t==="nominal"}const du=Um.quantitative,jC=Um.ordinal,Rp=Um.temporal,UC=Um.nominal,gg=Um.geojson;function pFe(t){if(t)switch(t=t.toLowerCase(),t){case"q":case du:return"quantitative";case"t":case Rp:return"temporal";case"o":case jC:return"ordinal";case"n":case UC:return"nominal";case gg:return"geojson"}}var gFe=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};const Ns={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},YI={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function _Fe(t,e){const n=YI[t],i=YI[e];return n===i||n==="ordinal-position"&&i==="time"||i==="ordinal-position"&&n==="time"}const yFe={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function X6(t){return yFe[t]}const NX=new Set(["linear","log","pow","sqrt","symlog"]),CX=new Set([...NX,"time","utc"]);function RX(t){return NX.has(t)}const LX=new Set(["quantile","quantize","threshold"]),mFe=new Set([...CX,...LX,"sequential","identity"]),wFe=new Set(["ordinal","bin-ordinal","point","band"]);function yi(t){return wFe.has(t)}function pr(t){return mFe.has(t)}function ba(t){return CX.has(t)}function Lp(t){return LX.has(t)}const bFe={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function TFe(t){return!ke(t)&&!!t.name}function PX(t){return t==null?void 0:t.param}function vFe(t){return t==null?void 0:t.unionWith}function EFe(t){return Fe(t)&&"field"in t}const SFe={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},xFe=gFe(SFe,["type","domain","range","rangeMax","rangeMin","scheme"]),BFe=we(xFe);function XI(t,e){switch(e){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(t);case"bins":return!["point","band","identity","ordinal"].includes(t);case"round":return ba(t)||t==="band"||t==="point";case"padding":case"rangeMin":case"rangeMax":return ba(t)||["point","band"].includes(t);case"paddingOuter":case"align":return["point","band"].includes(t);case"paddingInner":return t==="band";case"domainMax":case"domainMid":case"domainMin":case"clamp":return ba(t);case"nice":return ba(t)||t==="quantize"||t==="threshold";case"exponent":return t==="pow";case"base":return t==="log";case"constant":return t==="symlog";case"zero":return pr(t)&&!Mt(["log","time","utc","threshold","quantile"],t)}}function DX(t,e){switch(e){case"interpolate":case"scheme":case"domainMid":return qh(t)?void 0:vIe(e);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function kFe(t,e){return Mt([jC,UC],e)?t===void 0||yi(t):e===Rp?Mt([Ns.TIME,Ns.UTC,void 0],t):e===du?RX(t)||Lp(t)||t===void 0:!0}function IFe(t,e,n=!1){if(!Dd(t))return!1;switch(t){case Fn:case gi:case Nd:case hg:case Wr:case $a:return ba(e)||e==="band"?!0:e==="point"?!n:!1;case tc:case Ld:case nc:case Cd:case Rd:case Pu:return ba(e)||Lp(e)||Mt(["band","point","ordinal"],e);case qs:case nl:case il:return e!=="band";case Pd:case Gs:return e==="ordinal"||Lp(e)}}const ps={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},jX=ps.arc,lS=ps.area,cS=ps.bar,FFe=ps.image,dS=ps.line,fS=ps.point,OFe=ps.rect,s1=ps.rule,UX=ps.text,zC=ps.tick,MFe=ps.trail,$C=ps.circle,qC=ps.square,zX=ps.geoshape;function zd(t){return["line","area","trail"].includes(t)}function $X(t){return["rect","bar","image","arc"].includes(t)}const AFe=new Set(we(ps));function zo(t){return t.type}const NFe=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],CFe=["fill","fillOpacity"],RFe=[...NFe,...CFe],LFe={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},K6=we(LFe),PFe={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],tick:["bandSize","thickness"]},DFe={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},jFe={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},qX=we(jFe);function fu(t){return t&&t.band!=null}const UFe={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},GX=5,zFe={binSpacing:1,continuousBandSize:GX,timeUnitBandPosition:.5},$Fe={binSpacing:0,continuousBandSize:GX,timeUnitBandPosition:.5},qFe={thickness:1};function GFe(t){return zo(t)?t.type:t}function GC(t){const{channel:e,channelDef:n,markDef:i,scale:s,config:o}=t,c=HC(t);return Te(n)&&!lX(n.aggregate)&&s&&ba(s.get("type"))?VFe({fieldDef:n,channel:e,markDef:i,ref:c,config:o}):c}function VFe({fieldDef:t,channel:e,markDef:n,ref:i,config:s}){return zd(n.type)?i:tn("invalid",n,s)===null?[HFe(t,e),i]:i}function HFe(t,e){const n=VC(t,!0),s=Du(e)==="y"?{field:{group:"height"}}:{value:0};return Object.assign({test:n},s)}function VC(t,e=!0){return DC(ke(t)?t:xe(t,{expr:"datum"}),!e)}function WFe(t){const{datum:e}=t;return Uu(e)?Fy(e):`${_n(e)}`}function jf(t,e,n,i){const s={};if(e&&(s.scale=e),al(t)){const{datum:o}=t;Uu(o)?s.signal=Fy(o):Re(o)?s.signal=o.signal:jm(o)?s.signal=o.expr:s.value=o}else s.field=xe(t,n);if(i){const{offset:o,band:c}=i;o&&(s.offset=o),c&&(s.band=c)}return s}function r1({scaleName:t,fieldOrDatumDef:e,fieldOrDatumDef2:n,offset:i,startSuffix:s,bandPosition:o=.5}){const c=0<o&&o<1?"datum":void 0,d=xe(e,{expr:c,suffix:s}),f=n!==void 0?xe(n,{expr:c}):xe(e,{suffix:"end",expr:c}),u={};if(o===0||o===1){u.scale=t;const a=o===0?d:f;u.field=a}else{const a=Re(o)?`${o.signal} * ${d} + (1-${o.signal}) * ${f}`:`${o} * ${d} + ${1-o} * ${f}`;u.signal=`scale("${t}", ${a})`}return i&&(u.offset=i),u}function HC({channel:t,channelDef:e,channel2Def:n,markDef:i,config:s,scaleName:o,scale:c,stack:d,offset:f,defaultRef:u,bandPosition:a}){var _;if(e){if(Ze(e)){const w=c==null?void 0:c.get("type");if(Vr(e)){a!=null||(a=QX({fieldDef:e,fieldDef2:n,markDef:i,config:s}));const{bin:m,timeUnit:l,type:T}=e;if(yn(m)||a&&l&&T===Rp)return d!=null&&d.impute?jf(e,o,{binSuffix:"mid"},{offset:f}):a&&!yi(w)?r1({scaleName:o,fieldOrDatumDef:e,bandPosition:a,offset:f}):jf(e,o,Gm(e,t)?{binSuffix:"range"}:{},{offset:f});if(bi(m)){if(Te(n))return r1({scaleName:o,fieldOrDatumDef:e,fieldOrDatumDef2:n,bandPosition:a,offset:f});be(EX(t===Fn?za:Zo))}}return jf(e,o,yi(w)?{binSuffix:"range"}:{},{offset:f,band:w==="band"?(_=a!=null?a:e.bandPosition)!==null&&_!==void 0?_:.5:void 0})}else if(Ca(e)){const w=e.value,m=f?{offset:f}:{};return Object.assign(Object.assign({},D_(t,w)),m)}}return wt(u)&&(u=u()),u&&Object.assign(Object.assign({},u),f?{offset:f}:{})}function D_(t,e){return Mt(["x","x2"],t)&&e==="width"?{field:{group:"width"}}:Mt(["y","y2"],t)&&e==="height"?{field:{group:"height"}}:bn(e)}function uu(t){return t&&t!=="number"&&t!=="time"}function VX(t,e,n){return`${t}(${e}${n?`, ${_n(n)}`:""})`}const YFe=" \u2013 ";function WC({fieldOrDatumDef:t,format:e,formatType:n,expr:i,normalizeStack:s,config:o}){var c,d;if(uu(n))return Ta({fieldOrDatumDef:t,format:e,formatType:n,expr:i,config:o});const f=HX(t,i,s),u=Pp(t);if(e===void 0&&n===void 0&&o.customFormatTypes){if(u==="quantitative"){if(s&&o.normalizedNumberFormatType)return Ta({fieldOrDatumDef:t,format:o.normalizedNumberFormat,formatType:o.normalizedNumberFormatType,expr:i,config:o});if(o.numberFormatType)return Ta({fieldOrDatumDef:t,format:o.numberFormat,formatType:o.numberFormatType,expr:i,config:o})}if(u==="temporal"&&o.timeFormatType&&Te(t)&&t.timeUnit===void 0)return Ta({fieldOrDatumDef:t,format:o.timeFormat,formatType:o.timeFormatType,expr:i,config:o})}if(jp(t)){const a=KFe({field:f,timeUnit:Te(t)?(c=Yi(t.timeUnit))===null||c===void 0?void 0:c.unit:void 0,format:e,formatType:o.timeFormatType,rawTimeFormat:o.timeFormat,isUTCScale:zu(t)&&((d=t.scale)===null||d===void 0?void 0:d.type)===Ns.UTC});return a?{signal:a}:void 0}if(e=KI({type:u,specifiedFormat:e,config:o,normalizeStack:s}),Te(t)&&yn(t.bin)){const a=xe(t,{expr:i,binSuffix:"end"});return{signal:zm(f,a,e,n,o)}}else return e||Pp(t)==="quantitative"?{signal:`${XX(f,e)}`}:{signal:`isValid(${f}) ? ${f} : ""+${f}`}}function HX(t,e,n){return Te(t)?n?`${xe(t,{expr:e,suffix:"end"})}-${xe(t,{expr:e,suffix:"start"})}`:xe(t,{expr:e}):WFe(t)}function Ta({fieldOrDatumDef:t,format:e,formatType:n,expr:i,normalizeStack:s,config:o,field:c}){if(c!=null||(c=HX(t,i,s)),c!=="datum.value"&&Te(t)&&yn(t.bin)){const d=xe(t,{expr:i,binSuffix:"end"});return{signal:zm(c,d,e,n,o)}}return{signal:VX(n,c,e)}}function WX(t,e,n,i,s,o){var c;if(!uu(i)&&!(n===void 0&&i===void 0&&s.customFormatTypes&&Pp(t)==="quantitative"&&(s.normalizedNumberFormatType&&Dp(t)&&t.stack==="normalize"||s.numberFormatType))){if(Dp(t)&&t.stack==="normalize"&&s.normalizedNumberFormat)return KI({type:"quantitative",config:s,normalizeStack:!0});if(jp(t)){const d=Te(t)?(c=Yi(t.timeUnit))===null||c===void 0?void 0:c.unit:void 0;return d===void 0&&s.customFormatTypes&&s.timeFormatType?void 0:XFe({specifiedFormat:n,timeUnit:d,config:s,omitTimeFormatConfig:o})}return KI({type:e,specifiedFormat:n,config:s})}}function YX(t,e,n){var i;if(t&&(Re(t)||t==="number"||t==="time"))return t;if(jp(e)&&n!=="time"&&n!=="utc")return Te(e)&&((i=Yi(e==null?void 0:e.timeUnit))===null||i===void 0?void 0:i.utc)?"utc":"time"}function KI({type:t,specifiedFormat:e,config:n,normalizeStack:i}){if(ke(e))return e;if(t===du)return i?n.normalizedNumberFormat:n.numberFormat}function XFe({specifiedFormat:t,timeUnit:e,config:n,omitTimeFormatConfig:i}){return t||(e?{signal:FX(e)}:i?void 0:n.timeFormat)}function XX(t,e){return`format(${t}, "${e||""}")`}function J6(t,e,n,i){var s;return uu(n)?VX(n,t,e):XX(t,(s=ke(e)?e:void 0)!==null&&s!==void 0?s:i.numberFormat)}function zm(t,e,n,i,s){if(n===void 0&&i===void 0&&s.customFormatTypes&&s.numberFormatType)return zm(t,e,s.numberFormat,s.numberFormatType,s);const o=J6(t,n,i,s),c=J6(e,n,i,s);return`${DC(t,!1)} ? "null" : ${o} + "${YFe}" + ${c}`}function KFe({field:t,timeUnit:e,format:n,formatType:i,rawTimeFormat:s,isUTCScale:o}){return!e||n?!e&&i?`${i}(${t}, '${n}')`:(n=ke(n)?n:s,`${o?"utc":"time"}Format(${t}, '${n}')`):oFe(e,t,o)}const uS="min",JFe={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function Q6(t){return t in JFe}function KX(t){return!!(t!=null&&t.encoding)}function Bo(t){return t&&(t.op==="count"||!!t.field)}function JX(t){return t&&he(t)}function $m(t){return"row"in t||"column"in t}function YC(t){return!!t&&"header"in t}function hS(t){return"facet"in t}var JI=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};function QFe(t){return t.param}function ZFe(t){return t&&!ke(t)&&"repeat"in t}function Z6(t){const{field:e,timeUnit:n,bin:i,aggregate:s}=t;return Object.assign(Object.assign(Object.assign(Object.assign({},n?{timeUnit:n}:{}),i?{bin:i}:{}),s?{aggregate:s}:{}),{field:e})}function XC(t){return"sort"in t}function QX({fieldDef:t,fieldDef2:e,markDef:n,config:i}){if(Ze(t)&&t.bandPosition!==void 0)return t.bandPosition;if(Te(t)){const{timeUnit:s,bin:o}=t;if(s&&!e)return $X(n.type)?0:cu("timeUnitBandPosition",n,i);if(yn(o))return .5}}function ZX({channel:t,fieldDef:e,fieldDef2:n,markDef:i,config:s,scaleType:o,useVlSizeChannel:c}){var d,f,u;const a=Vs(t),_=tn(c?"size":a,i,s,{vgChannel:a});if(_!==void 0)return _;if(Te(e)){const{timeUnit:w,bin:m}=e;if(w&&!n)return{band:cu("timeUnitBandSize",i,s)};if(yn(m)&&!yi(o))return{band:1}}if($X(i.type))return o?yi(o)?((d=s[i.type])===null||d===void 0?void 0:d.discreteBandSize)||{band:1}:(f=s[i.type])===null||f===void 0?void 0:f.continuousBandSize:(u=s[i.type])===null||u===void 0?void 0:u.discreteBandSize}function eK(t,e,n,i){return yn(t.bin)||t.timeUnit&&Vr(t)&&t.type==="temporal"?QX({fieldDef:t,fieldDef2:e,markDef:n,config:i})!==void 0:!1}function pS(t){return t&&"condition"in t}function gS(t){const e=t==null?void 0:t.condition;return!!e&&!he(e)&&Te(e)}function qm(t){const e=t==null?void 0:t.condition;return!!e&&!he(e)&&Ze(e)}function e2e(t){const e=t==null?void 0:t.condition;return!!e&&(he(e)||Ca(e))}function Te(t){return t&&(!!t.field||t.aggregate==="count")}function Pp(t){return t==null?void 0:t.type}function al(t){return t&&"datum"in t}function bo(t){return Vr(t)&&!a1(t)||QI(t)}function QI(t){return al(t)&&ln(t.datum)}function Ze(t){return Te(t)||al(t)}function Vr(t){return t&&("field"in t||t.aggregate==="count")&&"type"in t}function Ca(t){return t&&"value"in t&&"value"in t}function zu(t){return t&&("scale"in t||"sort"in t)}function Dp(t){return t&&("axis"in t||"stack"in t||"impute"in t)}function tK(t){return t&&"legend"in t}function nK(t){return t&&("format"in t||"formatType"in t)}function t2e(t){return As(t,["legend","axis","header","scale"])}function n2e(t){return"op"in t}function xe(t,e={}){var n,i,s;let o=t.field;const c=e.prefix;let d=e.suffix,f="";if(s2e(t))o=XY("count");else{let u;if(!e.nofn)if(n2e(t))u=t.op;else{const{bin:a,aggregate:_,timeUnit:w}=t;yn(a)?(u=cX(a),d=((n=e.binSuffix)!==null&&n!==void 0?n:"")+((i=e.suffix)!==null&&i!==void 0?i:"")):_?jd(_)?(f=`["${o}"]`,o=`argmax_${_.argmax}`):Vl(_)?(f=`["${o}"]`,o=`argmin_${_.argmin}`):u=String(_):w&&(u=lFe(w),d=(!["range","mid"].includes(e.binSuffix)&&e.binSuffix||"")+((s=e.suffix)!==null&&s!==void 0?s:""))}u&&(o=o?`${u}_${o}`:u)}return d&&(o=`${o}_${d}`),c&&(o=`${c}_${o}`),e.forAs?_C(o):e.expr?HY(o,e.expr)+f:qr(o)+f}function a1(t){switch(t.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Te(t)&&!!t.bin;case"temporal":return!1}throw new Error(wX(t.type))}function i2e(t){var e;return zu(t)&&Lp((e=t.scale)===null||e===void 0?void 0:e.type)}function s2e(t){return t.aggregate==="count"}function r2e(t,e){var n;const{field:i,bin:s,timeUnit:o,aggregate:c}=t;if(c==="count")return e.countTitle;if(yn(s))return`${i} (binned)`;if(o){const d=(n=Yi(o))===null||n===void 0?void 0:n.unit;if(d)return`${i} (${OC(d).join("-")})`}else if(c)return jd(c)?`${i} for max ${c.argmax}`:Vl(c)?`${i} for min ${c.argmin}`:`${Cm(c)} of ${i}`;return i}function a2e(t){const{aggregate:e,bin:n,timeUnit:i,field:s}=t;if(jd(e))return`${s} for argmax(${e.argmax})`;if(Vl(e))return`${s} for argmin(${e.argmin})`;const o=Yi(i),c=e||(o==null?void 0:o.unit)||(o==null?void 0:o.maxbins)&&"timeunit"||yn(n)&&"bin";return c?`${c.toUpperCase()}(${s})`:s}const iK=(t,e)=>{switch(e.fieldTitle){case"plain":return t.field;case"functional":return a2e(t);default:return r2e(t,e)}};let sK=iK;function rK(t){sK=t}function o2e(){rK(iK)}function Gh(t,e,{allowDisabling:n,includeDefault:i=!0}){var s,o;const c=(s=KC(t))===null||s===void 0?void 0:s.title;if(!Te(t))return c!=null?c:t.title;const d=t,f=i?JC(d,e):void 0;return n?zn(c,d.title,f):(o=c!=null?c:d.title)!==null&&o!==void 0?o:f}function KC(t){if(Dp(t)&&t.axis)return t.axis;if(tK(t)&&t.legend)return t.legend;if(YC(t)&&t.header)return t.header}function JC(t,e){return sK(t,e)}function o1(t){var e;if(nK(t)){const{format:n,formatType:i}=t;return{format:n,formatType:i}}else{const n=(e=KC(t))!==null&&e!==void 0?e:{},{format:i,formatType:s}=n;return{format:i,formatType:s}}}function l2e(t,e){var n;switch(e){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(XC(t)&&he(t.sort))return"ordinal";const{aggregate:i,bin:s,timeUnit:o}=t;if(o)return"temporal";if(s||i&&!jd(i)&&!Vl(i))return"quantitative";if(zu(t)&&((n=t.scale)===null||n===void 0?void 0:n.type))switch(YI[t.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function $o(t){if(Te(t))return t;if(gS(t))return t.condition}function Qn(t){if(Ze(t))return t;if(qm(t))return t.condition}function aK(t,e,n,i={}){if(ke(t)||ln(t)||Od(t)){const s=ke(t)?"string":ln(t)?"number":"boolean";return be(cIe(e,s,t)),{value:t}}return Ze(t)?l1(t,e,n,i):qm(t)?Object.assign(Object.assign({},t),{condition:l1(t.condition,e,n,i)}):t}function l1(t,e,n,i){if(nK(t)){const{format:s,formatType:o}=t,c=JI(t,["format","formatType"]);if(uu(o)&&!n.customFormatTypes)return be(H6(e)),l1(c,e,n,i)}else{const s=Dp(t)?"axis":tK(t)?"legend":YC(t)?"header":null;if(s&&t[s]){const o=t[s],{format:c,formatType:d}=o,f=JI(o,["format","formatType"]);if(uu(d)&&!n.customFormatTypes)return be(H6(e)),l1(Object.assign(Object.assign({},t),{[s]:f}),e,n,i)}}return Te(t)?QC(t,e,i):c2e(t)}function c2e(t){let e=t.type;if(e)return t;const{datum:n}=t;return e=ln(n)?"quantitative":ke(n)?"nominal":Uu(n)?"temporal":void 0,Object.assign(Object.assign({},t),{type:e})}function QC(t,e,{compositeMark:n=!1}={}){const{aggregate:i,timeUnit:s,bin:o,field:c}=t,d=Object.assign({},t);if(!n&&i&&!EC(i)&&!jd(i)&&!Vl(i)&&(be(fIe(i)),delete d.aggregate),s&&(d.timeUnit=Yi(s)),c&&(d.field=`${c}`),yn(o)&&(d.bin=_S(o,e)),bi(o)&&!_i(e)&&be(GIe(e)),Vr(d)){const{type:f}=d,u=pFe(f);f!==u&&(d.type=u),f!=="quantitative"&&lX(i)&&(be(dIe(f,i)),d.type="quantitative")}else if(!tX(e)){const f=l2e(d,e);d.type=f}if(Vr(d)){const{compatible:f,warning:u}=d2e(d,e)||{};f===!1&&be(u)}if(XC(d)&&ke(d.sort)){const{sort:f}=d;if(Q6(f))return Object.assign(Object.assign({},d),{sort:{encoding:f}});const u=f.substr(1);if(f.charAt(0)==="-"&&Q6(u))return Object.assign(Object.assign({},d),{sort:{encoding:u,order:"descending"}})}if(YC(d)){const{header:f}=d;if(f){const{orient:u}=f,a=JI(f,["orient"]);if(u)return Object.assign(Object.assign({},d),{header:Object.assign(Object.assign({},a),{labelOrient:f.labelOrient||u,titleOrient:f.titleOrient||u})})}}return d}function _S(t,e){return Od(t)?{maxbins:P6(e)}:t==="binned"?{binned:!0}:!t.maxbins&&!t.step?Object.assign(Object.assign({},t),{maxbins:P6(e)}):t}const th={compatible:!0};function d2e(t,e){const n=t.type;if(n==="geojson"&&e!=="shape")return{compatible:!1,warning:`Channel ${e} should not be used with a geojson data.`};switch(e){case Cl:case Rl:case ZE:return a1(t)?th:{compatible:!1,warning:_Ie(e)};case Fn:case gi:case Nd:case hg:case qs:case nl:case il:case Lm:case Dm:case eS:case lu:case tS:case nS:case Pu:case Wr:case $a:case iS:return th;case tl:case Gr:case el:case qa:return n!==du?{compatible:!1,warning:`Channel ${e} should be used with a quantitative field only, not ${t.type} field.`}:th;case nc:case Cd:case Rd:case Ld:case tc:case ec:case Zl:case za:case Zo:return n==="nominal"&&!t.sort?{compatible:!1,warning:`Channel ${e} should not be used with an unsorted discrete field.`}:th;case Gs:case Pd:return!a1(t)&&!i2e(t)?{compatible:!1,warning:yIe(e)}:th;case Pm:return t.type==="nominal"&&!("sort"in t)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:th}}function jp(t){const{formatType:e}=o1(t);return e==="time"||!e&&f2e(t)}function f2e(t){return t&&(t.type==="temporal"||Te(t)&&!!t.timeUnit)}function yS(t,{timeUnit:e,type:n,wrapTime:i,undefinedIfExprNotRequired:s}){var o;const c=e&&((o=Yi(e))===null||o===void 0?void 0:o.unit);let d=c||n==="temporal",f;return jm(t)?f=t.expr:Re(t)?f=t.signal:Uu(t)?(d=!0,f=Fy(t)):(ke(t)||ln(t))&&d&&(f=`datetime(${_n(t)})`,iFe(c)&&(ln(t)&&t<1e4||ke(t)&&isNaN(Date.parse(t)))&&(f=Fy({[c]:t}))),f?i&&d?`time(${f})`:f:s?void 0:_n(t)}function oK(t,e){const{type:n}=t;return e.map(i=>{const s=yS(i,{timeUnit:Te(t)?t.timeUnit:void 0,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:i})}function Gm(t,e){return yn(t.bin)?Dd(e)&&["ordinal","nominal"].includes(t.type):(console.warn("Only call this method for binned field defs."),!1)}const ej={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function Vm(t){return t==null?void 0:t.condition}const lK=["domain","grid","labels","ticks","title"],u2e={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},cK={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},h2e=Object.assign(Object.assign({},cK),{style:1,labelExpr:1,encoding:1});function tj(t){return!!h2e[t]}const p2e={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},dK=we(p2e);function ic(t){return"mark"in t}class mS{constructor(e,n){this.name=e,this.run=n}hasMatchingType(e){return ic(e)?GFe(e.mark)===this.name:!1}}var g2e=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};function Uf(t,e){const n=t&&t[e];return n?he(n)?au(n,i=>!!i.field):Te(n)||gS(n):!1}function fK(t,e){const n=t&&t[e];return n?he(n)?au(n,i=>!!i.field):Te(n)||al(n)||qm(n):!1}function ZI(t,e){if(_i(e)){const n=t[e];if((Te(n)||al(n))&&AX(n.type)){const i=nX(e);return fK(t,i)}}return!1}function ZC(t){return au(pke,e=>{if(Uf(t,e)){const n=t[e];if(he(n))return au(n,i=>!!i.aggregate);{const i=$o(n);return i&&!!i.aggregate}}return!1})}function uK(t,e){const n=[],i=[],s=[],o=[],c={};return e3(t,(d,f)=>{if(Te(d)){const{field:u,aggregate:a,bin:_,timeUnit:w}=d,m=g2e(d,["field","aggregate","bin","timeUnit"]);if(a||w||_){const l=KC(d),T=l==null?void 0:l.title;let b=xe(d,{forAs:!0});const S=Object.assign(Object.assign(Object.assign({},T?[]:{title:Gh(d,e,{allowDisabling:!0})}),m),{field:b});if(a){let x;if(jd(a)?(x="argmax",b=xe({op:"argmax",field:a.argmax},{forAs:!0}),S.field=`${b}.${u}`):Vl(a)?(x="argmin",b=xe({op:"argmin",field:a.argmin},{forAs:!0}),S.field=`${b}.${u}`):a!=="boxplot"&&a!=="errorbar"&&a!=="errorband"&&(x=a),x){const B={op:x,as:b};u&&(B.field=u),o.push(B)}}else if(n.push(b),Vr(d)&&yn(_)){if(i.push({bin:_,field:u,as:b}),n.push(xe(d,{binSuffix:"end"})),Gm(d,f)&&n.push(xe(d,{binSuffix:"range"})),_i(f)){const x={field:`${b}_end`};c[`${f}2`]=x}S.bin="binned",tX(f)||(S.type=du)}else if(w){s.push({timeUnit:w,field:u,as:b});const x=Vr(d)&&d.type!==Rp&&"time";x&&(f===Lm||f===lu?S.formatType=x:Ske(f)?S.legend=Object.assign({formatType:x},S.legend):_i(f)&&(S.axis=Object.assign({formatType:x},S.axis)))}c[f]=S}else n.push(u),c[f]=t[f]}else c[f]=t[f]}),{bins:i,timeUnits:s,aggregate:o,groupby:n,encoding:c}}function _2e(t,e,n){const i=Bke(e,n);if(i){if(i==="binned"){const s=t[e===za?Fn:gi];return!!(Te(s)&&Te(t[e])&&bi(s.bin))}}else return!1;return!0}function y2e(t,e,n,i){const s={};for(const o of we(t))eX(o)||be(gIe(o));for(let o of bke){if(!t[o])continue;const c=t[o];if(pg(o)){const d=iX(o),f=s[d];if(Te(f)){if(hFe(f.type)&&Te(c)){be(oIe(d));continue}}else o=d,be(lIe(d))}if(o==="angle"&&e==="arc"&&!t.theta&&(be(aIe),o=Wr),!_2e(t,o,e)){be(oS(o,e));continue}if(o===tc&&e==="line"){const d=$o(t[o]);if(d!=null&&d.aggregate){be(hIe);continue}}if(o===qs&&(n?"fill"in t:"stroke"in t)){be(bX("encoding",{fill:"fill"in t,stroke:"stroke"in t}));continue}if(o===Dm||o===Pm&&!he(c)&&!Ca(c)||o===lu&&he(c))c&&(s[o]=Ie(c).reduce((d,f)=>(Te(f)?d.push(QC(f,o)):be(WI(f,o)),d),[]));else{if(o===lu&&c===null)s[o]=null;else if(!Te(c)&&!al(c)&&!Ca(c)&&!pS(c)&&!Re(c)){be(WI(c,o));continue}s[o]=aK(c,o,i)}}return s}function wS(t,e){const n={};for(const i of we(t)){const s=aK(t[i],i,e,{compositeMark:!0});n[i]=s}return n}function m2e(t){const e=[];for(const n of we(t))if(Uf(t,n)){const i=t[n],s=Ie(i);for(const o of s)Te(o)?e.push(o):gS(o)&&e.push(o.condition)}return e}function e3(t,e,n){if(!!t)for(const i of we(t)){const s=t[i];if(he(s))for(const o of s)e.call(n,o,i);else e.call(n,s,i)}}function w2e(t,e,n,i){return t?we(t).reduce((s,o)=>{const c=t[o];return he(c)?c.reduce((d,f)=>e.call(i,d,f,o),s):e.call(i,s,c,o)},n):n}function hK(t,e){return we(e).reduce((n,i)=>{switch(i){case Fn:case gi:case tS:case iS:case nS:case za:case Zo:case Nd:case hg:case Wr:case ec:case $a:case Zl:case el:case tl:case qa:case Gr:case Lm:case Gs:case Pu:case lu:return n;case Pm:if(t==="line"||t==="trail")return n;case Dm:case eS:{const s=e[i];if(he(s)||Te(s))for(const o of Ie(s))o.aggregate||n.push(xe(o,{}));return n}case tc:if(t==="trail")return n;case qs:case nl:case il:case nc:case Cd:case Rd:case Pd:case Ld:{const s=$o(e[i]);return s&&!s.aggregate&&n.push(xe(s,{})),n}}},[])}var pK=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};function b2e(t){const{tooltip:e}=t,n=pK(t,["tooltip"]);if(!e)return{filteredEncoding:n};let i,s;if(he(e)){for(const o of e)o.aggregate?(i||(i=[]),i.push(o)):(s||(s=[]),s.push(o));i&&(n.tooltip=i)}else e.aggregate?n.tooltip=e:s=e;return he(s)&&s.length===1&&(s=s[0]),{customTooltipWithoutAggregatedField:s,filteredEncoding:n}}function eF(t,e,n,i=!0){if("tooltip"in n)return{tooltip:n.tooltip};const s=t.map(({fieldPrefix:c,titlePrefix:d})=>{const f=i?` of ${t3(e)}`:"";return{field:c+e.field,type:e.type,title:Re(d)?{signal:`${d}"${escape(f)}"`}:d+f}}),o=m2e(n).map(t2e);return{tooltip:[...s,...wo(o,Lt)]}}function t3(t){const{title:e,field:n}=t;return zn(e,n)}function n3(t,e,n,i,s){const{scale:o,axis:c}=n;return({partName:d,mark:f,positionPrefix:u,endPositionPrefix:a=void 0,extraEncoding:_={}})=>{const w=t3(n);return gK(t,d,s,{mark:f,encoding:Object.assign(Object.assign(Object.assign({[e]:Object.assign(Object.assign(Object.assign({field:`${u}_${n.field}`,type:n.type},w!==void 0?{title:w}:{}),o!==void 0?{scale:o}:{}),c!==void 0?{axis:c}:{})},ke(a)?{[`${e}2`]:{field:`${a}_${n.field}`}}:{}),i),_)})}}function gK(t,e,n,i){const{clip:s,color:o,opacity:c}=t,d=t.type;return t[e]||t[e]===void 0&&n[e]?[Object.assign(Object.assign({},i),{mark:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n[e]),s?{clip:s}:{}),o?{color:o}:{}),c?{opacity:c}:{}),zo(i.mark)?i.mark:{type:i.mark}),{style:`${d}-${String(e)}`}),Od(t[e])?{}:t[e])})]:[]}function _K(t,e,n){const{encoding:i}=t,s=e==="vertical"?"y":"x",o=i[s],c=i[`${s}2`],d=i[`${s}Error`],f=i[`${s}Error2`];return{continuousAxisChannelDef:Hb(o,n),continuousAxisChannelDef2:Hb(c,n),continuousAxisChannelDefError:Hb(d,n),continuousAxisChannelDefError2:Hb(f,n),continuousAxis:s}}function Hb(t,e){if(t!=null&&t.aggregate){const{aggregate:n}=t,i=pK(t,["aggregate"]);return n!==e&&be(qIe(n,e)),i}else return t}function yK(t,e){const{mark:n,encoding:i}=t,{x:s,y:o}=i;if(zo(n)&&n.orient)return n.orient;if(bo(s)){if(bo(o)){const c=Te(s)&&s.aggregate,d=Te(o)&&o.aggregate;if(!c&&d===e)return"vertical";if(!d&&c===e)return"horizontal";if(c===e&&d===e)throw new Error("Both x and y cannot have aggregate");return jp(o)&&!jp(s)?"horizontal":"vertical"}return"horizontal"}else{if(bo(o))return"vertical";throw new Error(`Need a valid continuous axis for ${e}s`)}}var $0=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};const c1="boxplot",T2e=["box","median","outliers","rule","ticks"],v2e=new mS(c1,wK);function mK(t){return ln(t)?"tukey":t}function wK(t,{config:e}){var n,i;t=Object.assign(Object.assign({},t),{encoding:wS(t.encoding,e)});const{mark:s,encoding:o,params:c,projection:d}=t,f=$0(t,["mark","encoding","params","projection"]),u=zo(s)?s:{type:s};c&&be(mX("boxplot"));const a=(n=u.extent)!==null&&n!==void 0?n:e.boxplot.extent,_=tn("size",u,e),w=u.invalid,m=mK(a),{bins:l,timeUnits:T,transform:b,continuousAxisChannelDef:S,continuousAxis:x,groupby:B,aggregate:F,encodingWithoutContinuousAxis:k,ticksOrient:A,boxOrient:M,customTooltipWithoutAggregatedField:R}=E2e(t,a,e),{color:P,size:j}=k,D=$0(k,["color","size"]),z=_e=>n3(u,x,S,_e,e.boxplot),$=z(D),K=z(k),H=z(Object.assign(Object.assign({},D),j?{size:j}:{})),W=eF([{fieldPrefix:m==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:m==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],S,k),J={type:"tick",color:"black",opacity:1,orient:A,invalid:w,aria:!1},V=m==="min-max"?W:eF([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],S,k),le=[...$({partName:"rule",mark:{type:"rule",invalid:w,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:V}),...$({partName:"rule",mark:{type:"rule",invalid:w,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:V}),...$({partName:"ticks",mark:J,positionPrefix:"lower_whisker",extraEncoding:V}),...$({partName:"ticks",mark:J,positionPrefix:"upper_whisker",extraEncoding:V})],pe=[...m!=="tukey"?le:[],...K({partName:"box",mark:Object.assign(Object.assign({type:"bar"},_?{size:_}:{}),{orient:M,invalid:w,ariaRoleDescription:"box"}),positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:W}),...H({partName:"median",mark:Object.assign(Object.assign(Object.assign({type:"tick",invalid:w},Fe(e.boxplot.median)&&e.boxplot.median.color?{color:e.boxplot.median.color}:{}),_?{size:_}:{}),{orient:A,aria:!1}),positionPrefix:"mid_box",extraEncoding:W})];if(m==="min-max")return Object.assign(Object.assign({},f),{transform:((i=f.transform)!==null&&i!==void 0?i:[]).concat(b),layer:pe});const se=`datum["lower_box_${S.field}"]`,Ne=`datum["upper_box_${S.field}"]`,fe=`(${Ne} - ${se})`,Oe=`${se} - ${a} * ${fe}`,Ce=`${Ne} + ${a} * ${fe}`,We=`datum["${S.field}"]`,Bt={joinaggregate:bK(S.field),groupby:B},vt={transform:[{filter:`(${Oe} <= ${We}) && (${We} <= ${Ce})`},{aggregate:[{op:"min",field:S.field,as:`lower_whisker_${S.field}`},{op:"max",field:S.field,as:`upper_whisker_${S.field}`},{op:"min",field:`lower_box_${S.field}`,as:`lower_box_${S.field}`},{op:"max",field:`upper_box_${S.field}`,as:`upper_box_${S.field}`},...F],groupby:B}],layer:le},ge=$0(D,["tooltip"]),{scale:q,axis:G}=S,L=t3(S),Y=As(G,["title"]),Q=gK(u,"outliers",e.boxplot,{transform:[{filter:`(${We} < ${Oe}) || (${We} > ${Ce})`}],mark:"point",encoding:Object.assign(Object.assign(Object.assign({[x]:Object.assign(Object.assign(Object.assign({field:S.field,type:S.type},L!==void 0?{title:L}:{}),q!==void 0?{scale:q}:{}),on(Y)?{}:{axis:Y})},ge),P?{color:P}:{}),R?{tooltip:R}:{})})[0];let ae;const re=[...l,...T,Bt];return Q?ae={transform:re,layer:[Q,vt]}:(ae=vt,ae.transform.unshift(...re)),Object.assign(Object.assign({},f),{layer:[ae,{transform:b,layer:pe}]})}function bK(t){return[{op:"q1",field:t,as:`lower_box_${t}`},{op:"q3",field:t,as:`upper_box_${t}`}]}function E2e(t,e,n){const i=yK(t,c1),{continuousAxisChannelDef:s,continuousAxis:o}=_K(t,i,c1),c=s.field,d=mK(e),f=[...bK(c),{op:"median",field:c,as:`mid_box_${c}`},{op:"min",field:c,as:(d==="min-max"?"lower_whisker_":"min_")+c},{op:"max",field:c,as:(d==="min-max"?"upper_whisker_":"max_")+c}],u=d==="min-max"||d==="tukey"?[]:[{calculate:`datum["upper_box_${c}"] - datum["lower_box_${c}"]`,as:`iqr_${c}`},{calculate:`min(datum["upper_box_${c}"] + datum["iqr_${c}"] * ${e}, datum["max_${c}"])`,as:`upper_whisker_${c}`},{calculate:`max(datum["lower_box_${c}"] - datum["iqr_${c}"] * ${e}, datum["min_${c}"])`,as:`lower_whisker_${c}`}],a=t.encoding,_=o;a[_];const w=$0(a,[typeof _=="symbol"?_:_+""]),{customTooltipWithoutAggregatedField:m,filteredEncoding:l}=b2e(w),{bins:T,timeUnits:b,aggregate:S,groupby:x,encoding:B}=uK(l,n),F=i==="vertical"?"horizontal":"vertical",k=i,A=[...T,...b,{aggregate:[...S,...f],groupby:x},...u];return{bins:T,timeUnits:b,transform:A,groupby:x,aggregate:S,continuousAxisChannelDef:s,continuousAxis:o,encodingWithoutContinuousAxis:B,ticksOrient:F,boxOrient:k,customTooltipWithoutAggregatedField:m}}var nj=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};const i3="errorbar",S2e=["ticks","rule"],x2e=new mS(i3,TK);function TK(t,{config:e}){t=Object.assign(Object.assign({},t),{encoding:wS(t.encoding,e)});const{transform:n,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:o,ticksOrient:c,markDef:d,outerSpec:f,tooltipEncoding:u}=vK(t,i3,e);delete o.size;const a=n3(d,s,i,o,e.errorbar),_=d.thickness,w=d.size,m=Object.assign(Object.assign({type:"tick",orient:c,aria:!1},_!==void 0?{thickness:_}:{}),w!==void 0?{size:w}:{}),l=[...a({partName:"ticks",mark:m,positionPrefix:"lower",extraEncoding:u}),...a({partName:"ticks",mark:m,positionPrefix:"upper",extraEncoding:u}),...a({partName:"rule",mark:Object.assign({type:"rule",ariaRoleDescription:"errorbar"},_!==void 0?{size:_}:{}),positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u})];return Object.assign(Object.assign(Object.assign({},f),{transform:n}),l.length>1?{layer:l}:Object.assign({},l[0]))}function B2e(t,e){const{encoding:n}=t;if(k2e(n))return{orient:yK(t,e),inputType:"raw"};const i=I2e(n),s=F2e(n),o=n.x,c=n.y;if(i){if(s)throw new Error(`${e} cannot be both type aggregated-upper-lower and aggregated-error`);const d=n.x2,f=n.y2;if(Ze(d)&&Ze(f))throw new Error(`${e} cannot have both x2 and y2`);if(Ze(d)){if(bo(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${e}`)}else if(Ze(f)){if(bo(c))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${e}`)}throw new Error("No ranged axis")}else{const d=n.xError,f=n.xError2,u=n.yError,a=n.yError2;if(Ze(f)&&!Ze(d))throw new Error(`${e} cannot have xError2 without xError`);if(Ze(a)&&!Ze(u))throw new Error(`${e} cannot have yError2 without yError`);if(Ze(d)&&Ze(u))throw new Error(`${e} cannot have both xError and yError with both are quantiative`);if(Ze(d)){if(bo(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Ze(u)){if(bo(c))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function k2e(t){return(Ze(t.x)||Ze(t.y))&&!Ze(t.x2)&&!Ze(t.y2)&&!Ze(t.xError)&&!Ze(t.xError2)&&!Ze(t.yError)&&!Ze(t.yError2)}function I2e(t){return Ze(t.x2)||Ze(t.y2)}function F2e(t){return Ze(t.xError)||Ze(t.xError2)||Ze(t.yError)||Ze(t.yError2)}function vK(t,e,n){var i;const{mark:s,encoding:o,params:c,projection:d}=t,f=nj(t,["mark","encoding","params","projection"]),u=zo(s)?s:{type:s};c&&be(mX(e));const{orient:a,inputType:_}=B2e(t,e),{continuousAxisChannelDef:w,continuousAxisChannelDef2:m,continuousAxisChannelDefError:l,continuousAxisChannelDefError2:T,continuousAxis:b}=_K(t,a,e),{errorBarSpecificAggregate:S,postAggregateCalculates:x,tooltipSummary:B,tooltipTitleWithFieldName:F}=O2e(u,w,m,l,T,_,e,n),k=o,A=b;k[A];const M=b==="x"?"x2":"y2";k[M];const R=b==="x"?"xError":"yError";k[R];const P=b==="x"?"xError2":"yError2";k[P];const j=nj(k,[typeof A=="symbol"?A:A+"",typeof M=="symbol"?M:M+"",typeof R=="symbol"?R:R+"",typeof P=="symbol"?P:P+""]),{bins:D,timeUnits:z,aggregate:$,groupby:K,encoding:H}=uK(j,n),W=[...$,...S],J=_!=="raw"?[]:K,V=eF(B,w,H,F);return{transform:[...(i=f.transform)!==null&&i!==void 0?i:[],...D,...z,...W.length===0?[]:[{aggregate:W,groupby:J}],...x],groupby:J,continuousAxisChannelDef:w,continuousAxis:b,encodingWithoutContinuousAxis:H,ticksOrient:a==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:f,tooltipEncoding:V}}function O2e(t,e,n,i,s,o,c,d){let f=[],u=[];const a=e.field;let _,w=!1;if(o==="raw"){const m=t.center?t.center:t.extent?t.extent==="iqr"?"median":"mean":d.errorbar.center,l=t.extent?t.extent:m==="mean"?"stderr":"iqr";if(m==="median"!=(l==="iqr")&&be($Ie(m,l,c)),l==="stderr"||l==="stdev")f=[{op:l,field:a,as:`extent_${a}`},{op:m,field:a,as:`center_${a}`}],u=[{calculate:`datum["center_${a}"] + datum["extent_${a}"]`,as:`upper_${a}`},{calculate:`datum["center_${a}"] - datum["extent_${a}"]`,as:`lower_${a}`}],_=[{fieldPrefix:"center_",titlePrefix:Cm(m)},{fieldPrefix:"upper_",titlePrefix:ij(m,l,"+")},{fieldPrefix:"lower_",titlePrefix:ij(m,l,"-")}],w=!0;else{let T,b,S;l==="ci"?(T="mean",b="ci0",S="ci1"):(T="median",b="q1",S="q3"),f=[{op:b,field:a,as:`lower_${a}`},{op:S,field:a,as:`upper_${a}`},{op:T,field:a,as:`center_${a}`}],_=[{fieldPrefix:"upper_",titlePrefix:Gh({field:a,aggregate:S,type:"quantitative"},d,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Gh({field:a,aggregate:b,type:"quantitative"},d,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Gh({field:a,aggregate:T,type:"quantitative"},d,{allowDisabling:!1})}]}}else{(t.center||t.extent)&&be(zIe(t.center,t.extent)),o==="aggregated-upper-lower"?(_=[],u=[{calculate:`datum["${n.field}"]`,as:`upper_${a}`},{calculate:`datum["${a}"]`,as:`lower_${a}`}]):o==="aggregated-error"&&(_=[{fieldPrefix:"",titlePrefix:a}],u=[{calculate:`datum["${a}"] + datum["${i.field}"]`,as:`upper_${a}`}],s?u.push({calculate:`datum["${a}"] + datum["${s.field}"]`,as:`lower_${a}`}):u.push({calculate:`datum["${a}"] - datum["${i.field}"]`,as:`lower_${a}`}));for(const m of u)_.push({fieldPrefix:m.as.substring(0,6),titlePrefix:ou(ou(m.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:u,errorBarSpecificAggregate:f,tooltipSummary:_,tooltipTitleWithFieldName:w}}function ij(t,e,n){return`${Cm(t)} ${n} ${e}`}const s3="errorband",M2e=["band","borders"],A2e=new mS(s3,EK);function EK(t,{config:e}){t=Object.assign(Object.assign({},t),{encoding:wS(t.encoding,e)});const{transform:n,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:o,markDef:c,outerSpec:d,tooltipEncoding:f}=vK(t,s3,e),u=c,a=n3(u,s,i,o,e.errorband),_=t.encoding.x!==void 0&&t.encoding.y!==void 0;let w={type:_?"area":"rect"},m={type:_?"line":"rule"};const l=Object.assign(Object.assign({},u.interpolate?{interpolate:u.interpolate}:{}),u.tension&&u.interpolate?{tension:u.tension}:{});return _?(w=Object.assign(Object.assign(Object.assign({},w),l),{ariaRoleDescription:"errorband"}),m=Object.assign(Object.assign(Object.assign({},m),l),{aria:!1})):u.interpolate?be(Y6("interpolate")):u.tension&&be(Y6("tension")),Object.assign(Object.assign({},d),{transform:n,layer:[...a({partName:"band",mark:w,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:f}),...a({partName:"borders",mark:m,positionPrefix:"lower",extraEncoding:f}),...a({partName:"borders",mark:m,positionPrefix:"upper",extraEncoding:f})]})}const SK={};function r3(t,e,n){const i=new mS(t,e);SK[t]={normalizer:i,parts:n}}function N2e(){return we(SK)}r3(c1,wK,T2e);r3(i3,TK,S2e);r3(s3,EK,M2e);const C2e=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],xK={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},BK={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},R2e=we(xK),L2e=we(BK),P2e={header:1,headerRow:1,headerColumn:1,headerFacet:1},kK=we(P2e),IK=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],D2e={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},j2e={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},qo="_vgsid_",U2e={point:{on:"click",fields:[qo],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function a3(t){return t==="legend"||!!(t!=null&&t.legend)}function hB(t){return a3(t)&&Fe(t)}function o3(t){return!!(t!=null&&t.select)}var z2e=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};function FK(t){const e=[];for(const n of t||[]){if(o3(n))continue;const{expr:i,bind:s}=n,o=z2e(n,["expr","bind"]);if(s&&i){const c=Object.assign(Object.assign({},o),{bind:s,init:i});e.push(c)}else{const c=Object.assign(Object.assign(Object.assign({},o),i?{update:i}:{}),s?{bind:s}:{});e.push(c)}}return e}function $2e(t){return bS(t)||c3(t)||l3(t)}function l3(t){return"concat"in t}function bS(t){return"vconcat"in t}function c3(t){return"hconcat"in t}function OK({step:t,offsetIsDiscrete:e}){var n;return e?(n=t.for)!==null&&n!==void 0?n:"offset":"position"}function Go(t){return Fe(t)&&t.step!==void 0}function sj(t){return t.view||t.width||t.height}const rj=20,q2e={align:1,bounds:1,center:1,columns:1,spacing:1},G2e=we(q2e);function V2e(t,e,n){var i,s;const o=n[e],c={},{spacing:d,columns:f}=o;d!==void 0&&(c.spacing=d),f!==void 0&&(hS(t)&&!$m(t.facet)||l3(t))&&(c.columns=f),bS(t)&&(c.columns=1);for(const u of G2e)if(t[u]!==void 0)if(u==="spacing"){const a=t[u];c[u]=ln(a)?a:{row:(i=a.row)!==null&&i!==void 0?i:d,column:(s=a.column)!==null&&s!==void 0?s:d}}else c[u]=t[u];return c}var H2e=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};function tF(t,e){var n;return(n=t[e])!==null&&n!==void 0?n:t[e==="width"?"continuousWidth":"continuousHeight"]}function d1(t,e){const n=f1(t,e);return Go(n)?n.step:MK}function f1(t,e){var n;const i=(n=t[e])!==null&&n!==void 0?n:t[e==="width"?"discreteWidth":"discreteHeight"];return zn(i,{step:t.step})}const MK=20,W2e={continuousWidth:200,continuousHeight:200,step:MK},Y2e={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:W2e,mark:DFe,arc:{},area:{},bar:zFe,circle:{},geoshape:{},image:{},line:{},point:{},rect:$Fe,rule:{color:"black"},square:{},text:{color:"black"},tick:qFe,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:bFe,projection:{},legend:D2e,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:U2e,style:{},title:{},facet:{spacing:rj},concat:{spacing:rj},normalizedNumberFormat:".0%"},fl=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],aj={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},oj={blue:fl[0],orange:fl[1],red:fl[2],teal:fl[3],green:fl[4],yellow:fl[5],purple:fl[6],pink:fl[7],brown:fl[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function X2e(t={}){return{signals:[{name:"color",value:Fe(t)?Object.assign(Object.assign({},oj),t):oj}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function K2e(t){return{signals:[{name:"fontSize",value:Fe(t)?Object.assign(Object.assign({},aj),t):aj}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function J2e(t){return{text:{font:t},style:{"guide-label":{font:t},"guide-title":{font:t},"group-title":{font:t},"group-subtitle":{font:t}}}}function AK(t){const e=we(t||{}),n={};for(const i of e){const s=t[i];n[i]=Vm(s)?fX(s):rr(s)}return n}function Q2e(t){const e=we(t),n={};for(const i of e)n[i]=AK(t[i]);return n}const Z2e=[...qX,...dK,...kK,"background","padding","legend","lineBreak","scale","style","title","view"];function NK(t={}){const{color:e,font:n,fontSize:i,selection:s}=t,o=H2e(t,["color","font","fontSize","selection"]),c=ig({},dt(Y2e),n?J2e(n):{},e?X2e(e):{},i?K2e(i):{},o||{});s&&sg(c,"selection",s,!0);const d=As(c,Z2e);for(const f of["background","lineBreak","padding"])c[f]&&(d[f]=rr(c[f]));for(const f of qX)c[f]&&(d[f]=Ss(c[f]));for(const f of dK)c[f]&&(d[f]=AK(c[f]));for(const f of kK)c[f]&&(d[f]=Ss(c[f]));return c.legend&&(d.legend=Ss(c.legend)),c.scale&&(d.scale=Ss(c.scale)),c.style&&(d.style=Q2e(c.style)),c.title&&(d.title=Ss(c.title)),c.view&&(d.view=Ss(c.view)),d}const eOe=new Set(["view",...AFe]),tOe=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],nOe=Object.assign({view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"]},PFe);function iOe(t){t=dt(t);for(const e of tOe)delete t[e];if(t.axis)for(const e in t.axis)Vm(t.axis[e])&&delete t.axis[e];if(t.legend)for(const e of C2e)delete t.legend[e];if(t.mark){for(const e of K6)delete t.mark[e];t.mark.tooltip&&Fe(t.mark.tooltip)&&delete t.mark.tooltip}t.params&&(t.signals=(t.signals||[]).concat(FK(t.params)),delete t.params);for(const e of eOe){for(const i of K6)delete t[e][i];const n=nOe[e];if(n)for(const i of n)delete t[e][i];rOe(t,e)}for(const e of N2e())delete t[e];sOe(t);for(const e in t)Fe(t[e])&&on(t[e])&&delete t[e];return on(t)?void 0:t}function sOe(t){const{titleMarkConfig:e,subtitleMarkConfig:n,subtitle:i}=dX(t.title);on(e)||(t.style["group-title"]=Object.assign(Object.assign({},t.style["group-title"]),e)),on(n)||(t.style["group-subtitle"]=Object.assign(Object.assign({},t.style["group-subtitle"]),n)),on(i)?delete t.title:t.title=i}function rOe(t,e,n,i){const s=i?t[e][i]:t[e];e==="view"&&(n="cell");const o=Object.assign(Object.assign({},s),t.style[n!=null?n:e]);on(o)||(t.style[n!=null?n:e]=o),i||delete t[e]}function TS(t){return"layer"in t}function aOe(t){return"repeat"in t}function oOe(t){return!he(t.repeat)&&t.repeat.layer}var lOe=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};class d3{map(e,n){return hS(e)?this.mapFacet(e,n):aOe(e)?this.mapRepeat(e,n):c3(e)?this.mapHConcat(e,n):bS(e)?this.mapVConcat(e,n):l3(e)?this.mapConcat(e,n):this.mapLayerOrUnit(e,n)}mapLayerOrUnit(e,n){if(TS(e))return this.mapLayer(e,n);if(ic(e))return this.mapUnit(e,n);throw new Error(xC(e))}mapLayer(e,n){return Object.assign(Object.assign({},e),{layer:e.layer.map(i=>this.mapLayerOrUnit(i,n))})}mapHConcat(e,n){return Object.assign(Object.assign({},e),{hconcat:e.hconcat.map(i=>this.map(i,n))})}mapVConcat(e,n){return Object.assign(Object.assign({},e),{vconcat:e.vconcat.map(i=>this.map(i,n))})}mapConcat(e,n){const{concat:i}=e,s=lOe(e,["concat"]);return Object.assign(Object.assign({},s),{concat:i.map(o=>this.map(o,n))})}mapFacet(e,n){return Object.assign(Object.assign({},e),{spec:this.map(e.spec,n)})}mapRepeat(e,n){return Object.assign(Object.assign({},e),{spec:this.map(e.spec,n)})}}const cOe={zero:1,center:1,normalize:1};function dOe(t){return t in cOe}const fOe=new Set([jX,cS,lS,s1,fS,$C,qC,dS,UX,zC]),uOe=new Set([cS,lS,jX]);function nh(t){return Te(t)&&Pp(t)==="quantitative"&&!t.bin}function lj(t,e){var n,i;const s=e==="x"?"y":"radius",o=t[e],c=t[s];if(Te(o)&&Te(c))if(nh(o)&&nh(c)){if(o.stack)return e;if(c.stack)return s;const d=Te(o)&&!!o.aggregate,f=Te(c)&&!!c.aggregate;if(d!==f)return d?e:s;{const u=(n=o.scale)===null||n===void 0?void 0:n.type,a=(i=c.scale)===null||i===void 0?void 0:i.type;if(u&&u!=="linear")return s;if(a&&a!=="linear")return e}}else{if(nh(o))return e;if(nh(c))return s}else{if(nh(o))return e;if(nh(c))return s}}function hOe(t){switch(t){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function CK(t,e){var n,i;const s=zo(t)?t.type:t;if(!fOe.has(s))return null;const o=lj(e,"x")||lj(e,"theta");if(!o)return null;const c=e[o],d=Te(c)?xe(c,{}):void 0,f=hOe(o),u=[],a=new Set;if(e[f]){const m=e[f],l=Te(m)?xe(m,{}):void 0;l&&l!==d&&(u.push(f),a.add(l));const T=f==="x"?"xOffset":"yOffset",b=e[T],S=Te(b)?xe(b,{}):void 0;S&&S!==d&&(u.push(T),a.add(S))}const _=Tke.reduce((m,l)=>{if(l!=="tooltip"&&Uf(e,l)){const T=e[l];for(const b of Ie(T)){const S=$o(b);if(S.aggregate)continue;const x=xe(S,{});(!x||!a.has(x))&&m.push({channel:l,fieldDef:S})}}return m},[]);let w;return c.stack!==void 0?Od(c.stack)?w=c.stack?"zero":null:w=c.stack:uOe.has(s)&&(w="zero"),!w||!dOe(w)||ZC(e)&&_.length===0?null:((n=c==null?void 0:c.scale)===null||n===void 0?void 0:n.type)&&((i=c==null?void 0:c.scale)===null||i===void 0?void 0:i.type)!==Ns.LINEAR?(be(DIe(c.scale.type)),null):Ze(e[sl(o)])?(c.stack!==void 0&&be(PIe(o)),null):(Te(c)&&c.aggregate&&!Nke.has(c.aggregate)&&be(jIe(c.aggregate)),{groupbyChannels:u,groupbyFields:a,fieldChannel:o,impute:c.impute===null?!1:zd(s),stackBy:_,offset:w})}var RK=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};function pOe(t){const e=RK(t,["point","line"]);return we(e).length>1?e:e.type}function gOe(t){for(const e of["line","area","rule","trail"])t[e]&&(t=Object.assign(Object.assign({},t),{[e]:As(t[e],["point","line"])}));return t}function pB(t,e={},n){return t.point==="transparent"?{opacity:0}:t.point?Fe(t.point)?t.point:{}:t.point!==void 0?null:e.point||n.shape?Fe(e.point)?e.point:{}:void 0}function cj(t,e={}){return t.line?t.line===!0?{}:t.line:t.line!==void 0?null:e.line?e.line===!0?{}:e.line:void 0}class _Oe{constructor(){this.name="path-overlay"}hasMatchingType(e,n){if(ic(e)){const{mark:i,encoding:s}=e,o=zo(i)?i:{type:i};switch(o.type){case"line":case"rule":case"trail":return!!pB(o,n[o.type],s);case"area":return!!pB(o,n[o.type],s)||!!cj(o,n[o.type])}}return!1}run(e,n,i){const{config:s}=n,{params:o,projection:c,mark:d,encoding:f}=e,u=RK(e,["params","projection","mark","encoding"]),a=wS(f,s),_=zo(d)?d:{type:d},w=pB(_,s[_.type],a),m=_.type==="area"&&cj(_,s[_.type]),l=[Object.assign(Object.assign({},o?{params:o}:{}),{mark:pOe(Object.assign(Object.assign({},_.type==="area"&&_.opacity===void 0&&_.fillOpacity===void 0?{opacity:.7}:{}),_)),encoding:As(a,["shape"])})],T=CK(_,a);let b=a;if(T){const{fieldChannel:S,offset:x}=T;b=Object.assign(Object.assign({},a),{[S]:Object.assign(Object.assign({},a[S]),x?{stack:x}:{})})}return b=As(b,["y2","x2"]),m&&l.push(Object.assign(Object.assign({},c?{projection:c}:{}),{mark:Object.assign(Object.assign({type:"line"},Ap(_,["clip","interpolate","tension","tooltip"])),m),encoding:b})),w&&l.push(Object.assign(Object.assign({},c?{projection:c}:{}),{mark:Object.assign(Object.assign({type:"point",opacity:1,filled:!0},Ap(_,["clip","tooltip"])),w),encoding:b})),i(Object.assign(Object.assign({},u),{layer:l}),Object.assign(Object.assign({},n),{config:gOe(s)}))}}var yOe=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};function mOe(t,e){return e?$m(t)?PK(t,e):LK(t,e):t}function gB(t,e){return e?PK(t,e):t}function nF(t,e,n){const i=e[t];if(ZFe(i)){if(i.repeat in n)return Object.assign(Object.assign({},e),{[t]:n[i.repeat]});be(Zke(i.repeat));return}return e}function LK(t,e){if(t=nF("field",t,e),t!==void 0){if(t===null)return null;if(XC(t)&&Bo(t.sort)){const n=nF("field",t.sort,e);t=Object.assign(Object.assign({},t),n?{sort:n}:{})}return t}}function dj(t,e){if(Te(t))return LK(t,e);{const n=nF("datum",t,e);return n!==t&&!n.type&&(n.type="nominal"),n}}function fj(t,e){if(Ze(t)){const n=dj(t,e);if(n)return n;if(pS(t))return{condition:t.condition}}else{if(qm(t)){const n=dj(t.condition,e);return n?Object.assign(Object.assign({},t),{condition:n}):yOe(t,["condition"])}return t}}function PK(t,e){const n={};for(const i in t)if(Le(t,i)){const s=t[i];if(he(s))n[i]=s.map(o=>fj(o,e)).filter(o=>o);else{const o=fj(s,e);o!==void 0&&(n[i]=o)}}return n}class wOe{constructor(){this.name="RuleForRangedLine"}hasMatchingType(e){if(ic(e)){const{encoding:n,mark:i}=e;if(i==="line"||zo(i)&&i.type==="line")for(const s of mke){const o=Du(s),c=n[o];if(n[s]&&(Te(c)&&!bi(c.bin)||al(c)))return!0}}return!1}run(e,n,i){const{encoding:s,mark:o}=e;return be(bIe(!!s.x2,!!s.y2)),i(Object.assign(Object.assign({},e),{mark:Fe(o)?Object.assign(Object.assign({},o),{type:"rule"}):"rule"}),n)}}var dc=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};class bOe extends d3{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[v2e,x2e,A2e,new _Oe,new wOe]}map(e,n){if(ic(e)){const i=Uf(e.encoding,Cl),s=Uf(e.encoding,Rl),o=Uf(e.encoding,ZE);if(i||s||o)return this.mapFacetedUnit(e,n)}return super.map(e,n)}mapUnit(e,n){const{parentEncoding:i,parentProjection:s}=n,o=gB(e.encoding,n.repeater),c=Object.assign(Object.assign({},e),o?{encoding:o}:{});if(i||s)return this.mapUnitWithParentEncodingOrProjection(c,n);const d=this.mapLayerOrUnit.bind(this);for(const f of this.nonFacetUnitNormalizers)if(f.hasMatchingType(c,n.config))return f.run(c,n,d);return c}mapRepeat(e,n){return oOe(e)?this.mapLayerRepeat(e,n):this.mapNonLayerRepeat(e,n)}mapLayerRepeat(e,n){const{repeat:i,spec:s}=e,o=dc(e,["repeat","spec"]),{row:c,column:d,layer:f}=i,{repeater:u={},repeaterPrefix:a=""}=n;return c||d?this.mapRepeat(Object.assign(Object.assign({},e),{repeat:Object.assign(Object.assign({},c?{row:c}:{}),d?{column:d}:{}),spec:{repeat:{layer:f},spec:s}}),n):Object.assign(Object.assign({},o),{layer:f.map(_=>{const w=Object.assign(Object.assign({},u),{layer:_}),m=`${(s.name||"")+a}child__layer_${Sn(_)}`,l=this.mapLayerOrUnit(s,Object.assign(Object.assign({},n),{repeater:w,repeaterPrefix:m}));return l.name=m,l})})}mapNonLayerRepeat(e,n){var i;const{repeat:s,spec:o,data:c}=e,d=dc(e,["repeat","spec","data"]);!he(s)&&e.columns&&(e=As(e,["columns"]),be(G6("repeat")));const f=[],{repeater:u={},repeaterPrefix:a=""}=n,_=!he(s)&&s.row||[u?u.row:null],w=!he(s)&&s.column||[u?u.column:null],m=he(s)&&s||[u?u.repeat:null];for(const T of m)for(const b of _)for(const S of w){const x={repeat:T,row:b,column:S,layer:u.layer},B=(o.name||"")+a+"child__"+(he(s)?`${Sn(T)}`:(s.row?`row_${Sn(b)}`:"")+(s.column?`column_${Sn(S)}`:"")),F=this.map(o,Object.assign(Object.assign({},n),{repeater:x,repeaterPrefix:B}));F.name=B,f.push(As(F,["data"]))}const l=he(s)?e.columns:s.column?s.column.length:1;return Object.assign(Object.assign({data:(i=o.data)!==null&&i!==void 0?i:c,align:"all"},d),{columns:l,concat:f})}mapFacet(e,n){const{facet:i}=e;return $m(i)&&e.columns&&(e=As(e,["columns"]),be(G6("facet"))),super.mapFacet(e,n)}mapUnitWithParentEncodingOrProjection(e,n){const{encoding:i,projection:s}=e,{parentEncoding:o,parentProjection:c,config:d}=n,f=hj({parentProjection:c,projection:s}),u=uj({parentEncoding:o,encoding:gB(i,n.repeater)});return this.mapUnit(Object.assign(Object.assign(Object.assign({},e),f?{projection:f}:{}),u?{encoding:u}:{}),{config:d})}mapFacetedUnit(e,n){const i=e.encoding,{row:s,column:o,facet:c}=i,d=dc(i,["row","column","facet"]),{mark:f,width:u,projection:a,height:_,view:w,params:m,encoding:l}=e,T=dc(e,["mark","width","projection","height","view","params","encoding"]),{facetMapping:b,layout:S}=this.getFacetMappingAndLayout({row:s,column:o,facet:c},n),x=gB(d,n.repeater);return this.mapFacet(Object.assign(Object.assign(Object.assign({},T),S),{facet:b,spec:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},u?{width:u}:{}),_?{height:_}:{}),w?{view:w}:{}),a?{projection:a}:{}),{mark:f,encoding:x}),m?{params:m}:{})}),n)}getFacetMappingAndLayout(e,n){var i;const{row:s,column:o,facet:c}=e;if(s||o){c&&be(mIe([...s?[Cl]:[],...o?[Rl]:[]]));const d={},f={};for(const u of[Cl,Rl]){const a=e[u];if(a){const _=dc(a,["align","center","spacing","columns"]);d[u]=_;for(const w of["align","center","spacing"])a[w]!==void 0&&((i=f[w])!==null&&i!==void 0||(f[w]={}),f[w][u]=a[w])}}return{facetMapping:d,layout:f}}else{const{align:d,center:f,spacing:u,columns:a}=c,_=dc(c,["align","center","spacing","columns"]);return{facetMapping:mOe(_,n.repeater),layout:Object.assign(Object.assign(Object.assign(Object.assign({},d?{align:d}:{}),f?{center:f}:{}),u?{spacing:u}:{}),a?{columns:a}:{})}}}mapLayer(e,n){var{parentEncoding:i,parentProjection:s}=n,o=dc(n,["parentEncoding","parentProjection"]);const{encoding:c,projection:d}=e,f=dc(e,["encoding","projection"]),u=Object.assign(Object.assign({},o),{parentEncoding:uj({parentEncoding:i,encoding:c,layer:!0}),parentProjection:hj({parentProjection:s,projection:d})});return super.mapLayer(f,u)}}function uj({parentEncoding:t,encoding:e={},layer:n}){let i={};if(t){const s=new Set([...we(t),...we(e)]);for(const o of s){const c=e[o],d=t[o];if(Ze(c)){const f=Object.assign(Object.assign({},d),c);i[o]=f}else qm(c)?i[o]=Object.assign(Object.assign({},c),{condition:Object.assign(Object.assign({},d),c.condition)}):c||c===null?i[o]=c:(n||Ca(d)||Re(d)||Ze(d)||he(d))&&(i[o]=d)}}else i=e;return!i||on(i)?void 0:i}function hj(t){const{parentProjection:e,projection:n}=t;return e&&n&&be(rIe({parentProjection:e,projection:n})),n!=null?n:e}function f3(t){return"filter"in t}function TOe(t){return(t==null?void 0:t.stop)!==void 0}function DK(t){return"lookup"in t}function vOe(t){return"data"in t}function EOe(t){return"param"in t}function SOe(t){return"pivot"in t}function xOe(t){return"density"in t}function BOe(t){return"quantile"in t}function kOe(t){return"regression"in t}function IOe(t){return"loess"in t}function FOe(t){return"sample"in t}function OOe(t){return"window"in t}function MOe(t){return"joinaggregate"in t}function AOe(t){return"flatten"in t}function NOe(t){return"calculate"in t}function jK(t){return"bin"in t}function COe(t){return"impute"in t}function ROe(t){return"timeUnit"in t}function LOe(t){return"aggregate"in t}function POe(t){return"stack"in t}function DOe(t){return"fold"in t}function jOe(t){return t.map(e=>f3(e)?{filter:$h(e.filter,uFe)}:e)}var $c=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};class UOe extends d3{map(e,n){var i,s;return(i=n.emptySelections)!==null&&i!==void 0||(n.emptySelections={}),(s=n.selectionPredicates)!==null&&s!==void 0||(n.selectionPredicates={}),e=pj(e,n),super.map(e,n)}mapLayerOrUnit(e,n){if(e=pj(e,n),e.encoding){const i={};for(const[s,o]of ud(e.encoding))i[s]=UK(o,n);e=Object.assign(Object.assign({},e),{encoding:i})}return super.mapLayerOrUnit(e,n)}mapUnit(e,n){const i=e,{selection:s}=i,o=$c(i,["selection"]);return s?Object.assign(Object.assign({},o),{params:ud(s).map(([c,d])=>{var f;const u=d,{init:a,bind:_,empty:w}=u,m=$c(u,["init","bind","empty"]);m.type==="single"?(m.type="point",m.toggle=!1):m.type==="multi"&&(m.type="point"),n.emptySelections[c]=w!=="none";for(const l of Gi((f=n.selectionPredicates[c])!==null&&f!==void 0?f:{}))l.empty=w!=="none";return{name:c,value:a,select:m,bind:_}})}):e}}function pj(t,e){const{transform:n}=t,i=$c(t,["transform"]);if(n){const s=n.map(o=>{if(f3(o))return{filter:iF(o,e)};if(jK(o)&&ju(o.bin))return Object.assign(Object.assign({},o),{bin:zK(o.bin)});if(DK(o)){const c=o.from,{selection:d}=c,f=$c(c,["selection"]);return d?Object.assign(Object.assign({},o),{from:Object.assign({param:d},f)}):o}return o});return Object.assign(Object.assign({},i),{transform:s})}return t}function UK(t,e){var n,i;const s=dt(t);if(Te(s)&&ju(s.bin)&&(s.bin=zK(s.bin)),zu(s)&&((i=(n=s.scale)===null||n===void 0?void 0:n.domain)===null||i===void 0?void 0:i.selection)){const o=s.scale.domain,{selection:c}=o,d=$c(o,["selection"]);s.scale.domain=Object.assign(Object.assign({},d),c?{param:c}:{})}if(pS(s))if(he(s.condition))s.condition=s.condition.map(o=>{const{selection:c,param:d,test:f}=o,u=$c(o,["selection","param","test"]);return d?o:Object.assign(Object.assign({},u),{test:iF(o,e)})});else{const o=UK(s.condition,e),{selection:c,param:d,test:f}=o,u=$c(o,["selection","param","test"]);s.condition=d?s.condition:Object.assign(Object.assign({},u),{test:iF(s.condition,e)})}return s}function zK(t){const e=t.extent;if(e!=null&&e.selection){const{selection:n}=e,i=$c(e,["selection"]);return Object.assign(Object.assign({},t),{extent:Object.assign(Object.assign({},i),{param:n})})}return t}function iF(t,e){const n=i=>$h(i,s=>{var o,c,d;const f=(o=e.emptySelections[s])!==null&&o!==void 0?o:!0,u={param:s,empty:f};return(c=(d=e.selectionPredicates)[s])!==null&&c!==void 0||(d[s]=[]),e.selectionPredicates[s].push(u),u});return t.selection?n(t.selection):$h(t.test||t.filter,i=>i.selection?n(i.selection):i)}class sF extends d3{map(e,n){var i;const s=(i=n.selections)!==null&&i!==void 0?i:[];if(e.params&&!ic(e)){const o=[];for(const c of e.params)o3(c)?s.push(c):o.push(c);e.params=o}return n.selections=s,super.map(e,$K(e,n))}mapUnit(e,n){var i;const s=n.selections;if(!s||!s.length)return e;const o=((i=n.path)!==null&&i!==void 0?i:[]).concat(e.name),c=[];for(const d of s)if(!d.views||!d.views.length)c.push(d);else for(const f of d.views)(ke(f)&&(f===e.name||o.indexOf(f)>=0)||he(f)&&f.map(u=>o.indexOf(u)).every((u,a,_)=>u!==-1&&(a===0||u>_[a-1])))&&c.push(d);return c.length&&(e.params=c),e}}for(const t of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const e=sF.prototype[t];sF.prototype[t]=function(n,i){return e.call(this,n,$K(n,i))}}function $K(t,e){var n;return t.name?Object.assign(Object.assign({},e),{path:((n=e.path)!==null&&n!==void 0?n:[]).concat(t.name)}):e}function qK(t,e){e===void 0&&(e=NK(t.config));const n=GOe(t,e),{width:i,height:s}=t,o=VOe(n,{width:i,height:s,autosize:t.autosize},e);return Object.assign(Object.assign({},n),o?{autosize:o}:{})}const zOe=new bOe,$Oe=new UOe,qOe=new sF;function GOe(t,e={}){const n={config:e};return qOe.map(zOe.map($Oe.map(t,n),n),n)}function gj(t){return ke(t)?{type:t}:t!=null?t:{}}function VOe(t,e,n){let{width:i,height:s}=e;const o=ic(t)||TS(t),c={};o?i=="container"&&s=="container"?(c.type="fit",c.contains="padding"):i=="container"?(c.type="fit-x",c.contains="padding"):s=="container"&&(c.type="fit-y",c.contains="padding"):(i=="container"&&(be(U6("width")),i=void 0),s=="container"&&(be(U6("height")),s=void 0));const d=Object.assign(Object.assign(Object.assign({type:"pad"},c),n?gj(n.autosize):{}),gj(t.autosize));if(d.type==="fit"&&!o&&(be(qke),d.type="pad"),i=="container"&&!(d.type=="fit"||d.type=="fit-x")&&be(z6("width")),s=="container"&&!(d.type=="fit"||d.type=="fit-y")&&be(z6("height")),!mo(d,{type:"pad"}))return d}function HOe(t){return t==="fit"||t==="fit-x"||t==="fit-y"}function WOe(t){return t?`fit-${sS(t)}`:"fit"}const YOe=["background","padding"];function _j(t,e){const n={};for(const i of YOe)t&&t[i]!==void 0&&(n[i]=rr(t[i]));return e&&(n.params=t.params),n}class sc{constructor(e={},n={}){this.explicit=e,this.implicit=n}clone(){return new sc(dt(this.explicit),dt(this.implicit))}combine(){return Object.assign(Object.assign({},this.explicit),this.implicit)}get(e){return zn(this.explicit[e],this.implicit[e])}getWithExplicit(e){return this.explicit[e]!==void 0?{explicit:!0,value:this.explicit[e]}:this.implicit[e]!==void 0?{explicit:!1,value:this.implicit[e]}:{explicit:!1,value:void 0}}setWithExplicit(e,{value:n,explicit:i}){n!==void 0&&this.set(e,n,i)}set(e,n,i){return delete this[i?"implicit":"explicit"][e],this[i?"explicit":"implicit"][e]=n,this}copyKeyFromSplit(e,{explicit:n,implicit:i}){n[e]!==void 0?this.set(e,n[e],!0):i[e]!==void 0&&this.set(e,i[e],!1)}copyKeyFromObject(e,n){n[e]!==void 0&&this.set(e,n[e],!0)}copyAll(e){for(const n of we(e.combine())){const i=e.getWithExplicit(n);this.setWithExplicit(n,i)}}}function Ka(t){return{explicit:!0,value:t}}function Js(t){return{explicit:!1,value:t}}function GK(t){return(e,n,i,s)=>{const o=t(e.value,n.value);return o>0?e:o<0?n:vS(e,n,i,s)}}function vS(t,e,n,i){return t.explicit&&e.explicit&&be(OIe(n,i,t.value,e.value)),t}function pd(t,e,n,i,s=vS){return t===void 0||t.value===void 0?e:t.explicit&&!e.explicit?t:e.explicit&&!t.explicit?e:mo(t.value,e.value)?t:s(t,e,n,i)}class XOe extends sc{constructor(e={},n={},i=!1){super(e,n),this.explicit=e,this.implicit=n,this.parseNothing=i}clone(){const e=super.clone();return e.parseNothing=this.parseNothing,e}}function Up(t){return"url"in t}function Oy(t){return"values"in t}function VK(t){return"name"in t&&!Up(t)&&!Oy(t)&&!qc(t)}function qc(t){return t&&(HK(t)||WK(t)||u3(t))}function HK(t){return"sequence"in t}function WK(t){return"sphere"in t}function u3(t){return"graticule"in t}var gn;(function(t){t[t.Raw=0]="Raw",t[t.Main=1]="Main",t[t.Row=2]="Row",t[t.Column=3]="Column",t[t.Lookup=4]="Lookup"})(gn||(gn={}));var KOe=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};function hu(t,e=!0,n=Hi){if(he(t)){const i=t.map(s=>hu(s,e,n));return e?`[${i.join(", ")}]`:i}else if(Uu(t))return n(e?Fy(t):tFe(t));return e?n(_n(t)):t}function JOe(t,e){var n;for(const i of Gi((n=t.component.selection)!==null&&n!==void 0?n:{})){const s=i.name;let o=`${s}${yd}, ${i.resolve==="global"?"true":`{unit: ${zp(t)}}`}`;for(const c of SS)!c.defined(i)||(c.signals&&(e=c.signals(t,i,e)),c.modifyExpr&&(o=c.modifyExpr(t,i,o)));e.push({name:s+OMe,on:[{events:{signal:i.name+yd},update:`modify(${Se(i.name+pu)}, ${o})`}]})}return h3(e)}function QOe(t,e){if(t.component.selection&&we(t.component.selection).length){const n=Se(t.getName("cell"));e.unshift({name:"facet",value:{},on:[{events:Ad("mousemove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return h3(e)}function ZOe(t,e){var n;let i=!1;for(const s of Gi((n=t.component.selection)!==null&&n!==void 0?n:{})){const o=s.name,c=Se(o+pu);if(e.filter(f=>f.name===o).length===0){const f=s.resolve==="global"?"union":s.resolve,u=s.type==="point"?", true, true)":")";e.push({name:s.name,update:`${cJ}(${c}, ${Se(f)}${u}`})}i=!0;for(const f of SS)f.defined(s)&&f.topLevelSignals&&(e=f.topLevelSignals(t,s,e))}return i&&e.filter(o=>o.name==="unit").length===0&&e.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]}),h3(e)}function eMe(t,e){var n;const i=[...e],s=zp(t,{escape:!1});for(const o of Gi((n=t.component.selection)!==null&&n!==void 0?n:{})){const c={name:o.name+pu};if(o.project.hasSelectionId&&(c.transform=[{type:"collect",sort:{field:qo}}]),o.init){const f=o.project.items.map(u=>KOe(u,["signals"]));c.values=o.project.hasSelectionId?o.init.map(u=>({unit:s,[qo]:hu(u,!1)[0]})):o.init.map(u=>({unit:s,fields:f,values:hu(u,!1)}))}i.filter(f=>f.name===o.name+pu).length||i.push(c)}return i}function YK(t,e){var n;for(const i of Gi((n=t.component.selection)!==null&&n!==void 0?n:{}))for(const s of SS)s.defined(i)&&s.marks&&(e=s.marks(t,i,e));return e}function tMe(t,e){for(const n of t.children)Dn(n)&&(e=YK(n,e));return e}function nMe(t,e,n,i){const s=pJ(t,e.param,e);return{signal:pr(n.get("type"))&&he(i)&&i[0]>i[1]?`isValid(${s}) && reverse(${s})`:s}}function h3(t){return t.map(e=>(e.on&&!e.on.length&&delete e.on,e))}class dn{constructor(e,n){this.debugName=n,this._children=[],this._parent=null,e&&(this.parent=e)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(e){this._parent=e,e&&e.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(e,n){if(this._children.includes(e)){be(nIe);return}n!==void 0?this._children.splice(n,0,e):this._children.push(e)}removeChild(e){const n=this._children.indexOf(e);return this._children.splice(n,1),n}remove(){let e=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,e++)}insertAsParentOf(e){const n=e.parent;n.removeChild(this),this.parent=n,e.parent=this}swapWithParent(){const e=this._parent,n=e.parent;for(const s of this._children)s.parent=e;this._children=[],e.removeChild(this);const i=e.parent.removeChild(e);this._parent=n,n.addChild(this,i),e.parent=this}}class ds extends dn{constructor(e,n,i,s){super(e,n),this.type=i,this.refCounts=s,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}clone(){const e=new this.constructor;return e.debugName=`clone_${this.debugName}`,e._source=this._source,e._name=`clone_${this._name}`,e.type=this.type,e.refCounts=this.refCounts,e.refCounts[e._name]=0,e}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${YY()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(e){this._source=e}}var yj=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};class ko extends dn{constructor(e,n){super(e),this.formula=n}clone(){return new ko(null,dt(this.formula))}static makeFromEncoding(e,n){const i=n.reduceFieldDef((s,o)=>{const{field:c,timeUnit:d}=o;if(d){const f=xe(o,{forAs:!0});s[Lt({as:f,field:c,timeUnit:d})]={as:f,field:c,timeUnit:d}}return s},{});return on(i)?null:new ko(e,i)}static makeFromTransform(e,n){const i=Object.assign({},n),{timeUnit:s}=i,o=yj(i,["timeUnit"]),c=Yi(s),d=Object.assign(Object.assign({},o),{timeUnit:c});return new ko(e,{[Lt(d)]:d})}merge(e){this.formula=Object.assign({},this.formula);for(const n in e.formula)this.formula[n]||(this.formula[n]=e.formula[n]);for(const n of e.children)e.removeChild(n),n.parent=this;e.remove()}removeFormulas(e){const n={};for(const[i,s]of ud(this.formula))e.has(s.as)||(n[i]=s);this.formula=n}producedFields(){return new Set(Gi(this.formula).map(e=>e.as))}dependentFields(){return new Set(Gi(this.formula).map(e=>e.field))}hash(){return`TimeUnit ${Lt(this.formula)}`}assemble(){const e=[];for(const n of Gi(this.formula)){const{field:i,as:s,timeUnit:o}=n,c=Yi(o),{unit:d,utc:f}=c,u=yj(c,["unit","utc"]);e.push(Object.assign(Object.assign(Object.assign(Object.assign({field:qr(i),type:"timeunit"},d?{units:OC(d)}:{}),f?{timezone:"utc"}:{}),u),{as:[s,`${s}_end`]}))}return e}}var iMe=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};const Hm="_tuple_fields";class sMe{constructor(...e){this.items=e,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const rMe={defined:()=>!0,parse:(t,e,n)=>{var i;const s=e.name,o=(i=e.project)!==null&&i!==void 0?i:e.project=new sMe,c={},d={},f=new Set,u=(T,b)=>{const S=b==="visual"?T.channel:T.field;let x=Sn(`${s}_${S}`);for(let B=1;f.has(x);B++)x=Sn(`${s}_${S}_${B}`);return f.add(x),{[b]:x}},a=e.type,_=t.config.selection[a],w=n.value!==void 0?Ie(n.value):null;let{fields:m,encodings:l}=Fe(n.select)?n.select:{};if(!m&&!l&&w){for(const T of w)if(!!Fe(T))for(const b of we(T))yke(b)?(l||(l=[])).push(b):a==="interval"?(be(Qke),l=_.encodings):(m||(m=[])).push(b)}!m&&!l&&(l=_.encodings,"fields"in _&&(m=_.fields));for(const T of l!=null?l:[]){const b=t.fieldDef(T);if(b){let S=b.field;if(b.aggregate){be(Gke(T,b.aggregate));continue}else if(!S){be(q6(T));continue}if(b.timeUnit){S=t.vgField(T);const x={timeUnit:b.timeUnit,as:S,field:b.field};d[Lt(x)]=x}if(!c[S]){let x="E";if(a==="interval"){const F=t.getScaleComponent(T).get("type");pr(F)&&(x="R")}else b.bin&&(x="R-RE");const B={field:S,channel:T,type:x};B.signals=Object.assign(Object.assign({},u(B,"data")),u(B,"visual")),o.items.push(c[S]=B),o.hasField[S]=o.hasChannel[T]=c[S],o.hasSelectionId=o.hasSelectionId||S===qo}}else be(q6(T))}for(const T of m!=null?m:[]){if(o.hasField[T])continue;const b={type:"E",field:T};b.signals=Object.assign({},u(b,"data")),o.items.push(b),o.hasField[T]=b,o.hasSelectionId=o.hasSelectionId||T===qo}w&&(e.init=w.map(T=>o.items.map(b=>Fe(T)?T[b.channel]!==void 0?T[b.channel]:T[b.field]:T))),on(d)||(o.timeUnit=new ko(null,d))},signals:(t,e,n)=>{const i=e.name+Hm;return n.filter(o=>o.name===i).length>0||e.project.hasSelectionId?n:n.concat({name:i,value:e.project.items.map(o=>{const c=iMe(o,["signals","hasLegend"]);return c.field=qr(c.field),c})})}},gd={defined:t=>t.type==="interval"&&t.resolve==="global"&&t.bind&&t.bind==="scales",parse:(t,e)=>{const n=e.scales=[];for(const i of e.project.items){const s=i.channel;if(!Dd(s))continue;const o=t.getScaleComponent(s),c=o?o.get("type"):void 0;if(!o||!pr(c)){be(Wke);continue}o.set("selectionExtent",{param:e.name,field:i.field},!0),n.push(i)}},topLevelSignals:(t,e,n)=>{const i=e.scales.filter(c=>n.filter(d=>d.name===c.signals.data).length===0);if(!t.parent||aF(t)||i.length===0)return n;const s=n.filter(c=>c.name===e.name)[0];let o=s.update;if(o.indexOf(cJ)>=0)s.update=`{${i.map(c=>`${Se(qr(c.field))}: ${c.signals.data}`).join(", ")}}`;else{for(const c of i){const d=`${Se(qr(c.field))}: ${c.signals.data}`;o.includes(d)||(o=`${o.substring(0,o.length-1)}, ${d}}`)}s.update=o}return n.concat(i.map(c=>({name:c.signals.data})))},signals:(t,e,n)=>{if(t.parent&&!aF(t))for(const i of e.scales){const s=n.filter(o=>o.name===i.signals.data)[0];s.push="outer",delete s.value,delete s.update}return n}};function rF(t,e){return`domain(${Se(t.scaleName(e))})`}function aF(t){var e;return t.parent&&bg(t.parent)&&((e=!t.parent.parent)!==null&&e!==void 0?e:aF(t.parent.parent))}var aMe=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};const Vh="_brush",oF="_scale_trigger",oMe={defined:t=>t.type==="interval",signals:(t,e,n)=>{const i=e.name,s=i+Hm,o=gd.defined(e),c=e.init?e.init[0]:null,d=[],f=[];if(e.translate&&!o){const a=`!event.item || event.item.mark.name !== ${Se(i+Vh)}`;XK(e,(_,w)=>{var m,l;const T=Ie((m=(l=w.between[0]).filter)!==null&&m!==void 0?m:l.filter=[]);return T.includes(a)||T.push(a),_})}e.project.items.forEach((a,_)=>{const w=a.channel;if(w!==Fn&&w!==gi){be("Interval selections only support x and y encoding channels.");return}const m=c?c[_]:null,l=lMe(t,e,a,m),T=a.signals.data,b=a.signals.visual,S=Se(t.scaleName(w)),x=t.getScaleComponent(w).get("type"),B=pr(x)?"+":"";n.push(...l),d.push(T),f.push({scaleName:t.scaleName(w),expr:`(!isArray(${T}) || (${B}invert(${S}, ${b})[0] === ${B}${T}[0] && ${B}invert(${S}, ${b})[1] === ${B}${T}[1]))`})}),!o&&f.length&&n.push({name:i+oF,value:{},on:[{events:f.map(a=>({scale:a.scaleName})),update:`${f.map(a=>a.expr).join(" && ")} ? ${i+oF} : {}`}]});const u=`unit: ${zp(t)}, fields: ${s}, values`;return n.concat(Object.assign(Object.assign({name:i+yd},c?{init:`{${u}: ${hu(c)}}`}:{}),d.length?{on:[{events:[{signal:d.join(" || ")}],update:`${d.join(" && ")} ? {${u}: [${d}]} : null`}]}:{}))},marks:(t,e,n)=>{const i=e.name,{x:s,y:o}=e.project.hasChannel,c=s==null?void 0:s.signals.visual,d=o==null?void 0:o.signals.visual,f=`data(${Se(e.name+pu)})`;if(gd.defined(e)||!s&&!o)return n;const u={x:s!==void 0?{signal:`${c}[0]`}:{value:0},y:o!==void 0?{signal:`${d}[0]`}:{value:0},x2:s!==void 0?{signal:`${c}[1]`}:{field:{group:"width"}},y2:o!==void 0?{signal:`${d}[1]`}:{field:{group:"height"}}};if(e.resolve==="global")for(const b of we(u))u[b]=[Object.assign({test:`${f}.length && ${f}[0].unit === ${zp(t)}`},u[b]),{value:0}];const a=e.mark,{fill:_,fillOpacity:w,cursor:m}=a,l=aMe(a,["fill","fillOpacity","cursor"]),T=we(l).reduce((b,S)=>(b[S]=[{test:[s!==void 0&&`${c}[0] !== ${c}[1]`,o!==void 0&&`${d}[0] !== ${d}[1]`].filter(x=>x).join(" && "),value:l[S]},{value:null}],b),{});return[{name:`${i+Vh}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:_},fillOpacity:{value:w}},update:u}},...n,{name:i+Vh,type:"rect",clip:!0,encode:{enter:Object.assign(Object.assign({},m?{cursor:{value:m}}:{}),{fill:{value:"transparent"}}),update:Object.assign(Object.assign({},u),T)}}]}};function lMe(t,e,n,i){const s=n.channel,o=n.signals.visual,c=n.signals.data,d=gd.defined(e),f=Se(t.scaleName(s)),u=t.getScaleComponent(s),a=u?u.get("type"):void 0,_=T=>`scale(${f}, ${T})`,w=t.getSizeSignalRef(s===Fn?"width":"height").signal,m=`${s}(unit)`,l=XK(e,(T,b)=>[...T,{events:b.between[0],update:`[${m}, ${m}]`},{events:b,update:`[${o}[0], clamp(${m}, 0, ${w})]`}]);return l.push({events:{signal:e.name+oF},update:pr(a)?`[${_(`${c}[0]`)}, ${_(`${c}[1]`)}]`:"[0, 0]"}),d?[{name:c,on:[]}]:[Object.assign(Object.assign({name:o},i?{init:hu(i,!0,_)}:{value:[]}),{on:l}),Object.assign(Object.assign({name:c},i?{init:hu(i)}:{}),{on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${f}, ${o})`}]})]}function XK(t,e){return t.events.reduce((n,i)=>i.between?e(n,i):(be(`${i} is not an ordered event stream for interval selections.`),n),[])}const cMe={defined:t=>t.type==="point",signals:(t,e,n)=>{var i;const s=e.name,o=s+Hm,c=e.project,d="(item().isVoronoi ? datum.datum : datum)",f=Gi((i=t.component.selection)!==null&&i!==void 0?i:{}).reduce((w,m)=>m.type==="interval"?w.concat(m.name+Vh):w,[]).map(w=>`indexof(item().mark.name, '${w}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${f?` && ${f}`:""}`;let a=`unit: ${zp(t)}, `;if(e.project.hasSelectionId)a+=`${qo}: ${d}[${Se(qo)}]`;else{const w=c.items.map(m=>{const l=t.fieldDef(m.channel);return l!=null&&l.bin?`[${d}[${Se(t.vgField(m.channel,{}))}], ${d}[${Se(t.vgField(m.channel,{binSuffix:"end"}))}]]`:`${d}[${Se(m.field)}]`}).join(", ");a+=`fields: ${o}, values: [${w}]`}const _=e.events;return n.concat([{name:s+yd,on:_?[{events:_,update:`${u} ? {${a}} : null`,force:!0}]:[]}])}};function _g(t,e,n,i){const s=pS(e)&&e.condition,o=i(e);if(s){const d=Ie(s).map(f=>{const u=i(f);if(QFe(f)){const{param:a,empty:_}=f,w=hJ(t,{param:a,empty:_});return Object.assign({test:w},u)}else{const a=p1(t,f.test);return Object.assign({test:a},u)}});return{[n]:[...d,...o!==void 0?[o]:[]]}}else return o!==void 0?{[n]:o}:{}}function p3(t,e="text"){const n=t.encoding[e];return _g(t,n,e,i=>ES(i,t.config))}function ES(t,e,n="datum"){if(t){if(Ca(t))return bn(t.value);if(Ze(t)){const{format:i,formatType:s}=o1(t);return WC({fieldOrDatumDef:t,format:i,formatType:s,expr:n,config:e})}}}function KK(t,e={}){const{encoding:n,markDef:i,config:s,stack:o}=t,c=n.tooltip;if(he(c))return{tooltip:mj({tooltip:c},o,s,e)};{const d=e.reactiveGeom?"datum.datum":"datum";return _g(t,c,"tooltip",f=>{const u=ES(f,s,d);if(u)return u;if(f===null)return;let a=tn("tooltip",i,s);if(a===!0&&(a={content:"encoding"}),ke(a))return{value:a};if(Fe(a))return Re(a)?a:a.content==="encoding"?mj(n,o,s,e):{signal:d}})}}function JK(t,e,n,{reactiveGeom:i}={}){const s={},o=i?"datum.datum":"datum",c=[];function d(u,a){const _=Du(a),w=Vr(u)?u:Object.assign(Object.assign({},u),{type:t[_].type}),m=w.title||JC(w,n),l=Ie(m).join(", ");let T;if(_i(a)){const b=a==="x"?"x2":"y2",S=$o(t[b]);if(bi(w.bin)&&S){const x=xe(w,{expr:o}),B=xe(S,{expr:o}),{format:F,formatType:k}=o1(w);T=zm(x,B,F,k,n),s[b]=!0}}if((_i(a)||a===Wr||a===$a)&&e&&e.fieldChannel===a&&e.offset==="normalize"){const{format:b,formatType:S}=o1(w);T=WC({fieldOrDatumDef:w,format:b,formatType:S,expr:o,config:n,normalizeStack:!0}).signal}T!=null||(T=ES(w,n,o).signal),c.push({channel:a,key:l,value:T})}e3(t,(u,a)=>{Te(u)?d(u,a):gS(u)&&d(u.condition,a)});const f={};for(const{channel:u,key:a,value:_}of c)!s[u]&&!f[a]&&(f[a]=_);return f}function mj(t,e,n,{reactiveGeom:i}={}){const s=JK(t,e,n,{reactiveGeom:i}),o=ud(s).map(([c,d])=>`"${c}": ${d}`);return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function dMe(t){const{markDef:e,config:n}=t,i=tn("aria",e,n);return i===!1?{}:Object.assign(Object.assign(Object.assign({},i?{aria:i}:{}),fMe(t)),uMe(t))}function fMe(t){const{mark:e,markDef:n,config:i}=t;if(i.aria===!1)return{};const s=tn("ariaRoleDescription",n,i);return s!=null?{ariaRoleDescription:{value:s}}:e in Uke?{}:{ariaRoleDescription:{value:e}}}function uMe(t){const{encoding:e,markDef:n,config:i,stack:s}=t,o=e.description;if(o)return _g(t,o,"description",f=>ES(f,t.config));const c=tn("description",n,i);if(c!=null)return{description:bn(c)};if(i.aria===!1)return{};const d=JK(e,s,i);if(!on(d))return{description:{signal:ud(d).map(([f,u],a)=>`"${a>0?"; ":""}${f}: " + (${u})`).join(" + ")}}}function li(t,e,n={}){const{markDef:i,encoding:s,config:o}=e,{vgChannel:c}=n;let{defaultRef:d,defaultValue:f}=n;d===void 0&&(f!=null||(f=tn(t,i,o,{vgChannel:c,ignoreVgConfig:!0})),f!==void 0&&(d=bn(f)));const u=s[t];return _g(e,u,c!=null?c:t,a=>HC({channel:t,channelDef:a,markDef:i,config:o,scaleName:e.scaleName(t),scale:e.getScaleComponent(t),stack:null,defaultRef:d}))}function QK(t,e={filled:void 0}){var n,i,s,o;const{markDef:c,encoding:d,config:f}=t,{type:u}=c,a=(n=e.filled)!==null&&n!==void 0?n:tn("filled",c,f),_=Mt(["bar","point","circle","square","geoshape"],u)?"transparent":void 0,w=(s=(i=tn(a===!0?"color":void 0,c,f,{vgChannel:"fill"}))!==null&&i!==void 0?i:f.mark[a===!0&&"color"])!==null&&s!==void 0?s:_,m=(o=tn(a===!1?"color":void 0,c,f,{vgChannel:"stroke"}))!==null&&o!==void 0?o:f.mark[a===!1&&"color"],l=a?"fill":"stroke",T=Object.assign(Object.assign({},w?{fill:bn(w)}:{}),m?{stroke:bn(m)}:{});return c.color&&(a?c.fill:c.stroke)&&be(bX("property",{fill:"fill"in c,stroke:"stroke"in c})),Object.assign(Object.assign(Object.assign(Object.assign({},T),li("color",t,{vgChannel:l,defaultValue:a?w:m})),li("fill",t,{defaultValue:d.fill?w:void 0})),li("stroke",t,{defaultValue:d.stroke?m:void 0}))}function hMe(t){const{encoding:e,mark:n}=t,i=e.order;return!zd(n)&&Ca(i)?_g(t,i,"zindex",s=>bn(s.value)):{}}function My({channel:t,markDef:e,encoding:n={},model:i,bandPosition:s}){const o=`${t}Offset`,c=e[o],d=n[o];if((o==="xOffset"||o==="yOffset")&&d)return{offsetType:"encoding",offset:HC({channel:o,channelDef:d,markDef:e,config:i==null?void 0:i.config,scaleName:i.scaleName(o),scale:i.getScaleComponent(o),stack:null,defaultRef:bn(c),bandPosition:s})};const f=e[o];return f?{offsetType:"visual",offset:f}:{}}function Di(t,e,{defaultPos:n,vgChannel:i}){const{encoding:s,markDef:o,config:c,stack:d}=e,f=s[t],u=s[sl(t)],a=e.scaleName(t),_=e.getScaleComponent(t),{offset:w,offsetType:m}=My({channel:t,markDef:o,encoding:s,model:e,bandPosition:.5}),l=g3({model:e,defaultPos:n,channel:t,scaleName:a,scale:_}),T=!f&&_i(t)&&(s.latitude||s.longitude)?{field:e.getName(t)}:pMe({channel:t,channelDef:f,channel2Def:u,markDef:o,config:c,scaleName:a,scale:_,stack:d,offset:w,defaultRef:l,bandPosition:m==="encoding"?0:void 0});return T?{[i||t]:T}:void 0}function pMe(t){const{channel:e,channelDef:n,scaleName:i,stack:s,offset:o,markDef:c}=t;if(Ze(n)&&s&&e===s.fieldChannel){if(Te(n)){let d=n.bandPosition;if(d===void 0&&c.type==="text"&&(e==="radius"||e==="theta")&&(d=.5),d!==void 0)return r1({scaleName:i,fieldOrDatumDef:n,startSuffix:"start",bandPosition:d,offset:o})}return jf(n,i,{suffix:"end"},{offset:o})}return GC(t)}function g3({model:t,defaultPos:e,channel:n,scaleName:i,scale:s}){const{markDef:o,config:c}=t;return()=>{const d=Du(n),f=hd(n),u=tn(n,o,c,{vgChannel:f});if(u!==void 0)return D_(n,u);switch(e){case"zeroOrMin":case"zeroOrMax":if(i){const a=s.get("type");if(!Mt([Ns.LOG,Ns.TIME,Ns.UTC],a)){if(s.domainDefinitelyIncludesZero())return{scale:i,value:0}}}if(e==="zeroOrMin")return d==="y"?{field:{group:"height"}}:{value:0};switch(d){case"radius":return{signal:`min(${t.width.signal},${t.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":{const a=t[Vs(n)];return Object.assign(Object.assign({},a),{mult:.5})}}}}const gMe={left:"x",center:"xc",right:"x2"},_Me={top:"y",middle:"yc",bottom:"y2"};function ZK(t,e,n,i="middle"){if(t==="radius"||t==="theta")return hd(t);const s=t==="x"?"align":"baseline",o=tn(s,e,n);let c;return Re(o)?(be(wIe(s)),c=void 0):c=o,t==="x"?gMe[c||(i==="top"?"left":"center")]:_Me[c||i]}function u1(t,e,{defaultPos:n,defaultPos2:i,range:s}){return s?eJ(t,e,{defaultPos:n,defaultPos2:i}):Di(t,e,{defaultPos:n})}function eJ(t,e,{defaultPos:n,defaultPos2:i}){const{markDef:s,config:o}=e,c=sl(t),d=Vs(t),f=yMe(e,i,c),u=f[d]?ZK(t,s,o):hd(t);return Object.assign(Object.assign({},Di(t,e,{defaultPos:n,vgChannel:u})),f)}function yMe(t,e,n){const{encoding:i,mark:s,markDef:o,stack:c,config:d}=t,f=Du(n),u=Vs(n),a=hd(n),_=i[f],w=t.scaleName(f),m=t.getScaleComponent(f),{offset:l}=n in i||n in o?My({channel:n,markDef:o,encoding:i,model:t}):My({channel:f,markDef:o,encoding:i,model:t});if(!_&&(n==="x2"||n==="y2")&&(i.latitude||i.longitude)){const b=Vs(n),S=t.markDef[b];return S!=null?{[b]:{value:S}}:{[a]:{field:t.getName(n)}}}const T=mMe({channel:n,channelDef:_,channel2Def:i[n],markDef:o,config:d,scaleName:w,scale:m,stack:c,offset:l,defaultRef:void 0});return T!==void 0?{[a]:T}:Wb(n,o)||Wb(n,{[n]:n1(n,o,d.style),[u]:n1(u,o,d.style)})||Wb(n,d[s])||Wb(n,d.mark)||{[a]:g3({model:t,defaultPos:e,channel:n,scaleName:w,scale:m})()}}function mMe({channel:t,channelDef:e,channel2Def:n,markDef:i,config:s,scaleName:o,scale:c,stack:d,offset:f,defaultRef:u}){return Ze(e)&&d&&t.charAt(0)===d.fieldChannel.charAt(0)?jf(e,o,{suffix:"start"},{offset:f}):GC({channel:t,channelDef:n,scaleName:o,scale:c,stack:d,markDef:i,config:s,offset:f,defaultRef:u})}function Wb(t,e){const n=Vs(t),i=hd(t);if(e[i]!==void 0)return{[i]:D_(t,e[i])};if(e[t]!==void 0)return{[i]:D_(t,e[t])};if(e[n]){const s=e[n];if(fu(s))be(uIe(n));else return{[n]:D_(t,s)}}}function _d(t,e){var n,i;const{config:s,encoding:o,markDef:c}=t,d=c.type,f=sl(e),u=Vs(e),a=o[e],_=o[f],w=t.getScaleComponent(e),m=w?w.get("type"):void 0,l=c.orient,T=(i=(n=o[u])!==null&&n!==void 0?n:o.size)!==null&&i!==void 0?i:tn("size",c,s,{vgChannel:u}),b=d==="bar"&&(e==="x"?l==="vertical":l==="horizontal");return Te(a)&&(yn(a.bin)||bi(a.bin)||a.timeUnit&&!_)&&!(T&&!fu(T))&&!yi(m)?TMe({fieldDef:a,fieldDef2:_,channel:e,model:t}):(Ze(a)&&yi(m)||b)&&!_?bMe(a,e,t):eJ(e,t,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function wMe(t,e,n,i,s){if(fu(s))if(n){const c=n.get("type");if(c==="band"){let d=`bandwidth('${e}')`;return s.band!==1&&(d=`${s.band} * ${d}`),{signal:`max(0.25, ${d})`}}else s.band!==1&&(be(EIe(c)),s=void 0)}else return{mult:s.band,field:{group:t}};else{if(Re(s))return s;if(s)return{value:s}}if(n){const c=n.get("range");if(Ud(c)&&ln(c.step))return{value:c.step-2}}return{value:d1(i.view,t)-2}}function bMe(t,e,n){const{markDef:i,encoding:s,config:o,stack:c}=n,d=i.orient,f=n.scaleName(e),u=n.getScaleComponent(e),a=Vs(e),_=sl(e),w=wke(e),m=n.scaleName(w),l=d==="horizontal"&&e==="y"||d==="vertical"&&e==="x";let T;(s.size||i.size)&&(l?T=li("size",n,{vgChannel:a,defaultRef:bn(i.size)}):be(kIe(i.type)));const b=!!T,S=ZX({channel:e,fieldDef:t,markDef:i,config:o,scaleType:u==null?void 0:u.get("type"),useVlSizeChannel:l});T=T||{[a]:wMe(a,m||f,u,o,S)};const x=(u==null?void 0:u.get("type"))==="band"&&fu(S)&&!b?"top":"middle",B=ZK(e,i,o,x),F=B==="xc"||B==="yc",{offset:k,offsetType:A}=My({channel:e,markDef:i,encoding:s,model:n,bandPosition:F?.5:0}),M=GC({channel:e,channelDef:t,markDef:i,config:o,scaleName:f,scale:u,stack:c,offset:k,defaultRef:g3({model:n,defaultPos:"mid",channel:e,scaleName:f,scale:u}),bandPosition:F?A==="encoding"?0:.5:Re(S)?{signal:`(1-${S})/2`}:fu(S)?(1-S.band)/2:0});if(a)return Object.assign({[B]:M},T);{const R=hd(_),P=T[a],j=k?Object.assign(Object.assign({},P),{offset:k}):P;return{[B]:M,[R]:he(M)?[M[0],Object.assign(Object.assign({},M[1]),{offset:j})]:Object.assign(Object.assign({},M),{offset:j})}}}function Vg(t,e,n,i,s){if(QY(t))return 0;const o=t==="x"||t==="y2"?-e/2:e/2;if(Re(n)||Re(s)||Re(i)){const c=Ll(n),d=Ll(s),f=Ll(i),u=f?`${f} + `:"",a=c?`(${c} ? -1 : 1) * `:"",_=d?`(${d} + ${o})`:o;return{signal:u+a+_}}else return s=s||0,i+(n?-s-o:+s+o)}function TMe({fieldDef:t,fieldDef2:e,channel:n,model:i}){var s,o,c;const{config:d,markDef:f,encoding:u}=i,a=i.getScaleComponent(n),_=i.scaleName(n),w=a?a.get("type"):void 0,m=a.get("reverse"),l=ZX({channel:n,fieldDef:t,markDef:f,config:d,scaleType:w}),T=(s=i.component.axes[n])===null||s===void 0?void 0:s[0],b=(o=T==null?void 0:T.get("translate"))!==null&&o!==void 0?o:.5,S=_i(n)&&(c=tn("binSpacing",f,d))!==null&&c!==void 0?c:0,x=sl(n),B=hd(n),F=hd(x),{offset:k}=My({channel:n,markDef:f,encoding:u,model:i,bandPosition:0}),A=Re(l)?{signal:`(1-${l.signal})/2`}:fu(l)?(1-l.band)/2:.5;if(yn(t.bin)||t.timeUnit)return{[F]:wj({fieldDef:t,scaleName:_,bandPosition:A,offset:Vg(x,S,m,b,k)}),[B]:wj({fieldDef:t,scaleName:_,bandPosition:Re(A)?{signal:`1-${A.signal}`}:1-A,offset:Vg(n,S,m,b,k)})};if(bi(t.bin)){const M=jf(t,_,{},{offset:Vg(x,S,m,b,k)});if(Te(e))return{[F]:M,[B]:jf(e,_,{},{offset:Vg(n,S,m,b,k)})};if(ju(t.bin)&&t.bin.step)return{[F]:M,[B]:{signal:`scale("${_}", ${xe(t,{expr:"datum"})} + ${t.bin.step})`,offset:Vg(n,S,m,b,k)}}}be(EX(x))}function wj({fieldDef:t,scaleName:e,bandPosition:n,offset:i}){return r1({scaleName:e,fieldOrDatumDef:t,bandPosition:n,offset:i})}const vMe=new Set(["aria","width","height"]);function Yr(t,e){const{fill:n=void 0,stroke:i=void 0}=e.color==="include"?QK(t):{};return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},EMe(t.markDef,e)),bj(t,"fill",n)),bj(t,"stroke",i)),li("opacity",t)),li("fillOpacity",t)),li("strokeOpacity",t)),li("strokeWidth",t)),li("strokeDash",t)),hMe(t)),KK(t)),p3(t,"href")),dMe(t))}function bj(t,e,n){const{config:i,mark:s,markDef:o}=t;if(tn("invalid",o,i)==="hide"&&n&&!zd(s)){const d=SMe(t,{invalid:!0,channels:rS});if(d)return{[e]:[{test:d,value:null},...Ie(n)]}}return n?{[e]:n}:{}}function EMe(t,e){return jke.reduce((n,i)=>(!vMe.has(i)&&t[i]!==void 0&&e[i]!=="ignore"&&(n[i]=bn(t[i])),n),{})}function SMe(t,{invalid:e=!1,channels:n}){const i=n.reduce((o,c)=>{const d=t.getScaleComponent(c);if(d){const f=d.get("type"),u=t.vgField(c,{expr:"datum"});u&&pr(f)&&(o[u]=!0)}return o},{}),s=we(i);if(s.length>0){const o=e?"||":"&&";return s.map(c=>VC(c,e)).join(` ${o} `)}}function _3(t){const{config:e,markDef:n}=t;if(tn("invalid",n,e)){const s=xMe(t,{channels:rl});if(s)return{defined:{signal:s}}}return{}}function xMe(t,{invalid:e=!1,channels:n}){const i=n.reduce((o,c)=>{var d;const f=t.getScaleComponent(c);if(f){const u=f.get("type"),a=t.vgField(c,{expr:"datum",binSuffix:!((d=t.stack)===null||d===void 0)&&d.impute?"mid":void 0});a&&pr(u)&&(o[a]=!0)}return o},{}),s=we(i);if(s.length>0){const o=e?"||":"&&";return s.map(c=>VC(c,e)).join(` ${o} `)}}function Tj(t,e){if(e!==void 0)return{[t]:bn(e)}}const _B="voronoi",tJ={defined:t=>t.type==="point"&&t.nearest,parse:(t,e)=>{if(e.events)for(const n of e.events)n.markname=t.getName(_B)},marks:(t,e,n)=>{const{x:i,y:s}=e.project.hasChannel,o=t.mark;if(zd(o))return be(Vke(o)),n;const c={name:t.getName(_B),type:"path",interactive:!0,from:{data:t.getName("marks")},encode:{update:Object.assign({fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}},KK(t,{reactiveGeom:!0}))},transform:[{type:"voronoi",x:{expr:i||!s?"datum.datum.x || 0":"0"},y:{expr:s||!i?"datum.datum.y || 0":"0"},size:[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")]}]};let d=0,f=!1;return n.forEach((u,a)=>{var _;const w=(_=u.name)!==null&&_!==void 0?_:"";w===t.component.mark[0].name?d=a:w.indexOf(_B)>=0&&(f=!0)}),f||n.splice(d+1,0,c),n}},nJ={defined:t=>t.type==="point"&&t.resolve==="global"&&t.bind&&t.bind!=="scales"&&!a3(t.bind),parse:(t,e,n)=>dJ(e,n),topLevelSignals:(t,e,n)=>{const i=e.name,s=e.project,o=e.bind,c=e.init&&e.init[0],d=tJ.defined(e)?"(item().isVoronoi ? datum.datum : datum)":"datum";return s.items.forEach((f,u)=>{var a,_;const w=Sn(`${i}_${f.field}`);n.filter(l=>l.name===w).length||n.unshift(Object.assign(Object.assign({name:w},c?{init:hu(c[u])}:{value:null}),{on:e.events?[{events:e.events,update:`datum && item().mark.marktype !== 'group' ? ${d}[${Se(f.field)}] : null`}]:[],bind:(_=(a=o[f.field])!==null&&a!==void 0?a:o[f.channel])!==null&&_!==void 0?_:o}))}),n},signals:(t,e,n)=>{const i=e.name,s=e.project,o=n.filter(u=>u.name===i+yd)[0],c=i+Hm,d=s.items.map(u=>Sn(`${i}_${u.field}`)),f=d.map(u=>`${u} !== null`).join(" && ");return d.length&&(o.update=`${f} ? {fields: ${c}, values: [${d.join(", ")}]} : null`),delete o.value,delete o.on,n}},h1="_toggle",iJ={defined:t=>t.type==="point"&&!!t.toggle,signals:(t,e,n)=>n.concat({name:e.name+h1,value:!1,on:[{events:e.events,update:e.toggle}]}),modifyExpr:(t,e)=>{const n=e.name+yd,i=e.name+h1;return`${i} ? null : ${n}, `+(e.resolve==="global"?`${i} ? null : true, `:`${i} ? null : {unit: ${zp(t)}}, `)+`${i} ? ${n} : null`}},BMe={defined:t=>t.clear!==void 0&&t.clear!==!1,parse:(t,e)=>{e.clear&&(e.clear=ke(e.clear)?Ad(e.clear,"view"):e.clear)},topLevelSignals:(t,e,n)=>{if(nJ.defined(e))for(const i of e.project.items){const s=n.findIndex(o=>o.name===Sn(`${e.name}_${i.field}`));s!==-1&&n[s].on.push({events:e.clear,update:"null"})}return n},signals:(t,e,n)=>{function i(s,o){s!==-1&&n[s].on&&n[s].on.push({events:e.clear,update:o})}if(e.type==="interval")for(const s of e.project.items){const o=n.findIndex(c=>c.name===s.signals.visual);if(i(o,"[0, 0]"),o===-1){const c=n.findIndex(d=>d.name===s.signals.data);i(c,"null")}}else{let s=n.findIndex(o=>o.name===e.name+yd);i(s,"null"),iJ.defined(e)&&(s=n.findIndex(o=>o.name===e.name+h1),i(s,"false"))}return n}},sJ={defined:t=>{const e=t.resolve==="global"&&t.bind&&a3(t.bind),n=t.project.items.length===1&&t.project.items[0].field!==qo;return e&&!n&&be(Yke),e&&n},parse:(t,e,n)=>{var i;const s=dt(n);if(s.select=ke(s.select)?{type:s.select,toggle:e.toggle}:Object.assign(Object.assign({},s.select),{toggle:e.toggle}),dJ(e,s),Fe(n.select)&&(n.select.on||n.select.clear)){const d='event.item && indexof(event.item.mark.role, "legend") < 0';for(const f of e.events)f.filter=Ie((i=f.filter)!==null&&i!==void 0?i:[]),f.filter.includes(d)||f.filter.push(d)}const o=hB(e.bind)?e.bind.legend:"click",c=ke(o)?Ad(o,"view"):Ie(o);e.bind={legend:{merge:c}}},topLevelSignals:(t,e,n)=>{const i=e.name,s=hB(e.bind)&&e.bind.legend,o=c=>d=>{const f=dt(d);return f.markname=c,f};for(const c of e.project.items){if(!c.hasLegend)continue;const d=`${Sn(c.field)}_legend`,f=`${i}_${d}`;if(n.filter(a=>a.name===f).length===0){const a=s.merge.map(o(`${d}_symbols`)).concat(s.merge.map(o(`${d}_labels`))).concat(s.merge.map(o(`${d}_entries`)));n.unshift(Object.assign(Object.assign({name:f},e.init?{}:{value:null}),{on:[{events:a,update:"datum.value || item().items[0].items[0].datum.value",force:!0},{events:s.merge,update:`!event.item || !datum ? null : ${f}`,force:!0}]}))}}return n},signals:(t,e,n)=>{const i=e.name,s=e.project,o=n.find(w=>w.name===i+yd),c=i+Hm,d=s.items.filter(w=>w.hasLegend).map(w=>Sn(`${i}_${Sn(w.field)}_legend`)),u=`${d.map(w=>`${w} !== null`).join(" && ")} ? {fields: ${c}, values: [${d.join(", ")}]} : null`;e.events&&d.length>0?o.on.push({events:d.map(w=>({signal:w})),update:u}):d.length>0&&(o.update=u,delete o.value,delete o.on);const a=n.find(w=>w.name===i+h1),_=hB(e.bind)&&e.bind.legend;return a&&(e.events?a.on.push(Object.assign(Object.assign({},a.on[0]),{events:_})):a.on[0].events=_),n}};function kMe(t,e,n){var i,s,o,c;const d=(i=t.fieldDef(e))===null||i===void 0?void 0:i.field;for(const f of Gi((s=t.component.selection)!==null&&s!==void 0?s:{})){const u=(o=f.project.hasField[d])!==null&&o!==void 0?o:f.project.hasChannel[e];if(u&&sJ.defined(f)){const a=(c=n.get("selections"))!==null&&c!==void 0?c:[];a.push(f.name),n.set("selections",a,!1),u.hasLegend=!0}}}const rJ="_translate_anchor",aJ="_translate_delta",IMe={defined:t=>t.type==="interval"&&t.translate,signals:(t,e,n)=>{const i=e.name,s=gd.defined(e),o=i+rJ,{x:c,y:d}=e.project.hasChannel;let f=Ad(e.translate,"scope");return s||(f=f.map(u=>(u.between[0].markname=i+Vh,u))),n.push({name:o,value:{},on:[{events:f.map(u=>u.between[0]),update:"{x: x(unit), y: y(unit)"+(c!==void 0?`, extent_x: ${s?rF(t,Fn):`slice(${c.signals.visual})`}`:"")+(d!==void 0?`, extent_y: ${s?rF(t,gi):`slice(${d.signals.visual})`}`:"")+"}"}]},{name:i+aJ,value:{},on:[{events:f,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),c!==void 0&&vj(t,e,c,"width",n),d!==void 0&&vj(t,e,d,"height",n),n}};function vj(t,e,n,i,s){var o,c;const d=e.name,f=d+rJ,u=d+aJ,a=n.channel,_=gd.defined(e),w=s.filter(M=>M.name===n.signals[_?"data":"visual"])[0],m=t.getSizeSignalRef(i).signal,l=t.getScaleComponent(a),T=l.get("type"),b=l.get("reverse"),S=_?a===Fn?b?"":"-":b?"-":"":"",x=`${f}.extent_${a}`,B=`${S}${u}.${a} / ${_?`${m}`:`span(${x})`}`,F=_?T==="log"?"panLog":T==="symlog"?"panSymlog":T==="pow"?"panPow":"panLinear":"panLinear",k=_?T==="pow"?`, ${(o=l.get("exponent"))!==null&&o!==void 0?o:1}`:T==="symlog"?`, ${(c=l.get("constant"))!==null&&c!==void 0?c:1}`:"":"",A=`${F}(${x}, ${B}${k})`;w.on.push({events:{signal:u},update:_?A:`clampRange(${A}, 0, ${m})`})}const oJ="_zoom_anchor",lJ="_zoom_delta",FMe={defined:t=>t.type==="interval"&&t.zoom,signals:(t,e,n)=>{const i=e.name,s=gd.defined(e),o=i+lJ,{x:c,y:d}=e.project.hasChannel,f=Se(t.scaleName(Fn)),u=Se(t.scaleName(gi));let a=Ad(e.zoom,"scope");return s||(a=a.map(_=>(_.markname=i+Vh,_))),n.push({name:i+oJ,on:[{events:a,update:s?"{"+[f?`x: invert(${f}, x(unit))`:"",u?`y: invert(${u}, y(unit))`:""].filter(_=>!!_).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:a,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),c!==void 0&&Ej(t,e,c,"width",n),d!==void 0&&Ej(t,e,d,"height",n),n}};function Ej(t,e,n,i,s){var o,c;const d=e.name,f=n.channel,u=gd.defined(e),a=s.filter(F=>F.name===n.signals[u?"data":"visual"])[0],_=t.getSizeSignalRef(i).signal,w=t.getScaleComponent(f),m=w.get("type"),l=u?rF(t,f):a.name,T=d+lJ,b=`${d}${oJ}.${f}`,S=u?m==="log"?"zoomLog":m==="symlog"?"zoomSymlog":m==="pow"?"zoomPow":"zoomLinear":"zoomLinear",x=u?m==="pow"?`, ${(o=w.get("exponent"))!==null&&o!==void 0?o:1}`:m==="symlog"?`, ${(c=w.get("constant"))!==null&&c!==void 0?c:1}`:"":"",B=`${S}(${l}, ${b}, ${T}${x})`;a.on.push({events:{signal:T},update:u?B:`clampRange(${B}, 0, ${_})`})}const pu="_store",yd="_tuple",OMe="_modify",cJ="vlSelectionResolve",SS=[cMe,oMe,rMe,iJ,nJ,gd,sJ,BMe,IMe,FMe,tJ];function MMe(t){let e=t.parent;for(;e&&!Ba(e);)e=e.parent;return e}function zp(t,{escape:e}={escape:!0}){let n=e?Se(t.name):t.name;const i=MMe(t);if(i){const{facet:s}=i;for(const o of Or)s[o]&&(n+=` + '__facet_${o}_' + (facet[${Se(i.vgField(o))}])`)}return n}function y3(t){var e;return Gi((e=t.component.selection)!==null&&e!==void 0?e:{}).reduce((n,i)=>n||i.project.hasSelectionId,!1)}function dJ(t,e){(ke(e.select)||!e.select.on)&&delete t.events,(ke(e.select)||!e.select.clear)&&delete t.clear,(ke(e.select)||!e.select.toggle)&&delete t.toggle}function lF(t){const e=[];return t.type==="Identifier"?[t.name]:t.type==="Literal"?[t.value]:(t.type==="MemberExpression"&&(e.push(...lF(t.object)),e.push(...lF(t.property))),e)}function fJ(t){return t.object.type==="MemberExpression"?fJ(t.object):t.object.name==="datum"}function uJ(t){const e=CN(t),n=new Set;return e.visit(i=>{i.type==="MemberExpression"&&fJ(i)&&n.add(lF(i).slice(1).join("."))}),n}class yg extends dn{constructor(e,n,i){super(e),this.model=n,this.filter=i,this.expr=p1(this.model,this.filter,this),this._dependentFields=uJ(this.expr)}clone(){return new yg(null,this.model,dt(this.filter))}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function AMe(t,e){var n;const i={},s=t.config.selection;if(!e||!e.length)return i;for(const o of e){const c=Sn(o.name),d=o.select,f=ke(d)?d:d.type,u=Fe(d)?dt(d):{type:f},a=s[f];for(const w in a)w==="fields"||w==="encodings"||(w==="mark"&&(u[w]=Object.assign(Object.assign({},a[w]),u[w])),(u[w]===void 0||u[w]===!0)&&(u[w]=(n=a[w])!==null&&n!==void 0?n:u[w]));const _=i[c]=Object.assign(Object.assign({},u),{name:c,type:f,init:o.value,bind:o.bind,events:ke(u.on)?Ad(u.on,"scope"):Ie(dt(u.on))});for(const w of SS)w.defined(_)&&w.parse&&w.parse(t,_,o)}return i}function hJ(t,e,n,i="datum"){const s=ke(e)?e:e.param,o=Sn(s),c=Se(o+pu);let d;try{d=t.getSelectionComponent(o,s)}catch{return`!!${o}`}if(d.project.timeUnit){const w=n!=null?n:t.component.data.raw,m=d.project.timeUnit.clone();w.parent?m.insertAsParentOf(w):w.parent=m}const f=d.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",u=d.resolve==="global"?")":`, ${Se(d.resolve)})`,a=`${f}${c}, ${i}${u}`,_=`length(data(${c}))`;return e.empty===!1?`${_} && ${a}`:`!${_} || ${a}`}function pJ(t,e,n){const i=Sn(e),s=n.encoding;let o=n.field,c;try{c=t.getSelectionComponent(i,e)}catch{return i}if(!s&&!o)o=c.project.items[0].field,c.project.items.length>1&&be(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Se(o)}.`);else if(s&&!o){const d=c.project.items.filter(f=>f.channel===s);!d.length||d.length>1?(o=c.project.items[0].field,be((d.length?"Multiple ":"No ")+`matching ${Se(s)} encoding found for selection ${Se(n.param)}. Using "field": ${Se(o)}.`)):o=d[0].field}return`${c.name}[${Se(qr(o))}]`}function NMe(t,e){var n;for(const[i,s]of ud((n=t.component.selection)!==null&&n!==void 0?n:{})){const o=t.getName(`lookup_${i}`);t.component.data.outputNodes[o]=s.materialized=new ds(new yg(e,t,{param:i}),o,gn.Lookup,t.component.data.outputNodeRefCounts)}}function p1(t,e,n){return P_(e,i=>ke(i)?i:cFe(i)?hJ(t,i,n):MX(i))}var Yb=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};function CMe(t,e){if(!!t)return he(t)&&!Tc(t)?t.map(n=>JC(n,e)).join(", "):t}function yB(t,e,n,i){var s,o,c,d,f;(s=t.encode)!==null&&s!==void 0||(t.encode={}),(o=(d=t.encode)[e])!==null&&o!==void 0||(d[e]={}),(c=(f=t.encode[e]).update)!==null&&c!==void 0||(f.update={}),t.encode[e].update[n]=i}function b_(t,e,n,i={header:!1}){var s,o;const c=t.combine(),{disable:d,orient:f,scale:u,labelExpr:a,title:_,zindex:w}=c,m=Yb(c,["disable","orient","scale","labelExpr","title","zindex"]);if(!d){for(const l in m){const T=u2e[l],b=m[l];if(T&&T!==e&&T!=="both")delete m[l];else if(Vm(b)){const{condition:S}=b,x=Yb(b,["condition"]),B=Ie(S),F=ej[l];if(F){const{vgProp:k,part:A}=F,M=[...B.map(R=>{const{test:P}=R,j=Yb(R,["test"]);return Object.assign({test:p1(null,P)},j)}),x];yB(m,A,k,M),delete m[l]}else if(F===null){const k={signal:B.map(A=>{const{test:M}=A,R=Yb(A,["test"]);return`${p1(null,M)} ? ${j6(R)} : `}).join("")+j6(x)};m[l]=k}}else if(Re(b)){const S=ej[l];if(S){const{vgProp:x,part:B}=S;yB(m,B,x,b),delete m[l]}}Mt(["labelAlign","labelBaseline"],l)&&m[l]===null&&delete m[l]}if(e==="grid"){if(!m.grid)return;if(m.encode){const{grid:l}=m.encode;m.encode=Object.assign({},l?{grid:l}:{}),on(m.encode)&&delete m.encode}return Object.assign(Object.assign({scale:u,orient:f},m),{domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:zn(w,0)})}else{if(!i.header&&t.mainExtracted)return;if(a!==void 0){let T=a;((o=(s=m.encode)===null||s===void 0?void 0:s.labels)===null||o===void 0?void 0:o.update)&&Re(m.encode.labels.update.text)&&(T=ou(a,"datum.label",m.encode.labels.update.text.signal)),yB(m,"labels","text",{signal:T})}if(m.labelAlign===null&&delete m.labelAlign,m.encode){for(const T of lK)t.hasAxisPart(T)||delete m.encode[T];on(m.encode)&&delete m.encode}const l=CMe(_,n);return Object.assign(Object.assign(Object.assign(Object.assign({scale:u,orient:f,grid:!1},l?{title:l}:{}),m),n.aria===!1?{aria:!1}:{}),{zindex:zn(w,0)})}}}function gJ(t){const{axes:e}=t.component,n=[];for(const i of rl)if(e[i]){for(const s of e[i])if(!s.get("disable")&&!s.get("gridScale")){const o=i==="x"?"height":"width",c=t.getSizeSignalRef(o).signal;o!==c&&n.push({name:o,update:c})}}return n}function RMe(t,e){const{x:n=[],y:i=[]}=t;return[...n.map(s=>b_(s,"grid",e)),...i.map(s=>b_(s,"grid",e)),...n.map(s=>b_(s,"main",e)),...i.map(s=>b_(s,"main",e))].filter(s=>s)}function Sj(t,e,n,i){return Object.assign.apply(null,[{},...t.map(s=>{if(s==="axisOrient"){const o=n==="x"?"bottom":"left",c=e[n==="x"?"axisBottom":"axisLeft"]||{},d=e[n==="x"?"axisTop":"axisRight"]||{},f=new Set([...we(c),...we(d)]),u={};for(const a of f.values())u[a]={signal:`${i.signal} === "${o}" ? ${Ll(c[a])} : ${Ll(d[a])}`};return u}return e[s]})])}function LMe(t,e,n,i){const s=e==="band"?["axisDiscrete","axisBand"]:e==="point"?["axisDiscrete","axisPoint"]:RX(e)?["axisQuantitative"]:e==="time"||e==="utc"?["axisTemporal"]:[],o=t==="x"?"axisX":"axisY",c=Re(n)?"axisOrient":`axis${Cm(n)}`,d=[...s,...s.map(u=>o+u.substr(4))],f=["axis",c,o];return{vlOnlyAxisConfig:Sj(d,i,t,n),vgAxisConfig:Sj(f,i,t,n),axisConfigStyle:PMe([...f,...d],i)}}function PMe(t,e){var n;const i=[{}];for(const s of t){let o=(n=e[s])===null||n===void 0?void 0:n.style;if(o){o=Ie(o);for(const c of o)i.push(e.style[c])}}return Object.assign.apply(null,i)}function cF(t,e,n,i={}){var s;const o=hX(t,n,e);if(o!==void 0)return{configFrom:"style",configValue:o};for(const c of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=i[c])===null||s===void 0?void 0:s[t])!==void 0)return{configFrom:c,configValue:i[c][t]};return{}}const xj={scale:({model:t,channel:e})=>t.scaleName(e),format:({fieldOrDatumDef:t,config:e,axis:n})=>{const{format:i,formatType:s}=n;return WX(t,t.type,i,s,e,!0)},formatType:({axis:t,fieldOrDatumDef:e,scaleType:n})=>{const{formatType:i}=t;return YX(i,e,n)},grid:({fieldOrDatumDef:t,axis:e,scaleType:n})=>{var i;return(i=e.grid)!==null&&i!==void 0?i:DMe(n,t)},gridScale:({model:t,channel:e})=>jMe(t,e),labelAlign:({axis:t,labelAngle:e,orient:n,channel:i})=>t.labelAlign||yJ(e,n,i),labelAngle:({labelAngle:t})=>t,labelBaseline:({axis:t,labelAngle:e,orient:n,channel:i})=>t.labelBaseline||_J(e,n,i),labelFlush:({axis:t,fieldOrDatumDef:e,channel:n})=>{var i;return(i=t.labelFlush)!==null&&i!==void 0?i:zMe(e.type,n)},labelOverlap:({axis:t,fieldOrDatumDef:e,scaleType:n})=>{var i;return(i=t.labelOverlap)!==null&&i!==void 0?i:$Me(e.type,n,Te(e)&&!!e.timeUnit,Te(e)?e.sort:void 0)},orient:({orient:t})=>t,tickCount:({channel:t,model:e,axis:n,fieldOrDatumDef:i,scaleType:s})=>{var o;const c=t==="x"?"width":t==="y"?"height":void 0,d=c?e.getSizeSignalRef(c):void 0;return(o=n.tickCount)!==null&&o!==void 0?o:GMe({fieldOrDatumDef:i,scaleType:s,size:d,values:n.values})},title:({axis:t,model:e,channel:n})=>{if(t.title!==void 0)return t.title;const i=mJ(e,n);if(i!==void 0)return i;const s=e.typedFieldDef(n),o=n==="x"?"x2":"y2",c=e.fieldDef(o);return gX(s?[Z6(s)]:[],Te(c)?[Z6(c)]:[])},values:({axis:t,fieldOrDatumDef:e})=>VMe(t,e),zindex:({axis:t,fieldOrDatumDef:e,mark:n})=>{var i;return(i=t.zindex)!==null&&i!==void 0?i:HMe(n,e)}};function DMe(t,e){return!yi(t)&&Te(e)&&!yn(e==null?void 0:e.bin)&&!bi(e==null?void 0:e.bin)}function jMe(t,e){const n=e==="x"?"y":"x";if(t.getScaleComponent(n))return t.scaleName(n)}function UMe(t,e,n,i,s){const o=e==null?void 0:e.labelAngle;if(o!==void 0)return Re(o)?o:Iy(o);{const{configValue:c}=cF("labelAngle",i,e==null?void 0:e.style,s);return c!==void 0?Iy(c):n===Fn&&Mt([UC,jC],t.type)&&!(Te(t)&&t.timeUnit)?270:void 0}}function dF(t){return`(((${t.signal} % 360) + 360) % 360)`}function _J(t,e,n,i){if(t!==void 0)if(n==="x"){if(Re(t)){const s=dF(t),o=Re(e)?`(${e.signal} === "top")`:e==="top";return{signal:`(45 < ${s} && ${s} < 135) || (225 < ${s} && ${s} < 315) ? "middle" :(${s} <= 45 || 315 <= ${s}) === ${o} ? "bottom" : "top"`}}if(45<t&&t<135||225<t&&t<315)return"middle";if(Re(e)){const s=t<=45||315<=t?"===":"!==";return{signal:`${e.signal} ${s} "top" ? "bottom" : "top"`}}return(t<=45||315<=t)==(e==="top")?"bottom":"top"}else{if(Re(t)){const s=dF(t),o=Re(e)?`(${e.signal} === "left")`:e==="left";return{signal:`${s} <= 45 || 315 <= ${s} || (135 <= ${s} && ${s} <= 225) ? ${i?'"middle"':"null"} : (45 <= ${s} && ${s} <= 135) === ${o} ? "top" : "bottom"`}}if(t<=45||315<=t||135<=t&&t<=225)return i?"middle":null;if(Re(e)){const s=45<=t&&t<=135?"===":"!==";return{signal:`${e.signal} ${s} "left" ? "top" : "bottom"`}}return(45<=t&&t<=135)==(e==="left")?"top":"bottom"}}function yJ(t,e,n){if(t===void 0)return;const i=n==="x",s=i?0:90,o=i?"bottom":"left";if(Re(t)){const c=dF(t),d=Re(e)?`(${e.signal} === "${o}")`:e===o;return{signal:`(${s?`(${c} + 90)`:c} % 180 === 0) ? ${i?null:'"center"'} :(${s} < ${c} && ${c} < ${180+s}) === ${d} ? "left" : "right"`}}if((t+s)%180===0)return i?null:"center";if(Re(e)){const c=s<t&&t<180+s?"===":"!==";return{signal:`${`${e.signal} ${c} "${o}"`} ? "left" : "right"`}}return(s<t&&t<180+s)==(e===o)?"left":"right"}function zMe(t,e){if(e==="x"&&Mt(["quantitative","temporal"],t))return!0}function $Me(t,e,n,i){if(n&&!Fe(i)||t!=="nominal"&&t!=="ordinal")return e==="log"||e==="symlog"?"greedy":!0}function qMe(t){return t==="x"?"bottom":"left"}function GMe({fieldOrDatumDef:t,scaleType:e,size:n,values:i}){var s;if(!i&&!yi(e)&&e!=="log"){if(Te(t)){if(yn(t.bin))return{signal:`ceil(${n.signal}/10)`};if(t.timeUnit&&Mt(["month","hours","day","quarter"],(s=Yi(t.timeUnit))===null||s===void 0?void 0:s.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function mJ(t,e){const n=e==="x"?"x2":"y2",i=t.fieldDef(e),s=t.fieldDef(n),o=i?i.title:void 0,c=s?s.title:void 0;if(o&&c)return _X(o,c);if(o)return o;if(c)return c;if(o!==void 0)return o;if(c!==void 0)return c}function VMe(t,e){const n=t.values;if(he(n))return oK(e,n);if(Re(n))return n}function HMe(t,e){return t==="rect"&&a1(e)?1:0}class $p extends dn{constructor(e,n){super(e),this.transform=n,this._dependentFields=uJ(this.transform.calculate)}clone(){return new $p(null,dt(this.transform))}static parseAllForSortIndex(e,n){return n.forEachFieldDef((i,s)=>{if(!!zu(i)&&JX(i.sort)){const{field:o,timeUnit:c}=i,d=i.sort,f=d.map((u,a)=>`${MX({field:o,timeUnit:c,equal:u})} ? ${a} : `).join("")+d.length;e=new $p(e,{calculate:f,as:qp(i,s,{forAs:!0})})}}),e}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Lt(this.transform)}`}}function qp(t,e,n){return xe(t,Object.assign({prefix:e,suffix:"sort_index"},n!=null?n:{}))}function xS(t,e){return Mt(["top","bottom"],e)?"column":Mt(["left","right"],e)||t==="row"?"row":"column"}function Gp(t,e,n,i){const s=i==="row"?n.headerRow:i==="column"?n.headerColumn:n.headerFacet;return zn((e||{})[t],s[t],n.header[t])}function BS(t,e,n,i){const s={};for(const o of t){const c=Gp(o,e||{},n,i);c!==void 0&&(s[o]=c)}return s}const m3=["row","column"],w3=["header","footer"];function WMe(t,e){const n=t.component.layoutHeaders[e].title,i=t.config?t.config:void 0,s=t.component.layoutHeaders[e].facetFieldDef?t.component.layoutHeaders[e].facetFieldDef:void 0,{titleAnchor:o,titleAngle:c,titleOrient:d}=BS(["titleAnchor","titleAngle","titleOrient"],s.header,i,e),f=xS(e,d),u=Iy(c);return{name:`${e}-title`,type:"group",role:`${f}-title`,title:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:n},e==="row"?{orient:"left"}:{}),{style:"guide-title"}),bJ(u,f)),wJ(f,u,o)),TJ(i,s,e,R2e,xK))}}function wJ(t,e,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const i=yJ(e,t==="row"?"left":"top",t==="row"?"y":"x");return i?{align:i}:{}}function bJ(t,e){const n=_J(t,e==="row"?"left":"top",e==="row"?"y":"x",!0);return n?{baseline:n}:{}}function YMe(t,e){const n=t.component.layoutHeaders[e],i=[];for(const s of w3)if(n[s])for(const o of n[s]){const c=KMe(t,e,s,n,o);c!=null&&i.push(c)}return i}function XMe(t,e){var n;const{sort:i}=t;return Bo(i)?{field:xe(i,{expr:"datum"}),order:(n=i.order)!==null&&n!==void 0?n:"ascending"}:he(i)?{field:qp(t,e,{expr:"datum"}),order:"ascending"}:{field:xe(t,{expr:"datum"}),order:i!=null?i:"ascending"}}function fF(t,e,n){const{format:i,formatType:s,labelAngle:o,labelAnchor:c,labelOrient:d,labelExpr:f}=BS(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],t.header,n,e),u=WC({fieldOrDatumDef:t,format:i,formatType:s,expr:"parent",config:n}).signal,a=xS(e,d);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:{signal:f?ou(ou(f,"datum.label",u),"datum.value",xe(t,{expr:"parent"})):u}},e==="row"?{orient:"left"}:{}),{style:"guide-label",frame:"group"}),bJ(o,a)),wJ(a,o,c)),TJ(n,t,e,L2e,BK))}function KMe(t,e,n,i,s){if(s){let o=null;const{facetFieldDef:c}=i,d=t.config?t.config:void 0;if(c&&s.labels){const{labelOrient:_}=BS(["labelOrient"],c.header,d,e);(e==="row"&&!Mt(["top","bottom"],_)||e==="column"&&!Mt(["left","right"],_))&&(o=fF(c,e,d))}const f=Ba(t)&&!$m(t.facet),u=s.axes,a=(u==null?void 0:u.length)>0;if(o||a){const _=e==="row"?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:t.getName(`${e}_${n}`),type:"group",role:`${e}-${n}`},i.facetFieldDef?{from:{data:t.getName(`${e}_domain`)},sort:XMe(c,e)}:{}),a&&f?{from:{data:t.getName(`facet_domain_${e}`)}}:{}),o?{title:o}:{}),s.sizeSignal?{encode:{update:{[_]:s.sizeSignal}}}:{}),a?{axes:u}:{})}}return null}const JMe={column:{start:0,end:1},row:{start:1,end:0}};function QMe(t,e){return JMe[e][t]}function ZMe(t,e){const n={};for(const i of Or){const s=t[i];if(s!=null&&s.facetFieldDef){const{titleAnchor:o,titleOrient:c}=BS(["titleAnchor","titleOrient"],s.facetFieldDef.header,e,i),d=xS(i,c),f=QMe(o,d);f!==void 0&&(n[d]=f)}}return on(n)?void 0:n}function TJ(t,e,n,i,s){const o={};for(const c of i){if(!s[c])continue;const d=Gp(c,e==null?void 0:e.header,t,n);d!==void 0&&(o[s[c]]=d)}return o}function b3(t){return[...Xb(t,"width"),...Xb(t,"height"),...Xb(t,"childWidth"),...Xb(t,"childHeight")]}function Xb(t,e){const n=e==="width"?"x":"y",i=t.component.layoutSize.get(e);if(!i||i==="merged")return[];const s=t.getSizeSignalRef(e).signal;if(i==="step"){const o=t.getScaleComponent(n);if(o){const c=o.get("type"),d=o.get("range");if(yi(c)&&Ud(d)){const f=t.scaleName(n);return Ba(t.parent)&&t.parent.component.resolve.scale[n]==="independent"?[Bj(f,d)]:[Bj(f,d),{name:s,update:vJ(f,o,`domain('${f}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(i=="container"){const o=s.endsWith("width"),c=o?"containerSize()[0]":"containerSize()[1]",d=tF(t.config.view,o?"width":"height"),f=`isFinite(${c}) ? ${c} : ${d}`;return[{name:s,init:f,on:[{update:f,events:"window:resize"}]}]}else return[{name:s,value:i}]}function Bj(t,e){const n=`${t}_step`;return Re(e.step)?{name:n,update:e.step.signal}:{name:n,value:e.step}}function vJ(t,e,n){const i=e.get("type"),s=e.get("padding"),o=zn(e.get("paddingOuter"),s);let c=e.get("paddingInner");return c=i==="band"?c!==void 0?c:s:1,`bandspace(${n}, ${Ll(c)}, ${Ll(o)}) * ${t}_step`}function EJ(t){return t==="childWidth"?"width":t==="childHeight"?"height":t}function SJ(t,e){return we(t).reduce((n,i)=>{const s=t[i];return Object.assign(Object.assign({},n),_g(e,s,i,o=>bn(o.value)))},{})}function xJ(t,e){if(Ba(e))return t==="theta"?"independent":"shared";if(bg(e))return"shared";if(k3(e))return _i(t)||t==="theta"||t==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function T3(t,e){const n=t.scale[e],i=_i(e)?"axis":"legend";return n==="independent"?(t[i][e]==="shared"&&be(AIe(e)),"independent"):t[i][e]||"shared"}const eAe=Object.assign(Object.assign({},j2e),{disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1}),BJ=we(eAe);class tAe extends sc{}const kj={symbols:nAe,gradient:iAe,labels:sAe,entries:rAe};function nAe(t,{fieldOrDatumDef:e,model:n,channel:i,legendCmpt:s,legendType:o}){var c,d,f,u,a,_,w,m;if(o!=="symbol")return;const{markDef:l,encoding:T,config:b,mark:S}=n,x=l.filled&&S!=="trail";let B=Object.assign(Object.assign({},$ke({},n,RFe)),QK(n,{filled:x}));const F=(c=s.get("symbolOpacity"))!==null&&c!==void 0?c:b.legend.symbolOpacity,k=(d=s.get("symbolFillColor"))!==null&&d!==void 0?d:b.legend.symbolFillColor,A=(f=s.get("symbolStrokeColor"))!==null&&f!==void 0?f:b.legend.symbolStrokeColor,M=F===void 0?(u=kJ(T.opacity))!==null&&u!==void 0?u:l.opacity:void 0;if(B.fill){if(i==="fill"||x&&i===qs)delete B.fill;else if(B.fill.field)k?delete B.fill:(B.fill=bn((a=b.legend.symbolBaseFillColor)!==null&&a!==void 0?a:"black"),B.fillOpacity=bn(M!=null?M:1));else if(he(B.fill)){const R=(m=(w=uF((_=T.fill)!==null&&_!==void 0?_:T.color))!==null&&w!==void 0?w:l.fill)!==null&&m!==void 0?m:x&&l.color;R&&(B.fill=bn(R))}}if(B.stroke){if(i==="stroke"||!x&&i===qs)delete B.stroke;else if(B.stroke.field||A)delete B.stroke;else if(he(B.stroke)){const R=zn(uF(T.stroke||T.color),l.stroke,x?l.color:void 0);R&&(B.stroke={value:R})}}if(i!==nc){const R=Te(e)&&FJ(n,s,e);R?B.opacity=[Object.assign({test:R},bn(M!=null?M:1)),bn(b.legend.unselectedOpacity)]:M&&(B.opacity=bn(M))}return B=Object.assign(Object.assign({},B),t),on(B)?void 0:B}function iAe(t,{model:e,legendType:n,legendCmpt:i}){var s;if(n!=="gradient")return;const{config:o,markDef:c,encoding:d}=e;let f={};const a=((s=i.get("gradientOpacity"))!==null&&s!==void 0?s:o.legend.gradientOpacity)===void 0?kJ(d.opacity)||c.opacity:void 0;return a&&(f.opacity=bn(a)),f=Object.assign(Object.assign({},f),t),on(f)?void 0:f}function sAe(t,{fieldOrDatumDef:e,model:n,channel:i,legendCmpt:s}){const o=n.legend(i)||{},c=n.config,d=Te(e)?FJ(n,s,e):void 0,f=d?[{test:d,value:1},{value:c.legend.unselectedOpacity}]:void 0,{format:u,formatType:a}=o;let _;uu(a)?_=Ta({fieldOrDatumDef:e,field:"datum.value",format:u,formatType:a,config:c}):u===void 0&&a===void 0&&c.customFormatTypes&&(e.type==="quantitative"&&c.numberFormatType?_=Ta({fieldOrDatumDef:e,field:"datum.value",format:c.numberFormat,formatType:c.numberFormatType,config:c}):e.type==="temporal"&&c.timeFormatType&&Te(e)&&e.timeUnit===void 0&&(_=Ta({fieldOrDatumDef:e,field:"datum.value",format:c.timeFormat,formatType:c.timeFormatType,config:c})));const w=Object.assign(Object.assign(Object.assign({},f?{opacity:f}:{}),_?{text:_}:{}),t);return on(w)?void 0:w}function rAe(t,{legendCmpt:e}){const n=e.get("selections");return n!=null&&n.length?Object.assign(Object.assign({},t),{fill:{value:"transparent"}}):t}function kJ(t){return IJ(t,(e,n)=>Math.max(e,n.value))}function uF(t){return IJ(t,(e,n)=>zn(e,n.value))}function IJ(t,e){if(e2e(t))return Ie(t.condition).reduce(e,t.value);if(Ca(t))return t.value}function FJ(t,e,n){const i=e.get("selections");if(!(i!=null&&i.length))return;const s=Se(n.field);return i.map(o=>`(!length(data(${Se(Sn(o)+pu)})) || (${o}[${s}] && indexof(${o}[${s}], datum.value) >= 0))`).join(" || ")}const Ij={direction:({direction:t})=>t,format:({fieldOrDatumDef:t,legend:e,config:n})=>{const{format:i,formatType:s}=e;return WX(t,t.type,i,s,n,!1)},formatType:({legend:t,fieldOrDatumDef:e,scaleType:n})=>{const{formatType:i}=t;return YX(i,e,n)},gradientLength:t=>{var e,n;const{legend:i,legendConfig:s}=t;return(n=(e=i.gradientLength)!==null&&e!==void 0?e:s.gradientLength)!==null&&n!==void 0?n:uAe(t)},labelOverlap:({legend:t,legendConfig:e,scaleType:n})=>{var i,s;return(s=(i=t.labelOverlap)!==null&&i!==void 0?i:e.labelOverlap)!==null&&s!==void 0?s:hAe(n)},symbolType:({legend:t,markDef:e,channel:n,encoding:i})=>{var s;return(s=t.symbolType)!==null&&s!==void 0?s:oAe(e.type,n,i.shape,e.shape)},title:({fieldOrDatumDef:t,config:e})=>Gh(t,e,{allowDisabling:!0}),type:({legendType:t,scaleType:e,channel:n})=>{if(qh(n)&&ba(e)){if(t==="gradient")return}else if(t==="symbol")return;return t},values:({fieldOrDatumDef:t,legend:e})=>aAe(e,t)};function aAe(t,e){const n=t.values;if(he(n))return oK(e,n);if(Re(n))return n}function oAe(t,e,n,i){var s;if(e!=="shape"){const o=(s=uF(n))!==null&&s!==void 0?s:i;if(o)return o}switch(t){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function lAe(t){const{legend:e}=t;return zn(e.type,cAe(t))}function cAe({channel:t,timeUnit:e,scaleType:n}){if(qh(t)){if(Mt(["quarter","month","day"],e))return"symbol";if(ba(n))return"gradient"}return"symbol"}function dAe({legendConfig:t,legendType:e,orient:n,legend:i}){var s,o;return(o=(s=i.direction)!==null&&s!==void 0?s:t[e?"gradientDirection":"symbolDirection"])!==null&&o!==void 0?o:fAe(n,e)}function fAe(t,e){switch(t){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return e==="gradient"?"horizontal":void 0}}function uAe({legendConfig:t,model:e,direction:n,orient:i,scaleType:s}){const{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:c,gradientVerticalMaxLength:d,gradientVerticalMinLength:f}=t;if(ba(s))return n==="horizontal"?i==="top"||i==="bottom"?Fj(e,"width",c,o):c:Fj(e,"height",f,d)}function Fj(t,e,n,i){return{signal:`clamp(${t.getSizeSignalRef(e).signal}, ${n}, ${i})`}}function hAe(t){if(Mt(["quantile","threshold","log","symlog"],t))return"greedy"}function OJ(t){const e=Dn(t)?pAe(t):mAe(t);return t.component.legends=e,e}function pAe(t){const{encoding:e}=t,n={};for(const i of[qs,...IK]){const s=Qn(e[i]);!s||!t.getScaleComponent(i)||i===Gs&&Te(s)&&s.type===gg||(n[i]=yAe(t,i))}return n}function gAe(t,e){const n=t.scaleName(e);if(t.mark==="trail"){if(e==="color")return{stroke:n};if(e==="size")return{strokeWidth:n}}return e==="color"?t.markDef.filled?{fill:n}:{stroke:n}:{[e]:n}}function _Ae(t,e,n,i){switch(e){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(e==="title"&&t===(i==null?void 0:i.title))return!0}return t===(n||{})[e]}function yAe(t,e){var n,i,s;let o=t.legend(e);const{markDef:c,encoding:d,config:f}=t,u=f.legend,a=new tAe({},gAe(t,e));kMe(t,e,a);const _=o!==void 0?!o:u.disable;if(a.set("disable",_,o!==void 0),_)return a;o=o||{};const w=t.getScaleComponent(e).get("type"),m=Qn(d[e]),l=Te(m)?(n=Yi(m.timeUnit))===null||n===void 0?void 0:n.unit:void 0,T=o.orient||f.legend.orient||"right",b=lAe({legend:o,channel:e,timeUnit:l,scaleType:w}),S=dAe({legend:o,legendType:b,orient:T,legendConfig:u}),x={legend:o,channel:e,model:t,markDef:c,encoding:d,fieldOrDatumDef:m,legendConfig:u,config:f,scaleType:w,orient:T,legendType:b,direction:S};for(const M of BJ){if(b==="gradient"&&M.startsWith("symbol")||b==="symbol"&&M.startsWith("gradient"))continue;const R=M in Ij?Ij[M](x):o[M];if(R!==void 0){const P=_Ae(R,M,o,t.fieldDef(e));(P||f.legend[M]===void 0)&&a.set(M,R,P)}}const B=(i=o==null?void 0:o.encoding)!==null&&i!==void 0?i:{},F=a.get("selections"),k={},A={fieldOrDatumDef:m,model:t,channel:e,legendCmpt:a,legendType:b};for(const M of["labels","legend","title","symbols","gradient","entries"]){const R=SJ((s=B[M])!==null&&s!==void 0?s:{},t),P=M in kj?kj[M](R,A):R;P!==void 0&&!on(P)&&(k[M]=Object.assign(Object.assign(Object.assign({},(F==null?void 0:F.length)&&Te(m)?{name:`${Sn(m.field)}_legend_${M}`}:{}),F!=null&&F.length?{interactive:!!F}:{}),{update:P}))}return on(k)||a.set("encode",k,!!(o!=null&&o.encoding)),a}function mAe(t){const{legends:e,resolve:n}=t.component;for(const i of t.children){OJ(i);for(const s of we(i.component.legends))n.legend[s]=T3(t.component.resolve,s),n.legend[s]==="shared"&&(e[s]=MJ(e[s],i.component.legends[s]),e[s]||(n.legend[s]="independent",delete e[s]))}for(const i of we(e))for(const s of t.children)!s.component.legends[i]||n.legend[i]==="shared"&&delete s.component.legends[i];return e}function MJ(t,e){var n,i,s,o;if(!t)return e.clone();const c=t.getWithExplicit("orient"),d=e.getWithExplicit("orient");if(c.explicit&&d.explicit&&c.value!==d.value)return;let f=!1;for(const u of BJ){const a=pd(t.getWithExplicit(u),e.getWithExplicit(u),u,"legend",(_,w)=>{switch(u){case"symbolType":return wAe(_,w);case"title":return yX(_,w);case"type":return f=!0,Js("symbol")}return vS(_,w,u,"legend")});t.setWithExplicit(u,a)}return f&&(!((i=(n=t.implicit)===null||n===void 0?void 0:n.encode)===null||i===void 0)&&i.gradient&&t1(t.implicit,["encode","gradient"]),!((o=(s=t.explicit)===null||s===void 0?void 0:s.encode)===null||o===void 0)&&o.gradient&&t1(t.explicit,["encode","gradient"])),t}function wAe(t,e){return e.value==="circle"?e:t}var bAe=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};function TAe(t,e,n,i){var s,o,c,d,f;(s=t.encode)!==null&&s!==void 0||(t.encode={}),(o=(d=t.encode)[e])!==null&&o!==void 0||(d[e]={}),(c=(f=t.encode[e]).update)!==null&&c!==void 0||(f.update={}),t.encode[e].update[n]=i}function AJ(t){const e=t.component.legends,n={};for(const s of we(e)){const o=t.getScaleComponent(s),c=_n(o.get("domains"));if(n[c])for(const d of n[c])MJ(d,e[s])||n[c].push(e[s]);else n[c]=[e[s].clone()]}return Gi(n).flat().map(s=>vAe(s,t.config)).filter(s=>s!==void 0)}function vAe(t,e){var n,i,s;const o=t.combine(),{disable:c,labelExpr:d,selections:f}=o,u=bAe(o,["disable","labelExpr","selections"]);if(!c){if(e.aria===!1&&u.aria==null&&(u.aria=!1),!((n=u.encode)===null||n===void 0)&&n.symbols){const a=u.encode.symbols.update;a.fill&&a.fill.value!=="transparent"&&!a.stroke&&!u.stroke&&(a.stroke={value:"transparent"});for(const _ of IK)u[_]&&delete a[_]}if(u.title||delete u.title,d!==void 0){let a=d;((s=(i=u.encode)===null||i===void 0?void 0:i.labels)===null||s===void 0?void 0:s.update)&&Re(u.encode.labels.update.text)&&(a=ou(d,"datum.label",u.encode.labels.update.text.signal)),TAe(u,"labels","text",{signal:a})}return u}}function EAe(t){return bg(t)||k3(t)?SAe(t):NJ(t)}function SAe(t){return t.children.reduce((e,n)=>e.concat(n.assembleProjections()),NJ(t))}function NJ(t){const e=t.component.projection;if(!e||e.merged)return[];const n=e.combine(),{name:i}=n;if(e.data){const s={signal:`[${e.size.map(c=>c.signal).join(", ")}]`},o=e.data.reduce((c,d)=>{const f=Re(d)?d.signal:`data('${t.lookupDataSource(d)}')`;return Mt(c,f)||c.push(f),c},[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[Object.assign({name:i,size:s,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]}},n)]}else return[Object.assign(Object.assign({name:i},{translate:{signal:"[width / 2, height / 2]"}}),n)]}const xAe=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class CJ extends sc{constructor(e,n,i,s){super(Object.assign({},n),{name:e}),this.specifiedProjection=n,this.size=i,this.data=s,this.merged=!1}get isFit(){return!!this.data}}function RJ(t){t.component.projection=Dn(t)?BAe(t):FAe(t)}function BAe(t){var e;if(t.hasProjection){const n=Ss(t.specifiedProjection),i=!(n&&(n.scale!=null||n.translate!=null)),s=i?[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")]:void 0,o=i?kAe(t):void 0,c=new CJ(t.projectionName(!0),Object.assign(Object.assign({},(e=Ss(t.config.projection))!==null&&e!==void 0?e:{}),n!=null?n:{}),s,o);return c.get("type")||c.set("type","equalEarth",!1),c}}function kAe(t){const e=[],{encoding:n}=t;for(const i of[[tl,el],[Gr,qa]])(Qn(n[i[0]])||Qn(n[i[1]]))&&e.push({signal:t.getName(`geojson_${e.length}`)});return t.channelHasField(Gs)&&t.typedFieldDef(Gs).type===gg&&e.push({signal:t.getName(`geojson_${e.length}`)}),e.length===0&&e.push(t.requestDataName(gn.Main)),e}function IAe(t,e){const n=uC(xAe,s=>!!(!Le(t.explicit,s)&&!Le(e.explicit,s)||Le(t.explicit,s)&&Le(e.explicit,s)&&mo(t.get(s),e.get(s))));if(mo(t.size,e.size)){if(n)return t;if(mo(t.explicit,{}))return e;if(mo(e.explicit,{}))return t}return null}function FAe(t){if(t.children.length===0)return;let e;for(const i of t.children)RJ(i);const n=uC(t.children,i=>{const s=i.component.projection;if(s)if(e){const o=IAe(e,s);return o&&(e=o),!!o}else return e=s,!0;else return!0});if(e&&n){const i=t.projectionName(!0),s=new CJ(i,e.specifiedProjection,e.size,dt(e.data));for(const o of t.children){const c=o.component.projection;c&&(c.isFit&&s.data.push(...o.component.projection.data),o.renameProjection(c.get("name"),i),c.merged=!0)}return s}}var OAe=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};function MAe(t,e,n,i){var s,o;if(Gm(e,n)){const c=Dn(t)?(o=(s=t.axis(n))!==null&&s!==void 0?s:t.legend(n))!==null&&o!==void 0?o:{}:{},d=xe(e,{expr:"datum"}),f=xe(e,{expr:"datum",binSuffix:"end"});return{formulaAs:xe(e,{binSuffix:"range",forAs:!0}),formula:zm(d,f,c.format,c.formatType,i)}}return{}}function LJ(t,e){return`${cX(t)}_${e}`}function AAe(t,e){return{signal:t.getName(`${e}_bins`),extentSignal:t.getName(`${e}_extent`)}}function v3(t,e,n){var i;const s=(i=_S(n,void 0))!==null&&i!==void 0?i:{},o=LJ(s,e);return t.getName(`${o}_bins`)}function NAe(t){return"as"in t}function Oj(t,e,n){let i,s;NAe(t)?i=ke(t.as)?[t.as,`${t.as}_end`]:[t.as[0],t.as[1]]:i=[xe(t,{forAs:!0}),xe(t,{binSuffix:"end",forAs:!0})];const o=Object.assign({},_S(e,void 0)),c=LJ(o,t.field),{signal:d,extentSignal:f}=AAe(n,c);if(aS(o.extent)){const a=o.extent;s=pJ(n,a.param,a),delete o.extent}const u=Object.assign(Object.assign(Object.assign({bin:o,field:t.field,as:[i]},d?{signal:d}:{}),f?{extentSignal:f}:{}),s?{span:s}:{});return{key:c,binComponent:u}}class Io extends dn{constructor(e,n){super(e),this.bins=n}clone(){return new Io(null,dt(this.bins))}static makeFromEncoding(e,n){const i=n.reduceFieldDef((s,o,c)=>{if(Vr(o)&&yn(o.bin)){const{key:d,binComponent:f}=Oj(o,o.bin,n);s[d]=Object.assign(Object.assign(Object.assign({},f),s[d]),MAe(n,o,c,n.config))}return s},{});return on(i)?null:new Io(e,i)}static makeFromTransform(e,n,i){const{key:s,binComponent:o}=Oj(n,n.bin,i);return new Io(e,{[s]:o})}merge(e,n){for(const i of we(e.bins))i in this.bins?(n(e.bins[i].signal,this.bins[i].signal),this.bins[i].as=wo([...this.bins[i].as,...e.bins[i].as],Lt)):this.bins[i]=e.bins[i];for(const i of e.children)e.removeChild(i),i.parent=this;e.remove()}producedFields(){return new Set(Gi(this.bins).map(e=>e.as).flat(2))}dependentFields(){return new Set(Gi(this.bins).map(e=>e.field))}hash(){return`Bin ${Lt(this.bins)}`}assemble(){return Gi(this.bins).flatMap(e=>{const n=[],[i,...s]=e.as,o=e.bin,{extent:c}=o,d=OAe(o,["extent"]),f=Object.assign(Object.assign(Object.assign({type:"bin",field:qr(e.field),as:i,signal:e.signal},aS(c)?{extent:null}:{extent:c}),e.span?{span:{signal:`span(${e.span})`}}:{}),d);!c&&e.extentSignal&&(n.push({type:"extent",field:qr(e.field),signal:e.extentSignal}),f.extent={signal:e.extentSignal}),n.push(f);for(const u of s)for(let a=0;a<2;a++)n.push({type:"formula",expr:xe({field:i[a]},{expr:"datum"}),as:u[a]});return e.formula&&n.push({type:"formula",expr:e.formula,as:e.formulaAs}),n})}}function CAe(t,e,n,i){var s;const o=Dn(i)?i.encoding[sl(e)]:void 0;if(Vr(n)&&Dn(i)&&eK(n,o,i.markDef,i.config))t.add(xe(n,{})),t.add(xe(n,{suffix:"end"})),n.bin&&Gm(n,e)&&t.add(xe(n,{binSuffix:"range"}));else if(uke(e)){const c=fke(e);t.add(i.getName(c))}else t.add(xe(n));return zu(n)&&EFe((s=n.scale)===null||s===void 0?void 0:s.range)&&t.add(n.scale.range.field),t}function RAe(t,e){var n;for(const i of we(e)){const s=e[i];for(const o of we(s))i in t?t[i][o]=new Set([...(n=t[i][o])!==null&&n!==void 0?n:[],...s[o]]):t[i]={[o]:s[o]}}}class xa extends dn{constructor(e,n,i){super(e),this.dimensions=n,this.measures=i}clone(){return new xa(null,new Set(this.dimensions),dt(this.measures))}get groupBy(){return this.dimensions}static makeFromEncoding(e,n){let i=!1;n.forEachFieldDef(c=>{c.aggregate&&(i=!0)});const s={},o=new Set;return!i||(n.forEachFieldDef((c,d)=>{var f,u,a,_;const{aggregate:w,field:m}=c;if(w)if(w==="count")(f=s["*"])!==null&&f!==void 0||(s["*"]={}),s["*"].count=new Set([xe(c,{forAs:!0})]);else{if(Vl(w)||jd(w)){const l=Vl(w)?"argmin":"argmax",T=w[l];(u=s[T])!==null&&u!==void 0||(s[T]={}),s[T][l]=new Set([xe({op:l,field:T},{forAs:!0})])}else(a=s[m])!==null&&a!==void 0||(s[m]={}),s[m][w]=new Set([xe(c,{forAs:!0})]);Dd(d)&&n.scaleDomain(d)==="unaggregated"&&((_=s[m])!==null&&_!==void 0||(s[m]={}),s[m].min=new Set([xe({field:m,aggregate:"min"},{forAs:!0})]),s[m].max=new Set([xe({field:m,aggregate:"max"},{forAs:!0})]))}else CAe(o,d,c,n)}),o.size+we(s).length===0)?null:new xa(e,o,s)}static makeFromTransform(e,n){var i,s,o;const c=new Set,d={};for(const f of n.aggregate){const{op:u,field:a,as:_}=f;u&&(u==="count"?((i=d["*"])!==null&&i!==void 0||(d["*"]={}),d["*"].count=new Set([_||xe(f,{forAs:!0})])):((s=d[a])!==null&&s!==void 0||(d[a]={}),d[a][u]=new Set([_||xe(f,{forAs:!0})])))}for(const f of(o=n.groupby)!==null&&o!==void 0?o:[])c.add(f);return c.size+we(d).length===0?null:new xa(e,c,d)}merge(e){return VY(this.dimensions,e.dimensions)?(RAe(this.measures,e.measures),!0):(YIe("different dimensions, cannot merge"),!1)}addDimensions(e){e.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...we(this.measures)])}producedFields(){const e=new Set;for(const n of we(this.measures))for(const i of we(this.measures[n])){const s=this.measures[n][i];s.size===0?e.add(`${i}_${n}`):s.forEach(e.add,e)}return e}hash(){return`Aggregate ${Lt({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const e=[],n=[],i=[];for(const o of we(this.measures))for(const c of we(this.measures[o]))for(const d of this.measures[o][c])i.push(d),e.push(c),n.push(o==="*"?null:qr(o));return{type:"aggregate",groupby:[...this.dimensions].map(qr),ops:e,fields:n,as:i}}}class mg extends dn{constructor(e,n,i,s){super(e),this.model=n,this.name=i,this.data=s;for(const o of Or){const c=n.facet[o];if(c){const{bin:d,sort:f}=c;this[o]=Object.assign({name:n.getName(`${o}_domain`),fields:[xe(c),...yn(d)?[xe(c,{binSuffix:"end"})]:[]]},Bo(f)?{sortField:f}:he(f)?{sortIndexField:qp(c,o)}:{})}}this.childModel=n.child}hash(){let e="Facet";for(const n of Or)this[n]&&(e+=` ${n.charAt(0)}:${Lt(this[n])}`);return e}get fields(){var e;const n=[];for(const i of Or)!((e=this[i])===null||e===void 0)&&e.fields&&n.push(...this[i].fields);return n}dependentFields(){const e=new Set(this.fields);for(const n of Or)this[n]&&(this[n].sortField&&e.add(this[n].sortField.field),this[n].sortIndexField&&e.add(this[n].sortIndexField));return e}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const e={};for(const n of rl){const i=this.childModel.component.scales[n];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(yi(s)&&Ud(o)){const c=kS(this.childModel,n),d=B3(c);d?e[n]=d:be(BC(n))}}}return e}assembleRowColumnHeaderData(e,n,i){const s={row:"y",column:"x",facet:void 0}[e],o=[],c=[],d=[];s&&i&&i[s]&&(n?(o.push(`distinct_${i[s]}`),c.push("max")):(o.push(i[s]),c.push("distinct")),d.push(`distinct_${i[s]}`));const{sortField:f,sortIndexField:u}=this[e];if(f){const{op:a=uS,field:_}=f;o.push(_),c.push(a),d.push(xe(f,{forAs:!0}))}else u&&(o.push(u),c.push("max"),d.push(u));return{name:this[e].name,source:n!=null?n:this.data,transform:[Object.assign({type:"aggregate",groupby:this[e].fields},o.length?{fields:o,ops:c,as:d}:{})]}}assembleFacetHeaderData(e){var n,i;const{columns:s}=this.model.layout,{layoutHeaders:o}=this.model.component,c=[],d={};for(const a of m3){for(const _ of w3){const w=(n=o[a]&&o[a][_])!==null&&n!==void 0?n:[];for(const m of w)if(((i=m.axes)===null||i===void 0?void 0:i.length)>0){d[a]=!0;break}}if(d[a]){const _=`length(data("${this.facet.name}"))`,w=a==="row"?s?{signal:`ceil(${_} / ${s})`}:1:s?{signal:`min(${_}, ${s})`}:{signal:_};c.push({name:`${this.facet.name}_${a}`,transform:[{type:"sequence",start:0,stop:w}]})}}const{row:f,column:u}=d;return(f||u)&&c.unshift(this.assembleRowColumnHeaderData("facet",null,e)),c}assemble(){var e,n;const i=[];let s=null;const o=this.getChildIndependentFieldsWithStep(),{column:c,row:d,facet:f}=this;if(c&&d&&(o.x||o.y)){s=`cross_${this.column.name}_${this.row.name}`;const u=[].concat((e=o.x)!==null&&e!==void 0?e:[],(n=o.y)!==null&&n!==void 0?n:[]),a=u.map(()=>"distinct");i.push({name:s,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:u,ops:a}]})}for(const u of[Rl,Cl])this[u]&&i.push(this.assembleRowColumnHeaderData(u,s,o));if(f){const u=this.assembleFacetHeaderData(o);u&&i.push(...u)}return i}}function Mj(t){return t.startsWith("'")&&t.endsWith("'")||t.startsWith('"')&&t.endsWith('"')?t.slice(1,-1):t}function LAe(t,e){const n=gC(t);if(e==="number")return`toNumber(${n})`;if(e==="boolean")return`toBoolean(${n})`;if(e==="string")return`toString(${n})`;if(e==="date")return`toDate(${n})`;if(e==="flatten")return n;if(e.startsWith("date:")){const i=Mj(e.slice(5,e.length));return`timeParse(${n},'${i}')`}else if(e.startsWith("utc:")){const i=Mj(e.slice(4,e.length));return`utcParse(${n},'${i}')`}else return be(tIe(e)),null}function PAe(t){const e={};return z0(t.filter,n=>{var i;if(OX(n)){let s=null;MC(n)?s=rr(n.equal):NC(n)?s=rr(n.lte):AC(n)?s=rr(n.lt):CC(n)?s=rr(n.gt):RC(n)?s=rr(n.gte):LC(n)?s=n.range[0]:PC(n)&&(s=((i=n.oneOf)!==null&&i!==void 0?i:n.in)[0]),s&&(Uu(s)?e[n.field]="date":ln(s)?e[n.field]="number":ke(s)&&(e[n.field]="string")),n.timeUnit&&(e[n.field]="date")}}),e}function DAe(t){const e={};function n(i){jp(i)?e[i.field]="date":i.type==="quantitative"&&Ake(i.aggregate)?e[i.field]="number":Np(i.field)>1?i.field in e||(e[i.field]="flatten"):zu(i)&&Bo(i.sort)&&Np(i.sort.field)>1&&(i.sort.field in e||(e[i.sort.field]="flatten"))}if((Dn(t)||Ba(t))&&t.forEachFieldDef((i,s)=>{if(Vr(i))n(i);else{const o=Du(s),c=t.fieldDef(o);n(Object.assign(Object.assign({},i),{type:c.type}))}}),Dn(t)){const{mark:i,markDef:s,encoding:o}=t;if(zd(i)&&!t.encoding.order){const c=s.orient==="horizontal"?"y":"x",d=o[c];Te(d)&&d.type==="quantitative"&&!(d.field in e)&&(e[d.field]="number")}}return e}function jAe(t){const e={};if(Dn(t)&&t.component.selection)for(const n of we(t.component.selection)){const i=t.component.selection[n];for(const s of i.project.items)!s.channel&&Np(s.field)>1&&(e[s.field]="flatten")}return e}class ji extends dn{constructor(e,n){super(e),this._parse=n}clone(){return new ji(null,dt(this._parse))}hash(){return`Parse ${Lt(this._parse)}`}static makeExplicit(e,n,i){var s;let o={};const c=n.data;return!qc(c)&&((s=c==null?void 0:c.format)===null||s===void 0?void 0:s.parse)&&(o=c.format.parse),this.makeWithAncestors(e,o,{},i)}static makeWithAncestors(e,n,i,s){for(const d of we(i)){const f=s.getWithExplicit(d);f.value!==void 0&&(f.explicit||f.value===i[d]||f.value==="derived"||i[d]==="flatten"?delete i[d]:be(V6(d,i[d],f.value)))}for(const d of we(n)){const f=s.get(d);f!==void 0&&(f===n[d]?delete n[d]:be(V6(d,n[d],f)))}const o=new sc(n,i);s.copyAll(o);const c={};for(const d of we(o.combine())){const f=o.get(d);f!==null&&(c[d]=f)}return we(c).length===0||s.parseNothing?null:new ji(e,c)}get parse(){return this._parse}merge(e){this._parse=Object.assign(Object.assign({},this._parse),e.parse),e.remove()}assembleFormatParse(){const e={};for(const n of we(this._parse)){const i=this._parse[n];Np(n)===1&&(e[n]=i)}return e}producedFields(){return new Set(we(this._parse))}dependentFields(){return new Set(we(this._parse))}assembleTransforms(e=!1){return we(this._parse).filter(n=>e?Np(n)>1:!0).map(n=>{const i=LAe(n,this._parse[n]);return i?{type:"formula",expr:i,as:_C(n)}:null}).filter(n=>n!==null)}}class md extends dn{clone(){return new md(null)}constructor(e){super(e)}dependentFields(){return new Set}producedFields(){return new Set([qo])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:qo}}}class Wm extends dn{constructor(e,n){super(e),this.params=n}clone(){return new Wm(null,this.params)}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Lt(this.params)}`}assemble(){return Object.assign({type:"graticule"},this.params===!0?{}:this.params)}}class Ym extends dn{constructor(e,n){super(e),this.params=n}clone(){return new Ym(null,this.params)}dependentFields(){return new Set}producedFields(){var e;return new Set([(e=this.params.as)!==null&&e!==void 0?e:"data"])}hash(){return`Hash ${Lt(this.params)}`}assemble(){return Object.assign({type:"sequence"},this.params)}}class gu extends dn{constructor(e){super(null),e!=null||(e={name:"source"});let n;if(qc(e)||(n=e.format?Object.assign({},As(e.format,["parse"])):{}),Oy(e))this._data={values:e.values};else if(Up(e)){if(this._data={url:e.url},!n.type){let i=/(?:\.([^.]+))?$/.exec(e.url)[1];Mt(["json","csv","tsv","dsv","topojson"],i)||(i="json"),n.type=i}}else WK(e)?this._data={values:[{type:"Sphere"}]}:(VK(e)||qc(e))&&(this._data={});this._generator=qc(e),e.name&&(this._name=e.name),n&&!on(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(e){this._name=e}set parent(e){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return Object.assign(Object.assign({name:this._name},this._data),{transform:[]})}}var Aj=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,n,i,s){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n},UAe=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},T_;function E3(t){return t instanceof gu||t instanceof Wm||t instanceof Ym}class S3{constructor(){T_.set(this,void 0),Aj(this,T_,!1,"f")}setModified(){Aj(this,T_,!0,"f")}get modifiedFlag(){return UAe(this,T_,"f")}}T_=new WeakMap;class $u extends S3{getNodeDepths(e,n,i){i.set(e,n);for(const s of e.children)this.getNodeDepths(s,n+1,i);return i}optimize(e){const i=[...this.getNodeDepths(e,0,new Map).entries()].sort((s,o)=>o[1]-s[1]);for(const s of i)this.run(s[0]);return this.modifiedFlag}}class x3 extends S3{optimize(e){this.run(e);for(const n of e.children)this.optimize(n);return this.modifiedFlag}}class zAe extends x3{mergeNodes(e,n){const i=n.shift();for(const s of n)e.removeChild(s),s.parent=i,s.remove()}run(e){const n=e.children.map(s=>s.hash()),i={};for(let s=0;s<n.length;s++)i[n[s]]===void 0?i[n[s]]=[e.children[s]]:i[n[s]].push(e.children[s]);for(const s of we(i))i[s].length>1&&(this.setModified(),this.mergeNodes(e,i[s]))}}class $Ae extends x3{constructor(e){super(),this.requiresSelectionId=e&&y3(e)}run(e){e instanceof md&&(this.requiresSelectionId&&(E3(e.parent)||e.parent instanceof xa||e.parent instanceof ji)||(this.setModified(),e.remove()))}}class qAe extends S3{optimize(e){return this.run(e,new Set),this.modifiedFlag}run(e,n){let i=new Set;e instanceof ko&&(i=e.producedFields(),hC(i,n)&&(this.setModified(),e.removeFormulas(n),e.producedFields.length===0&&e.remove()));for(const s of e.children)this.run(s,new Set([...n,...i]))}}class GAe extends x3{constructor(){super()}run(e){e instanceof ds&&!e.isRequired()&&(this.setModified(),e.remove())}}class VAe extends $u{run(e){if(!E3(e)&&!(e.numChildren()>1)){for(const n of e.children)if(n instanceof ji)if(e instanceof ji)this.setModified(),e.merge(n);else{if(pC(e.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class HAe extends $u{run(e){const n=[...e.children],i=e.children.filter(s=>s instanceof ji);if(e.numChildren()>1&&i.length>=1){const s={},o=new Set;for(const c of i){const d=c.parse;for(const f of we(d))f in s?s[f]!==d[f]&&o.add(f):s[f]=d[f]}for(const c of o)delete s[c];if(!on(s)){this.setModified();const c=new ji(e,s);for(const d of n){if(d instanceof ji)for(const f of we(s))delete d.parse[f];e.removeChild(d),d.parent=c,d instanceof ji&&we(d.parse).length===0&&d.remove()}}}}}class WAe extends $u{run(e){e instanceof ds||e.numChildren()>0||e instanceof mg||e instanceof gu||(this.setModified(),e.remove())}}class YAe extends $u{run(e){const n=e.children.filter(s=>s instanceof ko),i=n.pop();for(const s of n)this.setModified(),i.merge(s)}}class XAe extends $u{run(e){const n=e.children.filter(s=>s instanceof xa),i={};for(const s of n){const o=Lt(s.groupBy);o in i||(i[o]=[]),i[o].push(s)}for(const s of we(i)){const o=i[s];if(o.length>1){const c=o.pop();for(const d of o)c.merge(d)&&(e.removeChild(d),d.parent=c,d.remove(),this.setModified())}}}}class KAe extends $u{constructor(e){super(),this.model=e}run(e){const n=!(E3(e)||e instanceof yg||e instanceof ji||e instanceof md),i=[],s=[];for(const o of e.children)o instanceof Io&&(n&&!pC(e.producedFields(),o.dependentFields())?i.push(o):s.push(o));if(i.length>0){const o=i.pop();for(const c of i)o.merge(c,this.model.renameSignal.bind(this.model));this.setModified(),e instanceof Io?e.merge(o,this.model.renameSignal.bind(this.model)):o.swapWithParent()}if(s.length>1){const o=s.pop();for(const c of s)o.merge(c,this.model.renameSignal.bind(this.model));this.setModified()}}}class JAe extends $u{run(e){const n=[...e.children];if(!au(n,c=>c instanceof ds)||e.numChildren()<=1)return;const s=[];let o;for(const c of n)if(c instanceof ds){let d=c;for(;d.numChildren()===1;){const[f]=d.children;if(f instanceof ds)d=f;else break}s.push(...d.children),o?(e.removeChild(c),c.parent=o.parent,o.parent.removeChild(o),o.parent=d,this.setModified()):o=d}else s.push(c);if(s.length){this.setModified();for(const c of s)c.parent.removeChild(c),c.parent=o}}}class qu extends dn{constructor(e,n){super(e),this.transform=n}clone(){return new qu(null,dt(this.transform))}addDimensions(e){this.transform.groupby=wo(this.transform.groupby.concat(e),n=>n)}dependentFields(){const e=new Set;return this.transform.groupby&&this.transform.groupby.forEach(e.add,e),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(e.add,e),e}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(e){var n;return(n=e.as)!==null&&n!==void 0?n:xe(e)}hash(){return`JoinAggregateTransform ${Lt(this.transform)}`}assemble(){const e=[],n=[],i=[];for(const o of this.transform.joinaggregate)n.push(o.op),i.push(this.getDefaultName(o)),e.push(o.field===void 0?null:o.field);const s=this.transform.groupby;return Object.assign({type:"joinaggregate",as:i,ops:n,fields:e},s!==void 0?{groupby:s}:{})}}function QAe(t){return t.stack.stackBy.reduce((e,n)=>{const i=n.fieldDef,s=xe(i);return s&&e.push(s),e},[])}function ZAe(t){return he(t)&&t.every(e=>ke(e))&&t.length>1}class Pl extends dn{constructor(e,n){super(e),this._stack=n}clone(){return new Pl(null,dt(this._stack))}static makeFromTransform(e,n){const{stack:i,groupby:s,as:o,offset:c="zero"}=n,d=[],f=[];if(n.sort!==void 0)for(const _ of n.sort)d.push(_.field),f.push(zn(_.order,"ascending"));const u={field:d,order:f};let a;return ZAe(o)?a=o:ke(o)?a=[o,`${o}_end`]:a=[`${n.stack}_start`,`${n.stack}_end`],new Pl(e,{dimensionFieldDefs:[],stackField:i,groupby:s,offset:c,sort:u,facetby:[],as:a})}static makeFromEncoding(e,n){const i=n.stack,{encoding:s}=n;if(!i)return null;const{groupbyChannels:o,fieldChannel:c,offset:d,impute:f}=i,u=o.map(m=>{const l=s[m];return $o(l)}).filter(m=>!!m),a=QAe(n),_=n.encoding.order;let w;return he(_)||Te(_)?w=pX(_):w=a.reduce((m,l)=>(m.field.push(l),m.order.push(c==="y"?"descending":"ascending"),m),{field:[],order:[]}),new Pl(e,{dimensionFieldDefs:u,stackField:n.vgField(c),facetby:[],stackby:a,sort:w,offset:d,impute:f,as:[n.vgField(c,{suffix:"start",forAs:!0}),n.vgField(c,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(e){this._stack.facetby.push(...e)}dependentFields(){const e=new Set;return e.add(this._stack.stackField),this.getGroupbyFields().forEach(e.add,e),this._stack.facetby.forEach(e.add,e),this._stack.sort.field.forEach(e.add,e),e}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Lt(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:e,impute:n,groupby:i}=this._stack;return e.length>0?e.map(s=>s.bin?n?[xe(s,{binSuffix:"mid"})]:[xe(s,{}),xe(s,{binSuffix:"end"})]:[xe(s)]).flat():i!=null?i:[]}assemble(){const e=[],{facetby:n,dimensionFieldDefs:i,stackField:s,stackby:o,sort:c,offset:d,impute:f,as:u}=this._stack;if(f)for(const a of i){const{bandPosition:_=.5,bin:w}=a;if(w){const m=xe(a,{expr:"datum"}),l=xe(a,{expr:"datum",binSuffix:"end"});e.push({type:"formula",expr:`${_}*${m}+${1-_}*${l}`,as:xe(a,{binSuffix:"mid",forAs:!0})})}e.push({type:"impute",field:s,groupby:[...o,...n],key:xe(a,{binSuffix:"mid"}),method:"value",value:0})}return e.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:s,sort:c,as:u,offset:d}),e}}class wg extends dn{constructor(e,n){super(e),this.transform=n}clone(){return new wg(null,dt(this.transform))}addDimensions(e){this.transform.groupby=wo(this.transform.groupby.concat(e),n=>n)}dependentFields(){var e,n;const i=new Set;return((e=this.transform.groupby)!==null&&e!==void 0?e:[]).forEach(i.add,i),((n=this.transform.sort)!==null&&n!==void 0?n:[]).forEach(s=>i.add(s.field)),this.transform.window.map(s=>s.field).filter(s=>s!==void 0).forEach(i.add,i),i}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(e){var n;return(n=e.as)!==null&&n!==void 0?n:xe(e)}hash(){return`WindowTransform ${Lt(this.transform)}`}assemble(){var e;const n=[],i=[],s=[],o=[];for(const w of this.transform.window)i.push(w.op),s.push(this.getDefaultName(w)),o.push(w.param===void 0?null:w.param),n.push(w.field===void 0?null:w.field);const c=this.transform.frame,d=this.transform.groupby;if(c&&c[0]===null&&c[1]===null&&i.every(w=>EC(w)))return Object.assign({type:"joinaggregate",as:s,ops:i,fields:n},d!==void 0?{groupby:d}:{});const f=[],u=[];if(this.transform.sort!==void 0)for(const w of this.transform.sort)f.push(w.field),u.push((e=w.order)!==null&&e!==void 0?e:"ascending");const a={field:f,order:u},_=this.transform.ignorePeers;return Object.assign(Object.assign(Object.assign({type:"window",params:o,as:s,ops:i,fields:n,sort:a},_!==void 0?{ignorePeers:_}:{}),d!==void 0?{groupby:d}:{}),c!==void 0?{frame:c}:{})}}function eNe(t){function e(n){if(!(n instanceof mg)){const i=n.clone();if(i instanceof ds){const s=pF+i.getSource();i.setSource(s),t.model.component.data.outputNodes[s]=i}else(i instanceof xa||i instanceof Pl||i instanceof wg||i instanceof qu)&&i.addDimensions(t.fields);for(const s of n.children.flatMap(e))s.parent=i;return[i]}return n.children.flatMap(e)}return e}function hF(t){if(t instanceof mg)if(t.numChildren()===1&&!(t.children[0]instanceof ds)){const e=t.children[0];(e instanceof xa||e instanceof Pl||e instanceof wg||e instanceof qu)&&e.addDimensions(t.fields),e.swapWithParent(),hF(t)}else{const e=t.model.component.data.main;PJ(e);const n=eNe(t),i=t.children.map(n).flat();for(const s of i)s.parent=e}else t.children.map(hF)}function PJ(t){if(t instanceof ds&&t.type===gn.Main&&t.numChildren()===1){const e=t.children[0];e instanceof mg||(e.swapWithParent(),PJ(t))}}const pF="scale_",Kb=5;function gF(t){for(const e of t){for(const n of e.children)if(n.parent!==e)return!1;if(!gF(e.children))return!1}return!0}function Kr(t,e){let n=!1;for(const i of e)n=t.optimize(i)||n;return n}function Nj(t,e,n){let i=t.sources,s=!1;return s=Kr(new GAe,i)||s,s=Kr(new $Ae(e),i)||s,i=i.filter(o=>o.numChildren()>0),s=Kr(new WAe,i)||s,i=i.filter(o=>o.numChildren()>0),n||(s=Kr(new VAe,i)||s,s=Kr(new KAe(e),i)||s,s=Kr(new qAe,i)||s,s=Kr(new HAe,i)||s,s=Kr(new XAe,i)||s,s=Kr(new YAe,i)||s,s=Kr(new zAe,i)||s,s=Kr(new JAe,i)||s),t.sources=i,s}function tNe(t,e){gF(t.sources);let n=0,i=0;for(let s=0;s<Kb&&Nj(t,e,!0);s++)n++;t.sources.map(hF);for(let s=0;s<Kb&&Nj(t,e,!1);s++)i++;gF(t.sources),Math.max(n,i)===Kb&&be(`Maximum optimization runs(${Kb}) reached.`)}class Cs{constructor(e){Object.defineProperty(this,"signal",{enumerable:!0,get:e})}static fromName(e,n){return new Cs(()=>e(n))}}var nNe=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};function DJ(t){Dn(t)?iNe(t):sNe(t)}function iNe(t){const e=t.component.scales;for(const n of we(e)){const i=aNe(t,n);if(e[n].setWithExplicit("domains",i),lNe(t,n),t.component.data.isFaceted){let o=t;for(;!Ba(o)&&o.parent;)o=o.parent;if(o.component.resolve.scale[n]==="shared")for(const d of i.value)Ol(d)&&(d.data=pF+d.data.replace(pF,""))}}}function sNe(t){for(const n of t.children)DJ(n);const e=t.component.scales;for(const n of we(e)){let i,s=null;for(const o of t.children){const c=o.component.scales[n];if(c){i===void 0?i=c.getWithExplicit("domains"):i=pd(i,c.getWithExplicit("domains"),"domains","scale",_F);const d=c.get("selectionExtent");s&&d&&s.param!==d.param&&be(Jke),s=d}}e[n].setWithExplicit("domains",i),s&&e[n].set("selectionExtent",s,!0)}}function rNe(t,e,n,i){if(t==="unaggregated"){const{valid:s,reason:o}=Cj(e,n);if(!s){be(o);return}}else if(t===void 0&&i.useUnaggregatedDomain){const{valid:s}=Cj(e,n);if(s)return"unaggregated"}return t}function aNe(t,e){const n=t.getScaleComponent(e).get("type"),{encoding:i}=t,s=rNe(t.scaleDomain(e),t.typedFieldDef(e),n,t.config.scale);return s!==t.scaleDomain(e)&&(t.specifiedScales[e]=Object.assign(Object.assign({},t.specifiedScales[e]),{domain:s})),e==="x"&&Qn(i.x2)?Qn(i.x)?pd(hc(n,s,t,"x"),hc(n,s,t,"x2"),"domain","scale",_F):hc(n,s,t,"x2"):e==="y"&&Qn(i.y2)?Qn(i.y)?pd(hc(n,s,t,"y"),hc(n,s,t,"y2"),"domain","scale",_F):hc(n,s,t,"y2"):hc(n,s,t,e)}function oNe(t,e,n){return t.map(i=>({signal:`{data: ${yS(i,{timeUnit:n,type:e})}}`}))}function mB(t,e,n){var i;const s=(i=Yi(n))===null||i===void 0?void 0:i.unit;return e==="temporal"||s?oNe(t,e,s):[t]}function hc(t,e,n,i){const{encoding:s}=n,o=Qn(s[i]),{type:c}=o,d=o.timeUnit;if(vFe(e)){const _=hc(t,void 0,n,i),w=mB(e.unionWith,c,d);return Ka([...w,..._.value])}else{if(Re(e))return Ka([e]);if(e&&e!=="unaggregated"&&!PX(e))return Ka(mB(e,c,d))}const f=n.stack;if(f&&i===f.fieldChannel){if(f.offset==="normalize")return Js([[0,1]]);const _=n.requestDataName(gn.Main);return Js([{data:_,field:n.vgField(i,{suffix:"start"})},{data:_,field:n.vgField(i,{suffix:"end"})}])}const u=Dd(i)&&Te(o)?cNe(n,i,t):void 0;if(al(o)){const _=mB([o.datum],c,d);return Js(_)}const a=o;if(e==="unaggregated"){const _=n.requestDataName(gn.Main),{field:w}=o;return Js([{data:_,field:xe({field:w,aggregate:"min"})},{data:_,field:xe({field:w,aggregate:"max"})}])}else if(yn(a.bin)){if(yi(t))return Js(t==="bin-ordinal"?[]:[{data:ky(u)?n.requestDataName(gn.Main):n.requestDataName(gn.Raw),field:n.vgField(i,Gm(a,i)?{binSuffix:"range"}:{}),sort:u===!0||!Fe(u)?{field:n.vgField(i,{}),op:"min"}:u}]);{const{bin:_}=a;if(yn(_)){const w=v3(n,a.field,_);return Js([new Cs(()=>{const m=n.getSignalName(w);return`[${m}.start, ${m}.stop]`})])}else return Js([{data:n.requestDataName(gn.Main),field:n.vgField(i,{})}])}}else if(a.timeUnit&&Mt(["time","utc"],t)&&eK(a,Dn(n)?n.encoding[sl(i)]:void 0,n.markDef,n.config)){const _=n.requestDataName(gn.Main);return Js([{data:_,field:n.vgField(i)},{data:_,field:n.vgField(i,{suffix:"end"})}])}else return Js(u?[{data:ky(u)?n.requestDataName(gn.Main):n.requestDataName(gn.Raw),field:n.vgField(i),sort:u}]:[{data:n.requestDataName(gn.Main),field:n.vgField(i)}])}function wB(t,e){const{op:n,field:i,order:s}=t;return Object.assign(Object.assign({op:n!=null?n:e?"sum":uS},i?{field:qr(i)}:{}),s?{order:s}:{})}function lNe(t,e){var n;const i=t.component.scales[e],s=t.specifiedScales[e].domain,o=(n=t.fieldDef(e))===null||n===void 0?void 0:n.bin,c=PX(s)&&s,d=ju(o)&&aS(o.extent)&&o.extent;(c||d)&&i.set("selectionExtent",c!=null?c:d,!0)}function cNe(t,e,n){if(!yi(n))return;const i=t.fieldDef(e),s=i.sort;if(JX(s))return{op:"min",field:qp(i,e),order:"ascending"};const{stack:o}=t,c=o?new Set([...o.groupbyFields,...o.stackBy.map(d=>d.fieldDef.field)]):void 0;if(Bo(s)){const d=o&&!c.has(s.field);return wB(s,d)}else if(KX(s)){const{encoding:d,order:f}=s,u=t.fieldDef(d),{aggregate:a,field:_}=u,w=o&&!c.has(_);if(Vl(a)||jd(a))return wB({field:xe(u),order:f},w);if(EC(a)||!a)return wB({op:a,field:_,order:f},w)}else{if(s==="descending")return{op:"min",field:t.vgField(e),order:"descending"};if(Mt(["ascending",void 0],s))return!0}}function Cj(t,e){const{aggregate:n,type:i}=t;return n?ke(n)&&!Cke.has(n)?{valid:!1,reason:xIe(n)}:i==="quantitative"&&e==="log"?{valid:!1,reason:BIe(t)}:{valid:!0}:{valid:!1,reason:SIe(t)}}function _F(t,e,n,i){return t.explicit&&e.explicit&&be(MIe(n,i,t.value,e.value)),{explicit:t.explicit,value:[...t.value,...e.value]}}function dNe(t){const e=wo(t.map(c=>Ol(c)?nNe(c,["sort"]):c),Lt),n=wo(t.map(c=>{if(Ol(c)){const d=c.sort;return d!==void 0&&!ky(d)&&("op"in d&&d.op==="count"&&delete d.field,d.order==="ascending"&&delete d.order),d}}).filter(c=>c!==void 0),Lt);if(e.length===0)return;if(e.length===1){const c=t[0];if(Ol(c)&&n.length>0){let d=n[0];if(n.length>1)be(W6),d=!0;else if(Fe(d)&&"field"in d){const f=d.field;c.field===f&&(d=d.order?{order:d.order}:!0)}return Object.assign(Object.assign({},c),{sort:d})}return c}const i=wo(n.map(c=>ky(c)||!("op"in c)||ke(c.op)&&c.op in Oke?c:(be(NIe(c)),!0)),Lt);let s;i.length===1?s=i[0]:i.length>1&&(be(W6),s=!0);const o=wo(t.map(c=>Ol(c)?c.data:null),c=>c);return o.length===1&&o[0]!==null?Object.assign({data:o[0],fields:e.map(d=>d.field)},s?{sort:s}:{}):Object.assign({fields:e},s?{sort:s}:{})}function B3(t){if(Ol(t)&&ke(t.field))return t.field;if(Lke(t)){let e;for(const n of t.fields)if(Ol(n)&&ke(n.field)){if(!e)e=n.field;else if(e!==n.field)return be(CIe),e}return be(RIe),e}else if(Pke(t)){be(LIe);const e=t.fields[0];return ke(e)?e:void 0}}function kS(t,e){const i=t.component.scales[e].get("domains").map(s=>(Ol(s)&&(s.data=t.lookupDataSource(s.data)),s));return dNe(i)}var fNe=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};function jJ(t){return bg(t)||k3(t)?t.children.reduce((e,n)=>e.concat(jJ(n)),Rj(t)):Rj(t)}function Rj(t){return we(t.component.scales).reduce((e,n)=>{const i=t.component.scales[n];if(i.merged)return e;const s=i.combine(),{name:o,type:c,selectionExtent:d,domains:f,range:u,reverse:a}=s,_=fNe(s,["name","type","selectionExtent","domains","range","reverse"]),w=uNe(s.range,o,n,t),m=kS(t,n),l=d?nMe(t,d,i,m):null;return e.push(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:o,type:c},m?{domain:m}:{}),l?{domainRaw:l}:{}),{range:w}),a!==void 0?{reverse:a}:{}),_)),e},[])}function uNe(t,e,n,i){if(_i(n)){if(Ud(t))return{step:{signal:`${e}_step`}}}else if(Fe(t)&&Ol(t))return Object.assign(Object.assign({},t),{data:i.lookupDataSource(t.data)});return t}class UJ extends sc{constructor(e,n){super({},{name:e}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:au(this.get("domains"),e=>he(e)&&e.length===2&&e[0]<=0&&e[1]>=0)}}const hNe=["range","scheme"];function pNe(t){const e=t.component.scales;for(const n of rS){const i=e[n];if(!i)continue;const s=gNe(n,t);i.setWithExplicit("range",s)}}function Lj(t,e){const n=t.fieldDef(e);if(n!=null&&n.bin){const{bin:i,field:s}=n,o=Vs(e),c=t.getName(o);if(Fe(i)&&i.binned&&i.step!==void 0)return new Cs(()=>{const d=t.scaleName(e),f=`(domain("${d}")[1] - domain("${d}")[0]) / ${i.step}`;return`${t.getSignalName(c)} / (${f})`});if(yn(i)){const d=v3(t,s,i);return new Cs(()=>{const f=t.getSignalName(d),u=`(${f}.stop - ${f}.start) / ${f}.step`;return`${t.getSignalName(c)} / (${u})`})}}}function gNe(t,e){const n=e.specifiedScales[t],{size:i}=e,o=e.getScaleComponent(t).get("type");for(const _ of hNe)if(n[_]!==void 0){const w=XI(o,_),m=DX(t,_);if(!w)be(TX(o,_,t));else if(m)be(m);else switch(_){case"range":{const l=n.range;if(he(l)){if(_i(t))return Ka(l.map(T=>{if(T==="width"||T==="height"){const b=e.getName(T),S=e.getSignalName.bind(e);return Cs.fromName(S,b)}return T}))}else if(Fe(l))return Ka({data:e.requestDataName(gn.Main),field:l.field,sort:{op:"min",field:e.vgField(t)}});return Ka(l)}case"scheme":return Ka(_Ne(n[_]))}}const c=t===Fn||t==="xOffset"?"width":"height",d=i[c];if(Go(d)){if(_i(t))if(yi(o)){const _=zJ(d,e,t);if(_)return Ka({step:_})}else be(vX(c));else if(pg(t)){const _=t===Nd?"x":"y";if(e.getScaleComponent(_).get("type")==="band"){const l=$J(d,o);if(l)return Ka(l)}}}const{rangeMin:f,rangeMax:u}=n,a=yNe(t,e);return(f!==void 0||u!==void 0)&&XI(o,"rangeMin")&&he(a)&&a.length===2?Ka([f!=null?f:a[0],u!=null?u:a[1]]):Js(a)}function _Ne(t){return TFe(t)?Object.assign({scheme:t.name},As(t,["name"])):{scheme:t}}function yNe(t,e){const{size:n,config:i,mark:s,encoding:o}=e,c=e.getSignalName.bind(e),{type:d}=Qn(o[t]),u=e.getScaleComponent(t).get("type"),{domain:a,domainMid:_}=e.specifiedScales[t];switch(t){case Fn:case gi:{if(Mt(["point","band"],u)){const l=qJ(t,n,i.view);if(Go(l))return{step:zJ(l,e,t)}}const w=Vs(t),m=e.getName(w);return t===gi&&pr(u)?[Cs.fromName(c,m),0]:[0,Cs.fromName(c,m)]}case Nd:case hg:return mNe(t,e,u);case tc:{const w=e.component.scales[t].get("zero"),m=GJ(s,w,i),l=TNe(s,n,e,i);return Lp(u)?bNe(m,l,wNe(u,i,a,t)):[m,l]}case Wr:return[0,Math.PI*2];case Pu:return[0,360];case $a:return[0,new Cs(()=>{const w=e.getSignalName("width"),m=e.getSignalName("height");return`min(${w},${m})/2`})];case Ld:return[i.scale.minStrokeWidth,i.scale.maxStrokeWidth];case Pd:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Gs:return"symbol";case qs:case nl:case il:return u==="ordinal"?d==="nominal"?"category":"ordinal":_!==void 0?"diverging":s==="rect"||s==="geoshape"?"heatmap":"ramp";case nc:case Cd:case Rd:return[i.scale.minOpacity,i.scale.maxOpacity]}}function zJ(t,e,n){var i,s,o,c,d;const{encoding:f}=e,u=e.getScaleComponent(n),a=nX(n),_=f[a];if(OK({step:t,offsetIsDiscrete:Ze(_)&&AX(_.type)})==="offset"&&fK(f,a)){const m=e.getScaleComponent(a);let T=`domain('${e.scaleName(a)}').length`;if(m.get("type")==="band"){const S=(s=(i=m.get("paddingInner"))!==null&&i!==void 0?i:m.get("padding"))!==null&&s!==void 0?s:0,x=(c=(o=m.get("paddingOuter"))!==null&&o!==void 0?o:m.get("padding"))!==null&&c!==void 0?c:0;T=`bandspace(${T}, ${S}, ${x})`}const b=(d=u.get("paddingInner"))!==null&&d!==void 0?d:u.get("padding");return{signal:`${t.step} * ${T} / (1-${zke(b)})`}}else return t.step}function $J(t,e){if(OK({step:t,offsetIsDiscrete:yi(e)})==="offset")return{step:t.step}}function mNe(t,e,n){const i=t===Nd?"x":"y",o=e.getScaleComponent(i).get("type"),c=e.scaleName(i);if(o==="band"){const d=qJ(i,e.size,e.config.view);if(Go(d)){const f=$J(d,n);if(f)return f}return[0,{signal:`bandwidth('${c}')`}]}else return qY(`Cannot use ${t} scale if ${i} scale is not discrete.`)}function qJ(t,e,n){const i=t===Fn?"width":"height",s=e[i];return s||f1(n,i)}function wNe(t,e,n,i){switch(t){case"quantile":return e.scale.quantileCount;case"quantize":return e.scale.quantizeCount;case"threshold":return n!==void 0&&he(n)?n.length+1:(be(VIe(i)),3)}}function bNe(t,e,n){const i=()=>{const s=Ll(e),o=Ll(t),c=`(${s} - ${o}) / (${n} - 1)`;return`sequence(${o}, ${s} + ${c}, ${c})`};return Re(e)?new Cs(i):{signal:i()}}function GJ(t,e,n){if(e)return Re(e)?{signal:`${e.signal} ? 0 : ${GJ(t,!1,n)}`}:0;switch(t){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(oS("size",t))}const Pj=.95;function TNe(t,e,n,i){const s={x:Lj(n,"x"),y:Lj(n,"y")};switch(t){case"bar":case"tick":{if(i.scale.maxBandSize!==void 0)return i.scale.maxBandSize;const o=Dj(e,s,i.view);return ln(o)?o-1:new Cs(()=>`${o.signal} - 1`)}case"line":case"trail":case"rule":return i.scale.maxStrokeWidth;case"text":return i.scale.maxFontSize;case"point":case"square":case"circle":{if(i.scale.maxSize)return i.scale.maxSize;const o=Dj(e,s,i.view);return ln(o)?Math.pow(Pj*o,2):new Cs(()=>`pow(${Pj} * ${o.signal}, 2)`)}}throw new Error(oS("size",t))}function Dj(t,e,n){const i=Go(t.width)?t.width.step:d1(n,"width"),s=Go(t.height)?t.height.step:d1(n,"height");return e.x||e.y?new Cs(()=>`min(${[e.x?e.x.signal:i,e.y?e.y.signal:s].join(", ")})`):Math.min(i,s)}function VJ(t,e){Dn(t)?vNe(t,e):WJ(t,e)}function vNe(t,e){const n=t.component.scales,{config:i,encoding:s,markDef:o,specifiedScales:c}=t;for(const d of we(n)){const f=c[d],u=n[d],a=t.getScaleComponent(d),_=Qn(s[d]),w=f[e],m=a.get("type"),l=a.get("padding"),T=a.get("paddingInner"),b=XI(m,e),S=DX(d,e);if(w!==void 0&&(b?S&&be(S):be(TX(m,e,d))),b&&S===void 0)if(w!==void 0){const x=_.timeUnit,B=_.type;switch(e){case"domainMax":case"domainMin":Uu(f[e])||B==="temporal"||x?u.set(e,{signal:yS(f[e],{type:B,timeUnit:x})},!0):u.set(e,f[e],!0);break;default:u.copyKeyFromObject(e,f)}}else{const x=e in jj?jj[e]({model:t,channel:d,fieldOrDatumDef:_,scaleType:m,scalePadding:l,scalePaddingInner:T,domain:f.domain,domainMin:f.domainMin,domainMax:f.domainMax,markDef:o,config:i,hasNestedOffsetScale:ZI(s,d),hasSecondaryRangeChannel:!!s[sl(d)]}):i.scale[e];x!==void 0&&u.set(e,x,!1)}}}const jj={bins:({model:t,fieldOrDatumDef:e})=>Te(e)?ENe(t,e):void 0,interpolate:({channel:t,fieldOrDatumDef:e})=>SNe(t,e.type),nice:({scaleType:t,channel:e,domain:n,domainMin:i,domainMax:s,fieldOrDatumDef:o})=>xNe(t,e,n,i,s,o),padding:({channel:t,scaleType:e,fieldOrDatumDef:n,markDef:i,config:s})=>BNe(t,e,s.scale,n,i,s.bar),paddingInner:({scalePadding:t,channel:e,markDef:n,scaleType:i,config:s,hasNestedOffsetScale:o})=>kNe(t,e,n.type,i,s.scale,o),paddingOuter:({scalePadding:t,channel:e,scaleType:n,scalePaddingInner:i,config:s,hasNestedOffsetScale:o})=>INe(t,e,n,i,s.scale,o),reverse:({fieldOrDatumDef:t,scaleType:e,channel:n,config:i})=>{const s=Te(t)?t.sort:void 0;return FNe(e,s,n,i.scale)},zero:({channel:t,fieldOrDatumDef:e,domain:n,markDef:i,scaleType:s,config:o,hasSecondaryRangeChannel:c})=>ONe(t,e,n,i,s,o.scale,c)};function HJ(t){Dn(t)?pNe(t):WJ(t,"range")}function WJ(t,e){const n=t.component.scales;for(const i of t.children)e==="range"?HJ(i):VJ(i,e);for(const i of we(n)){let s;for(const o of t.children){const c=o.component.scales[i];if(c){const d=c.getWithExplicit(e);s=pd(s,d,e,"scale",GK((f,u)=>{switch(e){case"range":return f.step&&u.step?f.step-u.step:0}return 0}))}}n[i].setWithExplicit(e,s)}}function ENe(t,e){const n=e.bin;if(yn(n)){const i=v3(t,e.field,n);return new Cs(()=>t.getSignalName(i))}else if(bi(n)&&ju(n)&&n.step!==void 0)return{step:n.step}}function SNe(t,e){if(Mt([qs,nl,il],t)&&e!=="nominal")return"hcl"}function xNe(t,e,n,i,s,o){var c;if(!(((c=$o(o))===null||c===void 0?void 0:c.bin)||he(n)||s!=null||i!=null||Mt([Ns.TIME,Ns.UTC],t)))return _i(e)?!0:void 0}function BNe(t,e,n,i,s,o){if(_i(t)){if(ba(e)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:c,orient:d}=s;if(c==="bar"&&!(Te(i)&&(i.bin||i.timeUnit))&&(d==="vertical"&&t==="x"||d==="horizontal"&&t==="y"))return o.continuousBandSize}if(e===Ns.POINT)return n.pointPadding}}function kNe(t,e,n,i,s,o=!1){if(t===void 0){if(_i(e)){const{bandPaddingInner:c,barBandPaddingInner:d,rectBandPaddingInner:f,bandWithNestedOffsetPaddingInner:u}=s;return o?u:zn(c,n==="bar"?d:f)}else if(pg(e)&&i===Ns.BAND)return s.offsetBandPaddingInner}}function INe(t,e,n,i,s,o=!1){if(t===void 0){if(_i(e)){const{bandPaddingOuter:c,bandWithNestedOffsetPaddingOuter:d}=s;if(o)return d;if(n===Ns.BAND)return zn(c,Re(i)?{signal:`${i.signal}/2`}:i/2)}else if(pg(e)){if(n===Ns.POINT)return .5;if(n===Ns.BAND)return s.offsetBandPaddingOuter}}}function FNe(t,e,n,i){if(n==="x"&&i.xReverse!==void 0)return pr(t)&&e==="descending"?Re(i.xReverse)?{signal:`!${i.xReverse.signal}`}:!i.xReverse:i.xReverse;if(pr(t)&&e==="descending")return!0}function ONe(t,e,n,i,s,o,c){if(!!n&&n!=="unaggregated"&&pr(s)){if(he(n)){const f=n[0],u=n[n.length-1];if(f<=0&&u>=0)return!0}return!1}if(t==="size"&&e.type==="quantitative"&&!Lp(s))return!0;if(!(Te(e)&&e.bin)&&Mt([...rl,...vke],t)){const{orient:f,type:u}=i;return Mt(["bar","area","line","trail"],u)&&(f==="horizontal"&&t==="y"||f==="vertical"&&t==="x")?!1:Mt(["bar","area"],u)&&!c?!0:o==null?void 0:o.zero}return!1}function MNe(t,e,n,i,s=!1){const o=ANe(e,n,i,s),{type:c}=t;return Dd(e)?c!==void 0?IFe(e,c)?Te(n)&&!kFe(c,n.type)?(be(FIe(c,o)),o):c:(be(IIe(e,c,o)),o):o:null}function ANe(t,e,n,i){var s;switch(e.type){case"nominal":case"ordinal":{if(qh(t)||fB(t)==="discrete")return t==="shape"&&e.type==="ordinal"&&be(uB(t,"ordinal")),"ordinal";if(_i(t)||pg(t)){if(Mt(["rect","bar","image","rule"],n.type)||i)return"band"}else if(n.type==="arc"&&t in vC)return"band";const o=n[Vs(t)];return fu(o)||Dp(e)&&((s=e.axis)===null||s===void 0?void 0:s.tickBand)?"band":"point"}case"temporal":return qh(t)?"time":fB(t)==="discrete"?(be(uB(t,"temporal")),"ordinal"):Te(e)&&e.timeUnit&&Yi(e.timeUnit).utc?"utc":"time";case"quantitative":return qh(t)?Te(e)&&yn(e.bin)?"bin-ordinal":"linear":fB(t)==="discrete"?(be(uB(t,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(wX(e.type))}function NNe(t,{ignoreRange:e}={}){YJ(t),DJ(t);for(const n of BFe)VJ(t,n);e||HJ(t)}function YJ(t){Dn(t)?t.component.scales=CNe(t):t.component.scales=LNe(t)}function CNe(t){const{encoding:e,mark:n,markDef:i}=t,s={};for(const o of rS){const c=Qn(e[o]);if(c&&n===zX&&o===Gs&&c.type===gg)continue;let d=c&&c.scale;if(pg(o)){const f=iX(o);if(!ZI(e,f)){d&&be(pIe(o));continue}}if(c&&d!==null&&d!==!1){d!=null||(d={});const f=ZI(e,o),u=MNe(d,o,c,i,f);s[o]=new UJ(t.scaleName(`${o}`,!0),{value:u,explicit:d.type===u})}}return s}const RNe=GK((t,e)=>X6(t)-X6(e));function LNe(t){var e,n;const i=t.component.scales={},s={},o=t.component.resolve;for(const c of t.children){YJ(c);for(const d of we(c.component.scales))if((e=(n=o.scale)[d])!==null&&e!==void 0||(n[d]=xJ(d,t)),o.scale[d]==="shared"){const f=s[d],u=c.component.scales[d].getWithExplicit("type");f?_Fe(f.value,u.value)?s[d]=pd(f,u,"type","scale",RNe):(o.scale[d]="independent",delete s[d]):s[d]=u}}for(const c of we(s)){const d=t.scaleName(c,!0),f=s[c];i[c]=new UJ(d,f);for(const u of t.children){const a=u.component.scales[c];a&&(u.renameScale(a.get("name"),d),a.merged=!0)}}return i}var bB=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};class TB{constructor(){this.nameMap={}}rename(e,n){this.nameMap[e]=n}has(e){return this.nameMap[e]!==void 0}get(e){for(;this.nameMap[e]&&e!==this.nameMap[e];)e=this.nameMap[e];return e}}function Dn(t){return(t==null?void 0:t.type)==="unit"}function Ba(t){return(t==null?void 0:t.type)==="facet"}function k3(t){return(t==null?void 0:t.type)==="concat"}function bg(t){return(t==null?void 0:t.type)==="layer"}class I3{constructor(e,n,i,s,o,c,d){var f,u;this.type=n,this.parent=i,this.config=o,this.correctDataNames=a=>{var _,w,m;return!((_=a.from)===null||_===void 0)&&_.data&&(a.from.data=this.lookupDataSource(a.from.data)),!((m=(w=a.from)===null||w===void 0?void 0:w.facet)===null||m===void 0)&&m.data&&(a.from.facet.data=this.lookupDataSource(a.from.facet.data)),a},this.parent=i,this.config=o,this.view=Ss(d),this.name=(f=e.name)!==null&&f!==void 0?f:s,this.title=Tc(e.title)?{text:e.title}:e.title?Ss(e.title):void 0,this.scaleNameMap=i?i.scaleNameMap:new TB,this.projectionNameMap=i?i.projectionNameMap:new TB,this.signalNameMap=i?i.signalNameMap:new TB,this.data=e.data,this.description=e.description,this.transforms=jOe((u=e.transform)!==null&&u!==void 0?u:[]),this.layout=n==="layer"||n==="unit"?{}:V2e(e,n,o),this.component={data:{sources:i?i.component.data.sources:[],outputNodes:i?i.component.data.outputNodes:{},outputNodeRefCounts:i?i.component.data.outputNodeRefCounts:{},isFaceted:hS(e)||(i==null?void 0:i.component.data.isFaceted)&&e.data===void 0},layoutSize:new sc,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:Object.assign({scale:{},axis:{},legend:{}},c?dt(c):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){NNe(this)}parseProjection(){RJ(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){OJ(this)}assembleEncodeFromView(e){const n=bB(e,["style"]),i={};for(const s of we(n)){const o=n[s];o!==void 0&&(i[s]=bn(o))}return i}assembleGroupEncodeEntry(e){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!e&&(this.description&&(n.description=bn(this.description)),this.type==="unit"||this.type==="layer")?Object.assign({width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")},n!=null?n:{}):on(n)?void 0:n}assembleLayout(){if(!this.layout)return;const e=this.layout,{spacing:n}=e,i=bB(e,["spacing"]),{component:s,config:o}=this,c=ZMe(s.layoutHeaders,o);return Object.assign(Object.assign(Object.assign({padding:n},this.assembleDefaultLayout()),i),c?{titleBand:c}:{})}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:e}=this.component;let n=[];for(const i of Or)e[i].title&&n.push(WMe(this,i));for(const i of m3)n=n.concat(YMe(this,i));return n}assembleAxes(){return RMe(this.component.axes,this.config)}assembleLegends(){return AJ(this)}assembleProjections(){return EAe(this)}assembleTitle(){var e,n,i;const s=(e=this.title)!==null&&e!==void 0?e:{},{encoding:o}=s,c=bB(s,["encoding"]),d=Object.assign(Object.assign(Object.assign({},dX(this.config.title).nonMarkTitleProperties),c),o?{encode:{update:o}}:{});if(d.text)return Mt(["unit","layer"],this.type)?Mt(["middle",void 0],d.anchor)&&((n=d.frame)!==null&&n!==void 0||(d.frame="group")):(i=d.anchor)!==null&&i!==void 0||(d.anchor="start"),on(d)?void 0:d}assembleGroup(e=[]){const n={};e=e.concat(this.assembleSignals()),e.length>0&&(n.signals=e);const i=this.assembleLayout();i&&(n.layout=i),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const s=!this.parent||Ba(this.parent)?jJ(this):[];s.length>0&&(n.scales=s);const o=this.assembleAxes();o.length>0&&(n.axes=o);const c=this.assembleLegends();return c.length>0&&(n.legends=c),n}getName(e){return Sn((this.name?`${this.name}_`:"")+e)}getDataName(e){return this.getName(gn[e].toLowerCase())}requestDataName(e){const n=this.getDataName(e),i=this.component.data.outputNodeRefCounts;return i[n]=(i[n]||0)+1,n}getSizeSignalRef(e){if(Ba(this.parent)){const n=EJ(e),i=sS(n),s=this.component.scales[i];if(s&&!s.merged){const o=s.get("type"),c=s.get("range");if(yi(o)&&Ud(c)){const d=s.get("name"),f=kS(this,i),u=B3(f);if(u){const a=xe({aggregate:"distinct",field:u},{expr:"datum"});return{signal:vJ(d,s,a)}}else return be(BC(i)),null}}}return{signal:this.signalNameMap.get(this.getName(e))}}lookupDataSource(e){const n=this.component.data.outputNodes[e];return n?n.getSource():e}getSignalName(e){return this.signalNameMap.get(e)}renameSignal(e,n){this.signalNameMap.rename(e,n)}renameScale(e,n){this.scaleNameMap.rename(e,n)}renameProjection(e,n){this.projectionNameMap.rename(e,n)}scaleName(e,n){if(n)return this.getName(e);if(eX(e)&&Dd(e)&&this.component.scales[e]||this.scaleNameMap.has(this.getName(e)))return this.scaleNameMap.get(this.getName(e))}projectionName(e){if(e)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(e){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[e];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(e):void 0}getSelectionComponent(e,n){let i=this.component.selection[e];if(!i&&this.parent&&(i=this.parent.getSelectionComponent(e,n)),!i)throw new Error(Hke(n));return i}hasAxisOrientSignalRef(){var e,n;return((e=this.component.axes.x)===null||e===void 0?void 0:e.some(i=>i.hasOrientSignalRef()))||((n=this.component.axes.y)===null||n===void 0?void 0:n.some(i=>i.hasOrientSignalRef()))}}class XJ extends I3{vgField(e,n={}){const i=this.fieldDef(e);if(!!i)return xe(i,n)}reduceFieldDef(e,n){return w2e(this.getMapping(),(i,s,o)=>{const c=$o(s);return c?e(i,c,o):i},n)}forEachFieldDef(e,n){e3(this.getMapping(),(i,s)=>{const o=$o(i);o&&e(o,s)},n)}}var PNe=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};class IS extends dn{constructor(e,n){var i,s,o;super(e),this.transform=n,this.transform=dt(n);const c=(i=this.transform.as)!==null&&i!==void 0?i:[void 0,void 0];this.transform.as=[(s=c[0])!==null&&s!==void 0?s:"value",(o=c[1])!==null&&o!==void 0?o:"density"],n.groupby&&n.minsteps==null&&n.maxsteps==null&&n.steps==null&&(this.transform.steps=200)}clone(){return new IS(null,dt(this.transform))}dependentFields(){var e;return new Set([this.transform.density,...(e=this.transform.groupby)!==null&&e!==void 0?e:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Lt(this.transform)}`}assemble(){const e=this.transform,{density:n}=e,i=PNe(e,["density"]);return Object.assign({type:"kde",field:n},i)}}class Ay extends dn{constructor(e,n){super(e),this.filter=n}clone(){return new Ay(null,Object.assign({},this.filter))}static make(e,n){const{config:i,mark:s,markDef:o}=n;if(tn("invalid",o,i)!=="filter")return null;const d=n.reduceFieldDef((f,u,a)=>{const _=Dd(a)&&n.getScaleComponent(a);if(_){const w=_.get("type");pr(w)&&u.aggregate!=="count"&&!zd(s)&&(f[u.field]=u)}return f},{});return we(d).length?new Ay(e,d):null}dependentFields(){return new Set(we(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Lt(this.filter)}`}assemble(){const e=we(this.filter).reduce((n,i)=>{const s=this.filter[i],o=xe(s,{expr:"datum"});return s!==null&&(s.type==="temporal"?n.push(`(isDate(${o}) || (isValid(${o}) && isFinite(+${o})))`):s.type==="quantitative"&&(n.push(`isValid(${o})`),n.push(`isFinite(+${o})`))),n},[]);return e.length>0?{type:"filter",expr:e.join(" && ")}:null}}class FS extends dn{constructor(e,n){super(e),this.transform=n,this.transform=dt(n);const{flatten:i,as:s=[]}=this.transform;this.transform.as=i.map((o,c)=>{var d;return(d=s[c])!==null&&d!==void 0?d:o})}clone(){return new FS(this.parent,dt(this.transform))}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Lt(this.transform)}`}assemble(){const{flatten:e,as:n}=this.transform;return{type:"flatten",fields:e,as:n}}}class OS extends dn{constructor(e,n){var i,s,o;super(e),this.transform=n,this.transform=dt(n);const c=(i=this.transform.as)!==null&&i!==void 0?i:[void 0,void 0];this.transform.as=[(s=c[0])!==null&&s!==void 0?s:"key",(o=c[1])!==null&&o!==void 0?o:"value"]}clone(){return new OS(null,dt(this.transform))}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Lt(this.transform)}`}assemble(){const{fold:e,as:n}=this.transform;return{type:"fold",fields:e,as:n}}}class Hh extends dn{constructor(e,n,i,s){super(e),this.fields=n,this.geojson=i,this.signal=s}clone(){return new Hh(null,dt(this.fields),this.geojson,this.signal)}static parseAll(e,n){if(n.component.projection&&!n.component.projection.isFit)return e;let i=0;for(const s of[[tl,el],[Gr,qa]]){const o=s.map(c=>{const d=Qn(n.encoding[c]);return Te(d)?d.field:al(d)?{expr:`${d.datum}`}:Ca(d)?{expr:`${d.value}`}:void 0});(o[0]||o[1])&&(e=new Hh(e,o,null,n.getName(`geojson_${i++}`)))}if(n.channelHasField(Gs)){const s=n.typedFieldDef(Gs);s.type===gg&&(e=new Hh(e,null,s.field,n.getName(`geojson_${i++}`)))}return e}dependentFields(){var e;const n=((e=this.fields)!==null&&e!==void 0?e:[]).filter(ke);return new Set([...this.geojson?[this.geojson]:[],...n])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Lt(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],Object.assign(Object.assign(Object.assign({type:"geojson"},this.fields?{fields:this.fields}:{}),this.geojson?{geojson:this.geojson}:{}),{signal:this.signal})]}}class Ny extends dn{constructor(e,n,i,s){super(e),this.projection=n,this.fields=i,this.as=s}clone(){return new Ny(null,this.projection,dt(this.fields),dt(this.as))}static parseAll(e,n){if(!n.projectionName())return e;for(const i of[[tl,el],[Gr,qa]]){const s=i.map(c=>{const d=Qn(n.encoding[c]);return Te(d)?d.field:al(d)?{expr:`${d.datum}`}:Ca(d)?{expr:`${d.value}`}:void 0}),o=i[0]===Gr?"2":"";(s[0]||s[1])&&(e=new Ny(e,n.projectionName(),s,[n.getName(`x${o}`),n.getName(`y${o}`)]))}return e}dependentFields(){return new Set(this.fields.filter(ke))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Lt(this.fields)} ${Lt(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class zf extends dn{constructor(e,n){super(e),this.transform=n}clone(){return new zf(null,dt(this.transform))}dependentFields(){var e;return new Set([this.transform.impute,this.transform.key,...(e=this.transform.groupby)!==null&&e!==void 0?e:[]])}producedFields(){return new Set([this.transform.impute])}processSequence(e){const{start:n=0,stop:i,step:s}=e;return{signal:`sequence(${[n,i,...s?[s]:[]].join(",")})`}}static makeFromTransform(e,n){return new zf(e,n)}static makeFromEncoding(e,n){const i=n.encoding,s=i.x,o=i.y;if(Te(s)&&Te(o)){const c=s.impute?s:o.impute?o:void 0;if(c===void 0)return;const d=s.impute?o:o.impute?s:void 0,{method:f,value:u,frame:a,keyvals:_}=c.impute,w=hK(n.mark,i);return new zf(e,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({impute:c.field,key:d.field},f?{method:f}:{}),u!==void 0?{value:u}:{}),a?{frame:a}:{}),_!==void 0?{keyvals:_}:{}),w.length?{groupby:w}:{}))}return null}hash(){return`Impute ${Lt(this.transform)}`}assemble(){const{impute:e,key:n,keyvals:i,method:s,groupby:o,value:c,frame:d=[null,null]}=this.transform,f=Object.assign(Object.assign(Object.assign(Object.assign({type:"impute",field:e,key:n},i?{keyvals:TOe(i)?this.processSequence(i):i}:{}),{method:"value"}),o?{groupby:o}:{}),{value:!s||s==="value"?c:null});if(s&&s!=="value"){const u=Object.assign({type:"window",as:[`imputed_${e}_value`],ops:[s],fields:[e],frame:d,ignorePeers:!1},o?{groupby:o}:{}),a={type:"formula",expr:`datum.${e} === null ? datum.imputed_${e}_value : datum.${e}`,as:e};return[f,u,a]}else return[f]}}var DNe=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};class MS extends dn{constructor(e,n){var i,s,o;super(e),this.transform=n,this.transform=dt(n);const c=(i=this.transform.as)!==null&&i!==void 0?i:[void 0,void 0];this.transform.as=[(s=c[0])!==null&&s!==void 0?s:n.on,(o=c[1])!==null&&o!==void 0?o:n.loess]}clone(){return new MS(null,dt(this.transform))}dependentFields(){var e;return new Set([this.transform.loess,this.transform.on,...(e=this.transform.groupby)!==null&&e!==void 0?e:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Lt(this.transform)}`}assemble(){const e=this.transform,{loess:n,on:i}=e,s=DNe(e,["loess","on"]);return Object.assign({type:"loess",x:i,y:n},s)}}class Cy extends dn{constructor(e,n,i){super(e),this.transform=n,this.secondary=i}clone(){return new Cy(null,dt(this.transform),this.secondary)}static make(e,n,i,s){const o=n.component.data.sources,{from:c}=i;let d=null;if(vOe(c)){let f=QJ(c.data,o);f||(f=new gu(c.data),o.push(f));const u=n.getName(`lookup_${s}`);d=new ds(f,u,gn.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[u]=d}else if(EOe(c)){const f=c.param;i=Object.assign({as:f},i);let u;try{u=n.getSelectionComponent(Sn(f),f)}catch{throw new Error(Xke(f))}if(d=u.materialized,!d)throw new Error(Kke(f))}return new Cy(e,i,d.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Ie(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Lt({transform:this.transform,secondary:this.secondary})}`}assemble(){let e;if(this.transform.from.fields)e=Object.assign({values:this.transform.from.fields},this.transform.as?{as:Ie(this.transform.as)}:{});else{let n=this.transform.as;ke(n)||(be(sIe),n="_lookup"),e={as:[n]}}return Object.assign(Object.assign({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},e),this.transform.default?{default:this.transform.default}:{})}}var jNe=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};class AS extends dn{constructor(e,n){var i,s,o;super(e),this.transform=n,this.transform=dt(n);const c=(i=this.transform.as)!==null&&i!==void 0?i:[void 0,void 0];this.transform.as=[(s=c[0])!==null&&s!==void 0?s:"prob",(o=c[1])!==null&&o!==void 0?o:"value"]}clone(){return new AS(null,dt(this.transform))}dependentFields(){var e;return new Set([this.transform.quantile,...(e=this.transform.groupby)!==null&&e!==void 0?e:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Lt(this.transform)}`}assemble(){const e=this.transform,{quantile:n}=e,i=jNe(e,["quantile"]);return Object.assign({type:"quantile",field:n},i)}}var UNe=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};class NS extends dn{constructor(e,n){var i,s,o;super(e),this.transform=n,this.transform=dt(n);const c=(i=this.transform.as)!==null&&i!==void 0?i:[void 0,void 0];this.transform.as=[(s=c[0])!==null&&s!==void 0?s:n.on,(o=c[1])!==null&&o!==void 0?o:n.regression]}clone(){return new NS(null,dt(this.transform))}dependentFields(){var e;return new Set([this.transform.regression,this.transform.on,...(e=this.transform.groupby)!==null&&e!==void 0?e:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Lt(this.transform)}`}assemble(){const e=this.transform,{regression:n,on:i}=e,s=UNe(e,["regression","on"]);return Object.assign({type:"regression",x:i,y:n},s)}}class CS extends dn{constructor(e,n){super(e),this.transform=n}clone(){return new CS(null,dt(this.transform))}addDimensions(e){var n;this.transform.groupby=wo(((n=this.transform.groupby)!==null&&n!==void 0?n:[]).concat(e),i=>i)}producedFields(){}dependentFields(){var e;return new Set([this.transform.pivot,this.transform.value,...(e=this.transform.groupby)!==null&&e!==void 0?e:[]])}hash(){return`PivotTransform ${Lt(this.transform)}`}assemble(){const{pivot:e,value:n,groupby:i,limit:s,op:o}=this.transform;return Object.assign(Object.assign(Object.assign({type:"pivot",field:e,value:n},s!==void 0?{limit:s}:{}),o!==void 0?{op:o}:{}),i!==void 0?{groupby:i}:{})}}class RS extends dn{constructor(e,n){super(e),this.transform=n}clone(){return new RS(null,dt(this.transform))}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Lt(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function KJ(t){let e=0;function n(i,s){var o;if(i instanceof gu&&!i.isGenerator&&!Up(i.data)&&(t.push(s),s={name:null,source:s.name,transform:[]}),i instanceof ji&&(i.parent instanceof gu&&!s.source?(s.format=Object.assign(Object.assign({},(o=s.format)!==null&&o!==void 0?o:{}),{parse:i.assembleFormatParse()}),s.transform.push(...i.assembleTransforms(!0))):s.transform.push(...i.assembleTransforms())),i instanceof mg){s.name||(s.name=`data_${e++}`),!s.source||s.transform.length>0?(t.push(s),i.data=s.name):i.data=s.source,t.push(...i.assemble());return}switch((i instanceof Wm||i instanceof Ym||i instanceof Ay||i instanceof yg||i instanceof $p||i instanceof Ny||i instanceof xa||i instanceof Cy||i instanceof wg||i instanceof qu||i instanceof OS||i instanceof FS||i instanceof IS||i instanceof MS||i instanceof AS||i instanceof NS||i instanceof md||i instanceof RS||i instanceof CS)&&s.transform.push(i.assemble()),(i instanceof Io||i instanceof ko||i instanceof zf||i instanceof Pl||i instanceof Hh)&&s.transform.push(...i.assemble()),i instanceof ds&&(s.source&&s.transform.length===0?i.setSource(s.source):i.parent instanceof ds?i.setSource(s.name):(s.name||(s.name=`data_${e++}`),i.setSource(s.name),i.numChildren()===1&&(t.push(s),s={name:null,source:s.name,transform:[]}))),i.numChildren()){case 0:i instanceof ds&&(!s.source||s.transform.length>0)&&t.push(s);break;case 1:n(i.children[0],s);break;default:{s.name||(s.name=`data_${e++}`);let c=s.name;!s.source||s.transform.length>0?t.push(s):c=s.source;for(const d of i.children)n(d,{name:null,source:c,transform:[]});break}}}return n}function zNe(t){const e=[],n=KJ(e);for(const i of t.children)n(i,{source:t.name,name:null,transform:[]});return e}function $Ne(t,e){var n,i;const s=[],o=KJ(s);let c=0;for(const f of t.sources){f.hasName()||(f.dataName=`source_${c++}`);const u=f.assemble();o(f,u)}for(const f of s)f.transform.length===0&&delete f.transform;let d=0;for(const[f,u]of s.entries())((n=u.transform)!==null&&n!==void 0?n:[]).length===0&&!u.source&&s.splice(d++,0,s.splice(f,1)[0]);for(const f of s)for(const u of(i=f.transform)!==null&&i!==void 0?i:[])u.type==="lookup"&&(u.from=t.outputNodes[u.from].getSource());for(const f of s)f.name in e&&(f.values=e[f.name]);return s}function qNe(t){return t==="top"||t==="left"||Re(t)?"header":"footer"}function GNe(t){for(const e of Or)VNe(t,e);Uj(t,"x"),Uj(t,"y")}function VNe(t,e){var n;const{facet:i,config:s,child:o,component:c}=t;if(t.channelHasField(e)){const d=i[e],f=Gp("title",null,s,e);let u=Gh(d,s,{allowDisabling:!0,includeDefault:f===void 0||!!f});o.component.layoutHeaders[e].title&&(u=he(u)?u.join(", "):u,u+=` / ${o.component.layoutHeaders[e].title}`,o.component.layoutHeaders[e].title=null);const a=Gp("labelOrient",d.header,s,e),_=d.header!==null?zn((n=d.header)===null||n===void 0?void 0:n.labels,s.header.labels,!0):!1,w=Mt(["bottom","right"],a)?"footer":"header";c.layoutHeaders[e]={title:d.header!==null?u:null,facetFieldDef:d,[w]:e==="facet"?[]:[JJ(t,e,_)]}}}function JJ(t,e,n){const i=e==="row"?"height":"width";return{labels:n,sizeSignal:t.child.component.layoutSize.get(i)?t.child.getSizeSignalRef(i):void 0,axes:[]}}function Uj(t,e){var n;const{child:i}=t;if(i.component.axes[e]){const{layoutHeaders:s,resolve:o}=t.component;if(o.axis[e]=T3(o,e),o.axis[e]==="shared"){const c=e==="x"?"column":"row",d=s[c];for(const f of i.component.axes[e]){const u=qNe(f.get("orient"));(n=d[u])!==null&&n!==void 0||(d[u]=[JJ(t,c,!1)]);const a=b_(f,"main",t.config,{header:!0});a&&d[u][0].axes.push(a),f.mainExtracted=!0}}}}function HNe(t){F3(t),g1(t,"width"),g1(t,"height")}function WNe(t){F3(t);const e=t.layout.columns===1?"width":"childWidth",n=t.layout.columns===void 0?"height":"childHeight";g1(t,e),g1(t,n)}function F3(t){for(const e of t.children)e.parseLayoutSize()}function g1(t,e){var n;const i=EJ(e),s=sS(i),o=t.component.resolve,c=t.component.layoutSize;let d;for(const f of t.children){const u=f.component.layoutSize.getWithExplicit(i),a=(n=o.scale[s])!==null&&n!==void 0?n:xJ(s,t);if(a==="independent"&&u.value==="step"){d=void 0;break}if(d){if(a==="independent"&&d.value!==u.value){d=void 0;break}d=pd(d,u,i,"")}else d=u}if(d){for(const f of t.children)t.renameSignal(f.getName(i),t.getName(e)),f.component.layoutSize.set(i,"merged",!1);c.setWithExplicit(e,d)}else c.setWithExplicit(e,{explicit:!1,value:void 0})}function YNe(t){const{size:e,component:n}=t;for(const i of rl){const s=Vs(i);if(e[s]){const o=e[s];n.layoutSize.set(s,Go(o)?"step":o,!0)}else{const o=XNe(t,s);n.layoutSize.set(s,o,!1)}}}function XNe(t,e){const n=e==="width"?"x":"y",i=t.config,s=t.getScaleComponent(n);if(s){const o=s.get("type"),c=s.get("range");if(yi(o)){const d=f1(i.view,e);return Ud(c)||Go(d)?"step":d}else return tF(i.view,e)}else{if(t.hasProjection||t.mark==="arc")return tF(i.view,e);{const o=f1(i.view,e);return Go(o)?o.step:o}}}function yF(t,e,n){return xe(e,Object.assign({suffix:`by_${xe(t)}`},n!=null?n:{}))}class j_ extends XJ{constructor(e,n,i,s){super(e,"facet",n,i,s,e.resolve),this.child=C3(e.spec,this,this.getName("child"),void 0,s),this.children=[this.child],this.facet=this.initFacet(e.facet)}initFacet(e){if(!$m(e))return{facet:this.initFacetFieldDef(e,"facet")};const n=we(e),i={};for(const s of n){if(![Cl,Rl].includes(s)){be(oS(s,"facet"));break}const o=e[s];if(o.field===void 0){be(WI(o,s));break}i[s]=this.initFacetFieldDef(o,s)}return i}initFacetFieldDef(e,n){const i=QC(e,n);return i.header?i.header=Ss(i.header):i.header===null&&(i.header=null),i}channelHasField(e){return!!this.facet[e]}fieldDef(e){return this.facet[e]}parseData(){this.component.data=LS(this),this.child.parseData()}parseLayoutSize(){F3(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),GNe(this)}assembleSelectionTopLevelSignals(e){return this.child.assembleSelectionTopLevelSignals(e)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(e){return this.child.assembleSelectionData(e)}getHeaderLayoutMixins(){var e,n,i;const s={};for(const o of Or)for(const c of w3){const d=this.component.layoutHeaders[o],f=d[c],{facetFieldDef:u}=d;if(u){const a=Gp("titleOrient",u.header,this.config,o);if(["right","bottom"].includes(a)){const _=xS(o,a);(e=s.titleAnchor)!==null&&e!==void 0||(s.titleAnchor={}),s.titleAnchor[_]="end"}}if(f!=null&&f[0]){const a=o==="row"?"height":"width",_=c==="header"?"headerBand":"footerBand";o!=="facet"&&!this.child.component.layoutSize.get(a)&&((n=s[_])!==null&&n!==void 0||(s[_]={}),s[_][o]=.5),d.title&&((i=s.offset)!==null&&i!==void 0||(s.offset={}),s.offset[o==="row"?"rowTitle":"columnTitle"]=10)}}return s}assembleDefaultLayout(){const{column:e,row:n}=this.facet,i=e?this.columnDistinctSignal():n?1:void 0;let s="all";return(!n&&this.component.resolve.scale.x==="independent"||!e&&this.component.resolve.scale.y==="independent")&&(s="none"),Object.assign(Object.assign(Object.assign({},this.getHeaderLayoutMixins()),i?{columns:i}:{}),{bounds:"full",align:s})}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof j_))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(e){return this.parent&&this.parent instanceof j_?Object.assign(Object.assign({},this.channelHasField("column")?{encode:{update:{columns:{field:xe(this.facet.column,{prefix:"distinct"})}}}}:{}),super.assembleGroup(e)):super.assembleGroup(e)}getCardinalityAggregateForChild(){const e=[],n=[],i=[];if(this.child instanceof j_){if(this.child.channelHasField("column")){const s=xe(this.child.facet.column);e.push(s),n.push("distinct"),i.push(`distinct_${s}`)}}else for(const s of rl){const o=this.child.component.scales[s];if(o&&!o.merged){const c=o.get("type"),d=o.get("range");if(yi(c)&&Ud(d)){const f=kS(this.child,s),u=B3(f);u?(e.push(u),n.push("distinct"),i.push(`distinct_${u}`)):be(BC(s))}}}return{fields:e,ops:n,as:i}}assembleFacet(){const{name:e,data:n}=this.component.data.facetRoot,{row:i,column:s}=this.facet,{fields:o,ops:c,as:d}=this.getCardinalityAggregateForChild(),f=[];for(const a of Or){const _=this.facet[a];if(_){f.push(xe(_));const{bin:w,sort:m}=_;if(yn(w)&&f.push(xe(_,{binSuffix:"end"})),Bo(m)){const{field:l,op:T=uS}=m,b=yF(_,m);i&&s?(o.push(b),c.push("max"),d.push(b)):(o.push(l),c.push(T),d.push(b))}else if(he(m)){const l=qp(_,a);o.push(l),c.push("max"),d.push(l)}}}const u=!!i&&!!s;return Object.assign({name:e,data:n,groupby:f},u||o.length>0?{aggregate:Object.assign(Object.assign({},u?{cross:u}:{}),o.length?{fields:o,ops:c,as:d}:{})}:{})}facetSortFields(e){const{facet:n}=this,i=n[e];return i?Bo(i.sort)?[yF(i,i.sort,{expr:"datum"})]:he(i.sort)?[qp(i,e,{expr:"datum"})]:[xe(i,{expr:"datum"})]:[]}facetSortOrder(e){const{facet:n}=this,i=n[e];if(i){const{sort:s}=i;return[(Bo(s)?s.order:!he(s)&&s)||"ascending"]}return[]}assembleLabelTitle(){var e;const{facet:n,config:i}=this;if(n.facet)return fF(n.facet,"facet",i);const s={row:["top","bottom"],column:["left","right"]};for(const o of m3)if(n[o]){const c=Gp("labelOrient",(e=n[o])===null||e===void 0?void 0:e.header,i,o);if(s[o].includes(c))return fF(n[o],o,i)}}assembleMarks(){const{child:e}=this,n=this.component.data.facetRoot,i=zNe(n),s=e.assembleGroupEncodeEntry(!1),o=this.assembleLabelTitle()||e.assembleTitle(),c=e.assembleGroupStyle();return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:this.getName("cell"),type:"group"},o?{title:o}:{}),c?{style:c}:{}),{from:{facet:this.assembleFacet()},sort:{field:Or.map(f=>this.facetSortFields(f)).flat(),order:Or.map(f=>this.facetSortOrder(f)).flat()}}),i.length>0?{data:i}:{}),s?{encode:{update:s}}:{}),e.assembleGroup(QOe(this,[])))]}getMapping(){return this.facet}}function KNe(t,e){const{row:n,column:i}=e;if(n&&i){let s=null;for(const o of[n,i])if(Bo(o.sort)){const{field:c,op:d=uS}=o.sort;t=s=new qu(t,{joinaggregate:[{op:d,field:c,as:yF(o,o.sort,{forAs:!0})}],groupby:[xe(o)]})}return s}return null}function QJ(t,e){var n,i,s,o;for(const c of e){const d=c.data;if(t.name&&c.hasName()&&t.name!==c.dataName)continue;const f=(n=t.format)===null||n===void 0?void 0:n.mesh,u=(i=d.format)===null||i===void 0?void 0:i.feature;if(f&&u)continue;const a=(s=t.format)===null||s===void 0?void 0:s.feature;if((a||u)&&a!==u)continue;const _=(o=d.format)===null||o===void 0?void 0:o.mesh;if(!((f||_)&&f!==_)){if(Oy(t)&&Oy(d)){if(mo(t.values,d.values))return c}else if(Up(t)&&Up(d)){if(t.url===d.url)return c}else if(VK(t)&&t.name===c.dataName)return c}}return null}function JNe(t,e){if(t.data||!t.parent){if(t.data===null){const i=new gu({values:[]});return e.push(i),i}const n=QJ(t.data,e);if(n)return qc(t.data)||(n.data.format=GY({},t.data.format,n.data.format)),!n.hasName()&&t.data.name&&(n.dataName=t.data.name),n;{const i=new gu(t.data);return e.push(i),i}}else return t.parent.component.data.facetRoot?t.parent.component.data.facetRoot:t.parent.component.data.main}function QNe(t,e,n){var i,s;let o=0;for(const c of e.transforms){let d,f;if(NOe(c))f=t=new $p(t,c),d="derived";else if(f3(c)){const u=PAe(c);f=t=(i=ji.makeWithAncestors(t,{},u,n))!==null&&i!==void 0?i:t,t=new yg(t,e,c.filter)}else if(jK(c))f=t=Io.makeFromTransform(t,c,e),d="number";else if(ROe(c))d="date",n.getWithExplicit(c.field).value===void 0&&(t=new ji(t,{[c.field]:d}),n.set(c.field,d,!1)),f=t=ko.makeFromTransform(t,c);else if(LOe(c))f=t=xa.makeFromTransform(t,c),d="number",y3(e)&&(t=new md(t));else if(DK(c))f=t=Cy.make(t,e,c,o++),d="derived";else if(OOe(c))f=t=new wg(t,c),d="number";else if(MOe(c))f=t=new qu(t,c),d="number";else if(POe(c))f=t=Pl.makeFromTransform(t,c),d="derived";else if(DOe(c))f=t=new OS(t,c),d="derived";else if(AOe(c))f=t=new FS(t,c),d="derived";else if(SOe(c))f=t=new CS(t,c),d="derived";else if(FOe(c))t=new RS(t,c);else if(COe(c))f=t=zf.makeFromTransform(t,c),d="derived";else if(xOe(c))f=t=new IS(t,c),d="derived";else if(BOe(c))f=t=new AS(t,c),d="derived";else if(kOe(c))f=t=new NS(t,c),d="derived";else if(IOe(c))f=t=new MS(t,c),d="derived";else{be(iIe(c));continue}if(f&&d!==void 0)for(const u of(s=f.producedFields())!==null&&s!==void 0?s:[])n.set(u,d,!1)}return t}function LS(t){var e,n,i,s,o,c,d,f,u,a;let _=JNe(t,t.component.data.sources);const{outputNodes:w,outputNodeRefCounts:m}=t.component.data,l=t.data,b=!(l&&(qc(l)||Up(l)||Oy(l)))&&t.parent?t.parent.component.data.ancestorParse.clone():new XOe;qc(l)?(HK(l)?_=new Ym(_,l.sequence):u3(l)&&(_=new Wm(_,l.graticule)),b.parseNothing=!0):((e=l==null?void 0:l.format)===null||e===void 0?void 0:e.parse)===null&&(b.parseNothing=!0),_=(n=ji.makeExplicit(_,t,b))!==null&&n!==void 0?n:_,_=new md(_);const S=t.parent&&bg(t.parent);(Dn(t)||Ba(t))&&S&&(_=(i=Io.makeFromEncoding(_,t))!==null&&i!==void 0?i:_),t.transforms.length>0&&(_=QNe(_,t,b));const x=jAe(t),B=DAe(t);_=(s=ji.makeWithAncestors(_,{},Object.assign(Object.assign({},x),B),b))!==null&&s!==void 0?s:_,Dn(t)&&(_=Hh.parseAll(_,t),_=Ny.parseAll(_,t)),(Dn(t)||Ba(t))&&(S||(_=(o=Io.makeFromEncoding(_,t))!==null&&o!==void 0?o:_),_=(c=ko.makeFromEncoding(_,t))!==null&&c!==void 0?c:_,_=$p.parseAllForSortIndex(_,t));const F=t.getDataName(gn.Raw),k=new ds(_,F,gn.Raw,m);if(w[F]=k,_=k,Dn(t)){const P=xa.makeFromEncoding(_,t);P&&(_=P,y3(t)&&(_=new md(_))),_=(d=zf.makeFromEncoding(_,t))!==null&&d!==void 0?d:_,_=(f=Pl.makeFromEncoding(_,t))!==null&&f!==void 0?f:_}Dn(t)&&(_=(u=Ay.make(_,t))!==null&&u!==void 0?u:_);const A=t.getDataName(gn.Main),M=new ds(_,A,gn.Main,m);w[A]=M,_=M,Dn(t)&&NMe(t,M);let R=null;if(Ba(t)){const P=t.getName("facet");_=(a=KNe(_,t.facet))!==null&&a!==void 0?a:_,R=new mg(_,t,P,M.getSource()),w[P]=R}return Object.assign(Object.assign({},t.component.data),{outputNodes:w,outputNodeRefCounts:m,raw:k,main:M,facetRoot:R,ancestorParse:b})}class ZNe extends I3{constructor(e,n,i,s){var o,c,d,f;super(e,"concat",n,i,s,e.resolve),(((c=(o=e.resolve)===null||o===void 0?void 0:o.axis)===null||c===void 0?void 0:c.x)==="shared"||((f=(d=e.resolve)===null||d===void 0?void 0:d.axis)===null||f===void 0?void 0:f.y)==="shared")&&be(eIe),this.children=this.getChildren(e).map((u,a)=>C3(u,this,this.getName(`concat_${a}`),void 0,s))}parseData(){this.component.data=LS(this);for(const e of this.children)e.parseData()}parseSelections(){this.component.selection={};for(const e of this.children){e.parseSelections();for(const n of we(e.component.selection))this.component.selection[n]=e.component.selection[n]}}parseMarkGroup(){for(const e of this.children)e.parseMarkGroup()}parseAxesAndHeaders(){for(const e of this.children)e.parseAxesAndHeaders()}getChildren(e){return bS(e)?e.vconcat:c3(e)?e.hconcat:e.concat}parseLayoutSize(){WNe(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(e){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),e)}assembleSignals(){return this.children.forEach(e=>e.assembleSignals()),[]}assembleLayoutSignals(){const e=b3(this);for(const n of this.children)e.push(...n.assembleLayoutSignals());return e}assembleSelectionData(e){return this.children.reduce((n,i)=>i.assembleSelectionData(n),e)}assembleMarks(){return this.children.map(e=>{const n=e.assembleTitle(),i=e.assembleGroupStyle(),s=e.assembleGroupEncodeEntry(!1);return Object.assign(Object.assign(Object.assign(Object.assign({type:"group",name:e.getName("group")},n?{title:n}:{}),i?{style:i}:{}),s?{encode:{update:s}}:{}),e.assembleGroup())})}assembleGroupStyle(){}assembleDefaultLayout(){const e=this.layout.columns;return Object.assign(Object.assign({},e!=null?{columns:e}:{}),{bounds:"full",align:"each"})}}function eCe(t){return t===!1||t===null}const tCe=Object.assign(Object.assign({disable:1,gridScale:1,scale:1},cK),{labelExpr:1,encode:1}),ZJ=we(tCe);class O3 extends sc{constructor(e={},n={},i=!1){super(),this.explicit=e,this.implicit=n,this.mainExtracted=i}clone(){return new O3(dt(this.explicit),dt(this.implicit),this.mainExtracted)}hasAxisPart(e){return e==="axis"?!0:e==="grid"||e==="title"?!!this.get(e):!eCe(this.get(e))}hasOrientSignalRef(){return Re(this.explicit.orient)}}function nCe(t,e,n){var i;const{encoding:s,config:o}=t,c=(i=Qn(s[e]))!==null&&i!==void 0?i:Qn(s[sl(e)]),d=t.axis(e)||{},{format:f,formatType:u}=d;if(uu(u))return Object.assign({text:Ta({fieldOrDatumDef:c,field:"datum.value",format:f,formatType:u,config:o})},n);if(f===void 0&&u===void 0&&o.customFormatTypes){if(Pp(c)==="quantitative"){if(Dp(c)&&c.stack==="normalize"&&o.normalizedNumberFormatType)return Object.assign({text:Ta({fieldOrDatumDef:c,field:"datum.value",format:o.normalizedNumberFormat,formatType:o.normalizedNumberFormatType,config:o})},n);if(o.numberFormatType)return Object.assign({text:Ta({fieldOrDatumDef:c,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o})},n)}if(Pp(c)==="temporal"&&o.timeFormatType&&Te(c)&&!c.timeUnit)return Object.assign({text:Ta({fieldOrDatumDef:c,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})},n)}return n}function iCe(t){return rl.reduce((e,n)=>(t.component.scales[n]&&(e[n]=[dCe(n,t)]),e),{})}const sCe={bottom:"top",top:"bottom",left:"right",right:"left"};function rCe(t){var e;const{axes:n,resolve:i}=t.component,s={top:0,bottom:0,right:0,left:0};for(const o of t.children){o.parseAxesAndHeaders();for(const c of we(o.component.axes))i.axis[c]=T3(t.component.resolve,c),i.axis[c]==="shared"&&(n[c]=aCe(n[c],o.component.axes[c]),n[c]||(i.axis[c]="independent",delete n[c]))}for(const o of rl){for(const c of t.children)if(!!c.component.axes[o]){if(i.axis[o]==="independent"){n[o]=((e=n[o])!==null&&e!==void 0?e:[]).concat(c.component.axes[o]);for(const d of c.component.axes[o]){const{value:f,explicit:u}=d.getWithExplicit("orient");if(!Re(f)){if(s[f]>0&&!u){const a=sCe[f];s[f]>s[a]&&d.set("orient",a,!1)}s[f]++}}}delete c.component.axes[o]}if(i.axis[o]==="independent"&&n[o]&&n[o].length>1)for(const c of n[o])!!c.get("grid")&&!c.explicit.grid&&(c.implicit.grid=!1)}}function aCe(t,e){if(t){if(t.length!==e.length)return;const n=t.length;for(let i=0;i<n;i++){const s=t[i],o=e[i];if(!!s!=!!o)return;if(s&&o){const c=s.getWithExplicit("orient"),d=o.getWithExplicit("orient");if(c.explicit&&d.explicit&&c.value!==d.value)return;t[i]=oCe(s,o)}}}else return e.map(n=>n.clone());return t}function oCe(t,e){for(const n of ZJ){const i=pd(t.getWithExplicit(n),e.getWithExplicit(n),n,"axis",(s,o)=>{switch(n){case"title":return yX(s,o);case"gridScale":return{explicit:s.explicit,value:zn(s.value,o.value)}}return vS(s,o,n,"axis")});t.setWithExplicit(n,i)}return t}function lCe(t,e,n,i,s){if(e==="disable")return n!==void 0;switch(n=n||{},e){case"titleAngle":case"labelAngle":return t===(Re(n.labelAngle)?n.labelAngle:Iy(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(t===mJ(i,s))return!0}return t===n[e]}const cCe=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function dCe(t,e){var n,i,s;let o=e.axis(t);const c=new O3,d=Qn(e.encoding[t]),{mark:f,config:u}=e,a=(o==null?void 0:o.orient)||((n=u[t==="x"?"axisX":"axisY"])===null||n===void 0?void 0:n.orient)||((i=u.axis)===null||i===void 0?void 0:i.orient)||qMe(t),_=e.getScaleComponent(t).get("type"),w=LMe(t,_,a,e.config),m=o!==void 0?!o:cF("disable",u.style,o==null?void 0:o.style,w).configValue;if(c.set("disable",m,o!==void 0),m)return c;o=o||{};const l=UMe(d,o,t,u.style,w),T={fieldOrDatumDef:d,axis:o,channel:t,model:e,scaleType:_,orient:a,labelAngle:l,mark:f,config:u};for(const x of ZJ){const B=x in xj?xj[x](T):tj(x)?o[x]:void 0,F=B!==void 0,k=lCe(B,x,o,e,t);if(F&&k)c.set(x,B,k);else{const{configValue:A=void 0,configFrom:M=void 0}=tj(x)&&x!=="values"?cF(x,u.style,o.style,w):{},R=A!==void 0;F&&!R?c.set(x,B,k):(M!=="vgAxisConfig"||cCe.has(x)&&R||Vm(A)||Re(A))&&c.set(x,A,!1)}}const b=(s=o.encoding)!==null&&s!==void 0?s:{},S=lK.reduce((x,B)=>{var F;if(!c.hasAxisPart(B))return x;const k=SJ((F=b[B])!==null&&F!==void 0?F:{},e),A=B==="labels"?nCe(e,t,k):k;return A!==void 0&&!on(A)&&(x[B]={update:A}),x},{});return on(S)||c.set("encode",S,!!o.encoding||o.labelAngle!==void 0),c}function fCe({encoding:t,size:e}){for(const n of rl){const i=Vs(n);Go(e[i])&&bo(t[n])&&(delete e[i],be(vX(i)))}return e}function uCe(t,e,n){const i=Ss(t),s=tn("orient",i,n);if(i.orient=_Ce(i.type,e,s),s!==void 0&&s!==i.orient&&be(TIe(i.orient,s)),i.type==="bar"&&i.orient){const d=tn("cornerRadiusEnd",i,n);if(d!==void 0){const f=i.orient==="horizontal"&&e.x2||i.orient==="vertical"&&e.y2?["cornerRadius"]:UFe[i.orient];for(const u of f)i[u]=d;i.cornerRadiusEnd!==void 0&&delete i.cornerRadiusEnd}}return tn("opacity",i,n)===void 0&&(i.opacity=pCe(i.type,e)),tn("cursor",i,n)===void 0&&(i.cursor=hCe(i,e,n)),i}function hCe(t,e,n){return e.href||t.href||tn("href",t,n)?"pointer":t.cursor}function pCe(t,e){if(Mt([fS,zC,$C,qC],t)&&!ZC(e))return .7}function gCe(t,e,{graticule:n}){if(n)return!1;const i=cu("filled",t,e),s=t.type;return zn(i,s!==fS&&s!==dS&&s!==s1)}function _Ce(t,e,n){switch(t){case fS:case $C:case qC:case UX:case OFe:case FFe:return}const{x:i,y:s,x2:o,y2:c}=e;switch(t){case cS:if(Te(i)&&(bi(i.bin)||Te(s)&&s.aggregate&&!i.aggregate))return"vertical";if(Te(s)&&(bi(s.bin)||Te(i)&&i.aggregate&&!s.aggregate))return"horizontal";if(c||o){if(n)return n;if(!o)return(Te(i)&&i.type===du&&!yn(i.bin)||QI(i))&&Te(s)&&bi(s.bin)?"horizontal":"vertical";if(!c)return(Te(s)&&s.type===du&&!yn(s.bin)||QI(s))&&Te(i)&&bi(i.bin)?"vertical":"horizontal"}case s1:if(o&&!(Te(i)&&bi(i.bin))&&c&&!(Te(s)&&bi(s.bin)))return;case lS:if(c)return Te(s)&&bi(s.bin)?"horizontal":"vertical";if(o)return Te(i)&&bi(i.bin)?"vertical":"horizontal";if(t===s1){if(i&&!s)return"vertical";if(s&&!i)return"horizontal"}case dS:case zC:{const d=bo(i),f=bo(s);if(n)return n;if(d&&!f)return t!=="tick"?"horizontal":"vertical";if(!d&&f)return t!=="tick"?"vertical":"horizontal";if(d&&f){const u=i,a=s,_=u.type===Rp,w=a.type===Rp;return _&&!w?t!=="tick"?"vertical":"horizontal":!_&&w?t!=="tick"?"horizontal":"vertical":!u.aggregate&&a.aggregate?t!=="tick"?"vertical":"horizontal":u.aggregate&&!a.aggregate&&t!=="tick"?"horizontal":"vertical"}else return}}return"vertical"}const yCe={vgMark:"arc",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Yr(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),Di("x",t,{defaultPos:"mid"})),Di("y",t,{defaultPos:"mid"})),_d(t,"radius")),_d(t,"theta"))},mCe={vgMark:"area",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign({},Yr(t,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"})),u1("x",t,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:t.markDef.orient==="horizontal"})),u1("y",t,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:t.markDef.orient==="vertical"})),_3(t))},wCe={vgMark:"rect",encodeEntry:t=>Object.assign(Object.assign(Object.assign({},Yr(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),_d(t,"x")),_d(t,"y"))},bCe={vgMark:"shape",encodeEntry:t=>Object.assign({},Yr(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),postEncodingTransform:t=>{const{encoding:e}=t,n=e.shape;return[Object.assign({type:"geoshape",projection:t.projectionName()},n&&Te(n)&&n.type===gg?{field:xe(n,{expr:"datum"})}:{})]}},TCe={vgMark:"image",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign({},Yr(t,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"})),_d(t,"x")),_d(t,"y")),p3(t,"url"))},vCe={vgMark:"line",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Yr(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),Di("x",t,{defaultPos:"mid"})),Di("y",t,{defaultPos:"mid"})),li("size",t,{vgChannel:"strokeWidth"})),_3(t))},ECe={vgMark:"trail",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Yr(t,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),Di("x",t,{defaultPos:"mid"})),Di("y",t,{defaultPos:"mid"})),li("size",t)),_3(t))};function M3(t,e){const{config:n}=t;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Yr(t,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),Di("x",t,{defaultPos:"mid"})),Di("y",t,{defaultPos:"mid"})),li("size",t)),li("angle",t)),SCe(t,n,e))}function SCe(t,e,n){return n?{shape:{value:n}}:li("shape",t)}const xCe={vgMark:"symbol",encodeEntry:t=>M3(t)},BCe={vgMark:"symbol",encodeEntry:t=>M3(t,"circle")},kCe={vgMark:"symbol",encodeEntry:t=>M3(t,"square")},ICe={vgMark:"rect",encodeEntry:t=>Object.assign(Object.assign(Object.assign({},Yr(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),_d(t,"x")),_d(t,"y"))},FCe={vgMark:"rule",encodeEntry:t=>{const{markDef:e}=t,n=e.orient;return!t.encoding.x&&!t.encoding.y&&!t.encoding.latitude&&!t.encoding.longitude?{}:Object.assign(Object.assign(Object.assign(Object.assign({},Yr(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),u1("x",t,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"})),u1("y",t,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"})),li("size",t,{vgChannel:"strokeWidth"}))}},OCe={vgMark:"text",encodeEntry:t=>{const{config:e,encoding:n}=t;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Yr(t,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"})),Di("x",t,{defaultPos:"mid"})),Di("y",t,{defaultPos:"mid"})),p3(t)),li("size",t,{vgChannel:"fontSize"})),li("angle",t)),Tj("align",MCe(t.markDef,n,e))),Tj("baseline",ACe(t.markDef,n,e))),Di("radius",t,{defaultPos:null})),Di("theta",t,{defaultPos:null}))}};function MCe(t,e,n){if(tn("align",t,n)===void 0)return"center"}function ACe(t,e,n){if(tn("baseline",t,n)===void 0)return"middle"}const NCe={vgMark:"rect",encodeEntry:t=>{const{config:e,markDef:n}=t,i=n.orient,s=i==="horizontal"?"width":"height",o=i==="horizontal"?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Yr(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Di("x",t,{defaultPos:"mid",vgChannel:"xc"})),Di("y",t,{defaultPos:"mid",vgChannel:"yc"})),li("size",t,{defaultValue:CCe(t),vgChannel:s})),{[o]:bn(tn("thickness",n,e))})}};function CCe(t){var e;const{config:n,markDef:i}=t,{orient:s}=i,o=s==="horizontal"?"width":"height",c=t.getScaleComponent(s==="horizontal"?"x":"y"),d=(e=tn("size",i,n,{vgChannel:o}))!==null&&e!==void 0?e:n.tick.bandSize;if(d!==void 0)return d;{const f=c?c.get("range"):void 0;return f&&Ud(f)&&ln(f.step)?f.step*3/4:d1(n.view,o)*3/4}}const Jb={arc:yCe,area:mCe,bar:wCe,circle:BCe,geoshape:bCe,image:TCe,line:vCe,point:xCe,rect:ICe,rule:FCe,square:kCe,text:OCe,tick:NCe,trail:ECe};function RCe(t){if(Mt([dS,lS,MFe],t.mark)){const e=hK(t.mark,t.encoding);if(e.length>0)return LCe(t,e)}else if(t.mark===cS){const e=HI.some(n=>tn(n,t.markDef,t.config));if(t.stack&&!t.fieldDef("size")&&e)return PCe(t)}return A3(t)}const zj="faceted_path_";function LCe(t,e){return[{name:t.getName("pathgroup"),type:"group",from:{facet:{name:zj+t.requestDataName(gn.Main),data:t.requestDataName(gn.Main),groupby:e}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:A3(t,{fromPrefix:zj})}]}const $j="stack_group_";function PCe(t){var e;const[n]=A3(t,{fromPrefix:$j}),i=t.scaleName(t.stack.fieldChannel),s=(a={})=>t.vgField(t.stack.fieldChannel,a),o=(a,_)=>{const w=[s({prefix:"min",suffix:"start",expr:_}),s({prefix:"max",suffix:"start",expr:_}),s({prefix:"min",suffix:"end",expr:_}),s({prefix:"max",suffix:"end",expr:_})];return`${a}(${w.map(m=>`scale('${i}',${m})`).join(",")})`};let c,d;t.stack.fieldChannel==="x"?(c=Object.assign(Object.assign({},Ap(n.encode.update,["y","yc","y2","height",...HI])),{x:{signal:o("min","datum")},x2:{signal:o("max","datum")},clip:{value:!0}}),d={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},n.encode.update=Object.assign(Object.assign({},As(n.encode.update,["y","yc","y2"])),{height:{field:{group:"height"}}})):(c=Object.assign(Object.assign({},Ap(n.encode.update,["x","xc","x2","width"])),{y:{signal:o("min","datum")},y2:{signal:o("max","datum")},clip:{value:!0}}),d={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},n.encode.update=Object.assign(Object.assign({},As(n.encode.update,["x","xc","x2"])),{width:{field:{group:"width"}}}));for(const a of HI){const _=cu(a,t.markDef,t.config);n.encode.update[a]?(c[a]=n.encode.update[a],delete n.encode.update[a]):_&&(c[a]=bn(_)),_&&(n.encode.update[a]={value:0})}const f=[];if(((e=t.stack.groupbyChannels)===null||e===void 0?void 0:e.length)>0)for(const a of t.stack.groupbyChannels){const _=t.fieldDef(a),w=xe(_);w&&f.push(w),((_==null?void 0:_.bin)||(_==null?void 0:_.timeUnit))&&f.push(xe(_,{binSuffix:"end"}))}return c=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((a,_)=>{if(n.encode.update[_])return Object.assign(Object.assign({},a),{[_]:n.encode.update[_]});{const w=cu(_,t.markDef,t.config);return w!==void 0?Object.assign(Object.assign({},a),{[_]:bn(w)}):a}},c),c.stroke&&(c.strokeForeground={value:!0},c.strokeOffset={value:0}),[{type:"group",from:{facet:{data:t.requestDataName(gn.Main),name:$j+t.requestDataName(gn.Main),groupby:f,aggregate:{fields:[s({suffix:"start"}),s({suffix:"start"}),s({suffix:"end"}),s({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:c},marks:[{type:"group",encode:{update:d},marks:[n]}]}]}function DCe(t){var e;const{encoding:n,stack:i,mark:s,markDef:o,config:c}=t,d=n.order;if(!(!he(d)&&Ca(d)&&GI(d.value)||!d&&GI(tn("order",o,c)))){if((he(d)||Te(d))&&!i)return pX(d,{expr:"datum"});if(zd(s)){const f=o.orient==="horizontal"?"y":"x",u=n[f];if(Te(u)){const a=u.sort;if(he(a))return{field:xe(u,{prefix:f,suffix:"sort_index",expr:"datum"})};if(Bo(a))return{field:xe({aggregate:ZC(t.encoding)?a.op:void 0,field:a.field},{expr:"datum"})};if(KX(a)){const _=t.fieldDef(a.encoding);return{field:xe(_,{expr:"datum"}),order:a.order}}else return a===null?void 0:{field:xe(u,{binSuffix:!((e=t.stack)===null||e===void 0)&&e.impute?"mid":void 0,expr:"datum"})}}return}}}function A3(t,e={fromPrefix:""}){const{mark:n,markDef:i,encoding:s,config:o}=t,c=zn(i.clip,jCe(t),UCe(t)),d=uX(i),f=s.key,u=DCe(t),a=zCe(t),_=tn("aria",i,o),w=Jb[n].postEncodingTransform?Jb[n].postEncodingTransform(t):null;return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:t.getName("marks"),type:Jb[n].vgMark},c?{clip:!0}:{}),d?{style:d}:{}),f?{key:f.field}:{}),u?{sort:u}:{}),a||{}),_===!1?{aria:_}:{}),{from:{data:e.fromPrefix+t.requestDataName(gn.Main)},encode:{update:Jb[n].encodeEntry(t)}}),w?{transform:w}:{})]}function jCe(t){const e=t.getScaleComponent("x"),n=t.getScaleComponent("y");return(e==null?void 0:e.get("selectionExtent"))||(n==null?void 0:n.get("selectionExtent"))?!0:void 0}function UCe(t){const e=t.component.projection;return e&&!e.isFit?!0:void 0}function zCe(t){if(!t.component.selection)return null;const e=we(t.component.selection).length;let n=e,i=t.parent;for(;i&&n===0;)n=we(i.component.selection).length,i=i.parent;return n?{interactive:e>0||!!t.encoding.tooltip}:null}class eQ extends XJ{constructor(e,n,i,s={},o){var c;super(e,"unit",n,i,o,void 0,sj(e)?e.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const d=zo(e.mark)?Object.assign({},e.mark):{type:e.mark},f=d.type;d.filled===void 0&&(d.filled=gCe(d,o,{graticule:e.data&&u3(e.data)}));const u=this.encoding=y2e(e.encoding||{},f,d.filled,o);this.markDef=uCe(d,u,o),this.size=fCe({encoding:u,size:sj(e)?Object.assign(Object.assign(Object.assign({},s),e.width?{width:e.width}:{}),e.height?{height:e.height}:{}):s}),this.stack=CK(f,u),this.specifiedScales=this.initScales(f,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=e.projection,this.selection=((c=e.params)!==null&&c!==void 0?c:[]).filter(a=>o3(a))}get hasProjection(){const{encoding:e}=this,n=this.mark===zX,i=e&&hke.some(s=>Ze(e[s]));return n||i}scaleDomain(e){const n=this.specifiedScales[e];return n?n.domain:void 0}axis(e){return this.specifiedAxes[e]}legend(e){return this.specifiedLegends[e]}initScales(e,n){return rS.reduce((i,s)=>{var o;const c=Qn(n[s]);return c&&(i[s]=this.initScale((o=c.scale)!==null&&o!==void 0?o:{})),i},{})}initScale(e){const{domain:n,range:i}=e,s=Ss(e);return he(n)&&(s.domain=n.map(rr)),he(i)&&(s.range=i.map(rr)),s}initAxes(e){return rl.reduce((n,i)=>{const s=e[i];if(Ze(s)||i===Fn&&Ze(e.x2)||i===gi&&Ze(e.y2)){const o=Ze(s)?s.axis:void 0;n[i]=o&&this.initAxis(Object.assign({},o))}return n},{})}initAxis(e){const n=we(e),i={};for(const s of n){const o=e[s];i[s]=Vm(o)?fX(o):rr(o)}return i}initLegends(e){return Eke.reduce((n,i)=>{const s=Qn(e[i]);if(s&&xke(i)){const o=s.legend;n[i]=o&&Ss(o)}return n},{})}parseData(){this.component.data=LS(this)}parseLayoutSize(){YNe(this)}parseSelections(){this.component.selection=AMe(this,this.selection)}parseMarkGroup(){this.component.mark=RCe(this)}parseAxesAndHeaders(){this.component.axes=iCe(this)}assembleSelectionTopLevelSignals(e){return ZOe(this,e)}assembleSignals(){return[...gJ(this),...JOe(this,[])]}assembleSelectionData(e){return eMe(this,e)}assembleLayout(){return null}assembleLayoutSignals(){return b3(this)}assembleMarks(){var e;let n=(e=this.component.mark)!==null&&e!==void 0?e:[];return(!this.parent||!bg(this.parent))&&(n=YK(this,n)),n.map(this.correctDataNames)}assembleGroupStyle(){const{style:e}=this.view||{};if(e!==void 0)return e;if(this.encoding.x||this.encoding.y)return"cell"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(e){return Uf(this.encoding,e)}fieldDef(e){const n=this.encoding[e];return $o(n)}typedFieldDef(e){const n=this.fieldDef(e);return Vr(n)?n:null}}class N3 extends I3{constructor(e,n,i,s,o){super(e,"layer",n,i,o,e.resolve,e.view);const c=Object.assign(Object.assign(Object.assign({},s),e.width?{width:e.width}:{}),e.height?{height:e.height}:{});this.children=e.layer.map((d,f)=>{if(TS(d))return new N3(d,this,this.getName(`layer_${f}`),c,o);if(ic(d))return new eQ(d,this,this.getName(`layer_${f}`),c,o);throw new Error(xC(d))})}parseData(){this.component.data=LS(this);for(const e of this.children)e.parseData()}parseLayoutSize(){HNe(this)}parseSelections(){this.component.selection={};for(const e of this.children){e.parseSelections();for(const n of we(e.component.selection))this.component.selection[n]=e.component.selection[n]}}parseMarkGroup(){for(const e of this.children)e.parseMarkGroup()}parseAxesAndHeaders(){rCe(this)}assembleSelectionTopLevelSignals(e){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),e)}assembleSignals(){return this.children.reduce((e,n)=>e.concat(n.assembleSignals()),gJ(this))}assembleLayoutSignals(){return this.children.reduce((e,n)=>e.concat(n.assembleLayoutSignals()),b3(this))}assembleSelectionData(e){return this.children.reduce((n,i)=>i.assembleSelectionData(n),e)}assembleGroupStyle(){const e=new Set;for(const i of this.children)for(const s of Ie(i.assembleGroupStyle()))e.add(s);const n=Array.from(e);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let e=super.assembleTitle();if(e)return e;for(const n of this.children)if(e=n.assembleTitle(),e)return e}assembleLayout(){return null}assembleMarks(){return tMe(this,this.children.flatMap(e=>e.assembleMarks()))}assembleLegends(){return this.children.reduce((e,n)=>e.concat(n.assembleLegends()),AJ(this))}}function C3(t,e,n,i,s){if(hS(t))return new j_(t,e,n,s);if(TS(t))return new N3(t,e,n,i,s);if(ic(t))return new eQ(t,e,n,i,s);if($2e(t))return new ZNe(t,e,n,s);throw new Error(xC(t))}var $Ce=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};function qCe(t,e={}){e.logger&&HIe(e.logger),e.fieldTitle&&rK(e.fieldTitle);try{const n=NK(ig(e.config,t.config)),i=qK(t,n),s=C3(i,null,"",void 0,n);return s.parse(),tNe(s.component.data,s),{spec:VCe(s,GCe(t,i.autosize,n,s),t.datasets,t.usermeta),normalized:i}}finally{e.logger&&WIe(),e.fieldTitle&&o2e()}}function GCe(t,e,n,i){const s=i.component.layoutSize.get("width"),o=i.component.layoutSize.get("height");if(e===void 0?(e={type:"pad"},i.hasAxisOrientSignalRef()&&(e.resize=!0)):ke(e)&&(e={type:e}),s&&o&&HOe(e.type)){if(s==="step"&&o==="step")be($6()),e.type="pad";else if(s==="step"||o==="step"){const c=s==="step"?"width":"height";be($6(sS(c)));const d=c==="width"?"height":"width";e.type=WOe(d)}}return Object.assign(Object.assign(Object.assign({},we(e).length===1&&e.type?e.type==="pad"?{}:{autosize:e.type}:{autosize:e}),_j(n,!1)),_j(t,!0))}function VCe(t,e,n={},i){const s=t.config?iOe(t.config):void 0,o=[].concat(t.assembleSelectionData([]),$Ne(t.component.data,n)),c=t.assembleProjections(),d=t.assembleTitle(),f=t.assembleGroupStyle(),u=t.assembleGroupEncodeEntry(!0);let a=t.assembleLayoutSignals();a=a.filter(m=>(m.name==="width"||m.name==="height")&&m.value!==void 0?(e[m.name]=+m.value,!1):!0);const{params:_}=e,w=$Ce(e,["params"]);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({$schema:"https://vega.github.io/schema/vega/v5.json"},t.description?{description:t.description}:{}),w),d?{title:d}:{}),f?{style:f}:{}),u?{encode:{update:u}}:{}),{data:o}),c.length>0?{projections:c}:{}),t.assembleGroup([...a,...t.assembleSelectionTopLevelSignals([]),...FK(_)])),s?{config:s}:{}),i?{usermeta:i}:{})}const HCe=ske.version,WCe=Object.freeze(Object.defineProperty({__proto__:null,version:HCe,compile:qCe,normalize:qK,deepEqual:mo,duplicate:dt,never:qY,pick:Ap,omit:As,stringify:_n,hash:Lt,isNullOrFalse:GI,contains:Mt,some:au,every:uC,mergeDeep:GY,unique:wo,isEqual:oke,setEqual:VY,hasIntersection:hC,prefixGenerator:VI,fieldIntersection:pC,isEmpty:on,keys:we,vals:Gi,entries:ud,isBoolean:ky,varName:Sn,logicalExpr:P_,deleteNestedProperty:t1,titleCase:Cm,accessPathWithDatum:gC,flatAccessWithDatum:HY,replacePathInField:qr,replaceAll:ou,removePathFromField:_C,accessPathDepth:Np,getFirstDefined:zn,uniqueId:YY,resetIdCounter:cke,internalField:XY,isInternalField:KY,normalizeAngle:Iy,isNumeric:QE},Symbol.toStringTag,{value:"Module"}));function tQ(t){const[e,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(t).slice(1,3);return{library:e,version:n}}var YCe="vega-themes",XCe="2.10.0",KCe="Themes for stylized Vega and Vega-Lite visualizations.",JCe=["vega","vega-lite","themes","style"],QCe="BSD-3-Clause",ZCe={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},e3e=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],t3e="build/vega-themes.js",R3="build/vega-themes.module.js",n3e="build/vega-themes.min.js",i3e="build/vega-themes.min.js",s3e="build/vega-themes.module.d.ts",r3e={type:"git",url:"https://github.com/vega/vega-themes.git"},a3e=["src","build"],o3e={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",prepare:"beemo create-config",eslintbase:"beemo eslint .",format:"yarn eslintbase --fix",lint:"yarn eslintbase",release:"auto shipit"},l3e={"@auto-it/conventional-commits":"^10.32.2","@auto-it/first-time-contributor":"^10.32.2","@rollup/plugin-json":"^4.1.0","@rollup/plugin-node-resolve":"^13.0.6","rollup-plugin-ts":"^1.4.7",auto:"^10.32.2","browser-sync":"^2.27.7",concurrently:"^6.4.0","gh-pages":"^3.2.3",rollup:"^2.60.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-terser":"^7.0.2",typescript:"^4.4.4",vega:"^5.19.1","vega-lite":"^5.0.0","vega-lite-dev-config":"^0.20.0"},c3e={vega:"*","vega-lite":"*"},d3e={name:YCe,version:XCe,description:KCe,keywords:JCe,license:QCe,author:ZCe,contributors:e3e,main:t3e,module:R3,unpkg:n3e,jsdelivr:i3e,types:s3e,repository:r3e,files:a3e,scripts:o3e,devDependencies:l3e,peerDependencies:c3e};const ih="#fff",f3e="#888",u3e={background:"#333",title:{color:ih,subtitleColor:ih},style:{"guide-label":{fill:ih},"guide-title":{fill:ih}},axis:{domainColor:ih,gridColor:f3e,tickColor:ih}},Yd="#4572a7",h3e={background:"#fff",arc:{fill:Yd},area:{fill:Yd},line:{stroke:Yd,strokeWidth:2},path:{stroke:Yd},rect:{fill:Yd},shape:{stroke:Yd},symbol:{fill:Yd,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Xd="#30a2da",vB="#cbcbcb",p3e="#999",g3e="#333",qj="#f0f0f0",Gj="#333",_3e={arc:{fill:Xd},area:{fill:Xd},axis:{domainColor:vB,grid:!0,gridColor:vB,gridWidth:1,labelColor:p3e,labelFontSize:10,titleColor:g3e,tickColor:vB,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:qj,group:{fill:qj},legend:{labelColor:Gj,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:Gj,titleFontSize:14,titlePadding:10},line:{stroke:Xd,strokeWidth:2},path:{stroke:Xd,strokeWidth:.5},rect:{fill:Xd},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Xd},bar:{binSpacing:2,fill:Xd,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Kd="#000",y3e={group:{fill:"#e5e5e5"},arc:{fill:Kd},area:{fill:Kd},line:{stroke:Kd},path:{stroke:Kd},rect:{fill:Kd},shape:{stroke:Kd},symbol:{fill:Kd,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},m3e=22,w3e="normal",Vj="Benton Gothic, sans-serif",Hj=11.5,b3e="normal",Jd="#82c6df",EB="Benton Gothic Bold, sans-serif",Wj="normal",Yj=13,Hg={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},T3e={background:"#ffffff",title:{anchor:"start",color:"#000000",font:EB,fontSize:m3e,fontWeight:w3e},arc:{fill:Jd},area:{fill:Jd},line:{stroke:Jd,strokeWidth:2},path:{stroke:Jd},rect:{fill:Jd},shape:{stroke:Jd},symbol:{fill:Jd,size:30},axis:{labelFont:Vj,labelFontSize:Hj,labelFontWeight:b3e,titleFont:EB,titleFontSize:Yj,titleFontWeight:Wj},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:Vj,labelFontSize:Hj,symbolType:"square",titleFont:EB,titleFontSize:Yj,titleFontWeight:Wj},range:{category:Hg["category-6"],diverging:Hg["fireandice-6"],heatmap:Hg["fire-7"],ordinal:Hg["fire-7"],ramp:Hg["fire-7"]}},Qd="#ab5787",Qb="#979797",v3e={background:"#f9f9f9",arc:{fill:Qd},area:{fill:Qd},line:{stroke:Qd},path:{stroke:Qd},rect:{fill:Qd},shape:{stroke:Qd},symbol:{fill:Qd,size:30},axis:{domainColor:Qb,domainWidth:.5,gridWidth:.2,labelColor:Qb,tickColor:Qb,tickWidth:.2,titleColor:Qb},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Zd="#3e5c69",E3e={background:"#fff",arc:{fill:Zd},area:{fill:Zd},line:{stroke:Zd},path:{stroke:Zd},rect:{fill:Zd},shape:{stroke:Zd},symbol:{fill:Zd},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},yr="#1696d2",Xj="#000000",S3e="#FFFFFF",Zb="Lato",SB="Lato",x3e="Lato",B3e="#DEDDDD",k3e=18,Wg={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},I3e={background:S3e,title:{anchor:"start",fontSize:k3e,font:Zb},axisX:{domain:!0,domainColor:Xj,domainWidth:1,grid:!1,labelFontSize:12,labelFont:SB,labelAngle:0,tickColor:Xj,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:Zb},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:B3e,gridWidth:1,labelFontSize:12,labelFont:SB,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:Zb,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:SB,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:Zb,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:Wg["six-groups-cat-1"],diverging:Wg["diverging-colors"],heatmap:Wg["diverging-colors"],ordinal:Wg["six-groups-seq"],ramp:Wg["shades-blue"]},area:{fill:yr},rect:{fill:yr},line:{color:yr,stroke:yr,strokeWidth:5},trail:{color:yr,stroke:yr,strokeWidth:0,size:1},path:{stroke:yr,strokeWidth:.5},point:{filled:!0},text:{font:x3e,color:yr,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:yr,stroke:null}},arc:{fill:yr},shape:{stroke:yr},symbol:{fill:yr,size:30}},ef="#3366CC",Kj="#ccc",e0="Arial, sans-serif",F3e={arc:{fill:ef},area:{fill:ef},path:{stroke:ef},rect:{fill:ef},shape:{stroke:ef},symbol:{stroke:ef},circle:{fill:ef},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:e0,fontSize:12},"guide-title":{font:e0,fontSize:12},"group-title":{font:e0,fontSize:12}},title:{font:e0,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:Kj,tickColor:Kj,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},L3=t=>t*(1/3+1),Jj=L3(9),Qj=L3(10),Zj=L3(12),Yg="Segoe UI",eU="wf_standard-font, helvetica, arial, sans-serif",tU="#252423",Xg="#605E5C",nU="transparent",O3e="#C8C6C4",Qr="#118DFF",M3e="#12239E",A3e="#E66C37",N3e="#6B007B",C3e="#E044A7",R3e="#744EC2",L3e="#D9B300",P3e="#D64550",nQ=Qr,iQ="#DEEFFF",iU=[iQ,nQ],D3e=[iQ,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",nQ],j3e={view:{stroke:nU},background:nU,font:Yg,header:{titleFont:eU,titleFontSize:Zj,titleColor:tU,labelFont:Yg,labelFontSize:Qj,labelColor:Xg},axis:{ticks:!1,grid:!1,domain:!1,labelColor:Xg,labelFontSize:Jj,titleFont:eU,titleColor:tU,titleFontSize:Zj,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:O3e,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Qr},line:{stroke:Qr,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:Yg,fontSize:Jj,fill:Xg},arc:{fill:Qr},area:{fill:Qr,line:!0,opacity:.6},path:{stroke:Qr},rect:{fill:Qr},point:{fill:Qr,filled:!0,size:75},shape:{stroke:Qr},symbol:{fill:Qr,strokeWidth:1.5,size:50},legend:{titleFont:Yg,titleFontWeight:"bold",titleColor:Xg,labelFont:Yg,labelFontSize:Qj,labelColor:Xg,symbolType:"circle",symbolSize:75},range:{category:[Qr,M3e,A3e,N3e,C3e,R3e,L3e,P3e],diverging:iU,heatmap:iU,ordinal:D3e}},U3e=d3e.version,z3e=Object.freeze(Object.defineProperty({__proto__:null,dark:u3e,excel:h3e,fivethirtyeight:_3e,ggplot2:y3e,googlecharts:F3e,latimes:T3e,powerbi:j3e,quartz:v3e,urbaninstitute:I3e,version:U3e,vox:E3e},Symbol.toStringTag,{value:"Module"}));/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function $3e(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}function q3e(t,e,n){if(he(t))return`[${t.map(i=>e(ke(i)?i:sU(i,n))).join(", ")}]`;if(Fe(t)){let i="";const s=t,{title:o,image:c}=s,d=$3e(s,["title","image"]);o&&(i+=`<h2>${e(o)}</h2>`),c&&(i+=`<img src="${e(c)}">`);const f=Object.keys(d);if(f.length>0){i+="<table>";for(const u of f){let a=d[u];a!==void 0&&(Fe(a)&&(a=sU(a,n)),i+=`<tr><td class="key">${e(u)}:</td><td class="value">${e(a)}</td></tr>`)}i+="</table>"}return i||"{}"}return e(t)}function G3e(t){const e=[];return function(n,i){if(typeof i!="object"||i===null)return i;const s=e.indexOf(this)+1;return e.length=s,e.length>t?"[Object]":e.indexOf(i)>=0?"[Circular]":(e.push(i),i)}}function sU(t,e){return JSON.stringify(t,G3e(e))}var V3e=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element img {
  max-width: 200px;
  max-height: 200px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const sQ="vg-tooltip-element",H3e={offsetX:10,offsetY:10,id:sQ,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:W3e,maxDepth:2,formatTooltip:q3e};function W3e(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function Y3e(t){if(!/^[A-Za-z]+[-:.\w]*$/.test(t))throw new Error("Invalid HTML ID");return V3e.toString().replace(sQ,t)}function X3e(t,e,n,i){let s=t.clientX+n;s+e.width>window.innerWidth&&(s=+t.clientX-n-e.width);let o=t.clientY+i;return o+e.height>window.innerHeight&&(o=+t.clientY-i-e.height),{x:s,y:o}}class K3e{constructor(e){this.options=Object.assign(Object.assign({},H3e),e);const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const i=document.createElement("style");i.setAttribute("id",this.options.styleId),i.innerHTML=Y3e(n);const s=document.head;s.childNodes.length>0?s.insertBefore(i,s.childNodes[0]):s.appendChild(i)}}tooltipHandler(e,n,i,s){var o;if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),((o=document.fullscreenElement)!==null&&o!==void 0?o:document.body).appendChild(this.el)),s==null||s===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(s,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:c,y:d}=X3e(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.setAttribute("style",`top: ${d}px; left: ${c}px`)}}function J3e(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rU(t,e,n,i,s,o,c){try{var d=t[o](c),f=d.value}catch(u){n(u);return}d.done?e(f):Promise.resolve(f).then(i,s)}function _1(t){return function(){var e=this,n=arguments;return new Promise(function(i,s){var o=t.apply(e,n);function c(f){rU(o,i,s,c,d,"next",f)}function d(f){rU(o,i,s,c,d,"throw",f)}c(void 0)})}}var rQ=Object.prototype,Of=rQ.hasOwnProperty,_o,P3=typeof Symbol=="function"?Symbol:{},PS=P3.iterator||"@@iterator",Q3e=P3.asyncIterator||"@@asyncIterator",y1=P3.toStringTag||"@@toStringTag";function aQ(t,e,n,i){var s=e&&e.prototype instanceof mF?e:mF,o=Object.create(s.prototype),c=new wF(i||[]);return o._invoke=iRe(t,n,c),o}function D3(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(i){return{type:"throw",arg:i}}}var aU="suspendedStart",Z3e="suspendedYield",oU="executing",t0="completed",_a={};function mF(){}function DS(){}function Vp(){}var j3={};j3[PS]=function(){return this};var xB=Object.getPrototypeOf,n0=xB&&xB(xB(U3([])));n0&&n0!==rQ&&Of.call(n0,PS)&&(j3=n0);var Tg=Vp.prototype=mF.prototype=Object.create(j3);DS.prototype=Tg.constructor=Vp;Vp.constructor=DS;Vp[y1]=DS.displayName="GeneratorFunction";function oQ(t){["next","throw","return"].forEach(function(e){t[e]=function(n){return this._invoke(e,n)}})}function lQ(t){var e=typeof t=="function"&&t.constructor;return e?e===DS||(e.displayName||e.name)==="GeneratorFunction":!1}function eRe(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,Vp):(t.__proto__=Vp,y1 in t||(t[y1]="GeneratorFunction")),t.prototype=Object.create(Tg),t}function tRe(t){return{__await:t}}function jS(t,e){function n(o,c,d,f){var u=D3(t[o],t,c);if(u.type==="throw")f(u.arg);else{var a=u.arg,_=a.value;return _&&typeof _=="object"&&Of.call(_,"__await")?e.resolve(_.__await).then(function(w){n("next",w,d,f)},function(w){n("throw",w,d,f)}):e.resolve(_).then(function(w){a.value=w,d(a)},function(w){return n("throw",w,d,f)})}}var i;function s(o,c){function d(){return new e(function(f,u){n(o,c,f,u)})}return i=i?i.then(d,d):d()}this._invoke=s}oQ(jS.prototype);jS.prototype[Q3e]=function(){return this};function nRe(t,e,n,i,s){s===void 0&&(s=Promise);var o=new jS(aQ(t,e,n,i),s);return lQ(e)?o:o.next().then(function(c){return c.done?c.value:o.next()})}function iRe(t,e,n){var i=aU;return function(o,c){if(i===oU)throw new Error("Generator is already running");if(i===t0){if(o==="throw")throw c;return dQ()}for(n.method=o,n.arg=c;;){var d=n.delegate;if(d){var f=cQ(d,n);if(f){if(f===_a)continue;return f}}if(n.method==="next")n.sent=n._sent=n.arg;else if(n.method==="throw"){if(i===aU)throw i=t0,n.arg;n.dispatchException(n.arg)}else n.method==="return"&&n.abrupt("return",n.arg);i=oU;var u=D3(t,e,n);if(u.type==="normal"){if(i=n.done?t0:Z3e,u.arg===_a)continue;return{value:u.arg,done:n.done}}else u.type==="throw"&&(i=t0,n.method="throw",n.arg=u.arg)}}}function cQ(t,e){var n=t.iterator[e.method];if(n===_o){if(e.delegate=null,e.method==="throw"){if(t.iterator.return&&(e.method="return",e.arg=_o,cQ(t,e),e.method==="throw"))return _a;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return _a}var i=D3(n,t.iterator,e.arg);if(i.type==="throw")return e.method="throw",e.arg=i.arg,e.delegate=null,_a;var s=i.arg;if(!s)return e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,_a;if(s.done)e[t.resultName]=s.value,e.next=t.nextLoc,e.method!=="return"&&(e.method="next",e.arg=_o);else return s;return e.delegate=null,_a}oQ(Tg);Tg[y1]="Generator";Tg[PS]=function(){return this};Tg.toString=function(){return"[object Generator]"};function sRe(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function BB(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function wF(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(sRe,this),this.reset(!0)}function rRe(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function i(){for(;e.length;){var s=e.pop();if(s in t)return i.value=s,i.done=!1,i}return i.done=!0,i}}function U3(t){if(t){var e=t[PS];if(e)return e.call(t);if(typeof t.next=="function")return t;if(!isNaN(t.length)){var n=-1,i=function s(){for(;++n<t.length;)if(Of.call(t,n))return s.value=t[n],s.done=!1,s;return s.value=_o,s.done=!0,s};return i.next=i}}return{next:dQ}}function dQ(){return{value:_o,done:!0}}wF.prototype={constructor:wF,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=_o,this.done=!1,this.delegate=null,this.method="next",this.arg=_o,this.tryEntries.forEach(BB),!e)for(var n in this)n.charAt(0)==="t"&&Of.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=_o)},stop:function(){this.done=!0;var e=this.tryEntries[0],n=e.completion;if(n.type==="throw")throw n.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(u,a){return c.type="throw",c.arg=e,n.next=u,a&&(n.method="next",n.arg=_o),!!a}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],c=o.completion;if(o.tryLoc==="root")return i("end");if(o.tryLoc<=this.prev){var d=Of.call(o,"catchLoc"),f=Of.call(o,"finallyLoc");if(d&&f){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(d){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else if(f){if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(e,n){for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i];if(s.tryLoc<=this.prev&&Of.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var o=s;break}}o&&(e==="break"||e==="continue")&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=n,o?(this.method="next",this.next=o.finallyLoc,_a):this.complete(c)},complete:function(e,n){if(e.type==="throw")throw e.arg;return e.type==="break"||e.type==="continue"?this.next=e.arg:e.type==="return"?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):e.type==="normal"&&n&&(this.next=n),_a},finish:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),BB(i),_a}},catch:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc===e){var s=i.completion;if(s.type==="throw"){var o=s.arg;BB(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:U3(e),resultName:n,nextLoc:i},this.method==="next"&&(this.arg=_o),_a}};var To={wrap:aQ,isGeneratorFunction:lQ,AsyncIterator:jS,mark:eRe,awrap:tRe,async:nRe,keys:rRe,values:U3},aRe=Ht;Ht.Node=_u;Ht.create=Ht;function Ht(t){var e=this;if(e instanceof Ht||(e=new Ht),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(s){e.push(s)});else if(arguments.length>0)for(var n=0,i=arguments.length;n<i;n++)e.push(arguments[n]);return e}Ht.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,n=t.prev;return e&&(e.prev=n),n&&(n.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=n),t.list.length--,t.next=null,t.prev=null,t.list=null,e};Ht.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};Ht.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};Ht.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)lRe(this,arguments[t]);return this.length};Ht.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)cRe(this,arguments[t]);return this.length};Ht.prototype.pop=function(){if(!!this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};Ht.prototype.shift=function(){if(!!this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};Ht.prototype.forEach=function(t,e){e=e||this;for(var n=this.head,i=0;n!==null;i++)t.call(e,n.value,i,this),n=n.next};Ht.prototype.forEachReverse=function(t,e){e=e||this;for(var n=this.tail,i=this.length-1;n!==null;i--)t.call(e,n.value,i,this),n=n.prev};Ht.prototype.get=function(t){for(var e=0,n=this.head;n!==null&&e<t;e++)n=n.next;if(e===t&&n!==null)return n.value};Ht.prototype.getReverse=function(t){for(var e=0,n=this.tail;n!==null&&e<t;e++)n=n.prev;if(e===t&&n!==null)return n.value};Ht.prototype.map=function(t,e){e=e||this;for(var n=new Ht,i=this.head;i!==null;)n.push(t.call(e,i.value,this)),i=i.next;return n};Ht.prototype.mapReverse=function(t,e){e=e||this;for(var n=new Ht,i=this.tail;i!==null;)n.push(t.call(e,i.value,this)),i=i.prev;return n};Ht.prototype.reduce=function(t,e){var n,i=this.head;if(arguments.length>1)n=e;else if(this.head)i=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=0;i!==null;s++)n=t(n,i.value,s),i=i.next;return n};Ht.prototype.reduceReverse=function(t,e){var n,i=this.tail;if(arguments.length>1)n=e;else if(this.tail)i=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=this.length-1;i!==null;s--)n=t(n,i.value,s),i=i.prev;return n};Ht.prototype.toArray=function(){for(var t=new Array(this.length),e=0,n=this.head;n!==null;e++)t[e]=n.value,n=n.next;return t};Ht.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,n=this.tail;n!==null;e++)t[e]=n.value,n=n.prev;return t};Ht.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var n=new Ht;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=0,s=this.head;s!==null&&i<t;i++)s=s.next;for(;s!==null&&i<e;i++,s=s.next)n.push(s.value);return n};Ht.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var n=new Ht;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=this.length,s=this.tail;s!==null&&i>e;i--)s=s.prev;for(;s!==null&&i>t;i--,s=s.prev)n.push(s.value);return n};Ht.prototype.splice=function(t,e){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(var s=[],n=0;i&&n<e;n++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<(arguments.length<=2?0:arguments.length-2);n++)i=oRe(this,i,n+2<2||arguments.length<=n+2?void 0:arguments[n+2]);return s};Ht.prototype.reverse=function(){for(var t=this.head,e=this.tail,n=t;n!==null;n=n.prev){var i=n.prev;n.prev=n.next,n.next=i}return this.head=e,this.tail=t,this};function oRe(t,e,n){var i=e===t.head?new _u(n,null,e,t):new _u(n,e,e.next,t);return i.next===null&&(t.tail=i),i.prev===null&&(t.head=i),t.length++,i}function lRe(t,e){t.tail=new _u(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function cRe(t,e){t.head=new _u(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function _u(t,e,n,i){if(!(this instanceof _u))return new _u(t,e,n,i);this.list=i,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{Ht.prototype[Symbol.iterator]=To.mark(function t(){var e;return To.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:e=this.head;case 1:if(!e){i.next=7;break}return i.next=4,e.value;case 4:e=e.next,i.next=1;break;case 7:case"end":return i.stop()}},t,this)})}catch{}var dRe=aRe,uf=Symbol("max"),ml=Symbol("length"),sh=Symbol("lengthCalculator"),U_=Symbol("allowStale"),Mf=Symbol("maxAge"),gl=Symbol("dispose"),lU=Symbol("noDisposeOnSet"),ii=Symbol("lruList"),Zr=Symbol("cache"),fQ=Symbol("updateAgeOnGet"),kB=()=>1;class fRe{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");this[uf]=e.max||1/0;var n=e.length||kB;if(this[sh]=typeof n!="function"?kB:n,this[U_]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[Mf]=e.maxAge||0,this[gl]=e.dispose,this[lU]=e.noDisposeOnSet||!1,this[fQ]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[uf]=e||1/0,Kg(this)}get max(){return this[uf]}set allowStale(e){this[U_]=!!e}get allowStale(){return this[U_]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[Mf]=e,Kg(this)}get maxAge(){return this[Mf]}set lengthCalculator(e){typeof e!="function"&&(e=kB),e!==this[sh]&&(this[sh]=e,this[ml]=0,this[ii].forEach(n=>{n.length=this[sh](n.value,n.key),this[ml]+=n.length})),Kg(this)}get lengthCalculator(){return this[sh]}get length(){return this[ml]}get itemCount(){return this[ii].length}rforEach(e,n){n=n||this;for(var i=this[ii].tail;i!==null;){var s=i.prev;cU(this,e,i,n),i=s}}forEach(e,n){n=n||this;for(var i=this[ii].head;i!==null;){var s=i.next;cU(this,e,i,n),i=s}}keys(){return this[ii].toArray().map(e=>e.key)}values(){return this[ii].toArray().map(e=>e.value)}reset(){this[gl]&&this[ii]&&this[ii].length&&this[ii].forEach(e=>this[gl](e.key,e.value)),this[Zr]=new Map,this[ii]=new dRe,this[ml]=0}dump(){return this[ii].map(e=>m1(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[ii]}set(e,n,i){if(i=i||this[Mf],i&&typeof i!="number")throw new TypeError("maxAge must be a number");var s=i?Date.now():0,o=this[sh](n,e);if(this[Zr].has(e)){if(o>this[uf])return Wh(this,this[Zr].get(e)),!1;var c=this[Zr].get(e),d=c.value;return this[gl]&&(this[lU]||this[gl](e,d.value)),d.now=s,d.maxAge=i,d.value=n,this[ml]+=o-d.length,d.length=o,this.get(e),Kg(this),!0}var f=new uRe(e,n,o,s,i);return f.length>this[uf]?(this[gl]&&this[gl](e,n),!1):(this[ml]+=f.length,this[ii].unshift(f),this[Zr].set(e,this[ii].head),Kg(this),!0)}has(e){if(!this[Zr].has(e))return!1;var n=this[Zr].get(e).value;return!m1(this,n)}get(e){return IB(this,e,!0)}peek(e){return IB(this,e,!1)}pop(){var e=this[ii].tail;return e?(Wh(this,e),e.value):null}del(e){Wh(this,this[Zr].get(e))}load(e){this.reset();for(var n=Date.now(),i=e.length-1;i>=0;i--){var s=e[i],o=s.e||0;if(o===0)this.set(s.k,s.v);else{var c=o-n;c>0&&this.set(s.k,s.v,c)}}}prune(){this[Zr].forEach((e,n)=>IB(this,n,!1))}}var IB=(t,e,n)=>{var i=t[Zr].get(e);if(i){var s=i.value;if(m1(t,s)){if(Wh(t,i),!t[U_])return}else n&&(t[fQ]&&(i.value.now=Date.now()),t[ii].unshiftNode(i));return s.value}},m1=(t,e)=>{if(!e||!e.maxAge&&!t[Mf])return!1;var n=Date.now()-e.now;return e.maxAge?n>e.maxAge:t[Mf]&&n>t[Mf]},Kg=t=>{if(t[ml]>t[uf])for(var e=t[ii].tail;t[ml]>t[uf]&&e!==null;){var n=e.prev;Wh(t,e),e=n}},Wh=(t,e)=>{if(e){var n=e.value;t[gl]&&t[gl](n.key,n.value),t[ml]-=n.length,t[Zr].delete(n.key),t[ii].removeNode(e)}};class uRe{constructor(e,n,i,s,o){this.key=e,this.value=n,this.length=i,this.now=s,this.maxAge=o||0}}var cU=(t,e,n,i)=>{var s=n.value;m1(t,s)&&(Wh(t,n),t[U_]||(s=void 0)),s&&e.call(i,s.value,s.key,t)},hRe=fRe,pRe=["includePrerelease","loose","rtl"],gRe=t=>t?typeof t!="object"?{loose:!0}:pRe.filter(e=>t[e]).reduce((e,n)=>(e[n]=!0,e),{}):{},z3=gRe,ya={exports:{}},_Re="2.0.0",yRe=256,mRe=Number.MAX_SAFE_INTEGER||9007199254740991,wRe=16,$3={SEMVER_SPEC_VERSION:_Re,MAX_LENGTH:yRe,MAX_SAFE_INTEGER:mRe,MAX_SAFE_COMPONENT_LENGTH:wRe},bRe=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return console.error("SEMVER",...e)}:()=>{},US=bRe;(function(t,e){var n=$3.MAX_SAFE_COMPONENT_LENGTH,i=US;e=t.exports={};var s=e.re=[],o=e.src=[],c=e.t={},d=0,f=(u,a,_)=>{var w=d++;i(u,w,a),c[u]=w,o[w]=a,s[w]=new RegExp(a,_?"g":void 0)};f("NUMERICIDENTIFIER","0|[1-9]\\d*"),f("NUMERICIDENTIFIERLOOSE","[0-9]+"),f("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),f("MAINVERSION","(".concat(o[c.NUMERICIDENTIFIER],")\\.")+"(".concat(o[c.NUMERICIDENTIFIER],")\\.")+"(".concat(o[c.NUMERICIDENTIFIER],")")),f("MAINVERSIONLOOSE","(".concat(o[c.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(o[c.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(o[c.NUMERICIDENTIFIERLOOSE],")")),f("PRERELEASEIDENTIFIER","(?:".concat(o[c.NUMERICIDENTIFIER],"|").concat(o[c.NONNUMERICIDENTIFIER],")")),f("PRERELEASEIDENTIFIERLOOSE","(?:".concat(o[c.NUMERICIDENTIFIERLOOSE],"|").concat(o[c.NONNUMERICIDENTIFIER],")")),f("PRERELEASE","(?:-(".concat(o[c.PRERELEASEIDENTIFIER],"(?:\\.").concat(o[c.PRERELEASEIDENTIFIER],")*))")),f("PRERELEASELOOSE","(?:-?(".concat(o[c.PRERELEASEIDENTIFIERLOOSE],"(?:\\.").concat(o[c.PRERELEASEIDENTIFIERLOOSE],")*))")),f("BUILDIDENTIFIER","[0-9A-Za-z-]+"),f("BUILD","(?:\\+(".concat(o[c.BUILDIDENTIFIER],"(?:\\.").concat(o[c.BUILDIDENTIFIER],")*))")),f("FULLPLAIN","v?".concat(o[c.MAINVERSION]).concat(o[c.PRERELEASE],"?").concat(o[c.BUILD],"?")),f("FULL","^".concat(o[c.FULLPLAIN],"$")),f("LOOSEPLAIN","[v=\\s]*".concat(o[c.MAINVERSIONLOOSE]).concat(o[c.PRERELEASELOOSE],"?").concat(o[c.BUILD],"?")),f("LOOSE","^".concat(o[c.LOOSEPLAIN],"$")),f("GTLT","((?:<|>)?=?)"),f("XRANGEIDENTIFIERLOOSE","".concat(o[c.NUMERICIDENTIFIERLOOSE],"|x|X|\\*")),f("XRANGEIDENTIFIER","".concat(o[c.NUMERICIDENTIFIER],"|x|X|\\*")),f("XRANGEPLAIN","[v=\\s]*(".concat(o[c.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(o[c.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(o[c.XRANGEIDENTIFIER],")")+"(?:".concat(o[c.PRERELEASE],")?").concat(o[c.BUILD],"?")+")?)?"),f("XRANGEPLAINLOOSE","[v=\\s]*(".concat(o[c.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(o[c.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(o[c.XRANGEIDENTIFIERLOOSE],")")+"(?:".concat(o[c.PRERELEASELOOSE],")?").concat(o[c.BUILD],"?")+")?)?"),f("XRANGE","^".concat(o[c.GTLT],"\\s*").concat(o[c.XRANGEPLAIN],"$")),f("XRANGELOOSE","^".concat(o[c.GTLT],"\\s*").concat(o[c.XRANGEPLAINLOOSE],"$")),f("COERCE","".concat("(^|[^\\d])(\\d{1,").concat(n,"})")+"(?:\\.(\\d{1,".concat(n,"}))?")+"(?:\\.(\\d{1,".concat(n,"}))?")+"(?:$|[^\\d])"),f("COERCERTL",o[c.COERCE],!0),f("LONETILDE","(?:~>?)"),f("TILDETRIM","(\\s*)".concat(o[c.LONETILDE],"\\s+"),!0),e.tildeTrimReplace="$1~",f("TILDE","^".concat(o[c.LONETILDE]).concat(o[c.XRANGEPLAIN],"$")),f("TILDELOOSE","^".concat(o[c.LONETILDE]).concat(o[c.XRANGEPLAINLOOSE],"$")),f("LONECARET","(?:\\^)"),f("CARETTRIM","(\\s*)".concat(o[c.LONECARET],"\\s+"),!0),e.caretTrimReplace="$1^",f("CARET","^".concat(o[c.LONECARET]).concat(o[c.XRANGEPLAIN],"$")),f("CARETLOOSE","^".concat(o[c.LONECARET]).concat(o[c.XRANGEPLAINLOOSE],"$")),f("COMPARATORLOOSE","^".concat(o[c.GTLT],"\\s*(").concat(o[c.LOOSEPLAIN],")$|^$")),f("COMPARATOR","^".concat(o[c.GTLT],"\\s*(").concat(o[c.FULLPLAIN],")$|^$")),f("COMPARATORTRIM","(\\s*)".concat(o[c.GTLT],"\\s*(").concat(o[c.LOOSEPLAIN],"|").concat(o[c.XRANGEPLAIN],")"),!0),e.comparatorTrimReplace="$1$2$3",f("HYPHENRANGE","^\\s*(".concat(o[c.XRANGEPLAIN],")")+"\\s+-\\s+"+"(".concat(o[c.XRANGEPLAIN],")")+"\\s*$"),f("HYPHENRANGELOOSE","^\\s*(".concat(o[c.XRANGEPLAINLOOSE],")")+"\\s+-\\s+"+"(".concat(o[c.XRANGEPLAINLOOSE],")")+"\\s*$"),f("STAR","(<|>)?=?\\s*\\*"),f("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),f("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(ya,ya.exports);var dU=/^[0-9]+$/,uQ=(t,e)=>{var n=dU.test(t),i=dU.test(e);return n&&i&&(t=+t,e=+e),t===e?0:n&&!i?-1:i&&!n?1:t<e?-1:1},TRe=(t,e)=>uQ(e,t),vRe={compareIdentifiers:uQ,rcompareIdentifiers:TRe},i0=US,fU=$3.MAX_LENGTH,s0=$3.MAX_SAFE_INTEGER,uU=ya.exports.re,hU=ya.exports.t,ERe=z3,rh=vRe.compareIdentifiers;class ea{constructor(e,n){if(n=ERe(n),e instanceof ea){if(e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError("Invalid Version: ".concat(e));if(e.length>fU)throw new TypeError("version is longer than ".concat(fU," characters"));i0("SemVer",e,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;var i=e.trim().match(n.loose?uU[hU.LOOSE]:uU[hU.FULL]);if(!i)throw new TypeError("Invalid Version: ".concat(e));if(this.raw=e,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>s0||this.major<0)throw new TypeError("Invalid major version");if(this.minor>s0||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>s0||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){var o=+s;if(o>=0&&o<s0)return o}return s}):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}format(){return this.version="".concat(this.major,".").concat(this.minor,".").concat(this.patch),this.prerelease.length&&(this.version+="-".concat(this.prerelease.join("."))),this.version}toString(){return this.version}compare(e){if(i0("SemVer.compare",this.version,this.options,e),!(e instanceof ea)){if(typeof e=="string"&&e===this.version)return 0;e=new ea(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof ea||(e=new ea(e,this.options)),rh(this.major,e.major)||rh(this.minor,e.minor)||rh(this.patch,e.patch)}comparePre(e){if(e instanceof ea||(e=new ea(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var n=0;do{var i=this.prerelease[n],s=e.prerelease[n];if(i0("prerelease compare",n,i,s),i===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(i===void 0)return-1;if(i===s)continue;return rh(i,s)}while(++n)}compareBuild(e){e instanceof ea||(e=new ea(e,this.options));var n=0;do{var i=this.build[n],s=e.build[n];if(i0("prerelease compare",n,i,s),i===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(i===void 0)return-1;if(i===s)continue;return rh(i,s)}while(++n)}inc(e,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n),this.inc("pre",n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n),this.inc("pre",n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var i=this.prerelease.length;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);i===-1&&this.prerelease.push(0)}n&&(rh(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=[n,0]):this.prerelease=[n,0]);break;default:throw new Error("invalid increment argument: ".concat(e))}return this.format(),this.raw=this.version,this}}var q3=ea,pU=q3,SRe=(t,e,n)=>new pU(t,n).compare(new pU(e,n)),vg=SRe,xRe=vg,BRe=(t,e,n)=>xRe(t,e,n)===0,kRe=BRe,IRe=vg,FRe=(t,e,n)=>IRe(t,e,n)!==0,ORe=FRe,MRe=vg,ARe=(t,e,n)=>MRe(t,e,n)>0,NRe=ARe,CRe=vg,RRe=(t,e,n)=>CRe(t,e,n)>=0,LRe=RRe,PRe=vg,DRe=(t,e,n)=>PRe(t,e,n)<0,jRe=DRe,URe=vg,zRe=(t,e,n)=>URe(t,e,n)<=0,$Re=zRe,qRe=kRe,GRe=ORe,VRe=NRe,HRe=LRe,WRe=jRe,YRe=$Re,XRe=(t,e,n,i)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t===n;case"!==":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t!==n;case"":case"=":case"==":return qRe(t,n,i);case"!=":return GRe(t,n,i);case">":return VRe(t,n,i);case">=":return HRe(t,n,i);case"<":return WRe(t,n,i);case"<=":return YRe(t,n,i);default:throw new TypeError("Invalid operator: ".concat(e))}},KRe=XRe,FB,gU;function JRe(){if(gU)return FB;gU=1;var t=Symbol("SemVer ANY");class e{static get ANY(){return t}constructor(a,_){if(_=n(_),a instanceof e){if(a.loose===!!_.loose)return a;a=a.value}c("comparator",a,_),this.options=_,this.loose=!!_.loose,this.parse(a),this.semver===t?this.value="":this.value=this.operator+this.semver.version,c("comp",this)}parse(a){var _=this.options.loose?i[s.COMPARATORLOOSE]:i[s.COMPARATOR],w=a.match(_);if(!w)throw new TypeError("Invalid comparator: ".concat(a));this.operator=w[1]!==void 0?w[1]:"",this.operator==="="&&(this.operator=""),w[2]?this.semver=new d(w[2],this.options.loose):this.semver=t}toString(){return this.value}test(a){if(c("Comparator.test",a,this.options.loose),this.semver===t||a===t)return!0;if(typeof a=="string")try{a=new d(a,this.options)}catch{return!1}return o(a,this.operator,this.semver,this.options)}intersects(a,_){if(!(a instanceof e))throw new TypeError("a Comparator is required");if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new f(a.value,_).test(this.value);if(a.operator==="")return a.value===""?!0:new f(this.value,_).test(a.semver);var w=(this.operator===">="||this.operator===">")&&(a.operator===">="||a.operator===">"),m=(this.operator==="<="||this.operator==="<")&&(a.operator==="<="||a.operator==="<"),l=this.semver.version===a.semver.version,T=(this.operator===">="||this.operator==="<=")&&(a.operator===">="||a.operator==="<="),b=o(this.semver,"<",a.semver,_)&&(this.operator===">="||this.operator===">")&&(a.operator==="<="||a.operator==="<"),S=o(this.semver,">",a.semver,_)&&(this.operator==="<="||this.operator==="<")&&(a.operator===">="||a.operator===">");return w||m||l&&T||b||S}}FB=e;var n=z3,i=ya.exports.re,s=ya.exports.t,o=KRe,c=US,d=q3,f=hQ();return FB}function _U(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=QRe(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var i=0,s=function(){};return{s,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(u){throw u},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,c=!1,d;return{s:function(){n=n.call(t)},n:function(){var u=n.next();return o=u.done,u},e:function(u){c=!0,d=u},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(c)throw d}}}}function QRe(t,e){if(!!t){if(typeof t=="string")return yU(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yU(t,e)}}function yU(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var OB,mU;function hQ(){if(mU)return OB;mU=1;class t{constructor(z,$){if($=i($),z instanceof t)return z.loose===!!$.loose&&z.includePrerelease===!!$.includePrerelease?z:new t(z.raw,$);if(z instanceof s)return this.raw=z.value,this.set=[[z]],this.format(),this;if(this.options=$,this.loose=!!$.loose,this.includePrerelease=!!$.includePrerelease,this.raw=z,this.set=z.split("||").map(V=>this.parseRange(V.trim())).filter(V=>V.length),!this.set.length)throw new TypeError("Invalid SemVer Range: ".concat(z));if(this.set.length>1){var K=this.set[0];if(this.set=this.set.filter(V=>!w(V[0])),this.set.length===0)this.set=[K];else if(this.set.length>1){var H=_U(this.set),W;try{for(H.s();!(W=H.n()).done;){var J=W.value;if(J.length===1&&m(J[0])){this.set=[J];break}}}catch(V){H.e(V)}finally{H.f()}}}this.format()}format(){return this.range=this.set.map(z=>z.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(z){z=z.trim();var $=Object.keys(this.options).join(","),K="parseRange:".concat($,":").concat(z),H=n.get(K);if(H)return H;var W=this.options.loose,J=W?d[f.HYPHENRANGELOOSE]:d[f.HYPHENRANGE];z=z.replace(J,P(this.options.includePrerelease)),o("hyphen replace",z),z=z.replace(d[f.COMPARATORTRIM],u),o("comparator trim",z),z=z.replace(d[f.TILDETRIM],a),z=z.replace(d[f.CARETTRIM],_),z=z.split(/\s+/).join(" ");var V=z.split(" ").map(Ce=>T(Ce,this.options)).join(" ").split(/\s+/).map(Ce=>R(Ce,this.options));W&&(V=V.filter(Ce=>(o("loose invalid filter",Ce,this.options),!!Ce.match(d[f.COMPARATORLOOSE])))),o("range list",V);var le=new Map,pe=V.map(Ce=>new s(Ce,this.options)),se=_U(pe),Ne;try{for(se.s();!(Ne=se.n()).done;){var fe=Ne.value;if(w(fe))return[fe];le.set(fe.value,fe)}}catch(Ce){se.e(Ce)}finally{se.f()}le.size>1&&le.has("")&&le.delete("");var Oe=[...le.values()];return n.set(K,Oe),Oe}intersects(z,$){if(!(z instanceof t))throw new TypeError("a Range is required");return this.set.some(K=>l(K,$)&&z.set.some(H=>l(H,$)&&K.every(W=>H.every(J=>W.intersects(J,$)))))}test(z){if(!z)return!1;if(typeof z=="string")try{z=new c(z,this.options)}catch{return!1}for(var $=0;$<this.set.length;$++)if(j(this.set[$],z,this.options))return!0;return!1}}OB=t;var e=hRe,n=new e({max:1e3}),i=z3,s=JRe(),o=US,c=q3,d=ya.exports.re,f=ya.exports.t,u=ya.exports.comparatorTrimReplace,a=ya.exports.tildeTrimReplace,_=ya.exports.caretTrimReplace,w=D=>D.value==="<0.0.0-0",m=D=>D.value==="",l=(D,z)=>{for(var $=!0,K=D.slice(),H=K.pop();$&&K.length;)$=K.every(W=>H.intersects(W,z)),H=K.pop();return $},T=(D,z)=>(o("comp",D,z),D=B(D,z),o("caret",D),D=S(D,z),o("tildes",D),D=k(D,z),o("xrange",D),D=M(D,z),o("stars",D),D),b=D=>!D||D.toLowerCase()==="x"||D==="*",S=(D,z)=>D.trim().split(/\s+/).map($=>x($,z)).join(" "),x=(D,z)=>{var $=z.loose?d[f.TILDELOOSE]:d[f.TILDE];return D.replace($,(K,H,W,J,V)=>{o("tilde",D,K,H,W,J,V);var le;return b(H)?le="":b(W)?le=">=".concat(H,".0.0 <").concat(+H+1,".0.0-0"):b(J)?le=">=".concat(H,".").concat(W,".0 <").concat(H,".").concat(+W+1,".0-0"):V?(o("replaceTilde pr",V),le=">=".concat(H,".").concat(W,".").concat(J,"-").concat(V," <").concat(H,".").concat(+W+1,".0-0")):le=">=".concat(H,".").concat(W,".").concat(J," <").concat(H,".").concat(+W+1,".0-0"),o("tilde return",le),le})},B=(D,z)=>D.trim().split(/\s+/).map($=>F($,z)).join(" "),F=(D,z)=>{o("caret",D,z);var $=z.loose?d[f.CARETLOOSE]:d[f.CARET],K=z.includePrerelease?"-0":"";return D.replace($,(H,W,J,V,le)=>{o("caret",D,H,W,J,V,le);var pe;return b(W)?pe="":b(J)?pe=">=".concat(W,".0.0").concat(K," <").concat(+W+1,".0.0-0"):b(V)?W==="0"?pe=">=".concat(W,".").concat(J,".0").concat(K," <").concat(W,".").concat(+J+1,".0-0"):pe=">=".concat(W,".").concat(J,".0").concat(K," <").concat(+W+1,".0.0-0"):le?(o("replaceCaret pr",le),W==="0"?J==="0"?pe=">=".concat(W,".").concat(J,".").concat(V,"-").concat(le," <").concat(W,".").concat(J,".").concat(+V+1,"-0"):pe=">=".concat(W,".").concat(J,".").concat(V,"-").concat(le," <").concat(W,".").concat(+J+1,".0-0"):pe=">=".concat(W,".").concat(J,".").concat(V,"-").concat(le," <").concat(+W+1,".0.0-0")):(o("no pr"),W==="0"?J==="0"?pe=">=".concat(W,".").concat(J,".").concat(V).concat(K," <").concat(W,".").concat(J,".").concat(+V+1,"-0"):pe=">=".concat(W,".").concat(J,".").concat(V).concat(K," <").concat(W,".").concat(+J+1,".0-0"):pe=">=".concat(W,".").concat(J,".").concat(V," <").concat(+W+1,".0.0-0")),o("caret return",pe),pe})},k=(D,z)=>(o("replaceXRanges",D,z),D.split(/\s+/).map($=>A($,z)).join(" ")),A=(D,z)=>{D=D.trim();var $=z.loose?d[f.XRANGELOOSE]:d[f.XRANGE];return D.replace($,(K,H,W,J,V,le)=>{o("xRange",D,K,H,W,J,V,le);var pe=b(W),se=pe||b(J),Ne=se||b(V),fe=Ne;return H==="="&&fe&&(H=""),le=z.includePrerelease?"-0":"",pe?H===">"||H==="<"?K="<0.0.0-0":K="*":H&&fe?(se&&(J=0),V=0,H===">"?(H=">=",se?(W=+W+1,J=0,V=0):(J=+J+1,V=0)):H==="<="&&(H="<",se?W=+W+1:J=+J+1),H==="<"&&(le="-0"),K="".concat(H+W,".").concat(J,".").concat(V).concat(le)):se?K=">=".concat(W,".0.0").concat(le," <").concat(+W+1,".0.0-0"):Ne&&(K=">=".concat(W,".").concat(J,".0").concat(le," <").concat(W,".").concat(+J+1,".0-0")),o("xRange return",K),K})},M=(D,z)=>(o("replaceStars",D,z),D.trim().replace(d[f.STAR],"")),R=(D,z)=>(o("replaceGTE0",D,z),D.trim().replace(d[z.includePrerelease?f.GTE0PRE:f.GTE0],"")),P=D=>(z,$,K,H,W,J,V,le,pe,se,Ne,fe,Oe)=>(b(K)?$="":b(H)?$=">=".concat(K,".0.0").concat(D?"-0":""):b(W)?$=">=".concat(K,".").concat(H,".0").concat(D?"-0":""):J?$=">=".concat($):$=">=".concat($).concat(D?"-0":""),b(pe)?le="":b(se)?le="<".concat(+pe+1,".0.0-0"):b(Ne)?le="<".concat(pe,".").concat(+se+1,".0-0"):fe?le="<=".concat(pe,".").concat(se,".").concat(Ne,"-").concat(fe):D?le="<".concat(pe,".").concat(se,".").concat(+Ne+1,"-0"):le="<=".concat(le),"".concat($," ").concat(le).trim()),j=(D,z,$)=>{for(var K=0;K<D.length;K++)if(!D[K].test(z))return!1;if(z.prerelease.length&&!$.includePrerelease){for(var H=0;H<D.length;H++)if(o(D[H].semver),D[H].semver!==s.ANY&&D[H].semver.prerelease.length>0){var W=D[H].semver;if(W.major===z.major&&W.minor===z.minor&&W.patch===z.patch)return!0}return!1}return!0};return OB}var ZRe=hQ(),eLe=(t,e,n)=>{try{e=new ZRe(e,n)}catch{return!1}return e.test(t)},pQ=eLe;function tLe(t,e,n){var i=t.open(e),s=1e4,o=250,c=new URL(e),d=c.origin,f=~~(s/o);function u(_){_.source===i&&(f=0,t.removeEventListener("message",u,!1))}t.addEventListener("message",u,!1);function a(){f<=0||(i.postMessage(n,d),setTimeout(a,o),f-=1)}setTimeout(a,o)}var nLe=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return this.substr(!e||e<0?0:+e,t.length)===t});function gQ(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];for(var s=0,o=n;s<o.length;s++){var c=o[s];iLe(t,c)}return t}function iLe(t,e){for(var n=0,i=Object.keys(e);n<i.length;n++){var s=i[n];sg(t,s,e[s],!0)}}var MB;function sLe(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=rLe(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var i=0,s=function(){};return{s,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(u){throw u},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,c=!1,d;return{s:function(){n=n.call(t)},n:function(){var u=n.next();return o=u.done,u},e:function(u){c=!0,d=u},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(c)throw d}}}}function rLe(t,e){if(!!t){if(typeof t=="string")return wU(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wU(t,e)}}function wU(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function bU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,i)}return n}function Gc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bU(Object(n),!0).forEach(function(i){J3e(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bU(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}var ia=xBe,Ry=WCe,r0=typeof window<"u"?window:void 0;Ry===void 0&&r0!==null&&r0!==void 0&&(MB=r0.vl)!==null&&MB!==void 0&&MB.compile&&(Ry=r0.vl);var aLe={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},oLe={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},v_={vega:"Vega","vega-lite":"Vega-Lite"},w1={vega:ia.version,"vega-lite":Ry?Ry.version:"not available"},lLe={vega:t=>t,"vega-lite":(t,e)=>Ry.compile(t,{config:e}).spec},cLe=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,dLe="chart-wrapper";function fLe(t){return typeof t=="function"}function TU(t,e,n,i){var s="<html><head>".concat(e,'</head><body><pre><code class="json">'),o="</code></pre>".concat(n,"</body></html>"),c=window.open("");c.document.write(s+t+o),c.document.title="".concat(v_[i]," JSON Source")}function uLe(t,e){if(t.$schema){var n=tQ(t.$schema);if(e&&e!==n.library){var i;console.warn("The given visualization spec is written in ".concat(v_[n.library],", but mode argument sets ").concat((i=v_[e])!==null&&i!==void 0?i:e,"."))}var s=n.library;return pQ(w1[s],"^".concat(n.version.slice(1)))||console.warn("The input spec uses ".concat(v_[s]," ").concat(n.version,", but the current version of ").concat(v_[s]," is v").concat(w1[s],".")),s}return"mark"in t||"encoding"in t||"layer"in t||"hconcat"in t||"vconcat"in t||"facet"in t||"repeat"in t?"vega-lite":"marks"in t||"signals"in t||"scales"in t||"axes"in t?"vega":e!=null?e:"vega"}function hLe(t){return!!(t&&"load"in t)}function vU(t){return hLe(t)?t:ia.loader(t)}function pLe(t){var e,n,i=(e=(n=t.usermeta)===null||n===void 0?void 0:n.embedOptions)!==null&&e!==void 0?e:{};return ke(i.defaultStyle)&&(i.defaultStyle=!1),i}function gLe(t,e){return bF.apply(this,arguments)}function bF(){return bF=_1(To.mark(function t(e,n){var i,s,o,c,d,f,u,a,_,w,m,l=arguments;return To.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(o=l.length>2&&l[2]!==void 0?l[2]:{},!ke(n)){b.next=10;break}return d=vU(o.loader),b.t0=JSON,b.next=6,d.load(n);case 6:b.t1=b.sent,c=b.t0.parse.call(b.t0,b.t1),b.next=11;break;case 10:c=n;case 11:return f=pLe(c),u=f.loader,(!d||u)&&(d=vU((a=o.loader)!==null&&a!==void 0?a:u)),b.next=16,EU(f,d);case 16:return _=b.sent,b.next=19,EU(o,d);case 19:return w=b.sent,m=Gc(Gc({},gQ(w,_)),{},{config:ig((i=w.config)!==null&&i!==void 0?i:{},(s=_.config)!==null&&s!==void 0?s:{})}),b.next=23,yLe(e,c,m,d);case 23:return b.abrupt("return",b.sent);case 24:case"end":return b.stop()}},t)})),bF.apply(this,arguments)}function EU(t,e){return TF.apply(this,arguments)}function TF(){return TF=_1(To.mark(function t(e,n){var i,s,o;return To.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!ke(e.config)){d.next=8;break}return d.t1=JSON,d.next=4,n.load(e.config);case 4:d.t2=d.sent,d.t0=d.t1.parse.call(d.t1,d.t2),d.next=9;break;case 8:d.t0=(i=e.config)!==null&&i!==void 0?i:{};case 9:if(s=d.t0,!ke(e.patch)){d.next=18;break}return d.t4=JSON,d.next=14,n.load(e.patch);case 14:d.t5=d.sent,d.t3=d.t4.parse.call(d.t4,d.t5),d.next=19;break;case 18:d.t3=e.patch;case 19:return o=d.t3,d.abrupt("return",Gc(Gc(Gc({},e),o?{patch:o}:{}),s?{config:s}:{}));case 21:case"end":return d.stop()}},t)})),TF.apply(this,arguments)}function _Le(t){var e,n=t.getRootNode?t.getRootNode():document;return n instanceof ShadowRoot?{root:n,rootContainer:n}:{root:document,rootContainer:(e=document.head)!==null&&e!==void 0?e:document.body}}function yLe(t,e){return vF.apply(this,arguments)}function vF(){return vF=_1(To.mark(function t(e,n){var i,s,o,c,d,f,u,a,_,w,m,l,T,b,S,x,B,F,k,A,M,R,P,j,D,z,$,K,H,W,J,V,le,pe,se,Ne,fe,Oe,Ce,We,Bt,vt,ge,q,G,L,Y,Q,ae,re,_e,Ee=arguments;return To.wrap(function(zt){for(;;)switch(zt.prev=zt.next){case 0:if(_e=function(){Oe&&document.removeEventListener("click",Oe),V.finalize()},a=Ee.length>2&&Ee[2]!==void 0?Ee[2]:{},_=Ee.length>3?Ee[3]:void 0,w=a.theme?ig(z3e[a.theme],(i=a.config)!==null&&i!==void 0?i:{}):a.config,m=Od(a.actions)?a.actions:gQ({},aLe,(s=a.actions)!==null&&s!==void 0?s:{}),l=Gc(Gc({},oLe),a.i18n),T=(o=a.renderer)!==null&&o!==void 0?o:"canvas",b=(c=a.logLevel)!==null&&c!==void 0?c:ia.Warn,S=(d=a.downloadFileName)!==null&&d!==void 0?d:"visualization",x=typeof e=="string"?document.querySelector(e):e,x){zt.next=12;break}throw new Error("".concat(e," does not exist"));case 12:if(a.defaultStyle!==!1&&(B="vega-embed-style",F=_Le(x),k=F.root,A=F.rootContainer,k.getElementById(B)||(M=document.createElement("style"),M.id=B,M.innerHTML=a.defaultStyle===void 0||a.defaultStyle===!0?nLe.toString():a.defaultStyle,A.appendChild(M))),R=uLe(n,a.mode),P=lLe[R](n,w),R==="vega-lite"&&P.$schema&&(j=tQ(P.$schema),pQ(w1.vega,"^".concat(j.version.slice(1)))||console.warn("The compiled spec uses Vega ".concat(j.version,", but current version is v").concat(w1.vega,"."))),x.classList.add("vega-embed"),m&&x.classList.add("has-actions"),x.innerHTML="",D=x,m&&(z=document.createElement("div"),z.classList.add(dLe),x.appendChild(z),D=z),$=a.patch,$&&(P=$ instanceof Function?$(P):lE(P,$,!0,!1).newDocument),a.formatLocale&&ia.formatLocale(a.formatLocale),a.timeFormatLocale&&ia.timeFormatLocale(a.timeFormatLocale),a.expressionFunctions)for(K in a.expressionFunctions)H=a.expressionFunctions[K],"fn"in H?ia.expressionFunction(K,H.fn,H.visitor):H instanceof Function&&ia.expressionFunction(K,H);return W=a.ast,J=ia.parse(P,R==="vega-lite"?{}:w,{ast:W}),V=new(a.viewClass||ia.View)(J,Gc({loader:_,logLevel:b,renderer:T},W?{expr:(f=(u=ia.expressionInterpreter)!==null&&u!==void 0?u:a.expr)!==null&&f!==void 0?f:RBe}:{})),V.addSignalListener("autosize",(At,et)=>{var fn=et.type;fn=="fit-x"?(D.classList.add("fit-x"),D.classList.remove("fit-y")):fn=="fit-y"?(D.classList.remove("fit-x"),D.classList.add("fit-y")):fn=="fit"?D.classList.add("fit-x","fit-y"):D.classList.remove("fit-x","fit-y")}),a.tooltip!==!1&&(le=fLe(a.tooltip)?a.tooltip:new K3e(a.tooltip===!0?{}:a.tooltip).call,V.tooltip(le)),pe=a.hover,pe===void 0&&(pe=R==="vega"),pe&&(se=typeof pe=="boolean"?{}:pe,Ne=se.hoverSet,fe=se.updateSet,V.hover(Ne,fe)),a&&(a.width!=null&&V.width(a.width),a.height!=null&&V.height(a.height),a.padding!=null&&V.padding(a.padding)),zt.next=37,V.initialize(D,a.bind).runAsync();case 37:if(m!==!1){if(Ce=x,a.defaultStyle!==!1&&(We=document.createElement("details"),We.title=l.CLICK_TO_VIEW_ACTIONS,x.append(We),Ce=We,Bt=document.createElement("summary"),Bt.innerHTML=cLe,We.append(Bt),Oe=At=>{We.contains(At.target)||We.removeAttribute("open")},document.addEventListener("click",Oe)),vt=document.createElement("div"),Ce.append(vt),vt.classList.add("vega-actions"),m===!0||m.export!==!1){ge=sLe(["svg","png"]);try{for(G=function(){var et=q.value;if(m===!0||m.export===!0||m.export[et]){var fn=l["".concat(et.toUpperCase(),"_ACTION")],qn=document.createElement("a");qn.text=fn,qn.href="#",qn.target="_blank",qn.download="".concat(S,".").concat(et),qn.addEventListener("mousedown",function(){var gs=_1(To.mark(function ue(Bi){var ni;return To.wrap(function(vn){for(;;)switch(vn.prev=vn.next){case 0:return Bi.preventDefault(),vn.next=3,V.toImageURL(et,a.scaleFactor);case 3:ni=vn.sent,this.href=ni;case 5:case"end":return vn.stop()}},ue,this)}));return function(ue){return gs.apply(this,arguments)}}()),vt.append(qn)}},ge.s();!(q=ge.n()).done;)G()}catch(At){ge.e(At)}finally{ge.f()}}(m===!0||m.source!==!1)&&(L=document.createElement("a"),L.text=l.SOURCE_ACTION,L.href="#",L.addEventListener("click",function(At){var et,fn;TU(Nx(n),(et=a.sourceHeader)!==null&&et!==void 0?et:"",(fn=a.sourceFooter)!==null&&fn!==void 0?fn:"",R),At.preventDefault()}),vt.append(L)),R==="vega-lite"&&(m===!0||m.compiled!==!1)&&(Y=document.createElement("a"),Y.text=l.COMPILED_ACTION,Y.href="#",Y.addEventListener("click",function(At){var et,fn;TU(Nx(P),(et=a.sourceHeader)!==null&&et!==void 0?et:"",(fn=a.sourceFooter)!==null&&fn!==void 0?fn:"","vega"),At.preventDefault()}),vt.append(Y)),(m===!0||m.editor!==!1)&&(ae=(Q=a.editorUrl)!==null&&Q!==void 0?Q:"https://vega.github.io/editor/",re=document.createElement("a"),re.text=l.EDITOR_ACTION,re.href="#",re.addEventListener("click",function(At){tLe(window,ae,{config:w,mode:R,renderer:T,spec:Nx(n)}),At.preventDefault()}),vt.append(re))}return zt.abrupt("return",{view:V,spec:n,vgSpec:P,finalize:_e,embedOptions:a});case 39:case"end":return zt.stop()}},t)})),vF.apply(this,arguments)}const mLe=new Set(["width","height"]);function wLe(t,e){for(const[n,i]of Object.entries(e))i&&(!!i&&{}.toString.call(i)==="[object Function]"?i(t.data(n)):t.change(n,ia.changeset().remove(()=>!0).insert(i)))}function a0(t={},e={},n=new Set){const i=Object.keys(t),s=Object.keys(e);return t===e||i.length===s.length&&i.filter(o=>!n.has(o)).every(o=>t[o]===e[o])}function SU(t,e){const n=Object.keys(e);for(const i of n)try{t.removeSignalListener(i,e[i])}catch(s){console.warn("Cannot remove invalid signal listener.",s)}return n.length>0}function AB(t,e){const n=Object.keys(e);for(const i of n)try{t.addSignalListener(i,e[i])}catch(s){console.warn("Cannot add invalid signal listener.",s)}return n.length>0}function bLe(t){return new Set(t.flatMap(e=>Object.keys(e)))}function TLe(t,e){if(t===e)return!1;const n={width:!1,height:!1,isExpensive:!1},i="width"in t||"width"in e,s="height"in t||"height"in e;return i&&(!("width"in t)||!("width"in e)||t.width!==e.width)&&("width"in t&&typeof t.width=="number"?n.width=t.width:n.isExpensive=!0),s&&(!("height"in t)||!("height"in e)||t.height!==e.height)&&("height"in t&&typeof t.height=="number"?n.height=t.height:n.isExpensive=!0),[...bLe([t,e])].filter(c=>c!=="width"&&c!=="height").some(c=>!(c in t)||!(c in e)||!$Y(t[c],e[c]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function xU(t,e){const{width:n,height:i}=e;return typeof n<"u"&&typeof i<"u"?{...t,width:n,height:i}:typeof n<"u"?{...t,width:n}:typeof i<"u"?{...t,height:i}:t}function vLe(t){let e;return{c(){e=ta("div")},m(n,i){b1(n,e,i),t[11](e)},p:xh,i:xh,o:xh,d(n){n&&Ly(e),t[11](null)}}}function ELe(t,e,n){let{options:i}=e,{spec:s}=e,{view:o}=e,{signalListeners:c={}}=e,{data:d={}}=e;const f=SF();let u,a={},_={},w={},m={},l;OQ(()=>{b()});async function T(){b();try{n(6,u=await gLe(l,s,i)),n(1,o=u.view),AB(o,c)&&o.runAsync(),x(o)}catch(k){S(k)}}function b(){u&&(u.finalize(),n(6,u=void 0),n(1,o=void 0))}function S(k){f("onError",{error:k}),console.warn(k)}function x(k){B(),f("onNewView",{view:k})}async function B(){d&&Object.keys(d).length>0&&u!==void 0&&(n(1,o=u.view),wLe(o,d),await o.resize().runAsync())}function F(k){Yh[k?"unshift":"push"](()=>{l=k,n(0,l)})}return t.$$set=k=>{"options"in k&&n(2,i=k.options),"spec"in k&&n(3,s=k.spec),"view"in k&&n(1,o=k.view),"signalListeners"in k&&n(4,c=k.signalListeners),"data"in k&&n(5,d=k.data)},t.$$.update=()=>{if(t.$$.dirty&1056&&(a0(d,m)||B(),n(10,m=d)),t.$$.dirty&991&&l!==void 0){if(!a0(i,a,mLe))T();else{const k=TLe(xU(s,i),xU(w,a)),A=c,M=_;if(k){if(k.isExpensive)T();else if(u!==void 0){const R=!a0(A,M);n(1,o=u.view),k.width!==!1&&o.width(k.width),k.height!==!1&&o.height(k.height),R&&(M&&SU(o,M),A&&AB(o,A)),o.runAsync()}}else!a0(A,M)&&u!==void 0&&(n(1,o=u.view),M&&SU(o,M),A&&AB(o,A),o.runAsync())}n(7,a=i),n(8,_=c),n(9,w=s)}},[l,o,i,s,c,d,u,a,_,w,m,F]}class SLe extends vu{constructor(e){super(),Tu(this,e,ELe,vLe,mu,{options:2,spec:3,view:1,signalListeners:4,data:5})}}function xLe(t){let e,n,i;function s(c){t[6](c)}let o={spec:t[1],data:t[2],signalListeners:t[3],options:t[4]};return t[0]!==void 0&&(o.view=t[0]),e=new SLe({props:o}),Yh.push(()=>BF(e,"view",s,t[0])),e.$on("onNewView",t[7]),e.$on("onError",t[8]),{c(){Hp(e.$$.fragment)},m(c,d){wu(e,c,d),i=!0},p(c,[d]){const f={};d&2&&(f.spec=c[1]),d&4&&(f.data=c[2]),d&8&&(f.signalListeners=c[3]),d&16&&(f.options=c[4]),!n&&d&1&&(n=!0,f.view=c[0],xF(()=>n=!1)),e.$set(f)},i(c){i||(vo(e.$$.fragment,c),i=!0)},o(c){Vc(e.$$.fragment,c),i=!1},d(c){bu(e,c)}}}const BLe="vega-lite";function kLe(t,e,n){let i,{spec:s}=e,{options:o={}}=e,{data:c={}}=e,{signalListeners:d={}}=e,{view:f=void 0}=e;function u(w){f=w,n(0,f)}function a(w){Mr.call(this,t,w)}function _(w){Mr.call(this,t,w)}return t.$$set=w=>{"spec"in w&&n(1,s=w.spec),"options"in w&&n(5,o=w.options),"data"in w&&n(2,c=w.data),"signalListeners"in w&&n(3,d=w.signalListeners),"view"in w&&n(0,f=w.view)},t.$$.update=()=>{t.$$.dirty&32&&n(4,i={...o,mode:BLe})},[f,s,c,d,i,o,u,a,_]}class _Q extends vu{constructor(e){super(),Tu(this,e,kLe,xLe,mu,{spec:1,options:5,data:2,signalListeners:3,view:0})}}function ILe(t){let e,n,i,s,o,c;function d(u){t[16](u)}let f={data:t[2],spec:t[1],options:{tooltip:!0,actions:!1,theme:"vox"}};return t[0]!==void 0&&(f.view=t[0]),n=new _Q({props:f}),Yh.push(()=>BF(n,"view",d,t[0])),{c(){e=ta("div"),Hp(n.$$.fragment),uh(e,"class","container svelte-mufgje")},m(u,a){b1(u,e,a),wu(n,e,null),s=!0,o||(c=[q0(e,"mouseenter",t[14]),q0(e,"mouseleave",t[15])],o=!0)},p(u,[a]){const _={};a&4&&(_.data=u[2]),a&2&&(_.spec=u[1]),!i&&a&1&&(i=!0,_.view=u[0],xF(()=>i=!1)),n.$set(_)},i(u){s||(vo(n.$$.fragment,u),s=!0)},o(u){Vc(n.$$.fragment,u),s=!1},d(u){u&&Ly(e),bu(n),o=!1,yu(c)}}}function FLe(t,e,n){let i,s;const o=SF();let{bins:c=[{bin:"chicken",count:200,filteredCount:150},{bin:"dog",count:300,filteredCount:25}]}=e,{title:d=""}=e,{width:f=400}=e,{height:u=125}=e,{countLabel:a="Count"}=e,{dimLabel:_=""}=e,{labelColor:w="hsla(0, 0%, 100%, 0.9)"}=e,{backgroundBarColor:m="hsla(0, 0%, 100%, 0.5)"}=e,{foregroundBarColor:l="hsla(172, 97%, 45%, 0.95)"}=e,{backgroundColor:T="hsl(240,23%,9%)"}=e,b,S=!1;function x(k){Mr.call(this,t,k)}function B(k){Mr.call(this,t,k)}function F(k){b=k,n(0,b)}return t.$$set=k=>{"bins"in k&&n(3,c=k.bins),"title"in k&&n(4,d=k.title),"width"in k&&n(5,f=k.width),"height"in k&&n(6,u=k.height),"countLabel"in k&&n(7,a=k.countLabel),"dimLabel"in k&&n(8,_=k.dimLabel),"labelColor"in k&&n(9,w=k.labelColor),"backgroundBarColor"in k&&n(10,m=k.backgroundBarColor),"foregroundBarColor"in k&&n(11,l=k.foregroundBarColor),"backgroundColor"in k&&n(12,T=k.backgroundColor)},t.$$.update=()=>{t.$$.dirty&8&&n(2,i={table:c}),t.$$.dirty&8176&&n(1,s={$schema:"https://vega.github.io/schema/vega-lite/v5.json",description:"A categorical bar chart",data:{name:"table"},background:T,width:f,height:u,title:d,layer:[{params:[{name:"select",select:{type:"point",encodings:["x"]}}],mark:{type:"bar",cursor:"pointer"},encoding:{x:{field:"bin"},y:{field:"count",type:"quantitative"},color:{value:m},stroke:{condition:[{param:"select",empty:!1,value:"violet"}],value:"transparent"},strokeWidth:{condition:[{param:"select",empty:!1,value:3}],value:0}},color:{value:l}},{mark:{type:"bar"},encoding:{size:{legend:null},x:{field:"bin",title:"",axis:{title:_,titleColor:w,labelColor:w}},y:{field:"filteredCount",type:"quantitative",title:"count",axis:{title:a,titleColor:w,labelColor:w}},color:{value:l}}}]}),t.$$.dirty&8193&&b&&!S&&(b.addSignalListener("select",(...k)=>{let A;k[1]&&"bin"in k[1]?A=k[1].bin:A=null,o("select",A)}),n(13,S=!0))},[b,s,i,c,d,f,u,a,_,w,m,l,T,S,x,B,F]}class OLe extends vu{constructor(e){super(),Tu(this,e,FLe,ILe,mu,{bins:3,title:4,width:5,height:6,countLabel:7,dimLabel:8,labelColor:9,backgroundBarColor:10,foregroundBarColor:11,backgroundColor:12})}}function MLe(t){let e,n;return e=new OLe({props:{bins:t[9],title:t[0],width:t[1],height:t[2],countLabel:t[3],dimLabel:t[4],labelColor:t[5],backgroundBarColor:t[6],foregroundBarColor:t[7],backgroundColor:t[8]}}),e.$on("mouseenter",t[11]),e.$on("mouseleave",t[12]),e.$on("select",t[13]),{c(){Hp(e.$$.fragment)},m(i,s){wu(e,i,s),n=!0},p(i,[s]){const o={};s&512&&(o.bins=i[9]),s&1&&(o.title=i[0]),s&2&&(o.width=i[1]),s&4&&(o.height=i[2]),s&8&&(o.countLabel=i[3]),s&16&&(o.dimLabel=i[4]),s&32&&(o.labelColor=i[5]),s&64&&(o.backgroundBarColor=i[6]),s&128&&(o.foregroundBarColor=i[7]),s&256&&(o.backgroundColor=i[8]),e.$set(o)},i(i){n||(vo(e.$$.fragment,i),n=!0)},o(i){Vc(e.$$.fragment,i),n=!1},d(i){bu(e,i)}}}function ALe(t,e,n){let i,{state:s}=e,{title:o=""}=e,{width:c=400}=e,{height:d=125}=e,{countLabel:f="Count"}=e,{dimLabel:u=""}=e,{labelColor:a="hsla(0, 0%, 100%, 0.9)"}=e,{backgroundBarColor:_="hsla(0, 0%, 100%, 0.5)"}=e,{foregroundBarColor:w="hsla(172, 97%, 45%, 0.95)"}=e,{backgroundColor:m="hsl(240,23%,9%)"}=e;function l(S){Mr.call(this,t,S)}function T(S){Mr.call(this,t,S)}function b(S){Mr.call(this,t,S)}return t.$$set=S=>{"state"in S&&n(10,s=S.state),"title"in S&&n(0,o=S.title),"width"in S&&n(1,c=S.width),"height"in S&&n(2,d=S.height),"countLabel"in S&&n(3,f=S.countLabel),"dimLabel"in S&&n(4,u=S.dimLabel),"labelColor"in S&&n(5,a=S.labelColor),"backgroundBarColor"in S&&n(6,_=S.backgroundBarColor),"foregroundBarColor"in S&&n(7,w=S.foregroundBarColor),"backgroundColor"in S&&n(8,m=S.backgroundColor)},t.$$.update=()=>{var S,x;t.$$.dirty&1024&&n(9,i=(x=(S=s==null?void 0:s.bin)==null?void 0:S.filter(B=>B!==null).map((B,F)=>({bin:B,count:s.total[F],filteredCount:s.filter[F]})))!=null?x:[])},[o,c,d,f,u,a,_,w,m,i,s,l,T,b]}class NLe extends vu{constructor(e){super(),Tu(this,e,ALe,MLe,mu,{state:10,title:0,width:1,height:2,countLabel:3,dimLabel:4,labelColor:5,backgroundBarColor:6,foregroundBarColor:7,backgroundColor:8})}}function CLe(t){let e,n,i,s,o,c;function d(u){t[16](u)}let f={data:t[2],spec:t[1],options:{tooltip:!0,actions:!1,theme:"vox"}};return t[0]!==void 0&&(f.view=t[0]),n=new _Q({props:f}),Yh.push(()=>BF(n,"view",d,t[0])),{c(){e=ta("div"),Hp(n.$$.fragment),uh(e,"class","container svelte-mufgje")},m(u,a){b1(u,e,a),wu(n,e,null),s=!0,o||(c=[q0(e,"mouseenter",t[14]),q0(e,"mouseleave",t[15])],o=!0)},p(u,[a]){const _={};a&4&&(_.data=u[2]),a&2&&(_.spec=u[1]),!i&&a&1&&(i=!0,_.view=u[0],xF(()=>i=!1)),n.$set(_)},i(u){s||(vo(n.$$.fragment,u),s=!0)},o(u){Vc(n.$$.fragment,u),s=!1},d(u){u&&Ly(e),bu(n),o=!1,yu(c)}}}function RLe(t,e,n){let i,s;const o=SF();let{bins:c=[{bin:[0,10],count:200,filteredCount:150},{bin:[10,20],count:300,filteredCount:25},{bin:[20,30],count:72,filteredCount:12}]}=e,{title:d=""}=e,{width:f=400}=e,{height:u=125}=e,{countLabel:a="Count"}=e,{dimLabel:_=""}=e,{labelColor:w="hsla(0, 0%, 100%, 0.9)"}=e,{backgroundBarColor:m="hsla(0, 0%, 100%, 0.5)"}=e,{foregroundBarColor:l="hsla(172, 97%, 45%, 0.95)"}=e,{backgroundColor:T="hsl(240,23%,9%)"}=e,b,S=!1;function x(k){Mr.call(this,t,k)}function B(k){Mr.call(this,t,k)}function F(k){b=k,n(0,b)}return t.$$set=k=>{"bins"in k&&n(3,c=k.bins),"title"in k&&n(4,d=k.title),"width"in k&&n(5,f=k.width),"height"in k&&n(6,u=k.height),"countLabel"in k&&n(7,a=k.countLabel),"dimLabel"in k&&n(8,_=k.dimLabel),"labelColor"in k&&n(9,w=k.labelColor),"backgroundBarColor"in k&&n(10,m=k.backgroundBarColor),"foregroundBarColor"in k&&n(11,l=k.foregroundBarColor),"backgroundColor"in k&&n(12,T=k.backgroundColor)},t.$$.update=()=>{t.$$.dirty&8&&n(2,i={table:c}),t.$$.dirty&8176&&n(1,s={$schema:"https://vega.github.io/schema/vega-lite/v5.json",description:"A simple bar chart with embedded data.",data:{name:"table"},background:T,width:f,height:u,title:d,layer:[{params:[{name:"select",select:{type:"interval",encodings:["x"]}}],mark:{type:"bar",cursor:"col-resize"},encoding:{x:{field:"bin[0]",bin:{binned:!0}},x2:{field:"bin[1]"},y:{field:"count",type:"quantitative"},color:{value:m}}},{mark:{type:"bar"},encoding:{size:{legend:null},x:{field:"bin[0]",bin:{binned:!0},title:"",axis:{title:_,titleColor:w,labelColor:w}},x2:{field:"bin[1]"},y:{field:"filteredCount",type:"quantitative",title:"count",axis:{title:a,titleColor:w,tickCount:2,labelColor:w}},color:{value:l}}}]}),t.$$.dirty&8193&&b&&!S&&(b.addSignalListener("select",(...k)=>{var A;o("select",(A=k[1]["bin\\.0"])!=null?A:null)}),n(13,S=!0))},[b,s,i,c,d,f,u,a,_,w,m,l,T,S,x,B,F]}class LLe extends vu{constructor(e){super(),Tu(this,e,RLe,CLe,mu,{bins:3,title:4,width:5,height:6,countLabel:7,dimLabel:8,labelColor:9,backgroundBarColor:10,foregroundBarColor:11,backgroundColor:12})}}function PLe(t){let e,n;return e=new LLe({props:{bins:t[5],title:t[0],width:t[1],height:t[2],countLabel:t[3],dimLabel:t[4]}}),e.$on("select",t[7]),e.$on("mouseenter",t[8]),e.$on("mouseleave",t[9]),{c(){Hp(e.$$.fragment)},m(i,s){wu(e,i,s),n=!0},p(i,[s]){const o={};s&32&&(o.bins=i[5]),s&1&&(o.title=i[0]),s&2&&(o.width=i[1]),s&4&&(o.height=i[2]),s&8&&(o.countLabel=i[3]),s&16&&(o.dimLabel=i[4]),e.$set(o)},i(i){n||(vo(e.$$.fragment,i),n=!0)},o(i){Vc(e.$$.fragment,i),n=!1},d(i){bu(e,i)}}}function DLe(t){let e=[];if(t)for(let n=0;n<t.bin.length;n++)e.push({bin:[t.bin[n].binStart,t.bin[n].binEnd],count:t.total[n],filteredCount:t.filter[n]});return e}function jLe(t,e,n){let i,{state:s}=e,{title:o=""}=e,{width:c=400}=e,{height:d=125}=e,{countLabel:f="Count"}=e,{dimLabel:u=""}=e;function a(m){Mr.call(this,t,m)}function _(m){Mr.call(this,t,m)}function w(m){Mr.call(this,t,m)}return t.$$set=m=>{"state"in m&&n(6,s=m.state),"title"in m&&n(0,o=m.title),"width"in m&&n(1,c=m.width),"height"in m&&n(2,d=m.height),"countLabel"in m&&n(3,f=m.countLabel),"dimLabel"in m&&n(4,u=m.dimLabel)},t.$$.update=()=>{t.$$.dirty&64&&n(5,i=DLe(s))},[o,c,d,f,u,i,s,a,_,w]}class ULe extends vu{constructor(e){super(),Tu(this,e,jLe,PLe,mu,{state:6,title:0,width:1,height:2,countLabel:3,dimLabel:4})}}const zLe="/assets/logo.7c678901.png";function BU(t,e,n){const i=t.slice();i[9]=e[n],i[13]=n;const s=i[1][i[13]];i[10]=s;const o=i[9].dimension.type==="continuous"?ULe:NLe;return i[11]=o,i}function kU(t){let e,n;function i(...o){return t[3](t[9],...o)}function s(){return t[4](t[9])}return e=new t[11]({props:{state:t[10],dimLabel:t[9].dimension.name.replaceAll("_"," ")}}),e.$on("select",i),e.$on("mouseenter",s),{c(){Hp(e.$$.fragment)},m(o,c){wu(e,o,c),n=!0},p(o,c){t=o;const d={};c&2&&(d.state=t[10]),e.$set(d)},i(o){n||(vo(e.$$.fragment,o),n=!0)},o(o){Vc(e.$$.fragment,o),n=!1},d(o){bu(e,o)}}}function $Le(t){var F;let e,n,i,s,o,c,d,f,u,a,_,w=((F=t[0])==null?void 0:F.filter.toLocaleString())+"",m,l,T,b,S=t[2],x=[];for(let k=0;k<S.length;k+=1)x[k]=kU(BU(t,S,k));const B=k=>Vc(x[k],1,1,()=>{x[k]=null});return{c(){e=ta("main"),n=ta("div"),i=ta("img"),o=cb(),c=ta("h1"),c.textContent="Movies",d=cb(),f=ta("h3"),u=ta("span"),u.textContent="selected",a=cb(),_=ta("code"),m=OU(w),l=cb(),T=ta("div");for(let k=0;k<x.length;k+=1)x[k].c();EQ(i.src,s=zLe)||uh(i,"src",s),uh(i,"alt","falcon"),uh(i,"width","50px"),lL(u,"font-weight","250"),lL(_,"color","var(--primary-color)"),uh(_,"class","svelte-x0xhe2")},m(k,A){b1(k,e,A),gr(e,n),gr(n,i),gr(n,o),gr(n,c),gr(n,d),gr(n,f),gr(f,u),gr(f,a),gr(f,_),gr(_,m),gr(e,l),gr(e,T);for(let M=0;M<x.length;M+=1)x[M].m(T,null);b=!0},p(k,[A]){var M;if((!b||A&1)&&w!==(w=((M=k[0])==null?void 0:M.filter.toLocaleString())+"")&&kQ(m,w),A&6){S=k[2];let R;for(R=0;R<S.length;R+=1){const P=BU(k,S,R);x[R]?(x[R].p(P,A),vo(x[R],1)):(x[R]=kU(P),x[R].c(),vo(x[R],1),x[R].m(T,null))}for(CQ(),R=S.length;R<x.length;R+=1)B(R);RQ()}},i(k){if(!b){for(let A=0;A<S.length;A+=1)vo(x[A]);b=!0}},o(k){x=x.filter(Boolean);for(let A=0;A<x.length;A+=1)Vc(x[A]);b=!1},d(k){k&&Ly(e),xQ(x,k)}}}function qLe(t,e,n){let i,s,o,c=[],d=[];FQ(async()=>{await u()});async function f(w){const l=await(await fetch(w)).arrayBuffer();return F9(l)}async function u(){const w=await f("data/movies-3k.arrow"),m=new gae(w);i=new tde(m),console.log(w.schema.fields.map(l=>l.name)),s=i.view0D(),s.onChange(l=>{n(0,o=l)}),c.push(i.view1D({type:"categorical",name:"MPAA_Rating"})),c.push(i.view1D({type:"continuous",name:"US_Gross",bins:25,resolution:400})),c.push(i.view1D({type:"continuous",name:"Worldwide_Gross",bins:25,resolution:400})),c.push(i.view1D({type:"continuous",name:"Production_Budget",bins:25,resolution:400})),c.push(i.view1D({type:"categorical",name:"Distributor",range:["Warner Bros.","Sony Pictures","Paramount Pictures","Universal","Walt Disney Pictures","20th Century Fox","MGM","Miramax","New Line","Lionsgate","Sony Pictures Classics","Fox Searchlight","Dreamworks SKG","Focus Features","Weinstein Co."]})),c.push(i.view1D({type:"continuous",name:"IMDB_Rating",bins:25,resolution:400})),c.push(i.view1D({type:"continuous",name:"Rotten_Tomatoes_Rating",bins:25,resolution:400})),c.push(i.view1D({type:"categorical",name:"Major_Genre"})),c.push(i.view1D({type:"continuous",name:"Running_Time_min",bins:25,resolution:400})),n(1,d=new Array(c.length)),c.forEach((l,T)=>{l.onChange(b=>{n(1,d[T]=b,d)})}),await i.fetchInitialViewCounts()}return[o,d,c,(w,m)=>{const l=m.detail;l!==null?w.add(l):w.add()},async w=>{await w.prefetch()}]}class GLe extends vu{constructor(e){super(),Tu(this,e,qLe,$Le,mu,{})}}new GLe({target:document.getElementById("app")})});export default VLe();
