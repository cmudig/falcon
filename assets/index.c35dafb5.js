var DQ=Object.defineProperty;var jQ=(t,e,n)=>e in t?DQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var UQ=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Vn=(t,e,n)=>(jQ(t,typeof e!="symbol"?e+"":e,n),n);var XPe=UQ((cDe,i3)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function Ch(){}function ZU(t){return t()}function FL(){return Object.create(null)}function xu(t){t.forEach(ZU)}function e8(t){return typeof t=="function"}function Bu(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let wb;function $Q(t,e){return wb||(wb=document.createElement("a")),wb.href=e,t===wb.href}function zQ(t){return Object.keys(t).length===0}function nr(t,e){t.appendChild(e)}function Yy(t,e,n){t.insertBefore(e,n||null)}function tg(t){t.parentNode&&t.parentNode.removeChild(t)}function qQ(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function Br(t){return document.createElement(t)}function t8(t){return document.createTextNode(t)}function o_(){return t8(" ")}function Z0(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function Ac(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function GQ(t){return Array.from(t.childNodes)}function VQ(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function OL(t,e,n,i){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}function WQ(t,e,{bubbles:n=!1,cancelable:i=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(t,n,i,e),s}let K_;function A_(t){K_=t}function UF(){if(!K_)throw new Error("Function called outside component initialization");return K_}function HQ(t){UF().$$.on_mount.push(t)}function YQ(t){UF().$$.on_destroy.push(t)}function $F(){const t=UF();return(e,n,{cancelable:i=!1}={})=>{const s=t.$$.callbacks[e];if(s){const o=WQ(e,n,{cancelable:i});return s.slice().forEach(c=>{c.call(t,o)}),!o.defaultPrevented}return!0}}function Dr(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(i=>i.call(this,e))}const _h=[],ip=[],_0=[],JB=[],XQ=Promise.resolve();let QB=!1;function KQ(){QB||(QB=!0,XQ.then(n8))}function ZB(t){_0.push(t)}function zF(t){JB.push(t)}const rx=new Set;let Zu=0;function n8(){if(Zu!==0)return;const t=K_;do{try{for(;Zu<_h.length;){const e=_h[Zu];Zu++,A_(e),JQ(e.$$)}}catch(e){throw _h.length=0,Zu=0,e}for(A_(null),_h.length=0,Zu=0;ip.length;)ip.pop()();for(let e=0;e<_0.length;e+=1){const n=_0[e];rx.has(n)||(rx.add(n),n())}_0.length=0}while(_h.length);for(;JB.length;)JB.pop()();QB=!1,rx.clear(),A_(t)}function JQ(t){if(t.fragment!==null){t.update(),xu(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ZB)}}const y0=new Set;let Tf;function QQ(){Tf={r:0,c:[],p:Tf}}function ZQ(){Tf.r||xu(Tf.c),Tf=Tf.p}function ko(t,e){t&&t.i&&(y0.delete(t),t.i(e))}function ed(t,e,n,i){if(t&&t.o){if(y0.has(t))return;y0.add(t),Tf.c.push(()=>{y0.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}function qF(t,e,n){const i=t.$$.props[e];i!==void 0&&(t.$$.bound[i]=n,n(t.$$.ctx[i]))}function ng(t){t&&t.c()}function ku(t,e,n,i){const{fragment:s,after_update:o}=t.$$;s&&s.m(e,n),i||ZB(()=>{const c=t.$$.on_mount.map(ZU).filter(e8);t.$$.on_destroy?t.$$.on_destroy.push(...c):xu(c),t.$$.on_mount=[]}),o.forEach(ZB)}function Iu(t,e){const n=t.$$;n.fragment!==null&&(xu(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function eZ(t,e){t.$$.dirty[0]===-1&&(_h.push(t),KQ(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Fu(t,e,n,i,s,o,c,d=[-1]){const f=K_;A_(t);const u=t.$$={fragment:null,ctx:[],props:o,update:Ch,not_equal:s,bound:FL(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:FL(),dirty:d,skip_bound:!1,root:e.target||f.$$.root};c&&c(u.root);let a=!1;if(u.ctx=n?n(t,e.props||{},(_,w,...m)=>{const l=m.length?m[0]:w;return u.ctx&&s(u.ctx[_],u.ctx[_]=l)&&(!u.skip_bound&&u.bound[_]&&u.bound[_](l),a&&eZ(t,_)),w}):[],u.update(),a=!0,xu(u.before_update),u.fragment=i?i(u.ctx):!1,e.target){if(e.hydrate){const _=GQ(e.target);u.fragment&&u.fragment.l(_),_.forEach(tg)}else u.fragment&&u.fragment.c();e.intro&&ko(t.$$.fragment),ku(t,e.target,e.anchor,e.customElement),n8()}A_(f)}class Ou{$destroy(){Iu(this,1),this.$destroy=Ch}$on(e,n){if(!e8(n))return Ch;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}$set(e){this.$$set&&!zQ(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function tZ(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}function ye(t,e,n,i){function s(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function d(a){try{u(i.next(a))}catch(_){c(_)}}function f(a){try{u(i.throw(a))}catch(_){c(_)}}function u(a){a.done?o(a.value):s(a.value).then(d,f)}u((i=i.apply(t,e||[])).next())})}function ML(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Be(t){return this instanceof Be?(this.v=t,this):new Be(t)}function Pn(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),s,o=[];return s={},c("next"),c("throw"),c("return"),s[Symbol.asyncIterator]=function(){return this},s;function c(w){i[w]&&(s[w]=function(m){return new Promise(function(l,T){o.push([w,m,l,T])>1||d(w,m)})})}function d(w,m){try{f(i[w](m))}catch(l){_(o[0][3],l)}}function f(w){w.value instanceof Be?Promise.resolve(w.value.v).then(u,a):_(o[0][2],w)}function u(w){d("next",w)}function a(w){d("throw",w)}function _(w,m){w(m),o.shift(),o.length&&d(o[0][0],o[0][1])}}function qc(t){var e,n;return e={},i("next"),i("throw",function(s){throw s}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(s,o){e[s]=t[s]?function(c){return(n=!n)?{value:Be(t[s](c)),done:!1}:o?o(c):c}:o}}function us(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof ML=="function"?ML(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=t[o]&&function(c){return new Promise(function(d,f){c=t[o](c),s(d,f,c.done,c.value)})}}function s(o,c,d,f){Promise.resolve(f).then(function(u){o({value:u,done:d})},c)}}const nZ=new TextDecoder("utf-8"),ek=t=>nZ.decode(t),iZ=new TextEncoder,F1=t=>iZ.encode(t),[eDe,i8]=(()=>{const t=()=>{throw new Error("BigInt is not available in this environment")};function e(){throw t()}return e.asIntN=()=>{throw t()},e.asUintN=()=>{throw t()},typeof BigInt<"u"?[BigInt,!0]:[e,!1]})(),[GF,tDe]=(()=>{const t=()=>{throw new Error("BigInt64Array is not available in this environment")};class e{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}}return typeof BigInt64Array<"u"?[BigInt64Array,!0]:[e,!1]})(),[O1,nDe]=(()=>{const t=()=>{throw new Error("BigUint64Array is not available in this environment")};class e{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}}return typeof BigUint64Array<"u"?[BigUint64Array,!0]:[e,!1]})(),sZ=t=>typeof t=="number",s8=t=>typeof t=="boolean",Yn=t=>typeof t=="function",js=t=>t!=null&&Object(t)===t,td=t=>js(t)&&Yn(t.then),ig=t=>js(t)&&Yn(t[Symbol.iterator]),Mu=t=>js(t)&&Yn(t[Symbol.asyncIterator]),tk=t=>js(t)&&js(t.schema),r8=t=>js(t)&&"done"in t&&"value"in t,a8=t=>js(t)&&Yn(t.stat)&&sZ(t.fd),o8=t=>js(t)&&VF(t.body),M1=t=>"_getDOMStream"in t&&"_getNodeStream"in t,rZ=t=>js(t)&&Yn(t.abort)&&Yn(t.getWriter)&&!M1(t),VF=t=>js(t)&&Yn(t.cancel)&&Yn(t.getReader)&&!M1(t),aZ=t=>js(t)&&Yn(t.end)&&Yn(t.write)&&s8(t.writable)&&!M1(t),l8=t=>js(t)&&Yn(t.read)&&Yn(t.pipe)&&s8(t.readable)&&!M1(t),oZ=t=>js(t)&&Yn(t.clear)&&Yn(t.bytes)&&Yn(t.position)&&Yn(t.setPosition)&&Yn(t.capacity)&&Yn(t.getBufferIdentifier)&&Yn(t.createLong),WF=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function lZ(t){const e=t[0]?[t[0]]:[];let n,i,s,o;for(let c,d,f=0,u=0,a=t.length;++f<a;){if(c=e[u],d=t[f],!c||!d||c.buffer!==d.buffer||d.byteOffset<c.byteOffset){d&&(e[++u]=d);continue}if({byteOffset:n,byteLength:s}=c,{byteOffset:i,byteLength:o}=d,n+s<i||i+o<n){d&&(e[++u]=d);continue}e[u]=new Uint8Array(c.buffer,n,i-n+o)}return e}function J_(t,e,n=0,i=e.byteLength){const s=t.byteLength,o=new Uint8Array(t.buffer,t.byteOffset,s),c=new Uint8Array(e.buffer,e.byteOffset,Math.min(i,s));return o.set(c,n),t}function Ca(t,e){const n=lZ(t),i=n.reduce((a,_)=>a+_.byteLength,0);let s,o,c,d=0,f=-1;const u=Math.min(e||Number.POSITIVE_INFINITY,i);for(const a=n.length;++f<a;){if(s=n[f],o=s.subarray(0,Math.min(s.length,u-d)),u<=d+o.length){o.length<s.length?n[f]=s.subarray(o.length):o.length===s.length&&f++,c?J_(c,o,d):c=o;break}J_(c||(c=new Uint8Array(u)),o,d),d+=o.length}return[c||new Uint8Array(0),n.slice(f),i-(c?c.byteLength:0)]}function Ot(t,e){let n=r8(e)?e.value:e;return n instanceof t?t===Uint8Array?new t(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=F1(n)),n instanceof ArrayBuffer?new t(n):n instanceof WF?new t(n):oZ(n)?Ot(t,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new t(0):new t(n.buffer,n.byteOffset,n.byteLength/t.BYTES_PER_ELEMENT):t.from(n)):new t(0)}const cZ=t=>Ot(Int8Array,t),dZ=t=>Ot(Int16Array,t),yh=t=>Ot(Int32Array,t),fZ=t=>Ot(GF,t),Nt=t=>Ot(Uint8Array,t),uZ=t=>Ot(Uint16Array,t),hZ=t=>Ot(Uint32Array,t),pZ=t=>Ot(O1,t),gZ=t=>Ot(Float32Array,t),_Z=t=>Ot(Float64Array,t),yZ=t=>Ot(Uint8ClampedArray,t),nk=t=>(t.next(),t);function*Zo(t,e){const n=function*(s){yield s},i=typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof WF?n(e):ig(e)?e:n(e);return yield*nk(function*(s){let o=null;do o=s.next(yield Ot(t,o));while(!o.done)}(i[Symbol.iterator]())),new t}const mZ=t=>Zo(Int8Array,t),wZ=t=>Zo(Int16Array,t),bZ=t=>Zo(Int32Array,t),c8=t=>Zo(Uint8Array,t),TZ=t=>Zo(Uint16Array,t),vZ=t=>Zo(Uint32Array,t),EZ=t=>Zo(Float32Array,t),SZ=t=>Zo(Float64Array,t),xZ=t=>Zo(Uint8ClampedArray,t);function ja(t,e){return Pn(this,arguments,function*(){if(td(e))return yield Be(yield Be(yield*qc(us(ja(t,yield Be(e))))));const i=function(c){return Pn(this,arguments,function*(){yield yield Be(yield Be(c))})},s=function(c){return Pn(this,arguments,function*(){yield Be(yield*qc(us(nk(function*(d){let f=null;do f=d.next(yield f==null?void 0:f.value);while(!f.done)}(c[Symbol.iterator]())))))})},o=typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof WF?i(e):ig(e)?s(e):Mu(e)?e:i(e);return yield Be(yield*qc(us(nk(function(c){return Pn(this,arguments,function*(){let d=null;do d=yield Be(c.next(yield yield Be(Ot(t,d))));while(!d.done)})}(o[Symbol.asyncIterator]()))))),yield Be(new t)})}const BZ=t=>ja(Int8Array,t),kZ=t=>ja(Int16Array,t),IZ=t=>ja(Int32Array,t),d8=t=>ja(Uint8Array,t),FZ=t=>ja(Uint16Array,t),OZ=t=>ja(Uint32Array,t),MZ=t=>ja(Float32Array,t),AZ=t=>ja(Float64Array,t),NZ=t=>ja(Uint8ClampedArray,t);function A1(t,e,n){if(t!==0){n=n.slice(0,e+1);for(let i=-1;++i<=e;)n[i]+=t}return n}function f8(t,e){let n=0;const i=t.length;if(i!==e.length)return!1;if(i>0)do if(t[n]!==e[n])return!1;while(++n<i);return!0}const CZ=Object.freeze(Object.defineProperty({__proto__:null,memcpy:J_,joinUint8Arrays:Ca,toArrayBufferView:Ot,toInt8Array:cZ,toInt16Array:dZ,toInt32Array:yh,toBigInt64Array:fZ,toUint8Array:Nt,toUint16Array:uZ,toUint32Array:hZ,toBigUint64Array:pZ,toFloat32Array:gZ,toFloat64Array:_Z,toUint8ClampedArray:yZ,toArrayBufferViewIterator:Zo,toInt8ArrayIterator:mZ,toInt16ArrayIterator:wZ,toInt32ArrayIterator:bZ,toUint8ArrayIterator:c8,toUint16ArrayIterator:TZ,toUint32ArrayIterator:vZ,toFloat32ArrayIterator:EZ,toFloat64ArrayIterator:SZ,toUint8ClampedArrayIterator:xZ,toArrayBufferViewAsyncIterator:ja,toInt8ArrayAsyncIterator:BZ,toInt16ArrayAsyncIterator:kZ,toInt32ArrayAsyncIterator:IZ,toUint8ArrayAsyncIterator:d8,toUint16ArrayAsyncIterator:FZ,toUint32ArrayAsyncIterator:OZ,toFloat32ArrayAsyncIterator:MZ,toFloat64ArrayAsyncIterator:AZ,toUint8ClampedArrayAsyncIterator:NZ,rebaseValueOffsets:A1,compareArrayLike:f8},Symbol.toStringTag,{value:"Module"})),or={fromIterable(t){return bb(RZ(t))},fromAsyncIterable(t){return bb(LZ(t))},fromDOMStream(t){return bb(PZ(t))},fromNodeStream(t){return bb(jZ(t))},toDOMStream(t,e){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(t,e){throw new Error('"toNodeStream" not available in this environment')}},bb=t=>(t.next(),t);function*RZ(t){let e,n=!1,i=[],s,o,c,d=0;function f(){return o==="peek"?Ca(i,c)[0]:([s,i,d]=Ca(i,c),s)}({cmd:o,size:c}=yield null);const u=c8(t)[Symbol.iterator]();try{do if({done:e,value:s}=Number.isNaN(c-d)?u.next():u.next(c-d),!e&&s.byteLength>0&&(i.push(s),d+=s.byteLength),e||c<=d)do({cmd:o,size:c}=yield f());while(c<d);while(!e)}catch(a){(n=!0)&&typeof u.throw=="function"&&u.throw(a)}finally{n===!1&&typeof u.return=="function"&&u.return(null)}return null}function LZ(t){return Pn(this,arguments,function*(){let n,i=!1,s=[],o,c,d,f=0;function u(){return c==="peek"?Ca(s,d)[0]:([o,s,f]=Ca(s,d),o)}({cmd:c,size:d}=yield yield Be(null));const a=d8(t)[Symbol.asyncIterator]();try{do if({done:n,value:o}=Number.isNaN(d-f)?yield Be(a.next()):yield Be(a.next(d-f)),!n&&o.byteLength>0&&(s.push(o),f+=o.byteLength),n||d<=f)do({cmd:c,size:d}=yield yield Be(u()));while(d<f);while(!n)}catch(_){(i=!0)&&typeof a.throw=="function"&&(yield Be(a.throw(_)))}finally{i===!1&&typeof a.return=="function"&&(yield Be(a.return(new Uint8Array(0))))}return yield Be(null)})}function PZ(t){return Pn(this,arguments,function*(){let n=!1,i=!1,s=[],o,c,d,f=0;function u(){return c==="peek"?Ca(s,d)[0]:([o,s,f]=Ca(s,d),o)}({cmd:c,size:d}=yield yield Be(null));const a=new DZ(t);try{do if({done:n,value:o}=Number.isNaN(d-f)?yield Be(a.read()):yield Be(a.read(d-f)),!n&&o.byteLength>0&&(s.push(Nt(o)),f+=o.byteLength),n||d<=f)do({cmd:c,size:d}=yield yield Be(u()));while(d<f);while(!n)}catch(_){(i=!0)&&(yield Be(a.cancel(_)))}finally{i===!1?yield Be(a.cancel()):t.locked&&a.releaseLock()}return yield Be(null)})}class DZ{constructor(e){this.source=e,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(e){return ye(this,void 0,void 0,function*(){const{reader:n,source:i}=this;n&&(yield n.cancel(e).catch(()=>{})),i&&i.locked&&this.releaseLock()})}read(e){return ye(this,void 0,void 0,function*(){if(e===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Nt(n)),n})}}const ax=(t,e)=>{const n=s=>i([e,s]);let i;return[e,n,new Promise(s=>(i=s)&&t.once(e,n))]};function jZ(t){return Pn(this,arguments,function*(){const n=[];let i="error",s=!1,o=null,c,d,f=0,u=[],a;function _(){return c==="peek"?Ca(u,d)[0]:([a,u,f]=Ca(u,d),a)}if({cmd:c,size:d}=yield yield Be(null),t.isTTY)return yield yield Be(new Uint8Array(0)),yield Be(null);try{n[0]=ax(t,"end"),n[1]=ax(t,"error");do{if(n[2]=ax(t,"readable"),[i,o]=yield Be(Promise.race(n.map(m=>m[2]))),i==="error")break;if((s=i==="end")||(Number.isFinite(d-f)?(a=Nt(t.read(d-f)),a.byteLength<d-f&&(a=Nt(t.read()))):a=Nt(t.read()),a.byteLength>0&&(u.push(a),f+=a.byteLength)),s||d<=f)do({cmd:c,size:d}=yield yield Be(_()));while(d<f)}while(!s)}finally{yield Be(w(n,i==="error"?o:null))}return yield Be(null);function w(m,l){return a=u=null,new Promise((T,b)=>{for(const[S,x]of m)t.off(S,x);try{const S=t.destroy;S&&S.call(t,l),l=void 0}catch(S){l=S||l}finally{l!=null?b(l):T()}})}})}var Os;(function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"})(Os||(Os={}));var mi;(function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"})(mi||(mi={}));var ii;(function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"})(ii||(ii={}));var Us;(function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"})(Us||(Us={}));var dt;(function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"})(dt||(dt={}));var qr;(function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(qr||(qr={}));var en;(function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"})(en||(en={}));var ne;(function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth"})(ne||(ne={}));var fa;(function(t){t[t.OFFSET=0]="OFFSET",t[t.DATA=1]="DATA",t[t.VALIDITY=2]="VALIDITY",t[t.TYPE=3]="TYPE"})(fa||(fa={}));const UZ=void 0;function Gc(t){if(t===null)return"null";if(t===UZ)return"undefined";switch(typeof t){case"number":return`${t}`;case"bigint":return`${t}`;case"string":return`"${t}"`}return typeof t[Symbol.toPrimitive]=="function"?t[Symbol.toPrimitive]("string"):ArrayBuffer.isView(t)?t instanceof BigInt64Array||t instanceof BigUint64Array?`[${[...t].map(e=>Gc(e))}]`:`[${t}]`:ArrayBuffer.isView(t)?`[${t}]`:JSON.stringify(t,(e,n)=>typeof n=="bigint"?`${n}`:n)}const u8=Symbol.for("isArrowBigNum");function Ua(t,...e){return e.length===0?Object.setPrototypeOf(Ot(this.TypedArray,t),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(t,...e),this.constructor.prototype)}Ua.prototype[u8]=!0;Ua.prototype.toJSON=function(){return`"${Vc(this)}"`};Ua.prototype.valueOf=function(){return h8(this)};Ua.prototype.toString=function(){return Vc(this)};Ua.prototype[Symbol.toPrimitive]=function(t="default"){switch(t){case"number":return h8(this);case"string":return Vc(this);case"default":return eT(this)}return Vc(this)};function Rh(...t){return Ua.apply(this,t)}function Lh(...t){return Ua.apply(this,t)}function Q_(...t){return Ua.apply(this,t)}Object.setPrototypeOf(Rh.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Lh.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(Q_.prototype,Object.create(Uint32Array.prototype));Object.assign(Rh.prototype,Ua.prototype,{constructor:Rh,signed:!0,TypedArray:Int32Array,BigIntArray:GF});Object.assign(Lh.prototype,Ua.prototype,{constructor:Lh,signed:!1,TypedArray:Uint32Array,BigIntArray:O1});Object.assign(Q_.prototype,Ua.prototype,{constructor:Q_,signed:!0,TypedArray:Uint32Array,BigIntArray:O1});function h8(t){const{buffer:e,byteOffset:n,length:i,signed:s}=t,o=new O1(e,n,i),c=s&&o[o.length-1]&BigInt(1)<<BigInt(63);let d=BigInt(c?1:0),f=BigInt(0);if(c){for(const u of o)d+=~u*(BigInt(1)<<BigInt(32)*f++);d*=BigInt(-1)}else for(const u of o)d+=u*(BigInt(1)<<BigInt(32)*f++);return d}let Vc,eT;i8?(eT=t=>t.byteLength===8?new t.BigIntArray(t.buffer,t.byteOffset,1)[0]:ox(t),Vc=t=>t.byteLength===8?`${new t.BigIntArray(t.buffer,t.byteOffset,1)[0]}`:ox(t)):(Vc=ox,eT=Vc);function ox(t){let e="";const n=new Uint32Array(2);let i=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2);const s=new Uint32Array((i=new Uint16Array(i).reverse()).buffer);let o=-1;const c=i.length-1;do{for(n[0]=i[o=0];o<c;)i[o++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+i[o];i[o]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,e=`${n[0]}${e}`}while(s[0]||s[1]||s[2]||s[3]);return e!=null?e:"0"}class Xy{static new(e,n){switch(n){case!0:return new Rh(e);case!1:return new Lh(e)}switch(e.constructor){case Int8Array:case Int16Array:case Int32Array:case GF:return new Rh(e)}return e.byteLength===16?new Q_(e):new Lh(e)}static signed(e){return new Rh(e)}static unsigned(e){return new Lh(e)}static decimal(e){return new Q_(e)}constructor(e,n){return Xy.new(e,n)}}const $Z=Object.freeze(Object.defineProperty({__proto__:null,isArrowBigNumSymbol:u8,get bignumToString(){return Vc},get bignumToBigInt(){return eT},BN:Xy},Symbol.toStringTag,{value:"Module"}));var p8,g8,_8,y8,m8,w8,b8,T8,v8,E8,S8,x8,B8,k8,I8,F8,O8,M8,A8;class Ye{static isNull(e){return(e==null?void 0:e.typeId)===ne.Null}static isInt(e){return(e==null?void 0:e.typeId)===ne.Int}static isFloat(e){return(e==null?void 0:e.typeId)===ne.Float}static isBinary(e){return(e==null?void 0:e.typeId)===ne.Binary}static isUtf8(e){return(e==null?void 0:e.typeId)===ne.Utf8}static isBool(e){return(e==null?void 0:e.typeId)===ne.Bool}static isDecimal(e){return(e==null?void 0:e.typeId)===ne.Decimal}static isDate(e){return(e==null?void 0:e.typeId)===ne.Date}static isTime(e){return(e==null?void 0:e.typeId)===ne.Time}static isTimestamp(e){return(e==null?void 0:e.typeId)===ne.Timestamp}static isInterval(e){return(e==null?void 0:e.typeId)===ne.Interval}static isList(e){return(e==null?void 0:e.typeId)===ne.List}static isStruct(e){return(e==null?void 0:e.typeId)===ne.Struct}static isUnion(e){return(e==null?void 0:e.typeId)===ne.Union}static isFixedSizeBinary(e){return(e==null?void 0:e.typeId)===ne.FixedSizeBinary}static isFixedSizeList(e){return(e==null?void 0:e.typeId)===ne.FixedSizeList}static isMap(e){return(e==null?void 0:e.typeId)===ne.Map}static isDictionary(e){return(e==null?void 0:e.typeId)===ne.Dictionary}static isDenseUnion(e){return Ye.isUnion(e)&&e.mode===mi.Dense}static isSparseUnion(e){return Ye.isUnion(e)&&e.mode===mi.Sparse}get typeId(){return ne.NONE}}p8=Symbol.toStringTag;Ye[p8]=(t=>(t.children=null,t.ArrayType=Array,t[Symbol.toStringTag]="DataType"))(Ye.prototype);class Co extends Ye{toString(){return"Null"}get typeId(){return ne.Null}}g8=Symbol.toStringTag;Co[g8]=(t=>t[Symbol.toStringTag]="Null")(Co.prototype);class Yi extends Ye{constructor(e,n){super(),this.isSigned=e,this.bitWidth=n}get typeId(){return ne.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}_8=Symbol.toStringTag;Yi[_8]=(t=>(t.isSigned=null,t.bitWidth=null,t[Symbol.toStringTag]="Int"))(Yi.prototype);class HF extends Yi{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class YF extends Yi{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class nd extends Yi{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class N1 extends Yi{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class XF extends Yi{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class KF extends Yi{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class JF extends Yi{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class QF extends Yi{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(HF.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(YF.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(nd.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(N1.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(XF.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(KF.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(JF.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(QF.prototype,"ArrayType",{value:BigUint64Array});class Wl extends Ye{constructor(e){super(),this.precision=e}get typeId(){return ne.Float}get ArrayType(){switch(this.precision){case ii.HALF:return Uint16Array;case ii.SINGLE:return Float32Array;case ii.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}y8=Symbol.toStringTag;Wl[y8]=(t=>(t.precision=null,t[Symbol.toStringTag]="Float"))(Wl.prototype);class N8 extends Wl{constructor(){super(ii.HALF)}}class ZF extends Wl{constructor(){super(ii.SINGLE)}}class C1 extends Wl{constructor(){super(ii.DOUBLE)}}Object.defineProperty(N8.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(ZF.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(C1.prototype,"ArrayType",{value:Float64Array});class Z_ extends Ye{constructor(){super()}get typeId(){return ne.Binary}toString(){return"Binary"}}m8=Symbol.toStringTag;Z_[m8]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Binary"))(Z_.prototype);class sp extends Ye{constructor(){super()}get typeId(){return ne.Utf8}toString(){return"Utf8"}}w8=Symbol.toStringTag;sp[w8]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Utf8"))(sp.prototype);class rp extends Ye{constructor(){super()}get typeId(){return ne.Bool}toString(){return"Bool"}}b8=Symbol.toStringTag;rp[b8]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Bool"))(rp.prototype);class ey extends Ye{constructor(e,n,i=128){super(),this.scale=e,this.precision=n,this.bitWidth=i}get typeId(){return ne.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}T8=Symbol.toStringTag;ey[T8]=(t=>(t.scale=null,t.precision=null,t.ArrayType=Uint32Array,t[Symbol.toStringTag]="Decimal"))(ey.prototype);class Kf extends Ye{constructor(e){super(),this.unit=e}get typeId(){return ne.Date}toString(){return`Date${(this.unit+1)*32}<${Us[this.unit]}>`}}v8=Symbol.toStringTag;Kf[v8]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Date"))(Kf.prototype);class zZ extends Kf{constructor(){super(Us.DAY)}}class C8 extends Kf{constructor(){super(Us.MILLISECOND)}}class Ro extends Ye{constructor(e,n){super(),this.unit=e,this.bitWidth=n}get typeId(){return ne.Time}toString(){return`Time${this.bitWidth}<${dt[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}E8=Symbol.toStringTag;Ro[E8]=(t=>(t.unit=null,t.bitWidth=null,t[Symbol.toStringTag]="Time"))(Ro.prototype);class qZ extends Ro{constructor(){super(dt.SECOND,32)}}class GZ extends Ro{constructor(){super(dt.MILLISECOND,32)}}class VZ extends Ro{constructor(){super(dt.MICROSECOND,64)}}class WZ extends Ro{constructor(){super(dt.NANOSECOND,64)}}class Hl extends Ye{constructor(e,n){super(),this.unit=e,this.timezone=n}get typeId(){return ne.Timestamp}toString(){return`Timestamp<${dt[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}S8=Symbol.toStringTag;Hl[S8]=(t=>(t.unit=null,t.timezone=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Timestamp"))(Hl.prototype);class HZ extends Hl{constructor(e){super(dt.SECOND,e)}}class YZ extends Hl{constructor(e){super(dt.MILLISECOND,e)}}class XZ extends Hl{constructor(e){super(dt.MICROSECOND,e)}}class KZ extends Hl{constructor(e){super(dt.NANOSECOND,e)}}class Jf extends Ye{constructor(e){super(),this.unit=e}get typeId(){return ne.Interval}toString(){return`Interval<${qr[this.unit]}>`}}x8=Symbol.toStringTag;Jf[x8]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Interval"))(Jf.prototype);class JZ extends Jf{constructor(){super(qr.DAY_TIME)}}class QZ extends Jf{constructor(){super(qr.YEAR_MONTH)}}class Qf extends Ye{constructor(e){super(),this.children=[e]}get typeId(){return ne.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}B8=Symbol.toStringTag;Qf[B8]=(t=>(t.children=null,t[Symbol.toStringTag]="List"))(Qf.prototype);class fi extends Ye{constructor(e){super(),this.children=e}get typeId(){return ne.Struct}toString(){return`Struct<{${this.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}k8=Symbol.toStringTag;fi[k8]=(t=>(t.children=null,t[Symbol.toStringTag]="Struct"))(fi.prototype);class id extends Ye{constructor(e,n,i){super(),this.mode=e,this.children=i,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((s,o,c)=>(s[o]=c)&&s||s,Object.create(null))}get typeId(){return ne.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(e=>`${e.type}`).join(" | ")}>`}}I8=Symbol.toStringTag;id[I8]=(t=>(t.mode=null,t.typeIds=null,t.children=null,t.typeIdToChildIndex=null,t.ArrayType=Int8Array,t[Symbol.toStringTag]="Union"))(id.prototype);class ZZ extends id{constructor(e,n){super(mi.Dense,e,n)}}class eee extends id{constructor(e,n){super(mi.Sparse,e,n)}}class ty extends Ye{constructor(e){super(),this.byteWidth=e}get typeId(){return ne.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}F8=Symbol.toStringTag;ty[F8]=(t=>(t.byteWidth=null,t.ArrayType=Uint8Array,t[Symbol.toStringTag]="FixedSizeBinary"))(ty.prototype);class ap extends Ye{constructor(e,n){super(),this.listSize=e,this.children=[n]}get typeId(){return ne.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}O8=Symbol.toStringTag;ap[O8]=(t=>(t.children=null,t.listSize=null,t[Symbol.toStringTag]="FixedSizeList"))(ap.prototype);class op extends Ye{constructor(e,n=!1){super(),this.children=[e],this.keysSorted=n}get typeId(){return ne.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}M8=Symbol.toStringTag;op[M8]=(t=>(t.children=null,t.keysSorted=null,t[Symbol.toStringTag]="Map_"))(op.prototype);const tee=(t=>()=>++t)(-1);class Yl extends Ye{constructor(e,n,i,s){super(),this.indices=n,this.dictionary=e,this.isOrdered=s||!1,this.id=i==null?tee():typeof i=="number"?i:i.low}get typeId(){return ne.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}A8=Symbol.toStringTag;Yl[A8]=(t=>(t.id=null,t.indices=null,t.isOrdered=null,t.dictionary=null,t[Symbol.toStringTag]="Dictionary"))(Yl.prototype);function Qa(t){const e=t;switch(t.typeId){case ne.Decimal:return t.bitWidth/32;case ne.Timestamp:return 2;case ne.Date:return 1+e.unit;case ne.Interval:return 1+e.unit;case ne.FixedSizeList:return e.listSize;case ne.FixedSizeBinary:return e.byteWidth;default:return 1}}class It{visitMany(e,...n){return e.map((i,s)=>this.visit(i,...n.map(o=>o[s])))}visit(...e){return this.getVisitFn(e[0],!1).apply(this,e)}getVisitFn(e,n=!0){return nee(this,e,n)}getVisitFnByTypeId(e,n=!0){return mh(this,e,n)}visitNull(e,...n){return null}visitBool(e,...n){return null}visitInt(e,...n){return null}visitFloat(e,...n){return null}visitUtf8(e,...n){return null}visitBinary(e,...n){return null}visitFixedSizeBinary(e,...n){return null}visitDate(e,...n){return null}visitTimestamp(e,...n){return null}visitTime(e,...n){return null}visitDecimal(e,...n){return null}visitList(e,...n){return null}visitStruct(e,...n){return null}visitUnion(e,...n){return null}visitDictionary(e,...n){return null}visitInterval(e,...n){return null}visitFixedSizeList(e,...n){return null}visitMap(e,...n){return null}}function nee(t,e,n=!0){return typeof e=="number"?mh(t,e,n):typeof e=="string"&&e in ne?mh(t,ne[e],n):e&&e instanceof Ye?mh(t,AL(e),n):(e==null?void 0:e.type)&&e.type instanceof Ye?mh(t,AL(e.type),n):mh(t,ne.NONE,n)}function mh(t,e,n=!0){let i=null;switch(e){case ne.Null:i=t.visitNull;break;case ne.Bool:i=t.visitBool;break;case ne.Int:i=t.visitInt;break;case ne.Int8:i=t.visitInt8||t.visitInt;break;case ne.Int16:i=t.visitInt16||t.visitInt;break;case ne.Int32:i=t.visitInt32||t.visitInt;break;case ne.Int64:i=t.visitInt64||t.visitInt;break;case ne.Uint8:i=t.visitUint8||t.visitInt;break;case ne.Uint16:i=t.visitUint16||t.visitInt;break;case ne.Uint32:i=t.visitUint32||t.visitInt;break;case ne.Uint64:i=t.visitUint64||t.visitInt;break;case ne.Float:i=t.visitFloat;break;case ne.Float16:i=t.visitFloat16||t.visitFloat;break;case ne.Float32:i=t.visitFloat32||t.visitFloat;break;case ne.Float64:i=t.visitFloat64||t.visitFloat;break;case ne.Utf8:i=t.visitUtf8;break;case ne.Binary:i=t.visitBinary;break;case ne.FixedSizeBinary:i=t.visitFixedSizeBinary;break;case ne.Date:i=t.visitDate;break;case ne.DateDay:i=t.visitDateDay||t.visitDate;break;case ne.DateMillisecond:i=t.visitDateMillisecond||t.visitDate;break;case ne.Timestamp:i=t.visitTimestamp;break;case ne.TimestampSecond:i=t.visitTimestampSecond||t.visitTimestamp;break;case ne.TimestampMillisecond:i=t.visitTimestampMillisecond||t.visitTimestamp;break;case ne.TimestampMicrosecond:i=t.visitTimestampMicrosecond||t.visitTimestamp;break;case ne.TimestampNanosecond:i=t.visitTimestampNanosecond||t.visitTimestamp;break;case ne.Time:i=t.visitTime;break;case ne.TimeSecond:i=t.visitTimeSecond||t.visitTime;break;case ne.TimeMillisecond:i=t.visitTimeMillisecond||t.visitTime;break;case ne.TimeMicrosecond:i=t.visitTimeMicrosecond||t.visitTime;break;case ne.TimeNanosecond:i=t.visitTimeNanosecond||t.visitTime;break;case ne.Decimal:i=t.visitDecimal;break;case ne.List:i=t.visitList;break;case ne.Struct:i=t.visitStruct;break;case ne.Union:i=t.visitUnion;break;case ne.DenseUnion:i=t.visitDenseUnion||t.visitUnion;break;case ne.SparseUnion:i=t.visitSparseUnion||t.visitUnion;break;case ne.Dictionary:i=t.visitDictionary;break;case ne.Interval:i=t.visitInterval;break;case ne.IntervalDayTime:i=t.visitIntervalDayTime||t.visitInterval;break;case ne.IntervalYearMonth:i=t.visitIntervalYearMonth||t.visitInterval;break;case ne.FixedSizeList:i=t.visitFixedSizeList;break;case ne.Map:i=t.visitMap;break}if(typeof i=="function")return i;if(!n)return()=>null;throw new Error(`Unrecognized type '${ne[e]}'`)}function AL(t){switch(t.typeId){case ne.Null:return ne.Null;case ne.Int:{const{bitWidth:e,isSigned:n}=t;switch(e){case 8:return n?ne.Int8:ne.Uint8;case 16:return n?ne.Int16:ne.Uint16;case 32:return n?ne.Int32:ne.Uint32;case 64:return n?ne.Int64:ne.Uint64}return ne.Int}case ne.Float:switch(t.precision){case ii.HALF:return ne.Float16;case ii.SINGLE:return ne.Float32;case ii.DOUBLE:return ne.Float64}return ne.Float;case ne.Binary:return ne.Binary;case ne.Utf8:return ne.Utf8;case ne.Bool:return ne.Bool;case ne.Decimal:return ne.Decimal;case ne.Time:switch(t.unit){case dt.SECOND:return ne.TimeSecond;case dt.MILLISECOND:return ne.TimeMillisecond;case dt.MICROSECOND:return ne.TimeMicrosecond;case dt.NANOSECOND:return ne.TimeNanosecond}return ne.Time;case ne.Timestamp:switch(t.unit){case dt.SECOND:return ne.TimestampSecond;case dt.MILLISECOND:return ne.TimestampMillisecond;case dt.MICROSECOND:return ne.TimestampMicrosecond;case dt.NANOSECOND:return ne.TimestampNanosecond}return ne.Timestamp;case ne.Date:switch(t.unit){case Us.DAY:return ne.DateDay;case Us.MILLISECOND:return ne.DateMillisecond}return ne.Date;case ne.Interval:switch(t.unit){case qr.DAY_TIME:return ne.IntervalDayTime;case qr.YEAR_MONTH:return ne.IntervalYearMonth}return ne.Interval;case ne.Map:return ne.Map;case ne.List:return ne.List;case ne.Struct:return ne.Struct;case ne.Union:switch(t.mode){case mi.Dense:return ne.DenseUnion;case mi.Sparse:return ne.SparseUnion}return ne.Union;case ne.FixedSizeBinary:return ne.FixedSizeBinary;case ne.FixedSizeList:return ne.FixedSizeList;case ne.Dictionary:return ne.Dictionary}throw new Error(`Unrecognized type '${ne[t.typeId]}'`)}It.prototype.visitInt8=null;It.prototype.visitInt16=null;It.prototype.visitInt32=null;It.prototype.visitInt64=null;It.prototype.visitUint8=null;It.prototype.visitUint16=null;It.prototype.visitUint32=null;It.prototype.visitUint64=null;It.prototype.visitFloat16=null;It.prototype.visitFloat32=null;It.prototype.visitFloat64=null;It.prototype.visitDateDay=null;It.prototype.visitDateMillisecond=null;It.prototype.visitTimestampSecond=null;It.prototype.visitTimestampMillisecond=null;It.prototype.visitTimestampMicrosecond=null;It.prototype.visitTimestampNanosecond=null;It.prototype.visitTimeSecond=null;It.prototype.visitTimeMillisecond=null;It.prototype.visitTimeMicrosecond=null;It.prototype.visitTimeNanosecond=null;It.prototype.visitDenseUnion=null;It.prototype.visitSparseUnion=null;It.prototype.visitIntervalDayTime=null;It.prototype.visitIntervalYearMonth=null;const R8=new Float64Array(1),eh=new Uint32Array(R8.buffer);function e2(t){const e=(t&31744)>>10,n=(t&1023)/1024,i=Math.pow(-1,(t&32768)>>15);switch(e){case 31:return i*(n?Number.NaN:1/0);case 0:return i*(n?6103515625e-14*n:0)}return i*Math.pow(2,e-15)*(1+n)}function t2(t){if(t!==t)return 32256;R8[0]=t;const e=(eh[1]&2147483648)>>16&65535;let n=eh[1]&2146435072,i=0;return n>=1089470464?eh[0]>0?n=31744:(n=(n&2080374784)>>16,i=(eh[1]&1048575)>>10):n<=1056964608?(i=1048576+(eh[1]&1048575),i=1048576+(i<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,i=(eh[1]&1048575)+512>>10),e|n|i&65535}const iee=Object.freeze(Object.defineProperty({__proto__:null,uint16ToFloat64:e2,float64ToUint16:t2},Symbol.toStringTag,{value:"Module"}));class ut extends It{}function bt(t){return(e,n,i)=>{if(e.setValid(n,i!=null))return t(e,n,i)}}const see=(t,e,n)=>{t[e]=Math.trunc(n/864e5)},n2=(t,e,n)=>{t[e]=Math.trunc(n%4294967296),t[e+1]=Math.trunc(n/4294967296)},ree=(t,e,n)=>{t[e]=Math.trunc(n*1e3%4294967296),t[e+1]=Math.trunc(n*1e3/4294967296)},aee=(t,e,n)=>{t[e]=Math.trunc(n*1e6%4294967296),t[e+1]=Math.trunc(n*1e6/4294967296)},L8=(t,e,n,i)=>{if(n+1<e.length){const{[n]:s,[n+1]:o}=e;t.set(i.subarray(0,o-s),s)}},oee=({offset:t,values:e},n,i)=>{const s=t+n;i?e[s>>3]|=1<<s%8:e[s>>3]&=~(1<<s%8)},ec=({values:t},e,n)=>{t[e]=n},i2=({values:t},e,n)=>{t[e]=n},P8=({values:t},e,n)=>{t[e]=t2(n)},lee=(t,e,n)=>{switch(t.type.precision){case ii.HALF:return P8(t,e,n);case ii.SINGLE:case ii.DOUBLE:return i2(t,e,n)}},s2=({values:t},e,n)=>{see(t,e,n.valueOf())},r2=({values:t},e,n)=>{n2(t,e*2,n.valueOf())},D8=({stride:t,values:e},n,i)=>{e.set(i.subarray(0,t),t*n)},cee=({values:t,valueOffsets:e},n,i)=>L8(t,e,n,i),dee=({values:t,valueOffsets:e},n,i)=>{L8(t,e,n,F1(i))},j8=(t,e,n)=>{t.type.unit===Us.DAY?s2(t,e,n):r2(t,e,n)},a2=({values:t},e,n)=>n2(t,e*2,n/1e3),o2=({values:t},e,n)=>n2(t,e*2,n),l2=({values:t},e,n)=>ree(t,e*2,n),c2=({values:t},e,n)=>aee(t,e*2,n),U8=(t,e,n)=>{switch(t.type.unit){case dt.SECOND:return a2(t,e,n);case dt.MILLISECOND:return o2(t,e,n);case dt.MICROSECOND:return l2(t,e,n);case dt.NANOSECOND:return c2(t,e,n)}},d2=({values:t},e,n)=>{t[e]=n},f2=({values:t},e,n)=>{t[e]=n},u2=({values:t},e,n)=>{t[e]=n},h2=({values:t},e,n)=>{t[e]=n},$8=(t,e,n)=>{switch(t.type.unit){case dt.SECOND:return d2(t,e,n);case dt.MILLISECOND:return f2(t,e,n);case dt.MICROSECOND:return u2(t,e,n);case dt.NANOSECOND:return h2(t,e,n)}},z8=({values:t,stride:e},n,i)=>{t.set(i.subarray(0,e),e*n)},fee=(t,e,n)=>{const i=t.children[0],s=t.valueOffsets,o=Gr.getVisitFn(i);if(Array.isArray(n))for(let c=-1,d=s[e],f=s[e+1];d<f;)o(i,d++,n[++c]);else for(let c=-1,d=s[e],f=s[e+1];d<f;)o(i,d++,n.get(++c))},uee=(t,e,n)=>{const i=t.children[0],{valueOffsets:s}=t,o=Gr.getVisitFn(i);let{[e]:c,[e+1]:d}=s;const f=n instanceof Map?n.entries():Object.entries(n);for(const u of f)if(o(i,c,u),++c>=d)break},hee=(t,e)=>(n,i,s,o)=>i&&n(i,t,e[o]),pee=(t,e)=>(n,i,s,o)=>i&&n(i,t,e.get(o)),gee=(t,e)=>(n,i,s,o)=>i&&n(i,t,e.get(s.name)),_ee=(t,e)=>(n,i,s,o)=>i&&n(i,t,e[s.name]),yee=(t,e,n)=>{const i=t.type.children.map(o=>Gr.getVisitFn(o.type)),s=n instanceof Map?gee(e,n):n instanceof We?pee(e,n):Array.isArray(n)?hee(e,n):_ee(e,n);t.type.children.forEach((o,c)=>s(i[c],t.children[c],o,c))},mee=(t,e,n)=>{t.type.mode===mi.Dense?q8(t,e,n):G8(t,e,n)},q8=(t,e,n)=>{const i=t.type.typeIdToChildIndex[t.typeIds[e]],s=t.children[i];Gr.visit(s,t.valueOffsets[e],n)},G8=(t,e,n)=>{const i=t.type.typeIdToChildIndex[t.typeIds[e]],s=t.children[i];Gr.visit(s,e,n)},wee=(t,e,n)=>{var i;(i=t.dictionary)===null||i===void 0||i.set(t.values[e],n)},V8=(t,e,n)=>{t.type.unit===qr.DAY_TIME?p2(t,e,n):g2(t,e,n)},p2=({values:t},e,n)=>{t.set(n.subarray(0,2),2*e)},g2=({values:t},e,n)=>{t[e]=n[0]*12+n[1]%12},bee=(t,e,n)=>{const{stride:i}=t,s=t.children[0],o=Gr.getVisitFn(s);if(Array.isArray(n))for(let c=-1,d=e*i;++c<i;)o(s,d+c,n[c]);else for(let c=-1,d=e*i;++c<i;)o(s,d+c,n.get(c))};ut.prototype.visitBool=bt(oee);ut.prototype.visitInt=bt(ec);ut.prototype.visitInt8=bt(ec);ut.prototype.visitInt16=bt(ec);ut.prototype.visitInt32=bt(ec);ut.prototype.visitInt64=bt(ec);ut.prototype.visitUint8=bt(ec);ut.prototype.visitUint16=bt(ec);ut.prototype.visitUint32=bt(ec);ut.prototype.visitUint64=bt(ec);ut.prototype.visitFloat=bt(lee);ut.prototype.visitFloat16=bt(P8);ut.prototype.visitFloat32=bt(i2);ut.prototype.visitFloat64=bt(i2);ut.prototype.visitUtf8=bt(dee);ut.prototype.visitBinary=bt(cee);ut.prototype.visitFixedSizeBinary=bt(D8);ut.prototype.visitDate=bt(j8);ut.prototype.visitDateDay=bt(s2);ut.prototype.visitDateMillisecond=bt(r2);ut.prototype.visitTimestamp=bt(U8);ut.prototype.visitTimestampSecond=bt(a2);ut.prototype.visitTimestampMillisecond=bt(o2);ut.prototype.visitTimestampMicrosecond=bt(l2);ut.prototype.visitTimestampNanosecond=bt(c2);ut.prototype.visitTime=bt($8);ut.prototype.visitTimeSecond=bt(d2);ut.prototype.visitTimeMillisecond=bt(f2);ut.prototype.visitTimeMicrosecond=bt(u2);ut.prototype.visitTimeNanosecond=bt(h2);ut.prototype.visitDecimal=bt(z8);ut.prototype.visitList=bt(fee);ut.prototype.visitStruct=bt(yee);ut.prototype.visitUnion=bt(mee);ut.prototype.visitDenseUnion=bt(q8);ut.prototype.visitSparseUnion=bt(G8);ut.prototype.visitDictionary=bt(wee);ut.prototype.visitInterval=bt(V8);ut.prototype.visitIntervalDayTime=bt(p2);ut.prototype.visitIntervalYearMonth=bt(g2);ut.prototype.visitFixedSizeList=bt(bee);ut.prototype.visitMap=bt(uee);const Gr=new ut,ua=Symbol.for("parent"),Ph=Symbol.for("rowIndex");class R1{constructor(e,n){return this[ua]=e,this[Ph]=n,new Proxy(this,new vee)}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[Ph],n=this[ua],i=n.type.children,s={};for(let o=-1,c=i.length;++o<c;)s[i[o].name]=$s.visit(n.children[o],e);return s}toString(){return`{${[...this].map(([e,n])=>`${Gc(e)}: ${Gc(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new Tee(this[ua],this[Ph])}}class Tee{constructor(e,n){this.childIndex=0,this.children=e.children,this.rowIndex=n,this.childFields=e.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const e=this.childIndex;return e<this.numChildren?(this.childIndex=e+1,{done:!1,value:[this.childFields[e].name,$s.visit(this.children[e],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(R1.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[ua]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Ph]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class vee{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[ua].type.children.map(n=>n.name)}has(e,n){return e[ua].type.children.findIndex(i=>i.name===n)!==-1}getOwnPropertyDescriptor(e,n){if(e[ua].type.children.findIndex(i=>i.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,n){if(Reflect.has(e,n))return e[n];const i=e[ua].type.children.findIndex(s=>s.name===n);if(i!==-1){const s=$s.visit(e[ua].children[i],e[Ph]);return Reflect.set(e,n,s),s}}set(e,n,i){const s=e[ua].type.children.findIndex(o=>o.name===n);return s!==-1?(Gr.visit(e[ua].children[s],e[Ph],i),Reflect.set(e,n,i)):Reflect.has(e,n)||typeof n=="symbol"?Reflect.set(e,n,i):!1}}class nt extends It{}function ht(t){return(e,n)=>e.getValid(n)?t(e,n):null}const Eee=(t,e)=>864e5*t[e],_2=(t,e)=>4294967296*t[e+1]+(t[e]>>>0),See=(t,e)=>4294967296*(t[e+1]/1e3)+(t[e]>>>0)/1e3,xee=(t,e)=>4294967296*(t[e+1]/1e6)+(t[e]>>>0)/1e6,W8=t=>new Date(t),Bee=(t,e)=>W8(Eee(t,e)),kee=(t,e)=>W8(_2(t,e)),Iee=(t,e)=>null,H8=(t,e,n)=>{if(n+1>=e.length)return null;const i=e[n],s=e[n+1];return t.subarray(i,s)},Fee=({offset:t,values:e},n)=>{const i=t+n;return(e[i>>3]&1<<i%8)!==0},Y8=({values:t},e)=>Bee(t,e),X8=({values:t},e)=>kee(t,e*2),kd=({stride:t,values:e},n)=>e[t*n],Oee=({stride:t,values:e},n)=>e2(e[t*n]),K8=({values:t},e)=>t[e],Mee=({stride:t,values:e},n)=>e.subarray(t*n,t*(n+1)),Aee=({values:t,valueOffsets:e},n)=>H8(t,e,n),Nee=({values:t,valueOffsets:e},n)=>{const i=H8(t,e,n);return i!==null?ek(i):null},Cee=({values:t},e)=>t[e],Ree=({type:t,values:e},n)=>t.precision!==ii.HALF?e[n]:e2(e[n]),Lee=(t,e)=>t.type.unit===Us.DAY?Y8(t,e):X8(t,e),J8=({values:t},e)=>1e3*_2(t,e*2),Q8=({values:t},e)=>_2(t,e*2),Z8=({values:t},e)=>See(t,e*2),e$=({values:t},e)=>xee(t,e*2),Pee=(t,e)=>{switch(t.type.unit){case dt.SECOND:return J8(t,e);case dt.MILLISECOND:return Q8(t,e);case dt.MICROSECOND:return Z8(t,e);case dt.NANOSECOND:return e$(t,e)}},t$=({values:t},e)=>t[e],n$=({values:t},e)=>t[e],i$=({values:t},e)=>t[e],s$=({values:t},e)=>t[e],Dee=(t,e)=>{switch(t.type.unit){case dt.SECOND:return t$(t,e);case dt.MILLISECOND:return n$(t,e);case dt.MICROSECOND:return i$(t,e);case dt.NANOSECOND:return s$(t,e)}},jee=({values:t,stride:e},n)=>Xy.decimal(t.subarray(e*n,e*(n+1))),Uee=(t,e)=>{const{valueOffsets:n,stride:i,children:s}=t,{[e*i]:o,[e*i+1]:c}=n,f=s[0].slice(o,c-o);return new We([f])},$ee=(t,e)=>{const{valueOffsets:n,children:i}=t,{[e]:s,[e+1]:o}=n,c=i[0];return new Ky(c.slice(s,o-s))},zee=(t,e)=>new R1(t,e),qee=(t,e)=>t.type.mode===mi.Dense?r$(t,e):a$(t,e),r$=(t,e)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],i=t.children[n];return $s.visit(i,t.valueOffsets[e])},a$=(t,e)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],i=t.children[n];return $s.visit(i,e)},Gee=(t,e)=>{var n;return(n=t.dictionary)===null||n===void 0?void 0:n.get(t.values[e])},Vee=(t,e)=>t.type.unit===qr.DAY_TIME?o$(t,e):l$(t,e),o$=({values:t},e)=>t.subarray(2*e,2*(e+1)),l$=({values:t},e)=>{const n=t[e],i=new Int32Array(2);return i[0]=Math.trunc(n/12),i[1]=Math.trunc(n%12),i},Wee=(t,e)=>{const{stride:n,children:i}=t,o=i[0].slice(e*n,n);return new We([o])};nt.prototype.visitNull=ht(Iee);nt.prototype.visitBool=ht(Fee);nt.prototype.visitInt=ht(Cee);nt.prototype.visitInt8=ht(kd);nt.prototype.visitInt16=ht(kd);nt.prototype.visitInt32=ht(kd);nt.prototype.visitInt64=ht(K8);nt.prototype.visitUint8=ht(kd);nt.prototype.visitUint16=ht(kd);nt.prototype.visitUint32=ht(kd);nt.prototype.visitUint64=ht(K8);nt.prototype.visitFloat=ht(Ree);nt.prototype.visitFloat16=ht(Oee);nt.prototype.visitFloat32=ht(kd);nt.prototype.visitFloat64=ht(kd);nt.prototype.visitUtf8=ht(Nee);nt.prototype.visitBinary=ht(Aee);nt.prototype.visitFixedSizeBinary=ht(Mee);nt.prototype.visitDate=ht(Lee);nt.prototype.visitDateDay=ht(Y8);nt.prototype.visitDateMillisecond=ht(X8);nt.prototype.visitTimestamp=ht(Pee);nt.prototype.visitTimestampSecond=ht(J8);nt.prototype.visitTimestampMillisecond=ht(Q8);nt.prototype.visitTimestampMicrosecond=ht(Z8);nt.prototype.visitTimestampNanosecond=ht(e$);nt.prototype.visitTime=ht(Dee);nt.prototype.visitTimeSecond=ht(t$);nt.prototype.visitTimeMillisecond=ht(n$);nt.prototype.visitTimeMicrosecond=ht(i$);nt.prototype.visitTimeNanosecond=ht(s$);nt.prototype.visitDecimal=ht(jee);nt.prototype.visitList=ht(Uee);nt.prototype.visitStruct=ht(zee);nt.prototype.visitUnion=ht(qee);nt.prototype.visitDenseUnion=ht(r$);nt.prototype.visitSparseUnion=ht(a$);nt.prototype.visitDictionary=ht(Gee);nt.prototype.visitInterval=ht(Vee);nt.prototype.visitIntervalDayTime=ht(o$);nt.prototype.visitIntervalYearMonth=ht(l$);nt.prototype.visitFixedSizeList=ht(Wee);nt.prototype.visitMap=ht($ee);const $s=new nt,ya=Symbol.for("keys"),Dh=Symbol.for("vals");class Ky{constructor(e){return this[ya]=new We([e.children[0]]).memoize(),this[Dh]=e.children[1],new Proxy(this,new Yee)}[Symbol.iterator](){return new Hee(this[ya],this[Dh])}get size(){return this[ya].length}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[ya],n=this[Dh],i={};for(let s=-1,o=e.length;++s<o;)i[e.get(s)]=$s.visit(n,s);return i}toString(){return`{${[...this].map(([e,n])=>`${Gc(e)}: ${Gc(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class Hee{constructor(e,n){this.keys=e,this.vals=n,this.keyIndex=0,this.numKeys=e.length}[Symbol.iterator](){return this}next(){const e=this.keyIndex;return e===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(e),$s.visit(this.vals,e)]})}}class Yee{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[ya].toArray().map(String)}has(e,n){return e[ya].includes(n)}getOwnPropertyDescriptor(e,n){if(e[ya].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,n){if(Reflect.has(e,n))return e[n];const i=e[ya].indexOf(n);if(i!==-1){const s=$s.visit(Reflect.get(e,Dh),i);return Reflect.set(e,n,s),s}}set(e,n,i){const s=e[ya].indexOf(n);return s!==-1?(Gr.visit(Reflect.get(e,Dh),s,i),Reflect.set(e,n,i)):Reflect.has(e,n)?Reflect.set(e,n,i):!1}}Object.defineProperties(Ky.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[ya]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Dh]:{writable:!0,enumerable:!1,configurable:!1,value:null}});function Xee(t,e,n){const i=t.length,s=e>-1?e:i+e%i;return n?n(t,s):s}let NL;function y2(t,e,n,i){const{length:s=0}=t;let o=typeof e!="number"?0:e,c=typeof n!="number"?s:n;return o<0&&(o=(o%s+s)%s),c<0&&(c=(c%s+s)%s),c<o&&(NL=o,o=c,c=NL),c>s&&(c=s),i?i(t,o,c):[o,c]}const CL=t=>t!==t;function Au(t){if(typeof t!=="object"||t===null)return CL(t)?CL:n=>n===t;if(t instanceof Date){const n=t.valueOf();return i=>i instanceof Date?i.valueOf()===n:!1}return ArrayBuffer.isView(t)?n=>n?f8(t,n):!1:t instanceof Map?Jee(t):Array.isArray(t)?Kee(t):t instanceof We?Qee(t):Zee(t,!0)}function Kee(t){const e=[];for(let n=-1,i=t.length;++n<i;)e[n]=Au(t[n]);return L1(e)}function Jee(t){let e=-1;const n=[];for(const i of t.values())n[++e]=Au(i);return L1(n)}function Qee(t){const e=[];for(let n=-1,i=t.length;++n<i;)e[n]=Au(t.get(n));return L1(e)}function Zee(t,e=!1){const n=Object.keys(t);if(!e&&n.length===0)return()=>!1;const i=[];for(let s=-1,o=n.length;++s<o;)i[s]=Au(t[n[s]]);return L1(i,n)}function L1(t,e){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return ete(t,n);case Map:return RL(t,n,n.keys());case Ky:case R1:case Object:case void 0:return RL(t,n,e||Object.keys(n))}return n instanceof We?tte(t,n):!1}}function ete(t,e){const n=t.length;if(e.length!==n)return!1;for(let i=-1;++i<n;)if(!t[i](e[i]))return!1;return!0}function tte(t,e){const n=t.length;if(e.length!==n)return!1;for(let i=-1;++i<n;)if(!t[i](e.get(i)))return!1;return!0}function RL(t,e,n){const i=n[Symbol.iterator](),s=e instanceof Map?e.keys():Object.keys(e)[Symbol.iterator](),o=e instanceof Map?e.values():Object.values(e)[Symbol.iterator]();let c=0;const d=t.length;let f=o.next(),u=i.next(),a=s.next();for(;c<d&&!u.done&&!a.done&&!f.done&&!(u.value!==a.value||!t[c](f.value));++c,u=i.next(),a=s.next(),f=o.next());return c===d&&u.done&&a.done&&f.done?!0:(i.return&&i.return(),s.return&&s.return(),o.return&&o.return(),!1)}const nte=Object.freeze(Object.defineProperty({__proto__:null,clampIndex:Xee,clampRange:y2,createElementComparator:Au},Symbol.toStringTag,{value:"Module"}));function P1(t,e,n,i){return(n&1<<i)!==0}function m2(t,e,n,i){return(n&1<<i)>>i}function ite(t,e,n){return n?!!(t[e>>3]|=1<<e%8)||!0:!(t[e>>3]&=~(1<<e%8))&&!1}function D1(t,e,n){const i=n.byteLength+7&-8;if(t>0||n.byteLength<i){const s=new Uint8Array(i);return s.set(t%8===0?n.subarray(t>>3):ny(new lp(n,t,e,null,P1)).subarray(0,i)),s}return n}function ny(t){const e=[];let n=0,i=0,s=0;for(const c of t)c&&(s|=1<<i),++i===8&&(e[n++]=s,s=i=0);(n===0||i>0)&&(e[n++]=s);const o=new Uint8Array(e.length+7&-8);return o.set(e),o}class lp{constructor(e,n,i,s,o){this.bytes=e,this.length=i,this.context=s,this.get=o,this.bit=n%8,this.byteIndex=n>>3,this.byte=e[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function tT(t,e,n){if(n-e<=0)return 0;if(n-e<8){let o=0;for(const c of new lp(t,e,n-e,t,m2))o+=c;return o}const i=n>>3<<3,s=e+(e%8===0?0:8-e%8);return tT(t,e,s)+tT(t,i,n)+c$(t,s>>3,i-s>>3)}function c$(t,e,n){let i=0,s=Math.trunc(e);const o=new DataView(t.buffer,t.byteOffset,t.byteLength),c=n===void 0?t.byteLength:s+n;for(;c-s>=4;)i+=m0(o.getUint32(s)),s+=4;for(;c-s>=2;)i+=m0(o.getUint16(s)),s+=2;for(;c-s>=1;)i+=m0(o.getUint8(s)),s+=1;return i}function m0(t){let e=Math.trunc(t);return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),(e+(e>>>4)&252645135)*16843009>>>24}const ste=Object.freeze(Object.defineProperty({__proto__:null,getBool:P1,getBit:m2,setBool:ite,truncateBitmap:D1,packBools:ny,BitIterator:lp,popcnt_bit_range:tT,popcnt_array:c$,popcnt_uint32:m0},Symbol.toStringTag,{value:"Module"})),rte=-1;class Qt{constructor(e,n,i,s,o,c=[],d){this.type=e,this.children=c,this.dictionary=d,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(i||0,0)),this._nullCount=Math.floor(Math.max(s||0,-1));let f;o instanceof Qt?(this.stride=o.stride,this.values=o.values,this.typeIds=o.typeIds,this.nullBitmap=o.nullBitmap,this.valueOffsets=o.valueOffsets):(this.stride=Qa(e),o&&((f=o[0])&&(this.valueOffsets=f),(f=o[1])&&(this.values=f),(f=o[2])&&(this.nullBitmap=f),(f=o[3])&&(this.typeIds=f))),this.nullable=this._nullCount!==0&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let e=0;const{valueOffsets:n,values:i,nullBitmap:s,typeIds:o}=this;return n&&(e+=n.byteLength),i&&(e+=i.byteLength),s&&(e+=s.byteLength),o&&(e+=o.byteLength),this.children.reduce((c,d)=>c+d.byteLength,e)}get nullCount(){let e=this._nullCount,n;return e<=rte&&(n=this.nullBitmap)&&(this._nullCount=e=this.length-tT(n,this.offset,this.offset+this.length)),e}getValid(e){if(this.nullable&&this.nullCount>0){const n=this.offset+e;return(this.nullBitmap[n>>3]&1<<n%8)!==0}return!0}setValid(e,n){if(!this.nullable)return n;if(!this.nullBitmap||this.nullBitmap.byteLength<=e>>3){const{nullBitmap:f}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:f,_nullCount:0})}const{nullBitmap:i,offset:s}=this,o=s+e>>3,c=(s+e)%8,d=i[o]>>c&1;return n?d===0&&(i[o]|=1<<c,this._nullCount=this.nullCount+1):d===1&&(i[o]&=~(1<<c),this._nullCount=this.nullCount-1),n}clone(e=this.type,n=this.offset,i=this.length,s=this._nullCount,o=this,c=this.children){return new Qt(e,n,i,s,o,c,this.dictionary)}slice(e,n){const{stride:i,typeId:s,children:o}=this,c=+(this._nullCount===0)-1,d=s===16?i:1,f=this._sliceBuffers(e,n,i,s);return this.clone(this.type,this.offset+e,n,c,f,o.length===0||this.valueOffsets?o:this._sliceChildren(o,d*e,d*n))}_changeLengthAndBackfillNullBitmap(e){if(this.typeId===ne.Null)return this.clone(this.type,0,e,0);const{length:n,nullCount:i}=this,s=new Uint8Array((e+63&-64)>>3).fill(255,0,n>>3);s[n>>3]=(1<<n-(n&-8))-1,i>0&&s.set(D1(this.offset,n,this.nullBitmap),0);const o=this.buffers;return o[fa.VALIDITY]=s,this.clone(this.type,0,e,i+(e-n),o)}_sliceBuffers(e,n,i,s){let o;const{buffers:c}=this;return(o=c[fa.TYPE])&&(c[fa.TYPE]=o.subarray(e,e+n)),(o=c[fa.OFFSET])&&(c[fa.OFFSET]=o.subarray(e,e+n+1))||(o=c[fa.DATA])&&(c[fa.DATA]=s===6?o:o.subarray(i*e,i*(e+n))),c}_sliceChildren(e,n,i){return e.map(s=>s.slice(n,i))}}Qt.prototype.children=Object.freeze([]);class N_ extends It{visit(e){return this.getVisitFn(e.type).call(this,e)}visitNull(e){const{["type"]:n,["offset"]:i=0,["length"]:s=0}=e;return new Qt(n,i,s,0)}visitBool(e){const{["type"]:n,["offset"]:i=0}=e,s=Nt(e.nullBitmap),o=Ot(n.ArrayType,e.data),{["length"]:c=o.length>>3,["nullCount"]:d=e.nullBitmap?-1:0}=e;return new Qt(n,i,c,d,[void 0,o,s])}visitInt(e){const{["type"]:n,["offset"]:i=0}=e,s=Nt(e.nullBitmap),o=Ot(n.ArrayType,e.data),{["length"]:c=o.length,["nullCount"]:d=e.nullBitmap?-1:0}=e;return new Qt(n,i,c,d,[void 0,o,s])}visitFloat(e){const{["type"]:n,["offset"]:i=0}=e,s=Nt(e.nullBitmap),o=Ot(n.ArrayType,e.data),{["length"]:c=o.length,["nullCount"]:d=e.nullBitmap?-1:0}=e;return new Qt(n,i,c,d,[void 0,o,s])}visitUtf8(e){const{["type"]:n,["offset"]:i=0}=e,s=Nt(e.data),o=Nt(e.nullBitmap),c=yh(e.valueOffsets),{["length"]:d=c.length-1,["nullCount"]:f=e.nullBitmap?-1:0}=e;return new Qt(n,i,d,f,[c,s,o])}visitBinary(e){const{["type"]:n,["offset"]:i=0}=e,s=Nt(e.data),o=Nt(e.nullBitmap),c=yh(e.valueOffsets),{["length"]:d=c.length-1,["nullCount"]:f=e.nullBitmap?-1:0}=e;return new Qt(n,i,d,f,[c,s,o])}visitFixedSizeBinary(e){const{["type"]:n,["offset"]:i=0}=e,s=Nt(e.nullBitmap),o=Ot(n.ArrayType,e.data),{["length"]:c=o.length/Qa(n),["nullCount"]:d=e.nullBitmap?-1:0}=e;return new Qt(n,i,c,d,[void 0,o,s])}visitDate(e){const{["type"]:n,["offset"]:i=0}=e,s=Nt(e.nullBitmap),o=Ot(n.ArrayType,e.data),{["length"]:c=o.length/Qa(n),["nullCount"]:d=e.nullBitmap?-1:0}=e;return new Qt(n,i,c,d,[void 0,o,s])}visitTimestamp(e){const{["type"]:n,["offset"]:i=0}=e,s=Nt(e.nullBitmap),o=Ot(n.ArrayType,e.data),{["length"]:c=o.length/Qa(n),["nullCount"]:d=e.nullBitmap?-1:0}=e;return new Qt(n,i,c,d,[void 0,o,s])}visitTime(e){const{["type"]:n,["offset"]:i=0}=e,s=Nt(e.nullBitmap),o=Ot(n.ArrayType,e.data),{["length"]:c=o.length/Qa(n),["nullCount"]:d=e.nullBitmap?-1:0}=e;return new Qt(n,i,c,d,[void 0,o,s])}visitDecimal(e){const{["type"]:n,["offset"]:i=0}=e,s=Nt(e.nullBitmap),o=Ot(n.ArrayType,e.data),{["length"]:c=o.length/Qa(n),["nullCount"]:d=e.nullBitmap?-1:0}=e;return new Qt(n,i,c,d,[void 0,o,s])}visitList(e){const{["type"]:n,["offset"]:i=0,["child"]:s}=e,o=Nt(e.nullBitmap),c=yh(e.valueOffsets),{["length"]:d=c.length-1,["nullCount"]:f=e.nullBitmap?-1:0}=e;return new Qt(n,i,d,f,[c,void 0,o],[s])}visitStruct(e){const{["type"]:n,["offset"]:i=0,["children"]:s=[]}=e,o=Nt(e.nullBitmap),{length:c=s.reduce((f,{length:u})=>Math.max(f,u),0),nullCount:d=e.nullBitmap?-1:0}=e;return new Qt(n,i,c,d,[void 0,void 0,o],s)}visitUnion(e){const{["type"]:n,["offset"]:i=0,["children"]:s=[]}=e,o=Nt(e.nullBitmap),c=Ot(n.ArrayType,e.typeIds),{["length"]:d=c.length,["nullCount"]:f=e.nullBitmap?-1:0}=e;if(Ye.isSparseUnion(n))return new Qt(n,i,d,f,[void 0,void 0,o,c],s);const u=yh(e.valueOffsets);return new Qt(n,i,d,f,[u,void 0,o,c],s)}visitDictionary(e){const{["type"]:n,["offset"]:i=0}=e,s=Nt(e.nullBitmap),o=Ot(n.indices.ArrayType,e.data),{["dictionary"]:c=new We([new N_().visit({type:n.dictionary})])}=e,{["length"]:d=o.length,["nullCount"]:f=e.nullBitmap?-1:0}=e;return new Qt(n,i,d,f,[void 0,o,s],[],c)}visitInterval(e){const{["type"]:n,["offset"]:i=0}=e,s=Nt(e.nullBitmap),o=Ot(n.ArrayType,e.data),{["length"]:c=o.length/Qa(n),["nullCount"]:d=e.nullBitmap?-1:0}=e;return new Qt(n,i,c,d,[void 0,o,s])}visitFixedSizeList(e){const{["type"]:n,["offset"]:i=0,["child"]:s=new N_().visit({type:n.valueType})}=e,o=Nt(e.nullBitmap),{["length"]:c=s.length/Qa(n),["nullCount"]:d=e.nullBitmap?-1:0}=e;return new Qt(n,i,c,d,[void 0,void 0,o],[s])}visitMap(e){const{["type"]:n,["offset"]:i=0,["child"]:s=new N_().visit({type:n.childType})}=e,o=Nt(e.nullBitmap),c=yh(e.valueOffsets),{["length"]:d=c.length-1,["nullCount"]:f=e.nullBitmap?-1:0}=e;return new Qt(n,i,d,f,[c,void 0,o],[s])}}function Qe(t){return new N_().visit(t)}class LL{constructor(e=0,n){this.numChunks=e,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const e=this.chunkIterator.next();if(!e.done)return e;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function d$(t){return t.reduce((e,n)=>e+n.nullCount,0)}function f$(t){return t.reduce((e,n,i)=>(e[i+1]=e[i]+n.length,e),new Uint32Array(t.length+1))}function u$(t,e,n,i){const s=[];for(let o=-1,c=t.length;++o<c;){const d=t[o],f=e[o],{length:u}=d;if(f>=i)break;if(n>=f+u)continue;if(f>=n&&f+u<=i){s.push(d);continue}const a=Math.max(0,n-f),_=Math.min(i-f,u);s.push(d.slice(a,_-a))}return s.length===0&&s.push(t[0].slice(0,0)),s}function w2(t,e,n,i){let s=0,o=0,c=e.length-1;do{if(s>=c-1)return n<e[c]?i(t,s,n-e[s]):null;o=s+Math.trunc((c-s)*.5),n<e[o]?c=o:s=o}while(s<c)}function b2(t,e){return t.getValid(e)}function jh(t){function e(n,i,s){return t(n[i],s)}return function(n){const i=this.data;return w2(i,this._offsets,n,e)}}function h$(t){let e;function n(i,s,o){return t(i[s],o,e)}return function(i,s){const o=this.data;e=s;const c=w2(o,this._offsets,i,n);return e=void 0,c}}function p$(t){let e;function n(i,s,o){let c=o,d=0,f=0;for(let u=s-1,a=i.length;++u<a;){const _=i[u];if(~(d=t(_,e,c)))return f+d;c=0,f+=_.length}return-1}return function(i,s){e=i;const o=this.data,c=typeof s!="number"?n(o,0,0):w2(o,this._offsets,s,n);return e=void 0,c}}class it extends It{}function ate(t,e){return e===null&&t.length>0?0:-1}function ote(t,e){const{nullBitmap:n}=t;if(!n||t.nullCount<=0)return-1;let i=0;for(const s of new lp(n,t.offset+(e||0),t.length,n,P1)){if(!s)return i;++i}return-1}function St(t,e,n){if(e===void 0)return-1;if(e===null)return ote(t,n);const i=$s.getVisitFn(t),s=Au(e);for(let o=(n||0)-1,c=t.length;++o<c;)if(s(i(t,o)))return o;return-1}function g$(t,e,n){const i=$s.getVisitFn(t),s=Au(e);for(let o=(n||0)-1,c=t.length;++o<c;)if(s(i(t,o)))return o;return-1}it.prototype.visitNull=ate;it.prototype.visitBool=St;it.prototype.visitInt=St;it.prototype.visitInt8=St;it.prototype.visitInt16=St;it.prototype.visitInt32=St;it.prototype.visitInt64=St;it.prototype.visitUint8=St;it.prototype.visitUint16=St;it.prototype.visitUint32=St;it.prototype.visitUint64=St;it.prototype.visitFloat=St;it.prototype.visitFloat16=St;it.prototype.visitFloat32=St;it.prototype.visitFloat64=St;it.prototype.visitUtf8=St;it.prototype.visitBinary=St;it.prototype.visitFixedSizeBinary=St;it.prototype.visitDate=St;it.prototype.visitDateDay=St;it.prototype.visitDateMillisecond=St;it.prototype.visitTimestamp=St;it.prototype.visitTimestampSecond=St;it.prototype.visitTimestampMillisecond=St;it.prototype.visitTimestampMicrosecond=St;it.prototype.visitTimestampNanosecond=St;it.prototype.visitTime=St;it.prototype.visitTimeSecond=St;it.prototype.visitTimeMillisecond=St;it.prototype.visitTimeMicrosecond=St;it.prototype.visitTimeNanosecond=St;it.prototype.visitDecimal=St;it.prototype.visitList=St;it.prototype.visitStruct=St;it.prototype.visitUnion=St;it.prototype.visitDenseUnion=g$;it.prototype.visitSparseUnion=g$;it.prototype.visitDictionary=St;it.prototype.visitInterval=St;it.prototype.visitIntervalDayTime=St;it.prototype.visitIntervalYearMonth=St;it.prototype.visitFixedSizeList=St;it.prototype.visitMap=St;const nT=new it;class st extends It{}function pt(t){const{type:e}=t;if(t.nullCount===0&&t.stride===1&&(e.typeId===ne.Timestamp||e instanceof Yi&&e.bitWidth!==64||e instanceof Ro&&e.bitWidth!==64||e instanceof Wl&&e.precision!==ii.HALF))return new LL(t.data.length,i=>{const s=t.data[i];return s.values.subarray(0,s.length)[Symbol.iterator]()});let n=0;return new LL(t.data.length,i=>{const o=t.data[i].length,c=t.slice(n,n+o);return n+=o,new lte(c)})}class lte{constructor(e){this.vector=e,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}st.prototype.visitNull=pt;st.prototype.visitBool=pt;st.prototype.visitInt=pt;st.prototype.visitInt8=pt;st.prototype.visitInt16=pt;st.prototype.visitInt32=pt;st.prototype.visitInt64=pt;st.prototype.visitUint8=pt;st.prototype.visitUint16=pt;st.prototype.visitUint32=pt;st.prototype.visitUint64=pt;st.prototype.visitFloat=pt;st.prototype.visitFloat16=pt;st.prototype.visitFloat32=pt;st.prototype.visitFloat64=pt;st.prototype.visitUtf8=pt;st.prototype.visitBinary=pt;st.prototype.visitFixedSizeBinary=pt;st.prototype.visitDate=pt;st.prototype.visitDateDay=pt;st.prototype.visitDateMillisecond=pt;st.prototype.visitTimestamp=pt;st.prototype.visitTimestampSecond=pt;st.prototype.visitTimestampMillisecond=pt;st.prototype.visitTimestampMicrosecond=pt;st.prototype.visitTimestampNanosecond=pt;st.prototype.visitTime=pt;st.prototype.visitTimeSecond=pt;st.prototype.visitTimeMillisecond=pt;st.prototype.visitTimeMicrosecond=pt;st.prototype.visitTimeNanosecond=pt;st.prototype.visitDecimal=pt;st.prototype.visitList=pt;st.prototype.visitStruct=pt;st.prototype.visitUnion=pt;st.prototype.visitDenseUnion=pt;st.prototype.visitSparseUnion=pt;st.prototype.visitDictionary=pt;st.prototype.visitInterval=pt;st.prototype.visitIntervalDayTime=pt;st.prototype.visitIntervalYearMonth=pt;st.prototype.visitFixedSizeList=pt;st.prototype.visitMap=pt;const T2=new st,cte=(t,e)=>t+e;class Id extends It{visitNull(e,n){return 0}visitInt(e,n){return e.type.bitWidth/8}visitFloat(e,n){return e.type.ArrayType.BYTES_PER_ELEMENT}visitBool(e,n){return 1/8}visitDecimal(e,n){return e.type.bitWidth/8}visitDate(e,n){return(e.type.unit+1)*4}visitTime(e,n){return e.type.bitWidth/8}visitTimestamp(e,n){return e.type.unit===dt.SECOND?4:8}visitInterval(e,n){return(e.type.unit+1)*4}visitStruct(e,n){return e.children.reduce((i,s)=>i+Lo.visit(s,n),0)}visitFixedSizeBinary(e,n){return e.type.byteWidth}visitMap(e,n){return 8+e.children.reduce((i,s)=>i+Lo.visit(s,n),0)}visitDictionary(e,n){var i;return e.type.indices.bitWidth/8+(((i=e.dictionary)===null||i===void 0?void 0:i.getByteLength(e.values[n]))||0)}}const dte=({valueOffsets:t},e)=>8+(t[e+1]-t[e]),fte=({valueOffsets:t},e)=>8+(t[e+1]-t[e]),ute=({valueOffsets:t,stride:e,children:n},i)=>{const s=n[0],{[i*e]:o}=t,{[i*e+1]:c}=t,d=Lo.getVisitFn(s.type),f=s.slice(o,c-o);let u=8;for(let a=-1,_=c-o;++a<_;)u+=d(f,a);return u},hte=({stride:t,children:e},n)=>{const i=e[0],s=i.slice(n*t,t),o=Lo.getVisitFn(i.type);let c=0;for(let d=-1,f=s.length;++d<f;)c+=o(s,d);return c},pte=(t,e)=>t.type.mode===mi.Dense?_$(t,e):y$(t,e),_$=({type:t,children:e,typeIds:n,valueOffsets:i},s)=>{const o=t.typeIdToChildIndex[n[s]];return 8+Lo.visit(e[o],i[s])},y$=({children:t},e)=>4+Lo.visitMany(t,t.map(()=>e)).reduce(cte,0);Id.prototype.visitUtf8=dte;Id.prototype.visitBinary=fte;Id.prototype.visitList=ute;Id.prototype.visitFixedSizeList=hte;Id.prototype.visitUnion=pte;Id.prototype.visitDenseUnion=_$;Id.prototype.visitSparseUnion=y$;const Lo=new Id;var m$;const w$={},b$={};class We{constructor(e){var n,i,s;const o=e[0]instanceof We?e.flatMap(d=>d.data):e;if(o.length===0||o.some(d=>!(d instanceof Qt)))throw new TypeError("Vector constructor expects an Array of Data instances.");const c=(n=o[0])===null||n===void 0?void 0:n.type;switch(o.length){case 0:this._offsets=[0];break;case 1:{const{get:d,set:f,indexOf:u,byteLength:a}=w$[c.typeId],_=o[0];this.isValid=w=>b2(_,w),this.get=w=>d(_,w),this.set=(w,m)=>f(_,w,m),this.indexOf=w=>u(_,w),this.getByteLength=w=>a(_,w),this._offsets=[0,_.length];break}default:Object.setPrototypeOf(this,b$[c.typeId]),this._offsets=f$(o);break}this.data=o,this.type=c,this.stride=Qa(c),this.numChildren=(s=(i=c.children)===null||i===void 0?void 0:i.length)!==null&&s!==void 0?s:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return this._byteLength===-1&&(this._byteLength=this.data.reduce((e,n)=>e+n.byteLength,0)),this._byteLength}get nullCount(){return this._nullCount===-1&&(this._nullCount=d$(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${ne[this.type.typeId]}Vector`}isValid(e){return!1}get(e){return null}set(e,n){}indexOf(e,n){return-1}includes(e,n){return this.indexOf(e,n)>0}getByteLength(e){return 0}[Symbol.iterator](){return T2.visit(this)}concat(...e){return new We(this.data.concat(e.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(e,n){return new We(y2(this,e,n,({data:i,_offsets:s},o,c)=>u$(i,s,o,c)))}toJSON(){return[...this]}toArray(){const{type:e,data:n,length:i,stride:s,ArrayType:o}=this;switch(e.typeId){case ne.Int:case ne.Float:case ne.Decimal:case ne.Time:case ne.Timestamp:switch(n.length){case 0:return new o;case 1:return n[0].values.subarray(0,i*s);default:return n.reduce((c,{values:d})=>(c.array.set(d,c.offset),c.offset+=d.length,c),{array:new o(i*s),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(e){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(i=>i.name===e))}getChildAt(e){return e>-1&&e<this.numChildren?new We(this.data.map(({children:n})=>n[e])):null}get isMemoized(){return Ye.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(Ye.isDictionary(this.type)){const e=new iT(this.data[0].dictionary),n=this.data.map(i=>{const s=i.clone();return s.dictionary=e,s});return new We(n)}return new iT(this)}unmemoize(){if(Ye.isDictionary(this.type)&&this.isMemoized){const e=this.data[0].dictionary.unmemoize(),n=this.data.map(i=>{const s=i.clone();return s.dictionary=e,s});return new We(n)}return this}}m$=Symbol.toStringTag;We[m$]=(t=>{t.type=Ye.prototype,t.data=[],t.length=0,t.stride=1,t.numChildren=0,t._nullCount=-1,t._byteLength=-1,t._offsets=new Uint32Array([0]),t[Symbol.isConcatSpreadable]=!0;const e=Object.keys(ne).map(n=>ne[n]).filter(n=>typeof n=="number"&&n!==ne.NONE);for(const n of e){const i=$s.getVisitFnByTypeId(n),s=Gr.getVisitFnByTypeId(n),o=nT.getVisitFnByTypeId(n),c=Lo.getVisitFnByTypeId(n);w$[n]={get:i,set:s,indexOf:o,byteLength:c},b$[n]=Object.create(t,{isValid:{value:jh(b2)},get:{value:jh($s.getVisitFnByTypeId(n))},set:{value:h$(Gr.getVisitFnByTypeId(n))},indexOf:{value:p$(nT.getVisitFnByTypeId(n))},getByteLength:{value:jh(Lo.getVisitFnByTypeId(n))}})}return"Vector"})(We.prototype);class iT extends We{constructor(e){super(e.data);const n=this.get,i=this.set,s=this.slice,o=new Array(this.length);Object.defineProperty(this,"get",{value(c){const d=o[c];if(d!==void 0)return d;const f=n.call(this,c);return o[c]=f,f}}),Object.defineProperty(this,"set",{value(c,d){i.call(this,c,d),o[c]=d}}),Object.defineProperty(this,"slice",{value:(c,d)=>new iT(s.call(this,c,d))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new We(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function j1(t){if(t){if(t instanceof Qt)return new We([t]);if(t instanceof We)return new We(t.data);if(t.type instanceof Ye)return new We([Qe(t)]);if(Array.isArray(t))return new We(t.flatMap(e=>gte(e)));if(ArrayBuffer.isView(t)){t instanceof DataView&&(t=new Uint8Array(t.buffer));const e={offset:0,length:t.length,nullCount:0,data:t};if(t instanceof Int8Array)return new We([Qe(Object.assign(Object.assign({},e),{type:new HF}))]);if(t instanceof Int16Array)return new We([Qe(Object.assign(Object.assign({},e),{type:new YF}))]);if(t instanceof Int32Array)return new We([Qe(Object.assign(Object.assign({},e),{type:new nd}))]);if(t instanceof BigInt64Array)return new We([Qe(Object.assign(Object.assign({},e),{type:new N1}))]);if(t instanceof Uint8Array||t instanceof Uint8ClampedArray)return new We([Qe(Object.assign(Object.assign({},e),{type:new XF}))]);if(t instanceof Uint16Array)return new We([Qe(Object.assign(Object.assign({},e),{type:new KF}))]);if(t instanceof Uint32Array)return new We([Qe(Object.assign(Object.assign({},e),{type:new JF}))]);if(t instanceof BigUint64Array)return new We([Qe(Object.assign(Object.assign({},e),{type:new QF}))]);if(t instanceof Float32Array)return new We([Qe(Object.assign(Object.assign({},e),{type:new ZF}))]);if(t instanceof Float64Array)return new We([Qe(Object.assign(Object.assign({},e),{type:new C1}))]);throw new Error("Unrecognized input")}}throw new Error("Unrecognized input")}function gte(t){return t instanceof Qt?[t]:t instanceof We?t.data:j1(t).data}function _te(t){if(!t||t.length<=0)return function(s){return!0};let e="";const n=t.filter(i=>i===i);return n.length>0&&(e=`
    switch (x) {${n.map(i=>`
        case ${yte(i)}:`).join("")}
            return false;
    }`),t.length!==n.length&&(e=`if (x !== x) return false;
${e}`),new Function("x",`${e}
return true;`)}function yte(t){return typeof t!="bigint"?Gc(t):i8?`${Gc(t)}n`:`"${Gc(t)}"`}const lx=(t,e)=>(t*e+63&-64||64)/e,mte=(t,e=0)=>t.length>=e?t.subarray(0,e):J_(new t.constructor(e),t,0);class U1{constructor(e,n=1){this.buffer=e,this.stride=n,this.BYTES_PER_ELEMENT=e.BYTES_PER_ELEMENT,this.ArrayType=e.constructor,this._resize(this.length=Math.trunc(e.length/n))}get byteLength(){return Math.trunc(this.length*this.stride*this.BYTES_PER_ELEMENT)}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(e,n){return this}append(e){return this.set(this.length,e)}reserve(e){if(e>0){this.length+=e;const n=this.stride,i=this.length*n,s=this.buffer.length;i>=s&&this._resize(s===0?lx(i*1,this.BYTES_PER_ELEMENT):lx(i*2,this.BYTES_PER_ELEMENT))}return this}flush(e=this.length){e=lx(e*this.stride,this.BYTES_PER_ELEMENT);const n=mte(this.buffer,e);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(e){return this.buffer=J_(new this.ArrayType(e),this.buffer)}}U1.prototype.offset=0;class Jy extends U1{last(){return this.get(this.length-1)}get(e){return this.buffer[e]}set(e,n){return this.reserve(e-this.length+1),this.buffer[e*this.stride]=n,this}}class T$ extends Jy{constructor(e=new Uint8Array(0)){super(e,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(e){return this.buffer[e>>3]>>e%8&1}set(e,n){const{buffer:i}=this.reserve(e-this.length+1),s=e>>3,o=e%8,c=i[s]>>o&1;return n?c===0&&(i[s]|=1<<o,++this.numValid):c===1&&(i[s]&=~(1<<o),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class v$ extends Jy{constructor(e=new Int32Array(1)){super(e,1)}append(e){return this.set(this.length-1,e)}set(e,n){const i=this.length-1,s=this.reserve(e-i+1).buffer;return i<e++&&s.fill(s[i],i,e),s[e]=s[e-1]+n,this}flush(e=this.length-1){return e>this.length&&this.set(e-1,0),super.flush(e+1)}}class Qi{constructor({type:e,nullValues:n}){this.length=0,this.finished=!1,this.type=e,this.children=[],this.nullValues=n,this.stride=Qa(e),this._nulls=new T$,n&&n.length>0&&(this._isValid=_te(n))}static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e){throw new Error('"throughDOM" not available in this environment')}toVector(){return new We([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let e=0;const{_offsets:n,_values:i,_nulls:s,_typeIds:o,children:c}=this;return n&&(e+=n.byteLength),i&&(e+=i.byteLength),s&&(e+=s.byteLength),o&&(e+=o.byteLength),c.reduce((d,f)=>d+f.byteLength,e)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let e=0;return this._offsets&&(e+=this._offsets.reservedByteLength),this._values&&(e+=this._values.reservedByteLength),this._nulls&&(e+=this._nulls.reservedByteLength),this._typeIds&&(e+=this._typeIds.reservedByteLength),this.children.reduce((n,i)=>n+i.reservedByteLength,e)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(e){return this.set(this.length,e)}isValid(e){return this._isValid(e)}set(e,n){return this.setValid(e,this.isValid(n))&&this.setValue(e,n),this}setValue(e,n){this._setValue(this,e,n)}setValid(e,n){return this.length=this._nulls.set(e,+n).length,n}addChild(e,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(e){return this.children[e]||null}flush(){let e,n,i,s;const{type:o,length:c,nullCount:d,_typeIds:f,_offsets:u,_values:a,_nulls:_}=this;(n=f==null?void 0:f.flush(c))?s=u==null?void 0:u.flush(c):(s=u==null?void 0:u.flush(c))?e=a==null?void 0:a.flush(u.last()):e=a==null?void 0:a.flush(c),d>0&&(i=_==null?void 0:_.flush(c));const w=this.children.map(m=>m.flush());return this.clear(),Qe({type:o,length:c,nullCount:d,children:w,child:w[0],data:e,typeIds:n,nullBitmap:i,valueOffsets:s})}finish(){this.finished=!0;for(const e of this.children)e.finish();return this}clear(){var e,n,i,s;this.length=0,(e=this._nulls)===null||e===void 0||e.clear(),(n=this._values)===null||n===void 0||n.clear(),(i=this._offsets)===null||i===void 0||i.clear(),(s=this._typeIds)===null||s===void 0||s.clear();for(const o of this.children)o.clear();return this}}Qi.prototype.length=1;Qi.prototype.stride=1;Qi.prototype.children=null;Qi.prototype.finished=!1;Qi.prototype.nullValues=null;Qi.prototype._isValid=()=>!0;class Fd extends Qi{constructor(e){super(e),this._values=new Jy(new this.ArrayType(0),this.stride)}setValue(e,n){const i=this._values;return i.reserve(e-i.length+1),super.setValue(e,n)}}class $1 extends Qi{constructor(e){super(e),this._pendingLength=0,this._offsets=new v$}setValue(e,n){const i=this._pending||(this._pending=new Map),s=i.get(e);s&&(this._pendingLength-=s.length),this._pendingLength+=n instanceof Ky?n[ya].length:n.length,i.set(e,n)}setValid(e,n){return super.setValid(e,n)?!0:((this._pending||(this._pending=new Map)).set(e,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const e=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,e&&e.size>0&&this._flushPending(e,n),this}}class ik{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(e,n,i,s){return e.prep(8,24),e.writeInt64(s),e.pad(4),e.writeInt32(i),e.writeInt64(n),e.offset()}}const cx=2,no=4,kl=4,Ge=4,vc=new Int32Array(2),PL=new Float32Array(vc.buffer),DL=new Float64Array(vc.buffer),Tb=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;class hs{constructor(e,n){this.low=e|0,this.high=n|0}static create(e,n){return e==0&&n==0?hs.ZERO:new hs(e,n)}toFloat64(){return(this.low>>>0)+this.high*4294967296}equals(e){return this.low==e.low&&this.high==e.high}}hs.ZERO=new hs(0,0);var sk;(function(t){t[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING"})(sk||(sk={}));class Vr{constructor(e){this.bytes_=e,this.position_=0}static allocate(e){return new Vr(new Uint8Array(e))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(e){this.position_=e}capacity(){return this.bytes_.length}readInt8(e){return this.readUint8(e)<<24>>24}readUint8(e){return this.bytes_[e]}readInt16(e){return this.readUint16(e)<<16>>16}readUint16(e){return this.bytes_[e]|this.bytes_[e+1]<<8}readInt32(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24}readUint32(e){return this.readInt32(e)>>>0}readInt64(e){return new hs(this.readInt32(e),this.readInt32(e+4))}readUint64(e){return new hs(this.readUint32(e),this.readUint32(e+4))}readFloat32(e){return vc[0]=this.readInt32(e),PL[0]}readFloat64(e){return vc[Tb?0:1]=this.readInt32(e),vc[Tb?1:0]=this.readInt32(e+4),DL[0]}writeInt8(e,n){this.bytes_[e]=n}writeUint8(e,n){this.bytes_[e]=n}writeInt16(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8}writeUint16(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8}writeInt32(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8,this.bytes_[e+2]=n>>16,this.bytes_[e+3]=n>>24}writeUint32(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8,this.bytes_[e+2]=n>>16,this.bytes_[e+3]=n>>24}writeInt64(e,n){this.writeInt32(e,n.low),this.writeInt32(e+4,n.high)}writeUint64(e,n){this.writeUint32(e,n.low),this.writeUint32(e+4,n.high)}writeFloat32(e,n){PL[0]=n,this.writeInt32(e,vc[0])}writeFloat64(e,n){DL[0]=n,this.writeInt32(e,vc[Tb?0:1]),this.writeInt32(e+4,vc[Tb?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+no+kl)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let e="";for(let n=0;n<kl;n++)e+=String.fromCharCode(this.readInt8(this.position_+no+n));return e}__offset(e,n){const i=e-this.readInt32(e);return n<this.readInt16(i)?this.readInt16(i+n):0}__union(e,n){return e.bb_pos=n+this.readInt32(n),e.bb=this,e}__string(e,n){e+=this.readInt32(e);const i=this.readInt32(e);let s="",o=0;if(e+=no,n===sk.UTF8_BYTES)return this.bytes_.subarray(e,e+i);for(;o<i;){let c;const d=this.readUint8(e+o++);if(d<192)c=d;else{const f=this.readUint8(e+o++);if(d<224)c=(d&31)<<6|f&63;else{const u=this.readUint8(e+o++);if(d<240)c=(d&15)<<12|(f&63)<<6|u&63;else{const a=this.readUint8(e+o++);c=(d&7)<<18|(f&63)<<12|(u&63)<<6|a&63}}}c<65536?s+=String.fromCharCode(c):(c-=65536,s+=String.fromCharCode((c>>10)+55296,(c&(1<<10)-1)+56320))}return s}__union_with_string(e,n){return typeof e=="string"?this.__string(n):this.__union(e,n)}__indirect(e){return e+this.readInt32(e)}__vector(e){return e+this.readInt32(e)+no}__vector_len(e){return this.readInt32(e+this.readInt32(e))}__has_identifier(e){if(e.length!=kl)throw new Error("FlatBuffers: file identifier must be length "+kl);for(let n=0;n<kl;n++)if(e.charCodeAt(n)!=this.readInt8(this.position()+no+n))return!1;return!0}createLong(e,n){return hs.create(e,n)}createScalarList(e,n){const i=[];for(let s=0;s<n;++s)e(s)!==null&&i.push(e(s));return i}createObjList(e,n){const i=[];for(let s=0;s<n;++s){const o=e(s);o!==null&&i.push(o.unpack())}return i}}class sg{constructor(e){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null;let n;e?n=e:n=1024,this.bb=Vr.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(e){this.force_defaults=e}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(e,n){e>this.minalign&&(this.minalign=e);const i=~(this.bb.capacity()-this.space+n)+1&e-1;for(;this.space<i+e+n;){const s=this.bb.capacity();this.bb=sg.growByteBuffer(this.bb),this.space+=this.bb.capacity()-s}this.pad(i)}pad(e){for(let n=0;n<e;n++)this.bb.writeInt8(--this.space,0)}writeInt8(e){this.bb.writeInt8(this.space-=1,e)}writeInt16(e){this.bb.writeInt16(this.space-=2,e)}writeInt32(e){this.bb.writeInt32(this.space-=4,e)}writeInt64(e){this.bb.writeInt64(this.space-=8,e)}writeFloat32(e){this.bb.writeFloat32(this.space-=4,e)}writeFloat64(e){this.bb.writeFloat64(this.space-=8,e)}addInt8(e){this.prep(1,0),this.writeInt8(e)}addInt16(e){this.prep(2,0),this.writeInt16(e)}addInt32(e){this.prep(4,0),this.writeInt32(e)}addInt64(e){this.prep(8,0),this.writeInt64(e)}addFloat32(e){this.prep(4,0),this.writeFloat32(e)}addFloat64(e){this.prep(8,0),this.writeFloat64(e)}addFieldInt8(e,n,i){(this.force_defaults||n!=i)&&(this.addInt8(n),this.slot(e))}addFieldInt16(e,n,i){(this.force_defaults||n!=i)&&(this.addInt16(n),this.slot(e))}addFieldInt32(e,n,i){(this.force_defaults||n!=i)&&(this.addInt32(n),this.slot(e))}addFieldInt64(e,n,i){(this.force_defaults||!n.equals(i))&&(this.addInt64(n),this.slot(e))}addFieldFloat32(e,n,i){(this.force_defaults||n!=i)&&(this.addFloat32(n),this.slot(e))}addFieldFloat64(e,n,i){(this.force_defaults||n!=i)&&(this.addFloat64(n),this.slot(e))}addFieldOffset(e,n,i){(this.force_defaults||n!=i)&&(this.addOffset(n),this.slot(e))}addFieldStruct(e,n,i){n!=i&&(this.nested(n),this.slot(e))}nested(e){if(e!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(e){this.vtable!==null&&(this.vtable[e]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(e){const n=e.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const i=n<<1,s=Vr.allocate(i);return s.setPosition(i-n),s.bytes().set(e.bytes(),i-n),s}addOffset(e){this.prep(no,0),this.writeInt32(this.offset()-e+no)}startObject(e){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=e;for(let n=0;n<e;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const e=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const i=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?e-this.vtable[n]:0);const s=2;this.addInt16(e-this.object_start);const o=(i+s)*cx;this.addInt16(o);let c=0;const d=this.space;e:for(n=0;n<this.vtables.length;n++){const f=this.bb.capacity()-this.vtables[n];if(o==this.bb.readInt16(f)){for(let u=cx;u<o;u+=cx)if(this.bb.readInt16(d+u)!=this.bb.readInt16(f+u))continue e;c=this.vtables[n];break}}return c?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,c-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e}finish(e,n,i){const s=i?Ge:0;if(n){const o=n;if(this.prep(this.minalign,no+kl+s),o.length!=kl)throw new Error("FlatBuffers: file identifier must be length "+kl);for(let c=kl-1;c>=0;c--)this.writeInt8(o.charCodeAt(c))}this.prep(this.minalign,no+s),this.addOffset(e),s&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(e,n){this.finish(e,n,!0)}requiredField(e,n){const i=this.bb.capacity()-e,s=i-this.bb.readInt32(i);if(!(this.bb.readInt16(s+n)!=0))throw new Error("FlatBuffers: field "+n+" must be set")}startVector(e,n,i){this.notNested(),this.vector_num_elems=n,this.prep(no,e*n),this.prep(i,e*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(e){if(!e)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(e))return this.string_maps.get(e);const n=this.createString(e);return this.string_maps.set(e,n),n}createString(e){if(!e)return 0;let n;if(e instanceof Uint8Array)n=e;else{n=[];let i=0;for(;i<e.length;){let s;const o=e.charCodeAt(i++);if(o<55296||o>=56320)s=o;else{const c=e.charCodeAt(i++);s=(o<<10)+c+(65536-(55296<<10)-56320)}s<128?n.push(s):(s<2048?n.push(s>>6&31|192):(s<65536?n.push(s>>12&15|224):n.push(s>>18&7|240,s>>12&63|128),n.push(s>>6&63|128)),n.push(s&63|128))}}this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let i=0,s=this.space,o=this.bb.bytes();i<n.length;i++)o[s++]=n[i];return this.endVector()}createLong(e,n){return hs.create(e,n)}createObjectOffset(e){return e===null?0:typeof e=="string"?this.createString(e):e.pack(this)}createObjectOffsetList(e){const n=[];for(let i=0;i<e.length;++i){const s=e[i];if(s!==null)n.push(this.createObjectOffset(s));else throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(e,n){return n(this,e.length),this.createObjectOffsetList(e),this.endVector()}}class Kn{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsKeyValue(e,n){return(n||new Kn).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsKeyValue(e,n){return e.setPosition(e.position()+Ge),(n||new Kn).__init(e.readInt32(e.position())+e.position(),e)}key(e){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,e):null}value(e){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,e):null}static startKeyValue(e){e.startObject(2)}static addKey(e,n){e.addFieldOffset(0,n,0)}static addValue(e,n){e.addFieldOffset(1,n,0)}static endKeyValue(e){return e.endObject()}static createKeyValue(e,n,i){return Kn.startKeyValue(e),Kn.addKey(e,n),Kn.addValue(e,i),Kn.endKeyValue(e)}}var cp;(function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"})(cp||(cp={}));var dp;(function(t){t[t.Little=0]="Little",t[t.Big=1]="Big"})(dp||(dp={}));var sT;(function(t){t[t.DenseArray=0]="DenseArray"})(sT||(sT={}));class lr{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsInt(e,n){return(n||new lr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInt(e,n){return e.setPosition(e.position()+Ge),(n||new lr).__init(e.readInt32(e.position())+e.position(),e)}bitWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}isSigned(){const e=this.bb.__offset(this.bb_pos,6);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startInt(e){e.startObject(2)}static addBitWidth(e,n){e.addFieldInt32(0,n,0)}static addIsSigned(e,n){e.addFieldInt8(1,+n,0)}static endInt(e){return e.endObject()}static createInt(e,n,i){return lr.startInt(e),lr.addBitWidth(e,n),lr.addIsSigned(e,i),lr.endInt(e)}}class Il{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDictionaryEncoding(e,n){return(n||new Il).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryEncoding(e,n){return e.setPosition(e.position()+Ge),(n||new Il).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}indexType(e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new lr).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}dictionaryKind(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt16(this.bb_pos+e):sT.DenseArray}static startDictionaryEncoding(e){e.startObject(4)}static addId(e,n){e.addFieldInt64(0,n,e.createLong(0,0))}static addIndexType(e,n){e.addFieldOffset(1,n,0)}static addIsOrdered(e,n){e.addFieldInt8(2,+n,0)}static addDictionaryKind(e,n){e.addFieldInt16(3,n,sT.DenseArray)}static endDictionaryEncoding(e){return e.endObject()}}class vf{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsBinary(e,n){return(n||new vf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBinary(e,n){return e.setPosition(e.position()+Ge),(n||new vf).__init(e.readInt32(e.position())+e.position(),e)}static startBinary(e){e.startObject(0)}static endBinary(e){return e.endObject()}static createBinary(e){return vf.startBinary(e),vf.endBinary(e)}}class Ef{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsBool(e,n){return(n||new Ef).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBool(e,n){return e.setPosition(e.position()+Ge),(n||new Ef).__init(e.readInt32(e.position())+e.position(),e)}static startBool(e){e.startObject(0)}static endBool(e){return e.endObject()}static createBool(e){return Ef.startBool(e),Ef.endBool(e)}}var rT;(function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"})(rT||(rT={}));class io{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDate(e,n){return(n||new io).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDate(e,n){return e.setPosition(e.position()+Ge),(n||new io).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):rT.MILLISECOND}static startDate(e){e.startObject(1)}static addUnit(e,n){e.addFieldInt16(0,n,rT.MILLISECOND)}static endDate(e){return e.endObject()}static createDate(e,n){return io.startDate(e),io.addUnit(e,n),io.endDate(e)}}class Es{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDecimal(e,n){return(n||new Es).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDecimal(e,n){return e.setPosition(e.position()+Ge),(n||new Es).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}scale(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0}bitWidth(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):128}static startDecimal(e){e.startObject(3)}static addPrecision(e,n){e.addFieldInt32(0,n,0)}static addScale(e,n){e.addFieldInt32(1,n,0)}static addBitWidth(e,n){e.addFieldInt32(2,n,128)}static endDecimal(e){return e.endObject()}static createDecimal(e,n,i,s){return Es.startDecimal(e),Es.addPrecision(e,n),Es.addScale(e,i),Es.addBitWidth(e,s),Es.endDecimal(e)}}var fp;(function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"})(fp||(fp={}));class so{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFixedSizeBinary(e,n){return(n||new so).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeBinary(e,n){return e.setPosition(e.position()+Ge),(n||new so).__init(e.readInt32(e.position())+e.position(),e)}byteWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeBinary(e){e.startObject(1)}static addByteWidth(e,n){e.addFieldInt32(0,n,0)}static endFixedSizeBinary(e){return e.endObject()}static createFixedSizeBinary(e,n){return so.startFixedSizeBinary(e),so.addByteWidth(e,n),so.endFixedSizeBinary(e)}}class ro{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFixedSizeList(e,n){return(n||new ro).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeList(e,n){return e.setPosition(e.position()+Ge),(n||new ro).__init(e.readInt32(e.position())+e.position(),e)}listSize(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeList(e){e.startObject(1)}static addListSize(e,n){e.addFieldInt32(0,n,0)}static endFixedSizeList(e){return e.endObject()}static createFixedSizeList(e,n){return ro.startFixedSizeList(e),ro.addListSize(e,n),ro.endFixedSizeList(e)}}var aT;(function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"})(aT||(aT={}));class ao{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFloatingPoint(e,n){return(n||new ao).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFloatingPoint(e,n){return e.setPosition(e.position()+Ge),(n||new ao).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):aT.HALF}static startFloatingPoint(e){e.startObject(1)}static addPrecision(e,n){e.addFieldInt16(0,n,aT.HALF)}static endFloatingPoint(e){return e.endObject()}static createFloatingPoint(e,n){return ao.startFloatingPoint(e),ao.addPrecision(e,n),ao.endFloatingPoint(e)}}var oT;(function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(oT||(oT={}));class oo{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsInterval(e,n){return(n||new oo).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInterval(e,n){return e.setPosition(e.position()+Ge),(n||new oo).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):oT.YEAR_MONTH}static startInterval(e){e.startObject(1)}static addUnit(e,n){e.addFieldInt16(0,n,oT.YEAR_MONTH)}static endInterval(e){return e.endObject()}static createInterval(e,n){return oo.startInterval(e),oo.addUnit(e,n),oo.endInterval(e)}}class Sf{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsList(e,n){return(n||new Sf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsList(e,n){return e.setPosition(e.position()+Ge),(n||new Sf).__init(e.readInt32(e.position())+e.position(),e)}static startList(e){e.startObject(0)}static endList(e){return e.endObject()}static createList(e){return Sf.startList(e),Sf.endList(e)}}class lo{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsMap(e,n){return(n||new lo).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMap(e,n){return e.setPosition(e.position()+Ge),(n||new lo).__init(e.readInt32(e.position())+e.position(),e)}keysSorted(){const e=this.bb.__offset(this.bb_pos,4);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startMap(e){e.startObject(1)}static addKeysSorted(e,n){e.addFieldInt8(0,+n,0)}static endMap(e){return e.endObject()}static createMap(e,n){return lo.startMap(e),lo.addKeysSorted(e,n),lo.endMap(e)}}class xf{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsNull(e,n){return(n||new xf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsNull(e,n){return e.setPosition(e.position()+Ge),(n||new xf).__init(e.readInt32(e.position())+e.position(),e)}static startNull(e){e.startObject(0)}static endNull(e){return e.endObject()}static createNull(e){return xf.startNull(e),xf.endNull(e)}}class Bf{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsStruct_(e,n){return(n||new Bf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsStruct_(e,n){return e.setPosition(e.position()+Ge),(n||new Bf).__init(e.readInt32(e.position())+e.position(),e)}static startStruct_(e){e.startObject(0)}static endStruct_(e){return e.endObject()}static createStruct_(e){return Bf.startStruct_(e),Bf.endStruct_(e)}}class Or{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsTime(e,n){return(n||new Or).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTime(e,n){return e.setPosition(e.position()+Ge),(n||new Or).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):fp.MILLISECOND}bitWidth(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):32}static startTime(e){e.startObject(2)}static addUnit(e,n){e.addFieldInt16(0,n,fp.MILLISECOND)}static addBitWidth(e,n){e.addFieldInt32(1,n,32)}static endTime(e){return e.endObject()}static createTime(e,n,i){return Or.startTime(e),Or.addUnit(e,n),Or.addBitWidth(e,i),Or.endTime(e)}}class Mr{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsTimestamp(e,n){return(n||new Mr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTimestamp(e,n){return e.setPosition(e.position()+Ge),(n||new Mr).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):fp.SECOND}timezone(e){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,e):null}static startTimestamp(e){e.startObject(2)}static addUnit(e,n){e.addFieldInt16(0,n,fp.SECOND)}static addTimezone(e,n){e.addFieldOffset(1,n,0)}static endTimestamp(e){return e.endObject()}static createTimestamp(e,n,i){return Mr.startTimestamp(e),Mr.addUnit(e,n),Mr.addTimezone(e,i),Mr.endTimestamp(e)}}var lT;(function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"})(lT||(lT={}));class Bs{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsUnion(e,n){return(n||new Bs).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUnion(e,n){return e.setPosition(e.position()+Ge),(n||new Bs).__init(e.readInt32(e.position())+e.position(),e)}mode(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):lT.Sparse}typeIds(e){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+e*4):0}typeIdsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}typeIdsArray(){const e=this.bb.__offset(this.bb_pos,6);return e?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}static startUnion(e){e.startObject(2)}static addMode(e,n){e.addFieldInt16(0,n,lT.Sparse)}static addTypeIds(e,n){e.addFieldOffset(1,n,0)}static createTypeIdsVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addInt32(n[i]);return e.endVector()}static startTypeIdsVector(e,n){e.startVector(4,n,4)}static endUnion(e){return e.endObject()}static createUnion(e,n,i){return Bs.startUnion(e),Bs.addMode(e,n),Bs.addTypeIds(e,i),Bs.endUnion(e)}}class kf{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsUtf8(e,n){return(n||new kf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUtf8(e,n){return e.setPosition(e.position()+Ge),(n||new kf).__init(e.readInt32(e.position())+e.position(),e)}static startUtf8(e){e.startObject(0)}static endUtf8(e){return e.endObject()}static createUtf8(e){return kf.startUtf8(e),kf.endUtf8(e)}}var Et;(function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.FloatingPoint=3]="FloatingPoint",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct_=13]="Struct_",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Duration=18]="Duration",t[t.LargeBinary=19]="LargeBinary",t[t.LargeUtf8=20]="LargeUtf8",t[t.LargeList=21]="LargeList"})(Et||(Et={}));class Ci{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsField(e,n){return(n||new Ci).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsField(e,n){return e.setPosition(e.position()+Ge),(n||new Ci).__init(e.readInt32(e.position())+e.position(),e)}name(e){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,e):null}nullable(){const e=this.bb.__offset(this.bb_pos,6);return e?!!this.bb.readInt8(this.bb_pos+e):!1}typeType(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):Et.NONE}type(e){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(e,this.bb_pos+n):null}dictionary(e){const n=this.bb.__offset(this.bb_pos,12);return n?(e||new Il).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(e,n){const i=this.bb.__offset(this.bb_pos,14);return i?(n||new Ci).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}childrenLength(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,n){const i=this.bb.__offset(this.bb_pos,16);return i?(n||new Kn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__vector_len(this.bb_pos+e):0}static startField(e){e.startObject(7)}static addName(e,n){e.addFieldOffset(0,n,0)}static addNullable(e,n){e.addFieldInt8(1,+n,0)}static addTypeType(e,n){e.addFieldInt8(2,n,Et.NONE)}static addType(e,n){e.addFieldOffset(3,n,0)}static addDictionary(e,n){e.addFieldOffset(4,n,0)}static addChildren(e,n){e.addFieldOffset(5,n,0)}static createChildrenVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addOffset(n[i]);return e.endVector()}static startChildrenVector(e,n){e.startVector(4,n,4)}static addCustomMetadata(e,n){e.addFieldOffset(6,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addOffset(n[i]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static endField(e){return e.endObject()}}class Wn{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsSchema(e,n){return(n||new Wn).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSchema(e,n){return e.setPosition(e.position()+Ge),(n||new Wn).__init(e.readInt32(e.position())+e.position(),e)}endianness(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):dp.Little}fields(e,n){const i=this.bb.__offset(this.bb_pos,6);return i?(n||new Ci).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}fieldsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new Kn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}features(e){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+e*8):this.bb.createLong(0,0)}featuresLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}static startSchema(e){e.startObject(4)}static addEndianness(e,n){e.addFieldInt16(0,n,dp.Little)}static addFields(e,n){e.addFieldOffset(1,n,0)}static createFieldsVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addOffset(n[i]);return e.endVector()}static startFieldsVector(e,n){e.startVector(4,n,4)}static addCustomMetadata(e,n){e.addFieldOffset(2,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addOffset(n[i]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static addFeatures(e,n){e.addFieldOffset(3,n,0)}static createFeaturesVector(e,n){e.startVector(8,n.length,8);for(let i=n.length-1;i>=0;i--)e.addInt64(n[i]);return e.endVector()}static startFeaturesVector(e,n){e.startVector(8,n,8)}static endSchema(e){return e.endObject()}static finishSchemaBuffer(e,n){e.finish(n)}static finishSizePrefixedSchemaBuffer(e,n){e.finish(n,void 0,!0)}static createSchema(e,n,i,s,o){return Wn.startSchema(e),Wn.addEndianness(e,n),Wn.addFields(e,i),Wn.addCustomMetadata(e,s),Wn.addFeatures(e,o),Wn.endSchema(e)}}class sr{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFooter(e,n){return(n||new sr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFooter(e,n){return e.setPosition(e.position()+Ge),(n||new sr).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):cp.V1}schema(e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new Wn).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(e,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new ik).__init(this.bb.__vector(this.bb_pos+i)+e*24,this.bb):null}dictionariesLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}recordBatches(e,n){const i=this.bb.__offset(this.bb_pos,10);return i?(n||new ik).__init(this.bb.__vector(this.bb_pos+i)+e*24,this.bb):null}recordBatchesLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,n){const i=this.bb.__offset(this.bb_pos,12);return i?(n||new Kn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startFooter(e){e.startObject(5)}static addVersion(e,n){e.addFieldInt16(0,n,cp.V1)}static addSchema(e,n){e.addFieldOffset(1,n,0)}static addDictionaries(e,n){e.addFieldOffset(2,n,0)}static startDictionariesVector(e,n){e.startVector(24,n,8)}static addRecordBatches(e,n){e.addFieldOffset(3,n,0)}static startRecordBatchesVector(e,n){e.startVector(24,n,8)}static addCustomMetadata(e,n){e.addFieldOffset(4,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addOffset(n[i]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static endFooter(e){return e.endObject()}static finishFooterBuffer(e,n){e.finish(n)}static finishSizePrefixedFooterBuffer(e,n){e.finish(n,void 0,!0)}}class qt{constructor(e=[],n,i){this.fields=e||[],this.metadata=n||new Map,i||(i=rk(e)),this.dictionaries=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(e=>e.name)}toString(){return`Schema<{ ${this.fields.map((e,n)=>`${n}: ${e}`).join(", ")} }>`}select(e){const n=new Set(e),i=this.fields.filter(s=>n.has(s.name));return new qt(i,this.metadata)}selectAt(e){const n=e.map(i=>this.fields[i]).filter(Boolean);return new qt(n,this.metadata)}assign(...e){const n=e[0]instanceof qt?e[0]:Array.isArray(e[0])?new qt(e[0]):new qt(e),i=[...this.fields],s=vb(vb(new Map,this.metadata),n.metadata),o=n.fields.filter(d=>{const f=i.findIndex(u=>u.name===d.name);return~f?(i[f]=d.clone({metadata:vb(vb(new Map,i[f].metadata),d.metadata)}))&&!1:!0}),c=rk(o,new Map);return new qt([...i,...o],s,new Map([...this.dictionaries,...c]))}}qt.prototype.fields=null;qt.prototype.metadata=null;qt.prototype.dictionaries=null;class $t{constructor(e,n,i=!1,s){this.name=e,this.type=n,this.nullable=i,this.metadata=s||new Map}static new(...e){let[n,i,s,o]=e;return e[0]&&typeof e[0]=="object"&&({name:n}=e[0],i===void 0&&(i=e[0].type),s===void 0&&(s=e[0].nullable),o===void 0&&(o=e[0].metadata)),new $t(`${n}`,i,s,o)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...e){let[n,i,s,o]=e;return!e[0]||typeof e[0]!="object"?[n=this.name,i=this.type,s=this.nullable,o=this.metadata]=e:{name:n=this.name,type:i=this.type,nullable:s=this.nullable,metadata:o=this.metadata}=e[0],$t.new(n,i,s,o)}}$t.prototype.type=null;$t.prototype.name=null;$t.prototype.nullable=null;$t.prototype.metadata=null;function vb(t,e){return new Map([...t||new Map,...e||new Map])}function rk(t,e=new Map){for(let n=-1,i=t.length;++n<i;){const o=t[n].type;if(Ye.isDictionary(o)){if(!e.has(o.id))e.set(o.id,o.dictionary);else if(e.get(o.id)!==o.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}o.children&&o.children.length>0&&rk(o.children,e)}return e}var jL=hs,wte=sg,bte=Vr;class iy{constructor(e,n=Os.V4,i,s){this.schema=e,this.version=n,i&&(this._recordBatches=i),s&&(this._dictionaryBatches=s)}static decode(e){e=new bte(Nt(e));const n=sr.getRootAsFooter(e),i=qt.decode(n.schema());return new Tte(i,n)}static encode(e){const n=new wte,i=qt.encode(n,e.schema);sr.startRecordBatchesVector(n,e.numRecordBatches);for(const c of[...e.recordBatches()].slice().reverse())Po.encode(n,c);const s=n.endVector();sr.startDictionariesVector(n,e.numDictionaries);for(const c of[...e.dictionaryBatches()].slice().reverse())Po.encode(n,c);const o=n.endVector();return sr.startFooter(n),sr.addSchema(n,i),sr.addVersion(n,Os.V4),sr.addRecordBatches(n,s),sr.addDictionaries(n,o),sr.finishFooterBuffer(n,sr.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let e,n=-1,i=this.numRecordBatches;++n<i;)(e=this.getRecordBatch(n))&&(yield e)}*dictionaryBatches(){for(let e,n=-1,i=this.numDictionaries;++n<i;)(e=this.getDictionaryBatch(n))&&(yield e)}getRecordBatch(e){return e>=0&&e<this.numRecordBatches&&this._recordBatches[e]||null}getDictionaryBatch(e){return e>=0&&e<this.numDictionaries&&this._dictionaryBatches[e]||null}}class Tte extends iy{constructor(e,n){super(e,n.version()),this._footer=n}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(e){if(e>=0&&e<this.numRecordBatches){const n=this._footer.recordBatches(e);if(n)return Po.decode(n)}return null}getDictionaryBatch(e){if(e>=0&&e<this.numDictionaries){const n=this._footer.dictionaries(e);if(n)return Po.decode(n)}return null}}class Po{constructor(e,n,i){this.metaDataLength=e,this.offset=typeof i=="number"?i:i.low,this.bodyLength=typeof n=="number"?n:n.low}static decode(e){return new Po(e.metaDataLength(),e.bodyLength(),e.offset())}static encode(e,n){const{metaDataLength:i}=n,s=new jL(n.offset,0),o=new jL(n.bodyLength,0);return ik.createBlock(e,s,i,o)}}const In=Object.freeze({done:!0,value:void 0});class UL{constructor(e){this._json=e}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class v2{tee(){return this._getDOMStream().tee()}pipe(e,n){return this._getNodeStream().pipe(e,n)}pipeTo(e,n){return this._getDOMStream().pipeTo(e,n)}pipeThrough(e,n){return this._getDOMStream().pipeThrough(e,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class vte extends v2{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(e=>this._closedPromiseResolve=e)}get closed(){return this._closedPromise}cancel(e){return ye(this,void 0,void 0,function*(){yield this.return(e)})}write(e){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(e):this.resolvers.shift().resolve({done:!1,value:e}))}abort(e){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:e}:this.resolvers.shift().reject({done:!0,value:e}))}close(){if(this._closedPromiseResolve){const{resolvers:e}=this;for(;e.length>0;)e.shift().resolve(In);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(e){return or.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,e)}toNodeStream(e){return or.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,e)}throw(e){return ye(this,void 0,void 0,function*(){return yield this.abort(e),In})}return(e){return ye(this,void 0,void 0,function*(){return yield this.close(),In})}read(e){return ye(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return ye(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(...e){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,i)=>{this.resolvers.push({resolve:n,reject:i})}):Promise.resolve(In)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class Uh extends vte{write(e){if((e=Nt(e)).byteLength>0)return super.write(e)}toString(e=!1){return e?ek(this.toUint8Array(!0)):this.toUint8Array(!1).then(ek)}toUint8Array(e=!1){return e?Ca(this._values)[0]:(()=>ye(this,void 0,void 0,function*(){var n,i;const s=[];let o=0;try{for(var c=us(this),d;d=yield c.next(),!d.done;){const f=d.value;s.push(f),o+=f.byteLength}}catch(f){n={error:f}}finally{try{d&&!d.done&&(i=c.return)&&(yield i.call(c))}finally{if(n)throw n.error}}return Ca(s,o)[0]}))()}}class sy{constructor(e){e&&(this.source=new Ete(or.fromIterable(e)))}[Symbol.iterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class sd{constructor(e){e instanceof sd?this.source=e.source:e instanceof Uh?this.source=new Kd(or.fromAsyncIterable(e)):l8(e)?this.source=new Kd(or.fromNodeStream(e)):VF(e)?this.source=new Kd(or.fromDOMStream(e)):o8(e)?this.source=new Kd(or.fromDOMStream(e.body)):ig(e)?this.source=new Kd(or.fromIterable(e)):td(e)?this.source=new Kd(or.fromAsyncIterable(e)):Mu(e)&&(this.source=new Kd(or.fromAsyncIterable(e)))}[Symbol.asyncIterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}get closed(){return this.source.closed}cancel(e){return this.source.cancel(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class Ete{constructor(e){this.source=e}cancel(e){this.return(e)}peek(e){return this.next(e,"peek").value}read(e){return this.next(e,"read").value}next(e,n="read"){return this.source.next({cmd:n,size:e})}throw(e){return Object.create(this.source.throw&&this.source.throw(e)||In)}return(e){return Object.create(this.source.return&&this.source.return(e)||In)}}class Kd{constructor(e){this.source=e,this._closedPromise=new Promise(n=>this._closedPromiseResolve=n)}cancel(e){return ye(this,void 0,void 0,function*(){yield this.return(e)})}get closed(){return this._closedPromise}read(e){return ye(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return ye(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(e,n="read"){return ye(this,void 0,void 0,function*(){return yield this.source.next({cmd:n,size:e})})}throw(e){return ye(this,void 0,void 0,function*(){const n=this.source.throw&&(yield this.source.throw(e))||In;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}return(e){return ye(this,void 0,void 0,function*(){const n=this.source.return&&(yield this.source.return(e))||In;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}}class $L extends sy{constructor(e,n){super(),this.position=0,this.buffer=Nt(e),this.size=typeof n>"u"?this.buffer.byteLength:n}readInt32(e){const{buffer:n,byteOffset:i}=this.readAt(e,4);return new DataView(n,i).getInt32(0,!0)}seek(e){return this.position=Math.min(e,this.size),e<this.size}read(e){const{buffer:n,size:i,position:s}=this;return n&&s<i?(typeof e!="number"&&(e=Number.POSITIVE_INFINITY),this.position=Math.min(i,s+Math.min(i-s,e)),n.subarray(s,this.position)):null}readAt(e,n){const i=this.buffer,s=Math.min(this.size,e+n);return i?i.subarray(e,s):new Uint8Array(n)}close(){this.buffer&&(this.buffer=null)}throw(e){return this.close(),{done:!0,value:e}}return(e){return this.close(),{done:!0,value:e}}}class cT extends sd{constructor(e,n){super(),this.position=0,this._handle=e,typeof n=="number"?this.size=n:this._pending=(()=>ye(this,void 0,void 0,function*(){this.size=(yield e.stat()).size,delete this._pending}))()}readInt32(e){return ye(this,void 0,void 0,function*(){const{buffer:n,byteOffset:i}=yield this.readAt(e,4);return new DataView(n,i).getInt32(0,!0)})}seek(e){return ye(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(e,this.size),e<this.size})}read(e){return ye(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:n,size:i,position:s}=this;if(n&&s<i){typeof e!="number"&&(e=Number.POSITIVE_INFINITY);let o=s,c=0,d=0;const f=Math.min(i,o+Math.min(i-o,e)),u=new Uint8Array(Math.max(0,(this.position=f)-o));for(;(o+=d)<f&&(c+=d)<u.byteLength;)({bytesRead:d}=yield n.read(u,c,u.byteLength-c,o));return u}return null})}readAt(e,n){return ye(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:i,size:s}=this;if(i&&e+n<s){const o=Math.min(s,e+n),c=new Uint8Array(o-e);return(yield i.read(c,0,n,e)).buffer}return new Uint8Array(n)})}close(){return ye(this,void 0,void 0,function*(){const e=this._handle;this._handle=null,e&&(yield e.close())})}throw(e){return ye(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}return(e){return ye(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}}const Ste=1<<16;function Eh(t){return t<0&&(t=4294967295+t+1),`0x${t.toString(16)}`}const up=8,E2=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class S2{constructor(e){this.buffer=e}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(e){const n=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),i=new Uint32Array([e.buffer[1]>>>16,e.buffer[1]&65535,e.buffer[0]>>>16,e.buffer[0]&65535]);let s=n[3]*i[3];this.buffer[0]=s&65535;let o=s>>>16;return s=n[2]*i[3],o+=s,s=n[3]*i[2]>>>0,o+=s,this.buffer[0]+=o<<16,this.buffer[1]=o>>>0<s?Ste:0,this.buffer[1]+=o>>>16,this.buffer[1]+=n[1]*i[3]+n[2]*i[2]+n[3]*i[1],this.buffer[1]+=n[0]*i[3]+n[1]*i[2]+n[2]*i[1]+n[3]*i[0]<<16,this}_plus(e){const n=this.buffer[0]+e.buffer[0]>>>0;this.buffer[1]+=e.buffer[1],n<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=n}lessThan(e){return this.buffer[1]<e.buffer[1]||this.buffer[1]===e.buffer[1]&&this.buffer[0]<e.buffer[0]}equals(e){return this.buffer[1]===e.buffer[1]&&this.buffer[0]==e.buffer[0]}greaterThan(e){return e.lessThan(this)}hex(){return`${Eh(this.buffer[1])} ${Eh(this.buffer[0])}`}}class Jt extends S2{times(e){return this._times(e),this}plus(e){return this._plus(e),this}static from(e,n=new Uint32Array(2)){return Jt.fromString(typeof e=="string"?e:e.toString(),n)}static fromNumber(e,n=new Uint32Array(2)){return Jt.fromString(e.toString(),n)}static fromString(e,n=new Uint32Array(2)){const i=e.length,s=new Jt(n);for(let o=0;o<i;){const c=up<i-o?up:i-o,d=new Jt(new Uint32Array([Number.parseInt(e.slice(o,o+c),10),0])),f=new Jt(new Uint32Array([E2[c],0]));s.times(f),s.plus(d),o+=c}return s}static convertArray(e){const n=new Uint32Array(e.length*2);for(let i=-1,s=e.length;++i<s;)Jt.from(e[i],new Uint32Array(n.buffer,n.byteOffset+2*i*4,2));return n}static multiply(e,n){return new Jt(new Uint32Array(e.buffer)).times(n)}static add(e,n){return new Jt(new Uint32Array(e.buffer)).plus(n)}}class ns extends S2{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(e){return this._times(e),this}plus(e){return this._plus(e),this}lessThan(e){const n=this.buffer[1]<<0,i=e.buffer[1]<<0;return n<i||n===i&&this.buffer[0]<e.buffer[0]}static from(e,n=new Uint32Array(2)){return ns.fromString(typeof e=="string"?e:e.toString(),n)}static fromNumber(e,n=new Uint32Array(2)){return ns.fromString(e.toString(),n)}static fromString(e,n=new Uint32Array(2)){const i=e.startsWith("-"),s=e.length,o=new ns(n);for(let c=i?1:0;c<s;){const d=up<s-c?up:s-c,f=new ns(new Uint32Array([Number.parseInt(e.slice(c,c+d),10),0])),u=new ns(new Uint32Array([E2[d],0]));o.times(u),o.plus(f),c+=d}return i?o.negate():o}static convertArray(e){const n=new Uint32Array(e.length*2);for(let i=-1,s=e.length;++i<s;)ns.from(e[i],new Uint32Array(n.buffer,n.byteOffset+2*i*4,2));return n}static multiply(e,n){return new ns(new Uint32Array(e.buffer)).times(n)}static add(e,n){return new ns(new Uint32Array(e.buffer)).plus(n)}}class ca{constructor(e){this.buffer=e}high(){return new ns(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new ns(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(e){const n=new Jt(new Uint32Array([this.buffer[3],0])),i=new Jt(new Uint32Array([this.buffer[2],0])),s=new Jt(new Uint32Array([this.buffer[1],0])),o=new Jt(new Uint32Array([this.buffer[0],0])),c=new Jt(new Uint32Array([e.buffer[3],0])),d=new Jt(new Uint32Array([e.buffer[2],0])),f=new Jt(new Uint32Array([e.buffer[1],0])),u=new Jt(new Uint32Array([e.buffer[0],0]));let a=Jt.multiply(o,u);this.buffer[0]=a.low();const _=new Jt(new Uint32Array([a.high(),0]));return a=Jt.multiply(s,u),_.plus(a),a=Jt.multiply(o,f),_.plus(a),this.buffer[1]=_.low(),this.buffer[3]=_.lessThan(a)?1:0,this.buffer[2]=_.high(),new Jt(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(Jt.multiply(i,u)).plus(Jt.multiply(s,f)).plus(Jt.multiply(o,d)),this.buffer[3]+=Jt.multiply(n,u).plus(Jt.multiply(i,f)).plus(Jt.multiply(s,d)).plus(Jt.multiply(o,c)).low(),this}plus(e){const n=new Uint32Array(4);return n[3]=this.buffer[3]+e.buffer[3]>>>0,n[2]=this.buffer[2]+e.buffer[2]>>>0,n[1]=this.buffer[1]+e.buffer[1]>>>0,n[0]=this.buffer[0]+e.buffer[0]>>>0,n[0]<this.buffer[0]>>>0&&++n[1],n[1]<this.buffer[1]>>>0&&++n[2],n[2]<this.buffer[2]>>>0&&++n[3],this.buffer[3]=n[3],this.buffer[2]=n[2],this.buffer[1]=n[1],this.buffer[0]=n[0],this}hex(){return`${Eh(this.buffer[3])} ${Eh(this.buffer[2])} ${Eh(this.buffer[1])} ${Eh(this.buffer[0])}`}static multiply(e,n){return new ca(new Uint32Array(e.buffer)).times(n)}static add(e,n){return new ca(new Uint32Array(e.buffer)).plus(n)}static from(e,n=new Uint32Array(4)){return ca.fromString(typeof e=="string"?e:e.toString(),n)}static fromNumber(e,n=new Uint32Array(4)){return ca.fromString(e.toString(),n)}static fromString(e,n=new Uint32Array(4)){const i=e.startsWith("-"),s=e.length,o=new ca(n);for(let c=i?1:0;c<s;){const d=up<s-c?up:s-c,f=new ca(new Uint32Array([Number.parseInt(e.slice(c,c+d),10),0,0,0])),u=new ca(new Uint32Array([E2[d],0,0,0]));o.times(u),o.plus(f),c+=d}return i?o.negate():o}static convertArray(e){const n=new Uint32Array(e.length*4);for(let i=-1,s=e.length;++i<s;)ca.from(e[i],new Uint32Array(n.buffer,n.byteOffset+4*4*i,4));return n}}const xte=Object.freeze(Object.defineProperty({__proto__:null,BaseInt64:S2,Uint64:Jt,Int64:ns,Int128:ca},Symbol.toStringTag,{value:"Module"}));class E$ extends It{constructor(e,n,i,s){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=e,this.nodes=n,this.buffers=i,this.dictionaries=s}visit(e){return super.visit(e instanceof $t?e.type:e)}visitNull(e,{length:n}=this.nextFieldNode()){return Qe({type:e,length:n})}visitBool(e,{length:n,nullCount:i}=this.nextFieldNode()){return Qe({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitInt(e,{length:n,nullCount:i}=this.nextFieldNode()){return Qe({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitFloat(e,{length:n,nullCount:i}=this.nextFieldNode()){return Qe({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitUtf8(e,{length:n,nullCount:i}=this.nextFieldNode()){return Qe({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitBinary(e,{length:n,nullCount:i}=this.nextFieldNode()){return Qe({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitFixedSizeBinary(e,{length:n,nullCount:i}=this.nextFieldNode()){return Qe({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitDate(e,{length:n,nullCount:i}=this.nextFieldNode()){return Qe({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitTimestamp(e,{length:n,nullCount:i}=this.nextFieldNode()){return Qe({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitTime(e,{length:n,nullCount:i}=this.nextFieldNode()){return Qe({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitDecimal(e,{length:n,nullCount:i}=this.nextFieldNode()){return Qe({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitList(e,{length:n,nullCount:i}=this.nextFieldNode()){return Qe({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}visitStruct(e,{length:n,nullCount:i}=this.nextFieldNode()){return Qe({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),children:this.visitMany(e.children)})}visitUnion(e){return e.mode===mi.Sparse?this.visitSparseUnion(e):this.visitDenseUnion(e)}visitDenseUnion(e,{length:n,nullCount:i}=this.nextFieldNode()){return Qe({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),typeIds:this.readTypeIds(e),valueOffsets:this.readOffsets(e),children:this.visitMany(e.children)})}visitSparseUnion(e,{length:n,nullCount:i}=this.nextFieldNode()){return Qe({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),typeIds:this.readTypeIds(e),children:this.visitMany(e.children)})}visitDictionary(e,{length:n,nullCount:i}=this.nextFieldNode()){return Qe({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e.indices),dictionary:this.readDictionary(e)})}visitInterval(e,{length:n,nullCount:i}=this.nextFieldNode()){return Qe({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitFixedSizeList(e,{length:n,nullCount:i}=this.nextFieldNode()){return Qe({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),child:this.visit(e.children[0])})}visitMap(e,{length:n,nullCount:i}=this.nextFieldNode()){return Qe({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(e,n,i=this.nextBufferRange()){return n>0&&this.readData(e,i)||new Uint8Array(0)}readOffsets(e,n){return this.readData(e,n)}readTypeIds(e,n){return this.readData(e,n)}readData(e,{length:n,offset:i}=this.nextBufferRange()){return this.bytes.subarray(i,i+n)}readDictionary(e){return this.dictionaries.get(e.id)}}class Bte extends E${constructor(e,n,i,s){super(new Uint8Array(0),n,i,s),this.sources=e}readNullBitmap(e,n,{offset:i}=this.nextBufferRange()){return n<=0?new Uint8Array(0):ny(this.sources[i])}readOffsets(e,{offset:n}=this.nextBufferRange()){return Ot(Uint8Array,Ot(Int32Array,this.sources[n]))}readTypeIds(e,{offset:n}=this.nextBufferRange()){return Ot(Uint8Array,Ot(e.ArrayType,this.sources[n]))}readData(e,{offset:n}=this.nextBufferRange()){const{sources:i}=this;return Ye.isTimestamp(e)||(Ye.isInt(e)||Ye.isTime(e))&&e.bitWidth===64||Ye.isDate(e)&&e.unit===Us.MILLISECOND?Ot(Uint8Array,ns.convertArray(i[n])):Ye.isDecimal(e)?Ot(Uint8Array,ca.convertArray(i[n])):Ye.isBinary(e)||Ye.isFixedSizeBinary(e)?kte(i[n]):Ye.isBool(e)?ny(i[n]):Ye.isUtf8(e)?F1(i[n].join("")):Ot(Uint8Array,Ot(e.ArrayType,i[n].map(s=>+s)))}}function kte(t){const e=t.join(""),n=new Uint8Array(e.length/2);for(let i=0;i<e.length;i+=2)n[i>>1]=Number.parseInt(e.slice(i,i+2),16);return n}class x2 extends $1{constructor(e){super(e),this._values=new U1(new Uint8Array(0))}get byteLength(){let e=this._pendingLength+this.length*4;return this._offsets&&(e+=this._offsets.byteLength),this._values&&(e+=this._values.byteLength),this._nulls&&(e+=this._nulls.byteLength),e}setValue(e,n){return super.setValue(e,Nt(n))}_flushPending(e,n){const i=this._offsets,s=this._values.reserve(n).buffer;let o=0;for(const[c,d]of e)if(d===void 0)i.set(c,0);else{const f=d.length;s.set(d,o),i.set(c,f),o+=f}}}class S$ extends Qi{constructor(e){super(e),this._values=new T$}setValue(e,n){this._values.set(e,+n)}}class Qy extends Fd{}Qy.prototype._setValue=j8;class B2 extends Qy{}B2.prototype._setValue=s2;class k2 extends Qy{}k2.prototype._setValue=r2;class I2 extends Fd{}I2.prototype._setValue=z8;class x$ extends Qi{constructor({type:e,nullValues:n,dictionaryHashFunction:i}){super({type:new Yl(e.dictionary,e.indices,e.id,e.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=Zf({type:this.type.indices,nullValues:n}),this.dictionary=Zf({type:this.type.dictionary,nullValues:null}),typeof i=="function"&&(this.valueToKey=i)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(e){return this.indices.isValid(e)}setValid(e,n){const i=this.indices;return n=i.setValid(e,n),this.length=i.length,n}setValue(e,n){const i=this._keysToIndices,s=this.valueToKey(n);let o=i[s];return o===void 0&&(i[s]=o=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(e,o)}flush(){const e=this.type,n=this._dictionary,i=this.dictionary.toVector(),s=this.indices.flush().clone(e);return s.dictionary=n?n.concat(i):i,this.finished||(this._dictionaryOffset+=i.length),this._dictionary=s.dictionary,this.clear(),s}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(e){return typeof e=="string"?e:`${e}`}}class F2 extends Fd{}F2.prototype._setValue=D8;class B$ extends Qi{setValue(e,n){const[i]=this.children,s=e*this.stride;for(let o=-1,c=n.length;++o<c;)i.set(s+o,n[o])}addChild(e,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const i=this.children.push(e);return this.type=new ap(this.type.listSize,new $t(n,e.type,!0)),i}}class Zy extends Fd{setValue(e,n){this._values.set(e,n)}}class k$ extends Zy{setValue(e,n){super.setValue(e,t2(n))}}class I$ extends Zy{}class F$ extends Zy{}class em extends Fd{}em.prototype._setValue=V8;class O2 extends em{}O2.prototype._setValue=p2;class M2 extends em{}M2.prototype._setValue=g2;class el extends Fd{setValue(e,n){this._values.set(e,n)}}class O$ extends el{}class M$ extends el{}class A$ extends el{}class N$ extends el{}class C$ extends el{}class R$ extends el{}class L$ extends el{}class P$ extends el{}class D$ extends $1{constructor(e){super(e),this._offsets=new v$}addChild(e,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=e,this.type=new Qf(new $t(n,e.type,!0)),this.numChildren-1}_flushPending(e){const n=this._offsets,[i]=this.children;for(const[s,o]of e)if(typeof o>"u")n.set(s,0);else{const c=o.length,d=n.set(s,c).buffer[s];for(let f=-1;++f<c;)i.set(d+f,o[f])}}}class j$ extends $1{set(e,n){return super.set(e,n)}setValue(e,n){const i=n instanceof Map?n:new Map(Object.entries(n)),s=this._pending||(this._pending=new Map),o=s.get(e);o&&(this._pendingLength-=o.size),this._pendingLength+=i.size,s.set(e,i)}addChild(e,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=e,this.type=new op(new $t(n,e.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(e){const n=this._offsets,[i]=this.children;for(const[s,o]of e)if(o===void 0)n.set(s,0);else{let{[s]:c,[s+1]:d}=n.set(s,o.size).buffer;for(const f of o.entries())if(i.set(c,f),++c>=d)break}}}class U$ extends Qi{setValue(e,n){}setValid(e,n){return this.length=Math.max(e+1,this.length),n}}class $$ extends Qi{setValue(e,n){const{children:i,type:s}=this;switch(Array.isArray(n)||n.constructor){case!0:return s.children.forEach((o,c)=>i[c].set(e,n[c]));case Map:return s.children.forEach((o,c)=>i[c].set(e,n.get(o.name)));default:return s.children.forEach((o,c)=>i[c].set(e,n[o.name]))}}setValid(e,n){return super.setValid(e,n)||this.children.forEach(i=>i.setValid(e,n)),n}addChild(e,n=`${this.numChildren}`){const i=this.children.push(e);return this.type=new fi([...this.type.children,new $t(n,e.type,!0)]),i}}class Nu extends Fd{}Nu.prototype._setValue=U8;class A2 extends Nu{}A2.prototype._setValue=a2;class N2 extends Nu{}N2.prototype._setValue=o2;class C2 extends Nu{}C2.prototype._setValue=l2;class R2 extends Nu{}R2.prototype._setValue=c2;class Cu extends Fd{}Cu.prototype._setValue=$8;class L2 extends Cu{}L2.prototype._setValue=d2;class P2 extends Cu{}P2.prototype._setValue=f2;class D2 extends Cu{}D2.prototype._setValue=u2;class j2 extends Cu{}j2.prototype._setValue=h2;class z1 extends Qi{constructor(e){super(e),this._typeIds=new Jy(new Int8Array(0),1),typeof e.valueToChildTypeId=="function"&&(this._valueToChildTypeId=e.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(e,n){return this.set(this.length,e,n)}set(e,n,i){return i===void 0&&(i=this._valueToChildTypeId(this,n,e)),this.setValid(e,this.isValid(n))&&this.setValue(e,n,i),this}setValue(e,n,i){this._typeIds.set(e,i);const s=this.type.typeIdToChildIndex[i],o=this.children[s];o==null||o.set(e,n)}addChild(e,n=`${this.children.length}`){const i=this.children.push(e),{type:{children:s,mode:o,typeIds:c}}=this,d=[...s,new $t(n,e.type)];return this.type=new id(o,[...c,i],d),i}_valueToChildTypeId(e,n,i){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class z$ extends z1{}class q$ extends z1{constructor(e){super(e),this._offsets=new Jy(new Int32Array(0))}setValue(e,n,i){const s=this._typeIds.set(e,i).buffer[e],o=this.getChildAt(this.type.typeIdToChildIndex[s]),c=this._offsets.set(e,o.length).buffer[e];o==null||o.set(c,n)}}class U2 extends $1{constructor(e){super(e),this._values=new U1(new Uint8Array(0))}get byteLength(){let e=this._pendingLength+this.length*4;return this._offsets&&(e+=this._offsets.byteLength),this._values&&(e+=this._values.byteLength),this._nulls&&(e+=this._nulls.byteLength),e}setValue(e,n){return super.setValue(e,F1(n))}_flushPending(e,n){}}U2.prototype._flushPending=x2.prototype._flushPending;class Ite extends It{visitNull(){return U$}visitBool(){return S$}visitInt(){return el}visitInt8(){return O$}visitInt16(){return M$}visitInt32(){return A$}visitInt64(){return N$}visitUint8(){return C$}visitUint16(){return R$}visitUint32(){return L$}visitUint64(){return P$}visitFloat(){return Zy}visitFloat16(){return k$}visitFloat32(){return I$}visitFloat64(){return F$}visitUtf8(){return U2}visitBinary(){return x2}visitFixedSizeBinary(){return F2}visitDate(){return Qy}visitDateDay(){return B2}visitDateMillisecond(){return k2}visitTimestamp(){return Nu}visitTimestampSecond(){return A2}visitTimestampMillisecond(){return N2}visitTimestampMicrosecond(){return C2}visitTimestampNanosecond(){return R2}visitTime(){return Cu}visitTimeSecond(){return L2}visitTimeMillisecond(){return P2}visitTimeMicrosecond(){return D2}visitTimeNanosecond(){return j2}visitDecimal(){return I2}visitList(){return D$}visitStruct(){return $$}visitUnion(){return z1}visitDenseUnion(){return q$}visitSparseUnion(){return z$}visitDictionary(){return x$}visitInterval(){return em}visitIntervalDayTime(){return O2}visitIntervalYearMonth(){return M2}visitFixedSizeList(){return B$}visitMap(){return j$}}const Fte=new Ite;class rt extends It{compareSchemas(e,n){return e===n||n instanceof e.constructor&&this.compareManyFields(e.fields,n.fields)}compareManyFields(e,n){return e===n||Array.isArray(e)&&Array.isArray(n)&&e.length===n.length&&e.every((i,s)=>this.compareFields(i,n[s]))}compareFields(e,n){return e===n||n instanceof e.constructor&&e.name===n.name&&e.nullable===n.nullable&&this.visit(e.type,n.type)}}function Js(t,e){return e instanceof t.constructor}function tm(t,e){return t===e||Js(t,e)}function tc(t,e){return t===e||Js(t,e)&&t.bitWidth===e.bitWidth&&t.isSigned===e.isSigned}function q1(t,e){return t===e||Js(t,e)&&t.precision===e.precision}function Ote(t,e){return t===e||Js(t,e)&&t.byteWidth===e.byteWidth}function $2(t,e){return t===e||Js(t,e)&&t.unit===e.unit}function nm(t,e){return t===e||Js(t,e)&&t.unit===e.unit&&t.timezone===e.timezone}function im(t,e){return t===e||Js(t,e)&&t.unit===e.unit&&t.bitWidth===e.bitWidth}function Mte(t,e){return t===e||Js(t,e)&&t.children.length===e.children.length&&Do.compareManyFields(t.children,e.children)}function Ate(t,e){return t===e||Js(t,e)&&t.children.length===e.children.length&&Do.compareManyFields(t.children,e.children)}function z2(t,e){return t===e||Js(t,e)&&t.mode===e.mode&&t.typeIds.every((n,i)=>n===e.typeIds[i])&&Do.compareManyFields(t.children,e.children)}function Nte(t,e){return t===e||Js(t,e)&&t.id===e.id&&t.isOrdered===e.isOrdered&&Do.visit(t.indices,e.indices)&&Do.visit(t.dictionary,e.dictionary)}function q2(t,e){return t===e||Js(t,e)&&t.unit===e.unit}function Cte(t,e){return t===e||Js(t,e)&&t.listSize===e.listSize&&t.children.length===e.children.length&&Do.compareManyFields(t.children,e.children)}function Rte(t,e){return t===e||Js(t,e)&&t.keysSorted===e.keysSorted&&t.children.length===e.children.length&&Do.compareManyFields(t.children,e.children)}rt.prototype.visitNull=tm;rt.prototype.visitBool=tm;rt.prototype.visitInt=tc;rt.prototype.visitInt8=tc;rt.prototype.visitInt16=tc;rt.prototype.visitInt32=tc;rt.prototype.visitInt64=tc;rt.prototype.visitUint8=tc;rt.prototype.visitUint16=tc;rt.prototype.visitUint32=tc;rt.prototype.visitUint64=tc;rt.prototype.visitFloat=q1;rt.prototype.visitFloat16=q1;rt.prototype.visitFloat32=q1;rt.prototype.visitFloat64=q1;rt.prototype.visitUtf8=tm;rt.prototype.visitBinary=tm;rt.prototype.visitFixedSizeBinary=Ote;rt.prototype.visitDate=$2;rt.prototype.visitDateDay=$2;rt.prototype.visitDateMillisecond=$2;rt.prototype.visitTimestamp=nm;rt.prototype.visitTimestampSecond=nm;rt.prototype.visitTimestampMillisecond=nm;rt.prototype.visitTimestampMicrosecond=nm;rt.prototype.visitTimestampNanosecond=nm;rt.prototype.visitTime=im;rt.prototype.visitTimeSecond=im;rt.prototype.visitTimeMillisecond=im;rt.prototype.visitTimeMicrosecond=im;rt.prototype.visitTimeNanosecond=im;rt.prototype.visitDecimal=tm;rt.prototype.visitList=Mte;rt.prototype.visitStruct=Ate;rt.prototype.visitUnion=z2;rt.prototype.visitDenseUnion=z2;rt.prototype.visitSparseUnion=z2;rt.prototype.visitDictionary=Nte;rt.prototype.visitInterval=q2;rt.prototype.visitIntervalDayTime=q2;rt.prototype.visitIntervalYearMonth=q2;rt.prototype.visitFixedSizeList=Cte;rt.prototype.visitMap=Rte;const Do=new rt;function dT(t,e){return Do.compareSchemas(t,e)}function Lte(t,e){return Do.compareFields(t,e)}function G$(t,e){return Do.visit(t,e)}function Zf(t){const e=t.type,n=new(Fte.getVisitFn(e)())(t);if(e.children&&e.children.length>0){const i=t.children||[],s={nullValues:t.nullValues},o=Array.isArray(i)?(c,d)=>i[d]||s:({name:c})=>i[c]||s;for(const[c,d]of e.children.entries()){const{type:f}=d,u=o(d,c);n.children.push(Zf(Object.assign(Object.assign({},u),{type:f})))}}return n}function G2(t,e){if(t instanceof Qt||t instanceof We||t.type instanceof Ye||ArrayBuffer.isView(t))return j1(t);const n={type:e!=null?e:w0(t),nullValues:[null]},i=[...V$(n)(t)],s=i.length===1?i[0]:i.reduce((o,c)=>o.concat(c));return Ye.isDictionary(s.type)?s.memoize():s}function Pte(t){const e=G2(t),n=new Nn(new qt(e.type.children),e.data[0]);return new Jn(n)}function w0(t){if(t.length===0)return new Co;let e=0,n=0,i=0,s=0,o=0,c=0,d=0,f=0;for(const u of t){if(u==null){++e;continue}switch(typeof u){case"bigint":++c;continue;case"boolean":++d;continue;case"number":++s;continue;case"string":++o;continue;case"object":Array.isArray(u)?++n:Object.prototype.toString.call(u)==="[object Date]"?++f:++i;continue}throw new TypeError("Unable to infer Vector type from input values, explicit type declaration expected")}if(s+e===t.length)return new C1;if(o+e===t.length)return new Yl(new sp,new nd);if(c+e===t.length)return new N1;if(d+e===t.length)return new rp;if(f+e===t.length)return new C8;if(n+e===t.length){const u=t,a=w0(u[u.findIndex(_=>_!=null)]);if(u.every(_=>_==null||G$(a,w0(_))))return new Qf(new $t("",a,!0))}else if(i+e===t.length){const u=new Map;for(const a of t)for(const _ of Object.keys(a))!u.has(_)&&a[_]!=null&&u.set(_,new $t(_,w0([a[_]]),!0));return new fi([...u.values()])}throw new TypeError("Unable to infer Vector type from input values, explicit type declaration expected")}function V$(t){const{["queueingStrategy"]:e="count"}=t,{["highWaterMark"]:n=e!=="bytes"?Number.POSITIVE_INFINITY:Math.pow(2,14)}=t,i=e!=="bytes"?"length":"byteLength";return function*(s){let o=0;const c=Zf(t);for(const d of s)c.append(d)[i]>=n&&++o&&(yield c.toVector());(c.finish().length>0||o===0)&&(yield c.toVector())}}function Dte(t){const{["queueingStrategy"]:e="count"}=t,{["highWaterMark"]:n=e!=="bytes"?Number.POSITIVE_INFINITY:Math.pow(2,14)}=t,i=e!=="bytes"?"length":"byteLength";return function(s){return Pn(this,arguments,function*(){var o,c;let d=0;const f=Zf(t);try{for(var u=us(s),a;a=yield Be(u.next()),!a.done;){const _=a.value;f.append(_)[i]>=n&&++d&&(yield yield Be(f.toVector()))}}catch(_){o={error:_}}finally{try{a&&!a.done&&(c=u.return)&&(yield Be(c.call(u)))}finally{if(o)throw o.error}}(f.finish().length>0||d===0)&&(yield yield Be(f.toVector()))})}}function dx(t,e){return jte(t,e.map(n=>n.data.concat()))}function jte(t,e){const n=[...t.fields],i=[],s={numBatches:e.reduce((_,w)=>Math.max(_,w.length),0)};let o=0,c=0,d=-1;const f=e.length;let u,a=[];for(;s.numBatches-- >0;){for(c=Number.POSITIVE_INFINITY,d=-1;++d<f;)a[d]=u=e[d].shift(),c=Math.min(c,u?u.length:c);Number.isFinite(c)&&(a=Ute(n,c,a,e,s),c>0&&(i[o++]=Qe({type:new fi(n),length:c,nullCount:0,children:a.slice()})))}return[t=t.assign(n),i.map(_=>new Nn(t,_))]}function Ute(t,e,n,i,s){var o;const c=(e+63&-64)>>3;for(let d=-1,f=i.length;++d<f;){const u=n[d],a=u==null?void 0:u.length;if(a>=e)a===e?n[d]=u:(n[d]=u.slice(0,e),s.numBatches=Math.max(s.numBatches,i[d].unshift(u.slice(e,a-e))));else{const _=t[d];t[d]=_.clone({nullable:!0}),n[d]=(o=u==null?void 0:u._changeLengthAndBackfillNullBitmap(e))!==null&&o!==void 0?o:Qe({type:_.type,length:e,nullCount:e,nullBitmap:new Uint8Array(c)})}}return n}var W$;class Jn{constructor(...e){var n,i;if(e.length===0)return this.batches=[],this.schema=new qt([]),this._offsets=[0],this;let s,o;e[0]instanceof qt&&(s=e.shift()),e[e.length-1]instanceof Uint32Array&&(o=e.pop());const c=f=>{if(f){if(f instanceof Nn)return[f];if(f instanceof Jn)return f.batches;if(f instanceof Qt){if(f.type instanceof fi)return[new Nn(new qt(f.type.children),f)]}else{if(Array.isArray(f))return f.flatMap(u=>c(u));if(typeof f[Symbol.iterator]=="function")return[...f].flatMap(u=>c(u));if(typeof f=="object"){const u=Object.keys(f),a=u.map(m=>new We([f[m]])),_=new qt(u.map((m,l)=>new $t(String(m),a[l].type))),[,w]=dx(_,a);return w.length===0?[new Nn(f)]:w}}}return[]},d=e.flatMap(f=>c(f));if(s=(i=s!=null?s:(n=d[0])===null||n===void 0?void 0:n.schema)!==null&&i!==void 0?i:new qt([]),!(s instanceof qt))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const f of d){if(!(f instanceof Nn))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!dT(s,f.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=s,this.batches=d,this._offsets=o!=null?o:f$(this.data)}get data(){return this.batches.map(({data:e})=>e)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((e,n)=>e+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=d$(this.data)),this._nullCount}isValid(e){return!1}get(e){return null}set(e,n){}indexOf(e,n){return-1}getByteLength(e){return 0}[Symbol.iterator](){return this.batches.length>0?T2.visit(new We(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...e){const n=this.schema,i=this.data.concat(e.flatMap(({data:s})=>s));return new Jn(n,i.map(s=>new Nn(n,s)))}slice(e,n){const i=this.schema;[e,n]=y2({length:this.numRows},e,n);const s=u$(this.data,this._offsets,e,n);return new Jn(i,s.map(o=>new Nn(i,o)))}getChild(e){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===e))}getChildAt(e){if(e>-1&&e<this.schema.fields.length){const n=this.data.map(i=>i.children[e]);if(n.length===0){const{type:i}=this.schema.fields[e],s=Qe({type:i,length:0,nullCount:0});n.push(s._changeLengthAndBackfillNullBitmap(this.numRows))}return new We(n)}return null}setChild(e,n){var i;return this.setChildAt((i=this.schema.fields)===null||i===void 0?void 0:i.findIndex(s=>s.name===e),n)}setChildAt(e,n){let i=this.schema,s=[...this.batches];if(e>-1&&e<this.numCols){n||(n=new We([Qe({type:new Co,length:this.numRows})]));const o=i.fields.slice(),c=o[e].clone({type:n.type}),d=this.schema.fields.map((f,u)=>this.getChildAt(u));[o[e],d[e]]=[c,n],[i,s]=dx(i,d)}return new Jn(i,s)}select(e){const n=this.schema.fields.reduce((i,s,o)=>i.set(s.name,o),new Map);return this.selectAt(e.map(i=>n.get(i)).filter(i=>i>-1))}selectAt(e){const n=this.schema.selectAt(e),i=this.batches.map(s=>s.selectAt(e));return new Jn(n,i)}assign(e){const n=this.schema.fields,[i,s]=e.schema.fields.reduce((d,f,u)=>{const[a,_]=d,w=n.findIndex(m=>m.name===f.name);return~w?_[w]=u:a.push(u),d},[[],[]]),o=this.schema.assign(e.schema),c=[...n.map((d,f)=>[f,s[f]]).map(([d,f])=>f===void 0?this.getChildAt(d):e.getChildAt(f)),...i.map(d=>e.getChildAt(d))].filter(Boolean);return new Jn(...dx(o,c))}}W$=Symbol.toStringTag;Jn[W$]=(t=>(t.schema=null,t.batches=[],t._offsets=new Uint32Array([0]),t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,t.isValid=jh(b2),t.get=jh($s.getVisitFn(ne.Struct)),t.set=h$(Gr.getVisitFn(ne.Struct)),t.indexOf=p$(nT.getVisitFn(ne.Struct)),t.getByteLength=jh(Lo.getVisitFn(ne.Struct)),"Table"))(Jn.prototype);function $te(t){const e={},n=Object.entries(t);for(const[i,s]of n)e[i]=j1(s);return new Jn(e)}function zte(t){const e={},n=Object.entries(t);for(const[i,s]of n)e[i]=G2(s);return new Jn(e)}var H$;class Nn{constructor(...e){switch(e.length){case 2:{if([this.schema]=e,!(this.schema instanceof qt))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=Qe({nullCount:0,type:new fi(this.schema.fields),children:this.schema.fields.map(n=>Qe({type:n.type,nullCount:0}))})]=e,!(this.data instanceof Qt))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=zL(this.schema,this.data.children);break}case 1:{const[n]=e,{fields:i,children:s,length:o}=Object.keys(n).reduce((f,u,a)=>(f.children[a]=n[u],f.length=Math.max(f.length,n[u].length),f.fields[a]=$t.new({name:u,type:n[u].type,nullable:!0}),f),{length:0,fields:new Array,children:new Array}),c=new qt(i),d=Qe({type:new fi(i),length:o,children:s,nullCount:0});[this.schema,this.data]=zL(c,d.children,o);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=Y$(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(e){return this.data.getValid(e)}get(e){return $s.visit(this.data,e)}set(e,n){return Gr.visit(this.data,e,n)}indexOf(e,n){return nT.visit(this.data,e,n)}getByteLength(e){return Lo.visit(this.data,e)}[Symbol.iterator](){return T2.visit(new We([this.data]))}toArray(){return[...this]}concat(...e){return new Jn(this.schema,[this,...e])}slice(e,n){const[i]=new We([this.data]).slice(e,n).data;return new Nn(this.schema,i)}getChild(e){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(i=>i.name===e))}getChildAt(e){return e>-1&&e<this.schema.fields.length?new We([this.data.children[e]]):null}setChild(e,n){var i;return this.setChildAt((i=this.schema.fields)===null||i===void 0?void 0:i.findIndex(s=>s.name===e),n)}setChildAt(e,n){let i=this.schema,s=this.data;if(e>-1&&e<this.numCols){n||(n=new We([Qe({type:new Co,length:this.numRows})]));const o=i.fields.slice(),c=s.children.slice(),d=o[e].clone({type:n.type});[o[e],c[e]]=[d,n.data[0]],i=new qt(o,new Map(this.schema.metadata)),s=Qe({type:new fi(o),children:c})}return new Nn(i,s)}select(e){const n=this.schema.select(e),i=new fi(n.fields),s=[];for(const o of e){const c=this.schema.fields.findIndex(d=>d.name===o);~c&&(s[c]=this.data.children[c])}return new Nn(n,Qe({type:i,length:this.numRows,children:s}))}selectAt(e){const n=this.schema.selectAt(e),i=e.map(o=>this.data.children[o]).filter(Boolean),s=Qe({type:new fi(n.fields),length:this.numRows,children:i});return new Nn(n,s)}}H$=Symbol.toStringTag;Nn[H$]=(t=>(t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Nn.prototype);function zL(t,e,n=e.reduce((i,s)=>Math.max(i,s.length),0)){var i;const s=[...t.fields],o=[...e],c=(n+63&-64)>>3;for(const[d,f]of t.fields.entries()){const u=e[d];(!u||u.length!==n)&&(s[d]=f.clone({nullable:!0}),o[d]=(i=u==null?void 0:u._changeLengthAndBackfillNullBitmap(n))!==null&&i!==void 0?i:Qe({type:f.type,length:n,nullCount:n,nullBitmap:new Uint8Array(c)}))}return[t.assign(s),Qe({type:new fi(s),length:n,children:o})]}function Y$(t,e,n=new Map){for(let i=-1,s=t.length;++i<s;){const c=t[i].type,d=e[i];if(Ye.isDictionary(c)){if(!n.has(c.id))d.dictionary&&n.set(c.id,d.dictionary);else if(n.get(c.id)!==d.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}c.children&&c.children.length>0&&Y$(c.children,d.children,n)}return n}class V2 extends Nn{constructor(e){const n=e.fields.map(s=>Qe({type:s.type})),i=Qe({type:new fi(e.fields),nullCount:0,children:n});super(e,i)}}var fT;(function(t){t[t.BUFFER=0]="BUFFER"})(fT||(fT={}));var uT;(function(t){t[t.LZ4_FRAME=0]="LZ4_FRAME",t[t.ZSTD=1]="ZSTD"})(uT||(uT={}));class Ec{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsBodyCompression(e,n){return(n||new Ec).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBodyCompression(e,n){return e.setPosition(e.position()+Ge),(n||new Ec).__init(e.readInt32(e.position())+e.position(),e)}codec(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb_pos+e):uT.LZ4_FRAME}method(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb_pos+e):fT.BUFFER}static startBodyCompression(e){e.startObject(2)}static addCodec(e,n){e.addFieldInt8(0,n,uT.LZ4_FRAME)}static addMethod(e,n){e.addFieldInt8(1,n,fT.BUFFER)}static endBodyCompression(e){return e.endObject()}static createBodyCompression(e,n,i){return Ec.startBodyCompression(e),Ec.addCodec(e,n),Ec.addMethod(e,i),Ec.endBodyCompression(e)}}class X${constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(e,n,i){return e.prep(8,16),e.writeInt64(i),e.writeInt64(n),e.offset()}}class K${constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(e,n,i){return e.prep(8,16),e.writeInt64(i),e.writeInt64(n),e.offset()}}class kr{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsRecordBatch(e,n){return(n||new kr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsRecordBatch(e,n){return e.setPosition(e.position()+Ge),(n||new kr).__init(e.readInt32(e.position())+e.position(),e)}length(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}nodes(e,n){const i=this.bb.__offset(this.bb_pos,6);return i?(n||new K$).__init(this.bb.__vector(this.bb_pos+i)+e*16,this.bb):null}nodesLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}buffers(e,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new X$).__init(this.bb.__vector(this.bb_pos+i)+e*16,this.bb):null}buffersLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}compression(e){const n=this.bb.__offset(this.bb_pos,10);return n?(e||new Ec).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(e){e.startObject(4)}static addLength(e,n){e.addFieldInt64(0,n,e.createLong(0,0))}static addNodes(e,n){e.addFieldOffset(1,n,0)}static startNodesVector(e,n){e.startVector(16,n,8)}static addBuffers(e,n){e.addFieldOffset(2,n,0)}static startBuffersVector(e,n){e.startVector(16,n,8)}static addCompression(e,n){e.addFieldOffset(3,n,0)}static endRecordBatch(e){return e.endObject()}}class Fl{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDictionaryBatch(e,n){return(n||new Fl).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryBatch(e,n){return e.setPosition(e.position()+Ge),(n||new Fl).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}data(e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new kr).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startDictionaryBatch(e){e.startObject(3)}static addId(e,n){e.addFieldInt64(0,n,e.createLong(0,0))}static addData(e,n){e.addFieldOffset(1,n,0)}static addIsDelta(e,n){e.addFieldInt8(2,+n,0)}static endDictionaryBatch(e){return e.endObject()}}var ry;(function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"})(ry||(ry={}));class ci{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsMessage(e,n){return(n||new ci).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMessage(e,n){return e.setPosition(e.position()+Ge),(n||new ci).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):cp.V1}headerType(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):ry.NONE}header(e){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(e,this.bb_pos+n):null}bodyLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}customMetadata(e,n){const i=this.bb.__offset(this.bb_pos,12);return i?(n||new Kn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startMessage(e){e.startObject(5)}static addVersion(e,n){e.addFieldInt16(0,n,cp.V1)}static addHeaderType(e,n){e.addFieldInt8(1,n,ry.NONE)}static addHeader(e,n){e.addFieldOffset(2,n,0)}static addBodyLength(e,n){e.addFieldInt64(3,n,e.createLong(0,0))}static addCustomMetadata(e,n){e.addFieldOffset(4,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addOffset(n[i]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static endMessage(e){return e.endObject()}static finishMessageBuffer(e,n){e.finish(n)}static finishSizePrefixedMessageBuffer(e,n){e.finish(n,void 0,!0)}static createMessage(e,n,i,s,o,c){return ci.startMessage(e),ci.addVersion(e,n),ci.addHeaderType(e,i),ci.addHeader(e,s),ci.addBodyLength(e,o),ci.addCustomMetadata(e,c),ci.endMessage(e)}}var qte=hs;class Gte extends It{visit(e,n){return e==null||n==null?void 0:super.visit(e,n)}visitNull(e,n){return xf.startNull(n),xf.endNull(n)}visitInt(e,n){return lr.startInt(n),lr.addBitWidth(n,e.bitWidth),lr.addIsSigned(n,e.isSigned),lr.endInt(n)}visitFloat(e,n){return ao.startFloatingPoint(n),ao.addPrecision(n,e.precision),ao.endFloatingPoint(n)}visitBinary(e,n){return vf.startBinary(n),vf.endBinary(n)}visitBool(e,n){return Ef.startBool(n),Ef.endBool(n)}visitUtf8(e,n){return kf.startUtf8(n),kf.endUtf8(n)}visitDecimal(e,n){return Es.startDecimal(n),Es.addScale(n,e.scale),Es.addPrecision(n,e.precision),Es.addBitWidth(n,e.bitWidth),Es.endDecimal(n)}visitDate(e,n){return io.startDate(n),io.addUnit(n,e.unit),io.endDate(n)}visitTime(e,n){return Or.startTime(n),Or.addUnit(n,e.unit),Or.addBitWidth(n,e.bitWidth),Or.endTime(n)}visitTimestamp(e,n){const i=e.timezone&&n.createString(e.timezone)||void 0;return Mr.startTimestamp(n),Mr.addUnit(n,e.unit),i!==void 0&&Mr.addTimezone(n,i),Mr.endTimestamp(n)}visitInterval(e,n){return oo.startInterval(n),oo.addUnit(n,e.unit),oo.endInterval(n)}visitList(e,n){return Sf.startList(n),Sf.endList(n)}visitStruct(e,n){return Bf.startStruct_(n),Bf.endStruct_(n)}visitUnion(e,n){Bs.startTypeIdsVector(n,e.typeIds.length);const i=Bs.createTypeIdsVector(n,e.typeIds);return Bs.startUnion(n),Bs.addMode(n,e.mode),Bs.addTypeIds(n,i),Bs.endUnion(n)}visitDictionary(e,n){const i=this.visit(e.indices,n);return Il.startDictionaryEncoding(n),Il.addId(n,new qte(e.id,0)),Il.addIsOrdered(n,e.isOrdered),i!==void 0&&Il.addIndexType(n,i),Il.endDictionaryEncoding(n)}visitFixedSizeBinary(e,n){return so.startFixedSizeBinary(n),so.addByteWidth(n,e.byteWidth),so.endFixedSizeBinary(n)}visitFixedSizeList(e,n){return ro.startFixedSizeList(n),ro.addListSize(n,e.listSize),ro.endFixedSizeList(n)}visitMap(e,n){return lo.startMap(n),lo.addKeysSorted(n,e.keysSorted),lo.endMap(n)}}const fx=new Gte;function Vte(t,e=new Map){return new qt(Hte(t,e),b0(t.customMetadata),e)}function J$(t){return new _r(t.count,Q$(t.columns),Z$(t.columns))}function Wte(t){return new jo(J$(t.data),t.id,t.isDelta)}function Hte(t,e){return(t.fields||[]).filter(Boolean).map(n=>$t.fromJSON(n,e))}function qL(t,e){return(t.children||[]).filter(Boolean).map(n=>$t.fromJSON(n,e))}function Q$(t){return(t||[]).reduce((e,n)=>[...e,new Ru(n.count,Yte(n.VALIDITY)),...Q$(n.children)],[])}function Z$(t,e=[]){for(let n=-1,i=(t||[]).length;++n<i;){const s=t[n];s.VALIDITY&&e.push(new To(e.length,s.VALIDITY.length)),s.TYPE&&e.push(new To(e.length,s.TYPE.length)),s.OFFSET&&e.push(new To(e.length,s.OFFSET.length)),s.DATA&&e.push(new To(e.length,s.DATA.length)),e=Z$(s.children,e)}return e}function Yte(t){return(t||[]).reduce((e,n)=>e+ +(n===0),0)}function Xte(t,e){let n,i,s,o,c,d;return!e||!(o=t.dictionary)?(c=VL(t,qL(t,e)),s=new $t(t.name,c,t.nullable,b0(t.customMetadata))):e.has(n=o.id)?(i=(i=o.indexType)?GL(i):new nd,d=new Yl(e.get(n),i,n,o.isOrdered),s=new $t(t.name,d,t.nullable,b0(t.customMetadata))):(i=(i=o.indexType)?GL(i):new nd,e.set(n,c=VL(t,qL(t,e))),d=new Yl(c,i,n,o.isOrdered),s=new $t(t.name,d,t.nullable,b0(t.customMetadata))),s||null}function b0(t){return new Map(Object.entries(t||{}))}function GL(t){return new Yi(t.isSigned,t.bitWidth)}function VL(t,e){const n=t.type.name;switch(n){case"NONE":return new Co;case"null":return new Co;case"binary":return new Z_;case"utf8":return new sp;case"bool":return new rp;case"list":return new Qf((e||[])[0]);case"struct":return new fi(e||[]);case"struct_":return new fi(e||[])}switch(n){case"int":{const i=t.type;return new Yi(i.isSigned,i.bitWidth)}case"floatingpoint":{const i=t.type;return new Wl(ii[i.precision])}case"decimal":{const i=t.type;return new ey(i.scale,i.precision,i.bitWidth)}case"date":{const i=t.type;return new Kf(Us[i.unit])}case"time":{const i=t.type;return new Ro(dt[i.unit],i.bitWidth)}case"timestamp":{const i=t.type;return new Hl(dt[i.unit],i.timezone)}case"interval":{const i=t.type;return new Jf(qr[i.unit])}case"union":{const i=t.type;return new id(mi[i.mode],i.typeIds||[],e||[])}case"fixedsizebinary":{const i=t.type;return new ty(i.byteWidth)}case"fixedsizelist":{const i=t.type;return new ap(i.listSize,(e||[])[0])}case"map":{const i=t.type;return new op((e||[])[0],i.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var eu=hs,Kte=sg,Jte=Vr;class Di{constructor(e,n,i,s){this._version=n,this._headerType=i,this.body=new Uint8Array(0),s&&(this._createHeader=()=>s),this._bodyLength=typeof e=="number"?e:e.low}static fromJSON(e,n){const i=new Di(0,Os.V4,n);return i._createHeader=Qte(e,n),i}static decode(e){e=new Jte(Nt(e));const n=ci.getRootAsMessage(e),i=n.bodyLength(),s=n.version(),o=n.headerType(),c=new Di(i,s,o);return c._createHeader=Zte(n,o),c}static encode(e){const n=new Kte;let i=-1;return e.isSchema()?i=qt.encode(n,e.header()):e.isRecordBatch()?i=_r.encode(n,e.header()):e.isDictionaryBatch()&&(i=jo.encode(n,e.header())),ci.startMessage(n),ci.addVersion(n,Os.V4),ci.addHeader(n,i),ci.addHeaderType(n,e.headerType),ci.addBodyLength(n,new eu(e.bodyLength,0)),ci.finishMessageBuffer(n,ci.endMessage(n)),n.asUint8Array()}static from(e,n=0){if(e instanceof qt)return new Di(0,Os.V4,en.Schema,e);if(e instanceof _r)return new Di(n,Os.V4,en.RecordBatch,e);if(e instanceof jo)return new Di(n,Os.V4,en.DictionaryBatch,e);throw new Error(`Unrecognized Message header: ${e}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===en.Schema}isRecordBatch(){return this.headerType===en.RecordBatch}isDictionaryBatch(){return this.headerType===en.DictionaryBatch}}class _r{constructor(e,n,i){this._nodes=n,this._buffers=i,this._length=typeof e=="number"?e:e.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}}class jo{constructor(e,n,i=!1){this._data=e,this._isDelta=i,this._id=typeof n=="number"?n:n.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}}class To{constructor(e,n){this.offset=typeof e=="number"?e:e.low,this.length=typeof n=="number"?n:n.low}}class Ru{constructor(e,n){this.length=typeof e=="number"?e:e.low,this.nullCount=typeof n=="number"?n:n.low}}function Qte(t,e){return()=>{switch(e){case en.Schema:return qt.fromJSON(t);case en.RecordBatch:return _r.fromJSON(t);case en.DictionaryBatch:return jo.fromJSON(t)}throw new Error(`Unrecognized Message type: { name: ${en[e]}, type: ${e} }`)}}function Zte(t,e){return()=>{switch(e){case en.Schema:return qt.decode(t.header(new Wn));case en.RecordBatch:return _r.decode(t.header(new kr),t.version());case en.DictionaryBatch:return jo.decode(t.header(new Fl),t.version())}throw new Error(`Unrecognized Message type: { name: ${en[e]}, type: ${e} }`)}}$t.encode=dne;$t.decode=lne;$t.fromJSON=Xte;qt.encode=cne;qt.decode=ene;qt.fromJSON=Vte;_r.encode=fne;_r.decode=tne;_r.fromJSON=J$;jo.encode=une;jo.decode=nne;jo.fromJSON=Wte;Ru.encode=hne;Ru.decode=sne;To.encode=pne;To.decode=ine;function ene(t,e=new Map){const n=one(t,e);return new qt(n,T0(t),e)}function tne(t,e=Os.V4){if(t.compression()!==null)throw new Error("Record batch compression not implemented");return new _r(t.length(),rne(t),ane(t,e))}function nne(t,e=Os.V4){return new jo(_r.decode(t.data(),e),t.id(),t.isDelta())}function ine(t){return new To(t.offset(),t.length())}function sne(t){return new Ru(t.length(),t.nullCount())}function rne(t){const e=[];for(let n,i=-1,s=-1,o=t.nodesLength();++i<o;)(n=t.nodes(i))&&(e[++s]=Ru.decode(n));return e}function ane(t,e){const n=[];for(let i,s=-1,o=-1,c=t.buffersLength();++s<c;)(i=t.buffers(s))&&(e<Os.V4&&(i.bb_pos+=8*(s+1)),n[++o]=To.decode(i));return n}function one(t,e){const n=[];for(let i,s=-1,o=-1,c=t.fieldsLength();++s<c;)(i=t.fields(s))&&(n[++o]=$t.decode(i,e));return n}function WL(t,e){const n=[];for(let i,s=-1,o=-1,c=t.childrenLength();++s<c;)(i=t.children(s))&&(n[++o]=$t.decode(i,e));return n}function lne(t,e){let n,i,s,o,c,d;return!e||!(d=t.dictionary())?(s=YL(t,WL(t,e)),i=new $t(t.name(),s,t.nullable(),T0(t))):e.has(n=d.id().low)?(o=(o=d.indexType())?HL(o):new nd,c=new Yl(e.get(n),o,n,d.isOrdered()),i=new $t(t.name(),c,t.nullable(),T0(t))):(o=(o=d.indexType())?HL(o):new nd,e.set(n,s=YL(t,WL(t,e))),c=new Yl(s,o,n,d.isOrdered()),i=new $t(t.name(),c,t.nullable(),T0(t))),i||null}function T0(t){const e=new Map;if(t)for(let n,i,s=-1,o=Math.trunc(t.customMetadataLength());++s<o;)(n=t.customMetadata(s))&&(i=n.key())!=null&&e.set(i,n.value());return e}function HL(t){return new Yi(t.isSigned(),t.bitWidth())}function YL(t,e){const n=t.typeType();switch(n){case Et.NONE:return new Co;case Et.Null:return new Co;case Et.Binary:return new Z_;case Et.Utf8:return new sp;case Et.Bool:return new rp;case Et.List:return new Qf((e||[])[0]);case Et.Struct_:return new fi(e||[])}switch(n){case Et.Int:{const i=t.type(new lr);return new Yi(i.isSigned(),i.bitWidth())}case Et.FloatingPoint:{const i=t.type(new ao);return new Wl(i.precision())}case Et.Decimal:{const i=t.type(new Es);return new ey(i.scale(),i.precision(),i.bitWidth())}case Et.Date:{const i=t.type(new io);return new Kf(i.unit())}case Et.Time:{const i=t.type(new Or);return new Ro(i.unit(),i.bitWidth())}case Et.Timestamp:{const i=t.type(new Mr);return new Hl(i.unit(),i.timezone())}case Et.Interval:{const i=t.type(new oo);return new Jf(i.unit())}case Et.Union:{const i=t.type(new Bs);return new id(i.mode(),i.typeIdsArray()||[],e||[])}case Et.FixedSizeBinary:{const i=t.type(new so);return new ty(i.byteWidth())}case Et.FixedSizeList:{const i=t.type(new ro);return new ap(i.listSize(),(e||[])[0])}case Et.Map:{const i=t.type(new lo);return new op((e||[])[0],i.keysSorted())}}throw new Error(`Unrecognized type: "${Et[n]}" (${n})`)}function cne(t,e){const n=e.fields.map(o=>$t.encode(t,o));Wn.startFieldsVector(t,n.length);const i=Wn.createFieldsVector(t,n),s=e.metadata&&e.metadata.size>0?Wn.createCustomMetadataVector(t,[...e.metadata].map(([o,c])=>{const d=t.createString(`${o}`),f=t.createString(`${c}`);return Kn.startKeyValue(t),Kn.addKey(t,d),Kn.addValue(t,f),Kn.endKeyValue(t)})):-1;return Wn.startSchema(t),Wn.addFields(t,i),Wn.addEndianness(t,gne?dp.Little:dp.Big),s!==-1&&Wn.addCustomMetadata(t,s),Wn.endSchema(t)}function dne(t,e){let n=-1,i=-1,s=-1;const o=e.type;let c=e.typeId;Ye.isDictionary(o)?(c=o.dictionary.typeId,s=fx.visit(o,t),i=fx.visit(o.dictionary,t)):i=fx.visit(o,t);const d=(o.children||[]).map(a=>$t.encode(t,a)),f=Ci.createChildrenVector(t,d),u=e.metadata&&e.metadata.size>0?Ci.createCustomMetadataVector(t,[...e.metadata].map(([a,_])=>{const w=t.createString(`${a}`),m=t.createString(`${_}`);return Kn.startKeyValue(t),Kn.addKey(t,w),Kn.addValue(t,m),Kn.endKeyValue(t)})):-1;return e.name&&(n=t.createString(e.name)),Ci.startField(t),Ci.addType(t,i),Ci.addTypeType(t,c),Ci.addChildren(t,f),Ci.addNullable(t,!!e.nullable),n!==-1&&Ci.addName(t,n),s!==-1&&Ci.addDictionary(t,s),u!==-1&&Ci.addCustomMetadata(t,u),Ci.endField(t)}function fne(t,e){const n=e.nodes||[],i=e.buffers||[];kr.startNodesVector(t,n.length);for(const c of n.slice().reverse())Ru.encode(t,c);const s=t.endVector();kr.startBuffersVector(t,i.length);for(const c of i.slice().reverse())To.encode(t,c);const o=t.endVector();return kr.startRecordBatch(t),kr.addLength(t,new eu(e.length,0)),kr.addNodes(t,s),kr.addBuffers(t,o),kr.endRecordBatch(t)}function une(t,e){const n=_r.encode(t,e.data);return Fl.startDictionaryBatch(t),Fl.addId(t,new eu(e.id,0)),Fl.addIsDelta(t,e.isDelta),Fl.addData(t,n),Fl.endDictionaryBatch(t)}function hne(t,e){return K$.createFieldNode(t,new eu(e.length,0),new eu(e.nullCount,0))}function pne(t,e){return X$.createBuffer(t,new eu(e.offset,0),new eu(e.length,0))}const gne=(()=>{const t=new ArrayBuffer(2);return new DataView(t).setInt16(0,256,!0),new Int16Array(t)[0]===256})(),W2=t=>`Expected ${en[t]} Message in stream, but was null or length 0.`,H2=t=>`Header pointer of flatbuffer-encoded ${en[t]} Message is null or length 0.`,ez=(t,e)=>`Expected to read ${t} metadata bytes, but only read ${e}.`,tz=(t,e)=>`Expected to read ${t} bytes for message body, but only read ${e}.`;class Y2{constructor(e){this.source=e instanceof sy?e:new sy(e)}[Symbol.iterator](){return this}next(){let e;return(e=this.readMetadataLength()).done||e.value===-1&&(e=this.readMetadataLength()).done||(e=this.readMetadata(e.value)).done?In:e}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}readMessage(e){let n;if((n=this.next()).done)return null;if(e!=null&&n.value.headerType!==e)throw new Error(W2(e));return n.value}readMessageBody(e){if(e<=0)return new Uint8Array(0);const n=Nt(this.source.read(e));if(n.byteLength<e)throw new Error(tz(e,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()}readSchema(e=!1){const n=en.Schema,i=this.readMessage(n),s=i==null?void 0:i.header();if(e&&!s)throw new Error(H2(n));return s}readMetadataLength(){const e=this.source.read(G1),n=e&&new Vr(e),i=(n==null?void 0:n.readInt32(0))||0;return{done:i===0,value:i}}readMetadata(e){const n=this.source.read(e);if(!n)return In;if(n.byteLength<e)throw new Error(ez(e,n.byteLength));return{done:!1,value:Di.decode(n)}}}class nz{constructor(e,n){this.source=e instanceof sd?e:a8(e)?new cT(e,n):new sd(e)}[Symbol.asyncIterator](){return this}next(){return ye(this,void 0,void 0,function*(){let e;return(e=yield this.readMetadataLength()).done||e.value===-1&&(e=yield this.readMetadataLength()).done||(e=yield this.readMetadata(e.value)).done?In:e})}throw(e){return ye(this,void 0,void 0,function*(){return yield this.source.throw(e)})}return(e){return ye(this,void 0,void 0,function*(){return yield this.source.return(e)})}readMessage(e){return ye(this,void 0,void 0,function*(){let n;if((n=yield this.next()).done)return null;if(e!=null&&n.value.headerType!==e)throw new Error(W2(e));return n.value})}readMessageBody(e){return ye(this,void 0,void 0,function*(){if(e<=0)return new Uint8Array(0);const n=Nt(yield this.source.read(e));if(n.byteLength<e)throw new Error(tz(e,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()})}readSchema(e=!1){return ye(this,void 0,void 0,function*(){const n=en.Schema,i=yield this.readMessage(n),s=i==null?void 0:i.header();if(e&&!s)throw new Error(H2(n));return s})}readMetadataLength(){return ye(this,void 0,void 0,function*(){const e=yield this.source.read(G1),n=e&&new Vr(e),i=(n==null?void 0:n.readInt32(0))||0;return{done:i===0,value:i}})}readMetadata(e){return ye(this,void 0,void 0,function*(){const n=yield this.source.read(e);if(!n)return In;if(n.byteLength<e)throw new Error(ez(e,n.byteLength));return{done:!1,value:Di.decode(n)}})}}class iz extends Y2{constructor(e){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=e instanceof UL?e:new UL(e)}next(){const{_json:e}=this;if(!this._schema)return this._schema=!0,{done:!1,value:Di.fromJSON(e.schema,en.Schema)};if(this._dictionaryIndex<e.dictionaries.length){const n=e.dictionaries[this._dictionaryIndex++];return this._body=n.data.columns,{done:!1,value:Di.fromJSON(n,en.DictionaryBatch)}}if(this._batchIndex<e.batches.length){const n=e.batches[this._batchIndex++];return this._body=n.columns,{done:!1,value:Di.fromJSON(n,en.RecordBatch)}}return this._body=[],In}readMessageBody(e){return n(this._body);function n(i){return(i||[]).reduce((s,o)=>[...s,...o.VALIDITY&&[o.VALIDITY]||[],...o.TYPE&&[o.TYPE]||[],...o.OFFSET&&[o.OFFSET]||[],...o.DATA&&[o.DATA]||[],...n(o.children)],[])}}readMessage(e){let n;if((n=this.next()).done)return null;if(e!=null&&n.value.headerType!==e)throw new Error(W2(e));return n.value}readSchema(){const e=en.Schema,n=this.readMessage(e),i=n==null?void 0:n.header();if(!n||!i)throw new Error(H2(e));return i}}const G1=4,ak="ARROW1",ay=new Uint8Array(ak.length);for(let t=0;t<ak.length;t+=1)ay[t]=ak.codePointAt(t);function X2(t,e=0){for(let n=-1,i=ay.length;++n<i;)if(ay[n]!==t[e+n])return!1;return!0}const sm=ay.length,sz=sm+G1,_ne=sm*2+G1;class jr extends v2{constructor(e){super(),this._impl=e}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(e){return this._impl.throw(e)}return(e){return this._impl.return(e)}cancel(){return this._impl.cancel()}reset(e){return this._impl.reset(e),this._DOMStream=void 0,this._nodeStream=void 0,this}open(e){const n=this._impl.open(e);return td(n)?n.then(()=>this):this}readRecordBatch(e){return this._impl.isFile()?this._impl.readRecordBatch(e):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return or.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return or.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,n){throw new Error('"throughDOM" not available in this environment')}static from(e){return e instanceof jr?e:tk(e)?wne(e):a8(e)?vne(e):td(e)?(()=>ye(this,void 0,void 0,function*(){return yield jr.from(yield e)}))():o8(e)||VF(e)||l8(e)||Mu(e)?Tne(new sd(e)):bne(new sy(e))}static readAll(e){return e instanceof jr?e.isSync()?XL(e):KL(e):tk(e)||ArrayBuffer.isView(e)||ig(e)||r8(e)?XL(e):KL(e)}}class hp extends jr{constructor(e){super(e),this._impl=e}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return Pn(this,arguments,function*(){yield Be(yield*qc(us(this[Symbol.iterator]())))})}}class oy extends jr{constructor(e){super(e),this._impl=e}readAll(){var e,n;return ye(this,void 0,void 0,function*(){const i=new Array;try{for(var s=us(this),o;o=yield s.next(),!o.done;){const c=o.value;i.push(c)}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=s.return)&&(yield n.call(s))}finally{if(e)throw e.error}}return i})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class V1 extends hp{constructor(e){super(e),this._impl=e}}class rz extends oy{constructor(e){super(e),this._impl=e}}class az{constructor(e=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=e}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(e){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=e,this.dictionaries=new Map,this}_loadRecordBatch(e,n){const i=this._loadVectors(e,n,this.schema.fields),s=Qe({type:new fi(this.schema.fields),length:e.length,children:i});return new Nn(this.schema,s)}_loadDictionaryBatch(e,n){const{id:i,isDelta:s}=e,{dictionaries:o,schema:c}=this,d=o.get(i);if(s||!d){const f=c.dictionaries.get(i),u=this._loadVectors(e.data,n,[f]);return(d&&s?d.concat(new We(u)):new We(u)).memoize()}return d.memoize()}_loadVectors(e,n,i){return new E$(n,e.nodes,e.buffers,this.dictionaries).visitMany(i)}}class hT extends az{constructor(e,n){super(n),this._reader=tk(e)?new iz(this._handle=e):new Y2(this._handle=e)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(e){return this.closed||(this.autoDestroy=lz(this,e),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(e):In}return(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(e):In}next(){if(this.closed)return In;let e;const{_reader:n}=this;for(;e=this._readNextMessageAndValidate();)if(e.isSchema())this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;const i=e.header(),s=n.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(i,s)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;const i=e.header(),s=n.readMessageBody(e.bodyLength),o=this._loadDictionaryBatch(i,s);this.dictionaries.set(i.id,o)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new V2(this.schema)}):this.return()}_readNextMessageAndValidate(e){return this._reader.readMessage(e)}}class pT extends az{constructor(e,n){super(n),this._reader=new nz(this._handle=e)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return ye(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(e){return ye(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=lz(this,e),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(e){return ye(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(e):In})}return(e){return ye(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(e):In})}next(){return ye(this,void 0,void 0,function*(){if(this.closed)return In;let e;const{_reader:n}=this;for(;e=yield this._readNextMessageAndValidate();)if(e.isSchema())yield this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;const i=e.header(),s=yield n.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(i,s)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;const i=e.header(),s=yield n.readMessageBody(e.bodyLength),o=this._loadDictionaryBatch(i,s);this.dictionaries.set(i.id,o)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new V2(this.schema)}):yield this.return()})}_readNextMessageAndValidate(e){return ye(this,void 0,void 0,function*(){return yield this._reader.readMessage(e)})}}class oz extends hT{constructor(e,n){super(e instanceof $L?e:new $L(e),n)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(e){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const n of this._footer.dictionaryBatches())n&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(e)}readRecordBatch(e){var n;if(this.closed)return null;this._footer||this.open();const i=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(e);if(i&&this._handle.seek(i.offset)){const s=this._reader.readMessage(en.RecordBatch);if(s!=null&&s.isRecordBatch()){const o=s.header(),c=this._reader.readMessageBody(s.bodyLength);return this._loadRecordBatch(o,c)}}return null}_readDictionaryBatch(e){var n;const i=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(e);if(i&&this._handle.seek(i.offset)){const s=this._reader.readMessage(en.DictionaryBatch);if(s!=null&&s.isDictionaryBatch()){const o=s.header(),c=this._reader.readMessageBody(s.bodyLength),d=this._loadDictionaryBatch(o,c);this.dictionaries.set(o.id,d)}}}_readFooter(){const{_handle:e}=this,n=e.size-sz,i=e.readInt32(n),s=e.readAt(n-i,i);return iy.decode(s)}_readNextMessageAndValidate(e){var n;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const i=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(this._recordBatchIndex);if(i&&this._handle.seek(i.offset))return this._reader.readMessage(e)}return null}}class yne extends pT{constructor(e,...n){const i=typeof n[0]!="number"?n.shift():void 0,s=n[0]instanceof Map?n.shift():void 0;super(e instanceof cT?e:new cT(e,i),s)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}open(e){const n=Object.create(null,{open:{get:()=>super.open}});return ye(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const i of this._footer.dictionaryBatches())i&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield n.open.call(this,e)})}readRecordBatch(e){var n;return ye(this,void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());const i=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(e);if(i&&(yield this._handle.seek(i.offset))){const s=yield this._reader.readMessage(en.RecordBatch);if(s!=null&&s.isRecordBatch()){const o=s.header(),c=yield this._reader.readMessageBody(s.bodyLength);return this._loadRecordBatch(o,c)}}return null})}_readDictionaryBatch(e){var n;return ye(this,void 0,void 0,function*(){const i=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(e);if(i&&(yield this._handle.seek(i.offset))){const s=yield this._reader.readMessage(en.DictionaryBatch);if(s!=null&&s.isDictionaryBatch()){const o=s.header(),c=yield this._reader.readMessageBody(s.bodyLength),d=this._loadDictionaryBatch(o,c);this.dictionaries.set(o.id,d)}}})}_readFooter(){return ye(this,void 0,void 0,function*(){const{_handle:e}=this;e._pending&&(yield e._pending);const n=e.size-sz,i=yield e.readInt32(n),s=yield e.readAt(n-i,i);return iy.decode(s)})}_readNextMessageAndValidate(e){return ye(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=this._footer.getRecordBatch(this._recordBatchIndex);if(n&&(yield this._handle.seek(n.offset)))return yield this._reader.readMessage(e)}return null})}}class mne extends hT{constructor(e,n){super(e,n)}_loadVectors(e,n,i){return new Bte(n,e.nodes,e.buffers,this.dictionaries).visitMany(i)}}function lz(t,e){return e&&typeof e.autoDestroy=="boolean"?e.autoDestroy:t.autoDestroy}function*XL(t){const e=jr.from(t);try{if(!e.open({autoDestroy:!1}).closed)do yield e;while(!e.reset().open().closed)}finally{e.cancel()}}function KL(t){return Pn(this,arguments,function*(){const n=yield Be(jr.from(t));try{if(!(yield Be(n.open({autoDestroy:!1}))).closed)do yield yield Be(n);while(!(yield Be(n.reset().open())).closed)}finally{yield Be(n.cancel())}})}function wne(t){return new hp(new mne(t))}function bne(t){const e=t.peek(sm+7&-8);return e&&e.byteLength>=4?X2(e)?new V1(new oz(t.read())):new hp(new hT(t)):new hp(new hT(function*(){}()))}function Tne(t){return ye(this,void 0,void 0,function*(){const e=yield t.peek(sm+7&-8);return e&&e.byteLength>=4?X2(e)?new V1(new oz(yield t.read())):new oy(new pT(t)):new oy(new pT(function(){return Pn(this,arguments,function*(){})}()))})}function vne(t){return ye(this,void 0,void 0,function*(){const{size:e}=yield t.stat(),n=new cT(t,e);return e>=_ne&&X2(yield n.readAt(0,sm+7&-8))?new rz(new yne(n)):new oy(new pT(n))})}class jn extends It{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(...e){const n=s=>s.flatMap(o=>Array.isArray(o)?n(o):o instanceof Nn?o.data.children:o.data),i=new jn;return i.visitMany(n(e)),i}visit(e){if(e instanceof We)return this.visitMany(e.data),this;const{type:n}=e;if(!Ye.isDictionary(n)){const{length:i,nullCount:s}=e;if(i>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");Ye.isNull(n)||Ia.call(this,s<=0?new Uint8Array(0):D1(e.offset,i,e.nullBitmap)),this.nodes.push(new Ru(i,s))}return super.visit(e)}visitNull(e){return this}visitDictionary(e){return this.visit(e.clone(e.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Ia(t){const e=t.byteLength+7&-8;return this.buffers.push(t),this.bufferRegions.push(new To(this._byteLength,e)),this._byteLength+=e,this}function Ene(t){const{type:e,length:n,typeIds:i,valueOffsets:s}=t;if(Ia.call(this,i),e.mode===mi.Sparse)return ok.call(this,t);if(e.mode===mi.Dense){if(t.offset<=0)return Ia.call(this,s),ok.call(this,t);{const o=i.reduce((a,_)=>Math.max(a,_),i[0]),c=new Int32Array(o+1),d=new Int32Array(o+1).fill(-1),f=new Int32Array(n),u=A1(-s[0],n,s);for(let a,_,w=-1;++w<n;)(_=d[a=i[w]])===-1&&(_=d[a]=u[a]),f[w]=u[w]-_,++c[a];Ia.call(this,f);for(let a,_=-1,w=e.children.length;++_<w;)if(a=t.children[_]){const m=e.typeIds[_],l=Math.min(n,c[m]);this.visit(a.slice(d[m],l))}}}return this}function Sne(t){let e;return t.nullCount>=t.length?Ia.call(this,new Uint8Array(0)):(e=t.values)instanceof Uint8Array?Ia.call(this,D1(t.offset,t.length,e)):Ia.call(this,ny(t.values))}function Od(t){return Ia.call(this,t.values.subarray(0,t.length*t.stride))}function cz(t){const{length:e,values:n,valueOffsets:i}=t,s=i[0],o=i[e],c=Math.min(o-s,n.byteLength-s);return Ia.call(this,A1(-i[0],e,i)),Ia.call(this,n.subarray(s,s+c)),this}function K2(t){const{length:e,valueOffsets:n}=t;return n&&Ia.call(this,A1(n[0],e,n)),this.visit(t.children[0])}function ok(t){return this.visitMany(t.type.children.map((e,n)=>t.children[n]).filter(Boolean))[0]}jn.prototype.visitBool=Sne;jn.prototype.visitInt=Od;jn.prototype.visitFloat=Od;jn.prototype.visitUtf8=cz;jn.prototype.visitBinary=cz;jn.prototype.visitFixedSizeBinary=Od;jn.prototype.visitDate=Od;jn.prototype.visitTimestamp=Od;jn.prototype.visitTime=Od;jn.prototype.visitDecimal=Od;jn.prototype.visitList=K2;jn.prototype.visitStruct=ok;jn.prototype.visitUnion=Ene;jn.prototype.visitInterval=Od;jn.prototype.visitFixedSizeList=K2;jn.prototype.visitMap=K2;class xne extends It{visit(e){return e==null?void 0:super.visit(e)}visitNull({typeId:e}){return{name:Et[e].toLowerCase()}}visitInt({typeId:e,bitWidth:n,isSigned:i}){return{name:Et[e].toLowerCase(),bitWidth:n,isSigned:i}}visitFloat({typeId:e,precision:n}){return{name:Et[e].toLowerCase(),precision:ii[n]}}visitBinary({typeId:e}){return{name:Et[e].toLowerCase()}}visitBool({typeId:e}){return{name:Et[e].toLowerCase()}}visitUtf8({typeId:e}){return{name:Et[e].toLowerCase()}}visitDecimal({typeId:e,scale:n,precision:i,bitWidth:s}){return{name:Et[e].toLowerCase(),scale:n,precision:i,bitWidth:s}}visitDate({typeId:e,unit:n}){return{name:Et[e].toLowerCase(),unit:Us[n]}}visitTime({typeId:e,unit:n,bitWidth:i}){return{name:Et[e].toLowerCase(),unit:dt[n],bitWidth:i}}visitTimestamp({typeId:e,timezone:n,unit:i}){return{name:Et[e].toLowerCase(),unit:dt[i],timezone:n}}visitInterval({typeId:e,unit:n}){return{name:Et[e].toLowerCase(),unit:qr[n]}}visitList({typeId:e}){return{name:Et[e].toLowerCase()}}visitStruct({typeId:e}){return{name:Et[e].toLowerCase()}}visitUnion({typeId:e,mode:n,typeIds:i}){return{name:Et[e].toLowerCase(),mode:mi[n],typeIds:[...i]}}visitDictionary(e){return this.visit(e.dictionary)}visitFixedSizeBinary({typeId:e,byteWidth:n}){return{name:Et[e].toLowerCase(),byteWidth:n}}visitFixedSizeList({typeId:e,listSize:n}){return{name:Et[e].toLowerCase(),listSize:n}}visitMap({typeId:e,keysSorted:n}){return{name:Et[e].toLowerCase(),keysSorted:n}}}class W1 extends It{static assemble(...e){const n=new W1;return e.map(({schema:i,data:s})=>n.visitMany(i.fields,s.children))}visit({name:e},n){const{length:i}=n,{offset:s,nullCount:o,nullBitmap:c}=n,d=Ye.isDictionary(n.type)?n.type.indices:n.type,f=Object.assign([],n.buffers,{[fa.VALIDITY]:void 0});return Object.assign({name:e,count:i,VALIDITY:Ye.isNull(d)?void 0:o<=0?Array.from({length:i},()=>1):[...new lp(c,s,i,null,m2)]},super.visit(n.clone(d,s,i,0,f)))}visitNull(){return{}}visitBool({values:e,offset:n,length:i}){return{DATA:[...new lp(e,n,i,null,P1)]}}visitInt(e){return{DATA:e.type.bitWidth<64?[...e.values]:[...Ng(e.values,2)]}}visitFloat(e){return{DATA:[...e.values]}}visitUtf8(e){return{DATA:[...new We([e])],OFFSET:[...e.valueOffsets]}}visitBinary(e){return{DATA:[...JL(new We([e]))],OFFSET:[...e.valueOffsets]}}visitFixedSizeBinary(e){return{DATA:[...JL(new We([e]))]}}visitDate(e){return{DATA:e.type.unit===Us.DAY?[...e.values]:[...Ng(e.values,2)]}}visitTimestamp(e){return{DATA:[...Ng(e.values,2)]}}visitTime(e){return{DATA:e.type.unit<dt.MICROSECOND?[...e.values]:[...Ng(e.values,2)]}}visitDecimal(e){return{DATA:[...Ng(e.values,4)]}}visitList(e){return{OFFSET:[...e.valueOffsets],children:this.visitMany(e.type.children,e.children)}}visitStruct(e){return{children:this.visitMany(e.type.children,e.children)}}visitUnion(e){return{TYPE:[...e.typeIds],OFFSET:e.type.mode===mi.Dense?[...e.valueOffsets]:void 0,children:this.visitMany(e.type.children,e.children)}}visitInterval(e){return{DATA:[...e.values]}}visitFixedSizeList(e){return{children:this.visitMany(e.type.children,e.children)}}visitMap(e){return{OFFSET:[...e.valueOffsets],children:this.visitMany(e.type.children,e.children)}}}function*JL(t){for(const e of t)yield e.reduce((n,i)=>`${n}${("0"+(i&255).toString(16)).slice(-2)}`,"").toUpperCase()}function*Ng(t,e){const n=new Uint32Array(t.buffer);for(let i=-1,s=n.length/e;++i<s;)yield`${Xy.new(n.subarray((i+0)*e,(i+1)*e),!1)}`}class rm extends v2{constructor(e){super(),this._position=0,this._started=!1,this._sink=new Uh,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,js(e)||(e={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof e.autoDestroy=="boolean"?e.autoDestroy:!0,this._writeLegacyIpcFormat=typeof e.writeLegacyIpcFormat=="boolean"?e.writeLegacyIpcFormat:!1}static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,n){throw new Error('"throughDOM" not available in this environment')}toString(e=!1){return this._sink.toString(e)}toUint8Array(e=!1){return this._sink.toUint8Array(e)}writeAll(e){return td(e)?e.then(n=>this.writeAll(n)):Mu(e)?Z2(this,e):Q2(this,e)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(e){return this._sink.toDOMStream(e)}toNodeStream(e){return this._sink.toNodeStream(e)}close(){return this.reset()._sink.close()}abort(e){return this.reset()._sink.abort(e)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(e=this._sink,n=null){return e===this._sink||e instanceof Uh?this._sink=e:(this._sink=new Uh,e&&rZ(e)?this.toDOMStream({type:"bytes"}).pipeTo(e):e&&aZ(e)&&this.toNodeStream({objectMode:!1}).pipe(e)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!dT(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(e){let n=null;if(this._sink){if(e==null)return this.finish()&&void 0;if(e instanceof Jn&&!(n=e.schema))return this.finish()&&void 0;if(e instanceof Nn&&!(n=e.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!dT(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}e instanceof Nn?e instanceof V2||this._writeRecordBatch(e):e instanceof Jn?this.writeAll(e.batches):ig(e)&&this.writeAll(e)}_writeMessage(e,n=8){const i=n-1,s=Di.encode(e),o=s.byteLength,c=this._writeLegacyIpcFormat?4:8,d=o+c+i&~i,f=d-o-c;return e.headerType===en.RecordBatch?this._recordBatchBlocks.push(new Po(d,e.bodyLength,this._position)):e.headerType===en.DictionaryBatch&&this._dictionaryBlocks.push(new Po(d,e.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(d-c)),o>0&&this._write(s),this._writePadding(f)}_write(e){if(this._started){const n=Nt(e);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(e){return this._writeMessage(Di.from(e))}_writeFooter(e){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(ay)}_writePadding(e){return e>0?this._write(new Uint8Array(e)):this}_writeRecordBatch(e){const{byteLength:n,nodes:i,bufferRegions:s,buffers:o}=jn.assemble(e),c=new _r(e.numRows,i,s),d=Di.from(c,n);return this._writeDictionaries(e)._writeMessage(d)._writeBodyBuffers(o)}_writeDictionaryBatch(e,n,i=!1){this._dictionaryDeltaOffsets.set(n,e.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:s,nodes:o,bufferRegions:c,buffers:d}=jn.assemble(new We([e])),f=new _r(e.length,o,c),u=new jo(f,n,i),a=Di.from(u,s);return this._writeMessage(a)._writeBodyBuffers(d)}_writeBodyBuffers(e){let n,i,s;for(let o=-1,c=e.length;++o<c;)(n=e[o])&&(i=n.byteLength)>0&&(this._write(n),(s=(i+7&-8)-i)>0&&this._writePadding(s));return this}_writeDictionaries(e){for(let[n,i]of e.dictionaries){let s=this._dictionaryDeltaOffsets.get(n)||0;if(s===0||(i=i==null?void 0:i.slice(s)).length>0)for(const o of i.data)this._writeDictionaryBatch(o,n,s>0),s+=o.length}return this}}class am extends rm{static writeAll(e,n){const i=new am(n);return td(e)?e.then(s=>i.writeAll(s)):Mu(e)?Z2(i,e):Q2(i,e)}}class om extends rm{static writeAll(e){const n=new om;return td(e)?e.then(i=>n.writeAll(i)):Mu(e)?Z2(n,e):Q2(n,e)}constructor(){super(),this._autoDestroy=!0}_writeSchema(e){return this._writeMagic()._writePadding(2)}_writeFooter(e){const n=iy.encode(new iy(e,Os.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(e)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}class J2 extends rm{constructor(){super(),this._autoDestroy=!0,this._recordBatches=[],this._dictionaries=[]}static writeAll(e){return new J2().writeAll(e)}_writeMessage(){return this}_writeFooter(e){return this}_writeSchema(e){return this._write(`{
  "schema": ${JSON.stringify({fields:e.fields.map(n=>dz(n))},null,2)}`)}_writeDictionaries(e){return e.dictionaries.size>0&&this._dictionaries.push(e),this}_writeDictionaryBatch(e,n,i=!1){return this._dictionaryDeltaOffsets.set(n,e.length+(this._dictionaryDeltaOffsets.get(n)||0)),this._write(this._dictionaryBlocks.length===0?"    ":`,
    `),this._write(`${Bne(e,n,i)}`),this._dictionaryBlocks.push(new Po(0,0,0)),this}_writeRecordBatch(e){return this._writeDictionaries(e),this._recordBatches.push(e),this}close(){if(this._dictionaries.length>0){this._write(`,
  "dictionaries": [
`);for(const e of this._dictionaries)super._writeDictionaries(e);this._write(`
  ]`)}if(this._recordBatches.length>0){for(let e=-1,n=this._recordBatches.length;++e<n;)this._write(e===0?`,
  "batches": [
    `:`,
    `),this._write(`${kne(this._recordBatches[e])}`),this._recordBatchBlocks.push(new Po(0,0,0));this._write(`
  ]`)}return this._schema&&this._write(`
}`),this._dictionaries=[],this._recordBatches=[],super.close()}}function Q2(t,e){let n=e;e instanceof Jn&&(n=e.batches,t.reset(void 0,e.schema));for(const i of n)t.write(i);return t.finish()}function Z2(t,e){var n,i,s,o;return ye(this,void 0,void 0,function*(){try{for(n=us(e);i=yield n.next(),!i.done;){const c=i.value;t.write(c)}}catch(c){s={error:c}}finally{try{i&&!i.done&&(o=n.return)&&(yield o.call(n))}finally{if(s)throw s.error}}return t.finish()})}function dz({name:t,type:e,nullable:n}){const i=new xne;return{name:t,nullable:n,type:i.visit(e),children:(e.children||[]).map(s=>dz(s)),dictionary:Ye.isDictionary(e)?{id:e.id,isOrdered:e.isOrdered,indexType:i.visit(e.indices)}:void 0}}function Bne(t,e,n=!1){const[i]=W1.assemble(new Nn({[e]:t}));return JSON.stringify({id:e,isDelta:n,data:{count:t.length,columns:i}},null,2)}function kne(t){const[e]=W1.assemble(t);return JSON.stringify({count:t.numRows,columns:e},null,2)}function Ine(t,e){if(Mu(t))return One(t,e);if(ig(t))return Fne(t,e);throw new Error("toDOMStream() must be called with an Iterable or AsyncIterable")}function Fne(t,e){let n=null;const i=(e==null?void 0:e.type)==="bytes"||!1,s=(e==null?void 0:e.highWaterMark)||Math.pow(2,24);return new ReadableStream(Object.assign(Object.assign({},e),{start(c){o(c,n||(n=t[Symbol.iterator]()))},pull(c){n?o(c,n):c.close()},cancel(){((n==null?void 0:n.return)&&n.return()||!0)&&(n=null)}}),Object.assign({highWaterMark:i?s:void 0},e));function o(c,d){let f,u=null,a=c.desiredSize||null;for(;!(u=d.next(i?a:null)).done;)if(ArrayBuffer.isView(u.value)&&(f=Nt(u.value))&&(a!=null&&i&&(a=a-f.byteLength+1),u.value=f),c.enqueue(u.value),a!=null&&--a<=0)return;c.close()}}function One(t,e){let n=null;const i=(e==null?void 0:e.type)==="bytes"||!1,s=(e==null?void 0:e.highWaterMark)||Math.pow(2,24);return new ReadableStream(Object.assign(Object.assign({},e),{start(c){return ye(this,void 0,void 0,function*(){yield o(c,n||(n=t[Symbol.asyncIterator]()))})},pull(c){return ye(this,void 0,void 0,function*(){n?yield o(c,n):c.close()})},cancel(){return ye(this,void 0,void 0,function*(){((n==null?void 0:n.return)&&(yield n.return())||!0)&&(n=null)})}}),Object.assign({highWaterMark:i?s:void 0},e));function o(c,d){return ye(this,void 0,void 0,function*(){let f,u=null,a=c.desiredSize||null;for(;!(u=yield d.next(i?a:null)).done;)if(ArrayBuffer.isView(u.value)&&(f=Nt(u.value))&&(a!=null&&i&&(a=a-f.byteLength+1),u.value=f),c.enqueue(u.value),a!=null&&--a<=0)return;c.close()})}}function Mne(t){return new Ane(t)}class Ane{constructor(e){this._numChunks=0,this._finished=!1,this._bufferedSize=0;const{["readableStrategy"]:n,["writableStrategy"]:i,["queueingStrategy"]:s="count"}=e,o=tZ(e,["readableStrategy","writableStrategy","queueingStrategy"]);this._controller=null,this._builder=Zf(o),this._getSize=s!=="bytes"?QL:ZL;const{["highWaterMark"]:c=s==="bytes"?Math.pow(2,14):1e3}=Object.assign({},n),{["highWaterMark"]:d=s==="bytes"?Math.pow(2,14):1e3}=Object.assign({},i);this.readable=new ReadableStream({cancel:()=>{this._builder.clear()},pull:f=>{this._maybeFlush(this._builder,this._controller=f)},start:f=>{this._maybeFlush(this._builder,this._controller=f)}},{highWaterMark:c,size:s!=="bytes"?QL:ZL}),this.writable=new WritableStream({abort:()=>{this._builder.clear()},write:()=>{this._maybeFlush(this._builder,this._controller)},close:()=>{this._maybeFlush(this._builder.finish(),this._controller)}},{highWaterMark:d,size:f=>this._writeValueAndReturnChunkSize(f)})}_writeValueAndReturnChunkSize(e){const n=this._bufferedSize;return this._bufferedSize=this._getSize(this._builder.append(e)),this._bufferedSize-n}_maybeFlush(e,n){n!=null&&(this._bufferedSize>=n.desiredSize&&++this._numChunks&&this._enqueue(n,e.toVector()),e.finished&&((e.length>0||this._numChunks===0)&&++this._numChunks&&this._enqueue(n,e.toVector()),!this._finished&&(this._finished=!0)&&this._enqueue(n,null)))}_enqueue(e,n){this._bufferedSize=0,this._controller=null,n==null?e.close():e.enqueue(n)}}const QL=t=>{var e;return(e=t==null?void 0:t.length)!==null&&e!==void 0?e:0},ZL=t=>{var e;return(e=t==null?void 0:t.byteLength)!==null&&e!==void 0?e:0};function eO(t,e){const n=new Uh;let i=null;const s=new ReadableStream({cancel(){return ye(this,void 0,void 0,function*(){yield n.close()})},start(d){return ye(this,void 0,void 0,function*(){yield c(d,i||(i=yield o()))})},pull(d){return ye(this,void 0,void 0,function*(){i?yield c(d,i):d.close()})}});return{writable:new WritableStream(n,Object.assign({highWaterMark:Math.pow(2,14)},t)),readable:s};function o(){return ye(this,void 0,void 0,function*(){return yield(yield jr.from(n)).open(e)})}function c(d,f){return ye(this,void 0,void 0,function*(){let u=d.desiredSize,a=null;for(;!(a=yield f.next()).done;)if(d.enqueue(a.value),u!=null&&--u<=0)return;d.close()})}}function tO(t,e){const n=new this(t),i=new sd(n),s=new ReadableStream({cancel(){return ye(this,void 0,void 0,function*(){yield i.cancel()})},pull(c){return ye(this,void 0,void 0,function*(){yield o(c)})},start(c){return ye(this,void 0,void 0,function*(){yield o(c)})}},Object.assign({highWaterMark:Math.pow(2,14)},e));return{writable:new WritableStream(n,t),readable:s};function o(c){return ye(this,void 0,void 0,function*(){let d=null,f=c.desiredSize;for(;d=yield i.read(f||null);)if(c.enqueue(d),f!=null&&(f-=d.byteLength)<=0)return;c.close()})}}function fz(t){const e=jr.from(t);return td(e)?e.then(n=>fz(n)):e.isAsync()?e.readAll().then(n=>new Jn(n)):new Jn(e.readAll())}function Nne(t,e="stream"){return(e==="stream"?am:om).writeAll(t).toUint8Array(!0)}const Cne=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},$Z),xte),ste),iee),CZ),nte),{compareSchemas:dT,compareFields:Lte,compareTypes:G$});or.toDOMStream=Ine;Qi.throughDOM=Mne;jr.throughDOM=eO;V1.throughDOM=eO;hp.throughDOM=eO;rm.throughDOM=tO;om.throughDOM=tO;am.throughDOM=tO;const Rne=Object.freeze(Object.defineProperty({__proto__:null,get DateUnit(){return Us},get IntervalUnit(){return qr},get MessageHeader(){return ry},get MetadataVersion(){return Os},get Precision(){return ii},get TimeUnit(){return dt},get Type(){return ne},get UnionMode(){return mi},get BufferType(){return fa},Data:Qt,makeData:Qe,DataType:Ye,Null:Co,Bool:rp,Int:Yi,Int8:HF,Int16:YF,Int32:nd,Int64:N1,Uint8:XF,Uint16:KF,Uint32:JF,Uint64:QF,Float:Wl,Float16:N8,Float32:ZF,Float64:C1,Utf8:sp,Binary:Z_,FixedSizeBinary:ty,Date_:Kf,DateDay:zZ,DateMillisecond:C8,Timestamp:Hl,TimestampSecond:HZ,TimestampMillisecond:YZ,TimestampMicrosecond:XZ,TimestampNanosecond:KZ,Time:Ro,TimeSecond:qZ,TimeMillisecond:GZ,TimeMicrosecond:VZ,TimeNanosecond:WZ,Decimal:ey,List:Qf,Struct:fi,StructRow:R1,Union:id,DenseUnion:ZZ,SparseUnion:eee,Dictionary:Yl,Interval:Jf,IntervalDayTime:JZ,IntervalYearMonth:QZ,FixedSizeList:ap,Map_:op,MapRow:Ky,Table:Jn,makeTable:$te,tableFromArrays:zte,Schema:qt,Field:$t,Visitor:It,Vector:We,makeVector:j1,vectorFromArray:G2,tableFromJSON:Pte,ByteStream:sy,AsyncByteStream:sd,AsyncByteQueue:Uh,RecordBatchReader:jr,RecordBatchFileReader:V1,RecordBatchStreamReader:hp,AsyncRecordBatchFileReader:rz,AsyncRecordBatchStreamReader:oy,RecordBatchWriter:rm,RecordBatchFileWriter:om,RecordBatchStreamWriter:am,RecordBatchJSONWriter:J2,tableFromIPC:fz,tableToIPC:Nne,MessageReader:Y2,AsyncMessageReader:nz,JSONMessageReader:iz,Message:Di,RecordBatch:Nn,util:Cne,Builder:Qi,makeBuilder:Zf,builderThroughIterable:V$,builderThroughAsyncIterable:Dte,BinaryBuilder:x2,BoolBuilder:S$,DateBuilder:Qy,DateDayBuilder:B2,DateMillisecondBuilder:k2,DecimalBuilder:I2,DictionaryBuilder:x$,FixedSizeBinaryBuilder:F2,FixedSizeListBuilder:B$,FloatBuilder:Zy,Float16Builder:k$,Float32Builder:I$,Float64Builder:F$,IntervalBuilder:em,IntervalDayTimeBuilder:O2,IntervalYearMonthBuilder:M2,IntBuilder:el,Int8Builder:O$,Int16Builder:M$,Int32Builder:A$,Int64Builder:N$,Uint8Builder:C$,Uint16Builder:R$,Uint32Builder:L$,Uint64Builder:P$,ListBuilder:D$,MapBuilder:j$,NullBuilder:U$,StructBuilder:$$,TimestampBuilder:Nu,TimestampSecondBuilder:A2,TimestampMillisecondBuilder:N2,TimestampMicrosecondBuilder:C2,TimestampNanosecondBuilder:R2,TimeBuilder:Cu,TimeSecondBuilder:L2,TimeMillisecondBuilder:P2,TimeMicrosecondBuilder:D2,TimeNanosecondBuilder:j2,UnionBuilder:z1,DenseUnionBuilder:q$,SparseUnionBuilder:z$,Utf8Builder:U2},Symbol.toStringTag,{value:"Module"}));var Lne=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pne(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Dne(t){var e=t.default;if(typeof e=="function"){var n=function(){return e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var s=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:function(){return t[i]}})}),n}function jne(t){for(var e=new Array(t),n=0;n<t;++n)e[n]=n;return e}var Une=jne;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var $ne=function(t){return t!=null&&(uz(t)||zne(t)||!!t._isBuffer)};function uz(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function zne(t){return typeof t.readFloatLE=="function"&&typeof t.slice=="function"&&uz(t.slice(0,0))}var qne=Une,Gne=$ne,Vne=typeof Float64Array<"u";function Wne(t,e){return t[0]-e[0]}function Hne(){var t=this.stride,e=new Array(t.length),n;for(n=0;n<e.length;++n)e[n]=[Math.abs(t[n]),n];e.sort(Wne);var i=new Array(e.length);for(n=0;n<i.length;++n)i[n]=e[n][1];return i}function Yne(t,e){var n=["View",e,"d",t].join("");e<0&&(n="View_Nil"+t);var i=t==="generic";if(e===-1){var s="function "+n+"(a){this.data=a;};var proto="+n+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+n+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+n+"(a){return new "+n+"(a);}",T=new Function(s);return T()}else if(e===0){var s="function "+n+"(a,d) {this.data = a;this.offset = d};var proto="+n+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+n+"_copy() {return new "+n+"(this.data,this.offset)};proto.pick=function "+n+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+n+"_get(){return "+(i?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+n+"_set(v){return "+(i?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+n+"(a,b,c,d){return new "+n+"(a,d)}",T=new Function("TrivialArray",s);return T(gT[t][0])}var s=["'use strict'"],o=qne(e),c=o.map(function(b){return"i"+b}),d="this.offset+"+o.map(function(b){return"this.stride["+b+"]*i"+b}).join("+"),f=o.map(function(b){return"b"+b}).join(","),u=o.map(function(b){return"c"+b}).join(",");s.push("function "+n+"(a,"+f+","+u+",d){this.data=a","this.shape=["+f+"]","this.stride=["+u+"]","this.offset=d|0}","var proto="+n+".prototype","proto.dtype='"+t+"'","proto.dimension="+e),s.push("Object.defineProperty(proto,'size',{get:function "+n+"_size(){return "+o.map(function(b){return"this.shape["+b+"]"}).join("*"),"}})"),e===1?s.push("proto.order=[0]"):(s.push("Object.defineProperty(proto,'order',{get:"),e<4?(s.push("function "+n+"_order(){"),e===2?s.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):e===3&&s.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):s.push("ORDER})")),s.push("proto.set=function "+n+"_set("+c.join(",")+",v){"),i?s.push("return this.data.set("+d+",v)}"):s.push("return this.data["+d+"]=v}"),s.push("proto.get=function "+n+"_get("+c.join(",")+"){"),i?s.push("return this.data.get("+d+")}"):s.push("return this.data["+d+"]}"),s.push("proto.index=function "+n+"_index(",c.join(),"){return "+d+"}"),s.push("proto.hi=function "+n+"_hi("+c.join(",")+"){return new "+n+"(this.data,"+o.map(function(b){return["(typeof i",b,"!=='number'||i",b,"<0)?this.shape[",b,"]:i",b,"|0"].join("")}).join(",")+","+o.map(function(b){return"this.stride["+b+"]"}).join(",")+",this.offset)}");var a=o.map(function(b){return"a"+b+"=this.shape["+b+"]"}),_=o.map(function(b){return"c"+b+"=this.stride["+b+"]"});s.push("proto.lo=function "+n+"_lo("+c.join(",")+"){var b=this.offset,d=0,"+a.join(",")+","+_.join(","));for(var w=0;w<e;++w)s.push("if(typeof i"+w+"==='number'&&i"+w+">=0){d=i"+w+"|0;b+=c"+w+"*d;a"+w+"-=d}");s.push("return new "+n+"(this.data,"+o.map(function(b){return"a"+b}).join(",")+","+o.map(function(b){return"c"+b}).join(",")+",b)}"),s.push("proto.step=function "+n+"_step("+c.join(",")+"){var "+o.map(function(b){return"a"+b+"=this.shape["+b+"]"}).join(",")+","+o.map(function(b){return"b"+b+"=this.stride["+b+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var w=0;w<e;++w)s.push("if(typeof i"+w+"==='number'){d=i"+w+"|0;if(d<0){c+=b"+w+"*(a"+w+"-1);a"+w+"=ceil(-a"+w+"/d)}else{a"+w+"=ceil(a"+w+"/d)}b"+w+"*=d}");s.push("return new "+n+"(this.data,"+o.map(function(b){return"a"+b}).join(",")+","+o.map(function(b){return"b"+b}).join(",")+",c)}");for(var m=new Array(e),l=new Array(e),w=0;w<e;++w)m[w]="a[i"+w+"]",l[w]="b[i"+w+"]";s.push("proto.transpose=function "+n+"_transpose("+c+"){"+c.map(function(b,S){return b+"=("+b+"===undefined?"+S+":"+b+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+n+"(this.data,"+m.join(",")+","+l.join(",")+",this.offset)}"),s.push("proto.pick=function "+n+"_pick("+c+"){var a=[],b=[],c=this.offset");for(var w=0;w<e;++w)s.push("if(typeof i"+w+"==='number'&&i"+w+">=0){c=(c+this.stride["+w+"]*i"+w+")|0}else{a.push(this.shape["+w+"]);b.push(this.stride["+w+"])}");s.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),s.push("return function construct_"+n+"(data,shape,stride,offset){return new "+n+"(data,"+o.map(function(b){return"shape["+b+"]"}).join(",")+","+o.map(function(b){return"stride["+b+"]"}).join(",")+",offset)}");var T=new Function("CTOR_LIST","ORDER",s.join(`
`));return T(gT[t],Hne)}function Xne(t){if(Gne(t))return"buffer";if(Vne)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(t)?"array":"generic"}var gT={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function Kne(t,e,n,i){if(t===void 0){var u=gT.array[0];return u([])}else typeof t=="number"&&(t=[t]);e===void 0&&(e=[t.length]);var s=e.length;if(n===void 0){n=new Array(s);for(var o=s-1,c=1;o>=0;--o)n[o]=c,c*=e[o]}if(i===void 0){i=0;for(var o=0;o<s;++o)n[o]<0&&(i-=(e[o]-1)*n[o])}for(var d=Xne(t),f=gT[d];f.length<=s+1;)f.push(Yne(d,f.length-1));var u=f[s+1];return u(t,e,n,i)}var Jne=Kne,l_="n",wh="d",df="s",_T="p",ff="o",v0="i",Qne=eie;function lk(t,e,n){if(n===0){for(var i=[[]],s=0;s<e.length;++s)if(!e[s])for(var o=i.length,c=0;c<o;++c){var d=i[c].slice();d.push(df+s),i.push(d)}if(i.length===1)return"";var f=[];t==="generic"?f.push(wh,".set(",ff,",",wh,".get(",ff,")+"):f.push(wh,"[",ff,"]+=");for(var s=1;s<i.length;++s){var d=i[s],u=(d.length+1)%2;s>1&&!u?f.push("+"):u&&f.push("-"),t==="generic"?f.push(wh,".get("):f.push(wh,"["),f.push(ff,"-",d.join("-")),t==="generic"?f.push(")"):f.push("]")}return t==="generic"?f.push(");"):f.push(";"),f.join("")}e[n-1]=!0;var a=[lk(t,e,n-1),ff,"+=",_T,n-1,";for(",v0,n-1,"=1;",v0,n-1,"<",l_,n-1,";++",v0,n-1,"){"];return e[n-1]=!1,a.push(lk(t,e,n-1),ff,"+=",_T,n-1,";}"),a.join("")}function Zne(t,e){for(var n=["prefixSum",e.length,"d",t,"s",e.join("s")].join(""),i=["function ",n,"(arr){var ",wh,"=arr.data,",l_,"=arr.shape,",df,"=arr.stride,",ff,"=arr.offset,"],s=e.length,o=0;o<s;++o)i.push(l_,o,"=",l_,"[",e[o],"],");for(var o=0;o<s;++o)i.push(df,o,"=",df,"[",e[o],"],");for(var o=0;o<s;++o)i.push(v0,o,"=0,");for(var o=s-1;o>0;--o)i.push(_T,o,"=",df,o,"-",l_,o-1,"*",df,o-1,",");i.push(_T,"0=",df,0,";");for(var c=new Array(s),o=0;o<s;++o)c[o]=!0;i.push(lk(t,c,s),"}return ",n);var d=new Function(i.join(""));return d()}var eP={};function eie(t){var e=t.dtype+t.order.join(),n=eP[e];return n||(n=eP[e]=Zne(t.dtype,t.order)),n(t),t}var ck={};function tie(t,e){for(var n=1,i=t.length,s=t[0],o=t[0],c=1;c<i;++c)if(o=s,s=t[c],e(s,o)){if(c===n){n++;continue}t[n++]=s}return t.length=n,t}function nie(t){for(var e=1,n=t.length,i=t[0],s=t[0],o=1;o<n;++o,s=i)if(s=i,i=t[o],i!==s){if(o===e){e++;continue}t[e++]=i}return t.length=e,t}function iie(t,e,n){return t.length===0?t:e?(n||t.sort(e),tie(t,e)):(n||t.sort(),nie(t))}var sie=iie,rie=sie;function hz(t,e,n){var i=t.length,s=e.arrayArgs.length,o=e.indexArgs.length>0,c=[],d=[],f=0,u=0,a,_;for(a=0;a<i;++a)d.push(["i",a,"=0"].join(""));for(_=0;_<s;++_)for(a=0;a<i;++a)u=f,f=t[a],a===0?d.push(["d",_,"s",a,"=t",_,"p",f].join("")):d.push(["d",_,"s",a,"=(t",_,"p",f,"-s",u,"*t",_,"p",u,")"].join(""));for(d.length>0&&c.push("var "+d.join(",")),a=i-1;a>=0;--a)f=t[a],c.push(["for(i",a,"=0;i",a,"<s",f,";++i",a,"){"].join(""));for(c.push(n),a=0;a<i;++a){for(u=f,f=t[a],_=0;_<s;++_)c.push(["p",_,"+=d",_,"s",a].join(""));o&&(a>0&&c.push(["index[",u,"]-=s",u].join("")),c.push(["++index[",f,"]"].join(""))),c.push("}")}return c.join(`
`)}function aie(t,e,n,i){for(var s=e.length,o=n.arrayArgs.length,c=n.blockSize,d=n.indexArgs.length>0,f=[],u=0;u<o;++u)f.push(["var offset",u,"=p",u].join(""));for(var u=t;u<s;++u)f.push(["for(var j"+u+"=SS[",e[u],"]|0;j",u,">0;){"].join("")),f.push(["if(j",u,"<",c,"){"].join("")),f.push(["s",e[u],"=j",u].join("")),f.push(["j",u,"=0"].join("")),f.push(["}else{s",e[u],"=",c].join("")),f.push(["j",u,"-=",c,"}"].join("")),d&&f.push(["index[",e[u],"]=j",u].join(""));for(var u=0;u<o;++u){for(var a=["offset"+u],_=t;_<s;++_)a.push(["j",_,"*t",u,"p",e[_]].join(""));f.push(["p",u,"=(",a.join("+"),")"].join(""))}f.push(hz(e,n,i));for(var u=t;u<s;++u)f.push("}");return f.join(`
`)}function oie(t){for(var e=0,n=t[0].length;e<n;){for(var i=1;i<t.length;++i)if(t[i][e]!==t[0][e])return e;++e}return e}function ux(t,e,n){for(var i=t.body,s=[],o=[],c=0;c<t.args.length;++c){var d=t.args[c];if(!(d.count<=0)){var f=new RegExp(d.name,"g"),u="",a=e.arrayArgs.indexOf(c);switch(e.argTypes[c]){case"offset":var _=e.offsetArgIndex.indexOf(c),w=e.offsetArgs[_];a=w.array,u="+q"+_;case"array":u="p"+a+u;var m="l"+c,l="a"+a;if(e.arrayBlockIndices[a]===0)d.count===1?n[a]==="generic"?d.lvalue?(s.push(["var ",m,"=",l,".get(",u,")"].join("")),i=i.replace(f,m),o.push([l,".set(",u,",",m,")"].join(""))):i=i.replace(f,[l,".get(",u,")"].join("")):i=i.replace(f,[l,"[",u,"]"].join("")):n[a]==="generic"?(s.push(["var ",m,"=",l,".get(",u,")"].join("")),i=i.replace(f,m),d.lvalue&&o.push([l,".set(",u,",",m,")"].join(""))):(s.push(["var ",m,"=",l,"[",u,"]"].join("")),i=i.replace(f,m),d.lvalue&&o.push([l,"[",u,"]=",m].join("")));else{for(var T=[d.name],b=[u],S=0;S<Math.abs(e.arrayBlockIndices[a]);S++)T.push("\\s*\\[([^\\]]+)\\]"),b.push("$"+(S+1)+"*t"+a+"b"+S);if(f=new RegExp(T.join(""),"g"),u=b.join("+"),n[a]==="generic")throw new Error("cwise: Generic arrays not supported in combination with blocks!");i=i.replace(f,[l,"[",u,"]"].join(""))}break;case"scalar":i=i.replace(f,"Y"+e.scalarArgs.indexOf(c));break;case"index":i=i.replace(f,"index");break;case"shape":i=i.replace(f,"shape");break}}}return[s.join(`
`),i,o.join(`
`)].join(`
`).trim()}function lie(t){for(var e=new Array(t.length),n=!0,i=0;i<t.length;++i){var s=t[i],o=s.match(/\d+/);o?o=o[0]:o="",s.charAt(0)===0?e[i]="u"+s.charAt(1)+o:e[i]=s.charAt(0)+o,i>0&&(n=n&&e[i]===e[i-1])}return n?e[0]:e.join("")}function cie(t,e){for(var n=e[1].length-Math.abs(t.arrayBlockIndices[0])|0,i=new Array(t.arrayArgs.length),s=new Array(t.arrayArgs.length),o=0;o<t.arrayArgs.length;++o)s[o]=e[2*o],i[o]=e[2*o+1];for(var c=[],d=[],f=[],u=[],a=[],o=0;o<t.arrayArgs.length;++o){t.arrayBlockIndices[o]<0?(f.push(0),u.push(n),c.push(n),d.push(n+t.arrayBlockIndices[o])):(f.push(t.arrayBlockIndices[o]),u.push(t.arrayBlockIndices[o]+n),c.push(0),d.push(t.arrayBlockIndices[o]));for(var _=[],w=0;w<i[o].length;w++)f[o]<=i[o][w]&&i[o][w]<u[o]&&_.push(i[o][w]-f[o]);a.push(_)}for(var m=["SS"],l=["'use strict'"],T=[],w=0;w<n;++w)T.push(["s",w,"=SS[",w,"]"].join(""));for(var o=0;o<t.arrayArgs.length;++o){m.push("a"+o),m.push("t"+o),m.push("p"+o);for(var w=0;w<n;++w)T.push(["t",o,"p",w,"=t",o,"[",f[o]+w,"]"].join(""));for(var w=0;w<Math.abs(t.arrayBlockIndices[o]);++w)T.push(["t",o,"b",w,"=t",o,"[",c[o]+w,"]"].join(""))}for(var o=0;o<t.scalarArgs.length;++o)m.push("Y"+o);if(t.shapeArgs.length>0&&T.push("shape=SS.slice(0)"),t.indexArgs.length>0){for(var b=new Array(n),o=0;o<n;++o)b[o]="0";T.push(["index=[",b.join(","),"]"].join(""))}for(var o=0;o<t.offsetArgs.length;++o){for(var S=t.offsetArgs[o],x=[],w=0;w<S.offset.length;++w)S.offset[w]!==0&&(S.offset[w]===1?x.push(["t",S.array,"p",w].join("")):x.push([S.offset[w],"*t",S.array,"p",w].join("")));x.length===0?T.push("q"+o+"=0"):T.push(["q",o,"=",x.join("+")].join(""))}var B=rie([].concat(t.pre.thisVars).concat(t.body.thisVars).concat(t.post.thisVars));T=T.concat(B),T.length>0&&l.push("var "+T.join(","));for(var o=0;o<t.arrayArgs.length;++o)l.push("p"+o+"|=0");t.pre.body.length>3&&l.push(ux(t.pre,t,s));var F=ux(t.body,t,s),k=oie(a);k<n?l.push(aie(k,a[0],t,F)):l.push(hz(a[0],t,F)),t.post.body.length>3&&l.push(ux(t.post,t,s)),t.debug&&console.log("-----Generated cwise routine for ",e,`:
`+l.join(`
`)+`
----------`);var M=[t.funcName||"unnamed","_cwise_loop_",i[0].join("s"),"m",k,lie(s)].join(""),A=new Function(["function ",M,"(",m.join(","),"){",l.join(`
`),"} return ",M].join(""));return A()}var die=cie,fie=die;function uie(t){var e=["'use strict'","var CACHED={}"],n=[],i=t.funcName+"_cwise_thunk";e.push(["return function ",i,"(",t.shimArgs.join(","),"){"].join(""));for(var s=[],o=[],c=[["array",t.arrayArgs[0],".shape.slice(",Math.max(0,t.arrayBlockIndices[0]),t.arrayBlockIndices[0]<0?","+t.arrayBlockIndices[0]+")":")"].join("")],d=[],f=[],u=0;u<t.arrayArgs.length;++u){var a=t.arrayArgs[u];n.push(["t",a,"=array",a,".dtype,","r",a,"=array",a,".order"].join("")),s.push("t"+a),s.push("r"+a),o.push("t"+a),o.push("r"+a+".join()"),c.push("array"+a+".data"),c.push("array"+a+".stride"),c.push("array"+a+".offset|0"),u>0&&(d.push("array"+t.arrayArgs[0]+".shape.length===array"+a+".shape.length+"+(Math.abs(t.arrayBlockIndices[0])-Math.abs(t.arrayBlockIndices[u]))),f.push("array"+t.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[0])+"]===array"+a+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[u])+"]"))}t.arrayArgs.length>1&&(e.push("if (!("+d.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),e.push("for(var shapeIndex=array"+t.arrayArgs[0]+".shape.length-"+Math.abs(t.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),e.push("if (!("+f.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),e.push("}"));for(var u=0;u<t.scalarArgs.length;++u)c.push("scalar"+t.scalarArgs[u]);n.push(["type=[",o.join(","),"].join()"].join("")),n.push("proc=CACHED[type]"),e.push("var "+n.join(",")),e.push(["if(!proc){","CACHED[type]=proc=compile([",s.join(","),"])}","return proc(",c.join(","),")}"].join("")),t.debug&&console.log(`-----Generated thunk:
`+e.join(`
`)+`
----------`);var _=new Function("compile",e.join(`
`));return _(fie.bind(void 0,t))}var hie=uie,pie=hie;function gie(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function _ie(t){var e=new gie;e.pre=t.pre,e.body=t.body,e.post=t.post;var n=t.args.slice(0);e.argTypes=n;for(var i=0;i<n.length;++i){var s=n[i];if(s==="array"||typeof s=="object"&&s.blockIndices){if(e.argTypes[i]="array",e.arrayArgs.push(i),e.arrayBlockIndices.push(s.blockIndices?s.blockIndices:0),e.shimArgs.push("array"+i),i<e.pre.args.length&&e.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array args");if(i<e.post.args.length&&e.post.args[i].count>0)throw new Error("cwise: post() block may not reference array args")}else if(s==="scalar")e.scalarArgs.push(i),e.shimArgs.push("scalar"+i);else if(s==="index"){if(e.indexArgs.push(i),i<e.pre.args.length&&e.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array index");if(i<e.body.args.length&&e.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array index");if(i<e.post.args.length&&e.post.args[i].count>0)throw new Error("cwise: post() block may not reference array index")}else if(s==="shape"){if(e.shapeArgs.push(i),i<e.pre.args.length&&e.pre.args[i].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(i<e.body.args.length&&e.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array shape");if(i<e.post.args.length&&e.post.args[i].lvalue)throw new Error("cwise: post() block may not write to array shape")}else if(typeof s=="object"&&s.offset)e.argTypes[i]="offset",e.offsetArgs.push({array:s.array,offset:s.offset}),e.offsetArgIndex.push(i);else throw new Error("cwise: Unknown argument type "+n[i])}if(e.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(e.pre.args.length>n.length)throw new Error("cwise: Too many arguments in pre() block");if(e.body.args.length>n.length)throw new Error("cwise: Too many arguments in body() block");if(e.post.args.length>n.length)throw new Error("cwise: Too many arguments in post() block");return e.debug=!!t.printCode||!!t.debug,e.funcName=t.funcName||"cwise",e.blockSize=t.blockSize||64,pie(e)}var yie=_ie;(function(t){var e=yie,n={body:"",args:[],thisVars:[],localVars:[]};function i(w){if(!w)return n;for(var m=0;m<w.args.length;++m){var l=w.args[m];m===0?w.args[m]={name:l,lvalue:!0,rvalue:!!w.rvalue,count:w.count||1}:w.args[m]={name:l,lvalue:!1,rvalue:!0,count:1}}return w.thisVars||(w.thisVars=[]),w.localVars||(w.localVars=[]),w}function s(w){return e({args:w.args,pre:i(w.pre),body:i(w.body),post:i(w.proc),funcName:w.funcName})}function o(w){for(var m=[],l=0;l<w.args.length;++l)m.push("a"+l);var T=new Function("P",["return function ",w.funcName,"_ndarrayops(",m.join(","),") {P(",m.join(","),");return a0}"].join(""));return T(s(w))}var c={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var w in c){var m=c[w];t[w]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+m+"c"},funcName:w}),t[w+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a"+m+"=b"},rvalue:!0,funcName:w+"eq"}),t[w+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+m+"s"},funcName:w+"s"}),t[w+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a"+m+"=s"},rvalue:!0,funcName:w+"seq"})}})();var d={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var w in d){var m=d[w];t[w]=o({args:["array","array"],body:{args:["a","b"],body:"a="+m+"b"},funcName:w}),t[w+"eq"]=o({args:["array"],body:{args:["a"],body:"a="+m+"a"},rvalue:!0,count:2,funcName:w+"eq"})}})();var f={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var w in f){var m=f[w];t[w]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+m+"c"},funcName:w}),t[w+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+m+"s"},funcName:w+"s"}),t[w+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a=a"+m+"b"},rvalue:!0,count:2,funcName:w+"eq"}),t[w+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+m+"s"},rvalue:!0,count:2,funcName:w+"seq"})}})();var u=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];(function(){for(var w=0;w<u.length;++w){var m=u[w];t[m]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:m}),t[m+"eq"]=o({args:["array"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:m+"eq"})}})();var a=["max","min","atan2","pow"];(function(){for(var w=0;w<a.length;++w){var m=a[w];t[m]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:m}),t[m+"s"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:m+"s"}),t[m+"eq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:m+"eq"}),t[m+"seq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:m+"seq"})}})();var _=["atan2","pow"];(function(){for(var w=0;w<_.length;++w){var m=_[w];t[m+"op"]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:m+"op"}),t[m+"ops"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:m+"ops"}),t[m+"opeq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:m+"opeq"}),t[m+"opseq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:m+"opseq"})}})(),t.any=e({args:["array"],pre:n,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),t.all=e({args:["array"],pre:n,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),t.sum=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),t.prod=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),t.norm2squared=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),t.norm2=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),t.norminf=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),t.norm1=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),t.sup=e({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.inf=e({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.argmin=e({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.argmax=e({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.random=o({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),t.assign=o({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),t.assigns=o({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),t.equals=e({args:["array","array"],pre:n,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})})(ck);class Li{constructor(e,n,i,s){Vn(this,"ndarray");Vn(this,"data");this.data=e,this.ndarray=Jne(e,n,i,s)}get shape(){return this.ndarray.shape}get offset(){return this.ndarray.offset}get stride(){return this.ndarray.stride}get size(){return this.ndarray.size}set shape(e){this.ndarray.shape=e}set offset(e){this.ndarray.offset=e}set stride(e){this.ndarray.stride=e}get(...e){return this.ndarray.get(...e)}set(...e){return this.ndarray.set(...e)}zeros(){this.data.fill(0)}increment(e,n=1){return this.set(...e,this.get(...e)+n),this}addOverride(e){ck.addeq(this.ndarray,e.ndarray)}sub(e){const n=new Li(new Int32Array(this.size),this.shape);return ck.sub(n.ndarray,this.ndarray,e.ndarray),n}slice(...e){const n=this.ndarray.pick(...e);return new Li(this.data,n.shape,n.stride,n.offset)}cumulativeSum(){return Qne(this.ndarray),this}static typedArray(e,n,i,s,o){const c=new e(n);return new Li(c,i,s,o)}static allocCumulative(e,n,i,s){return this.typedArray(Float32Array,e,n,i,s)}static allocCounts(e,n,i,s){return this.typedArray(Uint32Array,e,n,i,s)}}function jl(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function mie(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function lm(t){let e,n,i;t.length!==2?(e=jl,n=(d,f)=>jl(t(d),f),i=(d,f)=>t(d)-f):(e=t===jl||t===mie?t:wie,n=t,i=t);function s(d,f,u=0,a=d.length){if(u<a){if(e(f,f)!==0)return a;do{const _=u+a>>>1;n(d[_],f)<0?u=_+1:a=_}while(u<a)}return u}function o(d,f,u=0,a=d.length){if(u<a){if(e(f,f)!==0)return a;do{const _=u+a>>>1;n(d[_],f)<=0?u=_+1:a=_}while(u<a)}return u}function c(d,f,u=0,a=d.length){const _=s(d,f,u,a-1);return _>u&&i(d[_-1],f)>-i(d[_],f)?_-1:_}return{left:s,center:c,right:o}}function wie(){return 0}function pz(t){return t===null?NaN:+t}function*bie(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of t)(i=e(i,++n,t))!=null&&(i=+i)>=i&&(yield i)}}const gz=lm(jl),yT=gz.right,Tie=gz.left;lm(pz).center;const cm=yT;function vie(t,e){let n=0,i,s=0,o=0;if(e===void 0)for(let c of t)c!=null&&(c=+c)>=c&&(i=c-s,s+=i/++n,o+=i*(c-s));else{let c=-1;for(let d of t)(d=e(d,++c,t))!=null&&(d=+d)>=d&&(i=d-s,s+=i/++n,o+=i*(d-s))}if(n>1)return o/(n-1)}function Eie(t,e){const n=vie(t,e);return n&&Math.sqrt(n)}class ps{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let i=0;for(let s=0;s<this._n&&s<32;s++){const o=n[s],c=e+o,d=Math.abs(e)<Math.abs(o)?e-(c-o):o-(c-e);d&&(n[i++]=d),e=c}return n[i]=e,this._n=i+1,this}valueOf(){const e=this._partials;let n=this._n,i,s,o,c=0;if(n>0){for(c=e[--n];n>0&&(i=c,s=e[--n],c=i+s,o=s-(c-i),!o););n>0&&(o<0&&e[n-1]<0||o>0&&e[n-1]>0)&&(s=o*2,i=c+s,s==i-c&&(c=i))}return c}}class tP extends Map{constructor(e,n=mz){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[i,s]of e)this.set(i,s)}get(e){return super.get(dk(this,e))}has(e){return super.has(dk(this,e))}set(e,n){return super.set(_z(this,e),n)}delete(e){return super.delete(yz(this,e))}}class mT extends Set{constructor(e,n=mz){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const i of e)this.add(i)}has(e){return super.has(dk(this,e))}add(e){return super.add(_z(this,e))}delete(e){return super.delete(yz(this,e))}}function dk({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function _z({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function yz({_intern:t,_key:e},n){const i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function mz(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Sie(t,e){return Array.from(e,n=>t[n])}function xie(t=jl){if(t===jl)return wz;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const i=t(e,n);return i||i===0?i:(t(n,n)===0)-(t(e,e)===0)}}function wz(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Bie=Math.sqrt(50),kie=Math.sqrt(10),Iie=Math.sqrt(2);function wT(t,e,n){const i=(e-t)/Math.max(0,n),s=Math.floor(Math.log10(i)),o=i/Math.pow(10,s),c=o>=Bie?10:o>=kie?5:o>=Iie?2:1;let d,f,u;return s<0?(u=Math.pow(10,-s)/c,d=Math.round(t*u),f=Math.round(e*u),d/u<t&&++d,f/u>e&&--f,u=-u):(u=Math.pow(10,s)*c,d=Math.round(t/u),f=Math.round(e/u),d*u<t&&++d,f*u>e&&--f),f<d&&.5<=n&&n<2?wT(t,e,n*2):[d,f,u]}function fk(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const i=e<t,[s,o,c]=i?wT(e,t,n):wT(t,e,n);if(!(o>=s))return[];const d=o-s+1,f=new Array(d);if(i)if(c<0)for(let u=0;u<d;++u)f[u]=(o-u)/-c;else for(let u=0;u<d;++u)f[u]=(o-u)*c;else if(c<0)for(let u=0;u<d;++u)f[u]=(s+u)/-c;else for(let u=0;u<d;++u)f[u]=(s+u)*c;return f}function uk(t,e,n){return e=+e,t=+t,n=+n,wT(t,e,n)[2]}function rd(t,e,n){e=+e,t=+t,n=+n;const i=e<t,s=i?uk(e,t,n):uk(t,e,n);return(i?-1:1)*(s<0?1/-s:s)}function Uf(t,e){let n;if(e===void 0)for(const i of t)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let s of t)(s=e(s,++i,t))!=null&&(n<s||n===void 0&&s>=s)&&(n=s)}return n}function hk(t,e){let n;if(e===void 0)for(const i of t)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let s of t)(s=e(s,++i,t))!=null&&(n>s||n===void 0&&s>=s)&&(n=s)}return n}function bz(t,e,n=0,i=1/0,s){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(t.length-1,i)),!(n<=e&&e<=i))return t;for(s=s===void 0?wz:xie(s);i>n;){if(i-n>600){const f=i-n+1,u=e-n+1,a=Math.log(f),_=.5*Math.exp(2*a/3),w=.5*Math.sqrt(a*_*(f-_)/f)*(u-f/2<0?-1:1),m=Math.max(n,Math.floor(e-u*_/f+w)),l=Math.min(i,Math.floor(e+(f-u)*_/f+w));bz(t,e,m,l,s)}const o=t[e];let c=n,d=i;for(Cg(t,n,e),s(t[i],o)>0&&Cg(t,n,i);c<d;){for(Cg(t,c,d),++c,--d;s(t[c],o)<0;)++c;for(;s(t[d],o)>0;)--d}s(t[n],o)===0?Cg(t,n,d):(++d,Cg(t,d,i)),d<=e&&(n=d+1),e<=d&&(i=d-1)}return t}function Cg(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function pk(t,e,n){if(t=Float64Array.from(bie(t,n)),!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return hk(t);if(e>=1)return Uf(t);var i,s=(i-1)*e,o=Math.floor(s),c=Uf(bz(t,o).subarray(0,o+1)),d=hk(t.subarray(o+1));return c+(d-c)*(s-o)}}function Tz(t,e,n=pz){if(!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,s=(i-1)*e,o=Math.floor(s),c=+n(t[o],o,t),d=+n(t[o+1],o+1,t);return c+(d-c)*(s-o)}}function Fie(t,e){let n=0,i=0;if(e===void 0)for(let s of t)s!=null&&(s=+s)>=s&&(++n,i+=s);else{let s=-1;for(let o of t)(o=e(o,++s,t))!=null&&(o=+o)>=o&&(++n,i+=o)}if(n)return i/n}function vz(t,e){return pk(t,.5,e)}function*Oie(t){for(const e of t)yield*e}function Ez(t){return Array.from(Oie(t))}function hr(t,e,n){t=+t,e=+e,n=(s=arguments.length)<2?(e=t,t=0,1):s<3?1:+n;for(var i=-1,s=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(s);++i<s;)o[i]=t+i*n;return o}function Sz(t,e){let n=0;if(e===void 0)for(let i of t)(i=+i)&&(n+=i);else{let i=-1;for(let s of t)(s=+e(s,++i,t))&&(n+=s)}return n}function*xz(t,e){if(e==null)for(let n of t)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of t)i=e(i,++n,t),i!=null&&i!==""&&(i=+i)>=i&&(yield i)}}function nO(t,e,n){const i=Float64Array.from(xz(t,n));return i.sort(jl),e.map(s=>Tz(i,s))}function iO(t,e){return nO(t,[.25,.5,.75],e)}function sO(t,e){const n=t.length,i=Eie(t,e),s=iO(t,e),o=(s[2]-s[0])/1.34;return 1.06*(Math.min(i,o)||i||Math.abs(s[0])||1)*Math.pow(n,-.2)}function rO(t){const e=t.maxbins||20,n=t.base||10,i=Math.log(n),s=t.divide||[5,2];let o=t.extent[0],c=t.extent[1],d,f,u,a,_,w;const m=t.span||c-o||Math.abs(o)||1;if(t.step)d=t.step;else if(t.steps){for(a=m/e,_=0,w=t.steps.length;_<w&&t.steps[_]<a;++_);d=t.steps[Math.max(0,_-1)]}else{for(f=Math.ceil(Math.log(e)/i),u=t.minstep||0,d=Math.max(u,Math.pow(n,Math.round(Math.log(m)/i)-f));Math.ceil(m/d)>e;)d*=n;for(_=0,w=s.length;_<w;++_)a=d/s[_],a>=u&&m/a<=e&&(d=a)}a=Math.log(d);const l=a>=0?0:~~(-a/i)+1,T=Math.pow(n,-l-1);return(t.nice||t.nice===void 0)&&(a=Math.floor(o/d+T)*d,o=o<a?a-d:a,c=Math.ceil(c/d)*d),{start:o,stop:c===o?o+d:c,step:d}}var Wr=Math.random;function Mie(t){Wr=t}function Bz(t,e,n,i){if(!t.length)return[void 0,void 0];const s=Float64Array.from(xz(t,i)),o=s.length,c=e;let d,f,u,a;for(u=0,a=Array(c);u<c;++u){for(d=0,f=0;f<o;++f)d+=s[~~(Wr()*o)];a[u]=d/o}return a.sort(jl),[pk(a,n/2),pk(a,1-n/2)]}function kz(t,e,n,i){i=i||(w=>w);const s=t.length,o=new Float64Array(s);let c=0,d=1,f=i(t[0]),u=f,a=f+e,_;for(;d<s;++d){if(_=i(t[d]),_>=a){for(u=(f+u)/2;c<d;++c)o[c]=u;a=_+e,f=_}u=_}for(u=(f+u)/2;c<d;++c)o[c]=u;return n?Aie(o,e+e/4):o}function Aie(t,e){const n=t.length;let i=0,s=1,o,c;for(;t[i]===t[s];)++s;for(;s<n;){for(o=s+1;t[s]===t[o];)++o;if(t[s]-t[s-1]<e){for(c=s+(i+o-s-s>>1);c<s;)t[c++]=t[s];for(;c>s;)t[c--]=t[i]}i=s,s=o}return t}function Nie(t){return function(){return t=(1103515245*t+12345)%2147483647,t/2147483647}}function Cie(t,e){e==null&&(e=t,t=0);let n,i,s;const o={min(c){return arguments.length?(n=c||0,s=i-n,o):n},max(c){return arguments.length?(i=c||0,s=i-n,o):i},sample(){return n+Math.floor(s*Wr())},pdf(c){return c===Math.floor(c)&&c>=n&&c<i?1/s:0},cdf(c){const d=Math.floor(c);return d<n?0:d>=i?1:(d-n+1)/s},icdf(c){return c>=0&&c<=1?n-1+Math.floor(c*s):NaN}};return o.min(t).max(e)}const Iz=Math.sqrt(2*Math.PI),Rie=Math.SQRT2;let Rg=NaN;function H1(t,e){t=t||0,e=e==null?1:e;let n=0,i=0,s,o;if(Rg===Rg)n=Rg,Rg=NaN;else{do n=Wr()*2-1,i=Wr()*2-1,s=n*n+i*i;while(s===0||s>1);o=Math.sqrt(-2*Math.log(s)/s),n*=o,Rg=i*o}return t+n*e}function aO(t,e,n){n=n==null?1:n;const i=(t-(e||0))/n;return Math.exp(-.5*i*i)/(n*Iz)}function Y1(t,e,n){e=e||0,n=n==null?1:n;const i=(t-e)/n,s=Math.abs(i);let o;if(s>37)o=0;else{const c=Math.exp(-s*s/2);let d;s<7.07106781186547?(d=.0352624965998911*s+.700383064443688,d=d*s+6.37396220353165,d=d*s+33.912866078383,d=d*s+112.079291497871,d=d*s+221.213596169931,d=d*s+220.206867912376,o=c*d,d=.0883883476483184*s+1.75566716318264,d=d*s+16.064177579207,d=d*s+86.7807322029461,d=d*s+296.564248779674,d=d*s+637.333633378831,d=d*s+793.826512519948,d=d*s+440.413735824752,o=o/d):(d=s+.65,d=s+4/d,d=s+3/d,d=s+2/d,d=s+1/d,o=c/d/2.506628274631)}return i>0?1-o:o}function X1(t,e,n){return t<0||t>1?NaN:(e||0)+(n==null?1:n)*Rie*Lie(2*t-1)}function Lie(t){let e=-Math.log((1-t)*(1+t)),n;return e<6.25?(e-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*e,n=128584807152564e-32+n*e,n=11157877678025181e-33+n*e,n=-1333171662854621e-31+n*e,n=20972767875968562e-33+n*e,n=6637638134358324e-30+n*e,n=-4054566272975207e-29+n*e,n=-8151934197605472e-29+n*e,n=26335093153082323e-28+n*e,n=-12975133253453532e-27+n*e,n=-5415412054294628e-26+n*e,n=10512122733215323e-25+n*e,n=-4112633980346984e-24+n*e,n=-29070369957882005e-24+n*e,n=42347877827932404e-23+n*e,n=-13654692000834679e-22+n*e,n=-13882523362786469e-21+n*e,n=.00018673420803405714+n*e,n=-.000740702534166267+n*e,n=-.006033670871430149+n*e,n=.24015818242558962+n*e,n=1.6536545626831027+n*e):e<16?(e=Math.sqrt(e)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*e,n=-27517406297064545e-23+n*e,n=18239629214389228e-24+n*e,n=15027403968909828e-22+n*e,n=-4013867526981546e-21+n*e,n=29234449089955446e-22+n*e,n=12475304481671779e-21+n*e,n=-47318229009055734e-21+n*e,n=6828485145957318e-20+n*e,n=24031110387097894e-21+n*e,n=-.0003550375203628475+n*e,n=.0009532893797373805+n*e,n=-.0016882755560235047+n*e,n=.002491442096107851+n*e,n=-.003751208507569241+n*e,n=.005370914553590064+n*e,n=1.0052589676941592+n*e,n=3.0838856104922208+n*e):Number.isFinite(e)?(e=Math.sqrt(e)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*e,n=15076572693500548e-25+n*e,n=-3789465440126737e-24+n*e,n=761570120807834e-23+n*e,n=-1496002662714924e-23+n*e,n=2914795345090108e-23+n*e,n=-6771199775845234e-23+n*e,n=22900482228026655e-23+n*e,n=-99298272942317e-20+n*e,n=4526062597223154e-21+n*e,n=-1968177810553167e-20+n*e,n=7599527703001776e-20+n*e,n=-.00021503011930044477+n*e,n=-.00013871931833623122+n*e,n=1.0103004648645344+n*e,n=4.849906401408584+n*e):n=1/0,n*t}function oO(t,e){let n,i;const s={mean(o){return arguments.length?(n=o||0,s):n},stdev(o){return arguments.length?(i=o==null?1:o,s):i},sample:()=>H1(n,i),pdf:o=>aO(o,n,i),cdf:o=>Y1(o,n,i),icdf:o=>X1(o,n,i)};return s.mean(t).stdev(e)}function lO(t,e){const n=oO();let i=0;const s={data(o){return arguments.length?(t=o,i=o?o.length:0,s.bandwidth(e)):t},bandwidth(o){return arguments.length?(e=o,!e&&t&&(e=sO(t)),s):e},sample(){return t[~~(Wr()*i)]+e*n.sample()},pdf(o){let c=0,d=0;for(;d<i;++d)c+=n.pdf((o-t[d])/e);return c/e/i},cdf(o){let c=0,d=0;for(;d<i;++d)c+=n.cdf((o-t[d])/e);return c/i},icdf(){throw Error("KDE icdf not supported.")}};return s.data(t)}function cO(t,e){return t=t||0,e=e==null?1:e,Math.exp(t+H1()*e)}function dO(t,e,n){if(t<=0)return 0;e=e||0,n=n==null?1:n;const i=(Math.log(t)-e)/n;return Math.exp(-.5*i*i)/(n*Iz*t)}function fO(t,e,n){return Y1(Math.log(t),e,n)}function uO(t,e,n){return Math.exp(X1(t,e,n))}function Fz(t,e){let n,i;const s={mean(o){return arguments.length?(n=o||0,s):n},stdev(o){return arguments.length?(i=o==null?1:o,s):i},sample:()=>cO(n,i),pdf:o=>dO(o,n,i),cdf:o=>fO(o,n,i),icdf:o=>uO(o,n,i)};return s.mean(t).stdev(e)}function Oz(t,e){let n=0,i;function s(c){const d=[];let f=0,u;for(u=0;u<n;++u)f+=d[u]=c[u]==null?1:+c[u];for(u=0;u<n;++u)d[u]/=f;return d}const o={weights(c){return arguments.length?(i=s(e=c||[]),o):e},distributions(c){return arguments.length?(c?(n=c.length,t=c):(n=0,t=[]),o.weights(e)):t},sample(){const c=Wr();let d=t[n-1],f=i[0],u=0;for(;u<n-1;f+=i[++u])if(c<f){d=t[u];break}return d.sample()},pdf(c){let d=0,f=0;for(;f<n;++f)d+=i[f]*t[f].pdf(c);return d},cdf(c){let d=0,f=0;for(;f<n;++f)d+=i[f]*t[f].cdf(c);return d},icdf(){throw Error("Mixture icdf not supported.")}};return o.distributions(t).weights(e)}function hO(t,e){return e==null&&(e=t==null?1:t,t=0),t+(e-t)*Wr()}function pO(t,e,n){return n==null&&(n=e==null?1:e,e=0),t>=e&&t<=n?1/(n-e):0}function gO(t,e,n){return n==null&&(n=e==null?1:e,e=0),t<e?0:t>n?1:(t-e)/(n-e)}function _O(t,e,n){return n==null&&(n=e==null?1:e,e=0),t>=0&&t<=1?e+t*(n-e):NaN}function Mz(t,e){let n,i;const s={min(o){return arguments.length?(n=o||0,s):n},max(o){return arguments.length?(i=o==null?1:o,s):i},sample:()=>hO(n,i),pdf:o=>pO(o,n,i),cdf:o=>gO(o,n,i),icdf:o=>_O(o,n,i)};return e==null&&(e=t==null?1:t,t=0),s.min(t).max(e)}function dm(t,e,n,i){const s=i-t*t,o=Math.abs(s)<1e-24?0:(n-t*e)/s;return[e-o*t,o]}function K1(t,e,n,i){t=t.filter(m=>{let l=e(m),T=n(m);return l!=null&&(l=+l)>=l&&T!=null&&(T=+T)>=T}),i&&t.sort((m,l)=>e(m)-e(l));const s=t.length,o=new Float64Array(s),c=new Float64Array(s);let d=0,f=0,u=0,a,_,w;for(w of t)o[d]=a=+e(w),c[d]=_=+n(w),++d,f+=(a-f)/d,u+=(_-u)/d;for(d=0;d<s;++d)o[d]-=f,c[d]-=u;return[o,c,f,u]}function fm(t,e,n,i){let s=-1,o,c;for(const d of t)o=e(d),c=n(d),o!=null&&(o=+o)>=o&&c!=null&&(c=+c)>=c&&i(o,c,++s)}function rg(t,e,n,i,s){let o=0,c=0;return fm(t,e,n,(d,f)=>{const u=f-s(d),a=f-i;o+=u*u,c+=a*a}),1-o/c}function yO(t,e,n){let i=0,s=0,o=0,c=0,d=0;fm(t,e,n,(a,_)=>{++d,i+=(a-i)/d,s+=(_-s)/d,o+=(a*_-o)/d,c+=(a*a-c)/d});const f=dm(i,s,o,c),u=a=>f[0]+f[1]*a;return{coef:f,predict:u,rSquared:rg(t,e,n,s,u)}}function Az(t,e,n){let i=0,s=0,o=0,c=0,d=0;fm(t,e,n,(a,_)=>{++d,a=Math.log(a),i+=(a-i)/d,s+=(_-s)/d,o+=(a*_-o)/d,c+=(a*a-c)/d});const f=dm(i,s,o,c),u=a=>f[0]+f[1]*Math.log(a);return{coef:f,predict:u,rSquared:rg(t,e,n,s,u)}}function Nz(t,e,n){const[i,s,o,c]=K1(t,e,n);let d=0,f=0,u=0,a=0,_=0,w,m,l;fm(t,e,n,(x,B)=>{w=i[_++],m=Math.log(B),l=w*B,d+=(B*m-d)/_,f+=(l-f)/_,u+=(l*m-u)/_,a+=(w*l-a)/_});const[T,b]=dm(f/c,d/c,u/c,a/c),S=x=>Math.exp(T+b*(x-o));return{coef:[Math.exp(T-b*o),b],predict:S,rSquared:rg(t,e,n,c,S)}}function Cz(t,e,n){let i=0,s=0,o=0,c=0,d=0,f=0;fm(t,e,n,(_,w)=>{const m=Math.log(_),l=Math.log(w);++f,i+=(m-i)/f,s+=(l-s)/f,o+=(m*l-o)/f,c+=(m*m-c)/f,d+=(w-d)/f});const u=dm(i,s,o,c),a=_=>u[0]*Math.pow(_,u[1]);return u[0]=Math.exp(u[0]),{coef:u,predict:a,rSquared:rg(t,e,n,d,a)}}function mO(t,e,n){const[i,s,o,c]=K1(t,e,n),d=i.length;let f=0,u=0,a=0,_=0,w=0,m,l,T,b;for(m=0;m<d;)l=i[m],T=s[m++],b=l*l,f+=(b-f)/m,u+=(b*l-u)/m,a+=(b*b-a)/m,_+=(l*T-_)/m,w+=(b*T-w)/m;const S=a-f*f,x=f*S-u*u,B=(w*f-_*u)/x,F=(_*S-w*u)/x,k=-B*f,M=A=>(A=A-o,B*A*A+F*A+k+c);return{coef:[k-F*o+B*o*o+c,F-2*B*o,B],predict:M,rSquared:rg(t,e,n,c,M)}}function Rz(t,e,n,i){if(i===1)return yO(t,e,n);if(i===2)return mO(t,e,n);const[s,o,c,d]=K1(t,e,n),f=s.length,u=[],a=[],_=i+1;let w,m,l,T,b;for(w=0;w<_;++w){for(l=0,T=0;l<f;++l)T+=Math.pow(s[l],w)*o[l];for(u.push(T),b=new Float64Array(_),m=0;m<_;++m){for(l=0,T=0;l<f;++l)T+=Math.pow(s[l],w+m);b[m]=T}a.push(b)}a.push(u);const S=Die(a),x=B=>{B-=c;let F=d+S[0]+S[1]*B+S[2]*B*B;for(w=3;w<_;++w)F+=S[w]*Math.pow(B,w);return F};return{coef:Pie(_,S,-c,d),predict:x,rSquared:rg(t,e,n,d,x)}}function Pie(t,e,n,i){const s=Array(t);let o,c,d,f;for(o=0;o<t;++o)s[o]=0;for(o=t-1;o>=0;--o)for(d=e[o],f=1,s[o]+=d,c=1;c<=o;++c)f*=(o+1-c)/c,s[o-c]+=d*Math.pow(n,c)*f;return s[0]+=i,s}function Die(t){const e=t.length-1,n=[];let i,s,o,c,d;for(i=0;i<e;++i){for(c=i,s=i+1;s<e;++s)Math.abs(t[i][s])>Math.abs(t[i][c])&&(c=s);for(o=i;o<e+1;++o)d=t[o][i],t[o][i]=t[o][c],t[o][c]=d;for(s=i+1;s<e;++s)for(o=e;o>=i;o--)t[o][s]-=t[o][i]*t[i][s]/t[i][i]}for(s=e-1;s>=0;--s){for(d=0,o=s+1;o<e;++o)d+=t[o][s]*n[o];n[s]=(t[e][s]-d)/t[s][s]}return n}const nP=2,iP=1e-12;function Lz(t,e,n,i){const[s,o,c,d]=K1(t,e,n,!0),f=s.length,u=Math.max(2,~~(i*f)),a=new Float64Array(f),_=new Float64Array(f),w=new Float64Array(f).fill(1);for(let m=-1;++m<=nP;){const l=[0,u-1];for(let b=0;b<f;++b){const S=s[b],x=l[0],B=l[1],F=S-s[x]>s[B]-S?x:B;let k=0,M=0,A=0,R=0,P=0;const j=1/Math.abs(s[F]-S||1);for(let $=x;$<=B;++$){const Y=s[$],W=o[$],H=jie(Math.abs(S-Y)*j)*w[$],J=Y*H;k+=H,M+=J,A+=W*H,R+=W*J,P+=Y*J}const[D,z]=dm(M/k,A/k,R/k,P/k);a[b]=D+z*S,_[b]=Math.abs(o[b]-a[b]),Uie(s,b+1,l)}if(m===nP)break;const T=vz(_);if(Math.abs(T)<iP)break;for(let b=0,S,x;b<f;++b)S=_[b]/(6*T),w[b]=S>=1?iP:(x=1-S*S)*x}return $ie(s,a,c,d)}function jie(t){return(t=1-t*t*t)*t*t}function Uie(t,e,n){const i=t[e];let s=n[0],o=n[1]+1;if(!(o>=t.length))for(;e>s&&t[o]-i<=i-t[s];)n[0]=++s,n[1]=o,++o}function $ie(t,e,n,i){const s=t.length,o=[];let c=0,d=0,f=[],u;for(;c<s;++c)u=t[c]+n,f[0]===u?f[1]+=(e[c]-f[1])/++d:(d=0,f[1]+=i,f=[u,e[c]],o.push(f));return f[1]+=i,o}const zie=.5*Math.PI/180;function J1(t,e,n,i){n=n||25,i=Math.max(n,i||200);const s=T=>[T,t(T)],o=e[0],c=e[1],d=c-o,f=d/i,u=[s(o)],a=[];if(n===i){for(let T=1;T<i;++T)u.push(s(o+T/n*d));return u.push(s(c)),u}else{a.push(s(c));for(let T=n;--T>0;)a.push(s(o+T/n*d))}let _=u[0],w=a[a.length-1];const m=1/d,l=qie(_[1],a);for(;w;){const T=s((_[0]+w[0])/2);T[0]-_[0]>=f&&Gie(_,T,w,m,l)>zie?a.push(T):(_=w,u.push(w),a.pop()),w=a[a.length-1]}return u}function qie(t,e){let n=t,i=t;const s=e.length;for(let o=0;o<s;++o){const c=e[o][1];c<n&&(n=c),c>i&&(i=c)}return 1/(i-n)}function Gie(t,e,n,i,s){const o=Math.atan2(s*(n[1]-t[1]),i*(n[0]-t[0])),c=Math.atan2(s*(e[1]-t[1]),i*(e[0]-t[0]));return Math.abs(o-c)}var Vie={value:()=>{}};function Pz(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new E0(n)}function E0(t){this._=t}function Wie(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",s=n.indexOf(".");if(s>=0&&(i=n.slice(s+1),n=n.slice(0,s)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}E0.prototype=Pz.prototype={constructor:E0,on:function(t,e){var n=this._,i=Wie(t+"",n),s,o=-1,c=i.length;if(arguments.length<2){for(;++o<c;)if((s=(t=i[o]).type)&&(s=Hie(n[s],t.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<c;)if(s=(t=i[o]).type)n[s]=sP(n[s],t.name,e);else if(e==null)for(s in n)n[s]=sP(n[s],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new E0(t)},call:function(t,e){if((s=arguments.length-2)>0)for(var n=new Array(s),i=0,s,o;i<s;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],i=0,s=o.length;i<s;++i)o[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],s=0,o=i.length;s<o;++s)i[s].value.apply(e,n)}};function Hie(t,e){for(var n=0,i=t.length,s;n<i;++n)if((s=t[n]).name===e)return s.value}function sP(t,e,n){for(var i=0,s=t.length;i<s;++i)if(t[i].name===e){t[i]=Vie,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}function ag(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function um(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Md(){}var tu=.7,pp=1/tu,$h="\\s*([+-]?\\d+)\\s*",ly="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Io="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Yie=/^#([0-9a-f]{3,8})$/,Xie=new RegExp(`^rgb\\(${$h},${$h},${$h}\\)$`),Kie=new RegExp(`^rgb\\(${Io},${Io},${Io}\\)$`),Jie=new RegExp(`^rgba\\(${$h},${$h},${$h},${ly}\\)$`),Qie=new RegExp(`^rgba\\(${Io},${Io},${Io},${ly}\\)$`),Zie=new RegExp(`^hsl\\(${ly},${Io},${Io}\\)$`),ese=new RegExp(`^hsla\\(${ly},${Io},${Io},${ly}\\)$`),rP={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ag(Md,cy,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:aP,formatHex:aP,formatHex8:tse,formatHsl:nse,formatRgb:oP,toString:oP});function aP(){return this.rgb().formatHex()}function tse(){return this.rgb().formatHex8()}function nse(){return Dz(this).formatHsl()}function oP(){return this.rgb().formatRgb()}function cy(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Yie.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?lP(e):n===3?new hi(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Eb(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Eb(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Xie.exec(t))?new hi(e[1],e[2],e[3],1):(e=Kie.exec(t))?new hi(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Jie.exec(t))?Eb(e[1],e[2],e[3],e[4]):(e=Qie.exec(t))?Eb(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Zie.exec(t))?fP(e[1],e[2]/100,e[3]/100,1):(e=ese.exec(t))?fP(e[1],e[2]/100,e[3]/100,e[4]):rP.hasOwnProperty(t)?lP(rP[t]):t==="transparent"?new hi(NaN,NaN,NaN,0):null}function lP(t){return new hi(t>>16&255,t>>8&255,t&255,1)}function Eb(t,e,n,i){return i<=0&&(t=e=n=NaN),new hi(t,e,n,i)}function wO(t){return t instanceof Md||(t=cy(t)),t?(t=t.rgb(),new hi(t.r,t.g,t.b,t.opacity)):new hi}function ad(t,e,n,i){return arguments.length===1?wO(t):new hi(t,e,n,i==null?1:i)}function hi(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}ag(hi,ad,um(Md,{brighter(t){return t=t==null?pp:Math.pow(pp,t),new hi(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?tu:Math.pow(tu,t),new hi(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new hi($f(this.r),$f(this.g),$f(this.b),bT(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:cP,formatHex:cP,formatHex8:ise,formatRgb:dP,toString:dP}));function cP(){return`#${If(this.r)}${If(this.g)}${If(this.b)}`}function ise(){return`#${If(this.r)}${If(this.g)}${If(this.b)}${If((isNaN(this.opacity)?1:this.opacity)*255)}`}function dP(){const t=bT(this.opacity);return`${t===1?"rgb(":"rgba("}${$f(this.r)}, ${$f(this.g)}, ${$f(this.b)}${t===1?")":`, ${t})`}`}function bT(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function $f(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function If(t){return t=$f(t),(t<16?"0":"")+t.toString(16)}function fP(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ma(t,e,n,i)}function Dz(t){if(t instanceof ma)return new ma(t.h,t.s,t.l,t.opacity);if(t instanceof Md||(t=cy(t)),!t)return new ma;if(t instanceof ma)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,s=Math.min(e,n,i),o=Math.max(e,n,i),c=NaN,d=o-s,f=(o+s)/2;return d?(e===o?c=(n-i)/d+(n<i)*6:n===o?c=(i-e)/d+2:c=(e-n)/d+4,d/=f<.5?o+s:2-o-s,c*=60):d=f>0&&f<1?0:c,new ma(c,d,f,t.opacity)}function TT(t,e,n,i){return arguments.length===1?Dz(t):new ma(t,e,n,i==null?1:i)}function ma(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}ag(ma,TT,um(Md,{brighter(t){return t=t==null?pp:Math.pow(pp,t),new ma(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?tu:Math.pow(tu,t),new ma(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,s=2*n-i;return new hi(hx(t>=240?t-240:t+120,s,i),hx(t,s,i),hx(t<120?t+240:t-120,s,i),this.opacity)},clamp(){return new ma(uP(this.h),Sb(this.s),Sb(this.l),bT(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=bT(this.opacity);return`${t===1?"hsl(":"hsla("}${uP(this.h)}, ${Sb(this.s)*100}%, ${Sb(this.l)*100}%${t===1?")":`, ${t})`}`}}));function uP(t){return t=(t||0)%360,t<0?t+360:t}function Sb(t){return Math.max(0,Math.min(1,t||0))}function hx(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const jz=Math.PI/180,Uz=180/Math.PI,vT=18,$z=.96422,zz=1,qz=.82521,Gz=4/29,zh=6/29,Vz=3*zh*zh,sse=zh*zh*zh;function Wz(t){if(t instanceof Fo)return new Fo(t.l,t.a,t.b,t.opacity);if(t instanceof Nl)return Hz(t);t instanceof hi||(t=wO(t));var e=yx(t.r),n=yx(t.g),i=yx(t.b),s=px((.2225045*e+.7168786*n+.0606169*i)/zz),o,c;return e===n&&n===i?o=c=s:(o=px((.4360747*e+.3850649*n+.1430804*i)/$z),c=px((.0139322*e+.0971045*n+.7141733*i)/qz)),new Fo(116*s-16,500*(o-s),200*(s-c),t.opacity)}function ET(t,e,n,i){return arguments.length===1?Wz(t):new Fo(t,e,n,i==null?1:i)}function Fo(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}ag(Fo,ET,um(Md,{brighter(t){return new Fo(this.l+vT*(t==null?1:t),this.a,this.b,this.opacity)},darker(t){return new Fo(this.l-vT*(t==null?1:t),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=$z*gx(e),t=zz*gx(t),n=qz*gx(n),new hi(_x(3.1338561*e-1.6168667*t-.4906146*n),_x(-.9787684*e+1.9161415*t+.033454*n),_x(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function px(t){return t>sse?Math.pow(t,1/3):t/Vz+Gz}function gx(t){return t>zh?t*t*t:Vz*(t-Gz)}function _x(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function yx(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function rse(t){if(t instanceof Nl)return new Nl(t.h,t.c,t.l,t.opacity);if(t instanceof Fo||(t=Wz(t)),t.a===0&&t.b===0)return new Nl(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*Uz;return new Nl(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function ST(t,e,n,i){return arguments.length===1?rse(t):new Nl(t,e,n,i==null?1:i)}function Nl(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}function Hz(t){if(isNaN(t.h))return new Fo(t.l,0,0,t.opacity);var e=t.h*jz;return new Fo(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}ag(Nl,ST,um(Md,{brighter(t){return new Nl(this.h,this.c,this.l+vT*(t==null?1:t),this.opacity)},darker(t){return new Nl(this.h,this.c,this.l-vT*(t==null?1:t),this.opacity)},rgb(){return Hz(this).rgb()}}));var Yz=-.14861,bO=1.78277,TO=-.29227,Q1=-.90649,dy=1.97294,hP=dy*Q1,pP=dy*bO,gP=bO*TO-Q1*Yz;function ase(t){if(t instanceof zf)return new zf(t.h,t.s,t.l,t.opacity);t instanceof hi||(t=wO(t));var e=t.r/255,n=t.g/255,i=t.b/255,s=(gP*i+hP*e-pP*n)/(gP+hP-pP),o=i-s,c=(dy*(n-s)-TO*o)/Q1,d=Math.sqrt(c*c+o*o)/(dy*s*(1-s)),f=d?Math.atan2(c,o)*Uz-120:NaN;return new zf(f<0?f+360:f,d,s,t.opacity)}function gk(t,e,n,i){return arguments.length===1?ase(t):new zf(t,e,n,i==null?1:i)}function zf(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}ag(zf,gk,um(Md,{brighter(t){return t=t==null?pp:Math.pow(pp,t),new zf(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?tu:Math.pow(tu,t),new zf(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*jz,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),s=Math.sin(t);return new hi(255*(e+n*(Yz*i+bO*s)),255*(e+n*(TO*i+Q1*s)),255*(e+n*(dy*i)),this.opacity)}}));function Xz(t,e,n,i,s){var o=t*t,c=o*t;return((1-3*t+3*o-c)*e+(4-6*o+3*c)*n+(1+3*t+3*o-3*c)*i+c*s)/6}function Kz(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),s=t[i],o=t[i+1],c=i>0?t[i-1]:2*s-o,d=i<e-1?t[i+2]:2*o-s;return Xz((n-i/e)*e,c,s,o,d)}}function Jz(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),s=t[(i+e-1)%e],o=t[i%e],c=t[(i+1)%e],d=t[(i+2)%e];return Xz((n-i/e)*e,s,o,c,d)}}const Z1=t=>()=>t;function Qz(t,e){return function(n){return t+n*e}}function ose(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function eE(t,e){var n=e-t;return n?Qz(t,n>180||n<-180?n-360*Math.round(n/360):n):Z1(isNaN(t)?e:t)}function lse(t){return(t=+t)==1?pi:function(e,n){return n-e?ose(e,n,t):Z1(isNaN(e)?n:e)}}function pi(t,e){var n=e-t;return n?Qz(t,n):Z1(isNaN(t)?e:t)}const _k=function t(e){var n=lse(e);function i(s,o){var c=n((s=ad(s)).r,(o=ad(o)).r),d=n(s.g,o.g),f=n(s.b,o.b),u=pi(s.opacity,o.opacity);return function(a){return s.r=c(a),s.g=d(a),s.b=f(a),s.opacity=u(a),s+""}}return i.gamma=t,i}(1);function Zz(t){return function(e){var n=e.length,i=new Array(n),s=new Array(n),o=new Array(n),c,d;for(c=0;c<n;++c)d=ad(e[c]),i[c]=d.r||0,s[c]=d.g||0,o[c]=d.b||0;return i=t(i),s=t(s),o=t(o),d.opacity=1,function(f){return d.r=i(f),d.g=s(f),d.b=o(f),d+""}}}var cse=Zz(Kz),dse=Zz(Jz);function vO(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),s;return function(o){for(s=0;s<n;++s)i[s]=t[s]*(1-o)+e[s]*o;return i}}function e5(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function fse(t,e){return(e5(e)?vO:t5)(t,e)}function t5(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,s=new Array(i),o=new Array(n),c;for(c=0;c<i;++c)s[c]=Ad(t[c],e[c]);for(;c<n;++c)o[c]=e[c];return function(d){for(c=0;c<i;++c)o[c]=s[c](d);return o}}function n5(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function ga(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function i5(t,e){var n={},i={},s;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(s in e)s in t?n[s]=Ad(t[s],e[s]):i[s]=e[s];return function(o){for(s in n)i[s]=n[s](o);return i}}var yk=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mx=new RegExp(yk.source,"g");function use(t){return function(){return t}}function hse(t){return function(e){return t(e)+""}}function s5(t,e){var n=yk.lastIndex=mx.lastIndex=0,i,s,o,c=-1,d=[],f=[];for(t=t+"",e=e+"";(i=yk.exec(t))&&(s=mx.exec(e));)(o=s.index)>n&&(o=e.slice(n,o),d[c]?d[c]+=o:d[++c]=o),(i=i[0])===(s=s[0])?d[c]?d[c]+=s:d[++c]=s:(d[++c]=null,f.push({i:c,x:ga(i,s)})),n=mx.lastIndex;return n<e.length&&(o=e.slice(n),d[c]?d[c]+=o:d[++c]=o),d.length<2?f[0]?hse(f[0].x):use(e):(e=f.length,function(u){for(var a=0,_;a<e;++a)d[(_=f[a]).i]=_.x(u);return d.join("")})}function Ad(t,e){var n=typeof e,i;return e==null||n==="boolean"?Z1(e):(n==="number"?ga:n==="string"?(i=cy(e))?(e=i,_k):s5:e instanceof cy?_k:e instanceof Date?n5:e5(e)?vO:Array.isArray(e)?t5:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?i5:ga)(t,e)}function pse(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}function gse(t,e){var n=eE(+t,+e);return function(i){var s=n(i);return s-360*Math.floor(s/360)}}function hm(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var _P=180/Math.PI,mk={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function r5(t,e,n,i,s,o){var c,d,f;return(c=Math.sqrt(t*t+e*e))&&(t/=c,e/=c),(f=t*n+e*i)&&(n-=t*f,i-=e*f),(d=Math.sqrt(n*n+i*i))&&(n/=d,i/=d,f/=d),t*i<e*n&&(t=-t,e=-e,f=-f,c=-c),{translateX:s,translateY:o,rotate:Math.atan2(e,t)*_P,skewX:Math.atan(f)*_P,scaleX:c,scaleY:d}}var xb;function _se(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?mk:r5(e.a,e.b,e.c,e.d,e.e,e.f)}function yse(t){return t==null||(xb||(xb=document.createElementNS("http://www.w3.org/2000/svg","g")),xb.setAttribute("transform",t),!(t=xb.transform.baseVal.consolidate()))?mk:(t=t.matrix,r5(t.a,t.b,t.c,t.d,t.e,t.f))}function a5(t,e,n,i){function s(u){return u.length?u.pop()+" ":""}function o(u,a,_,w,m,l){if(u!==_||a!==w){var T=m.push("translate(",null,e,null,n);l.push({i:T-4,x:ga(u,_)},{i:T-2,x:ga(a,w)})}else(_||w)&&m.push("translate("+_+e+w+n)}function c(u,a,_,w){u!==a?(u-a>180?a+=360:a-u>180&&(u+=360),w.push({i:_.push(s(_)+"rotate(",null,i)-2,x:ga(u,a)})):a&&_.push(s(_)+"rotate("+a+i)}function d(u,a,_,w){u!==a?w.push({i:_.push(s(_)+"skewX(",null,i)-2,x:ga(u,a)}):a&&_.push(s(_)+"skewX("+a+i)}function f(u,a,_,w,m,l){if(u!==_||a!==w){var T=m.push(s(m)+"scale(",null,",",null,")");l.push({i:T-4,x:ga(u,_)},{i:T-2,x:ga(a,w)})}else(_!==1||w!==1)&&m.push(s(m)+"scale("+_+","+w+")")}return function(u,a){var _=[],w=[];return u=t(u),a=t(a),o(u.translateX,u.translateY,a.translateX,a.translateY,_,w),c(u.rotate,a.rotate,_,w),d(u.skewX,a.skewX,_,w),f(u.scaleX,u.scaleY,a.scaleX,a.scaleY,_,w),u=a=null,function(m){for(var l=-1,T=w.length,b;++l<T;)_[(b=w[l]).i]=b.x(m);return _.join("")}}}var mse=a5(_se,"px, ","px)","deg)"),wse=a5(yse,", ",")",")"),bse=1e-12;function yP(t){return((t=Math.exp(t))+1/t)/2}function Tse(t){return((t=Math.exp(t))-1/t)/2}function vse(t){return((t=Math.exp(2*t))-1)/(t+1)}const Ese=function t(e,n,i){function s(o,c){var d=o[0],f=o[1],u=o[2],a=c[0],_=c[1],w=c[2],m=a-d,l=_-f,T=m*m+l*l,b,S;if(T<bse)S=Math.log(w/u)/e,b=function(A){return[d+A*m,f+A*l,u*Math.exp(e*A*S)]};else{var x=Math.sqrt(T),B=(w*w-u*u+i*T)/(2*u*n*x),F=(w*w-u*u-i*T)/(2*w*n*x),k=Math.log(Math.sqrt(B*B+1)-B),M=Math.log(Math.sqrt(F*F+1)-F);S=(M-k)/e,b=function(A){var R=A*S,P=yP(k),j=u/(n*x)*(P*vse(e*R+k)-Tse(k));return[d+j*m,f+j*l,u*P/yP(e*R+k)]}}return b.duration=S*1e3*e/Math.SQRT2,b}return s.rho=function(o){var c=Math.max(.001,+o),d=c*c,f=d*d;return t(c,d,f)},s}(Math.SQRT2,2,4);function o5(t){return function(e,n){var i=t((e=TT(e)).h,(n=TT(n)).h),s=pi(e.s,n.s),o=pi(e.l,n.l),c=pi(e.opacity,n.opacity);return function(d){return e.h=i(d),e.s=s(d),e.l=o(d),e.opacity=c(d),e+""}}}const Sse=o5(eE);var xse=o5(pi);function Bse(t,e){var n=pi((t=ET(t)).l,(e=ET(e)).l),i=pi(t.a,e.a),s=pi(t.b,e.b),o=pi(t.opacity,e.opacity);return function(c){return t.l=n(c),t.a=i(c),t.b=s(c),t.opacity=o(c),t+""}}function l5(t){return function(e,n){var i=t((e=ST(e)).h,(n=ST(n)).h),s=pi(e.c,n.c),o=pi(e.l,n.l),c=pi(e.opacity,n.opacity);return function(d){return e.h=i(d),e.c=s(d),e.l=o(d),e.opacity=c(d),e+""}}}const kse=l5(eE);var Ise=l5(pi);function c5(t){return function e(n){n=+n;function i(s,o){var c=t((s=gk(s)).h,(o=gk(o)).h),d=pi(s.s,o.s),f=pi(s.l,o.l),u=pi(s.opacity,o.opacity);return function(a){return s.h=c(a),s.s=d(a),s.l=f(Math.pow(a,n)),s.opacity=u(a),s+""}}return i.gamma=e,i}(1)}const Fse=c5(eE);var Ose=c5(pi);function EO(t,e){e===void 0&&(e=t,t=Ad);for(var n=0,i=e.length-1,s=e[0],o=new Array(i<0?0:i);n<i;)o[n]=t(s,s=e[++n]);return function(c){var d=Math.max(0,Math.min(i-1,Math.floor(c*=i)));return o[d](c-d)}}function Mse(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n}const Ase=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Ad,interpolateArray:fse,interpolateBasis:Kz,interpolateBasisClosed:Jz,interpolateDate:n5,interpolateDiscrete:pse,interpolateHue:gse,interpolateNumber:ga,interpolateNumberArray:vO,interpolateObject:i5,interpolateRound:hm,interpolateString:s5,interpolateTransformCss:mse,interpolateTransformSvg:wse,interpolateZoom:Ese,interpolateRgb:_k,interpolateRgbBasis:cse,interpolateRgbBasisClosed:dse,interpolateHsl:Sse,interpolateHslLong:xse,interpolateLab:Bse,interpolateHcl:kse,interpolateHclLong:Ise,interpolateCubehelix:Fse,interpolateCubehelixLong:Ose,piecewise:EO,quantize:Mse},Symbol.toStringTag,{value:"Module"}));var gp=0,c_=0,Lg=0,d5=1e3,xT,d_,BT=0,nu=0,tE=0,fy=typeof performance=="object"&&performance.now?performance:Date,f5=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function SO(){return nu||(f5(Nse),nu=fy.now()+tE)}function Nse(){nu=0}function kT(){this._call=this._time=this._next=null}kT.prototype=u5.prototype={constructor:kT,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?SO():+n)+(e==null?0:+e),!this._next&&d_!==this&&(d_?d_._next=this:xT=this,d_=this),this._call=t,this._time=n,wk()},stop:function(){this._call&&(this._call=null,this._time=1/0,wk())}};function u5(t,e,n){var i=new kT;return i.restart(t,e,n),i}function Cse(){SO(),++gp;for(var t=xT,e;t;)(e=nu-t._time)>=0&&t._call.call(void 0,e),t=t._next;--gp}function mP(){nu=(BT=fy.now())+tE,gp=c_=0;try{Cse()}finally{gp=0,Lse(),nu=0}}function Rse(){var t=fy.now(),e=t-BT;e>d5&&(tE-=e,BT=t)}function Lse(){for(var t,e=xT,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:xT=n);d_=t,wk(i)}function wk(t){if(!gp){c_&&(c_=clearTimeout(c_));var e=t-nu;e>24?(t<1/0&&(c_=setTimeout(mP,t-fy.now()-tE)),Lg&&(Lg=clearInterval(Lg))):(Lg||(BT=fy.now(),Lg=setInterval(Rse,d5)),gp=1,f5(mP))}}function Pse(t,e,n){var i=new kT,s=e;return e==null?(i.restart(t,e,n),i):(i._restart=i.restart,i.restart=function(o,c,d){c=+c,d=d==null?SO():+d,i._restart(function f(u){u+=s,i._restart(f,s+=c,d),o(u)},c,d)},i.restart(t,e,n),i)}const bk=Math.PI,Tk=2*bk,uf=1e-6,Dse=Tk-uf;function h5(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function jse(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return h5;const n=10**e;return function(i){this._+=i[0];for(let s=1,o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}class xO{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?h5:jse(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,i,s){this._append`Q${+e},${+n},${this._x1=+i},${this._y1=+s}`}bezierCurveTo(e,n,i,s,o,c){this._append`C${+e},${+n},${+i},${+s},${this._x1=+o},${this._y1=+c}`}arcTo(e,n,i,s,o){if(e=+e,n=+n,i=+i,s=+s,o=+o,o<0)throw new Error(`negative radius: ${o}`);let c=this._x1,d=this._y1,f=i-e,u=s-n,a=c-e,_=d-n,w=a*a+_*_;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(w>uf)if(!(Math.abs(_*f-u*a)>uf)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let m=i-c,l=s-d,T=f*f+u*u,b=m*m+l*l,S=Math.sqrt(T),x=Math.sqrt(w),B=o*Math.tan((bk-Math.acos((T+w-b)/(2*S*x)))/2),F=B/x,k=B/S;Math.abs(F-1)>uf&&this._append`L${e+F*a},${n+F*_}`,this._append`A${o},${o},0,0,${+(_*m>a*l)},${this._x1=e+k*f},${this._y1=n+k*u}`}}arc(e,n,i,s,o,c){if(e=+e,n=+n,i=+i,c=!!c,i<0)throw new Error(`negative radius: ${i}`);let d=i*Math.cos(s),f=i*Math.sin(s),u=e+d,a=n+f,_=1^c,w=c?s-o:o-s;this._x1===null?this._append`M${u},${a}`:(Math.abs(this._x1-u)>uf||Math.abs(this._y1-a)>uf)&&this._append`L${u},${a}`,i&&(w<0&&(w=w%Tk+Tk),w>Dse?this._append`A${i},${i},0,1,${_},${e-d},${n-f}A${i},${i},0,1,${_},${this._x1=u},${this._y1=a}`:w>uf&&this._append`A${i},${i},0,${+(w>=bk)},${_},${this._x1=e+i*Math.cos(o)},${this._y1=n+i*Math.sin(o)}`)}rect(e,n,i,s){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${i=+i}v${+s}h${-i}Z`}toString(){return this._}}function nE(){return new xO}nE.prototype=xO.prototype;const Ul=11102230246251565e-32,Oi=134217729,Use=(3+8*Ul)*Ul;function wx(t,e,n,i,s){let o,c,d,f,u=e[0],a=i[0],_=0,w=0;a>u==a>-u?(o=u,u=e[++_]):(o=a,a=i[++w]);let m=0;if(_<t&&w<n)for(a>u==a>-u?(c=u+o,d=o-(c-u),u=e[++_]):(c=a+o,d=o-(c-a),a=i[++w]),o=c,d!==0&&(s[m++]=d);_<t&&w<n;)a>u==a>-u?(c=o+u,f=c-o,d=o-(c-f)+(u-f),u=e[++_]):(c=o+a,f=c-o,d=o-(c-f)+(a-f),a=i[++w]),o=c,d!==0&&(s[m++]=d);for(;_<t;)c=o+u,f=c-o,d=o-(c-f)+(u-f),u=e[++_],o=c,d!==0&&(s[m++]=d);for(;w<n;)c=o+a,f=c-o,d=o-(c-f)+(a-f),a=i[++w],o=c,d!==0&&(s[m++]=d);return(o!==0||m===0)&&(s[m++]=o),m}function $se(t,e){let n=e[0];for(let i=1;i<t;i++)n+=e[i];return n}function pm(t){return new Float64Array(t)}const zse=(3+16*Ul)*Ul,qse=(2+12*Ul)*Ul,Gse=(9+64*Ul)*Ul*Ul,th=pm(4),wP=pm(8),bP=pm(12),TP=pm(16),Zi=pm(4);function Vse(t,e,n,i,s,o,c){let d,f,u,a,_,w,m,l,T,b,S,x,B,F,k,M,A,R;const P=t-s,j=n-s,D=e-o,z=i-o;F=P*z,w=Oi*P,m=w-(w-P),l=P-m,w=Oi*z,T=w-(w-z),b=z-T,k=l*b-(F-m*T-l*T-m*b),M=D*j,w=Oi*D,m=w-(w-D),l=D-m,w=Oi*j,T=w-(w-j),b=j-T,A=l*b-(M-m*T-l*T-m*b),S=k-A,_=k-S,th[0]=k-(S+_)+(_-A),x=F+S,_=x-F,B=F-(x-_)+(S-_),S=B-M,_=B-S,th[1]=B-(S+_)+(_-M),R=x+S,_=R-x,th[2]=x-(R-_)+(S-_),th[3]=R;let $=$se(4,th),Y=qse*c;if($>=Y||-$>=Y||(_=t-P,d=t-(P+_)+(_-s),_=n-j,u=n-(j+_)+(_-s),_=e-D,f=e-(D+_)+(_-o),_=i-z,a=i-(z+_)+(_-o),d===0&&f===0&&u===0&&a===0)||(Y=Gse*c+Use*Math.abs($),$+=P*a+z*d-(D*u+j*f),$>=Y||-$>=Y))return $;F=d*z,w=Oi*d,m=w-(w-d),l=d-m,w=Oi*z,T=w-(w-z),b=z-T,k=l*b-(F-m*T-l*T-m*b),M=f*j,w=Oi*f,m=w-(w-f),l=f-m,w=Oi*j,T=w-(w-j),b=j-T,A=l*b-(M-m*T-l*T-m*b),S=k-A,_=k-S,Zi[0]=k-(S+_)+(_-A),x=F+S,_=x-F,B=F-(x-_)+(S-_),S=B-M,_=B-S,Zi[1]=B-(S+_)+(_-M),R=x+S,_=R-x,Zi[2]=x-(R-_)+(S-_),Zi[3]=R;const W=wx(4,th,4,Zi,wP);F=P*a,w=Oi*P,m=w-(w-P),l=P-m,w=Oi*a,T=w-(w-a),b=a-T,k=l*b-(F-m*T-l*T-m*b),M=D*u,w=Oi*D,m=w-(w-D),l=D-m,w=Oi*u,T=w-(w-u),b=u-T,A=l*b-(M-m*T-l*T-m*b),S=k-A,_=k-S,Zi[0]=k-(S+_)+(_-A),x=F+S,_=x-F,B=F-(x-_)+(S-_),S=B-M,_=B-S,Zi[1]=B-(S+_)+(_-M),R=x+S,_=R-x,Zi[2]=x-(R-_)+(S-_),Zi[3]=R;const H=wx(W,wP,4,Zi,bP);F=d*a,w=Oi*d,m=w-(w-d),l=d-m,w=Oi*a,T=w-(w-a),b=a-T,k=l*b-(F-m*T-l*T-m*b),M=f*u,w=Oi*f,m=w-(w-f),l=f-m,w=Oi*u,T=w-(w-u),b=u-T,A=l*b-(M-m*T-l*T-m*b),S=k-A,_=k-S,Zi[0]=k-(S+_)+(_-A),x=F+S,_=x-F,B=F-(x-_)+(S-_),S=B-M,_=B-S,Zi[1]=B-(S+_)+(_-M),R=x+S,_=R-x,Zi[2]=x-(R-_)+(S-_),Zi[3]=R;const J=wx(H,bP,4,Zi,TP);return TP[J-1]}function Bb(t,e,n,i,s,o){const c=(e-o)*(n-s),d=(t-s)*(i-o),f=c-d;if(c===0||d===0||c>0!=d>0)return f;const u=Math.abs(c+d);return Math.abs(f)>=zse*u?f:-Vse(t,e,n,i,s,o,u)}const vP=Math.pow(2,-52),kb=new Uint32Array(512);class IT{static from(e,n=Kse,i=Jse){const s=e.length,o=new Float64Array(s*2);for(let c=0;c<s;c++){const d=e[c];o[2*c]=n(d),o[2*c+1]=i(d)}return new IT(o)}constructor(e){const n=e.length>>1;if(n>0&&typeof e[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=e;const i=Math.max(2*n-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:e,_hullPrev:n,_hullNext:i,_hullTri:s,_hullHash:o}=this,c=e.length>>1;let d=1/0,f=1/0,u=-1/0,a=-1/0;for(let j=0;j<c;j++){const D=e[2*j],z=e[2*j+1];D<d&&(d=D),z<f&&(f=z),D>u&&(u=D),z>a&&(a=z),this._ids[j]=j}const _=(d+u)/2,w=(f+a)/2;let m=1/0,l,T,b;for(let j=0;j<c;j++){const D=bx(_,w,e[2*j],e[2*j+1]);D<m&&(l=j,m=D)}const S=e[2*l],x=e[2*l+1];m=1/0;for(let j=0;j<c;j++){if(j===l)continue;const D=bx(S,x,e[2*j],e[2*j+1]);D<m&&D>0&&(T=j,m=D)}let B=e[2*T],F=e[2*T+1],k=1/0;for(let j=0;j<c;j++){if(j===l||j===T)continue;const D=Yse(S,x,B,F,e[2*j],e[2*j+1]);D<k&&(b=j,k=D)}let M=e[2*b],A=e[2*b+1];if(k===1/0){for(let z=0;z<c;z++)this._dists[z]=e[2*z]-e[0]||e[2*z+1]-e[1];Sh(this._ids,this._dists,0,c-1);const j=new Uint32Array(c);let D=0;for(let z=0,$=-1/0;z<c;z++){const Y=this._ids[z];this._dists[Y]>$&&(j[D++]=Y,$=this._dists[Y])}this.hull=j.subarray(0,D),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Bb(S,x,B,F,M,A)<0){const j=T,D=B,z=F;T=b,B=M,F=A,b=j,M=D,A=z}const R=Xse(S,x,B,F,M,A);this._cx=R.x,this._cy=R.y;for(let j=0;j<c;j++)this._dists[j]=bx(e[2*j],e[2*j+1],R.x,R.y);Sh(this._ids,this._dists,0,c-1),this._hullStart=l;let P=3;i[l]=n[b]=T,i[T]=n[l]=b,i[b]=n[T]=l,s[l]=0,s[T]=1,s[b]=2,o.fill(-1),o[this._hashKey(S,x)]=l,o[this._hashKey(B,F)]=T,o[this._hashKey(M,A)]=b,this.trianglesLen=0,this._addTriangle(l,T,b,-1,-1,-1);for(let j=0,D,z;j<this._ids.length;j++){const $=this._ids[j],Y=e[2*$],W=e[2*$+1];if(j>0&&Math.abs(Y-D)<=vP&&Math.abs(W-z)<=vP||(D=Y,z=W,$===l||$===T||$===b))continue;let H=0;for(let se=0,Ne=this._hashKey(Y,W);se<this._hashSize&&(H=o[(Ne+se)%this._hashSize],!(H!==-1&&H!==i[H]));se++);H=n[H];let J=H,V;for(;V=i[J],Bb(Y,W,e[2*J],e[2*J+1],e[2*V],e[2*V+1])>=0;)if(J=V,J===H){J=-1;break}if(J===-1)continue;let le=this._addTriangle(J,$,i[J],-1,-1,s[J]);s[$]=this._legalize(le+2),s[J]=le,P++;let pe=i[J];for(;V=i[pe],Bb(Y,W,e[2*pe],e[2*pe+1],e[2*V],e[2*V+1])<0;)le=this._addTriangle(pe,$,V,s[$],-1,s[pe]),s[$]=this._legalize(le+2),i[pe]=pe,P--,pe=V;if(J===H)for(;V=n[J],Bb(Y,W,e[2*V],e[2*V+1],e[2*J],e[2*J+1])<0;)le=this._addTriangle(V,$,J,-1,s[J],s[V]),this._legalize(le+2),s[V]=le,i[J]=J,P--,J=V;this._hullStart=n[$]=J,i[J]=n[pe]=$,i[$]=pe,o[this._hashKey(Y,W)]=$,o[this._hashKey(e[2*J],e[2*J+1])]=J}this.hull=new Uint32Array(P);for(let j=0,D=this._hullStart;j<P;j++)this.hull[j]=D,D=i[D];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,n){return Math.floor(Wse(e-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:n,_halfedges:i,coords:s}=this;let o=0,c=0;for(;;){const d=i[e],f=e-e%3;if(c=f+(e+2)%3,d===-1){if(o===0)break;e=kb[--o];continue}const u=d-d%3,a=f+(e+1)%3,_=u+(d+2)%3,w=n[c],m=n[e],l=n[a],T=n[_];if(Hse(s[2*w],s[2*w+1],s[2*m],s[2*m+1],s[2*l],s[2*l+1],s[2*T],s[2*T+1])){n[e]=T,n[d]=w;const S=i[_];if(S===-1){let B=this._hullStart;do{if(this._hullTri[B]===_){this._hullTri[B]=e;break}B=this._hullPrev[B]}while(B!==this._hullStart)}this._link(e,S),this._link(d,i[c]),this._link(c,_);const x=u+(d+1)%3;o<kb.length&&(kb[o++]=x)}else{if(o===0)break;e=kb[--o]}}return c}_link(e,n){this._halfedges[e]=n,n!==-1&&(this._halfedges[n]=e)}_addTriangle(e,n,i,s,o,c){const d=this.trianglesLen;return this._triangles[d]=e,this._triangles[d+1]=n,this._triangles[d+2]=i,this._link(d,s),this._link(d+1,o),this._link(d+2,c),this.trianglesLen+=3,d}}function Wse(t,e){const n=t/(Math.abs(t)+Math.abs(e));return(e>0?3-n:1+n)/4}function bx(t,e,n,i){const s=t-n,o=e-i;return s*s+o*o}function Hse(t,e,n,i,s,o,c,d){const f=t-c,u=e-d,a=n-c,_=i-d,w=s-c,m=o-d,l=f*f+u*u,T=a*a+_*_,b=w*w+m*m;return f*(_*b-T*m)-u*(a*b-T*w)+l*(a*m-_*w)<0}function Yse(t,e,n,i,s,o){const c=n-t,d=i-e,f=s-t,u=o-e,a=c*c+d*d,_=f*f+u*u,w=.5/(c*u-d*f),m=(u*a-d*_)*w,l=(c*_-f*a)*w;return m*m+l*l}function Xse(t,e,n,i,s,o){const c=n-t,d=i-e,f=s-t,u=o-e,a=c*c+d*d,_=f*f+u*u,w=.5/(c*u-d*f),m=t+(u*a-d*_)*w,l=e+(c*_-f*a)*w;return{x:m,y:l}}function Sh(t,e,n,i){if(i-n<=20)for(let s=n+1;s<=i;s++){const o=t[s],c=e[o];let d=s-1;for(;d>=n&&e[t[d]]>c;)t[d+1]=t[d--];t[d+1]=o}else{const s=n+i>>1;let o=n+1,c=i;Pg(t,s,o),e[t[n]]>e[t[i]]&&Pg(t,n,i),e[t[o]]>e[t[i]]&&Pg(t,o,i),e[t[n]]>e[t[o]]&&Pg(t,n,o);const d=t[o],f=e[d];for(;;){do o++;while(e[t[o]]<f);do c--;while(e[t[c]]>f);if(c<o)break;Pg(t,o,c)}t[n+1]=t[c],t[c]=d,i-o+1>=c-n?(Sh(t,e,o,i),Sh(t,e,n,c-1)):(Sh(t,e,n,c-1),Sh(t,e,o,i))}}function Pg(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function Kse(t){return t[0]}function Jse(t){return t[1]}const EP=1e-6;class Ff{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,n){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,n){this._+=`L${this._x1=+e},${this._y1=+n}`}arc(e,n,i){e=+e,n=+n,i=+i;const s=e+i,o=n;if(i<0)throw new Error("negative radius");this._x1===null?this._+=`M${s},${o}`:(Math.abs(this._x1-s)>EP||Math.abs(this._y1-o)>EP)&&(this._+="L"+s+","+o),i&&(this._+=`A${i},${i},0,1,1,${e-i},${n}A${i},${i},0,1,1,${this._x1=s},${this._y1=o}`)}rect(e,n,i,s){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${+i}v${+s}h${-i}Z`}value(){return this._||null}}class vk{constructor(){this._=[]}moveTo(e,n){this._.push([e,n])}closePath(){this._.push(this._[0].slice())}lineTo(e,n){this._.push([e,n])}value(){return this._.length?this._:null}}class Qse{constructor(e,[n,i,s,o]=[0,0,960,500]){if(!((s=+s)>=(n=+n))||!((o=+o)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(e.points.length*2),this.vectors=new Float64Array(e.points.length*2),this.xmax=s,this.xmin=n,this.ymax=o,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:e,hull:n,triangles:i},vectors:s}=this,o=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let m=0,l=0,T=i.length,b,S;m<T;m+=3,l+=2){const x=i[m]*2,B=i[m+1]*2,F=i[m+2]*2,k=e[x],M=e[x+1],A=e[B],R=e[B+1],P=e[F],j=e[F+1],D=A-k,z=R-M,$=P-k,Y=j-M,W=(D*Y-z*$)*2;if(Math.abs(W)<1e-9){let H=1e9;const J=i[0]*2;H*=Math.sign((e[J]-k)*Y-(e[J+1]-M)*$),b=(k+P)/2-H*Y,S=(M+j)/2+H*$}else{const H=1/W,J=D*D+z*z,V=$*$+Y*Y;b=k+(Y*J-z*V)*H,S=M+(D*V-$*J)*H}o[l]=b,o[l+1]=S}let c=n[n.length-1],d,f=c*4,u,a=e[2*c],_,w=e[2*c+1];s.fill(0);for(let m=0;m<n.length;++m)c=n[m],d=f,u=a,_=w,f=c*4,a=e[2*c],w=e[2*c+1],s[d+2]=s[f]=_-w,s[d+3]=s[f+1]=a-u}render(e){const n=e==null?e=new Ff:void 0,{delaunay:{halfedges:i,inedges:s,hull:o},circumcenters:c,vectors:d}=this;if(o.length<=1)return null;for(let a=0,_=i.length;a<_;++a){const w=i[a];if(w<a)continue;const m=Math.floor(a/3)*2,l=Math.floor(w/3)*2,T=c[m],b=c[m+1],S=c[l],x=c[l+1];this._renderSegment(T,b,S,x,e)}let f,u=o[o.length-1];for(let a=0;a<o.length;++a){f=u,u=o[a];const _=Math.floor(s[u]/3)*2,w=c[_],m=c[_+1],l=f*4,T=this._project(w,m,d[l+2],d[l+3]);T&&this._renderSegment(w,m,T[0],T[1],e)}return n&&n.value()}renderBounds(e){const n=e==null?e=new Ff:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(e,n){const i=n==null?n=new Ff:void 0,s=this._clip(e);if(s===null||!s.length)return;n.moveTo(s[0],s[1]);let o=s.length;for(;s[0]===s[o-2]&&s[1]===s[o-1]&&o>1;)o-=2;for(let c=2;c<o;c+=2)(s[c]!==s[c-2]||s[c+1]!==s[c-1])&&n.lineTo(s[c],s[c+1]);return n.closePath(),i&&i.value()}*cellPolygons(){const{delaunay:{points:e}}=this;for(let n=0,i=e.length/2;n<i;++n){const s=this.cellPolygon(n);s&&(s.index=n,yield s)}}cellPolygon(e){const n=new vk;return this.renderCell(e,n),n.value()}_renderSegment(e,n,i,s,o){let c;const d=this._regioncode(e,n),f=this._regioncode(i,s);d===0&&f===0?(o.moveTo(e,n),o.lineTo(i,s)):(c=this._clipSegment(e,n,i,s,d,f))&&(o.moveTo(c[0],c[1]),o.lineTo(c[2],c[3]))}contains(e,n,i){return n=+n,n!==n||(i=+i,i!==i)?!1:this.delaunay._step(e,n,i)===e}*neighbors(e){const n=this._clip(e);if(n)for(const i of this.delaunay.neighbors(e)){const s=this._clip(i);if(s){e:for(let o=0,c=n.length;o<c;o+=2)for(let d=0,f=s.length;d<f;d+=2)if(n[o]==s[d]&&n[o+1]==s[d+1]&&n[(o+2)%c]==s[(d+f-2)%f]&&n[(o+3)%c]==s[(d+f-1)%f]){yield i;break e}}}}_cell(e){const{circumcenters:n,delaunay:{inedges:i,halfedges:s,triangles:o}}=this,c=i[e];if(c===-1)return null;const d=[];let f=c;do{const u=Math.floor(f/3);if(d.push(n[u*2],n[u*2+1]),f=f%3===2?f-2:f+1,o[f]!==e)break;f=s[f]}while(f!==c&&f!==-1);return d}_clip(e){if(e===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(e);if(n===null)return null;const{vectors:i}=this,s=e*4;return i[s]||i[s+1]?this._clipInfinite(e,n,i[s],i[s+1],i[s+2],i[s+3]):this._clipFinite(e,n)}_clipFinite(e,n){const i=n.length;let s=null,o,c,d=n[i-2],f=n[i-1],u,a=this._regioncode(d,f),_,w=0;for(let m=0;m<i;m+=2)if(o=d,c=f,d=n[m],f=n[m+1],u=a,a=this._regioncode(d,f),u===0&&a===0)_=w,w=0,s?s.push(d,f):s=[d,f];else{let l,T,b,S,x;if(u===0){if((l=this._clipSegment(o,c,d,f,u,a))===null)continue;[T,b,S,x]=l}else{if((l=this._clipSegment(d,f,o,c,a,u))===null)continue;[S,x,T,b]=l,_=w,w=this._edgecode(T,b),_&&w&&this._edge(e,_,w,s,s.length),s?s.push(T,b):s=[T,b]}_=w,w=this._edgecode(S,x),_&&w&&this._edge(e,_,w,s,s.length),s?s.push(S,x):s=[S,x]}if(s)_=w,w=this._edgecode(s[0],s[1]),_&&w&&this._edge(e,_,w,s,s.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return s}_clipSegment(e,n,i,s,o,c){for(;;){if(o===0&&c===0)return[e,n,i,s];if(o&c)return null;let d,f,u=o||c;u&8?(d=e+(i-e)*(this.ymax-n)/(s-n),f=this.ymax):u&4?(d=e+(i-e)*(this.ymin-n)/(s-n),f=this.ymin):u&2?(f=n+(s-n)*(this.xmax-e)/(i-e),d=this.xmax):(f=n+(s-n)*(this.xmin-e)/(i-e),d=this.xmin),o?(e=d,n=f,o=this._regioncode(e,n)):(i=d,s=f,c=this._regioncode(i,s))}}_clipInfinite(e,n,i,s,o,c){let d=Array.from(n),f;if((f=this._project(d[0],d[1],i,s))&&d.unshift(f[0],f[1]),(f=this._project(d[d.length-2],d[d.length-1],o,c))&&d.push(f[0],f[1]),d=this._clipFinite(e,d))for(let u=0,a=d.length,_,w=this._edgecode(d[a-2],d[a-1]);u<a;u+=2)_=w,w=this._edgecode(d[u],d[u+1]),_&&w&&(u=this._edge(e,_,w,d,u),a=d.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(d=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return d}_edge(e,n,i,s,o){for(;n!==i;){let c,d;switch(n){case 5:n=4;continue;case 4:n=6,c=this.xmax,d=this.ymin;break;case 6:n=2;continue;case 2:n=10,c=this.xmax,d=this.ymax;break;case 10:n=8;continue;case 8:n=9,c=this.xmin,d=this.ymax;break;case 9:n=1;continue;case 1:n=5,c=this.xmin,d=this.ymin;break}(s[o]!==c||s[o+1]!==d)&&this.contains(e,c,d)&&(s.splice(o,0,c,d),o+=2)}if(s.length>4)for(let c=0;c<s.length;c+=2){const d=(c+2)%s.length,f=(c+4)%s.length;(s[c]===s[d]&&s[d]===s[f]||s[c+1]===s[d+1]&&s[d+1]===s[f+1])&&(s.splice(d,2),c-=2)}return o}_project(e,n,i,s){let o=1/0,c,d,f;if(s<0){if(n<=this.ymin)return null;(c=(this.ymin-n)/s)<o&&(f=this.ymin,d=e+(o=c)*i)}else if(s>0){if(n>=this.ymax)return null;(c=(this.ymax-n)/s)<o&&(f=this.ymax,d=e+(o=c)*i)}if(i>0){if(e>=this.xmax)return null;(c=(this.xmax-e)/i)<o&&(d=this.xmax,f=n+(o=c)*s)}else if(i<0){if(e<=this.xmin)return null;(c=(this.xmin-e)/i)<o&&(d=this.xmin,f=n+(o=c)*s)}return[d,f]}_edgecode(e,n){return(e===this.xmin?1:e===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(e,n){return(e<this.xmin?1:e>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}}const Zse=2*Math.PI,nh=Math.pow;function ere(t){return t[0]}function tre(t){return t[1]}function nre(t){const{triangles:e,coords:n}=t;for(let i=0;i<e.length;i+=3){const s=2*e[i],o=2*e[i+1],c=2*e[i+2];if((n[c]-n[s])*(n[o+1]-n[s+1])-(n[o]-n[s])*(n[c+1]-n[s+1])>1e-10)return!1}return!0}function ire(t,e,n){return[t+Math.sin(t+e)*n,e+Math.cos(t-e)*n]}class BO{static from(e,n=ere,i=tre,s){return new BO("length"in e?sre(e,n,i,s):Float64Array.from(rre(e,n,i,s)))}constructor(e){this._delaunator=new IT(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const e=this._delaunator,n=this.points;if(e.hull&&e.hull.length>2&&nre(e)){this.collinear=Int32Array.from({length:n.length/2},(w,m)=>m).sort((w,m)=>n[2*w]-n[2*m]||n[2*w+1]-n[2*m+1]);const f=this.collinear[0],u=this.collinear[this.collinear.length-1],a=[n[2*f],n[2*f+1],n[2*u],n[2*u+1]],_=1e-8*Math.hypot(a[3]-a[1],a[2]-a[0]);for(let w=0,m=n.length/2;w<m;++w){const l=ire(n[2*w],n[2*w+1],_);n[2*w]=l[0],n[2*w+1]=l[1]}this._delaunator=new IT(n)}else delete this.collinear;const i=this.halfedges=this._delaunator.halfedges,s=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,c=this.inedges.fill(-1),d=this._hullIndex.fill(-1);for(let f=0,u=i.length;f<u;++f){const a=o[f%3===2?f-2:f+1];(i[f]===-1||c[a]===-1)&&(c[a]=f)}for(let f=0,u=s.length;f<u;++f)d[s[f]]=f;s.length<=2&&s.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=s[0],c[s[0]]=1,s.length===2&&(c[s[1]]=0,this.triangles[1]=s[1],this.triangles[2]=s[1]))}voronoi(e){return new Qse(this,e)}*neighbors(e){const{inedges:n,hull:i,_hullIndex:s,halfedges:o,triangles:c,collinear:d}=this;if(d){const _=d.indexOf(e);_>0&&(yield d[_-1]),_<d.length-1&&(yield d[_+1]);return}const f=n[e];if(f===-1)return;let u=f,a=-1;do{if(yield a=c[u],u=u%3===2?u-2:u+1,c[u]!==e)return;if(u=o[u],u===-1){const _=i[(s[e]+1)%i.length];_!==a&&(yield _);return}}while(u!==f)}find(e,n,i=0){if(e=+e,e!==e||(n=+n,n!==n))return-1;const s=i;let o;for(;(o=this._step(i,e,n))>=0&&o!==i&&o!==s;)i=o;return o}_step(e,n,i){const{inedges:s,hull:o,_hullIndex:c,halfedges:d,triangles:f,points:u}=this;if(s[e]===-1||!u.length)return(e+1)%(u.length>>1);let a=e,_=nh(n-u[e*2],2)+nh(i-u[e*2+1],2);const w=s[e];let m=w;do{let l=f[m];const T=nh(n-u[l*2],2)+nh(i-u[l*2+1],2);if(T<_&&(_=T,a=l),m=m%3===2?m-2:m+1,f[m]!==e)break;if(m=d[m],m===-1){if(m=o[(c[e]+1)%o.length],m!==l&&nh(n-u[m*2],2)+nh(i-u[m*2+1],2)<_)return m;break}}while(m!==w);return a}render(e){const n=e==null?e=new Ff:void 0,{points:i,halfedges:s,triangles:o}=this;for(let c=0,d=s.length;c<d;++c){const f=s[c];if(f<c)continue;const u=o[c]*2,a=o[f]*2;e.moveTo(i[u],i[u+1]),e.lineTo(i[a],i[a+1])}return this.renderHull(e),n&&n.value()}renderPoints(e,n){n===void 0&&(!e||typeof e.moveTo!="function")&&(n=e,e=null),n=n==null?2:+n;const i=e==null?e=new Ff:void 0,{points:s}=this;for(let o=0,c=s.length;o<c;o+=2){const d=s[o],f=s[o+1];e.moveTo(d+n,f),e.arc(d,f,n,0,Zse)}return i&&i.value()}renderHull(e){const n=e==null?e=new Ff:void 0,{hull:i,points:s}=this,o=i[0]*2,c=i.length;e.moveTo(s[o],s[o+1]);for(let d=1;d<c;++d){const f=2*i[d];e.lineTo(s[f],s[f+1])}return e.closePath(),n&&n.value()}hullPolygon(){const e=new vk;return this.renderHull(e),e.value()}renderTriangle(e,n){const i=n==null?n=new Ff:void 0,{points:s,triangles:o}=this,c=o[e*=3]*2,d=o[e+1]*2,f=o[e+2]*2;return n.moveTo(s[c],s[c+1]),n.lineTo(s[d],s[d+1]),n.lineTo(s[f],s[f+1]),n.closePath(),i&&i.value()}*trianglePolygons(){const{triangles:e}=this;for(let n=0,i=e.length/3;n<i;++n)yield this.trianglePolygon(n)}trianglePolygon(e){const n=new vk;return this.renderTriangle(e,n),n.value()}}function sre(t,e,n,i){const s=t.length,o=new Float64Array(s*2);for(let c=0;c<s;++c){const d=t[c];o[c*2]=e.call(i,d,c,t),o[c*2+1]=n.call(i,d,c,t)}return o}function*rre(t,e,n,i){let s=0;for(const o of t)yield e.call(i,o,s,t),yield n.call(i,o,s,t),++s}var SP={},Tx={},vx=34,Dg=10,Ex=13;function p5(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function are(t,e){var n=p5(t);return function(i,s){return e(n(i),s,t)}}function xP(t){var e=Object.create(null),n=[];return t.forEach(function(i){for(var s in i)s in e||n.push(e[s]=s)}),n}function Ts(t,e){var n=t+"",i=n.length;return i<e?new Array(e-i+1).join(0)+n:n}function ore(t){return t<0?"-"+Ts(-t,6):t>9999?"+"+Ts(t,6):Ts(t,4)}function lre(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),i=t.getUTCSeconds(),s=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":ore(t.getUTCFullYear())+"-"+Ts(t.getUTCMonth()+1,2)+"-"+Ts(t.getUTCDate(),2)+(s?"T"+Ts(e,2)+":"+Ts(n,2)+":"+Ts(i,2)+"."+Ts(s,3)+"Z":i?"T"+Ts(e,2)+":"+Ts(n,2)+":"+Ts(i,2)+"Z":n||e?"T"+Ts(e,2)+":"+Ts(n,2)+"Z":"")}function cre(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function i(_,w){var m,l,T=s(_,function(b,S){if(m)return m(b,S-1);l=b,m=w?are(b,w):p5(b)});return T.columns=l||[],T}function s(_,w){var m=[],l=_.length,T=0,b=0,S,x=l<=0,B=!1;_.charCodeAt(l-1)===Dg&&--l,_.charCodeAt(l-1)===Ex&&--l;function F(){if(x)return Tx;if(B)return B=!1,SP;var M,A=T,R;if(_.charCodeAt(A)===vx){for(;T++<l&&_.charCodeAt(T)!==vx||_.charCodeAt(++T)===vx;);return(M=T)>=l?x=!0:(R=_.charCodeAt(T++))===Dg?B=!0:R===Ex&&(B=!0,_.charCodeAt(T)===Dg&&++T),_.slice(A+1,M-1).replace(/""/g,'"')}for(;T<l;){if((R=_.charCodeAt(M=T++))===Dg)B=!0;else if(R===Ex)B=!0,_.charCodeAt(T)===Dg&&++T;else if(R!==n)continue;return _.slice(A,M)}return x=!0,_.slice(A,l)}for(;(S=F())!==Tx;){for(var k=[];S!==SP&&S!==Tx;)k.push(S),S=F();w&&(k=w(k,b++))==null||m.push(k)}return m}function o(_,w){return _.map(function(m){return w.map(function(l){return a(m[l])}).join(t)})}function c(_,w){return w==null&&(w=xP(_)),[w.map(a).join(t)].concat(o(_,w)).join(`
`)}function d(_,w){return w==null&&(w=xP(_)),o(_,w).join(`
`)}function f(_){return _.map(u).join(`
`)}function u(_){return _.map(a).join(t)}function a(_){return _==null?"":_ instanceof Date?lre(_):e.test(_+="")?'"'+_.replace(/"/g,'""')+'"':_}return{parse:i,parseRows:s,format:c,formatBody:d,formatRows:f,formatRow:u,formatValue:a}}function dre(t,e){var n,i=1;t==null&&(t=0),e==null&&(e=0);function s(){var o,c=n.length,d,f=0,u=0;for(o=0;o<c;++o)d=n[o],f+=d.x,u+=d.y;for(f=(f/c-t)*i,u=(u/c-e)*i,o=0;o<c;++o)d=n[o],d.x-=f,d.y-=u}return s.initialize=function(o){n=o},s.x=function(o){return arguments.length?(t=+o,s):t},s.y=function(o){return arguments.length?(e=+o,s):e},s.strength=function(o){return arguments.length?(i=+o,s):i},s}function fre(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return g5(this.cover(e,n),e,n,t)}function g5(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var s,o=t._root,c={data:i},d=t._x0,f=t._y0,u=t._x1,a=t._y1,_,w,m,l,T,b,S,x;if(!o)return t._root=c,t;for(;o.length;)if((T=e>=(_=(d+u)/2))?d=_:u=_,(b=n>=(w=(f+a)/2))?f=w:a=w,s=o,!(o=o[S=b<<1|T]))return s[S]=c,t;if(m=+t._x.call(null,o.data),l=+t._y.call(null,o.data),e===m&&n===l)return c.next=o,s?s[S]=c:t._root=c,t;do s=s?s[S]=new Array(4):t._root=new Array(4),(T=e>=(_=(d+u)/2))?d=_:u=_,(b=n>=(w=(f+a)/2))?f=w:a=w;while((S=b<<1|T)===(x=(l>=w)<<1|m>=_));return s[x]=o,s[S]=c,t}function ure(t){var e,n,i=t.length,s,o,c=new Array(i),d=new Array(i),f=1/0,u=1/0,a=-1/0,_=-1/0;for(n=0;n<i;++n)isNaN(s=+this._x.call(null,e=t[n]))||isNaN(o=+this._y.call(null,e))||(c[n]=s,d[n]=o,s<f&&(f=s),s>a&&(a=s),o<u&&(u=o),o>_&&(_=o));if(f>a||u>_)return this;for(this.cover(f,u).cover(a,_),n=0;n<i;++n)g5(this,c[n],d[n],t[n]);return this}function hre(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,s=this._x1,o=this._y1;if(isNaN(n))s=(n=Math.floor(t))+1,o=(i=Math.floor(e))+1;else{for(var c=s-n||1,d=this._root,f,u;n>t||t>=s||i>e||e>=o;)switch(u=(e<i)<<1|t<n,f=new Array(4),f[u]=d,d=f,c*=2,u){case 0:s=n+c,o=i+c;break;case 1:n=s-c,o=i+c;break;case 2:s=n+c,i=o-c;break;case 3:n=s-c,i=o-c;break}this._root&&this._root.length&&(this._root=d)}return this._x0=n,this._y0=i,this._x1=s,this._y1=o,this}function pre(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function gre(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function ls(t,e,n,i,s){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=s}function _re(t,e,n){var i,s=this._x0,o=this._y0,c,d,f,u,a=this._x1,_=this._y1,w=[],m=this._root,l,T;for(m&&w.push(new ls(m,s,o,a,_)),n==null?n=1/0:(s=t-n,o=e-n,a=t+n,_=e+n,n*=n);l=w.pop();)if(!(!(m=l.node)||(c=l.x0)>a||(d=l.y0)>_||(f=l.x1)<s||(u=l.y1)<o))if(m.length){var b=(c+f)/2,S=(d+u)/2;w.push(new ls(m[3],b,S,f,u),new ls(m[2],c,S,b,u),new ls(m[1],b,d,f,S),new ls(m[0],c,d,b,S)),(T=(e>=S)<<1|t>=b)&&(l=w[w.length-1],w[w.length-1]=w[w.length-1-T],w[w.length-1-T]=l)}else{var x=t-+this._x.call(null,m.data),B=e-+this._y.call(null,m.data),F=x*x+B*B;if(F<n){var k=Math.sqrt(n=F);s=t-k,o=e-k,a=t+k,_=e+k,i=m.data}}return i}function yre(t){if(isNaN(a=+this._x.call(null,t))||isNaN(_=+this._y.call(null,t)))return this;var e,n=this._root,i,s,o,c=this._x0,d=this._y0,f=this._x1,u=this._y1,a,_,w,m,l,T,b,S;if(!n)return this;if(n.length)for(;;){if((l=a>=(w=(c+f)/2))?c=w:f=w,(T=_>=(m=(d+u)/2))?d=m:u=m,e=n,!(n=n[b=T<<1|l]))return this;if(!n.length)break;(e[b+1&3]||e[b+2&3]||e[b+3&3])&&(i=e,S=b)}for(;n.data!==t;)if(s=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,s?(o?s.next=o:delete s.next,this):e?(o?e[b]=o:delete e[b],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(i?i[S]=n:this._root=n),this):(this._root=o,this)}function mre(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function wre(){return this._root}function bre(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function Tre(t){var e=[],n,i=this._root,s,o,c,d,f;for(i&&e.push(new ls(i,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(i=n.node,o=n.x0,c=n.y0,d=n.x1,f=n.y1)&&i.length){var u=(o+d)/2,a=(c+f)/2;(s=i[3])&&e.push(new ls(s,u,a,d,f)),(s=i[2])&&e.push(new ls(s,o,a,u,f)),(s=i[1])&&e.push(new ls(s,u,c,d,a)),(s=i[0])&&e.push(new ls(s,o,c,u,a))}return this}function vre(t){var e=[],n=[],i;for(this._root&&e.push(new ls(this._root,this._x0,this._y0,this._x1,this._y1));i=e.pop();){var s=i.node;if(s.length){var o,c=i.x0,d=i.y0,f=i.x1,u=i.y1,a=(c+f)/2,_=(d+u)/2;(o=s[0])&&e.push(new ls(o,c,d,a,_)),(o=s[1])&&e.push(new ls(o,a,d,f,_)),(o=s[2])&&e.push(new ls(o,c,_,a,u)),(o=s[3])&&e.push(new ls(o,a,_,f,u))}n.push(i)}for(;i=n.pop();)t(i.node,i.x0,i.y0,i.x1,i.y1);return this}function Ere(t){return t[0]}function Sre(t){return arguments.length?(this._x=t,this):this._x}function xre(t){return t[1]}function Bre(t){return arguments.length?(this._y=t,this):this._y}function kO(t,e,n){var i=new IO(e==null?Ere:e,n==null?xre:n,NaN,NaN,NaN,NaN);return t==null?i:i.addAll(t)}function IO(t,e,n,i,s,o){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=s,this._y1=o,this._root=void 0}function BP(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var ms=kO.prototype=IO.prototype;ms.copy=function(){var t=new IO(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,i;if(!e)return t;if(!e.length)return t._root=BP(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var s=0;s<4;++s)(i=e.source[s])&&(i.length?n.push({source:i,target:e.target[s]=new Array(4)}):e.target[s]=BP(i));return t};ms.add=fre;ms.addAll=ure;ms.cover=hre;ms.data=pre;ms.extent=gre;ms.find=_re;ms.remove=yre;ms.removeAll=mre;ms.root=wre;ms.size=bre;ms.visit=Tre;ms.visitAfter=vre;ms.x=Sre;ms.y=Bre;function fs(t){return function(){return t}}function Rc(t){return(t()-.5)*1e-6}function kre(t){return t.x+t.vx}function Ire(t){return t.y+t.vy}function Fre(t){var e,n,i,s=1,o=1;typeof t!="function"&&(t=fs(t==null?1:+t));function c(){for(var u,a=e.length,_,w,m,l,T,b,S=0;S<o;++S)for(_=kO(e,kre,Ire).visitAfter(d),u=0;u<a;++u)w=e[u],T=n[w.index],b=T*T,m=w.x+w.vx,l=w.y+w.vy,_.visit(x);function x(B,F,k,M,A){var R=B.data,P=B.r,j=T+P;if(R){if(R.index>w.index){var D=m-R.x-R.vx,z=l-R.y-R.vy,$=D*D+z*z;$<j*j&&(D===0&&(D=Rc(i),$+=D*D),z===0&&(z=Rc(i),$+=z*z),$=(j-($=Math.sqrt($)))/$*s,w.vx+=(D*=$)*(j=(P*=P)/(b+P)),w.vy+=(z*=$)*j,R.vx-=D*(j=1-j),R.vy-=z*j)}return}return F>m+j||M<m-j||k>l+j||A<l-j}}function d(u){if(u.data)return u.r=n[u.data.index];for(var a=u.r=0;a<4;++a)u[a]&&u[a].r>u.r&&(u.r=u[a].r)}function f(){if(!!e){var u,a=e.length,_;for(n=new Array(a),u=0;u<a;++u)_=e[u],n[_.index]=+t(_,u,e)}}return c.initialize=function(u,a){e=u,i=a,f()},c.iterations=function(u){return arguments.length?(o=+u,c):o},c.strength=function(u){return arguments.length?(s=+u,c):s},c.radius=function(u){return arguments.length?(t=typeof u=="function"?u:fs(+u),f(),c):t},c}function Ore(t){return t.index}function kP(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function Mre(t){var e=Ore,n=_,i,s=fs(30),o,c,d,f,u,a=1;t==null&&(t=[]);function _(b){return 1/Math.min(d[b.source.index],d[b.target.index])}function w(b){for(var S=0,x=t.length;S<a;++S)for(var B=0,F,k,M,A,R,P,j;B<x;++B)F=t[B],k=F.source,M=F.target,A=M.x+M.vx-k.x-k.vx||Rc(u),R=M.y+M.vy-k.y-k.vy||Rc(u),P=Math.sqrt(A*A+R*R),P=(P-o[B])/P*b*i[B],A*=P,R*=P,M.vx-=A*(j=f[B]),M.vy-=R*j,k.vx+=A*(j=1-j),k.vy+=R*j}function m(){if(!!c){var b,S=c.length,x=t.length,B=new Map(c.map((k,M)=>[e(k,M,c),k])),F;for(b=0,d=new Array(S);b<x;++b)F=t[b],F.index=b,typeof F.source!="object"&&(F.source=kP(B,F.source)),typeof F.target!="object"&&(F.target=kP(B,F.target)),d[F.source.index]=(d[F.source.index]||0)+1,d[F.target.index]=(d[F.target.index]||0)+1;for(b=0,f=new Array(x);b<x;++b)F=t[b],f[b]=d[F.source.index]/(d[F.source.index]+d[F.target.index]);i=new Array(x),l(),o=new Array(x),T()}}function l(){if(!!c)for(var b=0,S=t.length;b<S;++b)i[b]=+n(t[b],b,t)}function T(){if(!!c)for(var b=0,S=t.length;b<S;++b)o[b]=+s(t[b],b,t)}return w.initialize=function(b,S){c=b,u=S,m()},w.links=function(b){return arguments.length?(t=b,m(),w):t},w.id=function(b){return arguments.length?(e=b,w):e},w.iterations=function(b){return arguments.length?(a=+b,w):a},w.strength=function(b){return arguments.length?(n=typeof b=="function"?b:fs(+b),l(),w):n},w.distance=function(b){return arguments.length?(s=typeof b=="function"?b:fs(+b),T(),w):s},w}const Are=1664525,Nre=1013904223,IP=4294967296;function Cre(){let t=1;return()=>(t=(Are*t+Nre)%IP)/IP}function Rre(t){return t.x}function Lre(t){return t.y}var Pre=10,Dre=Math.PI*(3-Math.sqrt(5));function jre(t){var e,n=1,i=.001,s=1-Math.pow(i,1/300),o=0,c=.6,d=new Map,f=u5(_),u=Pz("tick","end"),a=Cre();t==null&&(t=[]);function _(){w(),u.call("tick",e),n<i&&(f.stop(),u.call("end",e))}function w(T){var b,S=t.length,x;T===void 0&&(T=1);for(var B=0;B<T;++B)for(n+=(o-n)*s,d.forEach(function(F){F(n)}),b=0;b<S;++b)x=t[b],x.fx==null?x.x+=x.vx*=c:(x.x=x.fx,x.vx=0),x.fy==null?x.y+=x.vy*=c:(x.y=x.fy,x.vy=0);return e}function m(){for(var T=0,b=t.length,S;T<b;++T){if(S=t[T],S.index=T,S.fx!=null&&(S.x=S.fx),S.fy!=null&&(S.y=S.fy),isNaN(S.x)||isNaN(S.y)){var x=Pre*Math.sqrt(.5+T),B=T*Dre;S.x=x*Math.cos(B),S.y=x*Math.sin(B)}(isNaN(S.vx)||isNaN(S.vy))&&(S.vx=S.vy=0)}}function l(T){return T.initialize&&T.initialize(t,a),T}return m(),e={tick:w,restart:function(){return f.restart(_),e},stop:function(){return f.stop(),e},nodes:function(T){return arguments.length?(t=T,m(),d.forEach(l),e):t},alpha:function(T){return arguments.length?(n=+T,e):n},alphaMin:function(T){return arguments.length?(i=+T,e):i},alphaDecay:function(T){return arguments.length?(s=+T,e):+s},alphaTarget:function(T){return arguments.length?(o=+T,e):o},velocityDecay:function(T){return arguments.length?(c=1-T,e):1-c},randomSource:function(T){return arguments.length?(a=T,d.forEach(l),e):a},force:function(T,b){return arguments.length>1?(b==null?d.delete(T):d.set(T,l(b)),e):d.get(T)},find:function(T,b,S){var x=0,B=t.length,F,k,M,A,R;for(S==null?S=1/0:S*=S,x=0;x<B;++x)A=t[x],F=T-A.x,k=b-A.y,M=F*F+k*k,M<S&&(R=A,S=M);return R},on:function(T,b){return arguments.length>1?(u.on(T,b),e):u.on(T)}}}function Ure(){var t,e,n,i,s=fs(-30),o,c=1,d=1/0,f=.81;function u(m){var l,T=t.length,b=kO(t,Rre,Lre).visitAfter(_);for(i=m,l=0;l<T;++l)e=t[l],b.visit(w)}function a(){if(!!t){var m,l=t.length,T;for(o=new Array(l),m=0;m<l;++m)T=t[m],o[T.index]=+s(T,m,t)}}function _(m){var l=0,T,b,S=0,x,B,F;if(m.length){for(x=B=F=0;F<4;++F)(T=m[F])&&(b=Math.abs(T.value))&&(l+=T.value,S+=b,x+=b*T.x,B+=b*T.y);m.x=x/S,m.y=B/S}else{T=m,T.x=T.data.x,T.y=T.data.y;do l+=o[T.data.index];while(T=T.next)}m.value=l}function w(m,l,T,b){if(!m.value)return!0;var S=m.x-e.x,x=m.y-e.y,B=b-l,F=S*S+x*x;if(B*B/f<F)return F<d&&(S===0&&(S=Rc(n),F+=S*S),x===0&&(x=Rc(n),F+=x*x),F<c&&(F=Math.sqrt(c*F)),e.vx+=S*m.value*i/F,e.vy+=x*m.value*i/F),!0;if(m.length||F>=d)return;(m.data!==e||m.next)&&(S===0&&(S=Rc(n),F+=S*S),x===0&&(x=Rc(n),F+=x*x),F<c&&(F=Math.sqrt(c*F)));do m.data!==e&&(B=o[m.data.index]*i/F,e.vx+=S*B,e.vy+=x*B);while(m=m.next)}return u.initialize=function(m,l){t=m,n=l,a()},u.strength=function(m){return arguments.length?(s=typeof m=="function"?m:fs(+m),a(),u):s},u.distanceMin=function(m){return arguments.length?(c=m*m,u):Math.sqrt(c)},u.distanceMax=function(m){return arguments.length?(d=m*m,u):Math.sqrt(d)},u.theta=function(m){return arguments.length?(f=m*m,u):Math.sqrt(f)},u}function $re(t){var e=fs(.1),n,i,s;typeof t!="function"&&(t=fs(t==null?0:+t));function o(d){for(var f=0,u=n.length,a;f<u;++f)a=n[f],a.vx+=(s[f]-a.x)*i[f]*d}function c(){if(!!n){var d,f=n.length;for(i=new Array(f),s=new Array(f),d=0;d<f;++d)i[d]=isNaN(s[d]=+t(n[d],d,n))?0:+e(n[d],d,n)}}return o.initialize=function(d){n=d,c()},o.strength=function(d){return arguments.length?(e=typeof d=="function"?d:fs(+d),c(),o):e},o.x=function(d){return arguments.length?(t=typeof d=="function"?d:fs(+d),c(),o):t},o}function zre(t){var e=fs(.1),n,i,s;typeof t!="function"&&(t=fs(t==null?0:+t));function o(d){for(var f=0,u=n.length,a;f<u;++f)a=n[f],a.vy+=(s[f]-a.y)*i[f]*d}function c(){if(!!n){var d,f=n.length;for(i=new Array(f),s=new Array(f),d=0;d<f;++d)i[d]=isNaN(s[d]=+t(n[d],d,n))?0:+e(n[d],d,n)}}return o.initialize=function(d){n=d,c()},o.strength=function(d){return arguments.length?(e=typeof d=="function"?d:fs(+d),c(),o):e},o.y=function(d){return arguments.length?(t=typeof d=="function"?d:fs(+d),c(),o):t},o}function qre(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function FT(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function _p(t){return t=FT(Math.abs(t)),t?t[1]:NaN}function Gre(t,e){return function(n,i){for(var s=n.length,o=[],c=0,d=t[0],f=0;s>0&&d>0&&(f+d+1>i&&(d=Math.max(1,i-f)),o.push(n.substring(s-=d,s+d)),!((f+=d+1)>i));)d=t[c=(c+1)%t.length];return o.reverse().join(e)}}function Vre(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Wre=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function iu(t){if(!(e=Wre.exec(t)))throw new Error("invalid format: "+t);var e;return new FO({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}iu.prototype=FO.prototype;function FO(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}FO.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Hre(t){e:for(var e=t.length,n=1,i=-1,s;n<e;++n)switch(t[n]){case".":i=s=n;break;case"0":i===0&&(i=n),s=n;break;default:if(!+t[n])break e;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(s+1):t}var _5;function Yre(t,e){var n=FT(t,e);if(!n)return t+"";var i=n[0],s=n[1],o=s-(_5=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,c=i.length;return o===c?i:o>c?i+new Array(o-c+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+FT(t,Math.max(0,e+o-1))[0]}function FP(t,e){var n=FT(t,e);if(!n)return t+"";var i=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+i:i.length>s+1?i.slice(0,s+1)+"."+i.slice(s+1):i+new Array(s-i.length+2).join("0")}const OP={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:qre,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>FP(t*100,e),r:FP,s:Yre,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function MP(t){return t}var AP=Array.prototype.map,NP=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function y5(t){var e=t.grouping===void 0||t.thousands===void 0?MP:Gre(AP.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",s=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?MP:Vre(AP.call(t.numerals,String)),c=t.percent===void 0?"%":t.percent+"",d=t.minus===void 0?"\u2212":t.minus+"",f=t.nan===void 0?"NaN":t.nan+"";function u(_){_=iu(_);var w=_.fill,m=_.align,l=_.sign,T=_.symbol,b=_.zero,S=_.width,x=_.comma,B=_.precision,F=_.trim,k=_.type;k==="n"?(x=!0,k="g"):OP[k]||(B===void 0&&(B=12),F=!0,k="g"),(b||w==="0"&&m==="=")&&(b=!0,w="0",m="=");var M=T==="$"?n:T==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",A=T==="$"?i:/[%p]/.test(k)?c:"",R=OP[k],P=/[defgprs%]/.test(k);B=B===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,B)):Math.max(0,Math.min(20,B));function j(D){var z=M,$=A,Y,W,H;if(k==="c")$=R(D)+$,D="";else{D=+D;var J=D<0||1/D<0;if(D=isNaN(D)?f:R(Math.abs(D),B),F&&(D=Hre(D)),J&&+D==0&&l!=="+"&&(J=!1),z=(J?l==="("?l:d:l==="-"||l==="("?"":l)+z,$=(k==="s"?NP[8+_5/3]:"")+$+(J&&l==="("?")":""),P){for(Y=-1,W=D.length;++Y<W;)if(H=D.charCodeAt(Y),48>H||H>57){$=(H===46?s+D.slice(Y+1):D.slice(Y))+$,D=D.slice(0,Y);break}}}x&&!b&&(D=e(D,1/0));var V=z.length+D.length+$.length,le=V<S?new Array(S-V+1).join(w):"";switch(x&&b&&(D=e(le+D,le.length?S-$.length:1/0),le=""),m){case"<":D=z+D+$+le;break;case"=":D=z+le+D+$;break;case"^":D=le.slice(0,V=le.length>>1)+z+D+$+le.slice(V);break;default:D=le+z+D+$;break}return o(D)}return j.toString=function(){return _+""},j}function a(_,w){var m=u((_=iu(_),_.type="f",_)),l=Math.max(-8,Math.min(8,Math.floor(_p(w)/3)))*3,T=Math.pow(10,-l),b=NP[8+l/3];return function(S){return m(T*S)+b}}return{format:u,formatPrefix:a}}var Ib,iE,OO;Xre({thousands:",",grouping:[3],currency:["$",""]});function Xre(t){return Ib=y5(t),iE=Ib.format,OO=Ib.formatPrefix,Ib}function m5(t){return Math.max(0,-_p(Math.abs(t)))}function w5(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(_p(e)/3)))*3-_p(Math.abs(t)))}function b5(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,_p(e)-_p(t))+1}var ze=1e-6,OT=1e-12,Ft=Math.PI,Cn=Ft/2,MT=Ft/4,_s=Ft*2,Ln=180/Ft,kt=Ft/180,Rt=Math.abs,og=Math.atan,Hr=Math.atan2,qe=Math.cos,Fb=Math.ceil,T5=Math.exp,Ek=Math.hypot,AT=Math.log,Sx=Math.pow,je=Math.sin,Cr=Math.sign||function(t){return t>0?1:t<0?-1:0},ys=Math.sqrt,MO=Math.tan;function v5(t){return t>1?0:t<-1?Ft:Math.acos(t)}function zs(t){return t>1?Cn:t<-1?-Cn:Math.asin(t)}function Si(){}function NT(t,e){t&&RP.hasOwnProperty(t.type)&&RP[t.type](t,e)}var CP={Feature:function(t,e){NT(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,s=n.length;++i<s;)NT(n[i].geometry,e)}},RP={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,s=n.length;++i<s;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){Sk(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,s=n.length;++i<s;)Sk(n[i],e,0)},Polygon:function(t,e){LP(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,s=n.length;++i<s;)LP(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,s=n.length;++i<s;)NT(n[i],e)}};function Sk(t,e,n){var i=-1,s=t.length-n,o;for(e.lineStart();++i<s;)o=t[i],e.point(o[0],o[1],o[2]);e.lineEnd()}function LP(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)Sk(t[n],e,1);e.polygonEnd()}function Ol(t,e){t&&CP.hasOwnProperty(t.type)?CP[t.type](t,e):NT(t,e)}var CT=new ps,RT=new ps,E5,S5,xk,Bk,kk,Uo={point:Si,lineStart:Si,lineEnd:Si,polygonStart:function(){CT=new ps,Uo.lineStart=Kre,Uo.lineEnd=Jre},polygonEnd:function(){var t=+CT;RT.add(t<0?_s+t:t),this.lineStart=this.lineEnd=this.point=Si},sphere:function(){RT.add(_s)}};function Kre(){Uo.point=Qre}function Jre(){x5(E5,S5)}function Qre(t,e){Uo.point=x5,E5=t,S5=e,t*=kt,e*=kt,xk=t,Bk=qe(e=e/2+MT),kk=je(e)}function x5(t,e){t*=kt,e*=kt,e=e/2+MT;var n=t-xk,i=n>=0?1:-1,s=i*n,o=qe(e),c=je(e),d=kk*c,f=Bk*o+d*qe(s),u=d*i*je(s);CT.add(Hr(u,f)),xk=t,Bk=o,kk=c}function Zre(t){return RT=new ps,Ol(t,Uo),RT*2}function LT(t){return[Hr(t[1],t[0]),zs(t[2])]}function su(t){var e=t[0],n=t[1],i=qe(n);return[i*qe(e),i*je(e),je(n)]}function Ob(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function yp(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function xx(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Mb(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function PT(t){var e=ys(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var kn,ks,Mn,cr,hf,B5,k5,qh,C_,Sc,Xl,Sl={point:Ik,lineStart:PP,lineEnd:DP,polygonStart:function(){Sl.point=F5,Sl.lineStart=eae,Sl.lineEnd=tae,C_=new ps,Uo.polygonStart()},polygonEnd:function(){Uo.polygonEnd(),Sl.point=Ik,Sl.lineStart=PP,Sl.lineEnd=DP,CT<0?(kn=-(Mn=180),ks=-(cr=90)):C_>ze?cr=90:C_<-ze&&(ks=-90),Xl[0]=kn,Xl[1]=Mn},sphere:function(){kn=-(Mn=180),ks=-(cr=90)}};function Ik(t,e){Sc.push(Xl=[kn=t,Mn=t]),e<ks&&(ks=e),e>cr&&(cr=e)}function I5(t,e){var n=su([t*kt,e*kt]);if(qh){var i=yp(qh,n),s=[i[1],-i[0],0],o=yp(s,i);PT(o),o=LT(o);var c=t-hf,d=c>0?1:-1,f=o[0]*Ln*d,u,a=Rt(c)>180;a^(d*hf<f&&f<d*t)?(u=o[1]*Ln,u>cr&&(cr=u)):(f=(f+360)%360-180,a^(d*hf<f&&f<d*t)?(u=-o[1]*Ln,u<ks&&(ks=u)):(e<ks&&(ks=e),e>cr&&(cr=e))),a?t<hf?ar(kn,t)>ar(kn,Mn)&&(Mn=t):ar(t,Mn)>ar(kn,Mn)&&(kn=t):Mn>=kn?(t<kn&&(kn=t),t>Mn&&(Mn=t)):t>hf?ar(kn,t)>ar(kn,Mn)&&(Mn=t):ar(t,Mn)>ar(kn,Mn)&&(kn=t)}else Sc.push(Xl=[kn=t,Mn=t]);e<ks&&(ks=e),e>cr&&(cr=e),qh=n,hf=t}function PP(){Sl.point=I5}function DP(){Xl[0]=kn,Xl[1]=Mn,Sl.point=Ik,qh=null}function F5(t,e){if(qh){var n=t-hf;C_.add(Rt(n)>180?n+(n>0?360:-360):n)}else B5=t,k5=e;Uo.point(t,e),I5(t,e)}function eae(){Uo.lineStart()}function tae(){F5(B5,k5),Uo.lineEnd(),Rt(C_)>ze&&(kn=-(Mn=180)),Xl[0]=kn,Xl[1]=Mn,qh=null}function ar(t,e){return(e-=t)<0?e+360:e}function nae(t,e){return t[0]-e[0]}function jP(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function iae(t){var e,n,i,s,o,c,d;if(cr=Mn=-(kn=ks=1/0),Sc=[],Ol(t,Sl),n=Sc.length){for(Sc.sort(nae),e=1,i=Sc[0],o=[i];e<n;++e)s=Sc[e],jP(i,s[0])||jP(i,s[1])?(ar(i[0],s[1])>ar(i[0],i[1])&&(i[1]=s[1]),ar(s[0],i[1])>ar(i[0],i[1])&&(i[0]=s[0])):o.push(i=s);for(c=-1/0,n=o.length-1,e=0,i=o[n];e<=n;i=s,++e)s=o[e],(d=ar(i[1],s[0]))>c&&(c=d,kn=s[0],Mn=i[1])}return Sc=Xl=null,kn===1/0||ks===1/0?[[NaN,NaN],[NaN,NaN]]:[[kn,ks],[Mn,cr]]}var f_,DT,jT,UT,$T,zT,qT,GT,Fk,Ok,Mk,O5,M5,ss,rs,as,Sa={sphere:Si,point:AO,lineStart:UP,lineEnd:$P,polygonStart:function(){Sa.lineStart=aae,Sa.lineEnd=oae},polygonEnd:function(){Sa.lineStart=UP,Sa.lineEnd=$P}};function AO(t,e){t*=kt,e*=kt;var n=qe(e);gm(n*qe(t),n*je(t),je(e))}function gm(t,e,n){++f_,jT+=(t-jT)/f_,UT+=(e-UT)/f_,$T+=(n-$T)/f_}function UP(){Sa.point=sae}function sae(t,e){t*=kt,e*=kt;var n=qe(e);ss=n*qe(t),rs=n*je(t),as=je(e),Sa.point=rae,gm(ss,rs,as)}function rae(t,e){t*=kt,e*=kt;var n=qe(e),i=n*qe(t),s=n*je(t),o=je(e),c=Hr(ys((c=rs*o-as*s)*c+(c=as*i-ss*o)*c+(c=ss*s-rs*i)*c),ss*i+rs*s+as*o);DT+=c,zT+=c*(ss+(ss=i)),qT+=c*(rs+(rs=s)),GT+=c*(as+(as=o)),gm(ss,rs,as)}function $P(){Sa.point=AO}function aae(){Sa.point=lae}function oae(){A5(O5,M5),Sa.point=AO}function lae(t,e){O5=t,M5=e,t*=kt,e*=kt,Sa.point=A5;var n=qe(e);ss=n*qe(t),rs=n*je(t),as=je(e),gm(ss,rs,as)}function A5(t,e){t*=kt,e*=kt;var n=qe(e),i=n*qe(t),s=n*je(t),o=je(e),c=rs*o-as*s,d=as*i-ss*o,f=ss*s-rs*i,u=Ek(c,d,f),a=zs(u),_=u&&-a/u;Fk.add(_*c),Ok.add(_*d),Mk.add(_*f),DT+=a,zT+=a*(ss+(ss=i)),qT+=a*(rs+(rs=s)),GT+=a*(as+(as=o)),gm(ss,rs,as)}function cae(t){f_=DT=jT=UT=$T=zT=qT=GT=0,Fk=new ps,Ok=new ps,Mk=new ps,Ol(t,Sa);var e=+Fk,n=+Ok,i=+Mk,s=Ek(e,n,i);return s<OT&&(e=zT,n=qT,i=GT,DT<ze&&(e=jT,n=UT,i=$T),s=Ek(e,n,i),s<OT)?[NaN,NaN]:[Hr(n,e)*Ln,zs(i/s)*Ln]}function Ak(t,e){function n(i,s){return i=t(i,s),e(i[0],i[1])}return t.invert&&e.invert&&(n.invert=function(i,s){return i=e.invert(i,s),i&&t.invert(i[0],i[1])}),n}function Nk(t,e){return Rt(t)>Ft&&(t-=Math.round(t/_s)*_s),[t,e]}Nk.invert=Nk;function N5(t,e,n){return(t%=_s)?e||n?Ak(qP(t),GP(e,n)):qP(t):e||n?GP(e,n):Nk}function zP(t){return function(e,n){return e+=t,Rt(e)>Ft&&(e-=Math.round(e/_s)*_s),[e,n]}}function qP(t){var e=zP(t);return e.invert=zP(-t),e}function GP(t,e){var n=qe(t),i=je(t),s=qe(e),o=je(e);function c(d,f){var u=qe(f),a=qe(d)*u,_=je(d)*u,w=je(f),m=w*n+a*i;return[Hr(_*s-m*o,a*n-w*i),zs(m*s+_*o)]}return c.invert=function(d,f){var u=qe(f),a=qe(d)*u,_=je(d)*u,w=je(f),m=w*s-_*o;return[Hr(_*s+w*o,a*n+m*i),zs(m*n-a*i)]},c}function dae(t){t=N5(t[0]*kt,t[1]*kt,t.length>2?t[2]*kt:0);function e(n){return n=t(n[0]*kt,n[1]*kt),n[0]*=Ln,n[1]*=Ln,n}return e.invert=function(n){return n=t.invert(n[0]*kt,n[1]*kt),n[0]*=Ln,n[1]*=Ln,n},e}function fae(t,e,n,i,s,o){if(!!n){var c=qe(e),d=je(e),f=i*n;s==null?(s=e+i*_s,o=e-f/2):(s=VP(c,s),o=VP(c,o),(i>0?s<o:s>o)&&(s+=i*_s));for(var u,a=s;i>0?a>o:a<o;a-=f)u=LT([c,-d*qe(a),-d*je(a)]),t.point(u[0],u[1])}}function VP(t,e){e=su(e),e[0]-=t,PT(e);var n=v5(-e[1]);return((-e[2]<0?-n:n)+_s-ze)%_s}function C5(){var t=[],e;return{point:function(n,i,s){e.push([n,i,s])},lineStart:function(){t.push(e=[])},lineEnd:Si,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function S0(t,e){return Rt(t[0]-e[0])<ze&&Rt(t[1]-e[1])<ze}function Ab(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function R5(t,e,n,i,s){var o=[],c=[],d,f;if(t.forEach(function(l){if(!((T=l.length-1)<=0)){var T,b=l[0],S=l[T],x;if(S0(b,S)){if(!b[2]&&!S[2]){for(s.lineStart(),d=0;d<T;++d)s.point((b=l[d])[0],b[1]);s.lineEnd();return}S[0]+=2*ze}o.push(x=new Ab(b,l,null,!0)),c.push(x.o=new Ab(b,null,x,!1)),o.push(x=new Ab(S,l,null,!1)),c.push(x.o=new Ab(S,null,x,!0))}}),!!o.length){for(c.sort(e),WP(o),WP(c),d=0,f=c.length;d<f;++d)c[d].e=n=!n;for(var u=o[0],a,_;;){for(var w=u,m=!0;w.v;)if((w=w.n)===u)return;a=w.z,s.lineStart();do{if(w.v=w.o.v=!0,w.e){if(m)for(d=0,f=a.length;d<f;++d)s.point((_=a[d])[0],_[1]);else i(w.x,w.n.x,1,s);w=w.n}else{if(m)for(a=w.p.z,d=a.length-1;d>=0;--d)s.point((_=a[d])[0],_[1]);else i(w.x,w.p.x,-1,s);w=w.p}w=w.o,a=w.z,m=!m}while(!w.v);s.lineEnd()}}}function WP(t){if(!!(e=t.length)){for(var e,n=0,i=t[0],s;++n<e;)i.n=s=t[n],s.p=i,i=s;i.n=s=t[0],s.p=i}}function Bx(t){return Rt(t[0])<=Ft?t[0]:Cr(t[0])*((Rt(t[0])+Ft)%_s-Ft)}function uae(t,e){var n=Bx(e),i=e[1],s=je(i),o=[je(n),-qe(n),0],c=0,d=0,f=new ps;s===1?i=Cn+ze:s===-1&&(i=-Cn-ze);for(var u=0,a=t.length;u<a;++u)if(!!(w=(_=t[u]).length))for(var _,w,m=_[w-1],l=Bx(m),T=m[1]/2+MT,b=je(T),S=qe(T),x=0;x<w;++x,l=F,b=M,S=A,m=B){var B=_[x],F=Bx(B),k=B[1]/2+MT,M=je(k),A=qe(k),R=F-l,P=R>=0?1:-1,j=P*R,D=j>Ft,z=b*M;if(f.add(Hr(z*P*je(j),S*A+z*qe(j))),c+=D?R+P*_s:R,D^l>=n^F>=n){var $=yp(su(m),su(B));PT($);var Y=yp(o,$);PT(Y);var W=(D^R>=0?-1:1)*zs(Y[2]);(i>W||i===W&&($[0]||$[1]))&&(d+=D^R>=0?1:-1)}}return(c<-ze||c<ze&&f<-OT)^d&1}function L5(t,e,n,i){return function(s){var o=e(s),c=C5(),d=e(c),f=!1,u,a,_,w={point:m,lineStart:T,lineEnd:b,polygonStart:function(){w.point=S,w.lineStart=x,w.lineEnd=B,a=[],u=[]},polygonEnd:function(){w.point=m,w.lineStart=T,w.lineEnd=b,a=Ez(a);var F=uae(u,i);a.length?(f||(s.polygonStart(),f=!0),R5(a,pae,F,n,s)):F&&(f||(s.polygonStart(),f=!0),s.lineStart(),n(null,null,1,s),s.lineEnd()),f&&(s.polygonEnd(),f=!1),a=u=null},sphere:function(){s.polygonStart(),s.lineStart(),n(null,null,1,s),s.lineEnd(),s.polygonEnd()}};function m(F,k){t(F,k)&&s.point(F,k)}function l(F,k){o.point(F,k)}function T(){w.point=l,o.lineStart()}function b(){w.point=m,o.lineEnd()}function S(F,k){_.push([F,k]),d.point(F,k)}function x(){d.lineStart(),_=[]}function B(){S(_[0][0],_[0][1]),d.lineEnd();var F=d.clean(),k=c.result(),M,A=k.length,R,P,j;if(_.pop(),u.push(_),_=null,!!A){if(F&1){if(P=k[0],(R=P.length-1)>0){for(f||(s.polygonStart(),f=!0),s.lineStart(),M=0;M<R;++M)s.point((j=P[M])[0],j[1]);s.lineEnd()}return}A>1&&F&2&&k.push(k.pop().concat(k.shift())),a.push(k.filter(hae))}}return w}}function hae(t){return t.length>1}function pae(t,e){return((t=t.x)[0]<0?t[1]-Cn-ze:Cn-t[1])-((e=e.x)[0]<0?e[1]-Cn-ze:Cn-e[1])}const HP=L5(function(){return!0},gae,yae,[-Ft,-Cn]);function gae(t){var e=NaN,n=NaN,i=NaN,s;return{lineStart:function(){t.lineStart(),s=1},point:function(o,c){var d=o>0?Ft:-Ft,f=Rt(o-e);Rt(f-Ft)<ze?(t.point(e,n=(n+c)/2>0?Cn:-Cn),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(d,n),t.point(o,n),s=0):i!==d&&f>=Ft&&(Rt(e-i)<ze&&(e-=i*ze),Rt(o-d)<ze&&(o-=d*ze),n=_ae(e,n,o,c),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(d,n),s=0),t.point(e=o,n=c),i=d},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-s}}}function _ae(t,e,n,i){var s,o,c=je(t-n);return Rt(c)>ze?og((je(e)*(o=qe(i))*je(n)-je(i)*(s=qe(e))*je(t))/(s*o*c)):(e+i)/2}function yae(t,e,n,i){var s;if(t==null)s=n*Cn,i.point(-Ft,s),i.point(0,s),i.point(Ft,s),i.point(Ft,0),i.point(Ft,-s),i.point(0,-s),i.point(-Ft,-s),i.point(-Ft,0),i.point(-Ft,s);else if(Rt(t[0]-e[0])>ze){var o=t[0]<e[0]?Ft:-Ft;s=n*o/2,i.point(-o,s),i.point(0,s),i.point(o,s)}else i.point(e[0],e[1])}function mae(t){var e=qe(t),n=6*kt,i=e>0,s=Rt(e)>ze;function o(a,_,w,m){fae(m,t,n,w,a,_)}function c(a,_){return qe(a)*qe(_)>e}function d(a){var _,w,m,l,T;return{lineStart:function(){l=m=!1,T=1},point:function(b,S){var x=[b,S],B,F=c(b,S),k=i?F?0:u(b,S):F?u(b+(b<0?Ft:-Ft),S):0;if(!_&&(l=m=F)&&a.lineStart(),F!==m&&(B=f(_,x),(!B||S0(_,B)||S0(x,B))&&(x[2]=1)),F!==m)T=0,F?(a.lineStart(),B=f(x,_),a.point(B[0],B[1])):(B=f(_,x),a.point(B[0],B[1],2),a.lineEnd()),_=B;else if(s&&_&&i^F){var M;!(k&w)&&(M=f(x,_,!0))&&(T=0,i?(a.lineStart(),a.point(M[0][0],M[0][1]),a.point(M[1][0],M[1][1]),a.lineEnd()):(a.point(M[1][0],M[1][1]),a.lineEnd(),a.lineStart(),a.point(M[0][0],M[0][1],3)))}F&&(!_||!S0(_,x))&&a.point(x[0],x[1]),_=x,m=F,w=k},lineEnd:function(){m&&a.lineEnd(),_=null},clean:function(){return T|(l&&m)<<1}}}function f(a,_,w){var m=su(a),l=su(_),T=[1,0,0],b=yp(m,l),S=Ob(b,b),x=b[0],B=S-x*x;if(!B)return!w&&a;var F=e*S/B,k=-e*x/B,M=yp(T,b),A=Mb(T,F),R=Mb(b,k);xx(A,R);var P=M,j=Ob(A,P),D=Ob(P,P),z=j*j-D*(Ob(A,A)-1);if(!(z<0)){var $=ys(z),Y=Mb(P,(-j-$)/D);if(xx(Y,A),Y=LT(Y),!w)return Y;var W=a[0],H=_[0],J=a[1],V=_[1],le;H<W&&(le=W,W=H,H=le);var pe=H-W,se=Rt(pe-Ft)<ze,Ne=se||pe<ze;if(!se&&V<J&&(le=J,J=V,V=le),Ne?se?J+V>0^Y[1]<(Rt(Y[0]-W)<ze?J:V):J<=Y[1]&&Y[1]<=V:pe>Ft^(W<=Y[0]&&Y[0]<=H)){var fe=Mb(P,(-j+$)/D);return xx(fe,A),[Y,LT(fe)]}}}function u(a,_){var w=i?t:Ft-t,m=0;return a<-w?m|=1:a>w&&(m|=2),_<-w?m|=4:_>w&&(m|=8),m}return L5(c,d,o,i?[0,-t]:[-Ft,t-Ft])}function wae(t,e,n,i,s,o){var c=t[0],d=t[1],f=e[0],u=e[1],a=0,_=1,w=f-c,m=u-d,l;if(l=n-c,!(!w&&l>0)){if(l/=w,w<0){if(l<a)return;l<_&&(_=l)}else if(w>0){if(l>_)return;l>a&&(a=l)}if(l=s-c,!(!w&&l<0)){if(l/=w,w<0){if(l>_)return;l>a&&(a=l)}else if(w>0){if(l<a)return;l<_&&(_=l)}if(l=i-d,!(!m&&l>0)){if(l/=m,m<0){if(l<a)return;l<_&&(_=l)}else if(m>0){if(l>_)return;l>a&&(a=l)}if(l=o-d,!(!m&&l<0)){if(l/=m,m<0){if(l>_)return;l>a&&(a=l)}else if(m>0){if(l<a)return;l<_&&(_=l)}return a>0&&(t[0]=c+a*w,t[1]=d+a*m),_<1&&(e[0]=c+_*w,e[1]=d+_*m),!0}}}}}var u_=1e9,Nb=-u_;function P5(t,e,n,i){function s(u,a){return t<=u&&u<=n&&e<=a&&a<=i}function o(u,a,_,w){var m=0,l=0;if(u==null||(m=c(u,_))!==(l=c(a,_))||f(u,a)<0^_>0)do w.point(m===0||m===3?t:n,m>1?i:e);while((m=(m+_+4)%4)!==l);else w.point(a[0],a[1])}function c(u,a){return Rt(u[0]-t)<ze?a>0?0:3:Rt(u[0]-n)<ze?a>0?2:1:Rt(u[1]-e)<ze?a>0?1:0:a>0?3:2}function d(u,a){return f(u.x,a.x)}function f(u,a){var _=c(u,1),w=c(a,1);return _!==w?_-w:_===0?a[1]-u[1]:_===1?u[0]-a[0]:_===2?u[1]-a[1]:a[0]-u[0]}return function(u){var a=u,_=C5(),w,m,l,T,b,S,x,B,F,k,M,A={point:R,lineStart:z,lineEnd:$,polygonStart:j,polygonEnd:D};function R(W,H){s(W,H)&&a.point(W,H)}function P(){for(var W=0,H=0,J=m.length;H<J;++H)for(var V=m[H],le=1,pe=V.length,se=V[0],Ne,fe,Ce=se[0],Me=se[1];le<pe;++le)Ne=Ce,fe=Me,se=V[le],Ce=se[0],Me=se[1],fe<=i?Me>i&&(Ce-Ne)*(i-fe)>(Me-fe)*(t-Ne)&&++W:Me<=i&&(Ce-Ne)*(i-fe)<(Me-fe)*(t-Ne)&&--W;return W}function j(){a=_,w=[],m=[],M=!0}function D(){var W=P(),H=M&&W,J=(w=Ez(w)).length;(H||J)&&(u.polygonStart(),H&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),J&&R5(w,d,W,o,u),u.polygonEnd()),a=u,w=m=l=null}function z(){A.point=Y,m&&m.push(l=[]),k=!0,F=!1,x=B=NaN}function $(){w&&(Y(T,b),S&&F&&_.rejoin(),w.push(_.result())),A.point=R,F&&a.lineEnd()}function Y(W,H){var J=s(W,H);if(m&&l.push([W,H]),k)T=W,b=H,S=J,k=!1,J&&(a.lineStart(),a.point(W,H));else if(J&&F)a.point(W,H);else{var V=[x=Math.max(Nb,Math.min(u_,x)),B=Math.max(Nb,Math.min(u_,B))],le=[W=Math.max(Nb,Math.min(u_,W)),H=Math.max(Nb,Math.min(u_,H))];wae(V,le,t,e,n,i)?(F||(a.lineStart(),a.point(V[0],V[1])),a.point(le[0],le[1]),J||a.lineEnd(),M=!1):J&&(a.lineStart(),a.point(W,H),M=!1)}x=W,B=H,F=J}return A}}function YP(t,e,n){var i=hr(t,e-ze,n).concat(e);return function(s){return i.map(function(o){return[s,o]})}}function XP(t,e,n){var i=hr(t,e-ze,n).concat(e);return function(s){return i.map(function(o){return[o,s]})}}function bae(){var t,e,n,i,s,o,c,d,f=10,u=f,a=90,_=360,w,m,l,T,b=2.5;function S(){return{type:"MultiLineString",coordinates:x()}}function x(){return hr(Fb(i/a)*a,n,a).map(l).concat(hr(Fb(d/_)*_,c,_).map(T)).concat(hr(Fb(e/f)*f,t,f).filter(function(B){return Rt(B%a)>ze}).map(w)).concat(hr(Fb(o/u)*u,s,u).filter(function(B){return Rt(B%_)>ze}).map(m))}return S.lines=function(){return x().map(function(B){return{type:"LineString",coordinates:B}})},S.outline=function(){return{type:"Polygon",coordinates:[l(i).concat(T(c).slice(1),l(n).reverse().slice(1),T(d).reverse().slice(1))]}},S.extent=function(B){return arguments.length?S.extentMajor(B).extentMinor(B):S.extentMinor()},S.extentMajor=function(B){return arguments.length?(i=+B[0][0],n=+B[1][0],d=+B[0][1],c=+B[1][1],i>n&&(B=i,i=n,n=B),d>c&&(B=d,d=c,c=B),S.precision(b)):[[i,d],[n,c]]},S.extentMinor=function(B){return arguments.length?(e=+B[0][0],t=+B[1][0],o=+B[0][1],s=+B[1][1],e>t&&(B=e,e=t,t=B),o>s&&(B=o,o=s,s=B),S.precision(b)):[[e,o],[t,s]]},S.step=function(B){return arguments.length?S.stepMajor(B).stepMinor(B):S.stepMinor()},S.stepMajor=function(B){return arguments.length?(a=+B[0],_=+B[1],S):[a,_]},S.stepMinor=function(B){return arguments.length?(f=+B[0],u=+B[1],S):[f,u]},S.precision=function(B){return arguments.length?(b=+B,w=YP(o,s,90),m=XP(e,t,b),l=YP(d,c,90),T=XP(i,n,b),S):b},S.extentMajor([[-180,-90+ze],[180,90-ze]]).extentMinor([[-180,-80-ze],[180,80+ze]])}const uy=t=>t;var kx=new ps,Ck=new ps,D5,j5,Rk,Lk,Nc={point:Si,lineStart:Si,lineEnd:Si,polygonStart:function(){Nc.lineStart=Tae,Nc.lineEnd=Eae},polygonEnd:function(){Nc.lineStart=Nc.lineEnd=Nc.point=Si,kx.add(Rt(Ck)),Ck=new ps},result:function(){var t=kx/2;return kx=new ps,t}};function Tae(){Nc.point=vae}function vae(t,e){Nc.point=U5,D5=Rk=t,j5=Lk=e}function U5(t,e){Ck.add(Lk*t-Rk*e),Rk=t,Lk=e}function Eae(){U5(D5,j5)}const KP=Nc;var mp=1/0,VT=mp,hy=-mp,WT=hy,Sae={point:xae,lineStart:Si,lineEnd:Si,polygonStart:Si,polygonEnd:Si,result:function(){var t=[[mp,VT],[hy,WT]];return hy=WT=-(VT=mp=1/0),t}};function xae(t,e){t<mp&&(mp=t),t>hy&&(hy=t),e<VT&&(VT=e),e>WT&&(WT=e)}const HT=Sae;var Pk=0,Dk=0,h_=0,YT=0,XT=0,xh=0,jk=0,Uk=0,p_=0,$5,z5,co,fo,wa={point:ru,lineStart:JP,lineEnd:QP,polygonStart:function(){wa.lineStart=Iae,wa.lineEnd=Fae},polygonEnd:function(){wa.point=ru,wa.lineStart=JP,wa.lineEnd=QP},result:function(){var t=p_?[jk/p_,Uk/p_]:xh?[YT/xh,XT/xh]:h_?[Pk/h_,Dk/h_]:[NaN,NaN];return Pk=Dk=h_=YT=XT=xh=jk=Uk=p_=0,t}};function ru(t,e){Pk+=t,Dk+=e,++h_}function JP(){wa.point=Bae}function Bae(t,e){wa.point=kae,ru(co=t,fo=e)}function kae(t,e){var n=t-co,i=e-fo,s=ys(n*n+i*i);YT+=s*(co+t)/2,XT+=s*(fo+e)/2,xh+=s,ru(co=t,fo=e)}function QP(){wa.point=ru}function Iae(){wa.point=Oae}function Fae(){q5($5,z5)}function Oae(t,e){wa.point=q5,ru($5=co=t,z5=fo=e)}function q5(t,e){var n=t-co,i=e-fo,s=ys(n*n+i*i);YT+=s*(co+t)/2,XT+=s*(fo+e)/2,xh+=s,s=fo*t-co*e,jk+=s*(co+t),Uk+=s*(fo+e),p_+=s*3,ru(co=t,fo=e)}const ZP=wa;function G5(t){this._context=t}G5.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,_s);break}}},result:Si};var $k=new ps,Ix,V5,W5,g_,__,KT={point:Si,lineStart:function(){KT.point=Mae},lineEnd:function(){Ix&&H5(V5,W5),KT.point=Si},polygonStart:function(){Ix=!0},polygonEnd:function(){Ix=null},result:function(){var t=+$k;return $k=new ps,t}};function Mae(t,e){KT.point=H5,V5=g_=t,W5=__=e}function H5(t,e){g_-=t,__-=e,$k.add(ys(g_*g_+__*__)),g_=t,__=e}const eD=KT;let tD,JT,nD,iD;class sD{constructor(e){this._append=e==null?Y5:Aae(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:{this._append`M${e},${n}`,this._point=1;break}case 1:{this._append`L${e},${n}`;break}default:{if(this._append`M${e},${n}`,this._radius!==nD||this._append!==JT){const i=this._radius,s=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,nD=i,JT=this._append,iD=this._,this._=s}this._+=iD;break}}}result(){const e=this._;return this._="",e.length?e:null}}function Y5(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Aae(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return Y5;if(e!==tD){const n=10**e;tD=e,JT=function(s){let o=1;this._+=s[0];for(const c=s.length;o<c;++o)this._+=Math.round(arguments[o]*n)/n+s[o]}}return JT}function X5(t,e){let n=3,i=4.5,s,o;function c(d){return d&&(typeof i=="function"&&o.pointRadius(+i.apply(this,arguments)),Ol(d,s(o))),o.result()}return c.area=function(d){return Ol(d,s(KP)),KP.result()},c.measure=function(d){return Ol(d,s(eD)),eD.result()},c.bounds=function(d){return Ol(d,s(HT)),HT.result()},c.centroid=function(d){return Ol(d,s(ZP)),ZP.result()},c.projection=function(d){return arguments.length?(s=d==null?(t=null,uy):(t=d).stream,c):t},c.context=function(d){return arguments.length?(o=d==null?(e=null,new sD(n)):new G5(e=d),typeof i!="function"&&o.pointRadius(i),c):e},c.pointRadius=function(d){return arguments.length?(i=typeof d=="function"?d:(o.pointRadius(+d),+d),c):i},c.digits=function(d){if(!arguments.length)return n;if(d==null)n=null;else{const f=Math.floor(d);if(!(f>=0))throw new RangeError(`invalid digits: ${d}`);n=f}return e===null&&(o=new sD(n)),c},c.projection(t).digits(n).context(e)}function sE(t){return function(e){var n=new zk;for(var i in t)n[i]=t[i];return n.stream=e,n}}function zk(){}zk.prototype={constructor:zk,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function NO(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),i!=null&&t.clipExtent(null),Ol(n,t.stream(HT)),e(HT.result()),i!=null&&t.clipExtent(i),t}function rE(t,e,n){return NO(t,function(i){var s=e[1][0]-e[0][0],o=e[1][1]-e[0][1],c=Math.min(s/(i[1][0]-i[0][0]),o/(i[1][1]-i[0][1])),d=+e[0][0]+(s-c*(i[1][0]+i[0][0]))/2,f=+e[0][1]+(o-c*(i[1][1]+i[0][1]))/2;t.scale(150*c).translate([d,f])},n)}function CO(t,e,n){return rE(t,[[0,0],e],n)}function RO(t,e,n){return NO(t,function(i){var s=+e,o=s/(i[1][0]-i[0][0]),c=(s-o*(i[1][0]+i[0][0]))/2,d=-o*i[0][1];t.scale(150*o).translate([c,d])},n)}function LO(t,e,n){return NO(t,function(i){var s=+e,o=s/(i[1][1]-i[0][1]),c=-o*i[0][0],d=(s-o*(i[1][1]+i[0][1]))/2;t.scale(150*o).translate([c,d])},n)}var rD=16,Nae=qe(30*kt);function aD(t,e){return+e?Rae(t,e):Cae(t)}function Cae(t){return sE({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function Rae(t,e){function n(i,s,o,c,d,f,u,a,_,w,m,l,T,b){var S=u-i,x=a-s,B=S*S+x*x;if(B>4*e&&T--){var F=c+w,k=d+m,M=f+l,A=ys(F*F+k*k+M*M),R=zs(M/=A),P=Rt(Rt(M)-1)<ze||Rt(o-_)<ze?(o+_)/2:Hr(k,F),j=t(P,R),D=j[0],z=j[1],$=D-i,Y=z-s,W=x*$-S*Y;(W*W/B>e||Rt((S*$+x*Y)/B-.5)>.3||c*w+d*m+f*l<Nae)&&(n(i,s,o,c,d,f,D,z,P,F/=A,k/=A,M,T,b),b.point(D,z),n(D,z,P,F,k,M,u,a,_,w,m,l,T,b))}}return function(i){var s,o,c,d,f,u,a,_,w,m,l,T,b={point:S,lineStart:x,lineEnd:F,polygonStart:function(){i.polygonStart(),b.lineStart=k},polygonEnd:function(){i.polygonEnd(),b.lineStart=x}};function S(R,P){R=t(R,P),i.point(R[0],R[1])}function x(){_=NaN,b.point=B,i.lineStart()}function B(R,P){var j=su([R,P]),D=t(R,P);n(_,w,a,m,l,T,_=D[0],w=D[1],a=R,m=j[0],l=j[1],T=j[2],rD,i),i.point(_,w)}function F(){b.point=S,i.lineEnd()}function k(){x(),b.point=M,b.lineEnd=A}function M(R,P){B(s=R,P),o=_,c=w,d=m,f=l,u=T,b.point=B}function A(){n(_,w,a,m,l,T,o,c,s,d,f,u,rD,i),b.lineEnd=F,F()}return b}}var Lae=sE({point:function(t,e){this.stream.point(t*kt,e*kt)}});function Pae(t){return sE({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}})}function Dae(t,e,n,i,s){function o(c,d){return c*=i,d*=s,[e+t*c,n-t*d]}return o.invert=function(c,d){return[(c-e)/t*i,(n-d)/t*s]},o}function oD(t,e,n,i,s,o){if(!o)return Dae(t,e,n,i,s);var c=qe(o),d=je(o),f=c*t,u=d*t,a=c/t,_=d/t,w=(d*n-c*e)/t,m=(d*e+c*n)/t;function l(T,b){return T*=i,b*=s,[f*T-u*b+e,n-u*T-f*b]}return l.invert=function(T,b){return[i*(a*T-_*b+w),s*(m-_*T-a*b)]},l}function tl(t){return K5(function(){return t})()}function K5(t){var e,n=150,i=480,s=250,o=0,c=0,d=0,f=0,u=0,a,_=0,w=1,m=1,l=null,T=HP,b=null,S,x,B,F=uy,k=.5,M,A,R,P,j;function D(W){return R(W[0]*kt,W[1]*kt)}function z(W){return W=R.invert(W[0],W[1]),W&&[W[0]*Ln,W[1]*Ln]}D.stream=function(W){return P&&j===W?P:P=Lae(Pae(a)(T(M(F(j=W)))))},D.preclip=function(W){return arguments.length?(T=W,l=void 0,Y()):T},D.postclip=function(W){return arguments.length?(F=W,b=S=x=B=null,Y()):F},D.clipAngle=function(W){return arguments.length?(T=+W?mae(l=W*kt):(l=null,HP),Y()):l*Ln},D.clipExtent=function(W){return arguments.length?(F=W==null?(b=S=x=B=null,uy):P5(b=+W[0][0],S=+W[0][1],x=+W[1][0],B=+W[1][1]),Y()):b==null?null:[[b,S],[x,B]]},D.scale=function(W){return arguments.length?(n=+W,$()):n},D.translate=function(W){return arguments.length?(i=+W[0],s=+W[1],$()):[i,s]},D.center=function(W){return arguments.length?(o=W[0]%360*kt,c=W[1]%360*kt,$()):[o*Ln,c*Ln]},D.rotate=function(W){return arguments.length?(d=W[0]%360*kt,f=W[1]%360*kt,u=W.length>2?W[2]%360*kt:0,$()):[d*Ln,f*Ln,u*Ln]},D.angle=function(W){return arguments.length?(_=W%360*kt,$()):_*Ln},D.reflectX=function(W){return arguments.length?(w=W?-1:1,$()):w<0},D.reflectY=function(W){return arguments.length?(m=W?-1:1,$()):m<0},D.precision=function(W){return arguments.length?(M=aD(A,k=W*W),Y()):ys(k)},D.fitExtent=function(W,H){return rE(D,W,H)},D.fitSize=function(W,H){return CO(D,W,H)},D.fitWidth=function(W,H){return RO(D,W,H)},D.fitHeight=function(W,H){return LO(D,W,H)};function $(){var W=oD(n,0,0,w,m,_).apply(null,e(o,c)),H=oD(n,i-W[0],s-W[1],w,m,_);return a=N5(d,f,u),A=Ak(e,H),R=Ak(a,A),M=aD(A,k),Y()}function Y(){return P=j=null,D}return function(){return e=t.apply(this,arguments),D.invert=e.invert&&z,$()}}function PO(t){var e=0,n=Ft/3,i=K5(t),s=i(e,n);return s.parallels=function(o){return arguments.length?i(e=o[0]*kt,n=o[1]*kt):[e*Ln,n*Ln]},s}function jae(t){var e=qe(t);function n(i,s){return[i*e,je(s)/e]}return n.invert=function(i,s){return[i/e,zs(s*e)]},n}function Uae(t,e){var n=je(t),i=(n+je(e))/2;if(Rt(i)<ze)return jae(t);var s=1+n*(2*i-n),o=ys(s)/i;function c(d,f){var u=ys(s-2*i*je(f))/i;return[u*je(d*=i),o-u*qe(d)]}return c.invert=function(d,f){var u=o-f,a=Hr(d,Rt(u))*Cr(u);return u*i<0&&(a-=Ft*Cr(d)*Cr(u)),[a/i,zs((s-(d*d+u*u)*i*i)/(2*i))]},c}function QT(){return PO(Uae).scale(155.424).center([0,33.6442])}function J5(){return QT().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function $ae(t){var e=t.length;return{point:function(n,i){for(var s=-1;++s<e;)t[s].point(n,i)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function zae(){var t,e,n=J5(),i,s=QT().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,c=QT().rotate([157,0]).center([-3,19.9]).parallels([8,18]),d,f,u={point:function(w,m){f=[w,m]}};function a(w){var m=w[0],l=w[1];return f=null,i.point(m,l),f||(o.point(m,l),f)||(d.point(m,l),f)}a.invert=function(w){var m=n.scale(),l=n.translate(),T=(w[0]-l[0])/m,b=(w[1]-l[1])/m;return(b>=.12&&b<.234&&T>=-.425&&T<-.214?s:b>=.166&&b<.234&&T>=-.214&&T<-.115?c:n).invert(w)},a.stream=function(w){return t&&e===w?t:t=$ae([n.stream(e=w),s.stream(w),c.stream(w)])},a.precision=function(w){return arguments.length?(n.precision(w),s.precision(w),c.precision(w),_()):n.precision()},a.scale=function(w){return arguments.length?(n.scale(w),s.scale(w*.35),c.scale(w),a.translate(n.translate())):n.scale()},a.translate=function(w){if(!arguments.length)return n.translate();var m=n.scale(),l=+w[0],T=+w[1];return i=n.translate(w).clipExtent([[l-.455*m,T-.238*m],[l+.455*m,T+.238*m]]).stream(u),o=s.translate([l-.307*m,T+.201*m]).clipExtent([[l-.425*m+ze,T+.12*m+ze],[l-.214*m-ze,T+.234*m-ze]]).stream(u),d=c.translate([l-.205*m,T+.212*m]).clipExtent([[l-.214*m+ze,T+.166*m+ze],[l-.115*m-ze,T+.234*m-ze]]).stream(u),_()},a.fitExtent=function(w,m){return rE(a,w,m)},a.fitSize=function(w,m){return CO(a,w,m)},a.fitWidth=function(w,m){return RO(a,w,m)},a.fitHeight=function(w,m){return LO(a,w,m)};function _(){return t=e=null,a}return a.scale(1070)}function Q5(t){return function(e,n){var i=qe(e),s=qe(n),o=t(i*s);return o===1/0?[2,0]:[o*s*je(e),o*je(n)]}}function _m(t){return function(e,n){var i=ys(e*e+n*n),s=t(i),o=je(s),c=qe(s);return[Hr(e*o,i*c),zs(i&&n*o/i)]}}var Z5=Q5(function(t){return ys(2/(1+t))});Z5.invert=_m(function(t){return 2*zs(t/2)});function qae(){return tl(Z5).scale(124.75).clipAngle(180-.001)}var eq=Q5(function(t){return(t=v5(t))&&t/je(t)});eq.invert=_m(function(t){return t});function Gae(){return tl(eq).scale(79.4188).clipAngle(180-.001)}function aE(t,e){return[t,AT(MO((Cn+e)/2))]}aE.invert=function(t,e){return[t,2*og(T5(e))-Cn]};function Vae(){return tq(aE).scale(961/_s)}function tq(t){var e=tl(t),n=e.center,i=e.scale,s=e.translate,o=e.clipExtent,c=null,d,f,u;e.scale=function(_){return arguments.length?(i(_),a()):i()},e.translate=function(_){return arguments.length?(s(_),a()):s()},e.center=function(_){return arguments.length?(n(_),a()):n()},e.clipExtent=function(_){return arguments.length?(_==null?c=d=f=u=null:(c=+_[0][0],d=+_[0][1],f=+_[1][0],u=+_[1][1]),a()):c==null?null:[[c,d],[f,u]]};function a(){var _=Ft*i(),w=e(dae(e.rotate()).invert([0,0]));return o(c==null?[[w[0]-_,w[1]-_],[w[0]+_,w[1]+_]]:t===aE?[[Math.max(w[0]-_,c),d],[Math.min(w[0]+_,f),u]]:[[c,Math.max(w[1]-_,d)],[f,Math.min(w[1]+_,u)]])}return a()}function Cb(t){return MO((Cn+t)/2)}function Wae(t,e){var n=qe(t),i=t===e?je(t):AT(n/qe(e))/AT(Cb(e)/Cb(t)),s=n*Sx(Cb(t),i)/i;if(!i)return aE;function o(c,d){s>0?d<-Cn+ze&&(d=-Cn+ze):d>Cn-ze&&(d=Cn-ze);var f=s/Sx(Cb(d),i);return[f*je(i*c),s-f*qe(i*c)]}return o.invert=function(c,d){var f=s-d,u=Cr(i)*ys(c*c+f*f),a=Hr(c,Rt(f))*Cr(f);return f*i<0&&(a-=Ft*Cr(c)*Cr(f)),[a/i,2*og(Sx(s/u,1/i))-Cn]},o}function Hae(){return PO(Wae).scale(109.5).parallels([30,30])}function ZT(t,e){return[t,e]}ZT.invert=ZT;function Yae(){return tl(ZT).scale(152.63)}function Xae(t,e){var n=qe(t),i=t===e?je(t):(n-qe(e))/(e-t),s=n/i+t;if(Rt(i)<ze)return ZT;function o(c,d){var f=s-d,u=i*c;return[f*je(u),s-f*qe(u)]}return o.invert=function(c,d){var f=s-d,u=Hr(c,Rt(f))*Cr(f);return f*i<0&&(u-=Ft*Cr(c)*Cr(f)),[u/i,s-Cr(i)*ys(c*c+f*f)]},o}function Kae(){return PO(Xae).scale(131.154).center([0,13.9389])}var R_=1.340264,L_=-.081106,P_=893e-6,D_=.003796,ev=ys(3)/2,Jae=12;function nq(t,e){var n=zs(ev*je(e)),i=n*n,s=i*i*i;return[t*qe(n)/(ev*(R_+3*L_*i+s*(7*P_+9*D_*i))),n*(R_+L_*i+s*(P_+D_*i))]}nq.invert=function(t,e){for(var n=e,i=n*n,s=i*i*i,o=0,c,d,f;o<Jae&&(d=n*(R_+L_*i+s*(P_+D_*i))-e,f=R_+3*L_*i+s*(7*P_+9*D_*i),n-=c=d/f,i=n*n,s=i*i*i,!(Rt(c)<OT));++o);return[ev*t*(R_+3*L_*i+s*(7*P_+9*D_*i))/qe(n),zs(je(n)/ev)]};function Qae(){return tl(nq).scale(177.158)}function iq(t,e){var n=qe(e),i=qe(t)*n;return[n*je(t)/i,je(e)/i]}iq.invert=_m(og);function Zae(){return tl(iq).scale(144.049).clipAngle(60)}function eoe(){var t=1,e=0,n=0,i=1,s=1,o=0,c,d,f=null,u,a,_,w=1,m=1,l=sE({point:function(F,k){var M=B([F,k]);this.stream.point(M[0],M[1])}}),T=uy,b,S;function x(){return w=t*i,m=t*s,b=S=null,B}function B(F){var k=F[0]*w,M=F[1]*m;if(o){var A=M*c-k*d;k=k*c+M*d,M=A}return[k+e,M+n]}return B.invert=function(F){var k=F[0]-e,M=F[1]-n;if(o){var A=M*c+k*d;k=k*c-M*d,M=A}return[k/w,M/m]},B.stream=function(F){return b&&S===F?b:b=l(T(S=F))},B.postclip=function(F){return arguments.length?(T=F,f=u=a=_=null,x()):T},B.clipExtent=function(F){return arguments.length?(T=F==null?(f=u=a=_=null,uy):P5(f=+F[0][0],u=+F[0][1],a=+F[1][0],_=+F[1][1]),x()):f==null?null:[[f,u],[a,_]]},B.scale=function(F){return arguments.length?(t=+F,x()):t},B.translate=function(F){return arguments.length?(e=+F[0],n=+F[1],x()):[e,n]},B.angle=function(F){return arguments.length?(o=F%360*kt,d=je(o),c=qe(o),x()):o*Ln},B.reflectX=function(F){return arguments.length?(i=F?-1:1,x()):i<0},B.reflectY=function(F){return arguments.length?(s=F?-1:1,x()):s<0},B.fitExtent=function(F,k){return rE(B,F,k)},B.fitSize=function(F,k){return CO(B,F,k)},B.fitWidth=function(F,k){return RO(B,F,k)},B.fitHeight=function(F,k){return LO(B,F,k)},B}function sq(t,e){var n=e*e,i=n*n;return[t*(.8707-.131979*n+i*(-.013791+i*(.003971*n-.001529*i))),e*(1.007226+n*(.015085+i*(-.044475+.028874*n-.005916*i)))]}sq.invert=function(t,e){var n=e,i=25,s;do{var o=n*n,c=o*o;n-=s=(n*(1.007226+o*(.015085+c*(-.044475+.028874*o-.005916*c)))-e)/(1.007226+o*(.015085*3+c*(-.044475*7+.028874*9*o-.005916*11*c)))}while(Rt(s)>ze&&--i>0);return[t/(.8707+(o=n*n)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),n]};function toe(){return tl(sq).scale(175.295)}function rq(t,e){return[qe(e)*je(t),je(e)]}rq.invert=_m(zs);function noe(){return tl(rq).scale(249.5).clipAngle(90+ze)}function aq(t,e){var n=qe(e),i=1+qe(t)*n;return[n*je(t)/i,je(e)/i]}aq.invert=_m(function(t){return 2*og(t)});function ioe(){return tl(aq).scale(250).clipAngle(142)}function oq(t,e){return[AT(MO((Cn+e)/2)),-t]}oq.invert=function(t,e){return[-e,2*og(T5(t))-Cn]};function soe(){var t=tq(oq),e=t.center,n=t.rotate;return t.center=function(i){return arguments.length?e([-i[1],i[0]]):(i=e(),[i[1],-i[0]])},t.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}function roe(t,e){return t.parent===e.parent?1:2}function aoe(t){return t.reduce(ooe,0)/t.length}function ooe(t,e){return t+e.x}function loe(t){return 1+t.reduce(coe,0)}function coe(t,e){return Math.max(t,e.y)}function doe(t){for(var e;e=t.children;)t=e[0];return t}function foe(t){for(var e;e=t.children;)t=e[e.length-1];return t}function uoe(){var t=roe,e=1,n=1,i=!1;function s(o){var c,d=0;o.eachAfter(function(w){var m=w.children;m?(w.x=aoe(m),w.y=loe(m)):(w.x=c?d+=t(w,c):0,w.y=0,c=w)});var f=doe(o),u=foe(o),a=f.x-t(f,u)/2,_=u.x+t(u,f)/2;return o.eachAfter(i?function(w){w.x=(w.x-o.x)*e,w.y=(o.y-w.y)*n}:function(w){w.x=(w.x-a)/(_-a)*e,w.y=(1-(o.y?w.y/o.y:1))*n})}return s.separation=function(o){return arguments.length?(t=o,s):t},s.size=function(o){return arguments.length?(i=!1,e=+o[0],n=+o[1],s):i?null:[e,n]},s.nodeSize=function(o){return arguments.length?(i=!0,e=+o[0],n=+o[1],s):i?[e,n]:null},s}function hoe(t){var e=0,n=t.children,i=n&&n.length;if(!i)e=1;else for(;--i>=0;)e+=n[i].value;t.value=e}function poe(){return this.eachAfter(hoe)}function goe(t,e){let n=-1;for(const i of this)t.call(e,i,++n,this);return this}function _oe(t,e){for(var n=this,i=[n],s,o,c=-1;n=i.pop();)if(t.call(e,n,++c,this),s=n.children)for(o=s.length-1;o>=0;--o)i.push(s[o]);return this}function yoe(t,e){for(var n=this,i=[n],s=[],o,c,d,f=-1;n=i.pop();)if(s.push(n),o=n.children)for(c=0,d=o.length;c<d;++c)i.push(o[c]);for(;n=s.pop();)t.call(e,n,++f,this);return this}function moe(t,e){let n=-1;for(const i of this)if(t.call(e,i,++n,this))return i}function woe(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,i=e.children,s=i&&i.length;--s>=0;)n+=i[s].value;e.value=n})}function boe(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function Toe(t){for(var e=this,n=voe(e,t),i=[e];e!==n;)e=e.parent,i.push(e);for(var s=i.length;t!==n;)i.splice(s,0,t),t=t.parent;return i}function voe(t,e){if(t===e)return t;var n=t.ancestors(),i=e.ancestors(),s=null;for(t=n.pop(),e=i.pop();t===e;)s=t,t=n.pop(),e=i.pop();return s}function Eoe(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function Soe(){return Array.from(this)}function xoe(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function Boe(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*koe(){var t=this,e,n=[t],i,s,o;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,i=t.children)for(s=0,o=i.length;s<o;++s)n.push(i[s]);while(n.length)}function DO(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=Ooe)):e===void 0&&(e=Foe);for(var n=new wp(t),i,s=[n],o,c,d,f;i=s.pop();)if((c=e(i.data))&&(f=(c=Array.from(c)).length))for(i.children=c,d=f-1;d>=0;--d)s.push(o=c[d]=new wp(c[d])),o.parent=i,o.depth=i.depth+1;return n.eachBefore(lq)}function Ioe(){return DO(this).eachBefore(Moe)}function Foe(t){return t.children}function Ooe(t){return Array.isArray(t)?t[1]:null}function Moe(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function lq(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function wp(t){this.data=t,this.depth=this.height=0,this.parent=null}wp.prototype=DO.prototype={constructor:wp,count:poe,each:goe,eachAfter:yoe,eachBefore:_oe,find:moe,sum:woe,sort:boe,path:Toe,ancestors:Eoe,descendants:Soe,leaves:xoe,links:Boe,copy:Ioe,[Symbol.iterator]:koe};function x0(t){return t==null?null:cq(t)}function cq(t){if(typeof t!="function")throw new Error;return t}function gf(){return 0}function bh(t){return function(){return t}}const Aoe=1664525,Noe=1013904223,lD=4294967296;function Coe(){let t=1;return()=>(t=(Aoe*t+Noe)%lD)/lD}function Roe(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Loe(t,e){let n=t.length,i,s;for(;n;)s=e()*n--|0,i=t[n],t[n]=t[s],t[s]=i;return t}function Poe(t,e){for(var n=0,i=(t=Loe(Array.from(t),e)).length,s=[],o,c;n<i;)o=t[n],c&&dq(c,o)?++n:(c=joe(s=Doe(s,o)),n=0);return c}function Doe(t,e){var n,i;if(Fx(e,t))return[e];for(n=0;n<t.length;++n)if(Rb(e,t[n])&&Fx(y_(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(i=n+1;i<t.length;++i)if(Rb(y_(t[n],t[i]),e)&&Rb(y_(t[n],e),t[i])&&Rb(y_(t[i],e),t[n])&&Fx(fq(t[n],t[i],e),t))return[t[n],t[i],e];throw new Error}function Rb(t,e){var n=t.r-e.r,i=e.x-t.x,s=e.y-t.y;return n<0||n*n<i*i+s*s}function dq(t,e){var n=t.r-e.r+Math.max(t.r,e.r,1)*1e-9,i=e.x-t.x,s=e.y-t.y;return n>0&&n*n>i*i+s*s}function Fx(t,e){for(var n=0;n<e.length;++n)if(!dq(t,e[n]))return!1;return!0}function joe(t){switch(t.length){case 1:return Uoe(t[0]);case 2:return y_(t[0],t[1]);case 3:return fq(t[0],t[1],t[2])}}function Uoe(t){return{x:t.x,y:t.y,r:t.r}}function y_(t,e){var n=t.x,i=t.y,s=t.r,o=e.x,c=e.y,d=e.r,f=o-n,u=c-i,a=d-s,_=Math.sqrt(f*f+u*u);return{x:(n+o+f/_*a)/2,y:(i+c+u/_*a)/2,r:(_+s+d)/2}}function fq(t,e,n){var i=t.x,s=t.y,o=t.r,c=e.x,d=e.y,f=e.r,u=n.x,a=n.y,_=n.r,w=i-c,m=i-u,l=s-d,T=s-a,b=f-o,S=_-o,x=i*i+s*s-o*o,B=x-c*c-d*d+f*f,F=x-u*u-a*a+_*_,k=m*l-w*T,M=(l*F-T*B)/(k*2)-i,A=(T*b-l*S)/k,R=(m*B-w*F)/(k*2)-s,P=(w*S-m*b)/k,j=A*A+P*P-1,D=2*(o+M*A+R*P),z=M*M+R*R-o*o,$=-(Math.abs(j)>1e-6?(D+Math.sqrt(D*D-4*j*z))/(2*j):z/D);return{x:i+M+A*$,y:s+R+P*$,r:$}}function cD(t,e,n){var i=t.x-e.x,s,o,c=t.y-e.y,d,f,u=i*i+c*c;u?(o=e.r+n.r,o*=o,f=t.r+n.r,f*=f,o>f?(s=(u+f-o)/(2*u),d=Math.sqrt(Math.max(0,f/u-s*s)),n.x=t.x-s*i-d*c,n.y=t.y-s*c+d*i):(s=(u+o-f)/(2*u),d=Math.sqrt(Math.max(0,o/u-s*s)),n.x=e.x+s*i-d*c,n.y=e.y+s*c+d*i)):(n.x=e.x+n.r,n.y=e.y)}function dD(t,e){var n=t.r+e.r-1e-6,i=e.x-t.x,s=e.y-t.y;return n>0&&n*n>i*i+s*s}function fD(t){var e=t._,n=t.next._,i=e.r+n.r,s=(e.x*n.r+n.x*e.r)/i,o=(e.y*n.r+n.y*e.r)/i;return s*s+o*o}function Lb(t){this._=t,this.next=null,this.previous=null}function $oe(t,e){if(!(o=(t=Roe(t)).length))return 0;var n,i,s,o,c,d,f,u,a,_,w;if(n=t[0],n.x=0,n.y=0,!(o>1))return n.r;if(i=t[1],n.x=-i.r,i.x=n.r,i.y=0,!(o>2))return n.r+i.r;cD(i,n,s=t[2]),n=new Lb(n),i=new Lb(i),s=new Lb(s),n.next=s.previous=i,i.next=n.previous=s,s.next=i.previous=n;e:for(f=3;f<o;++f){cD(n._,i._,s=t[f]),s=new Lb(s),u=i.next,a=n.previous,_=i._.r,w=n._.r;do if(_<=w){if(dD(u._,s._)){i=u,n.next=i,i.previous=n,--f;continue e}_+=u._.r,u=u.next}else{if(dD(a._,s._)){n=a,n.next=i,i.previous=n,--f;continue e}w+=a._.r,a=a.previous}while(u!==a.next);for(s.previous=n,s.next=i,n.next=i.previous=i=s,c=fD(n);(s=s.next)!==i;)(d=fD(s))<c&&(n=s,c=d);i=n.next}for(n=[i._],s=i;(s=s.next)!==i;)n.push(s._);for(s=Poe(n,e),f=0;f<o;++f)n=t[f],n.x-=s.x,n.y-=s.y;return s.r}function zoe(t){return Math.sqrt(t.value)}function qoe(){var t=null,e=1,n=1,i=gf;function s(o){const c=Coe();return o.x=e/2,o.y=n/2,t?o.eachBefore(uD(t)).eachAfter(Ox(i,.5,c)).eachBefore(hD(1)):o.eachBefore(uD(zoe)).eachAfter(Ox(gf,1,c)).eachAfter(Ox(i,o.r/Math.min(e,n),c)).eachBefore(hD(Math.min(e,n)/(2*o.r))),o}return s.radius=function(o){return arguments.length?(t=x0(o),s):t},s.size=function(o){return arguments.length?(e=+o[0],n=+o[1],s):[e,n]},s.padding=function(o){return arguments.length?(i=typeof o=="function"?o:bh(+o),s):i},s}function uD(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function Ox(t,e,n){return function(i){if(s=i.children){var s,o,c=s.length,d=t(i)*e||0,f;if(d)for(o=0;o<c;++o)s[o].r+=d;if(f=$oe(s,n),d)for(o=0;o<c;++o)s[o].r-=d;i.r=f+d}}}function hD(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function uq(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function ym(t,e,n,i,s){for(var o=t.children,c,d=-1,f=o.length,u=t.value&&(i-e)/t.value;++d<f;)c=o[d],c.y0=n,c.y1=s,c.x0=e,c.x1=e+=c.value*u}function Goe(){var t=1,e=1,n=0,i=!1;function s(c){var d=c.height+1;return c.x0=c.y0=n,c.x1=t,c.y1=e/d,c.eachBefore(o(e,d)),i&&c.eachBefore(uq),c}function o(c,d){return function(f){f.children&&ym(f,f.x0,c*(f.depth+1)/d,f.x1,c*(f.depth+2)/d);var u=f.x0,a=f.y0,_=f.x1-n,w=f.y1-n;_<u&&(u=_=(u+_)/2),w<a&&(a=w=(a+w)/2),f.x0=u,f.y0=a,f.x1=_,f.y1=w}}return s.round=function(c){return arguments.length?(i=!!c,s):i},s.size=function(c){return arguments.length?(t=+c[0],e=+c[1],s):[t,e]},s.padding=function(c){return arguments.length?(n=+c,s):n},s}var Voe={depth:-1},pD={},Mx={};function Woe(t){return t.id}function Hoe(t){return t.parentId}function gD(){var t=Woe,e=Hoe,n;function i(s){var o=Array.from(s),c=t,d=e,f,u,a,_,w,m,l,T,b=new Map;if(n!=null){const S=o.map((F,k)=>Yoe(n(F,k,s))),x=S.map(_D),B=new Set(S).add("");for(const F of x)B.has(F)||(B.add(F),S.push(F),x.push(_D(F)),o.push(Mx));c=(F,k)=>S[k],d=(F,k)=>x[k]}for(a=0,f=o.length;a<f;++a)u=o[a],m=o[a]=new wp(u),(l=c(u,a,s))!=null&&(l+="")&&(T=m.id=l,b.set(T,b.has(T)?pD:m)),(l=d(u,a,s))!=null&&(l+="")&&(m.parent=l);for(a=0;a<f;++a)if(m=o[a],l=m.parent){if(w=b.get(l),!w)throw new Error("missing: "+l);if(w===pD)throw new Error("ambiguous: "+l);w.children?w.children.push(m):w.children=[m],m.parent=w}else{if(_)throw new Error("multiple roots");_=m}if(!_)throw new Error("no root");if(n!=null){for(;_.data===Mx&&_.children.length===1;)_=_.children[0],--f;for(let S=o.length-1;S>=0&&(m=o[S],m.data===Mx);--S)m.data=null}if(_.parent=Voe,_.eachBefore(function(S){S.depth=S.parent.depth+1,--f}).eachBefore(lq),_.parent=null,f>0)throw new Error("cycle");return _}return i.id=function(s){return arguments.length?(t=x0(s),i):t},i.parentId=function(s){return arguments.length?(e=x0(s),i):e},i.path=function(s){return arguments.length?(n=x0(s),i):n},i}function Yoe(t){t=`${t}`;let e=t.length;return qk(t,e-1)&&!qk(t,e-2)&&(t=t.slice(0,-1)),t[0]==="/"?t:`/${t}`}function _D(t){let e=t.length;if(e<2)return"";for(;--e>1&&!qk(t,e););return t.slice(0,e)}function qk(t,e){if(t[e]==="/"){let n=0;for(;e>0&&t[--e]==="\\";)++n;if((n&1)===0)return!0}return!1}function Xoe(t,e){return t.parent===e.parent?1:2}function Ax(t){var e=t.children;return e?e[0]:t.t}function Nx(t){var e=t.children;return e?e[e.length-1]:t.t}function Koe(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function Joe(t){for(var e=0,n=0,i=t.children,s=i.length,o;--s>=0;)o=i[s],o.z+=e,o.m+=e,e+=o.s+(n+=o.c)}function Qoe(t,e,n){return t.a.parent===e.parent?t.a:n}function B0(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}B0.prototype=Object.create(wp.prototype);function Zoe(t){for(var e=new B0(t,0),n,i=[e],s,o,c,d;n=i.pop();)if(o=n._.children)for(n.children=new Array(d=o.length),c=d-1;c>=0;--c)i.push(s=n.children[c]=new B0(o[c],c)),s.parent=n;return(e.parent=new B0(null,0)).children=[e],e}function ele(){var t=Xoe,e=1,n=1,i=null;function s(u){var a=Zoe(u);if(a.eachAfter(o),a.parent.m=-a.z,a.eachBefore(c),i)u.eachBefore(f);else{var _=u,w=u,m=u;u.eachBefore(function(x){x.x<_.x&&(_=x),x.x>w.x&&(w=x),x.depth>m.depth&&(m=x)});var l=_===w?1:t(_,w)/2,T=l-_.x,b=e/(w.x+l+T),S=n/(m.depth||1);u.eachBefore(function(x){x.x=(x.x+T)*b,x.y=x.depth*S})}return u}function o(u){var a=u.children,_=u.parent.children,w=u.i?_[u.i-1]:null;if(a){Joe(u);var m=(a[0].z+a[a.length-1].z)/2;w?(u.z=w.z+t(u._,w._),u.m=u.z-m):u.z=m}else w&&(u.z=w.z+t(u._,w._));u.parent.A=d(u,w,u.parent.A||_[0])}function c(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function d(u,a,_){if(a){for(var w=u,m=u,l=a,T=w.parent.children[0],b=w.m,S=m.m,x=l.m,B=T.m,F;l=Nx(l),w=Ax(w),l&&w;)T=Ax(T),m=Nx(m),m.a=u,F=l.z+x-w.z-b+t(l._,w._),F>0&&(Koe(Qoe(l,u,_),u,F),b+=F,S+=F),x+=l.m,b+=w.m,B+=T.m,S+=m.m;l&&!Nx(m)&&(m.t=l,m.m+=x-S),w&&!Ax(T)&&(T.t=w,T.m+=b-B,_=u)}return _}function f(u){u.x*=e,u.y=u.depth*n}return s.separation=function(u){return arguments.length?(t=u,s):t},s.size=function(u){return arguments.length?(i=!1,e=+u[0],n=+u[1],s):i?null:[e,n]},s.nodeSize=function(u){return arguments.length?(i=!0,e=+u[0],n=+u[1],s):i?[e,n]:null},s}function oE(t,e,n,i,s){for(var o=t.children,c,d=-1,f=o.length,u=t.value&&(s-n)/t.value;++d<f;)c=o[d],c.x0=e,c.x1=i,c.y0=n,c.y1=n+=c.value*u}var hq=(1+Math.sqrt(5))/2;function pq(t,e,n,i,s,o){for(var c=[],d=e.children,f,u,a=0,_=0,w=d.length,m,l,T=e.value,b,S,x,B,F,k,M;a<w;){m=s-n,l=o-i;do b=d[_++].value;while(!b&&_<w);for(S=x=b,k=Math.max(l/m,m/l)/(T*t),M=b*b*k,F=Math.max(x/M,M/S);_<w;++_){if(b+=u=d[_].value,u<S&&(S=u),u>x&&(x=u),M=b*b*k,B=Math.max(x/M,M/S),B>F){b-=u;break}F=B}c.push(f={value:b,dice:m<l,children:d.slice(a,_)}),f.dice?ym(f,n,i,s,T?i+=l*b/T:o):oE(f,n,i,T?n+=m*b/T:s,o),T-=b,a=_}return c}const gq=function t(e){function n(i,s,o,c,d){pq(e,i,s,o,c,d)}return n.ratio=function(i){return t((i=+i)>1?i:1)},n}(hq);function tle(){var t=gq,e=!1,n=1,i=1,s=[0],o=gf,c=gf,d=gf,f=gf,u=gf;function a(w){return w.x0=w.y0=0,w.x1=n,w.y1=i,w.eachBefore(_),s=[0],e&&w.eachBefore(uq),w}function _(w){var m=s[w.depth],l=w.x0+m,T=w.y0+m,b=w.x1-m,S=w.y1-m;b<l&&(l=b=(l+b)/2),S<T&&(T=S=(T+S)/2),w.x0=l,w.y0=T,w.x1=b,w.y1=S,w.children&&(m=s[w.depth+1]=o(w)/2,l+=u(w)-m,T+=c(w)-m,b-=d(w)-m,S-=f(w)-m,b<l&&(l=b=(l+b)/2),S<T&&(T=S=(T+S)/2),t(w,l,T,b,S))}return a.round=function(w){return arguments.length?(e=!!w,a):e},a.size=function(w){return arguments.length?(n=+w[0],i=+w[1],a):[n,i]},a.tile=function(w){return arguments.length?(t=cq(w),a):t},a.padding=function(w){return arguments.length?a.paddingInner(w).paddingOuter(w):a.paddingInner()},a.paddingInner=function(w){return arguments.length?(o=typeof w=="function"?w:bh(+w),a):o},a.paddingOuter=function(w){return arguments.length?a.paddingTop(w).paddingRight(w).paddingBottom(w).paddingLeft(w):a.paddingTop()},a.paddingTop=function(w){return arguments.length?(c=typeof w=="function"?w:bh(+w),a):c},a.paddingRight=function(w){return arguments.length?(d=typeof w=="function"?w:bh(+w),a):d},a.paddingBottom=function(w){return arguments.length?(f=typeof w=="function"?w:bh(+w),a):f},a.paddingLeft=function(w){return arguments.length?(u=typeof w=="function"?w:bh(+w),a):u},a}function nle(t,e,n,i,s){var o=t.children,c,d=o.length,f,u=new Array(d+1);for(u[0]=f=c=0;c<d;++c)u[c+1]=f+=o[c].value;a(0,d,t.value,e,n,i,s);function a(_,w,m,l,T,b,S){if(_>=w-1){var x=o[_];x.x0=l,x.y0=T,x.x1=b,x.y1=S;return}for(var B=u[_],F=m/2+B,k=_+1,M=w-1;k<M;){var A=k+M>>>1;u[A]<F?k=A+1:M=A}F-u[k-1]<u[k]-F&&_+1<k&&--k;var R=u[k]-B,P=m-R;if(b-l>S-T){var j=m?(l*P+b*R)/m:b;a(_,k,R,l,T,j,S),a(k,w,P,j,T,b,S)}else{var D=m?(T*P+S*R)/m:S;a(_,k,R,l,T,b,D),a(k,w,P,l,D,b,S)}}}function ile(t,e,n,i,s){(t.depth&1?oE:ym)(t,e,n,i,s)}const sle=function t(e){function n(i,s,o,c,d){if((f=i._squarify)&&f.ratio===e)for(var f,u,a,_,w=-1,m,l=f.length,T=i.value;++w<l;){for(u=f[w],a=u.children,_=u.value=0,m=a.length;_<m;++_)u.value+=a[_].value;u.dice?ym(u,s,o,c,T?o+=(d-o)*u.value/T:d):oE(u,s,o,T?s+=(c-s)*u.value/T:c,d),T-=u.value}else i._squarify=f=pq(e,i,s,o,c,d),f.ratio=e}return n.ratio=function(i){return t((i=+i)>1?i:1)},n}(hq);function nl(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Nd(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Gk=Symbol("implicit");function jO(){var t=new tP,e=[],n=[],i=Gk;function s(o){let c=t.get(o);if(c===void 0){if(i!==Gk)return i;t.set(o,c=e.push(o)-1)}return n[c%n.length]}return s.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new tP;for(const c of o)t.has(c)||t.set(c,e.push(c)-1);return s},s.range=function(o){return arguments.length?(n=Array.from(o),s):n.slice()},s.unknown=function(o){return arguments.length?(i=o,s):i},s.copy=function(){return jO(e,n).unknown(i)},nl.apply(s,arguments),s}function rle(t){return function(){return t}}function Vk(t){return+t}var yD=[0,1];function Ns(t){return t}function Wk(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:rle(isNaN(e)?NaN:.5)}function ale(t,e){var n;return t>e&&(n=t,t=e,e=n),function(i){return Math.max(t,Math.min(e,i))}}function ole(t,e,n){var i=t[0],s=t[1],o=e[0],c=e[1];return s<i?(i=Wk(s,i),o=n(c,o)):(i=Wk(i,s),o=n(o,c)),function(d){return o(i(d))}}function lle(t,e,n){var i=Math.min(t.length,e.length)-1,s=new Array(i),o=new Array(i),c=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++c<i;)s[c]=Wk(t[c],t[c+1]),o[c]=n(e[c],e[c+1]);return function(d){var f=cm(t,d,1,i)-1;return o[f](s[f](d))}}function mm(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function lE(){var t=yD,e=yD,n=Ad,i,s,o,c=Ns,d,f,u;function a(){var w=Math.min(t.length,e.length);return c!==Ns&&(c=ale(t[0],t[w-1])),d=w>2?lle:ole,f=u=null,_}function _(w){return w==null||isNaN(w=+w)?o:(f||(f=d(t.map(i),e,n)))(i(c(w)))}return _.invert=function(w){return c(s((u||(u=d(e,t.map(i),ga)))(w)))},_.domain=function(w){return arguments.length?(t=Array.from(w,Vk),a()):t.slice()},_.range=function(w){return arguments.length?(e=Array.from(w),a()):e.slice()},_.rangeRound=function(w){return e=Array.from(w),n=hm,a()},_.clamp=function(w){return arguments.length?(c=w?!0:Ns,a()):c!==Ns},_.interpolate=function(w){return arguments.length?(n=w,a()):n},_.unknown=function(w){return arguments.length?(o=w,_):o},function(w,m){return i=w,s=m,a()}}function _q(){return lE()(Ns,Ns)}function yq(t,e,n,i){var s=rd(t,e,n),o;switch(i=iu(i==null?",f":i),i.type){case"s":{var c=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(o=w5(s,c))&&(i.precision=o),OO(i,c)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(o=b5(s,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=o-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(o=m5(s))&&(i.precision=o-(i.type==="%")*2);break}}return iE(i)}function Lu(t){var e=t.domain;return t.ticks=function(n){var i=e();return fk(i[0],i[i.length-1],n==null?10:n)},t.tickFormat=function(n,i){var s=e();return yq(s[0],s[s.length-1],n==null?10:n,i)},t.nice=function(n){n==null&&(n=10);var i=e(),s=0,o=i.length-1,c=i[s],d=i[o],f,u,a=10;for(d<c&&(u=c,c=d,d=u,u=s,s=o,o=u);a-- >0;){if(u=uk(c,d,n),u===f)return i[s]=c,i[o]=d,e(i);if(u>0)c=Math.floor(c/u)*u,d=Math.ceil(d/u)*u;else if(u<0)c=Math.ceil(c*u)/u,d=Math.floor(d*u)/u;else break;f=u}return t},t}function mq(){var t=_q();return t.copy=function(){return mm(t,mq())},nl.apply(t,arguments),Lu(t)}function wq(t){var e;function n(i){return i==null||isNaN(i=+i)?e:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(t=Array.from(i,Vk),n):t.slice()},n.unknown=function(i){return arguments.length?(e=i,n):e},n.copy=function(){return wq(t).unknown(e)},t=arguments.length?Array.from(t,Vk):[0,1],Lu(n)}function bq(t,e){t=t.slice();var n=0,i=t.length-1,s=t[n],o=t[i],c;return o<s&&(c=n,n=i,i=c,c=s,s=o,o=c),t[n]=e.floor(s),t[i]=e.ceil(o),t}function mD(t){return Math.log(t)}function wD(t){return Math.exp(t)}function cle(t){return-Math.log(-t)}function dle(t){return-Math.exp(-t)}function fle(t){return isFinite(t)?+("1e"+t):t<0?0:t}function ule(t){return t===10?fle:t===Math.E?Math.exp:e=>Math.pow(t,e)}function hle(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function bD(t){return(e,n)=>-t(-e,n)}function UO(t){const e=t(mD,wD),n=e.domain;let i=10,s,o;function c(){return s=hle(i),o=ule(i),n()[0]<0?(s=bD(s),o=bD(o),t(cle,dle)):t(mD,wD),e}return e.base=function(d){return arguments.length?(i=+d,c()):i},e.domain=function(d){return arguments.length?(n(d),c()):n()},e.ticks=d=>{const f=n();let u=f[0],a=f[f.length-1];const _=a<u;_&&([u,a]=[a,u]);let w=s(u),m=s(a),l,T;const b=d==null?10:+d;let S=[];if(!(i%1)&&m-w<b){if(w=Math.floor(w),m=Math.ceil(m),u>0){for(;w<=m;++w)for(l=1;l<i;++l)if(T=w<0?l/o(-w):l*o(w),!(T<u)){if(T>a)break;S.push(T)}}else for(;w<=m;++w)for(l=i-1;l>=1;--l)if(T=w>0?l/o(-w):l*o(w),!(T<u)){if(T>a)break;S.push(T)}S.length*2<b&&(S=fk(u,a,b))}else S=fk(w,m,Math.min(m-w,b)).map(o);return _?S.reverse():S},e.tickFormat=(d,f)=>{if(d==null&&(d=10),f==null&&(f=i===10?"s":","),typeof f!="function"&&(!(i%1)&&(f=iu(f)).precision==null&&(f.trim=!0),f=iE(f)),d===1/0)return f;const u=Math.max(1,i*d/e.ticks().length);return a=>{let _=a/o(Math.round(s(a)));return _*i<i-.5&&(_*=i),_<=u?f(a):""}},e.nice=()=>n(bq(n(),{floor:d=>o(Math.floor(s(d))),ceil:d=>o(Math.ceil(s(d)))})),e}function Tq(){const t=UO(lE()).domain([1,10]);return t.copy=()=>mm(t,Tq()).base(t.base()),nl.apply(t,arguments),t}function TD(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function vD(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function $O(t){var e=1,n=t(TD(e),vD(e));return n.constant=function(i){return arguments.length?t(TD(e=+i),vD(e)):e},Lu(n)}function vq(){var t=$O(lE());return t.copy=function(){return mm(t,vq()).constant(t.constant())},nl.apply(t,arguments)}function ED(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function ple(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function gle(t){return t<0?-t*t:t*t}function zO(t){var e=t(Ns,Ns),n=1;function i(){return n===1?t(Ns,Ns):n===.5?t(ple,gle):t(ED(n),ED(1/n))}return e.exponent=function(s){return arguments.length?(n=+s,i()):n},Lu(e)}function qO(){var t=zO(lE());return t.copy=function(){return mm(t,qO()).exponent(t.exponent())},nl.apply(t,arguments),t}function _le(){return qO.apply(null,arguments).exponent(.5)}function Eq(){var t=[],e=[],n=[],i;function s(){var c=0,d=Math.max(1,e.length);for(n=new Array(d-1);++c<d;)n[c-1]=Tz(t,c/d);return o}function o(c){return c==null||isNaN(c=+c)?i:e[cm(n,c)]}return o.invertExtent=function(c){var d=e.indexOf(c);return d<0?[NaN,NaN]:[d>0?n[d-1]:t[0],d<n.length?n[d]:t[t.length-1]]},o.domain=function(c){if(!arguments.length)return t.slice();t=[];for(let d of c)d!=null&&!isNaN(d=+d)&&t.push(d);return t.sort(jl),s()},o.range=function(c){return arguments.length?(e=Array.from(c),s()):e.slice()},o.unknown=function(c){return arguments.length?(i=c,o):i},o.quantiles=function(){return n.slice()},o.copy=function(){return Eq().domain(t).range(e).unknown(i)},nl.apply(o,arguments)}function Sq(){var t=0,e=1,n=1,i=[.5],s=[0,1],o;function c(f){return f!=null&&f<=f?s[cm(i,f,0,n)]:o}function d(){var f=-1;for(i=new Array(n);++f<n;)i[f]=((f+1)*e-(f-n)*t)/(n+1);return c}return c.domain=function(f){return arguments.length?([t,e]=f,t=+t,e=+e,d()):[t,e]},c.range=function(f){return arguments.length?(n=(s=Array.from(f)).length-1,d()):s.slice()},c.invertExtent=function(f){var u=s.indexOf(f);return u<0?[NaN,NaN]:u<1?[t,i[0]]:u>=n?[i[n-1],e]:[i[u-1],i[u]]},c.unknown=function(f){return arguments.length&&(o=f),c},c.thresholds=function(){return i.slice()},c.copy=function(){return Sq().domain([t,e]).range(s).unknown(o)},nl.apply(Lu(c),arguments)}function xq(){var t=[.5],e=[0,1],n,i=1;function s(o){return o!=null&&o<=o?e[cm(t,o,0,i)]:n}return s.domain=function(o){return arguments.length?(t=Array.from(o),i=Math.min(t.length,e.length-1),s):t.slice()},s.range=function(o){return arguments.length?(e=Array.from(o),i=Math.min(t.length,e.length-1),s):e.slice()},s.invertExtent=function(o){var c=e.indexOf(o);return[t[c-1],t[c]]},s.unknown=function(o){return arguments.length?(n=o,s):n},s.copy=function(){return xq().domain(t).range(e).unknown(n)},nl.apply(s,arguments)}const Cx=new Date,Rx=new Date;function ri(t,e,n,i){function s(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return s.floor=o=>(t(o=new Date(+o)),o),s.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),s.round=o=>{const c=s(o),d=s.ceil(o);return o-c<d-o?c:d},s.offset=(o,c)=>(e(o=new Date(+o),c==null?1:Math.floor(c)),o),s.range=(o,c,d)=>{const f=[];if(o=s.ceil(o),d=d==null?1:Math.floor(d),!(o<c)||!(d>0))return f;let u;do f.push(u=new Date(+o)),e(o,d),t(o);while(u<o&&o<c);return f},s.filter=o=>ri(c=>{if(c>=c)for(;t(c),!o(c);)c.setTime(c-1)},(c,d)=>{if(c>=c)if(d<0)for(;++d<=0;)for(;e(c,-1),!o(c););else for(;--d>=0;)for(;e(c,1),!o(c););}),n&&(s.count=(o,c)=>(Cx.setTime(+o),Rx.setTime(+c),t(Cx),t(Rx),Math.floor(n(Cx,Rx))),s.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?s.filter(i?c=>i(c)%o===0:c=>s.count(0,c)%o===0):s)),s}const bp=ri(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);bp.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?ri(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):bp);bp.range;const Cl=1e3,Rr=Cl*60,Rl=Rr*60,Kl=Rl*24,GO=Kl*7,SD=Kl*30,Lx=Kl*365,Ll=ri(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Cl)},(t,e)=>(e-t)/Cl,t=>t.getUTCSeconds());Ll.range;const cE=ri(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Cl)},(t,e)=>{t.setTime(+t+e*Rr)},(t,e)=>(e-t)/Rr,t=>t.getMinutes());cE.range;const dE=ri(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Rr)},(t,e)=>(e-t)/Rr,t=>t.getUTCMinutes());dE.range;const fE=ri(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Cl-t.getMinutes()*Rr)},(t,e)=>{t.setTime(+t+e*Rl)},(t,e)=>(e-t)/Rl,t=>t.getHours());fE.range;const uE=ri(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Rl)},(t,e)=>(e-t)/Rl,t=>t.getUTCHours());uE.range;const $l=ri(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Rr)/Kl,t=>t.getDate()-1);$l.range;const Wc=ri(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Kl,t=>t.getUTCDate()-1);Wc.range;const Bq=ri(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Kl,t=>Math.floor(t/Kl));Bq.range;function Pu(t){return ri(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Rr)/GO)}const lg=Pu(0),tv=Pu(1),yle=Pu(2),mle=Pu(3),Tp=Pu(4),wle=Pu(5),ble=Pu(6);lg.range;tv.range;yle.range;mle.range;Tp.range;wle.range;ble.range;function Du(t){return ri(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/GO)}const cg=Du(0),nv=Du(1),Tle=Du(2),vle=Du(3),vp=Du(4),Ele=Du(5),Sle=Du(6);cg.range;nv.range;Tle.range;vle.range;vp.range;Ele.range;Sle.range;const py=ri(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());py.range;const gy=ri(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());gy.range;const $o=ri(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());$o.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ri(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});$o.range;const zo=ri(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());zo.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ri(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});zo.range;function kq(t,e,n,i,s,o){const c=[[Ll,1,Cl],[Ll,5,5*Cl],[Ll,15,15*Cl],[Ll,30,30*Cl],[o,1,Rr],[o,5,5*Rr],[o,15,15*Rr],[o,30,30*Rr],[s,1,Rl],[s,3,3*Rl],[s,6,6*Rl],[s,12,12*Rl],[i,1,Kl],[i,2,2*Kl],[n,1,GO],[e,1,SD],[e,3,3*SD],[t,1,Lx]];function d(u,a,_){const w=a<u;w&&([u,a]=[a,u]);const m=_&&typeof _.range=="function"?_:f(u,a,_),l=m?m.range(u,+a+1):[];return w?l.reverse():l}function f(u,a,_){const w=Math.abs(a-u)/_,m=lm(([,,b])=>b).right(c,w);if(m===c.length)return t.every(rd(u/Lx,a/Lx,_));if(m===0)return bp.every(Math.max(rd(u,a,_),1));const[l,T]=c[w/c[m-1][2]<c[m][2]/w?m-1:m];return l.every(T)}return[d,f]}const[xle,Ble]=kq(zo,gy,cg,Bq,uE,dE),[kle,Ile]=kq($o,py,lg,$l,fE,cE);function Px(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Dx(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function jg(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Iq(t){var e=t.dateTime,n=t.date,i=t.time,s=t.periods,o=t.days,c=t.shortDays,d=t.months,f=t.shortMonths,u=Ug(s),a=$g(s),_=Ug(o),w=$g(o),m=Ug(c),l=$g(c),T=Ug(d),b=$g(d),S=Ug(f),x=$g(f),B={a:J,A:V,b:le,B:pe,c:null,d:OD,e:OD,f:Jle,g:oce,G:cce,H:Yle,I:Xle,j:Kle,L:Fq,m:Qle,M:Zle,p:se,q:Ne,Q:ND,s:CD,S:ece,u:tce,U:nce,V:ice,w:sce,W:rce,x:null,X:null,y:ace,Y:lce,Z:dce,"%":AD},F={a:fe,A:Ce,b:Me,B:He,c:null,d:MD,e:MD,f:pce,g:Sce,G:Bce,H:fce,I:uce,j:hce,L:Mq,m:gce,M:_ce,p:Bt,q:vt,Q:ND,s:CD,S:yce,u:mce,U:wce,V:bce,w:Tce,W:vce,x:null,X:null,y:Ece,Y:xce,Z:kce,"%":AD},k={a:j,A:D,b:z,B:$,c:Y,d:ID,e:ID,f:Gle,g:kD,G:BD,H:FD,I:FD,j:Ule,L:qle,m:jle,M:$le,p:P,q:Dle,Q:Wle,s:Hle,S:zle,u:Nle,U:Cle,V:Rle,w:Ale,W:Lle,x:W,X:H,y:kD,Y:BD,Z:Ple,"%":Vle};B.x=M(n,B),B.X=M(i,B),B.c=M(e,B),F.x=M(n,F),F.X=M(i,F),F.c=M(e,F);function M(ge,G){return function(q){var L=[],X=-1,Z=0,ae=ge.length,re,_e,Ee;for(q instanceof Date||(q=new Date(+q));++X<ae;)ge.charCodeAt(X)===37&&(L.push(ge.slice(Z,X)),(_e=xD[re=ge.charAt(++X)])!=null?re=ge.charAt(++X):_e=re==="e"?" ":"0",(Ee=G[re])&&(re=Ee(q,_e)),L.push(re),Z=X+1);return L.push(ge.slice(Z,X)),L.join("")}}function A(ge,G){return function(q){var L=jg(1900,void 0,1),X=R(L,ge,q+="",0),Z,ae;if(X!=q.length)return null;if("Q"in L)return new Date(L.Q);if("s"in L)return new Date(L.s*1e3+("L"in L?L.L:0));if(G&&!("Z"in L)&&(L.Z=0),"p"in L&&(L.H=L.H%12+L.p*12),L.m===void 0&&(L.m="q"in L?L.q:0),"V"in L){if(L.V<1||L.V>53)return null;"w"in L||(L.w=1),"Z"in L?(Z=Dx(jg(L.y,0,1)),ae=Z.getUTCDay(),Z=ae>4||ae===0?nv.ceil(Z):nv(Z),Z=Wc.offset(Z,(L.V-1)*7),L.y=Z.getUTCFullYear(),L.m=Z.getUTCMonth(),L.d=Z.getUTCDate()+(L.w+6)%7):(Z=Px(jg(L.y,0,1)),ae=Z.getDay(),Z=ae>4||ae===0?tv.ceil(Z):tv(Z),Z=$l.offset(Z,(L.V-1)*7),L.y=Z.getFullYear(),L.m=Z.getMonth(),L.d=Z.getDate()+(L.w+6)%7)}else("W"in L||"U"in L)&&("w"in L||(L.w="u"in L?L.u%7:"W"in L?1:0),ae="Z"in L?Dx(jg(L.y,0,1)).getUTCDay():Px(jg(L.y,0,1)).getDay(),L.m=0,L.d="W"in L?(L.w+6)%7+L.W*7-(ae+5)%7:L.w+L.U*7-(ae+6)%7);return"Z"in L?(L.H+=L.Z/100|0,L.M+=L.Z%100,Dx(L)):Px(L)}}function R(ge,G,q,L){for(var X=0,Z=G.length,ae=q.length,re,_e;X<Z;){if(L>=ae)return-1;if(re=G.charCodeAt(X++),re===37){if(re=G.charAt(X++),_e=k[re in xD?G.charAt(X++):re],!_e||(L=_e(ge,q,L))<0)return-1}else if(re!=q.charCodeAt(L++))return-1}return L}function P(ge,G,q){var L=u.exec(G.slice(q));return L?(ge.p=a.get(L[0].toLowerCase()),q+L[0].length):-1}function j(ge,G,q){var L=m.exec(G.slice(q));return L?(ge.w=l.get(L[0].toLowerCase()),q+L[0].length):-1}function D(ge,G,q){var L=_.exec(G.slice(q));return L?(ge.w=w.get(L[0].toLowerCase()),q+L[0].length):-1}function z(ge,G,q){var L=S.exec(G.slice(q));return L?(ge.m=x.get(L[0].toLowerCase()),q+L[0].length):-1}function $(ge,G,q){var L=T.exec(G.slice(q));return L?(ge.m=b.get(L[0].toLowerCase()),q+L[0].length):-1}function Y(ge,G,q){return R(ge,e,G,q)}function W(ge,G,q){return R(ge,n,G,q)}function H(ge,G,q){return R(ge,i,G,q)}function J(ge){return c[ge.getDay()]}function V(ge){return o[ge.getDay()]}function le(ge){return f[ge.getMonth()]}function pe(ge){return d[ge.getMonth()]}function se(ge){return s[+(ge.getHours()>=12)]}function Ne(ge){return 1+~~(ge.getMonth()/3)}function fe(ge){return c[ge.getUTCDay()]}function Ce(ge){return o[ge.getUTCDay()]}function Me(ge){return f[ge.getUTCMonth()]}function He(ge){return d[ge.getUTCMonth()]}function Bt(ge){return s[+(ge.getUTCHours()>=12)]}function vt(ge){return 1+~~(ge.getUTCMonth()/3)}return{format:function(ge){var G=M(ge+="",B);return G.toString=function(){return ge},G},parse:function(ge){var G=A(ge+="",!1);return G.toString=function(){return ge},G},utcFormat:function(ge){var G=M(ge+="",F);return G.toString=function(){return ge},G},utcParse:function(ge){var G=A(ge+="",!0);return G.toString=function(){return ge},G}}}var xD={"-":"",_:" ",0:"0"},vi=/^\s*\d+/,Fle=/^%/,Ole=/[\\^$*+?|[\]().{}]/g;function Vt(t,e,n){var i=t<0?"-":"",s=(i?-t:t)+"",o=s.length;return i+(o<n?new Array(n-o+1).join(e)+s:s)}function Mle(t){return t.replace(Ole,"\\$&")}function Ug(t){return new RegExp("^(?:"+t.map(Mle).join("|")+")","i")}function $g(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Ale(t,e,n){var i=vi.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function Nle(t,e,n){var i=vi.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function Cle(t,e,n){var i=vi.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function Rle(t,e,n){var i=vi.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function Lle(t,e,n){var i=vi.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function BD(t,e,n){var i=vi.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function kD(t,e,n){var i=vi.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function Ple(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function Dle(t,e,n){var i=vi.exec(e.slice(n,n+1));return i?(t.q=i[0]*3-3,n+i[0].length):-1}function jle(t,e,n){var i=vi.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function ID(t,e,n){var i=vi.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function Ule(t,e,n){var i=vi.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function FD(t,e,n){var i=vi.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function $le(t,e,n){var i=vi.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function zle(t,e,n){var i=vi.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function qle(t,e,n){var i=vi.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function Gle(t,e,n){var i=vi.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function Vle(t,e,n){var i=Fle.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function Wle(t,e,n){var i=vi.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function Hle(t,e,n){var i=vi.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function OD(t,e){return Vt(t.getDate(),e,2)}function Yle(t,e){return Vt(t.getHours(),e,2)}function Xle(t,e){return Vt(t.getHours()%12||12,e,2)}function Kle(t,e){return Vt(1+$l.count($o(t),t),e,3)}function Fq(t,e){return Vt(t.getMilliseconds(),e,3)}function Jle(t,e){return Fq(t,e)+"000"}function Qle(t,e){return Vt(t.getMonth()+1,e,2)}function Zle(t,e){return Vt(t.getMinutes(),e,2)}function ece(t,e){return Vt(t.getSeconds(),e,2)}function tce(t){var e=t.getDay();return e===0?7:e}function nce(t,e){return Vt(lg.count($o(t)-1,t),e,2)}function Oq(t){var e=t.getDay();return e>=4||e===0?Tp(t):Tp.ceil(t)}function ice(t,e){return t=Oq(t),Vt(Tp.count($o(t),t)+($o(t).getDay()===4),e,2)}function sce(t){return t.getDay()}function rce(t,e){return Vt(tv.count($o(t)-1,t),e,2)}function ace(t,e){return Vt(t.getFullYear()%100,e,2)}function oce(t,e){return t=Oq(t),Vt(t.getFullYear()%100,e,2)}function lce(t,e){return Vt(t.getFullYear()%1e4,e,4)}function cce(t,e){var n=t.getDay();return t=n>=4||n===0?Tp(t):Tp.ceil(t),Vt(t.getFullYear()%1e4,e,4)}function dce(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Vt(e/60|0,"0",2)+Vt(e%60,"0",2)}function MD(t,e){return Vt(t.getUTCDate(),e,2)}function fce(t,e){return Vt(t.getUTCHours(),e,2)}function uce(t,e){return Vt(t.getUTCHours()%12||12,e,2)}function hce(t,e){return Vt(1+Wc.count(zo(t),t),e,3)}function Mq(t,e){return Vt(t.getUTCMilliseconds(),e,3)}function pce(t,e){return Mq(t,e)+"000"}function gce(t,e){return Vt(t.getUTCMonth()+1,e,2)}function _ce(t,e){return Vt(t.getUTCMinutes(),e,2)}function yce(t,e){return Vt(t.getUTCSeconds(),e,2)}function mce(t){var e=t.getUTCDay();return e===0?7:e}function wce(t,e){return Vt(cg.count(zo(t)-1,t),e,2)}function Aq(t){var e=t.getUTCDay();return e>=4||e===0?vp(t):vp.ceil(t)}function bce(t,e){return t=Aq(t),Vt(vp.count(zo(t),t)+(zo(t).getUTCDay()===4),e,2)}function Tce(t){return t.getUTCDay()}function vce(t,e){return Vt(nv.count(zo(t)-1,t),e,2)}function Ece(t,e){return Vt(t.getUTCFullYear()%100,e,2)}function Sce(t,e){return t=Aq(t),Vt(t.getUTCFullYear()%100,e,2)}function xce(t,e){return Vt(t.getUTCFullYear()%1e4,e,4)}function Bce(t,e){var n=t.getUTCDay();return t=n>=4||n===0?vp(t):vp.ceil(t),Vt(t.getUTCFullYear()%1e4,e,4)}function kce(){return"+0000"}function AD(){return"%"}function ND(t){return+t}function CD(t){return Math.floor(+t/1e3)}var ih,VO,Nq,WO,Cq;Ice({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Ice(t){return ih=Iq(t),VO=ih.format,Nq=ih.parse,WO=ih.utcFormat,Cq=ih.utcParse,ih}function Fce(t){return new Date(t)}function Oce(t){return t instanceof Date?+t:+new Date(+t)}function HO(t,e,n,i,s,o,c,d,f,u){var a=_q(),_=a.invert,w=a.domain,m=u(".%L"),l=u(":%S"),T=u("%I:%M"),b=u("%I %p"),S=u("%a %d"),x=u("%b %d"),B=u("%B"),F=u("%Y");function k(M){return(f(M)<M?m:d(M)<M?l:c(M)<M?T:o(M)<M?b:i(M)<M?s(M)<M?S:x:n(M)<M?B:F)(M)}return a.invert=function(M){return new Date(_(M))},a.domain=function(M){return arguments.length?w(Array.from(M,Oce)):w().map(Fce)},a.ticks=function(M){var A=w();return t(A[0],A[A.length-1],M==null?10:M)},a.tickFormat=function(M,A){return A==null?k:u(A)},a.nice=function(M){var A=w();return(!M||typeof M.range!="function")&&(M=e(A[0],A[A.length-1],M==null?10:M)),M?w(bq(A,M)):a},a.copy=function(){return mm(a,HO(t,e,n,i,s,o,c,d,f,u))},a}function Mce(){return nl.apply(HO(kle,Ile,$o,py,lg,$l,fE,cE,Ll,VO).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Ace(){return nl.apply(HO(xle,Ble,zo,gy,cg,Wc,uE,dE,Ll,WO).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function hE(){var t=0,e=1,n,i,s,o,c=Ns,d=!1,f;function u(_){return _==null||isNaN(_=+_)?f:c(s===0?.5:(_=(o(_)-n)*s,d?Math.max(0,Math.min(1,_)):_))}u.domain=function(_){return arguments.length?([t,e]=_,n=o(t=+t),i=o(e=+e),s=n===i?0:1/(i-n),u):[t,e]},u.clamp=function(_){return arguments.length?(d=!!_,u):d},u.interpolator=function(_){return arguments.length?(c=_,u):c};function a(_){return function(w){var m,l;return arguments.length?([m,l]=w,c=_(m,l),u):[c(0),c(1)]}}return u.range=a(Ad),u.rangeRound=a(hm),u.unknown=function(_){return arguments.length?(f=_,u):f},function(_){return o=_,n=_(t),i=_(e),s=n===i?0:1/(i-n),u}}function Cd(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function YO(){var t=Lu(hE()(Ns));return t.copy=function(){return Cd(t,YO())},Nd.apply(t,arguments)}function Rq(){var t=UO(hE()).domain([1,10]);return t.copy=function(){return Cd(t,Rq()).base(t.base())},Nd.apply(t,arguments)}function Lq(){var t=$O(hE());return t.copy=function(){return Cd(t,Lq()).constant(t.constant())},Nd.apply(t,arguments)}function XO(){var t=zO(hE());return t.copy=function(){return Cd(t,XO()).exponent(t.exponent())},Nd.apply(t,arguments)}function Nce(){return XO.apply(null,arguments).exponent(.5)}function pE(){var t=0,e=.5,n=1,i=1,s,o,c,d,f,u=Ns,a,_=!1,w;function m(T){return isNaN(T=+T)?w:(T=.5+((T=+a(T))-o)*(i*T<i*o?d:f),u(_?Math.max(0,Math.min(1,T)):T))}m.domain=function(T){return arguments.length?([t,e,n]=T,s=a(t=+t),o=a(e=+e),c=a(n=+n),d=s===o?0:.5/(o-s),f=o===c?0:.5/(c-o),i=o<s?-1:1,m):[t,e,n]},m.clamp=function(T){return arguments.length?(_=!!T,m):_},m.interpolator=function(T){return arguments.length?(u=T,m):u};function l(T){return function(b){var S,x,B;return arguments.length?([S,x,B]=b,u=EO(T,[S,x,B]),m):[u(0),u(.5),u(1)]}}return m.range=l(Ad),m.rangeRound=l(hm),m.unknown=function(T){return arguments.length?(w=T,m):w},function(T){return a=T,s=T(t),o=T(e),c=T(n),d=s===o?0:.5/(o-s),f=o===c?0:.5/(c-o),i=o<s?-1:1,m}}function Pq(){var t=Lu(pE()(Ns));return t.copy=function(){return Cd(t,Pq())},Nd.apply(t,arguments)}function Dq(){var t=UO(pE()).domain([.1,1,10]);return t.copy=function(){return Cd(t,Dq()).base(t.base())},Nd.apply(t,arguments)}function jq(){var t=$O(pE());return t.copy=function(){return Cd(t,jq()).constant(t.constant())},Nd.apply(t,arguments)}function KO(){var t=zO(pE());return t.copy=function(){return Cd(t,KO()).exponent(t.exponent())},Nd.apply(t,arguments)}function Cce(){return KO.apply(null,arguments).exponent(.5)}function Zt(t){return function(){return t}}const RD=Math.abs,Mi=Math.atan2,Jd=Math.cos,Rce=Math.max,jx=Math.min,Ya=Math.sin,Of=Math.sqrt,Ai=1e-12,Ep=Math.PI,iv=Ep/2,Uq=2*Ep;function Lce(t){return t>1?0:t<-1?Ep:Math.acos(t)}function LD(t){return t>=1?iv:t<=-1?-iv:Math.asin(t)}function gE(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);e=i}return t},()=>new xO(e)}function Pce(t){return t.innerRadius}function Dce(t){return t.outerRadius}function jce(t){return t.startAngle}function Uce(t){return t.endAngle}function $ce(t){return t&&t.padAngle}function zce(t,e,n,i,s,o,c,d){var f=n-t,u=i-e,a=c-s,_=d-o,w=_*f-a*u;if(!(w*w<Ai))return w=(a*(e-o)-_*(t-s))/w,[t+w*f,e+w*u]}function Pb(t,e,n,i,s,o,c){var d=t-n,f=e-i,u=(c?o:-o)/Of(d*d+f*f),a=u*f,_=-u*d,w=t+a,m=e+_,l=n+a,T=i+_,b=(w+l)/2,S=(m+T)/2,x=l-w,B=T-m,F=x*x+B*B,k=s-o,M=w*T-l*m,A=(B<0?-1:1)*Of(Rce(0,k*k*F-M*M)),R=(M*B-x*A)/F,P=(-M*x-B*A)/F,j=(M*B+x*A)/F,D=(-M*x+B*A)/F,z=R-b,$=P-S,Y=j-b,W=D-S;return z*z+$*$>Y*Y+W*W&&(R=j,P=D),{cx:R,cy:P,x01:-a,y01:-_,x11:R*(s/k-1),y11:P*(s/k-1)}}function qce(){var t=Pce,e=Dce,n=Zt(0),i=null,s=jce,o=Uce,c=$ce,d=null,f=gE(u);function u(){var a,_,w=+t.apply(this,arguments),m=+e.apply(this,arguments),l=s.apply(this,arguments)-iv,T=o.apply(this,arguments)-iv,b=RD(T-l),S=T>l;if(d||(d=a=f()),m<w&&(_=m,m=w,w=_),!(m>Ai))d.moveTo(0,0);else if(b>Uq-Ai)d.moveTo(m*Jd(l),m*Ya(l)),d.arc(0,0,m,l,T,!S),w>Ai&&(d.moveTo(w*Jd(T),w*Ya(T)),d.arc(0,0,w,T,l,S));else{var x=l,B=T,F=l,k=T,M=b,A=b,R=c.apply(this,arguments)/2,P=R>Ai&&(i?+i.apply(this,arguments):Of(w*w+m*m)),j=jx(RD(m-w)/2,+n.apply(this,arguments)),D=j,z=j,$,Y;if(P>Ai){var W=LD(P/w*Ya(R)),H=LD(P/m*Ya(R));(M-=W*2)>Ai?(W*=S?1:-1,F+=W,k-=W):(M=0,F=k=(l+T)/2),(A-=H*2)>Ai?(H*=S?1:-1,x+=H,B-=H):(A=0,x=B=(l+T)/2)}var J=m*Jd(x),V=m*Ya(x),le=w*Jd(k),pe=w*Ya(k);if(j>Ai){var se=m*Jd(B),Ne=m*Ya(B),fe=w*Jd(F),Ce=w*Ya(F),Me;if(b<Ep)if(Me=zce(J,V,fe,Ce,se,Ne,le,pe)){var He=J-Me[0],Bt=V-Me[1],vt=se-Me[0],ge=Ne-Me[1],G=1/Ya(Lce((He*vt+Bt*ge)/(Of(He*He+Bt*Bt)*Of(vt*vt+ge*ge)))/2),q=Of(Me[0]*Me[0]+Me[1]*Me[1]);D=jx(j,(w-q)/(G-1)),z=jx(j,(m-q)/(G+1))}else D=z=0}A>Ai?z>Ai?($=Pb(fe,Ce,J,V,m,z,S),Y=Pb(se,Ne,le,pe,m,z,S),d.moveTo($.cx+$.x01,$.cy+$.y01),z<j?d.arc($.cx,$.cy,z,Mi($.y01,$.x01),Mi(Y.y01,Y.x01),!S):(d.arc($.cx,$.cy,z,Mi($.y01,$.x01),Mi($.y11,$.x11),!S),d.arc(0,0,m,Mi($.cy+$.y11,$.cx+$.x11),Mi(Y.cy+Y.y11,Y.cx+Y.x11),!S),d.arc(Y.cx,Y.cy,z,Mi(Y.y11,Y.x11),Mi(Y.y01,Y.x01),!S))):(d.moveTo(J,V),d.arc(0,0,m,x,B,!S)):d.moveTo(J,V),!(w>Ai)||!(M>Ai)?d.lineTo(le,pe):D>Ai?($=Pb(le,pe,se,Ne,w,-D,S),Y=Pb(J,V,fe,Ce,w,-D,S),d.lineTo($.cx+$.x01,$.cy+$.y01),D<j?d.arc($.cx,$.cy,D,Mi($.y01,$.x01),Mi(Y.y01,Y.x01),!S):(d.arc($.cx,$.cy,D,Mi($.y01,$.x01),Mi($.y11,$.x11),!S),d.arc(0,0,w,Mi($.cy+$.y11,$.cx+$.x11),Mi(Y.cy+Y.y11,Y.cx+Y.x11),S),d.arc(Y.cx,Y.cy,D,Mi(Y.y11,Y.x11),Mi(Y.y01,Y.x01),!S))):d.arc(0,0,w,k,F,S)}if(d.closePath(),a)return d=null,a+""||null}return u.centroid=function(){var a=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,_=(+s.apply(this,arguments)+ +o.apply(this,arguments))/2-Ep/2;return[Jd(_)*a,Ya(_)*a]},u.innerRadius=function(a){return arguments.length?(t=typeof a=="function"?a:Zt(+a),u):t},u.outerRadius=function(a){return arguments.length?(e=typeof a=="function"?a:Zt(+a),u):e},u.cornerRadius=function(a){return arguments.length?(n=typeof a=="function"?a:Zt(+a),u):n},u.padRadius=function(a){return arguments.length?(i=a==null?null:typeof a=="function"?a:Zt(+a),u):i},u.startAngle=function(a){return arguments.length?(s=typeof a=="function"?a:Zt(+a),u):s},u.endAngle=function(a){return arguments.length?(o=typeof a=="function"?a:Zt(+a),u):o},u.padAngle=function(a){return arguments.length?(c=typeof a=="function"?a:Zt(+a),u):c},u.context=function(a){return arguments.length?(d=a==null?null:a,u):d},u}function $q(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function zq(t){this._context=t}zq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function JO(t){return new zq(t)}function qq(t){return t[0]}function Gq(t){return t[1]}function Vq(t,e){var n=Zt(!0),i=null,s=JO,o=null,c=gE(d);t=typeof t=="function"?t:t===void 0?qq:Zt(t),e=typeof e=="function"?e:e===void 0?Gq:Zt(e);function d(f){var u,a=(f=$q(f)).length,_,w=!1,m;for(i==null&&(o=s(m=c())),u=0;u<=a;++u)!(u<a&&n(_=f[u],u,f))===w&&((w=!w)?o.lineStart():o.lineEnd()),w&&o.point(+t(_,u,f),+e(_,u,f));if(m)return o=null,m+""||null}return d.x=function(f){return arguments.length?(t=typeof f=="function"?f:Zt(+f),d):t},d.y=function(f){return arguments.length?(e=typeof f=="function"?f:Zt(+f),d):e},d.defined=function(f){return arguments.length?(n=typeof f=="function"?f:Zt(!!f),d):n},d.curve=function(f){return arguments.length?(s=f,i!=null&&(o=s(i)),d):s},d.context=function(f){return arguments.length?(f==null?i=o=null:o=s(i=f),d):i},d}function Wq(t,e,n){var i=null,s=Zt(!0),o=null,c=JO,d=null,f=gE(u);t=typeof t=="function"?t:t===void 0?qq:Zt(+t),e=typeof e=="function"?e:Zt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?Gq:Zt(+n);function u(_){var w,m,l,T=(_=$q(_)).length,b,S=!1,x,B=new Array(T),F=new Array(T);for(o==null&&(d=c(x=f())),w=0;w<=T;++w){if(!(w<T&&s(b=_[w],w,_))===S)if(S=!S)m=w,d.areaStart(),d.lineStart();else{for(d.lineEnd(),d.lineStart(),l=w-1;l>=m;--l)d.point(B[l],F[l]);d.lineEnd(),d.areaEnd()}S&&(B[w]=+t(b,w,_),F[w]=+e(b,w,_),d.point(i?+i(b,w,_):B[w],n?+n(b,w,_):F[w]))}if(x)return d=null,x+""||null}function a(){return Vq().defined(s).curve(c).context(o)}return u.x=function(_){return arguments.length?(t=typeof _=="function"?_:Zt(+_),i=null,u):t},u.x0=function(_){return arguments.length?(t=typeof _=="function"?_:Zt(+_),u):t},u.x1=function(_){return arguments.length?(i=_==null?null:typeof _=="function"?_:Zt(+_),u):i},u.y=function(_){return arguments.length?(e=typeof _=="function"?_:Zt(+_),n=null,u):e},u.y0=function(_){return arguments.length?(e=typeof _=="function"?_:Zt(+_),u):e},u.y1=function(_){return arguments.length?(n=_==null?null:typeof _=="function"?_:Zt(+_),u):n},u.lineX0=u.lineY0=function(){return a().x(t).y(e)},u.lineY1=function(){return a().x(t).y(n)},u.lineX1=function(){return a().x(i).y(e)},u.defined=function(_){return arguments.length?(s=typeof _=="function"?_:Zt(!!_),u):s},u.curve=function(_){return arguments.length?(c=_,o!=null&&(d=c(o)),u):c},u.context=function(_){return arguments.length?(_==null?o=d=null:d=c(o=_),u):o},u}const Gce={draw(t,e){const n=Of(e/Ep);t.moveTo(n,0),t.arc(0,0,n,0,Uq)}};function Vce(t,e){let n=null,i=gE(s);t=typeof t=="function"?t:Zt(t||Gce),e=typeof e=="function"?e:Zt(e===void 0?64:+e);function s(){let o;if(n||(n=o=i()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),o)return n=null,o+""||null}return s.type=function(o){return arguments.length?(t=typeof o=="function"?o:Zt(o),s):t},s.size=function(o){return arguments.length?(e=typeof o=="function"?o:Zt(+o),s):e},s.context=function(o){return arguments.length?(n=o==null?null:o,s):n},s}function od(){}function sv(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function _E(t){this._context=t}_E.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:sv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:sv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Wce(t){return new _E(t)}function Hq(t){this._context=t}Hq.prototype={areaStart:od,areaEnd:od,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:sv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Hce(t){return new Hq(t)}function Yq(t){this._context=t}Yq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:sv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Yce(t){return new Yq(t)}function Xq(t,e){this._basis=new _E(t),this._beta=e}Xq.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i=t[0],s=e[0],o=t[n]-i,c=e[n]-s,d=-1,f;++d<=n;)f=d/n,this._basis.point(this._beta*t[d]+(1-this._beta)*(i+f*o),this._beta*e[d]+(1-this._beta)*(s+f*c));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const Xce=function t(e){function n(i){return e===1?new _E(i):new Xq(i,e)}return n.beta=function(i){return t(+i)},n}(.85);function rv(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function QO(t,e){this._context=t,this._k=(1-e)/6}QO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:rv(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:rv(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Kce=function t(e){function n(i){return new QO(i,e)}return n.tension=function(i){return t(+i)},n}(0);function ZO(t,e){this._context=t,this._k=(1-e)/6}ZO.prototype={areaStart:od,areaEnd:od,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:rv(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Jce=function t(e){function n(i){return new ZO(i,e)}return n.tension=function(i){return t(+i)},n}(0);function eM(t,e){this._context=t,this._k=(1-e)/6}eM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:rv(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Qce=function t(e){function n(i){return new eM(i,e)}return n.tension=function(i){return t(+i)},n}(0);function tM(t,e,n){var i=t._x1,s=t._y1,o=t._x2,c=t._y2;if(t._l01_a>Ai){var d=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,f=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*d-t._x0*t._l12_2a+t._x2*t._l01_2a)/f,s=(s*d-t._y0*t._l12_2a+t._y2*t._l01_2a)/f}if(t._l23_a>Ai){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,a=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*u+t._x1*t._l23_2a-e*t._l12_2a)/a,c=(c*u+t._y1*t._l23_2a-n*t._l12_2a)/a}t._context.bezierCurveTo(i,s,o,c,t._x2,t._y2)}function Kq(t,e){this._context=t,this._alpha=e}Kq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:tM(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Zce=function t(e){function n(i){return e?new Kq(i,e):new QO(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function Jq(t,e){this._context=t,this._alpha=e}Jq.prototype={areaStart:od,areaEnd:od,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:tM(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const ede=function t(e){function n(i){return e?new Jq(i,e):new ZO(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function Qq(t,e){this._context=t,this._alpha=e}Qq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:tM(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const tde=function t(e){function n(i){return e?new Qq(i,e):new eM(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function Zq(t){this._context=t}Zq.prototype={areaStart:od,areaEnd:od,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function nde(t){return new Zq(t)}function PD(t){return t<0?-1:1}function DD(t,e,n){var i=t._x1-t._x0,s=e-t._x1,o=(t._y1-t._y0)/(i||s<0&&-0),c=(n-t._y1)/(s||i<0&&-0),d=(o*s+c*i)/(i+s);return(PD(o)+PD(c))*Math.min(Math.abs(o),Math.abs(c),.5*Math.abs(d))||0}function jD(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Ux(t,e,n){var i=t._x0,s=t._y0,o=t._x1,c=t._y1,d=(o-i)/3;t._context.bezierCurveTo(i+d,s+d*e,o-d,c-d*n,o,c)}function av(t){this._context=t}av.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ux(this,this._t0,jD(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Ux(this,jD(this,n=DD(this,t,e)),n);break;default:Ux(this,this._t0,n=DD(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function e7(t){this._context=new t7(t)}(e7.prototype=Object.create(av.prototype)).point=function(t,e){av.prototype.point.call(this,e,t)};function t7(t){this._context=t}t7.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,s,o){this._context.bezierCurveTo(e,t,i,n,o,s)}};function ide(t){return new av(t)}function sde(t){return new e7(t)}function n7(t){this._context=t}n7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var i=UD(t),s=UD(e),o=0,c=1;c<n;++o,++c)this._context.bezierCurveTo(i[0][o],s[0][o],i[1][o],s[1][o],t[c],e[c]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function UD(t){var e,n=t.length-1,i,s=new Array(n),o=new Array(n),c=new Array(n);for(s[0]=0,o[0]=2,c[0]=t[0]+2*t[1],e=1;e<n-1;++e)s[e]=1,o[e]=4,c[e]=4*t[e]+2*t[e+1];for(s[n-1]=2,o[n-1]=7,c[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)i=s[e]/o[e-1],o[e]-=i,c[e]-=i*c[e-1];for(s[n-1]=c[n-1]/o[n-1],e=n-2;e>=0;--e)s[e]=(c[e]-s[e+1])/o[e];for(o[n-1]=(t[n]+s[n-1])/2,e=0;e<n-1;++e)o[e]=2*t[e+1]-s[e+1];return[s,o]}function rde(t){return new n7(t)}function yE(t,e){this._context=t,this._t=e}yE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function ade(t){return new yE(t,.5)}function ode(t){return new yE(t,0)}function lde(t){return new yE(t,1)}function Bh(t,e,n){this.k=t,this.x=e,this.y=n}Bh.prototype={constructor:Bh,scale:function(t){return t===1?this:new Bh(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Bh(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new Bh(1,0,0);Bh.prototype;function Db(t){return t.length}function kh(t){const e=new Map(t.map((n,i)=>[n,i]));return n=>e.get(n)}function k0({start:t,step:e,stop:n}){return(n-t)/e}function cde(t,e){return rO({maxbins:t,extent:e})}function dde(t,e){return cde(t.bins,e)}function fde(t){let e=[],n=t.start,i=n+t.step;for(;i<=t.stop;)e.push({binStart:n,binEnd:i}),n=i,i+=t.step;return e}function ude(t,e){const n=hde(t,e);return i=>[n(i[0]),n(i[1])]}function hde(t,e){const s=pde({domain:t,range:[0,e]});return o=>{const c=s(o);return Math.floor(c)}}function pde({domain:t,range:e}){const n={x:t[0],y:e[0]},i={x:t[1],y:e[1]},s=i.y-n.y,o=i.x-n.x;if(o<=0)throw Error("divide by 0 error, pick a non-zero domain");const c=s/o,d=i.y-c*i.x;return f=>c*f+d}function gde(t,...e){return new Map(Array.from(t.entries()).filter(([n,i])=>!e.includes(n)))}function _de({start:t,stop:e},n){return(e-t)/n}function yde(t){return t.replace(/\s+/g," ").trim()}class mde{constructor(){Vn(this,"views");this.views=[]}add(e){this.views.findIndex(i=>i==e)===-1&&this.views.push(e)}get passive(){return this.views.filter(e=>!e.isActive)}get active(){return this.views.filter(e=>e.isActive)[0]}get size(){return this.views.length}forEach(e){this.views.forEach(e)}}class i7{constructor(e){Vn(this,"falcon");Vn(this,"onChangeListeners");Vn(this,"isActive");this.falcon=e,this.onChangeListeners=new Set,this.isActive=!1}onChange(e){return this.onChangeListeners.add(e),()=>this.onChangeListeners.delete(e)}signalOnChange(e){this.onChangeListeners.forEach(n=>{n(e)})}makeActiveView(){this.falcon.views.forEach(e=>{e.isActive=!1}),this.isActive=!0}}class xc extends i7{constructor(n){super(n);Vn(this,"state");this.state={total:null,filter:null}}async all(){const n=await this.falcon.db.length();this.state.total=n,this.state.filter=n,this.signalOnChange(this.state)}async countContinuous1DIndex(n){const i=await this.falcon.index.get(this);if(i===void 0)throw Error("Cannot count for undefined index in 0D");if(!n)this.state.filter=i.noFilter.get(0);else{const s=i.filter.get(n[0]),o=i.filter.get(n[1]);this.state.filter=o-s}this.signalOnChange(this.state)}async countCategorical1DIndex(n,i){const s=await this.falcon.index.get(this);if(s===void 0)throw Error("Cannot count for undefined index in 0D");if(n===void 0)this.state.filter=s.noFilter.get(0);else{const o=kh(i);let c=0;for(const d of n){const f=o(d);c+=s.filter.get(f)}this.state.filter=c}this.signalOnChange(this.state)}}class Bc extends i7{constructor(n,i){super(n);Vn(this,"dimension");Vn(this,"state");Vn(this,"toPixels");Vn(this,"lastFilter");this.dimension=i,this.state={total:null,filter:null,bin:null},this.toPixels=()=>[0,0]}async createBins(){var n;((n=this.dimension)==null?void 0:n.range)===void 0&&(this.dimension.range=await this.falcon.db.range(this.dimension)),this.dimension.type==="continuous"&&(this.toPixels=ude(this.dimension.range,this.dimension.resolution),this.dimension.binConfig=dde(this.dimension,this.dimension.range)),this.dimension.type==="continuous"?this.state.bin=fde(this.dimension.binConfig):this.state.bin=this.dimension.range}async all(){await this.createBins();const n=await this.falcon.db.histogramView1D(this);this.state.total=n.noFilter.data,this.state.filter=n.filter.data,this.signalOnChange(this.state)}async prefetch(){this.isActive||(this.makeActiveView(),this.falcon.index=this.falcon.db.falconIndexView1D(this,this.falcon.views.passive,this.falcon.passiveFilters))}async select(n,i=!0){if(await this.prefetch(),n)if(this.dimension.type==="continuous"){if(this.lastFilter&&this.lastFilter[0]===n[0]&&this.lastFilter[1]===n[1])return;this.falcon.filters.set(this.dimension,n);let o=i?this.toPixels(n):n;o[1]>this.dimension.resolution&&(o[1]=this.dimension.resolution),o[0]>this.dimension.resolution&&(o[0]=this.dimension.resolution),o[1]<0&&(o[1]=0),o[0]<0&&(o[0]=0),this.falcon.views.passive.forEach(async c=>{await c.countContinuous1DIndex(o)}),this.lastFilter=n}else this.falcon.filters.set(this.dimension,n),this.falcon.views.passive.forEach(async s=>{await s.countCategorical1DIndex(n,this.dimension.range)}),this.lastFilter=n;else if(this.dimension.type==="continuous"){if(this.lastFilter===n)return;this.falcon.filters.delete(this.dimension),this.falcon.views.passive.forEach(async o=>{await o.countContinuous1DIndex()}),this.lastFilter=n}else this.falcon.filters.delete(this.dimension),this.falcon.views.passive.forEach(async s=>{await s.countCategorical1DIndex()}),this.lastFilter=n}async countContinuous1DIndex(n){const i=await this.falcon.index.get(this);if(i===void 0)throw Error("Index not defined for 1D passive view");if(!n)this.state.filter=i.noFilter.data;else{const s=i.filter.slice(n[0],null),c=i.filter.slice(n[1],null).sub(s);this.state.filter=c.data}this.signalOnChange(this.state)}async countCategorical1DIndex(n,i){const s=await this.falcon.index.get(this);if(s===void 0)throw Error("Index not defined for 1D passive view");if(!n)this.state.filter=s.noFilter.data;else{let o;this.dimension.type==="continuous"?o=Li.allocCounts(k0(this.dimension.binConfig)):o=Li.allocCounts(this.dimension.range.length),o.data.fill(0);const c=kh(i);for(const d of n){const f=c(d),u=s.filter.slice(f,null);o.addOverride(u)}this.state.filter=o.data}this.signalOnChange(this.state)}}class wde{constructor(e,n){Vn(this,"table");Vn(this,"nameMap");this.table=e,this.nameMap=n}async length(){const e=await this.query(`SELECT count(*) AS _count
       FROM ${this.table}`),{_count:n}=this.getASValues(e);return n}async range(e){const n=this.getName(e);if(e.type==="continuous"){const i=await this.query(`SELECT MIN(${n}) AS _min, MAX(${n}) AS _max
        FROM ${this.table}`),{_min:s,_max:o}=this.getASValues(i);return[s,o]}else{const i=await this.query(`SELECT DISTINCT "${n}" AS _unique FROM ${this.table}`);let s=[];for(const{_unique:o}of i)s.push(o);return s}}async histogramView1D(e,n){let i,s,o=a=>a;if(e.dimension.type==="continuous"){const a=e.dimension.binConfig;i=k0(a),s=this.binSQL(e.dimension,a)}else i=Db(e.dimension.range),s=this.binSQLCategorical(e.dimension,e.dimension.range),o=kh(e.dimension.range);const c=Li.allocCounts(i),d=n&&n.size>0,f=d?Li.allocCounts(i):c,u=await this.query(`SELECT ${s.select}
       AS binIndex, count(*) AS binCount
       FROM ${this.table} 
       WHERE ${s.where} 
       GROUP BY binIndex`);for(const{binIndex:a,binCount:_}of u)c.set(o(a),_);if(d){const a=[...this.filtersToSQLWhereClauses(n).values()].join(" AND "),_=await this.query(`SELECT ${s.select}
         AS binIndex, count(*) AS binCount
         FROM ${this.table}
         WHERE ${s.where} AND ${a} 
         GROUP BY key`);for(const{binIndex:w,binCount:m}of _)f.set(w,m)}return{filter:f,noFilter:c}}falconIndexView1D(e,n,i){const s=performance.now(),o=this.filtersToSQLWhereClauses(i),c=new Map;if(e.dimension.type==="continuous"){const d=this.binSQLPixel(e.dimension,e.dimension.binConfig,e.dimension.resolution),f=e.dimension.resolution+1,u=[];n.forEach(a=>{const _=this.cubeSlice1DContinuous(a,o,d,f);u.push(_),c.set(a,_)}),Promise.all(u).then(()=>{console.info(`Build index: ${performance.now()-s}ms`)})}else{const d=this.binSQLCategorical(e.dimension,e.dimension.range),f=Db(e.dimension.range),u=kh(e.dimension.range),a=[];n.forEach(_=>{const w=this.cubeSlice1DCategorical(_,o,d,u,f);a.push(w),c.set(_,w)}),Promise.all(a).then(()=>{console.info(`Build index: ${performance.now()-s}ms`)})}return c}async cubeSlice1DCategorical(e,n,i,s,o){let c,d;const f=new Map(n);e instanceof xc||e instanceof Bc&&f.delete(e.dimension);const u=[...f.values()].join(" AND ");let a="",_=l=>l;const w=`CASE WHEN ${i.where} 
     THEN ${i.select}
     ELSE -1 END AS "keyActive",
     count(*) AS cnt`;if(e instanceof xc)d=Li.allocCounts(o),c=Li.allocCounts(1,[1]),a=`SELECT ${w}
         FROM ${this.table} 
         ${u?`WHERE ${u}`:""} 
         GROUP BY "keyActive"`;else if(e instanceof Bc){let l,T;if(e.dimension.type==="continuous"){const b=e.dimension.binConfig;T=k0(b),l=this.binSQL(e.dimension,e.dimension.binConfig)}else _=kh(e.dimension.range),T=Db(e.dimension.range),l=this.binSQLCategorical(e.dimension,e.dimension.range);d=Li.allocCounts(o*T,[o,T]),c=Li.allocCounts(T,[T]),a=`SELECT ${w}, 
       ${l.select} AS key 
       FROM ${this.table} 
       WHERE ${l.where} ${u?`AND ${u}`:""} 
       GROUP BY "keyActive", key`}else throw Error("no 2d view here");const m=await this.query(a);if(e instanceof xc)for(const{keyActive:l,cnt:T}of m){const b=s(l);b>=0&&d.set(b,T),c.increment([0],T)}else if(e instanceof Bc)for(const{keyActive:l,key:T,cnt:b}of m){const S=s(l),x=_(T);S>=0&&d.set(S,x,b),c.increment([x],b)}else throw Error();return{noFilter:c,filter:d}}async cubeSlice1DContinuous(e,n,i,s){let o,c;const d=new Map(n);e instanceof xc||e instanceof Bc&&d.delete(e.dimension);const f=[...d.values()].join(" AND ");let u,a=m=>m;const _=`CASE WHEN ${i.where} 
     THEN ${i.select}
     ELSE -1 END AS "keyActive",
     count(*) AS cnt`;if(e instanceof xc)c=Li.allocCumulative(s),o=Li.allocCounts(1,[1]),u=`SELECT ${_}
         FROM ${this.table} 
         ${f?`WHERE ${f}`:""} 
         GROUP BY "keyActive"`;else if(e instanceof Bc){let m,l;if(e.dimension.type==="continuous"){const T=e.dimension.binConfig;m=this.binSQL(e.dimension,T),l=k0(T)}else m=this.binSQLCategorical(e.dimension,e.dimension.range),l=Db(e.dimension.range),a=kh(e.dimension.range);c=Li.allocCumulative(s*l,[s,l]),o=Li.allocCounts(l,[l]),u=`SELECT ${_}, 
       ${m.select} AS key 
       FROM ${this.table} 
       WHERE ${m.where} ${f?`AND ${f}`:""} 
       GROUP BY "keyActive", key`}else throw Error("only 0D and 1D views");const w=await this.query(u);if(e instanceof xc){for(const{keyActive:m,cnt:l}of w)m>=0&&c.set(m,l),o.increment([0],l);c.cumulativeSum()}else if(e instanceof Bc){for(const{keyActive:m,key:l,cnt:T}of w){const b=a(l);m>=0&&c.set(m,b,T),o.increment([b],T)}for(let m=0;m<c.shape[1];m++)c.slice(null,m).cumulativeSum()}else throw Error("only 0D and 1D views");return{filter:c,noFilter:o}}getASValues(e){return e[Symbol.iterator]().next().value}getName(e){var n,i;return(i=(n=this.nameMap)==null?void 0:n.get(e.name))!=null?i:e.name}binSQLCategorical(e,n){const i=this.getName(e),s=`"${i}"`,o=$D(i,n);return{select:s,where:o}}binSQL(e,n){const i=this.getName(e),s=`cast((${i} - ${n.start}) / ${n.step} as int)`,o=`${i} BETWEEN ${n.start} AND ${n.stop}`;return{select:s,where:o}}filtersToSQLWhereClauses(e){const n=new Map;for(const[i,s]of e){const o=this.getName(i);let c;i.type==="continuous"?c=`${o} BETWEEN ${s[0]} AND ${s[1]}`:c=$D(o,s),n.set(i,c)}return n}binSQLPixel(e,n,i){const s=i!==void 0?_de(n,i):n.step,o=n.start;return this.binSQL(e,{...n,start:o,step:s})}}function $D(t,e){let n=`"${t}" in (`;return e.forEach(s=>{s!==null&&(n+=`'${s}', `)}),n+=")",e.findIndex(s=>s===null)!==-1&&(n+=` OR "${t}" IS NULL`),n}const bde=new TextDecoder("utf-8"),Hk=t=>bde.decode(t),Tde=new TextEncoder,nM=t=>Tde.encode(t),[iDe,vde]=(()=>{const t=()=>{throw new Error("BigInt is not available in this environment")};function e(){throw t()}return e.asIntN=()=>{throw t()},e.asUintN=()=>{throw t()},typeof BigInt<"u"?[BigInt,!0]:[e,!1]})(),[s7,sDe]=(()=>{const t=()=>{throw new Error("BigInt64Array is not available in this environment")};class e{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}}return typeof BigInt64Array<"u"?[BigInt64Array,!0]:[e,!1]})(),[iM,rDe]=(()=>{const t=()=>{throw new Error("BigUint64Array is not available in this environment")};class e{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}}return typeof BigUint64Array<"u"?[BigUint64Array,!0]:[e,!1]})(),Ede=t=>typeof t=="number",r7=t=>typeof t=="boolean",Xn=t=>typeof t=="function",qs=t=>t!=null&&Object(t)===t,au=t=>qs(t)&&Xn(t.then),wm=t=>qs(t)&&Xn(t[Symbol.iterator]),dg=t=>qs(t)&&Xn(t[Symbol.asyncIterator]),Yk=t=>qs(t)&&qs(t.schema),a7=t=>qs(t)&&"done"in t&&"value"in t,o7=t=>qs(t)&&Xn(t.stat)&&Ede(t.fd),l7=t=>qs(t)&&sM(t.body),mE=t=>"_getDOMStream"in t&&"_getNodeStream"in t,Sde=t=>qs(t)&&Xn(t.abort)&&Xn(t.getWriter)&&!mE(t),sM=t=>qs(t)&&Xn(t.cancel)&&Xn(t.getReader)&&!mE(t),xde=t=>qs(t)&&Xn(t.end)&&Xn(t.write)&&r7(t.writable)&&!mE(t),c7=t=>qs(t)&&Xn(t.read)&&Xn(t.pipe)&&r7(t.readable)&&!mE(t),Bde=t=>qs(t)&&Xn(t.clear)&&Xn(t.bytes)&&Xn(t.position)&&Xn(t.setPosition)&&Xn(t.capacity)&&Xn(t.getBufferIdentifier)&&Xn(t.createLong),rM=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function kde(t){const e=t[0]?[t[0]]:[];let n,i,s,o;for(let c,d,f=0,u=0,a=t.length;++f<a;){if(c=e[u],d=t[f],!c||!d||c.buffer!==d.buffer||d.byteOffset<c.byteOffset){d&&(e[++u]=d);continue}if({byteOffset:n,byteLength:s}=c,{byteOffset:i,byteLength:o}=d,n+s<i||i+o<n){d&&(e[++u]=d);continue}e[u]=new Uint8Array(c.buffer,n,i-n+o)}return e}function zD(t,e,n=0,i=e.byteLength){const s=t.byteLength,o=new Uint8Array(t.buffer,t.byteOffset,s),c=new Uint8Array(e.buffer,e.byteOffset,Math.min(i,s));return o.set(c,n),t}function qo(t,e){const n=kde(t),i=n.reduce((a,_)=>a+_.byteLength,0);let s,o,c,d=0,f=-1;const u=Math.min(e||Number.POSITIVE_INFINITY,i);for(const a=n.length;++f<a;){if(s=n[f],o=s.subarray(0,Math.min(s.length,u-d)),u<=d+o.length){o.length<s.length?n[f]=s.subarray(o.length):o.length===s.length&&f++,c?zD(c,o,d):c=o;break}zD(c||(c=new Uint8Array(u)),o,d),d+=o.length}return[c||new Uint8Array(0),n.slice(f),i-(c?c.byteLength:0)]}function hn(t,e){let n=a7(e)?e.value:e;return n instanceof t?t===Uint8Array?new t(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=nM(n)),n instanceof ArrayBuffer?new t(n):n instanceof rM?new t(n):Bde(n)?hn(t,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new t(0):new t(n.buffer,n.byteOffset,n.byteLength/t.BYTES_PER_ELEMENT):t.from(n)):new t(0)}const zg=t=>hn(Int32Array,t),Yt=t=>hn(Uint8Array,t),Xk=t=>(t.next(),t);function*Ide(t,e){const n=function*(s){yield s},i=typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof rM?n(e):wm(e)?e:n(e);return yield*Xk(function*(s){let o=null;do o=s.next(yield hn(t,o));while(!o.done)}(i[Symbol.iterator]())),new t}const Fde=t=>Ide(Uint8Array,t);function d7(t,e){return Pn(this,arguments,function*(){if(au(e))return yield Be(yield Be(yield*qc(us(d7(t,yield Be(e))))));const i=function(c){return Pn(this,arguments,function*(){yield yield Be(yield Be(c))})},s=function(c){return Pn(this,arguments,function*(){yield Be(yield*qc(us(Xk(function*(d){let f=null;do f=d.next(yield f==null?void 0:f.value);while(!f.done)}(c[Symbol.iterator]())))))})},o=typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof rM?i(e):wm(e)?s(e):dg(e)?e:i(e);return yield Be(yield*qc(us(Xk(function(c){return Pn(this,arguments,function*(){let d=null;do d=yield Be(c.next(yield yield Be(hn(t,d))));while(!d.done)})}(o[Symbol.asyncIterator]()))))),yield Be(new t)})}const Ode=t=>d7(Uint8Array,t);function aM(t,e,n){if(t!==0){n=n.slice(0,e+1);for(let i=-1;++i<=e;)n[i]+=t}return n}function Mde(t,e){let n=0;const i=t.length;if(i!==e.length)return!1;if(i>0)do if(t[n]!==e[n])return!1;while(++n<i);return!0}const Ir={fromIterable(t){return jb(Ade(t))},fromAsyncIterable(t){return jb(Nde(t))},fromDOMStream(t){return jb(Cde(t))},fromNodeStream(t){return jb(Lde(t))},toDOMStream(t,e){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(t,e){throw new Error('"toNodeStream" not available in this environment')}},jb=t=>(t.next(),t);function*Ade(t){let e,n=!1,i=[],s,o,c,d=0;function f(){return o==="peek"?qo(i,c)[0]:([s,i,d]=qo(i,c),s)}({cmd:o,size:c}=yield null);const u=Fde(t)[Symbol.iterator]();try{do if({done:e,value:s}=Number.isNaN(c-d)?u.next():u.next(c-d),!e&&s.byteLength>0&&(i.push(s),d+=s.byteLength),e||c<=d)do({cmd:o,size:c}=yield f());while(c<d);while(!e)}catch(a){(n=!0)&&typeof u.throw=="function"&&u.throw(a)}finally{n===!1&&typeof u.return=="function"&&u.return(null)}return null}function Nde(t){return Pn(this,arguments,function*(){let n,i=!1,s=[],o,c,d,f=0;function u(){return c==="peek"?qo(s,d)[0]:([o,s,f]=qo(s,d),o)}({cmd:c,size:d}=yield yield Be(null));const a=Ode(t)[Symbol.asyncIterator]();try{do if({done:n,value:o}=Number.isNaN(d-f)?yield Be(a.next()):yield Be(a.next(d-f)),!n&&o.byteLength>0&&(s.push(o),f+=o.byteLength),n||d<=f)do({cmd:c,size:d}=yield yield Be(u()));while(d<f);while(!n)}catch(_){(i=!0)&&typeof a.throw=="function"&&(yield Be(a.throw(_)))}finally{i===!1&&typeof a.return=="function"&&(yield Be(a.return(new Uint8Array(0))))}return yield Be(null)})}function Cde(t){return Pn(this,arguments,function*(){let n=!1,i=!1,s=[],o,c,d,f=0;function u(){return c==="peek"?qo(s,d)[0]:([o,s,f]=qo(s,d),o)}({cmd:c,size:d}=yield yield Be(null));const a=new Rde(t);try{do if({done:n,value:o}=Number.isNaN(d-f)?yield Be(a.read()):yield Be(a.read(d-f)),!n&&o.byteLength>0&&(s.push(Yt(o)),f+=o.byteLength),n||d<=f)do({cmd:c,size:d}=yield yield Be(u()));while(d<f);while(!n)}catch(_){(i=!0)&&(yield Be(a.cancel(_)))}finally{i===!1?yield Be(a.cancel()):t.locked&&a.releaseLock()}return yield Be(null)})}class Rde{constructor(e){this.source=e,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(e){return ye(this,void 0,void 0,function*(){const{reader:n,source:i}=this;n&&(yield n.cancel(e).catch(()=>{})),i&&i.locked&&this.releaseLock()})}read(e){return ye(this,void 0,void 0,function*(){if(e===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Yt(n)),n})}}const $x=(t,e)=>{const n=s=>i([e,s]);let i;return[e,n,new Promise(s=>(i=s)&&t.once(e,n))]};function Lde(t){return Pn(this,arguments,function*(){const n=[];let i="error",s=!1,o=null,c,d,f=0,u=[],a;function _(){return c==="peek"?qo(u,d)[0]:([a,u,f]=qo(u,d),a)}if({cmd:c,size:d}=yield yield Be(null),t.isTTY)return yield yield Be(new Uint8Array(0)),yield Be(null);try{n[0]=$x(t,"end"),n[1]=$x(t,"error");do{if(n[2]=$x(t,"readable"),[i,o]=yield Be(Promise.race(n.map(m=>m[2]))),i==="error")break;if((s=i==="end")||(Number.isFinite(d-f)?(a=Yt(t.read(d-f)),a.byteLength<d-f&&(a=Yt(t.read()))):a=Yt(t.read()),a.byteLength>0&&(u.push(a),f+=a.byteLength)),s||d<=f)do({cmd:c,size:d}=yield yield Be(_()));while(d<f)}while(!s)}finally{yield Be(w(n,i==="error"?o:null))}return yield Be(null);function w(m,l){return a=u=null,new Promise((T,b)=>{for(const[S,x]of m)t.off(S,x);try{const S=t.destroy;S&&S.call(t,l),l=void 0}catch(S){l=S||l}finally{l!=null?b(l):T()}})}})}var fr;(function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"})(fr||(fr={}));var yr;(function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"})(yr||(yr={}));var Cs;(function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"})(Cs||(Cs={}));var Jl;(function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"})(Jl||(Jl={}));var Xt;(function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"})(Xt||(Xt={}));var ld;(function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(ld||(ld={}));var tn;(function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"})(tn||(tn={}));var Q;(function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth"})(Q||(Q={}));var bl;(function(t){t[t.OFFSET=0]="OFFSET",t[t.DATA=1]="DATA",t[t.VALIDITY=2]="VALIDITY",t[t.TYPE=3]="TYPE"})(bl||(bl={}));const Pde=void 0;function _y(t){if(t===null)return"null";if(t===Pde)return"undefined";switch(typeof t){case"number":return`${t}`;case"bigint":return`${t}`;case"string":return`"${t}"`}return typeof t[Symbol.toPrimitive]=="function"?t[Symbol.toPrimitive]("string"):ArrayBuffer.isView(t)?t instanceof BigInt64Array||t instanceof BigUint64Array?`[${[...t].map(e=>_y(e))}]`:`[${t}]`:ArrayBuffer.isView(t)?`[${t}]`:JSON.stringify(t,(e,n)=>typeof n=="bigint"?`${n}`:n)}const Dde=Symbol.for("isArrowBigNum");function $a(t,...e){return e.length===0?Object.setPrototypeOf(hn(this.TypedArray,t),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(t,...e),this.constructor.prototype)}$a.prototype[Dde]=!0;$a.prototype.toJSON=function(){return`"${qf(this)}"`};$a.prototype.valueOf=function(){return f7(this)};$a.prototype.toString=function(){return qf(this)};$a.prototype[Symbol.toPrimitive]=function(t="default"){switch(t){case"number":return f7(this);case"string":return qf(this);case"default":return Kk(this)}return qf(this)};function Gh(...t){return $a.apply(this,t)}function Vh(...t){return $a.apply(this,t)}function yy(...t){return $a.apply(this,t)}Object.setPrototypeOf(Gh.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Vh.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(yy.prototype,Object.create(Uint32Array.prototype));Object.assign(Gh.prototype,$a.prototype,{constructor:Gh,signed:!0,TypedArray:Int32Array,BigIntArray:s7});Object.assign(Vh.prototype,$a.prototype,{constructor:Vh,signed:!1,TypedArray:Uint32Array,BigIntArray:iM});Object.assign(yy.prototype,$a.prototype,{constructor:yy,signed:!0,TypedArray:Uint32Array,BigIntArray:iM});function f7(t){const{buffer:e,byteOffset:n,length:i,signed:s}=t,o=new iM(e,n,i),c=s&&o[o.length-1]&BigInt(1)<<BigInt(63);let d=BigInt(c?1:0),f=BigInt(0);if(c){for(const u of o)d+=~u*(BigInt(1)<<BigInt(32)*f++);d*=BigInt(-1)}else for(const u of o)d+=u*(BigInt(1)<<BigInt(32)*f++);return d}let qf,Kk;vde?(Kk=t=>t.byteLength===8?new t.BigIntArray(t.buffer,t.byteOffset,1)[0]:zx(t),qf=t=>t.byteLength===8?`${new t.BigIntArray(t.buffer,t.byteOffset,1)[0]}`:zx(t)):(qf=zx,Kk=qf);function zx(t){let e="";const n=new Uint32Array(2);let i=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2);const s=new Uint32Array((i=new Uint16Array(i).reverse()).buffer);let o=-1;const c=i.length-1;do{for(n[0]=i[o=0];o<c;)i[o++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+i[o];i[o]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,e=`${n[0]}${e}`}while(s[0]||s[1]||s[2]||s[3]);return e||"0"}class oM{static new(e,n){switch(n){case!0:return new Gh(e);case!1:return new Vh(e)}switch(e.constructor){case Int8Array:case Int16Array:case Int32Array:case s7:return new Gh(e)}return e.byteLength===16?new yy(e):new Vh(e)}static signed(e){return new Gh(e)}static unsigned(e){return new Vh(e)}static decimal(e){return new yy(e)}constructor(e,n){return oM.new(e,n)}}var u7,h7,p7,g7,_7,y7,m7,w7,b7,T7,v7,E7,S7,x7,B7,k7,I7,F7,O7;class tt{static isNull(e){return(e==null?void 0:e.typeId)===Q.Null}static isInt(e){return(e==null?void 0:e.typeId)===Q.Int}static isFloat(e){return(e==null?void 0:e.typeId)===Q.Float}static isBinary(e){return(e==null?void 0:e.typeId)===Q.Binary}static isUtf8(e){return(e==null?void 0:e.typeId)===Q.Utf8}static isBool(e){return(e==null?void 0:e.typeId)===Q.Bool}static isDecimal(e){return(e==null?void 0:e.typeId)===Q.Decimal}static isDate(e){return(e==null?void 0:e.typeId)===Q.Date}static isTime(e){return(e==null?void 0:e.typeId)===Q.Time}static isTimestamp(e){return(e==null?void 0:e.typeId)===Q.Timestamp}static isInterval(e){return(e==null?void 0:e.typeId)===Q.Interval}static isList(e){return(e==null?void 0:e.typeId)===Q.List}static isStruct(e){return(e==null?void 0:e.typeId)===Q.Struct}static isUnion(e){return(e==null?void 0:e.typeId)===Q.Union}static isFixedSizeBinary(e){return(e==null?void 0:e.typeId)===Q.FixedSizeBinary}static isFixedSizeList(e){return(e==null?void 0:e.typeId)===Q.FixedSizeList}static isMap(e){return(e==null?void 0:e.typeId)===Q.Map}static isDictionary(e){return(e==null?void 0:e.typeId)===Q.Dictionary}static isDenseUnion(e){return tt.isUnion(e)&&e.mode===yr.Dense}static isSparseUnion(e){return tt.isUnion(e)&&e.mode===yr.Sparse}get typeId(){return Q.NONE}}u7=Symbol.toStringTag;tt[u7]=(t=>(t.children=null,t.ArrayType=Array,t[Symbol.toStringTag]="DataType"))(tt.prototype);class cd extends tt{toString(){return"Null"}get typeId(){return Q.Null}}h7=Symbol.toStringTag;cd[h7]=(t=>t[Symbol.toStringTag]="Null")(cd.prototype);class dd extends tt{constructor(e,n){super(),this.isSigned=e,this.bitWidth=n}get typeId(){return Q.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}p7=Symbol.toStringTag;dd[p7]=(t=>(t.isSigned=null,t.bitWidth=null,t[Symbol.toStringTag]="Int"))(dd.prototype);class my extends dd{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}Object.defineProperty(my.prototype,"ArrayType",{value:Int32Array});class wy extends tt{constructor(e){super(),this.precision=e}get typeId(){return Q.Float}get ArrayType(){switch(this.precision){case Cs.HALF:return Uint16Array;case Cs.SINGLE:return Float32Array;case Cs.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}g7=Symbol.toStringTag;wy[g7]=(t=>(t.precision=null,t[Symbol.toStringTag]="Float"))(wy.prototype);class ov extends tt{constructor(){super()}get typeId(){return Q.Binary}toString(){return"Binary"}}_7=Symbol.toStringTag;ov[_7]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Binary"))(ov.prototype);class lv extends tt{constructor(){super()}get typeId(){return Q.Utf8}toString(){return"Utf8"}}y7=Symbol.toStringTag;lv[y7]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Utf8"))(lv.prototype);class cv extends tt{constructor(){super()}get typeId(){return Q.Bool}toString(){return"Bool"}}m7=Symbol.toStringTag;cv[m7]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Bool"))(cv.prototype);class dv extends tt{constructor(e,n,i=128){super(),this.scale=e,this.precision=n,this.bitWidth=i}get typeId(){return Q.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}w7=Symbol.toStringTag;dv[w7]=(t=>(t.scale=null,t.precision=null,t.ArrayType=Uint32Array,t[Symbol.toStringTag]="Decimal"))(dv.prototype);class fv extends tt{constructor(e){super(),this.unit=e}get typeId(){return Q.Date}toString(){return`Date${(this.unit+1)*32}<${Jl[this.unit]}>`}}b7=Symbol.toStringTag;fv[b7]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Date"))(fv.prototype);class by extends tt{constructor(e,n){super(),this.unit=e,this.bitWidth=n}get typeId(){return Q.Time}toString(){return`Time${this.bitWidth}<${Xt[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}T7=Symbol.toStringTag;by[T7]=(t=>(t.unit=null,t.bitWidth=null,t[Symbol.toStringTag]="Time"))(by.prototype);class uv extends tt{constructor(e,n){super(),this.unit=e,this.timezone=n}get typeId(){return Q.Timestamp}toString(){return`Timestamp<${Xt[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}v7=Symbol.toStringTag;uv[v7]=(t=>(t.unit=null,t.timezone=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Timestamp"))(uv.prototype);class hv extends tt{constructor(e){super(),this.unit=e}get typeId(){return Q.Interval}toString(){return`Interval<${ld[this.unit]}>`}}E7=Symbol.toStringTag;hv[E7]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Interval"))(hv.prototype);class pv extends tt{constructor(e){super(),this.children=[e]}get typeId(){return Q.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}S7=Symbol.toStringTag;pv[S7]=(t=>(t.children=null,t[Symbol.toStringTag]="List"))(pv.prototype);class cs extends tt{constructor(e){super(),this.children=e}get typeId(){return Q.Struct}toString(){return`Struct<{${this.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}x7=Symbol.toStringTag;cs[x7]=(t=>(t.children=null,t[Symbol.toStringTag]="Struct"))(cs.prototype);class gv extends tt{constructor(e,n,i){super(),this.mode=e,this.children=i,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((s,o,c)=>(s[o]=c)&&s||s,Object.create(null))}get typeId(){return Q.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(e=>`${e.type}`).join(" | ")}>`}}B7=Symbol.toStringTag;gv[B7]=(t=>(t.mode=null,t.typeIds=null,t.children=null,t.typeIdToChildIndex=null,t.ArrayType=Int8Array,t[Symbol.toStringTag]="Union"))(gv.prototype);class _v extends tt{constructor(e){super(),this.byteWidth=e}get typeId(){return Q.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}k7=Symbol.toStringTag;_v[k7]=(t=>(t.byteWidth=null,t.ArrayType=Uint8Array,t[Symbol.toStringTag]="FixedSizeBinary"))(_v.prototype);class yv extends tt{constructor(e,n){super(),this.listSize=e,this.children=[n]}get typeId(){return Q.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}I7=Symbol.toStringTag;yv[I7]=(t=>(t.children=null,t.listSize=null,t[Symbol.toStringTag]="FixedSizeList"))(yv.prototype);class mv extends tt{constructor(e,n=!1){super(),this.children=[e],this.keysSorted=n}get typeId(){return Q.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}F7=Symbol.toStringTag;mv[F7]=(t=>(t.children=null,t.keysSorted=null,t[Symbol.toStringTag]="Map_"))(mv.prototype);const jde=(t=>()=>++t)(-1);class Sp extends tt{constructor(e,n,i,s){super(),this.indices=n,this.dictionary=e,this.isOrdered=s||!1,this.id=i==null?jde():typeof i=="number"?i:i.low}get typeId(){return Q.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}O7=Symbol.toStringTag;Sp[O7]=(t=>(t.id=null,t.indices=null,t.isOrdered=null,t.dictionary=null,t[Symbol.toStringTag]="Dictionary"))(Sp.prototype);function Tl(t){const e=t;switch(t.typeId){case Q.Decimal:return t.bitWidth/32;case Q.Timestamp:return 2;case Q.Date:return 1+e.unit;case Q.Interval:return 1+e.unit;case Q.FixedSizeList:return e.listSize;case Q.FixedSizeBinary:return e.byteWidth;default:return 1}}class Dt{visitMany(e,...n){return e.map((i,s)=>this.visit(i,...n.map(o=>o[s])))}visit(...e){return this.getVisitFn(e[0],!1).apply(this,e)}getVisitFn(e,n=!0){return Ude(this,e,n)}getVisitFnByTypeId(e,n=!0){return Th(this,e,n)}visitNull(e,...n){return null}visitBool(e,...n){return null}visitInt(e,...n){return null}visitFloat(e,...n){return null}visitUtf8(e,...n){return null}visitBinary(e,...n){return null}visitFixedSizeBinary(e,...n){return null}visitDate(e,...n){return null}visitTimestamp(e,...n){return null}visitTime(e,...n){return null}visitDecimal(e,...n){return null}visitList(e,...n){return null}visitStruct(e,...n){return null}visitUnion(e,...n){return null}visitDictionary(e,...n){return null}visitInterval(e,...n){return null}visitFixedSizeList(e,...n){return null}visitMap(e,...n){return null}}function Ude(t,e,n=!0){return typeof e=="number"?Th(t,e,n):typeof e=="string"&&e in Q?Th(t,Q[e],n):e&&e instanceof tt?Th(t,qD(e),n):(e==null?void 0:e.type)&&e.type instanceof tt?Th(t,qD(e.type),n):Th(t,Q.NONE,n)}function Th(t,e,n=!0){let i=null;switch(e){case Q.Null:i=t.visitNull;break;case Q.Bool:i=t.visitBool;break;case Q.Int:i=t.visitInt;break;case Q.Int8:i=t.visitInt8||t.visitInt;break;case Q.Int16:i=t.visitInt16||t.visitInt;break;case Q.Int32:i=t.visitInt32||t.visitInt;break;case Q.Int64:i=t.visitInt64||t.visitInt;break;case Q.Uint8:i=t.visitUint8||t.visitInt;break;case Q.Uint16:i=t.visitUint16||t.visitInt;break;case Q.Uint32:i=t.visitUint32||t.visitInt;break;case Q.Uint64:i=t.visitUint64||t.visitInt;break;case Q.Float:i=t.visitFloat;break;case Q.Float16:i=t.visitFloat16||t.visitFloat;break;case Q.Float32:i=t.visitFloat32||t.visitFloat;break;case Q.Float64:i=t.visitFloat64||t.visitFloat;break;case Q.Utf8:i=t.visitUtf8;break;case Q.Binary:i=t.visitBinary;break;case Q.FixedSizeBinary:i=t.visitFixedSizeBinary;break;case Q.Date:i=t.visitDate;break;case Q.DateDay:i=t.visitDateDay||t.visitDate;break;case Q.DateMillisecond:i=t.visitDateMillisecond||t.visitDate;break;case Q.Timestamp:i=t.visitTimestamp;break;case Q.TimestampSecond:i=t.visitTimestampSecond||t.visitTimestamp;break;case Q.TimestampMillisecond:i=t.visitTimestampMillisecond||t.visitTimestamp;break;case Q.TimestampMicrosecond:i=t.visitTimestampMicrosecond||t.visitTimestamp;break;case Q.TimestampNanosecond:i=t.visitTimestampNanosecond||t.visitTimestamp;break;case Q.Time:i=t.visitTime;break;case Q.TimeSecond:i=t.visitTimeSecond||t.visitTime;break;case Q.TimeMillisecond:i=t.visitTimeMillisecond||t.visitTime;break;case Q.TimeMicrosecond:i=t.visitTimeMicrosecond||t.visitTime;break;case Q.TimeNanosecond:i=t.visitTimeNanosecond||t.visitTime;break;case Q.Decimal:i=t.visitDecimal;break;case Q.List:i=t.visitList;break;case Q.Struct:i=t.visitStruct;break;case Q.Union:i=t.visitUnion;break;case Q.DenseUnion:i=t.visitDenseUnion||t.visitUnion;break;case Q.SparseUnion:i=t.visitSparseUnion||t.visitUnion;break;case Q.Dictionary:i=t.visitDictionary;break;case Q.Interval:i=t.visitInterval;break;case Q.IntervalDayTime:i=t.visitIntervalDayTime||t.visitInterval;break;case Q.IntervalYearMonth:i=t.visitIntervalYearMonth||t.visitInterval;break;case Q.FixedSizeList:i=t.visitFixedSizeList;break;case Q.Map:i=t.visitMap;break}if(typeof i=="function")return i;if(!n)return()=>null;throw new Error(`Unrecognized type '${Q[e]}'`)}function qD(t){switch(t.typeId){case Q.Null:return Q.Null;case Q.Int:{const{bitWidth:e,isSigned:n}=t;switch(e){case 8:return n?Q.Int8:Q.Uint8;case 16:return n?Q.Int16:Q.Uint16;case 32:return n?Q.Int32:Q.Uint32;case 64:return n?Q.Int64:Q.Uint64}return Q.Int}case Q.Float:switch(t.precision){case Cs.HALF:return Q.Float16;case Cs.SINGLE:return Q.Float32;case Cs.DOUBLE:return Q.Float64}return Q.Float;case Q.Binary:return Q.Binary;case Q.Utf8:return Q.Utf8;case Q.Bool:return Q.Bool;case Q.Decimal:return Q.Decimal;case Q.Time:switch(t.unit){case Xt.SECOND:return Q.TimeSecond;case Xt.MILLISECOND:return Q.TimeMillisecond;case Xt.MICROSECOND:return Q.TimeMicrosecond;case Xt.NANOSECOND:return Q.TimeNanosecond}return Q.Time;case Q.Timestamp:switch(t.unit){case Xt.SECOND:return Q.TimestampSecond;case Xt.MILLISECOND:return Q.TimestampMillisecond;case Xt.MICROSECOND:return Q.TimestampMicrosecond;case Xt.NANOSECOND:return Q.TimestampNanosecond}return Q.Timestamp;case Q.Date:switch(t.unit){case Jl.DAY:return Q.DateDay;case Jl.MILLISECOND:return Q.DateMillisecond}return Q.Date;case Q.Interval:switch(t.unit){case ld.DAY_TIME:return Q.IntervalDayTime;case ld.YEAR_MONTH:return Q.IntervalYearMonth}return Q.Interval;case Q.Map:return Q.Map;case Q.List:return Q.List;case Q.Struct:return Q.Struct;case Q.Union:switch(t.mode){case yr.Dense:return Q.DenseUnion;case yr.Sparse:return Q.SparseUnion}return Q.Union;case Q.FixedSizeBinary:return Q.FixedSizeBinary;case Q.FixedSizeList:return Q.FixedSizeList;case Q.Dictionary:return Q.Dictionary}throw new Error(`Unrecognized type '${Q[t.typeId]}'`)}Dt.prototype.visitInt8=null;Dt.prototype.visitInt16=null;Dt.prototype.visitInt32=null;Dt.prototype.visitInt64=null;Dt.prototype.visitUint8=null;Dt.prototype.visitUint16=null;Dt.prototype.visitUint32=null;Dt.prototype.visitUint64=null;Dt.prototype.visitFloat16=null;Dt.prototype.visitFloat32=null;Dt.prototype.visitFloat64=null;Dt.prototype.visitDateDay=null;Dt.prototype.visitDateMillisecond=null;Dt.prototype.visitTimestampSecond=null;Dt.prototype.visitTimestampMillisecond=null;Dt.prototype.visitTimestampMicrosecond=null;Dt.prototype.visitTimestampNanosecond=null;Dt.prototype.visitTimeSecond=null;Dt.prototype.visitTimeMillisecond=null;Dt.prototype.visitTimeMicrosecond=null;Dt.prototype.visitTimeNanosecond=null;Dt.prototype.visitDenseUnion=null;Dt.prototype.visitSparseUnion=null;Dt.prototype.visitIntervalDayTime=null;Dt.prototype.visitIntervalYearMonth=null;const M7=new Float64Array(1),sh=new Uint32Array(M7.buffer);function A7(t){const e=(t&31744)>>10,n=(t&1023)/1024,i=Math.pow(-1,(t&32768)>>15);switch(e){case 31:return i*(n?Number.NaN:1/0);case 0:return i*(n?6103515625e-14*n:0)}return i*Math.pow(2,e-15)*(1+n)}function $de(t){if(t!==t)return 32256;M7[0]=t;const e=(sh[1]&2147483648)>>16&65535;let n=sh[1]&2146435072,i=0;return n>=1089470464?sh[0]>0?n=31744:(n=(n&2080374784)>>16,i=(sh[1]&1048575)>>10):n<=1056964608?(i=1048576+(sh[1]&1048575),i=1048576+(i<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,i=(sh[1]&1048575)+512>>10),e|n|i&65535}class gt extends Dt{}function Tt(t){return(e,n,i)=>{if(e.setValid(n,i!=null))return t(e,n,i)}}const zde=(t,e,n)=>{t[e]=Math.trunc(n/864e5)},lM=(t,e,n)=>{t[e]=Math.trunc(n%4294967296),t[e+1]=Math.trunc(n/4294967296)},qde=(t,e,n)=>{t[e]=Math.trunc(n*1e3%4294967296),t[e+1]=Math.trunc(n*1e3/4294967296)},Gde=(t,e,n)=>{t[e]=Math.trunc(n*1e6%4294967296),t[e+1]=Math.trunc(n*1e6/4294967296)},N7=(t,e,n,i)=>{if(n+1<e.length){const{[n]:s,[n+1]:o}=e;t.set(i.subarray(0,o-s),s)}},Vde=({offset:t,values:e},n,i)=>{const s=t+n;i?e[s>>3]|=1<<s%8:e[s>>3]&=~(1<<s%8)},nc=({values:t},e,n)=>{t[e]=n},cM=({values:t},e,n)=>{t[e]=n},C7=({values:t},e,n)=>{t[e]=$de(n)},Wde=(t,e,n)=>{switch(t.type.precision){case Cs.HALF:return C7(t,e,n);case Cs.SINGLE:case Cs.DOUBLE:return cM(t,e,n)}},R7=({values:t},e,n)=>{zde(t,e,n.valueOf())},L7=({values:t},e,n)=>{lM(t,e*2,n.valueOf())},Hde=({stride:t,values:e},n,i)=>{e.set(i.subarray(0,t),t*n)},Yde=({values:t,valueOffsets:e},n,i)=>N7(t,e,n,i),Xde=({values:t,valueOffsets:e},n,i)=>{N7(t,e,n,nM(i))},Kde=(t,e,n)=>{t.type.unit===Jl.DAY?R7(t,e,n):L7(t,e,n)},P7=({values:t},e,n)=>lM(t,e*2,n/1e3),D7=({values:t},e,n)=>lM(t,e*2,n),j7=({values:t},e,n)=>qde(t,e*2,n),U7=({values:t},e,n)=>Gde(t,e*2,n),Jde=(t,e,n)=>{switch(t.type.unit){case Xt.SECOND:return P7(t,e,n);case Xt.MILLISECOND:return D7(t,e,n);case Xt.MICROSECOND:return j7(t,e,n);case Xt.NANOSECOND:return U7(t,e,n)}},$7=({values:t},e,n)=>{t[e]=n},z7=({values:t},e,n)=>{t[e]=n},q7=({values:t},e,n)=>{t[e]=n},G7=({values:t},e,n)=>{t[e]=n},Qde=(t,e,n)=>{switch(t.type.unit){case Xt.SECOND:return $7(t,e,n);case Xt.MILLISECOND:return z7(t,e,n);case Xt.MICROSECOND:return q7(t,e,n);case Xt.NANOSECOND:return G7(t,e,n)}},Zde=({values:t,stride:e},n,i)=>{t.set(i.subarray(0,e),e*n)},efe=(t,e,n)=>{const i=t.children[0],s=t.valueOffsets,o=Yr.getVisitFn(i);if(Array.isArray(n))for(let c=-1,d=s[e],f=s[e+1];d<f;)o(i,d++,n[++c]);else for(let c=-1,d=s[e],f=s[e+1];d<f;)o(i,d++,n.get(++c))},tfe=(t,e,n)=>{const i=t.children[0],{valueOffsets:s}=t,o=Yr.getVisitFn(i);let{[e]:c,[e+1]:d}=s;const f=n instanceof Map?n.entries():Object.entries(n);for(const u of f)if(o(i,c,u),++c>=d)break},nfe=(t,e)=>(n,i,s,o)=>i&&n(i,t,e[o]),ife=(t,e)=>(n,i,s,o)=>i&&n(i,t,e.get(o)),sfe=(t,e)=>(n,i,s,o)=>i&&n(i,t,e.get(s.name)),rfe=(t,e)=>(n,i,s,o)=>i&&n(i,t,e[s.name]),afe=(t,e,n)=>{const i=t.type.children.map(o=>Yr.getVisitFn(o.type)),s=n instanceof Map?sfe(e,n):n instanceof nn?ife(e,n):Array.isArray(n)?nfe(e,n):rfe(e,n);t.type.children.forEach((o,c)=>s(i[c],t.children[c],o,c))},ofe=(t,e,n)=>{t.type.mode===yr.Dense?V7(t,e,n):W7(t,e,n)},V7=(t,e,n)=>{const i=t.type.typeIdToChildIndex[t.typeIds[e]],s=t.children[i];Yr.visit(s,t.valueOffsets[e],n)},W7=(t,e,n)=>{const i=t.type.typeIdToChildIndex[t.typeIds[e]],s=t.children[i];Yr.visit(s,e,n)},lfe=(t,e,n)=>{var i;(i=t.dictionary)===null||i===void 0||i.set(t.values[e],n)},cfe=(t,e,n)=>{t.type.unit===ld.DAY_TIME?H7(t,e,n):Y7(t,e,n)},H7=({values:t},e,n)=>{t.set(n.subarray(0,2),2*e)},Y7=({values:t},e,n)=>{t[e]=n[0]*12+n[1]%12},dfe=(t,e,n)=>{const{stride:i}=t,s=t.children[0],o=Yr.getVisitFn(s);if(Array.isArray(n))for(let c=-1,d=e*i;++c<i;)o(s,d+c,n[c]);else for(let c=-1,d=e*i;++c<i;)o(s,d+c,n.get(c))};gt.prototype.visitBool=Tt(Vde);gt.prototype.visitInt=Tt(nc);gt.prototype.visitInt8=Tt(nc);gt.prototype.visitInt16=Tt(nc);gt.prototype.visitInt32=Tt(nc);gt.prototype.visitInt64=Tt(nc);gt.prototype.visitUint8=Tt(nc);gt.prototype.visitUint16=Tt(nc);gt.prototype.visitUint32=Tt(nc);gt.prototype.visitUint64=Tt(nc);gt.prototype.visitFloat=Tt(Wde);gt.prototype.visitFloat16=Tt(C7);gt.prototype.visitFloat32=Tt(cM);gt.prototype.visitFloat64=Tt(cM);gt.prototype.visitUtf8=Tt(Xde);gt.prototype.visitBinary=Tt(Yde);gt.prototype.visitFixedSizeBinary=Tt(Hde);gt.prototype.visitDate=Tt(Kde);gt.prototype.visitDateDay=Tt(R7);gt.prototype.visitDateMillisecond=Tt(L7);gt.prototype.visitTimestamp=Tt(Jde);gt.prototype.visitTimestampSecond=Tt(P7);gt.prototype.visitTimestampMillisecond=Tt(D7);gt.prototype.visitTimestampMicrosecond=Tt(j7);gt.prototype.visitTimestampNanosecond=Tt(U7);gt.prototype.visitTime=Tt(Qde);gt.prototype.visitTimeSecond=Tt($7);gt.prototype.visitTimeMillisecond=Tt(z7);gt.prototype.visitTimeMicrosecond=Tt(q7);gt.prototype.visitTimeNanosecond=Tt(G7);gt.prototype.visitDecimal=Tt(Zde);gt.prototype.visitList=Tt(efe);gt.prototype.visitStruct=Tt(afe);gt.prototype.visitUnion=Tt(ofe);gt.prototype.visitDenseUnion=Tt(V7);gt.prototype.visitSparseUnion=Tt(W7);gt.prototype.visitDictionary=Tt(lfe);gt.prototype.visitInterval=Tt(cfe);gt.prototype.visitIntervalDayTime=Tt(H7);gt.prototype.visitIntervalYearMonth=Tt(Y7);gt.prototype.visitFixedSizeList=Tt(dfe);gt.prototype.visitMap=Tt(tfe);const Yr=new gt,ha=Symbol.for("parent"),Wh=Symbol.for("rowIndex");class dM{constructor(e,n){return this[ha]=e,this[Wh]=n,new Proxy(this,new ufe)}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[Wh],n=this[ha],i=n.type.children,s={};for(let o=-1,c=i.length;++o<c;)s[i[o].name]=Gs.visit(n.children[o],e);return s}toString(){return`{${[...this].map(([e,n])=>`${_y(e)}: ${_y(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new ffe(this[ha],this[Wh])}}class ffe{constructor(e,n){this.childIndex=0,this.children=e.children,this.rowIndex=n,this.childFields=e.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const e=this.childIndex;return e<this.numChildren?(this.childIndex=e+1,{done:!1,value:[this.childFields[e].name,Gs.visit(this.children[e],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(dM.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[ha]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Wh]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class ufe{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[ha].type.children.map(n=>n.name)}has(e,n){return e[ha].type.children.findIndex(i=>i.name===n)!==-1}getOwnPropertyDescriptor(e,n){if(e[ha].type.children.findIndex(i=>i.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,n){if(Reflect.has(e,n))return e[n];const i=e[ha].type.children.findIndex(s=>s.name===n);if(i!==-1){const s=Gs.visit(e[ha].children[i],e[Wh]);return Reflect.set(e,n,s),s}}set(e,n,i){const s=e[ha].type.children.findIndex(o=>o.name===n);return s!==-1?(Yr.visit(e[ha].children[s],e[Wh],i),Reflect.set(e,n,i)):Reflect.has(e,n)||typeof n=="symbol"?Reflect.set(e,n,i):!1}}class at extends Dt{}function _t(t){return(e,n)=>e.getValid(n)?t(e,n):null}const hfe=(t,e)=>864e5*t[e],fM=(t,e)=>4294967296*t[e+1]+(t[e]>>>0),pfe=(t,e)=>4294967296*(t[e+1]/1e3)+(t[e]>>>0)/1e3,gfe=(t,e)=>4294967296*(t[e+1]/1e6)+(t[e]>>>0)/1e6,X7=t=>new Date(t),_fe=(t,e)=>X7(hfe(t,e)),yfe=(t,e)=>X7(fM(t,e)),mfe=(t,e)=>null,K7=(t,e,n)=>{if(n+1>=e.length)return null;const i=e[n],s=e[n+1];return t.subarray(i,s)},wfe=({offset:t,values:e},n)=>{const i=t+n;return(e[i>>3]&1<<i%8)!==0},J7=({values:t},e)=>_fe(t,e),Q7=({values:t},e)=>yfe(t,e*2),Rd=({stride:t,values:e},n)=>e[t*n],bfe=({stride:t,values:e},n)=>A7(e[t*n]),Z7=({values:t},e)=>t[e],Tfe=({stride:t,values:e},n)=>e.subarray(t*n,t*(n+1)),vfe=({values:t,valueOffsets:e},n)=>K7(t,e,n),Efe=({values:t,valueOffsets:e},n)=>{const i=K7(t,e,n);return i!==null?Hk(i):null},Sfe=({values:t},e)=>t[e],xfe=({type:t,values:e},n)=>t.precision!==Cs.HALF?e[n]:A7(e[n]),Bfe=(t,e)=>t.type.unit===Jl.DAY?J7(t,e):Q7(t,e),e9=({values:t},e)=>1e3*fM(t,e*2),t9=({values:t},e)=>fM(t,e*2),n9=({values:t},e)=>pfe(t,e*2),i9=({values:t},e)=>gfe(t,e*2),kfe=(t,e)=>{switch(t.type.unit){case Xt.SECOND:return e9(t,e);case Xt.MILLISECOND:return t9(t,e);case Xt.MICROSECOND:return n9(t,e);case Xt.NANOSECOND:return i9(t,e)}},s9=({values:t},e)=>t[e],r9=({values:t},e)=>t[e],a9=({values:t},e)=>t[e],o9=({values:t},e)=>t[e],Ife=(t,e)=>{switch(t.type.unit){case Xt.SECOND:return s9(t,e);case Xt.MILLISECOND:return r9(t,e);case Xt.MICROSECOND:return a9(t,e);case Xt.NANOSECOND:return o9(t,e)}},Ffe=({values:t,stride:e},n)=>oM.decimal(t.subarray(e*n,e*(n+1))),Ofe=(t,e)=>{const{valueOffsets:n,stride:i,children:s}=t,{[e*i]:o,[e*i+1]:c}=n,f=s[0].slice(o,c-o);return new nn([f])},Mfe=(t,e)=>{const{valueOffsets:n,children:i}=t,{[e]:s,[e+1]:o}=n,c=i[0];return new uM(c.slice(s,o-s))},Afe=(t,e)=>new dM(t,e),Nfe=(t,e)=>t.type.mode===yr.Dense?l9(t,e):c9(t,e),l9=(t,e)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],i=t.children[n];return Gs.visit(i,t.valueOffsets[e])},c9=(t,e)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],i=t.children[n];return Gs.visit(i,e)},Cfe=(t,e)=>{var n;return(n=t.dictionary)===null||n===void 0?void 0:n.get(t.values[e])},Rfe=(t,e)=>t.type.unit===ld.DAY_TIME?d9(t,e):f9(t,e),d9=({values:t},e)=>t.subarray(2*e,2*(e+1)),f9=({values:t},e)=>{const n=t[e],i=new Int32Array(2);return i[0]=Math.trunc(n/12),i[1]=Math.trunc(n%12),i},Lfe=(t,e)=>{const{stride:n,children:i}=t,o=i[0].slice(e*n,n);return new nn([o])};at.prototype.visitNull=_t(mfe);at.prototype.visitBool=_t(wfe);at.prototype.visitInt=_t(Sfe);at.prototype.visitInt8=_t(Rd);at.prototype.visitInt16=_t(Rd);at.prototype.visitInt32=_t(Rd);at.prototype.visitInt64=_t(Z7);at.prototype.visitUint8=_t(Rd);at.prototype.visitUint16=_t(Rd);at.prototype.visitUint32=_t(Rd);at.prototype.visitUint64=_t(Z7);at.prototype.visitFloat=_t(xfe);at.prototype.visitFloat16=_t(bfe);at.prototype.visitFloat32=_t(Rd);at.prototype.visitFloat64=_t(Rd);at.prototype.visitUtf8=_t(Efe);at.prototype.visitBinary=_t(vfe);at.prototype.visitFixedSizeBinary=_t(Tfe);at.prototype.visitDate=_t(Bfe);at.prototype.visitDateDay=_t(J7);at.prototype.visitDateMillisecond=_t(Q7);at.prototype.visitTimestamp=_t(kfe);at.prototype.visitTimestampSecond=_t(e9);at.prototype.visitTimestampMillisecond=_t(t9);at.prototype.visitTimestampMicrosecond=_t(n9);at.prototype.visitTimestampNanosecond=_t(i9);at.prototype.visitTime=_t(Ife);at.prototype.visitTimeSecond=_t(s9);at.prototype.visitTimeMillisecond=_t(r9);at.prototype.visitTimeMicrosecond=_t(a9);at.prototype.visitTimeNanosecond=_t(o9);at.prototype.visitDecimal=_t(Ffe);at.prototype.visitList=_t(Ofe);at.prototype.visitStruct=_t(Afe);at.prototype.visitUnion=_t(Nfe);at.prototype.visitDenseUnion=_t(l9);at.prototype.visitSparseUnion=_t(c9);at.prototype.visitDictionary=_t(Cfe);at.prototype.visitInterval=_t(Rfe);at.prototype.visitIntervalDayTime=_t(d9);at.prototype.visitIntervalYearMonth=_t(f9);at.prototype.visitFixedSizeList=_t(Lfe);at.prototype.visitMap=_t(Mfe);const Gs=new at,uo=Symbol.for("keys"),Hh=Symbol.for("vals");class uM{constructor(e){return this[uo]=new nn([e.children[0]]).memoize(),this[Hh]=e.children[1],new Proxy(this,new Dfe)}[Symbol.iterator](){return new Pfe(this[uo],this[Hh])}get size(){return this[uo].length}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[uo],n=this[Hh],i={};for(let s=-1,o=e.length;++s<o;)i[e.get(s)]=Gs.visit(n,s);return i}toString(){return`{${[...this].map(([e,n])=>`${_y(e)}: ${_y(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class Pfe{constructor(e,n){this.keys=e,this.vals=n,this.keyIndex=0,this.numKeys=e.length}[Symbol.iterator](){return this}next(){const e=this.keyIndex;return e===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(e),Gs.visit(this.vals,e)]})}}class Dfe{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[uo].toArray().map(String)}has(e,n){return e[uo].includes(n)}getOwnPropertyDescriptor(e,n){if(e[uo].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,n){if(Reflect.has(e,n))return e[n];const i=e[uo].indexOf(n);if(i!==-1){const s=Gs.visit(Reflect.get(e,Hh),i);return Reflect.set(e,n,s),s}}set(e,n,i){const s=e[uo].indexOf(n);return s!==-1?(Yr.visit(Reflect.get(e,Hh),s,i),Reflect.set(e,n,i)):Reflect.has(e,n)?Reflect.set(e,n,i):!1}}Object.defineProperties(uM.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[uo]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Hh]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let GD;function u9(t,e,n,i){const{length:s=0}=t;let o=typeof e!="number"?0:e,c=typeof n!="number"?s:n;return o<0&&(o=(o%s+s)%s),c<0&&(c=(c%s+s)%s),c<o&&(GD=o,o=c,c=GD),c>s&&(c=s),i?i(t,o,c):[o,c]}const VD=t=>t!==t;function fg(t){if(typeof t!=="object"||t===null)return VD(t)?VD:n=>n===t;if(t instanceof Date){const n=t.valueOf();return i=>i instanceof Date?i.valueOf()===n:!1}return ArrayBuffer.isView(t)?n=>n?Mde(t,n):!1:t instanceof Map?Ufe(t):Array.isArray(t)?jfe(t):t instanceof nn?$fe(t):zfe(t,!0)}function jfe(t){const e=[];for(let n=-1,i=t.length;++n<i;)e[n]=fg(t[n]);return wE(e)}function Ufe(t){let e=-1;const n=[];for(const i of t.values())n[++e]=fg(i);return wE(n)}function $fe(t){const e=[];for(let n=-1,i=t.length;++n<i;)e[n]=fg(t.get(n));return wE(e)}function zfe(t,e=!1){const n=Object.keys(t);if(!e&&n.length===0)return()=>!1;const i=[];for(let s=-1,o=n.length;++s<o;)i[s]=fg(t[n[s]]);return wE(i,n)}function wE(t,e){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return qfe(t,n);case Map:return WD(t,n,n.keys());case uM:case dM:case Object:case void 0:return WD(t,n,e||Object.keys(n))}return n instanceof nn?Gfe(t,n):!1}}function qfe(t,e){const n=t.length;if(e.length!==n)return!1;for(let i=-1;++i<n;)if(!t[i](e[i]))return!1;return!0}function Gfe(t,e){const n=t.length;if(e.length!==n)return!1;for(let i=-1;++i<n;)if(!t[i](e.get(i)))return!1;return!0}function WD(t,e,n){const i=n[Symbol.iterator](),s=e instanceof Map?e.keys():Object.keys(e)[Symbol.iterator](),o=e instanceof Map?e.values():Object.values(e)[Symbol.iterator]();let c=0;const d=t.length;let f=o.next(),u=i.next(),a=s.next();for(;c<d&&!u.done&&!a.done&&!f.done&&!(u.value!==a.value||!t[c](f.value));++c,u=i.next(),a=s.next(),f=o.next());return c===d&&u.done&&a.done&&f.done?!0:(i.return&&i.return(),s.return&&s.return(),o.return&&o.return(),!1)}function h9(t,e,n,i){return(n&1<<i)!==0}function Vfe(t,e,n,i){return(n&1<<i)>>i}function hM(t,e,n){const i=n.byteLength+7&-8;if(t>0||n.byteLength<i){const s=new Uint8Array(i);return s.set(t%8===0?n.subarray(t>>3):wv(new pM(n,t,e,null,h9)).subarray(0,i)),s}return n}function wv(t){const e=[];let n=0,i=0,s=0;for(const c of t)c&&(s|=1<<i),++i===8&&(e[n++]=s,s=i=0);(n===0||i>0)&&(e[n++]=s);const o=new Uint8Array(e.length+7&-8);return o.set(e),o}class pM{constructor(e,n,i,s,o){this.bytes=e,this.length=i,this.context=s,this.get=o,this.bit=n%8,this.byteIndex=n>>3,this.byte=e[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function Jk(t,e,n){if(n-e<=0)return 0;if(n-e<8){let o=0;for(const c of new pM(t,e,n-e,t,Vfe))o+=c;return o}const i=n>>3<<3,s=e+(e%8===0?0:8-e%8);return Jk(t,e,s)+Jk(t,i,n)+Wfe(t,s>>3,i-s>>3)}function Wfe(t,e,n){let i=0,s=Math.trunc(e);const o=new DataView(t.buffer,t.byteOffset,t.byteLength),c=n===void 0?t.byteLength:s+n;for(;c-s>=4;)i+=qx(o.getUint32(s)),s+=4;for(;c-s>=2;)i+=qx(o.getUint16(s)),s+=2;for(;c-s>=1;)i+=qx(o.getUint8(s)),s+=1;return i}function qx(t){let e=Math.trunc(t);return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),(e+(e>>>4)&252645135)*16843009>>>24}const Hfe=-1;class gn{constructor(e,n,i,s,o,c=[],d){this.type=e,this.children=c,this.dictionary=d,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(i||0,0)),this._nullCount=Math.floor(Math.max(s||0,-1));let f;o instanceof gn?(this.stride=o.stride,this.values=o.values,this.typeIds=o.typeIds,this.nullBitmap=o.nullBitmap,this.valueOffsets=o.valueOffsets):(this.stride=Tl(e),o&&((f=o[0])&&(this.valueOffsets=f),(f=o[1])&&(this.values=f),(f=o[2])&&(this.nullBitmap=f),(f=o[3])&&(this.typeIds=f))),this.nullable=this._nullCount!==0&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let e=0;const{valueOffsets:n,values:i,nullBitmap:s,typeIds:o}=this;return n&&(e+=n.byteLength),i&&(e+=i.byteLength),s&&(e+=s.byteLength),o&&(e+=o.byteLength),this.children.reduce((c,d)=>c+d.byteLength,e)}get nullCount(){let e=this._nullCount,n;return e<=Hfe&&(n=this.nullBitmap)&&(this._nullCount=e=this.length-Jk(n,this.offset,this.offset+this.length)),e}getValid(e){if(this.nullable&&this.nullCount>0){const n=this.offset+e;return(this.nullBitmap[n>>3]&1<<n%8)!==0}return!0}setValid(e,n){if(!this.nullable)return n;if(!this.nullBitmap||this.nullBitmap.byteLength<=e>>3){const{nullBitmap:f}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:f,_nullCount:0})}const{nullBitmap:i,offset:s}=this,o=s+e>>3,c=(s+e)%8,d=i[o]>>c&1;return n?d===0&&(i[o]|=1<<c,this._nullCount=this.nullCount+1):d===1&&(i[o]&=~(1<<c),this._nullCount=this.nullCount-1),n}clone(e=this.type,n=this.offset,i=this.length,s=this._nullCount,o=this,c=this.children){return new gn(e,n,i,s,o,c,this.dictionary)}slice(e,n){const{stride:i,typeId:s,children:o}=this,c=+(this._nullCount===0)-1,d=s===16?i:1,f=this._sliceBuffers(e,n,i,s);return this.clone(this.type,this.offset+e,n,c,f,o.length===0||this.valueOffsets?o:this._sliceChildren(o,d*e,d*n))}_changeLengthAndBackfillNullBitmap(e){if(this.typeId===Q.Null)return this.clone(this.type,0,e,0);const{length:n,nullCount:i}=this,s=new Uint8Array((e+63&-64)>>3).fill(255,0,n>>3);s[n>>3]=(1<<n-(n&-8))-1,i>0&&s.set(hM(this.offset,n,this.nullBitmap),0);const o=this.buffers;return o[bl.VALIDITY]=s,this.clone(this.type,0,e,i+(e-n),o)}_sliceBuffers(e,n,i,s){let o;const{buffers:c}=this;return(o=c[bl.TYPE])&&(c[bl.TYPE]=o.subarray(e,e+n)),(o=c[bl.OFFSET])&&(c[bl.OFFSET]=o.subarray(e,e+n+1))||(o=c[bl.DATA])&&(c[bl.DATA]=s===6?o:o.subarray(i*e,i*(e+n))),c}_sliceChildren(e,n,i){return e.map(s=>s.slice(n,i))}}gn.prototype.children=Object.freeze([]);class j_ extends Dt{visit(e){return this.getVisitFn(e.type).call(this,e)}visitNull(e){const{["type"]:n,["offset"]:i=0,["length"]:s=0}=e;return new gn(n,i,s,0)}visitBool(e){const{["type"]:n,["offset"]:i=0}=e,s=Yt(e.nullBitmap),o=hn(n.ArrayType,e.data),{["length"]:c=o.length>>3,["nullCount"]:d=e.nullBitmap?-1:0}=e;return new gn(n,i,c,d,[void 0,o,s])}visitInt(e){const{["type"]:n,["offset"]:i=0}=e,s=Yt(e.nullBitmap),o=hn(n.ArrayType,e.data),{["length"]:c=o.length,["nullCount"]:d=e.nullBitmap?-1:0}=e;return new gn(n,i,c,d,[void 0,o,s])}visitFloat(e){const{["type"]:n,["offset"]:i=0}=e,s=Yt(e.nullBitmap),o=hn(n.ArrayType,e.data),{["length"]:c=o.length,["nullCount"]:d=e.nullBitmap?-1:0}=e;return new gn(n,i,c,d,[void 0,o,s])}visitUtf8(e){const{["type"]:n,["offset"]:i=0}=e,s=Yt(e.data),o=Yt(e.nullBitmap),c=zg(e.valueOffsets),{["length"]:d=c.length-1,["nullCount"]:f=e.nullBitmap?-1:0}=e;return new gn(n,i,d,f,[c,s,o])}visitBinary(e){const{["type"]:n,["offset"]:i=0}=e,s=Yt(e.data),o=Yt(e.nullBitmap),c=zg(e.valueOffsets),{["length"]:d=c.length-1,["nullCount"]:f=e.nullBitmap?-1:0}=e;return new gn(n,i,d,f,[c,s,o])}visitFixedSizeBinary(e){const{["type"]:n,["offset"]:i=0}=e,s=Yt(e.nullBitmap),o=hn(n.ArrayType,e.data),{["length"]:c=o.length/Tl(n),["nullCount"]:d=e.nullBitmap?-1:0}=e;return new gn(n,i,c,d,[void 0,o,s])}visitDate(e){const{["type"]:n,["offset"]:i=0}=e,s=Yt(e.nullBitmap),o=hn(n.ArrayType,e.data),{["length"]:c=o.length/Tl(n),["nullCount"]:d=e.nullBitmap?-1:0}=e;return new gn(n,i,c,d,[void 0,o,s])}visitTimestamp(e){const{["type"]:n,["offset"]:i=0}=e,s=Yt(e.nullBitmap),o=hn(n.ArrayType,e.data),{["length"]:c=o.length/Tl(n),["nullCount"]:d=e.nullBitmap?-1:0}=e;return new gn(n,i,c,d,[void 0,o,s])}visitTime(e){const{["type"]:n,["offset"]:i=0}=e,s=Yt(e.nullBitmap),o=hn(n.ArrayType,e.data),{["length"]:c=o.length/Tl(n),["nullCount"]:d=e.nullBitmap?-1:0}=e;return new gn(n,i,c,d,[void 0,o,s])}visitDecimal(e){const{["type"]:n,["offset"]:i=0}=e,s=Yt(e.nullBitmap),o=hn(n.ArrayType,e.data),{["length"]:c=o.length/Tl(n),["nullCount"]:d=e.nullBitmap?-1:0}=e;return new gn(n,i,c,d,[void 0,o,s])}visitList(e){const{["type"]:n,["offset"]:i=0,["child"]:s}=e,o=Yt(e.nullBitmap),c=zg(e.valueOffsets),{["length"]:d=c.length-1,["nullCount"]:f=e.nullBitmap?-1:0}=e;return new gn(n,i,d,f,[c,void 0,o],[s])}visitStruct(e){const{["type"]:n,["offset"]:i=0,["children"]:s=[]}=e,o=Yt(e.nullBitmap),{length:c=s.reduce((f,{length:u})=>Math.max(f,u),0),nullCount:d=e.nullBitmap?-1:0}=e;return new gn(n,i,c,d,[void 0,void 0,o],s)}visitUnion(e){const{["type"]:n,["offset"]:i=0,["children"]:s=[]}=e,o=Yt(e.nullBitmap),c=hn(n.ArrayType,e.typeIds),{["length"]:d=c.length,["nullCount"]:f=e.nullBitmap?-1:0}=e;if(tt.isSparseUnion(n))return new gn(n,i,d,f,[void 0,void 0,o,c],s);const u=zg(e.valueOffsets);return new gn(n,i,d,f,[u,void 0,o,c],s)}visitDictionary(e){const{["type"]:n,["offset"]:i=0}=e,s=Yt(e.nullBitmap),o=hn(n.indices.ArrayType,e.data),{["dictionary"]:c=new nn([new j_().visit({type:n.dictionary})])}=e,{["length"]:d=o.length,["nullCount"]:f=e.nullBitmap?-1:0}=e;return new gn(n,i,d,f,[void 0,o,s],[],c)}visitInterval(e){const{["type"]:n,["offset"]:i=0}=e,s=Yt(e.nullBitmap),o=hn(n.ArrayType,e.data),{["length"]:c=o.length/Tl(n),["nullCount"]:d=e.nullBitmap?-1:0}=e;return new gn(n,i,c,d,[void 0,o,s])}visitFixedSizeList(e){const{["type"]:n,["offset"]:i=0,["child"]:s=new j_().visit({type:n.valueType})}=e,o=Yt(e.nullBitmap),{["length"]:c=s.length/Tl(n),["nullCount"]:d=e.nullBitmap?-1:0}=e;return new gn(n,i,c,d,[void 0,void 0,o],[s])}visitMap(e){const{["type"]:n,["offset"]:i=0,["child"]:s=new j_().visit({type:n.childType})}=e,o=Yt(e.nullBitmap),c=zg(e.valueOffsets),{["length"]:d=c.length-1,["nullCount"]:f=e.nullBitmap?-1:0}=e;return new gn(n,i,d,f,[c,void 0,o],[s])}}function Ct(t){return new j_().visit(t)}class HD{constructor(e=0,n){this.numChunks=e,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const e=this.chunkIterator.next();if(!e.done)return e;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function p9(t){return t.reduce((e,n)=>e+n.nullCount,0)}function g9(t){return t.reduce((e,n,i)=>(e[i+1]=e[i]+n.length,e),new Uint32Array(t.length+1))}function _9(t,e,n,i){const s=[];for(let o=-1,c=t.length;++o<c;){const d=t[o],f=e[o],{length:u}=d;if(f>=i)break;if(n>=f+u)continue;if(f>=n&&f+u<=i){s.push(d);continue}const a=Math.max(0,n-f),_=Math.min(i-f,u);s.push(d.slice(a,_-a))}return s.length===0&&s.push(t[0].slice(0,0)),s}function gM(t,e,n,i){let s=0,o=0,c=e.length-1;do{if(s>=c-1)return n<e[c]?i(t,s,n-e[s]):null;o=s+Math.trunc((c-s)*.5),n<e[o]?c=o:s=o}while(s<c)}function _M(t,e){return t.getValid(e)}function Yh(t){function e(n,i,s){return t(n[i],s)}return function(n){const i=this.data;return gM(i,this._offsets,n,e)}}function y9(t){let e;function n(i,s,o){return t(i[s],o,e)}return function(i,s){const o=this.data;e=s;const c=gM(o,this._offsets,i,n);return e=void 0,c}}function m9(t){let e;function n(i,s,o){let c=o,d=0,f=0;for(let u=s-1,a=i.length;++u<a;){const _=i[u];if(~(d=t(_,e,c)))return f+d;c=0,f+=_.length}return-1}return function(i,s){e=i;const o=this.data,c=typeof s!="number"?n(o,0,0):gM(o,this._offsets,s,n);return e=void 0,c}}class ot extends Dt{}function Yfe(t,e){return e===null&&t.length>0?0:-1}function Xfe(t,e){const{nullBitmap:n}=t;if(!n||t.nullCount<=0)return-1;let i=0;for(const s of new pM(n,t.offset+(e||0),t.length,n,h9)){if(!s)return i;++i}return-1}function xt(t,e,n){if(e===void 0)return-1;if(e===null)return Xfe(t,n);const i=Gs.getVisitFn(t),s=fg(e);for(let o=(n||0)-1,c=t.length;++o<c;)if(s(i(t,o)))return o;return-1}function w9(t,e,n){const i=Gs.getVisitFn(t),s=fg(e);for(let o=(n||0)-1,c=t.length;++o<c;)if(s(i(t,o)))return o;return-1}ot.prototype.visitNull=Yfe;ot.prototype.visitBool=xt;ot.prototype.visitInt=xt;ot.prototype.visitInt8=xt;ot.prototype.visitInt16=xt;ot.prototype.visitInt32=xt;ot.prototype.visitInt64=xt;ot.prototype.visitUint8=xt;ot.prototype.visitUint16=xt;ot.prototype.visitUint32=xt;ot.prototype.visitUint64=xt;ot.prototype.visitFloat=xt;ot.prototype.visitFloat16=xt;ot.prototype.visitFloat32=xt;ot.prototype.visitFloat64=xt;ot.prototype.visitUtf8=xt;ot.prototype.visitBinary=xt;ot.prototype.visitFixedSizeBinary=xt;ot.prototype.visitDate=xt;ot.prototype.visitDateDay=xt;ot.prototype.visitDateMillisecond=xt;ot.prototype.visitTimestamp=xt;ot.prototype.visitTimestampSecond=xt;ot.prototype.visitTimestampMillisecond=xt;ot.prototype.visitTimestampMicrosecond=xt;ot.prototype.visitTimestampNanosecond=xt;ot.prototype.visitTime=xt;ot.prototype.visitTimeSecond=xt;ot.prototype.visitTimeMillisecond=xt;ot.prototype.visitTimeMicrosecond=xt;ot.prototype.visitTimeNanosecond=xt;ot.prototype.visitDecimal=xt;ot.prototype.visitList=xt;ot.prototype.visitStruct=xt;ot.prototype.visitUnion=xt;ot.prototype.visitDenseUnion=w9;ot.prototype.visitSparseUnion=w9;ot.prototype.visitDictionary=xt;ot.prototype.visitInterval=xt;ot.prototype.visitIntervalDayTime=xt;ot.prototype.visitIntervalYearMonth=xt;ot.prototype.visitFixedSizeList=xt;ot.prototype.visitMap=xt;const bv=new ot;class lt extends Dt{}function yt(t){const{type:e}=t;if(t.nullCount===0&&t.stride===1&&(e.typeId===Q.Timestamp||e instanceof dd&&e.bitWidth!==64||e instanceof by&&e.bitWidth!==64||e instanceof wy&&e.precision!==Cs.HALF))return new HD(t.data.length,i=>{const s=t.data[i];return s.values.subarray(0,s.length)[Symbol.iterator]()});let n=0;return new HD(t.data.length,i=>{const o=t.data[i].length,c=t.slice(n,n+o);return n+=o,new Kfe(c)})}class Kfe{constructor(e){this.vector=e,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}lt.prototype.visitNull=yt;lt.prototype.visitBool=yt;lt.prototype.visitInt=yt;lt.prototype.visitInt8=yt;lt.prototype.visitInt16=yt;lt.prototype.visitInt32=yt;lt.prototype.visitInt64=yt;lt.prototype.visitUint8=yt;lt.prototype.visitUint16=yt;lt.prototype.visitUint32=yt;lt.prototype.visitUint64=yt;lt.prototype.visitFloat=yt;lt.prototype.visitFloat16=yt;lt.prototype.visitFloat32=yt;lt.prototype.visitFloat64=yt;lt.prototype.visitUtf8=yt;lt.prototype.visitBinary=yt;lt.prototype.visitFixedSizeBinary=yt;lt.prototype.visitDate=yt;lt.prototype.visitDateDay=yt;lt.prototype.visitDateMillisecond=yt;lt.prototype.visitTimestamp=yt;lt.prototype.visitTimestampSecond=yt;lt.prototype.visitTimestampMillisecond=yt;lt.prototype.visitTimestampMicrosecond=yt;lt.prototype.visitTimestampNanosecond=yt;lt.prototype.visitTime=yt;lt.prototype.visitTimeSecond=yt;lt.prototype.visitTimeMillisecond=yt;lt.prototype.visitTimeMicrosecond=yt;lt.prototype.visitTimeNanosecond=yt;lt.prototype.visitDecimal=yt;lt.prototype.visitList=yt;lt.prototype.visitStruct=yt;lt.prototype.visitUnion=yt;lt.prototype.visitDenseUnion=yt;lt.prototype.visitSparseUnion=yt;lt.prototype.visitDictionary=yt;lt.prototype.visitInterval=yt;lt.prototype.visitIntervalDayTime=yt;lt.prototype.visitIntervalYearMonth=yt;lt.prototype.visitFixedSizeList=yt;lt.prototype.visitMap=yt;const yM=new lt,Jfe=(t,e)=>t+e;class Ld extends Dt{visitNull(e,n){return 0}visitInt(e,n){return e.type.bitWidth/8}visitFloat(e,n){return e.type.ArrayType.BYTES_PER_ELEMENT}visitBool(e,n){return 1/8}visitDecimal(e,n){return e.type.bitWidth/8}visitDate(e,n){return(e.type.unit+1)*4}visitTime(e,n){return e.type.bitWidth/8}visitTimestamp(e,n){return e.type.unit===Xt.SECOND?4:8}visitInterval(e,n){return(e.type.unit+1)*4}visitStruct(e,n){return e.children.reduce((i,s)=>i+Go.visit(s,n),0)}visitFixedSizeBinary(e,n){return e.type.byteWidth}visitMap(e,n){return 8+e.children.reduce((i,s)=>i+Go.visit(s,n),0)}visitDictionary(e,n){var i;return e.type.indices.bitWidth/8+(((i=e.dictionary)===null||i===void 0?void 0:i.getByteLength(e.values[n]))||0)}}const Qfe=({valueOffsets:t},e)=>8+(t[e+1]-t[e]),Zfe=({valueOffsets:t},e)=>8+(t[e+1]-t[e]),eue=({valueOffsets:t,stride:e,children:n},i)=>{const s=n[0],{[i*e]:o}=t,{[i*e+1]:c}=t,d=Go.getVisitFn(s.type),f=s.slice(o,c-o);let u=8;for(let a=-1,_=c-o;++a<_;)u+=d(f,a);return u},tue=({stride:t,children:e},n)=>{const i=e[0],s=i.slice(n*t,t),o=Go.getVisitFn(i.type);let c=0;for(let d=-1,f=s.length;++d<f;)c+=o(s,d);return c},nue=(t,e)=>t.type.mode===yr.Dense?b9(t,e):T9(t,e),b9=({type:t,children:e,typeIds:n,valueOffsets:i},s)=>{const o=t.typeIdToChildIndex[n[s]];return 8+Go.visit(e[o],i[s])},T9=({children:t},e)=>4+Go.visitMany(t,t.map(()=>e)).reduce(Jfe,0);Ld.prototype.visitUtf8=Qfe;Ld.prototype.visitBinary=Zfe;Ld.prototype.visitList=eue;Ld.prototype.visitFixedSizeList=tue;Ld.prototype.visitUnion=nue;Ld.prototype.visitDenseUnion=b9;Ld.prototype.visitSparseUnion=T9;const Go=new Ld;var v9;const E9={},S9={};class nn{constructor(e){var n,i,s;const o=e[0]instanceof nn?e.flatMap(d=>d.data):e;if(o.length===0||o.some(d=>!(d instanceof gn)))throw new TypeError("Vector constructor expects an Array of Data instances.");const c=(n=o[0])===null||n===void 0?void 0:n.type;switch(o.length){case 0:this._offsets=[0];break;case 1:{const{get:d,set:f,indexOf:u,byteLength:a}=E9[c.typeId],_=o[0];this.isValid=w=>_M(_,w),this.get=w=>d(_,w),this.set=(w,m)=>f(_,w,m),this.indexOf=w=>u(_,w),this.getByteLength=w=>a(_,w),this._offsets=[0,_.length];break}default:Object.setPrototypeOf(this,S9[c.typeId]),this._offsets=g9(o);break}this.data=o,this.type=c,this.stride=Tl(c),this.numChildren=(s=(i=c.children)===null||i===void 0?void 0:i.length)!==null&&s!==void 0?s:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return this._byteLength===-1&&(this._byteLength=this.data.reduce((e,n)=>e+n.byteLength,0)),this._byteLength}get nullCount(){return this._nullCount===-1&&(this._nullCount=p9(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${Q[this.type.typeId]}Vector`}isValid(e){return!1}get(e){return null}set(e,n){}indexOf(e,n){return-1}includes(e,n){return this.indexOf(e,n)>0}getByteLength(e){return 0}[Symbol.iterator](){return yM.visit(this)}concat(...e){return new nn(this.data.concat(e.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(e,n){return new nn(u9(this,e,n,({data:i,_offsets:s},o,c)=>_9(i,s,o,c)))}toJSON(){return[...this]}toArray(){const{type:e,data:n,length:i,stride:s,ArrayType:o}=this;switch(e.typeId){case Q.Int:case Q.Float:case Q.Decimal:case Q.Time:case Q.Timestamp:switch(n.length){case 0:return new o;case 1:return n[0].values.subarray(0,i*s);default:return n.reduce((c,{values:d})=>(c.array.set(d,c.offset),c.offset+=d.length,c),{array:new o(i*s),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(e){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(i=>i.name===e))}getChildAt(e){return e>-1&&e<this.numChildren?new nn(this.data.map(({children:n})=>n[e])):null}get isMemoized(){return tt.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(tt.isDictionary(this.type)){const e=new Tv(this.data[0].dictionary),n=this.data.map(i=>{const s=i.clone();return s.dictionary=e,s});return new nn(n)}return new Tv(this)}unmemoize(){if(tt.isDictionary(this.type)&&this.isMemoized){const e=this.data[0].dictionary.unmemoize(),n=this.data.map(i=>{const s=i.clone();return s.dictionary=e,s});return new nn(n)}return this}}v9=Symbol.toStringTag;nn[v9]=(t=>{t.type=tt.prototype,t.data=[],t.length=0,t.stride=1,t.numChildren=0,t._nullCount=-1,t._byteLength=-1,t._offsets=new Uint32Array([0]),t[Symbol.isConcatSpreadable]=!0;const e=Object.keys(Q).map(n=>Q[n]).filter(n=>typeof n=="number"&&n!==Q.NONE);for(const n of e){const i=Gs.getVisitFnByTypeId(n),s=Yr.getVisitFnByTypeId(n),o=bv.getVisitFnByTypeId(n),c=Go.getVisitFnByTypeId(n);E9[n]={get:i,set:s,indexOf:o,byteLength:c},S9[n]=Object.create(t,{isValid:{value:Yh(_M)},get:{value:Yh(Gs.getVisitFnByTypeId(n))},set:{value:y9(Yr.getVisitFnByTypeId(n))},indexOf:{value:m9(bv.getVisitFnByTypeId(n))},getByteLength:{value:Yh(Go.getVisitFnByTypeId(n))}})}return"Vector"})(nn.prototype);class Tv extends nn{constructor(e){super(e.data);const n=this.get,i=this.set,s=this.slice,o=new Array(this.length);Object.defineProperty(this,"get",{value(c){const d=o[c];if(d!==void 0)return d;const f=n.call(this,c);return o[c]=f,f}}),Object.defineProperty(this,"set",{value(c,d){i.call(this,c,d),o[c]=d}}),Object.defineProperty(this,"slice",{value:(c,d)=>new Tv(s.call(this,c,d))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new nn(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}class Qk{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(e,n,i,s){return e.prep(8,24),e.writeInt64(s),e.pad(4),e.writeInt32(i),e.writeInt64(n),e.offset()}}class Qn{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsKeyValue(e,n){return(n||new Qn).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsKeyValue(e,n){return e.setPosition(e.position()+Ge),(n||new Qn).__init(e.readInt32(e.position())+e.position(),e)}key(e){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,e):null}value(e){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,e):null}static startKeyValue(e){e.startObject(2)}static addKey(e,n){e.addFieldOffset(0,n,0)}static addValue(e,n){e.addFieldOffset(1,n,0)}static endKeyValue(e){return e.endObject()}static createKeyValue(e,n,i){return Qn.startKeyValue(e),Qn.addKey(e,n),Qn.addValue(e,i),Qn.endKeyValue(e)}}var xp;(function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"})(xp||(xp={}));var Bp;(function(t){t[t.Little=0]="Little",t[t.Big=1]="Big"})(Bp||(Bp={}));var vv;(function(t){t[t.DenseArray=0]="DenseArray"})(vv||(vv={}));class dr{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsInt(e,n){return(n||new dr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInt(e,n){return e.setPosition(e.position()+Ge),(n||new dr).__init(e.readInt32(e.position())+e.position(),e)}bitWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}isSigned(){const e=this.bb.__offset(this.bb_pos,6);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startInt(e){e.startObject(2)}static addBitWidth(e,n){e.addFieldInt32(0,n,0)}static addIsSigned(e,n){e.addFieldInt8(1,+n,0)}static endInt(e){return e.endObject()}static createInt(e,n,i){return dr.startInt(e),dr.addBitWidth(e,n),dr.addIsSigned(e,i),dr.endInt(e)}}class Ml{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDictionaryEncoding(e,n){return(n||new Ml).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryEncoding(e,n){return e.setPosition(e.position()+Ge),(n||new Ml).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}indexType(e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new dr).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}dictionaryKind(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt16(this.bb_pos+e):vv.DenseArray}static startDictionaryEncoding(e){e.startObject(4)}static addId(e,n){e.addFieldInt64(0,n,e.createLong(0,0))}static addIndexType(e,n){e.addFieldOffset(1,n,0)}static addIsOrdered(e,n){e.addFieldInt8(2,+n,0)}static addDictionaryKind(e,n){e.addFieldInt16(3,n,vv.DenseArray)}static endDictionaryEncoding(e){return e.endObject()}}class Mf{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsBinary(e,n){return(n||new Mf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBinary(e,n){return e.setPosition(e.position()+Ge),(n||new Mf).__init(e.readInt32(e.position())+e.position(),e)}static startBinary(e){e.startObject(0)}static endBinary(e){return e.endObject()}static createBinary(e){return Mf.startBinary(e),Mf.endBinary(e)}}class Af{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsBool(e,n){return(n||new Af).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBool(e,n){return e.setPosition(e.position()+Ge),(n||new Af).__init(e.readInt32(e.position())+e.position(),e)}static startBool(e){e.startObject(0)}static endBool(e){return e.endObject()}static createBool(e){return Af.startBool(e),Af.endBool(e)}}var Ev;(function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"})(Ev||(Ev={}));class ho{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDate(e,n){return(n||new ho).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDate(e,n){return e.setPosition(e.position()+Ge),(n||new ho).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Ev.MILLISECOND}static startDate(e){e.startObject(1)}static addUnit(e,n){e.addFieldInt16(0,n,Ev.MILLISECOND)}static endDate(e){return e.endObject()}static createDate(e,n){return ho.startDate(e),ho.addUnit(e,n),ho.endDate(e)}}class Ss{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDecimal(e,n){return(n||new Ss).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDecimal(e,n){return e.setPosition(e.position()+Ge),(n||new Ss).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}scale(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0}bitWidth(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):128}static startDecimal(e){e.startObject(3)}static addPrecision(e,n){e.addFieldInt32(0,n,0)}static addScale(e,n){e.addFieldInt32(1,n,0)}static addBitWidth(e,n){e.addFieldInt32(2,n,128)}static endDecimal(e){return e.endObject()}static createDecimal(e,n,i,s){return Ss.startDecimal(e),Ss.addPrecision(e,n),Ss.addScale(e,i),Ss.addBitWidth(e,s),Ss.endDecimal(e)}}var kp;(function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"})(kp||(kp={}));class po{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFixedSizeBinary(e,n){return(n||new po).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeBinary(e,n){return e.setPosition(e.position()+Ge),(n||new po).__init(e.readInt32(e.position())+e.position(),e)}byteWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeBinary(e){e.startObject(1)}static addByteWidth(e,n){e.addFieldInt32(0,n,0)}static endFixedSizeBinary(e){return e.endObject()}static createFixedSizeBinary(e,n){return po.startFixedSizeBinary(e),po.addByteWidth(e,n),po.endFixedSizeBinary(e)}}class go{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFixedSizeList(e,n){return(n||new go).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeList(e,n){return e.setPosition(e.position()+Ge),(n||new go).__init(e.readInt32(e.position())+e.position(),e)}listSize(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeList(e){e.startObject(1)}static addListSize(e,n){e.addFieldInt32(0,n,0)}static endFixedSizeList(e){return e.endObject()}static createFixedSizeList(e,n){return go.startFixedSizeList(e),go.addListSize(e,n),go.endFixedSizeList(e)}}var Sv;(function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"})(Sv||(Sv={}));class _o{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFloatingPoint(e,n){return(n||new _o).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFloatingPoint(e,n){return e.setPosition(e.position()+Ge),(n||new _o).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Sv.HALF}static startFloatingPoint(e){e.startObject(1)}static addPrecision(e,n){e.addFieldInt16(0,n,Sv.HALF)}static endFloatingPoint(e){return e.endObject()}static createFloatingPoint(e,n){return _o.startFloatingPoint(e),_o.addPrecision(e,n),_o.endFloatingPoint(e)}}var xv;(function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(xv||(xv={}));class yo{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsInterval(e,n){return(n||new yo).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInterval(e,n){return e.setPosition(e.position()+Ge),(n||new yo).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):xv.YEAR_MONTH}static startInterval(e){e.startObject(1)}static addUnit(e,n){e.addFieldInt16(0,n,xv.YEAR_MONTH)}static endInterval(e){return e.endObject()}static createInterval(e,n){return yo.startInterval(e),yo.addUnit(e,n),yo.endInterval(e)}}class Nf{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsList(e,n){return(n||new Nf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsList(e,n){return e.setPosition(e.position()+Ge),(n||new Nf).__init(e.readInt32(e.position())+e.position(),e)}static startList(e){e.startObject(0)}static endList(e){return e.endObject()}static createList(e){return Nf.startList(e),Nf.endList(e)}}class mo{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsMap(e,n){return(n||new mo).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMap(e,n){return e.setPosition(e.position()+Ge),(n||new mo).__init(e.readInt32(e.position())+e.position(),e)}keysSorted(){const e=this.bb.__offset(this.bb_pos,4);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startMap(e){e.startObject(1)}static addKeysSorted(e,n){e.addFieldInt8(0,+n,0)}static endMap(e){return e.endObject()}static createMap(e,n){return mo.startMap(e),mo.addKeysSorted(e,n),mo.endMap(e)}}class Cf{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsNull(e,n){return(n||new Cf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsNull(e,n){return e.setPosition(e.position()+Ge),(n||new Cf).__init(e.readInt32(e.position())+e.position(),e)}static startNull(e){e.startObject(0)}static endNull(e){return e.endObject()}static createNull(e){return Cf.startNull(e),Cf.endNull(e)}}class Rf{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsStruct_(e,n){return(n||new Rf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsStruct_(e,n){return e.setPosition(e.position()+Ge),(n||new Rf).__init(e.readInt32(e.position())+e.position(),e)}static startStruct_(e){e.startObject(0)}static endStruct_(e){return e.endObject()}static createStruct_(e){return Rf.startStruct_(e),Rf.endStruct_(e)}}class Ar{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsTime(e,n){return(n||new Ar).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTime(e,n){return e.setPosition(e.position()+Ge),(n||new Ar).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):kp.MILLISECOND}bitWidth(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):32}static startTime(e){e.startObject(2)}static addUnit(e,n){e.addFieldInt16(0,n,kp.MILLISECOND)}static addBitWidth(e,n){e.addFieldInt32(1,n,32)}static endTime(e){return e.endObject()}static createTime(e,n,i){return Ar.startTime(e),Ar.addUnit(e,n),Ar.addBitWidth(e,i),Ar.endTime(e)}}class Nr{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsTimestamp(e,n){return(n||new Nr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTimestamp(e,n){return e.setPosition(e.position()+Ge),(n||new Nr).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):kp.SECOND}timezone(e){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,e):null}static startTimestamp(e){e.startObject(2)}static addUnit(e,n){e.addFieldInt16(0,n,kp.SECOND)}static addTimezone(e,n){e.addFieldOffset(1,n,0)}static endTimestamp(e){return e.endObject()}static createTimestamp(e,n,i){return Nr.startTimestamp(e),Nr.addUnit(e,n),Nr.addTimezone(e,i),Nr.endTimestamp(e)}}var Bv;(function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"})(Bv||(Bv={}));class Is{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsUnion(e,n){return(n||new Is).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUnion(e,n){return e.setPosition(e.position()+Ge),(n||new Is).__init(e.readInt32(e.position())+e.position(),e)}mode(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Bv.Sparse}typeIds(e){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+e*4):0}typeIdsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}typeIdsArray(){const e=this.bb.__offset(this.bb_pos,6);return e?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}static startUnion(e){e.startObject(2)}static addMode(e,n){e.addFieldInt16(0,n,Bv.Sparse)}static addTypeIds(e,n){e.addFieldOffset(1,n,0)}static createTypeIdsVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addInt32(n[i]);return e.endVector()}static startTypeIdsVector(e,n){e.startVector(4,n,4)}static endUnion(e){return e.endObject()}static createUnion(e,n,i){return Is.startUnion(e),Is.addMode(e,n),Is.addTypeIds(e,i),Is.endUnion(e)}}class Lf{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsUtf8(e,n){return(n||new Lf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUtf8(e,n){return e.setPosition(e.position()+Ge),(n||new Lf).__init(e.readInt32(e.position())+e.position(),e)}static startUtf8(e){e.startObject(0)}static endUtf8(e){return e.endObject()}static createUtf8(e){return Lf.startUtf8(e),Lf.endUtf8(e)}}var Bn;(function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.FloatingPoint=3]="FloatingPoint",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct_=13]="Struct_",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Duration=18]="Duration",t[t.LargeBinary=19]="LargeBinary",t[t.LargeUtf8=20]="LargeUtf8",t[t.LargeList=21]="LargeList"})(Bn||(Bn={}));class Ri{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsField(e,n){return(n||new Ri).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsField(e,n){return e.setPosition(e.position()+Ge),(n||new Ri).__init(e.readInt32(e.position())+e.position(),e)}name(e){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,e):null}nullable(){const e=this.bb.__offset(this.bb_pos,6);return e?!!this.bb.readInt8(this.bb_pos+e):!1}typeType(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):Bn.NONE}type(e){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(e,this.bb_pos+n):null}dictionary(e){const n=this.bb.__offset(this.bb_pos,12);return n?(e||new Ml).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(e,n){const i=this.bb.__offset(this.bb_pos,14);return i?(n||new Ri).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}childrenLength(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,n){const i=this.bb.__offset(this.bb_pos,16);return i?(n||new Qn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__vector_len(this.bb_pos+e):0}static startField(e){e.startObject(7)}static addName(e,n){e.addFieldOffset(0,n,0)}static addNullable(e,n){e.addFieldInt8(1,+n,0)}static addTypeType(e,n){e.addFieldInt8(2,n,Bn.NONE)}static addType(e,n){e.addFieldOffset(3,n,0)}static addDictionary(e,n){e.addFieldOffset(4,n,0)}static addChildren(e,n){e.addFieldOffset(5,n,0)}static createChildrenVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addOffset(n[i]);return e.endVector()}static startChildrenVector(e,n){e.startVector(4,n,4)}static addCustomMetadata(e,n){e.addFieldOffset(6,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addOffset(n[i]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static endField(e){return e.endObject()}}class Hn{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsSchema(e,n){return(n||new Hn).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSchema(e,n){return e.setPosition(e.position()+Ge),(n||new Hn).__init(e.readInt32(e.position())+e.position(),e)}endianness(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Bp.Little}fields(e,n){const i=this.bb.__offset(this.bb_pos,6);return i?(n||new Ri).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}fieldsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new Qn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}features(e){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+e*8):this.bb.createLong(0,0)}featuresLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}static startSchema(e){e.startObject(4)}static addEndianness(e,n){e.addFieldInt16(0,n,Bp.Little)}static addFields(e,n){e.addFieldOffset(1,n,0)}static createFieldsVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addOffset(n[i]);return e.endVector()}static startFieldsVector(e,n){e.startVector(4,n,4)}static addCustomMetadata(e,n){e.addFieldOffset(2,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addOffset(n[i]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static addFeatures(e,n){e.addFieldOffset(3,n,0)}static createFeaturesVector(e,n){e.startVector(8,n.length,8);for(let i=n.length-1;i>=0;i--)e.addInt64(n[i]);return e.endVector()}static startFeaturesVector(e,n){e.startVector(8,n,8)}static endSchema(e){return e.endObject()}static finishSchemaBuffer(e,n){e.finish(n)}static finishSizePrefixedSchemaBuffer(e,n){e.finish(n,void 0,!0)}static createSchema(e,n,i,s,o){return Hn.startSchema(e),Hn.addEndianness(e,n),Hn.addFields(e,i),Hn.addCustomMetadata(e,s),Hn.addFeatures(e,o),Hn.endSchema(e)}}class rr{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFooter(e,n){return(n||new rr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFooter(e,n){return e.setPosition(e.position()+Ge),(n||new rr).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):xp.V1}schema(e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new Hn).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(e,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new Qk).__init(this.bb.__vector(this.bb_pos+i)+e*24,this.bb):null}dictionariesLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}recordBatches(e,n){const i=this.bb.__offset(this.bb_pos,10);return i?(n||new Qk).__init(this.bb.__vector(this.bb_pos+i)+e*24,this.bb):null}recordBatchesLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,n){const i=this.bb.__offset(this.bb_pos,12);return i?(n||new Qn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startFooter(e){e.startObject(5)}static addVersion(e,n){e.addFieldInt16(0,n,xp.V1)}static addSchema(e,n){e.addFieldOffset(1,n,0)}static addDictionaries(e,n){e.addFieldOffset(2,n,0)}static startDictionariesVector(e,n){e.startVector(24,n,8)}static addRecordBatches(e,n){e.addFieldOffset(3,n,0)}static startRecordBatchesVector(e,n){e.startVector(24,n,8)}static addCustomMetadata(e,n){e.addFieldOffset(4,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addOffset(n[i]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static endFooter(e){return e.endObject()}static finishFooterBuffer(e,n){e.finish(n)}static finishSizePrefixedFooterBuffer(e,n){e.finish(n,void 0,!0)}}class sn{constructor(e=[],n,i){this.fields=e||[],this.metadata=n||new Map,i||(i=Zk(e)),this.dictionaries=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(e=>e.name)}toString(){return`Schema<{ ${this.fields.map((e,n)=>`${n}: ${e}`).join(", ")} }>`}select(e){const n=new Set(e),i=this.fields.filter(s=>n.has(s.name));return new sn(i,this.metadata)}selectAt(e){const n=e.map(i=>this.fields[i]).filter(Boolean);return new sn(n,this.metadata)}assign(...e){const n=e[0]instanceof sn?e[0]:Array.isArray(e[0])?new sn(e[0]):new sn(e),i=[...this.fields],s=Ub(Ub(new Map,this.metadata),n.metadata),o=n.fields.filter(d=>{const f=i.findIndex(u=>u.name===d.name);return~f?(i[f]=d.clone({metadata:Ub(Ub(new Map,i[f].metadata),d.metadata)}))&&!1:!0}),c=Zk(o,new Map);return new sn([...i,...o],s,new Map([...this.dictionaries,...c]))}}sn.prototype.fields=null;sn.prototype.metadata=null;sn.prototype.dictionaries=null;class vn{constructor(e,n,i=!1,s){this.name=e,this.type=n,this.nullable=i,this.metadata=s||new Map}static new(...e){let[n,i,s,o]=e;return e[0]&&typeof e[0]=="object"&&({name:n}=e[0],i===void 0&&(i=e[0].type),s===void 0&&(s=e[0].nullable),o===void 0&&(o=e[0].metadata)),new vn(`${n}`,i,s,o)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...e){let[n,i,s,o]=e;return!e[0]||typeof e[0]!="object"?[n=this.name,i=this.type,s=this.nullable,o=this.metadata]=e:{name:n=this.name,type:i=this.type,nullable:s=this.nullable,metadata:o=this.metadata}=e[0],vn.new(n,i,s,o)}}vn.prototype.type=null;vn.prototype.name=null;vn.prototype.nullable=null;vn.prototype.metadata=null;function Ub(t,e){return new Map([...t||new Map,...e||new Map])}function Zk(t,e=new Map){for(let n=-1,i=t.length;++n<i;){const o=t[n].type;if(tt.isDictionary(o)){if(!e.has(o.id))e.set(o.id,o.dictionary);else if(e.get(o.id)!==o.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}o.children&&o.children.length>0&&Zk(o.children,e)}return e}var YD=hs,iue=sg,sue=Vr;class Ty{constructor(e,n=fr.V4,i,s){this.schema=e,this.version=n,i&&(this._recordBatches=i),s&&(this._dictionaryBatches=s)}static decode(e){e=new sue(Yt(e));const n=rr.getRootAsFooter(e),i=sn.decode(n.schema());return new rue(i,n)}static encode(e){const n=new iue,i=sn.encode(n,e.schema);rr.startRecordBatchesVector(n,e.numRecordBatches);for(const c of[...e.recordBatches()].slice().reverse())fd.encode(n,c);const s=n.endVector();rr.startDictionariesVector(n,e.numDictionaries);for(const c of[...e.dictionaryBatches()].slice().reverse())fd.encode(n,c);const o=n.endVector();return rr.startFooter(n),rr.addSchema(n,i),rr.addVersion(n,fr.V4),rr.addRecordBatches(n,s),rr.addDictionaries(n,o),rr.finishFooterBuffer(n,rr.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let e,n=-1,i=this.numRecordBatches;++n<i;)(e=this.getRecordBatch(n))&&(yield e)}*dictionaryBatches(){for(let e,n=-1,i=this.numDictionaries;++n<i;)(e=this.getDictionaryBatch(n))&&(yield e)}getRecordBatch(e){return e>=0&&e<this.numRecordBatches&&this._recordBatches[e]||null}getDictionaryBatch(e){return e>=0&&e<this.numDictionaries&&this._dictionaryBatches[e]||null}}class rue extends Ty{constructor(e,n){super(e,n.version()),this._footer=n}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(e){if(e>=0&&e<this.numRecordBatches){const n=this._footer.recordBatches(e);if(n)return fd.decode(n)}return null}getDictionaryBatch(e){if(e>=0&&e<this.numDictionaries){const n=this._footer.dictionaries(e);if(n)return fd.decode(n)}return null}}class fd{constructor(e,n,i){this.metaDataLength=e,this.offset=typeof i=="number"?i:i.low,this.bodyLength=typeof n=="number"?n:n.low}static decode(e){return new fd(e.metaDataLength(),e.bodyLength(),e.offset())}static encode(e,n){const{metaDataLength:i}=n,s=new YD(n.offset,0),o=new YD(n.bodyLength,0);return Qk.createBlock(e,s,i,o)}}const Fn=Object.freeze({done:!0,value:void 0});class XD{constructor(e){this._json=e}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class mM{tee(){return this._getDOMStream().tee()}pipe(e,n){return this._getNodeStream().pipe(e,n)}pipeTo(e,n){return this._getDOMStream().pipeTo(e,n)}pipeThrough(e,n){return this._getDOMStream().pipeThrough(e,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class aue extends mM{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(e=>this._closedPromiseResolve=e)}get closed(){return this._closedPromise}cancel(e){return ye(this,void 0,void 0,function*(){yield this.return(e)})}write(e){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(e):this.resolvers.shift().resolve({done:!1,value:e}))}abort(e){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:e}:this.resolvers.shift().reject({done:!0,value:e}))}close(){if(this._closedPromiseResolve){const{resolvers:e}=this;for(;e.length>0;)e.shift().resolve(Fn);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(e){return Ir.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,e)}toNodeStream(e){return Ir.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,e)}throw(e){return ye(this,void 0,void 0,function*(){return yield this.abort(e),Fn})}return(e){return ye(this,void 0,void 0,function*(){return yield this.close(),Fn})}read(e){return ye(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return ye(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(...e){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,i)=>{this.resolvers.push({resolve:n,reject:i})}):Promise.resolve(Fn)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class I0 extends aue{write(e){if((e=Yt(e)).byteLength>0)return super.write(e)}toString(e=!1){return e?Hk(this.toUint8Array(!0)):this.toUint8Array(!1).then(Hk)}toUint8Array(e=!1){return e?qo(this._values)[0]:(()=>ye(this,void 0,void 0,function*(){var n,i;const s=[];let o=0;try{for(var c=us(this),d;d=yield c.next(),!d.done;){const f=d.value;s.push(f),o+=f.byteLength}}catch(f){n={error:f}}finally{try{d&&!d.done&&(i=c.return)&&(yield i.call(c))}finally{if(n)throw n.error}}return qo(s,o)[0]}))()}}class kv{constructor(e){e&&(this.source=new oue(Ir.fromIterable(e)))}[Symbol.iterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class Ip{constructor(e){e instanceof Ip?this.source=e.source:e instanceof I0?this.source=new Qd(Ir.fromAsyncIterable(e)):c7(e)?this.source=new Qd(Ir.fromNodeStream(e)):sM(e)?this.source=new Qd(Ir.fromDOMStream(e)):l7(e)?this.source=new Qd(Ir.fromDOMStream(e.body)):wm(e)?this.source=new Qd(Ir.fromIterable(e)):au(e)?this.source=new Qd(Ir.fromAsyncIterable(e)):dg(e)&&(this.source=new Qd(Ir.fromAsyncIterable(e)))}[Symbol.asyncIterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}get closed(){return this.source.closed}cancel(e){return this.source.cancel(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class oue{constructor(e){this.source=e}cancel(e){this.return(e)}peek(e){return this.next(e,"peek").value}read(e){return this.next(e,"read").value}next(e,n="read"){return this.source.next({cmd:n,size:e})}throw(e){return Object.create(this.source.throw&&this.source.throw(e)||Fn)}return(e){return Object.create(this.source.return&&this.source.return(e)||Fn)}}class Qd{constructor(e){this.source=e,this._closedPromise=new Promise(n=>this._closedPromiseResolve=n)}cancel(e){return ye(this,void 0,void 0,function*(){yield this.return(e)})}get closed(){return this._closedPromise}read(e){return ye(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return ye(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(e,n="read"){return ye(this,void 0,void 0,function*(){return yield this.source.next({cmd:n,size:e})})}throw(e){return ye(this,void 0,void 0,function*(){const n=this.source.throw&&(yield this.source.throw(e))||Fn;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}return(e){return ye(this,void 0,void 0,function*(){const n=this.source.return&&(yield this.source.return(e))||Fn;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}}class KD extends kv{constructor(e,n){super(),this.position=0,this.buffer=Yt(e),this.size=typeof n>"u"?this.buffer.byteLength:n}readInt32(e){const{buffer:n,byteOffset:i}=this.readAt(e,4);return new DataView(n,i).getInt32(0,!0)}seek(e){return this.position=Math.min(e,this.size),e<this.size}read(e){const{buffer:n,size:i,position:s}=this;return n&&s<i?(typeof e!="number"&&(e=Number.POSITIVE_INFINITY),this.position=Math.min(i,s+Math.min(i-s,e)),n.subarray(s,this.position)):null}readAt(e,n){const i=this.buffer,s=Math.min(this.size,e+n);return i?i.subarray(e,s):new Uint8Array(n)}close(){this.buffer&&(this.buffer=null)}throw(e){return this.close(),{done:!0,value:e}}return(e){return this.close(),{done:!0,value:e}}}class Iv extends Ip{constructor(e,n){super(),this.position=0,this._handle=e,typeof n=="number"?this.size=n:this._pending=(()=>ye(this,void 0,void 0,function*(){this.size=(yield e.stat()).size,delete this._pending}))()}readInt32(e){return ye(this,void 0,void 0,function*(){const{buffer:n,byteOffset:i}=yield this.readAt(e,4);return new DataView(n,i).getInt32(0,!0)})}seek(e){return ye(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(e,this.size),e<this.size})}read(e){return ye(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:n,size:i,position:s}=this;if(n&&s<i){typeof e!="number"&&(e=Number.POSITIVE_INFINITY);let o=s,c=0,d=0;const f=Math.min(i,o+Math.min(i-o,e)),u=new Uint8Array(Math.max(0,(this.position=f)-o));for(;(o+=d)<f&&(c+=d)<u.byteLength;)({bytesRead:d}=yield n.read(u,c,u.byteLength-c,o));return u}return null})}readAt(e,n){return ye(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:i,size:s}=this;if(i&&e+n<s){const o=Math.min(s,e+n),c=new Uint8Array(o-e);return(yield i.read(c,0,n,e)).buffer}return new Uint8Array(n)})}close(){return ye(this,void 0,void 0,function*(){const e=this._handle;this._handle=null,e&&(yield e.close())})}throw(e){return ye(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}return(e){return ye(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}}const lue=1<<16;function Ih(t){return t<0&&(t=4294967295+t+1),`0x${t.toString(16)}`}const Fp=8,wM=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class x9{constructor(e){this.buffer=e}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(e){const n=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),i=new Uint32Array([e.buffer[1]>>>16,e.buffer[1]&65535,e.buffer[0]>>>16,e.buffer[0]&65535]);let s=n[3]*i[3];this.buffer[0]=s&65535;let o=s>>>16;return s=n[2]*i[3],o+=s,s=n[3]*i[2]>>>0,o+=s,this.buffer[0]+=o<<16,this.buffer[1]=o>>>0<s?lue:0,this.buffer[1]+=o>>>16,this.buffer[1]+=n[1]*i[3]+n[2]*i[2]+n[3]*i[1],this.buffer[1]+=n[0]*i[3]+n[1]*i[2]+n[2]*i[1]+n[3]*i[0]<<16,this}_plus(e){const n=this.buffer[0]+e.buffer[0]>>>0;this.buffer[1]+=e.buffer[1],n<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=n}lessThan(e){return this.buffer[1]<e.buffer[1]||this.buffer[1]===e.buffer[1]&&this.buffer[0]<e.buffer[0]}equals(e){return this.buffer[1]===e.buffer[1]&&this.buffer[0]==e.buffer[0]}greaterThan(e){return e.lessThan(this)}hex(){return`${Ih(this.buffer[1])} ${Ih(this.buffer[0])}`}}class an extends x9{times(e){return this._times(e),this}plus(e){return this._plus(e),this}static from(e,n=new Uint32Array(2)){return an.fromString(typeof e=="string"?e:e.toString(),n)}static fromNumber(e,n=new Uint32Array(2)){return an.fromString(e.toString(),n)}static fromString(e,n=new Uint32Array(2)){const i=e.length,s=new an(n);for(let o=0;o<i;){const c=Fp<i-o?Fp:i-o,d=new an(new Uint32Array([Number.parseInt(e.slice(o,o+c),10),0])),f=new an(new Uint32Array([wM[c],0]));s.times(f),s.plus(d),o+=c}return s}static convertArray(e){const n=new Uint32Array(e.length*2);for(let i=-1,s=e.length;++i<s;)an.from(e[i],new Uint32Array(n.buffer,n.byteOffset+2*i*4,2));return n}static multiply(e,n){return new an(new Uint32Array(e.buffer)).times(n)}static add(e,n){return new an(new Uint32Array(e.buffer)).plus(n)}}class vs extends x9{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(e){return this._times(e),this}plus(e){return this._plus(e),this}lessThan(e){const n=this.buffer[1]<<0,i=e.buffer[1]<<0;return n<i||n===i&&this.buffer[0]<e.buffer[0]}static from(e,n=new Uint32Array(2)){return vs.fromString(typeof e=="string"?e:e.toString(),n)}static fromNumber(e,n=new Uint32Array(2)){return vs.fromString(e.toString(),n)}static fromString(e,n=new Uint32Array(2)){const i=e.startsWith("-"),s=e.length,o=new vs(n);for(let c=i?1:0;c<s;){const d=Fp<s-c?Fp:s-c,f=new vs(new Uint32Array([Number.parseInt(e.slice(c,c+d),10),0])),u=new vs(new Uint32Array([wM[d],0]));o.times(u),o.plus(f),c+=d}return i?o.negate():o}static convertArray(e){const n=new Uint32Array(e.length*2);for(let i=-1,s=e.length;++i<s;)vs.from(e[i],new Uint32Array(n.buffer,n.byteOffset+2*i*4,2));return n}static multiply(e,n){return new vs(new Uint32Array(e.buffer)).times(n)}static add(e,n){return new vs(new Uint32Array(e.buffer)).plus(n)}}class Ja{constructor(e){this.buffer=e}high(){return new vs(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new vs(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(e){const n=new an(new Uint32Array([this.buffer[3],0])),i=new an(new Uint32Array([this.buffer[2],0])),s=new an(new Uint32Array([this.buffer[1],0])),o=new an(new Uint32Array([this.buffer[0],0])),c=new an(new Uint32Array([e.buffer[3],0])),d=new an(new Uint32Array([e.buffer[2],0])),f=new an(new Uint32Array([e.buffer[1],0])),u=new an(new Uint32Array([e.buffer[0],0]));let a=an.multiply(o,u);this.buffer[0]=a.low();const _=new an(new Uint32Array([a.high(),0]));return a=an.multiply(s,u),_.plus(a),a=an.multiply(o,f),_.plus(a),this.buffer[1]=_.low(),this.buffer[3]=_.lessThan(a)?1:0,this.buffer[2]=_.high(),new an(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(an.multiply(i,u)).plus(an.multiply(s,f)).plus(an.multiply(o,d)),this.buffer[3]+=an.multiply(n,u).plus(an.multiply(i,f)).plus(an.multiply(s,d)).plus(an.multiply(o,c)).low(),this}plus(e){const n=new Uint32Array(4);return n[3]=this.buffer[3]+e.buffer[3]>>>0,n[2]=this.buffer[2]+e.buffer[2]>>>0,n[1]=this.buffer[1]+e.buffer[1]>>>0,n[0]=this.buffer[0]+e.buffer[0]>>>0,n[0]<this.buffer[0]>>>0&&++n[1],n[1]<this.buffer[1]>>>0&&++n[2],n[2]<this.buffer[2]>>>0&&++n[3],this.buffer[3]=n[3],this.buffer[2]=n[2],this.buffer[1]=n[1],this.buffer[0]=n[0],this}hex(){return`${Ih(this.buffer[3])} ${Ih(this.buffer[2])} ${Ih(this.buffer[1])} ${Ih(this.buffer[0])}`}static multiply(e,n){return new Ja(new Uint32Array(e.buffer)).times(n)}static add(e,n){return new Ja(new Uint32Array(e.buffer)).plus(n)}static from(e,n=new Uint32Array(4)){return Ja.fromString(typeof e=="string"?e:e.toString(),n)}static fromNumber(e,n=new Uint32Array(4)){return Ja.fromString(e.toString(),n)}static fromString(e,n=new Uint32Array(4)){const i=e.startsWith("-"),s=e.length,o=new Ja(n);for(let c=i?1:0;c<s;){const d=Fp<s-c?Fp:s-c,f=new Ja(new Uint32Array([Number.parseInt(e.slice(c,c+d),10),0,0,0])),u=new Ja(new Uint32Array([wM[d],0,0,0]));o.times(u),o.plus(f),c+=d}return i?o.negate():o}static convertArray(e){const n=new Uint32Array(e.length*4);for(let i=-1,s=e.length;++i<s;)Ja.from(e[i],new Uint32Array(n.buffer,n.byteOffset+4*4*i,4));return n}}class B9 extends Dt{constructor(e,n,i,s){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=e,this.nodes=n,this.buffers=i,this.dictionaries=s}visit(e){return super.visit(e instanceof vn?e.type:e)}visitNull(e,{length:n}=this.nextFieldNode()){return Ct({type:e,length:n})}visitBool(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ct({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitInt(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ct({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitFloat(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ct({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitUtf8(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ct({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitBinary(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ct({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitFixedSizeBinary(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ct({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitDate(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ct({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitTimestamp(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ct({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitTime(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ct({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitDecimal(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ct({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitList(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ct({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}visitStruct(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ct({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),children:this.visitMany(e.children)})}visitUnion(e){return e.mode===yr.Sparse?this.visitSparseUnion(e):this.visitDenseUnion(e)}visitDenseUnion(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ct({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),typeIds:this.readTypeIds(e),valueOffsets:this.readOffsets(e),children:this.visitMany(e.children)})}visitSparseUnion(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ct({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),typeIds:this.readTypeIds(e),children:this.visitMany(e.children)})}visitDictionary(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ct({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e.indices),dictionary:this.readDictionary(e)})}visitInterval(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ct({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitFixedSizeList(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ct({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),child:this.visit(e.children[0])})}visitMap(e,{length:n,nullCount:i}=this.nextFieldNode()){return Ct({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(e,n,i=this.nextBufferRange()){return n>0&&this.readData(e,i)||new Uint8Array(0)}readOffsets(e,n){return this.readData(e,n)}readTypeIds(e,n){return this.readData(e,n)}readData(e,{length:n,offset:i}=this.nextBufferRange()){return this.bytes.subarray(i,i+n)}readDictionary(e){return this.dictionaries.get(e.id)}}class cue extends B9{constructor(e,n,i,s){super(new Uint8Array(0),n,i,s),this.sources=e}readNullBitmap(e,n,{offset:i}=this.nextBufferRange()){return n<=0?new Uint8Array(0):wv(this.sources[i])}readOffsets(e,{offset:n}=this.nextBufferRange()){return hn(Uint8Array,hn(Int32Array,this.sources[n]))}readTypeIds(e,{offset:n}=this.nextBufferRange()){return hn(Uint8Array,hn(e.ArrayType,this.sources[n]))}readData(e,{offset:n}=this.nextBufferRange()){const{sources:i}=this;return tt.isTimestamp(e)||(tt.isInt(e)||tt.isTime(e))&&e.bitWidth===64||tt.isDate(e)&&e.unit===Jl.MILLISECOND?hn(Uint8Array,vs.convertArray(i[n])):tt.isDecimal(e)?hn(Uint8Array,Ja.convertArray(i[n])):tt.isBinary(e)||tt.isFixedSizeBinary(e)?due(i[n]):tt.isBool(e)?wv(i[n]):tt.isUtf8(e)?nM(i[n].join("")):hn(Uint8Array,hn(e.ArrayType,i[n].map(s=>+s)))}}function due(t){const e=t.join(""),n=new Uint8Array(e.length/2);for(let i=0;i<e.length;i+=2)n[i>>1]=Number.parseInt(e.slice(i,i+2),16);return n}class ct extends Dt{compareSchemas(e,n){return e===n||n instanceof e.constructor&&this.compareManyFields(e.fields,n.fields)}compareManyFields(e,n){return e===n||Array.isArray(e)&&Array.isArray(n)&&e.length===n.length&&e.every((i,s)=>this.compareFields(i,n[s]))}compareFields(e,n){return e===n||n instanceof e.constructor&&e.name===n.name&&e.nullable===n.nullable&&this.visit(e.type,n.type)}}function Qs(t,e){return e instanceof t.constructor}function bm(t,e){return t===e||Qs(t,e)}function ic(t,e){return t===e||Qs(t,e)&&t.bitWidth===e.bitWidth&&t.isSigned===e.isSigned}function bE(t,e){return t===e||Qs(t,e)&&t.precision===e.precision}function fue(t,e){return t===e||Qs(t,e)&&t.byteWidth===e.byteWidth}function bM(t,e){return t===e||Qs(t,e)&&t.unit===e.unit}function Tm(t,e){return t===e||Qs(t,e)&&t.unit===e.unit&&t.timezone===e.timezone}function vm(t,e){return t===e||Qs(t,e)&&t.unit===e.unit&&t.bitWidth===e.bitWidth}function uue(t,e){return t===e||Qs(t,e)&&t.children.length===e.children.length&&ud.compareManyFields(t.children,e.children)}function hue(t,e){return t===e||Qs(t,e)&&t.children.length===e.children.length&&ud.compareManyFields(t.children,e.children)}function TM(t,e){return t===e||Qs(t,e)&&t.mode===e.mode&&t.typeIds.every((n,i)=>n===e.typeIds[i])&&ud.compareManyFields(t.children,e.children)}function pue(t,e){return t===e||Qs(t,e)&&t.id===e.id&&t.isOrdered===e.isOrdered&&ud.visit(t.indices,e.indices)&&ud.visit(t.dictionary,e.dictionary)}function vM(t,e){return t===e||Qs(t,e)&&t.unit===e.unit}function gue(t,e){return t===e||Qs(t,e)&&t.listSize===e.listSize&&t.children.length===e.children.length&&ud.compareManyFields(t.children,e.children)}function _ue(t,e){return t===e||Qs(t,e)&&t.keysSorted===e.keysSorted&&t.children.length===e.children.length&&ud.compareManyFields(t.children,e.children)}ct.prototype.visitNull=bm;ct.prototype.visitBool=bm;ct.prototype.visitInt=ic;ct.prototype.visitInt8=ic;ct.prototype.visitInt16=ic;ct.prototype.visitInt32=ic;ct.prototype.visitInt64=ic;ct.prototype.visitUint8=ic;ct.prototype.visitUint16=ic;ct.prototype.visitUint32=ic;ct.prototype.visitUint64=ic;ct.prototype.visitFloat=bE;ct.prototype.visitFloat16=bE;ct.prototype.visitFloat32=bE;ct.prototype.visitFloat64=bE;ct.prototype.visitUtf8=bm;ct.prototype.visitBinary=bm;ct.prototype.visitFixedSizeBinary=fue;ct.prototype.visitDate=bM;ct.prototype.visitDateDay=bM;ct.prototype.visitDateMillisecond=bM;ct.prototype.visitTimestamp=Tm;ct.prototype.visitTimestampSecond=Tm;ct.prototype.visitTimestampMillisecond=Tm;ct.prototype.visitTimestampMicrosecond=Tm;ct.prototype.visitTimestampNanosecond=Tm;ct.prototype.visitTime=vm;ct.prototype.visitTimeSecond=vm;ct.prototype.visitTimeMillisecond=vm;ct.prototype.visitTimeMicrosecond=vm;ct.prototype.visitTimeNanosecond=vm;ct.prototype.visitDecimal=bm;ct.prototype.visitList=uue;ct.prototype.visitStruct=hue;ct.prototype.visitUnion=TM;ct.prototype.visitDenseUnion=TM;ct.prototype.visitSparseUnion=TM;ct.prototype.visitDictionary=pue;ct.prototype.visitInterval=vM;ct.prototype.visitIntervalDayTime=vM;ct.prototype.visitIntervalYearMonth=vM;ct.prototype.visitFixedSizeList=gue;ct.prototype.visitMap=_ue;const ud=new ct;function eI(t,e){return ud.compareSchemas(t,e)}function Gx(t,e){return yue(t,e.map(n=>n.data.concat()))}function yue(t,e){const n=[...t.fields],i=[],s={numBatches:e.reduce((_,w)=>Math.max(_,w.length),0)};let o=0,c=0,d=-1;const f=e.length;let u,a=[];for(;s.numBatches-- >0;){for(c=Number.POSITIVE_INFINITY,d=-1;++d<f;)a[d]=u=e[d].shift(),c=Math.min(c,u?u.length:c);Number.isFinite(c)&&(a=mue(n,c,a,e,s),c>0&&(i[o++]=Ct({type:new cs(n),length:c,nullCount:0,children:a.slice()})))}return[t=t.assign(n),i.map(_=>new Zn(t,_))]}function mue(t,e,n,i,s){var o;const c=(e+63&-64)>>3;for(let d=-1,f=i.length;++d<f;){const u=n[d],a=u==null?void 0:u.length;if(a>=e)a===e?n[d]=u:(n[d]=u.slice(0,e),s.numBatches=Math.max(s.numBatches,i[d].unshift(u.slice(e,a-e))));else{const _=t[d];t[d]=_.clone({nullable:!0}),n[d]=(o=u==null?void 0:u._changeLengthAndBackfillNullBitmap(e))!==null&&o!==void 0?o:Ct({type:_.type,length:e,nullCount:e,nullBitmap:new Uint8Array(c)})}}return n}var k9;class os{constructor(...e){var n,i;if(e.length===0)return this.batches=[],this.schema=new sn([]),this._offsets=[0],this;let s,o;e[0]instanceof sn&&(s=e.shift()),e[e.length-1]instanceof Uint32Array&&(o=e.pop());const c=f=>{if(f){if(f instanceof Zn)return[f];if(f instanceof os)return f.batches;if(f instanceof gn){if(f.type instanceof cs)return[new Zn(new sn(f.type.children),f)]}else{if(Array.isArray(f))return f.flatMap(u=>c(u));if(typeof f[Symbol.iterator]=="function")return[...f].flatMap(u=>c(u));if(typeof f=="object"){const u=Object.keys(f),a=u.map(m=>new nn([f[m]])),_=new sn(u.map((m,l)=>new vn(String(m),a[l].type))),[,w]=Gx(_,a);return w.length===0?[new Zn(f)]:w}}}return[]},d=e.flatMap(f=>c(f));if(s=(i=s!=null?s:(n=d[0])===null||n===void 0?void 0:n.schema)!==null&&i!==void 0?i:new sn([]),!(s instanceof sn))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const f of d){if(!(f instanceof Zn))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!eI(s,f.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=s,this.batches=d,this._offsets=o!=null?o:g9(this.data)}get data(){return this.batches.map(({data:e})=>e)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((e,n)=>e+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=p9(this.data)),this._nullCount}isValid(e){return!1}get(e){return null}set(e,n){}indexOf(e,n){return-1}getByteLength(e){return 0}[Symbol.iterator](){return this.batches.length>0?yM.visit(new nn(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...e){const n=this.schema,i=this.data.concat(e.flatMap(({data:s})=>s));return new os(n,i.map(s=>new Zn(n,s)))}slice(e,n){const i=this.schema;[e,n]=u9({length:this.numRows},e,n);const s=_9(this.data,this._offsets,e,n);return new os(i,s.map(o=>new Zn(i,o)))}getChild(e){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===e))}getChildAt(e){if(e>-1&&e<this.schema.fields.length){const n=this.data.map(i=>i.children[e]);if(n.length===0){const{type:i}=this.schema.fields[e],s=Ct({type:i,length:0,nullCount:0});n.push(s._changeLengthAndBackfillNullBitmap(this.numRows))}return new nn(n)}return null}setChild(e,n){var i;return this.setChildAt((i=this.schema.fields)===null||i===void 0?void 0:i.findIndex(s=>s.name===e),n)}setChildAt(e,n){let i=this.schema,s=[...this.batches];if(e>-1&&e<this.numCols){n||(n=new nn([Ct({type:new cd,length:this.numRows})]));const o=i.fields.slice(),c=o[e].clone({type:n.type}),d=this.schema.fields.map((f,u)=>this.getChildAt(u));[o[e],d[e]]=[c,n],[i,s]=Gx(i,d)}return new os(i,s)}select(e){const n=this.schema.fields.reduce((i,s,o)=>i.set(s.name,o),new Map);return this.selectAt(e.map(i=>n.get(i)).filter(i=>i>-1))}selectAt(e){const n=this.schema.selectAt(e),i=this.batches.map(s=>s.selectAt(e));return new os(n,i)}assign(e){const n=this.schema.fields,[i,s]=e.schema.fields.reduce((d,f,u)=>{const[a,_]=d,w=n.findIndex(m=>m.name===f.name);return~w?_[w]=u:a.push(u),d},[[],[]]),o=this.schema.assign(e.schema),c=[...n.map((d,f)=>[f,s[f]]).map(([d,f])=>f===void 0?this.getChildAt(d):e.getChildAt(f)),...i.map(d=>e.getChildAt(d))].filter(Boolean);return new os(...Gx(o,c))}}k9=Symbol.toStringTag;os[k9]=(t=>(t.schema=null,t.batches=[],t._offsets=new Uint32Array([0]),t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,t.isValid=Yh(_M),t.get=Yh(Gs.getVisitFn(Q.Struct)),t.set=y9(Yr.getVisitFn(Q.Struct)),t.indexOf=m9(bv.getVisitFn(Q.Struct)),t.getByteLength=Yh(Go.getVisitFn(Q.Struct)),"Table"))(os.prototype);var I9;class Zn{constructor(...e){switch(e.length){case 2:{if([this.schema]=e,!(this.schema instanceof sn))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=Ct({nullCount:0,type:new cs(this.schema.fields),children:this.schema.fields.map(n=>Ct({type:n.type,nullCount:0}))})]=e,!(this.data instanceof gn))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=JD(this.schema,this.data.children);break}case 1:{const[n]=e,{fields:i,children:s,length:o}=Object.keys(n).reduce((f,u,a)=>(f.children[a]=n[u],f.length=Math.max(f.length,n[u].length),f.fields[a]=vn.new({name:u,type:n[u].type,nullable:!0}),f),{length:0,fields:new Array,children:new Array}),c=new sn(i),d=Ct({type:new cs(i),length:o,children:s,nullCount:0});[this.schema,this.data]=JD(c,d.children,o);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=F9(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(e){return this.data.getValid(e)}get(e){return Gs.visit(this.data,e)}set(e,n){return Yr.visit(this.data,e,n)}indexOf(e,n){return bv.visit(this.data,e,n)}getByteLength(e){return Go.visit(this.data,e)}[Symbol.iterator](){return yM.visit(new nn([this.data]))}toArray(){return[...this]}concat(...e){return new os(this.schema,[this,...e])}slice(e,n){const[i]=new nn([this.data]).slice(e,n).data;return new Zn(this.schema,i)}getChild(e){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(i=>i.name===e))}getChildAt(e){return e>-1&&e<this.schema.fields.length?new nn([this.data.children[e]]):null}setChild(e,n){var i;return this.setChildAt((i=this.schema.fields)===null||i===void 0?void 0:i.findIndex(s=>s.name===e),n)}setChildAt(e,n){let i=this.schema,s=this.data;if(e>-1&&e<this.numCols){n||(n=new nn([Ct({type:new cd,length:this.numRows})]));const o=i.fields.slice(),c=s.children.slice(),d=o[e].clone({type:n.type});[o[e],c[e]]=[d,n.data[0]],i=new sn(o,new Map(this.schema.metadata)),s=Ct({type:new cs(o),children:c})}return new Zn(i,s)}select(e){const n=this.schema.select(e),i=new cs(n.fields),s=[];for(const o of e){const c=this.schema.fields.findIndex(d=>d.name===o);~c&&(s[c]=this.data.children[c])}return new Zn(n,Ct({type:i,length:this.numRows,children:s}))}selectAt(e){const n=this.schema.selectAt(e),i=e.map(o=>this.data.children[o]).filter(Boolean),s=Ct({type:new cs(n.fields),length:this.numRows,children:i});return new Zn(n,s)}}I9=Symbol.toStringTag;Zn[I9]=(t=>(t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Zn.prototype);function JD(t,e,n=e.reduce((i,s)=>Math.max(i,s.length),0)){var i;const s=[...t.fields],o=[...e],c=(n+63&-64)>>3;for(const[d,f]of t.fields.entries()){const u=e[d];(!u||u.length!==n)&&(s[d]=f.clone({nullable:!0}),o[d]=(i=u==null?void 0:u._changeLengthAndBackfillNullBitmap(n))!==null&&i!==void 0?i:Ct({type:f.type,length:n,nullCount:n,nullBitmap:new Uint8Array(c)}))}return[t.assign(s),Ct({type:new cs(s),length:n,children:o})]}function F9(t,e,n=new Map){for(let i=-1,s=t.length;++i<s;){const c=t[i].type,d=e[i];if(tt.isDictionary(c)){if(!n.has(c.id))d.dictionary&&n.set(c.id,d.dictionary);else if(n.get(c.id)!==d.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}c.children&&c.children.length>0&&F9(c.children,d.children,n)}return n}class EM extends Zn{constructor(e){const n=e.fields.map(s=>Ct({type:s.type})),i=Ct({type:new cs(e.fields),nullCount:0,children:n});super(e,i)}}var Fv;(function(t){t[t.BUFFER=0]="BUFFER"})(Fv||(Fv={}));var Ov;(function(t){t[t.LZ4_FRAME=0]="LZ4_FRAME",t[t.ZSTD=1]="ZSTD"})(Ov||(Ov={}));class kc{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsBodyCompression(e,n){return(n||new kc).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBodyCompression(e,n){return e.setPosition(e.position()+Ge),(n||new kc).__init(e.readInt32(e.position())+e.position(),e)}codec(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb_pos+e):Ov.LZ4_FRAME}method(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb_pos+e):Fv.BUFFER}static startBodyCompression(e){e.startObject(2)}static addCodec(e,n){e.addFieldInt8(0,n,Ov.LZ4_FRAME)}static addMethod(e,n){e.addFieldInt8(1,n,Fv.BUFFER)}static endBodyCompression(e){return e.endObject()}static createBodyCompression(e,n,i){return kc.startBodyCompression(e),kc.addCodec(e,n),kc.addMethod(e,i),kc.endBodyCompression(e)}}class O9{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(e,n,i){return e.prep(8,16),e.writeInt64(i),e.writeInt64(n),e.offset()}}class M9{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(e,n,i){return e.prep(8,16),e.writeInt64(i),e.writeInt64(n),e.offset()}}class Fr{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsRecordBatch(e,n){return(n||new Fr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsRecordBatch(e,n){return e.setPosition(e.position()+Ge),(n||new Fr).__init(e.readInt32(e.position())+e.position(),e)}length(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}nodes(e,n){const i=this.bb.__offset(this.bb_pos,6);return i?(n||new M9).__init(this.bb.__vector(this.bb_pos+i)+e*16,this.bb):null}nodesLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}buffers(e,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new O9).__init(this.bb.__vector(this.bb_pos+i)+e*16,this.bb):null}buffersLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}compression(e){const n=this.bb.__offset(this.bb_pos,10);return n?(e||new kc).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(e){e.startObject(4)}static addLength(e,n){e.addFieldInt64(0,n,e.createLong(0,0))}static addNodes(e,n){e.addFieldOffset(1,n,0)}static startNodesVector(e,n){e.startVector(16,n,8)}static addBuffers(e,n){e.addFieldOffset(2,n,0)}static startBuffersVector(e,n){e.startVector(16,n,8)}static addCompression(e,n){e.addFieldOffset(3,n,0)}static endRecordBatch(e){return e.endObject()}}class Al{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDictionaryBatch(e,n){return(n||new Al).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryBatch(e,n){return e.setPosition(e.position()+Ge),(n||new Al).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}data(e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new Fr).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startDictionaryBatch(e){e.startObject(3)}static addId(e,n){e.addFieldInt64(0,n,e.createLong(0,0))}static addData(e,n){e.addFieldOffset(1,n,0)}static addIsDelta(e,n){e.addFieldInt8(2,+n,0)}static endDictionaryBatch(e){return e.endObject()}}var Mv;(function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"})(Mv||(Mv={}));class di{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsMessage(e,n){return(n||new di).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMessage(e,n){return e.setPosition(e.position()+Ge),(n||new di).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):xp.V1}headerType(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):Mv.NONE}header(e){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(e,this.bb_pos+n):null}bodyLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}customMetadata(e,n){const i=this.bb.__offset(this.bb_pos,12);return i?(n||new Qn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startMessage(e){e.startObject(5)}static addVersion(e,n){e.addFieldInt16(0,n,xp.V1)}static addHeaderType(e,n){e.addFieldInt8(1,n,Mv.NONE)}static addHeader(e,n){e.addFieldOffset(2,n,0)}static addBodyLength(e,n){e.addFieldInt64(3,n,e.createLong(0,0))}static addCustomMetadata(e,n){e.addFieldOffset(4,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addOffset(n[i]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static endMessage(e){return e.endObject()}static finishMessageBuffer(e,n){e.finish(n)}static finishSizePrefixedMessageBuffer(e,n){e.finish(n,void 0,!0)}static createMessage(e,n,i,s,o,c){return di.startMessage(e),di.addVersion(e,n),di.addHeaderType(e,i),di.addHeader(e,s),di.addBodyLength(e,o),di.addCustomMetadata(e,c),di.endMessage(e)}}var wue=hs;class bue extends Dt{visit(e,n){return e==null||n==null?void 0:super.visit(e,n)}visitNull(e,n){return Cf.startNull(n),Cf.endNull(n)}visitInt(e,n){return dr.startInt(n),dr.addBitWidth(n,e.bitWidth),dr.addIsSigned(n,e.isSigned),dr.endInt(n)}visitFloat(e,n){return _o.startFloatingPoint(n),_o.addPrecision(n,e.precision),_o.endFloatingPoint(n)}visitBinary(e,n){return Mf.startBinary(n),Mf.endBinary(n)}visitBool(e,n){return Af.startBool(n),Af.endBool(n)}visitUtf8(e,n){return Lf.startUtf8(n),Lf.endUtf8(n)}visitDecimal(e,n){return Ss.startDecimal(n),Ss.addScale(n,e.scale),Ss.addPrecision(n,e.precision),Ss.addBitWidth(n,e.bitWidth),Ss.endDecimal(n)}visitDate(e,n){return ho.startDate(n),ho.addUnit(n,e.unit),ho.endDate(n)}visitTime(e,n){return Ar.startTime(n),Ar.addUnit(n,e.unit),Ar.addBitWidth(n,e.bitWidth),Ar.endTime(n)}visitTimestamp(e,n){const i=e.timezone&&n.createString(e.timezone)||void 0;return Nr.startTimestamp(n),Nr.addUnit(n,e.unit),i!==void 0&&Nr.addTimezone(n,i),Nr.endTimestamp(n)}visitInterval(e,n){return yo.startInterval(n),yo.addUnit(n,e.unit),yo.endInterval(n)}visitList(e,n){return Nf.startList(n),Nf.endList(n)}visitStruct(e,n){return Rf.startStruct_(n),Rf.endStruct_(n)}visitUnion(e,n){Is.startTypeIdsVector(n,e.typeIds.length);const i=Is.createTypeIdsVector(n,e.typeIds);return Is.startUnion(n),Is.addMode(n,e.mode),Is.addTypeIds(n,i),Is.endUnion(n)}visitDictionary(e,n){const i=this.visit(e.indices,n);return Ml.startDictionaryEncoding(n),Ml.addId(n,new wue(e.id,0)),Ml.addIsOrdered(n,e.isOrdered),i!==void 0&&Ml.addIndexType(n,i),Ml.endDictionaryEncoding(n)}visitFixedSizeBinary(e,n){return po.startFixedSizeBinary(n),po.addByteWidth(n,e.byteWidth),po.endFixedSizeBinary(n)}visitFixedSizeList(e,n){return go.startFixedSizeList(n),go.addListSize(n,e.listSize),go.endFixedSizeList(n)}visitMap(e,n){return mo.startMap(n),mo.addKeysSorted(n,e.keysSorted),mo.endMap(n)}}const Vx=new bue;function Tue(t,e=new Map){return new sn(Eue(t,e),F0(t.customMetadata),e)}function A9(t){return new mr(t.count,N9(t.columns),C9(t.columns))}function vue(t){return new Vo(A9(t.data),t.id,t.isDelta)}function Eue(t,e){return(t.fields||[]).filter(Boolean).map(n=>vn.fromJSON(n,e))}function QD(t,e){return(t.children||[]).filter(Boolean).map(n=>vn.fromJSON(n,e))}function N9(t){return(t||[]).reduce((e,n)=>[...e,new ju(n.count,Sue(n.VALIDITY)),...N9(n.children)],[])}function C9(t,e=[]){for(let n=-1,i=(t||[]).length;++n<i;){const s=t[n];s.VALIDITY&&e.push(new vo(e.length,s.VALIDITY.length)),s.TYPE&&e.push(new vo(e.length,s.TYPE.length)),s.OFFSET&&e.push(new vo(e.length,s.OFFSET.length)),s.DATA&&e.push(new vo(e.length,s.DATA.length)),e=C9(s.children,e)}return e}function Sue(t){return(t||[]).reduce((e,n)=>e+ +(n===0),0)}function xue(t,e){let n,i,s,o,c,d;return!e||!(o=t.dictionary)?(c=e4(t,QD(t,e)),s=new vn(t.name,c,t.nullable,F0(t.customMetadata))):e.has(n=o.id)?(i=(i=o.indexType)?ZD(i):new my,d=new Sp(e.get(n),i,n,o.isOrdered),s=new vn(t.name,d,t.nullable,F0(t.customMetadata))):(i=(i=o.indexType)?ZD(i):new my,e.set(n,c=e4(t,QD(t,e))),d=new Sp(c,i,n,o.isOrdered),s=new vn(t.name,d,t.nullable,F0(t.customMetadata))),s||null}function F0(t){return new Map(Object.entries(t||{}))}function ZD(t){return new dd(t.isSigned,t.bitWidth)}function e4(t,e){const n=t.type.name;switch(n){case"NONE":return new cd;case"null":return new cd;case"binary":return new ov;case"utf8":return new lv;case"bool":return new cv;case"list":return new pv((e||[])[0]);case"struct":return new cs(e||[]);case"struct_":return new cs(e||[])}switch(n){case"int":{const i=t.type;return new dd(i.isSigned,i.bitWidth)}case"floatingpoint":{const i=t.type;return new wy(Cs[i.precision])}case"decimal":{const i=t.type;return new dv(i.scale,i.precision,i.bitWidth)}case"date":{const i=t.type;return new fv(Jl[i.unit])}case"time":{const i=t.type;return new by(Xt[i.unit],i.bitWidth)}case"timestamp":{const i=t.type;return new uv(Xt[i.unit],i.timezone)}case"interval":{const i=t.type;return new hv(ld[i.unit])}case"union":{const i=t.type;return new gv(yr[i.mode],i.typeIds||[],e||[])}case"fixedsizebinary":{const i=t.type;return new _v(i.byteWidth)}case"fixedsizelist":{const i=t.type;return new yv(i.listSize,(e||[])[0])}case"map":{const i=t.type;return new mv((e||[])[0],i.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var ou=hs,Bue=sg,kue=Vr;class ds{constructor(e,n,i,s){this._version=n,this._headerType=i,this.body=new Uint8Array(0),s&&(this._createHeader=()=>s),this._bodyLength=typeof e=="number"?e:e.low}static fromJSON(e,n){const i=new ds(0,fr.V4,n);return i._createHeader=Iue(e,n),i}static decode(e){e=new kue(Yt(e));const n=di.getRootAsMessage(e),i=n.bodyLength(),s=n.version(),o=n.headerType(),c=new ds(i,s,o);return c._createHeader=Fue(n,o),c}static encode(e){const n=new Bue;let i=-1;return e.isSchema()?i=sn.encode(n,e.header()):e.isRecordBatch()?i=mr.encode(n,e.header()):e.isDictionaryBatch()&&(i=Vo.encode(n,e.header())),di.startMessage(n),di.addVersion(n,fr.V4),di.addHeader(n,i),di.addHeaderType(n,e.headerType),di.addBodyLength(n,new ou(e.bodyLength,0)),di.finishMessageBuffer(n,di.endMessage(n)),n.asUint8Array()}static from(e,n=0){if(e instanceof sn)return new ds(0,fr.V4,tn.Schema,e);if(e instanceof mr)return new ds(n,fr.V4,tn.RecordBatch,e);if(e instanceof Vo)return new ds(n,fr.V4,tn.DictionaryBatch,e);throw new Error(`Unrecognized Message header: ${e}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===tn.Schema}isRecordBatch(){return this.headerType===tn.RecordBatch}isDictionaryBatch(){return this.headerType===tn.DictionaryBatch}}class mr{constructor(e,n,i){this._nodes=n,this._buffers=i,this._length=typeof e=="number"?e:e.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}}class Vo{constructor(e,n,i=!1){this._data=e,this._isDelta=i,this._id=typeof n=="number"?n:n.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}}class vo{constructor(e,n){this.offset=typeof e=="number"?e:e.low,this.length=typeof n=="number"?n:n.low}}class ju{constructor(e,n){this.length=typeof e=="number"?e:e.low,this.nullCount=typeof n=="number"?n:n.low}}function Iue(t,e){return()=>{switch(e){case tn.Schema:return sn.fromJSON(t);case tn.RecordBatch:return mr.fromJSON(t);case tn.DictionaryBatch:return Vo.fromJSON(t)}throw new Error(`Unrecognized Message type: { name: ${tn[e]}, type: ${e} }`)}}function Fue(t,e){return()=>{switch(e){case tn.Schema:return sn.decode(t.header(new Hn));case tn.RecordBatch:return mr.decode(t.header(new Fr),t.version());case tn.DictionaryBatch:return Vo.decode(t.header(new Al),t.version())}throw new Error(`Unrecognized Message type: { name: ${tn[e]}, type: ${e} }`)}}vn.encode=Uue;vn.decode=Due;vn.fromJSON=xue;sn.encode=jue;sn.decode=Oue;sn.fromJSON=Tue;mr.encode=$ue;mr.decode=Mue;mr.fromJSON=A9;Vo.encode=zue;Vo.decode=Aue;Vo.fromJSON=vue;ju.encode=que;ju.decode=Cue;vo.encode=Gue;vo.decode=Nue;function Oue(t,e=new Map){const n=Pue(t,e);return new sn(n,O0(t),e)}function Mue(t,e=fr.V4){if(t.compression()!==null)throw new Error("Record batch compression not implemented");return new mr(t.length(),Rue(t),Lue(t,e))}function Aue(t,e=fr.V4){return new Vo(mr.decode(t.data(),e),t.id(),t.isDelta())}function Nue(t){return new vo(t.offset(),t.length())}function Cue(t){return new ju(t.length(),t.nullCount())}function Rue(t){const e=[];for(let n,i=-1,s=-1,o=t.nodesLength();++i<o;)(n=t.nodes(i))&&(e[++s]=ju.decode(n));return e}function Lue(t,e){const n=[];for(let i,s=-1,o=-1,c=t.buffersLength();++s<c;)(i=t.buffers(s))&&(e<fr.V4&&(i.bb_pos+=8*(s+1)),n[++o]=vo.decode(i));return n}function Pue(t,e){const n=[];for(let i,s=-1,o=-1,c=t.fieldsLength();++s<c;)(i=t.fields(s))&&(n[++o]=vn.decode(i,e));return n}function t4(t,e){const n=[];for(let i,s=-1,o=-1,c=t.childrenLength();++s<c;)(i=t.children(s))&&(n[++o]=vn.decode(i,e));return n}function Due(t,e){let n,i,s,o,c,d;return!e||!(d=t.dictionary())?(s=i4(t,t4(t,e)),i=new vn(t.name(),s,t.nullable(),O0(t))):e.has(n=d.id().low)?(o=(o=d.indexType())?n4(o):new my,c=new Sp(e.get(n),o,n,d.isOrdered()),i=new vn(t.name(),c,t.nullable(),O0(t))):(o=(o=d.indexType())?n4(o):new my,e.set(n,s=i4(t,t4(t,e))),c=new Sp(s,o,n,d.isOrdered()),i=new vn(t.name(),c,t.nullable(),O0(t))),i||null}function O0(t){const e=new Map;if(t)for(let n,i,s=-1,o=Math.trunc(t.customMetadataLength());++s<o;)(n=t.customMetadata(s))&&(i=n.key())!=null&&e.set(i,n.value());return e}function n4(t){return new dd(t.isSigned(),t.bitWidth())}function i4(t,e){const n=t.typeType();switch(n){case Bn.NONE:return new cd;case Bn.Null:return new cd;case Bn.Binary:return new ov;case Bn.Utf8:return new lv;case Bn.Bool:return new cv;case Bn.List:return new pv((e||[])[0]);case Bn.Struct_:return new cs(e||[])}switch(n){case Bn.Int:{const i=t.type(new dr);return new dd(i.isSigned(),i.bitWidth())}case Bn.FloatingPoint:{const i=t.type(new _o);return new wy(i.precision())}case Bn.Decimal:{const i=t.type(new Ss);return new dv(i.scale(),i.precision(),i.bitWidth())}case Bn.Date:{const i=t.type(new ho);return new fv(i.unit())}case Bn.Time:{const i=t.type(new Ar);return new by(i.unit(),i.bitWidth())}case Bn.Timestamp:{const i=t.type(new Nr);return new uv(i.unit(),i.timezone())}case Bn.Interval:{const i=t.type(new yo);return new hv(i.unit())}case Bn.Union:{const i=t.type(new Is);return new gv(i.mode(),i.typeIdsArray()||[],e||[])}case Bn.FixedSizeBinary:{const i=t.type(new po);return new _v(i.byteWidth())}case Bn.FixedSizeList:{const i=t.type(new go);return new yv(i.listSize(),(e||[])[0])}case Bn.Map:{const i=t.type(new mo);return new mv((e||[])[0],i.keysSorted())}}throw new Error(`Unrecognized type: "${Bn[n]}" (${n})`)}function jue(t,e){const n=e.fields.map(o=>vn.encode(t,o));Hn.startFieldsVector(t,n.length);const i=Hn.createFieldsVector(t,n),s=e.metadata&&e.metadata.size>0?Hn.createCustomMetadataVector(t,[...e.metadata].map(([o,c])=>{const d=t.createString(`${o}`),f=t.createString(`${c}`);return Qn.startKeyValue(t),Qn.addKey(t,d),Qn.addValue(t,f),Qn.endKeyValue(t)})):-1;return Hn.startSchema(t),Hn.addFields(t,i),Hn.addEndianness(t,Vue?Bp.Little:Bp.Big),s!==-1&&Hn.addCustomMetadata(t,s),Hn.endSchema(t)}function Uue(t,e){let n=-1,i=-1,s=-1;const o=e.type;let c=e.typeId;tt.isDictionary(o)?(c=o.dictionary.typeId,s=Vx.visit(o,t),i=Vx.visit(o.dictionary,t)):i=Vx.visit(o,t);const d=(o.children||[]).map(a=>vn.encode(t,a)),f=Ri.createChildrenVector(t,d),u=e.metadata&&e.metadata.size>0?Ri.createCustomMetadataVector(t,[...e.metadata].map(([a,_])=>{const w=t.createString(`${a}`),m=t.createString(`${_}`);return Qn.startKeyValue(t),Qn.addKey(t,w),Qn.addValue(t,m),Qn.endKeyValue(t)})):-1;return e.name&&(n=t.createString(e.name)),Ri.startField(t),Ri.addType(t,i),Ri.addTypeType(t,c),Ri.addChildren(t,f),Ri.addNullable(t,!!e.nullable),n!==-1&&Ri.addName(t,n),s!==-1&&Ri.addDictionary(t,s),u!==-1&&Ri.addCustomMetadata(t,u),Ri.endField(t)}function $ue(t,e){const n=e.nodes||[],i=e.buffers||[];Fr.startNodesVector(t,n.length);for(const c of n.slice().reverse())ju.encode(t,c);const s=t.endVector();Fr.startBuffersVector(t,i.length);for(const c of i.slice().reverse())vo.encode(t,c);const o=t.endVector();return Fr.startRecordBatch(t),Fr.addLength(t,new ou(e.length,0)),Fr.addNodes(t,s),Fr.addBuffers(t,o),Fr.endRecordBatch(t)}function zue(t,e){const n=mr.encode(t,e.data);return Al.startDictionaryBatch(t),Al.addId(t,new ou(e.id,0)),Al.addIsDelta(t,e.isDelta),Al.addData(t,n),Al.endDictionaryBatch(t)}function que(t,e){return M9.createFieldNode(t,new ou(e.length,0),new ou(e.nullCount,0))}function Gue(t,e){return O9.createBuffer(t,new ou(e.offset,0),new ou(e.length,0))}const Vue=(()=>{const t=new ArrayBuffer(2);return new DataView(t).setInt16(0,256,!0),new Int16Array(t)[0]===256})(),SM=t=>`Expected ${tn[t]} Message in stream, but was null or length 0.`,xM=t=>`Header pointer of flatbuffer-encoded ${tn[t]} Message is null or length 0.`,R9=(t,e)=>`Expected to read ${t} metadata bytes, but only read ${e}.`,L9=(t,e)=>`Expected to read ${t} bytes for message body, but only read ${e}.`;class P9{constructor(e){this.source=e instanceof kv?e:new kv(e)}[Symbol.iterator](){return this}next(){let e;return(e=this.readMetadataLength()).done||e.value===-1&&(e=this.readMetadataLength()).done||(e=this.readMetadata(e.value)).done?Fn:e}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}readMessage(e){let n;if((n=this.next()).done)return null;if(e!=null&&n.value.headerType!==e)throw new Error(SM(e));return n.value}readMessageBody(e){if(e<=0)return new Uint8Array(0);const n=Yt(this.source.read(e));if(n.byteLength<e)throw new Error(L9(e,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()}readSchema(e=!1){const n=tn.Schema,i=this.readMessage(n),s=i==null?void 0:i.header();if(e&&!s)throw new Error(xM(n));return s}readMetadataLength(){const e=this.source.read(TE),n=e&&new Vr(e),i=(n==null?void 0:n.readInt32(0))||0;return{done:i===0,value:i}}readMetadata(e){const n=this.source.read(e);if(!n)return Fn;if(n.byteLength<e)throw new Error(R9(e,n.byteLength));return{done:!1,value:ds.decode(n)}}}class Wue{constructor(e,n){this.source=e instanceof Ip?e:o7(e)?new Iv(e,n):new Ip(e)}[Symbol.asyncIterator](){return this}next(){return ye(this,void 0,void 0,function*(){let e;return(e=yield this.readMetadataLength()).done||e.value===-1&&(e=yield this.readMetadataLength()).done||(e=yield this.readMetadata(e.value)).done?Fn:e})}throw(e){return ye(this,void 0,void 0,function*(){return yield this.source.throw(e)})}return(e){return ye(this,void 0,void 0,function*(){return yield this.source.return(e)})}readMessage(e){return ye(this,void 0,void 0,function*(){let n;if((n=yield this.next()).done)return null;if(e!=null&&n.value.headerType!==e)throw new Error(SM(e));return n.value})}readMessageBody(e){return ye(this,void 0,void 0,function*(){if(e<=0)return new Uint8Array(0);const n=Yt(yield this.source.read(e));if(n.byteLength<e)throw new Error(L9(e,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()})}readSchema(e=!1){return ye(this,void 0,void 0,function*(){const n=tn.Schema,i=yield this.readMessage(n),s=i==null?void 0:i.header();if(e&&!s)throw new Error(xM(n));return s})}readMetadataLength(){return ye(this,void 0,void 0,function*(){const e=yield this.source.read(TE),n=e&&new Vr(e),i=(n==null?void 0:n.readInt32(0))||0;return{done:i===0,value:i}})}readMetadata(e){return ye(this,void 0,void 0,function*(){const n=yield this.source.read(e);if(!n)return Fn;if(n.byteLength<e)throw new Error(R9(e,n.byteLength));return{done:!1,value:ds.decode(n)}})}}class Hue extends P9{constructor(e){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=e instanceof XD?e:new XD(e)}next(){const{_json:e}=this;if(!this._schema)return this._schema=!0,{done:!1,value:ds.fromJSON(e.schema,tn.Schema)};if(this._dictionaryIndex<e.dictionaries.length){const n=e.dictionaries[this._dictionaryIndex++];return this._body=n.data.columns,{done:!1,value:ds.fromJSON(n,tn.DictionaryBatch)}}if(this._batchIndex<e.batches.length){const n=e.batches[this._batchIndex++];return this._body=n.columns,{done:!1,value:ds.fromJSON(n,tn.RecordBatch)}}return this._body=[],Fn}readMessageBody(e){return n(this._body);function n(i){return(i||[]).reduce((s,o)=>[...s,...o.VALIDITY&&[o.VALIDITY]||[],...o.TYPE&&[o.TYPE]||[],...o.OFFSET&&[o.OFFSET]||[],...o.DATA&&[o.DATA]||[],...n(o.children)],[])}}readMessage(e){let n;if((n=this.next()).done)return null;if(e!=null&&n.value.headerType!==e)throw new Error(SM(e));return n.value}readSchema(){const e=tn.Schema,n=this.readMessage(e),i=n==null?void 0:n.header();if(!n||!i)throw new Error(xM(e));return i}}const TE=4,tI="ARROW1",vy=new Uint8Array(tI.length);for(let t=0;t<tI.length;t+=1)vy[t]=tI.codePointAt(t);function BM(t,e=0){for(let n=-1,i=vy.length;++n<i;)if(vy[n]!==t[e+n])return!1;return!0}const Em=vy.length,D9=Em+TE,Yue=Em*2+TE;class Ur extends mM{constructor(e){super(),this._impl=e}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(e){return this._impl.throw(e)}return(e){return this._impl.return(e)}cancel(){return this._impl.cancel()}reset(e){return this._impl.reset(e),this._DOMStream=void 0,this._nodeStream=void 0,this}open(e){const n=this._impl.open(e);return au(n)?n.then(()=>this):this}readRecordBatch(e){return this._impl.isFile()?this._impl.readRecordBatch(e):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return Ir.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return Ir.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,n){throw new Error('"throughDOM" not available in this environment')}static from(e){return e instanceof Ur?e:Yk(e)?Que(e):o7(e)?the(e):au(e)?(()=>ye(this,void 0,void 0,function*(){return yield Ur.from(yield e)}))():l7(e)||sM(e)||c7(e)||dg(e)?ehe(new Ip(e)):Zue(new kv(e))}static readAll(e){return e instanceof Ur?e.isSync()?s4(e):r4(e):Yk(e)||ArrayBuffer.isView(e)||wm(e)||a7(e)?s4(e):r4(e)}}class Av extends Ur{constructor(e){super(e),this._impl=e}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return Pn(this,arguments,function*(){yield Be(yield*qc(us(this[Symbol.iterator]())))})}}class Nv extends Ur{constructor(e){super(e),this._impl=e}readAll(){var e,n;return ye(this,void 0,void 0,function*(){const i=new Array;try{for(var s=us(this),o;o=yield s.next(),!o.done;){const c=o.value;i.push(c)}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=s.return)&&(yield n.call(s))}finally{if(e)throw e.error}}return i})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class j9 extends Av{constructor(e){super(e),this._impl=e}}class Xue extends Nv{constructor(e){super(e),this._impl=e}}class U9{constructor(e=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=e}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(e){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=e,this.dictionaries=new Map,this}_loadRecordBatch(e,n){const i=this._loadVectors(e,n,this.schema.fields),s=Ct({type:new cs(this.schema.fields),length:e.length,children:i});return new Zn(this.schema,s)}_loadDictionaryBatch(e,n){const{id:i,isDelta:s}=e,{dictionaries:o,schema:c}=this,d=o.get(i);if(s||!d){const f=c.dictionaries.get(i),u=this._loadVectors(e.data,n,[f]);return(d&&s?d.concat(new nn(u)):new nn(u)).memoize()}return d.memoize()}_loadVectors(e,n,i){return new B9(n,e.nodes,e.buffers,this.dictionaries).visitMany(i)}}class Cv extends U9{constructor(e,n){super(n),this._reader=Yk(e)?new Hue(this._handle=e):new P9(this._handle=e)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(e){return this.closed||(this.autoDestroy=z9(this,e),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(e):Fn}return(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(e):Fn}next(){if(this.closed)return Fn;let e;const{_reader:n}=this;for(;e=this._readNextMessageAndValidate();)if(e.isSchema())this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;const i=e.header(),s=n.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(i,s)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;const i=e.header(),s=n.readMessageBody(e.bodyLength),o=this._loadDictionaryBatch(i,s);this.dictionaries.set(i.id,o)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new EM(this.schema)}):this.return()}_readNextMessageAndValidate(e){return this._reader.readMessage(e)}}class Rv extends U9{constructor(e,n){super(n),this._reader=new Wue(this._handle=e)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return ye(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(e){return ye(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=z9(this,e),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(e){return ye(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(e):Fn})}return(e){return ye(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(e):Fn})}next(){return ye(this,void 0,void 0,function*(){if(this.closed)return Fn;let e;const{_reader:n}=this;for(;e=yield this._readNextMessageAndValidate();)if(e.isSchema())yield this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;const i=e.header(),s=yield n.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(i,s)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;const i=e.header(),s=yield n.readMessageBody(e.bodyLength),o=this._loadDictionaryBatch(i,s);this.dictionaries.set(i.id,o)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new EM(this.schema)}):yield this.return()})}_readNextMessageAndValidate(e){return ye(this,void 0,void 0,function*(){return yield this._reader.readMessage(e)})}}class $9 extends Cv{constructor(e,n){super(e instanceof KD?e:new KD(e),n)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(e){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const n of this._footer.dictionaryBatches())n&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(e)}readRecordBatch(e){var n;if(this.closed)return null;this._footer||this.open();const i=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(e);if(i&&this._handle.seek(i.offset)){const s=this._reader.readMessage(tn.RecordBatch);if(s!=null&&s.isRecordBatch()){const o=s.header(),c=this._reader.readMessageBody(s.bodyLength);return this._loadRecordBatch(o,c)}}return null}_readDictionaryBatch(e){var n;const i=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(e);if(i&&this._handle.seek(i.offset)){const s=this._reader.readMessage(tn.DictionaryBatch);if(s!=null&&s.isDictionaryBatch()){const o=s.header(),c=this._reader.readMessageBody(s.bodyLength),d=this._loadDictionaryBatch(o,c);this.dictionaries.set(o.id,d)}}}_readFooter(){const{_handle:e}=this,n=e.size-D9,i=e.readInt32(n),s=e.readAt(n-i,i);return Ty.decode(s)}_readNextMessageAndValidate(e){var n;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const i=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(this._recordBatchIndex);if(i&&this._handle.seek(i.offset))return this._reader.readMessage(e)}return null}}class Kue extends Rv{constructor(e,...n){const i=typeof n[0]!="number"?n.shift():void 0,s=n[0]instanceof Map?n.shift():void 0;super(e instanceof Iv?e:new Iv(e,i),s)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}open(e){const n=Object.create(null,{open:{get:()=>super.open}});return ye(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const i of this._footer.dictionaryBatches())i&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield n.open.call(this,e)})}readRecordBatch(e){var n;return ye(this,void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());const i=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(e);if(i&&(yield this._handle.seek(i.offset))){const s=yield this._reader.readMessage(tn.RecordBatch);if(s!=null&&s.isRecordBatch()){const o=s.header(),c=yield this._reader.readMessageBody(s.bodyLength);return this._loadRecordBatch(o,c)}}return null})}_readDictionaryBatch(e){var n;return ye(this,void 0,void 0,function*(){const i=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(e);if(i&&(yield this._handle.seek(i.offset))){const s=yield this._reader.readMessage(tn.DictionaryBatch);if(s!=null&&s.isDictionaryBatch()){const o=s.header(),c=yield this._reader.readMessageBody(s.bodyLength),d=this._loadDictionaryBatch(o,c);this.dictionaries.set(o.id,d)}}})}_readFooter(){return ye(this,void 0,void 0,function*(){const{_handle:e}=this;e._pending&&(yield e._pending);const n=e.size-D9,i=yield e.readInt32(n),s=yield e.readAt(n-i,i);return Ty.decode(s)})}_readNextMessageAndValidate(e){return ye(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=this._footer.getRecordBatch(this._recordBatchIndex);if(n&&(yield this._handle.seek(n.offset)))return yield this._reader.readMessage(e)}return null})}}class Jue extends Cv{constructor(e,n){super(e,n)}_loadVectors(e,n,i){return new cue(n,e.nodes,e.buffers,this.dictionaries).visitMany(i)}}function z9(t,e){return e&&typeof e.autoDestroy=="boolean"?e.autoDestroy:t.autoDestroy}function*s4(t){const e=Ur.from(t);try{if(!e.open({autoDestroy:!1}).closed)do yield e;while(!e.reset().open().closed)}finally{e.cancel()}}function r4(t){return Pn(this,arguments,function*(){const n=yield Be(Ur.from(t));try{if(!(yield Be(n.open({autoDestroy:!1}))).closed)do yield yield Be(n);while(!(yield Be(n.reset().open())).closed)}finally{yield Be(n.cancel())}})}function Que(t){return new Av(new Jue(t))}function Zue(t){const e=t.peek(Em+7&-8);return e&&e.byteLength>=4?BM(e)?new j9(new $9(t.read())):new Av(new Cv(t)):new Av(new Cv(function*(){}()))}function ehe(t){return ye(this,void 0,void 0,function*(){const e=yield t.peek(Em+7&-8);return e&&e.byteLength>=4?BM(e)?new j9(new $9(yield t.read())):new Nv(new Rv(t)):new Nv(new Rv(function(){return Pn(this,arguments,function*(){})}()))})}function the(t){return ye(this,void 0,void 0,function*(){const{size:e}=yield t.stat(),n=new Iv(t,e);return e>=Yue&&BM(yield n.readAt(0,Em+7&-8))?new Xue(new Kue(n)):new Nv(new Rv(n))})}class Un extends Dt{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(...e){const n=s=>s.flatMap(o=>Array.isArray(o)?n(o):o instanceof Zn?o.data.children:o.data),i=new Un;return i.visitMany(n(e)),i}visit(e){if(e instanceof nn)return this.visitMany(e.data),this;const{type:n}=e;if(!tt.isDictionary(n)){const{length:i,nullCount:s}=e;if(i>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");tt.isNull(n)||Fa.call(this,s<=0?new Uint8Array(0):hM(e.offset,i,e.nullBitmap)),this.nodes.push(new ju(i,s))}return super.visit(e)}visitNull(e){return this}visitDictionary(e){return this.visit(e.clone(e.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Fa(t){const e=t.byteLength+7&-8;return this.buffers.push(t),this.bufferRegions.push(new vo(this._byteLength,e)),this._byteLength+=e,this}function nhe(t){const{type:e,length:n,typeIds:i,valueOffsets:s}=t;if(Fa.call(this,i),e.mode===yr.Sparse)return nI.call(this,t);if(e.mode===yr.Dense){if(t.offset<=0)return Fa.call(this,s),nI.call(this,t);{const o=i.reduce((a,_)=>Math.max(a,_),i[0]),c=new Int32Array(o+1),d=new Int32Array(o+1).fill(-1),f=new Int32Array(n),u=aM(-s[0],n,s);for(let a,_,w=-1;++w<n;)(_=d[a=i[w]])===-1&&(_=d[a]=u[a]),f[w]=u[w]-_,++c[a];Fa.call(this,f);for(let a,_=-1,w=e.children.length;++_<w;)if(a=t.children[_]){const m=e.typeIds[_],l=Math.min(n,c[m]);this.visit(a.slice(d[m],l))}}}return this}function ihe(t){let e;return t.nullCount>=t.length?Fa.call(this,new Uint8Array(0)):(e=t.values)instanceof Uint8Array?Fa.call(this,hM(t.offset,t.length,e)):Fa.call(this,wv(t.values))}function Pd(t){return Fa.call(this,t.values.subarray(0,t.length*t.stride))}function q9(t){const{length:e,values:n,valueOffsets:i}=t,s=i[0],o=i[e],c=Math.min(o-s,n.byteLength-s);return Fa.call(this,aM(-i[0],e,i)),Fa.call(this,n.subarray(s,s+c)),this}function kM(t){const{length:e,valueOffsets:n}=t;return n&&Fa.call(this,aM(n[0],e,n)),this.visit(t.children[0])}function nI(t){return this.visitMany(t.type.children.map((e,n)=>t.children[n]).filter(Boolean))[0]}Un.prototype.visitBool=ihe;Un.prototype.visitInt=Pd;Un.prototype.visitFloat=Pd;Un.prototype.visitUtf8=q9;Un.prototype.visitBinary=q9;Un.prototype.visitFixedSizeBinary=Pd;Un.prototype.visitDate=Pd;Un.prototype.visitTimestamp=Pd;Un.prototype.visitTime=Pd;Un.prototype.visitDecimal=Pd;Un.prototype.visitList=kM;Un.prototype.visitStruct=nI;Un.prototype.visitUnion=nhe;Un.prototype.visitInterval=Pd;Un.prototype.visitFixedSizeList=kM;Un.prototype.visitMap=kM;class G9 extends mM{constructor(e){super(),this._position=0,this._started=!1,this._sink=new I0,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,qs(e)||(e={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof e.autoDestroy=="boolean"?e.autoDestroy:!0,this._writeLegacyIpcFormat=typeof e.writeLegacyIpcFormat=="boolean"?e.writeLegacyIpcFormat:!1}static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,n){throw new Error('"throughDOM" not available in this environment')}toString(e=!1){return this._sink.toString(e)}toUint8Array(e=!1){return this._sink.toUint8Array(e)}writeAll(e){return au(e)?e.then(n=>this.writeAll(n)):dg(e)?MM(this,e):OM(this,e)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(e){return this._sink.toDOMStream(e)}toNodeStream(e){return this._sink.toNodeStream(e)}close(){return this.reset()._sink.close()}abort(e){return this.reset()._sink.abort(e)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(e=this._sink,n=null){return e===this._sink||e instanceof I0?this._sink=e:(this._sink=new I0,e&&Sde(e)?this.toDOMStream({type:"bytes"}).pipeTo(e):e&&xde(e)&&this.toNodeStream({objectMode:!1}).pipe(e)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!eI(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(e){let n=null;if(this._sink){if(e==null)return this.finish()&&void 0;if(e instanceof os&&!(n=e.schema))return this.finish()&&void 0;if(e instanceof Zn&&!(n=e.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!eI(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}e instanceof Zn?e instanceof EM||this._writeRecordBatch(e):e instanceof os?this.writeAll(e.batches):wm(e)&&this.writeAll(e)}_writeMessage(e,n=8){const i=n-1,s=ds.encode(e),o=s.byteLength,c=this._writeLegacyIpcFormat?4:8,d=o+c+i&~i,f=d-o-c;return e.headerType===tn.RecordBatch?this._recordBatchBlocks.push(new fd(d,e.bodyLength,this._position)):e.headerType===tn.DictionaryBatch&&this._dictionaryBlocks.push(new fd(d,e.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(d-c)),o>0&&this._write(s),this._writePadding(f)}_write(e){if(this._started){const n=Yt(e);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(e){return this._writeMessage(ds.from(e))}_writeFooter(e){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(vy)}_writePadding(e){return e>0?this._write(new Uint8Array(e)):this}_writeRecordBatch(e){const{byteLength:n,nodes:i,bufferRegions:s,buffers:o}=Un.assemble(e),c=new mr(e.numRows,i,s),d=ds.from(c,n);return this._writeDictionaries(e)._writeMessage(d)._writeBodyBuffers(o)}_writeDictionaryBatch(e,n,i=!1){this._dictionaryDeltaOffsets.set(n,e.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:s,nodes:o,bufferRegions:c,buffers:d}=Un.assemble(new nn([e])),f=new mr(e.length,o,c),u=new Vo(f,n,i),a=ds.from(u,s);return this._writeMessage(a)._writeBodyBuffers(d)}_writeBodyBuffers(e){let n,i,s;for(let o=-1,c=e.length;++o<c;)(n=e[o])&&(i=n.byteLength)>0&&(this._write(n),(s=(i+7&-8)-i)>0&&this._writePadding(s));return this}_writeDictionaries(e){for(let[n,i]of e.dictionaries){let s=this._dictionaryDeltaOffsets.get(n)||0;if(s===0||(i=i==null?void 0:i.slice(s)).length>0)for(const o of i.data)this._writeDictionaryBatch(o,n,s>0),s+=o.length}return this}}class IM extends G9{static writeAll(e,n){const i=new IM(n);return au(e)?e.then(s=>i.writeAll(s)):dg(e)?MM(i,e):OM(i,e)}}class FM extends G9{static writeAll(e){const n=new FM;return au(e)?e.then(i=>n.writeAll(i)):dg(e)?MM(n,e):OM(n,e)}constructor(){super(),this._autoDestroy=!0}_writeSchema(e){return this._writeMagic()._writePadding(2)}_writeFooter(e){const n=Ty.encode(new Ty(e,fr.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(e)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function OM(t,e){let n=e;e instanceof os&&(n=e.batches,t.reset(void 0,e.schema));for(const i of n)t.write(i);return t.finish()}function MM(t,e){var n,i,s,o;return ye(this,void 0,void 0,function*(){try{for(n=us(e);i=yield n.next(),!i.done;){const c=i.value;t.write(c)}}catch(c){s={error:c}}finally{try{i&&!i.done&&(o=n.return)&&(yield o.call(n))}finally{if(s)throw s.error}}return t.finish()})}function she(t,e="stream"){return(e==="stream"?IM:FM).writeAll(t).toUint8Array(!0)}var rhe=Object.create,V9=Object.defineProperty,ahe=Object.getOwnPropertyDescriptor,ohe=Object.getOwnPropertyNames,lhe=Object.getPrototypeOf,che=Object.prototype.hasOwnProperty,dhe=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),fhe=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of ohe(e))!che.call(t,s)&&s!==n&&V9(t,s,{get:()=>e[s],enumerable:!(i=ahe(e,s))||i.enumerable});return t},uhe=(t,e,n)=>(n=t!=null?rhe(lhe(t)):{},fhe(e||!t||!t.__esModule?V9(n,"default",{value:t,enumerable:!0}):n,t)),hhe=dhe((t,e)=>{e.exports=Worker}),phe=(t=>(t[t.NONE=0]="NONE",t[t.DEBUG=1]="DEBUG",t[t.INFO=2]="INFO",t[t.WARNING=3]="WARNING",t[t.ERROR=4]="ERROR",t))(phe||{}),ghe=(t=>(t[t.NONE=0]="NONE",t[t.CONNECT=1]="CONNECT",t[t.DISCONNECT=2]="DISCONNECT",t[t.OPEN=3]="OPEN",t[t.QUERY=4]="QUERY",t[t.INSTANTIATE=5]="INSTANTIATE",t))(ghe||{}),_he=(t=>(t[t.NONE=0]="NONE",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR",t[t.START=3]="START",t[t.RUN=4]="RUN",t[t.CAPTURE=5]="CAPTURE",t))(_he||{}),yhe=(t=>(t[t.NONE=0]="NONE",t[t.WEB_WORKER=1]="WEB_WORKER",t[t.NODE_WORKER=2]="NODE_WORKER",t[t.BINDINGS=3]="BINDINGS",t[t.ASYNC_DUCKDB=4]="ASYNC_DUCKDB",t))(yhe||{}),mhe=class{constructor(t=2){this.level=t}log(t){t.level>=this.level&&console.log(t)}},whe=(t=>(t[t.SUCCESS=0]="SUCCESS",t))(whe||{}),bhe=class{constructor(t,e){this._bindings=t,this._conn=e}get bindings(){return this._bindings}async close(){return this._bindings.disconnect(this._conn)}useUnsafe(t){return t(this._bindings,this._conn)}async query(t){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:t});let e=await this._bindings.runQuery(this._conn,t),n=Ur.from(e);return console.assert(n.isSync()),console.assert(n.isFile()),new os(n)}async send(t){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:t});let e=await this._bindings.startPendingQuery(this._conn,t);for(;e==null;)e=await this._bindings.pollPendingQuery(this._conn);let n=new W9(this._bindings,this._conn,e),i=await Ur.from(n);return console.assert(i.isAsync()),console.assert(i.isStream()),i}async cancelSent(){return await this._bindings.cancelPendingQuery(this._conn)}async getTableNames(t){return await this._bindings.getTableNames(this._conn,t)}async prepare(t){let e=await this._bindings.createPrepared(this._conn,t);return new The(this._bindings,this._conn,e)}async insertArrowTable(t,e){let n=she(t,"stream");await this.insertArrowFromIPCStream(n,e)}async insertArrowFromIPCStream(t,e){await this._bindings.insertArrowFromIPCStream(this._conn,t,e)}async insertCSVFromPath(t,e){await this._bindings.insertCSVFromPath(this._conn,t,e)}async insertJSONFromPath(t,e){await this._bindings.insertJSONFromPath(this._conn,t,e)}},W9=class{constructor(t,e,n){this.db=t,this.conn=e,this.header=n,this._first=!0,this._depleted=!1,this._inFlight=null}async next(){if(this._first)return this._first=!1,{done:!1,value:this.header};if(this._depleted)return{done:!0,value:null};let t;return this._inFlight!=null?(t=await this._inFlight,this._inFlight=null):t=await this.db.fetchQueryResults(this.conn),this._depleted=t.length==0,this._depleted||(this._inFlight=this.db.fetchQueryResults(this.conn)),{done:this._depleted,value:t}}[Symbol.asyncIterator](){return this}},The=class{constructor(t,e,n){this.bindings=t,this.connectionId=e,this.statementId=n}async close(){await this.bindings.closePrepared(this.connectionId,this.statementId)}async query(...t){let e=await this.bindings.runPrepared(this.connectionId,this.statementId,t),n=Ur.from(e);return console.assert(n.isSync()),console.assert(n.isFile()),new os(n)}async send(...t){let e=await this.bindings.sendPrepared(this.connectionId,this.statementId,t),n=new W9(this.bindings,this.connectionId,e),i=await Ur.from(n);return console.assert(i.isAsync()),console.assert(i.isStream()),i}},vhe=(t=>(t.CANCEL_PENDING_QUERY="CANCEL_PENDING_QUERY",t.CLOSE_PREPARED="CLOSE_PREPARED",t.COLLECT_FILE_STATISTICS="COLLECT_FILE_STATISTICS",t.CONNECT="CONNECT",t.COPY_FILE_TO_BUFFER="COPY_FILE_TO_BUFFER",t.COPY_FILE_TO_PATH="COPY_FILE_TO_PATH",t.CREATE_PREPARED="CREATE_PREPARED",t.DISCONNECT="DISCONNECT",t.DROP_FILE="DROP_FILE",t.DROP_FILES="DROP_FILES",t.EXPORT_FILE_STATISTICS="EXPORT_FILE_STATISTICS",t.FETCH_QUERY_RESULTS="FETCH_QUERY_RESULTS",t.FLUSH_FILES="FLUSH_FILES",t.GET_FEATURE_FLAGS="GET_FEATURE_FLAGS",t.GET_TABLE_NAMES="GET_TABLE_NAMES",t.GET_VERSION="GET_VERSION",t.GLOB_FILE_INFOS="GLOB_FILE_INFOS",t.INSERT_ARROW_FROM_IPC_STREAM="INSERT_ARROW_FROM_IPC_STREAM",t.INSERT_CSV_FROM_PATH="IMPORT_CSV_FROM_PATH",t.INSERT_JSON_FROM_PATH="IMPORT_JSON_FROM_PATH",t.INSTANTIATE="INSTANTIATE",t.OPEN="OPEN",t.PING="PING",t.POLL_PENDING_QUERY="POLL_PENDING_QUERY",t.REGISTER_FILE_BUFFER="REGISTER_FILE_BUFFER",t.REGISTER_FILE_HANDLE="REGISTER_FILE_HANDLE",t.REGISTER_FILE_URL="REGISTER_FILE_URL",t.RESET="RESET",t.RUN_PREPARED="RUN_PREPARED",t.RUN_QUERY="RUN_QUERY",t.SEND_PREPARED="SEND_PREPARED",t.START_PENDING_QUERY="START_PENDING_QUERY",t.TOKENIZE="TOKENIZE",t))(vhe||{}),Ehe=(t=>(t.CONNECTION_INFO="CONNECTION_INFO",t.ERROR="ERROR",t.FEATURE_FLAGS="FEATURE_FLAGS",t.FILE_BUFFER="FILE_BUFFER",t.FILE_INFOS="FILE_INFOS",t.FILE_SIZE="FILE_SIZE",t.FILE_STATISTICS="FILE_STATISTICS",t.INSTANTIATE_PROGRESS="INSTANTIATE_PROGRESS",t.LOG="LOG",t.OK="OK",t.PREPARED_STATEMENT_ID="PREPARED_STATEMENT_ID",t.QUERY_PLAN="QUERY_PLAN",t.QUERY_RESULT="QUERY_RESULT",t.QUERY_RESULT_CHUNK="QUERY_RESULT_CHUNK",t.QUERY_RESULT_HEADER="QUERY_RESULT_HEADER",t.QUERY_RESULT_HEADER_OR_NULL="QUERY_RESULT_HEADER_OR_NULL",t.REGISTERED_FILE="REGISTERED_FILE",t.SCRIPT_TOKENS="SCRIPT_TOKENS",t.SUCCESS="SUCCESS",t.TABLE_NAMES="TABLE_NAMES",t.VERSION_STRING="VERSION_STRING",t))(Ehe||{}),jt=class{constructor(t,e){this.promiseResolver=()=>{},this.promiseRejecter=()=>{},this.type=t,this.data=e,this.promise=new Promise((n,i)=>{this.promiseResolver=n,this.promiseRejecter=i})}};function M0(t){switch(t.typeId){case Q.Binary:return{sqlType:"binary"};case Q.Bool:return{sqlType:"bool"};case Q.Date:return{sqlType:"date"};case Q.DateDay:return{sqlType:"date32[d]"};case Q.DateMillisecond:return{sqlType:"date64[ms]"};case Q.Decimal:{let e=t;return{sqlType:"decimal",precision:e.precision,scale:e.scale}}case Q.Float:return{sqlType:"float"};case Q.Float16:return{sqlType:"float16"};case Q.Float32:return{sqlType:"float32"};case Q.Float64:return{sqlType:"float64"};case Q.Int:return{sqlType:"int32"};case Q.Int16:return{sqlType:"int16"};case Q.Int32:return{sqlType:"int32"};case Q.Int64:return{sqlType:"int64"};case Q.Uint16:return{sqlType:"uint16"};case Q.Uint32:return{sqlType:"uint32"};case Q.Uint64:return{sqlType:"uint64"};case Q.Uint8:return{sqlType:"uint8"};case Q.IntervalDayTime:return{sqlType:"interval[dt]"};case Q.IntervalYearMonth:return{sqlType:"interval[m]"};case Q.List:return{sqlType:"list",valueType:M0(t.valueType)};case Q.FixedSizeBinary:return{sqlType:"fixedsizebinary",byteWidth:t.byteWidth};case Q.Null:return{sqlType:"null"};case Q.Utf8:return{sqlType:"utf8"};case Q.Struct:return{sqlType:"struct",fields:t.children.map(e=>iI(e.name,e.type))};case Q.Map:{let e=t;return{sqlType:"map",keyType:M0(e.keyType),valueType:M0(e.valueType)}}case Q.Time:return{sqlType:"time[s]"};case Q.TimeMicrosecond:return{sqlType:"time[us]"};case Q.TimeMillisecond:return{sqlType:"time[ms]"};case Q.TimeNanosecond:return{sqlType:"time[ns]"};case Q.TimeSecond:return{sqlType:"time[s]"};case Q.Timestamp:return{sqlType:"timestamp",timezone:t.timezone||void 0};case Q.TimestampSecond:return{sqlType:"timestamp[s]",timezone:t.timezone||void 0};case Q.TimestampMicrosecond:return{sqlType:"timestamp[us]",timezone:t.timezone||void 0};case Q.TimestampNanosecond:return{sqlType:"timestamp[ns]",timezone:t.timezone||void 0};case Q.TimestampMillisecond:return{sqlType:"timestamp[ms]",timezone:t.timezone||void 0}}throw new Error(`unsupported arrow type: ${t.toString()}`)}function iI(t,e){let n=M0(e);return n.name=t,n}var She=new TextEncoder,xhe=class{constructor(t,e=null){this._onInstantiationProgress=[],this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{},this._nextMessageId=0,this._pendingRequests=new Map,this._logger=t,this._onMessageHandler=this.onMessage.bind(this),this._onErrorHandler=this.onError.bind(this),this._onCloseHandler=this.onClose.bind(this),e!=null&&this.attach(e)}get logger(){return this._logger}attach(t){this._worker=t,this._worker.addEventListener("message",this._onMessageHandler),this._worker.addEventListener("error",this._onErrorHandler),this._worker.addEventListener("close",this._onCloseHandler),this._workerShutdownPromise=new Promise((e,n)=>{this._workerShutdownResolver=e})}detach(){!this._worker||(this._worker.removeEventListener("message",this._onMessageHandler),this._worker.removeEventListener("error",this._onErrorHandler),this._worker.removeEventListener("close",this._onCloseHandler),this._worker=null,this._workerShutdownResolver(null),this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async terminate(){!this._worker||(this._worker.terminate(),this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async postTask(t,e=[]){if(!this._worker){console.error("cannot send a message since the worker is not set!");return}let n=this._nextMessageId++;return this._pendingRequests.set(n,t),this._worker.postMessage({messageId:n,type:t.type,data:t.data},e),await t.promise}onMessage(t){let e=t.data;switch(e.type){case"LOG":{this._logger.log(e.data);return}case"INSTANTIATE_PROGRESS":{for(let i of this._onInstantiationProgress)i(e.data);return}}let n=this._pendingRequests.get(e.requestId);if(!n){console.warn(`unassociated response: [${e.requestId}, ${e.type.toString()}]`);return}if(this._pendingRequests.delete(e.requestId),e.type=="ERROR"){let i=new Error(e.data.message);i.name=e.data.name,i.stack=e.data.stack,n.promiseRejecter(i);return}switch(n.type){case"CLOSE_PREPARED":case"COLLECT_FILE_STATISTICS":case"COPY_FILE_TO_PATH":case"DISCONNECT":case"DROP_FILE":case"DROP_FILES":case"FLUSH_FILES":case"INSERT_ARROW_FROM_IPC_STREAM":case"IMPORT_CSV_FROM_PATH":case"IMPORT_JSON_FROM_PATH":case"OPEN":case"PING":case"REGISTER_FILE_BUFFER":case"REGISTER_FILE_HANDLE":case"REGISTER_FILE_URL":case"RESET":if(e.type=="OK"){n.promiseResolver(e.data);return}break;case"INSTANTIATE":if(this._onInstantiationProgress=[],e.type=="OK"){n.promiseResolver(e.data);return}break;case"GLOB_FILE_INFOS":if(e.type=="FILE_INFOS"){n.promiseResolver(e.data);return}break;case"GET_VERSION":if(e.type=="VERSION_STRING"){n.promiseResolver(e.data);return}break;case"GET_FEATURE_FLAGS":if(e.type=="FEATURE_FLAGS"){n.promiseResolver(e.data);return}break;case"GET_TABLE_NAMES":if(e.type=="TABLE_NAMES"){n.promiseResolver(e.data);return}break;case"TOKENIZE":if(e.type=="SCRIPT_TOKENS"){n.promiseResolver(e.data);return}break;case"COPY_FILE_TO_BUFFER":if(e.type=="FILE_BUFFER"){n.promiseResolver(e.data);return}break;case"EXPORT_FILE_STATISTICS":if(e.type=="FILE_STATISTICS"){n.promiseResolver(e.data);return}break;case"CONNECT":if(e.type=="CONNECTION_INFO"){n.promiseResolver(e.data);return}break;case"RUN_PREPARED":case"RUN_QUERY":if(e.type=="QUERY_RESULT"){n.promiseResolver(e.data);return}break;case"SEND_PREPARED":if(e.type=="QUERY_RESULT_HEADER"){n.promiseResolver(e.data);return}break;case"START_PENDING_QUERY":if(e.type=="QUERY_RESULT_HEADER_OR_NULL"){n.promiseResolver(e.data);return}break;case"POLL_PENDING_QUERY":if(e.type=="QUERY_RESULT_HEADER_OR_NULL"){n.promiseResolver(e.data);return}break;case"CANCEL_PENDING_QUERY":if(this._onInstantiationProgress=[],e.type=="SUCCESS"){n.promiseResolver(e.data);return}break;case"FETCH_QUERY_RESULTS":if(e.type=="QUERY_RESULT_CHUNK"){n.promiseResolver(e.data);return}break;case"CREATE_PREPARED":if(e.type=="PREPARED_STATEMENT_ID"){n.promiseResolver(e.data);return}break}n.promiseRejecter(new Error(`unexpected response type: ${e.type.toString()}`))}onError(t){console.error(t),console.error(`error in duckdb worker: ${t.message}`),this._pendingRequests.clear()}onClose(){if(this._workerShutdownResolver(null),this._pendingRequests.size!=0){console.warn(`worker terminated with ${this._pendingRequests.size} pending requests`);return}this._pendingRequests.clear()}async reset(){let t=new jt("RESET",null);return await this.postTask(t)}async ping(){let t=new jt("PING",null);await this.postTask(t)}async dropFile(t){let e=new jt("DROP_FILE",t);return await this.postTask(e)}async dropFiles(){let t=new jt("DROP_FILES",null);return await this.postTask(t)}async flushFiles(){let t=new jt("FLUSH_FILES",null);return await this.postTask(t)}async instantiate(t,e=null,n=i=>{}){this._onInstantiationProgress.push(n);let i=new jt("INSTANTIATE",[t,e]);return await this.postTask(i)}async getVersion(){let t=new jt("GET_VERSION",null);return await this.postTask(t)}async getFeatureFlags(){let t=new jt("GET_FEATURE_FLAGS",null);return await this.postTask(t)}async open(t){let e=new jt("OPEN",t);await this.postTask(e)}async tokenize(t){let e=new jt("TOKENIZE",t);return await this.postTask(e)}async connectInternal(){let t=new jt("CONNECT",null);return await this.postTask(t)}async connect(){let t=await this.connectInternal();return new bhe(this,t)}async disconnect(t){let e=new jt("DISCONNECT",t);await this.postTask(e)}async runQuery(t,e){let n=new jt("RUN_QUERY",[t,e]);return await this.postTask(n)}async startPendingQuery(t,e){let n=new jt("START_PENDING_QUERY",[t,e]);return await this.postTask(n)}async pollPendingQuery(t){let e=new jt("POLL_PENDING_QUERY",t);return await this.postTask(e)}async cancelPendingQuery(t){let e=new jt("CANCEL_PENDING_QUERY",t);return await this.postTask(e)}async fetchQueryResults(t){let e=new jt("FETCH_QUERY_RESULTS",t);return await this.postTask(e)}async getTableNames(t,e){let n=new jt("GET_TABLE_NAMES",[t,e]);return await this.postTask(n)}async createPrepared(t,e){let n=new jt("CREATE_PREPARED",[t,e]);return await this.postTask(n)}async closePrepared(t,e){let n=new jt("CLOSE_PREPARED",[t,e]);await this.postTask(n)}async runPrepared(t,e,n){let i=new jt("RUN_PREPARED",[t,e,n]);return await this.postTask(i)}async sendPrepared(t,e,n){let i=new jt("SEND_PREPARED",[t,e,n]);return await this.postTask(i)}async globFiles(t){let e=new jt("GLOB_FILE_INFOS",t);return await this.postTask(e)}async registerFileText(t,e){let n=She.encode(e);await this.registerFileBuffer(t,n)}async registerFileURL(t,e,n,i){e===void 0&&(e=t);let s=new jt("REGISTER_FILE_URL",[t,e,n,i]);await this.postTask(s)}async registerEmptyFileBuffer(t){let e=new jt("REGISTER_FILE_BUFFER",[t,new Uint8Array]);await this.postTask(e)}async registerFileBuffer(t,e){let n=new jt("REGISTER_FILE_BUFFER",[t,e]);await this.postTask(n,[e.buffer])}async registerFileHandle(t,e,n,i){let s=new jt("REGISTER_FILE_HANDLE",[t,e,n,i]);await this.postTask(s,[])}async collectFileStatistics(t,e){let n=new jt("COLLECT_FILE_STATISTICS",[t,e]);await this.postTask(n,[])}async exportFileStatistics(t){let e=new jt("EXPORT_FILE_STATISTICS",t);return await this.postTask(e,[])}async copyFileToBuffer(t){let e=new jt("COPY_FILE_TO_BUFFER",t);return await this.postTask(e)}async copyFileToPath(t,e){let n=new jt("COPY_FILE_TO_PATH",[t,e]);await this.postTask(n)}async insertArrowFromIPCStream(t,e,n){if(e.length==0)return;let i=new jt("INSERT_ARROW_FROM_IPC_STREAM",[t,e,n]);await this.postTask(i,[e.buffer])}async insertCSVFromPath(t,e,n){if(n.columns!==void 0){let s=[];for(let o in n.columns){let c=n.columns[o];s.push(iI(o,c))}n.columnsFlat=s,delete n.columns}let i=new jt("IMPORT_CSV_FROM_PATH",[t,e,n]);await this.postTask(i)}async insertJSONFromPath(t,e,n){if(n.columns!==void 0){let s=[];for(let o in n.columns){let c=n.columns[o];s.push(iI(o,c))}n.columnsFlat=s,delete n.columns}let i=new jt("IMPORT_JSON_FROM_PATH",[t,e,n]);await this.postTask(i)}},Bhe=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,10,14,1,12,0,65,0,65,0,65,0,252,10,0,0,11])),khe=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11])),Ihe=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),Fhe=()=>(async t=>{try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(t)}catch{return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])),AM={name:"@duckdb/duckdb-wasm",version:"1.20.0",description:"DuckDB powered by WebAssembly",license:"MPL-2.0",repository:{type:"git",url:"https://github.com/duckdb/duckdb-wasm.git"},keywords:["sql","duckdb","relational","database","data","query","wasm","analytics","olap","arrow","parquet","json","csv"],dependencies:{"apache-arrow":"^9.0.0"},devDependencies:{"@types/emscripten":"^1.39.6","@types/jasmine":"^4.3.0","@typescript-eslint/eslint-plugin":"^5.40.1","@typescript-eslint/parser":"^5.40.0",esbuild:"^0.15.12",eslint:"^8.26.0","eslint-plugin-jasmine":"^4.1.3","eslint-plugin-react":"^7.31.10","fast-glob":"^3.2.12",jasmine:"^4.4.0","jasmine-core":"^4.3.0","jasmine-spec-reporter":"^7.0.0","js-sha256":"^0.9.0",karma:"^6.4.1","karma-chrome-launcher":"^3.1.1","karma-coverage":"^2.2.0","karma-firefox-launcher":"^2.1.2","karma-jasmine":"^5.1.0","karma-jasmine-html-reporter":"^2.0.0","karma-sourcemap-loader":"^0.3.8","karma-spec-reporter":"^0.0.34","make-dir":"^3.1.0",nyc:"^15.1.0",prettier:"^2.7.1",puppeteer:"^19.2.0",rimraf:"^3.0.2",s3rver:"^3.7.1",typedoc:"^0.23.20",typescript:"^4.8.4","wasm-feature-detect":"^1.2.11","web-worker":"^1.2.0"},scripts:{"build:debug":"node bundle.mjs debug && tsc --emitDeclarationOnly","build:release":"node bundle.mjs release && tsc --emitDeclarationOnly",docs:"typedoc",report:"node ./coverage.mjs","test:node":"node --enable-source-maps --experimental-wasm-eh ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:debug":"node --inspect-brk --enable-source-maps --experimental-wasm-eh ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:coverage":"nyc -r json --report-dir ./coverage/node node --experimental-wasm-eh ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:firefox":"karma start ./karma/tests-firefox.cjs","test:chrome":"karma start ./karma/tests-chrome.cjs","test:chrome:eh":"karma start ./karma/tests-chrome-eh.cjs","test:chrome:coverage":"karma start ./karma/tests-chrome-coverage.cjs","test:browser":"karma start ./karma/tests-all.cjs","test:browser:debug":"karma start ./karma/tests-debug.cjs",test:"npm run test:chrome && npm run test:node","test:coverage":"npm run test:chrome:coverage && npm run test:node:coverage && npm run report",lint:"eslint src test"},files:["dist","!dist/types/test"],main:"dist/duckdb-browser.cjs",module:"dist/duckdb-browser.mjs",types:"dist/duckdb-browser.d.ts",jsdelivr:"dist/duckdb-browser.cjs",unpkg:"dist/duckdb-browser.mjs",sideEffects:!1,browser:{fs:!1,path:!1,perf_hooks:!1,os:!1,worker_threads:!1},exports:{"./dist/duckdb-mvp.wasm":"./dist/duckdb-mvp.wasm","./dist/duckdb-eh.wasm":"./dist/duckdb-eh.wasm","./dist/duckdb-coi.wasm":"./dist/duckdb-coi.wasm","./dist/duckdb-browser":"./dist/duckdb-browser.mjs","./dist/duckdb-browser.cjs":"./dist/duckdb-browser.cjs","./dist/duckdb-browser.mjs":"./dist/duckdb-browser.mjs","./dist/duckdb-browser-blocking":"./dist/duckdb-browser-blocking.mjs","./dist/duckdb-browser-blocking.mjs":"./dist/duckdb-browser-blocking.mjs","./dist/duckdb-browser-blocking.cjs":"./dist/duckdb-browser-blocking.cjs","./dist/duckdb-browser-coi.pthread.worker.js":"./dist/duckdb-browser-coi.pthread.worker.js","./dist/duckdb-browser-coi.worker.js":"./dist/duckdb-browser-coi.worker.js","./dist/duckdb-browser-eh.worker.js":"./dist/duckdb-browser-eh.worker.js","./dist/duckdb-browser-mvp.worker.js":"./dist/duckdb-browser-mvp.worker.js","./dist/duckdb-node":"./dist/duckdb-node.cjs","./dist/duckdb-node.cjs":"./dist/duckdb-node.cjs","./dist/duckdb-node-blocking":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-blocking.cjs":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-eh.worker.cjs":"./dist/duckdb-node-eh.worker.cjs","./dist/duckdb-node-mvp.worker.cjs":"./dist/duckdb-node-mvp.worker.cjs","./blocking":{browser:{types:"./dist/duckdb-browser-blocking.d.ts",import:"./dist/duckdb-browser-blocking.mjs",require:"./dist/duckdb-browser-blocking.cjs"},node:{types:"./dist/duckdb-node-blocking.d.ts",require:"./dist/duckdb-node-blocking.cjs",import:"./dist/duckdb-node-blocking.cjs"},types:"./dist/duckdb-browser-blocking.d.ts",import:"./dist/duckdb-browser-blocking.mjs",require:"./dist/duckdb-browser-blocking.cjs"},".":{browser:{types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"},node:{types:"./dist/duckdb-node.d.ts",import:"./dist/duckdb-node.cjs",require:"./dist/duckdb-node.cjs"},types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"}}},Ohe=AM.name,Mhe=AM.version,NM=AM.version.split(".");NM[0];NM[1];NM[2];var Ahe=()=>typeof navigator>"u";function Nhe(){let t=`https://cdn.jsdelivr.net/npm/${Ohe}@${Mhe}/dist/`;return{mvp:{mainModule:`${t}duckdb-mvp.wasm`,mainWorker:`${t}duckdb-browser-mvp.worker.js`},eh:{mainModule:`${t}duckdb-eh.wasm`,mainWorker:`${t}duckdb-browser-eh.worker.js`}}}var Wx=null,Hx=null,Yx=null,Xx=null,Kx=null;async function Che(){return Wx==null&&(Wx=typeof BigInt64Array<"u"),Hx==null&&(Hx=await khe()),Yx==null&&(Yx=await Fhe()),Xx==null&&(Xx=await Ihe()),Kx==null&&(Kx=await Bhe()),{bigInt64Array:Wx,crossOriginIsolated:Ahe()||globalThis.crossOriginIsolated||!1,wasmExceptions:Hx,wasmSIMD:Xx,wasmThreads:Yx,wasmBulkMemory:Kx}}async function Rhe(t){let e=await Che();if(e.wasmExceptions){if(e.wasmSIMD&&e.wasmThreads&&e.crossOriginIsolated&&t.coi)return{mainModule:t.coi.mainModule,mainWorker:t.coi.mainWorker,pthreadWorker:t.coi.pthreadWorker};if(t.eh)return{mainModule:t.eh.mainModule,mainWorker:t.eh.mainWorker,pthreadWorker:null}}return{mainModule:t.mvp.mainModule,mainWorker:t.mvp.mainWorker,pthreadWorker:null}}var Lhe=uhe(hhe());async function Phe(t){let e=new Request(t),n=await fetch(e),i=URL.createObjectURL(await n.blob());return new Lhe.default(i)}function Dhe(){let t=new TextDecoder;return e=>(typeof SharedArrayBuffer<"u"&&e.buffer instanceof SharedArrayBuffer&&(e=new Uint8Array(e)),t.decode(e))}Dhe();var jhe=(t=>(t[t.BUFFER=0]="BUFFER",t[t.NODE_FS=1]="NODE_FS",t[t.BROWSER_FILEREADER=2]="BROWSER_FILEREADER",t[t.BROWSER_FSACCESS=3]="BROWSER_FSACCESS",t[t.HTTP=4]="HTTP",t[t.S3=5]="S3",t))(jhe||{});class CM extends wde{constructor(n,i,s){super(i,s);Vn(this,"db");this.db=n}async query(n){const i=performance.now();n=n.replaceAll("count(*)","count(*)::INT");const s=await this.db.connect(),o=await s.query(n);return s.close(),n=yde(n),console.info(`%c${n}`,"color: #bbb",`
Rows:`,o.numRows,"Execution time:",performance.now()-i,"ms."),o}static async fromParquetFile(n,i="data",s){const o=await Uhe(i,`CREATE VIEW '${i}' AS SELECT * FROM parquet_scan('${n}')`);return new CM(o,i,s)}}async function Uhe(t,e){const n=Nhe(),i=await Rhe(n),s=await Phe(i.mainWorker),o=new mhe,c=new xhe(o,s);await c.instantiate(i.mainModule,i.pthreadWorker);const d=await c.connect();await d.query(e);const f=await d.query(`PRAGMA table_info('${t}')`);return console.table(f.toArray().map(Object.fromEntries)),d.close(),c}var H9={exports:{}};const $he=Dne(Rne);(function(t,e){(function(i,s){t.exports=s($he)})(Lne,function(n){return(()=>{var i={2190:c=>{c.exports=function(f,u,a){if(f.filter)return f.filter(u,a);if(f==null)throw new TypeError;if(typeof u!="function")throw new TypeError;for(var _=[],w=0;w<f.length;w++)if(!!d.call(f,w)){var m=f[w];u.call(a,m,w,f)&&_.push(m)}return _};var d=Object.prototype.hasOwnProperty},6314:(c,d,f)=>{var u=f(2190);c.exports=function(){return u(["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],function(_){return typeof f.g[_]=="function"})}},7123:(c,d,f)=>{f.r(d),f.d(d,{DbCon:()=>vt,default:()=>ge,Client:()=>b.Client,Processor:()=>b.Processor});var u=f(6729),a=f.n(u),_=f(2003),w=f(9539),m=f.n(w),l=f(2818),T=f(2607),b=f(4221),S=f(9262),x=f(5141),B=f(2033),A={};for(const G in l)["default","DbCon","Client","Processor"].indexOf(G)<0&&(A[G]=()=>l[G]);f.d(d,A);var F=f(4494),A={};for(const G in F)["default","DbCon","Client","Processor"].indexOf(G)<0&&(A[G]=()=>F[G]);f.d(d,A);var k=f(1396),A={};for(const G in k)["default","DbCon","Client","Processor"].indexOf(G)<0&&(A[G]=()=>k[G]);f.d(d,A);var A={};for(const G in T)["default","DbCon","Client","Processor"].indexOf(G)<0&&(A[G]=()=>T[G]);f.d(d,A);var M=f(3962),A={};for(const G in M)["default","DbCon","Client","Processor"].indexOf(G)<0&&(A[G]=()=>M[G]);f.d(d,A);var R=f(8764).Buffer;function P(G,q){var L=Object.keys(G);if(Object.getOwnPropertySymbols){var X=Object.getOwnPropertySymbols(G);q&&(X=X.filter(function(Z){return Object.getOwnPropertyDescriptor(G,Z).enumerable})),L.push.apply(L,X)}return L}function j(G){for(var q=1;q<arguments.length;q++){var L=arguments[q]!=null?arguments[q]:{};q%2?P(Object(L),!0).forEach(function(X){se(G,X,L[X])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(L)):P(Object(L)).forEach(function(X){Object.defineProperty(G,X,Object.getOwnPropertyDescriptor(L,X))})}return G}function D(G){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?D=function(L){return typeof L}:D=function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},D(G)}function z(G,q){return J(G)||H(G,q)||Y(G,q)||$()}function $(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y(G,q){if(!!G){if(typeof G=="string")return W(G,q);var L=Object.prototype.toString.call(G).slice(8,-1);if(L==="Object"&&G.constructor&&(L=G.constructor.name),L==="Map"||L==="Set")return Array.from(G);if(L==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(L))return W(G,q)}}function W(G,q){(q==null||q>G.length)&&(q=G.length);for(var L=0,X=new Array(q);L<q;L++)X[L]=G[L];return X}function H(G,q){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(G)))){var L=[],X=!0,Z=!1,ae=void 0;try{for(var re=G[Symbol.iterator](),_e;!(X=(_e=re.next()).done)&&(L.push(_e.value),!(q&&L.length===q));X=!0);}catch(Ee){Z=!0,ae=Ee}finally{try{!X&&re.return!=null&&re.return()}finally{if(Z)throw ae}}return L}}function J(G){if(Array.isArray(G))return G}function V(G,q){if(!(G instanceof q))throw new TypeError("Cannot call a class as a function")}function le(G,q){for(var L=0;L<q.length;L++){var X=q[L];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(G,X.key,X)}}function pe(G,q,L){return q&&le(G.prototype,q),L&&le(G,L),G}function se(G,q,L){return q in G?Object.defineProperty(G,q,{value:L,enumerable:!0,configurable:!0,writable:!0}):G[q]=L,G}var Ne=3;function fe(G){return Array.isArray(G)?G:[G]}function Ce(G,q,L){var X=this;S.XHRConnection.call(this,G,q,L),L.headers["Content-Type"]==="application/vnd.apache.thrift.binary"&&(this.flush=function(){if(X.url===void 0||X.url==="")return X.send_buf;var Z=X.getXmlHttpRequestObject();Z.responseType="arraybuffer",Z.onreadystatechange=function(){Z.readyState===4&&Z.status===200&&X.setRecvBuffer(Z.response)},Z.open("POST",X.url,!0),Object.keys(X.headers).forEach(function(ae){Z.setRequestHeader(ae,X.headers[ae])}),Z.send(X.send_buf)})}m().inherits(Ce,S.XHRConnection),Ce.prototype.getXmlHttpRequestObject=function(){var G=S.XHRConnection.prototype.getXmlHttpRequestObject.call(this);return G.withCredentials=Ce.withCredentials,G};function Me(){for(var G=arguments.length,q=new Array(G),L=0;L<G;L++)q[L]=arguments[L];S.TJSONProtocol.apply(this,q)}m().inherits(Me,S.TJSONProtocol),Me.prototype.writeString=function(G){return G instanceof R||(G=String(G)),S.TJSONProtocol.prototype.writeString.call(this,G)},Me.prototype.readI64=function(){var G=S.TJSONProtocol.prototype.readI64.call(this);return G.toNumber(!0)},Me.prototype.readBinary=function(){return S.TJSONProtocol.prototype.readString.call(this)};function He(){for(var G=arguments.length,q=new Array(G),L=0;L<G;L++)q[L]=arguments[L];S.TBinaryProtocol.apply(this,q)}m().inherits(He,S.TBinaryProtocol),He.prototype.writeString=function(G){return G instanceof R||(G=String(G)),S.TBinaryProtocol.prototype.writeString.call(this,G)},He.prototype.readI64=function(){var G=S.TBinaryProtocol.prototype.readI64.call(this);return G.toNumber(!0)},He.prototype.readBinary=function(){return S.TBinaryProtocol.prototype.readBinary.call(this).toString("base64")};function Bt(G,q){var L=new URL(G),X=L.protocol,Z=L.hostname,ae=L.port;ae===""&&(ae=X==="https:"?"443":"80");var re=null;{var _e=new Ce(Z,ae,{transport:S.TBufferedTransport,protocol:q?He:Me,path:"/",headers:{"Content-Type":"application/vnd.apache.thrift.".concat(q?"binary":"json")},https:X==="https:"});_e.on("error",console.error),re=(0,S.createXHRClient)(b,_e)}return re}var vt=function(){function G(){var q=this;return V(this,G),se(this,"updateQueryTimes",function(L,X,Z,ae){q.queryTimes[X]=ae}),se(this,"events",new(a())),se(this,"EVENT_NAMES",{ERROR:"error",METHOD_CALLED:"method-called"}),se(this,"handleErrors",function(L){return function(){for(var X=arguments.length,Z=new Array(X),ae=0;ae<X;ae++)Z[ae]=arguments[ae];return L.apply(q,Z).catch(function(re){throw q.events.emit(q.EVENT_NAMES.ERROR,re),re})}}),se(this,"callbackify",function(L,X){return function(){for(var Z=null,ae=arguments.length,re=new Array(ae),_e=0;_e<ae;_e++)re[_e]=arguments[_e];re.length===X+1&&(Z=re.pop());var Ee=q[L].apply(q,re);return Z&&Ee.catch(function(Je){return Z(Je)}).then(function(Je){return Z(null,Je)}),Ee}}),se(this,"overSingleClient","SINGLE_CLIENT"),se(this,"overAllClients","ALL_CLIENTS"),se(this,"wrapThrift",function(L,X,Z){return function(){if(q._sessionId){for(var ae=arguments.length,re=new Array(ae),_e=0;_e<ae;_e++)re[_e]=arguments[_e];var Ee=Z(re);return q.events.emit(q.EVENT_NAMES.METHOD_CALLED,L),X===q.overSingleClient?q._client[0][L].apply(q._client[0],[q._sessionId[0]].concat(Ee)):Promise.all(q._client.map(function(Je,zt){return Je[L].apply(Je,[q._sessionId[zt]].concat(Ee))}))}else return Promise.reject(new Error("You are not connected to a server. Try running the connect method first."))}}),se(this,"connect",this.callbackify("connectAsync",0)),se(this,"disconnectAsync",this.handleErrors(function(){return Promise.all(q._client.map(function(L,X){return L.disconnect(q._sessionId[X]).catch(function(Z){if(Z&&!q.isTimeoutError(Z))throw Z})})).then(function(){return q._sessionId=null,q._client=null,q._numConnections=0,q.serverPingTimes=null,q})})),se(this,"disconnect",this.callbackify("disconnectAsync",0)),se(this,"getStatusAsync",this.handleErrors(this.wrapThrift("get_status",this.overSingleClient,function(L){return L}))),se(this,"getStatus",this.callbackify("getStatusAsync",0)),se(this,"getHardwareInfoAsync",this.handleErrors(this.wrapThrift("get_hardware_info",this.overSingleClient,function(L){return L}))),se(this,"getHardwareInfo",this.callbackify("getHardwareInfoAsync",0)),se(this,"getFirstGeoFileInArchiveAsync",this.handleErrors(this.wrapThrift("get_first_geo_file_in_archive",this.overSingleClient,function(L){return L}))),se(this,"getFilesInArchiveAsync",this.handleErrors(this.wrapThrift("get_all_files_in_archive",this.overSingleClient,function(L){return L}))),se(this,"getUsersAsync",this.handleErrors(this.wrapThrift("get_users",this.overSingleClient,function(L){return L}))),se(this,"importTableStatusAsync",this.handleErrors(this.wrapThrift("import_table_status",this.overSingleClient,function(L){return L}))),se(this,"getRolesAsync",this.handleErrors(this.wrapThrift("get_roles",this.overSingleClient,function(L){return L}))),se(this,"getDashboardsAsync",this.handleErrors(this.wrapThrift("get_dashboards",this.overSingleClient,function(L){return L}))),se(this,"getDashboardAsync",this.handleErrors(this.wrapThrift("get_dashboard",this.overSingleClient,function(L){return L}))),se(this,"createDashboardAsync",this.handleErrors(this.wrapThrift("create_dashboard",this.overAllClients,function(L){return L}))),se(this,"replaceDashboardAsync",this.handleErrors(this.wrapThrift("replace_dashboard",this.overAllClients,function(L){return L}))),se(this,"deleteDashboardAsync",this.handleErrors(this.wrapThrift("delete_dashboard",this.overAllClients,function(L){return L}))),se(this,"deleteDashboardsAsync",this.handleErrors(this.wrapThrift("delete_dashboards",this.overAllClients,function(L){return L}))),se(this,"shareDashboardAsync",this.handleErrors(this.wrapThrift("share_dashboard",this.overAllClients,function(L){var X=z(L,4),Z=X[0],ae=X[1],re=X[2],_e=X[3];return[Z,ae,re,new T.TDashboardPermissions(_e)]}))),se(this,"shareDashboardsAsync",this.handleErrors(this.wrapThrift("share_dashboards",this.overAllClients,function(L){var X=z(L,3),Z=X[0],ae=X[1],re=X[2];return[Z,ae,new T.TDashboardPermissions(re)]}))),se(this,"unshareDashboardAsync",this.handleErrors(this.wrapThrift("unshare_dashboard",this.overAllClients,function(L){var X=z(L,4),Z=X[0],ae=X[1],re=X[2],_e=X[3];return[Z,ae,re,new T.TDashboardPermissions(_e)]}))),se(this,"unshareDashboardsAsync",this.handleErrors(this.wrapThrift("unshare_dashboards",this.overAllClients,function(L){var X=z(L,3),Z=X[0],ae=X[1],re=X[2];return[Z,ae,new T.TDashboardPermissions(re)]}))),se(this,"getDashboardGranteesAsync",this.handleErrors(this.wrapThrift("get_dashboard_grantees",this.overSingleClient,function(L){return L}))),se(this,"getDbObjectsForGranteeAsync",this.handleErrors(this.wrapThrift("get_db_objects_for_grantee",this.overSingleClient,function(L){return L}))),se(this,"getDbObjectPrivsAsync",this.handleErrors(this.wrapThrift("get_db_object_privs",this.overSingleClient,function(L){var X=z(L,2),Z=X[0],ae=X[1];return[Z,T.TDBObjectType[ae]]}))),se(this,"getAllRolesForUserAsync",this.handleErrors(this.wrapThrift("get_all_roles_for_user",this.overSingleClient,function(L){return L}))),se(this,"getAllEffectiveRolesForUserAsync",this.handleErrors(this.wrapThrift("get_all_effective_roles_for_user",this.overSingleClient,function(L){return L}))),se(this,"hasObjectPrivilegesAsync",this.handleErrors(this.wrapThrift("has_object_privilege",this.overSingleClient,function(L){return L}))),se(this,"hasDbPrivilegesAsync",function(L,X,Z){return q.hasObjectPrivilegesAsync(L,X,T.TDBObjectType.DatabaseDBObjectType,new T.TDBObjectPermissions({database_permissions_:new T.TDatabasePermissions(Z)}))}),se(this,"getSessionInfoAsync",this.handleErrors(this.wrapThrift("get_session_info",this.overSingleClient,function(L){return L}))),se(this,"createCustomExpressionAsync",this.handleErrors(this.wrapThrift("create_custom_expression",this.overSingleClient,function(L){return L}))),se(this,"getCustomExpressionsAsync",this.handleErrors(this.wrapThrift("get_custom_expressions",this.overSingleClient,function(L){return L}))),se(this,"updateCustomExpressionAsync",this.handleErrors(this.wrapThrift("update_custom_expression",this.overSingleClient,function(L){return L}))),se(this,"deleteCustomExpressionsAsync",this.handleErrors(this.wrapThrift("delete_custom_expressions",this.overSingleClient,function(L){return L}))),se(this,"detectColumnTypesAsync",this.handleErrors(function(L,X){var Z=q.wrapThrift("detect_column_types",q.overSingleClient,function(){return[L,B.Dq(X)]});return Z().then(function(ae){return q.importerRowDesc=ae.row_set.row_desc,ae})})),se(this,"queryAsync",this.handleErrors(function(L,X){var Z=!0,ae=!1,re=null,_e=!1,Ee=-1,Je=(q._nonce++).toString();X&&(Z=X.hasOwnProperty("columnarResults")?X.columnarResults:Z,ae=X.hasOwnProperty("eliminateNullRows")?X.eliminateNullRows:ae,re=X.hasOwnProperty("queryId")?X.queryId:re,_e=X.hasOwnProperty("returnTiming")?X.returnTiming:_e,Ee=X.hasOwnProperty("limit")?X.limit:Ee,Je=X.hasOwnProperty("logValues")?D(X.logValues)==="object"?JSON.stringify(X.logValues):X.logValues:Je);var zt=re in q.queryTimes?q.queryTimes[re]:q.DEFAULT_QUERY_TIME,At=0,et={returnTiming:_e,eliminateNullRows:ae,query:L,queryId:re,conId:At,estimatedQueryTime:zt,startTime:Date.now()},un=-1,Gn=q.wrapThrift("sql_execute",q.overSingleClient,function(ue){return ue}),bs=function ue(){return Gn(L,Z,Je,Ee,un).catch(function(Fi){if(Fi.name==="NetworkError"){if(q.removeConnection(0),q._numConnections===0)throw Fi.msg="No remaining database connections",Fi;return ue()}throw Fi})};return q.processResults(et,bs())})),se(this,"query",this.callbackify("queryAsync",2)),se(this,"queryDFAsync",this.handleErrors(function(L,X){var Z=0,ae=-1,re=q.wrapThrift("sql_execute_df",q.overSingleClient,function(){return[L,l.TDeviceType.CPU,Z,ae,T.TArrowTransport.WIRE]});return re().then(function(_e){q._logging&&console.log(L,"on Server",0,"- Execution Time:",_e.execution_time_ms,"ms");var Ee=R.from(_e.df_buffer,"base64"),Je=(0,_.tableFromIPC)(Ee);return X&&Boolean(X.returnTiming)&&(Je={results:Je,timing:{execution_time_ms:_e.execution_time_ms}}),Je})})),se(this,"queryDF",this.callbackify("queryDFAsync",2)),se(this,"validateQuery",this.handleErrors(function(L){var X=q.wrapThrift("sql_validate",q.overSingleClient,function(Z){return Z});return X(L).then(function(Z){var ae=Z.reduce(function(re,_e){return re[_e.col_name]=_e,re},{});return q.convertFromThriftTypes(ae)})})),se(this,"getTablesAsync",this.handleErrors(function(){var L=q.wrapThrift("get_tables",q.overSingleClient,function(X){return X});return L().then(function(X){return X.map(function(Z){return{name:Z,label:"obs"}})})})),se(this,"getTables",this.callbackify("getTablesAsync",0)),se(this,"getTablesWithMetaAsync",this.handleErrors(function(){var L=q.wrapThrift("get_tables_meta",q.overSingleClient,function(X){return X});return L().then(function(X){return X.map(function(Z){return{name:Z.table_name,num_cols:Number(Z.num_cols.toString()),col_datum_types:Z.col_types.map(function(ae){return q._datumEnum[ae.type]}),is_view:Z.is_view,is_replicated:Z.is_replicated,shard_count:Number(Z.shard_count.toString()),max_rows:isFinite(Z.max_rows)?Number(Z.max_rows.toString()):-1}})})})),se(this,"getTablesWithMeta",this.callbackify("getTablesWithMetaAsync",0)),se(this,"getTablesMetaAsync",this.handleErrors(this.wrapThrift("get_tables_meta",this.overSingleClient,function(L){return L}))),se(this,"getTablesMeta",this.callbackify("getTablesMetaAsync",0)),se(this,"getTableEpochByNameAsync",this.handleErrors(this.wrapThrift("get_table_epoch_by_name",this.overSingleClient,function(L){return L}))),se(this,"getTableEpochByName",this.callbackify("getTableEpochByNameAsync",0)),se(this,"getTableFunctionNamesAsync",this.handleErrors(this.wrapThrift("get_table_function_names",this.overSingleClient,function(L){return L}))),se(this,"getTableFunctionNames",this.callbackify("getTableFunctionNamesAsync",0)),se(this,"getRuntimeTableFunctionNamesAsync",this.handleErrors(this.wrapThrift("get_runtime_table_function_names",this.overSingleClient,function(L){return L}))),se(this,"getRuntimeTableFunctionNames",this.callbackify("getRuntimeTableFunctionNamesAsync",0)),se(this,"getTableFunctionDetailsAsync",this.handleErrors(this.wrapThrift("get_table_function_details",this.overSingleClient,function(L){return L}))),se(this,"getTableFunctionDetails",this.callbackify("getTableFunctionDetailsAsync",0)),se(this,"getCompletionHintsAsync",this.handleErrors(this.wrapThrift("get_completion_hints",this.overSingleClient,function(L){var X=z(L,2),Z=X[0],ae=X[1].cursor;return[Z,ae]}))),se(this,"getCompletionHints",this.callbackify("getCompletionHintsAsync",2)),se(this,"buildTFileTypeMap",function(){for(var L in T.TFileType)T.TFileType.hasOwnProperty(L)&&(q.TFileTypeMap[T.TFileType[L]]=L)}),se(this,"buildTImportHeaderRowMap",function(){for(var L in T.TImportHeaderRow)T.TImportHeaderRow.hasOwnProperty(L)&&(q.TImportHeaderRowMap[T.TImportHeaderRow[L]]=L)}),se(this,"buildTEncodingTypeMap",function(){for(var L in l.TEncodingType)l.TEncodingType.hasOwnProperty(L)&&(q.TEncodingTypeMap[l.TEncodingType[L]]=L)}),se(this,"buildTRasterPointTypeMap",function(){for(var L in T.TRasterPointType)T.TRasterPointType.hasOwnProperty(L)&&(q.TRasterPointTypeMap[T.TRasterPointType[L]]=L)}),se(this,"buildTRasterPointTransformMap",function(){for(var L in T.TRasterPointTransform)T.TRasterPointTransform.hasOwnProperty(L)&&(q.TRasterPointTransformMap[T.TRasterPointTransform[L]]=L)}),se(this,"buildTSourceTypeMap",function(){for(var L in T.TSourceType)T.TSourceType.hasOwnProperty(L)&&(q.TSourceTypeMap[T.TSourceType[L]]=L)}),se(this,"getFieldsAsync",this.handleErrors(function(L){var X=q.wrapThrift("get_table_details",q.overSingleClient,function(Z){return Z});return X(L).then(function(Z){if(Z){var ae=Z.row_desc.reduce(function(re,_e){return re[_e.col_name]=_e,re},{});return j(j({},Z),{},{columns:q.convertFromThriftTypes(ae)})}else throw new Error("Table (".concat(L,") not found"))})})),se(this,"getFields",this.callbackify("getFieldsAsync",1)),se(this,"createTableAsync",this.handleErrors(this.wrapThrift("create_table",this.overAllClients,function(L){var X=z(L,3),Z=X[0],ae=X[1],re=X[2];return[Z,B.HP(ae,q.importerRowDesc),re]}))),se(this,"createTable",this.callbackify("createTableAsync",4)),se(this,"importTableAsync",this.handleErrors(this.wrapThrift("import_table",this.overAllClients,function(L){var X=z(L,3),Z=X[0],ae=X[1],re=X[2];return[Z,ae,B.Dq(re)]}))),se(this,"importTableGeoAsync",this.handleErrors(this.wrapThrift("import_geo_table",this.overAllClients,function(L){var X=z(L,4),Z=X[0],ae=X[1],re=X[2],_e=X[3];return[Z,ae,B.Dq(re),B.HP(_e,q.importerRowDesc),new T.TCreateParams]}))),se(this,"renderVegaAsync",this.handleErrors(function(L,X,Z){var ae=null,re=Ne;Z&&(ae=Z.hasOwnProperty("queryId")?Z.queryId:ae,re=Z.hasOwnProperty("compressionLevel")?Z.compressionLevel:re);var _e=ae in q.queryTimes?q.queryTimes[ae]:q.DEFAULT_QUERY_TIME,Ee=(q._nonce++).toString();Z&&(Ee=Z.hasOwnProperty("logValues")?D(Z.logValues)==="object"?JSON.stringify(Z.logValues):Z.logValues:Ee);var Je=0;q._lastRenderCon=Je;var zt={isImage:!0,query:"render: ".concat(X),queryId:ae,conId:Je,estimatedQueryTime:_e},At=q.wrapThrift("render_vega",q.overSingleClient,function(et){return et});return q.processResults(zt,At(L,X,re,Ee))})),se(this,"renderVega",this.callbackify("renderVegaAsync",3)),se(this,"getResultRowForPixelAsync",this.handleErrors(function(L,X,Z){var ae=arguments.length>3&&arguments[3]!==void 0?arguments[3]:2;X instanceof T.TPixel||(X=new T.TPixel(X));var re=!0,_e=(q._nonce++).toString();return q._client[q._lastRenderCon].get_result_row_for_pixel(q._sessionId[q._lastRenderCon],L,X,Z,re,ae,_e).then(function(Ee){Ee=Array.isArray(Ee)?Ee.pixel_rows:[Ee];for(var Je={isImage:!1,eliminateNullRows:!1,query:"pixel request",queryId:-2},zt=(0,x.Z)(q._logging,q.updateQueryTimes),At=Ee.length,et=0;et<At;et++)Ee[et].row_set=zt(Je,q._datumEnum,Ee[et]);return Ee})})),se(this,"getResultRowForPixel",this.callbackify("getResultRowForPixelAsync",4)),this._useBinaryProtocol=!1,this._host=null,this._user=null,this._password=null,this._port=null,this._dbName=null,this._client=null,this._sessionId=null,this._protocol=null,this._disableAutoReconnect=!1,this._datumEnum={},this.TFileTypeMap={},this.TEncodingTypeMap={},this.TImportHeaderRowMap={},this.TRasterPointTypeMap={},this.TRasterPointTransformMap={},this.TSourceTypeMap={},this._logging=!1,this._platform="heavydb",this._nonce=0,this._balanceStrategy="adaptive",this._numConnections=0,this._lastRenderCon=0,this.queryTimes={},this.serverQueueTimes=null,this.serverPingTimes=null,this.pingCount=null,this.DEFAULT_QUERY_TIME=50,this.NUM_PINGS_PER_SERVER=4,this.importerRowDesc=null,this.invertDatumTypes(),this.buildTFileTypeMap(),this.buildTEncodingTypeMap(),this.buildTImportHeaderRowMap(),this.buildTRasterPointTypeMap(),this.buildTRasterPointTransformMap(),this.buildTSourceTypeMap(),this.processResults=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},X=arguments.length>1?arguments[1]:void 0;return X.catch(function(Z){throw q._logging&&L.query&&console.error(L.query,`
`,Z),Z}).then(function(Z){var ae=(0,x.Z)(q._logging,q.updateQueryTimes),re=ae(L,q._datumEnum,Z);return re})},this}return pe(G,[{key:"removeConnection",value:function(L){if(L<0||L>=this.numConnections){var X={msg:"Remove connection id invalid"};throw X}this._client.splice(L,1),this._sessionId.splice(L,1),this._numConnections--}},{key:"xhrWithCredentials",value:function(L){Ce.withCredentials=Boolean(L)}},{key:"initClients",value:function(){var L=Array.isArray(this._host)&&Array.isArray(this._port)&&Array.isArray(this._dbName);if(!L)throw new Error("Host, port, and dbName must be arrays.");if(this._client=[],this._sessionId=[],this._host[0]){if(!this._port[0])throw new Error("Please enter a port.")}else throw new Error("Please enter a host name.");var X=this._host.length;if(X<1)throw new Error("Must have at least one server to connect to.");if(X!==this._port.length)throw new Error("Array connection parameters must be of equal length.");this._protocol||(this._protocol=this._host.map(function(){return window.location.protocol.replace(":","")}));for(var Z=this.getEndpoints(),ae=[],re=0;re<X;re++){var _e=Bt(Z[re],this._useBinaryProtocol);ae.push(_e)}return this._client=ae,this._numConnections=this._client.length,this}},{key:"connectAsync",value:function(){var L=this;if(!Array.isArray(this._user)||!Array.isArray(this._password))return Promise.reject("Username and password must be arrays.");if(this._dbName[0])if(this._user[0]){if(!this._password[0])return Promise.reject("Please enter a password.")}else return Promise.reject("Please enter a username.");else return Promise.reject("Please enter a database.");var X=this._host.length;if(X<1)return Promise.reject("Must have at least one server to connect to.");if(X!==this._port.length||X!==this._user.length||X!==this._password.length||X!==this._dbName.length)return Promise.reject("Array connection parameters must be of equal length.");var Z=[];return this.initClients(),Z=this._client,this._client=[],Promise.all(Z.map(function(ae,re){return ae.connect(L._user[re],L._password[re],L._dbName[re]).then(function(_e){return L._client.push(ae),L._sessionId.push(_e),null})})).then(function(){return L})}},{key:"convertFromThriftTypes",value:function(L){var X=[];for(var Z in L)L.hasOwnProperty(Z)&&X.push({name:Z,type:this._datumEnum[L[Z].col_type.type],precision:L[Z].col_type.precision,is_array:L[Z].col_type.is_array,is_dict:L[Z].col_type.encoding===l.TEncodingType.DICT});return X}},{key:"invertDatumTypes",value:function(){var L=l.TDatumType;for(var X in L)L.hasOwnProperty(X)&&(this._datumEnum[L[X]]=X)}},{key:"importTableAsyncWrapper",value:function(L){return L?this.importTableGeoAsync.bind(this):this.importTableAsync.bind(this)}},{key:"importTable",value:function(L,X,Z,ae,re,_e){if(re){var Ee=this.callbackify("importTableGeoAsync",4);return Ee(L,X,Z,ae,_e)}else{var Je=this.callbackify("importTableAsync",3);return Je(L,X,Z,_e)}}},{key:"sessionId",value:function(L){return arguments.length?(this._sessionId=fe(L),this):this._sessionId}},{key:"useBinaryProtocol",value:function(L){return arguments.length?(this._useBinaryProtocol=Boolean(L),this):this._useBinaryProtocol}},{key:"host",value:function(L){return arguments.length?(this._host=fe(L),this):this._host}},{key:"port",value:function(L){return arguments.length?(this._port=fe(L),this):this._port}},{key:"user",value:function(L){return arguments.length?(this._user=fe(L),this):this._user}},{key:"password",value:function(L){return arguments.length?(this._password=fe(L),this):this._password}},{key:"dbName",value:function(L){return arguments.length?(this._dbName=fe(L),this):this._dbName}},{key:"logging",value:function(L){if(typeof L>"u")return this._logging;if(typeof L!="boolean")return"logging can only be set with boolean values";this._logging=L;var X=L?"enabled":"disabled";return"SQL logging is now ".concat(X)}},{key:"platform",value:function(L){return arguments.length?(this._platform=L,this):this._platform}},{key:"numConnections",value:function(){return this._numConnections}},{key:"protocol",value:function(L){return arguments.length?(this._protocol=fe(L),this):this._protocol}},{key:"disableAutoReconnect",value:function(L){return arguments.length?(this._disableAutoReconnect=L,this):this._disableAutoReconnect}},{key:"getEndpoints",value:function(){var L=this;return this._host.map(function(X,Z){return"".concat(L._protocol[Z],"://").concat(X,":").concat(L._port[Z])})}},{key:"setLicenseKey",value:function(L,X){var Z=X.protocol,ae=X.host,re=X.port,_e=Array.isArray(this._client)&&this._client[0],Ee=this._sessionId&&this._sessionId[0];if(!_e){var Je="".concat(Z,"://").concat(ae,":").concat(re);_e=Bt(Je,this._useBinaryProtocol),Ee=""}return _e.set_license_key(Ee,L,this._nonce++)}},{key:"getLicenseClaims",value:function(L){var X=L.protocol,Z=L.host,ae=L.port,re=Array.isArray(this._client)&&this._client[0],_e=this._sessionId&&this._sessionId[0];if(!re){var Ee="".concat(X,"://").concat(Z,":").concat(ae);re=Bt(Ee,this._useBinaryProtocol),_e=""}return re.get_license_claims(_e,this._nonce++)}},{key:"isTimeoutError",value:function(L){return L instanceof T.TDBException&&(String(L.error_msg).indexOf("Session not valid.")!==-1||String(L.error_msg).indexOf("User should re-authenticate.")!==-1)}}]),G}();const ge=vt},2033:(c,d,f)=>{f.d(d,{Dq:()=>a,HP:()=>_,RK:()=>w,kS:()=>m});var u=f(2607),a=function(T){return new u.TCopyParams(T)},_=function(T,b){return T.forEach(function(S,x){b[x].col_name=S.clean_col_name,b[x].col_type.encoding=S.col_type.encoding,b[x].col_type.precision=S.col_type.precision,b[x].col_type.comp_param=S.col_type.comp_param,b[x].col_type.scale=S.col_type.scale,b[x].col_type.type=S.col_type.type}),b};function w(l,T){var b=Math.pow(10,T-3),S=l/b;return S}function m(l){return l.toNumber?Boolean(l.toNumber(!0)):Boolean(l)}},5141:(c,d,f)=>{f.d(d,{Z:()=>w});var u=f(2033);function a(m,l,T){var b={fields:[],results:[]},S=m.row_desc.length,x=typeof m.columns[0]>"u"?0:m.columns[0].nulls.length;b.fields=m.row_desc.map(function(J){return{name:J.col_name,type:T[J.col_type.type],is_array:J.col_type.is_array}});for(var B=0;B<x;B++){if(l){for(var F=!1,k=0;k<S;k++)if(m.columns[k].nulls[B]){F=!0;break}if(F)continue}for(var M={},A=0;A<S;A++){var R=b.fields[A].name,P=b.fields[A].type,j=b.fields[A].is_array,D=m.columns[A].nulls[B],z=m.row_desc[A].col_type.precision;if(D){M[R]=null;continue}if(j){M[R]=[];for(var $=m.columns[A].data.arr_col[B].nulls.length,Y=0;Y<$;Y++){if(m.columns[A].data.arr_col[B].nulls[Y]){M[R].push("NULL");continue}switch(P){case"BOOL":M[R].push((0,u.kS)(m.columns[A].data.arr_col[B].data.int_col[Y]));break;case"SMALLINT":case"INT":case"BIGINT":case"TINYINT":M[R].push(m.columns[A].data.arr_col[B].data.int_col[Y]);break;case"FLOAT":case"DOUBLE":case"DECIMAL":M[R].push(m.columns[A].data.arr_col[B].data.real_col[Y]);break;case"STR":M[R].push(m.columns[A].data.arr_col[B].data.str_col[Y]);break;case"TIME":case"TIMESTAMP":case"DATE":var W=(0,u.RK)(m.columns[A].data.int_col[B],z);M[R].push(W);break;default:throw new Error("Unrecognized array field type: ".concat(P))}}}else switch(P){case"BOOL":M[R]=(0,u.kS)(m.columns[A].data.int_col[B]);break;case"SMALLINT":case"INT":case"BIGINT":case"TINYINT":M[R]=m.columns[A].data.int_col[B];break;case"FLOAT":case"DOUBLE":case"DECIMAL":M[R]=m.columns[A].data.real_col[B];break;case"STR":M[R]=m.columns[A].data.str_col[B];break;case"TIME":case"TIMESTAMP":case"DATE":var H=(0,u.RK)(m.columns[A].data.int_col[B],z);M[R]=new Date(H);break;case"POINT":case"LINESTRING":case"POLYGON":case"MULTIPOLYGON":M[R]=m.columns[A].data.str_col[B];break;default:throw new Error("Unrecognized field type: ".concat(P))}}b.results.push(M)}return b}function _(m,l,T){var b=m.row_desc.length,S={fields:[],results:[]};S.fields=m.row_desc.map(function(V){return{name:V.col_name,type:T[V.col_type.type],is_array:V.col_type.is_array}}),S.results=[];var x=0;typeof m.rows<"u"&&m.rows!==null&&(x=m.rows.length);for(var B=0;B<x;B++){if(l){for(var F=!1,k=0;k<b;k++)if(m.rows[B].columns[k].is_null){F=!0;break}if(F)continue}for(var M={},A=0;A<b;A++){var R=S.fields[A].name,P=S.fields[A].type,j=S.fields[A].is_array,D=m.row_desc[A].col_type.precision;if(j){if(m.rows[B].cols[A].is_null){M[R]="NULL";continue}M[R]=[];for(var z=m.rows[B].cols[A].val.arr_val.length,$=0;$<z;$++){var Y=m.rows[B].cols[A].val.arr_val[$];if(Y.is_null){M[R].push("NULL");continue}switch(P){case"BOOL":M[R].push((0,u.kS)(Y.val.int_val));break;case"SMALLINT":case"INT":case"BIGINT":case"TINYINT":M[R].push(Y.val.int_val);break;case"FLOAT":case"DOUBLE":case"DECIMAL":M[R].push(Y.val.real_val);break;case"STR":M[R].push(Y.val.str_val);break;case"TIME":case"TIMESTAMP":case"DATE":var W=(0,u.RK)(Y.val.int_val,D);M[R].push(W);break;default:throw new Error("Unrecognized array field type: ".concat(P))}}}else{var H=m.rows[B].cols[A];if(H.is_null){M[R]="NULL";continue}switch(P){case"BOOL":M[R]=(0,u.kS)(H.val.int_val);break;case"SMALLINT":case"INT":case"BIGINT":case"TINYINT":M[R]=H.val.int_val;break;case"FLOAT":case"DOUBLE":case"DECIMAL":M[R]=H.val.real_val;break;case"STR":M[R]=H.val.str_val;break;case"TIME":case"TIMESTAMP":case"DATE":var J=(0,u.RK)(H.val.int_val,D);M[R]=new Date(J);break;case"POINT":case"LINESTRING":case"POLYGON":case"MULTIPOLYGON":M[R]=H.val.str_val;break;default:throw new Error("Unrecognized field type: ".concat(P))}}}S.results.push(M)}return S}function w(m,l){return function(T,b,S){var x=!1,B=!1,F=null,k=null,M=null,A=null;if(typeof T<"u"&&(x=T.isImage?T.isImage:!1,B=T.eliminateNullRows?T.eliminateNullRows:!1,F=T.query?T.query:null,k=T.queryId?T.queryId:null,M=typeof T.conId>"u"?null:T.conId,A=typeof T.estimatedQueryTime>"u"?null:T.estimatedQueryTime),S.execution_time_ms&&M!==null&&A!==null&&l(M,k,A,S.execution_time_ms),m&&S.execution_time_ms&&console.log(F,"on Server",M,"- Execution Time:",S.execution_time_ms,"ms, Total Time:",S.total_time_ms,"ms, Real Time:",T.startTime?Date.now()-T.startTime:void 0,"ms"),x)return S;var R=null;if(!S.row_set)throw new Error("No result to process");return S.row_set.is_columnar?R=a(S.row_set,B,b):R=_(S.row_set,B,b),R.timing={execution_time_ms:S.execution_time_ms,total_time_ms:S.total_time_ms},T.returnTiming?R:R.results}}},9742:(c,d)=>{d.byteLength=T,d.toByteArray=S,d.fromByteArray=F;for(var f=[],u=[],a=typeof Uint8Array<"u"?Uint8Array:Array,_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w=0,m=_.length;w<m;++w)f[w]=_[w],u[_.charCodeAt(w)]=w;u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63;function l(k){var M=k.length;if(M%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var A=k.indexOf("=");A===-1&&(A=M);var R=A===M?0:4-A%4;return[A,R]}function T(k){var M=l(k),A=M[0],R=M[1];return(A+R)*3/4-R}function b(k,M,A){return(M+A)*3/4-A}function S(k){var M,A=l(k),R=A[0],P=A[1],j=new a(b(k,R,P)),D=0,z=P>0?R-4:R,$;for($=0;$<z;$+=4)M=u[k.charCodeAt($)]<<18|u[k.charCodeAt($+1)]<<12|u[k.charCodeAt($+2)]<<6|u[k.charCodeAt($+3)],j[D++]=M>>16&255,j[D++]=M>>8&255,j[D++]=M&255;return P===2&&(M=u[k.charCodeAt($)]<<2|u[k.charCodeAt($+1)]>>4,j[D++]=M&255),P===1&&(M=u[k.charCodeAt($)]<<10|u[k.charCodeAt($+1)]<<4|u[k.charCodeAt($+2)]>>2,j[D++]=M>>8&255,j[D++]=M&255),j}function x(k){return f[k>>18&63]+f[k>>12&63]+f[k>>6&63]+f[k&63]}function B(k,M,A){for(var R,P=[],j=M;j<A;j+=3)R=(k[j]<<16&16711680)+(k[j+1]<<8&65280)+(k[j+2]&255),P.push(x(R));return P.join("")}function F(k){for(var M,A=k.length,R=A%3,P=[],j=16383,D=0,z=A-R;D<z;D+=j)P.push(B(k,D,D+j>z?z:D+j));return R===1?(M=k[A-1],P.push(f[M>>2]+f[M<<4&63]+"==")):R===2&&(M=(k[A-2]<<8)+k[A-1],P.push(f[M>>10]+f[M>>4&63]+f[M<<2&63]+"=")),P.join("")}},3818:(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0});var f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},u=typeof window<"u"&&typeof window.document<"u",a=(typeof self>"u"?"undefined":f(self))==="object"&&self.constructor&&self.constructor.name==="DedicatedWorkerGlobalScope",_=typeof process<"u"&&process.versions!=null&&process.versions.node!=null,w=function(){return typeof window<"u"&&window.name==="nodejs"||navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")};d.isBrowser=u,d.isWebWorker=a,d.isNode=_,d.isJsDom=w},8764:(c,d,f)=>{/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */const u=f(9742),a=f(645),_=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;d.Buffer=T,d.SlowBuffer=j,d.INSPECT_MAX_BYTES=50;const w=2147483647;d.kMaxLength=w,T.TYPED_ARRAY_SUPPORT=m(),!T.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function m(){try{const C=new Uint8Array(1),O={foo:function(){return 42}};return Object.setPrototypeOf(O,Uint8Array.prototype),Object.setPrototypeOf(C,O),C.foo()===42}catch{return!1}}Object.defineProperty(T.prototype,"parent",{enumerable:!0,get:function(){if(!!T.isBuffer(this))return this.buffer}}),Object.defineProperty(T.prototype,"offset",{enumerable:!0,get:function(){if(!!T.isBuffer(this))return this.byteOffset}});function l(C){if(C>w)throw new RangeError('The value "'+C+'" is invalid for option "size"');const O=new Uint8Array(C);return Object.setPrototypeOf(O,T.prototype),O}function T(C,O,N){if(typeof C=="number"){if(typeof O=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return B(C)}return b(C,O,N)}T.poolSize=8192;function b(C,O,N){if(typeof C=="string")return F(C,O);if(ArrayBuffer.isView(C))return M(C);if(C==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof C);if(En(C,ArrayBuffer)||C&&En(C.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(En(C,SharedArrayBuffer)||C&&En(C.buffer,SharedArrayBuffer)))return A(C,O,N);if(typeof C=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const U=C.valueOf&&C.valueOf();if(U!=null&&U!==C)return T.from(U,O,N);const K=R(C);if(K)return K;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof C[Symbol.toPrimitive]=="function")return T.from(C[Symbol.toPrimitive]("string"),O,N);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof C)}T.from=function(C,O,N){return b(C,O,N)},Object.setPrototypeOf(T.prototype,Uint8Array.prototype),Object.setPrototypeOf(T,Uint8Array);function S(C){if(typeof C!="number")throw new TypeError('"size" argument must be of type number');if(C<0)throw new RangeError('The value "'+C+'" is invalid for option "size"')}function x(C,O,N){return S(C),C<=0?l(C):O!==void 0?typeof N=="string"?l(C).fill(O,N):l(C).fill(O):l(C)}T.alloc=function(C,O,N){return x(C,O,N)};function B(C){return S(C),l(C<0?0:P(C)|0)}T.allocUnsafe=function(C){return B(C)},T.allocUnsafeSlow=function(C){return B(C)};function F(C,O){if((typeof O!="string"||O==="")&&(O="utf8"),!T.isEncoding(O))throw new TypeError("Unknown encoding: "+O);const N=D(C,O)|0;let U=l(N);const K=U.write(C,O);return K!==N&&(U=U.slice(0,K)),U}function k(C){const O=C.length<0?0:P(C.length)|0,N=l(O);for(let U=0;U<O;U+=1)N[U]=C[U]&255;return N}function M(C){if(En(C,Uint8Array)){const O=new Uint8Array(C);return A(O.buffer,O.byteOffset,O.byteLength)}return k(C)}function A(C,O,N){if(O<0||C.byteLength<O)throw new RangeError('"offset" is outside of buffer bounds');if(C.byteLength<O+(N||0))throw new RangeError('"length" is outside of buffer bounds');let U;return O===void 0&&N===void 0?U=new Uint8Array(C):N===void 0?U=new Uint8Array(C,O):U=new Uint8Array(C,O,N),Object.setPrototypeOf(U,T.prototype),U}function R(C){if(T.isBuffer(C)){const O=P(C.length)|0,N=l(O);return N.length===0||C.copy(N,0,0,O),N}if(C.length!==void 0)return typeof C.length!="number"||hc(C.length)?l(0):k(C);if(C.type==="Buffer"&&Array.isArray(C.data))return k(C.data)}function P(C){if(C>=w)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+w.toString(16)+" bytes");return C|0}function j(C){return+C!=C&&(C=0),T.alloc(+C)}T.isBuffer=function(O){return O!=null&&O._isBuffer===!0&&O!==T.prototype},T.compare=function(O,N){if(En(O,Uint8Array)&&(O=T.from(O,O.offset,O.byteLength)),En(N,Uint8Array)&&(N=T.from(N,N.offset,N.byteLength)),!T.isBuffer(O)||!T.isBuffer(N))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(O===N)return 0;let U=O.length,K=N.length;for(let te=0,ie=Math.min(U,K);te<ie;++te)if(O[te]!==N[te]){U=O[te],K=N[te];break}return U<K?-1:K<U?1:0},T.isEncoding=function(O){switch(String(O).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},T.concat=function(O,N){if(!Array.isArray(O))throw new TypeError('"list" argument must be an Array of Buffers');if(O.length===0)return T.alloc(0);let U;if(N===void 0)for(N=0,U=0;U<O.length;++U)N+=O[U].length;const K=T.allocUnsafe(N);let te=0;for(U=0;U<O.length;++U){let ie=O[U];if(En(ie,Uint8Array))te+ie.length>K.length?(T.isBuffer(ie)||(ie=T.from(ie)),ie.copy(K,te)):Uint8Array.prototype.set.call(K,ie,te);else if(T.isBuffer(ie))ie.copy(K,te);else throw new TypeError('"list" argument must be an Array of Buffers');te+=ie.length}return K};function D(C,O){if(T.isBuffer(C))return C.length;if(ArrayBuffer.isView(C)||En(C,ArrayBuffer))return C.byteLength;if(typeof C!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof C);const N=C.length,U=arguments.length>2&&arguments[2]===!0;if(!U&&N===0)return 0;let K=!1;for(;;)switch(O){case"ascii":case"latin1":case"binary":return N;case"utf8":case"utf-8":return bs(C).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N*2;case"hex":return N>>>1;case"base64":return oi(C).length;default:if(K)return U?-1:bs(C).length;O=(""+O).toLowerCase(),K=!0}}T.byteLength=D;function z(C,O,N){let U=!1;if((O===void 0||O<0)&&(O=0),O>this.length||((N===void 0||N>this.length)&&(N=this.length),N<=0)||(N>>>=0,O>>>=0,N<=O))return"";for(C||(C="utf8");;)switch(C){case"hex":return Bt(this,O,N);case"utf8":case"utf-8":return Ne(this,O,N);case"ascii":return Me(this,O,N);case"latin1":case"binary":return He(this,O,N);case"base64":return se(this,O,N);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return vt(this,O,N);default:if(U)throw new TypeError("Unknown encoding: "+C);C=(C+"").toLowerCase(),U=!0}}T.prototype._isBuffer=!0;function $(C,O,N){const U=C[O];C[O]=C[N],C[N]=U}T.prototype.swap16=function(){const O=this.length;if(O%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let N=0;N<O;N+=2)$(this,N,N+1);return this},T.prototype.swap32=function(){const O=this.length;if(O%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let N=0;N<O;N+=4)$(this,N,N+3),$(this,N+1,N+2);return this},T.prototype.swap64=function(){const O=this.length;if(O%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let N=0;N<O;N+=8)$(this,N,N+7),$(this,N+1,N+6),$(this,N+2,N+5),$(this,N+3,N+4);return this},T.prototype.toString=function(){const O=this.length;return O===0?"":arguments.length===0?Ne(this,0,O):z.apply(this,arguments)},T.prototype.toLocaleString=T.prototype.toString,T.prototype.equals=function(O){if(!T.isBuffer(O))throw new TypeError("Argument must be a Buffer");return this===O?!0:T.compare(this,O)===0},T.prototype.inspect=function(){let O="";const N=d.INSPECT_MAX_BYTES;return O=this.toString("hex",0,N).replace(/(.{2})/g,"$1 ").trim(),this.length>N&&(O+=" ... "),"<Buffer "+O+">"},_&&(T.prototype[_]=T.prototype.inspect),T.prototype.compare=function(O,N,U,K,te){if(En(O,Uint8Array)&&(O=T.from(O,O.offset,O.byteLength)),!T.isBuffer(O))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof O);if(N===void 0&&(N=0),U===void 0&&(U=O?O.length:0),K===void 0&&(K=0),te===void 0&&(te=this.length),N<0||U>O.length||K<0||te>this.length)throw new RangeError("out of range index");if(K>=te&&N>=U)return 0;if(K>=te)return-1;if(N>=U)return 1;if(N>>>=0,U>>>=0,K>>>=0,te>>>=0,this===O)return 0;let ie=te-K,Oe=U-N;const Ue=Math.min(ie,Oe),$e=this.slice(K,te),Xe=O.slice(N,U);for(let Ke=0;Ke<Ue;++Ke)if($e[Ke]!==Xe[Ke]){ie=$e[Ke],Oe=Xe[Ke];break}return ie<Oe?-1:Oe<ie?1:0};function Y(C,O,N,U,K){if(C.length===0)return-1;if(typeof N=="string"?(U=N,N=0):N>2147483647?N=2147483647:N<-2147483648&&(N=-2147483648),N=+N,hc(N)&&(N=K?0:C.length-1),N<0&&(N=C.length+N),N>=C.length){if(K)return-1;N=C.length-1}else if(N<0)if(K)N=0;else return-1;if(typeof O=="string"&&(O=T.from(O,U)),T.isBuffer(O))return O.length===0?-1:W(C,O,N,U,K);if(typeof O=="number")return O=O&255,typeof Uint8Array.prototype.indexOf=="function"?K?Uint8Array.prototype.indexOf.call(C,O,N):Uint8Array.prototype.lastIndexOf.call(C,O,N):W(C,[O],N,U,K);throw new TypeError("val must be string, number or Buffer")}function W(C,O,N,U,K){let te=1,ie=C.length,Oe=O.length;if(U!==void 0&&(U=String(U).toLowerCase(),U==="ucs2"||U==="ucs-2"||U==="utf16le"||U==="utf-16le")){if(C.length<2||O.length<2)return-1;te=2,ie/=2,Oe/=2,N/=2}function Ue(Xe,Ke){return te===1?Xe[Ke]:Xe.readUInt16BE(Ke*te)}let $e;if(K){let Xe=-1;for($e=N;$e<ie;$e++)if(Ue(C,$e)===Ue(O,Xe===-1?0:$e-Xe)){if(Xe===-1&&(Xe=$e),$e-Xe+1===Oe)return Xe*te}else Xe!==-1&&($e-=$e-Xe),Xe=-1}else for(N+Oe>ie&&(N=ie-Oe),$e=N;$e>=0;$e--){let Xe=!0;for(let Ke=0;Ke<Oe;Ke++)if(Ue(C,$e+Ke)!==Ue(O,Ke)){Xe=!1;break}if(Xe)return $e}return-1}T.prototype.includes=function(O,N,U){return this.indexOf(O,N,U)!==-1},T.prototype.indexOf=function(O,N,U){return Y(this,O,N,U,!0)},T.prototype.lastIndexOf=function(O,N,U){return Y(this,O,N,U,!1)};function H(C,O,N,U){N=Number(N)||0;const K=C.length-N;U?(U=Number(U),U>K&&(U=K)):U=K;const te=O.length;U>te/2&&(U=te/2);let ie;for(ie=0;ie<U;++ie){const Oe=parseInt(O.substr(ie*2,2),16);if(hc(Oe))return ie;C[N+ie]=Oe}return ie}function J(C,O,N,U){return ia(bs(O,C.length-N),C,N,U)}function V(C,O,N,U){return ia(ue(O),C,N,U)}function le(C,O,N,U){return ia(oi(O),C,N,U)}function pe(C,O,N,U){return ia(Fi(O,C.length-N),C,N,U)}T.prototype.write=function(O,N,U,K){if(N===void 0)K="utf8",U=this.length,N=0;else if(U===void 0&&typeof N=="string")K=N,U=this.length,N=0;else if(isFinite(N))N=N>>>0,isFinite(U)?(U=U>>>0,K===void 0&&(K="utf8")):(K=U,U=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const te=this.length-N;if((U===void 0||U>te)&&(U=te),O.length>0&&(U<0||N<0)||N>this.length)throw new RangeError("Attempt to write outside buffer bounds");K||(K="utf8");let ie=!1;for(;;)switch(K){case"hex":return H(this,O,N,U);case"utf8":case"utf-8":return J(this,O,N,U);case"ascii":case"latin1":case"binary":return V(this,O,N,U);case"base64":return le(this,O,N,U);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pe(this,O,N,U);default:if(ie)throw new TypeError("Unknown encoding: "+K);K=(""+K).toLowerCase(),ie=!0}},T.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function se(C,O,N){return O===0&&N===C.length?u.fromByteArray(C):u.fromByteArray(C.slice(O,N))}function Ne(C,O,N){N=Math.min(C.length,N);const U=[];let K=O;for(;K<N;){const te=C[K];let ie=null,Oe=te>239?4:te>223?3:te>191?2:1;if(K+Oe<=N){let Ue,$e,Xe,Ke;switch(Oe){case 1:te<128&&(ie=te);break;case 2:Ue=C[K+1],(Ue&192)===128&&(Ke=(te&31)<<6|Ue&63,Ke>127&&(ie=Ke));break;case 3:Ue=C[K+1],$e=C[K+2],(Ue&192)===128&&($e&192)===128&&(Ke=(te&15)<<12|(Ue&63)<<6|$e&63,Ke>2047&&(Ke<55296||Ke>57343)&&(ie=Ke));break;case 4:Ue=C[K+1],$e=C[K+2],Xe=C[K+3],(Ue&192)===128&&($e&192)===128&&(Xe&192)===128&&(Ke=(te&15)<<18|(Ue&63)<<12|($e&63)<<6|Xe&63,Ke>65535&&Ke<1114112&&(ie=Ke))}}ie===null?(ie=65533,Oe=1):ie>65535&&(ie-=65536,U.push(ie>>>10&1023|55296),ie=56320|ie&1023),U.push(ie),K+=Oe}return Ce(U)}const fe=4096;function Ce(C){const O=C.length;if(O<=fe)return String.fromCharCode.apply(String,C);let N="",U=0;for(;U<O;)N+=String.fromCharCode.apply(String,C.slice(U,U+=fe));return N}function Me(C,O,N){let U="";N=Math.min(C.length,N);for(let K=O;K<N;++K)U+=String.fromCharCode(C[K]&127);return U}function He(C,O,N){let U="";N=Math.min(C.length,N);for(let K=O;K<N;++K)U+=String.fromCharCode(C[K]);return U}function Bt(C,O,N){const U=C.length;(!O||O<0)&&(O=0),(!N||N<0||N>U)&&(N=U);let K="";for(let te=O;te<N;++te)K+=pc[C[te]];return K}function vt(C,O,N){const U=C.slice(O,N);let K="";for(let te=0;te<U.length-1;te+=2)K+=String.fromCharCode(U[te]+U[te+1]*256);return K}T.prototype.slice=function(O,N){const U=this.length;O=~~O,N=N===void 0?U:~~N,O<0?(O+=U,O<0&&(O=0)):O>U&&(O=U),N<0?(N+=U,N<0&&(N=0)):N>U&&(N=U),N<O&&(N=O);const K=this.subarray(O,N);return Object.setPrototypeOf(K,T.prototype),K};function ge(C,O,N){if(C%1!==0||C<0)throw new RangeError("offset is not uint");if(C+O>N)throw new RangeError("Trying to access beyond buffer length")}T.prototype.readUintLE=T.prototype.readUIntLE=function(O,N,U){O=O>>>0,N=N>>>0,U||ge(O,N,this.length);let K=this[O],te=1,ie=0;for(;++ie<N&&(te*=256);)K+=this[O+ie]*te;return K},T.prototype.readUintBE=T.prototype.readUIntBE=function(O,N,U){O=O>>>0,N=N>>>0,U||ge(O,N,this.length);let K=this[O+--N],te=1;for(;N>0&&(te*=256);)K+=this[O+--N]*te;return K},T.prototype.readUint8=T.prototype.readUInt8=function(O,N){return O=O>>>0,N||ge(O,1,this.length),this[O]},T.prototype.readUint16LE=T.prototype.readUInt16LE=function(O,N){return O=O>>>0,N||ge(O,2,this.length),this[O]|this[O+1]<<8},T.prototype.readUint16BE=T.prototype.readUInt16BE=function(O,N){return O=O>>>0,N||ge(O,2,this.length),this[O]<<8|this[O+1]},T.prototype.readUint32LE=T.prototype.readUInt32LE=function(O,N){return O=O>>>0,N||ge(O,4,this.length),(this[O]|this[O+1]<<8|this[O+2]<<16)+this[O+3]*16777216},T.prototype.readUint32BE=T.prototype.readUInt32BE=function(O,N){return O=O>>>0,N||ge(O,4,this.length),this[O]*16777216+(this[O+1]<<16|this[O+2]<<8|this[O+3])},T.prototype.readBigUInt64LE=tr(function(O){O=O>>>0,At(O,"offset");const N=this[O],U=this[O+7];(N===void 0||U===void 0)&&et(O,this.length-8);const K=N+this[++O]*2**8+this[++O]*2**16+this[++O]*2**24,te=this[++O]+this[++O]*2**8+this[++O]*2**16+U*2**24;return BigInt(K)+(BigInt(te)<<BigInt(32))}),T.prototype.readBigUInt64BE=tr(function(O){O=O>>>0,At(O,"offset");const N=this[O],U=this[O+7];(N===void 0||U===void 0)&&et(O,this.length-8);const K=N*2**24+this[++O]*2**16+this[++O]*2**8+this[++O],te=this[++O]*2**24+this[++O]*2**16+this[++O]*2**8+U;return(BigInt(K)<<BigInt(32))+BigInt(te)}),T.prototype.readIntLE=function(O,N,U){O=O>>>0,N=N>>>0,U||ge(O,N,this.length);let K=this[O],te=1,ie=0;for(;++ie<N&&(te*=256);)K+=this[O+ie]*te;return te*=128,K>=te&&(K-=Math.pow(2,8*N)),K},T.prototype.readIntBE=function(O,N,U){O=O>>>0,N=N>>>0,U||ge(O,N,this.length);let K=N,te=1,ie=this[O+--K];for(;K>0&&(te*=256);)ie+=this[O+--K]*te;return te*=128,ie>=te&&(ie-=Math.pow(2,8*N)),ie},T.prototype.readInt8=function(O,N){return O=O>>>0,N||ge(O,1,this.length),this[O]&128?(255-this[O]+1)*-1:this[O]},T.prototype.readInt16LE=function(O,N){O=O>>>0,N||ge(O,2,this.length);const U=this[O]|this[O+1]<<8;return U&32768?U|4294901760:U},T.prototype.readInt16BE=function(O,N){O=O>>>0,N||ge(O,2,this.length);const U=this[O+1]|this[O]<<8;return U&32768?U|4294901760:U},T.prototype.readInt32LE=function(O,N){return O=O>>>0,N||ge(O,4,this.length),this[O]|this[O+1]<<8|this[O+2]<<16|this[O+3]<<24},T.prototype.readInt32BE=function(O,N){return O=O>>>0,N||ge(O,4,this.length),this[O]<<24|this[O+1]<<16|this[O+2]<<8|this[O+3]},T.prototype.readBigInt64LE=tr(function(O){O=O>>>0,At(O,"offset");const N=this[O],U=this[O+7];(N===void 0||U===void 0)&&et(O,this.length-8);const K=this[O+4]+this[O+5]*2**8+this[O+6]*2**16+(U<<24);return(BigInt(K)<<BigInt(32))+BigInt(N+this[++O]*256+this[++O]*65536+this[++O]*16777216)}),T.prototype.readBigInt64BE=tr(function(O){O=O>>>0,At(O,"offset");const N=this[O],U=this[O+7];(N===void 0||U===void 0)&&et(O,this.length-8);const K=(N<<24)+this[++O]*2**16+this[++O]*2**8+this[++O];return(BigInt(K)<<BigInt(32))+BigInt(this[++O]*16777216+this[++O]*65536+this[++O]*256+U)}),T.prototype.readFloatLE=function(O,N){return O=O>>>0,N||ge(O,4,this.length),a.read(this,O,!0,23,4)},T.prototype.readFloatBE=function(O,N){return O=O>>>0,N||ge(O,4,this.length),a.read(this,O,!1,23,4)},T.prototype.readDoubleLE=function(O,N){return O=O>>>0,N||ge(O,8,this.length),a.read(this,O,!0,52,8)},T.prototype.readDoubleBE=function(O,N){return O=O>>>0,N||ge(O,8,this.length),a.read(this,O,!1,52,8)};function G(C,O,N,U,K,te){if(!T.isBuffer(C))throw new TypeError('"buffer" argument must be a Buffer instance');if(O>K||O<te)throw new RangeError('"value" argument is out of bounds');if(N+U>C.length)throw new RangeError("Index out of range")}T.prototype.writeUintLE=T.prototype.writeUIntLE=function(O,N,U,K){if(O=+O,N=N>>>0,U=U>>>0,!K){const Oe=Math.pow(2,8*U)-1;G(this,O,N,U,Oe,0)}let te=1,ie=0;for(this[N]=O&255;++ie<U&&(te*=256);)this[N+ie]=O/te&255;return N+U},T.prototype.writeUintBE=T.prototype.writeUIntBE=function(O,N,U,K){if(O=+O,N=N>>>0,U=U>>>0,!K){const Oe=Math.pow(2,8*U)-1;G(this,O,N,U,Oe,0)}let te=U-1,ie=1;for(this[N+te]=O&255;--te>=0&&(ie*=256);)this[N+te]=O/ie&255;return N+U},T.prototype.writeUint8=T.prototype.writeUInt8=function(O,N,U){return O=+O,N=N>>>0,U||G(this,O,N,1,255,0),this[N]=O&255,N+1},T.prototype.writeUint16LE=T.prototype.writeUInt16LE=function(O,N,U){return O=+O,N=N>>>0,U||G(this,O,N,2,65535,0),this[N]=O&255,this[N+1]=O>>>8,N+2},T.prototype.writeUint16BE=T.prototype.writeUInt16BE=function(O,N,U){return O=+O,N=N>>>0,U||G(this,O,N,2,65535,0),this[N]=O>>>8,this[N+1]=O&255,N+2},T.prototype.writeUint32LE=T.prototype.writeUInt32LE=function(O,N,U){return O=+O,N=N>>>0,U||G(this,O,N,4,4294967295,0),this[N+3]=O>>>24,this[N+2]=O>>>16,this[N+1]=O>>>8,this[N]=O&255,N+4},T.prototype.writeUint32BE=T.prototype.writeUInt32BE=function(O,N,U){return O=+O,N=N>>>0,U||G(this,O,N,4,4294967295,0),this[N]=O>>>24,this[N+1]=O>>>16,this[N+2]=O>>>8,this[N+3]=O&255,N+4};function q(C,O,N,U,K){zt(O,U,K,C,N,7);let te=Number(O&BigInt(4294967295));C[N++]=te,te=te>>8,C[N++]=te,te=te>>8,C[N++]=te,te=te>>8,C[N++]=te;let ie=Number(O>>BigInt(32)&BigInt(4294967295));return C[N++]=ie,ie=ie>>8,C[N++]=ie,ie=ie>>8,C[N++]=ie,ie=ie>>8,C[N++]=ie,N}function L(C,O,N,U,K){zt(O,U,K,C,N,7);let te=Number(O&BigInt(4294967295));C[N+7]=te,te=te>>8,C[N+6]=te,te=te>>8,C[N+5]=te,te=te>>8,C[N+4]=te;let ie=Number(O>>BigInt(32)&BigInt(4294967295));return C[N+3]=ie,ie=ie>>8,C[N+2]=ie,ie=ie>>8,C[N+1]=ie,ie=ie>>8,C[N]=ie,N+8}T.prototype.writeBigUInt64LE=tr(function(O,N=0){return q(this,O,N,BigInt(0),BigInt("0xffffffffffffffff"))}),T.prototype.writeBigUInt64BE=tr(function(O,N=0){return L(this,O,N,BigInt(0),BigInt("0xffffffffffffffff"))}),T.prototype.writeIntLE=function(O,N,U,K){if(O=+O,N=N>>>0,!K){const Ue=Math.pow(2,8*U-1);G(this,O,N,U,Ue-1,-Ue)}let te=0,ie=1,Oe=0;for(this[N]=O&255;++te<U&&(ie*=256);)O<0&&Oe===0&&this[N+te-1]!==0&&(Oe=1),this[N+te]=(O/ie>>0)-Oe&255;return N+U},T.prototype.writeIntBE=function(O,N,U,K){if(O=+O,N=N>>>0,!K){const Ue=Math.pow(2,8*U-1);G(this,O,N,U,Ue-1,-Ue)}let te=U-1,ie=1,Oe=0;for(this[N+te]=O&255;--te>=0&&(ie*=256);)O<0&&Oe===0&&this[N+te+1]!==0&&(Oe=1),this[N+te]=(O/ie>>0)-Oe&255;return N+U},T.prototype.writeInt8=function(O,N,U){return O=+O,N=N>>>0,U||G(this,O,N,1,127,-128),O<0&&(O=255+O+1),this[N]=O&255,N+1},T.prototype.writeInt16LE=function(O,N,U){return O=+O,N=N>>>0,U||G(this,O,N,2,32767,-32768),this[N]=O&255,this[N+1]=O>>>8,N+2},T.prototype.writeInt16BE=function(O,N,U){return O=+O,N=N>>>0,U||G(this,O,N,2,32767,-32768),this[N]=O>>>8,this[N+1]=O&255,N+2},T.prototype.writeInt32LE=function(O,N,U){return O=+O,N=N>>>0,U||G(this,O,N,4,2147483647,-2147483648),this[N]=O&255,this[N+1]=O>>>8,this[N+2]=O>>>16,this[N+3]=O>>>24,N+4},T.prototype.writeInt32BE=function(O,N,U){return O=+O,N=N>>>0,U||G(this,O,N,4,2147483647,-2147483648),O<0&&(O=4294967295+O+1),this[N]=O>>>24,this[N+1]=O>>>16,this[N+2]=O>>>8,this[N+3]=O&255,N+4},T.prototype.writeBigInt64LE=tr(function(O,N=0){return q(this,O,N,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),T.prototype.writeBigInt64BE=tr(function(O,N=0){return L(this,O,N,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function X(C,O,N,U,K,te){if(N+U>C.length)throw new RangeError("Index out of range");if(N<0)throw new RangeError("Index out of range")}function Z(C,O,N,U,K){return O=+O,N=N>>>0,K||X(C,O,N,4),a.write(C,O,N,U,23,4),N+4}T.prototype.writeFloatLE=function(O,N,U){return Z(this,O,N,!0,U)},T.prototype.writeFloatBE=function(O,N,U){return Z(this,O,N,!1,U)};function ae(C,O,N,U,K){return O=+O,N=N>>>0,K||X(C,O,N,8),a.write(C,O,N,U,52,8),N+8}T.prototype.writeDoubleLE=function(O,N,U){return ae(this,O,N,!0,U)},T.prototype.writeDoubleBE=function(O,N,U){return ae(this,O,N,!1,U)},T.prototype.copy=function(O,N,U,K){if(!T.isBuffer(O))throw new TypeError("argument should be a Buffer");if(U||(U=0),!K&&K!==0&&(K=this.length),N>=O.length&&(N=O.length),N||(N=0),K>0&&K<U&&(K=U),K===U||O.length===0||this.length===0)return 0;if(N<0)throw new RangeError("targetStart out of bounds");if(U<0||U>=this.length)throw new RangeError("Index out of range");if(K<0)throw new RangeError("sourceEnd out of bounds");K>this.length&&(K=this.length),O.length-N<K-U&&(K=O.length-N+U);const te=K-U;return this===O&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(N,U,K):Uint8Array.prototype.set.call(O,this.subarray(U,K),N),te},T.prototype.fill=function(O,N,U,K){if(typeof O=="string"){if(typeof N=="string"?(K=N,N=0,U=this.length):typeof U=="string"&&(K=U,U=this.length),K!==void 0&&typeof K!="string")throw new TypeError("encoding must be a string");if(typeof K=="string"&&!T.isEncoding(K))throw new TypeError("Unknown encoding: "+K);if(O.length===1){const ie=O.charCodeAt(0);(K==="utf8"&&ie<128||K==="latin1")&&(O=ie)}}else typeof O=="number"?O=O&255:typeof O=="boolean"&&(O=Number(O));if(N<0||this.length<N||this.length<U)throw new RangeError("Out of range index");if(U<=N)return this;N=N>>>0,U=U===void 0?this.length:U>>>0,O||(O=0);let te;if(typeof O=="number")for(te=N;te<U;++te)this[te]=O;else{const ie=T.isBuffer(O)?O:T.from(O,K),Oe=ie.length;if(Oe===0)throw new TypeError('The value "'+O+'" is invalid for argument "value"');for(te=0;te<U-N;++te)this[te+N]=ie[te%Oe]}return this};const re={};function _e(C,O,N){re[C]=class extends N{constructor(){super(),Object.defineProperty(this,"message",{value:O.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${C}]`,this.stack,delete this.name}get code(){return C}set code(K){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:K,writable:!0})}toString(){return`${this.name} [${C}]: ${this.message}`}}}_e("ERR_BUFFER_OUT_OF_BOUNDS",function(C){return C?`${C} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),_e("ERR_INVALID_ARG_TYPE",function(C,O){return`The "${C}" argument must be of type number. Received type ${typeof O}`},TypeError),_e("ERR_OUT_OF_RANGE",function(C,O,N){let U=`The value of "${C}" is out of range.`,K=N;return Number.isInteger(N)&&Math.abs(N)>4294967296?K=Ee(String(N)):typeof N=="bigint"&&(K=String(N),(N>BigInt(2)**BigInt(32)||N<-(BigInt(2)**BigInt(32)))&&(K=Ee(K)),K+="n"),U+=` It must be ${O}. Received ${K}`,U},RangeError);function Ee(C){let O="",N=C.length;const U=C[0]==="-"?1:0;for(;N>=U+4;N-=3)O=`_${C.slice(N-3,N)}${O}`;return`${C.slice(0,N)}${O}`}function Je(C,O,N){At(O,"offset"),(C[O]===void 0||C[O+N]===void 0)&&et(O,C.length-(N+1))}function zt(C,O,N,U,K,te){if(C>N||C<O){const ie=typeof O=="bigint"?"n":"";let Oe;throw te>3?O===0||O===BigInt(0)?Oe=`>= 0${ie} and < 2${ie} ** ${(te+1)*8}${ie}`:Oe=`>= -(2${ie} ** ${(te+1)*8-1}${ie}) and < 2 ** ${(te+1)*8-1}${ie}`:Oe=`>= ${O}${ie} and <= ${N}${ie}`,new re.ERR_OUT_OF_RANGE("value",Oe,C)}Je(U,K,te)}function At(C,O){if(typeof C!="number")throw new re.ERR_INVALID_ARG_TYPE(O,"number",C)}function et(C,O,N){throw Math.floor(C)!==C?(At(C,N),new re.ERR_OUT_OF_RANGE(N||"offset","an integer",C)):O<0?new re.ERR_BUFFER_OUT_OF_BOUNDS:new re.ERR_OUT_OF_RANGE(N||"offset",`>= ${N?1:0} and <= ${O}`,C)}const un=/[^+/0-9A-Za-z-_]/g;function Gn(C){if(C=C.split("=")[0],C=C.trim().replace(un,""),C.length<2)return"";for(;C.length%4!==0;)C=C+"=";return C}function bs(C,O){O=O||1/0;let N;const U=C.length;let K=null;const te=[];for(let ie=0;ie<U;++ie){if(N=C.charCodeAt(ie),N>55295&&N<57344){if(!K){if(N>56319){(O-=3)>-1&&te.push(239,191,189);continue}else if(ie+1===U){(O-=3)>-1&&te.push(239,191,189);continue}K=N;continue}if(N<56320){(O-=3)>-1&&te.push(239,191,189),K=N;continue}N=(K-55296<<10|N-56320)+65536}else K&&(O-=3)>-1&&te.push(239,191,189);if(K=null,N<128){if((O-=1)<0)break;te.push(N)}else if(N<2048){if((O-=2)<0)break;te.push(N>>6|192,N&63|128)}else if(N<65536){if((O-=3)<0)break;te.push(N>>12|224,N>>6&63|128,N&63|128)}else if(N<1114112){if((O-=4)<0)break;te.push(N>>18|240,N>>12&63|128,N>>6&63|128,N&63|128)}else throw new Error("Invalid code point")}return te}function ue(C){const O=[];for(let N=0;N<C.length;++N)O.push(C.charCodeAt(N)&255);return O}function Fi(C,O){let N,U,K;const te=[];for(let ie=0;ie<C.length&&!((O-=2)<0);++ie)N=C.charCodeAt(ie),U=N>>8,K=N%256,te.push(K),te.push(U);return te}function oi(C){return u.toByteArray(Gn(C))}function ia(C,O,N,U){let K;for(K=0;K<U&&!(K+N>=O.length||K>=C.length);++K)O[K+N]=C[K];return K}function En(C,O){return C instanceof O||C!=null&&C.constructor!=null&&C.constructor.name!=null&&C.constructor.name===O.name}function hc(C){return C!==C}const pc=function(){const C="0123456789abcdef",O=new Array(256);for(let N=0;N<16;++N){const U=N*16;for(let K=0;K<16;++K)O[U+K]=C[N]+C[K]}return O}();function tr(C){return typeof BigInt>"u"?gc:C}function gc(){throw new Error("BigInt not supported")}},8769:(c,d,f)=>{var u,a=TypeError,_=Object.getOwnPropertyDescriptor;if(_)try{_({},"")}catch{_=null}var w=function(){throw new a},m=_?function(){try{return arguments.callee,w}catch{try{return _(arguments,"callee").get}catch{return w}}}():w,l=f(1405)(),T=Object.getPrototypeOf||function(D){return D.__proto__},b=u,S=u,x=u,B=typeof Uint8Array>"u"?u:T(Uint8Array),F={"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?u:ArrayBuffer,"%ArrayBufferPrototype%":typeof ArrayBuffer>"u"?u:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":l?T([][Symbol.iterator]()):u,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":u,"%AsyncFunction%":S,"%AsyncFunctionPrototype%":u,"%AsyncGenerator%":u,"%AsyncGeneratorFunction%":x,"%AsyncGeneratorPrototype%":u,"%AsyncIteratorPrototype%":u,"%Atomics%":typeof Atomics>"u"?u:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":typeof DataView>"u"?u:DataView,"%DataViewPrototype%":typeof DataView>"u"?u:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":typeof Float32Array>"u"?u:Float32Array,"%Float32ArrayPrototype%":typeof Float32Array>"u"?u:Float32Array.prototype,"%Float64Array%":typeof Float64Array>"u"?u:Float64Array,"%Float64ArrayPrototype%":typeof Float64Array>"u"?u:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":u,"%GeneratorFunction%":b,"%GeneratorPrototype%":u,"%Int8Array%":typeof Int8Array>"u"?u:Int8Array,"%Int8ArrayPrototype%":typeof Int8Array>"u"?u:Int8Array.prototype,"%Int16Array%":typeof Int16Array>"u"?u:Int16Array,"%Int16ArrayPrototype%":typeof Int16Array>"u"?u:Int8Array.prototype,"%Int32Array%":typeof Int32Array>"u"?u:Int32Array,"%Int32ArrayPrototype%":typeof Int32Array>"u"?u:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":l?T(T([][Symbol.iterator]())):u,"%JSON%":typeof JSON=="object"?JSON:u,"%JSONParse%":typeof JSON=="object"?JSON.parse:u,"%Map%":typeof Map>"u"?u:Map,"%MapIteratorPrototype%":typeof Map>"u"||!l?u:T(new Map()[Symbol.iterator]()),"%MapPrototype%":typeof Map>"u"?u:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?u:Promise,"%PromisePrototype%":typeof Promise>"u"?u:Promise.prototype,"%PromiseProto_then%":typeof Promise>"u"?u:Promise.prototype.then,"%Promise_all%":typeof Promise>"u"?u:Promise.all,"%Promise_reject%":typeof Promise>"u"?u:Promise.reject,"%Promise_resolve%":typeof Promise>"u"?u:Promise.resolve,"%Proxy%":typeof Proxy>"u"?u:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":typeof Reflect>"u"?u:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":typeof Set>"u"?u:Set,"%SetIteratorPrototype%":typeof Set>"u"||!l?u:T(new Set()[Symbol.iterator]()),"%SetPrototype%":typeof Set>"u"?u:Set.prototype,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?u:SharedArrayBuffer,"%SharedArrayBufferPrototype%":typeof SharedArrayBuffer>"u"?u:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":l?T(""[Symbol.iterator]()):u,"%StringPrototype%":String.prototype,"%Symbol%":l?Symbol:u,"%SymbolPrototype%":l?Symbol.prototype:u,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":m,"%TypedArray%":B,"%TypedArrayPrototype%":B?B.prototype:u,"%TypeError%":a,"%TypeErrorPrototype%":a.prototype,"%Uint8Array%":typeof Uint8Array>"u"?u:Uint8Array,"%Uint8ArrayPrototype%":typeof Uint8Array>"u"?u:Uint8Array.prototype,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?u:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":typeof Uint8ClampedArray>"u"?u:Uint8ClampedArray.prototype,"%Uint16Array%":typeof Uint16Array>"u"?u:Uint16Array,"%Uint16ArrayPrototype%":typeof Uint16Array>"u"?u:Uint16Array.prototype,"%Uint32Array%":typeof Uint32Array>"u"?u:Uint32Array,"%Uint32ArrayPrototype%":typeof Uint32Array>"u"?u:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":typeof WeakMap>"u"?u:WeakMap,"%WeakMapPrototype%":typeof WeakMap>"u"?u:WeakMap.prototype,"%WeakSet%":typeof WeakSet>"u"?u:WeakSet,"%WeakSetPrototype%":typeof WeakSet>"u"?u:WeakSet.prototype},k=f(8612),M=k.call(Function.call,String.prototype.replace),A=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,R=/\\(\\)?/g,P=function(z){var $=[];return M(z,A,function(Y,W,H,J){$[$.length]=H?M(J,R,"$1"):W||Y}),$},j=function(z,$){if(!(z in F))throw new SyntaxError("intrinsic "+z+" does not exist!");if(typeof F[z]>"u"&&!$)throw new a("intrinsic "+z+" exists, but is not available. Please file an issue!");return F[z]};c.exports=function(z,$){if(typeof z!="string"||z.length===0)throw new TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof $!="boolean")throw new TypeError('"allowMissing" argument must be a boolean');for(var Y=P(z),W=j("%"+(Y.length>0?Y[0]:"")+"%",$),H=1;H<Y.length;H+=1)if(W!=null)if(_&&H+1>=Y.length){var J=_(W,Y[H]);if(!$&&!(Y[H]in W))throw new a("base intrinsic for "+z+" exists, but the property is not available.");W=J&&"get"in J&&!("originalValue"in J.get)?J.get:W[Y[H]]}else W=W[Y[H]];return W}},4147:(c,d,f)=>{var u=f(8612),a=f(8769),_=a("%Function.prototype.apply%"),w=a("%Function.prototype.call%"),m=a("%Reflect.apply%",!0)||u.call(w,_),l=a("%Object.defineProperty%",!0);if(l)try{l({},"a",{value:1})}catch{l=null}c.exports=function(){return m(u,w,arguments)};var T=function(){return m(u,_,arguments)};l?l(c.exports,"apply",{value:T}):c.exports.apply=T},8914:(c,d,f)=>{var u=f(8769),a=f(4147),_=a(u("String.prototype.indexOf"));c.exports=function(m,l){var T=u(m,!!l);return typeof T=="function"&&_(m,".prototype.")?a(T):T}},4079:(c,d,f)=>{var u=f(8769),a=u("%Object.getOwnPropertyDescriptor%");if(a)try{a([],"length")}catch{a=null}c.exports=a},6729:c=>{var d=Object.prototype.hasOwnProperty,f="~";function u(){}Object.create&&(u.prototype=Object.create(null),new u().__proto__||(f=!1));function a(l,T,b){this.fn=l,this.context=T,this.once=b||!1}function _(l,T,b,S,x){if(typeof b!="function")throw new TypeError("The listener must be a function");var B=new a(b,S||l,x),F=f?f+T:T;return l._events[F]?l._events[F].fn?l._events[F]=[l._events[F],B]:l._events[F].push(B):(l._events[F]=B,l._eventsCount++),l}function w(l,T){--l._eventsCount===0?l._events=new u:delete l._events[T]}function m(){this._events=new u,this._eventsCount=0}m.prototype.eventNames=function(){var T=[],b,S;if(this._eventsCount===0)return T;for(S in b=this._events)d.call(b,S)&&T.push(f?S.slice(1):S);return Object.getOwnPropertySymbols?T.concat(Object.getOwnPropertySymbols(b)):T},m.prototype.listeners=function(T){var b=f?f+T:T,S=this._events[b];if(!S)return[];if(S.fn)return[S.fn];for(var x=0,B=S.length,F=new Array(B);x<B;x++)F[x]=S[x].fn;return F},m.prototype.listenerCount=function(T){var b=f?f+T:T,S=this._events[b];return S?S.fn?1:S.length:0},m.prototype.emit=function(T,b,S,x,B,F){var k=f?f+T:T;if(!this._events[k])return!1;var M=this._events[k],A=arguments.length,R,P;if(M.fn){switch(M.once&&this.removeListener(T,M.fn,void 0,!0),A){case 1:return M.fn.call(M.context),!0;case 2:return M.fn.call(M.context,b),!0;case 3:return M.fn.call(M.context,b,S),!0;case 4:return M.fn.call(M.context,b,S,x),!0;case 5:return M.fn.call(M.context,b,S,x,B),!0;case 6:return M.fn.call(M.context,b,S,x,B,F),!0}for(P=1,R=new Array(A-1);P<A;P++)R[P-1]=arguments[P];M.fn.apply(M.context,R)}else{var j=M.length,D;for(P=0;P<j;P++)switch(M[P].once&&this.removeListener(T,M[P].fn,void 0,!0),A){case 1:M[P].fn.call(M[P].context);break;case 2:M[P].fn.call(M[P].context,b);break;case 3:M[P].fn.call(M[P].context,b,S);break;case 4:M[P].fn.call(M[P].context,b,S,x);break;default:if(!R)for(D=1,R=new Array(A-1);D<A;D++)R[D-1]=arguments[D];M[P].fn.apply(M[P].context,R)}}return!0},m.prototype.on=function(T,b,S){return _(this,T,b,S,!1)},m.prototype.once=function(T,b,S){return _(this,T,b,S,!0)},m.prototype.removeListener=function(T,b,S,x){var B=f?f+T:T;if(!this._events[B])return this;if(!b)return w(this,B),this;var F=this._events[B];if(F.fn)F.fn===b&&(!x||F.once)&&(!S||F.context===S)&&w(this,B);else{for(var k=0,M=[],A=F.length;k<A;k++)(F[k].fn!==b||x&&!F[k].once||S&&F[k].context!==S)&&M.push(F[k]);M.length?this._events[B]=M.length===1?M[0]:M:w(this,B)}return this},m.prototype.removeAllListeners=function(T){var b;return T?(b=f?f+T:T,this._events[b]&&w(this,b)):(this._events=new u,this._eventsCount=0),this},m.prototype.off=m.prototype.removeListener,m.prototype.addListener=m.prototype.on,m.prefixed=f,m.EventEmitter=m,c.exports=m},7187:c=>{var d=typeof Reflect=="object"?Reflect:null,f=d&&typeof d.apply=="function"?d.apply:function(j,D,z){return Function.prototype.apply.call(j,D,z)},u;d&&typeof d.ownKeys=="function"?u=d.ownKeys:Object.getOwnPropertySymbols?u=function(j){return Object.getOwnPropertyNames(j).concat(Object.getOwnPropertySymbols(j))}:u=function(j){return Object.getOwnPropertyNames(j)};function a(P){console&&console.warn&&console.warn(P)}var _=Number.isNaN||function(j){return j!==j};function w(){w.init.call(this)}c.exports=w,c.exports.once=R,w.EventEmitter=w,w.prototype._events=void 0,w.prototype._eventsCount=0,w.prototype._maxListeners=void 0;var m=10;function l(P){if(typeof P!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof P)}Object.defineProperty(w,"defaultMaxListeners",{enumerable:!0,get:function(){return m},set:function(P){if(typeof P!="number"||P<0||_(P))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+P+".");m=P}}),w.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},w.prototype.setMaxListeners=function(j){if(typeof j!="number"||j<0||_(j))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+j+".");return this._maxListeners=j,this};function T(P){return P._maxListeners===void 0?w.defaultMaxListeners:P._maxListeners}w.prototype.getMaxListeners=function(){return T(this)},w.prototype.emit=function(j){for(var D=[],z=1;z<arguments.length;z++)D.push(arguments[z]);var $=j==="error",Y=this._events;if(Y!==void 0)$=$&&Y.error===void 0;else if(!$)return!1;if($){var W;if(D.length>0&&(W=D[0]),W instanceof Error)throw W;var H=new Error("Unhandled error."+(W?" ("+W.message+")":""));throw H.context=W,H}var J=Y[j];if(J===void 0)return!1;if(typeof J=="function")f(J,this,D);else for(var V=J.length,le=k(J,V),z=0;z<V;++z)f(le[z],this,D);return!0};function b(P,j,D,z){var $,Y,W;if(l(D),Y=P._events,Y===void 0?(Y=P._events=Object.create(null),P._eventsCount=0):(Y.newListener!==void 0&&(P.emit("newListener",j,D.listener?D.listener:D),Y=P._events),W=Y[j]),W===void 0)W=Y[j]=D,++P._eventsCount;else if(typeof W=="function"?W=Y[j]=z?[D,W]:[W,D]:z?W.unshift(D):W.push(D),$=T(P),$>0&&W.length>$&&!W.warned){W.warned=!0;var H=new Error("Possible EventEmitter memory leak detected. "+W.length+" "+String(j)+" listeners added. Use emitter.setMaxListeners() to increase limit");H.name="MaxListenersExceededWarning",H.emitter=P,H.type=j,H.count=W.length,a(H)}return P}w.prototype.addListener=function(j,D){return b(this,j,D,!1)},w.prototype.on=w.prototype.addListener,w.prototype.prependListener=function(j,D){return b(this,j,D,!0)};function S(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function x(P,j,D){var z={fired:!1,wrapFn:void 0,target:P,type:j,listener:D},$=S.bind(z);return $.listener=D,z.wrapFn=$,$}w.prototype.once=function(j,D){return l(D),this.on(j,x(this,j,D)),this},w.prototype.prependOnceListener=function(j,D){return l(D),this.prependListener(j,x(this,j,D)),this},w.prototype.removeListener=function(j,D){var z,$,Y,W,H;if(l(D),$=this._events,$===void 0)return this;if(z=$[j],z===void 0)return this;if(z===D||z.listener===D)--this._eventsCount===0?this._events=Object.create(null):(delete $[j],$.removeListener&&this.emit("removeListener",j,z.listener||D));else if(typeof z!="function"){for(Y=-1,W=z.length-1;W>=0;W--)if(z[W]===D||z[W].listener===D){H=z[W].listener,Y=W;break}if(Y<0)return this;Y===0?z.shift():M(z,Y),z.length===1&&($[j]=z[0]),$.removeListener!==void 0&&this.emit("removeListener",j,H||D)}return this},w.prototype.off=w.prototype.removeListener,w.prototype.removeAllListeners=function(j){var D,z,$;if(z=this._events,z===void 0)return this;if(z.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):z[j]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete z[j]),this;if(arguments.length===0){var Y=Object.keys(z),W;for($=0;$<Y.length;++$)W=Y[$],W!=="removeListener"&&this.removeAllListeners(W);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(D=z[j],typeof D=="function")this.removeListener(j,D);else if(D!==void 0)for($=D.length-1;$>=0;$--)this.removeListener(j,D[$]);return this};function B(P,j,D){var z=P._events;if(z===void 0)return[];var $=z[j];return $===void 0?[]:typeof $=="function"?D?[$.listener||$]:[$]:D?A($):k($,$.length)}w.prototype.listeners=function(j){return B(this,j,!0)},w.prototype.rawListeners=function(j){return B(this,j,!1)},w.listenerCount=function(P,j){return typeof P.listenerCount=="function"?P.listenerCount(j):F.call(P,j)},w.prototype.listenerCount=F;function F(P){var j=this._events;if(j!==void 0){var D=j[P];if(typeof D=="function")return 1;if(D!==void 0)return D.length}return 0}w.prototype.eventNames=function(){return this._eventsCount>0?u(this._events):[]};function k(P,j){for(var D=new Array(j),z=0;z<j;++z)D[z]=P[z];return D}function M(P,j){for(;j+1<P.length;j++)P[j]=P[j+1];P.pop()}function A(P){for(var j=new Array(P.length),D=0;D<j.length;++D)j[D]=P[D].listener||P[D];return j}function R(P,j){return new Promise(function(D,z){function $(){Y!==void 0&&P.removeListener("error",Y),D([].slice.call(arguments))}var Y;j!=="error"&&(Y=function(H){P.removeListener(j,$),z(H)},P.once("error",Y)),P.once(j,$)})}},9804:c=>{var d=Object.prototype.hasOwnProperty,f=Object.prototype.toString;c.exports=function(a,_,w){if(f.call(_)!=="[object Function]")throw new TypeError("iterator must be a function");var m=a.length;if(m===+m)for(var l=0;l<m;l++)_.call(w,a[l],l,a);else for(var T in a)d.call(a,T)&&_.call(w,a[T],T,a)}},7648:c=>{var d="Function.prototype.bind called on incompatible ",f=Array.prototype.slice,u=Object.prototype.toString,a="[object Function]";c.exports=function(w){var m=this;if(typeof m!="function"||u.call(m)!==a)throw new TypeError(d+m);for(var l=f.call(arguments,1),T,b=function(){if(this instanceof T){var k=m.apply(this,l.concat(f.call(arguments)));return Object(k)===k?k:this}else return m.apply(w,l.concat(f.call(arguments)))},S=Math.max(0,m.length-l.length),x=[],B=0;B<S;B++)x.push("$"+B);if(T=Function("binder","return function ("+x.join(",")+"){ return binder.apply(this,arguments); }")(b),m.prototype){var F=function(){};F.prototype=m.prototype,T.prototype=new F,F.prototype=null}return T}},8612:(c,d,f)=>{var u=f(7648);c.exports=Function.prototype.bind||u},1405:(c,d,f)=>{var u=f.g.Symbol,a=f(5419);c.exports=function(){return typeof u!="function"||typeof Symbol!="function"||typeof u("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:a()}},5419:c=>{c.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var f={},u=Symbol("test"),a=Object(u);if(typeof u=="string"||Object.prototype.toString.call(u)!=="[object Symbol]"||Object.prototype.toString.call(a)!=="[object Symbol]")return!1;var _=42;f[u]=_;for(u in f)return!1;if(typeof Object.keys=="function"&&Object.keys(f).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(f).length!==0)return!1;var w=Object.getOwnPropertySymbols(f);if(w.length!==1||w[0]!==u||!Object.prototype.propertyIsEnumerable.call(f,u))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var m=Object.getOwnPropertyDescriptor(f,u);if(m.value!==_||m.enumerable!==!0)return!1}return!0}},645:(c,d)=>{/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */d.read=function(f,u,a,_,w){var m,l,T=w*8-_-1,b=(1<<T)-1,S=b>>1,x=-7,B=a?w-1:0,F=a?-1:1,k=f[u+B];for(B+=F,m=k&(1<<-x)-1,k>>=-x,x+=T;x>0;m=m*256+f[u+B],B+=F,x-=8);for(l=m&(1<<-x)-1,m>>=-x,x+=_;x>0;l=l*256+f[u+B],B+=F,x-=8);if(m===0)m=1-S;else{if(m===b)return l?NaN:(k?-1:1)*(1/0);l=l+Math.pow(2,_),m=m-S}return(k?-1:1)*l*Math.pow(2,m-_)},d.write=function(f,u,a,_,w,m){var l,T,b,S=m*8-w-1,x=(1<<S)-1,B=x>>1,F=w===23?Math.pow(2,-24)-Math.pow(2,-77):0,k=_?0:m-1,M=_?1:-1,A=u<0||u===0&&1/u<0?1:0;for(u=Math.abs(u),isNaN(u)||u===1/0?(T=isNaN(u)?1:0,l=x):(l=Math.floor(Math.log(u)/Math.LN2),u*(b=Math.pow(2,-l))<1&&(l--,b*=2),l+B>=1?u+=F/b:u+=F*Math.pow(2,1-B),u*b>=2&&(l++,b/=2),l+B>=x?(T=0,l=x):l+B>=1?(T=(u*b-1)*Math.pow(2,w),l=l+B):(T=u*Math.pow(2,B-1)*Math.pow(2,w),l=0));w>=8;f[a+k]=T&255,k+=M,T/=256,w-=8);for(l=l<<w|T,S+=w;S>0;f[a+k]=l&255,k+=M,l/=256,S-=8);f[a+k-M]|=A*128}},5717:c=>{typeof Object.create=="function"?c.exports=function(f,u){u&&(f.super_=u,f.prototype=Object.create(u.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}))}:c.exports=function(f,u){if(u){f.super_=u;var a=function(){};a.prototype=u.prototype,f.prototype=new a,f.prototype.constructor=f}}},2584:c=>{var d=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",f=Object.prototype.toString,u=function(m){return d&&m&&typeof m=="object"&&Symbol.toStringTag in m?!1:f.call(m)==="[object Arguments]"},a=function(m){return u(m)?!0:m!==null&&typeof m=="object"&&typeof m.length=="number"&&m.length>=0&&f.call(m)!=="[object Array]"&&f.call(m.callee)==="[object Function]"},_=function(){return u(arguments)}();u.isLegacyArguments=a,c.exports=_?u:a},8662:c=>{var d=Object.prototype.toString,f=Function.prototype.toString,u=/^\s*(?:function)?\*/,a=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",_=Object.getPrototypeOf,w=function(){if(!a)return!1;try{return Function("return function*() {}")()}catch{}},m=w(),l=m?_(m):{};c.exports=function(b){if(typeof b!="function")return!1;if(u.test(f.call(b)))return!0;if(!a){var S=d.call(b);return S==="[object GeneratorFunction]"}return _(b)===l}},5692:(c,d,f)=>{var u=f(9804),a=f(6314),_=f(8914),w=_("Object.prototype.toString"),m=f(1405)(),l=m&&typeof Symbol.toStringTag=="symbol",T=a(),b=_("Array.prototype.indexOf",!0)||function(A,R){for(var P=0;P<A.length;P+=1)if(A[P]===R)return P;return-1},S=_("String.prototype.slice"),x={},B=f(4079),F=Object.getPrototypeOf;l&&B&&F&&u(T,function(M){var A=new f.g[M];if(!(Symbol.toStringTag in A))throw new EvalError("this engine has support for Symbol.toStringTag, but "+M+" does not have the property! Please report this.");var R=F(A),P=B(R,Symbol.toStringTag);if(!P){var j=F(R);P=B(j,Symbol.toStringTag)}x[M]=P.get});var k=function(A){var R=!1;return u(x,function(P,j){if(!R)try{R=P.call(A)===j}catch{}}),R};c.exports=function(A){if(!A||typeof A!="object")return!1;if(!l){var R=S(w(A),8,-1);return b(T,R)>-1}return B?k(A):!1}},6792:(c,d,f)=>{var u=null;typeof WebSocket<"u"?u=WebSocket:typeof MozWebSocket<"u"?u=MozWebSocket:typeof f.g<"u"?u=f.g.WebSocket||f.g.MozWebSocket:typeof window<"u"?u=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(u=self.WebSocket||self.MozWebSocket),c.exports=u},135:(c,d,f)=>{for(var u=f(8764).Buffer,a=4294967296,_=[],w=0;w<256;w++)_[w]=(w>15?"":"0")+w.toString(16);var m=c.exports=function(l,T){l instanceof u?(this.buffer=l,this.offset=T||0):Object.prototype.toString.call(l)=="[object Uint8Array]"?(this.buffer=new u(l),this.offset=T||0):(this.buffer=this.buffer||new u(8),this.offset=0,this.setValue.apply(this,arguments))};m.MAX_INT=Math.pow(2,53),m.MIN_INT=-Math.pow(2,53),m.prototype={constructor:m,_2scomp:function(){for(var l=this.buffer,T=this.offset,b=1,S=T+7;S>=T;S--){var x=(l[S]^255)+b;l[S]=x&255,b=x>>8}},setValue:function(l,T){var b=!1;if(arguments.length==1)if(typeof l=="number"){if(b=l<0,l=Math.abs(l),T=l%a,l=l/a,l>a)throw new RangeError(l+" is outside Int64 range");l=l|0}else if(typeof l=="string")l=(l+"").replace(/^0x/,""),T=l.substr(-8),l=l.length>8?l.substr(0,l.length-8):"",l=parseInt(l,16),T=parseInt(T,16);else throw new Error(l+" must be a Number or String");for(var S=this.buffer,x=this.offset,B=7;B>=0;B--)S[x+B]=T&255,T=B==4?l:T>>>8;b&&this._2scomp()},toNumber:function(l){for(var T=this.buffer,b=this.offset,S=T[b]&128,x=0,B=1,F=7,k=1;F>=0;F--,k*=256){var M=T[b+F];S&&(M=(M^255)+B,B=M>>8,M=M&255),x+=M*k}return!l&&x>=m.MAX_INT?S?-1/0:1/0:S?-x:x},valueOf:function(){return this.toNumber(!1)},toString:function(l){return this.valueOf().toString(l||10)},toOctetString:function(l){for(var T=new Array(8),b=this.buffer,S=this.offset,x=0;x<8;x++)T[x]=_[b[S+x]];return T.join(l||"")},toBuffer:function(l){if(l&&this.offset===0)return this.buffer;var T=new u(8);return this.buffer.copy(T,0,this.offset,this.offset+8),T},copy:function(l,T){this.buffer.copy(l,T||0,this.offset,this.offset+8)},compare:function(l){if((this.buffer[this.offset]&128)!=(l.buffer[l.offset]&128))return l.buffer[l.offset]-this.buffer[this.offset];for(var T=0;T<8;T++)if(this.buffer[this.offset+T]!==l.buffer[l.offset+T])return this.buffer[this.offset+T]-l.buffer[l.offset+T];return 0},equals:function(l){return this.compare(l)===0},inspect:function(){return"[Int64 value:"+this+" octets:"+this.toOctetString(" ")+"]"}}},8486:c=>{/*!
 *
 * Copyright 2009-2017 Kris Kowal under the terms of the MIT
 * license found at https://github.com/kriskowal/q/blob/v1/LICENSE
 *
 * With parts by Tyler Close
 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
 * at http://www.opensource.org/licenses/mit-license.html
 * Forked at ref_send.js version: 2009-05-11
 *
 * With parts by Mark Miller
 * Copyright (C) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */(function(d){typeof bootstrap=="function"?bootstrap("promise",d):c.exports=d()})(function(){var d=!1;try{throw new Error}catch(C){d=!!C.stack}var f=H(),u,a=function(){},_=function(){var C={task:void 0,next:null},O=C,N=!1,U=void 0,K=!1,te=[];function ie(){for(var Xe,Ke;C.next;)C=C.next,Xe=C.task,C.task=void 0,Ke=C.domain,Ke&&(C.domain=void 0,Ke.enter()),Oe(Xe,Ke);for(;te.length;)Xe=te.pop(),Oe(Xe);N=!1}function Oe(Xe,Ke){try{Xe()}catch(_c){if(K)throw Ke&&Ke.exit(),setTimeout(ie,0),Ke&&Ke.enter(),_c;setTimeout(function(){throw _c},0)}Ke&&Ke.exit()}if(_=function(Xe){O=O.next={task:Xe,domain:K&&process.domain,next:null},N||(N=!0,U())},typeof process=="object"&&process.toString()==="[object process]"&&process.nextTick)K=!0,U=function(){process.nextTick(ie)};else if(typeof setImmediate=="function")typeof window<"u"?U=setImmediate.bind(window,ie):U=function(){setImmediate(ie)};else if(typeof MessageChannel<"u"){var Ue=new MessageChannel;Ue.port1.onmessage=function(){U=$e,Ue.port1.onmessage=ie,ie()};var $e=function(){Ue.port2.postMessage(0)};U=function(){setTimeout(ie,0),$e()}}else U=function(){setTimeout(ie,0)};return _.runAfter=function(Xe){te.push(Xe),N||(N=!0,U())},_}(),w=Function.call;function m(C){return function(){return w.apply(C,arguments)}}var l=m(Array.prototype.slice),T=m(Array.prototype.reduce||function(C,O){var N=0,U=this.length;if(arguments.length===1)do{if(N in this){O=this[N++];break}if(++N>=U)throw new TypeError}while(1);for(;N<U;N++)N in this&&(O=C(O,this[N],N));return O}),b=m(Array.prototype.indexOf||function(C){for(var O=0;O<this.length;O++)if(this[O]===C)return O;return-1}),S=m(Array.prototype.map||function(C,O){var N=this,U=[];return T(N,function(K,te,ie){U.push(C.call(O,te,ie,N))},void 0),U}),x=Object.create||function(C){function O(){}return O.prototype=C,new O},B=Object.defineProperty||function(C,O,N){return C[O]=N.value,C},F=m(Object.prototype.hasOwnProperty),k=Object.keys||function(C){var O=[];for(var N in C)F(C,N)&&O.push(N);return O},M=m(Object.prototype.toString);function A(C){return C===Object(C)}function R(C){return M(C)==="[object StopIteration]"||C instanceof P}var P;typeof ReturnValue<"u"?P=ReturnValue:P=function(C){this.value=C};var j="From previous event:";function D(C,O){if(d&&O.stack&&typeof C=="object"&&C!==null&&C.stack){for(var N=[],U=O;U;U=U.source)U.stack&&(!C.__minimumStackCounter__||C.__minimumStackCounter__>U.stackCounter)&&(B(C,"__minimumStackCounter__",{value:U.stackCounter,configurable:!0}),N.unshift(U.stack));N.unshift(C.stack);var K=N.join(`
`+j+`
`),te=z(K);B(C,"stack",{value:te,configurable:!0})}}function z(C){for(var O=C.split(`
`),N=[],U=0;U<O.length;++U){var K=O[U];!W(K)&&!$(K)&&K&&N.push(K)}return N.join(`
`)}function $(C){return C.indexOf("(module.js:")!==-1||C.indexOf("(node.js:")!==-1}function Y(C){var O=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(C);if(O)return[O[1],Number(O[2])];var N=/at ([^ ]+):(\d+):(?:\d+)$/.exec(C);if(N)return[N[1],Number(N[2])];var U=/.*@(.+):(\d+)$/.exec(C);if(U)return[U[1],Number(U[2])]}function W(C){var O=Y(C);if(!O)return!1;var N=O[0],U=O[1];return N===u&&U>=f&&U<=gc}function H(){if(!!d)try{throw new Error}catch(U){var C=U.stack.split(`
`),O=C[0].indexOf("@")>0?C[1]:C[2],N=Y(O);return N?(u=N[0],N[1]):void 0}}function J(C,O,N){return function(){return typeof console<"u"&&typeof console.warn=="function"&&console.warn(O+" is deprecated, use "+N+" instead.",new Error("").stack),C.apply(C,arguments)}}function V(C){return C instanceof fe?C:Bt(C)?zt(C):Je(C)}V.resolve=V,V.nextTick=_,V.longStackSupport=!1;var le=1;typeof process=="object"&&process&&{BROWSER:!0}&&{BROWSER:!0}.Q_DEBUG&&(V.longStackSupport=!0),V.defer=pe;function pe(){var C=[],O=[],N,U=x(pe.prototype),K=x(fe.prototype);if(K.promiseDispatch=function(ie,Oe,Ue){var $e=l(arguments);C?(C.push($e),Oe==="when"&&Ue[1]&&O.push(Ue[1])):V.nextTick(function(){N.promiseDispatch.apply(N,$e)})},K.valueOf=function(){if(C)return K;var ie=Me(N);return He(ie)&&(N=ie),ie},K.inspect=function(){return N?N.inspect():{state:"pending"}},V.longStackSupport&&d)try{throw new Error}catch(ie){K.stack=ie.stack.substring(ie.stack.indexOf(`
`)+1),K.stackCounter=le++}function te(ie){N=ie,V.longStackSupport&&d&&(K.source=ie),T(C,function(Oe,Ue){V.nextTick(function(){ie.promiseDispatch.apply(ie,Ue)})},void 0),C=void 0,O=void 0}return U.promise=K,U.resolve=function(ie){N||te(V(ie))},U.fulfill=function(ie){N||te(Je(ie))},U.reject=function(ie){N||te(Ee(ie))},U.notify=function(ie){N||T(O,function(Oe,Ue){V.nextTick(function(){Ue(ie)})},void 0)},U}pe.prototype.makeNodeResolver=function(){var C=this;return function(O,N){O?C.reject(O):arguments.length>2?C.resolve(l(arguments,1)):C.resolve(N)}},V.Promise=se,V.promise=se;function se(C){if(typeof C!="function")throw new TypeError("resolver must be a function.");var O=pe();try{C(O.resolve,O.reject,O.notify)}catch(N){O.reject(N)}return O.promise}se.race=Ne,se.all=oi,se.reject=Ee,se.resolve=V,V.passByCopy=function(C){return C},fe.prototype.passByCopy=function(){return this},V.join=function(C,O){return V(C).join(O)},fe.prototype.join=function(C){return V([this,C]).spread(function(O,N){if(O===N)return O;throw new Error("Q can't join: not the same: "+O+" "+N)})},V.race=Ne;function Ne(C){return se(function(O,N){for(var U=0,K=C.length;U<K;U++)V(C[U]).then(O,N)})}fe.prototype.race=function(){return this.then(V.race)},V.makePromise=fe;function fe(C,O,N){O===void 0&&(O=function(te){return Ee(new Error("Promise does not support operation: "+te))}),N===void 0&&(N=function(){return{state:"unknown"}});var U=x(fe.prototype);if(U.promiseDispatch=function(te,ie,Oe){var Ue;try{C[ie]?Ue=C[ie].apply(U,Oe):Ue=O.call(U,ie,Oe)}catch($e){Ue=Ee($e)}te&&te(Ue)},U.inspect=N,N){var K=N();K.state==="rejected"&&(U.exception=K.reason),U.valueOf=function(){var te=N();return te.state==="pending"||te.state==="rejected"?U:te.value}}return U}fe.prototype.toString=function(){return"[object Promise]"},fe.prototype.then=function(C,O,N){var U=this,K=pe(),te=!1;function ie($e){try{return typeof C=="function"?C($e):$e}catch(Xe){return Ee(Xe)}}function Oe($e){if(typeof O=="function"){D($e,U);try{return O($e)}catch(Xe){return Ee(Xe)}}return Ee($e)}function Ue($e){return typeof N=="function"?N($e):$e}return V.nextTick(function(){U.promiseDispatch(function($e){te||(te=!0,K.resolve(ie($e)))},"when",[function($e){te||(te=!0,K.resolve(Oe($e)))}])}),U.promiseDispatch(void 0,"when",[void 0,function($e){var Xe,Ke=!1;try{Xe=Ue($e)}catch(_c){if(Ke=!0,V.onerror)V.onerror(_c);else throw _c}Ke||K.notify(Xe)}]),K.promise},V.tap=function(C,O){return V(C).tap(O)},fe.prototype.tap=function(C){return C=V(C),this.then(function(O){return C.fcall(O).thenResolve(O)})},V.when=Ce;function Ce(C,O,N,U){return V(C).then(O,N,U)}fe.prototype.thenResolve=function(C){return this.then(function(){return C})},V.thenResolve=function(C,O){return V(C).thenResolve(O)},fe.prototype.thenReject=function(C){return this.then(function(){throw C})},V.thenReject=function(C,O){return V(C).thenReject(O)},V.nearer=Me;function Me(C){if(He(C)){var O=C.inspect();if(O.state==="fulfilled")return O.value}return C}V.isPromise=He;function He(C){return C instanceof fe}V.isPromiseAlike=Bt;function Bt(C){return A(C)&&typeof C.then=="function"}V.isPending=vt;function vt(C){return He(C)&&C.inspect().state==="pending"}fe.prototype.isPending=function(){return this.inspect().state==="pending"},V.isFulfilled=ge;function ge(C){return!He(C)||C.inspect().state==="fulfilled"}fe.prototype.isFulfilled=function(){return this.inspect().state==="fulfilled"},V.isRejected=G;function G(C){return He(C)&&C.inspect().state==="rejected"}fe.prototype.isRejected=function(){return this.inspect().state==="rejected"};var q=[],L=[],X=[],Z=!0;function ae(){q.length=0,L.length=0,Z||(Z=!0)}function re(C,O){!Z||(typeof process=="object"&&typeof process.emit=="function"&&V.nextTick.runAfter(function(){b(L,C)!==-1&&(process.emit("unhandledRejection",O,C),X.push(C))}),L.push(C),O&&typeof O.stack<"u"?q.push(O.stack):q.push("(no stack) "+O))}function _e(C){if(!!Z){var O=b(L,C);O!==-1&&(typeof process=="object"&&typeof process.emit=="function"&&V.nextTick.runAfter(function(){var N=b(X,C);N!==-1&&(process.emit("rejectionHandled",q[O],C),X.splice(N,1))}),L.splice(O,1),q.splice(O,1))}}V.resetUnhandledRejections=ae,V.getUnhandledReasons=function(){return q.slice()},V.stopUnhandledRejectionTracking=function(){ae(),Z=!1},ae(),V.reject=Ee;function Ee(C){var O=fe({when:function(N){return N&&_e(this),N?N(C):this}},function(){return this},function(){return{state:"rejected",reason:C}});return re(O,C),O}V.fulfill=Je;function Je(C){return fe({when:function(){return C},get:function(O){return C[O]},set:function(O,N){C[O]=N},delete:function(O){delete C[O]},post:function(O,N){return O==null?C.apply(void 0,N):C[O].apply(C,N)},apply:function(O,N){return C.apply(O,N)},keys:function(){return k(C)}},void 0,function(){return{state:"fulfilled",value:C}})}function zt(C){var O=pe();return V.nextTick(function(){try{C.then(O.resolve,O.reject,O.notify)}catch(N){O.reject(N)}}),O.promise}V.master=At;function At(C){return fe({isDef:function(){}},function(N,U){return Fi(C,N,U)},function(){return V(C).inspect()})}V.spread=et;function et(C,O,N){return V(C).spread(O,N)}fe.prototype.spread=function(C,O){return this.all().then(function(N){return C.apply(void 0,N)},O)},V.async=un;function un(C){return function(){function O(te,ie){var Oe;if(typeof StopIteration>"u"){try{Oe=N[te](ie)}catch(Ue){return Ee(Ue)}return Oe.done?V(Oe.value):Ce(Oe.value,U,K)}else{try{Oe=N[te](ie)}catch(Ue){return R(Ue)?V(Ue.value):Ee(Ue)}return Ce(Oe,U,K)}}var N=C.apply(this,arguments),U=O.bind(O,"next"),K=O.bind(O,"throw");return U()}}V.spawn=Gn;function Gn(C){V.done(V.async(C)())}V.return=bs;function bs(C){throw new P(C)}V.promised=ue;function ue(C){return function(){return et([this,oi(arguments)],function(O,N){return C.apply(O,N)})}}V.dispatch=Fi;function Fi(C,O,N){return V(C).dispatch(O,N)}fe.prototype.dispatch=function(C,O){var N=this,U=pe();return V.nextTick(function(){N.promiseDispatch(U.resolve,C,O)}),U.promise},V.get=function(C,O){return V(C).dispatch("get",[O])},fe.prototype.get=function(C){return this.dispatch("get",[C])},V.set=function(C,O,N){return V(C).dispatch("set",[O,N])},fe.prototype.set=function(C,O){return this.dispatch("set",[C,O])},V.del=V.delete=function(C,O){return V(C).dispatch("delete",[O])},fe.prototype.del=fe.prototype.delete=function(C){return this.dispatch("delete",[C])},V.mapply=V.post=function(C,O,N){return V(C).dispatch("post",[O,N])},fe.prototype.mapply=fe.prototype.post=function(C,O){return this.dispatch("post",[C,O])},V.send=V.mcall=V.invoke=function(C,O){return V(C).dispatch("post",[O,l(arguments,2)])},fe.prototype.send=fe.prototype.mcall=fe.prototype.invoke=function(C){return this.dispatch("post",[C,l(arguments,1)])},V.fapply=function(C,O){return V(C).dispatch("apply",[void 0,O])},fe.prototype.fapply=function(C){return this.dispatch("apply",[void 0,C])},V.try=V.fcall=function(C){return V(C).dispatch("apply",[void 0,l(arguments,1)])},fe.prototype.fcall=function(){return this.dispatch("apply",[void 0,l(arguments)])},V.fbind=function(C){var O=V(C),N=l(arguments,1);return function(){return O.dispatch("apply",[this,N.concat(l(arguments))])}},fe.prototype.fbind=function(){var C=this,O=l(arguments);return function(){return C.dispatch("apply",[this,O.concat(l(arguments))])}},V.keys=function(C){return V(C).dispatch("keys",[])},fe.prototype.keys=function(){return this.dispatch("keys",[])},V.all=oi;function oi(C){return Ce(C,function(O){var N=0,U=pe();return T(O,function(K,te,ie){var Oe;He(te)&&(Oe=te.inspect()).state==="fulfilled"?O[ie]=Oe.value:(++N,Ce(te,function(Ue){O[ie]=Ue,--N===0&&U.resolve(O)},U.reject,function(Ue){U.notify({index:ie,value:Ue})}))},void 0),N===0&&U.resolve(O),U.promise})}fe.prototype.all=function(){return oi(this)},V.any=ia;function ia(C){if(C.length===0)return V.resolve();var O=V.defer(),N=0;return T(C,function(U,K,te){var ie=C[te];N++,Ce(ie,Oe,Ue,$e);function Oe(Xe){O.resolve(Xe)}function Ue(Xe){if(N--,N===0){var Ke=Xe||new Error(""+Xe);Ke.message="Q can't get fulfillment value from any promise, all promises were rejected. Last error message: "+Ke.message,O.reject(Ke)}}function $e(Xe){O.notify({index:te,value:Xe})}},void 0),O.promise}fe.prototype.any=function(){return ia(this)},V.allResolved=J(En,"allResolved","allSettled");function En(C){return Ce(C,function(O){return O=S(O,V),Ce(oi(S(O,function(N){return Ce(N,a,a)})),function(){return O})})}fe.prototype.allResolved=function(){return En(this)},V.allSettled=hc;function hc(C){return V(C).allSettled()}fe.prototype.allSettled=function(){return this.then(function(C){return oi(S(C,function(O){O=V(O);function N(){return O.inspect()}return O.then(N,N)}))})},V.fail=V.catch=function(C,O){return V(C).then(void 0,O)},fe.prototype.fail=fe.prototype.catch=function(C){return this.then(void 0,C)},V.progress=pc;function pc(C,O){return V(C).then(void 0,void 0,O)}fe.prototype.progress=function(C){return this.then(void 0,void 0,C)},V.fin=V.finally=function(C,O){return V(C).finally(O)},fe.prototype.fin=fe.prototype.finally=function(C){if(!C||typeof C.apply!="function")throw new Error("Q can't apply finally callback");return C=V(C),this.then(function(O){return C.fcall().then(function(){return O})},function(O){return C.fcall().then(function(){throw O})})},V.done=function(C,O,N,U){return V(C).done(O,N,U)},fe.prototype.done=function(C,O,N){var U=function(te){V.nextTick(function(){if(D(te,K),V.onerror)V.onerror(te);else throw te})},K=C||O||N?this.then(C,O,N):this;typeof process=="object"&&process&&process.domain&&(U=process.domain.bind(U)),K.then(void 0,U)},V.timeout=function(C,O,N){return V(C).timeout(O,N)},fe.prototype.timeout=function(C,O){var N=pe(),U=setTimeout(function(){(!O||typeof O=="string")&&(O=new Error(O||"Timed out after "+C+" ms"),O.code="ETIMEDOUT"),N.reject(O)},C);return this.then(function(K){clearTimeout(U),N.resolve(K)},function(K){clearTimeout(U),N.reject(K)},N.notify),N.promise},V.delay=function(C,O){return O===void 0&&(O=C,C=void 0),V(C).delay(O)},fe.prototype.delay=function(C){return this.then(function(O){var N=pe();return setTimeout(function(){N.resolve(O)},C),N.promise})},V.nfapply=function(C,O){return V(C).nfapply(O)},fe.prototype.nfapply=function(C){var O=pe(),N=l(C);return N.push(O.makeNodeResolver()),this.fapply(N).fail(O.reject),O.promise},V.nfcall=function(C){var O=l(arguments,1);return V(C).nfapply(O)},fe.prototype.nfcall=function(){var C=l(arguments),O=pe();return C.push(O.makeNodeResolver()),this.fapply(C).fail(O.reject),O.promise},V.nfbind=V.denodeify=function(C){if(C===void 0)throw new Error("Q can't wrap an undefined function");var O=l(arguments,1);return function(){var N=O.concat(l(arguments)),U=pe();return N.push(U.makeNodeResolver()),V(C).fapply(N).fail(U.reject),U.promise}},fe.prototype.nfbind=fe.prototype.denodeify=function(){var C=l(arguments);return C.unshift(this),V.denodeify.apply(void 0,C)},V.nbind=function(C,O){var N=l(arguments,2);return function(){var U=N.concat(l(arguments)),K=pe();U.push(K.makeNodeResolver());function te(){return C.apply(O,arguments)}return V(te).fapply(U).fail(K.reject),K.promise}},fe.prototype.nbind=function(){var C=l(arguments,0);return C.unshift(this),V.nbind.apply(void 0,C)},V.nmapply=V.npost=function(C,O,N){return V(C).npost(O,N)},fe.prototype.nmapply=fe.prototype.npost=function(C,O){var N=l(O||[]),U=pe();return N.push(U.makeNodeResolver()),this.dispatch("post",[C,N]).fail(U.reject),U.promise},V.nsend=V.nmcall=V.ninvoke=function(C,O){var N=l(arguments,2),U=pe();return N.push(U.makeNodeResolver()),V(C).dispatch("post",[O,N]).fail(U.reject),U.promise},fe.prototype.nsend=fe.prototype.nmcall=fe.prototype.ninvoke=function(C){var O=l(arguments,1),N=pe();return O.push(N.makeNodeResolver()),this.dispatch("post",[C,O]).fail(N.reject),N.promise},V.nodeify=tr;function tr(C,O){return V(C).nodeify(O)}fe.prototype.nodeify=function(C){if(C)this.then(function(O){V.nextTick(function(){C(null,O)})},function(O){V.nextTick(function(){C(O)})});else return this},V.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var gc=H();return V})},7533:(c,d)=>{var f=Math.pow(2,8),u=Math.pow(2,16),a=Math.pow(2,24),_=Math.pow(2,32),w=Math.pow(2,40),m=Math.pow(2,48),l=Math.pow(2,52),T=Math.pow(2,1022);d.readByte=function(b){return b>127?b-256:b},d.readI16=function(b,S){S=S||0;var x=b[S+1];return x+=b[S]<<8,b[S]&128&&(x-=u),x},d.readI32=function(b,S){S=S||0;var x=b[S+3];return x+=b[S+2]<<8,x+=b[S+1]<<16,x+=b[S]*a,b[S]&128&&(x-=_),x},d.writeI16=function(b,S){return b[1]=S&255,S>>=8,b[0]=S&255,b},d.writeI32=function(b,S){return b[3]=S&255,S>>=8,b[2]=S&255,S>>=8,b[1]=S&255,S>>=8,b[0]=S&255,b},d.readDouble=function(b,S){S=S||0;var x=b[S]&128,B=(b[S+1]&240)>>4;B+=(b[S]&127)<<4;var F=b[S+7];switch(F+=b[S+6]<<8,F+=b[S+5]<<16,F+=b[S+4]*a,F+=b[S+3]*_,F+=b[S+2]*w,F+=(b[S+1]&15)*m,B){case 0:B=-1022;break;case 2047:return F?NaN:x?-1/0:1/0;default:F+=l,B-=1023}return x&&(F*=-1),F*Math.pow(2,B-52)},d.writeDouble=function(b,S){var x,B,F;return b[0]=S<0?128:0,S=Math.abs(S),S!==S?(x=0x8000000000000,B=2047):S===1/0?(x=0,B=2047):(B=Math.floor(Math.log(S)/Math.LN2),F=Math.pow(2,-B),S*F<1&&(B--,F*=2),B+1023>=2047?(x=0,B=2047):B+1023>=1?(x=(S*F-1)*l,B+=1023):(x=S*T*l,B=0)),b[1]=B<<4&240,b[0]|=B>>4&127,b[7]=x&255,x=Math.floor(x/f),b[6]=x&255,x=Math.floor(x/f),b[5]=x&255,x=Math.floor(x/f),b[4]=x&255,x>>=8,b[3]=x&255,x>>=8,b[2]=x&255,x>>=8,b[1]|=x&15,b}},4711:(c,d,f)=>{var u=f(8764).Buffer,a=f(1291),_=f(7533),w=f(135),m=f(5406),l=m.Type;c.exports=x;var T=-65536,b=-2147418112,S=255;x.VERSION_MASK=T,x.VERSION_1=b,x.TYPE_MASK=S;function x(B,F,k){this.trans=B,this.strictRead=F!==void 0?F:!1,this.strictWrite=k!==void 0?k:!0,this._seqid=null}x.prototype.flush=function(){return this.trans.flush()},x.prototype.writeMessageBegin=function(B,F,k){this.strictWrite?(this.writeI32(b|F),this.writeString(B),this.writeI32(k)):(this.writeString(B),this.writeByte(F),this.writeI32(k)),this._seqid!==null?a.warning("SeqId already set",{name:B}):(this._seqid=k,this.trans.setCurrSeqId(k))},x.prototype.writeMessageEnd=function(){this._seqid!==null?this._seqid=null:a.warning("No seqid to unset")},x.prototype.writeStructBegin=function(B){},x.prototype.writeStructEnd=function(){},x.prototype.writeFieldBegin=function(B,F,k){this.writeByte(F),this.writeI16(k)},x.prototype.writeFieldEnd=function(){},x.prototype.writeFieldStop=function(){this.writeByte(l.STOP)},x.prototype.writeMapBegin=function(B,F,k){this.writeByte(B),this.writeByte(F),this.writeI32(k)},x.prototype.writeMapEnd=function(){},x.prototype.writeListBegin=function(B,F){this.writeByte(B),this.writeI32(F)},x.prototype.writeListEnd=function(){},x.prototype.writeSetBegin=function(B,F){this.writeByte(B),this.writeI32(F)},x.prototype.writeSetEnd=function(){},x.prototype.writeBool=function(B){B?this.writeByte(1):this.writeByte(0)},x.prototype.writeByte=function(B){this.trans.write(new u([B]))},x.prototype.writeI16=function(B){this.trans.write(_.writeI16(new u(2),B))},x.prototype.writeI32=function(B){this.trans.write(_.writeI32(new u(4),B))},x.prototype.writeI64=function(B){B.buffer?this.trans.write(B.buffer):this.trans.write(new w(B).buffer)},x.prototype.writeDouble=function(B){this.trans.write(_.writeDouble(new u(8),B))},x.prototype.writeStringOrBinary=function(B,F,k){if(typeof k=="string")this.writeI32(u.byteLength(k,F)),this.trans.write(new u(k,F));else if(k instanceof u||Object.prototype.toString.call(k)=="[object Uint8Array]")this.writeI32(k.length),this.trans.write(k);else throw new Error(B+" called without a string/Buffer argument: "+k)},x.prototype.writeString=function(B){this.writeStringOrBinary("writeString","utf8",B)},x.prototype.writeBinary=function(B){this.writeStringOrBinary("writeBinary","binary",B)},x.prototype.readMessageBegin=function(){var B=this.readI32(),F,k,M;if(B<0){var A=B&T;if(A!=b)throw new m.TProtocolException(m.TProtocolExceptionType.BAD_VERSION,"Bad version in readMessageBegin: "+B);F=B&S,k=this.readString(),M=this.readI32()}else{if(this.strictRead)throw new m.TProtocolException(m.TProtocolExceptionType.BAD_VERSION,"No protocol version header");k=this.trans.read(B),F=this.readByte(),M=this.readI32()}return{fname:k,mtype:F,rseqid:M}},x.prototype.readMessageEnd=function(){},x.prototype.readStructBegin=function(){return{fname:""}},x.prototype.readStructEnd=function(){},x.prototype.readFieldBegin=function(){var B=this.readByte();if(B==l.STOP)return{fname:null,ftype:B,fid:0};var F=this.readI16();return{fname:null,ftype:B,fid:F}},x.prototype.readFieldEnd=function(){},x.prototype.readMapBegin=function(){var B=this.readByte(),F=this.readByte(),k=this.readI32();return{ktype:B,vtype:F,size:k}},x.prototype.readMapEnd=function(){},x.prototype.readListBegin=function(){var B=this.readByte(),F=this.readI32();return{etype:B,size:F}},x.prototype.readListEnd=function(){},x.prototype.readSetBegin=function(){var B=this.readByte(),F=this.readI32();return{etype:B,size:F}},x.prototype.readSetEnd=function(){},x.prototype.readBool=function(){var B=this.readByte();return B!==0},x.prototype.readByte=function(){return this.trans.readByte()},x.prototype.readI16=function(){return this.trans.readI16()},x.prototype.readI32=function(){return this.trans.readI32()},x.prototype.readI64=function(){var B=this.trans.read(8);return new w(B)},x.prototype.readDouble=function(){return this.trans.readDouble()},x.prototype.readBinary=function(){var B=this.readI32();if(B===0)return new u(0);if(B<0)throw new m.TProtocolException(m.TProtocolExceptionType.NEGATIVE_SIZE,"Negative binary size");return this.trans.read(B)},x.prototype.readString=function(){var B=this.readI32();if(B===0)return"";if(B<0)throw new m.TProtocolException(m.TProtocolExceptionType.NEGATIVE_SIZE,"Negative string size");return this.trans.readString(B)},x.prototype.getTransport=function(){return this.trans},x.prototype.skip=function(B){switch(B){case l.BOOL:this.readBool();break;case l.BYTE:this.readByte();break;case l.I16:this.readI16();break;case l.I32:this.readI32();break;case l.I64:this.readI64();break;case l.DOUBLE:this.readDouble();break;case l.STRING:this.readString();break;case l.STRUCT:for(this.readStructBegin();;){var F=this.readFieldBegin();if(F.ftype===l.STOP)break;this.skip(F.ftype),this.readFieldEnd()}this.readStructEnd();break;case l.MAP:for(var k=this.readMapBegin(),M=0;M<k.size;++M)this.skip(k.ktype),this.skip(k.vtype);this.readMapEnd();break;case l.SET:for(var A=this.readSetBegin(),R=0;R<A.size;++R)this.skip(A.etype);this.readSetEnd();break;case l.LIST:for(var P=this.readListBegin(),j=0;j<P.size;++j)this.skip(P.etype);this.readListEnd();break;default:throw new Error("Invalid type: "+B)}}},9262:(c,d,f)=>{d.Thrift=f(5406);var u=f(5455);d.WSConnection=u.WSConnection,d.createWSConnection=u.createWSConnection,d.createWSClient=u.createWSClient;var a=f(4050);d.XHRConnection=a.XHRConnection,d.createXHRConnection=a.createXHRConnection,d.createXHRClient=a.createXHRClient,d.Int64=f(135),d.Q=f(8486);var _=f(4184);d.Multiplexer=_.Multiplexer,d.TBufferedTransport=f(8869),d.TFramedTransport=f(7584),d.TWebSocketTransport=f(5764),d.Protocol=f(5086),d.TJSONProtocol=f(5086),d.TBinaryProtocol=f(4711),d.TCompactProtocol=f(9277)},8869:(c,d,f)=>{var u=f(8764).Buffer,a=f(7533),_=f(3590),w=f(5190);c.exports=m;function m(l,T){this.defaultReadBufferSize=1024,this.writeBufferSize=512,this.inBuf=new u(this.defaultReadBufferSize),this.readCursor=0,this.writeCursor=0,this.outBuffers=[],this.outCount=0,this.onFlush=T}m.prototype=new w,m.prototype.reset=function(){this.inBuf=new u(this.defaultReadBufferSize),this.readCursor=0,this.writeCursor=0,this.outBuffers=[],this.outCount=0},m.receiver=function(l,T){var b=new m;return function(S){if(b.writeCursor+S.length>b.inBuf.length){var x=new u(b.writeCursor+S.length);b.inBuf.copy(x,0,0,b.writeCursor),b.inBuf=x}S.copy(b.inBuf,b.writeCursor,0),b.writeCursor+=S.length,l(b,T)}},m.prototype.commitPosition=function(){var l=this.writeCursor-this.readCursor,T=l*2>this.defaultReadBufferSize?l*2:this.defaultReadBufferSize,b=new u(T);l>0&&this.inBuf.copy(b,0,this.readCursor,this.writeCursor),this.readCursor=0,this.writeCursor=l,this.inBuf=b},m.prototype.rollbackPosition=function(){this.readCursor=0},m.prototype.isOpen=function(){return!0},m.prototype.open=function(){},m.prototype.close=function(){},m.prototype.setCurrSeqId=function(l){this._seqid=l},m.prototype.ensureAvailable=function(l){if(this.readCursor+l>this.writeCursor)throw new _},m.prototype.read=function(l){this.ensureAvailable(l);var T=new u(l);return this.inBuf.copy(T,0,this.readCursor,this.readCursor+l),this.readCursor+=l,T},m.prototype.readByte=function(){return this.ensureAvailable(1),a.readByte(this.inBuf[this.readCursor++])},m.prototype.readI16=function(){this.ensureAvailable(2);var l=a.readI16(this.inBuf,this.readCursor);return this.readCursor+=2,l},m.prototype.readI32=function(){this.ensureAvailable(4);var l=a.readI32(this.inBuf,this.readCursor);return this.readCursor+=4,l},m.prototype.readDouble=function(){this.ensureAvailable(8);var l=a.readDouble(this.inBuf,this.readCursor);return this.readCursor+=8,l},m.prototype.readString=function(l){this.ensureAvailable(l);var T=this.inBuf.toString("utf8",this.readCursor,this.readCursor+l);return this.readCursor+=l,T},m.prototype.borrow=function(){var l={buf:this.inBuf,readIndex:this.readCursor,writeIndex:this.writeCursor};return l},m.prototype.consume=function(l){this.readCursor+=l},m.prototype.write=function(l){typeof l=="string"&&(l=new u(l,"utf8")),this.outBuffers.push(l),this.outCount+=l.length},m.prototype.flush=function(){var l=this._seqid;if(this._seqid=null,!(this.outCount<1)){var T=new u(this.outCount),b=0;this.outBuffers.forEach(function(S){S.copy(T,b,0),b+=S.length}),this.onFlush&&this.onFlush(T,l),this.outBuffers=[],this.outCount=0}}},9277:(c,d,f)=>{var u=f(8764).Buffer,a=f(1291),_=f(135),w=f(5406),m=w.Type;c.exports=k;var l=Math.pow(2,8),T=Math.pow(2,24),b=Math.pow(2,32),S=Math.pow(2,40),x=Math.pow(2,48),B=Math.pow(2,52),F=Math.pow(2,1022);function k(M){this.trans=M,this.lastField_=[],this.lastFieldId_=0,this.string_limit_=0,this.string_buf_=null,this.string_buf_size_=0,this.container_limit_=0,this.booleanField_={name:null,hasBoolValue:!1},this.boolValue_={hasBoolValue:!1,boolValue:!1}}k.PROTOCOL_ID=-126,k.VERSION_N=1,k.VERSION_MASK=31,k.TYPE_MASK=-32,k.TYPE_BITS=7,k.TYPE_SHIFT_AMOUNT=5,k.Types={CT_STOP:0,CT_BOOLEAN_TRUE:1,CT_BOOLEAN_FALSE:2,CT_BYTE:3,CT_I16:4,CT_I32:5,CT_I64:6,CT_DOUBLE:7,CT_BINARY:8,CT_LIST:9,CT_SET:10,CT_MAP:11,CT_STRUCT:12},k.TTypeToCType=[k.Types.CT_STOP,0,k.Types.CT_BOOLEAN_TRUE,k.Types.CT_BYTE,k.Types.CT_DOUBLE,0,k.Types.CT_I16,0,k.Types.CT_I32,0,k.Types.CT_I64,k.Types.CT_BINARY,k.Types.CT_STRUCT,k.Types.CT_MAP,k.Types.CT_SET,k.Types.CT_LIST],k.prototype.getTransport=function(){return this.trans},k.prototype.getCompactType=function(M){return k.TTypeToCType[M]},k.prototype.getTType=function(M){switch(M){case m.STOP:return m.STOP;case k.Types.CT_BOOLEAN_FALSE:case k.Types.CT_BOOLEAN_TRUE:return m.BOOL;case k.Types.CT_BYTE:return m.BYTE;case k.Types.CT_I16:return m.I16;case k.Types.CT_I32:return m.I32;case k.Types.CT_I64:return m.I64;case k.Types.CT_DOUBLE:return m.DOUBLE;case k.Types.CT_BINARY:return m.STRING;case k.Types.CT_LIST:return m.LIST;case k.Types.CT_SET:return m.SET;case k.Types.CT_MAP:return m.MAP;case k.Types.CT_STRUCT:return m.STRUCT;default:throw new w.TProtocolException(w.TProtocolExceptionType.INVALID_DATA,"Unknown type: "+M)}return m.STOP},k.prototype.flush=function(){return this.trans.flush()},k.prototype.writeMessageBegin=function(M,A,R){this.writeByte(k.PROTOCOL_ID),this.writeByte(k.VERSION_N&k.VERSION_MASK|A<<k.TYPE_SHIFT_AMOUNT&k.TYPE_MASK),this.writeVarint32(R),this.writeString(M),this._seqid?a.warning("SeqId already set",{name:M}):(this._seqid=R,this.trans.setCurrSeqId(R))},k.prototype.writeMessageEnd=function(){},k.prototype.writeStructBegin=function(M){this.lastField_.push(this.lastFieldId_),this.lastFieldId_=0},k.prototype.writeStructEnd=function(){this.lastFieldId_=this.lastField_.pop()},k.prototype.writeFieldBegin=function(M,A,R){if(A!=m.BOOL)return this.writeFieldBeginInternal(M,A,R,-1);this.booleanField_.name=M,this.booleanField_.fieldType=A,this.booleanField_.fieldId=R},k.prototype.writeFieldEnd=function(){},k.prototype.writeFieldStop=function(){this.writeByte(k.Types.CT_STOP)},k.prototype.writeMapBegin=function(M,A,R){R===0?this.writeByte(0):(this.writeVarint32(R),this.writeByte(this.getCompactType(M)<<4|this.getCompactType(A)))},k.prototype.writeMapEnd=function(){},k.prototype.writeListBegin=function(M,A){this.writeCollectionBegin(M,A)},k.prototype.writeListEnd=function(){},k.prototype.writeSetBegin=function(M,A){this.writeCollectionBegin(M,A)},k.prototype.writeSetEnd=function(){},k.prototype.writeBool=function(M){this.booleanField_.name!==null?(this.writeFieldBeginInternal(this.booleanField_.name,this.booleanField_.fieldType,this.booleanField_.fieldId,M?k.Types.CT_BOOLEAN_TRUE:k.Types.CT_BOOLEAN_FALSE),this.booleanField_.name=null):this.writeByte(M?k.Types.CT_BOOLEAN_TRUE:k.Types.CT_BOOLEAN_FALSE)},k.prototype.writeByte=function(M){this.trans.write(new u([M]))},k.prototype.writeI16=function(M){this.writeVarint32(this.i32ToZigzag(M))},k.prototype.writeI32=function(M){this.writeVarint32(this.i32ToZigzag(M))},k.prototype.writeI64=function(M){this.writeVarint64(this.i64ToZigzag(M))},k.prototype.writeDouble=function(M){var A=new u(8),R,P,j;A[7]=M<0?128:0,M=Math.abs(M),M!==M?(R=0x8000000000000,P=2047):M===1/0?(R=0,P=2047):(P=Math.floor(Math.log(M)/Math.LN2),j=Math.pow(2,-P),M*j<1&&(P--,j*=2),P+1023>=2047?(R=0,P=2047):P+1023>=1?(R=(M*j-1)*B,P+=1023):(R=M*F*B,P=0)),A[6]=P<<4&240,A[7]|=P>>4&127,A[0]=R&255,R=Math.floor(R/l),A[1]=R&255,R=Math.floor(R/l),A[2]=R&255,R=Math.floor(R/l),A[3]=R&255,R>>=8,A[4]=R&255,R>>=8,A[5]=R&255,R>>=8,A[6]|=R&15,this.trans.write(A)},k.prototype.writeStringOrBinary=function(M,A,R){if(typeof R=="string")this.writeVarint32(u.byteLength(R,A)),this.trans.write(new u(R,A));else if(R instanceof u||Object.prototype.toString.call(R)=="[object Uint8Array]")this.writeVarint32(R.length),this.trans.write(R);else throw new Error(M+" called without a string/Buffer argument: "+R)},k.prototype.writeString=function(M){this.writeStringOrBinary("writeString","utf8",M)},k.prototype.writeBinary=function(M){this.writeStringOrBinary("writeBinary","binary",M)},k.prototype.writeFieldBeginInternal=function(M,A,R,P){var j=P==-1?this.getCompactType(A):P;R>this.lastFieldId_&&R-this.lastFieldId_<=15?this.writeByte(R-this.lastFieldId_<<4|j):(this.writeByte(j),this.writeI16(R)),this.lastFieldId_=R},k.prototype.writeCollectionBegin=function(M,A){A<=14?this.writeByte(A<<4|this.getCompactType(M)):(this.writeByte(240|this.getCompactType(M)),this.writeVarint32(A))},k.prototype.writeVarint32=function(M){for(var A=new u(5),R=0;;)if((M&-128)===0){A[R++]=M;break}else A[R++]=M&127|128,M=M>>>7;var P=new u(R);A.copy(P,0,0,R),this.trans.write(P)},k.prototype.writeVarint64=function(M){if(typeof M=="number"&&(M=new _(M)),!(M instanceof _))throw new w.TProtocolException(w.TProtocolExceptionType.INVALID_DATA,"Expected Int64 or Number, found: "+M);for(var A=new u(10),R=0,P=M.buffer.readUInt32BE(0,!0),j=M.buffer.readUInt32BE(4,!0),D=0;;)if((j&-128)===0&&P===0){A[R++]=j;break}else A[R++]=j&127|128,D=P<<25,j=j>>>7,P=P>>>7,j=j|D;var z=new u(R);A.copy(z,0,0,R),this.trans.write(z)},k.prototype.i64ToZigzag=function(M){if(typeof M=="string"?M=new _(parseInt(M,10)):typeof M=="number"&&(M=new _(M)),!(M instanceof _))throw new w.TProtocolException(w.TProtocolExceptionType.INVALID_DATA,"Expected Int64 or Number, found: "+M);var A=M.buffer.readUInt32BE(0,!0),R=M.buffer.readUInt32BE(4,!0),P=A>>>31;return A=(A<<1|R>>>31)^(P?4294967295:0),R=R<<1^(P?4294967295:0),new _(A,R)},k.prototype.i32ToZigzag=function(M){return M<<1^(M&2147483648?4294967295:0)},k.prototype.readMessageBegin=function(){var M=this.trans.readByte();if(M!=k.PROTOCOL_ID)throw new w.TProtocolException(w.TProtocolExceptionType.BAD_VERSION,"Bad protocol identifier "+M);var A=this.trans.readByte(),R=A&k.VERSION_MASK;if(R!=k.VERSION_N)throw new w.TProtocolException(w.TProtocolExceptionType.BAD_VERSION,"Bad protocol version "+R);var P=A>>k.TYPE_SHIFT_AMOUNT&k.TYPE_BITS,j=this.readVarint32(),D=this.readString();return{fname:D,mtype:P,rseqid:j}},k.prototype.readMessageEnd=function(){},k.prototype.readStructBegin=function(){return this.lastField_.push(this.lastFieldId_),this.lastFieldId_=0,{fname:""}},k.prototype.readStructEnd=function(){this.lastFieldId_=this.lastField_.pop()},k.prototype.readFieldBegin=function(){var M=0,A=this.trans.readByte(A),R=A&15;if(R==k.Types.CT_STOP)return{fname:null,ftype:w.Type.STOP,fid:0};var P=(A&240)>>>4;P===0?M=this.readI16():M=this.lastFieldId_+P;var j=this.getTType(R);return(R==k.Types.CT_BOOLEAN_TRUE||R==k.Types.CT_BOOLEAN_FALSE)&&(this.boolValue_.hasBoolValue=!0,this.boolValue_.boolValue=R==k.Types.CT_BOOLEAN_TRUE),this.lastFieldId_=M,{fname:null,ftype:j,fid:M}},k.prototype.readFieldEnd=function(){},k.prototype.readMapBegin=function(){var M=this.readVarint32();if(M<0)throw new w.TProtocolException(w.TProtocolExceptionType.NEGATIVE_SIZE,"Negative map size");var A=0;M!==0&&(A=this.trans.readByte());var R=this.getTType((A&240)>>>4),P=this.getTType(A&15);return{ktype:R,vtype:P,size:M}},k.prototype.readMapEnd=function(){},k.prototype.readListBegin=function(){var M=this.trans.readByte(),A=M>>>4&15;if(A==15&&(A=this.readVarint32()),A<0)throw new w.TProtocolException(w.TProtocolExceptionType.NEGATIVE_SIZE,"Negative list size");var R=this.getTType(M&15);return{etype:R,size:A}},k.prototype.readListEnd=function(){},k.prototype.readSetBegin=function(){return this.readListBegin()},k.prototype.readSetEnd=function(){},k.prototype.readBool=function(){var M=!1;if(this.boolValue_.hasBoolValue===!0)M=this.boolValue_.boolValue,this.boolValue_.hasBoolValue=!1;else{var A=this.trans.readByte();A.rsize,M=A.value==k.Types.CT_BOOLEAN_TRUE}return M},k.prototype.readByte=function(){return this.trans.readByte()},k.prototype.readI16=function(){return this.readI32()},k.prototype.readI32=function(){return this.zigzagToI32(this.readVarint32())},k.prototype.readI64=function(){return this.zigzagToI64(this.readVarint64())},k.prototype.readDouble=function(){var M=this.trans.read(8),A=0,R=M[A+7]&128,P=(M[A+6]&240)>>4;P+=(M[A+7]&127)<<4;var j=M[A];switch(j+=M[A+1]<<8,j+=M[A+2]<<16,j+=M[A+3]*T,j+=M[A+4]*b,j+=M[A+5]*S,j+=(M[A+6]&15)*x,P){case 0:P=-1022;break;case 2047:return j?NaN:R?-1/0:1/0;default:j+=B,P-=1023}return R&&(j*=-1),j*Math.pow(2,P-52)},k.prototype.readBinary=function(){var M=this.readVarint32();if(M===0)return new u(0);if(M<0)throw new w.TProtocolException(w.TProtocolExceptionType.NEGATIVE_SIZE,"Negative binary size");return this.trans.read(M)},k.prototype.readString=function(){var M=this.readVarint32();if(M===0)return"";if(M<0)throw new w.TProtocolException(w.TProtocolExceptionType.NEGATIVE_SIZE,"Negative string size");return this.trans.readString(M)},k.prototype.readVarint32=function(){return this.readVarint64().toNumber()},k.prototype.readVarint64=function(){for(var M=0,A=0,R=0,P=0;;){var j=this.trans.readByte();if(M++,P<=25?A=A|(j&127)<<P:25<P&&P<32?(A=A|(j&127)<<P,R=R|(j&127)>>>32-P):R=R|(j&127)<<P-32,P+=7,!(j&128))break;if(M>=10)throw new w.TProtocolException(w.TProtocolExceptionType.INVALID_DATA,"Variable-length int over 10 bytes.")}return new _(R,A)},k.prototype.zigzagToI32=function(M){return M>>>1^-1*(M&1)},k.prototype.zigzagToI64=function(M){var A=M.buffer.readUInt32BE(0,!0),R=M.buffer.readUInt32BE(4,!0),P=new _(A&0,R&1);P._2scomp();var j=P.buffer.readUInt32BE(0,!0),D=P.buffer.readUInt32BE(4,!0),z=A<<31;return A=A>>>1^j,R=(R>>>1|z)^D,new _(A,R)},k.prototype.skip=function(M){switch(M){case m.BOOL:this.readBool();break;case m.BYTE:this.readByte();break;case m.I16:this.readI16();break;case m.I32:this.readI32();break;case m.I64:this.readI64();break;case m.DOUBLE:this.readDouble();break;case m.STRING:this.readString();break;case m.STRUCT:for(this.readStructBegin();;){var A=this.readFieldBegin();if(A.ftype===m.STOP)break;this.skip(A.ftype),this.readFieldEnd()}this.readStructEnd();break;case m.MAP:for(var R=this.readMapBegin(),P=0;P<R.size;++P)this.skip(R.ktype),this.skip(R.vtype);this.readMapEnd();break;case m.SET:for(var j=this.readSetBegin(),D=0;D<j.size;++D)this.skip(j.etype);this.readSetEnd();break;case m.LIST:for(var z=this.readListBegin(),$=0;$<z.size;++$)this.skip(z.etype);this.readListEnd();break;default:throw new Error("Invalid type: "+M)}}},6243:c=>{c.exports=d;function d(f,u){f.Client&&(f=f.Client);var a=function(m,l){u.write(m,l)},_=new u.transport(void 0,a),w=new f(_,u.protocol);return _.client=w,u.client=w,w}},7584:(c,d,f)=>{var u=f(8764).Buffer,a=f(7533),_=f(3590),w=f(5190);c.exports=m;function m(l,T){this.inBuf=l||new u(0),this.outBuffers=[],this.outCount=0,this.readPos=0,this.onFlush=T}m.prototype=new w,m.receiver=function(l,T){var b=null;return function(S){for(b&&(S=u.concat([b,S]),b=null);S.length;){if(S.length<4){b=S;return}var x=a.readI32(S,0);if(S.length<4+x){b=S;return}var B=S.slice(4,4+x);b=S.slice(4+x),l(new m(B),T),S=b,b=null}}},m.prototype.commitPosition=function(){},m.prototype.rollbackPosition=function(){},m.prototype.isOpen=function(){return!0},m.prototype.open=function(){},m.prototype.close=function(){},m.prototype.setCurrSeqId=function(l){this._seqid=l},m.prototype.ensureAvailable=function(l){if(this.readPos+l>this.inBuf.length)throw new _},m.prototype.read=function(l){this.ensureAvailable(l);var T=this.readPos+l;if(this.inBuf.length<T)throw new Error("read("+l+") failed - not enough data");var b=this.inBuf.slice(this.readPos,T);return this.readPos=T,b},m.prototype.readByte=function(){return this.ensureAvailable(1),a.readByte(this.inBuf[this.readPos++])},m.prototype.readI16=function(){this.ensureAvailable(2);var l=a.readI16(this.inBuf,this.readPos);return this.readPos+=2,l},m.prototype.readI32=function(){this.ensureAvailable(4);var l=a.readI32(this.inBuf,this.readPos);return this.readPos+=4,l},m.prototype.readDouble=function(){this.ensureAvailable(8);var l=a.readDouble(this.inBuf,this.readPos);return this.readPos+=8,l},m.prototype.readString=function(l){this.ensureAvailable(l);var T=this.inBuf.toString("utf8",this.readPos,this.readPos+l);return this.readPos+=l,T},m.prototype.borrow=function(){return{buf:this.inBuf,readIndex:this.readPos,writeIndex:this.inBuf.length}},m.prototype.consume=function(l){this.readPos+=l},m.prototype.write=function(l,T){typeof l=="string"&&(l=new u(l,T||"utf8")),this.outBuffers.push(l),this.outCount+=l.length},m.prototype.flush=function(){var l=this._seqid;this._seqid=null;var T=new u(this.outCount),b=0;if(this.outBuffers.forEach(function(x){x.copy(T,b,0),b+=x.length}),this.onFlush){var S=new u(T.length+4);a.writeI32(S,T.length),T.copy(S,4,0,T.length),this.onFlush&&this.onFlush(S,l)}this.outBuffers=[],this.outCount=0}},5190:(c,d,f)=>{var u=f(8764).Buffer,a=f(9539),_=f(9277),w=f(4711),m=f(3590);function l(H){Error.call(this),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.message=H}a.inherits(l,Error),c.exports=D;var T=0,b=1,S=0,x=32/8,B=48/8,F=64/8,k=96/8,M=112/8,A=4095,R=1,P=1073741823;function j(H){var J=f(8869);this.outputBuffer=null;var V=this;this.transport=new J(null,function(le){V.outputBuffer=le}),this.transport.inBuf=H||u.alloc(0),this.transport.writeCursor=this.transport.inBuf.length,this.protocol=new _(this.transport)}j.prototype.readVarint32=function(){return this.protocol.readVarint32()},j.prototype.writeVarint32=function(H){this.protocol.writeVarint32(H)},j.prototype.readString=function(){return this.protocol.readString()},j.prototype.writeString=function(H){this.protocol.writeString(H)},j.prototype.getOutCount=function(){return this.transport.outCount},j.prototype.write=function(H){this.transport.write(H)},j.prototype.toBuffer=function(){return this.transport.flush(),this.outputBuffer},D.SubprotocolId={BINARY:0,JSON:1,COMPACT:2};function D(){this.maxFrameSize=P,this.protocolId=D.SubprotocolId.BINARY,this.rheaders={},this.wheaders={},this.inBuf=u.alloc(0),this.outCount=0,this.flags=null,this.seqid=0,this.shouldWriteHeaders=!0}var z=function(H,J){if(typeof H!="string"||typeof J!="string")throw new l("Header key and values must be strings")},$=function(H){for(var J=Object.keys(D.SubprotocolId),V=0;V<J.length;V++)if(H===D.SubprotocolId[J[V]])return!0;throw new Error(H+" is not a valid protocol id")};D.prototype.setSeqId=function(H){this.seqid=H},D.prototype.getSeqId=function(H){return this.seqid},D.prototype.setFlags=function(H){this.flags=H},D.prototype.getReadHeaders=function(){return this.rheaders},D.prototype.setReadHeader=function(H,J){z(H,J),this.rheaders[H]=J},D.prototype.clearReadHeaders=function(){this.rheaders={}},D.prototype.getWriteHeaders=function(){return this.wheaders},D.prototype.setWriteHeader=function(H,J){z(H,J),this.wheaders[H]=J},D.prototype.clearWriteHeaders=function(){this.wheaders={}},D.prototype.setMaxFrameSize=function(H){this.maxFrameSize=H},D.prototype.setProtocolId=function(H){$(H),this.protocolId=H},D.prototype.getProtocolId=function(){return this.protocolId};var Y=function(H){var J=H.readInt32BE();return(J&w.VERSION_MASK)===w.VERSION_1},W=function(H){var J=H.readInt8(T),V=H.readInt8(b);return J===_.PROTOCOL_ID&&(V&_.VERSION_MASK)===_.VERSION_N};D.prototype.readHeaders=function(){var H=this.inBuf,J=!1;if(Y(H)&&(this.setProtocolId(D.SubprotocolId.BINARY),J=!0),W(H)&&(this.setProtocolId(D.SubprotocolId.COMPACT),J=!0),J){this.shouldWriteHeaders=!1;return}var V=H.readInt32BE(S);if(V>this.maxFrameSize)throw new l("Frame exceeds maximum frame size");var le=H.readInt16BE(x);if(this.shouldWriteHeaders=le===A,!!this.shouldWriteHeaders){this.setFlags(H.readInt16BE(B)),this.setSeqId(H.readInt32BE(F));var pe=H.readInt16BE(k)*4,se=M+pe;if(se>H.length)throw new l("Header size is greater than frame size");var Ne=u.alloc(pe);H.copy(Ne,0,M,se);var fe=new j(Ne);this.setProtocolId(fe.readVarint32());var Ce=fe.readVarint32();if(Ce>0)throw new l("Transforms are not yet supported");for(;;)try{var Me=fe.readVarint32();if(Me!==R)break;for(var He=fe.readVarint32(),Bt=0;Bt<He;Bt++){var vt=fe.readString(),ge=fe.readString();this.setReadHeader(vt,ge)}}catch(G){if(G instanceof m)break;throw G}return this.read(se),this.getReadHeaders()}},D.prototype.writeHeaders=function(){if(!!this.shouldWriteHeaders){var H=this.getWriteHeaders(),J=new j;J.writeVarint32(this.protocolId),J.writeVarint32(0);var V=Object.keys(H);if(V.length>0){J.writeVarint32(R),J.writeVarint32(V.length);for(var le=0;le<V.length;le++){var pe=V[le],se=H[pe];J.writeString(pe),J.writeString(se)}}var Ne=J.getOutCount(),fe=(4-Ne%4)%4,Ce=u.alloc(2);Ce.writeInt16BE(Math.floor((Ne+fe)/4));var Me=u.alloc(fe);Me.fill(0),J.write(Me);var He=J.toBuffer(),Bt=u.alloc(4);Bt.writeInt32BE(10+this.outCount+He.length);var vt=u.alloc(2);vt.writeInt16BE(A);var ge=u.alloc(2);ge.writeInt16BE(0);var G=u.alloc(4);G.writeInt32BE(this.getSeqId());var q=u.concat([Bt,vt,ge,G,Ce,He]);this.outBuffers.unshift(q),this.outCount+=q.length}}},3590:(c,d,f)=>{var u=f(9539);c.exports=a;function a(_){Error.call(this),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.message=_}u.inherits(a,Error)},5197:(c,d,f)=>{var u=f(8764).Buffer,a=f(135),_=c.exports={},w=Math.pow(2,24),m=Math.pow(2,31),l=Math.pow(2,32),T=Math.pow(10,11);_.toDecimalString=function(b){var S=b.buffer,x=b.offset;if(!S[x]&&!(S[x+1]&224)||!~S[x]&&!~(S[x+1]&224))return b.toString();var B=S[x]&128;if(B){for(var F=!1,k=new u(8),M=7;M>=0;--M)k[M]=~S[x+M]+(F?0:1)&255,F|=S[x+M];S=k}var A=S[x+1]+(S[x]<<8),R=S[x+7]+(S[x+6]<<8)+(S[x+5]<<16)+S[x+4]*w+(S[x+3]+(S[x+2]<<8))*l+A*74976710656,P=Math.floor(R/T)+A*2814;return R=("00000000000"+String(R%T)).slice(-11),(B?"-":"")+String(P)+R},_.fromDecimalString=function(b){var S=b.charAt(0)==="-";if(b.length<(S?17:16))return new a(+b);if(b.length>(S?20:19))throw new RangeError("Too many digits for Int64: "+b);var x=+b.slice(S?1:0,-15),B=+b.slice(-15)+x*2764472320,F=Math.floor(B/l)+x*232830;if(B=B%l,F>=m&&!(S&&F==m&&B==0))throw new RangeError("The magnitude is too large for Int64.");return S&&(F=~F,B===0?F=F+1&4294967295:B=~B+1,F=2147483648|F),new a(F,B)}},6502:(c,d,f)=>{var u=f(135);f(5197),c.exports=function(){var a,_,w={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},m,l=function(A){throw new SyntaxError(A)},T=function(A){return A&&A!==_&&l("Expected '"+A+"' instead of '"+_+"'"),_=m.charAt(a),a+=1,_},b=function(){var A,R="";for(_==="-"&&(R="-",T("-"));_>="0"&&_<="9";)R+=_,T();if(_===".")for(R+=".";T()&&_>="0"&&_<="9";)R+=_;if(_==="e"||_==="E")for(R+=_,T(),(_==="-"||_==="+")&&(R+=_,T());_>="0"&&_<="9";)R+=_,T();if(A=+R,!isFinite(A))l("Bad number");else return A>=u.MAX_INT||A<=u.MIN_INT?R:A},S=function(){var A,R,P="",j;if(_==='"')for(;T();){if(_==='"')return T(),P;if(_==="\\")if(T(),_==="u"){for(j=0,R=0;R<4&&(A=parseInt(T(),16),!!isFinite(A));R+=1)j=j*16+A;P+=String.fromCharCode(j)}else if(typeof w[_]=="string")P+=w[_];else break;else P+=_}l("Bad string")},x=function(){for(;_&&_<=" ";)T()},B=function(){switch(_){case"t":return T("t"),T("r"),T("u"),T("e"),!0;case"f":return T("f"),T("a"),T("l"),T("s"),T("e"),!1;case"n":return T("n"),T("u"),T("l"),T("l"),null}l("Unexpected '"+_+"'")},F,k=function(){var A=[];if(_==="["){if(T("["),x(),_==="]")return T("]"),A;for(;_;){if(A.push(F()),x(),_==="]")return T("]"),A;T(","),x()}}l("Bad array")},M=function(){var A,R={};if(_==="{"){if(T("{"),x(),_==="}")return T("}"),R;for(;_;){if(A=S(),x(),T(":"),Object.hasOwnProperty.call(R,A)&&l('Duplicate key "'+A+'"'),R[A]=F(),x(),_==="}")return T("}"),R;T(","),x()}}l("Bad object")};return F=function(){switch(x(),_){case"{":return M();case"[":return k();case'"':return S();case"-":return b();default:return _>="0"&&_<="9"?b():B()}},function(A){var R;return m=A,a=0,_=" ",R=F(),x(),_&&l("Syntax error"),R}}()},5086:(c,d,f)=>{var u=f(8764).Buffer,a=f(135),_=f(5406),w=_.Type;f(9539);var m=f(5197),l=f(6502),T=f(3590);c.exports=b;function b(S){this.tstack=[],this.tpos=[],this.trans=S}b.Type={},b.Type[w.BOOL]='"tf"',b.Type[w.BYTE]='"i8"',b.Type[w.I16]='"i16"',b.Type[w.I32]='"i32"',b.Type[w.I64]='"i64"',b.Type[w.DOUBLE]='"dbl"',b.Type[w.STRUCT]='"rec"',b.Type[w.STRING]='"str"',b.Type[w.MAP]='"map"',b.Type[w.LIST]='"lst"',b.Type[w.SET]='"set"',b.RType={},b.RType.tf=w.BOOL,b.RType.i8=w.BYTE,b.RType.i16=w.I16,b.RType.i32=w.I32,b.RType.i64=w.I64,b.RType.dbl=w.DOUBLE,b.RType.rec=w.STRUCT,b.RType.str=w.STRING,b.RType.map=w.MAP,b.RType.lst=w.LIST,b.RType.set=w.SET,b.Version=1,b.prototype.flush=function(){return this.writeToTransportIfStackIsFlushable(),this.trans.flush()},b.prototype.writeToTransportIfStackIsFlushable=function(){this.tstack.length===1&&this.trans.write(this.tstack.pop())},b.prototype.writeMessageBegin=function(S,x,B){this.tstack.push([b.Version,'"'+S+'"',x,B])},b.prototype.writeMessageEnd=function(){var S=this.tstack.pop();this.wobj=this.tstack.pop(),this.wobj.push(S),this.wbuf="["+this.wobj.join(",")+"]",this.trans.write(this.wbuf)},b.prototype.writeStructBegin=function(S){this.tpos.push(this.tstack.length),this.tstack.push({})},b.prototype.writeStructEnd=function(){var S=this.tpos.pop(),x=this.tstack[S],B="{",F=!0;for(var k in x)F?F=!1:B+=",",B+=k+":"+x[k];B+="}",this.tstack[S]=B,this.writeToTransportIfStackIsFlushable()},b.prototype.writeFieldBegin=function(S,x,B){this.tpos.push(this.tstack.length),this.tstack.push({fieldId:'"'+B+'"',fieldType:b.Type[x]})},b.prototype.writeFieldEnd=function(){var S=this.tstack.pop(),x=this.tstack.pop();":"+S==":[object Object]"?this.tstack[this.tstack.length-1][x.fieldId]="{"+x.fieldType+":"+JSON.stringify(S)+"}":this.tstack[this.tstack.length-1][x.fieldId]="{"+x.fieldType+":"+S+"}",this.tpos.pop(),this.writeToTransportIfStackIsFlushable()},b.prototype.writeFieldStop=function(){},b.prototype.writeMapBegin=function(S,x,B){this.tpos.push(this.tstack.length),this.tstack.push([b.Type[S],b.Type[x],0])},b.prototype.writeMapEnd=function(){var S=this.tpos.pop();if(S!=this.tstack.length){(this.tstack.length-S-1)%2!==0&&this.tstack.push("");var x=(this.tstack.length-S-1)/2;this.tstack[S][this.tstack[S].length-1]=x;for(var B="}",F=!0;this.tstack.length>S+1;){var k=this.tstack.pop(),M=this.tstack.pop();F?F=!1:B=","+B,isNaN(M)||(M='"'+M+'"'),B=M+":"+k+B}B="{"+B,this.tstack[S].push(B),this.tstack[S]="["+this.tstack[S].join(",")+"]",this.writeToTransportIfStackIsFlushable()}},b.prototype.writeListBegin=function(S,x){this.tpos.push(this.tstack.length),this.tstack.push([b.Type[S],x])},b.prototype.writeListEnd=function(){for(var S=this.tpos.pop();this.tstack.length>S+1;){var x=this.tstack[S+1];this.tstack.splice(S+1,1),this.tstack[S].push(x)}this.tstack[S]="["+this.tstack[S].join(",")+"]",this.writeToTransportIfStackIsFlushable()},b.prototype.writeSetBegin=function(S,x){this.tpos.push(this.tstack.length),this.tstack.push([b.Type[S],x])},b.prototype.writeSetEnd=function(){for(var S=this.tpos.pop();this.tstack.length>S+1;){var x=this.tstack[S+1];this.tstack.splice(S+1,1),this.tstack[S].push(x)}this.tstack[S]="["+this.tstack[S].join(",")+"]",this.writeToTransportIfStackIsFlushable()},b.prototype.writeBool=function(S){this.tstack.push(S?1:0)},b.prototype.writeByte=function(S){this.tstack.push(S)},b.prototype.writeI16=function(S){this.tstack.push(S)},b.prototype.writeI32=function(S){this.tstack.push(S)},b.prototype.writeI64=function(S){S instanceof a?this.tstack.push(m.toDecimalString(S)):this.tstack.push(S)},b.prototype.writeDouble=function(S){this.tstack.push(S)},b.prototype.writeString=function(S){if(S===null)this.tstack.push(null);else{if(typeof S=="string")var x=S;else if(S instanceof u)var x=S.toString("utf8");else throw new Error("writeString called without a string/Buffer argument: "+S);for(var B="",F=0;F<x.length;F++){var k=x.charAt(F);k==='"'?B+='\\"':k==="\\"?B+="\\\\":k==="\b"?B+="\\b":k==="\f"?B+="\\f":k===`
`?B+="\\n":k==="\r"?B+="\\r":k==="	"?B+="\\t":B+=k}this.tstack.push('"'+B+'"')}},b.prototype.writeBinary=function(S){if(typeof S=="string")var x=new u(S,"binary");else if(S instanceof u||Object.prototype.toString.call(S)=="[object Uint8Array]")var x=S;else throw new Error("writeBinary called without a string/Buffer argument: "+S);this.tstack.push('"'+x.toString("base64")+'"')},b.prototype.readMessageBegin=function(){this.rstack=[],this.rpos=[];var S=this.trans.borrow();if(S.readIndex>=S.writeIndex)throw new T;var x=S.readIndex;if(S.buf[x]!==91)throw new Error("Malformed JSON input, no opening bracket");x++;for(var B=1,F=!1;x<S.writeIndex;x++){var k=S.buf[x];if(F)k===34?F=!1:k===92&&(x+=1);else if(k===91)B+=1;else if(k===93){if(B-=1,B===0)break}else k===34&&(F=!0)}if(B!==0)throw new T;this.robj=l(S.buf.slice(S.readIndex,x+1).toString()),this.trans.consume(x+1-S.readIndex);var M=this.robj.shift();if(M!=b.Version)throw new Error("Wrong thrift protocol version: "+M);var A={};return A.fname=this.robj.shift(),A.mtype=this.robj.shift(),A.rseqid=this.robj.shift(),this.rstack.push(this.robj.shift()),A},b.prototype.readMessageEnd=function(){},b.prototype.readStructBegin=function(){var S={};return S.fname="",this.rstack[this.rstack.length-1]instanceof Array&&this.rstack.push(this.rstack[this.rstack.length-1].shift()),S},b.prototype.readStructEnd=function(){this.rstack.pop()},b.prototype.readFieldBegin=function(){var S={},x=-1,B=w.STOP;for(var F in this.rstack[this.rstack.length-1])if(F!==null){x=parseInt(F,10),this.rpos.push(this.rstack.length);var k=this.rstack[this.rstack.length-1][x];delete this.rstack[this.rstack.length-1][x],this.rstack.push(k);break}if(x!=-1)for(var M in this.rstack[this.rstack.length-1])b.RType[M]!==null&&(B=b.RType[M],this.rstack[this.rstack.length-1]=this.rstack[this.rstack.length-1][M]);return S.fname="",S.ftype=B,S.fid=x,S},b.prototype.readFieldEnd=function(){for(var S=this.rpos.pop();this.rstack.length>S;)this.rstack.pop()},b.prototype.readMapBegin=function(){var S=this.rstack.pop(),x=S.shift();x instanceof Array&&(this.rstack.push(S),S=x,x=S.shift());var B={};return B.ktype=b.RType[x],B.vtype=b.RType[S.shift()],B.size=S.shift(),this.rpos.push(this.rstack.length),this.rstack.push(S.shift()),B},b.prototype.readMapEnd=function(){this.readFieldEnd()},b.prototype.readListBegin=function(){var S=this.rstack[this.rstack.length-1],x={};return x.etype=b.RType[S.shift()],x.size=S.shift(),this.rpos.push(this.rstack.length),this.rstack.push(S.shift()),x},b.prototype.readListEnd=function(){var S=this.rpos.pop()-2,x=this.rstack;x.pop(),x instanceof Array&&x.length>S&&x[S].length>0&&x.push(x[S].shift())},b.prototype.readSetBegin=function(){return this.readListBegin()},b.prototype.readSetEnd=function(){return this.readListEnd()},b.prototype.readBool=function(){return this.readValue()=="1"},b.prototype.readByte=function(){return this.readI32()},b.prototype.readI16=function(){return this.readI32()},b.prototype.readI32=function(S){return+this.readValue()},b.prototype.readValue=function(S){S===void 0&&(S=this.rstack[this.rstack.length-1]);var x={};if(S instanceof Array)S.length===0?x.value=void 0:x.value=S.shift();else if(!(S instanceof a)&&S instanceof Object){for(var B in S)if(B!==null){this.rstack.push(S[B]),delete S[B],x.value=B;break}}else x.value=S,this.rstack.pop();return x.value},b.prototype.readI64=function(){var S=this.readValue();return typeof S=="string"?m.fromDecimalString(S):new a(S)},b.prototype.readDouble=function(){return this.readI32()},b.prototype.readBinary=function(){return new u(this.readValue(),"base64")},b.prototype.readString=function(){return this.readValue()},b.prototype.getTransport=function(){return this.trans},b.prototype.skip=function(S){switch(S){case w.BOOL:this.readBool();break;case w.BYTE:this.readByte();break;case w.I16:this.readI16();break;case w.I32:this.readI32();break;case w.I64:this.readI64();break;case w.DOUBLE:this.readDouble();break;case w.STRING:this.readString();break;case w.STRUCT:for(this.readStructBegin();;){var x=this.readFieldBegin();if(x.ftype===w.STOP)break;this.skip(x.ftype),this.readFieldEnd()}this.readStructEnd();break;case w.MAP:for(var B=this.readMapBegin(),F=0;F<B.size;++F)this.skip(B.ktype),this.skip(B.vtype);this.readMapEnd();break;case w.SET:for(var k=this.readSetBegin(),M=0;M<k.size;++M)this.skip(k.etype);this.readSetEnd();break;case w.LIST:for(var A=this.readListBegin(),R=0;R<A.size;++R)this.skip(A.etype);this.readListEnd();break;default:throw new Error("Invalid type: "+S)}}},1291:(c,d,f)=>{var u=f(9539),a=function(){},_=console.log,w="error";function m(F){return function(){var k=["thrift: ["+F+"] "].concat(Array.from(arguments));return _(u.format.apply(null,k))}}var l=a,T=a,b=a,S=a,x=a;d.setLogFunc=function(F){_=F};var B=d.setLogLevel=function(F){switch(l=T=b=S=x=a,w=F,w){case"trace":l=m("TRACE");case"debug":T=m("DEBUG");case"error":b=m("ERROR");case"warning":S=m("WARN");case"info":x=m("INFO")}};B(w),d.getLogLevel=function(){return w},d.trace=function(){return l.apply(null,arguments)},d.debug=function(){return T.apply(null,arguments)},d.error=function(){return b.apply(null,arguments)},d.warning=function(){return S.apply(null,arguments)},d.info=function(){return x.apply(null,arguments)}},4184:(c,d,f)=>{var u=f(9539),a=f(5406);d.Multiplexer=w;function _(m,l,T){function b(S,x,B){l.call(this,S,x,B)}return u.inherits(b,l),b.prototype.writeMessageBegin=function(S,x,B){x==a.MessageType.CALL||x==a.MessageType.ONEWAY?(T.seqId2Service[B]=m,b.super_.prototype.writeMessageBegin.call(this,m+":"+S,x,B)):b.super_.prototype.writeMessageBegin.call(this,S,x,B)},b}function w(){this.seqid=0}w.prototype.createClient=function(m,l,T){l.Client&&(l=l.Client);var b=function(k,M){T.write(k,M)},S=new T.transport(void 0,b),x=new _(m,T.protocol,T),B=new l(S,x),F=this;return B.new_seqid=function(){return F.seqid+=1,F.seqid},typeof T.client!="object"&&(T.client={}),T.client[m]=B,B}},5406:(c,d,f)=>{var u=f(9539),a=d.Type={STOP:0,VOID:1,BOOL:2,BYTE:3,I08:3,DOUBLE:4,I16:6,I32:8,I64:10,STRING:11,UTF7:11,STRUCT:12,MAP:13,SET:14,LIST:15,UTF8:16,UTF16:17};d.MessageType={CALL:1,REPLY:2,EXCEPTION:3,ONEWAY:4},d.TException=_;function _(S){Error.call(this),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.message=S}u.inherits(_,Error);var w=d.TApplicationExceptionType={UNKNOWN:0,UNKNOWN_METHOD:1,INVALID_MESSAGE_TYPE:2,WRONG_METHOD_NAME:3,BAD_SEQUENCE_ID:4,MISSING_RESULT:5,INTERNAL_ERROR:6,PROTOCOL_ERROR:7,INVALID_TRANSFORM:8,INVALID_PROTOCOL:9,UNSUPPORTED_CLIENT_TYPE:10};d.TApplicationException=m;function m(S,x){_.call(this),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,this.constructor),this.type=S||w.UNKNOWN,this.name=this.constructor.name,this.message=x}u.inherits(m,_),m.prototype.read=function(S){for(var x=S.readStructBegin("TApplicationException");x=S.readFieldBegin(),x.ftype!=a.STOP;){switch(x.fid){case 1:x.ftype==a.STRING?(x=S.readString(),this.message=x):x=S.skip(x.ftype);break;case 2:x.ftype==a.I32?(x=S.readI32(),this.type=x):x=S.skip(x.ftype);break;default:x=S.skip(x.ftype);break}S.readFieldEnd()}S.readStructEnd()},m.prototype.write=function(S){S.writeStructBegin("TApplicationException"),this.message&&(S.writeFieldBegin("message",a.STRING,1),S.writeString(this.message),S.writeFieldEnd()),this.code&&(S.writeFieldBegin("type",a.I32,2),S.writeI32(this.code),S.writeFieldEnd()),S.writeFieldStop(),S.writeStructEnd()},d.TProtocolExceptionType={UNKNOWN:0,INVALID_DATA:1,NEGATIVE_SIZE:2,SIZE_LIMIT:3,BAD_VERSION:4,NOT_IMPLEMENTED:5,DEPTH_LIMIT:6},d.TProtocolException=l;function l(S,x){Error.call(this),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.type=S,this.message=x}u.inherits(l,Error),d.objectLength=function(S){return Object.keys(S).length},d.inherits=function(S,x){u.inherits(S,x)};var T,b;T=function(S,x){if(!S)return S;var B;x.shift===void 0?B=x:B=x[0];var F=B,k=S.length,M=[],A,R;for(A=0;A<k;A++)R=S[A],B===null?M.push(R):B===b||B===T?M.push(B(R,x.slice(1))):M.push(new F(R));return M},b=function(S,x){if(!S)return S;var B;x.shift===void 0?B=x:B=x[0];var F=B,k={},M;for(var A in S)S.hasOwnProperty(A)&&(M=S[A],B===null?k[A]=M:B===b||B===T?k[A]=B(M,x.slice(1)):k[A]=new F(M));return k},c.exports.copyMap=b,c.exports.copyList=T},5455:(c,d,f)=>{var u=f(8764).Buffer,a=f(9539),_=f(6792),w=f(7187).EventEmitter,m=f(5406),l=f(8869),T=f(5086),b=f(3590),S=f(6243),x=f(3818);d.WSConnection=B;function B(F,k,M){w.call(this),this.options=M||{},this.host=F,this.port=k,this.secure=this.options.secure||!1,this.transport=this.options.transport||l,this.protocol=this.options.protocol||T,this.path=this.options.path,this.send_pending=[],this.seqId2Service={},this.wsOptions={host:this.host,port:this.port||80,path:this.options.path||"/",headers:this.options.headers||{}};for(var A in this.options.wsOptions)this.wsOptions[A]=this.options.wsOptions[A]}a.inherits(B,w),B.prototype.__reset=function(){this.socket=null,this.send_pending=[]},B.prototype.__onOpen=function(){this.emit("open"),this.send_pending.length>0&&(this.send_pending.forEach(function(F){this.socket.send(F)},this),this.send_pending=[])},B.prototype.__onClose=function(F){this.emit("close"),this.__reset()},B.prototype.__decodeCallback=function(F){var k=new this.protocol(F);try{for(;;){var M=k.readMessageBegin(),A=M.rseqid*-1,R=this.client,P=this.seqId2Service[M.rseqid];P&&(R=this.client[P],delete this.seqId2Service[M.rseqid]),R._reqs[A]=function(j,D){F.commitPosition();var z=R._reqs[M.rseqid];delete R._reqs[M.rseqid],z&&z(j,D)},R["recv_"+M.fname]?R["recv_"+M.fname](k,M.mtype,A):(delete R._reqs[A],this.emit("error",new m.TApplicationException(m.TApplicationExceptionType.WRONG_METHOD_NAME,"Received a response to an unknown RPC function")))}}catch(j){if(j instanceof b)F.rollbackPosition();else throw j}},B.prototype.__onData=function(F){Object.prototype.toString.call(F)==="[object ArrayBuffer]"&&(F=new Uint8Array(F));var k=new u(F);this.transport.receiver(this.__decodeCallback.bind(this))(k)},B.prototype.__onMessage=function(F){this.__onData(F.data)},B.prototype.__onError=function(F){this.emit("error",F),this.socket.close()},B.prototype.isOpen=function(){return this.socket&&this.socket.readyState===this.socket.OPEN},B.prototype.open=function(){this.socket&&this.socket.readyState!==this.socket.CLOSED||(x.isBrowser?this.socket=new _(this.uri()):this.socket=new _(this.uri(),"",this.wsOptions),this.socket.binaryType="arraybuffer",this.socket.onopen=this.__onOpen.bind(this),this.socket.onmessage=this.__onMessage.bind(this),this.socket.onerror=this.__onError.bind(this),this.socket.onclose=this.__onClose.bind(this))},B.prototype.close=function(){this.socket.close()},B.prototype.uri=function(){var F=this.secure?"wss":"ws",k="",M=this.path||"/",A=this.host;return this.port&&(F==="wss"&&this.port!==443||F==="ws"&&this.port!==80)&&(k=":"+this.port),F+"://"+A+k+M},B.prototype.write=function(F){this.isOpen()?this.socket.send(F):this.send_pending.push(F)},d.createWSConnection=function(F,k,M){return new B(F,k,M)},d.createWSClient=S},5764:(c,d,f)=>{var u=f(1291);c.exports=a;function a(_){this.__reset(_)}a.prototype.__reset=function(_){this.url=_,this.socket=null,this.callbacks=[],this.send_pending=[],this.send_buf="",this.recv_buf="",this.rb_wpos=0,this.rb_rpos=0},a.prototype.flush=function(_,w){var m=this;this.isOpen()?(this.socket.send(this.send_buf),this.callbacks.push(function(){var l=w;return function(T){m.setRecvBuffer(T),l()}}())):this.send_pending.push({buf:this.send_buf,cb:w})},a.prototype.__onOpen=function(){var _=this;this.send_pending.length>0&&(this.send_pending.forEach(function(w){_.socket.send(w.buf),_.callbacks.push(function(){var m=w.cb;return function(l){_.setRecvBuffer(l),m()}}())}),this.send_pending=[])},a.prototype.__onClose=function(_){this.__reset(this.url)},a.prototype.__onMessage=function(_){this.callbacks.length&&this.callbacks.shift()(_.data)},a.prototype.__onError=function(_){u.error("websocket: "+_.toString()),this.socket.close()},a.prototype.setRecvBuffer=function(_){this.recv_buf=_,this.recv_buf_sz=this.recv_buf.length,this.wpos=this.recv_buf.length,this.rpos=0},a.prototype.isOpen=function(){return this.socket&&this.socket.readyState==this.socket.OPEN},a.prototype.open=function(){this.socket&&this.socket.readyState!=this.socket.CLOSED||(this.socket=new WebSocket(this.url),this.socket.onopen=this.__onOpen.bind(this),this.socket.onmessage=this.__onMessage.bind(this),this.socket.onerror=this.__onError.bind(this),this.socket.onclose=this.__onClose.bind(this))},a.prototype.close=function(){this.socket.close()},a.prototype.read=function(_){var w=this.wpos-this.rpos;if(w===0)return"";var m=_;w<_&&(m=w);var l=this.read_buf.substr(this.rpos,m);return this.rpos+=m,l},a.prototype.readAll=function(){return this.recv_buf},a.prototype.write=function(_){this.send_buf=_},a.prototype.getSendBuffer=function(){return this.send_buf}},4050:(c,d,f)=>{var u=f(8764).Buffer,a=f(9539),_=f(7187).EventEmitter,w=f(5406),m=f(8869),l=f(5086),T=f(3590),b=f(6243);d.XHRConnection=S;function S(x,B,F){this.options=F||{},this.wpos=0,this.rpos=0,this.useCORS=F&&F.useCORS,this.send_buf="",this.recv_buf="",this.transport=F.transport||m,this.protocol=F.protocol||l,this.headers=F.headers||{},x=x||window.location.host,B=B||window.location.port;var k=F.https?"https://":"http://",M=F.path||"/";B===""&&(B=void 0),!B||B===80||B==="80"?this.url=k+x+M:this.url=k+x+":"+B+M,this.seqId2Service={}}a.inherits(S,_),S.prototype.getXmlHttpRequestObject=function(){try{return new XMLHttpRequest}catch{}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch{}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch{}throw"Your browser doesn't support XHR."},S.prototype.flush=function(){var x=this;if(this.url===void 0||this.url==="")return this.send_buf;var B=this.getXmlHttpRequestObject();B.overrideMimeType&&B.overrideMimeType("application/json"),B.onreadystatechange=function(){this.readyState==4&&this.status==200&&x.setRecvBuffer(this.responseText)},B.open("POST",this.url,!0),Object.keys(this.headers).forEach(function(F){B.setRequestHeader(F,x.headers[F])}),B.send(this.send_buf)},S.prototype.setRecvBuffer=function(x){if(this.recv_buf=x,this.recv_buf_sz=this.recv_buf.length,this.wpos=this.recv_buf.length,this.rpos=0,Object.prototype.toString.call(x)=="[object ArrayBuffer]")var B=new Uint8Array(x);var F=new u(B||x);this.transport.receiver(this.__decodeCallback.bind(this))(F)},S.prototype.__decodeCallback=function(x){var B=new this.protocol(x);try{for(;;){var F=B.readMessageBegin(),k=F.rseqid*-1,M=this.client,A=this.seqId2Service[F.rseqid];A&&(M=this.client[A],delete this.seqId2Service[F.rseqid]),M._reqs[k]=function(R,P){x.commitPosition();var j=M._reqs[F.rseqid];delete M._reqs[F.rseqid],j&&j(R,P)},M["recv_"+F.fname]?M["recv_"+F.fname](B,F.mtype,k):(delete M._reqs[k],this.emit("error",new w.TApplicationException(w.TApplicationExceptionType.WRONG_METHOD_NAME,"Received a response to an unknown RPC function")))}}catch(R){if(R instanceof T)x.rollbackPosition();else throw R}},S.prototype.isOpen=function(){return!0},S.prototype.open=function(){},S.prototype.close=function(){},S.prototype.read=function(x){var B=this.wpos-this.rpos;if(B===0)return"";var F=x;B<x&&(F=B);var k=this.read_buf.substr(this.rpos,F);return this.rpos+=F,k},S.prototype.readAll=function(){return this.recv_buf},S.prototype.write=function(x){this.send_buf=x,this.flush()},S.prototype.getSendBuffer=function(){return this.send_buf},d.createXHRConnection=function(x,B,F){return new S(x,B,F)},d.createXHRClient=b},384:c=>{c.exports=function(f){return f&&typeof f=="object"&&typeof f.copy=="function"&&typeof f.fill=="function"&&typeof f.readUInt8=="function"}},5955:(c,d,f)=>{var u=f(2584),a=f(8662),_=f(6430),w=f(5692);function m(ue){return ue.call.bind(ue)}var l=typeof BigInt<"u",T=typeof Symbol<"u",b=m(Object.prototype.toString),S=m(Number.prototype.valueOf),x=m(String.prototype.valueOf),B=m(Boolean.prototype.valueOf);if(l)var F=m(BigInt.prototype.valueOf);if(T)var k=m(Symbol.prototype.valueOf);function M(ue,Fi){if(typeof ue!="object")return!1;try{return Fi(ue),!0}catch{return!1}}d.isArgumentsObject=u,d.isGeneratorFunction=a,d.isTypedArray=w;function A(ue){return typeof Promise<"u"&&ue instanceof Promise||ue!==null&&typeof ue=="object"&&typeof ue.then=="function"&&typeof ue.catch=="function"}d.isPromise=A;function R(ue){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(ue):w(ue)||q(ue)}d.isArrayBufferView=R;function P(ue){return _(ue)==="Uint8Array"}d.isUint8Array=P;function j(ue){return _(ue)==="Uint8ClampedArray"}d.isUint8ClampedArray=j;function D(ue){return _(ue)==="Uint16Array"}d.isUint16Array=D;function z(ue){return _(ue)==="Uint32Array"}d.isUint32Array=z;function $(ue){return _(ue)==="Int8Array"}d.isInt8Array=$;function Y(ue){return _(ue)==="Int16Array"}d.isInt16Array=Y;function W(ue){return _(ue)==="Int32Array"}d.isInt32Array=W;function H(ue){return _(ue)==="Float32Array"}d.isFloat32Array=H;function J(ue){return _(ue)==="Float64Array"}d.isFloat64Array=J;function V(ue){return _(ue)==="BigInt64Array"}d.isBigInt64Array=V;function le(ue){return _(ue)==="BigUint64Array"}d.isBigUint64Array=le;function pe(ue){return b(ue)==="[object Map]"}pe.working=typeof Map<"u"&&pe(new Map);function se(ue){return typeof Map>"u"?!1:pe.working?pe(ue):ue instanceof Map}d.isMap=se;function Ne(ue){return b(ue)==="[object Set]"}Ne.working=typeof Set<"u"&&Ne(new Set);function fe(ue){return typeof Set>"u"?!1:Ne.working?Ne(ue):ue instanceof Set}d.isSet=fe;function Ce(ue){return b(ue)==="[object WeakMap]"}Ce.working=typeof WeakMap<"u"&&Ce(new WeakMap);function Me(ue){return typeof WeakMap>"u"?!1:Ce.working?Ce(ue):ue instanceof WeakMap}d.isWeakMap=Me;function He(ue){return b(ue)==="[object WeakSet]"}He.working=typeof WeakSet<"u"&&He(new WeakSet);function Bt(ue){return He(ue)}d.isWeakSet=Bt;function vt(ue){return b(ue)==="[object ArrayBuffer]"}vt.working=typeof ArrayBuffer<"u"&&vt(new ArrayBuffer);function ge(ue){return typeof ArrayBuffer>"u"?!1:vt.working?vt(ue):ue instanceof ArrayBuffer}d.isArrayBuffer=ge;function G(ue){return b(ue)==="[object DataView]"}G.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&G(new DataView(new ArrayBuffer(1),0,1));function q(ue){return typeof DataView>"u"?!1:G.working?G(ue):ue instanceof DataView}d.isDataView=q;function L(ue){return b(ue)==="[object SharedArrayBuffer]"}L.working=typeof SharedArrayBuffer<"u"&&L(new SharedArrayBuffer);function X(ue){return typeof SharedArrayBuffer>"u"?!1:L.working?L(ue):ue instanceof SharedArrayBuffer}d.isSharedArrayBuffer=X;function Z(ue){return b(ue)==="[object AsyncFunction]"}d.isAsyncFunction=Z;function ae(ue){return b(ue)==="[object Map Iterator]"}d.isMapIterator=ae;function re(ue){return b(ue)==="[object Set Iterator]"}d.isSetIterator=re;function _e(ue){return b(ue)==="[object Generator]"}d.isGeneratorObject=_e;function Ee(ue){return b(ue)==="[object WebAssembly.Module]"}d.isWebAssemblyCompiledModule=Ee;function Je(ue){return M(ue,S)}d.isNumberObject=Je;function zt(ue){return M(ue,x)}d.isStringObject=zt;function At(ue){return M(ue,B)}d.isBooleanObject=At;function et(ue){return l&&M(ue,F)}d.isBigIntObject=et;function un(ue){return T&&M(ue,k)}d.isSymbolObject=un;function Gn(ue){return Je(ue)||zt(ue)||At(ue)||et(ue)||un(ue)}d.isBoxedPrimitive=Gn;function bs(ue){return typeof Uint8Array<"u"&&(ge(ue)||X(ue))}d.isAnyArrayBuffer=bs,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(ue){Object.defineProperty(d,ue,{enumerable:!1,value:function(){throw new Error(ue+" is not supported in userland")}})})},9539:(c,d,f)=>{var u=Object.getOwnPropertyDescriptors||function(q){for(var L=Object.keys(q),X={},Z=0;Z<L.length;Z++)X[L[Z]]=Object.getOwnPropertyDescriptor(q,L[Z]);return X},a=/%[sdj%]/g;d.format=function(G){if(!$(G)){for(var q=[],L=0;L<arguments.length;L++)q.push(l(arguments[L]));return q.join(" ")}for(var L=1,X=arguments,Z=X.length,ae=String(G).replace(a,function(_e){if(_e==="%%")return"%";if(L>=Z)return _e;switch(_e){case"%s":return String(X[L++]);case"%d":return Number(X[L++]);case"%j":try{return JSON.stringify(X[L++])}catch{return"[Circular]"}default:return _e}}),re=X[L];L<Z;re=X[++L])j(re)||!J(re)?ae+=" "+re:ae+=" "+l(re);return ae},d.deprecate=function(G,q){if(typeof process<"u"&&process.noDeprecation===!0)return G;if(typeof process>"u")return function(){return d.deprecate(G,q).apply(this,arguments)};var L=!1;function X(){if(!L){if(process.throwDeprecation)throw new Error(q);process.traceDeprecation?console.trace(q):console.error(q),L=!0}return G.apply(this,arguments)}return X};var _={},w=/^$/;if({BROWSER:!0}.NODE_DEBUG){var m={BROWSER:!0}.NODE_DEBUG;m=m.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),w=new RegExp("^"+m+"$","i")}d.debuglog=function(G){if(G=G.toUpperCase(),!_[G])if(w.test(G)){var q=process.pid;_[G]=function(){var L=d.format.apply(d,arguments);console.error("%s %d: %s",G,q,L)}}else _[G]=function(){};return _[G]};function l(G,q){var L={seen:[],stylize:b};return arguments.length>=3&&(L.depth=arguments[2]),arguments.length>=4&&(L.colors=arguments[3]),P(q)?L.showHidden=q:q&&d._extend(L,q),W(L.showHidden)&&(L.showHidden=!1),W(L.depth)&&(L.depth=2),W(L.colors)&&(L.colors=!1),W(L.customInspect)&&(L.customInspect=!0),L.colors&&(L.stylize=T),x(L,G,L.depth)}d.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function T(G,q){var L=l.styles[q];return L?"\x1B["+l.colors[L][0]+"m"+G+"\x1B["+l.colors[L][1]+"m":G}function b(G,q){return G}function S(G){var q={};return G.forEach(function(L,X){q[L]=!0}),q}function x(G,q,L){if(G.customInspect&&q&&pe(q.inspect)&&q.inspect!==d.inspect&&!(q.constructor&&q.constructor.prototype===q)){var X=q.inspect(L,G);return $(X)||(X=x(G,X,L)),X}var Z=B(G,q);if(Z)return Z;var ae=Object.keys(q),re=S(ae);if(G.showHidden&&(ae=Object.getOwnPropertyNames(q)),le(q)&&(ae.indexOf("message")>=0||ae.indexOf("description")>=0))return F(q);if(ae.length===0){if(pe(q)){var _e=q.name?": "+q.name:"";return G.stylize("[Function"+_e+"]","special")}if(H(q))return G.stylize(RegExp.prototype.toString.call(q),"regexp");if(V(q))return G.stylize(Date.prototype.toString.call(q),"date");if(le(q))return F(q)}var Ee="",Je=!1,zt=["{","}"];if(R(q)&&(Je=!0,zt=["[","]"]),pe(q)){var At=q.name?": "+q.name:"";Ee=" [Function"+At+"]"}if(H(q)&&(Ee=" "+RegExp.prototype.toString.call(q)),V(q)&&(Ee=" "+Date.prototype.toUTCString.call(q)),le(q)&&(Ee=" "+F(q)),ae.length===0&&(!Je||q.length==0))return zt[0]+Ee+zt[1];if(L<0)return H(q)?G.stylize(RegExp.prototype.toString.call(q),"regexp"):G.stylize("[Object]","special");G.seen.push(q);var et;return Je?et=k(G,q,L,re,ae):et=ae.map(function(un){return M(G,q,L,re,un,Je)}),G.seen.pop(),A(et,Ee,zt)}function B(G,q){if(W(q))return G.stylize("undefined","undefined");if($(q)){var L="'"+JSON.stringify(q).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return G.stylize(L,"string")}if(z(q))return G.stylize(""+q,"number");if(P(q))return G.stylize(""+q,"boolean");if(j(q))return G.stylize("null","null")}function F(G){return"["+Error.prototype.toString.call(G)+"]"}function k(G,q,L,X,Z){for(var ae=[],re=0,_e=q.length;re<_e;++re)He(q,String(re))?ae.push(M(G,q,L,X,String(re),!0)):ae.push("");return Z.forEach(function(Ee){Ee.match(/^\d+$/)||ae.push(M(G,q,L,X,Ee,!0))}),ae}function M(G,q,L,X,Z,ae){var re,_e,Ee;if(Ee=Object.getOwnPropertyDescriptor(q,Z)||{value:q[Z]},Ee.get?Ee.set?_e=G.stylize("[Getter/Setter]","special"):_e=G.stylize("[Getter]","special"):Ee.set&&(_e=G.stylize("[Setter]","special")),He(X,Z)||(re="["+Z+"]"),_e||(G.seen.indexOf(Ee.value)<0?(j(L)?_e=x(G,Ee.value,null):_e=x(G,Ee.value,L-1),_e.indexOf(`
`)>-1&&(ae?_e=_e.split(`
`).map(function(Je){return"  "+Je}).join(`
`).substr(2):_e=`
`+_e.split(`
`).map(function(Je){return"   "+Je}).join(`
`))):_e=G.stylize("[Circular]","special")),W(re)){if(ae&&Z.match(/^\d+$/))return _e;re=JSON.stringify(""+Z),re.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(re=re.substr(1,re.length-2),re=G.stylize(re,"name")):(re=re.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),re=G.stylize(re,"string"))}return re+": "+_e}function A(G,q,L){var X=G.reduce(function(Z,ae){return ae.indexOf(`
`)>=0,Z+ae.replace(/\u001b\[\d\d?m/g,"").length+1},0);return X>60?L[0]+(q===""?"":q+`
 `)+" "+G.join(`,
  `)+" "+L[1]:L[0]+q+" "+G.join(", ")+" "+L[1]}d.types=f(5955);function R(G){return Array.isArray(G)}d.isArray=R;function P(G){return typeof G=="boolean"}d.isBoolean=P;function j(G){return G===null}d.isNull=j;function D(G){return G==null}d.isNullOrUndefined=D;function z(G){return typeof G=="number"}d.isNumber=z;function $(G){return typeof G=="string"}d.isString=$;function Y(G){return typeof G=="symbol"}d.isSymbol=Y;function W(G){return G===void 0}d.isUndefined=W;function H(G){return J(G)&&Ne(G)==="[object RegExp]"}d.isRegExp=H,d.types.isRegExp=H;function J(G){return typeof G=="object"&&G!==null}d.isObject=J;function V(G){return J(G)&&Ne(G)==="[object Date]"}d.isDate=V,d.types.isDate=V;function le(G){return J(G)&&(Ne(G)==="[object Error]"||G instanceof Error)}d.isError=le,d.types.isNativeError=le;function pe(G){return typeof G=="function"}d.isFunction=pe;function se(G){return G===null||typeof G=="boolean"||typeof G=="number"||typeof G=="string"||typeof G=="symbol"||typeof G>"u"}d.isPrimitive=se,d.isBuffer=f(384);function Ne(G){return Object.prototype.toString.call(G)}function fe(G){return G<10?"0"+G.toString(10):G.toString(10)}var Ce=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Me(){var G=new Date,q=[fe(G.getHours()),fe(G.getMinutes()),fe(G.getSeconds())].join(":");return[G.getDate(),Ce[G.getMonth()],q].join(" ")}d.log=function(){console.log("%s - %s",Me(),d.format.apply(d,arguments))},d.inherits=f(5717),d._extend=function(G,q){if(!q||!J(q))return G;for(var L=Object.keys(q),X=L.length;X--;)G[L[X]]=q[L[X]];return G};function He(G,q){return Object.prototype.hasOwnProperty.call(G,q)}var Bt=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;d.promisify=function(q){if(typeof q!="function")throw new TypeError('The "original" argument must be of type Function');if(Bt&&q[Bt]){var L=q[Bt];if(typeof L!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(L,Bt,{value:L,enumerable:!1,writable:!1,configurable:!0}),L}function L(){for(var X,Z,ae=new Promise(function(Ee,Je){X=Ee,Z=Je}),re=[],_e=0;_e<arguments.length;_e++)re.push(arguments[_e]);re.push(function(Ee,Je){Ee?Z(Ee):X(Je)});try{q.apply(this,re)}catch(Ee){Z(Ee)}return ae}return Object.setPrototypeOf(L,Object.getPrototypeOf(q)),Bt&&Object.defineProperty(L,Bt,{value:L,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(L,u(q))},d.promisify.custom=Bt;function vt(G,q){if(!G){var L=new Error("Promise was rejected with a falsy value");L.reason=G,G=L}return q(G)}function ge(G){if(typeof G!="function")throw new TypeError('The "original" argument must be of type Function');function q(){for(var L=[],X=0;X<arguments.length;X++)L.push(arguments[X]);var Z=L.pop();if(typeof Z!="function")throw new TypeError("The last argument must be of type Function");var ae=this,re=function(){return Z.apply(ae,arguments)};G.apply(this,L).then(function(_e){process.nextTick(re.bind(null,null,_e))},function(_e){process.nextTick(vt.bind(null,_e,re))})}return Object.setPrototypeOf(q,Object.getPrototypeOf(G)),Object.defineProperties(q,u(G)),q}d.callbackify=ge},6430:(c,d,f)=>{var u=f(9804),a=f(6314),_=f(8914),w=_("Object.prototype.toString"),m=f(1405)(),l=m&&typeof Symbol.toStringTag=="symbol",T=a(),b=_("String.prototype.slice"),S={},x=f(4079),B=Object.getPrototypeOf;l&&x&&B&&u(T,function(M){if(typeof f.g[M]=="function"){var A=new f.g[M];if(!(Symbol.toStringTag in A))throw new EvalError("this engine has support for Symbol.toStringTag, but "+M+" does not have the property! Please report this.");var R=B(A),P=x(R,Symbol.toStringTag);if(!P){var j=B(R);P=x(j,Symbol.toStringTag)}S[M]=P.get}});var F=function(A){var R=!1;return u(S,function(P,j){if(!R)try{var D=P.call(A);D===j&&(R=D)}catch{}}),R},k=f(5692);c.exports=function(A){return k(A)?l?F(A):b(w(A),8,-1):!1}},4221:(c,d,f)=>{const a=f(9262).Thrift;f(135),f(2818);const _=f(4494),w=f(3962),m=f(1396),l=f(2607),T=class{constructor(r){this.user=null,this.passwd=null,this.dbname=null,r&&(r.user!==void 0&&r.user!==null&&(this.user=r.user),r.passwd!==void 0&&r.passwd!==null&&(this.passwd=r.passwd),r.dbname!==void 0&&r.dbname!==null&&(this.dbname=r.dbname))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.user=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.passwd=r.readString():r.skip(p);break;case 3:p==a.Type.STRING?this.dbname=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_connect_args"),this.user!==null&&this.user!==void 0&&(r.writeFieldBegin("user",a.Type.STRING,1),r.writeString(this.user),r.writeFieldEnd()),this.passwd!==null&&this.passwd!==void 0&&(r.writeFieldBegin("passwd",a.Type.STRING,2),r.writeString(this.passwd),r.writeFieldEnd()),this.dbname!==null&&this.dbname!==void 0&&(r.writeFieldBegin("dbname",a.Type.STRING,3),r.writeString(this.dbname),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},b=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=r.success),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRING?this.success=r.readString():r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_connect_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRING,0),r.writeString(this.success),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},S=class{constructor(r){this.inputToken=null,this.dbname=null,r&&(r.inputToken!==void 0&&r.inputToken!==null&&(this.inputToken=r.inputToken),r.dbname!==void 0&&r.dbname!==null&&(this.dbname=r.dbname))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.inputToken=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.dbname=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_krb5_connect_args"),this.inputToken!==null&&this.inputToken!==void 0&&(r.writeFieldBegin("inputToken",a.Type.STRING,1),r.writeString(this.inputToken),r.writeFieldEnd()),this.dbname!==null&&this.dbname!==void 0&&(r.writeFieldBegin("dbname",a.Type.STRING,2),r.writeString(this.dbname),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},x=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TKrb5Session(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TKrb5Session,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_krb5_connect_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},B=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_disconnect_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},F=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_disconnect_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},k=class{constructor(r){this.session=null,this.dbname=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.dbname!==void 0&&r.dbname!==null&&(this.dbname=r.dbname))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.dbname=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_switch_database_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.dbname!==null&&this.dbname!==void 0&&(r.writeFieldBegin("dbname",a.Type.STRING,2),r.writeString(this.dbname),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},M=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_switch_database_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},A=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_clone_session_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},R=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=r.success),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRING?this.success=r.readString():r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_clone_session_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRING,0),r.writeString(this.success),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},P=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_server_status_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},j=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TServerStatus(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TServerStatus,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_server_status_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},D=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_status_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},z=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[l.TServerStatus])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new l.TServerStatus,I.read(r),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_status_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRUCT,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},$=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_hardware_info_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Y=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TClusterHardwareInfo(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TClusterHardwareInfo,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_hardware_info_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},W=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_tables_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},H=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readString(),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_tables_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRING,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},J=class{constructor(r){this.session=null,this.database_name=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.database_name!==void 0&&r.database_name!==null&&(this.database_name=r.database_name))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.database_name=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_tables_for_database_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.database_name!==null&&this.database_name!==void 0&&(r.writeFieldBegin("database_name",a.Type.STRING,2),r.writeString(this.database_name),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},V=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readString(),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_tables_for_database_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRING,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},le=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_physical_tables_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},pe=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readString(),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_physical_tables_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRING,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},se=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_views_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Ne=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readString(),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_views_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRING,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},fe=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_tables_meta_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Ce=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[l.TTableMeta])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new l.TTableMeta,I.read(r),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_tables_meta_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRUCT,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Me=class{constructor(r){this.session=null,this.table_name=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.table_name=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_table_details_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",a.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},He=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TTableDetails(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TTableDetails,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_table_details_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Bt=class{constructor(r){this.session=null,this.table_name=null,this.database_name=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.database_name!==void 0&&r.database_name!==null&&(this.database_name=r.database_name))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.table_name=r.readString():r.skip(p);break;case 3:p==a.Type.STRING?this.database_name=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_table_details_for_database_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",a.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.database_name!==null&&this.database_name!==void 0&&(r.writeFieldBegin("database_name",a.Type.STRING,3),r.writeString(this.database_name),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},vt=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TTableDetails(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TTableDetails,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_table_details_for_database_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ge=class{constructor(r){this.session=null,this.table_name=null,this.include_system_columns=!0,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.include_system_columns!==void 0&&r.include_system_columns!==null&&(this.include_system_columns=r.include_system_columns))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.table_name=r.readString():r.skip(p);break;case 3:p==a.Type.BOOL?this.include_system_columns=r.readBool():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_internal_table_details_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",a.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.include_system_columns!==null&&this.include_system_columns!==void 0&&(r.writeFieldBegin("include_system_columns",a.Type.BOOL,3),r.writeBool(this.include_system_columns),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},G=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TTableDetails(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TTableDetails,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_internal_table_details_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},q=class{constructor(r){this.session=null,this.table_name=null,this.database_name=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.database_name!==void 0&&r.database_name!==null&&(this.database_name=r.database_name))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.table_name=r.readString():r.skip(p);break;case 3:p==a.Type.STRING?this.database_name=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_internal_table_details_for_database_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",a.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.database_name!==null&&this.database_name!==void 0&&(r.writeFieldBegin("database_name",a.Type.STRING,3),r.writeString(this.database_name),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},L=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TTableDetails(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TTableDetails,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_internal_table_details_for_database_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},X=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_users_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Z=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readString(),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_users_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRING,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ae=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_databases_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},re=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[l.TDBInfo])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new l.TDBInfo,I.read(r),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_databases_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRUCT,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},_e=class{constructor(r){}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin().ftype;if(p==a.Type.STOP)break;r.skip(p),r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_version_args"),r.writeFieldStop(),r.writeStructEnd()}},Ee=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=r.success),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRING?this.success=r.readString():r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_version_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRING,0),r.writeString(this.success),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Je=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_start_heap_profile_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},zt=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_start_heap_profile_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},At=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_stop_heap_profile_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},et=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_stop_heap_profile_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},un=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_heap_profile_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Gn=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=r.success),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRING?this.success=r.readString():r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_heap_profile_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRING,0),r.writeString(this.success),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},bs=class{constructor(r){this.session=null,this.memory_level=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.memory_level!==void 0&&r.memory_level!==null&&(this.memory_level=r.memory_level))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.memory_level=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_memory_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.memory_level!==null&&this.memory_level!==void 0&&(r.writeFieldBegin("memory_level",a.Type.STRING,2),r.writeString(this.memory_level),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ue=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[l.TNodeMemoryInfo])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new l.TNodeMemoryInfo,I.read(r),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_memory_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRUCT,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Fi=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_clear_cpu_memory_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},oi=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_clear_cpu_memory_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ia=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_clear_gpu_memory_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},En=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_clear_gpu_memory_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},hc=class{constructor(r){this.parent_session=null,this.leaf_session=null,this.start_time_str=null,this.label=null,this.for_running_query_kernel=null,r&&(r.parent_session!==void 0&&r.parent_session!==null&&(this.parent_session=r.parent_session),r.leaf_session!==void 0&&r.leaf_session!==null&&(this.leaf_session=r.leaf_session),r.start_time_str!==void 0&&r.start_time_str!==null&&(this.start_time_str=r.start_time_str),r.label!==void 0&&r.label!==null&&(this.label=r.label),r.for_running_query_kernel!==void 0&&r.for_running_query_kernel!==null&&(this.for_running_query_kernel=r.for_running_query_kernel))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.parent_session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.leaf_session=r.readString():r.skip(p);break;case 3:p==a.Type.STRING?this.start_time_str=r.readString():r.skip(p);break;case 4:p==a.Type.STRING?this.label=r.readString():r.skip(p);break;case 5:p==a.Type.BOOL?this.for_running_query_kernel=r.readBool():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_cur_session_args"),this.parent_session!==null&&this.parent_session!==void 0&&(r.writeFieldBegin("parent_session",a.Type.STRING,1),r.writeString(this.parent_session),r.writeFieldEnd()),this.leaf_session!==null&&this.leaf_session!==void 0&&(r.writeFieldBegin("leaf_session",a.Type.STRING,2),r.writeString(this.leaf_session),r.writeFieldEnd()),this.start_time_str!==null&&this.start_time_str!==void 0&&(r.writeFieldBegin("start_time_str",a.Type.STRING,3),r.writeString(this.start_time_str),r.writeFieldEnd()),this.label!==null&&this.label!==void 0&&(r.writeFieldBegin("label",a.Type.STRING,4),r.writeString(this.label),r.writeFieldEnd()),this.for_running_query_kernel!==null&&this.for_running_query_kernel!==void 0&&(r.writeFieldBegin("for_running_query_kernel",a.Type.BOOL,5),r.writeBool(this.for_running_query_kernel),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},pc=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_cur_session_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},tr=class{constructor(r){this.parent_session=null,this.leaf_session=null,this.start_time_str=null,this.label=null,this.for_running_query_kernel=null,r&&(r.parent_session!==void 0&&r.parent_session!==null&&(this.parent_session=r.parent_session),r.leaf_session!==void 0&&r.leaf_session!==null&&(this.leaf_session=r.leaf_session),r.start_time_str!==void 0&&r.start_time_str!==null&&(this.start_time_str=r.start_time_str),r.label!==void 0&&r.label!==null&&(this.label=r.label),r.for_running_query_kernel!==void 0&&r.for_running_query_kernel!==null&&(this.for_running_query_kernel=r.for_running_query_kernel))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.parent_session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.leaf_session=r.readString():r.skip(p);break;case 3:p==a.Type.STRING?this.start_time_str=r.readString():r.skip(p);break;case 4:p==a.Type.STRING?this.label=r.readString():r.skip(p);break;case 5:p==a.Type.BOOL?this.for_running_query_kernel=r.readBool():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_invalidate_cur_session_args"),this.parent_session!==null&&this.parent_session!==void 0&&(r.writeFieldBegin("parent_session",a.Type.STRING,1),r.writeString(this.parent_session),r.writeFieldEnd()),this.leaf_session!==null&&this.leaf_session!==void 0&&(r.writeFieldBegin("leaf_session",a.Type.STRING,2),r.writeString(this.leaf_session),r.writeFieldEnd()),this.start_time_str!==null&&this.start_time_str!==void 0&&(r.writeFieldBegin("start_time_str",a.Type.STRING,3),r.writeString(this.start_time_str),r.writeFieldEnd()),this.label!==null&&this.label!==void 0&&(r.writeFieldBegin("label",a.Type.STRING,4),r.writeString(this.label),r.writeFieldEnd()),this.for_running_query_kernel!==null&&this.for_running_query_kernel!==void 0&&(r.writeFieldBegin("for_running_query_kernel",a.Type.BOOL,5),r.writeBool(this.for_running_query_kernel),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},gc=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_invalidate_cur_session_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},C=class{constructor(r){this.session=null,this.db_id=null,this.table_id=null,this.new_epoch=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.db_id!==void 0&&r.db_id!==null&&(this.db_id=r.db_id),r.table_id!==void 0&&r.table_id!==null&&(this.table_id=r.table_id),r.new_epoch!==void 0&&r.new_epoch!==null&&(this.new_epoch=r.new_epoch))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.I32?this.db_id=r.readI32():r.skip(p);break;case 3:p==a.Type.I32?this.table_id=r.readI32():r.skip(p);break;case 4:p==a.Type.I32?this.new_epoch=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_table_epoch_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.db_id!==null&&this.db_id!==void 0&&(r.writeFieldBegin("db_id",a.Type.I32,2),r.writeI32(this.db_id),r.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0&&(r.writeFieldBegin("table_id",a.Type.I32,3),r.writeI32(this.table_id),r.writeFieldEnd()),this.new_epoch!==null&&this.new_epoch!==void 0&&(r.writeFieldBegin("new_epoch",a.Type.I32,4),r.writeI32(this.new_epoch),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},O=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_table_epoch_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},N=class{constructor(r){this.session=null,this.table_name=null,this.new_epoch=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.new_epoch!==void 0&&r.new_epoch!==null&&(this.new_epoch=r.new_epoch))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.table_name=r.readString():r.skip(p);break;case 3:p==a.Type.I32?this.new_epoch=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_table_epoch_by_name_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",a.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.new_epoch!==null&&this.new_epoch!==void 0&&(r.writeFieldBegin("new_epoch",a.Type.I32,3),r.writeI32(this.new_epoch),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},U=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_table_epoch_by_name_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},K=class{constructor(r){this.session=null,this.db_id=null,this.table_id=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.db_id!==void 0&&r.db_id!==null&&(this.db_id=r.db_id),r.table_id!==void 0&&r.table_id!==null&&(this.table_id=r.table_id))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.I32?this.db_id=r.readI32():r.skip(p);break;case 3:p==a.Type.I32?this.table_id=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_table_epoch_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.db_id!==null&&this.db_id!==void 0&&(r.writeFieldBegin("db_id",a.Type.I32,2),r.writeI32(this.db_id),r.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0&&(r.writeFieldBegin("table_id",a.Type.I32,3),r.writeI32(this.table_id),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},te=class{constructor(r){this.success=null,r&&r.success!==void 0&&r.success!==null&&(this.success=r.success)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.I32?this.success=r.readI32():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_table_epoch_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.I32,0),r.writeI32(this.success),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ie=class{constructor(r){this.session=null,this.table_name=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.table_name=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_table_epoch_by_name_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",a.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Oe=class{constructor(r){this.success=null,r&&r.success!==void 0&&r.success!==null&&(this.success=r.success)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.I32?this.success=r.readI32():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_table_epoch_by_name_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.I32,0),r.writeI32(this.success),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Ue=class{constructor(r){this.session=null,this.db_id=null,this.table_id=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.db_id!==void 0&&r.db_id!==null&&(this.db_id=r.db_id),r.table_id!==void 0&&r.table_id!==null&&(this.table_id=r.table_id))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.I32?this.db_id=r.readI32():r.skip(p);break;case 3:p==a.Type.I32?this.table_id=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_table_epochs_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.db_id!==null&&this.db_id!==void 0&&(r.writeFieldBegin("db_id",a.Type.I32,2),r.writeI32(this.db_id),r.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0&&(r.writeFieldBegin("table_id",a.Type.I32,3),r.writeI32(this.table_id),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},$e=class{constructor(r){this.success=null,r&&r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[l.TTableEpochInfo]))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new l.TTableEpochInfo,I.read(r),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_table_epochs_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRUCT,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}r.writeFieldStop(),r.writeStructEnd()}},Xe=class{constructor(r){this.session=null,this.db_id=null,this.table_epochs=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.db_id!==void 0&&r.db_id!==null&&(this.db_id=r.db_id),r.table_epochs!==void 0&&r.table_epochs!==null&&(this.table_epochs=a.copyList(r.table_epochs,[l.TTableEpochInfo])))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.I32?this.db_id=r.readI32():r.skip(p);break;case 3:if(p==a.Type.LIST){this.table_epochs=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new l.TTableEpochInfo,I.read(r),this.table_epochs.push(I)}r.readListEnd()}else r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_set_table_epochs_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.db_id!==null&&this.db_id!==void 0&&(r.writeFieldBegin("db_id",a.Type.I32,2),r.writeI32(this.db_id),r.writeFieldEnd()),this.table_epochs!==null&&this.table_epochs!==void 0){r.writeFieldBegin("table_epochs",a.Type.LIST,3),r.writeListBegin(a.Type.STRUCT,this.table_epochs.length);for(let y in this.table_epochs)this.table_epochs.hasOwnProperty(y)&&(y=this.table_epochs[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}r.writeFieldStop(),r.writeStructEnd()}},Ke=class{constructor(r){}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin().ftype;if(p==a.Type.STOP)break;r.skip(p),r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_table_epochs_result"),r.writeFieldStop(),r.writeStructEnd()}},_c=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_session_info_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},aw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TSessionInfo(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TSessionInfo,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_session_info_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},u3=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_queries_info_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ow=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[l.TQueryInfo])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new l.TQueryInfo,I.read(r),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_queries_info_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRUCT,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},h3=class{constructor(r){this.session=null,this.leaf_info=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.leaf_info!==void 0&&r.leaf_info!==null&&(this.leaf_info=new l.TLeafInfo(r.leaf_info)))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRUCT?(this.leaf_info=new l.TLeafInfo,this.leaf_info.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_leaf_info_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.leaf_info!==null&&this.leaf_info!==void 0&&(r.writeFieldBegin("leaf_info",a.Type.STRUCT,2),this.leaf_info.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},lw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_leaf_info_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},p3=class{constructor(r){this.session=null,this.query=null,this.column_format=null,this.nonce=null,this.first_n=-1,this.at_most_n=-1,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.query!==void 0&&r.query!==null&&(this.query=r.query),r.column_format!==void 0&&r.column_format!==null&&(this.column_format=r.column_format),r.nonce!==void 0&&r.nonce!==null&&(this.nonce=r.nonce),r.first_n!==void 0&&r.first_n!==null&&(this.first_n=r.first_n),r.at_most_n!==void 0&&r.at_most_n!==null&&(this.at_most_n=r.at_most_n))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.query=r.readString():r.skip(p);break;case 3:p==a.Type.BOOL?this.column_format=r.readBool():r.skip(p);break;case 4:p==a.Type.STRING?this.nonce=r.readString():r.skip(p);break;case 5:p==a.Type.I32?this.first_n=r.readI32():r.skip(p);break;case 6:p==a.Type.I32?this.at_most_n=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_sql_execute_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.query!==null&&this.query!==void 0&&(r.writeFieldBegin("query",a.Type.STRING,2),r.writeString(this.query),r.writeFieldEnd()),this.column_format!==null&&this.column_format!==void 0&&(r.writeFieldBegin("column_format",a.Type.BOOL,3),r.writeBool(this.column_format),r.writeFieldEnd()),this.nonce!==null&&this.nonce!==void 0&&(r.writeFieldBegin("nonce",a.Type.STRING,4),r.writeString(this.nonce),r.writeFieldEnd()),this.first_n!==null&&this.first_n!==void 0&&(r.writeFieldBegin("first_n",a.Type.I32,5),r.writeI32(this.first_n),r.writeFieldEnd()),this.at_most_n!==null&&this.at_most_n!==void 0&&(r.writeFieldBegin("at_most_n",a.Type.I32,6),r.writeI32(this.at_most_n),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},cw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TQueryResult(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TQueryResult,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_sql_execute_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},g3=class{constructor(r){this.session=null,this.query=null,this.device_type=null,this.device_id=0,this.first_n=-1,this.transport_method=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.query!==void 0&&r.query!==null&&(this.query=r.query),r.device_type!==void 0&&r.device_type!==null&&(this.device_type=r.device_type),r.device_id!==void 0&&r.device_id!==null&&(this.device_id=r.device_id),r.first_n!==void 0&&r.first_n!==null&&(this.first_n=r.first_n),r.transport_method!==void 0&&r.transport_method!==null&&(this.transport_method=r.transport_method))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.query=r.readString():r.skip(p);break;case 3:p==a.Type.I32?this.device_type=r.readI32():r.skip(p);break;case 4:p==a.Type.I32?this.device_id=r.readI32():r.skip(p);break;case 5:p==a.Type.I32?this.first_n=r.readI32():r.skip(p);break;case 6:p==a.Type.I32?this.transport_method=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_sql_execute_df_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.query!==null&&this.query!==void 0&&(r.writeFieldBegin("query",a.Type.STRING,2),r.writeString(this.query),r.writeFieldEnd()),this.device_type!==null&&this.device_type!==void 0&&(r.writeFieldBegin("device_type",a.Type.I32,3),r.writeI32(this.device_type),r.writeFieldEnd()),this.device_id!==null&&this.device_id!==void 0&&(r.writeFieldBegin("device_id",a.Type.I32,4),r.writeI32(this.device_id),r.writeFieldEnd()),this.first_n!==null&&this.first_n!==void 0&&(r.writeFieldBegin("first_n",a.Type.I32,5),r.writeI32(this.first_n),r.writeFieldEnd()),this.transport_method!==null&&this.transport_method!==void 0&&(r.writeFieldBegin("transport_method",a.Type.I32,6),r.writeI32(this.transport_method),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},dw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TDataFrame(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TDataFrame,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_sql_execute_df_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},_3=class{constructor(r){this.session=null,this.query=null,this.device_id=0,this.first_n=-1,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.query!==void 0&&r.query!==null&&(this.query=r.query),r.device_id!==void 0&&r.device_id!==null&&(this.device_id=r.device_id),r.first_n!==void 0&&r.first_n!==null&&(this.first_n=r.first_n))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.query=r.readString():r.skip(p);break;case 3:p==a.Type.I32?this.device_id=r.readI32():r.skip(p);break;case 4:p==a.Type.I32?this.first_n=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_sql_execute_gdf_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.query!==null&&this.query!==void 0&&(r.writeFieldBegin("query",a.Type.STRING,2),r.writeString(this.query),r.writeFieldEnd()),this.device_id!==null&&this.device_id!==void 0&&(r.writeFieldBegin("device_id",a.Type.I32,3),r.writeI32(this.device_id),r.writeFieldEnd()),this.first_n!==null&&this.first_n!==void 0&&(r.writeFieldBegin("first_n",a.Type.I32,4),r.writeI32(this.first_n),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},fw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TDataFrame(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TDataFrame,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_sql_execute_gdf_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},y3=class{constructor(r){this.session=null,this.df=null,this.device_type=null,this.device_id=0,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.df!==void 0&&r.df!==null&&(this.df=new l.TDataFrame(r.df)),r.device_type!==void 0&&r.device_type!==null&&(this.device_type=r.device_type),r.device_id!==void 0&&r.device_id!==null&&(this.device_id=r.device_id))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRUCT?(this.df=new l.TDataFrame,this.df.read(r)):r.skip(p);break;case 3:p==a.Type.I32?this.device_type=r.readI32():r.skip(p);break;case 4:p==a.Type.I32?this.device_id=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_deallocate_df_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.df!==null&&this.df!==void 0&&(r.writeFieldBegin("df",a.Type.STRUCT,2),this.df.write(r),r.writeFieldEnd()),this.device_type!==null&&this.device_type!==void 0&&(r.writeFieldBegin("device_type",a.Type.I32,3),r.writeI32(this.device_type),r.writeFieldEnd()),this.device_id!==null&&this.device_id!==void 0&&(r.writeFieldBegin("device_id",a.Type.I32,4),r.writeI32(this.device_id),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},uw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_deallocate_df_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},m3=class{constructor(r){this.query_session=null,this.interrupt_session=null,r&&(r.query_session!==void 0&&r.query_session!==null&&(this.query_session=r.query_session),r.interrupt_session!==void 0&&r.interrupt_session!==null&&(this.interrupt_session=r.interrupt_session))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.query_session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.interrupt_session=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_interrupt_args"),this.query_session!==null&&this.query_session!==void 0&&(r.writeFieldBegin("query_session",a.Type.STRING,1),r.writeString(this.query_session),r.writeFieldEnd()),this.interrupt_session!==null&&this.interrupt_session!==void 0&&(r.writeFieldBegin("interrupt_session",a.Type.STRING,2),r.writeString(this.interrupt_session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},hw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_interrupt_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},w3=class{constructor(r){this.session=null,this.query=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.query!==void 0&&r.query!==null&&(this.query=r.query))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.query=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_sql_validate_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.query!==null&&this.query!==void 0&&(r.writeFieldBegin("query",a.Type.STRING,2),r.writeString(this.query),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},pw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[l.TColumnType])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new l.TColumnType,I.read(r),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_sql_validate_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRUCT,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},b3=class{constructor(r){this.session=null,this.sql=null,this.cursor=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.sql!==void 0&&r.sql!==null&&(this.sql=r.sql),r.cursor!==void 0&&r.cursor!==null&&(this.cursor=r.cursor))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.sql=r.readString():r.skip(p);break;case 3:p==a.Type.I32?this.cursor=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_completion_hints_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.sql!==null&&this.sql!==void 0&&(r.writeFieldBegin("sql",a.Type.STRING,2),r.writeString(this.sql),r.writeFieldEnd()),this.cursor!==null&&this.cursor!==void 0&&(r.writeFieldBegin("cursor",a.Type.I32,3),r.writeI32(this.cursor),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},gw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[_.TCompletionHint])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new _.TCompletionHint,I.read(r),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_completion_hints_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRUCT,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},T3=class{constructor(r){this.session=null,this.mode=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.mode!==void 0&&r.mode!==null&&(this.mode=r.mode))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.I32?this.mode=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_execution_mode_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.mode!==null&&this.mode!==void 0&&(r.writeFieldBegin("mode",a.Type.I32,2),r.writeI32(this.mode),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},_w=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_execution_mode_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},v3=class{constructor(r){this.session=null,this.widget_id=null,this.vega_json=null,this.compression_level=null,this.nonce=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.widget_id!==void 0&&r.widget_id!==null&&(this.widget_id=r.widget_id),r.vega_json!==void 0&&r.vega_json!==null&&(this.vega_json=r.vega_json),r.compression_level!==void 0&&r.compression_level!==null&&(this.compression_level=r.compression_level),r.nonce!==void 0&&r.nonce!==null&&(this.nonce=r.nonce))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.I64?this.widget_id=r.readI64():r.skip(p);break;case 3:p==a.Type.STRING?this.vega_json=r.readString():r.skip(p);break;case 4:p==a.Type.I32?this.compression_level=r.readI32():r.skip(p);break;case 5:p==a.Type.STRING?this.nonce=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_render_vega_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.widget_id!==null&&this.widget_id!==void 0&&(r.writeFieldBegin("widget_id",a.Type.I64,2),r.writeI64(this.widget_id),r.writeFieldEnd()),this.vega_json!==null&&this.vega_json!==void 0&&(r.writeFieldBegin("vega_json",a.Type.STRING,3),r.writeString(this.vega_json),r.writeFieldEnd()),this.compression_level!==null&&this.compression_level!==void 0&&(r.writeFieldBegin("compression_level",a.Type.I32,4),r.writeI32(this.compression_level),r.writeFieldEnd()),this.nonce!==null&&this.nonce!==void 0&&(r.writeFieldBegin("nonce",a.Type.STRING,5),r.writeString(this.nonce),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},yw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TRenderResult(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TRenderResult,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_render_vega_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},E3=class{constructor(r){this.session=null,this.widget_id=null,this.pixel=null,this.table_col_names=null,this.column_format=null,this.pixelRadius=null,this.nonce=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.widget_id!==void 0&&r.widget_id!==null&&(this.widget_id=r.widget_id),r.pixel!==void 0&&r.pixel!==null&&(this.pixel=new l.TPixel(r.pixel)),r.table_col_names!==void 0&&r.table_col_names!==null&&(this.table_col_names=a.copyMap(r.table_col_names,[a.copyList,null])),r.column_format!==void 0&&r.column_format!==null&&(this.column_format=r.column_format),r.pixelRadius!==void 0&&r.pixelRadius!==null&&(this.pixelRadius=r.pixelRadius),r.nonce!==void 0&&r.nonce!==null&&(this.nonce=r.nonce))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.I64?this.widget_id=r.readI64():r.skip(p);break;case 3:p==a.Type.STRUCT?(this.pixel=new l.TPixel,this.pixel.read(r)):r.skip(p);break;case 4:if(p==a.Type.MAP){this.table_col_names={};const g=r.readMapBegin().size||0;for(let E=0;E<g;++E){let I=null,ee=null;I=r.readString(),ee=[];const Ve=r.readListBegin().size||0;for(let wn=0;wn<Ve;++wn){let gl=null;gl=r.readString(),ee.push(gl)}r.readListEnd(),this.table_col_names[I]=ee}r.readMapEnd()}else r.skip(p);break;case 5:p==a.Type.BOOL?this.column_format=r.readBool():r.skip(p);break;case 6:p==a.Type.I32?this.pixelRadius=r.readI32():r.skip(p);break;case 7:p==a.Type.STRING?this.nonce=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_result_row_for_pixel_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.widget_id!==null&&this.widget_id!==void 0&&(r.writeFieldBegin("widget_id",a.Type.I64,2),r.writeI64(this.widget_id),r.writeFieldEnd()),this.pixel!==null&&this.pixel!==void 0&&(r.writeFieldBegin("pixel",a.Type.STRUCT,3),this.pixel.write(r),r.writeFieldEnd()),this.table_col_names!==null&&this.table_col_names!==void 0){r.writeFieldBegin("table_col_names",a.Type.MAP,4),r.writeMapBegin(a.Type.STRING,a.Type.LIST,a.objectLength(this.table_col_names));for(let y in this.table_col_names)if(this.table_col_names.hasOwnProperty(y)){let p=this.table_col_names[y];r.writeString(y),r.writeListBegin(a.Type.STRING,p.length);for(let h in p)p.hasOwnProperty(h)&&(h=p[h],r.writeString(h));r.writeListEnd()}r.writeMapEnd(),r.writeFieldEnd()}this.column_format!==null&&this.column_format!==void 0&&(r.writeFieldBegin("column_format",a.Type.BOOL,5),r.writeBool(this.column_format),r.writeFieldEnd()),this.pixelRadius!==null&&this.pixelRadius!==void 0&&(r.writeFieldBegin("pixelRadius",a.Type.I32,6),r.writeI32(this.pixelRadius),r.writeFieldEnd()),this.nonce!==null&&this.nonce!==void 0&&(r.writeFieldBegin("nonce",a.Type.STRING,7),r.writeString(this.nonce),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},mw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TPixelTableRowResult(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TPixelTableRowResult,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_result_row_for_pixel_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},S3=class{constructor(r){this.session=null,this.custom_expression=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.custom_expression!==void 0&&r.custom_expression!==null&&(this.custom_expression=new l.TCustomExpression(r.custom_expression)))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRUCT?(this.custom_expression=new l.TCustomExpression,this.custom_expression.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_create_custom_expression_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.custom_expression!==null&&this.custom_expression!==void 0&&(r.writeFieldBegin("custom_expression",a.Type.STRUCT,2),this.custom_expression.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ww=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=r.success),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.I32?this.success=r.readI32():r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_create_custom_expression_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.I32,0),r.writeI32(this.success),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},x3=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_custom_expressions_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},bw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[l.TCustomExpression])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new l.TCustomExpression,I.read(r),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_custom_expressions_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRUCT,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},B3=class{constructor(r){this.session=null,this.id=null,this.expression_json=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.id!==void 0&&r.id!==null&&(this.id=r.id),r.expression_json!==void 0&&r.expression_json!==null&&(this.expression_json=r.expression_json))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.I32?this.id=r.readI32():r.skip(p);break;case 3:p==a.Type.STRING?this.expression_json=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_update_custom_expression_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.id!==null&&this.id!==void 0&&(r.writeFieldBegin("id",a.Type.I32,2),r.writeI32(this.id),r.writeFieldEnd()),this.expression_json!==null&&this.expression_json!==void 0&&(r.writeFieldBegin("expression_json",a.Type.STRING,3),r.writeString(this.expression_json),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Tw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_update_custom_expression_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},k3=class{constructor(r){this.session=null,this.custom_expression_ids=null,this.do_soft_delete=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.custom_expression_ids!==void 0&&r.custom_expression_ids!==null&&(this.custom_expression_ids=a.copyList(r.custom_expression_ids,[null])),r.do_soft_delete!==void 0&&r.do_soft_delete!==null&&(this.do_soft_delete=r.do_soft_delete))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:if(p==a.Type.LIST){this.custom_expression_ids=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readI32(),this.custom_expression_ids.push(I)}r.readListEnd()}else r.skip(p);break;case 3:p==a.Type.BOOL?this.do_soft_delete=r.readBool():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_delete_custom_expressions_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.custom_expression_ids!==null&&this.custom_expression_ids!==void 0){r.writeFieldBegin("custom_expression_ids",a.Type.LIST,2),r.writeListBegin(a.Type.I32,this.custom_expression_ids.length);for(let y in this.custom_expression_ids)this.custom_expression_ids.hasOwnProperty(y)&&(y=this.custom_expression_ids[y],r.writeI32(y));r.writeListEnd(),r.writeFieldEnd()}this.do_soft_delete!==null&&this.do_soft_delete!==void 0&&(r.writeFieldBegin("do_soft_delete",a.Type.BOOL,3),r.writeBool(this.do_soft_delete),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},vw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_delete_custom_expressions_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},I3=class{constructor(r){this.session=null,this.dashboard_id=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.dashboard_id!==void 0&&r.dashboard_id!==null&&(this.dashboard_id=r.dashboard_id))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.I32?this.dashboard_id=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_dashboard_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.dashboard_id!==null&&this.dashboard_id!==void 0&&(r.writeFieldBegin("dashboard_id",a.Type.I32,2),r.writeI32(this.dashboard_id),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Ew=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TDashboard(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TDashboard,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_dashboard_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},F3=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_dashboards_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Sw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[l.TDashboard])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new l.TDashboard,I.read(r),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_dashboards_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRUCT,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},O3=class{constructor(r){this.session=null,this.dashboard_name=null,this.dashboard_state=null,this.image_hash=null,this.dashboard_metadata=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.dashboard_name!==void 0&&r.dashboard_name!==null&&(this.dashboard_name=r.dashboard_name),r.dashboard_state!==void 0&&r.dashboard_state!==null&&(this.dashboard_state=r.dashboard_state),r.image_hash!==void 0&&r.image_hash!==null&&(this.image_hash=r.image_hash),r.dashboard_metadata!==void 0&&r.dashboard_metadata!==null&&(this.dashboard_metadata=r.dashboard_metadata))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.dashboard_name=r.readString():r.skip(p);break;case 3:p==a.Type.STRING?this.dashboard_state=r.readString():r.skip(p);break;case 4:p==a.Type.STRING?this.image_hash=r.readString():r.skip(p);break;case 5:p==a.Type.STRING?this.dashboard_metadata=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_create_dashboard_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.dashboard_name!==null&&this.dashboard_name!==void 0&&(r.writeFieldBegin("dashboard_name",a.Type.STRING,2),r.writeString(this.dashboard_name),r.writeFieldEnd()),this.dashboard_state!==null&&this.dashboard_state!==void 0&&(r.writeFieldBegin("dashboard_state",a.Type.STRING,3),r.writeString(this.dashboard_state),r.writeFieldEnd()),this.image_hash!==null&&this.image_hash!==void 0&&(r.writeFieldBegin("image_hash",a.Type.STRING,4),r.writeString(this.image_hash),r.writeFieldEnd()),this.dashboard_metadata!==null&&this.dashboard_metadata!==void 0&&(r.writeFieldBegin("dashboard_metadata",a.Type.STRING,5),r.writeString(this.dashboard_metadata),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},xw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=r.success),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.I32?this.success=r.readI32():r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_create_dashboard_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.I32,0),r.writeI32(this.success),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},M3=class{constructor(r){this.session=null,this.dashboard_id=null,this.dashboard_name=null,this.dashboard_owner=null,this.dashboard_state=null,this.image_hash=null,this.dashboard_metadata=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.dashboard_id!==void 0&&r.dashboard_id!==null&&(this.dashboard_id=r.dashboard_id),r.dashboard_name!==void 0&&r.dashboard_name!==null&&(this.dashboard_name=r.dashboard_name),r.dashboard_owner!==void 0&&r.dashboard_owner!==null&&(this.dashboard_owner=r.dashboard_owner),r.dashboard_state!==void 0&&r.dashboard_state!==null&&(this.dashboard_state=r.dashboard_state),r.image_hash!==void 0&&r.image_hash!==null&&(this.image_hash=r.image_hash),r.dashboard_metadata!==void 0&&r.dashboard_metadata!==null&&(this.dashboard_metadata=r.dashboard_metadata))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.I32?this.dashboard_id=r.readI32():r.skip(p);break;case 3:p==a.Type.STRING?this.dashboard_name=r.readString():r.skip(p);break;case 4:p==a.Type.STRING?this.dashboard_owner=r.readString():r.skip(p);break;case 5:p==a.Type.STRING?this.dashboard_state=r.readString():r.skip(p);break;case 6:p==a.Type.STRING?this.image_hash=r.readString():r.skip(p);break;case 7:p==a.Type.STRING?this.dashboard_metadata=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_replace_dashboard_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.dashboard_id!==null&&this.dashboard_id!==void 0&&(r.writeFieldBegin("dashboard_id",a.Type.I32,2),r.writeI32(this.dashboard_id),r.writeFieldEnd()),this.dashboard_name!==null&&this.dashboard_name!==void 0&&(r.writeFieldBegin("dashboard_name",a.Type.STRING,3),r.writeString(this.dashboard_name),r.writeFieldEnd()),this.dashboard_owner!==null&&this.dashboard_owner!==void 0&&(r.writeFieldBegin("dashboard_owner",a.Type.STRING,4),r.writeString(this.dashboard_owner),r.writeFieldEnd()),this.dashboard_state!==null&&this.dashboard_state!==void 0&&(r.writeFieldBegin("dashboard_state",a.Type.STRING,5),r.writeString(this.dashboard_state),r.writeFieldEnd()),this.image_hash!==null&&this.image_hash!==void 0&&(r.writeFieldBegin("image_hash",a.Type.STRING,6),r.writeString(this.image_hash),r.writeFieldEnd()),this.dashboard_metadata!==null&&this.dashboard_metadata!==void 0&&(r.writeFieldBegin("dashboard_metadata",a.Type.STRING,7),r.writeString(this.dashboard_metadata),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Bw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_replace_dashboard_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},A3=class{constructor(r){this.session=null,this.dashboard_id=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.dashboard_id!==void 0&&r.dashboard_id!==null&&(this.dashboard_id=r.dashboard_id))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.I32?this.dashboard_id=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_delete_dashboard_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.dashboard_id!==null&&this.dashboard_id!==void 0&&(r.writeFieldBegin("dashboard_id",a.Type.I32,2),r.writeI32(this.dashboard_id),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},kw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_delete_dashboard_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},N3=class{constructor(r){this.session=null,this.dashboard_ids=null,this.groups=null,this.permissions=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.dashboard_ids!==void 0&&r.dashboard_ids!==null&&(this.dashboard_ids=a.copyList(r.dashboard_ids,[null])),r.groups!==void 0&&r.groups!==null&&(this.groups=a.copyList(r.groups,[null])),r.permissions!==void 0&&r.permissions!==null&&(this.permissions=new l.TDashboardPermissions(r.permissions)))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:if(p==a.Type.LIST){this.dashboard_ids=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readI32(),this.dashboard_ids.push(I)}r.readListEnd()}else r.skip(p);break;case 3:if(p==a.Type.LIST){this.groups=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readString(),this.groups.push(I)}r.readListEnd()}else r.skip(p);break;case 4:p==a.Type.STRUCT?(this.permissions=new l.TDashboardPermissions,this.permissions.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_share_dashboards_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.dashboard_ids!==null&&this.dashboard_ids!==void 0){r.writeFieldBegin("dashboard_ids",a.Type.LIST,2),r.writeListBegin(a.Type.I32,this.dashboard_ids.length);for(let y in this.dashboard_ids)this.dashboard_ids.hasOwnProperty(y)&&(y=this.dashboard_ids[y],r.writeI32(y));r.writeListEnd(),r.writeFieldEnd()}if(this.groups!==null&&this.groups!==void 0){r.writeFieldBegin("groups",a.Type.LIST,3),r.writeListBegin(a.Type.STRING,this.groups.length);for(let y in this.groups)this.groups.hasOwnProperty(y)&&(y=this.groups[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.permissions!==null&&this.permissions!==void 0&&(r.writeFieldBegin("permissions",a.Type.STRUCT,4),this.permissions.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Iw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_share_dashboards_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},C3=class{constructor(r){this.session=null,this.dashboard_ids=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.dashboard_ids!==void 0&&r.dashboard_ids!==null&&(this.dashboard_ids=a.copyList(r.dashboard_ids,[null])))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:if(p==a.Type.LIST){this.dashboard_ids=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readI32(),this.dashboard_ids.push(I)}r.readListEnd()}else r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_delete_dashboards_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.dashboard_ids!==null&&this.dashboard_ids!==void 0){r.writeFieldBegin("dashboard_ids",a.Type.LIST,2),r.writeListBegin(a.Type.I32,this.dashboard_ids.length);for(let y in this.dashboard_ids)this.dashboard_ids.hasOwnProperty(y)&&(y=this.dashboard_ids[y],r.writeI32(y));r.writeListEnd(),r.writeFieldEnd()}r.writeFieldStop(),r.writeStructEnd()}},Fw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_delete_dashboards_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},R3=class{constructor(r){this.session=null,this.dashboard_id=null,this.groups=null,this.objects=null,this.permissions=null,this.grant_role=!1,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.dashboard_id!==void 0&&r.dashboard_id!==null&&(this.dashboard_id=r.dashboard_id),r.groups!==void 0&&r.groups!==null&&(this.groups=a.copyList(r.groups,[null])),r.objects!==void 0&&r.objects!==null&&(this.objects=a.copyList(r.objects,[null])),r.permissions!==void 0&&r.permissions!==null&&(this.permissions=new l.TDashboardPermissions(r.permissions)),r.grant_role!==void 0&&r.grant_role!==null&&(this.grant_role=r.grant_role))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.I32?this.dashboard_id=r.readI32():r.skip(p);break;case 3:if(p==a.Type.LIST){this.groups=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readString(),this.groups.push(I)}r.readListEnd()}else r.skip(p);break;case 4:if(p==a.Type.LIST){this.objects=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readString(),this.objects.push(I)}r.readListEnd()}else r.skip(p);break;case 5:p==a.Type.STRUCT?(this.permissions=new l.TDashboardPermissions,this.permissions.read(r)):r.skip(p);break;case 6:p==a.Type.BOOL?this.grant_role=r.readBool():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_share_dashboard_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.dashboard_id!==null&&this.dashboard_id!==void 0&&(r.writeFieldBegin("dashboard_id",a.Type.I32,2),r.writeI32(this.dashboard_id),r.writeFieldEnd()),this.groups!==null&&this.groups!==void 0){r.writeFieldBegin("groups",a.Type.LIST,3),r.writeListBegin(a.Type.STRING,this.groups.length);for(let y in this.groups)this.groups.hasOwnProperty(y)&&(y=this.groups[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}if(this.objects!==null&&this.objects!==void 0){r.writeFieldBegin("objects",a.Type.LIST,4),r.writeListBegin(a.Type.STRING,this.objects.length);for(let y in this.objects)this.objects.hasOwnProperty(y)&&(y=this.objects[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.permissions!==null&&this.permissions!==void 0&&(r.writeFieldBegin("permissions",a.Type.STRUCT,5),this.permissions.write(r),r.writeFieldEnd()),this.grant_role!==null&&this.grant_role!==void 0&&(r.writeFieldBegin("grant_role",a.Type.BOOL,6),r.writeBool(this.grant_role),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Ow=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_share_dashboard_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},L3=class{constructor(r){this.session=null,this.dashboard_id=null,this.groups=null,this.objects=null,this.permissions=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.dashboard_id!==void 0&&r.dashboard_id!==null&&(this.dashboard_id=r.dashboard_id),r.groups!==void 0&&r.groups!==null&&(this.groups=a.copyList(r.groups,[null])),r.objects!==void 0&&r.objects!==null&&(this.objects=a.copyList(r.objects,[null])),r.permissions!==void 0&&r.permissions!==null&&(this.permissions=new l.TDashboardPermissions(r.permissions)))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.I32?this.dashboard_id=r.readI32():r.skip(p);break;case 3:if(p==a.Type.LIST){this.groups=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readString(),this.groups.push(I)}r.readListEnd()}else r.skip(p);break;case 4:if(p==a.Type.LIST){this.objects=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readString(),this.objects.push(I)}r.readListEnd()}else r.skip(p);break;case 5:p==a.Type.STRUCT?(this.permissions=new l.TDashboardPermissions,this.permissions.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_unshare_dashboard_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.dashboard_id!==null&&this.dashboard_id!==void 0&&(r.writeFieldBegin("dashboard_id",a.Type.I32,2),r.writeI32(this.dashboard_id),r.writeFieldEnd()),this.groups!==null&&this.groups!==void 0){r.writeFieldBegin("groups",a.Type.LIST,3),r.writeListBegin(a.Type.STRING,this.groups.length);for(let y in this.groups)this.groups.hasOwnProperty(y)&&(y=this.groups[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}if(this.objects!==null&&this.objects!==void 0){r.writeFieldBegin("objects",a.Type.LIST,4),r.writeListBegin(a.Type.STRING,this.objects.length);for(let y in this.objects)this.objects.hasOwnProperty(y)&&(y=this.objects[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.permissions!==null&&this.permissions!==void 0&&(r.writeFieldBegin("permissions",a.Type.STRUCT,5),this.permissions.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Mw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_unshare_dashboard_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},P3=class{constructor(r){this.session=null,this.dashboard_ids=null,this.groups=null,this.permissions=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.dashboard_ids!==void 0&&r.dashboard_ids!==null&&(this.dashboard_ids=a.copyList(r.dashboard_ids,[null])),r.groups!==void 0&&r.groups!==null&&(this.groups=a.copyList(r.groups,[null])),r.permissions!==void 0&&r.permissions!==null&&(this.permissions=new l.TDashboardPermissions(r.permissions)))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:if(p==a.Type.LIST){this.dashboard_ids=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readI32(),this.dashboard_ids.push(I)}r.readListEnd()}else r.skip(p);break;case 3:if(p==a.Type.LIST){this.groups=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readString(),this.groups.push(I)}r.readListEnd()}else r.skip(p);break;case 4:p==a.Type.STRUCT?(this.permissions=new l.TDashboardPermissions,this.permissions.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_unshare_dashboards_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.dashboard_ids!==null&&this.dashboard_ids!==void 0){r.writeFieldBegin("dashboard_ids",a.Type.LIST,2),r.writeListBegin(a.Type.I32,this.dashboard_ids.length);for(let y in this.dashboard_ids)this.dashboard_ids.hasOwnProperty(y)&&(y=this.dashboard_ids[y],r.writeI32(y));r.writeListEnd(),r.writeFieldEnd()}if(this.groups!==null&&this.groups!==void 0){r.writeFieldBegin("groups",a.Type.LIST,3),r.writeListBegin(a.Type.STRING,this.groups.length);for(let y in this.groups)this.groups.hasOwnProperty(y)&&(y=this.groups[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.permissions!==null&&this.permissions!==void 0&&(r.writeFieldBegin("permissions",a.Type.STRUCT,4),this.permissions.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Aw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_unshare_dashboards_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},D3=class{constructor(r){this.session=null,this.dashboard_id=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.dashboard_id!==void 0&&r.dashboard_id!==null&&(this.dashboard_id=r.dashboard_id))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.I32?this.dashboard_id=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_dashboard_grantees_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.dashboard_id!==null&&this.dashboard_id!==void 0&&(r.writeFieldBegin("dashboard_id",a.Type.I32,2),r.writeI32(this.dashboard_id),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Nw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[l.TDashboardGrantees])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new l.TDashboardGrantees,I.read(r),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_dashboard_grantees_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRUCT,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},j3=class{constructor(r){this.session=null,this.link=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.link!==void 0&&r.link!==null&&(this.link=r.link))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.link=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_link_view_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.link!==null&&this.link!==void 0&&(r.writeFieldBegin("link",a.Type.STRING,2),r.writeString(this.link),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Cw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TFrontendView(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TFrontendView,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_link_view_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},U3=class{constructor(r){this.session=null,this.view_state=null,this.view_metadata=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.view_state!==void 0&&r.view_state!==null&&(this.view_state=r.view_state),r.view_metadata!==void 0&&r.view_metadata!==null&&(this.view_metadata=r.view_metadata))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.view_state=r.readString():r.skip(p);break;case 3:p==a.Type.STRING?this.view_metadata=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_create_link_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.view_state!==null&&this.view_state!==void 0&&(r.writeFieldBegin("view_state",a.Type.STRING,2),r.writeString(this.view_state),r.writeFieldEnd()),this.view_metadata!==null&&this.view_metadata!==void 0&&(r.writeFieldBegin("view_metadata",a.Type.STRING,3),r.writeString(this.view_metadata),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Rw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=r.success),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRING?this.success=r.readString():r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_create_link_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRING,0),r.writeString(this.success),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},$3=class{constructor(r){this.session=null,this.table_name=null,this.rows=null,this.column_names=[],r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.rows!==void 0&&r.rows!==null&&(this.rows=a.copyList(r.rows,[l.TRow])),r.column_names!==void 0&&r.column_names!==null&&(this.column_names=a.copyList(r.column_names,[null])))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.table_name=r.readString():r.skip(p);break;case 3:if(p==a.Type.LIST){this.rows=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new l.TRow,I.read(r),this.rows.push(I)}r.readListEnd()}else r.skip(p);break;case 4:if(p==a.Type.LIST){this.column_names=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readString(),this.column_names.push(I)}r.readListEnd()}else r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_load_table_binary_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",a.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.rows!==null&&this.rows!==void 0){r.writeFieldBegin("rows",a.Type.LIST,3),r.writeListBegin(a.Type.STRUCT,this.rows.length);for(let y in this.rows)this.rows.hasOwnProperty(y)&&(y=this.rows[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}if(this.column_names!==null&&this.column_names!==void 0){r.writeFieldBegin("column_names",a.Type.LIST,4),r.writeListBegin(a.Type.STRING,this.column_names.length);for(let y in this.column_names)this.column_names.hasOwnProperty(y)&&(y=this.column_names[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}r.writeFieldStop(),r.writeStructEnd()}},Lw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_load_table_binary_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},z3=class{constructor(r){this.session=null,this.table_name=null,this.cols=null,this.column_names=[],r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.cols!==void 0&&r.cols!==null&&(this.cols=a.copyList(r.cols,[l.TColumn])),r.column_names!==void 0&&r.column_names!==null&&(this.column_names=a.copyList(r.column_names,[null])))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.table_name=r.readString():r.skip(p);break;case 3:if(p==a.Type.LIST){this.cols=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new l.TColumn,I.read(r),this.cols.push(I)}r.readListEnd()}else r.skip(p);break;case 4:if(p==a.Type.LIST){this.column_names=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readString(),this.column_names.push(I)}r.readListEnd()}else r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_load_table_binary_columnar_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",a.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.cols!==null&&this.cols!==void 0){r.writeFieldBegin("cols",a.Type.LIST,3),r.writeListBegin(a.Type.STRUCT,this.cols.length);for(let y in this.cols)this.cols.hasOwnProperty(y)&&(y=this.cols[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}if(this.column_names!==null&&this.column_names!==void 0){r.writeFieldBegin("column_names",a.Type.LIST,4),r.writeListBegin(a.Type.STRING,this.column_names.length);for(let y in this.column_names)this.column_names.hasOwnProperty(y)&&(y=this.column_names[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}r.writeFieldStop(),r.writeStructEnd()}},Pw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_load_table_binary_columnar_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},q3=class{constructor(r){this.session=null,this.table_name=null,this.cols=null,this.column_names=[],this.assign_render_groups=!0,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.cols!==void 0&&r.cols!==null&&(this.cols=a.copyList(r.cols,[l.TColumn])),r.column_names!==void 0&&r.column_names!==null&&(this.column_names=a.copyList(r.column_names,[null])),r.assign_render_groups!==void 0&&r.assign_render_groups!==null&&(this.assign_render_groups=r.assign_render_groups))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.table_name=r.readString():r.skip(p);break;case 3:if(p==a.Type.LIST){this.cols=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new l.TColumn,I.read(r),this.cols.push(I)}r.readListEnd()}else r.skip(p);break;case 4:if(p==a.Type.LIST){this.column_names=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readString(),this.column_names.push(I)}r.readListEnd()}else r.skip(p);break;case 5:p==a.Type.BOOL?this.assign_render_groups=r.readBool():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_load_table_binary_columnar_polys_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",a.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.cols!==null&&this.cols!==void 0){r.writeFieldBegin("cols",a.Type.LIST,3),r.writeListBegin(a.Type.STRUCT,this.cols.length);for(let y in this.cols)this.cols.hasOwnProperty(y)&&(y=this.cols[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}if(this.column_names!==null&&this.column_names!==void 0){r.writeFieldBegin("column_names",a.Type.LIST,4),r.writeListBegin(a.Type.STRING,this.column_names.length);for(let y in this.column_names)this.column_names.hasOwnProperty(y)&&(y=this.column_names[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.assign_render_groups!==null&&this.assign_render_groups!==void 0&&(r.writeFieldBegin("assign_render_groups",a.Type.BOOL,5),r.writeBool(this.assign_render_groups),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Dw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_load_table_binary_columnar_polys_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},G3=class{constructor(r){this.session=null,this.table_name=null,this.arrow_stream=null,this.use_column_names=!1,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.arrow_stream!==void 0&&r.arrow_stream!==null&&(this.arrow_stream=r.arrow_stream),r.use_column_names!==void 0&&r.use_column_names!==null&&(this.use_column_names=r.use_column_names))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.table_name=r.readString():r.skip(p);break;case 3:p==a.Type.STRING?this.arrow_stream=r.readBinary():r.skip(p);break;case 4:p==a.Type.BOOL?this.use_column_names=r.readBool():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_load_table_binary_arrow_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",a.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.arrow_stream!==null&&this.arrow_stream!==void 0&&(r.writeFieldBegin("arrow_stream",a.Type.STRING,3),r.writeBinary(this.arrow_stream),r.writeFieldEnd()),this.use_column_names!==null&&this.use_column_names!==void 0&&(r.writeFieldBegin("use_column_names",a.Type.BOOL,4),r.writeBool(this.use_column_names),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},jw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_load_table_binary_arrow_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},V3=class{constructor(r){this.session=null,this.table_name=null,this.rows=null,this.column_names=[],r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.rows!==void 0&&r.rows!==null&&(this.rows=a.copyList(r.rows,[l.TStringRow])),r.column_names!==void 0&&r.column_names!==null&&(this.column_names=a.copyList(r.column_names,[null])))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.table_name=r.readString():r.skip(p);break;case 3:if(p==a.Type.LIST){this.rows=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new l.TStringRow,I.read(r),this.rows.push(I)}r.readListEnd()}else r.skip(p);break;case 4:if(p==a.Type.LIST){this.column_names=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readString(),this.column_names.push(I)}r.readListEnd()}else r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_load_table_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",a.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.rows!==null&&this.rows!==void 0){r.writeFieldBegin("rows",a.Type.LIST,3),r.writeListBegin(a.Type.STRUCT,this.rows.length);for(let y in this.rows)this.rows.hasOwnProperty(y)&&(y=this.rows[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}if(this.column_names!==null&&this.column_names!==void 0){r.writeFieldBegin("column_names",a.Type.LIST,4),r.writeListBegin(a.Type.STRING,this.column_names.length);for(let y in this.column_names)this.column_names.hasOwnProperty(y)&&(y=this.column_names[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}r.writeFieldStop(),r.writeStructEnd()}},Uw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_load_table_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},W3=class{constructor(r){this.session=null,this.file_name=null,this.copy_params=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.file_name!==void 0&&r.file_name!==null&&(this.file_name=r.file_name),r.copy_params!==void 0&&r.copy_params!==null&&(this.copy_params=new l.TCopyParams(r.copy_params)))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.file_name=r.readString():r.skip(p);break;case 3:p==a.Type.STRUCT?(this.copy_params=new l.TCopyParams,this.copy_params.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_detect_column_types_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.file_name!==null&&this.file_name!==void 0&&(r.writeFieldBegin("file_name",a.Type.STRING,2),r.writeString(this.file_name),r.writeFieldEnd()),this.copy_params!==null&&this.copy_params!==void 0&&(r.writeFieldBegin("copy_params",a.Type.STRUCT,3),this.copy_params.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},$w=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TDetectResult(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TDetectResult,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_detect_column_types_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},H3=class{constructor(r){this.session=null,this.table_name=null,this.row_desc=null,this.create_params=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.row_desc!==void 0&&r.row_desc!==null&&(this.row_desc=a.copyList(r.row_desc,[l.TColumnType])),r.create_params!==void 0&&r.create_params!==null&&(this.create_params=new l.TCreateParams(r.create_params)))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.table_name=r.readString():r.skip(p);break;case 3:if(p==a.Type.LIST){this.row_desc=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new l.TColumnType,I.read(r),this.row_desc.push(I)}r.readListEnd()}else r.skip(p);break;case 4:p==a.Type.STRUCT?(this.create_params=new l.TCreateParams,this.create_params.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_create_table_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",a.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.row_desc!==null&&this.row_desc!==void 0){r.writeFieldBegin("row_desc",a.Type.LIST,3),r.writeListBegin(a.Type.STRUCT,this.row_desc.length);for(let y in this.row_desc)this.row_desc.hasOwnProperty(y)&&(y=this.row_desc[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.create_params!==null&&this.create_params!==void 0&&(r.writeFieldBegin("create_params",a.Type.STRUCT,4),this.create_params.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},zw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_create_table_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Y3=class{constructor(r){this.session=null,this.table_name=null,this.file_name=null,this.copy_params=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.file_name!==void 0&&r.file_name!==null&&(this.file_name=r.file_name),r.copy_params!==void 0&&r.copy_params!==null&&(this.copy_params=new l.TCopyParams(r.copy_params)))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.table_name=r.readString():r.skip(p);break;case 3:p==a.Type.STRING?this.file_name=r.readString():r.skip(p);break;case 4:p==a.Type.STRUCT?(this.copy_params=new l.TCopyParams,this.copy_params.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_import_table_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",a.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.file_name!==null&&this.file_name!==void 0&&(r.writeFieldBegin("file_name",a.Type.STRING,3),r.writeString(this.file_name),r.writeFieldEnd()),this.copy_params!==null&&this.copy_params!==void 0&&(r.writeFieldBegin("copy_params",a.Type.STRUCT,4),this.copy_params.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},qw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_import_table_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},X3=class{constructor(r){this.session=null,this.table_name=null,this.file_name=null,this.copy_params=null,this.row_desc=null,this.create_params=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.file_name!==void 0&&r.file_name!==null&&(this.file_name=r.file_name),r.copy_params!==void 0&&r.copy_params!==null&&(this.copy_params=new l.TCopyParams(r.copy_params)),r.row_desc!==void 0&&r.row_desc!==null&&(this.row_desc=a.copyList(r.row_desc,[l.TColumnType])),r.create_params!==void 0&&r.create_params!==null&&(this.create_params=new l.TCreateParams(r.create_params)))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.table_name=r.readString():r.skip(p);break;case 3:p==a.Type.STRING?this.file_name=r.readString():r.skip(p);break;case 4:p==a.Type.STRUCT?(this.copy_params=new l.TCopyParams,this.copy_params.read(r)):r.skip(p);break;case 5:if(p==a.Type.LIST){this.row_desc=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new l.TColumnType,I.read(r),this.row_desc.push(I)}r.readListEnd()}else r.skip(p);break;case 6:p==a.Type.STRUCT?(this.create_params=new l.TCreateParams,this.create_params.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_import_geo_table_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",a.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.file_name!==null&&this.file_name!==void 0&&(r.writeFieldBegin("file_name",a.Type.STRING,3),r.writeString(this.file_name),r.writeFieldEnd()),this.copy_params!==null&&this.copy_params!==void 0&&(r.writeFieldBegin("copy_params",a.Type.STRUCT,4),this.copy_params.write(r),r.writeFieldEnd()),this.row_desc!==null&&this.row_desc!==void 0){r.writeFieldBegin("row_desc",a.Type.LIST,5),r.writeListBegin(a.Type.STRUCT,this.row_desc.length);for(let y in this.row_desc)this.row_desc.hasOwnProperty(y)&&(y=this.row_desc[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.create_params!==null&&this.create_params!==void 0&&(r.writeFieldBegin("create_params",a.Type.STRUCT,6),this.create_params.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Gw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_import_geo_table_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},K3=class{constructor(r){this.session=null,this.import_id=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.import_id!==void 0&&r.import_id!==null&&(this.import_id=r.import_id))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.import_id=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_import_table_status_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.import_id!==null&&this.import_id!==void 0&&(r.writeFieldBegin("import_id",a.Type.STRING,2),r.writeString(this.import_id),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Vw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TImportStatus(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TImportStatus,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_import_table_status_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},J3=class{constructor(r){this.session=null,this.archive_path=null,this.copy_params=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.archive_path!==void 0&&r.archive_path!==null&&(this.archive_path=r.archive_path),r.copy_params!==void 0&&r.copy_params!==null&&(this.copy_params=new l.TCopyParams(r.copy_params)))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.archive_path=r.readString():r.skip(p);break;case 3:p==a.Type.STRUCT?(this.copy_params=new l.TCopyParams,this.copy_params.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_first_geo_file_in_archive_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.archive_path!==null&&this.archive_path!==void 0&&(r.writeFieldBegin("archive_path",a.Type.STRING,2),r.writeString(this.archive_path),r.writeFieldEnd()),this.copy_params!==null&&this.copy_params!==void 0&&(r.writeFieldBegin("copy_params",a.Type.STRUCT,3),this.copy_params.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Ww=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=r.success),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRING?this.success=r.readString():r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_first_geo_file_in_archive_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRING,0),r.writeString(this.success),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Q3=class{constructor(r){this.session=null,this.archive_path=null,this.copy_params=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.archive_path!==void 0&&r.archive_path!==null&&(this.archive_path=r.archive_path),r.copy_params!==void 0&&r.copy_params!==null&&(this.copy_params=new l.TCopyParams(r.copy_params)))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.archive_path=r.readString():r.skip(p);break;case 3:p==a.Type.STRUCT?(this.copy_params=new l.TCopyParams,this.copy_params.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_all_files_in_archive_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.archive_path!==null&&this.archive_path!==void 0&&(r.writeFieldBegin("archive_path",a.Type.STRING,2),r.writeString(this.archive_path),r.writeFieldEnd()),this.copy_params!==null&&this.copy_params!==void 0&&(r.writeFieldBegin("copy_params",a.Type.STRUCT,3),this.copy_params.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Hw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readString(),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_all_files_in_archive_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRING,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Z3=class{constructor(r){this.session=null,this.file_name=null,this.copy_params=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.file_name!==void 0&&r.file_name!==null&&(this.file_name=r.file_name),r.copy_params!==void 0&&r.copy_params!==null&&(this.copy_params=new l.TCopyParams(r.copy_params)))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.file_name=r.readString():r.skip(p);break;case 3:p==a.Type.STRUCT?(this.copy_params=new l.TCopyParams,this.copy_params.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_layers_in_geo_file_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.file_name!==null&&this.file_name!==void 0&&(r.writeFieldBegin("file_name",a.Type.STRING,2),r.writeString(this.file_name),r.writeFieldEnd()),this.copy_params!==null&&this.copy_params!==void 0&&(r.writeFieldBegin("copy_params",a.Type.STRUCT,3),this.copy_params.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Yw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[l.TGeoFileLayerInfo])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new l.TGeoFileLayerInfo,I.read(r),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_layers_in_geo_file_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRUCT,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},eL=class{constructor(r){this.session=null,this.query=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.query!==void 0&&r.query!==null&&(this.query=r.query))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.query=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_query_get_outer_fragment_count_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.query!==null&&this.query!==void 0&&(r.writeFieldBegin("query",a.Type.STRING,2),r.writeString(this.query),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Xw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=r.success),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.I64?this.success=r.readI64():r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_query_get_outer_fragment_count_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.I64,0),r.writeI64(this.success),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},tL=class{constructor(r){this.session=null,this.table_id=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_id!==void 0&&r.table_id!==null&&(this.table_id=r.table_id))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.I32?this.table_id=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_check_table_consistency_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0&&(r.writeFieldBegin("table_id",a.Type.I32,2),r.writeI32(this.table_id),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Kw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TTableMeta(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TTableMeta,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_check_table_consistency_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},nL=class{constructor(r){this.leaf_session=null,this.parent_session=null,this.query_ra=null,this.start_time_str=null,this.just_explain=null,this.outer_fragment_indices=null,r&&(r.leaf_session!==void 0&&r.leaf_session!==null&&(this.leaf_session=r.leaf_session),r.parent_session!==void 0&&r.parent_session!==null&&(this.parent_session=r.parent_session),r.query_ra!==void 0&&r.query_ra!==null&&(this.query_ra=r.query_ra),r.start_time_str!==void 0&&r.start_time_str!==null&&(this.start_time_str=r.start_time_str),r.just_explain!==void 0&&r.just_explain!==null&&(this.just_explain=r.just_explain),r.outer_fragment_indices!==void 0&&r.outer_fragment_indices!==null&&(this.outer_fragment_indices=a.copyList(r.outer_fragment_indices,[null])))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.leaf_session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.parent_session=r.readString():r.skip(p);break;case 3:p==a.Type.STRING?this.query_ra=r.readString():r.skip(p);break;case 4:p==a.Type.STRING?this.start_time_str=r.readString():r.skip(p);break;case 5:p==a.Type.BOOL?this.just_explain=r.readBool():r.skip(p);break;case 6:if(p==a.Type.LIST){this.outer_fragment_indices=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readI64(),this.outer_fragment_indices.push(I)}r.readListEnd()}else r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_start_query_args"),this.leaf_session!==null&&this.leaf_session!==void 0&&(r.writeFieldBegin("leaf_session",a.Type.STRING,1),r.writeString(this.leaf_session),r.writeFieldEnd()),this.parent_session!==null&&this.parent_session!==void 0&&(r.writeFieldBegin("parent_session",a.Type.STRING,2),r.writeString(this.parent_session),r.writeFieldEnd()),this.query_ra!==null&&this.query_ra!==void 0&&(r.writeFieldBegin("query_ra",a.Type.STRING,3),r.writeString(this.query_ra),r.writeFieldEnd()),this.start_time_str!==null&&this.start_time_str!==void 0&&(r.writeFieldBegin("start_time_str",a.Type.STRING,4),r.writeString(this.start_time_str),r.writeFieldEnd()),this.just_explain!==null&&this.just_explain!==void 0&&(r.writeFieldBegin("just_explain",a.Type.BOOL,5),r.writeBool(this.just_explain),r.writeFieldEnd()),this.outer_fragment_indices!==null&&this.outer_fragment_indices!==void 0){r.writeFieldBegin("outer_fragment_indices",a.Type.LIST,6),r.writeListBegin(a.Type.I64,this.outer_fragment_indices.length);for(let y in this.outer_fragment_indices)this.outer_fragment_indices.hasOwnProperty(y)&&(y=this.outer_fragment_indices[y],r.writeI64(y));r.writeListEnd(),r.writeFieldEnd()}r.writeFieldStop(),r.writeStructEnd()}},Jw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TPendingQuery(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TPendingQuery,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_start_query_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},iL=class{constructor(r){this.pending_query=null,this.subquery_id=null,this.start_time_str=null,r&&(r.pending_query!==void 0&&r.pending_query!==null&&(this.pending_query=new l.TPendingQuery(r.pending_query)),r.subquery_id!==void 0&&r.subquery_id!==null&&(this.subquery_id=r.subquery_id),r.start_time_str!==void 0&&r.start_time_str!==null&&(this.start_time_str=r.start_time_str))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.pending_query=new l.TPendingQuery,this.pending_query.read(r)):r.skip(p);break;case 2:p==a.Type.I64?this.subquery_id=r.readI64():r.skip(p);break;case 3:p==a.Type.STRING?this.start_time_str=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_execute_query_step_args"),this.pending_query!==null&&this.pending_query!==void 0&&(r.writeFieldBegin("pending_query",a.Type.STRUCT,1),this.pending_query.write(r),r.writeFieldEnd()),this.subquery_id!==null&&this.subquery_id!==void 0&&(r.writeFieldBegin("subquery_id",a.Type.I64,2),r.writeI64(this.subquery_id),r.writeFieldEnd()),this.start_time_str!==null&&this.start_time_str!==void 0&&(r.writeFieldBegin("start_time_str",a.Type.STRING,3),r.writeString(this.start_time_str),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Qw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TStepResult(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TStepResult,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_execute_query_step_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},sL=class{constructor(r){this.serialized_rows=null,this.row_desc=null,this.query_id=null,this.subquery_id=null,this.is_final_subquery_result=null,r&&(r.serialized_rows!==void 0&&r.serialized_rows!==null&&(this.serialized_rows=new w.TSerializedRows(r.serialized_rows)),r.row_desc!==void 0&&r.row_desc!==null&&(this.row_desc=a.copyList(r.row_desc,[l.TColumnType])),r.query_id!==void 0&&r.query_id!==null&&(this.query_id=r.query_id),r.subquery_id!==void 0&&r.subquery_id!==null&&(this.subquery_id=r.subquery_id),r.is_final_subquery_result!==void 0&&r.is_final_subquery_result!==null&&(this.is_final_subquery_result=r.is_final_subquery_result))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.serialized_rows=new w.TSerializedRows,this.serialized_rows.read(r)):r.skip(p);break;case 2:if(p==a.Type.LIST){this.row_desc=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new l.TColumnType,I.read(r),this.row_desc.push(I)}r.readListEnd()}else r.skip(p);break;case 3:p==a.Type.I64?this.query_id=r.readI64():r.skip(p);break;case 4:p==a.Type.I64?this.subquery_id=r.readI64():r.skip(p);break;case 5:p==a.Type.BOOL?this.is_final_subquery_result=r.readBool():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_broadcast_serialized_rows_args"),this.serialized_rows!==null&&this.serialized_rows!==void 0&&(r.writeFieldBegin("serialized_rows",a.Type.STRUCT,1),this.serialized_rows.write(r),r.writeFieldEnd()),this.row_desc!==null&&this.row_desc!==void 0){r.writeFieldBegin("row_desc",a.Type.LIST,2),r.writeListBegin(a.Type.STRUCT,this.row_desc.length);for(let y in this.row_desc)this.row_desc.hasOwnProperty(y)&&(y=this.row_desc[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.query_id!==null&&this.query_id!==void 0&&(r.writeFieldBegin("query_id",a.Type.I64,3),r.writeI64(this.query_id),r.writeFieldEnd()),this.subquery_id!==null&&this.subquery_id!==void 0&&(r.writeFieldBegin("subquery_id",a.Type.I64,4),r.writeI64(this.subquery_id),r.writeFieldEnd()),this.is_final_subquery_result!==null&&this.is_final_subquery_result!==void 0&&(r.writeFieldBegin("is_final_subquery_result",a.Type.BOOL,5),r.writeBool(this.is_final_subquery_result),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Zw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_broadcast_serialized_rows_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},rL=class{constructor(r){this.session=null,this.widget_id=null,this.node_idx=null,this.vega_json=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.widget_id!==void 0&&r.widget_id!==null&&(this.widget_id=r.widget_id),r.node_idx!==void 0&&r.node_idx!==null&&(this.node_idx=r.node_idx),r.vega_json!==void 0&&r.vega_json!==null&&(this.vega_json=r.vega_json))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.I64?this.widget_id=r.readI64():r.skip(p);break;case 3:p==a.Type.I16?this.node_idx=r.readI16():r.skip(p);break;case 4:p==a.Type.STRING?this.vega_json=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_start_render_query_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.widget_id!==null&&this.widget_id!==void 0&&(r.writeFieldBegin("widget_id",a.Type.I64,2),r.writeI64(this.widget_id),r.writeFieldEnd()),this.node_idx!==null&&this.node_idx!==void 0&&(r.writeFieldBegin("node_idx",a.Type.I16,3),r.writeI16(this.node_idx),r.writeFieldEnd()),this.vega_json!==null&&this.vega_json!==void 0&&(r.writeFieldBegin("vega_json",a.Type.STRING,4),r.writeString(this.vega_json),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},eb=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TPendingRenderQuery(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TPendingRenderQuery,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_start_render_query_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},aL=class{constructor(r){this.pending_render=null,this.merged_data=null,r&&(r.pending_render!==void 0&&r.pending_render!==null&&(this.pending_render=new l.TPendingRenderQuery(r.pending_render)),r.merged_data!==void 0&&r.merged_data!==null&&(this.merged_data=a.copyMap(r.merged_data,[a.copyMap,a.copyMap,a.copyMap,a.copyList,l.TRenderDatum])))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.pending_render=new l.TPendingRenderQuery,this.pending_render.read(r)):r.skip(p);break;case 2:if(p==a.Type.MAP){this.merged_data={};const g=r.readMapBegin().size||0;for(let E=0;E<g;++E){let I=null,ee=null;I=r.readString(),ee={};const Ve=r.readMapBegin().size||0;for(let wn=0;wn<Ve;++wn){let gl=null,tx=null;gl=r.readString(),tx={};const RQ=r.readMapBegin().size||0;for(let SL=0;SL<RQ;++SL){let xL=null,nx=null;xL=r.readString(),nx={};const LQ=r.readMapBegin().size||0;for(let BL=0;BL<LQ;++BL){let kL=null,ix=null;kL=r.readString(),ix=[];const PQ=r.readListBegin().size||0;for(let IL=0;IL<PQ;++IL){let sx=null;sx=new l.TRenderDatum,sx.read(r),ix.push(sx)}r.readListEnd(),nx[kL]=ix}r.readMapEnd(),tx[xL]=nx}r.readMapEnd(),ee[gl]=tx}r.readMapEnd(),this.merged_data[I]=ee}r.readMapEnd()}else r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_execute_next_render_step_args"),this.pending_render!==null&&this.pending_render!==void 0&&(r.writeFieldBegin("pending_render",a.Type.STRUCT,1),this.pending_render.write(r),r.writeFieldEnd()),this.merged_data!==null&&this.merged_data!==void 0){r.writeFieldBegin("merged_data",a.Type.MAP,2),r.writeMapBegin(a.Type.STRING,a.Type.MAP,a.objectLength(this.merged_data));for(let y in this.merged_data)if(this.merged_data.hasOwnProperty(y)){let p=this.merged_data[y];r.writeString(y),r.writeMapBegin(a.Type.STRING,a.Type.MAP,a.objectLength(p));for(let h in p)if(p.hasOwnProperty(h)){let v=p[h];r.writeString(h),r.writeMapBegin(a.Type.STRING,a.Type.MAP,a.objectLength(v));for(let g in v)if(v.hasOwnProperty(g)){let E=v[g];r.writeString(g),r.writeMapBegin(a.Type.STRING,a.Type.LIST,a.objectLength(E));for(let I in E)if(E.hasOwnProperty(I)){let ee=E[I];r.writeString(I),r.writeListBegin(a.Type.STRUCT,ee.length);for(let me in ee)ee.hasOwnProperty(me)&&(me=ee[me],me.write(r));r.writeListEnd()}r.writeMapEnd()}r.writeMapEnd()}r.writeMapEnd()}r.writeMapEnd(),r.writeFieldEnd()}r.writeFieldStop(),r.writeStructEnd()}},tb=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TRenderStepResult(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TRenderStepResult,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_execute_next_render_step_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},oL=class{constructor(r){this.session=null,this.insert_data=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.insert_data!==void 0&&r.insert_data!==null&&(this.insert_data=new l.TInsertData(r.insert_data)))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRUCT?(this.insert_data=new l.TInsertData,this.insert_data.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_insert_data_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.insert_data!==null&&this.insert_data!==void 0&&(r.writeFieldBegin("insert_data",a.Type.STRUCT,2),this.insert_data.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},nb=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_insert_data_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},lL=class{constructor(r){this.session=null,this.insert_chunks=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.insert_chunks!==void 0&&r.insert_chunks!==null&&(this.insert_chunks=new l.TInsertChunks(r.insert_chunks)))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRUCT?(this.insert_chunks=new l.TInsertChunks,this.insert_chunks.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_insert_chunks_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.insert_chunks!==null&&this.insert_chunks!==void 0&&(r.writeFieldBegin("insert_chunks",a.Type.STRUCT,2),this.insert_chunks.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ib=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_insert_chunks_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},cL=class{constructor(r){this.session=null,this.table_id=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_id!==void 0&&r.table_id!==null&&(this.table_id=r.table_id))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.I32?this.table_id=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_checkpoint_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0&&(r.writeFieldBegin("table_id",a.Type.I32,2),r.writeI32(this.table_id),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},sb=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_checkpoint_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},dL=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_roles_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},rb=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readString(),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_roles_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRING,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},fL=class{constructor(r){this.session=null,this.roleName=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.roleName!==void 0&&r.roleName!==null&&(this.roleName=r.roleName))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.roleName=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_db_objects_for_grantee_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.roleName!==null&&this.roleName!==void 0&&(r.writeFieldBegin("roleName",a.Type.STRING,2),r.writeString(this.roleName),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ab=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[l.TDBObject])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new l.TDBObject,I.read(r),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_db_objects_for_grantee_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRUCT,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},uL=class{constructor(r){this.session=null,this.objectName=null,this.type=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.objectName!==void 0&&r.objectName!==null&&(this.objectName=r.objectName),r.type!==void 0&&r.type!==null&&(this.type=r.type))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.objectName=r.readString():r.skip(p);break;case 3:p==a.Type.I32?this.type=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_db_object_privs_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.objectName!==null&&this.objectName!==void 0&&(r.writeFieldBegin("objectName",a.Type.STRING,2),r.writeString(this.objectName),r.writeFieldEnd()),this.type!==null&&this.type!==void 0&&(r.writeFieldBegin("type",a.Type.I32,3),r.writeI32(this.type),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ob=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[l.TDBObject])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new l.TDBObject,I.read(r),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_db_object_privs_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRUCT,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},hL=class{constructor(r){this.session=null,this.userName=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.userName!==void 0&&r.userName!==null&&(this.userName=r.userName))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.userName=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_all_roles_for_user_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.userName!==null&&this.userName!==void 0&&(r.writeFieldBegin("userName",a.Type.STRING,2),r.writeString(this.userName),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},lb=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readString(),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_all_roles_for_user_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRING,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},pL=class{constructor(r){this.session=null,this.userName=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.userName!==void 0&&r.userName!==null&&(this.userName=r.userName))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.userName=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_all_effective_roles_for_user_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.userName!==null&&this.userName!==void 0&&(r.writeFieldBegin("userName",a.Type.STRING,2),r.writeString(this.userName),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},cb=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readString(),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_all_effective_roles_for_user_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRING,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},gL=class{constructor(r){this.session=null,this.granteeName=null,this.roleName=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.granteeName!==void 0&&r.granteeName!==null&&(this.granteeName=r.granteeName),r.roleName!==void 0&&r.roleName!==null&&(this.roleName=r.roleName))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.granteeName=r.readString():r.skip(p);break;case 3:p==a.Type.STRING?this.roleName=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_has_role_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.granteeName!==null&&this.granteeName!==void 0&&(r.writeFieldBegin("granteeName",a.Type.STRING,2),r.writeString(this.granteeName),r.writeFieldEnd()),this.roleName!==null&&this.roleName!==void 0&&(r.writeFieldBegin("roleName",a.Type.STRING,3),r.writeString(this.roleName),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},db=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=r.success),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.BOOL?this.success=r.readBool():r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_has_role_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.BOOL,0),r.writeBool(this.success),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},_L=class{constructor(r){this.session=null,this.granteeName=null,this.ObjectName=null,this.objectType=null,this.permissions=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.granteeName!==void 0&&r.granteeName!==null&&(this.granteeName=r.granteeName),r.ObjectName!==void 0&&r.ObjectName!==null&&(this.ObjectName=r.ObjectName),r.objectType!==void 0&&r.objectType!==null&&(this.objectType=r.objectType),r.permissions!==void 0&&r.permissions!==null&&(this.permissions=new l.TDBObjectPermissions(r.permissions)))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.granteeName=r.readString():r.skip(p);break;case 3:p==a.Type.STRING?this.ObjectName=r.readString():r.skip(p);break;case 4:p==a.Type.I32?this.objectType=r.readI32():r.skip(p);break;case 5:p==a.Type.STRUCT?(this.permissions=new l.TDBObjectPermissions,this.permissions.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_has_object_privilege_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.granteeName!==null&&this.granteeName!==void 0&&(r.writeFieldBegin("granteeName",a.Type.STRING,2),r.writeString(this.granteeName),r.writeFieldEnd()),this.ObjectName!==null&&this.ObjectName!==void 0&&(r.writeFieldBegin("ObjectName",a.Type.STRING,3),r.writeString(this.ObjectName),r.writeFieldEnd()),this.objectType!==null&&this.objectType!==void 0&&(r.writeFieldBegin("objectType",a.Type.I32,4),r.writeI32(this.objectType),r.writeFieldEnd()),this.permissions!==null&&this.permissions!==void 0&&(r.writeFieldBegin("permissions",a.Type.STRUCT,5),this.permissions.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},fb=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=r.success),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.BOOL?this.success=r.readBool():r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_has_object_privilege_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.BOOL,0),r.writeBool(this.success),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},yL=class{constructor(r){this.session=null,this.key=null,this.nonce="",r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.key!==void 0&&r.key!==null&&(this.key=r.key),r.nonce!==void 0&&r.nonce!==null&&(this.nonce=r.nonce))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.key=r.readString():r.skip(p);break;case 3:p==a.Type.STRING?this.nonce=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_license_key_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.key!==null&&this.key!==void 0&&(r.writeFieldBegin("key",a.Type.STRING,2),r.writeString(this.key),r.writeFieldEnd()),this.nonce!==null&&this.nonce!==void 0&&(r.writeFieldBegin("nonce",a.Type.STRING,3),r.writeString(this.nonce),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ub=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TLicenseInfo(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TLicenseInfo,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_license_key_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},mL=class{constructor(r){this.session=null,this.nonce="",r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.nonce!==void 0&&r.nonce!==null&&(this.nonce=r.nonce))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==a.Type.STRING?this.nonce=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_license_claims_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.nonce!==null&&this.nonce!==void 0&&(r.writeFieldBegin("nonce",a.Type.STRING,2),r.writeString(this.nonce),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},hb=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TLicenseInfo(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:p==a.Type.STRUCT?(this.success=new l.TLicenseInfo,this.success.read(r)):r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_license_claims_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",a.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},wL=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_device_parameters_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},pb=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyMap(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.MAP){this.success={};const g=r.readMapBegin().size||0;for(let E=0;E<g;++E){let I=null,ee=null;I=r.readString(),ee=r.readString(),this.success[I]=ee}r.readMapEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_device_parameters_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.MAP,0),r.writeMapBegin(a.Type.STRING,a.Type.STRING,a.objectLength(this.success));for(let y in this.success)if(this.success.hasOwnProperty(y)){let p=this.success[y];r.writeString(y),r.writeString(p)}r.writeMapEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},bL=class{constructor(r){this.session=null,this.udfs=null,this.udtfs=null,this.device_ir_map=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.udfs!==void 0&&r.udfs!==null&&(this.udfs=a.copyList(r.udfs,[m.TUserDefinedFunction])),r.udtfs!==void 0&&r.udtfs!==null&&(this.udtfs=a.copyList(r.udtfs,[m.TUserDefinedTableFunction])),r.device_ir_map!==void 0&&r.device_ir_map!==null&&(this.device_ir_map=a.copyMap(r.device_ir_map,[null])))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:if(p==a.Type.LIST){this.udfs=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new m.TUserDefinedFunction,I.read(r),this.udfs.push(I)}r.readListEnd()}else r.skip(p);break;case 3:if(p==a.Type.LIST){this.udtfs=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new m.TUserDefinedTableFunction,I.read(r),this.udtfs.push(I)}r.readListEnd()}else r.skip(p);break;case 4:if(p==a.Type.MAP){this.device_ir_map={};const g=r.readMapBegin().size||0;for(let E=0;E<g;++E){let I=null,ee=null;I=r.readString(),ee=r.readString(),this.device_ir_map[I]=ee}r.readMapEnd()}else r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_register_runtime_extension_functions_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.udfs!==null&&this.udfs!==void 0){r.writeFieldBegin("udfs",a.Type.LIST,2),r.writeListBegin(a.Type.STRUCT,this.udfs.length);for(let y in this.udfs)this.udfs.hasOwnProperty(y)&&(y=this.udfs[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}if(this.udtfs!==null&&this.udtfs!==void 0){r.writeFieldBegin("udtfs",a.Type.LIST,3),r.writeListBegin(a.Type.STRUCT,this.udtfs.length);for(let y in this.udtfs)this.udtfs.hasOwnProperty(y)&&(y=this.udtfs[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}if(this.device_ir_map!==null&&this.device_ir_map!==void 0){r.writeFieldBegin("device_ir_map",a.Type.MAP,4),r.writeMapBegin(a.Type.STRING,a.Type.STRING,a.objectLength(this.device_ir_map));for(let y in this.device_ir_map)if(this.device_ir_map.hasOwnProperty(y)){let p=this.device_ir_map[y];r.writeString(y),r.writeString(p)}r.writeMapEnd(),r.writeFieldEnd()}r.writeFieldStop(),r.writeStructEnd()}},gb=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_register_runtime_extension_functions_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},TL=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_table_function_names_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},_b=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readString(),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_table_function_names_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRING,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},vL=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_runtime_table_function_names_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},yb=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readString(),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_runtime_table_function_names_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRING,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},EL=class{constructor(r){this.session=null,this.udtf_names=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.udtf_names!==void 0&&r.udtf_names!==null&&(this.udtf_names=a.copyList(r.udtf_names,[null])))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 1:p==a.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:if(p==a.Type.LIST){this.udtf_names=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=r.readString(),this.udtf_names.push(I)}r.readListEnd()}else r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_table_function_details_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",a.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.udtf_names!==null&&this.udtf_names!==void 0){r.writeFieldBegin("udtf_names",a.Type.LIST,2),r.writeListBegin(a.Type.STRING,this.udtf_names.length);for(let y in this.udtf_names)this.udtf_names.hasOwnProperty(y)&&(y=this.udtf_names[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}r.writeFieldStop(),r.writeStructEnd()}},mb=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=a.copyList(r.success,[m.TUserDefinedTableFunction])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==a.Type.STOP)break;switch(h){case 0:if(p==a.Type.LIST){this.success=[];const g=r.readListBegin().size||0;for(let E=0;E<g;++E){let I=null;I=new m.TUserDefinedTableFunction,I.read(r),this.success.push(I)}r.readListEnd()}else r.skip(p);break;case 1:p==a.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_table_function_details_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",a.Type.LIST,0),r.writeListBegin(a.Type.STRUCT,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",a.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}};d.Client=class{constructor(y,p){this.output=y,this.pClass=p,this._seqid=0,this._reqs={}}seqid(){return this._seqid}new_seqid(){return this._seqid+=1}connect(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((g,E)=>{v._reqs[v.seqid()]=(I,ee)=>I?E(I):g(ee),v.send_connect(y,p,h)})}send_connect(y,p,h){const v=new this.pClass(this.output),g={user:y,passwd:p,dbname:h},E=new T(g);try{return v.writeMessageBegin("connect",a.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(I){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),I}}recv_connect(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new b;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("connect failed: unknown result")}krb5_connect(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_krb5_connect(y,p)})}send_krb5_connect(y,p){const h=new this.pClass(this.output),v={inputToken:y,dbname:p},g=new S(v);try{return h.writeMessageBegin("krb5_connect",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_krb5_connect(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new x;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("krb5_connect failed: unknown result")}disconnect(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_disconnect(y)})}send_disconnect(y){const p=new this.pClass(this.output),h={session:y},v=new B(h);try{return p.writeMessageBegin("disconnect",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_disconnect(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new F;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}switch_database(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_switch_database(y,p)})}send_switch_database(y,p){const h=new this.pClass(this.output),v={session:y,dbname:p},g=new k(v);try{return h.writeMessageBegin("switch_database",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_switch_database(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new M;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}clone_session(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_clone_session(y)})}send_clone_session(y){const p=new this.pClass(this.output),h={session:y},v=new A(h);try{return p.writeMessageBegin("clone_session",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_clone_session(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new R;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("clone_session failed: unknown result")}get_server_status(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_get_server_status(y)})}send_get_server_status(y){const p=new this.pClass(this.output),h={session:y},v=new P(h);try{return p.writeMessageBegin("get_server_status",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_get_server_status(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new j;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_server_status failed: unknown result")}get_status(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_get_status(y)})}send_get_status(y){const p=new this.pClass(this.output),h={session:y},v=new D(h);try{return p.writeMessageBegin("get_status",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_get_status(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new z;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_status failed: unknown result")}get_hardware_info(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_get_hardware_info(y)})}send_get_hardware_info(y){const p=new this.pClass(this.output),h={session:y},v=new $(h);try{return p.writeMessageBegin("get_hardware_info",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_get_hardware_info(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Y;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_hardware_info failed: unknown result")}get_tables(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_get_tables(y)})}send_get_tables(y){const p=new this.pClass(this.output),h={session:y},v=new W(h);try{return p.writeMessageBegin("get_tables",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_get_tables(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new H;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_tables failed: unknown result")}get_tables_for_database(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_get_tables_for_database(y,p)})}send_get_tables_for_database(y,p){const h=new this.pClass(this.output),v={session:y,database_name:p},g=new J(v);try{return h.writeMessageBegin("get_tables_for_database",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_get_tables_for_database(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new V;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_tables_for_database failed: unknown result")}get_physical_tables(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_get_physical_tables(y)})}send_get_physical_tables(y){const p=new this.pClass(this.output),h={session:y},v=new le(h);try{return p.writeMessageBegin("get_physical_tables",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_get_physical_tables(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new pe;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_physical_tables failed: unknown result")}get_views(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_get_views(y)})}send_get_views(y){const p=new this.pClass(this.output),h={session:y},v=new se(h);try{return p.writeMessageBegin("get_views",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_get_views(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Ne;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_views failed: unknown result")}get_tables_meta(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_get_tables_meta(y)})}send_get_tables_meta(y){const p=new this.pClass(this.output),h={session:y},v=new fe(h);try{return p.writeMessageBegin("get_tables_meta",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_get_tables_meta(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Ce;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_tables_meta failed: unknown result")}get_table_details(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_get_table_details(y,p)})}send_get_table_details(y,p){const h=new this.pClass(this.output),v={session:y,table_name:p},g=new Me(v);try{return h.writeMessageBegin("get_table_details",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_get_table_details(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new He;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_table_details failed: unknown result")}get_table_details_for_database(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((g,E)=>{v._reqs[v.seqid()]=(I,ee)=>I?E(I):g(ee),v.send_get_table_details_for_database(y,p,h)})}send_get_table_details_for_database(y,p,h){const v=new this.pClass(this.output),g={session:y,table_name:p,database_name:h},E=new Bt(g);try{return v.writeMessageBegin("get_table_details_for_database",a.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(I){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),I}}recv_get_table_details_for_database(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new vt;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_table_details_for_database failed: unknown result")}get_internal_table_details(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((g,E)=>{v._reqs[v.seqid()]=(I,ee)=>I?E(I):g(ee),v.send_get_internal_table_details(y,p,h)})}send_get_internal_table_details(y,p,h){const v=new this.pClass(this.output),g={session:y,table_name:p,include_system_columns:h},E=new ge(g);try{return v.writeMessageBegin("get_internal_table_details",a.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(I){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),I}}recv_get_internal_table_details(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new G;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_internal_table_details failed: unknown result")}get_internal_table_details_for_database(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((g,E)=>{v._reqs[v.seqid()]=(I,ee)=>I?E(I):g(ee),v.send_get_internal_table_details_for_database(y,p,h)})}send_get_internal_table_details_for_database(y,p,h){const v=new this.pClass(this.output),g={session:y,table_name:p,database_name:h},E=new q(g);try{return v.writeMessageBegin("get_internal_table_details_for_database",a.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(I){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),I}}recv_get_internal_table_details_for_database(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new L;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_internal_table_details_for_database failed: unknown result")}get_users(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_get_users(y)})}send_get_users(y){const p=new this.pClass(this.output),h={session:y},v=new X(h);try{return p.writeMessageBegin("get_users",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_get_users(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Z;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_users failed: unknown result")}get_databases(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_get_databases(y)})}send_get_databases(y){const p=new this.pClass(this.output),h={session:y},v=new ae(h);try{return p.writeMessageBegin("get_databases",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_get_databases(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new re;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_databases failed: unknown result")}get_version(){this._seqid=this.new_seqid();const y=this;return new Promise((p,h)=>{y._reqs[y.seqid()]=(v,g)=>v?h(v):p(g),y.send_get_version()})}send_get_version(){const y=new this.pClass(this.output),p=new _e;try{return y.writeMessageBegin("get_version",a.MessageType.CALL,this.seqid()),p.write(y),y.writeMessageEnd(),this.output.flush()}catch(h){throw delete this._reqs[this.seqid()],typeof y.reset=="function"&&y.reset(),h}}recv_get_version(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Ee;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_version failed: unknown result")}start_heap_profile(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_start_heap_profile(y)})}send_start_heap_profile(y){const p=new this.pClass(this.output),h={session:y},v=new Je(h);try{return p.writeMessageBegin("start_heap_profile",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_start_heap_profile(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new zt;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}stop_heap_profile(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_stop_heap_profile(y)})}send_stop_heap_profile(y){const p=new this.pClass(this.output),h={session:y},v=new At(h);try{return p.writeMessageBegin("stop_heap_profile",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_stop_heap_profile(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new et;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}get_heap_profile(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_get_heap_profile(y)})}send_get_heap_profile(y){const p=new this.pClass(this.output),h={session:y},v=new un(h);try{return p.writeMessageBegin("get_heap_profile",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_get_heap_profile(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Gn;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_heap_profile failed: unknown result")}get_memory(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_get_memory(y,p)})}send_get_memory(y,p){const h=new this.pClass(this.output),v={session:y,memory_level:p},g=new bs(v);try{return h.writeMessageBegin("get_memory",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_get_memory(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new ue;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_memory failed: unknown result")}clear_cpu_memory(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_clear_cpu_memory(y)})}send_clear_cpu_memory(y){const p=new this.pClass(this.output),h={session:y},v=new Fi(h);try{return p.writeMessageBegin("clear_cpu_memory",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_clear_cpu_memory(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new oi;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}clear_gpu_memory(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_clear_gpu_memory(y)})}send_clear_gpu_memory(y){const p=new this.pClass(this.output),h={session:y},v=new ia(h);try{return p.writeMessageBegin("clear_gpu_memory",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_clear_gpu_memory(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new En;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}set_cur_session(y,p,h,v,g){this._seqid=this.new_seqid();const E=this;return new Promise((I,ee)=>{E._reqs[E.seqid()]=(me,Ve)=>me?ee(me):I(Ve),E.send_set_cur_session(y,p,h,v,g)})}send_set_cur_session(y,p,h,v,g){const E=new this.pClass(this.output),I={parent_session:y,leaf_session:p,start_time_str:h,label:v,for_running_query_kernel:g},ee=new hc(I);try{return E.writeMessageBegin("set_cur_session",a.MessageType.CALL,this.seqid()),ee.write(E),E.writeMessageEnd(),this.output.flush()}catch(me){throw delete this._reqs[this.seqid()],typeof E.reset=="function"&&E.reset(),me}}recv_set_cur_session(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new pc;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}invalidate_cur_session(y,p,h,v,g){this._seqid=this.new_seqid();const E=this;return new Promise((I,ee)=>{E._reqs[E.seqid()]=(me,Ve)=>me?ee(me):I(Ve),E.send_invalidate_cur_session(y,p,h,v,g)})}send_invalidate_cur_session(y,p,h,v,g){const E=new this.pClass(this.output),I={parent_session:y,leaf_session:p,start_time_str:h,label:v,for_running_query_kernel:g},ee=new tr(I);try{return E.writeMessageBegin("invalidate_cur_session",a.MessageType.CALL,this.seqid()),ee.write(E),E.writeMessageEnd(),this.output.flush()}catch(me){throw delete this._reqs[this.seqid()],typeof E.reset=="function"&&E.reset(),me}}recv_invalidate_cur_session(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new gc;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}set_table_epoch(y,p,h,v){this._seqid=this.new_seqid();const g=this;return new Promise((E,I)=>{g._reqs[g.seqid()]=(ee,me)=>ee?I(ee):E(me),g.send_set_table_epoch(y,p,h,v)})}send_set_table_epoch(y,p,h,v){const g=new this.pClass(this.output),E={session:y,db_id:p,table_id:h,new_epoch:v},I=new C(E);try{return g.writeMessageBegin("set_table_epoch",a.MessageType.CALL,this.seqid()),I.write(g),g.writeMessageEnd(),this.output.flush()}catch(ee){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),ee}}recv_set_table_epoch(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new O;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}set_table_epoch_by_name(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((g,E)=>{v._reqs[v.seqid()]=(I,ee)=>I?E(I):g(ee),v.send_set_table_epoch_by_name(y,p,h)})}send_set_table_epoch_by_name(y,p,h){const v=new this.pClass(this.output),g={session:y,table_name:p,new_epoch:h},E=new N(g);try{return v.writeMessageBegin("set_table_epoch_by_name",a.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(I){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),I}}recv_set_table_epoch_by_name(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new U;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}get_table_epoch(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((g,E)=>{v._reqs[v.seqid()]=(I,ee)=>I?E(I):g(ee),v.send_get_table_epoch(y,p,h)})}send_get_table_epoch(y,p,h){const v=new this.pClass(this.output),g={session:y,db_id:p,table_id:h},E=new K(g);try{return v.writeMessageBegin("get_table_epoch",a.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(I){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),I}}recv_get_table_epoch(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new te;return g.read(y),y.readMessageEnd(),g.success!==null?v(null,g.success):v("get_table_epoch failed: unknown result")}get_table_epoch_by_name(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_get_table_epoch_by_name(y,p)})}send_get_table_epoch_by_name(y,p){const h=new this.pClass(this.output),v={session:y,table_name:p},g=new ie(v);try{return h.writeMessageBegin("get_table_epoch_by_name",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_get_table_epoch_by_name(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Oe;return g.read(y),y.readMessageEnd(),g.success!==null?v(null,g.success):v("get_table_epoch_by_name failed: unknown result")}get_table_epochs(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((g,E)=>{v._reqs[v.seqid()]=(I,ee)=>I?E(I):g(ee),v.send_get_table_epochs(y,p,h)})}send_get_table_epochs(y,p,h){const v=new this.pClass(this.output),g={session:y,db_id:p,table_id:h},E=new Ue(g);try{return v.writeMessageBegin("get_table_epochs",a.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(I){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),I}}recv_get_table_epochs(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new $e;return g.read(y),y.readMessageEnd(),g.success!==null?v(null,g.success):v("get_table_epochs failed: unknown result")}set_table_epochs(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((g,E)=>{v._reqs[v.seqid()]=(I,ee)=>I?E(I):g(ee),v.send_set_table_epochs(y,p,h)})}send_set_table_epochs(y,p,h){const v=new this.pClass(this.output),g={session:y,db_id:p,table_epochs:h},E=new Xe(g);try{return v.writeMessageBegin("set_table_epochs",a.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(I){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),I}}recv_set_table_epochs(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}new Ke().read(y),y.readMessageEnd(),v(null)}get_session_info(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_get_session_info(y)})}send_get_session_info(y){const p=new this.pClass(this.output),h={session:y},v=new _c(h);try{return p.writeMessageBegin("get_session_info",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_get_session_info(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new aw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_session_info failed: unknown result")}get_queries_info(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_get_queries_info(y)})}send_get_queries_info(y){const p=new this.pClass(this.output),h={session:y},v=new u3(h);try{return p.writeMessageBegin("get_queries_info",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_get_queries_info(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new ow;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_queries_info failed: unknown result")}set_leaf_info(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_set_leaf_info(y,p)})}send_set_leaf_info(y,p){const h=new this.pClass(this.output),v={session:y,leaf_info:p},g=new h3(v);try{return h.writeMessageBegin("set_leaf_info",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_set_leaf_info(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new lw;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}sql_execute(y,p,h,v,g,E){this._seqid=this.new_seqid();const I=this;return new Promise((ee,me)=>{I._reqs[I.seqid()]=(Ve,wn)=>Ve?me(Ve):ee(wn),I.send_sql_execute(y,p,h,v,g,E)})}send_sql_execute(y,p,h,v,g,E){const I=new this.pClass(this.output),ee={session:y,query:p,column_format:h,nonce:v,first_n:g,at_most_n:E},me=new p3(ee);try{return I.writeMessageBegin("sql_execute",a.MessageType.CALL,this.seqid()),me.write(I),I.writeMessageEnd(),this.output.flush()}catch(Ve){throw delete this._reqs[this.seqid()],typeof I.reset=="function"&&I.reset(),Ve}}recv_sql_execute(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new cw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("sql_execute failed: unknown result")}sql_execute_df(y,p,h,v,g,E){this._seqid=this.new_seqid();const I=this;return new Promise((ee,me)=>{I._reqs[I.seqid()]=(Ve,wn)=>Ve?me(Ve):ee(wn),I.send_sql_execute_df(y,p,h,v,g,E)})}send_sql_execute_df(y,p,h,v,g,E){const I=new this.pClass(this.output),ee={session:y,query:p,device_type:h,device_id:v,first_n:g,transport_method:E},me=new g3(ee);try{return I.writeMessageBegin("sql_execute_df",a.MessageType.CALL,this.seqid()),me.write(I),I.writeMessageEnd(),this.output.flush()}catch(Ve){throw delete this._reqs[this.seqid()],typeof I.reset=="function"&&I.reset(),Ve}}recv_sql_execute_df(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new dw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("sql_execute_df failed: unknown result")}sql_execute_gdf(y,p,h,v){this._seqid=this.new_seqid();const g=this;return new Promise((E,I)=>{g._reqs[g.seqid()]=(ee,me)=>ee?I(ee):E(me),g.send_sql_execute_gdf(y,p,h,v)})}send_sql_execute_gdf(y,p,h,v){const g=new this.pClass(this.output),E={session:y,query:p,device_id:h,first_n:v},I=new _3(E);try{return g.writeMessageBegin("sql_execute_gdf",a.MessageType.CALL,this.seqid()),I.write(g),g.writeMessageEnd(),this.output.flush()}catch(ee){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),ee}}recv_sql_execute_gdf(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new fw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("sql_execute_gdf failed: unknown result")}deallocate_df(y,p,h,v){this._seqid=this.new_seqid();const g=this;return new Promise((E,I)=>{g._reqs[g.seqid()]=(ee,me)=>ee?I(ee):E(me),g.send_deallocate_df(y,p,h,v)})}send_deallocate_df(y,p,h,v){const g=new this.pClass(this.output),E={session:y,df:p,device_type:h,device_id:v},I=new y3(E);try{return g.writeMessageBegin("deallocate_df",a.MessageType.CALL,this.seqid()),I.write(g),g.writeMessageEnd(),this.output.flush()}catch(ee){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),ee}}recv_deallocate_df(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new uw;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}interrupt(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_interrupt(y,p)})}send_interrupt(y,p){const h=new this.pClass(this.output),v={query_session:y,interrupt_session:p},g=new m3(v);try{return h.writeMessageBegin("interrupt",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_interrupt(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new hw;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}sql_validate(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_sql_validate(y,p)})}send_sql_validate(y,p){const h=new this.pClass(this.output),v={session:y,query:p},g=new w3(v);try{return h.writeMessageBegin("sql_validate",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_sql_validate(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new pw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("sql_validate failed: unknown result")}get_completion_hints(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((g,E)=>{v._reqs[v.seqid()]=(I,ee)=>I?E(I):g(ee),v.send_get_completion_hints(y,p,h)})}send_get_completion_hints(y,p,h){const v=new this.pClass(this.output),g={session:y,sql:p,cursor:h},E=new b3(g);try{return v.writeMessageBegin("get_completion_hints",a.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(I){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),I}}recv_get_completion_hints(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new gw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_completion_hints failed: unknown result")}set_execution_mode(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_set_execution_mode(y,p)})}send_set_execution_mode(y,p){const h=new this.pClass(this.output),v={session:y,mode:p},g=new T3(v);try{return h.writeMessageBegin("set_execution_mode",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_set_execution_mode(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new _w;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}render_vega(y,p,h,v,g){this._seqid=this.new_seqid();const E=this;return new Promise((I,ee)=>{E._reqs[E.seqid()]=(me,Ve)=>me?ee(me):I(Ve),E.send_render_vega(y,p,h,v,g)})}send_render_vega(y,p,h,v,g){const E=new this.pClass(this.output),I={session:y,widget_id:p,vega_json:h,compression_level:v,nonce:g},ee=new v3(I);try{return E.writeMessageBegin("render_vega",a.MessageType.CALL,this.seqid()),ee.write(E),E.writeMessageEnd(),this.output.flush()}catch(me){throw delete this._reqs[this.seqid()],typeof E.reset=="function"&&E.reset(),me}}recv_render_vega(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new yw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("render_vega failed: unknown result")}get_result_row_for_pixel(y,p,h,v,g,E,I){this._seqid=this.new_seqid();const ee=this;return new Promise((me,Ve)=>{ee._reqs[ee.seqid()]=(wn,gl)=>wn?Ve(wn):me(gl),ee.send_get_result_row_for_pixel(y,p,h,v,g,E,I)})}send_get_result_row_for_pixel(y,p,h,v,g,E,I){const ee=new this.pClass(this.output),me={session:y,widget_id:p,pixel:h,table_col_names:v,column_format:g,pixelRadius:E,nonce:I},Ve=new E3(me);try{return ee.writeMessageBegin("get_result_row_for_pixel",a.MessageType.CALL,this.seqid()),Ve.write(ee),ee.writeMessageEnd(),this.output.flush()}catch(wn){throw delete this._reqs[this.seqid()],typeof ee.reset=="function"&&ee.reset(),wn}}recv_get_result_row_for_pixel(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new mw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_result_row_for_pixel failed: unknown result")}create_custom_expression(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_create_custom_expression(y,p)})}send_create_custom_expression(y,p){const h=new this.pClass(this.output),v={session:y,custom_expression:p},g=new S3(v);try{return h.writeMessageBegin("create_custom_expression",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_create_custom_expression(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new ww;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("create_custom_expression failed: unknown result")}get_custom_expressions(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_get_custom_expressions(y)})}send_get_custom_expressions(y){const p=new this.pClass(this.output),h={session:y},v=new x3(h);try{return p.writeMessageBegin("get_custom_expressions",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_get_custom_expressions(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new bw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_custom_expressions failed: unknown result")}update_custom_expression(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((g,E)=>{v._reqs[v.seqid()]=(I,ee)=>I?E(I):g(ee),v.send_update_custom_expression(y,p,h)})}send_update_custom_expression(y,p,h){const v=new this.pClass(this.output),g={session:y,id:p,expression_json:h},E=new B3(g);try{return v.writeMessageBegin("update_custom_expression",a.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(I){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),I}}recv_update_custom_expression(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Tw;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}delete_custom_expressions(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((g,E)=>{v._reqs[v.seqid()]=(I,ee)=>I?E(I):g(ee),v.send_delete_custom_expressions(y,p,h)})}send_delete_custom_expressions(y,p,h){const v=new this.pClass(this.output),g={session:y,custom_expression_ids:p,do_soft_delete:h},E=new k3(g);try{return v.writeMessageBegin("delete_custom_expressions",a.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(I){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),I}}recv_delete_custom_expressions(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new vw;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}get_dashboard(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_get_dashboard(y,p)})}send_get_dashboard(y,p){const h=new this.pClass(this.output),v={session:y,dashboard_id:p},g=new I3(v);try{return h.writeMessageBegin("get_dashboard",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_get_dashboard(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Ew;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_dashboard failed: unknown result")}get_dashboards(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_get_dashboards(y)})}send_get_dashboards(y){const p=new this.pClass(this.output),h={session:y},v=new F3(h);try{return p.writeMessageBegin("get_dashboards",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_get_dashboards(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Sw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_dashboards failed: unknown result")}create_dashboard(y,p,h,v,g){this._seqid=this.new_seqid();const E=this;return new Promise((I,ee)=>{E._reqs[E.seqid()]=(me,Ve)=>me?ee(me):I(Ve),E.send_create_dashboard(y,p,h,v,g)})}send_create_dashboard(y,p,h,v,g){const E=new this.pClass(this.output),I={session:y,dashboard_name:p,dashboard_state:h,image_hash:v,dashboard_metadata:g},ee=new O3(I);try{return E.writeMessageBegin("create_dashboard",a.MessageType.CALL,this.seqid()),ee.write(E),E.writeMessageEnd(),this.output.flush()}catch(me){throw delete this._reqs[this.seqid()],typeof E.reset=="function"&&E.reset(),me}}recv_create_dashboard(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new xw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("create_dashboard failed: unknown result")}replace_dashboard(y,p,h,v,g,E,I){this._seqid=this.new_seqid();const ee=this;return new Promise((me,Ve)=>{ee._reqs[ee.seqid()]=(wn,gl)=>wn?Ve(wn):me(gl),ee.send_replace_dashboard(y,p,h,v,g,E,I)})}send_replace_dashboard(y,p,h,v,g,E,I){const ee=new this.pClass(this.output),me={session:y,dashboard_id:p,dashboard_name:h,dashboard_owner:v,dashboard_state:g,image_hash:E,dashboard_metadata:I},Ve=new M3(me);try{return ee.writeMessageBegin("replace_dashboard",a.MessageType.CALL,this.seqid()),Ve.write(ee),ee.writeMessageEnd(),this.output.flush()}catch(wn){throw delete this._reqs[this.seqid()],typeof ee.reset=="function"&&ee.reset(),wn}}recv_replace_dashboard(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Bw;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}delete_dashboard(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_delete_dashboard(y,p)})}send_delete_dashboard(y,p){const h=new this.pClass(this.output),v={session:y,dashboard_id:p},g=new A3(v);try{return h.writeMessageBegin("delete_dashboard",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_delete_dashboard(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new kw;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}share_dashboards(y,p,h,v){this._seqid=this.new_seqid();const g=this;return new Promise((E,I)=>{g._reqs[g.seqid()]=(ee,me)=>ee?I(ee):E(me),g.send_share_dashboards(y,p,h,v)})}send_share_dashboards(y,p,h,v){const g=new this.pClass(this.output),E={session:y,dashboard_ids:p,groups:h,permissions:v},I=new N3(E);try{return g.writeMessageBegin("share_dashboards",a.MessageType.CALL,this.seqid()),I.write(g),g.writeMessageEnd(),this.output.flush()}catch(ee){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),ee}}recv_share_dashboards(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Iw;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}delete_dashboards(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_delete_dashboards(y,p)})}send_delete_dashboards(y,p){const h=new this.pClass(this.output),v={session:y,dashboard_ids:p},g=new C3(v);try{return h.writeMessageBegin("delete_dashboards",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_delete_dashboards(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Fw;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}share_dashboard(y,p,h,v,g,E){this._seqid=this.new_seqid();const I=this;return new Promise((ee,me)=>{I._reqs[I.seqid()]=(Ve,wn)=>Ve?me(Ve):ee(wn),I.send_share_dashboard(y,p,h,v,g,E)})}send_share_dashboard(y,p,h,v,g,E){const I=new this.pClass(this.output),ee={session:y,dashboard_id:p,groups:h,objects:v,permissions:g,grant_role:E},me=new R3(ee);try{return I.writeMessageBegin("share_dashboard",a.MessageType.CALL,this.seqid()),me.write(I),I.writeMessageEnd(),this.output.flush()}catch(Ve){throw delete this._reqs[this.seqid()],typeof I.reset=="function"&&I.reset(),Ve}}recv_share_dashboard(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Ow;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}unshare_dashboard(y,p,h,v,g){this._seqid=this.new_seqid();const E=this;return new Promise((I,ee)=>{E._reqs[E.seqid()]=(me,Ve)=>me?ee(me):I(Ve),E.send_unshare_dashboard(y,p,h,v,g)})}send_unshare_dashboard(y,p,h,v,g){const E=new this.pClass(this.output),I={session:y,dashboard_id:p,groups:h,objects:v,permissions:g},ee=new L3(I);try{return E.writeMessageBegin("unshare_dashboard",a.MessageType.CALL,this.seqid()),ee.write(E),E.writeMessageEnd(),this.output.flush()}catch(me){throw delete this._reqs[this.seqid()],typeof E.reset=="function"&&E.reset(),me}}recv_unshare_dashboard(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Mw;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}unshare_dashboards(y,p,h,v){this._seqid=this.new_seqid();const g=this;return new Promise((E,I)=>{g._reqs[g.seqid()]=(ee,me)=>ee?I(ee):E(me),g.send_unshare_dashboards(y,p,h,v)})}send_unshare_dashboards(y,p,h,v){const g=new this.pClass(this.output),E={session:y,dashboard_ids:p,groups:h,permissions:v},I=new P3(E);try{return g.writeMessageBegin("unshare_dashboards",a.MessageType.CALL,this.seqid()),I.write(g),g.writeMessageEnd(),this.output.flush()}catch(ee){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),ee}}recv_unshare_dashboards(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Aw;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}get_dashboard_grantees(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_get_dashboard_grantees(y,p)})}send_get_dashboard_grantees(y,p){const h=new this.pClass(this.output),v={session:y,dashboard_id:p},g=new D3(v);try{return h.writeMessageBegin("get_dashboard_grantees",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_get_dashboard_grantees(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Nw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_dashboard_grantees failed: unknown result")}get_link_view(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_get_link_view(y,p)})}send_get_link_view(y,p){const h=new this.pClass(this.output),v={session:y,link:p},g=new j3(v);try{return h.writeMessageBegin("get_link_view",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_get_link_view(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Cw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_link_view failed: unknown result")}create_link(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((g,E)=>{v._reqs[v.seqid()]=(I,ee)=>I?E(I):g(ee),v.send_create_link(y,p,h)})}send_create_link(y,p,h){const v=new this.pClass(this.output),g={session:y,view_state:p,view_metadata:h},E=new U3(g);try{return v.writeMessageBegin("create_link",a.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(I){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),I}}recv_create_link(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Rw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("create_link failed: unknown result")}load_table_binary(y,p,h,v){this._seqid=this.new_seqid();const g=this;return new Promise((E,I)=>{g._reqs[g.seqid()]=(ee,me)=>ee?I(ee):E(me),g.send_load_table_binary(y,p,h,v)})}send_load_table_binary(y,p,h,v){const g=new this.pClass(this.output),E={session:y,table_name:p,rows:h,column_names:v},I=new $3(E);try{return g.writeMessageBegin("load_table_binary",a.MessageType.CALL,this.seqid()),I.write(g),g.writeMessageEnd(),this.output.flush()}catch(ee){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),ee}}recv_load_table_binary(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Lw;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}load_table_binary_columnar(y,p,h,v){this._seqid=this.new_seqid();const g=this;return new Promise((E,I)=>{g._reqs[g.seqid()]=(ee,me)=>ee?I(ee):E(me),g.send_load_table_binary_columnar(y,p,h,v)})}send_load_table_binary_columnar(y,p,h,v){const g=new this.pClass(this.output),E={session:y,table_name:p,cols:h,column_names:v},I=new z3(E);try{return g.writeMessageBegin("load_table_binary_columnar",a.MessageType.CALL,this.seqid()),I.write(g),g.writeMessageEnd(),this.output.flush()}catch(ee){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),ee}}recv_load_table_binary_columnar(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Pw;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}load_table_binary_columnar_polys(y,p,h,v,g){this._seqid=this.new_seqid();const E=this;return new Promise((I,ee)=>{E._reqs[E.seqid()]=(me,Ve)=>me?ee(me):I(Ve),E.send_load_table_binary_columnar_polys(y,p,h,v,g)})}send_load_table_binary_columnar_polys(y,p,h,v,g){const E=new this.pClass(this.output),I={session:y,table_name:p,cols:h,column_names:v,assign_render_groups:g},ee=new q3(I);try{return E.writeMessageBegin("load_table_binary_columnar_polys",a.MessageType.CALL,this.seqid()),ee.write(E),E.writeMessageEnd(),this.output.flush()}catch(me){throw delete this._reqs[this.seqid()],typeof E.reset=="function"&&E.reset(),me}}recv_load_table_binary_columnar_polys(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Dw;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}load_table_binary_arrow(y,p,h,v){this._seqid=this.new_seqid();const g=this;return new Promise((E,I)=>{g._reqs[g.seqid()]=(ee,me)=>ee?I(ee):E(me),g.send_load_table_binary_arrow(y,p,h,v)})}send_load_table_binary_arrow(y,p,h,v){const g=new this.pClass(this.output),E={session:y,table_name:p,arrow_stream:h,use_column_names:v},I=new G3(E);try{return g.writeMessageBegin("load_table_binary_arrow",a.MessageType.CALL,this.seqid()),I.write(g),g.writeMessageEnd(),this.output.flush()}catch(ee){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),ee}}recv_load_table_binary_arrow(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new jw;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}load_table(y,p,h,v){this._seqid=this.new_seqid();const g=this;return new Promise((E,I)=>{g._reqs[g.seqid()]=(ee,me)=>ee?I(ee):E(me),g.send_load_table(y,p,h,v)})}send_load_table(y,p,h,v){const g=new this.pClass(this.output),E={session:y,table_name:p,rows:h,column_names:v},I=new V3(E);try{return g.writeMessageBegin("load_table",a.MessageType.CALL,this.seqid()),I.write(g),g.writeMessageEnd(),this.output.flush()}catch(ee){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),ee}}recv_load_table(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Uw;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}detect_column_types(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((g,E)=>{v._reqs[v.seqid()]=(I,ee)=>I?E(I):g(ee),v.send_detect_column_types(y,p,h)})}send_detect_column_types(y,p,h){const v=new this.pClass(this.output),g={session:y,file_name:p,copy_params:h},E=new W3(g);try{return v.writeMessageBegin("detect_column_types",a.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(I){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),I}}recv_detect_column_types(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new $w;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("detect_column_types failed: unknown result")}create_table(y,p,h,v){this._seqid=this.new_seqid();const g=this;return new Promise((E,I)=>{g._reqs[g.seqid()]=(ee,me)=>ee?I(ee):E(me),g.send_create_table(y,p,h,v)})}send_create_table(y,p,h,v){const g=new this.pClass(this.output),E={session:y,table_name:p,row_desc:h,create_params:v},I=new H3(E);try{return g.writeMessageBegin("create_table",a.MessageType.CALL,this.seqid()),I.write(g),g.writeMessageEnd(),this.output.flush()}catch(ee){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),ee}}recv_create_table(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new zw;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}import_table(y,p,h,v){this._seqid=this.new_seqid();const g=this;return new Promise((E,I)=>{g._reqs[g.seqid()]=(ee,me)=>ee?I(ee):E(me),g.send_import_table(y,p,h,v)})}send_import_table(y,p,h,v){const g=new this.pClass(this.output),E={session:y,table_name:p,file_name:h,copy_params:v},I=new Y3(E);try{return g.writeMessageBegin("import_table",a.MessageType.CALL,this.seqid()),I.write(g),g.writeMessageEnd(),this.output.flush()}catch(ee){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),ee}}recv_import_table(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new qw;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}import_geo_table(y,p,h,v,g,E){this._seqid=this.new_seqid();const I=this;return new Promise((ee,me)=>{I._reqs[I.seqid()]=(Ve,wn)=>Ve?me(Ve):ee(wn),I.send_import_geo_table(y,p,h,v,g,E)})}send_import_geo_table(y,p,h,v,g,E){const I=new this.pClass(this.output),ee={session:y,table_name:p,file_name:h,copy_params:v,row_desc:g,create_params:E},me=new X3(ee);try{return I.writeMessageBegin("import_geo_table",a.MessageType.CALL,this.seqid()),me.write(I),I.writeMessageEnd(),this.output.flush()}catch(Ve){throw delete this._reqs[this.seqid()],typeof I.reset=="function"&&I.reset(),Ve}}recv_import_geo_table(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Gw;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}import_table_status(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_import_table_status(y,p)})}send_import_table_status(y,p){const h=new this.pClass(this.output),v={session:y,import_id:p},g=new K3(v);try{return h.writeMessageBegin("import_table_status",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_import_table_status(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Vw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("import_table_status failed: unknown result")}get_first_geo_file_in_archive(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((g,E)=>{v._reqs[v.seqid()]=(I,ee)=>I?E(I):g(ee),v.send_get_first_geo_file_in_archive(y,p,h)})}send_get_first_geo_file_in_archive(y,p,h){const v=new this.pClass(this.output),g={session:y,archive_path:p,copy_params:h},E=new J3(g);try{return v.writeMessageBegin("get_first_geo_file_in_archive",a.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(I){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),I}}recv_get_first_geo_file_in_archive(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Ww;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_first_geo_file_in_archive failed: unknown result")}get_all_files_in_archive(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((g,E)=>{v._reqs[v.seqid()]=(I,ee)=>I?E(I):g(ee),v.send_get_all_files_in_archive(y,p,h)})}send_get_all_files_in_archive(y,p,h){const v=new this.pClass(this.output),g={session:y,archive_path:p,copy_params:h},E=new Q3(g);try{return v.writeMessageBegin("get_all_files_in_archive",a.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(I){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),I}}recv_get_all_files_in_archive(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Hw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_all_files_in_archive failed: unknown result")}get_layers_in_geo_file(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((g,E)=>{v._reqs[v.seqid()]=(I,ee)=>I?E(I):g(ee),v.send_get_layers_in_geo_file(y,p,h)})}send_get_layers_in_geo_file(y,p,h){const v=new this.pClass(this.output),g={session:y,file_name:p,copy_params:h},E=new Z3(g);try{return v.writeMessageBegin("get_layers_in_geo_file",a.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(I){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),I}}recv_get_layers_in_geo_file(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Yw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_layers_in_geo_file failed: unknown result")}query_get_outer_fragment_count(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_query_get_outer_fragment_count(y,p)})}send_query_get_outer_fragment_count(y,p){const h=new this.pClass(this.output),v={session:y,query:p},g=new eL(v);try{return h.writeMessageBegin("query_get_outer_fragment_count",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_query_get_outer_fragment_count(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Xw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("query_get_outer_fragment_count failed: unknown result")}check_table_consistency(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_check_table_consistency(y,p)})}send_check_table_consistency(y,p){const h=new this.pClass(this.output),v={session:y,table_id:p},g=new tL(v);try{return h.writeMessageBegin("check_table_consistency",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_check_table_consistency(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Kw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("check_table_consistency failed: unknown result")}start_query(y,p,h,v,g,E){this._seqid=this.new_seqid();const I=this;return new Promise((ee,me)=>{I._reqs[I.seqid()]=(Ve,wn)=>Ve?me(Ve):ee(wn),I.send_start_query(y,p,h,v,g,E)})}send_start_query(y,p,h,v,g,E){const I=new this.pClass(this.output),ee={leaf_session:y,parent_session:p,query_ra:h,start_time_str:v,just_explain:g,outer_fragment_indices:E},me=new nL(ee);try{return I.writeMessageBegin("start_query",a.MessageType.CALL,this.seqid()),me.write(I),I.writeMessageEnd(),this.output.flush()}catch(Ve){throw delete this._reqs[this.seqid()],typeof I.reset=="function"&&I.reset(),Ve}}recv_start_query(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Jw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("start_query failed: unknown result")}execute_query_step(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((g,E)=>{v._reqs[v.seqid()]=(I,ee)=>I?E(I):g(ee),v.send_execute_query_step(y,p,h)})}send_execute_query_step(y,p,h){const v=new this.pClass(this.output),g={pending_query:y,subquery_id:p,start_time_str:h},E=new iL(g);try{return v.writeMessageBegin("execute_query_step",a.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(I){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),I}}recv_execute_query_step(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Qw;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("execute_query_step failed: unknown result")}broadcast_serialized_rows(y,p,h,v,g){this._seqid=this.new_seqid();const E=this;return new Promise((I,ee)=>{E._reqs[E.seqid()]=(me,Ve)=>me?ee(me):I(Ve),E.send_broadcast_serialized_rows(y,p,h,v,g)})}send_broadcast_serialized_rows(y,p,h,v,g){const E=new this.pClass(this.output),I={serialized_rows:y,row_desc:p,query_id:h,subquery_id:v,is_final_subquery_result:g},ee=new sL(I);try{return E.writeMessageBegin("broadcast_serialized_rows",a.MessageType.CALL,this.seqid()),ee.write(E),E.writeMessageEnd(),this.output.flush()}catch(me){throw delete this._reqs[this.seqid()],typeof E.reset=="function"&&E.reset(),me}}recv_broadcast_serialized_rows(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new Zw;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}start_render_query(y,p,h,v){this._seqid=this.new_seqid();const g=this;return new Promise((E,I)=>{g._reqs[g.seqid()]=(ee,me)=>ee?I(ee):E(me),g.send_start_render_query(y,p,h,v)})}send_start_render_query(y,p,h,v){const g=new this.pClass(this.output),E={session:y,widget_id:p,node_idx:h,vega_json:v},I=new rL(E);try{return g.writeMessageBegin("start_render_query",a.MessageType.CALL,this.seqid()),I.write(g),g.writeMessageEnd(),this.output.flush()}catch(ee){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),ee}}recv_start_render_query(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new eb;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("start_render_query failed: unknown result")}execute_next_render_step(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_execute_next_render_step(y,p)})}send_execute_next_render_step(y,p){const h=new this.pClass(this.output),v={pending_render:y,merged_data:p},g=new aL(v);try{return h.writeMessageBegin("execute_next_render_step",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_execute_next_render_step(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new tb;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("execute_next_render_step failed: unknown result")}insert_data(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_insert_data(y,p)})}send_insert_data(y,p){const h=new this.pClass(this.output),v={session:y,insert_data:p},g=new oL(v);try{return h.writeMessageBegin("insert_data",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_insert_data(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new nb;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}insert_chunks(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_insert_chunks(y,p)})}send_insert_chunks(y,p){const h=new this.pClass(this.output),v={session:y,insert_chunks:p},g=new lL(v);try{return h.writeMessageBegin("insert_chunks",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_insert_chunks(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new ib;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}checkpoint(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_checkpoint(y,p)})}send_checkpoint(y,p){const h=new this.pClass(this.output),v={session:y,table_id:p},g=new cL(v);try{return h.writeMessageBegin("checkpoint",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_checkpoint(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new sb;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}get_roles(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_get_roles(y)})}send_get_roles(y){const p=new this.pClass(this.output),h={session:y},v=new dL(h);try{return p.writeMessageBegin("get_roles",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_get_roles(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new rb;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_roles failed: unknown result")}get_db_objects_for_grantee(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_get_db_objects_for_grantee(y,p)})}send_get_db_objects_for_grantee(y,p){const h=new this.pClass(this.output),v={session:y,roleName:p},g=new fL(v);try{return h.writeMessageBegin("get_db_objects_for_grantee",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_get_db_objects_for_grantee(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new ab;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_db_objects_for_grantee failed: unknown result")}get_db_object_privs(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((g,E)=>{v._reqs[v.seqid()]=(I,ee)=>I?E(I):g(ee),v.send_get_db_object_privs(y,p,h)})}send_get_db_object_privs(y,p,h){const v=new this.pClass(this.output),g={session:y,objectName:p,type:h},E=new uL(g);try{return v.writeMessageBegin("get_db_object_privs",a.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(I){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),I}}recv_get_db_object_privs(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new ob;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_db_object_privs failed: unknown result")}get_all_roles_for_user(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_get_all_roles_for_user(y,p)})}send_get_all_roles_for_user(y,p){const h=new this.pClass(this.output),v={session:y,userName:p},g=new hL(v);try{return h.writeMessageBegin("get_all_roles_for_user",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_get_all_roles_for_user(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new lb;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_all_roles_for_user failed: unknown result")}get_all_effective_roles_for_user(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_get_all_effective_roles_for_user(y,p)})}send_get_all_effective_roles_for_user(y,p){const h=new this.pClass(this.output),v={session:y,userName:p},g=new pL(v);try{return h.writeMessageBegin("get_all_effective_roles_for_user",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_get_all_effective_roles_for_user(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new cb;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_all_effective_roles_for_user failed: unknown result")}has_role(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((g,E)=>{v._reqs[v.seqid()]=(I,ee)=>I?E(I):g(ee),v.send_has_role(y,p,h)})}send_has_role(y,p,h){const v=new this.pClass(this.output),g={session:y,granteeName:p,roleName:h},E=new gL(g);try{return v.writeMessageBegin("has_role",a.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(I){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),I}}recv_has_role(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new db;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("has_role failed: unknown result")}has_object_privilege(y,p,h,v,g){this._seqid=this.new_seqid();const E=this;return new Promise((I,ee)=>{E._reqs[E.seqid()]=(me,Ve)=>me?ee(me):I(Ve),E.send_has_object_privilege(y,p,h,v,g)})}send_has_object_privilege(y,p,h,v,g){const E=new this.pClass(this.output),I={session:y,granteeName:p,ObjectName:h,objectType:v,permissions:g},ee=new _L(I);try{return E.writeMessageBegin("has_object_privilege",a.MessageType.CALL,this.seqid()),ee.write(E),E.writeMessageEnd(),this.output.flush()}catch(me){throw delete this._reqs[this.seqid()],typeof E.reset=="function"&&E.reset(),me}}recv_has_object_privilege(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new fb;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("has_object_privilege failed: unknown result")}set_license_key(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((g,E)=>{v._reqs[v.seqid()]=(I,ee)=>I?E(I):g(ee),v.send_set_license_key(y,p,h)})}send_set_license_key(y,p,h){const v=new this.pClass(this.output),g={session:y,key:p,nonce:h},E=new yL(g);try{return v.writeMessageBegin("set_license_key",a.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(I){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),I}}recv_set_license_key(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new ub;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("set_license_key failed: unknown result")}get_license_claims(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_get_license_claims(y,p)})}send_get_license_claims(y,p){const h=new this.pClass(this.output),v={session:y,nonce:p},g=new mL(v);try{return h.writeMessageBegin("get_license_claims",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_get_license_claims(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new hb;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_license_claims failed: unknown result")}get_device_parameters(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_get_device_parameters(y)})}send_get_device_parameters(y){const p=new this.pClass(this.output),h={session:y},v=new wL(h);try{return p.writeMessageBegin("get_device_parameters",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_get_device_parameters(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new pb;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_device_parameters failed: unknown result")}register_runtime_extension_functions(y,p,h,v){this._seqid=this.new_seqid();const g=this;return new Promise((E,I)=>{g._reqs[g.seqid()]=(ee,me)=>ee?I(ee):E(me),g.send_register_runtime_extension_functions(y,p,h,v)})}send_register_runtime_extension_functions(y,p,h,v){const g=new this.pClass(this.output),E={session:y,udfs:p,udtfs:h,device_ir_map:v},I=new bL(E);try{return g.writeMessageBegin("register_runtime_extension_functions",a.MessageType.CALL,this.seqid()),I.write(g),g.writeMessageEnd(),this.output.flush()}catch(ee){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),ee}}recv_register_runtime_extension_functions(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new gb;if(g.read(y),y.readMessageEnd(),g.e!==null)return v(g.e);v(null)}get_table_function_names(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_get_table_function_names(y)})}send_get_table_function_names(y){const p=new this.pClass(this.output),h={session:y},v=new TL(h);try{return p.writeMessageBegin("get_table_function_names",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_get_table_function_names(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new _b;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_table_function_names failed: unknown result")}get_runtime_table_function_names(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(g,E)=>g?v(g):h(E),p.send_get_runtime_table_function_names(y)})}send_get_runtime_table_function_names(y){const p=new this.pClass(this.output),h={session:y},v=new vL(h);try{return p.writeMessageBegin("get_runtime_table_function_names",a.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(g){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),g}}recv_get_runtime_table_function_names(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new yb;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_runtime_table_function_names failed: unknown result")}get_table_function_details(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,g)=>{h._reqs[h.seqid()]=(E,I)=>E?g(E):v(I),h.send_get_table_function_details(y,p)})}send_get_table_function_details(y,p){const h=new this.pClass(this.output),v={session:y,udtf_names:p},g=new EL(v);try{return h.writeMessageBegin("get_table_function_details",a.MessageType.CALL,this.seqid()),g.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_get_table_function_details(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==a.MessageType.EXCEPTION){const E=new a.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const g=new mb;return g.read(y),y.readMessageEnd(),g.e!==null?v(g.e):g.success!==null?v(null,g.success):v("get_table_function_details failed: unknown result")}},d.Processor=class{constructor(y){this._handler=y}process(y,p){const h=y.readMessageBegin();if(this["process_"+h.fname])return this["process_"+h.fname].call(this,h.rseqid,y,p);{y.skip(a.Type.STRUCT),y.readMessageEnd();const v=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN_METHOD,"Unknown function "+h.fname);p.writeMessageBegin(h.fname,a.MessageType.EXCEPTION,h.rseqid),v.write(p),p.writeMessageEnd(),p.flush()}}process_connect(y,p,h){const v=new T;v.read(p),p.readMessageEnd(),this._handler.connect.length===3?Promise.resolve(this._handler.connect.bind(this._handler)(v.user,v.passwd,v.dbname)).then(g=>{const E=new b({success:g});h.writeMessageBegin("connect",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new b(g),h.writeMessageBegin("connect",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("connect",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.connect(v.user,v.passwd,v.dbname,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new b(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("connect",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("connect",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_krb5_connect(y,p,h){const v=new S;v.read(p),p.readMessageEnd(),this._handler.krb5_connect.length===2?Promise.resolve(this._handler.krb5_connect.bind(this._handler)(v.inputToken,v.dbname)).then(g=>{const E=new x({success:g});h.writeMessageBegin("krb5_connect",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new x(g),h.writeMessageBegin("krb5_connect",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("krb5_connect",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.krb5_connect(v.inputToken,v.dbname,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new x(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("krb5_connect",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("krb5_connect",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_disconnect(y,p,h){const v=new B;v.read(p),p.readMessageEnd(),this._handler.disconnect.length===1?Promise.resolve(this._handler.disconnect.bind(this._handler)(v.session)).then(g=>{const E=new F({success:g});h.writeMessageBegin("disconnect",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new F(g),h.writeMessageBegin("disconnect",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("disconnect",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.disconnect(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new F(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("disconnect",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("disconnect",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_switch_database(y,p,h){const v=new k;v.read(p),p.readMessageEnd(),this._handler.switch_database.length===2?Promise.resolve(this._handler.switch_database.bind(this._handler)(v.session,v.dbname)).then(g=>{const E=new M({success:g});h.writeMessageBegin("switch_database",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new M(g),h.writeMessageBegin("switch_database",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("switch_database",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.switch_database(v.session,v.dbname,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new M(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("switch_database",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("switch_database",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_clone_session(y,p,h){const v=new A;v.read(p),p.readMessageEnd(),this._handler.clone_session.length===1?Promise.resolve(this._handler.clone_session.bind(this._handler)(v.session)).then(g=>{const E=new R({success:g});h.writeMessageBegin("clone_session",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new R(g),h.writeMessageBegin("clone_session",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("clone_session",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.clone_session(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new R(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("clone_session",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("clone_session",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_server_status(y,p,h){const v=new P;v.read(p),p.readMessageEnd(),this._handler.get_server_status.length===1?Promise.resolve(this._handler.get_server_status.bind(this._handler)(v.session)).then(g=>{const E=new j({success:g});h.writeMessageBegin("get_server_status",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new j(g),h.writeMessageBegin("get_server_status",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_server_status",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_server_status(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new j(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_server_status",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_server_status",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_status(y,p,h){const v=new D;v.read(p),p.readMessageEnd(),this._handler.get_status.length===1?Promise.resolve(this._handler.get_status.bind(this._handler)(v.session)).then(g=>{const E=new z({success:g});h.writeMessageBegin("get_status",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new z(g),h.writeMessageBegin("get_status",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_status",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_status(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new z(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_status",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_status",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_hardware_info(y,p,h){const v=new $;v.read(p),p.readMessageEnd(),this._handler.get_hardware_info.length===1?Promise.resolve(this._handler.get_hardware_info.bind(this._handler)(v.session)).then(g=>{const E=new Y({success:g});h.writeMessageBegin("get_hardware_info",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Y(g),h.writeMessageBegin("get_hardware_info",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_hardware_info",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_hardware_info(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Y(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_hardware_info",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_hardware_info",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_tables(y,p,h){const v=new W;v.read(p),p.readMessageEnd(),this._handler.get_tables.length===1?Promise.resolve(this._handler.get_tables.bind(this._handler)(v.session)).then(g=>{const E=new H({success:g});h.writeMessageBegin("get_tables",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new H(g),h.writeMessageBegin("get_tables",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_tables",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_tables(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new H(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_tables",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_tables",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_tables_for_database(y,p,h){const v=new J;v.read(p),p.readMessageEnd(),this._handler.get_tables_for_database.length===2?Promise.resolve(this._handler.get_tables_for_database.bind(this._handler)(v.session,v.database_name)).then(g=>{const E=new V({success:g});h.writeMessageBegin("get_tables_for_database",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new V(g),h.writeMessageBegin("get_tables_for_database",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_tables_for_database",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_tables_for_database(v.session,v.database_name,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new V(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_tables_for_database",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_tables_for_database",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_physical_tables(y,p,h){const v=new le;v.read(p),p.readMessageEnd(),this._handler.get_physical_tables.length===1?Promise.resolve(this._handler.get_physical_tables.bind(this._handler)(v.session)).then(g=>{const E=new pe({success:g});h.writeMessageBegin("get_physical_tables",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new pe(g),h.writeMessageBegin("get_physical_tables",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_physical_tables",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_physical_tables(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new pe(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_physical_tables",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_physical_tables",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_views(y,p,h){const v=new se;v.read(p),p.readMessageEnd(),this._handler.get_views.length===1?Promise.resolve(this._handler.get_views.bind(this._handler)(v.session)).then(g=>{const E=new Ne({success:g});h.writeMessageBegin("get_views",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Ne(g),h.writeMessageBegin("get_views",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_views",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_views(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Ne(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_views",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_views",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_tables_meta(y,p,h){const v=new fe;v.read(p),p.readMessageEnd(),this._handler.get_tables_meta.length===1?Promise.resolve(this._handler.get_tables_meta.bind(this._handler)(v.session)).then(g=>{const E=new Ce({success:g});h.writeMessageBegin("get_tables_meta",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Ce(g),h.writeMessageBegin("get_tables_meta",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_tables_meta",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_tables_meta(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Ce(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_tables_meta",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_tables_meta",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_table_details(y,p,h){const v=new Me;v.read(p),p.readMessageEnd(),this._handler.get_table_details.length===2?Promise.resolve(this._handler.get_table_details.bind(this._handler)(v.session,v.table_name)).then(g=>{const E=new He({success:g});h.writeMessageBegin("get_table_details",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new He(g),h.writeMessageBegin("get_table_details",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_table_details",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_table_details(v.session,v.table_name,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new He(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_table_details",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_table_details",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_table_details_for_database(y,p,h){const v=new Bt;v.read(p),p.readMessageEnd(),this._handler.get_table_details_for_database.length===3?Promise.resolve(this._handler.get_table_details_for_database.bind(this._handler)(v.session,v.table_name,v.database_name)).then(g=>{const E=new vt({success:g});h.writeMessageBegin("get_table_details_for_database",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new vt(g),h.writeMessageBegin("get_table_details_for_database",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_table_details_for_database",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_table_details_for_database(v.session,v.table_name,v.database_name,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new vt(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_table_details_for_database",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_table_details_for_database",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_internal_table_details(y,p,h){const v=new ge;v.read(p),p.readMessageEnd(),this._handler.get_internal_table_details.length===3?Promise.resolve(this._handler.get_internal_table_details.bind(this._handler)(v.session,v.table_name,v.include_system_columns)).then(g=>{const E=new G({success:g});h.writeMessageBegin("get_internal_table_details",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new G(g),h.writeMessageBegin("get_internal_table_details",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_internal_table_details",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_internal_table_details(v.session,v.table_name,v.include_system_columns,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new G(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_internal_table_details",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_internal_table_details",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_internal_table_details_for_database(y,p,h){const v=new q;v.read(p),p.readMessageEnd(),this._handler.get_internal_table_details_for_database.length===3?Promise.resolve(this._handler.get_internal_table_details_for_database.bind(this._handler)(v.session,v.table_name,v.database_name)).then(g=>{const E=new L({success:g});h.writeMessageBegin("get_internal_table_details_for_database",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new L(g),h.writeMessageBegin("get_internal_table_details_for_database",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_internal_table_details_for_database",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_internal_table_details_for_database(v.session,v.table_name,v.database_name,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new L(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_internal_table_details_for_database",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_internal_table_details_for_database",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_users(y,p,h){const v=new X;v.read(p),p.readMessageEnd(),this._handler.get_users.length===1?Promise.resolve(this._handler.get_users.bind(this._handler)(v.session)).then(g=>{const E=new Z({success:g});h.writeMessageBegin("get_users",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Z(g),h.writeMessageBegin("get_users",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_users",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_users(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Z(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_users",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_users",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_databases(y,p,h){const v=new ae;v.read(p),p.readMessageEnd(),this._handler.get_databases.length===1?Promise.resolve(this._handler.get_databases.bind(this._handler)(v.session)).then(g=>{const E=new re({success:g});h.writeMessageBegin("get_databases",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new re(g),h.writeMessageBegin("get_databases",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_databases",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_databases(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new re(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_databases",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_databases",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_version(y,p,h){new _e().read(p),p.readMessageEnd(),this._handler.get_version.length===0?Promise.resolve(this._handler.get_version.bind(this._handler)()).then(g=>{const E=new Ee({success:g});h.writeMessageBegin("get_version",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Ee(g),h.writeMessageBegin("get_version",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_version",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_version((g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Ee(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_version",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_version",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_start_heap_profile(y,p,h){const v=new Je;v.read(p),p.readMessageEnd(),this._handler.start_heap_profile.length===1?Promise.resolve(this._handler.start_heap_profile.bind(this._handler)(v.session)).then(g=>{const E=new zt({success:g});h.writeMessageBegin("start_heap_profile",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new zt(g),h.writeMessageBegin("start_heap_profile",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("start_heap_profile",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.start_heap_profile(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new zt(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("start_heap_profile",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("start_heap_profile",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_stop_heap_profile(y,p,h){const v=new At;v.read(p),p.readMessageEnd(),this._handler.stop_heap_profile.length===1?Promise.resolve(this._handler.stop_heap_profile.bind(this._handler)(v.session)).then(g=>{const E=new et({success:g});h.writeMessageBegin("stop_heap_profile",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new et(g),h.writeMessageBegin("stop_heap_profile",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("stop_heap_profile",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.stop_heap_profile(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new et(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("stop_heap_profile",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("stop_heap_profile",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_heap_profile(y,p,h){const v=new un;v.read(p),p.readMessageEnd(),this._handler.get_heap_profile.length===1?Promise.resolve(this._handler.get_heap_profile.bind(this._handler)(v.session)).then(g=>{const E=new Gn({success:g});h.writeMessageBegin("get_heap_profile",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Gn(g),h.writeMessageBegin("get_heap_profile",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_heap_profile",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_heap_profile(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Gn(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_heap_profile",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_heap_profile",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_memory(y,p,h){const v=new bs;v.read(p),p.readMessageEnd(),this._handler.get_memory.length===2?Promise.resolve(this._handler.get_memory.bind(this._handler)(v.session,v.memory_level)).then(g=>{const E=new ue({success:g});h.writeMessageBegin("get_memory",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new ue(g),h.writeMessageBegin("get_memory",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_memory",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_memory(v.session,v.memory_level,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new ue(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_memory",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_memory",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_clear_cpu_memory(y,p,h){const v=new Fi;v.read(p),p.readMessageEnd(),this._handler.clear_cpu_memory.length===1?Promise.resolve(this._handler.clear_cpu_memory.bind(this._handler)(v.session)).then(g=>{const E=new oi({success:g});h.writeMessageBegin("clear_cpu_memory",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new oi(g),h.writeMessageBegin("clear_cpu_memory",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("clear_cpu_memory",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.clear_cpu_memory(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new oi(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("clear_cpu_memory",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("clear_cpu_memory",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_clear_gpu_memory(y,p,h){const v=new ia;v.read(p),p.readMessageEnd(),this._handler.clear_gpu_memory.length===1?Promise.resolve(this._handler.clear_gpu_memory.bind(this._handler)(v.session)).then(g=>{const E=new En({success:g});h.writeMessageBegin("clear_gpu_memory",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new En(g),h.writeMessageBegin("clear_gpu_memory",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("clear_gpu_memory",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.clear_gpu_memory(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new En(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("clear_gpu_memory",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("clear_gpu_memory",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_set_cur_session(y,p,h){const v=new hc;v.read(p),p.readMessageEnd(),this._handler.set_cur_session.length===5?Promise.resolve(this._handler.set_cur_session.bind(this._handler)(v.parent_session,v.leaf_session,v.start_time_str,v.label,v.for_running_query_kernel)).then(g=>{const E=new pc({success:g});h.writeMessageBegin("set_cur_session",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new pc(g),h.writeMessageBegin("set_cur_session",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("set_cur_session",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.set_cur_session(v.parent_session,v.leaf_session,v.start_time_str,v.label,v.for_running_query_kernel,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new pc(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("set_cur_session",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("set_cur_session",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_invalidate_cur_session(y,p,h){const v=new tr;v.read(p),p.readMessageEnd(),this._handler.invalidate_cur_session.length===5?Promise.resolve(this._handler.invalidate_cur_session.bind(this._handler)(v.parent_session,v.leaf_session,v.start_time_str,v.label,v.for_running_query_kernel)).then(g=>{const E=new gc({success:g});h.writeMessageBegin("invalidate_cur_session",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new gc(g),h.writeMessageBegin("invalidate_cur_session",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("invalidate_cur_session",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.invalidate_cur_session(v.parent_session,v.leaf_session,v.start_time_str,v.label,v.for_running_query_kernel,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new gc(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("invalidate_cur_session",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("invalidate_cur_session",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_set_table_epoch(y,p,h){const v=new C;v.read(p),p.readMessageEnd(),this._handler.set_table_epoch.length===4?Promise.resolve(this._handler.set_table_epoch.bind(this._handler)(v.session,v.db_id,v.table_id,v.new_epoch)).then(g=>{const E=new O({success:g});h.writeMessageBegin("set_table_epoch",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new O(g),h.writeMessageBegin("set_table_epoch",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("set_table_epoch",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.set_table_epoch(v.session,v.db_id,v.table_id,v.new_epoch,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new O(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("set_table_epoch",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("set_table_epoch",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_set_table_epoch_by_name(y,p,h){const v=new N;v.read(p),p.readMessageEnd(),this._handler.set_table_epoch_by_name.length===3?Promise.resolve(this._handler.set_table_epoch_by_name.bind(this._handler)(v.session,v.table_name,v.new_epoch)).then(g=>{const E=new U({success:g});h.writeMessageBegin("set_table_epoch_by_name",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new U(g),h.writeMessageBegin("set_table_epoch_by_name",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("set_table_epoch_by_name",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.set_table_epoch_by_name(v.session,v.table_name,v.new_epoch,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new U(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("set_table_epoch_by_name",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("set_table_epoch_by_name",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_table_epoch(y,p,h){const v=new K;v.read(p),p.readMessageEnd(),this._handler.get_table_epoch.length===3?Promise.resolve(this._handler.get_table_epoch.bind(this._handler)(v.session,v.db_id,v.table_id)).then(g=>{const E=new te({success:g});h.writeMessageBegin("get_table_epoch",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_table_epoch",a.MessageType.EXCEPTION,y),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_table_epoch(v.session,v.db_id,v.table_id,(g,E)=>{let I;g===null||typeof g>"u"?(I=new te(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_table_epoch",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_table_epoch",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_table_epoch_by_name(y,p,h){const v=new ie;v.read(p),p.readMessageEnd(),this._handler.get_table_epoch_by_name.length===2?Promise.resolve(this._handler.get_table_epoch_by_name.bind(this._handler)(v.session,v.table_name)).then(g=>{const E=new Oe({success:g});h.writeMessageBegin("get_table_epoch_by_name",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_table_epoch_by_name",a.MessageType.EXCEPTION,y),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_table_epoch_by_name(v.session,v.table_name,(g,E)=>{let I;g===null||typeof g>"u"?(I=new Oe(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_table_epoch_by_name",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_table_epoch_by_name",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_table_epochs(y,p,h){const v=new Ue;v.read(p),p.readMessageEnd(),this._handler.get_table_epochs.length===3?Promise.resolve(this._handler.get_table_epochs.bind(this._handler)(v.session,v.db_id,v.table_id)).then(g=>{const E=new $e({success:g});h.writeMessageBegin("get_table_epochs",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_table_epochs",a.MessageType.EXCEPTION,y),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_table_epochs(v.session,v.db_id,v.table_id,(g,E)=>{let I;g===null||typeof g>"u"?(I=new $e(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_table_epochs",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_table_epochs",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_set_table_epochs(y,p,h){const v=new Xe;v.read(p),p.readMessageEnd(),this._handler.set_table_epochs.length===3?Promise.resolve(this._handler.set_table_epochs.bind(this._handler)(v.session,v.db_id,v.table_epochs)).then(g=>{const E=new Ke({success:g});h.writeMessageBegin("set_table_epochs",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("set_table_epochs",a.MessageType.EXCEPTION,y),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.set_table_epochs(v.session,v.db_id,v.table_epochs,(g,E)=>{let I;g===null||typeof g>"u"?(I=new Ke(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("set_table_epochs",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("set_table_epochs",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_session_info(y,p,h){const v=new _c;v.read(p),p.readMessageEnd(),this._handler.get_session_info.length===1?Promise.resolve(this._handler.get_session_info.bind(this._handler)(v.session)).then(g=>{const E=new aw({success:g});h.writeMessageBegin("get_session_info",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new aw(g),h.writeMessageBegin("get_session_info",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_session_info",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_session_info(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new aw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_session_info",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_session_info",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_queries_info(y,p,h){const v=new u3;v.read(p),p.readMessageEnd(),this._handler.get_queries_info.length===1?Promise.resolve(this._handler.get_queries_info.bind(this._handler)(v.session)).then(g=>{const E=new ow({success:g});h.writeMessageBegin("get_queries_info",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new ow(g),h.writeMessageBegin("get_queries_info",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_queries_info",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_queries_info(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new ow(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_queries_info",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_queries_info",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_set_leaf_info(y,p,h){const v=new h3;v.read(p),p.readMessageEnd(),this._handler.set_leaf_info.length===2?Promise.resolve(this._handler.set_leaf_info.bind(this._handler)(v.session,v.leaf_info)).then(g=>{const E=new lw({success:g});h.writeMessageBegin("set_leaf_info",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new lw(g),h.writeMessageBegin("set_leaf_info",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("set_leaf_info",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.set_leaf_info(v.session,v.leaf_info,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new lw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("set_leaf_info",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("set_leaf_info",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_sql_execute(y,p,h){const v=new p3;v.read(p),p.readMessageEnd(),this._handler.sql_execute.length===6?Promise.resolve(this._handler.sql_execute.bind(this._handler)(v.session,v.query,v.column_format,v.nonce,v.first_n,v.at_most_n)).then(g=>{const E=new cw({success:g});h.writeMessageBegin("sql_execute",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new cw(g),h.writeMessageBegin("sql_execute",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("sql_execute",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.sql_execute(v.session,v.query,v.column_format,v.nonce,v.first_n,v.at_most_n,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new cw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("sql_execute",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("sql_execute",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_sql_execute_df(y,p,h){const v=new g3;v.read(p),p.readMessageEnd(),this._handler.sql_execute_df.length===6?Promise.resolve(this._handler.sql_execute_df.bind(this._handler)(v.session,v.query,v.device_type,v.device_id,v.first_n,v.transport_method)).then(g=>{const E=new dw({success:g});h.writeMessageBegin("sql_execute_df",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new dw(g),h.writeMessageBegin("sql_execute_df",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("sql_execute_df",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.sql_execute_df(v.session,v.query,v.device_type,v.device_id,v.first_n,v.transport_method,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new dw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("sql_execute_df",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("sql_execute_df",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_sql_execute_gdf(y,p,h){const v=new _3;v.read(p),p.readMessageEnd(),this._handler.sql_execute_gdf.length===4?Promise.resolve(this._handler.sql_execute_gdf.bind(this._handler)(v.session,v.query,v.device_id,v.first_n)).then(g=>{const E=new fw({success:g});h.writeMessageBegin("sql_execute_gdf",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new fw(g),h.writeMessageBegin("sql_execute_gdf",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("sql_execute_gdf",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.sql_execute_gdf(v.session,v.query,v.device_id,v.first_n,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new fw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("sql_execute_gdf",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("sql_execute_gdf",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_deallocate_df(y,p,h){const v=new y3;v.read(p),p.readMessageEnd(),this._handler.deallocate_df.length===4?Promise.resolve(this._handler.deallocate_df.bind(this._handler)(v.session,v.df,v.device_type,v.device_id)).then(g=>{const E=new uw({success:g});h.writeMessageBegin("deallocate_df",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new uw(g),h.writeMessageBegin("deallocate_df",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("deallocate_df",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.deallocate_df(v.session,v.df,v.device_type,v.device_id,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new uw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("deallocate_df",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("deallocate_df",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_interrupt(y,p,h){const v=new m3;v.read(p),p.readMessageEnd(),this._handler.interrupt.length===2?Promise.resolve(this._handler.interrupt.bind(this._handler)(v.query_session,v.interrupt_session)).then(g=>{const E=new hw({success:g});h.writeMessageBegin("interrupt",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new hw(g),h.writeMessageBegin("interrupt",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("interrupt",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.interrupt(v.query_session,v.interrupt_session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new hw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("interrupt",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("interrupt",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_sql_validate(y,p,h){const v=new w3;v.read(p),p.readMessageEnd(),this._handler.sql_validate.length===2?Promise.resolve(this._handler.sql_validate.bind(this._handler)(v.session,v.query)).then(g=>{const E=new pw({success:g});h.writeMessageBegin("sql_validate",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new pw(g),h.writeMessageBegin("sql_validate",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("sql_validate",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.sql_validate(v.session,v.query,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new pw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("sql_validate",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("sql_validate",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_completion_hints(y,p,h){const v=new b3;v.read(p),p.readMessageEnd(),this._handler.get_completion_hints.length===3?Promise.resolve(this._handler.get_completion_hints.bind(this._handler)(v.session,v.sql,v.cursor)).then(g=>{const E=new gw({success:g});h.writeMessageBegin("get_completion_hints",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new gw(g),h.writeMessageBegin("get_completion_hints",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_completion_hints",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_completion_hints(v.session,v.sql,v.cursor,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new gw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_completion_hints",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_completion_hints",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_set_execution_mode(y,p,h){const v=new T3;v.read(p),p.readMessageEnd(),this._handler.set_execution_mode.length===2?Promise.resolve(this._handler.set_execution_mode.bind(this._handler)(v.session,v.mode)).then(g=>{const E=new _w({success:g});h.writeMessageBegin("set_execution_mode",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new _w(g),h.writeMessageBegin("set_execution_mode",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("set_execution_mode",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.set_execution_mode(v.session,v.mode,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new _w(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("set_execution_mode",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("set_execution_mode",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_render_vega(y,p,h){const v=new v3;v.read(p),p.readMessageEnd(),this._handler.render_vega.length===5?Promise.resolve(this._handler.render_vega.bind(this._handler)(v.session,v.widget_id,v.vega_json,v.compression_level,v.nonce)).then(g=>{const E=new yw({success:g});h.writeMessageBegin("render_vega",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new yw(g),h.writeMessageBegin("render_vega",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("render_vega",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.render_vega(v.session,v.widget_id,v.vega_json,v.compression_level,v.nonce,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new yw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("render_vega",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("render_vega",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_result_row_for_pixel(y,p,h){const v=new E3;v.read(p),p.readMessageEnd(),this._handler.get_result_row_for_pixel.length===7?Promise.resolve(this._handler.get_result_row_for_pixel.bind(this._handler)(v.session,v.widget_id,v.pixel,v.table_col_names,v.column_format,v.pixelRadius,v.nonce)).then(g=>{const E=new mw({success:g});h.writeMessageBegin("get_result_row_for_pixel",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new mw(g),h.writeMessageBegin("get_result_row_for_pixel",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_result_row_for_pixel",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_result_row_for_pixel(v.session,v.widget_id,v.pixel,v.table_col_names,v.column_format,v.pixelRadius,v.nonce,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new mw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_result_row_for_pixel",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_result_row_for_pixel",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_create_custom_expression(y,p,h){const v=new S3;v.read(p),p.readMessageEnd(),this._handler.create_custom_expression.length===2?Promise.resolve(this._handler.create_custom_expression.bind(this._handler)(v.session,v.custom_expression)).then(g=>{const E=new ww({success:g});h.writeMessageBegin("create_custom_expression",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new ww(g),h.writeMessageBegin("create_custom_expression",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("create_custom_expression",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.create_custom_expression(v.session,v.custom_expression,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new ww(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("create_custom_expression",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("create_custom_expression",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_custom_expressions(y,p,h){const v=new x3;v.read(p),p.readMessageEnd(),this._handler.get_custom_expressions.length===1?Promise.resolve(this._handler.get_custom_expressions.bind(this._handler)(v.session)).then(g=>{const E=new bw({success:g});h.writeMessageBegin("get_custom_expressions",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new bw(g),h.writeMessageBegin("get_custom_expressions",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_custom_expressions",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_custom_expressions(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new bw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_custom_expressions",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_custom_expressions",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_update_custom_expression(y,p,h){const v=new B3;v.read(p),p.readMessageEnd(),this._handler.update_custom_expression.length===3?Promise.resolve(this._handler.update_custom_expression.bind(this._handler)(v.session,v.id,v.expression_json)).then(g=>{const E=new Tw({success:g});h.writeMessageBegin("update_custom_expression",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Tw(g),h.writeMessageBegin("update_custom_expression",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("update_custom_expression",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.update_custom_expression(v.session,v.id,v.expression_json,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Tw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("update_custom_expression",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("update_custom_expression",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_delete_custom_expressions(y,p,h){const v=new k3;v.read(p),p.readMessageEnd(),this._handler.delete_custom_expressions.length===3?Promise.resolve(this._handler.delete_custom_expressions.bind(this._handler)(v.session,v.custom_expression_ids,v.do_soft_delete)).then(g=>{const E=new vw({success:g});h.writeMessageBegin("delete_custom_expressions",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new vw(g),h.writeMessageBegin("delete_custom_expressions",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("delete_custom_expressions",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.delete_custom_expressions(v.session,v.custom_expression_ids,v.do_soft_delete,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new vw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("delete_custom_expressions",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("delete_custom_expressions",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_dashboard(y,p,h){const v=new I3;v.read(p),p.readMessageEnd(),this._handler.get_dashboard.length===2?Promise.resolve(this._handler.get_dashboard.bind(this._handler)(v.session,v.dashboard_id)).then(g=>{const E=new Ew({success:g});h.writeMessageBegin("get_dashboard",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Ew(g),h.writeMessageBegin("get_dashboard",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_dashboard",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_dashboard(v.session,v.dashboard_id,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Ew(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_dashboard",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_dashboard",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_dashboards(y,p,h){const v=new F3;v.read(p),p.readMessageEnd(),this._handler.get_dashboards.length===1?Promise.resolve(this._handler.get_dashboards.bind(this._handler)(v.session)).then(g=>{const E=new Sw({success:g});h.writeMessageBegin("get_dashboards",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Sw(g),h.writeMessageBegin("get_dashboards",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_dashboards",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_dashboards(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Sw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_dashboards",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_dashboards",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_create_dashboard(y,p,h){const v=new O3;v.read(p),p.readMessageEnd(),this._handler.create_dashboard.length===5?Promise.resolve(this._handler.create_dashboard.bind(this._handler)(v.session,v.dashboard_name,v.dashboard_state,v.image_hash,v.dashboard_metadata)).then(g=>{const E=new xw({success:g});h.writeMessageBegin("create_dashboard",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new xw(g),h.writeMessageBegin("create_dashboard",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("create_dashboard",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.create_dashboard(v.session,v.dashboard_name,v.dashboard_state,v.image_hash,v.dashboard_metadata,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new xw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("create_dashboard",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("create_dashboard",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_replace_dashboard(y,p,h){const v=new M3;v.read(p),p.readMessageEnd(),this._handler.replace_dashboard.length===7?Promise.resolve(this._handler.replace_dashboard.bind(this._handler)(v.session,v.dashboard_id,v.dashboard_name,v.dashboard_owner,v.dashboard_state,v.image_hash,v.dashboard_metadata)).then(g=>{const E=new Bw({success:g});h.writeMessageBegin("replace_dashboard",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Bw(g),h.writeMessageBegin("replace_dashboard",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("replace_dashboard",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.replace_dashboard(v.session,v.dashboard_id,v.dashboard_name,v.dashboard_owner,v.dashboard_state,v.image_hash,v.dashboard_metadata,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Bw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("replace_dashboard",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("replace_dashboard",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_delete_dashboard(y,p,h){const v=new A3;v.read(p),p.readMessageEnd(),this._handler.delete_dashboard.length===2?Promise.resolve(this._handler.delete_dashboard.bind(this._handler)(v.session,v.dashboard_id)).then(g=>{const E=new kw({success:g});h.writeMessageBegin("delete_dashboard",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new kw(g),h.writeMessageBegin("delete_dashboard",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("delete_dashboard",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.delete_dashboard(v.session,v.dashboard_id,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new kw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("delete_dashboard",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("delete_dashboard",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_share_dashboards(y,p,h){const v=new N3;v.read(p),p.readMessageEnd(),this._handler.share_dashboards.length===4?Promise.resolve(this._handler.share_dashboards.bind(this._handler)(v.session,v.dashboard_ids,v.groups,v.permissions)).then(g=>{const E=new Iw({success:g});h.writeMessageBegin("share_dashboards",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Iw(g),h.writeMessageBegin("share_dashboards",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("share_dashboards",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.share_dashboards(v.session,v.dashboard_ids,v.groups,v.permissions,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Iw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("share_dashboards",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("share_dashboards",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_delete_dashboards(y,p,h){const v=new C3;v.read(p),p.readMessageEnd(),this._handler.delete_dashboards.length===2?Promise.resolve(this._handler.delete_dashboards.bind(this._handler)(v.session,v.dashboard_ids)).then(g=>{const E=new Fw({success:g});h.writeMessageBegin("delete_dashboards",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Fw(g),h.writeMessageBegin("delete_dashboards",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("delete_dashboards",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.delete_dashboards(v.session,v.dashboard_ids,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Fw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("delete_dashboards",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("delete_dashboards",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_share_dashboard(y,p,h){const v=new R3;v.read(p),p.readMessageEnd(),this._handler.share_dashboard.length===6?Promise.resolve(this._handler.share_dashboard.bind(this._handler)(v.session,v.dashboard_id,v.groups,v.objects,v.permissions,v.grant_role)).then(g=>{const E=new Ow({success:g});h.writeMessageBegin("share_dashboard",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Ow(g),h.writeMessageBegin("share_dashboard",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("share_dashboard",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.share_dashboard(v.session,v.dashboard_id,v.groups,v.objects,v.permissions,v.grant_role,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Ow(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("share_dashboard",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("share_dashboard",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_unshare_dashboard(y,p,h){const v=new L3;v.read(p),p.readMessageEnd(),this._handler.unshare_dashboard.length===5?Promise.resolve(this._handler.unshare_dashboard.bind(this._handler)(v.session,v.dashboard_id,v.groups,v.objects,v.permissions)).then(g=>{const E=new Mw({success:g});h.writeMessageBegin("unshare_dashboard",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Mw(g),h.writeMessageBegin("unshare_dashboard",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("unshare_dashboard",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.unshare_dashboard(v.session,v.dashboard_id,v.groups,v.objects,v.permissions,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Mw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("unshare_dashboard",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("unshare_dashboard",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_unshare_dashboards(y,p,h){const v=new P3;v.read(p),p.readMessageEnd(),this._handler.unshare_dashboards.length===4?Promise.resolve(this._handler.unshare_dashboards.bind(this._handler)(v.session,v.dashboard_ids,v.groups,v.permissions)).then(g=>{const E=new Aw({success:g});h.writeMessageBegin("unshare_dashboards",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Aw(g),h.writeMessageBegin("unshare_dashboards",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("unshare_dashboards",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.unshare_dashboards(v.session,v.dashboard_ids,v.groups,v.permissions,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Aw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("unshare_dashboards",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("unshare_dashboards",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_dashboard_grantees(y,p,h){const v=new D3;v.read(p),p.readMessageEnd(),this._handler.get_dashboard_grantees.length===2?Promise.resolve(this._handler.get_dashboard_grantees.bind(this._handler)(v.session,v.dashboard_id)).then(g=>{const E=new Nw({success:g});h.writeMessageBegin("get_dashboard_grantees",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Nw(g),h.writeMessageBegin("get_dashboard_grantees",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_dashboard_grantees",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_dashboard_grantees(v.session,v.dashboard_id,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Nw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_dashboard_grantees",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_dashboard_grantees",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_link_view(y,p,h){const v=new j3;v.read(p),p.readMessageEnd(),this._handler.get_link_view.length===2?Promise.resolve(this._handler.get_link_view.bind(this._handler)(v.session,v.link)).then(g=>{const E=new Cw({success:g});h.writeMessageBegin("get_link_view",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Cw(g),h.writeMessageBegin("get_link_view",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_link_view",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_link_view(v.session,v.link,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Cw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_link_view",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_link_view",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_create_link(y,p,h){const v=new U3;v.read(p),p.readMessageEnd(),this._handler.create_link.length===3?Promise.resolve(this._handler.create_link.bind(this._handler)(v.session,v.view_state,v.view_metadata)).then(g=>{const E=new Rw({success:g});h.writeMessageBegin("create_link",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Rw(g),h.writeMessageBegin("create_link",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("create_link",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.create_link(v.session,v.view_state,v.view_metadata,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Rw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("create_link",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("create_link",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_load_table_binary(y,p,h){const v=new $3;v.read(p),p.readMessageEnd(),this._handler.load_table_binary.length===4?Promise.resolve(this._handler.load_table_binary.bind(this._handler)(v.session,v.table_name,v.rows,v.column_names)).then(g=>{const E=new Lw({success:g});h.writeMessageBegin("load_table_binary",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Lw(g),h.writeMessageBegin("load_table_binary",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("load_table_binary",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.load_table_binary(v.session,v.table_name,v.rows,v.column_names,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Lw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("load_table_binary",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("load_table_binary",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_load_table_binary_columnar(y,p,h){const v=new z3;v.read(p),p.readMessageEnd(),this._handler.load_table_binary_columnar.length===4?Promise.resolve(this._handler.load_table_binary_columnar.bind(this._handler)(v.session,v.table_name,v.cols,v.column_names)).then(g=>{const E=new Pw({success:g});h.writeMessageBegin("load_table_binary_columnar",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Pw(g),h.writeMessageBegin("load_table_binary_columnar",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("load_table_binary_columnar",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.load_table_binary_columnar(v.session,v.table_name,v.cols,v.column_names,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Pw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("load_table_binary_columnar",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("load_table_binary_columnar",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_load_table_binary_columnar_polys(y,p,h){const v=new q3;v.read(p),p.readMessageEnd(),this._handler.load_table_binary_columnar_polys.length===5?Promise.resolve(this._handler.load_table_binary_columnar_polys.bind(this._handler)(v.session,v.table_name,v.cols,v.column_names,v.assign_render_groups)).then(g=>{const E=new Dw({success:g});h.writeMessageBegin("load_table_binary_columnar_polys",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Dw(g),h.writeMessageBegin("load_table_binary_columnar_polys",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("load_table_binary_columnar_polys",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.load_table_binary_columnar_polys(v.session,v.table_name,v.cols,v.column_names,v.assign_render_groups,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Dw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("load_table_binary_columnar_polys",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("load_table_binary_columnar_polys",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_load_table_binary_arrow(y,p,h){const v=new G3;v.read(p),p.readMessageEnd(),this._handler.load_table_binary_arrow.length===4?Promise.resolve(this._handler.load_table_binary_arrow.bind(this._handler)(v.session,v.table_name,v.arrow_stream,v.use_column_names)).then(g=>{const E=new jw({success:g});h.writeMessageBegin("load_table_binary_arrow",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new jw(g),h.writeMessageBegin("load_table_binary_arrow",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("load_table_binary_arrow",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.load_table_binary_arrow(v.session,v.table_name,v.arrow_stream,v.use_column_names,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new jw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("load_table_binary_arrow",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("load_table_binary_arrow",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_load_table(y,p,h){const v=new V3;v.read(p),p.readMessageEnd(),this._handler.load_table.length===4?Promise.resolve(this._handler.load_table.bind(this._handler)(v.session,v.table_name,v.rows,v.column_names)).then(g=>{const E=new Uw({success:g});h.writeMessageBegin("load_table",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Uw(g),h.writeMessageBegin("load_table",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("load_table",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.load_table(v.session,v.table_name,v.rows,v.column_names,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Uw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("load_table",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("load_table",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_detect_column_types(y,p,h){const v=new W3;v.read(p),p.readMessageEnd(),this._handler.detect_column_types.length===3?Promise.resolve(this._handler.detect_column_types.bind(this._handler)(v.session,v.file_name,v.copy_params)).then(g=>{const E=new $w({success:g});h.writeMessageBegin("detect_column_types",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new $w(g),h.writeMessageBegin("detect_column_types",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("detect_column_types",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.detect_column_types(v.session,v.file_name,v.copy_params,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new $w(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("detect_column_types",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("detect_column_types",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_create_table(y,p,h){const v=new H3;v.read(p),p.readMessageEnd(),this._handler.create_table.length===4?Promise.resolve(this._handler.create_table.bind(this._handler)(v.session,v.table_name,v.row_desc,v.create_params)).then(g=>{const E=new zw({success:g});h.writeMessageBegin("create_table",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new zw(g),h.writeMessageBegin("create_table",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("create_table",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.create_table(v.session,v.table_name,v.row_desc,v.create_params,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new zw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("create_table",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("create_table",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_import_table(y,p,h){const v=new Y3;v.read(p),p.readMessageEnd(),this._handler.import_table.length===4?Promise.resolve(this._handler.import_table.bind(this._handler)(v.session,v.table_name,v.file_name,v.copy_params)).then(g=>{const E=new qw({success:g});h.writeMessageBegin("import_table",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new qw(g),h.writeMessageBegin("import_table",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("import_table",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.import_table(v.session,v.table_name,v.file_name,v.copy_params,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new qw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("import_table",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("import_table",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_import_geo_table(y,p,h){const v=new X3;v.read(p),p.readMessageEnd(),this._handler.import_geo_table.length===6?Promise.resolve(this._handler.import_geo_table.bind(this._handler)(v.session,v.table_name,v.file_name,v.copy_params,v.row_desc,v.create_params)).then(g=>{const E=new Gw({success:g});h.writeMessageBegin("import_geo_table",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Gw(g),h.writeMessageBegin("import_geo_table",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("import_geo_table",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.import_geo_table(v.session,v.table_name,v.file_name,v.copy_params,v.row_desc,v.create_params,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Gw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("import_geo_table",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("import_geo_table",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_import_table_status(y,p,h){const v=new K3;v.read(p),p.readMessageEnd(),this._handler.import_table_status.length===2?Promise.resolve(this._handler.import_table_status.bind(this._handler)(v.session,v.import_id)).then(g=>{const E=new Vw({success:g});h.writeMessageBegin("import_table_status",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Vw(g),h.writeMessageBegin("import_table_status",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("import_table_status",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.import_table_status(v.session,v.import_id,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Vw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("import_table_status",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("import_table_status",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_first_geo_file_in_archive(y,p,h){const v=new J3;v.read(p),p.readMessageEnd(),this._handler.get_first_geo_file_in_archive.length===3?Promise.resolve(this._handler.get_first_geo_file_in_archive.bind(this._handler)(v.session,v.archive_path,v.copy_params)).then(g=>{const E=new Ww({success:g});h.writeMessageBegin("get_first_geo_file_in_archive",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Ww(g),h.writeMessageBegin("get_first_geo_file_in_archive",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_first_geo_file_in_archive",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_first_geo_file_in_archive(v.session,v.archive_path,v.copy_params,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Ww(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_first_geo_file_in_archive",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_first_geo_file_in_archive",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_all_files_in_archive(y,p,h){const v=new Q3;v.read(p),p.readMessageEnd(),this._handler.get_all_files_in_archive.length===3?Promise.resolve(this._handler.get_all_files_in_archive.bind(this._handler)(v.session,v.archive_path,v.copy_params)).then(g=>{const E=new Hw({success:g});h.writeMessageBegin("get_all_files_in_archive",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Hw(g),h.writeMessageBegin("get_all_files_in_archive",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_all_files_in_archive",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_all_files_in_archive(v.session,v.archive_path,v.copy_params,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Hw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_all_files_in_archive",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_all_files_in_archive",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_layers_in_geo_file(y,p,h){const v=new Z3;v.read(p),p.readMessageEnd(),this._handler.get_layers_in_geo_file.length===3?Promise.resolve(this._handler.get_layers_in_geo_file.bind(this._handler)(v.session,v.file_name,v.copy_params)).then(g=>{const E=new Yw({success:g});h.writeMessageBegin("get_layers_in_geo_file",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Yw(g),h.writeMessageBegin("get_layers_in_geo_file",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_layers_in_geo_file",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_layers_in_geo_file(v.session,v.file_name,v.copy_params,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Yw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_layers_in_geo_file",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_layers_in_geo_file",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_query_get_outer_fragment_count(y,p,h){const v=new eL;v.read(p),p.readMessageEnd(),this._handler.query_get_outer_fragment_count.length===2?Promise.resolve(this._handler.query_get_outer_fragment_count.bind(this._handler)(v.session,v.query)).then(g=>{const E=new Xw({success:g});h.writeMessageBegin("query_get_outer_fragment_count",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Xw(g),h.writeMessageBegin("query_get_outer_fragment_count",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("query_get_outer_fragment_count",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.query_get_outer_fragment_count(v.session,v.query,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Xw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("query_get_outer_fragment_count",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("query_get_outer_fragment_count",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_check_table_consistency(y,p,h){const v=new tL;v.read(p),p.readMessageEnd(),this._handler.check_table_consistency.length===2?Promise.resolve(this._handler.check_table_consistency.bind(this._handler)(v.session,v.table_id)).then(g=>{const E=new Kw({success:g});h.writeMessageBegin("check_table_consistency",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Kw(g),h.writeMessageBegin("check_table_consistency",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("check_table_consistency",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.check_table_consistency(v.session,v.table_id,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Kw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("check_table_consistency",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("check_table_consistency",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_start_query(y,p,h){const v=new nL;v.read(p),p.readMessageEnd(),this._handler.start_query.length===6?Promise.resolve(this._handler.start_query.bind(this._handler)(v.leaf_session,v.parent_session,v.query_ra,v.start_time_str,v.just_explain,v.outer_fragment_indices)).then(g=>{const E=new Jw({success:g});h.writeMessageBegin("start_query",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Jw(g),h.writeMessageBegin("start_query",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("start_query",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.start_query(v.leaf_session,v.parent_session,v.query_ra,v.start_time_str,v.just_explain,v.outer_fragment_indices,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Jw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("start_query",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("start_query",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_execute_query_step(y,p,h){const v=new iL;v.read(p),p.readMessageEnd(),this._handler.execute_query_step.length===3?Promise.resolve(this._handler.execute_query_step.bind(this._handler)(v.pending_query,v.subquery_id,v.start_time_str)).then(g=>{const E=new Qw({success:g});h.writeMessageBegin("execute_query_step",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Qw(g),h.writeMessageBegin("execute_query_step",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("execute_query_step",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.execute_query_step(v.pending_query,v.subquery_id,v.start_time_str,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Qw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("execute_query_step",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("execute_query_step",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_broadcast_serialized_rows(y,p,h){const v=new sL;v.read(p),p.readMessageEnd(),this._handler.broadcast_serialized_rows.length===5?Promise.resolve(this._handler.broadcast_serialized_rows.bind(this._handler)(v.serialized_rows,v.row_desc,v.query_id,v.subquery_id,v.is_final_subquery_result)).then(g=>{const E=new Zw({success:g});h.writeMessageBegin("broadcast_serialized_rows",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new Zw(g),h.writeMessageBegin("broadcast_serialized_rows",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("broadcast_serialized_rows",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.broadcast_serialized_rows(v.serialized_rows,v.row_desc,v.query_id,v.subquery_id,v.is_final_subquery_result,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new Zw(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("broadcast_serialized_rows",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("broadcast_serialized_rows",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_start_render_query(y,p,h){const v=new rL;v.read(p),p.readMessageEnd(),this._handler.start_render_query.length===4?Promise.resolve(this._handler.start_render_query.bind(this._handler)(v.session,v.widget_id,v.node_idx,v.vega_json)).then(g=>{const E=new eb({success:g});h.writeMessageBegin("start_render_query",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new eb(g),h.writeMessageBegin("start_render_query",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("start_render_query",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.start_render_query(v.session,v.widget_id,v.node_idx,v.vega_json,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new eb(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("start_render_query",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("start_render_query",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_execute_next_render_step(y,p,h){const v=new aL;v.read(p),p.readMessageEnd(),this._handler.execute_next_render_step.length===2?Promise.resolve(this._handler.execute_next_render_step.bind(this._handler)(v.pending_render,v.merged_data)).then(g=>{const E=new tb({success:g});h.writeMessageBegin("execute_next_render_step",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new tb(g),h.writeMessageBegin("execute_next_render_step",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("execute_next_render_step",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.execute_next_render_step(v.pending_render,v.merged_data,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new tb(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("execute_next_render_step",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("execute_next_render_step",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_insert_data(y,p,h){const v=new oL;v.read(p),p.readMessageEnd(),this._handler.insert_data.length===2?Promise.resolve(this._handler.insert_data.bind(this._handler)(v.session,v.insert_data)).then(g=>{const E=new nb({success:g});h.writeMessageBegin("insert_data",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new nb(g),h.writeMessageBegin("insert_data",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("insert_data",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.insert_data(v.session,v.insert_data,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new nb(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("insert_data",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("insert_data",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_insert_chunks(y,p,h){const v=new lL;v.read(p),p.readMessageEnd(),this._handler.insert_chunks.length===2?Promise.resolve(this._handler.insert_chunks.bind(this._handler)(v.session,v.insert_chunks)).then(g=>{const E=new ib({success:g});h.writeMessageBegin("insert_chunks",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new ib(g),h.writeMessageBegin("insert_chunks",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("insert_chunks",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.insert_chunks(v.session,v.insert_chunks,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new ib(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("insert_chunks",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("insert_chunks",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_checkpoint(y,p,h){const v=new cL;v.read(p),p.readMessageEnd(),this._handler.checkpoint.length===2?Promise.resolve(this._handler.checkpoint.bind(this._handler)(v.session,v.table_id)).then(g=>{const E=new sb({success:g});h.writeMessageBegin("checkpoint",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new sb(g),h.writeMessageBegin("checkpoint",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("checkpoint",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.checkpoint(v.session,v.table_id,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new sb(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("checkpoint",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("checkpoint",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_roles(y,p,h){const v=new dL;v.read(p),p.readMessageEnd(),this._handler.get_roles.length===1?Promise.resolve(this._handler.get_roles.bind(this._handler)(v.session)).then(g=>{const E=new rb({success:g});h.writeMessageBegin("get_roles",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new rb(g),h.writeMessageBegin("get_roles",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_roles",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_roles(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new rb(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_roles",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_roles",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_db_objects_for_grantee(y,p,h){const v=new fL;v.read(p),p.readMessageEnd(),this._handler.get_db_objects_for_grantee.length===2?Promise.resolve(this._handler.get_db_objects_for_grantee.bind(this._handler)(v.session,v.roleName)).then(g=>{const E=new ab({success:g});h.writeMessageBegin("get_db_objects_for_grantee",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new ab(g),h.writeMessageBegin("get_db_objects_for_grantee",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_db_objects_for_grantee",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_db_objects_for_grantee(v.session,v.roleName,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new ab(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_db_objects_for_grantee",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_db_objects_for_grantee",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_db_object_privs(y,p,h){const v=new uL;v.read(p),p.readMessageEnd(),this._handler.get_db_object_privs.length===3?Promise.resolve(this._handler.get_db_object_privs.bind(this._handler)(v.session,v.objectName,v.type)).then(g=>{const E=new ob({success:g});h.writeMessageBegin("get_db_object_privs",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new ob(g),h.writeMessageBegin("get_db_object_privs",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_db_object_privs",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_db_object_privs(v.session,v.objectName,v.type,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new ob(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_db_object_privs",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_db_object_privs",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_all_roles_for_user(y,p,h){const v=new hL;v.read(p),p.readMessageEnd(),this._handler.get_all_roles_for_user.length===2?Promise.resolve(this._handler.get_all_roles_for_user.bind(this._handler)(v.session,v.userName)).then(g=>{const E=new lb({success:g});h.writeMessageBegin("get_all_roles_for_user",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new lb(g),h.writeMessageBegin("get_all_roles_for_user",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_all_roles_for_user",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_all_roles_for_user(v.session,v.userName,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new lb(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_all_roles_for_user",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_all_roles_for_user",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_all_effective_roles_for_user(y,p,h){const v=new pL;v.read(p),p.readMessageEnd(),this._handler.get_all_effective_roles_for_user.length===2?Promise.resolve(this._handler.get_all_effective_roles_for_user.bind(this._handler)(v.session,v.userName)).then(g=>{const E=new cb({success:g});h.writeMessageBegin("get_all_effective_roles_for_user",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new cb(g),h.writeMessageBegin("get_all_effective_roles_for_user",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_all_effective_roles_for_user",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_all_effective_roles_for_user(v.session,v.userName,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new cb(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_all_effective_roles_for_user",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_all_effective_roles_for_user",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_has_role(y,p,h){const v=new gL;v.read(p),p.readMessageEnd(),this._handler.has_role.length===3?Promise.resolve(this._handler.has_role.bind(this._handler)(v.session,v.granteeName,v.roleName)).then(g=>{const E=new db({success:g});h.writeMessageBegin("has_role",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new db(g),h.writeMessageBegin("has_role",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("has_role",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.has_role(v.session,v.granteeName,v.roleName,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new db(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("has_role",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("has_role",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_has_object_privilege(y,p,h){const v=new _L;v.read(p),p.readMessageEnd(),this._handler.has_object_privilege.length===5?Promise.resolve(this._handler.has_object_privilege.bind(this._handler)(v.session,v.granteeName,v.ObjectName,v.objectType,v.permissions)).then(g=>{const E=new fb({success:g});h.writeMessageBegin("has_object_privilege",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new fb(g),h.writeMessageBegin("has_object_privilege",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("has_object_privilege",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.has_object_privilege(v.session,v.granteeName,v.ObjectName,v.objectType,v.permissions,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new fb(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("has_object_privilege",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("has_object_privilege",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_set_license_key(y,p,h){const v=new yL;v.read(p),p.readMessageEnd(),this._handler.set_license_key.length===3?Promise.resolve(this._handler.set_license_key.bind(this._handler)(v.session,v.key,v.nonce)).then(g=>{const E=new ub({success:g});h.writeMessageBegin("set_license_key",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new ub(g),h.writeMessageBegin("set_license_key",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("set_license_key",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.set_license_key(v.session,v.key,v.nonce,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new ub(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("set_license_key",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("set_license_key",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_license_claims(y,p,h){const v=new mL;v.read(p),p.readMessageEnd(),this._handler.get_license_claims.length===2?Promise.resolve(this._handler.get_license_claims.bind(this._handler)(v.session,v.nonce)).then(g=>{const E=new hb({success:g});h.writeMessageBegin("get_license_claims",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new hb(g),h.writeMessageBegin("get_license_claims",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_license_claims",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_license_claims(v.session,v.nonce,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new hb(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_license_claims",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_license_claims",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_device_parameters(y,p,h){const v=new wL;v.read(p),p.readMessageEnd(),this._handler.get_device_parameters.length===1?Promise.resolve(this._handler.get_device_parameters.bind(this._handler)(v.session)).then(g=>{const E=new pb({success:g});h.writeMessageBegin("get_device_parameters",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new pb(g),h.writeMessageBegin("get_device_parameters",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_device_parameters",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_device_parameters(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new pb(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_device_parameters",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_device_parameters",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_register_runtime_extension_functions(y,p,h){const v=new bL;v.read(p),p.readMessageEnd(),this._handler.register_runtime_extension_functions.length===4?Promise.resolve(this._handler.register_runtime_extension_functions.bind(this._handler)(v.session,v.udfs,v.udtfs,v.device_ir_map)).then(g=>{const E=new gb({success:g});h.writeMessageBegin("register_runtime_extension_functions",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new gb(g),h.writeMessageBegin("register_runtime_extension_functions",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("register_runtime_extension_functions",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.register_runtime_extension_functions(v.session,v.udfs,v.udtfs,v.device_ir_map,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new gb(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("register_runtime_extension_functions",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("register_runtime_extension_functions",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_table_function_names(y,p,h){const v=new TL;v.read(p),p.readMessageEnd(),this._handler.get_table_function_names.length===1?Promise.resolve(this._handler.get_table_function_names.bind(this._handler)(v.session)).then(g=>{const E=new _b({success:g});h.writeMessageBegin("get_table_function_names",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new _b(g),h.writeMessageBegin("get_table_function_names",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_table_function_names",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_table_function_names(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new _b(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_table_function_names",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_table_function_names",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_runtime_table_function_names(y,p,h){const v=new vL;v.read(p),p.readMessageEnd(),this._handler.get_runtime_table_function_names.length===1?Promise.resolve(this._handler.get_runtime_table_function_names.bind(this._handler)(v.session)).then(g=>{const E=new yb({success:g});h.writeMessageBegin("get_runtime_table_function_names",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new yb(g),h.writeMessageBegin("get_runtime_table_function_names",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_runtime_table_function_names",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_runtime_table_function_names(v.session,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new yb(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_runtime_table_function_names",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_runtime_table_function_names",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}process_get_table_function_details(y,p,h){const v=new EL;v.read(p),p.readMessageEnd(),this._handler.get_table_function_details.length===2?Promise.resolve(this._handler.get_table_function_details.bind(this._handler)(v.session,v.udtf_names)).then(g=>{const E=new mb({success:g});h.writeMessageBegin("get_table_function_details",a.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(g=>{let E;g instanceof l.TDBException?(E=new mb(g),h.writeMessageBegin("get_table_function_details",a.MessageType.REPLY,y)):(E=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_table_function_details",a.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_table_function_details(v.session,v.udtf_names,(g,E)=>{let I;g===null||typeof g>"u"||g instanceof l.TDBException?(I=new mb(g!==null||typeof g>"u"?g:{success:E}),h.writeMessageBegin("get_table_function_details",a.MessageType.REPLY,y)):(I=new a.TApplicationException(a.TApplicationExceptionType.UNKNOWN,g.message),h.writeMessageBegin("get_table_function_details",a.MessageType.EXCEPTION,y)),I.write(h),h.writeMessageEnd(),h.flush()})}}},2818:(c,d,f)=>{const a=f(9262).Thrift;f(135);const _=c.exports={};_.TDeviceType={CPU:0,GPU:1},_.TDatumType={SMALLINT:0,INT:1,BIGINT:2,FLOAT:3,DECIMAL:4,DOUBLE:5,STR:6,TIME:7,TIMESTAMP:8,DATE:9,BOOL:10,INTERVAL_DAY_TIME:11,INTERVAL_YEAR_MONTH:12,POINT:13,LINESTRING:14,POLYGON:15,MULTIPOLYGON:16,TINYINT:17,GEOMETRY:18,GEOGRAPHY:19},_.TEncodingType={NONE:0,FIXED:1,RL:2,DIFF:3,DICT:4,SPARSE:5,GEOINT:6,DATE_IN_DAYS:7},c.exports.TTypeInfo=class{constructor(w){this.type=null,this.encoding=null,this.nullable=null,this.is_array=null,this.precision=null,this.scale=null,this.comp_param=null,this.size=-1,w&&(w.type!==void 0&&w.type!==null&&(this.type=w.type),w.encoding!==void 0&&w.encoding!==null&&(this.encoding=w.encoding),w.nullable!==void 0&&w.nullable!==null&&(this.nullable=w.nullable),w.is_array!==void 0&&w.is_array!==null&&(this.is_array=w.is_array),w.precision!==void 0&&w.precision!==null&&(this.precision=w.precision),w.scale!==void 0&&w.scale!==null&&(this.scale=w.scale),w.comp_param!==void 0&&w.comp_param!==null&&(this.comp_param=w.comp_param),w.size!==void 0&&w.size!==null&&(this.size=w.size))}read(w){for(w.readStructBegin();;){const m=w.readFieldBegin(),l=m.ftype,T=m.fid;if(l==a.Type.STOP)break;switch(T){case 1:l==a.Type.I32?this.type=w.readI32():w.skip(l);break;case 4:l==a.Type.I32?this.encoding=w.readI32():w.skip(l);break;case 2:l==a.Type.BOOL?this.nullable=w.readBool():w.skip(l);break;case 3:l==a.Type.BOOL?this.is_array=w.readBool():w.skip(l);break;case 5:l==a.Type.I32?this.precision=w.readI32():w.skip(l);break;case 6:l==a.Type.I32?this.scale=w.readI32():w.skip(l);break;case 7:l==a.Type.I32?this.comp_param=w.readI32():w.skip(l);break;case 8:l==a.Type.I32?this.size=w.readI32():w.skip(l);break;default:w.skip(l)}w.readFieldEnd()}w.readStructEnd()}write(w){w.writeStructBegin("TTypeInfo"),this.type!==null&&this.type!==void 0&&(w.writeFieldBegin("type",a.Type.I32,1),w.writeI32(this.type),w.writeFieldEnd()),this.encoding!==null&&this.encoding!==void 0&&(w.writeFieldBegin("encoding",a.Type.I32,4),w.writeI32(this.encoding),w.writeFieldEnd()),this.nullable!==null&&this.nullable!==void 0&&(w.writeFieldBegin("nullable",a.Type.BOOL,2),w.writeBool(this.nullable),w.writeFieldEnd()),this.is_array!==null&&this.is_array!==void 0&&(w.writeFieldBegin("is_array",a.Type.BOOL,3),w.writeBool(this.is_array),w.writeFieldEnd()),this.precision!==null&&this.precision!==void 0&&(w.writeFieldBegin("precision",a.Type.I32,5),w.writeI32(this.precision),w.writeFieldEnd()),this.scale!==null&&this.scale!==void 0&&(w.writeFieldBegin("scale",a.Type.I32,6),w.writeI32(this.scale),w.writeFieldEnd()),this.comp_param!==null&&this.comp_param!==void 0&&(w.writeFieldBegin("comp_param",a.Type.I32,7),w.writeI32(this.comp_param),w.writeFieldEnd()),this.size!==null&&this.size!==void 0&&(w.writeFieldBegin("size",a.Type.I32,8),w.writeI32(this.size),w.writeFieldEnd()),w.writeFieldStop(),w.writeStructEnd()}}},4494:(c,d,f)=>{const a=f(9262).Thrift;f(135);const _=c.exports={};_.TCompletionHintType={COLUMN:0,TABLE:1,VIEW:2,SCHEMA:3,CATALOG:4,REPOSITORY:5,FUNCTION:6,KEYWORD:7},c.exports.TCompletionHint=class{constructor(w){this.type=null,this.hints=null,this.replaced=null,w&&(w.type!==void 0&&w.type!==null&&(this.type=w.type),w.hints!==void 0&&w.hints!==null&&(this.hints=a.copyList(w.hints,[null])),w.replaced!==void 0&&w.replaced!==null&&(this.replaced=w.replaced))}read(w){for(w.readStructBegin();;){const m=w.readFieldBegin(),l=m.ftype,T=m.fid;if(l==a.Type.STOP)break;switch(T){case 1:l==a.Type.I32?this.type=w.readI32():w.skip(l);break;case 2:if(l==a.Type.LIST){this.hints=[];const S=w.readListBegin().size||0;for(let x=0;x<S;++x){let B=null;B=w.readString(),this.hints.push(B)}w.readListEnd()}else w.skip(l);break;case 3:l==a.Type.STRING?this.replaced=w.readString():w.skip(l);break;default:w.skip(l)}w.readFieldEnd()}w.readStructEnd()}write(w){if(w.writeStructBegin("TCompletionHint"),this.type!==null&&this.type!==void 0&&(w.writeFieldBegin("type",a.Type.I32,1),w.writeI32(this.type),w.writeFieldEnd()),this.hints!==null&&this.hints!==void 0){w.writeFieldBegin("hints",a.Type.LIST,2),w.writeListBegin(a.Type.STRING,this.hints.length);for(let m in this.hints)this.hints.hasOwnProperty(m)&&(m=this.hints[m],w.writeString(m));w.writeListEnd(),w.writeFieldEnd()}this.replaced!==null&&this.replaced!==void 0&&(w.writeFieldBegin("replaced",a.Type.STRING,3),w.writeString(this.replaced),w.writeFieldEnd()),w.writeFieldStop(),w.writeStructEnd()}}},1396:(c,d,f)=>{const a=f(9262).Thrift;f(135);const _=c.exports={};_.TExtArgumentType={Int8:0,Int16:1,Int32:2,Int64:3,Float:4,Double:5,Void:6,PInt8:7,PInt16:8,PInt32:9,PInt64:10,PFloat:11,PDouble:12,PBool:13,Bool:14,ArrayInt8:15,ArrayInt16:16,ArrayInt32:17,ArrayInt64:18,ArrayFloat:19,ArrayDouble:20,ArrayBool:21,GeoPoint:22,GeoLineString:23,Cursor:24,GeoPolygon:25,GeoMultiPolygon:26,ColumnInt8:27,ColumnInt16:28,ColumnInt32:29,ColumnInt64:30,ColumnFloat:31,ColumnDouble:32,ColumnBool:33,TextEncodingNone:34,TextEncodingDict:35,ColumnListInt8:36,ColumnListInt16:37,ColumnListInt32:38,ColumnListInt64:39,ColumnListFloat:40,ColumnListDouble:41,ColumnListBool:42,ColumnTextEncodingDict:43,ColumnListTextEncodingDict:44,ColumnTimestamp:45,Timestamp:46},_.TOutputBufferSizeType={kConstant:0,kUserSpecifiedConstantParameter:1,kUserSpecifiedRowMultiplier:2,kTableFunctionSpecifiedParameter:3,kPreFlightParameter:4},c.exports.TUserDefinedFunction=class{constructor(w){this.name=null,this.argTypes=null,this.retType=null,w&&(w.name!==void 0&&w.name!==null&&(this.name=w.name),w.argTypes!==void 0&&w.argTypes!==null&&(this.argTypes=a.copyList(w.argTypes,[null])),w.retType!==void 0&&w.retType!==null&&(this.retType=w.retType))}read(w){for(w.readStructBegin();;){const m=w.readFieldBegin(),l=m.ftype,T=m.fid;if(l==a.Type.STOP)break;switch(T){case 1:l==a.Type.STRING?this.name=w.readString():w.skip(l);break;case 2:if(l==a.Type.LIST){this.argTypes=[];const S=w.readListBegin().size||0;for(let x=0;x<S;++x){let B=null;B=w.readI32(),this.argTypes.push(B)}w.readListEnd()}else w.skip(l);break;case 3:l==a.Type.I32?this.retType=w.readI32():w.skip(l);break;default:w.skip(l)}w.readFieldEnd()}w.readStructEnd()}write(w){if(w.writeStructBegin("TUserDefinedFunction"),this.name!==null&&this.name!==void 0&&(w.writeFieldBegin("name",a.Type.STRING,1),w.writeString(this.name),w.writeFieldEnd()),this.argTypes!==null&&this.argTypes!==void 0){w.writeFieldBegin("argTypes",a.Type.LIST,2),w.writeListBegin(a.Type.I32,this.argTypes.length);for(let m in this.argTypes)this.argTypes.hasOwnProperty(m)&&(m=this.argTypes[m],w.writeI32(m));w.writeListEnd(),w.writeFieldEnd()}this.retType!==null&&this.retType!==void 0&&(w.writeFieldBegin("retType",a.Type.I32,3),w.writeI32(this.retType),w.writeFieldEnd()),w.writeFieldStop(),w.writeStructEnd()}},c.exports.TUserDefinedTableFunction=class{constructor(w){this.name=null,this.sizerType=null,this.sizerArgPos=null,this.inputArgTypes=null,this.outputArgTypes=null,this.sqlArgTypes=null,this.annotations=null,w&&(w.name!==void 0&&w.name!==null&&(this.name=w.name),w.sizerType!==void 0&&w.sizerType!==null&&(this.sizerType=w.sizerType),w.sizerArgPos!==void 0&&w.sizerArgPos!==null&&(this.sizerArgPos=w.sizerArgPos),w.inputArgTypes!==void 0&&w.inputArgTypes!==null&&(this.inputArgTypes=a.copyList(w.inputArgTypes,[null])),w.outputArgTypes!==void 0&&w.outputArgTypes!==null&&(this.outputArgTypes=a.copyList(w.outputArgTypes,[null])),w.sqlArgTypes!==void 0&&w.sqlArgTypes!==null&&(this.sqlArgTypes=a.copyList(w.sqlArgTypes,[null])),w.annotations!==void 0&&w.annotations!==null&&(this.annotations=a.copyList(w.annotations,[a.copyMap,null])))}read(w){for(w.readStructBegin();;){const m=w.readFieldBegin(),l=m.ftype,T=m.fid;if(l==a.Type.STOP)break;switch(T){case 1:l==a.Type.STRING?this.name=w.readString():w.skip(l);break;case 2:l==a.Type.I32?this.sizerType=w.readI32():w.skip(l);break;case 3:l==a.Type.I32?this.sizerArgPos=w.readI32():w.skip(l);break;case 4:if(l==a.Type.LIST){this.inputArgTypes=[];const S=w.readListBegin().size||0;for(let x=0;x<S;++x){let B=null;B=w.readI32(),this.inputArgTypes.push(B)}w.readListEnd()}else w.skip(l);break;case 5:if(l==a.Type.LIST){this.outputArgTypes=[];const S=w.readListBegin().size||0;for(let x=0;x<S;++x){let B=null;B=w.readI32(),this.outputArgTypes.push(B)}w.readListEnd()}else w.skip(l);break;case 6:if(l==a.Type.LIST){this.sqlArgTypes=[];const S=w.readListBegin().size||0;for(let x=0;x<S;++x){let B=null;B=w.readI32(),this.sqlArgTypes.push(B)}w.readListEnd()}else w.skip(l);break;case 7:if(l==a.Type.LIST){this.annotations=[];const S=w.readListBegin().size||0;for(let x=0;x<S;++x){let B=null;B={};const k=w.readMapBegin().size||0;for(let M=0;M<k;++M){let A=null,R=null;A=w.readString(),R=w.readString(),B[A]=R}w.readMapEnd(),this.annotations.push(B)}w.readListEnd()}else w.skip(l);break;default:w.skip(l)}w.readFieldEnd()}w.readStructEnd()}write(w){if(w.writeStructBegin("TUserDefinedTableFunction"),this.name!==null&&this.name!==void 0&&(w.writeFieldBegin("name",a.Type.STRING,1),w.writeString(this.name),w.writeFieldEnd()),this.sizerType!==null&&this.sizerType!==void 0&&(w.writeFieldBegin("sizerType",a.Type.I32,2),w.writeI32(this.sizerType),w.writeFieldEnd()),this.sizerArgPos!==null&&this.sizerArgPos!==void 0&&(w.writeFieldBegin("sizerArgPos",a.Type.I32,3),w.writeI32(this.sizerArgPos),w.writeFieldEnd()),this.inputArgTypes!==null&&this.inputArgTypes!==void 0){w.writeFieldBegin("inputArgTypes",a.Type.LIST,4),w.writeListBegin(a.Type.I32,this.inputArgTypes.length);for(let m in this.inputArgTypes)this.inputArgTypes.hasOwnProperty(m)&&(m=this.inputArgTypes[m],w.writeI32(m));w.writeListEnd(),w.writeFieldEnd()}if(this.outputArgTypes!==null&&this.outputArgTypes!==void 0){w.writeFieldBegin("outputArgTypes",a.Type.LIST,5),w.writeListBegin(a.Type.I32,this.outputArgTypes.length);for(let m in this.outputArgTypes)this.outputArgTypes.hasOwnProperty(m)&&(m=this.outputArgTypes[m],w.writeI32(m));w.writeListEnd(),w.writeFieldEnd()}if(this.sqlArgTypes!==null&&this.sqlArgTypes!==void 0){w.writeFieldBegin("sqlArgTypes",a.Type.LIST,6),w.writeListBegin(a.Type.I32,this.sqlArgTypes.length);for(let m in this.sqlArgTypes)this.sqlArgTypes.hasOwnProperty(m)&&(m=this.sqlArgTypes[m],w.writeI32(m));w.writeListEnd(),w.writeFieldEnd()}if(this.annotations!==null&&this.annotations!==void 0){w.writeFieldBegin("annotations",a.Type.LIST,7),w.writeListBegin(a.Type.MAP,this.annotations.length);for(let m in this.annotations)if(this.annotations.hasOwnProperty(m)){m=this.annotations[m],w.writeMapBegin(a.Type.STRING,a.Type.STRING,a.objectLength(m));for(let l in m)if(m.hasOwnProperty(l)){let T=m[l];w.writeString(l),w.writeString(T)}w.writeMapEnd()}w.writeListEnd(),w.writeFieldEnd()}w.writeFieldStop(),w.writeStructEnd()}}},2607:(c,d,f)=>{const a=f(9262).Thrift;f(135);const _=f(2818);f(4494);const w=f(3962);f(1396);const m=c.exports={};m.TExecuteMode={GPU:1,CPU:2},m.TSourceType={DELIMITED_FILE:0,GEO_FILE:1,PARQUET_FILE:2,RASTER_FILE:3,ODBC:4},m.TPartitionDetail={DEFAULT:0,REPLICATED:1,SHARDED:2,OTHER:3},m.TGeoFileLayerContents={EMPTY:0,GEO:1,NON_GEO:2,UNSUPPORTED_GEO:3},m.TImportHeaderRow={AUTODETECT:0,NO_HEADER:1,HAS_HEADER:2},m.TRole={SERVER:0,AGGREGATOR:1,LEAF:2,STRING_DICTIONARY:3},m.TTableType={DEFAULT:0,TEMPORARY:1,FOREIGN:2,VIEW:3},m.TTableRefreshUpdateType={ALL:0,APPEND:1},m.TTableRefreshTimingType={MANUAL:0,SCHEDULED:1},m.TTableRefreshIntervalType={NONE:0,HOUR:1,DAY:2},m.TMergeType={UNION:0,REDUCE:1},m.TRasterPointType={NONE:0,AUTO:1,SMALLINT:2,INT:3,FLOAT:4,DOUBLE:5,POINT:6},m.TRasterPointTransform={NONE:0,AUTO:1,FILE:2,WORLD:3},m.TQueryType={UNKNOWN:0,READ:1,WRITE:2,SCHEMA_READ:3,SCHEMA_WRITE:4},m.TArrowTransport={SHARED_MEMORY:0,WIRE:1},m.TExpressionRangeType={INVALID:0,INTEGER:1,FLOAT:2,DOUBLE:3},m.TDBObjectType={AbstractDBObjectType:0,DatabaseDBObjectType:1,TableDBObjectType:2,DashboardDBObjectType:3,ViewDBObjectType:4,ServerDBObjectType:5},m.TDataSourceType={TABLE:0},c.exports.TDatumVal=class{constructor(l){this.int_val=null,this.real_val=null,this.str_val=null,this.arr_val=null,l&&(l.int_val!==void 0&&l.int_val!==null&&(this.int_val=l.int_val),l.real_val!==void 0&&l.real_val!==null&&(this.real_val=l.real_val),l.str_val!==void 0&&l.str_val!==null&&(this.str_val=l.str_val),l.arr_val!==void 0&&l.arr_val!==null&&(this.arr_val=a.copyList(l.arr_val,[null])))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I64?this.int_val=l.readI64():l.skip(b);break;case 2:b==a.Type.DOUBLE?this.real_val=l.readDouble():l.skip(b);break;case 3:b==a.Type.STRING?this.str_val=l.readString():l.skip(b);break;case 4:if(b==a.Type.LIST){this.arr_val=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=new m.TDatum,k.read(l),this.arr_val.push(k)}l.readListEnd()}else l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TDatumVal"),this.int_val!==null&&this.int_val!==void 0&&(l.writeFieldBegin("int_val",a.Type.I64,1),l.writeI64(this.int_val),l.writeFieldEnd()),this.real_val!==null&&this.real_val!==void 0&&(l.writeFieldBegin("real_val",a.Type.DOUBLE,2),l.writeDouble(this.real_val),l.writeFieldEnd()),this.str_val!==null&&this.str_val!==void 0&&(l.writeFieldBegin("str_val",a.Type.STRING,3),l.writeString(this.str_val),l.writeFieldEnd()),this.arr_val!==null&&this.arr_val!==void 0){l.writeFieldBegin("arr_val",a.Type.LIST,4),l.writeListBegin(a.Type.STRUCT,this.arr_val.length);for(let T in this.arr_val)this.arr_val.hasOwnProperty(T)&&(T=this.arr_val[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDatum=class{constructor(l){this.val=null,this.is_null=null,l&&(l.val!==void 0&&l.val!==null&&(this.val=new m.TDatumVal(l.val)),l.is_null!==void 0&&l.is_null!==null&&(this.is_null=l.is_null))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRUCT?(this.val=new m.TDatumVal,this.val.read(l)):l.skip(b);break;case 2:b==a.Type.BOOL?this.is_null=l.readBool():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TDatum"),this.val!==null&&this.val!==void 0&&(l.writeFieldBegin("val",a.Type.STRUCT,1),this.val.write(l),l.writeFieldEnd()),this.is_null!==null&&this.is_null!==void 0&&(l.writeFieldBegin("is_null",a.Type.BOOL,2),l.writeBool(this.is_null),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TStringValue=class{constructor(l){this.str_val=null,this.is_null=null,l&&(l.str_val!==void 0&&l.str_val!==null&&(this.str_val=l.str_val),l.is_null!==void 0&&l.is_null!==null&&(this.is_null=l.is_null))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.str_val=l.readString():l.skip(b);break;case 2:b==a.Type.BOOL?this.is_null=l.readBool():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TStringValue"),this.str_val!==null&&this.str_val!==void 0&&(l.writeFieldBegin("str_val",a.Type.STRING,1),l.writeString(this.str_val),l.writeFieldEnd()),this.is_null!==null&&this.is_null!==void 0&&(l.writeFieldBegin("is_null",a.Type.BOOL,2),l.writeBool(this.is_null),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TColumnType=class{constructor(l){this.col_name=null,this.col_type=null,this.is_reserved_keyword=null,this.src_name=null,this.is_system=null,this.is_physical=null,this.col_id=null,this.default_value=null,l&&(l.col_name!==void 0&&l.col_name!==null&&(this.col_name=l.col_name),l.col_type!==void 0&&l.col_type!==null&&(this.col_type=new _.TTypeInfo(l.col_type)),l.is_reserved_keyword!==void 0&&l.is_reserved_keyword!==null&&(this.is_reserved_keyword=l.is_reserved_keyword),l.src_name!==void 0&&l.src_name!==null&&(this.src_name=l.src_name),l.is_system!==void 0&&l.is_system!==null&&(this.is_system=l.is_system),l.is_physical!==void 0&&l.is_physical!==null&&(this.is_physical=l.is_physical),l.col_id!==void 0&&l.col_id!==null&&(this.col_id=l.col_id),l.default_value!==void 0&&l.default_value!==null&&(this.default_value=l.default_value))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.col_name=l.readString():l.skip(b);break;case 2:b==a.Type.STRUCT?(this.col_type=new _.TTypeInfo,this.col_type.read(l)):l.skip(b);break;case 3:b==a.Type.BOOL?this.is_reserved_keyword=l.readBool():l.skip(b);break;case 4:b==a.Type.STRING?this.src_name=l.readString():l.skip(b);break;case 5:b==a.Type.BOOL?this.is_system=l.readBool():l.skip(b);break;case 6:b==a.Type.BOOL?this.is_physical=l.readBool():l.skip(b);break;case 7:b==a.Type.I64?this.col_id=l.readI64():l.skip(b);break;case 8:b==a.Type.STRING?this.default_value=l.readString():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TColumnType"),this.col_name!==null&&this.col_name!==void 0&&(l.writeFieldBegin("col_name",a.Type.STRING,1),l.writeString(this.col_name),l.writeFieldEnd()),this.col_type!==null&&this.col_type!==void 0&&(l.writeFieldBegin("col_type",a.Type.STRUCT,2),this.col_type.write(l),l.writeFieldEnd()),this.is_reserved_keyword!==null&&this.is_reserved_keyword!==void 0&&(l.writeFieldBegin("is_reserved_keyword",a.Type.BOOL,3),l.writeBool(this.is_reserved_keyword),l.writeFieldEnd()),this.src_name!==null&&this.src_name!==void 0&&(l.writeFieldBegin("src_name",a.Type.STRING,4),l.writeString(this.src_name),l.writeFieldEnd()),this.is_system!==null&&this.is_system!==void 0&&(l.writeFieldBegin("is_system",a.Type.BOOL,5),l.writeBool(this.is_system),l.writeFieldEnd()),this.is_physical!==null&&this.is_physical!==void 0&&(l.writeFieldBegin("is_physical",a.Type.BOOL,6),l.writeBool(this.is_physical),l.writeFieldEnd()),this.col_id!==null&&this.col_id!==void 0&&(l.writeFieldBegin("col_id",a.Type.I64,7),l.writeI64(this.col_id),l.writeFieldEnd()),this.default_value!==null&&this.default_value!==void 0&&(l.writeFieldBegin("default_value",a.Type.STRING,8),l.writeString(this.default_value),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TRow=class{constructor(l){this.cols=null,l&&l.cols!==void 0&&l.cols!==null&&(this.cols=a.copyList(l.cols,[m.TDatum]))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:if(b==a.Type.LIST){this.cols=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=new m.TDatum,k.read(l),this.cols.push(k)}l.readListEnd()}else l.skip(b);break;case 0:l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TRow"),this.cols!==null&&this.cols!==void 0){l.writeFieldBegin("cols",a.Type.LIST,1),l.writeListBegin(a.Type.STRUCT,this.cols.length);for(let T in this.cols)this.cols.hasOwnProperty(T)&&(T=this.cols[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TColumnData=class{constructor(l){this.int_col=null,this.real_col=null,this.str_col=null,this.arr_col=null,l&&(l.int_col!==void 0&&l.int_col!==null&&(this.int_col=a.copyList(l.int_col,[null])),l.real_col!==void 0&&l.real_col!==null&&(this.real_col=a.copyList(l.real_col,[null])),l.str_col!==void 0&&l.str_col!==null&&(this.str_col=a.copyList(l.str_col,[null])),l.arr_col!==void 0&&l.arr_col!==null&&(this.arr_col=a.copyList(l.arr_col,[null])))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:if(b==a.Type.LIST){this.int_col=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=l.readI64(),this.int_col.push(k)}l.readListEnd()}else l.skip(b);break;case 2:if(b==a.Type.LIST){this.real_col=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=l.readDouble(),this.real_col.push(k)}l.readListEnd()}else l.skip(b);break;case 3:if(b==a.Type.LIST){this.str_col=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=l.readString(),this.str_col.push(k)}l.readListEnd()}else l.skip(b);break;case 4:if(b==a.Type.LIST){this.arr_col=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=new m.TColumn,k.read(l),this.arr_col.push(k)}l.readListEnd()}else l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TColumnData"),this.int_col!==null&&this.int_col!==void 0){l.writeFieldBegin("int_col",a.Type.LIST,1),l.writeListBegin(a.Type.I64,this.int_col.length);for(let T in this.int_col)this.int_col.hasOwnProperty(T)&&(T=this.int_col[T],l.writeI64(T));l.writeListEnd(),l.writeFieldEnd()}if(this.real_col!==null&&this.real_col!==void 0){l.writeFieldBegin("real_col",a.Type.LIST,2),l.writeListBegin(a.Type.DOUBLE,this.real_col.length);for(let T in this.real_col)this.real_col.hasOwnProperty(T)&&(T=this.real_col[T],l.writeDouble(T));l.writeListEnd(),l.writeFieldEnd()}if(this.str_col!==null&&this.str_col!==void 0){l.writeFieldBegin("str_col",a.Type.LIST,3),l.writeListBegin(a.Type.STRING,this.str_col.length);for(let T in this.str_col)this.str_col.hasOwnProperty(T)&&(T=this.str_col[T],l.writeString(T));l.writeListEnd(),l.writeFieldEnd()}if(this.arr_col!==null&&this.arr_col!==void 0){l.writeFieldBegin("arr_col",a.Type.LIST,4),l.writeListBegin(a.Type.STRUCT,this.arr_col.length);for(let T in this.arr_col)this.arr_col.hasOwnProperty(T)&&(T=this.arr_col[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TColumn=class{constructor(l){this.data=null,this.nulls=null,l&&(l.data!==void 0&&l.data!==null&&(this.data=new m.TColumnData(l.data)),l.nulls!==void 0&&l.nulls!==null&&(this.nulls=a.copyList(l.nulls,[null])))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRUCT?(this.data=new m.TColumnData,this.data.read(l)):l.skip(b);break;case 2:if(b==a.Type.LIST){this.nulls=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=l.readBool(),this.nulls.push(k)}l.readListEnd()}else l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TColumn"),this.data!==null&&this.data!==void 0&&(l.writeFieldBegin("data",a.Type.STRUCT,1),this.data.write(l),l.writeFieldEnd()),this.nulls!==null&&this.nulls!==void 0){l.writeFieldBegin("nulls",a.Type.LIST,2),l.writeListBegin(a.Type.BOOL,this.nulls.length);for(let T in this.nulls)this.nulls.hasOwnProperty(T)&&(T=this.nulls[T],l.writeBool(T));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TStringRow=class{constructor(l){this.cols=null,l&&l.cols!==void 0&&l.cols!==null&&(this.cols=a.copyList(l.cols,[m.TStringValue]))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:if(b==a.Type.LIST){this.cols=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=new m.TStringValue,k.read(l),this.cols.push(k)}l.readListEnd()}else l.skip(b);break;case 0:l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TStringRow"),this.cols!==null&&this.cols!==void 0){l.writeFieldBegin("cols",a.Type.LIST,1),l.writeListBegin(a.Type.STRUCT,this.cols.length);for(let T in this.cols)this.cols.hasOwnProperty(T)&&(T=this.cols[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TKrb5Session=class{constructor(l){this.sessionId=null,this.krbToken=null,l&&(l.sessionId!==void 0&&l.sessionId!==null&&(this.sessionId=l.sessionId),l.krbToken!==void 0&&l.krbToken!==null&&(this.krbToken=l.krbToken))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.sessionId=l.readString():l.skip(b);break;case 2:b==a.Type.STRING?this.krbToken=l.readString():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TKrb5Session"),this.sessionId!==null&&this.sessionId!==void 0&&(l.writeFieldBegin("sessionId",a.Type.STRING,1),l.writeString(this.sessionId),l.writeFieldEnd()),this.krbToken!==null&&this.krbToken!==void 0&&(l.writeFieldBegin("krbToken",a.Type.STRING,2),l.writeString(this.krbToken),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TStepResult=class{constructor(l){this.serialized_rows=null,this.execution_finished=null,this.merge_type=null,this.sharded=null,this.row_desc=null,this.node_id=null,l&&(l.serialized_rows!==void 0&&l.serialized_rows!==null&&(this.serialized_rows=new w.TSerializedRows(l.serialized_rows)),l.execution_finished!==void 0&&l.execution_finished!==null&&(this.execution_finished=l.execution_finished),l.merge_type!==void 0&&l.merge_type!==null&&(this.merge_type=l.merge_type),l.sharded!==void 0&&l.sharded!==null&&(this.sharded=l.sharded),l.row_desc!==void 0&&l.row_desc!==null&&(this.row_desc=a.copyList(l.row_desc,[m.TColumnType])),l.node_id!==void 0&&l.node_id!==null&&(this.node_id=l.node_id))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRUCT?(this.serialized_rows=new w.TSerializedRows,this.serialized_rows.read(l)):l.skip(b);break;case 2:b==a.Type.BOOL?this.execution_finished=l.readBool():l.skip(b);break;case 3:b==a.Type.I32?this.merge_type=l.readI32():l.skip(b);break;case 4:b==a.Type.BOOL?this.sharded=l.readBool():l.skip(b);break;case 5:if(b==a.Type.LIST){this.row_desc=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=new m.TColumnType,k.read(l),this.row_desc.push(k)}l.readListEnd()}else l.skip(b);break;case 6:b==a.Type.I32?this.node_id=l.readI32():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TStepResult"),this.serialized_rows!==null&&this.serialized_rows!==void 0&&(l.writeFieldBegin("serialized_rows",a.Type.STRUCT,1),this.serialized_rows.write(l),l.writeFieldEnd()),this.execution_finished!==null&&this.execution_finished!==void 0&&(l.writeFieldBegin("execution_finished",a.Type.BOOL,2),l.writeBool(this.execution_finished),l.writeFieldEnd()),this.merge_type!==null&&this.merge_type!==void 0&&(l.writeFieldBegin("merge_type",a.Type.I32,3),l.writeI32(this.merge_type),l.writeFieldEnd()),this.sharded!==null&&this.sharded!==void 0&&(l.writeFieldBegin("sharded",a.Type.BOOL,4),l.writeBool(this.sharded),l.writeFieldEnd()),this.row_desc!==null&&this.row_desc!==void 0){l.writeFieldBegin("row_desc",a.Type.LIST,5),l.writeListBegin(a.Type.STRUCT,this.row_desc.length);for(let T in this.row_desc)this.row_desc.hasOwnProperty(T)&&(T=this.row_desc[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}this.node_id!==null&&this.node_id!==void 0&&(l.writeFieldBegin("node_id",a.Type.I32,6),l.writeI32(this.node_id),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TRowSet=class{constructor(l){this.row_desc=null,this.rows=null,this.columns=null,this.is_columnar=null,l&&(l.row_desc!==void 0&&l.row_desc!==null&&(this.row_desc=a.copyList(l.row_desc,[m.TColumnType])),l.rows!==void 0&&l.rows!==null&&(this.rows=a.copyList(l.rows,[m.TRow])),l.columns!==void 0&&l.columns!==null&&(this.columns=a.copyList(l.columns,[m.TColumn])),l.is_columnar!==void 0&&l.is_columnar!==null&&(this.is_columnar=l.is_columnar))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:if(b==a.Type.LIST){this.row_desc=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=new m.TColumnType,k.read(l),this.row_desc.push(k)}l.readListEnd()}else l.skip(b);break;case 2:if(b==a.Type.LIST){this.rows=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=new m.TRow,k.read(l),this.rows.push(k)}l.readListEnd()}else l.skip(b);break;case 3:if(b==a.Type.LIST){this.columns=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=new m.TColumn,k.read(l),this.columns.push(k)}l.readListEnd()}else l.skip(b);break;case 4:b==a.Type.BOOL?this.is_columnar=l.readBool():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TRowSet"),this.row_desc!==null&&this.row_desc!==void 0){l.writeFieldBegin("row_desc",a.Type.LIST,1),l.writeListBegin(a.Type.STRUCT,this.row_desc.length);for(let T in this.row_desc)this.row_desc.hasOwnProperty(T)&&(T=this.row_desc[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}if(this.rows!==null&&this.rows!==void 0){l.writeFieldBegin("rows",a.Type.LIST,2),l.writeListBegin(a.Type.STRUCT,this.rows.length);for(let T in this.rows)this.rows.hasOwnProperty(T)&&(T=this.rows[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}if(this.columns!==null&&this.columns!==void 0){l.writeFieldBegin("columns",a.Type.LIST,3),l.writeListBegin(a.Type.STRUCT,this.columns.length);for(let T in this.columns)this.columns.hasOwnProperty(T)&&(T=this.columns[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}this.is_columnar!==null&&this.is_columnar!==void 0&&(l.writeFieldBegin("is_columnar",a.Type.BOOL,4),l.writeBool(this.is_columnar),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TQueryResult=class{constructor(l){this.row_set=null,this.execution_time_ms=null,this.total_time_ms=null,this.nonce=null,this.debug=null,this.success=!0,this.query_type=0,l&&(l.row_set!==void 0&&l.row_set!==null&&(this.row_set=new m.TRowSet(l.row_set)),l.execution_time_ms!==void 0&&l.execution_time_ms!==null&&(this.execution_time_ms=l.execution_time_ms),l.total_time_ms!==void 0&&l.total_time_ms!==null&&(this.total_time_ms=l.total_time_ms),l.nonce!==void 0&&l.nonce!==null&&(this.nonce=l.nonce),l.debug!==void 0&&l.debug!==null&&(this.debug=l.debug),l.success!==void 0&&l.success!==null&&(this.success=l.success),l.query_type!==void 0&&l.query_type!==null&&(this.query_type=l.query_type))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRUCT?(this.row_set=new m.TRowSet,this.row_set.read(l)):l.skip(b);break;case 2:b==a.Type.I64?this.execution_time_ms=l.readI64():l.skip(b);break;case 3:b==a.Type.I64?this.total_time_ms=l.readI64():l.skip(b);break;case 4:b==a.Type.STRING?this.nonce=l.readString():l.skip(b);break;case 5:b==a.Type.STRING?this.debug=l.readString():l.skip(b);break;case 6:b==a.Type.BOOL?this.success=l.readBool():l.skip(b);break;case 7:b==a.Type.I32?this.query_type=l.readI32():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TQueryResult"),this.row_set!==null&&this.row_set!==void 0&&(l.writeFieldBegin("row_set",a.Type.STRUCT,1),this.row_set.write(l),l.writeFieldEnd()),this.execution_time_ms!==null&&this.execution_time_ms!==void 0&&(l.writeFieldBegin("execution_time_ms",a.Type.I64,2),l.writeI64(this.execution_time_ms),l.writeFieldEnd()),this.total_time_ms!==null&&this.total_time_ms!==void 0&&(l.writeFieldBegin("total_time_ms",a.Type.I64,3),l.writeI64(this.total_time_ms),l.writeFieldEnd()),this.nonce!==null&&this.nonce!==void 0&&(l.writeFieldBegin("nonce",a.Type.STRING,4),l.writeString(this.nonce),l.writeFieldEnd()),this.debug!==null&&this.debug!==void 0&&(l.writeFieldBegin("debug",a.Type.STRING,5),l.writeString(this.debug),l.writeFieldEnd()),this.success!==null&&this.success!==void 0&&(l.writeFieldBegin("success",a.Type.BOOL,6),l.writeBool(this.success),l.writeFieldEnd()),this.query_type!==null&&this.query_type!==void 0&&(l.writeFieldBegin("query_type",a.Type.I32,7),l.writeI32(this.query_type),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDataFrame=class{constructor(l){this.sm_handle=null,this.sm_size=null,this.df_handle=null,this.df_size=null,this.execution_time_ms=null,this.arrow_conversion_time_ms=null,this.df_buffer=null,l&&(l.sm_handle!==void 0&&l.sm_handle!==null&&(this.sm_handle=l.sm_handle),l.sm_size!==void 0&&l.sm_size!==null&&(this.sm_size=l.sm_size),l.df_handle!==void 0&&l.df_handle!==null&&(this.df_handle=l.df_handle),l.df_size!==void 0&&l.df_size!==null&&(this.df_size=l.df_size),l.execution_time_ms!==void 0&&l.execution_time_ms!==null&&(this.execution_time_ms=l.execution_time_ms),l.arrow_conversion_time_ms!==void 0&&l.arrow_conversion_time_ms!==null&&(this.arrow_conversion_time_ms=l.arrow_conversion_time_ms),l.df_buffer!==void 0&&l.df_buffer!==null&&(this.df_buffer=l.df_buffer))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.sm_handle=l.readBinary():l.skip(b);break;case 2:b==a.Type.I64?this.sm_size=l.readI64():l.skip(b);break;case 3:b==a.Type.STRING?this.df_handle=l.readBinary():l.skip(b);break;case 4:b==a.Type.I64?this.df_size=l.readI64():l.skip(b);break;case 5:b==a.Type.I64?this.execution_time_ms=l.readI64():l.skip(b);break;case 6:b==a.Type.I64?this.arrow_conversion_time_ms=l.readI64():l.skip(b);break;case 7:b==a.Type.STRING?this.df_buffer=l.readBinary():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TDataFrame"),this.sm_handle!==null&&this.sm_handle!==void 0&&(l.writeFieldBegin("sm_handle",a.Type.STRING,1),l.writeBinary(this.sm_handle),l.writeFieldEnd()),this.sm_size!==null&&this.sm_size!==void 0&&(l.writeFieldBegin("sm_size",a.Type.I64,2),l.writeI64(this.sm_size),l.writeFieldEnd()),this.df_handle!==null&&this.df_handle!==void 0&&(l.writeFieldBegin("df_handle",a.Type.STRING,3),l.writeBinary(this.df_handle),l.writeFieldEnd()),this.df_size!==null&&this.df_size!==void 0&&(l.writeFieldBegin("df_size",a.Type.I64,4),l.writeI64(this.df_size),l.writeFieldEnd()),this.execution_time_ms!==null&&this.execution_time_ms!==void 0&&(l.writeFieldBegin("execution_time_ms",a.Type.I64,5),l.writeI64(this.execution_time_ms),l.writeFieldEnd()),this.arrow_conversion_time_ms!==null&&this.arrow_conversion_time_ms!==void 0&&(l.writeFieldBegin("arrow_conversion_time_ms",a.Type.I64,6),l.writeI64(this.arrow_conversion_time_ms),l.writeFieldEnd()),this.df_buffer!==null&&this.df_buffer!==void 0&&(l.writeFieldBegin("df_buffer",a.Type.STRING,7),l.writeBinary(this.df_buffer),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDBInfo=class{constructor(l){this.db_name=null,this.db_owner=null,l&&(l.db_name!==void 0&&l.db_name!==null&&(this.db_name=l.db_name),l.db_owner!==void 0&&l.db_owner!==null&&(this.db_owner=l.db_owner))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.db_name=l.readString():l.skip(b);break;case 2:b==a.Type.STRING?this.db_owner=l.readString():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TDBInfo"),this.db_name!==null&&this.db_name!==void 0&&(l.writeFieldBegin("db_name",a.Type.STRING,1),l.writeString(this.db_name),l.writeFieldEnd()),this.db_owner!==null&&this.db_owner!==void 0&&(l.writeFieldBegin("db_owner",a.Type.STRING,2),l.writeString(this.db_owner),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDBException=class extends a.TException{constructor(l){super(l),this.name="TDBException",this.error_msg=null,l&&l.error_msg!==void 0&&l.error_msg!==null&&(this.error_msg=l.error_msg)}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.error_msg=l.readString():l.skip(b);break;case 0:l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TDBException"),this.error_msg!==null&&this.error_msg!==void 0&&(l.writeFieldBegin("error_msg",a.Type.STRING,1),l.writeString(this.error_msg),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TCopyParams=class{constructor(l){this.delimiter=null,this.null_str=null,this.has_header=0,this.quoted=null,this.quote=null,this.escape=null,this.line_delim=null,this.array_delim=null,this.array_begin=null,this.array_end=null,this.threads=null,this.source_type=0,this.s3_access_key=null,this.s3_secret_key=null,this.s3_region=null,this.geo_coords_encoding=6,this.geo_coords_comp_param=32,this.geo_coords_type=18,this.geo_coords_srid=4326,this.sanitize_column_names=!0,this.geo_layer_name=null,this.s3_endpoint=null,this.geo_assign_render_groups=!0,this.geo_explode_collections=!1,this.source_srid=0,this.s3_session_token=null,this.raster_point_type=1,this.raster_import_bands=null,this.raster_scanlines_per_thread=null,this.raster_point_transform=1,this.raster_point_compute_angle=!1,this.raster_import_dimensions=null,this.odbc_dsn=null,this.odbc_connection_string=null,this.odbc_sql_select=null,this.odbc_sql_order_by=null,this.odbc_username=null,this.odbc_password=null,this.odbc_credential_string=null,this.add_metadata_columns=null,l&&(l.delimiter!==void 0&&l.delimiter!==null&&(this.delimiter=l.delimiter),l.null_str!==void 0&&l.null_str!==null&&(this.null_str=l.null_str),l.has_header!==void 0&&l.has_header!==null&&(this.has_header=l.has_header),l.quoted!==void 0&&l.quoted!==null&&(this.quoted=l.quoted),l.quote!==void 0&&l.quote!==null&&(this.quote=l.quote),l.escape!==void 0&&l.escape!==null&&(this.escape=l.escape),l.line_delim!==void 0&&l.line_delim!==null&&(this.line_delim=l.line_delim),l.array_delim!==void 0&&l.array_delim!==null&&(this.array_delim=l.array_delim),l.array_begin!==void 0&&l.array_begin!==null&&(this.array_begin=l.array_begin),l.array_end!==void 0&&l.array_end!==null&&(this.array_end=l.array_end),l.threads!==void 0&&l.threads!==null&&(this.threads=l.threads),l.source_type!==void 0&&l.source_type!==null&&(this.source_type=l.source_type),l.s3_access_key!==void 0&&l.s3_access_key!==null&&(this.s3_access_key=l.s3_access_key),l.s3_secret_key!==void 0&&l.s3_secret_key!==null&&(this.s3_secret_key=l.s3_secret_key),l.s3_region!==void 0&&l.s3_region!==null&&(this.s3_region=l.s3_region),l.geo_coords_encoding!==void 0&&l.geo_coords_encoding!==null&&(this.geo_coords_encoding=l.geo_coords_encoding),l.geo_coords_comp_param!==void 0&&l.geo_coords_comp_param!==null&&(this.geo_coords_comp_param=l.geo_coords_comp_param),l.geo_coords_type!==void 0&&l.geo_coords_type!==null&&(this.geo_coords_type=l.geo_coords_type),l.geo_coords_srid!==void 0&&l.geo_coords_srid!==null&&(this.geo_coords_srid=l.geo_coords_srid),l.sanitize_column_names!==void 0&&l.sanitize_column_names!==null&&(this.sanitize_column_names=l.sanitize_column_names),l.geo_layer_name!==void 0&&l.geo_layer_name!==null&&(this.geo_layer_name=l.geo_layer_name),l.s3_endpoint!==void 0&&l.s3_endpoint!==null&&(this.s3_endpoint=l.s3_endpoint),l.geo_assign_render_groups!==void 0&&l.geo_assign_render_groups!==null&&(this.geo_assign_render_groups=l.geo_assign_render_groups),l.geo_explode_collections!==void 0&&l.geo_explode_collections!==null&&(this.geo_explode_collections=l.geo_explode_collections),l.source_srid!==void 0&&l.source_srid!==null&&(this.source_srid=l.source_srid),l.s3_session_token!==void 0&&l.s3_session_token!==null&&(this.s3_session_token=l.s3_session_token),l.raster_point_type!==void 0&&l.raster_point_type!==null&&(this.raster_point_type=l.raster_point_type),l.raster_import_bands!==void 0&&l.raster_import_bands!==null&&(this.raster_import_bands=l.raster_import_bands),l.raster_scanlines_per_thread!==void 0&&l.raster_scanlines_per_thread!==null&&(this.raster_scanlines_per_thread=l.raster_scanlines_per_thread),l.raster_point_transform!==void 0&&l.raster_point_transform!==null&&(this.raster_point_transform=l.raster_point_transform),l.raster_point_compute_angle!==void 0&&l.raster_point_compute_angle!==null&&(this.raster_point_compute_angle=l.raster_point_compute_angle),l.raster_import_dimensions!==void 0&&l.raster_import_dimensions!==null&&(this.raster_import_dimensions=l.raster_import_dimensions),l.odbc_dsn!==void 0&&l.odbc_dsn!==null&&(this.odbc_dsn=l.odbc_dsn),l.odbc_connection_string!==void 0&&l.odbc_connection_string!==null&&(this.odbc_connection_string=l.odbc_connection_string),l.odbc_sql_select!==void 0&&l.odbc_sql_select!==null&&(this.odbc_sql_select=l.odbc_sql_select),l.odbc_sql_order_by!==void 0&&l.odbc_sql_order_by!==null&&(this.odbc_sql_order_by=l.odbc_sql_order_by),l.odbc_username!==void 0&&l.odbc_username!==null&&(this.odbc_username=l.odbc_username),l.odbc_password!==void 0&&l.odbc_password!==null&&(this.odbc_password=l.odbc_password),l.odbc_credential_string!==void 0&&l.odbc_credential_string!==null&&(this.odbc_credential_string=l.odbc_credential_string),l.add_metadata_columns!==void 0&&l.add_metadata_columns!==null&&(this.add_metadata_columns=l.add_metadata_columns))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.delimiter=l.readString():l.skip(b);break;case 2:b==a.Type.STRING?this.null_str=l.readString():l.skip(b);break;case 3:b==a.Type.I32?this.has_header=l.readI32():l.skip(b);break;case 4:b==a.Type.BOOL?this.quoted=l.readBool():l.skip(b);break;case 5:b==a.Type.STRING?this.quote=l.readString():l.skip(b);break;case 6:b==a.Type.STRING?this.escape=l.readString():l.skip(b);break;case 7:b==a.Type.STRING?this.line_delim=l.readString():l.skip(b);break;case 8:b==a.Type.STRING?this.array_delim=l.readString():l.skip(b);break;case 9:b==a.Type.STRING?this.array_begin=l.readString():l.skip(b);break;case 10:b==a.Type.STRING?this.array_end=l.readString():l.skip(b);break;case 11:b==a.Type.I32?this.threads=l.readI32():l.skip(b);break;case 12:b==a.Type.I32?this.source_type=l.readI32():l.skip(b);break;case 13:b==a.Type.STRING?this.s3_access_key=l.readString():l.skip(b);break;case 14:b==a.Type.STRING?this.s3_secret_key=l.readString():l.skip(b);break;case 15:b==a.Type.STRING?this.s3_region=l.readString():l.skip(b);break;case 16:b==a.Type.I32?this.geo_coords_encoding=l.readI32():l.skip(b);break;case 17:b==a.Type.I32?this.geo_coords_comp_param=l.readI32():l.skip(b);break;case 18:b==a.Type.I32?this.geo_coords_type=l.readI32():l.skip(b);break;case 19:b==a.Type.I32?this.geo_coords_srid=l.readI32():l.skip(b);break;case 20:b==a.Type.BOOL?this.sanitize_column_names=l.readBool():l.skip(b);break;case 21:b==a.Type.STRING?this.geo_layer_name=l.readString():l.skip(b);break;case 22:b==a.Type.STRING?this.s3_endpoint=l.readString():l.skip(b);break;case 23:b==a.Type.BOOL?this.geo_assign_render_groups=l.readBool():l.skip(b);break;case 24:b==a.Type.BOOL?this.geo_explode_collections=l.readBool():l.skip(b);break;case 25:b==a.Type.I32?this.source_srid=l.readI32():l.skip(b);break;case 26:b==a.Type.STRING?this.s3_session_token=l.readString():l.skip(b);break;case 27:b==a.Type.I32?this.raster_point_type=l.readI32():l.skip(b);break;case 28:b==a.Type.STRING?this.raster_import_bands=l.readString():l.skip(b);break;case 29:b==a.Type.I32?this.raster_scanlines_per_thread=l.readI32():l.skip(b);break;case 30:b==a.Type.I32?this.raster_point_transform=l.readI32():l.skip(b);break;case 31:b==a.Type.BOOL?this.raster_point_compute_angle=l.readBool():l.skip(b);break;case 32:b==a.Type.STRING?this.raster_import_dimensions=l.readString():l.skip(b);break;case 33:b==a.Type.STRING?this.odbc_dsn=l.readString():l.skip(b);break;case 34:b==a.Type.STRING?this.odbc_connection_string=l.readString():l.skip(b);break;case 35:b==a.Type.STRING?this.odbc_sql_select=l.readString():l.skip(b);break;case 36:b==a.Type.STRING?this.odbc_sql_order_by=l.readString():l.skip(b);break;case 37:b==a.Type.STRING?this.odbc_username=l.readString():l.skip(b);break;case 38:b==a.Type.STRING?this.odbc_password=l.readString():l.skip(b);break;case 39:b==a.Type.STRING?this.odbc_credential_string=l.readString():l.skip(b);break;case 40:b==a.Type.STRING?this.add_metadata_columns=l.readString():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TCopyParams"),this.delimiter!==null&&this.delimiter!==void 0&&(l.writeFieldBegin("delimiter",a.Type.STRING,1),l.writeString(this.delimiter),l.writeFieldEnd()),this.null_str!==null&&this.null_str!==void 0&&(l.writeFieldBegin("null_str",a.Type.STRING,2),l.writeString(this.null_str),l.writeFieldEnd()),this.has_header!==null&&this.has_header!==void 0&&(l.writeFieldBegin("has_header",a.Type.I32,3),l.writeI32(this.has_header),l.writeFieldEnd()),this.quoted!==null&&this.quoted!==void 0&&(l.writeFieldBegin("quoted",a.Type.BOOL,4),l.writeBool(this.quoted),l.writeFieldEnd()),this.quote!==null&&this.quote!==void 0&&(l.writeFieldBegin("quote",a.Type.STRING,5),l.writeString(this.quote),l.writeFieldEnd()),this.escape!==null&&this.escape!==void 0&&(l.writeFieldBegin("escape",a.Type.STRING,6),l.writeString(this.escape),l.writeFieldEnd()),this.line_delim!==null&&this.line_delim!==void 0&&(l.writeFieldBegin("line_delim",a.Type.STRING,7),l.writeString(this.line_delim),l.writeFieldEnd()),this.array_delim!==null&&this.array_delim!==void 0&&(l.writeFieldBegin("array_delim",a.Type.STRING,8),l.writeString(this.array_delim),l.writeFieldEnd()),this.array_begin!==null&&this.array_begin!==void 0&&(l.writeFieldBegin("array_begin",a.Type.STRING,9),l.writeString(this.array_begin),l.writeFieldEnd()),this.array_end!==null&&this.array_end!==void 0&&(l.writeFieldBegin("array_end",a.Type.STRING,10),l.writeString(this.array_end),l.writeFieldEnd()),this.threads!==null&&this.threads!==void 0&&(l.writeFieldBegin("threads",a.Type.I32,11),l.writeI32(this.threads),l.writeFieldEnd()),this.source_type!==null&&this.source_type!==void 0&&(l.writeFieldBegin("source_type",a.Type.I32,12),l.writeI32(this.source_type),l.writeFieldEnd()),this.s3_access_key!==null&&this.s3_access_key!==void 0&&(l.writeFieldBegin("s3_access_key",a.Type.STRING,13),l.writeString(this.s3_access_key),l.writeFieldEnd()),this.s3_secret_key!==null&&this.s3_secret_key!==void 0&&(l.writeFieldBegin("s3_secret_key",a.Type.STRING,14),l.writeString(this.s3_secret_key),l.writeFieldEnd()),this.s3_region!==null&&this.s3_region!==void 0&&(l.writeFieldBegin("s3_region",a.Type.STRING,15),l.writeString(this.s3_region),l.writeFieldEnd()),this.geo_coords_encoding!==null&&this.geo_coords_encoding!==void 0&&(l.writeFieldBegin("geo_coords_encoding",a.Type.I32,16),l.writeI32(this.geo_coords_encoding),l.writeFieldEnd()),this.geo_coords_comp_param!==null&&this.geo_coords_comp_param!==void 0&&(l.writeFieldBegin("geo_coords_comp_param",a.Type.I32,17),l.writeI32(this.geo_coords_comp_param),l.writeFieldEnd()),this.geo_coords_type!==null&&this.geo_coords_type!==void 0&&(l.writeFieldBegin("geo_coords_type",a.Type.I32,18),l.writeI32(this.geo_coords_type),l.writeFieldEnd()),this.geo_coords_srid!==null&&this.geo_coords_srid!==void 0&&(l.writeFieldBegin("geo_coords_srid",a.Type.I32,19),l.writeI32(this.geo_coords_srid),l.writeFieldEnd()),this.sanitize_column_names!==null&&this.sanitize_column_names!==void 0&&(l.writeFieldBegin("sanitize_column_names",a.Type.BOOL,20),l.writeBool(this.sanitize_column_names),l.writeFieldEnd()),this.geo_layer_name!==null&&this.geo_layer_name!==void 0&&(l.writeFieldBegin("geo_layer_name",a.Type.STRING,21),l.writeString(this.geo_layer_name),l.writeFieldEnd()),this.s3_endpoint!==null&&this.s3_endpoint!==void 0&&(l.writeFieldBegin("s3_endpoint",a.Type.STRING,22),l.writeString(this.s3_endpoint),l.writeFieldEnd()),this.geo_assign_render_groups!==null&&this.geo_assign_render_groups!==void 0&&(l.writeFieldBegin("geo_assign_render_groups",a.Type.BOOL,23),l.writeBool(this.geo_assign_render_groups),l.writeFieldEnd()),this.geo_explode_collections!==null&&this.geo_explode_collections!==void 0&&(l.writeFieldBegin("geo_explode_collections",a.Type.BOOL,24),l.writeBool(this.geo_explode_collections),l.writeFieldEnd()),this.source_srid!==null&&this.source_srid!==void 0&&(l.writeFieldBegin("source_srid",a.Type.I32,25),l.writeI32(this.source_srid),l.writeFieldEnd()),this.s3_session_token!==null&&this.s3_session_token!==void 0&&(l.writeFieldBegin("s3_session_token",a.Type.STRING,26),l.writeString(this.s3_session_token),l.writeFieldEnd()),this.raster_point_type!==null&&this.raster_point_type!==void 0&&(l.writeFieldBegin("raster_point_type",a.Type.I32,27),l.writeI32(this.raster_point_type),l.writeFieldEnd()),this.raster_import_bands!==null&&this.raster_import_bands!==void 0&&(l.writeFieldBegin("raster_import_bands",a.Type.STRING,28),l.writeString(this.raster_import_bands),l.writeFieldEnd()),this.raster_scanlines_per_thread!==null&&this.raster_scanlines_per_thread!==void 0&&(l.writeFieldBegin("raster_scanlines_per_thread",a.Type.I32,29),l.writeI32(this.raster_scanlines_per_thread),l.writeFieldEnd()),this.raster_point_transform!==null&&this.raster_point_transform!==void 0&&(l.writeFieldBegin("raster_point_transform",a.Type.I32,30),l.writeI32(this.raster_point_transform),l.writeFieldEnd()),this.raster_point_compute_angle!==null&&this.raster_point_compute_angle!==void 0&&(l.writeFieldBegin("raster_point_compute_angle",a.Type.BOOL,31),l.writeBool(this.raster_point_compute_angle),l.writeFieldEnd()),this.raster_import_dimensions!==null&&this.raster_import_dimensions!==void 0&&(l.writeFieldBegin("raster_import_dimensions",a.Type.STRING,32),l.writeString(this.raster_import_dimensions),l.writeFieldEnd()),this.odbc_dsn!==null&&this.odbc_dsn!==void 0&&(l.writeFieldBegin("odbc_dsn",a.Type.STRING,33),l.writeString(this.odbc_dsn),l.writeFieldEnd()),this.odbc_connection_string!==null&&this.odbc_connection_string!==void 0&&(l.writeFieldBegin("odbc_connection_string",a.Type.STRING,34),l.writeString(this.odbc_connection_string),l.writeFieldEnd()),this.odbc_sql_select!==null&&this.odbc_sql_select!==void 0&&(l.writeFieldBegin("odbc_sql_select",a.Type.STRING,35),l.writeString(this.odbc_sql_select),l.writeFieldEnd()),this.odbc_sql_order_by!==null&&this.odbc_sql_order_by!==void 0&&(l.writeFieldBegin("odbc_sql_order_by",a.Type.STRING,36),l.writeString(this.odbc_sql_order_by),l.writeFieldEnd()),this.odbc_username!==null&&this.odbc_username!==void 0&&(l.writeFieldBegin("odbc_username",a.Type.STRING,37),l.writeString(this.odbc_username),l.writeFieldEnd()),this.odbc_password!==null&&this.odbc_password!==void 0&&(l.writeFieldBegin("odbc_password",a.Type.STRING,38),l.writeString(this.odbc_password),l.writeFieldEnd()),this.odbc_credential_string!==null&&this.odbc_credential_string!==void 0&&(l.writeFieldBegin("odbc_credential_string",a.Type.STRING,39),l.writeString(this.odbc_credential_string),l.writeFieldEnd()),this.add_metadata_columns!==null&&this.add_metadata_columns!==void 0&&(l.writeFieldBegin("add_metadata_columns",a.Type.STRING,40),l.writeString(this.add_metadata_columns),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TCreateParams=class{constructor(l){this.is_replicated=null,l&&l.is_replicated!==void 0&&l.is_replicated!==null&&(this.is_replicated=l.is_replicated)}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.BOOL?this.is_replicated=l.readBool():l.skip(b);break;case 0:l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TCreateParams"),this.is_replicated!==null&&this.is_replicated!==void 0&&(l.writeFieldBegin("is_replicated",a.Type.BOOL,1),l.writeBool(this.is_replicated),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDetectResult=class{constructor(l){this.row_set=null,this.copy_params=null,l&&(l.row_set!==void 0&&l.row_set!==null&&(this.row_set=new m.TRowSet(l.row_set)),l.copy_params!==void 0&&l.copy_params!==null&&(this.copy_params=new m.TCopyParams(l.copy_params)))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRUCT?(this.row_set=new m.TRowSet,this.row_set.read(l)):l.skip(b);break;case 2:b==a.Type.STRUCT?(this.copy_params=new m.TCopyParams,this.copy_params.read(l)):l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TDetectResult"),this.row_set!==null&&this.row_set!==void 0&&(l.writeFieldBegin("row_set",a.Type.STRUCT,1),this.row_set.write(l),l.writeFieldEnd()),this.copy_params!==null&&this.copy_params!==void 0&&(l.writeFieldBegin("copy_params",a.Type.STRUCT,2),this.copy_params.write(l),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TImportStatus=class{constructor(l){this.elapsed=null,this.rows_completed=null,this.rows_estimated=null,this.rows_rejected=null,l&&(l.elapsed!==void 0&&l.elapsed!==null&&(this.elapsed=l.elapsed),l.rows_completed!==void 0&&l.rows_completed!==null&&(this.rows_completed=l.rows_completed),l.rows_estimated!==void 0&&l.rows_estimated!==null&&(this.rows_estimated=l.rows_estimated),l.rows_rejected!==void 0&&l.rows_rejected!==null&&(this.rows_rejected=l.rows_rejected))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I64?this.elapsed=l.readI64():l.skip(b);break;case 2:b==a.Type.I64?this.rows_completed=l.readI64():l.skip(b);break;case 3:b==a.Type.I64?this.rows_estimated=l.readI64():l.skip(b);break;case 4:b==a.Type.I64?this.rows_rejected=l.readI64():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TImportStatus"),this.elapsed!==null&&this.elapsed!==void 0&&(l.writeFieldBegin("elapsed",a.Type.I64,1),l.writeI64(this.elapsed),l.writeFieldEnd()),this.rows_completed!==null&&this.rows_completed!==void 0&&(l.writeFieldBegin("rows_completed",a.Type.I64,2),l.writeI64(this.rows_completed),l.writeFieldEnd()),this.rows_estimated!==null&&this.rows_estimated!==void 0&&(l.writeFieldBegin("rows_estimated",a.Type.I64,3),l.writeI64(this.rows_estimated),l.writeFieldEnd()),this.rows_rejected!==null&&this.rows_rejected!==void 0&&(l.writeFieldBegin("rows_rejected",a.Type.I64,4),l.writeI64(this.rows_rejected),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TFrontendView=class{constructor(l){this.view_name=null,this.view_state=null,this.image_hash=null,this.update_time=null,this.view_metadata=null,l&&(l.view_name!==void 0&&l.view_name!==null&&(this.view_name=l.view_name),l.view_state!==void 0&&l.view_state!==null&&(this.view_state=l.view_state),l.image_hash!==void 0&&l.image_hash!==null&&(this.image_hash=l.image_hash),l.update_time!==void 0&&l.update_time!==null&&(this.update_time=l.update_time),l.view_metadata!==void 0&&l.view_metadata!==null&&(this.view_metadata=l.view_metadata))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.view_name=l.readString():l.skip(b);break;case 2:b==a.Type.STRING?this.view_state=l.readString():l.skip(b);break;case 3:b==a.Type.STRING?this.image_hash=l.readString():l.skip(b);break;case 4:b==a.Type.STRING?this.update_time=l.readString():l.skip(b);break;case 5:b==a.Type.STRING?this.view_metadata=l.readString():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TFrontendView"),this.view_name!==null&&this.view_name!==void 0&&(l.writeFieldBegin("view_name",a.Type.STRING,1),l.writeString(this.view_name),l.writeFieldEnd()),this.view_state!==null&&this.view_state!==void 0&&(l.writeFieldBegin("view_state",a.Type.STRING,2),l.writeString(this.view_state),l.writeFieldEnd()),this.image_hash!==null&&this.image_hash!==void 0&&(l.writeFieldBegin("image_hash",a.Type.STRING,3),l.writeString(this.image_hash),l.writeFieldEnd()),this.update_time!==null&&this.update_time!==void 0&&(l.writeFieldBegin("update_time",a.Type.STRING,4),l.writeString(this.update_time),l.writeFieldEnd()),this.view_metadata!==null&&this.view_metadata!==void 0&&(l.writeFieldBegin("view_metadata",a.Type.STRING,5),l.writeString(this.view_metadata),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TServerStatus=class{constructor(l){this.read_only=null,this.version=null,this.rendering_enabled=null,this.start_time=null,this.edition=null,this.host_name=null,this.poly_rendering_enabled=null,this.role=null,this.renderer_status_json=null,l&&(l.read_only!==void 0&&l.read_only!==null&&(this.read_only=l.read_only),l.version!==void 0&&l.version!==null&&(this.version=l.version),l.rendering_enabled!==void 0&&l.rendering_enabled!==null&&(this.rendering_enabled=l.rendering_enabled),l.start_time!==void 0&&l.start_time!==null&&(this.start_time=l.start_time),l.edition!==void 0&&l.edition!==null&&(this.edition=l.edition),l.host_name!==void 0&&l.host_name!==null&&(this.host_name=l.host_name),l.poly_rendering_enabled!==void 0&&l.poly_rendering_enabled!==null&&(this.poly_rendering_enabled=l.poly_rendering_enabled),l.role!==void 0&&l.role!==null&&(this.role=l.role),l.renderer_status_json!==void 0&&l.renderer_status_json!==null&&(this.renderer_status_json=l.renderer_status_json))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.BOOL?this.read_only=l.readBool():l.skip(b);break;case 2:b==a.Type.STRING?this.version=l.readString():l.skip(b);break;case 3:b==a.Type.BOOL?this.rendering_enabled=l.readBool():l.skip(b);break;case 4:b==a.Type.I64?this.start_time=l.readI64():l.skip(b);break;case 5:b==a.Type.STRING?this.edition=l.readString():l.skip(b);break;case 6:b==a.Type.STRING?this.host_name=l.readString():l.skip(b);break;case 7:b==a.Type.BOOL?this.poly_rendering_enabled=l.readBool():l.skip(b);break;case 8:b==a.Type.I32?this.role=l.readI32():l.skip(b);break;case 9:b==a.Type.STRING?this.renderer_status_json=l.readString():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TServerStatus"),this.read_only!==null&&this.read_only!==void 0&&(l.writeFieldBegin("read_only",a.Type.BOOL,1),l.writeBool(this.read_only),l.writeFieldEnd()),this.version!==null&&this.version!==void 0&&(l.writeFieldBegin("version",a.Type.STRING,2),l.writeString(this.version),l.writeFieldEnd()),this.rendering_enabled!==null&&this.rendering_enabled!==void 0&&(l.writeFieldBegin("rendering_enabled",a.Type.BOOL,3),l.writeBool(this.rendering_enabled),l.writeFieldEnd()),this.start_time!==null&&this.start_time!==void 0&&(l.writeFieldBegin("start_time",a.Type.I64,4),l.writeI64(this.start_time),l.writeFieldEnd()),this.edition!==null&&this.edition!==void 0&&(l.writeFieldBegin("edition",a.Type.STRING,5),l.writeString(this.edition),l.writeFieldEnd()),this.host_name!==null&&this.host_name!==void 0&&(l.writeFieldBegin("host_name",a.Type.STRING,6),l.writeString(this.host_name),l.writeFieldEnd()),this.poly_rendering_enabled!==null&&this.poly_rendering_enabled!==void 0&&(l.writeFieldBegin("poly_rendering_enabled",a.Type.BOOL,7),l.writeBool(this.poly_rendering_enabled),l.writeFieldEnd()),this.role!==null&&this.role!==void 0&&(l.writeFieldBegin("role",a.Type.I32,8),l.writeI32(this.role),l.writeFieldEnd()),this.renderer_status_json!==null&&this.renderer_status_json!==void 0&&(l.writeFieldBegin("renderer_status_json",a.Type.STRING,9),l.writeString(this.renderer_status_json),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TPixel=class{constructor(l){this.x=null,this.y=null,l&&(l.x!==void 0&&l.x!==null&&(this.x=l.x),l.y!==void 0&&l.y!==null&&(this.y=l.y))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I64?this.x=l.readI64():l.skip(b);break;case 2:b==a.Type.I64?this.y=l.readI64():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TPixel"),this.x!==null&&this.x!==void 0&&(l.writeFieldBegin("x",a.Type.I64,1),l.writeI64(this.x),l.writeFieldEnd()),this.y!==null&&this.y!==void 0&&(l.writeFieldBegin("y",a.Type.I64,2),l.writeI64(this.y),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TPixelTableRowResult=class{constructor(l){this.pixel=null,this.vega_table_name=null,this.table_id=null,this.row_id=null,this.row_set=null,this.nonce=null,l&&(l.pixel!==void 0&&l.pixel!==null&&(this.pixel=new m.TPixel(l.pixel)),l.vega_table_name!==void 0&&l.vega_table_name!==null&&(this.vega_table_name=l.vega_table_name),l.table_id!==void 0&&l.table_id!==null&&(this.table_id=a.copyList(l.table_id,[null])),l.row_id!==void 0&&l.row_id!==null&&(this.row_id=a.copyList(l.row_id,[null])),l.row_set!==void 0&&l.row_set!==null&&(this.row_set=new m.TRowSet(l.row_set)),l.nonce!==void 0&&l.nonce!==null&&(this.nonce=l.nonce))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRUCT?(this.pixel=new m.TPixel,this.pixel.read(l)):l.skip(b);break;case 2:b==a.Type.STRING?this.vega_table_name=l.readString():l.skip(b);break;case 3:if(b==a.Type.LIST){this.table_id=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=l.readI64(),this.table_id.push(k)}l.readListEnd()}else l.skip(b);break;case 4:if(b==a.Type.LIST){this.row_id=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=l.readI64(),this.row_id.push(k)}l.readListEnd()}else l.skip(b);break;case 5:b==a.Type.STRUCT?(this.row_set=new m.TRowSet,this.row_set.read(l)):l.skip(b);break;case 6:b==a.Type.STRING?this.nonce=l.readString():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TPixelTableRowResult"),this.pixel!==null&&this.pixel!==void 0&&(l.writeFieldBegin("pixel",a.Type.STRUCT,1),this.pixel.write(l),l.writeFieldEnd()),this.vega_table_name!==null&&this.vega_table_name!==void 0&&(l.writeFieldBegin("vega_table_name",a.Type.STRING,2),l.writeString(this.vega_table_name),l.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0){l.writeFieldBegin("table_id",a.Type.LIST,3),l.writeListBegin(a.Type.I64,this.table_id.length);for(let T in this.table_id)this.table_id.hasOwnProperty(T)&&(T=this.table_id[T],l.writeI64(T));l.writeListEnd(),l.writeFieldEnd()}if(this.row_id!==null&&this.row_id!==void 0){l.writeFieldBegin("row_id",a.Type.LIST,4),l.writeListBegin(a.Type.I64,this.row_id.length);for(let T in this.row_id)this.row_id.hasOwnProperty(T)&&(T=this.row_id[T],l.writeI64(T));l.writeListEnd(),l.writeFieldEnd()}this.row_set!==null&&this.row_set!==void 0&&(l.writeFieldBegin("row_set",a.Type.STRUCT,5),this.row_set.write(l),l.writeFieldEnd()),this.nonce!==null&&this.nonce!==void 0&&(l.writeFieldBegin("nonce",a.Type.STRING,6),l.writeString(this.nonce),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TRenderResult=class{constructor(l){this.image=null,this.nonce=null,this.execution_time_ms=null,this.render_time_ms=null,this.total_time_ms=null,this.vega_metadata=null,l&&(l.image!==void 0&&l.image!==null&&(this.image=l.image),l.nonce!==void 0&&l.nonce!==null&&(this.nonce=l.nonce),l.execution_time_ms!==void 0&&l.execution_time_ms!==null&&(this.execution_time_ms=l.execution_time_ms),l.render_time_ms!==void 0&&l.render_time_ms!==null&&(this.render_time_ms=l.render_time_ms),l.total_time_ms!==void 0&&l.total_time_ms!==null&&(this.total_time_ms=l.total_time_ms),l.vega_metadata!==void 0&&l.vega_metadata!==null&&(this.vega_metadata=l.vega_metadata))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.image=l.readBinary():l.skip(b);break;case 2:b==a.Type.STRING?this.nonce=l.readString():l.skip(b);break;case 3:b==a.Type.I64?this.execution_time_ms=l.readI64():l.skip(b);break;case 4:b==a.Type.I64?this.render_time_ms=l.readI64():l.skip(b);break;case 5:b==a.Type.I64?this.total_time_ms=l.readI64():l.skip(b);break;case 6:b==a.Type.STRING?this.vega_metadata=l.readString():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TRenderResult"),this.image!==null&&this.image!==void 0&&(l.writeFieldBegin("image",a.Type.STRING,1),l.writeBinary(this.image),l.writeFieldEnd()),this.nonce!==null&&this.nonce!==void 0&&(l.writeFieldBegin("nonce",a.Type.STRING,2),l.writeString(this.nonce),l.writeFieldEnd()),this.execution_time_ms!==null&&this.execution_time_ms!==void 0&&(l.writeFieldBegin("execution_time_ms",a.Type.I64,3),l.writeI64(this.execution_time_ms),l.writeFieldEnd()),this.render_time_ms!==null&&this.render_time_ms!==void 0&&(l.writeFieldBegin("render_time_ms",a.Type.I64,4),l.writeI64(this.render_time_ms),l.writeFieldEnd()),this.total_time_ms!==null&&this.total_time_ms!==void 0&&(l.writeFieldBegin("total_time_ms",a.Type.I64,5),l.writeI64(this.total_time_ms),l.writeFieldEnd()),this.vega_metadata!==null&&this.vega_metadata!==void 0&&(l.writeFieldBegin("vega_metadata",a.Type.STRING,6),l.writeString(this.vega_metadata),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TGpuSpecification=class{constructor(l){this.num_sm=null,this.clock_frequency_kHz=null,this.memory=null,this.compute_capability_major=null,this.compute_capability_minor=null,l&&(l.num_sm!==void 0&&l.num_sm!==null&&(this.num_sm=l.num_sm),l.clock_frequency_kHz!==void 0&&l.clock_frequency_kHz!==null&&(this.clock_frequency_kHz=l.clock_frequency_kHz),l.memory!==void 0&&l.memory!==null&&(this.memory=l.memory),l.compute_capability_major!==void 0&&l.compute_capability_major!==null&&(this.compute_capability_major=l.compute_capability_major),l.compute_capability_minor!==void 0&&l.compute_capability_minor!==null&&(this.compute_capability_minor=l.compute_capability_minor))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I32?this.num_sm=l.readI32():l.skip(b);break;case 2:b==a.Type.I64?this.clock_frequency_kHz=l.readI64():l.skip(b);break;case 3:b==a.Type.I64?this.memory=l.readI64():l.skip(b);break;case 4:b==a.Type.I16?this.compute_capability_major=l.readI16():l.skip(b);break;case 5:b==a.Type.I16?this.compute_capability_minor=l.readI16():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TGpuSpecification"),this.num_sm!==null&&this.num_sm!==void 0&&(l.writeFieldBegin("num_sm",a.Type.I32,1),l.writeI32(this.num_sm),l.writeFieldEnd()),this.clock_frequency_kHz!==null&&this.clock_frequency_kHz!==void 0&&(l.writeFieldBegin("clock_frequency_kHz",a.Type.I64,2),l.writeI64(this.clock_frequency_kHz),l.writeFieldEnd()),this.memory!==null&&this.memory!==void 0&&(l.writeFieldBegin("memory",a.Type.I64,3),l.writeI64(this.memory),l.writeFieldEnd()),this.compute_capability_major!==null&&this.compute_capability_major!==void 0&&(l.writeFieldBegin("compute_capability_major",a.Type.I16,4),l.writeI16(this.compute_capability_major),l.writeFieldEnd()),this.compute_capability_minor!==null&&this.compute_capability_minor!==void 0&&(l.writeFieldBegin("compute_capability_minor",a.Type.I16,5),l.writeI16(this.compute_capability_minor),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.THardwareInfo=class{constructor(l){this.num_gpu_hw=null,this.num_cpu_hw=null,this.num_gpu_allocated=null,this.start_gpu=null,this.host_name=null,this.gpu_info=null,l&&(l.num_gpu_hw!==void 0&&l.num_gpu_hw!==null&&(this.num_gpu_hw=l.num_gpu_hw),l.num_cpu_hw!==void 0&&l.num_cpu_hw!==null&&(this.num_cpu_hw=l.num_cpu_hw),l.num_gpu_allocated!==void 0&&l.num_gpu_allocated!==null&&(this.num_gpu_allocated=l.num_gpu_allocated),l.start_gpu!==void 0&&l.start_gpu!==null&&(this.start_gpu=l.start_gpu),l.host_name!==void 0&&l.host_name!==null&&(this.host_name=l.host_name),l.gpu_info!==void 0&&l.gpu_info!==null&&(this.gpu_info=a.copyList(l.gpu_info,[m.TGpuSpecification])))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I16?this.num_gpu_hw=l.readI16():l.skip(b);break;case 2:b==a.Type.I16?this.num_cpu_hw=l.readI16():l.skip(b);break;case 3:b==a.Type.I16?this.num_gpu_allocated=l.readI16():l.skip(b);break;case 4:b==a.Type.I16?this.start_gpu=l.readI16():l.skip(b);break;case 5:b==a.Type.STRING?this.host_name=l.readString():l.skip(b);break;case 6:if(b==a.Type.LIST){this.gpu_info=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=new m.TGpuSpecification,k.read(l),this.gpu_info.push(k)}l.readListEnd()}else l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("THardwareInfo"),this.num_gpu_hw!==null&&this.num_gpu_hw!==void 0&&(l.writeFieldBegin("num_gpu_hw",a.Type.I16,1),l.writeI16(this.num_gpu_hw),l.writeFieldEnd()),this.num_cpu_hw!==null&&this.num_cpu_hw!==void 0&&(l.writeFieldBegin("num_cpu_hw",a.Type.I16,2),l.writeI16(this.num_cpu_hw),l.writeFieldEnd()),this.num_gpu_allocated!==null&&this.num_gpu_allocated!==void 0&&(l.writeFieldBegin("num_gpu_allocated",a.Type.I16,3),l.writeI16(this.num_gpu_allocated),l.writeFieldEnd()),this.start_gpu!==null&&this.start_gpu!==void 0&&(l.writeFieldBegin("start_gpu",a.Type.I16,4),l.writeI16(this.start_gpu),l.writeFieldEnd()),this.host_name!==null&&this.host_name!==void 0&&(l.writeFieldBegin("host_name",a.Type.STRING,5),l.writeString(this.host_name),l.writeFieldEnd()),this.gpu_info!==null&&this.gpu_info!==void 0){l.writeFieldBegin("gpu_info",a.Type.LIST,6),l.writeListBegin(a.Type.STRUCT,this.gpu_info.length);for(let T in this.gpu_info)this.gpu_info.hasOwnProperty(T)&&(T=this.gpu_info[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TClusterHardwareInfo=class{constructor(l){this.hardware_info=null,l&&l.hardware_info!==void 0&&l.hardware_info!==null&&(this.hardware_info=a.copyList(l.hardware_info,[m.THardwareInfo]))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:if(b==a.Type.LIST){this.hardware_info=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=new m.THardwareInfo,k.read(l),this.hardware_info.push(k)}l.readListEnd()}else l.skip(b);break;case 0:l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TClusterHardwareInfo"),this.hardware_info!==null&&this.hardware_info!==void 0){l.writeFieldBegin("hardware_info",a.Type.LIST,1),l.writeListBegin(a.Type.STRUCT,this.hardware_info.length);for(let T in this.hardware_info)this.hardware_info.hasOwnProperty(T)&&(T=this.hardware_info[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TMemoryData=class{constructor(l){this.slab=null,this.start_page=null,this.num_pages=null,this.touch=null,this.chunk_key=null,this.buffer_epoch=null,this.is_free=null,l&&(l.slab!==void 0&&l.slab!==null&&(this.slab=l.slab),l.start_page!==void 0&&l.start_page!==null&&(this.start_page=l.start_page),l.num_pages!==void 0&&l.num_pages!==null&&(this.num_pages=l.num_pages),l.touch!==void 0&&l.touch!==null&&(this.touch=l.touch),l.chunk_key!==void 0&&l.chunk_key!==null&&(this.chunk_key=a.copyList(l.chunk_key,[null])),l.buffer_epoch!==void 0&&l.buffer_epoch!==null&&(this.buffer_epoch=l.buffer_epoch),l.is_free!==void 0&&l.is_free!==null&&(this.is_free=l.is_free))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I64?this.slab=l.readI64():l.skip(b);break;case 2:b==a.Type.I32?this.start_page=l.readI32():l.skip(b);break;case 3:b==a.Type.I64?this.num_pages=l.readI64():l.skip(b);break;case 4:b==a.Type.I32?this.touch=l.readI32():l.skip(b);break;case 5:if(b==a.Type.LIST){this.chunk_key=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=l.readI64(),this.chunk_key.push(k)}l.readListEnd()}else l.skip(b);break;case 6:b==a.Type.I32?this.buffer_epoch=l.readI32():l.skip(b);break;case 7:b==a.Type.BOOL?this.is_free=l.readBool():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TMemoryData"),this.slab!==null&&this.slab!==void 0&&(l.writeFieldBegin("slab",a.Type.I64,1),l.writeI64(this.slab),l.writeFieldEnd()),this.start_page!==null&&this.start_page!==void 0&&(l.writeFieldBegin("start_page",a.Type.I32,2),l.writeI32(this.start_page),l.writeFieldEnd()),this.num_pages!==null&&this.num_pages!==void 0&&(l.writeFieldBegin("num_pages",a.Type.I64,3),l.writeI64(this.num_pages),l.writeFieldEnd()),this.touch!==null&&this.touch!==void 0&&(l.writeFieldBegin("touch",a.Type.I32,4),l.writeI32(this.touch),l.writeFieldEnd()),this.chunk_key!==null&&this.chunk_key!==void 0){l.writeFieldBegin("chunk_key",a.Type.LIST,5),l.writeListBegin(a.Type.I64,this.chunk_key.length);for(let T in this.chunk_key)this.chunk_key.hasOwnProperty(T)&&(T=this.chunk_key[T],l.writeI64(T));l.writeListEnd(),l.writeFieldEnd()}this.buffer_epoch!==null&&this.buffer_epoch!==void 0&&(l.writeFieldBegin("buffer_epoch",a.Type.I32,6),l.writeI32(this.buffer_epoch),l.writeFieldEnd()),this.is_free!==null&&this.is_free!==void 0&&(l.writeFieldBegin("is_free",a.Type.BOOL,7),l.writeBool(this.is_free),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TNodeMemoryInfo=class{constructor(l){this.host_name=null,this.page_size=null,this.max_num_pages=null,this.num_pages_allocated=null,this.is_allocation_capped=null,this.node_memory_data=null,l&&(l.host_name!==void 0&&l.host_name!==null&&(this.host_name=l.host_name),l.page_size!==void 0&&l.page_size!==null&&(this.page_size=l.page_size),l.max_num_pages!==void 0&&l.max_num_pages!==null&&(this.max_num_pages=l.max_num_pages),l.num_pages_allocated!==void 0&&l.num_pages_allocated!==null&&(this.num_pages_allocated=l.num_pages_allocated),l.is_allocation_capped!==void 0&&l.is_allocation_capped!==null&&(this.is_allocation_capped=l.is_allocation_capped),l.node_memory_data!==void 0&&l.node_memory_data!==null&&(this.node_memory_data=a.copyList(l.node_memory_data,[m.TMemoryData])))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.host_name=l.readString():l.skip(b);break;case 2:b==a.Type.I64?this.page_size=l.readI64():l.skip(b);break;case 3:b==a.Type.I64?this.max_num_pages=l.readI64():l.skip(b);break;case 4:b==a.Type.I64?this.num_pages_allocated=l.readI64():l.skip(b);break;case 5:b==a.Type.BOOL?this.is_allocation_capped=l.readBool():l.skip(b);break;case 6:if(b==a.Type.LIST){this.node_memory_data=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=new m.TMemoryData,k.read(l),this.node_memory_data.push(k)}l.readListEnd()}else l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TNodeMemoryInfo"),this.host_name!==null&&this.host_name!==void 0&&(l.writeFieldBegin("host_name",a.Type.STRING,1),l.writeString(this.host_name),l.writeFieldEnd()),this.page_size!==null&&this.page_size!==void 0&&(l.writeFieldBegin("page_size",a.Type.I64,2),l.writeI64(this.page_size),l.writeFieldEnd()),this.max_num_pages!==null&&this.max_num_pages!==void 0&&(l.writeFieldBegin("max_num_pages",a.Type.I64,3),l.writeI64(this.max_num_pages),l.writeFieldEnd()),this.num_pages_allocated!==null&&this.num_pages_allocated!==void 0&&(l.writeFieldBegin("num_pages_allocated",a.Type.I64,4),l.writeI64(this.num_pages_allocated),l.writeFieldEnd()),this.is_allocation_capped!==null&&this.is_allocation_capped!==void 0&&(l.writeFieldBegin("is_allocation_capped",a.Type.BOOL,5),l.writeBool(this.is_allocation_capped),l.writeFieldEnd()),this.node_memory_data!==null&&this.node_memory_data!==void 0){l.writeFieldBegin("node_memory_data",a.Type.LIST,6),l.writeListBegin(a.Type.STRUCT,this.node_memory_data.length);for(let T in this.node_memory_data)this.node_memory_data.hasOwnProperty(T)&&(T=this.node_memory_data[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TTableMeta=class{constructor(l){this.table_name=null,this.num_cols=null,this.is_view=null,this.is_replicated=null,this.shard_count=null,this.max_rows=null,this.table_id=null,this.max_table_id=null,this.col_types=null,this.col_names=null,l&&(l.table_name!==void 0&&l.table_name!==null&&(this.table_name=l.table_name),l.num_cols!==void 0&&l.num_cols!==null&&(this.num_cols=l.num_cols),l.is_view!==void 0&&l.is_view!==null&&(this.is_view=l.is_view),l.is_replicated!==void 0&&l.is_replicated!==null&&(this.is_replicated=l.is_replicated),l.shard_count!==void 0&&l.shard_count!==null&&(this.shard_count=l.shard_count),l.max_rows!==void 0&&l.max_rows!==null&&(this.max_rows=l.max_rows),l.table_id!==void 0&&l.table_id!==null&&(this.table_id=l.table_id),l.max_table_id!==void 0&&l.max_table_id!==null&&(this.max_table_id=l.max_table_id),l.col_types!==void 0&&l.col_types!==null&&(this.col_types=a.copyList(l.col_types,[_.TTypeInfo])),l.col_names!==void 0&&l.col_names!==null&&(this.col_names=a.copyList(l.col_names,[null])))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.table_name=l.readString():l.skip(b);break;case 2:b==a.Type.I64?this.num_cols=l.readI64():l.skip(b);break;case 4:b==a.Type.BOOL?this.is_view=l.readBool():l.skip(b);break;case 5:b==a.Type.BOOL?this.is_replicated=l.readBool():l.skip(b);break;case 6:b==a.Type.I64?this.shard_count=l.readI64():l.skip(b);break;case 7:b==a.Type.I64?this.max_rows=l.readI64():l.skip(b);break;case 8:b==a.Type.I64?this.table_id=l.readI64():l.skip(b);break;case 9:b==a.Type.I64?this.max_table_id=l.readI64():l.skip(b);break;case 10:if(b==a.Type.LIST){this.col_types=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=new _.TTypeInfo,k.read(l),this.col_types.push(k)}l.readListEnd()}else l.skip(b);break;case 11:if(b==a.Type.LIST){this.col_names=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=l.readString(),this.col_names.push(k)}l.readListEnd()}else l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TTableMeta"),this.table_name!==null&&this.table_name!==void 0&&(l.writeFieldBegin("table_name",a.Type.STRING,1),l.writeString(this.table_name),l.writeFieldEnd()),this.num_cols!==null&&this.num_cols!==void 0&&(l.writeFieldBegin("num_cols",a.Type.I64,2),l.writeI64(this.num_cols),l.writeFieldEnd()),this.is_view!==null&&this.is_view!==void 0&&(l.writeFieldBegin("is_view",a.Type.BOOL,4),l.writeBool(this.is_view),l.writeFieldEnd()),this.is_replicated!==null&&this.is_replicated!==void 0&&(l.writeFieldBegin("is_replicated",a.Type.BOOL,5),l.writeBool(this.is_replicated),l.writeFieldEnd()),this.shard_count!==null&&this.shard_count!==void 0&&(l.writeFieldBegin("shard_count",a.Type.I64,6),l.writeI64(this.shard_count),l.writeFieldEnd()),this.max_rows!==null&&this.max_rows!==void 0&&(l.writeFieldBegin("max_rows",a.Type.I64,7),l.writeI64(this.max_rows),l.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0&&(l.writeFieldBegin("table_id",a.Type.I64,8),l.writeI64(this.table_id),l.writeFieldEnd()),this.max_table_id!==null&&this.max_table_id!==void 0&&(l.writeFieldBegin("max_table_id",a.Type.I64,9),l.writeI64(this.max_table_id),l.writeFieldEnd()),this.col_types!==null&&this.col_types!==void 0){l.writeFieldBegin("col_types",a.Type.LIST,10),l.writeListBegin(a.Type.STRUCT,this.col_types.length);for(let T in this.col_types)this.col_types.hasOwnProperty(T)&&(T=this.col_types[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}if(this.col_names!==null&&this.col_names!==void 0){l.writeFieldBegin("col_names",a.Type.LIST,11),l.writeListBegin(a.Type.STRING,this.col_names.length);for(let T in this.col_names)this.col_names.hasOwnProperty(T)&&(T=this.col_names[T],l.writeString(T));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TTableRefreshInfo=class{constructor(l){this.update_type=null,this.timing_type=null,this.start_date_time=null,this.interval_type=null,this.interval_count=null,this.last_refresh_time=null,this.next_refresh_time=null,l&&(l.update_type!==void 0&&l.update_type!==null&&(this.update_type=l.update_type),l.timing_type!==void 0&&l.timing_type!==null&&(this.timing_type=l.timing_type),l.start_date_time!==void 0&&l.start_date_time!==null&&(this.start_date_time=l.start_date_time),l.interval_type!==void 0&&l.interval_type!==null&&(this.interval_type=l.interval_type),l.interval_count!==void 0&&l.interval_count!==null&&(this.interval_count=l.interval_count),l.last_refresh_time!==void 0&&l.last_refresh_time!==null&&(this.last_refresh_time=l.last_refresh_time),l.next_refresh_time!==void 0&&l.next_refresh_time!==null&&(this.next_refresh_time=l.next_refresh_time))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I32?this.update_type=l.readI32():l.skip(b);break;case 2:b==a.Type.I32?this.timing_type=l.readI32():l.skip(b);break;case 3:b==a.Type.STRING?this.start_date_time=l.readString():l.skip(b);break;case 4:b==a.Type.I32?this.interval_type=l.readI32():l.skip(b);break;case 5:b==a.Type.I64?this.interval_count=l.readI64():l.skip(b);break;case 6:b==a.Type.STRING?this.last_refresh_time=l.readString():l.skip(b);break;case 7:b==a.Type.STRING?this.next_refresh_time=l.readString():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TTableRefreshInfo"),this.update_type!==null&&this.update_type!==void 0&&(l.writeFieldBegin("update_type",a.Type.I32,1),l.writeI32(this.update_type),l.writeFieldEnd()),this.timing_type!==null&&this.timing_type!==void 0&&(l.writeFieldBegin("timing_type",a.Type.I32,2),l.writeI32(this.timing_type),l.writeFieldEnd()),this.start_date_time!==null&&this.start_date_time!==void 0&&(l.writeFieldBegin("start_date_time",a.Type.STRING,3),l.writeString(this.start_date_time),l.writeFieldEnd()),this.interval_type!==null&&this.interval_type!==void 0&&(l.writeFieldBegin("interval_type",a.Type.I32,4),l.writeI32(this.interval_type),l.writeFieldEnd()),this.interval_count!==null&&this.interval_count!==void 0&&(l.writeFieldBegin("interval_count",a.Type.I64,5),l.writeI64(this.interval_count),l.writeFieldEnd()),this.last_refresh_time!==null&&this.last_refresh_time!==void 0&&(l.writeFieldBegin("last_refresh_time",a.Type.STRING,6),l.writeString(this.last_refresh_time),l.writeFieldEnd()),this.next_refresh_time!==null&&this.next_refresh_time!==void 0&&(l.writeFieldBegin("next_refresh_time",a.Type.STRING,7),l.writeString(this.next_refresh_time),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TTableDetails=class{constructor(l){this.row_desc=null,this.fragment_size=null,this.page_size=null,this.max_rows=null,this.view_sql=null,this.shard_count=null,this.key_metainfo=null,this.is_temporary=null,this.partition_detail=null,this.table_type=null,this.refresh_info=null,l&&(l.row_desc!==void 0&&l.row_desc!==null&&(this.row_desc=a.copyList(l.row_desc,[m.TColumnType])),l.fragment_size!==void 0&&l.fragment_size!==null&&(this.fragment_size=l.fragment_size),l.page_size!==void 0&&l.page_size!==null&&(this.page_size=l.page_size),l.max_rows!==void 0&&l.max_rows!==null&&(this.max_rows=l.max_rows),l.view_sql!==void 0&&l.view_sql!==null&&(this.view_sql=l.view_sql),l.shard_count!==void 0&&l.shard_count!==null&&(this.shard_count=l.shard_count),l.key_metainfo!==void 0&&l.key_metainfo!==null&&(this.key_metainfo=l.key_metainfo),l.is_temporary!==void 0&&l.is_temporary!==null&&(this.is_temporary=l.is_temporary),l.partition_detail!==void 0&&l.partition_detail!==null&&(this.partition_detail=l.partition_detail),l.table_type!==void 0&&l.table_type!==null&&(this.table_type=l.table_type),l.refresh_info!==void 0&&l.refresh_info!==null&&(this.refresh_info=new m.TTableRefreshInfo(l.refresh_info)))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:if(b==a.Type.LIST){this.row_desc=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=new m.TColumnType,k.read(l),this.row_desc.push(k)}l.readListEnd()}else l.skip(b);break;case 2:b==a.Type.I64?this.fragment_size=l.readI64():l.skip(b);break;case 3:b==a.Type.I64?this.page_size=l.readI64():l.skip(b);break;case 4:b==a.Type.I64?this.max_rows=l.readI64():l.skip(b);break;case 5:b==a.Type.STRING?this.view_sql=l.readString():l.skip(b);break;case 6:b==a.Type.I64?this.shard_count=l.readI64():l.skip(b);break;case 7:b==a.Type.STRING?this.key_metainfo=l.readString():l.skip(b);break;case 8:b==a.Type.BOOL?this.is_temporary=l.readBool():l.skip(b);break;case 9:b==a.Type.I32?this.partition_detail=l.readI32():l.skip(b);break;case 10:b==a.Type.I32?this.table_type=l.readI32():l.skip(b);break;case 11:b==a.Type.STRUCT?(this.refresh_info=new m.TTableRefreshInfo,this.refresh_info.read(l)):l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TTableDetails"),this.row_desc!==null&&this.row_desc!==void 0){l.writeFieldBegin("row_desc",a.Type.LIST,1),l.writeListBegin(a.Type.STRUCT,this.row_desc.length);for(let T in this.row_desc)this.row_desc.hasOwnProperty(T)&&(T=this.row_desc[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}this.fragment_size!==null&&this.fragment_size!==void 0&&(l.writeFieldBegin("fragment_size",a.Type.I64,2),l.writeI64(this.fragment_size),l.writeFieldEnd()),this.page_size!==null&&this.page_size!==void 0&&(l.writeFieldBegin("page_size",a.Type.I64,3),l.writeI64(this.page_size),l.writeFieldEnd()),this.max_rows!==null&&this.max_rows!==void 0&&(l.writeFieldBegin("max_rows",a.Type.I64,4),l.writeI64(this.max_rows),l.writeFieldEnd()),this.view_sql!==null&&this.view_sql!==void 0&&(l.writeFieldBegin("view_sql",a.Type.STRING,5),l.writeString(this.view_sql),l.writeFieldEnd()),this.shard_count!==null&&this.shard_count!==void 0&&(l.writeFieldBegin("shard_count",a.Type.I64,6),l.writeI64(this.shard_count),l.writeFieldEnd()),this.key_metainfo!==null&&this.key_metainfo!==void 0&&(l.writeFieldBegin("key_metainfo",a.Type.STRING,7),l.writeString(this.key_metainfo),l.writeFieldEnd()),this.is_temporary!==null&&this.is_temporary!==void 0&&(l.writeFieldBegin("is_temporary",a.Type.BOOL,8),l.writeBool(this.is_temporary),l.writeFieldEnd()),this.partition_detail!==null&&this.partition_detail!==void 0&&(l.writeFieldBegin("partition_detail",a.Type.I32,9),l.writeI32(this.partition_detail),l.writeFieldEnd()),this.table_type!==null&&this.table_type!==void 0&&(l.writeFieldBegin("table_type",a.Type.I32,10),l.writeI32(this.table_type),l.writeFieldEnd()),this.refresh_info!==null&&this.refresh_info!==void 0&&(l.writeFieldBegin("refresh_info",a.Type.STRUCT,11),this.refresh_info.write(l),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TColumnRange=class{constructor(l){this.type=null,this.col_id=null,this.table_id=null,this.has_nulls=null,this.int_min=null,this.int_max=null,this.bucket=null,this.fp_min=null,this.fp_max=null,l&&(l.type!==void 0&&l.type!==null&&(this.type=l.type),l.col_id!==void 0&&l.col_id!==null&&(this.col_id=l.col_id),l.table_id!==void 0&&l.table_id!==null&&(this.table_id=l.table_id),l.has_nulls!==void 0&&l.has_nulls!==null&&(this.has_nulls=l.has_nulls),l.int_min!==void 0&&l.int_min!==null&&(this.int_min=l.int_min),l.int_max!==void 0&&l.int_max!==null&&(this.int_max=l.int_max),l.bucket!==void 0&&l.bucket!==null&&(this.bucket=l.bucket),l.fp_min!==void 0&&l.fp_min!==null&&(this.fp_min=l.fp_min),l.fp_max!==void 0&&l.fp_max!==null&&(this.fp_max=l.fp_max))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I32?this.type=l.readI32():l.skip(b);break;case 2:b==a.Type.I32?this.col_id=l.readI32():l.skip(b);break;case 3:b==a.Type.I32?this.table_id=l.readI32():l.skip(b);break;case 4:b==a.Type.BOOL?this.has_nulls=l.readBool():l.skip(b);break;case 5:b==a.Type.I64?this.int_min=l.readI64():l.skip(b);break;case 6:b==a.Type.I64?this.int_max=l.readI64():l.skip(b);break;case 7:b==a.Type.I64?this.bucket=l.readI64():l.skip(b);break;case 8:b==a.Type.DOUBLE?this.fp_min=l.readDouble():l.skip(b);break;case 9:b==a.Type.DOUBLE?this.fp_max=l.readDouble():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TColumnRange"),this.type!==null&&this.type!==void 0&&(l.writeFieldBegin("type",a.Type.I32,1),l.writeI32(this.type),l.writeFieldEnd()),this.col_id!==null&&this.col_id!==void 0&&(l.writeFieldBegin("col_id",a.Type.I32,2),l.writeI32(this.col_id),l.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0&&(l.writeFieldBegin("table_id",a.Type.I32,3),l.writeI32(this.table_id),l.writeFieldEnd()),this.has_nulls!==null&&this.has_nulls!==void 0&&(l.writeFieldBegin("has_nulls",a.Type.BOOL,4),l.writeBool(this.has_nulls),l.writeFieldEnd()),this.int_min!==null&&this.int_min!==void 0&&(l.writeFieldBegin("int_min",a.Type.I64,5),l.writeI64(this.int_min),l.writeFieldEnd()),this.int_max!==null&&this.int_max!==void 0&&(l.writeFieldBegin("int_max",a.Type.I64,6),l.writeI64(this.int_max),l.writeFieldEnd()),this.bucket!==null&&this.bucket!==void 0&&(l.writeFieldBegin("bucket",a.Type.I64,7),l.writeI64(this.bucket),l.writeFieldEnd()),this.fp_min!==null&&this.fp_min!==void 0&&(l.writeFieldBegin("fp_min",a.Type.DOUBLE,8),l.writeDouble(this.fp_min),l.writeFieldEnd()),this.fp_max!==null&&this.fp_max!==void 0&&(l.writeFieldBegin("fp_max",a.Type.DOUBLE,9),l.writeDouble(this.fp_max),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDictionaryGeneration=class{constructor(l){this.dict_id=null,this.entry_count=null,l&&(l.dict_id!==void 0&&l.dict_id!==null&&(this.dict_id=l.dict_id),l.entry_count!==void 0&&l.entry_count!==null&&(this.entry_count=l.entry_count))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I32?this.dict_id=l.readI32():l.skip(b);break;case 2:b==a.Type.I64?this.entry_count=l.readI64():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TDictionaryGeneration"),this.dict_id!==null&&this.dict_id!==void 0&&(l.writeFieldBegin("dict_id",a.Type.I32,1),l.writeI32(this.dict_id),l.writeFieldEnd()),this.entry_count!==null&&this.entry_count!==void 0&&(l.writeFieldBegin("entry_count",a.Type.I64,2),l.writeI64(this.entry_count),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TTableGeneration=class{constructor(l){this.table_id=null,this.tuple_count=null,this.start_rowid=null,l&&(l.table_id!==void 0&&l.table_id!==null&&(this.table_id=l.table_id),l.tuple_count!==void 0&&l.tuple_count!==null&&(this.tuple_count=l.tuple_count),l.start_rowid!==void 0&&l.start_rowid!==null&&(this.start_rowid=l.start_rowid))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I32?this.table_id=l.readI32():l.skip(b);break;case 2:b==a.Type.I64?this.tuple_count=l.readI64():l.skip(b);break;case 3:b==a.Type.I64?this.start_rowid=l.readI64():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TTableGeneration"),this.table_id!==null&&this.table_id!==void 0&&(l.writeFieldBegin("table_id",a.Type.I32,1),l.writeI32(this.table_id),l.writeFieldEnd()),this.tuple_count!==null&&this.tuple_count!==void 0&&(l.writeFieldBegin("tuple_count",a.Type.I64,2),l.writeI64(this.tuple_count),l.writeFieldEnd()),this.start_rowid!==null&&this.start_rowid!==void 0&&(l.writeFieldBegin("start_rowid",a.Type.I64,3),l.writeI64(this.start_rowid),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TPendingQuery=class{constructor(l){this.id=null,this.column_ranges=null,this.dictionary_generations=null,this.table_generations=null,this.parent_session_id=null,l&&(l.id!==void 0&&l.id!==null&&(this.id=l.id),l.column_ranges!==void 0&&l.column_ranges!==null&&(this.column_ranges=a.copyList(l.column_ranges,[m.TColumnRange])),l.dictionary_generations!==void 0&&l.dictionary_generations!==null&&(this.dictionary_generations=a.copyList(l.dictionary_generations,[m.TDictionaryGeneration])),l.table_generations!==void 0&&l.table_generations!==null&&(this.table_generations=a.copyList(l.table_generations,[m.TTableGeneration])),l.parent_session_id!==void 0&&l.parent_session_id!==null&&(this.parent_session_id=l.parent_session_id))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I64?this.id=l.readI64():l.skip(b);break;case 2:if(b==a.Type.LIST){this.column_ranges=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=new m.TColumnRange,k.read(l),this.column_ranges.push(k)}l.readListEnd()}else l.skip(b);break;case 3:if(b==a.Type.LIST){this.dictionary_generations=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=new m.TDictionaryGeneration,k.read(l),this.dictionary_generations.push(k)}l.readListEnd()}else l.skip(b);break;case 4:if(b==a.Type.LIST){this.table_generations=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=new m.TTableGeneration,k.read(l),this.table_generations.push(k)}l.readListEnd()}else l.skip(b);break;case 5:b==a.Type.STRING?this.parent_session_id=l.readString():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TPendingQuery"),this.id!==null&&this.id!==void 0&&(l.writeFieldBegin("id",a.Type.I64,1),l.writeI64(this.id),l.writeFieldEnd()),this.column_ranges!==null&&this.column_ranges!==void 0){l.writeFieldBegin("column_ranges",a.Type.LIST,2),l.writeListBegin(a.Type.STRUCT,this.column_ranges.length);for(let T in this.column_ranges)this.column_ranges.hasOwnProperty(T)&&(T=this.column_ranges[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}if(this.dictionary_generations!==null&&this.dictionary_generations!==void 0){l.writeFieldBegin("dictionary_generations",a.Type.LIST,3),l.writeListBegin(a.Type.STRUCT,this.dictionary_generations.length);for(let T in this.dictionary_generations)this.dictionary_generations.hasOwnProperty(T)&&(T=this.dictionary_generations[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}if(this.table_generations!==null&&this.table_generations!==void 0){l.writeFieldBegin("table_generations",a.Type.LIST,4),l.writeListBegin(a.Type.STRUCT,this.table_generations.length);for(let T in this.table_generations)this.table_generations.hasOwnProperty(T)&&(T=this.table_generations[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}this.parent_session_id!==null&&this.parent_session_id!==void 0&&(l.writeFieldBegin("parent_session_id",a.Type.STRING,5),l.writeString(this.parent_session_id),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TVarLen=class{constructor(l){this.payload=null,this.is_null=null,l&&(l.payload!==void 0&&l.payload!==null&&(this.payload=l.payload),l.is_null!==void 0&&l.is_null!==null&&(this.is_null=l.is_null))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.payload=l.readBinary():l.skip(b);break;case 2:b==a.Type.BOOL?this.is_null=l.readBool():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TVarLen"),this.payload!==null&&this.payload!==void 0&&(l.writeFieldBegin("payload",a.Type.STRING,1),l.writeBinary(this.payload),l.writeFieldEnd()),this.is_null!==null&&this.is_null!==void 0&&(l.writeFieldBegin("is_null",a.Type.BOOL,2),l.writeBool(this.is_null),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDataBlockPtr=class{constructor(l){this.fixed_len_data=null,this.var_len_data=null,l&&(l.fixed_len_data!==void 0&&l.fixed_len_data!==null&&(this.fixed_len_data=l.fixed_len_data),l.var_len_data!==void 0&&l.var_len_data!==null&&(this.var_len_data=a.copyList(l.var_len_data,[m.TVarLen])))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.fixed_len_data=l.readBinary():l.skip(b);break;case 2:if(b==a.Type.LIST){this.var_len_data=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=new m.TVarLen,k.read(l),this.var_len_data.push(k)}l.readListEnd()}else l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TDataBlockPtr"),this.fixed_len_data!==null&&this.fixed_len_data!==void 0&&(l.writeFieldBegin("fixed_len_data",a.Type.STRING,1),l.writeBinary(this.fixed_len_data),l.writeFieldEnd()),this.var_len_data!==null&&this.var_len_data!==void 0){l.writeFieldBegin("var_len_data",a.Type.LIST,2),l.writeListBegin(a.Type.STRUCT,this.var_len_data.length);for(let T in this.var_len_data)this.var_len_data.hasOwnProperty(T)&&(T=this.var_len_data[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TInsertData=class{constructor(l){this.db_id=null,this.table_id=null,this.column_ids=null,this.data=null,this.num_rows=null,this.is_default=null,l&&(l.db_id!==void 0&&l.db_id!==null&&(this.db_id=l.db_id),l.table_id!==void 0&&l.table_id!==null&&(this.table_id=l.table_id),l.column_ids!==void 0&&l.column_ids!==null&&(this.column_ids=a.copyList(l.column_ids,[null])),l.data!==void 0&&l.data!==null&&(this.data=a.copyList(l.data,[m.TDataBlockPtr])),l.num_rows!==void 0&&l.num_rows!==null&&(this.num_rows=l.num_rows),l.is_default!==void 0&&l.is_default!==null&&(this.is_default=a.copyList(l.is_default,[null])))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I32?this.db_id=l.readI32():l.skip(b);break;case 2:b==a.Type.I32?this.table_id=l.readI32():l.skip(b);break;case 3:if(b==a.Type.LIST){this.column_ids=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=l.readI32(),this.column_ids.push(k)}l.readListEnd()}else l.skip(b);break;case 4:if(b==a.Type.LIST){this.data=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=new m.TDataBlockPtr,k.read(l),this.data.push(k)}l.readListEnd()}else l.skip(b);break;case 5:b==a.Type.I64?this.num_rows=l.readI64():l.skip(b);break;case 6:if(b==a.Type.LIST){this.is_default=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=l.readBool(),this.is_default.push(k)}l.readListEnd()}else l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TInsertData"),this.db_id!==null&&this.db_id!==void 0&&(l.writeFieldBegin("db_id",a.Type.I32,1),l.writeI32(this.db_id),l.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0&&(l.writeFieldBegin("table_id",a.Type.I32,2),l.writeI32(this.table_id),l.writeFieldEnd()),this.column_ids!==null&&this.column_ids!==void 0){l.writeFieldBegin("column_ids",a.Type.LIST,3),l.writeListBegin(a.Type.I32,this.column_ids.length);for(let T in this.column_ids)this.column_ids.hasOwnProperty(T)&&(T=this.column_ids[T],l.writeI32(T));l.writeListEnd(),l.writeFieldEnd()}if(this.data!==null&&this.data!==void 0){l.writeFieldBegin("data",a.Type.LIST,4),l.writeListBegin(a.Type.STRUCT,this.data.length);for(let T in this.data)this.data.hasOwnProperty(T)&&(T=this.data[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}if(this.num_rows!==null&&this.num_rows!==void 0&&(l.writeFieldBegin("num_rows",a.Type.I64,5),l.writeI64(this.num_rows),l.writeFieldEnd()),this.is_default!==null&&this.is_default!==void 0){l.writeFieldBegin("is_default",a.Type.LIST,6),l.writeListBegin(a.Type.BOOL,this.is_default.length);for(let T in this.is_default)this.is_default.hasOwnProperty(T)&&(T=this.is_default[T],l.writeBool(T));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TChunkData=class{constructor(l){this.data_buffer=null,this.index_buffer=null,l&&(l.data_buffer!==void 0&&l.data_buffer!==null&&(this.data_buffer=l.data_buffer),l.index_buffer!==void 0&&l.index_buffer!==null&&(this.index_buffer=l.index_buffer))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.data_buffer=l.readBinary():l.skip(b);break;case 2:b==a.Type.STRING?this.index_buffer=l.readBinary():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TChunkData"),this.data_buffer!==null&&this.data_buffer!==void 0&&(l.writeFieldBegin("data_buffer",a.Type.STRING,1),l.writeBinary(this.data_buffer),l.writeFieldEnd()),this.index_buffer!==null&&this.index_buffer!==void 0&&(l.writeFieldBegin("index_buffer",a.Type.STRING,2),l.writeBinary(this.index_buffer),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TInsertChunks=class{constructor(l){this.db_id=null,this.table_id=null,this.data=null,this.valid_indices=null,this.num_rows=null,l&&(l.db_id!==void 0&&l.db_id!==null&&(this.db_id=l.db_id),l.table_id!==void 0&&l.table_id!==null&&(this.table_id=l.table_id),l.data!==void 0&&l.data!==null&&(this.data=a.copyList(l.data,[m.TChunkData])),l.valid_indices!==void 0&&l.valid_indices!==null&&(this.valid_indices=a.copyList(l.valid_indices,[null])),l.num_rows!==void 0&&l.num_rows!==null&&(this.num_rows=l.num_rows))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I32?this.db_id=l.readI32():l.skip(b);break;case 2:b==a.Type.I32?this.table_id=l.readI32():l.skip(b);break;case 3:if(b==a.Type.LIST){this.data=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=new m.TChunkData,k.read(l),this.data.push(k)}l.readListEnd()}else l.skip(b);break;case 4:if(b==a.Type.LIST){this.valid_indices=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=l.readI64(),this.valid_indices.push(k)}l.readListEnd()}else l.skip(b);break;case 5:b==a.Type.I64?this.num_rows=l.readI64():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TInsertChunks"),this.db_id!==null&&this.db_id!==void 0&&(l.writeFieldBegin("db_id",a.Type.I32,1),l.writeI32(this.db_id),l.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0&&(l.writeFieldBegin("table_id",a.Type.I32,2),l.writeI32(this.table_id),l.writeFieldEnd()),this.data!==null&&this.data!==void 0){l.writeFieldBegin("data",a.Type.LIST,3),l.writeListBegin(a.Type.STRUCT,this.data.length);for(let T in this.data)this.data.hasOwnProperty(T)&&(T=this.data[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}if(this.valid_indices!==null&&this.valid_indices!==void 0){l.writeFieldBegin("valid_indices",a.Type.LIST,4),l.writeListBegin(a.Type.I64,this.valid_indices.length);for(let T in this.valid_indices)this.valid_indices.hasOwnProperty(T)&&(T=this.valid_indices[T],l.writeI64(T));l.writeListEnd(),l.writeFieldEnd()}this.num_rows!==null&&this.num_rows!==void 0&&(l.writeFieldBegin("num_rows",a.Type.I64,5),l.writeI64(this.num_rows),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TPendingRenderQuery=class{constructor(l){this.id=null,l&&l.id!==void 0&&l.id!==null&&(this.id=l.id)}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I64?this.id=l.readI64():l.skip(b);break;case 0:l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TPendingRenderQuery"),this.id!==null&&this.id!==void 0&&(l.writeFieldBegin("id",a.Type.I64,1),l.writeI64(this.id),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TRenderParseResult=class{constructor(l){this.merge_type=null,this.node_id=null,this.execution_time_ms=null,this.render_time_ms=null,this.total_time_ms=null,l&&(l.merge_type!==void 0&&l.merge_type!==null&&(this.merge_type=l.merge_type),l.node_id!==void 0&&l.node_id!==null&&(this.node_id=l.node_id),l.execution_time_ms!==void 0&&l.execution_time_ms!==null&&(this.execution_time_ms=l.execution_time_ms),l.render_time_ms!==void 0&&l.render_time_ms!==null&&(this.render_time_ms=l.render_time_ms),l.total_time_ms!==void 0&&l.total_time_ms!==null&&(this.total_time_ms=l.total_time_ms))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I32?this.merge_type=l.readI32():l.skip(b);break;case 2:b==a.Type.I32?this.node_id=l.readI32():l.skip(b);break;case 3:b==a.Type.I64?this.execution_time_ms=l.readI64():l.skip(b);break;case 4:b==a.Type.I64?this.render_time_ms=l.readI64():l.skip(b);break;case 5:b==a.Type.I64?this.total_time_ms=l.readI64():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TRenderParseResult"),this.merge_type!==null&&this.merge_type!==void 0&&(l.writeFieldBegin("merge_type",a.Type.I32,1),l.writeI32(this.merge_type),l.writeFieldEnd()),this.node_id!==null&&this.node_id!==void 0&&(l.writeFieldBegin("node_id",a.Type.I32,2),l.writeI32(this.node_id),l.writeFieldEnd()),this.execution_time_ms!==null&&this.execution_time_ms!==void 0&&(l.writeFieldBegin("execution_time_ms",a.Type.I64,3),l.writeI64(this.execution_time_ms),l.writeFieldEnd()),this.render_time_ms!==null&&this.render_time_ms!==void 0&&(l.writeFieldBegin("render_time_ms",a.Type.I64,4),l.writeI64(this.render_time_ms),l.writeFieldEnd()),this.total_time_ms!==null&&this.total_time_ms!==void 0&&(l.writeFieldBegin("total_time_ms",a.Type.I64,5),l.writeI64(this.total_time_ms),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TRawRenderPassDataResult=class{constructor(l){this.num_pixel_channels=null,this.num_pixel_samples=null,this.pixels=null,this.row_ids_A=null,this.row_ids_B=null,this.table_ids=null,this.accum_data=null,this.accum_depth=null,l&&(l.num_pixel_channels!==void 0&&l.num_pixel_channels!==null&&(this.num_pixel_channels=l.num_pixel_channels),l.num_pixel_samples!==void 0&&l.num_pixel_samples!==null&&(this.num_pixel_samples=l.num_pixel_samples),l.pixels!==void 0&&l.pixels!==null&&(this.pixels=l.pixels),l.row_ids_A!==void 0&&l.row_ids_A!==null&&(this.row_ids_A=l.row_ids_A),l.row_ids_B!==void 0&&l.row_ids_B!==null&&(this.row_ids_B=l.row_ids_B),l.table_ids!==void 0&&l.table_ids!==null&&(this.table_ids=l.table_ids),l.accum_data!==void 0&&l.accum_data!==null&&(this.accum_data=l.accum_data),l.accum_depth!==void 0&&l.accum_depth!==null&&(this.accum_depth=l.accum_depth))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I32?this.num_pixel_channels=l.readI32():l.skip(b);break;case 2:b==a.Type.I32?this.num_pixel_samples=l.readI32():l.skip(b);break;case 3:b==a.Type.STRING?this.pixels=l.readBinary():l.skip(b);break;case 4:b==a.Type.STRING?this.row_ids_A=l.readBinary():l.skip(b);break;case 5:b==a.Type.STRING?this.row_ids_B=l.readBinary():l.skip(b);break;case 6:b==a.Type.STRING?this.table_ids=l.readBinary():l.skip(b);break;case 7:b==a.Type.STRING?this.accum_data=l.readBinary():l.skip(b);break;case 8:b==a.Type.I32?this.accum_depth=l.readI32():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TRawRenderPassDataResult"),this.num_pixel_channels!==null&&this.num_pixel_channels!==void 0&&(l.writeFieldBegin("num_pixel_channels",a.Type.I32,1),l.writeI32(this.num_pixel_channels),l.writeFieldEnd()),this.num_pixel_samples!==null&&this.num_pixel_samples!==void 0&&(l.writeFieldBegin("num_pixel_samples",a.Type.I32,2),l.writeI32(this.num_pixel_samples),l.writeFieldEnd()),this.pixels!==null&&this.pixels!==void 0&&(l.writeFieldBegin("pixels",a.Type.STRING,3),l.writeBinary(this.pixels),l.writeFieldEnd()),this.row_ids_A!==null&&this.row_ids_A!==void 0&&(l.writeFieldBegin("row_ids_A",a.Type.STRING,4),l.writeBinary(this.row_ids_A),l.writeFieldEnd()),this.row_ids_B!==null&&this.row_ids_B!==void 0&&(l.writeFieldBegin("row_ids_B",a.Type.STRING,5),l.writeBinary(this.row_ids_B),l.writeFieldEnd()),this.table_ids!==null&&this.table_ids!==void 0&&(l.writeFieldBegin("table_ids",a.Type.STRING,6),l.writeBinary(this.table_ids),l.writeFieldEnd()),this.accum_data!==null&&this.accum_data!==void 0&&(l.writeFieldBegin("accum_data",a.Type.STRING,7),l.writeBinary(this.accum_data),l.writeFieldEnd()),this.accum_depth!==null&&this.accum_depth!==void 0&&(l.writeFieldBegin("accum_depth",a.Type.I32,8),l.writeI32(this.accum_depth),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TRawPixelData=class{constructor(l){this.width=null,this.height=null,this.render_pass_map=null,l&&(l.width!==void 0&&l.width!==null&&(this.width=l.width),l.height!==void 0&&l.height!==null&&(this.height=l.height),l.render_pass_map!==void 0&&l.render_pass_map!==null&&(this.render_pass_map=a.copyMap(l.render_pass_map,[m.TRawRenderPassDataResult])))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I32?this.width=l.readI32():l.skip(b);break;case 2:b==a.Type.I32?this.height=l.readI32():l.skip(b);break;case 3:if(b==a.Type.MAP){this.render_pass_map={};const B=l.readMapBegin().size||0;for(let F=0;F<B;++F){let k=null,M=null;k=l.readI32(),M=new m.TRawRenderPassDataResult,M.read(l),this.render_pass_map[k]=M}l.readMapEnd()}else l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TRawPixelData"),this.width!==null&&this.width!==void 0&&(l.writeFieldBegin("width",a.Type.I32,1),l.writeI32(this.width),l.writeFieldEnd()),this.height!==null&&this.height!==void 0&&(l.writeFieldBegin("height",a.Type.I32,2),l.writeI32(this.height),l.writeFieldEnd()),this.render_pass_map!==null&&this.render_pass_map!==void 0){l.writeFieldBegin("render_pass_map",a.Type.MAP,3),l.writeMapBegin(a.Type.I32,a.Type.STRUCT,a.objectLength(this.render_pass_map));for(let T in this.render_pass_map)if(this.render_pass_map.hasOwnProperty(T)){let b=this.render_pass_map[T];l.writeI32(T),b.write(l)}l.writeMapEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TRenderDatum=class{constructor(l){this.type=null,this.cnt=null,this.value=null,l&&(l.type!==void 0&&l.type!==null&&(this.type=l.type),l.cnt!==void 0&&l.cnt!==null&&(this.cnt=l.cnt),l.value!==void 0&&l.value!==null&&(this.value=l.value))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I32?this.type=l.readI32():l.skip(b);break;case 2:b==a.Type.I32?this.cnt=l.readI32():l.skip(b);break;case 3:b==a.Type.STRING?this.value=l.readBinary():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TRenderDatum"),this.type!==null&&this.type!==void 0&&(l.writeFieldBegin("type",a.Type.I32,1),l.writeI32(this.type),l.writeFieldEnd()),this.cnt!==null&&this.cnt!==void 0&&(l.writeFieldBegin("cnt",a.Type.I32,2),l.writeI32(this.cnt),l.writeFieldEnd()),this.value!==null&&this.value!==void 0&&(l.writeFieldBegin("value",a.Type.STRING,3),l.writeBinary(this.value),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TRenderStepResult=class{constructor(l){this.merge_data=null,this.raw_pixel_data=null,this.execution_time_ms=null,this.render_time_ms=null,this.total_time_ms=null,l&&(l.merge_data!==void 0&&l.merge_data!==null&&(this.merge_data=a.copyMap(l.merge_data,[a.copyMap,a.copyMap,a.copyMap,a.copyList,m.TRenderDatum])),l.raw_pixel_data!==void 0&&l.raw_pixel_data!==null&&(this.raw_pixel_data=new m.TRawPixelData(l.raw_pixel_data)),l.execution_time_ms!==void 0&&l.execution_time_ms!==null&&(this.execution_time_ms=l.execution_time_ms),l.render_time_ms!==void 0&&l.render_time_ms!==null&&(this.render_time_ms=l.render_time_ms),l.total_time_ms!==void 0&&l.total_time_ms!==null&&(this.total_time_ms=l.total_time_ms))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:if(b==a.Type.MAP){this.merge_data={};const B=l.readMapBegin().size||0;for(let F=0;F<B;++F){let k=null,M=null;k=l.readString(),M={};const R=l.readMapBegin().size||0;for(let P=0;P<R;++P){let j=null,D=null;j=l.readString(),D={};const $=l.readMapBegin().size||0;for(let Y=0;Y<$;++Y){let W=null,H=null;W=l.readString(),H={};const V=l.readMapBegin().size||0;for(let le=0;le<V;++le){let pe=null,se=null;pe=l.readString(),se=[];const fe=l.readListBegin().size||0;for(let Ce=0;Ce<fe;++Ce){let Me=null;Me=new m.TRenderDatum,Me.read(l),se.push(Me)}l.readListEnd(),H[pe]=se}l.readMapEnd(),D[W]=H}l.readMapEnd(),M[j]=D}l.readMapEnd(),this.merge_data[k]=M}l.readMapEnd()}else l.skip(b);break;case 2:b==a.Type.STRUCT?(this.raw_pixel_data=new m.TRawPixelData,this.raw_pixel_data.read(l)):l.skip(b);break;case 3:b==a.Type.I64?this.execution_time_ms=l.readI64():l.skip(b);break;case 4:b==a.Type.I64?this.render_time_ms=l.readI64():l.skip(b);break;case 5:b==a.Type.I64?this.total_time_ms=l.readI64():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TRenderStepResult"),this.merge_data!==null&&this.merge_data!==void 0){l.writeFieldBegin("merge_data",a.Type.MAP,1),l.writeMapBegin(a.Type.STRING,a.Type.MAP,a.objectLength(this.merge_data));for(let T in this.merge_data)if(this.merge_data.hasOwnProperty(T)){let b=this.merge_data[T];l.writeString(T),l.writeMapBegin(a.Type.STRING,a.Type.MAP,a.objectLength(b));for(let S in b)if(b.hasOwnProperty(S)){let x=b[S];l.writeString(S),l.writeMapBegin(a.Type.STRING,a.Type.MAP,a.objectLength(x));for(let B in x)if(x.hasOwnProperty(B)){let F=x[B];l.writeString(B),l.writeMapBegin(a.Type.STRING,a.Type.LIST,a.objectLength(F));for(let k in F)if(F.hasOwnProperty(k)){let M=F[k];l.writeString(k),l.writeListBegin(a.Type.STRUCT,M.length);for(let A in M)M.hasOwnProperty(A)&&(A=M[A],A.write(l));l.writeListEnd()}l.writeMapEnd()}l.writeMapEnd()}l.writeMapEnd()}l.writeMapEnd(),l.writeFieldEnd()}this.raw_pixel_data!==null&&this.raw_pixel_data!==void 0&&(l.writeFieldBegin("raw_pixel_data",a.Type.STRUCT,2),this.raw_pixel_data.write(l),l.writeFieldEnd()),this.execution_time_ms!==null&&this.execution_time_ms!==void 0&&(l.writeFieldBegin("execution_time_ms",a.Type.I64,3),l.writeI64(this.execution_time_ms),l.writeFieldEnd()),this.render_time_ms!==null&&this.render_time_ms!==void 0&&(l.writeFieldBegin("render_time_ms",a.Type.I64,4),l.writeI64(this.render_time_ms),l.writeFieldEnd()),this.total_time_ms!==null&&this.total_time_ms!==void 0&&(l.writeFieldBegin("total_time_ms",a.Type.I64,5),l.writeI64(this.total_time_ms),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDatabasePermissions=class{constructor(l){this.create_=null,this.delete_=null,this.view_sql_editor_=null,this.access_=null,l&&(l.create_!==void 0&&l.create_!==null&&(this.create_=l.create_),l.delete_!==void 0&&l.delete_!==null&&(this.delete_=l.delete_),l.view_sql_editor_!==void 0&&l.view_sql_editor_!==null&&(this.view_sql_editor_=l.view_sql_editor_),l.access_!==void 0&&l.access_!==null&&(this.access_=l.access_))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.BOOL?this.create_=l.readBool():l.skip(b);break;case 2:b==a.Type.BOOL?this.delete_=l.readBool():l.skip(b);break;case 3:b==a.Type.BOOL?this.view_sql_editor_=l.readBool():l.skip(b);break;case 4:b==a.Type.BOOL?this.access_=l.readBool():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TDatabasePermissions"),this.create_!==null&&this.create_!==void 0&&(l.writeFieldBegin("create_",a.Type.BOOL,1),l.writeBool(this.create_),l.writeFieldEnd()),this.delete_!==null&&this.delete_!==void 0&&(l.writeFieldBegin("delete_",a.Type.BOOL,2),l.writeBool(this.delete_),l.writeFieldEnd()),this.view_sql_editor_!==null&&this.view_sql_editor_!==void 0&&(l.writeFieldBegin("view_sql_editor_",a.Type.BOOL,3),l.writeBool(this.view_sql_editor_),l.writeFieldEnd()),this.access_!==null&&this.access_!==void 0&&(l.writeFieldBegin("access_",a.Type.BOOL,4),l.writeBool(this.access_),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TTablePermissions=class{constructor(l){this.create_=null,this.drop_=null,this.select_=null,this.insert_=null,this.update_=null,this.delete_=null,this.truncate_=null,this.alter_=null,l&&(l.create_!==void 0&&l.create_!==null&&(this.create_=l.create_),l.drop_!==void 0&&l.drop_!==null&&(this.drop_=l.drop_),l.select_!==void 0&&l.select_!==null&&(this.select_=l.select_),l.insert_!==void 0&&l.insert_!==null&&(this.insert_=l.insert_),l.update_!==void 0&&l.update_!==null&&(this.update_=l.update_),l.delete_!==void 0&&l.delete_!==null&&(this.delete_=l.delete_),l.truncate_!==void 0&&l.truncate_!==null&&(this.truncate_=l.truncate_),l.alter_!==void 0&&l.alter_!==null&&(this.alter_=l.alter_))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.BOOL?this.create_=l.readBool():l.skip(b);break;case 2:b==a.Type.BOOL?this.drop_=l.readBool():l.skip(b);break;case 3:b==a.Type.BOOL?this.select_=l.readBool():l.skip(b);break;case 4:b==a.Type.BOOL?this.insert_=l.readBool():l.skip(b);break;case 5:b==a.Type.BOOL?this.update_=l.readBool():l.skip(b);break;case 6:b==a.Type.BOOL?this.delete_=l.readBool():l.skip(b);break;case 7:b==a.Type.BOOL?this.truncate_=l.readBool():l.skip(b);break;case 8:b==a.Type.BOOL?this.alter_=l.readBool():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TTablePermissions"),this.create_!==null&&this.create_!==void 0&&(l.writeFieldBegin("create_",a.Type.BOOL,1),l.writeBool(this.create_),l.writeFieldEnd()),this.drop_!==null&&this.drop_!==void 0&&(l.writeFieldBegin("drop_",a.Type.BOOL,2),l.writeBool(this.drop_),l.writeFieldEnd()),this.select_!==null&&this.select_!==void 0&&(l.writeFieldBegin("select_",a.Type.BOOL,3),l.writeBool(this.select_),l.writeFieldEnd()),this.insert_!==null&&this.insert_!==void 0&&(l.writeFieldBegin("insert_",a.Type.BOOL,4),l.writeBool(this.insert_),l.writeFieldEnd()),this.update_!==null&&this.update_!==void 0&&(l.writeFieldBegin("update_",a.Type.BOOL,5),l.writeBool(this.update_),l.writeFieldEnd()),this.delete_!==null&&this.delete_!==void 0&&(l.writeFieldBegin("delete_",a.Type.BOOL,6),l.writeBool(this.delete_),l.writeFieldEnd()),this.truncate_!==null&&this.truncate_!==void 0&&(l.writeFieldBegin("truncate_",a.Type.BOOL,7),l.writeBool(this.truncate_),l.writeFieldEnd()),this.alter_!==null&&this.alter_!==void 0&&(l.writeFieldBegin("alter_",a.Type.BOOL,8),l.writeBool(this.alter_),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDashboardPermissions=class{constructor(l){this.create_=null,this.delete_=null,this.view_=null,this.edit_=null,l&&(l.create_!==void 0&&l.create_!==null&&(this.create_=l.create_),l.delete_!==void 0&&l.delete_!==null&&(this.delete_=l.delete_),l.view_!==void 0&&l.view_!==null&&(this.view_=l.view_),l.edit_!==void 0&&l.edit_!==null&&(this.edit_=l.edit_))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.BOOL?this.create_=l.readBool():l.skip(b);break;case 2:b==a.Type.BOOL?this.delete_=l.readBool():l.skip(b);break;case 3:b==a.Type.BOOL?this.view_=l.readBool():l.skip(b);break;case 4:b==a.Type.BOOL?this.edit_=l.readBool():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TDashboardPermissions"),this.create_!==null&&this.create_!==void 0&&(l.writeFieldBegin("create_",a.Type.BOOL,1),l.writeBool(this.create_),l.writeFieldEnd()),this.delete_!==null&&this.delete_!==void 0&&(l.writeFieldBegin("delete_",a.Type.BOOL,2),l.writeBool(this.delete_),l.writeFieldEnd()),this.view_!==null&&this.view_!==void 0&&(l.writeFieldBegin("view_",a.Type.BOOL,3),l.writeBool(this.view_),l.writeFieldEnd()),this.edit_!==null&&this.edit_!==void 0&&(l.writeFieldBegin("edit_",a.Type.BOOL,4),l.writeBool(this.edit_),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TViewPermissions=class{constructor(l){this.create_=null,this.drop_=null,this.select_=null,this.insert_=null,this.update_=null,this.delete_=null,l&&(l.create_!==void 0&&l.create_!==null&&(this.create_=l.create_),l.drop_!==void 0&&l.drop_!==null&&(this.drop_=l.drop_),l.select_!==void 0&&l.select_!==null&&(this.select_=l.select_),l.insert_!==void 0&&l.insert_!==null&&(this.insert_=l.insert_),l.update_!==void 0&&l.update_!==null&&(this.update_=l.update_),l.delete_!==void 0&&l.delete_!==null&&(this.delete_=l.delete_))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.BOOL?this.create_=l.readBool():l.skip(b);break;case 2:b==a.Type.BOOL?this.drop_=l.readBool():l.skip(b);break;case 3:b==a.Type.BOOL?this.select_=l.readBool():l.skip(b);break;case 4:b==a.Type.BOOL?this.insert_=l.readBool():l.skip(b);break;case 5:b==a.Type.BOOL?this.update_=l.readBool():l.skip(b);break;case 6:b==a.Type.BOOL?this.delete_=l.readBool():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TViewPermissions"),this.create_!==null&&this.create_!==void 0&&(l.writeFieldBegin("create_",a.Type.BOOL,1),l.writeBool(this.create_),l.writeFieldEnd()),this.drop_!==null&&this.drop_!==void 0&&(l.writeFieldBegin("drop_",a.Type.BOOL,2),l.writeBool(this.drop_),l.writeFieldEnd()),this.select_!==null&&this.select_!==void 0&&(l.writeFieldBegin("select_",a.Type.BOOL,3),l.writeBool(this.select_),l.writeFieldEnd()),this.insert_!==null&&this.insert_!==void 0&&(l.writeFieldBegin("insert_",a.Type.BOOL,4),l.writeBool(this.insert_),l.writeFieldEnd()),this.update_!==null&&this.update_!==void 0&&(l.writeFieldBegin("update_",a.Type.BOOL,5),l.writeBool(this.update_),l.writeFieldEnd()),this.delete_!==null&&this.delete_!==void 0&&(l.writeFieldBegin("delete_",a.Type.BOOL,6),l.writeBool(this.delete_),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TServerPermissions=class{constructor(l){this.create_=null,this.drop_=null,this.alter_=null,this.usage_=null,l&&(l.create_!==void 0&&l.create_!==null&&(this.create_=l.create_),l.drop_!==void 0&&l.drop_!==null&&(this.drop_=l.drop_),l.alter_!==void 0&&l.alter_!==null&&(this.alter_=l.alter_),l.usage_!==void 0&&l.usage_!==null&&(this.usage_=l.usage_))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.BOOL?this.create_=l.readBool():l.skip(b);break;case 2:b==a.Type.BOOL?this.drop_=l.readBool():l.skip(b);break;case 3:b==a.Type.BOOL?this.alter_=l.readBool():l.skip(b);break;case 4:b==a.Type.BOOL?this.usage_=l.readBool():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TServerPermissions"),this.create_!==null&&this.create_!==void 0&&(l.writeFieldBegin("create_",a.Type.BOOL,1),l.writeBool(this.create_),l.writeFieldEnd()),this.drop_!==null&&this.drop_!==void 0&&(l.writeFieldBegin("drop_",a.Type.BOOL,2),l.writeBool(this.drop_),l.writeFieldEnd()),this.alter_!==null&&this.alter_!==void 0&&(l.writeFieldBegin("alter_",a.Type.BOOL,3),l.writeBool(this.alter_),l.writeFieldEnd()),this.usage_!==null&&this.usage_!==void 0&&(l.writeFieldBegin("usage_",a.Type.BOOL,4),l.writeBool(this.usage_),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDBObjectPermissions=class{constructor(l){this.database_permissions_=null,this.table_permissions_=null,this.dashboard_permissions_=null,this.view_permissions_=null,this.server_permissions_=null,l&&(l.database_permissions_!==void 0&&l.database_permissions_!==null&&(this.database_permissions_=new m.TDatabasePermissions(l.database_permissions_)),l.table_permissions_!==void 0&&l.table_permissions_!==null&&(this.table_permissions_=new m.TTablePermissions(l.table_permissions_)),l.dashboard_permissions_!==void 0&&l.dashboard_permissions_!==null&&(this.dashboard_permissions_=new m.TDashboardPermissions(l.dashboard_permissions_)),l.view_permissions_!==void 0&&l.view_permissions_!==null&&(this.view_permissions_=new m.TViewPermissions(l.view_permissions_)),l.server_permissions_!==void 0&&l.server_permissions_!==null&&(this.server_permissions_=new m.TServerPermissions(l.server_permissions_)))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRUCT?(this.database_permissions_=new m.TDatabasePermissions,this.database_permissions_.read(l)):l.skip(b);break;case 2:b==a.Type.STRUCT?(this.table_permissions_=new m.TTablePermissions,this.table_permissions_.read(l)):l.skip(b);break;case 3:b==a.Type.STRUCT?(this.dashboard_permissions_=new m.TDashboardPermissions,this.dashboard_permissions_.read(l)):l.skip(b);break;case 4:b==a.Type.STRUCT?(this.view_permissions_=new m.TViewPermissions,this.view_permissions_.read(l)):l.skip(b);break;case 5:b==a.Type.STRUCT?(this.server_permissions_=new m.TServerPermissions,this.server_permissions_.read(l)):l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TDBObjectPermissions"),this.database_permissions_!==null&&this.database_permissions_!==void 0&&(l.writeFieldBegin("database_permissions_",a.Type.STRUCT,1),this.database_permissions_.write(l),l.writeFieldEnd()),this.table_permissions_!==null&&this.table_permissions_!==void 0&&(l.writeFieldBegin("table_permissions_",a.Type.STRUCT,2),this.table_permissions_.write(l),l.writeFieldEnd()),this.dashboard_permissions_!==null&&this.dashboard_permissions_!==void 0&&(l.writeFieldBegin("dashboard_permissions_",a.Type.STRUCT,3),this.dashboard_permissions_.write(l),l.writeFieldEnd()),this.view_permissions_!==null&&this.view_permissions_!==void 0&&(l.writeFieldBegin("view_permissions_",a.Type.STRUCT,4),this.view_permissions_.write(l),l.writeFieldEnd()),this.server_permissions_!==null&&this.server_permissions_!==void 0&&(l.writeFieldBegin("server_permissions_",a.Type.STRUCT,5),this.server_permissions_.write(l),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDBObject=class{constructor(l){this.objectName=null,this.objectType=null,this.privs=null,this.grantee=null,this.privilegeObjectType=null,this.objectId=null,l&&(l.objectName!==void 0&&l.objectName!==null&&(this.objectName=l.objectName),l.objectType!==void 0&&l.objectType!==null&&(this.objectType=l.objectType),l.privs!==void 0&&l.privs!==null&&(this.privs=a.copyList(l.privs,[null])),l.grantee!==void 0&&l.grantee!==null&&(this.grantee=l.grantee),l.privilegeObjectType!==void 0&&l.privilegeObjectType!==null&&(this.privilegeObjectType=l.privilegeObjectType),l.objectId!==void 0&&l.objectId!==null&&(this.objectId=l.objectId))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.objectName=l.readString():l.skip(b);break;case 2:b==a.Type.I32?this.objectType=l.readI32():l.skip(b);break;case 3:if(b==a.Type.LIST){this.privs=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=l.readBool(),this.privs.push(k)}l.readListEnd()}else l.skip(b);break;case 4:b==a.Type.STRING?this.grantee=l.readString():l.skip(b);break;case 5:b==a.Type.I32?this.privilegeObjectType=l.readI32():l.skip(b);break;case 6:b==a.Type.I32?this.objectId=l.readI32():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TDBObject"),this.objectName!==null&&this.objectName!==void 0&&(l.writeFieldBegin("objectName",a.Type.STRING,1),l.writeString(this.objectName),l.writeFieldEnd()),this.objectType!==null&&this.objectType!==void 0&&(l.writeFieldBegin("objectType",a.Type.I32,2),l.writeI32(this.objectType),l.writeFieldEnd()),this.privs!==null&&this.privs!==void 0){l.writeFieldBegin("privs",a.Type.LIST,3),l.writeListBegin(a.Type.BOOL,this.privs.length);for(let T in this.privs)this.privs.hasOwnProperty(T)&&(T=this.privs[T],l.writeBool(T));l.writeListEnd(),l.writeFieldEnd()}this.grantee!==null&&this.grantee!==void 0&&(l.writeFieldBegin("grantee",a.Type.STRING,4),l.writeString(this.grantee),l.writeFieldEnd()),this.privilegeObjectType!==null&&this.privilegeObjectType!==void 0&&(l.writeFieldBegin("privilegeObjectType",a.Type.I32,5),l.writeI32(this.privilegeObjectType),l.writeFieldEnd()),this.objectId!==null&&this.objectId!==void 0&&(l.writeFieldBegin("objectId",a.Type.I32,6),l.writeI32(this.objectId),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDashboardGrantees=class{constructor(l){this.name=null,this.is_user=null,this.permissions=null,l&&(l.name!==void 0&&l.name!==null&&(this.name=l.name),l.is_user!==void 0&&l.is_user!==null&&(this.is_user=l.is_user),l.permissions!==void 0&&l.permissions!==null&&(this.permissions=new m.TDashboardPermissions(l.permissions)))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.name=l.readString():l.skip(b);break;case 2:b==a.Type.BOOL?this.is_user=l.readBool():l.skip(b);break;case 3:b==a.Type.STRUCT?(this.permissions=new m.TDashboardPermissions,this.permissions.read(l)):l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TDashboardGrantees"),this.name!==null&&this.name!==void 0&&(l.writeFieldBegin("name",a.Type.STRING,1),l.writeString(this.name),l.writeFieldEnd()),this.is_user!==null&&this.is_user!==void 0&&(l.writeFieldBegin("is_user",a.Type.BOOL,2),l.writeBool(this.is_user),l.writeFieldEnd()),this.permissions!==null&&this.permissions!==void 0&&(l.writeFieldBegin("permissions",a.Type.STRUCT,3),this.permissions.write(l),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDashboard=class{constructor(l){this.dashboard_name=null,this.dashboard_state=null,this.image_hash=null,this.update_time=null,this.dashboard_metadata=null,this.dashboard_id=null,this.dashboard_owner=null,this.is_dash_shared=null,this.dashboard_permissions=null,l&&(l.dashboard_name!==void 0&&l.dashboard_name!==null&&(this.dashboard_name=l.dashboard_name),l.dashboard_state!==void 0&&l.dashboard_state!==null&&(this.dashboard_state=l.dashboard_state),l.image_hash!==void 0&&l.image_hash!==null&&(this.image_hash=l.image_hash),l.update_time!==void 0&&l.update_time!==null&&(this.update_time=l.update_time),l.dashboard_metadata!==void 0&&l.dashboard_metadata!==null&&(this.dashboard_metadata=l.dashboard_metadata),l.dashboard_id!==void 0&&l.dashboard_id!==null&&(this.dashboard_id=l.dashboard_id),l.dashboard_owner!==void 0&&l.dashboard_owner!==null&&(this.dashboard_owner=l.dashboard_owner),l.is_dash_shared!==void 0&&l.is_dash_shared!==null&&(this.is_dash_shared=l.is_dash_shared),l.dashboard_permissions!==void 0&&l.dashboard_permissions!==null&&(this.dashboard_permissions=new m.TDashboardPermissions(l.dashboard_permissions)))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.dashboard_name=l.readString():l.skip(b);break;case 2:b==a.Type.STRING?this.dashboard_state=l.readString():l.skip(b);break;case 3:b==a.Type.STRING?this.image_hash=l.readString():l.skip(b);break;case 4:b==a.Type.STRING?this.update_time=l.readString():l.skip(b);break;case 5:b==a.Type.STRING?this.dashboard_metadata=l.readString():l.skip(b);break;case 6:b==a.Type.I32?this.dashboard_id=l.readI32():l.skip(b);break;case 7:b==a.Type.STRING?this.dashboard_owner=l.readString():l.skip(b);break;case 8:b==a.Type.BOOL?this.is_dash_shared=l.readBool():l.skip(b);break;case 9:b==a.Type.STRUCT?(this.dashboard_permissions=new m.TDashboardPermissions,this.dashboard_permissions.read(l)):l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TDashboard"),this.dashboard_name!==null&&this.dashboard_name!==void 0&&(l.writeFieldBegin("dashboard_name",a.Type.STRING,1),l.writeString(this.dashboard_name),l.writeFieldEnd()),this.dashboard_state!==null&&this.dashboard_state!==void 0&&(l.writeFieldBegin("dashboard_state",a.Type.STRING,2),l.writeString(this.dashboard_state),l.writeFieldEnd()),this.image_hash!==null&&this.image_hash!==void 0&&(l.writeFieldBegin("image_hash",a.Type.STRING,3),l.writeString(this.image_hash),l.writeFieldEnd()),this.update_time!==null&&this.update_time!==void 0&&(l.writeFieldBegin("update_time",a.Type.STRING,4),l.writeString(this.update_time),l.writeFieldEnd()),this.dashboard_metadata!==null&&this.dashboard_metadata!==void 0&&(l.writeFieldBegin("dashboard_metadata",a.Type.STRING,5),l.writeString(this.dashboard_metadata),l.writeFieldEnd()),this.dashboard_id!==null&&this.dashboard_id!==void 0&&(l.writeFieldBegin("dashboard_id",a.Type.I32,6),l.writeI32(this.dashboard_id),l.writeFieldEnd()),this.dashboard_owner!==null&&this.dashboard_owner!==void 0&&(l.writeFieldBegin("dashboard_owner",a.Type.STRING,7),l.writeString(this.dashboard_owner),l.writeFieldEnd()),this.is_dash_shared!==null&&this.is_dash_shared!==void 0&&(l.writeFieldBegin("is_dash_shared",a.Type.BOOL,8),l.writeBool(this.is_dash_shared),l.writeFieldEnd()),this.dashboard_permissions!==null&&this.dashboard_permissions!==void 0&&(l.writeFieldBegin("dashboard_permissions",a.Type.STRUCT,9),this.dashboard_permissions.write(l),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TLicenseInfo=class{constructor(l){this.claims=null,l&&l.claims!==void 0&&l.claims!==null&&(this.claims=a.copyList(l.claims,[null]))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:if(b==a.Type.LIST){this.claims=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let k=null;k=l.readString(),this.claims.push(k)}l.readListEnd()}else l.skip(b);break;case 0:l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TLicenseInfo"),this.claims!==null&&this.claims!==void 0){l.writeFieldBegin("claims",a.Type.LIST,1),l.writeListBegin(a.Type.STRING,this.claims.length);for(let T in this.claims)this.claims.hasOwnProperty(T)&&(T=this.claims[T],l.writeString(T));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TSessionInfo=class{constructor(l){this.user=null,this.database=null,this.start_time=null,this.is_super=null,l&&(l.user!==void 0&&l.user!==null&&(this.user=l.user),l.database!==void 0&&l.database!==null&&(this.database=l.database),l.start_time!==void 0&&l.start_time!==null&&(this.start_time=l.start_time),l.is_super!==void 0&&l.is_super!==null&&(this.is_super=l.is_super))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.user=l.readString():l.skip(b);break;case 2:b==a.Type.STRING?this.database=l.readString():l.skip(b);break;case 3:b==a.Type.I64?this.start_time=l.readI64():l.skip(b);break;case 4:b==a.Type.BOOL?this.is_super=l.readBool():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TSessionInfo"),this.user!==null&&this.user!==void 0&&(l.writeFieldBegin("user",a.Type.STRING,1),l.writeString(this.user),l.writeFieldEnd()),this.database!==null&&this.database!==void 0&&(l.writeFieldBegin("database",a.Type.STRING,2),l.writeString(this.database),l.writeFieldEnd()),this.start_time!==null&&this.start_time!==void 0&&(l.writeFieldBegin("start_time",a.Type.I64,3),l.writeI64(this.start_time),l.writeFieldEnd()),this.is_super!==null&&this.is_super!==void 0&&(l.writeFieldBegin("is_super",a.Type.BOOL,4),l.writeBool(this.is_super),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TGeoFileLayerInfo=class{constructor(l){this.name=null,this.contents=null,l&&(l.name!==void 0&&l.name!==null&&(this.name=l.name),l.contents!==void 0&&l.contents!==null&&(this.contents=l.contents))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.name=l.readString():l.skip(b);break;case 2:b==a.Type.I32?this.contents=l.readI32():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TGeoFileLayerInfo"),this.name!==null&&this.name!==void 0&&(l.writeFieldBegin("name",a.Type.STRING,1),l.writeString(this.name),l.writeFieldEnd()),this.contents!==null&&this.contents!==void 0&&(l.writeFieldBegin("contents",a.Type.I32,2),l.writeI32(this.contents),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TTableEpochInfo=class{constructor(l){this.table_id=null,this.table_epoch=null,this.leaf_index=null,l&&(l.table_id!==void 0&&l.table_id!==null&&(this.table_id=l.table_id),l.table_epoch!==void 0&&l.table_epoch!==null&&(this.table_epoch=l.table_epoch),l.leaf_index!==void 0&&l.leaf_index!==null&&(this.leaf_index=l.leaf_index))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I32?this.table_id=l.readI32():l.skip(b);break;case 2:b==a.Type.I32?this.table_epoch=l.readI32():l.skip(b);break;case 3:b==a.Type.I32?this.leaf_index=l.readI32():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TTableEpochInfo"),this.table_id!==null&&this.table_id!==void 0&&(l.writeFieldBegin("table_id",a.Type.I32,1),l.writeI32(this.table_id),l.writeFieldEnd()),this.table_epoch!==null&&this.table_epoch!==void 0&&(l.writeFieldBegin("table_epoch",a.Type.I32,2),l.writeI32(this.table_epoch),l.writeFieldEnd()),this.leaf_index!==null&&this.leaf_index!==void 0&&(l.writeFieldBegin("leaf_index",a.Type.I32,3),l.writeI32(this.leaf_index),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TCustomExpression=class{constructor(l){this.id=null,this.name=null,this.expression_json=null,this.data_source_type=null,this.data_source_id=null,this.is_deleted=null,this.data_source_name=null,l&&(l.id!==void 0&&l.id!==null&&(this.id=l.id),l.name!==void 0&&l.name!==null&&(this.name=l.name),l.expression_json!==void 0&&l.expression_json!==null&&(this.expression_json=l.expression_json),l.data_source_type!==void 0&&l.data_source_type!==null&&(this.data_source_type=l.data_source_type),l.data_source_id!==void 0&&l.data_source_id!==null&&(this.data_source_id=l.data_source_id),l.is_deleted!==void 0&&l.is_deleted!==null&&(this.is_deleted=l.is_deleted),l.data_source_name!==void 0&&l.data_source_name!==null&&(this.data_source_name=l.data_source_name))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I32?this.id=l.readI32():l.skip(b);break;case 2:b==a.Type.STRING?this.name=l.readString():l.skip(b);break;case 4:b==a.Type.STRING?this.expression_json=l.readString():l.skip(b);break;case 5:b==a.Type.I32?this.data_source_type=l.readI32():l.skip(b);break;case 6:b==a.Type.I32?this.data_source_id=l.readI32():l.skip(b);break;case 7:b==a.Type.BOOL?this.is_deleted=l.readBool():l.skip(b);break;case 8:b==a.Type.STRING?this.data_source_name=l.readString():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TCustomExpression"),this.id!==null&&this.id!==void 0&&(l.writeFieldBegin("id",a.Type.I32,1),l.writeI32(this.id),l.writeFieldEnd()),this.name!==null&&this.name!==void 0&&(l.writeFieldBegin("name",a.Type.STRING,2),l.writeString(this.name),l.writeFieldEnd()),this.expression_json!==null&&this.expression_json!==void 0&&(l.writeFieldBegin("expression_json",a.Type.STRING,4),l.writeString(this.expression_json),l.writeFieldEnd()),this.data_source_type!==null&&this.data_source_type!==void 0&&(l.writeFieldBegin("data_source_type",a.Type.I32,5),l.writeI32(this.data_source_type),l.writeFieldEnd()),this.data_source_id!==null&&this.data_source_id!==void 0&&(l.writeFieldBegin("data_source_id",a.Type.I32,6),l.writeI32(this.data_source_id),l.writeFieldEnd()),this.is_deleted!==null&&this.is_deleted!==void 0&&(l.writeFieldBegin("is_deleted",a.Type.BOOL,7),l.writeBool(this.is_deleted),l.writeFieldEnd()),this.data_source_name!==null&&this.data_source_name!==void 0&&(l.writeFieldBegin("data_source_name",a.Type.STRING,8),l.writeString(this.data_source_name),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TQueryInfo=class{constructor(l){this.query_session_id=null,this.query_public_session_id=null,this.current_status=null,this.executor_id=null,this.submitted=null,this.query_str=null,this.login_name=null,this.client_address=null,this.db_name=null,this.exec_device_type=null,l&&(l.query_session_id!==void 0&&l.query_session_id!==null&&(this.query_session_id=l.query_session_id),l.query_public_session_id!==void 0&&l.query_public_session_id!==null&&(this.query_public_session_id=l.query_public_session_id),l.current_status!==void 0&&l.current_status!==null&&(this.current_status=l.current_status),l.executor_id!==void 0&&l.executor_id!==null&&(this.executor_id=l.executor_id),l.submitted!==void 0&&l.submitted!==null&&(this.submitted=l.submitted),l.query_str!==void 0&&l.query_str!==null&&(this.query_str=l.query_str),l.login_name!==void 0&&l.login_name!==null&&(this.login_name=l.login_name),l.client_address!==void 0&&l.client_address!==null&&(this.client_address=l.client_address),l.db_name!==void 0&&l.db_name!==null&&(this.db_name=l.db_name),l.exec_device_type!==void 0&&l.exec_device_type!==null&&(this.exec_device_type=l.exec_device_type))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.STRING?this.query_session_id=l.readString():l.skip(b);break;case 2:b==a.Type.STRING?this.query_public_session_id=l.readString():l.skip(b);break;case 3:b==a.Type.STRING?this.current_status=l.readString():l.skip(b);break;case 4:b==a.Type.I32?this.executor_id=l.readI32():l.skip(b);break;case 5:b==a.Type.STRING?this.submitted=l.readString():l.skip(b);break;case 6:b==a.Type.STRING?this.query_str=l.readString():l.skip(b);break;case 7:b==a.Type.STRING?this.login_name=l.readString():l.skip(b);break;case 8:b==a.Type.STRING?this.client_address=l.readString():l.skip(b);break;case 9:b==a.Type.STRING?this.db_name=l.readString():l.skip(b);break;case 10:b==a.Type.STRING?this.exec_device_type=l.readString():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TQueryInfo"),this.query_session_id!==null&&this.query_session_id!==void 0&&(l.writeFieldBegin("query_session_id",a.Type.STRING,1),l.writeString(this.query_session_id),l.writeFieldEnd()),this.query_public_session_id!==null&&this.query_public_session_id!==void 0&&(l.writeFieldBegin("query_public_session_id",a.Type.STRING,2),l.writeString(this.query_public_session_id),l.writeFieldEnd()),this.current_status!==null&&this.current_status!==void 0&&(l.writeFieldBegin("current_status",a.Type.STRING,3),l.writeString(this.current_status),l.writeFieldEnd()),this.executor_id!==null&&this.executor_id!==void 0&&(l.writeFieldBegin("executor_id",a.Type.I32,4),l.writeI32(this.executor_id),l.writeFieldEnd()),this.submitted!==null&&this.submitted!==void 0&&(l.writeFieldBegin("submitted",a.Type.STRING,5),l.writeString(this.submitted),l.writeFieldEnd()),this.query_str!==null&&this.query_str!==void 0&&(l.writeFieldBegin("query_str",a.Type.STRING,6),l.writeString(this.query_str),l.writeFieldEnd()),this.login_name!==null&&this.login_name!==void 0&&(l.writeFieldBegin("login_name",a.Type.STRING,7),l.writeString(this.login_name),l.writeFieldEnd()),this.client_address!==null&&this.client_address!==void 0&&(l.writeFieldBegin("client_address",a.Type.STRING,8),l.writeString(this.client_address),l.writeFieldEnd()),this.db_name!==null&&this.db_name!==void 0&&(l.writeFieldBegin("db_name",a.Type.STRING,9),l.writeString(this.db_name),l.writeFieldEnd()),this.exec_device_type!==null&&this.exec_device_type!==void 0&&(l.writeFieldBegin("exec_device_type",a.Type.STRING,10),l.writeString(this.exec_device_type),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TLeafInfo=class{constructor(l){this.leaf_id=null,this.num_leaves=null,l&&(l.leaf_id!==void 0&&l.leaf_id!==null&&(this.leaf_id=l.leaf_id),l.num_leaves!==void 0&&l.num_leaves!==null&&(this.num_leaves=l.num_leaves))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==a.Type.STOP)break;switch(S){case 1:b==a.Type.I32?this.leaf_id=l.readI32():l.skip(b);break;case 2:b==a.Type.I32?this.num_leaves=l.readI32():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TLeafInfo"),this.leaf_id!==null&&this.leaf_id!==void 0&&(l.writeFieldBegin("leaf_id",a.Type.I32,1),l.writeI32(this.leaf_id),l.writeFieldEnd()),this.num_leaves!==null&&this.num_leaves!==void 0&&(l.writeFieldBegin("num_leaves",a.Type.I32,2),l.writeI32(this.num_leaves),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}}},3962:(c,d,f)=>{const a=f(9262).Thrift;f(135);const _=f(2818),w=c.exports={};w.TResultSetLayout={GroupByPerfectHash:0,GroupByBaselineHash:1,Projection:2,NonGroupedAggregate:3},w.TCountDistinctImplType={Invalid:0,Bitmap:1,UnorderedSet:2},w.TAggKind={AVG:0,MIN:1,MAX:2,SUM:3,COUNT:4,APPROX_COUNT_DISTINCT:5,SAMPLE:6,SINGLE_VALUE:7},c.exports.TSlotSize=class{constructor(m){this.padded=null,this.logical=null,m&&(m.padded!==void 0&&m.padded!==null&&(this.padded=m.padded),m.logical!==void 0&&m.logical!==null&&(this.logical=m.logical))}read(m){for(m.readStructBegin();;){const l=m.readFieldBegin(),T=l.ftype,b=l.fid;if(T==a.Type.STOP)break;switch(b){case 1:T==a.Type.I16?this.padded=m.readI16():m.skip(T);break;case 2:T==a.Type.I16?this.logical=m.readI16():m.skip(T);break;default:m.skip(T)}m.readFieldEnd()}m.readStructEnd()}write(m){m.writeStructBegin("TSlotSize"),this.padded!==null&&this.padded!==void 0&&(m.writeFieldBegin("padded",a.Type.I16,1),m.writeI16(this.padded),m.writeFieldEnd()),this.logical!==null&&this.logical!==void 0&&(m.writeFieldBegin("logical",a.Type.I16,2),m.writeI16(this.logical),m.writeFieldEnd()),m.writeFieldStop(),m.writeStructEnd()}},c.exports.TColSlotContext=class{constructor(m){this.slot_sizes=null,this.col_to_slot_map=null,m&&(m.slot_sizes!==void 0&&m.slot_sizes!==null&&(this.slot_sizes=a.copyList(m.slot_sizes,[w.TSlotSize])),m.col_to_slot_map!==void 0&&m.col_to_slot_map!==null&&(this.col_to_slot_map=a.copyList(m.col_to_slot_map,[a.copyList,null])))}read(m){for(m.readStructBegin();;){const l=m.readFieldBegin(),T=l.ftype,b=l.fid;if(T==a.Type.STOP)break;switch(b){case 1:if(T==a.Type.LIST){this.slot_sizes=[];const x=m.readListBegin().size||0;for(let B=0;B<x;++B){let F=null;F=new w.TSlotSize,F.read(m),this.slot_sizes.push(F)}m.readListEnd()}else m.skip(T);break;case 2:if(T==a.Type.LIST){this.col_to_slot_map=[];const x=m.readListBegin().size||0;for(let B=0;B<x;++B){let F=null;F=[];const M=m.readListBegin().size||0;for(let A=0;A<M;++A){let R=null;R=m.readI32(),F.push(R)}m.readListEnd(),this.col_to_slot_map.push(F)}m.readListEnd()}else m.skip(T);break;default:m.skip(T)}m.readFieldEnd()}m.readStructEnd()}write(m){if(m.writeStructBegin("TColSlotContext"),this.slot_sizes!==null&&this.slot_sizes!==void 0){m.writeFieldBegin("slot_sizes",a.Type.LIST,1),m.writeListBegin(a.Type.STRUCT,this.slot_sizes.length);for(let l in this.slot_sizes)this.slot_sizes.hasOwnProperty(l)&&(l=this.slot_sizes[l],l.write(m));m.writeListEnd(),m.writeFieldEnd()}if(this.col_to_slot_map!==null&&this.col_to_slot_map!==void 0){m.writeFieldBegin("col_to_slot_map",a.Type.LIST,2),m.writeListBegin(a.Type.LIST,this.col_to_slot_map.length);for(let l in this.col_to_slot_map)if(this.col_to_slot_map.hasOwnProperty(l)){l=this.col_to_slot_map[l],m.writeListBegin(a.Type.I32,l.length);for(let T in l)l.hasOwnProperty(T)&&(T=l[T],m.writeI32(T));m.writeListEnd()}m.writeListEnd(),m.writeFieldEnd()}m.writeFieldStop(),m.writeStructEnd()}},c.exports.TCountDistinctDescriptor=class{constructor(m){this.impl_type=null,this.min_val=null,this.bitmap_sz_bits=null,this.approximate=null,this.device_type=null,this.sub_bitmap_count=null,m&&(m.impl_type!==void 0&&m.impl_type!==null&&(this.impl_type=m.impl_type),m.min_val!==void 0&&m.min_val!==null&&(this.min_val=m.min_val),m.bitmap_sz_bits!==void 0&&m.bitmap_sz_bits!==null&&(this.bitmap_sz_bits=m.bitmap_sz_bits),m.approximate!==void 0&&m.approximate!==null&&(this.approximate=m.approximate),m.device_type!==void 0&&m.device_type!==null&&(this.device_type=m.device_type),m.sub_bitmap_count!==void 0&&m.sub_bitmap_count!==null&&(this.sub_bitmap_count=m.sub_bitmap_count))}read(m){for(m.readStructBegin();;){const l=m.readFieldBegin(),T=l.ftype,b=l.fid;if(T==a.Type.STOP)break;switch(b){case 1:T==a.Type.I32?this.impl_type=m.readI32():m.skip(T);break;case 2:T==a.Type.I64?this.min_val=m.readI64():m.skip(T);break;case 3:T==a.Type.I64?this.bitmap_sz_bits=m.readI64():m.skip(T);break;case 4:T==a.Type.BOOL?this.approximate=m.readBool():m.skip(T);break;case 5:T==a.Type.I32?this.device_type=m.readI32():m.skip(T);break;case 6:T==a.Type.I64?this.sub_bitmap_count=m.readI64():m.skip(T);break;default:m.skip(T)}m.readFieldEnd()}m.readStructEnd()}write(m){m.writeStructBegin("TCountDistinctDescriptor"),this.impl_type!==null&&this.impl_type!==void 0&&(m.writeFieldBegin("impl_type",a.Type.I32,1),m.writeI32(this.impl_type),m.writeFieldEnd()),this.min_val!==null&&this.min_val!==void 0&&(m.writeFieldBegin("min_val",a.Type.I64,2),m.writeI64(this.min_val),m.writeFieldEnd()),this.bitmap_sz_bits!==null&&this.bitmap_sz_bits!==void 0&&(m.writeFieldBegin("bitmap_sz_bits",a.Type.I64,3),m.writeI64(this.bitmap_sz_bits),m.writeFieldEnd()),this.approximate!==null&&this.approximate!==void 0&&(m.writeFieldBegin("approximate",a.Type.BOOL,4),m.writeBool(this.approximate),m.writeFieldEnd()),this.device_type!==null&&this.device_type!==void 0&&(m.writeFieldBegin("device_type",a.Type.I32,5),m.writeI32(this.device_type),m.writeFieldEnd()),this.sub_bitmap_count!==null&&this.sub_bitmap_count!==void 0&&(m.writeFieldBegin("sub_bitmap_count",a.Type.I64,6),m.writeI64(this.sub_bitmap_count),m.writeFieldEnd()),m.writeFieldStop(),m.writeStructEnd()}},c.exports.TResultSetBufferDescriptor=class{constructor(m){this.layout=null,this.keyless=null,this.entry_count=null,this.idx_target_as_key=null,this.min_val=null,this.max_val=null,this.bucket=null,this.group_col_widths=null,this.key_bytewidth=null,this.col_slot_context=null,this.target_groupby_indices=null,this.count_distinct_descriptors=null,this.force_4byte_float=null,m&&(m.layout!==void 0&&m.layout!==null&&(this.layout=m.layout),m.keyless!==void 0&&m.keyless!==null&&(this.keyless=m.keyless),m.entry_count!==void 0&&m.entry_count!==null&&(this.entry_count=m.entry_count),m.idx_target_as_key!==void 0&&m.idx_target_as_key!==null&&(this.idx_target_as_key=m.idx_target_as_key),m.min_val!==void 0&&m.min_val!==null&&(this.min_val=m.min_val),m.max_val!==void 0&&m.max_val!==null&&(this.max_val=m.max_val),m.bucket!==void 0&&m.bucket!==null&&(this.bucket=m.bucket),m.group_col_widths!==void 0&&m.group_col_widths!==null&&(this.group_col_widths=a.copyList(m.group_col_widths,[null])),m.key_bytewidth!==void 0&&m.key_bytewidth!==null&&(this.key_bytewidth=m.key_bytewidth),m.col_slot_context!==void 0&&m.col_slot_context!==null&&(this.col_slot_context=new w.TColSlotContext(m.col_slot_context)),m.target_groupby_indices!==void 0&&m.target_groupby_indices!==null&&(this.target_groupby_indices=a.copyList(m.target_groupby_indices,[null])),m.count_distinct_descriptors!==void 0&&m.count_distinct_descriptors!==null&&(this.count_distinct_descriptors=a.copyList(m.count_distinct_descriptors,[w.TCountDistinctDescriptor])),m.force_4byte_float!==void 0&&m.force_4byte_float!==null&&(this.force_4byte_float=m.force_4byte_float))}read(m){for(m.readStructBegin();;){const l=m.readFieldBegin(),T=l.ftype,b=l.fid;if(T==a.Type.STOP)break;switch(b){case 1:T==a.Type.I32?this.layout=m.readI32():m.skip(T);break;case 2:T==a.Type.BOOL?this.keyless=m.readBool():m.skip(T);break;case 3:T==a.Type.I32?this.entry_count=m.readI32():m.skip(T);break;case 4:T==a.Type.I32?this.idx_target_as_key=m.readI32():m.skip(T);break;case 5:T==a.Type.I64?this.min_val=m.readI64():m.skip(T);break;case 6:T==a.Type.I64?this.max_val=m.readI64():m.skip(T);break;case 7:T==a.Type.I64?this.bucket=m.readI64():m.skip(T);break;case 8:if(T==a.Type.LIST){this.group_col_widths=[];const x=m.readListBegin().size||0;for(let B=0;B<x;++B){let F=null;F=m.readI16(),this.group_col_widths.push(F)}m.readListEnd()}else m.skip(T);break;case 9:T==a.Type.I16?this.key_bytewidth=m.readI16():m.skip(T);break;case 10:T==a.Type.STRUCT?(this.col_slot_context=new w.TColSlotContext,this.col_slot_context.read(m)):m.skip(T);break;case 11:if(T==a.Type.LIST){this.target_groupby_indices=[];const x=m.readListBegin().size||0;for(let B=0;B<x;++B){let F=null;F=m.readI32(),this.target_groupby_indices.push(F)}m.readListEnd()}else m.skip(T);break;case 12:if(T==a.Type.LIST){this.count_distinct_descriptors=[];const x=m.readListBegin().size||0;for(let B=0;B<x;++B){let F=null;F=new w.TCountDistinctDescriptor,F.read(m),this.count_distinct_descriptors.push(F)}m.readListEnd()}else m.skip(T);break;case 13:T==a.Type.BOOL?this.force_4byte_float=m.readBool():m.skip(T);break;default:m.skip(T)}m.readFieldEnd()}m.readStructEnd()}write(m){if(m.writeStructBegin("TResultSetBufferDescriptor"),this.layout!==null&&this.layout!==void 0&&(m.writeFieldBegin("layout",a.Type.I32,1),m.writeI32(this.layout),m.writeFieldEnd()),this.keyless!==null&&this.keyless!==void 0&&(m.writeFieldBegin("keyless",a.Type.BOOL,2),m.writeBool(this.keyless),m.writeFieldEnd()),this.entry_count!==null&&this.entry_count!==void 0&&(m.writeFieldBegin("entry_count",a.Type.I32,3),m.writeI32(this.entry_count),m.writeFieldEnd()),this.idx_target_as_key!==null&&this.idx_target_as_key!==void 0&&(m.writeFieldBegin("idx_target_as_key",a.Type.I32,4),m.writeI32(this.idx_target_as_key),m.writeFieldEnd()),this.min_val!==null&&this.min_val!==void 0&&(m.writeFieldBegin("min_val",a.Type.I64,5),m.writeI64(this.min_val),m.writeFieldEnd()),this.max_val!==null&&this.max_val!==void 0&&(m.writeFieldBegin("max_val",a.Type.I64,6),m.writeI64(this.max_val),m.writeFieldEnd()),this.bucket!==null&&this.bucket!==void 0&&(m.writeFieldBegin("bucket",a.Type.I64,7),m.writeI64(this.bucket),m.writeFieldEnd()),this.group_col_widths!==null&&this.group_col_widths!==void 0){m.writeFieldBegin("group_col_widths",a.Type.LIST,8),m.writeListBegin(a.Type.I16,this.group_col_widths.length);for(let l in this.group_col_widths)this.group_col_widths.hasOwnProperty(l)&&(l=this.group_col_widths[l],m.writeI16(l));m.writeListEnd(),m.writeFieldEnd()}if(this.key_bytewidth!==null&&this.key_bytewidth!==void 0&&(m.writeFieldBegin("key_bytewidth",a.Type.I16,9),m.writeI16(this.key_bytewidth),m.writeFieldEnd()),this.col_slot_context!==null&&this.col_slot_context!==void 0&&(m.writeFieldBegin("col_slot_context",a.Type.STRUCT,10),this.col_slot_context.write(m),m.writeFieldEnd()),this.target_groupby_indices!==null&&this.target_groupby_indices!==void 0){m.writeFieldBegin("target_groupby_indices",a.Type.LIST,11),m.writeListBegin(a.Type.I32,this.target_groupby_indices.length);for(let l in this.target_groupby_indices)this.target_groupby_indices.hasOwnProperty(l)&&(l=this.target_groupby_indices[l],m.writeI32(l));m.writeListEnd(),m.writeFieldEnd()}if(this.count_distinct_descriptors!==null&&this.count_distinct_descriptors!==void 0){m.writeFieldBegin("count_distinct_descriptors",a.Type.LIST,12),m.writeListBegin(a.Type.STRUCT,this.count_distinct_descriptors.length);for(let l in this.count_distinct_descriptors)this.count_distinct_descriptors.hasOwnProperty(l)&&(l=this.count_distinct_descriptors[l],l.write(m));m.writeListEnd(),m.writeFieldEnd()}this.force_4byte_float!==null&&this.force_4byte_float!==void 0&&(m.writeFieldBegin("force_4byte_float",a.Type.BOOL,13),m.writeBool(this.force_4byte_float),m.writeFieldEnd()),m.writeFieldStop(),m.writeStructEnd()}},c.exports.TTargetInfo=class{constructor(m){this.is_agg=null,this.kind=null,this.type=null,this.arg_type=null,this.skip_nulls=null,this.is_distinct=null,m&&(m.is_agg!==void 0&&m.is_agg!==null&&(this.is_agg=m.is_agg),m.kind!==void 0&&m.kind!==null&&(this.kind=m.kind),m.type!==void 0&&m.type!==null&&(this.type=new _.TTypeInfo(m.type)),m.arg_type!==void 0&&m.arg_type!==null&&(this.arg_type=new _.TTypeInfo(m.arg_type)),m.skip_nulls!==void 0&&m.skip_nulls!==null&&(this.skip_nulls=m.skip_nulls),m.is_distinct!==void 0&&m.is_distinct!==null&&(this.is_distinct=m.is_distinct))}read(m){for(m.readStructBegin();;){const l=m.readFieldBegin(),T=l.ftype,b=l.fid;if(T==a.Type.STOP)break;switch(b){case 1:T==a.Type.BOOL?this.is_agg=m.readBool():m.skip(T);break;case 2:T==a.Type.I32?this.kind=m.readI32():m.skip(T);break;case 3:T==a.Type.STRUCT?(this.type=new _.TTypeInfo,this.type.read(m)):m.skip(T);break;case 4:T==a.Type.STRUCT?(this.arg_type=new _.TTypeInfo,this.arg_type.read(m)):m.skip(T);break;case 5:T==a.Type.BOOL?this.skip_nulls=m.readBool():m.skip(T);break;case 6:T==a.Type.BOOL?this.is_distinct=m.readBool():m.skip(T);break;default:m.skip(T)}m.readFieldEnd()}m.readStructEnd()}write(m){m.writeStructBegin("TTargetInfo"),this.is_agg!==null&&this.is_agg!==void 0&&(m.writeFieldBegin("is_agg",a.Type.BOOL,1),m.writeBool(this.is_agg),m.writeFieldEnd()),this.kind!==null&&this.kind!==void 0&&(m.writeFieldBegin("kind",a.Type.I32,2),m.writeI32(this.kind),m.writeFieldEnd()),this.type!==null&&this.type!==void 0&&(m.writeFieldBegin("type",a.Type.STRUCT,3),this.type.write(m),m.writeFieldEnd()),this.arg_type!==null&&this.arg_type!==void 0&&(m.writeFieldBegin("arg_type",a.Type.STRUCT,4),this.arg_type.write(m),m.writeFieldEnd()),this.skip_nulls!==null&&this.skip_nulls!==void 0&&(m.writeFieldBegin("skip_nulls",a.Type.BOOL,5),m.writeBool(this.skip_nulls),m.writeFieldEnd()),this.is_distinct!==null&&this.is_distinct!==void 0&&(m.writeFieldBegin("is_distinct",a.Type.BOOL,6),m.writeBool(this.is_distinct),m.writeFieldEnd()),m.writeFieldStop(),m.writeStructEnd()}},c.exports.TCountDistinctSetStorage=class{constructor(m){this.bitmap=null,this.sparse_set=null,m&&(m.bitmap!==void 0&&m.bitmap!==null&&(this.bitmap=m.bitmap),m.sparse_set!==void 0&&m.sparse_set!==null&&(this.sparse_set=a.copyList(m.sparse_set,[null])))}read(m){for(m.readStructBegin();;){const l=m.readFieldBegin(),T=l.ftype,b=l.fid;if(T==a.Type.STOP)break;switch(b){case 1:T==a.Type.STRING?this.bitmap=m.readBinary():m.skip(T);break;case 2:if(T==a.Type.SET){this.sparse_set=[];const x=m.readSetBegin().size||0;for(let B=0;B<x;++B){let F=null;F=m.readI64(),this.sparse_set.push(F)}m.readSetEnd()}else m.skip(T);break;default:m.skip(T)}m.readFieldEnd()}m.readStructEnd()}write(m){if(m.writeStructBegin("TCountDistinctSetStorage"),this.bitmap!==null&&this.bitmap!==void 0&&(m.writeFieldBegin("bitmap",a.Type.STRING,1),m.writeBinary(this.bitmap),m.writeFieldEnd()),this.sparse_set!==null&&this.sparse_set!==void 0){m.writeFieldBegin("sparse_set",a.Type.SET,2),m.writeSetBegin(a.Type.I64,this.sparse_set.length);for(let l in this.sparse_set)this.sparse_set.hasOwnProperty(l)&&(l=this.sparse_set[l],m.writeI64(l));m.writeSetEnd(),m.writeFieldEnd()}m.writeFieldStop(),m.writeStructEnd()}},c.exports.TCountDistinctSet=class{constructor(m){this.type=null,this.storage=null,this.remote_ptr=null,m&&(m.type!==void 0&&m.type!==null&&(this.type=m.type),m.storage!==void 0&&m.storage!==null&&(this.storage=new w.TCountDistinctSetStorage(m.storage)),m.remote_ptr!==void 0&&m.remote_ptr!==null&&(this.remote_ptr=m.remote_ptr))}read(m){for(m.readStructBegin();;){const l=m.readFieldBegin(),T=l.ftype,b=l.fid;if(T==a.Type.STOP)break;switch(b){case 1:T==a.Type.I32?this.type=m.readI32():m.skip(T);break;case 2:T==a.Type.STRUCT?(this.storage=new w.TCountDistinctSetStorage,this.storage.read(m)):m.skip(T);break;case 3:T==a.Type.I64?this.remote_ptr=m.readI64():m.skip(T);break;default:m.skip(T)}m.readFieldEnd()}m.readStructEnd()}write(m){m.writeStructBegin("TCountDistinctSet"),this.type!==null&&this.type!==void 0&&(m.writeFieldBegin("type",a.Type.I32,1),m.writeI32(this.type),m.writeFieldEnd()),this.storage!==null&&this.storage!==void 0&&(m.writeFieldBegin("storage",a.Type.STRUCT,2),this.storage.write(m),m.writeFieldEnd()),this.remote_ptr!==null&&this.remote_ptr!==void 0&&(m.writeFieldBegin("remote_ptr",a.Type.I64,3),m.writeI64(this.remote_ptr),m.writeFieldEnd()),m.writeFieldStop(),m.writeStructEnd()}},c.exports.TSerializedRows=class{constructor(m){this.buffers=null,this.buffer_lengths=null,this.buffers_total_size=null,this.total_compression_time_ms=null,this.descriptor=null,this.targets=null,this.target_init_vals=null,this.varlen_buffer=null,this.count_distinct_sets=null,this.explanation=null,m&&(m.buffers!==void 0&&m.buffers!==null&&(this.buffers=a.copyList(m.buffers,[null])),m.buffer_lengths!==void 0&&m.buffer_lengths!==null&&(this.buffer_lengths=a.copyList(m.buffer_lengths,[null])),m.buffers_total_size!==void 0&&m.buffers_total_size!==null&&(this.buffers_total_size=m.buffers_total_size),m.total_compression_time_ms!==void 0&&m.total_compression_time_ms!==null&&(this.total_compression_time_ms=m.total_compression_time_ms),m.descriptor!==void 0&&m.descriptor!==null&&(this.descriptor=new w.TResultSetBufferDescriptor(m.descriptor)),m.targets!==void 0&&m.targets!==null&&(this.targets=a.copyList(m.targets,[w.TTargetInfo])),m.target_init_vals!==void 0&&m.target_init_vals!==null&&(this.target_init_vals=a.copyList(m.target_init_vals,[null])),m.varlen_buffer!==void 0&&m.varlen_buffer!==null&&(this.varlen_buffer=a.copyList(m.varlen_buffer,[null])),m.count_distinct_sets!==void 0&&m.count_distinct_sets!==null&&(this.count_distinct_sets=a.copyList(m.count_distinct_sets,[w.TCountDistinctSet])),m.explanation!==void 0&&m.explanation!==null&&(this.explanation=m.explanation))}read(m){for(m.readStructBegin();;){const l=m.readFieldBegin(),T=l.ftype,b=l.fid;if(T==a.Type.STOP)break;switch(b){case 1:if(T==a.Type.LIST){this.buffers=[];const x=m.readListBegin().size||0;for(let B=0;B<x;++B){let F=null;F=m.readBinary(),this.buffers.push(F)}m.readListEnd()}else m.skip(T);break;case 2:if(T==a.Type.LIST){this.buffer_lengths=[];const x=m.readListBegin().size||0;for(let B=0;B<x;++B){let F=null;F=m.readI64(),this.buffer_lengths.push(F)}m.readListEnd()}else m.skip(T);break;case 3:T==a.Type.I64?this.buffers_total_size=m.readI64():m.skip(T);break;case 4:T==a.Type.I32?this.total_compression_time_ms=m.readI32():m.skip(T);break;case 5:T==a.Type.STRUCT?(this.descriptor=new w.TResultSetBufferDescriptor,this.descriptor.read(m)):m.skip(T);break;case 6:if(T==a.Type.LIST){this.targets=[];const x=m.readListBegin().size||0;for(let B=0;B<x;++B){let F=null;F=new w.TTargetInfo,F.read(m),this.targets.push(F)}m.readListEnd()}else m.skip(T);break;case 7:if(T==a.Type.LIST){this.target_init_vals=[];const x=m.readListBegin().size||0;for(let B=0;B<x;++B){let F=null;F=m.readI64(),this.target_init_vals.push(F)}m.readListEnd()}else m.skip(T);break;case 8:if(T==a.Type.LIST){this.varlen_buffer=[];const x=m.readListBegin().size||0;for(let B=0;B<x;++B){let F=null;F=m.readBinary(),this.varlen_buffer.push(F)}m.readListEnd()}else m.skip(T);break;case 9:if(T==a.Type.LIST){this.count_distinct_sets=[];const x=m.readListBegin().size||0;for(let B=0;B<x;++B){let F=null;F=new w.TCountDistinctSet,F.read(m),this.count_distinct_sets.push(F)}m.readListEnd()}else m.skip(T);break;case 10:T==a.Type.STRING?this.explanation=m.readString():m.skip(T);break;default:m.skip(T)}m.readFieldEnd()}m.readStructEnd()}write(m){if(m.writeStructBegin("TSerializedRows"),this.buffers!==null&&this.buffers!==void 0){m.writeFieldBegin("buffers",a.Type.LIST,1),m.writeListBegin(a.Type.STRING,this.buffers.length);for(let l in this.buffers)this.buffers.hasOwnProperty(l)&&(l=this.buffers[l],m.writeBinary(l));m.writeListEnd(),m.writeFieldEnd()}if(this.buffer_lengths!==null&&this.buffer_lengths!==void 0){m.writeFieldBegin("buffer_lengths",a.Type.LIST,2),m.writeListBegin(a.Type.I64,this.buffer_lengths.length);for(let l in this.buffer_lengths)this.buffer_lengths.hasOwnProperty(l)&&(l=this.buffer_lengths[l],m.writeI64(l));m.writeListEnd(),m.writeFieldEnd()}if(this.buffers_total_size!==null&&this.buffers_total_size!==void 0&&(m.writeFieldBegin("buffers_total_size",a.Type.I64,3),m.writeI64(this.buffers_total_size),m.writeFieldEnd()),this.total_compression_time_ms!==null&&this.total_compression_time_ms!==void 0&&(m.writeFieldBegin("total_compression_time_ms",a.Type.I32,4),m.writeI32(this.total_compression_time_ms),m.writeFieldEnd()),this.descriptor!==null&&this.descriptor!==void 0&&(m.writeFieldBegin("descriptor",a.Type.STRUCT,5),this.descriptor.write(m),m.writeFieldEnd()),this.targets!==null&&this.targets!==void 0){m.writeFieldBegin("targets",a.Type.LIST,6),m.writeListBegin(a.Type.STRUCT,this.targets.length);for(let l in this.targets)this.targets.hasOwnProperty(l)&&(l=this.targets[l],l.write(m));m.writeListEnd(),m.writeFieldEnd()}if(this.target_init_vals!==null&&this.target_init_vals!==void 0){m.writeFieldBegin("target_init_vals",a.Type.LIST,7),m.writeListBegin(a.Type.I64,this.target_init_vals.length);for(let l in this.target_init_vals)this.target_init_vals.hasOwnProperty(l)&&(l=this.target_init_vals[l],m.writeI64(l));m.writeListEnd(),m.writeFieldEnd()}if(this.varlen_buffer!==null&&this.varlen_buffer!==void 0){m.writeFieldBegin("varlen_buffer",a.Type.LIST,8),m.writeListBegin(a.Type.STRING,this.varlen_buffer.length);for(let l in this.varlen_buffer)this.varlen_buffer.hasOwnProperty(l)&&(l=this.varlen_buffer[l],m.writeBinary(l));m.writeListEnd(),m.writeFieldEnd()}if(this.count_distinct_sets!==null&&this.count_distinct_sets!==void 0){m.writeFieldBegin("count_distinct_sets",a.Type.LIST,9),m.writeListBegin(a.Type.STRUCT,this.count_distinct_sets.length);for(let l in this.count_distinct_sets)this.count_distinct_sets.hasOwnProperty(l)&&(l=this.count_distinct_sets[l],l.write(m));m.writeListEnd(),m.writeFieldEnd()}this.explanation!==null&&this.explanation!==void 0&&(m.writeFieldBegin("explanation",a.Type.STRING,10),m.writeString(this.explanation),m.writeFieldEnd()),m.writeFieldStop(),m.writeStructEnd()}}},2003:c=>{c.exports=n}},s={};function o(c){if(s[c])return s[c].exports;var d=s[c]={exports:{}};return i[c](d,d.exports,o),d.exports}return o.n=c=>{var d=c&&c.__esModule?()=>c.default:()=>c;return o.d(d,{a:d}),d},o.d=(c,d)=>{for(var f in d)o.o(d,f)&&!o.o(c,f)&&Object.defineProperty(c,f,{enumerable:!0,get:d[f]})},o.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),o.o=(c,d)=>Object.prototype.hasOwnProperty.call(c,d),o.r=c=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},o(7123)})()})})(H9);const zhe=Pne(H9.exports);new zhe;class qhe{constructor(e){Vn(this,"db");Vn(this,"views");Vn(this,"filters");Vn(this,"index");this.db=e,this.views=new mde,this.filters=new Map,this.index=new Map}get passiveFilters(){const e=this.views.active;if(e instanceof xc)throw Error("No filter for 0D view / count");if(e instanceof Bc)return gde(this.filters,e.dimension);throw Error("2D view not implemented yet")}view0D(){const e=new xc(this);return this.views.add(e),e}count(){return this.view0D()}view1D(e){const n=new Bc(this,e);return this.views.add(n),n}async all(){this.views.forEach(async e=>{await e.all()})}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var Ghe=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var o in s)s.hasOwnProperty(o)&&(i[o]=s[o])},t(e,n)};return function(e,n){t(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Vhe=Object.prototype.hasOwnProperty;function sI(t,e){return Vhe.call(t,e)}function rI(t){if(Array.isArray(t)){for(var e=new Array(t.length),n=0;n<e.length;n++)e[n]=""+n;return e}if(Object.keys)return Object.keys(t);var i=[];for(var s in t)sI(t,s)&&i.push(s);return i}function pr(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function aI(t){for(var e=0,n=t.length,i;e<n;){if(i=t.charCodeAt(e),i>=48&&i<=57){e++;continue}return!1}return!0}function pf(t){return t.indexOf("/")===-1&&t.indexOf("~")===-1?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function Y9(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function oI(t){if(t===void 0)return!0;if(t){if(Array.isArray(t)){for(var e=0,n=t.length;e<n;e++)if(oI(t[e]))return!0}else if(typeof t=="object"){for(var i=rI(t),s=i.length,o=0;o<s;o++)if(oI(t[i[o]]))return!0}}return!1}function a4(t,e){var n=[t];for(var i in e){var s=typeof e[i]=="object"?JSON.stringify(e[i],null,2):e[i];typeof s<"u"&&n.push(i+": "+s)}return n.join(`
`)}var X9=function(t){Ghe(e,t);function e(n,i,s,o,c){var d=this.constructor,f=t.call(this,a4(n,{name:i,index:s,operation:o,tree:c}))||this;return f.name=i,f.index=s,f.operation=o,f.tree=c,Object.setPrototypeOf(f,d.prototype),f.message=a4(n,{name:i,index:s,operation:o,tree:c}),f}return e}(Error),An=X9,Whe=pr,Fh={add:function(t,e,n){return t[e]=this.value,{newDocument:n}},remove:function(t,e,n){var i=t[e];return delete t[e],{newDocument:n,removed:i}},replace:function(t,e,n){var i=t[e];return t[e]=this.value,{newDocument:n,removed:i}},move:function(t,e,n){var i=Lv(n,this.path);i&&(i=pr(i));var s=Gf(n,{op:"remove",path:this.from}).removed;return Gf(n,{op:"add",path:this.path,value:s}),{newDocument:n,removed:i}},copy:function(t,e,n){var i=Lv(n,this.from);return Gf(n,{op:"add",path:this.path,value:pr(i)}),{newDocument:n}},test:function(t,e,n){return{newDocument:n,test:Ey(t[e],this.value)}},_get:function(t,e,n){return this.value=t[e],{newDocument:n}}},Hhe={add:function(t,e,n){return aI(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:n,index:e}},remove:function(t,e,n){var i=t.splice(e,1);return{newDocument:n,removed:i[0]}},replace:function(t,e,n){var i=t[e];return t[e]=this.value,{newDocument:n,removed:i}},move:Fh.move,copy:Fh.copy,test:Fh.test,_get:Fh._get};function Lv(t,e){if(e=="")return t;var n={op:"_get",path:e};return Gf(t,n),n.value}function Gf(t,e,n,i,s,o){if(n===void 0&&(n=!1),i===void 0&&(i=!0),s===void 0&&(s=!0),o===void 0&&(o=0),n&&(typeof n=="function"?n(e,0,t,e.path):Pv(e,0)),e.path===""){var c={newDocument:t};if(e.op==="add")return c.newDocument=e.value,c;if(e.op==="replace")return c.newDocument=e.value,c.removed=t,c;if(e.op==="move"||e.op==="copy")return c.newDocument=Lv(t,e.from),e.op==="move"&&(c.removed=t),c;if(e.op==="test"){if(c.test=Ey(t,e.value),c.test===!1)throw new An("Test operation failed","TEST_OPERATION_FAILED",o,e,t);return c.newDocument=t,c}else{if(e.op==="remove")return c.removed=t,c.newDocument=null,c;if(e.op==="_get")return e.value=t,c;if(n)throw new An("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,e,t);return c}}else{i||(t=pr(t));var d=e.path||"",f=d.split("/"),u=t,a=1,_=f.length,w=void 0,m=void 0,l=void 0;for(typeof n=="function"?l=n:l=Pv;;){if(m=f[a],m&&m.indexOf("~")!=-1&&(m=Y9(m)),s&&(m=="__proto__"||m=="prototype"&&a>0&&f[a-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&w===void 0&&(u[m]===void 0?w=f.slice(0,a).join("/"):a==_-1&&(w=e.path),w!==void 0&&l(e,0,t,w)),a++,Array.isArray(u)){if(m==="-")m=u.length;else{if(n&&!aI(m))throw new An("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,e,t);aI(m)&&(m=~~m)}if(a>=_){if(n&&e.op==="add"&&m>u.length)throw new An("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,e,t);var c=Hhe[e.op].call(e,u,m,t);if(c.test===!1)throw new An("Test operation failed","TEST_OPERATION_FAILED",o,e,t);return c}}else if(a>=_){var c=Fh[e.op].call(e,u,m,t);if(c.test===!1)throw new An("Test operation failed","TEST_OPERATION_FAILED",o,e,t);return c}if(u=u[m],n&&a<_&&(!u||typeof u!="object"))throw new An("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,e,t)}}}function vE(t,e,n,i,s){if(i===void 0&&(i=!0),s===void 0&&(s=!0),n&&!Array.isArray(e))throw new An("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(t=pr(t));for(var o=new Array(e.length),c=0,d=e.length;c<d;c++)o[c]=Gf(t,e[c],n,!0,s,c),t=o[c].newDocument;return o.newDocument=t,o}function Yhe(t,e,n){var i=Gf(t,e);if(i.test===!1)throw new An("Test operation failed","TEST_OPERATION_FAILED",n,e,t);return i.newDocument}function Pv(t,e,n,i){if(typeof t!="object"||t===null||Array.isArray(t))throw new An("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,t,n);if(Fh[t.op]){if(typeof t.path!="string")throw new An("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,t,n);if(t.path.indexOf("/")!==0&&t.path.length>0)throw new An('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,t,n);if((t.op==="move"||t.op==="copy")&&typeof t.from!="string")throw new An("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&t.value===void 0)throw new An("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&oI(t.value))throw new An("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,t,n);if(n){if(t.op=="add"){var s=t.path.split("/").length,o=i.split("/").length;if(s!==o+1&&s!==o)throw new An("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,t,n)}else if(t.op==="replace"||t.op==="remove"||t.op==="_get"){if(t.path!==i)throw new An("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,t,n)}else if(t.op==="move"||t.op==="copy"){var c={op:"_get",path:t.from,value:void 0},d=K9([c],n);if(d&&d.name==="OPERATION_PATH_UNRESOLVABLE")throw new An("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,t,n)}}}else throw new An("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,t,n)}function K9(t,e,n){try{if(!Array.isArray(t))throw new An("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)vE(pr(e),pr(t),n||!0);else{n=n||Pv;for(var i=0;i<t.length;i++)n(t[i],i,e,void 0)}}catch(s){if(s instanceof An)return s;throw s}}function Ey(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var n=Array.isArray(t),i=Array.isArray(e),s,o,c;if(n&&i){if(o=t.length,o!=e.length)return!1;for(s=o;s--!==0;)if(!Ey(t[s],e[s]))return!1;return!0}if(n!=i)return!1;var d=Object.keys(t);if(o=d.length,o!==Object.keys(e).length)return!1;for(s=o;s--!==0;)if(!e.hasOwnProperty(d[s]))return!1;for(s=o;s--!==0;)if(c=d[s],!Ey(t[c],e[c]))return!1;return!0}return t!==t&&e!==e}const Xhe=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:An,deepClone:Whe,getValueByPointer:Lv,applyOperation:Gf,applyPatch:vE,applyReducer:Yhe,validator:Pv,validate:K9,_areEquals:Ey},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var RM=new WeakMap,Khe=function(){function t(e){this.observers=new Map,this.obj=e}return t}(),Jhe=function(){function t(e,n){this.callback=e,this.observer=n}return t}();function Qhe(t){return RM.get(t)}function Zhe(t,e){return t.observers.get(e)}function epe(t,e){t.observers.delete(e.callback)}function tpe(t,e){e.unobserve()}function npe(t,e){var n=[],i,s=Qhe(t);if(!s)s=new Khe(t),RM.set(t,s);else{var o=Zhe(s,e);i=o&&o.observer}if(i)return i;if(i={},s.value=pr(t),e){i.callback=e,i.next=null;var c=function(){lI(i)},d=function(){clearTimeout(i.next),i.next=setTimeout(c)};typeof window<"u"&&(window.addEventListener("mouseup",d),window.addEventListener("keyup",d),window.addEventListener("mousedown",d),window.addEventListener("keydown",d),window.addEventListener("change",d))}return i.patches=n,i.object=t,i.unobserve=function(){lI(i),clearTimeout(i.next),epe(s,i),typeof window<"u"&&(window.removeEventListener("mouseup",d),window.removeEventListener("keyup",d),window.removeEventListener("mousedown",d),window.removeEventListener("keydown",d),window.removeEventListener("change",d))},s.observers.set(e,new Jhe(e,i)),i}function lI(t,e){e===void 0&&(e=!1);var n=RM.get(t.object);LM(n.value,t.object,t.patches,"",e),t.patches.length&&vE(n.value,t.patches);var i=t.patches;return i.length>0&&(t.patches=[],t.callback&&t.callback(i)),i}function LM(t,e,n,i,s){if(e!==t){typeof e.toJSON=="function"&&(e=e.toJSON());for(var o=rI(e),c=rI(t),d=!1,f=c.length-1;f>=0;f--){var u=c[f],a=t[u];if(sI(e,u)&&!(e[u]===void 0&&a!==void 0&&Array.isArray(e)===!1)){var _=e[u];typeof a=="object"&&a!=null&&typeof _=="object"&&_!=null&&Array.isArray(a)===Array.isArray(_)?LM(a,_,n,i+"/"+pf(u),s):a!==_&&(s&&n.push({op:"test",path:i+"/"+pf(u),value:pr(a)}),n.push({op:"replace",path:i+"/"+pf(u),value:pr(_)}))}else Array.isArray(t)===Array.isArray(e)?(s&&n.push({op:"test",path:i+"/"+pf(u),value:pr(a)}),n.push({op:"remove",path:i+"/"+pf(u)}),d=!0):(s&&n.push({op:"test",path:i,value:t}),n.push({op:"replace",path:i,value:e}))}if(!(!d&&o.length==c.length))for(var f=0;f<o.length;f++){var u=o[f];!sI(t,u)&&e[u]!==void 0&&n.push({op:"add",path:i+"/"+pf(u),value:pr(e[u])})}}}function ipe(t,e,n){n===void 0&&(n=!1);var i=[];return LM(t,e,i,"",n),i}const spe=Object.freeze(Object.defineProperty({__proto__:null,unobserve:tpe,observe:npe,generate:lI,compare:ipe},Symbol.toStringTag,{value:"Module"}));Object.assign({},Xhe,spe,{JsonPatchError:X9,deepClone:pr,escapePathComponent:pf,unescapePathComponent:Y9});var rpe=/("(?:[^\\"]|\\.)*")|[:,]/g,Jx=function(e,n){var i,s,o;return n=n||{},i=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),s=i===""?1/0:n.maxLength===void 0?80:n.maxLength,o=n.replacer,function c(d,f,u){var a,_,w,m,l,T,b,S,x,B,F,k;if(d&&typeof d.toJSON=="function"&&(d=d.toJSON()),F=JSON.stringify(d,o),F===void 0)return F;if(b=s-f.length-u,F.length<=b&&(x=F.replace(rpe,function(M,A){return A||M+" "}),x.length<=b))return x;if(o!=null&&(d=JSON.parse(F),o=void 0),typeof d=="object"&&d!==null){if(S=f+i,w=[],_=0,Array.isArray(d))for(B="[",a="]",b=d.length;_<b;_++)w.push(c(d[_],S,_===b-1?0:1)||"null");else for(B="{",a="}",T=Object.keys(d),b=T.length;_<b;_++)m=T[_],l=JSON.stringify(m)+": ",k=c(d[m],S,l.length+(_===b-1?0:1)),k!==void 0&&w.push(l+k);if(w.length>0)return[B,i+w.join(`,
`+S),a].join(`
`+f)}return F}(e,"",0)};function Zs(t,e,n){return t.fields=e||[],t.fname=n,t}function Rn(t){return t==null?null:t.fname}function qi(t){return t==null?null:t.fields}function J9(t){return t.length===1?ape(t[0]):ope(t)}const ape=t=>function(e){return e[t]},ope=t=>{const e=t.length;return function(n){for(let i=0;i<e;++i)n=n[t[i]];return n}};function de(t){throw Error(t)}function il(t){const e=[],n=t.length;let i=null,s=0,o="",c,d,f;t=t+"";function u(){e.push(o+t.substring(c,d)),o="",c=d+1}for(c=d=0;d<n;++d)if(f=t[d],f==="\\")o+=t.substring(c,d),o+=t.substring(++d,++d),c=d;else if(f===i)u(),i=null,s=-1;else{if(i)continue;c===s&&f==='"'||c===s&&f==="'"?(c=d+1,i=f):f==="."&&!s?d>c?u():c=d+1:f==="["?(d>c&&u(),s=c=d+1):f==="]"&&(s||de("Access path missing open bracket: "+t),s>0&&u(),s=0,c=d+1)}return s&&de("Access path missing closing bracket: "+t),i&&de("Access path missing closing quote: "+t),d>c&&(d++,u()),e}function Vs(t,e,n){const i=il(t);return t=i.length===1?i[0]:t,Zs((n&&n.get||J9)(i),[t],e||t)}const Sm=Vs("id"),Xi=Zs(t=>t,[],"identity"),Cc=Zs(()=>0,[],"zero"),ug=Zs(()=>1,[],"one"),Xr=Zs(()=>!0,[],"true"),wc=Zs(()=>!1,[],"false");function lpe(t,e,n){const i=[e].concat([].slice.call(n));console[t].apply(console,i)}const Q9=0,PM=1,DM=2,Z9=3,eG=4;function jM(t,e,n=lpe){let i=t||Q9;return{level(s){return arguments.length?(i=+s,this):i},error(){return i>=PM&&n(e||"error","ERROR",arguments),this},warn(){return i>=DM&&n(e||"warn","WARN",arguments),this},info(){return i>=Z9&&n(e||"log","INFO",arguments),this},debug(){return i>=eG&&n(e||"log","DEBUG",arguments),this}}}var he=Array.isArray;function Fe(t){return t===Object(t)}const o4=t=>t!=="__proto__";function hg(...t){return t.reduce((e,n)=>{for(const i in n)if(i==="signals")e.signals=cpe(e.signals,n.signals);else{const s=i==="legend"?{layout:1}:i==="style"?!0:null;pg(e,i,n[i],s)}return e},{})}function pg(t,e,n,i){if(!o4(e))return;let s,o;if(Fe(n)&&!he(n)){o=Fe(t[e])?t[e]:t[e]={};for(s in n)i&&(i===!0||i[s])?pg(o,s,n[s]):o4(s)&&(o[s]=n[s])}else t[e]=n}function cpe(t,e){if(t==null)return e;const n={},i=[];function s(o){n[o.name]||(n[o.name]=1,i.push(o))}return e.forEach(s),t.forEach(s),i}function Lt(t){return t[t.length-1]}function Ui(t){return t==null||t===""?null:+t}const tG=t=>e=>t*Math.exp(e),nG=t=>e=>Math.log(t*e),iG=t=>e=>Math.sign(e)*Math.log1p(Math.abs(e/t)),sG=t=>e=>Math.sign(e)*Math.expm1(Math.abs(e))*t,Dv=t=>e=>e<0?-Math.pow(-e,t):Math.pow(e,t);function EE(t,e,n,i){const s=n(t[0]),o=n(Lt(t)),c=(o-s)*e;return[i(s-c),i(o-c)]}function rG(t,e){return EE(t,e,Ui,Xi)}function aG(t,e){var n=Math.sign(t[0]);return EE(t,e,nG(n),tG(n))}function oG(t,e,n){return EE(t,e,Dv(n),Dv(1/n))}function lG(t,e,n){return EE(t,e,iG(n),sG(n))}function SE(t,e,n,i,s){const o=i(t[0]),c=i(Lt(t)),d=e!=null?i(e):(o+c)/2;return[s(d+(o-d)*n),s(d+(c-d)*n)]}function UM(t,e,n){return SE(t,e,n,Ui,Xi)}function $M(t,e,n){const i=Math.sign(t[0]);return SE(t,e,n,nG(i),tG(i))}function jv(t,e,n,i){return SE(t,e,n,Dv(i),Dv(1/i))}function zM(t,e,n,i){return SE(t,e,n,iG(i),sG(i))}function cG(t){return 1+~~(new Date(t).getMonth()/3)}function dG(t){return 1+~~(new Date(t).getUTCMonth()/3)}function Ie(t){return t!=null?he(t)?t:[t]:[]}function fG(t,e,n){let i=t[0],s=t[1],o;return s<i&&(o=s,s=i,i=o),o=s-i,o>=n-e?[e,n]:[i=Math.min(Math.max(i,e),n-o),i+o]}function wt(t){return typeof t=="function"}const dpe="descending";function qM(t,e,n){n=n||{},e=Ie(e)||[];const i=[],s=[],o={},c=n.comparator||fpe;return Ie(t).forEach((d,f)=>{d!=null&&(i.push(e[f]===dpe?-1:1),s.push(d=wt(d)?d:Vs(d,null,n)),(qi(d)||[]).forEach(u=>o[u]=1))}),s.length===0?null:Zs(c(s,i),Object.keys(o))}const xE=(t,e)=>(t<e||t==null)&&e!=null?-1:(t>e||e==null)&&t!=null?1:(e=e instanceof Date?+e:e,(t=t instanceof Date?+t:t)!==t&&e===e?-1:e!==e&&t===t?1:0),fpe=(t,e)=>t.length===1?upe(t[0],e[0]):hpe(t,e,t.length),upe=(t,e)=>function(n,i){return xE(t(n),t(i))*e},hpe=(t,e,n)=>(e.push(0),function(i,s){let o,c=0,d=-1;for(;c===0&&++d<n;)o=t[d],c=xE(o(i),o(s));return c*e[d]});function Ki(t){return wt(t)?t:()=>t}function GM(t,e){let n;return i=>{n&&clearTimeout(n),n=setTimeout(()=>(e(i),n=null),t)}}function mt(t){for(let e,n,i=1,s=arguments.length;i<s;++i){e=arguments[i];for(n in e)t[n]=e[n]}return t}function Wo(t,e){let n=0,i,s,o,c;if(t&&(i=t.length))if(e==null){for(s=t[n];n<i&&(s==null||s!==s);s=t[++n]);for(o=c=s;n<i;++n)s=t[n],s!=null&&(s<o&&(o=s),s>c&&(c=s))}else{for(s=e(t[n]);n<i&&(s==null||s!==s);s=e(t[++n]));for(o=c=s;n<i;++n)s=e(t[n]),s!=null&&(s<o&&(o=s),s>c&&(c=s))}return[o,c]}function uG(t,e){const n=t.length;let i=-1,s,o,c,d,f;if(e==null){for(;++i<n;)if(o=t[i],o!=null&&o>=o){s=c=o;break}if(i===n)return[-1,-1];for(d=f=i;++i<n;)o=t[i],o!=null&&(s>o&&(s=o,d=i),c<o&&(c=o,f=i))}else{for(;++i<n;)if(o=e(t[i],i,t),o!=null&&o>=o){s=c=o;break}if(i===n)return[-1,-1];for(d=f=i;++i<n;)o=e(t[i],i,t),o!=null&&(s>o&&(s=o,d=i),c<o&&(c=o,f=i))}return[d,f]}const ppe=Object.prototype.hasOwnProperty;function Le(t,e){return ppe.call(t,e)}const $b={};function gg(t){let e={},n;function i(o){return Le(e,o)&&e[o]!==$b}const s={size:0,empty:0,object:e,has:i,get(o){return i(o)?e[o]:void 0},set(o,c){return i(o)||(++s.size,e[o]===$b&&--s.empty),e[o]=c,this},delete(o){return i(o)&&(--s.size,++s.empty,e[o]=$b),this},clear(){s.size=s.empty=0,s.object=e={}},test(o){return arguments.length?(n=o,s):n},clean(){const o={};let c=0;for(const d in e){const f=e[d];f!==$b&&(!n||!n(f))&&(o[d]=f,++c)}s.size=c,s.empty=0,s.object=e=o}};return t&&Object.keys(t).forEach(o=>{s.set(o,t[o])}),s}function hG(t,e,n,i,s,o){if(!n&&n!==0)return o;const c=+n;let d=t[0],f=Lt(t),u;f<d&&(u=d,d=f,f=u),u=Math.abs(e-d);const a=Math.abs(f-e);return u<a&&u<=c?i:a<=c?s:o}function ve(t,e,n){const i=t.prototype=Object.create(e.prototype);return Object.defineProperty(i,"constructor",{value:t,writable:!0,enumerable:!0,configurable:!0}),mt(i,n)}function Oh(t,e,n,i){let s=e[0],o=e[e.length-1],c;return s>o&&(c=s,s=o,o=c),n=n===void 0||n,i=i===void 0||i,(n?s<=t:s<t)&&(i?t<=o:t<o)}function Dd(t){return typeof t=="boolean"}function Hc(t){return Object.prototype.toString.call(t)==="[object Date]"}function pG(t){return t&&wt(t[Symbol.iterator])}function cn(t){return typeof t=="number"}function gG(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function ke(t){return typeof t=="string"}function VM(t,e,n){t&&(t=e?Ie(t).map(d=>d.replace(/\\(.)/g,"$1")):Ie(t));const i=t&&t.length,s=n&&n.get||J9,o=d=>s(e?[d]:il(d));let c;if(!i)c=function(){return""};else if(i===1){const d=o(t[0]);c=function(f){return""+d(f)}}else{const d=t.map(o);c=function(f){let u=""+d[0](f),a=0;for(;++a<i;)u+="|"+d[a](f);return u}}return Zs(c,t,"key")}function _G(t,e){const n=t[0],i=Lt(t),s=+e;return s?s===1?i:n+s*(i-n):n}const gpe=1e4;function yG(t){t=+t||gpe;let e,n,i;const s=()=>{e={},n={},i=0},o=(c,d)=>(++i>t&&(n=e,e={},i=1),e[c]=d);return s(),{clear:s,has:c=>Le(e,c)||Le(n,c),get:c=>Le(e,c)?e[c]:Le(n,c)?o(c,n[c]):void 0,set:(c,d)=>Le(e,c)?e[c]=d:o(c,d)}}function mG(t,e,n,i){const s=e.length,o=n.length;if(!o)return e;if(!s)return n;const c=i||new e.constructor(s+o);let d=0,f=0,u=0;for(;d<s&&f<o;++u)c[u]=t(e[d],n[f])>0?n[f++]:e[d++];for(;d<s;++d,++u)c[u]=e[d];for(;f<o;++f,++u)c[u]=n[f];return c}function m_(t,e){let n="";for(;--e>=0;)n+=t;return n}function wG(t,e,n,i){const s=n||" ",o=t+"",c=e-o.length;return c<=0?o:i==="left"?m_(s,c)+o:i==="center"?m_(s,~~(c/2))+o+m_(s,Math.ceil(c/2)):o+m_(s,c)}function xm(t){return t&&Lt(t)-t[0]||0}function Se(t){return he(t)?"["+t.map(Se)+"]":Fe(t)||ke(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}function WM(t){return t==null||t===""?null:!t||t==="false"||t==="0"?!1:!!t}const _pe=t=>cn(t)||Hc(t)?t:Date.parse(t);function HM(t,e){return e=e||_pe,t==null||t===""?null:e(t)}function YM(t){return t==null||t===""?null:t+""}function Ra(t){const e={},n=t.length;for(let i=0;i<n;++i)e[t[i]]=!0;return e}function bG(t,e,n,i){const s=i!=null?i:"\u2026",o=t+"",c=o.length,d=Math.max(0,e-s.length);return c<=e?o:n==="left"?s+o.slice(c-d):n==="center"?o.slice(0,Math.ceil(d/2))+s+o.slice(c-~~(d/2)):o.slice(0,d)+s}function Ic(t,e,n){if(t)if(e){const i=t.length;for(let s=0;s<i;++s){const o=e(t[s]);o&&n(o,s,t)}}else t.forEach(n)}function ype(t){return t}function mpe(t){if(t==null)return ype;var e,n,i=t.scale[0],s=t.scale[1],o=t.translate[0],c=t.translate[1];return function(d,f){f||(e=n=0);var u=2,a=d.length,_=new Array(a);for(_[0]=(e+=d[0])*i+o,_[1]=(n+=d[1])*s+c;u<a;)_[u]=d[u],++u;return _}}function wpe(t,e){for(var n,i=t.length,s=i-e;s<--i;)n=t[s],t[s++]=t[i],t[i]=n}function bpe(t,e){return typeof e=="string"&&(e=t.objects[e]),e.type==="GeometryCollection"?{type:"FeatureCollection",features:e.geometries.map(function(n){return l4(t,n)})}:l4(t,e)}function l4(t,e){var n=e.id,i=e.bbox,s=e.properties==null?{}:e.properties,o=TG(t,e);return n==null&&i==null?{type:"Feature",properties:s,geometry:o}:i==null?{type:"Feature",id:n,properties:s,geometry:o}:{type:"Feature",id:n,bbox:i,properties:s,geometry:o}}function TG(t,e){var n=mpe(t.transform),i=t.arcs;function s(a,_){_.length&&_.pop();for(var w=i[a<0?~a:a],m=0,l=w.length;m<l;++m)_.push(n(w[m],m));a<0&&wpe(_,l)}function o(a){return n(a)}function c(a){for(var _=[],w=0,m=a.length;w<m;++w)s(a[w],_);return _.length<2&&_.push(_[0]),_}function d(a){for(var _=c(a);_.length<4;)_.push(_[0]);return _}function f(a){return a.map(d)}function u(a){var _=a.type,w;switch(_){case"GeometryCollection":return{type:_,geometries:a.geometries.map(u)};case"Point":w=o(a.coordinates);break;case"MultiPoint":w=a.coordinates.map(o);break;case"LineString":w=c(a.arcs);break;case"MultiLineString":w=a.arcs.map(c);break;case"Polygon":w=f(a.arcs);break;case"MultiPolygon":w=a.arcs.map(f);break;default:return null}return{type:_,coordinates:w}}return u(e)}function Tpe(t,e){var n={},i={},s={},o=[],c=-1;e.forEach(function(u,a){var _=t.arcs[u<0?~u:u],w;_.length<3&&!_[1][0]&&!_[1][1]&&(w=e[++c],e[c]=u,e[a]=w)}),e.forEach(function(u){var a=d(u),_=a[0],w=a[1],m,l;if(m=s[_])if(delete s[m.end],m.push(u),m.end=w,l=i[w]){delete i[l.start];var T=l===m?m:m.concat(l);i[T.start=m.start]=s[T.end=l.end]=T}else i[m.start]=s[m.end]=m;else if(m=i[w])if(delete i[m.start],m.unshift(u),m.start=_,l=s[_]){delete s[l.end];var b=l===m?m:l.concat(m);i[b.start=l.start]=s[b.end=m.end]=b}else i[m.start]=s[m.end]=m;else m=[u],i[m.start=_]=s[m.end=w]=m});function d(u){var a=t.arcs[u<0?~u:u],_=a[0],w;return t.transform?(w=[0,0],a.forEach(function(m){w[0]+=m[0],w[1]+=m[1]})):w=a[a.length-1],u<0?[w,_]:[_,w]}function f(u,a){for(var _ in u){var w=u[_];delete a[w.start],delete w.start,delete w.end,w.forEach(function(m){n[m<0?~m:m]=1}),o.push(w)}}return f(s,i),f(i,s),e.forEach(function(u){n[u<0?~u:u]||o.push([u])}),o}function vpe(t){return TG(t,Epe.apply(this,arguments))}function Epe(t,e,n){var i,s,o;if(arguments.length>1)i=Spe(t,e,n);else for(s=0,i=new Array(o=t.arcs.length);s<o;++s)i[s]=s;return{type:"MultiLineString",arcs:Tpe(t,i)}}function Spe(t,e,n){var i=[],s=[],o;function c(_){var w=_<0?~_:_;(s[w]||(s[w]=[])).push({i:_,g:o})}function d(_){_.forEach(c)}function f(_){_.forEach(d)}function u(_){_.forEach(f)}function a(_){switch(o=_,_.type){case"GeometryCollection":_.geometries.forEach(a);break;case"LineString":d(_.arcs);break;case"MultiLineString":case"Polygon":f(_.arcs);break;case"MultiPolygon":u(_.arcs);break}}return a(e),s.forEach(n==null?function(_){i.push(_[0].i)}:function(_){n(_[0].g,_[_.length-1].g)&&i.push(_[0].i)}),i}const Bi="year",Ws="quarter",Gi="month",ti="week",Hs="date",ji="day",Ho="dayofyear",wr="hours",br="minutes",Kr="seconds",La="milliseconds",XM=[Bi,Ws,Gi,ti,Hs,ji,Ho,wr,br,Kr,La],Qx=XM.reduce((t,e,n)=>(t[e]=1+n,t),{});function KM(t){const e=Ie(t).slice(),n={};return e.length||de("Missing time unit."),e.forEach(s=>{Le(Qx,s)?n[s]=1:de("Invalid time unit: ".concat(s,"."))}),(n[ti]||n[ji]?1:0)+(n[Ws]||n[Gi]||n[Hs]?1:0)+(n[Ho]?1:0)>1&&de("Incompatible time units: ".concat(t)),e.sort((s,o)=>Qx[s]-Qx[o]),e}const xpe={[Bi]:"%Y ",[Ws]:"Q%q ",[Gi]:"%b ",[Hs]:"%d ",[ti]:"W%U ",[ji]:"%a ",[Ho]:"%j ",[wr]:"%H:00",[br]:"00:%M",[Kr]:":%S",[La]:".%L",["".concat(Bi,"-").concat(Gi)]:"%Y-%m ",["".concat(Bi,"-").concat(Gi,"-").concat(Hs)]:"%Y-%m-%d ",["".concat(wr,"-").concat(br)]:"%H:%M"};function vG(t,e){const n=mt({},xpe,e),i=KM(t),s=i.length;let o="",c=0,d,f;for(c=0;c<s;)for(d=i.length;d>c;--d)if(f=i.slice(c,d).join("-"),n[f]!=null){o+=n[f],c=d;break}return o.trim()}const _f=new Date;function JM(t){return _f.setFullYear(t),_f.setMonth(0),_f.setDate(1),_f.setHours(0,0,0,0),_f}function EG(t){return xG(new Date(t))}function SG(t){return cI(new Date(t))}function xG(t){return $l.count(JM(t.getFullYear())-1,t)}function cI(t){return lg.count(JM(t.getFullYear())-1,t)}function dI(t){return JM(t).getDay()}function Bpe(t,e,n,i,s,o,c){if(0<=t&&t<100){const d=new Date(-1,e,n,i,s,o,c);return d.setFullYear(t),d}return new Date(t,e,n,i,s,o,c)}function BG(t){return IG(new Date(t))}function kG(t){return fI(new Date(t))}function IG(t){const e=Date.UTC(t.getUTCFullYear(),0,1);return Wc.count(e-1,t)}function fI(t){const e=Date.UTC(t.getUTCFullYear(),0,1);return cg.count(e-1,t)}function uI(t){return _f.setTime(Date.UTC(t,0,1)),_f.getUTCDay()}function kpe(t,e,n,i,s,o,c){if(0<=t&&t<100){const d=new Date(Date.UTC(-1,e,n,i,s,o,c));return d.setUTCFullYear(n.y),d}return new Date(Date.UTC(t,e,n,i,s,o,c))}function FG(t,e,n,i,s){const o=e||1,c=Lt(t),d=(S,x,B)=>(B=B||S,Ipe(n[B],i[B],S===c&&o,x)),f=new Date,u=Ra(t),a=u[Bi]?d(Bi):Ki(2012),_=u[Gi]?d(Gi):u[Ws]?d(Ws):Cc,w=u[ti]&&u[ji]?d(ji,1,ti+ji):u[ti]?d(ti,1):u[ji]?d(ji,1):u[Hs]?d(Hs,1):u[Ho]?d(Ho,1):ug,m=u[wr]?d(wr):Cc,l=u[br]?d(br):Cc,T=u[Kr]?d(Kr):Cc,b=u[La]?d(La):Cc;return function(S){f.setTime(+S);const x=a(f);return s(x,_(f),w(f,x),m(f),l(f),T(f),b(f))}}function Ipe(t,e,n,i){const s=n<=1?t:i?(o,c)=>i+n*Math.floor((t(o,c)-i)/n):(o,c)=>n*Math.floor(t(o,c)/n);return e?(o,c)=>e(s(o,c),c):s}function Op(t,e,n){return e+t*7-(n+6)%7}const Fpe={[Bi]:t=>t.getFullYear(),[Ws]:t=>Math.floor(t.getMonth()/3),[Gi]:t=>t.getMonth(),[Hs]:t=>t.getDate(),[wr]:t=>t.getHours(),[br]:t=>t.getMinutes(),[Kr]:t=>t.getSeconds(),[La]:t=>t.getMilliseconds(),[Ho]:t=>xG(t),[ti]:t=>cI(t),[ti+ji]:(t,e)=>Op(cI(t),t.getDay(),dI(e)),[ji]:(t,e)=>Op(1,t.getDay(),dI(e))},Ope={[Ws]:t=>3*t,[ti]:(t,e)=>Op(t,0,dI(e))};function OG(t,e){return FG(t,e||1,Fpe,Ope,Bpe)}const Mpe={[Bi]:t=>t.getUTCFullYear(),[Ws]:t=>Math.floor(t.getUTCMonth()/3),[Gi]:t=>t.getUTCMonth(),[Hs]:t=>t.getUTCDate(),[wr]:t=>t.getUTCHours(),[br]:t=>t.getUTCMinutes(),[Kr]:t=>t.getUTCSeconds(),[La]:t=>t.getUTCMilliseconds(),[Ho]:t=>IG(t),[ti]:t=>fI(t),[ji]:(t,e)=>Op(1,t.getUTCDay(),uI(e)),[ti+ji]:(t,e)=>Op(fI(t),t.getUTCDay(),uI(e))},Ape={[Ws]:t=>3*t,[ti]:(t,e)=>Op(t,0,uI(e))};function MG(t,e){return FG(t,e||1,Mpe,Ape,kpe)}const Npe={[Bi]:$o,[Ws]:py.every(3),[Gi]:py,[ti]:lg,[Hs]:$l,[ji]:$l,[Ho]:$l,[wr]:fE,[br]:cE,[Kr]:Ll,[La]:bp},Cpe={[Bi]:zo,[Ws]:gy.every(3),[Gi]:gy,[ti]:cg,[Hs]:Wc,[ji]:Wc,[Ho]:Wc,[wr]:uE,[br]:dE,[Kr]:Ll,[La]:bp};function _g(t){return Npe[t]}function yg(t){return Cpe[t]}function AG(t,e,n){return t?t.offset(e,n):void 0}function NG(t,e,n){return AG(_g(t),e,n)}function CG(t,e,n){return AG(yg(t),e,n)}function RG(t,e,n,i){return t?t.range(e,n,i):void 0}function LG(t,e,n,i){return RG(_g(t),e,n,i)}function PG(t,e,n,i){return RG(yg(t),e,n,i)}const w_=1e3,b_=w_*60,T_=b_*60,BE=T_*24,Rpe=BE*7,c4=BE*30,hI=BE*365,DG=[Bi,Gi,Hs,wr,br,Kr,La],v_=DG.slice(0,-1),E_=v_.slice(0,-1),S_=E_.slice(0,-1),Lpe=S_.slice(0,-1),Ppe=[Bi,ti],d4=[Bi,Gi],jG=[Bi],qg=[[v_,1,w_],[v_,5,5*w_],[v_,15,15*w_],[v_,30,30*w_],[E_,1,b_],[E_,5,5*b_],[E_,15,15*b_],[E_,30,30*b_],[S_,1,T_],[S_,3,3*T_],[S_,6,6*T_],[S_,12,12*T_],[Lpe,1,BE],[Ppe,1,Rpe],[d4,1,c4],[d4,3,3*c4],[jG,1,hI]];function UG(t){const e=t.extent,n=t.maxbins||40,i=Math.abs(xm(e))/n;let s=lm(d=>d[2]).right(qg,i),o,c;return s===qg.length?(o=jG,c=rd(e[0]/hI,e[1]/hI,n)):s?(s=qg[i/qg[s-1][2]<qg[s][2]/i?s-1:s],o=s[0],c=s[1]):(o=DG,c=Math.max(rd(e[0],e[1],n),1)),{units:o,step:c}}function x_(t){const e={};return n=>e[n]||(e[n]=t(n))}function Dpe(t,e){return n=>{const i=t(n),s=i.indexOf(e);if(s<0)return i;let o=jpe(i,s);const c=o<i.length?i.slice(o):"";for(;--o>s;)if(i[o]!=="0"){++o;break}return i.slice(0,o)+c}}function jpe(t,e){let n=t.lastIndexOf("e"),i;if(n>0)return n;for(n=t.length;--n>e;)if(i=t.charCodeAt(n),i>=48&&i<=57)return n+1}function $G(t){const e=x_(t.format),n=t.formatPrefix;return{format:e,formatPrefix:n,formatFloat(i){const s=iu(i||",");if(s.precision==null){switch(s.precision=12,s.type){case"%":s.precision-=2;break;case"e":s.precision-=1;break}return Dpe(e(s),e(".1f")(1)[1])}else return e(s)},formatSpan(i,s,o,c){c=iu(c==null?",f":c);const d=rd(i,s,o),f=Math.max(Math.abs(i),Math.abs(s));let u;if(c.precision==null)switch(c.type){case"s":return isNaN(u=w5(d,f))||(c.precision=u),n(c,f);case"":case"e":case"g":case"p":case"r":{isNaN(u=b5(d,f))||(c.precision=u-(c.type==="e"));break}case"f":case"%":{isNaN(u=m5(d))||(c.precision=u-(c.type==="%")*2);break}}return e(c)}}}let pI;zG();function zG(){return pI=$G({format:iE,formatPrefix:OO})}function qG(t){return $G(y5(t))}function Uv(t){return arguments.length?pI=qG(t):pI}function f4(t,e,n){n=n||{},Fe(n)||de("Invalid time multi-format specifier: ".concat(n));const i=e(Kr),s=e(br),o=e(wr),c=e(Hs),d=e(ti),f=e(Gi),u=e(Ws),a=e(Bi),_=t(n[La]||".%L"),w=t(n[Kr]||":%S"),m=t(n[br]||"%I:%M"),l=t(n[wr]||"%I %p"),T=t(n[Hs]||n[ji]||"%a %d"),b=t(n[ti]||"%b %d"),S=t(n[Gi]||"%B"),x=t(n[Ws]||"%B"),B=t(n[Bi]||"%Y");return F=>(i(F)<F?_:s(F)<F?w:o(F)<F?m:c(F)<F?l:f(F)<F?d(F)<F?T:b:a(F)<F?u(F)<F?S:x:B)(F)}function GG(t){const e=x_(t.format),n=x_(t.utcFormat);return{timeFormat:i=>ke(i)?e(i):f4(e,_g,i),utcFormat:i=>ke(i)?n(i):f4(n,yg,i),timeParse:x_(t.parse),utcParse:x_(t.utcParse)}}let gI;VG();function VG(){return gI=GG({format:VO,parse:Nq,utcFormat:WO,utcParse:Cq})}function WG(t){return GG(Iq(t))}function Sy(t){return arguments.length?gI=WG(t):gI}const _I=(t,e)=>mt({},t,e);function HG(t,e){const n=t?qG(t):Uv(),i=e?WG(e):Sy();return _I(n,i)}function QM(t,e){const n=arguments.length;return n&&n!==2&&de("defaultLocale expects either zero or two arguments."),n?_I(Uv(t),Sy(e)):_I(Uv(),Sy())}function Upe(){return zG(),VG(),QM()}const $pe=/^(data:|([A-Za-z]+:)?\/\/)/,zpe=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,qpe=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,u4="file://";function Gpe(t,e){return n=>({options:n||{},sanitize:Wpe,load:Vpe,fileAccess:!!e,file:Hpe(e),http:Xpe(t)})}async function Vpe(t,e){const n=await this.sanitize(t,e),i=n.href;return n.localFile?this.file(i):this.http(i,e)}async function Wpe(t,e){e=mt({},this.options,e);const n=this.fileAccess,i={href:null};let s,o,c;const d=zpe.test(t.replace(qpe,""));(t==null||typeof t!="string"||!d)&&de("Sanitize failure, invalid URI: "+Se(t));const f=$pe.test(t);return(c=e.baseURL)&&!f&&(!t.startsWith("/")&&!c.endsWith("/")&&(t="/"+t),t=c+t),o=(s=t.startsWith(u4))||e.mode==="file"||e.mode!=="http"&&!f&&n,s?t=t.slice(u4.length):t.startsWith("//")&&(e.defaultProtocol==="file"?(t=t.slice(2),o=!0):t=(e.defaultProtocol||"http")+":"+t),Object.defineProperty(i,"localFile",{value:!!o}),i.href=t,e.target&&(i.target=e.target+""),e.rel&&(i.rel=e.rel+""),e.context==="image"&&e.crossOrigin&&(i.crossOrigin=e.crossOrigin+""),i}function Hpe(t){return t?e=>new Promise((n,i)=>{t.readFile(e,(s,o)=>{s?i(s):n(o)})}):Ype}async function Ype(){de("No file system access.")}function Xpe(t){return t?async function(e,n){const i=mt({},this.options.http,n),s=n&&n.response,o=await t(e,i);return o.ok?wt(o[s])?o[s]():o.text():de(o.status+""+o.statusText)}:Kpe}async function Kpe(){de("No HTTP fetch method available.")}const Jpe=t=>t!=null&&t===t,Qpe=t=>t==="true"||t==="false"||t===!0||t===!1,Zpe=t=>!Number.isNaN(Date.parse(t)),YG=t=>!Number.isNaN(+t)&&!(t instanceof Date),ege=t=>YG(t)&&Number.isInteger(+t),yI={boolean:WM,integer:Ui,number:Ui,date:HM,string:YM,unknown:Xi},zb=[Qpe,ege,YG,Zpe],tge=["boolean","integer","number","date"];function XG(t,e){if(!t||!t.length)return"unknown";const n=t.length,i=zb.length,s=zb.map((o,c)=>c+1);for(let o=0,c=0,d,f;o<n;++o)for(f=e?t[o][e]:t[o],d=0;d<i;++d)if(s[d]&&Jpe(f)&&!zb[d](f)&&(s[d]=0,++c,c===zb.length))return"string";return tge[s.reduce((o,c)=>o===0?c:o,0)-1]}function KG(t,e){return e.reduce((n,i)=>(n[i]=XG(t,i),n),{})}function h4(t){const e=function(n,i){const s={delimiter:t};return ZM(n,i?mt(i,s):s)};return e.responseType="text",e}function ZM(t,e){return e.header&&(t=e.header.map(Se).join(e.delimiter)+`
`+t),cre(e.delimiter).parse(t+"")}ZM.responseType="text";function nge(t){return typeof Buffer=="function"&&wt(Buffer.isBuffer)?Buffer.isBuffer(t):!1}function eA(t,e){const n=e&&e.property?Vs(e.property):Xi;return Fe(t)&&!nge(t)?ige(n(t),e):n(JSON.parse(t))}eA.responseType="json";function ige(t,e){return!he(t)&&pG(t)&&(t=[...t]),e&&e.copy?JSON.parse(JSON.stringify(t)):t}const sge={interior:(t,e)=>t!==e,exterior:(t,e)=>t===e};function JG(t,e){let n,i,s,o;return t=eA(t,e),e&&e.feature?(n=bpe,s=e.feature):e&&e.mesh?(n=vpe,s=e.mesh,o=sge[e.filter]):de("Missing TopoJSON feature or mesh parameter."),i=(i=t.objects[s])?n(t,i,o):de("Invalid TopoJSON object: "+s),i&&i.features||[i]}JG.responseType="json";const A0={dsv:ZM,csv:h4(","),tsv:h4("	"),json:eA,topojson:JG};function tA(t,e){return arguments.length>1?(A0[t]=e,this):Le(A0,t)?A0[t]:null}function QG(t){const e=tA(t);return e&&e.responseType||"text"}function ZG(t,e,n,i){e=e||{};const s=tA(e.type||"json");return s||de("Unknown data format type: "+e.type),t=s(t,e),e.parse&&rge(t,e.parse,n,i),Le(t,"columns")&&delete t.columns,t}function rge(t,e,n,i){if(!t.length)return;const s=Sy();n=n||s.timeParse,i=i||s.utcParse;let o=t.columns||Object.keys(t[0]),c,d,f,u,a,_;e==="auto"&&(e=KG(t,o)),o=Object.keys(e);const w=o.map(m=>{const l=e[m];let T,b;if(l&&(l.startsWith("date:")||l.startsWith("utc:")))return T=l.split(/:(.+)?/,2),b=T[1],(b[0]==="'"&&b[b.length-1]==="'"||b[0]==='"'&&b[b.length-1]==='"')&&(b=b.slice(1,-1)),(T[0]==="utc"?i:n)(b);if(!yI[l])throw Error("Illegal format pattern: "+m+":"+l);return yI[l]});for(f=0,a=t.length,_=o.length;f<a;++f)for(c=t[f],u=0;u<_;++u)d=o[u],c[d]=w[u](c[d])}const kE=Gpe(typeof fetch<"u"&&fetch,null);function IE(t){const e=t||Xi,n=[],i={};return n.add=s=>{const o=e(s);return i[o]||(i[o]=1,n.push(s)),n},n.remove=s=>{const o=e(s);if(i[o]){i[o]=0;const c=n.indexOf(s);c>=0&&n.splice(c,1)}return n},n}async function N0(t,e){try{await e(t)}catch(n){t.error(n)}}const eV=Symbol("vega_id");let age=1;function FE(t){return!!(t&&De(t))}function De(t){return t[eV]}function tV(t,e){return t[eV]=e,t}function Kt(t){const e=t===Object(t)?t:{data:t};return De(e)?e:tV(e,age++)}function nA(t){return OE(t,Kt({}))}function OE(t,e){for(const n in t)e[n]=t[n];return e}function nV(t,e){return tV(e,De(t))}function Uu(t,e){return t?e?(n,i)=>t(n,i)||De(e(n))-De(e(i)):(n,i)=>t(n,i)||De(n)-De(i):null}function iV(t){return t&&t.constructor===$u}function $u(){const t=[],e=[],n=[],i=[],s=[];let o=null,c=!1;return{constructor:$u,insert(d){const f=Ie(d),u=f.length;for(let a=0;a<u;++a)t.push(f[a]);return this},remove(d){const f=wt(d)?i:e,u=Ie(d),a=u.length;for(let _=0;_<a;++_)f.push(u[_]);return this},modify(d,f,u){const a={field:f,value:Ki(u)};return wt(d)?(a.filter=d,s.push(a)):(a.tuple=d,n.push(a)),this},encode(d,f){return wt(d)?s.push({filter:d,field:f}):n.push({tuple:d,field:f}),this},clean(d){return o=d,this},reflow(){return c=!0,this},pulse(d,f){const u={},a={};let _,w,m,l,T,b;for(_=0,w=f.length;_<w;++_)u[De(f[_])]=1;for(_=0,w=e.length;_<w;++_)T=e[_],u[De(T)]=-1;for(_=0,w=i.length;_<w;++_)l=i[_],f.forEach(x=>{l(x)&&(u[De(x)]=-1)});for(_=0,w=t.length;_<w;++_)T=t[_],b=De(T),u[b]?u[b]=1:d.add.push(Kt(t[_]));for(_=0,w=f.length;_<w;++_)T=f[_],u[De(T)]<0&&d.rem.push(T);function S(x,B,F){F?x[B]=F(x):d.encode=B,c||(a[De(x)]=x)}for(_=0,w=n.length;_<w;++_)m=n[_],T=m.tuple,l=m.field,b=u[De(T)],b>0&&(S(T,l,m.value),d.modifies(l));for(_=0,w=s.length;_<w;++_)m=s[_],l=m.filter,f.forEach(x=>{l(x)&&u[De(x)]>0&&S(x,m.field,m.value)}),d.modifies(m.field);if(c)d.mod=e.length||i.length?f.filter(x=>u[De(x)]>0):f.slice();else for(b in a)d.mod.push(a[b]);return(o||o==null&&(e.length||i.length))&&d.clean(!0),d}}}const C0="_:mod:_";function ME(){Object.defineProperty(this,C0,{writable:!0,value:{}})}ME.prototype={set(t,e,n,i){const s=this,o=s[t],c=s[C0];return e!=null&&e>=0?(o[e]!==n||i)&&(o[e]=n,c[e+":"+t]=-1,c[t]=-1):(o!==n||i)&&(s[t]=n,c[t]=he(n)?1+n.length:-1),s},modified(t,e){const n=this[C0];if(arguments.length){if(he(t)){for(let i=0;i<t.length;++i)if(n[t[i]])return!0;return!1}}else{for(const i in n)if(n[i])return!0;return!1}return e!=null&&e>=0?e+1<n[t]||!!n[e+":"+t]:!!n[t]},clear(){return this[C0]={},this}};let oge=0;const lge="pulse",cge=new ME,dge=1,fge=2;function pn(t,e,n,i){this.id=++oge,this.value=t,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,e&&(this._update=e),n&&this.parameters(n,i)}function p4(t){return function(e){const n=this.flags;return arguments.length===0?!!(n&t):(this.flags=e?n|t:n&~t,this)}}pn.prototype={targets(){return this._targets||(this._targets=IE(Sm))},set(t){return this.value!==t?(this.value=t,1):0},skip:p4(dge),modified:p4(fge),parameters(t,e,n){e=e!==!1;const i=this._argval=this._argval||new ME,s=this._argops=this._argops||[],o=[];let c,d,f,u;const a=(_,w,m)=>{m instanceof pn?(m!==this&&(e&&m.targets().add(this),o.push(m)),s.push({op:m,name:_,index:w})):i.set(_,w,m)};for(c in t)if(d=t[c],c===lge)Ie(d).forEach(_=>{_ instanceof pn?_!==this&&(_.targets().add(this),o.push(_)):de("Pulse parameters must be operator instances.")}),this.source=d;else if(he(d))for(i.set(c,-1,Array(f=d.length)),u=0;u<f;++u)a(c,u,d[u]);else a(c,-1,d);return this.marshall().clear(),n&&(s.initonly=!0),o},marshall(t){const e=this._argval||cge,n=this._argops;let i,s,o,c;if(n){const d=n.length;for(s=0;s<d;++s)i=n[s],o=i.op,c=o.modified()&&o.stamp===t,e.set(i.name,i.index,o.value,c);if(n.initonly){for(s=0;s<d;++s)i=n[s],i.op.targets().remove(this);this._argops=null,this._update=null}}return e},detach(){const t=this._argops;let e,n,i,s;if(t)for(e=0,n=t.length;e<n;++e)i=t[e],s=i.op,s._targets&&s._targets.remove(this);this.pulse=null,this.source=null},evaluate(t){const e=this._update;if(e){const n=this.marshall(t.stamp),i=e.call(this,n,t);if(n.clear(),i!==this.value)this.value=i;else if(!this.modified())return t.StopPropagation}},run(t){if(t.stamp<this.stamp)return t.StopPropagation;let e;return this.skip()?(this.skip(!1),e=0):e=this.evaluate(t),this.pulse=e||t}};function uge(t,e,n,i){let s=1,o;return t instanceof pn?o=t:t&&t.prototype instanceof pn?o=new t:wt(t)?o=new pn(null,t):(s=0,o=new pn(t,e)),this.rank(o),s&&(i=n,n=e),n&&this.connect(o,o.parameters(n,i)),this.touch(o),o}function hge(t,e){const n=t.rank,i=e.length;for(let s=0;s<i;++s)if(n<e[s].rank){this.rerank(t);return}}let pge=0;function AE(t,e,n){this.id=++pge,this.value=null,n&&(this.receive=n),t&&(this._filter=t),e&&(this._apply=e)}function bc(t,e,n){return new AE(t,e,n)}AE.prototype={_filter:Xr,_apply:Xi,targets(){return this._targets||(this._targets=IE(Sm))},consume(t){return arguments.length?(this._consume=!!t,this):!!this._consume},receive(t){if(this._filter(t)){const e=this.value=this._apply(t),n=this._targets,i=n?n.length:0;for(let s=0;s<i;++s)n[s].receive(e);this._consume&&(t.preventDefault(),t.stopPropagation())}},filter(t){const e=bc(t);return this.targets().add(e),e},apply(t){const e=bc(null,t);return this.targets().add(e),e},merge(){const t=bc();this.targets().add(t);for(let e=0,n=arguments.length;e<n;++e)arguments[e].targets().add(t);return t},throttle(t){let e=-1;return this.filter(()=>{const n=Date.now();return n-e>t?(e=n,1):0})},debounce(t){const e=bc();return this.targets().add(bc(null,null,GM(t,n=>{const i=n.dataflow;e.receive(n),i&&i.run&&i.run()}))),e},between(t,e){let n=!1;return t.targets().add(bc(null,null,()=>n=!0)),e.targets().add(bc(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Xr,this._targets=null}};function gge(t,e,n,i){const s=this,o=bc(n,i),c=function(u){u.dataflow=s;try{o.receive(u)}catch(a){s.error(a)}finally{s.run()}};let d;typeof t=="string"&&typeof document<"u"?d=document.querySelectorAll(t):d=Ie(t);const f=d.length;for(let u=0;u<f;++u)d[u].addEventListener(e,c);return o}function _ge(t,e){const n=this.locale();return ZG(t,e,n.timeParse,n.utcParse)}function yge(t,e,n){return e=this.parse(e,n),this.pulse(t,this.changeset().insert(e))}async function mge(t,e){const n=this;let i=0,s;try{s=await n.loader().load(t,{context:"dataflow",response:QG(e&&e.type)});try{s=n.parse(s,e)}catch(o){i=-2,n.warn("Data ingestion failed",t,o)}}catch(o){i=-1,n.warn("Loading failed",t,o)}return{data:s,status:i}}async function wge(t,e,n){const i=this,s=i._pending||bge(i);s.requests+=1;const o=await i.request(e,n);return i.pulse(t,i.changeset().remove(Xr).insert(o.data||[])),s.done(),o}function bge(t){let e;const n=new Promise(i=>e=i);return n.requests=0,n.done=()=>{--n.requests===0&&(t._pending=null,e(t))},t._pending=n}const Tge={skip:!0};function vge(t,e,n,i,s){return(t instanceof pn?Sge:Ege)(this,t,e,n,i,s),this}function Ege(t,e,n,i,s,o){const c=mt({},o,Tge);let d,f;wt(n)||(n=Ki(n)),i===void 0?d=u=>t.touch(n(u)):wt(i)?(f=new pn(null,i,s,!1),d=u=>{f.evaluate(u);const a=n(u),_=f.value;iV(_)?t.pulse(a,_,o):t.update(a,_,c)}):d=u=>t.update(n(u),i,c),e.apply(d)}function Sge(t,e,n,i,s,o){if(i===void 0)e.targets().add(n);else{const c=o||{},d=new pn(null,xge(n,i),s,!1);d.modified(c.force),d.rank=e.rank,e.targets().add(d),n&&(d.skip(!0),d.value=n.value,d.targets().add(n),t.connect(n,[d]))}}function xge(t,e){return e=wt(e)?e:Ki(e),t?function(n,i){const s=e(n,i);return t.skip()||(t.skip(s!==this.value).value=s),s}:e}function Bge(t){t.rank=++this._rank}function kge(t){const e=[t];let n,i,s;for(;e.length;)if(this.rank(n=e.pop()),i=n._targets)for(s=i.length;--s>=0;)e.push(n=i[s]),n===t&&de("Cycle detected in dataflow graph.")}const $v={},Za=1<<0,Fc=1<<1,vl=1<<2,Ige=Za|Fc,g4=Za|vl,rh=Za|Fc|vl,_4=1<<3,Gg=1<<4,y4=1<<5,m4=1<<6;function Yc(t,e,n){this.dataflow=t,this.stamp=e==null?-1:e,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function Zx(t,e){const n=[];return Ic(t,e,i=>n.push(i)),n}function w4(t,e){const n={};return t.visit(e,i=>{n[De(i)]=1}),i=>n[De(i)]?null:i}function qb(t,e){return t?(n,i)=>t(n,i)&&e(n,i):e}Yc.prototype={StopPropagation:$v,ADD:Za,REM:Fc,MOD:vl,ADD_REM:Ige,ADD_MOD:g4,ALL:rh,REFLOW:_4,SOURCE:Gg,NO_SOURCE:y4,NO_FIELDS:m4,fork(t){return new Yc(this.dataflow).init(this,t)},clone(){const t=this.fork(rh);return t.add=t.add.slice(),t.rem=t.rem.slice(),t.mod=t.mod.slice(),t.source&&(t.source=t.source.slice()),t.materialize(rh|Gg)},addAll(){let t=this;return!t.source||t.add===t.rem||!t.rem.length&&t.source.length===t.add.length||(t=new Yc(this.dataflow).init(this),t.add=t.source,t.rem=[]),t},init(t,e){const n=this;return n.stamp=t.stamp,n.encode=t.encode,t.fields&&!(e&m4)&&(n.fields=t.fields),e&Za?(n.addF=t.addF,n.add=t.add):(n.addF=null,n.add=[]),e&Fc?(n.remF=t.remF,n.rem=t.rem):(n.remF=null,n.rem=[]),e&vl?(n.modF=t.modF,n.mod=t.mod):(n.modF=null,n.mod=[]),e&y4?(n.srcF=null,n.source=null):(n.srcF=t.srcF,n.source=t.source,t.cleans&&(n.cleans=t.cleans)),n},runAfter(t){this.dataflow.runAfter(t)},changed(t){const e=t||rh;return e&Za&&this.add.length||e&Fc&&this.rem.length||e&vl&&this.mod.length},reflow(t){if(t)return this.fork(rh).reflow();const e=this.add.length,n=this.source&&this.source.length;return n&&n!==e&&(this.mod=this.source,e&&this.filter(vl,w4(this,Za))),this},clean(t){return arguments.length?(this.cleans=!!t,this):this.cleans},modifies(t){const e=this.fields||(this.fields={});return he(t)?t.forEach(n=>e[n]=!0):e[t]=!0,this},modified(t,e){const n=this.fields;return(e||this.mod.length)&&n?arguments.length?he(t)?t.some(i=>n[i]):n[t]:!!n:!1},filter(t,e){const n=this;return t&Za&&(n.addF=qb(n.addF,e)),t&Fc&&(n.remF=qb(n.remF,e)),t&vl&&(n.modF=qb(n.modF,e)),t&Gg&&(n.srcF=qb(n.srcF,e)),n},materialize(t){t=t||rh;const e=this;return t&Za&&e.addF&&(e.add=Zx(e.add,e.addF),e.addF=null),t&Fc&&e.remF&&(e.rem=Zx(e.rem,e.remF),e.remF=null),t&vl&&e.modF&&(e.mod=Zx(e.mod,e.modF),e.modF=null),t&Gg&&e.srcF&&(e.source=e.source.filter(e.srcF),e.srcF=null),e},visit(t,e){const n=this,i=e;if(t&Gg)return Ic(n.source,n.srcF,i),n;t&Za&&Ic(n.add,n.addF,i),t&Fc&&Ic(n.rem,n.remF,i),t&vl&&Ic(n.mod,n.modF,i);const s=n.source;if(t&_4&&s){const o=n.add.length+n.mod.length;o===s.length||(o?Ic(s,w4(n,g4),i):Ic(s,n.srcF,i))}return n}};function iA(t,e,n,i){const s=this,o=n.length;let c=0;this.dataflow=t,this.stamp=e,this.fields=null,this.encode=i||null,this.pulses=n;for(let d=0;d<o;++d){const f=n[d];if(f.stamp===e){if(f.fields){const u=s.fields||(s.fields={});for(const a in f.fields)u[a]=1}f.changed(s.ADD)&&(c|=s.ADD),f.changed(s.REM)&&(c|=s.REM),f.changed(s.MOD)&&(c|=s.MOD)}}this.changes=c}ve(iA,Yc,{fork(t){const e=new Yc(this.dataflow).init(this,t&this.NO_FIELDS);return t!==void 0&&(t&e.ADD&&this.visit(e.ADD,n=>e.add.push(n)),t&e.REM&&this.visit(e.REM,n=>e.rem.push(n)),t&e.MOD&&this.visit(e.MOD,n=>e.mod.push(n))),e},changed(t){return this.changes&t},modified(t){const e=this,n=e.fields;return n&&e.changes&e.MOD?he(t)?t.some(i=>n[i]):n[t]:0},filter(){de("MultiPulse does not support filtering.")},materialize(){de("MultiPulse does not support materialization.")},visit(t,e){const n=this,i=n.pulses,s=i.length;let o=0;if(t&n.SOURCE)for(;o<s;++o)i[o].visit(t,e);else for(;o<s;++o)i[o].stamp===n.stamp&&i[o].visit(t,e);return n}});async function Fge(t,e,n){const i=this,s=[];if(i._pulse)return sV(i);if(i._pending&&await i._pending,e&&await N0(i,e),!i._touched.length)return i.debug("Dataflow invoked, but nothing to do."),i;const o=++i._clock;i._pulse=new Yc(i,o,t),i._touched.forEach(a=>i._enqueue(a,!0)),i._touched=IE(Sm);let c=0,d,f,u;try{for(;i._heap.size()>0;){if(d=i._heap.pop(),d.rank!==d.qrank){i._enqueue(d,!0);continue}f=d.run(i._getPulse(d,t)),f.then?f=await f:f.async&&(s.push(f.async),f=$v),f!==$v&&d._targets&&d._targets.forEach(a=>i._enqueue(a)),++c}}catch(a){i._heap.clear(),u=a}if(i._input={},i._pulse=null,i.debug(`Pulse ${o}: ${c} operators`),u&&(i._postrun=[],i.error(u)),i._postrun.length){const a=i._postrun.sort((_,w)=>w.priority-_.priority);i._postrun=[];for(let _=0;_<a.length;++_)await N0(i,a[_].callback)}return n&&await N0(i,n),s.length&&Promise.all(s).then(a=>i.runAsync(null,()=>{a.forEach(_=>{try{_(i)}catch(w){i.error(w)}})})),i}async function Oge(t,e,n){for(;this._running;)await this._running;const i=()=>this._running=null;return(this._running=this.evaluate(t,e,n)).then(i,i),this._running}function Mge(t,e,n){return this._pulse?sV(this):(this.evaluate(t,e,n),this)}function Age(t,e,n){if(this._pulse||e)this._postrun.push({priority:n||0,callback:t});else try{t(this)}catch(i){this.error(i)}}function sV(t){return t.error("Dataflow already running. Use runAsync() to chain invocations."),t}function Nge(t,e){const n=t.stamp<this._clock;n&&(t.stamp=this._clock),(n||e)&&(t.qrank=t.rank,this._heap.push(t))}function Cge(t,e){const n=t.source,i=this._clock;return n&&he(n)?new iA(this,i,n.map(s=>s.pulse),e):this._input[t.id]||Rge(this._pulse,n&&n.pulse)}function Rge(t,e){return e&&e.stamp===t.stamp?e:(t=t.fork(),e&&e!==$v&&(t.source=e.source),t)}const sA={skip:!1,force:!1};function Lge(t,e){const n=e||sA;return this._pulse?this._enqueue(t):this._touched.add(t),n.skip&&t.skip(!0),this}function Pge(t,e,n){const i=n||sA;return(t.set(e)||i.force)&&this.touch(t,i),this}function Dge(t,e,n){this.touch(t,n||sA);const i=new Yc(this,this._clock+(this._pulse?0:1)),s=t.pulse&&t.pulse.source||[];return i.target=t,this._input[t.id]=e.pulse(i,s),this}function jge(t){let e=[];return{clear:()=>e=[],size:()=>e.length,peek:()=>e[0],push:n=>(e.push(n),rV(e,0,e.length-1,t)),pop:()=>{const n=e.pop();let i;return e.length?(i=e[0],e[0]=n,Uge(e,0,t)):i=n,i}}}function rV(t,e,n,i){let s,o;const c=t[n];for(;n>e;){if(o=n-1>>1,s=t[o],i(c,s)<0){t[n]=s,n=o;continue}break}return t[n]=c}function Uge(t,e,n){const i=e,s=t.length,o=t[e];let c=(e<<1)+1,d;for(;c<s;)d=c+1,d<s&&n(t[c],t[d])>=0&&(c=d),t[e]=t[c],e=c,c=(e<<1)+1;return t[e]=o,rV(t,i,e,n)}function Xh(){this.logger(jM()),this.logLevel(PM),this._clock=0,this._rank=0,this._locale=QM();try{this._loader=kE()}catch{}this._touched=IE(Sm),this._input={},this._pulse=null,this._heap=jge((t,e)=>t.qrank-e.qrank),this._postrun=[]}function Vg(t){return function(){return this._log[t].apply(this,arguments)}}Xh.prototype={stamp(){return this._clock},loader(t){return arguments.length?(this._loader=t,this):this._loader},locale(t){return arguments.length?(this._locale=t,this):this._locale},logger(t){return arguments.length?(this._log=t,this):this._log},error:Vg("error"),warn:Vg("warn"),info:Vg("info"),debug:Vg("debug"),logLevel:Vg("level"),cleanThreshold:1e4,add:uge,connect:hge,rank:Bge,rerank:kge,pulse:Dge,touch:Lge,update:Pge,changeset:$u,ingest:yge,parse:_ge,preload:wge,request:mge,events:gge,on:vge,evaluate:Fge,run:Mge,runAsync:Oge,runAfter:Age,_enqueue:Nge,_getPulse:Cge};function oe(t,e){pn.call(this,t,null,e)}ve(oe,pn,{run(t){if(t.stamp<this.stamp)return t.StopPropagation;let e;return this.skip()?this.skip(!1):e=this.evaluate(t),e=e||t,e.then?e=e.then(n=>this.pulse=n):e!==t.StopPropagation&&(this.pulse=e),e},evaluate(t){const e=this.marshall(t.stamp),n=this.transform(e,t);return e.clear(),n},transform(){}});const Mp={};function aV(t){const e=oV(t);return e&&e.Definition||null}function oV(t){return t=t&&t.toLowerCase(),Le(Mp,t)?Mp[t]:null}function $ge(t){return e=>{const n=t.length;let i=1,s=String(t[0](e));for(;i<n;++i)s+="|"+t[i](e);return s}}function mI(t){return!t||!t.length?function(){return""}:t.length===1?t[0]:$ge(t)}function lV(t,e,n){return n||t+(e?"_"+e:"")}const eB=()=>{},zge={init:eB,add:eB,rem:eB,idx:0},xy={values:{init:t=>t.cell.store=!0,value:t=>t.cell.data.values(),idx:-1},count:{value:t=>t.cell.num},__count__:{value:t=>t.missing+t.valid},missing:{value:t=>t.missing},valid:{value:t=>t.valid},sum:{init:t=>t.sum=0,value:t=>t.sum,add:(t,e)=>t.sum+=+e,rem:(t,e)=>t.sum-=e},product:{init:t=>t.product=1,value:t=>t.valid?t.product:void 0,add:(t,e)=>t.product*=e,rem:(t,e)=>t.product/=e},mean:{init:t=>t.mean=0,value:t=>t.valid?t.mean:void 0,add:(t,e)=>(t.mean_d=e-t.mean,t.mean+=t.mean_d/t.valid),rem:(t,e)=>(t.mean_d=e-t.mean,t.mean-=t.valid?t.mean_d/t.valid:t.mean)},average:{value:t=>t.valid?t.mean:void 0,req:["mean"],idx:1},variance:{init:t=>t.dev=0,value:t=>t.valid>1?t.dev/(t.valid-1):void 0,add:(t,e)=>t.dev+=t.mean_d*(e-t.mean),rem:(t,e)=>t.dev-=t.mean_d*(e-t.mean),req:["mean"],idx:1},variancep:{value:t=>t.valid>1?t.dev/t.valid:void 0,req:["variance"],idx:2},stdev:{value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:t=>t.valid>1?Math.sqrt(t.dev/t.valid):void 0,req:["variance"],idx:2},stderr:{value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid*(t.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:t=>t.cell.data.distinct(t.get),req:["values"],idx:3},ci0:{value:t=>t.cell.data.ci0(t.get),req:["values"],idx:3},ci1:{value:t=>t.cell.data.ci1(t.get),req:["values"],idx:3},median:{value:t=>t.cell.data.q2(t.get),req:["values"],idx:3},q1:{value:t=>t.cell.data.q1(t.get),req:["values"],idx:3},q3:{value:t=>t.cell.data.q3(t.get),req:["values"],idx:3},min:{init:t=>t.min=void 0,value:t=>t.min=Number.isNaN(t.min)?t.cell.data.min(t.get):t.min,add:(t,e)=>{(e<t.min||t.min===void 0)&&(t.min=e)},rem:(t,e)=>{e<=t.min&&(t.min=NaN)},req:["values"],idx:4},max:{init:t=>t.max=void 0,value:t=>t.max=Number.isNaN(t.max)?t.cell.data.max(t.get):t.max,add:(t,e)=>{(e>t.max||t.max===void 0)&&(t.max=e)},rem:(t,e)=>{e>=t.max&&(t.max=NaN)},req:["values"],idx:4},argmin:{init:t=>t.argmin=void 0,value:t=>t.argmin||t.cell.data.argmin(t.get),add:(t,e,n)=>{e<t.min&&(t.argmin=n)},rem:(t,e)=>{e<=t.min&&(t.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:t=>t.argmax=void 0,value:t=>t.argmax||t.cell.data.argmax(t.get),add:(t,e,n)=>{e>t.max&&(t.argmax=n)},rem:(t,e)=>{e>=t.max&&(t.argmax=void 0)},req:["max","values"],idx:3}},Bm=Object.keys(xy);function qge(t,e){return n=>mt({name:t,out:n||t},zge,e)}Bm.forEach(t=>{xy[t]=qge(t,xy[t])});function cV(t,e){return xy[t](e)}function dV(t,e){return t.idx-e.idx}function Gge(t){const e={};t.forEach(i=>e[i.name]=i);const n=i=>{!i.req||i.req.forEach(s=>{e[s]||n(e[s]=xy[s]())})};return t.forEach(n),Object.values(e).sort(dV)}function Vge(){this.valid=0,this.missing=0,this._ops.forEach(t=>t.init(this))}function Wge(t,e){if(t==null||t===""){++this.missing;return}t===t&&(++this.valid,this._ops.forEach(n=>n.add(this,t,e)))}function Hge(t,e){if(t==null||t===""){--this.missing;return}t===t&&(--this.valid,this._ops.forEach(n=>n.rem(this,t,e)))}function Yge(t){return this._out.forEach(e=>t[e.out]=e.value(this)),t}function fV(t,e){const n=e||Xi,i=Gge(t),s=t.slice().sort(dV);function o(c){this._ops=i,this._out=s,this.cell=c,this.init()}return o.prototype.init=Vge,o.prototype.add=Wge,o.prototype.rem=Hge,o.prototype.set=Yge,o.prototype.get=n,o.fields=t.map(c=>c.out),o}function rA(t){this._key=t?Vs(t):De,this.reset()}const Ii=rA.prototype;Ii.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Ii.add=function(t){this._add.push(t)};Ii.rem=function(t){this._rem.push(t)};Ii.values=function(){if(this._get=null,this._rem.length===0)return this._add;const t=this._add,e=this._rem,n=this._key,i=t.length,s=e.length,o=Array(i-s),c={};let d,f,u;for(d=0;d<s;++d)c[n(e[d])]=1;for(d=0,f=0;d<i;++d)c[n(u=t[d])]?c[n(u)]=0:o[f++]=u;return this._rem=[],this._add=o};Ii.distinct=function(t){const e=this.values(),n={};let i=e.length,s=0,o;for(;--i>=0;)o=t(e[i])+"",Le(n,o)||(n[o]=1,++s);return s};Ii.extent=function(t){if(this._get!==t||!this._ext){const e=this.values(),n=uG(e,t);this._ext=[e[n[0]],e[n[1]]],this._get=t}return this._ext};Ii.argmin=function(t){return this.extent(t)[0]||{}};Ii.argmax=function(t){return this.extent(t)[1]||{}};Ii.min=function(t){const e=this.extent(t)[0];return e!=null?t(e):void 0};Ii.max=function(t){const e=this.extent(t)[1];return e!=null?t(e):void 0};Ii.quartile=function(t){return(this._get!==t||!this._q)&&(this._q=iO(this.values(),t),this._get=t),this._q};Ii.q1=function(t){return this.quartile(t)[0]};Ii.q2=function(t){return this.quartile(t)[1]};Ii.q3=function(t){return this.quartile(t)[2]};Ii.ci=function(t){return(this._get!==t||!this._ci)&&(this._ci=Bz(this.values(),1e3,.05,t),this._get=t),this._ci};Ii.ci0=function(t){return this.ci(t)[0]};Ii.ci1=function(t){return this.ci(t)[1]};function hd(t){oe.call(this,null,t),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}hd.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Bm},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};ve(hd,oe,{transform(t,e){const n=this,i=e.fork(e.NO_SOURCE|e.NO_FIELDS),s=t.modified();return n.stamp=i.stamp,n.value&&(s||e.modified(n._inputs,!0))?(n._prev=n.value,n.value=s?n.init(t):{},e.visit(e.SOURCE,o=>n.add(o))):(n.value=n.value||n.init(t),e.visit(e.REM,o=>n.rem(o)),e.visit(e.ADD,o=>n.add(o))),i.modifies(n._outputs),n._drop=t.drop!==!1,t.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),e.clean()&&n._drop&&i.clean(!0).runAfter(()=>this.clean()),n.changes(i)},cross(){const t=this,e=t.value,n=t._dnames,i=n.map(()=>({})),s=n.length;function o(d){let f,u,a,_;for(f in d)for(a=d[f].tuple,u=0;u<s;++u)i[u][_=a[n[u]]]=_}o(t._prev),o(e);function c(d,f,u){const a=n[u],_=i[u++];for(const w in _){const m=d?d+"|"+w:w;f[a]=_[w],u<s?c(m,f,u):e[m]||t.cell(m,f)}}c("",{},0)},init(t){const e=this._inputs=[],n=this._outputs=[],i={};function s(b){const S=Ie(qi(b)),x=S.length;let B=0,F;for(;B<x;++B)i[F=S[B]]||(i[F]=1,e.push(F))}this._dims=Ie(t.groupby),this._dnames=this._dims.map(b=>{const S=Rn(b);return s(b),n.push(S),S}),this.cellkey=t.key?t.key:mI(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const o=t.fields||[null],c=t.ops||["count"],d=t.as||[],f=o.length,u={};let a,_,w,m,l,T;for(f!==c.length&&de("Unmatched number of fields and aggregate ops."),T=0;T<f;++T){if(a=o[T],_=c[T],a==null&&_!=="count"&&de("Null aggregate field specified."),m=Rn(a),l=lV(_,m,d[T]),n.push(l),_==="count"){this._counts.push(l);continue}w=u[m],w||(s(a),w=u[m]=[],w.field=a,this._measures.push(w)),_!=="count"&&(this._countOnly=!1),w.push(cV(_,l))}return this._measures=this._measures.map(b=>fV(b,b.field)),{}},cellkey:mI(),cell(t,e){let n=this.value[t];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[t]=this.newcell(t,e),this._adds[this._alen++]=n),n},newcell(t,e){const n={key:t,num:0,agg:null,tuple:this.newtuple(e,this._prev&&this._prev[t]),stamp:this.stamp,store:!1};if(!this._countOnly){const i=this._measures,s=i.length;n.agg=Array(s);for(let o=0;o<s;++o)n.agg[o]=new i[o](n)}return n.store&&(n.data=new rA),n},newtuple(t,e){const n=this._dnames,i=this._dims,s=i.length,o={};for(let c=0;c<s;++c)o[n[c]]=i[c](t);return e?nV(e.tuple,o):Kt(o)},clean(){const t=this.value;for(const e in t)t[e].num===0&&delete t[e]},add(t){const e=this.cellkey(t),n=this.cell(e,t);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(t);const i=n.agg;for(let s=0,o=i.length;s<o;++s)i[s].add(i[s].get(t),t)},rem(t){const e=this.cellkey(t),n=this.cell(e,t);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(t);const i=n.agg;for(let s=0,o=i.length;s<o;++s)i[s].rem(i[s].get(t),t)},celltuple(t){const e=t.tuple,n=this._counts;t.store&&t.data.values();for(let i=0,s=n.length;i<s;++i)e[n[i]]=t.num;if(!this._countOnly){const i=t.agg;for(let s=0,o=i.length;s<o;++s)i[s].set(e)}return e},changes(t){const e=this._adds,n=this._mods,i=this._prev,s=this._drop,o=t.add,c=t.rem,d=t.mod;let f,u,a,_;if(i)for(u in i)f=i[u],(!s||f.num)&&c.push(f.tuple);for(a=0,_=this._alen;a<_;++a)o.push(this.celltuple(e[a])),e[a]=null;for(a=0,_=this._mlen;a<_;++a)f=n[a],(f.num===0&&s?c:d).push(this.celltuple(f)),n[a]=null;return this._alen=this._mlen=0,this._prev=null,t}});const Xge=1e-14;function aA(t){oe.call(this,null,t)}aA.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};ve(aA,oe,{transform(t,e){const n=t.interval!==!1,i=this._bins(t),s=i.start,o=i.step,c=t.as||["bin0","bin1"],d=c[0],f=c[1];let u;return t.modified()?(e=e.reflow(!0),u=e.SOURCE):u=e.modified(qi(t.field))?e.ADD_MOD:e.ADD,e.visit(u,n?a=>{const _=i(a);a[d]=_,a[f]=_==null?null:s+o*(1+(_-s)/o)}:a=>a[d]=i(a)),e.modifies(n?c:d)},_bins(t){if(this.value&&!t.modified())return this.value;const e=t.field,n=rO(t),i=n.step;let s=n.start,o=s+Math.ceil((n.stop-s)/i)*i,c,d;(c=t.anchor)!=null&&(d=c-(s+i*Math.floor((c-s)/i)),s+=d,o+=d);const f=function(u){let a=Ui(e(u));return a==null?null:a<s?-1/0:a>o?1/0:(a=Math.max(s,Math.min(a,o-i)),s+i*Math.floor(Xge+(a-s)/i))};return f.start=s,f.stop=n.stop,f.step=i,this.value=Zs(f,qi(e),t.name||"bin_"+Rn(e))}});function uV(t,e,n){const i=t;let s=e||[],o=n||[],c={},d=0;return{add:f=>o.push(f),remove:f=>c[i(f)]=++d,size:()=>s.length,data:(f,u)=>(d&&(s=s.filter(a=>!c[i(a)]),c={},d=0),u&&f&&s.sort(f),o.length&&(s=f?mG(f,s,o.sort(f)):s.concat(o),o=[]),s)}}function oA(t){oe.call(this,[],t)}oA.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};ve(oA,oe,{transform(t,e){const n=e.fork(e.ALL),i=uV(De,this.value,n.materialize(n.ADD).add),s=t.sort,o=e.changed()||s&&(t.modified("sort")||e.modified(s.fields));return n.visit(n.REM,i.remove),this.modified(o),this.value=n.source=i.data(Uu(s),o),e.source&&e.source.root&&(this.value.root=e.source.root),n}});function hV(t){pn.call(this,null,Kge,t)}ve(hV,pn);function Kge(t){return this.value&&!t.modified()?this.value:qM(t.fields,t.orders)}function lA(t){oe.call(this,null,t)}lA.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function Jge(t,e,n){switch(e){case"upper":t=t.toUpperCase();break;case"lower":t=t.toLowerCase();break}return t.match(n)}ve(lA,oe,{transform(t,e){const n=_=>w=>{for(var m=Jge(d(w),t.case,o)||[],l,T=0,b=m.length;T<b;++T)c.test(l=m[T])||_(l)},i=this._parameterCheck(t,e),s=this._counts,o=this._match,c=this._stop,d=t.field,f=t.as||["text","count"],u=n(_=>s[_]=1+(s[_]||0)),a=n(_=>s[_]-=1);return i?e.visit(e.SOURCE,u):(e.visit(e.ADD,u),e.visit(e.REM,a)),this._finish(e,f)},_parameterCheck(t,e){let n=!1;return(t.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(t.stopwords||"")+"$","i"),n=!0),(t.modified("pattern")||!this._match)&&(this._match=new RegExp(t.pattern||"[\\w']+","g"),n=!0),(t.modified("field")||e.modified(t.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(t,e){const n=this._counts,i=this._tuples||(this._tuples={}),s=e[0],o=e[1],c=t.fork(t.NO_SOURCE|t.NO_FIELDS);let d,f,u;for(d in n)f=i[d],u=n[d]||0,!f&&u?(i[d]=f=Kt({}),f[s]=d,f[o]=u,c.add.push(f)):u===0?(f&&c.rem.push(f),n[d]=null,i[d]=null):f[o]!==u&&(f[o]=u,c.mod.push(f));return c.modifies(e)}});function cA(t){oe.call(this,null,t)}cA.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};ve(cA,oe,{transform(t,e){const n=e.fork(e.NO_SOURCE),i=t.as||["a","b"],s=i[0],o=i[1],c=!this.value||e.changed(e.ADD_REM)||t.modified("as")||t.modified("filter");let d=this.value;return c?(d&&(n.rem=d),d=e.materialize(e.SOURCE).source,n.add=this.value=Qge(d,s,o,t.filter||Xr)):n.mod=d,n.source=this.value,n.modifies(i)}});function Qge(t,e,n,i){for(var s=[],o={},c=t.length,d=0,f,u;d<c;++d)for(o[e]=u=t[d],f=0;f<c;++f)o[n]=t[f],i(o)&&(s.push(Kt(o)),o={},o[e]=u);return s}const b4={kde:lO,mixture:Oz,normal:oO,lognormal:Fz,uniform:Mz},Zge="distributions",T4="function",e_e="field";function pV(t,e){const n=t[T4];Le(b4,n)||de("Unknown distribution function: "+n);const i=b4[n]();for(const s in t)s===e_e?i.data((t.from||e()).map(t[s])):s===Zge?i[s](t[s].map(o=>pV(o,e))):typeof i[s]===T4&&i[s](t[s]);return i}function dA(t){oe.call(this,null,t)}const gV=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],t_e={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:gV},{name:"weights",type:"number",array:!0}]};dA.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:gV.concat(t_e)},{name:"as",type:"string",array:!0,default:["value","density"]}]};ve(dA,oe,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const i=pV(t.distribution,n_e(e)),s=t.steps||t.minsteps||25,o=t.steps||t.maxsteps||200;let c=t.method||"pdf";c!=="pdf"&&c!=="cdf"&&de("Invalid density method: "+c),!t.extent&&!i.data&&de("Missing density extent parameter."),c=i[c];const d=t.as||["value","density"],f=t.extent||Wo(i.data()),u=J1(c,f,s,o).map(a=>{const _={};return _[d[0]]=a[0],_[d[1]]=a[1],Kt(_)});this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function n_e(t){return()=>t.materialize(t.SOURCE).source}function _V(t,e){return t?t.map((n,i)=>e[i]||Rn(n)):null}function fA(t,e,n){const i=[],s=_=>_(f);let o,c,d,f,u,a;if(e==null)i.push(t.map(n));else for(o={},c=0,d=t.length;c<d;++c)f=t[c],u=e.map(s),a=o[u],a||(o[u]=a=[],a.dims=u,i.push(a)),a.push(n(f));return i}const yV="bin";function uA(t){oe.call(this,null,t)}uA.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:yV}]};const i_e=(t,e)=>xm(Wo(t,e))/30;ve(uA,oe,{transform(t,e){if(this.value&&!(t.modified()||e.changed()))return e;const n=e.materialize(e.SOURCE).source,i=fA(e.source,t.groupby,Xi),s=t.smooth||!1,o=t.field,c=t.step||i_e(n,o),d=Uu((l,T)=>o(l)-o(T)),f=t.as||yV,u=i.length;let a=1/0,_=-1/0,w=0,m;for(;w<u;++w){const l=i[w].sort(d);m=-1;for(const T of kz(l,c,s,o))T<a&&(a=T),T>_&&(_=T),l[++m][f]=T}return this.value={start:a,stop:_,step:c},e.reflow(!0).modifies(f)}});function mV(t){pn.call(this,null,s_e,t),this.modified(!0)}ve(mV,pn);function s_e(t){const e=t.expr;return this.value&&!t.modified("expr")?this.value:Zs(n=>e(n,t),qi(e),Rn(e))}function hA(t){oe.call(this,[void 0,void 0],t)}hA.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};ve(hA,oe,{transform(t,e){const n=this.value,i=t.field,s=e.changed()||e.modified(i.fields)||t.modified("field");let o=n[0],c=n[1];if((s||o==null)&&(o=1/0,c=-1/0),e.visit(s?e.SOURCE:e.ADD,d=>{const f=Ui(i(d));f!=null&&(f<o&&(o=f),f>c&&(c=f))}),!Number.isFinite(o)||!Number.isFinite(c)){let d=Rn(i);d&&(d=' for field "'.concat(d,'"')),e.dataflow.warn("Infinite extent".concat(d,": [").concat(o,", ").concat(c,"]")),o=c=void 0}this.value=[o,c]}});function pA(t,e){pn.call(this,t),this.parent=e,this.count=0}ve(pA,pn,{connect(t){return this.detachSubflow=t.detachSubflow,this.targets().add(t),t.source=this},add(t){this.count+=1,this.value.add.push(t)},rem(t){this.count-=1,this.value.rem.push(t)},mod(t){this.value.mod.push(t)},init(t){this.value.init(t,t.NO_SOURCE)},evaluate(){return this.value}});function NE(t){oe.call(this,{},t),this._keys=gg();const e=this._targets=[];e.active=0,e.forEach=n=>{for(let i=0,s=e.active;i<s;++i)n(e[i],i,e)}}ve(NE,oe,{activate(t){this._targets[this._targets.active++]=t},subflow(t,e,n,i){const s=this.value;let o=Le(s,t)&&s[t],c,d;return o?o.value.stamp<n.stamp&&(o.init(n),this.activate(o)):(d=i||(d=this._group[t])&&d.tuple,c=n.dataflow,o=new pA(n.fork(n.NO_SOURCE),this),c.add(o).connect(e(c,t,d)),s[t]=o,this.activate(o)),o},clean(){const t=this.value;let e=0;for(const n in t)if(t[n].count===0){const i=t[n].detachSubflow;i&&i(),delete t[n],++e}if(e){const n=this._targets.filter(i=>i&&i.count>0);this.initTargets(n)}},initTargets(t){const e=this._targets,n=e.length,i=t?t.length:0;let s=0;for(;s<i;++s)e[s]=t[s];for(;s<n&&e[s]!=null;++s)e[s]=null;e.active=i},transform(t,e){const n=e.dataflow,i=t.key,s=t.subflow,o=this._keys,c=t.modified("key"),d=f=>this.subflow(f,s,e);return this._group=t.group||{},this.initTargets(),e.visit(e.REM,f=>{const u=De(f),a=o.get(u);a!==void 0&&(o.delete(u),d(a).rem(f))}),e.visit(e.ADD,f=>{const u=i(f);o.set(De(f),u),d(u).add(f)}),c||e.modified(i.fields)?e.visit(e.MOD,f=>{const u=De(f),a=o.get(u),_=i(f);a===_?d(_).mod(f):(o.set(u,_),d(a).rem(f),d(_).add(f))}):e.changed(e.MOD)&&e.visit(e.MOD,f=>{d(o.get(De(f))).mod(f)}),c&&e.visit(e.REFLOW,f=>{const u=De(f),a=o.get(u),_=i(f);a!==_&&(o.set(u,_),d(a).rem(f),d(_).add(f))}),e.clean()?n.runAfter(()=>{this.clean(),o.clean()}):o.empty>n.cleanThreshold&&n.runAfter(o.clean),e}});function wV(t){pn.call(this,null,r_e,t)}ve(wV,pn);function r_e(t){return this.value&&!t.modified()?this.value:he(t.name)?Ie(t.name).map(e=>Vs(e)):Vs(t.name,t.as)}function gA(t){oe.call(this,gg(),t)}gA.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};ve(gA,oe,{transform(t,e){const n=e.dataflow,i=this.value,s=e.fork(),o=s.add,c=s.rem,d=s.mod,f=t.expr;let u=!0;e.visit(e.REM,_=>{const w=De(_);i.has(w)?i.delete(w):c.push(_)}),e.visit(e.ADD,_=>{f(_,t)?o.push(_):i.set(De(_),1)});function a(_){const w=De(_),m=f(_,t),l=i.get(w);m&&l?(i.delete(w),o.push(_)):!m&&!l?(i.set(w,1),c.push(_)):u&&m&&!l&&d.push(_)}return e.visit(e.MOD,a),t.modified()&&(u=!1,e.visit(e.REFLOW,a)),i.empty>n.cleanThreshold&&n.runAfter(i.clean),s}});function _A(t){oe.call(this,[],t)}_A.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};ve(_A,oe,{transform(t,e){const n=e.fork(e.NO_SOURCE),i=t.fields,s=_V(i,t.as||[]),o=t.index||null,c=s.length;return n.rem=this.value,e.visit(e.SOURCE,d=>{const f=i.map(l=>l(d)),u=f.reduce((l,T)=>Math.max(l,T.length),0);let a=0,_,w,m;for(;a<u;++a){for(w=nA(d),_=0;_<c;++_)w[s[_]]=(m=f[_][a])==null?null:m;o&&(w[o]=a),n.add.push(w)}}),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(s)}});function yA(t){oe.call(this,[],t)}yA.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};ve(yA,oe,{transform(t,e){const n=e.fork(e.NO_SOURCE),i=t.fields,s=i.map(Rn),o=t.as||["key","value"],c=o[0],d=o[1],f=i.length;return n.rem=this.value,e.visit(e.SOURCE,u=>{for(let a=0,_;a<f;++a)_=nA(u),_[c]=s[a],_[d]=i[a](u),n.add.push(_)}),this.value=n.source=n.add,n.modifies(o)}});function mA(t){oe.call(this,null,t)}mA.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};ve(mA,oe,{transform(t,e){const n=t.expr,i=t.as,s=t.modified(),o=t.initonly?e.ADD:s?e.SOURCE:e.modified(n.fields)||e.modified(i)?e.ADD_MOD:e.ADD;return s&&(e=e.materialize().reflow(!0)),t.initonly||e.modifies(i),e.visit(o,c=>c[i]=n(c,t))}});function bV(t){oe.call(this,[],t)}ve(bV,oe,{transform(t,e){const n=e.fork(e.ALL),i=t.generator;let s=this.value,o=t.size-s.length,c,d,f;if(o>0){for(c=[];--o>=0;)c.push(f=Kt(i(t))),s.push(f);n.add=n.add.length?n.materialize(n.ADD).add.concat(c):c}else d=s.slice(0,-o),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(d):d,s=s.slice(-o);return n.source=this.value=s,n}});const Gb={value:"value",median:vz,mean:Fie,min:hk,max:Uf},a_e=[];function wA(t){oe.call(this,[],t)}wA.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function o_e(t){var e=t.method||Gb.value,n;if(Gb[e]==null)de("Unrecognized imputation method: "+e);else return e===Gb.value?(n=t.value!==void 0?t.value:0,()=>n):Gb[e]}function l_e(t){const e=t.field;return n=>n?e(n):NaN}ve(wA,oe,{transform(t,e){var n=e.fork(e.ALL),i=o_e(t),s=l_e(t),o=Rn(t.field),c=Rn(t.key),d=(t.groupby||[]).map(Rn),f=c_e(e.source,t.groupby,t.key,t.keyvals),u=[],a=this.value,_=f.domain.length,w,m,l,T,b,S,x,B,F,k;for(b=0,B=f.length;b<B;++b)for(w=f[b],l=w.values,m=NaN,x=0;x<_;++x)if(w[x]==null){for(T=f.domain[x],k={_impute:!0},S=0,F=l.length;S<F;++S)k[d[S]]=l[S];k[c]=T,k[o]=Number.isNaN(m)?m=i(w,s):m,u.push(Kt(k))}return u.length&&(n.add=n.materialize(n.ADD).add.concat(u)),a.length&&(n.rem=n.materialize(n.REM).rem.concat(a)),this.value=u,n}});function c_e(t,e,n,i){var s=S=>S(b),o=[],c=i?i.slice():[],d={},f={},u,a,_,w,m,l,T,b;for(c.forEach((S,x)=>d[S]=x+1),w=0,T=t.length;w<T;++w)b=t[w],l=n(b),m=d[l]||(d[l]=c.push(l)),a=(u=e?e.map(s):a_e)+"",(_=f[a])||(_=f[a]=[],o.push(_),_.values=u),_[m-1]=b;return o.domain=c,o}function bA(t){hd.call(this,t)}bA.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Bm},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};ve(bA,hd,{transform(t,e){const n=this,i=t.modified();let s;return n.value&&(i||e.modified(n._inputs,!0))?(s=n.value=i?n.init(t):{},e.visit(e.SOURCE,o=>n.add(o))):(s=n.value=n.value||this.init(t),e.visit(e.REM,o=>n.rem(o)),e.visit(e.ADD,o=>n.add(o))),n.changes(),e.visit(e.SOURCE,o=>{mt(o,s[n.cellkey(o)].tuple)}),e.reflow(i).modifies(this._outputs)},changes(){const t=this._adds,e=this._mods;let n,i;for(n=0,i=this._alen;n<i;++n)this.celltuple(t[n]),t[n]=null;for(n=0,i=this._mlen;n<i;++n)this.celltuple(e[n]),e[n]=null;this._alen=this._mlen=0}});function TA(t){oe.call(this,null,t)}TA.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};ve(TA,oe,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const i=e.materialize(e.SOURCE).source,s=fA(i,t.groupby,t.field),o=(t.groupby||[]).map(Rn),c=t.bandwidth,d=t.cumulative?"cdf":"pdf",f=t.as||["value","density"],u=[];let a=t.extent,_=t.steps||t.minsteps||25,w=t.steps||t.maxsteps||200;d!=="pdf"&&d!=="cdf"&&de("Invalid density method: "+d),t.resolve==="shared"&&(a||(a=Wo(i,t.field)),_=w=t.steps||w),s.forEach(m=>{const l=lO(m,c)[d],T=t.counts?m.length:1,b=a||Wo(m);J1(l,b,_,w).forEach(S=>{const x={};for(let B=0;B<o.length;++B)x[o[B]]=m.dims[B];x[f[0]]=S[0],x[f[1]]=S[1]*T,u.push(Kt(x))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function TV(t){pn.call(this,null,d_e,t)}ve(TV,pn);function d_e(t){return this.value&&!t.modified()?this.value:VM(t.fields,t.flat)}function vV(t){oe.call(this,[],t),this._pending=null}ve(vV,oe,{transform(t,e){const n=e.dataflow;return this._pending?tB(this,e,this._pending):f_e(t)?e.StopPropagation:t.values?tB(this,e,n.parse(t.values,t.format)):t.async?{async:n.request(t.url,t.format).then(s=>(this._pending=Ie(s.data),o=>o.touch(this)))}:n.request(t.url,t.format).then(i=>tB(this,e,Ie(i.data)))}});function f_e(t){return t.modified("async")&&!(t.modified("values")||t.modified("url")||t.modified("format"))}function tB(t,e,n){n.forEach(Kt);const i=e.fork(e.NO_FIELDS&e.NO_SOURCE);return i.rem=t.value,t.value=i.source=i.add=n,t._pending=null,i.rem.length&&i.clean(!0),i}function vA(t){oe.call(this,{},t)}vA.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};ve(vA,oe,{transform(t,e){const n=t.fields,i=t.index,s=t.values,o=t.default==null?null:t.default,c=t.modified(),d=n.length;let f=c?e.SOURCE:e.ADD,u=e,a=t.as,_,w,m;return s?(w=s.length,d>1&&!a&&de('Multi-field lookup requires explicit "as" parameter.'),a&&a.length!==d*w&&de('The "as" parameter has too few output field names.'),a=a||s.map(Rn),_=function(l){for(var T=0,b=0,S,x;T<d;++T)if(x=i.get(n[T](l)),x==null)for(S=0;S<w;++S,++b)l[a[b]]=o;else for(S=0;S<w;++S,++b)l[a[b]]=s[S](x)}):(a||de("Missing output field names."),_=function(l){for(var T=0,b;T<d;++T)b=i.get(n[T](l)),l[a[T]]=b==null?o:b}),c?u=e.reflow(!0):(m=n.some(l=>e.modified(l.fields)),f|=m?e.MOD:0),e.visit(f,_),u.modifies(a)}});function EV(t){pn.call(this,null,u_e,t)}ve(EV,pn);function u_e(t){if(this.value&&!t.modified())return this.value;const e=t.extents,n=e.length;let i=1/0,s=-1/0,o,c;for(o=0;o<n;++o)c=e[o],c[0]<i&&(i=c[0]),c[1]>s&&(s=c[1]);return[i,s]}function SV(t){pn.call(this,null,h_e,t)}ve(SV,pn);function h_e(t){return this.value&&!t.modified()?this.value:t.values.reduce((e,n)=>e.concat(n),[])}function xV(t){oe.call(this,null,t)}ve(xV,oe,{transform(t,e){return this.modified(t.modified()),this.value=t,e.fork(e.NO_SOURCE|e.NO_FIELDS)}});function EA(t){hd.call(this,t)}EA.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Bm,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};ve(EA,hd,{_transform:hd.prototype.transform,transform(t,e){return this._transform(p_e(t,e),e)}});function p_e(t,e){const n=t.field,i=t.value,s=(t.op==="count"?"__count__":t.op)||"sum",o=qi(n).concat(qi(i)),c=__e(n,t.limit||0,e);return e.changed()&&t.set("__pivot__",null,null,!0),{key:t.key,groupby:t.groupby,ops:c.map(()=>s),fields:c.map(d=>g_e(d,n,i,o)),as:c.map(d=>d+""),modified:t.modified.bind(t)}}function g_e(t,e,n,i){return Zs(s=>e(s)===t?n(s):NaN,i,t+"")}function __e(t,e,n){const i={},s=[];return n.visit(n.SOURCE,o=>{const c=t(o);i[c]||(i[c]=1,s.push(c))}),s.sort(xE),e?s.slice(0,e):s}function BV(t){NE.call(this,t)}ve(BV,NE,{transform(t,e){const n=t.subflow,i=t.field,s=o=>this.subflow(De(o),n,e,o);return(t.modified("field")||i&&e.modified(qi(i)))&&de("PreFacet does not support field modification."),this.initTargets(),i?(e.visit(e.MOD,o=>{const c=s(o);i(o).forEach(d=>c.mod(d))}),e.visit(e.ADD,o=>{const c=s(o);i(o).forEach(d=>c.add(Kt(d)))}),e.visit(e.REM,o=>{const c=s(o);i(o).forEach(d=>c.rem(d))})):(e.visit(e.MOD,o=>s(o).mod(o)),e.visit(e.ADD,o=>s(o).add(o)),e.visit(e.REM,o=>s(o).rem(o))),e.clean()&&e.runAfter(()=>this.clean()),e}});function SA(t){oe.call(this,null,t)}SA.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};ve(SA,oe,{transform(t,e){const n=e.fork(e.NO_SOURCE),i=t.fields,s=_V(t.fields,t.as||[]),o=i?(d,f)=>y_e(d,f,i,s):OE;let c;return this.value?c=this.value:(e=e.addAll(),c=this.value={}),e.visit(e.REM,d=>{const f=De(d);n.rem.push(c[f]),c[f]=null}),e.visit(e.ADD,d=>{const f=o(d,Kt({}));c[De(d)]=f,n.add.push(f)}),e.visit(e.MOD,d=>{n.mod.push(o(d,c[De(d)]))}),n}});function y_e(t,e,n,i){for(let s=0,o=n.length;s<o;++s)e[i[s]]=n[s](t);return e}function kV(t){oe.call(this,null,t)}ve(kV,oe,{transform(t,e){return this.value=t.value,t.modified("value")?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation}});function xA(t){oe.call(this,null,t)}xA.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const m_e=1e-14;ve(xA,oe,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=t.as||["prob","value"];if(this.value&&!t.modified()&&!e.changed())return n.source=this.value,n;const s=e.materialize(e.SOURCE).source,o=fA(s,t.groupby,t.field),c=(t.groupby||[]).map(Rn),d=[],f=t.step||.01,u=t.probs||hr(f/2,1-m_e,f),a=u.length;return o.forEach(_=>{const w=nO(_,u);for(let m=0;m<a;++m){const l={};for(let T=0;T<c.length;++T)l[c[T]]=_.dims[T];l[i[0]]=u[m],l[i[1]]=w[m],d.push(Kt(l))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=d,n}});function IV(t){oe.call(this,null,t)}ve(IV,oe,{transform(t,e){let n,i;return this.value?i=this.value:(n=e=e.addAll(),i=this.value={}),t.derive&&(n=e.fork(e.NO_SOURCE),e.visit(e.REM,s=>{const o=De(s);n.rem.push(i[o]),i[o]=null}),e.visit(e.ADD,s=>{const o=nA(s);i[De(s)]=o,n.add.push(o)}),e.visit(e.MOD,s=>{const o=i[De(s)];for(const c in s)o[c]=s[c],n.modifies(c);n.mod.push(o)})),n}});function BA(t){oe.call(this,[],t),this.count=0}BA.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};ve(BA,oe,{transform(t,e){const n=e.fork(e.NO_SOURCE),i=t.modified("size"),s=t.size,o=this.value.reduce((a,_)=>(a[De(_)]=1,a),{});let c=this.value,d=this.count,f=0;function u(a){let _,w;c.length<s?c.push(a):(w=~~((d+1)*Wr()),w<c.length&&w>=f&&(_=c[w],o[De(_)]&&n.rem.push(_),c[w]=a)),++d}if(e.rem.length&&(e.visit(e.REM,a=>{const _=De(a);o[_]&&(o[_]=-1,n.rem.push(a)),--d}),c=c.filter(a=>o[De(a)]!==-1)),(e.rem.length||i)&&c.length<s&&e.source&&(f=d=c.length,e.visit(e.SOURCE,a=>{o[De(a)]||u(a)}),f=-1),i&&c.length>s){const a=c.length-s;for(let _=0;_<a;++_)o[De(c[_])]=-1,n.rem.push(c[_]);c=c.slice(a)}return e.mod.length&&e.visit(e.MOD,a=>{o[De(a)]&&n.mod.push(a)}),e.add.length&&e.visit(e.ADD,u),(e.add.length||f<0)&&(n.add=c.filter(a=>!o[De(a)])),this.count=d,this.value=n.source=c,n}});function kA(t){oe.call(this,null,t)}kA.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};ve(kA,oe,{transform(t,e){if(this.value&&!t.modified())return;const n=e.materialize().fork(e.MOD),i=t.as||"data";return n.rem=this.value?e.rem.concat(this.value):e.rem,this.value=hr(t.start,t.stop,t.step||1).map(s=>{const o={};return o[i]=s,Kt(o)}),n.add=e.add.concat(this.value),n}});function FV(t){oe.call(this,null,t),this.modified(!0)}ve(FV,oe,{transform(t,e){return this.value=e.source,e.changed()?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation}});function IA(t){oe.call(this,null,t)}const OV=["unit0","unit1"];IA.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:XM,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:OV}]};ve(IA,oe,{transform(t,e){const n=t.field,i=t.interval!==!1,s=t.timezone==="utc",o=this._floor(t,e),c=(s?yg:_g)(o.unit).offset,d=t.as||OV,f=d[0],u=d[1],a=o.step;let _=o.start||1/0,w=o.stop||-1/0,m=e.ADD;return(t.modified()||e.changed(e.REM)||e.modified(qi(n)))&&(e=e.reflow(!0),m=e.SOURCE,_=1/0,w=-1/0),e.visit(m,l=>{const T=n(l);let b,S;T==null?(l[f]=null,i&&(l[u]=null)):(l[f]=b=S=o(T),i&&(l[u]=S=c(b,a)),b<_&&(_=b),S>w&&(w=S))}),o.start=_,o.stop=w,e.modifies(i?d:f)},_floor(t,e){const n=t.timezone==="utc",{units:i,step:s}=t.units?{units:t.units,step:t.step||1}:UG({extent:t.extent||Wo(e.materialize(e.SOURCE).source,t.field),maxbins:t.maxbins}),o=KM(i),c=this.value||{},d=(n?MG:OG)(o,s);return d.unit=Lt(o),d.units=o,d.step=s,d.start=c.start,d.stop=c.stop,this.value=d}});function MV(t){oe.call(this,gg(),t)}ve(MV,oe,{transform(t,e){const n=e.dataflow,i=t.field,s=this.value,o=d=>s.set(i(d),d);let c=!0;return t.modified("field")||e.modified(i.fields)?(s.clear(),e.visit(e.SOURCE,o)):e.changed()?(e.visit(e.REM,d=>s.delete(i(d))),e.visit(e.ADD,o)):c=!1,this.modified(c),s.empty>n.cleanThreshold&&n.runAfter(s.clean),e.fork()}});function AV(t){oe.call(this,null,t)}ve(AV,oe,{transform(t,e){(!this.value||t.modified("field")||t.modified("sort")||e.changed()||t.sort&&e.modified(t.sort.fields))&&(this.value=(t.sort?e.source.slice().sort(Uu(t.sort)):e.source).map(t.field))}});function w_e(t,e,n,i){const s=By[t](e,n);return{init:s.init||Cc,update:function(o,c){c[i]=s.next(o)}}}const By={row_number:function(){return{next:t=>t.index+1}},rank:function(){let t;return{init:()=>t=1,next:e=>{const n=e.index,i=e.data;return n&&e.compare(i[n-1],i[n])?t=n+1:t}}},dense_rank:function(){let t;return{init:()=>t=1,next:e=>{const n=e.index,i=e.data;return n&&e.compare(i[n-1],i[n])?++t:t}}},percent_rank:function(){const t=By.rank(),e=t.next;return{init:t.init,next:n=>(e(n)-1)/(n.data.length-1)}},cume_dist:function(){let t;return{init:()=>t=0,next:e=>{const n=e.data,i=e.compare;let s=e.index;if(t<s){for(;s+1<n.length&&!i(n[s],n[s+1]);)++s;t=s}return(1+t)/n.length}}},ntile:function(t,e){e=+e,e>0||de("ntile num must be greater than zero.");const n=By.cume_dist(),i=n.next;return{init:n.init,next:s=>Math.ceil(e*i(s))}},lag:function(t,e){return e=+e||1,{next:n=>{const i=n.index-e;return i>=0?t(n.data[i]):null}}},lead:function(t,e){return e=+e||1,{next:n=>{const i=n.index+e,s=n.data;return i<s.length?t(s[i]):null}}},first_value:function(t){return{next:e=>t(e.data[e.i0])}},last_value:function(t){return{next:e=>t(e.data[e.i1-1])}},nth_value:function(t,e){return e=+e,e>0||de("nth_value nth must be greater than zero."),{next:n=>{const i=n.i0+(e-1);return i<n.i1?t(n.data[i]):null}}},prev_value:function(t){let e;return{init:()=>e=null,next:n=>{const i=t(n.data[n.index]);return i!=null?e=i:e}}},next_value:function(t){let e,n;return{init:()=>(e=null,n=-1),next:i=>{const s=i.data;return i.index<=n?e:(n=b_e(t,s,i.index))<0?(n=s.length,e=null):e=t(s[n])}}}};function b_e(t,e,n){for(let i=e.length;n<i;++n)if(t(e[n])!=null)return n;return-1}const T_e=Object.keys(By);function NV(t){const e=Ie(t.ops),n=Ie(t.fields),i=Ie(t.params),s=Ie(t.as),o=this.outputs=[],c=this.windows=[],d={},f={},u=[],a=[];let _=!0;function w(m){Ie(qi(m)).forEach(l=>d[l]=1)}w(t.sort),e.forEach((m,l)=>{const T=n[l],b=Rn(T),S=lV(m,b,s[l]);if(w(T),o.push(S),Le(By,m))c.push(w_e(m,n[l],i[l],S));else{if(T==null&&m!=="count"&&de("Null aggregate field specified."),m==="count"){u.push(S);return}_=!1;let x=f[b];x||(x=f[b]=[],x.field=T,a.push(x)),x.push(cV(m,S))}}),(u.length||a.length)&&(this.cell=v_e(a,u,_)),this.inputs=Object.keys(d)}const CV=NV.prototype;CV.init=function(){this.windows.forEach(t=>t.init()),this.cell&&this.cell.init()};CV.update=function(t,e){const n=this.cell,i=this.windows,s=t.data,o=i&&i.length;let c;if(n){for(c=t.p0;c<t.i0;++c)n.rem(s[c]);for(c=t.p1;c<t.i1;++c)n.add(s[c]);n.set(e)}for(c=0;c<o;++c)i[c].update(t,e)};function v_e(t,e,n){t=t.map(f=>fV(f,f.field));const i={num:0,agg:null,store:!1,count:e};if(!n)for(var s=t.length,o=i.agg=Array(s),c=0;c<s;++c)o[c]=new t[c](i);if(i.store)var d=i.data=new rA;return i.add=function(f){if(i.num+=1,!n){d&&d.add(f);for(let u=0;u<s;++u)o[u].add(o[u].get(f),f)}},i.rem=function(f){if(i.num-=1,!n){d&&d.rem(f);for(let u=0;u<s;++u)o[u].rem(o[u].get(f),f)}},i.set=function(f){let u,a;for(d&&d.values(),u=0,a=e.length;u<a;++u)f[e[u]]=i.num;if(!n)for(u=0,a=o.length;u<a;++u)o[u].set(f)},i.init=function(){i.num=0,d&&d.reset();for(let f=0;f<s;++f)o[f].init()},i}function FA(t){oe.call(this,{},t),this._mlen=0,this._mods=[]}FA.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:T_e.concat(Bm)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};ve(FA,oe,{transform(t,e){this.stamp=e.stamp;const n=t.modified(),i=Uu(t.sort),s=mI(t.groupby),o=d=>this.group(s(d));let c=this.state;(!c||n)&&(c=this.state=new NV(t)),n||e.modified(c.inputs)?(this.value={},e.visit(e.SOURCE,d=>o(d).add(d))):(e.visit(e.REM,d=>o(d).remove(d)),e.visit(e.ADD,d=>o(d).add(d)));for(let d=0,f=this._mlen;d<f;++d)E_e(this._mods[d],c,i,t);return this._mlen=0,this._mods=[],e.reflow(n).modifies(c.outputs)},group(t){let e=this.value[t];return e||(e=this.value[t]=uV(De),e.stamp=-1),e.stamp<this.stamp&&(e.stamp=this.stamp,this._mods[this._mlen++]=e),e}});function E_e(t,e,n,i){const s=i.sort,o=s&&!i.ignorePeers,c=i.frame||[null,0],d=t.data(n),f=d.length,u=o?lm(s):null,a={i0:0,i1:0,p0:0,p1:0,index:0,data:d,compare:s||Ki(-1)};e.init();for(let _=0;_<f;++_)S_e(a,c,_,f),o&&x_e(a,u),e.update(a,d[_])}function S_e(t,e,n,i){t.p0=t.i0,t.p1=t.i1,t.i0=e[0]==null?0:Math.max(0,n-Math.abs(e[0])),t.i1=e[1]==null?i:Math.min(i,n+Math.abs(e[1])+1),t.index=n}function x_e(t,e){const n=t.i0,i=t.i1-1,s=t.compare,o=t.data,c=o.length-1;n>0&&!s(o[n],o[n-1])&&(t.i0=e.left(o,o[n])),i<c&&!s(o[i],o[i+1])&&(t.i1=e.right(o,o[i]))}const B_e=Object.freeze(Object.defineProperty({__proto__:null,aggregate:hd,bin:aA,collect:oA,compare:hV,countpattern:lA,cross:cA,density:dA,dotbin:uA,expression:mV,extent:hA,facet:NE,field:wV,filter:gA,flatten:_A,fold:yA,formula:mA,generate:bV,impute:wA,joinaggregate:bA,kde:TA,key:TV,load:vV,lookup:vA,multiextent:EV,multivalues:SV,params:xV,pivot:EA,prefacet:BV,project:SA,proxy:kV,quantile:xA,relay:IV,sample:BA,sequence:kA,sieve:FV,subflow:pA,timeunit:IA,tupleindex:MV,values:AV,window:FA},Symbol.toStringTag,{value:"Module"}));function Xc(t,e){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=t,n.height=e,n}return null}const k_e=()=>typeof Image<"u"?Image:null;function OA(t,e,n){const i=t-e+n*2;return t?i>0?i:1:0}const I_e="identity",Ap="linear",Ql="log",km="pow",Im="sqrt",CE="symlog",lu="time",cu="utc",Oo="sequential",mg="diverging",Np="quantile",RE="quantize",LE="threshold",MA="ordinal",wI="point",RV="band",AA="bin-ordinal",ai="continuous",Fm="discrete",Om="discretizing",ea="interpolating",NA="temporal";function F_e(t){return function(e){let n=e[0],i=e[1],s;return i<n&&(s=n,n=i,i=s),[t.invert(n),t.invert(i)]}}function O_e(t){return function(e){const n=t.range();let i=e[0],s=e[1],o=-1,c,d,f,u;for(s<i&&(d=i,i=s,s=d),f=0,u=n.length;f<u;++f)n[f]>=i&&n[f]<=s&&(o<0&&(o=f),c=f);if(!(o<0))return i=t.invertExtent(n[o]),s=t.invertExtent(n[c]),[i[0]===void 0?i[1]:i[0],s[1]===void 0?s[0]:s[1]]}}function CA(){const t=jO().unknown(void 0),e=t.domain,n=t.range;let i=[0,1],s,o,c=!1,d=0,f=0,u=.5;delete t.unknown;function a(){const _=e().length,w=i[1]<i[0],m=i[1-w],l=OA(_,d,f);let T=i[w-0];s=(m-T)/(l||1),c&&(s=Math.floor(s)),T+=(m-T-s*(_-d))*u,o=s*(1-d),c&&(T=Math.round(T),o=Math.round(o));const b=hr(_).map(S=>T+s*S);return n(w?b.reverse():b)}return t.domain=function(_){return arguments.length?(e(_),a()):e()},t.range=function(_){return arguments.length?(i=[+_[0],+_[1]],a()):i.slice()},t.rangeRound=function(_){return i=[+_[0],+_[1]],c=!0,a()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(_){return arguments.length?(c=!!_,a()):c},t.padding=function(_){return arguments.length?(f=Math.max(0,Math.min(1,_)),d=f,a()):d},t.paddingInner=function(_){return arguments.length?(d=Math.max(0,Math.min(1,_)),a()):d},t.paddingOuter=function(_){return arguments.length?(f=Math.max(0,Math.min(1,_)),a()):f},t.align=function(_){return arguments.length?(u=Math.max(0,Math.min(1,_)),a()):u},t.invertRange=function(_){if(_[0]==null||_[1]==null)return;const w=i[1]<i[0],m=w?n().reverse():n(),l=m.length-1;let T=+_[0],b=+_[1],S,x,B;if(!(T!==T||b!==b)&&(b<T&&(B=T,T=b,b=B),!(b<m[0]||T>i[1-w])))return S=Math.max(0,yT(m,T)-1),x=T===b?S:yT(m,b)-1,T-m[S]>o+1e-10&&++S,w&&(B=S,S=l-x,x=l-B),S>x?void 0:e().slice(S,x+1)},t.invert=function(_){const w=t.invertRange([_,_]);return w&&w[0]},t.copy=function(){return CA().domain(e()).range(i).round(c).paddingInner(d).paddingOuter(f).align(u)},a()}function LV(t){const e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return LV(e())},t}function M_e(){return LV(CA().paddingInner(1))}var A_e=Array.prototype.map;function N_e(t){return A_e.call(t,Ui)}const C_e=Array.prototype.slice;function PV(){let t=[],e=[];function n(i){return i==null||i!==i?void 0:e[(cm(t,i)-1)%e.length]}return n.domain=function(i){return arguments.length?(t=N_e(i),n):t.slice()},n.range=function(i){return arguments.length?(e=C_e.call(i),n):e.slice()},n.tickFormat=function(i,s){return yq(t[0],Lt(t),i==null?10:i,s)},n.copy=function(){return PV().domain(n.domain()).range(n.range())},n}const zv={};function R_e(t,e,n){const i=function(){const o=e();return o.invertRange||(o.invertRange=o.invert?F_e(o):o.invertExtent?O_e(o):void 0),o.type=t,o};return i.metadata=Ra(Ie(n)),i}function Wt(t,e,n){return arguments.length>1?(zv[t]=R_e(t,e,n),this):DV(t)?zv[t]:void 0}Wt(I_e,wq);Wt(Ap,mq,ai);Wt(Ql,Tq,[ai,Ql]);Wt(km,qO,ai);Wt(Im,_le,ai);Wt(CE,vq,ai);Wt(lu,Mce,[ai,NA]);Wt(cu,Ace,[ai,NA]);Wt(Oo,YO,[ai,ea]);Wt("".concat(Oo,"-").concat(Ap),YO,[ai,ea]);Wt("".concat(Oo,"-").concat(Ql),Rq,[ai,ea,Ql]);Wt("".concat(Oo,"-").concat(km),XO,[ai,ea]);Wt("".concat(Oo,"-").concat(Im),Nce,[ai,ea]);Wt("".concat(Oo,"-").concat(CE),Lq,[ai,ea]);Wt("".concat(mg,"-").concat(Ap),Pq,[ai,ea]);Wt("".concat(mg,"-").concat(Ql),Dq,[ai,ea,Ql]);Wt("".concat(mg,"-").concat(km),KO,[ai,ea]);Wt("".concat(mg,"-").concat(Im),Cce,[ai,ea]);Wt("".concat(mg,"-").concat(CE),jq,[ai,ea]);Wt(Np,Eq,[Om,Np]);Wt(RE,Sq,Om);Wt(LE,xq,Om);Wt(AA,PV,[Fm,Om]);Wt(MA,jO,Fm);Wt(RV,CA,Fm);Wt(wI,M_e,Fm);function DV(t){return Le(zv,t)}function zu(t,e){const n=zv[t];return n&&n.metadata[e]}function RA(t){return zu(t,ai)}function Cp(t){return zu(t,Fm)}function bI(t){return zu(t,Om)}function jV(t){return zu(t,Ql)}function L_e(t){return zu(t,NA)}function UV(t){return zu(t,ea)}function $V(t){return zu(t,Np)}const P_e=["clamp","base","constant","exponent"];function zV(t,e){const n=e[0],i=Lt(e)-n;return function(s){return t(n+s*i)}}function PE(t,e,n){return EO(LA(e||"rgb",n),t)}function qV(t,e){const n=new Array(e),i=e+1;for(let s=0;s<e;)n[s]=t(++s/i);return n}function GV(t,e,n){const i=n-e;let s,o,c;return!i||!Number.isFinite(i)?Ki(.5):(s=(o=t.type).indexOf("-"),o=s<0?o:o.slice(s+1),c=Wt(o)().domain([e,n]).range([0,1]),P_e.forEach(d=>t[d]?c[d](t[d]()):0),c)}function LA(t,e){const n=Ase[D_e(t)];return e!=null&&n&&n.gamma?n.gamma(e):n}function D_e(t){return"interpolate"+t.toLowerCase().split("-").map(e=>e[0].toUpperCase()+e.slice(1)).join("")}const j_e={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},U_e={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function VV(t){const e=t.length/6|0,n=new Array(e);for(let i=0;i<e;)n[i]="#"+t.slice(i*6,++i*6);return n}function WV(t,e){for(const n in t)PA(n,e(t[n]))}const v4={};WV(U_e,VV);WV(j_e,t=>PE(VV(t)));function PA(t,e){return t=t&&t.toLowerCase(),arguments.length>1?(v4[t]=e,this):v4[t]}const R0="symbol",$_e="discrete",z_e="gradient",q_e=t=>he(t)?t.map(e=>String(e)):String(t),G_e=(t,e)=>t[1]-e[1],V_e=(t,e)=>e[1]-t[1];function DA(t,e,n){let i;return cn(e)&&(t.bins&&(e=Math.max(e,t.bins.length)),n!=null&&(e=Math.min(e,Math.floor(xm(t.domain())/n||1)))),Fe(e)&&(i=e.step,e=e.interval),ke(e)&&(e=t.type===lu?_g(e):t.type==cu?yg(e):de("Only time and utc scales accept interval strings."),i&&(e=e.every(i))),e}function HV(t,e,n){let i=t.range(),s=i[0],o=Lt(i),c=G_e;if(s>o&&(i=o,o=s,s=i,c=V_e),s=Math.floor(s),o=Math.ceil(o),e=e.map(d=>[d,t(d)]).filter(d=>s<=d[1]&&d[1]<=o).sort(c).map(d=>d[0]),n>0&&e.length>1){const d=[e[0],Lt(e)];for(;e.length>n&&e.length>=3;)e=e.filter((f,u)=>!(u%2));e.length<3&&(e=d)}return e}function jA(t,e){return t.bins?HV(t,t.bins):t.ticks?t.ticks(e):t.domain()}function YV(t,e,n,i,s,o){const c=e.type;let d=q_e;if(c===lu||s===lu)d=t.timeFormat(i);else if(c===cu||s===cu)d=t.utcFormat(i);else if(jV(c)){const f=t.formatFloat(i);if(o||e.bins)d=f;else{const u=XV(e,n,!1);d=a=>u(a)?f(a):""}}else if(e.tickFormat){const f=e.domain();d=t.formatSpan(f[0],f[f.length-1],n,i)}else i&&(d=t.format(i));return d}function XV(t,e,n){const i=jA(t,e),s=t.base(),o=Math.log(s),c=Math.max(1,s*e/i.length),d=f=>{let u=f/Math.pow(s,Math.round(Math.log(f)/o));return u*s<s-.5&&(u*=s),u<=c};return n?i.filter(d):d}const TI={[Np]:"quantiles",[RE]:"thresholds",[LE]:"domain"},KV={[Np]:"quantiles",[RE]:"domain"};function JV(t,e){return t.bins?Y_e(t.bins):t.type===Ql?XV(t,e,!0):TI[t.type]?H_e(t[TI[t.type]]()):jA(t,e)}function W_e(t,e,n){const i=e[KV[e.type]](),s=i.length;let o=s>1?i[1]-i[0]:i[0],c;for(c=1;c<s;++c)o=Math.min(o,i[c]-i[c-1]);return t.formatSpan(0,o,3*10,n)}function H_e(t){const e=[-1/0].concat(t);return e.max=1/0,e}function Y_e(t){const e=t.slice(0,-1);return e.max=Lt(t),e}const X_e=t=>TI[t.type]||t.bins;function QV(t,e,n,i,s,o,c){const d=KV[e.type]&&o!==lu&&o!==cu?W_e(t,e,s):YV(t,e,n,s,o,c);return i===R0&&X_e(e)?K_e(d):i===$_e?J_e(d):Q_e(d)}const K_e=t=>(e,n,i)=>{const s=E4(i[n+1],E4(i.max,1/0)),o=S4(e,t),c=S4(s,t);return o&&c?o+" \u2013 "+c:c?"< "+c:"\u2265 "+o},E4=(t,e)=>t!=null?t:e,J_e=t=>(e,n)=>n?t(e):null,Q_e=t=>e=>t(e),S4=(t,e)=>Number.isFinite(t)?e(t):null;function Z_e(t){const e=t.domain(),n=e.length-1;let i=+e[0],s=+Lt(e),o=s-i;if(t.type===LE){const c=n?o/n:.1;i-=c,s+=c,o=s-i}return c=>(c-i)/o}function eye(t,e,n,i){const s=i||e.type;return ke(n)&&L_e(s)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&s===lu?t.timeFormat("%A, %d %B %Y, %X"):!n&&s===cu?t.utcFormat("%A, %d %B %Y, %X UTC"):QV(t,e,5,null,n,i,!0)}function ZV(t,e,n){n=n||{};const i=Math.max(3,n.maxlen||7),s=eye(t,e,n.format,n.formatType);if(bI(e.type)){const o=JV(e).slice(1).map(s),c=o.length;return"".concat(c," boundar").concat(c===1?"y":"ies",": ").concat(o.join(", "))}else if(Cp(e.type)){const o=e.domain(),c=o.length,d=c>i?o.slice(0,i-2).map(s).join(", ")+", ending with "+o.slice(-1).map(s):o.map(s).join(", ");return"".concat(c," value").concat(c===1?"":"s",": ").concat(d)}else{const o=e.domain();return"values from ".concat(s(o[0])," to ").concat(s(Lt(o)))}}let eW=0;function tye(){eW=0}const qv="p_";function UA(t){return t&&t.gradient}function tW(t,e,n){const i=t.gradient;let s=t.id,o=i==="radial"?qv:"";return s||(s=t.id="gradient_"+eW++,i==="radial"?(t.x1=Xa(t.x1,.5),t.y1=Xa(t.y1,.5),t.r1=Xa(t.r1,0),t.x2=Xa(t.x2,.5),t.y2=Xa(t.y2,.5),t.r2=Xa(t.r2,.5),o=qv):(t.x1=Xa(t.x1,0),t.y1=Xa(t.y1,0),t.x2=Xa(t.x2,1),t.y2=Xa(t.y2,0))),e[s]=t,"url("+(n||"")+"#"+o+s+")"}function Xa(t,e){return t!=null?t:e}function nW(t,e){var n=[],i;return i={gradient:"linear",x1:t?t[0]:0,y1:t?t[1]:0,x2:e?e[0]:1,y2:e?e[1]:0,stops:n,stop:function(s,o){return n.push({offset:s,color:o}),i}}}const x4={basis:{curve:Wce},"basis-closed":{curve:Hce},"basis-open":{curve:Yce},bundle:{curve:Xce,tension:"beta",value:.85},cardinal:{curve:Kce,tension:"tension",value:0},"cardinal-open":{curve:Qce,tension:"tension",value:0},"cardinal-closed":{curve:Jce,tension:"tension",value:0},"catmull-rom":{curve:Zce,tension:"alpha",value:.5},"catmull-rom-closed":{curve:ede,tension:"alpha",value:.5},"catmull-rom-open":{curve:tde,tension:"alpha",value:.5},linear:{curve:JO},"linear-closed":{curve:nde},monotone:{horizontal:sde,vertical:ide},natural:{curve:rde},step:{curve:ade},"step-after":{curve:lde},"step-before":{curve:ode}};function $A(t,e,n){var i=Le(x4,t)&&x4[t],s=null;return i&&(s=i.curve||i[e||"vertical"],i.tension&&n!=null&&(s=s[i.tension](n))),s}const nye={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},iye=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,sye=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,rye=/^((\s+,?\s*)|(,\s*))/,aye=/^[01]/;function Rp(t){const e=[];return(t.match(iye)||[]).forEach(i=>{let s=i[0];const o=s.toLowerCase(),c=nye[o],d=oye(o,c,i.slice(1).trim()),f=d.length;if(f<c||f&&f%c!==0)throw Error("Invalid SVG path, incorrect parameter count");if(e.push([s,...d.slice(0,c)]),f!==c){o==="m"&&(s=s==="M"?"L":"l");for(let u=c;u<f;u+=c)e.push([s,...d.slice(u,u+c)])}}),e}function oye(t,e,n){const i=[];for(let s=0;e&&s<n.length;)for(let o=0;o<e;++o){const c=t==="a"&&(o===3||o===4)?aye:sye,d=n.slice(s).match(c);if(d===null)throw Error("Invalid SVG path, incorrect parameter type");s+=d[0].length,i.push(+d[0]);const f=n.slice(s).match(rye);f!==null&&(s+=f[0].length)}return i}const pd=Math.PI/180,lye=1e-14,yf=Math.PI/2,wo=Math.PI*2,ah=Math.sqrt(3)/2;var nB={},iB={},iW=[].join;function cye(t,e,n,i,s,o,c,d,f){const u=iW.call(arguments);if(nB[u])return nB[u];const a=c*pd,_=Math.sin(a),w=Math.cos(a);n=Math.abs(n),i=Math.abs(i);const m=w*(d-t)*.5+_*(f-e)*.5,l=w*(f-e)*.5-_*(d-t)*.5;let T=m*m/(n*n)+l*l/(i*i);T>1&&(T=Math.sqrt(T),n*=T,i*=T);const b=w/n,S=_/n,x=-_/i,B=w/i,F=b*d+S*f,k=x*d+B*f,M=b*t+S*e,A=x*t+B*e;let P=1/((M-F)*(M-F)+(A-k)*(A-k))-.25;P<0&&(P=0);let j=Math.sqrt(P);o==s&&(j=-j);const D=.5*(F+M)-j*(A-k),z=.5*(k+A)+j*(M-F),$=Math.atan2(k-z,F-D);let W=Math.atan2(A-z,M-D)-$;W<0&&o===1?W+=wo:W>0&&o===0&&(W-=wo);const H=Math.ceil(Math.abs(W/(yf+.001))),J=[];for(let V=0;V<H;++V){const le=$+V*W/H,pe=$+(V+1)*W/H;J[V]=[D,z,le,pe,n,i,_,w]}return nB[u]=J}function dye(t){const e=iW.call(t);if(iB[e])return iB[e];var n=t[0],i=t[1],s=t[2],o=t[3],c=t[4],d=t[5],f=t[6],u=t[7];const a=u*c,_=-f*d,w=f*c,m=u*d,l=Math.cos(s),T=Math.sin(s),b=Math.cos(o),S=Math.sin(o),x=.5*(o-s),B=Math.sin(x*.5),F=8/3*B*B/Math.sin(x),k=n+l-F*T,M=i+T+F*l,A=n+b,R=i+S,P=A+F*S,j=R-F*b;return iB[e]=[a*k+_*M,w*k+m*M,a*P+_*j,w*P+m*j,a*A+_*R,w*A+m*R]}const Sr=["l",0,0,0,0,0,0,0];function fye(t,e,n){const i=Sr[0]=t[0];if(i==="a"||i==="A")Sr[1]=e*t[1],Sr[2]=n*t[2],Sr[3]=t[3],Sr[4]=t[4],Sr[5]=t[5],Sr[6]=e*t[6],Sr[7]=n*t[7];else if(i==="h"||i==="H")Sr[1]=e*t[1];else if(i==="v"||i==="V")Sr[1]=n*t[1];else for(var s=1,o=t.length;s<o;++s)Sr[s]=(s%2==1?e:n)*t[s];return Sr}function ky(t,e,n,i,s,o){var c,d=null,f=0,u=0,a=0,_=0,w,m,l,T,b=0,S=0;n==null&&(n=0),i==null&&(i=0),s==null&&(s=1),o==null&&(o=s),t.beginPath&&t.beginPath();for(var x=0,B=e.length;x<B;++x){switch(c=e[x],(s!==1||o!==1)&&(c=fye(c,s,o)),c[0]){case"l":f+=c[1],u+=c[2],t.lineTo(f+n,u+i);break;case"L":f=c[1],u=c[2],t.lineTo(f+n,u+i);break;case"h":f+=c[1],t.lineTo(f+n,u+i);break;case"H":f=c[1],t.lineTo(f+n,u+i);break;case"v":u+=c[1],t.lineTo(f+n,u+i);break;case"V":u=c[1],t.lineTo(f+n,u+i);break;case"m":f+=c[1],u+=c[2],b=f,S=u,t.moveTo(f+n,u+i);break;case"M":f=c[1],u=c[2],b=f,S=u,t.moveTo(f+n,u+i);break;case"c":w=f+c[5],m=u+c[6],a=f+c[3],_=u+c[4],t.bezierCurveTo(f+c[1]+n,u+c[2]+i,a+n,_+i,w+n,m+i),f=w,u=m;break;case"C":f=c[5],u=c[6],a=c[3],_=c[4],t.bezierCurveTo(c[1]+n,c[2]+i,a+n,_+i,f+n,u+i);break;case"s":w=f+c[3],m=u+c[4],a=2*f-a,_=2*u-_,t.bezierCurveTo(a+n,_+i,f+c[1]+n,u+c[2]+i,w+n,m+i),a=f+c[1],_=u+c[2],f=w,u=m;break;case"S":w=c[3],m=c[4],a=2*f-a,_=2*u-_,t.bezierCurveTo(a+n,_+i,c[1]+n,c[2]+i,w+n,m+i),f=w,u=m,a=c[1],_=c[2];break;case"q":w=f+c[3],m=u+c[4],a=f+c[1],_=u+c[2],t.quadraticCurveTo(a+n,_+i,w+n,m+i),f=w,u=m;break;case"Q":w=c[3],m=c[4],t.quadraticCurveTo(c[1]+n,c[2]+i,w+n,m+i),f=w,u=m,a=c[1],_=c[2];break;case"t":w=f+c[1],m=u+c[2],d[0].match(/[QqTt]/)===null?(a=f,_=u):d[0]==="t"?(a=2*f-l,_=2*u-T):d[0]==="q"&&(a=2*f-a,_=2*u-_),l=a,T=_,t.quadraticCurveTo(a+n,_+i,w+n,m+i),f=w,u=m,a=f+c[1],_=u+c[2];break;case"T":w=c[1],m=c[2],a=2*f-a,_=2*u-_,t.quadraticCurveTo(a+n,_+i,w+n,m+i),f=w,u=m;break;case"a":B4(t,f+n,u+i,[c[1],c[2],c[3],c[4],c[5],c[6]+f+n,c[7]+u+i]),f+=c[6],u+=c[7];break;case"A":B4(t,f+n,u+i,[c[1],c[2],c[3],c[4],c[5],c[6]+n,c[7]+i]),f=c[6],u=c[7];break;case"z":case"Z":f=b,u=S,t.closePath();break}d=c}}function B4(t,e,n,i){const s=cye(i[5],i[6],i[0],i[1],i[3],i[4],i[2],e,n);for(let o=0;o<s.length;++o){const c=dye(s[o]);t.bezierCurveTo(c[0],c[1],c[2],c[3],c[4],c[5])}}const k4=.5773502691896257,I4={circle:{draw:function(t,e){const n=Math.sqrt(e)/2;t.moveTo(n,0),t.arc(0,0,n,0,wo)}},cross:{draw:function(t,e){var n=Math.sqrt(e)/2,i=n/2.5;t.moveTo(-n,-i),t.lineTo(-n,i),t.lineTo(-i,i),t.lineTo(-i,n),t.lineTo(i,n),t.lineTo(i,i),t.lineTo(n,i),t.lineTo(n,-i),t.lineTo(i,-i),t.lineTo(i,-n),t.lineTo(-i,-n),t.lineTo(-i,-i),t.closePath()}},diamond:{draw:function(t,e){const n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.closePath()}},square:{draw:function(t,e){var n=Math.sqrt(e),i=-n/2;t.rect(i,i,n,n)}},arrow:{draw:function(t,e){var n=Math.sqrt(e)/2,i=n/7,s=n/2.5,o=n/8;t.moveTo(-i,n),t.lineTo(i,n),t.lineTo(i,-o),t.lineTo(s,-o),t.lineTo(0,-n),t.lineTo(-s,-o),t.lineTo(-i,-o),t.closePath()}},wedge:{draw:function(t,e){var n=Math.sqrt(e)/2,i=ah*n,s=i-n*k4,o=n/4;t.moveTo(0,-i-s),t.lineTo(-o,i-s),t.lineTo(o,i-s),t.closePath()}},triangle:{draw:function(t,e){var n=Math.sqrt(e)/2,i=ah*n,s=i-n*k4;t.moveTo(0,-i-s),t.lineTo(-n,i-s),t.lineTo(n,i-s),t.closePath()}},"triangle-up":{draw:function(t,e){var n=Math.sqrt(e)/2,i=ah*n;t.moveTo(0,-i),t.lineTo(-n,i),t.lineTo(n,i),t.closePath()}},"triangle-down":{draw:function(t,e){var n=Math.sqrt(e)/2,i=ah*n;t.moveTo(0,i),t.lineTo(-n,-i),t.lineTo(n,-i),t.closePath()}},"triangle-right":{draw:function(t,e){var n=Math.sqrt(e)/2,i=ah*n;t.moveTo(i,0),t.lineTo(-i,-n),t.lineTo(-i,n),t.closePath()}},"triangle-left":{draw:function(t,e){var n=Math.sqrt(e)/2,i=ah*n;t.moveTo(-i,0),t.lineTo(i,-n),t.lineTo(i,n),t.closePath()}},stroke:{draw:function(t,e){const n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(n,0)}}};function sW(t){return Le(I4,t)?I4[t]:uye(t)}var sB={};function uye(t){if(!Le(sB,t)){const e=Rp(t);sB[t]={draw:function(n,i){ky(n,e,0,0,Math.sqrt(i)/2)}}}return sB[t]}const yc=.448084975506;function hye(t){return t.x}function pye(t){return t.y}function gye(t){return t.width}function _ye(t){return t.height}function _l(t){return typeof t=="function"?t:()=>+t}function Vb(t,e,n){return Math.max(e,Math.min(t,n))}function rW(){var t=hye,e=pye,n=gye,i=_ye,s=_l(0),o=s,c=s,d=s,f=null;function u(a,_,w){var m,l=_!=null?_:+t.call(this,a),T=w!=null?w:+e.call(this,a),b=+n.call(this,a),S=+i.call(this,a),x=Math.min(b,S)/2,B=Vb(+s.call(this,a),0,x),F=Vb(+o.call(this,a),0,x),k=Vb(+c.call(this,a),0,x),M=Vb(+d.call(this,a),0,x);if(f||(f=m=nE()),B<=0&&F<=0&&k<=0&&M<=0)f.rect(l,T,b,S);else{var A=l+b,R=T+S;f.moveTo(l+B,T),f.lineTo(A-F,T),f.bezierCurveTo(A-yc*F,T,A,T+yc*F,A,T+F),f.lineTo(A,R-M),f.bezierCurveTo(A,R-yc*M,A-yc*M,R,A-M,R),f.lineTo(l+k,R),f.bezierCurveTo(l+yc*k,R,l,R-yc*k,l,R-k),f.lineTo(l,T+B),f.bezierCurveTo(l,T+yc*B,l+yc*B,T,l+B,T),f.closePath()}if(m)return f=null,m+""||null}return u.x=function(a){return arguments.length?(t=_l(a),u):t},u.y=function(a){return arguments.length?(e=_l(a),u):e},u.width=function(a){return arguments.length?(n=_l(a),u):n},u.height=function(a){return arguments.length?(i=_l(a),u):i},u.cornerRadius=function(a,_,w,m){return arguments.length?(s=_l(a),o=_!=null?_l(_):s,d=w!=null?_l(w):s,c=m!=null?_l(m):o,u):s},u.context=function(a){return arguments.length?(f=a==null?null:a,u):f},u}function aW(){var t,e,n,i,s=null,o,c,d,f;function u(_,w,m){const l=m/2;if(o){var T=d-w,b=_-c;if(T||b){var S=Math.sqrt(T*T+b*b),x=(T/=S)*f,B=(b/=S)*f,F=Math.atan2(b,T);s.moveTo(c-x,d-B),s.lineTo(_-T*l,w-b*l),s.arc(_,w,l,F-Math.PI,F),s.lineTo(c+x,d+B),s.arc(c,d,f,F,F+Math.PI)}else s.arc(_,w,l,0,wo);s.closePath()}else o=1;c=_,d=w,f=l}function a(_){var w,m=_.length,l,T=!1,b;for(s==null&&(s=b=nE()),w=0;w<=m;++w)!(w<m&&i(l=_[w],w,_))===T&&(T=!T)&&(o=0),T&&u(+t(l,w,_),+e(l,w,_),+n(l,w,_));if(b)return s=null,b+""||null}return a.x=function(_){return arguments.length?(t=_,a):t},a.y=function(_){return arguments.length?(e=_,a):e},a.size=function(_){return arguments.length?(n=_,a):n},a.defined=function(_){return arguments.length?(i=_,a):i},a.context=function(_){return arguments.length?(_==null?s=null:s=_,a):s},a}function Mm(t,e){return t!=null?t:e}const Am=t=>t.x||0,Nm=t=>t.y||0,yye=t=>t.width||0,mye=t=>t.height||0,wye=t=>(t.x||0)+(t.width||0),bye=t=>(t.y||0)+(t.height||0),Tye=t=>t.startAngle||0,vye=t=>t.endAngle||0,Eye=t=>t.padAngle||0,Sye=t=>t.innerRadius||0,xye=t=>t.outerRadius||0,Bye=t=>t.cornerRadius||0,kye=t=>Mm(t.cornerRadiusTopLeft,t.cornerRadius)||0,Iye=t=>Mm(t.cornerRadiusTopRight,t.cornerRadius)||0,Fye=t=>Mm(t.cornerRadiusBottomRight,t.cornerRadius)||0,Oye=t=>Mm(t.cornerRadiusBottomLeft,t.cornerRadius)||0,Mye=t=>Mm(t.size,64),Aye=t=>t.size||1,DE=t=>t.defined!==!1,Nye=t=>sW(t.shape||"circle"),Cye=qce().startAngle(Tye).endAngle(vye).padAngle(Eye).innerRadius(Sye).outerRadius(xye).cornerRadius(Bye),Rye=Wq().x(Am).y1(Nm).y0(bye).defined(DE),Lye=Wq().y(Nm).x1(Am).x0(wye).defined(DE),Pye=Vq().x(Am).y(Nm).defined(DE),Dye=rW().x(Am).y(Nm).width(yye).height(mye).cornerRadius(kye,Iye,Fye,Oye),jye=Vce().type(Nye).size(Mye),Uye=aW().x(Am).y(Nm).defined(DE).size(Aye);function zA(t){return t.cornerRadius||t.cornerRadiusTopLeft||t.cornerRadiusTopRight||t.cornerRadiusBottomRight||t.cornerRadiusBottomLeft}function $ye(t,e){return Cye.context(t)(e)}function zye(t,e){const n=e[0],i=n.interpolate||"linear";return(n.orient==="horizontal"?Lye:Rye).curve($A(i,n.orient,n.tension)).context(t)(e)}function qye(t,e){const n=e[0],i=n.interpolate||"linear";return Pye.curve($A(i,n.orient,n.tension)).context(t)(e)}function wg(t,e,n,i){return Dye.context(t)(e,n,i)}function Gye(t,e){return(e.mark.shape||e.shape).context(t)(e)}function Vye(t,e){return jye.context(t)(e)}function Wye(t,e){return Uye.context(t)(e)}var oW=1;function lW(){oW=1}function qA(t,e,n){var i=e.clip,s=t._defs,o=e.clip_id||(e.clip_id="clip"+oW++),c=s.clipping[o]||(s.clipping[o]={id:o});return wt(i)?c.path=i(null):zA(n)?c.path=wg(null,n,0,0):(c.width=n.width||0,c.height=n.height||0),"url(#"+o+")"}function $n(t){this.clear(),t&&this.union(t)}$n.prototype={clone(){return new $n(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2},set(t,e,n,i){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),i<e?(this.y2=e,this.y1=i):(this.y1=e,this.y2=i),this},add(t,e){return t<this.x1&&(this.x1=t),e<this.y1&&(this.y1=e),t>this.x2&&(this.x2=t),e>this.y2&&(this.y2=e),this},expand(t){return this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(t){return this.x1*=t,this.y1*=t,this.x2*=t,this.y2*=t,this},translate(t,e){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this},rotate(t,e,n){const i=this.rotatedPoints(t,e,n);return this.clear().add(i[0],i[1]).add(i[2],i[3]).add(i[4],i[5]).add(i[6],i[7])},rotatedPoints(t,e,n){var{x1:i,y1:s,x2:o,y2:c}=this,d=Math.cos(t),f=Math.sin(t),u=e-e*d+n*f,a=n-e*f-n*d;return[d*i-f*s+u,f*i+d*s+a,d*i-f*c+u,f*i+d*c+a,d*o-f*s+u,f*o+d*s+a,d*o-f*c+u,f*o+d*c+a]},union(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this},intersect(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this},encloses(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2},alignsWith(t){return t&&(this.x1==t.x1||this.x2==t.x2||this.y1==t.y1||this.y2==t.y2)},intersects(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)},contains(t,e){return!(t<this.x1||t>this.x2||e<this.y1||e>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function jE(t){this.mark=t,this.bounds=this.bounds||new $n}function UE(t){jE.call(this,t),this.items=this.items||[]}ve(UE,jE);function GA(t){this._pending=0,this._loader=t||kE()}function F4(t){t._pending+=1}function Wg(t){t._pending-=1}GA.prototype={pending(){return this._pending},sanitizeURL(t){const e=this;return F4(e),e._loader.sanitize(t,{context:"href"}).then(n=>(Wg(e),n)).catch(()=>(Wg(e),null))},loadImage(t){const e=this,n=k_e();return F4(e),e._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!n)throw{url:s};const o=new n,c=Le(i,"crossOrigin")?i.crossOrigin:"anonymous";return c!=null&&(o.crossOrigin=c),o.onload=()=>Wg(e),o.onerror=()=>Wg(e),o.src=s,o}).catch(i=>(Wg(e),{complete:!1,width:0,height:0,src:i&&i.url||""}))},ready(){const t=this;return new Promise(e=>{function n(i){t.pending()?setTimeout(()=>{n(!0)},10):e(i)}n(!1)})}};function sc(t,e,n){if(e.stroke&&e.opacity!==0&&e.strokeOpacity!==0){const i=e.strokeWidth!=null?+e.strokeWidth:1;t.expand(i+(n?Hye(e,i):0))}return t}function Hye(t,e){return t.strokeJoin&&t.strokeJoin!=="miter"?0:e}const Yye=wo-1e-8;let $E,L0,P0,Pf,vI,D0,EI,SI;const Lc=(t,e)=>$E.add(t,e),j0=(t,e)=>Lc(L0=t,P0=e),O4=t=>Lc(t,$E.y1),M4=t=>Lc($E.x1,t),mf=(t,e)=>vI*t+EI*e,wf=(t,e)=>D0*t+SI*e,rB=(t,e)=>Lc(mf(t,e),wf(t,e)),aB=(t,e)=>j0(mf(t,e),wf(t,e));function Cm(t,e){return $E=t,e?(Pf=e*pd,vI=SI=Math.cos(Pf),D0=Math.sin(Pf),EI=-D0):(vI=SI=1,Pf=D0=EI=0),Xye}const Xye={beginPath(){},closePath(){},moveTo:aB,lineTo:aB,rect(t,e,n,i){Pf?(rB(t+n,e),rB(t+n,e+i),rB(t,e+i),aB(t,e)):(Lc(t+n,e+i),j0(t,e))},quadraticCurveTo(t,e,n,i){const s=mf(t,e),o=wf(t,e),c=mf(n,i),d=wf(n,i);A4(L0,s,c,O4),A4(P0,o,d,M4),j0(c,d)},bezierCurveTo(t,e,n,i,s,o){const c=mf(t,e),d=wf(t,e),f=mf(n,i),u=wf(n,i),a=mf(s,o),_=wf(s,o);N4(L0,c,f,a,O4),N4(P0,d,u,_,M4),j0(a,_)},arc(t,e,n,i,s,o){if(i+=Pf,s+=Pf,L0=n*Math.cos(s)+t,P0=n*Math.sin(s)+e,Math.abs(s-i)>Yye)Lc(t-n,e-n),Lc(t+n,e+n);else{const c=u=>Lc(n*Math.cos(u)+t,n*Math.sin(u)+e);let d,f;if(c(i),c(s),s!==i)if(i=i%wo,i<0&&(i+=wo),s=s%wo,s<0&&(s+=wo),s<i&&(o=!o,d=i,i=s,s=d),o)for(s-=wo,d=i-i%yf,f=0;f<4&&d>s;++f,d-=yf)c(d);else for(d=i-i%yf+yf,f=0;f<4&&d<s;++f,d=d+yf)c(d)}}};function A4(t,e,n,i){const s=(t-e)/(t+n-2*e);0<s&&s<1&&i(t+(e-t)*s)}function N4(t,e,n,i,s){const o=i-t+3*e-3*n,c=t+n-2*e,d=t-e;let f=0,u=0,a;Math.abs(o)>lye?(a=c*c+d*o,a>=0&&(a=Math.sqrt(a),f=(-c+a)/o,u=(-c-a)/o)):f=.5*d/c,0<f&&f<1&&s(C4(f,t,e,n,i)),0<u&&u<1&&s(C4(u,t,e,n,i))}function C4(t,e,n,i,s){const o=1-t,c=o*o,d=t*t;return c*o*e+3*c*t*n+3*o*d*i+d*t*s}var Kc=(Kc=Xc(1,1))?Kc.getContext("2d"):null;const xI=new $n;function VA(t){return function(e,n){if(!Kc)return!0;t(Kc,e),xI.clear().union(e.bounds).intersect(n).round();const{x1:i,y1:s,x2:o,y2:c}=xI;for(let d=s;d<=c;++d)for(let f=i;f<=o;++f)if(Kc.isPointInPath(f,d))return!0;return!1}}function WA(t,e){return e.contains(t.x||0,t.y||0)}function cW(t,e){const n=t.x||0,i=t.y||0,s=t.width||0,o=t.height||0;return e.intersects(xI.set(n,i,n+s,i+o))}function dW(t,e){const n=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:n,o=t.y2!=null?t.y2:i;return Mh(e,n,i,s,o)}function Mh(t,e,n,i,s){const{x1:o,y1:c,x2:d,y2:f}=t,u=i-e,a=s-n;let _=0,w=1,m,l,T,b;for(b=0;b<4;++b){if(b===0&&(m=-u,l=-(o-e)),b===1&&(m=u,l=d-e),b===2&&(m=-a,l=-(c-n)),b===3&&(m=a,l=f-n),Math.abs(m)<1e-10&&l<0)return!1;if(T=l/m,m<0){if(T>w)return!1;T>_&&(_=T)}else if(m>0){if(T<_)return!1;T<w&&(w=T)}}return!0}function Lp(t,e){t.globalCompositeOperation=e.blend||"source-over"}function ra(t,e){return t==null?e:t}function R4(t,e){const n=e.length;for(let i=0;i<n;++i)t.addColorStop(e[i].offset,e[i].color);return t}function Kye(t,e,n){const i=n.width(),s=n.height();let o;if(e.gradient==="radial")o=t.createRadialGradient(n.x1+ra(e.x1,.5)*i,n.y1+ra(e.y1,.5)*s,Math.max(i,s)*ra(e.r1,0),n.x1+ra(e.x2,.5)*i,n.y1+ra(e.y2,.5)*s,Math.max(i,s)*ra(e.r2,.5));else{const c=ra(e.x1,0),d=ra(e.y1,0),f=ra(e.x2,1),u=ra(e.y2,0);if(c===f||d===u||i===s)o=t.createLinearGradient(n.x1+c*i,n.y1+d*s,n.x1+f*i,n.y1+u*s);else{const a=Xc(Math.ceil(i),Math.ceil(s)),_=a.getContext("2d");return _.scale(i,s),_.fillStyle=R4(_.createLinearGradient(c,d,f,u),e.stops),_.fillRect(0,0,i,s),t.createPattern(a,"no-repeat")}}return R4(o,e.stops)}function fW(t,e,n){return UA(n)?Kye(t,n,e.bounds):n}function Gv(t,e,n){return n*=e.fillOpacity==null?1:e.fillOpacity,n>0?(t.globalAlpha=n,t.fillStyle=fW(t,e,e.fill),!0):!1}var Jye=[];function Pp(t,e,n){var i=(i=e.strokeWidth)!=null?i:1;return i<=0?!1:(n*=e.strokeOpacity==null?1:e.strokeOpacity,n>0?(t.globalAlpha=n,t.strokeStyle=fW(t,e,e.stroke),t.lineWidth=i,t.lineCap=e.strokeCap||"butt",t.lineJoin=e.strokeJoin||"miter",t.miterLimit=e.strokeMiterLimit||10,t.setLineDash&&(t.setLineDash(e.strokeDash||Jye),t.lineDashOffset=e.strokeDashOffset||0),!0):!1)}function Qye(t,e){return t.zindex-e.zindex||t.index-e.index}function HA(t){if(!t.zdirty)return t.zitems;var e=t.items,n=[],i,s,o;for(s=0,o=e.length;s<o;++s)i=e[s],i.index=s,i.zindex&&n.push(i);return t.zdirty=!1,t.zitems=n.sort(Qye)}function Pa(t,e){var n=t.items,i,s;if(!n||!n.length)return;const o=HA(t);if(o&&o.length){for(i=0,s=n.length;i<s;++i)n[i].zindex||e(n[i]);n=o}for(i=0,s=n.length;i<s;++i)e(n[i])}function Vv(t,e){var n=t.items,i,s;if(!n||!n.length)return null;const o=HA(t);for(o&&o.length&&(n=o),s=n.length;--s>=0;)if(i=e(n[s]))return i;if(n===o){for(n=t.items,s=n.length;--s>=0;)if(!n[s].zindex&&(i=e(n[s])))return i}return null}function YA(t){return function(e,n,i){Pa(n,s=>{(!i||i.intersects(s.bounds))&&uW(t,e,s,s)})}}function Zye(t){return function(e,n,i){n.items.length&&(!i||i.intersects(n.bounds))&&uW(t,e,n.items[0],n.items)}}function uW(t,e,n,i){var s=n.opacity==null?1:n.opacity;s!==0&&(t(e,i)||(Lp(e,n),n.fill&&Gv(e,n,s)&&e.fill(),n.stroke&&Pp(e,n,s)&&e.stroke()))}function zE(t){return t=t||Xr,function(e,n,i,s,o,c){return i*=e.pixelRatio,s*=e.pixelRatio,Vv(n,d=>{const f=d.bounds;if(!(f&&!f.contains(o,c)||!f)&&t(e,d,i,s,o,c))return d})}}function Rm(t,e){return function(n,i,s,o){var c=Array.isArray(i)?i[0]:i,d=e==null?c.fill:e,f=c.stroke&&n.isPointInStroke,u,a;return f&&(u=c.strokeWidth,a=c.strokeCap,n.lineWidth=u!=null?u:1,n.lineCap=a!=null?a:"butt"),t(n,i)?!1:d&&n.isPointInPath(s,o)||f&&n.isPointInStroke(s,o)}}function XA(t){return zE(Rm(t))}function Vf(t,e){return"translate("+t+","+e+")"}function KA(t){return"rotate("+t+")"}function eme(t,e){return"scale("+t+","+e+")"}function hW(t){return Vf(t.x||0,t.y||0)}function tme(t){return Vf(t.x||0,t.y||0)+(t.angle?" "+KA(t.angle):"")}function nme(t){return Vf(t.x||0,t.y||0)+(t.angle?" "+KA(t.angle):"")+(t.scaleX||t.scaleY?" "+eme(t.scaleX||1,t.scaleY||1):"")}function JA(t,e,n){function i(c,d){c("transform",tme(d)),c("d",e(null,d))}function s(c,d){return e(Cm(c,d.angle),d),sc(c,d).translate(d.x||0,d.y||0)}function o(c,d){var f=d.x||0,u=d.y||0,a=d.angle||0;c.translate(f,u),a&&c.rotate(a*=pd),c.beginPath(),e(c,d),a&&c.rotate(-a),c.translate(-f,-u)}return{type:t,tag:"path",nested:!1,attr:i,bound:s,draw:YA(o),pick:XA(o),isect:n||VA(o)}}var ime=JA("arc",$ye);function sme(t,e){for(var n=t[0].orient==="horizontal"?e[1]:e[0],i=t[0].orient==="horizontal"?"y":"x",s=t.length,o=1/0,c,d;--s>=0;)t[s].defined!==!1&&(d=Math.abs(t[s][i]-n),d<o&&(o=d,c=t[s]));return c}function rme(t,e){for(var n=Math.pow(t[0].strokeWidth||1,2),i=t.length,s,o,c;--i>=0;)if(t[i].defined!==!1&&(s=t[i].x-e[0],o=t[i].y-e[1],c=s*s+o*o,c<n))return t[i];return null}function ame(t,e){for(var n=t.length,i,s,o;--n>=0;)if(t[n].defined!==!1&&(i=t[n].x-e[0],s=t[n].y-e[1],o=i*i+s*s,i=t[n].size||1,o<i*i))return t[n];return null}function QA(t,e,n){function i(f,u){var a=u.mark.items;a.length&&f("d",e(null,a))}function s(f,u){var a=u.items;return a.length===0?f:(e(Cm(f),a),sc(f,a[0]))}function o(f,u){f.beginPath(),e(f,u)}const c=Rm(o);function d(f,u,a,_,w,m){var l=u.items,T=u.bounds;return!l||!l.length||T&&!T.contains(w,m)?null:(a*=f.pixelRatio,_*=f.pixelRatio,c(f,l,a,_)?l[0]:null)}return{type:t,tag:"path",nested:!0,attr:i,bound:s,draw:Zye(o),pick:d,isect:WA,tip:n}}var ome=QA("area",zye,sme);function lme(t,e){var n=e.clip;t.save(),wt(n)?(t.beginPath(),n(t),t.clip()):pW(t,e.group)}function pW(t,e){t.beginPath(),zA(e)?wg(t,e,0,0):t.rect(0,0,e.width||0,e.height||0),t.clip()}function gW(t){const e=ra(t.strokeWidth,1);return t.strokeOffset!=null?t.strokeOffset:t.stroke&&e>.5&&e<1.5?.5-Math.abs(e-1):0}function cme(t,e){t("transform",hW(e))}function _W(t,e){const n=gW(e);t("d",wg(null,e,n,n))}function dme(t,e){t("class","background"),t("aria-hidden",!0),_W(t,e)}function fme(t,e){t("class","foreground"),t("aria-hidden",!0),e.strokeForeground?_W(t,e):t("d","")}function ume(t,e,n){const i=e.clip?qA(n,e,e):null;t("clip-path",i)}function hme(t,e){if(!e.clip&&e.items){const n=e.items,i=n.length;for(let s=0;s<i;++s)t.union(n[s].bounds)}return(e.clip||e.width||e.height)&&!e.noBound&&t.add(0,0).add(e.width||0,e.height||0),sc(t,e),t.translate(e.x||0,e.y||0)}function Iy(t,e,n,i){const s=gW(e);t.beginPath(),wg(t,e,(n||0)+s,(i||0)+s)}const pme=Rm(Iy),gme=Rm(Iy,!1),_me=Rm(Iy,!0);function yme(t,e,n){Pa(e,i=>{const s=i.x||0,o=i.y||0,c=i.strokeForeground,d=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&d&&(Iy(t,i,s,o),Lp(t,i),i.fill&&Gv(t,i,d)&&t.fill(),i.stroke&&!c&&Pp(t,i,d)&&t.stroke()),t.save(),t.translate(s,o),i.clip&&pW(t,i),n&&n.translate(-s,-o),Pa(i,f=>{this.draw(t,f,n)}),n&&n.translate(s,o),t.restore(),c&&i.stroke&&d&&(Iy(t,i,s,o),Lp(t,i),Pp(t,i,d)&&t.stroke())})}function mme(t,e,n,i,s,o){if(e.bounds&&!e.bounds.contains(s,o)||!e.items)return null;const c=n*t.pixelRatio,d=i*t.pixelRatio;return Vv(e,f=>{let u,a,_;const w=f.bounds;if(w&&!w.contains(s,o))return;a=f.x||0,_=f.y||0;const m=a+(f.width||0),l=_+(f.height||0),T=f.clip;if(T&&(s<a||s>m||o<_||o>l))return;if(t.save(),t.translate(a,_),a=s-a,_=o-_,T&&zA(f)&&!_me(t,f,c,d))return t.restore(),null;const b=f.strokeForeground,S=e.interactive!==!1;return S&&b&&f.stroke&&gme(t,f,c,d)?(t.restore(),f):(u=Vv(f,x=>wme(x,a,_)?this.pick(x,n,i,a,_):null),!u&&S&&(f.fill||!b&&f.stroke)&&pme(t,f,c,d)&&(u=f),t.restore(),u||null)})}function wme(t,e,n){return(t.interactive!==!1||t.marktype==="group")&&t.bounds&&t.bounds.contains(e,n)}var bme={type:"group",tag:"g",nested:!1,attr:cme,bound:hme,draw:yme,pick:mme,isect:cW,content:ume,background:dme,foreground:fme},Fy={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function ZA(t,e){var n=t.image;return(!n||t.url&&t.url!==n.url)&&(n={complete:!1,width:0,height:0},e.loadImage(t.url).then(i=>{t.image=i,t.image.url=t.url})),n}function eN(t,e){return t.width!=null?t.width:!e||!e.width?0:t.aspect!==!1&&t.height?t.height*e.width/e.height:e.width}function tN(t,e){return t.height!=null?t.height:!e||!e.height?0:t.aspect!==!1&&t.width?t.width*e.height/e.width:e.height}function qE(t,e){return t==="center"?e/2:t==="right"?e:0}function GE(t,e){return t==="middle"?e/2:t==="bottom"?e:0}function Tme(t,e,n){const i=ZA(e,n),s=eN(e,i),o=tN(e,i),c=(e.x||0)-qE(e.align,s),d=(e.y||0)-GE(e.baseline,o),f=!i.src&&i.toDataURL?i.toDataURL():i.src||"";t("href",f,Fy["xmlns:xlink"],"xlink:href"),t("transform",Vf(c,d)),t("width",s),t("height",o),t("preserveAspectRatio",e.aspect===!1?"none":"xMidYMid")}function vme(t,e){const n=e.image,i=eN(e,n),s=tN(e,n),o=(e.x||0)-qE(e.align,i),c=(e.y||0)-GE(e.baseline,s);return t.set(o,c,o+i,c+s)}function Eme(t,e,n){Pa(e,i=>{if(n&&!n.intersects(i.bounds))return;const s=ZA(i,this);let o=eN(i,s),c=tN(i,s);if(o===0||c===0)return;let d=(i.x||0)-qE(i.align,o),f=(i.y||0)-GE(i.baseline,c),u,a,_,w;i.aspect!==!1&&(a=s.width/s.height,_=i.width/i.height,a===a&&_===_&&a!==_&&(_<a?(w=o/a,f+=(c-w)/2,c=w):(w=c*a,d+=(o-w)/2,o=w))),(s.complete||s.toDataURL)&&(Lp(t,i),t.globalAlpha=(u=i.opacity)!=null?u:1,t.imageSmoothingEnabled=i.smooth!==!1,t.drawImage(s,d,f,o,c))})}var Sme={type:"image",tag:"image",nested:!1,attr:Tme,bound:vme,draw:Eme,pick:zE(),isect:Xr,get:ZA,xOffset:qE,yOffset:GE},xme=QA("line",qye,rme);function Bme(t,e){var n=e.scaleX||1,i=e.scaleY||1;(n!==1||i!==1)&&t("vector-effect","non-scaling-stroke"),t("transform",nme(e)),t("d",e.path)}function U0(t,e){var n=e.path;if(n==null)return!0;var i=e.x||0,s=e.y||0,o=e.scaleX||1,c=e.scaleY||1,d=(e.angle||0)*pd,f=e.pathCache;(!f||f.path!==n)&&((e.pathCache=f=Rp(n)).path=n),d&&t.rotate&&t.translate?(t.translate(i,s),t.rotate(d),ky(t,f,0,0,o,c),t.rotate(-d),t.translate(-i,-s)):ky(t,f,i,s,o,c)}function kme(t,e){return U0(Cm(t,e.angle),e)?t.set(0,0,0,0):sc(t,e,!0)}var Ime={type:"path",tag:"path",nested:!1,attr:Bme,bound:kme,draw:YA(U0),pick:XA(U0),isect:VA(U0)};function Fme(t,e){t("d",wg(null,e))}function Ome(t,e){var n,i;return sc(t.set(n=e.x||0,i=e.y||0,n+e.width||0,i+e.height||0),e)}function L4(t,e){t.beginPath(),wg(t,e)}var Mme={type:"rect",tag:"path",nested:!1,attr:Fme,bound:Ome,draw:YA(L4),pick:XA(L4),isect:cW};function Ame(t,e){t("transform",hW(e)),t("x2",e.x2!=null?e.x2-(e.x||0):0),t("y2",e.y2!=null?e.y2-(e.y||0):0)}function Nme(t,e){var n,i;return sc(t.set(n=e.x||0,i=e.y||0,e.x2!=null?e.x2:n,e.y2!=null?e.y2:i),e)}function yW(t,e,n){var i,s,o,c;return e.stroke&&Pp(t,e,n)?(i=e.x||0,s=e.y||0,o=e.x2!=null?e.x2:i,c=e.y2!=null?e.y2:s,t.beginPath(),t.moveTo(i,s),t.lineTo(o,c),!0):!1}function Cme(t,e,n){Pa(e,i=>{if(!(n&&!n.intersects(i.bounds))){var s=i.opacity==null?1:i.opacity;s&&yW(t,i,s)&&(Lp(t,i),t.stroke())}})}function Rme(t,e,n,i){return t.isPointInStroke?yW(t,e,1)&&t.isPointInStroke(n,i):!1}var Lme={type:"rule",tag:"line",nested:!1,attr:Ame,bound:Nme,draw:Cme,pick:zE(Rme),isect:dW},Pme=JA("shape",Gye),Dme=JA("symbol",Vye,WA);const P4=yG();var Oa={height:sl,measureWidth:nN,estimateWidth:BI,width:BI,canvas:mW};mW(!0);function mW(t){Oa.width=t&&Kc?nN:BI}function BI(t,e){return wW(_d(t,e),sl(t))}function wW(t,e){return~~(.8*t.length*e)}function nN(t,e){return sl(t)<=0||!(e=_d(t,e))?0:bW(e,VE(t))}function bW(t,e){const n="(".concat(e,") ").concat(t);let i=P4.get(n);return i===void 0&&(Kc.font=e,i=Kc.measureText(t).width,P4.set(n,i)),i}function sl(t){return t.fontSize!=null?+t.fontSize||0:11}function gd(t){return t.lineHeight!=null?t.lineHeight:sl(t)+2}function jme(t){return he(t)?t.length>1?t:t[0]:t}function Lm(t){return jme(t.lineBreak&&t.text&&!he(t.text)?t.text.split(t.lineBreak):t.text)}function iN(t){const e=Lm(t);return(he(e)?e.length-1:0)*gd(t)}function _d(t,e){const n=e==null?"":(e+"").trim();return t.limit>0&&n.length?$me(t,n):n}function Ume(t){if(Oa.width===nN){const e=VE(t);return n=>bW(n,e)}else{const e=sl(t);return n=>wW(n,e)}}function $me(t,e){var n=+t.limit,i=Ume(t);if(i(e)<n)return e;var s=t.ellipsis||"\u2026",o=t.dir==="rtl",c=0,d=e.length,f;if(n-=i(s),o){for(;c<d;)f=c+d>>>1,i(e.slice(f))>n?c=f+1:d=f;return s+e.slice(c)}else{for(;c<d;)f=1+(c+d>>>1),i(e.slice(0,f))<n?c=f:d=f-1;return e.slice(0,c)+s}}function Pm(t,e){var n=t.font;return(e&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function VE(t,e){return(t.fontStyle?t.fontStyle+" ":"")+(t.fontVariant?t.fontVariant+" ":"")+(t.fontWeight?t.fontWeight+" ":"")+sl(t)+"px "+Pm(t,e)}function sN(t){var e=t.baseline,n=sl(t);return Math.round(e==="top"?.79*n:e==="middle"?.3*n:e==="bottom"?-.21*n:e==="line-top"?.29*n+.5*gd(t):e==="line-bottom"?.29*n-.5*gd(t):0)}const zme={left:"start",center:"middle",right:"end"},U_=new $n;function WE(t){var e=t.x||0,n=t.y||0,i=t.radius||0,s;return i&&(s=(t.theta||0)-yf,e+=i*Math.cos(s),n+=i*Math.sin(s)),U_.x1=e,U_.y1=n,U_}function qme(t,e){var n=e.dx||0,i=(e.dy||0)+sN(e),s=WE(e),o=s.x1,c=s.y1,d=e.angle||0,f;t("text-anchor",zme[e.align]||"start"),d?(f=Vf(o,c)+" "+KA(d),(n||i)&&(f+=" "+Vf(n,i))):f=Vf(o+n,c+i),t("transform",f)}function rN(t,e,n){var i=Oa.height(e),s=e.align,o=WE(e),c=o.x1,d=o.y1,f=e.dx||0,u=(e.dy||0)+sN(e)-Math.round(.8*i),a=Lm(e),_;if(he(a)?(i+=gd(e)*(a.length-1),_=a.reduce((w,m)=>Math.max(w,Oa.width(e,m)),0)):_=Oa.width(e,a),s==="center"?f-=_/2:s==="right"&&(f-=_),t.set(f+=c,u+=d,f+_,u+i),e.angle&&!n)t.rotate(e.angle*pd,c,d);else if(n===2)return t.rotatedPoints(e.angle*pd,c,d);return t}function Gme(t,e,n){Pa(e,i=>{var s=i.opacity==null?1:i.opacity,o,c,d,f,u,a,_;if(!(n&&!n.intersects(i.bounds)||s===0||i.fontSize<=0||i.text==null||i.text.length===0)){if(t.font=VE(i),t.textAlign=i.align||"left",o=WE(i),c=o.x1,d=o.y1,i.angle&&(t.save(),t.translate(c,d),t.rotate(i.angle*pd),c=d=0),c+=i.dx||0,d+=(i.dy||0)+sN(i),a=Lm(i),Lp(t,i),he(a))for(u=gd(i),f=0;f<a.length;++f)_=_d(i,a[f]),i.fill&&Gv(t,i,s)&&t.fillText(_,c,d),i.stroke&&Pp(t,i,s)&&t.strokeText(_,c,d),d+=u;else _=_d(i,a),i.fill&&Gv(t,i,s)&&t.fillText(_,c,d),i.stroke&&Pp(t,i,s)&&t.strokeText(_,c,d);i.angle&&t.restore()}})}function Vme(t,e,n,i,s,o){if(e.fontSize<=0)return!1;if(!e.angle)return!0;var c=WE(e),d=c.x1,f=c.y1,u=rN(U_,e,1),a=-e.angle*pd,_=Math.cos(a),w=Math.sin(a),m=_*s-w*o+(d-_*d+w*f),l=w*s+_*o+(f-w*d-_*f);return u.contains(m,l)}function Wme(t,e){const n=rN(U_,t,2);return Mh(e,n[0],n[1],n[2],n[3])||Mh(e,n[0],n[1],n[4],n[5])||Mh(e,n[4],n[5],n[6],n[7])||Mh(e,n[2],n[3],n[6],n[7])}var Hme={type:"text",tag:"text",nested:!1,attr:qme,bound:rN,draw:Gme,pick:zE(Vme),isect:Wme},Yme=QA("trail",Wye,ame),Tr={arc:ime,area:ome,group:bme,image:Sme,line:xme,path:Ime,rect:Mme,rule:Lme,shape:Pme,symbol:Dme,text:Hme,trail:Yme};function kI(t,e,n){var i=Tr[t.mark.marktype],s=e||i.bound;return i.nested&&(t=t.mark),s(t.bounds||(t.bounds=new $n),t,n)}var D4={mark:null};function TW(t,e,n){var i=Tr[t.marktype],s=i.bound,o=t.items,c=o&&o.length,d,f,u,a;if(i.nested)return c?u=o[0]:(D4.mark=t,u=D4),a=kI(u,s,n),e=e&&e.union(a)||a,e;if(e=e||t.bounds&&t.bounds.clear()||new $n,c)for(d=0,f=o.length;d<f;++d)e.union(kI(o[d],s,n));return t.bounds=e}const Xme=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function vW(t,e){return JSON.stringify(t,Xme,e)}function EW(t){const e=typeof t=="string"?JSON.parse(t):t;return SW(e)}function SW(t){var e=t.marktype,n=t.items,i,s,o;if(n)for(s=0,o=n.length;s<o;++s)i=e?"mark":"group",n[s][i]=t,n[s].zindex&&(n[s][i].zdirty=!0),(e||i)==="group"&&SW(n[s]);return e&&TW(t),t}function aN(t){arguments.length?this.root=EW(t):(this.root=xW({marktype:"group",name:"root",role:"frame"}),this.root.items=[new UE(this.root)])}aN.prototype={toJSON(t){return vW(this.root,t||0)},mark(t,e,n){e=e||this.root.items[0];const i=xW(t,e);return e.items[n]=i,i.zindex&&(i.group.zdirty=!0),i}};function xW(t,e){const n={bounds:new $n,clip:!!t.clip,group:e,interactive:t.interactive!==!1,items:[],marktype:t.marktype,name:t.name||void 0,role:t.role||void 0,zindex:t.zindex||0};return t.aria!=null&&(n.aria=t.aria),t.description&&(n.description=t.description),n}function Pc(t,e,n){return!t&&typeof document<"u"&&document.createElement&&(t=document),t?n?t.createElementNS(n,e):t.createElement(e):null}function oN(t,e){e=e.toLowerCase();for(var n=t.childNodes,i=0,s=n.length;i<s;++i)if(n[i].tagName.toLowerCase()===e)return n[i]}function Ms(t,e,n,i){var s=t.childNodes[e],o;return(!s||s.tagName.toLowerCase()!==n.toLowerCase())&&(o=s||null,s=Pc(t.ownerDocument,n,i),t.insertBefore(s,o)),s}function ba(t,e){for(var n=t.childNodes,i=n.length;i>e;)t.removeChild(n[--i]);return t}function BW(t){return"mark-"+t.marktype+(t.role?" role-"+t.role:"")+(t.name?" "+t.name:"")}function HE(t,e){const n=e.getBoundingClientRect();return[t.clientX-n.left-(e.clientLeft||0),t.clientY-n.top-(e.clientTop||0)]}function Kme(t,e,n,i){var s=t&&t.mark,o,c;if(s&&(o=Tr[s.marktype]).tip){for(c=HE(e,n),c[0]-=i[0],c[1]-=i[1];t=t.mark.group;)c[0]-=t.x||0,c[1]-=t.y||0;t=o.tip(s.items,c)}return t}function yd(t,e){this._active=null,this._handlers={},this._loader=t||kE(),this._tooltip=e||Jme}function Jme(t,e,n,i){t.element().setAttribute("title",i||"")}yd.prototype={initialize(t,e,n){return this._el=t,this._obj=n||null,this.origin(e)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()},scene(t){return arguments.length?(this._scene=t,this):this._scene},on(){},off(){},_handlerIndex(t,e,n){for(let i=t?t.length:0;--i>=0;)if(t[i].type===e&&(!n||t[i].handler===n))return i;return-1},handlers(t){const e=this._handlers,n=[];if(t)n.push(...e[this.eventName(t)]);else for(const i in e)n.push(...e[i]);return n},eventName(t){const e=t.indexOf(".");return e<0?t:t.slice(0,e)},handleHref(t,e,n){this._loader.sanitize(n,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=Pc(null,"a");for(const c in i)o.setAttribute(c,i[c]);o.dispatchEvent(s)}).catch(()=>{})},handleTooltip(t,e,n){if(e&&e.tooltip!=null){e=Kme(e,t,this.canvas(),this._origin);const i=n&&e&&e.tooltip||null;this._tooltip.call(this._obj,this,t,e,i)}},getItemBoundingClientRect(t){const e=this.canvas();if(!e)return;const n=e.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),c=s.height();let d=s.x1+i[0]+n.left,f=s.y1+i[1]+n.top;for(;t.mark&&(t=t.mark.group);)d+=t.x||0,f+=t.y||0;return{x:d,y:f,width:o,height:c,left:d,top:f,right:d+o,bottom:f+c}}};function rl(t){this._el=null,this._bgcolor=null,this._loader=new GA(t)}rl.prototype={initialize(t,e,n,i,s){return this._el=t,this.resize(e,n,i,s)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)},resize(t,e,n,i){return this._width=t,this._height=e,this._origin=n||[0,0],this._scale=i||1,this},dirty(){},render(t){const e=this;return e._call=function(){e._render(t)},e._call(),e._call=null,e},_render(){},renderAsync(t){const e=this.render(t);return this._ready?this._ready.then(()=>e):Promise.resolve(e)},_load(t,e){var n=this,i=n._loader[t](e);if(!n._ready){const s=n._call;n._ready=n._loader.ready().then(o=>{o&&s(),n._ready=null})}return i},sanitizeURL(t){return this._load("sanitizeURL",t)},loadImage(t){return this._load("loadImage",t)}};const Qme="keydown",Zme="keypress",ewe="keyup",kW="dragenter",$0="dragleave",IW="dragover",II="mousedown",twe="mouseup",Wv="mousemove",$_="mouseout",FW="mouseover",Hv="click",nwe="dblclick",iwe="wheel",OW="mousewheel",Yv="touchstart",Xv="touchmove",Kv="touchend",swe=[Qme,Zme,ewe,kW,$0,IW,II,twe,Wv,$_,FW,Hv,nwe,iwe,OW,Yv,Xv,Kv],FI=Wv,Oy=$_,OI=Hv;function Dm(t,e){yd.call(this,t,e),this._down=null,this._touch=null,this._first=!0,this._events={}}const rwe=t=>t===Yv||t===Xv||t===Kv?[Yv,Xv,Kv]:[t];function j4(t,e){rwe(e).forEach(n=>awe(t,n))}function awe(t,e){const n=t.canvas();n&&!t._events[e]&&(t._events[e]=1,n.addEventListener(e,t[e]?i=>t[e](i):i=>t.fire(e,i)))}function U4(t,e,n){return function(i){const s=this._active,o=this.pickEvent(i);o===s?this.fire(t,i):((!s||!s.exit)&&this.fire(n,i),this._active=o,this.fire(e,i),this.fire(t,i))}}function $4(t){return function(e){this.fire(t,e),this._active=null}}ve(Dm,yd,{initialize(t,e,n){return this._canvas=t&&oN(t,"canvas"),[Hv,II,Wv,$_,$0].forEach(i=>j4(this,i)),yd.prototype.initialize.call(this,t,e,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:swe,DOMMouseScroll(t){this.fire(OW,t)},mousemove:U4(Wv,FW,$_),dragover:U4(IW,kW,$0),mouseout:$4($_),dragleave:$4($0),mousedown(t){this._down=this._active,this.fire(II,t)},click(t){this._down===this._active&&(this.fire(Hv,t),this._down=null)},touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(Yv,t,!0)},touchmove(t){this.fire(Xv,t,!0)},touchend(t){this.fire(Kv,t,!0),this._touch=null},fire(t,e,n){const i=n?this._touch:this._active,s=this._handlers[t];if(e.vegaType=t,t===OI&&i&&i.href?this.handleHref(e,i,i.href):(t===FI||t===Oy)&&this.handleTooltip(e,i,t!==Oy),s)for(let o=0,c=s.length;o<c;++o)s[o].handler.call(this._obj,e,i)},on(t,e){const n=this.eventName(t),i=this._handlers;return this._handlerIndex(i[n],t,e)<0&&(j4(this,t),(i[n]||(i[n]=[])).push({type:t,handler:e})),this},off(t,e){const n=this.eventName(t),i=this._handlers[n],s=this._handlerIndex(i,t,e);return s>=0&&i.splice(s,1),this},pickEvent(t){const e=HE(t,this._canvas),n=this._origin;return this.pick(this._scene,e[0],e[1],e[0]-n[0],e[1]-n[1])},pick(t,e,n,i,s){const o=this.context();return Tr[t.marktype].pick.call(this,o,t,e,n,i,s)}});function owe(){return typeof window<"u"&&window.devicePixelRatio||1}var lwe=owe();function cwe(t,e,n,i,s,o){const c=typeof HTMLElement<"u"&&t instanceof HTMLElement&&t.parentNode!=null,d=t.getContext("2d"),f=c?lwe:s;t.width=e*f,t.height=n*f;for(const u in o)d[u]=o[u];return c&&f!==1&&(t.style.width=e+"px",t.style.height=n+"px"),d.pixelRatio=f,d.setTransform(f,0,0,f,f*i[0],f*i[1]),t}function Jv(t){rl.call(this,t),this._options={},this._redraw=!1,this._dirty=new $n,this._tempb=new $n}const z4=rl.prototype,dwe=(t,e,n)=>new $n().set(0,0,e,n).translate(-t[0],-t[1]);function fwe(t,e,n){return e.expand(1).round(),t.pixelRatio%1&&e.scale(t.pixelRatio).round().scale(1/t.pixelRatio),e.translate(-(n[0]%1),-(n[1]%1)),t.beginPath(),t.rect(e.x1,e.y1,e.width(),e.height()),t.clip(),e}ve(Jv,rl,{initialize(t,e,n,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:Xc(1,1,this._options.type),t&&this._canvas&&(ba(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),z4.initialize.call(this,t,e,n,i,s)},resize(t,e,n,i){if(z4.resize.call(this,t,e,n,i),this._canvas)cwe(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||de("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(t){const e=this._tempb.clear().union(t.bounds);let n=t.mark.group;for(;n;)e.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(e)},_render(t){const e=this.context(),n=this._origin,i=this._width,s=this._height,o=this._dirty,c=dwe(n,i,s);e.save();const d=this._redraw||o.empty()?(this._redraw=!1,c.expand(1)):fwe(e,c.intersect(o),n);return this.clear(-n[0],-n[1],i,s),this.draw(e,t,d),e.restore(),o.clear(),this},draw(t,e,n){const i=Tr[e.marktype];e.clip&&lme(t,e),i.draw.call(this,t,e,n),e.clip&&t.restore()},clear(t,e,n,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,e,n,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,e,n,i))}});function lN(t,e){yd.call(this,t,e);const n=this;n._hrefHandler=MI(n,(i,s)=>{s&&s.href&&n.handleHref(i,s,s.href)}),n._tooltipHandler=MI(n,(i,s)=>{n.handleTooltip(i,s,i.type!==Oy)})}const MI=(t,e)=>n=>{let i=n.target.__data__;i=Array.isArray(i)?i[0]:i,n.vegaType=n.type,e.call(t._obj,n,i)};ve(lN,yd,{initialize(t,e,n){let i=this._svg;return i&&(i.removeEventListener(OI,this._hrefHandler),i.removeEventListener(FI,this._tooltipHandler),i.removeEventListener(Oy,this._tooltipHandler)),this._svg=i=t&&oN(t,"svg"),i&&(i.addEventListener(OI,this._hrefHandler),i.addEventListener(FI,this._tooltipHandler),i.addEventListener(Oy,this._tooltipHandler)),yd.prototype.initialize.call(this,t,e,n)},canvas(){return this._svg},on(t,e){const n=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[n],t,e)<0){const o={type:t,handler:e,listener:MI(this,e)};(i[n]||(i[n]=[])).push(o),this._svg&&this._svg.addEventListener(n,o.listener)}return this},off(t,e){const n=this.eventName(t),i=this._handlers[n],s=this._handlerIndex(i,t,e);return s>=0&&(this._svg&&this._svg.removeEventListener(n,i[s].listener),i.splice(s,1)),this}});const MW="aria-hidden",cN="aria-label",dN="role",fN="aria-roledescription",AW="graphics-object",uN="graphics-symbol",NW=(t,e,n)=>({[dN]:t,[fN]:e,[cN]:n||void 0}),uwe=Ra(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),q4={axis:{desc:"axis",caption:gwe},legend:{desc:"legend",caption:_we},"title-text":{desc:"title",caption:t=>"Title text '".concat(V4(t),"'")},"title-subtitle":{desc:"subtitle",caption:t=>"Subtitle text '".concat(V4(t),"'")}},G4={ariaRole:dN,ariaRoleDescription:fN,description:cN};function CW(t,e){const n=e.aria===!1;if(t(MW,n||void 0),n||e.description==null)for(const i in G4)t(G4[i],void 0);else{const i=e.mark.marktype;t(cN,e.description),t(dN,e.ariaRole||(i==="group"?AW:uN)),t(fN,e.ariaRoleDescription||"".concat(i," mark"))}}function RW(t){return t.aria===!1?{[MW]:!0}:uwe[t.role]?null:q4[t.role]?pwe(t,q4[t.role]):hwe(t)}function hwe(t){const e=t.marktype,n=e==="group"||e==="text"||t.items.some(i=>i.description!=null&&i.aria!==!1);return NW(n?AW:uN,"".concat(e," mark container"),t.description)}function pwe(t,e){try{const n=t.items[0],i=e.caption||(()=>"");return NW(e.role||uN,e.desc,n.description||i(n))}catch{return null}}function V4(t){return Ie(t.text).join(" ")}function gwe(t){const e=t.datum,n=t.orient,i=e.title?LW(t):null,s=t.context,o=s.scales[e.scale].value,c=s.dataflow.locale(),d=o.type,f=n==="left"||n==="right"?"Y":"X";return"".concat(f,"-axis")+(i?" titled '".concat(i,"'"):"")+" for a ".concat(Cp(d)?"discrete":d," scale")+" with ".concat(ZV(c,o,t))}function _we(t){const e=t.datum,n=e.title?LW(t):null,i="".concat(e.type||""," legend").trim(),s=e.scales,o=Object.keys(s),c=t.context,d=c.scales[s[o[0]]].value,f=c.dataflow.locale();return mwe(i)+(n?" titled '".concat(n,"'"):"")+" for ".concat(ywe(o))+" with ".concat(ZV(f,d,t))}function LW(t){try{return Ie(Lt(t.items).items[0].text).join(" ")}catch{return null}}function ywe(t){return t=t.map(e=>e+(e==="fill"||e==="stroke"?" color":"")),t.length<2?t[0]:t.slice(0,-1).join(", ")+" and "+Lt(t)}function mwe(t){return t.length?t[0].toUpperCase()+t.slice(1):t}const PW=t=>(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),wwe=t=>PW(t).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function hN(){let t="",e="",n="";const i=[],s=()=>e=n="",o=f=>{e&&(t+="".concat(e,">").concat(n),s()),i.push(f)},c=(f,u)=>(u!=null&&(e+=" ".concat(f,'="').concat(wwe(u),'"')),d),d={open(f){o(f),e="<"+f;for(var u=arguments.length,a=new Array(u>1?u-1:0),_=1;_<u;_++)a[_-1]=arguments[_];for(const w of a)for(const m in w)c(m,w[m]);return d},close(){const f=i.pop();return e?t+=e+(n?">".concat(n,"</").concat(f,">"):"/>"):t+="</".concat(f,">"),s(),d},attr:c,text:f=>(n+=PW(f),d),toString:()=>t};return d}const DW=t=>jW(hN(),t)+"";function jW(t,e){if(t.open(e.tagName),e.hasAttributes()){const n=e.attributes,i=n.length;for(let s=0;s<i;++s)t.attr(n[s].name,n[s].value)}if(e.hasChildNodes()){const n=e.childNodes;for(const i of n)i.nodeType===3?t.text(i.nodeValue):jW(t,i)}return t.close()}const Qv={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},Zv={blend:"mix-blend-mode"},UW={fill:"none","stroke-miterlimit":10},Hg=0,W4="http://www.w3.org/2000/xmlns/",ei=Fy.xmlns;function pN(t){rl.call(this,t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const oB=rl.prototype;ve(pN,rl,{initialize(t,e,n,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=Ms(t,0,"svg",ei),this._svg.setAttributeNS(W4,"xmlns",ei),this._svg.setAttributeNS(W4,"xmlns:xlink",Fy["xmlns:xlink"]),this._svg.setAttribute("version",Fy.version),this._svg.setAttribute("class","marks"),ba(t,1),this._root=Ms(this._svg,Hg,"g",ei),Dc(this._root,UW),ba(this._svg,Hg+1)),this.background(this._bgcolor),oB.initialize.call(this,t,e,n,i,s)},background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),oB.background.apply(this,arguments)},resize(t,e,n,i){return oB.resize.call(this,t,e,n,i),this._svg&&(Dc(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}),this._root.setAttribute("transform","translate(".concat(this._origin,")"))),this._dirty=[],this},canvas(){return this._svg},svg(){const t=this._svg,e=this._bgcolor;if(!t)return null;let n;e&&(t.removeAttribute("style"),n=Ms(t,Hg,"rect",ei),Dc(n,{width:this._width,height:this._height,fill:e}));const i=DW(t);return e&&(t.removeChild(n),this._svg.style.setProperty("background-color",e)),i},_render(t){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t),ba(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))},isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const e=++this._dirtyID;let n,i,s,o,c,d,f;for(c=0,d=t.length;c<d;++c)if(n=t[c],i=n.mark,i.marktype!==s&&(s=i.marktype,o=Tr[s]),i.zdirty&&i.dirty!==e&&(this._dirtyAll=!1,H4(n,e),i.items.forEach(u=>{u.dirty=e})),!i.zdirty){if(n.exit){o.nested&&i.items.length?(f=i.items[0],f._svg&&this._update(o,f._svg,f)):n._svg&&(f=n._svg.parentNode,f&&f.removeChild(n._svg)),n._svg=null;continue}n=o.nested?i.items[0]:n,n._update!==e&&(!n._svg||!n._svg.ownerSVGElement?(this._dirtyAll=!1,H4(n,e)):this._update(o,n._svg,n),n._update=e)}return!this._dirtyAll},mark(t,e,n){if(!this.isDirty(e))return e._svg;const i=this._svg,s=Tr[e.marktype],o=e.interactive===!1?"none":null,c=s.tag==="g",d=Y4(e,t,n,"g",i);d.setAttribute("class",BW(e));const f=RW(e);for(const w in f)ts(d,w,f[w]);c||ts(d,"pointer-events",o),ts(d,"clip-path",e.clip?qA(this,e,e.group):null);let u=null,a=0;const _=w=>{const m=this.isDirty(w),l=Y4(w,d,u,s.tag,i);m&&(this._update(s,l,w),c&&vwe(this,l,w)),u=l,++a};return s.nested?e.items.length&&_(e.items[0]):Pa(e,_),ba(d,a),d},_update(t,e,n){Pl=e,Pi=e.__values__,CW(z_,n),t.attr(z_,n,this);const i=Swe[t.type];i&&i.call(this,t,e,n),Pl&&this.style(Pl,n)},style(t,e){if(e!=null){for(const n in Qv){let i=n==="font"?Pm(e):e[n];if(i===Pi[n])continue;const s=Qv[n];i==null?t.removeAttribute(s):(UA(i)&&(i=tW(i,this._defs.gradient,$W())),t.setAttribute(s,i+"")),Pi[n]=i}for(const n in Zv)z0(t,Zv[n],e[n])}},defs(){const t=this._svg,e=this._defs;let n=e.el,i=0;for(const s in e.gradient)n||(e.el=n=Ms(t,Hg+1,"defs",ei)),i=bwe(n,e.gradient[s],i);for(const s in e.clipping)n||(e.el=n=Ms(t,Hg+1,"defs",ei)),i=Twe(n,e.clipping[s],i);n&&(i===0?(t.removeChild(n),e.el=null):ba(n,i))},_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}});function H4(t,e){for(;t&&t.dirty!==e;t=t.mark.group)if(t.dirty=e,t.mark&&t.mark.dirty!==e)t.mark.dirty=e;else return}function bwe(t,e,n){let i,s,o;if(e.gradient==="radial"){let c=Ms(t,n++,"pattern",ei);Dc(c,{id:qv+e.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),c=Ms(c,0,"rect",ei),Dc(c,{width:1,height:1,fill:"url(".concat($W(),"#").concat(e.id,")")}),t=Ms(t,n++,"radialGradient",ei),Dc(t,{id:e.id,fx:e.x1,fy:e.y1,fr:e.r1,cx:e.x2,cy:e.y2,r:e.r2})}else t=Ms(t,n++,"linearGradient",ei),Dc(t,{id:e.id,x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2});for(i=0,s=e.stops.length;i<s;++i)o=Ms(t,i,"stop",ei),o.setAttribute("offset",e.stops[i].offset),o.setAttribute("stop-color",e.stops[i].color);return ba(t,i),n}function Twe(t,e,n){let i;return t=Ms(t,n,"clipPath",ei),t.setAttribute("id",e.id),e.path?(i=Ms(t,0,"path",ei),i.setAttribute("d",e.path)):(i=Ms(t,0,"rect",ei),Dc(i,{x:0,y:0,width:e.width,height:e.height})),ba(t,1),n+1}function vwe(t,e,n){e=e.lastChild.previousSibling;let i,s=0;Pa(n,o=>{i=t.mark(e,o,i),++s}),ba(e,1+s)}function Y4(t,e,n,i,s){let o=t._svg,c;if(!o&&(c=e.ownerDocument,o=Pc(c,i,ei),t._svg=o,t.mark&&(o.__data__=t,o.__values__={fill:"default"},i==="g"))){const d=Pc(c,"path",ei);o.appendChild(d),d.__data__=t;const f=Pc(c,"g",ei);o.appendChild(f),f.__data__=t;const u=Pc(c,"path",ei);o.appendChild(u),u.__data__=t,u.__values__={fill:"default"}}return(o.ownerSVGElement!==s||Ewe(o,n))&&e.insertBefore(o,n?n.nextSibling:e.firstChild),o}function Ewe(t,e){return t.parentNode&&t.parentNode.childNodes.length>1&&t.previousSibling!=e}let Pl=null,Pi=null;const Swe={group(t,e,n){const i=Pl=e.childNodes[2];Pi=i.__values__,t.foreground(z_,n,this),Pi=e.__values__,Pl=e.childNodes[1],t.content(z_,n,this);const s=Pl=e.childNodes[0];t.background(z_,n,this);const o=n.mark.interactive===!1?"none":null;if(o!==Pi.events&&(ts(i,"pointer-events",o),ts(s,"pointer-events",o),Pi.events=o),n.strokeForeground&&n.stroke){const c=n.fill;ts(i,"display",null),this.style(s,n),ts(s,"stroke",null),c&&(n.fill=null),Pi=i.__values__,this.style(i,n),c&&(n.fill=c),Pl=null}else ts(i,"display","none")},image(t,e,n){n.smooth===!1?(z0(e,"image-rendering","optimizeSpeed"),z0(e,"image-rendering","pixelated")):z0(e,"image-rendering",null)},text(t,e,n){const i=Lm(n);let s,o,c,d;he(i)?(o=i.map(f=>_d(n,f)),s=o.join(`
`),s!==Pi.text&&(ba(e,0),c=e.ownerDocument,d=gd(n),o.forEach((f,u)=>{const a=Pc(c,"tspan",ei);a.__data__=n,a.textContent=f,u&&(a.setAttribute("x",0),a.setAttribute("dy",d)),e.appendChild(a)}),Pi.text=s)):(o=_d(n,i),o!==Pi.text&&(e.textContent=o,Pi.text=o)),ts(e,"font-family",Pm(n)),ts(e,"font-size",sl(n)+"px"),ts(e,"font-style",n.fontStyle),ts(e,"font-variant",n.fontVariant),ts(e,"font-weight",n.fontWeight)}};function z_(t,e,n){e!==Pi[t]&&(n?xwe(Pl,t,e,n):ts(Pl,t,e),Pi[t]=e)}function z0(t,e,n){n!==Pi[e]&&(n==null?t.style.removeProperty(e):t.style.setProperty(e,n+""),Pi[e]=n)}function Dc(t,e){for(const n in e)ts(t,n,e[n])}function ts(t,e,n){n!=null?t.setAttribute(e,n):t.removeAttribute(e)}function xwe(t,e,n,i){n!=null?t.setAttributeNS(i,e,n):t.removeAttributeNS(i,e)}function $W(){let t;return typeof window>"u"?"":(t=window.location).hash?t.href.slice(0,-t.hash.length):t.href}function gN(t){rl.call(this,t),this._text=null,this._defs={gradient:{},clipping:{}}}ve(gN,rl,{svg(){return this._text},_render(t){const e=hN();e.open("svg",mt({},Fy,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}));const n=this._bgcolor;return n&&n!=="transparent"&&n!=="none"&&e.open("rect",{width:this._width,height:this._height,fill:n}).close(),e.open("g",UW,{transform:"translate("+this._origin+")"}),this.mark(e,t),e.close(),this.defs(e),this._text=e.close()+"",this},mark(t,e){const n=Tr[e.marktype],i=n.tag,s=[CW,n.attr];t.open("g",{class:BW(e),"clip-path":e.clip?qA(this,e,e.group):null},RW(e),{"pointer-events":i!=="g"&&e.interactive===!1?"none":null});const o=c=>{const d=this.href(c);if(d&&t.open("a",d),t.open(i,this.attr(e,c,s,i!=="g"?i:null)),i==="text"){const f=Lm(c);if(he(f)){const u={x:0,dy:gd(c)};for(let a=0;a<f.length;++a)t.open("tspan",a?u:null).text(_d(c,f[a])).close()}else t.text(_d(c,f))}else if(i==="g"){const f=c.strokeForeground,u=c.fill,a=c.stroke;f&&a&&(c.stroke=null),t.open("path",this.attr(e,c,n.background,"bgrect")).close(),t.open("g",this.attr(e,c,n.content)),Pa(c,_=>this.mark(t,_)),t.close(),f&&a?(u&&(c.fill=null),c.stroke=a,t.open("path",this.attr(e,c,n.foreground,"bgrect")).close(),u&&(c.fill=u)):t.open("path",this.attr(e,c,n.foreground,"bgfore")).close()}t.close(),d&&t.close()};return n.nested?e.items&&e.items.length&&o(e.items[0]):Pa(e,o),t.close()},href(t){const e=t.href;let n;if(e){if(n=this._hrefs&&this._hrefs[e])return n;this.sanitizeURL(e).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[e]=i})}return null},attr(t,e,n,i){const s={},o=(c,d,f,u)=>{s[u||c]=d};return Array.isArray(n)?n.forEach(c=>c(o,e,this)):n(o,e,this),i&&Bwe(s,e,t,i,this._defs),s},defs(t){const e=this._defs.gradient,n=this._defs.clipping;if(Object.keys(e).length+Object.keys(n).length!==0){t.open("defs");for(const s in e){const o=e[s],c=o.stops;o.gradient==="radial"?(t.open("pattern",{id:qv+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let d=0;d<c.length;++d)t.open("stop",{offset:c[d].offset,"stop-color":c[d].color}).close();t.close()}for(const s in n){const o=n[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}});function Bwe(t,e,n,i,s){let o;if(e==null||(i==="bgrect"&&n.interactive===!1&&(t["pointer-events"]="none"),i==="bgfore"&&(n.interactive===!1&&(t["pointer-events"]="none"),t.display="none",e.fill!==null)))return t;i==="image"&&e.smooth===!1&&(o=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),i==="text"&&(t["font-family"]=Pm(e),t["font-size"]=sl(e)+"px",t["font-style"]=e.fontStyle,t["font-variant"]=e.fontVariant,t["font-weight"]=e.fontWeight);for(const c in Qv){let d=e[c];const f=Qv[c];d==="transparent"&&(f==="fill"||f==="stroke")||d!=null&&(UA(d)&&(d=tW(d,s.gradient,"")),t[f]=d)}for(const c in Zv){const d=e[c];d!=null&&(o=o||[],o.push("".concat(Zv[c],": ").concat(d,";")))}return o&&(t.style=o.join(" ")),t}const zW="canvas",qW="png",GW="svg",VW="none",jc={Canvas:zW,PNG:qW,SVG:GW,None:VW},Dp={};Dp[zW]=Dp[qW]={renderer:Jv,headless:Jv,handler:Dm};Dp[GW]={renderer:pN,headless:gN,handler:lN};Dp[VW]={};function YE(t,e){return t=String(t||"").toLowerCase(),arguments.length>1?(Dp[t]=e,this):Dp[t]}function WW(t,e,n){const i=[],s=new $n().union(e),o=t.marktype;return o?HW(t,s,n,i):o==="group"?YW(t,s,n,i):de("Intersect scene must be mark node or group item.")}function HW(t,e,n,i){if(kwe(t,e,n)){const s=t.items,o=t.marktype,c=s.length;let d=0;if(o==="group")for(;d<c;++d)YW(s[d],e,n,i);else for(const f=Tr[o].isect;d<c;++d){const u=s[d];XW(u,e,f)&&i.push(u)}}return i}function kwe(t,e,n){return t.bounds&&e.intersects(t.bounds)&&(t.marktype==="group"||t.interactive!==!1&&(!n||n(t)))}function YW(t,e,n,i){n&&n(t.mark)&&XW(t,e,Tr.group.isect)&&i.push(t);const s=t.items,o=s&&s.length;if(o){const c=t.x||0,d=t.y||0;e.translate(-c,-d);for(let f=0;f<o;++f)HW(s[f],e,n,i);e.translate(c,d)}return i}function XW(t,e,n){const i=t.bounds;return e.encloses(i)||e.intersects(i)&&n(t,e)}const lB=new $n;function KW(t){const e=t.clip;if(wt(e))e(Cm(lB.clear()));else if(e)lB.set(0,0,t.group.width,t.group.height);else return;t.bounds.intersect(lB)}const Iwe=1e-9;function _N(t,e,n){return t===e?!0:n==="path"?JW(t,e):t instanceof Date&&e instanceof Date?+t==+e:cn(t)&&cn(e)?Math.abs(t-e)<=Iwe:!t||!e||!Fe(t)&&!Fe(e)?t==e:Fwe(t,e)}function JW(t,e){return _N(Rp(t),Rp(e))}function Fwe(t,e){var n=Object.keys(t),i=Object.keys(e),s,o;if(n.length!==i.length)return!1;for(n.sort(),i.sort(),o=n.length-1;o>=0;o--)if(n[o]!=i[o])return!1;for(o=n.length-1;o>=0;o--)if(s=n[o],!_N(t[s],e[s],s))return!1;return typeof t==typeof e}function Owe(){lW(),tye()}const jp="top",Ta="left",xa="right",md="bottom",Mwe="top-left",Awe="top-right",Nwe="bottom-left",Cwe="bottom-right",yN="start",AI="middle",is="end",Rwe="x",Lwe="y",XE="group",mN="axis",wN="title",Pwe="frame",Dwe="scope",bN="legend",QW="row-header",ZW="row-footer",eH="row-title",tH="column-header",nH="column-footer",iH="column-title",jwe="padding",Uwe="symbol",sH="fit",$we="fit-x",zwe="fit-y",qwe="pad",TN="none",Wb="all",NI="each",vN="flush",Uc="column",$c="row";function rH(t){oe.call(this,null,t)}ve(rH,oe,{transform(t,e){const n=e.dataflow,i=t.mark,s=i.marktype,o=Tr[s],c=o.bound;let d=i.bounds,f;if(o.nested)i.items.length&&n.dirty(i.items[0]),d=Hb(i,c),i.items.forEach(u=>{u.bounds.clear().union(d)});else if(s===XE||t.modified())switch(e.visit(e.MOD,u=>n.dirty(u)),d.clear(),i.items.forEach(u=>d.union(Hb(u,c))),i.role){case mN:case bN:case wN:e.reflow()}else f=e.changed(e.REM),e.visit(e.ADD,u=>{d.union(Hb(u,c))}),e.visit(e.MOD,u=>{f=f||d.alignsWith(u.bounds),n.dirty(u),d.union(Hb(u,c))}),f&&(d.clear(),i.items.forEach(u=>d.union(u.bounds)));return KW(i),e.modifies("bounds")}});function Hb(t,e,n){return e(t.bounds.clear(),t,n)}const X4=":vega_identifier:";function EN(t){oe.call(this,0,t)}EN.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};ve(EN,oe,{transform(t,e){const n=Gwe(e.dataflow),i=t.as;let s=n.value;return e.visit(e.ADD,o=>o[i]=o[i]||++s),n.set(this.value=s),e}});function Gwe(t){return t._signals[X4]||(t._signals[X4]=t.add(0))}function aH(t){oe.call(this,null,t)}ve(aH,oe,{transform(t,e){let n=this.value;n||(n=e.dataflow.scenegraph().mark(t.markdef,Vwe(t),t.index),n.group.context=t.context,t.context.group||(t.context.group=n.group),n.source=this.source,n.clip=t.clip,n.interactive=t.interactive,this.value=n);const i=n.marktype===XE?UE:jE;return e.visit(e.ADD,s=>i.call(s,n)),(t.modified("clip")||t.modified("interactive"))&&(n.clip=t.clip,n.interactive=!!t.interactive,n.zdirty=!0,e.reflow()),n.items=e.source,e}});function Vwe(t){const e=t.groups,n=t.parent;return e&&e.size===1?e.get(Object.keys(e.object)[0]):e&&n?e.lookup(n):null}function oH(t){oe.call(this,null,t)}const K4={parity:t=>t.filter((e,n)=>n%2?e.opacity=0:1),greedy:(t,e)=>{let n;return t.filter((i,s)=>!s||!lH(n.bounds,i.bounds,e)?(n=i,1):i.opacity=0)}},lH=(t,e,n)=>n>Math.max(e.x1-t.x2,t.x1-e.x2,e.y1-t.y2,t.y1-e.y2),J4=(t,e)=>{for(var n=1,i=t.length,s=t[0].bounds,o;n<i;s=o,++n)if(lH(s,o=t[n].bounds,e))return!0},Wwe=t=>{const e=t.bounds;return e.width()>1&&e.height()>1},Hwe=(t,e,n)=>{var i=t.range(),s=new $n;return e===jp||e===md?s.set(i[0],-1/0,i[1],1/0):s.set(-1/0,i[0],1/0,i[1]),s.expand(n||1),o=>s.encloses(o.bounds)},Q4=t=>(t.forEach(e=>e.opacity=1),t),Z4=(t,e)=>t.reflow(e.modified()).modifies("opacity");ve(oH,oe,{transform(t,e){const n=K4[t.method]||K4.parity,i=t.separation||0;let s=e.materialize(e.SOURCE).source,o,c;if(!s||!s.length)return;if(!t.method)return t.modified("method")&&(Q4(s),e=Z4(e,t)),e;if(s=s.filter(Wwe),!s.length)return;if(t.sort&&(s=s.slice().sort(t.sort)),o=Q4(s),e=Z4(e,t),o.length>=3&&J4(o,i)){do o=n(o,i);while(o.length>=3&&J4(o,i));o.length<3&&!Lt(s).opacity&&(o.length>1&&(Lt(o).opacity=0),Lt(s).opacity=1)}t.boundScale&&t.boundTolerance>=0&&(c=Hwe(t.boundScale,t.boundOrient,+t.boundTolerance),s.forEach(f=>{c(f)||(f.opacity=0)}));const d=o[0].mark.bounds.clear();return s.forEach(f=>{f.opacity&&d.union(f.bounds)}),e}});function cH(t){oe.call(this,null,t)}ve(cH,oe,{transform(t,e){const n=e.dataflow;if(e.visit(e.ALL,i=>n.dirty(i)),e.fields&&e.fields.zindex){const i=e.source&&e.source[0];i&&(i.mark.zdirty=!0)}}});const Ni=new $n;function Ah(t,e,n){return t[e]===n?0:(t[e]=n,1)}function Ywe(t){var e=t.items[0].orient;return e===Ta||e===xa}function Xwe(t){let e=+t.grid;return[t.ticks?e++:-1,t.labels?e++:-1,e+ +t.domain]}function Kwe(t,e,n,i){var s=e.items[0],o=s.datum,c=s.translate!=null?s.translate:.5,d=s.orient,f=Xwe(o),u=s.range,a=s.offset,_=s.position,w=s.minExtent,m=s.maxExtent,l=o.title&&s.items[f[2]].items[0],T=s.titlePadding,b=s.bounds,S=l&&iN(l),x=0,B=0,F,k;switch(Ni.clear().union(b),b.clear(),(F=f[0])>-1&&b.union(s.items[F].bounds),(F=f[1])>-1&&b.union(s.items[F].bounds),d){case jp:x=_||0,B=-a,k=Math.max(w,Math.min(m,-b.y1)),b.add(0,-k).add(u,0),l&&Yb(t,l,k,T,S,0,-1,b);break;case Ta:x=-a,B=_||0,k=Math.max(w,Math.min(m,-b.x1)),b.add(-k,0).add(0,u),l&&Yb(t,l,k,T,S,1,-1,b);break;case xa:x=n+a,B=_||0,k=Math.max(w,Math.min(m,b.x2)),b.add(0,0).add(k,u),l&&Yb(t,l,k,T,S,1,1,b);break;case md:x=_||0,B=i+a,k=Math.max(w,Math.min(m,b.y2)),b.add(0,0).add(u,k),l&&Yb(t,l,k,T,0,0,1,b);break;default:x=s.x,B=s.y}return sc(b.translate(x,B),s),Ah(s,"x",x+c)|Ah(s,"y",B+c)&&(s.bounds=Ni,t.dirty(s),s.bounds=b,t.dirty(s)),s.mark.bounds.clear().union(b)}function Yb(t,e,n,i,s,o,c,d){const f=e.bounds;if(e.auto){const u=c*(n+s+i);let a=0,_=0;t.dirty(e),o?a=(e.x||0)-(e.x=u):_=(e.y||0)-(e.y=u),e.mark.bounds.clear().union(f.translate(-a,-_)),t.dirty(e)}d.union(f)}const e6=(t,e)=>Math.floor(Math.min(t,e)),t6=(t,e)=>Math.ceil(Math.max(t,e));function Jwe(t){var e=t.items,n=e.length,i=0,s,o;const c={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;i<n;++i)if(s=e[i],o=s.items,s.marktype===XE)switch(s.role){case mN:case bN:case wN:break;case QW:c.rowheaders.push(...o);break;case ZW:c.rowfooters.push(...o);break;case tH:c.colheaders.push(...o);break;case nH:c.colfooters.push(...o);break;case eH:c.rowtitle=o[0];break;case iH:c.coltitle=o[0];break;default:c.marks.push(...o)}return c}function Qwe(t){return new $n().set(0,0,t.width||0,t.height||0)}function Zwe(t){const e=t.bounds.clone();return e.empty()?e.set(0,0,0,0):e.translate(-(t.x||0),-(t.y||0))}function Sn(t,e,n){const i=Fe(t)?t[e]:t;return i!=null?i:n!==void 0?n:0}function n6(t){return t<0?Math.ceil(-t):0}function dH(t,e,n){var i=!n.nodirty,s=n.bounds===vN?Qwe:Zwe,o=Ni.set(0,0,0,0),c=Sn(n.align,Uc),d=Sn(n.align,$c),f=Sn(n.padding,Uc),u=Sn(n.padding,$c),a=n.columns||e.length,_=a<=0?1:Math.ceil(e.length/a),w=e.length,m=Array(w),l=Array(a),T=0,b=Array(w),S=Array(_),x=0,B=Array(w),F=Array(w),k=Array(w),M,A,R,P,j,D,z,$,Y,W,H;for(A=0;A<a;++A)l[A]=0;for(A=0;A<_;++A)S[A]=0;for(A=0;A<w;++A)D=e[A],j=k[A]=s(D),D.x=D.x||0,B[A]=0,D.y=D.y||0,F[A]=0,R=A%a,P=~~(A/a),T=Math.max(T,z=Math.ceil(j.x2)),x=Math.max(x,$=Math.ceil(j.y2)),l[R]=Math.max(l[R],z),S[P]=Math.max(S[P],$),m[A]=f+n6(j.x1),b[A]=u+n6(j.y1),i&&t.dirty(e[A]);for(A=0;A<w;++A)A%a===0&&(m[A]=0),A<a&&(b[A]=0);if(c===NI)for(R=1;R<a;++R){for(H=0,A=R;A<w;A+=a)H<m[A]&&(H=m[A]);for(A=R;A<w;A+=a)m[A]=H+l[R-1]}else if(c===Wb){for(H=0,A=0;A<w;++A)A%a&&H<m[A]&&(H=m[A]);for(A=0;A<w;++A)A%a&&(m[A]=H+T)}else for(c=!1,R=1;R<a;++R)for(A=R;A<w;A+=a)m[A]+=l[R-1];if(d===NI)for(P=1;P<_;++P){for(H=0,A=P*a,M=A+a;A<M;++A)H<b[A]&&(H=b[A]);for(A=P*a;A<M;++A)b[A]=H+S[P-1]}else if(d===Wb){for(H=0,A=a;A<w;++A)H<b[A]&&(H=b[A]);for(A=a;A<w;++A)b[A]=H+x}else for(d=!1,P=1;P<_;++P)for(A=P*a,M=A+a;A<M;++A)b[A]+=S[P-1];for(Y=0,A=0;A<w;++A)Y=m[A]+(A%a?Y:0),B[A]+=Y-e[A].x;for(R=0;R<a;++R)for(W=0,A=R;A<w;A+=a)W+=b[A],F[A]+=W-e[A].y;if(c&&Sn(n.center,Uc)&&_>1)for(A=0;A<w;++A)j=c===Wb?T:l[A%a],Y=j-k[A].x2-e[A].x-B[A],Y>0&&(B[A]+=Y/2);if(d&&Sn(n.center,$c)&&a!==1)for(A=0;A<w;++A)j=d===Wb?x:S[~~(A/a)],W=j-k[A].y2-e[A].y-F[A],W>0&&(F[A]+=W/2);for(A=0;A<w;++A)o.union(k[A].translate(B[A],F[A]));switch(Y=Sn(n.anchor,Rwe),W=Sn(n.anchor,Lwe),Sn(n.anchor,Uc)){case is:Y-=o.width();break;case AI:Y-=o.width()/2}switch(Sn(n.anchor,$c)){case is:W-=o.height();break;case AI:W-=o.height()/2}for(Y=Math.round(Y),W=Math.round(W),o.clear(),A=0;A<w;++A)e[A].mark.bounds.clear();for(A=0;A<w;++A)D=e[A],D.x+=B[A]+=Y,D.y+=F[A]+=W,o.union(D.mark.bounds.union(D.bounds.translate(B[A],F[A]))),i&&t.dirty(D);return o}function ebe(t,e,n){var i=Jwe(e),s=i.marks,o=n.bounds===vN?tbe:nbe,c=n.offset,d=n.columns||s.length,f=d<=0?1:Math.ceil(s.length/d),u=f*d,a,_,w,m,l,T,b;const S=dH(t,s,n);S.empty()&&S.set(0,0,0,0),i.rowheaders&&(T=Sn(n.headerBand,$c,null),a=Xb(t,i.rowheaders,s,d,f,-Sn(c,"rowHeader"),e6,0,o,"x1",0,d,1,T)),i.colheaders&&(T=Sn(n.headerBand,Uc,null),_=Xb(t,i.colheaders,s,d,d,-Sn(c,"columnHeader"),e6,1,o,"y1",0,1,d,T)),i.rowfooters&&(T=Sn(n.footerBand,$c,null),w=Xb(t,i.rowfooters,s,d,f,Sn(c,"rowFooter"),t6,0,o,"x2",d-1,d,1,T)),i.colfooters&&(T=Sn(n.footerBand,Uc,null),m=Xb(t,i.colfooters,s,d,d,Sn(c,"columnFooter"),t6,1,o,"y2",u-d,1,d,T)),i.rowtitle&&(l=Sn(n.titleAnchor,$c),b=Sn(c,"rowTitle"),b=l===is?w+b:a-b,T=Sn(n.titleBand,$c,.5),i6(t,i.rowtitle,b,0,S,T)),i.coltitle&&(l=Sn(n.titleAnchor,Uc),b=Sn(c,"columnTitle"),b=l===is?m+b:_-b,T=Sn(n.titleBand,Uc,.5),i6(t,i.coltitle,b,1,S,T))}function tbe(t,e){return e==="x1"?t.x||0:e==="y1"?t.y||0:e==="x2"?(t.x||0)+(t.width||0):e==="y2"?(t.y||0)+(t.height||0):void 0}function nbe(t,e){return t.bounds[e]}function Xb(t,e,n,i,s,o,c,d,f,u,a,_,w,m){var l=n.length,T=0,b=0,S,x,B,F,k,M,A,R,P;if(!l)return T;for(S=a;S<l;S+=_)n[S]&&(T=c(T,f(n[S],u)));if(!e.length)return T;for(e.length>s&&(t.warn("Grid headers exceed limit: "+s),e=e.slice(0,s)),T+=o,x=0,F=e.length;x<F;++x)t.dirty(e[x]),e[x].mark.bounds.clear();for(S=a,x=0,F=e.length;x<F;++x,S+=_){for(M=e[x],k=M.mark.bounds,B=S;B>=0&&(A=n[B])==null;B-=w);d?(R=m==null?A.x:Math.round(A.bounds.x1+m*A.bounds.width()),P=T):(R=T,P=m==null?A.y:Math.round(A.bounds.y1+m*A.bounds.height())),k.union(M.bounds.translate(R-(M.x||0),P-(M.y||0))),M.x=R,M.y=P,t.dirty(M),b=c(b,k[u])}return b}function i6(t,e,n,i,s,o){if(!!e){t.dirty(e);var c=n,d=n;i?c=Math.round(s.x1+o*s.width()):d=Math.round(s.y1+o*s.height()),e.bounds.translate(c-(e.x||0),d-(e.y||0)),e.mark.bounds.clear().union(e.bounds),e.x=c,e.y=d,t.dirty(e)}}function ibe(t,e){const n=t[e]||{};return(i,s)=>n[i]!=null?n[i]:t[i]!=null?t[i]:s}function sbe(t,e){let n=-1/0;return t.forEach(i=>{i.offset!=null&&(n=Math.max(n,i.offset))}),n>-1/0?n:e}function rbe(t,e,n,i,s,o,c){const d=ibe(n,e),f=sbe(t,d("offset",0)),u=d("anchor",yN),a=u===is?1:u===AI?.5:0,_={align:NI,bounds:d("bounds",vN),columns:d("direction")==="vertical"?1:t.length,padding:d("margin",8),center:d("center"),nodirty:!0};switch(e){case Ta:_.anchor={x:Math.floor(i.x1)-f,column:is,y:a*(c||i.height()+2*i.y1),row:u};break;case xa:_.anchor={x:Math.ceil(i.x2)+f,y:a*(c||i.height()+2*i.y1),row:u};break;case jp:_.anchor={y:Math.floor(s.y1)-f,row:is,x:a*(o||s.width()+2*s.x1),column:u};break;case md:_.anchor={y:Math.ceil(s.y2)+f,x:a*(o||s.width()+2*s.x1),column:u};break;case Mwe:_.anchor={x:f,y:f};break;case Awe:_.anchor={x:o-f,y:f,column:is};break;case Nwe:_.anchor={x:f,y:c-f,row:is};break;case Cwe:_.anchor={x:o-f,y:c-f,column:is,row:is};break}return _}function abe(t,e){var n=e.items[0],i=n.datum,s=n.orient,o=n.bounds,c=n.x,d=n.y,f,u;return n._bounds?n._bounds.clear().union(o):n._bounds=o.clone(),o.clear(),lbe(t,n,n.items[0].items[0]),o=obe(n,o),f=2*n.padding,u=2*n.padding,o.empty()||(f=Math.ceil(o.width()+f),u=Math.ceil(o.height()+u)),i.type===Uwe&&cbe(n.items[0].items[0].items[0].items),s!==TN&&(n.x=c=0,n.y=d=0),n.width=f,n.height=u,sc(o.set(c,d,c+f,d+u),n),n.mark.bounds.clear().union(o),n}function obe(t,e){return t.items.forEach(n=>e.union(n.bounds)),e.x1=t.padding,e.y1=t.padding,e}function lbe(t,e,n){var i=e.padding,s=i-n.x,o=i-n.y;if(!e.datum.title)(s||o)&&Yg(t,n,s,o);else{var c=e.items[1].items[0],d=c.anchor,f=e.titlePadding||0,u=i-c.x,a=i-c.y;switch(c.orient){case Ta:s+=Math.ceil(c.bounds.width())+f;break;case xa:case md:break;default:o+=c.bounds.height()+f}switch((s||o)&&Yg(t,n,s,o),c.orient){case Ta:a+=oh(e,n,c,d,1,1);break;case xa:u+=oh(e,n,c,is,0,0)+f,a+=oh(e,n,c,d,1,1);break;case md:u+=oh(e,n,c,d,0,0),a+=oh(e,n,c,is,-1,0,1)+f;break;default:u+=oh(e,n,c,d,0,0)}(u||a)&&Yg(t,c,u,a),(u=Math.round(c.bounds.x1-i))<0&&(Yg(t,n,-u,0),Yg(t,c,-u,0))}}function oh(t,e,n,i,s,o,c){const d=t.datum.type!=="symbol",f=n.datum.vgrad,u=d&&(o||!f)&&!c?e.items[0]:e,a=u.bounds[s?"y2":"x2"]-t.padding,_=f&&o?a:0,w=f&&o?0:a,m=s<=0?0:iN(n);return Math.round(i===yN?_:i===is?w-m:.5*(a-m))}function Yg(t,e,n,i){e.x+=n,e.y+=i,e.bounds.translate(n,i),e.mark.bounds.translate(n,i),t.dirty(e)}function cbe(t){const e=t.reduce((n,i)=>(n[i.column]=Math.max(i.bounds.x2-i.x,n[i.column]||0),n),{});t.forEach(n=>{n.width=e[n.column],n.height=n.bounds.y2-n.y})}function dbe(t,e,n,i,s){var o=e.items[0],c=o.frame,d=o.orient,f=o.anchor,u=o.offset,a=o.padding,_=o.items[0].items[0],w=o.items[1]&&o.items[1].items[0],m=d===Ta||d===xa?i:n,l=0,T=0,b=0,S=0,x=0,B;if(c!==XE?d===Ta?(l=s.y2,m=s.y1):d===xa?(l=s.y1,m=s.y2):(l=s.x1,m=s.x2):d===Ta&&(l=i,m=0),B=f===yN?l:f===is?m:(l+m)/2,w&&w.text){switch(d){case jp:case md:x=_.bounds.height()+a;break;case Ta:S=_.bounds.width()+a;break;case xa:S=-_.bounds.width()-a;break}Ni.clear().union(w.bounds),Ni.translate(S-(w.x||0),x-(w.y||0)),Ah(w,"x",S)|Ah(w,"y",x)&&(t.dirty(w),w.bounds.clear().union(Ni),w.mark.bounds.clear().union(Ni),t.dirty(w)),Ni.clear().union(w.bounds)}else Ni.clear();switch(Ni.union(_.bounds),d){case jp:T=B,b=s.y1-Ni.height()-u;break;case Ta:T=s.x1-Ni.width()-u,b=B;break;case xa:T=s.x2+Ni.width()+u,b=B;break;case md:T=B,b=s.y2+u;break;default:T=o.x,b=o.y}return Ah(o,"x",T)|Ah(o,"y",b)&&(Ni.translate(T,b),t.dirty(o),o.bounds.clear().union(Ni),e.bounds.clear().union(Ni),t.dirty(o)),o.bounds}function fH(t){oe.call(this,null,t)}ve(fH,oe,{transform(t,e){const n=e.dataflow;return t.mark.items.forEach(i=>{t.layout&&ebe(n,i,t.layout),ube(n,i,t)}),fbe(t.mark.group)?e.reflow():e}});function fbe(t){return t&&t.mark.role!=="legend-entry"}function ube(t,e,n){var i=e.items,s=Math.max(0,e.width||0),o=Math.max(0,e.height||0),c=new $n().set(0,0,s,o),d=c.clone(),f=c.clone(),u=[],a,_,w,m,l,T;for(l=0,T=i.length;l<T;++l)switch(_=i[l],_.role){case mN:m=Ywe(_)?d:f,m.union(Kwe(t,_,s,o));break;case wN:a=_;break;case bN:u.push(abe(t,_));break;case Pwe:case Dwe:case QW:case ZW:case eH:case tH:case nH:case iH:d.union(_.bounds),f.union(_.bounds);break;default:c.union(_.bounds)}if(u.length){const b={};u.forEach(S=>{w=S.orient||xa,w!==TN&&(b[w]||(b[w]=[])).push(S)});for(const S in b){const x=b[S];dH(t,x,rbe(x,S,n.legends,d,f,s,o))}u.forEach(S=>{const x=S.bounds;if(x.equals(S._bounds)||(S.bounds=S._bounds,t.dirty(S),S.bounds=x,t.dirty(S)),n.autosize&&n.autosize.type===sH)switch(S.orient){case Ta:case xa:c.add(x.x1,0).add(x.x2,0);break;case jp:case md:c.add(0,x.y1).add(0,x.y2)}else c.union(x)})}c.union(d).union(f),a&&c.union(dbe(t,a,s,o,c)),e.clip&&c.set(0,0,e.width||0,e.height||0),hbe(t,e,c,n)}function hbe(t,e,n,i){const s=i.autosize||{},o=s.type;if(t._autosize<1||!o)return;let c=t._width,d=t._height,f=Math.max(0,e.width||0),u=Math.max(0,Math.ceil(-n.x1)),a=Math.max(0,e.height||0),_=Math.max(0,Math.ceil(-n.y1));const w=Math.max(0,Math.ceil(n.x2-f)),m=Math.max(0,Math.ceil(n.y2-a));if(s.contains===jwe){const l=t.padding();c-=l.left+l.right,d-=l.top+l.bottom}o===TN?(u=0,_=0,f=c,a=d):o===sH?(f=Math.max(0,c-u-w),a=Math.max(0,d-_-m)):o===$we?(f=Math.max(0,c-u-w),d=a+_+m):o===zwe?(c=f+u+w,a=Math.max(0,d-_-m)):o===qwe&&(c=f+u+w,d=a+_+m),t._resizeView(c,d,f,a,[u,_],s.resize)}const pbe=Object.freeze(Object.defineProperty({__proto__:null,bound:rH,identifier:EN,mark:aH,overlap:oH,render:cH,viewlayout:fH},Symbol.toStringTag,{value:"Module"}));function uH(t){oe.call(this,null,t)}ve(uH,oe,{transform(t,e){if(this.value&&!t.modified())return e.StopPropagation;var n=e.dataflow.locale(),i=e.fork(e.NO_SOURCE|e.NO_FIELDS),s=this.value,o=t.scale,c=t.count==null?t.values?t.values.length:10:t.count,d=DA(o,c,t.minstep),f=t.format||YV(n,o,d,t.formatSpecifier,t.formatType,!!t.values),u=t.values?HV(o,t.values,d):jA(o,d);return s&&(i.rem=s),s=u.map((a,_)=>Kt({index:_/(u.length-1||1),value:a,label:f(a)})),t.extra&&s.length&&s.push(Kt({index:-1,extra:{value:s[0].value},label:""})),i.source=s,i.add=s,this.value=s,i}});function hH(t){oe.call(this,null,t)}function gbe(){return Kt({})}function _be(t){const e=gg().test(n=>n.exit);return e.lookup=n=>e.get(t(n)),e}ve(hH,oe,{transform(t,e){var n=e.dataflow,i=e.fork(e.NO_SOURCE|e.NO_FIELDS),s=t.item||gbe,o=t.key||De,c=this.value;return he(i.encode)&&(i.encode=null),c&&(t.modified("key")||e.modified(o))&&de("DataJoin does not support modified key function or fields."),c||(e=e.addAll(),this.value=c=_be(o)),e.visit(e.ADD,d=>{const f=o(d);let u=c.get(f);u?u.exit?(c.empty--,i.add.push(u)):i.mod.push(u):(u=s(d),c.set(f,u),i.add.push(u)),u.datum=d,u.exit=!1}),e.visit(e.MOD,d=>{const f=o(d),u=c.get(f);u&&(u.datum=d,i.mod.push(u))}),e.visit(e.REM,d=>{const f=o(d),u=c.get(f);d===u.datum&&!u.exit&&(i.rem.push(u),u.exit=!0,++c.empty)}),e.changed(e.ADD_MOD)&&i.modifies("datum"),(e.clean()||t.clean&&c.empty>n.cleanThreshold)&&n.runAfter(c.clean),i}});function pH(t){oe.call(this,null,t)}ve(pH,oe,{transform(t,e){var n=e.fork(e.ADD_REM),i=t.mod||!1,s=t.encoders,o=e.encode;if(he(o))if(n.changed()||o.every(_=>s[_]))o=o[0],n.encode=null;else return e.StopPropagation;var c=o==="enter",d=s.update||wc,f=s.enter||wc,u=s.exit||wc,a=(o&&!c?s[o]:d)||wc;if(e.changed(e.ADD)&&(e.visit(e.ADD,_=>{f(_,t),d(_,t)}),n.modifies(f.output),n.modifies(d.output),a!==wc&&a!==d&&(e.visit(e.ADD,_=>{a(_,t)}),n.modifies(a.output))),e.changed(e.REM)&&u!==wc&&(e.visit(e.REM,_=>{u(_,t)}),n.modifies(u.output)),c||a!==wc){const _=e.MOD|(t.modified()?e.REFLOW:0);c?(e.visit(_,w=>{const m=f(w,t)||i;(a(w,t)||m)&&n.mod.push(w)}),n.mod.length&&n.modifies(f.output)):e.visit(_,w=>{(a(w,t)||i)&&n.mod.push(w)}),n.mod.length&&n.modifies(a.output)}return n.changed()?n:e.StopPropagation}});function gH(t){oe.call(this,[],t)}ve(gH,oe,{transform(t,e){if(this.value!=null&&!t.modified())return e.StopPropagation;var n=e.dataflow.locale(),i=e.fork(e.NO_SOURCE|e.NO_FIELDS),s=this.value,o=t.type||R0,c=t.scale,d=+t.limit,f=DA(c,t.count==null?5:t.count,t.minstep),u=!!t.values||o===R0,a=t.format||QV(n,c,f,o,t.formatSpecifier,t.formatType,u),_=t.values||JV(c,f),w,m,l,T,b;return s&&(i.rem=s),o===R0?(d&&_.length>d?(e.dataflow.warn("Symbol legend count exceeds limit, filtering items."),s=_.slice(0,d-1),b=!0):s=_,wt(l=t.size)?(!t.values&&c(s[0])===0&&(s=s.slice(1)),T=s.reduce((S,x)=>Math.max(S,l(x,t)),0)):l=Ki(T=l||8),s=s.map((S,x)=>Kt({index:x,label:a(S,x,s),value:S,offset:T,size:l(S,t)})),b&&(b=_[s.length],s.push(Kt({index:s.length,label:"\u2026".concat(_.length-s.length," entries"),value:b,offset:T,size:l(b,t)})))):o===z_e?(w=c.domain(),m=GV(c,w[0],Lt(w)),_.length<3&&!t.values&&w[0]!==Lt(w)&&(_=[w[0],Lt(w)]),s=_.map((S,x)=>Kt({index:x,label:a(S,x,_),value:S,perc:m(S)}))):(l=_.length-1,m=Z_e(c),s=_.map((S,x)=>Kt({index:x,label:a(S,x,_),value:S,perc:x?m(S):0,perc2:x===l?1:m(_[x+1])}))),i.source=s,i.add=s,this.value=s,i}});const ybe=t=>t.source.x,mbe=t=>t.source.y,wbe=t=>t.target.x,bbe=t=>t.target.y;function SN(t){oe.call(this,{},t)}SN.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};ve(SN,oe,{transform(t,e){var n=t.sourceX||ybe,i=t.sourceY||mbe,s=t.targetX||wbe,o=t.targetY||bbe,c=t.as||"path",d=t.orient||"vertical",f=t.shape||"line",u=s6.get(f+"-"+d)||s6.get(f);return u||de("LinkPath unsupported type: "+t.shape+(t.orient?"-"+t.orient:"")),e.visit(e.SOURCE,a=>{a[c]=u(n(a),i(a),s(a),o(a))}),e.reflow(t.modified()).modifies(c)}});const _H=(t,e,n,i)=>"M"+t+","+e+"L"+n+","+i,Tbe=(t,e,n,i)=>_H(e*Math.cos(t),e*Math.sin(t),i*Math.cos(n),i*Math.sin(n)),yH=(t,e,n,i)=>{var s=n-t,o=i-e,c=Math.sqrt(s*s+o*o)/2,d=180*Math.atan2(o,s)/Math.PI;return"M"+t+","+e+"A"+c+","+c+" "+d+" 0 1 "+n+","+i},vbe=(t,e,n,i)=>yH(e*Math.cos(t),e*Math.sin(t),i*Math.cos(n),i*Math.sin(n)),mH=(t,e,n,i)=>{const s=n-t,o=i-e,c=.2*(s+o),d=.2*(o-s);return"M"+t+","+e+"C"+(t+c)+","+(e+d)+" "+(n+d)+","+(i-c)+" "+n+","+i},Ebe=(t,e,n,i)=>mH(e*Math.cos(t),e*Math.sin(t),i*Math.cos(n),i*Math.sin(n)),Sbe=(t,e,n,i)=>"M"+t+","+e+"V"+i+"H"+n,xbe=(t,e,n,i)=>"M"+t+","+e+"H"+n+"V"+i,Bbe=(t,e,n,i)=>{const s=Math.cos(t),o=Math.sin(t),c=Math.cos(n),d=Math.sin(n),f=Math.abs(n-t)>Math.PI?n<=t:n>t;return"M"+e*s+","+e*o+"A"+e+","+e+" 0 0,"+(f?1:0)+" "+e*c+","+e*d+"L"+i*c+","+i*d},kbe=(t,e,n,i)=>{const s=(t+n)/2;return"M"+t+","+e+"C"+s+","+e+" "+s+","+i+" "+n+","+i},Ibe=(t,e,n,i)=>{const s=(e+i)/2;return"M"+t+","+e+"C"+t+","+s+" "+n+","+s+" "+n+","+i},Fbe=(t,e,n,i)=>{const s=Math.cos(t),o=Math.sin(t),c=Math.cos(n),d=Math.sin(n),f=(e+i)/2;return"M"+e*s+","+e*o+"C"+f*s+","+f*o+" "+f*c+","+f*d+" "+i*c+","+i*d},s6=gg({line:_H,"line-radial":Tbe,arc:yH,"arc-radial":vbe,curve:mH,"curve-radial":Ebe,"orthogonal-horizontal":Sbe,"orthogonal-vertical":xbe,"orthogonal-radial":Bbe,"diagonal-horizontal":kbe,"diagonal-vertical":Ibe,"diagonal-radial":Fbe});function xN(t){oe.call(this,null,t)}xN.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};ve(xN,oe,{transform(t,e){var n=t.as||["startAngle","endAngle"],i=n[0],s=n[1],o=t.field||ug,c=t.startAngle||0,d=t.endAngle!=null?t.endAngle:2*Math.PI,f=e.source,u=f.map(o),a=u.length,_=c,w=(d-c)/Sz(u),m=hr(a),l,T,b;for(t.sort&&m.sort((S,x)=>u[S]-u[x]),l=0;l<a;++l)b=u[m[l]],T=f[m[l]],T[i]=_,T[s]=_+=b*w;return this.value=u,e.reflow(t.modified()).modifies(n)}});const Obe=5;function Mbe(t){const e=t.type;return!t.bins&&(e===Ap||e===km||e===Im)}function wH(t){return RA(t)&&t!==Oo}const Abe=Ra(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function bH(t){oe.call(this,null,t),this.modified(!0)}ve(bH,oe,{transform(t,e){var n=e.dataflow,i=this.value,s=Nbe(t);(!i||s!==i.type)&&(this.value=i=Wt(s)());for(s in t)if(!Abe[s]){if(s==="padding"&&wH(i.type))continue;wt(i[s])?i[s](t[s]):n.warn("Unsupported scale property: "+s)}return jbe(i,t,Dbe(i,t,Rbe(i,t,n))),e.fork(e.NO_SOURCE|e.NO_FIELDS)}});function Nbe(t){var e=t.type,n="",i;return e===Oo?Oo+"-"+Ap:(Cbe(t)&&(i=t.rawDomain?t.rawDomain.length:t.domain?t.domain.length+ +(t.domainMid!=null):0,n=i===2?Oo+"-":i===3?mg+"-":""),(n+e||Ap).toLowerCase())}function Cbe(t){const e=t.type;return RA(e)&&e!==lu&&e!==cu&&(t.scheme||t.range&&t.range.length&&t.range.every(ke))}function Rbe(t,e,n){const i=Lbe(t,e.domainRaw,n);if(i>-1)return i;var s=e.domain,o=t.type,c=e.zero||e.zero===void 0&&Mbe(t),d,f;if(!s)return 0;if(wH(o)&&e.padding&&s[0]!==Lt(s)&&(s=Pbe(o,s,e.range,e.padding,e.exponent,e.constant)),(c||e.domainMin!=null||e.domainMax!=null||e.domainMid!=null)&&(d=(s=s.slice()).length-1||1,c&&(s[0]>0&&(s[0]=0),s[d]<0&&(s[d]=0)),e.domainMin!=null&&(s[0]=e.domainMin),e.domainMax!=null&&(s[d]=e.domainMax),e.domainMid!=null)){f=e.domainMid;const u=f>s[d]?d+1:f<s[0]?0:d;u!==d&&n.warn("Scale domainMid exceeds domain min or max.",f),s.splice(u,0,f)}return t.domain(TH(o,s,n)),o===MA&&t.unknown(e.domainImplicit?Gk:void 0),e.nice&&t.nice&&t.nice(e.nice!==!0&&DA(t,e.nice)||null),s.length}function Lbe(t,e,n){return e?(t.domain(TH(t.type,e,n)),e.length):-1}function Pbe(t,e,n,i,s,o){var c=Math.abs(Lt(n)-n[0]),d=c/(c-2*i),f=t===Ql?$M(e,null,d):t===Im?jv(e,null,d,.5):t===km?jv(e,null,d,s||1):t===CE?zM(e,null,d,o||1):UM(e,null,d);return e=e.slice(),e[0]=f[0],e[e.length-1]=f[1],e}function TH(t,e,n){if(jV(t)){var i=Math.abs(e.reduce((s,o)=>s+(o<0?-1:o>0?1:0),0));i!==e.length&&n.warn("Log scale domain includes zero: "+Se(e))}return e}function Dbe(t,e,n){let i=e.bins;if(i&&!he(i)){const s=t.domain(),o=s[0],c=Lt(s),d=i.step;let f=i.start==null?o:i.start,u=i.stop==null?c:i.stop;d||de("Scale bins parameter missing step property."),f<o&&(f=d*Math.ceil(o/d)),u>c&&(u=d*Math.floor(c/d)),i=hr(f,u+d/2,d)}return i?t.bins=i:t.bins&&delete t.bins,t.type===AA&&(i?!e.domain&&!e.domainRaw&&(t.domain(i),n=i.length):t.bins=t.domain()),n}function jbe(t,e,n){var i=t.type,s=e.round||!1,o=e.range;if(e.rangeStep!=null)o=Ube(i,e,n);else if(e.scheme&&(o=$be(i,e,n),wt(o))){if(t.interpolator)return t.interpolator(o);de("Scale type ".concat(i," does not support interpolating color schemes."))}if(o&&UV(i))return t.interpolator(PE(CI(o,e.reverse),e.interpolate,e.interpolateGamma));o&&e.interpolate&&t.interpolate?t.interpolate(LA(e.interpolate,e.interpolateGamma)):wt(t.round)?t.round(s):wt(t.rangeRound)&&t.interpolate(s?hm:Ad),o&&t.range(CI(o,e.reverse))}function Ube(t,e,n){t!==RV&&t!==wI&&de("Only band and point scales support rangeStep.");var i=(e.paddingOuter!=null?e.paddingOuter:e.padding)||0,s=t===wI?1:(e.paddingInner!=null?e.paddingInner:e.padding)||0;return[0,e.rangeStep*OA(n,s,i)]}function $be(t,e,n){var i=e.schemeExtent,s,o;return he(e.scheme)?o=PE(e.scheme,e.interpolate,e.interpolateGamma):(s=e.scheme.toLowerCase(),o=PA(s),o||de("Unrecognized scheme name: ".concat(e.scheme))),n=t===LE?n+1:t===AA?n-1:t===Np||t===RE?+e.schemeCount||Obe:n,UV(t)?r6(o,i,e.reverse):wt(o)?qV(r6(o,i),n):t===MA?o:o.slice(0,n)}function r6(t,e,n){return wt(t)&&(e||n)?zV(t,CI(e||[0,1],n)):t}function CI(t,e){return e?t.slice().reverse():t}function vH(t){oe.call(this,null,t)}ve(vH,oe,{transform(t,e){const n=t.modified("sort")||e.changed(e.ADD)||e.modified(t.sort.fields)||e.modified("datum");return n&&e.source.sort(Uu(t.sort)),this.modified(n),e}});const a6="zero",EH="center",SH="normalize",xH=["y0","y1"];function BN(t){oe.call(this,null,t)}BN.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:a6,values:[a6,EH,SH]},{name:"as",type:"string",array:!0,length:2,default:xH}]};ve(BN,oe,{transform(t,e){var n=t.as||xH,i=n[0],s=n[1],o=Uu(t.sort),c=t.field||ug,d=t.offset===EH?zbe:t.offset===SH?qbe:Gbe,f,u,a,_;for(f=Vbe(e.source,t.groupby,o,c),u=0,a=f.length,_=f.max;u<a;++u)d(f[u],_,c,i,s);return e.reflow(t.modified()).modifies(n)}});function zbe(t,e,n,i,s){for(var o=(e-t.sum)/2,c=t.length,d=0,f;d<c;++d)f=t[d],f[i]=o,f[s]=o+=Math.abs(n(f))}function qbe(t,e,n,i,s){for(var o=1/t.sum,c=0,d=t.length,f=0,u=0,a;f<d;++f)a=t[f],a[i]=c,a[s]=c=o*(u+=Math.abs(n(a)))}function Gbe(t,e,n,i,s){for(var o=0,c=0,d=t.length,f=0,u,a;f<d;++f)a=t[f],u=+n(a),u<0?(a[i]=c,a[s]=c+=u):(a[i]=o,a[s]=o+=u)}function Vbe(t,e,n,i){var s=[],o=T=>T(a),c,d,f,u,a,_,w,m,l;if(e==null)s.push(t.slice());else for(c={},d=0,f=t.length;d<f;++d)a=t[d],_=e.map(o),w=c[_],w||(c[_]=w=[],s.push(w)),w.push(a);for(_=0,l=0,u=s.length;_<u;++_){for(w=s[_],d=0,m=0,f=w.length;d<f;++d)m+=Math.abs(i(w[d]));w.sum=m,m>l&&(l=m),n&&w.sort(n)}return s.max=l,s}const Wbe=Object.freeze(Object.defineProperty({__proto__:null,axisticks:uH,datajoin:hH,encode:pH,legendentries:gH,linkpath:SN,pie:xN,scale:bH,sortitems:vH,stack:BN},Symbol.toStringTag,{value:"Module"}));var Hbe=Math.abs,RI=Math.cos,e1=Math.sin,Ybe=1e-6,BH=Math.PI,LI=BH/2,o6=Xbe(2);function l6(t){return t>1?LI:t<-1?-LI:Math.asin(t)}function Xbe(t){return t>0?Math.sqrt(t):0}function Kbe(t,e){var n=t*e1(e),i=30,s;do e-=s=(e+e1(e)-n)/(1+RI(e));while(Hbe(s)>Ybe&&--i>0);return e/2}function Jbe(t,e,n){function i(s,o){return[t*s*RI(o=Kbe(n,o)),e*e1(o)]}return i.invert=function(s,o){return o=l6(o/e),[s/(t*RI(o)),l6((2*o+e1(2*o))/n)]},i}var Qbe=Jbe(o6/LI,o6,BH);function Zbe(){return tl(Qbe).scale(169.529)}const e0e=X5(),PI=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function t0e(t,e){return function n(){const i=e();return i.type=t,i.path=X5().projection(i),i.copy=i.copy||function(){const s=n();return PI.forEach(o=>{i[o]&&s[o](i[o]())}),s.path.pointRadius(i.path.pointRadius()),s},i}}function kN(t,e){if(!t||typeof t!="string")throw new Error("Projection type must be a name string.");return t=t.toLowerCase(),arguments.length>1?(t1[t]=t0e(t,e),this):t1[t]||null}function kH(t){return t&&t.path||e0e}const t1={albers:J5,albersusa:zae,azimuthalequalarea:qae,azimuthalequidistant:Gae,conicconformal:Hae,conicequalarea:QT,conicequidistant:Kae,equalEarth:Qae,equirectangular:Yae,gnomonic:Zae,identity:eoe,mercator:Vae,mollweide:Zbe,naturalEarth1:toe,orthographic:noe,stereographic:ioe,transversemercator:soe};for(const t in t1)kN(t,t1[t]);function n0e(){}const yl=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function IH(){var t=1,e=1,n=d;function i(f,u){return u.map(a=>s(f,a))}function s(f,u){var a=[],_=[];return o(f,u,w=>{n(w,f,u),i0e(w)>0?a.push([w]):_.push(w)}),_.forEach(w=>{for(var m=0,l=a.length,T;m<l;++m)if(s0e((T=a[m])[0],w)!==-1){T.push(w);return}}),{type:"MultiPolygon",value:u,coordinates:a}}function o(f,u,a){var _=new Array,w=new Array,m,l,T,b,S,x;for(m=l=-1,b=f[0]>=u,yl[b<<1].forEach(B);++m<t-1;)T=b,b=f[m+1]>=u,yl[T|b<<1].forEach(B);for(yl[b<<0].forEach(B);++l<e-1;){for(m=-1,b=f[l*t+t]>=u,S=f[l*t]>=u,yl[b<<1|S<<2].forEach(B);++m<t-1;)T=b,b=f[l*t+t+m+1]>=u,x=S,S=f[l*t+m+1]>=u,yl[T|b<<1|S<<2|x<<3].forEach(B);yl[b|S<<3].forEach(B)}for(m=-1,S=f[l*t]>=u,yl[S<<2].forEach(B);++m<t-1;)x=S,S=f[l*t+m+1]>=u,yl[S<<2|x<<3].forEach(B);yl[S<<3].forEach(B);function B(F){var k=[F[0][0]+m,F[0][1]+l],M=[F[1][0]+m,F[1][1]+l],A=c(k),R=c(M),P,j;(P=w[A])?(j=_[R])?(delete w[P.end],delete _[j.start],P===j?(P.ring.push(M),a(P.ring)):_[P.start]=w[j.end]={start:P.start,end:j.end,ring:P.ring.concat(j.ring)}):(delete w[P.end],P.ring.push(M),w[P.end=R]=P):(P=_[R])?(j=w[A])?(delete _[P.start],delete w[j.end],P===j?(P.ring.push(M),a(P.ring)):_[j.start]=w[P.end]={start:j.start,end:P.end,ring:j.ring.concat(P.ring)}):(delete _[P.start],P.ring.unshift(k),_[P.start=A]=P):_[A]=w[R]={start:A,end:R,ring:[k,M]}}}function c(f){return f[0]*2+f[1]*(t+1)*4}function d(f,u,a){f.forEach(_=>{var w=_[0],m=_[1],l=w|0,T=m|0,b,S=u[T*t+l];w>0&&w<t&&l===w&&(b=u[T*t+l-1],_[0]=w+(a-b)/(S-b)-.5),m>0&&m<e&&T===m&&(b=u[(T-1)*t+l],_[1]=m+(a-b)/(S-b)-.5)})}return i.contour=s,i.size=function(f){if(!arguments.length)return[t,e];var u=Math.floor(f[0]),a=Math.floor(f[1]);return u>=0&&a>=0||de("invalid size"),t=u,e=a,i},i.smooth=function(f){return arguments.length?(n=f?d:n0e,i):n===d},i}function i0e(t){for(var e=0,n=t.length,i=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)i+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return i}function s0e(t,e){for(var n=-1,i=e.length,s;++n<i;)if(s=r0e(t,e[n]))return s;return 0}function r0e(t,e){for(var n=e[0],i=e[1],s=-1,o=0,c=t.length,d=c-1;o<c;d=o++){var f=t[o],u=f[0],a=f[1],_=t[d],w=_[0],m=_[1];if(a0e(f,_,e))return 0;a>i!=m>i&&n<(w-u)*(i-a)/(m-a)+u&&(s=-s)}return s}function a0e(t,e,n){var i;return o0e(t,e,n)&&l0e(t[i=+(t[0]===e[0])],n[i],e[i])}function o0e(t,e,n){return(e[0]-t[0])*(n[1]-t[1])===(n[0]-t[0])*(e[1]-t[1])}function l0e(t,e,n){return t<=e&&e<=n||n<=e&&e<=t}function FH(t,e,n){return function(i){var s=Wo(i),o=n?Math.min(s[0],0):s[0],c=s[1],d=c-o,f=e?rd(o,c,t):d/(t+1);return hr(o+f,c,f)}}function IN(t){oe.call(this,null,t)}IN.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};ve(IN,oe,{transform(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=e.materialize(e.SOURCE).source,s=t.field||Xi,o=IH().smooth(t.smooth!==!1),c=t.thresholds||c0e(i,s,t),d=t.as===null?null:t.as||"contour",f=[];return i.forEach(u=>{const a=s(u),_=o.size([a.width,a.height])(a.values,he(c)?c:c(a.values));d0e(_,a,u,t),_.forEach(w=>{f.push(OE(u,Kt(d!=null?{[d]:w}:w)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=f,n}});function c0e(t,e,n){const i=FH(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?i:i(t.map(s=>Uf(e(s).values)))}function d0e(t,e,n,i){let s=i.scale||e.scale,o=i.translate||e.translate;if(wt(s)&&(s=s(n,i)),wt(o)&&(o=o(n,i)),(s===1||s==null)&&!o)return;const c=(cn(s)?s:s[0])||1,d=(cn(s)?s:s[1])||1,f=o&&o[0]||0,u=o&&o[1]||0;t.forEach(OH(e,c,d,f,u))}function OH(t,e,n,i,s){const o=t.x1||0,c=t.y1||0,d=e*n<0;function f(_){_.forEach(u)}function u(_){d&&_.reverse(),_.forEach(a)}function a(_){_[0]=(_[0]-o)*e+i,_[1]=(_[1]-c)*n+s}return function(_){return _.coordinates.forEach(f),_}}function c6(t,e,n){const i=t>=0?t:sO(e,n);return Math.round((Math.sqrt(4*i*i+1)-1)/2)}function cB(t){return wt(t)?t:Ki(+t)}function MH(){var t=f=>f[0],e=f=>f[1],n=ug,i=[-1,-1],s=960,o=500,c=2;function d(f,u){const a=c6(i[0],f,t)>>c,_=c6(i[1],f,e)>>c,w=a?a+2:0,m=_?_+2:0,l=2*w+(s>>c),T=2*m+(o>>c),b=new Float32Array(l*T),S=new Float32Array(l*T);let x=b;f.forEach(F=>{const k=w+(+t(F)>>c),M=m+(+e(F)>>c);k>=0&&k<l&&M>=0&&M<T&&(b[k+M*l]+=+n(F))}),a>0&&_>0?(lh(l,T,b,S,a),ch(l,T,S,b,_),lh(l,T,b,S,a),ch(l,T,S,b,_),lh(l,T,b,S,a),ch(l,T,S,b,_)):a>0?(lh(l,T,b,S,a),lh(l,T,S,b,a),lh(l,T,b,S,a),x=S):_>0&&(ch(l,T,b,S,_),ch(l,T,S,b,_),ch(l,T,b,S,_),x=S);const B=u?Math.pow(2,-2*c):1/Sz(x);for(let F=0,k=l*T;F<k;++F)x[F]*=B;return{values:x,scale:1<<c,width:l,height:T,x1:w,y1:m,x2:w+(s>>c),y2:m+(o>>c)}}return d.x=function(f){return arguments.length?(t=cB(f),d):t},d.y=function(f){return arguments.length?(e=cB(f),d):e},d.weight=function(f){return arguments.length?(n=cB(f),d):n},d.size=function(f){if(!arguments.length)return[s,o];var u=+f[0],a=+f[1];return u>=0&&a>=0||de("invalid size"),s=u,o=a,d},d.cellSize=function(f){return arguments.length?((f=+f)>=1||de("invalid cell size"),c=Math.floor(Math.log(f)/Math.LN2),d):1<<c},d.bandwidth=function(f){return arguments.length?(f=Ie(f),f.length===1&&(f=[+f[0],+f[0]]),f.length!==2&&de("invalid bandwidth"),i=f,d):i},d}function lh(t,e,n,i,s){const o=(s<<1)+1;for(let c=0;c<e;++c)for(let d=0,f=0;d<t+s;++d)d<t&&(f+=n[d+c*t]),d>=s&&(d>=o&&(f-=n[d-o+c*t]),i[d-s+c*t]=f/Math.min(d+1,t-1+o-d,o))}function ch(t,e,n,i,s){const o=(s<<1)+1;for(let c=0;c<t;++c)for(let d=0,f=0;d<e+s;++d)d<e&&(f+=n[c+d*t]),d>=s&&(d>=o&&(f-=n[c+(d-o)*t]),i[c+(d-s)*t]=f/Math.min(d+1,e-1+o-d,o))}function FN(t){oe.call(this,null,t)}FN.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const f0e=["x","y","weight","size","cellSize","bandwidth"];function AH(t,e){return f0e.forEach(n=>e[n]!=null?t[n](e[n]):0),t}ve(FN,oe,{transform(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=e.materialize(e.SOURCE).source,s=u0e(i,t.groupby),o=(t.groupby||[]).map(Rn),c=AH(MH(),t),d=t.as||"grid",f=[];function u(a,_){for(let w=0;w<o.length;++w)a[o[w]]=_[w];return a}return f=s.map(a=>Kt(u({[d]:c(a,t.counts)},a.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=f,n}});function u0e(t,e){var n=[],i=a=>a(d),s,o,c,d,f,u;if(e==null)n.push(t);else for(s={},o=0,c=t.length;o<c;++o)d=t[o],f=e.map(i),u=s[f],u||(s[f]=u=[],u.dims=f,n.push(u)),u.push(d);return n}function ON(t){oe.call(this,null,t)}ON.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};ve(ON,oe,{transform(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=IH().smooth(t.smooth!==!1),s=t.values,o=t.thresholds||FH(t.count||10,t.nice,!!s),c=t.size,d,f;return s||(s=e.materialize(e.SOURCE).source,d=AH(MH(),t)(s,!0),f=OH(d,d.scale||1,d.scale||1,0,0),c=[d.width,d.height],s=d.values),o=he(o)?o:o(s),s=i.size(c)(s,o),f&&s.forEach(f),this.value&&(n.rem=this.value),this.value=n.source=n.add=(s||[]).map(Kt),n}});const DI="Feature",MN="FeatureCollection",h0e="MultiPoint";function AN(t){oe.call(this,null,t)}AN.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};ve(AN,oe,{transform(t,e){var n=this._features,i=this._points,s=t.fields,o=s&&s[0],c=s&&s[1],d=t.geojson||!s&&Xi,f=e.ADD,u;u=t.modified()||e.changed(e.REM)||e.modified(qi(d))||o&&e.modified(qi(o))||c&&e.modified(qi(c)),(!this.value||u)&&(f=e.SOURCE,this._features=n=[],this._points=i=[]),d&&e.visit(f,a=>n.push(d(a))),o&&c&&(e.visit(f,a=>{var _=o(a),w=c(a);_!=null&&w!=null&&(_=+_)===_&&(w=+w)===w&&i.push([_,w])}),n=n.concat({type:DI,geometry:{type:h0e,coordinates:i}})),this.value={type:MN,features:n}}});function NN(t){oe.call(this,null,t)}NN.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};ve(NN,oe,{transform(t,e){var n=e.fork(e.ALL),i=this.value,s=t.field||Xi,o=t.as||"path",c=n.SOURCE;!i||t.modified()?(this.value=i=kH(t.projection),n.materialize().reflow()):c=s===Xi||e.modified(s.fields)?n.ADD_MOD:n.ADD;const d=p0e(i,t.pointRadius);return n.visit(c,f=>f[o]=i(s(f))),i.pointRadius(d),n.modifies(o)}});function p0e(t,e){const n=t.pointRadius();return t.context(null),e!=null&&t.pointRadius(e),n}function CN(t){oe.call(this,null,t)}CN.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};ve(CN,oe,{transform(t,e){var n=t.projection,i=t.fields[0],s=t.fields[1],o=t.as||["x","y"],c=o[0],d=o[1],f;function u(a){const _=n([i(a),s(a)]);_?(a[c]=_[0],a[d]=_[1]):(a[c]=void 0,a[d]=void 0)}return t.modified()?e=e.materialize().reflow(!0).visit(e.SOURCE,u):(f=e.modified(i.fields)||e.modified(s.fields),e.visit(f?e.ADD_MOD:e.ADD,u)),e.modifies(o)}});function RN(t){oe.call(this,null,t)}RN.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};ve(RN,oe,{transform(t,e){var n=e.fork(e.ALL),i=this.value,s=t.as||"shape",o=n.ADD;return(!i||t.modified())&&(this.value=i=g0e(kH(t.projection),t.field||Vs("datum"),t.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,c=>c[s]=i),n.modifies(s)}});function g0e(t,e,n){const i=n==null?s=>t(e(s)):s=>{var o=t.pointRadius(),c=t.pointRadius(n)(e(s));return t.pointRadius(o),c};return i.context=s=>(t.context(s),i),i}function LN(t){oe.call(this,[],t),this.generator=bae()}LN.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};ve(LN,oe,{transform(t,e){var n=this.value,i=this.generator,s;if(!n.length||t.modified())for(const o in t)wt(i[o])&&i[o](t[o]);return s=i(),n.length?e.mod.push(nV(n[0],s)):e.add.push(Kt(s)),n[0]=s,e}});function PN(t){oe.call(this,null,t)}PN.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};ve(PN,oe,{transform(t,e){if(!e.changed()&&!t.modified())return e.StopPropagation;var n=e.materialize(e.SOURCE).source,i=t.resolve==="shared",s=t.field||Xi,o=y0e(t.opacity,t),c=_0e(t.color,t),d=t.as||"image",f={$x:0,$y:0,$value:0,$max:i?Uf(n.map(u=>Uf(s(u).values))):0};return n.forEach(u=>{const a=s(u),_=mt({},u,f);i||(_.$max=Uf(a.values||[])),u[d]=m0e(a,_,c.dep?c:Ki(c(_)),o.dep?o:Ki(o(_)))}),e.reflow(!0).modifies(d)}});function _0e(t,e){let n;return wt(t)?(n=i=>ad(t(i,e)),n.dep=NH(t)):n=Ki(ad(t||"#888")),n}function y0e(t,e){let n;return wt(t)?(n=i=>t(i,e),n.dep=NH(t)):t?n=Ki(t):(n=i=>i.$value/i.$max||0,n.dep=!0),n}function NH(t){if(!wt(t))return!1;const e=Ra(qi(t));return e.$x||e.$y||e.$value||e.$max}function m0e(t,e,n,i){const s=t.width,o=t.height,c=t.x1||0,d=t.y1||0,f=t.x2||s,u=t.y2||o,a=t.values,_=a?b=>a[b]:Cc,w=Xc(f-c,u-d),m=w.getContext("2d"),l=m.getImageData(0,0,f-c,u-d),T=l.data;for(let b=d,S=0;b<u;++b){e.$y=b-d;for(let x=c,B=b*s;x<f;++x,S+=4){e.$x=x-c,e.$value=_(x+B);const F=n(e);T[S+0]=F.r,T[S+1]=F.g,T[S+2]=F.b,T[S+3]=~~(255*i(e))}}return m.putImageData(l,0,0),w}function CH(t){oe.call(this,null,t),this.modified(!0)}ve(CH,oe,{transform(t,e){let n=this.value;return!n||t.modified("type")?(this.value=n=b0e(t.type),PI.forEach(i=>{t[i]!=null&&d6(n,i,t[i])})):PI.forEach(i=>{t.modified(i)&&d6(n,i,t[i])}),t.pointRadius!=null&&n.path.pointRadius(t.pointRadius),t.fit&&w0e(n,t),e.fork(e.NO_SOURCE|e.NO_FIELDS)}});function w0e(t,e){const n=T0e(e.fit);e.extent?t.fitExtent(e.extent,n):e.size&&t.fitSize(e.size,n)}function b0e(t){const e=kN((t||"mercator").toLowerCase());return e||de("Unrecognized projection type: "+t),e()}function d6(t,e,n){wt(t[e])&&t[e](n)}function T0e(t){return t=Ie(t),t.length===1?t[0]:{type:MN,features:t.reduce((e,n)=>e.concat(v0e(n)),[])}}function v0e(t){return t.type===MN?t.features:Ie(t).filter(e=>e!=null).map(e=>e.type===DI?e:{type:DI,geometry:e})}const E0e=Object.freeze(Object.defineProperty({__proto__:null,contour:ON,geojson:AN,geopath:NN,geopoint:CN,geoshape:RN,graticule:LN,heatmap:PN,isocontour:IN,kde2d:FN,projection:CH},Symbol.toStringTag,{value:"Module"})),f6={center:dre,collide:Fre,nbody:Ure,link:Mre,x:$re,y:zre},B_="forces",jI=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],S0e=["static","iterations"],RH=["x","y","vx","vy"];function DN(t){oe.call(this,null,t)}DN.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:RH}]};ve(DN,oe,{transform(t,e){var n=this.value,i=e.changed(e.ADD_REM),s=t.modified(jI),o=t.iterations||300;if(n?(i&&(e.modifies("index"),n.nodes(e.source)),(s||e.changed(e.MOD))&&LH(n,t,0,e)):(this.value=n=B0e(e.source,t),n.on("tick",x0e(e.dataflow,this)),t.static||(i=!0,n.tick()),e.modifies("index")),s||i||t.modified(S0e)||e.changed()&&t.restart){if(n.alpha(Math.max(n.alpha(),t.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/o)),t.static)for(n.stop();--o>=0;)n.tick();else if(n.stopped()&&n.restart(),!i)return e.StopPropagation}return this.finish(t,e)},finish(t,e){const n=e.dataflow;for(let d=this._argops,f=0,u=d.length,a;f<u;++f)if(a=d[f],!(a.name!==B_||a.op._argval.force!=="link")){for(var i=a.op._argops,s=0,o=i.length,c;s<o;++s)if(i[s].name==="links"&&(c=i[s].op.source)){n.pulse(c,n.changeset().reflow());break}}return e.reflow(t.modified()).modifies(RH)}});function x0e(t,e){return()=>t.touch(e).run()}function B0e(t,e){const n=jre(t),i=n.stop,s=n.restart;let o=!1;return n.stopped=()=>o,n.restart=()=>(o=!1,s()),n.stop=()=>(o=!0,i()),LH(n,e,!0).on("end",()=>o=!0)}function LH(t,e,n,i){var s=Ie(e.forces),o,c,d,f;for(o=0,c=jI.length;o<c;++o)d=jI[o],d!==B_&&e.modified(d)&&t[d](e[d]);for(o=0,c=s.length;o<c;++o)f=B_+o,d=n||e.modified(B_,o)?I0e(s[o]):i&&k0e(s[o],i)?t.force(f):null,d&&t.force(f,d);for(c=t.numForces||0;o<c;++o)t.force(B_+o,null);return t.numForces=s.length,t}function k0e(t,e){var n,i;for(n in t)if(wt(i=t[n])&&e.modified(qi(i)))return 1;return 0}function I0e(t){var e,n;Le(f6,t.force)||de("Unrecognized force: "+t.force),e=f6[t.force]();for(n in t)wt(e[n])&&F0e(e[n],t[n],t);return e}function F0e(t,e,n){t(wt(e)?i=>e(i,n):e)}const O0e=Object.freeze(Object.defineProperty({__proto__:null,force:DN},Symbol.toStringTag,{value:"Module"}));function UI(t,e,n){const i={};return t.each(s=>{const o=s.data;n(o)&&(i[e(o)]=s)}),t.lookup=i,t}function jN(t){oe.call(this,null,t)}jN.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const M0e=t=>t.values;ve(jN,oe,{transform(t,e){e.source||de("Nest transform requires an upstream data source.");var n=t.generate,i=t.modified(),s=e.clone(),o=this.value;return(!o||i||e.changed())&&(o&&o.each(c=>{c.children&&FE(c.data)&&s.rem.push(c.data)}),this.value=o=DO({values:Ie(t.keys).reduce((c,d)=>(c.key(d),c),A0e()).entries(s.source)},M0e),n&&o.each(c=>{c.children&&(c=Kt(c.data),s.add.push(c),s.source.push(c))}),UI(o,De,De)),s.source.root=o,s}});function A0e(){const t=[],e={entries:s=>i(n(s,0),0),key:s=>(t.push(s),e)};function n(s,o){if(o>=t.length)return s;const c=s.length,d=t[o++],f={},u={};let a=-1,_,w,m;for(;++a<c;)_=d(w=s[a])+"",(m=f[_])?m.push(w):f[_]=[w];for(_ in f)u[_]=n(f[_],o);return u}function i(s,o){if(++o>t.length)return s;const c=[];for(const d in s)c.push({key:d,values:i(s[d],o)});return c}return e}function rc(t){oe.call(this,null,t)}const N0e=(t,e)=>t.parent===e.parent?1:2;ve(rc,oe,{transform(t,e){(!e.source||!e.source.root)&&de(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(t.method),i=this.fields,s=e.source.root,o=t.as||i;t.field?s.sum(t.field):s.count(),t.sort&&s.sort(Uu(t.sort,c=>c.data)),C0e(n,this.params,t),n.separation&&n.separation(t.separation!==!1?N0e:ug);try{this.value=n(s)}catch(c){de(c)}return s.each(c=>R0e(c,i,o)),e.reflow(t.modified()).modifies(o).modifies("leaf")}});function C0e(t,e,n){for(let i,s=0,o=e.length;s<o;++s)i=e[s],i in n&&t[i](n[i])}function R0e(t,e,n){const i=t.data,s=e.length-1;for(let o=0;o<s;++o)i[n[o]]=t[e[o]];i[n[s]]=t.children?t.children.length:0}const $I=["x","y","r","depth","children"];function UN(t){rc.call(this,t)}UN.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:$I.length,default:$I}]};ve(UN,rc,{layout:qoe,params:["radius","size","padding"],fields:$I});const zI=["x0","y0","x1","y1","depth","children"];function $N(t){rc.call(this,t)}$N.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:zI.length,default:zI}]};ve($N,rc,{layout:Goe,params:["size","round","padding"],fields:zI});function zN(t){oe.call(this,null,t)}zN.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};ve(zN,oe,{transform(t,e){e.source||de("Stratify transform requires an upstream data source.");let n=this.value;const i=t.modified(),s=e.fork(e.ALL).materialize(e.SOURCE),o=!n||i||e.changed(e.ADD_REM)||e.modified(t.key.fields)||e.modified(t.parentKey.fields);return s.source=s.source.slice(),o&&(n=s.source.length?UI(gD().id(t.key).parentId(t.parentKey)(s.source),t.key,Xr):UI(gD()([{}]),t.key,t.key)),s.source.root=this.value=n,s}});const u6={tidy:ele,cluster:uoe},qI=["x","y","depth","children"];function qN(t){rc.call(this,t)}qN.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:qI.length,default:qI}]};ve(qN,rc,{layout(t){const e=t||"tidy";if(Le(u6,e))return u6[e]();de("Unrecognized Tree layout method: "+e)},params:["size","nodeSize"],fields:qI});function GN(t){oe.call(this,[],t)}GN.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};ve(GN,oe,{transform(t,e){const n=this.value,i=e.source&&e.source.root,s=e.fork(e.NO_SOURCE),o={};return i||de("TreeLinks transform requires a tree data source."),e.changed(e.ADD_REM)?(s.rem=n,e.visit(e.SOURCE,c=>o[De(c)]=1),i.each(c=>{const d=c.data,f=c.parent&&c.parent.data;f&&o[De(d)]&&o[De(f)]&&s.add.push(Kt({source:f,target:d}))}),this.value=s.add):e.changed(e.MOD)&&(e.visit(e.MOD,c=>o[De(c)]=1),n.forEach(c=>{(o[De(c.source)]||o[De(c.target)])&&s.mod.push(c)})),s}});const h6={binary:nle,dice:ym,slice:oE,slicedice:ile,squarify:gq,resquarify:sle},GI=["x0","y0","x1","y1","depth","children"];function VN(t){rc.call(this,t)}VN.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:GI.length,default:GI}]};ve(VN,rc,{layout(){const t=tle();return t.ratio=e=>{const n=t.tile();n.ratio&&t.tile(n.ratio(e))},t.method=e=>{Le(h6,e)?t.tile(h6[e]):de("Unrecognized Treemap layout method: "+e)},t},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:GI});const L0e=Object.freeze(Object.defineProperty({__proto__:null,nest:jN,pack:UN,partition:$N,stratify:zN,tree:qN,treelinks:GN,treemap:VN},Symbol.toStringTag,{value:"Module"})),dB=4278190080;function P0e(t,e){const n=t.bitmap();return(e||[]).forEach(i=>n.set(t(i.boundary[0]),t(i.boundary[3]))),[n,void 0]}function D0e(t,e,n,i,s){const o=t.width,c=t.height,d=i||s,f=Xc(o,c).getContext("2d"),u=Xc(o,c).getContext("2d"),a=d&&Xc(o,c).getContext("2d");n.forEach(R=>q0(f,R,!1)),q0(u,e,!1),d&&q0(a,e,!0);const _=fB(f,o,c),w=fB(u,o,c),m=d&&fB(a,o,c),l=t.bitmap(),T=d&&t.bitmap();let b,S,x,B,F,k,M,A;for(S=0;S<c;++S)for(b=0;b<o;++b)F=S*o+b,k=_[F]&dB,A=w[F]&dB,M=d&&m[F]&dB,(k||M||A)&&(x=t(b),B=t(S),!s&&(k||A)&&l.set(x,B),d&&(k||M)&&T.set(x,B));return[l,T]}function fB(t,e,n){return new Uint32Array(t.getImageData(0,0,e,n).data.buffer)}function q0(t,e,n){if(!e.length)return;const i=e[0].mark.marktype;i==="group"?e.forEach(s=>{s.items.forEach(o=>q0(t,o.items,n))}):Tr[i].draw(t,{items:n?e.map(j0e):e})}function j0e(t){const e=OE(t,{});return e.stroke&&e.strokeOpacity!==0||e.fill&&e.fillOpacity!==0?{...e,strokeOpacity:1,stroke:"#000",fillOpacity:0}:e}const ml=5,es=31,My=32,Oc=new Uint32Array(My+1),_a=new Uint32Array(My+1);_a[0]=0;Oc[0]=~_a[0];for(let t=1;t<=My;++t)_a[t]=_a[t-1]<<1|1,Oc[t]=~_a[t];function U0e(t,e){const n=new Uint32Array(~~((t*e+My)/My));function i(o,c){n[o]|=c}function s(o,c){n[o]&=c}return{array:n,get:(o,c)=>{const d=c*t+o;return n[d>>>ml]&1<<(d&es)},set:(o,c)=>{const d=c*t+o;i(d>>>ml,1<<(d&es))},clear:(o,c)=>{const d=c*t+o;s(d>>>ml,~(1<<(d&es)))},getRange:(o,c,d,f)=>{let u=f,a,_,w,m;for(;u>=c;--u)if(a=u*t+o,_=u*t+d,w=a>>>ml,m=_>>>ml,w===m){if(n[w]&Oc[a&es]&_a[(_&es)+1])return!0}else{if(n[w]&Oc[a&es]||n[m]&_a[(_&es)+1])return!0;for(let l=w+1;l<m;++l)if(n[l])return!0}return!1},setRange:(o,c,d,f)=>{let u,a,_,w,m;for(;c<=f;++c)if(u=c*t+o,a=c*t+d,_=u>>>ml,w=a>>>ml,_===w)i(_,Oc[u&es]&_a[(a&es)+1]);else for(i(_,Oc[u&es]),i(w,_a[(a&es)+1]),m=_+1;m<w;++m)i(m,4294967295)},clearRange:(o,c,d,f)=>{let u,a,_,w,m;for(;c<=f;++c)if(u=c*t+o,a=c*t+d,_=u>>>ml,w=a>>>ml,_===w)s(_,_a[u&es]|Oc[(a&es)+1]);else for(s(_,_a[u&es]),s(w,Oc[(a&es)+1]),m=_+1;m<w;++m)s(m,0)},outOfBounds:(o,c,d,f)=>o<0||c<0||f>=e||d>=t}}function $0e(t,e,n){const i=Math.max(1,Math.sqrt(t*e/1e6)),s=~~((t+2*n+i)/i),o=~~((e+2*n+i)/i),c=d=>~~((d+n)/i);return c.invert=d=>d*i-n,c.bitmap=()=>U0e(s,o),c.ratio=i,c.padding=n,c.width=t,c.height=e,c}function z0e(t,e,n,i){const s=t.width,o=t.height;return function(c){const d=c.datum.datum.items[i].items,f=d.length,u=c.datum.fontSize,a=Oa.width(c.datum,c.datum.text);let _=0,w,m,l,T,b,S,x;for(let B=0;B<f;++B)w=d[B].x,l=d[B].y,m=d[B].x2===void 0?w:d[B].x2,T=d[B].y2===void 0?l:d[B].y2,b=(w+m)/2,S=(l+T)/2,x=Math.abs(m-w+T-l),x>=_&&(_=x,c.x=b,c.y=S);return b=a/2,S=u/2,w=c.x-b,m=c.x+b,l=c.y-S,T=c.y+S,c.align="center",w<0&&m<=s?c.align="left":0<=w&&s<m&&(c.align="right"),c.baseline="middle",l<0&&T<=o?c.baseline="top":0<=l&&o<T&&(c.baseline="bottom"),!0}}function n1(t,e,n,i,s,o){let c=n/2;return t-c<0||t+c>s||e-(c=i/2)<0||e+c>o}function zc(t,e,n,i,s,o,c,d){const f=s*o/(i*2),u=t(e-f),a=t(e+f),_=t(n-(o=o/2)),w=t(n+o);return c.outOfBounds(u,_,a,w)||c.getRange(u,_,a,w)||d&&d.getRange(u,_,a,w)}function q0e(t,e,n,i){const s=t.width,o=t.height,c=e[0],d=e[1];function f(u,a,_,w,m){const l=t.invert(u),T=t.invert(a);let b=_,S=o,x;if(!n1(l,T,w,m,s,o)&&!zc(t,l,T,m,w,b,c,d)&&!zc(t,l,T,m,w,m,c,null)){for(;S-b>=1;)x=(b+S)/2,zc(t,l,T,m,w,x,c,d)?S=x:b=x;if(b>_)return[l,T,b,!0]}}return function(u){const a=u.datum.datum.items[i].items,_=a.length,w=u.datum.fontSize,m=Oa.width(u.datum,u.datum.text);let l=n?w:0,T=!1,b=!1,S=0,x,B,F,k,M,A,R,P,j,D,z,$,Y,W,H,J,V;for(let le=0;le<_;++le){for(x=a[le].x,F=a[le].y,B=a[le].x2===void 0?x:a[le].x2,k=a[le].y2===void 0?F:a[le].y2,x>B&&(V=x,x=B,B=V),F>k&&(V=F,F=k,k=V),j=t(x),z=t(B),D=~~((j+z)/2),$=t(F),W=t(k),Y=~~(($+W)/2),R=D;R>=j;--R)for(P=Y;P>=$;--P)J=f(R,P,l,m,w),J&&([u.x,u.y,l,T]=J);for(R=D;R<=z;++R)for(P=Y;P<=W;++P)J=f(R,P,l,m,w),J&&([u.x,u.y,l,T]=J);!T&&!n&&(H=Math.abs(B-x+k-F),M=(x+B)/2,A=(F+k)/2,H>=S&&!n1(M,A,m,w,s,o)&&!zc(t,M,A,w,m,w,c,null)&&(S=H,u.x=M,u.y=A,b=!0))}return T||b?(M=m/2,A=w/2,c.setRange(t(u.x-M),t(u.y-A),t(u.x+M),t(u.y+A)),u.align="center",u.baseline="middle",!0):!1}}const G0e=[-1,-1,1,1],V0e=[-1,1,-1,1];function W0e(t,e,n,i){const s=t.width,o=t.height,c=e[0],d=e[1],f=t.bitmap();return function(u){const a=u.datum.datum.items[i].items,_=a.length,w=u.datum.fontSize,m=Oa.width(u.datum,u.datum.text),l=[];let T=n?w:0,b=!1,S=!1,x=0,B,F,k,M,A,R,P,j,D,z,$,Y;for(let W=0;W<_;++W){for(B=a[W].x,k=a[W].y,F=a[W].x2===void 0?B:a[W].x2,M=a[W].y2===void 0?k:a[W].y2,l.push([t((B+F)/2),t((k+M)/2)]);l.length;)if([P,j]=l.pop(),!(c.get(P,j)||d.get(P,j)||f.get(P,j))){f.set(P,j);for(let H=0;H<4;++H)A=P+G0e[H],R=j+V0e[H],f.outOfBounds(A,R,A,R)||l.push([A,R]);if(A=t.invert(P),R=t.invert(j),D=T,z=o,!n1(A,R,m,w,s,o)&&!zc(t,A,R,w,m,D,c,d)&&!zc(t,A,R,w,m,w,c,null)){for(;z-D>=1;)$=(D+z)/2,zc(t,A,R,w,m,$,c,d)?z=$:D=$;D>T&&(u.x=A,u.y=R,T=D,b=!0)}}!b&&!n&&(Y=Math.abs(F-B+M-k),A=(B+F)/2,R=(k+M)/2,Y>=x&&!n1(A,R,m,w,s,o)&&!zc(t,A,R,w,m,w,c,null)&&(x=Y,u.x=A,u.y=R,S=!0))}return b||S?(A=m/2,R=w/2,c.setRange(t(u.x-A),t(u.y-R),t(u.x+A),t(u.y+R)),u.align="center",u.baseline="middle",!0):!1}}const H0e=["right","center","left"],Y0e=["bottom","middle","top"];function X0e(t,e,n,i){const s=t.width,o=t.height,c=e[0],d=e[1],f=i.length;return function(u){var a;const _=u.boundary,w=u.datum.fontSize;if(_[2]<0||_[5]<0||_[0]>s||_[3]>o)return!1;let m=(a=u.textWidth)!==null&&a!==void 0?a:0,l,T,b,S,x,B,F,k,M,A,R,P,j,D,z;for(let $=0;$<f;++$){if(l=(n[$]&3)-1,T=(n[$]>>>2&3)-1,b=l===0&&T===0||i[$]<0,S=l&&T?Math.SQRT1_2:1,x=i[$]<0?-1:1,B=_[1+l]+i[$]*l*S,R=_[4+T]+x*w*T/2+i[$]*T*S,k=R-w/2,M=R+w/2,P=t(B),D=t(k),z=t(M),!m)if(p6(P,P,D,z,c,d,B,B,k,M,_,b))m=Oa.width(u.datum,u.datum.text);else continue;if(A=B+x*m*l/2,B=A-m/2,F=A+m/2,P=t(B),j=t(F),p6(P,j,D,z,c,d,B,F,k,M,_,b))return u.x=l?l*x<0?F:B:A,u.y=T?T*x<0?M:k:R,u.align=H0e[l*x+1],u.baseline=Y0e[T*x+1],c.setRange(P,D,j,z),!0}return!1}}function p6(t,e,n,i,s,o,c,d,f,u,a,_){return!(s.outOfBounds(t,n,e,i)||(_&&o||s).getRange(t,n,e,i))}const uB=0,hB=4,pB=8,gB=0,_B=1,yB=2,K0e={"top-left":uB+gB,top:uB+_B,"top-right":uB+yB,left:hB+gB,middle:hB+_B,right:hB+yB,"bottom-left":pB+gB,bottom:pB+_B,"bottom-right":pB+yB},J0e={naive:z0e,"reduced-search":q0e,floodfill:W0e};function Q0e(t,e,n,i,s,o,c,d,f,u,a){if(!t.length)return t;const _=Math.max(i.length,s.length),w=Z0e(i,_),m=eTe(s,_),l=tTe(t[0].datum),T=l==="group"&&t[0].datum.items[f].marktype,b=T==="area",S=nTe(l,T,d,f),x=u===null||u===1/0,B=b&&a==="naive";let F=-1,k=-1;const M=t.map(j=>{const D=x?Oa.width(j,j.text):void 0;return F=Math.max(F,D),k=Math.max(k,j.fontSize),{datum:j,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:S(j),textWidth:D}});u=u===null||u===1/0?Math.max(F,k)+Math.max(...i):u;const A=$0e(e[0],e[1],u);let R;if(!B){n&&M.sort((z,$)=>n(z.datum,$.datum));let j=!1;for(let z=0;z<m.length&&!j;++z)j=m[z]===5||w[z]<0;const D=(l&&c||b)&&t.map(z=>z.datum);R=o.length||D?D0e(A,D||[],o,j,b):P0e(A,c&&M)}const P=b?J0e[a](A,R,c,f):X0e(A,R,m,w);return M.forEach(j=>j.opacity=+P(j)),M}function Z0e(t,e){const n=new Float64Array(e),i=t.length;for(let s=0;s<i;++s)n[s]=t[s]||0;for(let s=i;s<e;++s)n[s]=n[i-1];return n}function eTe(t,e){const n=new Int8Array(e),i=t.length;for(let s=0;s<i;++s)n[s]|=K0e[t[s]];for(let s=i;s<e;++s)n[s]=n[i-1];return n}function tTe(t){return t&&t.mark&&t.mark.marktype}function nTe(t,e,n,i){const s=o=>[o.x,o.x,o.x,o.y,o.y,o.y];return t?t==="line"||t==="area"?o=>s(o.datum):e==="line"?o=>{const c=o.datum.items[i].items;return s(c.length?c[n==="start"?0:c.length-1]:{x:NaN,y:NaN})}:o=>{const c=o.datum.bounds;return[c.x1,(c.x1+c.x2)/2,c.x2,c.y1,(c.y1+c.y2)/2,c.y2]}:s}const VI=["x","y","opacity","align","baseline"],PH=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function WN(t){oe.call(this,null,t)}WN.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:PH},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:VI.length,default:VI}]};ve(WN,oe,{transform(t,e){function n(o){const c=t[o];return wt(c)&&e.modified(c.fields)}const i=t.modified();if(!(i||e.changed(e.ADD_REM)||n("sort")))return;(!t.size||t.size.length!==2)&&de("Size parameter should be specified as a [width, height] array.");const s=t.as||VI;return Q0e(e.materialize(e.SOURCE).source||[],t.size,t.sort,Ie(t.offset==null?1:t.offset),Ie(t.anchor||PH),t.avoidMarks||[],t.avoidBaseMark!==!1,t.lineAnchor||"end",t.markIndex||0,t.padding===void 0?0:t.padding,t.method||"naive").forEach(o=>{const c=o.datum;c[s[0]]=o.x,c[s[1]]=o.y,c[s[2]]=o.opacity,c[s[3]]=o.align,c[s[4]]=o.baseline}),e.reflow(i).modifies(s)}});const iTe=Object.freeze(Object.defineProperty({__proto__:null,label:WN},Symbol.toStringTag,{value:"Module"}));function DH(t,e){var n=[],i=function(a){return a(d)},s,o,c,d,f,u;if(e==null)n.push(t);else for(s={},o=0,c=t.length;o<c;++o)d=t[o],f=e.map(i),u=s[f],u||(s[f]=u=[],u.dims=f,n.push(u)),u.push(d);return n}function HN(t){oe.call(this,null,t)}HN.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};ve(HN,oe,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const i=e.materialize(e.SOURCE).source,s=DH(i,t.groupby),o=(t.groupby||[]).map(Rn),c=o.length,d=t.as||[Rn(t.x),Rn(t.y)],f=[];s.forEach(u=>{Lz(u,t.x,t.y,t.bandwidth||.3).forEach(a=>{const _={};for(let w=0;w<c;++w)_[o[w]]=u.dims[w];_[d[0]]=a[0],_[d[1]]=a[1],f.push(Kt(_))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const WI={linear:yO,log:Az,exp:Nz,pow:Cz,quad:mO,poly:Rz},sTe=(t,e)=>t==="poly"?e:t==="quad"?2:1;function YN(t){oe.call(this,null,t)}YN.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(WI)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};ve(YN,oe,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const i=e.materialize(e.SOURCE).source,s=DH(i,t.groupby),o=(t.groupby||[]).map(Rn),c=t.method||"linear",d=t.order||3,f=sTe(c,d),u=t.as||[Rn(t.x),Rn(t.y)],a=WI[c],_=[];let w=t.extent;Le(WI,c)||de("Invalid regression method: "+c),w!=null&&c==="log"&&w[0]<=0&&(e.dataflow.warn("Ignoring extent with values <= 0 for log regression."),w=null),s.forEach(m=>{if(m.length<=f){e.dataflow.warn("Skipping regression with more parameters than data points.");return}const T=a(m,t.x,t.y,d);if(t.params){_.push(Kt({keys:m.dims,coef:T.coef,rSquared:T.rSquared}));return}const b=w||Wo(m,t.x),S=x=>{const B={};for(let F=0;F<o.length;++F)B[o[F]]=m.dims[F];B[u[0]]=x[0],B[u[1]]=x[1],_.push(Kt(B))};c==="linear"?b.forEach(x=>S([x,T.predict(x)])):J1(T.predict,b,25,200).forEach(S)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=_}return n}});const rTe=Object.freeze(Object.defineProperty({__proto__:null,loess:HN,regression:YN},Symbol.toStringTag,{value:"Module"}));function XN(t){oe.call(this,null,t)}XN.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const aTe=[-1e5,-1e5,1e5,1e5];ve(XN,oe,{transform(t,e){const n=t.as||"path",i=e.source;if(!i||!i.length)return e;let s=t.size;s=s?[0,0,s[0],s[1]]:(s=t.extent)?[s[0][0],s[0][1],s[1][0],s[1][1]]:aTe;const o=this.value=BO.from(i,t.x,t.y).voronoi(s);for(let c=0,d=i.length;c<d;++c){const f=o.cellPolygon(c);i[c][n]=f?oTe(f):null}return e.reflow(t.modified()).modifies(n)}});function oTe(t){const e=t[0][0],n=t[0][1];let i=t.length-1;for(;t[i][0]===e&&t[i][1]===n;--i);return"M"+t.slice(0,i+1).join("L")+"Z"}const lTe=Object.freeze(Object.defineProperty({__proto__:null,voronoi:XN},Symbol.toStringTag,{value:"Module"}));var mB=Math.PI/180,k_=1<<11>>5,G0=1<<11;function cTe(){var t=[256,256],e,n,i,s,o,c,d,f=jH,u=[],a=Math.random,_={};_.layout=function(){for(var l=w(Xc()),T=gTe((t[0]>>5)*t[1]),b=null,S=u.length,x=-1,B=[],F=u.map(M=>({text:e(M),font:n(M),style:s(M),weight:o(M),rotate:c(M),size:~~(i(M)+1e-14),padding:d(M),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:M})).sort((M,A)=>A.size-M.size);++x<S;){var k=F[x];k.x=t[0]*(a()+.5)>>1,k.y=t[1]*(a()+.5)>>1,dTe(l,k,F,x),k.hasText&&m(T,k,b)&&(B.push(k),b?uTe(b,k):b=[{x:k.x+k.x0,y:k.y+k.y0},{x:k.x+k.x1,y:k.y+k.y1}],k.x-=t[0]>>1,k.y-=t[1]>>1)}return B};function w(l){l.width=l.height=1;var T=Math.sqrt(l.getContext("2d").getImageData(0,0,1,1).data.length>>2);l.width=(k_<<5)/T,l.height=G0/T;var b=l.getContext("2d");return b.fillStyle=b.strokeStyle="red",b.textAlign="center",{context:b,ratio:T}}function m(l,T,b){for(var S=T.x,x=T.y,B=Math.sqrt(t[0]*t[0]+t[1]*t[1]),F=f(t),k=a()<.5?1:-1,M=-k,A,R,P;(A=F(M+=k))&&(R=~~A[0],P=~~A[1],!(Math.min(Math.abs(R),Math.abs(P))>=B));)if(T.x=S+R,T.y=x+P,!(T.x+T.x0<0||T.y+T.y0<0||T.x+T.x1>t[0]||T.y+T.y1>t[1])&&(!b||!fTe(T,l,t[0]))&&(!b||hTe(T,b))){for(var j=T.sprite,D=T.width>>5,z=t[0]>>5,$=T.x-(D<<4),Y=$&127,W=32-Y,H=T.y1-T.y0,J=(T.y+T.y0)*z+($>>5),V,le=0;le<H;le++){V=0;for(var pe=0;pe<=D;pe++)l[J+pe]|=V<<W|(pe<D?(V=j[le*D+pe])>>>Y:0);J+=z}return T.sprite=null,!0}return!1}return _.words=function(l){return arguments.length?(u=l,_):u},_.size=function(l){return arguments.length?(t=[+l[0],+l[1]],_):t},_.font=function(l){return arguments.length?(n=Zd(l),_):n},_.fontStyle=function(l){return arguments.length?(s=Zd(l),_):s},_.fontWeight=function(l){return arguments.length?(o=Zd(l),_):o},_.rotate=function(l){return arguments.length?(c=Zd(l),_):c},_.text=function(l){return arguments.length?(e=Zd(l),_):e},_.spiral=function(l){return arguments.length?(f=_Te[l]||l,_):f},_.fontSize=function(l){return arguments.length?(i=Zd(l),_):i},_.padding=function(l){return arguments.length?(d=Zd(l),_):d},_.random=function(l){return arguments.length?(a=l,_):a},_}function dTe(t,e,n,i){if(!e.sprite){var s=t.context,o=t.ratio;s.clearRect(0,0,(k_<<5)/o,G0/o);var c=0,d=0,f=0,u=n.length,a,_,w,m,l;for(--i;++i<u;){if(e=n[i],s.save(),s.font=e.style+" "+e.weight+" "+~~((e.size+1)/o)+"px "+e.font,a=s.measureText(e.text+"m").width*o,w=e.size<<1,e.rotate){var T=Math.sin(e.rotate*mB),b=Math.cos(e.rotate*mB),S=a*b,x=a*T,B=w*b,F=w*T;a=Math.max(Math.abs(S+F),Math.abs(S-F))+31>>5<<5,w=~~Math.max(Math.abs(x+B),Math.abs(x-B))}else a=a+31>>5<<5;if(w>f&&(f=w),c+a>=k_<<5&&(c=0,d+=f,f=0),d+w>=G0)break;s.translate((c+(a>>1))/o,(d+(w>>1))/o),e.rotate&&s.rotate(e.rotate*mB),s.fillText(e.text,0,0),e.padding&&(s.lineWidth=2*e.padding,s.strokeText(e.text,0,0)),s.restore(),e.width=a,e.height=w,e.xoff=c,e.yoff=d,e.x1=a>>1,e.y1=w>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,c+=a}for(var k=s.getImageData(0,0,(k_<<5)/o,G0/o).data,M=[];--i>=0;)if(e=n[i],!!e.hasText){for(a=e.width,_=a>>5,w=e.y1-e.y0,m=0;m<w*_;m++)M[m]=0;if(c=e.xoff,c==null)return;d=e.yoff;var A=0,R=-1;for(l=0;l<w;l++){for(m=0;m<a;m++){var P=_*l+(m>>5),j=k[(d+l)*(k_<<5)+(c+m)<<2]?1<<31-m%32:0;M[P]|=j,A|=j}A?R=l:(e.y0++,w--,l--,d++)}e.y1=e.y0+R,e.sprite=M.slice(0,(e.y1-e.y0)*_)}}}function fTe(t,e,n){n>>=5;for(var i=t.sprite,s=t.width>>5,o=t.x-(s<<4),c=o&127,d=32-c,f=t.y1-t.y0,u=(t.y+t.y0)*n+(o>>5),a,_=0;_<f;_++){a=0;for(var w=0;w<=s;w++)if((a<<d|(w<s?(a=i[_*s+w])>>>c:0))&e[u+w])return!0;u+=n}return!1}function uTe(t,e){var n=t[0],i=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>i.x&&(i.x=e.x+e.x1),e.y+e.y1>i.y&&(i.y=e.y+e.y1)}function hTe(t,e){return t.x+t.x1>e[0].x&&t.x+t.x0<e[1].x&&t.y+t.y1>e[0].y&&t.y+t.y0<e[1].y}function jH(t){var e=t[0]/t[1];return function(n){return[e*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function pTe(t){var e=4,n=e*t[0]/t[1],i=0,s=0;return function(o){var c=o<0?-1:1;switch(Math.sqrt(1+4*c*o)-c&3){case 0:i+=n;break;case 1:s+=e;break;case 2:i-=n;break;default:s-=e;break}return[i,s]}}function gTe(t){for(var e=[],n=-1;++n<t;)e[n]=0;return e}function Zd(t){return typeof t=="function"?t:function(){return t}}var _Te={archimedean:jH,rectangular:pTe};const UH=["x","y","font","fontSize","fontStyle","fontWeight","angle"],yTe=["text","font","rotate","fontSize","fontStyle","fontWeight"];function KN(t){oe.call(this,cTe(),t)}KN.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:UH}]};ve(KN,oe,{transform(t,e){t.size&&!(t.size[0]&&t.size[1])&&de("Wordcloud size dimensions must be non-zero.");function n(l){const T=t[l];return wt(T)&&e.modified(T.fields)}const i=t.modified();if(!(i||e.changed(e.ADD_REM)||yTe.some(n)))return;const s=e.materialize(e.SOURCE).source,o=this.value,c=t.as||UH;let d=t.fontSize||14,f;if(wt(d)?f=t.fontSizeRange:d=Ki(d),f){const l=d,T=Wt("sqrt")().domain(Wo(s,l)).range(f);d=b=>T(l(b))}s.forEach(l=>{l[c[0]]=NaN,l[c[1]]=NaN,l[c[3]]=0});const u=o.words(s).text(t.text).size(t.size||[500,500]).padding(t.padding||1).spiral(t.spiral||"archimedean").rotate(t.rotate||0).font(t.font||"sans-serif").fontStyle(t.fontStyle||"normal").fontWeight(t.fontWeight||"normal").fontSize(d).random(Wr).layout(),a=o.size(),_=a[0]>>1,w=a[1]>>1,m=u.length;for(let l=0,T,b;l<m;++l)T=u[l],b=T.datum,b[c[0]]=T.x+_,b[c[1]]=T.y+w,b[c[2]]=T.font,b[c[3]]=T.size,b[c[4]]=T.style,b[c[5]]=T.weight,b[c[6]]=T.rotate;return e.reflow(i).modifies(c)}});const mTe=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:KN},Symbol.toStringTag,{value:"Module"})),wTe=t=>new Uint8Array(t),bTe=t=>new Uint16Array(t),q_=t=>new Uint32Array(t);function TTe(){let t=8,e=[],n=q_(0),i=Kb(0,t),s=Kb(0,t);return{data:()=>e,seen:()=>n=vTe(n,e.length),add(o){for(let c=0,d=e.length,f=o.length,u;c<f;++c)u=o[c],u._index=d++,e.push(u)},remove(o,c){const d=e.length,f=Array(d-o),u=e;let a,_,w;for(_=0;!c[_]&&_<d;++_)f[_]=e[_],u[_]=_;for(w=_;_<d;++_)a=e[_],c[_]?u[_]=-1:(u[_]=w,i[w]=i[_],s[w]=s[_],f[w]=a,a._index=w++),i[_]=0;return e=f,u},size:()=>e.length,curr:()=>i,prev:()=>s,reset:o=>s[o]=i[o],all:()=>t<257?255:t<65537?65535:4294967295,set(o,c){i[o]|=c},clear(o,c){i[o]&=~c},resize(o,c){const d=i.length;(o>d||c>t)&&(t=Math.max(c,t),i=Kb(o,t,i),s=Kb(o,t))}}}function vTe(t,e,n){return t.length>=e?t:(n=n||new t.constructor(e),n.set(t),n)}function Kb(t,e,n){const i=(e<257?wTe:e<65537?bTe:q_)(t);return n&&i.set(n),i}function g6(t,e,n){const i=1<<e;return{one:i,zero:~i,range:n.slice(),bisect:t.bisect,index:t.index,size:t.size,onAdd(s,o){const c=this,d=c.bisect(c.range,s.value),f=s.index,u=d[0],a=d[1],_=f.length;let w;for(w=0;w<u;++w)o[f[w]]|=i;for(w=a;w<_;++w)o[f[w]]|=i;return c}}}function _6(){let t=q_(0),e=[],n=0;function i(d,f,u){if(!f.length)return[];const a=n,_=f.length,w=q_(_);let m=Array(_),l,T,b;for(b=0;b<_;++b)m[b]=d(f[b]),w[b]=b;if(m=ETe(m,w),a)l=e,T=t,e=Array(a+_),t=q_(a+_),STe(u,l,T,a,m,w,_,e,t);else{if(u>0)for(b=0;b<_;++b)w[b]+=u;e=m,t=w}return n=a+_,{index:w,value:m}}function s(d,f){const u=n;let a,_,w;for(_=0;!f[t[_]]&&_<u;++_);for(w=_;_<u;++_)f[a=t[_]]||(t[w]=a,e[w]=e[_],++w);n=u-d}function o(d){for(let f=0,u=n;f<u;++f)t[f]=d[t[f]]}function c(d,f){let u;return f?u=f.length:(f=e,u=n),[Tie(f,d[0],0,u),yT(f,d[1],0,u)]}return{insert:i,remove:s,bisect:c,reindex:o,index:()=>t,size:()=>n}}function ETe(t,e){return t.sort.call(e,(n,i)=>{const s=t[n],o=t[i];return s<o?-1:s>o?1:0}),Sie(t,e)}function STe(t,e,n,i,s,o,c,d,f){let u=0,a=0,_;for(_=0;u<i&&a<c;++_)e[u]<s[a]?(d[_]=e[u],f[_]=n[u++]):(d[_]=s[a],f[_]=o[a++]+t);for(;u<i;++u,++_)d[_]=e[u],f[_]=n[u];for(;a<c;++a,++_)d[_]=s[a],f[_]=o[a]+t}function JN(t){oe.call(this,TTe(),t),this._indices=null,this._dims=null}JN.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};ve(JN,oe,{transform(t,e){if(this._dims){var n=t.modified("fields")||t.fields.some(i=>e.modified(i.fields));return n?this.reinit(t,e):this.eval(t,e)}else return this.init(t,e)},init(t,e){const n=t.fields,i=t.query,s=this._indices={},o=this._dims=[],c=i.length;let d=0,f,u;for(;d<c;++d)f=n[d].fname,u=s[f]||(s[f]=_6()),o.push(g6(u,d,i[d]));return this.eval(t,e)},reinit(t,e){const n=e.materialize().fork(),i=t.fields,s=t.query,o=this._indices,c=this._dims,d=this.value,f=d.curr(),u=d.prev(),a=d.all(),_=n.rem=n.add,w=n.mod,m=s.length,l={};let T,b,S,x,B,F,k,M,A;if(u.set(f),e.rem.length&&(B=this.remove(t,e,n)),e.add.length&&d.add(e.add),e.mod.length)for(F={},x=e.mod,k=0,M=x.length;k<M;++k)F[x[k]._index]=1;for(k=0;k<m;++k)A=i[k],(!c[k]||t.modified("fields",k)||e.modified(A.fields))&&(S=A.fname,(T=l[S])||(o[S]=b=_6(),l[S]=T=b.insert(A,e.source,0)),c[k]=g6(b,k,s[k]).onAdd(T,f));for(k=0,M=d.data().length;k<M;++k)B[k]||(u[k]!==f[k]?_.push(k):F[k]&&f[k]!==a&&w.push(k));return d.mask=(1<<m)-1,n},eval(t,e){const n=e.materialize().fork(),i=this._dims.length;let s=0;return e.rem.length&&(this.remove(t,e,n),s|=(1<<i)-1),t.modified("query")&&!t.modified("fields")&&(s|=this.update(t,e,n)),e.add.length&&(this.insert(t,e,n),s|=(1<<i)-1),e.mod.length&&(this.modify(e,n),s|=(1<<i)-1),this.value.mask=s,n},insert(t,e,n){const i=e.add,s=this.value,o=this._dims,c=this._indices,d=t.fields,f={},u=n.add,a=s.size()+i.length,_=o.length;let w=s.size(),m,l,T;s.resize(a,_),s.add(i);const b=s.curr(),S=s.prev(),x=s.all();for(m=0;m<_;++m)l=d[m].fname,T=f[l]||(f[l]=c[l].insert(d[m],i,w)),o[m].onAdd(T,b);for(;w<a;++w)S[w]=x,b[w]!==x&&u.push(w)},modify(t,e){const n=e.mod,i=this.value,s=i.curr(),o=i.all(),c=t.mod;let d,f,u;for(d=0,f=c.length;d<f;++d)u=c[d]._index,s[u]!==o&&n.push(u)},remove(t,e,n){const i=this._indices,s=this.value,o=s.curr(),c=s.prev(),d=s.all(),f={},u=n.rem,a=e.rem;let _,w,m,l;for(_=0,w=a.length;_<w;++_)m=a[_]._index,f[m]=1,c[m]=l=o[m],o[m]=d,l!==d&&u.push(m);for(m in i)i[m].remove(w,f);return this.reindex(e,w,f),f},reindex(t,e,n){const i=this._indices,s=this.value;t.runAfter(()=>{const o=s.remove(e,n);for(const c in i)i[c].reindex(o)})},update(t,e,n){const i=this._dims,s=t.query,o=e.stamp,c=i.length;let d=0,f,u;for(n.filters=0,u=0;u<c;++u)t.modified("query",u)&&(f=u,++d);if(d===1)d=i[f].one,this.incrementOne(i[f],s[f],n.add,n.rem);else for(u=0,d=0;u<c;++u)!t.modified("query",u)||(d|=i[u].one,this.incrementAll(i[u],s[u],o,n.add),n.rem=n.add);return d},incrementAll(t,e,n,i){const s=this.value,o=s.seen(),c=s.curr(),d=s.prev(),f=t.index(),u=t.bisect(t.range),a=t.bisect(e),_=a[0],w=a[1],m=u[0],l=u[1],T=t.one;let b,S,x;if(_<m)for(b=_,S=Math.min(m,w);b<S;++b)x=f[b],o[x]!==n&&(d[x]=c[x],o[x]=n,i.push(x)),c[x]^=T;else if(_>m)for(b=m,S=Math.min(_,l);b<S;++b)x=f[b],o[x]!==n&&(d[x]=c[x],o[x]=n,i.push(x)),c[x]^=T;if(w>l)for(b=Math.max(_,l),S=w;b<S;++b)x=f[b],o[x]!==n&&(d[x]=c[x],o[x]=n,i.push(x)),c[x]^=T;else if(w<l)for(b=Math.max(m,w),S=l;b<S;++b)x=f[b],o[x]!==n&&(d[x]=c[x],o[x]=n,i.push(x)),c[x]^=T;t.range=e.slice()},incrementOne(t,e,n,i){const s=this.value,o=s.curr(),c=t.index(),d=t.bisect(t.range),f=t.bisect(e),u=f[0],a=f[1],_=d[0],w=d[1],m=t.one;let l,T,b;if(u<_)for(l=u,T=Math.min(_,a);l<T;++l)b=c[l],o[b]^=m,n.push(b);else if(u>_)for(l=_,T=Math.min(u,w);l<T;++l)b=c[l],o[b]^=m,i.push(b);if(a>w)for(l=Math.max(u,w),T=a;l<T;++l)b=c[l],o[b]^=m,n.push(b);else if(a<w)for(l=Math.max(_,a),T=w;l<T;++l)b=c[l],o[b]^=m,i.push(b);t.range=e.slice()}});function QN(t){oe.call(this,null,t)}QN.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};ve(QN,oe,{transform(t,e){const n=~(t.ignore||0),i=t.filter,s=i.mask;if((s&n)===0)return e.StopPropagation;const o=e.fork(e.ALL),c=i.data(),d=i.curr(),f=i.prev(),u=a=>d[a]&n?null:c[a];return o.filter(o.MOD,u),s&s-1?(o.filter(o.ADD,a=>{const _=d[a]&n;return!_&&_^f[a]&n?c[a]:null}),o.filter(o.REM,a=>{const _=d[a]&n;return _&&!(_^(_^f[a]&n))?c[a]:null})):(o.filter(o.ADD,u),o.filter(o.REM,a=>(d[a]&n)===s?c[a]:null)),o.filter(o.SOURCE,a=>u(a._index))}});const xTe=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:JN,resolvefilter:QN},Symbol.toStringTag,{value:"Module"})),BTe="RawCode",du="Literal",kTe="Property",ITe="Identifier",FTe="ArrayExpression",OTe="BinaryExpression",$H="CallExpression",MTe="ConditionalExpression",ATe="LogicalExpression",NTe="MemberExpression",CTe="ObjectExpression",RTe="UnaryExpression";function za(t){this.type=t}za.prototype.visit=function(t){let e,n,i;if(t(this))return 1;for(e=LTe(this),n=0,i=e.length;n<i;++n)if(e[n].visit(t))return 1};function LTe(t){switch(t.type){case FTe:return t.elements;case OTe:case ATe:return[t.left,t.right];case $H:return[t.callee].concat(t.arguments);case MTe:return[t.test,t.consequent,t.alternate];case NTe:return[t.object,t.property];case CTe:return t.properties;case kTe:return[t.key,t.value];case RTe:return[t.argument];case ITe:case du:case BTe:default:return[]}}var al,Ae,ce,Vi,on,KE=1,jm=2,fu=3,jd=4,JE=5,qu=6,xs=7,Um=8,PTe=9;al={};al[KE]="Boolean";al[jm]="<end>";al[fu]="Identifier";al[jd]="Keyword";al[JE]="Null";al[qu]="Numeric";al[xs]="Punctuator";al[Um]="String";al[PTe]="RegularExpression";var DTe="ArrayExpression",jTe="BinaryExpression",UTe="CallExpression",$Te="ConditionalExpression",zH="Identifier",zTe="Literal",qTe="LogicalExpression",GTe="MemberExpression",VTe="ObjectExpression",WTe="Property",HTe="UnaryExpression",gi="Unexpected token %0",YTe="Unexpected number",XTe="Unexpected string",KTe="Unexpected identifier",JTe="Unexpected reserved word",QTe="Unexpected end of input",HI="Invalid regular expression",wB="Invalid regular expression: missing /",qH="Octal literals are not allowed in strict mode.",ZTe="Duplicate data property in object literal not allowed in strict mode",xi="ILLEGAL",Ay="Disabled.",eve=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),tve=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function QE(t,e){if(!t)throw new Error("ASSERT: "+e)}function xl(t){return t>=48&&t<=57}function ZN(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function G_(t){return"01234567".indexOf(t)>=0}function nve(t){return t===32||t===9||t===11||t===12||t===160||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function Ny(t){return t===10||t===13||t===8232||t===8233}function $m(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t===92||t>=128&&eve.test(String.fromCharCode(t))}function i1(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||t===92||t>=128&&tve.test(String.fromCharCode(t))}const ive={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function GH(){for(;ce<Vi;){const t=Ae.charCodeAt(ce);if(nve(t)||Ny(t))++ce;else break}}function YI(t){var e,n,i,s=0;for(n=t==="u"?4:2,e=0;e<n;++e)ce<Vi&&ZN(Ae[ce])?(i=Ae[ce++],s=s*16+"0123456789abcdef".indexOf(i.toLowerCase())):Gt({},gi,xi);return String.fromCharCode(s)}function sve(){var t,e,n,i;for(t=Ae[ce],e=0,t==="}"&&Gt({},gi,xi);ce<Vi&&(t=Ae[ce++],!!ZN(t));)e=e*16+"0123456789abcdef".indexOf(t.toLowerCase());return(e>1114111||t!=="}")&&Gt({},gi,xi),e<=65535?String.fromCharCode(e):(n=(e-65536>>10)+55296,i=(e-65536&1023)+56320,String.fromCharCode(n,i))}function VH(){var t,e;for(t=Ae.charCodeAt(ce++),e=String.fromCharCode(t),t===92&&(Ae.charCodeAt(ce)!==117&&Gt({},gi,xi),++ce,t=YI("u"),(!t||t==="\\"||!$m(t.charCodeAt(0)))&&Gt({},gi,xi),e=t);ce<Vi&&(t=Ae.charCodeAt(ce),!!i1(t));)++ce,e+=String.fromCharCode(t),t===92&&(e=e.substr(0,e.length-1),Ae.charCodeAt(ce)!==117&&Gt({},gi,xi),++ce,t=YI("u"),(!t||t==="\\"||!i1(t.charCodeAt(0)))&&Gt({},gi,xi),e+=t);return e}function rve(){var t,e;for(t=ce++;ce<Vi;){if(e=Ae.charCodeAt(ce),e===92)return ce=t,VH();if(i1(e))++ce;else break}return Ae.slice(t,ce)}function ave(){var t,e,n;return t=ce,e=Ae.charCodeAt(ce)===92?VH():rve(),e.length===1?n=fu:ive.hasOwnProperty(e)?n=jd:e==="null"?n=JE:e==="true"||e==="false"?n=KE:n=fu,{type:n,value:e,start:t,end:ce}}function bB(){var t=ce,e=Ae.charCodeAt(ce),n,i=Ae[ce],s,o,c;switch(e){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ce,{type:xs,value:String.fromCharCode(e),start:t,end:ce};default:if(n=Ae.charCodeAt(ce+1),n===61)switch(e){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ce+=2,{type:xs,value:String.fromCharCode(e)+String.fromCharCode(n),start:t,end:ce};case 33:case 61:return ce+=2,Ae.charCodeAt(ce)===61&&++ce,{type:xs,value:Ae.slice(t,ce),start:t,end:ce}}}if(c=Ae.substr(ce,4),c===">>>=")return ce+=4,{type:xs,value:c,start:t,end:ce};if(o=c.substr(0,3),o===">>>"||o==="<<="||o===">>=")return ce+=3,{type:xs,value:o,start:t,end:ce};if(s=o.substr(0,2),i===s[1]&&"+-<>&|".indexOf(i)>=0||s==="=>")return ce+=2,{type:xs,value:s,start:t,end:ce};if(s==="//"&&Gt({},gi,xi),"<>=!+-*%&|^/".indexOf(i)>=0)return++ce,{type:xs,value:i,start:t,end:ce};Gt({},gi,xi)}function ove(t){let e="";for(;ce<Vi&&ZN(Ae[ce]);)e+=Ae[ce++];return e.length===0&&Gt({},gi,xi),$m(Ae.charCodeAt(ce))&&Gt({},gi,xi),{type:qu,value:parseInt("0x"+e,16),start:t,end:ce}}function lve(t){let e="0"+Ae[ce++];for(;ce<Vi&&G_(Ae[ce]);)e+=Ae[ce++];return($m(Ae.charCodeAt(ce))||xl(Ae.charCodeAt(ce)))&&Gt({},gi,xi),{type:qu,value:parseInt(e,8),octal:!0,start:t,end:ce}}function y6(){var t,e,n;if(n=Ae[ce],QE(xl(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),e=ce,t="",n!=="."){if(t=Ae[ce++],n=Ae[ce],t==="0"){if(n==="x"||n==="X")return++ce,ove(e);if(G_(n))return lve(e);n&&xl(n.charCodeAt(0))&&Gt({},gi,xi)}for(;xl(Ae.charCodeAt(ce));)t+=Ae[ce++];n=Ae[ce]}if(n==="."){for(t+=Ae[ce++];xl(Ae.charCodeAt(ce));)t+=Ae[ce++];n=Ae[ce]}if(n==="e"||n==="E")if(t+=Ae[ce++],n=Ae[ce],(n==="+"||n==="-")&&(t+=Ae[ce++]),xl(Ae.charCodeAt(ce)))for(;xl(Ae.charCodeAt(ce));)t+=Ae[ce++];else Gt({},gi,xi);return $m(Ae.charCodeAt(ce))&&Gt({},gi,xi),{type:qu,value:parseFloat(t),start:e,end:ce}}function cve(){var t="",e,n,i,s,o=!1;for(e=Ae[ce],QE(e==="'"||e==='"',"String literal must starts with a quote"),n=ce,++ce;ce<Vi;)if(i=Ae[ce++],i===e){e="";break}else if(i==="\\")if(i=Ae[ce++],!i||!Ny(i.charCodeAt(0)))switch(i){case"u":case"x":Ae[ce]==="{"?(++ce,t+=sve()):t+=YI(i);break;case"n":t+=`
`;break;case"r":t+="\r";break;case"t":t+="	";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:G_(i)?(s="01234567".indexOf(i),s!==0&&(o=!0),ce<Vi&&G_(Ae[ce])&&(o=!0,s=s*8+"01234567".indexOf(Ae[ce++]),"0123".indexOf(i)>=0&&ce<Vi&&G_(Ae[ce])&&(s=s*8+"01234567".indexOf(Ae[ce++]))),t+=String.fromCharCode(s)):t+=i;break}else i==="\r"&&Ae[ce]===`
`&&++ce;else{if(Ny(i.charCodeAt(0)))break;t+=i}return e!==""&&Gt({},gi,xi),{type:Um,value:t,octal:o,start:n,end:ce}}function dve(t,e){let n=t;e.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(i,s)=>{if(parseInt(s,16)<=1114111)return"x";Gt({},HI)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Gt({},HI)}try{return new RegExp(t,e)}catch{return null}}function fve(){var t,e,n,i,s;for(t=Ae[ce],QE(t==="/","Regular expression literal must start with a slash"),e=Ae[ce++],n=!1,i=!1;ce<Vi;)if(t=Ae[ce++],e+=t,t==="\\")t=Ae[ce++],Ny(t.charCodeAt(0))&&Gt({},wB),e+=t;else if(Ny(t.charCodeAt(0)))Gt({},wB);else if(n)t==="]"&&(n=!1);else if(t==="/"){i=!0;break}else t==="["&&(n=!0);return i||Gt({},wB),s=e.substr(1,e.length-2),{value:s,literal:e}}function uve(){var t,e,n;for(e="",n="";ce<Vi&&(t=Ae[ce],!!i1(t.charCodeAt(0)));)++ce,t==="\\"&&ce<Vi?Gt({},gi,xi):(n+=t,e+=t);return n.search(/[^gimuy]/g)>=0&&Gt({},HI,n),{value:n,literal:e}}function hve(){var t,e,n,i;return on=null,GH(),t=ce,e=fve(),n=uve(),i=dve(e.value,n.value),{literal:e.literal+n.literal,value:i,regex:{pattern:e.value,flags:n.value},start:t,end:ce}}function pve(t){return t.type===fu||t.type===jd||t.type===KE||t.type===JE}function WH(){if(GH(),ce>=Vi)return{type:jm,start:ce,end:ce};const t=Ae.charCodeAt(ce);return $m(t)?ave():t===40||t===41||t===59?bB():t===39||t===34?cve():t===46?xl(Ae.charCodeAt(ce+1))?y6():bB():xl(t)?y6():bB()}function As(){const t=on;return ce=t.end,on=WH(),ce=t.end,t}function HH(){const t=ce;on=WH(),ce=t}function gve(t){const e=new za(DTe);return e.elements=t,e}function m6(t,e,n){const i=new za(t==="||"||t==="&&"?qTe:jTe);return i.operator=t,i.left=e,i.right=n,i}function _ve(t,e){const n=new za(UTe);return n.callee=t,n.arguments=e,n}function yve(t,e,n){const i=new za($Te);return i.test=t,i.consequent=e,i.alternate=n,i}function eC(t){const e=new za(zH);return e.name=t,e}function I_(t){const e=new za(zTe);return e.value=t.value,e.raw=Ae.slice(t.start,t.end),t.regex&&(e.raw==="//"&&(e.raw="/(?:)/"),e.regex=t.regex),e}function w6(t,e,n){const i=new za(GTe);return i.computed=t==="[",i.object=e,i.property=n,i.computed||(n.member=!0),i}function mve(t){const e=new za(VTe);return e.properties=t,e}function b6(t,e,n){const i=new za(WTe);return i.key=e,i.value=n,i.kind=t,i}function wve(t,e){const n=new za(HTe);return n.operator=t,n.argument=e,n.prefix=!0,n}function Gt(t,e){var n,i=Array.prototype.slice.call(arguments,2),s=e.replace(/%(\d)/g,(o,c)=>(QE(c<i.length,"Message reference must be in range"),i[c]));throw n=new Error(s),n.index=ce,n.description=s,n}function ZE(t){t.type===jm&&Gt(t,QTe),t.type===qu&&Gt(t,YTe),t.type===Um&&Gt(t,XTe),t.type===fu&&Gt(t,KTe),t.type===jd&&Gt(t,JTe),Gt(t,gi,t.value)}function Wi(t){const e=As();(e.type!==xs||e.value!==t)&&ZE(e)}function bn(t){return on.type===xs&&on.value===t}function TB(t){return on.type===jd&&on.value===t}function bve(){const t=[];for(ce=on.start,Wi("[");!bn("]");)bn(",")?(As(),t.push(null)):(t.push(uu()),bn("]")||Wi(","));return As(),gve(t)}function T6(){ce=on.start;const t=As();return t.type===Um||t.type===qu?(t.octal&&Gt(t,qH),I_(t)):eC(t.value)}function Tve(){var t,e,n,i;if(ce=on.start,t=on,t.type===fu)return n=T6(),Wi(":"),i=uu(),b6("init",n,i);if(t.type===jm||t.type===xs)ZE(t);else return e=T6(),Wi(":"),i=uu(),b6("init",e,i)}function vve(){var t=[],e,n,i,s={},o=String;for(ce=on.start,Wi("{");!bn("}");)e=Tve(),e.key.type===zH?n=e.key.name:n=o(e.key.value),i="$"+n,Object.prototype.hasOwnProperty.call(s,i)?Gt({},ZTe):s[i]=!0,t.push(e),bn("}")||Wi(",");return Wi("}"),mve(t)}function Eve(){Wi("(");const t=tC();return Wi(")"),t}const Sve={if:1};function xve(){var t,e,n;if(bn("("))return Eve();if(bn("["))return bve();if(bn("{"))return vve();if(t=on.type,ce=on.start,t===fu||Sve[on.value])n=eC(As().value);else if(t===Um||t===qu)on.octal&&Gt(on,qH),n=I_(As());else{if(t===jd)throw new Error(Ay);t===KE?(e=As(),e.value=e.value==="true",n=I_(e)):t===JE?(e=As(),e.value=null,n=I_(e)):bn("/")||bn("/=")?(n=I_(hve()),HH()):ZE(As())}return n}function Bve(){const t=[];if(Wi("("),!bn(")"))for(;ce<Vi&&(t.push(uu()),!bn(")"));)Wi(",");return Wi(")"),t}function kve(){ce=on.start;const t=As();return pve(t)||ZE(t),eC(t.value)}function Ive(){return Wi("."),kve()}function Fve(){Wi("[");const t=tC();return Wi("]"),t}function Ove(){var t,e,n;for(t=xve();;)if(bn("."))n=Ive(),t=w6(".",t,n);else if(bn("("))e=Bve(),t=_ve(t,e);else if(bn("["))n=Fve(),t=w6("[",t,n);else break;return t}function v6(){const t=Ove();if(on.type===xs&&(bn("++")||bn("--")))throw new Error(Ay);return t}function V0(){var t,e;if(on.type!==xs&&on.type!==jd)e=v6();else{if(bn("++")||bn("--"))throw new Error(Ay);if(bn("+")||bn("-")||bn("~")||bn("!"))t=As(),e=V0(),e=wve(t.value,e);else{if(TB("delete")||TB("void")||TB("typeof"))throw new Error(Ay);e=v6()}}return e}function E6(t){let e=0;if(t.type!==xs&&t.type!==jd)return 0;switch(t.value){case"||":e=1;break;case"&&":e=2;break;case"|":e=3;break;case"^":e=4;break;case"&":e=5;break;case"==":case"!=":case"===":case"!==":e=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":e=7;break;case"<<":case">>":case">>>":e=8;break;case"+":case"-":e=9;break;case"*":case"/":case"%":e=11;break}return e}function Mve(){var t,e,n,i,s,o,c,d,f,u;if(t=on,f=V0(),i=on,s=E6(i),s===0)return f;for(i.prec=s,As(),e=[t,on],c=V0(),o=[f,i,c];(s=E6(on))>0;){for(;o.length>2&&s<=o[o.length-2].prec;)c=o.pop(),d=o.pop().value,f=o.pop(),e.pop(),n=m6(d,f,c),o.push(n);i=As(),i.prec=s,o.push(i),e.push(on),n=V0(),o.push(n)}for(u=o.length-1,n=o[u],e.pop();u>1;)e.pop(),n=m6(o[u-1].value,o[u-2],n),u-=2;return n}function uu(){var t,e,n;return t=Mve(),bn("?")&&(As(),e=uu(),Wi(":"),n=uu(),t=yve(t,e,n)),t}function tC(){const t=uu();if(bn(","))throw new Error(Ay);return t}function nC(t){Ae=t,ce=0,Vi=Ae.length,on=null,HH();const e=tC();if(on.type!==jm)throw new Error("Unexpect token after expression.");return e}var YH={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function XH(t){function e(c,d,f,u){let a=t(d[0]);return f&&(a=f+"("+a+")",f.lastIndexOf("new ",0)===0&&(a="("+a+")")),a+"."+c+(u<0?"":u===0?"()":"("+d.slice(1).map(t).join(",")+")")}function n(c,d,f){return u=>e(c,u,d,f)}const i="new Date",s="String",o="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(c){c.length<3&&de("Missing arguments to clamp function."),c.length>3&&de("Too many arguments to clamp function.");const d=c.map(t);return"Math.max("+d[1]+", Math.min("+d[2]+","+d[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:i,date:n("getDate",i,0),day:n("getDay",i,0),year:n("getFullYear",i,0),month:n("getMonth",i,0),hours:n("getHours",i,0),minutes:n("getMinutes",i,0),seconds:n("getSeconds",i,0),milliseconds:n("getMilliseconds",i,0),time:n("getTime",i,0),timezoneoffset:n("getTimezoneOffset",i,0),utcdate:n("getUTCDate",i,0),utcday:n("getUTCDay",i,0),utcyear:n("getUTCFullYear",i,0),utcmonth:n("getUTCMonth",i,0),utchours:n("getUTCHours",i,0),utcminutes:n("getUTCMinutes",i,0),utcseconds:n("getUTCSeconds",i,0),utcmilliseconds:n("getUTCMilliseconds",i,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",s,0),lower:n("toLowerCase",s,0),substring:n("substring",s),split:n("split",s),trim:n("trim",s,0),regexp:o,test:n("test",o),if:function(c){c.length<3&&de("Missing arguments to if function."),c.length>3&&de("Too many arguments to if function.");const d=c.map(t);return"("+d[0]+"?"+d[1]+":"+d[2]+")"}}}function Ave(t){const e=t&&t.length-1;return e&&(t[0]==='"'&&t[e]==='"'||t[0]==="'"&&t[e]==="'")?t.slice(1,-1):t}function KH(t){t=t||{};const e=t.allowed?Ra(t.allowed):{},n=t.forbidden?Ra(t.forbidden):{},i=t.constants||YH,s=(t.functions||XH)(_),o=t.globalvar,c=t.fieldvar,d=wt(o)?o:l=>`${o}["${l}"]`;let f={},u={},a=0;function _(l){if(ke(l))return l;const T=w[l.type];return T==null&&de("Unsupported type: "+l.type),T(l)}const w={Literal:l=>l.raw,Identifier:l=>{const T=l.name;return a>0?T:Le(n,T)?de("Illegal identifier: "+T):Le(i,T)?i[T]:Le(e,T)?T:(f[T]=1,d(T))},MemberExpression:l=>{const T=!l.computed,b=_(l.object);T&&(a+=1);const S=_(l.property);return b===c&&(u[Ave(S)]=1),T&&(a-=1),b+(T?"."+S:"["+S+"]")},CallExpression:l=>{l.callee.type!=="Identifier"&&de("Illegal callee type: "+l.callee.type);const T=l.callee.name,b=l.arguments,S=Le(s,T)&&s[T];return S||de("Unrecognized function: "+T),wt(S)?S(b):S+"("+b.map(_).join(",")+")"},ArrayExpression:l=>"["+l.elements.map(_).join(",")+"]",BinaryExpression:l=>"("+_(l.left)+" "+l.operator+" "+_(l.right)+")",UnaryExpression:l=>"("+l.operator+_(l.argument)+")",ConditionalExpression:l=>"("+_(l.test)+"?"+_(l.consequent)+":"+_(l.alternate)+")",LogicalExpression:l=>"("+_(l.left)+l.operator+_(l.right)+")",ObjectExpression:l=>"{"+l.properties.map(_).join(",")+"}",Property:l=>{a+=1;const T=_(l.key);return a-=1,T+":"+_(l.value)}};function m(l){const T={code:_(l),globals:Object.keys(f),fields:Object.keys(u)};return f={},u={},T}return m.functions=s,m.constants=i,m}function S6(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Nve(t){let e=t,n=t,i=t;t.length!==2&&(e=(d,f)=>t(d)-f,n=S6,i=(d,f)=>S6(t(d),f));function s(d,f,u=0,a=d.length){if(u<a){if(n(f,f)!==0)return a;do{const _=u+a>>>1;i(d[_],f)<0?u=_+1:a=_}while(u<a)}return u}function o(d,f,u=0,a=d.length){if(u<a){if(n(f,f)!==0)return a;do{const _=u+a>>>1;i(d[_],f)<=0?u=_+1:a=_}while(u<a)}return u}function c(d,f,u=0,a=d.length){const _=s(d,f,u,a-1);return _>u&&e(d[_-1],f)>-e(d[_],f)?_-1:_}return{left:s,center:c,right:o}}function Cve(t,...e){t=new mT(t),e=e.map(Rve);e:for(const n of t)for(const i of e)if(!i.has(n)){t.delete(n);continue e}return t}function Rve(t){return t instanceof mT?t:new mT(t)}function Lve(...t){const e=new mT;for(const n of t)for(const i of n)e.add(i);return e}const iC="intersect",x6="union",Pve="vlMulti",Dve="vlPoint",B6="or",jve="and",to="_vgsid_",Cy=Vs(to),Uve="E",$ve="R",zve="R-E",qve="R-LE",Gve="R-RE",s1="index:unit";function k6(t,e){for(var n=e.fields,i=e.values,s=n.length,o=0,c,d;o<s;++o)if(d=n[o],d.getter=Vs.getter||Vs(d.field),c=d.getter(t),Hc(c)&&(c=Ui(c)),Hc(i[o])&&(i[o]=Ui(i[o])),Hc(i[o][0])&&(i[o]=i[o].map(Ui)),d.type===Uve){if(he(i[o])?i[o].indexOf(c)<0:c!==i[o])return!1}else if(d.type===$ve){if(!Oh(c,i[o]))return!1}else if(d.type===Gve){if(!Oh(c,i[o],!0,!1))return!1}else if(d.type===zve){if(!Oh(c,i[o],!1,!1))return!1}else if(d.type===qve&&!Oh(c,i[o],!1,!0))return!1;return!0}function Vve(t,e,n){for(var i=this.context.data[t],s=i?i.values.value:[],o=i?i[s1]&&i[s1].value:void 0,c=n===iC,d=s.length,f=0,u,a,_,w,m;f<d;++f)if(u=s[f],o&&c){if(a=a||{},_=a[w=u.unit]||0,_===-1)continue;if(m=k6(e,u),a[w]=m?-1:++_,m&&o.size===1)return!0;if(!m&&_===o.get(w).count)return!1}else if(m=k6(e,u),c^m)return m;return d&&c}const JH=Nve(Cy),Wve=JH.left,Hve=JH.right;function Yve(t,e,n){const i=this.context.data[t],s=i?i.values.value:[],o=i?i[s1]&&i[s1].value:void 0,c=n===iC,d=Cy(e),f=Wve(s,d);if(f===s.length||Cy(s[f])!==d)return!1;if(o&&c){if(o.size===1)return!0;if(Hve(s,d)-f<o.size)return!1}return!0}function Xve(t,e){return t.map(n=>mt(e.fields?{values:e.fields.map(i=>(i.getter||(i.getter=Vs(i.field)))(n.datum))}:{[to]:Cy(n.datum)},e))}function Kve(t,e,n,i){for(var s=this.context.data[t],o=s?s.values.value:[],c={},d={},f={},u,a,_,w,m,l,T,b,S,x,B=o.length,F=0,k,M;F<B;++F)if(u=o[F],w=u.unit,a=u.fields,_=u.values,a&&_){for(k=0,M=a.length;k<M;++k)m=a[k],T=c[m.field]||(c[m.field]={}),b=T[w]||(T[w]=[]),f[m.field]=S=m.type.charAt(0),x=vB["".concat(S,"_union")],T[w]=x(b,Ie(_[k]));n&&(b=d[w]||(d[w]=[]),b.push(Ie(_).reduce((A,R,P)=>(A[a[P].field]=R,A),{})))}else m=to,l=Cy(u),T=c[m]||(c[m]={}),b=T[w]||(T[w]=[]),b.push(l),n&&(b=d[w]||(d[w]=[]),b.push({[to]:l}));if(e=e||x6,c[to]?c[to]=vB["".concat(to,"_").concat(e)](...Object.values(c[to])):Object.keys(c).forEach(A=>{c[A]=Object.keys(c[A]).map(R=>c[A][R]).reduce((R,P)=>R===void 0?P:vB["".concat(f[A],"_").concat(e)](R,P))}),o=Object.keys(d),n&&o.length){const A=i?Dve:Pve;c[A]=e===x6?{[B6]:o.reduce((R,P)=>(R.push(...d[P]),R),[])}:{[jve]:o.map(R=>({[B6]:d[R]}))}}return c}var vB={["".concat(to,"_union")]:Lve,["".concat(to,"_intersect")]:Cve,E_union:function(t,e){if(!t.length)return e;for(var n=0,i=e.length;n<i;++n)t.indexOf(e[n])<0&&t.push(e[n]);return t},E_intersect:function(t,e){return t.length?t.filter(n=>e.indexOf(n)>=0):e},R_union:function(t,e){var n=Ui(e[0]),i=Ui(e[1]);return n>i&&(n=e[1],i=e[0]),t.length?(t[0]>n&&(t[0]=n),t[1]<i&&(t[1]=i),t):[n,i]},R_intersect:function(t,e){var n=Ui(e[0]),i=Ui(e[1]);return n>i&&(n=e[1],i=e[0]),t.length?i<t[0]||t[1]<n?[]:(t[0]<n&&(t[0]=n),t[1]>i&&(t[1]=i),t):[n,i]}};const Jve=":",Qve="@";function sC(t,e,n,i){e[0].type!==du&&de("First argument to selection functions must be a string literal.");const s=e[0].value,o=e.length>=2&&Lt(e).value,c="unit",d=Qve+c,f=Jve+s;o===iC&&!Le(i,d)&&(i[d]=n.getData(s).indataRef(n,c)),Le(i,f)||(i[f]=n.getData(s).tuplesRef())}function QH(t){const e=this.context.data[t];return e?e.values.value:[]}function Zve(t,e,n){const i=this.context.data[t]["index:"+e],s=i?i.value.get(n):void 0;return s&&s.count}function e1e(t,e){const n=this.context.dataflow,i=this.context.data[t],s=i.input;return n.pulse(s,n.changeset().remove(Xr).insert(e)),1}function t1e(t,e,n){if(t){const i=this.context.dataflow,s=t.mark.source;i.pulse(s,i.changeset().encode(t,e))}return n!==void 0?n:t}const zm=t=>function(e,n){return this.context.dataflow.locale()[t](n)(e)},n1e=zm("format"),ZH=zm("timeFormat"),i1e=zm("utcFormat"),s1e=zm("timeParse"),r1e=zm("utcParse"),Jb=new Date(2e3,0,1);function eS(t,e,n){return!Number.isInteger(t)||!Number.isInteger(e)?"":(Jb.setYear(2e3),Jb.setMonth(t),Jb.setDate(e),ZH.call(this,Jb,n))}function a1e(t){return eS.call(this,t,1,"%B")}function o1e(t){return eS.call(this,t,1,"%b")}function l1e(t){return eS.call(this,0,2+t,"%A")}function c1e(t){return eS.call(this,0,2+t,"%a")}const d1e=":",f1e="@",XI="%",eY="$";function rC(t,e,n,i){e[0].type!==du&&de("First argument to data functions must be a string literal.");const s=e[0].value,o=d1e+s;if(!Le(o,i))try{i[o]=n.getData(s).tuplesRef()}catch{}}function u1e(t,e,n,i){e[0].type!==du&&de("First argument to indata must be a string literal."),e[1].type!==du&&de("Second argument to indata must be a string literal.");const s=e[0].value,o=e[1].value,c=f1e+o;Le(c,i)||(i[c]=n.getData(s).indataRef(n,o))}function Rs(t,e,n,i){if(e[0].type===du)I6(n,i,e[0].value);else for(t in n.scales)I6(n,i,t)}function I6(t,e,n){const i=XI+n;if(!Le(e,i))try{e[i]=t.scaleRef(n)}catch{}}function ac(t,e){let n;return wt(t)?t:ke(t)?(n=e.scales[t])&&n.value:void 0}function h1e(t,e,n){e.__bandwidth=s=>s&&s.bandwidth?s.bandwidth():0,n._bandwidth=Rs,n._range=Rs,n._scale=Rs;const i=s=>"_["+(s.type===du?Se(XI+s.value):Se(XI)+"+"+t(s))+"]";return{_bandwidth:s=>"this.__bandwidth(".concat(i(s[0]),")"),_range:s=>"".concat(i(s[0]),".range()"),_scale:s=>"".concat(i(s[0]),"(").concat(t(s[1]),")")}}function aC(t,e){return function(n,i,s){if(n){const o=ac(n,(s||this).context);return o&&o.path[t](i)}else return e(i)}}const p1e=aC("area",Zre),g1e=aC("bounds",iae),_1e=aC("centroid",cae);function y1e(t){const e=this.context.group;let n=!1;if(e)for(;t;){if(t===e){n=!0;break}t=t.mark.group}return n}function oC(t,e,n){try{t[e].apply(t,["EXPRESSION"].concat([].slice.call(n)))}catch(i){t.warn(i)}return n[n.length-1]}function m1e(){return oC(this.context.dataflow,"warn",arguments)}function w1e(){return oC(this.context.dataflow,"info",arguments)}function b1e(){return oC(this.context.dataflow,"debug",arguments)}function EB(t){const e=t/255;return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}function KI(t){const e=ad(t),n=EB(e.r),i=EB(e.g),s=EB(e.b);return .2126*n+.7152*i+.0722*s}function T1e(t,e){const n=KI(t),i=KI(e),s=Math.max(n,i),o=Math.min(n,i);return(s+.05)/(o+.05)}function v1e(){const t=[].slice.call(arguments);return t.unshift({}),mt(...t)}function tY(t,e){return t===e||t!==t&&e!==e?!0:he(t)?he(e)&&t.length===e.length?E1e(t,e):!1:Fe(t)&&Fe(e)?nY(t,e):!1}function E1e(t,e){for(let n=0,i=t.length;n<i;++n)if(!tY(t[n],e[n]))return!1;return!0}function nY(t,e){for(const n in t)if(!tY(t[n],e[n]))return!1;return!0}function F6(t){return e=>nY(t,e)}function S1e(t,e,n,i,s,o){const c=this.context.dataflow,d=this.context.data[t],f=d.input,u=c.stamp();let a=d.changes,_,w;if(c._trigger===!1||!(f.value.length||e||i))return 0;if((!a||a.stamp<u)&&(d.changes=a=c.changeset(),a.stamp=u,c.runAfter(()=>{d.modified=!0,c.pulse(f,a).run()},!0,1)),n&&(_=n===!0?Xr:he(n)||FE(n)?n:F6(n),a.remove(_)),e&&a.insert(e),i&&(_=F6(i),f.value.some(_)?a.remove(_):a.insert(i)),s)for(w in o)a.modify(s,w,o[w]);return 1}function x1e(t){const e=t.touches,n=e[0].clientX-e[1].clientX,i=e[0].clientY-e[1].clientY;return Math.sqrt(n*n+i*i)}function B1e(t){const e=t.touches;return Math.atan2(e[0].clientY-e[1].clientY,e[0].clientX-e[1].clientX)}const O6={};function k1e(t,e){const n=O6[e]||(O6[e]=Vs(e));return he(t)?t.map(n):n(t)}function lC(t){return he(t)||ArrayBuffer.isView(t)?t:null}function cC(t){return lC(t)||(ke(t)?t:null)}function I1e(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return lC(t).join(...n)}function F1e(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return cC(t).indexOf(...n)}function O1e(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return cC(t).lastIndexOf(...n)}function M1e(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return cC(t).slice(...n)}function A1e(t,e,n){return wt(n)&&de("Function argument passed to replace."),String(t).replace(e,n)}function N1e(t){return lC(t).slice().reverse()}function C1e(t,e,n){return OA(t||0,e||0,n||0)}function R1e(t,e){const n=ac(t,(e||this).context);return n&&n.bandwidth?n.bandwidth():0}function L1e(t,e){const n=ac(t,(e||this).context);return n?n.copy():void 0}function P1e(t,e){const n=ac(t,(e||this).context);return n?n.domain():[]}function D1e(t,e,n){const i=ac(t,(n||this).context);return i?he(e)?(i.invertRange||i.invert)(e):(i.invert||i.invertExtent)(e):void 0}function j1e(t,e){const n=ac(t,(e||this).context);return n&&n.range?n.range():[]}function U1e(t,e,n){const i=ac(t,(n||this).context);return i?i(e):void 0}function $1e(t,e,n,i,s){t=ac(t,(s||this).context);const o=nW(e,n);let c=t.domain(),d=c[0],f=Lt(c),u=Xi;return f-d?u=GV(t,d,f):t=(t.interpolator?Wt("sequential")().interpolator(t.interpolator()):Wt("linear")().interpolate(t.interpolate()).range(t.range())).domain([d=0,f=1]),t.ticks&&(c=t.ticks(+i||15),d!==c[0]&&c.unshift(d),f!==Lt(c)&&c.push(f)),c.forEach(a=>o.stop(u(a),t(a))),o}function z1e(t,e,n){const i=ac(t,(n||this).context);return function(s){return i?i.path.context(s)(e):""}}function q1e(t){let e=null;return function(n){return n?ky(n,e=e||Rp(t)):t}}const iY=t=>t.data;function sY(t,e){const n=QH.call(e,t);return n.root&&n.root.lookup||{}}function G1e(t,e,n){const i=sY(t,this),s=i[e],o=i[n];return s&&o?s.path(o).map(iY):void 0}function V1e(t,e){const n=sY(t,this)[e];return n?n.ancestors().map(iY):void 0}const rY=()=>typeof window<"u"&&window||null;function W1e(){const t=rY();return t?t.screen:{}}function H1e(){const t=rY();return t?[t.innerWidth,t.innerHeight]:[void 0,void 0]}function Y1e(){const t=this.context.dataflow,e=t.container&&t.container();return e?[e.clientWidth,e.clientHeight]:[void 0,void 0]}function aY(t,e,n){if(!t)return[];const[i,s]=t,o=new $n().set(i[0],i[1],s[0],s[1]),c=n||this.context.dataflow.scenegraph().root;return WW(c,o,X1e(e))}function X1e(t){let e=null;if(t){const n=Ie(t.marktype),i=Ie(t.markname);e=s=>(!n.length||n.some(o=>s.marktype===o))&&(!i.length||i.some(o=>s.name===o))}return e}function K1e(t,e,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;const s=t[t.length-1];return s===void 0||Math.sqrt((s[0]-e)**2+(s[1]-n)**2)>i?(t.push([e,n]),[...t]):t}function J1e(t){return(t!=null?t:[]).reduce((e,n,i)=>{let[s,o]=n;return e+=i==0?"M ".concat(s,",").concat(o," "):i===t.length-1?" Z":"L ".concat(s,",").concat(o," ")},"")}function Q1e(t,e,n){const{x:i,y:s,mark:o}=n,c=new $n().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[f,u]of e)f<c.x1&&(c.x1=f),f>c.x2&&(c.x2=f),u<c.y1&&(c.y1=u),u>c.y2&&(c.y2=u);return c.translate(i,s),aY([[c.x1,c.y1],[c.x2,c.y2]],t,o).filter(f=>Z1e(f.x,f.y,e))}function Z1e(t,e,n){let i=0;for(let s=0,o=n.length-1;s<n.length;o=s++){const[c,d]=n[o],[f,u]=n[s];u>e!=d>e&&t<(c-f)*(e-u)/(d-u)+f&&i++}return i&1}const Ry={random(){return Wr()},cumulativeNormal:Y1,cumulativeLogNormal:fO,cumulativeUniform:gO,densityNormal:aO,densityLogNormal:dO,densityUniform:pO,quantileNormal:X1,quantileLogNormal:uO,quantileUniform:_O,sampleNormal:H1,sampleLogNormal:cO,sampleUniform:hO,isArray:he,isBoolean:Dd,isDate:Hc,isDefined(t){return t!==void 0},isNumber:cn,isObject:Fe,isRegExp:gG,isString:ke,isTuple:FE,isValid(t){return t!=null&&t===t},toBoolean:WM,toDate(t){return HM(t)},toNumber:Ui,toString:YM,indexof:F1e,join:I1e,lastindexof:O1e,replace:A1e,reverse:N1e,slice:M1e,flush:hG,lerp:_G,merge:v1e,pad:wG,peek:Lt,pluck:k1e,span:xm,inrange:Oh,truncate:bG,rgb:ad,lab:ET,hcl:ST,hsl:TT,luminance:KI,contrast:T1e,sequence:hr,format:n1e,utcFormat:i1e,utcParse:r1e,utcOffset:CG,utcSequence:PG,timeFormat:ZH,timeParse:s1e,timeOffset:NG,timeSequence:LG,timeUnitSpecifier:vG,monthFormat:a1e,monthAbbrevFormat:o1e,dayFormat:l1e,dayAbbrevFormat:c1e,quarter:cG,utcquarter:dG,week:SG,utcweek:kG,dayofyear:EG,utcdayofyear:BG,warn:m1e,info:w1e,debug:b1e,extent(t){return Wo(t)},inScope:y1e,intersect:aY,clampRange:fG,pinchDistance:x1e,pinchAngle:B1e,screen:W1e,containerSize:Y1e,windowSize:H1e,bandspace:C1e,setdata:e1e,pathShape:q1e,panLinear:rG,panLog:aG,panPow:oG,panSymlog:lG,zoomLinear:UM,zoomLog:$M,zoomPow:jv,zoomSymlog:zM,encode:t1e,modify:S1e,lassoAppend:K1e,lassoPath:J1e,intersectLasso:Q1e},eEe=["view","item","group","xy","x","y"],tEe="event.vega.",oY="this.",dC={},lY={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:t=>"_[".concat(Se(eY+t),"]"),functions:nEe,constants:YH,visitors:dC},JI=KH(lY);function nEe(t){const e=XH(t);eEe.forEach(n=>e[n]=tEe+n);for(const n in Ry)e[n]=oY+n;return mt(e,h1e(t,Ry,dC)),e}function qn(t,e,n){return arguments.length===1?Ry[t]:(Ry[t]=e,n&&(dC[t]=n),JI&&(JI.functions[t]=oY+t),this)}qn("bandwidth",R1e,Rs);qn("copy",L1e,Rs);qn("domain",P1e,Rs);qn("range",j1e,Rs);qn("invert",D1e,Rs);qn("scale",U1e,Rs);qn("gradient",$1e,Rs);qn("geoArea",p1e,Rs);qn("geoBounds",g1e,Rs);qn("geoCentroid",_1e,Rs);qn("geoShape",z1e,Rs);qn("indata",Zve,u1e);qn("data",QH,rC);qn("treePath",G1e,rC);qn("treeAncestors",V1e,rC);qn("vlSelectionTest",Vve,sC);qn("vlSelectionIdTest",Yve,sC);qn("vlSelectionResolve",Kve,sC);qn("vlSelectionTuples",Xve);function Yo(t,e){const n={};let i;try{t=ke(t)?t:Se(t)+"",i=nC(t)}catch{de("Expression parse error: "+t)}i.visit(o=>{if(o.type!==$H)return;const c=o.callee.name,d=lY.visitors[c];d&&d(c,o.arguments,e,n)});const s=JI(i);return s.globals.forEach(o=>{const c=eY+o;!Le(n,c)&&e.getSignal(o)&&(n[c]=e.signalRef(o))}),{$expr:mt({code:s.code},e.options.ast?{ast:i}:null),$fields:s.fields,$params:n}}function iEe(t){const e=this,n=t.operators||[];return t.background&&(e.background=t.background),t.eventConfig&&(e.eventConfig=t.eventConfig),t.locale&&(e.locale=t.locale),n.forEach(i=>e.parseOperator(i)),n.forEach(i=>e.parseOperatorParameters(i)),(t.streams||[]).forEach(i=>e.parseStream(i)),(t.updates||[]).forEach(i=>e.parseUpdate(i)),e.resolve()}const sEe=Ra(["rule"]),M6=Ra(["group","image","rect"]);function rEe(t,e){let n="";return sEe[e]||(t.x2&&(t.x?(M6[e]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),t.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),t.y2&&(t.y?(M6[e]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),t.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function fC(t){return(t+"").toLowerCase()}function aEe(t){return fC(t)==="operator"}function oEe(t){return fC(t)==="collect"}function Xg(t,e,n){n[n.length-1]!==";"&&(n="return("+n+");");const i=Function(...e.concat(n));return t&&t.functions?i.bind(t.functions):i}function lEe(t,e,n,i){return"((u = ".concat(t,") < (v = ").concat(e,") || u == null) && v != null ? ").concat(n,`
  : (u > v || v == null) && u != null ? `).concat(i,`
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? `).concat(n,`
  : v !== v && u === u ? `).concat(i," : ")}var cEe={operator:(t,e)=>Xg(t,["_"],e.code),parameter:(t,e)=>Xg(t,["datum","_"],e.code),event:(t,e)=>Xg(t,["event"],e.code),handler:(t,e)=>{const n="var datum=event.item&&event.item.datum;return ".concat(e.code,";");return Xg(t,["_","event"],n)},encode:(t,e)=>{const{marktype:n,channels:i}=e;let s="var o=item,datum=o.datum,m=0,$;";for(const o in i){const c="o["+Se(o)+"]";s+="$=".concat(i[o].code,";if(").concat(c,"!==$)").concat(c,"=$,m=1;")}return s+=rEe(i,n),s+="return m;",Xg(t,["item","_"],s)},codegen:{get(t){const e="[".concat(t.map(Se).join("]["),"]"),n=Function("_","return _".concat(e,";"));return n.path=e,n},comparator(t,e){let n;const i=(o,c)=>{const d=e[c];let f,u;return o.path?(f="a".concat(o.path),u="b".concat(o.path)):((n=n||{})["f"+c]=o,f="this.f".concat(c,"(a)"),u="this.f".concat(c,"(b)")),lEe(f,u,-d,d)},s=Function("a","b","var u, v; return "+t.map(i).join("")+"0;");return n?s.bind(n):s}}};function dEe(t){const e=this;aEe(t.type)||!t.type?e.operator(t,t.update?e.operatorExpression(t.update):null):e.transform(t,t.type)}function fEe(t){const e=this;if(t.params){const n=e.get(t.id);n||de("Invalid operator id: "+t.id),e.dataflow.connect(n,n.parameters(e.parseParameters(t.params),t.react,t.initonly))}}function uEe(t,e){e=e||{};const n=this;for(const i in t){const s=t[i];e[i]=he(s)?s.map(o=>A6(o,n,e)):A6(s,n,e)}return e}function A6(t,e,n){if(!t||!Fe(t))return t;for(let i=0,s=N6.length,o;i<s;++i)if(o=N6[i],Le(t,o.key))return o.parse(t,e,n);return t}var N6=[{key:"$ref",parse:hEe},{key:"$key",parse:gEe},{key:"$expr",parse:pEe},{key:"$field",parse:_Ee},{key:"$encode",parse:mEe},{key:"$compare",parse:yEe},{key:"$context",parse:wEe},{key:"$subflow",parse:bEe},{key:"$tupleid",parse:TEe}];function hEe(t,e){return e.get(t.$ref)||de("Operator not defined: "+t.$ref)}function pEe(t,e,n){t.$params&&e.parseParameters(t.$params,n);const i="e:"+t.$expr.code+"_"+t.$name;return e.fn[i]||(e.fn[i]=Zs(e.parameterExpression(t.$expr),t.$fields,t.$name))}function gEe(t,e){const n="k:"+t.$key+"_"+!!t.$flat;return e.fn[n]||(e.fn[n]=VM(t.$key,t.$flat,e.expr.codegen))}function _Ee(t,e){if(!t.$field)return null;const n="f:"+t.$field+"_"+t.$name;return e.fn[n]||(e.fn[n]=Vs(t.$field,t.$name,e.expr.codegen))}function yEe(t,e){const n="c:"+t.$compare+"_"+t.$order,i=Ie(t.$compare).map(s=>s&&s.$tupleid?De:s);return e.fn[n]||(e.fn[n]=qM(i,t.$order,e.expr.codegen))}function mEe(t,e){const n=t.$encode,i={};for(const s in n){const o=n[s];i[s]=Zs(e.encodeExpression(o.$expr),o.$fields),i[s].output=o.$output}return i}function wEe(t,e){return e}function bEe(t,e){const n=t.$subflow;return function(i,s,o){const c=e.fork().parse(n),d=c.get(n.operators[0].id),f=c.signals.parent;return f&&f.set(o),d.detachSubflow=()=>e.detach(c),d}}function TEe(){return De}function vEe(t){var e=this,n=t.filter!=null?e.eventExpression(t.filter):void 0,i=t.stream!=null?e.get(t.stream):void 0,s;t.source?i=e.events(t.source,t.type,n):t.merge&&(s=t.merge.map(o=>e.get(o)),i=s[0].merge.apply(s[0],s.slice(1))),t.between&&(s=t.between.map(o=>e.get(o)),i=i.between(s[0],s[1])),t.filter&&(i=i.filter(n)),t.throttle!=null&&(i=i.throttle(+t.throttle)),t.debounce!=null&&(i=i.debounce(+t.debounce)),i==null&&de("Invalid stream definition: "+JSON.stringify(t)),t.consume&&i.consume(!0),e.stream(t,i)}function EEe(t){var e=this,n=Fe(n=t.source)?n.$ref:n,i=e.get(n),s=null,o=t.update,c=void 0;i||de("Source not defined: "+t.source),s=t.target&&t.target.$expr?e.eventExpression(t.target.$expr):e.get(t.target),o&&o.$expr&&(o.$params&&(c=e.parseParameters(o.$params)),o=e.handlerExpression(o.$expr)),e.update(t,i,s,o,c)}const SEe={skip:!0};function xEe(t){var e=this,n={};if(t.signals){var i=n.signals={};Object.keys(e.signals).forEach(o=>{const c=e.signals[o];t.signals(o,c)&&(i[o]=c.value)})}if(t.data){var s=n.data={};Object.keys(e.data).forEach(o=>{const c=e.data[o];t.data(o,c)&&(s[o]=c.input.value)})}return e.subcontext&&t.recurse!==!1&&(n.subcontext=e.subcontext.map(o=>o.getState(t))),n}function BEe(t){var e=this,n=e.dataflow,i=t.data,s=t.signals;Object.keys(s||{}).forEach(o=>{n.update(e.signals[o],s[o],SEe)}),Object.keys(i||{}).forEach(o=>{n.pulse(e.data[o].input,n.changeset().remove(Xr).insert(i[o]))}),(t.subcontext||[]).forEach((o,c)=>{const d=e.subcontext[c];d&&d.setState(o)})}function cY(t,e,n,i){return new dY(t,e,n,i)}function dY(t,e,n,i){this.dataflow=t,this.transforms=e,this.events=t.events.bind(t),this.expr=i||cEe,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function C6(t){this.dataflow=t.dataflow,this.transforms=t.transforms,this.events=t.events,this.expr=t.expr,this.signals=Object.create(t.signals),this.scales=Object.create(t.scales),this.nodes=Object.create(t.nodes),this.data=Object.create(t.data),this.fn=Object.create(t.fn),t.functions&&(this.functions=Object.create(t.functions),this.functions.context=this)}dY.prototype=C6.prototype={fork(){const t=new C6(this);return(this.subcontext||(this.subcontext=[])).push(t),t},detach(t){this.subcontext=this.subcontext.filter(n=>n!==t);const e=Object.keys(t.nodes);for(const n of e)t.nodes[n]._targets=null;for(const n of e)t.nodes[n].detach();t.nodes=null},get(t){return this.nodes[t]},set(t,e){return this.nodes[t]=e},add(t,e){const n=this,i=n.dataflow,s=t.value;if(n.set(t.id,e),oEe(t.type)&&s&&(s.$ingest?i.ingest(e,s.$ingest,s.$format):s.$request?i.preload(e,s.$request,s.$format):i.pulse(e,i.changeset().insert(s))),t.root&&(n.root=e),t.parent){let o=n.get(t.parent.$ref);o?(i.connect(o,[e]),e.targets().add(o)):(n.unresolved=n.unresolved||[]).push(()=>{o=n.get(t.parent.$ref),i.connect(o,[e]),e.targets().add(o)})}if(t.signal&&(n.signals[t.signal]=e),t.scale&&(n.scales[t.scale]=e),t.data)for(const o in t.data){const c=n.data[o]||(n.data[o]={});t.data[o].forEach(d=>c[d]=e)}},resolve(){return(this.unresolved||[]).forEach(t=>t()),delete this.unresolved,this},operator(t,e){this.add(t,this.dataflow.add(t.value,e))},transform(t,e){this.add(t,this.dataflow.add(this.transforms[fC(e)]))},stream(t,e){this.set(t.id,e)},update(t,e,n,i,s){this.dataflow.on(e,n,i,s,t.options)},operatorExpression(t){return this.expr.operator(this,t)},parameterExpression(t){return this.expr.parameter(this,t)},eventExpression(t){return this.expr.event(this,t)},handlerExpression(t){return this.expr.handler(this,t)},encodeExpression(t){return this.expr.encode(this,t)},parse:iEe,parseOperator:dEe,parseOperatorParameters:fEe,parseParameters:uEe,parseStream:vEe,parseUpdate:EEe,getState:xEe,setState:BEe};function kEe(t){const e=t.container();e&&(e.setAttribute("role","graphics-document"),e.setAttribute("aria-roleDescription","visualization"),fY(e,t.description()))}function fY(t,e){t&&(e==null?t.removeAttribute("aria-label"):t.setAttribute("aria-label",e))}function IEe(t){t.add(null,e=>(t._background=e.bg,t._resize=1,e.bg),{bg:t._signals.background})}const SB="default";function FEe(t){const e=t._signals.cursor||(t._signals.cursor=t.add({user:SB,item:null}));t.on(t.events("view","mousemove"),e,(n,i)=>{const s=e.value,o=s?ke(s)?s:s.user:SB,c=i.item&&i.item.cursor||null;return s&&o===s.user&&c==s.item?s:{user:o,item:c}}),t.add(null,function(n){let i=n.cursor,s=this.value;return ke(i)||(s=i.item,i=i.user),QI(t,i&&i!==SB?i:s||i),s},{cursor:e})}function QI(t,e){const n=t.globalCursor()?typeof document<"u"&&document.body:t.container();if(n)return e==null?n.style.removeProperty("cursor"):n.style.cursor=e}function r1(t,e){var n=t._runtime.data;return Le(n,e)||de("Unrecognized data set: "+e),n[e]}function OEe(t,e){return arguments.length<2?r1(this,t).values.value:tS.call(this,t,$u().remove(Xr).insert(e))}function tS(t,e){iV(e)||de("Second argument to changes must be a changeset.");const n=r1(this,t);return n.modified=!0,this.pulse(n.input,e)}function MEe(t,e){return tS.call(this,t,$u().insert(e))}function AEe(t,e){return tS.call(this,t,$u().remove(e))}function uY(t){var e=t.padding();return Math.max(0,t._viewWidth+e.left+e.right)}function hY(t){var e=t.padding();return Math.max(0,t._viewHeight+e.top+e.bottom)}function nS(t){var e=t.padding(),n=t._origin;return[e.left+n[0],e.top+n[1]]}function NEe(t){var e=nS(t),n=uY(t),i=hY(t);t._renderer.background(t.background()),t._renderer.resize(n,i,e),t._handler.origin(e),t._resizeListeners.forEach(s=>{try{s(n,i)}catch(o){t.error(o)}})}function CEe(t,e,n){var i=t._renderer,s=i&&i.canvas(),o,c,d;return s&&(d=nS(t),c=e.changedTouches?e.changedTouches[0]:e,o=HE(c,s),o[0]-=d[0],o[1]-=d[1]),e.dataflow=t,e.item=n,e.vega=REe(t,n,o),e}function REe(t,e,n){const i=e?e.mark.marktype==="group"?e:e.mark.group:null;function s(c){var d=i,f;if(c){for(f=e;f;f=f.mark.group)if(f.mark.name===c){d=f;break}}return d&&d.mark&&d.mark.interactive?d:{}}function o(c){if(!c)return n;ke(c)&&(c=s(c));const d=n.slice();for(;c;)d[0]-=c.x||0,d[1]-=c.y||0,c=c.mark&&c.mark.group;return d}return{view:Ki(t),item:Ki(e||{}),group:s,xy:o,x:c=>o(c)[0],y:c=>o(c)[1]}}const R6="view",LEe="timer",PEe="window",DEe={trap:!1};function jEe(t){const e=mt({defaults:{}},t),n=(i,s)=>{s.forEach(o=>{he(i[o])&&(i[o]=Ra(i[o]))})};return n(e.defaults,["prevent","allow"]),n(e,["view","window","selector"]),e}function pY(t,e,n,i){t._eventListeners.push({type:n,sources:Ie(e),handler:i})}function UEe(t,e){var n=t._eventConfig.defaults,i=n.prevent,s=n.allow;return i===!1||s===!0?!1:i===!0||s===!1?!0:i?i[e]:s?!s[e]:t.preventDefault()}function Qb(t,e,n){const i=t._eventConfig&&t._eventConfig[e];return i===!1||Fe(i)&&!i[n]?(t.warn("Blocked ".concat(e," ").concat(n," event listener.")),!1):!0}function $Ee(t,e,n){var i=this,s=new AE(n),o=function(u,a){i.runAsync(null,()=>{t===R6&&UEe(i,e)&&u.preventDefault(),s.receive(CEe(i,u,a))})},c;if(t===LEe)Qb(i,"timer",e)&&i.timer(o,e);else if(t===R6)Qb(i,"view",e)&&i.addEventListener(e,o,DEe);else if(t===PEe?Qb(i,"window",e)&&typeof window<"u"&&(c=[window]):typeof document<"u"&&Qb(i,"selector",e)&&(c=document.querySelectorAll(t)),!c)i.warn("Can not resolve event source: "+t);else{for(var d=0,f=c.length;d<f;++d)c[d].addEventListener(e,o);pY(i,c,e,o)}return s}function L6(t){return t.item}function P6(t){return t.item.mark.source}function D6(t){return function(e,n){return n.vega.view().changeset().encode(n.item,t)}}function zEe(t,e){return t=[t||"hover"],e=[e||"update",t[0]],this.on(this.events("view","mouseover",L6),P6,D6(t)),this.on(this.events("view","mouseout",L6),P6,D6(e)),this}function qEe(){var t=this._tooltip,e=this._timers,n=this._eventListeners,i,s,o;for(i=e.length;--i>=0;)e[i].stop();for(i=n.length;--i>=0;)for(o=n[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);return t&&t.call(this,this._handler,null,null,null),this}function gr(t,e,n){const i=document.createElement(t);for(const s in e)i.setAttribute(s,e[s]);return n!=null&&(i.textContent=n),i}const GEe="vega-bind",VEe="vega-bind-name",WEe="vega-bind-radio";function HEe(t,e,n){if(!e)return;const i=n.param;let s=n.state;return s||(s=n.state={elements:null,active:!1,set:null,update:c=>{c!=t.signal(i.signal)&&t.runAsync(null,()=>{s.source=!0,t.signal(i.signal,c)})}},i.debounce&&(s.update=GM(i.debounce,s.update))),(i.input==null&&i.element?YEe:KEe)(s,e,i,t),s.active||(t.on(t._signals[i.signal],null,()=>{s.source?s.source=!1:s.set(t.signal(i.signal))}),s.active=!0),s}function YEe(t,e,n,i){const s=n.event||"input",o=()=>t.update(e.value);i.signal(n.signal,e.value),e.addEventListener(s,o),pY(i,e,s,o),t.set=c=>{e.value=c,e.dispatchEvent(XEe(s))}}function XEe(t){return typeof Event<"u"?new Event(t):{type:t}}function KEe(t,e,n,i){const s=i.signal(n.signal),o=gr("div",{class:GEe}),c=n.input==="radio"?o:o.appendChild(gr("label"));c.appendChild(gr("span",{class:VEe},n.name||n.signal)),e.appendChild(o);let d=JEe;switch(n.input){case"checkbox":d=QEe;break;case"select":d=ZEe;break;case"radio":d=eSe;break;case"range":d=tSe;break}d(t,c,n,s)}function JEe(t,e,n,i){const s=gr("input");for(const o in n)o!=="signal"&&o!=="element"&&s.setAttribute(o==="input"?"type":o,n[o]);s.setAttribute("name",n.signal),s.value=i,e.appendChild(s),s.addEventListener("input",()=>t.update(s.value)),t.elements=[s],t.set=o=>s.value=o}function QEe(t,e,n,i){const s={type:"checkbox",name:n.signal};i&&(s.checked=!0);const o=gr("input",s);e.appendChild(o),o.addEventListener("change",()=>t.update(o.checked)),t.elements=[o],t.set=c=>o.checked=!!c||null}function ZEe(t,e,n,i){const s=gr("select",{name:n.signal}),o=n.labels||[];n.options.forEach((c,d)=>{const f={value:c};a1(c,i)&&(f.selected=!0),s.appendChild(gr("option",f,(o[d]||c)+""))}),e.appendChild(s),s.addEventListener("change",()=>{t.update(n.options[s.selectedIndex])}),t.elements=[s],t.set=c=>{for(let d=0,f=n.options.length;d<f;++d)if(a1(n.options[d],c)){s.selectedIndex=d;return}}}function eSe(t,e,n,i){const s=gr("span",{class:WEe}),o=n.labels||[];e.appendChild(s),t.elements=n.options.map((c,d)=>{const f={type:"radio",name:n.signal,value:c};a1(c,i)&&(f.checked=!0);const u=gr("input",f);u.addEventListener("change",()=>t.update(c));const a=gr("label",{},(o[d]||c)+"");return a.prepend(u),s.appendChild(a),u}),t.set=c=>{const d=t.elements,f=d.length;for(let u=0;u<f;++u)a1(d[u].value,c)&&(d[u].checked=!0)}}function tSe(t,e,n,i){i=i!==void 0?i:(+n.max+ +n.min)/2;const s=n.max!=null?n.max:Math.max(100,+i)||100,o=n.min||Math.min(0,s,+i)||0,c=n.step||rd(o,s,100),d=gr("input",{type:"range",name:n.signal,min:o,max:s,step:c});d.value=i;const f=gr("span",{},+i);e.appendChild(d),e.appendChild(f);const u=()=>{f.textContent=d.value,t.update(+d.value)};d.addEventListener("input",u),d.addEventListener("change",u),t.elements=[d],t.set=a=>{d.value=a,f.textContent=a}}function a1(t,e){return t===e||t+""==e+""}function gY(t,e,n,i,s,o){return e=e||new i(t.loader()),e.initialize(n,uY(t),hY(t),nS(t),s,o).background(t.background())}function uC(t,e){return e?function(){try{e.apply(this,arguments)}catch(n){t.error(n)}}:null}function nSe(t,e,n,i){const s=new i(t.loader(),uC(t,t.tooltip())).scene(t.scenegraph().root).initialize(n,nS(t),t);return e&&e.handlers().forEach(o=>{s.on(o.type,o.handler)}),s}function iSe(t,e){const n=this,i=n._renderType,s=n._eventConfig.bind,o=YE(i);t=n._el=t?xB(n,t,!0):null,kEe(n),o||n.error("Unrecognized renderer type: "+i);const c=o.handler||Dm,d=t?o.renderer:o.headless;return n._renderer=d?gY(n,n._renderer,t,d):null,n._handler=nSe(n,n._handler,t,c),n._redraw=!0,t&&s!=="none"&&(e=e?n._elBind=xB(n,e,!0):t.appendChild(gr("form",{class:"vega-bindings"})),n._bind.forEach(f=>{f.param.element&&s!=="container"&&(f.element=xB(n,f.param.element,!!f.param.input))}),n._bind.forEach(f=>{HEe(n,f.element||e,f)})),n}function xB(t,e,n){if(typeof e=="string")if(typeof document<"u"){if(e=document.querySelector(e),!e)return t.error("Signal bind element not found: "+e),null}else return t.error("DOM document instance not found."),null;if(e&&n)try{e.textContent=""}catch(i){e=null,t.error(i)}return e}const Kg=t=>+t||0,sSe=t=>({top:t,bottom:t,left:t,right:t});function j6(t){return Fe(t)?{top:Kg(t.top),bottom:Kg(t.bottom),left:Kg(t.left),right:Kg(t.right)}:sSe(Kg(t))}async function hC(t,e,n,i){const s=YE(e),o=s&&s.headless;return o||de("Unrecognized renderer type: "+e),await t.runAsync(),gY(t,null,null,o,n,i).renderAsync(t._scenegraph.root)}async function rSe(t,e){t!==jc.Canvas&&t!==jc.SVG&&t!==jc.PNG&&de("Unrecognized image type: "+t);const n=await hC(this,t,e);return t===jc.SVG?aSe(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function aSe(t,e){const n=new Blob([t],{type:e});return window.URL.createObjectURL(n)}async function oSe(t,e){return(await hC(this,jc.Canvas,t,e)).canvas()}async function lSe(t){return(await hC(this,jc.SVG,t)).svg()}function cSe(t,e,n){return cY(t,Mp,Ry,n).parse(e)}function dSe(t){var e=this._runtime.scales;return Le(e,t)||de("Unrecognized scale or projection: "+t),e[t].value}var _Y="width",yY="height",pC="padding",U6={skip:!0};function mY(t,e){var n=t.autosize(),i=t.padding();return e-(n&&n.contains===pC?i.left+i.right:0)}function wY(t,e){var n=t.autosize(),i=t.padding();return e-(n&&n.contains===pC?i.top+i.bottom:0)}function fSe(t){var e=t._signals,n=e[_Y],i=e[yY],s=e[pC];function o(){t._autosize=t._resize=1}t._resizeWidth=t.add(null,d=>{t._width=d.size,t._viewWidth=mY(t,d.size),o()},{size:n}),t._resizeHeight=t.add(null,d=>{t._height=d.size,t._viewHeight=wY(t,d.size),o()},{size:i});const c=t.add(null,o,{pad:s});t._resizeWidth.rank=n.rank+1,t._resizeHeight.rank=i.rank+1,c.rank=s.rank+1}function uSe(t,e,n,i,s,o){this.runAfter(c=>{let d=0;c._autosize=0,c.width()!==n&&(d=1,c.signal(_Y,n,U6),c._resizeWidth.skip(!0)),c.height()!==i&&(d=1,c.signal(yY,i,U6),c._resizeHeight.skip(!0)),c._viewWidth!==t&&(c._resize=1,c._viewWidth=t),c._viewHeight!==e&&(c._resize=1,c._viewHeight=e),(c._origin[0]!==s[0]||c._origin[1]!==s[1])&&(c._resize=1,c._origin=s),d&&c.run("enter"),o&&c.runAfter(f=>f.resize())},!1,1)}function hSe(t){return this._runtime.getState(t||{data:pSe,signals:gSe,recurse:!0})}function pSe(t,e){return e.modified&&he(e.input.value)&&t.indexOf("_:vega:_")}function gSe(t,e){return!(t==="parent"||e instanceof Mp.proxy)}function _Se(t){return this.runAsync(null,e=>{e._trigger=!1,e._runtime.setState(t)},e=>{e._trigger=!0}),this}function ySe(t,e){function n(i){t({timestamp:Date.now(),elapsed:i})}this._timers.push(Pse(n,e))}function mSe(t,e,n,i){const s=t.element();s&&s.setAttribute("title",wSe(i))}function wSe(t){return t==null?"":he(t)?bY(t):Fe(t)&&!Hc(t)?bSe(t):t+""}function bSe(t){return Object.keys(t).map(e=>{const n=t[e];return e+": "+(he(n)?bY(n):TY(n))}).join(`
`)}function bY(t){return"["+t.map(TY).join(", ")+"]"}function TY(t){return he(t)?"[\u2026]":Fe(t)&&!Hc(t)?"{\u2026}":t}function vY(t,e){const n=this;if(e=e||{},Xh.call(n),e.loader&&n.loader(e.loader),e.logger&&n.logger(e.logger),e.logLevel!=null&&n.logLevel(e.logLevel),e.locale||t.locale){const o=mt({},t.locale,e.locale);n.locale(HG(o.number,o.time))}n._el=null,n._elBind=null,n._renderType=e.renderer||jc.Canvas,n._scenegraph=new aN;const i=n._scenegraph.root;n._renderer=null,n._tooltip=e.tooltip||mSe,n._redraw=!0,n._handler=new Dm().scene(i),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=jEe(t.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const s=cSe(n,t,e.expr);n._runtime=s,n._signals=s.signals,n._bind=(t.bindings||[]).map(o=>({state:null,param:mt({},o)})),s.root&&s.root.set(i),i.source=s.data.root.input,n.pulse(s.data.root.input,n.changeset().insert(i.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=mY(n,n._width),n._viewHeight=wY(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,fSe(n),IEe(n),FEe(n),n.description(t.description),e.hover&&n.hover(),e.container&&n.initialize(e.container,e.bind)}function Zb(t,e){return Le(t._signals,e)?t._signals[e]:de("Unrecognized signal name: "+Se(e))}function EY(t,e){const n=(t._targets||[]).filter(i=>i._update&&i._update.handler===e);return n.length?n[0]:null}function $6(t,e,n,i){let s=EY(n,i);return s||(s=uC(t,()=>i(e,n.value)),s.handler=i,t.on(n,null,s)),t}function z6(t,e,n){const i=EY(e,n);return i&&e._targets.remove(i),t}ve(vY,Xh,{async evaluate(t,e,n){if(await Xh.prototype.evaluate.call(this,t,e),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,NEe(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(i){this.error(i)}return n&&N0(this,n),this},dirty(t){this._redraw=!0,this._renderer&&this._renderer.dirty(t)},description(t){if(arguments.length){const e=t!=null?t+"":null;return e!==this._desc&&fY(this._el,this._desc=e),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(t,e,n){const i=Zb(this,t);return arguments.length===1?i.value:this.update(i,e,n)},width(t){return arguments.length?this.signal("width",t):this.signal("width")},height(t){return arguments.length?this.signal("height",t):this.signal("height")},padding(t){return arguments.length?this.signal("padding",j6(t)):j6(this.signal("padding"))},autosize(t){return arguments.length?this.signal("autosize",t):this.signal("autosize")},background(t){return arguments.length?this.signal("background",t):this.signal("background")},renderer(t){return arguments.length?(YE(t)||de("Unrecognized renderer type: "+t),t!==this._renderType&&(this._renderType=t,this._resetRenderer()),this):this._renderType},tooltip(t){return arguments.length?(t!==this._tooltip&&(this._tooltip=t,this._resetRenderer()),this):this._tooltip},loader(t){return arguments.length?(t!==this._loader&&(Xh.prototype.loader.call(this,t),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(Zb(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:uSe,addEventListener(t,e,n){let i=e;return n&&n.trap===!1||(i=uC(this,e),i.raw=e),this._handler.on(t,i),this},removeEventListener(t,e){for(var n=this._handler.handlers(t),i=n.length,s,o;--i>=0;)if(o=n[i].type,s=n[i].handler,t===o&&(e===s||e===s.raw)){this._handler.off(o,s);break}return this},addResizeListener(t){const e=this._resizeListeners;return e.indexOf(t)<0&&e.push(t),this},removeResizeListener(t){var e=this._resizeListeners,n=e.indexOf(t);return n>=0&&e.splice(n,1),this},addSignalListener(t,e){return $6(this,t,Zb(this,t),e)},removeSignalListener(t,e){return z6(this,Zb(this,t),e)},addDataListener(t,e){return $6(this,t,r1(this,t).values,e)},removeDataListener(t,e){return z6(this,r1(this,t).values,e)},globalCursor(t){if(arguments.length){if(this._globalCursor!==!!t){const e=QI(this,null);this._globalCursor=!!t,e&&QI(this,e)}return this}else return this._globalCursor},preventDefault(t){return arguments.length?(this._preventDefault=t,this):this._preventDefault},timer:ySe,events:$Ee,finalize:qEe,hover:zEe,data:OEe,change:tS,insert:MEe,remove:AEe,scale:dSe,initialize:iSe,toImageURL:rSe,toCanvas:oSe,toSVG:lSe,getState:hSe,setState:_Se});const TSe="view",o1="[",l1="]",SY="{",xY="}",vSe=":",BY=",",ESe="@",SSe=">",xSe=/[[\]{}]/,BSe={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let kY,IY;function Ud(t,e,n){return kY=e||TSe,IY=n||BSe,FY(t.trim()).map(ZI)}function kSe(t){return IY[t]}function V_(t,e,n,i,s){const o=t.length;let c=0,d;for(;e<o;++e){if(d=t[e],!c&&d===n)return e;s&&s.indexOf(d)>=0?--c:i&&i.indexOf(d)>=0&&++c}return e}function FY(t){const e=[],n=t.length;let i=0,s=0;for(;s<n;)s=V_(t,s,BY,o1+SY,l1+xY),e.push(t.substring(i,s).trim()),i=++s;if(e.length===0)throw"Empty event selector: "+t;return e}function ZI(t){return t[0]==="["?ISe(t):FSe(t)}function ISe(t){const e=t.length;let n=1,i;if(n=V_(t,n,l1,o1,l1),n===e)throw"Empty between selector: "+t;if(i=FY(t.substring(1,n)),i.length!==2)throw"Between selector must have two elements: "+t;if(t=t.slice(n+1).trim(),t[0]!==SSe)throw"Expected '>' after between selector: "+t;i=i.map(ZI);const s=ZI(t.slice(1).trim());return s.between?{between:i,stream:s}:(s.between=i,s)}function FSe(t){const e={source:kY},n=[];let i=[0,0],s=0,o=0,c=t.length,d=0,f,u;if(t[c-1]===xY){if(d=t.lastIndexOf(SY),d>=0){try{i=OSe(t.substring(d+1,c-1))}catch{throw"Invalid throttle specification: "+t}t=t.slice(0,d).trim(),c=t.length}else throw"Unmatched right brace: "+t;d=0}if(!c)throw t;if(t[0]===ESe&&(s=++d),f=V_(t,d,vSe),f<c&&(n.push(t.substring(o,f).trim()),o=d=++f),d=V_(t,d,o1),d===c)n.push(t.substring(o,c).trim());else if(n.push(t.substring(o,d).trim()),u=[],o=++d,o===c)throw"Unmatched left bracket: "+t;for(;d<c;){if(d=V_(t,d,l1),d===c)throw"Unmatched left bracket: "+t;if(u.push(t.substring(o,d).trim()),d<c-1&&t[++d]!==o1)throw"Expected left bracket: "+t;o=++d}if(!(c=n.length)||xSe.test(n[c-1]))throw"Invalid event selector: "+t;return c>1?(e.type=n[1],s?e.markname=n[0].slice(1):kSe(n[0])?e.marktype=n[0]:e.source=n[0]):e.type=n[0],e.type.slice(-1)==="!"&&(e.consume=!0,e.type=e.type.slice(0,-1)),u!=null&&(e.filter=u),i[0]&&(e.throttle=i[0]),i[1]&&(e.debounce=i[1]),e}function OSe(t){const e=t.split(BY);if(!t.length||e.length>2)throw t;return e.map(n=>{const i=+n;if(i!==i)throw t;return i})}function MSe(t){return Fe(t)?t:{type:t||"pad"}}const Jg=t=>+t||0,ASe=t=>({top:t,bottom:t,left:t,right:t});function NSe(t){return Fe(t)?t.signal?t:{top:Jg(t.top),bottom:Jg(t.bottom),left:Jg(t.left),right:Jg(t.right)}:ASe(Jg(t))}const _i=t=>Fe(t)&&!he(t)?mt({},t):{value:t};function q6(t,e,n,i){return n!=null?(Fe(n)&&!he(n)||he(n)&&n.length&&Fe(n[0])?t.update[e]=n:t[i||"enter"][e]={value:n},1):0}function ki(t,e,n){for(const i in e)q6(t,i,e[i]);for(const i in n)q6(t,i,n[i],"update")}function bg(t,e,n){for(const i in e)n&&Le(n,i)||(t[i]=mt(t[i]||{},e[i]));return t}function vh(t,e){return e&&(e.enter&&e.enter[t]||e.update&&e.update[t])}const gC="mark",_C="frame",yC="scope",CSe="axis",RSe="axis-domain",LSe="axis-grid",PSe="axis-label",DSe="axis-tick",jSe="axis-title",USe="legend",$Se="legend-band",zSe="legend-entry",qSe="legend-gradient",OY="legend-label",GSe="legend-symbol",VSe="legend-title",WSe="title",HSe="title-text",YSe="title-subtitle";function XSe(t,e,n,i,s){const o={},c={};let d,f,u,a;f="lineBreak",e==="text"&&s[f]!=null&&!vh(f,t)&&BB(o,f,s[f]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),a=n===_C?s.group:n===gC?mt({},s.mark,s[e]):null;for(f in a)u=vh(f,t)||(f==="fill"||f==="stroke")&&(vh("fill",t)||vh("stroke",t)),u||BB(o,f,a[f]);Ie(i).forEach(_=>{const w=s.style&&s.style[_];for(const m in w)vh(m,t)||BB(o,m,w[m])}),t=mt({},t);for(f in o)a=o[f],a.signal?(d=d||{})[f]=a:c[f]=a;return t.enter=mt(c,t.enter),d&&(t.update=mt(d,t.update)),t}function BB(t,e,n){t[e]=n&&n.signal?{signal:n.signal}:{value:n}}const MY=t=>ke(t)?Se(t):t.signal?`(${t.signal})`:AY(t);function iS(t){if(t.gradient!=null)return JSe(t);let e=t.signal?`(${t.signal})`:t.color?KSe(t.color):t.field!=null?AY(t.field):t.value!==void 0?Se(t.value):void 0;return t.scale!=null&&(e=QSe(t,e)),e===void 0&&(e=null),t.exponent!=null&&(e=`pow(${e},${W0(t.exponent)})`),t.mult!=null&&(e+=`*${W0(t.mult)}`),t.offset!=null&&(e+=`+${W0(t.offset)}`),t.round&&(e=`round(${e})`),e}const e0=(t,e,n,i)=>`(${t}(${[e,n,i].map(iS).join(",")})+'')`;function KSe(t){return t.c?e0("hcl",t.h,t.c,t.l):t.h||t.s?e0("hsl",t.h,t.s,t.l):t.l||t.a?e0("lab",t.l,t.a,t.b):t.r||t.g||t.b?e0("rgb",t.r,t.g,t.b):null}function JSe(t){const e=[t.start,t.stop,t.count].map(n=>n==null?null:Se(n));for(;e.length&&Lt(e)==null;)e.pop();return e.unshift(MY(t.gradient)),`gradient(${e.join(",")})`}function W0(t){return Fe(t)?"("+iS(t)+")":t}function AY(t){return NY(Fe(t)?t:{datum:t})}function NY(t){let e,n,i;if(t.signal)e="datum",i=t.signal;else if(t.group||t.parent){for(n=Math.max(1,t.level||1),e="item";n-- >0;)e+=".mark.group";t.parent?(i=t.parent,e+=".datum"):i=t.group}else t.datum?(e="datum",i=t.datum):de("Invalid field reference: "+Se(t));return t.signal||(i=ke(i)?il(i).map(Se).join("]["):NY(i)),e+"["+i+"]"}function QSe(t,e){const n=MY(t.scale);return t.range!=null?e=`lerp(_range(${n}), ${+t.range})`:(e!==void 0&&(e=`_scale(${n}, ${e})`),t.band&&(e=(e?e+"+":"")+`_bandwidth(${n})`+(+t.band==1?"":"*"+W0(t.band)),t.extra&&(e=`(datum.extra ? _scale(${n}, datum.extra.value) : ${e})`)),e==null&&(e="0")),e}function ZSe(t){let e="";return t.forEach(n=>{const i=iS(n);e+=n.test?`(${n.test})?${i}:`:i}),Lt(e)===":"&&(e+="null"),e}function CY(t,e,n,i,s,o){const c={};o=o||{},o.encoders={$encode:c},t=XSe(t,e,n,i,s.config);for(const d in t)c[d]=exe(t[d],e,o,s);return o}function exe(t,e,n,i){const s={},o={};for(const c in t)t[c]!=null&&(s[c]=nxe(txe(t[c]),i,n,o));return{$expr:{marktype:e,channels:s},$fields:Object.keys(o),$output:Object.keys(t)}}function txe(t){return he(t)?ZSe(t):iS(t)}function nxe(t,e,n,i){const s=Yo(t,e);return s.$fields.forEach(o=>i[o]=1),mt(n,s.$params),s.$expr}const ixe="outer",sxe=["value","update","init","react","bind"];function G6(t,e){de(t+' for "outer" push: '+Se(e))}function RY(t,e){const n=t.name;if(t.push===ixe)e.signals[n]||G6("No prior signal definition",n),sxe.forEach(i=>{t[i]!==void 0&&G6("Invalid property ",i)});else{const i=e.addSignal(n,t.value);t.react===!1&&(i.react=!1),t.bind&&e.addBinding(n,t.bind)}}function eF(t,e,n,i){this.id=-1,this.type=t,this.value=e,this.params=n,i&&(this.parent=i)}function sS(t,e,n,i){return new eF(t,e,n,i)}function c1(t,e){return sS("operator",t,e)}function Pe(t){const e={$ref:t.id};return t.id<0&&(t.refs=t.refs||[]).push(e),e}function Ly(t,e){return e?{$field:t,$name:e}:{$field:t}}const tF=Ly("key");function V6(t,e){return{$compare:t,$order:e}}function rxe(t,e){const n={$key:t};return e&&(n.$flat=!0),n}const axe="ascending",oxe="descending";function lxe(t){return Fe(t)?(t.order===oxe?"-":"+")+rS(t.op,t.field):""}function rS(t,e){return(t&&t.signal?"$"+t.signal:t||"")+(t&&e?"_":"")+(e&&e.signal?"$"+e.signal:e||"")}const mC="scope",nF="view";function si(t){return t&&t.signal}function cxe(t){return t&&t.expr}function H0(t){if(si(t))return!0;if(Fe(t)){for(const e in t)if(H0(t[e]))return!0}return!1}function pa(t,e){return t!=null?t:e}function Wf(t){return t&&t.signal||t}const W6="timer";function Py(t,e){return(t.merge?fxe:t.stream?uxe:t.type?hxe:de("Invalid stream specification: "+Se(t)))(t,e)}function dxe(t){return t===mC?nF:t||nF}function fxe(t,e){const n=t.merge.map(s=>Py(s,e)),i=wC({merge:n},t,e);return e.addStream(i).id}function uxe(t,e){const n=Py(t.stream,e),i=wC({stream:n},t,e);return e.addStream(i).id}function hxe(t,e){let n;t.type===W6?(n=e.event(W6,t.throttle),t={between:t.between,filter:t.filter}):n=e.event(dxe(t.source),t.type);const i=wC({stream:n},t,e);return Object.keys(i).length===1?n:e.addStream(i).id}function wC(t,e,n){let i=e.between;return i&&(i.length!==2&&de('Stream "between" parameter must have 2 entries: '+Se(e)),t.between=[Py(i[0],n),Py(i[1],n)]),i=e.filter?[].concat(e.filter):[],(e.marktype||e.markname||e.markrole)&&i.push(pxe(e.marktype,e.markname,e.markrole)),e.source===mC&&i.push("inScope(event.item)"),i.length&&(t.filter=Yo("("+i.join(")&&(")+")",n).$expr),(i=e.throttle)!=null&&(t.throttle=+i),(i=e.debounce)!=null&&(t.debounce=+i),e.consume&&(t.consume=!0),t}function pxe(t,e,n){const i="event.item";return i+(t&&t!=="*"?"&&"+i+".mark.marktype==='"+t+"'":"")+(n?"&&"+i+".mark.role==='"+n+"'":"")+(e?"&&"+i+".mark.name==='"+e+"'":"")}const gxe={code:"_.$value",ast:{type:"Identifier",value:"value"}};function _xe(t,e,n){const i=t.encode,s={target:n};let o=t.events,c=t.update,d=[];o||de("Signal update missing events specification."),ke(o)&&(o=Ud(o,e.isSubscope()?mC:nF)),o=Ie(o).filter(f=>f.signal||f.scale?(d.push(f),0):1),d.length>1&&(d=[mxe(d)]),o.length&&d.push(o.length>1?{merge:o}:o[0]),i!=null&&(c&&de("Signal encode and update are mutually exclusive."),c="encode(item(),"+Se(i)+")"),s.update=ke(c)?Yo(c,e):c.expr!=null?Yo(c.expr,e):c.value!=null?c.value:c.signal!=null?{$expr:gxe,$params:{$value:e.signalRef(c.signal)}}:de("Invalid signal update specification."),t.force&&(s.options={force:!0}),d.forEach(f=>e.addUpdate(mt(yxe(f,e),s)))}function yxe(t,e){return{source:t.signal?e.signalRef(t.signal):t.scale?e.scaleRef(t.scale):Py(t,e)}}function mxe(t){return{signal:"["+t.map(e=>e.scale?'scale("'+e.scale+'")':e.signal)+"]"}}function wxe(t,e){const n=e.getSignal(t.name);let i=t.update;t.init&&(i?de("Signals can not include both init and update expressions."):(i=t.init,n.initonly=!0)),i&&(i=Yo(i,e),n.update=i.$expr,n.params=i.$params),t.on&&t.on.forEach(s=>_xe(s,e,n.id))}const dn=t=>(e,n,i)=>sS(t,n,e||void 0,i),LY=dn("aggregate"),bxe=dn("axisticks"),PY=dn("bound"),qa=dn("collect"),H6=dn("compare"),Txe=dn("datajoin"),DY=dn("encode"),vxe=dn("expression"),Exe=dn("facet"),Sxe=dn("field"),xxe=dn("key"),Bxe=dn("legendentries"),kxe=dn("load"),Ixe=dn("mark"),Fxe=dn("multiextent"),Oxe=dn("multivalues"),Mxe=dn("overlap"),Axe=dn("params"),jY=dn("prefacet"),Nxe=dn("projection"),Cxe=dn("proxy"),Rxe=dn("relay"),UY=dn("render"),Lxe=dn("scale"),Gu=dn("sieve"),Pxe=dn("sortitems"),$Y=dn("viewlayout"),Dxe=dn("values");let jxe=0;const zY={min:"min",max:"max",count:"sum"};function Uxe(t,e){const n=t.type||"linear";DV(n)||de("Unrecognized scale type: "+Se(n)),e.addScale(t.name,{type:n,domain:void 0})}function $xe(t,e){const n=e.getScale(t.name).params;let i;n.domain=qY(t.domain,t,e),t.range!=null&&(n.range=VY(t,e,n)),t.interpolate!=null&&Jxe(t.interpolate,n),t.nice!=null&&(n.nice=Kxe(t.nice)),t.bins!=null&&(n.bins=Xxe(t.bins,e));for(i in t)Le(n,i)||i==="name"||(n[i]=Lr(t[i],e))}function Lr(t,e){return Fe(t)?t.signal?e.signalRef(t.signal):de("Unsupported object: "+Se(t)):t}function Y0(t,e){return t.signal?e.signalRef(t.signal):t.map(n=>Lr(n,e))}function aS(t){de("Can not find data set: "+Se(t))}function qY(t,e,n){if(!t){(e.domainMin!=null||e.domainMax!=null)&&de("No scale domain defined for domainMin/domainMax to override.");return}return t.signal?n.signalRef(t.signal):(he(t)?zxe:t.fields?Gxe:qxe)(t,e,n)}function zxe(t,e,n){return t.map(i=>Lr(i,n))}function qxe(t,e,n){const i=n.getData(t.data);return i||aS(t.data),Cp(e.type)?i.valuesRef(n,t.field,GY(t.sort,!1)):$V(e.type)?i.domainRef(n,t.field):i.extentRef(n,t.field)}function Gxe(t,e,n){const i=t.data,s=t.fields.reduce((o,c)=>(c=ke(c)?{data:i,field:c}:he(c)||c.signal?Vxe(c,n):c,o.push(c),o),[]);return(Cp(e.type)?Wxe:$V(e.type)?Hxe:Yxe)(t,n,s)}function Vxe(t,e){const n="_:vega:_"+jxe++,i=qa({});if(he(t))i.value={$ingest:t};else if(t.signal){const s="setdata("+Se(n)+","+t.signal+")";i.params.input=e.signalRef(s)}return e.addDataPipeline(n,[i,Gu({})]),{data:n,field:"data"}}function Wxe(t,e,n){const i=GY(t.sort,!0);let s,o;const c=n.map(u=>{const a=e.getData(u.data);return a||aS(u.data),a.countsRef(e,u.field,i)}),d={groupby:tF,pulse:c};i&&(s=i.op||"count",o=i.field?rS(s,i.field):"count",d.ops=[zY[s]],d.fields=[e.fieldRef(o)],d.as=[o]),s=e.add(LY(d));const f=e.add(qa({pulse:Pe(s)}));return o=e.add(Dxe({field:tF,sort:e.sortRef(i),pulse:Pe(f)})),Pe(o)}function GY(t,e){return t&&(!t.field&&!t.op?Fe(t)?t.field="key":t={field:"key"}:!t.field&&t.op!=="count"?de("No field provided for sort aggregate op: "+t.op):e&&t.field&&t.op&&!zY[t.op]&&de("Multiple domain scales can not be sorted using "+t.op)),t}function Hxe(t,e,n){const i=n.map(s=>{const o=e.getData(s.data);return o||aS(s.data),o.domainRef(e,s.field)});return Pe(e.add(Oxe({values:i})))}function Yxe(t,e,n){const i=n.map(s=>{const o=e.getData(s.data);return o||aS(s.data),o.extentRef(e,s.field)});return Pe(e.add(Fxe({extents:i})))}function Xxe(t,e){return t.signal||he(t)?Y0(t,e):e.objectProperty(t)}function Kxe(t){return Fe(t)?{interval:Lr(t.interval),step:Lr(t.step)}:Lr(t)}function Jxe(t,e){e.interpolate=Lr(t.type||t),t.gamma!=null&&(e.interpolateGamma=Lr(t.gamma))}function VY(t,e,n){const i=e.config.range;let s=t.range;if(s.signal)return e.signalRef(s.signal);if(ke(s)){if(i&&Le(i,s))return t=mt({},t,{range:i[s]}),VY(t,e,n);s==="width"?s=[0,{signal:"width"}]:s==="height"?s=Cp(t.type)?[0,{signal:"height"}]:[{signal:"height"},0]:de("Unrecognized scale range value: "+Se(s))}else if(s.scheme){n.scheme=he(s.scheme)?Y0(s.scheme,e):Lr(s.scheme,e),s.extent&&(n.schemeExtent=Y0(s.extent,e)),s.count&&(n.schemeCount=Lr(s.count,e));return}else if(s.step){n.rangeStep=Lr(s.step,e);return}else{if(Cp(t.type)&&!he(s))return qY(s,t,e);he(s)||de("Unsupported range type: "+Se(s))}return s.map(o=>(he(o)?Y0:Lr)(o,e))}function Qxe(t,e){const n=e.config.projection||{},i={};for(const s in t)s!=="name"&&(i[s]=iF(t[s],s,e));for(const s in n)i[s]==null&&(i[s]=iF(n[s],s,e));e.addProjection(t.name,i)}function iF(t,e,n){return he(t)?t.map(i=>iF(i,e,n)):Fe(t)?t.signal?n.signalRef(t.signal):e==="fit"?t:de("Unsupported parameter object: "+Se(t)):t}const Ga="top",Tg="left",vg="right",wd="bottom",WY="center",Zxe="vertical",eBe="start",tBe="middle",nBe="end",sF="index",bC="label",iBe="offset",Up="perc",sBe="perc2",$r="value",qm="guide-label",TC="guide-title",rBe="group-title",aBe="group-subtitle",Y6="symbol",X0="gradient",rF="discrete",aF="size",oBe="shape",lBe="fill",cBe="stroke",dBe="strokeWidth",fBe="strokeDash",uBe="opacity",vC=[aF,oBe,lBe,cBe,dBe,fBe,uBe],Gm={name:1,style:1,interactive:1},Ut={value:0},zr={value:1},oS="group",HY="rect",EC="rule",hBe="symbol",Vu="text";function Dy(t){return t.type=oS,t.interactive=t.interactive||!1,t}function er(t,e){const n=(i,s)=>pa(t[i],pa(e[i],s));return n.isVertical=i=>Zxe===pa(t.direction,e.direction||(i?e.symbolDirection:e.gradientDirection)),n.gradientLength=()=>pa(t.gradientLength,e.gradientLength||e.gradientWidth),n.gradientThickness=()=>pa(t.gradientThickness,e.gradientThickness||e.gradientHeight),n.entryColumns=()=>pa(t.columns,pa(e.columns,+n.isVertical(!0))),n}function YY(t,e){const n=e&&(e.update&&e.update[t]||e.enter&&e.enter[t]);return n&&n.signal?n:n?n.value:null}function pBe(t,e,n){const i=e.config.style[n];return i&&i[t]}function lS(t,e,n){return`item.anchor === '${eBe}' ? ${t} : item.anchor === '${nBe}' ? ${e} : ${n}`}const SC=lS(Se(Tg),Se(vg),Se(WY));function gBe(t){const e=t("tickBand");let n=t("tickOffset"),i,s;return e?e.signal?(i={signal:`(${e.signal}) === 'extent' ? 1 : 0.5`},s={signal:`(${e.signal}) === 'extent'`},Fe(n)||(n={signal:`(${e.signal}) === 'extent' ? 0 : ${n}`})):e==="extent"?(i=1,s=!0,n=0):(i=.5,s=!1):(i=t("bandPosition"),s=t("tickExtra")),{extra:s,band:i,offset:n}}function XY(t,e){return e?t?Fe(t)?Object.assign({},t,{offset:XY(t.offset,e)}):{value:t,offset:e}:e:t}function vr(t,e){return e?(t.name=e.name,t.style=e.style||t.style,t.interactive=!!e.interactive,t.encode=bg(t.encode,e,Gm)):t.interactive=!1,t}function _Be(t,e,n,i){const s=er(t,n),o=s.isVertical(),c=s.gradientThickness(),d=s.gradientLength();let f,u,a,_,w;o?(u=[0,1],a=[0,0],_=c,w=d):(u=[0,0],a=[1,0],_=d,w=c);const m={enter:f={opacity:Ut,x:Ut,y:Ut,width:_i(_),height:_i(w)},update:mt({},f,{opacity:zr,fill:{gradient:e,start:u,stop:a}}),exit:{opacity:Ut}};return ki(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),vr({type:HY,role:qSe,encode:m},i)}function yBe(t,e,n,i,s){const o=er(t,n),c=o.isVertical(),d=o.gradientThickness(),f=o.gradientLength();let u,a,_,w,m="";c?(u="y",_="y2",a="x",w="width",m="1-"):(u="x",_="x2",a="y",w="height");const l={opacity:Ut,fill:{scale:e,field:$r}};l[u]={signal:m+"datum."+Up,mult:f},l[a]=Ut,l[_]={signal:m+"datum."+sBe,mult:f},l[w]=_i(d);const T={enter:l,update:mt({},l,{opacity:zr}),exit:{opacity:Ut}};return ki(T,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),vr({type:HY,role:$Se,key:$r,from:s,encode:T},i)}const mBe=`datum.${Up}<=0?"${Tg}":datum.${Up}>=1?"${vg}":"${WY}"`,wBe=`datum.${Up}<=0?"${wd}":datum.${Up}>=1?"${Ga}":"${tBe}"`;function X6(t,e,n,i){const s=er(t,e),o=s.isVertical(),c=_i(s.gradientThickness()),d=s.gradientLength();let f=s("labelOverlap"),u,a,_,w,m="";const l={enter:u={opacity:Ut},update:a={opacity:zr,text:{field:bC}},exit:{opacity:Ut}};return ki(l,{fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:pa(t.labelLimit,e.gradientLabelLimit)}),o?(u.align={value:"left"},u.baseline=a.baseline={signal:wBe},_="y",w="x",m="1-"):(u.align=a.align={signal:mBe},u.baseline={value:"top"},_="x",w="y"),u[_]=a[_]={signal:m+"datum."+Up,mult:d},u[w]=a[w]=c,c.offset=pa(t.labelOffset,e.gradientLabelOffset)||0,f=f?{separation:s("labelSeparation"),method:f,order:"datum."+sF}:void 0,vr({type:Vu,role:OY,style:qm,key:$r,from:i,encode:l,overlap:f},n)}function bBe(t,e,n,i,s){const o=er(t,e),c=n.entries,d=!!(c&&c.interactive),f=c?c.name:void 0,u=o("clipHeight"),a=o("symbolOffset"),_={data:"value"},w=`(${s}) ? datum.${iBe} : datum.${aF}`,m=u?_i(u):{field:aF},l=`datum.${sF}`,T=`max(1, ${s})`;let b,S,x,B,F;m.mult=.5,b={enter:S={opacity:Ut,x:{signal:w,mult:.5,offset:a},y:m},update:x={opacity:zr,x:S.x,y:S.y},exit:{opacity:Ut}};let k=null,M=null;t.fill||(k=e.symbolBaseFillColor,M=e.symbolBaseStrokeColor),ki(b,{fill:o("symbolFillColor",k),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",M),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),vC.forEach(j=>{t[j]&&(x[j]=S[j]={scale:t[j],field:$r})});const A=vr({type:hBe,role:GSe,key:$r,from:_,clip:u?!0:void 0,encode:b},n.symbols),R=_i(a);R.offset=o("labelOffset"),b={enter:S={opacity:Ut,x:{signal:w,offset:R},y:m},update:x={opacity:zr,text:{field:bC},x:S.x,y:S.y},exit:{opacity:Ut}},ki(b,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});const P=vr({type:Vu,role:OY,style:qm,key:$r,from:_,encode:b},n.labels);return b={enter:{noBound:{value:!u},width:Ut,height:u?_i(u):Ut,opacity:Ut},exit:{opacity:Ut},update:x={opacity:zr,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(B=`ceil(item.mark.items.length / ${T})`,x.row.signal=`${l}%${B}`,x.column.signal=`floor(${l} / ${B})`,F={field:["row",l]}):(x.row.signal=`floor(${l} / ${T})`,x.column.signal=`${l} % ${T}`,F={field:l}),x.column.signal=`(${s})?${x.column.signal}:${l}`,i={facet:{data:i,name:"value",groupby:sF}},Dy({role:yC,from:i,encode:bg(b,c,Gm),marks:[A,P],name:f,interactive:d,sort:F})}function TBe(t,e){const n=er(t,e);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const xC='item.orient === "left"',BC='item.orient === "right"',cS=`(${xC} || ${BC})`,vBe=`datum.vgrad && ${cS}`,EBe=lS('"top"','"bottom"','"middle"'),SBe=lS('"right"','"left"','"center"'),xBe=`datum.vgrad && ${BC} ? (${SBe}) : (${cS} && !(datum.vgrad && ${xC})) ? "left" : ${SC}`,BBe=`item._anchor || (${cS} ? "middle" : "start")`,kBe=`${vBe} ? (${xC} ? -90 : 90) : 0`,IBe=`${cS} ? (datum.vgrad ? (${BC} ? "bottom" : "top") : ${EBe}) : "top"`;function FBe(t,e,n,i){const s=er(t,e),o={enter:{opacity:Ut},update:{opacity:zr,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Ut}};return ki(o,{orient:s("titleOrient"),_anchor:s("titleAnchor"),anchor:{signal:BBe},angle:{signal:kBe},align:{signal:xBe},baseline:{signal:IBe},text:t.title,fill:s("titleColor"),fillOpacity:s("titleOpacity"),font:s("titleFont"),fontSize:s("titleFontSize"),fontStyle:s("titleFontStyle"),fontWeight:s("titleFontWeight"),limit:s("titleLimit"),lineHeight:s("titleLineHeight")},{align:s("titleAlign"),baseline:s("titleBaseline")}),vr({type:Vu,role:VSe,style:TC,from:i,encode:o},n)}function OBe(t,e){let n;return Fe(t)&&(t.signal?n=t.signal:t.path?n="pathShape("+K6(t.path)+")":t.sphere&&(n="geoShape("+K6(t.sphere)+', {type: "Sphere"})')),n?e.signalRef(n):!!t}function K6(t){return Fe(t)&&t.signal?t.signal:Se(t)}function KY(t){const e=t.role||"";return!e.indexOf("axis")||!e.indexOf("legend")||!e.indexOf("title")?e:t.type===oS?yC:e||gC}function MBe(t){return{marktype:t.type,name:t.name||void 0,role:t.role||KY(t),zindex:+t.zindex||void 0,aria:t.aria,description:t.description}}function ABe(t,e){return t&&t.signal?e.signalRef(t.signal):t!==!1}function kC(t,e){const n=aV(t.type);n||de("Unrecognized transform type: "+Se(t.type));const i=sS(n.type.toLowerCase(),null,JY(n,t,e));return t.signal&&e.addSignal(t.signal,e.proxy(i)),i.metadata=n.metadata||{},i}function JY(t,e,n){const i={},s=t.params.length;for(let o=0;o<s;++o){const c=t.params[o];i[c.name]=NBe(c,e,n)}return i}function NBe(t,e,n){const i=t.type,s=e[t.name];if(i==="index")return CBe(t,e,n);if(s===void 0){t.required&&de("Missing required "+Se(e.type)+" parameter: "+Se(t.name));return}else{if(i==="param")return RBe(t,e,n);if(i==="projection")return n.projectionRef(e[t.name])}return t.array&&!si(s)?s.map(o=>J6(t,o,n)):J6(t,s,n)}function J6(t,e,n){const i=t.type;if(si(e))return Z6(i)?de("Expression references can not be signals."):kB(i)?n.fieldRef(e):ej(i)?n.compareRef(e):n.signalRef(e.signal);{const s=t.expr||kB(i);return s&&LBe(e)?n.exprRef(e.expr,e.as):s&&PBe(e)?Ly(e.field,e.as):Z6(i)?Yo(e,n):DBe(i)?Pe(n.getData(e).values):kB(i)?Ly(e):ej(i)?n.compareRef(e):e}}function CBe(t,e,n){return ke(e.from)||de('Lookup "from" parameter must be a string literal.'),n.getData(e.from).lookupRef(n,e.key)}function RBe(t,e,n){const i=e[t.name];return t.array?(he(i)||de("Expected an array of sub-parameters. Instead: "+Se(i)),i.map(s=>Q6(t,s,n))):Q6(t,i,n)}function Q6(t,e,n){const i=t.params.length;let s;for(let c=0;c<i;++c){s=t.params[c];for(const d in s.key)if(s.key[d]!==e[d]){s=null;break}if(s)break}s||de("Unsupported parameter: "+Se(e));const o=mt(JY(s,e,n),s.key);return Pe(n.add(Axe(o)))}const LBe=t=>t&&t.expr,PBe=t=>t&&t.field,DBe=t=>t==="data",Z6=t=>t==="expr",kB=t=>t==="field",ej=t=>t==="compare";function jBe(t,e,n){let i,s,o,c,d;return t?(i=t.facet)&&(e||de("Only group marks can be faceted."),i.field!=null?c=d=K0(i,n):(t.data?d=Pe(n.getData(t.data).aggregate):(o=kC(mt({type:"aggregate",groupby:Ie(i.groupby)},i.aggregate),n),o.params.key=n.keyRef(i.groupby),o.params.pulse=K0(i,n),c=d=Pe(n.add(o))),s=n.keyRef(i.groupby,!0))):c=Pe(n.add(qa(null,[{}]))),c||(c=K0(t,n)),{key:s,pulse:c,parent:d}}function K0(t,e){return t.$ref?t:t.data&&t.data.$ref?t.data:Pe(e.getData(t.data).output)}function hu(t,e,n,i,s){this.scope=t,this.input=e,this.output=n,this.values=i,this.aggregate=s,this.index={}}hu.fromEntries=function(t,e){const n=e.length,i=e[n-1],s=e[n-2];let o=e[0],c=null,d=1;for(o&&o.type==="load"&&(o=e[1]),t.add(e[0]);d<n;++d)e[d].params.pulse=Pe(e[d-1]),t.add(e[d]),e[d].type==="aggregate"&&(c=e[d]);return new hu(t,o,s,i,c)};function QY(t){return ke(t)?t:null}function tj(t,e,n){const i=rS(n.op,n.field);let s;if(e.ops){for(let o=0,c=e.as.length;o<c;++o)if(e.as[o]===i)return}else e.ops=["count"],e.fields=[null],e.as=["count"];n.op&&(e.ops.push((s=n.op.signal)?t.signalRef(s):n.op),e.fields.push(t.fieldRef(n.field)),e.as.push(i))}function Qg(t,e,n,i,s,o,c){const d=e[n]||(e[n]={}),f=lxe(o);let u=QY(s),a,_;if(u!=null&&(t=e.scope,u=u+(f?"|"+f:""),a=d[u]),!a){const w=o?{field:tF,pulse:e.countsRef(t,s,o)}:{field:t.fieldRef(s),pulse:Pe(e.output)};f&&(w.sort=t.sortRef(o)),_=t.add(sS(i,void 0,w)),c&&(e.index[s]=_),a=Pe(_),u!=null&&(d[u]=a)}return a}hu.prototype={countsRef(t,e,n){const i=this,s=i.counts||(i.counts={}),o=QY(e);let c,d,f;return o!=null&&(t=i.scope,c=s[o]),c?n&&n.field&&tj(t,c.agg.params,n):(f={groupby:t.fieldRef(e,"key"),pulse:Pe(i.output)},n&&n.field&&tj(t,f,n),d=t.add(LY(f)),c=t.add(qa({pulse:Pe(d)})),c={agg:d,ref:Pe(c)},o!=null&&(s[o]=c)),c.ref},tuplesRef(){return Pe(this.values)},extentRef(t,e){return Qg(t,this,"extent","extent",e,!1)},domainRef(t,e){return Qg(t,this,"domain","values",e,!1)},valuesRef(t,e,n){return Qg(t,this,"vals","values",e,n||!0)},lookupRef(t,e){return Qg(t,this,"lookup","tupleindex",e,!1)},indataRef(t,e){return Qg(t,this,"indata","tupleindex",e,!0,!0)}};function UBe(t,e,n){const i=t.from.facet,s=i.name,o=K0(i,e);let c;i.name||de("Facet must have a name: "+Se(i)),i.data||de("Facet must reference a data set: "+Se(i)),i.field?c=e.add(jY({field:e.fieldRef(i.field),pulse:o})):i.groupby?c=e.add(Exe({key:e.keyRef(i.groupby),group:Pe(e.proxy(n.parent)),pulse:o})):de("Facet must specify groupby or field: "+Se(i));const d=e.fork(),f=d.add(qa()),u=d.add(Gu({pulse:Pe(f)}));d.addData(s,new hu(d,f,f,u)),d.addSignal("parent",null),c.params.subflow={$subflow:d.parse(t).toRuntime()}}function $Be(t,e,n){const i=e.add(jY({pulse:n.pulse})),s=e.fork();s.add(Gu()),s.addSignal("parent",null),i.params.subflow={$subflow:s.parse(t).toRuntime()}}function ZY(t,e,n){const i=t.remove,s=t.insert,o=t.toggle,c=t.modify,d=t.values,f=e.add(c1()),u="if("+t.trigger+',modify("'+n+'",'+[s,i,o,c,d].map(_=>_==null?"null":_).join(",")+"),0)",a=Yo(u,e);f.update=a.$expr,f.params=a.$params}function dS(t,e){const n=KY(t),i=t.type===oS,s=t.from&&t.from.facet,o=t.overlap;let c=t.layout||n===yC||n===_C,d,f,u,a,_,w,m;const l=n===gC||c||s,T=jBe(t.from,i,e);f=e.add(Txe({key:T.key||(t.key?Ly(t.key):void 0),pulse:T.pulse,clean:!i}));const b=Pe(f);f=u=e.add(qa({pulse:b})),f=e.add(Ixe({markdef:MBe(t),interactive:ABe(t.interactive,e),clip:OBe(t.clip,e),context:{$context:!0},groups:e.lookup(),parent:e.signals.parent?e.signalRef("parent"):null,index:e.markpath(),pulse:Pe(f)}));const S=Pe(f);f=a=e.add(DY(CY(t.encode,t.type,n,t.style,e,{mod:!1,pulse:S}))),f.params.parent=e.encode(),t.transform&&t.transform.forEach(M=>{const A=kC(M,e),R=A.metadata;(R.generates||R.changes)&&de("Mark transforms should not generate new data."),R.nomod||(a.params.mod=!0),A.params.pulse=Pe(f),e.add(f=A)}),t.sort&&(f=e.add(Pxe({sort:e.compareRef(t.sort),pulse:Pe(f)})));const x=Pe(f);(s||c)&&(c=e.add($Y({layout:e.objectProperty(t.layout),legends:e.legends,mark:S,pulse:x})),w=Pe(c));const B=e.add(PY({mark:S,pulse:w||x}));m=Pe(B),i&&(l&&(d=e.operators,d.pop(),c&&d.pop()),e.pushState(x,w||m,b),s?UBe(t,e,T):l?$Be(t,e,T):e.parse(t),e.popState(),l&&(c&&d.push(c),d.push(B))),o&&(m=zBe(o,m,e));const F=e.add(UY({pulse:m})),k=e.add(Gu({pulse:Pe(F)},void 0,e.parent()));t.name!=null&&(_=t.name,e.addData(_,new hu(e,u,F,k)),t.on&&t.on.forEach(M=>{(M.insert||M.remove||M.toggle)&&de("Marks only support modify triggers."),ZY(M,e,_)}))}function zBe(t,e,n){const i=t.method,s=t.bound,o=t.separation,c={separation:si(o)?n.signalRef(o.signal):o,method:si(i)?n.signalRef(i.signal):i,pulse:e};if(t.order&&(c.sort=n.compareRef({field:t.order})),s){const d=s.tolerance;c.boundTolerance=si(d)?n.signalRef(d.signal):+d,c.boundScale=n.scaleRef(s.scale),c.boundOrient=s.orient}return Pe(n.add(Mxe(c)))}function qBe(t,e){const n=e.config.legend,i=t.encode||{},s=er(t,n),o=i.legend||{},c=o.name||void 0,d=o.interactive,f=o.style,u={};let a=0,_,w,m;vC.forEach(B=>t[B]?(u[B]=t[B],a=a||t[B]):0),a||de("Missing valid scale for legend.");const l=GBe(t,e.scaleType(a)),T={title:t.title!=null,scales:u,type:l,vgrad:l!=="symbol"&&s.isVertical()},b=Pe(e.add(qa(null,[T]))),S={enter:{x:{value:0},y:{value:0}}},x=Pe(e.add(Bxe(w={type:l,scale:e.scaleRef(a),count:e.objectProperty(s("tickCount")),limit:e.property(s("symbolLimit")),values:e.objectProperty(t.values),minstep:e.property(t.tickMinStep),formatType:e.property(t.formatType),formatSpecifier:e.property(t.format)})));return l===X0?(m=[_Be(t,a,n,i.gradient),X6(t,n,i.labels,x)],w.count=w.count||e.signalRef(`max(2,2*floor((${Wf(s.gradientLength())})/100))`)):l===rF?m=[yBe(t,a,n,i.gradient,x),X6(t,n,i.labels,x)]:(_=TBe(t,n),m=[bBe(t,n,i,x,Wf(_.columns))],w.size=HBe(t,e,m[0].marks)),m=[Dy({role:zSe,from:b,encode:S,marks:m,layout:_,interactive:d})],T.title&&m.push(FBe(t,n,i.title,b)),dS(Dy({role:USe,from:b,encode:bg(WBe(s,t,n),o,Gm),marks:m,aria:s("aria"),description:s("description"),zindex:s("zindex"),name:c,interactive:d,style:f}),e)}function GBe(t,e){let n=t.type||Y6;return!t.type&&VBe(t)===1&&(t.fill||t.stroke)&&(n=RA(e)?X0:bI(e)?rF:Y6),n!==X0?n:bI(e)?rF:X0}function VBe(t){return vC.reduce((e,n)=>e+(t[n]?1:0),0)}function WBe(t,e,n){const i={enter:{},update:{}};return ki(i,{orient:t("orient"),offset:t("offset"),padding:t("padding"),titlePadding:t("titlePadding"),cornerRadius:t("cornerRadius"),fill:t("fillColor"),stroke:t("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:t("legendX"),y:t("legendY"),format:e.format,formatType:e.formatType}),i}function HBe(t,e,n){const i=Wf(nj("size",t,n)),s=Wf(nj("strokeWidth",t,n)),o=Wf(YBe(n[1].encode,e,qm));return Yo(`max(ceil(sqrt(${i})+${s}),${o})`,e)}function nj(t,e,n){return e[t]?`scale("${e[t]}",datum)`:YY(t,n[0].encode)}function YBe(t,e,n){return YY("fontSize",t)||pBe("fontSize",e,n)}const XBe=`item.orient==="${Tg}"?-90:item.orient==="${vg}"?90:0`;function KBe(t,e){t=ke(t)?{text:t}:t;const n=er(t,e.config.title),i=t.encode||{},s=i.group||{},o=s.name||void 0,c=s.interactive,d=s.style,f=[],u={},a=Pe(e.add(qa(null,[u])));return f.push(ZBe(t,n,JBe(t),a)),t.subtitle&&f.push(eke(t,n,i.subtitle,a)),dS(Dy({role:WSe,from:a,encode:QBe(n,s),marks:f,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:o,interactive:c,style:d}),e)}function JBe(t){const e=t.encode;return e&&e.title||mt({name:t.name,interactive:t.interactive,style:t.style},e)}function QBe(t,e){const n={enter:{},update:{}};return ki(n,{orient:t("orient"),anchor:t("anchor"),align:{signal:SC},angle:{signal:XBe},limit:t("limit"),frame:t("frame"),offset:t("offset")||0,padding:t("subtitlePadding")}),bg(n,e,Gm)}function ZBe(t,e,n,i){const s={value:0},o=t.text,c={enter:{opacity:s},update:{opacity:{value:1}},exit:{opacity:s}};return ki(c,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:e("dx"),dy:e("dy"),fill:e("color"),font:e("font"),fontSize:e("fontSize"),fontStyle:e("fontStyle"),fontWeight:e("fontWeight"),lineHeight:e("lineHeight")},{align:e("align"),angle:e("angle"),baseline:e("baseline")}),vr({type:Vu,role:HSe,style:rBe,from:i,encode:c},n)}function eke(t,e,n,i){const s={value:0},o=t.subtitle,c={enter:{opacity:s},update:{opacity:{value:1}},exit:{opacity:s}};return ki(c,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:e("dx"),dy:e("dy"),fill:e("subtitleColor"),font:e("subtitleFont"),fontSize:e("subtitleFontSize"),fontStyle:e("subtitleFontStyle"),fontWeight:e("subtitleFontWeight"),lineHeight:e("subtitleLineHeight")},{align:e("align"),angle:e("angle"),baseline:e("baseline")}),vr({type:Vu,role:YSe,style:aBe,from:i,encode:c},n)}function tke(t,e){const n=[];t.transform&&t.transform.forEach(i=>{n.push(kC(i,e))}),t.on&&t.on.forEach(i=>{ZY(i,e,t.name)}),e.addDataPipeline(t.name,nke(t,e,n))}function nke(t,e,n){const i=[];let s=null,o=!1,c=!1,d,f,u,a,_;for(t.values?si(t.values)||H0(t.format)?(i.push(ij(e,t)),i.push(s=ef())):i.push(s=ef({$ingest:t.values,$format:t.format})):t.url?H0(t.url)||H0(t.format)?(i.push(ij(e,t)),i.push(s=ef())):i.push(s=ef({$request:t.url,$format:t.format})):t.source&&(s=d=Ie(t.source).map(w=>Pe(e.getData(w).output)),i.push(null)),f=0,u=n.length;f<u;++f)a=n[f],_=a.metadata,!s&&!_.source&&i.push(s=ef()),i.push(a),_.generates&&(c=!0),_.modifies&&!c&&(o=!0),_.source?s=a:_.changes&&(s=null);return d&&(u=d.length-1,i[0]=Rxe({derive:o,pulse:u?d:d[0]}),(o||u)&&i.splice(1,0,ef())),s||i.push(ef()),i.push(Gu({})),i}function ef(t){const e=qa({},t);return e.metadata={source:!0},e}function ij(t,e){return kxe({url:e.url?t.property(e.url):void 0,async:e.async?t.property(e.async):void 0,values:e.values?t.property(e.values):void 0,format:t.objectProperty(e.format)})}const eX=t=>t===wd||t===Ga,fS=(t,e,n)=>si(t)?ake(t.signal,e,n):t===Tg||t===Ga?e:n,yi=(t,e,n)=>si(t)?ske(t.signal,e,n):eX(t)?e:n,Ma=(t,e,n)=>si(t)?rke(t.signal,e,n):eX(t)?n:e,tX=(t,e,n)=>si(t)?oke(t.signal,e,n):t===Ga?{value:e}:{value:n},ike=(t,e,n)=>si(t)?lke(t.signal,e,n):t===vg?{value:e}:{value:n},ske=(t,e,n)=>nX(`${t} === '${Ga}' || ${t} === '${wd}'`,e,n),rke=(t,e,n)=>nX(`${t} !== '${Ga}' && ${t} !== '${wd}'`,e,n),ake=(t,e,n)=>IC(`${t} === '${Tg}' || ${t} === '${Ga}'`,e,n),oke=(t,e,n)=>IC(`${t} === '${Ga}'`,e,n),lke=(t,e,n)=>IC(`${t} === '${vg}'`,e,n),nX=(t,e,n)=>(e=e!=null?_i(e):e,n=n!=null?_i(n):n,sj(e)&&sj(n)?(e=e?e.signal||Se(e.value):null,n=n?n.signal||Se(n.value):null,{signal:`${t} ? (${e}) : (${n})`}):[mt({test:t},e)].concat(n||[])),sj=t=>t==null||Object.keys(t).length===1,IC=(t,e,n)=>({signal:`${t} ? (${Nh(e)}) : (${Nh(n)})`}),cke=(t,e,n,i,s)=>({signal:(i!=null?`${t} === '${Tg}' ? (${Nh(i)}) : `:"")+(n!=null?`${t} === '${wd}' ? (${Nh(n)}) : `:"")+(s!=null?`${t} === '${vg}' ? (${Nh(s)}) : `:"")+(e!=null?`${t} === '${Ga}' ? (${Nh(e)}) : `:"")+"(null)"}),Nh=t=>si(t)?t.signal:t==null?null:Se(t),dke=(t,e)=>e===0?0:si(t)?{signal:`(${t.signal}) * ${e}`}:{value:t*e},Kh=(t,e)=>{const n=t.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+e.signal}:t};function dh(t,e,n,i){let s;if(e&&Le(e,t))return e[t];if(Le(n,t))return n[t];if(t.startsWith("title")){switch(t){case"titleColor":s="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":s=t[5].toLowerCase()+t.slice(6)}return i[TC][s]}else if(t.startsWith("label")){switch(t){case"labelColor":s="fill";break;case"labelFont":case"labelFontSize":s=t[5].toLowerCase()+t.slice(6)}return i[qm][s]}return null}function rj(t){const e={};for(const n of t)if(!!n)for(const i in n)e[i]=1;return Object.keys(e)}function fke(t,e){var n=e.config,i=n.style,s=n.axis,o=e.scaleType(t.scale)==="band"&&n.axisBand,c=t.orient,d,f,u;if(si(c)){const _=rj([n.axisX,n.axisY]),w=rj([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);d={};for(u of _)d[u]=yi(c,dh(u,n.axisX,s,i),dh(u,n.axisY,s,i));f={};for(u of w)f[u]=cke(c.signal,dh(u,n.axisTop,s,i),dh(u,n.axisBottom,s,i),dh(u,n.axisLeft,s,i),dh(u,n.axisRight,s,i))}else d=c===Ga||c===wd?n.axisX:n.axisY,f=n["axis"+c[0].toUpperCase()+c.slice(1)];return d||f||o?mt({},s,d,f,o):s}function uke(t,e,n,i){const s=er(t,e),o=t.orient;let c,d;const f={enter:c={opacity:Ut},update:d={opacity:zr},exit:{opacity:Ut}};ki(f,{stroke:s("domainColor"),strokeCap:s("domainCap"),strokeDash:s("domainDash"),strokeDashOffset:s("domainDashOffset"),strokeWidth:s("domainWidth"),strokeOpacity:s("domainOpacity")});const u=aj(t,0),a=aj(t,1);return c.x=d.x=yi(o,u,Ut),c.x2=d.x2=yi(o,a),c.y=d.y=Ma(o,u,Ut),c.y2=d.y2=Ma(o,a),vr({type:EC,role:RSe,from:i,encode:f},n)}function aj(t,e){return{scale:t.scale,range:e}}function hke(t,e,n,i,s){const o=er(t,e),c=t.orient,d=t.gridScale,f=fS(c,1,-1),u=pke(t.offset,f);let a,_,w;const m={enter:a={opacity:Ut},update:w={opacity:zr},exit:_={opacity:Ut}};ki(m,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});const l={scale:t.scale,field:$r,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")},T=yi(c,{signal:"height"},{signal:"width"}),b=d?{scale:d,range:0,mult:f,offset:u}:{value:0,offset:u},S=d?{scale:d,range:1,mult:f,offset:u}:mt(T,{mult:f,offset:u});return a.x=w.x=yi(c,l,b),a.y=w.y=Ma(c,l,b),a.x2=w.x2=Ma(c,S),a.y2=w.y2=yi(c,S),_.x=yi(c,l),_.y=Ma(c,l),vr({type:EC,role:LSe,key:$r,from:i,encode:m},n)}function pke(t,e){if(e!==1)if(!Fe(t))t=si(e)?{signal:`(${e.signal}) * (${t||0})`}:e*(t||0);else{let n=t=mt({},t);for(;n.mult!=null;)if(Fe(n.mult))n=n.mult=mt({},n.mult);else return n.mult=si(e)?{signal:`(${n.mult}) * (${e.signal})`}:n.mult*e,t;n.mult=e}return t}function gke(t,e,n,i,s,o){const c=er(t,e),d=t.orient,f=fS(d,-1,1);let u,a,_;const w={enter:u={opacity:Ut},update:_={opacity:zr},exit:a={opacity:Ut}};ki(w,{stroke:c("tickColor"),strokeCap:c("tickCap"),strokeDash:c("tickDash"),strokeDashOffset:c("tickDashOffset"),strokeOpacity:c("tickOpacity"),strokeWidth:c("tickWidth")});const m=_i(s);m.mult=f;const l={scale:t.scale,field:$r,band:o.band,extra:o.extra,offset:o.offset,round:c("tickRound")};return _.y=u.y=yi(d,Ut,l),_.y2=u.y2=yi(d,m),a.x=yi(d,l),_.x=u.x=Ma(d,Ut,l),_.x2=u.x2=Ma(d,m),a.y=Ma(d,l),vr({type:EC,role:DSe,key:$r,from:i,encode:w},n)}function IB(t,e,n,i,s){return{signal:'flush(range("'+t+'"), scale("'+t+'", datum.value), '+e+","+n+","+i+","+s+")"}}function _ke(t,e,n,i,s,o){const c=er(t,e),d=t.orient,f=t.scale,u=fS(d,-1,1),a=Wf(c("labelFlush")),_=Wf(c("labelFlushOffset")),w=c("labelAlign"),m=c("labelBaseline");let l=a===0||!!a,T;const b=_i(s);b.mult=u,b.offset=_i(c("labelPadding")||0),b.offset.mult=u;const S={scale:f,field:$r,band:.5,offset:XY(o.offset,c("labelOffset"))},x=yi(d,l?IB(f,a,'"left"','"right"','"center"'):{value:"center"},ike(d,"left","right")),B=yi(d,tX(d,"bottom","top"),l?IB(f,a,'"top"','"bottom"','"middle"'):{value:"middle"}),F=IB(f,a,`-(${_})`,_,0);l=l&&_;const k={opacity:Ut,x:yi(d,S,b),y:Ma(d,S,b)},M={enter:k,update:T={opacity:zr,text:{field:bC},x:k.x,y:k.y,align:x,baseline:B},exit:{opacity:Ut,x:k.x,y:k.y}};ki(M,{dx:!w&&l?yi(d,F):null,dy:!m&&l?Ma(d,F):null}),ki(M,{angle:c("labelAngle"),fill:c("labelColor"),fillOpacity:c("labelOpacity"),font:c("labelFont"),fontSize:c("labelFontSize"),fontWeight:c("labelFontWeight"),fontStyle:c("labelFontStyle"),limit:c("labelLimit"),lineHeight:c("labelLineHeight")},{align:w,baseline:m});const A=c("labelBound");let R=c("labelOverlap");return R=R||A?{separation:c("labelSeparation"),method:R,order:"datum.index",bound:A?{scale:f,orient:d,tolerance:A}:null}:void 0,T.align!==x&&(T.align=Kh(T.align,x)),T.baseline!==B&&(T.baseline=Kh(T.baseline,B)),vr({type:Vu,role:PSe,style:qm,key:$r,from:i,encode:M,overlap:R},n)}function yke(t,e,n,i){const s=er(t,e),o=t.orient,c=fS(o,-1,1);let d,f;const u={enter:d={opacity:Ut,anchor:_i(s("titleAnchor",null)),align:{signal:SC}},update:f=mt({},d,{opacity:zr,text:_i(t.title)}),exit:{opacity:Ut}},a={signal:`lerp(range("${t.scale}"), ${lS(0,1,.5)})`};return f.x=yi(o,a),f.y=Ma(o,a),d.angle=yi(o,Ut,dke(c,90)),d.baseline=yi(o,tX(o,wd,Ga),{value:wd}),f.angle=d.angle,f.baseline=d.baseline,ki(u,{fill:s("titleColor"),fillOpacity:s("titleOpacity"),font:s("titleFont"),fontSize:s("titleFontSize"),fontStyle:s("titleFontStyle"),fontWeight:s("titleFontWeight"),limit:s("titleLimit"),lineHeight:s("titleLineHeight")},{align:s("titleAlign"),angle:s("titleAngle"),baseline:s("titleBaseline")}),mke(s,o,u,n),u.update.align=Kh(u.update.align,d.align),u.update.angle=Kh(u.update.angle,d.angle),u.update.baseline=Kh(u.update.baseline,d.baseline),vr({type:Vu,role:jSe,style:TC,from:i,encode:u},n)}function mke(t,e,n,i){const s=(d,f)=>d!=null?(n.update[f]=Kh(_i(d),n.update[f]),!1):!vh(f,i),o=s(t("titleX"),"x"),c=s(t("titleY"),"y");n.enter.auto=c===o?_i(c):yi(e,_i(c),_i(o))}function wke(t,e){const n=fke(t,e),i=t.encode||{},s=i.axis||{},o=s.name||void 0,c=s.interactive,d=s.style,f=er(t,n),u=gBe(f),a={scale:t.scale,ticks:!!f("ticks"),labels:!!f("labels"),grid:!!f("grid"),domain:!!f("domain"),title:t.title!=null},_=Pe(e.add(qa({},[a]))),w=Pe(e.add(bxe({scale:e.scaleRef(t.scale),extra:e.property(u.extra),count:e.objectProperty(t.tickCount),values:e.objectProperty(t.values),minstep:e.property(t.tickMinStep),formatType:e.property(t.formatType),formatSpecifier:e.property(t.format)}))),m=[];let l;return a.grid&&m.push(hke(t,n,i.grid,w,u)),a.ticks&&(l=f("tickSize"),m.push(gke(t,n,i.ticks,w,l,u))),a.labels&&(l=a.ticks?l:0,m.push(_ke(t,n,i.labels,w,l,u))),a.domain&&m.push(uke(t,n,i.domain,_)),a.title&&m.push(yke(t,n,i.title,_)),dS(Dy({role:CSe,from:_,encode:bg(bke(f,t),s,Gm),marks:m,aria:f("aria"),description:f("description"),zindex:f("zindex"),name:o,interactive:c,style:d}),e)}function bke(t,e){const n={enter:{},update:{}};return ki(n,{orient:t("orient"),offset:t("offset")||0,position:pa(e.position,0),titlePadding:t("titlePadding"),minExtent:t("minExtent"),maxExtent:t("maxExtent"),range:{signal:`abs(span(range("${e.scale}")))`},translate:t("translate"),format:e.format,formatType:e.formatType}),n}function iX(t,e,n){const i=Ie(t.signals),s=Ie(t.scales);return n||i.forEach(o=>RY(o,e)),Ie(t.projections).forEach(o=>Qxe(o,e)),s.forEach(o=>Uxe(o,e)),Ie(t.data).forEach(o=>tke(o,e)),s.forEach(o=>$xe(o,e)),(n||i).forEach(o=>wxe(o,e)),Ie(t.axes).forEach(o=>wke(o,e)),Ie(t.marks).forEach(o=>dS(o,e)),Ie(t.legends).forEach(o=>qBe(o,e)),t.title&&KBe(t.title,e),e.parseLambdas(),e}const Tke=t=>bg({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},t);function vke(t,e){const n=e.config,i=Pe(e.root=e.add(c1())),s=Eke(t,n);s.forEach(u=>RY(u,e)),e.description=t.description||n.description,e.eventConfig=n.events,e.legends=e.objectProperty(n.legend&&n.legend.layout),e.locale=n.locale;const o=e.add(qa()),c=e.add(DY(CY(Tke(t.encode),oS,_C,t.style,e,{pulse:Pe(o)}))),d=e.add($Y({layout:e.objectProperty(t.layout),legends:e.legends,autosize:e.signalRef("autosize"),mark:i,pulse:Pe(c)}));e.operators.pop(),e.pushState(Pe(c),Pe(d),null),iX(t,e,s),e.operators.push(d);let f=e.add(PY({mark:i,pulse:Pe(d)}));return f=e.add(UY({pulse:Pe(f)})),f=e.add(Gu({pulse:Pe(f)})),e.addData("root",new hu(e,o,o,f)),e}function Zg(t,e){return e&&e.signal?{name:t,update:e.signal}:{name:t,value:e}}function Eke(t,e){const n=c=>pa(t[c],e[c]),i=[Zg("background",n("background")),Zg("autosize",MSe(n("autosize"))),Zg("padding",NSe(n("padding"))),Zg("width",n("width")||0),Zg("height",n("height")||0)],s=i.reduce((c,d)=>(c[d.name]=d,c),{}),o={};return Ie(t.signals).forEach(c=>{Le(s,c.name)?c=mt(s[c.name],c):i.push(c),o[c.name]=c}),Ie(e.signals).forEach(c=>{!Le(o,c.name)&&!Le(s,c.name)&&i.push(c)}),i}function sX(t,e){this.config=t||{},this.options=e||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function oj(t){this.config=t.config,this.options=t.options,this.legends=t.legends,this.field=Object.create(t.field),this.signals=Object.create(t.signals),this.lambdas=Object.create(t.lambdas),this.scales=Object.create(t.scales),this.events=Object.create(t.events),this.data=Object.create(t.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++t._nextsub[0],this._nextsub=t._nextsub,this._parent=t._parent.slice(),this._encode=t._encode.slice(),this._lookup=t._lookup.slice(),this._markpath=t._markpath}sX.prototype=oj.prototype={parse(t){return iX(t,this)},fork(){return new oj(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(t){return this.operators.push(t),t.id=this.id(),t.refs&&(t.refs.forEach(e=>{e.$ref=t.id}),t.refs=null),t},proxy(t){const e=t instanceof eF?Pe(t):t;return this.add(Cxe({value:e}))},addStream(t){return this.streams.push(t),t.id=this.id(),t},addUpdate(t){return this.updates.push(t),t},finish(){let t,e;this.root&&(this.root.root=!0);for(t in this.signals)this.signals[t].signal=t;for(t in this.scales)this.scales[t].scale=t;function n(i,s,o){let c,d;i&&(c=i.data||(i.data={}),d=c[s]||(c[s]=[]),d.push(o))}for(t in this.data){e=this.data[t],n(e.input,t,"input"),n(e.output,t,"output"),n(e.values,t,"values");for(const i in e.index)n(e.index[i],t,"index:"+i)}return this},pushState(t,e,n){this._encode.push(Pe(this.add(Gu({pulse:t})))),this._parent.push(e),this._lookup.push(n?Pe(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Lt(this._parent)},encode(){return Lt(this._encode)},lookup(){return Lt(this._lookup)},markpath(){const t=this._markpath;return++t[t.length-1]},fieldRef(t,e){if(ke(t))return Ly(t,e);t.signal||de("Unsupported field reference: "+Se(t));const n=t.signal;let i=this.field[n];if(!i){const s={name:this.signalRef(n)};e&&(s.as=e),this.field[n]=i=Pe(this.add(Sxe(s)))}return i},compareRef(t){let e=!1;const n=o=>si(o)?(e=!0,this.signalRef(o.signal)):cxe(o)?(e=!0,this.exprRef(o.expr)):o,i=Ie(t.field).map(n),s=Ie(t.order).map(n);return e?Pe(this.add(H6({fields:i,orders:s}))):V6(i,s)},keyRef(t,e){let n=!1;const i=o=>si(o)?(n=!0,Pe(s[o.signal])):o,s=this.signals;return t=Ie(t).map(i),n?Pe(this.add(xxe({fields:t,flat:e}))):rxe(t,e)},sortRef(t){if(!t)return t;const e=rS(t.op,t.field),n=t.order||axe;return n.signal?Pe(this.add(H6({fields:e,orders:this.signalRef(n.signal)}))):V6(e,n)},event(t,e){const n=t+":"+e;if(!this.events[n]){const i=this.id();this.streams.push({id:i,source:t,type:e}),this.events[n]=i}return this.events[n]},hasOwnSignal(t){return Le(this.signals,t)},addSignal(t,e){this.hasOwnSignal(t)&&de("Duplicate signal name: "+Se(t));const n=e instanceof eF?e:this.add(c1(e));return this.signals[t]=n},getSignal(t){return this.signals[t]||de("Unrecognized signal name: "+Se(t)),this.signals[t]},signalRef(t){return this.signals[t]?Pe(this.signals[t]):(Le(this.lambdas,t)||(this.lambdas[t]=this.add(c1(null))),Pe(this.lambdas[t]))},parseLambdas(){const t=Object.keys(this.lambdas);for(let e=0,n=t.length;e<n;++e){const i=t[e],s=Yo(i,this),o=this.lambdas[i];o.params=s.$params,o.update=s.$expr}},property(t){return t&&t.signal?this.signalRef(t.signal):t},objectProperty(t){return!t||!Fe(t)?t:this.signalRef(t.signal||FC(t))},exprRef(t,e){const n={expr:Yo(t,this)};return e&&(n.expr.$name=e),Pe(this.add(vxe(n)))},addBinding(t,e){this.bindings||de("Nested signals do not support binding: "+Se(t)),this.bindings.push(mt({signal:t},e))},addScaleProj(t,e){Le(this.scales,t)&&de("Duplicate scale or projection name: "+Se(t)),this.scales[t]=this.add(e)},addScale(t,e){this.addScaleProj(t,Lxe(e))},addProjection(t,e){this.addScaleProj(t,Nxe(e))},getScale(t){return this.scales[t]||de("Unrecognized scale name: "+Se(t)),this.scales[t]},scaleRef(t){return Pe(this.getScale(t))},scaleType(t){return this.getScale(t).params.type},projectionRef(t){return this.scaleRef(t)},projectionType(t){return this.scaleType(t)},addData(t,e){return Le(this.data,t)&&de("Duplicate data set name: "+Se(t)),this.data[t]=e},getData(t){return this.data[t]||de("Undefined data set name: "+Se(t)),this.data[t]},addDataPipeline(t,e){return Le(this.data,t)&&de("Duplicate data set name: "+Se(t)),this.addData(t,hu.fromEntries(this,e))}};function FC(t){return(he(t)?Ske:xke)(t)}function Ske(t){const e=t.length;let n="[";for(let i=0;i<e;++i){const s=t[i];n+=(i>0?",":"")+(Fe(s)?s.signal||FC(s):Se(s))}return n+"]"}function xke(t){let e="{",n=0,i,s;for(i in t)s=t[i],e+=(++n>1?",":"")+Se(i)+":"+(Fe(s)?s.signal||FC(s):Se(s));return e+"}"}function Bke(){const t="sans-serif",i="#4c78a8",s="#000",o="#888",c="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:i},area:{fill:i},image:null,line:{stroke:i,strokeWidth:2},path:{stroke:i},rect:{fill:i},rule:{stroke:s},shape:{stroke:i},symbol:{fill:i,size:64},text:{fill:s,font:t,fontSize:11},trail:{fill:i,size:2},style:{"guide-label":{fill:s,font:t,fontSize:10},"guide-title":{fill:s,font:t,fontSize:11,fontWeight:"bold"},"group-title":{fill:s,font:t,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:s,font:t,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:c}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:o,grid:!1,gridWidth:1,gridColor:c,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:o,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:c,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:o,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function kke(t,e,n){return Fe(t)||de("Input Vega specification must be an object."),e=hg(Bke(),e,t.config),vke(t,new sX(e,n)).toRuntime()}var Ike="5.22.1";mt(Mp,B_e,pbe,Wbe,E0e,O0e,iTe,L0e,rTe,lTe,mTe,xTe);const Fke=Object.freeze(Object.defineProperty({__proto__:null,version:Ike,Dataflow:Xh,EventStream:AE,MultiPulse:iA,Operator:pn,Parameters:ME,Pulse:Yc,Transform:oe,changeset:$u,definition:aV,ingest:Kt,isTuple:FE,transform:oV,transforms:Mp,tupleid:De,interpolate:LA,interpolateColors:PE,interpolateRange:zV,quantizeInterpolator:qV,scale:Wt,scheme:PA,projection:kN,View:vY,defaultLocale:QM,formatLocale:Uv,locale:HG,resetDefaultLocale:Upe,timeFormatLocale:Sy,expressionFunction:qn,parse:kke,runtimeContext:cY,codegenExpression:KH,parseExpression:nC,parseSelector:Ud,Debug:eG,Error:PM,Info:Z9,None:Q9,Warn:DM,accessor:Zs,accessorFields:qi,accessorName:Rn,array:Ie,ascending:xE,clampRange:fG,compare:qM,constant:Ki,debounce:GM,error:de,extend:mt,extent:Wo,extentIndex:uG,falsy:wc,fastmap:gg,field:Vs,flush:hG,hasOwnProperty:Le,id:Sm,identity:Xi,inherits:ve,inrange:Oh,isArray:he,isBoolean:Dd,isDate:Hc,isFunction:wt,isIterable:pG,isNumber:cn,isObject:Fe,isRegExp:gG,isString:ke,key:VM,lerp:_G,logger:jM,lruCache:yG,merge:mG,mergeConfig:hg,one:ug,pad:wG,panLinear:rG,panLog:aG,panPow:oG,panSymlog:lG,peek:Lt,quarter:cG,repeat:m_,span:xm,splitAccessPath:il,stringValue:Se,toBoolean:WM,toDate:HM,toNumber:Ui,toSet:Ra,toString:YM,truncate:bG,truthy:Xr,utcquarter:dG,visitArray:Ic,writeConfig:pg,zero:Cc,zoomLinear:UM,zoomLog:$M,zoomPow:jv,zoomSymlog:zM,bandwidthNRD:sO,bin:rO,bootstrapCI:Bz,cumulativeLogNormal:fO,cumulativeNormal:Y1,cumulativeUniform:gO,densityLogNormal:dO,densityNormal:aO,densityUniform:pO,dotbin:kz,quantileLogNormal:uO,quantileNormal:X1,quantileUniform:_O,quantiles:nO,quartiles:iO,get random(){return Wr},randomInteger:Cie,randomKDE:lO,randomLCG:Nie,randomLogNormal:Fz,randomMixture:Oz,randomNormal:oO,randomUniform:Mz,regressionExp:Nz,regressionLinear:yO,regressionLoess:Lz,regressionLog:Az,regressionPoly:Rz,regressionPow:Cz,regressionQuad:mO,sampleCurve:J1,sampleLogNormal:cO,sampleNormal:H1,sampleUniform:hO,setRandom:Mie,DATE:Hs,DAY:ji,DAYOFYEAR:Ho,HOURS:wr,MILLISECONDS:La,MINUTES:br,MONTH:Gi,QUARTER:Ws,SECONDS:Kr,TIME_UNITS:XM,WEEK:ti,YEAR:Bi,dayofyear:EG,timeBin:UG,timeFloor:OG,timeInterval:_g,timeOffset:NG,timeSequence:LG,timeUnitSpecifier:vG,timeUnits:KM,utcFloor:MG,utcInterval:yg,utcOffset:CG,utcSequence:PG,utcdayofyear:BG,utcweek:kG,week:SG,format:A0,formats:tA,inferType:XG,inferTypes:KG,loader:kE,read:ZG,responseType:QG,typeParsers:yI,path:nE,Bounds:$n,CanvasHandler:Dm,CanvasRenderer:Jv,Gradient:nW,GroupItem:UE,Handler:yd,Item:jE,Marks:Tr,RenderType:jc,Renderer:rl,ResourceLoader:GA,SVGHandler:lN,SVGRenderer:pN,SVGStringRenderer:gN,Scenegraph:aN,boundClip:KW,boundContext:Cm,boundItem:kI,boundMark:TW,boundStroke:sc,domChild:Ms,domClear:ba,domCreate:Pc,domFind:oN,font:VE,fontFamily:Pm,fontSize:sl,intersect:WW,intersectBoxLine:Mh,intersectPath:VA,intersectPoint:WA,intersectRule:dW,lineHeight:gd,markup:hN,multiLineOffset:iN,pathCurves:$A,pathEqual:JW,pathParse:Rp,pathRectangle:rW,pathRender:ky,pathSymbols:sW,pathTrail:aW,point:HE,renderModule:YE,resetSVGClipId:lW,resetSVGDefIds:Owe,sceneEqual:_N,sceneFromJSON:EW,scenePickVisit:Vv,sceneToJSON:vW,sceneVisit:Pa,sceneZOrder:HA,serializeXML:DW,textMetrics:Oa},Symbol.toStringTag,{value:"Module"}));function Oke(t,e,n){let i;e.x2&&(e.x?(n&&t.x>t.x2&&(i=t.x,t.x=t.x2,t.x2=i),t.width=t.x2-t.x):t.x=t.x2-(t.width||0)),e.xc&&(t.x=t.xc-(t.width||0)/2),e.y2&&(e.y?(n&&t.y>t.y2&&(i=t.y,t.y=t.y2,t.y2=i),t.height=t.y2-t.y):t.y=t.y2-(t.height||0)),e.yc&&(t.y=t.yc-(t.height||0)/2)}var Mke={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},Ake={"*":(t,e)=>t*e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,">":(t,e)=>t>e,"<":(t,e)=>t<e,"<=":(t,e)=>t<=e,">=":(t,e)=>t>=e,"==":(t,e)=>t==e,"!=":(t,e)=>t!=e,"===":(t,e)=>t===e,"!==":(t,e)=>t!==e,"&":(t,e)=>t&e,"|":(t,e)=>t|e,"^":(t,e)=>t^e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e},Nke={"+":t=>+t,"-":t=>-t,"~":t=>~t,"!":t=>!t};const Cke=Array.prototype.slice,tf=(t,e,n)=>{const i=n?n(e[0]):e[0];return i[t].apply(i,Cke.call(e,1))},Rke=(t,e,n,i,s,o,c)=>new Date(t,e||0,n!=null?n:1,i||0,s||0,o||0,c||0);var Lke={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(t,e,n)=>Math.max(e,Math.min(n,t)),now:Date.now,utc:Date.UTC,datetime:Rke,date:t=>new Date(t).getDate(),day:t=>new Date(t).getDay(),year:t=>new Date(t).getFullYear(),month:t=>new Date(t).getMonth(),hours:t=>new Date(t).getHours(),minutes:t=>new Date(t).getMinutes(),seconds:t=>new Date(t).getSeconds(),milliseconds:t=>new Date(t).getMilliseconds(),time:t=>new Date(t).getTime(),timezoneoffset:t=>new Date(t).getTimezoneOffset(),utcdate:t=>new Date(t).getUTCDate(),utcday:t=>new Date(t).getUTCDay(),utcyear:t=>new Date(t).getUTCFullYear(),utcmonth:t=>new Date(t).getUTCMonth(),utchours:t=>new Date(t).getUTCHours(),utcminutes:t=>new Date(t).getUTCMinutes(),utcseconds:t=>new Date(t).getUTCSeconds(),utcmilliseconds:t=>new Date(t).getUTCMilliseconds(),length:t=>t.length,join:function(){return tf("join",arguments)},indexof:function(){return tf("indexOf",arguments)},lastindexof:function(){return tf("lastIndexOf",arguments)},slice:function(){return tf("slice",arguments)},reverse:t=>t.slice().reverse(),parseFloat,parseInt,upper:t=>String(t).toUpperCase(),lower:t=>String(t).toLowerCase(),substring:function(){return tf("substring",arguments,String)},split:function(){return tf("split",arguments,String)},replace:function(){return tf("replace",arguments,String)},trim:t=>String(t).trim(),regexp:RegExp,test:(t,e)=>RegExp(t).test(e)};const Pke=["view","item","group","xy","x","y"],Dke={Literal:(t,e)=>e.value,Identifier:(t,e)=>{const n=e.name;return t.memberDepth>0?n:n==="datum"?t.datum:n==="event"?t.event:n==="item"?t.item:Mke[n]||t.params["$"+n]},MemberExpression:(t,e)=>{const n=!e.computed,i=t(e.object);n&&(t.memberDepth+=1);const s=t(e.property);return n&&(t.memberDepth-=1),i[s]},CallExpression:(t,e)=>{const n=e.arguments;let i=e.callee.name;return i.startsWith("_")&&(i=i.slice(1)),i==="if"?t(n[0])?t(n[1]):t(n[2]):(t.fn[i]||Lke[i]).apply(t.fn,n.map(t))},ArrayExpression:(t,e)=>e.elements.map(t),BinaryExpression:(t,e)=>Ake[e.operator](t(e.left),t(e.right)),UnaryExpression:(t,e)=>Nke[e.operator](t(e.argument)),ConditionalExpression:(t,e)=>t(e.test)?t(e.consequent):t(e.alternate),LogicalExpression:(t,e)=>e.operator==="&&"?t(e.left)&&t(e.right):t(e.left)||t(e.right),ObjectExpression:(t,e)=>e.properties.reduce((n,i)=>{t.memberDepth+=1;const s=t(i.key);return t.memberDepth-=1,n[s]=t(i.value),n},{})};function e_(t,e,n,i,s,o){const c=d=>Dke[d.type](c,d);return c.memberDepth=0,c.fn=Object.create(e),c.params=n,c.datum=i,c.event=s,c.item=o,Pke.forEach(d=>c.fn[d]=(...f)=>s.vega[d](...f)),c(t)}var jke={operator(t,e){const n=e.ast,i=t.functions;return s=>e_(n,i,s)},parameter(t,e){const n=e.ast,i=t.functions;return(s,o)=>e_(n,i,o,s)},event(t,e){const n=e.ast,i=t.functions;return s=>e_(n,i,void 0,void 0,s)},handler(t,e){const n=e.ast,i=t.functions;return(s,o)=>{const c=o.item&&o.item.datum;return e_(n,i,s,c,o)}},encode(t,e){const{marktype:n,channels:i}=e,s=t.functions,o=n==="group"||n==="image"||n==="rect";return(c,d)=>{const f=c.datum;let u=0,a;for(const _ in i)a=e_(i[_].ast,s,d,f,void 0,c),c[_]!==a&&(c[_]=a,u=1);return n!=="rule"&&Oke(c,i,o),u}}};const Uke="vega-lite",$ke='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',zke="5.5.0",qke=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],Gke="https://vega.github.io/vega-lite/",Vke="Vega-Lite is a concise high-level language for interactive visualization.",Wke=["vega","chart","visualization"],Hke="build/vega-lite.js",Yke="build/vega-lite.min.js",Xke="build/vega-lite.min.js",Kke="build/src/index",Jke="build/src/index.d.ts",Qke={vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2pdf:"./bin/vl2pdf",vl2vg:"./bin/vl2vg"},Zke=["bin","build","src","vega-lite*","tsconfig.json"],eIe={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.js","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json","predeploy:site":"yarn presite","deploy:site":"gh-pages -d site",data:"rsync -r node_modules/vega-datasets/data/* site/data",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",eslintbase:"eslint .",format:"yarn eslintbase --fix && yarn prettierbase --write",lint:"yarn eslintbase && yarn prettierbase --check",jest:"NODE_OPTIONS=--experimental-vm-modules npx jest",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk --experimental-vm-modules ./node_modules/.bin/jest --runInBand test","test:runtime":"NODE_OPTIONS=--experimental-vm-modules TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"NODE_OPTIONS=--experimental-vm-modules TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"yarn run prebuild && yarn build && yarn shipit",shipit:"auto shipit"},tIe={type:"git",url:"https://github.com/vega/vega-lite.git"},nIe="BSD-3-Clause",iIe={url:"https://github.com/vega/vega-lite/issues"},sIe={"@auto-it/conventional-commits":"^10.37.6","@auto-it/first-time-contributor":"^10.37.6","@babel/core":"^7.19.1","@babel/preset-env":"^7.19.1","@babel/preset-typescript":"^7.18.6","@rollup/plugin-alias":"^4.0.0","@rollup/plugin-babel":"^6.0.0","@rollup/plugin-commonjs":"^23.0.0","@rollup/plugin-json":"^4.1.0","@types/jest":"^27.4.1","@rollup/plugin-node-resolve":"^14.1.0","@types/chai":"^4.3.3","@types/d3":"^7.4.0","@types/mkdirp":"^1.0.2","@types/pako":"^2.0.0","@typescript-eslint/eslint-plugin":"^5.38.0","@typescript-eslint/parser":"^5.38.0",ajv:"^8.11.0","ajv-formats":"^2.1.1",auto:"^10.37.6",chai:"^4.3.6",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^2.2.2",d3:"^7.6.1","del-cli":"^5.0.0",eslint:"^8.23.1","eslint-config-prettier":"^8.5.0","eslint-plugin-jest":"^27.0.4","eslint-plugin-prettier":"^4.2.1","gh-pages":"^4.0.0",jest:"^27.5.1","highlight.js":"^11.6.0","jest-dev-server":"^6.1.1",mkdirp:"^1.0.4",pako:"^2.0.4",prettier:"^2.7.1",puppeteer:"^15.0.0",rollup:"^2.79.1","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-sourcemaps":"^0.6.3","rollup-plugin-terser":"^7.0.2",serve:"^14.0.1",terser:"^5.15.0","ts-jest":"^29.0.1","ts-json-schema-generator":"^1.1.1","vega-cli":"^5.22.1",typescript:"~4.8.3","vega-datasets":"~2.5.1","vega-embed":"^6.21.0","vega-tooltip":"^0.28.0","yaml-front-matter":"^4.1.1"},rIe={"@types/clone":"~2.1.1",clone:"~2.1.2","fast-deep-equal":"~3.1.3","fast-json-stable-stringify":"~2.1.0","json-stringify-pretty-compact":"~3.0.0",tslib:"~2.4.0","vega-event-selector":"~3.0.0","vega-expression":"~5.0.0","vega-util":"~1.17.0",yargs:"~17.6.0"},aIe={vega:"^5.22.0"},oIe={node:">=12"},lIe={name:Uke,author:$ke,version:zke,collaborators:qke,homepage:Gke,description:Vke,keywords:Wke,main:Hke,unpkg:Yke,jsdelivr:Xke,module:Kke,types:Jke,bin:Qke,files:Zke,scripts:eIe,repository:tIe,license:nIe,bugs:iIe,devDependencies:sIe,dependencies:rIe,peerDependencies:aIe,engines:oIe};var rX={exports:{}};(function(t){var e=function(){function n(w,m){return m!=null&&w instanceof m}var i;try{i=Map}catch{i=function(){}}var s;try{s=Set}catch{s=function(){}}var o;try{o=Promise}catch{o=function(){}}function c(w,m,l,T,b){typeof m=="object"&&(l=m.depth,T=m.prototype,b=m.includeNonEnumerable,m=m.circular);var S=[],x=[],B=typeof Buffer<"u";typeof m>"u"&&(m=!0),typeof l>"u"&&(l=1/0);function F(k,M){if(k===null)return null;if(M===0)return k;var A,R;if(typeof k!="object")return k;if(n(k,i))A=new i;else if(n(k,s))A=new s;else if(n(k,o))A=new o(function(J,V){k.then(function(le){J(F(le,M-1))},function(le){V(F(le,M-1))})});else if(c.__isArray(k))A=[];else if(c.__isRegExp(k))A=new RegExp(k.source,_(k)),k.lastIndex&&(A.lastIndex=k.lastIndex);else if(c.__isDate(k))A=new Date(k.getTime());else{if(B&&Buffer.isBuffer(k))return Buffer.allocUnsafe?A=Buffer.allocUnsafe(k.length):A=new Buffer(k.length),k.copy(A),A;n(k,Error)?A=Object.create(k):typeof T>"u"?(R=Object.getPrototypeOf(k),A=Object.create(R)):(A=Object.create(T),R=T)}if(m){var P=S.indexOf(k);if(P!=-1)return x[P];S.push(k),x.push(A)}n(k,i)&&k.forEach(function(J,V){var le=F(V,M-1),pe=F(J,M-1);A.set(le,pe)}),n(k,s)&&k.forEach(function(J){var V=F(J,M-1);A.add(V)});for(var j in k){var D;R&&(D=Object.getOwnPropertyDescriptor(R,j)),!(D&&D.set==null)&&(A[j]=F(k[j],M-1))}if(Object.getOwnPropertySymbols)for(var z=Object.getOwnPropertySymbols(k),j=0;j<z.length;j++){var $=z[j],Y=Object.getOwnPropertyDescriptor(k,$);Y&&!Y.enumerable&&!b||(A[$]=F(k[$],M-1),Y.enumerable||Object.defineProperty(A,$,{enumerable:!1}))}if(b)for(var W=Object.getOwnPropertyNames(k),j=0;j<W.length;j++){var H=W[j],Y=Object.getOwnPropertyDescriptor(k,H);Y&&Y.enumerable||(A[H]=F(k[H],M-1),Object.defineProperty(A,H,{enumerable:!1}))}return A}return F(w,l)}c.clonePrototype=function(m){if(m===null)return null;var l=function(){};return l.prototype=m,new l};function d(w){return Object.prototype.toString.call(w)}c.__objToStr=d;function f(w){return typeof w=="object"&&d(w)==="[object Date]"}c.__isDate=f;function u(w){return typeof w=="object"&&d(w)==="[object Array]"}c.__isArray=u;function a(w){return typeof w=="object"&&d(w)==="[object RegExp]"}c.__isRegExp=a;function _(w){var m="";return w.global&&(m+="g"),w.ignoreCase&&(m+="i"),w.multiline&&(m+="m"),m}return c.__getRegExpFlags=_,c}();t.exports&&(t.exports=e)})(rX);const cIe=rX.exports;var aX=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var i,s,o;if(Array.isArray(e)){if(i=e.length,i!=n.length)return!1;for(s=i;s--!==0;)if(!t(e[s],n[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(o=Object.keys(e),i=o.length,i!==Object.keys(n).length)return!1;for(s=i;s--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[s]))return!1;for(s=i;s--!==0;){var c=o[s];if(!t(e[c],n[c]))return!1}return!0}return e!==e&&n!==n},OC=function(t,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var n=typeof e.cycles=="boolean"?e.cycles:!1,i=e.cmp&&function(o){return function(c){return function(d,f){var u={key:d,value:c[d]},a={key:f,value:c[f]};return o(u,a)}}}(e.cmp),s=[];return function o(c){if(c&&c.toJSON&&typeof c.toJSON=="function"&&(c=c.toJSON()),c!==void 0){if(typeof c=="number")return isFinite(c)?""+c:"null";if(typeof c!="object")return JSON.stringify(c);var d,f;if(Array.isArray(c)){for(f="[",d=0;d<c.length;d++)d&&(f+=","),f+=o(c[d])||"null";return f+"]"}if(c===null)return"null";if(s.indexOf(c)!==-1){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var u=s.push(c)-1,a=Object.keys(c).sort(i&&i(c));for(f="",d=0;d<a.length;d++){var _=a[d],w=o(c[_]);!w||(f&&(f+=","),f+=JSON.stringify(_)+":"+w)}return s.splice(u,1),"{"+f+"}"}}(t)};function MC(t){return!!t.or}function AC(t){return!!t.and}function NC(t){return!!t.not}function J0(t,e){if(NC(t))J0(t.not,e);else if(AC(t))for(const n of t.and)J0(n,e);else if(MC(t))for(const n of t.or)J0(n,e);else e(t)}function Jh(t,e){return NC(t)?{not:Jh(t.not,e)}:AC(t)?{and:t.and.map(n=>Jh(n,e))}:MC(t)?{or:t.or.map(n=>Jh(n,e))}:e(t)}const Eo=aX,ft=cIe;function oX(t){throw new Error(t)}function $p(t,e){const n={};for(const i of e)Le(t,i)&&(n[i]=t[i]);return n}function Ls(t,e){const n=Object.assign({},t);for(const i of e)delete n[i];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(t=>OC(t)).join(",")})`};const yn=OC;function Pt(t){if(cn(t))return t;const e=ke(t)?t:OC(t);if(e.length<250)return e;let n=0;for(let i=0;i<e.length;i++){const s=e.charCodeAt(i);n=(n<<5)-n+s,n=n&n}return n}function oF(t){return t===!1||t===null}function Mt(t,e){return t.includes(e)}function pu(t,e){let n=0;for(const[i,s]of t.entries())if(e(s,i,n++))return!0;return!1}function CC(t,e){let n=0;for(const[i,s]of t.entries())if(!e(s,i,n++))return!1;return!0}function lX(t,...e){for(const n of e)dIe(t,n!=null?n:{});return t}function dIe(t,e){for(const n of we(e))pg(t,n,e[n],!0)}function So(t,e){const n=[],i={};let s;for(const o of t)s=e(o),!(s in i)&&(i[s]=1,n.push(o));return n}function fIe(t,e){const n=we(t),i=we(e);if(n.length!==i.length)return!1;for(const s of n)if(t[s]!==e[s])return!1;return!0}function cX(t,e){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function RC(t,e){for(const n of t)if(e.has(n))return!0;return!1}function lF(t){const e=new Set;for(const n of t){const s=il(n).map((c,d)=>d===0?c:`[${c}]`),o=s.map((c,d)=>s.slice(0,d+1).join(""));for(const c of o)e.add(c)}return e}function LC(t,e){return t===void 0||e===void 0?!0:RC(lF(t),lF(e))}function ln(t){return we(t).length===0}const we=Object.keys,Hi=Object.values,bd=Object.entries;function jy(t){return t===!0||t===!1}function xn(t){const e=t.replace(/\W/g,"_");return(t.match(/^\d+/)?"_":"")+e}function W_(t,e){return NC(t)?`!(${W_(t.not,e)})`:AC(t)?`(${t.and.map(n=>W_(n,e)).join(") && (")})`:MC(t)?`(${t.or.map(n=>W_(n,e)).join(") || (")})`:e(t)}function d1(t,e){if(e.length===0)return!0;const n=e.shift();return n in t&&d1(t[n],e)&&delete t[n],ln(t)}function Vm(t){return t.charAt(0).toUpperCase()+t.substr(1)}function PC(t,e="datum"){const n=il(t),i=[];for(let s=1;s<=n.length;s++){const o=`[${n.slice(0,s).map(Se).join("][")}]`;i.push(`${e}${o}`)}return i.join(" && ")}function dX(t,e="datum"){return`${e}[${Se(il(t).join("."))}]`}function uIe(t){return t.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Jr(t){return`${il(t).map(uIe).join("\\.")}`}function gu(t,e,n){return t.replace(new RegExp(e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function DC(t){return`${il(t).join(".")}`}function zp(t){return t?il(t).length:0}function zn(...t){for(const e of t)if(e!==void 0)return e}let fX=42;function uX(t){const e=++fX;return t?String(t)+e:e}function hIe(){fX=42}function hX(t){return pX(t)?t:`__${t}`}function pX(t){return t.startsWith("__")}function Uy(t){if(t!==void 0)return(t%360+360)%360}function uS(t){return cn(t)?!0:!isNaN(t)&&!isNaN(parseFloat(t))}var Wm=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};const zl="row",ql="column",hS="facet",On="x",wi="y",Va="x2",ol="y2",$d="xOffset",Eg="yOffset",Wa="radius",oc="radius2",ta="theta",lc="theta2",ll="latitude",cl="longitude",Ha="latitude2",Qr="longitude2",Ys="color",dl="fill",fl="stroke",Xs="shape",cc="size",Wu="angle",dc="opacity",zd="fillOpacity",qd="strokeOpacity",Gd="strokeWidth",Vd="strokeDash",Hm="text",Ym="order",Xm="detail",pS="key",_u="tooltip",gS="href",_S="url",yS="description",pIe={x:1,y:1,x2:1,y2:1},gX={theta:1,theta2:1,radius:1,radius2:1};function _X(t){return t in gX}const jC={longitude:1,longitude2:1,latitude:1,latitude2:1};function gIe(t){switch(t){case ll:return"y";case Ha:return"y2";case cl:return"x";case Qr:return"x2"}}function _Ie(t){return t in jC}const yIe=we(jC),UC=Object.assign(Object.assign(Object.assign(Object.assign({},pIe),gX),jC),{xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1});function Qh(t){return t===Ys||t===dl||t===fl}const yX={row:1,column:1,facet:1},Pr=we(yX),$C=Object.assign(Object.assign({},UC),yX),mIe=we($C),wIe=Wm($C,["order","detail","tooltip"]),bIe=Wm(wIe,["row","column","facet"]);function TIe(t){return!!bIe[t]}function mX(t){return!!$C[t]}const vIe=[Va,ol,Ha,Qr,lc,oc];function wX(t){return Hu(t)!==t}function Hu(t){switch(t){case Va:return On;case ol:return wi;case Ha:return ll;case Qr:return cl;case lc:return ta;case oc:return Wa}return t}function Td(t){if(_X(t))switch(t){case ta:return"startAngle";case lc:return"endAngle";case Wa:return"outerRadius";case oc:return"innerRadius"}return t}function ul(t){switch(t){case On:return Va;case wi:return ol;case ll:return Ha;case cl:return Qr;case ta:return lc;case Wa:return oc}}function Ks(t){switch(t){case On:case Va:return"width";case wi:case ol:return"height"}}function EIe(t){switch(t){case On:return"xOffset";case wi:return"yOffset";case Va:return"x2Offset";case ol:return"y2Offset";case ta:return"thetaOffset";case Wa:return"radiusOffset";case lc:return"theta2Offset";case oc:return"radius2Offset"}}function bX(t){switch(t){case On:return"xOffset";case wi:return"yOffset"}}function TX(t){switch(t){case"xOffset":return"x";case"yOffset":return"y"}}const SIe=we(UC),zC=Wm(UC,["x","y","x2","y2","xOffset","yOffset","latitude","longitude","latitude2","longitude2","theta","theta2","radius","radius2"]),xIe=we(zC),qC={x:1,y:1},hl=we(qC);function bi(t){return t in qC}const GC={theta:1,radius:1},BIe=we(GC);function mS(t){return t==="width"?On:wi}const vX={xOffset:1,yOffset:1};function Sg(t){return t in vX}const EX=Wm(zC,["text","tooltip","href","url","description","detail","key","order"]),kIe=we(EX);function IIe(t){return!!zC[t]}function FIe(t){switch(t){case Ys:case dl:case fl:case cc:case Xs:case dc:case Gd:case Vd:return!0;case zd:case qd:case Wu:return!1}}const SX=Object.assign(Object.assign(Object.assign(Object.assign({},qC),GC),vX),EX),wS=we(SX);function Wd(t){return!!SX[t]}function OIe(t,e){return AIe(t)[e]}const xX={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},MIe=Wm(xX,["geoshape"]);function AIe(t){switch(t){case Ys:case dl:case fl:case yS:case Xm:case pS:case _u:case gS:case Ym:case dc:case zd:case qd:case Gd:case hS:case zl:case ql:return xX;case On:case wi:case $d:case Eg:case ll:case cl:return MIe;case Va:case ol:case Ha:case Qr:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case cc:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Vd:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Xs:return{point:"always",geoshape:"always"};case Hm:return{text:"always"};case Wu:return{point:"always",square:"always",text:"always"};case _S:return{image:"always"};case ta:return{text:"always",arc:"always"};case Wa:return{text:"always",arc:"always"};case lc:case oc:return{arc:"always"}}}function FB(t){switch(t){case On:case wi:case ta:case Wa:case $d:case Eg:case cc:case Wu:case Gd:case dc:case zd:case qd:case Va:case ol:case lc:case oc:return;case hS:case zl:case ql:case Xs:case Vd:case Hm:case _u:case gS:case _S:case yS:return"discrete";case Ys:case dl:case fl:return"flexible";case ll:case cl:case Ha:case Qr:case Xm:case pS:case Ym:return}}const NIe={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},CIe={count:1,min:1,max:1};function Zl(t){return!!t&&!!t.argmin}function Hd(t){return!!t&&!!t.argmax}function VC(t){return ke(t)&&!!NIe[t]}const RIe=new Set(["count","valid","missing","distinct"]);function BX(t){return ke(t)&&RIe.has(t)}function LIe(t){return ke(t)&&Mt(["min","max"],t)}const PIe=new Set(["count","sum","distinct","valid","missing"]),DIe=new Set(["mean","average","median","q1","q3","min","max"]);function kX(t){return Dd(t)&&(t=OS(t,void 0)),"bin"+we(t).map(e=>bS(t[e])?xn(`_${e}_${bd(t[e])}`):xn(`_${e}_${t[e]}`)).join("")}function mn(t){return t===!0||Yu(t)&&!t.binned}function Ei(t){return t==="binned"||Yu(t)&&t.binned===!0}function Yu(t){return Fe(t)}function bS(t){return t==null?void 0:t.param}function lj(t){switch(t){case zl:case ql:case cc:case Ys:case dl:case fl:case Gd:case dc:case zd:case qd:case Xs:return 6;case Vd:return 4;default:return 10}}function Km(t){return!!(t!=null&&t.expr)}function Fs(t){const e=we(t||{}),n={};for(const i of e)n[i]=ur(t[i]);return n}var jIe=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};function IX(t){const{anchor:e,frame:n,offset:i,orient:s,angle:o,limit:c,color:d,subtitleColor:f,subtitleFont:u,subtitleFontSize:a,subtitleFontStyle:_,subtitleFontWeight:w,subtitleLineHeight:m,subtitlePadding:l}=t,T=jIe(t,["anchor","frame","offset","orient","angle","limit","color","subtitleColor","subtitleFont","subtitleFontSize","subtitleFontStyle","subtitleFontWeight","subtitleLineHeight","subtitlePadding"]),b=Object.assign(Object.assign({},T),d?{fill:d}:{}),S=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e?{anchor:e}:{}),n?{frame:n}:{}),i?{offset:i}:{}),s?{orient:s}:{}),o!==void 0?{angle:o}:{}),c!==void 0?{limit:c}:{}),x=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},f?{subtitleColor:f}:{}),u?{subtitleFont:u}:{}),a?{subtitleFontSize:a}:{}),_?{subtitleFontStyle:_}:{}),w?{subtitleFontWeight:w}:{}),m?{subtitleLineHeight:m}:{}),l?{subtitlePadding:l}:{}),B=$p(t,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:b,subtitleMarkConfig:B,nonMarkTitleProperties:S,subtitle:x}}function Mc(t){return ke(t)||he(t)&&ke(t[0])}function Re(t){return!!(t!=null&&t.signal)}function Yd(t){return!!t.step}function UIe(t){return he(t)?!1:"fields"in t&&!("data"in t)}function $Ie(t){return he(t)?!1:"fields"in t&&"data"in t}function Dl(t){return he(t)?!1:"field"in t&&"data"in t}const zIe={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},qIe=we(zIe),GIe={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},cF=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];var WC=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};function FX(t){const e=he(t.condition)?t.condition.map(cj):cj(t.condition);return Object.assign(Object.assign({},ur(t)),{condition:e})}function ur(t){if(Km(t)){const{expr:e}=t,n=WC(t,["expr"]);return Object.assign({signal:e},n)}return t}function cj(t){if(Km(t)){const{expr:e}=t,n=WC(t,["expr"]);return Object.assign({signal:e},n)}return t}function Tn(t){if(Km(t)){const{expr:e}=t,n=WC(t,["expr"]);return Object.assign({signal:e},n)}return Re(t)?t:t!==void 0?{value:t}:void 0}function VIe(t){return Re(t)?t.signal:Se(t)}function dj(t){return Re(t)?t.signal:Se(t.value)}function Gl(t){return Re(t)?t.signal:t==null?null:Se(t)}function WIe(t,e,n){for(const i of n){const s=yu(i,e.markDef,e.config);s!==void 0&&(t[i]=Tn(s))}return t}function OX(t){var e;return[].concat(t.type,(e=t.style)!==null&&e!==void 0?e:[])}function rn(t,e,n,i={}){const{vgChannel:s,ignoreVgConfig:o}=i;return s&&e[s]!==void 0?e[s]:e[t]!==void 0?e[t]:o&&(!s||s===t)?void 0:yu(t,e,n,i)}function yu(t,e,n,{vgChannel:i}={}){return zn(i?f1(t,e,n.style):void 0,f1(t,e,n.style),i?n[e.type][i]:void 0,n[e.type][t],i?n.mark[i]:n.mark[t])}function f1(t,e,n){return MX(t,OX(e),n)}function MX(t,e,n){e=Ie(e);let i;for(const s of e){const o=n[s];o&&o[t]!==void 0&&(i=o[t])}return i}function AX(t,e){return Ie(t).reduce((n,i)=>{var s;return n.field.push(xe(i,e)),n.order.push((s=i.sort)!==null&&s!==void 0?s:"ascending"),n},{field:[],order:[]})}function NX(t,e){const n=[...t];return e.forEach(i=>{for(const s of n)if(Eo(s,i))return;n.push(i)}),n}function CX(t,e){return Eo(t,e)||!e?t:t?[...Ie(t),...Ie(e)].join(", "):e}function RX(t,e){const n=t.value,i=e.value;if(n==null||i===null)return{explicit:t.explicit,value:null};if((Mc(n)||Re(n))&&(Mc(i)||Re(i)))return{explicit:t.explicit,value:CX(n,i)};if(Mc(n)||Re(n))return{explicit:t.explicit,value:n};if(Mc(i)||Re(i))return{explicit:t.explicit,value:i};if(!Mc(n)&&!Re(n)&&!Mc(i)&&!Re(i))return{explicit:t.explicit,value:NX(n,i)};throw new Error("It should never reach here")}function HC(t){return`Invalid specification ${yn(t)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const HIe='Autosize "fit" only works for single views and layered views.';function fj(t){return`${t=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function uj(t){const e=t=="width"?"Width":"Height",n=t=="width"?"x":"y";return`${e} "container" only works well with autosize "fit" or "fit-${n}".`}function hj(t){return t?`Dropping "fit-${t}" because spec has discrete ${Ks(t)}.`:'Dropping "fit" because spec has discrete size.'}function YC(t){return`Unknown field for ${t}. Cannot calculate view size.`}function pj(t){return`Cannot project a selection on encoding channel "${t}", which has no field.`}function YIe(t,e){return`Cannot project a selection on encoding channel "${t}" as it uses an aggregate function ("${e}").`}function XIe(t){return`The "nearest" transform is not supported for ${t} marks.`}function LX(t){return`Selection not supported for ${t} yet.`}function KIe(t){return`Cannot find a selection named "${t}".`}const JIe="Scale bindings are currently only supported for scales with unbinned, continuous domains.",QIe="Legend bindings are only supported for selections over an individual field or encoding channel.";function ZIe(t){return`Lookups can only be performed on selection parameters. "${t}" is a variable parameter.`}function eFe(t){return`Cannot define and lookup the "${t}" selection in the same view. Try moving the lookup into a second, layered view?`}const tFe="The same selection must be used to override scale domains in a layered view.",nFe='Interval selections should be initialized using "x" and/or "y" keys.';function iFe(t){return`Unknown repeated value "${t}".`}function gj(t){return`The "columns" property cannot be used when "${t}" has nested row/column.`}const sFe="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function rFe(t){return`Unrecognized parse "${t}".`}function _j(t,e,n){return`An ancestor parsed field "${t}" as ${n} but a child wants to parse the field as ${e}.`}const aFe="Attempt to add the same child twice.";function oFe(t){return`Ignoring an invalid transform: ${yn(t)}.`}const lFe='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function yj(t){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${t} are dropped.`}function cFe(t){const{parentProjection:e,projection:n}=t;return`Layer's shared projection ${yn(e)} is overridden by a child projection ${yn(n)}.`}const dFe="Arc marks uses theta channel rather than angle, replacing angle with theta.";function fFe(t){return`${t}Offset dropped because ${t} is continuous`}function uFe(t){return`There is no ${t} encoding. Replacing ${t}Offset encoding as ${t}.`}function hFe(t,e,n){return`Channel ${t} is a ${e}. Converted to {value: ${yn(n)}}.`}function PX(t){return`Invalid field type "${t}".`}function pFe(t,e){return`Invalid field type "${t}" for aggregate: "${e}", using "quantitative" instead.`}function gFe(t){return`Invalid aggregation operator "${t}".`}function DX(t,e){const{fill:n,stroke:i}=e;return`Dropping color ${t} as the plot also has ${n&&i?"fill and stroke":n?"fill":"stroke"}.`}function _Fe(t){return`Position range does not support relative band size for ${t}.`}function dF(t,e){return`Dropping ${yn(t)} from channel "${e}" since it does not contain any data field, datum, value, or signal.`}const yFe="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function TS(t,e,n){return`${t} dropped as it is incompatible with "${e}"${n?` when ${n}`:""}.`}function mFe(t){return`${t} encoding has no scale, so specified scale is ignored.`}function wFe(t){return`${t}-encoding is dropped as ${t} is not a valid encoding channel.`}function bFe(t){return`${t} encoding should be discrete (ordinal / nominal / binned).`}function TFe(t){return`${t} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function vFe(t){return`Facet encoding dropped as ${t.join(" and ")} ${t.length>1?"are":"is"} also specified.`}function OB(t,e){return`Using discrete channel "${t}" to encode "${e}" field can be misleading as it does not encode ${e==="ordinal"?"order":"magnitude"}.`}function EFe(t){return`The ${t} for range marks cannot be an expression`}function SFe(t,e){return`Line mark is for continuous lines and thus cannot be used with ${t&&e?"x2 and y2":t?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function xFe(t,e){return`Specified orient "${t}" overridden with "${e}".`}function BFe(t){return`Cannot use the scale property "${t}" with non-color channel.`}function kFe(t){return`Cannot use the relative band size with ${t} scale.`}function IFe(t){return`Using unaggregated domain with raw field has no effect (${yn(t)}).`}function FFe(t){return`Unaggregated domain not applicable for "${t}" since it produces values outside the origin domain of the source data.`}function OFe(t){return`Unaggregated domain is currently unsupported for log scale (${yn(t)}).`}function MFe(t){return`Cannot apply size to non-oriented mark "${t}".`}function AFe(t,e,n){return`Channel "${t}" does not work with "${e}" scale. We are using "${n}" scale instead.`}function NFe(t,e){return`FieldDef does not work with "${t}" scale. We are using "${e}" scale instead.`}function jX(t,e,n){return`${n}-scale's "${e}" is dropped as it does not work with ${t} scale.`}function UX(t){return`The step for "${t}" is dropped because the ${t==="width"?"x":"y"} is continuous.`}function CFe(t,e,n,i){return`Conflicting ${e.toString()} property "${t.toString()}" (${yn(n)} and ${yn(i)}). Using ${yn(n)}.`}function RFe(t,e,n,i){return`Conflicting ${e.toString()} property "${t.toString()}" (${yn(n)} and ${yn(i)}). Using the union of the two domains.`}function LFe(t){return`Setting the scale to be independent for "${t}" means we also have to set the guide (axis or legend) to be independent.`}function PFe(t){return`Dropping sort property ${yn(t)} as unioned domains only support boolean or op "count", "min", and "max".`}const mj="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",DFe="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",jFe="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",UFe="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function $Fe(t){return`Cannot stack "${t}" if there is already "${t}2".`}function zFe(t){return`Cannot stack non-linear scale (${t}).`}function qFe(t){return`Stacking is applied even though the aggregate function is non-summative ("${t}").`}function u1(t,e){return`Invalid ${t}: ${yn(e)}.`}function GFe(t){return`Dropping day from datetime ${yn(t)} as day cannot be combined with other units.`}function VFe(t,e){return`${e?"extent ":""}${e&&t?"and ":""}${t?"center ":""}${e&&t?"are ":"is "}not needed when data are aggregated.`}function WFe(t,e,n){return`${t} is not usually used with ${e} for ${n}.`}function HFe(t,e){return`Continuous axis should not have customized aggregation function ${t}; ${e} already agregates the axis.`}function wj(t){return`1D error band does not support ${t}.`}function $X(t){return`Channel ${t} is required for "binned" bin.`}function YFe(t){return`Channel ${t} should not be used with "binned" bin.`}function XFe(t){return`Domain for ${t} is required for threshold scale.`}globalThis&&globalThis.__classPrivateFieldSet;globalThis&&globalThis.__classPrivateFieldGet;const zX=jM(DM);let qp=zX;function KFe(t){return qp=t,qp}function JFe(){return qp=zX,qp}function be(...t){qp.warn(...t)}function QFe(...t){qp.debug(...t)}function Xu(t){if(t&&Fe(t)){for(const e of KC)if(e in t)return!0}return!1}const qX=["january","february","march","april","may","june","july","august","september","october","november","december"],ZFe=qX.map(t=>t.substr(0,3)),GX=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],e2e=GX.map(t=>t.substr(0,3));function t2e(t){if(uS(t)&&(t=+t),cn(t))return t>4&&be(u1("quarter",t)),t-1;throw new Error(u1("quarter",t))}function n2e(t){if(uS(t)&&(t=+t),cn(t))return t-1;{const e=t.toLowerCase(),n=qX.indexOf(e);if(n!==-1)return n;const i=e.substr(0,3),s=ZFe.indexOf(i);if(s!==-1)return s;throw new Error(u1("month",t))}}function i2e(t){if(uS(t)&&(t=+t),cn(t))return t%7;{const e=t.toLowerCase(),n=GX.indexOf(e);if(n!==-1)return n;const i=e.substr(0,3),s=e2e.indexOf(i);if(s!==-1)return s;throw new Error(u1("day",t))}}function XC(t,e){const n=[];if(e&&t.day!==void 0&&we(t).length>1&&(be(GFe(t)),t=ft(t),delete t.day),t.year!==void 0?n.push(t.year):n.push(2012),t.month!==void 0){const i=e?n2e(t.month):t.month;n.push(i)}else if(t.quarter!==void 0){const i=e?t2e(t.quarter):t.quarter;n.push(cn(i)?i*3:`${i}*3`)}else n.push(0);if(t.date!==void 0)n.push(t.date);else if(t.day!==void 0){const i=e?i2e(t.day):t.day;n.push(cn(i)?i+1:`${i}+1`)}else n.push(1);for(const i of["hours","minutes","seconds","milliseconds"]){const s=t[i];n.push(typeof s>"u"?0:s)}return n}function $y(t){const n=XC(t,!0).join(", ");return t.utc?`utc(${n})`:`datetime(${n})`}function s2e(t){const n=XC(t,!1).join(", ");return t.utc?`utc(${n})`:`datetime(${n})`}function r2e(t){const e=XC(t,!0);return t.utc?+new Date(Date.UTC(...e)):+new Date(...e)}var a2e=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};const VX={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},KC=we(VX);function o2e(t){return!!VX[t]}function JC(t){return t.startsWith("utc")}function l2e(t){return t.substr(3)}const c2e={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function QC(t){return KC.filter(e=>WX(t,e))}function WX(t,e){const n=t.indexOf(e);return!(n<0||n>0&&e==="seconds"&&t.charAt(n-1)==="i"||t.length>n+3&&e==="day"&&t.charAt(n+3)==="o"||n>0&&e==="year"&&t.charAt(n-1)==="f")}function d2e(t,e,{end:n}={end:!1}){const i=PC(e),s=JC(t)?"utc":"";function o(f){return f==="quarter"?`(${s}quarter(${i})-1)`:`${s}${f}(${i})`}let c;const d={};for(const f of KC)WX(t,f)&&(d[f]=o(f),c=f);return n&&(d[c]+="+1"),s2e(d)}function HX(t){if(!t)return;const e=QC(t);return`timeUnitSpecifier(${yn(e)}, ${yn(c2e)})`}function f2e(t,e,n){if(!t)return;const i=HX(t);return`${n||JC(t)?"utc":"time"}Format(${e}, ${i})`}function Ji(t){if(!t)return;let e;return ke(t)?e={unit:t}:Fe(t)&&(e=Object.assign(Object.assign({},t),t.unit?{unit:t.unit}:{})),JC(e.unit)&&(e.utc=!0,e.unit=l2e(e.unit)),e}function u2e(t){const e=Ji(t),{utc:n}=e,i=a2e(e,["utc"]);return i.unit?(n?"utc":"")+we(i).map(s=>xn(`${s==="unit"?"":`_${s}_`}${i[s]}`)).join(""):(n?"utc":"")+"timeunit"+we(i).map(s=>xn(`_${s}_${i[s]}`)).join("")}function h2e(t){return t==null?void 0:t.param}function ZC(t){return!!(t!=null&&t.field)&&t.equal!==void 0}function eR(t){return!!(t!=null&&t.field)&&t.lt!==void 0}function tR(t){return!!(t!=null&&t.field)&&t.lte!==void 0}function nR(t){return!!(t!=null&&t.field)&&t.gt!==void 0}function iR(t){return!!(t!=null&&t.field)&&t.gte!==void 0}function sR(t){if(t!=null&&t.field){if(he(t.range)&&t.range.length===2)return!0;if(Re(t.range))return!0}return!1}function rR(t){return!!(t!=null&&t.field)&&(he(t.oneOf)||he(t.in))}function p2e(t){return!!(t!=null&&t.field)&&t.valid!==void 0}function YX(t){return rR(t)||ZC(t)||sR(t)||eR(t)||nR(t)||tR(t)||iR(t)}function Ka(t,e){return MS(t,{timeUnit:e,wrapTime:!0})}function g2e(t,e){return t.map(n=>Ka(n,e))}function XX(t,e=!0){var n;const{field:i}=t,s=(n=Ji(t.timeUnit))===null||n===void 0?void 0:n.unit,o=s?`time(${d2e(s,i)})`:xe(t,{expr:"datum"});if(ZC(t))return`${o}===${Ka(t.equal,s)}`;if(eR(t)){const c=t.lt;return`${o}<${Ka(c,s)}`}else if(nR(t)){const c=t.gt;return`${o}>${Ka(c,s)}`}else if(tR(t)){const c=t.lte;return`${o}<=${Ka(c,s)}`}else if(iR(t)){const c=t.gte;return`${o}>=${Ka(c,s)}`}else{if(rR(t))return`indexof([${g2e(t.oneOf,s).join(",")}], ${o}) !== -1`;if(p2e(t))return aR(o,t.valid);if(sR(t)){const{range:c}=t,d=Re(c)?{signal:`${c.signal}[0]`}:c[0],f=Re(c)?{signal:`${c.signal}[1]`}:c[1];if(d!==null&&f!==null&&e)return"inrange("+o+", ["+Ka(d,s)+", "+Ka(f,s)+"])";const u=[];return d!==null&&u.push(`${o} >= ${Ka(d,s)}`),f!==null&&u.push(`${o} <= ${Ka(f,s)}`),u.length>0?u.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${yn(t)}`)}function aR(t,e=!0){return e?`isValid(${t}) && isFinite(+${t})`:`!isValid(${t}) || !isFinite(+${t})`}function _2e(t){var e;return YX(t)&&t.timeUnit?Object.assign(Object.assign({},t),{timeUnit:(e=Ji(t.timeUnit))===null||e===void 0?void 0:e.unit}):t}const Jm={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function y2e(t){return t==="quantitative"||t==="temporal"}function KX(t){return t==="ordinal"||t==="nominal"}const mu=Jm.quantitative,oR=Jm.ordinal,Gp=Jm.temporal,lR=Jm.nominal,xg=Jm.geojson;function m2e(t){if(t)switch(t=t.toLowerCase(),t){case"q":case mu:return"quantitative";case"t":case Gp:return"temporal";case"o":case oR:return"ordinal";case"n":case lR:return"nominal";case xg:return"geojson"}}var w2e=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};const Ps={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},fF={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function b2e(t,e){const n=fF[t],i=fF[e];return n===i||n==="ordinal-position"&&i==="time"||i==="ordinal-position"&&n==="time"}const T2e={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function bj(t){return T2e[t]}const JX=new Set(["linear","log","pow","sqrt","symlog"]),QX=new Set([...JX,"time","utc"]);function ZX(t){return JX.has(t)}const eK=new Set(["quantile","quantize","threshold"]),v2e=new Set([...QX,...eK,"sequential","identity"]),E2e=new Set(["ordinal","bin-ordinal","point","band"]);function Ti(t){return E2e.has(t)}function Er(t){return v2e.has(t)}function Ba(t){return QX.has(t)}function Vp(t){return eK.has(t)}const S2e={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function x2e(t){return!ke(t)&&!!t.name}function tK(t){return t==null?void 0:t.param}function B2e(t){return t==null?void 0:t.unionWith}function k2e(t){return Fe(t)&&"field"in t}const I2e={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},F2e=w2e(I2e,["type","domain","range","rangeMax","rangeMin","scheme"]),O2e=we(F2e);function uF(t,e){switch(e){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(t);case"bins":return!["point","band","identity","ordinal"].includes(t);case"round":return Ba(t)||t==="band"||t==="point";case"padding":case"rangeMin":case"rangeMax":return Ba(t)||["point","band"].includes(t);case"paddingOuter":case"align":return["point","band"].includes(t);case"paddingInner":return t==="band";case"domainMax":case"domainMid":case"domainMin":case"clamp":return Ba(t);case"nice":return Ba(t)||t==="quantize"||t==="threshold";case"exponent":return t==="pow";case"base":return t==="log";case"constant":return t==="symlog";case"zero":return Er(t)&&!Mt(["log","time","utc","threshold","quantile"],t)}}function nK(t,e){switch(e){case"interpolate":case"scheme":case"domainMid":return Qh(t)?void 0:BFe(e);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function M2e(t,e){return Mt([oR,lR],e)?t===void 0||Ti(t):e===Gp?Mt([Ps.TIME,Ps.UTC,void 0],t):e===mu?ZX(t)||Vp(t)||t===void 0:!0}function A2e(t,e,n=!1){if(!Wd(t))return!1;switch(t){case On:case wi:case $d:case Eg:case ta:case Wa:return Ba(e)||e==="band"?!0:e==="point"?!n:!1;case cc:case Gd:case dc:case zd:case qd:case Wu:return Ba(e)||Vp(e)||Mt(["band","point","ordinal"],e);case Ys:case dl:case fl:return e!=="band";case Vd:case Xs:return e==="ordinal"||Vp(e)}}const ws={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},iK=ws.arc,vS=ws.area,ES=ws.bar,N2e=ws.image,SS=ws.line,xS=ws.point,C2e=ws.rect,h1=ws.rule,sK=ws.text,cR=ws.tick,R2e=ws.trail,dR=ws.circle,fR=ws.square,rK=ws.geoshape;function Xd(t){return["line","area","trail"].includes(t)}function aK(t){return["rect","bar","image","arc"].includes(t)}const L2e=new Set(we(ws));function Xo(t){return t.type}const P2e=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],D2e=["fill","fillOpacity"],j2e=[...P2e,...D2e],U2e={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},Tj=we(U2e),$2e={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],tick:["bandSize","thickness"]},z2e={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},q2e={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},oK=we(q2e);function wu(t){return t&&t.band!=null}const G2e={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},lK=5,V2e={binSpacing:1,continuousBandSize:lK,timeUnitBandPosition:.5},W2e={binSpacing:0,continuousBandSize:lK,timeUnitBandPosition:.5},H2e={thickness:1};function Y2e(t){return Xo(t)?t.type:t}function uR(t){const{channel:e,channelDef:n,markDef:i,scale:s,config:o}=t,c=pR(t);return Te(n)&&!BX(n.aggregate)&&s&&Ba(s.get("type"))?X2e({fieldDef:n,channel:e,markDef:i,ref:c,config:o}):c}function X2e({fieldDef:t,channel:e,markDef:n,ref:i,config:s}){return Xd(n.type)?i:rn("invalid",n,s)===null?[K2e(t,e),i]:i}function K2e(t,e){const n=hR(t,!0),s=Hu(e)==="y"?{field:{group:"height"}}:{value:0};return Object.assign({test:n},s)}function hR(t,e=!0){return aR(ke(t)?t:xe(t,{expr:"datum"}),!e)}function J2e(t){const{datum:e}=t;return Xu(e)?$y(e):`${yn(e)}`}function Hf(t,e,n,i){const s={};if(e&&(s.scale=e),pl(t)){const{datum:o}=t;Xu(o)?s.signal=$y(o):Re(o)?s.signal=o.signal:Km(o)?s.signal=o.expr:s.value=o}else s.field=xe(t,n);if(i){const{offset:o,band:c}=i;o&&(s.offset=o),c&&(s.band=c)}return s}function p1({scaleName:t,fieldOrDatumDef:e,fieldOrDatumDef2:n,offset:i,startSuffix:s,bandPosition:o=.5}){const c=0<o&&o<1?"datum":void 0,d=xe(e,{expr:c,suffix:s}),f=n!==void 0?xe(n,{expr:c}):xe(e,{suffix:"end",expr:c}),u={};if(o===0||o===1){u.scale=t;const a=o===0?d:f;u.field=a}else{const a=Re(o)?`${o.signal} * ${d} + (1-${o.signal}) * ${f}`:`${o} * ${d} + ${1-o} * ${f}`;u.signal=`scale("${t}", ${a})`}return i&&(u.offset=i),u}function pR({channel:t,channelDef:e,channel2Def:n,markDef:i,config:s,scaleName:o,scale:c,stack:d,offset:f,defaultRef:u,bandPosition:a}){var _;if(e){if(Ze(e)){const w=c==null?void 0:c.get("type");if(Zr(e)){a!=null||(a=_K({fieldDef:e,fieldDef2:n,markDef:i,config:s}));const{bin:m,timeUnit:l,type:T}=e;if(mn(m)||a&&l&&T===Gp)return d!=null&&d.impute?Hf(e,o,{binSuffix:"mid"},{offset:f}):a&&!Ti(w)?p1({scaleName:o,fieldOrDatumDef:e,bandPosition:a,offset:f}):Hf(e,o,tw(e,t)?{binSuffix:"range"}:{},{offset:f});if(Ei(m)){if(Te(n))return p1({scaleName:o,fieldOrDatumDef:e,fieldOrDatumDef2:n,bandPosition:a,offset:f});be($X(t===On?Va:ol))}}return Hf(e,o,Ti(w)?{binSuffix:"range"}:{},{offset:f,band:w==="band"?(_=a!=null?a:e.bandPosition)!==null&&_!==void 0?_:.5:void 0})}else if(Da(e)){const w=e.value,m=f?{offset:f}:{};return Object.assign(Object.assign({},H_(t,w)),m)}}return wt(u)&&(u=u()),u&&Object.assign(Object.assign({},u),f?{offset:f}:{})}function H_(t,e){return Mt(["x","x2"],t)&&e==="width"?{field:{group:"width"}}:Mt(["y","y2"],t)&&e==="height"?{field:{group:"height"}}:Tn(e)}function bu(t){return t&&t!=="number"&&t!=="time"}function cK(t,e,n){return`${t}(${e}${n?`, ${yn(n)}`:""})`}const Q2e=" \u2013 ";function gR({fieldOrDatumDef:t,format:e,formatType:n,expr:i,normalizeStack:s,config:o}){var c,d;if(bu(n))return ka({fieldOrDatumDef:t,format:e,formatType:n,expr:i,config:o});const f=dK(t,i,s),u=Wp(t);if(e===void 0&&n===void 0&&o.customFormatTypes){if(u==="quantitative"){if(s&&o.normalizedNumberFormatType)return ka({fieldOrDatumDef:t,format:o.normalizedNumberFormat,formatType:o.normalizedNumberFormatType,expr:i,config:o});if(o.numberFormatType)return ka({fieldOrDatumDef:t,format:o.numberFormat,formatType:o.numberFormatType,expr:i,config:o})}if(u==="temporal"&&o.timeFormatType&&Te(t)&&t.timeUnit===void 0)return ka({fieldOrDatumDef:t,format:o.timeFormat,formatType:o.timeFormatType,expr:i,config:o})}if(Yp(t)){const a=eOe({field:f,timeUnit:Te(t)?(c=Ji(t.timeUnit))===null||c===void 0?void 0:c.unit:void 0,format:e,formatType:o.timeFormatType,rawTimeFormat:o.timeFormat,isUTCScale:Ku(t)&&((d=t.scale)===null||d===void 0?void 0:d.type)===Ps.UTC});return a?{signal:a}:void 0}if(e=hF({type:u,specifiedFormat:e,config:o,normalizeStack:s}),Te(t)&&mn(t.bin)){const a=xe(t,{expr:i,binSuffix:"end"});return{signal:Qm(f,a,e,n,o)}}else return e||Wp(t)==="quantitative"?{signal:`${hK(f,e)}`}:{signal:`isValid(${f}) ? ${f} : ""+${f}`}}function dK(t,e,n){return Te(t)?n?`${xe(t,{expr:e,suffix:"end"})}-${xe(t,{expr:e,suffix:"start"})}`:xe(t,{expr:e}):J2e(t)}function ka({fieldOrDatumDef:t,format:e,formatType:n,expr:i,normalizeStack:s,config:o,field:c}){if(c!=null||(c=dK(t,i,s)),c!=="datum.value"&&Te(t)&&mn(t.bin)){const d=xe(t,{expr:i,binSuffix:"end"});return{signal:Qm(c,d,e,n,o)}}return{signal:cK(n,c,e)}}function fK(t,e,n,i,s,o){var c;if(!bu(i)&&!(n===void 0&&i===void 0&&s.customFormatTypes&&Wp(t)==="quantitative"&&(s.normalizedNumberFormatType&&Hp(t)&&t.stack==="normalize"||s.numberFormatType))){if(Hp(t)&&t.stack==="normalize"&&s.normalizedNumberFormat)return hF({type:"quantitative",config:s,normalizeStack:!0});if(Yp(t)){const d=Te(t)?(c=Ji(t.timeUnit))===null||c===void 0?void 0:c.unit:void 0;return d===void 0&&s.customFormatTypes&&s.timeFormatType?void 0:Z2e({specifiedFormat:n,timeUnit:d,config:s,omitTimeFormatConfig:o})}return hF({type:e,specifiedFormat:n,config:s})}}function uK(t,e,n){var i;if(t&&(Re(t)||t==="number"||t==="time"))return t;if(Yp(e)&&n!=="time"&&n!=="utc")return Te(e)&&((i=Ji(e==null?void 0:e.timeUnit))===null||i===void 0?void 0:i.utc)?"utc":"time"}function hF({type:t,specifiedFormat:e,config:n,normalizeStack:i}){if(ke(e))return e;if(t===mu)return i?n.normalizedNumberFormat:n.numberFormat}function Z2e({specifiedFormat:t,timeUnit:e,config:n,omitTimeFormatConfig:i}){return t||(e?{signal:HX(e)}:i?void 0:n.timeFormat)}function hK(t,e){return`format(${t}, "${e||""}")`}function vj(t,e,n,i){var s;return bu(n)?cK(n,t,e):hK(t,(s=ke(e)?e:void 0)!==null&&s!==void 0?s:i.numberFormat)}function Qm(t,e,n,i,s){if(n===void 0&&i===void 0&&s.customFormatTypes&&s.numberFormatType)return Qm(t,e,s.numberFormat,s.numberFormatType,s);const o=vj(t,n,i,s),c=vj(e,n,i,s);return`${aR(t,!1)} ? "null" : ${o} + "${Q2e}" + ${c}`}function eOe({field:t,timeUnit:e,format:n,formatType:i,rawTimeFormat:s,isUTCScale:o}){return!e||n?!e&&i?`${i}(${t}, '${n}')`:(n=ke(n)?n:s,`${o?"utc":"time"}Format(${t}, '${n}')`):f2e(e,t,o)}const BS="min",tOe={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function Ej(t){return t in tOe}function pK(t){return!!(t!=null&&t.encoding)}function Mo(t){return t&&(t.op==="count"||!!t.field)}function gK(t){return t&&he(t)}function Zm(t){return"row"in t||"column"in t}function _R(t){return!!t&&"header"in t}function kS(t){return"facet"in t}var pF=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};function nOe(t){return t.param}function iOe(t){return t&&!ke(t)&&"repeat"in t}function Sj(t){const{field:e,timeUnit:n,bin:i,aggregate:s}=t;return Object.assign(Object.assign(Object.assign(Object.assign({},n?{timeUnit:n}:{}),i?{bin:i}:{}),s?{aggregate:s}:{}),{field:e})}function yR(t){return"sort"in t}function _K({fieldDef:t,fieldDef2:e,markDef:n,config:i}){if(Ze(t)&&t.bandPosition!==void 0)return t.bandPosition;if(Te(t)){const{timeUnit:s,bin:o}=t;if(s&&!e)return aK(n.type)?0:yu("timeUnitBandPosition",n,i);if(mn(o))return .5}}function yK({channel:t,fieldDef:e,fieldDef2:n,markDef:i,config:s,scaleType:o,useVlSizeChannel:c}){var d,f,u;const a=Ks(t),_=rn(c?"size":a,i,s,{vgChannel:a});if(_!==void 0)return _;if(Te(e)){const{timeUnit:w,bin:m}=e;if(w&&!n)return{band:yu("timeUnitBandSize",i,s)};if(mn(m)&&!Ti(o))return{band:1}}if(aK(i.type))return o?Ti(o)?((d=s[i.type])===null||d===void 0?void 0:d.discreteBandSize)||{band:1}:(f=s[i.type])===null||f===void 0?void 0:f.continuousBandSize:(u=s[i.type])===null||u===void 0?void 0:u.discreteBandSize}function mK(t,e,n,i){return mn(t.bin)||t.timeUnit&&Zr(t)&&t.type==="temporal"?_K({fieldDef:t,fieldDef2:e,markDef:n,config:i})!==void 0:!1}function IS(t){return t&&"condition"in t}function FS(t){const e=t==null?void 0:t.condition;return!!e&&!he(e)&&Te(e)}function ew(t){const e=t==null?void 0:t.condition;return!!e&&!he(e)&&Ze(e)}function sOe(t){const e=t==null?void 0:t.condition;return!!e&&(he(e)||Da(e))}function Te(t){return t&&(!!t.field||t.aggregate==="count")}function Wp(t){return t==null?void 0:t.type}function pl(t){return t&&"datum"in t}function xo(t){return Zr(t)&&!g1(t)||gF(t)}function gF(t){return pl(t)&&cn(t.datum)}function Ze(t){return Te(t)||pl(t)}function Zr(t){return t&&("field"in t||t.aggregate==="count")&&"type"in t}function Da(t){return t&&"value"in t&&"value"in t}function Ku(t){return t&&("scale"in t||"sort"in t)}function Hp(t){return t&&("axis"in t||"stack"in t||"impute"in t)}function wK(t){return t&&"legend"in t}function bK(t){return t&&("format"in t||"formatType"in t)}function rOe(t){return Ls(t,["legend","axis","header","scale"])}function aOe(t){return"op"in t}function xe(t,e={}){var n,i,s;let o=t.field;const c=e.prefix;let d=e.suffix,f="";if(lOe(t))o=hX("count");else{let u;if(!e.nofn)if(aOe(t))u=t.op;else{const{bin:a,aggregate:_,timeUnit:w}=t;mn(a)?(u=kX(a),d=((n=e.binSuffix)!==null&&n!==void 0?n:"")+((i=e.suffix)!==null&&i!==void 0?i:"")):_?Hd(_)?(f=`["${o}"]`,o=`argmax_${_.argmax}`):Zl(_)?(f=`["${o}"]`,o=`argmin_${_.argmin}`):u=String(_):w&&(u=u2e(w),d=(!["range","mid"].includes(e.binSuffix)&&e.binSuffix||"")+((s=e.suffix)!==null&&s!==void 0?s:""))}u&&(o=o?`${u}_${o}`:u)}return d&&(o=`${o}_${d}`),c&&(o=`${c}_${o}`),e.forAs?DC(o):e.expr?dX(o,e.expr)+f:Jr(o)+f}function g1(t){switch(t.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Te(t)&&!!t.bin;case"temporal":return!1}throw new Error(PX(t.type))}function oOe(t){var e;return Ku(t)&&Vp((e=t.scale)===null||e===void 0?void 0:e.type)}function lOe(t){return t.aggregate==="count"}function cOe(t,e){var n;const{field:i,bin:s,timeUnit:o,aggregate:c}=t;if(c==="count")return e.countTitle;if(mn(s))return`${i} (binned)`;if(o){const d=(n=Ji(o))===null||n===void 0?void 0:n.unit;if(d)return`${i} (${QC(d).join("-")})`}else if(c)return Hd(c)?`${i} for max ${c.argmax}`:Zl(c)?`${i} for min ${c.argmin}`:`${Vm(c)} of ${i}`;return i}function dOe(t){const{aggregate:e,bin:n,timeUnit:i,field:s}=t;if(Hd(e))return`${s} for argmax(${e.argmax})`;if(Zl(e))return`${s} for argmin(${e.argmin})`;const o=Ji(i),c=e||(o==null?void 0:o.unit)||(o==null?void 0:o.maxbins)&&"timeunit"||mn(n)&&"bin";return c?`${c.toUpperCase()}(${s})`:s}const TK=(t,e)=>{switch(e.fieldTitle){case"plain":return t.field;case"functional":return dOe(t);default:return cOe(t,e)}};let vK=TK;function EK(t){vK=t}function fOe(){EK(TK)}function Zh(t,e,{allowDisabling:n,includeDefault:i=!0}){var s,o;const c=(s=mR(t))===null||s===void 0?void 0:s.title;if(!Te(t))return c!=null?c:t.title;const d=t,f=i?wR(d,e):void 0;return n?zn(c,d.title,f):(o=c!=null?c:d.title)!==null&&o!==void 0?o:f}function mR(t){if(Hp(t)&&t.axis)return t.axis;if(wK(t)&&t.legend)return t.legend;if(_R(t)&&t.header)return t.header}function wR(t,e){return vK(t,e)}function _1(t){var e;if(bK(t)){const{format:n,formatType:i}=t;return{format:n,formatType:i}}else{const n=(e=mR(t))!==null&&e!==void 0?e:{},{format:i,formatType:s}=n;return{format:i,formatType:s}}}function uOe(t,e){var n;switch(e){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(yR(t)&&he(t.sort))return"ordinal";const{aggregate:i,bin:s,timeUnit:o}=t;if(o)return"temporal";if(s||i&&!Hd(i)&&!Zl(i))return"quantitative";if(Ku(t)&&((n=t.scale)===null||n===void 0?void 0:n.type))switch(fF[t.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Ko(t){if(Te(t))return t;if(FS(t))return t.condition}function ni(t){if(Ze(t))return t;if(ew(t))return t.condition}function SK(t,e,n,i={}){if(ke(t)||cn(t)||Dd(t)){const s=ke(t)?"string":cn(t)?"number":"boolean";return be(hFe(e,s,t)),{value:t}}return Ze(t)?y1(t,e,n,i):ew(t)?Object.assign(Object.assign({},t),{condition:y1(t.condition,e,n,i)}):t}function y1(t,e,n,i){if(bK(t)){const{format:s,formatType:o}=t,c=pF(t,["format","formatType"]);if(bu(o)&&!n.customFormatTypes)return be(yj(e)),y1(c,e,n,i)}else{const s=Hp(t)?"axis":wK(t)?"legend":_R(t)?"header":null;if(s&&t[s]){const o=t[s],{format:c,formatType:d}=o,f=pF(o,["format","formatType"]);if(bu(d)&&!n.customFormatTypes)return be(yj(e)),y1(Object.assign(Object.assign({},t),{[s]:f}),e,n,i)}}return Te(t)?bR(t,e,i):hOe(t)}function hOe(t){let e=t.type;if(e)return t;const{datum:n}=t;return e=cn(n)?"quantitative":ke(n)?"nominal":Xu(n)?"temporal":void 0,Object.assign(Object.assign({},t),{type:e})}function bR(t,e,{compositeMark:n=!1}={}){const{aggregate:i,timeUnit:s,bin:o,field:c}=t,d=Object.assign({},t);if(!n&&i&&!VC(i)&&!Hd(i)&&!Zl(i)&&(be(gFe(i)),delete d.aggregate),s&&(d.timeUnit=Ji(s)),c&&(d.field=`${c}`),mn(o)&&(d.bin=OS(o,e)),Ei(o)&&!bi(e)&&be(YFe(e)),Zr(d)){const{type:f}=d,u=m2e(f);f!==u&&(d.type=u),f!=="quantitative"&&BX(i)&&(be(pFe(f,i)),d.type="quantitative")}else if(!wX(e)){const f=uOe(d,e);d.type=f}if(Zr(d)){const{compatible:f,warning:u}=pOe(d,e)||{};f===!1&&be(u)}if(yR(d)&&ke(d.sort)){const{sort:f}=d;if(Ej(f))return Object.assign(Object.assign({},d),{sort:{encoding:f}});const u=f.substr(1);if(f.charAt(0)==="-"&&Ej(u))return Object.assign(Object.assign({},d),{sort:{encoding:u,order:"descending"}})}if(_R(d)){const{header:f}=d;if(f){const{orient:u}=f,a=pF(f,["orient"]);if(u)return Object.assign(Object.assign({},d),{header:Object.assign(Object.assign({},a),{labelOrient:f.labelOrient||u,titleOrient:f.titleOrient||u})})}}return d}function OS(t,e){return Dd(t)?{maxbins:lj(e)}:t==="binned"?{binned:!0}:!t.maxbins&&!t.step?Object.assign(Object.assign({},t),{maxbins:lj(e)}):t}const fh={compatible:!0};function pOe(t,e){const n=t.type;if(n==="geojson"&&e!=="shape")return{compatible:!1,warning:`Channel ${e} should not be used with a geojson data.`};switch(e){case zl:case ql:case hS:return g1(t)?fh:{compatible:!1,warning:bFe(e)};case On:case wi:case $d:case Eg:case Ys:case dl:case fl:case Hm:case Xm:case pS:case _u:case gS:case _S:case Wu:case ta:case Wa:case yS:return fh;case cl:case Qr:case ll:case Ha:return n!==mu?{compatible:!1,warning:`Channel ${e} should be used with a quantitative field only, not ${t.type} field.`}:fh;case dc:case zd:case qd:case Gd:case cc:case lc:case oc:case Va:case ol:return n==="nominal"&&!t.sort?{compatible:!1,warning:`Channel ${e} should not be used with an unsorted discrete field.`}:fh;case Xs:case Vd:return!g1(t)&&!oOe(t)?{compatible:!1,warning:TFe(e)}:fh;case Ym:return t.type==="nominal"&&!("sort"in t)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:fh}}function Yp(t){const{formatType:e}=_1(t);return e==="time"||!e&&gOe(t)}function gOe(t){return t&&(t.type==="temporal"||Te(t)&&!!t.timeUnit)}function MS(t,{timeUnit:e,type:n,wrapTime:i,undefinedIfExprNotRequired:s}){var o;const c=e&&((o=Ji(e))===null||o===void 0?void 0:o.unit);let d=c||n==="temporal",f;return Km(t)?f=t.expr:Re(t)?f=t.signal:Xu(t)?(d=!0,f=$y(t)):(ke(t)||cn(t))&&d&&(f=`datetime(${yn(t)})`,o2e(c)&&(cn(t)&&t<1e4||ke(t)&&isNaN(Date.parse(t)))&&(f=$y({[c]:t}))),f?i&&d?`time(${f})`:f:s?void 0:yn(t)}function xK(t,e){const{type:n}=t;return e.map(i=>{const s=MS(i,{timeUnit:Te(t)?t.timeUnit:void 0,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:i})}function tw(t,e){return mn(t.bin)?Wd(e)&&["ordinal","nominal"].includes(t.type):(console.warn("Only call this method for binned field defs."),!1)}const xj={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function nw(t){return t==null?void 0:t.condition}const BK=["domain","grid","labels","ticks","title"],_Oe={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},kK={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},yOe=Object.assign(Object.assign({},kK),{style:1,labelExpr:1,encoding:1});function Bj(t){return!!yOe[t]}const mOe={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},IK=we(mOe);function fc(t){return"mark"in t}class AS{constructor(e,n){this.name=e,this.run=n}hasMatchingType(e){return fc(e)?Y2e(e.mark)===this.name:!1}}var wOe=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};function Yf(t,e){const n=t&&t[e];return n?he(n)?pu(n,i=>!!i.field):Te(n)||FS(n):!1}function FK(t,e){const n=t&&t[e];return n?he(n)?pu(n,i=>!!i.field):Te(n)||pl(n)||ew(n):!1}function _F(t,e){if(bi(e)){const n=t[e];if((Te(n)||pl(n))&&KX(n.type)){const i=bX(e);return FK(t,i)}}return!1}function TR(t){return pu(mIe,e=>{if(Yf(t,e)){const n=t[e];if(he(n))return pu(n,i=>!!i.aggregate);{const i=Ko(n);return i&&!!i.aggregate}}return!1})}function OK(t,e){const n=[],i=[],s=[],o=[],c={};return vR(t,(d,f)=>{if(Te(d)){const{field:u,aggregate:a,bin:_,timeUnit:w}=d,m=wOe(d,["field","aggregate","bin","timeUnit"]);if(a||w||_){const l=mR(d),T=l==null?void 0:l.title;let b=xe(d,{forAs:!0});const S=Object.assign(Object.assign(Object.assign({},T?[]:{title:Zh(d,e,{allowDisabling:!0})}),m),{field:b});if(a){let x;if(Hd(a)?(x="argmax",b=xe({op:"argmax",field:a.argmax},{forAs:!0}),S.field=`${b}.${u}`):Zl(a)?(x="argmin",b=xe({op:"argmin",field:a.argmin},{forAs:!0}),S.field=`${b}.${u}`):a!=="boxplot"&&a!=="errorbar"&&a!=="errorband"&&(x=a),x){const B={op:x,as:b};u&&(B.field=u),o.push(B)}}else if(n.push(b),Zr(d)&&mn(_)){if(i.push({bin:_,field:u,as:b}),n.push(xe(d,{binSuffix:"end"})),tw(d,f)&&n.push(xe(d,{binSuffix:"range"})),bi(f)){const x={field:`${b}_end`};c[`${f}2`]=x}S.bin="binned",wX(f)||(S.type=mu)}else if(w){s.push({timeUnit:w,field:u,as:b});const x=Zr(d)&&d.type!==Gp&&"time";x&&(f===Hm||f===_u?S.formatType=x:IIe(f)?S.legend=Object.assign({formatType:x},S.legend):bi(f)&&(S.axis=Object.assign({formatType:x},S.axis)))}c[f]=S}else n.push(u),c[f]=t[f]}else c[f]=t[f]}),{bins:i,timeUnits:s,aggregate:o,groupby:n,encoding:c}}function bOe(t,e,n){const i=OIe(e,n);if(i){if(i==="binned"){const s=t[e===Va?On:wi];return!!(Te(s)&&Te(t[e])&&Ei(s.bin))}}else return!1;return!0}function TOe(t,e,n,i){const s={};for(const o of we(t))mX(o)||be(wFe(o));for(let o of SIe){if(!t[o])continue;const c=t[o];if(Sg(o)){const d=TX(o),f=s[d];if(Te(f)){if(y2e(f.type)&&Te(c)){be(fFe(d));continue}}else o=d,be(uFe(d))}if(o==="angle"&&e==="arc"&&!t.theta&&(be(dFe),o=ta),!bOe(t,o,e)){be(TS(o,e));continue}if(o===cc&&e==="line"){const d=Ko(t[o]);if(d!=null&&d.aggregate){be(yFe);continue}}if(o===Ys&&(n?"fill"in t:"stroke"in t)){be(DX("encoding",{fill:"fill"in t,stroke:"stroke"in t}));continue}if(o===Xm||o===Ym&&!he(c)&&!Da(c)||o===_u&&he(c))c&&(s[o]=Ie(c).reduce((d,f)=>(Te(f)?d.push(bR(f,o)):be(dF(f,o)),d),[]));else{if(o===_u&&c===null)s[o]=null;else if(!Te(c)&&!pl(c)&&!Da(c)&&!IS(c)&&!Re(c)){be(dF(c,o));continue}s[o]=SK(c,o,i)}}return s}function NS(t,e){const n={};for(const i of we(t)){const s=SK(t[i],i,e,{compositeMark:!0});n[i]=s}return n}function vOe(t){const e=[];for(const n of we(t))if(Yf(t,n)){const i=t[n],s=Ie(i);for(const o of s)Te(o)?e.push(o):FS(o)&&e.push(o.condition)}return e}function vR(t,e,n){if(!!t)for(const i of we(t)){const s=t[i];if(he(s))for(const o of s)e.call(n,o,i);else e.call(n,s,i)}}function EOe(t,e,n,i){return t?we(t).reduce((s,o)=>{const c=t[o];return he(c)?c.reduce((d,f)=>e.call(i,d,f,o),s):e.call(i,s,c,o)},n):n}function MK(t,e){return we(e).reduce((n,i)=>{switch(i){case On:case wi:case gS:case yS:case _S:case Va:case ol:case $d:case Eg:case ta:case lc:case Wa:case oc:case ll:case cl:case Ha:case Qr:case Hm:case Xs:case Wu:case _u:return n;case Ym:if(t==="line"||t==="trail")return n;case Xm:case pS:{const s=e[i];if(he(s)||Te(s))for(const o of Ie(s))o.aggregate||n.push(xe(o,{}));return n}case cc:if(t==="trail")return n;case Ys:case dl:case fl:case dc:case zd:case qd:case Vd:case Gd:{const s=Ko(e[i]);return s&&!s.aggregate&&n.push(xe(s,{})),n}}},[])}var AK=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};function SOe(t){const{tooltip:e}=t,n=AK(t,["tooltip"]);if(!e)return{filteredEncoding:n};let i,s;if(he(e)){for(const o of e)o.aggregate?(i||(i=[]),i.push(o)):(s||(s=[]),s.push(o));i&&(n.tooltip=i)}else e.aggregate?n.tooltip=e:s=e;return he(s)&&s.length===1&&(s=s[0]),{customTooltipWithoutAggregatedField:s,filteredEncoding:n}}function yF(t,e,n,i=!0){if("tooltip"in n)return{tooltip:n.tooltip};const s=t.map(({fieldPrefix:c,titlePrefix:d})=>{const f=i?` of ${ER(e)}`:"";return{field:c+e.field,type:e.type,title:Re(d)?{signal:`${d}"${escape(f)}"`}:d+f}}),o=vOe(n).map(rOe);return{tooltip:[...s,...So(o,Pt)]}}function ER(t){const{title:e,field:n}=t;return zn(e,n)}function SR(t,e,n,i,s){const{scale:o,axis:c}=n;return({partName:d,mark:f,positionPrefix:u,endPositionPrefix:a=void 0,extraEncoding:_={}})=>{const w=ER(n);return NK(t,d,s,{mark:f,encoding:Object.assign(Object.assign(Object.assign({[e]:Object.assign(Object.assign(Object.assign({field:`${u}_${n.field}`,type:n.type},w!==void 0?{title:w}:{}),o!==void 0?{scale:o}:{}),c!==void 0?{axis:c}:{})},ke(a)?{[`${e}2`]:{field:`${a}_${n.field}`}}:{}),i),_)})}}function NK(t,e,n,i){const{clip:s,color:o,opacity:c}=t,d=t.type;return t[e]||t[e]===void 0&&n[e]?[Object.assign(Object.assign({},i),{mark:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n[e]),s?{clip:s}:{}),o?{color:o}:{}),c?{opacity:c}:{}),Xo(i.mark)?i.mark:{type:i.mark}),{style:`${d}-${String(e)}`}),Dd(t[e])?{}:t[e])})]:[]}function CK(t,e,n){const{encoding:i}=t,s=e==="vertical"?"y":"x",o=i[s],c=i[`${s}2`],d=i[`${s}Error`],f=i[`${s}Error2`];return{continuousAxisChannelDef:t0(o,n),continuousAxisChannelDef2:t0(c,n),continuousAxisChannelDefError:t0(d,n),continuousAxisChannelDefError2:t0(f,n),continuousAxis:s}}function t0(t,e){if(t!=null&&t.aggregate){const{aggregate:n}=t,i=AK(t,["aggregate"]);return n!==e&&be(HFe(n,e)),i}else return t}function RK(t,e){const{mark:n,encoding:i}=t,{x:s,y:o}=i;if(Xo(n)&&n.orient)return n.orient;if(xo(s)){if(xo(o)){const c=Te(s)&&s.aggregate,d=Te(o)&&o.aggregate;if(!c&&d===e)return"vertical";if(!d&&c===e)return"horizontal";if(c===e&&d===e)throw new Error("Both x and y cannot have aggregate");return Yp(o)&&!Yp(s)?"horizontal":"vertical"}return"horizontal"}else{if(xo(o))return"vertical";throw new Error(`Need a valid continuous axis for ${e}s`)}}var Q0=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};const m1="boxplot",xOe=["box","median","outliers","rule","ticks"],BOe=new AS(m1,PK);function LK(t){return cn(t)?"tukey":t}function PK(t,{config:e}){var n,i;t=Object.assign(Object.assign({},t),{encoding:NS(t.encoding,e)});const{mark:s,encoding:o,params:c,projection:d}=t,f=Q0(t,["mark","encoding","params","projection"]),u=Xo(s)?s:{type:s};c&&be(LX("boxplot"));const a=(n=u.extent)!==null&&n!==void 0?n:e.boxplot.extent,_=rn("size",u,e),w=u.invalid,m=LK(a),{bins:l,timeUnits:T,transform:b,continuousAxisChannelDef:S,continuousAxis:x,groupby:B,aggregate:F,encodingWithoutContinuousAxis:k,ticksOrient:M,boxOrient:A,customTooltipWithoutAggregatedField:R}=kOe(t,a,e),{color:P,size:j}=k,D=Q0(k,["color","size"]),z=_e=>SR(u,x,S,_e,e.boxplot),$=z(D),Y=z(k),W=z(Object.assign(Object.assign({},D),j?{size:j}:{})),H=yF([{fieldPrefix:m==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:m==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],S,k),J={type:"tick",color:"black",opacity:1,orient:M,invalid:w,aria:!1},V=m==="min-max"?H:yF([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],S,k),le=[...$({partName:"rule",mark:{type:"rule",invalid:w,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:V}),...$({partName:"rule",mark:{type:"rule",invalid:w,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:V}),...$({partName:"ticks",mark:J,positionPrefix:"lower_whisker",extraEncoding:V}),...$({partName:"ticks",mark:J,positionPrefix:"upper_whisker",extraEncoding:V})],pe=[...m!=="tukey"?le:[],...Y({partName:"box",mark:Object.assign(Object.assign({type:"bar"},_?{size:_}:{}),{orient:A,invalid:w,ariaRoleDescription:"box"}),positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:H}),...W({partName:"median",mark:Object.assign(Object.assign(Object.assign({type:"tick",invalid:w},Fe(e.boxplot.median)&&e.boxplot.median.color?{color:e.boxplot.median.color}:{}),_?{size:_}:{}),{orient:M,aria:!1}),positionPrefix:"mid_box",extraEncoding:H})];if(m==="min-max")return Object.assign(Object.assign({},f),{transform:((i=f.transform)!==null&&i!==void 0?i:[]).concat(b),layer:pe});const se=`datum["lower_box_${S.field}"]`,Ne=`datum["upper_box_${S.field}"]`,fe=`(${Ne} - ${se})`,Ce=`${se} - ${a} * ${fe}`,Me=`${Ne} + ${a} * ${fe}`,He=`datum["${S.field}"]`,Bt={joinaggregate:DK(S.field),groupby:B},vt={transform:[{filter:`(${Ce} <= ${He}) && (${He} <= ${Me})`},{aggregate:[{op:"min",field:S.field,as:`lower_whisker_${S.field}`},{op:"max",field:S.field,as:`upper_whisker_${S.field}`},{op:"min",field:`lower_box_${S.field}`,as:`lower_box_${S.field}`},{op:"max",field:`upper_box_${S.field}`,as:`upper_box_${S.field}`},...F],groupby:B}],layer:le},ge=Q0(D,["tooltip"]),{scale:G,axis:q}=S,L=ER(S),X=Ls(q,["title"]),Z=NK(u,"outliers",e.boxplot,{transform:[{filter:`(${He} < ${Ce}) || (${He} > ${Me})`}],mark:"point",encoding:Object.assign(Object.assign(Object.assign({[x]:Object.assign(Object.assign(Object.assign({field:S.field,type:S.type},L!==void 0?{title:L}:{}),G!==void 0?{scale:G}:{}),ln(X)?{}:{axis:X})},ge),P?{color:P}:{}),R?{tooltip:R}:{})})[0];let ae;const re=[...l,...T,Bt];return Z?ae={transform:re,layer:[Z,vt]}:(ae=vt,ae.transform.unshift(...re)),Object.assign(Object.assign({},f),{layer:[ae,{transform:b,layer:pe}]})}function DK(t){return[{op:"q1",field:t,as:`lower_box_${t}`},{op:"q3",field:t,as:`upper_box_${t}`}]}function kOe(t,e,n){const i=RK(t,m1),{continuousAxisChannelDef:s,continuousAxis:o}=CK(t,i,m1),c=s.field,d=LK(e),f=[...DK(c),{op:"median",field:c,as:`mid_box_${c}`},{op:"min",field:c,as:(d==="min-max"?"lower_whisker_":"min_")+c},{op:"max",field:c,as:(d==="min-max"?"upper_whisker_":"max_")+c}],u=d==="min-max"||d==="tukey"?[]:[{calculate:`datum["upper_box_${c}"] - datum["lower_box_${c}"]`,as:`iqr_${c}`},{calculate:`min(datum["upper_box_${c}"] + datum["iqr_${c}"] * ${e}, datum["max_${c}"])`,as:`upper_whisker_${c}`},{calculate:`max(datum["lower_box_${c}"] - datum["iqr_${c}"] * ${e}, datum["min_${c}"])`,as:`lower_whisker_${c}`}],a=t.encoding,_=o;a[_];const w=Q0(a,[typeof _=="symbol"?_:_+""]),{customTooltipWithoutAggregatedField:m,filteredEncoding:l}=SOe(w),{bins:T,timeUnits:b,aggregate:S,groupby:x,encoding:B}=OK(l,n),F=i==="vertical"?"horizontal":"vertical",k=i,M=[...T,...b,{aggregate:[...S,...f],groupby:x},...u];return{bins:T,timeUnits:b,transform:M,groupby:x,aggregate:S,continuousAxisChannelDef:s,continuousAxis:o,encodingWithoutContinuousAxis:B,ticksOrient:F,boxOrient:k,customTooltipWithoutAggregatedField:m}}var kj=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};const xR="errorbar",IOe=["ticks","rule"],FOe=new AS(xR,jK);function jK(t,{config:e}){t=Object.assign(Object.assign({},t),{encoding:NS(t.encoding,e)});const{transform:n,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:o,ticksOrient:c,markDef:d,outerSpec:f,tooltipEncoding:u}=UK(t,xR,e);delete o.size;const a=SR(d,s,i,o,e.errorbar),_=d.thickness,w=d.size,m=Object.assign(Object.assign({type:"tick",orient:c,aria:!1},_!==void 0?{thickness:_}:{}),w!==void 0?{size:w}:{}),l=[...a({partName:"ticks",mark:m,positionPrefix:"lower",extraEncoding:u}),...a({partName:"ticks",mark:m,positionPrefix:"upper",extraEncoding:u}),...a({partName:"rule",mark:Object.assign({type:"rule",ariaRoleDescription:"errorbar"},_!==void 0?{size:_}:{}),positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u})];return Object.assign(Object.assign(Object.assign({},f),{transform:n}),l.length>1?{layer:l}:Object.assign({},l[0]))}function OOe(t,e){const{encoding:n}=t;if(MOe(n))return{orient:RK(t,e),inputType:"raw"};const i=AOe(n),s=NOe(n),o=n.x,c=n.y;if(i){if(s)throw new Error(`${e} cannot be both type aggregated-upper-lower and aggregated-error`);const d=n.x2,f=n.y2;if(Ze(d)&&Ze(f))throw new Error(`${e} cannot have both x2 and y2`);if(Ze(d)){if(xo(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${e}`)}else if(Ze(f)){if(xo(c))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${e}`)}throw new Error("No ranged axis")}else{const d=n.xError,f=n.xError2,u=n.yError,a=n.yError2;if(Ze(f)&&!Ze(d))throw new Error(`${e} cannot have xError2 without xError`);if(Ze(a)&&!Ze(u))throw new Error(`${e} cannot have yError2 without yError`);if(Ze(d)&&Ze(u))throw new Error(`${e} cannot have both xError and yError with both are quantiative`);if(Ze(d)){if(xo(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Ze(u)){if(xo(c))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function MOe(t){return(Ze(t.x)||Ze(t.y))&&!Ze(t.x2)&&!Ze(t.y2)&&!Ze(t.xError)&&!Ze(t.xError2)&&!Ze(t.yError)&&!Ze(t.yError2)}function AOe(t){return Ze(t.x2)||Ze(t.y2)}function NOe(t){return Ze(t.xError)||Ze(t.xError2)||Ze(t.yError)||Ze(t.yError2)}function UK(t,e,n){var i;const{mark:s,encoding:o,params:c,projection:d}=t,f=kj(t,["mark","encoding","params","projection"]),u=Xo(s)?s:{type:s};c&&be(LX(e));const{orient:a,inputType:_}=OOe(t,e),{continuousAxisChannelDef:w,continuousAxisChannelDef2:m,continuousAxisChannelDefError:l,continuousAxisChannelDefError2:T,continuousAxis:b}=CK(t,a,e),{errorBarSpecificAggregate:S,postAggregateCalculates:x,tooltipSummary:B,tooltipTitleWithFieldName:F}=COe(u,w,m,l,T,_,e,n),k=o,M=b;k[M];const A=b==="x"?"x2":"y2";k[A];const R=b==="x"?"xError":"yError";k[R];const P=b==="x"?"xError2":"yError2";k[P];const j=kj(k,[typeof M=="symbol"?M:M+"",typeof A=="symbol"?A:A+"",typeof R=="symbol"?R:R+"",typeof P=="symbol"?P:P+""]),{bins:D,timeUnits:z,aggregate:$,groupby:Y,encoding:W}=OK(j,n),H=[...$,...S],J=_!=="raw"?[]:Y,V=yF(B,w,W,F);return{transform:[...(i=f.transform)!==null&&i!==void 0?i:[],...D,...z,...H.length===0?[]:[{aggregate:H,groupby:J}],...x],groupby:J,continuousAxisChannelDef:w,continuousAxis:b,encodingWithoutContinuousAxis:W,ticksOrient:a==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:f,tooltipEncoding:V}}function COe(t,e,n,i,s,o,c,d){let f=[],u=[];const a=e.field;let _,w=!1;if(o==="raw"){const m=t.center?t.center:t.extent?t.extent==="iqr"?"median":"mean":d.errorbar.center,l=t.extent?t.extent:m==="mean"?"stderr":"iqr";if(m==="median"!=(l==="iqr")&&be(WFe(m,l,c)),l==="stderr"||l==="stdev")f=[{op:l,field:a,as:`extent_${a}`},{op:m,field:a,as:`center_${a}`}],u=[{calculate:`datum["center_${a}"] + datum["extent_${a}"]`,as:`upper_${a}`},{calculate:`datum["center_${a}"] - datum["extent_${a}"]`,as:`lower_${a}`}],_=[{fieldPrefix:"center_",titlePrefix:Vm(m)},{fieldPrefix:"upper_",titlePrefix:Ij(m,l,"+")},{fieldPrefix:"lower_",titlePrefix:Ij(m,l,"-")}],w=!0;else{let T,b,S;l==="ci"?(T="mean",b="ci0",S="ci1"):(T="median",b="q1",S="q3"),f=[{op:b,field:a,as:`lower_${a}`},{op:S,field:a,as:`upper_${a}`},{op:T,field:a,as:`center_${a}`}],_=[{fieldPrefix:"upper_",titlePrefix:Zh({field:a,aggregate:S,type:"quantitative"},d,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Zh({field:a,aggregate:b,type:"quantitative"},d,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Zh({field:a,aggregate:T,type:"quantitative"},d,{allowDisabling:!1})}]}}else{(t.center||t.extent)&&be(VFe(t.center,t.extent)),o==="aggregated-upper-lower"?(_=[],u=[{calculate:`datum["${n.field}"]`,as:`upper_${a}`},{calculate:`datum["${a}"]`,as:`lower_${a}`}]):o==="aggregated-error"&&(_=[{fieldPrefix:"",titlePrefix:a}],u=[{calculate:`datum["${a}"] + datum["${i.field}"]`,as:`upper_${a}`}],s?u.push({calculate:`datum["${a}"] + datum["${s.field}"]`,as:`lower_${a}`}):u.push({calculate:`datum["${a}"] - datum["${i.field}"]`,as:`lower_${a}`}));for(const m of u)_.push({fieldPrefix:m.as.substring(0,6),titlePrefix:gu(gu(m.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:u,errorBarSpecificAggregate:f,tooltipSummary:_,tooltipTitleWithFieldName:w}}function Ij(t,e,n){return`${Vm(t)} ${n} ${e}`}const BR="errorband",ROe=["band","borders"],LOe=new AS(BR,$K);function $K(t,{config:e}){t=Object.assign(Object.assign({},t),{encoding:NS(t.encoding,e)});const{transform:n,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:o,markDef:c,outerSpec:d,tooltipEncoding:f}=UK(t,BR,e),u=c,a=SR(u,s,i,o,e.errorband),_=t.encoding.x!==void 0&&t.encoding.y!==void 0;let w={type:_?"area":"rect"},m={type:_?"line":"rule"};const l=Object.assign(Object.assign({},u.interpolate?{interpolate:u.interpolate}:{}),u.tension&&u.interpolate?{tension:u.tension}:{});return _?(w=Object.assign(Object.assign(Object.assign({},w),l),{ariaRoleDescription:"errorband"}),m=Object.assign(Object.assign(Object.assign({},m),l),{aria:!1})):u.interpolate?be(wj("interpolate")):u.tension&&be(wj("tension")),Object.assign(Object.assign({},d),{transform:n,layer:[...a({partName:"band",mark:w,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:f}),...a({partName:"borders",mark:m,positionPrefix:"lower",extraEncoding:f}),...a({partName:"borders",mark:m,positionPrefix:"upper",extraEncoding:f})]})}const zK={};function kR(t,e,n){const i=new AS(t,e);zK[t]={normalizer:i,parts:n}}function POe(){return we(zK)}kR(m1,PK,xOe);kR(xR,jK,IOe);kR(BR,$K,ROe);const DOe=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],qK={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},GK={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},jOe=we(qK),UOe=we(GK),$Oe={header:1,headerRow:1,headerColumn:1,headerFacet:1},VK=we($Oe),WK=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],zOe={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},qOe={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Jo="_vgsid_",GOe={point:{on:"click",fields:[Jo],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function IR(t){return t==="legend"||!!(t!=null&&t.legend)}function MB(t){return IR(t)&&Fe(t)}function FR(t){return!!(t!=null&&t.select)}var VOe=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};function HK(t){const e=[];for(const n of t||[]){if(FR(n))continue;const{expr:i,bind:s}=n,o=VOe(n,["expr","bind"]);if(s&&i){const c=Object.assign(Object.assign({},o),{bind:s,init:i});e.push(c)}else{const c=Object.assign(Object.assign(Object.assign({},o),i?{update:i}:{}),s?{bind:s}:{});e.push(c)}}return e}function WOe(t){return CS(t)||MR(t)||OR(t)}function OR(t){return"concat"in t}function CS(t){return"vconcat"in t}function MR(t){return"hconcat"in t}function YK({step:t,offsetIsDiscrete:e}){var n;return e?(n=t.for)!==null&&n!==void 0?n:"offset":"position"}function Qo(t){return Fe(t)&&t.step!==void 0}function Fj(t){return t.view||t.width||t.height}const Oj=20,HOe={align:1,bounds:1,center:1,columns:1,spacing:1},YOe=we(HOe);function XOe(t,e,n){var i,s;const o=n[e],c={},{spacing:d,columns:f}=o;d!==void 0&&(c.spacing=d),f!==void 0&&(kS(t)&&!Zm(t.facet)||OR(t))&&(c.columns=f),CS(t)&&(c.columns=1);for(const u of YOe)if(t[u]!==void 0)if(u==="spacing"){const a=t[u];c[u]=cn(a)?a:{row:(i=a.row)!==null&&i!==void 0?i:d,column:(s=a.column)!==null&&s!==void 0?s:d}}else c[u]=t[u];return c}var KOe=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};function mF(t,e){var n;return(n=t[e])!==null&&n!==void 0?n:t[e==="width"?"continuousWidth":"continuousHeight"]}function w1(t,e){const n=b1(t,e);return Qo(n)?n.step:XK}function b1(t,e){var n;const i=(n=t[e])!==null&&n!==void 0?n:t[e==="width"?"discreteWidth":"discreteHeight"];return zn(i,{step:t.step})}const XK=20,JOe={continuousWidth:200,continuousHeight:200,step:XK},QOe={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:JOe,mark:z2e,arc:{},area:{},bar:V2e,circle:{},geoshape:{},image:{},line:{},point:{},rect:W2e,rule:{color:"black"},square:{},text:{color:"black"},tick:H2e,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:S2e,projection:{},legend:zOe,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:GOe,style:{},title:{},facet:{spacing:Oj},concat:{spacing:Oj},normalizedNumberFormat:".0%"},wl=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Mj={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},Aj={blue:wl[0],orange:wl[1],red:wl[2],teal:wl[3],green:wl[4],yellow:wl[5],purple:wl[6],pink:wl[7],brown:wl[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function ZOe(t={}){return{signals:[{name:"color",value:Fe(t)?Object.assign(Object.assign({},Aj),t):Aj}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function eMe(t){return{signals:[{name:"fontSize",value:Fe(t)?Object.assign(Object.assign({},Mj),t):Mj}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function tMe(t){return{text:{font:t},style:{"guide-label":{font:t},"guide-title":{font:t},"group-title":{font:t},"group-subtitle":{font:t}}}}function KK(t){const e=we(t||{}),n={};for(const i of e){const s=t[i];n[i]=nw(s)?FX(s):ur(s)}return n}function nMe(t){const e=we(t),n={};for(const i of e)n[i]=KK(t[i]);return n}const iMe=[...oK,...IK,...VK,"background","padding","legend","lineBreak","scale","style","title","view"];function JK(t={}){const{color:e,font:n,fontSize:i,selection:s}=t,o=KOe(t,["color","font","fontSize","selection"]),c=hg({},ft(QOe),n?tMe(n):{},e?ZOe(e):{},i?eMe(i):{},o||{});s&&pg(c,"selection",s,!0);const d=Ls(c,iMe);for(const f of["background","lineBreak","padding"])c[f]&&(d[f]=ur(c[f]));for(const f of oK)c[f]&&(d[f]=Fs(c[f]));for(const f of IK)c[f]&&(d[f]=KK(c[f]));for(const f of VK)c[f]&&(d[f]=Fs(c[f]));return c.legend&&(d.legend=Fs(c.legend)),c.scale&&(d.scale=Fs(c.scale)),c.style&&(d.style=nMe(c.style)),c.title&&(d.title=Fs(c.title)),c.view&&(d.view=Fs(c.view)),d}const sMe=new Set(["view",...L2e]),rMe=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],aMe=Object.assign({view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"]},$2e);function oMe(t){t=ft(t);for(const e of rMe)delete t[e];if(t.axis)for(const e in t.axis)nw(t.axis[e])&&delete t.axis[e];if(t.legend)for(const e of DOe)delete t.legend[e];if(t.mark){for(const e of Tj)delete t.mark[e];t.mark.tooltip&&Fe(t.mark.tooltip)&&delete t.mark.tooltip}t.params&&(t.signals=(t.signals||[]).concat(HK(t.params)),delete t.params);for(const e of sMe){for(const i of Tj)delete t[e][i];const n=aMe[e];if(n)for(const i of n)delete t[e][i];cMe(t,e)}for(const e of POe())delete t[e];lMe(t);for(const e in t)Fe(t[e])&&ln(t[e])&&delete t[e];return ln(t)?void 0:t}function lMe(t){const{titleMarkConfig:e,subtitleMarkConfig:n,subtitle:i}=IX(t.title);ln(e)||(t.style["group-title"]=Object.assign(Object.assign({},t.style["group-title"]),e)),ln(n)||(t.style["group-subtitle"]=Object.assign(Object.assign({},t.style["group-subtitle"]),n)),ln(i)?delete t.title:t.title=i}function cMe(t,e,n,i){const s=i?t[e][i]:t[e];e==="view"&&(n="cell");const o=Object.assign(Object.assign({},s),t.style[n!=null?n:e]);ln(o)||(t.style[n!=null?n:e]=o),i||delete t[e]}function RS(t){return"layer"in t}function dMe(t){return"repeat"in t}function fMe(t){return!he(t.repeat)&&t.repeat.layer}var uMe=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};class AR{map(e,n){return kS(e)?this.mapFacet(e,n):dMe(e)?this.mapRepeat(e,n):MR(e)?this.mapHConcat(e,n):CS(e)?this.mapVConcat(e,n):OR(e)?this.mapConcat(e,n):this.mapLayerOrUnit(e,n)}mapLayerOrUnit(e,n){if(RS(e))return this.mapLayer(e,n);if(fc(e))return this.mapUnit(e,n);throw new Error(HC(e))}mapLayer(e,n){return Object.assign(Object.assign({},e),{layer:e.layer.map(i=>this.mapLayerOrUnit(i,n))})}mapHConcat(e,n){return Object.assign(Object.assign({},e),{hconcat:e.hconcat.map(i=>this.map(i,n))})}mapVConcat(e,n){return Object.assign(Object.assign({},e),{vconcat:e.vconcat.map(i=>this.map(i,n))})}mapConcat(e,n){const{concat:i}=e,s=uMe(e,["concat"]);return Object.assign(Object.assign({},s),{concat:i.map(o=>this.map(o,n))})}mapFacet(e,n){return Object.assign(Object.assign({},e),{spec:this.map(e.spec,n)})}mapRepeat(e,n){return Object.assign(Object.assign({},e),{spec:this.map(e.spec,n)})}}const hMe={zero:1,center:1,normalize:1};function pMe(t){return t in hMe}const gMe=new Set([iK,ES,vS,h1,xS,dR,fR,SS,sK,cR]),_Me=new Set([ES,vS,iK]);function uh(t){return Te(t)&&Wp(t)==="quantitative"&&!t.bin}function Nj(t,e){var n,i;const s=e==="x"?"y":"radius",o=t[e],c=t[s];if(Te(o)&&Te(c))if(uh(o)&&uh(c)){if(o.stack)return e;if(c.stack)return s;const d=Te(o)&&!!o.aggregate,f=Te(c)&&!!c.aggregate;if(d!==f)return d?e:s;{const u=(n=o.scale)===null||n===void 0?void 0:n.type,a=(i=c.scale)===null||i===void 0?void 0:i.type;if(u&&u!=="linear")return s;if(a&&a!=="linear")return e}}else{if(uh(o))return e;if(uh(c))return s}else{if(uh(o))return e;if(uh(c))return s}}function yMe(t){switch(t){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function QK(t,e){var n,i;const s=Xo(t)?t.type:t;if(!gMe.has(s))return null;const o=Nj(e,"x")||Nj(e,"theta");if(!o)return null;const c=e[o],d=Te(c)?xe(c,{}):void 0,f=yMe(o),u=[],a=new Set;if(e[f]){const m=e[f],l=Te(m)?xe(m,{}):void 0;l&&l!==d&&(u.push(f),a.add(l));const T=f==="x"?"xOffset":"yOffset",b=e[T],S=Te(b)?xe(b,{}):void 0;S&&S!==d&&(u.push(T),a.add(S))}const _=xIe.reduce((m,l)=>{if(l!=="tooltip"&&Yf(e,l)){const T=e[l];for(const b of Ie(T)){const S=Ko(b);if(S.aggregate)continue;const x=xe(S,{});(!x||!a.has(x))&&m.push({channel:l,fieldDef:S})}}return m},[]);let w;return c.stack!==void 0?Dd(c.stack)?w=c.stack?"zero":null:w=c.stack:_Me.has(s)&&(w="zero"),!w||!pMe(w)||TR(e)&&_.length===0?null:((n=c==null?void 0:c.scale)===null||n===void 0?void 0:n.type)&&((i=c==null?void 0:c.scale)===null||i===void 0?void 0:i.type)!==Ps.LINEAR?(be(zFe(c.scale.type)),null):Ze(e[ul(o)])?(c.stack!==void 0&&be($Fe(o)),null):(Te(c)&&c.aggregate&&!PIe.has(c.aggregate)&&be(qFe(c.aggregate)),{groupbyChannels:u,groupbyFields:a,fieldChannel:o,impute:c.impute===null?!1:Xd(s),stackBy:_,offset:w})}var ZK=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};function mMe(t){const e=ZK(t,["point","line"]);return we(e).length>1?e:e.type}function wMe(t){for(const e of["line","area","rule","trail"])t[e]&&(t=Object.assign(Object.assign({},t),{[e]:Ls(t[e],["point","line"])}));return t}function AB(t,e={},n){return t.point==="transparent"?{opacity:0}:t.point?Fe(t.point)?t.point:{}:t.point!==void 0?null:e.point||n.shape?Fe(e.point)?e.point:{}:void 0}function Cj(t,e={}){return t.line?t.line===!0?{}:t.line:t.line!==void 0?null:e.line?e.line===!0?{}:e.line:void 0}class bMe{constructor(){this.name="path-overlay"}hasMatchingType(e,n){if(fc(e)){const{mark:i,encoding:s}=e,o=Xo(i)?i:{type:i};switch(o.type){case"line":case"rule":case"trail":return!!AB(o,n[o.type],s);case"area":return!!AB(o,n[o.type],s)||!!Cj(o,n[o.type])}}return!1}run(e,n,i){const{config:s}=n,{params:o,projection:c,mark:d,encoding:f}=e,u=ZK(e,["params","projection","mark","encoding"]),a=NS(f,s),_=Xo(d)?d:{type:d},w=AB(_,s[_.type],a),m=_.type==="area"&&Cj(_,s[_.type]),l=[Object.assign(Object.assign({},o?{params:o}:{}),{mark:mMe(Object.assign(Object.assign({},_.type==="area"&&_.opacity===void 0&&_.fillOpacity===void 0?{opacity:.7}:{}),_)),encoding:Ls(a,["shape"])})],T=QK(_,a);let b=a;if(T){const{fieldChannel:S,offset:x}=T;b=Object.assign(Object.assign({},a),{[S]:Object.assign(Object.assign({},a[S]),x?{stack:x}:{})})}return b=Ls(b,["y2","x2"]),m&&l.push(Object.assign(Object.assign({},c?{projection:c}:{}),{mark:Object.assign(Object.assign({type:"line"},$p(_,["clip","interpolate","tension","tooltip"])),m),encoding:b})),w&&l.push(Object.assign(Object.assign({},c?{projection:c}:{}),{mark:Object.assign(Object.assign({type:"point",opacity:1,filled:!0},$p(_,["clip","tooltip"])),w),encoding:b})),i(Object.assign(Object.assign({},u),{layer:l}),Object.assign(Object.assign({},n),{config:wMe(s)}))}}var TMe=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};function vMe(t,e){return e?Zm(t)?tJ(t,e):eJ(t,e):t}function NB(t,e){return e?tJ(t,e):t}function wF(t,e,n){const i=e[t];if(iOe(i)){if(i.repeat in n)return Object.assign(Object.assign({},e),{[t]:n[i.repeat]});be(iFe(i.repeat));return}return e}function eJ(t,e){if(t=wF("field",t,e),t!==void 0){if(t===null)return null;if(yR(t)&&Mo(t.sort)){const n=wF("field",t.sort,e);t=Object.assign(Object.assign({},t),n?{sort:n}:{})}return t}}function Rj(t,e){if(Te(t))return eJ(t,e);{const n=wF("datum",t,e);return n!==t&&!n.type&&(n.type="nominal"),n}}function Lj(t,e){if(Ze(t)){const n=Rj(t,e);if(n)return n;if(IS(t))return{condition:t.condition}}else{if(ew(t)){const n=Rj(t.condition,e);return n?Object.assign(Object.assign({},t),{condition:n}):TMe(t,["condition"])}return t}}function tJ(t,e){const n={};for(const i in t)if(Le(t,i)){const s=t[i];if(he(s))n[i]=s.map(o=>Lj(o,e)).filter(o=>o);else{const o=Lj(s,e);o!==void 0&&(n[i]=o)}}return n}class EMe{constructor(){this.name="RuleForRangedLine"}hasMatchingType(e){if(fc(e)){const{encoding:n,mark:i}=e;if(i==="line"||Xo(i)&&i.type==="line")for(const s of vIe){const o=Hu(s),c=n[o];if(n[s]&&(Te(c)&&!Ei(c.bin)||pl(c)))return!0}}return!1}run(e,n,i){const{encoding:s,mark:o}=e;return be(SFe(!!s.x2,!!s.y2)),i(Object.assign(Object.assign({},e),{mark:Fe(o)?Object.assign(Object.assign({},o),{type:"rule"}):"rule"}),n)}}var mc=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};class SMe extends AR{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[BOe,FOe,LOe,new bMe,new EMe]}map(e,n){if(fc(e)){const i=Yf(e.encoding,zl),s=Yf(e.encoding,ql),o=Yf(e.encoding,hS);if(i||s||o)return this.mapFacetedUnit(e,n)}return super.map(e,n)}mapUnit(e,n){const{parentEncoding:i,parentProjection:s}=n,o=NB(e.encoding,n.repeater),c=Object.assign(Object.assign({},e),o?{encoding:o}:{});if(i||s)return this.mapUnitWithParentEncodingOrProjection(c,n);const d=this.mapLayerOrUnit.bind(this);for(const f of this.nonFacetUnitNormalizers)if(f.hasMatchingType(c,n.config))return f.run(c,n,d);return c}mapRepeat(e,n){return fMe(e)?this.mapLayerRepeat(e,n):this.mapNonLayerRepeat(e,n)}mapLayerRepeat(e,n){const{repeat:i,spec:s}=e,o=mc(e,["repeat","spec"]),{row:c,column:d,layer:f}=i,{repeater:u={},repeaterPrefix:a=""}=n;return c||d?this.mapRepeat(Object.assign(Object.assign({},e),{repeat:Object.assign(Object.assign({},c?{row:c}:{}),d?{column:d}:{}),spec:{repeat:{layer:f},spec:s}}),n):Object.assign(Object.assign({},o),{layer:f.map(_=>{const w=Object.assign(Object.assign({},u),{layer:_}),m=`${(s.name||"")+a}child__layer_${xn(_)}`,l=this.mapLayerOrUnit(s,Object.assign(Object.assign({},n),{repeater:w,repeaterPrefix:m}));return l.name=m,l})})}mapNonLayerRepeat(e,n){var i;const{repeat:s,spec:o,data:c}=e,d=mc(e,["repeat","spec","data"]);!he(s)&&e.columns&&(e=Ls(e,["columns"]),be(gj("repeat")));const f=[],{repeater:u={},repeaterPrefix:a=""}=n,_=!he(s)&&s.row||[u?u.row:null],w=!he(s)&&s.column||[u?u.column:null],m=he(s)&&s||[u?u.repeat:null];for(const T of m)for(const b of _)for(const S of w){const x={repeat:T,row:b,column:S,layer:u.layer},B=(o.name||"")+a+"child__"+(he(s)?`${xn(T)}`:(s.row?`row_${xn(b)}`:"")+(s.column?`column_${xn(S)}`:"")),F=this.map(o,Object.assign(Object.assign({},n),{repeater:x,repeaterPrefix:B}));F.name=B,f.push(Ls(F,["data"]))}const l=he(s)?e.columns:s.column?s.column.length:1;return Object.assign(Object.assign({data:(i=o.data)!==null&&i!==void 0?i:c,align:"all"},d),{columns:l,concat:f})}mapFacet(e,n){const{facet:i}=e;return Zm(i)&&e.columns&&(e=Ls(e,["columns"]),be(gj("facet"))),super.mapFacet(e,n)}mapUnitWithParentEncodingOrProjection(e,n){const{encoding:i,projection:s}=e,{parentEncoding:o,parentProjection:c,config:d}=n,f=Dj({parentProjection:c,projection:s}),u=Pj({parentEncoding:o,encoding:NB(i,n.repeater)});return this.mapUnit(Object.assign(Object.assign(Object.assign({},e),f?{projection:f}:{}),u?{encoding:u}:{}),{config:d})}mapFacetedUnit(e,n){const i=e.encoding,{row:s,column:o,facet:c}=i,d=mc(i,["row","column","facet"]),{mark:f,width:u,projection:a,height:_,view:w,params:m,encoding:l}=e,T=mc(e,["mark","width","projection","height","view","params","encoding"]),{facetMapping:b,layout:S}=this.getFacetMappingAndLayout({row:s,column:o,facet:c},n),x=NB(d,n.repeater);return this.mapFacet(Object.assign(Object.assign(Object.assign({},T),S),{facet:b,spec:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},u?{width:u}:{}),_?{height:_}:{}),w?{view:w}:{}),a?{projection:a}:{}),{mark:f,encoding:x}),m?{params:m}:{})}),n)}getFacetMappingAndLayout(e,n){var i;const{row:s,column:o,facet:c}=e;if(s||o){c&&be(vFe([...s?[zl]:[],...o?[ql]:[]]));const d={},f={};for(const u of[zl,ql]){const a=e[u];if(a){const _=mc(a,["align","center","spacing","columns"]);d[u]=_;for(const w of["align","center","spacing"])a[w]!==void 0&&((i=f[w])!==null&&i!==void 0||(f[w]={}),f[w][u]=a[w])}}return{facetMapping:d,layout:f}}else{const{align:d,center:f,spacing:u,columns:a}=c,_=mc(c,["align","center","spacing","columns"]);return{facetMapping:vMe(_,n.repeater),layout:Object.assign(Object.assign(Object.assign(Object.assign({},d?{align:d}:{}),f?{center:f}:{}),u?{spacing:u}:{}),a?{columns:a}:{})}}}mapLayer(e,n){var{parentEncoding:i,parentProjection:s}=n,o=mc(n,["parentEncoding","parentProjection"]);const{encoding:c,projection:d}=e,f=mc(e,["encoding","projection"]),u=Object.assign(Object.assign({},o),{parentEncoding:Pj({parentEncoding:i,encoding:c,layer:!0}),parentProjection:Dj({parentProjection:s,projection:d})});return super.mapLayer(f,u)}}function Pj({parentEncoding:t,encoding:e={},layer:n}){let i={};if(t){const s=new Set([...we(t),...we(e)]);for(const o of s){const c=e[o],d=t[o];if(Ze(c)){const f=Object.assign(Object.assign({},d),c);i[o]=f}else ew(c)?i[o]=Object.assign(Object.assign({},c),{condition:Object.assign(Object.assign({},d),c.condition)}):c||c===null?i[o]=c:(n||Da(d)||Re(d)||Ze(d)||he(d))&&(i[o]=d)}}else i=e;return!i||ln(i)?void 0:i}function Dj(t){const{parentProjection:e,projection:n}=t;return e&&n&&be(cFe({parentProjection:e,projection:n})),n!=null?n:e}function NR(t){return"filter"in t}function xMe(t){return(t==null?void 0:t.stop)!==void 0}function nJ(t){return"lookup"in t}function BMe(t){return"data"in t}function kMe(t){return"param"in t}function IMe(t){return"pivot"in t}function FMe(t){return"density"in t}function OMe(t){return"quantile"in t}function MMe(t){return"regression"in t}function AMe(t){return"loess"in t}function NMe(t){return"sample"in t}function CMe(t){return"window"in t}function RMe(t){return"joinaggregate"in t}function LMe(t){return"flatten"in t}function PMe(t){return"calculate"in t}function iJ(t){return"bin"in t}function DMe(t){return"impute"in t}function jMe(t){return"timeUnit"in t}function UMe(t){return"aggregate"in t}function $Me(t){return"stack"in t}function zMe(t){return"fold"in t}function qMe(t){return t.map(e=>NR(e)?{filter:Jh(e.filter,_2e)}:e)}var Jc=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};class GMe extends AR{map(e,n){var i,s;return(i=n.emptySelections)!==null&&i!==void 0||(n.emptySelections={}),(s=n.selectionPredicates)!==null&&s!==void 0||(n.selectionPredicates={}),e=jj(e,n),super.map(e,n)}mapLayerOrUnit(e,n){if(e=jj(e,n),e.encoding){const i={};for(const[s,o]of bd(e.encoding))i[s]=sJ(o,n);e=Object.assign(Object.assign({},e),{encoding:i})}return super.mapLayerOrUnit(e,n)}mapUnit(e,n){const i=e,{selection:s}=i,o=Jc(i,["selection"]);return s?Object.assign(Object.assign({},o),{params:bd(s).map(([c,d])=>{var f;const u=d,{init:a,bind:_,empty:w}=u,m=Jc(u,["init","bind","empty"]);m.type==="single"?(m.type="point",m.toggle=!1):m.type==="multi"&&(m.type="point"),n.emptySelections[c]=w!=="none";for(const l of Hi((f=n.selectionPredicates[c])!==null&&f!==void 0?f:{}))l.empty=w!=="none";return{name:c,value:a,select:m,bind:_}})}):e}}function jj(t,e){const{transform:n}=t,i=Jc(t,["transform"]);if(n){const s=n.map(o=>{if(NR(o))return{filter:bF(o,e)};if(iJ(o)&&Yu(o.bin))return Object.assign(Object.assign({},o),{bin:rJ(o.bin)});if(nJ(o)){const c=o.from,{selection:d}=c,f=Jc(c,["selection"]);return d?Object.assign(Object.assign({},o),{from:Object.assign({param:d},f)}):o}return o});return Object.assign(Object.assign({},i),{transform:s})}return t}function sJ(t,e){var n,i;const s=ft(t);if(Te(s)&&Yu(s.bin)&&(s.bin=rJ(s.bin)),Ku(s)&&((i=(n=s.scale)===null||n===void 0?void 0:n.domain)===null||i===void 0?void 0:i.selection)){const o=s.scale.domain,{selection:c}=o,d=Jc(o,["selection"]);s.scale.domain=Object.assign(Object.assign({},d),c?{param:c}:{})}if(IS(s))if(he(s.condition))s.condition=s.condition.map(o=>{const{selection:c,param:d,test:f}=o,u=Jc(o,["selection","param","test"]);return d?o:Object.assign(Object.assign({},u),{test:bF(o,e)})});else{const o=sJ(s.condition,e),{selection:c,param:d,test:f}=o,u=Jc(o,["selection","param","test"]);s.condition=d?s.condition:Object.assign(Object.assign({},u),{test:bF(s.condition,e)})}return s}function rJ(t){const e=t.extent;if(e!=null&&e.selection){const{selection:n}=e,i=Jc(e,["selection"]);return Object.assign(Object.assign({},t),{extent:Object.assign(Object.assign({},i),{param:n})})}return t}function bF(t,e){const n=i=>Jh(i,s=>{var o,c,d;const f=(o=e.emptySelections[s])!==null&&o!==void 0?o:!0,u={param:s,empty:f};return(c=(d=e.selectionPredicates)[s])!==null&&c!==void 0||(d[s]=[]),e.selectionPredicates[s].push(u),u});return t.selection?n(t.selection):Jh(t.test||t.filter,i=>i.selection?n(i.selection):i)}class TF extends AR{map(e,n){var i;const s=(i=n.selections)!==null&&i!==void 0?i:[];if(e.params&&!fc(e)){const o=[];for(const c of e.params)FR(c)?s.push(c):o.push(c);e.params=o}return n.selections=s,super.map(e,aJ(e,n))}mapUnit(e,n){var i;const s=n.selections;if(!s||!s.length)return e;const o=((i=n.path)!==null&&i!==void 0?i:[]).concat(e.name),c=[];for(const d of s)if(!d.views||!d.views.length)c.push(d);else for(const f of d.views)(ke(f)&&(f===e.name||o.indexOf(f)>=0)||he(f)&&f.map(u=>o.indexOf(u)).every((u,a,_)=>u!==-1&&(a===0||u>_[a-1])))&&c.push(d);return c.length&&(e.params=c),e}}for(const t of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const e=TF.prototype[t];TF.prototype[t]=function(n,i){return e.call(this,n,aJ(n,i))}}function aJ(t,e){var n;return t.name?Object.assign(Object.assign({},e),{path:((n=e.path)!==null&&n!==void 0?n:[]).concat(t.name)}):e}function oJ(t,e){e===void 0&&(e=JK(t.config));const n=YMe(t,e),{width:i,height:s}=t,o=XMe(n,{width:i,height:s,autosize:t.autosize},e);return Object.assign(Object.assign({},n),o?{autosize:o}:{})}const VMe=new SMe,WMe=new GMe,HMe=new TF;function YMe(t,e={}){const n={config:e};return HMe.map(VMe.map(WMe.map(t,n),n),n)}function Uj(t){return ke(t)?{type:t}:t!=null?t:{}}function XMe(t,e,n){let{width:i,height:s}=e;const o=fc(t)||RS(t),c={};o?i=="container"&&s=="container"?(c.type="fit",c.contains="padding"):i=="container"?(c.type="fit-x",c.contains="padding"):s=="container"&&(c.type="fit-y",c.contains="padding"):(i=="container"&&(be(fj("width")),i=void 0),s=="container"&&(be(fj("height")),s=void 0));const d=Object.assign(Object.assign(Object.assign({type:"pad"},c),n?Uj(n.autosize):{}),Uj(t.autosize));if(d.type==="fit"&&!o&&(be(HIe),d.type="pad"),i=="container"&&!(d.type=="fit"||d.type=="fit-x")&&be(uj("width")),s=="container"&&!(d.type=="fit"||d.type=="fit-y")&&be(uj("height")),!Eo(d,{type:"pad"}))return d}function KMe(t){return t==="fit"||t==="fit-x"||t==="fit-y"}function JMe(t){return t?`fit-${mS(t)}`:"fit"}const QMe=["background","padding"];function $j(t,e){const n={};for(const i of QMe)t&&t[i]!==void 0&&(n[i]=ur(t[i]));return e&&(n.params=t.params),n}class uc{constructor(e={},n={}){this.explicit=e,this.implicit=n}clone(){return new uc(ft(this.explicit),ft(this.implicit))}combine(){return Object.assign(Object.assign({},this.explicit),this.implicit)}get(e){return zn(this.explicit[e],this.implicit[e])}getWithExplicit(e){return this.explicit[e]!==void 0?{explicit:!0,value:this.explicit[e]}:this.implicit[e]!==void 0?{explicit:!1,value:this.implicit[e]}:{explicit:!1,value:void 0}}setWithExplicit(e,{value:n,explicit:i}){n!==void 0&&this.set(e,n,i)}set(e,n,i){return delete this[i?"implicit":"explicit"][e],this[i?"explicit":"implicit"][e]=n,this}copyKeyFromSplit(e,{explicit:n,implicit:i}){n[e]!==void 0?this.set(e,n[e],!0):i[e]!==void 0&&this.set(e,i[e],!1)}copyKeyFromObject(e,n){n[e]!==void 0&&this.set(e,n[e],!0)}copyAll(e){for(const n of we(e.combine())){const i=e.getWithExplicit(n);this.setWithExplicit(n,i)}}}function eo(t){return{explicit:!0,value:t}}function ir(t){return{explicit:!1,value:t}}function lJ(t){return(e,n,i,s)=>{const o=t(e.value,n.value);return o>0?e:o<0?n:LS(e,n,i,s)}}function LS(t,e,n,i){return t.explicit&&e.explicit&&be(CFe(n,i,t.value,e.value)),t}function vd(t,e,n,i,s=LS){return t===void 0||t.value===void 0?e:t.explicit&&!e.explicit?t:e.explicit&&!t.explicit?e:Eo(t.value,e.value)?t:s(t,e,n,i)}class ZMe extends uc{constructor(e={},n={},i=!1){super(e,n),this.explicit=e,this.implicit=n,this.parseNothing=i}clone(){const e=super.clone();return e.parseNothing=this.parseNothing,e}}function Xp(t){return"url"in t}function zy(t){return"values"in t}function cJ(t){return"name"in t&&!Xp(t)&&!zy(t)&&!Qc(t)}function Qc(t){return t&&(dJ(t)||fJ(t)||CR(t))}function dJ(t){return"sequence"in t}function fJ(t){return"sphere"in t}function CR(t){return"graticule"in t}var _n;(function(t){t[t.Raw=0]="Raw",t[t.Main=1]="Main",t[t.Row=2]="Row",t[t.Column=3]="Column",t[t.Lookup=4]="Lookup"})(_n||(_n={}));var eAe=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};function Tu(t,e=!0,n=Xi){if(he(t)){const i=t.map(s=>Tu(s,e,n));return e?`[${i.join(", ")}]`:i}else if(Xu(t))return n(e?$y(t):r2e(t));return e?n(yn(t)):t}function tAe(t,e){var n;for(const i of Hi((n=t.component.selection)!==null&&n!==void 0?n:{})){const s=i.name;let o=`${s}${xd}, ${i.resolve==="global"?"true":`{unit: ${Kp(t)}}`}`;for(const c of DS)!c.defined(i)||(c.signals&&(e=c.signals(t,i,e)),c.modifyExpr&&(o=c.modifyExpr(t,i,o)));e.push({name:s+CAe,on:[{events:{signal:i.name+xd},update:`modify(${Se(i.name+vu)}, ${o})`}]})}return RR(e)}function nAe(t,e){if(t.component.selection&&we(t.component.selection).length){const n=Se(t.getName("cell"));e.unshift({name:"facet",value:{},on:[{events:Ud("mousemove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return RR(e)}function iAe(t,e){var n;let i=!1;for(const s of Hi((n=t.component.selection)!==null&&n!==void 0?n:{})){const o=s.name,c=Se(o+vu);if(e.filter(f=>f.name===o).length===0){const f=s.resolve==="global"?"union":s.resolve,u=s.type==="point"?", true, true)":")";e.push({name:s.name,update:`${kJ}(${c}, ${Se(f)}${u}`})}i=!0;for(const f of DS)f.defined(s)&&f.topLevelSignals&&(e=f.topLevelSignals(t,s,e))}return i&&e.filter(o=>o.name==="unit").length===0&&e.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]}),RR(e)}function sAe(t,e){var n;const i=[...e],s=Kp(t,{escape:!1});for(const o of Hi((n=t.component.selection)!==null&&n!==void 0?n:{})){const c={name:o.name+vu};if(o.project.hasSelectionId&&(c.transform=[{type:"collect",sort:{field:Jo}}]),o.init){const f=o.project.items.map(u=>eAe(u,["signals"]));c.values=o.project.hasSelectionId?o.init.map(u=>({unit:s,[Jo]:Tu(u,!1)[0]})):o.init.map(u=>({unit:s,fields:f,values:Tu(u,!1)}))}i.filter(f=>f.name===o.name+vu).length||i.push(c)}return i}function uJ(t,e){var n;for(const i of Hi((n=t.component.selection)!==null&&n!==void 0?n:{}))for(const s of DS)s.defined(i)&&s.marks&&(e=s.marks(t,i,e));return e}function rAe(t,e){for(const n of t.children)Dn(n)&&(e=uJ(n,e));return e}function aAe(t,e,n,i){const s=AJ(t,e.param,e);return{signal:Er(n.get("type"))&&he(i)&&i[0]>i[1]?`isValid(${s}) && reverse(${s})`:s}}function RR(t){return t.map(e=>(e.on&&!e.on.length&&delete e.on,e))}class fn{constructor(e,n){this.debugName=n,this._children=[],this._parent=null,e&&(this.parent=e)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(e){this._parent=e,e&&e.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(e,n){if(this._children.includes(e)){be(aFe);return}n!==void 0?this._children.splice(n,0,e):this._children.push(e)}removeChild(e){const n=this._children.indexOf(e);return this._children.splice(n,1),n}remove(){let e=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,e++)}insertAsParentOf(e){const n=e.parent;n.removeChild(this),this.parent=n,e.parent=this}swapWithParent(){const e=this._parent,n=e.parent;for(const s of this._children)s.parent=e;this._children=[],e.removeChild(this);const i=e.parent.removeChild(e);this._parent=n,n.addChild(this,i),e.parent=this}}class gs extends fn{constructor(e,n,i,s){super(e,n),this.type=i,this.refCounts=s,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}clone(){const e=new this.constructor;return e.debugName=`clone_${this.debugName}`,e._source=this._source,e._name=`clone_${this._name}`,e.type=this.type,e.refCounts=this.refCounts,e.refCounts[e._name]=0,e}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${uX()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(e){this._source=e}}var zj=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};class Ao extends fn{constructor(e,n){super(e),this.formula=n}clone(){return new Ao(null,ft(this.formula))}static makeFromEncoding(e,n){const i=n.reduceFieldDef((s,o)=>{const{field:c,timeUnit:d}=o;if(d){const f=xe(o,{forAs:!0});s[Pt({as:f,field:c,timeUnit:d})]={as:f,field:c,timeUnit:d}}return s},{});return ln(i)?null:new Ao(e,i)}static makeFromTransform(e,n){const i=Object.assign({},n),{timeUnit:s}=i,o=zj(i,["timeUnit"]),c=Ji(s),d=Object.assign(Object.assign({},o),{timeUnit:c});return new Ao(e,{[Pt(d)]:d})}merge(e){this.formula=Object.assign({},this.formula);for(const n in e.formula)this.formula[n]||(this.formula[n]=e.formula[n]);for(const n of e.children)e.removeChild(n),n.parent=this;e.remove()}removeFormulas(e){const n={};for(const[i,s]of bd(this.formula))e.has(s.as)||(n[i]=s);this.formula=n}producedFields(){return new Set(Hi(this.formula).map(e=>e.as))}dependentFields(){return new Set(Hi(this.formula).map(e=>e.field))}hash(){return`TimeUnit ${Pt(this.formula)}`}assemble(){const e=[];for(const n of Hi(this.formula)){const{field:i,as:s,timeUnit:o}=n,c=Ji(o),{unit:d,utc:f}=c,u=zj(c,["unit","utc"]);e.push(Object.assign(Object.assign(Object.assign(Object.assign({field:Jr(i),type:"timeunit"},d?{units:QC(d)}:{}),f?{timezone:"utc"}:{}),u),{as:[s,`${s}_end`]}))}return e}}var oAe=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};const iw="_tuple_fields";class lAe{constructor(...e){this.items=e,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const cAe={defined:()=>!0,parse:(t,e,n)=>{var i;const s=e.name,o=(i=e.project)!==null&&i!==void 0?i:e.project=new lAe,c={},d={},f=new Set,u=(T,b)=>{const S=b==="visual"?T.channel:T.field;let x=xn(`${s}_${S}`);for(let B=1;f.has(x);B++)x=xn(`${s}_${S}_${B}`);return f.add(x),{[b]:x}},a=e.type,_=t.config.selection[a],w=n.value!==void 0?Ie(n.value):null;let{fields:m,encodings:l}=Fe(n.select)?n.select:{};if(!m&&!l&&w){for(const T of w)if(!!Fe(T))for(const b of we(T))TIe(b)?(l||(l=[])).push(b):a==="interval"?(be(nFe),l=_.encodings):(m||(m=[])).push(b)}!m&&!l&&(l=_.encodings,"fields"in _&&(m=_.fields));for(const T of l!=null?l:[]){const b=t.fieldDef(T);if(b){let S=b.field;if(b.aggregate){be(YIe(T,b.aggregate));continue}else if(!S){be(pj(T));continue}if(b.timeUnit){S=t.vgField(T);const x={timeUnit:b.timeUnit,as:S,field:b.field};d[Pt(x)]=x}if(!c[S]){let x="E";if(a==="interval"){const F=t.getScaleComponent(T).get("type");Er(F)&&(x="R")}else b.bin&&(x="R-RE");const B={field:S,channel:T,type:x};B.signals=Object.assign(Object.assign({},u(B,"data")),u(B,"visual")),o.items.push(c[S]=B),o.hasField[S]=o.hasChannel[T]=c[S],o.hasSelectionId=o.hasSelectionId||S===Jo}}else be(pj(T))}for(const T of m!=null?m:[]){if(o.hasField[T])continue;const b={type:"E",field:T};b.signals=Object.assign({},u(b,"data")),o.items.push(b),o.hasField[T]=b,o.hasSelectionId=o.hasSelectionId||T===Jo}w&&(e.init=w.map(T=>o.items.map(b=>Fe(T)?T[b.channel]!==void 0?T[b.channel]:T[b.field]:T))),ln(d)||(o.timeUnit=new Ao(null,d))},signals:(t,e,n)=>{const i=e.name+iw;return n.filter(o=>o.name===i).length>0||e.project.hasSelectionId?n:n.concat({name:i,value:e.project.items.map(o=>{const c=oAe(o,["signals","hasLegend"]);return c.field=Jr(c.field),c})})}},Ed={defined:t=>t.type==="interval"&&t.resolve==="global"&&t.bind&&t.bind==="scales",parse:(t,e)=>{const n=e.scales=[];for(const i of e.project.items){const s=i.channel;if(!Wd(s))continue;const o=t.getScaleComponent(s),c=o?o.get("type"):void 0;if(!o||!Er(c)){be(JIe);continue}o.set("selectionExtent",{param:e.name,field:i.field},!0),n.push(i)}},topLevelSignals:(t,e,n)=>{const i=e.scales.filter(c=>n.filter(d=>d.name===c.signals.data).length===0);if(!t.parent||EF(t)||i.length===0)return n;const s=n.filter(c=>c.name===e.name)[0];let o=s.update;if(o.indexOf(kJ)>=0)s.update=`{${i.map(c=>`${Se(Jr(c.field))}: ${c.signals.data}`).join(", ")}}`;else{for(const c of i){const d=`${Se(Jr(c.field))}: ${c.signals.data}`;o.includes(d)||(o=`${o.substring(0,o.length-1)}, ${d}}`)}s.update=o}return n.concat(i.map(c=>({name:c.signals.data})))},signals:(t,e,n)=>{if(t.parent&&!EF(t))for(const i of e.scales){const s=n.filter(o=>o.name===i.signals.data)[0];s.push="outer",delete s.value,delete s.update}return n}};function vF(t,e){return`domain(${Se(t.scaleName(e))})`}function EF(t){var e;return t.parent&&Og(t.parent)&&((e=!t.parent.parent)!==null&&e!==void 0?e:EF(t.parent.parent))}var dAe=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};const ep="_brush",SF="_scale_trigger",fAe={defined:t=>t.type==="interval",signals:(t,e,n)=>{const i=e.name,s=i+iw,o=Ed.defined(e),c=e.init?e.init[0]:null,d=[],f=[];if(e.translate&&!o){const a=`!event.item || event.item.mark.name !== ${Se(i+ep)}`;hJ(e,(_,w)=>{var m,l;const T=Ie((m=(l=w.between[0]).filter)!==null&&m!==void 0?m:l.filter=[]);return T.includes(a)||T.push(a),_})}e.project.items.forEach((a,_)=>{const w=a.channel;if(w!==On&&w!==wi){be("Interval selections only support x and y encoding channels.");return}const m=c?c[_]:null,l=uAe(t,e,a,m),T=a.signals.data,b=a.signals.visual,S=Se(t.scaleName(w)),x=t.getScaleComponent(w).get("type"),B=Er(x)?"+":"";n.push(...l),d.push(T),f.push({scaleName:t.scaleName(w),expr:`(!isArray(${T}) || (${B}invert(${S}, ${b})[0] === ${B}${T}[0] && ${B}invert(${S}, ${b})[1] === ${B}${T}[1]))`})}),!o&&f.length&&n.push({name:i+SF,value:{},on:[{events:f.map(a=>({scale:a.scaleName})),update:`${f.map(a=>a.expr).join(" && ")} ? ${i+SF} : {}`}]});const u=`unit: ${Kp(t)}, fields: ${s}, values`;return n.concat(Object.assign(Object.assign({name:i+xd},c?{init:`{${u}: ${Tu(c)}}`}:{}),d.length?{on:[{events:[{signal:d.join(" || ")}],update:`${d.join(" && ")} ? {${u}: [${d}]} : null`}]}:{}))},marks:(t,e,n)=>{const i=e.name,{x:s,y:o}=e.project.hasChannel,c=s==null?void 0:s.signals.visual,d=o==null?void 0:o.signals.visual,f=`data(${Se(e.name+vu)})`;if(Ed.defined(e)||!s&&!o)return n;const u={x:s!==void 0?{signal:`${c}[0]`}:{value:0},y:o!==void 0?{signal:`${d}[0]`}:{value:0},x2:s!==void 0?{signal:`${c}[1]`}:{field:{group:"width"}},y2:o!==void 0?{signal:`${d}[1]`}:{field:{group:"height"}}};if(e.resolve==="global")for(const b of we(u))u[b]=[Object.assign({test:`${f}.length && ${f}[0].unit === ${Kp(t)}`},u[b]),{value:0}];const a=e.mark,{fill:_,fillOpacity:w,cursor:m}=a,l=dAe(a,["fill","fillOpacity","cursor"]),T=we(l).reduce((b,S)=>(b[S]=[{test:[s!==void 0&&`${c}[0] !== ${c}[1]`,o!==void 0&&`${d}[0] !== ${d}[1]`].filter(x=>x).join(" && "),value:l[S]},{value:null}],b),{});return[{name:`${i+ep}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:_},fillOpacity:{value:w}},update:u}},...n,{name:i+ep,type:"rect",clip:!0,encode:{enter:Object.assign(Object.assign({},m?{cursor:{value:m}}:{}),{fill:{value:"transparent"}}),update:Object.assign(Object.assign({},u),T)}}]}};function uAe(t,e,n,i){const s=n.channel,o=n.signals.visual,c=n.signals.data,d=Ed.defined(e),f=Se(t.scaleName(s)),u=t.getScaleComponent(s),a=u?u.get("type"):void 0,_=T=>`scale(${f}, ${T})`,w=t.getSizeSignalRef(s===On?"width":"height").signal,m=`${s}(unit)`,l=hJ(e,(T,b)=>[...T,{events:b.between[0],update:`[${m}, ${m}]`},{events:b,update:`[${o}[0], clamp(${m}, 0, ${w})]`}]);return l.push({events:{signal:e.name+SF},update:Er(a)?`[${_(`${c}[0]`)}, ${_(`${c}[1]`)}]`:"[0, 0]"}),d?[{name:c,on:[]}]:[Object.assign(Object.assign({name:o},i?{init:Tu(i,!0,_)}:{value:[]}),{on:l}),Object.assign(Object.assign({name:c},i?{init:Tu(i)}:{}),{on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${f}, ${o})`}]})]}function hJ(t,e){return t.events.reduce((n,i)=>i.between?e(n,i):(be(`${i} is not an ordered event stream for interval selections.`),n),[])}const hAe={defined:t=>t.type==="point",signals:(t,e,n)=>{var i;const s=e.name,o=s+iw,c=e.project,d="(item().isVoronoi ? datum.datum : datum)",f=Hi((i=t.component.selection)!==null&&i!==void 0?i:{}).reduce((w,m)=>m.type==="interval"?w.concat(m.name+ep):w,[]).map(w=>`indexof(item().mark.name, '${w}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${f?` && ${f}`:""}`;let a=`unit: ${Kp(t)}, `;if(e.project.hasSelectionId)a+=`${Jo}: ${d}[${Se(Jo)}]`;else{const w=c.items.map(m=>{const l=t.fieldDef(m.channel);return l!=null&&l.bin?`[${d}[${Se(t.vgField(m.channel,{}))}], ${d}[${Se(t.vgField(m.channel,{binSuffix:"end"}))}]]`:`${d}[${Se(m.field)}]`}).join(", ");a+=`fields: ${o}, values: [${w}]`}const _=e.events;return n.concat([{name:s+xd,on:_?[{events:_,update:`${u} ? {${a}} : null`,force:!0}]:[]}])}};function Bg(t,e,n,i){const s=IS(e)&&e.condition,o=i(e);if(s){const d=Ie(s).map(f=>{const u=i(f);if(nOe(f)){const{param:a,empty:_}=f,w=MJ(t,{param:a,empty:_});return Object.assign({test:w},u)}else{const a=E1(t,f.test);return Object.assign({test:a},u)}});return{[n]:[...d,...o!==void 0?[o]:[]]}}else return o!==void 0?{[n]:o}:{}}function LR(t,e="text"){const n=t.encoding[e];return Bg(t,n,e,i=>PS(i,t.config))}function PS(t,e,n="datum"){if(t){if(Da(t))return Tn(t.value);if(Ze(t)){const{format:i,formatType:s}=_1(t);return gR({fieldOrDatumDef:t,format:i,formatType:s,expr:n,config:e})}}}function pJ(t,e={}){const{encoding:n,markDef:i,config:s,stack:o}=t,c=n.tooltip;if(he(c))return{tooltip:qj({tooltip:c},o,s,e)};{const d=e.reactiveGeom?"datum.datum":"datum";return Bg(t,c,"tooltip",f=>{const u=PS(f,s,d);if(u)return u;if(f===null)return;let a=rn("tooltip",i,s);if(a===!0&&(a={content:"encoding"}),ke(a))return{value:a};if(Fe(a))return Re(a)?a:a.content==="encoding"?qj(n,o,s,e):{signal:d}})}}function gJ(t,e,n,{reactiveGeom:i}={}){const s={},o=i?"datum.datum":"datum",c=[];function d(u,a){const _=Hu(a),w=Zr(u)?u:Object.assign(Object.assign({},u),{type:t[_].type}),m=w.title||wR(w,n),l=Ie(m).join(", ");let T;if(bi(a)){const b=a==="x"?"x2":"y2",S=Ko(t[b]);if(Ei(w.bin)&&S){const x=xe(w,{expr:o}),B=xe(S,{expr:o}),{format:F,formatType:k}=_1(w);T=Qm(x,B,F,k,n),s[b]=!0}}if((bi(a)||a===ta||a===Wa)&&e&&e.fieldChannel===a&&e.offset==="normalize"){const{format:b,formatType:S}=_1(w);T=gR({fieldOrDatumDef:w,format:b,formatType:S,expr:o,config:n,normalizeStack:!0}).signal}T!=null||(T=PS(w,n,o).signal),c.push({channel:a,key:l,value:T})}vR(t,(u,a)=>{Te(u)?d(u,a):FS(u)&&d(u.condition,a)});const f={};for(const{channel:u,key:a,value:_}of c)!s[u]&&!f[a]&&(f[a]=_);return f}function qj(t,e,n,{reactiveGeom:i}={}){const s=gJ(t,e,n,{reactiveGeom:i}),o=bd(s).map(([c,d])=>`"${c}": ${d}`);return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function pAe(t){const{markDef:e,config:n}=t,i=rn("aria",e,n);return i===!1?{}:Object.assign(Object.assign(Object.assign({},i?{aria:i}:{}),gAe(t)),_Ae(t))}function gAe(t){const{mark:e,markDef:n,config:i}=t;if(i.aria===!1)return{};const s=rn("ariaRoleDescription",n,i);return s!=null?{ariaRoleDescription:{value:s}}:e in GIe?{}:{ariaRoleDescription:{value:e}}}function _Ae(t){const{encoding:e,markDef:n,config:i,stack:s}=t,o=e.description;if(o)return Bg(t,o,"description",f=>PS(f,t.config));const c=rn("description",n,i);if(c!=null)return{description:Tn(c)};if(i.aria===!1)return{};const d=gJ(e,s,i);if(!ln(d))return{description:{signal:bd(d).map(([f,u],a)=>`"${a>0?"; ":""}${f}: " + (${u})`).join(" + ")}}}function ui(t,e,n={}){const{markDef:i,encoding:s,config:o}=e,{vgChannel:c}=n;let{defaultRef:d,defaultValue:f}=n;d===void 0&&(f!=null||(f=rn(t,i,o,{vgChannel:c,ignoreVgConfig:!0})),f!==void 0&&(d=Tn(f)));const u=s[t];return Bg(e,u,c!=null?c:t,a=>pR({channel:t,channelDef:a,markDef:i,config:o,scaleName:e.scaleName(t),scale:e.getScaleComponent(t),stack:null,defaultRef:d}))}function _J(t,e={filled:void 0}){var n,i,s,o;const{markDef:c,encoding:d,config:f}=t,{type:u}=c,a=(n=e.filled)!==null&&n!==void 0?n:rn("filled",c,f),_=Mt(["bar","point","circle","square","geoshape"],u)?"transparent":void 0,w=(s=(i=rn(a===!0?"color":void 0,c,f,{vgChannel:"fill"}))!==null&&i!==void 0?i:f.mark[a===!0&&"color"])!==null&&s!==void 0?s:_,m=(o=rn(a===!1?"color":void 0,c,f,{vgChannel:"stroke"}))!==null&&o!==void 0?o:f.mark[a===!1&&"color"],l=a?"fill":"stroke",T=Object.assign(Object.assign({},w?{fill:Tn(w)}:{}),m?{stroke:Tn(m)}:{});return c.color&&(a?c.fill:c.stroke)&&be(DX("property",{fill:"fill"in c,stroke:"stroke"in c})),Object.assign(Object.assign(Object.assign(Object.assign({},T),ui("color",t,{vgChannel:l,defaultValue:a?w:m})),ui("fill",t,{defaultValue:d.fill?w:void 0})),ui("stroke",t,{defaultValue:d.stroke?m:void 0}))}function yAe(t){const{encoding:e,mark:n}=t,i=e.order;return!Xd(n)&&Da(i)?Bg(t,i,"zindex",s=>Tn(s.value)):{}}function qy({channel:t,markDef:e,encoding:n={},model:i,bandPosition:s}){const o=`${t}Offset`,c=e[o],d=n[o];if((o==="xOffset"||o==="yOffset")&&d)return{offsetType:"encoding",offset:pR({channel:o,channelDef:d,markDef:e,config:i==null?void 0:i.config,scaleName:i.scaleName(o),scale:i.getScaleComponent(o),stack:null,defaultRef:Tn(c),bandPosition:s})};const f=e[o];return f?{offsetType:"visual",offset:f}:{}}function $i(t,e,{defaultPos:n,vgChannel:i}){const{encoding:s,markDef:o,config:c,stack:d}=e,f=s[t],u=s[ul(t)],a=e.scaleName(t),_=e.getScaleComponent(t),{offset:w,offsetType:m}=qy({channel:t,markDef:o,encoding:s,model:e,bandPosition:.5}),l=PR({model:e,defaultPos:n,channel:t,scaleName:a,scale:_}),T=!f&&bi(t)&&(s.latitude||s.longitude)?{field:e.getName(t)}:mAe({channel:t,channelDef:f,channel2Def:u,markDef:o,config:c,scaleName:a,scale:_,stack:d,offset:w,defaultRef:l,bandPosition:m==="encoding"?0:void 0});return T?{[i||t]:T}:void 0}function mAe(t){const{channel:e,channelDef:n,scaleName:i,stack:s,offset:o,markDef:c}=t;if(Ze(n)&&s&&e===s.fieldChannel){if(Te(n)){let d=n.bandPosition;if(d===void 0&&c.type==="text"&&(e==="radius"||e==="theta")&&(d=.5),d!==void 0)return p1({scaleName:i,fieldOrDatumDef:n,startSuffix:"start",bandPosition:d,offset:o})}return Hf(n,i,{suffix:"end"},{offset:o})}return uR(t)}function PR({model:t,defaultPos:e,channel:n,scaleName:i,scale:s}){const{markDef:o,config:c}=t;return()=>{const d=Hu(n),f=Td(n),u=rn(n,o,c,{vgChannel:f});if(u!==void 0)return H_(n,u);switch(e){case"zeroOrMin":case"zeroOrMax":if(i){const a=s.get("type");if(!Mt([Ps.LOG,Ps.TIME,Ps.UTC],a)){if(s.domainDefinitelyIncludesZero())return{scale:i,value:0}}}if(e==="zeroOrMin")return d==="y"?{field:{group:"height"}}:{value:0};switch(d){case"radius":return{signal:`min(${t.width.signal},${t.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":{const a=t[Ks(n)];return Object.assign(Object.assign({},a),{mult:.5})}}}}const wAe={left:"x",center:"xc",right:"x2"},bAe={top:"y",middle:"yc",bottom:"y2"};function yJ(t,e,n,i="middle"){if(t==="radius"||t==="theta")return Td(t);const s=t==="x"?"align":"baseline",o=rn(s,e,n);let c;return Re(o)?(be(EFe(s)),c=void 0):c=o,t==="x"?wAe[c||(i==="top"?"left":"center")]:bAe[c||i]}function T1(t,e,{defaultPos:n,defaultPos2:i,range:s}){return s?mJ(t,e,{defaultPos:n,defaultPos2:i}):$i(t,e,{defaultPos:n})}function mJ(t,e,{defaultPos:n,defaultPos2:i}){const{markDef:s,config:o}=e,c=ul(t),d=Ks(t),f=TAe(e,i,c),u=f[d]?yJ(t,s,o):Td(t);return Object.assign(Object.assign({},$i(t,e,{defaultPos:n,vgChannel:u})),f)}function TAe(t,e,n){const{encoding:i,mark:s,markDef:o,stack:c,config:d}=t,f=Hu(n),u=Ks(n),a=Td(n),_=i[f],w=t.scaleName(f),m=t.getScaleComponent(f),{offset:l}=n in i||n in o?qy({channel:n,markDef:o,encoding:i,model:t}):qy({channel:f,markDef:o,encoding:i,model:t});if(!_&&(n==="x2"||n==="y2")&&(i.latitude||i.longitude)){const b=Ks(n),S=t.markDef[b];return S!=null?{[b]:{value:S}}:{[a]:{field:t.getName(n)}}}const T=vAe({channel:n,channelDef:_,channel2Def:i[n],markDef:o,config:d,scaleName:w,scale:m,stack:c,offset:l,defaultRef:void 0});return T!==void 0?{[a]:T}:n0(n,o)||n0(n,{[n]:f1(n,o,d.style),[u]:f1(u,o,d.style)})||n0(n,d[s])||n0(n,d.mark)||{[a]:PR({model:t,defaultPos:e,channel:n,scaleName:w,scale:m})()}}function vAe({channel:t,channelDef:e,channel2Def:n,markDef:i,config:s,scaleName:o,scale:c,stack:d,offset:f,defaultRef:u}){return Ze(e)&&d&&t.charAt(0)===d.fieldChannel.charAt(0)?Hf(e,o,{suffix:"start"},{offset:f}):uR({channel:t,channelDef:n,scaleName:o,scale:c,stack:d,markDef:i,config:s,offset:f,defaultRef:u})}function n0(t,e){const n=Ks(t),i=Td(t);if(e[i]!==void 0)return{[i]:H_(t,e[i])};if(e[t]!==void 0)return{[i]:H_(t,e[t])};if(e[n]){const s=e[n];if(wu(s))be(_Fe(n));else return{[n]:H_(t,s)}}}function Sd(t,e){var n,i;const{config:s,encoding:o,markDef:c}=t,d=c.type,f=ul(e),u=Ks(e),a=o[e],_=o[f],w=t.getScaleComponent(e),m=w?w.get("type"):void 0,l=c.orient,T=(i=(n=o[u])!==null&&n!==void 0?n:o.size)!==null&&i!==void 0?i:rn("size",c,s,{vgChannel:u}),b=d==="bar"&&(e==="x"?l==="vertical":l==="horizontal");return Te(a)&&(mn(a.bin)||Ei(a.bin)||a.timeUnit&&!_)&&!(T&&!wu(T))&&!Ti(m)?xAe({fieldDef:a,fieldDef2:_,channel:e,model:t}):(Ze(a)&&Ti(m)||b)&&!_?SAe(a,e,t):mJ(e,t,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function EAe(t,e,n,i,s){if(wu(s))if(n){const c=n.get("type");if(c==="band"){let d=`bandwidth('${e}')`;return s.band!==1&&(d=`${s.band} * ${d}`),{signal:`max(0.25, ${d})`}}else s.band!==1&&(be(kFe(c)),s=void 0)}else return{mult:s.band,field:{group:t}};else{if(Re(s))return s;if(s)return{value:s}}if(n){const c=n.get("range");if(Yd(c)&&cn(c.step))return{value:c.step-2}}return{value:w1(i.view,t)-2}}function SAe(t,e,n){const{markDef:i,encoding:s,config:o,stack:c}=n,d=i.orient,f=n.scaleName(e),u=n.getScaleComponent(e),a=Ks(e),_=ul(e),w=EIe(e),m=n.scaleName(w),l=d==="horizontal"&&e==="y"||d==="vertical"&&e==="x";let T;(s.size||i.size)&&(l?T=ui("size",n,{vgChannel:a,defaultRef:Tn(i.size)}):be(MFe(i.type)));const b=!!T,S=yK({channel:e,fieldDef:t,markDef:i,config:o,scaleType:u==null?void 0:u.get("type"),useVlSizeChannel:l});T=T||{[a]:EAe(a,m||f,u,o,S)};const x=(u==null?void 0:u.get("type"))==="band"&&wu(S)&&!b?"top":"middle",B=yJ(e,i,o,x),F=B==="xc"||B==="yc",{offset:k,offsetType:M}=qy({channel:e,markDef:i,encoding:s,model:n,bandPosition:F?.5:0}),A=uR({channel:e,channelDef:t,markDef:i,config:o,scaleName:f,scale:u,stack:c,offset:k,defaultRef:PR({model:n,defaultPos:"mid",channel:e,scaleName:f,scale:u}),bandPosition:F?M==="encoding"?0:.5:Re(S)?{signal:`(1-${S})/2`}:wu(S)?(1-S.band)/2:0});if(a)return Object.assign({[B]:A},T);{const R=Td(_),P=T[a],j=k?Object.assign(Object.assign({},P),{offset:k}):P;return{[B]:A,[R]:he(A)?[A[0],Object.assign(Object.assign({},A[1]),{offset:j})]:Object.assign(Object.assign({},A),{offset:j})}}}function t_(t,e,n,i,s){if(_X(t))return 0;const o=t==="x"||t==="y2"?-e/2:e/2;if(Re(n)||Re(s)||Re(i)){const c=Gl(n),d=Gl(s),f=Gl(i),u=f?`${f} + `:"",a=c?`(${c} ? -1 : 1) * `:"",_=d?`(${d} + ${o})`:o;return{signal:u+a+_}}else return s=s||0,i+(n?-s-o:+s+o)}function xAe({fieldDef:t,fieldDef2:e,channel:n,model:i}){var s,o,c;const{config:d,markDef:f,encoding:u}=i,a=i.getScaleComponent(n),_=i.scaleName(n),w=a?a.get("type"):void 0,m=a.get("reverse"),l=yK({channel:n,fieldDef:t,markDef:f,config:d,scaleType:w}),T=(s=i.component.axes[n])===null||s===void 0?void 0:s[0],b=(o=T==null?void 0:T.get("translate"))!==null&&o!==void 0?o:.5,S=bi(n)&&(c=rn("binSpacing",f,d))!==null&&c!==void 0?c:0,x=ul(n),B=Td(n),F=Td(x),{offset:k}=qy({channel:n,markDef:f,encoding:u,model:i,bandPosition:0}),M=Re(l)?{signal:`(1-${l.signal})/2`}:wu(l)?(1-l.band)/2:.5;if(mn(t.bin)||t.timeUnit)return{[F]:Gj({fieldDef:t,scaleName:_,bandPosition:M,offset:t_(x,S,m,b,k)}),[B]:Gj({fieldDef:t,scaleName:_,bandPosition:Re(M)?{signal:`1-${M.signal}`}:1-M,offset:t_(n,S,m,b,k)})};if(Ei(t.bin)){const A=Hf(t,_,{},{offset:t_(x,S,m,b,k)});if(Te(e))return{[F]:A,[B]:Hf(e,_,{},{offset:t_(n,S,m,b,k)})};if(Yu(t.bin)&&t.bin.step)return{[F]:A,[B]:{signal:`scale("${_}", ${xe(t,{expr:"datum"})} + ${t.bin.step})`,offset:t_(n,S,m,b,k)}}}be($X(x))}function Gj({fieldDef:t,scaleName:e,bandPosition:n,offset:i}){return p1({scaleName:e,fieldOrDatumDef:t,bandPosition:n,offset:i})}const BAe=new Set(["aria","width","height"]);function na(t,e){const{fill:n=void 0,stroke:i=void 0}=e.color==="include"?_J(t):{};return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},kAe(t.markDef,e)),Vj(t,"fill",n)),Vj(t,"stroke",i)),ui("opacity",t)),ui("fillOpacity",t)),ui("strokeOpacity",t)),ui("strokeWidth",t)),ui("strokeDash",t)),yAe(t)),pJ(t)),LR(t,"href")),pAe(t))}function Vj(t,e,n){const{config:i,mark:s,markDef:o}=t;if(rn("invalid",o,i)==="hide"&&n&&!Xd(s)){const d=IAe(t,{invalid:!0,channels:wS});if(d)return{[e]:[{test:d,value:null},...Ie(n)]}}return n?{[e]:n}:{}}function kAe(t,e){return qIe.reduce((n,i)=>(!BAe.has(i)&&t[i]!==void 0&&e[i]!=="ignore"&&(n[i]=Tn(t[i])),n),{})}function IAe(t,{invalid:e=!1,channels:n}){const i=n.reduce((o,c)=>{const d=t.getScaleComponent(c);if(d){const f=d.get("type"),u=t.vgField(c,{expr:"datum"});u&&Er(f)&&(o[u]=!0)}return o},{}),s=we(i);if(s.length>0){const o=e?"||":"&&";return s.map(c=>hR(c,e)).join(` ${o} `)}}function DR(t){const{config:e,markDef:n}=t;if(rn("invalid",n,e)){const s=FAe(t,{channels:hl});if(s)return{defined:{signal:s}}}return{}}function FAe(t,{invalid:e=!1,channels:n}){const i=n.reduce((o,c)=>{var d;const f=t.getScaleComponent(c);if(f){const u=f.get("type"),a=t.vgField(c,{expr:"datum",binSuffix:!((d=t.stack)===null||d===void 0)&&d.impute?"mid":void 0});a&&Er(u)&&(o[a]=!0)}return o},{}),s=we(i);if(s.length>0){const o=e?"||":"&&";return s.map(c=>hR(c,e)).join(` ${o} `)}}function Wj(t,e){if(e!==void 0)return{[t]:Tn(e)}}const CB="voronoi",wJ={defined:t=>t.type==="point"&&t.nearest,parse:(t,e)=>{if(e.events)for(const n of e.events)n.markname=t.getName(CB)},marks:(t,e,n)=>{const{x:i,y:s}=e.project.hasChannel,o=t.mark;if(Xd(o))return be(XIe(o)),n;const c={name:t.getName(CB),type:"path",interactive:!0,from:{data:t.getName("marks")},encode:{update:Object.assign({fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}},pJ(t,{reactiveGeom:!0}))},transform:[{type:"voronoi",x:{expr:i||!s?"datum.datum.x || 0":"0"},y:{expr:s||!i?"datum.datum.y || 0":"0"},size:[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")]}]};let d=0,f=!1;return n.forEach((u,a)=>{var _;const w=(_=u.name)!==null&&_!==void 0?_:"";w===t.component.mark[0].name?d=a:w.indexOf(CB)>=0&&(f=!0)}),f||n.splice(d+1,0,c),n}},bJ={defined:t=>t.type==="point"&&t.resolve==="global"&&t.bind&&t.bind!=="scales"&&!IR(t.bind),parse:(t,e,n)=>IJ(e,n),topLevelSignals:(t,e,n)=>{const i=e.name,s=e.project,o=e.bind,c=e.init&&e.init[0],d=wJ.defined(e)?"(item().isVoronoi ? datum.datum : datum)":"datum";return s.items.forEach((f,u)=>{var a,_;const w=xn(`${i}_${f.field}`);n.filter(l=>l.name===w).length||n.unshift(Object.assign(Object.assign({name:w},c?{init:Tu(c[u])}:{value:null}),{on:e.events?[{events:e.events,update:`datum && item().mark.marktype !== 'group' ? ${d}[${Se(f.field)}] : null`}]:[],bind:(_=(a=o[f.field])!==null&&a!==void 0?a:o[f.channel])!==null&&_!==void 0?_:o}))}),n},signals:(t,e,n)=>{const i=e.name,s=e.project,o=n.filter(u=>u.name===i+xd)[0],c=i+iw,d=s.items.map(u=>xn(`${i}_${u.field}`)),f=d.map(u=>`${u} !== null`).join(" && ");return d.length&&(o.update=`${f} ? {fields: ${c}, values: [${d.join(", ")}]} : null`),delete o.value,delete o.on,n}},v1="_toggle",TJ={defined:t=>t.type==="point"&&!!t.toggle,signals:(t,e,n)=>n.concat({name:e.name+v1,value:!1,on:[{events:e.events,update:e.toggle}]}),modifyExpr:(t,e)=>{const n=e.name+xd,i=e.name+v1;return`${i} ? null : ${n}, `+(e.resolve==="global"?`${i} ? null : true, `:`${i} ? null : {unit: ${Kp(t)}}, `)+`${i} ? ${n} : null`}},OAe={defined:t=>t.clear!==void 0&&t.clear!==!1,parse:(t,e)=>{e.clear&&(e.clear=ke(e.clear)?Ud(e.clear,"view"):e.clear)},topLevelSignals:(t,e,n)=>{if(bJ.defined(e))for(const i of e.project.items){const s=n.findIndex(o=>o.name===xn(`${e.name}_${i.field}`));s!==-1&&n[s].on.push({events:e.clear,update:"null"})}return n},signals:(t,e,n)=>{function i(s,o){s!==-1&&n[s].on&&n[s].on.push({events:e.clear,update:o})}if(e.type==="interval")for(const s of e.project.items){const o=n.findIndex(c=>c.name===s.signals.visual);if(i(o,"[0, 0]"),o===-1){const c=n.findIndex(d=>d.name===s.signals.data);i(c,"null")}}else{let s=n.findIndex(o=>o.name===e.name+xd);i(s,"null"),TJ.defined(e)&&(s=n.findIndex(o=>o.name===e.name+v1),i(s,"false"))}return n}},vJ={defined:t=>{const e=t.resolve==="global"&&t.bind&&IR(t.bind),n=t.project.items.length===1&&t.project.items[0].field!==Jo;return e&&!n&&be(QIe),e&&n},parse:(t,e,n)=>{var i;const s=ft(n);if(s.select=ke(s.select)?{type:s.select,toggle:e.toggle}:Object.assign(Object.assign({},s.select),{toggle:e.toggle}),IJ(e,s),Fe(n.select)&&(n.select.on||n.select.clear)){const d='event.item && indexof(event.item.mark.role, "legend") < 0';for(const f of e.events)f.filter=Ie((i=f.filter)!==null&&i!==void 0?i:[]),f.filter.includes(d)||f.filter.push(d)}const o=MB(e.bind)?e.bind.legend:"click",c=ke(o)?Ud(o,"view"):Ie(o);e.bind={legend:{merge:c}}},topLevelSignals:(t,e,n)=>{const i=e.name,s=MB(e.bind)&&e.bind.legend,o=c=>d=>{const f=ft(d);return f.markname=c,f};for(const c of e.project.items){if(!c.hasLegend)continue;const d=`${xn(c.field)}_legend`,f=`${i}_${d}`;if(n.filter(a=>a.name===f).length===0){const a=s.merge.map(o(`${d}_symbols`)).concat(s.merge.map(o(`${d}_labels`))).concat(s.merge.map(o(`${d}_entries`)));n.unshift(Object.assign(Object.assign({name:f},e.init?{}:{value:null}),{on:[{events:a,update:"datum.value || item().items[0].items[0].datum.value",force:!0},{events:s.merge,update:`!event.item || !datum ? null : ${f}`,force:!0}]}))}}return n},signals:(t,e,n)=>{const i=e.name,s=e.project,o=n.find(w=>w.name===i+xd),c=i+iw,d=s.items.filter(w=>w.hasLegend).map(w=>xn(`${i}_${xn(w.field)}_legend`)),u=`${d.map(w=>`${w} !== null`).join(" && ")} ? {fields: ${c}, values: [${d.join(", ")}]} : null`;e.events&&d.length>0?o.on.push({events:d.map(w=>({signal:w})),update:u}):d.length>0&&(o.update=u,delete o.value,delete o.on);const a=n.find(w=>w.name===i+v1),_=MB(e.bind)&&e.bind.legend;return a&&(e.events?a.on.push(Object.assign(Object.assign({},a.on[0]),{events:_})):a.on[0].events=_),n}};function MAe(t,e,n){var i,s,o,c;const d=(i=t.fieldDef(e))===null||i===void 0?void 0:i.field;for(const f of Hi((s=t.component.selection)!==null&&s!==void 0?s:{})){const u=(o=f.project.hasField[d])!==null&&o!==void 0?o:f.project.hasChannel[e];if(u&&vJ.defined(f)){const a=(c=n.get("selections"))!==null&&c!==void 0?c:[];a.push(f.name),n.set("selections",a,!1),u.hasLegend=!0}}}const EJ="_translate_anchor",SJ="_translate_delta",AAe={defined:t=>t.type==="interval"&&t.translate,signals:(t,e,n)=>{const i=e.name,s=Ed.defined(e),o=i+EJ,{x:c,y:d}=e.project.hasChannel;let f=Ud(e.translate,"scope");return s||(f=f.map(u=>(u.between[0].markname=i+ep,u))),n.push({name:o,value:{},on:[{events:f.map(u=>u.between[0]),update:"{x: x(unit), y: y(unit)"+(c!==void 0?`, extent_x: ${s?vF(t,On):`slice(${c.signals.visual})`}`:"")+(d!==void 0?`, extent_y: ${s?vF(t,wi):`slice(${d.signals.visual})`}`:"")+"}"}]},{name:i+SJ,value:{},on:[{events:f,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),c!==void 0&&Hj(t,e,c,"width",n),d!==void 0&&Hj(t,e,d,"height",n),n}};function Hj(t,e,n,i,s){var o,c;const d=e.name,f=d+EJ,u=d+SJ,a=n.channel,_=Ed.defined(e),w=s.filter(A=>A.name===n.signals[_?"data":"visual"])[0],m=t.getSizeSignalRef(i).signal,l=t.getScaleComponent(a),T=l.get("type"),b=l.get("reverse"),S=_?a===On?b?"":"-":b?"-":"":"",x=`${f}.extent_${a}`,B=`${S}${u}.${a} / ${_?`${m}`:`span(${x})`}`,F=_?T==="log"?"panLog":T==="symlog"?"panSymlog":T==="pow"?"panPow":"panLinear":"panLinear",k=_?T==="pow"?`, ${(o=l.get("exponent"))!==null&&o!==void 0?o:1}`:T==="symlog"?`, ${(c=l.get("constant"))!==null&&c!==void 0?c:1}`:"":"",M=`${F}(${x}, ${B}${k})`;w.on.push({events:{signal:u},update:_?M:`clampRange(${M}, 0, ${m})`})}const xJ="_zoom_anchor",BJ="_zoom_delta",NAe={defined:t=>t.type==="interval"&&t.zoom,signals:(t,e,n)=>{const i=e.name,s=Ed.defined(e),o=i+BJ,{x:c,y:d}=e.project.hasChannel,f=Se(t.scaleName(On)),u=Se(t.scaleName(wi));let a=Ud(e.zoom,"scope");return s||(a=a.map(_=>(_.markname=i+ep,_))),n.push({name:i+xJ,on:[{events:a,update:s?"{"+[f?`x: invert(${f}, x(unit))`:"",u?`y: invert(${u}, y(unit))`:""].filter(_=>!!_).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:a,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),c!==void 0&&Yj(t,e,c,"width",n),d!==void 0&&Yj(t,e,d,"height",n),n}};function Yj(t,e,n,i,s){var o,c;const d=e.name,f=n.channel,u=Ed.defined(e),a=s.filter(F=>F.name===n.signals[u?"data":"visual"])[0],_=t.getSizeSignalRef(i).signal,w=t.getScaleComponent(f),m=w.get("type"),l=u?vF(t,f):a.name,T=d+BJ,b=`${d}${xJ}.${f}`,S=u?m==="log"?"zoomLog":m==="symlog"?"zoomSymlog":m==="pow"?"zoomPow":"zoomLinear":"zoomLinear",x=u?m==="pow"?`, ${(o=w.get("exponent"))!==null&&o!==void 0?o:1}`:m==="symlog"?`, ${(c=w.get("constant"))!==null&&c!==void 0?c:1}`:"":"",B=`${S}(${l}, ${b}, ${T}${x})`;a.on.push({events:{signal:T},update:u?B:`clampRange(${B}, 0, ${_})`})}const vu="_store",xd="_tuple",CAe="_modify",kJ="vlSelectionResolve",DS=[hAe,fAe,cAe,TJ,bJ,Ed,vJ,OAe,AAe,NAe,wJ];function RAe(t){let e=t.parent;for(;e&&!Na(e);)e=e.parent;return e}function Kp(t,{escape:e}={escape:!0}){let n=e?Se(t.name):t.name;const i=RAe(t);if(i){const{facet:s}=i;for(const o of Pr)s[o]&&(n+=` + '__facet_${o}_' + (facet[${Se(i.vgField(o))}])`)}return n}function jR(t){var e;return Hi((e=t.component.selection)!==null&&e!==void 0?e:{}).reduce((n,i)=>n||i.project.hasSelectionId,!1)}function IJ(t,e){(ke(e.select)||!e.select.on)&&delete t.events,(ke(e.select)||!e.select.clear)&&delete t.clear,(ke(e.select)||!e.select.toggle)&&delete t.toggle}function xF(t){const e=[];return t.type==="Identifier"?[t.name]:t.type==="Literal"?[t.value]:(t.type==="MemberExpression"&&(e.push(...xF(t.object)),e.push(...xF(t.property))),e)}function FJ(t){return t.object.type==="MemberExpression"?FJ(t.object):t.object.name==="datum"}function OJ(t){const e=nC(t),n=new Set;return e.visit(i=>{i.type==="MemberExpression"&&FJ(i)&&n.add(xF(i).slice(1).join("."))}),n}class kg extends fn{constructor(e,n,i){super(e),this.model=n,this.filter=i,this.expr=E1(this.model,this.filter,this),this._dependentFields=OJ(this.expr)}clone(){return new kg(null,this.model,ft(this.filter))}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function LAe(t,e){var n;const i={},s=t.config.selection;if(!e||!e.length)return i;for(const o of e){const c=xn(o.name),d=o.select,f=ke(d)?d:d.type,u=Fe(d)?ft(d):{type:f},a=s[f];for(const w in a)w==="fields"||w==="encodings"||(w==="mark"&&(u[w]=Object.assign(Object.assign({},a[w]),u[w])),(u[w]===void 0||u[w]===!0)&&(u[w]=(n=a[w])!==null&&n!==void 0?n:u[w]));const _=i[c]=Object.assign(Object.assign({},u),{name:c,type:f,init:o.value,bind:o.bind,events:ke(u.on)?Ud(u.on,"scope"):Ie(ft(u.on))});for(const w of DS)w.defined(_)&&w.parse&&w.parse(t,_,o)}return i}function MJ(t,e,n,i="datum"){const s=ke(e)?e:e.param,o=xn(s),c=Se(o+vu);let d;try{d=t.getSelectionComponent(o,s)}catch{return`!!${o}`}if(d.project.timeUnit){const w=n!=null?n:t.component.data.raw,m=d.project.timeUnit.clone();w.parent?m.insertAsParentOf(w):w.parent=m}const f=d.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",u=d.resolve==="global"?")":`, ${Se(d.resolve)})`,a=`${f}${c}, ${i}${u}`,_=`length(data(${c}))`;return e.empty===!1?`${_} && ${a}`:`!${_} || ${a}`}function AJ(t,e,n){const i=xn(e),s=n.encoding;let o=n.field,c;try{c=t.getSelectionComponent(i,e)}catch{return i}if(!s&&!o)o=c.project.items[0].field,c.project.items.length>1&&be(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Se(o)}.`);else if(s&&!o){const d=c.project.items.filter(f=>f.channel===s);!d.length||d.length>1?(o=c.project.items[0].field,be((d.length?"Multiple ":"No ")+`matching ${Se(s)} encoding found for selection ${Se(n.param)}. Using "field": ${Se(o)}.`)):o=d[0].field}return`${c.name}[${Se(Jr(o))}]`}function PAe(t,e){var n;for(const[i,s]of bd((n=t.component.selection)!==null&&n!==void 0?n:{})){const o=t.getName(`lookup_${i}`);t.component.data.outputNodes[o]=s.materialized=new gs(new kg(e,t,{param:i}),o,_n.Lookup,t.component.data.outputNodeRefCounts)}}function E1(t,e,n){return W_(e,i=>ke(i)?i:h2e(i)?MJ(t,i,n):XX(i))}var i0=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};function DAe(t,e){if(!!t)return he(t)&&!Mc(t)?t.map(n=>wR(n,e)).join(", "):t}function RB(t,e,n,i){var s,o,c,d,f;(s=t.encode)!==null&&s!==void 0||(t.encode={}),(o=(d=t.encode)[e])!==null&&o!==void 0||(d[e]={}),(c=(f=t.encode[e]).update)!==null&&c!==void 0||(f.update={}),t.encode[e].update[n]=i}function F_(t,e,n,i={header:!1}){var s,o;const c=t.combine(),{disable:d,orient:f,scale:u,labelExpr:a,title:_,zindex:w}=c,m=i0(c,["disable","orient","scale","labelExpr","title","zindex"]);if(!d){for(const l in m){const T=_Oe[l],b=m[l];if(T&&T!==e&&T!=="both")delete m[l];else if(nw(b)){const{condition:S}=b,x=i0(b,["condition"]),B=Ie(S),F=xj[l];if(F){const{vgProp:k,part:M}=F,A=[...B.map(R=>{const{test:P}=R,j=i0(R,["test"]);return Object.assign({test:E1(null,P)},j)}),x];RB(m,M,k,A),delete m[l]}else if(F===null){const k={signal:B.map(M=>{const{test:A}=M,R=i0(M,["test"]);return`${E1(null,A)} ? ${dj(R)} : `}).join("")+dj(x)};m[l]=k}}else if(Re(b)){const S=xj[l];if(S){const{vgProp:x,part:B}=S;RB(m,B,x,b),delete m[l]}}Mt(["labelAlign","labelBaseline"],l)&&m[l]===null&&delete m[l]}if(e==="grid"){if(!m.grid)return;if(m.encode){const{grid:l}=m.encode;m.encode=Object.assign({},l?{grid:l}:{}),ln(m.encode)&&delete m.encode}return Object.assign(Object.assign({scale:u,orient:f},m),{domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:zn(w,0)})}else{if(!i.header&&t.mainExtracted)return;if(a!==void 0){let T=a;((o=(s=m.encode)===null||s===void 0?void 0:s.labels)===null||o===void 0?void 0:o.update)&&Re(m.encode.labels.update.text)&&(T=gu(a,"datum.label",m.encode.labels.update.text.signal)),RB(m,"labels","text",{signal:T})}if(m.labelAlign===null&&delete m.labelAlign,m.encode){for(const T of BK)t.hasAxisPart(T)||delete m.encode[T];ln(m.encode)&&delete m.encode}const l=DAe(_,n);return Object.assign(Object.assign(Object.assign(Object.assign({scale:u,orient:f,grid:!1},l?{title:l}:{}),m),n.aria===!1?{aria:!1}:{}),{zindex:zn(w,0)})}}}function NJ(t){const{axes:e}=t.component,n=[];for(const i of hl)if(e[i]){for(const s of e[i])if(!s.get("disable")&&!s.get("gridScale")){const o=i==="x"?"height":"width",c=t.getSizeSignalRef(o).signal;o!==c&&n.push({name:o,update:c})}}return n}function jAe(t,e){const{x:n=[],y:i=[]}=t;return[...n.map(s=>F_(s,"grid",e)),...i.map(s=>F_(s,"grid",e)),...n.map(s=>F_(s,"main",e)),...i.map(s=>F_(s,"main",e))].filter(s=>s)}function Xj(t,e,n,i){return Object.assign.apply(null,[{},...t.map(s=>{if(s==="axisOrient"){const o=n==="x"?"bottom":"left",c=e[n==="x"?"axisBottom":"axisLeft"]||{},d=e[n==="x"?"axisTop":"axisRight"]||{},f=new Set([...we(c),...we(d)]),u={};for(const a of f.values())u[a]={signal:`${i.signal} === "${o}" ? ${Gl(c[a])} : ${Gl(d[a])}`};return u}return e[s]})])}function UAe(t,e,n,i){const s=e==="band"?["axisDiscrete","axisBand"]:e==="point"?["axisDiscrete","axisPoint"]:ZX(e)?["axisQuantitative"]:e==="time"||e==="utc"?["axisTemporal"]:[],o=t==="x"?"axisX":"axisY",c=Re(n)?"axisOrient":`axis${Vm(n)}`,d=[...s,...s.map(u=>o+u.substr(4))],f=["axis",c,o];return{vlOnlyAxisConfig:Xj(d,i,t,n),vgAxisConfig:Xj(f,i,t,n),axisConfigStyle:$Ae([...f,...d],i)}}function $Ae(t,e){var n;const i=[{}];for(const s of t){let o=(n=e[s])===null||n===void 0?void 0:n.style;if(o){o=Ie(o);for(const c of o)i.push(e.style[c])}}return Object.assign.apply(null,i)}function BF(t,e,n,i={}){var s;const o=MX(t,n,e);if(o!==void 0)return{configFrom:"style",configValue:o};for(const c of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=i[c])===null||s===void 0?void 0:s[t])!==void 0)return{configFrom:c,configValue:i[c][t]};return{}}const Kj={scale:({model:t,channel:e})=>t.scaleName(e),format:({fieldOrDatumDef:t,config:e,axis:n})=>{const{format:i,formatType:s}=n;return fK(t,t.type,i,s,e,!0)},formatType:({axis:t,fieldOrDatumDef:e,scaleType:n})=>{const{formatType:i}=t;return uK(i,e,n)},grid:({fieldOrDatumDef:t,axis:e,scaleType:n})=>{var i;return(i=e.grid)!==null&&i!==void 0?i:zAe(n,t)},gridScale:({model:t,channel:e})=>qAe(t,e),labelAlign:({axis:t,labelAngle:e,orient:n,channel:i})=>t.labelAlign||RJ(e,n,i),labelAngle:({labelAngle:t})=>t,labelBaseline:({axis:t,labelAngle:e,orient:n,channel:i})=>t.labelBaseline||CJ(e,n,i),labelFlush:({axis:t,fieldOrDatumDef:e,channel:n})=>{var i;return(i=t.labelFlush)!==null&&i!==void 0?i:VAe(e.type,n)},labelOverlap:({axis:t,fieldOrDatumDef:e,scaleType:n})=>{var i;return(i=t.labelOverlap)!==null&&i!==void 0?i:WAe(e.type,n,Te(e)&&!!e.timeUnit,Te(e)?e.sort:void 0)},orient:({orient:t})=>t,tickCount:({channel:t,model:e,axis:n,fieldOrDatumDef:i,scaleType:s})=>{var o;const c=t==="x"?"width":t==="y"?"height":void 0,d=c?e.getSizeSignalRef(c):void 0;return(o=n.tickCount)!==null&&o!==void 0?o:YAe({fieldOrDatumDef:i,scaleType:s,size:d,values:n.values})},title:({axis:t,model:e,channel:n})=>{if(t.title!==void 0)return t.title;const i=LJ(e,n);if(i!==void 0)return i;const s=e.typedFieldDef(n),o=n==="x"?"x2":"y2",c=e.fieldDef(o);return NX(s?[Sj(s)]:[],Te(c)?[Sj(c)]:[])},values:({axis:t,fieldOrDatumDef:e})=>XAe(t,e),zindex:({axis:t,fieldOrDatumDef:e,mark:n})=>{var i;return(i=t.zindex)!==null&&i!==void 0?i:KAe(n,e)}};function zAe(t,e){return!Ti(t)&&Te(e)&&!mn(e==null?void 0:e.bin)&&!Ei(e==null?void 0:e.bin)}function qAe(t,e){const n=e==="x"?"y":"x";if(t.getScaleComponent(n))return t.scaleName(n)}function GAe(t,e,n,i,s){const o=e==null?void 0:e.labelAngle;if(o!==void 0)return Re(o)?o:Uy(o);{const{configValue:c}=BF("labelAngle",i,e==null?void 0:e.style,s);return c!==void 0?Uy(c):n===On&&Mt([lR,oR],t.type)&&!(Te(t)&&t.timeUnit)?270:void 0}}function kF(t){return`(((${t.signal} % 360) + 360) % 360)`}function CJ(t,e,n,i){if(t!==void 0)if(n==="x"){if(Re(t)){const s=kF(t),o=Re(e)?`(${e.signal} === "top")`:e==="top";return{signal:`(45 < ${s} && ${s} < 135) || (225 < ${s} && ${s} < 315) ? "middle" :(${s} <= 45 || 315 <= ${s}) === ${o} ? "bottom" : "top"`}}if(45<t&&t<135||225<t&&t<315)return"middle";if(Re(e)){const s=t<=45||315<=t?"===":"!==";return{signal:`${e.signal} ${s} "top" ? "bottom" : "top"`}}return(t<=45||315<=t)==(e==="top")?"bottom":"top"}else{if(Re(t)){const s=kF(t),o=Re(e)?`(${e.signal} === "left")`:e==="left";return{signal:`${s} <= 45 || 315 <= ${s} || (135 <= ${s} && ${s} <= 225) ? ${i?'"middle"':"null"} : (45 <= ${s} && ${s} <= 135) === ${o} ? "top" : "bottom"`}}if(t<=45||315<=t||135<=t&&t<=225)return i?"middle":null;if(Re(e)){const s=45<=t&&t<=135?"===":"!==";return{signal:`${e.signal} ${s} "left" ? "top" : "bottom"`}}return(45<=t&&t<=135)==(e==="left")?"top":"bottom"}}function RJ(t,e,n){if(t===void 0)return;const i=n==="x",s=i?0:90,o=i?"bottom":"left";if(Re(t)){const c=kF(t),d=Re(e)?`(${e.signal} === "${o}")`:e===o;return{signal:`(${s?`(${c} + 90)`:c} % 180 === 0) ? ${i?null:'"center"'} :(${s} < ${c} && ${c} < ${180+s}) === ${d} ? "left" : "right"`}}if((t+s)%180===0)return i?null:"center";if(Re(e)){const c=s<t&&t<180+s?"===":"!==";return{signal:`${`${e.signal} ${c} "${o}"`} ? "left" : "right"`}}return(s<t&&t<180+s)==(e===o)?"left":"right"}function VAe(t,e){if(e==="x"&&Mt(["quantitative","temporal"],t))return!0}function WAe(t,e,n,i){if(n&&!Fe(i)||t!=="nominal"&&t!=="ordinal")return e==="log"||e==="symlog"?"greedy":!0}function HAe(t){return t==="x"?"bottom":"left"}function YAe({fieldOrDatumDef:t,scaleType:e,size:n,values:i}){var s;if(!i&&!Ti(e)&&e!=="log"){if(Te(t)){if(mn(t.bin))return{signal:`ceil(${n.signal}/10)`};if(t.timeUnit&&Mt(["month","hours","day","quarter"],(s=Ji(t.timeUnit))===null||s===void 0?void 0:s.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function LJ(t,e){const n=e==="x"?"x2":"y2",i=t.fieldDef(e),s=t.fieldDef(n),o=i?i.title:void 0,c=s?s.title:void 0;if(o&&c)return CX(o,c);if(o)return o;if(c)return c;if(o!==void 0)return o;if(c!==void 0)return c}function XAe(t,e){const n=t.values;if(he(n))return xK(e,n);if(Re(n))return n}function KAe(t,e){return t==="rect"&&g1(e)?1:0}class Jp extends fn{constructor(e,n){super(e),this.transform=n,this._dependentFields=OJ(this.transform.calculate)}clone(){return new Jp(null,ft(this.transform))}static parseAllForSortIndex(e,n){return n.forEachFieldDef((i,s)=>{if(!!Ku(i)&&gK(i.sort)){const{field:o,timeUnit:c}=i,d=i.sort,f=d.map((u,a)=>`${XX({field:o,timeUnit:c,equal:u})} ? ${a} : `).join("")+d.length;e=new Jp(e,{calculate:f,as:Qp(i,s,{forAs:!0})})}}),e}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Pt(this.transform)}`}}function Qp(t,e,n){return xe(t,Object.assign({prefix:e,suffix:"sort_index"},n!=null?n:{}))}function jS(t,e){return Mt(["top","bottom"],e)?"column":Mt(["left","right"],e)||t==="row"?"row":"column"}function Zp(t,e,n,i){const s=i==="row"?n.headerRow:i==="column"?n.headerColumn:n.headerFacet;return zn((e||{})[t],s[t],n.header[t])}function US(t,e,n,i){const s={};for(const o of t){const c=Zp(o,e||{},n,i);c!==void 0&&(s[o]=c)}return s}const UR=["row","column"],$R=["header","footer"];function JAe(t,e){const n=t.component.layoutHeaders[e].title,i=t.config?t.config:void 0,s=t.component.layoutHeaders[e].facetFieldDef?t.component.layoutHeaders[e].facetFieldDef:void 0,{titleAnchor:o,titleAngle:c,titleOrient:d}=US(["titleAnchor","titleAngle","titleOrient"],s.header,i,e),f=jS(e,d),u=Uy(c);return{name:`${e}-title`,type:"group",role:`${f}-title`,title:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:n},e==="row"?{orient:"left"}:{}),{style:"guide-title"}),DJ(u,f)),PJ(f,u,o)),jJ(i,s,e,jOe,qK))}}function PJ(t,e,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const i=RJ(e,t==="row"?"left":"top",t==="row"?"y":"x");return i?{align:i}:{}}function DJ(t,e){const n=CJ(t,e==="row"?"left":"top",e==="row"?"y":"x",!0);return n?{baseline:n}:{}}function QAe(t,e){const n=t.component.layoutHeaders[e],i=[];for(const s of $R)if(n[s])for(const o of n[s]){const c=eNe(t,e,s,n,o);c!=null&&i.push(c)}return i}function ZAe(t,e){var n;const{sort:i}=t;return Mo(i)?{field:xe(i,{expr:"datum"}),order:(n=i.order)!==null&&n!==void 0?n:"ascending"}:he(i)?{field:Qp(t,e,{expr:"datum"}),order:"ascending"}:{field:xe(t,{expr:"datum"}),order:i!=null?i:"ascending"}}function IF(t,e,n){const{format:i,formatType:s,labelAngle:o,labelAnchor:c,labelOrient:d,labelExpr:f}=US(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],t.header,n,e),u=gR({fieldOrDatumDef:t,format:i,formatType:s,expr:"parent",config:n}).signal,a=jS(e,d);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:{signal:f?gu(gu(f,"datum.label",u),"datum.value",xe(t,{expr:"parent"})):u}},e==="row"?{orient:"left"}:{}),{style:"guide-label",frame:"group"}),DJ(o,a)),PJ(a,o,c)),jJ(n,t,e,UOe,GK))}function eNe(t,e,n,i,s){if(s){let o=null;const{facetFieldDef:c}=i,d=t.config?t.config:void 0;if(c&&s.labels){const{labelOrient:_}=US(["labelOrient"],c.header,d,e);(e==="row"&&!Mt(["top","bottom"],_)||e==="column"&&!Mt(["left","right"],_))&&(o=IF(c,e,d))}const f=Na(t)&&!Zm(t.facet),u=s.axes,a=(u==null?void 0:u.length)>0;if(o||a){const _=e==="row"?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:t.getName(`${e}_${n}`),type:"group",role:`${e}-${n}`},i.facetFieldDef?{from:{data:t.getName(`${e}_domain`)},sort:ZAe(c,e)}:{}),a&&f?{from:{data:t.getName(`facet_domain_${e}`)}}:{}),o?{title:o}:{}),s.sizeSignal?{encode:{update:{[_]:s.sizeSignal}}}:{}),a?{axes:u}:{})}}return null}const tNe={column:{start:0,end:1},row:{start:1,end:0}};function nNe(t,e){return tNe[e][t]}function iNe(t,e){const n={};for(const i of Pr){const s=t[i];if(s!=null&&s.facetFieldDef){const{titleAnchor:o,titleOrient:c}=US(["titleAnchor","titleOrient"],s.facetFieldDef.header,e,i),d=jS(i,c),f=nNe(o,d);f!==void 0&&(n[d]=f)}}return ln(n)?void 0:n}function jJ(t,e,n,i,s){const o={};for(const c of i){if(!s[c])continue;const d=Zp(c,e==null?void 0:e.header,t,n);d!==void 0&&(o[s[c]]=d)}return o}function zR(t){return[...s0(t,"width"),...s0(t,"height"),...s0(t,"childWidth"),...s0(t,"childHeight")]}function s0(t,e){const n=e==="width"?"x":"y",i=t.component.layoutSize.get(e);if(!i||i==="merged")return[];const s=t.getSizeSignalRef(e).signal;if(i==="step"){const o=t.getScaleComponent(n);if(o){const c=o.get("type"),d=o.get("range");if(Ti(c)&&Yd(d)){const f=t.scaleName(n);return Na(t.parent)&&t.parent.component.resolve.scale[n]==="independent"?[Jj(f,d)]:[Jj(f,d),{name:s,update:UJ(f,o,`domain('${f}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(i=="container"){const o=s.endsWith("width"),c=o?"containerSize()[0]":"containerSize()[1]",d=mF(t.config.view,o?"width":"height"),f=`isFinite(${c}) ? ${c} : ${d}`;return[{name:s,init:f,on:[{update:f,events:"window:resize"}]}]}else return[{name:s,value:i}]}function Jj(t,e){const n=`${t}_step`;return Re(e.step)?{name:n,update:e.step.signal}:{name:n,value:e.step}}function UJ(t,e,n){const i=e.get("type"),s=e.get("padding"),o=zn(e.get("paddingOuter"),s);let c=e.get("paddingInner");return c=i==="band"?c!==void 0?c:s:1,`bandspace(${n}, ${Gl(c)}, ${Gl(o)}) * ${t}_step`}function $J(t){return t==="childWidth"?"width":t==="childHeight"?"height":t}function zJ(t,e){return we(t).reduce((n,i)=>{const s=t[i];return Object.assign(Object.assign({},n),Bg(e,s,i,o=>Tn(o.value)))},{})}function qJ(t,e){if(Na(e))return t==="theta"?"independent":"shared";if(Og(e))return"shared";if(XR(e))return bi(t)||t==="theta"||t==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function qR(t,e){const n=t.scale[e],i=bi(e)?"axis":"legend";return n==="independent"?(t[i][e]==="shared"&&be(LFe(e)),"independent"):t[i][e]||"shared"}const sNe=Object.assign(Object.assign({},qOe),{disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1}),GJ=we(sNe);class rNe extends uc{}const Qj={symbols:aNe,gradient:oNe,labels:lNe,entries:cNe};function aNe(t,{fieldOrDatumDef:e,model:n,channel:i,legendCmpt:s,legendType:o}){var c,d,f,u,a,_,w,m;if(o!=="symbol")return;const{markDef:l,encoding:T,config:b,mark:S}=n,x=l.filled&&S!=="trail";let B=Object.assign(Object.assign({},WIe({},n,j2e)),_J(n,{filled:x}));const F=(c=s.get("symbolOpacity"))!==null&&c!==void 0?c:b.legend.symbolOpacity,k=(d=s.get("symbolFillColor"))!==null&&d!==void 0?d:b.legend.symbolFillColor,M=(f=s.get("symbolStrokeColor"))!==null&&f!==void 0?f:b.legend.symbolStrokeColor,A=F===void 0?(u=VJ(T.opacity))!==null&&u!==void 0?u:l.opacity:void 0;if(B.fill){if(i==="fill"||x&&i===Ys)delete B.fill;else if(B.fill.field)k?delete B.fill:(B.fill=Tn((a=b.legend.symbolBaseFillColor)!==null&&a!==void 0?a:"black"),B.fillOpacity=Tn(A!=null?A:1));else if(he(B.fill)){const R=(m=(w=FF((_=T.fill)!==null&&_!==void 0?_:T.color))!==null&&w!==void 0?w:l.fill)!==null&&m!==void 0?m:x&&l.color;R&&(B.fill=Tn(R))}}if(B.stroke){if(i==="stroke"||!x&&i===Ys)delete B.stroke;else if(B.stroke.field||M)delete B.stroke;else if(he(B.stroke)){const R=zn(FF(T.stroke||T.color),l.stroke,x?l.color:void 0);R&&(B.stroke={value:R})}}if(i!==dc){const R=Te(e)&&HJ(n,s,e);R?B.opacity=[Object.assign({test:R},Tn(A!=null?A:1)),Tn(b.legend.unselectedOpacity)]:A&&(B.opacity=Tn(A))}return B=Object.assign(Object.assign({},B),t),ln(B)?void 0:B}function oNe(t,{model:e,legendType:n,legendCmpt:i}){var s;if(n!=="gradient")return;const{config:o,markDef:c,encoding:d}=e;let f={};const a=((s=i.get("gradientOpacity"))!==null&&s!==void 0?s:o.legend.gradientOpacity)===void 0?VJ(d.opacity)||c.opacity:void 0;return a&&(f.opacity=Tn(a)),f=Object.assign(Object.assign({},f),t),ln(f)?void 0:f}function lNe(t,{fieldOrDatumDef:e,model:n,channel:i,legendCmpt:s}){const o=n.legend(i)||{},c=n.config,d=Te(e)?HJ(n,s,e):void 0,f=d?[{test:d,value:1},{value:c.legend.unselectedOpacity}]:void 0,{format:u,formatType:a}=o;let _;bu(a)?_=ka({fieldOrDatumDef:e,field:"datum.value",format:u,formatType:a,config:c}):u===void 0&&a===void 0&&c.customFormatTypes&&(e.type==="quantitative"&&c.numberFormatType?_=ka({fieldOrDatumDef:e,field:"datum.value",format:c.numberFormat,formatType:c.numberFormatType,config:c}):e.type==="temporal"&&c.timeFormatType&&Te(e)&&e.timeUnit===void 0&&(_=ka({fieldOrDatumDef:e,field:"datum.value",format:c.timeFormat,formatType:c.timeFormatType,config:c})));const w=Object.assign(Object.assign(Object.assign({},f?{opacity:f}:{}),_?{text:_}:{}),t);return ln(w)?void 0:w}function cNe(t,{legendCmpt:e}){const n=e.get("selections");return n!=null&&n.length?Object.assign(Object.assign({},t),{fill:{value:"transparent"}}):t}function VJ(t){return WJ(t,(e,n)=>Math.max(e,n.value))}function FF(t){return WJ(t,(e,n)=>zn(e,n.value))}function WJ(t,e){if(sOe(t))return Ie(t.condition).reduce(e,t.value);if(Da(t))return t.value}function HJ(t,e,n){const i=e.get("selections");if(!(i!=null&&i.length))return;const s=Se(n.field);return i.map(o=>`(!length(data(${Se(xn(o)+vu)})) || (${o}[${s}] && indexof(${o}[${s}], datum.value) >= 0))`).join(" || ")}const Zj={direction:({direction:t})=>t,format:({fieldOrDatumDef:t,legend:e,config:n})=>{const{format:i,formatType:s}=e;return fK(t,t.type,i,s,n,!1)},formatType:({legend:t,fieldOrDatumDef:e,scaleType:n})=>{const{formatType:i}=t;return uK(i,e,n)},gradientLength:t=>{var e,n;const{legend:i,legendConfig:s}=t;return(n=(e=i.gradientLength)!==null&&e!==void 0?e:s.gradientLength)!==null&&n!==void 0?n:_Ne(t)},labelOverlap:({legend:t,legendConfig:e,scaleType:n})=>{var i,s;return(s=(i=t.labelOverlap)!==null&&i!==void 0?i:e.labelOverlap)!==null&&s!==void 0?s:yNe(n)},symbolType:({legend:t,markDef:e,channel:n,encoding:i})=>{var s;return(s=t.symbolType)!==null&&s!==void 0?s:fNe(e.type,n,i.shape,e.shape)},title:({fieldOrDatumDef:t,config:e})=>Zh(t,e,{allowDisabling:!0}),type:({legendType:t,scaleType:e,channel:n})=>{if(Qh(n)&&Ba(e)){if(t==="gradient")return}else if(t==="symbol")return;return t},values:({fieldOrDatumDef:t,legend:e})=>dNe(e,t)};function dNe(t,e){const n=t.values;if(he(n))return xK(e,n);if(Re(n))return n}function fNe(t,e,n,i){var s;if(e!=="shape"){const o=(s=FF(n))!==null&&s!==void 0?s:i;if(o)return o}switch(t){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function uNe(t){const{legend:e}=t;return zn(e.type,hNe(t))}function hNe({channel:t,timeUnit:e,scaleType:n}){if(Qh(t)){if(Mt(["quarter","month","day"],e))return"symbol";if(Ba(n))return"gradient"}return"symbol"}function pNe({legendConfig:t,legendType:e,orient:n,legend:i}){var s,o;return(o=(s=i.direction)!==null&&s!==void 0?s:t[e?"gradientDirection":"symbolDirection"])!==null&&o!==void 0?o:gNe(n,e)}function gNe(t,e){switch(t){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return e==="gradient"?"horizontal":void 0}}function _Ne({legendConfig:t,model:e,direction:n,orient:i,scaleType:s}){const{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:c,gradientVerticalMaxLength:d,gradientVerticalMinLength:f}=t;if(Ba(s))return n==="horizontal"?i==="top"||i==="bottom"?eU(e,"width",c,o):c:eU(e,"height",f,d)}function eU(t,e,n,i){return{signal:`clamp(${t.getSizeSignalRef(e).signal}, ${n}, ${i})`}}function yNe(t){if(Mt(["quantile","threshold","log","symlog"],t))return"greedy"}function YJ(t){const e=Dn(t)?mNe(t):vNe(t);return t.component.legends=e,e}function mNe(t){const{encoding:e}=t,n={};for(const i of[Ys,...WK]){const s=ni(e[i]);!s||!t.getScaleComponent(i)||i===Xs&&Te(s)&&s.type===xg||(n[i]=TNe(t,i))}return n}function wNe(t,e){const n=t.scaleName(e);if(t.mark==="trail"){if(e==="color")return{stroke:n};if(e==="size")return{strokeWidth:n}}return e==="color"?t.markDef.filled?{fill:n}:{stroke:n}:{[e]:n}}function bNe(t,e,n,i){switch(e){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(e==="title"&&t===(i==null?void 0:i.title))return!0}return t===(n||{})[e]}function TNe(t,e){var n,i,s;let o=t.legend(e);const{markDef:c,encoding:d,config:f}=t,u=f.legend,a=new rNe({},wNe(t,e));MAe(t,e,a);const _=o!==void 0?!o:u.disable;if(a.set("disable",_,o!==void 0),_)return a;o=o||{};const w=t.getScaleComponent(e).get("type"),m=ni(d[e]),l=Te(m)?(n=Ji(m.timeUnit))===null||n===void 0?void 0:n.unit:void 0,T=o.orient||f.legend.orient||"right",b=uNe({legend:o,channel:e,timeUnit:l,scaleType:w}),S=pNe({legend:o,legendType:b,orient:T,legendConfig:u}),x={legend:o,channel:e,model:t,markDef:c,encoding:d,fieldOrDatumDef:m,legendConfig:u,config:f,scaleType:w,orient:T,legendType:b,direction:S};for(const A of GJ){if(b==="gradient"&&A.startsWith("symbol")||b==="symbol"&&A.startsWith("gradient"))continue;const R=A in Zj?Zj[A](x):o[A];if(R!==void 0){const P=bNe(R,A,o,t.fieldDef(e));(P||f.legend[A]===void 0)&&a.set(A,R,P)}}const B=(i=o==null?void 0:o.encoding)!==null&&i!==void 0?i:{},F=a.get("selections"),k={},M={fieldOrDatumDef:m,model:t,channel:e,legendCmpt:a,legendType:b};for(const A of["labels","legend","title","symbols","gradient","entries"]){const R=zJ((s=B[A])!==null&&s!==void 0?s:{},t),P=A in Qj?Qj[A](R,M):R;P!==void 0&&!ln(P)&&(k[A]=Object.assign(Object.assign(Object.assign({},(F==null?void 0:F.length)&&Te(m)?{name:`${xn(m.field)}_legend_${A}`}:{}),F!=null&&F.length?{interactive:!!F}:{}),{update:P}))}return ln(k)||a.set("encode",k,!!(o!=null&&o.encoding)),a}function vNe(t){const{legends:e,resolve:n}=t.component;for(const i of t.children){YJ(i);for(const s of we(i.component.legends))n.legend[s]=qR(t.component.resolve,s),n.legend[s]==="shared"&&(e[s]=XJ(e[s],i.component.legends[s]),e[s]||(n.legend[s]="independent",delete e[s]))}for(const i of we(e))for(const s of t.children)!s.component.legends[i]||n.legend[i]==="shared"&&delete s.component.legends[i];return e}function XJ(t,e){var n,i,s,o;if(!t)return e.clone();const c=t.getWithExplicit("orient"),d=e.getWithExplicit("orient");if(c.explicit&&d.explicit&&c.value!==d.value)return;let f=!1;for(const u of GJ){const a=vd(t.getWithExplicit(u),e.getWithExplicit(u),u,"legend",(_,w)=>{switch(u){case"symbolType":return ENe(_,w);case"title":return RX(_,w);case"type":return f=!0,ir("symbol")}return LS(_,w,u,"legend")});t.setWithExplicit(u,a)}return f&&(!((i=(n=t.implicit)===null||n===void 0?void 0:n.encode)===null||i===void 0)&&i.gradient&&d1(t.implicit,["encode","gradient"]),!((o=(s=t.explicit)===null||s===void 0?void 0:s.encode)===null||o===void 0)&&o.gradient&&d1(t.explicit,["encode","gradient"])),t}function ENe(t,e){return e.value==="circle"?e:t}var SNe=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};function xNe(t,e,n,i){var s,o,c,d,f;(s=t.encode)!==null&&s!==void 0||(t.encode={}),(o=(d=t.encode)[e])!==null&&o!==void 0||(d[e]={}),(c=(f=t.encode[e]).update)!==null&&c!==void 0||(f.update={}),t.encode[e].update[n]=i}function KJ(t){const e=t.component.legends,n={};for(const s of we(e)){const o=t.getScaleComponent(s),c=yn(o.get("domains"));if(n[c])for(const d of n[c])XJ(d,e[s])||n[c].push(e[s]);else n[c]=[e[s].clone()]}return Hi(n).flat().map(s=>BNe(s,t.config)).filter(s=>s!==void 0)}function BNe(t,e){var n,i,s;const o=t.combine(),{disable:c,labelExpr:d,selections:f}=o,u=SNe(o,["disable","labelExpr","selections"]);if(!c){if(e.aria===!1&&u.aria==null&&(u.aria=!1),!((n=u.encode)===null||n===void 0)&&n.symbols){const a=u.encode.symbols.update;a.fill&&a.fill.value!=="transparent"&&!a.stroke&&!u.stroke&&(a.stroke={value:"transparent"});for(const _ of WK)u[_]&&delete a[_]}if(u.title||delete u.title,d!==void 0){let a=d;((s=(i=u.encode)===null||i===void 0?void 0:i.labels)===null||s===void 0?void 0:s.update)&&Re(u.encode.labels.update.text)&&(a=gu(d,"datum.label",u.encode.labels.update.text.signal)),xNe(u,"labels","text",{signal:a})}return u}}function kNe(t){return Og(t)||XR(t)?INe(t):JJ(t)}function INe(t){return t.children.reduce((e,n)=>e.concat(n.assembleProjections()),JJ(t))}function JJ(t){const e=t.component.projection;if(!e||e.merged)return[];const n=e.combine(),{name:i}=n;if(e.data){const s={signal:`[${e.size.map(c=>c.signal).join(", ")}]`},o=e.data.reduce((c,d)=>{const f=Re(d)?d.signal:`data('${t.lookupDataSource(d)}')`;return Mt(c,f)||c.push(f),c},[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[Object.assign({name:i,size:s,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]}},n)]}else return[Object.assign(Object.assign({name:i},{translate:{signal:"[width / 2, height / 2]"}}),n)]}const FNe=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class QJ extends uc{constructor(e,n,i,s){super(Object.assign({},n),{name:e}),this.specifiedProjection=n,this.size=i,this.data=s,this.merged=!1}get isFit(){return!!this.data}}function ZJ(t){t.component.projection=Dn(t)?ONe(t):NNe(t)}function ONe(t){var e;if(t.hasProjection){const n=Fs(t.specifiedProjection),i=!(n&&(n.scale!=null||n.translate!=null)),s=i?[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")]:void 0,o=i?MNe(t):void 0,c=new QJ(t.projectionName(!0),Object.assign(Object.assign({},(e=Fs(t.config.projection))!==null&&e!==void 0?e:{}),n!=null?n:{}),s,o);return c.get("type")||c.set("type","equalEarth",!1),c}}function MNe(t){const e=[],{encoding:n}=t;for(const i of[[cl,ll],[Qr,Ha]])(ni(n[i[0]])||ni(n[i[1]]))&&e.push({signal:t.getName(`geojson_${e.length}`)});return t.channelHasField(Xs)&&t.typedFieldDef(Xs).type===xg&&e.push({signal:t.getName(`geojson_${e.length}`)}),e.length===0&&e.push(t.requestDataName(_n.Main)),e}function ANe(t,e){const n=CC(FNe,s=>!!(!Le(t.explicit,s)&&!Le(e.explicit,s)||Le(t.explicit,s)&&Le(e.explicit,s)&&Eo(t.get(s),e.get(s))));if(Eo(t.size,e.size)){if(n)return t;if(Eo(t.explicit,{}))return e;if(Eo(e.explicit,{}))return t}return null}function NNe(t){if(t.children.length===0)return;let e;for(const i of t.children)ZJ(i);const n=CC(t.children,i=>{const s=i.component.projection;if(s)if(e){const o=ANe(e,s);return o&&(e=o),!!o}else return e=s,!0;else return!0});if(e&&n){const i=t.projectionName(!0),s=new QJ(i,e.specifiedProjection,e.size,ft(e.data));for(const o of t.children){const c=o.component.projection;c&&(c.isFit&&s.data.push(...o.component.projection.data),o.renameProjection(c.get("name"),i),c.merged=!0)}return s}}var CNe=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};function RNe(t,e,n,i){var s,o;if(tw(e,n)){const c=Dn(t)?(o=(s=t.axis(n))!==null&&s!==void 0?s:t.legend(n))!==null&&o!==void 0?o:{}:{},d=xe(e,{expr:"datum"}),f=xe(e,{expr:"datum",binSuffix:"end"});return{formulaAs:xe(e,{binSuffix:"range",forAs:!0}),formula:Qm(d,f,c.format,c.formatType,i)}}return{}}function eQ(t,e){return`${kX(t)}_${e}`}function LNe(t,e){return{signal:t.getName(`${e}_bins`),extentSignal:t.getName(`${e}_extent`)}}function GR(t,e,n){var i;const s=(i=OS(n,void 0))!==null&&i!==void 0?i:{},o=eQ(s,e);return t.getName(`${o}_bins`)}function PNe(t){return"as"in t}function tU(t,e,n){let i,s;PNe(t)?i=ke(t.as)?[t.as,`${t.as}_end`]:[t.as[0],t.as[1]]:i=[xe(t,{forAs:!0}),xe(t,{binSuffix:"end",forAs:!0})];const o=Object.assign({},OS(e,void 0)),c=eQ(o,t.field),{signal:d,extentSignal:f}=LNe(n,c);if(bS(o.extent)){const a=o.extent;s=AJ(n,a.param,a),delete o.extent}const u=Object.assign(Object.assign(Object.assign({bin:o,field:t.field,as:[i]},d?{signal:d}:{}),f?{extentSignal:f}:{}),s?{span:s}:{});return{key:c,binComponent:u}}class No extends fn{constructor(e,n){super(e),this.bins=n}clone(){return new No(null,ft(this.bins))}static makeFromEncoding(e,n){const i=n.reduceFieldDef((s,o,c)=>{if(Zr(o)&&mn(o.bin)){const{key:d,binComponent:f}=tU(o,o.bin,n);s[d]=Object.assign(Object.assign(Object.assign({},f),s[d]),RNe(n,o,c,n.config))}return s},{});return ln(i)?null:new No(e,i)}static makeFromTransform(e,n,i){const{key:s,binComponent:o}=tU(n,n.bin,i);return new No(e,{[s]:o})}merge(e,n){for(const i of we(e.bins))i in this.bins?(n(e.bins[i].signal,this.bins[i].signal),this.bins[i].as=So([...this.bins[i].as,...e.bins[i].as],Pt)):this.bins[i]=e.bins[i];for(const i of e.children)e.removeChild(i),i.parent=this;e.remove()}producedFields(){return new Set(Hi(this.bins).map(e=>e.as).flat(2))}dependentFields(){return new Set(Hi(this.bins).map(e=>e.field))}hash(){return`Bin ${Pt(this.bins)}`}assemble(){return Hi(this.bins).flatMap(e=>{const n=[],[i,...s]=e.as,o=e.bin,{extent:c}=o,d=CNe(o,["extent"]),f=Object.assign(Object.assign(Object.assign({type:"bin",field:Jr(e.field),as:i,signal:e.signal},bS(c)?{extent:null}:{extent:c}),e.span?{span:{signal:`span(${e.span})`}}:{}),d);!c&&e.extentSignal&&(n.push({type:"extent",field:Jr(e.field),signal:e.extentSignal}),f.extent={signal:e.extentSignal}),n.push(f);for(const u of s)for(let a=0;a<2;a++)n.push({type:"formula",expr:xe({field:i[a]},{expr:"datum"}),as:u[a]});return e.formula&&n.push({type:"formula",expr:e.formula,as:e.formulaAs}),n})}}function DNe(t,e,n,i){var s;const o=Dn(i)?i.encoding[ul(e)]:void 0;if(Zr(n)&&Dn(i)&&mK(n,o,i.markDef,i.config))t.add(xe(n,{})),t.add(xe(n,{suffix:"end"})),n.bin&&tw(n,e)&&t.add(xe(n,{binSuffix:"range"}));else if(_Ie(e)){const c=gIe(e);t.add(i.getName(c))}else t.add(xe(n));return Ku(n)&&k2e((s=n.scale)===null||s===void 0?void 0:s.range)&&t.add(n.scale.range.field),t}function jNe(t,e){var n;for(const i of we(e)){const s=e[i];for(const o of we(s))i in t?t[i][o]=new Set([...(n=t[i][o])!==null&&n!==void 0?n:[],...s[o]]):t[i]={[o]:s[o]}}}class Aa extends fn{constructor(e,n,i){super(e),this.dimensions=n,this.measures=i}clone(){return new Aa(null,new Set(this.dimensions),ft(this.measures))}get groupBy(){return this.dimensions}static makeFromEncoding(e,n){let i=!1;n.forEachFieldDef(c=>{c.aggregate&&(i=!0)});const s={},o=new Set;return!i||(n.forEachFieldDef((c,d)=>{var f,u,a,_;const{aggregate:w,field:m}=c;if(w)if(w==="count")(f=s["*"])!==null&&f!==void 0||(s["*"]={}),s["*"].count=new Set([xe(c,{forAs:!0})]);else{if(Zl(w)||Hd(w)){const l=Zl(w)?"argmin":"argmax",T=w[l];(u=s[T])!==null&&u!==void 0||(s[T]={}),s[T][l]=new Set([xe({op:l,field:T},{forAs:!0})])}else(a=s[m])!==null&&a!==void 0||(s[m]={}),s[m][w]=new Set([xe(c,{forAs:!0})]);Wd(d)&&n.scaleDomain(d)==="unaggregated"&&((_=s[m])!==null&&_!==void 0||(s[m]={}),s[m].min=new Set([xe({field:m,aggregate:"min"},{forAs:!0})]),s[m].max=new Set([xe({field:m,aggregate:"max"},{forAs:!0})]))}else DNe(o,d,c,n)}),o.size+we(s).length===0)?null:new Aa(e,o,s)}static makeFromTransform(e,n){var i,s,o;const c=new Set,d={};for(const f of n.aggregate){const{op:u,field:a,as:_}=f;u&&(u==="count"?((i=d["*"])!==null&&i!==void 0||(d["*"]={}),d["*"].count=new Set([_||xe(f,{forAs:!0})])):((s=d[a])!==null&&s!==void 0||(d[a]={}),d[a][u]=new Set([_||xe(f,{forAs:!0})])))}for(const f of(o=n.groupby)!==null&&o!==void 0?o:[])c.add(f);return c.size+we(d).length===0?null:new Aa(e,c,d)}merge(e){return cX(this.dimensions,e.dimensions)?(jNe(this.measures,e.measures),!0):(QFe("different dimensions, cannot merge"),!1)}addDimensions(e){e.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...we(this.measures)])}producedFields(){const e=new Set;for(const n of we(this.measures))for(const i of we(this.measures[n])){const s=this.measures[n][i];s.size===0?e.add(`${i}_${n}`):s.forEach(e.add,e)}return e}hash(){return`Aggregate ${Pt({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const e=[],n=[],i=[];for(const o of we(this.measures))for(const c of we(this.measures[o]))for(const d of this.measures[o][c])i.push(d),e.push(c),n.push(o==="*"?null:Jr(o));return{type:"aggregate",groupby:[...this.dimensions].map(Jr),ops:e,fields:n,as:i}}}class Ig extends fn{constructor(e,n,i,s){super(e),this.model=n,this.name=i,this.data=s;for(const o of Pr){const c=n.facet[o];if(c){const{bin:d,sort:f}=c;this[o]=Object.assign({name:n.getName(`${o}_domain`),fields:[xe(c),...mn(d)?[xe(c,{binSuffix:"end"})]:[]]},Mo(f)?{sortField:f}:he(f)?{sortIndexField:Qp(c,o)}:{})}}this.childModel=n.child}hash(){let e="Facet";for(const n of Pr)this[n]&&(e+=` ${n.charAt(0)}:${Pt(this[n])}`);return e}get fields(){var e;const n=[];for(const i of Pr)!((e=this[i])===null||e===void 0)&&e.fields&&n.push(...this[i].fields);return n}dependentFields(){const e=new Set(this.fields);for(const n of Pr)this[n]&&(this[n].sortField&&e.add(this[n].sortField.field),this[n].sortIndexField&&e.add(this[n].sortIndexField));return e}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const e={};for(const n of hl){const i=this.childModel.component.scales[n];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(Ti(s)&&Yd(o)){const c=$S(this.childModel,n),d=YR(c);d?e[n]=d:be(YC(n))}}}return e}assembleRowColumnHeaderData(e,n,i){const s={row:"y",column:"x",facet:void 0}[e],o=[],c=[],d=[];s&&i&&i[s]&&(n?(o.push(`distinct_${i[s]}`),c.push("max")):(o.push(i[s]),c.push("distinct")),d.push(`distinct_${i[s]}`));const{sortField:f,sortIndexField:u}=this[e];if(f){const{op:a=BS,field:_}=f;o.push(_),c.push(a),d.push(xe(f,{forAs:!0}))}else u&&(o.push(u),c.push("max"),d.push(u));return{name:this[e].name,source:n!=null?n:this.data,transform:[Object.assign({type:"aggregate",groupby:this[e].fields},o.length?{fields:o,ops:c,as:d}:{})]}}assembleFacetHeaderData(e){var n,i;const{columns:s}=this.model.layout,{layoutHeaders:o}=this.model.component,c=[],d={};for(const a of UR){for(const _ of $R){const w=(n=o[a]&&o[a][_])!==null&&n!==void 0?n:[];for(const m of w)if(((i=m.axes)===null||i===void 0?void 0:i.length)>0){d[a]=!0;break}}if(d[a]){const _=`length(data("${this.facet.name}"))`,w=a==="row"?s?{signal:`ceil(${_} / ${s})`}:1:s?{signal:`min(${_}, ${s})`}:{signal:_};c.push({name:`${this.facet.name}_${a}`,transform:[{type:"sequence",start:0,stop:w}]})}}const{row:f,column:u}=d;return(f||u)&&c.unshift(this.assembleRowColumnHeaderData("facet",null,e)),c}assemble(){var e,n;const i=[];let s=null;const o=this.getChildIndependentFieldsWithStep(),{column:c,row:d,facet:f}=this;if(c&&d&&(o.x||o.y)){s=`cross_${this.column.name}_${this.row.name}`;const u=[].concat((e=o.x)!==null&&e!==void 0?e:[],(n=o.y)!==null&&n!==void 0?n:[]),a=u.map(()=>"distinct");i.push({name:s,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:u,ops:a}]})}for(const u of[ql,zl])this[u]&&i.push(this.assembleRowColumnHeaderData(u,s,o));if(f){const u=this.assembleFacetHeaderData(o);u&&i.push(...u)}return i}}function nU(t){return t.startsWith("'")&&t.endsWith("'")||t.startsWith('"')&&t.endsWith('"')?t.slice(1,-1):t}function UNe(t,e){const n=PC(t);if(e==="number")return`toNumber(${n})`;if(e==="boolean")return`toBoolean(${n})`;if(e==="string")return`toString(${n})`;if(e==="date")return`toDate(${n})`;if(e==="flatten")return n;if(e.startsWith("date:")){const i=nU(e.slice(5,e.length));return`timeParse(${n},'${i}')`}else if(e.startsWith("utc:")){const i=nU(e.slice(4,e.length));return`utcParse(${n},'${i}')`}else return be(rFe(e)),null}function $Ne(t){const e={};return J0(t.filter,n=>{var i;if(YX(n)){let s=null;ZC(n)?s=ur(n.equal):tR(n)?s=ur(n.lte):eR(n)?s=ur(n.lt):nR(n)?s=ur(n.gt):iR(n)?s=ur(n.gte):sR(n)?s=n.range[0]:rR(n)&&(s=((i=n.oneOf)!==null&&i!==void 0?i:n.in)[0]),s&&(Xu(s)?e[n.field]="date":cn(s)?e[n.field]="number":ke(s)&&(e[n.field]="string")),n.timeUnit&&(e[n.field]="date")}}),e}function zNe(t){const e={};function n(i){Yp(i)?e[i.field]="date":i.type==="quantitative"&&LIe(i.aggregate)?e[i.field]="number":zp(i.field)>1?i.field in e||(e[i.field]="flatten"):Ku(i)&&Mo(i.sort)&&zp(i.sort.field)>1&&(i.sort.field in e||(e[i.sort.field]="flatten"))}if((Dn(t)||Na(t))&&t.forEachFieldDef((i,s)=>{if(Zr(i))n(i);else{const o=Hu(s),c=t.fieldDef(o);n(Object.assign(Object.assign({},i),{type:c.type}))}}),Dn(t)){const{mark:i,markDef:s,encoding:o}=t;if(Xd(i)&&!t.encoding.order){const c=s.orient==="horizontal"?"y":"x",d=o[c];Te(d)&&d.type==="quantitative"&&!(d.field in e)&&(e[d.field]="number")}}return e}function qNe(t){const e={};if(Dn(t)&&t.component.selection)for(const n of we(t.component.selection)){const i=t.component.selection[n];for(const s of i.project.items)!s.channel&&zp(s.field)>1&&(e[s.field]="flatten")}return e}class zi extends fn{constructor(e,n){super(e),this._parse=n}clone(){return new zi(null,ft(this._parse))}hash(){return`Parse ${Pt(this._parse)}`}static makeExplicit(e,n,i){var s;let o={};const c=n.data;return!Qc(c)&&((s=c==null?void 0:c.format)===null||s===void 0?void 0:s.parse)&&(o=c.format.parse),this.makeWithAncestors(e,o,{},i)}static makeWithAncestors(e,n,i,s){for(const d of we(i)){const f=s.getWithExplicit(d);f.value!==void 0&&(f.explicit||f.value===i[d]||f.value==="derived"||i[d]==="flatten"?delete i[d]:be(_j(d,i[d],f.value)))}for(const d of we(n)){const f=s.get(d);f!==void 0&&(f===n[d]?delete n[d]:be(_j(d,n[d],f)))}const o=new uc(n,i);s.copyAll(o);const c={};for(const d of we(o.combine())){const f=o.get(d);f!==null&&(c[d]=f)}return we(c).length===0||s.parseNothing?null:new zi(e,c)}get parse(){return this._parse}merge(e){this._parse=Object.assign(Object.assign({},this._parse),e.parse),e.remove()}assembleFormatParse(){const e={};for(const n of we(this._parse)){const i=this._parse[n];zp(n)===1&&(e[n]=i)}return e}producedFields(){return new Set(we(this._parse))}dependentFields(){return new Set(we(this._parse))}assembleTransforms(e=!1){return we(this._parse).filter(n=>e?zp(n)>1:!0).map(n=>{const i=UNe(n,this._parse[n]);return i?{type:"formula",expr:i,as:DC(n)}:null}).filter(n=>n!==null)}}class Bd extends fn{clone(){return new Bd(null)}constructor(e){super(e)}dependentFields(){return new Set}producedFields(){return new Set([Jo])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Jo}}}class sw extends fn{constructor(e,n){super(e),this.params=n}clone(){return new sw(null,this.params)}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Pt(this.params)}`}assemble(){return Object.assign({type:"graticule"},this.params===!0?{}:this.params)}}class rw extends fn{constructor(e,n){super(e),this.params=n}clone(){return new rw(null,this.params)}dependentFields(){return new Set}producedFields(){var e;return new Set([(e=this.params.as)!==null&&e!==void 0?e:"data"])}hash(){return`Hash ${Pt(this.params)}`}assemble(){return Object.assign({type:"sequence"},this.params)}}class Eu extends fn{constructor(e){super(null),e!=null||(e={name:"source"});let n;if(Qc(e)||(n=e.format?Object.assign({},Ls(e.format,["parse"])):{}),zy(e))this._data={values:e.values};else if(Xp(e)){if(this._data={url:e.url},!n.type){let i=/(?:\.([^.]+))?$/.exec(e.url)[1];Mt(["json","csv","tsv","dsv","topojson"],i)||(i="json"),n.type=i}}else fJ(e)?this._data={values:[{type:"Sphere"}]}:(cJ(e)||Qc(e))&&(this._data={});this._generator=Qc(e),e.name&&(this._name=e.name),n&&!ln(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(e){this._name=e}set parent(e){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return Object.assign(Object.assign({name:this._name},this._data),{transform:[]})}}var iU=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,n,i,s){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n},GNe=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},O_;function VR(t){return t instanceof Eu||t instanceof sw||t instanceof rw}class WR{constructor(){O_.set(this,void 0),iU(this,O_,!1,"f")}setModified(){iU(this,O_,!0,"f")}get modifiedFlag(){return GNe(this,O_,"f")}}O_=new WeakMap;class Ju extends WR{getNodeDepths(e,n,i){i.set(e,n);for(const s of e.children)this.getNodeDepths(s,n+1,i);return i}optimize(e){const i=[...this.getNodeDepths(e,0,new Map).entries()].sort((s,o)=>o[1]-s[1]);for(const s of i)this.run(s[0]);return this.modifiedFlag}}class HR extends WR{optimize(e){this.run(e);for(const n of e.children)this.optimize(n);return this.modifiedFlag}}class VNe extends HR{mergeNodes(e,n){const i=n.shift();for(const s of n)e.removeChild(s),s.parent=i,s.remove()}run(e){const n=e.children.map(s=>s.hash()),i={};for(let s=0;s<n.length;s++)i[n[s]]===void 0?i[n[s]]=[e.children[s]]:i[n[s]].push(e.children[s]);for(const s of we(i))i[s].length>1&&(this.setModified(),this.mergeNodes(e,i[s]))}}class WNe extends HR{constructor(e){super(),this.requiresSelectionId=e&&jR(e)}run(e){e instanceof Bd&&(this.requiresSelectionId&&(VR(e.parent)||e.parent instanceof Aa||e.parent instanceof zi)||(this.setModified(),e.remove()))}}class HNe extends WR{optimize(e){return this.run(e,new Set),this.modifiedFlag}run(e,n){let i=new Set;e instanceof Ao&&(i=e.producedFields(),RC(i,n)&&(this.setModified(),e.removeFormulas(n),e.producedFields.length===0&&e.remove()));for(const s of e.children)this.run(s,new Set([...n,...i]))}}class YNe extends HR{constructor(){super()}run(e){e instanceof gs&&!e.isRequired()&&(this.setModified(),e.remove())}}class XNe extends Ju{run(e){if(!VR(e)&&!(e.numChildren()>1)){for(const n of e.children)if(n instanceof zi)if(e instanceof zi)this.setModified(),e.merge(n);else{if(LC(e.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class KNe extends Ju{run(e){const n=[...e.children],i=e.children.filter(s=>s instanceof zi);if(e.numChildren()>1&&i.length>=1){const s={},o=new Set;for(const c of i){const d=c.parse;for(const f of we(d))f in s?s[f]!==d[f]&&o.add(f):s[f]=d[f]}for(const c of o)delete s[c];if(!ln(s)){this.setModified();const c=new zi(e,s);for(const d of n){if(d instanceof zi)for(const f of we(s))delete d.parse[f];e.removeChild(d),d.parent=c,d instanceof zi&&we(d.parse).length===0&&d.remove()}}}}}class JNe extends Ju{run(e){e instanceof gs||e.numChildren()>0||e instanceof Ig||e instanceof Eu||(this.setModified(),e.remove())}}class QNe extends Ju{run(e){const n=e.children.filter(s=>s instanceof Ao),i=n.pop();for(const s of n)this.setModified(),i.merge(s)}}class ZNe extends Ju{run(e){const n=e.children.filter(s=>s instanceof Aa),i={};for(const s of n){const o=Pt(s.groupBy);o in i||(i[o]=[]),i[o].push(s)}for(const s of we(i)){const o=i[s];if(o.length>1){const c=o.pop();for(const d of o)c.merge(d)&&(e.removeChild(d),d.parent=c,d.remove(),this.setModified())}}}}class eCe extends Ju{constructor(e){super(),this.model=e}run(e){const n=!(VR(e)||e instanceof kg||e instanceof zi||e instanceof Bd),i=[],s=[];for(const o of e.children)o instanceof No&&(n&&!LC(e.producedFields(),o.dependentFields())?i.push(o):s.push(o));if(i.length>0){const o=i.pop();for(const c of i)o.merge(c,this.model.renameSignal.bind(this.model));this.setModified(),e instanceof No?e.merge(o,this.model.renameSignal.bind(this.model)):o.swapWithParent()}if(s.length>1){const o=s.pop();for(const c of s)o.merge(c,this.model.renameSignal.bind(this.model));this.setModified()}}}class tCe extends Ju{run(e){const n=[...e.children];if(!pu(n,c=>c instanceof gs)||e.numChildren()<=1)return;const s=[];let o;for(const c of n)if(c instanceof gs){let d=c;for(;d.numChildren()===1;){const[f]=d.children;if(f instanceof gs)d=f;else break}s.push(...d.children),o?(e.removeChild(c),c.parent=o.parent,o.parent.removeChild(o),o.parent=d,this.setModified()):o=d}else s.push(c);if(s.length){this.setModified();for(const c of s)c.parent.removeChild(c),c.parent=o}}}class Qu extends fn{constructor(e,n){super(e),this.transform=n}clone(){return new Qu(null,ft(this.transform))}addDimensions(e){this.transform.groupby=So(this.transform.groupby.concat(e),n=>n)}dependentFields(){const e=new Set;return this.transform.groupby&&this.transform.groupby.forEach(e.add,e),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(e.add,e),e}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(e){var n;return(n=e.as)!==null&&n!==void 0?n:xe(e)}hash(){return`JoinAggregateTransform ${Pt(this.transform)}`}assemble(){const e=[],n=[],i=[];for(const o of this.transform.joinaggregate)n.push(o.op),i.push(this.getDefaultName(o)),e.push(o.field===void 0?null:o.field);const s=this.transform.groupby;return Object.assign({type:"joinaggregate",as:i,ops:n,fields:e},s!==void 0?{groupby:s}:{})}}function nCe(t){return t.stack.stackBy.reduce((e,n)=>{const i=n.fieldDef,s=xe(i);return s&&e.push(s),e},[])}function iCe(t){return he(t)&&t.every(e=>ke(e))&&t.length>1}class Vl extends fn{constructor(e,n){super(e),this._stack=n}clone(){return new Vl(null,ft(this._stack))}static makeFromTransform(e,n){const{stack:i,groupby:s,as:o,offset:c="zero"}=n,d=[],f=[];if(n.sort!==void 0)for(const _ of n.sort)d.push(_.field),f.push(zn(_.order,"ascending"));const u={field:d,order:f};let a;return iCe(o)?a=o:ke(o)?a=[o,`${o}_end`]:a=[`${n.stack}_start`,`${n.stack}_end`],new Vl(e,{dimensionFieldDefs:[],stackField:i,groupby:s,offset:c,sort:u,facetby:[],as:a})}static makeFromEncoding(e,n){const i=n.stack,{encoding:s}=n;if(!i)return null;const{groupbyChannels:o,fieldChannel:c,offset:d,impute:f}=i,u=o.map(m=>{const l=s[m];return Ko(l)}).filter(m=>!!m),a=nCe(n),_=n.encoding.order;let w;return he(_)||Te(_)?w=AX(_):w=a.reduce((m,l)=>(m.field.push(l),m.order.push(c==="y"?"descending":"ascending"),m),{field:[],order:[]}),new Vl(e,{dimensionFieldDefs:u,stackField:n.vgField(c),facetby:[],stackby:a,sort:w,offset:d,impute:f,as:[n.vgField(c,{suffix:"start",forAs:!0}),n.vgField(c,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(e){this._stack.facetby.push(...e)}dependentFields(){const e=new Set;return e.add(this._stack.stackField),this.getGroupbyFields().forEach(e.add,e),this._stack.facetby.forEach(e.add,e),this._stack.sort.field.forEach(e.add,e),e}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Pt(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:e,impute:n,groupby:i}=this._stack;return e.length>0?e.map(s=>s.bin?n?[xe(s,{binSuffix:"mid"})]:[xe(s,{}),xe(s,{binSuffix:"end"})]:[xe(s)]).flat():i!=null?i:[]}assemble(){const e=[],{facetby:n,dimensionFieldDefs:i,stackField:s,stackby:o,sort:c,offset:d,impute:f,as:u}=this._stack;if(f)for(const a of i){const{bandPosition:_=.5,bin:w}=a;if(w){const m=xe(a,{expr:"datum"}),l=xe(a,{expr:"datum",binSuffix:"end"});e.push({type:"formula",expr:`${_}*${m}+${1-_}*${l}`,as:xe(a,{binSuffix:"mid",forAs:!0})})}e.push({type:"impute",field:s,groupby:[...o,...n],key:xe(a,{binSuffix:"mid"}),method:"value",value:0})}return e.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:s,sort:c,as:u,offset:d}),e}}class Fg extends fn{constructor(e,n){super(e),this.transform=n}clone(){return new Fg(null,ft(this.transform))}addDimensions(e){this.transform.groupby=So(this.transform.groupby.concat(e),n=>n)}dependentFields(){var e,n;const i=new Set;return((e=this.transform.groupby)!==null&&e!==void 0?e:[]).forEach(i.add,i),((n=this.transform.sort)!==null&&n!==void 0?n:[]).forEach(s=>i.add(s.field)),this.transform.window.map(s=>s.field).filter(s=>s!==void 0).forEach(i.add,i),i}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(e){var n;return(n=e.as)!==null&&n!==void 0?n:xe(e)}hash(){return`WindowTransform ${Pt(this.transform)}`}assemble(){var e;const n=[],i=[],s=[],o=[];for(const w of this.transform.window)i.push(w.op),s.push(this.getDefaultName(w)),o.push(w.param===void 0?null:w.param),n.push(w.field===void 0?null:w.field);const c=this.transform.frame,d=this.transform.groupby;if(c&&c[0]===null&&c[1]===null&&i.every(w=>VC(w)))return Object.assign({type:"joinaggregate",as:s,ops:i,fields:n},d!==void 0?{groupby:d}:{});const f=[],u=[];if(this.transform.sort!==void 0)for(const w of this.transform.sort)f.push(w.field),u.push((e=w.order)!==null&&e!==void 0?e:"ascending");const a={field:f,order:u},_=this.transform.ignorePeers;return Object.assign(Object.assign(Object.assign({type:"window",params:o,as:s,ops:i,fields:n,sort:a},_!==void 0?{ignorePeers:_}:{}),d!==void 0?{groupby:d}:{}),c!==void 0?{frame:c}:{})}}function sCe(t){function e(n){if(!(n instanceof Ig)){const i=n.clone();if(i instanceof gs){const s=MF+i.getSource();i.setSource(s),t.model.component.data.outputNodes[s]=i}else(i instanceof Aa||i instanceof Vl||i instanceof Fg||i instanceof Qu)&&i.addDimensions(t.fields);for(const s of n.children.flatMap(e))s.parent=i;return[i]}return n.children.flatMap(e)}return e}function OF(t){if(t instanceof Ig)if(t.numChildren()===1&&!(t.children[0]instanceof gs)){const e=t.children[0];(e instanceof Aa||e instanceof Vl||e instanceof Fg||e instanceof Qu)&&e.addDimensions(t.fields),e.swapWithParent(),OF(t)}else{const e=t.model.component.data.main;tQ(e);const n=sCe(t),i=t.children.map(n).flat();for(const s of i)s.parent=e}else t.children.map(OF)}function tQ(t){if(t instanceof gs&&t.type===_n.Main&&t.numChildren()===1){const e=t.children[0];e instanceof Ig||(e.swapWithParent(),tQ(t))}}const MF="scale_",r0=5;function AF(t){for(const e of t){for(const n of e.children)if(n.parent!==e)return!1;if(!AF(e.children))return!1}return!0}function sa(t,e){let n=!1;for(const i of e)n=t.optimize(i)||n;return n}function sU(t,e,n){let i=t.sources,s=!1;return s=sa(new YNe,i)||s,s=sa(new WNe(e),i)||s,i=i.filter(o=>o.numChildren()>0),s=sa(new JNe,i)||s,i=i.filter(o=>o.numChildren()>0),n||(s=sa(new XNe,i)||s,s=sa(new eCe(e),i)||s,s=sa(new HNe,i)||s,s=sa(new KNe,i)||s,s=sa(new ZNe,i)||s,s=sa(new QNe,i)||s,s=sa(new VNe,i)||s,s=sa(new tCe,i)||s),t.sources=i,s}function rCe(t,e){AF(t.sources);let n=0,i=0;for(let s=0;s<r0&&sU(t,e,!0);s++)n++;t.sources.map(OF);for(let s=0;s<r0&&sU(t,e,!1);s++)i++;AF(t.sources),Math.max(n,i)===r0&&be(`Maximum optimization runs(${r0}) reached.`)}class Ds{constructor(e){Object.defineProperty(this,"signal",{enumerable:!0,get:e})}static fromName(e,n){return new Ds(()=>e(n))}}var aCe=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};function nQ(t){Dn(t)?oCe(t):lCe(t)}function oCe(t){const e=t.component.scales;for(const n of we(e)){const i=dCe(t,n);if(e[n].setWithExplicit("domains",i),uCe(t,n),t.component.data.isFaceted){let o=t;for(;!Na(o)&&o.parent;)o=o.parent;if(o.component.resolve.scale[n]==="shared")for(const d of i.value)Dl(d)&&(d.data=MF+d.data.replace(MF,""))}}}function lCe(t){for(const n of t.children)nQ(n);const e=t.component.scales;for(const n of we(e)){let i,s=null;for(const o of t.children){const c=o.component.scales[n];if(c){i===void 0?i=c.getWithExplicit("domains"):i=vd(i,c.getWithExplicit("domains"),"domains","scale",NF);const d=c.get("selectionExtent");s&&d&&s.param!==d.param&&be(tFe),s=d}}e[n].setWithExplicit("domains",i),s&&e[n].set("selectionExtent",s,!0)}}function cCe(t,e,n,i){if(t==="unaggregated"){const{valid:s,reason:o}=rU(e,n);if(!s){be(o);return}}else if(t===void 0&&i.useUnaggregatedDomain){const{valid:s}=rU(e,n);if(s)return"unaggregated"}return t}function dCe(t,e){const n=t.getScaleComponent(e).get("type"),{encoding:i}=t,s=cCe(t.scaleDomain(e),t.typedFieldDef(e),n,t.config.scale);return s!==t.scaleDomain(e)&&(t.specifiedScales[e]=Object.assign(Object.assign({},t.specifiedScales[e]),{domain:s})),e==="x"&&ni(i.x2)?ni(i.x)?vd(Tc(n,s,t,"x"),Tc(n,s,t,"x2"),"domain","scale",NF):Tc(n,s,t,"x2"):e==="y"&&ni(i.y2)?ni(i.y)?vd(Tc(n,s,t,"y"),Tc(n,s,t,"y2"),"domain","scale",NF):Tc(n,s,t,"y2"):Tc(n,s,t,e)}function fCe(t,e,n){return t.map(i=>({signal:`{data: ${MS(i,{timeUnit:n,type:e})}}`}))}function LB(t,e,n){var i;const s=(i=Ji(n))===null||i===void 0?void 0:i.unit;return e==="temporal"||s?fCe(t,e,s):[t]}function Tc(t,e,n,i){const{encoding:s}=n,o=ni(s[i]),{type:c}=o,d=o.timeUnit;if(B2e(e)){const _=Tc(t,void 0,n,i),w=LB(e.unionWith,c,d);return eo([...w,..._.value])}else{if(Re(e))return eo([e]);if(e&&e!=="unaggregated"&&!tK(e))return eo(LB(e,c,d))}const f=n.stack;if(f&&i===f.fieldChannel){if(f.offset==="normalize")return ir([[0,1]]);const _=n.requestDataName(_n.Main);return ir([{data:_,field:n.vgField(i,{suffix:"start"})},{data:_,field:n.vgField(i,{suffix:"end"})}])}const u=Wd(i)&&Te(o)?hCe(n,i,t):void 0;if(pl(o)){const _=LB([o.datum],c,d);return ir(_)}const a=o;if(e==="unaggregated"){const _=n.requestDataName(_n.Main),{field:w}=o;return ir([{data:_,field:xe({field:w,aggregate:"min"})},{data:_,field:xe({field:w,aggregate:"max"})}])}else if(mn(a.bin)){if(Ti(t))return ir(t==="bin-ordinal"?[]:[{data:jy(u)?n.requestDataName(_n.Main):n.requestDataName(_n.Raw),field:n.vgField(i,tw(a,i)?{binSuffix:"range"}:{}),sort:u===!0||!Fe(u)?{field:n.vgField(i,{}),op:"min"}:u}]);{const{bin:_}=a;if(mn(_)){const w=GR(n,a.field,_);return ir([new Ds(()=>{const m=n.getSignalName(w);return`[${m}.start, ${m}.stop]`})])}else return ir([{data:n.requestDataName(_n.Main),field:n.vgField(i,{})}])}}else if(a.timeUnit&&Mt(["time","utc"],t)&&mK(a,Dn(n)?n.encoding[ul(i)]:void 0,n.markDef,n.config)){const _=n.requestDataName(_n.Main);return ir([{data:_,field:n.vgField(i)},{data:_,field:n.vgField(i,{suffix:"end"})}])}else return ir(u?[{data:jy(u)?n.requestDataName(_n.Main):n.requestDataName(_n.Raw),field:n.vgField(i),sort:u}]:[{data:n.requestDataName(_n.Main),field:n.vgField(i)}])}function PB(t,e){const{op:n,field:i,order:s}=t;return Object.assign(Object.assign({op:n!=null?n:e?"sum":BS},i?{field:Jr(i)}:{}),s?{order:s}:{})}function uCe(t,e){var n;const i=t.component.scales[e],s=t.specifiedScales[e].domain,o=(n=t.fieldDef(e))===null||n===void 0?void 0:n.bin,c=tK(s)&&s,d=Yu(o)&&bS(o.extent)&&o.extent;(c||d)&&i.set("selectionExtent",c!=null?c:d,!0)}function hCe(t,e,n){if(!Ti(n))return;const i=t.fieldDef(e),s=i.sort;if(gK(s))return{op:"min",field:Qp(i,e),order:"ascending"};const{stack:o}=t,c=o?new Set([...o.groupbyFields,...o.stackBy.map(d=>d.fieldDef.field)]):void 0;if(Mo(s)){const d=o&&!c.has(s.field);return PB(s,d)}else if(pK(s)){const{encoding:d,order:f}=s,u=t.fieldDef(d),{aggregate:a,field:_}=u,w=o&&!c.has(_);if(Zl(a)||Hd(a))return PB({field:xe(u),order:f},w);if(VC(a)||!a)return PB({op:a,field:_,order:f},w)}else{if(s==="descending")return{op:"min",field:t.vgField(e),order:"descending"};if(Mt(["ascending",void 0],s))return!0}}function rU(t,e){const{aggregate:n,type:i}=t;return n?ke(n)&&!DIe.has(n)?{valid:!1,reason:FFe(n)}:i==="quantitative"&&e==="log"?{valid:!1,reason:OFe(t)}:{valid:!0}:{valid:!1,reason:IFe(t)}}function NF(t,e,n,i){return t.explicit&&e.explicit&&be(RFe(n,i,t.value,e.value)),{explicit:t.explicit,value:[...t.value,...e.value]}}function pCe(t){const e=So(t.map(c=>Dl(c)?aCe(c,["sort"]):c),Pt),n=So(t.map(c=>{if(Dl(c)){const d=c.sort;return d!==void 0&&!jy(d)&&("op"in d&&d.op==="count"&&delete d.field,d.order==="ascending"&&delete d.order),d}}).filter(c=>c!==void 0),Pt);if(e.length===0)return;if(e.length===1){const c=t[0];if(Dl(c)&&n.length>0){let d=n[0];if(n.length>1)be(mj),d=!0;else if(Fe(d)&&"field"in d){const f=d.field;c.field===f&&(d=d.order?{order:d.order}:!0)}return Object.assign(Object.assign({},c),{sort:d})}return c}const i=So(n.map(c=>jy(c)||!("op"in c)||ke(c.op)&&c.op in CIe?c:(be(PFe(c)),!0)),Pt);let s;i.length===1?s=i[0]:i.length>1&&(be(mj),s=!0);const o=So(t.map(c=>Dl(c)?c.data:null),c=>c);return o.length===1&&o[0]!==null?Object.assign({data:o[0],fields:e.map(d=>d.field)},s?{sort:s}:{}):Object.assign({fields:e},s?{sort:s}:{})}function YR(t){if(Dl(t)&&ke(t.field))return t.field;if(UIe(t)){let e;for(const n of t.fields)if(Dl(n)&&ke(n.field)){if(!e)e=n.field;else if(e!==n.field)return be(DFe),e}return be(jFe),e}else if($Ie(t)){be(UFe);const e=t.fields[0];return ke(e)?e:void 0}}function $S(t,e){const i=t.component.scales[e].get("domains").map(s=>(Dl(s)&&(s.data=t.lookupDataSource(s.data)),s));return pCe(i)}var gCe=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};function iQ(t){return Og(t)||XR(t)?t.children.reduce((e,n)=>e.concat(iQ(n)),aU(t)):aU(t)}function aU(t){return we(t.component.scales).reduce((e,n)=>{const i=t.component.scales[n];if(i.merged)return e;const s=i.combine(),{name:o,type:c,selectionExtent:d,domains:f,range:u,reverse:a}=s,_=gCe(s,["name","type","selectionExtent","domains","range","reverse"]),w=_Ce(s.range,o,n,t),m=$S(t,n),l=d?aAe(t,d,i,m):null;return e.push(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:o,type:c},m?{domain:m}:{}),l?{domainRaw:l}:{}),{range:w}),a!==void 0?{reverse:a}:{}),_)),e},[])}function _Ce(t,e,n,i){if(bi(n)){if(Yd(t))return{step:{signal:`${e}_step`}}}else if(Fe(t)&&Dl(t))return Object.assign(Object.assign({},t),{data:i.lookupDataSource(t.data)});return t}class sQ extends uc{constructor(e,n){super({},{name:e}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:pu(this.get("domains"),e=>he(e)&&e.length===2&&e[0]<=0&&e[1]>=0)}}const yCe=["range","scheme"];function mCe(t){const e=t.component.scales;for(const n of wS){const i=e[n];if(!i)continue;const s=wCe(n,t);i.setWithExplicit("range",s)}}function oU(t,e){const n=t.fieldDef(e);if(n!=null&&n.bin){const{bin:i,field:s}=n,o=Ks(e),c=t.getName(o);if(Fe(i)&&i.binned&&i.step!==void 0)return new Ds(()=>{const d=t.scaleName(e),f=`(domain("${d}")[1] - domain("${d}")[0]) / ${i.step}`;return`${t.getSignalName(c)} / (${f})`});if(mn(i)){const d=GR(t,s,i);return new Ds(()=>{const f=t.getSignalName(d),u=`(${f}.stop - ${f}.start) / ${f}.step`;return`${t.getSignalName(c)} / (${u})`})}}}function wCe(t,e){const n=e.specifiedScales[t],{size:i}=e,o=e.getScaleComponent(t).get("type");for(const _ of yCe)if(n[_]!==void 0){const w=uF(o,_),m=nK(t,_);if(!w)be(jX(o,_,t));else if(m)be(m);else switch(_){case"range":{const l=n.range;if(he(l)){if(bi(t))return eo(l.map(T=>{if(T==="width"||T==="height"){const b=e.getName(T),S=e.getSignalName.bind(e);return Ds.fromName(S,b)}return T}))}else if(Fe(l))return eo({data:e.requestDataName(_n.Main),field:l.field,sort:{op:"min",field:e.vgField(t)}});return eo(l)}case"scheme":return eo(bCe(n[_]))}}const c=t===On||t==="xOffset"?"width":"height",d=i[c];if(Qo(d)){if(bi(t))if(Ti(o)){const _=rQ(d,e,t);if(_)return eo({step:_})}else be(UX(c));else if(Sg(t)){const _=t===$d?"x":"y";if(e.getScaleComponent(_).get("type")==="band"){const l=aQ(d,o);if(l)return eo(l)}}}const{rangeMin:f,rangeMax:u}=n,a=TCe(t,e);return(f!==void 0||u!==void 0)&&uF(o,"rangeMin")&&he(a)&&a.length===2?eo([f!=null?f:a[0],u!=null?u:a[1]]):ir(a)}function bCe(t){return x2e(t)?Object.assign({scheme:t.name},Ls(t,["name"])):{scheme:t}}function TCe(t,e){const{size:n,config:i,mark:s,encoding:o}=e,c=e.getSignalName.bind(e),{type:d}=ni(o[t]),u=e.getScaleComponent(t).get("type"),{domain:a,domainMid:_}=e.specifiedScales[t];switch(t){case On:case wi:{if(Mt(["point","band"],u)){const l=oQ(t,n,i.view);if(Qo(l))return{step:rQ(l,e,t)}}const w=Ks(t),m=e.getName(w);return t===wi&&Er(u)?[Ds.fromName(c,m),0]:[0,Ds.fromName(c,m)]}case $d:case Eg:return vCe(t,e,u);case cc:{const w=e.component.scales[t].get("zero"),m=lQ(s,w,i),l=xCe(s,n,e,i);return Vp(u)?SCe(m,l,ECe(u,i,a,t)):[m,l]}case ta:return[0,Math.PI*2];case Wu:return[0,360];case Wa:return[0,new Ds(()=>{const w=e.getSignalName("width"),m=e.getSignalName("height");return`min(${w},${m})/2`})];case Gd:return[i.scale.minStrokeWidth,i.scale.maxStrokeWidth];case Vd:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Xs:return"symbol";case Ys:case dl:case fl:return u==="ordinal"?d==="nominal"?"category":"ordinal":_!==void 0?"diverging":s==="rect"||s==="geoshape"?"heatmap":"ramp";case dc:case zd:case qd:return[i.scale.minOpacity,i.scale.maxOpacity]}}function rQ(t,e,n){var i,s,o,c,d;const{encoding:f}=e,u=e.getScaleComponent(n),a=bX(n),_=f[a];if(YK({step:t,offsetIsDiscrete:Ze(_)&&KX(_.type)})==="offset"&&FK(f,a)){const m=e.getScaleComponent(a);let T=`domain('${e.scaleName(a)}').length`;if(m.get("type")==="band"){const S=(s=(i=m.get("paddingInner"))!==null&&i!==void 0?i:m.get("padding"))!==null&&s!==void 0?s:0,x=(c=(o=m.get("paddingOuter"))!==null&&o!==void 0?o:m.get("padding"))!==null&&c!==void 0?c:0;T=`bandspace(${T}, ${S}, ${x})`}const b=(d=u.get("paddingInner"))!==null&&d!==void 0?d:u.get("padding");return{signal:`${t.step} * ${T} / (1-${VIe(b)})`}}else return t.step}function aQ(t,e){if(YK({step:t,offsetIsDiscrete:Ti(e)})==="offset")return{step:t.step}}function vCe(t,e,n){const i=t===$d?"x":"y",o=e.getScaleComponent(i).get("type"),c=e.scaleName(i);if(o==="band"){const d=oQ(i,e.size,e.config.view);if(Qo(d)){const f=aQ(d,n);if(f)return f}return[0,{signal:`bandwidth('${c}')`}]}else return oX(`Cannot use ${t} scale if ${i} scale is not discrete.`)}function oQ(t,e,n){const i=t===On?"width":"height",s=e[i];return s||b1(n,i)}function ECe(t,e,n,i){switch(t){case"quantile":return e.scale.quantileCount;case"quantize":return e.scale.quantizeCount;case"threshold":return n!==void 0&&he(n)?n.length+1:(be(XFe(i)),3)}}function SCe(t,e,n){const i=()=>{const s=Gl(e),o=Gl(t),c=`(${s} - ${o}) / (${n} - 1)`;return`sequence(${o}, ${s} + ${c}, ${c})`};return Re(e)?new Ds(i):{signal:i()}}function lQ(t,e,n){if(e)return Re(e)?{signal:`${e.signal} ? 0 : ${lQ(t,!1,n)}`}:0;switch(t){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(TS("size",t))}const lU=.95;function xCe(t,e,n,i){const s={x:oU(n,"x"),y:oU(n,"y")};switch(t){case"bar":case"tick":{if(i.scale.maxBandSize!==void 0)return i.scale.maxBandSize;const o=cU(e,s,i.view);return cn(o)?o-1:new Ds(()=>`${o.signal} - 1`)}case"line":case"trail":case"rule":return i.scale.maxStrokeWidth;case"text":return i.scale.maxFontSize;case"point":case"square":case"circle":{if(i.scale.maxSize)return i.scale.maxSize;const o=cU(e,s,i.view);return cn(o)?Math.pow(lU*o,2):new Ds(()=>`pow(${lU} * ${o.signal}, 2)`)}}throw new Error(TS("size",t))}function cU(t,e,n){const i=Qo(t.width)?t.width.step:w1(n,"width"),s=Qo(t.height)?t.height.step:w1(n,"height");return e.x||e.y?new Ds(()=>`min(${[e.x?e.x.signal:i,e.y?e.y.signal:s].join(", ")})`):Math.min(i,s)}function cQ(t,e){Dn(t)?BCe(t,e):fQ(t,e)}function BCe(t,e){const n=t.component.scales,{config:i,encoding:s,markDef:o,specifiedScales:c}=t;for(const d of we(n)){const f=c[d],u=n[d],a=t.getScaleComponent(d),_=ni(s[d]),w=f[e],m=a.get("type"),l=a.get("padding"),T=a.get("paddingInner"),b=uF(m,e),S=nK(d,e);if(w!==void 0&&(b?S&&be(S):be(jX(m,e,d))),b&&S===void 0)if(w!==void 0){const x=_.timeUnit,B=_.type;switch(e){case"domainMax":case"domainMin":Xu(f[e])||B==="temporal"||x?u.set(e,{signal:MS(f[e],{type:B,timeUnit:x})},!0):u.set(e,f[e],!0);break;default:u.copyKeyFromObject(e,f)}}else{const x=e in dU?dU[e]({model:t,channel:d,fieldOrDatumDef:_,scaleType:m,scalePadding:l,scalePaddingInner:T,domain:f.domain,domainMin:f.domainMin,domainMax:f.domainMax,markDef:o,config:i,hasNestedOffsetScale:_F(s,d),hasSecondaryRangeChannel:!!s[ul(d)]}):i.scale[e];x!==void 0&&u.set(e,x,!1)}}}const dU={bins:({model:t,fieldOrDatumDef:e})=>Te(e)?kCe(t,e):void 0,interpolate:({channel:t,fieldOrDatumDef:e})=>ICe(t,e.type),nice:({scaleType:t,channel:e,domain:n,domainMin:i,domainMax:s,fieldOrDatumDef:o})=>FCe(t,e,n,i,s,o),padding:({channel:t,scaleType:e,fieldOrDatumDef:n,markDef:i,config:s})=>OCe(t,e,s.scale,n,i,s.bar),paddingInner:({scalePadding:t,channel:e,markDef:n,scaleType:i,config:s,hasNestedOffsetScale:o})=>MCe(t,e,n.type,i,s.scale,o),paddingOuter:({scalePadding:t,channel:e,scaleType:n,scalePaddingInner:i,config:s,hasNestedOffsetScale:o})=>ACe(t,e,n,i,s.scale,o),reverse:({fieldOrDatumDef:t,scaleType:e,channel:n,config:i})=>{const s=Te(t)?t.sort:void 0;return NCe(e,s,n,i.scale)},zero:({channel:t,fieldOrDatumDef:e,domain:n,markDef:i,scaleType:s,config:o,hasSecondaryRangeChannel:c})=>CCe(t,e,n,i,s,o.scale,c)};function dQ(t){Dn(t)?mCe(t):fQ(t,"range")}function fQ(t,e){const n=t.component.scales;for(const i of t.children)e==="range"?dQ(i):cQ(i,e);for(const i of we(n)){let s;for(const o of t.children){const c=o.component.scales[i];if(c){const d=c.getWithExplicit(e);s=vd(s,d,e,"scale",lJ((f,u)=>{switch(e){case"range":return f.step&&u.step?f.step-u.step:0}return 0}))}}n[i].setWithExplicit(e,s)}}function kCe(t,e){const n=e.bin;if(mn(n)){const i=GR(t,e.field,n);return new Ds(()=>t.getSignalName(i))}else if(Ei(n)&&Yu(n)&&n.step!==void 0)return{step:n.step}}function ICe(t,e){if(Mt([Ys,dl,fl],t)&&e!=="nominal")return"hcl"}function FCe(t,e,n,i,s,o){var c;if(!(((c=Ko(o))===null||c===void 0?void 0:c.bin)||he(n)||s!=null||i!=null||Mt([Ps.TIME,Ps.UTC],t)))return bi(e)?!0:void 0}function OCe(t,e,n,i,s,o){if(bi(t)){if(Ba(e)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:c,orient:d}=s;if(c==="bar"&&!(Te(i)&&(i.bin||i.timeUnit))&&(d==="vertical"&&t==="x"||d==="horizontal"&&t==="y"))return o.continuousBandSize}if(e===Ps.POINT)return n.pointPadding}}function MCe(t,e,n,i,s,o=!1){if(t===void 0){if(bi(e)){const{bandPaddingInner:c,barBandPaddingInner:d,rectBandPaddingInner:f,bandWithNestedOffsetPaddingInner:u}=s;return o?u:zn(c,n==="bar"?d:f)}else if(Sg(e)&&i===Ps.BAND)return s.offsetBandPaddingInner}}function ACe(t,e,n,i,s,o=!1){if(t===void 0){if(bi(e)){const{bandPaddingOuter:c,bandWithNestedOffsetPaddingOuter:d}=s;if(o)return d;if(n===Ps.BAND)return zn(c,Re(i)?{signal:`${i.signal}/2`}:i/2)}else if(Sg(e)){if(n===Ps.POINT)return .5;if(n===Ps.BAND)return s.offsetBandPaddingOuter}}}function NCe(t,e,n,i){if(n==="x"&&i.xReverse!==void 0)return Er(t)&&e==="descending"?Re(i.xReverse)?{signal:`!${i.xReverse.signal}`}:!i.xReverse:i.xReverse;if(Er(t)&&e==="descending")return!0}function CCe(t,e,n,i,s,o,c){if(!!n&&n!=="unaggregated"&&Er(s)){if(he(n)){const f=n[0],u=n[n.length-1];if(f<=0&&u>=0)return!0}return!1}if(t==="size"&&e.type==="quantitative"&&!Vp(s))return!0;if(!(Te(e)&&e.bin)&&Mt([...hl,...BIe],t)){const{orient:f,type:u}=i;return Mt(["bar","area","line","trail"],u)&&(f==="horizontal"&&t==="y"||f==="vertical"&&t==="x")?!1:Mt(["bar","area"],u)&&!c?!0:o==null?void 0:o.zero}return!1}function RCe(t,e,n,i,s=!1){const o=LCe(e,n,i,s),{type:c}=t;return Wd(e)?c!==void 0?A2e(e,c)?Te(n)&&!M2e(c,n.type)?(be(NFe(c,o)),o):c:(be(AFe(e,c,o)),o):o:null}function LCe(t,e,n,i){var s;switch(e.type){case"nominal":case"ordinal":{if(Qh(t)||FB(t)==="discrete")return t==="shape"&&e.type==="ordinal"&&be(OB(t,"ordinal")),"ordinal";if(bi(t)||Sg(t)){if(Mt(["rect","bar","image","rule"],n.type)||i)return"band"}else if(n.type==="arc"&&t in GC)return"band";const o=n[Ks(t)];return wu(o)||Hp(e)&&((s=e.axis)===null||s===void 0?void 0:s.tickBand)?"band":"point"}case"temporal":return Qh(t)?"time":FB(t)==="discrete"?(be(OB(t,"temporal")),"ordinal"):Te(e)&&e.timeUnit&&Ji(e.timeUnit).utc?"utc":"time";case"quantitative":return Qh(t)?Te(e)&&mn(e.bin)?"bin-ordinal":"linear":FB(t)==="discrete"?(be(OB(t,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(PX(e.type))}function PCe(t,{ignoreRange:e}={}){uQ(t),nQ(t);for(const n of O2e)cQ(t,n);e||dQ(t)}function uQ(t){Dn(t)?t.component.scales=DCe(t):t.component.scales=UCe(t)}function DCe(t){const{encoding:e,mark:n,markDef:i}=t,s={};for(const o of wS){const c=ni(e[o]);if(c&&n===rK&&o===Xs&&c.type===xg)continue;let d=c&&c.scale;if(Sg(o)){const f=TX(o);if(!_F(e,f)){d&&be(mFe(o));continue}}if(c&&d!==null&&d!==!1){d!=null||(d={});const f=_F(e,o),u=RCe(d,o,c,i,f);s[o]=new sQ(t.scaleName(`${o}`,!0),{value:u,explicit:d.type===u})}}return s}const jCe=lJ((t,e)=>bj(t)-bj(e));function UCe(t){var e,n;const i=t.component.scales={},s={},o=t.component.resolve;for(const c of t.children){uQ(c);for(const d of we(c.component.scales))if((e=(n=o.scale)[d])!==null&&e!==void 0||(n[d]=qJ(d,t)),o.scale[d]==="shared"){const f=s[d],u=c.component.scales[d].getWithExplicit("type");f?b2e(f.value,u.value)?s[d]=vd(f,u,"type","scale",jCe):(o.scale[d]="independent",delete s[d]):s[d]=u}}for(const c of we(s)){const d=t.scaleName(c,!0),f=s[c];i[c]=new sQ(d,f);for(const u of t.children){const a=u.component.scales[c];a&&(u.renameScale(a.get("name"),d),a.merged=!0)}}return i}var DB=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};class jB{constructor(){this.nameMap={}}rename(e,n){this.nameMap[e]=n}has(e){return this.nameMap[e]!==void 0}get(e){for(;this.nameMap[e]&&e!==this.nameMap[e];)e=this.nameMap[e];return e}}function Dn(t){return(t==null?void 0:t.type)==="unit"}function Na(t){return(t==null?void 0:t.type)==="facet"}function XR(t){return(t==null?void 0:t.type)==="concat"}function Og(t){return(t==null?void 0:t.type)==="layer"}class KR{constructor(e,n,i,s,o,c,d){var f,u;this.type=n,this.parent=i,this.config=o,this.correctDataNames=a=>{var _,w,m;return!((_=a.from)===null||_===void 0)&&_.data&&(a.from.data=this.lookupDataSource(a.from.data)),!((m=(w=a.from)===null||w===void 0?void 0:w.facet)===null||m===void 0)&&m.data&&(a.from.facet.data=this.lookupDataSource(a.from.facet.data)),a},this.parent=i,this.config=o,this.view=Fs(d),this.name=(f=e.name)!==null&&f!==void 0?f:s,this.title=Mc(e.title)?{text:e.title}:e.title?Fs(e.title):void 0,this.scaleNameMap=i?i.scaleNameMap:new jB,this.projectionNameMap=i?i.projectionNameMap:new jB,this.signalNameMap=i?i.signalNameMap:new jB,this.data=e.data,this.description=e.description,this.transforms=qMe((u=e.transform)!==null&&u!==void 0?u:[]),this.layout=n==="layer"||n==="unit"?{}:XOe(e,n,o),this.component={data:{sources:i?i.component.data.sources:[],outputNodes:i?i.component.data.outputNodes:{},outputNodeRefCounts:i?i.component.data.outputNodeRefCounts:{},isFaceted:kS(e)||(i==null?void 0:i.component.data.isFaceted)&&e.data===void 0},layoutSize:new uc,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:Object.assign({scale:{},axis:{},legend:{}},c?ft(c):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){PCe(this)}parseProjection(){ZJ(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){YJ(this)}assembleEncodeFromView(e){const n=DB(e,["style"]),i={};for(const s of we(n)){const o=n[s];o!==void 0&&(i[s]=Tn(o))}return i}assembleGroupEncodeEntry(e){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!e&&(this.description&&(n.description=Tn(this.description)),this.type==="unit"||this.type==="layer")?Object.assign({width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")},n!=null?n:{}):ln(n)?void 0:n}assembleLayout(){if(!this.layout)return;const e=this.layout,{spacing:n}=e,i=DB(e,["spacing"]),{component:s,config:o}=this,c=iNe(s.layoutHeaders,o);return Object.assign(Object.assign(Object.assign({padding:n},this.assembleDefaultLayout()),i),c?{titleBand:c}:{})}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:e}=this.component;let n=[];for(const i of Pr)e[i].title&&n.push(JAe(this,i));for(const i of UR)n=n.concat(QAe(this,i));return n}assembleAxes(){return jAe(this.component.axes,this.config)}assembleLegends(){return KJ(this)}assembleProjections(){return kNe(this)}assembleTitle(){var e,n,i;const s=(e=this.title)!==null&&e!==void 0?e:{},{encoding:o}=s,c=DB(s,["encoding"]),d=Object.assign(Object.assign(Object.assign({},IX(this.config.title).nonMarkTitleProperties),c),o?{encode:{update:o}}:{});if(d.text)return Mt(["unit","layer"],this.type)?Mt(["middle",void 0],d.anchor)&&((n=d.frame)!==null&&n!==void 0||(d.frame="group")):(i=d.anchor)!==null&&i!==void 0||(d.anchor="start"),ln(d)?void 0:d}assembleGroup(e=[]){const n={};e=e.concat(this.assembleSignals()),e.length>0&&(n.signals=e);const i=this.assembleLayout();i&&(n.layout=i),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const s=!this.parent||Na(this.parent)?iQ(this):[];s.length>0&&(n.scales=s);const o=this.assembleAxes();o.length>0&&(n.axes=o);const c=this.assembleLegends();return c.length>0&&(n.legends=c),n}getName(e){return xn((this.name?`${this.name}_`:"")+e)}getDataName(e){return this.getName(_n[e].toLowerCase())}requestDataName(e){const n=this.getDataName(e),i=this.component.data.outputNodeRefCounts;return i[n]=(i[n]||0)+1,n}getSizeSignalRef(e){if(Na(this.parent)){const n=$J(e),i=mS(n),s=this.component.scales[i];if(s&&!s.merged){const o=s.get("type"),c=s.get("range");if(Ti(o)&&Yd(c)){const d=s.get("name"),f=$S(this,i),u=YR(f);if(u){const a=xe({aggregate:"distinct",field:u},{expr:"datum"});return{signal:UJ(d,s,a)}}else return be(YC(i)),null}}}return{signal:this.signalNameMap.get(this.getName(e))}}lookupDataSource(e){const n=this.component.data.outputNodes[e];return n?n.getSource():e}getSignalName(e){return this.signalNameMap.get(e)}renameSignal(e,n){this.signalNameMap.rename(e,n)}renameScale(e,n){this.scaleNameMap.rename(e,n)}renameProjection(e,n){this.projectionNameMap.rename(e,n)}scaleName(e,n){if(n)return this.getName(e);if(mX(e)&&Wd(e)&&this.component.scales[e]||this.scaleNameMap.has(this.getName(e)))return this.scaleNameMap.get(this.getName(e))}projectionName(e){if(e)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(e){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[e];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(e):void 0}getSelectionComponent(e,n){let i=this.component.selection[e];if(!i&&this.parent&&(i=this.parent.getSelectionComponent(e,n)),!i)throw new Error(KIe(n));return i}hasAxisOrientSignalRef(){var e,n;return((e=this.component.axes.x)===null||e===void 0?void 0:e.some(i=>i.hasOrientSignalRef()))||((n=this.component.axes.y)===null||n===void 0?void 0:n.some(i=>i.hasOrientSignalRef()))}}class hQ extends KR{vgField(e,n={}){const i=this.fieldDef(e);if(!!i)return xe(i,n)}reduceFieldDef(e,n){return EOe(this.getMapping(),(i,s,o)=>{const c=Ko(s);return c?e(i,c,o):i},n)}forEachFieldDef(e,n){vR(this.getMapping(),(i,s)=>{const o=Ko(i);o&&e(o,s)},n)}}var $Ce=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};class zS extends fn{constructor(e,n){var i,s,o;super(e),this.transform=n,this.transform=ft(n);const c=(i=this.transform.as)!==null&&i!==void 0?i:[void 0,void 0];this.transform.as=[(s=c[0])!==null&&s!==void 0?s:"value",(o=c[1])!==null&&o!==void 0?o:"density"],n.groupby&&n.minsteps==null&&n.maxsteps==null&&n.steps==null&&(this.transform.steps=200)}clone(){return new zS(null,ft(this.transform))}dependentFields(){var e;return new Set([this.transform.density,...(e=this.transform.groupby)!==null&&e!==void 0?e:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Pt(this.transform)}`}assemble(){const e=this.transform,{density:n}=e,i=$Ce(e,["density"]);return Object.assign({type:"kde",field:n},i)}}class Gy extends fn{constructor(e,n){super(e),this.filter=n}clone(){return new Gy(null,Object.assign({},this.filter))}static make(e,n){const{config:i,mark:s,markDef:o}=n;if(rn("invalid",o,i)!=="filter")return null;const d=n.reduceFieldDef((f,u,a)=>{const _=Wd(a)&&n.getScaleComponent(a);if(_){const w=_.get("type");Er(w)&&u.aggregate!=="count"&&!Xd(s)&&(f[u.field]=u)}return f},{});return we(d).length?new Gy(e,d):null}dependentFields(){return new Set(we(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Pt(this.filter)}`}assemble(){const e=we(this.filter).reduce((n,i)=>{const s=this.filter[i],o=xe(s,{expr:"datum"});return s!==null&&(s.type==="temporal"?n.push(`(isDate(${o}) || (isValid(${o}) && isFinite(+${o})))`):s.type==="quantitative"&&(n.push(`isValid(${o})`),n.push(`isFinite(+${o})`))),n},[]);return e.length>0?{type:"filter",expr:e.join(" && ")}:null}}class qS extends fn{constructor(e,n){super(e),this.transform=n,this.transform=ft(n);const{flatten:i,as:s=[]}=this.transform;this.transform.as=i.map((o,c)=>{var d;return(d=s[c])!==null&&d!==void 0?d:o})}clone(){return new qS(this.parent,ft(this.transform))}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Pt(this.transform)}`}assemble(){const{flatten:e,as:n}=this.transform;return{type:"flatten",fields:e,as:n}}}class GS extends fn{constructor(e,n){var i,s,o;super(e),this.transform=n,this.transform=ft(n);const c=(i=this.transform.as)!==null&&i!==void 0?i:[void 0,void 0];this.transform.as=[(s=c[0])!==null&&s!==void 0?s:"key",(o=c[1])!==null&&o!==void 0?o:"value"]}clone(){return new GS(null,ft(this.transform))}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Pt(this.transform)}`}assemble(){const{fold:e,as:n}=this.transform;return{type:"fold",fields:e,as:n}}}class tp extends fn{constructor(e,n,i,s){super(e),this.fields=n,this.geojson=i,this.signal=s}clone(){return new tp(null,ft(this.fields),this.geojson,this.signal)}static parseAll(e,n){if(n.component.projection&&!n.component.projection.isFit)return e;let i=0;for(const s of[[cl,ll],[Qr,Ha]]){const o=s.map(c=>{const d=ni(n.encoding[c]);return Te(d)?d.field:pl(d)?{expr:`${d.datum}`}:Da(d)?{expr:`${d.value}`}:void 0});(o[0]||o[1])&&(e=new tp(e,o,null,n.getName(`geojson_${i++}`)))}if(n.channelHasField(Xs)){const s=n.typedFieldDef(Xs);s.type===xg&&(e=new tp(e,null,s.field,n.getName(`geojson_${i++}`)))}return e}dependentFields(){var e;const n=((e=this.fields)!==null&&e!==void 0?e:[]).filter(ke);return new Set([...this.geojson?[this.geojson]:[],...n])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Pt(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],Object.assign(Object.assign(Object.assign({type:"geojson"},this.fields?{fields:this.fields}:{}),this.geojson?{geojson:this.geojson}:{}),{signal:this.signal})]}}class Vy extends fn{constructor(e,n,i,s){super(e),this.projection=n,this.fields=i,this.as=s}clone(){return new Vy(null,this.projection,ft(this.fields),ft(this.as))}static parseAll(e,n){if(!n.projectionName())return e;for(const i of[[cl,ll],[Qr,Ha]]){const s=i.map(c=>{const d=ni(n.encoding[c]);return Te(d)?d.field:pl(d)?{expr:`${d.datum}`}:Da(d)?{expr:`${d.value}`}:void 0}),o=i[0]===Qr?"2":"";(s[0]||s[1])&&(e=new Vy(e,n.projectionName(),s,[n.getName(`x${o}`),n.getName(`y${o}`)]))}return e}dependentFields(){return new Set(this.fields.filter(ke))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Pt(this.fields)} ${Pt(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Xf extends fn{constructor(e,n){super(e),this.transform=n}clone(){return new Xf(null,ft(this.transform))}dependentFields(){var e;return new Set([this.transform.impute,this.transform.key,...(e=this.transform.groupby)!==null&&e!==void 0?e:[]])}producedFields(){return new Set([this.transform.impute])}processSequence(e){const{start:n=0,stop:i,step:s}=e;return{signal:`sequence(${[n,i,...s?[s]:[]].join(",")})`}}static makeFromTransform(e,n){return new Xf(e,n)}static makeFromEncoding(e,n){const i=n.encoding,s=i.x,o=i.y;if(Te(s)&&Te(o)){const c=s.impute?s:o.impute?o:void 0;if(c===void 0)return;const d=s.impute?o:o.impute?s:void 0,{method:f,value:u,frame:a,keyvals:_}=c.impute,w=MK(n.mark,i);return new Xf(e,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({impute:c.field,key:d.field},f?{method:f}:{}),u!==void 0?{value:u}:{}),a?{frame:a}:{}),_!==void 0?{keyvals:_}:{}),w.length?{groupby:w}:{}))}return null}hash(){return`Impute ${Pt(this.transform)}`}assemble(){const{impute:e,key:n,keyvals:i,method:s,groupby:o,value:c,frame:d=[null,null]}=this.transform,f=Object.assign(Object.assign(Object.assign(Object.assign({type:"impute",field:e,key:n},i?{keyvals:xMe(i)?this.processSequence(i):i}:{}),{method:"value"}),o?{groupby:o}:{}),{value:!s||s==="value"?c:null});if(s&&s!=="value"){const u=Object.assign({type:"window",as:[`imputed_${e}_value`],ops:[s],fields:[e],frame:d,ignorePeers:!1},o?{groupby:o}:{}),a={type:"formula",expr:`datum.${e} === null ? datum.imputed_${e}_value : datum.${e}`,as:e};return[f,u,a]}else return[f]}}var zCe=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};class VS extends fn{constructor(e,n){var i,s,o;super(e),this.transform=n,this.transform=ft(n);const c=(i=this.transform.as)!==null&&i!==void 0?i:[void 0,void 0];this.transform.as=[(s=c[0])!==null&&s!==void 0?s:n.on,(o=c[1])!==null&&o!==void 0?o:n.loess]}clone(){return new VS(null,ft(this.transform))}dependentFields(){var e;return new Set([this.transform.loess,this.transform.on,...(e=this.transform.groupby)!==null&&e!==void 0?e:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Pt(this.transform)}`}assemble(){const e=this.transform,{loess:n,on:i}=e,s=zCe(e,["loess","on"]);return Object.assign({type:"loess",x:i,y:n},s)}}class Wy extends fn{constructor(e,n,i){super(e),this.transform=n,this.secondary=i}clone(){return new Wy(null,ft(this.transform),this.secondary)}static make(e,n,i,s){const o=n.component.data.sources,{from:c}=i;let d=null;if(BMe(c)){let f=_Q(c.data,o);f||(f=new Eu(c.data),o.push(f));const u=n.getName(`lookup_${s}`);d=new gs(f,u,_n.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[u]=d}else if(kMe(c)){const f=c.param;i=Object.assign({as:f},i);let u;try{u=n.getSelectionComponent(xn(f),f)}catch{throw new Error(ZIe(f))}if(d=u.materialized,!d)throw new Error(eFe(f))}return new Wy(e,i,d.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Ie(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Pt({transform:this.transform,secondary:this.secondary})}`}assemble(){let e;if(this.transform.from.fields)e=Object.assign({values:this.transform.from.fields},this.transform.as?{as:Ie(this.transform.as)}:{});else{let n=this.transform.as;ke(n)||(be(lFe),n="_lookup"),e={as:[n]}}return Object.assign(Object.assign({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},e),this.transform.default?{default:this.transform.default}:{})}}var qCe=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};class WS extends fn{constructor(e,n){var i,s,o;super(e),this.transform=n,this.transform=ft(n);const c=(i=this.transform.as)!==null&&i!==void 0?i:[void 0,void 0];this.transform.as=[(s=c[0])!==null&&s!==void 0?s:"prob",(o=c[1])!==null&&o!==void 0?o:"value"]}clone(){return new WS(null,ft(this.transform))}dependentFields(){var e;return new Set([this.transform.quantile,...(e=this.transform.groupby)!==null&&e!==void 0?e:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Pt(this.transform)}`}assemble(){const e=this.transform,{quantile:n}=e,i=qCe(e,["quantile"]);return Object.assign({type:"quantile",field:n},i)}}var GCe=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};class HS extends fn{constructor(e,n){var i,s,o;super(e),this.transform=n,this.transform=ft(n);const c=(i=this.transform.as)!==null&&i!==void 0?i:[void 0,void 0];this.transform.as=[(s=c[0])!==null&&s!==void 0?s:n.on,(o=c[1])!==null&&o!==void 0?o:n.regression]}clone(){return new HS(null,ft(this.transform))}dependentFields(){var e;return new Set([this.transform.regression,this.transform.on,...(e=this.transform.groupby)!==null&&e!==void 0?e:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Pt(this.transform)}`}assemble(){const e=this.transform,{regression:n,on:i}=e,s=GCe(e,["regression","on"]);return Object.assign({type:"regression",x:i,y:n},s)}}class YS extends fn{constructor(e,n){super(e),this.transform=n}clone(){return new YS(null,ft(this.transform))}addDimensions(e){var n;this.transform.groupby=So(((n=this.transform.groupby)!==null&&n!==void 0?n:[]).concat(e),i=>i)}producedFields(){}dependentFields(){var e;return new Set([this.transform.pivot,this.transform.value,...(e=this.transform.groupby)!==null&&e!==void 0?e:[]])}hash(){return`PivotTransform ${Pt(this.transform)}`}assemble(){const{pivot:e,value:n,groupby:i,limit:s,op:o}=this.transform;return Object.assign(Object.assign(Object.assign({type:"pivot",field:e,value:n},s!==void 0?{limit:s}:{}),o!==void 0?{op:o}:{}),i!==void 0?{groupby:i}:{})}}class XS extends fn{constructor(e,n){super(e),this.transform=n}clone(){return new XS(null,ft(this.transform))}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Pt(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function pQ(t){let e=0;function n(i,s){var o;if(i instanceof Eu&&!i.isGenerator&&!Xp(i.data)&&(t.push(s),s={name:null,source:s.name,transform:[]}),i instanceof zi&&(i.parent instanceof Eu&&!s.source?(s.format=Object.assign(Object.assign({},(o=s.format)!==null&&o!==void 0?o:{}),{parse:i.assembleFormatParse()}),s.transform.push(...i.assembleTransforms(!0))):s.transform.push(...i.assembleTransforms())),i instanceof Ig){s.name||(s.name=`data_${e++}`),!s.source||s.transform.length>0?(t.push(s),i.data=s.name):i.data=s.source,t.push(...i.assemble());return}switch((i instanceof sw||i instanceof rw||i instanceof Gy||i instanceof kg||i instanceof Jp||i instanceof Vy||i instanceof Aa||i instanceof Wy||i instanceof Fg||i instanceof Qu||i instanceof GS||i instanceof qS||i instanceof zS||i instanceof VS||i instanceof WS||i instanceof HS||i instanceof Bd||i instanceof XS||i instanceof YS)&&s.transform.push(i.assemble()),(i instanceof No||i instanceof Ao||i instanceof Xf||i instanceof Vl||i instanceof tp)&&s.transform.push(...i.assemble()),i instanceof gs&&(s.source&&s.transform.length===0?i.setSource(s.source):i.parent instanceof gs?i.setSource(s.name):(s.name||(s.name=`data_${e++}`),i.setSource(s.name),i.numChildren()===1&&(t.push(s),s={name:null,source:s.name,transform:[]}))),i.numChildren()){case 0:i instanceof gs&&(!s.source||s.transform.length>0)&&t.push(s);break;case 1:n(i.children[0],s);break;default:{s.name||(s.name=`data_${e++}`);let c=s.name;!s.source||s.transform.length>0?t.push(s):c=s.source;for(const d of i.children)n(d,{name:null,source:c,transform:[]});break}}}return n}function VCe(t){const e=[],n=pQ(e);for(const i of t.children)n(i,{source:t.name,name:null,transform:[]});return e}function WCe(t,e){var n,i;const s=[],o=pQ(s);let c=0;for(const f of t.sources){f.hasName()||(f.dataName=`source_${c++}`);const u=f.assemble();o(f,u)}for(const f of s)f.transform.length===0&&delete f.transform;let d=0;for(const[f,u]of s.entries())((n=u.transform)!==null&&n!==void 0?n:[]).length===0&&!u.source&&s.splice(d++,0,s.splice(f,1)[0]);for(const f of s)for(const u of(i=f.transform)!==null&&i!==void 0?i:[])u.type==="lookup"&&(u.from=t.outputNodes[u.from].getSource());for(const f of s)f.name in e&&(f.values=e[f.name]);return s}function HCe(t){return t==="top"||t==="left"||Re(t)?"header":"footer"}function YCe(t){for(const e of Pr)XCe(t,e);fU(t,"x"),fU(t,"y")}function XCe(t,e){var n;const{facet:i,config:s,child:o,component:c}=t;if(t.channelHasField(e)){const d=i[e],f=Zp("title",null,s,e);let u=Zh(d,s,{allowDisabling:!0,includeDefault:f===void 0||!!f});o.component.layoutHeaders[e].title&&(u=he(u)?u.join(", "):u,u+=` / ${o.component.layoutHeaders[e].title}`,o.component.layoutHeaders[e].title=null);const a=Zp("labelOrient",d.header,s,e),_=d.header!==null?zn((n=d.header)===null||n===void 0?void 0:n.labels,s.header.labels,!0):!1,w=Mt(["bottom","right"],a)?"footer":"header";c.layoutHeaders[e]={title:d.header!==null?u:null,facetFieldDef:d,[w]:e==="facet"?[]:[gQ(t,e,_)]}}}function gQ(t,e,n){const i=e==="row"?"height":"width";return{labels:n,sizeSignal:t.child.component.layoutSize.get(i)?t.child.getSizeSignalRef(i):void 0,axes:[]}}function fU(t,e){var n;const{child:i}=t;if(i.component.axes[e]){const{layoutHeaders:s,resolve:o}=t.component;if(o.axis[e]=qR(o,e),o.axis[e]==="shared"){const c=e==="x"?"column":"row",d=s[c];for(const f of i.component.axes[e]){const u=HCe(f.get("orient"));(n=d[u])!==null&&n!==void 0||(d[u]=[gQ(t,c,!1)]);const a=F_(f,"main",t.config,{header:!0});a&&d[u][0].axes.push(a),f.mainExtracted=!0}}}}function KCe(t){JR(t),S1(t,"width"),S1(t,"height")}function JCe(t){JR(t);const e=t.layout.columns===1?"width":"childWidth",n=t.layout.columns===void 0?"height":"childHeight";S1(t,e),S1(t,n)}function JR(t){for(const e of t.children)e.parseLayoutSize()}function S1(t,e){var n;const i=$J(e),s=mS(i),o=t.component.resolve,c=t.component.layoutSize;let d;for(const f of t.children){const u=f.component.layoutSize.getWithExplicit(i),a=(n=o.scale[s])!==null&&n!==void 0?n:qJ(s,t);if(a==="independent"&&u.value==="step"){d=void 0;break}if(d){if(a==="independent"&&d.value!==u.value){d=void 0;break}d=vd(d,u,i,"")}else d=u}if(d){for(const f of t.children)t.renameSignal(f.getName(i),t.getName(e)),f.component.layoutSize.set(i,"merged",!1);c.setWithExplicit(e,d)}else c.setWithExplicit(e,{explicit:!1,value:void 0})}function QCe(t){const{size:e,component:n}=t;for(const i of hl){const s=Ks(i);if(e[s]){const o=e[s];n.layoutSize.set(s,Qo(o)?"step":o,!0)}else{const o=ZCe(t,s);n.layoutSize.set(s,o,!1)}}}function ZCe(t,e){const n=e==="width"?"x":"y",i=t.config,s=t.getScaleComponent(n);if(s){const o=s.get("type"),c=s.get("range");if(Ti(o)){const d=b1(i.view,e);return Yd(c)||Qo(d)?"step":d}else return mF(i.view,e)}else{if(t.hasProjection||t.mark==="arc")return mF(i.view,e);{const o=b1(i.view,e);return Qo(o)?o.step:o}}}function CF(t,e,n){return xe(e,Object.assign({suffix:`by_${xe(t)}`},n!=null?n:{}))}class Y_ extends hQ{constructor(e,n,i,s){super(e,"facet",n,i,s,e.resolve),this.child=n3(e.spec,this,this.getName("child"),void 0,s),this.children=[this.child],this.facet=this.initFacet(e.facet)}initFacet(e){if(!Zm(e))return{facet:this.initFacetFieldDef(e,"facet")};const n=we(e),i={};for(const s of n){if(![zl,ql].includes(s)){be(TS(s,"facet"));break}const o=e[s];if(o.field===void 0){be(dF(o,s));break}i[s]=this.initFacetFieldDef(o,s)}return i}initFacetFieldDef(e,n){const i=bR(e,n);return i.header?i.header=Fs(i.header):i.header===null&&(i.header=null),i}channelHasField(e){return!!this.facet[e]}fieldDef(e){return this.facet[e]}parseData(){this.component.data=KS(this),this.child.parseData()}parseLayoutSize(){JR(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),YCe(this)}assembleSelectionTopLevelSignals(e){return this.child.assembleSelectionTopLevelSignals(e)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(e){return this.child.assembleSelectionData(e)}getHeaderLayoutMixins(){var e,n,i;const s={};for(const o of Pr)for(const c of $R){const d=this.component.layoutHeaders[o],f=d[c],{facetFieldDef:u}=d;if(u){const a=Zp("titleOrient",u.header,this.config,o);if(["right","bottom"].includes(a)){const _=jS(o,a);(e=s.titleAnchor)!==null&&e!==void 0||(s.titleAnchor={}),s.titleAnchor[_]="end"}}if(f!=null&&f[0]){const a=o==="row"?"height":"width",_=c==="header"?"headerBand":"footerBand";o!=="facet"&&!this.child.component.layoutSize.get(a)&&((n=s[_])!==null&&n!==void 0||(s[_]={}),s[_][o]=.5),d.title&&((i=s.offset)!==null&&i!==void 0||(s.offset={}),s.offset[o==="row"?"rowTitle":"columnTitle"]=10)}}return s}assembleDefaultLayout(){const{column:e,row:n}=this.facet,i=e?this.columnDistinctSignal():n?1:void 0;let s="all";return(!n&&this.component.resolve.scale.x==="independent"||!e&&this.component.resolve.scale.y==="independent")&&(s="none"),Object.assign(Object.assign(Object.assign({},this.getHeaderLayoutMixins()),i?{columns:i}:{}),{bounds:"full",align:s})}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof Y_))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(e){return this.parent&&this.parent instanceof Y_?Object.assign(Object.assign({},this.channelHasField("column")?{encode:{update:{columns:{field:xe(this.facet.column,{prefix:"distinct"})}}}}:{}),super.assembleGroup(e)):super.assembleGroup(e)}getCardinalityAggregateForChild(){const e=[],n=[],i=[];if(this.child instanceof Y_){if(this.child.channelHasField("column")){const s=xe(this.child.facet.column);e.push(s),n.push("distinct"),i.push(`distinct_${s}`)}}else for(const s of hl){const o=this.child.component.scales[s];if(o&&!o.merged){const c=o.get("type"),d=o.get("range");if(Ti(c)&&Yd(d)){const f=$S(this.child,s),u=YR(f);u?(e.push(u),n.push("distinct"),i.push(`distinct_${u}`)):be(YC(s))}}}return{fields:e,ops:n,as:i}}assembleFacet(){const{name:e,data:n}=this.component.data.facetRoot,{row:i,column:s}=this.facet,{fields:o,ops:c,as:d}=this.getCardinalityAggregateForChild(),f=[];for(const a of Pr){const _=this.facet[a];if(_){f.push(xe(_));const{bin:w,sort:m}=_;if(mn(w)&&f.push(xe(_,{binSuffix:"end"})),Mo(m)){const{field:l,op:T=BS}=m,b=CF(_,m);i&&s?(o.push(b),c.push("max"),d.push(b)):(o.push(l),c.push(T),d.push(b))}else if(he(m)){const l=Qp(_,a);o.push(l),c.push("max"),d.push(l)}}}const u=!!i&&!!s;return Object.assign({name:e,data:n,groupby:f},u||o.length>0?{aggregate:Object.assign(Object.assign({},u?{cross:u}:{}),o.length?{fields:o,ops:c,as:d}:{})}:{})}facetSortFields(e){const{facet:n}=this,i=n[e];return i?Mo(i.sort)?[CF(i,i.sort,{expr:"datum"})]:he(i.sort)?[Qp(i,e,{expr:"datum"})]:[xe(i,{expr:"datum"})]:[]}facetSortOrder(e){const{facet:n}=this,i=n[e];if(i){const{sort:s}=i;return[(Mo(s)?s.order:!he(s)&&s)||"ascending"]}return[]}assembleLabelTitle(){var e;const{facet:n,config:i}=this;if(n.facet)return IF(n.facet,"facet",i);const s={row:["top","bottom"],column:["left","right"]};for(const o of UR)if(n[o]){const c=Zp("labelOrient",(e=n[o])===null||e===void 0?void 0:e.header,i,o);if(s[o].includes(c))return IF(n[o],o,i)}}assembleMarks(){const{child:e}=this,n=this.component.data.facetRoot,i=VCe(n),s=e.assembleGroupEncodeEntry(!1),o=this.assembleLabelTitle()||e.assembleTitle(),c=e.assembleGroupStyle();return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:this.getName("cell"),type:"group"},o?{title:o}:{}),c?{style:c}:{}),{from:{facet:this.assembleFacet()},sort:{field:Pr.map(f=>this.facetSortFields(f)).flat(),order:Pr.map(f=>this.facetSortOrder(f)).flat()}}),i.length>0?{data:i}:{}),s?{encode:{update:s}}:{}),e.assembleGroup(nAe(this,[])))]}getMapping(){return this.facet}}function eRe(t,e){const{row:n,column:i}=e;if(n&&i){let s=null;for(const o of[n,i])if(Mo(o.sort)){const{field:c,op:d=BS}=o.sort;t=s=new Qu(t,{joinaggregate:[{op:d,field:c,as:CF(o,o.sort,{forAs:!0})}],groupby:[xe(o)]})}return s}return null}function _Q(t,e){var n,i,s,o;for(const c of e){const d=c.data;if(t.name&&c.hasName()&&t.name!==c.dataName)continue;const f=(n=t.format)===null||n===void 0?void 0:n.mesh,u=(i=d.format)===null||i===void 0?void 0:i.feature;if(f&&u)continue;const a=(s=t.format)===null||s===void 0?void 0:s.feature;if((a||u)&&a!==u)continue;const _=(o=d.format)===null||o===void 0?void 0:o.mesh;if(!((f||_)&&f!==_)){if(zy(t)&&zy(d)){if(Eo(t.values,d.values))return c}else if(Xp(t)&&Xp(d)){if(t.url===d.url)return c}else if(cJ(t)&&t.name===c.dataName)return c}}return null}function tRe(t,e){if(t.data||!t.parent){if(t.data===null){const i=new Eu({values:[]});return e.push(i),i}const n=_Q(t.data,e);if(n)return Qc(t.data)||(n.data.format=lX({},t.data.format,n.data.format)),!n.hasName()&&t.data.name&&(n.dataName=t.data.name),n;{const i=new Eu(t.data);return e.push(i),i}}else return t.parent.component.data.facetRoot?t.parent.component.data.facetRoot:t.parent.component.data.main}function nRe(t,e,n){var i,s;let o=0;for(const c of e.transforms){let d,f;if(PMe(c))f=t=new Jp(t,c),d="derived";else if(NR(c)){const u=$Ne(c);f=t=(i=zi.makeWithAncestors(t,{},u,n))!==null&&i!==void 0?i:t,t=new kg(t,e,c.filter)}else if(iJ(c))f=t=No.makeFromTransform(t,c,e),d="number";else if(jMe(c))d="date",n.getWithExplicit(c.field).value===void 0&&(t=new zi(t,{[c.field]:d}),n.set(c.field,d,!1)),f=t=Ao.makeFromTransform(t,c);else if(UMe(c))f=t=Aa.makeFromTransform(t,c),d="number",jR(e)&&(t=new Bd(t));else if(nJ(c))f=t=Wy.make(t,e,c,o++),d="derived";else if(CMe(c))f=t=new Fg(t,c),d="number";else if(RMe(c))f=t=new Qu(t,c),d="number";else if($Me(c))f=t=Vl.makeFromTransform(t,c),d="derived";else if(zMe(c))f=t=new GS(t,c),d="derived";else if(LMe(c))f=t=new qS(t,c),d="derived";else if(IMe(c))f=t=new YS(t,c),d="derived";else if(NMe(c))t=new XS(t,c);else if(DMe(c))f=t=Xf.makeFromTransform(t,c),d="derived";else if(FMe(c))f=t=new zS(t,c),d="derived";else if(OMe(c))f=t=new WS(t,c),d="derived";else if(MMe(c))f=t=new HS(t,c),d="derived";else if(AMe(c))f=t=new VS(t,c),d="derived";else{be(oFe(c));continue}if(f&&d!==void 0)for(const u of(s=f.producedFields())!==null&&s!==void 0?s:[])n.set(u,d,!1)}return t}function KS(t){var e,n,i,s,o,c,d,f,u,a;let _=tRe(t,t.component.data.sources);const{outputNodes:w,outputNodeRefCounts:m}=t.component.data,l=t.data,b=!(l&&(Qc(l)||Xp(l)||zy(l)))&&t.parent?t.parent.component.data.ancestorParse.clone():new ZMe;Qc(l)?(dJ(l)?_=new rw(_,l.sequence):CR(l)&&(_=new sw(_,l.graticule)),b.parseNothing=!0):((e=l==null?void 0:l.format)===null||e===void 0?void 0:e.parse)===null&&(b.parseNothing=!0),_=(n=zi.makeExplicit(_,t,b))!==null&&n!==void 0?n:_,_=new Bd(_);const S=t.parent&&Og(t.parent);(Dn(t)||Na(t))&&S&&(_=(i=No.makeFromEncoding(_,t))!==null&&i!==void 0?i:_),t.transforms.length>0&&(_=nRe(_,t,b));const x=qNe(t),B=zNe(t);_=(s=zi.makeWithAncestors(_,{},Object.assign(Object.assign({},x),B),b))!==null&&s!==void 0?s:_,Dn(t)&&(_=tp.parseAll(_,t),_=Vy.parseAll(_,t)),(Dn(t)||Na(t))&&(S||(_=(o=No.makeFromEncoding(_,t))!==null&&o!==void 0?o:_),_=(c=Ao.makeFromEncoding(_,t))!==null&&c!==void 0?c:_,_=Jp.parseAllForSortIndex(_,t));const F=t.getDataName(_n.Raw),k=new gs(_,F,_n.Raw,m);if(w[F]=k,_=k,Dn(t)){const P=Aa.makeFromEncoding(_,t);P&&(_=P,jR(t)&&(_=new Bd(_))),_=(d=Xf.makeFromEncoding(_,t))!==null&&d!==void 0?d:_,_=(f=Vl.makeFromEncoding(_,t))!==null&&f!==void 0?f:_}Dn(t)&&(_=(u=Gy.make(_,t))!==null&&u!==void 0?u:_);const M=t.getDataName(_n.Main),A=new gs(_,M,_n.Main,m);w[M]=A,_=A,Dn(t)&&PAe(t,A);let R=null;if(Na(t)){const P=t.getName("facet");_=(a=eRe(_,t.facet))!==null&&a!==void 0?a:_,R=new Ig(_,t,P,A.getSource()),w[P]=R}return Object.assign(Object.assign({},t.component.data),{outputNodes:w,outputNodeRefCounts:m,raw:k,main:A,facetRoot:R,ancestorParse:b})}class iRe extends KR{constructor(e,n,i,s){var o,c,d,f;super(e,"concat",n,i,s,e.resolve),(((c=(o=e.resolve)===null||o===void 0?void 0:o.axis)===null||c===void 0?void 0:c.x)==="shared"||((f=(d=e.resolve)===null||d===void 0?void 0:d.axis)===null||f===void 0?void 0:f.y)==="shared")&&be(sFe),this.children=this.getChildren(e).map((u,a)=>n3(u,this,this.getName(`concat_${a}`),void 0,s))}parseData(){this.component.data=KS(this);for(const e of this.children)e.parseData()}parseSelections(){this.component.selection={};for(const e of this.children){e.parseSelections();for(const n of we(e.component.selection))this.component.selection[n]=e.component.selection[n]}}parseMarkGroup(){for(const e of this.children)e.parseMarkGroup()}parseAxesAndHeaders(){for(const e of this.children)e.parseAxesAndHeaders()}getChildren(e){return CS(e)?e.vconcat:MR(e)?e.hconcat:e.concat}parseLayoutSize(){JCe(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(e){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),e)}assembleSignals(){return this.children.forEach(e=>e.assembleSignals()),[]}assembleLayoutSignals(){const e=zR(this);for(const n of this.children)e.push(...n.assembleLayoutSignals());return e}assembleSelectionData(e){return this.children.reduce((n,i)=>i.assembleSelectionData(n),e)}assembleMarks(){return this.children.map(e=>{const n=e.assembleTitle(),i=e.assembleGroupStyle(),s=e.assembleGroupEncodeEntry(!1);return Object.assign(Object.assign(Object.assign(Object.assign({type:"group",name:e.getName("group")},n?{title:n}:{}),i?{style:i}:{}),s?{encode:{update:s}}:{}),e.assembleGroup())})}assembleGroupStyle(){}assembleDefaultLayout(){const e=this.layout.columns;return Object.assign(Object.assign({},e!=null?{columns:e}:{}),{bounds:"full",align:"each"})}}function sRe(t){return t===!1||t===null}const rRe=Object.assign(Object.assign({disable:1,gridScale:1,scale:1},kK),{labelExpr:1,encode:1}),yQ=we(rRe);class QR extends uc{constructor(e={},n={},i=!1){super(),this.explicit=e,this.implicit=n,this.mainExtracted=i}clone(){return new QR(ft(this.explicit),ft(this.implicit),this.mainExtracted)}hasAxisPart(e){return e==="axis"?!0:e==="grid"||e==="title"?!!this.get(e):!sRe(this.get(e))}hasOrientSignalRef(){return Re(this.explicit.orient)}}function aRe(t,e,n){var i;const{encoding:s,config:o}=t,c=(i=ni(s[e]))!==null&&i!==void 0?i:ni(s[ul(e)]),d=t.axis(e)||{},{format:f,formatType:u}=d;if(bu(u))return Object.assign({text:ka({fieldOrDatumDef:c,field:"datum.value",format:f,formatType:u,config:o})},n);if(f===void 0&&u===void 0&&o.customFormatTypes){if(Wp(c)==="quantitative"){if(Hp(c)&&c.stack==="normalize"&&o.normalizedNumberFormatType)return Object.assign({text:ka({fieldOrDatumDef:c,field:"datum.value",format:o.normalizedNumberFormat,formatType:o.normalizedNumberFormatType,config:o})},n);if(o.numberFormatType)return Object.assign({text:ka({fieldOrDatumDef:c,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o})},n)}if(Wp(c)==="temporal"&&o.timeFormatType&&Te(c)&&!c.timeUnit)return Object.assign({text:ka({fieldOrDatumDef:c,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})},n)}return n}function oRe(t){return hl.reduce((e,n)=>(t.component.scales[n]&&(e[n]=[pRe(n,t)]),e),{})}const lRe={bottom:"top",top:"bottom",left:"right",right:"left"};function cRe(t){var e;const{axes:n,resolve:i}=t.component,s={top:0,bottom:0,right:0,left:0};for(const o of t.children){o.parseAxesAndHeaders();for(const c of we(o.component.axes))i.axis[c]=qR(t.component.resolve,c),i.axis[c]==="shared"&&(n[c]=dRe(n[c],o.component.axes[c]),n[c]||(i.axis[c]="independent",delete n[c]))}for(const o of hl){for(const c of t.children)if(!!c.component.axes[o]){if(i.axis[o]==="independent"){n[o]=((e=n[o])!==null&&e!==void 0?e:[]).concat(c.component.axes[o]);for(const d of c.component.axes[o]){const{value:f,explicit:u}=d.getWithExplicit("orient");if(!Re(f)){if(s[f]>0&&!u){const a=lRe[f];s[f]>s[a]&&d.set("orient",a,!1)}s[f]++}}}delete c.component.axes[o]}if(i.axis[o]==="independent"&&n[o]&&n[o].length>1)for(const c of n[o])!!c.get("grid")&&!c.explicit.grid&&(c.implicit.grid=!1)}}function dRe(t,e){if(t){if(t.length!==e.length)return;const n=t.length;for(let i=0;i<n;i++){const s=t[i],o=e[i];if(!!s!=!!o)return;if(s&&o){const c=s.getWithExplicit("orient"),d=o.getWithExplicit("orient");if(c.explicit&&d.explicit&&c.value!==d.value)return;t[i]=fRe(s,o)}}}else return e.map(n=>n.clone());return t}function fRe(t,e){for(const n of yQ){const i=vd(t.getWithExplicit(n),e.getWithExplicit(n),n,"axis",(s,o)=>{switch(n){case"title":return RX(s,o);case"gridScale":return{explicit:s.explicit,value:zn(s.value,o.value)}}return LS(s,o,n,"axis")});t.setWithExplicit(n,i)}return t}function uRe(t,e,n,i,s){if(e==="disable")return n!==void 0;switch(n=n||{},e){case"titleAngle":case"labelAngle":return t===(Re(n.labelAngle)?n.labelAngle:Uy(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(t===LJ(i,s))return!0}return t===n[e]}const hRe=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function pRe(t,e){var n,i,s;let o=e.axis(t);const c=new QR,d=ni(e.encoding[t]),{mark:f,config:u}=e,a=(o==null?void 0:o.orient)||((n=u[t==="x"?"axisX":"axisY"])===null||n===void 0?void 0:n.orient)||((i=u.axis)===null||i===void 0?void 0:i.orient)||HAe(t),_=e.getScaleComponent(t).get("type"),w=UAe(t,_,a,e.config),m=o!==void 0?!o:BF("disable",u.style,o==null?void 0:o.style,w).configValue;if(c.set("disable",m,o!==void 0),m)return c;o=o||{};const l=GAe(d,o,t,u.style,w),T={fieldOrDatumDef:d,axis:o,channel:t,model:e,scaleType:_,orient:a,labelAngle:l,mark:f,config:u};for(const x of yQ){const B=x in Kj?Kj[x](T):Bj(x)?o[x]:void 0,F=B!==void 0,k=uRe(B,x,o,e,t);if(F&&k)c.set(x,B,k);else{const{configValue:M=void 0,configFrom:A=void 0}=Bj(x)&&x!=="values"?BF(x,u.style,o.style,w):{},R=M!==void 0;F&&!R?c.set(x,B,k):(A!=="vgAxisConfig"||hRe.has(x)&&R||nw(M)||Re(M))&&c.set(x,M,!1)}}const b=(s=o.encoding)!==null&&s!==void 0?s:{},S=BK.reduce((x,B)=>{var F;if(!c.hasAxisPart(B))return x;const k=zJ((F=b[B])!==null&&F!==void 0?F:{},e),M=B==="labels"?aRe(e,t,k):k;return M!==void 0&&!ln(M)&&(x[B]={update:M}),x},{});return ln(S)||c.set("encode",S,!!o.encoding||o.labelAngle!==void 0),c}function gRe({encoding:t,size:e}){for(const n of hl){const i=Ks(n);Qo(e[i])&&xo(t[n])&&(delete e[i],be(UX(i)))}return e}function _Re(t,e,n){const i=Fs(t),s=rn("orient",i,n);if(i.orient=bRe(i.type,e,s),s!==void 0&&s!==i.orient&&be(xFe(i.orient,s)),i.type==="bar"&&i.orient){const d=rn("cornerRadiusEnd",i,n);if(d!==void 0){const f=i.orient==="horizontal"&&e.x2||i.orient==="vertical"&&e.y2?["cornerRadius"]:G2e[i.orient];for(const u of f)i[u]=d;i.cornerRadiusEnd!==void 0&&delete i.cornerRadiusEnd}}return rn("opacity",i,n)===void 0&&(i.opacity=mRe(i.type,e)),rn("cursor",i,n)===void 0&&(i.cursor=yRe(i,e,n)),i}function yRe(t,e,n){return e.href||t.href||rn("href",t,n)?"pointer":t.cursor}function mRe(t,e){if(Mt([xS,cR,dR,fR],t)&&!TR(e))return .7}function wRe(t,e,{graticule:n}){if(n)return!1;const i=yu("filled",t,e),s=t.type;return zn(i,s!==xS&&s!==SS&&s!==h1)}function bRe(t,e,n){switch(t){case xS:case dR:case fR:case sK:case C2e:case N2e:return}const{x:i,y:s,x2:o,y2:c}=e;switch(t){case ES:if(Te(i)&&(Ei(i.bin)||Te(s)&&s.aggregate&&!i.aggregate))return"vertical";if(Te(s)&&(Ei(s.bin)||Te(i)&&i.aggregate&&!s.aggregate))return"horizontal";if(c||o){if(n)return n;if(!o)return(Te(i)&&i.type===mu&&!mn(i.bin)||gF(i))&&Te(s)&&Ei(s.bin)?"horizontal":"vertical";if(!c)return(Te(s)&&s.type===mu&&!mn(s.bin)||gF(s))&&Te(i)&&Ei(i.bin)?"vertical":"horizontal"}case h1:if(o&&!(Te(i)&&Ei(i.bin))&&c&&!(Te(s)&&Ei(s.bin)))return;case vS:if(c)return Te(s)&&Ei(s.bin)?"horizontal":"vertical";if(o)return Te(i)&&Ei(i.bin)?"vertical":"horizontal";if(t===h1){if(i&&!s)return"vertical";if(s&&!i)return"horizontal"}case SS:case cR:{const d=xo(i),f=xo(s);if(n)return n;if(d&&!f)return t!=="tick"?"horizontal":"vertical";if(!d&&f)return t!=="tick"?"vertical":"horizontal";if(d&&f){const u=i,a=s,_=u.type===Gp,w=a.type===Gp;return _&&!w?t!=="tick"?"vertical":"horizontal":!_&&w?t!=="tick"?"horizontal":"vertical":!u.aggregate&&a.aggregate?t!=="tick"?"vertical":"horizontal":u.aggregate&&!a.aggregate&&t!=="tick"?"horizontal":"vertical"}else return}}return"vertical"}const TRe={vgMark:"arc",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},na(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),$i("x",t,{defaultPos:"mid"})),$i("y",t,{defaultPos:"mid"})),Sd(t,"radius")),Sd(t,"theta"))},vRe={vgMark:"area",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign({},na(t,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"})),T1("x",t,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:t.markDef.orient==="horizontal"})),T1("y",t,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:t.markDef.orient==="vertical"})),DR(t))},ERe={vgMark:"rect",encodeEntry:t=>Object.assign(Object.assign(Object.assign({},na(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Sd(t,"x")),Sd(t,"y"))},SRe={vgMark:"shape",encodeEntry:t=>Object.assign({},na(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),postEncodingTransform:t=>{const{encoding:e}=t,n=e.shape;return[Object.assign({type:"geoshape",projection:t.projectionName()},n&&Te(n)&&n.type===xg?{field:xe(n,{expr:"datum"})}:{})]}},xRe={vgMark:"image",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign({},na(t,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"})),Sd(t,"x")),Sd(t,"y")),LR(t,"url"))},BRe={vgMark:"line",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},na(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),$i("x",t,{defaultPos:"mid"})),$i("y",t,{defaultPos:"mid"})),ui("size",t,{vgChannel:"strokeWidth"})),DR(t))},kRe={vgMark:"trail",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},na(t,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),$i("x",t,{defaultPos:"mid"})),$i("y",t,{defaultPos:"mid"})),ui("size",t)),DR(t))};function ZR(t,e){const{config:n}=t;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},na(t,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),$i("x",t,{defaultPos:"mid"})),$i("y",t,{defaultPos:"mid"})),ui("size",t)),ui("angle",t)),IRe(t,n,e))}function IRe(t,e,n){return n?{shape:{value:n}}:ui("shape",t)}const FRe={vgMark:"symbol",encodeEntry:t=>ZR(t)},ORe={vgMark:"symbol",encodeEntry:t=>ZR(t,"circle")},MRe={vgMark:"symbol",encodeEntry:t=>ZR(t,"square")},ARe={vgMark:"rect",encodeEntry:t=>Object.assign(Object.assign(Object.assign({},na(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Sd(t,"x")),Sd(t,"y"))},NRe={vgMark:"rule",encodeEntry:t=>{const{markDef:e}=t,n=e.orient;return!t.encoding.x&&!t.encoding.y&&!t.encoding.latitude&&!t.encoding.longitude?{}:Object.assign(Object.assign(Object.assign(Object.assign({},na(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),T1("x",t,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"})),T1("y",t,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"})),ui("size",t,{vgChannel:"strokeWidth"}))}},CRe={vgMark:"text",encodeEntry:t=>{const{config:e,encoding:n}=t;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},na(t,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"})),$i("x",t,{defaultPos:"mid"})),$i("y",t,{defaultPos:"mid"})),LR(t)),ui("size",t,{vgChannel:"fontSize"})),ui("angle",t)),Wj("align",RRe(t.markDef,n,e))),Wj("baseline",LRe(t.markDef,n,e))),$i("radius",t,{defaultPos:null})),$i("theta",t,{defaultPos:null}))}};function RRe(t,e,n){if(rn("align",t,n)===void 0)return"center"}function LRe(t,e,n){if(rn("baseline",t,n)===void 0)return"middle"}const PRe={vgMark:"rect",encodeEntry:t=>{const{config:e,markDef:n}=t,i=n.orient,s=i==="horizontal"?"width":"height",o=i==="horizontal"?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},na(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),$i("x",t,{defaultPos:"mid",vgChannel:"xc"})),$i("y",t,{defaultPos:"mid",vgChannel:"yc"})),ui("size",t,{defaultValue:DRe(t),vgChannel:s})),{[o]:Tn(rn("thickness",n,e))})}};function DRe(t){var e;const{config:n,markDef:i}=t,{orient:s}=i,o=s==="horizontal"?"width":"height",c=t.getScaleComponent(s==="horizontal"?"x":"y"),d=(e=rn("size",i,n,{vgChannel:o}))!==null&&e!==void 0?e:n.tick.bandSize;if(d!==void 0)return d;{const f=c?c.get("range"):void 0;return f&&Yd(f)&&cn(f.step)?f.step*3/4:w1(n.view,o)*3/4}}const a0={arc:TRe,area:vRe,bar:ERe,circle:ORe,geoshape:SRe,image:xRe,line:BRe,point:FRe,rect:ARe,rule:NRe,square:MRe,text:CRe,tick:PRe,trail:kRe};function jRe(t){if(Mt([SS,vS,R2e],t.mark)){const e=MK(t.mark,t.encoding);if(e.length>0)return URe(t,e)}else if(t.mark===ES){const e=cF.some(n=>rn(n,t.markDef,t.config));if(t.stack&&!t.fieldDef("size")&&e)return $Re(t)}return e3(t)}const uU="faceted_path_";function URe(t,e){return[{name:t.getName("pathgroup"),type:"group",from:{facet:{name:uU+t.requestDataName(_n.Main),data:t.requestDataName(_n.Main),groupby:e}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:e3(t,{fromPrefix:uU})}]}const hU="stack_group_";function $Re(t){var e;const[n]=e3(t,{fromPrefix:hU}),i=t.scaleName(t.stack.fieldChannel),s=(a={})=>t.vgField(t.stack.fieldChannel,a),o=(a,_)=>{const w=[s({prefix:"min",suffix:"start",expr:_}),s({prefix:"max",suffix:"start",expr:_}),s({prefix:"min",suffix:"end",expr:_}),s({prefix:"max",suffix:"end",expr:_})];return`${a}(${w.map(m=>`scale('${i}',${m})`).join(",")})`};let c,d;t.stack.fieldChannel==="x"?(c=Object.assign(Object.assign({},$p(n.encode.update,["y","yc","y2","height",...cF])),{x:{signal:o("min","datum")},x2:{signal:o("max","datum")},clip:{value:!0}}),d={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},n.encode.update=Object.assign(Object.assign({},Ls(n.encode.update,["y","yc","y2"])),{height:{field:{group:"height"}}})):(c=Object.assign(Object.assign({},$p(n.encode.update,["x","xc","x2","width"])),{y:{signal:o("min","datum")},y2:{signal:o("max","datum")},clip:{value:!0}}),d={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},n.encode.update=Object.assign(Object.assign({},Ls(n.encode.update,["x","xc","x2"])),{width:{field:{group:"width"}}}));for(const a of cF){const _=yu(a,t.markDef,t.config);n.encode.update[a]?(c[a]=n.encode.update[a],delete n.encode.update[a]):_&&(c[a]=Tn(_)),_&&(n.encode.update[a]={value:0})}const f=[];if(((e=t.stack.groupbyChannels)===null||e===void 0?void 0:e.length)>0)for(const a of t.stack.groupbyChannels){const _=t.fieldDef(a),w=xe(_);w&&f.push(w),((_==null?void 0:_.bin)||(_==null?void 0:_.timeUnit))&&f.push(xe(_,{binSuffix:"end"}))}return c=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((a,_)=>{if(n.encode.update[_])return Object.assign(Object.assign({},a),{[_]:n.encode.update[_]});{const w=yu(_,t.markDef,t.config);return w!==void 0?Object.assign(Object.assign({},a),{[_]:Tn(w)}):a}},c),c.stroke&&(c.strokeForeground={value:!0},c.strokeOffset={value:0}),[{type:"group",from:{facet:{data:t.requestDataName(_n.Main),name:hU+t.requestDataName(_n.Main),groupby:f,aggregate:{fields:[s({suffix:"start"}),s({suffix:"start"}),s({suffix:"end"}),s({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:c},marks:[{type:"group",encode:{update:d},marks:[n]}]}]}function zRe(t){var e;const{encoding:n,stack:i,mark:s,markDef:o,config:c}=t,d=n.order;if(!(!he(d)&&Da(d)&&oF(d.value)||!d&&oF(rn("order",o,c)))){if((he(d)||Te(d))&&!i)return AX(d,{expr:"datum"});if(Xd(s)){const f=o.orient==="horizontal"?"y":"x",u=n[f];if(Te(u)){const a=u.sort;if(he(a))return{field:xe(u,{prefix:f,suffix:"sort_index",expr:"datum"})};if(Mo(a))return{field:xe({aggregate:TR(t.encoding)?a.op:void 0,field:a.field},{expr:"datum"})};if(pK(a)){const _=t.fieldDef(a.encoding);return{field:xe(_,{expr:"datum"}),order:a.order}}else return a===null?void 0:{field:xe(u,{binSuffix:!((e=t.stack)===null||e===void 0)&&e.impute?"mid":void 0,expr:"datum"})}}return}}}function e3(t,e={fromPrefix:""}){const{mark:n,markDef:i,encoding:s,config:o}=t,c=zn(i.clip,qRe(t),GRe(t)),d=OX(i),f=s.key,u=zRe(t),a=VRe(t),_=rn("aria",i,o),w=a0[n].postEncodingTransform?a0[n].postEncodingTransform(t):null;return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:t.getName("marks"),type:a0[n].vgMark},c?{clip:!0}:{}),d?{style:d}:{}),f?{key:f.field}:{}),u?{sort:u}:{}),a||{}),_===!1?{aria:_}:{}),{from:{data:e.fromPrefix+t.requestDataName(_n.Main)},encode:{update:a0[n].encodeEntry(t)}}),w?{transform:w}:{})]}function qRe(t){const e=t.getScaleComponent("x"),n=t.getScaleComponent("y");return(e==null?void 0:e.get("selectionExtent"))||(n==null?void 0:n.get("selectionExtent"))?!0:void 0}function GRe(t){const e=t.component.projection;return e&&!e.isFit?!0:void 0}function VRe(t){if(!t.component.selection)return null;const e=we(t.component.selection).length;let n=e,i=t.parent;for(;i&&n===0;)n=we(i.component.selection).length,i=i.parent;return n?{interactive:e>0||!!t.encoding.tooltip}:null}class mQ extends hQ{constructor(e,n,i,s={},o){var c;super(e,"unit",n,i,o,void 0,Fj(e)?e.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const d=Xo(e.mark)?Object.assign({},e.mark):{type:e.mark},f=d.type;d.filled===void 0&&(d.filled=wRe(d,o,{graticule:e.data&&CR(e.data)}));const u=this.encoding=TOe(e.encoding||{},f,d.filled,o);this.markDef=_Re(d,u,o),this.size=gRe({encoding:u,size:Fj(e)?Object.assign(Object.assign(Object.assign({},s),e.width?{width:e.width}:{}),e.height?{height:e.height}:{}):s}),this.stack=QK(f,u),this.specifiedScales=this.initScales(f,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=e.projection,this.selection=((c=e.params)!==null&&c!==void 0?c:[]).filter(a=>FR(a))}get hasProjection(){const{encoding:e}=this,n=this.mark===rK,i=e&&yIe.some(s=>Ze(e[s]));return n||i}scaleDomain(e){const n=this.specifiedScales[e];return n?n.domain:void 0}axis(e){return this.specifiedAxes[e]}legend(e){return this.specifiedLegends[e]}initScales(e,n){return wS.reduce((i,s)=>{var o;const c=ni(n[s]);return c&&(i[s]=this.initScale((o=c.scale)!==null&&o!==void 0?o:{})),i},{})}initScale(e){const{domain:n,range:i}=e,s=Fs(e);return he(n)&&(s.domain=n.map(ur)),he(i)&&(s.range=i.map(ur)),s}initAxes(e){return hl.reduce((n,i)=>{const s=e[i];if(Ze(s)||i===On&&Ze(e.x2)||i===wi&&Ze(e.y2)){const o=Ze(s)?s.axis:void 0;n[i]=o&&this.initAxis(Object.assign({},o))}return n},{})}initAxis(e){const n=we(e),i={};for(const s of n){const o=e[s];i[s]=nw(o)?FX(o):ur(o)}return i}initLegends(e){return kIe.reduce((n,i)=>{const s=ni(e[i]);if(s&&FIe(i)){const o=s.legend;n[i]=o&&Fs(o)}return n},{})}parseData(){this.component.data=KS(this)}parseLayoutSize(){QCe(this)}parseSelections(){this.component.selection=LAe(this,this.selection)}parseMarkGroup(){this.component.mark=jRe(this)}parseAxesAndHeaders(){this.component.axes=oRe(this)}assembleSelectionTopLevelSignals(e){return iAe(this,e)}assembleSignals(){return[...NJ(this),...tAe(this,[])]}assembleSelectionData(e){return sAe(this,e)}assembleLayout(){return null}assembleLayoutSignals(){return zR(this)}assembleMarks(){var e;let n=(e=this.component.mark)!==null&&e!==void 0?e:[];return(!this.parent||!Og(this.parent))&&(n=uJ(this,n)),n.map(this.correctDataNames)}assembleGroupStyle(){const{style:e}=this.view||{};if(e!==void 0)return e;if(this.encoding.x||this.encoding.y)return"cell"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(e){return Yf(this.encoding,e)}fieldDef(e){const n=this.encoding[e];return Ko(n)}typedFieldDef(e){const n=this.fieldDef(e);return Zr(n)?n:null}}class t3 extends KR{constructor(e,n,i,s,o){super(e,"layer",n,i,o,e.resolve,e.view);const c=Object.assign(Object.assign(Object.assign({},s),e.width?{width:e.width}:{}),e.height?{height:e.height}:{});this.children=e.layer.map((d,f)=>{if(RS(d))return new t3(d,this,this.getName(`layer_${f}`),c,o);if(fc(d))return new mQ(d,this,this.getName(`layer_${f}`),c,o);throw new Error(HC(d))})}parseData(){this.component.data=KS(this);for(const e of this.children)e.parseData()}parseLayoutSize(){KCe(this)}parseSelections(){this.component.selection={};for(const e of this.children){e.parseSelections();for(const n of we(e.component.selection))this.component.selection[n]=e.component.selection[n]}}parseMarkGroup(){for(const e of this.children)e.parseMarkGroup()}parseAxesAndHeaders(){cRe(this)}assembleSelectionTopLevelSignals(e){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),e)}assembleSignals(){return this.children.reduce((e,n)=>e.concat(n.assembleSignals()),NJ(this))}assembleLayoutSignals(){return this.children.reduce((e,n)=>e.concat(n.assembleLayoutSignals()),zR(this))}assembleSelectionData(e){return this.children.reduce((n,i)=>i.assembleSelectionData(n),e)}assembleGroupStyle(){const e=new Set;for(const i of this.children)for(const s of Ie(i.assembleGroupStyle()))e.add(s);const n=Array.from(e);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let e=super.assembleTitle();if(e)return e;for(const n of this.children)if(e=n.assembleTitle(),e)return e}assembleLayout(){return null}assembleMarks(){return rAe(this,this.children.flatMap(e=>e.assembleMarks()))}assembleLegends(){return this.children.reduce((e,n)=>e.concat(n.assembleLegends()),KJ(this))}}function n3(t,e,n,i,s){if(kS(t))return new Y_(t,e,n,s);if(RS(t))return new t3(t,e,n,i,s);if(fc(t))return new mQ(t,e,n,i,s);if(WOe(t))return new iRe(t,e,n,s);throw new Error(HC(t))}var WRe=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};function HRe(t,e={}){e.logger&&KFe(e.logger),e.fieldTitle&&EK(e.fieldTitle);try{const n=JK(hg(e.config,t.config)),i=oJ(t,n),s=n3(i,null,"",void 0,n);return s.parse(),rCe(s.component.data,s),{spec:XRe(s,YRe(t,i.autosize,n,s),t.datasets,t.usermeta),normalized:i}}finally{e.logger&&JFe(),e.fieldTitle&&fOe()}}function YRe(t,e,n,i){const s=i.component.layoutSize.get("width"),o=i.component.layoutSize.get("height");if(e===void 0?(e={type:"pad"},i.hasAxisOrientSignalRef()&&(e.resize=!0)):ke(e)&&(e={type:e}),s&&o&&KMe(e.type)){if(s==="step"&&o==="step")be(hj()),e.type="pad";else if(s==="step"||o==="step"){const c=s==="step"?"width":"height";be(hj(mS(c)));const d=c==="width"?"height":"width";e.type=JMe(d)}}return Object.assign(Object.assign(Object.assign({},we(e).length===1&&e.type?e.type==="pad"?{}:{autosize:e.type}:{autosize:e}),$j(n,!1)),$j(t,!0))}function XRe(t,e,n={},i){const s=t.config?oMe(t.config):void 0,o=[].concat(t.assembleSelectionData([]),WCe(t.component.data,n)),c=t.assembleProjections(),d=t.assembleTitle(),f=t.assembleGroupStyle(),u=t.assembleGroupEncodeEntry(!0);let a=t.assembleLayoutSignals();a=a.filter(m=>(m.name==="width"||m.name==="height")&&m.value!==void 0?(e[m.name]=+m.value,!1):!0);const{params:_}=e,w=WRe(e,["params"]);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({$schema:"https://vega.github.io/schema/vega/v5.json"},t.description?{description:t.description}:{}),w),d?{title:d}:{}),f?{style:f}:{}),u?{encode:{update:u}}:{}),{data:o}),c.length>0?{projections:c}:{}),t.assembleGroup([...a,...t.assembleSelectionTopLevelSignals([]),...HK(_)])),s?{config:s}:{}),i?{usermeta:i}:{})}const KRe=lIe.version,JRe=Object.freeze(Object.defineProperty({__proto__:null,version:KRe,compile:HRe,normalize:oJ,deepEqual:Eo,duplicate:ft,never:oX,pick:$p,omit:Ls,stringify:yn,hash:Pt,isNullOrFalse:oF,contains:Mt,some:pu,every:CC,mergeDeep:lX,unique:So,isEqual:fIe,setEqual:cX,hasIntersection:RC,prefixGenerator:lF,fieldIntersection:LC,isEmpty:ln,keys:we,vals:Hi,entries:bd,isBoolean:jy,varName:xn,logicalExpr:W_,deleteNestedProperty:d1,titleCase:Vm,accessPathWithDatum:PC,flatAccessWithDatum:dX,replacePathInField:Jr,replaceAll:gu,removePathFromField:DC,accessPathDepth:zp,getFirstDefined:zn,uniqueId:uX,resetIdCounter:hIe,internalField:hX,isInternalField:pX,normalizeAngle:Uy,isNumeric:uS},Symbol.toStringTag,{value:"Module"}));function wQ(t){const[e,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(t).slice(1,3);return{library:e,version:n}}var QRe="vega-themes",ZRe="2.10.0",e3e="Themes for stylized Vega and Vega-Lite visualizations.",t3e=["vega","vega-lite","themes","style"],n3e="BSD-3-Clause",i3e={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},s3e=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],r3e="build/vega-themes.js",i3="build/vega-themes.module.js",a3e="build/vega-themes.min.js",o3e="build/vega-themes.min.js",l3e="build/vega-themes.module.d.ts",c3e={type:"git",url:"https://github.com/vega/vega-themes.git"},d3e=["src","build"],f3e={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",prepare:"beemo create-config",eslintbase:"beemo eslint .",format:"yarn eslintbase --fix",lint:"yarn eslintbase",release:"auto shipit"},u3e={"@auto-it/conventional-commits":"^10.32.2","@auto-it/first-time-contributor":"^10.32.2","@rollup/plugin-json":"^4.1.0","@rollup/plugin-node-resolve":"^13.0.6","rollup-plugin-ts":"^1.4.7",auto:"^10.32.2","browser-sync":"^2.27.7",concurrently:"^6.4.0","gh-pages":"^3.2.3",rollup:"^2.60.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-terser":"^7.0.2",typescript:"^4.4.4",vega:"^5.19.1","vega-lite":"^5.0.0","vega-lite-dev-config":"^0.20.0"},h3e={vega:"*","vega-lite":"*"},p3e={name:QRe,version:ZRe,description:e3e,keywords:t3e,license:n3e,author:i3e,contributors:s3e,main:r3e,module:i3,unpkg:a3e,jsdelivr:o3e,types:l3e,repository:c3e,files:d3e,scripts:f3e,devDependencies:u3e,peerDependencies:h3e};const hh="#fff",g3e="#888",_3e={background:"#333",title:{color:hh,subtitleColor:hh},style:{"guide-label":{fill:hh},"guide-title":{fill:hh}},axis:{domainColor:hh,gridColor:g3e,tickColor:hh}},nf="#4572a7",y3e={background:"#fff",arc:{fill:nf},area:{fill:nf},line:{stroke:nf,strokeWidth:2},path:{stroke:nf},rect:{fill:nf},shape:{stroke:nf},symbol:{fill:nf,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},sf="#30a2da",UB="#cbcbcb",m3e="#999",w3e="#333",pU="#f0f0f0",gU="#333",b3e={arc:{fill:sf},area:{fill:sf},axis:{domainColor:UB,grid:!0,gridColor:UB,gridWidth:1,labelColor:m3e,labelFontSize:10,titleColor:w3e,tickColor:UB,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:pU,group:{fill:pU},legend:{labelColor:gU,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:gU,titleFontSize:14,titlePadding:10},line:{stroke:sf,strokeWidth:2},path:{stroke:sf,strokeWidth:.5},rect:{fill:sf},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:sf},bar:{binSpacing:2,fill:sf,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},rf="#000",T3e={group:{fill:"#e5e5e5"},arc:{fill:rf},area:{fill:rf},line:{stroke:rf},path:{stroke:rf},rect:{fill:rf},shape:{stroke:rf},symbol:{fill:rf,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},v3e=22,E3e="normal",_U="Benton Gothic, sans-serif",yU=11.5,S3e="normal",af="#82c6df",$B="Benton Gothic Bold, sans-serif",mU="normal",wU=13,n_={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},x3e={background:"#ffffff",title:{anchor:"start",color:"#000000",font:$B,fontSize:v3e,fontWeight:E3e},arc:{fill:af},area:{fill:af},line:{stroke:af,strokeWidth:2},path:{stroke:af},rect:{fill:af},shape:{stroke:af},symbol:{fill:af,size:30},axis:{labelFont:_U,labelFontSize:yU,labelFontWeight:S3e,titleFont:$B,titleFontSize:wU,titleFontWeight:mU},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:_U,labelFontSize:yU,symbolType:"square",titleFont:$B,titleFontSize:wU,titleFontWeight:mU},range:{category:n_["category-6"],diverging:n_["fireandice-6"],heatmap:n_["fire-7"],ordinal:n_["fire-7"],ramp:n_["fire-7"]}},of="#ab5787",o0="#979797",B3e={background:"#f9f9f9",arc:{fill:of},area:{fill:of},line:{stroke:of},path:{stroke:of},rect:{fill:of},shape:{stroke:of},symbol:{fill:of,size:30},axis:{domainColor:o0,domainWidth:.5,gridWidth:.2,labelColor:o0,tickColor:o0,tickWidth:.2,titleColor:o0},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},lf="#3e5c69",k3e={background:"#fff",arc:{fill:lf},area:{fill:lf},line:{stroke:lf},path:{stroke:lf},rect:{fill:lf},shape:{stroke:lf},symbol:{fill:lf},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},xr="#1696d2",bU="#000000",I3e="#FFFFFF",l0="Lato",zB="Lato",F3e="Lato",O3e="#DEDDDD",M3e=18,i_={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},A3e={background:I3e,title:{anchor:"start",fontSize:M3e,font:l0},axisX:{domain:!0,domainColor:bU,domainWidth:1,grid:!1,labelFontSize:12,labelFont:zB,labelAngle:0,tickColor:bU,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:l0},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:O3e,gridWidth:1,labelFontSize:12,labelFont:zB,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:l0,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:zB,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:l0,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:i_["six-groups-cat-1"],diverging:i_["diverging-colors"],heatmap:i_["diverging-colors"],ordinal:i_["six-groups-seq"],ramp:i_["shades-blue"]},area:{fill:xr},rect:{fill:xr},line:{color:xr,stroke:xr,strokeWidth:5},trail:{color:xr,stroke:xr,strokeWidth:0,size:1},path:{stroke:xr,strokeWidth:.5},point:{filled:!0},text:{font:F3e,color:xr,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:xr,stroke:null}},arc:{fill:xr},shape:{stroke:xr},symbol:{fill:xr,size:30}},cf="#3366CC",TU="#ccc",c0="Arial, sans-serif",N3e={arc:{fill:cf},area:{fill:cf},path:{stroke:cf},rect:{fill:cf},shape:{stroke:cf},symbol:{stroke:cf},circle:{fill:cf},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:c0,fontSize:12},"guide-title":{font:c0,fontSize:12},"group-title":{font:c0,fontSize:12}},title:{font:c0,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:TU,tickColor:TU,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},s3=t=>t*(1/3+1),vU=s3(9),EU=s3(10),SU=s3(12),s_="Segoe UI",xU="wf_standard-font, helvetica, arial, sans-serif",BU="#252423",r_="#605E5C",kU="transparent",C3e="#C8C6C4",aa="#118DFF",R3e="#12239E",L3e="#E66C37",P3e="#6B007B",D3e="#E044A7",j3e="#744EC2",U3e="#D9B300",$3e="#D64550",bQ=aa,TQ="#DEEFFF",IU=[TQ,bQ],z3e=[TQ,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",bQ],q3e={view:{stroke:kU},background:kU,font:s_,header:{titleFont:xU,titleFontSize:SU,titleColor:BU,labelFont:s_,labelFontSize:EU,labelColor:r_},axis:{ticks:!1,grid:!1,domain:!1,labelColor:r_,labelFontSize:vU,titleFont:xU,titleColor:BU,titleFontSize:SU,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:C3e,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:aa},line:{stroke:aa,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:s_,fontSize:vU,fill:r_},arc:{fill:aa},area:{fill:aa,line:!0,opacity:.6},path:{stroke:aa},rect:{fill:aa},point:{fill:aa,filled:!0,size:75},shape:{stroke:aa},symbol:{fill:aa,strokeWidth:1.5,size:50},legend:{titleFont:s_,titleFontWeight:"bold",titleColor:r_,labelFont:s_,labelFontSize:EU,labelColor:r_,symbolType:"circle",symbolSize:75},range:{category:[aa,R3e,L3e,P3e,D3e,j3e,U3e,$3e],diverging:IU,heatmap:IU,ordinal:z3e}},G3e=p3e.version,V3e=Object.freeze(Object.defineProperty({__proto__:null,dark:_3e,excel:y3e,fivethirtyeight:b3e,ggplot2:T3e,googlecharts:N3e,latimes:x3e,powerbi:q3e,quartz:B3e,urbaninstitute:A3e,version:G3e,vox:k3e},Symbol.toStringTag,{value:"Module"}));/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function W3e(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}function H3e(t,e,n){if(he(t))return`[${t.map(i=>e(ke(i)?i:FU(i,n))).join(", ")}]`;if(Fe(t)){let i="";const s=t,{title:o,image:c}=s,d=W3e(s,["title","image"]);o&&(i+=`<h2>${e(o)}</h2>`),c&&(i+=`<img src="${e(c)}">`);const f=Object.keys(d);if(f.length>0){i+="<table>";for(const u of f){let a=d[u];a!==void 0&&(Fe(a)&&(a=FU(a,n)),i+=`<tr><td class="key">${e(u)}:</td><td class="value">${e(a)}</td></tr>`)}i+="</table>"}return i||"{}"}return e(t)}function Y3e(t){const e=[];return function(n,i){if(typeof i!="object"||i===null)return i;const s=e.indexOf(this)+1;return e.length=s,e.length>t?"[Object]":e.indexOf(i)>=0?"[Circular]":(e.push(i),i)}}function FU(t,e){return JSON.stringify(t,Y3e(e))}var X3e=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element img {
  max-width: 200px;
  max-height: 200px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const vQ="vg-tooltip-element",K3e={offsetX:10,offsetY:10,id:vQ,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:J3e,maxDepth:2,formatTooltip:H3e};function J3e(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function Q3e(t){if(!/^[A-Za-z]+[-:.\w]*$/.test(t))throw new Error("Invalid HTML ID");return X3e.toString().replace(vQ,t)}function Z3e(t,e,n,i){let s=t.clientX+n;s+e.width>window.innerWidth&&(s=+t.clientX-n-e.width);let o=t.clientY+i;return o+e.height>window.innerHeight&&(o=+t.clientY-i-e.height),{x:s,y:o}}class eLe{constructor(e){this.options=Object.assign(Object.assign({},K3e),e);const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const i=document.createElement("style");i.setAttribute("id",this.options.styleId),i.innerHTML=Q3e(n);const s=document.head;s.childNodes.length>0?s.insertBefore(i,s.childNodes[0]):s.appendChild(i)}}tooltipHandler(e,n,i,s){var o;if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),((o=document.fullscreenElement)!==null&&o!==void 0?o:document.body).appendChild(this.el)),s==null||s===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(s,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:c,y:d}=Z3e(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.setAttribute("style",`top: ${d}px; left: ${c}px`)}}function tLe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function OU(t,e,n,i,s,o,c){try{var d=t[o](c),f=d.value}catch(u){n(u);return}d.done?e(f):Promise.resolve(f).then(i,s)}function x1(t){return function(){var e=this,n=arguments;return new Promise(function(i,s){var o=t.apply(e,n);function c(f){OU(o,i,s,c,d,"next",f)}function d(f){OU(o,i,s,c,d,"throw",f)}c(void 0)})}}var EQ=Object.prototype,Df=EQ.hasOwnProperty,bo,r3=typeof Symbol=="function"?Symbol:{},JS=r3.iterator||"@@iterator",nLe=r3.asyncIterator||"@@asyncIterator",B1=r3.toStringTag||"@@toStringTag";function SQ(t,e,n,i){var s=e&&e.prototype instanceof RF?e:RF,o=Object.create(s.prototype),c=new LF(i||[]);return o._invoke=oLe(t,n,c),o}function a3(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(i){return{type:"throw",arg:i}}}var MU="suspendedStart",iLe="suspendedYield",AU="executing",d0="completed",va={};function RF(){}function QS(){}function eg(){}var o3={};o3[JS]=function(){return this};var qB=Object.getPrototypeOf,f0=qB&&qB(qB(l3([])));f0&&f0!==EQ&&Df.call(f0,JS)&&(o3=f0);var Mg=eg.prototype=RF.prototype=Object.create(o3);QS.prototype=Mg.constructor=eg;eg.constructor=QS;eg[B1]=QS.displayName="GeneratorFunction";function xQ(t){["next","throw","return"].forEach(function(e){t[e]=function(n){return this._invoke(e,n)}})}function BQ(t){var e=typeof t=="function"&&t.constructor;return e?e===QS||(e.displayName||e.name)==="GeneratorFunction":!1}function sLe(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,eg):(t.__proto__=eg,B1 in t||(t[B1]="GeneratorFunction")),t.prototype=Object.create(Mg),t}function rLe(t){return{__await:t}}function ZS(t,e){function n(o,c,d,f){var u=a3(t[o],t,c);if(u.type==="throw")f(u.arg);else{var a=u.arg,_=a.value;return _&&typeof _=="object"&&Df.call(_,"__await")?e.resolve(_.__await).then(function(w){n("next",w,d,f)},function(w){n("throw",w,d,f)}):e.resolve(_).then(function(w){a.value=w,d(a)},function(w){return n("throw",w,d,f)})}}var i;function s(o,c){function d(){return new e(function(f,u){n(o,c,f,u)})}return i=i?i.then(d,d):d()}this._invoke=s}xQ(ZS.prototype);ZS.prototype[nLe]=function(){return this};function aLe(t,e,n,i,s){s===void 0&&(s=Promise);var o=new ZS(SQ(t,e,n,i),s);return BQ(e)?o:o.next().then(function(c){return c.done?c.value:o.next()})}function oLe(t,e,n){var i=MU;return function(o,c){if(i===AU)throw new Error("Generator is already running");if(i===d0){if(o==="throw")throw c;return IQ()}for(n.method=o,n.arg=c;;){var d=n.delegate;if(d){var f=kQ(d,n);if(f){if(f===va)continue;return f}}if(n.method==="next")n.sent=n._sent=n.arg;else if(n.method==="throw"){if(i===MU)throw i=d0,n.arg;n.dispatchException(n.arg)}else n.method==="return"&&n.abrupt("return",n.arg);i=AU;var u=a3(t,e,n);if(u.type==="normal"){if(i=n.done?d0:iLe,u.arg===va)continue;return{value:u.arg,done:n.done}}else u.type==="throw"&&(i=d0,n.method="throw",n.arg=u.arg)}}}function kQ(t,e){var n=t.iterator[e.method];if(n===bo){if(e.delegate=null,e.method==="throw"){if(t.iterator.return&&(e.method="return",e.arg=bo,kQ(t,e),e.method==="throw"))return va;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return va}var i=a3(n,t.iterator,e.arg);if(i.type==="throw")return e.method="throw",e.arg=i.arg,e.delegate=null,va;var s=i.arg;if(!s)return e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,va;if(s.done)e[t.resultName]=s.value,e.next=t.nextLoc,e.method!=="return"&&(e.method="next",e.arg=bo);else return s;return e.delegate=null,va}xQ(Mg);Mg[B1]="Generator";Mg[JS]=function(){return this};Mg.toString=function(){return"[object Generator]"};function lLe(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function GB(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function LF(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(lLe,this),this.reset(!0)}function cLe(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function i(){for(;e.length;){var s=e.pop();if(s in t)return i.value=s,i.done=!1,i}return i.done=!0,i}}function l3(t){if(t){var e=t[JS];if(e)return e.call(t);if(typeof t.next=="function")return t;if(!isNaN(t.length)){var n=-1,i=function s(){for(;++n<t.length;)if(Df.call(t,n))return s.value=t[n],s.done=!1,s;return s.value=bo,s.done=!0,s};return i.next=i}}return{next:IQ}}function IQ(){return{value:bo,done:!0}}LF.prototype={constructor:LF,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=bo,this.done=!1,this.delegate=null,this.method="next",this.arg=bo,this.tryEntries.forEach(GB),!e)for(var n in this)n.charAt(0)==="t"&&Df.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=bo)},stop:function(){this.done=!0;var e=this.tryEntries[0],n=e.completion;if(n.type==="throw")throw n.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(u,a){return c.type="throw",c.arg=e,n.next=u,a&&(n.method="next",n.arg=bo),!!a}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],c=o.completion;if(o.tryLoc==="root")return i("end");if(o.tryLoc<=this.prev){var d=Df.call(o,"catchLoc"),f=Df.call(o,"finallyLoc");if(d&&f){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(d){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else if(f){if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(e,n){for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i];if(s.tryLoc<=this.prev&&Df.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var o=s;break}}o&&(e==="break"||e==="continue")&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=n,o?(this.method="next",this.next=o.finallyLoc,va):this.complete(c)},complete:function(e,n){if(e.type==="throw")throw e.arg;return e.type==="break"||e.type==="continue"?this.next=e.arg:e.type==="return"?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):e.type==="normal"&&n&&(this.next=n),va},finish:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),GB(i),va}},catch:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc===e){var s=i.completion;if(s.type==="throw"){var o=s.arg;GB(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:l3(e),resultName:n,nextLoc:i},this.method==="next"&&(this.arg=bo),va}};var Bo={wrap:SQ,isGeneratorFunction:BQ,AsyncIterator:ZS,mark:sLe,awrap:rLe,async:aLe,keys:cLe,values:l3},dLe=Ht;Ht.Node=Su;Ht.create=Ht;function Ht(t){var e=this;if(e instanceof Ht||(e=new Ht),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(s){e.push(s)});else if(arguments.length>0)for(var n=0,i=arguments.length;n<i;n++)e.push(arguments[n]);return e}Ht.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,n=t.prev;return e&&(e.prev=n),n&&(n.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=n),t.list.length--,t.next=null,t.prev=null,t.list=null,e};Ht.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};Ht.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};Ht.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)uLe(this,arguments[t]);return this.length};Ht.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)hLe(this,arguments[t]);return this.length};Ht.prototype.pop=function(){if(!!this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};Ht.prototype.shift=function(){if(!!this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};Ht.prototype.forEach=function(t,e){e=e||this;for(var n=this.head,i=0;n!==null;i++)t.call(e,n.value,i,this),n=n.next};Ht.prototype.forEachReverse=function(t,e){e=e||this;for(var n=this.tail,i=this.length-1;n!==null;i--)t.call(e,n.value,i,this),n=n.prev};Ht.prototype.get=function(t){for(var e=0,n=this.head;n!==null&&e<t;e++)n=n.next;if(e===t&&n!==null)return n.value};Ht.prototype.getReverse=function(t){for(var e=0,n=this.tail;n!==null&&e<t;e++)n=n.prev;if(e===t&&n!==null)return n.value};Ht.prototype.map=function(t,e){e=e||this;for(var n=new Ht,i=this.head;i!==null;)n.push(t.call(e,i.value,this)),i=i.next;return n};Ht.prototype.mapReverse=function(t,e){e=e||this;for(var n=new Ht,i=this.tail;i!==null;)n.push(t.call(e,i.value,this)),i=i.prev;return n};Ht.prototype.reduce=function(t,e){var n,i=this.head;if(arguments.length>1)n=e;else if(this.head)i=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=0;i!==null;s++)n=t(n,i.value,s),i=i.next;return n};Ht.prototype.reduceReverse=function(t,e){var n,i=this.tail;if(arguments.length>1)n=e;else if(this.tail)i=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=this.length-1;i!==null;s--)n=t(n,i.value,s),i=i.prev;return n};Ht.prototype.toArray=function(){for(var t=new Array(this.length),e=0,n=this.head;n!==null;e++)t[e]=n.value,n=n.next;return t};Ht.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,n=this.tail;n!==null;e++)t[e]=n.value,n=n.prev;return t};Ht.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var n=new Ht;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=0,s=this.head;s!==null&&i<t;i++)s=s.next;for(;s!==null&&i<e;i++,s=s.next)n.push(s.value);return n};Ht.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var n=new Ht;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=this.length,s=this.tail;s!==null&&i>e;i--)s=s.prev;for(;s!==null&&i>t;i--,s=s.prev)n.push(s.value);return n};Ht.prototype.splice=function(t,e){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(var s=[],n=0;i&&n<e;n++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<(arguments.length<=2?0:arguments.length-2);n++)i=fLe(this,i,n+2<2||arguments.length<=n+2?void 0:arguments[n+2]);return s};Ht.prototype.reverse=function(){for(var t=this.head,e=this.tail,n=t;n!==null;n=n.prev){var i=n.prev;n.prev=n.next,n.next=i}return this.head=e,this.tail=t,this};function fLe(t,e,n){var i=e===t.head?new Su(n,null,e,t):new Su(n,e,e.next,t);return i.next===null&&(t.tail=i),i.prev===null&&(t.head=i),t.length++,i}function uLe(t,e){t.tail=new Su(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function hLe(t,e){t.head=new Su(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function Su(t,e,n,i){if(!(this instanceof Su))return new Su(t,e,n,i);this.list=i,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{Ht.prototype[Symbol.iterator]=Bo.mark(function t(){var e;return Bo.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:e=this.head;case 1:if(!e){i.next=7;break}return i.next=4,e.value;case 4:e=e.next,i.next=1;break;case 7:case"end":return i.stop()}},t,this)})}catch{}var pLe=dLe,bf=Symbol("max"),Bl=Symbol("length"),ph=Symbol("lengthCalculator"),X_=Symbol("allowStale"),jf=Symbol("maxAge"),El=Symbol("dispose"),NU=Symbol("noDisposeOnSet"),li=Symbol("lruList"),oa=Symbol("cache"),FQ=Symbol("updateAgeOnGet"),VB=()=>1;class gLe{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");this[bf]=e.max||1/0;var n=e.length||VB;if(this[ph]=typeof n!="function"?VB:n,this[X_]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[jf]=e.maxAge||0,this[El]=e.dispose,this[NU]=e.noDisposeOnSet||!1,this[FQ]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[bf]=e||1/0,a_(this)}get max(){return this[bf]}set allowStale(e){this[X_]=!!e}get allowStale(){return this[X_]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[jf]=e,a_(this)}get maxAge(){return this[jf]}set lengthCalculator(e){typeof e!="function"&&(e=VB),e!==this[ph]&&(this[ph]=e,this[Bl]=0,this[li].forEach(n=>{n.length=this[ph](n.value,n.key),this[Bl]+=n.length})),a_(this)}get lengthCalculator(){return this[ph]}get length(){return this[Bl]}get itemCount(){return this[li].length}rforEach(e,n){n=n||this;for(var i=this[li].tail;i!==null;){var s=i.prev;CU(this,e,i,n),i=s}}forEach(e,n){n=n||this;for(var i=this[li].head;i!==null;){var s=i.next;CU(this,e,i,n),i=s}}keys(){return this[li].toArray().map(e=>e.key)}values(){return this[li].toArray().map(e=>e.value)}reset(){this[El]&&this[li]&&this[li].length&&this[li].forEach(e=>this[El](e.key,e.value)),this[oa]=new Map,this[li]=new pLe,this[Bl]=0}dump(){return this[li].map(e=>k1(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[li]}set(e,n,i){if(i=i||this[jf],i&&typeof i!="number")throw new TypeError("maxAge must be a number");var s=i?Date.now():0,o=this[ph](n,e);if(this[oa].has(e)){if(o>this[bf])return np(this,this[oa].get(e)),!1;var c=this[oa].get(e),d=c.value;return this[El]&&(this[NU]||this[El](e,d.value)),d.now=s,d.maxAge=i,d.value=n,this[Bl]+=o-d.length,d.length=o,this.get(e),a_(this),!0}var f=new _Le(e,n,o,s,i);return f.length>this[bf]?(this[El]&&this[El](e,n),!1):(this[Bl]+=f.length,this[li].unshift(f),this[oa].set(e,this[li].head),a_(this),!0)}has(e){if(!this[oa].has(e))return!1;var n=this[oa].get(e).value;return!k1(this,n)}get(e){return WB(this,e,!0)}peek(e){return WB(this,e,!1)}pop(){var e=this[li].tail;return e?(np(this,e),e.value):null}del(e){np(this,this[oa].get(e))}load(e){this.reset();for(var n=Date.now(),i=e.length-1;i>=0;i--){var s=e[i],o=s.e||0;if(o===0)this.set(s.k,s.v);else{var c=o-n;c>0&&this.set(s.k,s.v,c)}}}prune(){this[oa].forEach((e,n)=>WB(this,n,!1))}}var WB=(t,e,n)=>{var i=t[oa].get(e);if(i){var s=i.value;if(k1(t,s)){if(np(t,i),!t[X_])return}else n&&(t[FQ]&&(i.value.now=Date.now()),t[li].unshiftNode(i));return s.value}},k1=(t,e)=>{if(!e||!e.maxAge&&!t[jf])return!1;var n=Date.now()-e.now;return e.maxAge?n>e.maxAge:t[jf]&&n>t[jf]},a_=t=>{if(t[Bl]>t[bf])for(var e=t[li].tail;t[Bl]>t[bf]&&e!==null;){var n=e.prev;np(t,e),e=n}},np=(t,e)=>{if(e){var n=e.value;t[El]&&t[El](n.key,n.value),t[Bl]-=n.length,t[oa].delete(n.key),t[li].removeNode(e)}};class _Le{constructor(e,n,i,s,o){this.key=e,this.value=n,this.length=i,this.now=s,this.maxAge=o||0}}var CU=(t,e,n,i)=>{var s=n.value;k1(t,s)&&(np(t,n),t[X_]||(s=void 0)),s&&e.call(i,s.value,s.key,t)},yLe=gLe,mLe=["includePrerelease","loose","rtl"],wLe=t=>t?typeof t!="object"?{loose:!0}:mLe.filter(e=>t[e]).reduce((e,n)=>(e[n]=!0,e),{}):{},c3=wLe,Ea={exports:{}},bLe="2.0.0",TLe=256,vLe=Number.MAX_SAFE_INTEGER||9007199254740991,ELe=16,d3={SEMVER_SPEC_VERSION:bLe,MAX_LENGTH:TLe,MAX_SAFE_INTEGER:vLe,MAX_SAFE_COMPONENT_LENGTH:ELe},SLe=typeof process=="object"&&process.env&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return console.error("SEMVER",...e)}:()=>{},ex=SLe;(function(t,e){var n=d3.MAX_SAFE_COMPONENT_LENGTH,i=ex;e=t.exports={};var s=e.re=[],o=e.src=[],c=e.t={},d=0,f=(u,a,_)=>{var w=d++;i(u,w,a),c[u]=w,o[w]=a,s[w]=new RegExp(a,_?"g":void 0)};f("NUMERICIDENTIFIER","0|[1-9]\\d*"),f("NUMERICIDENTIFIERLOOSE","[0-9]+"),f("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),f("MAINVERSION","(".concat(o[c.NUMERICIDENTIFIER],")\\.")+"(".concat(o[c.NUMERICIDENTIFIER],")\\.")+"(".concat(o[c.NUMERICIDENTIFIER],")")),f("MAINVERSIONLOOSE","(".concat(o[c.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(o[c.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(o[c.NUMERICIDENTIFIERLOOSE],")")),f("PRERELEASEIDENTIFIER","(?:".concat(o[c.NUMERICIDENTIFIER],"|").concat(o[c.NONNUMERICIDENTIFIER],")")),f("PRERELEASEIDENTIFIERLOOSE","(?:".concat(o[c.NUMERICIDENTIFIERLOOSE],"|").concat(o[c.NONNUMERICIDENTIFIER],")")),f("PRERELEASE","(?:-(".concat(o[c.PRERELEASEIDENTIFIER],"(?:\\.").concat(o[c.PRERELEASEIDENTIFIER],")*))")),f("PRERELEASELOOSE","(?:-?(".concat(o[c.PRERELEASEIDENTIFIERLOOSE],"(?:\\.").concat(o[c.PRERELEASEIDENTIFIERLOOSE],")*))")),f("BUILDIDENTIFIER","[0-9A-Za-z-]+"),f("BUILD","(?:\\+(".concat(o[c.BUILDIDENTIFIER],"(?:\\.").concat(o[c.BUILDIDENTIFIER],")*))")),f("FULLPLAIN","v?".concat(o[c.MAINVERSION]).concat(o[c.PRERELEASE],"?").concat(o[c.BUILD],"?")),f("FULL","^".concat(o[c.FULLPLAIN],"$")),f("LOOSEPLAIN","[v=\\s]*".concat(o[c.MAINVERSIONLOOSE]).concat(o[c.PRERELEASELOOSE],"?").concat(o[c.BUILD],"?")),f("LOOSE","^".concat(o[c.LOOSEPLAIN],"$")),f("GTLT","((?:<|>)?=?)"),f("XRANGEIDENTIFIERLOOSE","".concat(o[c.NUMERICIDENTIFIERLOOSE],"|x|X|\\*")),f("XRANGEIDENTIFIER","".concat(o[c.NUMERICIDENTIFIER],"|x|X|\\*")),f("XRANGEPLAIN","[v=\\s]*(".concat(o[c.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(o[c.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(o[c.XRANGEIDENTIFIER],")")+"(?:".concat(o[c.PRERELEASE],")?").concat(o[c.BUILD],"?")+")?)?"),f("XRANGEPLAINLOOSE","[v=\\s]*(".concat(o[c.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(o[c.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(o[c.XRANGEIDENTIFIERLOOSE],")")+"(?:".concat(o[c.PRERELEASELOOSE],")?").concat(o[c.BUILD],"?")+")?)?"),f("XRANGE","^".concat(o[c.GTLT],"\\s*").concat(o[c.XRANGEPLAIN],"$")),f("XRANGELOOSE","^".concat(o[c.GTLT],"\\s*").concat(o[c.XRANGEPLAINLOOSE],"$")),f("COERCE","".concat("(^|[^\\d])(\\d{1,").concat(n,"})")+"(?:\\.(\\d{1,".concat(n,"}))?")+"(?:\\.(\\d{1,".concat(n,"}))?")+"(?:$|[^\\d])"),f("COERCERTL",o[c.COERCE],!0),f("LONETILDE","(?:~>?)"),f("TILDETRIM","(\\s*)".concat(o[c.LONETILDE],"\\s+"),!0),e.tildeTrimReplace="$1~",f("TILDE","^".concat(o[c.LONETILDE]).concat(o[c.XRANGEPLAIN],"$")),f("TILDELOOSE","^".concat(o[c.LONETILDE]).concat(o[c.XRANGEPLAINLOOSE],"$")),f("LONECARET","(?:\\^)"),f("CARETTRIM","(\\s*)".concat(o[c.LONECARET],"\\s+"),!0),e.caretTrimReplace="$1^",f("CARET","^".concat(o[c.LONECARET]).concat(o[c.XRANGEPLAIN],"$")),f("CARETLOOSE","^".concat(o[c.LONECARET]).concat(o[c.XRANGEPLAINLOOSE],"$")),f("COMPARATORLOOSE","^".concat(o[c.GTLT],"\\s*(").concat(o[c.LOOSEPLAIN],")$|^$")),f("COMPARATOR","^".concat(o[c.GTLT],"\\s*(").concat(o[c.FULLPLAIN],")$|^$")),f("COMPARATORTRIM","(\\s*)".concat(o[c.GTLT],"\\s*(").concat(o[c.LOOSEPLAIN],"|").concat(o[c.XRANGEPLAIN],")"),!0),e.comparatorTrimReplace="$1$2$3",f("HYPHENRANGE","^\\s*(".concat(o[c.XRANGEPLAIN],")")+"\\s+-\\s+"+"(".concat(o[c.XRANGEPLAIN],")")+"\\s*$"),f("HYPHENRANGELOOSE","^\\s*(".concat(o[c.XRANGEPLAINLOOSE],")")+"\\s+-\\s+"+"(".concat(o[c.XRANGEPLAINLOOSE],")")+"\\s*$"),f("STAR","(<|>)?=?\\s*\\*"),f("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),f("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Ea,Ea.exports);var RU=/^[0-9]+$/,OQ=(t,e)=>{var n=RU.test(t),i=RU.test(e);return n&&i&&(t=+t,e=+e),t===e?0:n&&!i?-1:i&&!n?1:t<e?-1:1},xLe=(t,e)=>OQ(e,t),BLe={compareIdentifiers:OQ,rcompareIdentifiers:xLe},u0=ex,LU=d3.MAX_LENGTH,h0=d3.MAX_SAFE_INTEGER,PU=Ea.exports.re,DU=Ea.exports.t,kLe=c3,gh=BLe.compareIdentifiers;class la{constructor(e,n){if(n=kLe(n),e instanceof la){if(e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError("Invalid Version: ".concat(e));if(e.length>LU)throw new TypeError("version is longer than ".concat(LU," characters"));u0("SemVer",e,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;var i=e.trim().match(n.loose?PU[DU.LOOSE]:PU[DU.FULL]);if(!i)throw new TypeError("Invalid Version: ".concat(e));if(this.raw=e,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>h0||this.major<0)throw new TypeError("Invalid major version");if(this.minor>h0||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>h0||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){var o=+s;if(o>=0&&o<h0)return o}return s}):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}format(){return this.version="".concat(this.major,".").concat(this.minor,".").concat(this.patch),this.prerelease.length&&(this.version+="-".concat(this.prerelease.join("."))),this.version}toString(){return this.version}compare(e){if(u0("SemVer.compare",this.version,this.options,e),!(e instanceof la)){if(typeof e=="string"&&e===this.version)return 0;e=new la(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof la||(e=new la(e,this.options)),gh(this.major,e.major)||gh(this.minor,e.minor)||gh(this.patch,e.patch)}comparePre(e){if(e instanceof la||(e=new la(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var n=0;do{var i=this.prerelease[n],s=e.prerelease[n];if(u0("prerelease compare",n,i,s),i===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(i===void 0)return-1;if(i===s)continue;return gh(i,s)}while(++n)}compareBuild(e){e instanceof la||(e=new la(e,this.options));var n=0;do{var i=this.build[n],s=e.build[n];if(u0("prerelease compare",n,i,s),i===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(i===void 0)return-1;if(i===s)continue;return gh(i,s)}while(++n)}inc(e,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n),this.inc("pre",n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n),this.inc("pre",n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var i=this.prerelease.length;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);i===-1&&this.prerelease.push(0)}n&&(gh(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=[n,0]):this.prerelease=[n,0]);break;default:throw new Error("invalid increment argument: ".concat(e))}return this.format(),this.raw=this.version,this}}var f3=la,jU=f3,ILe=(t,e,n)=>new jU(t,n).compare(new jU(e,n)),Ag=ILe,FLe=Ag,OLe=(t,e,n)=>FLe(t,e,n)===0,MLe=OLe,ALe=Ag,NLe=(t,e,n)=>ALe(t,e,n)!==0,CLe=NLe,RLe=Ag,LLe=(t,e,n)=>RLe(t,e,n)>0,PLe=LLe,DLe=Ag,jLe=(t,e,n)=>DLe(t,e,n)>=0,ULe=jLe,$Le=Ag,zLe=(t,e,n)=>$Le(t,e,n)<0,qLe=zLe,GLe=Ag,VLe=(t,e,n)=>GLe(t,e,n)<=0,WLe=VLe,HLe=MLe,YLe=CLe,XLe=PLe,KLe=ULe,JLe=qLe,QLe=WLe,ZLe=(t,e,n,i)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t===n;case"!==":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t!==n;case"":case"=":case"==":return HLe(t,n,i);case"!=":return YLe(t,n,i);case">":return XLe(t,n,i);case">=":return KLe(t,n,i);case"<":return JLe(t,n,i);case"<=":return QLe(t,n,i);default:throw new TypeError("Invalid operator: ".concat(e))}},ePe=ZLe,HB,UU;function tPe(){if(UU)return HB;UU=1;var t=Symbol("SemVer ANY");class e{static get ANY(){return t}constructor(a,_){if(_=n(_),a instanceof e){if(a.loose===!!_.loose)return a;a=a.value}c("comparator",a,_),this.options=_,this.loose=!!_.loose,this.parse(a),this.semver===t?this.value="":this.value=this.operator+this.semver.version,c("comp",this)}parse(a){var _=this.options.loose?i[s.COMPARATORLOOSE]:i[s.COMPARATOR],w=a.match(_);if(!w)throw new TypeError("Invalid comparator: ".concat(a));this.operator=w[1]!==void 0?w[1]:"",this.operator==="="&&(this.operator=""),w[2]?this.semver=new d(w[2],this.options.loose):this.semver=t}toString(){return this.value}test(a){if(c("Comparator.test",a,this.options.loose),this.semver===t||a===t)return!0;if(typeof a=="string")try{a=new d(a,this.options)}catch{return!1}return o(a,this.operator,this.semver,this.options)}intersects(a,_){if(!(a instanceof e))throw new TypeError("a Comparator is required");if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new f(a.value,_).test(this.value);if(a.operator==="")return a.value===""?!0:new f(this.value,_).test(a.semver);var w=(this.operator===">="||this.operator===">")&&(a.operator===">="||a.operator===">"),m=(this.operator==="<="||this.operator==="<")&&(a.operator==="<="||a.operator==="<"),l=this.semver.version===a.semver.version,T=(this.operator===">="||this.operator==="<=")&&(a.operator===">="||a.operator==="<="),b=o(this.semver,"<",a.semver,_)&&(this.operator===">="||this.operator===">")&&(a.operator==="<="||a.operator==="<"),S=o(this.semver,">",a.semver,_)&&(this.operator==="<="||this.operator==="<")&&(a.operator===">="||a.operator===">");return w||m||l&&T||b||S}}HB=e;var n=c3,i=Ea.exports.re,s=Ea.exports.t,o=ePe,c=ex,d=f3,f=MQ();return HB}function $U(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=nPe(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var i=0,s=function(){};return{s,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(u){throw u},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,c=!1,d;return{s:function(){n=n.call(t)},n:function(){var u=n.next();return o=u.done,u},e:function(u){c=!0,d=u},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(c)throw d}}}}function nPe(t,e){if(!!t){if(typeof t=="string")return zU(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zU(t,e)}}function zU(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var YB,qU;function MQ(){if(qU)return YB;qU=1;class t{constructor(z,$){if($=i($),z instanceof t)return z.loose===!!$.loose&&z.includePrerelease===!!$.includePrerelease?z:new t(z.raw,$);if(z instanceof s)return this.raw=z.value,this.set=[[z]],this.format(),this;if(this.options=$,this.loose=!!$.loose,this.includePrerelease=!!$.includePrerelease,this.raw=z,this.set=z.split("||").map(V=>this.parseRange(V.trim())).filter(V=>V.length),!this.set.length)throw new TypeError("Invalid SemVer Range: ".concat(z));if(this.set.length>1){var Y=this.set[0];if(this.set=this.set.filter(V=>!w(V[0])),this.set.length===0)this.set=[Y];else if(this.set.length>1){var W=$U(this.set),H;try{for(W.s();!(H=W.n()).done;){var J=H.value;if(J.length===1&&m(J[0])){this.set=[J];break}}}catch(V){W.e(V)}finally{W.f()}}}this.format()}format(){return this.range=this.set.map(z=>z.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(z){z=z.trim();var $=Object.keys(this.options).join(","),Y="parseRange:".concat($,":").concat(z),W=n.get(Y);if(W)return W;var H=this.options.loose,J=H?d[f.HYPHENRANGELOOSE]:d[f.HYPHENRANGE];z=z.replace(J,P(this.options.includePrerelease)),o("hyphen replace",z),z=z.replace(d[f.COMPARATORTRIM],u),o("comparator trim",z),z=z.replace(d[f.TILDETRIM],a),z=z.replace(d[f.CARETTRIM],_),z=z.split(/\s+/).join(" ");var V=z.split(" ").map(Me=>T(Me,this.options)).join(" ").split(/\s+/).map(Me=>R(Me,this.options));H&&(V=V.filter(Me=>(o("loose invalid filter",Me,this.options),!!Me.match(d[f.COMPARATORLOOSE])))),o("range list",V);var le=new Map,pe=V.map(Me=>new s(Me,this.options)),se=$U(pe),Ne;try{for(se.s();!(Ne=se.n()).done;){var fe=Ne.value;if(w(fe))return[fe];le.set(fe.value,fe)}}catch(Me){se.e(Me)}finally{se.f()}le.size>1&&le.has("")&&le.delete("");var Ce=[...le.values()];return n.set(Y,Ce),Ce}intersects(z,$){if(!(z instanceof t))throw new TypeError("a Range is required");return this.set.some(Y=>l(Y,$)&&z.set.some(W=>l(W,$)&&Y.every(H=>W.every(J=>H.intersects(J,$)))))}test(z){if(!z)return!1;if(typeof z=="string")try{z=new c(z,this.options)}catch{return!1}for(var $=0;$<this.set.length;$++)if(j(this.set[$],z,this.options))return!0;return!1}}YB=t;var e=yLe,n=new e({max:1e3}),i=c3,s=tPe(),o=ex,c=f3,d=Ea.exports.re,f=Ea.exports.t,u=Ea.exports.comparatorTrimReplace,a=Ea.exports.tildeTrimReplace,_=Ea.exports.caretTrimReplace,w=D=>D.value==="<0.0.0-0",m=D=>D.value==="",l=(D,z)=>{for(var $=!0,Y=D.slice(),W=Y.pop();$&&Y.length;)$=Y.every(H=>W.intersects(H,z)),W=Y.pop();return $},T=(D,z)=>(o("comp",D,z),D=B(D,z),o("caret",D),D=S(D,z),o("tildes",D),D=k(D,z),o("xrange",D),D=A(D,z),o("stars",D),D),b=D=>!D||D.toLowerCase()==="x"||D==="*",S=(D,z)=>D.trim().split(/\s+/).map($=>x($,z)).join(" "),x=(D,z)=>{var $=z.loose?d[f.TILDELOOSE]:d[f.TILDE];return D.replace($,(Y,W,H,J,V)=>{o("tilde",D,Y,W,H,J,V);var le;return b(W)?le="":b(H)?le=">=".concat(W,".0.0 <").concat(+W+1,".0.0-0"):b(J)?le=">=".concat(W,".").concat(H,".0 <").concat(W,".").concat(+H+1,".0-0"):V?(o("replaceTilde pr",V),le=">=".concat(W,".").concat(H,".").concat(J,"-").concat(V," <").concat(W,".").concat(+H+1,".0-0")):le=">=".concat(W,".").concat(H,".").concat(J," <").concat(W,".").concat(+H+1,".0-0"),o("tilde return",le),le})},B=(D,z)=>D.trim().split(/\s+/).map($=>F($,z)).join(" "),F=(D,z)=>{o("caret",D,z);var $=z.loose?d[f.CARETLOOSE]:d[f.CARET],Y=z.includePrerelease?"-0":"";return D.replace($,(W,H,J,V,le)=>{o("caret",D,W,H,J,V,le);var pe;return b(H)?pe="":b(J)?pe=">=".concat(H,".0.0").concat(Y," <").concat(+H+1,".0.0-0"):b(V)?H==="0"?pe=">=".concat(H,".").concat(J,".0").concat(Y," <").concat(H,".").concat(+J+1,".0-0"):pe=">=".concat(H,".").concat(J,".0").concat(Y," <").concat(+H+1,".0.0-0"):le?(o("replaceCaret pr",le),H==="0"?J==="0"?pe=">=".concat(H,".").concat(J,".").concat(V,"-").concat(le," <").concat(H,".").concat(J,".").concat(+V+1,"-0"):pe=">=".concat(H,".").concat(J,".").concat(V,"-").concat(le," <").concat(H,".").concat(+J+1,".0-0"):pe=">=".concat(H,".").concat(J,".").concat(V,"-").concat(le," <").concat(+H+1,".0.0-0")):(o("no pr"),H==="0"?J==="0"?pe=">=".concat(H,".").concat(J,".").concat(V).concat(Y," <").concat(H,".").concat(J,".").concat(+V+1,"-0"):pe=">=".concat(H,".").concat(J,".").concat(V).concat(Y," <").concat(H,".").concat(+J+1,".0-0"):pe=">=".concat(H,".").concat(J,".").concat(V," <").concat(+H+1,".0.0-0")),o("caret return",pe),pe})},k=(D,z)=>(o("replaceXRanges",D,z),D.split(/\s+/).map($=>M($,z)).join(" ")),M=(D,z)=>{D=D.trim();var $=z.loose?d[f.XRANGELOOSE]:d[f.XRANGE];return D.replace($,(Y,W,H,J,V,le)=>{o("xRange",D,Y,W,H,J,V,le);var pe=b(H),se=pe||b(J),Ne=se||b(V),fe=Ne;return W==="="&&fe&&(W=""),le=z.includePrerelease?"-0":"",pe?W===">"||W==="<"?Y="<0.0.0-0":Y="*":W&&fe?(se&&(J=0),V=0,W===">"?(W=">=",se?(H=+H+1,J=0,V=0):(J=+J+1,V=0)):W==="<="&&(W="<",se?H=+H+1:J=+J+1),W==="<"&&(le="-0"),Y="".concat(W+H,".").concat(J,".").concat(V).concat(le)):se?Y=">=".concat(H,".0.0").concat(le," <").concat(+H+1,".0.0-0"):Ne&&(Y=">=".concat(H,".").concat(J,".0").concat(le," <").concat(H,".").concat(+J+1,".0-0")),o("xRange return",Y),Y})},A=(D,z)=>(o("replaceStars",D,z),D.trim().replace(d[f.STAR],"")),R=(D,z)=>(o("replaceGTE0",D,z),D.trim().replace(d[z.includePrerelease?f.GTE0PRE:f.GTE0],"")),P=D=>(z,$,Y,W,H,J,V,le,pe,se,Ne,fe,Ce)=>(b(Y)?$="":b(W)?$=">=".concat(Y,".0.0").concat(D?"-0":""):b(H)?$=">=".concat(Y,".").concat(W,".0").concat(D?"-0":""):J?$=">=".concat($):$=">=".concat($).concat(D?"-0":""),b(pe)?le="":b(se)?le="<".concat(+pe+1,".0.0-0"):b(Ne)?le="<".concat(pe,".").concat(+se+1,".0-0"):fe?le="<=".concat(pe,".").concat(se,".").concat(Ne,"-").concat(fe):D?le="<".concat(pe,".").concat(se,".").concat(+Ne+1,"-0"):le="<=".concat(le),"".concat($," ").concat(le).trim()),j=(D,z,$)=>{for(var Y=0;Y<D.length;Y++)if(!D[Y].test(z))return!1;if(z.prerelease.length&&!$.includePrerelease){for(var W=0;W<D.length;W++)if(o(D[W].semver),D[W].semver!==s.ANY&&D[W].semver.prerelease.length>0){var H=D[W].semver;if(H.major===z.major&&H.minor===z.minor&&H.patch===z.patch)return!0}return!1}return!0};return YB}var iPe=MQ(),sPe=(t,e,n)=>{try{e=new iPe(e,n)}catch{return!1}return e.test(t)},AQ=sPe;function rPe(t,e,n){var i=t.open(e),s=1e4,o=250,c=new URL(e),d=c.origin,f=~~(s/o);function u(_){_.source===i&&(f=0,t.removeEventListener("message",u,!1))}t.addEventListener("message",u,!1);function a(){f<=0||(i.postMessage(n,d),setTimeout(a,o),f-=1)}setTimeout(a,o)}var aPe=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return this.substr(!e||e<0?0:+e,t.length)===t});function NQ(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];for(var s=0,o=n;s<o.length;s++){var c=o[s];oPe(t,c)}return t}function oPe(t,e){for(var n=0,i=Object.keys(e);n<i.length;n++){var s=i[n];pg(t,s,e[s],!0)}}var XB;function lPe(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=cPe(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var i=0,s=function(){};return{s,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(u){throw u},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,c=!1,d;return{s:function(){n=n.call(t)},n:function(){var u=n.next();return o=u.done,u},e:function(u){c=!0,d=u},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(c)throw d}}}}function cPe(t,e){if(!!t){if(typeof t=="string")return GU(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GU(t,e)}}function GU(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function VU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,i)}return n}function Zc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VU(Object(n),!0).forEach(function(i){tLe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VU(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}var da=Fke,Hy=JRe,p0=typeof window<"u"?window:void 0;Hy===void 0&&p0!==null&&p0!==void 0&&(XB=p0.vl)!==null&&XB!==void 0&&XB.compile&&(Hy=p0.vl);var dPe={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},fPe={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},M_={vega:"Vega","vega-lite":"Vega-Lite"},I1={vega:da.version,"vega-lite":Hy?Hy.version:"not available"},uPe={vega:t=>t,"vega-lite":(t,e)=>Hy.compile(t,{config:e}).spec},hPe=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,pPe="chart-wrapper";function gPe(t){return typeof t=="function"}function WU(t,e,n,i){var s="<html><head>".concat(e,'</head><body><pre><code class="json">'),o="</code></pre>".concat(n,"</body></html>"),c=window.open("");c.document.write(s+t+o),c.document.title="".concat(M_[i]," JSON Source")}function _Pe(t,e){if(t.$schema){var n=wQ(t.$schema);if(e&&e!==n.library){var i;console.warn("The given visualization spec is written in ".concat(M_[n.library],", but mode argument sets ").concat((i=M_[e])!==null&&i!==void 0?i:e,"."))}var s=n.library;return AQ(I1[s],"^".concat(n.version.slice(1)))||console.warn("The input spec uses ".concat(M_[s]," ").concat(n.version,", but the current version of ").concat(M_[s]," is v").concat(I1[s],".")),s}return"mark"in t||"encoding"in t||"layer"in t||"hconcat"in t||"vconcat"in t||"facet"in t||"repeat"in t?"vega-lite":"marks"in t||"signals"in t||"scales"in t||"axes"in t?"vega":e!=null?e:"vega"}function yPe(t){return!!(t&&"load"in t)}function HU(t){return yPe(t)?t:da.loader(t)}function mPe(t){var e,n,i=(e=(n=t.usermeta)===null||n===void 0?void 0:n.embedOptions)!==null&&e!==void 0?e:{};return ke(i.defaultStyle)&&(i.defaultStyle=!1),i}function wPe(t,e){return PF.apply(this,arguments)}function PF(){return PF=x1(Bo.mark(function t(e,n){var i,s,o,c,d,f,u,a,_,w,m,l=arguments;return Bo.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(o=l.length>2&&l[2]!==void 0?l[2]:{},!ke(n)){b.next=10;break}return d=HU(o.loader),b.t0=JSON,b.next=6,d.load(n);case 6:b.t1=b.sent,c=b.t0.parse.call(b.t0,b.t1),b.next=11;break;case 10:c=n;case 11:return f=mPe(c),u=f.loader,(!d||u)&&(d=HU((a=o.loader)!==null&&a!==void 0?a:u)),b.next=16,YU(f,d);case 16:return _=b.sent,b.next=19,YU(o,d);case 19:return w=b.sent,m=Zc(Zc({},NQ(w,_)),{},{config:hg((i=w.config)!==null&&i!==void 0?i:{},(s=_.config)!==null&&s!==void 0?s:{})}),b.next=23,TPe(e,c,m,d);case 23:return b.abrupt("return",b.sent);case 24:case"end":return b.stop()}},t)})),PF.apply(this,arguments)}function YU(t,e){return DF.apply(this,arguments)}function DF(){return DF=x1(Bo.mark(function t(e,n){var i,s,o;return Bo.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!ke(e.config)){d.next=8;break}return d.t1=JSON,d.next=4,n.load(e.config);case 4:d.t2=d.sent,d.t0=d.t1.parse.call(d.t1,d.t2),d.next=9;break;case 8:d.t0=(i=e.config)!==null&&i!==void 0?i:{};case 9:if(s=d.t0,!ke(e.patch)){d.next=18;break}return d.t4=JSON,d.next=14,n.load(e.patch);case 14:d.t5=d.sent,d.t3=d.t4.parse.call(d.t4,d.t5),d.next=19;break;case 18:d.t3=e.patch;case 19:return o=d.t3,d.abrupt("return",Zc(Zc(Zc({},e),o?{patch:o}:{}),s?{config:s}:{}));case 21:case"end":return d.stop()}},t)})),DF.apply(this,arguments)}function bPe(t){var e,n=t.getRootNode?t.getRootNode():document;return n instanceof ShadowRoot?{root:n,rootContainer:n}:{root:document,rootContainer:(e=document.head)!==null&&e!==void 0?e:document.body}}function TPe(t,e){return jF.apply(this,arguments)}function jF(){return jF=x1(Bo.mark(function t(e,n){var i,s,o,c,d,f,u,a,_,w,m,l,T,b,S,x,B,F,k,M,A,R,P,j,D,z,$,Y,W,H,J,V,le,pe,se,Ne,fe,Ce,Me,He,Bt,vt,ge,G,q,L,X,Z,ae,re,_e,Ee=arguments;return Bo.wrap(function(zt){for(;;)switch(zt.prev=zt.next){case 0:if(_e=function(){Ce&&document.removeEventListener("click",Ce),V.finalize()},a=Ee.length>2&&Ee[2]!==void 0?Ee[2]:{},_=Ee.length>3?Ee[3]:void 0,w=a.theme?hg(V3e[a.theme],(i=a.config)!==null&&i!==void 0?i:{}):a.config,m=Dd(a.actions)?a.actions:NQ({},dPe,(s=a.actions)!==null&&s!==void 0?s:{}),l=Zc(Zc({},fPe),a.i18n),T=(o=a.renderer)!==null&&o!==void 0?o:"canvas",b=(c=a.logLevel)!==null&&c!==void 0?c:da.Warn,S=(d=a.downloadFileName)!==null&&d!==void 0?d:"visualization",x=typeof e=="string"?document.querySelector(e):e,x){zt.next=12;break}throw new Error("".concat(e," does not exist"));case 12:if(a.defaultStyle!==!1&&(B="vega-embed-style",F=bPe(x),k=F.root,M=F.rootContainer,k.getElementById(B)||(A=document.createElement("style"),A.id=B,A.innerHTML=a.defaultStyle===void 0||a.defaultStyle===!0?aPe.toString():a.defaultStyle,M.appendChild(A))),R=_Pe(n,a.mode),P=uPe[R](n,w),R==="vega-lite"&&P.$schema&&(j=wQ(P.$schema),AQ(I1.vega,"^".concat(j.version.slice(1)))||console.warn("The compiled spec uses Vega ".concat(j.version,", but current version is v").concat(I1.vega,"."))),x.classList.add("vega-embed"),m&&x.classList.add("has-actions"),x.innerHTML="",D=x,m&&(z=document.createElement("div"),z.classList.add(pPe),x.appendChild(z),D=z),$=a.patch,$&&(P=$ instanceof Function?$(P):vE(P,$,!0,!1).newDocument),a.formatLocale&&da.formatLocale(a.formatLocale),a.timeFormatLocale&&da.timeFormatLocale(a.timeFormatLocale),a.expressionFunctions)for(Y in a.expressionFunctions)W=a.expressionFunctions[Y],"fn"in W?da.expressionFunction(Y,W.fn,W.visitor):W instanceof Function&&da.expressionFunction(Y,W);return H=a.ast,J=da.parse(P,R==="vega-lite"?{}:w,{ast:H}),V=new(a.viewClass||da.View)(J,Zc({loader:_,logLevel:b,renderer:T},H?{expr:(f=(u=da.expressionInterpreter)!==null&&u!==void 0?u:a.expr)!==null&&f!==void 0?f:jke}:{})),V.addSignalListener("autosize",(At,et)=>{var un=et.type;un=="fit-x"?(D.classList.add("fit-x"),D.classList.remove("fit-y")):un=="fit-y"?(D.classList.remove("fit-x"),D.classList.add("fit-y")):un=="fit"?D.classList.add("fit-x","fit-y"):D.classList.remove("fit-x","fit-y")}),a.tooltip!==!1&&(le=gPe(a.tooltip)?a.tooltip:new eLe(a.tooltip===!0?{}:a.tooltip).call,V.tooltip(le)),pe=a.hover,pe===void 0&&(pe=R==="vega"),pe&&(se=typeof pe=="boolean"?{}:pe,Ne=se.hoverSet,fe=se.updateSet,V.hover(Ne,fe)),a&&(a.width!=null&&V.width(a.width),a.height!=null&&V.height(a.height),a.padding!=null&&V.padding(a.padding)),zt.next=37,V.initialize(D,a.bind).runAsync();case 37:if(m!==!1){if(Me=x,a.defaultStyle!==!1&&(He=document.createElement("details"),He.title=l.CLICK_TO_VIEW_ACTIONS,x.append(He),Me=He,Bt=document.createElement("summary"),Bt.innerHTML=hPe,He.append(Bt),Ce=At=>{He.contains(At.target)||He.removeAttribute("open")},document.addEventListener("click",Ce)),vt=document.createElement("div"),Me.append(vt),vt.classList.add("vega-actions"),m===!0||m.export!==!1){ge=lPe(["svg","png"]);try{for(q=function(){var et=G.value;if(m===!0||m.export===!0||m.export[et]){var un=l["".concat(et.toUpperCase(),"_ACTION")],Gn=document.createElement("a");Gn.text=un,Gn.href="#",Gn.target="_blank",Gn.download="".concat(S,".").concat(et),Gn.addEventListener("mousedown",function(){var bs=x1(Bo.mark(function ue(Fi){var oi;return Bo.wrap(function(En){for(;;)switch(En.prev=En.next){case 0:return Fi.preventDefault(),En.next=3,V.toImageURL(et,a.scaleFactor);case 3:oi=En.sent,this.href=oi;case 5:case"end":return En.stop()}},ue,this)}));return function(ue){return bs.apply(this,arguments)}}()),vt.append(Gn)}},ge.s();!(G=ge.n()).done;)q()}catch(At){ge.e(At)}finally{ge.f()}}(m===!0||m.source!==!1)&&(L=document.createElement("a"),L.text=l.SOURCE_ACTION,L.href="#",L.addEventListener("click",function(At){var et,un;WU(Jx(n),(et=a.sourceHeader)!==null&&et!==void 0?et:"",(un=a.sourceFooter)!==null&&un!==void 0?un:"",R),At.preventDefault()}),vt.append(L)),R==="vega-lite"&&(m===!0||m.compiled!==!1)&&(X=document.createElement("a"),X.text=l.COMPILED_ACTION,X.href="#",X.addEventListener("click",function(At){var et,un;WU(Jx(P),(et=a.sourceHeader)!==null&&et!==void 0?et:"",(un=a.sourceFooter)!==null&&un!==void 0?un:"","vega"),At.preventDefault()}),vt.append(X)),(m===!0||m.editor!==!1)&&(ae=(Z=a.editorUrl)!==null&&Z!==void 0?Z:"https://vega.github.io/editor/",re=document.createElement("a"),re.text=l.EDITOR_ACTION,re.href="#",re.addEventListener("click",function(At){rPe(window,ae,{config:w,mode:R,renderer:T,spec:Jx(n)}),At.preventDefault()}),vt.append(re))}return zt.abrupt("return",{view:V,spec:n,vgSpec:P,finalize:_e,embedOptions:a});case 39:case"end":return zt.stop()}},t)})),jF.apply(this,arguments)}const vPe=new Set(["width","height"]);function EPe(t,e){for(const[n,i]of Object.entries(e))i&&(!!i&&{}.toString.call(i)==="[object Function]"?i(t.data(n)):t.change(n,da.changeset().remove(()=>!0).insert(i)))}function g0(t={},e={},n=new Set){const i=Object.keys(t),s=Object.keys(e);return t===e||i.length===s.length&&i.filter(o=>!n.has(o)).every(o=>t[o]===e[o])}function XU(t,e){const n=Object.keys(e);for(const i of n)try{t.removeSignalListener(i,e[i])}catch(s){console.warn("Cannot remove invalid signal listener.",s)}return n.length>0}function KB(t,e){const n=Object.keys(e);for(const i of n)try{t.addSignalListener(i,e[i])}catch(s){console.warn("Cannot add invalid signal listener.",s)}return n.length>0}function SPe(t){return new Set(t.flatMap(e=>Object.keys(e)))}function xPe(t,e){if(t===e)return!1;const n={width:!1,height:!1,isExpensive:!1},i="width"in t||"width"in e,s="height"in t||"height"in e;return i&&(!("width"in t)||!("width"in e)||t.width!==e.width)&&("width"in t&&typeof t.width=="number"?n.width=t.width:n.isExpensive=!0),s&&(!("height"in t)||!("height"in e)||t.height!==e.height)&&("height"in t&&typeof t.height=="number"?n.height=t.height:n.isExpensive=!0),[...SPe([t,e])].filter(c=>c!=="width"&&c!=="height").some(c=>!(c in t)||!(c in e)||!aX(t[c],e[c]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function KU(t,e){const{width:n,height:i}=e;return typeof n<"u"&&typeof i<"u"?{...t,width:n,height:i}:typeof n<"u"?{...t,width:n}:typeof i<"u"?{...t,height:i}:t}function BPe(t){let e;return{c(){e=Br("div")},m(n,i){Yy(n,e,i),t[11](e)},p:Ch,i:Ch,o:Ch,d(n){n&&tg(e),t[11](null)}}}function kPe(t,e,n){let{options:i}=e,{spec:s}=e,{view:o}=e,{signalListeners:c={}}=e,{data:d={}}=e;const f=$F();let u,a={},_={},w={},m={},l;YQ(()=>{b()});async function T(){b();try{n(6,u=await wPe(l,s,i)),n(1,o=u.view),KB(o,c)&&o.runAsync(),x(o)}catch(k){S(k)}}function b(){u&&(u.finalize(),n(6,u=void 0),n(1,o=void 0))}function S(k){f("onError",{error:k}),console.warn(k)}function x(k){B(),f("onNewView",{view:k})}async function B(){d&&Object.keys(d).length>0&&u!==void 0&&(n(1,o=u.view),EPe(o,d),await o.resize().runAsync())}function F(k){ip[k?"unshift":"push"](()=>{l=k,n(0,l)})}return t.$$set=k=>{"options"in k&&n(2,i=k.options),"spec"in k&&n(3,s=k.spec),"view"in k&&n(1,o=k.view),"signalListeners"in k&&n(4,c=k.signalListeners),"data"in k&&n(5,d=k.data)},t.$$.update=()=>{if(t.$$.dirty&1056&&(g0(d,m)||B(),n(10,m=d)),t.$$.dirty&991&&l!==void 0){if(!g0(i,a,vPe))T();else{const k=xPe(KU(s,i),KU(w,a)),M=c,A=_;if(k){if(k.isExpensive)T();else if(u!==void 0){const R=!g0(M,A);n(1,o=u.view),k.width!==!1&&o.width(k.width),k.height!==!1&&o.height(k.height),R&&(A&&XU(o,A),M&&KB(o,M)),o.runAsync()}}else!g0(M,A)&&u!==void 0&&(n(1,o=u.view),A&&XU(o,A),M&&KB(o,M),o.runAsync())}n(7,a=i),n(8,_=c),n(9,w=s)}},[l,o,i,s,c,d,u,a,_,w,m,F]}class IPe extends Ou{constructor(e){super(),Fu(this,e,kPe,BPe,Bu,{options:2,spec:3,view:1,signalListeners:4,data:5})}}function FPe(t){let e,n,i;function s(c){t[6](c)}let o={spec:t[1],data:t[2],signalListeners:t[3],options:t[4]};return t[0]!==void 0&&(o.view=t[0]),e=new IPe({props:o}),ip.push(()=>qF(e,"view",s)),e.$on("onNewView",t[7]),e.$on("onError",t[8]),{c(){ng(e.$$.fragment)},m(c,d){ku(e,c,d),i=!0},p(c,[d]){const f={};d&2&&(f.spec=c[1]),d&4&&(f.data=c[2]),d&8&&(f.signalListeners=c[3]),d&16&&(f.options=c[4]),!n&&d&1&&(n=!0,f.view=c[0],zF(()=>n=!1)),e.$set(f)},i(c){i||(ko(e.$$.fragment,c),i=!0)},o(c){ed(e.$$.fragment,c),i=!1},d(c){Iu(e,c)}}}const OPe="vega-lite";function MPe(t,e,n){let i,{spec:s}=e,{options:o={}}=e,{data:c={}}=e,{signalListeners:d={}}=e,{view:f=void 0}=e;function u(w){f=w,n(0,f)}function a(w){Dr.call(this,t,w)}function _(w){Dr.call(this,t,w)}return t.$$set=w=>{"spec"in w&&n(1,s=w.spec),"options"in w&&n(5,o=w.options),"data"in w&&n(2,c=w.data),"signalListeners"in w&&n(3,d=w.signalListeners),"view"in w&&n(0,f=w.view)},t.$$.update=()=>{t.$$.dirty&32&&n(4,i={...o,mode:OPe})},[f,s,c,d,i,o,u,a,_]}class CQ extends Ou{constructor(e){super(),Fu(this,e,MPe,FPe,Bu,{spec:1,options:5,data:2,signalListeners:3,view:0})}}function APe(t){let e,n,i,s,o,c;function d(u){t[17](u)}let f={data:t[2],spec:t[1],options:{tooltip:!0,actions:!1,theme:"vox"}};return t[0]!==void 0&&(f.view=t[0]),n=new CQ({props:f}),ip.push(()=>qF(n,"view",d)),{c(){e=Br("div"),ng(n.$$.fragment),Ac(e,"class","container svelte-mufgje")},m(u,a){Yy(u,e,a),ku(n,e,null),s=!0,o||(c=[Z0(e,"mouseenter",t[15]),Z0(e,"mouseleave",t[16])],o=!0)},p(u,[a]){const _={};a&4&&(_.data=u[2]),a&2&&(_.spec=u[1]),!i&&a&1&&(i=!0,_.view=u[0],zF(()=>i=!1)),n.$set(_)},i(u){s||(ko(n.$$.fragment,u),s=!0)},o(u){ed(n.$$.fragment,u),s=!1},d(u){u&&tg(e),Iu(n),o=!1,xu(c)}}}function NPe(t,e,n){let i,s;const o=$F();let{bins:c=[{bin:"chicken",count:200,filteredCount:150},{bin:"dog",count:300,filteredCount:25}]}=e,{title:d=""}=e,{width:f=400}=e,{height:u=125}=e,{countLabel:a="Count"}=e,{dimLabel:_=""}=e,{labelColor:w="hsla(0, 0%, 100%, 0.9)"}=e,{backgroundBarColor:m="hsla(0, 0%, 100%, 0.5)"}=e,{foregroundBarColor:l="hsla(172, 97%, 45%, 0.95)"}=e,{backgroundColor:T="hsl(240,23%,9%)"}=e,{onlyFiltered:b=!1}=e,S,x=!1;function B(M){Dr.call(this,t,M)}function F(M){Dr.call(this,t,M)}function k(M){S=M,n(0,S)}return t.$$set=M=>{"bins"in M&&n(3,c=M.bins),"title"in M&&n(4,d=M.title),"width"in M&&n(5,f=M.width),"height"in M&&n(6,u=M.height),"countLabel"in M&&n(7,a=M.countLabel),"dimLabel"in M&&n(8,_=M.dimLabel),"labelColor"in M&&n(9,w=M.labelColor),"backgroundBarColor"in M&&n(10,m=M.backgroundBarColor),"foregroundBarColor"in M&&n(11,l=M.foregroundBarColor),"backgroundColor"in M&&n(12,T=M.backgroundColor),"onlyFiltered"in M&&n(13,b=M.onlyFiltered)},t.$$.update=()=>{t.$$.dirty&8&&n(2,i={table:c}),t.$$.dirty&16368&&n(1,s={$schema:"https://vega.github.io/schema/vega-lite/v5.json",description:"A categorical bar chart",data:{name:"table"},background:T,width:f,height:u,title:d,layer:[{params:[{name:"select",select:{type:"point",encodings:["x"]}}],mark:{type:"bar",cursor:"pointer"},encoding:{x:{field:"bin",axis:{title:_,titleColor:w,labelColor:w}},y:{field:b?"filteredCount":"count",type:"quantitative",axis:{title:a,titleColor:w,labelColor:w,tickCount:3}},color:{value:m},stroke:{condition:[{param:"select",empty:!1,value:w}],value:"transparent"},strokeWidth:{condition:[{param:"select",empty:!1,value:3}],value:0}},color:{value:l}},{mark:{type:"bar"},encoding:{size:{legend:null},x:{field:"bin",title:""},y:{field:"filteredCount",type:"quantitative",title:""},color:{value:l}}}]}),t.$$.dirty&16385&&S&&!x&&(S.addSignalListener("select",(...M)=>{let A;M[1]&&"bin"in M[1]?A=M[1].bin:A=null,o("select",A)}),n(14,x=!0))},[S,s,i,c,d,f,u,a,_,w,m,l,T,b,x,B,F,k]}class CPe extends Ou{constructor(e){super(),Fu(this,e,NPe,APe,Bu,{bins:3,title:4,width:5,height:6,countLabel:7,dimLabel:8,labelColor:9,backgroundBarColor:10,foregroundBarColor:11,backgroundColor:12,onlyFiltered:13})}}function RPe(t){let e,n;return e=new CPe({props:{bins:t[10],title:t[0],width:t[1],height:t[2],countLabel:t[3],dimLabel:t[4],labelColor:t[5],backgroundBarColor:t[6],foregroundBarColor:t[7],backgroundColor:t[8],onlyFiltered:t[9]}}),e.$on("mouseenter",t[12]),e.$on("mouseleave",t[13]),e.$on("select",t[14]),{c(){ng(e.$$.fragment)},m(i,s){ku(e,i,s),n=!0},p(i,[s]){const o={};s&1024&&(o.bins=i[10]),s&1&&(o.title=i[0]),s&2&&(o.width=i[1]),s&4&&(o.height=i[2]),s&8&&(o.countLabel=i[3]),s&16&&(o.dimLabel=i[4]),s&32&&(o.labelColor=i[5]),s&64&&(o.backgroundBarColor=i[6]),s&128&&(o.foregroundBarColor=i[7]),s&256&&(o.backgroundColor=i[8]),s&512&&(o.onlyFiltered=i[9]),e.$set(o)},i(i){n||(ko(e.$$.fragment,i),n=!0)},o(i){ed(e.$$.fragment,i),n=!1},d(i){Iu(e,i)}}}function LPe(t,e,n){let i,{state:s}=e,{title:o=""}=e,{width:c=400}=e,{height:d=125}=e,{countLabel:f="Count"}=e,{dimLabel:u=""}=e,{labelColor:a="hsla(0, 0%, 100%, 0.9)"}=e,{backgroundBarColor:_="hsla(0, 0%, 100%, 0.5)"}=e,{foregroundBarColor:w="hsla(172, 97%, 45%, 0.95)"}=e,{backgroundColor:m="hsl(240,23%,9%)"}=e,{onlyFiltered:l=!1}=e;function T(x){Dr.call(this,t,x)}function b(x){Dr.call(this,t,x)}function S(x){Dr.call(this,t,x)}return t.$$set=x=>{"state"in x&&n(11,s=x.state),"title"in x&&n(0,o=x.title),"width"in x&&n(1,c=x.width),"height"in x&&n(2,d=x.height),"countLabel"in x&&n(3,f=x.countLabel),"dimLabel"in x&&n(4,u=x.dimLabel),"labelColor"in x&&n(5,a=x.labelColor),"backgroundBarColor"in x&&n(6,_=x.backgroundBarColor),"foregroundBarColor"in x&&n(7,w=x.foregroundBarColor),"backgroundColor"in x&&n(8,m=x.backgroundColor),"onlyFiltered"in x&&n(9,l=x.onlyFiltered)},t.$$.update=()=>{var x,B;t.$$.dirty&2048&&n(10,i=(B=(x=s==null?void 0:s.bin)==null?void 0:x.filter(F=>F!==null).map((F,k)=>({bin:F,count:s.total[k],filteredCount:s.filter[k]})))!=null?B:[])},[o,c,d,f,u,a,_,w,m,l,i,s,T,b,S]}class PPe extends Ou{constructor(e){super(),Fu(this,e,LPe,RPe,Bu,{state:11,title:0,width:1,height:2,countLabel:3,dimLabel:4,labelColor:5,backgroundBarColor:6,foregroundBarColor:7,backgroundColor:8,onlyFiltered:9})}}function DPe(t){let e,n,i,s,o,c;function d(u){t[17](u)}let f={data:t[2],spec:t[1],options:{tooltip:!0,actions:!1,theme:"vox"}};return t[0]!==void 0&&(f.view=t[0]),n=new CQ({props:f}),ip.push(()=>qF(n,"view",d)),{c(){e=Br("div"),ng(n.$$.fragment),Ac(e,"class","container svelte-mufgje")},m(u,a){Yy(u,e,a),ku(n,e,null),s=!0,o||(c=[Z0(e,"mouseenter",t[15]),Z0(e,"mouseleave",t[16])],o=!0)},p(u,[a]){const _={};a&4&&(_.data=u[2]),a&2&&(_.spec=u[1]),!i&&a&1&&(i=!0,_.view=u[0],zF(()=>i=!1)),n.$set(_)},i(u){s||(ko(n.$$.fragment,u),s=!0)},o(u){ed(n.$$.fragment,u),s=!1},d(u){u&&tg(e),Iu(n),o=!1,xu(c)}}}function jPe(t,e,n){let i,s;const o=$F();let{bins:c=[{bin:[0,10],count:200,filteredCount:150},{bin:[10,20],count:300,filteredCount:25},{bin:[20,30],count:72,filteredCount:12}]}=e,{title:d=""}=e,{width:f=400}=e,{height:u=125}=e,{countLabel:a="Count"}=e,{dimLabel:_=""}=e,{labelColor:w="hsla(0, 0%, 100%, 0.9)"}=e,{backgroundBarColor:m="hsla(0, 0%, 100%, 0.5)"}=e,{foregroundBarColor:l="hsla(172, 97%, 45%, 0.95)"}=e,{backgroundColor:T="hsl(240,23%,9%)"}=e,{onlyFiltered:b=!1}=e,S,x=!1;function B(M){Dr.call(this,t,M)}function F(M){Dr.call(this,t,M)}function k(M){S=M,n(0,S)}return t.$$set=M=>{"bins"in M&&n(3,c=M.bins),"title"in M&&n(4,d=M.title),"width"in M&&n(5,f=M.width),"height"in M&&n(6,u=M.height),"countLabel"in M&&n(7,a=M.countLabel),"dimLabel"in M&&n(8,_=M.dimLabel),"labelColor"in M&&n(9,w=M.labelColor),"backgroundBarColor"in M&&n(10,m=M.backgroundBarColor),"foregroundBarColor"in M&&n(11,l=M.foregroundBarColor),"backgroundColor"in M&&n(12,T=M.backgroundColor),"onlyFiltered"in M&&n(13,b=M.onlyFiltered)},t.$$.update=()=>{t.$$.dirty&8&&n(2,i={table:c}),t.$$.dirty&16368&&n(1,s={$schema:"https://vega.github.io/schema/vega-lite/v5.json",description:"A simple bar chart with embedded data.",data:{name:"table"},background:T,width:f,height:u,title:d,layer:[{params:[{name:"select",select:{type:"interval",encodings:["x"]}}],mark:{type:"bar",cursor:"col-resize"},encoding:{x:{field:"bin[0]",bin:{binned:!0},axis:{title:_,titleColor:w,labelColor:w}},x2:{field:"bin[1]"},y:{field:b?"filteredCount":"count",type:"quantitative",axis:{title:a,titleColor:w,tickCount:3,labelColor:w}},color:{value:m}}},{mark:{type:"bar"},encoding:{size:{legend:null},x:{field:"bin[0]",bin:{binned:!0},title:""},x2:{field:"bin[1]"},y:{field:"filteredCount",type:"quantitative"},color:{value:l}}}]}),t.$$.dirty&16385&&S&&!x&&(S.addSignalListener("select",(...M)=>{var A;o("select",(A=M[1]["bin\\.0"])!=null?A:null)}),n(14,x=!0))},[S,s,i,c,d,f,u,a,_,w,m,l,T,b,x,B,F,k]}class UPe extends Ou{constructor(e){super(),Fu(this,e,jPe,DPe,Bu,{bins:3,title:4,width:5,height:6,countLabel:7,dimLabel:8,labelColor:9,backgroundBarColor:10,foregroundBarColor:11,backgroundColor:12,onlyFiltered:13})}}function $Pe(t){let e,n;return e=new UPe({props:{bins:t[6],title:t[0],width:t[1],height:t[2],countLabel:t[3],dimLabel:t[4],onlyFiltered:t[5]}}),e.$on("select",t[8]),e.$on("mouseenter",t[9]),e.$on("mouseleave",t[10]),{c(){ng(e.$$.fragment)},m(i,s){ku(e,i,s),n=!0},p(i,[s]){const o={};s&64&&(o.bins=i[6]),s&1&&(o.title=i[0]),s&2&&(o.width=i[1]),s&4&&(o.height=i[2]),s&8&&(o.countLabel=i[3]),s&16&&(o.dimLabel=i[4]),s&32&&(o.onlyFiltered=i[5]),e.$set(o)},i(i){n||(ko(e.$$.fragment,i),n=!0)},o(i){ed(e.$$.fragment,i),n=!1},d(i){Iu(e,i)}}}function zPe(t){let e=[];if(t)for(let n=0;n<t.bin.length;n++)e.push({bin:[t.bin[n].binStart,t.bin[n].binEnd],count:t.total[n],filteredCount:t.filter[n]});return e}function qPe(t,e,n){let i,{state:s}=e,{title:o=""}=e,{width:c=400}=e,{height:d=125}=e,{countLabel:f="Count"}=e,{dimLabel:u=""}=e,{onlyFiltered:a=!1}=e;function _(l){Dr.call(this,t,l)}function w(l){Dr.call(this,t,l)}function m(l){Dr.call(this,t,l)}return t.$$set=l=>{"state"in l&&n(7,s=l.state),"title"in l&&n(0,o=l.title),"width"in l&&n(1,c=l.width),"height"in l&&n(2,d=l.height),"countLabel"in l&&n(3,f=l.countLabel),"dimLabel"in l&&n(4,u=l.dimLabel),"onlyFiltered"in l&&n(5,a=l.onlyFiltered)},t.$$.update=()=>{t.$$.dirty&128&&n(6,i=zPe(s))},[o,c,d,f,u,a,i,s,_,w,m]}class GPe extends Ou{constructor(e){super(),Fu(this,e,qPe,$Pe,Bu,{state:7,title:0,width:1,height:2,countLabel:3,dimLabel:4,onlyFiltered:5})}}function JU(t,e,n){const i=t.slice();i[8]=e[n],i[12]=n;const s=i[1][i[12]];i[9]=s;const o=i[8].dimension.type==="continuous"?GPe:PPe;return i[10]=o,i}function QU(t){let e,n,i,s;function o(...d){return t[3](t[8],...d)}function c(){return t[4](t[8])}return n=new t[10]({props:{state:t[9],dimLabel:t[8].dimension.name.replaceAll("_"," ")}}),n.$on("select",o),n.$on("mouseenter",c),{c(){e=Br("div"),ng(n.$$.fragment),i=o_(),Ac(e,"class","hist-baby svelte-1kw04a3")},m(d,f){Yy(d,e,f),ku(n,e,null),nr(e,i),s=!0},p(d,f){t=d;const u={};f&2&&(u.state=t[9]),n.$set(u)},i(d){s||(ko(n.$$.fragment,d),s=!0)},o(d){ed(n.$$.fragment,d),s=!1},d(d){d&&tg(e),Iu(n)}}}function VPe(t){var F;let e,n,i,s,o,c,d,f,u,a,_,w=((F=t[0])==null?void 0:F.filter.toLocaleString())+"",m,l,T,b,S=t[2],x=[];for(let k=0;k<S.length;k+=1)x[k]=QU(JU(t,S,k));const B=k=>ed(x[k],1,1,()=>{x[k]=null});return{c(){e=Br("main"),n=Br("div"),i=Br("img"),o=o_(),c=Br("h1"),c.textContent="Movies",d=o_(),f=Br("h3"),u=Br("span"),u.textContent="selected",a=o_(),_=Br("code"),m=t8(w),l=o_(),T=Br("div");for(let k=0;k<x.length;k+=1)x[k].c();$Q(i.src,s="logo.png")||Ac(i,"src",s),Ac(i,"alt","falcon logo"),Ac(i,"width","50px"),OL(u,"font-weight","250"),OL(_,"color","var(--primary-color)"),Ac(_,"class","svelte-1kw04a3"),Ac(T,"class","hist svelte-1kw04a3")},m(k,M){Yy(k,e,M),nr(e,n),nr(n,i),nr(n,o),nr(n,c),nr(n,d),nr(n,f),nr(f,u),nr(f,a),nr(f,_),nr(_,m),nr(e,l),nr(e,T);for(let A=0;A<x.length;A+=1)x[A].m(T,null);b=!0},p(k,[M]){var A;if((!b||M&1)&&w!==(w=((A=k[0])==null?void 0:A.filter.toLocaleString())+"")&&VQ(m,w),M&6){S=k[2];let R;for(R=0;R<S.length;R+=1){const P=JU(k,S,R);x[R]?(x[R].p(P,M),ko(x[R],1)):(x[R]=QU(P),x[R].c(),ko(x[R],1),x[R].m(T,null))}for(QQ(),R=S.length;R<x.length;R+=1)B(R);ZQ()}},i(k){if(!b){for(let M=0;M<S.length;M+=1)ko(x[M]);b=!0}},o(k){x=x.filter(Boolean);for(let M=0;M<x.length;M+=1)ed(x[M]);b=!1},d(k){k&&tg(e),qQ(x,k)}}}function WPe(t){return`${window.location.href}${t}`}function HPe(t,e,n){let i,s,o,c=[],d=[];HQ(async()=>{await f()});async function f(){const _=await CM.fromParquetFile(WPe("data/movies-3k.parquet"));i=new qhe(_),s=i.view0D(),s.onChange(w=>{n(0,o=w)}),c.push(i.view1D({type:"categorical",name:"MPAA_Rating"})),c.push(i.view1D({type:"continuous",name:"US_Gross",bins:25,resolution:400})),c.push(i.view1D({type:"continuous",name:"Worldwide_Gross",bins:25,resolution:400})),c.push(i.view1D({type:"continuous",name:"Production_Budget",bins:25,resolution:400})),c.push(i.view1D({type:"categorical",name:"Distributor",range:["Warner Bros.","Sony Pictures","Paramount Pictures","Universal","Walt Disney Pictures","20th Century Fox","MGM","Miramax","New Line","Lionsgate","Sony Pictures Classics","Fox Searchlight","Dreamworks SKG","Focus Features","Weinstein Co."]})),c.push(i.view1D({type:"continuous",name:"IMDB_Rating",bins:25,resolution:400})),c.push(i.view1D({type:"continuous",name:"Rotten_Tomatoes_Rating",bins:25,resolution:400})),c.push(i.view1D({type:"categorical",name:"Major_Genre"})),c.push(i.view1D({type:"continuous",name:"Running_Time_min",bins:25,resolution:400})),n(1,d=new Array(c.length)),c.forEach((w,m)=>{w.onChange(l=>{n(1,d[m]=l,d)})}),await i.all()}return[o,d,c,(_,w)=>{const m=w.detail;m!==null?_.select(m):_.select()},async _=>{await _.prefetch()}]}class YPe extends Ou{constructor(e){super(),Fu(this,e,HPe,VPe,Bu,{})}}new YPe({target:document.getElementById("app")})});export default XPe();
