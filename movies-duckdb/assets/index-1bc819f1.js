var MZ=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var OPe=MZ((o$e,M3)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function i(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=i(s);fetch(s.href,a)}})();function Uh(){}function M8(t){return t()}function ZL(){return Object.create(null)}function yu(t){t.forEach(M8)}function A8(t){return typeof t=="function"}function gu(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function AZ(t){return Object.keys(t).length===0}function zn(t,e){t.appendChild(e)}function _m(t,e,i){t.insertBefore(e,i||null)}function d_(t){t.parentNode&&t.parentNode.removeChild(t)}function OZ(t,e){for(let i=0;i<t.length;i+=1)t[i]&&t[i].d(e)}function Gs(t){return document.createElement(t)}function O8(t){return document.createTextNode(t)}function oh(){return O8(" ")}function BT(t,e,i,n){return t.addEventListener(e,i,n),()=>t.removeEventListener(e,i,n)}function $a(t,e,i){i==null?t.removeAttribute(e):t.getAttribute(e)!==i&&t.setAttribute(e,i)}function NZ(t){return Array.from(t.childNodes)}function CZ(t,e){e=""+e,t.data!==e&&(t.data=e)}function eD(t,e,i,n){i===null?t.style.removeProperty(e):t.style.setProperty(e,i,n?"important":"")}function RZ(t,e,{bubbles:i=!1,cancelable:n=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(t,i,n,e),s}let _g;function Jy(t){_g=t}function f2(){if(!_g)throw new Error("Function called outside component initialization");return _g}function LZ(t){f2().$$.on_mount.push(t)}function DZ(t){f2().$$.on_destroy.push(t)}function u2(){const t=f2();return(e,i,{cancelable:n=!1}={})=>{const s=t.$$.callbacks[e];if(s){const a=RZ(e,i,{cancelable:n});return s.slice().forEach(c=>{c.call(t,a)}),!a.defaultPrevented}return!0}}function Tr(t,e){const i=t.$$.callbacks[e.type];i&&i.slice().forEach(n=>n.call(this,e))}const lh=[],fp=[];let zh=[];const mI=[],PZ=Promise.resolve();let wI=!1;function $Z(){wI||(wI=!0,PZ.then(N8))}function bI(t){zh.push(t)}function h2(t){mI.push(t)}const Bx=new Set;let Gu=0;function N8(){if(Gu!==0)return;const t=_g;do{try{for(;Gu<lh.length;){const e=lh[Gu];Gu++,Jy(e),UZ(e.$$)}}catch(e){throw lh.length=0,Gu=0,e}for(Jy(null),lh.length=0,Gu=0;fp.length;)fp.pop()();for(let e=0;e<zh.length;e+=1){const i=zh[e];Bx.has(i)||(Bx.add(i),i())}zh.length=0}while(lh.length);for(;mI.length;)mI.pop()();wI=!1,Bx.clear(),Jy(t)}function UZ(t){if(t.fragment!==null){t.update(),yu(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(bI)}}function zZ(t){const e=[],i=[];zh.forEach(n=>t.indexOf(n)===-1?e.push(n):i.push(n)),i.forEach(n=>n()),zh=e}const C0=new Set;let gf;function jZ(){gf={r:0,c:[],p:gf}}function qZ(){gf.r||yu(gf.c),gf=gf.p}function ao(t,e){t&&t.i&&(C0.delete(t),t.i(e))}function Dc(t,e,i,n){if(t&&t.o){if(C0.has(t))return;C0.add(t),gf.c.push(()=>{C0.delete(t),n&&(i&&t.d(1),n())}),t.o(e)}else n&&n()}const GZ=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"];[...GZ];function p2(t,e,i){const n=t.$$.props[e];n!==void 0&&(t.$$.bound[n]=i,i(t.$$.ctx[n]))}function f_(t){t&&t.c()}function mu(t,e,i,n){const{fragment:s,after_update:a}=t.$$;s&&s.m(e,i),n||bI(()=>{const c=t.$$.on_mount.map(M8).filter(A8);t.$$.on_destroy?t.$$.on_destroy.push(...c):yu(c),t.$$.on_mount=[]}),a.forEach(bI)}function wu(t,e){const i=t.$$;i.fragment!==null&&(zZ(i.after_update),yu(i.on_destroy),i.fragment&&i.fragment.d(e),i.on_destroy=i.fragment=null,i.ctx=[])}function VZ(t,e){t.$$.dirty[0]===-1&&(lh.push(t),$Z(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function bu(t,e,i,n,s,a,c,d=[-1]){const f=_g;Jy(t);const u=t.$$={fragment:null,ctx:[],props:a,update:Uh,not_equal:s,bound:ZL(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:ZL(),dirty:d,skip_bound:!1,root:e.target||f.$$.root};c&&c(u.root);let o=!1;if(u.ctx=i?i(t,e.props||{},(g,w,...m)=>{const l=m.length?m[0]:w;return u.ctx&&s(u.ctx[g],u.ctx[g]=l)&&(!u.skip_bound&&u.bound[g]&&u.bound[g](l),o&&VZ(t,g)),w}):[],u.update(),o=!0,yu(u.before_update),u.fragment=n?n(u.ctx):!1,e.target){if(e.hydrate){const g=NZ(e.target);u.fragment&&u.fragment.l(g),g.forEach(d_)}else u.fragment&&u.fragment.c();e.intro&&ao(t.$$.fragment),mu(t,e.target,e.anchor,e.customElement),N8()}Jy(f)}class Tu{$destroy(){wu(this,1),this.$destroy=Uh}$on(e,i){if(!A8(i))return Uh;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(i),()=>{const s=n.indexOf(i);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!AZ(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function WZ(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(i[n[s]]=t[n[s]]);return i}function ye(t,e,i,n){function s(a){return a instanceof i?a:new i(function(c){c(a)})}return new(i||(i=Promise))(function(a,c){function d(o){try{u(n.next(o))}catch(g){c(g)}}function f(o){try{u(n.throw(o))}catch(g){c(g)}}function u(o){o.done?a(o.value):s(o.value).then(d,f)}u((n=n.apply(t,e||[])).next())})}function tD(t){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Be(t){return this instanceof Be?(this.v=t,this):new Be(t)}function Ri(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=i.apply(t,e||[]),s,a=[];return s={},c("next"),c("throw"),c("return"),s[Symbol.asyncIterator]=function(){return this},s;function c(w){n[w]&&(s[w]=function(m){return new Promise(function(l,T){a.push([w,m,l,T])>1||d(w,m)})})}function d(w,m){try{f(n[w](m))}catch(l){g(a[0][3],l)}}function f(w){w.value instanceof Be?Promise.resolve(w.value.v).then(u,o):g(a[0][2],w)}function u(w){d("next",w)}function o(w){d("throw",w)}function g(w,m){w(m),a.shift(),a.length&&d(a[0][0],a[0][1])}}function Mc(t){var e,i;return e={},n("next"),n("throw",function(s){throw s}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(s,a){e[s]=t[s]?function(c){return(i=!i)?{value:Be(t[s](c)),done:!1}:a?a(c):c}:a}}function Qn(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],i;return e?e.call(t):(t=typeof tD=="function"?tD(t):t[Symbol.iterator](),i={},n("next"),n("throw"),n("return"),i[Symbol.asyncIterator]=function(){return this},i);function n(a){i[a]=t[a]&&function(c){return new Promise(function(d,f){c=t[a](c),s(d,f,c.done,c.value)})}}function s(a,c,d,f){Promise.resolve(f).then(function(u){a({value:u,done:d})},c)}}const HZ=new TextDecoder("utf-8"),TI=t=>HZ.decode(t),YZ=new TextEncoder,Zv=t=>YZ.encode(t),[Dl,DPe]=(()=>{const t=()=>{throw new Error("BigInt64Array is not available in this environment")};class e{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}}return typeof BigInt64Array<"u"?[BigInt64Array,!0]:[e,!1]})(),[Pl,PPe]=(()=>{const t=()=>{throw new Error("BigUint64Array is not available in this environment")};class e{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}}return typeof BigUint64Array<"u"?[BigUint64Array,!0]:[e,!1]})(),XZ=t=>typeof t=="number",C8=t=>typeof t=="boolean",Ui=t=>typeof t=="function",Es=t=>t!=null&&Object(t)===t,Pc=t=>Es(t)&&Ui(t.then),u_=t=>Es(t)&&Ui(t[Symbol.iterator]),vu=t=>Es(t)&&Ui(t[Symbol.asyncIterator]),vI=t=>Es(t)&&Es(t.schema),R8=t=>Es(t)&&"done"in t&&"value"in t,L8=t=>Es(t)&&Ui(t.stat)&&XZ(t.fd),D8=t=>Es(t)&&_2(t.body),eE=t=>"_getDOMStream"in t&&"_getNodeStream"in t,KZ=t=>Es(t)&&Ui(t.abort)&&Ui(t.getWriter)&&!eE(t),_2=t=>Es(t)&&Ui(t.cancel)&&Ui(t.getReader)&&!eE(t),JZ=t=>Es(t)&&Ui(t.end)&&Ui(t.write)&&C8(t.writable)&&!eE(t),P8=t=>Es(t)&&Ui(t.read)&&Ui(t.pipe)&&C8(t.readable)&&!eE(t),QZ=t=>Es(t)&&Ui(t.clear)&&Ui(t.bytes)&&Ui(t.position)&&Ui(t.setPosition)&&Ui(t.capacity)&&Ui(t.getBufferIdentifier)&&Ui(t.createLong),y2=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function ZZ(t){const e=t[0]?[t[0]]:[];let i,n,s,a;for(let c,d,f=0,u=0,o=t.length;++f<o;){if(c=e[u],d=t[f],!c||!d||c.buffer!==d.buffer||d.byteOffset<c.byteOffset){d&&(e[++u]=d);continue}if({byteOffset:i,byteLength:s}=c,{byteOffset:n,byteLength:a}=d,i+s<n||n+a<i){d&&(e[++u]=d);continue}e[u]=new Uint8Array(c.buffer,i,n-i+a)}return e}function yg(t,e,i=0,n=e.byteLength){const s=t.byteLength,a=new Uint8Array(t.buffer,t.byteOffset,s),c=new Uint8Array(e.buffer,e.byteOffset,Math.min(n,s));return a.set(c,i),t}function da(t,e){const i=ZZ(t),n=i.reduce((o,g)=>o+g.byteLength,0);let s,a,c,d=0,f=-1;const u=Math.min(e||Number.POSITIVE_INFINITY,n);for(const o=i.length;++f<o;){if(s=i[f],a=s.subarray(0,Math.min(s.length,u-d)),u<=d+a.length){a.length<s.length?i[f]=s.subarray(a.length):a.length===s.length&&f++,c?yg(c,a,d):c=a;break}yg(c||(c=new Uint8Array(u)),a,d),d+=a.length}return[c||new Uint8Array(0),i.slice(f),n-(c?c.byteLength:0)]}function Bt(t,e){let i=R8(e)?e.value:e;return i instanceof t?t===Uint8Array?new t(i.buffer,i.byteOffset,i.byteLength):i:i?(typeof i=="string"&&(i=Zv(i)),i instanceof ArrayBuffer?new t(i):i instanceof y2?new t(i):QZ(i)?Bt(t,i.bytes()):ArrayBuffer.isView(i)?i.byteLength<=0?new t(0):new t(i.buffer,i.byteOffset,i.byteLength/t.BYTES_PER_ELEMENT):t.from(i)):new t(0)}const eee=t=>Bt(Int8Array,t),tee=t=>Bt(Int16Array,t),ch=t=>Bt(Int32Array,t),iee=t=>Bt(Dl,t),kt=t=>Bt(Uint8Array,t),nee=t=>Bt(Uint16Array,t),see=t=>Bt(Uint32Array,t),ree=t=>Bt(Pl,t),aee=t=>Bt(Float32Array,t),oee=t=>Bt(Float64Array,t),lee=t=>Bt(Uint8ClampedArray,t),EI=t=>(t.next(),t);function*Ao(t,e){const i=function*(s){yield s},n=typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof y2?i(e):u_(e)?e:i(e);return yield*EI(function*(s){let a=null;do a=s.next(yield Bt(t,a));while(!a.done)}(n[Symbol.iterator]())),new t}const cee=t=>Ao(Int8Array,t),dee=t=>Ao(Int16Array,t),fee=t=>Ao(Int32Array,t),$8=t=>Ao(Uint8Array,t),uee=t=>Ao(Uint16Array,t),hee=t=>Ao(Uint32Array,t),pee=t=>Ao(Float32Array,t),_ee=t=>Ao(Float64Array,t),yee=t=>Ao(Uint8ClampedArray,t);function ga(t,e){return Ri(this,arguments,function*(){if(Pc(e))return yield Be(yield Be(yield*Mc(Qn(ga(t,yield Be(e))))));const n=function(c){return Ri(this,arguments,function*(){yield yield Be(yield Be(c))})},s=function(c){return Ri(this,arguments,function*(){yield Be(yield*Mc(Qn(EI(function*(d){let f=null;do f=d.next(yield f==null?void 0:f.value);while(!f.done)}(c[Symbol.iterator]())))))})},a=typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof y2?n(e):u_(e)?s(e):vu(e)?e:n(e);return yield Be(yield*Mc(Qn(EI(function(c){return Ri(this,arguments,function*(){let d=null;do d=yield Be(c.next(yield yield Be(Bt(t,d))));while(!d.done)})}(a[Symbol.asyncIterator]()))))),yield Be(new t)})}const gee=t=>ga(Int8Array,t),mee=t=>ga(Int16Array,t),wee=t=>ga(Int32Array,t),U8=t=>ga(Uint8Array,t),bee=t=>ga(Uint16Array,t),Tee=t=>ga(Uint32Array,t),vee=t=>ga(Float32Array,t),Eee=t=>ga(Float64Array,t),See=t=>ga(Uint8ClampedArray,t);function tE(t,e,i){if(t!==0){i=i.slice(0,e+1);for(let n=-1;++n<=e;)i[n]+=t}return i}function z8(t,e){let i=0;const n=t.length;if(n!==e.length)return!1;if(n>0)do if(t[i]!==e[i])return!1;while(++i<n);return!0}const xee=Object.freeze(Object.defineProperty({__proto__:null,compareArrayLike:z8,joinUint8Arrays:da,memcpy:yg,rebaseValueOffsets:tE,toArrayBufferView:Bt,toArrayBufferViewAsyncIterator:ga,toArrayBufferViewIterator:Ao,toBigInt64Array:iee,toBigUint64Array:ree,toFloat32Array:aee,toFloat32ArrayAsyncIterator:vee,toFloat32ArrayIterator:pee,toFloat64Array:oee,toFloat64ArrayAsyncIterator:Eee,toFloat64ArrayIterator:_ee,toInt16Array:tee,toInt16ArrayAsyncIterator:mee,toInt16ArrayIterator:dee,toInt32Array:ch,toInt32ArrayAsyncIterator:wee,toInt32ArrayIterator:fee,toInt8Array:eee,toInt8ArrayAsyncIterator:gee,toInt8ArrayIterator:cee,toUint16Array:nee,toUint16ArrayAsyncIterator:bee,toUint16ArrayIterator:uee,toUint32Array:see,toUint32ArrayAsyncIterator:Tee,toUint32ArrayIterator:hee,toUint8Array:kt,toUint8ArrayAsyncIterator:U8,toUint8ArrayIterator:$8,toUint8ClampedArray:lee,toUint8ClampedArrayAsyncIterator:See,toUint8ClampedArrayIterator:yee},Symbol.toStringTag,{value:"Module"})),Ws={fromIterable(t){return $b(Bee(t))},fromAsyncIterable(t){return $b(Iee(t))},fromDOMStream(t){return $b(kee(t))},fromNodeStream(t){return $b(Mee(t))},toDOMStream(t,e){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(t,e){throw new Error('"toNodeStream" not available in this environment')}},$b=t=>(t.next(),t);function*Bee(t){let e,i=!1,n=[],s,a,c,d=0;function f(){return a==="peek"?da(n,c)[0]:([s,n,d]=da(n,c),s)}({cmd:a,size:c}=yield null);const u=$8(t)[Symbol.iterator]();try{do if({done:e,value:s}=Number.isNaN(c-d)?u.next():u.next(c-d),!e&&s.byteLength>0&&(n.push(s),d+=s.byteLength),e||c<=d)do({cmd:a,size:c}=yield f());while(c<d);while(!e)}catch(o){(i=!0)&&typeof u.throw=="function"&&u.throw(o)}finally{i===!1&&typeof u.return=="function"&&u.return(null)}return null}function Iee(t){return Ri(this,arguments,function*(){let i,n=!1,s=[],a,c,d,f=0;function u(){return c==="peek"?da(s,d)[0]:([a,s,f]=da(s,d),a)}({cmd:c,size:d}=yield yield Be(null));const o=U8(t)[Symbol.asyncIterator]();try{do if({done:i,value:a}=Number.isNaN(d-f)?yield Be(o.next()):yield Be(o.next(d-f)),!i&&a.byteLength>0&&(s.push(a),f+=a.byteLength),i||d<=f)do({cmd:c,size:d}=yield yield Be(u()));while(d<f);while(!i)}catch(g){(n=!0)&&typeof o.throw=="function"&&(yield Be(o.throw(g)))}finally{n===!1&&typeof o.return=="function"&&(yield Be(o.return(new Uint8Array(0))))}return yield Be(null)})}function kee(t){return Ri(this,arguments,function*(){let i=!1,n=!1,s=[],a,c,d,f=0;function u(){return c==="peek"?da(s,d)[0]:([a,s,f]=da(s,d),a)}({cmd:c,size:d}=yield yield Be(null));const o=new Fee(t);try{do if({done:i,value:a}=Number.isNaN(d-f)?yield Be(o.read()):yield Be(o.read(d-f)),!i&&a.byteLength>0&&(s.push(kt(a)),f+=a.byteLength),i||d<=f)do({cmd:c,size:d}=yield yield Be(u()));while(d<f);while(!i)}catch(g){(n=!0)&&(yield Be(o.cancel(g)))}finally{n===!1?yield Be(o.cancel()):t.locked&&o.releaseLock()}return yield Be(null)})}let Fee=class{constructor(e){this.source=e,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(e){return ye(this,void 0,void 0,function*(){const{reader:i,source:n}=this;i&&(yield i.cancel(e).catch(()=>{})),n&&n.locked&&this.releaseLock()})}read(e){return ye(this,void 0,void 0,function*(){if(e===0)return{done:this.reader==null,value:new Uint8Array(0)};const i=yield this.reader.read();return!i.done&&(i.value=kt(i)),i})}};const Ix=(t,e)=>{const i=s=>n([e,s]);let n;return[e,i,new Promise(s=>(n=s)&&t.once(e,i))]};function Mee(t){return Ri(this,arguments,function*(){const i=[];let n="error",s=!1,a=null,c,d,f=0,u=[],o;function g(){return c==="peek"?da(u,d)[0]:([o,u,f]=da(u,d),o)}if({cmd:c,size:d}=yield yield Be(null),t.isTTY)return yield yield Be(new Uint8Array(0)),yield Be(null);try{i[0]=Ix(t,"end"),i[1]=Ix(t,"error");do{if(i[2]=Ix(t,"readable"),[n,a]=yield Be(Promise.race(i.map(m=>m[2]))),n==="error")break;if((s=n==="end")||(Number.isFinite(d-f)?(o=kt(t.read(d-f)),o.byteLength<d-f&&(o=kt(t.read()))):o=kt(t.read()),o.byteLength>0&&(u.push(o),f+=o.byteLength)),s||d<=f)do({cmd:c,size:d}=yield yield Be(g()));while(d<f)}while(!s)}finally{yield Be(w(i,n==="error"?a:null))}return yield Be(null);function w(m,l){return o=u=null,new Promise((T,b)=>{for(const[S,x]of m)t.off(S,x);try{const S=t.destroy;S&&S.call(t,l),l=void 0}catch(S){l=S||l}finally{l!=null?b(l):T()}})}})}var ps;(function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"})(ps||(ps={}));var an;(function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"})(an||(an={}));var Wi;(function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"})(Wi||(Wi={}));var Ss;(function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"})(Ss||(Ss={}));var lt;(function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"})(lt||(lt={}));var xr;(function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(xr||(xr={}));var Wt;(function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"})(Wt||(Wt={}));var ie;(function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth"})(ie||(ie={}));var qr;(function(t){t[t.OFFSET=0]="OFFSET",t[t.DATA=1]="DATA",t[t.VALIDITY=2]="VALIDITY",t[t.TYPE=3]="TYPE"})(qr||(qr={}));const Aee=void 0;function Uf(t){if(t===null)return"null";if(t===Aee)return"undefined";switch(typeof t){case"number":return`${t}`;case"bigint":return`${t}`;case"string":return`"${t}"`}return typeof t[Symbol.toPrimitive]=="function"?t[Symbol.toPrimitive]("string"):ArrayBuffer.isView(t)?t instanceof Dl||t instanceof Pl?`[${[...t].map(e=>Uf(e))}]`:`[${t}]`:ArrayBuffer.isView(t)?`[${t}]`:JSON.stringify(t,(e,i)=>typeof i=="bigint"?`${i}`:i)}const j8=Symbol.for("isArrowBigNum");function ma(t,...e){return e.length===0?Object.setPrototypeOf(Bt(this.TypedArray,t),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(t,...e),this.constructor.prototype)}ma.prototype[j8]=!0;ma.prototype.toJSON=function(){return`"${mg(this)}"`};ma.prototype.valueOf=function(){return q8(this)};ma.prototype.toString=function(){return mg(this)};ma.prototype[Symbol.toPrimitive]=function(t="default"){switch(t){case"number":return q8(this);case"string":return mg(this);case"default":return G8(this)}return mg(this)};function jh(...t){return ma.apply(this,t)}function qh(...t){return ma.apply(this,t)}function gg(...t){return ma.apply(this,t)}Object.setPrototypeOf(jh.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(qh.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(gg.prototype,Object.create(Uint32Array.prototype));Object.assign(jh.prototype,ma.prototype,{constructor:jh,signed:!0,TypedArray:Int32Array,BigIntArray:Dl});Object.assign(qh.prototype,ma.prototype,{constructor:qh,signed:!1,TypedArray:Uint32Array,BigIntArray:Pl});Object.assign(gg.prototype,ma.prototype,{constructor:gg,signed:!0,TypedArray:Uint32Array,BigIntArray:Pl});function q8(t){const{buffer:e,byteOffset:i,length:n,signed:s}=t,a=new Pl(e,i,n),c=s&&a[a.length-1]&BigInt(1)<<BigInt(63);let d=BigInt(c?1:0),f=BigInt(0);if(c){for(const u of a)d+=~u*(BigInt(1)<<BigInt(32)*f++);d*=BigInt(-1)}else for(const u of a)d+=u*(BigInt(1)<<BigInt(32)*f++);return d}const mg=t=>t.byteLength===8?`${new t.BigIntArray(t.buffer,t.byteOffset,1)[0]}`:V8(t),G8=t=>t.byteLength===8?new t.BigIntArray(t.buffer,t.byteOffset,1)[0]:V8(t);function V8(t){let e="";const i=new Uint32Array(2);let n=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2);const s=new Uint32Array((n=new Uint16Array(n).reverse()).buffer);let a=-1;const c=n.length-1;do{for(i[0]=n[a=0];a<c;)n[a++]=i[1]=i[0]/10,i[0]=(i[0]-i[1]*10<<16)+n[a];n[a]=i[1]=i[0]/10,i[0]=i[0]-i[1]*10,e=`${i[0]}${e}`}while(s[0]||s[1]||s[2]||s[3]);return e??"0"}let g2=class W8{static new(e,i){switch(i){case!0:return new jh(e);case!1:return new qh(e)}switch(e.constructor){case Int8Array:case Int16Array:case Int32Array:case Dl:return new jh(e)}return e.byteLength===16?new gg(e):new qh(e)}static signed(e){return new jh(e)}static unsigned(e){return new qh(e)}static decimal(e){return new gg(e)}constructor(e,i){return W8.new(e,i)}};const Oee=Object.freeze(Object.defineProperty({__proto__:null,BN:g2,bignumToBigInt:G8,bignumToString:mg,isArrowBigNumSymbol:j8},Symbol.toStringTag,{value:"Module"}));function fa(t){if(typeof t=="bigint"&&(t<Number.MIN_SAFE_INTEGER||t>Number.MAX_SAFE_INTEGER))throw new TypeError(`${t} is not safe to convert to a number.`);return Number(t)}var H8,Y8,X8,K8,J8,Q8,Z8,ez,tz,iz,nz,sz,rz,az,oz,lz,cz,dz,fz;let Xe=class SI{static isNull(e){return(e==null?void 0:e.typeId)===ie.Null}static isInt(e){return(e==null?void 0:e.typeId)===ie.Int}static isFloat(e){return(e==null?void 0:e.typeId)===ie.Float}static isBinary(e){return(e==null?void 0:e.typeId)===ie.Binary}static isUtf8(e){return(e==null?void 0:e.typeId)===ie.Utf8}static isBool(e){return(e==null?void 0:e.typeId)===ie.Bool}static isDecimal(e){return(e==null?void 0:e.typeId)===ie.Decimal}static isDate(e){return(e==null?void 0:e.typeId)===ie.Date}static isTime(e){return(e==null?void 0:e.typeId)===ie.Time}static isTimestamp(e){return(e==null?void 0:e.typeId)===ie.Timestamp}static isInterval(e){return(e==null?void 0:e.typeId)===ie.Interval}static isList(e){return(e==null?void 0:e.typeId)===ie.List}static isStruct(e){return(e==null?void 0:e.typeId)===ie.Struct}static isUnion(e){return(e==null?void 0:e.typeId)===ie.Union}static isFixedSizeBinary(e){return(e==null?void 0:e.typeId)===ie.FixedSizeBinary}static isFixedSizeList(e){return(e==null?void 0:e.typeId)===ie.FixedSizeList}static isMap(e){return(e==null?void 0:e.typeId)===ie.Map}static isDictionary(e){return(e==null?void 0:e.typeId)===ie.Dictionary}static isDenseUnion(e){return SI.isUnion(e)&&e.mode===an.Dense}static isSparseUnion(e){return SI.isUnion(e)&&e.mode===an.Sparse}get typeId(){return ie.NONE}};H8=Symbol.toStringTag;Xe[H8]=(t=>(t.children=null,t.ArrayType=Array,t[Symbol.toStringTag]="DataType"))(Xe.prototype);let po=class extends Xe{toString(){return"Null"}get typeId(){return ie.Null}};Y8=Symbol.toStringTag;po[Y8]=(t=>t[Symbol.toStringTag]="Null")(po.prototype);let Cn=class extends Xe{constructor(e,i){super(),this.isSigned=e,this.bitWidth=i}get typeId(){return ie.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?Dl:Pl}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}};X8=Symbol.toStringTag;Cn[X8]=(t=>(t.isSigned=null,t.bitWidth=null,t[Symbol.toStringTag]="Int"))(Cn.prototype);class m2 extends Cn{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class w2 extends Cn{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}let $c=class extends Cn{constructor(){super(!0,32)}get ArrayType(){return Int32Array}},iE=class extends Cn{constructor(){super(!0,64)}get ArrayType(){return Dl}};class b2 extends Cn{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class T2 extends Cn{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class v2 extends Cn{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}let E2=class extends Cn{constructor(){super(!1,64)}get ArrayType(){return Pl}};Object.defineProperty(m2.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(w2.prototype,"ArrayType",{value:Int16Array});Object.defineProperty($c.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(iE.prototype,"ArrayType",{value:Dl});Object.defineProperty(b2.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(T2.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(v2.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(E2.prototype,"ArrayType",{value:Pl});let Fl=class extends Xe{constructor(e){super(),this.precision=e}get typeId(){return ie.Float}get ArrayType(){switch(this.precision){case Wi.HALF:return Uint16Array;case Wi.SINGLE:return Float32Array;case Wi.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}};K8=Symbol.toStringTag;Fl[K8]=(t=>(t.precision=null,t[Symbol.toStringTag]="Float"))(Fl.prototype);class uz extends Fl{constructor(){super(Wi.HALF)}}class S2 extends Fl{constructor(){super(Wi.SINGLE)}}class nE extends Fl{constructor(){super(Wi.DOUBLE)}}Object.defineProperty(uz.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(S2.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(nE.prototype,"ArrayType",{value:Float64Array});let wg=class extends Xe{constructor(){super()}get typeId(){return ie.Binary}toString(){return"Binary"}};J8=Symbol.toStringTag;wg[J8]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Binary"))(wg.prototype);let up=class extends Xe{constructor(){super()}get typeId(){return ie.Utf8}toString(){return"Utf8"}};Q8=Symbol.toStringTag;up[Q8]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Utf8"))(up.prototype);let hp=class extends Xe{constructor(){super()}get typeId(){return ie.Bool}toString(){return"Bool"}};Z8=Symbol.toStringTag;hp[Z8]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Bool"))(hp.prototype);let bg=class extends Xe{constructor(e,i,n=128){super(),this.scale=e,this.precision=i,this.bitWidth=n}get typeId(){return ie.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};ez=Symbol.toStringTag;bg[ez]=(t=>(t.scale=null,t.precision=null,t.ArrayType=Uint32Array,t[Symbol.toStringTag]="Decimal"))(bg.prototype);let zf=class extends Xe{constructor(e){super(),this.unit=e}get typeId(){return ie.Date}toString(){return`Date${(this.unit+1)*32}<${Ss[this.unit]}>`}};tz=Symbol.toStringTag;zf[tz]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Date"))(zf.prototype);class Nee extends zf{constructor(){super(Ss.DAY)}}class hz extends zf{constructor(){super(Ss.MILLISECOND)}}let _o=class extends Xe{constructor(e,i){super(),this.unit=e,this.bitWidth=i}get typeId(){return ie.Time}toString(){return`Time${this.bitWidth}<${lt[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return Dl}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}};iz=Symbol.toStringTag;_o[iz]=(t=>(t.unit=null,t.bitWidth=null,t[Symbol.toStringTag]="Time"))(_o.prototype);class Cee extends _o{constructor(){super(lt.SECOND,32)}}class Ree extends _o{constructor(){super(lt.MILLISECOND,32)}}class Lee extends _o{constructor(){super(lt.MICROSECOND,64)}}class Dee extends _o{constructor(){super(lt.NANOSECOND,64)}}let Ml=class extends Xe{constructor(e,i){super(),this.unit=e,this.timezone=i}get typeId(){return ie.Timestamp}toString(){return`Timestamp<${lt[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}};nz=Symbol.toStringTag;Ml[nz]=(t=>(t.unit=null,t.timezone=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Timestamp"))(Ml.prototype);class Pee extends Ml{constructor(e){super(lt.SECOND,e)}}class $ee extends Ml{constructor(e){super(lt.MILLISECOND,e)}}class Uee extends Ml{constructor(e){super(lt.MICROSECOND,e)}}class zee extends Ml{constructor(e){super(lt.NANOSECOND,e)}}let jf=class extends Xe{constructor(e){super(),this.unit=e}get typeId(){return ie.Interval}toString(){return`Interval<${xr[this.unit]}>`}};sz=Symbol.toStringTag;jf[sz]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Interval"))(jf.prototype);class jee extends jf{constructor(){super(xr.DAY_TIME)}}class qee extends jf{constructor(){super(xr.YEAR_MONTH)}}let qf=class extends Xe{constructor(e){super(),this.children=[e]}get typeId(){return ie.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};rz=Symbol.toStringTag;qf[rz]=(t=>(t.children=null,t[Symbol.toStringTag]="List"))(qf.prototype);let Qi=class extends Xe{constructor(e){super(),this.children=e}get typeId(){return ie.Struct}toString(){return`Struct<{${this.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}};az=Symbol.toStringTag;Qi[az]=(t=>(t.children=null,t[Symbol.toStringTag]="Struct"))(Qi.prototype);let Uc=class extends Xe{constructor(e,i,n){super(),this.mode=e,this.children=n,this.typeIds=i=Int32Array.from(i),this.typeIdToChildIndex=i.reduce((s,a,c)=>(s[a]=c)&&s||s,Object.create(null))}get typeId(){return ie.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(e=>`${e.type}`).join(" | ")}>`}};oz=Symbol.toStringTag;Uc[oz]=(t=>(t.mode=null,t.typeIds=null,t.children=null,t.typeIdToChildIndex=null,t.ArrayType=Int8Array,t[Symbol.toStringTag]="Union"))(Uc.prototype);class Gee extends Uc{constructor(e,i){super(an.Dense,e,i)}}class Vee extends Uc{constructor(e,i){super(an.Sparse,e,i)}}let Tg=class extends Xe{constructor(e){super(),this.byteWidth=e}get typeId(){return ie.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};lz=Symbol.toStringTag;Tg[lz]=(t=>(t.byteWidth=null,t.ArrayType=Uint8Array,t[Symbol.toStringTag]="FixedSizeBinary"))(Tg.prototype);let pp=class extends Xe{constructor(e,i){super(),this.listSize=e,this.children=[i]}get typeId(){return ie.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};cz=Symbol.toStringTag;pp[cz]=(t=>(t.children=null,t.listSize=null,t[Symbol.toStringTag]="FixedSizeList"))(pp.prototype);let _p=class extends Xe{constructor(e,i=!1){super(),this.children=[e],this.keysSorted=i}get typeId(){return ie.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}};dz=Symbol.toStringTag;_p[dz]=(t=>(t.children=null,t.keysSorted=null,t[Symbol.toStringTag]="Map_"))(_p.prototype);const Wee=(t=>()=>++t)(-1);let Al=class extends Xe{constructor(e,i,n,s){super(),this.indices=i,this.dictionary=e,this.isOrdered=s||!1,this.id=n==null?Wee():fa(n)}get typeId(){return ie.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}};fz=Symbol.toStringTag;Al[fz]=(t=>(t.id=null,t.indices=null,t.isOrdered=null,t.dictionary=null,t[Symbol.toStringTag]="Dictionary"))(Al.prototype);function Ua(t){const e=t;switch(t.typeId){case ie.Decimal:return t.bitWidth/32;case ie.Timestamp:return 2;case ie.Date:return 1+e.unit;case ie.Interval:return 1+e.unit;case ie.FixedSizeList:return e.listSize;case ie.FixedSizeBinary:return e.byteWidth;default:return 1}}let St=class{visitMany(e,...i){return e.map((n,s)=>this.visit(n,...i.map(a=>a[s])))}visit(...e){return this.getVisitFn(e[0],!1).apply(this,e)}getVisitFn(e,i=!0){return Hee(this,e,i)}getVisitFnByTypeId(e,i=!0){return dh(this,e,i)}visitNull(e,...i){return null}visitBool(e,...i){return null}visitInt(e,...i){return null}visitFloat(e,...i){return null}visitUtf8(e,...i){return null}visitBinary(e,...i){return null}visitFixedSizeBinary(e,...i){return null}visitDate(e,...i){return null}visitTimestamp(e,...i){return null}visitTime(e,...i){return null}visitDecimal(e,...i){return null}visitList(e,...i){return null}visitStruct(e,...i){return null}visitUnion(e,...i){return null}visitDictionary(e,...i){return null}visitInterval(e,...i){return null}visitFixedSizeList(e,...i){return null}visitMap(e,...i){return null}};function Hee(t,e,i=!0){return typeof e=="number"?dh(t,e,i):typeof e=="string"&&e in ie?dh(t,ie[e],i):e&&e instanceof Xe?dh(t,iD(e),i):e!=null&&e.type&&e.type instanceof Xe?dh(t,iD(e.type),i):dh(t,ie.NONE,i)}function dh(t,e,i=!0){let n=null;switch(e){case ie.Null:n=t.visitNull;break;case ie.Bool:n=t.visitBool;break;case ie.Int:n=t.visitInt;break;case ie.Int8:n=t.visitInt8||t.visitInt;break;case ie.Int16:n=t.visitInt16||t.visitInt;break;case ie.Int32:n=t.visitInt32||t.visitInt;break;case ie.Int64:n=t.visitInt64||t.visitInt;break;case ie.Uint8:n=t.visitUint8||t.visitInt;break;case ie.Uint16:n=t.visitUint16||t.visitInt;break;case ie.Uint32:n=t.visitUint32||t.visitInt;break;case ie.Uint64:n=t.visitUint64||t.visitInt;break;case ie.Float:n=t.visitFloat;break;case ie.Float16:n=t.visitFloat16||t.visitFloat;break;case ie.Float32:n=t.visitFloat32||t.visitFloat;break;case ie.Float64:n=t.visitFloat64||t.visitFloat;break;case ie.Utf8:n=t.visitUtf8;break;case ie.Binary:n=t.visitBinary;break;case ie.FixedSizeBinary:n=t.visitFixedSizeBinary;break;case ie.Date:n=t.visitDate;break;case ie.DateDay:n=t.visitDateDay||t.visitDate;break;case ie.DateMillisecond:n=t.visitDateMillisecond||t.visitDate;break;case ie.Timestamp:n=t.visitTimestamp;break;case ie.TimestampSecond:n=t.visitTimestampSecond||t.visitTimestamp;break;case ie.TimestampMillisecond:n=t.visitTimestampMillisecond||t.visitTimestamp;break;case ie.TimestampMicrosecond:n=t.visitTimestampMicrosecond||t.visitTimestamp;break;case ie.TimestampNanosecond:n=t.visitTimestampNanosecond||t.visitTimestamp;break;case ie.Time:n=t.visitTime;break;case ie.TimeSecond:n=t.visitTimeSecond||t.visitTime;break;case ie.TimeMillisecond:n=t.visitTimeMillisecond||t.visitTime;break;case ie.TimeMicrosecond:n=t.visitTimeMicrosecond||t.visitTime;break;case ie.TimeNanosecond:n=t.visitTimeNanosecond||t.visitTime;break;case ie.Decimal:n=t.visitDecimal;break;case ie.List:n=t.visitList;break;case ie.Struct:n=t.visitStruct;break;case ie.Union:n=t.visitUnion;break;case ie.DenseUnion:n=t.visitDenseUnion||t.visitUnion;break;case ie.SparseUnion:n=t.visitSparseUnion||t.visitUnion;break;case ie.Dictionary:n=t.visitDictionary;break;case ie.Interval:n=t.visitInterval;break;case ie.IntervalDayTime:n=t.visitIntervalDayTime||t.visitInterval;break;case ie.IntervalYearMonth:n=t.visitIntervalYearMonth||t.visitInterval;break;case ie.FixedSizeList:n=t.visitFixedSizeList;break;case ie.Map:n=t.visitMap;break}if(typeof n=="function")return n;if(!i)return()=>null;throw new Error(`Unrecognized type '${ie[e]}'`)}function iD(t){switch(t.typeId){case ie.Null:return ie.Null;case ie.Int:{const{bitWidth:e,isSigned:i}=t;switch(e){case 8:return i?ie.Int8:ie.Uint8;case 16:return i?ie.Int16:ie.Uint16;case 32:return i?ie.Int32:ie.Uint32;case 64:return i?ie.Int64:ie.Uint64}return ie.Int}case ie.Float:switch(t.precision){case Wi.HALF:return ie.Float16;case Wi.SINGLE:return ie.Float32;case Wi.DOUBLE:return ie.Float64}return ie.Float;case ie.Binary:return ie.Binary;case ie.Utf8:return ie.Utf8;case ie.Bool:return ie.Bool;case ie.Decimal:return ie.Decimal;case ie.Time:switch(t.unit){case lt.SECOND:return ie.TimeSecond;case lt.MILLISECOND:return ie.TimeMillisecond;case lt.MICROSECOND:return ie.TimeMicrosecond;case lt.NANOSECOND:return ie.TimeNanosecond}return ie.Time;case ie.Timestamp:switch(t.unit){case lt.SECOND:return ie.TimestampSecond;case lt.MILLISECOND:return ie.TimestampMillisecond;case lt.MICROSECOND:return ie.TimestampMicrosecond;case lt.NANOSECOND:return ie.TimestampNanosecond}return ie.Timestamp;case ie.Date:switch(t.unit){case Ss.DAY:return ie.DateDay;case Ss.MILLISECOND:return ie.DateMillisecond}return ie.Date;case ie.Interval:switch(t.unit){case xr.DAY_TIME:return ie.IntervalDayTime;case xr.YEAR_MONTH:return ie.IntervalYearMonth}return ie.Interval;case ie.Map:return ie.Map;case ie.List:return ie.List;case ie.Struct:return ie.Struct;case ie.Union:switch(t.mode){case an.Dense:return ie.DenseUnion;case an.Sparse:return ie.SparseUnion}return ie.Union;case ie.FixedSizeBinary:return ie.FixedSizeBinary;case ie.FixedSizeList:return ie.FixedSizeList;case ie.Dictionary:return ie.Dictionary}throw new Error(`Unrecognized type '${ie[t.typeId]}'`)}St.prototype.visitInt8=null;St.prototype.visitInt16=null;St.prototype.visitInt32=null;St.prototype.visitInt64=null;St.prototype.visitUint8=null;St.prototype.visitUint16=null;St.prototype.visitUint32=null;St.prototype.visitUint64=null;St.prototype.visitFloat16=null;St.prototype.visitFloat32=null;St.prototype.visitFloat64=null;St.prototype.visitDateDay=null;St.prototype.visitDateMillisecond=null;St.prototype.visitTimestampSecond=null;St.prototype.visitTimestampMillisecond=null;St.prototype.visitTimestampMicrosecond=null;St.prototype.visitTimestampNanosecond=null;St.prototype.visitTimeSecond=null;St.prototype.visitTimeMillisecond=null;St.prototype.visitTimeMicrosecond=null;St.prototype.visitTimeNanosecond=null;St.prototype.visitDenseUnion=null;St.prototype.visitSparseUnion=null;St.prototype.visitIntervalDayTime=null;St.prototype.visitIntervalYearMonth=null;const pz=new Float64Array(1),Vu=new Uint32Array(pz.buffer);function x2(t){const e=(t&31744)>>10,i=(t&1023)/1024,n=Math.pow(-1,(t&32768)>>15);switch(e){case 31:return n*(i?Number.NaN:1/0);case 0:return n*(i?6103515625e-14*i:0)}return n*Math.pow(2,e-15)*(1+i)}function B2(t){if(t!==t)return 32256;pz[0]=t;const e=(Vu[1]&2147483648)>>16&65535;let i=Vu[1]&2146435072,n=0;return i>=1089470464?Vu[0]>0?i=31744:(i=(i&2080374784)>>16,n=(Vu[1]&1048575)>>10):i<=1056964608?(n=1048576+(Vu[1]&1048575),n=1048576+(n<<(i>>20)-998)>>21,i=0):(i=i-1056964608>>10,n=(Vu[1]&1048575)+512>>10),e|i|n&65535}const Yee=Object.freeze(Object.defineProperty({__proto__:null,float64ToUint16:B2,uint16ToFloat64:x2},Symbol.toStringTag,{value:"Module"}));let ct=class extends St{};function mt(t){return(e,i,n)=>{if(e.setValid(i,n!=null))return t(e,i,n)}}const Xee=(t,e,i)=>{t[e]=Math.trunc(i/864e5)},I2=(t,e,i)=>{t[e]=Math.trunc(i%4294967296),t[e+1]=Math.trunc(i/4294967296)},Kee=(t,e,i)=>{t[e]=Math.trunc(i*1e3%4294967296),t[e+1]=Math.trunc(i*1e3/4294967296)},Jee=(t,e,i)=>{t[e]=Math.trunc(i*1e6%4294967296),t[e+1]=Math.trunc(i*1e6/4294967296)},_z=(t,e,i,n)=>{if(i+1<e.length){const{[i]:s,[i+1]:a}=e;t.set(n.subarray(0,a-s),s)}},Qee=({offset:t,values:e},i,n)=>{const s=t+i;n?e[s>>3]|=1<<s%8:e[s>>3]&=~(1<<s%8)},$l=({values:t},e,i)=>{t[e]=i},k2=({values:t},e,i)=>{t[e]=i},yz=({values:t},e,i)=>{t[e]=B2(i)},Zee=(t,e,i)=>{switch(t.type.precision){case Wi.HALF:return yz(t,e,i);case Wi.SINGLE:case Wi.DOUBLE:return k2(t,e,i)}},F2=({values:t},e,i)=>{Xee(t,e,i.valueOf())},M2=({values:t},e,i)=>{I2(t,e*2,i.valueOf())},gz=({stride:t,values:e},i,n)=>{e.set(n.subarray(0,t),t*i)},ete=({values:t,valueOffsets:e},i,n)=>_z(t,e,i,n),tte=({values:t,valueOffsets:e},i,n)=>{_z(t,e,i,Zv(n))},mz=(t,e,i)=>{t.type.unit===Ss.DAY?F2(t,e,i):M2(t,e,i)},A2=({values:t},e,i)=>I2(t,e*2,i/1e3),O2=({values:t},e,i)=>I2(t,e*2,i),N2=({values:t},e,i)=>Kee(t,e*2,i),C2=({values:t},e,i)=>Jee(t,e*2,i),wz=(t,e,i)=>{switch(t.type.unit){case lt.SECOND:return A2(t,e,i);case lt.MILLISECOND:return O2(t,e,i);case lt.MICROSECOND:return N2(t,e,i);case lt.NANOSECOND:return C2(t,e,i)}},R2=({values:t},e,i)=>{t[e]=i},L2=({values:t},e,i)=>{t[e]=i},D2=({values:t},e,i)=>{t[e]=i},P2=({values:t},e,i)=>{t[e]=i},bz=(t,e,i)=>{switch(t.type.unit){case lt.SECOND:return R2(t,e,i);case lt.MILLISECOND:return L2(t,e,i);case lt.MICROSECOND:return D2(t,e,i);case lt.NANOSECOND:return P2(t,e,i)}},Tz=({values:t,stride:e},i,n)=>{t.set(n.subarray(0,e),e*i)},ite=(t,e,i)=>{const n=t.children[0],s=t.valueOffsets,a=Br.getVisitFn(n);if(Array.isArray(i))for(let c=-1,d=s[e],f=s[e+1];d<f;)a(n,d++,i[++c]);else for(let c=-1,d=s[e],f=s[e+1];d<f;)a(n,d++,i.get(++c))},nte=(t,e,i)=>{const n=t.children[0],{valueOffsets:s}=t,a=Br.getVisitFn(n);let{[e]:c,[e+1]:d}=s;const f=i instanceof Map?i.entries():Object.entries(i);for(const u of f)if(a(n,c,u),++c>=d)break},ste=(t,e)=>(i,n,s,a)=>n&&i(n,t,e[a]),rte=(t,e)=>(i,n,s,a)=>n&&i(n,t,e.get(a)),ate=(t,e)=>(i,n,s,a)=>n&&i(n,t,e.get(s.name)),ote=(t,e)=>(i,n,s,a)=>n&&i(n,t,e[s.name]),lte=(t,e,i)=>{const n=t.type.children.map(a=>Br.getVisitFn(a.type)),s=i instanceof Map?ate(e,i):i instanceof Ke?rte(e,i):Array.isArray(i)?ste(e,i):ote(e,i);t.type.children.forEach((a,c)=>s(n[c],t.children[c],a,c))},cte=(t,e,i)=>{t.type.mode===an.Dense?vz(t,e,i):Ez(t,e,i)},vz=(t,e,i)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],s=t.children[n];Br.visit(s,t.valueOffsets[e],i)},Ez=(t,e,i)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],s=t.children[n];Br.visit(s,e,i)},dte=(t,e,i)=>{var n;(n=t.dictionary)===null||n===void 0||n.set(t.values[e],i)},Sz=(t,e,i)=>{t.type.unit===xr.DAY_TIME?$2(t,e,i):U2(t,e,i)},$2=({values:t},e,i)=>{t.set(i.subarray(0,2),2*e)},U2=({values:t},e,i)=>{t[e]=i[0]*12+i[1]%12},fte=(t,e,i)=>{const{stride:n}=t,s=t.children[0],a=Br.getVisitFn(s);if(Array.isArray(i))for(let c=-1,d=e*n;++c<n;)a(s,d+c,i[c]);else for(let c=-1,d=e*n;++c<n;)a(s,d+c,i.get(c))};ct.prototype.visitBool=mt(Qee);ct.prototype.visitInt=mt($l);ct.prototype.visitInt8=mt($l);ct.prototype.visitInt16=mt($l);ct.prototype.visitInt32=mt($l);ct.prototype.visitInt64=mt($l);ct.prototype.visitUint8=mt($l);ct.prototype.visitUint16=mt($l);ct.prototype.visitUint32=mt($l);ct.prototype.visitUint64=mt($l);ct.prototype.visitFloat=mt(Zee);ct.prototype.visitFloat16=mt(yz);ct.prototype.visitFloat32=mt(k2);ct.prototype.visitFloat64=mt(k2);ct.prototype.visitUtf8=mt(tte);ct.prototype.visitBinary=mt(ete);ct.prototype.visitFixedSizeBinary=mt(gz);ct.prototype.visitDate=mt(mz);ct.prototype.visitDateDay=mt(F2);ct.prototype.visitDateMillisecond=mt(M2);ct.prototype.visitTimestamp=mt(wz);ct.prototype.visitTimestampSecond=mt(A2);ct.prototype.visitTimestampMillisecond=mt(O2);ct.prototype.visitTimestampMicrosecond=mt(N2);ct.prototype.visitTimestampNanosecond=mt(C2);ct.prototype.visitTime=mt(bz);ct.prototype.visitTimeSecond=mt(R2);ct.prototype.visitTimeMillisecond=mt(L2);ct.prototype.visitTimeMicrosecond=mt(D2);ct.prototype.visitTimeNanosecond=mt(P2);ct.prototype.visitDecimal=mt(Tz);ct.prototype.visitList=mt(ite);ct.prototype.visitStruct=mt(lte);ct.prototype.visitUnion=mt(cte);ct.prototype.visitDenseUnion=mt(vz);ct.prototype.visitSparseUnion=mt(Ez);ct.prototype.visitDictionary=mt(dte);ct.prototype.visitInterval=mt(Sz);ct.prototype.visitIntervalDayTime=mt($2);ct.prototype.visitIntervalYearMonth=mt(U2);ct.prototype.visitFixedSizeList=mt(fte);ct.prototype.visitMap=mt(nte);const Br=new ct,Gr=Symbol.for("parent"),Gh=Symbol.for("rowIndex");let sE=class{constructor(e,i){return this[Gr]=e,this[Gh]=i,new Proxy(this,new hte)}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[Gh],i=this[Gr],n=i.type.children,s={};for(let a=-1,c=n.length;++a<c;)s[n[a].name]=xs.visit(i.children[a],e);return s}toString(){return`{${[...this].map(([e,i])=>`${Uf(e)}: ${Uf(i)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new ute(this[Gr],this[Gh])}},ute=class{constructor(e,i){this.childIndex=0,this.children=e.children,this.rowIndex=i,this.childFields=e.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const e=this.childIndex;return e<this.numChildren?(this.childIndex=e+1,{done:!1,value:[this.childFields[e].name,xs.visit(this.children[e],this.rowIndex)]}):{done:!0,value:null}}};Object.defineProperties(sE.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Gr]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Gh]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});let hte=class{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[Gr].type.children.map(i=>i.name)}has(e,i){return e[Gr].type.children.findIndex(n=>n.name===i)!==-1}getOwnPropertyDescriptor(e,i){if(e[Gr].type.children.findIndex(n=>n.name===i)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,i){if(Reflect.has(e,i))return e[i];const n=e[Gr].type.children.findIndex(s=>s.name===i);if(n!==-1){const s=xs.visit(e[Gr].children[n],e[Gh]);return Reflect.set(e,i,s),s}}set(e,i,n){const s=e[Gr].type.children.findIndex(a=>a.name===i);return s!==-1?(Br.visit(e[Gr].children[s],e[Gh],n),Reflect.set(e,i,n)):Reflect.has(e,i)||typeof i=="symbol"?Reflect.set(e,i,n):!1}},et=class extends St{};function dt(t){return(e,i)=>e.getValid(i)?t(e,i):null}const pte=(t,e)=>864e5*t[e],z2=(t,e)=>4294967296*t[e+1]+(t[e]>>>0),_te=(t,e)=>4294967296*(t[e+1]/1e3)+(t[e]>>>0)/1e3,yte=(t,e)=>4294967296*(t[e+1]/1e6)+(t[e]>>>0)/1e6,xz=t=>new Date(t),gte=(t,e)=>xz(pte(t,e)),mte=(t,e)=>xz(z2(t,e)),wte=(t,e)=>null,Bz=(t,e,i)=>{if(i+1>=e.length)return null;const n=e[i],s=e[i+1];return t.subarray(n,s)},bte=({offset:t,values:e},i)=>{const n=t+i;return(e[n>>3]&1<<n%8)!==0},Iz=({values:t},e)=>gte(t,e),kz=({values:t},e)=>mte(t,e*2),cd=({stride:t,values:e},i)=>e[t*i],Tte=({stride:t,values:e},i)=>x2(e[t*i]),Fz=({values:t},e)=>t[e],vte=({stride:t,values:e},i)=>e.subarray(t*i,t*(i+1)),Ete=({values:t,valueOffsets:e},i)=>Bz(t,e,i),Ste=({values:t,valueOffsets:e},i)=>{const n=Bz(t,e,i);return n!==null?TI(n):null},xte=({values:t},e)=>t[e],Bte=({type:t,values:e},i)=>t.precision!==Wi.HALF?e[i]:x2(e[i]),Ite=(t,e)=>t.type.unit===Ss.DAY?Iz(t,e):kz(t,e),Mz=({values:t},e)=>1e3*z2(t,e*2),Az=({values:t},e)=>z2(t,e*2),Oz=({values:t},e)=>_te(t,e*2),Nz=({values:t},e)=>yte(t,e*2),kte=(t,e)=>{switch(t.type.unit){case lt.SECOND:return Mz(t,e);case lt.MILLISECOND:return Az(t,e);case lt.MICROSECOND:return Oz(t,e);case lt.NANOSECOND:return Nz(t,e)}},Cz=({values:t},e)=>t[e],Rz=({values:t},e)=>t[e],Lz=({values:t},e)=>t[e],Dz=({values:t},e)=>t[e],Fte=(t,e)=>{switch(t.type.unit){case lt.SECOND:return Cz(t,e);case lt.MILLISECOND:return Rz(t,e);case lt.MICROSECOND:return Lz(t,e);case lt.NANOSECOND:return Dz(t,e)}},Mte=({values:t,stride:e},i)=>g2.decimal(t.subarray(e*i,e*(i+1))),Ate=(t,e)=>{const{valueOffsets:i,stride:n,children:s}=t,{[e*n]:a,[e*n+1]:c}=i,f=s[0].slice(a,c-a);return new Ke([f])},Ote=(t,e)=>{const{valueOffsets:i,children:n}=t,{[e]:s,[e+1]:a}=i,c=n[0];return new ym(c.slice(s,a-s))},Nte=(t,e)=>new sE(t,e),Cte=(t,e)=>t.type.mode===an.Dense?Pz(t,e):$z(t,e),Pz=(t,e)=>{const i=t.type.typeIdToChildIndex[t.typeIds[e]],n=t.children[i];return xs.visit(n,t.valueOffsets[e])},$z=(t,e)=>{const i=t.type.typeIdToChildIndex[t.typeIds[e]],n=t.children[i];return xs.visit(n,e)},Rte=(t,e)=>{var i;return(i=t.dictionary)===null||i===void 0?void 0:i.get(t.values[e])},Lte=(t,e)=>t.type.unit===xr.DAY_TIME?Uz(t,e):zz(t,e),Uz=({values:t},e)=>t.subarray(2*e,2*(e+1)),zz=({values:t},e)=>{const i=t[e],n=new Int32Array(2);return n[0]=Math.trunc(i/12),n[1]=Math.trunc(i%12),n},Dte=(t,e)=>{const{stride:i,children:n}=t,a=n[0].slice(e*i,i);return new Ke([a])};et.prototype.visitNull=dt(wte);et.prototype.visitBool=dt(bte);et.prototype.visitInt=dt(xte);et.prototype.visitInt8=dt(cd);et.prototype.visitInt16=dt(cd);et.prototype.visitInt32=dt(cd);et.prototype.visitInt64=dt(Fz);et.prototype.visitUint8=dt(cd);et.prototype.visitUint16=dt(cd);et.prototype.visitUint32=dt(cd);et.prototype.visitUint64=dt(Fz);et.prototype.visitFloat=dt(Bte);et.prototype.visitFloat16=dt(Tte);et.prototype.visitFloat32=dt(cd);et.prototype.visitFloat64=dt(cd);et.prototype.visitUtf8=dt(Ste);et.prototype.visitBinary=dt(Ete);et.prototype.visitFixedSizeBinary=dt(vte);et.prototype.visitDate=dt(Ite);et.prototype.visitDateDay=dt(Iz);et.prototype.visitDateMillisecond=dt(kz);et.prototype.visitTimestamp=dt(kte);et.prototype.visitTimestampSecond=dt(Mz);et.prototype.visitTimestampMillisecond=dt(Az);et.prototype.visitTimestampMicrosecond=dt(Oz);et.prototype.visitTimestampNanosecond=dt(Nz);et.prototype.visitTime=dt(Fte);et.prototype.visitTimeSecond=dt(Cz);et.prototype.visitTimeMillisecond=dt(Rz);et.prototype.visitTimeMicrosecond=dt(Lz);et.prototype.visitTimeNanosecond=dt(Dz);et.prototype.visitDecimal=dt(Mte);et.prototype.visitList=dt(Ate);et.prototype.visitStruct=dt(Nte);et.prototype.visitUnion=dt(Cte);et.prototype.visitDenseUnion=dt(Pz);et.prototype.visitSparseUnion=dt($z);et.prototype.visitDictionary=dt(Rte);et.prototype.visitInterval=dt(Lte);et.prototype.visitIntervalDayTime=dt(Uz);et.prototype.visitIntervalYearMonth=dt(zz);et.prototype.visitFixedSizeList=dt(Dte);et.prototype.visitMap=dt(Ote);const xs=new et,Xr=Symbol.for("keys"),Vh=Symbol.for("vals");let ym=class{constructor(e){return this[Xr]=new Ke([e.children[0]]).memoize(),this[Vh]=e.children[1],new Proxy(this,new $te)}[Symbol.iterator](){return new Pte(this[Xr],this[Vh])}get size(){return this[Xr].length}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[Xr],i=this[Vh],n={};for(let s=-1,a=e.length;++s<a;)n[e.get(s)]=xs.visit(i,s);return n}toString(){return`{${[...this].map(([e,i])=>`${Uf(e)}: ${Uf(i)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}},Pte=class{constructor(e,i){this.keys=e,this.vals=i,this.keyIndex=0,this.numKeys=e.length}[Symbol.iterator](){return this}next(){const e=this.keyIndex;return e===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(e),xs.visit(this.vals,e)]})}},$te=class{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[Xr].toArray().map(String)}has(e,i){return e[Xr].includes(i)}getOwnPropertyDescriptor(e,i){if(e[Xr].indexOf(i)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,i){if(Reflect.has(e,i))return e[i];const n=e[Xr].indexOf(i);if(n!==-1){const s=xs.visit(Reflect.get(e,Vh),n);return Reflect.set(e,i,s),s}}set(e,i,n){const s=e[Xr].indexOf(i);return s!==-1?(Br.visit(Reflect.get(e,Vh),s,n),Reflect.set(e,i,n)):Reflect.has(e,i)?Reflect.set(e,i,n):!1}};Object.defineProperties(ym.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Xr]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Vh]:{writable:!0,enumerable:!1,configurable:!1,value:null}});function Ute(t,e,i){const n=t.length,s=e>-1?e:n+e%n;return i?i(t,s):s}let nD;function j2(t,e,i,n){const{length:s=0}=t;let a=typeof e!="number"?0:e,c=typeof i!="number"?s:i;return a<0&&(a=(a%s+s)%s),c<0&&(c=(c%s+s)%s),c<a&&(nD=a,a=c,c=nD),c>s&&(c=s),n?n(t,a,c):[a,c]}const sD=t=>t!==t;function Eu(t){if(typeof t!=="object"||t===null)return sD(t)?sD:i=>i===t;if(t instanceof Date){const i=t.valueOf();return n=>n instanceof Date?n.valueOf()===i:!1}return ArrayBuffer.isView(t)?i=>i?z8(t,i):!1:t instanceof Map?jte(t):Array.isArray(t)?zte(t):t instanceof Ke?qte(t):Gte(t,!0)}function zte(t){const e=[];for(let i=-1,n=t.length;++i<n;)e[i]=Eu(t[i]);return rE(e)}function jte(t){let e=-1;const i=[];for(const n of t.values())i[++e]=Eu(n);return rE(i)}function qte(t){const e=[];for(let i=-1,n=t.length;++i<n;)e[i]=Eu(t.get(i));return rE(e)}function Gte(t,e=!1){const i=Object.keys(t);if(!e&&i.length===0)return()=>!1;const n=[];for(let s=-1,a=i.length;++s<a;)n[s]=Eu(t[i[s]]);return rE(n,i)}function rE(t,e){return i=>{if(!i||typeof i!="object")return!1;switch(i.constructor){case Array:return Vte(t,i);case Map:return rD(t,i,i.keys());case ym:case sE:case Object:case void 0:return rD(t,i,e||Object.keys(i))}return i instanceof Ke?Wte(t,i):!1}}function Vte(t,e){const i=t.length;if(e.length!==i)return!1;for(let n=-1;++n<i;)if(!t[n](e[n]))return!1;return!0}function Wte(t,e){const i=t.length;if(e.length!==i)return!1;for(let n=-1;++n<i;)if(!t[n](e.get(n)))return!1;return!0}function rD(t,e,i){const n=i[Symbol.iterator](),s=e instanceof Map?e.keys():Object.keys(e)[Symbol.iterator](),a=e instanceof Map?e.values():Object.values(e)[Symbol.iterator]();let c=0;const d=t.length;let f=a.next(),u=n.next(),o=s.next();for(;c<d&&!u.done&&!o.done&&!f.done&&!(u.value!==o.value||!t[c](f.value));++c,u=n.next(),o=s.next(),f=a.next());return c===d&&u.done&&o.done&&f.done?!0:(n.return&&n.return(),s.return&&s.return(),a.return&&a.return(),!1)}const Hte=Object.freeze(Object.defineProperty({__proto__:null,clampIndex:Ute,clampRange:j2,createElementComparator:Eu},Symbol.toStringTag,{value:"Module"}));function aE(t,e,i,n){return(i&1<<n)!==0}function q2(t,e,i,n){return(i&1<<n)>>n}function Yte(t,e,i){return i?!!(t[e>>3]|=1<<e%8)||!0:!(t[e>>3]&=~(1<<e%8))&&!1}function oE(t,e,i){const n=i.byteLength+7&-8;if(t>0||i.byteLength<n){const s=new Uint8Array(n);return s.set(t%8===0?i.subarray(t>>3):vg(new yp(i,t,e,null,aE)).subarray(0,n)),s}return i}function vg(t){const e=[];let i=0,n=0,s=0;for(const c of t)c&&(s|=1<<n),++n===8&&(e[i++]=s,s=n=0);(i===0||n>0)&&(e[i++]=s);const a=new Uint8Array(e.length+7&-8);return a.set(e),a}let yp=class{constructor(e,i,n,s,a){this.bytes=e,this.length=n,this.context=s,this.get=a,this.bit=i%8,this.byteIndex=i>>3,this.byte=e[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}};function IT(t,e,i){if(i-e<=0)return 0;if(i-e<8){let a=0;for(const c of new yp(t,e,i-e,t,q2))a+=c;return a}const n=i>>3<<3,s=e+(e%8===0?0:8-e%8);return IT(t,e,s)+IT(t,n,i)+jz(t,s>>3,n-s>>3)}function jz(t,e,i){let n=0,s=Math.trunc(e);const a=new DataView(t.buffer,t.byteOffset,t.byteLength),c=i===void 0?t.byteLength:s+i;for(;c-s>=4;)n+=R0(a.getUint32(s)),s+=4;for(;c-s>=2;)n+=R0(a.getUint16(s)),s+=2;for(;c-s>=1;)n+=R0(a.getUint8(s)),s+=1;return n}function R0(t){let e=Math.trunc(t);return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),(e+(e>>>4)&252645135)*16843009>>>24}const Xte=Object.freeze(Object.defineProperty({__proto__:null,BitIterator:yp,getBit:q2,getBool:aE,packBools:vg,popcnt_array:jz,popcnt_bit_range:IT,popcnt_uint32:R0,setBool:Yte,truncateBitmap:oE},Symbol.toStringTag,{value:"Module"})),Kte=-1;let ri=class xI{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let e=0;const{valueOffsets:i,values:n,nullBitmap:s,typeIds:a}=this;return i&&(e+=i.byteLength),n&&(e+=n.byteLength),s&&(e+=s.byteLength),a&&(e+=a.byteLength),this.children.reduce((c,d)=>c+d.byteLength,e)}get nullCount(){let e=this._nullCount,i;return e<=Kte&&(i=this.nullBitmap)&&(this._nullCount=e=this.length-IT(i,this.offset,this.offset+this.length)),e}constructor(e,i,n,s,a,c=[],d){this.type=e,this.children=c,this.dictionary=d,this.offset=Math.floor(Math.max(i||0,0)),this.length=Math.floor(Math.max(n||0,0)),this._nullCount=Math.floor(Math.max(s||0,-1));let f;a instanceof xI?(this.stride=a.stride,this.values=a.values,this.typeIds=a.typeIds,this.nullBitmap=a.nullBitmap,this.valueOffsets=a.valueOffsets):(this.stride=Ua(e),a&&((f=a[0])&&(this.valueOffsets=f),(f=a[1])&&(this.values=f),(f=a[2])&&(this.nullBitmap=f),(f=a[3])&&(this.typeIds=f))),this.nullable=this._nullCount!==0&&this.nullBitmap&&this.nullBitmap.byteLength>0}getValid(e){if(this.nullable&&this.nullCount>0){const i=this.offset+e;return(this.nullBitmap[i>>3]&1<<i%8)!==0}return!0}setValid(e,i){if(!this.nullable)return i;if(!this.nullBitmap||this.nullBitmap.byteLength<=e>>3){const{nullBitmap:f}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:f,_nullCount:0})}const{nullBitmap:n,offset:s}=this,a=s+e>>3,c=(s+e)%8,d=n[a]>>c&1;return i?d===0&&(n[a]|=1<<c,this._nullCount=this.nullCount+1):d===1&&(n[a]&=~(1<<c),this._nullCount=this.nullCount-1),i}clone(e=this.type,i=this.offset,n=this.length,s=this._nullCount,a=this,c=this.children){return new xI(e,i,n,s,a,c,this.dictionary)}slice(e,i){const{stride:n,typeId:s,children:a}=this,c=+(this._nullCount===0)-1,d=s===16?n:1,f=this._sliceBuffers(e,i,n,s);return this.clone(this.type,this.offset+e,i,c,f,a.length===0||this.valueOffsets?a:this._sliceChildren(a,d*e,d*i))}_changeLengthAndBackfillNullBitmap(e){if(this.typeId===ie.Null)return this.clone(this.type,0,e,0);const{length:i,nullCount:n}=this,s=new Uint8Array((e+63&-64)>>3).fill(255,0,i>>3);s[i>>3]=(1<<i-(i&-8))-1,n>0&&s.set(oE(this.offset,i,this.nullBitmap),0);const a=this.buffers;return a[qr.VALIDITY]=s,this.clone(this.type,0,e,n+(e-i),a)}_sliceBuffers(e,i,n,s){let a;const{buffers:c}=this;return(a=c[qr.TYPE])&&(c[qr.TYPE]=a.subarray(e,e+i)),(a=c[qr.OFFSET])&&(c[qr.OFFSET]=a.subarray(e,e+i+1))||(a=c[qr.DATA])&&(c[qr.DATA]=s===6?a:a.subarray(n*e,n*(e+i))),c}_sliceChildren(e,i,n){return e.map(s=>s.slice(i,n))}};ri.prototype.children=Object.freeze([]);let Jte=class L0 extends St{visit(e){return this.getVisitFn(e.type).call(this,e)}visitNull(e){const{["type"]:i,["offset"]:n=0,["length"]:s=0}=e;return new ri(i,n,s,0)}visitBool(e){const{["type"]:i,["offset"]:n=0}=e,s=kt(e.nullBitmap),a=Bt(i.ArrayType,e.data),{["length"]:c=a.length>>3,["nullCount"]:d=e.nullBitmap?-1:0}=e;return new ri(i,n,c,d,[void 0,a,s])}visitInt(e){const{["type"]:i,["offset"]:n=0}=e,s=kt(e.nullBitmap),a=Bt(i.ArrayType,e.data),{["length"]:c=a.length,["nullCount"]:d=e.nullBitmap?-1:0}=e;return new ri(i,n,c,d,[void 0,a,s])}visitFloat(e){const{["type"]:i,["offset"]:n=0}=e,s=kt(e.nullBitmap),a=Bt(i.ArrayType,e.data),{["length"]:c=a.length,["nullCount"]:d=e.nullBitmap?-1:0}=e;return new ri(i,n,c,d,[void 0,a,s])}visitUtf8(e){const{["type"]:i,["offset"]:n=0}=e,s=kt(e.data),a=kt(e.nullBitmap),c=ch(e.valueOffsets),{["length"]:d=c.length-1,["nullCount"]:f=e.nullBitmap?-1:0}=e;return new ri(i,n,d,f,[c,s,a])}visitBinary(e){const{["type"]:i,["offset"]:n=0}=e,s=kt(e.data),a=kt(e.nullBitmap),c=ch(e.valueOffsets),{["length"]:d=c.length-1,["nullCount"]:f=e.nullBitmap?-1:0}=e;return new ri(i,n,d,f,[c,s,a])}visitFixedSizeBinary(e){const{["type"]:i,["offset"]:n=0}=e,s=kt(e.nullBitmap),a=Bt(i.ArrayType,e.data),{["length"]:c=a.length/Ua(i),["nullCount"]:d=e.nullBitmap?-1:0}=e;return new ri(i,n,c,d,[void 0,a,s])}visitDate(e){const{["type"]:i,["offset"]:n=0}=e,s=kt(e.nullBitmap),a=Bt(i.ArrayType,e.data),{["length"]:c=a.length/Ua(i),["nullCount"]:d=e.nullBitmap?-1:0}=e;return new ri(i,n,c,d,[void 0,a,s])}visitTimestamp(e){const{["type"]:i,["offset"]:n=0}=e,s=kt(e.nullBitmap),a=Bt(i.ArrayType,e.data),{["length"]:c=a.length/Ua(i),["nullCount"]:d=e.nullBitmap?-1:0}=e;return new ri(i,n,c,d,[void 0,a,s])}visitTime(e){const{["type"]:i,["offset"]:n=0}=e,s=kt(e.nullBitmap),a=Bt(i.ArrayType,e.data),{["length"]:c=a.length/Ua(i),["nullCount"]:d=e.nullBitmap?-1:0}=e;return new ri(i,n,c,d,[void 0,a,s])}visitDecimal(e){const{["type"]:i,["offset"]:n=0}=e,s=kt(e.nullBitmap),a=Bt(i.ArrayType,e.data),{["length"]:c=a.length/Ua(i),["nullCount"]:d=e.nullBitmap?-1:0}=e;return new ri(i,n,c,d,[void 0,a,s])}visitList(e){const{["type"]:i,["offset"]:n=0,["child"]:s}=e,a=kt(e.nullBitmap),c=ch(e.valueOffsets),{["length"]:d=c.length-1,["nullCount"]:f=e.nullBitmap?-1:0}=e;return new ri(i,n,d,f,[c,void 0,a],[s])}visitStruct(e){const{["type"]:i,["offset"]:n=0,["children"]:s=[]}=e,a=kt(e.nullBitmap),{length:c=s.reduce((f,{length:u})=>Math.max(f,u),0),nullCount:d=e.nullBitmap?-1:0}=e;return new ri(i,n,c,d,[void 0,void 0,a],s)}visitUnion(e){const{["type"]:i,["offset"]:n=0,["children"]:s=[]}=e,a=kt(e.nullBitmap),c=Bt(i.ArrayType,e.typeIds),{["length"]:d=c.length,["nullCount"]:f=e.nullBitmap?-1:0}=e;if(Xe.isSparseUnion(i))return new ri(i,n,d,f,[void 0,void 0,a,c],s);const u=ch(e.valueOffsets);return new ri(i,n,d,f,[u,void 0,a,c],s)}visitDictionary(e){const{["type"]:i,["offset"]:n=0}=e,s=kt(e.nullBitmap),a=Bt(i.indices.ArrayType,e.data),{["dictionary"]:c=new Ke([new L0().visit({type:i.dictionary})])}=e,{["length"]:d=a.length,["nullCount"]:f=e.nullBitmap?-1:0}=e;return new ri(i,n,d,f,[void 0,a,s],[],c)}visitInterval(e){const{["type"]:i,["offset"]:n=0}=e,s=kt(e.nullBitmap),a=Bt(i.ArrayType,e.data),{["length"]:c=a.length/Ua(i),["nullCount"]:d=e.nullBitmap?-1:0}=e;return new ri(i,n,c,d,[void 0,a,s])}visitFixedSizeList(e){const{["type"]:i,["offset"]:n=0,["child"]:s=new L0().visit({type:i.valueType})}=e,a=kt(e.nullBitmap),{["length"]:c=s.length/Ua(i),["nullCount"]:d=e.nullBitmap?-1:0}=e;return new ri(i,n,c,d,[void 0,void 0,a],[s])}visitMap(e){const{["type"]:i,["offset"]:n=0,["child"]:s=new L0().visit({type:i.childType})}=e,a=kt(e.nullBitmap),c=ch(e.valueOffsets),{["length"]:d=c.length-1,["nullCount"]:f=e.nullBitmap?-1:0}=e;return new ri(i,n,d,f,[c,void 0,a],[s])}};function Ye(t){return new Jte().visit(t)}let aD=class{constructor(e=0,i){this.numChunks=e,this.getChunkIterator=i,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const e=this.chunkIterator.next();if(!e.done)return e;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}};function qz(t){return t.reduce((e,i)=>e+i.nullCount,0)}function Gz(t){return t.reduce((e,i,n)=>(e[n+1]=e[n]+i.length,e),new Uint32Array(t.length+1))}function Vz(t,e,i,n){const s=[];for(let a=-1,c=t.length;++a<c;){const d=t[a],f=e[a],{length:u}=d;if(f>=n)break;if(i>=f+u)continue;if(f>=i&&f+u<=n){s.push(d);continue}const o=Math.max(0,i-f),g=Math.min(n-f,u);s.push(d.slice(o,g-o))}return s.length===0&&s.push(t[0].slice(0,0)),s}function G2(t,e,i,n){let s=0,a=0,c=e.length-1;do{if(s>=c-1)return i<e[c]?n(t,s,i-e[s]):null;a=s+Math.trunc((c-s)*.5),i<e[a]?c=a:s=a}while(s<c)}function V2(t,e){return t.getValid(e)}function Wh(t){function e(i,n,s){return t(i[n],s)}return function(i){const n=this.data;return G2(n,this._offsets,i,e)}}function Wz(t){let e;function i(n,s,a){return t(n[s],a,e)}return function(n,s){const a=this.data;e=s;const c=G2(a,this._offsets,n,i);return e=void 0,c}}function Hz(t){let e;function i(n,s,a){let c=a,d=0,f=0;for(let u=s-1,o=n.length;++u<o;){const g=n[u];if(~(d=t(g,e,c)))return f+d;c=0,f+=g.length}return-1}return function(n,s){e=n;const a=this.data,c=typeof s!="number"?i(a,0,0):G2(a,this._offsets,s,i);return e=void 0,c}}let tt=class extends St{};function Qte(t,e){return e===null&&t.length>0?0:-1}function Zte(t,e){const{nullBitmap:i}=t;if(!i||t.nullCount<=0)return-1;let n=0;for(const s of new yp(i,t.offset+(e||0),t.length,i,aE)){if(!s)return n;++n}return-1}function Tt(t,e,i){if(e===void 0)return-1;if(e===null)return Zte(t,i);const n=xs.getVisitFn(t),s=Eu(e);for(let a=(i||0)-1,c=t.length;++a<c;)if(s(n(t,a)))return a;return-1}function Yz(t,e,i){const n=xs.getVisitFn(t),s=Eu(e);for(let a=(i||0)-1,c=t.length;++a<c;)if(s(n(t,a)))return a;return-1}tt.prototype.visitNull=Qte;tt.prototype.visitBool=Tt;tt.prototype.visitInt=Tt;tt.prototype.visitInt8=Tt;tt.prototype.visitInt16=Tt;tt.prototype.visitInt32=Tt;tt.prototype.visitInt64=Tt;tt.prototype.visitUint8=Tt;tt.prototype.visitUint16=Tt;tt.prototype.visitUint32=Tt;tt.prototype.visitUint64=Tt;tt.prototype.visitFloat=Tt;tt.prototype.visitFloat16=Tt;tt.prototype.visitFloat32=Tt;tt.prototype.visitFloat64=Tt;tt.prototype.visitUtf8=Tt;tt.prototype.visitBinary=Tt;tt.prototype.visitFixedSizeBinary=Tt;tt.prototype.visitDate=Tt;tt.prototype.visitDateDay=Tt;tt.prototype.visitDateMillisecond=Tt;tt.prototype.visitTimestamp=Tt;tt.prototype.visitTimestampSecond=Tt;tt.prototype.visitTimestampMillisecond=Tt;tt.prototype.visitTimestampMicrosecond=Tt;tt.prototype.visitTimestampNanosecond=Tt;tt.prototype.visitTime=Tt;tt.prototype.visitTimeSecond=Tt;tt.prototype.visitTimeMillisecond=Tt;tt.prototype.visitTimeMicrosecond=Tt;tt.prototype.visitTimeNanosecond=Tt;tt.prototype.visitDecimal=Tt;tt.prototype.visitList=Tt;tt.prototype.visitStruct=Tt;tt.prototype.visitUnion=Tt;tt.prototype.visitDenseUnion=Yz;tt.prototype.visitSparseUnion=Yz;tt.prototype.visitDictionary=Tt;tt.prototype.visitInterval=Tt;tt.prototype.visitIntervalDayTime=Tt;tt.prototype.visitIntervalYearMonth=Tt;tt.prototype.visitFixedSizeList=Tt;tt.prototype.visitMap=Tt;const kT=new tt;let it=class extends St{};function ft(t){const{type:e}=t;if(t.nullCount===0&&t.stride===1&&(e.typeId===ie.Timestamp||e instanceof Cn&&e.bitWidth!==64||e instanceof _o&&e.bitWidth!==64||e instanceof Fl&&e.precision!==Wi.HALF))return new aD(t.data.length,n=>{const s=t.data[n];return s.values.subarray(0,s.length)[Symbol.iterator]()});let i=0;return new aD(t.data.length,n=>{const a=t.data[n].length,c=t.slice(i,i+a);return i+=a,new eie(c)})}let eie=class{constructor(e){this.vector=e,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}};it.prototype.visitNull=ft;it.prototype.visitBool=ft;it.prototype.visitInt=ft;it.prototype.visitInt8=ft;it.prototype.visitInt16=ft;it.prototype.visitInt32=ft;it.prototype.visitInt64=ft;it.prototype.visitUint8=ft;it.prototype.visitUint16=ft;it.prototype.visitUint32=ft;it.prototype.visitUint64=ft;it.prototype.visitFloat=ft;it.prototype.visitFloat16=ft;it.prototype.visitFloat32=ft;it.prototype.visitFloat64=ft;it.prototype.visitUtf8=ft;it.prototype.visitBinary=ft;it.prototype.visitFixedSizeBinary=ft;it.prototype.visitDate=ft;it.prototype.visitDateDay=ft;it.prototype.visitDateMillisecond=ft;it.prototype.visitTimestamp=ft;it.prototype.visitTimestampSecond=ft;it.prototype.visitTimestampMillisecond=ft;it.prototype.visitTimestampMicrosecond=ft;it.prototype.visitTimestampNanosecond=ft;it.prototype.visitTime=ft;it.prototype.visitTimeSecond=ft;it.prototype.visitTimeMillisecond=ft;it.prototype.visitTimeMicrosecond=ft;it.prototype.visitTimeNanosecond=ft;it.prototype.visitDecimal=ft;it.prototype.visitList=ft;it.prototype.visitStruct=ft;it.prototype.visitUnion=ft;it.prototype.visitDenseUnion=ft;it.prototype.visitSparseUnion=ft;it.prototype.visitDictionary=ft;it.prototype.visitInterval=ft;it.prototype.visitIntervalDayTime=ft;it.prototype.visitIntervalYearMonth=ft;it.prototype.visitFixedSizeList=ft;it.prototype.visitMap=ft;const W2=new it,tie=(t,e)=>t+e;let dd=class extends St{visitNull(e,i){return 0}visitInt(e,i){return e.type.bitWidth/8}visitFloat(e,i){return e.type.ArrayType.BYTES_PER_ELEMENT}visitBool(e,i){return 1/8}visitDecimal(e,i){return e.type.bitWidth/8}visitDate(e,i){return(e.type.unit+1)*4}visitTime(e,i){return e.type.bitWidth/8}visitTimestamp(e,i){return e.type.unit===lt.SECOND?4:8}visitInterval(e,i){return(e.type.unit+1)*4}visitStruct(e,i){return e.children.reduce((n,s)=>n+yo.visit(s,i),0)}visitFixedSizeBinary(e,i){return e.type.byteWidth}visitMap(e,i){return 8+e.children.reduce((n,s)=>n+yo.visit(s,i),0)}visitDictionary(e,i){var n;return e.type.indices.bitWidth/8+(((n=e.dictionary)===null||n===void 0?void 0:n.getByteLength(e.values[i]))||0)}};const iie=({valueOffsets:t},e)=>8+(t[e+1]-t[e]),nie=({valueOffsets:t},e)=>8+(t[e+1]-t[e]),sie=({valueOffsets:t,stride:e,children:i},n)=>{const s=i[0],{[n*e]:a}=t,{[n*e+1]:c}=t,d=yo.getVisitFn(s.type),f=s.slice(a,c-a);let u=8;for(let o=-1,g=c-a;++o<g;)u+=d(f,o);return u},rie=({stride:t,children:e},i)=>{const n=e[0],s=n.slice(i*t,t),a=yo.getVisitFn(n.type);let c=0;for(let d=-1,f=s.length;++d<f;)c+=a(s,d);return c},aie=(t,e)=>t.type.mode===an.Dense?Xz(t,e):Kz(t,e),Xz=({type:t,children:e,typeIds:i,valueOffsets:n},s)=>{const a=t.typeIdToChildIndex[i[s]];return 8+yo.visit(e[a],n[s])},Kz=({children:t},e)=>4+yo.visitMany(t,t.map(()=>e)).reduce(tie,0);dd.prototype.visitUtf8=iie;dd.prototype.visitBinary=nie;dd.prototype.visitList=sie;dd.prototype.visitFixedSizeList=rie;dd.prototype.visitUnion=aie;dd.prototype.visitDenseUnion=Xz;dd.prototype.visitSparseUnion=Kz;const yo=new dd;var Jz;const Qz={},Zz={};let Ke=class Wd{constructor(e){var i,n,s;const a=e[0]instanceof Wd?e.flatMap(d=>d.data):e;if(a.length===0||a.some(d=>!(d instanceof ri)))throw new TypeError("Vector constructor expects an Array of Data instances.");const c=(i=a[0])===null||i===void 0?void 0:i.type;switch(a.length){case 0:this._offsets=[0];break;case 1:{const{get:d,set:f,indexOf:u,byteLength:o}=Qz[c.typeId],g=a[0];this.isValid=w=>V2(g,w),this.get=w=>d(g,w),this.set=(w,m)=>f(g,w,m),this.indexOf=w=>u(g,w),this.getByteLength=w=>o(g,w),this._offsets=[0,g.length];break}default:Object.setPrototypeOf(this,Zz[c.typeId]),this._offsets=Gz(a);break}this.data=a,this.type=c,this.stride=Ua(c),this.numChildren=(s=(n=c.children)===null||n===void 0?void 0:n.length)!==null&&s!==void 0?s:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return this._byteLength===-1&&(this._byteLength=this.data.reduce((e,i)=>e+i.byteLength,0)),this._byteLength}get nullCount(){return this._nullCount===-1&&(this._nullCount=qz(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${ie[this.type.typeId]}Vector`}isValid(e){return!1}get(e){return null}set(e,i){}indexOf(e,i){return-1}includes(e,i){return this.indexOf(e,i)>0}getByteLength(e){return 0}[Symbol.iterator](){return W2.visit(this)}concat(...e){return new Wd(this.data.concat(e.flatMap(i=>i.data).flat(Number.POSITIVE_INFINITY)))}slice(e,i){return new Wd(j2(this,e,i,({data:n,_offsets:s},a,c)=>Vz(n,s,a,c)))}toJSON(){return[...this]}toArray(){const{type:e,data:i,length:n,stride:s,ArrayType:a}=this;switch(e.typeId){case ie.Int:case ie.Float:case ie.Decimal:case ie.Time:case ie.Timestamp:switch(i.length){case 0:return new a;case 1:return i[0].values.subarray(0,n*s);default:return i.reduce((c,{values:d,length:f})=>(c.array.set(d.subarray(0,f*s),c.offset),c.offset+=f*s,c),{array:new a(n*s),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(e){var i;return this.getChildAt((i=this.type.children)===null||i===void 0?void 0:i.findIndex(n=>n.name===e))}getChildAt(e){return e>-1&&e<this.numChildren?new Wd(this.data.map(({children:i})=>i[e])):null}get isMemoized(){return Xe.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(Xe.isDictionary(this.type)){const e=new oD(this.data[0].dictionary),i=this.data.map(n=>{const s=n.clone();return s.dictionary=e,s});return new Wd(i)}return new oD(this)}unmemoize(){if(Xe.isDictionary(this.type)&&this.isMemoized){const e=this.data[0].dictionary.unmemoize(),i=this.data.map(n=>{const s=n.clone();return s.dictionary=e,s});return new Wd(i)}return this}};Jz=Symbol.toStringTag;Ke[Jz]=(t=>{t.type=Xe.prototype,t.data=[],t.length=0,t.stride=1,t.numChildren=0,t._nullCount=-1,t._byteLength=-1,t._offsets=new Uint32Array([0]),t[Symbol.isConcatSpreadable]=!0;const e=Object.keys(ie).map(i=>ie[i]).filter(i=>typeof i=="number"&&i!==ie.NONE);for(const i of e){const n=xs.getVisitFnByTypeId(i),s=Br.getVisitFnByTypeId(i),a=kT.getVisitFnByTypeId(i),c=yo.getVisitFnByTypeId(i);Qz[i]={get:n,set:s,indexOf:a,byteLength:c},Zz[i]=Object.create(t,{isValid:{value:Wh(V2)},get:{value:Wh(xs.getVisitFnByTypeId(i))},set:{value:Wz(Br.getVisitFnByTypeId(i))},indexOf:{value:Hz(kT.getVisitFnByTypeId(i))},getByteLength:{value:Wh(yo.getVisitFnByTypeId(i))}})}return"Vector"})(Ke.prototype);let oD=class ej extends Ke{constructor(e){super(e.data);const i=this.get,n=this.set,s=this.slice,a=new Array(this.length);Object.defineProperty(this,"get",{value(c){const d=a[c];if(d!==void 0)return d;const f=i.call(this,c);return a[c]=f,f}}),Object.defineProperty(this,"set",{value(c,d){n.call(this,c,d),a[c]=d}}),Object.defineProperty(this,"slice",{value:(c,d)=>new ej(s.call(this,c,d))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new Ke(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}};function lE(t){if(t){if(t instanceof ri)return new Ke([t]);if(t instanceof Ke)return new Ke(t.data);if(t.type instanceof Xe)return new Ke([Ye(t)]);if(Array.isArray(t))return new Ke(t.flatMap(e=>oie(e)));if(ArrayBuffer.isView(t)){t instanceof DataView&&(t=new Uint8Array(t.buffer));const e={offset:0,length:t.length,nullCount:0,data:t};if(t instanceof Int8Array)return new Ke([Ye(Object.assign(Object.assign({},e),{type:new m2}))]);if(t instanceof Int16Array)return new Ke([Ye(Object.assign(Object.assign({},e),{type:new w2}))]);if(t instanceof Int32Array)return new Ke([Ye(Object.assign(Object.assign({},e),{type:new $c}))]);if(t instanceof Dl)return new Ke([Ye(Object.assign(Object.assign({},e),{type:new iE}))]);if(t instanceof Uint8Array||t instanceof Uint8ClampedArray)return new Ke([Ye(Object.assign(Object.assign({},e),{type:new b2}))]);if(t instanceof Uint16Array)return new Ke([Ye(Object.assign(Object.assign({},e),{type:new T2}))]);if(t instanceof Uint32Array)return new Ke([Ye(Object.assign(Object.assign({},e),{type:new v2}))]);if(t instanceof Pl)return new Ke([Ye(Object.assign(Object.assign({},e),{type:new E2}))]);if(t instanceof Float32Array)return new Ke([Ye(Object.assign(Object.assign({},e),{type:new S2}))]);if(t instanceof Float64Array)return new Ke([Ye(Object.assign(Object.assign({},e),{type:new nE}))]);throw new Error("Unrecognized input")}}throw new Error("Unrecognized input")}function oie(t){return t instanceof ri?[t]:t instanceof Ke?t.data:lE(t).data}function lie(t){if(!t||t.length<=0)return function(s){return!0};let e="";const i=t.filter(n=>n===n);return i.length>0&&(e=`
    switch (x) {${i.map(n=>`
        case ${cie(n)}:`).join("")}
            return false;
    }`),t.length!==i.length&&(e=`if (x !== x) return false;
${e}`),new Function("x",`${e}
return true;`)}function cie(t){return typeof t!="bigint"?Uf(t):`${Uf(t)}n`}const kx=(t,e)=>(Math.ceil(t)*e+63&-64||64)/e,die=(t,e=0)=>t.length>=e?t.subarray(0,e):yg(new t.constructor(e),t,0);class cE{constructor(e,i=1){this.buffer=e,this.stride=i,this.BYTES_PER_ELEMENT=e.BYTES_PER_ELEMENT,this.ArrayType=e.constructor,this._resize(this.length=Math.ceil(e.length/i))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(e,i){return this}append(e){return this.set(this.length,e)}reserve(e){if(e>0){this.length+=e;const i=this.stride,n=this.length*i,s=this.buffer.length;n>=s&&this._resize(s===0?kx(n*1,this.BYTES_PER_ELEMENT):kx(n*2,this.BYTES_PER_ELEMENT))}return this}flush(e=this.length){e=kx(e*this.stride,this.BYTES_PER_ELEMENT);const i=die(this.buffer,e);return this.clear(),i}clear(){return this.length=0,this._resize(0),this}_resize(e){return this.buffer=yg(new this.ArrayType(e),this.buffer)}}cE.prototype.offset=0;class gm extends cE{last(){return this.get(this.length-1)}get(e){return this.buffer[e]}set(e,i){return this.reserve(e-this.length+1),this.buffer[e*this.stride]=i,this}}class tj extends gm{constructor(e=new Uint8Array(0)){super(e,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(e){return this.buffer[e>>3]>>e%8&1}set(e,i){const{buffer:n}=this.reserve(e-this.length+1),s=e>>3,a=e%8,c=n[s]>>a&1;return i?c===0&&(n[s]|=1<<a,++this.numValid):c===1&&(n[s]&=~(1<<a),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class ij extends gm{constructor(e=new Int32Array(1)){super(e,1)}append(e){return this.set(this.length-1,e)}set(e,i){const n=this.length-1,s=this.reserve(e-n+1).buffer;return n<e++&&s.fill(s[n],n,e),s[e]=s[e-1]+i,this}flush(e=this.length-1){return e>this.length&&this.set(e-1,0),super.flush(e+1)}}let Dn=class{static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e){throw new Error('"throughDOM" not available in this environment')}constructor({type:e,nullValues:i}){this.length=0,this.finished=!1,this.type=e,this.children=[],this.nullValues=i,this.stride=Ua(e),this._nulls=new tj,i&&i.length>0&&(this._isValid=lie(i))}toVector(){return new Ke([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let e=0;const{_offsets:i,_values:n,_nulls:s,_typeIds:a,children:c}=this;return i&&(e+=i.byteLength),n&&(e+=n.byteLength),s&&(e+=s.byteLength),a&&(e+=a.byteLength),c.reduce((d,f)=>d+f.byteLength,e)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let e=0;return this._offsets&&(e+=this._offsets.reservedByteLength),this._values&&(e+=this._values.reservedByteLength),this._nulls&&(e+=this._nulls.reservedByteLength),this._typeIds&&(e+=this._typeIds.reservedByteLength),this.children.reduce((i,n)=>i+n.reservedByteLength,e)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(e){return this.set(this.length,e)}isValid(e){return this._isValid(e)}set(e,i){return this.setValid(e,this.isValid(i))&&this.setValue(e,i),this}setValue(e,i){this._setValue(this,e,i)}setValid(e,i){return this.length=this._nulls.set(e,+i).length,i}addChild(e,i=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(e){return this.children[e]||null}flush(){let e,i,n,s;const{type:a,length:c,nullCount:d,_typeIds:f,_offsets:u,_values:o,_nulls:g}=this;(i=f==null?void 0:f.flush(c))?s=u==null?void 0:u.flush(c):(s=u==null?void 0:u.flush(c))?e=o==null?void 0:o.flush(u.last()):e=o==null?void 0:o.flush(c),d>0&&(n=g==null?void 0:g.flush(c));const w=this.children.map(m=>m.flush());return this.clear(),Ye({type:a,length:c,nullCount:d,children:w,child:w[0],data:e,typeIds:i,nullBitmap:n,valueOffsets:s})}finish(){this.finished=!0;for(const e of this.children)e.finish();return this}clear(){var e,i,n,s;this.length=0,(e=this._nulls)===null||e===void 0||e.clear(),(i=this._values)===null||i===void 0||i.clear(),(n=this._offsets)===null||n===void 0||n.clear(),(s=this._typeIds)===null||s===void 0||s.clear();for(const a of this.children)a.clear();return this}};Dn.prototype.length=1;Dn.prototype.stride=1;Dn.prototype.children=null;Dn.prototype.finished=!1;Dn.prototype.nullValues=null;Dn.prototype._isValid=()=>!0;class fd extends Dn{constructor(e){super(e),this._values=new gm(new this.ArrayType(0),this.stride)}setValue(e,i){const n=this._values;return n.reserve(e-n.length+1),super.setValue(e,i)}}class dE extends Dn{constructor(e){super(e),this._pendingLength=0,this._offsets=new ij}setValue(e,i){const n=this._pending||(this._pending=new Map),s=n.get(e);s&&(this._pendingLength-=s.length),this._pendingLength+=i instanceof ym?i[Xr].length:i.length,n.set(e,i)}setValid(e,i){return super.setValid(e,i)?!0:((this._pending||(this._pending=new Map)).set(e,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const e=this._pending,i=this._pendingLength;return this._pendingLength=0,this._pending=void 0,e&&e.size>0&&this._flushPending(e,i),this}}let BI=class{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(e,i,n,s){return e.prep(8,24),e.writeInt64(BigInt(s??0)),e.pad(4),e.writeInt32(n),e.writeInt64(BigInt(i??0)),e.offset()}};const Fx=2,Va=4,dl=4,li=4,dc=new Int32Array(2),lD=new Float32Array(dc.buffer),cD=new Float64Array(dc.buffer),Ub=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var II;(function(t){t[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING"})(II||(II={}));let gp=class nj{constructor(e){this.bytes_=e,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(e){return new nj(new Uint8Array(e))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(e){this.position_=e}capacity(){return this.bytes_.length}readInt8(e){return this.readUint8(e)<<24>>24}readUint8(e){return this.bytes_[e]}readInt16(e){return this.readUint16(e)<<16>>16}readUint16(e){return this.bytes_[e]|this.bytes_[e+1]<<8}readInt32(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24}readUint32(e){return this.readInt32(e)>>>0}readInt64(e){return BigInt.asIntN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readUint64(e){return BigInt.asUintN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readFloat32(e){return dc[0]=this.readInt32(e),lD[0]}readFloat64(e){return dc[Ub?0:1]=this.readInt32(e),dc[Ub?1:0]=this.readInt32(e+4),cD[0]}writeInt8(e,i){this.bytes_[e]=i}writeUint8(e,i){this.bytes_[e]=i}writeInt16(e,i){this.bytes_[e]=i,this.bytes_[e+1]=i>>8}writeUint16(e,i){this.bytes_[e]=i,this.bytes_[e+1]=i>>8}writeInt32(e,i){this.bytes_[e]=i,this.bytes_[e+1]=i>>8,this.bytes_[e+2]=i>>16,this.bytes_[e+3]=i>>24}writeUint32(e,i){this.bytes_[e]=i,this.bytes_[e+1]=i>>8,this.bytes_[e+2]=i>>16,this.bytes_[e+3]=i>>24}writeInt64(e,i){this.writeInt32(e,Number(BigInt.asIntN(32,i))),this.writeInt32(e+4,Number(BigInt.asIntN(32,i>>BigInt(32))))}writeUint64(e,i){this.writeUint32(e,Number(BigInt.asUintN(32,i))),this.writeUint32(e+4,Number(BigInt.asUintN(32,i>>BigInt(32))))}writeFloat32(e,i){lD[0]=i,this.writeInt32(e,dc[0])}writeFloat64(e,i){cD[0]=i,this.writeInt32(e,dc[Ub?0:1]),this.writeInt32(e+4,dc[Ub?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Va+dl)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let e="";for(let i=0;i<dl;i++)e+=String.fromCharCode(this.readInt8(this.position_+Va+i));return e}__offset(e,i){const n=e-this.readInt32(e);return i<this.readInt16(n)?this.readInt16(n+i):0}__union(e,i){return e.bb_pos=i+this.readInt32(i),e.bb=this,e}__string(e,i){e+=this.readInt32(e);const n=this.readInt32(e);e+=Va;const s=this.bytes_.subarray(e,e+n);return i===II.UTF8_BYTES?s:this.text_decoder_.decode(s)}__union_with_string(e,i){return typeof e=="string"?this.__string(i):this.__union(e,i)}__indirect(e){return e+this.readInt32(e)}__vector(e){return e+this.readInt32(e)+Va}__vector_len(e){return this.readInt32(e+this.readInt32(e))}__has_identifier(e){if(e.length!=dl)throw new Error("FlatBuffers: file identifier must be length "+dl);for(let i=0;i<dl;i++)if(e.charCodeAt(i)!=this.readInt8(this.position()+Va+i))return!1;return!0}createScalarList(e,i){const n=[];for(let s=0;s<i;++s){const a=e(s);a!==null&&n.push(a)}return n}createObjList(e,i){const n=[];for(let s=0;s<i;++s){const a=e(s);a!==null&&n.push(a.unpack())}return n}},sj=class rj{constructor(e){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let i;e?i=e:i=1024,this.bb=gp.allocate(i),this.space=i}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(e){this.force_defaults=e}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(e,i){e>this.minalign&&(this.minalign=e);const n=~(this.bb.capacity()-this.space+i)+1&e-1;for(;this.space<n+e+i;){const s=this.bb.capacity();this.bb=rj.growByteBuffer(this.bb),this.space+=this.bb.capacity()-s}this.pad(n)}pad(e){for(let i=0;i<e;i++)this.bb.writeInt8(--this.space,0)}writeInt8(e){this.bb.writeInt8(this.space-=1,e)}writeInt16(e){this.bb.writeInt16(this.space-=2,e)}writeInt32(e){this.bb.writeInt32(this.space-=4,e)}writeInt64(e){this.bb.writeInt64(this.space-=8,e)}writeFloat32(e){this.bb.writeFloat32(this.space-=4,e)}writeFloat64(e){this.bb.writeFloat64(this.space-=8,e)}addInt8(e){this.prep(1,0),this.writeInt8(e)}addInt16(e){this.prep(2,0),this.writeInt16(e)}addInt32(e){this.prep(4,0),this.writeInt32(e)}addInt64(e){this.prep(8,0),this.writeInt64(e)}addFloat32(e){this.prep(4,0),this.writeFloat32(e)}addFloat64(e){this.prep(8,0),this.writeFloat64(e)}addFieldInt8(e,i,n){(this.force_defaults||i!=n)&&(this.addInt8(i),this.slot(e))}addFieldInt16(e,i,n){(this.force_defaults||i!=n)&&(this.addInt16(i),this.slot(e))}addFieldInt32(e,i,n){(this.force_defaults||i!=n)&&(this.addInt32(i),this.slot(e))}addFieldInt64(e,i,n){(this.force_defaults||i!==n)&&(this.addInt64(i),this.slot(e))}addFieldFloat32(e,i,n){(this.force_defaults||i!=n)&&(this.addFloat32(i),this.slot(e))}addFieldFloat64(e,i,n){(this.force_defaults||i!=n)&&(this.addFloat64(i),this.slot(e))}addFieldOffset(e,i,n){(this.force_defaults||i!=n)&&(this.addOffset(i),this.slot(e))}addFieldStruct(e,i,n){i!=n&&(this.nested(i),this.slot(e))}nested(e){if(e!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(e){this.vtable!==null&&(this.vtable[e]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(e){const i=e.capacity();if(i&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const n=i<<1,s=gp.allocate(n);return s.setPosition(n-i),s.bytes().set(e.bytes(),n-i),s}addOffset(e){this.prep(Va,0),this.writeInt32(this.offset()-e+Va)}startObject(e){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=e;for(let i=0;i<e;i++)this.vtable[i]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const e=this.offset();let i=this.vtable_in_use-1;for(;i>=0&&this.vtable[i]==0;i--);const n=i+1;for(;i>=0;i--)this.addInt16(this.vtable[i]!=0?e-this.vtable[i]:0);const s=2;this.addInt16(e-this.object_start);const a=(n+s)*Fx;this.addInt16(a);let c=0;const d=this.space;e:for(i=0;i<this.vtables.length;i++){const f=this.bb.capacity()-this.vtables[i];if(a==this.bb.readInt16(f)){for(let u=Fx;u<a;u+=Fx)if(this.bb.readInt16(d+u)!=this.bb.readInt16(f+u))continue e;c=this.vtables[i];break}}return c?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,c-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e}finish(e,i,n){const s=n?li:0;if(i){const a=i;if(this.prep(this.minalign,Va+dl+s),a.length!=dl)throw new Error("FlatBuffers: file identifier must be length "+dl);for(let c=dl-1;c>=0;c--)this.writeInt8(a.charCodeAt(c))}this.prep(this.minalign,Va+s),this.addOffset(e),s&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(e,i){this.finish(e,i,!0)}requiredField(e,i){const n=this.bb.capacity()-e,s=n-this.bb.readInt32(n);if(!(i<this.bb.readInt16(s)&&this.bb.readInt16(s+i)!=0))throw new Error("FlatBuffers: field "+i+" must be set")}startVector(e,i,n){this.notNested(),this.vector_num_elems=i,this.prep(Va,e*i),this.prep(n,e*i)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(e){if(!e)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(e))return this.string_maps.get(e);const i=this.createString(e);return this.string_maps.set(e,i),i}createString(e){if(e==null)return 0;let i;e instanceof Uint8Array?i=e:i=this.text_encoder.encode(e),this.addInt8(0),this.startVector(1,i.length,1),this.bb.setPosition(this.space-=i.length);for(let n=0,s=this.space,a=this.bb.bytes();n<i.length;n++)a[s++]=i[n];return this.endVector()}createObjectOffset(e){return e===null?0:typeof e=="string"?this.createString(e):e.pack(this)}createObjectOffsetList(e){const i=[];for(let n=0;n<e.length;++n){const s=e[n];if(s!==null)i.push(this.createObjectOffset(s));else throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return i}createStructOffsetList(e,i){return i(this,e.length),this.createObjectOffsetList(e.slice().reverse()),this.endVector()}},yr=class Hd{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsKeyValue(e,i){return(i||new Hd).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsKeyValue(e,i){return e.setPosition(e.position()+li),(i||new Hd).__init(e.readInt32(e.position())+e.position(),e)}key(e){const i=this.bb.__offset(this.bb_pos,4);return i?this.bb.__string(this.bb_pos+i,e):null}value(e){const i=this.bb.__offset(this.bb_pos,6);return i?this.bb.__string(this.bb_pos+i,e):null}static startKeyValue(e){e.startObject(2)}static addKey(e,i){e.addFieldOffset(0,i,0)}static addValue(e,i){e.addFieldOffset(1,i,0)}static endKeyValue(e){return e.endObject()}static createKeyValue(e,i,n){return Hd.startKeyValue(e),Hd.addKey(e,i),Hd.addValue(e,n),Hd.endKeyValue(e)}};var mp;(function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"})(mp||(mp={}));var wp;(function(t){t[t.Little=0]="Little",t[t.Big=1]="Big"})(wp||(wp={}));var FT;(function(t){t[t.DenseArray=0]="DenseArray"})(FT||(FT={}));let Fh=class Yd{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsInt(e,i){return(i||new Yd).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInt(e,i){return e.setPosition(e.position()+li),(i||new Yd).__init(e.readInt32(e.position())+e.position(),e)}bitWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}isSigned(){const e=this.bb.__offset(this.bb_pos,6);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startInt(e){e.startObject(2)}static addBitWidth(e,i){e.addFieldInt32(0,i,0)}static addIsSigned(e,i){e.addFieldInt8(1,+i,0)}static endInt(e){return e.endObject()}static createInt(e,i,n){return Yd.startInt(e),Yd.addBitWidth(e,i),Yd.addIsSigned(e,n),Yd.endInt(e)}},fh=class kI{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsDictionaryEncoding(e,i){return(i||new kI).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryEncoding(e,i){return e.setPosition(e.position()+li),(i||new kI).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}indexType(e){const i=this.bb.__offset(this.bb_pos,6);return i?(e||new Fh).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}isOrdered(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}dictionaryKind(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt16(this.bb_pos+e):FT.DenseArray}static startDictionaryEncoding(e){e.startObject(4)}static addId(e,i){e.addFieldInt64(0,i,BigInt("0"))}static addIndexType(e,i){e.addFieldOffset(1,i,0)}static addIsOrdered(e,i){e.addFieldInt8(2,+i,0)}static addDictionaryKind(e,i){e.addFieldInt16(3,i,FT.DenseArray)}static endDictionaryEncoding(e){return e.endObject()}},dD=class _y{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsBinary(e,i){return(i||new _y).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBinary(e,i){return e.setPosition(e.position()+li),(i||new _y).__init(e.readInt32(e.position())+e.position(),e)}static startBinary(e){e.startObject(0)}static endBinary(e){return e.endObject()}static createBinary(e){return _y.startBinary(e),_y.endBinary(e)}},fD=class yy{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsBool(e,i){return(i||new yy).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBool(e,i){return e.setPosition(e.position()+li),(i||new yy).__init(e.readInt32(e.position())+e.position(),e)}static startBool(e){e.startObject(0)}static endBool(e){return e.endObject()}static createBool(e){return yy.startBool(e),yy.endBool(e)}};var MT;(function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"})(MT||(MT={}));let D0=class uh{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsDate(e,i){return(i||new uh).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDate(e,i){return e.setPosition(e.position()+li),(i||new uh).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):MT.MILLISECOND}static startDate(e){e.startObject(1)}static addUnit(e,i){e.addFieldInt16(0,i,MT.MILLISECOND)}static endDate(e){return e.endObject()}static createDate(e,i){return uh.startDate(e),uh.addUnit(e,i),uh.endDate(e)}},hh=class ac{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsDecimal(e,i){return(i||new ac).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDecimal(e,i){return e.setPosition(e.position()+li),(i||new ac).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}scale(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0}bitWidth(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):128}static startDecimal(e){e.startObject(3)}static addPrecision(e,i){e.addFieldInt32(0,i,0)}static addScale(e,i){e.addFieldInt32(1,i,0)}static addBitWidth(e,i){e.addFieldInt32(2,i,128)}static endDecimal(e){return e.endObject()}static createDecimal(e,i,n,s){return ac.startDecimal(e),ac.addPrecision(e,i),ac.addScale(e,n),ac.addBitWidth(e,s),ac.endDecimal(e)}};var bp;(function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"})(bp||(bp={}));let P0=class ph{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsFixedSizeBinary(e,i){return(i||new ph).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeBinary(e,i){return e.setPosition(e.position()+li),(i||new ph).__init(e.readInt32(e.position())+e.position(),e)}byteWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeBinary(e){e.startObject(1)}static addByteWidth(e,i){e.addFieldInt32(0,i,0)}static endFixedSizeBinary(e){return e.endObject()}static createFixedSizeBinary(e,i){return ph.startFixedSizeBinary(e),ph.addByteWidth(e,i),ph.endFixedSizeBinary(e)}},$0=class _h{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsFixedSizeList(e,i){return(i||new _h).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeList(e,i){return e.setPosition(e.position()+li),(i||new _h).__init(e.readInt32(e.position())+e.position(),e)}listSize(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeList(e){e.startObject(1)}static addListSize(e,i){e.addFieldInt32(0,i,0)}static endFixedSizeList(e){return e.endObject()}static createFixedSizeList(e,i){return _h.startFixedSizeList(e),_h.addListSize(e,i),_h.endFixedSizeList(e)}};var AT;(function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"})(AT||(AT={}));let U0=class yh{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsFloatingPoint(e,i){return(i||new yh).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFloatingPoint(e,i){return e.setPosition(e.position()+li),(i||new yh).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):AT.HALF}static startFloatingPoint(e){e.startObject(1)}static addPrecision(e,i){e.addFieldInt16(0,i,AT.HALF)}static endFloatingPoint(e){return e.endObject()}static createFloatingPoint(e,i){return yh.startFloatingPoint(e),yh.addPrecision(e,i),yh.endFloatingPoint(e)}};var OT;(function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(OT||(OT={}));let z0=class gh{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsInterval(e,i){return(i||new gh).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInterval(e,i){return e.setPosition(e.position()+li),(i||new gh).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):OT.YEAR_MONTH}static startInterval(e){e.startObject(1)}static addUnit(e,i){e.addFieldInt16(0,i,OT.YEAR_MONTH)}static endInterval(e){return e.endObject()}static createInterval(e,i){return gh.startInterval(e),gh.addUnit(e,i),gh.endInterval(e)}},uD=class gy{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsList(e,i){return(i||new gy).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsList(e,i){return e.setPosition(e.position()+li),(i||new gy).__init(e.readInt32(e.position())+e.position(),e)}static startList(e){e.startObject(0)}static endList(e){return e.endObject()}static createList(e){return gy.startList(e),gy.endList(e)}},j0=class mh{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsMap(e,i){return(i||new mh).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMap(e,i){return e.setPosition(e.position()+li),(i||new mh).__init(e.readInt32(e.position())+e.position(),e)}keysSorted(){const e=this.bb.__offset(this.bb_pos,4);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startMap(e){e.startObject(1)}static addKeysSorted(e,i){e.addFieldInt8(0,+i,0)}static endMap(e){return e.endObject()}static createMap(e,i){return mh.startMap(e),mh.addKeysSorted(e,i),mh.endMap(e)}},hD=class my{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsNull(e,i){return(i||new my).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsNull(e,i){return e.setPosition(e.position()+li),(i||new my).__init(e.readInt32(e.position())+e.position(),e)}static startNull(e){e.startObject(0)}static endNull(e){return e.endObject()}static createNull(e){return my.startNull(e),my.endNull(e)}},pD=class wy{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsStruct_(e,i){return(i||new wy).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsStruct_(e,i){return e.setPosition(e.position()+li),(i||new wy).__init(e.readInt32(e.position())+e.position(),e)}static startStruct_(e){e.startObject(0)}static endStruct_(e){return e.endObject()}static createStruct_(e){return wy.startStruct_(e),wy.endStruct_(e)}},by=class Xd{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsTime(e,i){return(i||new Xd).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTime(e,i){return e.setPosition(e.position()+li),(i||new Xd).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):bp.MILLISECOND}bitWidth(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):32}static startTime(e){e.startObject(2)}static addUnit(e,i){e.addFieldInt16(0,i,bp.MILLISECOND)}static addBitWidth(e,i){e.addFieldInt32(1,i,32)}static endTime(e){return e.endObject()}static createTime(e,i,n){return Xd.startTime(e),Xd.addUnit(e,i),Xd.addBitWidth(e,n),Xd.endTime(e)}},Ty=class Kd{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsTimestamp(e,i){return(i||new Kd).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTimestamp(e,i){return e.setPosition(e.position()+li),(i||new Kd).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):bp.SECOND}timezone(e){const i=this.bb.__offset(this.bb_pos,6);return i?this.bb.__string(this.bb_pos+i,e):null}static startTimestamp(e){e.startObject(2)}static addUnit(e,i){e.addFieldInt16(0,i,bp.SECOND)}static addTimezone(e,i){e.addFieldOffset(1,i,0)}static endTimestamp(e){return e.endObject()}static createTimestamp(e,i,n){return Kd.startTimestamp(e),Kd.addUnit(e,i),Kd.addTimezone(e,n),Kd.endTimestamp(e)}};var NT;(function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"})(NT||(NT={}));let Jd=class Qd{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsUnion(e,i){return(i||new Qd).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUnion(e,i){return e.setPosition(e.position()+li),(i||new Qd).__init(e.readInt32(e.position())+e.position(),e)}mode(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):NT.Sparse}typeIds(e){const i=this.bb.__offset(this.bb_pos,6);return i?this.bb.readInt32(this.bb.__vector(this.bb_pos+i)+e*4):0}typeIdsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}typeIdsArray(){const e=this.bb.__offset(this.bb_pos,6);return e?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}static startUnion(e){e.startObject(2)}static addMode(e,i){e.addFieldInt16(0,i,NT.Sparse)}static addTypeIds(e,i){e.addFieldOffset(1,i,0)}static createTypeIdsVector(e,i){e.startVector(4,i.length,4);for(let n=i.length-1;n>=0;n--)e.addInt32(i[n]);return e.endVector()}static startTypeIdsVector(e,i){e.startVector(4,i,4)}static endUnion(e){return e.endObject()}static createUnion(e,i,n){return Qd.startUnion(e),Qd.addMode(e,i),Qd.addTypeIds(e,n),Qd.endUnion(e)}},_D=class vy{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsUtf8(e,i){return(i||new vy).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUtf8(e,i){return e.setPosition(e.position()+li),(i||new vy).__init(e.readInt32(e.position())+e.position(),e)}static startUtf8(e){e.startObject(0)}static endUtf8(e){return e.endObject()}static createUtf8(e){return vy.startUtf8(e),vy.endUtf8(e)}};var bt;(function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.FloatingPoint=3]="FloatingPoint",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct_=13]="Struct_",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Duration=18]="Duration",t[t.LargeBinary=19]="LargeBinary",t[t.LargeUtf8=20]="LargeUtf8",t[t.LargeList=21]="LargeList",t[t.RunEndEncoded=22]="RunEndEncoded"})(bt||(bt={}));let ur=class q0{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsField(e,i){return(i||new q0).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsField(e,i){return e.setPosition(e.position()+li),(i||new q0).__init(e.readInt32(e.position())+e.position(),e)}name(e){const i=this.bb.__offset(this.bb_pos,4);return i?this.bb.__string(this.bb_pos+i,e):null}nullable(){const e=this.bb.__offset(this.bb_pos,6);return e?!!this.bb.readInt8(this.bb_pos+e):!1}typeType(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):bt.NONE}type(e){const i=this.bb.__offset(this.bb_pos,10);return i?this.bb.__union(e,this.bb_pos+i):null}dictionary(e){const i=this.bb.__offset(this.bb_pos,12);return i?(e||new fh).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}children(e,i){const n=this.bb.__offset(this.bb_pos,14);return n?(i||new q0).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+e*4),this.bb):null}childrenLength(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,i){const n=this.bb.__offset(this.bb_pos,16);return n?(i||new yr).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__vector_len(this.bb_pos+e):0}static startField(e){e.startObject(7)}static addName(e,i){e.addFieldOffset(0,i,0)}static addNullable(e,i){e.addFieldInt8(1,+i,0)}static addTypeType(e,i){e.addFieldInt8(2,i,bt.NONE)}static addType(e,i){e.addFieldOffset(3,i,0)}static addDictionary(e,i){e.addFieldOffset(4,i,0)}static addChildren(e,i){e.addFieldOffset(5,i,0)}static createChildrenVector(e,i){e.startVector(4,i.length,4);for(let n=i.length-1;n>=0;n--)e.addOffset(i[n]);return e.endVector()}static startChildrenVector(e,i){e.startVector(4,i,4)}static addCustomMetadata(e,i){e.addFieldOffset(6,i,0)}static createCustomMetadataVector(e,i){e.startVector(4,i.length,4);for(let n=i.length-1;n>=0;n--)e.addOffset(i[n]);return e.endVector()}static startCustomMetadataVector(e,i){e.startVector(4,i,4)}static endField(e){return e.endObject()}},La=class Ko{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsSchema(e,i){return(i||new Ko).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSchema(e,i){return e.setPosition(e.position()+li),(i||new Ko).__init(e.readInt32(e.position())+e.position(),e)}endianness(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):wp.Little}fields(e,i){const n=this.bb.__offset(this.bb_pos,6);return n?(i||new ur).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+e*4),this.bb):null}fieldsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,i){const n=this.bb.__offset(this.bb_pos,8);return n?(i||new yr).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}features(e){const i=this.bb.__offset(this.bb_pos,10);return i?this.bb.readInt64(this.bb.__vector(this.bb_pos+i)+e*8):BigInt(0)}featuresLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}static startSchema(e){e.startObject(4)}static addEndianness(e,i){e.addFieldInt16(0,i,wp.Little)}static addFields(e,i){e.addFieldOffset(1,i,0)}static createFieldsVector(e,i){e.startVector(4,i.length,4);for(let n=i.length-1;n>=0;n--)e.addOffset(i[n]);return e.endVector()}static startFieldsVector(e,i){e.startVector(4,i,4)}static addCustomMetadata(e,i){e.addFieldOffset(2,i,0)}static createCustomMetadataVector(e,i){e.startVector(4,i.length,4);for(let n=i.length-1;n>=0;n--)e.addOffset(i[n]);return e.endVector()}static startCustomMetadataVector(e,i){e.startVector(4,i,4)}static addFeatures(e,i){e.addFieldOffset(3,i,0)}static createFeaturesVector(e,i){e.startVector(8,i.length,8);for(let n=i.length-1;n>=0;n--)e.addInt64(i[n]);return e.endVector()}static startFeaturesVector(e,i){e.startVector(8,i,8)}static endSchema(e){return e.endObject()}static finishSchemaBuffer(e,i){e.finish(i)}static finishSizePrefixedSchemaBuffer(e,i){e.finish(i,void 0,!0)}static createSchema(e,i,n,s,a){return Ko.startSchema(e),Ko.addEndianness(e,i),Ko.addFields(e,n),Ko.addCustomMetadata(e,s),Ko.addFeatures(e,a),Ko.endSchema(e)}},Fa=class FI{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsFooter(e,i){return(i||new FI).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFooter(e,i){return e.setPosition(e.position()+li),(i||new FI).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):mp.V1}schema(e){const i=this.bb.__offset(this.bb_pos,6);return i?(e||new La).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}dictionaries(e,i){const n=this.bb.__offset(this.bb_pos,8);return n?(i||new BI).__init(this.bb.__vector(this.bb_pos+n)+e*24,this.bb):null}dictionariesLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}recordBatches(e,i){const n=this.bb.__offset(this.bb_pos,10);return n?(i||new BI).__init(this.bb.__vector(this.bb_pos+n)+e*24,this.bb):null}recordBatchesLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,i){const n=this.bb.__offset(this.bb_pos,12);return n?(i||new yr).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startFooter(e){e.startObject(5)}static addVersion(e,i){e.addFieldInt16(0,i,mp.V1)}static addSchema(e,i){e.addFieldOffset(1,i,0)}static addDictionaries(e,i){e.addFieldOffset(2,i,0)}static startDictionariesVector(e,i){e.startVector(24,i,8)}static addRecordBatches(e,i){e.addFieldOffset(3,i,0)}static startRecordBatchesVector(e,i){e.startVector(24,i,8)}static addCustomMetadata(e,i){e.addFieldOffset(4,i,0)}static createCustomMetadataVector(e,i){e.startVector(4,i.length,4);for(let n=i.length-1;n>=0;n--)e.addOffset(i[n]);return e.endVector()}static startCustomMetadataVector(e,i){e.startVector(4,i,4)}static endFooter(e){return e.endObject()}static finishFooterBuffer(e,i){e.finish(i)}static finishSizePrefixedFooterBuffer(e,i){e.finish(i,void 0,!0)}},yi=class Zd{constructor(e=[],i,n){this.fields=e||[],this.metadata=i||new Map,n||(n=AI(e)),this.dictionaries=n}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(e=>e.name)}toString(){return`Schema<{ ${this.fields.map((e,i)=>`${i}: ${e}`).join(", ")} }>`}select(e){const i=new Set(e),n=this.fields.filter(s=>i.has(s.name));return new Zd(n,this.metadata)}selectAt(e){const i=e.map(n=>this.fields[n]).filter(Boolean);return new Zd(i,this.metadata)}assign(...e){const i=e[0]instanceof Zd?e[0]:Array.isArray(e[0])?new Zd(e[0]):new Zd(e),n=[...this.fields],s=zb(zb(new Map,this.metadata),i.metadata),a=i.fields.filter(d=>{const f=n.findIndex(u=>u.name===d.name);return~f?(n[f]=d.clone({metadata:zb(zb(new Map,n[f].metadata),d.metadata)}))&&!1:!0}),c=AI(a,new Map);return new Zd([...n,...a],s,new Map([...this.dictionaries,...c]))}};yi.prototype.fields=null;yi.prototype.metadata=null;yi.prototype.dictionaries=null;let Jt=class MI{static new(...e){let[i,n,s,a]=e;return e[0]&&typeof e[0]=="object"&&({name:i}=e[0],n===void 0&&(n=e[0].type),s===void 0&&(s=e[0].nullable),a===void 0&&(a=e[0].metadata)),new MI(`${i}`,n,s,a)}constructor(e,i,n=!1,s){this.name=e,this.type=i,this.nullable=n,this.metadata=s||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...e){let[i,n,s,a]=e;return!e[0]||typeof e[0]!="object"?[i=this.name,n=this.type,s=this.nullable,a=this.metadata]=e:{name:i=this.name,type:n=this.type,nullable:s=this.nullable,metadata:a=this.metadata}=e[0],MI.new(i,n,s,a)}};Jt.prototype.type=null;Jt.prototype.name=null;Jt.prototype.nullable=null;Jt.prototype.metadata=null;function zb(t,e){return new Map([...t||new Map,...e||new Map])}function AI(t,e=new Map){for(let i=-1,n=t.length;++i<n;){const a=t[i].type;if(Xe.isDictionary(a)){if(!e.has(a.id))e.set(a.id,a.dictionary);else if(e.get(a.id)!==a.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}a.children&&a.children.length>0&&AI(a.children,e)}return e}var fie=sj,uie=gp;let Eg=class{static decode(e){e=new uie(kt(e));const i=Fa.getRootAsFooter(e),n=yi.decode(i.schema());return new hie(n,i)}static encode(e){const i=new fie,n=yi.encode(i,e.schema);Fa.startRecordBatchesVector(i,e.numRecordBatches);for(const c of[...e.recordBatches()].slice().reverse())zc.encode(i,c);const s=i.endVector();Fa.startDictionariesVector(i,e.numDictionaries);for(const c of[...e.dictionaryBatches()].slice().reverse())zc.encode(i,c);const a=i.endVector();return Fa.startFooter(i),Fa.addSchema(i,n),Fa.addVersion(i,ps.V4),Fa.addRecordBatches(i,s),Fa.addDictionaries(i,a),Fa.finishFooterBuffer(i,Fa.endFooter(i)),i.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(e,i=ps.V4,n,s){this.schema=e,this.version=i,n&&(this._recordBatches=n),s&&(this._dictionaryBatches=s)}*recordBatches(){for(let e,i=-1,n=this.numRecordBatches;++i<n;)(e=this.getRecordBatch(i))&&(yield e)}*dictionaryBatches(){for(let e,i=-1,n=this.numDictionaries;++i<n;)(e=this.getDictionaryBatch(i))&&(yield e)}getRecordBatch(e){return e>=0&&e<this.numRecordBatches&&this._recordBatches[e]||null}getDictionaryBatch(e){return e>=0&&e<this.numDictionaries&&this._dictionaryBatches[e]||null}},hie=class extends Eg{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(e,i){super(e,i.version()),this._footer=i}getRecordBatch(e){if(e>=0&&e<this.numRecordBatches){const i=this._footer.recordBatches(e);if(i)return zc.decode(i)}return null}getDictionaryBatch(e){if(e>=0&&e<this.numDictionaries){const i=this._footer.dictionaries(e);if(i)return zc.decode(i)}return null}},zc=class aj{static decode(e){return new aj(e.metaDataLength(),e.bodyLength(),e.offset())}static encode(e,i){const{metaDataLength:n}=i,s=BigInt(i.offset),a=BigInt(i.bodyLength);return BI.createBlock(e,s,n,a)}constructor(e,i,n){this.metaDataLength=e,this.offset=fa(n),this.bodyLength=fa(i)}};const Si=Object.freeze({done:!0,value:void 0});let yD=class{constructor(e){this._json=e}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}},H2=class{tee(){return this._getDOMStream().tee()}pipe(e,i){return this._getNodeStream().pipe(e,i)}pipeTo(e,i){return this._getDOMStream().pipeTo(e,i)}pipeThrough(e,i){return this._getDOMStream().pipeThrough(e,i)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}},pie=class extends H2{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(e=>this._closedPromiseResolve=e)}get closed(){return this._closedPromise}cancel(e){return ye(this,void 0,void 0,function*(){yield this.return(e)})}write(e){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(e):this.resolvers.shift().resolve({done:!1,value:e}))}abort(e){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:e}:this.resolvers.shift().reject({done:!0,value:e}))}close(){if(this._closedPromiseResolve){const{resolvers:e}=this;for(;e.length>0;)e.shift().resolve(Si);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(e){return Ws.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,e)}toNodeStream(e){return Ws.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,e)}throw(e){return ye(this,void 0,void 0,function*(){return yield this.abort(e),Si})}return(e){return ye(this,void 0,void 0,function*(){return yield this.close(),Si})}read(e){return ye(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return ye(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(...e){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((i,n)=>{this.resolvers.push({resolve:i,reject:n})}):Promise.resolve(Si)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}},Hh=class extends pie{write(e){if((e=kt(e)).byteLength>0)return super.write(e)}toString(e=!1){return e?TI(this.toUint8Array(!0)):this.toUint8Array(!1).then(TI)}toUint8Array(e=!1){return e?da(this._values)[0]:(()=>ye(this,void 0,void 0,function*(){var i,n,s,a;const c=[];let d=0;try{for(var f=!0,u=Qn(this),o;o=yield u.next(),i=o.done,!i;){a=o.value,f=!1;try{const g=a;c.push(g),d+=g.byteLength}finally{f=!0}}}catch(g){n={error:g}}finally{try{!f&&!i&&(s=u.return)&&(yield s.call(u))}finally{if(n)throw n.error}}return da(c,d)[0]}))()}},Sg=class{constructor(e){e&&(this.source=new _ie(Ws.fromIterable(e)))}[Symbol.iterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}},Tp=class oj{constructor(e){e instanceof oj?this.source=e.source:e instanceof Hh?this.source=new Nd(Ws.fromAsyncIterable(e)):P8(e)?this.source=new Nd(Ws.fromNodeStream(e)):_2(e)?this.source=new Nd(Ws.fromDOMStream(e)):D8(e)?this.source=new Nd(Ws.fromDOMStream(e.body)):u_(e)?this.source=new Nd(Ws.fromIterable(e)):Pc(e)?this.source=new Nd(Ws.fromAsyncIterable(e)):vu(e)&&(this.source=new Nd(Ws.fromAsyncIterable(e)))}[Symbol.asyncIterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}get closed(){return this.source.closed}cancel(e){return this.source.cancel(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}},_ie=class{constructor(e){this.source=e}cancel(e){this.return(e)}peek(e){return this.next(e,"peek").value}read(e){return this.next(e,"read").value}next(e,i="read"){return this.source.next({cmd:i,size:e})}throw(e){return Object.create(this.source.throw&&this.source.throw(e)||Si)}return(e){return Object.create(this.source.return&&this.source.return(e)||Si)}},Nd=class{constructor(e){this.source=e,this._closedPromise=new Promise(i=>this._closedPromiseResolve=i)}cancel(e){return ye(this,void 0,void 0,function*(){yield this.return(e)})}get closed(){return this._closedPromise}read(e){return ye(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return ye(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(e,i="read"){return ye(this,void 0,void 0,function*(){return yield this.source.next({cmd:i,size:e})})}throw(e){return ye(this,void 0,void 0,function*(){const i=this.source.throw&&(yield this.source.throw(e))||Si;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(i)})}return(e){return ye(this,void 0,void 0,function*(){const i=this.source.return&&(yield this.source.return(e))||Si;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(i)})}},gD=class extends Sg{constructor(e,i){super(),this.position=0,this.buffer=kt(e),this.size=i===void 0?this.buffer.byteLength:i}readInt32(e){const{buffer:i,byteOffset:n}=this.readAt(e,4);return new DataView(i,n).getInt32(0,!0)}seek(e){return this.position=Math.min(e,this.size),e<this.size}read(e){const{buffer:i,size:n,position:s}=this;return i&&s<n?(typeof e!="number"&&(e=Number.POSITIVE_INFINITY),this.position=Math.min(n,s+Math.min(n-s,e)),i.subarray(s,this.position)):null}readAt(e,i){const n=this.buffer,s=Math.min(this.size,e+i);return n?n.subarray(e,s):new Uint8Array(i)}close(){this.buffer&&(this.buffer=null)}throw(e){return this.close(),{done:!0,value:e}}return(e){return this.close(),{done:!0,value:e}}},CT=class extends Tp{constructor(e,i){super(),this.position=0,this._handle=e,typeof i=="number"?this.size=i:this._pending=(()=>ye(this,void 0,void 0,function*(){this.size=(yield e.stat()).size,delete this._pending}))()}readInt32(e){return ye(this,void 0,void 0,function*(){const{buffer:i,byteOffset:n}=yield this.readAt(e,4);return new DataView(i,n).getInt32(0,!0)})}seek(e){return ye(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(e,this.size),e<this.size})}read(e){return ye(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:i,size:n,position:s}=this;if(i&&s<n){typeof e!="number"&&(e=Number.POSITIVE_INFINITY);let a=s,c=0,d=0;const f=Math.min(n,a+Math.min(n-a,e)),u=new Uint8Array(Math.max(0,(this.position=f)-a));for(;(a+=d)<f&&(c+=d)<u.byteLength;)({bytesRead:d}=yield i.read(u,c,u.byteLength-c,a));return u}return null})}readAt(e,i){return ye(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:n,size:s}=this;if(n&&e+i<s){const a=Math.min(s,e+i),c=new Uint8Array(a-e);return(yield n.read(c,0,i,e)).buffer}return new Uint8Array(i)})}close(){return ye(this,void 0,void 0,function*(){const e=this._handle;this._handle=null,e&&(yield e.close())})}throw(e){return ye(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}return(e){return ye(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}};const yie=1<<16;function Mh(t){return t<0&&(t=4294967295+t+1),`0x${t.toString(16)}`}const vp=8,Y2=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];let X2=class{constructor(e){this.buffer=e}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(e){const i=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),n=new Uint32Array([e.buffer[1]>>>16,e.buffer[1]&65535,e.buffer[0]>>>16,e.buffer[0]&65535]);let s=i[3]*n[3];this.buffer[0]=s&65535;let a=s>>>16;return s=i[2]*n[3],a+=s,s=i[3]*n[2]>>>0,a+=s,this.buffer[0]+=a<<16,this.buffer[1]=a>>>0<s?yie:0,this.buffer[1]+=a>>>16,this.buffer[1]+=i[1]*n[3]+i[2]*n[2]+i[3]*n[1],this.buffer[1]+=i[0]*n[3]+i[1]*n[2]+i[2]*n[1]+i[3]*n[0]<<16,this}_plus(e){const i=this.buffer[0]+e.buffer[0]>>>0;this.buffer[1]+=e.buffer[1],i<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=i}lessThan(e){return this.buffer[1]<e.buffer[1]||this.buffer[1]===e.buffer[1]&&this.buffer[0]<e.buffer[0]}equals(e){return this.buffer[1]===e.buffer[1]&&this.buffer[0]==e.buffer[0]}greaterThan(e){return e.lessThan(this)}hex(){return`${Mh(this.buffer[1])} ${Mh(this.buffer[0])}`}},Oi=class Jo extends X2{times(e){return this._times(e),this}plus(e){return this._plus(e),this}static from(e,i=new Uint32Array(2)){return Jo.fromString(typeof e=="string"?e:e.toString(),i)}static fromNumber(e,i=new Uint32Array(2)){return Jo.fromString(e.toString(),i)}static fromString(e,i=new Uint32Array(2)){const n=e.length,s=new Jo(i);for(let a=0;a<n;){const c=vp<n-a?vp:n-a,d=new Jo(new Uint32Array([Number.parseInt(e.slice(a,a+c),10),0])),f=new Jo(new Uint32Array([Y2[c],0]));s.times(f),s.plus(d),a+=c}return s}static convertArray(e){const i=new Uint32Array(e.length*2);for(let n=-1,s=e.length;++n<s;)Jo.from(e[n],new Uint32Array(i.buffer,i.byteOffset+2*n*4,2));return i}static multiply(e,i){return new Jo(new Uint32Array(e.buffer)).times(i)}static add(e,i){return new Jo(new Uint32Array(e.buffer)).plus(i)}},Yh=class Qo extends X2{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(e){return this._times(e),this}plus(e){return this._plus(e),this}lessThan(e){const i=this.buffer[1]<<0,n=e.buffer[1]<<0;return i<n||i===n&&this.buffer[0]<e.buffer[0]}static from(e,i=new Uint32Array(2)){return Qo.fromString(typeof e=="string"?e:e.toString(),i)}static fromNumber(e,i=new Uint32Array(2)){return Qo.fromString(e.toString(),i)}static fromString(e,i=new Uint32Array(2)){const n=e.startsWith("-"),s=e.length,a=new Qo(i);for(let c=n?1:0;c<s;){const d=vp<s-c?vp:s-c,f=new Qo(new Uint32Array([Number.parseInt(e.slice(c,c+d),10),0])),u=new Qo(new Uint32Array([Y2[d],0]));a.times(u),a.plus(f),c+=d}return n?a.negate():a}static convertArray(e){const i=new Uint32Array(e.length*2);for(let n=-1,s=e.length;++n<s;)Qo.from(e[n],new Uint32Array(i.buffer,i.byteOffset+2*n*4,2));return i}static multiply(e,i){return new Qo(new Uint32Array(e.buffer)).times(i)}static add(e,i){return new Qo(new Uint32Array(e.buffer)).plus(i)}},lj=class Zo{constructor(e){this.buffer=e}high(){return new Yh(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new Yh(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(e){const i=new Oi(new Uint32Array([this.buffer[3],0])),n=new Oi(new Uint32Array([this.buffer[2],0])),s=new Oi(new Uint32Array([this.buffer[1],0])),a=new Oi(new Uint32Array([this.buffer[0],0])),c=new Oi(new Uint32Array([e.buffer[3],0])),d=new Oi(new Uint32Array([e.buffer[2],0])),f=new Oi(new Uint32Array([e.buffer[1],0])),u=new Oi(new Uint32Array([e.buffer[0],0]));let o=Oi.multiply(a,u);this.buffer[0]=o.low();const g=new Oi(new Uint32Array([o.high(),0]));return o=Oi.multiply(s,u),g.plus(o),o=Oi.multiply(a,f),g.plus(o),this.buffer[1]=g.low(),this.buffer[3]=g.lessThan(o)?1:0,this.buffer[2]=g.high(),new Oi(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(Oi.multiply(n,u)).plus(Oi.multiply(s,f)).plus(Oi.multiply(a,d)),this.buffer[3]+=Oi.multiply(i,u).plus(Oi.multiply(n,f)).plus(Oi.multiply(s,d)).plus(Oi.multiply(a,c)).low(),this}plus(e){const i=new Uint32Array(4);return i[3]=this.buffer[3]+e.buffer[3]>>>0,i[2]=this.buffer[2]+e.buffer[2]>>>0,i[1]=this.buffer[1]+e.buffer[1]>>>0,i[0]=this.buffer[0]+e.buffer[0]>>>0,i[0]<this.buffer[0]>>>0&&++i[1],i[1]<this.buffer[1]>>>0&&++i[2],i[2]<this.buffer[2]>>>0&&++i[3],this.buffer[3]=i[3],this.buffer[2]=i[2],this.buffer[1]=i[1],this.buffer[0]=i[0],this}hex(){return`${Mh(this.buffer[3])} ${Mh(this.buffer[2])} ${Mh(this.buffer[1])} ${Mh(this.buffer[0])}`}static multiply(e,i){return new Zo(new Uint32Array(e.buffer)).times(i)}static add(e,i){return new Zo(new Uint32Array(e.buffer)).plus(i)}static from(e,i=new Uint32Array(4)){return Zo.fromString(typeof e=="string"?e:e.toString(),i)}static fromNumber(e,i=new Uint32Array(4)){return Zo.fromString(e.toString(),i)}static fromString(e,i=new Uint32Array(4)){const n=e.startsWith("-"),s=e.length,a=new Zo(i);for(let c=n?1:0;c<s;){const d=vp<s-c?vp:s-c,f=new Zo(new Uint32Array([Number.parseInt(e.slice(c,c+d),10),0,0,0])),u=new Zo(new Uint32Array([Y2[d],0,0,0]));a.times(u),a.plus(f),c+=d}return n?a.negate():a}static convertArray(e){const i=new Uint32Array(e.length*4);for(let n=-1,s=e.length;++n<s;)Zo.from(e[n],new Uint32Array(i.buffer,i.byteOffset+4*4*n,4));return i}};const gie=Object.freeze(Object.defineProperty({__proto__:null,BaseInt64:X2,Int128:lj,Int64:Yh,Uint64:Oi},Symbol.toStringTag,{value:"Module"}));let cj=class extends St{constructor(e,i,n,s){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=e,this.nodes=i,this.buffers=n,this.dictionaries=s}visit(e){return super.visit(e instanceof Jt?e.type:e)}visitNull(e,{length:i}=this.nextFieldNode()){return Ye({type:e,length:i})}visitBool(e,{length:i,nullCount:n}=this.nextFieldNode()){return Ye({type:e,length:i,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitInt(e,{length:i,nullCount:n}=this.nextFieldNode()){return Ye({type:e,length:i,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitFloat(e,{length:i,nullCount:n}=this.nextFieldNode()){return Ye({type:e,length:i,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitUtf8(e,{length:i,nullCount:n}=this.nextFieldNode()){return Ye({type:e,length:i,nullCount:n,nullBitmap:this.readNullBitmap(e,n),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitBinary(e,{length:i,nullCount:n}=this.nextFieldNode()){return Ye({type:e,length:i,nullCount:n,nullBitmap:this.readNullBitmap(e,n),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitFixedSizeBinary(e,{length:i,nullCount:n}=this.nextFieldNode()){return Ye({type:e,length:i,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitDate(e,{length:i,nullCount:n}=this.nextFieldNode()){return Ye({type:e,length:i,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitTimestamp(e,{length:i,nullCount:n}=this.nextFieldNode()){return Ye({type:e,length:i,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitTime(e,{length:i,nullCount:n}=this.nextFieldNode()){return Ye({type:e,length:i,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitDecimal(e,{length:i,nullCount:n}=this.nextFieldNode()){return Ye({type:e,length:i,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitList(e,{length:i,nullCount:n}=this.nextFieldNode()){return Ye({type:e,length:i,nullCount:n,nullBitmap:this.readNullBitmap(e,n),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}visitStruct(e,{length:i,nullCount:n}=this.nextFieldNode()){return Ye({type:e,length:i,nullCount:n,nullBitmap:this.readNullBitmap(e,n),children:this.visitMany(e.children)})}visitUnion(e){return e.mode===an.Sparse?this.visitSparseUnion(e):this.visitDenseUnion(e)}visitDenseUnion(e,{length:i,nullCount:n}=this.nextFieldNode()){return Ye({type:e,length:i,nullCount:n,nullBitmap:this.readNullBitmap(e,n),typeIds:this.readTypeIds(e),valueOffsets:this.readOffsets(e),children:this.visitMany(e.children)})}visitSparseUnion(e,{length:i,nullCount:n}=this.nextFieldNode()){return Ye({type:e,length:i,nullCount:n,nullBitmap:this.readNullBitmap(e,n),typeIds:this.readTypeIds(e),children:this.visitMany(e.children)})}visitDictionary(e,{length:i,nullCount:n}=this.nextFieldNode()){return Ye({type:e,length:i,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e.indices),dictionary:this.readDictionary(e)})}visitInterval(e,{length:i,nullCount:n}=this.nextFieldNode()){return Ye({type:e,length:i,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitFixedSizeList(e,{length:i,nullCount:n}=this.nextFieldNode()){return Ye({type:e,length:i,nullCount:n,nullBitmap:this.readNullBitmap(e,n),child:this.visit(e.children[0])})}visitMap(e,{length:i,nullCount:n}=this.nextFieldNode()){return Ye({type:e,length:i,nullCount:n,nullBitmap:this.readNullBitmap(e,n),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(e,i,n=this.nextBufferRange()){return i>0&&this.readData(e,n)||new Uint8Array(0)}readOffsets(e,i){return this.readData(e,i)}readTypeIds(e,i){return this.readData(e,i)}readData(e,{length:i,offset:n}=this.nextBufferRange()){return this.bytes.subarray(n,n+i)}readDictionary(e){return this.dictionaries.get(e.id)}},mie=class extends cj{constructor(e,i,n,s){super(new Uint8Array(0),i,n,s),this.sources=e}readNullBitmap(e,i,{offset:n}=this.nextBufferRange()){return i<=0?new Uint8Array(0):vg(this.sources[n])}readOffsets(e,{offset:i}=this.nextBufferRange()){return Bt(Uint8Array,Bt(Int32Array,this.sources[i]))}readTypeIds(e,{offset:i}=this.nextBufferRange()){return Bt(Uint8Array,Bt(e.ArrayType,this.sources[i]))}readData(e,{offset:i}=this.nextBufferRange()){const{sources:n}=this;return Xe.isTimestamp(e)||(Xe.isInt(e)||Xe.isTime(e))&&e.bitWidth===64||Xe.isDate(e)&&e.unit===Ss.MILLISECOND?Bt(Uint8Array,Yh.convertArray(n[i])):Xe.isDecimal(e)?Bt(Uint8Array,lj.convertArray(n[i])):Xe.isBinary(e)||Xe.isFixedSizeBinary(e)?wie(n[i]):Xe.isBool(e)?vg(n[i]):Xe.isUtf8(e)?Zv(n[i].join("")):Bt(Uint8Array,Bt(e.ArrayType,n[i].map(s=>+s)))}};function wie(t){const e=t.join(""),i=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2)i[n>>1]=Number.parseInt(e.slice(n,n+2),16);return i}class K2 extends dE{constructor(e){super(e),this._values=new cE(new Uint8Array(0))}get byteLength(){let e=this._pendingLength+this.length*4;return this._offsets&&(e+=this._offsets.byteLength),this._values&&(e+=this._values.byteLength),this._nulls&&(e+=this._nulls.byteLength),e}setValue(e,i){return super.setValue(e,kt(i))}_flushPending(e,i){const n=this._offsets,s=this._values.reserve(i).buffer;let a=0;for(const[c,d]of e)if(d===void 0)n.set(c,0);else{const f=d.length;s.set(d,a),n.set(c,f),a+=f}}}class dj extends Dn{constructor(e){super(e),this._values=new tj}setValue(e,i){this._values.set(e,+i)}}class mm extends fd{}mm.prototype._setValue=mz;class J2 extends mm{}J2.prototype._setValue=F2;class Q2 extends mm{}Q2.prototype._setValue=M2;class Z2 extends fd{}Z2.prototype._setValue=Tz;class fj extends Dn{constructor({type:e,nullValues:i,dictionaryHashFunction:n}){super({type:new Al(e.dictionary,e.indices,e.id,e.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=Gf({type:this.type.indices,nullValues:i}),this.dictionary=Gf({type:this.type.dictionary,nullValues:null}),typeof n=="function"&&(this.valueToKey=n)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(e){return this.indices.isValid(e)}setValid(e,i){const n=this.indices;return i=n.setValid(e,i),this.length=n.length,i}setValue(e,i){const n=this._keysToIndices,s=this.valueToKey(i);let a=n[s];return a===void 0&&(n[s]=a=this._dictionaryOffset+this.dictionary.append(i).length-1),this.indices.setValue(e,a)}flush(){const e=this.type,i=this._dictionary,n=this.dictionary.toVector(),s=this.indices.flush().clone(e);return s.dictionary=i?i.concat(n):n,this.finished||(this._dictionaryOffset+=n.length),this._dictionary=s.dictionary,this.clear(),s}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(e){return typeof e=="string"?e:`${e}`}}class eM extends fd{}eM.prototype._setValue=gz;class uj extends Dn{setValue(e,i){const[n]=this.children,s=e*this.stride;for(let a=-1,c=i.length;++a<c;)n.set(s+a,i[a])}addChild(e,i="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const n=this.children.push(e);return this.type=new pp(this.type.listSize,new Jt(i,e.type,!0)),n}}class wm extends fd{setValue(e,i){this._values.set(e,i)}}class hj extends wm{setValue(e,i){super.setValue(e,B2(i))}}class pj extends wm{}class _j extends wm{}class bm extends fd{}bm.prototype._setValue=Sz;class tM extends bm{}tM.prototype._setValue=$2;class iM extends bm{}iM.prototype._setValue=U2;class Oo extends fd{setValue(e,i){this._values.set(e,i)}}class yj extends Oo{}class gj extends Oo{}class mj extends Oo{}class wj extends Oo{}class bj extends Oo{}class Tj extends Oo{}class vj extends Oo{}class Ej extends Oo{}class Sj extends dE{constructor(e){super(e),this._offsets=new ij}addChild(e,i="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=e,this.type=new qf(new Jt(i,e.type,!0)),this.numChildren-1}_flushPending(e){const i=this._offsets,[n]=this.children;for(const[s,a]of e)if(typeof a>"u")i.set(s,0);else{const c=a.length,d=i.set(s,c).buffer[s];for(let f=-1;++f<c;)n.set(d+f,a[f])}}}class xj extends dE{set(e,i){return super.set(e,i)}setValue(e,i){const n=i instanceof Map?i:new Map(Object.entries(i)),s=this._pending||(this._pending=new Map),a=s.get(e);a&&(this._pendingLength-=a.size),this._pendingLength+=n.size,s.set(e,n)}addChild(e,i=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=e,this.type=new _p(new Jt(i,e.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(e){const i=this._offsets,[n]=this.children;for(const[s,a]of e)if(a===void 0)i.set(s,0);else{let{[s]:c,[s+1]:d}=i.set(s,a.size).buffer;for(const f of a.entries())if(n.set(c,f),++c>=d)break}}}class Bj extends Dn{setValue(e,i){}setValid(e,i){return this.length=Math.max(e+1,this.length),i}}class Ij extends Dn{setValue(e,i){const{children:n,type:s}=this;switch(Array.isArray(i)||i.constructor){case!0:return s.children.forEach((a,c)=>n[c].set(e,i[c]));case Map:return s.children.forEach((a,c)=>n[c].set(e,i.get(a.name)));default:return s.children.forEach((a,c)=>n[c].set(e,i[a.name]))}}setValid(e,i){return super.setValid(e,i)||this.children.forEach(n=>n.setValid(e,i)),i}addChild(e,i=`${this.numChildren}`){const n=this.children.push(e);return this.type=new Qi([...this.type.children,new Jt(i,e.type,!0)]),n}}class Su extends fd{}Su.prototype._setValue=wz;class nM extends Su{}nM.prototype._setValue=A2;class sM extends Su{}sM.prototype._setValue=O2;class rM extends Su{}rM.prototype._setValue=N2;class aM extends Su{}aM.prototype._setValue=C2;class xu extends fd{}xu.prototype._setValue=bz;class oM extends xu{}oM.prototype._setValue=R2;class lM extends xu{}lM.prototype._setValue=L2;class cM extends xu{}cM.prototype._setValue=D2;class dM extends xu{}dM.prototype._setValue=P2;class fE extends Dn{constructor(e){super(e),this._typeIds=new gm(new Int8Array(0),1),typeof e.valueToChildTypeId=="function"&&(this._valueToChildTypeId=e.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(e,i){return this.set(this.length,e,i)}set(e,i,n){return n===void 0&&(n=this._valueToChildTypeId(this,i,e)),this.setValid(e,this.isValid(i))&&this.setValue(e,i,n),this}setValue(e,i,n){this._typeIds.set(e,n);const s=this.type.typeIdToChildIndex[n],a=this.children[s];a==null||a.set(e,i)}addChild(e,i=`${this.children.length}`){const n=this.children.push(e),{type:{children:s,mode:a,typeIds:c}}=this,d=[...s,new Jt(i,e.type)];return this.type=new Uc(a,[...c,n],d),n}_valueToChildTypeId(e,i,n){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class kj extends fE{}class Fj extends fE{constructor(e){super(e),this._offsets=new gm(new Int32Array(0))}setValue(e,i,n){const s=this._typeIds.set(e,n).buffer[e],a=this.getChildAt(this.type.typeIdToChildIndex[s]),c=this._offsets.set(e,a.length).buffer[e];a==null||a.set(c,i)}}class fM extends dE{constructor(e){super(e),this._values=new cE(new Uint8Array(0))}get byteLength(){let e=this._pendingLength+this.length*4;return this._offsets&&(e+=this._offsets.byteLength),this._values&&(e+=this._values.byteLength),this._nulls&&(e+=this._nulls.byteLength),e}setValue(e,i){return super.setValue(e,Zv(i))}_flushPending(e,i){}}fM.prototype._flushPending=K2.prototype._flushPending;class bie extends St{visitNull(){return Bj}visitBool(){return dj}visitInt(){return Oo}visitInt8(){return yj}visitInt16(){return gj}visitInt32(){return mj}visitInt64(){return wj}visitUint8(){return bj}visitUint16(){return Tj}visitUint32(){return vj}visitUint64(){return Ej}visitFloat(){return wm}visitFloat16(){return hj}visitFloat32(){return pj}visitFloat64(){return _j}visitUtf8(){return fM}visitBinary(){return K2}visitFixedSizeBinary(){return eM}visitDate(){return mm}visitDateDay(){return J2}visitDateMillisecond(){return Q2}visitTimestamp(){return Su}visitTimestampSecond(){return nM}visitTimestampMillisecond(){return sM}visitTimestampMicrosecond(){return rM}visitTimestampNanosecond(){return aM}visitTime(){return xu}visitTimeSecond(){return oM}visitTimeMillisecond(){return lM}visitTimeMicrosecond(){return cM}visitTimeNanosecond(){return dM}visitDecimal(){return Z2}visitList(){return Sj}visitStruct(){return Ij}visitUnion(){return fE}visitDenseUnion(){return Fj}visitSparseUnion(){return kj}visitDictionary(){return fj}visitInterval(){return bm}visitIntervalDayTime(){return tM}visitIntervalYearMonth(){return iM}visitFixedSizeList(){return uj}visitMap(){return xj}}const Tie=new bie;let nt=class extends St{compareSchemas(e,i){return e===i||i instanceof e.constructor&&this.compareManyFields(e.fields,i.fields)}compareManyFields(e,i){return e===i||Array.isArray(e)&&Array.isArray(i)&&e.length===i.length&&e.every((n,s)=>this.compareFields(n,i[s]))}compareFields(e,i){return e===i||i instanceof e.constructor&&e.name===i.name&&e.nullable===i.nullable&&this.visit(e.type,i.type)}};function Rs(t,e){return e instanceof t.constructor}function Tm(t,e){return t===e||Rs(t,e)}function Ul(t,e){return t===e||Rs(t,e)&&t.bitWidth===e.bitWidth&&t.isSigned===e.isSigned}function uE(t,e){return t===e||Rs(t,e)&&t.precision===e.precision}function vie(t,e){return t===e||Rs(t,e)&&t.byteWidth===e.byteWidth}function uM(t,e){return t===e||Rs(t,e)&&t.unit===e.unit}function vm(t,e){return t===e||Rs(t,e)&&t.unit===e.unit&&t.timezone===e.timezone}function Em(t,e){return t===e||Rs(t,e)&&t.unit===e.unit&&t.bitWidth===e.bitWidth}function Eie(t,e){return t===e||Rs(t,e)&&t.children.length===e.children.length&&go.compareManyFields(t.children,e.children)}function Sie(t,e){return t===e||Rs(t,e)&&t.children.length===e.children.length&&go.compareManyFields(t.children,e.children)}function hM(t,e){return t===e||Rs(t,e)&&t.mode===e.mode&&t.typeIds.every((i,n)=>i===e.typeIds[n])&&go.compareManyFields(t.children,e.children)}function xie(t,e){return t===e||Rs(t,e)&&t.id===e.id&&t.isOrdered===e.isOrdered&&go.visit(t.indices,e.indices)&&go.visit(t.dictionary,e.dictionary)}function pM(t,e){return t===e||Rs(t,e)&&t.unit===e.unit}function Bie(t,e){return t===e||Rs(t,e)&&t.listSize===e.listSize&&t.children.length===e.children.length&&go.compareManyFields(t.children,e.children)}function Iie(t,e){return t===e||Rs(t,e)&&t.keysSorted===e.keysSorted&&t.children.length===e.children.length&&go.compareManyFields(t.children,e.children)}nt.prototype.visitNull=Tm;nt.prototype.visitBool=Tm;nt.prototype.visitInt=Ul;nt.prototype.visitInt8=Ul;nt.prototype.visitInt16=Ul;nt.prototype.visitInt32=Ul;nt.prototype.visitInt64=Ul;nt.prototype.visitUint8=Ul;nt.prototype.visitUint16=Ul;nt.prototype.visitUint32=Ul;nt.prototype.visitUint64=Ul;nt.prototype.visitFloat=uE;nt.prototype.visitFloat16=uE;nt.prototype.visitFloat32=uE;nt.prototype.visitFloat64=uE;nt.prototype.visitUtf8=Tm;nt.prototype.visitBinary=Tm;nt.prototype.visitFixedSizeBinary=vie;nt.prototype.visitDate=uM;nt.prototype.visitDateDay=uM;nt.prototype.visitDateMillisecond=uM;nt.prototype.visitTimestamp=vm;nt.prototype.visitTimestampSecond=vm;nt.prototype.visitTimestampMillisecond=vm;nt.prototype.visitTimestampMicrosecond=vm;nt.prototype.visitTimestampNanosecond=vm;nt.prototype.visitTime=Em;nt.prototype.visitTimeSecond=Em;nt.prototype.visitTimeMillisecond=Em;nt.prototype.visitTimeMicrosecond=Em;nt.prototype.visitTimeNanosecond=Em;nt.prototype.visitDecimal=Tm;nt.prototype.visitList=Eie;nt.prototype.visitStruct=Sie;nt.prototype.visitUnion=hM;nt.prototype.visitDenseUnion=hM;nt.prototype.visitSparseUnion=hM;nt.prototype.visitDictionary=xie;nt.prototype.visitInterval=pM;nt.prototype.visitIntervalDayTime=pM;nt.prototype.visitIntervalYearMonth=pM;nt.prototype.visitFixedSizeList=Bie;nt.prototype.visitMap=Iie;const go=new nt;function RT(t,e){return go.compareSchemas(t,e)}function kie(t,e){return go.compareFields(t,e)}function Mj(t,e){return go.visit(t,e)}function Gf(t){const e=t.type,i=new(Tie.getVisitFn(e)())(t);if(e.children&&e.children.length>0){const n=t.children||[],s={nullValues:t.nullValues},a=Array.isArray(n)?(c,d)=>n[d]||s:({name:c})=>n[c]||s;for(const[c,d]of e.children.entries()){const{type:f}=d,u=a(d,c);i.children.push(Gf(Object.assign(Object.assign({},u),{type:f})))}}return i}function _M(t,e){if(t instanceof ri||t instanceof Ke||t.type instanceof Xe||ArrayBuffer.isView(t))return lE(t);const i={type:e??G0(t),nullValues:[null]},n=[...Aj(i)(t)],s=n.length===1?n[0]:n.reduce((a,c)=>a.concat(c));return Xe.isDictionary(s.type)?s.memoize():s}function Fie(t){const e=_M(t),i=new hn(new yi(e.type.children),e.data[0]);return new Ir(i)}function G0(t){if(t.length===0)return new po;let e=0,i=0,n=0,s=0,a=0,c=0,d=0,f=0;for(const u of t){if(u==null){++e;continue}switch(typeof u){case"bigint":++c;continue;case"boolean":++d;continue;case"number":++s;continue;case"string":++a;continue;case"object":Array.isArray(u)?++i:Object.prototype.toString.call(u)==="[object Date]"?++f:++n;continue}throw new TypeError("Unable to infer Vector type from input values, explicit type declaration expected.")}if(s+e===t.length)return new nE;if(a+e===t.length)return new Al(new up,new $c);if(c+e===t.length)return new iE;if(d+e===t.length)return new hp;if(f+e===t.length)return new hz;if(i+e===t.length){const u=t,o=G0(u[u.findIndex(g=>g!=null)]);if(u.every(g=>g==null||Mj(o,G0(g))))return new qf(new Jt("",o,!0))}else if(n+e===t.length){const u=new Map;for(const o of t)for(const g of Object.keys(o))!u.has(g)&&o[g]!=null&&u.set(g,new Jt(g,G0([o[g]]),!0));return new Qi([...u.values()])}throw new TypeError("Unable to infer Vector type from input values, explicit type declaration expected.")}function Aj(t){const{["queueingStrategy"]:e="count"}=t,{["highWaterMark"]:i=e!=="bytes"?Number.POSITIVE_INFINITY:Math.pow(2,14)}=t,n=e!=="bytes"?"length":"byteLength";return function*(s){let a=0;const c=Gf(t);for(const d of s)c.append(d)[n]>=i&&++a&&(yield c.toVector());(c.finish().length>0||a===0)&&(yield c.toVector())}}function Mie(t){const{["queueingStrategy"]:e="count"}=t,{["highWaterMark"]:i=e!=="bytes"?Number.POSITIVE_INFINITY:Math.pow(2,14)}=t,n=e!=="bytes"?"length":"byteLength";return function(s){return Ri(this,arguments,function*(){var a,c,d,f;let u=0;const o=Gf(t);try{for(var g=!0,w=Qn(s),m;m=yield Be(w.next()),a=m.done,!a;){f=m.value,g=!1;try{const l=f;o.append(l)[n]>=i&&++u&&(yield yield Be(o.toVector()))}finally{g=!0}}}catch(l){c={error:l}}finally{try{!g&&!a&&(d=w.return)&&(yield Be(d.call(w)))}finally{if(c)throw c.error}}(o.finish().length>0||u===0)&&(yield yield Be(o.toVector()))})}}function Mx(t,e){return Aie(t,e.map(i=>i.data.concat()))}function Aie(t,e){const i=[...t.fields],n=[],s={numBatches:e.reduce((g,w)=>Math.max(g,w.length),0)};let a=0,c=0,d=-1;const f=e.length;let u,o=[];for(;s.numBatches-- >0;){for(c=Number.POSITIVE_INFINITY,d=-1;++d<f;)o[d]=u=e[d].shift(),c=Math.min(c,u?u.length:c);Number.isFinite(c)&&(o=Oie(i,c,o,e,s),c>0&&(n[a++]=Ye({type:new Qi(i),length:c,nullCount:0,children:o.slice()})))}return[t=t.assign(i),n.map(g=>new hn(t,g))]}function Oie(t,e,i,n,s){var a;const c=(e+63&-64)>>3;for(let d=-1,f=n.length;++d<f;){const u=i[d],o=u==null?void 0:u.length;if(o>=e)o===e?i[d]=u:(i[d]=u.slice(0,e),s.numBatches=Math.max(s.numBatches,n[d].unshift(u.slice(e,o-e))));else{const g=t[d];t[d]=g.clone({nullable:!0}),i[d]=(a=u==null?void 0:u._changeLengthAndBackfillNullBitmap(e))!==null&&a!==void 0?a:Ye({type:g.type,length:e,nullCount:e,nullBitmap:new Uint8Array(c)})}}return i}var Oj;let Ir=class ef{constructor(...e){var i,n;if(e.length===0)return this.batches=[],this.schema=new yi([]),this._offsets=[0],this;let s,a;e[0]instanceof yi&&(s=e.shift()),e[e.length-1]instanceof Uint32Array&&(a=e.pop());const c=f=>{if(f){if(f instanceof hn)return[f];if(f instanceof ef)return f.batches;if(f instanceof ri){if(f.type instanceof Qi)return[new hn(new yi(f.type.children),f)]}else{if(Array.isArray(f))return f.flatMap(u=>c(u));if(typeof f[Symbol.iterator]=="function")return[...f].flatMap(u=>c(u));if(typeof f=="object"){const u=Object.keys(f),o=u.map(m=>new Ke([f[m]])),g=new yi(u.map((m,l)=>new Jt(String(m),o[l].type))),[,w]=Mx(g,o);return w.length===0?[new hn(f)]:w}}}return[]},d=e.flatMap(f=>c(f));if(s=(n=s??((i=d[0])===null||i===void 0?void 0:i.schema))!==null&&n!==void 0?n:new yi([]),!(s instanceof yi))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const f of d){if(!(f instanceof hn))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!RT(s,f.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=s,this.batches=d,this._offsets=a??Gz(this.data)}get data(){return this.batches.map(({data:e})=>e)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((e,i)=>e+i.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=qz(this.data)),this._nullCount}isValid(e){return!1}get(e){return null}set(e,i){}indexOf(e,i){return-1}getByteLength(e){return 0}[Symbol.iterator](){return this.batches.length>0?W2.visit(new Ke(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...e){const i=this.schema,n=this.data.concat(e.flatMap(({data:s})=>s));return new ef(i,n.map(s=>new hn(i,s)))}slice(e,i){const n=this.schema;[e,i]=j2({length:this.numRows},e,i);const s=Vz(this.data,this._offsets,e,i);return new ef(n,s.map(a=>new hn(n,a)))}getChild(e){return this.getChildAt(this.schema.fields.findIndex(i=>i.name===e))}getChildAt(e){if(e>-1&&e<this.schema.fields.length){const i=this.data.map(n=>n.children[e]);if(i.length===0){const{type:n}=this.schema.fields[e],s=Ye({type:n,length:0,nullCount:0});i.push(s._changeLengthAndBackfillNullBitmap(this.numRows))}return new Ke(i)}return null}setChild(e,i){var n;return this.setChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(s=>s.name===e),i)}setChildAt(e,i){let n=this.schema,s=[...this.batches];if(e>-1&&e<this.numCols){i||(i=new Ke([Ye({type:new po,length:this.numRows})]));const a=n.fields.slice(),c=a[e].clone({type:i.type}),d=this.schema.fields.map((f,u)=>this.getChildAt(u));[a[e],d[e]]=[c,i],[n,s]=Mx(n,d)}return new ef(n,s)}select(e){const i=this.schema.fields.reduce((n,s,a)=>n.set(s.name,a),new Map);return this.selectAt(e.map(n=>i.get(n)).filter(n=>n>-1))}selectAt(e){const i=this.schema.selectAt(e),n=this.batches.map(s=>s.selectAt(e));return new ef(i,n)}assign(e){const i=this.schema.fields,[n,s]=e.schema.fields.reduce((d,f,u)=>{const[o,g]=d,w=i.findIndex(m=>m.name===f.name);return~w?g[w]=u:o.push(u),d},[[],[]]),a=this.schema.assign(e.schema),c=[...i.map((d,f)=>[f,s[f]]).map(([d,f])=>f===void 0?this.getChildAt(d):e.getChildAt(f)),...n.map(d=>e.getChildAt(d))].filter(Boolean);return new ef(...Mx(a,c))}};Oj=Symbol.toStringTag;Ir[Oj]=(t=>(t.schema=null,t.batches=[],t._offsets=new Uint32Array([0]),t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,t.isValid=Wh(V2),t.get=Wh(xs.getVisitFn(ie.Struct)),t.set=Wz(Br.getVisitFn(ie.Struct)),t.indexOf=Hz(kT.getVisitFn(ie.Struct)),t.getByteLength=Wh(yo.getVisitFn(ie.Struct)),"Table"))(Ir.prototype);function Nie(t){const e={},i=Object.entries(t);for(const[n,s]of i)e[n]=lE(s);return new Ir(e)}function Cie(t){const e={},i=Object.entries(t);for(const[n,s]of i)e[n]=_M(s);return new Ir(e)}var Nj;let hn=class Ey{constructor(...e){switch(e.length){case 2:{if([this.schema]=e,!(this.schema instanceof yi))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=Ye({nullCount:0,type:new Qi(this.schema.fields),children:this.schema.fields.map(i=>Ye({type:i.type,nullCount:0}))})]=e,!(this.data instanceof ri))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=mD(this.schema,this.data.children);break}case 1:{const[i]=e,{fields:n,children:s,length:a}=Object.keys(i).reduce((f,u,o)=>(f.children[o]=i[u],f.length=Math.max(f.length,i[u].length),f.fields[o]=Jt.new({name:u,type:i[u].type,nullable:!0}),f),{length:0,fields:new Array,children:new Array}),c=new yi(n),d=Ye({type:new Qi(n),length:a,children:s,nullCount:0});[this.schema,this.data]=mD(c,d.children,a);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=Cj(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(e){return this.data.getValid(e)}get(e){return xs.visit(this.data,e)}set(e,i){return Br.visit(this.data,e,i)}indexOf(e,i){return kT.visit(this.data,e,i)}getByteLength(e){return yo.visit(this.data,e)}[Symbol.iterator](){return W2.visit(new Ke([this.data]))}toArray(){return[...this]}concat(...e){return new Ir(this.schema,[this,...e])}slice(e,i){const[n]=new Ke([this.data]).slice(e,i).data;return new Ey(this.schema,n)}getChild(e){var i;return this.getChildAt((i=this.schema.fields)===null||i===void 0?void 0:i.findIndex(n=>n.name===e))}getChildAt(e){return e>-1&&e<this.schema.fields.length?new Ke([this.data.children[e]]):null}setChild(e,i){var n;return this.setChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(s=>s.name===e),i)}setChildAt(e,i){let n=this.schema,s=this.data;if(e>-1&&e<this.numCols){i||(i=new Ke([Ye({type:new po,length:this.numRows})]));const a=n.fields.slice(),c=s.children.slice(),d=a[e].clone({type:i.type});[a[e],c[e]]=[d,i.data[0]],n=new yi(a,new Map(this.schema.metadata)),s=Ye({type:new Qi(a),children:c})}return new Ey(n,s)}select(e){const i=this.schema.select(e),n=new Qi(i.fields),s=[];for(const a of e){const c=this.schema.fields.findIndex(d=>d.name===a);~c&&(s[c]=this.data.children[c])}return new Ey(i,Ye({type:n,length:this.numRows,children:s}))}selectAt(e){const i=this.schema.selectAt(e),n=e.map(a=>this.data.children[a]).filter(Boolean),s=Ye({type:new Qi(i.fields),length:this.numRows,children:n});return new Ey(i,s)}};Nj=Symbol.toStringTag;hn[Nj]=(t=>(t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(hn.prototype);function mD(t,e,i=e.reduce((n,s)=>Math.max(n,s.length),0)){var n;const s=[...t.fields],a=[...e],c=(i+63&-64)>>3;for(const[d,f]of t.fields.entries()){const u=e[d];(!u||u.length!==i)&&(s[d]=f.clone({nullable:!0}),a[d]=(n=u==null?void 0:u._changeLengthAndBackfillNullBitmap(i))!==null&&n!==void 0?n:Ye({type:f.type,length:i,nullCount:i,nullBitmap:new Uint8Array(c)}))}return[t.assign(s),Ye({type:new Qi(s),length:i,children:a})]}function Cj(t,e,i=new Map){for(let n=-1,s=t.length;++n<s;){const c=t[n].type,d=e[n];if(Xe.isDictionary(c)){if(!i.has(c.id))d.dictionary&&i.set(c.id,d.dictionary);else if(i.get(c.id)!==d.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}c.children&&c.children.length>0&&Cj(c.children,d.children,i)}return i}let yM=class extends hn{constructor(e){const i=e.fields.map(s=>Ye({type:s.type})),n=Ye({type:new Qi(e.fields),nullCount:0,children:i});super(e,n)}};var LT;(function(t){t[t.BUFFER=0]="BUFFER"})(LT||(LT={}));var DT;(function(t){t[t.LZ4_FRAME=0]="LZ4_FRAME",t[t.ZSTD=1]="ZSTD"})(DT||(DT={}));let Rie=class tf{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsBodyCompression(e,i){return(i||new tf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBodyCompression(e,i){return e.setPosition(e.position()+li),(i||new tf).__init(e.readInt32(e.position())+e.position(),e)}codec(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb_pos+e):DT.LZ4_FRAME}method(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb_pos+e):LT.BUFFER}static startBodyCompression(e){e.startObject(2)}static addCodec(e,i){e.addFieldInt8(0,i,DT.LZ4_FRAME)}static addMethod(e,i){e.addFieldInt8(1,i,LT.BUFFER)}static endBodyCompression(e){return e.endObject()}static createBodyCompression(e,i,n){return tf.startBodyCompression(e),tf.addCodec(e,i),tf.addMethod(e,n),tf.endBodyCompression(e)}},Rj=class{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(e,i,n){return e.prep(8,16),e.writeInt64(BigInt(n??0)),e.writeInt64(BigInt(i??0)),e.offset()}},Lj=class{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(e,i,n){return e.prep(8,16),e.writeInt64(BigInt(n??0)),e.writeInt64(BigInt(i??0)),e.offset()}},tl=class OI{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsRecordBatch(e,i){return(i||new OI).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsRecordBatch(e,i){return e.setPosition(e.position()+li),(i||new OI).__init(e.readInt32(e.position())+e.position(),e)}length(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}nodes(e,i){const n=this.bb.__offset(this.bb_pos,6);return n?(i||new Lj).__init(this.bb.__vector(this.bb_pos+n)+e*16,this.bb):null}nodesLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}buffers(e,i){const n=this.bb.__offset(this.bb_pos,8);return n?(i||new Rj).__init(this.bb.__vector(this.bb_pos+n)+e*16,this.bb):null}buffersLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}compression(e){const i=this.bb.__offset(this.bb_pos,10);return i?(e||new Rie).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}static startRecordBatch(e){e.startObject(4)}static addLength(e,i){e.addFieldInt64(0,i,BigInt("0"))}static addNodes(e,i){e.addFieldOffset(1,i,0)}static startNodesVector(e,i){e.startVector(16,i,8)}static addBuffers(e,i){e.addFieldOffset(2,i,0)}static startBuffersVector(e,i){e.startVector(16,i,8)}static addCompression(e,i){e.addFieldOffset(3,i,0)}static endRecordBatch(e){return e.endObject()}},wh=class NI{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsDictionaryBatch(e,i){return(i||new NI).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryBatch(e,i){return e.setPosition(e.position()+li),(i||new NI).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}data(e){const i=this.bb.__offset(this.bb_pos,6);return i?(e||new tl).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}isDelta(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startDictionaryBatch(e){e.startObject(3)}static addId(e,i){e.addFieldInt64(0,i,BigInt("0"))}static addData(e,i){e.addFieldOffset(1,i,0)}static addIsDelta(e,i){e.addFieldInt8(2,+i,0)}static endDictionaryBatch(e){return e.endObject()}};var xg;(function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"})(xg||(xg={}));let nc=class Oa{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsMessage(e,i){return(i||new Oa).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMessage(e,i){return e.setPosition(e.position()+li),(i||new Oa).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):mp.V1}headerType(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):xg.NONE}header(e){const i=this.bb.__offset(this.bb_pos,8);return i?this.bb.__union(e,this.bb_pos+i):null}bodyLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}customMetadata(e,i){const n=this.bb.__offset(this.bb_pos,12);return n?(i||new yr).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startMessage(e){e.startObject(5)}static addVersion(e,i){e.addFieldInt16(0,i,mp.V1)}static addHeaderType(e,i){e.addFieldInt8(1,i,xg.NONE)}static addHeader(e,i){e.addFieldOffset(2,i,0)}static addBodyLength(e,i){e.addFieldInt64(3,i,BigInt("0"))}static addCustomMetadata(e,i){e.addFieldOffset(4,i,0)}static createCustomMetadataVector(e,i){e.startVector(4,i.length,4);for(let n=i.length-1;n>=0;n--)e.addOffset(i[n]);return e.endVector()}static startCustomMetadataVector(e,i){e.startVector(4,i,4)}static endMessage(e){return e.endObject()}static finishMessageBuffer(e,i){e.finish(i)}static finishSizePrefixedMessageBuffer(e,i){e.finish(i,void 0,!0)}static createMessage(e,i,n,s,a,c){return Oa.startMessage(e),Oa.addVersion(e,i),Oa.addHeaderType(e,n),Oa.addHeader(e,s),Oa.addBodyLength(e,a),Oa.addCustomMetadata(e,c),Oa.endMessage(e)}},Lie=class extends St{visit(e,i){return e==null||i==null?void 0:super.visit(e,i)}visitNull(e,i){return hD.startNull(i),hD.endNull(i)}visitInt(e,i){return Fh.startInt(i),Fh.addBitWidth(i,e.bitWidth),Fh.addIsSigned(i,e.isSigned),Fh.endInt(i)}visitFloat(e,i){return U0.startFloatingPoint(i),U0.addPrecision(i,e.precision),U0.endFloatingPoint(i)}visitBinary(e,i){return dD.startBinary(i),dD.endBinary(i)}visitBool(e,i){return fD.startBool(i),fD.endBool(i)}visitUtf8(e,i){return _D.startUtf8(i),_D.endUtf8(i)}visitDecimal(e,i){return hh.startDecimal(i),hh.addScale(i,e.scale),hh.addPrecision(i,e.precision),hh.addBitWidth(i,e.bitWidth),hh.endDecimal(i)}visitDate(e,i){return D0.startDate(i),D0.addUnit(i,e.unit),D0.endDate(i)}visitTime(e,i){return by.startTime(i),by.addUnit(i,e.unit),by.addBitWidth(i,e.bitWidth),by.endTime(i)}visitTimestamp(e,i){const n=e.timezone&&i.createString(e.timezone)||void 0;return Ty.startTimestamp(i),Ty.addUnit(i,e.unit),n!==void 0&&Ty.addTimezone(i,n),Ty.endTimestamp(i)}visitInterval(e,i){return z0.startInterval(i),z0.addUnit(i,e.unit),z0.endInterval(i)}visitList(e,i){return uD.startList(i),uD.endList(i)}visitStruct(e,i){return pD.startStruct_(i),pD.endStruct_(i)}visitUnion(e,i){Jd.startTypeIdsVector(i,e.typeIds.length);const n=Jd.createTypeIdsVector(i,e.typeIds);return Jd.startUnion(i),Jd.addMode(i,e.mode),Jd.addTypeIds(i,n),Jd.endUnion(i)}visitDictionary(e,i){const n=this.visit(e.indices,i);return fh.startDictionaryEncoding(i),fh.addId(i,BigInt(e.id)),fh.addIsOrdered(i,e.isOrdered),n!==void 0&&fh.addIndexType(i,n),fh.endDictionaryEncoding(i)}visitFixedSizeBinary(e,i){return P0.startFixedSizeBinary(i),P0.addByteWidth(i,e.byteWidth),P0.endFixedSizeBinary(i)}visitFixedSizeList(e,i){return $0.startFixedSizeList(i),$0.addListSize(i,e.listSize),$0.endFixedSizeList(i)}visitMap(e,i){return j0.startMap(i),j0.addKeysSorted(i,e.keysSorted),j0.endMap(i)}};const Ax=new Lie;function Die(t,e=new Map){return new yi($ie(t,e),V0(t.customMetadata),e)}function Dj(t){return new er(t.count,Pj(t.columns),$j(t.columns))}function Pie(t){return new mo(Dj(t.data),t.id,t.isDelta)}function $ie(t,e){return(t.fields||[]).filter(Boolean).map(i=>Jt.fromJSON(i,e))}function wD(t,e){return(t.children||[]).filter(Boolean).map(i=>Jt.fromJSON(i,e))}function Pj(t){return(t||[]).reduce((e,i)=>[...e,new Bu(i.count,Uie(i.VALIDITY)),...Pj(i.children)],[])}function $j(t,e=[]){for(let i=-1,n=(t||[]).length;++i<n;){const s=t[i];s.VALIDITY&&e.push(new io(e.length,s.VALIDITY.length)),s.TYPE&&e.push(new io(e.length,s.TYPE.length)),s.OFFSET&&e.push(new io(e.length,s.OFFSET.length)),s.DATA&&e.push(new io(e.length,s.DATA.length)),e=$j(s.children,e)}return e}function Uie(t){return(t||[]).reduce((e,i)=>e+ +(i===0),0)}function zie(t,e){let i,n,s,a,c,d;return!e||!(a=t.dictionary)?(c=TD(t,wD(t,e)),s=new Jt(t.name,c,t.nullable,V0(t.customMetadata))):e.has(i=a.id)?(n=(n=a.indexType)?bD(n):new $c,d=new Al(e.get(i),n,i,a.isOrdered),s=new Jt(t.name,d,t.nullable,V0(t.customMetadata))):(n=(n=a.indexType)?bD(n):new $c,e.set(i,c=TD(t,wD(t,e))),d=new Al(c,n,i,a.isOrdered),s=new Jt(t.name,d,t.nullable,V0(t.customMetadata))),s||null}function V0(t){return new Map(Object.entries(t||{}))}function bD(t){return new Cn(t.isSigned,t.bitWidth)}function TD(t,e){const i=t.type.name;switch(i){case"NONE":return new po;case"null":return new po;case"binary":return new wg;case"utf8":return new up;case"bool":return new hp;case"list":return new qf((e||[])[0]);case"struct":return new Qi(e||[]);case"struct_":return new Qi(e||[])}switch(i){case"int":{const n=t.type;return new Cn(n.isSigned,n.bitWidth)}case"floatingpoint":{const n=t.type;return new Fl(Wi[n.precision])}case"decimal":{const n=t.type;return new bg(n.scale,n.precision,n.bitWidth)}case"date":{const n=t.type;return new zf(Ss[n.unit])}case"time":{const n=t.type;return new _o(lt[n.unit],n.bitWidth)}case"timestamp":{const n=t.type;return new Ml(lt[n.unit],n.timezone)}case"interval":{const n=t.type;return new jf(xr[n.unit])}case"union":{const n=t.type;return new Uc(an[n.mode],n.typeIds||[],e||[])}case"fixedsizebinary":{const n=t.type;return new Tg(n.byteWidth)}case"fixedsizelist":{const n=t.type;return new pp(n.listSize,(e||[])[0])}case"map":{const n=t.type;return new _p((e||[])[0],n.keysSorted)}}throw new Error(`Unrecognized type: "${i}"`)}var jie=sj,qie=gp;let to=class bh{static fromJSON(e,i){const n=new bh(0,ps.V4,i);return n._createHeader=Gie(e,i),n}static decode(e){e=new qie(kt(e));const i=nc.getRootAsMessage(e),n=i.bodyLength(),s=i.version(),a=i.headerType(),c=new bh(n,s,a);return c._createHeader=Vie(i,a),c}static encode(e){const i=new jie;let n=-1;return e.isSchema()?n=yi.encode(i,e.header()):e.isRecordBatch()?n=er.encode(i,e.header()):e.isDictionaryBatch()&&(n=mo.encode(i,e.header())),nc.startMessage(i),nc.addVersion(i,ps.V4),nc.addHeader(i,n),nc.addHeaderType(i,e.headerType),nc.addBodyLength(i,BigInt(e.bodyLength)),nc.finishMessageBuffer(i,nc.endMessage(i)),i.asUint8Array()}static from(e,i=0){if(e instanceof yi)return new bh(0,ps.V4,Wt.Schema,e);if(e instanceof er)return new bh(i,ps.V4,Wt.RecordBatch,e);if(e instanceof mo)return new bh(i,ps.V4,Wt.DictionaryBatch,e);throw new Error(`Unrecognized Message header: ${e}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Wt.Schema}isRecordBatch(){return this.headerType===Wt.RecordBatch}isDictionaryBatch(){return this.headerType===Wt.DictionaryBatch}constructor(e,i,n,s){this._version=i,this._headerType=n,this.body=new Uint8Array(0),s&&(this._createHeader=()=>s),this._bodyLength=fa(e)}},er=class{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(e,i,n){this._nodes=i,this._buffers=n,this._length=fa(e)}},mo=class{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(e,i,n=!1){this._data=e,this._isDelta=n,this._id=fa(i)}},io=class{constructor(e,i){this.offset=fa(e),this.length=fa(i)}},Bu=class{constructor(e,i){this.length=fa(e),this.nullCount=fa(i)}};function Gie(t,e){return()=>{switch(e){case Wt.Schema:return yi.fromJSON(t);case Wt.RecordBatch:return er.fromJSON(t);case Wt.DictionaryBatch:return mo.fromJSON(t)}throw new Error(`Unrecognized Message type: { name: ${Wt[e]}, type: ${e} }`)}}function Vie(t,e){return()=>{switch(e){case Wt.Schema:return yi.decode(t.header(new La));case Wt.RecordBatch:return er.decode(t.header(new tl),t.version());case Wt.DictionaryBatch:return mo.decode(t.header(new wh),t.version())}throw new Error(`Unrecognized Message type: { name: ${Wt[e]}, type: ${e} }`)}}Jt.encode=ine;Jt.decode=ene;Jt.fromJSON=zie;yi.encode=tne;yi.decode=Wie;yi.fromJSON=Die;er.encode=nne;er.decode=Hie;er.fromJSON=Dj;mo.encode=sne;mo.decode=Yie;mo.fromJSON=Pie;Bu.encode=rne;Bu.decode=Kie;io.encode=ane;io.decode=Xie;function Wie(t,e=new Map){const i=Zie(t,e);return new yi(i,W0(t),e)}function Hie(t,e=ps.V4){if(t.compression()!==null)throw new Error("Record batch compression not implemented");return new er(t.length(),Jie(t),Qie(t,e))}function Yie(t,e=ps.V4){return new mo(er.decode(t.data(),e),t.id(),t.isDelta())}function Xie(t){return new io(t.offset(),t.length())}function Kie(t){return new Bu(t.length(),t.nullCount())}function Jie(t){const e=[];for(let i,n=-1,s=-1,a=t.nodesLength();++n<a;)(i=t.nodes(n))&&(e[++s]=Bu.decode(i));return e}function Qie(t,e){const i=[];for(let n,s=-1,a=-1,c=t.buffersLength();++s<c;)(n=t.buffers(s))&&(e<ps.V4&&(n.bb_pos+=8*(s+1)),i[++a]=io.decode(n));return i}function Zie(t,e){const i=[];for(let n,s=-1,a=-1,c=t.fieldsLength();++s<c;)(n=t.fields(s))&&(i[++a]=Jt.decode(n,e));return i}function vD(t,e){const i=[];for(let n,s=-1,a=-1,c=t.childrenLength();++s<c;)(n=t.children(s))&&(i[++a]=Jt.decode(n,e));return i}function ene(t,e){let i,n,s,a,c,d;return!e||!(d=t.dictionary())?(s=SD(t,vD(t,e)),n=new Jt(t.name(),s,t.nullable(),W0(t))):e.has(i=fa(d.id()))?(a=(a=d.indexType())?ED(a):new $c,c=new Al(e.get(i),a,i,d.isOrdered()),n=new Jt(t.name(),c,t.nullable(),W0(t))):(a=(a=d.indexType())?ED(a):new $c,e.set(i,s=SD(t,vD(t,e))),c=new Al(s,a,i,d.isOrdered()),n=new Jt(t.name(),c,t.nullable(),W0(t))),n||null}function W0(t){const e=new Map;if(t)for(let i,n,s=-1,a=Math.trunc(t.customMetadataLength());++s<a;)(i=t.customMetadata(s))&&(n=i.key())!=null&&e.set(n,i.value());return e}function ED(t){return new Cn(t.isSigned(),t.bitWidth())}function SD(t,e){const i=t.typeType();switch(i){case bt.NONE:return new po;case bt.Null:return new po;case bt.Binary:return new wg;case bt.Utf8:return new up;case bt.Bool:return new hp;case bt.List:return new qf((e||[])[0]);case bt.Struct_:return new Qi(e||[])}switch(i){case bt.Int:{const n=t.type(new Fh);return new Cn(n.isSigned(),n.bitWidth())}case bt.FloatingPoint:{const n=t.type(new U0);return new Fl(n.precision())}case bt.Decimal:{const n=t.type(new hh);return new bg(n.scale(),n.precision(),n.bitWidth())}case bt.Date:{const n=t.type(new D0);return new zf(n.unit())}case bt.Time:{const n=t.type(new by);return new _o(n.unit(),n.bitWidth())}case bt.Timestamp:{const n=t.type(new Ty);return new Ml(n.unit(),n.timezone())}case bt.Interval:{const n=t.type(new z0);return new jf(n.unit())}case bt.Union:{const n=t.type(new Jd);return new Uc(n.mode(),n.typeIdsArray()||[],e||[])}case bt.FixedSizeBinary:{const n=t.type(new P0);return new Tg(n.byteWidth())}case bt.FixedSizeList:{const n=t.type(new $0);return new pp(n.listSize(),(e||[])[0])}case bt.Map:{const n=t.type(new j0);return new _p((e||[])[0],n.keysSorted())}}throw new Error(`Unrecognized type: "${bt[i]}" (${i})`)}function tne(t,e){const i=e.fields.map(a=>Jt.encode(t,a));La.startFieldsVector(t,i.length);const n=La.createFieldsVector(t,i),s=e.metadata&&e.metadata.size>0?La.createCustomMetadataVector(t,[...e.metadata].map(([a,c])=>{const d=t.createString(`${a}`),f=t.createString(`${c}`);return yr.startKeyValue(t),yr.addKey(t,d),yr.addValue(t,f),yr.endKeyValue(t)})):-1;return La.startSchema(t),La.addFields(t,n),La.addEndianness(t,one?wp.Little:wp.Big),s!==-1&&La.addCustomMetadata(t,s),La.endSchema(t)}function ine(t,e){let i=-1,n=-1,s=-1;const a=e.type;let c=e.typeId;Xe.isDictionary(a)?(c=a.dictionary.typeId,s=Ax.visit(a,t),n=Ax.visit(a.dictionary,t)):n=Ax.visit(a,t);const d=(a.children||[]).map(o=>Jt.encode(t,o)),f=ur.createChildrenVector(t,d),u=e.metadata&&e.metadata.size>0?ur.createCustomMetadataVector(t,[...e.metadata].map(([o,g])=>{const w=t.createString(`${o}`),m=t.createString(`${g}`);return yr.startKeyValue(t),yr.addKey(t,w),yr.addValue(t,m),yr.endKeyValue(t)})):-1;return e.name&&(i=t.createString(e.name)),ur.startField(t),ur.addType(t,n),ur.addTypeType(t,c),ur.addChildren(t,f),ur.addNullable(t,!!e.nullable),i!==-1&&ur.addName(t,i),s!==-1&&ur.addDictionary(t,s),u!==-1&&ur.addCustomMetadata(t,u),ur.endField(t)}function nne(t,e){const i=e.nodes||[],n=e.buffers||[];tl.startNodesVector(t,i.length);for(const c of i.slice().reverse())Bu.encode(t,c);const s=t.endVector();tl.startBuffersVector(t,n.length);for(const c of n.slice().reverse())io.encode(t,c);const a=t.endVector();return tl.startRecordBatch(t),tl.addLength(t,BigInt(e.length)),tl.addNodes(t,s),tl.addBuffers(t,a),tl.endRecordBatch(t)}function sne(t,e){const i=er.encode(t,e.data);return wh.startDictionaryBatch(t),wh.addId(t,BigInt(e.id)),wh.addIsDelta(t,e.isDelta),wh.addData(t,i),wh.endDictionaryBatch(t)}function rne(t,e){return Lj.createFieldNode(t,BigInt(e.length),BigInt(e.nullCount))}function ane(t,e){return Rj.createBuffer(t,BigInt(e.offset),BigInt(e.length))}const one=(()=>{const t=new ArrayBuffer(2);return new DataView(t).setInt16(0,256,!0),new Int16Array(t)[0]===256})(),gM=t=>`Expected ${Wt[t]} Message in stream, but was null or length 0.`,mM=t=>`Header pointer of flatbuffer-encoded ${Wt[t]} Message is null or length 0.`,Uj=(t,e)=>`Expected to read ${t} metadata bytes, but only read ${e}.`,zj=(t,e)=>`Expected to read ${t} bytes for message body, but only read ${e}.`;let wM=class{constructor(e){this.source=e instanceof Sg?e:new Sg(e)}[Symbol.iterator](){return this}next(){let e;return(e=this.readMetadataLength()).done||e.value===-1&&(e=this.readMetadataLength()).done||(e=this.readMetadata(e.value)).done?Si:e}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}readMessage(e){let i;if((i=this.next()).done)return null;if(e!=null&&i.value.headerType!==e)throw new Error(gM(e));return i.value}readMessageBody(e){if(e<=0)return new Uint8Array(0);const i=kt(this.source.read(e));if(i.byteLength<e)throw new Error(zj(e,i.byteLength));return i.byteOffset%8===0&&i.byteOffset+i.byteLength<=i.buffer.byteLength?i:i.slice()}readSchema(e=!1){const i=Wt.Schema,n=this.readMessage(i),s=n==null?void 0:n.header();if(e&&!s)throw new Error(mM(i));return s}readMetadataLength(){const e=this.source.read(hE),i=e&&new gp(e),n=(i==null?void 0:i.readInt32(0))||0;return{done:n===0,value:n}}readMetadata(e){const i=this.source.read(e);if(!i)return Si;if(i.byteLength<e)throw new Error(Uj(e,i.byteLength));return{done:!1,value:to.decode(i)}}},jj=class{constructor(e,i){this.source=e instanceof Tp?e:L8(e)?new CT(e,i):new Tp(e)}[Symbol.asyncIterator](){return this}next(){return ye(this,void 0,void 0,function*(){let e;return(e=yield this.readMetadataLength()).done||e.value===-1&&(e=yield this.readMetadataLength()).done||(e=yield this.readMetadata(e.value)).done?Si:e})}throw(e){return ye(this,void 0,void 0,function*(){return yield this.source.throw(e)})}return(e){return ye(this,void 0,void 0,function*(){return yield this.source.return(e)})}readMessage(e){return ye(this,void 0,void 0,function*(){let i;if((i=yield this.next()).done)return null;if(e!=null&&i.value.headerType!==e)throw new Error(gM(e));return i.value})}readMessageBody(e){return ye(this,void 0,void 0,function*(){if(e<=0)return new Uint8Array(0);const i=kt(yield this.source.read(e));if(i.byteLength<e)throw new Error(zj(e,i.byteLength));return i.byteOffset%8===0&&i.byteOffset+i.byteLength<=i.buffer.byteLength?i:i.slice()})}readSchema(e=!1){return ye(this,void 0,void 0,function*(){const i=Wt.Schema,n=yield this.readMessage(i),s=n==null?void 0:n.header();if(e&&!s)throw new Error(mM(i));return s})}readMetadataLength(){return ye(this,void 0,void 0,function*(){const e=yield this.source.read(hE),i=e&&new gp(e),n=(i==null?void 0:i.readInt32(0))||0;return{done:n===0,value:n}})}readMetadata(e){return ye(this,void 0,void 0,function*(){const i=yield this.source.read(e);if(!i)return Si;if(i.byteLength<e)throw new Error(Uj(e,i.byteLength));return{done:!1,value:to.decode(i)}})}},qj=class extends wM{constructor(e){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=e instanceof yD?e:new yD(e)}next(){const{_json:e}=this;if(!this._schema)return this._schema=!0,{done:!1,value:to.fromJSON(e.schema,Wt.Schema)};if(this._dictionaryIndex<e.dictionaries.length){const i=e.dictionaries[this._dictionaryIndex++];return this._body=i.data.columns,{done:!1,value:to.fromJSON(i,Wt.DictionaryBatch)}}if(this._batchIndex<e.batches.length){const i=e.batches[this._batchIndex++];return this._body=i.columns,{done:!1,value:to.fromJSON(i,Wt.RecordBatch)}}return this._body=[],Si}readMessageBody(e){return i(this._body);function i(n){return(n||[]).reduce((s,a)=>[...s,...a.VALIDITY&&[a.VALIDITY]||[],...a.TYPE&&[a.TYPE]||[],...a.OFFSET&&[a.OFFSET]||[],...a.DATA&&[a.DATA]||[],...i(a.children)],[])}}readMessage(e){let i;if((i=this.next()).done)return null;if(e!=null&&i.value.headerType!==e)throw new Error(gM(e));return i.value}readSchema(){const e=Wt.Schema,i=this.readMessage(e),n=i==null?void 0:i.header();if(!i||!n)throw new Error(mM(e));return n}};const hE=4,CI="ARROW1",Bg=new Uint8Array(CI.length);for(let t=0;t<CI.length;t+=1)Bg[t]=CI.codePointAt(t);function bM(t,e=0){for(let i=-1,n=Bg.length;++i<n;)if(Bg[i]!==t[e+i])return!1;return!0}const Sm=Bg.length,Gj=Sm+hE,lne=Sm*2+hE;let ud=class H0 extends H2{constructor(e){super(),this._impl=e}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(e){return this._impl.throw(e)}return(e){return this._impl.return(e)}cancel(){return this._impl.cancel()}reset(e){return this._impl.reset(e),this._DOMStream=void 0,this._nodeStream=void 0,this}open(e){const i=this._impl.open(e);return Pc(i)?i.then(()=>this):this}readRecordBatch(e){return this._impl.isFile()?this._impl.readRecordBatch(e):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return Ws.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return Ws.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,i){throw new Error('"throughDOM" not available in this environment')}static from(e){return e instanceof H0?e:vI(e)?fne(e):L8(e)?pne(e):Pc(e)?(()=>ye(this,void 0,void 0,function*(){return yield H0.from(yield e)}))():D8(e)||_2(e)||P8(e)||vu(e)?hne(new Tp(e)):une(new Sg(e))}static readAll(e){return e instanceof H0?e.isSync()?xD(e):BD(e):vI(e)||ArrayBuffer.isView(e)||u_(e)||R8(e)?xD(e):BD(e)}},Ep=class extends ud{constructor(e){super(e),this._impl=e}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return Ri(this,arguments,function*(){yield Be(yield*Mc(Qn(this[Symbol.iterator]())))})}},Ig=class extends ud{constructor(e){super(e),this._impl=e}readAll(){var e,i,n,s;return ye(this,void 0,void 0,function*(){const a=new Array;try{for(var c=!0,d=Qn(this),f;f=yield d.next(),e=f.done,!e;){s=f.value,c=!1;try{const u=s;a.push(u)}finally{c=!0}}}catch(u){i={error:u}}finally{try{!c&&!e&&(n=d.return)&&(yield n.call(d))}finally{if(i)throw i.error}}return a})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}},pE=class extends Ep{constructor(e){super(e),this._impl=e}},Vj=class extends Ig{constructor(e){super(e),this._impl=e}},Wj=class{get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}constructor(e=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=e}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(e){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=e,this.dictionaries=new Map,this}_loadRecordBatch(e,i){const n=this._loadVectors(e,i,this.schema.fields),s=Ye({type:new Qi(this.schema.fields),length:e.length,children:n});return new hn(this.schema,s)}_loadDictionaryBatch(e,i){const{id:n,isDelta:s}=e,{dictionaries:a,schema:c}=this,d=a.get(n);if(s||!d){const f=c.dictionaries.get(n),u=this._loadVectors(e.data,i,[f]);return(d&&s?d.concat(new Ke(u)):new Ke(u)).memoize()}return d.memoize()}_loadVectors(e,i,n){return new cj(i,e.nodes,e.buffers,this.dictionaries).visitMany(n)}},PT=class extends Wj{constructor(e,i){super(i),this._reader=vI(e)?new qj(this._handle=e):new wM(this._handle=e)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(e){return this.closed||(this.autoDestroy=Yj(this,e),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(e):Si}return(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(e):Si}next(){if(this.closed)return Si;let e;const{_reader:i}=this;for(;e=this._readNextMessageAndValidate();)if(e.isSchema())this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;const n=e.header(),s=i.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(n,s)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;const n=e.header(),s=i.readMessageBody(e.bodyLength),a=this._loadDictionaryBatch(n,s);this.dictionaries.set(n.id,a)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new yM(this.schema)}):this.return()}_readNextMessageAndValidate(e){return this._reader.readMessage(e)}},$T=class extends Wj{constructor(e,i){super(i),this._reader=new jj(this._handle=e)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return ye(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(e){return ye(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=Yj(this,e),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(e){return ye(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(e):Si})}return(e){return ye(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(e):Si})}next(){return ye(this,void 0,void 0,function*(){if(this.closed)return Si;let e;const{_reader:i}=this;for(;e=yield this._readNextMessageAndValidate();)if(e.isSchema())yield this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;const n=e.header(),s=yield i.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(n,s)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;const n=e.header(),s=yield i.readMessageBody(e.bodyLength),a=this._loadDictionaryBatch(n,s);this.dictionaries.set(n.id,a)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new yM(this.schema)}):yield this.return()})}_readNextMessageAndValidate(e){return ye(this,void 0,void 0,function*(){return yield this._reader.readMessage(e)})}},Hj=class extends PT{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(e,i){super(e instanceof gD?e:new gD(e),i)}isSync(){return!0}isFile(){return!0}open(e){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const i of this._footer.dictionaryBatches())i&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(e)}readRecordBatch(e){var i;if(this.closed)return null;this._footer||this.open();const n=(i=this._footer)===null||i===void 0?void 0:i.getRecordBatch(e);if(n&&this._handle.seek(n.offset)){const s=this._reader.readMessage(Wt.RecordBatch);if(s!=null&&s.isRecordBatch()){const a=s.header(),c=this._reader.readMessageBody(s.bodyLength);return this._loadRecordBatch(a,c)}}return null}_readDictionaryBatch(e){var i;const n=(i=this._footer)===null||i===void 0?void 0:i.getDictionaryBatch(e);if(n&&this._handle.seek(n.offset)){const s=this._reader.readMessage(Wt.DictionaryBatch);if(s!=null&&s.isDictionaryBatch()){const a=s.header(),c=this._reader.readMessageBody(s.bodyLength),d=this._loadDictionaryBatch(a,c);this.dictionaries.set(a.id,d)}}}_readFooter(){const{_handle:e}=this,i=e.size-Gj,n=e.readInt32(i),s=e.readAt(i-n,n);return Eg.decode(s)}_readNextMessageAndValidate(e){var i;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=(i=this._footer)===null||i===void 0?void 0:i.getRecordBatch(this._recordBatchIndex);if(n&&this._handle.seek(n.offset))return this._reader.readMessage(e)}return null}},cne=class extends $T{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(e,...i){const n=typeof i[0]!="number"?i.shift():void 0,s=i[0]instanceof Map?i.shift():void 0;super(e instanceof CT?e:new CT(e,n),s)}isFile(){return!0}isAsync(){return!0}open(e){const i=Object.create(null,{open:{get:()=>super.open}});return ye(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const n of this._footer.dictionaryBatches())n&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield i.open.call(this,e)})}readRecordBatch(e){var i;return ye(this,void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());const n=(i=this._footer)===null||i===void 0?void 0:i.getRecordBatch(e);if(n&&(yield this._handle.seek(n.offset))){const s=yield this._reader.readMessage(Wt.RecordBatch);if(s!=null&&s.isRecordBatch()){const a=s.header(),c=yield this._reader.readMessageBody(s.bodyLength);return this._loadRecordBatch(a,c)}}return null})}_readDictionaryBatch(e){var i;return ye(this,void 0,void 0,function*(){const n=(i=this._footer)===null||i===void 0?void 0:i.getDictionaryBatch(e);if(n&&(yield this._handle.seek(n.offset))){const s=yield this._reader.readMessage(Wt.DictionaryBatch);if(s!=null&&s.isDictionaryBatch()){const a=s.header(),c=yield this._reader.readMessageBody(s.bodyLength),d=this._loadDictionaryBatch(a,c);this.dictionaries.set(a.id,d)}}})}_readFooter(){return ye(this,void 0,void 0,function*(){const{_handle:e}=this;e._pending&&(yield e._pending);const i=e.size-Gj,n=yield e.readInt32(i),s=yield e.readAt(i-n,n);return Eg.decode(s)})}_readNextMessageAndValidate(e){return ye(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const i=this._footer.getRecordBatch(this._recordBatchIndex);if(i&&(yield this._handle.seek(i.offset)))return yield this._reader.readMessage(e)}return null})}},dne=class extends PT{constructor(e,i){super(e,i)}_loadVectors(e,i,n){return new mie(i,e.nodes,e.buffers,this.dictionaries).visitMany(n)}};function Yj(t,e){return e&&typeof e.autoDestroy=="boolean"?e.autoDestroy:t.autoDestroy}function*xD(t){const e=ud.from(t);try{if(!e.open({autoDestroy:!1}).closed)do yield e;while(!e.reset().open().closed)}finally{e.cancel()}}function BD(t){return Ri(this,arguments,function*(){const i=yield Be(ud.from(t));try{if(!(yield Be(i.open({autoDestroy:!1}))).closed)do yield yield Be(i);while(!(yield Be(i.reset().open())).closed)}finally{yield Be(i.cancel())}})}function fne(t){return new Ep(new dne(t))}function une(t){const e=t.peek(Sm+7&-8);return e&&e.byteLength>=4?bM(e)?new pE(new Hj(t.read())):new Ep(new PT(t)):new Ep(new PT(function*(){}()))}function hne(t){return ye(this,void 0,void 0,function*(){const e=yield t.peek(Sm+7&-8);return e&&e.byteLength>=4?bM(e)?new pE(new Hj(yield t.read())):new Ig(new $T(t)):new Ig(new $T(function(){return Ri(this,arguments,function*(){})}()))})}function pne(t){return ye(this,void 0,void 0,function*(){const{size:e}=yield t.stat(),i=new CT(t,e);return e>=lne&&bM(yield i.readAt(0,Sm+7&-8))?new Vj(new cne(i)):new Ig(new $T(i))})}let on=class Xj extends St{static assemble(...e){const i=s=>s.flatMap(a=>Array.isArray(a)?i(a):a instanceof hn?a.data.children:a.data),n=new Xj;return n.visitMany(i(e)),n}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(e){if(e instanceof Ke)return this.visitMany(e.data),this;const{type:i}=e;if(!Xe.isDictionary(i)){const{length:n,nullCount:s}=e;if(n>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");Xe.isNull(i)||sa.call(this,s<=0?new Uint8Array(0):oE(e.offset,n,e.nullBitmap)),this.nodes.push(new Bu(n,s))}return super.visit(e)}visitNull(e){return this}visitDictionary(e){return this.visit(e.clone(e.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}};function sa(t){const e=t.byteLength+7&-8;return this.buffers.push(t),this.bufferRegions.push(new io(this._byteLength,e)),this._byteLength+=e,this}function _ne(t){const{type:e,length:i,typeIds:n,valueOffsets:s}=t;if(sa.call(this,n),e.mode===an.Sparse)return RI.call(this,t);if(e.mode===an.Dense){if(t.offset<=0)return sa.call(this,s),RI.call(this,t);{const a=n.reduce((o,g)=>Math.max(o,g),n[0]),c=new Int32Array(a+1),d=new Int32Array(a+1).fill(-1),f=new Int32Array(i),u=tE(-s[0],i,s);for(let o,g,w=-1;++w<i;)(g=d[o=n[w]])===-1&&(g=d[o]=u[o]),f[w]=u[w]-g,++c[o];sa.call(this,f);for(let o,g=-1,w=e.children.length;++g<w;)if(o=t.children[g]){const m=e.typeIds[g],l=Math.min(i,c[m]);this.visit(o.slice(d[m],l))}}}return this}function yne(t){let e;return t.nullCount>=t.length?sa.call(this,new Uint8Array(0)):(e=t.values)instanceof Uint8Array?sa.call(this,oE(t.offset,t.length,e)):sa.call(this,vg(t.values))}function hd(t){return sa.call(this,t.values.subarray(0,t.length*t.stride))}function Kj(t){const{length:e,values:i,valueOffsets:n}=t,s=n[0],a=n[e],c=Math.min(a-s,i.byteLength-s);return sa.call(this,tE(-n[0],e,n)),sa.call(this,i.subarray(s,s+c)),this}function TM(t){const{length:e,valueOffsets:i}=t;return i&&sa.call(this,tE(i[0],e,i)),this.visit(t.children[0])}function RI(t){return this.visitMany(t.type.children.map((e,i)=>t.children[i]).filter(Boolean))[0]}on.prototype.visitBool=yne;on.prototype.visitInt=hd;on.prototype.visitFloat=hd;on.prototype.visitUtf8=Kj;on.prototype.visitBinary=Kj;on.prototype.visitFixedSizeBinary=hd;on.prototype.visitDate=hd;on.prototype.visitTimestamp=hd;on.prototype.visitTime=hd;on.prototype.visitDecimal=hd;on.prototype.visitList=TM;on.prototype.visitStruct=RI;on.prototype.visitUnion=_ne;on.prototype.visitInterval=hd;on.prototype.visitFixedSizeList=TM;on.prototype.visitMap=TM;class gne extends St{visit(e){return e==null?void 0:super.visit(e)}visitNull({typeId:e}){return{name:bt[e].toLowerCase()}}visitInt({typeId:e,bitWidth:i,isSigned:n}){return{name:bt[e].toLowerCase(),bitWidth:i,isSigned:n}}visitFloat({typeId:e,precision:i}){return{name:bt[e].toLowerCase(),precision:Wi[i]}}visitBinary({typeId:e}){return{name:bt[e].toLowerCase()}}visitBool({typeId:e}){return{name:bt[e].toLowerCase()}}visitUtf8({typeId:e}){return{name:bt[e].toLowerCase()}}visitDecimal({typeId:e,scale:i,precision:n,bitWidth:s}){return{name:bt[e].toLowerCase(),scale:i,precision:n,bitWidth:s}}visitDate({typeId:e,unit:i}){return{name:bt[e].toLowerCase(),unit:Ss[i]}}visitTime({typeId:e,unit:i,bitWidth:n}){return{name:bt[e].toLowerCase(),unit:lt[i],bitWidth:n}}visitTimestamp({typeId:e,timezone:i,unit:n}){return{name:bt[e].toLowerCase(),unit:lt[n],timezone:i}}visitInterval({typeId:e,unit:i}){return{name:bt[e].toLowerCase(),unit:xr[i]}}visitList({typeId:e}){return{name:bt[e].toLowerCase()}}visitStruct({typeId:e}){return{name:bt[e].toLowerCase()}}visitUnion({typeId:e,mode:i,typeIds:n}){return{name:bt[e].toLowerCase(),mode:an[i],typeIds:[...n]}}visitDictionary(e){return this.visit(e.dictionary)}visitFixedSizeBinary({typeId:e,byteWidth:i}){return{name:bt[e].toLowerCase(),byteWidth:i}}visitFixedSizeList({typeId:e,listSize:i}){return{name:bt[e].toLowerCase(),listSize:i}}visitMap({typeId:e,keysSorted:i}){return{name:bt[e].toLowerCase(),keysSorted:i}}}class _E extends St{static assemble(...e){const i=new _E;return e.map(({schema:n,data:s})=>i.visitMany(n.fields,s.children))}visit({name:e},i){const{length:n}=i,{offset:s,nullCount:a,nullBitmap:c}=i,d=Xe.isDictionary(i.type)?i.type.indices:i.type,f=Object.assign([],i.buffers,{[qr.VALIDITY]:void 0});return Object.assign({name:e,count:n,VALIDITY:Xe.isNull(d)?void 0:a<=0?Array.from({length:n},()=>1):[...new yp(c,s,n,null,q2)]},super.visit(i.clone(d,s,n,0,f)))}visitNull(){return{}}visitBool({values:e,offset:i,length:n}){return{DATA:[...new yp(e,i,n,null,aE)]}}visitInt(e){return{DATA:e.type.bitWidth<64?[...e.values]:[...U_(e.values,2)]}}visitFloat(e){return{DATA:[...e.values]}}visitUtf8(e){return{DATA:[...new Ke([e])],OFFSET:[...e.valueOffsets]}}visitBinary(e){return{DATA:[...ID(new Ke([e]))],OFFSET:[...e.valueOffsets]}}visitFixedSizeBinary(e){return{DATA:[...ID(new Ke([e]))]}}visitDate(e){return{DATA:e.type.unit===Ss.DAY?[...e.values]:[...U_(e.values,2)]}}visitTimestamp(e){return{DATA:[...U_(e.values,2)]}}visitTime(e){return{DATA:e.type.unit<lt.MICROSECOND?[...e.values]:[...U_(e.values,2)]}}visitDecimal(e){return{DATA:[...U_(e.values,4)]}}visitList(e){return{OFFSET:[...e.valueOffsets],children:this.visitMany(e.type.children,e.children)}}visitStruct(e){return{children:this.visitMany(e.type.children,e.children)}}visitUnion(e){return{TYPE:[...e.typeIds],OFFSET:e.type.mode===an.Dense?[...e.valueOffsets]:void 0,children:this.visitMany(e.type.children,e.children)}}visitInterval(e){return{DATA:[...e.values]}}visitFixedSizeList(e){return{children:this.visitMany(e.type.children,e.children)}}visitMap(e){return{OFFSET:[...e.valueOffsets],children:this.visitMany(e.type.children,e.children)}}}function*ID(t){for(const e of t)yield e.reduce((i,n)=>`${i}${("0"+(n&255).toString(16)).slice(-2)}`,"").toUpperCase()}function*U_(t,e){const i=new Uint32Array(t.buffer);for(let n=-1,s=i.length/e;++n<s;)yield`${g2.new(i.subarray((n+0)*e,(n+1)*e),!1)}`}let xm=class extends H2{static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,i){throw new Error('"throughDOM" not available in this environment')}constructor(e){super(),this._position=0,this._started=!1,this._sink=new Hh,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Es(e)||(e={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof e.autoDestroy=="boolean"?e.autoDestroy:!0,this._writeLegacyIpcFormat=typeof e.writeLegacyIpcFormat=="boolean"?e.writeLegacyIpcFormat:!1}toString(e=!1){return this._sink.toString(e)}toUint8Array(e=!1){return this._sink.toUint8Array(e)}writeAll(e){return Pc(e)?e.then(i=>this.writeAll(i)):vu(e)?BM(this,e):xM(this,e)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(e){return this._sink.toDOMStream(e)}toNodeStream(e){return this._sink.toNodeStream(e)}close(){return this.reset()._sink.close()}abort(e){return this.reset()._sink.abort(e)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(e=this._sink,i=null){return e===this._sink||e instanceof Hh?this._sink=e:(this._sink=new Hh,e&&KZ(e)?this.toDOMStream({type:"bytes"}).pipeTo(e):e&&JZ(e)&&this.toNodeStream({objectMode:!1}).pipe(e)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!i||!RT(i,this._schema))&&(i==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=i,this._writeSchema(i))),this}write(e){let i=null;if(this._sink){if(e==null)return this.finish()&&void 0;if(e instanceof Ir&&!(i=e.schema))return this.finish()&&void 0;if(e instanceof hn&&!(i=e.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(i&&!RT(i,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,i)}e instanceof hn?e instanceof yM||this._writeRecordBatch(e):e instanceof Ir?this.writeAll(e.batches):u_(e)&&this.writeAll(e)}_writeMessage(e,i=8){const n=i-1,s=to.encode(e),a=s.byteLength,c=this._writeLegacyIpcFormat?4:8,d=a+c+n&~n,f=d-a-c;return e.headerType===Wt.RecordBatch?this._recordBatchBlocks.push(new zc(d,e.bodyLength,this._position)):e.headerType===Wt.DictionaryBatch&&this._dictionaryBlocks.push(new zc(d,e.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(d-c)),a>0&&this._write(s),this._writePadding(f)}_write(e){if(this._started){const i=kt(e);i&&i.byteLength>0&&(this._sink.write(i),this._position+=i.byteLength)}return this}_writeSchema(e){return this._writeMessage(to.from(e))}_writeFooter(e){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(Bg)}_writePadding(e){return e>0?this._write(new Uint8Array(e)):this}_writeRecordBatch(e){const{byteLength:i,nodes:n,bufferRegions:s,buffers:a}=on.assemble(e),c=new er(e.numRows,n,s),d=to.from(c,i);return this._writeDictionaries(e)._writeMessage(d)._writeBodyBuffers(a)}_writeDictionaryBatch(e,i,n=!1){this._dictionaryDeltaOffsets.set(i,e.length+(this._dictionaryDeltaOffsets.get(i)||0));const{byteLength:s,nodes:a,bufferRegions:c,buffers:d}=on.assemble(new Ke([e])),f=new er(e.length,a,c),u=new mo(f,i,n),o=to.from(u,s);return this._writeMessage(o)._writeBodyBuffers(d)}_writeBodyBuffers(e){let i,n,s;for(let a=-1,c=e.length;++a<c;)(i=e[a])&&(n=i.byteLength)>0&&(this._write(i),(s=(n+7&-8)-n)>0&&this._writePadding(s));return this}_writeDictionaries(e){for(let[i,n]of e.dictionaries){let s=this._dictionaryDeltaOffsets.get(i)||0;if(s===0||(n=n==null?void 0:n.slice(s)).length>0)for(const a of n.data)this._writeDictionaryBatch(a,i,s>0),s+=a.length}return this}},vM=class Jj extends xm{static writeAll(e,i){const n=new Jj(i);return Pc(e)?e.then(s=>n.writeAll(s)):vu(e)?BM(n,e):xM(n,e)}},EM=class Qj extends xm{static writeAll(e){const i=new Qj;return Pc(e)?e.then(n=>i.writeAll(n)):vu(e)?BM(i,e):xM(i,e)}constructor(){super(),this._autoDestroy=!0}_writeSchema(e){return this._writeMagic()._writePadding(2)}_writeFooter(e){const i=Eg.encode(new Eg(e,ps.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(e)._write(i)._write(Int32Array.of(i.byteLength))._writeMagic()}};class SM extends xm{static writeAll(e){return new SM().writeAll(e)}constructor(){super(),this._autoDestroy=!0,this._recordBatches=[],this._dictionaries=[]}_writeMessage(){return this}_writeFooter(e){return this}_writeSchema(e){return this._write(`{
  "schema": ${JSON.stringify({fields:e.fields.map(i=>Zj(i))},null,2)}`)}_writeDictionaries(e){return e.dictionaries.size>0&&this._dictionaries.push(e),this}_writeDictionaryBatch(e,i,n=!1){return this._dictionaryDeltaOffsets.set(i,e.length+(this._dictionaryDeltaOffsets.get(i)||0)),this._write(this._dictionaryBlocks.length===0?"    ":`,
    `),this._write(`${mne(e,i,n)}`),this._dictionaryBlocks.push(new zc(0,0,0)),this}_writeRecordBatch(e){return this._writeDictionaries(e),this._recordBatches.push(e),this}close(){if(this._dictionaries.length>0){this._write(`,
  "dictionaries": [
`);for(const e of this._dictionaries)super._writeDictionaries(e);this._write(`
  ]`)}if(this._recordBatches.length>0){for(let e=-1,i=this._recordBatches.length;++e<i;)this._write(e===0?`,
  "batches": [
    `:`,
    `),this._write(`${wne(this._recordBatches[e])}`),this._recordBatchBlocks.push(new zc(0,0,0));this._write(`
  ]`)}return this._schema&&this._write(`
}`),this._dictionaries=[],this._recordBatches=[],super.close()}}function xM(t,e){let i=e;e instanceof Ir&&(i=e.batches,t.reset(void 0,e.schema));for(const n of i)t.write(n);return t.finish()}function BM(t,e){var i,n,s,a,c,d,f;return ye(this,void 0,void 0,function*(){try{for(i=!0,n=Qn(e);s=yield n.next(),a=s.done,!a;){f=s.value,i=!1;try{const u=f;t.write(u)}finally{i=!0}}}catch(u){c={error:u}}finally{try{!i&&!a&&(d=n.return)&&(yield d.call(n))}finally{if(c)throw c.error}}return t.finish()})}function Zj({name:t,type:e,nullable:i}){const n=new gne;return{name:t,nullable:i,type:n.visit(e),children:(e.children||[]).map(s=>Zj(s)),dictionary:Xe.isDictionary(e)?{id:e.id,isOrdered:e.isOrdered,indexType:n.visit(e.indices)}:void 0}}function mne(t,e,i=!1){const[n]=_E.assemble(new hn({[e]:t}));return JSON.stringify({id:e,isDelta:i,data:{count:t.length,columns:n}},null,2)}function wne(t){const[e]=_E.assemble(t);return JSON.stringify({count:t.numRows,columns:e},null,2)}function bne(t,e){if(vu(t))return vne(t,e);if(u_(t))return Tne(t,e);throw new Error("toDOMStream() must be called with an Iterable or AsyncIterable")}function Tne(t,e){let i=null;const n=(e==null?void 0:e.type)==="bytes"||!1,s=(e==null?void 0:e.highWaterMark)||Math.pow(2,24);return new ReadableStream(Object.assign(Object.assign({},e),{start(c){a(c,i||(i=t[Symbol.iterator]()))},pull(c){i?a(c,i):c.close()},cancel(){(i!=null&&i.return&&i.return()||!0)&&(i=null)}}),Object.assign({highWaterMark:n?s:void 0},e));function a(c,d){let f,u=null,o=c.desiredSize||null;for(;!(u=d.next(n?o:null)).done;)if(ArrayBuffer.isView(u.value)&&(f=kt(u.value))&&(o!=null&&n&&(o=o-f.byteLength+1),u.value=f),c.enqueue(u.value),o!=null&&--o<=0)return;c.close()}}function vne(t,e){let i=null;const n=(e==null?void 0:e.type)==="bytes"||!1,s=(e==null?void 0:e.highWaterMark)||Math.pow(2,24);return new ReadableStream(Object.assign(Object.assign({},e),{start(c){return ye(this,void 0,void 0,function*(){yield a(c,i||(i=t[Symbol.asyncIterator]()))})},pull(c){return ye(this,void 0,void 0,function*(){i?yield a(c,i):c.close()})},cancel(){return ye(this,void 0,void 0,function*(){(i!=null&&i.return&&(yield i.return())||!0)&&(i=null)})}}),Object.assign({highWaterMark:n?s:void 0},e));function a(c,d){return ye(this,void 0,void 0,function*(){let f,u=null,o=c.desiredSize||null;for(;!(u=yield d.next(n?o:null)).done;)if(ArrayBuffer.isView(u.value)&&(f=kt(u.value))&&(o!=null&&n&&(o=o-f.byteLength+1),u.value=f),c.enqueue(u.value),o!=null&&--o<=0)return;c.close()})}}function Ene(t){return new Sne(t)}class Sne{constructor(e){this._numChunks=0,this._finished=!1,this._bufferedSize=0;const{["readableStrategy"]:i,["writableStrategy"]:n,["queueingStrategy"]:s="count"}=e,a=WZ(e,["readableStrategy","writableStrategy","queueingStrategy"]);this._controller=null,this._builder=Gf(a),this._getSize=s!=="bytes"?kD:FD;const{["highWaterMark"]:c=s==="bytes"?Math.pow(2,14):1e3}=Object.assign({},i),{["highWaterMark"]:d=s==="bytes"?Math.pow(2,14):1e3}=Object.assign({},n);this.readable=new ReadableStream({cancel:()=>{this._builder.clear()},pull:f=>{this._maybeFlush(this._builder,this._controller=f)},start:f=>{this._maybeFlush(this._builder,this._controller=f)}},{highWaterMark:c,size:s!=="bytes"?kD:FD}),this.writable=new WritableStream({abort:()=>{this._builder.clear()},write:()=>{this._maybeFlush(this._builder,this._controller)},close:()=>{this._maybeFlush(this._builder.finish(),this._controller)}},{highWaterMark:d,size:f=>this._writeValueAndReturnChunkSize(f)})}_writeValueAndReturnChunkSize(e){const i=this._bufferedSize;return this._bufferedSize=this._getSize(this._builder.append(e)),this._bufferedSize-i}_maybeFlush(e,i){i!=null&&(this._bufferedSize>=i.desiredSize&&++this._numChunks&&this._enqueue(i,e.toVector()),e.finished&&((e.length>0||this._numChunks===0)&&++this._numChunks&&this._enqueue(i,e.toVector()),!this._finished&&(this._finished=!0)&&this._enqueue(i,null)))}_enqueue(e,i){this._bufferedSize=0,this._controller=null,i==null?e.close():e.enqueue(i)}}const kD=t=>{var e;return(e=t==null?void 0:t.length)!==null&&e!==void 0?e:0},FD=t=>{var e;return(e=t==null?void 0:t.byteLength)!==null&&e!==void 0?e:0};function IM(t,e){const i=new Hh;let n=null;const s=new ReadableStream({cancel(){return ye(this,void 0,void 0,function*(){yield i.close()})},start(d){return ye(this,void 0,void 0,function*(){yield c(d,n||(n=yield a()))})},pull(d){return ye(this,void 0,void 0,function*(){n?yield c(d,n):d.close()})}});return{writable:new WritableStream(i,Object.assign({highWaterMark:Math.pow(2,14)},t)),readable:s};function a(){return ye(this,void 0,void 0,function*(){return yield(yield ud.from(i)).open(e)})}function c(d,f){return ye(this,void 0,void 0,function*(){let u=d.desiredSize,o=null;for(;!(o=yield f.next()).done;)if(d.enqueue(o.value),u!=null&&--u<=0)return;d.close()})}}function kM(t,e){const i=new this(t),n=new Tp(i),s=new ReadableStream({cancel(){return ye(this,void 0,void 0,function*(){yield n.cancel()})},pull(c){return ye(this,void 0,void 0,function*(){yield a(c)})},start(c){return ye(this,void 0,void 0,function*(){yield a(c)})}},Object.assign({highWaterMark:Math.pow(2,14)},e));return{writable:new WritableStream(i,t),readable:s};function a(c){return ye(this,void 0,void 0,function*(){let d=null,f=c.desiredSize;for(;d=yield n.read(f||null);)if(c.enqueue(d),f!=null&&(f-=d.byteLength)<=0)return;c.close()})}}function e5(t){const e=ud.from(t);return Pc(e)?e.then(i=>e5(i)):e.isAsync()?e.readAll().then(i=>new Ir(i)):new Ir(e.readAll())}function xne(t,e="stream"){return(e==="stream"?vM:EM).writeAll(t).toUint8Array(!0)}const Bne=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Oee),gie),Xte),Yee),xee),Hte),{compareSchemas:RT,compareFields:kie,compareTypes:Mj});Ws.toDOMStream=bne;Dn.throughDOM=Ene;ud.throughDOM=IM;pE.throughDOM=IM;Ep.throughDOM=IM;xm.throughDOM=kM;EM.throughDOM=kM;vM.throughDOM=kM;const Ine=Object.freeze(Object.defineProperty({__proto__:null,AsyncByteQueue:Hh,AsyncByteStream:Tp,AsyncMessageReader:jj,AsyncRecordBatchFileReader:Vj,AsyncRecordBatchStreamReader:Ig,Binary:wg,BinaryBuilder:K2,Bool:hp,BoolBuilder:dj,get BufferType(){return qr},Builder:Dn,ByteStream:Sg,Data:ri,DataType:Xe,DateBuilder:mm,DateDay:Nee,DateDayBuilder:J2,DateMillisecond:hz,DateMillisecondBuilder:Q2,get DateUnit(){return Ss},Date_:zf,Decimal:bg,DecimalBuilder:Z2,DenseUnion:Gee,DenseUnionBuilder:Fj,Dictionary:Al,DictionaryBuilder:fj,Field:Jt,FixedSizeBinary:Tg,FixedSizeBinaryBuilder:eM,FixedSizeList:pp,FixedSizeListBuilder:uj,Float:Fl,Float16:uz,Float16Builder:hj,Float32:S2,Float32Builder:pj,Float64:nE,Float64Builder:_j,FloatBuilder:wm,Int:Cn,Int16:w2,Int16Builder:gj,Int32:$c,Int32Builder:mj,Int64:iE,Int64Builder:wj,Int8:m2,Int8Builder:yj,IntBuilder:Oo,Interval:jf,IntervalBuilder:bm,IntervalDayTime:jee,IntervalDayTimeBuilder:tM,get IntervalUnit(){return xr},IntervalYearMonth:qee,IntervalYearMonthBuilder:iM,JSONMessageReader:qj,List:qf,ListBuilder:Sj,MapBuilder:xj,MapRow:ym,Map_:_p,Message:to,get MessageHeader(){return xg},MessageReader:wM,get MetadataVersion(){return ps},Null:po,NullBuilder:Bj,get Precision(){return Wi},RecordBatch:hn,RecordBatchFileReader:pE,RecordBatchFileWriter:EM,RecordBatchJSONWriter:SM,RecordBatchReader:ud,RecordBatchStreamReader:Ep,RecordBatchStreamWriter:vM,RecordBatchWriter:xm,Schema:yi,SparseUnion:Vee,SparseUnionBuilder:kj,Struct:Qi,StructBuilder:Ij,StructRow:sE,Table:Ir,Time:_o,TimeBuilder:xu,TimeMicrosecond:Lee,TimeMicrosecondBuilder:cM,TimeMillisecond:Ree,TimeMillisecondBuilder:lM,TimeNanosecond:Dee,TimeNanosecondBuilder:dM,TimeSecond:Cee,TimeSecondBuilder:oM,get TimeUnit(){return lt},Timestamp:Ml,TimestampBuilder:Su,TimestampMicrosecond:Uee,TimestampMicrosecondBuilder:rM,TimestampMillisecond:$ee,TimestampMillisecondBuilder:sM,TimestampNanosecond:zee,TimestampNanosecondBuilder:aM,TimestampSecond:Pee,TimestampSecondBuilder:nM,get Type(){return ie},Uint16:T2,Uint16Builder:Tj,Uint32:v2,Uint32Builder:vj,Uint64:E2,Uint64Builder:Ej,Uint8:b2,Uint8Builder:bj,Union:Uc,UnionBuilder:fE,get UnionMode(){return an},Utf8:up,Utf8Builder:fM,Vector:Ke,Visitor:St,builderThroughAsyncIterable:Mie,builderThroughIterable:Aj,makeBuilder:Gf,makeData:Ye,makeTable:Nie,makeVector:lE,tableFromArrays:Cie,tableFromIPC:e5,tableFromJSON:Fie,tableToIPC:xne,util:Bne,vectorFromArray:_M},Symbol.toStringTag,{value:"Module"}));function kne(t,e,i){return Math.ceil((e-t)/(3.49*i))}const Fne=Float64Array,Ox=Float64Array;var Mne=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Ane(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var i=function n(){if(this instanceof n){var s=[null];s.push.apply(s,arguments);var a=Function.bind.apply(e,s);return new a}return e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(i,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),i}function One(t){for(var e=new Array(t),i=0;i<t;++i)e[i]=i;return e}var Nne=One;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Cne=function(t){return t!=null&&(t5(t)||Rne(t)||!!t._isBuffer)};function t5(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function Rne(t){return typeof t.readFloatLE=="function"&&typeof t.slice=="function"&&t5(t.slice(0,0))}var Lne=Nne,Dne=Cne,Pne=typeof Float64Array<"u";function $ne(t,e){return t[0]-e[0]}function Une(){var t=this.stride,e=new Array(t.length),i;for(i=0;i<e.length;++i)e[i]=[Math.abs(t[i]),i];e.sort($ne);var n=new Array(e.length);for(i=0;i<n.length;++i)n[i]=e[i][1];return n}function zne(t,e){var i=["View",e,"d",t].join("");e<0&&(i="View_Nil"+t);var n=t==="generic";if(e===-1){var s="function "+i+"(a){this.data=a;};var proto="+i+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+i+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+i+"(a){return new "+i+"(a);}",T=new Function(s);return T()}else if(e===0){var s="function "+i+"(a,d) {this.data = a;this.offset = d};var proto="+i+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+i+"_copy() {return new "+i+"(this.data,this.offset)};proto.pick=function "+i+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+i+"_get(){return "+(n?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+i+"_set(v){return "+(n?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+i+"(a,b,c,d){return new "+i+"(a,d)}",T=new Function("TrivialArray",s);return T(UT[t][0])}var s=["'use strict'"],a=Lne(e),c=a.map(function(b){return"i"+b}),d="this.offset+"+a.map(function(b){return"this.stride["+b+"]*i"+b}).join("+"),f=a.map(function(b){return"b"+b}).join(","),u=a.map(function(b){return"c"+b}).join(",");s.push("function "+i+"(a,"+f+","+u+",d){this.data=a","this.shape=["+f+"]","this.stride=["+u+"]","this.offset=d|0}","var proto="+i+".prototype","proto.dtype='"+t+"'","proto.dimension="+e),s.push("Object.defineProperty(proto,'size',{get:function "+i+"_size(){return "+a.map(function(b){return"this.shape["+b+"]"}).join("*"),"}})"),e===1?s.push("proto.order=[0]"):(s.push("Object.defineProperty(proto,'order',{get:"),e<4?(s.push("function "+i+"_order(){"),e===2?s.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):e===3&&s.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):s.push("ORDER})")),s.push("proto.set=function "+i+"_set("+c.join(",")+",v){"),n?s.push("return this.data.set("+d+",v)}"):s.push("return this.data["+d+"]=v}"),s.push("proto.get=function "+i+"_get("+c.join(",")+"){"),n?s.push("return this.data.get("+d+")}"):s.push("return this.data["+d+"]}"),s.push("proto.index=function "+i+"_index(",c.join(),"){return "+d+"}"),s.push("proto.hi=function "+i+"_hi("+c.join(",")+"){return new "+i+"(this.data,"+a.map(function(b){return["(typeof i",b,"!=='number'||i",b,"<0)?this.shape[",b,"]:i",b,"|0"].join("")}).join(",")+","+a.map(function(b){return"this.stride["+b+"]"}).join(",")+",this.offset)}");var o=a.map(function(b){return"a"+b+"=this.shape["+b+"]"}),g=a.map(function(b){return"c"+b+"=this.stride["+b+"]"});s.push("proto.lo=function "+i+"_lo("+c.join(",")+"){var b=this.offset,d=0,"+o.join(",")+","+g.join(","));for(var w=0;w<e;++w)s.push("if(typeof i"+w+"==='number'&&i"+w+">=0){d=i"+w+"|0;b+=c"+w+"*d;a"+w+"-=d}");s.push("return new "+i+"(this.data,"+a.map(function(b){return"a"+b}).join(",")+","+a.map(function(b){return"c"+b}).join(",")+",b)}"),s.push("proto.step=function "+i+"_step("+c.join(",")+"){var "+a.map(function(b){return"a"+b+"=this.shape["+b+"]"}).join(",")+","+a.map(function(b){return"b"+b+"=this.stride["+b+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var w=0;w<e;++w)s.push("if(typeof i"+w+"==='number'){d=i"+w+"|0;if(d<0){c+=b"+w+"*(a"+w+"-1);a"+w+"=ceil(-a"+w+"/d)}else{a"+w+"=ceil(a"+w+"/d)}b"+w+"*=d}");s.push("return new "+i+"(this.data,"+a.map(function(b){return"a"+b}).join(",")+","+a.map(function(b){return"b"+b}).join(",")+",c)}");for(var m=new Array(e),l=new Array(e),w=0;w<e;++w)m[w]="a[i"+w+"]",l[w]="b[i"+w+"]";s.push("proto.transpose=function "+i+"_transpose("+c+"){"+c.map(function(b,S){return b+"=("+b+"===undefined?"+S+":"+b+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+i+"(this.data,"+m.join(",")+","+l.join(",")+",this.offset)}"),s.push("proto.pick=function "+i+"_pick("+c+"){var a=[],b=[],c=this.offset");for(var w=0;w<e;++w)s.push("if(typeof i"+w+"==='number'&&i"+w+">=0){c=(c+this.stride["+w+"]*i"+w+")|0}else{a.push(this.shape["+w+"]);b.push(this.stride["+w+"])}");s.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),s.push("return function construct_"+i+"(data,shape,stride,offset){return new "+i+"(data,"+a.map(function(b){return"shape["+b+"]"}).join(",")+","+a.map(function(b){return"stride["+b+"]"}).join(",")+",offset)}");var T=new Function("CTOR_LIST","ORDER",s.join(`
`));return T(UT[t],Une)}function jne(t){if(Dne(t))return"buffer";if(Pne)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(t)?"array":"generic"}var UT={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function qne(t,e,i,n){if(t===void 0){var u=UT.array[0];return u([])}else typeof t=="number"&&(t=[t]);e===void 0&&(e=[t.length]);var s=e.length;if(i===void 0){i=new Array(s);for(var a=s-1,c=1;a>=0;--a)i[a]=c,c*=e[a]}if(n===void 0){n=0;for(var a=0;a<s;++a)i[a]<0&&(n-=(e[a]-1)*i[a])}for(var d=jne(t),f=UT[d];f.length<=s+1;)f.push(zne(d,f.length-1));var u=f[s+1];return u(t,e,i,n)}var Gne=qne;const Vne=pd(Gne);var Sy="n",Th="d",nf="s",zT="p",sf="o",Y0="i",Wne=Yne;function LI(t,e,i){if(i===0){for(var n=[[]],s=0;s<e.length;++s)if(!e[s])for(var a=n.length,c=0;c<a;++c){var d=n[c].slice();d.push(nf+s),n.push(d)}if(n.length===1)return"";var f=[];t==="generic"?f.push(Th,".set(",sf,",",Th,".get(",sf,")+"):f.push(Th,"[",sf,"]+=");for(var s=1;s<n.length;++s){var d=n[s],u=(d.length+1)%2;s>1&&!u?f.push("+"):u&&f.push("-"),t==="generic"?f.push(Th,".get("):f.push(Th,"["),f.push(sf,"-",d.join("-")),t==="generic"?f.push(")"):f.push("]")}return t==="generic"?f.push(");"):f.push(";"),f.join("")}e[i-1]=!0;var o=[LI(t,e,i-1),sf,"+=",zT,i-1,";for(",Y0,i-1,"=1;",Y0,i-1,"<",Sy,i-1,";++",Y0,i-1,"){"];return e[i-1]=!1,o.push(LI(t,e,i-1),sf,"+=",zT,i-1,";}"),o.join("")}function Hne(t,e){for(var i=["prefixSum",e.length,"d",t,"s",e.join("s")].join(""),n=["function ",i,"(arr){var ",Th,"=arr.data,",Sy,"=arr.shape,",nf,"=arr.stride,",sf,"=arr.offset,"],s=e.length,a=0;a<s;++a)n.push(Sy,a,"=",Sy,"[",e[a],"],");for(var a=0;a<s;++a)n.push(nf,a,"=",nf,"[",e[a],"],");for(var a=0;a<s;++a)n.push(Y0,a,"=0,");for(var a=s-1;a>0;--a)n.push(zT,a,"=",nf,a,"-",Sy,a-1,"*",nf,a-1,",");n.push(zT,"0=",nf,0,";");for(var c=new Array(s),a=0;a<s;++a)c[a]=!0;n.push(LI(t,c,s),"}return ",i);var d=new Function(n.join(""));return d()}var MD={};function Yne(t){var e=t.dtype+t.order.join(),i=MD[e];return i||(i=MD[e]=Hne(t.dtype,t.order)),i(t),t}const Xne=pd(Wne);var i5={};function Kne(t,e){for(var i=1,n=t.length,s=t[0],a=t[0],c=1;c<n;++c)if(a=s,s=t[c],e(s,a)){if(c===i){i++;continue}t[i++]=s}return t.length=i,t}function Jne(t){for(var e=1,i=t.length,n=t[0],s=t[0],a=1;a<i;++a,s=n)if(s=n,n=t[a],n!==s){if(a===e){e++;continue}t[e++]=n}return t.length=e,t}function Qne(t,e,i){return t.length===0?t:e?(i||t.sort(e),Kne(t,e)):(i||t.sort(),Jne(t))}var Zne=Qne,ese=Zne;function n5(t,e,i){var n=t.length,s=e.arrayArgs.length,a=e.indexArgs.length>0,c=[],d=[],f=0,u=0,o,g;for(o=0;o<n;++o)d.push(["i",o,"=0"].join(""));for(g=0;g<s;++g)for(o=0;o<n;++o)u=f,f=t[o],o===0?d.push(["d",g,"s",o,"=t",g,"p",f].join("")):d.push(["d",g,"s",o,"=(t",g,"p",f,"-s",u,"*t",g,"p",u,")"].join(""));for(d.length>0&&c.push("var "+d.join(",")),o=n-1;o>=0;--o)f=t[o],c.push(["for(i",o,"=0;i",o,"<s",f,";++i",o,"){"].join(""));for(c.push(i),o=0;o<n;++o){for(u=f,f=t[o],g=0;g<s;++g)c.push(["p",g,"+=d",g,"s",o].join(""));a&&(o>0&&c.push(["index[",u,"]-=s",u].join("")),c.push(["++index[",f,"]"].join(""))),c.push("}")}return c.join(`
`)}function tse(t,e,i,n){for(var s=e.length,a=i.arrayArgs.length,c=i.blockSize,d=i.indexArgs.length>0,f=[],u=0;u<a;++u)f.push(["var offset",u,"=p",u].join(""));for(var u=t;u<s;++u)f.push(["for(var j"+u+"=SS[",e[u],"]|0;j",u,">0;){"].join("")),f.push(["if(j",u,"<",c,"){"].join("")),f.push(["s",e[u],"=j",u].join("")),f.push(["j",u,"=0"].join("")),f.push(["}else{s",e[u],"=",c].join("")),f.push(["j",u,"-=",c,"}"].join("")),d&&f.push(["index[",e[u],"]=j",u].join(""));for(var u=0;u<a;++u){for(var o=["offset"+u],g=t;g<s;++g)o.push(["j",g,"*t",u,"p",e[g]].join(""));f.push(["p",u,"=(",o.join("+"),")"].join(""))}f.push(n5(e,i,n));for(var u=t;u<s;++u)f.push("}");return f.join(`
`)}function ise(t){for(var e=0,i=t[0].length;e<i;){for(var n=1;n<t.length;++n)if(t[n][e]!==t[0][e])return e;++e}return e}function Nx(t,e,i){for(var n=t.body,s=[],a=[],c=0;c<t.args.length;++c){var d=t.args[c];if(!(d.count<=0)){var f=new RegExp(d.name,"g"),u="",o=e.arrayArgs.indexOf(c);switch(e.argTypes[c]){case"offset":var g=e.offsetArgIndex.indexOf(c),w=e.offsetArgs[g];o=w.array,u="+q"+g;case"array":u="p"+o+u;var m="l"+c,l="a"+o;if(e.arrayBlockIndices[o]===0)d.count===1?i[o]==="generic"?d.lvalue?(s.push(["var ",m,"=",l,".get(",u,")"].join("")),n=n.replace(f,m),a.push([l,".set(",u,",",m,")"].join(""))):n=n.replace(f,[l,".get(",u,")"].join("")):n=n.replace(f,[l,"[",u,"]"].join("")):i[o]==="generic"?(s.push(["var ",m,"=",l,".get(",u,")"].join("")),n=n.replace(f,m),d.lvalue&&a.push([l,".set(",u,",",m,")"].join(""))):(s.push(["var ",m,"=",l,"[",u,"]"].join("")),n=n.replace(f,m),d.lvalue&&a.push([l,"[",u,"]=",m].join("")));else{for(var T=[d.name],b=[u],S=0;S<Math.abs(e.arrayBlockIndices[o]);S++)T.push("\\s*\\[([^\\]]+)\\]"),b.push("$"+(S+1)+"*t"+o+"b"+S);if(f=new RegExp(T.join(""),"g"),u=b.join("+"),i[o]==="generic")throw new Error("cwise: Generic arrays not supported in combination with blocks!");n=n.replace(f,[l,"[",u,"]"].join(""))}break;case"scalar":n=n.replace(f,"Y"+e.scalarArgs.indexOf(c));break;case"index":n=n.replace(f,"index");break;case"shape":n=n.replace(f,"shape");break}}}return[s.join(`
`),n,a.join(`
`)].join(`
`).trim()}function nse(t){for(var e=new Array(t.length),i=!0,n=0;n<t.length;++n){var s=t[n],a=s.match(/\d+/);a?a=a[0]:a="",s.charAt(0)===0?e[n]="u"+s.charAt(1)+a:e[n]=s.charAt(0)+a,n>0&&(i=i&&e[n]===e[n-1])}return i?e[0]:e.join("")}function sse(t,e){for(var i=e[1].length-Math.abs(t.arrayBlockIndices[0])|0,n=new Array(t.arrayArgs.length),s=new Array(t.arrayArgs.length),a=0;a<t.arrayArgs.length;++a)s[a]=e[2*a],n[a]=e[2*a+1];for(var c=[],d=[],f=[],u=[],o=[],a=0;a<t.arrayArgs.length;++a){t.arrayBlockIndices[a]<0?(f.push(0),u.push(i),c.push(i),d.push(i+t.arrayBlockIndices[a])):(f.push(t.arrayBlockIndices[a]),u.push(t.arrayBlockIndices[a]+i),c.push(0),d.push(t.arrayBlockIndices[a]));for(var g=[],w=0;w<n[a].length;w++)f[a]<=n[a][w]&&n[a][w]<u[a]&&g.push(n[a][w]-f[a]);o.push(g)}for(var m=["SS"],l=["'use strict'"],T=[],w=0;w<i;++w)T.push(["s",w,"=SS[",w,"]"].join(""));for(var a=0;a<t.arrayArgs.length;++a){m.push("a"+a),m.push("t"+a),m.push("p"+a);for(var w=0;w<i;++w)T.push(["t",a,"p",w,"=t",a,"[",f[a]+w,"]"].join(""));for(var w=0;w<Math.abs(t.arrayBlockIndices[a]);++w)T.push(["t",a,"b",w,"=t",a,"[",c[a]+w,"]"].join(""))}for(var a=0;a<t.scalarArgs.length;++a)m.push("Y"+a);if(t.shapeArgs.length>0&&T.push("shape=SS.slice(0)"),t.indexArgs.length>0){for(var b=new Array(i),a=0;a<i;++a)b[a]="0";T.push(["index=[",b.join(","),"]"].join(""))}for(var a=0;a<t.offsetArgs.length;++a){for(var S=t.offsetArgs[a],x=[],w=0;w<S.offset.length;++w)S.offset[w]!==0&&(S.offset[w]===1?x.push(["t",S.array,"p",w].join("")):x.push([S.offset[w],"*t",S.array,"p",w].join("")));x.length===0?T.push("q"+a+"=0"):T.push(["q",a,"=",x.join("+")].join(""))}var B=ese([].concat(t.pre.thisVars).concat(t.body.thisVars).concat(t.post.thisVars));T=T.concat(B),T.length>0&&l.push("var "+T.join(","));for(var a=0;a<t.arrayArgs.length;++a)l.push("p"+a+"|=0");t.pre.body.length>3&&l.push(Nx(t.pre,t,s));var F=Nx(t.body,t,s),I=ise(o);I<i?l.push(tse(I,o[0],t,F)):l.push(n5(o[0],t,F)),t.post.body.length>3&&l.push(Nx(t.post,t,s)),t.debug&&console.log("-----Generated cwise routine for ",e,`:
`+l.join(`
`)+`
----------`);var A=[t.funcName||"unnamed","_cwise_loop_",n[0].join("s"),"m",I,nse(s)].join(""),O=new Function(["function ",A,"(",m.join(","),"){",l.join(`
`),"} return ",A].join(""));return O()}var rse=sse,ase=rse;function ose(t){var e=["'use strict'","var CACHED={}"],i=[],n=t.funcName+"_cwise_thunk";e.push(["return function ",n,"(",t.shimArgs.join(","),"){"].join(""));for(var s=[],a=[],c=[["array",t.arrayArgs[0],".shape.slice(",Math.max(0,t.arrayBlockIndices[0]),t.arrayBlockIndices[0]<0?","+t.arrayBlockIndices[0]+")":")"].join("")],d=[],f=[],u=0;u<t.arrayArgs.length;++u){var o=t.arrayArgs[u];i.push(["t",o,"=array",o,".dtype,","r",o,"=array",o,".order"].join("")),s.push("t"+o),s.push("r"+o),a.push("t"+o),a.push("r"+o+".join()"),c.push("array"+o+".data"),c.push("array"+o+".stride"),c.push("array"+o+".offset|0"),u>0&&(d.push("array"+t.arrayArgs[0]+".shape.length===array"+o+".shape.length+"+(Math.abs(t.arrayBlockIndices[0])-Math.abs(t.arrayBlockIndices[u]))),f.push("array"+t.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[0])+"]===array"+o+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[u])+"]"))}t.arrayArgs.length>1&&(e.push("if (!("+d.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),e.push("for(var shapeIndex=array"+t.arrayArgs[0]+".shape.length-"+Math.abs(t.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),e.push("if (!("+f.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),e.push("}"));for(var u=0;u<t.scalarArgs.length;++u)c.push("scalar"+t.scalarArgs[u]);i.push(["type=[",a.join(","),"].join()"].join("")),i.push("proc=CACHED[type]"),e.push("var "+i.join(",")),e.push(["if(!proc){","CACHED[type]=proc=compile([",s.join(","),"])}","return proc(",c.join(","),")}"].join("")),t.debug&&console.log(`-----Generated thunk:
`+e.join(`
`)+`
----------`);var g=new Function("compile",e.join(`
`));return g(ase.bind(void 0,t))}var lse=ose,cse=lse;function dse(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function fse(t){var e=new dse;e.pre=t.pre,e.body=t.body,e.post=t.post;var i=t.args.slice(0);e.argTypes=i;for(var n=0;n<i.length;++n){var s=i[n];if(s==="array"||typeof s=="object"&&s.blockIndices){if(e.argTypes[n]="array",e.arrayArgs.push(n),e.arrayBlockIndices.push(s.blockIndices?s.blockIndices:0),e.shimArgs.push("array"+n),n<e.pre.args.length&&e.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array args");if(n<e.post.args.length&&e.post.args[n].count>0)throw new Error("cwise: post() block may not reference array args")}else if(s==="scalar")e.scalarArgs.push(n),e.shimArgs.push("scalar"+n);else if(s==="index"){if(e.indexArgs.push(n),n<e.pre.args.length&&e.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array index");if(n<e.body.args.length&&e.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array index");if(n<e.post.args.length&&e.post.args[n].count>0)throw new Error("cwise: post() block may not reference array index")}else if(s==="shape"){if(e.shapeArgs.push(n),n<e.pre.args.length&&e.pre.args[n].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(n<e.body.args.length&&e.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array shape");if(n<e.post.args.length&&e.post.args[n].lvalue)throw new Error("cwise: post() block may not write to array shape")}else if(typeof s=="object"&&s.offset)e.argTypes[n]="offset",e.offsetArgs.push({array:s.array,offset:s.offset}),e.offsetArgIndex.push(n);else throw new Error("cwise: Unknown argument type "+i[n])}if(e.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(e.pre.args.length>i.length)throw new Error("cwise: Too many arguments in pre() block");if(e.body.args.length>i.length)throw new Error("cwise: Too many arguments in body() block");if(e.post.args.length>i.length)throw new Error("cwise: Too many arguments in post() block");return e.debug=!!t.printCode||!!t.debug,e.funcName=t.funcName||"cwise",e.blockSize=t.blockSize||64,cse(e)}var use=fse;(function(t){var e=use,i={body:"",args:[],thisVars:[],localVars:[]};function n(w){if(!w)return i;for(var m=0;m<w.args.length;++m){var l=w.args[m];m===0?w.args[m]={name:l,lvalue:!0,rvalue:!!w.rvalue,count:w.count||1}:w.args[m]={name:l,lvalue:!1,rvalue:!0,count:1}}return w.thisVars||(w.thisVars=[]),w.localVars||(w.localVars=[]),w}function s(w){return e({args:w.args,pre:n(w.pre),body:n(w.body),post:n(w.proc),funcName:w.funcName})}function a(w){for(var m=[],l=0;l<w.args.length;++l)m.push("a"+l);var T=new Function("P",["return function ",w.funcName,"_ndarrayops(",m.join(","),") {P(",m.join(","),");return a0}"].join(""));return T(s(w))}var c={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var w in c){var m=c[w];t[w]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+m+"c"},funcName:w}),t[w+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a"+m+"=b"},rvalue:!0,funcName:w+"eq"}),t[w+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+m+"s"},funcName:w+"s"}),t[w+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a"+m+"=s"},rvalue:!0,funcName:w+"seq"})}})();var d={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var w in d){var m=d[w];t[w]=a({args:["array","array"],body:{args:["a","b"],body:"a="+m+"b"},funcName:w}),t[w+"eq"]=a({args:["array"],body:{args:["a"],body:"a="+m+"a"},rvalue:!0,count:2,funcName:w+"eq"})}})();var f={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var w in f){var m=f[w];t[w]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+m+"c"},funcName:w}),t[w+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+m+"s"},funcName:w+"s"}),t[w+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a=a"+m+"b"},rvalue:!0,count:2,funcName:w+"eq"}),t[w+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+m+"s"},rvalue:!0,count:2,funcName:w+"seq"})}})();var u=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];(function(){for(var w=0;w<u.length;++w){var m=u[w];t[m]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:m}),t[m+"eq"]=a({args:["array"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:m+"eq"})}})();var o=["max","min","atan2","pow"];(function(){for(var w=0;w<o.length;++w){var m=o[w];t[m]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:m}),t[m+"s"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:m+"s"}),t[m+"eq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:m+"eq"}),t[m+"seq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:m+"seq"})}})();var g=["atan2","pow"];(function(){for(var w=0;w<g.length;++w){var m=g[w];t[m+"op"]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:m+"op"}),t[m+"ops"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:m+"ops"}),t[m+"opeq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:m+"opeq"}),t[m+"opseq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:m+"opseq"})}})(),t.any=e({args:["array"],pre:i,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),t.all=e({args:["array"],pre:i,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),t.sum=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),t.prod=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),t.norm2squared=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),t.norm2=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),t.norminf=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),t.norm1=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),t.sup=e({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.inf=e({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.argmin=e({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.argmax=e({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.random=a({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),t.assign=a({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),t.assigns=a({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),t.equals=e({args:["array","array"],pre:i,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})})(i5);const jb=pd(i5),vh=class{constructor(t,e,i,n){this.data=t,this.ndarray=Vne(t,e,i,n)}get shape(){return this.ndarray.shape}get offset(){return this.ndarray.offset}get strides(){return this.ndarray.stride}get length(){return this.ndarray.size}set shape(t){this.ndarray.shape=t}set offset(t){this.ndarray.offset=t}set strides(t){this.ndarray.stride=t}get(...t){return this.ndarray.get(...t)}set(...t){return this.ndarray.set(...t)}fill(t){this.data.fill(t)}increment(t,e=1){const i=this.ndarray.index(...t);this.data[i]+=e}addToItself(t){return jb.addeq(this.ndarray,t.ndarray),this}subToItself(t){return jb.subeq(this.ndarray,t.ndarray),this}add(t,e=Ox){const i=new vh(new e(this.length),this.shape);return jb.add(i.ndarray,this.ndarray,t.ndarray),i}sub(t,e=Ox){const i=new vh(new e(this.length),this.shape);return jb.sub(i.ndarray,this.ndarray,t.ndarray),i}slice(...t){const e=this.ndarray.pick(...t);return new vh(this.data,e.shape,e.stride,e.offset)}cumulativeSum(){return Xne(this.ndarray),this}static typedArray(t,e,i,n,s){const a=new t(e);return new vh(a,i,n,s)}static allocCumulative(t,e,i,n){return this.typedArray(Fne,t,e,i,n)}static allocCounts(t,e,i,n){return this.typedArray(Ox,t,e,i,n)}toString2D(){let t="";for(let e=0;e<this.shape[0];e++){let i="";for(let n=0;n<this.shape[1];n++)i+=this.get(e,n)+" ";t+=i+`
`}return t}toString1D(){let t="";for(let e=0;e<this.shape[0];e++)t+=this.get(e)+" ";return t}toString(){return this.shape.length===1?this.toString1D():this.shape.length===2?this.toString2D():"not implemented yet"}deepCopy(t){const e=vh.typedArray(t,this.length,this.shape,this.strides,this.offset);for(let i=0;i<this.length;i++)e.data[i]=this.data[i];return e}};let js=vh;js.ALL=null;function bl(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function hse(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Bm(t){let e,i,n;t.length!==2?(e=bl,i=(d,f)=>bl(t(d),f),n=(d,f)=>t(d)-f):(e=t===bl||t===hse?t:pse,i=t,n=t);function s(d,f,u=0,o=d.length){if(u<o){if(e(f,f)!==0)return o;do{const g=u+o>>>1;i(d[g],f)<0?u=g+1:o=g}while(u<o)}return u}function a(d,f,u=0,o=d.length){if(u<o){if(e(f,f)!==0)return o;do{const g=u+o>>>1;i(d[g],f)<=0?u=g+1:o=g}while(u<o)}return u}function c(d,f,u=0,o=d.length){const g=s(d,f,u,o-1);return g>u&&n(d[g-1],f)>-n(d[g],f)?g-1:g}return{left:s,center:c,right:a}}function pse(){return 0}function s5(t){return t===null?NaN:+t}function*_se(t,e){if(e===void 0)for(let i of t)i!=null&&(i=+i)>=i&&(yield i);else{let i=-1;for(let n of t)(n=e(n,++i,t))!=null&&(n=+n)>=n&&(yield n)}}const r5=Bm(bl),jT=r5.right,yse=r5.left;Bm(s5).center;const Im=jT;function gse(t,e){let i=0,n,s=0,a=0;if(e===void 0)for(let c of t)c!=null&&(c=+c)>=c&&(n=c-s,s+=n/++i,a+=n*(c-s));else{let c=-1;for(let d of t)(d=e(d,++c,t))!=null&&(d=+d)>=d&&(n=d-s,s+=n/++i,a+=n*(d-s))}if(i>1)return a/(i-1)}function mse(t,e){const i=gse(t,e);return i&&Math.sqrt(i)}class Zn{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const i=this._partials;let n=0;for(let s=0;s<this._n&&s<32;s++){const a=i[s],c=e+a,d=Math.abs(e)<Math.abs(a)?e-(c-a):a-(c-e);d&&(i[n++]=d),e=c}return i[n]=e,this._n=n+1,this}valueOf(){const e=this._partials;let i=this._n,n,s,a,c=0;if(i>0){for(c=e[--i];i>0&&(n=c,s=e[--i],c=n+s,a=s-(c-n),!a););i>0&&(a<0&&e[i-1]<0||a>0&&e[i-1]>0)&&(s=a*2,n=c+s,s==n-c&&(c=n))}return c}}class AD extends Map{constructor(e,i=l5){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:i}}),e!=null)for(const[n,s]of e)this.set(n,s)}get(e){return super.get(DI(this,e))}has(e){return super.has(DI(this,e))}set(e,i){return super.set(a5(this,e),i)}delete(e){return super.delete(o5(this,e))}}class qT extends Set{constructor(e,i=l5){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:i}}),e!=null)for(const n of e)this.add(n)}has(e){return super.has(DI(this,e))}add(e){return super.add(a5(this,e))}delete(e){return super.delete(o5(this,e))}}function DI({_intern:t,_key:e},i){const n=e(i);return t.has(n)?t.get(n):i}function a5({_intern:t,_key:e},i){const n=e(i);return t.has(n)?t.get(n):(t.set(n,i),i)}function o5({_intern:t,_key:e},i){const n=e(i);return t.has(n)&&(i=t.get(n),t.delete(n)),i}function l5(t){return t!==null&&typeof t=="object"?t.valueOf():t}function wse(t,e){return Array.from(e,i=>t[i])}function bse(t=bl){if(t===bl)return c5;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,i)=>{const n=t(e,i);return n||n===0?n:(t(i,i)===0)-(t(e,e)===0)}}function c5(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Tse=Math.sqrt(50),vse=Math.sqrt(10),Ese=Math.sqrt(2);function GT(t,e,i){const n=(e-t)/Math.max(0,i),s=Math.floor(Math.log10(n)),a=n/Math.pow(10,s),c=a>=Tse?10:a>=vse?5:a>=Ese?2:1;let d,f,u;return s<0?(u=Math.pow(10,-s)/c,d=Math.round(t*u),f=Math.round(e*u),d/u<t&&++d,f/u>e&&--f,u=-u):(u=Math.pow(10,s)*c,d=Math.round(t/u),f=Math.round(e/u),d*u<t&&++d,f*u>e&&--f),f<d&&.5<=i&&i<2?GT(t,e,i*2):[d,f,u]}function PI(t,e,i){if(e=+e,t=+t,i=+i,!(i>0))return[];if(t===e)return[t];const n=e<t,[s,a,c]=n?GT(e,t,i):GT(t,e,i);if(!(a>=s))return[];const d=a-s+1,f=new Array(d);if(n)if(c<0)for(let u=0;u<d;++u)f[u]=(a-u)/-c;else for(let u=0;u<d;++u)f[u]=(a-u)*c;else if(c<0)for(let u=0;u<d;++u)f[u]=(s+u)/-c;else for(let u=0;u<d;++u)f[u]=(s+u)*c;return f}function $I(t,e,i){return e=+e,t=+t,i=+i,GT(t,e,i)[2]}function jc(t,e,i){e=+e,t=+t,i=+i;const n=e<t,s=n?$I(e,t,i):$I(t,e,i);return(n?-1:1)*(s<0?1/-s:s)}function Ff(t,e){let i;if(e===void 0)for(const n of t)n!=null&&(i<n||i===void 0&&n>=n)&&(i=n);else{let n=-1;for(let s of t)(s=e(s,++n,t))!=null&&(i<s||i===void 0&&s>=s)&&(i=s)}return i}function UI(t,e){let i;if(e===void 0)for(const n of t)n!=null&&(i>n||i===void 0&&n>=n)&&(i=n);else{let n=-1;for(let s of t)(s=e(s,++n,t))!=null&&(i>s||i===void 0&&s>=s)&&(i=s)}return i}function d5(t,e,i=0,n=1/0,s){if(e=Math.floor(e),i=Math.floor(Math.max(0,i)),n=Math.floor(Math.min(t.length-1,n)),!(i<=e&&e<=n))return t;for(s=s===void 0?c5:bse(s);n>i;){if(n-i>600){const f=n-i+1,u=e-i+1,o=Math.log(f),g=.5*Math.exp(2*o/3),w=.5*Math.sqrt(o*g*(f-g)/f)*(u-f/2<0?-1:1),m=Math.max(i,Math.floor(e-u*g/f+w)),l=Math.min(n,Math.floor(e+(f-u)*g/f+w));d5(t,e,m,l,s)}const a=t[e];let c=i,d=n;for(z_(t,i,e),s(t[n],a)>0&&z_(t,i,n);c<d;){for(z_(t,c,d),++c,--d;s(t[c],a)<0;)++c;for(;s(t[d],a)>0;)--d}s(t[i],a)===0?z_(t,i,d):(++d,z_(t,d,n)),d<=e&&(i=d+1),e<=d&&(n=d-1)}return t}function z_(t,e,i){const n=t[e];t[e]=t[i],t[i]=n}function zI(t,e,i){if(t=Float64Array.from(_se(t,i)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return UI(t);if(e>=1)return Ff(t);var n,s=(n-1)*e,a=Math.floor(s),c=Ff(d5(t,a).subarray(0,a+1)),d=UI(t.subarray(a+1));return c+(d-c)*(s-a)}}function f5(t,e,i=s5){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+i(t[0],0,t);if(e>=1)return+i(t[n-1],n-1,t);var n,s=(n-1)*e,a=Math.floor(s),c=+i(t[a],a,t),d=+i(t[a+1],a+1,t);return c+(d-c)*(s-a)}}function Sse(t,e){let i=0,n=0;if(e===void 0)for(let s of t)s!=null&&(s=+s)>=s&&(++i,n+=s);else{let s=-1;for(let a of t)(a=e(a,++s,t))!=null&&(a=+a)>=a&&(++i,n+=a)}if(i)return n/i}function u5(t,e){return zI(t,.5,e)}function*xse(t){for(const e of t)yield*e}function h5(t){return Array.from(xse(t))}function Js(t,e,i){t=+t,e=+e,i=(s=arguments.length)<2?(e=t,t=0,1):s<3?1:+i;for(var n=-1,s=Math.max(0,Math.ceil((e-t)/i))|0,a=new Array(s);++n<s;)a[n]=t+n*i;return a}function p5(t,e){let i=0;if(e===void 0)for(let n of t)(n=+n)&&(i+=n);else{let n=-1;for(let s of t)(s=+e(s,++n,t))&&(i+=s)}return i}var Bse={value:()=>{}};function _5(){for(var t=0,e=arguments.length,i={},n;t<e;++t){if(!(n=arguments[t]+"")||n in i||/[\s.]/.test(n))throw new Error("illegal type: "+n);i[n]=[]}return new X0(i)}function X0(t){this._=t}function Ise(t,e){return t.trim().split(/^|\s+/).map(function(i){var n="",s=i.indexOf(".");if(s>=0&&(n=i.slice(s+1),i=i.slice(0,s)),i&&!e.hasOwnProperty(i))throw new Error("unknown type: "+i);return{type:i,name:n}})}X0.prototype=_5.prototype={constructor:X0,on:function(t,e){var i=this._,n=Ise(t+"",i),s,a=-1,c=n.length;if(arguments.length<2){for(;++a<c;)if((s=(t=n[a]).type)&&(s=kse(i[s],t.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<c;)if(s=(t=n[a]).type)i[s]=OD(i[s],t.name,e);else if(e==null)for(s in i)i[s]=OD(i[s],t.name,null);return this},copy:function(){var t={},e=this._;for(var i in e)t[i]=e[i].slice();return new X0(t)},call:function(t,e){if((s=arguments.length-2)>0)for(var i=new Array(s),n=0,s,a;n<s;++n)i[n]=arguments[n+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],n=0,s=a.length;n<s;++n)a[n].value.apply(e,i)},apply:function(t,e,i){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],s=0,a=n.length;s<a;++s)n[s].value.apply(e,i)}};function kse(t,e){for(var i=0,n=t.length,s;i<n;++i)if((s=t[i]).name===e)return s.value}function OD(t,e,i){for(var n=0,s=t.length;n<s;++n)if(t[n].name===e){t[n]=Bse,t=t.slice(0,n).concat(t.slice(n+1));break}return i!=null&&t.push({name:e,value:i}),t}function h_(t,e,i){t.prototype=e.prototype=i,i.constructor=t}function km(t,e){var i=Object.create(t.prototype);for(var n in e)i[n]=e[n];return i}function _d(){}var Vf=.7,Sp=1/Vf,Xh="\\s*([+-]?\\d+)\\s*",kg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",oo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Fse=/^#([0-9a-f]{3,8})$/,Mse=new RegExp(`^rgb\\(${Xh},${Xh},${Xh}\\)$`),Ase=new RegExp(`^rgb\\(${oo},${oo},${oo}\\)$`),Ose=new RegExp(`^rgba\\(${Xh},${Xh},${Xh},${kg}\\)$`),Nse=new RegExp(`^rgba\\(${oo},${oo},${oo},${kg}\\)$`),Cse=new RegExp(`^hsl\\(${kg},${oo},${oo}\\)$`),Rse=new RegExp(`^hsla\\(${kg},${oo},${oo},${kg}\\)$`),ND={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};h_(_d,Fg,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:CD,formatHex:CD,formatHex8:Lse,formatHsl:Dse,formatRgb:RD,toString:RD});function CD(){return this.rgb().formatHex()}function Lse(){return this.rgb().formatHex8()}function Dse(){return y5(this).formatHsl()}function RD(){return this.rgb().formatRgb()}function Fg(t){var e,i;return t=(t+"").trim().toLowerCase(),(e=Fse.exec(t))?(i=e[1].length,e=parseInt(e[1],16),i===6?LD(e):i===3?new en(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):i===8?qb(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):i===4?qb(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Mse.exec(t))?new en(e[1],e[2],e[3],1):(e=Ase.exec(t))?new en(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Ose.exec(t))?qb(e[1],e[2],e[3],e[4]):(e=Nse.exec(t))?qb(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Cse.exec(t))?$D(e[1],e[2]/100,e[3]/100,1):(e=Rse.exec(t))?$D(e[1],e[2]/100,e[3]/100,e[4]):ND.hasOwnProperty(t)?LD(ND[t]):t==="transparent"?new en(NaN,NaN,NaN,0):null}function LD(t){return new en(t>>16&255,t>>8&255,t&255,1)}function qb(t,e,i,n){return n<=0&&(t=e=i=NaN),new en(t,e,i,n)}function FM(t){return t instanceof _d||(t=Fg(t)),t?(t=t.rgb(),new en(t.r,t.g,t.b,t.opacity)):new en}function qc(t,e,i,n){return arguments.length===1?FM(t):new en(t,e,i,n??1)}function en(t,e,i,n){this.r=+t,this.g=+e,this.b=+i,this.opacity=+n}h_(en,qc,km(_d,{brighter(t){return t=t==null?Sp:Math.pow(Sp,t),new en(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Vf:Math.pow(Vf,t),new en(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new en(Mf(this.r),Mf(this.g),Mf(this.b),VT(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:DD,formatHex:DD,formatHex8:Pse,formatRgb:PD,toString:PD}));function DD(){return`#${mf(this.r)}${mf(this.g)}${mf(this.b)}`}function Pse(){return`#${mf(this.r)}${mf(this.g)}${mf(this.b)}${mf((isNaN(this.opacity)?1:this.opacity)*255)}`}function PD(){const t=VT(this.opacity);return`${t===1?"rgb(":"rgba("}${Mf(this.r)}, ${Mf(this.g)}, ${Mf(this.b)}${t===1?")":`, ${t})`}`}function VT(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Mf(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function mf(t){return t=Mf(t),(t<16?"0":"")+t.toString(16)}function $D(t,e,i,n){return n<=0?t=e=i=NaN:i<=0||i>=1?t=e=NaN:e<=0&&(t=NaN),new Kr(t,e,i,n)}function y5(t){if(t instanceof Kr)return new Kr(t.h,t.s,t.l,t.opacity);if(t instanceof _d||(t=Fg(t)),!t)return new Kr;if(t instanceof Kr)return t;t=t.rgb();var e=t.r/255,i=t.g/255,n=t.b/255,s=Math.min(e,i,n),a=Math.max(e,i,n),c=NaN,d=a-s,f=(a+s)/2;return d?(e===a?c=(i-n)/d+(i<n)*6:i===a?c=(n-e)/d+2:c=(e-i)/d+4,d/=f<.5?a+s:2-a-s,c*=60):d=f>0&&f<1?0:c,new Kr(c,d,f,t.opacity)}function WT(t,e,i,n){return arguments.length===1?y5(t):new Kr(t,e,i,n??1)}function Kr(t,e,i,n){this.h=+t,this.s=+e,this.l=+i,this.opacity=+n}h_(Kr,WT,km(_d,{brighter(t){return t=t==null?Sp:Math.pow(Sp,t),new Kr(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Vf:Math.pow(Vf,t),new Kr(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,n=i+(i<.5?i:1-i)*e,s=2*i-n;return new en(Cx(t>=240?t-240:t+120,s,n),Cx(t,s,n),Cx(t<120?t+240:t-120,s,n),this.opacity)},clamp(){return new Kr(UD(this.h),Gb(this.s),Gb(this.l),VT(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=VT(this.opacity);return`${t===1?"hsl(":"hsla("}${UD(this.h)}, ${Gb(this.s)*100}%, ${Gb(this.l)*100}%${t===1?")":`, ${t})`}`}}));function UD(t){return t=(t||0)%360,t<0?t+360:t}function Gb(t){return Math.max(0,Math.min(1,t||0))}function Cx(t,e,i){return(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)*255}const g5=Math.PI/180,m5=180/Math.PI,HT=18,w5=.96422,b5=1,T5=.82521,v5=4/29,Kh=6/29,E5=3*Kh*Kh,$se=Kh*Kh*Kh;function S5(t){if(t instanceof lo)return new lo(t.l,t.a,t.b,t.opacity);if(t instanceof pl)return x5(t);t instanceof en||(t=FM(t));var e=Px(t.r),i=Px(t.g),n=Px(t.b),s=Rx((.2225045*e+.7168786*i+.0606169*n)/b5),a,c;return e===i&&i===n?a=c=s:(a=Rx((.4360747*e+.3850649*i+.1430804*n)/w5),c=Rx((.0139322*e+.0971045*i+.7141733*n)/T5)),new lo(116*s-16,500*(a-s),200*(s-c),t.opacity)}function YT(t,e,i,n){return arguments.length===1?S5(t):new lo(t,e,i,n??1)}function lo(t,e,i,n){this.l=+t,this.a=+e,this.b=+i,this.opacity=+n}h_(lo,YT,km(_d,{brighter(t){return new lo(this.l+HT*(t??1),this.a,this.b,this.opacity)},darker(t){return new lo(this.l-HT*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,i=isNaN(this.b)?t:t-this.b/200;return e=w5*Lx(e),t=b5*Lx(t),i=T5*Lx(i),new en(Dx(3.1338561*e-1.6168667*t-.4906146*i),Dx(-.9787684*e+1.9161415*t+.033454*i),Dx(.0719453*e-.2289914*t+1.4052427*i),this.opacity)}}));function Rx(t){return t>$se?Math.pow(t,1/3):t/E5+v5}function Lx(t){return t>Kh?t*t*t:E5*(t-v5)}function Dx(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Px(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Use(t){if(t instanceof pl)return new pl(t.h,t.c,t.l,t.opacity);if(t instanceof lo||(t=S5(t)),t.a===0&&t.b===0)return new pl(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*m5;return new pl(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function XT(t,e,i,n){return arguments.length===1?Use(t):new pl(t,e,i,n??1)}function pl(t,e,i,n){this.h=+t,this.c=+e,this.l=+i,this.opacity=+n}function x5(t){if(isNaN(t.h))return new lo(t.l,0,0,t.opacity);var e=t.h*g5;return new lo(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}h_(pl,XT,km(_d,{brighter(t){return new pl(this.h,this.c,this.l+HT*(t??1),this.opacity)},darker(t){return new pl(this.h,this.c,this.l-HT*(t??1),this.opacity)},rgb(){return x5(this).rgb()}}));var B5=-.14861,MM=1.78277,AM=-.29227,yE=-.90649,Mg=1.97294,zD=Mg*yE,jD=Mg*MM,qD=MM*AM-yE*B5;function zse(t){if(t instanceof Af)return new Af(t.h,t.s,t.l,t.opacity);t instanceof en||(t=FM(t));var e=t.r/255,i=t.g/255,n=t.b/255,s=(qD*n+zD*e-jD*i)/(qD+zD-jD),a=n-s,c=(Mg*(i-s)-AM*a)/yE,d=Math.sqrt(c*c+a*a)/(Mg*s*(1-s)),f=d?Math.atan2(c,a)*m5-120:NaN;return new Af(f<0?f+360:f,d,s,t.opacity)}function jI(t,e,i,n){return arguments.length===1?zse(t):new Af(t,e,i,n??1)}function Af(t,e,i,n){this.h=+t,this.s=+e,this.l=+i,this.opacity=+n}h_(Af,jI,km(_d,{brighter(t){return t=t==null?Sp:Math.pow(Sp,t),new Af(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Vf:Math.pow(Vf,t),new Af(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*g5,e=+this.l,i=isNaN(this.s)?0:this.s*e*(1-e),n=Math.cos(t),s=Math.sin(t);return new en(255*(e+i*(B5*n+MM*s)),255*(e+i*(AM*n+yE*s)),255*(e+i*(Mg*n)),this.opacity)}}));function I5(t,e,i,n,s){var a=t*t,c=a*t;return((1-3*t+3*a-c)*e+(4-6*a+3*c)*i+(1+3*t+3*a-3*c)*n+c*s)/6}function k5(t){var e=t.length-1;return function(i){var n=i<=0?i=0:i>=1?(i=1,e-1):Math.floor(i*e),s=t[n],a=t[n+1],c=n>0?t[n-1]:2*s-a,d=n<e-1?t[n+2]:2*a-s;return I5((i-n/e)*e,c,s,a,d)}}function F5(t){var e=t.length;return function(i){var n=Math.floor(((i%=1)<0?++i:i)*e),s=t[(n+e-1)%e],a=t[n%e],c=t[(n+1)%e],d=t[(n+2)%e];return I5((i-n/e)*e,s,a,c,d)}}const gE=t=>()=>t;function M5(t,e){return function(i){return t+i*e}}function jse(t,e,i){return t=Math.pow(t,i),e=Math.pow(e,i)-t,i=1/i,function(n){return Math.pow(t+n*e,i)}}function mE(t,e){var i=e-t;return i?M5(t,i>180||i<-180?i-360*Math.round(i/360):i):gE(isNaN(t)?e:t)}function qse(t){return(t=+t)==1?tn:function(e,i){return i-e?jse(e,i,t):gE(isNaN(e)?i:e)}}function tn(t,e){var i=e-t;return i?M5(t,i):gE(isNaN(t)?e:t)}const qI=function t(e){var i=qse(e);function n(s,a){var c=i((s=qc(s)).r,(a=qc(a)).r),d=i(s.g,a.g),f=i(s.b,a.b),u=tn(s.opacity,a.opacity);return function(o){return s.r=c(o),s.g=d(o),s.b=f(o),s.opacity=u(o),s+""}}return n.gamma=t,n}(1);function A5(t){return function(e){var i=e.length,n=new Array(i),s=new Array(i),a=new Array(i),c,d;for(c=0;c<i;++c)d=qc(e[c]),n[c]=d.r||0,s[c]=d.g||0,a[c]=d.b||0;return n=t(n),s=t(s),a=t(a),d.opacity=1,function(f){return d.r=n(f),d.g=s(f),d.b=a(f),d+""}}}var Gse=A5(k5),Vse=A5(F5);function OM(t,e){e||(e=[]);var i=t?Math.min(e.length,t.length):0,n=e.slice(),s;return function(a){for(s=0;s<i;++s)n[s]=t[s]*(1-a)+e[s]*a;return n}}function O5(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Wse(t,e){return(O5(e)?OM:N5)(t,e)}function N5(t,e){var i=e?e.length:0,n=t?Math.min(i,t.length):0,s=new Array(n),a=new Array(i),c;for(c=0;c<n;++c)s[c]=yd(t[c],e[c]);for(;c<i;++c)a[c]=e[c];return function(d){for(c=0;c<n;++c)a[c]=s[c](d);return a}}function C5(t,e){var i=new Date;return t=+t,e=+e,function(n){return i.setTime(t*(1-n)+e*n),i}}function Hr(t,e){return t=+t,e=+e,function(i){return t*(1-i)+e*i}}function R5(t,e){var i={},n={},s;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(s in e)s in t?i[s]=yd(t[s],e[s]):n[s]=e[s];return function(a){for(s in i)n[s]=i[s](a);return n}}var GI=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$x=new RegExp(GI.source,"g");function Hse(t){return function(){return t}}function Yse(t){return function(e){return t(e)+""}}function L5(t,e){var i=GI.lastIndex=$x.lastIndex=0,n,s,a,c=-1,d=[],f=[];for(t=t+"",e=e+"";(n=GI.exec(t))&&(s=$x.exec(e));)(a=s.index)>i&&(a=e.slice(i,a),d[c]?d[c]+=a:d[++c]=a),(n=n[0])===(s=s[0])?d[c]?d[c]+=s:d[++c]=s:(d[++c]=null,f.push({i:c,x:Hr(n,s)})),i=$x.lastIndex;return i<e.length&&(a=e.slice(i),d[c]?d[c]+=a:d[++c]=a),d.length<2?f[0]?Yse(f[0].x):Hse(e):(e=f.length,function(u){for(var o=0,g;o<e;++o)d[(g=f[o]).i]=g.x(u);return d.join("")})}function yd(t,e){var i=typeof e,n;return e==null||i==="boolean"?gE(e):(i==="number"?Hr:i==="string"?(n=Fg(e))?(e=n,qI):L5:e instanceof Fg?qI:e instanceof Date?C5:O5(e)?OM:Array.isArray(e)?N5:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?R5:Hr)(t,e)}function Xse(t){var e=t.length;return function(i){return t[Math.max(0,Math.min(e-1,Math.floor(i*e)))]}}function Kse(t,e){var i=mE(+t,+e);return function(n){var s=i(n);return s-360*Math.floor(s/360)}}function Fm(t,e){return t=+t,e=+e,function(i){return Math.round(t*(1-i)+e*i)}}var GD=180/Math.PI,VI={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function D5(t,e,i,n,s,a){var c,d,f;return(c=Math.sqrt(t*t+e*e))&&(t/=c,e/=c),(f=t*i+e*n)&&(i-=t*f,n-=e*f),(d=Math.sqrt(i*i+n*n))&&(i/=d,n/=d,f/=d),t*n<e*i&&(t=-t,e=-e,f=-f,c=-c),{translateX:s,translateY:a,rotate:Math.atan2(e,t)*GD,skewX:Math.atan(f)*GD,scaleX:c,scaleY:d}}var Vb;function Jse(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?VI:D5(e.a,e.b,e.c,e.d,e.e,e.f)}function Qse(t){return t==null||(Vb||(Vb=document.createElementNS("http://www.w3.org/2000/svg","g")),Vb.setAttribute("transform",t),!(t=Vb.transform.baseVal.consolidate()))?VI:(t=t.matrix,D5(t.a,t.b,t.c,t.d,t.e,t.f))}function P5(t,e,i,n){function s(u){return u.length?u.pop()+" ":""}function a(u,o,g,w,m,l){if(u!==g||o!==w){var T=m.push("translate(",null,e,null,i);l.push({i:T-4,x:Hr(u,g)},{i:T-2,x:Hr(o,w)})}else(g||w)&&m.push("translate("+g+e+w+i)}function c(u,o,g,w){u!==o?(u-o>180?o+=360:o-u>180&&(u+=360),w.push({i:g.push(s(g)+"rotate(",null,n)-2,x:Hr(u,o)})):o&&g.push(s(g)+"rotate("+o+n)}function d(u,o,g,w){u!==o?w.push({i:g.push(s(g)+"skewX(",null,n)-2,x:Hr(u,o)}):o&&g.push(s(g)+"skewX("+o+n)}function f(u,o,g,w,m,l){if(u!==g||o!==w){var T=m.push(s(m)+"scale(",null,",",null,")");l.push({i:T-4,x:Hr(u,g)},{i:T-2,x:Hr(o,w)})}else(g!==1||w!==1)&&m.push(s(m)+"scale("+g+","+w+")")}return function(u,o){var g=[],w=[];return u=t(u),o=t(o),a(u.translateX,u.translateY,o.translateX,o.translateY,g,w),c(u.rotate,o.rotate,g,w),d(u.skewX,o.skewX,g,w),f(u.scaleX,u.scaleY,o.scaleX,o.scaleY,g,w),u=o=null,function(m){for(var l=-1,T=w.length,b;++l<T;)g[(b=w[l]).i]=b.x(m);return g.join("")}}}var Zse=P5(Jse,"px, ","px)","deg)"),ere=P5(Qse,", ",")",")"),tre=1e-12;function VD(t){return((t=Math.exp(t))+1/t)/2}function ire(t){return((t=Math.exp(t))-1/t)/2}function nre(t){return((t=Math.exp(2*t))-1)/(t+1)}const sre=function t(e,i,n){function s(a,c){var d=a[0],f=a[1],u=a[2],o=c[0],g=c[1],w=c[2],m=o-d,l=g-f,T=m*m+l*l,b,S;if(T<tre)S=Math.log(w/u)/e,b=function(O){return[d+O*m,f+O*l,u*Math.exp(e*O*S)]};else{var x=Math.sqrt(T),B=(w*w-u*u+n*T)/(2*u*i*x),F=(w*w-u*u-n*T)/(2*w*i*x),I=Math.log(Math.sqrt(B*B+1)-B),A=Math.log(Math.sqrt(F*F+1)-F);S=(A-I)/e,b=function(O){var R=O*S,D=VD(I),P=u/(i*x)*(D*nre(e*R+I)-ire(I));return[d+P*m,f+P*l,u*D/VD(e*R+I)]}}return b.duration=S*1e3*e/Math.SQRT2,b}return s.rho=function(a){var c=Math.max(.001,+a),d=c*c,f=d*d;return t(c,d,f)},s}(Math.SQRT2,2,4);function $5(t){return function(e,i){var n=t((e=WT(e)).h,(i=WT(i)).h),s=tn(e.s,i.s),a=tn(e.l,i.l),c=tn(e.opacity,i.opacity);return function(d){return e.h=n(d),e.s=s(d),e.l=a(d),e.opacity=c(d),e+""}}}const rre=$5(mE);var are=$5(tn);function ore(t,e){var i=tn((t=YT(t)).l,(e=YT(e)).l),n=tn(t.a,e.a),s=tn(t.b,e.b),a=tn(t.opacity,e.opacity);return function(c){return t.l=i(c),t.a=n(c),t.b=s(c),t.opacity=a(c),t+""}}function U5(t){return function(e,i){var n=t((e=XT(e)).h,(i=XT(i)).h),s=tn(e.c,i.c),a=tn(e.l,i.l),c=tn(e.opacity,i.opacity);return function(d){return e.h=n(d),e.c=s(d),e.l=a(d),e.opacity=c(d),e+""}}}const lre=U5(mE);var cre=U5(tn);function z5(t){return function e(i){i=+i;function n(s,a){var c=t((s=jI(s)).h,(a=jI(a)).h),d=tn(s.s,a.s),f=tn(s.l,a.l),u=tn(s.opacity,a.opacity);return function(o){return s.h=c(o),s.s=d(o),s.l=f(Math.pow(o,i)),s.opacity=u(o),s+""}}return n.gamma=e,n}(1)}const dre=z5(mE);var fre=z5(tn);function NM(t,e){e===void 0&&(e=t,t=yd);for(var i=0,n=e.length-1,s=e[0],a=new Array(n<0?0:n);i<n;)a[i]=t(s,s=e[++i]);return function(c){var d=Math.max(0,Math.min(n-1,Math.floor(c*=n)));return a[d](c-d)}}function ure(t,e){for(var i=new Array(e),n=0;n<e;++n)i[n]=t(n/(e-1));return i}const hre=Object.freeze(Object.defineProperty({__proto__:null,interpolate:yd,interpolateArray:Wse,interpolateBasis:k5,interpolateBasisClosed:F5,interpolateCubehelix:dre,interpolateCubehelixLong:fre,interpolateDate:C5,interpolateDiscrete:Xse,interpolateHcl:lre,interpolateHclLong:cre,interpolateHsl:rre,interpolateHslLong:are,interpolateHue:Kse,interpolateLab:ore,interpolateNumber:Hr,interpolateNumberArray:OM,interpolateObject:R5,interpolateRgb:qI,interpolateRgbBasis:Gse,interpolateRgbBasisClosed:Vse,interpolateRound:Fm,interpolateString:L5,interpolateTransformCss:Zse,interpolateTransformSvg:ere,interpolateZoom:sre,piecewise:NM,quantize:ure},Symbol.toStringTag,{value:"Module"}));var xp=0,xy=0,j_=0,j5=1e3,KT,By,JT=0,Wf=0,wE=0,Ag=typeof performance=="object"&&performance.now?performance:Date,q5=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function CM(){return Wf||(q5(pre),Wf=Ag.now()+wE)}function pre(){Wf=0}function QT(){this._call=this._time=this._next=null}QT.prototype=G5.prototype={constructor:QT,restart:function(t,e,i){if(typeof t!="function")throw new TypeError("callback is not a function");i=(i==null?CM():+i)+(e==null?0:+e),!this._next&&By!==this&&(By?By._next=this:KT=this,By=this),this._call=t,this._time=i,WI()},stop:function(){this._call&&(this._call=null,this._time=1/0,WI())}};function G5(t,e,i){var n=new QT;return n.restart(t,e,i),n}function _re(){CM(),++xp;for(var t=KT,e;t;)(e=Wf-t._time)>=0&&t._call.call(void 0,e),t=t._next;--xp}function WD(){Wf=(JT=Ag.now())+wE,xp=xy=0;try{_re()}finally{xp=0,gre(),Wf=0}}function yre(){var t=Ag.now(),e=t-JT;e>j5&&(wE-=e,JT=t)}function gre(){for(var t,e=KT,i,n=1/0;e;)e._call?(n>e._time&&(n=e._time),t=e,e=e._next):(i=e._next,e._next=null,e=t?t._next=i:KT=i);By=t,WI(n)}function WI(t){if(!xp){xy&&(xy=clearTimeout(xy));var e=t-Wf;e>24?(t<1/0&&(xy=setTimeout(WD,t-Ag.now()-wE)),j_&&(j_=clearInterval(j_))):(j_||(JT=Ag.now(),j_=setInterval(yre,j5)),xp=1,q5(WD))}}function mre(t,e,i){var n=new QT,s=e;return e==null?(n.restart(t,e,i),n):(n._restart=n.restart,n.restart=function(a,c,d){c=+c,d=d==null?CM():+d,n._restart(function f(u){u+=s,n._restart(f,s+=c,d),a(u)},c,d)},n.restart(t,e,i),n)}const HI=Math.PI,YI=2*HI,rf=1e-6,wre=YI-rf;function V5(t){this._+=t[0];for(let e=1,i=t.length;e<i;++e)this._+=arguments[e]+t[e]}function bre(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return V5;const i=10**e;return function(n){this._+=n[0];for(let s=1,a=n.length;s<a;++s)this._+=Math.round(arguments[s]*i)/i+n[s]}}let RM=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?V5:bre(e)}moveTo(e,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+i}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,i){this._append`L${this._x1=+e},${this._y1=+i}`}quadraticCurveTo(e,i,n,s){this._append`Q${+e},${+i},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(e,i,n,s,a,c){this._append`C${+e},${+i},${+n},${+s},${this._x1=+a},${this._y1=+c}`}arcTo(e,i,n,s,a){if(e=+e,i=+i,n=+n,s=+s,a=+a,a<0)throw new Error(`negative radius: ${a}`);let c=this._x1,d=this._y1,f=n-e,u=s-i,o=c-e,g=d-i,w=o*o+g*g;if(this._x1===null)this._append`M${this._x1=e},${this._y1=i}`;else if(w>rf)if(!(Math.abs(g*f-u*o)>rf)||!a)this._append`L${this._x1=e},${this._y1=i}`;else{let m=n-c,l=s-d,T=f*f+u*u,b=m*m+l*l,S=Math.sqrt(T),x=Math.sqrt(w),B=a*Math.tan((HI-Math.acos((T+w-b)/(2*S*x)))/2),F=B/x,I=B/S;Math.abs(F-1)>rf&&this._append`L${e+F*o},${i+F*g}`,this._append`A${a},${a},0,0,${+(g*m>o*l)},${this._x1=e+I*f},${this._y1=i+I*u}`}}arc(e,i,n,s,a,c){if(e=+e,i=+i,n=+n,c=!!c,n<0)throw new Error(`negative radius: ${n}`);let d=n*Math.cos(s),f=n*Math.sin(s),u=e+d,o=i+f,g=1^c,w=c?s-a:a-s;this._x1===null?this._append`M${u},${o}`:(Math.abs(this._x1-u)>rf||Math.abs(this._y1-o)>rf)&&this._append`L${u},${o}`,n&&(w<0&&(w=w%YI+YI),w>wre?this._append`A${n},${n},0,1,${g},${e-d},${i-f}A${n},${n},0,1,${g},${this._x1=u},${this._y1=o}`:w>rf&&this._append`A${n},${n},0,${+(w>=HI)},${g},${this._x1=e+n*Math.cos(a)},${this._y1=i+n*Math.sin(a)}`)}rect(e,i,n,s){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+i}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}};function bE(){return new RM}bE.prototype=RM.prototype;const Tl=11102230246251565e-32,Tn=134217729,Tre=(3+8*Tl)*Tl;function Ux(t,e,i,n,s){let a,c,d,f,u=e[0],o=n[0],g=0,w=0;o>u==o>-u?(a=u,u=e[++g]):(a=o,o=n[++w]);let m=0;if(g<t&&w<i)for(o>u==o>-u?(c=u+a,d=a-(c-u),u=e[++g]):(c=o+a,d=a-(c-o),o=n[++w]),a=c,d!==0&&(s[m++]=d);g<t&&w<i;)o>u==o>-u?(c=a+u,f=c-a,d=a-(c-f)+(u-f),u=e[++g]):(c=a+o,f=c-a,d=a-(c-f)+(o-f),o=n[++w]),a=c,d!==0&&(s[m++]=d);for(;g<t;)c=a+u,f=c-a,d=a-(c-f)+(u-f),u=e[++g],a=c,d!==0&&(s[m++]=d);for(;w<i;)c=a+o,f=c-a,d=a-(c-f)+(o-f),o=n[++w],a=c,d!==0&&(s[m++]=d);return(a!==0||m===0)&&(s[m++]=a),m}function vre(t,e){let i=e[0];for(let n=1;n<t;n++)i+=e[n];return i}function Mm(t){return new Float64Array(t)}const Ere=(3+16*Tl)*Tl,Sre=(2+12*Tl)*Tl,xre=(9+64*Tl)*Tl*Tl,Wu=Mm(4),HD=Mm(8),YD=Mm(12),XD=Mm(16),$n=Mm(4);function Bre(t,e,i,n,s,a,c){let d,f,u,o,g,w,m,l,T,b,S,x,B,F,I,A,O,R;const D=t-s,P=i-s,U=e-a,Y=n-a;F=D*Y,w=Tn*D,m=w-(w-D),l=D-m,w=Tn*Y,T=w-(w-Y),b=Y-T,I=l*b-(F-m*T-l*T-m*b),A=U*P,w=Tn*U,m=w-(w-U),l=U-m,w=Tn*P,T=w-(w-P),b=P-T,O=l*b-(A-m*T-l*T-m*b),S=I-O,g=I-S,Wu[0]=I-(S+g)+(g-O),x=F+S,g=x-F,B=F-(x-g)+(S-g),S=B-A,g=B-S,Wu[1]=B-(S+g)+(g-A),R=x+S,g=R-x,Wu[2]=x-(R-g)+(S-g),Wu[3]=R;let z=vre(4,Wu),W=Sre*c;if(z>=W||-z>=W||(g=t-D,d=t-(D+g)+(g-s),g=i-P,u=i-(P+g)+(g-s),g=e-U,f=e-(U+g)+(g-a),g=n-Y,o=n-(Y+g)+(g-a),d===0&&f===0&&u===0&&o===0)||(W=xre*c+Tre*Math.abs(z),z+=D*o+Y*d-(U*u+P*f),z>=W||-z>=W))return z;F=d*Y,w=Tn*d,m=w-(w-d),l=d-m,w=Tn*Y,T=w-(w-Y),b=Y-T,I=l*b-(F-m*T-l*T-m*b),A=f*P,w=Tn*f,m=w-(w-f),l=f-m,w=Tn*P,T=w-(w-P),b=P-T,O=l*b-(A-m*T-l*T-m*b),S=I-O,g=I-S,$n[0]=I-(S+g)+(g-O),x=F+S,g=x-F,B=F-(x-g)+(S-g),S=B-A,g=B-S,$n[1]=B-(S+g)+(g-A),R=x+S,g=R-x,$n[2]=x-(R-g)+(S-g),$n[3]=R;const V=Ux(4,Wu,4,$n,HD);F=D*o,w=Tn*D,m=w-(w-D),l=D-m,w=Tn*o,T=w-(w-o),b=o-T,I=l*b-(F-m*T-l*T-m*b),A=U*u,w=Tn*U,m=w-(w-U),l=U-m,w=Tn*u,T=w-(w-u),b=u-T,O=l*b-(A-m*T-l*T-m*b),S=I-O,g=I-S,$n[0]=I-(S+g)+(g-O),x=F+S,g=x-F,B=F-(x-g)+(S-g),S=B-A,g=B-S,$n[1]=B-(S+g)+(g-A),R=x+S,g=R-x,$n[2]=x-(R-g)+(S-g),$n[3]=R;const H=Ux(V,HD,4,$n,YD);F=d*o,w=Tn*d,m=w-(w-d),l=d-m,w=Tn*o,T=w-(w-o),b=o-T,I=l*b-(F-m*T-l*T-m*b),A=f*u,w=Tn*f,m=w-(w-f),l=f-m,w=Tn*u,T=w-(w-u),b=u-T,O=l*b-(A-m*T-l*T-m*b),S=I-O,g=I-S,$n[0]=I-(S+g)+(g-O),x=F+S,g=x-F,B=F-(x-g)+(S-g),S=B-A,g=B-S,$n[1]=B-(S+g)+(g-A),R=x+S,g=R-x,$n[2]=x-(R-g)+(S-g),$n[3]=R;const J=Ux(H,YD,4,$n,XD);return XD[J-1]}function Wb(t,e,i,n,s,a){const c=(e-a)*(i-s),d=(t-s)*(n-a),f=c-d;if(c===0||d===0||c>0!=d>0)return f;const u=Math.abs(c+d);return Math.abs(f)>=Ere*u?f:-Bre(t,e,i,n,s,a,u)}const KD=Math.pow(2,-52),Hb=new Uint32Array(512);class ZT{static from(e,i=Are,n=Ore){const s=e.length,a=new Float64Array(s*2);for(let c=0;c<s;c++){const d=e[c];a[2*c]=i(d),a[2*c+1]=n(d)}return new ZT(a)}constructor(e){const i=e.length>>1;if(i>0&&typeof e[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=e;const n=Math.max(2*i-5,0);this._triangles=new Uint32Array(n*3),this._halfedges=new Int32Array(n*3),this._hashSize=Math.ceil(Math.sqrt(i)),this._hullPrev=new Uint32Array(i),this._hullNext=new Uint32Array(i),this._hullTri=new Uint32Array(i),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(i),this._dists=new Float64Array(i),this.update()}update(){const{coords:e,_hullPrev:i,_hullNext:n,_hullTri:s,_hullHash:a}=this,c=e.length>>1;let d=1/0,f=1/0,u=-1/0,o=-1/0;for(let P=0;P<c;P++){const U=e[2*P],Y=e[2*P+1];U<d&&(d=U),Y<f&&(f=Y),U>u&&(u=U),Y>o&&(o=Y),this._ids[P]=P}const g=(d+u)/2,w=(f+o)/2;let m=1/0,l,T,b;for(let P=0;P<c;P++){const U=zx(g,w,e[2*P],e[2*P+1]);U<m&&(l=P,m=U)}const S=e[2*l],x=e[2*l+1];m=1/0;for(let P=0;P<c;P++){if(P===l)continue;const U=zx(S,x,e[2*P],e[2*P+1]);U<m&&U>0&&(T=P,m=U)}let B=e[2*T],F=e[2*T+1],I=1/0;for(let P=0;P<c;P++){if(P===l||P===T)continue;const U=Fre(S,x,B,F,e[2*P],e[2*P+1]);U<I&&(b=P,I=U)}let A=e[2*b],O=e[2*b+1];if(I===1/0){for(let Y=0;Y<c;Y++)this._dists[Y]=e[2*Y]-e[0]||e[2*Y+1]-e[1];Ah(this._ids,this._dists,0,c-1);const P=new Uint32Array(c);let U=0;for(let Y=0,z=-1/0;Y<c;Y++){const W=this._ids[Y];this._dists[W]>z&&(P[U++]=W,z=this._dists[W])}this.hull=P.subarray(0,U),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Wb(S,x,B,F,A,O)<0){const P=T,U=B,Y=F;T=b,B=A,F=O,b=P,A=U,O=Y}const R=Mre(S,x,B,F,A,O);this._cx=R.x,this._cy=R.y;for(let P=0;P<c;P++)this._dists[P]=zx(e[2*P],e[2*P+1],R.x,R.y);Ah(this._ids,this._dists,0,c-1),this._hullStart=l;let D=3;n[l]=i[b]=T,n[T]=i[l]=b,n[b]=i[T]=l,s[l]=0,s[T]=1,s[b]=2,a.fill(-1),a[this._hashKey(S,x)]=l,a[this._hashKey(B,F)]=T,a[this._hashKey(A,O)]=b,this.trianglesLen=0,this._addTriangle(l,T,b,-1,-1,-1);for(let P=0,U,Y;P<this._ids.length;P++){const z=this._ids[P],W=e[2*z],V=e[2*z+1];if(P>0&&Math.abs(W-U)<=KD&&Math.abs(V-Y)<=KD||(U=W,Y=V,z===l||z===T||z===b))continue;let H=0;for(let ne=0,Ae=this._hashKey(W,V);ne<this._hashSize&&(H=a[(Ae+ne)%this._hashSize],!(H!==-1&&H!==n[H]));ne++);H=i[H];let J=H,G;for(;G=n[J],Wb(W,V,e[2*J],e[2*J+1],e[2*G],e[2*G+1])>=0;)if(J=G,J===H){J=-1;break}if(J===-1)continue;let le=this._addTriangle(J,z,n[J],-1,-1,s[J]);s[z]=this._legalize(le+2),s[J]=le,D++;let pe=n[J];for(;G=n[pe],Wb(W,V,e[2*pe],e[2*pe+1],e[2*G],e[2*G+1])<0;)le=this._addTriangle(pe,z,G,s[z],-1,s[pe]),s[z]=this._legalize(le+2),n[pe]=pe,D--,pe=G;if(J===H)for(;G=i[J],Wb(W,V,e[2*G],e[2*G+1],e[2*J],e[2*J+1])<0;)le=this._addTriangle(G,z,J,-1,s[J],s[G]),this._legalize(le+2),s[G]=le,n[J]=J,D--,J=G;this._hullStart=i[z]=J,n[J]=i[pe]=z,n[z]=pe,a[this._hashKey(W,V)]=z,a[this._hashKey(e[2*J],e[2*J+1])]=J}this.hull=new Uint32Array(D);for(let P=0,U=this._hullStart;P<D;P++)this.hull[P]=U,U=n[U];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,i){return Math.floor(Ire(e-this._cx,i-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:i,_halfedges:n,coords:s}=this;let a=0,c=0;for(;;){const d=n[e],f=e-e%3;if(c=f+(e+2)%3,d===-1){if(a===0)break;e=Hb[--a];continue}const u=d-d%3,o=f+(e+1)%3,g=u+(d+2)%3,w=i[c],m=i[e],l=i[o],T=i[g];if(kre(s[2*w],s[2*w+1],s[2*m],s[2*m+1],s[2*l],s[2*l+1],s[2*T],s[2*T+1])){i[e]=T,i[d]=w;const S=n[g];if(S===-1){let B=this._hullStart;do{if(this._hullTri[B]===g){this._hullTri[B]=e;break}B=this._hullPrev[B]}while(B!==this._hullStart)}this._link(e,S),this._link(d,n[c]),this._link(c,g);const x=u+(d+1)%3;a<Hb.length&&(Hb[a++]=x)}else{if(a===0)break;e=Hb[--a]}}return c}_link(e,i){this._halfedges[e]=i,i!==-1&&(this._halfedges[i]=e)}_addTriangle(e,i,n,s,a,c){const d=this.trianglesLen;return this._triangles[d]=e,this._triangles[d+1]=i,this._triangles[d+2]=n,this._link(d,s),this._link(d+1,a),this._link(d+2,c),this.trianglesLen+=3,d}}function Ire(t,e){const i=t/(Math.abs(t)+Math.abs(e));return(e>0?3-i:1+i)/4}function zx(t,e,i,n){const s=t-i,a=e-n;return s*s+a*a}function kre(t,e,i,n,s,a,c,d){const f=t-c,u=e-d,o=i-c,g=n-d,w=s-c,m=a-d,l=f*f+u*u,T=o*o+g*g,b=w*w+m*m;return f*(g*b-T*m)-u*(o*b-T*w)+l*(o*m-g*w)<0}function Fre(t,e,i,n,s,a){const c=i-t,d=n-e,f=s-t,u=a-e,o=c*c+d*d,g=f*f+u*u,w=.5/(c*u-d*f),m=(u*o-d*g)*w,l=(c*g-f*o)*w;return m*m+l*l}function Mre(t,e,i,n,s,a){const c=i-t,d=n-e,f=s-t,u=a-e,o=c*c+d*d,g=f*f+u*u,w=.5/(c*u-d*f),m=t+(u*o-d*g)*w,l=e+(c*g-f*o)*w;return{x:m,y:l}}function Ah(t,e,i,n){if(n-i<=20)for(let s=i+1;s<=n;s++){const a=t[s],c=e[a];let d=s-1;for(;d>=i&&e[t[d]]>c;)t[d+1]=t[d--];t[d+1]=a}else{const s=i+n>>1;let a=i+1,c=n;q_(t,s,a),e[t[i]]>e[t[n]]&&q_(t,i,n),e[t[a]]>e[t[n]]&&q_(t,a,n),e[t[i]]>e[t[a]]&&q_(t,i,a);const d=t[a],f=e[d];for(;;){do a++;while(e[t[a]]<f);do c--;while(e[t[c]]>f);if(c<a)break;q_(t,a,c)}t[i+1]=t[c],t[c]=d,n-a+1>=c-i?(Ah(t,e,a,n),Ah(t,e,i,c-1)):(Ah(t,e,i,c-1),Ah(t,e,a,n))}}function q_(t,e,i){const n=t[e];t[e]=t[i],t[i]=n}function Are(t){return t[0]}function Ore(t){return t[1]}const JD=1e-6;class wf{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,i){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+i}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,i){this._+=`L${this._x1=+e},${this._y1=+i}`}arc(e,i,n){e=+e,i=+i,n=+n;const s=e+n,a=i;if(n<0)throw new Error("negative radius");this._x1===null?this._+=`M${s},${a}`:(Math.abs(this._x1-s)>JD||Math.abs(this._y1-a)>JD)&&(this._+="L"+s+","+a),n&&(this._+=`A${n},${n},0,1,1,${e-n},${i}A${n},${n},0,1,1,${this._x1=s},${this._y1=a}`)}rect(e,i,n,s){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+i}h${+n}v${+s}h${-n}Z`}value(){return this._||null}}class XI{constructor(){this._=[]}moveTo(e,i){this._.push([e,i])}closePath(){this._.push(this._[0].slice())}lineTo(e,i){this._.push([e,i])}value(){return this._.length?this._:null}}let Nre=class{constructor(e,[i,n,s,a]=[0,0,960,500]){if(!((s=+s)>=(i=+i))||!((a=+a)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(e.points.length*2),this.vectors=new Float64Array(e.points.length*2),this.xmax=s,this.xmin=i,this.ymax=a,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:e,hull:i,triangles:n},vectors:s}=this,a=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let m=0,l=0,T=n.length,b,S;m<T;m+=3,l+=2){const x=n[m]*2,B=n[m+1]*2,F=n[m+2]*2,I=e[x],A=e[x+1],O=e[B],R=e[B+1],D=e[F],P=e[F+1],U=O-I,Y=R-A,z=D-I,W=P-A,V=(U*W-Y*z)*2;if(Math.abs(V)<1e-9){let H=1e9;const J=n[0]*2;H*=Math.sign((e[J]-I)*W-(e[J+1]-A)*z),b=(I+D)/2-H*W,S=(A+P)/2+H*z}else{const H=1/V,J=U*U+Y*Y,G=z*z+W*W;b=I+(W*J-Y*G)*H,S=A+(U*G-z*J)*H}a[l]=b,a[l+1]=S}let c=i[i.length-1],d,f=c*4,u,o=e[2*c],g,w=e[2*c+1];s.fill(0);for(let m=0;m<i.length;++m)c=i[m],d=f,u=o,g=w,f=c*4,o=e[2*c],w=e[2*c+1],s[d+2]=s[f]=g-w,s[d+3]=s[f+1]=o-u}render(e){const i=e==null?e=new wf:void 0,{delaunay:{halfedges:n,inedges:s,hull:a},circumcenters:c,vectors:d}=this;if(a.length<=1)return null;for(let o=0,g=n.length;o<g;++o){const w=n[o];if(w<o)continue;const m=Math.floor(o/3)*2,l=Math.floor(w/3)*2,T=c[m],b=c[m+1],S=c[l],x=c[l+1];this._renderSegment(T,b,S,x,e)}let f,u=a[a.length-1];for(let o=0;o<a.length;++o){f=u,u=a[o];const g=Math.floor(s[u]/3)*2,w=c[g],m=c[g+1],l=f*4,T=this._project(w,m,d[l+2],d[l+3]);T&&this._renderSegment(w,m,T[0],T[1],e)}return i&&i.value()}renderBounds(e){const i=e==null?e=new wf:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),i&&i.value()}renderCell(e,i){const n=i==null?i=new wf:void 0,s=this._clip(e);if(s===null||!s.length)return;i.moveTo(s[0],s[1]);let a=s.length;for(;s[0]===s[a-2]&&s[1]===s[a-1]&&a>1;)a-=2;for(let c=2;c<a;c+=2)(s[c]!==s[c-2]||s[c+1]!==s[c-1])&&i.lineTo(s[c],s[c+1]);return i.closePath(),n&&n.value()}*cellPolygons(){const{delaunay:{points:e}}=this;for(let i=0,n=e.length/2;i<n;++i){const s=this.cellPolygon(i);s&&(s.index=i,yield s)}}cellPolygon(e){const i=new XI;return this.renderCell(e,i),i.value()}_renderSegment(e,i,n,s,a){let c;const d=this._regioncode(e,i),f=this._regioncode(n,s);d===0&&f===0?(a.moveTo(e,i),a.lineTo(n,s)):(c=this._clipSegment(e,i,n,s,d,f))&&(a.moveTo(c[0],c[1]),a.lineTo(c[2],c[3]))}contains(e,i,n){return i=+i,i!==i||(n=+n,n!==n)?!1:this.delaunay._step(e,i,n)===e}*neighbors(e){const i=this._clip(e);if(i)for(const n of this.delaunay.neighbors(e)){const s=this._clip(n);if(s){e:for(let a=0,c=i.length;a<c;a+=2)for(let d=0,f=s.length;d<f;d+=2)if(i[a]==s[d]&&i[a+1]==s[d+1]&&i[(a+2)%c]==s[(d+f-2)%f]&&i[(a+3)%c]==s[(d+f-1)%f]){yield n;break e}}}}_cell(e){const{circumcenters:i,delaunay:{inedges:n,halfedges:s,triangles:a}}=this,c=n[e];if(c===-1)return null;const d=[];let f=c;do{const u=Math.floor(f/3);if(d.push(i[u*2],i[u*2+1]),f=f%3===2?f-2:f+1,a[f]!==e)break;f=s[f]}while(f!==c&&f!==-1);return d}_clip(e){if(e===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const i=this._cell(e);if(i===null)return null;const{vectors:n}=this,s=e*4;return n[s]||n[s+1]?this._clipInfinite(e,i,n[s],n[s+1],n[s+2],n[s+3]):this._clipFinite(e,i)}_clipFinite(e,i){const n=i.length;let s=null,a,c,d=i[n-2],f=i[n-1],u,o=this._regioncode(d,f),g,w=0;for(let m=0;m<n;m+=2)if(a=d,c=f,d=i[m],f=i[m+1],u=o,o=this._regioncode(d,f),u===0&&o===0)g=w,w=0,s?s.push(d,f):s=[d,f];else{let l,T,b,S,x;if(u===0){if((l=this._clipSegment(a,c,d,f,u,o))===null)continue;[T,b,S,x]=l}else{if((l=this._clipSegment(d,f,a,c,o,u))===null)continue;[S,x,T,b]=l,g=w,w=this._edgecode(T,b),g&&w&&this._edge(e,g,w,s,s.length),s?s.push(T,b):s=[T,b]}g=w,w=this._edgecode(S,x),g&&w&&this._edge(e,g,w,s,s.length),s?s.push(S,x):s=[S,x]}if(s)g=w,w=this._edgecode(s[0],s[1]),g&&w&&this._edge(e,g,w,s,s.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return s}_clipSegment(e,i,n,s,a,c){for(;;){if(a===0&&c===0)return[e,i,n,s];if(a&c)return null;let d,f,u=a||c;u&8?(d=e+(n-e)*(this.ymax-i)/(s-i),f=this.ymax):u&4?(d=e+(n-e)*(this.ymin-i)/(s-i),f=this.ymin):u&2?(f=i+(s-i)*(this.xmax-e)/(n-e),d=this.xmax):(f=i+(s-i)*(this.xmin-e)/(n-e),d=this.xmin),a?(e=d,i=f,a=this._regioncode(e,i)):(n=d,s=f,c=this._regioncode(n,s))}}_clipInfinite(e,i,n,s,a,c){let d=Array.from(i),f;if((f=this._project(d[0],d[1],n,s))&&d.unshift(f[0],f[1]),(f=this._project(d[d.length-2],d[d.length-1],a,c))&&d.push(f[0],f[1]),d=this._clipFinite(e,d))for(let u=0,o=d.length,g,w=this._edgecode(d[o-2],d[o-1]);u<o;u+=2)g=w,w=this._edgecode(d[u],d[u+1]),g&&w&&(u=this._edge(e,g,w,d,u),o=d.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(d=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return d}_edge(e,i,n,s,a){for(;i!==n;){let c,d;switch(i){case 5:i=4;continue;case 4:i=6,c=this.xmax,d=this.ymin;break;case 6:i=2;continue;case 2:i=10,c=this.xmax,d=this.ymax;break;case 10:i=8;continue;case 8:i=9,c=this.xmin,d=this.ymax;break;case 9:i=1;continue;case 1:i=5,c=this.xmin,d=this.ymin;break}(s[a]!==c||s[a+1]!==d)&&this.contains(e,c,d)&&(s.splice(a,0,c,d),a+=2)}if(s.length>4)for(let c=0;c<s.length;c+=2){const d=(c+2)%s.length,f=(c+4)%s.length;(s[c]===s[d]&&s[d]===s[f]||s[c+1]===s[d+1]&&s[d+1]===s[f+1])&&(s.splice(d,2),c-=2)}return a}_project(e,i,n,s){let a=1/0,c,d,f;if(s<0){if(i<=this.ymin)return null;(c=(this.ymin-i)/s)<a&&(f=this.ymin,d=e+(a=c)*n)}else if(s>0){if(i>=this.ymax)return null;(c=(this.ymax-i)/s)<a&&(f=this.ymax,d=e+(a=c)*n)}if(n>0){if(e>=this.xmax)return null;(c=(this.xmax-e)/n)<a&&(d=this.xmax,f=i+(a=c)*s)}else if(n<0){if(e<=this.xmin)return null;(c=(this.xmin-e)/n)<a&&(d=this.xmin,f=i+(a=c)*s)}return[d,f]}_edgecode(e,i){return(e===this.xmin?1:e===this.xmax?2:0)|(i===this.ymin?4:i===this.ymax?8:0)}_regioncode(e,i){return(e<this.xmin?1:e>this.xmax?2:0)|(i<this.ymin?4:i>this.ymax?8:0)}};const Cre=2*Math.PI,Hu=Math.pow;function Rre(t){return t[0]}function Lre(t){return t[1]}function Dre(t){const{triangles:e,coords:i}=t;for(let n=0;n<e.length;n+=3){const s=2*e[n],a=2*e[n+1],c=2*e[n+2];if((i[c]-i[s])*(i[a+1]-i[s+1])-(i[a]-i[s])*(i[c+1]-i[s+1])>1e-10)return!1}return!0}function Pre(t,e,i){return[t+Math.sin(t+e)*i,e+Math.cos(t-e)*i]}class LM{static from(e,i=Rre,n=Lre,s){return new LM("length"in e?$re(e,i,n,s):Float64Array.from(Ure(e,i,n,s)))}constructor(e){this._delaunator=new ZT(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const e=this._delaunator,i=this.points;if(e.hull&&e.hull.length>2&&Dre(e)){this.collinear=Int32Array.from({length:i.length/2},(w,m)=>m).sort((w,m)=>i[2*w]-i[2*m]||i[2*w+1]-i[2*m+1]);const f=this.collinear[0],u=this.collinear[this.collinear.length-1],o=[i[2*f],i[2*f+1],i[2*u],i[2*u+1]],g=1e-8*Math.hypot(o[3]-o[1],o[2]-o[0]);for(let w=0,m=i.length/2;w<m;++w){const l=Pre(i[2*w],i[2*w+1],g);i[2*w]=l[0],i[2*w+1]=l[1]}this._delaunator=new ZT(i)}else delete this.collinear;const n=this.halfedges=this._delaunator.halfedges,s=this.hull=this._delaunator.hull,a=this.triangles=this._delaunator.triangles,c=this.inedges.fill(-1),d=this._hullIndex.fill(-1);for(let f=0,u=n.length;f<u;++f){const o=a[f%3===2?f-2:f+1];(n[f]===-1||c[o]===-1)&&(c[o]=f)}for(let f=0,u=s.length;f<u;++f)d[s[f]]=f;s.length<=2&&s.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=s[0],c[s[0]]=1,s.length===2&&(c[s[1]]=0,this.triangles[1]=s[1],this.triangles[2]=s[1]))}voronoi(e){return new Nre(this,e)}*neighbors(e){const{inedges:i,hull:n,_hullIndex:s,halfedges:a,triangles:c,collinear:d}=this;if(d){const g=d.indexOf(e);g>0&&(yield d[g-1]),g<d.length-1&&(yield d[g+1]);return}const f=i[e];if(f===-1)return;let u=f,o=-1;do{if(yield o=c[u],u=u%3===2?u-2:u+1,c[u]!==e)return;if(u=a[u],u===-1){const g=n[(s[e]+1)%n.length];g!==o&&(yield g);return}}while(u!==f)}find(e,i,n=0){if(e=+e,e!==e||(i=+i,i!==i))return-1;const s=n;let a;for(;(a=this._step(n,e,i))>=0&&a!==n&&a!==s;)n=a;return a}_step(e,i,n){const{inedges:s,hull:a,_hullIndex:c,halfedges:d,triangles:f,points:u}=this;if(s[e]===-1||!u.length)return(e+1)%(u.length>>1);let o=e,g=Hu(i-u[e*2],2)+Hu(n-u[e*2+1],2);const w=s[e];let m=w;do{let l=f[m];const T=Hu(i-u[l*2],2)+Hu(n-u[l*2+1],2);if(T<g&&(g=T,o=l),m=m%3===2?m-2:m+1,f[m]!==e)break;if(m=d[m],m===-1){if(m=a[(c[e]+1)%a.length],m!==l&&Hu(i-u[m*2],2)+Hu(n-u[m*2+1],2)<g)return m;break}}while(m!==w);return o}render(e){const i=e==null?e=new wf:void 0,{points:n,halfedges:s,triangles:a}=this;for(let c=0,d=s.length;c<d;++c){const f=s[c];if(f<c)continue;const u=a[c]*2,o=a[f]*2;e.moveTo(n[u],n[u+1]),e.lineTo(n[o],n[o+1])}return this.renderHull(e),i&&i.value()}renderPoints(e,i){i===void 0&&(!e||typeof e.moveTo!="function")&&(i=e,e=null),i=i==null?2:+i;const n=e==null?e=new wf:void 0,{points:s}=this;for(let a=0,c=s.length;a<c;a+=2){const d=s[a],f=s[a+1];e.moveTo(d+i,f),e.arc(d,f,i,0,Cre)}return n&&n.value()}renderHull(e){const i=e==null?e=new wf:void 0,{hull:n,points:s}=this,a=n[0]*2,c=n.length;e.moveTo(s[a],s[a+1]);for(let d=1;d<c;++d){const f=2*n[d];e.lineTo(s[f],s[f+1])}return e.closePath(),i&&i.value()}hullPolygon(){const e=new XI;return this.renderHull(e),e.value()}renderTriangle(e,i){const n=i==null?i=new wf:void 0,{points:s,triangles:a}=this,c=a[e*=3]*2,d=a[e+1]*2,f=a[e+2]*2;return i.moveTo(s[c],s[c+1]),i.lineTo(s[d],s[d+1]),i.lineTo(s[f],s[f+1]),i.closePath(),n&&n.value()}*trianglePolygons(){const{triangles:e}=this;for(let i=0,n=e.length/3;i<n;++i)yield this.trianglePolygon(i)}trianglePolygon(e){const i=new XI;return this.renderTriangle(e,i),i.value()}}function $re(t,e,i,n){const s=t.length,a=new Float64Array(s*2);for(let c=0;c<s;++c){const d=t[c];a[c*2]=e.call(n,d,c,t),a[c*2+1]=i.call(n,d,c,t)}return a}function*Ure(t,e,i,n){let s=0;for(const a of t)yield e.call(n,a,s,t),yield i.call(n,a,s,t),++s}var QD={},jx={},qx=34,G_=10,Gx=13;function W5(t){return new Function("d","return {"+t.map(function(e,i){return JSON.stringify(e)+": d["+i+'] || ""'}).join(",")+"}")}function zre(t,e){var i=W5(t);return function(n,s){return e(i(n),s,t)}}function ZD(t){var e=Object.create(null),i=[];return t.forEach(function(n){for(var s in n)s in e||i.push(e[s]=s)}),i}function os(t,e){var i=t+"",n=i.length;return n<e?new Array(e-n+1).join(0)+i:i}function jre(t){return t<0?"-"+os(-t,6):t>9999?"+"+os(t,6):os(t,4)}function qre(t){var e=t.getUTCHours(),i=t.getUTCMinutes(),n=t.getUTCSeconds(),s=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":jre(t.getUTCFullYear())+"-"+os(t.getUTCMonth()+1,2)+"-"+os(t.getUTCDate(),2)+(s?"T"+os(e,2)+":"+os(i,2)+":"+os(n,2)+"."+os(s,3)+"Z":n?"T"+os(e,2)+":"+os(i,2)+":"+os(n,2)+"Z":i||e?"T"+os(e,2)+":"+os(i,2)+"Z":"")}function Gre(t){var e=new RegExp('["'+t+`
\r]`),i=t.charCodeAt(0);function n(g,w){var m,l,T=s(g,function(b,S){if(m)return m(b,S-1);l=b,m=w?zre(b,w):W5(b)});return T.columns=l||[],T}function s(g,w){var m=[],l=g.length,T=0,b=0,S,x=l<=0,B=!1;g.charCodeAt(l-1)===G_&&--l,g.charCodeAt(l-1)===Gx&&--l;function F(){if(x)return jx;if(B)return B=!1,QD;var A,O=T,R;if(g.charCodeAt(O)===qx){for(;T++<l&&g.charCodeAt(T)!==qx||g.charCodeAt(++T)===qx;);return(A=T)>=l?x=!0:(R=g.charCodeAt(T++))===G_?B=!0:R===Gx&&(B=!0,g.charCodeAt(T)===G_&&++T),g.slice(O+1,A-1).replace(/""/g,'"')}for(;T<l;){if((R=g.charCodeAt(A=T++))===G_)B=!0;else if(R===Gx)B=!0,g.charCodeAt(T)===G_&&++T;else if(R!==i)continue;return g.slice(O,A)}return x=!0,g.slice(O,l)}for(;(S=F())!==jx;){for(var I=[];S!==QD&&S!==jx;)I.push(S),S=F();w&&(I=w(I,b++))==null||m.push(I)}return m}function a(g,w){return g.map(function(m){return w.map(function(l){return o(m[l])}).join(t)})}function c(g,w){return w==null&&(w=ZD(g)),[w.map(o).join(t)].concat(a(g,w)).join(`
`)}function d(g,w){return w==null&&(w=ZD(g)),a(g,w).join(`
`)}function f(g){return g.map(u).join(`
`)}function u(g){return g.map(o).join(t)}function o(g){return g==null?"":g instanceof Date?qre(g):e.test(g+="")?'"'+g.replace(/"/g,'""')+'"':g}return{parse:n,parseRows:s,format:c,formatBody:d,formatRows:f,formatRow:u,formatValue:o}}function Vre(t,e){var i,n=1;t==null&&(t=0),e==null&&(e=0);function s(){var a,c=i.length,d,f=0,u=0;for(a=0;a<c;++a)d=i[a],f+=d.x,u+=d.y;for(f=(f/c-t)*n,u=(u/c-e)*n,a=0;a<c;++a)d=i[a],d.x-=f,d.y-=u}return s.initialize=function(a){i=a},s.x=function(a){return arguments.length?(t=+a,s):t},s.y=function(a){return arguments.length?(e=+a,s):e},s.strength=function(a){return arguments.length?(n=+a,s):n},s}function Wre(t){const e=+this._x.call(null,t),i=+this._y.call(null,t);return H5(this.cover(e,i),e,i,t)}function H5(t,e,i,n){if(isNaN(e)||isNaN(i))return t;var s,a=t._root,c={data:n},d=t._x0,f=t._y0,u=t._x1,o=t._y1,g,w,m,l,T,b,S,x;if(!a)return t._root=c,t;for(;a.length;)if((T=e>=(g=(d+u)/2))?d=g:u=g,(b=i>=(w=(f+o)/2))?f=w:o=w,s=a,!(a=a[S=b<<1|T]))return s[S]=c,t;if(m=+t._x.call(null,a.data),l=+t._y.call(null,a.data),e===m&&i===l)return c.next=a,s?s[S]=c:t._root=c,t;do s=s?s[S]=new Array(4):t._root=new Array(4),(T=e>=(g=(d+u)/2))?d=g:u=g,(b=i>=(w=(f+o)/2))?f=w:o=w;while((S=b<<1|T)===(x=(l>=w)<<1|m>=g));return s[x]=a,s[S]=c,t}function Hre(t){var e,i,n=t.length,s,a,c=new Array(n),d=new Array(n),f=1/0,u=1/0,o=-1/0,g=-1/0;for(i=0;i<n;++i)isNaN(s=+this._x.call(null,e=t[i]))||isNaN(a=+this._y.call(null,e))||(c[i]=s,d[i]=a,s<f&&(f=s),s>o&&(o=s),a<u&&(u=a),a>g&&(g=a));if(f>o||u>g)return this;for(this.cover(f,u).cover(o,g),i=0;i<n;++i)H5(this,c[i],d[i],t[i]);return this}function Yre(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var i=this._x0,n=this._y0,s=this._x1,a=this._y1;if(isNaN(i))s=(i=Math.floor(t))+1,a=(n=Math.floor(e))+1;else{for(var c=s-i||1,d=this._root,f,u;i>t||t>=s||n>e||e>=a;)switch(u=(e<n)<<1|t<i,f=new Array(4),f[u]=d,d=f,c*=2,u){case 0:s=i+c,a=n+c;break;case 1:i=s-c,a=n+c;break;case 2:s=i+c,n=a-c;break;case 3:i=s-c,n=a-c;break}this._root&&this._root.length&&(this._root=d)}return this._x0=i,this._y0=n,this._x1=s,this._y1=a,this}function Xre(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function Kre(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Yn(t,e,i,n,s){this.node=t,this.x0=e,this.y0=i,this.x1=n,this.y1=s}function Jre(t,e,i){var n,s=this._x0,a=this._y0,c,d,f,u,o=this._x1,g=this._y1,w=[],m=this._root,l,T;for(m&&w.push(new Yn(m,s,a,o,g)),i==null?i=1/0:(s=t-i,a=e-i,o=t+i,g=e+i,i*=i);l=w.pop();)if(!(!(m=l.node)||(c=l.x0)>o||(d=l.y0)>g||(f=l.x1)<s||(u=l.y1)<a))if(m.length){var b=(c+f)/2,S=(d+u)/2;w.push(new Yn(m[3],b,S,f,u),new Yn(m[2],c,S,b,u),new Yn(m[1],b,d,f,S),new Yn(m[0],c,d,b,S)),(T=(e>=S)<<1|t>=b)&&(l=w[w.length-1],w[w.length-1]=w[w.length-1-T],w[w.length-1-T]=l)}else{var x=t-+this._x.call(null,m.data),B=e-+this._y.call(null,m.data),F=x*x+B*B;if(F<i){var I=Math.sqrt(i=F);s=t-I,a=e-I,o=t+I,g=e+I,n=m.data}}return n}function Qre(t){if(isNaN(o=+this._x.call(null,t))||isNaN(g=+this._y.call(null,t)))return this;var e,i=this._root,n,s,a,c=this._x0,d=this._y0,f=this._x1,u=this._y1,o,g,w,m,l,T,b,S;if(!i)return this;if(i.length)for(;;){if((l=o>=(w=(c+f)/2))?c=w:f=w,(T=g>=(m=(d+u)/2))?d=m:u=m,e=i,!(i=i[b=T<<1|l]))return this;if(!i.length)break;(e[b+1&3]||e[b+2&3]||e[b+3&3])&&(n=e,S=b)}for(;i.data!==t;)if(s=i,!(i=i.next))return this;return(a=i.next)&&delete i.next,s?(a?s.next=a:delete s.next,this):e?(a?e[b]=a:delete e[b],(i=e[0]||e[1]||e[2]||e[3])&&i===(e[3]||e[2]||e[1]||e[0])&&!i.length&&(n?n[S]=i:this._root=i),this):(this._root=a,this)}function Zre(t){for(var e=0,i=t.length;e<i;++e)this.remove(t[e]);return this}function eae(){return this._root}function tae(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function iae(t){var e=[],i,n=this._root,s,a,c,d,f;for(n&&e.push(new Yn(n,this._x0,this._y0,this._x1,this._y1));i=e.pop();)if(!t(n=i.node,a=i.x0,c=i.y0,d=i.x1,f=i.y1)&&n.length){var u=(a+d)/2,o=(c+f)/2;(s=n[3])&&e.push(new Yn(s,u,o,d,f)),(s=n[2])&&e.push(new Yn(s,a,o,u,f)),(s=n[1])&&e.push(new Yn(s,u,c,d,o)),(s=n[0])&&e.push(new Yn(s,a,c,u,o))}return this}function nae(t){var e=[],i=[],n;for(this._root&&e.push(new Yn(this._root,this._x0,this._y0,this._x1,this._y1));n=e.pop();){var s=n.node;if(s.length){var a,c=n.x0,d=n.y0,f=n.x1,u=n.y1,o=(c+f)/2,g=(d+u)/2;(a=s[0])&&e.push(new Yn(a,c,d,o,g)),(a=s[1])&&e.push(new Yn(a,o,d,f,g)),(a=s[2])&&e.push(new Yn(a,c,g,o,u)),(a=s[3])&&e.push(new Yn(a,o,g,f,u))}i.push(n)}for(;n=i.pop();)t(n.node,n.x0,n.y0,n.x1,n.y1);return this}function sae(t){return t[0]}function rae(t){return arguments.length?(this._x=t,this):this._x}function aae(t){return t[1]}function oae(t){return arguments.length?(this._y=t,this):this._y}function DM(t,e,i){var n=new PM(e??sae,i??aae,NaN,NaN,NaN,NaN);return t==null?n:n.addAll(t)}function PM(t,e,i,n,s,a){this._x=t,this._y=e,this._x0=i,this._y0=n,this._x1=s,this._y1=a,this._root=void 0}function eP(t){for(var e={data:t.data},i=e;t=t.next;)i=i.next={data:t.data};return e}var ss=DM.prototype=PM.prototype;ss.copy=function(){var t=new PM(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,i,n;if(!e)return t;if(!e.length)return t._root=eP(e),t;for(i=[{source:e,target:t._root=new Array(4)}];e=i.pop();)for(var s=0;s<4;++s)(n=e.source[s])&&(n.length?i.push({source:n,target:e.target[s]=new Array(4)}):e.target[s]=eP(n));return t};ss.add=Wre;ss.addAll=Hre;ss.cover=Yre;ss.data=Xre;ss.extent=Kre;ss.find=Jre;ss.remove=Qre;ss.removeAll=Zre;ss.root=eae;ss.size=tae;ss.visit=iae;ss.visitAfter=nae;ss.x=rae;ss.y=oae;function Jn(t){return function(){return t}}function Tc(t){return(t()-.5)*1e-6}function lae(t){return t.x+t.vx}function cae(t){return t.y+t.vy}function dae(t){var e,i,n,s=1,a=1;typeof t!="function"&&(t=Jn(t==null?1:+t));function c(){for(var u,o=e.length,g,w,m,l,T,b,S=0;S<a;++S)for(g=DM(e,lae,cae).visitAfter(d),u=0;u<o;++u)w=e[u],T=i[w.index],b=T*T,m=w.x+w.vx,l=w.y+w.vy,g.visit(x);function x(B,F,I,A,O){var R=B.data,D=B.r,P=T+D;if(R){if(R.index>w.index){var U=m-R.x-R.vx,Y=l-R.y-R.vy,z=U*U+Y*Y;z<P*P&&(U===0&&(U=Tc(n),z+=U*U),Y===0&&(Y=Tc(n),z+=Y*Y),z=(P-(z=Math.sqrt(z)))/z*s,w.vx+=(U*=z)*(P=(D*=D)/(b+D)),w.vy+=(Y*=z)*P,R.vx-=U*(P=1-P),R.vy-=Y*P)}return}return F>m+P||A<m-P||I>l+P||O<l-P}}function d(u){if(u.data)return u.r=i[u.data.index];for(var o=u.r=0;o<4;++o)u[o]&&u[o].r>u.r&&(u.r=u[o].r)}function f(){if(e){var u,o=e.length,g;for(i=new Array(o),u=0;u<o;++u)g=e[u],i[g.index]=+t(g,u,e)}}return c.initialize=function(u,o){e=u,n=o,f()},c.iterations=function(u){return arguments.length?(a=+u,c):a},c.strength=function(u){return arguments.length?(s=+u,c):s},c.radius=function(u){return arguments.length?(t=typeof u=="function"?u:Jn(+u),f(),c):t},c}function fae(t){return t.index}function tP(t,e){var i=t.get(e);if(!i)throw new Error("node not found: "+e);return i}function uae(t){var e=fae,i=g,n,s=Jn(30),a,c,d,f,u,o=1;t==null&&(t=[]);function g(b){return 1/Math.min(d[b.source.index],d[b.target.index])}function w(b){for(var S=0,x=t.length;S<o;++S)for(var B=0,F,I,A,O,R,D,P;B<x;++B)F=t[B],I=F.source,A=F.target,O=A.x+A.vx-I.x-I.vx||Tc(u),R=A.y+A.vy-I.y-I.vy||Tc(u),D=Math.sqrt(O*O+R*R),D=(D-a[B])/D*b*n[B],O*=D,R*=D,A.vx-=O*(P=f[B]),A.vy-=R*P,I.vx+=O*(P=1-P),I.vy+=R*P}function m(){if(c){var b,S=c.length,x=t.length,B=new Map(c.map((I,A)=>[e(I,A,c),I])),F;for(b=0,d=new Array(S);b<x;++b)F=t[b],F.index=b,typeof F.source!="object"&&(F.source=tP(B,F.source)),typeof F.target!="object"&&(F.target=tP(B,F.target)),d[F.source.index]=(d[F.source.index]||0)+1,d[F.target.index]=(d[F.target.index]||0)+1;for(b=0,f=new Array(x);b<x;++b)F=t[b],f[b]=d[F.source.index]/(d[F.source.index]+d[F.target.index]);n=new Array(x),l(),a=new Array(x),T()}}function l(){if(c)for(var b=0,S=t.length;b<S;++b)n[b]=+i(t[b],b,t)}function T(){if(c)for(var b=0,S=t.length;b<S;++b)a[b]=+s(t[b],b,t)}return w.initialize=function(b,S){c=b,u=S,m()},w.links=function(b){return arguments.length?(t=b,m(),w):t},w.id=function(b){return arguments.length?(e=b,w):e},w.iterations=function(b){return arguments.length?(o=+b,w):o},w.strength=function(b){return arguments.length?(i=typeof b=="function"?b:Jn(+b),l(),w):i},w.distance=function(b){return arguments.length?(s=typeof b=="function"?b:Jn(+b),T(),w):s},w}const hae=1664525,pae=1013904223,iP=4294967296;function _ae(){let t=1;return()=>(t=(hae*t+pae)%iP)/iP}function yae(t){return t.x}function gae(t){return t.y}var mae=10,wae=Math.PI*(3-Math.sqrt(5));function bae(t){var e,i=1,n=.001,s=1-Math.pow(n,1/300),a=0,c=.6,d=new Map,f=G5(g),u=_5("tick","end"),o=_ae();t==null&&(t=[]);function g(){w(),u.call("tick",e),i<n&&(f.stop(),u.call("end",e))}function w(T){var b,S=t.length,x;T===void 0&&(T=1);for(var B=0;B<T;++B)for(i+=(a-i)*s,d.forEach(function(F){F(i)}),b=0;b<S;++b)x=t[b],x.fx==null?x.x+=x.vx*=c:(x.x=x.fx,x.vx=0),x.fy==null?x.y+=x.vy*=c:(x.y=x.fy,x.vy=0);return e}function m(){for(var T=0,b=t.length,S;T<b;++T){if(S=t[T],S.index=T,S.fx!=null&&(S.x=S.fx),S.fy!=null&&(S.y=S.fy),isNaN(S.x)||isNaN(S.y)){var x=mae*Math.sqrt(.5+T),B=T*wae;S.x=x*Math.cos(B),S.y=x*Math.sin(B)}(isNaN(S.vx)||isNaN(S.vy))&&(S.vx=S.vy=0)}}function l(T){return T.initialize&&T.initialize(t,o),T}return m(),e={tick:w,restart:function(){return f.restart(g),e},stop:function(){return f.stop(),e},nodes:function(T){return arguments.length?(t=T,m(),d.forEach(l),e):t},alpha:function(T){return arguments.length?(i=+T,e):i},alphaMin:function(T){return arguments.length?(n=+T,e):n},alphaDecay:function(T){return arguments.length?(s=+T,e):+s},alphaTarget:function(T){return arguments.length?(a=+T,e):a},velocityDecay:function(T){return arguments.length?(c=1-T,e):1-c},randomSource:function(T){return arguments.length?(o=T,d.forEach(l),e):o},force:function(T,b){return arguments.length>1?(b==null?d.delete(T):d.set(T,l(b)),e):d.get(T)},find:function(T,b,S){var x=0,B=t.length,F,I,A,O,R;for(S==null?S=1/0:S*=S,x=0;x<B;++x)O=t[x],F=T-O.x,I=b-O.y,A=F*F+I*I,A<S&&(R=O,S=A);return R},on:function(T,b){return arguments.length>1?(u.on(T,b),e):u.on(T)}}}function Tae(){var t,e,i,n,s=Jn(-30),a,c=1,d=1/0,f=.81;function u(m){var l,T=t.length,b=DM(t,yae,gae).visitAfter(g);for(n=m,l=0;l<T;++l)e=t[l],b.visit(w)}function o(){if(t){var m,l=t.length,T;for(a=new Array(l),m=0;m<l;++m)T=t[m],a[T.index]=+s(T,m,t)}}function g(m){var l=0,T,b,S=0,x,B,F;if(m.length){for(x=B=F=0;F<4;++F)(T=m[F])&&(b=Math.abs(T.value))&&(l+=T.value,S+=b,x+=b*T.x,B+=b*T.y);m.x=x/S,m.y=B/S}else{T=m,T.x=T.data.x,T.y=T.data.y;do l+=a[T.data.index];while(T=T.next)}m.value=l}function w(m,l,T,b){if(!m.value)return!0;var S=m.x-e.x,x=m.y-e.y,B=b-l,F=S*S+x*x;if(B*B/f<F)return F<d&&(S===0&&(S=Tc(i),F+=S*S),x===0&&(x=Tc(i),F+=x*x),F<c&&(F=Math.sqrt(c*F)),e.vx+=S*m.value*n/F,e.vy+=x*m.value*n/F),!0;if(m.length||F>=d)return;(m.data!==e||m.next)&&(S===0&&(S=Tc(i),F+=S*S),x===0&&(x=Tc(i),F+=x*x),F<c&&(F=Math.sqrt(c*F)));do m.data!==e&&(B=a[m.data.index]*n/F,e.vx+=S*B,e.vy+=x*B);while(m=m.next)}return u.initialize=function(m,l){t=m,i=l,o()},u.strength=function(m){return arguments.length?(s=typeof m=="function"?m:Jn(+m),o(),u):s},u.distanceMin=function(m){return arguments.length?(c=m*m,u):Math.sqrt(c)},u.distanceMax=function(m){return arguments.length?(d=m*m,u):Math.sqrt(d)},u.theta=function(m){return arguments.length?(f=m*m,u):Math.sqrt(f)},u}function vae(t){var e=Jn(.1),i,n,s;typeof t!="function"&&(t=Jn(t==null?0:+t));function a(d){for(var f=0,u=i.length,o;f<u;++f)o=i[f],o.vx+=(s[f]-o.x)*n[f]*d}function c(){if(i){var d,f=i.length;for(n=new Array(f),s=new Array(f),d=0;d<f;++d)n[d]=isNaN(s[d]=+t(i[d],d,i))?0:+e(i[d],d,i)}}return a.initialize=function(d){i=d,c()},a.strength=function(d){return arguments.length?(e=typeof d=="function"?d:Jn(+d),c(),a):e},a.x=function(d){return arguments.length?(t=typeof d=="function"?d:Jn(+d),c(),a):t},a}function Eae(t){var e=Jn(.1),i,n,s;typeof t!="function"&&(t=Jn(t==null?0:+t));function a(d){for(var f=0,u=i.length,o;f<u;++f)o=i[f],o.vy+=(s[f]-o.y)*n[f]*d}function c(){if(i){var d,f=i.length;for(n=new Array(f),s=new Array(f),d=0;d<f;++d)n[d]=isNaN(s[d]=+t(i[d],d,i))?0:+e(i[d],d,i)}}return a.initialize=function(d){i=d,c()},a.strength=function(d){return arguments.length?(e=typeof d=="function"?d:Jn(+d),c(),a):e},a.y=function(d){return arguments.length?(t=typeof d=="function"?d:Jn(+d),c(),a):t},a}function Sae(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function e1(t,e){if((i=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var i,n=t.slice(0,i);return[n.length>1?n[0]+n.slice(2):n,+t.slice(i+1)]}function Bp(t){return t=e1(Math.abs(t)),t?t[1]:NaN}function xae(t,e){return function(i,n){for(var s=i.length,a=[],c=0,d=t[0],f=0;s>0&&d>0&&(f+d+1>n&&(d=Math.max(1,n-f)),a.push(i.substring(s-=d,s+d)),!((f+=d+1)>n));)d=t[c=(c+1)%t.length];return a.reverse().join(e)}}function Bae(t){return function(e){return e.replace(/[0-9]/g,function(i){return t[+i]})}}var Iae=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Hf(t){if(!(e=Iae.exec(t)))throw new Error("invalid format: "+t);var e;return new $M({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Hf.prototype=$M.prototype;function $M(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}$M.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function kae(t){e:for(var e=t.length,i=1,n=-1,s;i<e;++i)switch(t[i]){case".":n=s=i;break;case"0":n===0&&(n=i),s=i;break;default:if(!+t[i])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(s+1):t}var Y5;function Fae(t,e){var i=e1(t,e);if(!i)return t+"";var n=i[0],s=i[1],a=s-(Y5=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,c=n.length;return a===c?n:a>c?n+new Array(a-c+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+e1(t,Math.max(0,e+a-1))[0]}function nP(t,e){var i=e1(t,e);if(!i)return t+"";var n=i[0],s=i[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const sP={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Sae,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>nP(t*100,e),r:nP,s:Fae,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function rP(t){return t}var aP=Array.prototype.map,oP=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function X5(t){var e=t.grouping===void 0||t.thousands===void 0?rP:xae(aP.call(t.grouping,Number),t.thousands+""),i=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",s=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?rP:Bae(aP.call(t.numerals,String)),c=t.percent===void 0?"%":t.percent+"",d=t.minus===void 0?"−":t.minus+"",f=t.nan===void 0?"NaN":t.nan+"";function u(g){g=Hf(g);var w=g.fill,m=g.align,l=g.sign,T=g.symbol,b=g.zero,S=g.width,x=g.comma,B=g.precision,F=g.trim,I=g.type;I==="n"?(x=!0,I="g"):sP[I]||(B===void 0&&(B=12),F=!0,I="g"),(b||w==="0"&&m==="=")&&(b=!0,w="0",m="=");var A=T==="$"?i:T==="#"&&/[boxX]/.test(I)?"0"+I.toLowerCase():"",O=T==="$"?n:/[%p]/.test(I)?c:"",R=sP[I],D=/[defgprs%]/.test(I);B=B===void 0?6:/[gprs]/.test(I)?Math.max(1,Math.min(21,B)):Math.max(0,Math.min(20,B));function P(U){var Y=A,z=O,W,V,H;if(I==="c")z=R(U)+z,U="";else{U=+U;var J=U<0||1/U<0;if(U=isNaN(U)?f:R(Math.abs(U),B),F&&(U=kae(U)),J&&+U==0&&l!=="+"&&(J=!1),Y=(J?l==="("?l:d:l==="-"||l==="("?"":l)+Y,z=(I==="s"?oP[8+Y5/3]:"")+z+(J&&l==="("?")":""),D){for(W=-1,V=U.length;++W<V;)if(H=U.charCodeAt(W),48>H||H>57){z=(H===46?s+U.slice(W+1):U.slice(W))+z,U=U.slice(0,W);break}}}x&&!b&&(U=e(U,1/0));var G=Y.length+U.length+z.length,le=G<S?new Array(S-G+1).join(w):"";switch(x&&b&&(U=e(le+U,le.length?S-z.length:1/0),le=""),m){case"<":U=Y+U+z+le;break;case"=":U=Y+le+U+z;break;case"^":U=le.slice(0,G=le.length>>1)+Y+U+z+le.slice(G);break;default:U=le+Y+U+z;break}return a(U)}return P.toString=function(){return g+""},P}function o(g,w){var m=u((g=Hf(g),g.type="f",g)),l=Math.max(-8,Math.min(8,Math.floor(Bp(w)/3)))*3,T=Math.pow(10,-l),b=oP[8+l/3];return function(S){return m(T*S)+b}}return{format:u,formatPrefix:o}}var Yb,TE,UM;Mae({thousands:",",grouping:[3],currency:["$",""]});function Mae(t){return Yb=X5(t),TE=Yb.format,UM=Yb.formatPrefix,Yb}function K5(t){return Math.max(0,-Bp(Math.abs(t)))}function J5(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Bp(e)/3)))*3-Bp(Math.abs(t)))}function Q5(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Bp(e)-Bp(t))+1}var ze=1e-6,t1=1e-12,xt=Math.PI,Fi=xt/2,i1=xt/4,ts=xt*2,Ni=180/xt,Et=xt/180,Mt=Math.abs,p_=Math.atan,kr=Math.atan2,qe=Math.cos,Xb=Math.ceil,Z5=Math.exp,KI=Math.hypot,n1=Math.log,Vx=Math.pow,De=Math.sin,gr=Math.sign||function(t){return t>0?1:t<0?-1:0},is=Math.sqrt,zM=Math.tan;function eq(t){return t>1?0:t<-1?xt:Math.acos(t)}function Bs(t){return t>1?Fi:t<-1?-Fi:Math.asin(t)}function pn(){}function s1(t,e){t&&cP.hasOwnProperty(t.type)&&cP[t.type](t,e)}var lP={Feature:function(t,e){s1(t.geometry,e)},FeatureCollection:function(t,e){for(var i=t.features,n=-1,s=i.length;++n<s;)s1(i[n].geometry,e)}},cP={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var i=t.coordinates,n=-1,s=i.length;++n<s;)t=i[n],e.point(t[0],t[1],t[2])},LineString:function(t,e){JI(t.coordinates,e,0)},MultiLineString:function(t,e){for(var i=t.coordinates,n=-1,s=i.length;++n<s;)JI(i[n],e,0)},Polygon:function(t,e){dP(t.coordinates,e)},MultiPolygon:function(t,e){for(var i=t.coordinates,n=-1,s=i.length;++n<s;)dP(i[n],e)},GeometryCollection:function(t,e){for(var i=t.geometries,n=-1,s=i.length;++n<s;)s1(i[n],e)}};function JI(t,e,i){var n=-1,s=t.length-i,a;for(e.lineStart();++n<s;)a=t[n],e.point(a[0],a[1],a[2]);e.lineEnd()}function dP(t,e){var i=-1,n=t.length;for(e.polygonStart();++i<n;)JI(t[i],e,1);e.polygonEnd()}function fl(t,e){t&&lP.hasOwnProperty(t.type)?lP[t.type](t,e):s1(t,e)}var r1=new Zn,a1=new Zn,tq,iq,QI,ZI,ek,wo={point:pn,lineStart:pn,lineEnd:pn,polygonStart:function(){r1=new Zn,wo.lineStart=Aae,wo.lineEnd=Oae},polygonEnd:function(){var t=+r1;a1.add(t<0?ts+t:t),this.lineStart=this.lineEnd=this.point=pn},sphere:function(){a1.add(ts)}};function Aae(){wo.point=Nae}function Oae(){nq(tq,iq)}function Nae(t,e){wo.point=nq,tq=t,iq=e,t*=Et,e*=Et,QI=t,ZI=qe(e=e/2+i1),ek=De(e)}function nq(t,e){t*=Et,e*=Et,e=e/2+i1;var i=t-QI,n=i>=0?1:-1,s=n*i,a=qe(e),c=De(e),d=ek*c,f=ZI*a+d*qe(s),u=d*n*De(s);r1.add(kr(u,f)),QI=t,ZI=a,ek=c}function Cae(t){return a1=new Zn,fl(t,wo),a1*2}function o1(t){return[kr(t[1],t[0]),Bs(t[2])]}function Yf(t){var e=t[0],i=t[1],n=qe(i);return[n*qe(e),n*De(e),De(i)]}function Kb(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Ip(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Wx(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Jb(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function l1(t){var e=is(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var Ei,fs,Ii,Hs,af,sq,rq,Jh,Qy,fc,Ol,ol={point:tk,lineStart:fP,lineEnd:uP,polygonStart:function(){ol.point=oq,ol.lineStart=Rae,ol.lineEnd=Lae,Qy=new Zn,wo.polygonStart()},polygonEnd:function(){wo.polygonEnd(),ol.point=tk,ol.lineStart=fP,ol.lineEnd=uP,r1<0?(Ei=-(Ii=180),fs=-(Hs=90)):Qy>ze?Hs=90:Qy<-ze&&(fs=-90),Ol[0]=Ei,Ol[1]=Ii},sphere:function(){Ei=-(Ii=180),fs=-(Hs=90)}};function tk(t,e){fc.push(Ol=[Ei=t,Ii=t]),e<fs&&(fs=e),e>Hs&&(Hs=e)}function aq(t,e){var i=Yf([t*Et,e*Et]);if(Jh){var n=Ip(Jh,i),s=[n[1],-n[0],0],a=Ip(s,n);l1(a),a=o1(a);var c=t-af,d=c>0?1:-1,f=a[0]*Ni*d,u,o=Mt(c)>180;o^(d*af<f&&f<d*t)?(u=a[1]*Ni,u>Hs&&(Hs=u)):(f=(f+360)%360-180,o^(d*af<f&&f<d*t)?(u=-a[1]*Ni,u<fs&&(fs=u)):(e<fs&&(fs=e),e>Hs&&(Hs=e))),o?t<af?Vs(Ei,t)>Vs(Ei,Ii)&&(Ii=t):Vs(t,Ii)>Vs(Ei,Ii)&&(Ei=t):Ii>=Ei?(t<Ei&&(Ei=t),t>Ii&&(Ii=t)):t>af?Vs(Ei,t)>Vs(Ei,Ii)&&(Ii=t):Vs(t,Ii)>Vs(Ei,Ii)&&(Ei=t)}else fc.push(Ol=[Ei=t,Ii=t]);e<fs&&(fs=e),e>Hs&&(Hs=e),Jh=i,af=t}function fP(){ol.point=aq}function uP(){Ol[0]=Ei,Ol[1]=Ii,ol.point=tk,Jh=null}function oq(t,e){if(Jh){var i=t-af;Qy.add(Mt(i)>180?i+(i>0?360:-360):i)}else sq=t,rq=e;wo.point(t,e),aq(t,e)}function Rae(){wo.lineStart()}function Lae(){oq(sq,rq),wo.lineEnd(),Mt(Qy)>ze&&(Ei=-(Ii=180)),Ol[0]=Ei,Ol[1]=Ii,Jh=null}function Vs(t,e){return(e-=t)<0?e+360:e}function Dae(t,e){return t[0]-e[0]}function hP(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function Pae(t){var e,i,n,s,a,c,d;if(Hs=Ii=-(Ei=fs=1/0),fc=[],fl(t,ol),i=fc.length){for(fc.sort(Dae),e=1,n=fc[0],a=[n];e<i;++e)s=fc[e],hP(n,s[0])||hP(n,s[1])?(Vs(n[0],s[1])>Vs(n[0],n[1])&&(n[1]=s[1]),Vs(s[0],n[1])>Vs(n[0],n[1])&&(n[0]=s[0])):a.push(n=s);for(c=-1/0,i=a.length-1,e=0,n=a[i];e<=i;n=s,++e)s=a[e],(d=Vs(n[1],s[0]))>c&&(c=d,Ei=s[0],Ii=n[1])}return fc=Ol=null,Ei===1/0||fs===1/0?[[NaN,NaN],[NaN,NaN]]:[[Ei,fs],[Ii,Hs]]}var Iy,c1,d1,f1,u1,h1,p1,_1,ik,nk,sk,lq,cq,Gn,Vn,Wn,ea={sphere:pn,point:jM,lineStart:pP,lineEnd:_P,polygonStart:function(){ea.lineStart=zae,ea.lineEnd=jae},polygonEnd:function(){ea.lineStart=pP,ea.lineEnd=_P}};function jM(t,e){t*=Et,e*=Et;var i=qe(e);Am(i*qe(t),i*De(t),De(e))}function Am(t,e,i){++Iy,d1+=(t-d1)/Iy,f1+=(e-f1)/Iy,u1+=(i-u1)/Iy}function pP(){ea.point=$ae}function $ae(t,e){t*=Et,e*=Et;var i=qe(e);Gn=i*qe(t),Vn=i*De(t),Wn=De(e),ea.point=Uae,Am(Gn,Vn,Wn)}function Uae(t,e){t*=Et,e*=Et;var i=qe(e),n=i*qe(t),s=i*De(t),a=De(e),c=kr(is((c=Vn*a-Wn*s)*c+(c=Wn*n-Gn*a)*c+(c=Gn*s-Vn*n)*c),Gn*n+Vn*s+Wn*a);c1+=c,h1+=c*(Gn+(Gn=n)),p1+=c*(Vn+(Vn=s)),_1+=c*(Wn+(Wn=a)),Am(Gn,Vn,Wn)}function _P(){ea.point=jM}function zae(){ea.point=qae}function jae(){dq(lq,cq),ea.point=jM}function qae(t,e){lq=t,cq=e,t*=Et,e*=Et,ea.point=dq;var i=qe(e);Gn=i*qe(t),Vn=i*De(t),Wn=De(e),Am(Gn,Vn,Wn)}function dq(t,e){t*=Et,e*=Et;var i=qe(e),n=i*qe(t),s=i*De(t),a=De(e),c=Vn*a-Wn*s,d=Wn*n-Gn*a,f=Gn*s-Vn*n,u=KI(c,d,f),o=Bs(u),g=u&&-o/u;ik.add(g*c),nk.add(g*d),sk.add(g*f),c1+=o,h1+=o*(Gn+(Gn=n)),p1+=o*(Vn+(Vn=s)),_1+=o*(Wn+(Wn=a)),Am(Gn,Vn,Wn)}function Gae(t){Iy=c1=d1=f1=u1=h1=p1=_1=0,ik=new Zn,nk=new Zn,sk=new Zn,fl(t,ea);var e=+ik,i=+nk,n=+sk,s=KI(e,i,n);return s<t1&&(e=h1,i=p1,n=_1,c1<ze&&(e=d1,i=f1,n=u1),s=KI(e,i,n),s<t1)?[NaN,NaN]:[kr(i,e)*Ni,Bs(n/s)*Ni]}function rk(t,e){function i(n,s){return n=t(n,s),e(n[0],n[1])}return t.invert&&e.invert&&(i.invert=function(n,s){return n=e.invert(n,s),n&&t.invert(n[0],n[1])}),i}function ak(t,e){return Mt(t)>xt&&(t-=Math.round(t/ts)*ts),[t,e]}ak.invert=ak;function fq(t,e,i){return(t%=ts)?e||i?rk(gP(t),mP(e,i)):gP(t):e||i?mP(e,i):ak}function yP(t){return function(e,i){return e+=t,Mt(e)>xt&&(e-=Math.round(e/ts)*ts),[e,i]}}function gP(t){var e=yP(t);return e.invert=yP(-t),e}function mP(t,e){var i=qe(t),n=De(t),s=qe(e),a=De(e);function c(d,f){var u=qe(f),o=qe(d)*u,g=De(d)*u,w=De(f),m=w*i+o*n;return[kr(g*s-m*a,o*i-w*n),Bs(m*s+g*a)]}return c.invert=function(d,f){var u=qe(f),o=qe(d)*u,g=De(d)*u,w=De(f),m=w*s-g*a;return[kr(g*s+w*a,o*i+m*n),Bs(m*i-o*n)]},c}function Vae(t){t=fq(t[0]*Et,t[1]*Et,t.length>2?t[2]*Et:0);function e(i){return i=t(i[0]*Et,i[1]*Et),i[0]*=Ni,i[1]*=Ni,i}return e.invert=function(i){return i=t.invert(i[0]*Et,i[1]*Et),i[0]*=Ni,i[1]*=Ni,i},e}function Wae(t,e,i,n,s,a){if(i){var c=qe(e),d=De(e),f=n*i;s==null?(s=e+n*ts,a=e-f/2):(s=wP(c,s),a=wP(c,a),(n>0?s<a:s>a)&&(s+=n*ts));for(var u,o=s;n>0?o>a:o<a;o-=f)u=o1([c,-d*qe(o),-d*De(o)]),t.point(u[0],u[1])}}function wP(t,e){e=Yf(e),e[0]-=t,l1(e);var i=eq(-e[1]);return((-e[2]<0?-i:i)+ts-ze)%ts}function uq(){var t=[],e;return{point:function(i,n,s){e.push([i,n,s])},lineStart:function(){t.push(e=[])},lineEnd:pn,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var i=t;return t=[],e=null,i}}}function K0(t,e){return Mt(t[0]-e[0])<ze&&Mt(t[1]-e[1])<ze}function Qb(t,e,i,n){this.x=t,this.z=e,this.o=i,this.e=n,this.v=!1,this.n=this.p=null}function hq(t,e,i,n,s){var a=[],c=[],d,f;if(t.forEach(function(l){if(!((T=l.length-1)<=0)){var T,b=l[0],S=l[T],x;if(K0(b,S)){if(!b[2]&&!S[2]){for(s.lineStart(),d=0;d<T;++d)s.point((b=l[d])[0],b[1]);s.lineEnd();return}S[0]+=2*ze}a.push(x=new Qb(b,l,null,!0)),c.push(x.o=new Qb(b,null,x,!1)),a.push(x=new Qb(S,l,null,!1)),c.push(x.o=new Qb(S,null,x,!0))}}),!!a.length){for(c.sort(e),bP(a),bP(c),d=0,f=c.length;d<f;++d)c[d].e=i=!i;for(var u=a[0],o,g;;){for(var w=u,m=!0;w.v;)if((w=w.n)===u)return;o=w.z,s.lineStart();do{if(w.v=w.o.v=!0,w.e){if(m)for(d=0,f=o.length;d<f;++d)s.point((g=o[d])[0],g[1]);else n(w.x,w.n.x,1,s);w=w.n}else{if(m)for(o=w.p.z,d=o.length-1;d>=0;--d)s.point((g=o[d])[0],g[1]);else n(w.x,w.p.x,-1,s);w=w.p}w=w.o,o=w.z,m=!m}while(!w.v);s.lineEnd()}}}function bP(t){if(e=t.length){for(var e,i=0,n=t[0],s;++i<e;)n.n=s=t[i],s.p=n,n=s;n.n=s=t[0],s.p=n}}function Hx(t){return Mt(t[0])<=xt?t[0]:gr(t[0])*((Mt(t[0])+xt)%ts-xt)}function Hae(t,e){var i=Hx(e),n=e[1],s=De(n),a=[De(i),-qe(i),0],c=0,d=0,f=new Zn;s===1?n=Fi+ze:s===-1&&(n=-Fi-ze);for(var u=0,o=t.length;u<o;++u)if(w=(g=t[u]).length)for(var g,w,m=g[w-1],l=Hx(m),T=m[1]/2+i1,b=De(T),S=qe(T),x=0;x<w;++x,l=F,b=A,S=O,m=B){var B=g[x],F=Hx(B),I=B[1]/2+i1,A=De(I),O=qe(I),R=F-l,D=R>=0?1:-1,P=D*R,U=P>xt,Y=b*A;if(f.add(kr(Y*D*De(P),S*O+Y*qe(P))),c+=U?R+D*ts:R,U^l>=i^F>=i){var z=Ip(Yf(m),Yf(B));l1(z);var W=Ip(a,z);l1(W);var V=(U^R>=0?-1:1)*Bs(W[2]);(n>V||n===V&&(z[0]||z[1]))&&(d+=U^R>=0?1:-1)}}return(c<-ze||c<ze&&f<-t1)^d&1}function pq(t,e,i,n){return function(s){var a=e(s),c=uq(),d=e(c),f=!1,u,o,g,w={point:m,lineStart:T,lineEnd:b,polygonStart:function(){w.point=S,w.lineStart=x,w.lineEnd=B,o=[],u=[]},polygonEnd:function(){w.point=m,w.lineStart=T,w.lineEnd=b,o=h5(o);var F=Hae(u,n);o.length?(f||(s.polygonStart(),f=!0),hq(o,Xae,F,i,s)):F&&(f||(s.polygonStart(),f=!0),s.lineStart(),i(null,null,1,s),s.lineEnd()),f&&(s.polygonEnd(),f=!1),o=u=null},sphere:function(){s.polygonStart(),s.lineStart(),i(null,null,1,s),s.lineEnd(),s.polygonEnd()}};function m(F,I){t(F,I)&&s.point(F,I)}function l(F,I){a.point(F,I)}function T(){w.point=l,a.lineStart()}function b(){w.point=m,a.lineEnd()}function S(F,I){g.push([F,I]),d.point(F,I)}function x(){d.lineStart(),g=[]}function B(){S(g[0][0],g[0][1]),d.lineEnd();var F=d.clean(),I=c.result(),A,O=I.length,R,D,P;if(g.pop(),u.push(g),g=null,!!O){if(F&1){if(D=I[0],(R=D.length-1)>0){for(f||(s.polygonStart(),f=!0),s.lineStart(),A=0;A<R;++A)s.point((P=D[A])[0],P[1]);s.lineEnd()}return}O>1&&F&2&&I.push(I.pop().concat(I.shift())),o.push(I.filter(Yae))}}return w}}function Yae(t){return t.length>1}function Xae(t,e){return((t=t.x)[0]<0?t[1]-Fi-ze:Fi-t[1])-((e=e.x)[0]<0?e[1]-Fi-ze:Fi-e[1])}const TP=pq(function(){return!0},Kae,Qae,[-xt,-Fi]);function Kae(t){var e=NaN,i=NaN,n=NaN,s;return{lineStart:function(){t.lineStart(),s=1},point:function(a,c){var d=a>0?xt:-xt,f=Mt(a-e);Mt(f-xt)<ze?(t.point(e,i=(i+c)/2>0?Fi:-Fi),t.point(n,i),t.lineEnd(),t.lineStart(),t.point(d,i),t.point(a,i),s=0):n!==d&&f>=xt&&(Mt(e-n)<ze&&(e-=n*ze),Mt(a-d)<ze&&(a-=d*ze),i=Jae(e,i,a,c),t.point(n,i),t.lineEnd(),t.lineStart(),t.point(d,i),s=0),t.point(e=a,i=c),n=d},lineEnd:function(){t.lineEnd(),e=i=NaN},clean:function(){return 2-s}}}function Jae(t,e,i,n){var s,a,c=De(t-i);return Mt(c)>ze?p_((De(e)*(a=qe(n))*De(i)-De(n)*(s=qe(e))*De(t))/(s*a*c)):(e+n)/2}function Qae(t,e,i,n){var s;if(t==null)s=i*Fi,n.point(-xt,s),n.point(0,s),n.point(xt,s),n.point(xt,0),n.point(xt,-s),n.point(0,-s),n.point(-xt,-s),n.point(-xt,0),n.point(-xt,s);else if(Mt(t[0]-e[0])>ze){var a=t[0]<e[0]?xt:-xt;s=i*a/2,n.point(-a,s),n.point(0,s),n.point(a,s)}else n.point(e[0],e[1])}function Zae(t){var e=qe(t),i=6*Et,n=e>0,s=Mt(e)>ze;function a(o,g,w,m){Wae(m,t,i,w,o,g)}function c(o,g){return qe(o)*qe(g)>e}function d(o){var g,w,m,l,T;return{lineStart:function(){l=m=!1,T=1},point:function(b,S){var x=[b,S],B,F=c(b,S),I=n?F?0:u(b,S):F?u(b+(b<0?xt:-xt),S):0;if(!g&&(l=m=F)&&o.lineStart(),F!==m&&(B=f(g,x),(!B||K0(g,B)||K0(x,B))&&(x[2]=1)),F!==m)T=0,F?(o.lineStart(),B=f(x,g),o.point(B[0],B[1])):(B=f(g,x),o.point(B[0],B[1],2),o.lineEnd()),g=B;else if(s&&g&&n^F){var A;!(I&w)&&(A=f(x,g,!0))&&(T=0,n?(o.lineStart(),o.point(A[0][0],A[0][1]),o.point(A[1][0],A[1][1]),o.lineEnd()):(o.point(A[1][0],A[1][1]),o.lineEnd(),o.lineStart(),o.point(A[0][0],A[0][1],3)))}F&&(!g||!K0(g,x))&&o.point(x[0],x[1]),g=x,m=F,w=I},lineEnd:function(){m&&o.lineEnd(),g=null},clean:function(){return T|(l&&m)<<1}}}function f(o,g,w){var m=Yf(o),l=Yf(g),T=[1,0,0],b=Ip(m,l),S=Kb(b,b),x=b[0],B=S-x*x;if(!B)return!w&&o;var F=e*S/B,I=-e*x/B,A=Ip(T,b),O=Jb(T,F),R=Jb(b,I);Wx(O,R);var D=A,P=Kb(O,D),U=Kb(D,D),Y=P*P-U*(Kb(O,O)-1);if(!(Y<0)){var z=is(Y),W=Jb(D,(-P-z)/U);if(Wx(W,O),W=o1(W),!w)return W;var V=o[0],H=g[0],J=o[1],G=g[1],le;H<V&&(le=V,V=H,H=le);var pe=H-V,ne=Mt(pe-xt)<ze,Ae=ne||pe<ze;if(!ne&&G<J&&(le=J,J=G,G=le),Ae?ne?J+G>0^W[1]<(Mt(W[0]-V)<ze?J:G):J<=W[1]&&W[1]<=G:pe>xt^(V<=W[0]&&W[0]<=H)){var fe=Jb(D,(-P+z)/U);return Wx(fe,O),[W,o1(fe)]}}}function u(o,g){var w=n?t:xt-t,m=0;return o<-w?m|=1:o>w&&(m|=2),g<-w?m|=4:g>w&&(m|=8),m}return pq(c,d,a,n?[0,-t]:[-xt,t-xt])}function eoe(t,e,i,n,s,a){var c=t[0],d=t[1],f=e[0],u=e[1],o=0,g=1,w=f-c,m=u-d,l;if(l=i-c,!(!w&&l>0)){if(l/=w,w<0){if(l<o)return;l<g&&(g=l)}else if(w>0){if(l>g)return;l>o&&(o=l)}if(l=s-c,!(!w&&l<0)){if(l/=w,w<0){if(l>g)return;l>o&&(o=l)}else if(w>0){if(l<o)return;l<g&&(g=l)}if(l=n-d,!(!m&&l>0)){if(l/=m,m<0){if(l<o)return;l<g&&(g=l)}else if(m>0){if(l>g)return;l>o&&(o=l)}if(l=a-d,!(!m&&l<0)){if(l/=m,m<0){if(l>g)return;l>o&&(o=l)}else if(m>0){if(l<o)return;l<g&&(g=l)}return o>0&&(t[0]=c+o*w,t[1]=d+o*m),g<1&&(e[0]=c+g*w,e[1]=d+g*m),!0}}}}}var ky=1e9,Zb=-ky;function _q(t,e,i,n){function s(u,o){return t<=u&&u<=i&&e<=o&&o<=n}function a(u,o,g,w){var m=0,l=0;if(u==null||(m=c(u,g))!==(l=c(o,g))||f(u,o)<0^g>0)do w.point(m===0||m===3?t:i,m>1?n:e);while((m=(m+g+4)%4)!==l);else w.point(o[0],o[1])}function c(u,o){return Mt(u[0]-t)<ze?o>0?0:3:Mt(u[0]-i)<ze?o>0?2:1:Mt(u[1]-e)<ze?o>0?1:0:o>0?3:2}function d(u,o){return f(u.x,o.x)}function f(u,o){var g=c(u,1),w=c(o,1);return g!==w?g-w:g===0?o[1]-u[1]:g===1?u[0]-o[0]:g===2?u[1]-o[1]:o[0]-u[0]}return function(u){var o=u,g=uq(),w,m,l,T,b,S,x,B,F,I,A,O={point:R,lineStart:Y,lineEnd:z,polygonStart:P,polygonEnd:U};function R(V,H){s(V,H)&&o.point(V,H)}function D(){for(var V=0,H=0,J=m.length;H<J;++H)for(var G=m[H],le=1,pe=G.length,ne=G[0],Ae,fe,Fe=ne[0],je=ne[1];le<pe;++le)Ae=Fe,fe=je,ne=G[le],Fe=ne[0],je=ne[1],fe<=n?je>n&&(Fe-Ae)*(n-fe)>(je-fe)*(t-Ae)&&++V:je<=n&&(Fe-Ae)*(n-fe)<(je-fe)*(t-Ae)&&--V;return V}function P(){o=g,w=[],m=[],A=!0}function U(){var V=D(),H=A&&V,J=(w=h5(w)).length;(H||J)&&(u.polygonStart(),H&&(u.lineStart(),a(null,null,1,u),u.lineEnd()),J&&hq(w,d,V,a,u),u.polygonEnd()),o=u,w=m=l=null}function Y(){O.point=W,m&&m.push(l=[]),I=!0,F=!1,x=B=NaN}function z(){w&&(W(T,b),S&&F&&g.rejoin(),w.push(g.result())),O.point=R,F&&o.lineEnd()}function W(V,H){var J=s(V,H);if(m&&l.push([V,H]),I)T=V,b=H,S=J,I=!1,J&&(o.lineStart(),o.point(V,H));else if(J&&F)o.point(V,H);else{var G=[x=Math.max(Zb,Math.min(ky,x)),B=Math.max(Zb,Math.min(ky,B))],le=[V=Math.max(Zb,Math.min(ky,V)),H=Math.max(Zb,Math.min(ky,H))];eoe(G,le,t,e,i,n)?(F||(o.lineStart(),o.point(G[0],G[1])),o.point(le[0],le[1]),J||o.lineEnd(),A=!1):J&&(o.lineStart(),o.point(V,H),A=!1)}x=V,B=H,F=J}return O}}function vP(t,e,i){var n=Js(t,e-ze,i).concat(e);return function(s){return n.map(function(a){return[s,a]})}}function EP(t,e,i){var n=Js(t,e-ze,i).concat(e);return function(s){return n.map(function(a){return[a,s]})}}function toe(){var t,e,i,n,s,a,c,d,f=10,u=f,o=90,g=360,w,m,l,T,b=2.5;function S(){return{type:"MultiLineString",coordinates:x()}}function x(){return Js(Xb(n/o)*o,i,o).map(l).concat(Js(Xb(d/g)*g,c,g).map(T)).concat(Js(Xb(e/f)*f,t,f).filter(function(B){return Mt(B%o)>ze}).map(w)).concat(Js(Xb(a/u)*u,s,u).filter(function(B){return Mt(B%g)>ze}).map(m))}return S.lines=function(){return x().map(function(B){return{type:"LineString",coordinates:B}})},S.outline=function(){return{type:"Polygon",coordinates:[l(n).concat(T(c).slice(1),l(i).reverse().slice(1),T(d).reverse().slice(1))]}},S.extent=function(B){return arguments.length?S.extentMajor(B).extentMinor(B):S.extentMinor()},S.extentMajor=function(B){return arguments.length?(n=+B[0][0],i=+B[1][0],d=+B[0][1],c=+B[1][1],n>i&&(B=n,n=i,i=B),d>c&&(B=d,d=c,c=B),S.precision(b)):[[n,d],[i,c]]},S.extentMinor=function(B){return arguments.length?(e=+B[0][0],t=+B[1][0],a=+B[0][1],s=+B[1][1],e>t&&(B=e,e=t,t=B),a>s&&(B=a,a=s,s=B),S.precision(b)):[[e,a],[t,s]]},S.step=function(B){return arguments.length?S.stepMajor(B).stepMinor(B):S.stepMinor()},S.stepMajor=function(B){return arguments.length?(o=+B[0],g=+B[1],S):[o,g]},S.stepMinor=function(B){return arguments.length?(f=+B[0],u=+B[1],S):[f,u]},S.precision=function(B){return arguments.length?(b=+B,w=vP(a,s,90),m=EP(e,t,b),l=vP(d,c,90),T=EP(n,i,b),S):b},S.extentMajor([[-180,-90+ze],[180,90-ze]]).extentMinor([[-180,-80-ze],[180,80+ze]])}const Og=t=>t;var Yx=new Zn,ok=new Zn,yq,gq,lk,ck,wc={point:pn,lineStart:pn,lineEnd:pn,polygonStart:function(){wc.lineStart=ioe,wc.lineEnd=soe},polygonEnd:function(){wc.lineStart=wc.lineEnd=wc.point=pn,Yx.add(Mt(ok)),ok=new Zn},result:function(){var t=Yx/2;return Yx=new Zn,t}};function ioe(){wc.point=noe}function noe(t,e){wc.point=mq,yq=lk=t,gq=ck=e}function mq(t,e){ok.add(ck*t-lk*e),lk=t,ck=e}function soe(){mq(yq,gq)}const SP=wc;var kp=1/0,y1=kp,Ng=-kp,g1=Ng,roe={point:aoe,lineStart:pn,lineEnd:pn,polygonStart:pn,polygonEnd:pn,result:function(){var t=[[kp,y1],[Ng,g1]];return Ng=g1=-(y1=kp=1/0),t}};function aoe(t,e){t<kp&&(kp=t),t>Ng&&(Ng=t),e<y1&&(y1=e),e>g1&&(g1=e)}const m1=roe;var dk=0,fk=0,Fy=0,w1=0,b1=0,Oh=0,uk=0,hk=0,My=0,wq,bq,Wa,Ha,Jr={point:Xf,lineStart:xP,lineEnd:BP,polygonStart:function(){Jr.lineStart=coe,Jr.lineEnd=doe},polygonEnd:function(){Jr.point=Xf,Jr.lineStart=xP,Jr.lineEnd=BP},result:function(){var t=My?[uk/My,hk/My]:Oh?[w1/Oh,b1/Oh]:Fy?[dk/Fy,fk/Fy]:[NaN,NaN];return dk=fk=Fy=w1=b1=Oh=uk=hk=My=0,t}};function Xf(t,e){dk+=t,fk+=e,++Fy}function xP(){Jr.point=ooe}function ooe(t,e){Jr.point=loe,Xf(Wa=t,Ha=e)}function loe(t,e){var i=t-Wa,n=e-Ha,s=is(i*i+n*n);w1+=s*(Wa+t)/2,b1+=s*(Ha+e)/2,Oh+=s,Xf(Wa=t,Ha=e)}function BP(){Jr.point=Xf}function coe(){Jr.point=foe}function doe(){Tq(wq,bq)}function foe(t,e){Jr.point=Tq,Xf(wq=Wa=t,bq=Ha=e)}function Tq(t,e){var i=t-Wa,n=e-Ha,s=is(i*i+n*n);w1+=s*(Wa+t)/2,b1+=s*(Ha+e)/2,Oh+=s,s=Ha*t-Wa*e,uk+=s*(Wa+t),hk+=s*(Ha+e),My+=s*3,Xf(Wa=t,Ha=e)}const IP=Jr;function vq(t){this._context=t}vq.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,ts);break}}},result:pn};var pk=new Zn,Xx,Eq,Sq,Ay,Oy,T1={point:pn,lineStart:function(){T1.point=uoe},lineEnd:function(){Xx&&xq(Eq,Sq),T1.point=pn},polygonStart:function(){Xx=!0},polygonEnd:function(){Xx=null},result:function(){var t=+pk;return pk=new Zn,t}};function uoe(t,e){T1.point=xq,Eq=Ay=t,Sq=Oy=e}function xq(t,e){Ay-=t,Oy-=e,pk.add(is(Ay*Ay+Oy*Oy)),Ay=t,Oy=e}const kP=T1;let FP,v1,MP,AP;class OP{constructor(e){this._append=e==null?Bq:hoe(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,i){switch(this._point){case 0:{this._append`M${e},${i}`,this._point=1;break}case 1:{this._append`L${e},${i}`;break}default:{if(this._append`M${e},${i}`,this._radius!==MP||this._append!==v1){const n=this._radius,s=this._;this._="",this._append`m0,${n}a${n},${n} 0 1,1 0,${-2*n}a${n},${n} 0 1,1 0,${2*n}z`,MP=n,v1=this._append,AP=this._,this._=s}this._+=AP;break}}}result(){const e=this._;return this._="",e.length?e:null}}function Bq(t){let e=1;this._+=t[0];for(const i=t.length;e<i;++e)this._+=arguments[e]+t[e]}function hoe(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return Bq;if(e!==FP){const i=10**e;FP=e,v1=function(s){let a=1;this._+=s[0];for(const c=s.length;a<c;++a)this._+=Math.round(arguments[a]*i)/i+s[a]}}return v1}function Iq(t,e){let i=3,n=4.5,s,a;function c(d){return d&&(typeof n=="function"&&a.pointRadius(+n.apply(this,arguments)),fl(d,s(a))),a.result()}return c.area=function(d){return fl(d,s(SP)),SP.result()},c.measure=function(d){return fl(d,s(kP)),kP.result()},c.bounds=function(d){return fl(d,s(m1)),m1.result()},c.centroid=function(d){return fl(d,s(IP)),IP.result()},c.projection=function(d){return arguments.length?(s=d==null?(t=null,Og):(t=d).stream,c):t},c.context=function(d){return arguments.length?(a=d==null?(e=null,new OP(i)):new vq(e=d),typeof n!="function"&&a.pointRadius(n),c):e},c.pointRadius=function(d){return arguments.length?(n=typeof d=="function"?d:(a.pointRadius(+d),+d),c):n},c.digits=function(d){if(!arguments.length)return i;if(d==null)i=null;else{const f=Math.floor(d);if(!(f>=0))throw new RangeError(`invalid digits: ${d}`);i=f}return e===null&&(a=new OP(i)),c},c.projection(t).digits(i).context(e)}function vE(t){return function(e){var i=new _k;for(var n in t)i[n]=t[n];return i.stream=e,i}}function _k(){}_k.prototype={constructor:_k,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function qM(t,e,i){var n=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),n!=null&&t.clipExtent(null),fl(i,t.stream(m1)),e(m1.result()),n!=null&&t.clipExtent(n),t}function EE(t,e,i){return qM(t,function(n){var s=e[1][0]-e[0][0],a=e[1][1]-e[0][1],c=Math.min(s/(n[1][0]-n[0][0]),a/(n[1][1]-n[0][1])),d=+e[0][0]+(s-c*(n[1][0]+n[0][0]))/2,f=+e[0][1]+(a-c*(n[1][1]+n[0][1]))/2;t.scale(150*c).translate([d,f])},i)}function GM(t,e,i){return EE(t,[[0,0],e],i)}function VM(t,e,i){return qM(t,function(n){var s=+e,a=s/(n[1][0]-n[0][0]),c=(s-a*(n[1][0]+n[0][0]))/2,d=-a*n[0][1];t.scale(150*a).translate([c,d])},i)}function WM(t,e,i){return qM(t,function(n){var s=+e,a=s/(n[1][1]-n[0][1]),c=-a*n[0][0],d=(s-a*(n[1][1]+n[0][1]))/2;t.scale(150*a).translate([c,d])},i)}var NP=16,poe=qe(30*Et);function CP(t,e){return+e?yoe(t,e):_oe(t)}function _oe(t){return vE({point:function(e,i){e=t(e,i),this.stream.point(e[0],e[1])}})}function yoe(t,e){function i(n,s,a,c,d,f,u,o,g,w,m,l,T,b){var S=u-n,x=o-s,B=S*S+x*x;if(B>4*e&&T--){var F=c+w,I=d+m,A=f+l,O=is(F*F+I*I+A*A),R=Bs(A/=O),D=Mt(Mt(A)-1)<ze||Mt(a-g)<ze?(a+g)/2:kr(I,F),P=t(D,R),U=P[0],Y=P[1],z=U-n,W=Y-s,V=x*z-S*W;(V*V/B>e||Mt((S*z+x*W)/B-.5)>.3||c*w+d*m+f*l<poe)&&(i(n,s,a,c,d,f,U,Y,D,F/=O,I/=O,A,T,b),b.point(U,Y),i(U,Y,D,F,I,A,u,o,g,w,m,l,T,b))}}return function(n){var s,a,c,d,f,u,o,g,w,m,l,T,b={point:S,lineStart:x,lineEnd:F,polygonStart:function(){n.polygonStart(),b.lineStart=I},polygonEnd:function(){n.polygonEnd(),b.lineStart=x}};function S(R,D){R=t(R,D),n.point(R[0],R[1])}function x(){g=NaN,b.point=B,n.lineStart()}function B(R,D){var P=Yf([R,D]),U=t(R,D);i(g,w,o,m,l,T,g=U[0],w=U[1],o=R,m=P[0],l=P[1],T=P[2],NP,n),n.point(g,w)}function F(){b.point=S,n.lineEnd()}function I(){x(),b.point=A,b.lineEnd=O}function A(R,D){B(s=R,D),a=g,c=w,d=m,f=l,u=T,b.point=B}function O(){i(g,w,o,m,l,T,a,c,s,d,f,u,NP,n),b.lineEnd=F,F()}return b}}var goe=vE({point:function(t,e){this.stream.point(t*Et,e*Et)}});function moe(t){return vE({point:function(e,i){var n=t(e,i);return this.stream.point(n[0],n[1])}})}function woe(t,e,i,n,s){function a(c,d){return c*=n,d*=s,[e+t*c,i-t*d]}return a.invert=function(c,d){return[(c-e)/t*n,(i-d)/t*s]},a}function RP(t,e,i,n,s,a){if(!a)return woe(t,e,i,n,s);var c=qe(a),d=De(a),f=c*t,u=d*t,o=c/t,g=d/t,w=(d*i-c*e)/t,m=(d*e+c*i)/t;function l(T,b){return T*=n,b*=s,[f*T-u*b+e,i-u*T-f*b]}return l.invert=function(T,b){return[n*(o*T-g*b+w),s*(m-g*T-o*b)]},l}function No(t){return kq(function(){return t})()}function kq(t){var e,i=150,n=480,s=250,a=0,c=0,d=0,f=0,u=0,o,g=0,w=1,m=1,l=null,T=TP,b=null,S,x,B,F=Og,I=.5,A,O,R,D,P;function U(V){return R(V[0]*Et,V[1]*Et)}function Y(V){return V=R.invert(V[0],V[1]),V&&[V[0]*Ni,V[1]*Ni]}U.stream=function(V){return D&&P===V?D:D=goe(moe(o)(T(A(F(P=V)))))},U.preclip=function(V){return arguments.length?(T=V,l=void 0,W()):T},U.postclip=function(V){return arguments.length?(F=V,b=S=x=B=null,W()):F},U.clipAngle=function(V){return arguments.length?(T=+V?Zae(l=V*Et):(l=null,TP),W()):l*Ni},U.clipExtent=function(V){return arguments.length?(F=V==null?(b=S=x=B=null,Og):_q(b=+V[0][0],S=+V[0][1],x=+V[1][0],B=+V[1][1]),W()):b==null?null:[[b,S],[x,B]]},U.scale=function(V){return arguments.length?(i=+V,z()):i},U.translate=function(V){return arguments.length?(n=+V[0],s=+V[1],z()):[n,s]},U.center=function(V){return arguments.length?(a=V[0]%360*Et,c=V[1]%360*Et,z()):[a*Ni,c*Ni]},U.rotate=function(V){return arguments.length?(d=V[0]%360*Et,f=V[1]%360*Et,u=V.length>2?V[2]%360*Et:0,z()):[d*Ni,f*Ni,u*Ni]},U.angle=function(V){return arguments.length?(g=V%360*Et,z()):g*Ni},U.reflectX=function(V){return arguments.length?(w=V?-1:1,z()):w<0},U.reflectY=function(V){return arguments.length?(m=V?-1:1,z()):m<0},U.precision=function(V){return arguments.length?(A=CP(O,I=V*V),W()):is(I)},U.fitExtent=function(V,H){return EE(U,V,H)},U.fitSize=function(V,H){return GM(U,V,H)},U.fitWidth=function(V,H){return VM(U,V,H)},U.fitHeight=function(V,H){return WM(U,V,H)};function z(){var V=RP(i,0,0,w,m,g).apply(null,e(a,c)),H=RP(i,n-V[0],s-V[1],w,m,g);return o=fq(d,f,u),O=rk(e,H),R=rk(o,O),A=CP(O,I),W()}function W(){return D=P=null,U}return function(){return e=t.apply(this,arguments),U.invert=e.invert&&Y,z()}}function HM(t){var e=0,i=xt/3,n=kq(t),s=n(e,i);return s.parallels=function(a){return arguments.length?n(e=a[0]*Et,i=a[1]*Et):[e*Ni,i*Ni]},s}function boe(t){var e=qe(t);function i(n,s){return[n*e,De(s)/e]}return i.invert=function(n,s){return[n/e,Bs(s*e)]},i}function Toe(t,e){var i=De(t),n=(i+De(e))/2;if(Mt(n)<ze)return boe(t);var s=1+i*(2*n-i),a=is(s)/n;function c(d,f){var u=is(s-2*n*De(f))/n;return[u*De(d*=n),a-u*qe(d)]}return c.invert=function(d,f){var u=a-f,o=kr(d,Mt(u))*gr(u);return u*n<0&&(o-=xt*gr(d)*gr(u)),[o/n,Bs((s-(d*d+u*u)*n*n)/(2*n))]},c}function E1(){return HM(Toe).scale(155.424).center([0,33.6442])}function Fq(){return E1().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function voe(t){var e=t.length;return{point:function(i,n){for(var s=-1;++s<e;)t[s].point(i,n)},sphere:function(){for(var i=-1;++i<e;)t[i].sphere()},lineStart:function(){for(var i=-1;++i<e;)t[i].lineStart()},lineEnd:function(){for(var i=-1;++i<e;)t[i].lineEnd()},polygonStart:function(){for(var i=-1;++i<e;)t[i].polygonStart()},polygonEnd:function(){for(var i=-1;++i<e;)t[i].polygonEnd()}}}function Eoe(){var t,e,i=Fq(),n,s=E1().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a,c=E1().rotate([157,0]).center([-3,19.9]).parallels([8,18]),d,f,u={point:function(w,m){f=[w,m]}};function o(w){var m=w[0],l=w[1];return f=null,n.point(m,l),f||(a.point(m,l),f)||(d.point(m,l),f)}o.invert=function(w){var m=i.scale(),l=i.translate(),T=(w[0]-l[0])/m,b=(w[1]-l[1])/m;return(b>=.12&&b<.234&&T>=-.425&&T<-.214?s:b>=.166&&b<.234&&T>=-.214&&T<-.115?c:i).invert(w)},o.stream=function(w){return t&&e===w?t:t=voe([i.stream(e=w),s.stream(w),c.stream(w)])},o.precision=function(w){return arguments.length?(i.precision(w),s.precision(w),c.precision(w),g()):i.precision()},o.scale=function(w){return arguments.length?(i.scale(w),s.scale(w*.35),c.scale(w),o.translate(i.translate())):i.scale()},o.translate=function(w){if(!arguments.length)return i.translate();var m=i.scale(),l=+w[0],T=+w[1];return n=i.translate(w).clipExtent([[l-.455*m,T-.238*m],[l+.455*m,T+.238*m]]).stream(u),a=s.translate([l-.307*m,T+.201*m]).clipExtent([[l-.425*m+ze,T+.12*m+ze],[l-.214*m-ze,T+.234*m-ze]]).stream(u),d=c.translate([l-.205*m,T+.212*m]).clipExtent([[l-.214*m+ze,T+.166*m+ze],[l-.115*m-ze,T+.234*m-ze]]).stream(u),g()},o.fitExtent=function(w,m){return EE(o,w,m)},o.fitSize=function(w,m){return GM(o,w,m)},o.fitWidth=function(w,m){return VM(o,w,m)},o.fitHeight=function(w,m){return WM(o,w,m)};function g(){return t=e=null,o}return o.scale(1070)}function Mq(t){return function(e,i){var n=qe(e),s=qe(i),a=t(n*s);return a===1/0?[2,0]:[a*s*De(e),a*De(i)]}}function Om(t){return function(e,i){var n=is(e*e+i*i),s=t(n),a=De(s),c=qe(s);return[kr(e*a,n*c),Bs(n&&i*a/n)]}}var Aq=Mq(function(t){return is(2/(1+t))});Aq.invert=Om(function(t){return 2*Bs(t/2)});function Soe(){return No(Aq).scale(124.75).clipAngle(180-.001)}var Oq=Mq(function(t){return(t=eq(t))&&t/De(t)});Oq.invert=Om(function(t){return t});function xoe(){return No(Oq).scale(79.4188).clipAngle(180-.001)}function SE(t,e){return[t,n1(zM((Fi+e)/2))]}SE.invert=function(t,e){return[t,2*p_(Z5(e))-Fi]};function Boe(){return Nq(SE).scale(961/ts)}function Nq(t){var e=No(t),i=e.center,n=e.scale,s=e.translate,a=e.clipExtent,c=null,d,f,u;e.scale=function(g){return arguments.length?(n(g),o()):n()},e.translate=function(g){return arguments.length?(s(g),o()):s()},e.center=function(g){return arguments.length?(i(g),o()):i()},e.clipExtent=function(g){return arguments.length?(g==null?c=d=f=u=null:(c=+g[0][0],d=+g[0][1],f=+g[1][0],u=+g[1][1]),o()):c==null?null:[[c,d],[f,u]]};function o(){var g=xt*n(),w=e(Vae(e.rotate()).invert([0,0]));return a(c==null?[[w[0]-g,w[1]-g],[w[0]+g,w[1]+g]]:t===SE?[[Math.max(w[0]-g,c),d],[Math.min(w[0]+g,f),u]]:[[c,Math.max(w[1]-g,d)],[f,Math.min(w[1]+g,u)]])}return o()}function e0(t){return zM((Fi+t)/2)}function Ioe(t,e){var i=qe(t),n=t===e?De(t):n1(i/qe(e))/n1(e0(e)/e0(t)),s=i*Vx(e0(t),n)/n;if(!n)return SE;function a(c,d){s>0?d<-Fi+ze&&(d=-Fi+ze):d>Fi-ze&&(d=Fi-ze);var f=s/Vx(e0(d),n);return[f*De(n*c),s-f*qe(n*c)]}return a.invert=function(c,d){var f=s-d,u=gr(n)*is(c*c+f*f),o=kr(c,Mt(f))*gr(f);return f*n<0&&(o-=xt*gr(c)*gr(f)),[o/n,2*p_(Vx(s/u,1/n))-Fi]},a}function koe(){return HM(Ioe).scale(109.5).parallels([30,30])}function S1(t,e){return[t,e]}S1.invert=S1;function Foe(){return No(S1).scale(152.63)}function Moe(t,e){var i=qe(t),n=t===e?De(t):(i-qe(e))/(e-t),s=i/n+t;if(Mt(n)<ze)return S1;function a(c,d){var f=s-d,u=n*c;return[f*De(u),s-f*qe(u)]}return a.invert=function(c,d){var f=s-d,u=kr(c,Mt(f))*gr(f);return f*n<0&&(u-=xt*gr(c)*gr(f)),[u/n,s-gr(n)*is(c*c+f*f)]},a}function Aoe(){return HM(Moe).scale(131.154).center([0,13.9389])}var Zy=1.340264,eg=-.081106,tg=893e-6,ig=.003796,x1=is(3)/2,Ooe=12;function Cq(t,e){var i=Bs(x1*De(e)),n=i*i,s=n*n*n;return[t*qe(i)/(x1*(Zy+3*eg*n+s*(7*tg+9*ig*n))),i*(Zy+eg*n+s*(tg+ig*n))]}Cq.invert=function(t,e){for(var i=e,n=i*i,s=n*n*n,a=0,c,d,f;a<Ooe&&(d=i*(Zy+eg*n+s*(tg+ig*n))-e,f=Zy+3*eg*n+s*(7*tg+9*ig*n),i-=c=d/f,n=i*i,s=n*n*n,!(Mt(c)<t1));++a);return[x1*t*(Zy+3*eg*n+s*(7*tg+9*ig*n))/qe(i),Bs(De(i)/x1)]};function Noe(){return No(Cq).scale(177.158)}function Rq(t,e){var i=qe(e),n=qe(t)*i;return[i*De(t)/n,De(e)/n]}Rq.invert=Om(p_);function Coe(){return No(Rq).scale(144.049).clipAngle(60)}function Roe(){var t=1,e=0,i=0,n=1,s=1,a=0,c,d,f=null,u,o,g,w=1,m=1,l=vE({point:function(F,I){var A=B([F,I]);this.stream.point(A[0],A[1])}}),T=Og,b,S;function x(){return w=t*n,m=t*s,b=S=null,B}function B(F){var I=F[0]*w,A=F[1]*m;if(a){var O=A*c-I*d;I=I*c+A*d,A=O}return[I+e,A+i]}return B.invert=function(F){var I=F[0]-e,A=F[1]-i;if(a){var O=A*c+I*d;I=I*c-A*d,A=O}return[I/w,A/m]},B.stream=function(F){return b&&S===F?b:b=l(T(S=F))},B.postclip=function(F){return arguments.length?(T=F,f=u=o=g=null,x()):T},B.clipExtent=function(F){return arguments.length?(T=F==null?(f=u=o=g=null,Og):_q(f=+F[0][0],u=+F[0][1],o=+F[1][0],g=+F[1][1]),x()):f==null?null:[[f,u],[o,g]]},B.scale=function(F){return arguments.length?(t=+F,x()):t},B.translate=function(F){return arguments.length?(e=+F[0],i=+F[1],x()):[e,i]},B.angle=function(F){return arguments.length?(a=F%360*Et,d=De(a),c=qe(a),x()):a*Ni},B.reflectX=function(F){return arguments.length?(n=F?-1:1,x()):n<0},B.reflectY=function(F){return arguments.length?(s=F?-1:1,x()):s<0},B.fitExtent=function(F,I){return EE(B,F,I)},B.fitSize=function(F,I){return GM(B,F,I)},B.fitWidth=function(F,I){return VM(B,F,I)},B.fitHeight=function(F,I){return WM(B,F,I)},B}function Lq(t,e){var i=e*e,n=i*i;return[t*(.8707-.131979*i+n*(-.013791+n*(.003971*i-.001529*n))),e*(1.007226+i*(.015085+n*(-.044475+.028874*i-.005916*n)))]}Lq.invert=function(t,e){var i=e,n=25,s;do{var a=i*i,c=a*a;i-=s=(i*(1.007226+a*(.015085+c*(-.044475+.028874*a-.005916*c)))-e)/(1.007226+a*(.015085*3+c*(-.044475*7+.028874*9*a-.005916*11*c)))}while(Mt(s)>ze&&--n>0);return[t/(.8707+(a=i*i)*(-.131979+a*(-.013791+a*a*a*(.003971-.001529*a)))),i]};function Loe(){return No(Lq).scale(175.295)}function Dq(t,e){return[qe(e)*De(t),De(e)]}Dq.invert=Om(Bs);function Doe(){return No(Dq).scale(249.5).clipAngle(90+ze)}function Pq(t,e){var i=qe(e),n=1+qe(t)*i;return[i*De(t)/n,De(e)/n]}Pq.invert=Om(function(t){return 2*p_(t)});function Poe(){return No(Pq).scale(250).clipAngle(142)}function $q(t,e){return[n1(zM((Fi+e)/2)),-t]}$q.invert=function(t,e){return[-e,2*p_(Z5(t))-Fi]};function $oe(){var t=Nq($q),e=t.center,i=t.rotate;return t.center=function(n){return arguments.length?e([-n[1],n[0]]):(n=e(),[n[1],-n[0]])},t.rotate=function(n){return arguments.length?i([n[0],n[1],n.length>2?n[2]+90:90]):(n=i(),[n[0],n[1],n[2]-90])},i([0,0,90]).scale(159.155)}function Uoe(t,e){return t.parent===e.parent?1:2}function zoe(t){return t.reduce(joe,0)/t.length}function joe(t,e){return t+e.x}function qoe(t){return 1+t.reduce(Goe,0)}function Goe(t,e){return Math.max(t,e.y)}function Voe(t){for(var e;e=t.children;)t=e[0];return t}function Woe(t){for(var e;e=t.children;)t=e[e.length-1];return t}function Hoe(){var t=Uoe,e=1,i=1,n=!1;function s(a){var c,d=0;a.eachAfter(function(w){var m=w.children;m?(w.x=zoe(m),w.y=qoe(m)):(w.x=c?d+=t(w,c):0,w.y=0,c=w)});var f=Voe(a),u=Woe(a),o=f.x-t(f,u)/2,g=u.x+t(u,f)/2;return a.eachAfter(n?function(w){w.x=(w.x-a.x)*e,w.y=(a.y-w.y)*i}:function(w){w.x=(w.x-o)/(g-o)*e,w.y=(1-(a.y?w.y/a.y:1))*i})}return s.separation=function(a){return arguments.length?(t=a,s):t},s.size=function(a){return arguments.length?(n=!1,e=+a[0],i=+a[1],s):n?null:[e,i]},s.nodeSize=function(a){return arguments.length?(n=!0,e=+a[0],i=+a[1],s):n?[e,i]:null},s}function Yoe(t){var e=0,i=t.children,n=i&&i.length;if(!n)e=1;else for(;--n>=0;)e+=i[n].value;t.value=e}function Xoe(){return this.eachAfter(Yoe)}function Koe(t,e){let i=-1;for(const n of this)t.call(e,n,++i,this);return this}function Joe(t,e){for(var i=this,n=[i],s,a,c=-1;i=n.pop();)if(t.call(e,i,++c,this),s=i.children)for(a=s.length-1;a>=0;--a)n.push(s[a]);return this}function Qoe(t,e){for(var i=this,n=[i],s=[],a,c,d,f=-1;i=n.pop();)if(s.push(i),a=i.children)for(c=0,d=a.length;c<d;++c)n.push(a[c]);for(;i=s.pop();)t.call(e,i,++f,this);return this}function Zoe(t,e){let i=-1;for(const n of this)if(t.call(e,n,++i,this))return n}function ele(t){return this.eachAfter(function(e){for(var i=+t(e.data)||0,n=e.children,s=n&&n.length;--s>=0;)i+=n[s].value;e.value=i})}function tle(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function ile(t){for(var e=this,i=nle(e,t),n=[e];e!==i;)e=e.parent,n.push(e);for(var s=n.length;t!==i;)n.splice(s,0,t),t=t.parent;return n}function nle(t,e){if(t===e)return t;var i=t.ancestors(),n=e.ancestors(),s=null;for(t=i.pop(),e=n.pop();t===e;)s=t,t=i.pop(),e=n.pop();return s}function sle(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function rle(){return Array.from(this)}function ale(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function ole(){var t=this,e=[];return t.each(function(i){i!==t&&e.push({source:i.parent,target:i})}),e}function*lle(){var t=this,e,i=[t],n,s,a;do for(e=i.reverse(),i=[];t=e.pop();)if(yield t,n=t.children)for(s=0,a=n.length;s<a;++s)i.push(n[s]);while(i.length)}function YM(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=fle)):e===void 0&&(e=dle);for(var i=new Fp(t),n,s=[i],a,c,d,f;n=s.pop();)if((c=e(n.data))&&(f=(c=Array.from(c)).length))for(n.children=c,d=f-1;d>=0;--d)s.push(a=c[d]=new Fp(c[d])),a.parent=n,a.depth=n.depth+1;return i.eachBefore(Uq)}function cle(){return YM(this).eachBefore(ule)}function dle(t){return t.children}function fle(t){return Array.isArray(t)?t[1]:null}function ule(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function Uq(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function Fp(t){this.data=t,this.depth=this.height=0,this.parent=null}Fp.prototype=YM.prototype={constructor:Fp,count:Xoe,each:Koe,eachAfter:Qoe,eachBefore:Joe,find:Zoe,sum:ele,sort:tle,path:ile,ancestors:sle,descendants:rle,leaves:ale,links:ole,copy:cle,[Symbol.iterator]:lle};function J0(t){return t==null?null:zq(t)}function zq(t){if(typeof t!="function")throw new Error;return t}function ff(){return 0}function Eh(t){return function(){return t}}const hle=1664525,ple=1013904223,LP=4294967296;function _le(){let t=1;return()=>(t=(hle*t+ple)%LP)/LP}function yle(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function gle(t,e){let i=t.length,n,s;for(;i;)s=e()*i--|0,n=t[i],t[i]=t[s],t[s]=n;return t}function mle(t,e){for(var i=0,n=(t=gle(Array.from(t),e)).length,s=[],a,c;i<n;)a=t[i],c&&jq(c,a)?++i:(c=ble(s=wle(s,a)),i=0);return c}function wle(t,e){var i,n;if(Kx(e,t))return[e];for(i=0;i<t.length;++i)if(t0(e,t[i])&&Kx(Ny(t[i],e),t))return[t[i],e];for(i=0;i<t.length-1;++i)for(n=i+1;n<t.length;++n)if(t0(Ny(t[i],t[n]),e)&&t0(Ny(t[i],e),t[n])&&t0(Ny(t[n],e),t[i])&&Kx(qq(t[i],t[n],e),t))return[t[i],t[n],e];throw new Error}function t0(t,e){var i=t.r-e.r,n=e.x-t.x,s=e.y-t.y;return i<0||i*i<n*n+s*s}function jq(t,e){var i=t.r-e.r+Math.max(t.r,e.r,1)*1e-9,n=e.x-t.x,s=e.y-t.y;return i>0&&i*i>n*n+s*s}function Kx(t,e){for(var i=0;i<e.length;++i)if(!jq(t,e[i]))return!1;return!0}function ble(t){switch(t.length){case 1:return Tle(t[0]);case 2:return Ny(t[0],t[1]);case 3:return qq(t[0],t[1],t[2])}}function Tle(t){return{x:t.x,y:t.y,r:t.r}}function Ny(t,e){var i=t.x,n=t.y,s=t.r,a=e.x,c=e.y,d=e.r,f=a-i,u=c-n,o=d-s,g=Math.sqrt(f*f+u*u);return{x:(i+a+f/g*o)/2,y:(n+c+u/g*o)/2,r:(g+s+d)/2}}function qq(t,e,i){var n=t.x,s=t.y,a=t.r,c=e.x,d=e.y,f=e.r,u=i.x,o=i.y,g=i.r,w=n-c,m=n-u,l=s-d,T=s-o,b=f-a,S=g-a,x=n*n+s*s-a*a,B=x-c*c-d*d+f*f,F=x-u*u-o*o+g*g,I=m*l-w*T,A=(l*F-T*B)/(I*2)-n,O=(T*b-l*S)/I,R=(m*B-w*F)/(I*2)-s,D=(w*S-m*b)/I,P=O*O+D*D-1,U=2*(a+A*O+R*D),Y=A*A+R*R-a*a,z=-(Math.abs(P)>1e-6?(U+Math.sqrt(U*U-4*P*Y))/(2*P):Y/U);return{x:n+A+O*z,y:s+R+D*z,r:z}}function DP(t,e,i){var n=t.x-e.x,s,a,c=t.y-e.y,d,f,u=n*n+c*c;u?(a=e.r+i.r,a*=a,f=t.r+i.r,f*=f,a>f?(s=(u+f-a)/(2*u),d=Math.sqrt(Math.max(0,f/u-s*s)),i.x=t.x-s*n-d*c,i.y=t.y-s*c+d*n):(s=(u+a-f)/(2*u),d=Math.sqrt(Math.max(0,a/u-s*s)),i.x=e.x+s*n-d*c,i.y=e.y+s*c+d*n)):(i.x=e.x+i.r,i.y=e.y)}function PP(t,e){var i=t.r+e.r-1e-6,n=e.x-t.x,s=e.y-t.y;return i>0&&i*i>n*n+s*s}function $P(t){var e=t._,i=t.next._,n=e.r+i.r,s=(e.x*i.r+i.x*e.r)/n,a=(e.y*i.r+i.y*e.r)/n;return s*s+a*a}function i0(t){this._=t,this.next=null,this.previous=null}function vle(t,e){if(!(a=(t=yle(t)).length))return 0;var i,n,s,a,c,d,f,u,o,g,w;if(i=t[0],i.x=0,i.y=0,!(a>1))return i.r;if(n=t[1],i.x=-n.r,n.x=i.r,n.y=0,!(a>2))return i.r+n.r;DP(n,i,s=t[2]),i=new i0(i),n=new i0(n),s=new i0(s),i.next=s.previous=n,n.next=i.previous=s,s.next=n.previous=i;e:for(f=3;f<a;++f){DP(i._,n._,s=t[f]),s=new i0(s),u=n.next,o=i.previous,g=n._.r,w=i._.r;do if(g<=w){if(PP(u._,s._)){n=u,i.next=n,n.previous=i,--f;continue e}g+=u._.r,u=u.next}else{if(PP(o._,s._)){i=o,i.next=n,n.previous=i,--f;continue e}w+=o._.r,o=o.previous}while(u!==o.next);for(s.previous=i,s.next=n,i.next=n.previous=n=s,c=$P(i);(s=s.next)!==n;)(d=$P(s))<c&&(i=s,c=d);n=i.next}for(i=[n._],s=n;(s=s.next)!==n;)i.push(s._);for(s=mle(i,e),f=0;f<a;++f)i=t[f],i.x-=s.x,i.y-=s.y;return s.r}function Ele(t){return Math.sqrt(t.value)}function Sle(){var t=null,e=1,i=1,n=ff;function s(a){const c=_le();return a.x=e/2,a.y=i/2,t?a.eachBefore(UP(t)).eachAfter(Jx(n,.5,c)).eachBefore(zP(1)):a.eachBefore(UP(Ele)).eachAfter(Jx(ff,1,c)).eachAfter(Jx(n,a.r/Math.min(e,i),c)).eachBefore(zP(Math.min(e,i)/(2*a.r))),a}return s.radius=function(a){return arguments.length?(t=J0(a),s):t},s.size=function(a){return arguments.length?(e=+a[0],i=+a[1],s):[e,i]},s.padding=function(a){return arguments.length?(n=typeof a=="function"?a:Eh(+a),s):n},s}function UP(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function Jx(t,e,i){return function(n){if(s=n.children){var s,a,c=s.length,d=t(n)*e||0,f;if(d)for(a=0;a<c;++a)s[a].r+=d;if(f=vle(s,i),d)for(a=0;a<c;++a)s[a].r-=d;n.r=f+d}}}function zP(t){return function(e){var i=e.parent;e.r*=t,i&&(e.x=i.x+t*e.x,e.y=i.y+t*e.y)}}function Gq(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function Nm(t,e,i,n,s){for(var a=t.children,c,d=-1,f=a.length,u=t.value&&(n-e)/t.value;++d<f;)c=a[d],c.y0=i,c.y1=s,c.x0=e,c.x1=e+=c.value*u}function xle(){var t=1,e=1,i=0,n=!1;function s(c){var d=c.height+1;return c.x0=c.y0=i,c.x1=t,c.y1=e/d,c.eachBefore(a(e,d)),n&&c.eachBefore(Gq),c}function a(c,d){return function(f){f.children&&Nm(f,f.x0,c*(f.depth+1)/d,f.x1,c*(f.depth+2)/d);var u=f.x0,o=f.y0,g=f.x1-i,w=f.y1-i;g<u&&(u=g=(u+g)/2),w<o&&(o=w=(o+w)/2),f.x0=u,f.y0=o,f.x1=g,f.y1=w}}return s.round=function(c){return arguments.length?(n=!!c,s):n},s.size=function(c){return arguments.length?(t=+c[0],e=+c[1],s):[t,e]},s.padding=function(c){return arguments.length?(i=+c,s):i},s}var Ble={depth:-1},jP={},Qx={};function Ile(t){return t.id}function kle(t){return t.parentId}function qP(){var t=Ile,e=kle,i;function n(s){var a=Array.from(s),c=t,d=e,f,u,o,g,w,m,l,T,b=new Map;if(i!=null){const S=a.map((F,I)=>Fle(i(F,I,s))),x=S.map(GP),B=new Set(S).add("");for(const F of x)B.has(F)||(B.add(F),S.push(F),x.push(GP(F)),a.push(Qx));c=(F,I)=>S[I],d=(F,I)=>x[I]}for(o=0,f=a.length;o<f;++o)u=a[o],m=a[o]=new Fp(u),(l=c(u,o,s))!=null&&(l+="")&&(T=m.id=l,b.set(T,b.has(T)?jP:m)),(l=d(u,o,s))!=null&&(l+="")&&(m.parent=l);for(o=0;o<f;++o)if(m=a[o],l=m.parent){if(w=b.get(l),!w)throw new Error("missing: "+l);if(w===jP)throw new Error("ambiguous: "+l);w.children?w.children.push(m):w.children=[m],m.parent=w}else{if(g)throw new Error("multiple roots");g=m}if(!g)throw new Error("no root");if(i!=null){for(;g.data===Qx&&g.children.length===1;)g=g.children[0],--f;for(let S=a.length-1;S>=0&&(m=a[S],m.data===Qx);--S)m.data=null}if(g.parent=Ble,g.eachBefore(function(S){S.depth=S.parent.depth+1,--f}).eachBefore(Uq),g.parent=null,f>0)throw new Error("cycle");return g}return n.id=function(s){return arguments.length?(t=J0(s),n):t},n.parentId=function(s){return arguments.length?(e=J0(s),n):e},n.path=function(s){return arguments.length?(i=J0(s),n):i},n}function Fle(t){t=`${t}`;let e=t.length;return yk(t,e-1)&&!yk(t,e-2)&&(t=t.slice(0,-1)),t[0]==="/"?t:`/${t}`}function GP(t){let e=t.length;if(e<2)return"";for(;--e>1&&!yk(t,e););return t.slice(0,e)}function yk(t,e){if(t[e]==="/"){let i=0;for(;e>0&&t[--e]==="\\";)++i;if(!(i&1))return!0}return!1}function Mle(t,e){return t.parent===e.parent?1:2}function Zx(t){var e=t.children;return e?e[0]:t.t}function eB(t){var e=t.children;return e?e[e.length-1]:t.t}function Ale(t,e,i){var n=i/(e.i-t.i);e.c-=n,e.s+=i,t.c+=n,e.z+=i,e.m+=i}function Ole(t){for(var e=0,i=0,n=t.children,s=n.length,a;--s>=0;)a=n[s],a.z+=e,a.m+=e,e+=a.s+(i+=a.c)}function Nle(t,e,i){return t.a.parent===e.parent?t.a:i}function Q0(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}Q0.prototype=Object.create(Fp.prototype);function Cle(t){for(var e=new Q0(t,0),i,n=[e],s,a,c,d;i=n.pop();)if(a=i._.children)for(i.children=new Array(d=a.length),c=d-1;c>=0;--c)n.push(s=i.children[c]=new Q0(a[c],c)),s.parent=i;return(e.parent=new Q0(null,0)).children=[e],e}function Rle(){var t=Mle,e=1,i=1,n=null;function s(u){var o=Cle(u);if(o.eachAfter(a),o.parent.m=-o.z,o.eachBefore(c),n)u.eachBefore(f);else{var g=u,w=u,m=u;u.eachBefore(function(x){x.x<g.x&&(g=x),x.x>w.x&&(w=x),x.depth>m.depth&&(m=x)});var l=g===w?1:t(g,w)/2,T=l-g.x,b=e/(w.x+l+T),S=i/(m.depth||1);u.eachBefore(function(x){x.x=(x.x+T)*b,x.y=x.depth*S})}return u}function a(u){var o=u.children,g=u.parent.children,w=u.i?g[u.i-1]:null;if(o){Ole(u);var m=(o[0].z+o[o.length-1].z)/2;w?(u.z=w.z+t(u._,w._),u.m=u.z-m):u.z=m}else w&&(u.z=w.z+t(u._,w._));u.parent.A=d(u,w,u.parent.A||g[0])}function c(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function d(u,o,g){if(o){for(var w=u,m=u,l=o,T=w.parent.children[0],b=w.m,S=m.m,x=l.m,B=T.m,F;l=eB(l),w=Zx(w),l&&w;)T=Zx(T),m=eB(m),m.a=u,F=l.z+x-w.z-b+t(l._,w._),F>0&&(Ale(Nle(l,u,g),u,F),b+=F,S+=F),x+=l.m,b+=w.m,B+=T.m,S+=m.m;l&&!eB(m)&&(m.t=l,m.m+=x-S),w&&!Zx(T)&&(T.t=w,T.m+=b-B,g=u)}return g}function f(u){u.x*=e,u.y=u.depth*i}return s.separation=function(u){return arguments.length?(t=u,s):t},s.size=function(u){return arguments.length?(n=!1,e=+u[0],i=+u[1],s):n?null:[e,i]},s.nodeSize=function(u){return arguments.length?(n=!0,e=+u[0],i=+u[1],s):n?[e,i]:null},s}function xE(t,e,i,n,s){for(var a=t.children,c,d=-1,f=a.length,u=t.value&&(s-i)/t.value;++d<f;)c=a[d],c.x0=e,c.x1=n,c.y0=i,c.y1=i+=c.value*u}var Vq=(1+Math.sqrt(5))/2;function Wq(t,e,i,n,s,a){for(var c=[],d=e.children,f,u,o=0,g=0,w=d.length,m,l,T=e.value,b,S,x,B,F,I,A;o<w;){m=s-i,l=a-n;do b=d[g++].value;while(!b&&g<w);for(S=x=b,I=Math.max(l/m,m/l)/(T*t),A=b*b*I,F=Math.max(x/A,A/S);g<w;++g){if(b+=u=d[g].value,u<S&&(S=u),u>x&&(x=u),A=b*b*I,B=Math.max(x/A,A/S),B>F){b-=u;break}F=B}c.push(f={value:b,dice:m<l,children:d.slice(o,g)}),f.dice?Nm(f,i,n,s,T?n+=l*b/T:a):xE(f,i,n,T?i+=m*b/T:s,a),T-=b,o=g}return c}const Hq=function t(e){function i(n,s,a,c,d){Wq(e,n,s,a,c,d)}return i.ratio=function(n){return t((n=+n)>1?n:1)},i}(Vq);function Lle(){var t=Hq,e=!1,i=1,n=1,s=[0],a=ff,c=ff,d=ff,f=ff,u=ff;function o(w){return w.x0=w.y0=0,w.x1=i,w.y1=n,w.eachBefore(g),s=[0],e&&w.eachBefore(Gq),w}function g(w){var m=s[w.depth],l=w.x0+m,T=w.y0+m,b=w.x1-m,S=w.y1-m;b<l&&(l=b=(l+b)/2),S<T&&(T=S=(T+S)/2),w.x0=l,w.y0=T,w.x1=b,w.y1=S,w.children&&(m=s[w.depth+1]=a(w)/2,l+=u(w)-m,T+=c(w)-m,b-=d(w)-m,S-=f(w)-m,b<l&&(l=b=(l+b)/2),S<T&&(T=S=(T+S)/2),t(w,l,T,b,S))}return o.round=function(w){return arguments.length?(e=!!w,o):e},o.size=function(w){return arguments.length?(i=+w[0],n=+w[1],o):[i,n]},o.tile=function(w){return arguments.length?(t=zq(w),o):t},o.padding=function(w){return arguments.length?o.paddingInner(w).paddingOuter(w):o.paddingInner()},o.paddingInner=function(w){return arguments.length?(a=typeof w=="function"?w:Eh(+w),o):a},o.paddingOuter=function(w){return arguments.length?o.paddingTop(w).paddingRight(w).paddingBottom(w).paddingLeft(w):o.paddingTop()},o.paddingTop=function(w){return arguments.length?(c=typeof w=="function"?w:Eh(+w),o):c},o.paddingRight=function(w){return arguments.length?(d=typeof w=="function"?w:Eh(+w),o):d},o.paddingBottom=function(w){return arguments.length?(f=typeof w=="function"?w:Eh(+w),o):f},o.paddingLeft=function(w){return arguments.length?(u=typeof w=="function"?w:Eh(+w),o):u},o}function Dle(t,e,i,n,s){var a=t.children,c,d=a.length,f,u=new Array(d+1);for(u[0]=f=c=0;c<d;++c)u[c+1]=f+=a[c].value;o(0,d,t.value,e,i,n,s);function o(g,w,m,l,T,b,S){if(g>=w-1){var x=a[g];x.x0=l,x.y0=T,x.x1=b,x.y1=S;return}for(var B=u[g],F=m/2+B,I=g+1,A=w-1;I<A;){var O=I+A>>>1;u[O]<F?I=O+1:A=O}F-u[I-1]<u[I]-F&&g+1<I&&--I;var R=u[I]-B,D=m-R;if(b-l>S-T){var P=m?(l*D+b*R)/m:b;o(g,I,R,l,T,P,S),o(I,w,D,P,T,b,S)}else{var U=m?(T*D+S*R)/m:S;o(g,I,R,l,T,b,U),o(I,w,D,l,U,b,S)}}}function Ple(t,e,i,n,s){(t.depth&1?xE:Nm)(t,e,i,n,s)}const $le=function t(e){function i(n,s,a,c,d){if((f=n._squarify)&&f.ratio===e)for(var f,u,o,g,w=-1,m,l=f.length,T=n.value;++w<l;){for(u=f[w],o=u.children,g=u.value=0,m=o.length;g<m;++g)u.value+=o[g].value;u.dice?Nm(u,s,a,c,T?a+=(d-a)*u.value/T:d):xE(u,s,a,T?s+=(c-s)*u.value/T:c,d),T-=u.value}else n._squarify=f=Wq(e,n,s,a,c,d),f.ratio=e}return i.ratio=function(n){return t((n=+n)>1?n:1)},i}(Vq);function Co(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function gd(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const gk=Symbol("implicit");function XM(){var t=new AD,e=[],i=[],n=gk;function s(a){let c=t.get(a);if(c===void 0){if(n!==gk)return n;t.set(a,c=e.push(a)-1)}return i[c%i.length]}return s.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new AD;for(const c of a)t.has(c)||t.set(c,e.push(c)-1);return s},s.range=function(a){return arguments.length?(i=Array.from(a),s):i.slice()},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return XM(e,i).unknown(n)},Co.apply(s,arguments),s}function Ule(t){return function(){return t}}function mk(t){return+t}var VP=[0,1];function gs(t){return t}function wk(t,e){return(e-=t=+t)?function(i){return(i-t)/e}:Ule(isNaN(e)?NaN:.5)}function zle(t,e){var i;return t>e&&(i=t,t=e,e=i),function(n){return Math.max(t,Math.min(e,n))}}function jle(t,e,i){var n=t[0],s=t[1],a=e[0],c=e[1];return s<n?(n=wk(s,n),a=i(c,a)):(n=wk(n,s),a=i(a,c)),function(d){return a(n(d))}}function qle(t,e,i){var n=Math.min(t.length,e.length)-1,s=new Array(n),a=new Array(n),c=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++c<n;)s[c]=wk(t[c],t[c+1]),a[c]=i(e[c],e[c+1]);return function(d){var f=Im(t,d,1,n)-1;return a[f](s[f](d))}}function Cm(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function BE(){var t=VP,e=VP,i=yd,n,s,a,c=gs,d,f,u;function o(){var w=Math.min(t.length,e.length);return c!==gs&&(c=zle(t[0],t[w-1])),d=w>2?qle:jle,f=u=null,g}function g(w){return w==null||isNaN(w=+w)?a:(f||(f=d(t.map(n),e,i)))(n(c(w)))}return g.invert=function(w){return c(s((u||(u=d(e,t.map(n),Hr)))(w)))},g.domain=function(w){return arguments.length?(t=Array.from(w,mk),o()):t.slice()},g.range=function(w){return arguments.length?(e=Array.from(w),o()):e.slice()},g.rangeRound=function(w){return e=Array.from(w),i=Fm,o()},g.clamp=function(w){return arguments.length?(c=w?!0:gs,o()):c!==gs},g.interpolate=function(w){return arguments.length?(i=w,o()):i},g.unknown=function(w){return arguments.length?(a=w,g):a},function(w,m){return n=w,s=m,o()}}function Yq(){return BE()(gs,gs)}function Xq(t,e,i,n){var s=jc(t,e,i),a;switch(n=Hf(n??",f"),n.type){case"s":{var c=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(a=J5(s,c))&&(n.precision=a),UM(n,c)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=Q5(s,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=K5(s))&&(n.precision=a-(n.type==="%")*2);break}}return TE(n)}function Iu(t){var e=t.domain;return t.ticks=function(i){var n=e();return PI(n[0],n[n.length-1],i??10)},t.tickFormat=function(i,n){var s=e();return Xq(s[0],s[s.length-1],i??10,n)},t.nice=function(i){i==null&&(i=10);var n=e(),s=0,a=n.length-1,c=n[s],d=n[a],f,u,o=10;for(d<c&&(u=c,c=d,d=u,u=s,s=a,a=u);o-- >0;){if(u=$I(c,d,i),u===f)return n[s]=c,n[a]=d,e(n);if(u>0)c=Math.floor(c/u)*u,d=Math.ceil(d/u)*u;else if(u<0)c=Math.ceil(c*u)/u,d=Math.floor(d*u)/u;else break;f=u}return t},t}function KM(){var t=Yq();return t.copy=function(){return Cm(t,KM())},Co.apply(t,arguments),Iu(t)}function Kq(t){var e;function i(n){return n==null||isNaN(n=+n)?e:n}return i.invert=i,i.domain=i.range=function(n){return arguments.length?(t=Array.from(n,mk),i):t.slice()},i.unknown=function(n){return arguments.length?(e=n,i):e},i.copy=function(){return Kq(t).unknown(e)},t=arguments.length?Array.from(t,mk):[0,1],Iu(i)}function Jq(t,e){t=t.slice();var i=0,n=t.length-1,s=t[i],a=t[n],c;return a<s&&(c=i,i=n,n=c,c=s,s=a,a=c),t[i]=e.floor(s),t[n]=e.ceil(a),t}function WP(t){return Math.log(t)}function HP(t){return Math.exp(t)}function Gle(t){return-Math.log(-t)}function Vle(t){return-Math.exp(-t)}function Wle(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Hle(t){return t===10?Wle:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Yle(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function YP(t){return(e,i)=>-t(-e,i)}function JM(t){const e=t(WP,HP),i=e.domain;let n=10,s,a;function c(){return s=Yle(n),a=Hle(n),i()[0]<0?(s=YP(s),a=YP(a),t(Gle,Vle)):t(WP,HP),e}return e.base=function(d){return arguments.length?(n=+d,c()):n},e.domain=function(d){return arguments.length?(i(d),c()):i()},e.ticks=d=>{const f=i();let u=f[0],o=f[f.length-1];const g=o<u;g&&([u,o]=[o,u]);let w=s(u),m=s(o),l,T;const b=d==null?10:+d;let S=[];if(!(n%1)&&m-w<b){if(w=Math.floor(w),m=Math.ceil(m),u>0){for(;w<=m;++w)for(l=1;l<n;++l)if(T=w<0?l/a(-w):l*a(w),!(T<u)){if(T>o)break;S.push(T)}}else for(;w<=m;++w)for(l=n-1;l>=1;--l)if(T=w>0?l/a(-w):l*a(w),!(T<u)){if(T>o)break;S.push(T)}S.length*2<b&&(S=PI(u,o,b))}else S=PI(w,m,Math.min(m-w,b)).map(a);return g?S.reverse():S},e.tickFormat=(d,f)=>{if(d==null&&(d=10),f==null&&(f=n===10?"s":","),typeof f!="function"&&(!(n%1)&&(f=Hf(f)).precision==null&&(f.trim=!0),f=TE(f)),d===1/0)return f;const u=Math.max(1,n*d/e.ticks().length);return o=>{let g=o/a(Math.round(s(o)));return g*n<n-.5&&(g*=n),g<=u?f(o):""}},e.nice=()=>i(Jq(i(),{floor:d=>a(Math.floor(s(d))),ceil:d=>a(Math.ceil(s(d)))})),e}function Qq(){const t=JM(BE()).domain([1,10]);return t.copy=()=>Cm(t,Qq()).base(t.base()),Co.apply(t,arguments),t}function XP(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function KP(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function QM(t){var e=1,i=t(XP(e),KP(e));return i.constant=function(n){return arguments.length?t(XP(e=+n),KP(e)):e},Iu(i)}function Zq(){var t=QM(BE());return t.copy=function(){return Cm(t,Zq()).constant(t.constant())},Co.apply(t,arguments)}function JP(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Xle(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Kle(t){return t<0?-t*t:t*t}function ZM(t){var e=t(gs,gs),i=1;function n(){return i===1?t(gs,gs):i===.5?t(Xle,Kle):t(JP(i),JP(1/i))}return e.exponent=function(s){return arguments.length?(i=+s,n()):i},Iu(e)}function eA(){var t=ZM(BE());return t.copy=function(){return Cm(t,eA()).exponent(t.exponent())},Co.apply(t,arguments),t}function Jle(){return eA.apply(null,arguments).exponent(.5)}function e7(){var t=[],e=[],i=[],n;function s(){var c=0,d=Math.max(1,e.length);for(i=new Array(d-1);++c<d;)i[c-1]=f5(t,c/d);return a}function a(c){return c==null||isNaN(c=+c)?n:e[Im(i,c)]}return a.invertExtent=function(c){var d=e.indexOf(c);return d<0?[NaN,NaN]:[d>0?i[d-1]:t[0],d<i.length?i[d]:t[t.length-1]]},a.domain=function(c){if(!arguments.length)return t.slice();t=[];for(let d of c)d!=null&&!isNaN(d=+d)&&t.push(d);return t.sort(bl),s()},a.range=function(c){return arguments.length?(e=Array.from(c),s()):e.slice()},a.unknown=function(c){return arguments.length?(n=c,a):n},a.quantiles=function(){return i.slice()},a.copy=function(){return e7().domain(t).range(e).unknown(n)},Co.apply(a,arguments)}function t7(){var t=0,e=1,i=1,n=[.5],s=[0,1],a;function c(f){return f!=null&&f<=f?s[Im(n,f,0,i)]:a}function d(){var f=-1;for(n=new Array(i);++f<i;)n[f]=((f+1)*e-(f-i)*t)/(i+1);return c}return c.domain=function(f){return arguments.length?([t,e]=f,t=+t,e=+e,d()):[t,e]},c.range=function(f){return arguments.length?(i=(s=Array.from(f)).length-1,d()):s.slice()},c.invertExtent=function(f){var u=s.indexOf(f);return u<0?[NaN,NaN]:u<1?[t,n[0]]:u>=i?[n[i-1],e]:[n[u-1],n[u]]},c.unknown=function(f){return arguments.length&&(a=f),c},c.thresholds=function(){return n.slice()},c.copy=function(){return t7().domain([t,e]).range(s).unknown(a)},Co.apply(Iu(c),arguments)}function i7(){var t=[.5],e=[0,1],i,n=1;function s(a){return a!=null&&a<=a?e[Im(t,a,0,n)]:i}return s.domain=function(a){return arguments.length?(t=Array.from(a),n=Math.min(t.length,e.length-1),s):t.slice()},s.range=function(a){return arguments.length?(e=Array.from(a),n=Math.min(t.length,e.length-1),s):e.slice()},s.invertExtent=function(a){var c=e.indexOf(a);return[t[c-1],t[c]]},s.unknown=function(a){return arguments.length?(i=a,s):i},s.copy=function(){return i7().domain(t).range(e).unknown(i)},Co.apply(s,arguments)}const tB=new Date,iB=new Date;function Yi(t,e,i,n){function s(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return s.floor=a=>(t(a=new Date(+a)),a),s.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),s.round=a=>{const c=s(a),d=s.ceil(a);return a-c<d-a?c:d},s.offset=(a,c)=>(e(a=new Date(+a),c==null?1:Math.floor(c)),a),s.range=(a,c,d)=>{const f=[];if(a=s.ceil(a),d=d==null?1:Math.floor(d),!(a<c)||!(d>0))return f;let u;do f.push(u=new Date(+a)),e(a,d),t(a);while(u<a&&a<c);return f},s.filter=a=>Yi(c=>{if(c>=c)for(;t(c),!a(c);)c.setTime(c-1)},(c,d)=>{if(c>=c)if(d<0)for(;++d<=0;)for(;e(c,-1),!a(c););else for(;--d>=0;)for(;e(c,1),!a(c););}),i&&(s.count=(a,c)=>(tB.setTime(+a),iB.setTime(+c),t(tB),t(iB),Math.floor(i(tB,iB))),s.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?s.filter(n?c=>n(c)%a===0:c=>s.count(0,c)%a===0):s)),s}const Mp=Yi(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Mp.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Yi(e=>{e.setTime(Math.floor(e/t)*t)},(e,i)=>{e.setTime(+e+i*t)},(e,i)=>(i-e)/t):Mp);Mp.range;const _l=1e3,mr=_l*60,yl=mr*60,Nl=yl*24,tA=Nl*7,QP=Nl*30,nB=Nl*365,gl=Yi(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*_l)},(t,e)=>(e-t)/_l,t=>t.getUTCSeconds());gl.range;const IE=Yi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*_l)},(t,e)=>{t.setTime(+t+e*mr)},(t,e)=>(e-t)/mr,t=>t.getMinutes());IE.range;const kE=Yi(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*mr)},(t,e)=>(e-t)/mr,t=>t.getUTCMinutes());kE.range;const FE=Yi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*_l-t.getMinutes()*mr)},(t,e)=>{t.setTime(+t+e*yl)},(t,e)=>(e-t)/yl,t=>t.getHours());FE.range;const ME=Yi(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*yl)},(t,e)=>(e-t)/yl,t=>t.getUTCHours());ME.range;const vl=Yi(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*mr)/Nl,t=>t.getDate()-1);vl.range;const Ac=Yi(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Nl,t=>t.getUTCDate()-1);Ac.range;const n7=Yi(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Nl,t=>Math.floor(t/Nl));n7.range;function ku(t){return Yi(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,i)=>{e.setDate(e.getDate()+i*7)},(e,i)=>(i-e-(i.getTimezoneOffset()-e.getTimezoneOffset())*mr)/tA)}const __=ku(0),B1=ku(1),Qle=ku(2),Zle=ku(3),Ap=ku(4),ece=ku(5),tce=ku(6);__.range;B1.range;Qle.range;Zle.range;Ap.range;ece.range;tce.range;function Fu(t){return Yi(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,i)=>{e.setUTCDate(e.getUTCDate()+i*7)},(e,i)=>(i-e)/tA)}const y_=Fu(0),I1=Fu(1),ice=Fu(2),nce=Fu(3),Op=Fu(4),sce=Fu(5),rce=Fu(6);y_.range;I1.range;ice.range;nce.range;Op.range;sce.range;rce.range;const Cg=Yi(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());Cg.range;const Rg=Yi(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());Rg.range;const bo=Yi(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());bo.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Yi(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,i)=>{e.setFullYear(e.getFullYear()+i*t)});bo.range;const To=Yi(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());To.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Yi(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,i)=>{e.setUTCFullYear(e.getUTCFullYear()+i*t)});To.range;function s7(t,e,i,n,s,a){const c=[[gl,1,_l],[gl,5,5*_l],[gl,15,15*_l],[gl,30,30*_l],[a,1,mr],[a,5,5*mr],[a,15,15*mr],[a,30,30*mr],[s,1,yl],[s,3,3*yl],[s,6,6*yl],[s,12,12*yl],[n,1,Nl],[n,2,2*Nl],[i,1,tA],[e,1,QP],[e,3,3*QP],[t,1,nB]];function d(u,o,g){const w=o<u;w&&([u,o]=[o,u]);const m=g&&typeof g.range=="function"?g:f(u,o,g),l=m?m.range(u,+o+1):[];return w?l.reverse():l}function f(u,o,g){const w=Math.abs(o-u)/g,m=Bm(([,,b])=>b).right(c,w);if(m===c.length)return t.every(jc(u/nB,o/nB,g));if(m===0)return Mp.every(Math.max(jc(u,o,g),1));const[l,T]=c[w/c[m-1][2]<c[m][2]/w?m-1:m];return l.every(T)}return[d,f]}const[ace,oce]=s7(To,Rg,y_,n7,ME,kE),[lce,cce]=s7(bo,Cg,__,vl,FE,IE);function sB(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function rB(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function V_(t,e,i){return{y:t,m:e,d:i,H:0,M:0,S:0,L:0}}function r7(t){var e=t.dateTime,i=t.date,n=t.time,s=t.periods,a=t.days,c=t.shortDays,d=t.months,f=t.shortMonths,u=W_(s),o=H_(s),g=W_(a),w=H_(a),m=W_(c),l=H_(c),T=W_(d),b=H_(d),S=W_(f),x=H_(f),B={a:J,A:G,b:le,B:pe,c:null,d:s4,e:s4,f:Oce,g:jce,G:Gce,H:Fce,I:Mce,j:Ace,L:a7,m:Nce,M:Cce,p:ne,q:Ae,Q:o4,s:l4,S:Rce,u:Lce,U:Dce,V:Pce,w:$ce,W:Uce,x:null,X:null,y:zce,Y:qce,Z:Vce,"%":a4},F={a:fe,A:Fe,b:je,B:_t,c:null,d:r4,e:r4,f:Xce,g:rde,G:ode,H:Wce,I:Hce,j:Yce,L:l7,m:Kce,M:Jce,p:Ct,q:zt,Q:o4,s:l4,S:Qce,u:Zce,U:ede,V:tde,w:ide,W:nde,x:null,X:null,y:sde,Y:ade,Z:lde,"%":a4},I={a:P,A:U,b:Y,B:z,c:W,d:i4,e:i4,f:xce,g:t4,G:e4,H:n4,I:n4,j:Tce,L:Sce,m:bce,M:vce,p:D,q:wce,Q:Ice,s:kce,S:Ece,u:pce,U:_ce,V:yce,w:hce,W:gce,x:V,X:H,y:t4,Y:e4,Z:mce,"%":Bce};B.x=A(i,B),B.X=A(n,B),B.c=A(e,B),F.x=A(i,F),F.X=A(n,F),F.c=A(e,F);function A(_e,q){return function(j){var L=[],K=-1,Z=0,oe=_e.length,re,ge,Se;for(j instanceof Date||(j=new Date(+j));++K<oe;)_e.charCodeAt(K)===37&&(L.push(_e.slice(Z,K)),(ge=ZP[re=_e.charAt(++K)])!=null?re=_e.charAt(++K):ge=re==="e"?" ":"0",(Se=q[re])&&(re=Se(j,ge)),L.push(re),Z=K+1);return L.push(_e.slice(Z,K)),L.join("")}}function O(_e,q){return function(j){var L=V_(1900,void 0,1),K=R(L,_e,j+="",0),Z,oe;if(K!=j.length)return null;if("Q"in L)return new Date(L.Q);if("s"in L)return new Date(L.s*1e3+("L"in L?L.L:0));if(q&&!("Z"in L)&&(L.Z=0),"p"in L&&(L.H=L.H%12+L.p*12),L.m===void 0&&(L.m="q"in L?L.q:0),"V"in L){if(L.V<1||L.V>53)return null;"w"in L||(L.w=1),"Z"in L?(Z=rB(V_(L.y,0,1)),oe=Z.getUTCDay(),Z=oe>4||oe===0?I1.ceil(Z):I1(Z),Z=Ac.offset(Z,(L.V-1)*7),L.y=Z.getUTCFullYear(),L.m=Z.getUTCMonth(),L.d=Z.getUTCDate()+(L.w+6)%7):(Z=sB(V_(L.y,0,1)),oe=Z.getDay(),Z=oe>4||oe===0?B1.ceil(Z):B1(Z),Z=vl.offset(Z,(L.V-1)*7),L.y=Z.getFullYear(),L.m=Z.getMonth(),L.d=Z.getDate()+(L.w+6)%7)}else("W"in L||"U"in L)&&("w"in L||(L.w="u"in L?L.u%7:"W"in L?1:0),oe="Z"in L?rB(V_(L.y,0,1)).getUTCDay():sB(V_(L.y,0,1)).getDay(),L.m=0,L.d="W"in L?(L.w+6)%7+L.W*7-(oe+5)%7:L.w+L.U*7-(oe+6)%7);return"Z"in L?(L.H+=L.Z/100|0,L.M+=L.Z%100,rB(L)):sB(L)}}function R(_e,q,j,L){for(var K=0,Z=q.length,oe=j.length,re,ge;K<Z;){if(L>=oe)return-1;if(re=q.charCodeAt(K++),re===37){if(re=q.charAt(K++),ge=I[re in ZP?q.charAt(K++):re],!ge||(L=ge(_e,j,L))<0)return-1}else if(re!=j.charCodeAt(L++))return-1}return L}function D(_e,q,j){var L=u.exec(q.slice(j));return L?(_e.p=o.get(L[0].toLowerCase()),j+L[0].length):-1}function P(_e,q,j){var L=m.exec(q.slice(j));return L?(_e.w=l.get(L[0].toLowerCase()),j+L[0].length):-1}function U(_e,q,j){var L=g.exec(q.slice(j));return L?(_e.w=w.get(L[0].toLowerCase()),j+L[0].length):-1}function Y(_e,q,j){var L=S.exec(q.slice(j));return L?(_e.m=x.get(L[0].toLowerCase()),j+L[0].length):-1}function z(_e,q,j){var L=T.exec(q.slice(j));return L?(_e.m=b.get(L[0].toLowerCase()),j+L[0].length):-1}function W(_e,q,j){return R(_e,e,q,j)}function V(_e,q,j){return R(_e,i,q,j)}function H(_e,q,j){return R(_e,n,q,j)}function J(_e){return c[_e.getDay()]}function G(_e){return a[_e.getDay()]}function le(_e){return f[_e.getMonth()]}function pe(_e){return d[_e.getMonth()]}function ne(_e){return s[+(_e.getHours()>=12)]}function Ae(_e){return 1+~~(_e.getMonth()/3)}function fe(_e){return c[_e.getUTCDay()]}function Fe(_e){return a[_e.getUTCDay()]}function je(_e){return f[_e.getUTCMonth()]}function _t(_e){return d[_e.getUTCMonth()]}function Ct(_e){return s[+(_e.getUTCHours()>=12)]}function zt(_e){return 1+~~(_e.getUTCMonth()/3)}return{format:function(_e){var q=A(_e+="",B);return q.toString=function(){return _e},q},parse:function(_e){var q=O(_e+="",!1);return q.toString=function(){return _e},q},utcFormat:function(_e){var q=A(_e+="",F);return q.toString=function(){return _e},q},utcParse:function(_e){var q=O(_e+="",!0);return q.toString=function(){return _e},q}}}var ZP={"-":"",_:" ",0:"0"},fn=/^\s*\d+/,dce=/^%/,fce=/[\\^$*+?|[\]().{}]/g;function Pt(t,e,i){var n=t<0?"-":"",s=(n?-t:t)+"",a=s.length;return n+(a<i?new Array(i-a+1).join(e)+s:s)}function uce(t){return t.replace(fce,"\\$&")}function W_(t){return new RegExp("^(?:"+t.map(uce).join("|")+")","i")}function H_(t){return new Map(t.map((e,i)=>[e.toLowerCase(),i]))}function hce(t,e,i){var n=fn.exec(e.slice(i,i+1));return n?(t.w=+n[0],i+n[0].length):-1}function pce(t,e,i){var n=fn.exec(e.slice(i,i+1));return n?(t.u=+n[0],i+n[0].length):-1}function _ce(t,e,i){var n=fn.exec(e.slice(i,i+2));return n?(t.U=+n[0],i+n[0].length):-1}function yce(t,e,i){var n=fn.exec(e.slice(i,i+2));return n?(t.V=+n[0],i+n[0].length):-1}function gce(t,e,i){var n=fn.exec(e.slice(i,i+2));return n?(t.W=+n[0],i+n[0].length):-1}function e4(t,e,i){var n=fn.exec(e.slice(i,i+4));return n?(t.y=+n[0],i+n[0].length):-1}function t4(t,e,i){var n=fn.exec(e.slice(i,i+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),i+n[0].length):-1}function mce(t,e,i){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(i,i+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),i+n[0].length):-1}function wce(t,e,i){var n=fn.exec(e.slice(i,i+1));return n?(t.q=n[0]*3-3,i+n[0].length):-1}function bce(t,e,i){var n=fn.exec(e.slice(i,i+2));return n?(t.m=n[0]-1,i+n[0].length):-1}function i4(t,e,i){var n=fn.exec(e.slice(i,i+2));return n?(t.d=+n[0],i+n[0].length):-1}function Tce(t,e,i){var n=fn.exec(e.slice(i,i+3));return n?(t.m=0,t.d=+n[0],i+n[0].length):-1}function n4(t,e,i){var n=fn.exec(e.slice(i,i+2));return n?(t.H=+n[0],i+n[0].length):-1}function vce(t,e,i){var n=fn.exec(e.slice(i,i+2));return n?(t.M=+n[0],i+n[0].length):-1}function Ece(t,e,i){var n=fn.exec(e.slice(i,i+2));return n?(t.S=+n[0],i+n[0].length):-1}function Sce(t,e,i){var n=fn.exec(e.slice(i,i+3));return n?(t.L=+n[0],i+n[0].length):-1}function xce(t,e,i){var n=fn.exec(e.slice(i,i+6));return n?(t.L=Math.floor(n[0]/1e3),i+n[0].length):-1}function Bce(t,e,i){var n=dce.exec(e.slice(i,i+1));return n?i+n[0].length:-1}function Ice(t,e,i){var n=fn.exec(e.slice(i));return n?(t.Q=+n[0],i+n[0].length):-1}function kce(t,e,i){var n=fn.exec(e.slice(i));return n?(t.s=+n[0],i+n[0].length):-1}function s4(t,e){return Pt(t.getDate(),e,2)}function Fce(t,e){return Pt(t.getHours(),e,2)}function Mce(t,e){return Pt(t.getHours()%12||12,e,2)}function Ace(t,e){return Pt(1+vl.count(bo(t),t),e,3)}function a7(t,e){return Pt(t.getMilliseconds(),e,3)}function Oce(t,e){return a7(t,e)+"000"}function Nce(t,e){return Pt(t.getMonth()+1,e,2)}function Cce(t,e){return Pt(t.getMinutes(),e,2)}function Rce(t,e){return Pt(t.getSeconds(),e,2)}function Lce(t){var e=t.getDay();return e===0?7:e}function Dce(t,e){return Pt(__.count(bo(t)-1,t),e,2)}function o7(t){var e=t.getDay();return e>=4||e===0?Ap(t):Ap.ceil(t)}function Pce(t,e){return t=o7(t),Pt(Ap.count(bo(t),t)+(bo(t).getDay()===4),e,2)}function $ce(t){return t.getDay()}function Uce(t,e){return Pt(B1.count(bo(t)-1,t),e,2)}function zce(t,e){return Pt(t.getFullYear()%100,e,2)}function jce(t,e){return t=o7(t),Pt(t.getFullYear()%100,e,2)}function qce(t,e){return Pt(t.getFullYear()%1e4,e,4)}function Gce(t,e){var i=t.getDay();return t=i>=4||i===0?Ap(t):Ap.ceil(t),Pt(t.getFullYear()%1e4,e,4)}function Vce(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Pt(e/60|0,"0",2)+Pt(e%60,"0",2)}function r4(t,e){return Pt(t.getUTCDate(),e,2)}function Wce(t,e){return Pt(t.getUTCHours(),e,2)}function Hce(t,e){return Pt(t.getUTCHours()%12||12,e,2)}function Yce(t,e){return Pt(1+Ac.count(To(t),t),e,3)}function l7(t,e){return Pt(t.getUTCMilliseconds(),e,3)}function Xce(t,e){return l7(t,e)+"000"}function Kce(t,e){return Pt(t.getUTCMonth()+1,e,2)}function Jce(t,e){return Pt(t.getUTCMinutes(),e,2)}function Qce(t,e){return Pt(t.getUTCSeconds(),e,2)}function Zce(t){var e=t.getUTCDay();return e===0?7:e}function ede(t,e){return Pt(y_.count(To(t)-1,t),e,2)}function c7(t){var e=t.getUTCDay();return e>=4||e===0?Op(t):Op.ceil(t)}function tde(t,e){return t=c7(t),Pt(Op.count(To(t),t)+(To(t).getUTCDay()===4),e,2)}function ide(t){return t.getUTCDay()}function nde(t,e){return Pt(I1.count(To(t)-1,t),e,2)}function sde(t,e){return Pt(t.getUTCFullYear()%100,e,2)}function rde(t,e){return t=c7(t),Pt(t.getUTCFullYear()%100,e,2)}function ade(t,e){return Pt(t.getUTCFullYear()%1e4,e,4)}function ode(t,e){var i=t.getUTCDay();return t=i>=4||i===0?Op(t):Op.ceil(t),Pt(t.getUTCFullYear()%1e4,e,4)}function lde(){return"+0000"}function a4(){return"%"}function o4(t){return+t}function l4(t){return Math.floor(+t/1e3)}var Yu,iA,d7,nA,f7;cde({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function cde(t){return Yu=r7(t),iA=Yu.format,d7=Yu.parse,nA=Yu.utcFormat,f7=Yu.utcParse,Yu}function dde(t){return new Date(t)}function fde(t){return t instanceof Date?+t:+new Date(+t)}function sA(t,e,i,n,s,a,c,d,f,u){var o=Yq(),g=o.invert,w=o.domain,m=u(".%L"),l=u(":%S"),T=u("%I:%M"),b=u("%I %p"),S=u("%a %d"),x=u("%b %d"),B=u("%B"),F=u("%Y");function I(A){return(f(A)<A?m:d(A)<A?l:c(A)<A?T:a(A)<A?b:n(A)<A?s(A)<A?S:x:i(A)<A?B:F)(A)}return o.invert=function(A){return new Date(g(A))},o.domain=function(A){return arguments.length?w(Array.from(A,fde)):w().map(dde)},o.ticks=function(A){var O=w();return t(O[0],O[O.length-1],A??10)},o.tickFormat=function(A,O){return O==null?I:u(O)},o.nice=function(A){var O=w();return(!A||typeof A.range!="function")&&(A=e(O[0],O[O.length-1],A??10)),A?w(Jq(O,A)):o},o.copy=function(){return Cm(o,sA(t,e,i,n,s,a,c,d,f,u))},o}function u7(){return Co.apply(sA(lce,cce,bo,Cg,__,vl,FE,IE,gl,iA).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function ude(){return Co.apply(sA(ace,oce,To,Rg,y_,Ac,ME,kE,gl,nA).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function AE(){var t=0,e=1,i,n,s,a,c=gs,d=!1,f;function u(g){return g==null||isNaN(g=+g)?f:c(s===0?.5:(g=(a(g)-i)*s,d?Math.max(0,Math.min(1,g)):g))}u.domain=function(g){return arguments.length?([t,e]=g,i=a(t=+t),n=a(e=+e),s=i===n?0:1/(n-i),u):[t,e]},u.clamp=function(g){return arguments.length?(d=!!g,u):d},u.interpolator=function(g){return arguments.length?(c=g,u):c};function o(g){return function(w){var m,l;return arguments.length?([m,l]=w,c=g(m,l),u):[c(0),c(1)]}}return u.range=o(yd),u.rangeRound=o(Fm),u.unknown=function(g){return arguments.length?(f=g,u):f},function(g){return a=g,i=g(t),n=g(e),s=i===n?0:1/(n-i),u}}function md(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function rA(){var t=Iu(AE()(gs));return t.copy=function(){return md(t,rA())},gd.apply(t,arguments)}function h7(){var t=JM(AE()).domain([1,10]);return t.copy=function(){return md(t,h7()).base(t.base())},gd.apply(t,arguments)}function p7(){var t=QM(AE());return t.copy=function(){return md(t,p7()).constant(t.constant())},gd.apply(t,arguments)}function aA(){var t=ZM(AE());return t.copy=function(){return md(t,aA()).exponent(t.exponent())},gd.apply(t,arguments)}function hde(){return aA.apply(null,arguments).exponent(.5)}function OE(){var t=0,e=.5,i=1,n=1,s,a,c,d,f,u=gs,o,g=!1,w;function m(T){return isNaN(T=+T)?w:(T=.5+((T=+o(T))-a)*(n*T<n*a?d:f),u(g?Math.max(0,Math.min(1,T)):T))}m.domain=function(T){return arguments.length?([t,e,i]=T,s=o(t=+t),a=o(e=+e),c=o(i=+i),d=s===a?0:.5/(a-s),f=a===c?0:.5/(c-a),n=a<s?-1:1,m):[t,e,i]},m.clamp=function(T){return arguments.length?(g=!!T,m):g},m.interpolator=function(T){return arguments.length?(u=T,m):u};function l(T){return function(b){var S,x,B;return arguments.length?([S,x,B]=b,u=NM(T,[S,x,B]),m):[u(0),u(.5),u(1)]}}return m.range=l(yd),m.rangeRound=l(Fm),m.unknown=function(T){return arguments.length?(w=T,m):w},function(T){return o=T,s=T(t),a=T(e),c=T(i),d=s===a?0:.5/(a-s),f=a===c?0:.5/(c-a),n=a<s?-1:1,m}}function _7(){var t=Iu(OE()(gs));return t.copy=function(){return md(t,_7())},gd.apply(t,arguments)}function y7(){var t=JM(OE()).domain([.1,1,10]);return t.copy=function(){return md(t,y7()).base(t.base())},gd.apply(t,arguments)}function g7(){var t=QM(OE());return t.copy=function(){return md(t,g7()).constant(t.constant())},gd.apply(t,arguments)}function oA(){var t=ZM(OE());return t.copy=function(){return md(t,oA()).exponent(t.exponent())},gd.apply(t,arguments)}function pde(){return oA.apply(null,arguments).exponent(.5)}function Vt(t){return function(){return t}}const c4=Math.abs,vn=Math.atan2,Cd=Math.cos,_de=Math.max,aB=Math.min,Ma=Math.sin,bf=Math.sqrt,En=1e-12,Np=Math.PI,k1=Np/2,m7=2*Np;function yde(t){return t>1?0:t<-1?Np:Math.acos(t)}function d4(t){return t>=1?k1:t<=-1?-k1:Math.asin(t)}function NE(t){let e=3;return t.digits=function(i){if(!arguments.length)return e;if(i==null)e=null;else{const n=Math.floor(i);if(!(n>=0))throw new RangeError(`invalid digits: ${i}`);e=n}return t},()=>new RM(e)}function gde(t){return t.innerRadius}function mde(t){return t.outerRadius}function wde(t){return t.startAngle}function bde(t){return t.endAngle}function Tde(t){return t&&t.padAngle}function vde(t,e,i,n,s,a,c,d){var f=i-t,u=n-e,o=c-s,g=d-a,w=g*f-o*u;if(!(w*w<En))return w=(o*(e-a)-g*(t-s))/w,[t+w*f,e+w*u]}function n0(t,e,i,n,s,a,c){var d=t-i,f=e-n,u=(c?a:-a)/bf(d*d+f*f),o=u*f,g=-u*d,w=t+o,m=e+g,l=i+o,T=n+g,b=(w+l)/2,S=(m+T)/2,x=l-w,B=T-m,F=x*x+B*B,I=s-a,A=w*T-l*m,O=(B<0?-1:1)*bf(_de(0,I*I*F-A*A)),R=(A*B-x*O)/F,D=(-A*x-B*O)/F,P=(A*B+x*O)/F,U=(-A*x+B*O)/F,Y=R-b,z=D-S,W=P-b,V=U-S;return Y*Y+z*z>W*W+V*V&&(R=P,D=U),{cx:R,cy:D,x01:-o,y01:-g,x11:R*(s/I-1),y11:D*(s/I-1)}}function Ede(){var t=gde,e=mde,i=Vt(0),n=null,s=wde,a=bde,c=Tde,d=null,f=NE(u);function u(){var o,g,w=+t.apply(this,arguments),m=+e.apply(this,arguments),l=s.apply(this,arguments)-k1,T=a.apply(this,arguments)-k1,b=c4(T-l),S=T>l;if(d||(d=o=f()),m<w&&(g=m,m=w,w=g),!(m>En))d.moveTo(0,0);else if(b>m7-En)d.moveTo(m*Cd(l),m*Ma(l)),d.arc(0,0,m,l,T,!S),w>En&&(d.moveTo(w*Cd(T),w*Ma(T)),d.arc(0,0,w,T,l,S));else{var x=l,B=T,F=l,I=T,A=b,O=b,R=c.apply(this,arguments)/2,D=R>En&&(n?+n.apply(this,arguments):bf(w*w+m*m)),P=aB(c4(m-w)/2,+i.apply(this,arguments)),U=P,Y=P,z,W;if(D>En){var V=d4(D/w*Ma(R)),H=d4(D/m*Ma(R));(A-=V*2)>En?(V*=S?1:-1,F+=V,I-=V):(A=0,F=I=(l+T)/2),(O-=H*2)>En?(H*=S?1:-1,x+=H,B-=H):(O=0,x=B=(l+T)/2)}var J=m*Cd(x),G=m*Ma(x),le=w*Cd(I),pe=w*Ma(I);if(P>En){var ne=m*Cd(B),Ae=m*Ma(B),fe=w*Cd(F),Fe=w*Ma(F),je;if(b<Np)if(je=vde(J,G,fe,Fe,ne,Ae,le,pe)){var _t=J-je[0],Ct=G-je[1],zt=ne-je[0],_e=Ae-je[1],q=1/Ma(yde((_t*zt+Ct*_e)/(bf(_t*_t+Ct*Ct)*bf(zt*zt+_e*_e)))/2),j=bf(je[0]*je[0]+je[1]*je[1]);U=aB(P,(w-j)/(q-1)),Y=aB(P,(m-j)/(q+1))}else U=Y=0}O>En?Y>En?(z=n0(fe,Fe,J,G,m,Y,S),W=n0(ne,Ae,le,pe,m,Y,S),d.moveTo(z.cx+z.x01,z.cy+z.y01),Y<P?d.arc(z.cx,z.cy,Y,vn(z.y01,z.x01),vn(W.y01,W.x01),!S):(d.arc(z.cx,z.cy,Y,vn(z.y01,z.x01),vn(z.y11,z.x11),!S),d.arc(0,0,m,vn(z.cy+z.y11,z.cx+z.x11),vn(W.cy+W.y11,W.cx+W.x11),!S),d.arc(W.cx,W.cy,Y,vn(W.y11,W.x11),vn(W.y01,W.x01),!S))):(d.moveTo(J,G),d.arc(0,0,m,x,B,!S)):d.moveTo(J,G),!(w>En)||!(A>En)?d.lineTo(le,pe):U>En?(z=n0(le,pe,ne,Ae,w,-U,S),W=n0(J,G,fe,Fe,w,-U,S),d.lineTo(z.cx+z.x01,z.cy+z.y01),U<P?d.arc(z.cx,z.cy,U,vn(z.y01,z.x01),vn(W.y01,W.x01),!S):(d.arc(z.cx,z.cy,U,vn(z.y01,z.x01),vn(z.y11,z.x11),!S),d.arc(0,0,w,vn(z.cy+z.y11,z.cx+z.x11),vn(W.cy+W.y11,W.cx+W.x11),S),d.arc(W.cx,W.cy,U,vn(W.y11,W.x11),vn(W.y01,W.x01),!S))):d.arc(0,0,w,I,F,S)}if(d.closePath(),o)return d=null,o+""||null}return u.centroid=function(){var o=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,g=(+s.apply(this,arguments)+ +a.apply(this,arguments))/2-Np/2;return[Cd(g)*o,Ma(g)*o]},u.innerRadius=function(o){return arguments.length?(t=typeof o=="function"?o:Vt(+o),u):t},u.outerRadius=function(o){return arguments.length?(e=typeof o=="function"?o:Vt(+o),u):e},u.cornerRadius=function(o){return arguments.length?(i=typeof o=="function"?o:Vt(+o),u):i},u.padRadius=function(o){return arguments.length?(n=o==null?null:typeof o=="function"?o:Vt(+o),u):n},u.startAngle=function(o){return arguments.length?(s=typeof o=="function"?o:Vt(+o),u):s},u.endAngle=function(o){return arguments.length?(a=typeof o=="function"?o:Vt(+o),u):a},u.padAngle=function(o){return arguments.length?(c=typeof o=="function"?o:Vt(+o),u):c},u.context=function(o){return arguments.length?(d=o??null,u):d},u}function w7(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function b7(t){this._context=t}b7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function lA(t){return new b7(t)}function T7(t){return t[0]}function v7(t){return t[1]}function E7(t,e){var i=Vt(!0),n=null,s=lA,a=null,c=NE(d);t=typeof t=="function"?t:t===void 0?T7:Vt(t),e=typeof e=="function"?e:e===void 0?v7:Vt(e);function d(f){var u,o=(f=w7(f)).length,g,w=!1,m;for(n==null&&(a=s(m=c())),u=0;u<=o;++u)!(u<o&&i(g=f[u],u,f))===w&&((w=!w)?a.lineStart():a.lineEnd()),w&&a.point(+t(g,u,f),+e(g,u,f));if(m)return a=null,m+""||null}return d.x=function(f){return arguments.length?(t=typeof f=="function"?f:Vt(+f),d):t},d.y=function(f){return arguments.length?(e=typeof f=="function"?f:Vt(+f),d):e},d.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Vt(!!f),d):i},d.curve=function(f){return arguments.length?(s=f,n!=null&&(a=s(n)),d):s},d.context=function(f){return arguments.length?(f==null?n=a=null:a=s(n=f),d):n},d}function S7(t,e,i){var n=null,s=Vt(!0),a=null,c=lA,d=null,f=NE(u);t=typeof t=="function"?t:t===void 0?T7:Vt(+t),e=typeof e=="function"?e:Vt(e===void 0?0:+e),i=typeof i=="function"?i:i===void 0?v7:Vt(+i);function u(g){var w,m,l,T=(g=w7(g)).length,b,S=!1,x,B=new Array(T),F=new Array(T);for(a==null&&(d=c(x=f())),w=0;w<=T;++w){if(!(w<T&&s(b=g[w],w,g))===S)if(S=!S)m=w,d.areaStart(),d.lineStart();else{for(d.lineEnd(),d.lineStart(),l=w-1;l>=m;--l)d.point(B[l],F[l]);d.lineEnd(),d.areaEnd()}S&&(B[w]=+t(b,w,g),F[w]=+e(b,w,g),d.point(n?+n(b,w,g):B[w],i?+i(b,w,g):F[w]))}if(x)return d=null,x+""||null}function o(){return E7().defined(s).curve(c).context(a)}return u.x=function(g){return arguments.length?(t=typeof g=="function"?g:Vt(+g),n=null,u):t},u.x0=function(g){return arguments.length?(t=typeof g=="function"?g:Vt(+g),u):t},u.x1=function(g){return arguments.length?(n=g==null?null:typeof g=="function"?g:Vt(+g),u):n},u.y=function(g){return arguments.length?(e=typeof g=="function"?g:Vt(+g),i=null,u):e},u.y0=function(g){return arguments.length?(e=typeof g=="function"?g:Vt(+g),u):e},u.y1=function(g){return arguments.length?(i=g==null?null:typeof g=="function"?g:Vt(+g),u):i},u.lineX0=u.lineY0=function(){return o().x(t).y(e)},u.lineY1=function(){return o().x(t).y(i)},u.lineX1=function(){return o().x(n).y(e)},u.defined=function(g){return arguments.length?(s=typeof g=="function"?g:Vt(!!g),u):s},u.curve=function(g){return arguments.length?(c=g,a!=null&&(d=c(a)),u):c},u.context=function(g){return arguments.length?(g==null?a=d=null:d=c(a=g),u):a},u}const Sde={draw(t,e){const i=bf(e/Np);t.moveTo(i,0),t.arc(0,0,i,0,m7)}};function xde(t,e){let i=null,n=NE(s);t=typeof t=="function"?t:Vt(t||Sde),e=typeof e=="function"?e:Vt(e===void 0?64:+e);function s(){let a;if(i||(i=a=n()),t.apply(this,arguments).draw(i,+e.apply(this,arguments)),a)return i=null,a+""||null}return s.type=function(a){return arguments.length?(t=typeof a=="function"?a:Vt(a),s):t},s.size=function(a){return arguments.length?(e=typeof a=="function"?a:Vt(+a),s):e},s.context=function(a){return arguments.length?(i=a??null,s):i},s}function Gc(){}function F1(t,e,i){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+i)/6)}function CE(t){this._context=t}CE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:F1(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:F1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Bde(t){return new CE(t)}function x7(t){this._context=t}x7.prototype={areaStart:Gc,areaEnd:Gc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:F1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Ide(t){return new x7(t)}function B7(t){this._context=t}B7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var i=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(i,n):this._context.moveTo(i,n);break;case 3:this._point=4;default:F1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function kde(t){return new B7(t)}function I7(t,e){this._basis=new CE(t),this._beta=e}I7.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,i=t.length-1;if(i>0)for(var n=t[0],s=e[0],a=t[i]-n,c=e[i]-s,d=-1,f;++d<=i;)f=d/i,this._basis.point(this._beta*t[d]+(1-this._beta)*(n+f*a),this._beta*e[d]+(1-this._beta)*(s+f*c));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const Fde=function t(e){function i(n){return e===1?new CE(n):new I7(n,e)}return i.beta=function(n){return t(+n)},i}(.85);function M1(t,e,i){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-i),t._x2,t._y2)}function cA(t,e){this._context=t,this._k=(1-e)/6}cA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:M1(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:M1(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Mde=function t(e){function i(n){return new cA(n,e)}return i.tension=function(n){return t(+n)},i}(0);function dA(t,e){this._context=t,this._k=(1-e)/6}dA.prototype={areaStart:Gc,areaEnd:Gc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:M1(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Ade=function t(e){function i(n){return new dA(n,e)}return i.tension=function(n){return t(+n)},i}(0);function fA(t,e){this._context=t,this._k=(1-e)/6}fA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:M1(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Ode=function t(e){function i(n){return new fA(n,e)}return i.tension=function(n){return t(+n)},i}(0);function uA(t,e,i){var n=t._x1,s=t._y1,a=t._x2,c=t._y2;if(t._l01_a>En){var d=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,f=3*t._l01_a*(t._l01_a+t._l12_a);n=(n*d-t._x0*t._l12_2a+t._x2*t._l01_2a)/f,s=(s*d-t._y0*t._l12_2a+t._y2*t._l01_2a)/f}if(t._l23_a>En){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,o=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*u+t._x1*t._l23_2a-e*t._l12_2a)/o,c=(c*u+t._y1*t._l23_2a-i*t._l12_2a)/o}t._context.bezierCurveTo(n,s,a,c,t._x2,t._y2)}function k7(t,e){this._context=t,this._alpha=e}k7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var i=this._x2-t,n=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(i*i+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:uA(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Nde=function t(e){function i(n){return e?new k7(n,e):new cA(n,0)}return i.alpha=function(n){return t(+n)},i}(.5);function F7(t,e){this._context=t,this._alpha=e}F7.prototype={areaStart:Gc,areaEnd:Gc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var i=this._x2-t,n=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(i*i+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:uA(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Cde=function t(e){function i(n){return e?new F7(n,e):new dA(n,0)}return i.alpha=function(n){return t(+n)},i}(.5);function M7(t,e){this._context=t,this._alpha=e}M7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var i=this._x2-t,n=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(i*i+n*n,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:uA(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Rde=function t(e){function i(n){return e?new M7(n,e):new fA(n,0)}return i.alpha=function(n){return t(+n)},i}(.5);function A7(t){this._context=t}A7.prototype={areaStart:Gc,areaEnd:Gc,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Lde(t){return new A7(t)}function f4(t){return t<0?-1:1}function u4(t,e,i){var n=t._x1-t._x0,s=e-t._x1,a=(t._y1-t._y0)/(n||s<0&&-0),c=(i-t._y1)/(s||n<0&&-0),d=(a*s+c*n)/(n+s);return(f4(a)+f4(c))*Math.min(Math.abs(a),Math.abs(c),.5*Math.abs(d))||0}function h4(t,e){var i=t._x1-t._x0;return i?(3*(t._y1-t._y0)/i-e)/2:e}function oB(t,e,i){var n=t._x0,s=t._y0,a=t._x1,c=t._y1,d=(a-n)/3;t._context.bezierCurveTo(n+d,s+d*e,a-d,c-d*i,a,c)}function A1(t){this._context=t}A1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:oB(this,this._t0,h4(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var i=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,oB(this,h4(this,i=u4(this,t,e)),i);break;default:oB(this,this._t0,i=u4(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=i}}};function O7(t){this._context=new N7(t)}(O7.prototype=Object.create(A1.prototype)).point=function(t,e){A1.prototype.point.call(this,e,t)};function N7(t){this._context=t}N7.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,i,n,s,a){this._context.bezierCurveTo(e,t,n,i,a,s)}};function Dde(t){return new A1(t)}function Pde(t){return new O7(t)}function C7(t){this._context=t}C7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,i=t.length;if(i)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),i===2)this._context.lineTo(t[1],e[1]);else for(var n=p4(t),s=p4(e),a=0,c=1;c<i;++a,++c)this._context.bezierCurveTo(n[0][a],s[0][a],n[1][a],s[1][a],t[c],e[c]);(this._line||this._line!==0&&i===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function p4(t){var e,i=t.length-1,n,s=new Array(i),a=new Array(i),c=new Array(i);for(s[0]=0,a[0]=2,c[0]=t[0]+2*t[1],e=1;e<i-1;++e)s[e]=1,a[e]=4,c[e]=4*t[e]+2*t[e+1];for(s[i-1]=2,a[i-1]=7,c[i-1]=8*t[i-1]+t[i],e=1;e<i;++e)n=s[e]/a[e-1],a[e]-=n,c[e]-=n*c[e-1];for(s[i-1]=c[i-1]/a[i-1],e=i-2;e>=0;--e)s[e]=(c[e]-s[e+1])/a[e];for(a[i-1]=(t[i]+s[i-1])/2,e=0;e<i-1;++e)a[e]=2*t[e+1]-s[e+1];return[s,a]}function $de(t){return new C7(t)}function RE(t,e){this._context=t,this._t=e}RE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var i=this._x*(1-this._t)+t*this._t;this._context.lineTo(i,this._y),this._context.lineTo(i,e)}break}}this._x=t,this._y=e}};function Ude(t){return new RE(t,.5)}function zde(t){return new RE(t,0)}function jde(t){return new RE(t,1)}function Cy(t,e,i){this.k=t,this.x=e,this.y=i}Cy.prototype={constructor:Cy,scale:function(t){return t===1?this:new Cy(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Cy(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Cy.prototype;function*R7(t,e){if(e==null)for(let i of t)i!=null&&i!==""&&(i=+i)>=i&&(yield i);else{let i=-1;for(let n of t)n=e(n,++i,t),n!=null&&n!==""&&(n=+n)>=n&&(yield n)}}function hA(t,e,i){const n=Float64Array.from(R7(t,i));return n.sort(bl),e.map(s=>f5(n,s))}function pA(t,e){return hA(t,[.25,.5,.75],e)}function _A(t,e){const i=t.length,n=mse(t,e),s=pA(t,e),a=(s[2]-s[0])/1.34;return 1.06*(Math.min(n,a)||n||Math.abs(s[0])||1)*Math.pow(i,-.2)}function yA(t){const e=t.maxbins||20,i=t.base||10,n=Math.log(i),s=t.divide||[5,2];let a=t.extent[0],c=t.extent[1],d,f,u,o,g,w;const m=t.span||c-a||Math.abs(a)||1;if(t.step)d=t.step;else if(t.steps){for(o=m/e,g=0,w=t.steps.length;g<w&&t.steps[g]<o;++g);d=t.steps[Math.max(0,g-1)]}else{for(f=Math.ceil(Math.log(e)/n),u=t.minstep||0,d=Math.max(u,Math.pow(i,Math.round(Math.log(m)/n)-f));Math.ceil(m/d)>e;)d*=i;for(g=0,w=s.length;g<w;++g)o=d/s[g],o>=u&&m/o<=e&&(d=o)}o=Math.log(d);const l=o>=0?0:~~(-o/n)+1,T=Math.pow(i,-l-1);return(t.nice||t.nice===void 0)&&(o=Math.floor(a/d+T)*d,a=a<o?o-d:o,c=Math.ceil(c/d)*d),{start:a,stop:c===a?a+d:c,step:d}}var Fr=Math.random;function qde(t){Fr=t}function L7(t,e,i,n){if(!t.length)return[void 0,void 0];const s=Float64Array.from(R7(t,n)),a=s.length,c=e;let d,f,u,o;for(u=0,o=Array(c);u<c;++u){for(d=0,f=0;f<a;++f)d+=s[~~(Fr()*a)];o[u]=d/a}return o.sort(bl),[zI(o,i/2),zI(o,1-i/2)]}function D7(t,e,i,n){n=n||(w=>w);const s=t.length,a=new Float64Array(s);let c=0,d=1,f=n(t[0]),u=f,o=f+e,g;for(;d<s;++d){if(g=n(t[d]),g>=o){for(u=(f+u)/2;c<d;++c)a[c]=u;o=g+e,f=g}u=g}for(u=(f+u)/2;c<d;++c)a[c]=u;return i?Gde(a,e+e/4):a}function Gde(t,e){const i=t.length;let n=0,s=1,a,c;for(;t[n]===t[s];)++s;for(;s<i;){for(a=s+1;t[s]===t[a];)++a;if(t[s]-t[s-1]<e){for(c=s+(n+a-s-s>>1);c<s;)t[c++]=t[s];for(;c>s;)t[c--]=t[n]}n=s,s=a}return t}function Vde(t){return function(){return t=(1103515245*t+12345)%2147483647,t/2147483647}}function Wde(t,e){e==null&&(e=t,t=0);let i,n,s;const a={min(c){return arguments.length?(i=c||0,s=n-i,a):i},max(c){return arguments.length?(n=c||0,s=n-i,a):n},sample(){return i+Math.floor(s*Fr())},pdf(c){return c===Math.floor(c)&&c>=i&&c<n?1/s:0},cdf(c){const d=Math.floor(c);return d<i?0:d>=n?1:(d-i+1)/s},icdf(c){return c>=0&&c<=1?i-1+Math.floor(c*s):NaN}};return a.min(t).max(e)}const P7=Math.sqrt(2*Math.PI),Hde=Math.SQRT2;let Y_=NaN;function LE(t,e){t=t||0,e=e??1;let i=0,n=0,s,a;if(Y_===Y_)i=Y_,Y_=NaN;else{do i=Fr()*2-1,n=Fr()*2-1,s=i*i+n*n;while(s===0||s>1);a=Math.sqrt(-2*Math.log(s)/s),i*=a,Y_=n*a}return t+i*e}function gA(t,e,i){i=i??1;const n=(t-(e||0))/i;return Math.exp(-.5*n*n)/(i*P7)}function DE(t,e,i){e=e||0,i=i??1;const n=(t-e)/i,s=Math.abs(n);let a;if(s>37)a=0;else{const c=Math.exp(-s*s/2);let d;s<7.07106781186547?(d=.0352624965998911*s+.700383064443688,d=d*s+6.37396220353165,d=d*s+33.912866078383,d=d*s+112.079291497871,d=d*s+221.213596169931,d=d*s+220.206867912376,a=c*d,d=.0883883476483184*s+1.75566716318264,d=d*s+16.064177579207,d=d*s+86.7807322029461,d=d*s+296.564248779674,d=d*s+637.333633378831,d=d*s+793.826512519948,d=d*s+440.413735824752,a=a/d):(d=s+.65,d=s+4/d,d=s+3/d,d=s+2/d,d=s+1/d,a=c/d/2.506628274631)}return n>0?1-a:a}function PE(t,e,i){return t<0||t>1?NaN:(e||0)+(i??1)*Hde*Yde(2*t-1)}function Yde(t){let e=-Math.log((1-t)*(1+t)),i;return e<6.25?(e-=3.125,i=-364441206401782e-35,i=-16850591381820166e-35+i*e,i=128584807152564e-32+i*e,i=11157877678025181e-33+i*e,i=-1333171662854621e-31+i*e,i=20972767875968562e-33+i*e,i=6637638134358324e-30+i*e,i=-4054566272975207e-29+i*e,i=-8151934197605472e-29+i*e,i=26335093153082323e-28+i*e,i=-12975133253453532e-27+i*e,i=-5415412054294628e-26+i*e,i=10512122733215323e-25+i*e,i=-4112633980346984e-24+i*e,i=-29070369957882005e-24+i*e,i=42347877827932404e-23+i*e,i=-13654692000834679e-22+i*e,i=-13882523362786469e-21+i*e,i=.00018673420803405714+i*e,i=-.000740702534166267+i*e,i=-.006033670871430149+i*e,i=.24015818242558962+i*e,i=1.6536545626831027+i*e):e<16?(e=Math.sqrt(e)-3.25,i=22137376921775787e-25,i=9075656193888539e-23+i*e,i=-27517406297064545e-23+i*e,i=18239629214389228e-24+i*e,i=15027403968909828e-22+i*e,i=-4013867526981546e-21+i*e,i=29234449089955446e-22+i*e,i=12475304481671779e-21+i*e,i=-47318229009055734e-21+i*e,i=6828485145957318e-20+i*e,i=24031110387097894e-21+i*e,i=-.0003550375203628475+i*e,i=.0009532893797373805+i*e,i=-.0016882755560235047+i*e,i=.002491442096107851+i*e,i=-.003751208507569241+i*e,i=.005370914553590064+i*e,i=1.0052589676941592+i*e,i=3.0838856104922208+i*e):Number.isFinite(e)?(e=Math.sqrt(e)-5,i=-27109920616438573e-27,i=-2555641816996525e-25+i*e,i=15076572693500548e-25+i*e,i=-3789465440126737e-24+i*e,i=761570120807834e-23+i*e,i=-1496002662714924e-23+i*e,i=2914795345090108e-23+i*e,i=-6771199775845234e-23+i*e,i=22900482228026655e-23+i*e,i=-99298272942317e-20+i*e,i=4526062597223154e-21+i*e,i=-1968177810553167e-20+i*e,i=7599527703001776e-20+i*e,i=-.00021503011930044477+i*e,i=-.00013871931833623122+i*e,i=1.0103004648645344+i*e,i=4.849906401408584+i*e):i=1/0,i*t}function mA(t,e){let i,n;const s={mean(a){return arguments.length?(i=a||0,s):i},stdev(a){return arguments.length?(n=a??1,s):n},sample:()=>LE(i,n),pdf:a=>gA(a,i,n),cdf:a=>DE(a,i,n),icdf:a=>PE(a,i,n)};return s.mean(t).stdev(e)}function wA(t,e){const i=mA();let n=0;const s={data(a){return arguments.length?(t=a,n=a?a.length:0,s.bandwidth(e)):t},bandwidth(a){return arguments.length?(e=a,!e&&t&&(e=_A(t)),s):e},sample(){return t[~~(Fr()*n)]+e*i.sample()},pdf(a){let c=0,d=0;for(;d<n;++d)c+=i.pdf((a-t[d])/e);return c/e/n},cdf(a){let c=0,d=0;for(;d<n;++d)c+=i.cdf((a-t[d])/e);return c/n},icdf(){throw Error("KDE icdf not supported.")}};return s.data(t)}function bA(t,e){return t=t||0,e=e??1,Math.exp(t+LE()*e)}function TA(t,e,i){if(t<=0)return 0;e=e||0,i=i??1;const n=(Math.log(t)-e)/i;return Math.exp(-.5*n*n)/(i*P7*t)}function vA(t,e,i){return DE(Math.log(t),e,i)}function EA(t,e,i){return Math.exp(PE(t,e,i))}function $7(t,e){let i,n;const s={mean(a){return arguments.length?(i=a||0,s):i},stdev(a){return arguments.length?(n=a??1,s):n},sample:()=>bA(i,n),pdf:a=>TA(a,i,n),cdf:a=>vA(a,i,n),icdf:a=>EA(a,i,n)};return s.mean(t).stdev(e)}function U7(t,e){let i=0,n;function s(c){const d=[];let f=0,u;for(u=0;u<i;++u)f+=d[u]=c[u]==null?1:+c[u];for(u=0;u<i;++u)d[u]/=f;return d}const a={weights(c){return arguments.length?(n=s(e=c||[]),a):e},distributions(c){return arguments.length?(c?(i=c.length,t=c):(i=0,t=[]),a.weights(e)):t},sample(){const c=Fr();let d=t[i-1],f=n[0],u=0;for(;u<i-1;f+=n[++u])if(c<f){d=t[u];break}return d.sample()},pdf(c){let d=0,f=0;for(;f<i;++f)d+=n[f]*t[f].pdf(c);return d},cdf(c){let d=0,f=0;for(;f<i;++f)d+=n[f]*t[f].cdf(c);return d},icdf(){throw Error("Mixture icdf not supported.")}};return a.distributions(t).weights(e)}function SA(t,e){return e==null&&(e=t??1,t=0),t+(e-t)*Fr()}function xA(t,e,i){return i==null&&(i=e??1,e=0),t>=e&&t<=i?1/(i-e):0}function BA(t,e,i){return i==null&&(i=e??1,e=0),t<e?0:t>i?1:(t-e)/(i-e)}function IA(t,e,i){return i==null&&(i=e??1,e=0),t>=0&&t<=1?e+t*(i-e):NaN}function z7(t,e){let i,n;const s={min(a){return arguments.length?(i=a||0,s):i},max(a){return arguments.length?(n=a??1,s):n},sample:()=>SA(i,n),pdf:a=>xA(a,i,n),cdf:a=>BA(a,i,n),icdf:a=>IA(a,i,n)};return e==null&&(e=t??1,t=0),s.min(t).max(e)}function kA(t,e,i){let n=0,s=0;for(const a of t){const c=i(a);e(a)==null||c==null||isNaN(c)||(n+=(c-n)/++s)}return{coef:[n],predict:()=>n,rSquared:0}}function Rm(t,e,i,n){const s=n-t*t,a=Math.abs(s)<1e-24?0:(i-t*e)/s;return[e-a*t,a]}function $E(t,e,i,n){t=t.filter(m=>{let l=e(m),T=i(m);return l!=null&&(l=+l)>=l&&T!=null&&(T=+T)>=T}),n&&t.sort((m,l)=>e(m)-e(l));const s=t.length,a=new Float64Array(s),c=new Float64Array(s);let d=0,f=0,u=0,o,g,w;for(w of t)a[d]=o=+e(w),c[d]=g=+i(w),++d,f+=(o-f)/d,u+=(g-u)/d;for(d=0;d<s;++d)a[d]-=f,c[d]-=u;return[a,c,f,u]}function Lm(t,e,i,n){let s=-1,a,c;for(const d of t)a=e(d),c=i(d),a!=null&&(a=+a)>=a&&c!=null&&(c=+c)>=c&&n(a,c,++s)}function g_(t,e,i,n,s){let a=0,c=0;return Lm(t,e,i,(d,f)=>{const u=f-s(d),o=f-n;a+=u*u,c+=o*o}),1-a/c}function FA(t,e,i){let n=0,s=0,a=0,c=0,d=0;Lm(t,e,i,(o,g)=>{++d,n+=(o-n)/d,s+=(g-s)/d,a+=(o*g-a)/d,c+=(o*o-c)/d});const f=Rm(n,s,a,c),u=o=>f[0]+f[1]*o;return{coef:f,predict:u,rSquared:g_(t,e,i,s,u)}}function j7(t,e,i){let n=0,s=0,a=0,c=0,d=0;Lm(t,e,i,(o,g)=>{++d,o=Math.log(o),n+=(o-n)/d,s+=(g-s)/d,a+=(o*g-a)/d,c+=(o*o-c)/d});const f=Rm(n,s,a,c),u=o=>f[0]+f[1]*Math.log(o);return{coef:f,predict:u,rSquared:g_(t,e,i,s,u)}}function q7(t,e,i){const[n,s,a,c]=$E(t,e,i);let d=0,f=0,u=0,o=0,g=0,w,m,l;Lm(t,e,i,(x,B)=>{w=n[g++],m=Math.log(B),l=w*B,d+=(B*m-d)/g,f+=(l-f)/g,u+=(l*m-u)/g,o+=(w*l-o)/g});const[T,b]=Rm(f/c,d/c,u/c,o/c),S=x=>Math.exp(T+b*(x-a));return{coef:[Math.exp(T-b*a),b],predict:S,rSquared:g_(t,e,i,c,S)}}function G7(t,e,i){let n=0,s=0,a=0,c=0,d=0,f=0;Lm(t,e,i,(g,w)=>{const m=Math.log(g),l=Math.log(w);++f,n+=(m-n)/f,s+=(l-s)/f,a+=(m*l-a)/f,c+=(m*m-c)/f,d+=(w-d)/f});const u=Rm(n,s,a,c),o=g=>u[0]*Math.pow(g,u[1]);return u[0]=Math.exp(u[0]),{coef:u,predict:o,rSquared:g_(t,e,i,d,o)}}function MA(t,e,i){const[n,s,a,c]=$E(t,e,i),d=n.length;let f=0,u=0,o=0,g=0,w=0,m,l,T,b;for(m=0;m<d;)l=n[m],T=s[m++],b=l*l,f+=(b-f)/m,u+=(b*l-u)/m,o+=(b*b-o)/m,g+=(l*T-g)/m,w+=(b*T-w)/m;const S=o-f*f,x=f*S-u*u,B=(w*f-g*u)/x,F=(g*S-w*u)/x,I=-B*f,A=O=>(O=O-a,B*O*O+F*O+I+c);return{coef:[I-F*a+B*a*a+c,F-2*B*a,B],predict:A,rSquared:g_(t,e,i,c,A)}}function V7(t,e,i,n){if(n===0)return kA(t,e,i);if(n===1)return FA(t,e,i);if(n===2)return MA(t,e,i);const[s,a,c,d]=$E(t,e,i),f=s.length,u=[],o=[],g=n+1;let w,m,l,T,b;for(w=0;w<g;++w){for(l=0,T=0;l<f;++l)T+=Math.pow(s[l],w)*a[l];for(u.push(T),b=new Float64Array(g),m=0;m<g;++m){for(l=0,T=0;l<f;++l)T+=Math.pow(s[l],w+m);b[m]=T}o.push(b)}o.push(u);const S=Kde(o),x=B=>{B-=c;let F=d+S[0]+S[1]*B+S[2]*B*B;for(w=3;w<g;++w)F+=S[w]*Math.pow(B,w);return F};return{coef:Xde(g,S,-c,d),predict:x,rSquared:g_(t,e,i,d,x)}}function Xde(t,e,i,n){const s=Array(t);let a,c,d,f;for(a=0;a<t;++a)s[a]=0;for(a=t-1;a>=0;--a)for(d=e[a],f=1,s[a]+=d,c=1;c<=a;++c)f*=(a+1-c)/c,s[a-c]+=d*Math.pow(i,c)*f;return s[0]+=n,s}function Kde(t){const e=t.length-1,i=[];let n,s,a,c,d;for(n=0;n<e;++n){for(c=n,s=n+1;s<e;++s)Math.abs(t[n][s])>Math.abs(t[n][c])&&(c=s);for(a=n;a<e+1;++a)d=t[a][n],t[a][n]=t[a][c],t[a][c]=d;for(s=n+1;s<e;++s)for(a=e;a>=n;a--)t[a][s]-=t[a][n]*t[n][s]/t[n][n]}for(s=e-1;s>=0;--s){for(d=0,a=s+1;a<e;++a)d+=t[a][s]*i[a];i[s]=(t[e][s]-d)/t[s][s]}return i}const _4=2,y4=1e-12;function W7(t,e,i,n){const[s,a,c,d]=$E(t,e,i,!0),f=s.length,u=Math.max(2,~~(n*f)),o=new Float64Array(f),g=new Float64Array(f),w=new Float64Array(f).fill(1);for(let m=-1;++m<=_4;){const l=[0,u-1];for(let b=0;b<f;++b){const S=s[b],x=l[0],B=l[1],F=S-s[x]>s[B]-S?x:B;let I=0,A=0,O=0,R=0,D=0;const P=1/Math.abs(s[F]-S||1);for(let z=x;z<=B;++z){const W=s[z],V=a[z],H=Jde(Math.abs(S-W)*P)*w[z],J=W*H;I+=H,A+=J,O+=V*H,R+=V*J,D+=W*J}const[U,Y]=Rm(A/I,O/I,R/I,D/I);o[b]=U+Y*S,g[b]=Math.abs(a[b]-o[b]),Qde(s,b+1,l)}if(m===_4)break;const T=u5(g);if(Math.abs(T)<y4)break;for(let b=0,S,x;b<f;++b)S=g[b]/(6*T),w[b]=S>=1?y4:(x=1-S*S)*x}return Zde(s,o,c,d)}function Jde(t){return(t=1-t*t*t)*t*t}function Qde(t,e,i){const n=t[e];let s=i[0],a=i[1]+1;if(!(a>=t.length))for(;e>s&&t[a]-n<=n-t[s];)i[0]=++s,i[1]=a,++a}function Zde(t,e,i,n){const s=t.length,a=[];let c=0,d=0,f=[],u;for(;c<s;++c)u=t[c]+i,f[0]===u?f[1]+=(e[c]-f[1])/++d:(d=0,f[1]+=n,f=[u,e[c]],a.push(f));return f[1]+=n,a}const efe=.5*Math.PI/180;function UE(t,e,i,n){i=i||25,n=Math.max(i,n||200);const s=T=>[T,t(T)],a=e[0],c=e[1],d=c-a,f=d/n,u=[s(a)],o=[];if(i===n){for(let T=1;T<n;++T)u.push(s(a+T/i*d));return u.push(s(c)),u}else{o.push(s(c));for(let T=i;--T>0;)o.push(s(a+T/i*d))}let g=u[0],w=o[o.length-1];const m=1/d,l=tfe(g[1],o);for(;w;){const T=s((g[0]+w[0])/2);T[0]-g[0]>=f&&ife(g,T,w,m,l)>efe?o.push(T):(g=w,u.push(w),o.pop()),w=o[o.length-1]}return u}function tfe(t,e){let i=t,n=t;const s=e.length;for(let a=0;a<s;++a){const c=e[a][1];c<i&&(i=c),c>n&&(n=c)}return 1/(n-i)}function ife(t,e,i,n,s){const a=Math.atan2(s*(i[1]-t[1]),n*(i[0]-t[0])),c=Math.atan2(s*(e[1]-t[1]),n*(e[0]-t[0]));return Math.abs(a-c)}function s0(t){return t.length}function Nh(t){const e=new Map(t.map((i,n)=>[i,n]));return i=>e.get(i)}function ng({start:t,step:e,stop:i}){return(i-t)/e}function nfe(t,e){return yA({maxbins:t,extent:e})}function sfe(t,e){const n=u7().domain(e).ticks(t),s=n[0].getTime(),a=n[n.length-1].getTime(),c=(a-s)/n.length;return{start:s,stop:a,step:c}}function rfe(t,e){return(t.time?sfe:nfe)(t.bins,e)}function afe(t){let e=[],i=t.start,n=i+t.step;for(;n<=t.stop;)e.push({binStart:i,binEnd:n}),i=n,n+=t.step;return e}function ofe(t,e){const i=lfe(t,e);return n=>[i(n[0]),i(n[1])]}function lfe(t,e,i=Math.floor){const n=[1,e],s=t,a=KM().domain(s).range(n);return a.clamp(!0),c=>{const d=a(c);return i(d)}}function g4(t,...e){return new Map(Array.from(t.entries()).filter(([i,n])=>!e.includes(i)))}function cfe(t,{start:e,step:i,stop:n},s=a=>`${a}`){const a=ng({start:e,step:i,stop:n}),c=`FLOOR((${t} - ${s(e)}) / ${s(i)})::INT`;return`LEAST(${s(a-1)}, ${c})::INT`}function dfe({start:t,stop:e},i){return(e-t)/i}function ffe(t){return t.replace(/\s+/g," ").trim()}class ufe{constructor(){this.views=[]}remove(e){const i=this.views.findIndex(n=>n==e);i!==-1&&this.views.splice(i,1)}add(e){this.views.findIndex(n=>n==e)===-1&&this.views.push(e)}get passive(){return this.views.filter(e=>!e.isActive)}get active(){const e=this.views.find(i=>i.isActive);if(e)return e}get size(){return this.views.length}forEach(e){this.views.forEach(e)}[Symbol.iterator](){return this.views[Symbol.iterator]()}}class H7{constructor(e){this.isActive=!1,this.linkTogetherWithOtherViews(e),this.onChangeListeners=new Set}linkTogetherWithOtherViews(e){this.falcon=e}onChange(e){return this.onChangeListeners.add(e),()=>this.onChangeListeners.delete(e)}addOnChangeListener(e){return this.onChange(e)}signalOnChange(e){this.onChangeListeners.forEach(i=>{i(e)})}markThisViewActive(){this.falcon.views.forEach(e=>{e.isActive=!1}),this.isActive=!0}}class uc extends H7{constructor(e){super(e),this.state={total:null,filter:null}}async all(){const e=await this.falcon.db.length(this.falcon.filters.size>0?this.falcon.filters:void 0);return this.state.total=e,this.state.filter=e,this.signalOnChange(this.state),this}async countFromActiveContinuous1D(e){const i=await this.falcon.index.get(this);if(i===void 0)throw Error("Cannot count for undefined index in 0D");if(!e)this.state.filter=i.noFilter.get(0);else{const n=i.filter.get(e[0]),s=i.filter.get(e[1]);this.state.filter=s-n}this.signalOnChange(this.state)}async countFromActiveCategorical1D(e,i){const n=await this.falcon.index.get(this);if(n===void 0)throw Error("Cannot count for undefined index in 0D");if(e===void 0)this.state.filter=n.noFilter.get(0);else{const s=Nh(i);let a=0;for(const c of e){const d=s(c);d!==void 0&&(a+=n.filter.get(d))}this.state.filter=a}this.signalOnChange(this.state)}async attach(){this.falcon.views.add(this),await this.falcon.link()}async detach(){this.falcon.views.remove(this),this.falcon.index.delete(this)}}class qa extends H7{constructor(e,i){super(e),this.dimension=i,this.state={total:null,filter:null,bin:null},this.toPixels=()=>[0,0]}async update(e){this.dimension=e,await this.falcon.link()}async createBins(){var e;if(((e=this.dimension)==null?void 0:e.range)===void 0&&(this.dimension.range=await this.falcon.db.range(this.dimension)),this.dimension.type==="continuous"){this.dimension.bins=this.dimension.bins??await this.falcon.db.estimateNumBins(this.dimension,200,15),this.dimension.binConfig=rfe(this.dimension,this.dimension.range);const{start:i,stop:n}=this.dimension.binConfig;this.toPixels=ofe([i,n],this.dimension.resolution)}this.dimension.type==="continuous"?this.state.bin=afe(this.dimension.binConfig):this.state.bin=this.dimension.range}async all(){await this.createBins();const e=await this.falcon.db.histogramView1D(this,this.falcon.filters.size>0?this.falcon.otherFilters(this):void 0);return this.state.total=e.noFilter.data,this.state.filter=e.filter.data,this.signalOnChange(this.state),this}async computeIndex(e=!1){(!this.isActive||e)&&(await this.falcon.views.forEach(async i=>{i instanceof qa&&(!("range"in i.dimension)||i.dimension.type==="continuous"&&!("binConfig"in i.dimension))&&await i.all()}),this.markThisViewActive(),this.falcon.index=this.falcon.db.falconIndexView1D(this,this.falcon.views.passive,this.falcon.passiveFilters))}async activate(){await this.computeIndex()}async select(e,i=!1){if(e)if(this.dimension.type==="continuous"){if(this.lastFilter&&this.lastFilter[0]===e[0]&&this.lastFilter[1]===e[1]&&i===!1)return;this.falcon.filters.set(this.dimension,e);let s=this.toPixels(e);this.isActive&&this.falcon.views.passive.forEach(async a=>{await a.countFromActiveContinuous1D(s)}),this.lastFilter=e}else this.falcon.filters.set(this.dimension,e),this.isActive&&this.falcon.views.passive.forEach(async n=>{await n.countFromActiveCategorical1D(e,this.dimension.range)}),this.lastFilter=e;else if(this.isActive)if(this.dimension.type==="continuous"){if(this.lastFilter===e)return;this.falcon.filters.delete(this.dimension),this.falcon.views.passive.forEach(async s=>{await s.countFromActiveContinuous1D()}),this.lastFilter=e}else this.falcon.filters.delete(this.dimension),this.falcon.views.passive.forEach(async n=>{await n.countFromActiveCategorical1D()}),this.lastFilter=e}async countFromActiveContinuous1D(e){const i=await this.falcon.index.get(this);if(i===void 0)throw Error("Index not defined for 1D passive view");if(!e)this.state.filter=i.noFilter.data;else{const n=i.filter.slice(e[0],null),a=i.filter.slice(e[1],null).sub(n);this.state.filter=a.data}this.signalOnChange(this.state)}async countFromActiveCategorical1D(e,i){const n=await this.falcon.index.get(this);if(n===void 0)throw Error("Index not defined for 1D passive view");if(!e)this.state.filter=n.noFilter.data;else{let s;this.dimension.type==="continuous"?s=js.allocCounts(ng(this.dimension.binConfig)):s=js.allocCounts(this.dimension.range.length),s.data.fill(0);const a=Nh(i);for(const c of e){const d=a(c);if(d!==void 0){const f=n.filter.slice(d,null);s.addToItself(f)}}this.state.filter=s.data}this.signalOnChange(this.state)}async attach(){this.falcon.views.add(this),await this.falcon.link()}async detach(){this.falcon.views.remove(this),this.falcon.index.delete(this),this.isActive&&await this.falcon.link()}}class hfe{constructor(e,i){this.table=e,this.nameMap=i}castBins(e){return`${e}`}castTime(e){return`epoch(${e})*1000`}getName(e){var n;let i=((n=this.nameMap)==null?void 0:n.get(e.name))??e.name;return e.type==="continuous"&&e.time&&(i=this.castTime(i)),i}async dimensionExists(e){const i=await this.query(`SELECT EXISTS 
      (SELECT 0 FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = '${this.table}' AND COLUMN_NAME = '${e.name}') as _exists`),{_exists:n}=this.getASValues(i);return n}async tableExists(){const e=await this.query(`SELECT EXISTS 
      (SELECT 0 FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = '${this.table}') as _exists`),{_exists:i}=this.getASValues(e);return i}async entries(e=0,i=1/0,n){const s=n?[...this.filtersToSQLWhereClauses(n).values()].join(" AND "):void 0;return await this.query(`SELECT *
              FROM ${this.table}
              ${s?`WHERE ${s}`:""}
              ${i>=0&&i<1/0?`LIMIT ${i}`:""}
              OFFSET ${e}`)}async estimateNumBins(e,i=200,n=15){if(await this.length()<=1)return 1;if(e.range){const a=await this.query(`SELECT STDDEV(${this.getName(e)}) AS standardDeviation FROM ${this.table}`),{standardDeviation:c}=this.getASValues(a),[d,f]=e.range,u=kne(d,f,c);return Math.min(u,i)}return n}async length(e){let i="";e&&(i=[...this.filtersToSQLWhereClauses(e).values()].join(" AND "));const n=await this.query(`SELECT count(*) AS _count
       FROM ${this.table}
       ${i?`WHERE ${i}`:""}`),{_count:s}=this.getASValues(n);return s}async range(e){const i=this.getName(e);if(e.type==="continuous"){const n=await this.query(`SELECT  MIN(${i}) AS _min, MAX(${i}) AS _max
        FROM ${this.table}`),{_min:s,_max:a}=this.getASValues(n);return[Number(s),Number(a)]}else{const n=await this.query(`SELECT DISTINCT "${i}" AS _unique FROM ${this.table}`);let s=[];for(const{_unique:a}of n)s.push(a);return s.filter(a=>a!==null)}}async histogramView1D(e,i){let n,s,a;e.dimension.type==="continuous"?(n=ng(e.dimension.binConfig),s=this.binSQL(e.dimension,e.dimension.binConfig),a=o=>o):(n=s0(e.dimension.range),s=this.binSQLCategorical(e.dimension,e.dimension.range),a=Nh(e.dimension.range));const c=js.allocCounts(n),d=i&&i.size>0,f=d?js.allocCounts(n):c,u=await this.query(`SELECT ${s.select}
       AS binIndex, count(*) AS binCount
       FROM ${this.table} 
       WHERE ${s.where} 
       GROUP BY binIndex`);for(const{binIndex:o,binCount:g}of u)c.set(a(o),g);if(d){const o=[...this.filtersToSQLWhereClauses(i).values()].join(" AND "),g=`SELECT ${s.select}
         AS binIndex, count(*) AS binCount
         FROM ${this.table}
         WHERE ${s.where} AND ${o} 
         GROUP BY binIndex`,w=await this.query(g);for(const{binIndex:m,binCount:l}of w)f.set(m,l)}return{filter:f,noFilter:c}}falconIndexView1D(e,i,n){const s=performance.now(),a=this.filtersToSQLWhereClauses(n),c=new Map;if(e.dimension.type==="continuous"){const d=e.dimension.resolution,f=this.binSQLPixel(e.dimension,e.dimension.binConfig,d),u=d+1,o=[];i.forEach(g=>{const w=this.cubeSlice1DContinuous(g,a,f,u);o.push(w),c.set(g,w)}),Promise.all(o).then(()=>{console.info(`Build index: ${performance.now()-s}ms`)})}else{const d=this.binSQLCategorical(e.dimension,e.dimension.range),f=s0(e.dimension.range),u=Nh(e.dimension.range),o=[];i.forEach(g=>{const w=this.cubeSlice1DCategorical(g,a,d,u,f);o.push(w),c.set(g,w)}),Promise.all(o).then(()=>{console.info(`Build index: ${performance.now()-s}ms`)})}return c}async cubeSlice1DCategorical(e,i,n,s,a){let c,d;const f=new Map(i);e instanceof uc||e instanceof qa&&f.delete(e.dimension);const u=[...f.values()].join(" AND ");let o="",g=l=>l;const w=`CASE WHEN ${n.where} 
     THEN ${n.select}
     ELSE -1 END AS "keyActive",
     count(*) AS cnt`;if(e instanceof uc)d=js.allocCounts(a),c=js.allocCounts(1,[1]),o=`SELECT ${w}
         FROM ${this.table} 
         ${u?`WHERE ${u}`:""} 
         GROUP BY "keyActive"`;else if(e instanceof qa){let l,T;if(e.dimension.type==="continuous"){const b=e.dimension.binConfig;T=ng(b),l=this.binSQL(e.dimension,e.dimension.binConfig)}else g=Nh(e.dimension.range),T=s0(e.dimension.range),l=this.binSQLCategorical(e.dimension,e.dimension.range);d=js.allocCounts(a*T,[a,T]),c=js.allocCounts(T,[T]),o=`SELECT ${w}, 
       ${l.select} AS key 
       FROM ${this.table} 
       WHERE ${l.where} ${u?`AND ${u}`:""} 
       GROUP BY "keyActive", key`}else throw Error("no 2d view here");const m=await this.query(o);if(e instanceof uc)for(const{keyActive:l,cnt:T}of m){const b=s(l);b>=0&&d.set(b,T),c.increment([0],T)}else if(e instanceof qa)for(const{keyActive:l,key:T,cnt:b}of m){const S=s(l),x=g(T);S>=0&&d.set(S,x,b),c.increment([x],b)}else throw Error();return{noFilter:c,filter:d}}async cubeSlice1DContinuous(e,i,n,s){let a,c;const d=new Map(i);e instanceof uc||e instanceof qa&&d.delete(e.dimension);const f=[...d.values()].join(" AND ");let u,o=m=>m;const g=`CASE
     WHEN ${n.where} 
     THEN ${n.select}
     ELSE -1 END AS "keyActive",
     count(*) AS cnt`;if(e instanceof uc)c=js.allocCumulative(s),a=js.allocCounts(1,[1]),u=`SELECT ${g}
         FROM ${this.table} 
         ${f?`WHERE ${f}`:""} 
         GROUP BY "keyActive"`;else if(e instanceof qa){let m,l;if(e.dimension.type==="continuous"){const T=e.dimension.binConfig;m=this.binSQL(e.dimension,T),l=ng(T)}else m=this.binSQLCategorical(e.dimension,e.dimension.range),l=s0(e.dimension.range),o=Nh(e.dimension.range);c=js.allocCumulative(s*l,[s,l]),a=js.allocCounts(l,[l]),u=`SELECT ${g}, 
       ${m.select} AS key 
       FROM ${this.table} 
       WHERE ${m.where} ${f?`AND ${f}`:""} 
       GROUP BY "keyActive", key`}else throw Error("only 0D and 1D views");const w=await this.query(u);if(e instanceof uc){for(const{keyActive:m,cnt:l}of w)m>=0&&c.set(m+1,l),a.increment([0],l);c.cumulativeSum()}else if(e instanceof qa){for(const{keyActive:m,key:l,cnt:T}of w){const b=o(l);m>=0&&c.set(m+1,b,T),a.increment([b],T)}for(let m=0;m<c.shape[1];m++)c.slice(null,m).cumulativeSum()}else throw Error("only 0D and 1D views");return{filter:c,noFilter:a}}getASValues(e){return e[Symbol.iterator]().next().value}binSQLCategorical(e,i){const n=this.getName(e),s=`"${n}"`,a=m4(n,i);return{select:s,where:a}}binSQL(e,i){const n=this.getName(e),s=cfe(n,i,this.castBins),a=`${n} BETWEEN ${i.start} AND ${i.stop}`;return{select:s,where:a}}filtersToSQLWhereClauses(e){const i=new Map;for(const[n,s]of e){const a=this.getName(n);let c;n.type==="continuous"?c=`${a} BETWEEN ${s[0]} AND ${s[1]}`:c=m4(a,s),i.set(n,c)}return i}binSQLPixel(e,i,n){const s=n!==void 0?dfe(i,n):i.step,a=i.start;return this.binSQL(e,{...i,start:a,step:s})}}function m4(t,e){let i=`"${t}" in (`;return e.forEach(s=>{s!==null&&(i+=`'${s}', `)}),i+=")",e.findIndex(s=>s===null)!==-1&&(i+=` OR "${t}" IS NULL`),i}const pfe=new TextDecoder("utf-8"),bk=t=>pfe.decode(t),_fe=new TextEncoder,AA=t=>_fe.encode(t),[c6e,yfe]=(()=>{const t=()=>{throw new Error("BigInt is not available in this environment")};function e(){throw t()}return e.asIntN=()=>{throw t()},e.asUintN=()=>{throw t()},typeof BigInt<"u"?[BigInt,!0]:[e,!1]})(),[Dm,d6e]=(()=>{const t=()=>{throw new Error("BigInt64Array is not available in this environment")};class e{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}}return typeof BigInt64Array<"u"?[BigInt64Array,!0]:[e,!1]})(),[Pm,f6e]=(()=>{const t=()=>{throw new Error("BigUint64Array is not available in this environment")};class e{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}}return typeof BigUint64Array<"u"?[BigUint64Array,!0]:[e,!1]})(),gfe=t=>typeof t=="number",Y7=t=>typeof t=="boolean",zi=t=>typeof t=="function",Is=t=>t!=null&&Object(t)===t,Kf=t=>Is(t)&&zi(t.then),$m=t=>Is(t)&&zi(t[Symbol.iterator]),m_=t=>Is(t)&&zi(t[Symbol.asyncIterator]),Tk=t=>Is(t)&&Is(t.schema),X7=t=>Is(t)&&"done"in t&&"value"in t,K7=t=>Is(t)&&zi(t.stat)&&gfe(t.fd),J7=t=>Is(t)&&OA(t.body),zE=t=>"_getDOMStream"in t&&"_getNodeStream"in t,mfe=t=>Is(t)&&zi(t.abort)&&zi(t.getWriter)&&!zE(t),OA=t=>Is(t)&&zi(t.cancel)&&zi(t.getReader)&&!zE(t),wfe=t=>Is(t)&&zi(t.end)&&zi(t.write)&&Y7(t.writable)&&!zE(t),Q7=t=>Is(t)&&zi(t.read)&&zi(t.pipe)&&Y7(t.readable)&&!zE(t),bfe=t=>Is(t)&&zi(t.clear)&&zi(t.bytes)&&zi(t.position)&&zi(t.setPosition)&&zi(t.capacity)&&zi(t.getBufferIdentifier)&&zi(t.createLong),NA=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function Tfe(t){const e=t[0]?[t[0]]:[];let i,n,s,a;for(let c,d,f=0,u=0,o=t.length;++f<o;){if(c=e[u],d=t[f],!c||!d||c.buffer!==d.buffer||d.byteOffset<c.byteOffset){d&&(e[++u]=d);continue}if({byteOffset:i,byteLength:s}=c,{byteOffset:n,byteLength:a}=d,i+s<n||n+a<i){d&&(e[++u]=d);continue}e[u]=new Uint8Array(c.buffer,i,n-i+a)}return e}function w4(t,e,i=0,n=e.byteLength){const s=t.byteLength,a=new Uint8Array(t.buffer,t.byteOffset,s),c=new Uint8Array(e.buffer,e.byteOffset,Math.min(n,s));return a.set(c,i),t}function vo(t,e){const i=Tfe(t),n=i.reduce((o,g)=>o+g.byteLength,0);let s,a,c,d=0,f=-1;const u=Math.min(e||Number.POSITIVE_INFINITY,n);for(const o=i.length;++f<o;){if(s=i[f],a=s.subarray(0,Math.min(s.length,u-d)),u<=d+a.length){a.length<s.length?i[f]=s.subarray(a.length):a.length===s.length&&f++,c?w4(c,a,d):c=a;break}w4(c||(c=new Uint8Array(u)),a,d),d+=a.length}return[c||new Uint8Array(0),i.slice(f),n-(c?c.byteLength:0)]}function ai(t,e){let i=X7(e)?e.value:e;return i instanceof t?t===Uint8Array?new t(i.buffer,i.byteOffset,i.byteLength):i:i?(typeof i=="string"&&(i=AA(i)),i instanceof ArrayBuffer?new t(i):i instanceof NA?new t(i):bfe(i)?ai(t,i.bytes()):ArrayBuffer.isView(i)?i.byteLength<=0?new t(0):new t(i.buffer,i.byteOffset,i.byteLength/t.BYTES_PER_ELEMENT):t.from(i)):new t(0)}const X_=t=>ai(Int32Array,t),jt=t=>ai(Uint8Array,t),vk=t=>(t.next(),t);function*vfe(t,e){const i=function*(s){yield s},n=typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof NA?i(e):$m(e)?e:i(e);return yield*vk(function*(s){let a=null;do a=s.next(yield ai(t,a));while(!a.done)}(n[Symbol.iterator]())),new t}const Efe=t=>vfe(Uint8Array,t);function Z7(t,e){return Ri(this,arguments,function*(){if(Kf(e))return yield Be(yield Be(yield*Mc(Qn(Z7(t,yield Be(e))))));const n=function(c){return Ri(this,arguments,function*(){yield yield Be(yield Be(c))})},s=function(c){return Ri(this,arguments,function*(){yield Be(yield*Mc(Qn(vk(function*(d){let f=null;do f=d.next(yield f==null?void 0:f.value);while(!f.done)}(c[Symbol.iterator]())))))})},a=typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof NA?n(e):$m(e)?s(e):m_(e)?e:n(e);return yield Be(yield*Mc(Qn(vk(function(c){return Ri(this,arguments,function*(){let d=null;do d=yield Be(c.next(yield yield Be(ai(t,d))));while(!d.done)})}(a[Symbol.asyncIterator]()))))),yield Be(new t)})}const Sfe=t=>Z7(Uint8Array,t);function CA(t,e,i){if(t!==0){i=i.slice(0,e+1);for(let n=-1;++n<=e;)i[n]+=t}return i}function xfe(t,e){let i=0;const n=t.length;if(n!==e.length)return!1;if(n>0)do if(t[i]!==e[i])return!1;while(++i<n);return!0}const pr={fromIterable(t){return r0(Bfe(t))},fromAsyncIterable(t){return r0(Ife(t))},fromDOMStream(t){return r0(kfe(t))},fromNodeStream(t){return r0(Mfe(t))},toDOMStream(t,e){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(t,e){throw new Error('"toNodeStream" not available in this environment')}},r0=t=>(t.next(),t);function*Bfe(t){let e,i=!1,n=[],s,a,c,d=0;function f(){return a==="peek"?vo(n,c)[0]:([s,n,d]=vo(n,c),s)}({cmd:a,size:c}=yield null);const u=Efe(t)[Symbol.iterator]();try{do if({done:e,value:s}=Number.isNaN(c-d)?u.next():u.next(c-d),!e&&s.byteLength>0&&(n.push(s),d+=s.byteLength),e||c<=d)do({cmd:a,size:c}=yield f());while(c<d);while(!e)}catch(o){(i=!0)&&typeof u.throw=="function"&&u.throw(o)}finally{i===!1&&typeof u.return=="function"&&u.return(null)}return null}function Ife(t){return Ri(this,arguments,function*(){let i,n=!1,s=[],a,c,d,f=0;function u(){return c==="peek"?vo(s,d)[0]:([a,s,f]=vo(s,d),a)}({cmd:c,size:d}=yield yield Be(null));const o=Sfe(t)[Symbol.asyncIterator]();try{do if({done:i,value:a}=Number.isNaN(d-f)?yield Be(o.next()):yield Be(o.next(d-f)),!i&&a.byteLength>0&&(s.push(a),f+=a.byteLength),i||d<=f)do({cmd:c,size:d}=yield yield Be(u()));while(d<f);while(!i)}catch(g){(n=!0)&&typeof o.throw=="function"&&(yield Be(o.throw(g)))}finally{n===!1&&typeof o.return=="function"&&(yield Be(o.return(new Uint8Array(0))))}return yield Be(null)})}function kfe(t){return Ri(this,arguments,function*(){let i=!1,n=!1,s=[],a,c,d,f=0;function u(){return c==="peek"?vo(s,d)[0]:([a,s,f]=vo(s,d),a)}({cmd:c,size:d}=yield yield Be(null));const o=new Ffe(t);try{do if({done:i,value:a}=Number.isNaN(d-f)?yield Be(o.read()):yield Be(o.read(d-f)),!i&&a.byteLength>0&&(s.push(jt(a)),f+=a.byteLength),i||d<=f)do({cmd:c,size:d}=yield yield Be(u()));while(d<f);while(!i)}catch(g){(n=!0)&&(yield Be(o.cancel(g)))}finally{n===!1?yield Be(o.cancel()):t.locked&&o.releaseLock()}return yield Be(null)})}class Ffe{constructor(e){this.source=e,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(e){return ye(this,void 0,void 0,function*(){const{reader:i,source:n}=this;i&&(yield i.cancel(e).catch(()=>{})),n&&n.locked&&this.releaseLock()})}read(e){return ye(this,void 0,void 0,function*(){if(e===0)return{done:this.reader==null,value:new Uint8Array(0)};const i=yield this.reader.read();return!i.done&&(i.value=jt(i)),i})}}const lB=(t,e)=>{const i=s=>n([e,s]);let n;return[e,i,new Promise(s=>(n=s)&&t.once(e,i))]};function Mfe(t){return Ri(this,arguments,function*(){const i=[];let n="error",s=!1,a=null,c,d,f=0,u=[],o;function g(){return c==="peek"?vo(u,d)[0]:([o,u,f]=vo(u,d),o)}if({cmd:c,size:d}=yield yield Be(null),t.isTTY)return yield yield Be(new Uint8Array(0)),yield Be(null);try{i[0]=lB(t,"end"),i[1]=lB(t,"error");do{if(i[2]=lB(t,"readable"),[n,a]=yield Be(Promise.race(i.map(m=>m[2]))),n==="error")break;if((s=n==="end")||(Number.isFinite(d-f)?(o=jt(t.read(d-f)),o.byteLength<d-f&&(o=jt(t.read()))):o=jt(t.read()),o.byteLength>0&&(u.push(o),f+=o.byteLength)),s||d<=f)do({cmd:c,size:d}=yield yield Be(g()));while(d<f)}while(!s)}finally{yield Be(w(i,n==="error"?a:null))}return yield Be(null);function w(m,l){return o=u=null,new Promise((T,b)=>{for(const[S,x]of m)t.off(S,x);try{const S=t.destroy;S&&S.call(t,l),l=void 0}catch(S){l=S||l}finally{l!=null?b(l):T()}})}})}var Xs;(function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"})(Xs||(Xs={}));var tr;(function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"})(tr||(tr={}));var ms;(function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"})(ms||(ms={}));var Cl;(function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"})(Cl||(Cl={}));var qt;(function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"})(qt||(qt={}));var Vc;(function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Vc||(Vc={}));var Ht;(function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"})(Ht||(Ht={}));var Q;(function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth"})(Q||(Q={}));var il;(function(t){t[t.OFFSET=0]="OFFSET",t[t.DATA=1]="DATA",t[t.VALIDITY=2]="VALIDITY",t[t.TYPE=3]="TYPE"})(il||(il={}));const Afe=void 0;function Lg(t){if(t===null)return"null";if(t===Afe)return"undefined";switch(typeof t){case"number":return`${t}`;case"bigint":return`${t}`;case"string":return`"${t}"`}return typeof t[Symbol.toPrimitive]=="function"?t[Symbol.toPrimitive]("string"):ArrayBuffer.isView(t)?t instanceof Dm||t instanceof Pm?`[${[...t].map(e=>Lg(e))}]`:`[${t}]`:ArrayBuffer.isView(t)?`[${t}]`:JSON.stringify(t,(e,i)=>typeof i=="bigint"?`${i}`:i)}const Ofe=Symbol.for("isArrowBigNum");function wa(t,...e){return e.length===0?Object.setPrototypeOf(ai(this.TypedArray,t),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(t,...e),this.constructor.prototype)}wa.prototype[Ofe]=!0;wa.prototype.toJSON=function(){return`"${Of(this)}"`};wa.prototype.valueOf=function(){return e9(this)};wa.prototype.toString=function(){return Of(this)};wa.prototype[Symbol.toPrimitive]=function(t="default"){switch(t){case"number":return e9(this);case"string":return Of(this);case"default":return Ek(this)}return Of(this)};function Qh(...t){return wa.apply(this,t)}function Zh(...t){return wa.apply(this,t)}function Dg(...t){return wa.apply(this,t)}Object.setPrototypeOf(Qh.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Zh.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(Dg.prototype,Object.create(Uint32Array.prototype));Object.assign(Qh.prototype,wa.prototype,{constructor:Qh,signed:!0,TypedArray:Int32Array,BigIntArray:Dm});Object.assign(Zh.prototype,wa.prototype,{constructor:Zh,signed:!1,TypedArray:Uint32Array,BigIntArray:Pm});Object.assign(Dg.prototype,wa.prototype,{constructor:Dg,signed:!0,TypedArray:Uint32Array,BigIntArray:Pm});function e9(t){const{buffer:e,byteOffset:i,length:n,signed:s}=t,a=new Pm(e,i,n),c=s&&a[a.length-1]&BigInt(1)<<BigInt(63);let d=BigInt(c?1:0),f=BigInt(0);if(c){for(const u of a)d+=~u*(BigInt(1)<<BigInt(32)*f++);d*=BigInt(-1)}else for(const u of a)d+=u*(BigInt(1)<<BigInt(32)*f++);return d}let Of,Ek;yfe?(Ek=t=>t.byteLength===8?new t.BigIntArray(t.buffer,t.byteOffset,1)[0]:cB(t),Of=t=>t.byteLength===8?`${new t.BigIntArray(t.buffer,t.byteOffset,1)[0]}`:cB(t)):(Of=cB,Ek=Of);function cB(t){let e="";const i=new Uint32Array(2);let n=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2);const s=new Uint32Array((n=new Uint16Array(n).reverse()).buffer);let a=-1;const c=n.length-1;do{for(i[0]=n[a=0];a<c;)n[a++]=i[1]=i[0]/10,i[0]=(i[0]-i[1]*10<<16)+n[a];n[a]=i[1]=i[0]/10,i[0]=i[0]-i[1]*10,e=`${i[0]}${e}`}while(s[0]||s[1]||s[2]||s[3]);return e??"0"}class RA{static new(e,i){switch(i){case!0:return new Qh(e);case!1:return new Zh(e)}switch(e.constructor){case Int8Array:case Int16Array:case Int32Array:case Dm:return new Qh(e)}return e.byteLength===16?new Dg(e):new Zh(e)}static signed(e){return new Qh(e)}static unsigned(e){return new Zh(e)}static decimal(e){return new Dg(e)}constructor(e,i){return RA.new(e,i)}}var t9,i9,n9,s9,r9,a9,o9,l9,c9,d9,f9,u9,h9,p9,_9,y9,g9,m9,w9;class Ze{static isNull(e){return(e==null?void 0:e.typeId)===Q.Null}static isInt(e){return(e==null?void 0:e.typeId)===Q.Int}static isFloat(e){return(e==null?void 0:e.typeId)===Q.Float}static isBinary(e){return(e==null?void 0:e.typeId)===Q.Binary}static isUtf8(e){return(e==null?void 0:e.typeId)===Q.Utf8}static isBool(e){return(e==null?void 0:e.typeId)===Q.Bool}static isDecimal(e){return(e==null?void 0:e.typeId)===Q.Decimal}static isDate(e){return(e==null?void 0:e.typeId)===Q.Date}static isTime(e){return(e==null?void 0:e.typeId)===Q.Time}static isTimestamp(e){return(e==null?void 0:e.typeId)===Q.Timestamp}static isInterval(e){return(e==null?void 0:e.typeId)===Q.Interval}static isList(e){return(e==null?void 0:e.typeId)===Q.List}static isStruct(e){return(e==null?void 0:e.typeId)===Q.Struct}static isUnion(e){return(e==null?void 0:e.typeId)===Q.Union}static isFixedSizeBinary(e){return(e==null?void 0:e.typeId)===Q.FixedSizeBinary}static isFixedSizeList(e){return(e==null?void 0:e.typeId)===Q.FixedSizeList}static isMap(e){return(e==null?void 0:e.typeId)===Q.Map}static isDictionary(e){return(e==null?void 0:e.typeId)===Q.Dictionary}static isDenseUnion(e){return Ze.isUnion(e)&&e.mode===tr.Dense}static isSparseUnion(e){return Ze.isUnion(e)&&e.mode===tr.Sparse}get typeId(){return Q.NONE}}t9=Symbol.toStringTag;Ze[t9]=(t=>(t.children=null,t.ArrayType=Array,t[Symbol.toStringTag]="DataType"))(Ze.prototype);let Wc=class extends Ze{toString(){return"Null"}get typeId(){return Q.Null}};i9=Symbol.toStringTag;Wc[i9]=(t=>t[Symbol.toStringTag]="Null")(Wc.prototype);class Hc extends Ze{constructor(e,i){super(),this.isSigned=e,this.bitWidth=i}get typeId(){return Q.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?Dm:Pm}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}n9=Symbol.toStringTag;Hc[n9]=(t=>(t.isSigned=null,t.bitWidth=null,t[Symbol.toStringTag]="Int"))(Hc.prototype);class Pg extends Hc{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}Object.defineProperty(Pg.prototype,"ArrayType",{value:Int32Array});class $g extends Ze{constructor(e){super(),this.precision=e}get typeId(){return Q.Float}get ArrayType(){switch(this.precision){case ms.HALF:return Uint16Array;case ms.SINGLE:return Float32Array;case ms.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}s9=Symbol.toStringTag;$g[s9]=(t=>(t.precision=null,t[Symbol.toStringTag]="Float"))($g.prototype);let O1=class extends Ze{constructor(){super()}get typeId(){return Q.Binary}toString(){return"Binary"}};r9=Symbol.toStringTag;O1[r9]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Binary"))(O1.prototype);let N1=class extends Ze{constructor(){super()}get typeId(){return Q.Utf8}toString(){return"Utf8"}};a9=Symbol.toStringTag;N1[a9]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Utf8"))(N1.prototype);let C1=class extends Ze{constructor(){super()}get typeId(){return Q.Bool}toString(){return"Bool"}};o9=Symbol.toStringTag;C1[o9]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Bool"))(C1.prototype);let R1=class extends Ze{constructor(e,i,n=128){super(),this.scale=e,this.precision=i,this.bitWidth=n}get typeId(){return Q.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};l9=Symbol.toStringTag;R1[l9]=(t=>(t.scale=null,t.precision=null,t.ArrayType=Uint32Array,t[Symbol.toStringTag]="Decimal"))(R1.prototype);class L1 extends Ze{constructor(e){super(),this.unit=e}get typeId(){return Q.Date}toString(){return`Date${(this.unit+1)*32}<${Cl[this.unit]}>`}}c9=Symbol.toStringTag;L1[c9]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Date"))(L1.prototype);class Ug extends Ze{constructor(e,i){super(),this.unit=e,this.bitWidth=i}get typeId(){return Q.Time}toString(){return`Time${this.bitWidth}<${qt[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return Dm}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}d9=Symbol.toStringTag;Ug[d9]=(t=>(t.unit=null,t.bitWidth=null,t[Symbol.toStringTag]="Time"))(Ug.prototype);class D1 extends Ze{constructor(e,i){super(),this.unit=e,this.timezone=i}get typeId(){return Q.Timestamp}toString(){return`Timestamp<${qt[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}f9=Symbol.toStringTag;D1[f9]=(t=>(t.unit=null,t.timezone=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Timestamp"))(D1.prototype);class P1 extends Ze{constructor(e){super(),this.unit=e}get typeId(){return Q.Interval}toString(){return`Interval<${Vc[this.unit]}>`}}u9=Symbol.toStringTag;P1[u9]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Interval"))(P1.prototype);let $1=class extends Ze{constructor(e){super(),this.children=[e]}get typeId(){return Q.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};h9=Symbol.toStringTag;$1[h9]=(t=>(t.children=null,t[Symbol.toStringTag]="List"))($1.prototype);class Xn extends Ze{constructor(e){super(),this.children=e}get typeId(){return Q.Struct}toString(){return`Struct<{${this.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}p9=Symbol.toStringTag;Xn[p9]=(t=>(t.children=null,t[Symbol.toStringTag]="Struct"))(Xn.prototype);class U1 extends Ze{constructor(e,i,n){super(),this.mode=e,this.children=n,this.typeIds=i=Int32Array.from(i),this.typeIdToChildIndex=i.reduce((s,a,c)=>(s[a]=c)&&s||s,Object.create(null))}get typeId(){return Q.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(e=>`${e.type}`).join(" | ")}>`}}_9=Symbol.toStringTag;U1[_9]=(t=>(t.mode=null,t.typeIds=null,t.children=null,t.typeIdToChildIndex=null,t.ArrayType=Int8Array,t[Symbol.toStringTag]="Union"))(U1.prototype);let z1=class extends Ze{constructor(e){super(),this.byteWidth=e}get typeId(){return Q.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};y9=Symbol.toStringTag;z1[y9]=(t=>(t.byteWidth=null,t.ArrayType=Uint8Array,t[Symbol.toStringTag]="FixedSizeBinary"))(z1.prototype);let j1=class extends Ze{constructor(e,i){super(),this.listSize=e,this.children=[i]}get typeId(){return Q.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};g9=Symbol.toStringTag;j1[g9]=(t=>(t.children=null,t.listSize=null,t[Symbol.toStringTag]="FixedSizeList"))(j1.prototype);class q1 extends Ze{constructor(e,i=!1){super(),this.children=[e],this.keysSorted=i}get typeId(){return Q.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}m9=Symbol.toStringTag;q1[m9]=(t=>(t.children=null,t.keysSorted=null,t[Symbol.toStringTag]="Map_"))(q1.prototype);const Nfe=(t=>()=>++t)(-1);class Cp extends Ze{constructor(e,i,n,s){super(),this.indices=i,this.dictionary=e,this.isOrdered=s||!1,this.id=n==null?Nfe():typeof n=="number"?n:n.low}get typeId(){return Q.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}w9=Symbol.toStringTag;Cp[w9]=(t=>(t.id=null,t.indices=null,t.isOrdered=null,t.dictionary=null,t[Symbol.toStringTag]="Dictionary"))(Cp.prototype);function nl(t){const e=t;switch(t.typeId){case Q.Decimal:return t.bitWidth/32;case Q.Timestamp:return 2;case Q.Date:return 1+e.unit;case Q.Interval:return 1+e.unit;case Q.FixedSizeList:return e.listSize;case Q.FixedSizeBinary:return e.byteWidth;default:return 1}}class Nt{visitMany(e,...i){return e.map((n,s)=>this.visit(n,...i.map(a=>a[s])))}visit(...e){return this.getVisitFn(e[0],!1).apply(this,e)}getVisitFn(e,i=!0){return Cfe(this,e,i)}getVisitFnByTypeId(e,i=!0){return Sh(this,e,i)}visitNull(e,...i){return null}visitBool(e,...i){return null}visitInt(e,...i){return null}visitFloat(e,...i){return null}visitUtf8(e,...i){return null}visitBinary(e,...i){return null}visitFixedSizeBinary(e,...i){return null}visitDate(e,...i){return null}visitTimestamp(e,...i){return null}visitTime(e,...i){return null}visitDecimal(e,...i){return null}visitList(e,...i){return null}visitStruct(e,...i){return null}visitUnion(e,...i){return null}visitDictionary(e,...i){return null}visitInterval(e,...i){return null}visitFixedSizeList(e,...i){return null}visitMap(e,...i){return null}}function Cfe(t,e,i=!0){return typeof e=="number"?Sh(t,e,i):typeof e=="string"&&e in Q?Sh(t,Q[e],i):e&&e instanceof Ze?Sh(t,b4(e),i):e!=null&&e.type&&e.type instanceof Ze?Sh(t,b4(e.type),i):Sh(t,Q.NONE,i)}function Sh(t,e,i=!0){let n=null;switch(e){case Q.Null:n=t.visitNull;break;case Q.Bool:n=t.visitBool;break;case Q.Int:n=t.visitInt;break;case Q.Int8:n=t.visitInt8||t.visitInt;break;case Q.Int16:n=t.visitInt16||t.visitInt;break;case Q.Int32:n=t.visitInt32||t.visitInt;break;case Q.Int64:n=t.visitInt64||t.visitInt;break;case Q.Uint8:n=t.visitUint8||t.visitInt;break;case Q.Uint16:n=t.visitUint16||t.visitInt;break;case Q.Uint32:n=t.visitUint32||t.visitInt;break;case Q.Uint64:n=t.visitUint64||t.visitInt;break;case Q.Float:n=t.visitFloat;break;case Q.Float16:n=t.visitFloat16||t.visitFloat;break;case Q.Float32:n=t.visitFloat32||t.visitFloat;break;case Q.Float64:n=t.visitFloat64||t.visitFloat;break;case Q.Utf8:n=t.visitUtf8;break;case Q.Binary:n=t.visitBinary;break;case Q.FixedSizeBinary:n=t.visitFixedSizeBinary;break;case Q.Date:n=t.visitDate;break;case Q.DateDay:n=t.visitDateDay||t.visitDate;break;case Q.DateMillisecond:n=t.visitDateMillisecond||t.visitDate;break;case Q.Timestamp:n=t.visitTimestamp;break;case Q.TimestampSecond:n=t.visitTimestampSecond||t.visitTimestamp;break;case Q.TimestampMillisecond:n=t.visitTimestampMillisecond||t.visitTimestamp;break;case Q.TimestampMicrosecond:n=t.visitTimestampMicrosecond||t.visitTimestamp;break;case Q.TimestampNanosecond:n=t.visitTimestampNanosecond||t.visitTimestamp;break;case Q.Time:n=t.visitTime;break;case Q.TimeSecond:n=t.visitTimeSecond||t.visitTime;break;case Q.TimeMillisecond:n=t.visitTimeMillisecond||t.visitTime;break;case Q.TimeMicrosecond:n=t.visitTimeMicrosecond||t.visitTime;break;case Q.TimeNanosecond:n=t.visitTimeNanosecond||t.visitTime;break;case Q.Decimal:n=t.visitDecimal;break;case Q.List:n=t.visitList;break;case Q.Struct:n=t.visitStruct;break;case Q.Union:n=t.visitUnion;break;case Q.DenseUnion:n=t.visitDenseUnion||t.visitUnion;break;case Q.SparseUnion:n=t.visitSparseUnion||t.visitUnion;break;case Q.Dictionary:n=t.visitDictionary;break;case Q.Interval:n=t.visitInterval;break;case Q.IntervalDayTime:n=t.visitIntervalDayTime||t.visitInterval;break;case Q.IntervalYearMonth:n=t.visitIntervalYearMonth||t.visitInterval;break;case Q.FixedSizeList:n=t.visitFixedSizeList;break;case Q.Map:n=t.visitMap;break}if(typeof n=="function")return n;if(!i)return()=>null;throw new Error(`Unrecognized type '${Q[e]}'`)}function b4(t){switch(t.typeId){case Q.Null:return Q.Null;case Q.Int:{const{bitWidth:e,isSigned:i}=t;switch(e){case 8:return i?Q.Int8:Q.Uint8;case 16:return i?Q.Int16:Q.Uint16;case 32:return i?Q.Int32:Q.Uint32;case 64:return i?Q.Int64:Q.Uint64}return Q.Int}case Q.Float:switch(t.precision){case ms.HALF:return Q.Float16;case ms.SINGLE:return Q.Float32;case ms.DOUBLE:return Q.Float64}return Q.Float;case Q.Binary:return Q.Binary;case Q.Utf8:return Q.Utf8;case Q.Bool:return Q.Bool;case Q.Decimal:return Q.Decimal;case Q.Time:switch(t.unit){case qt.SECOND:return Q.TimeSecond;case qt.MILLISECOND:return Q.TimeMillisecond;case qt.MICROSECOND:return Q.TimeMicrosecond;case qt.NANOSECOND:return Q.TimeNanosecond}return Q.Time;case Q.Timestamp:switch(t.unit){case qt.SECOND:return Q.TimestampSecond;case qt.MILLISECOND:return Q.TimestampMillisecond;case qt.MICROSECOND:return Q.TimestampMicrosecond;case qt.NANOSECOND:return Q.TimestampNanosecond}return Q.Timestamp;case Q.Date:switch(t.unit){case Cl.DAY:return Q.DateDay;case Cl.MILLISECOND:return Q.DateMillisecond}return Q.Date;case Q.Interval:switch(t.unit){case Vc.DAY_TIME:return Q.IntervalDayTime;case Vc.YEAR_MONTH:return Q.IntervalYearMonth}return Q.Interval;case Q.Map:return Q.Map;case Q.List:return Q.List;case Q.Struct:return Q.Struct;case Q.Union:switch(t.mode){case tr.Dense:return Q.DenseUnion;case tr.Sparse:return Q.SparseUnion}return Q.Union;case Q.FixedSizeBinary:return Q.FixedSizeBinary;case Q.FixedSizeList:return Q.FixedSizeList;case Q.Dictionary:return Q.Dictionary}throw new Error(`Unrecognized type '${Q[t.typeId]}'`)}Nt.prototype.visitInt8=null;Nt.prototype.visitInt16=null;Nt.prototype.visitInt32=null;Nt.prototype.visitInt64=null;Nt.prototype.visitUint8=null;Nt.prototype.visitUint16=null;Nt.prototype.visitUint32=null;Nt.prototype.visitUint64=null;Nt.prototype.visitFloat16=null;Nt.prototype.visitFloat32=null;Nt.prototype.visitFloat64=null;Nt.prototype.visitDateDay=null;Nt.prototype.visitDateMillisecond=null;Nt.prototype.visitTimestampSecond=null;Nt.prototype.visitTimestampMillisecond=null;Nt.prototype.visitTimestampMicrosecond=null;Nt.prototype.visitTimestampNanosecond=null;Nt.prototype.visitTimeSecond=null;Nt.prototype.visitTimeMillisecond=null;Nt.prototype.visitTimeMicrosecond=null;Nt.prototype.visitTimeNanosecond=null;Nt.prototype.visitDenseUnion=null;Nt.prototype.visitSparseUnion=null;Nt.prototype.visitIntervalDayTime=null;Nt.prototype.visitIntervalYearMonth=null;const b9=new Float64Array(1),Xu=new Uint32Array(b9.buffer);function T9(t){const e=(t&31744)>>10,i=(t&1023)/1024,n=Math.pow(-1,(t&32768)>>15);switch(e){case 31:return n*(i?Number.NaN:1/0);case 0:return n*(i?6103515625e-14*i:0)}return n*Math.pow(2,e-15)*(1+i)}function Rfe(t){if(t!==t)return 32256;b9[0]=t;const e=(Xu[1]&2147483648)>>16&65535;let i=Xu[1]&2146435072,n=0;return i>=1089470464?Xu[0]>0?i=31744:(i=(i&2080374784)>>16,n=(Xu[1]&1048575)>>10):i<=1056964608?(n=1048576+(Xu[1]&1048575),n=1048576+(n<<(i>>20)-998)>>21,i=0):(i=i-1056964608>>10,n=(Xu[1]&1048575)+512>>10),e|i|n&65535}class ut extends Nt{}function wt(t){return(e,i,n)=>{if(e.setValid(i,n!=null))return t(e,i,n)}}const Lfe=(t,e,i)=>{t[e]=Math.trunc(i/864e5)},LA=(t,e,i)=>{t[e]=Math.trunc(i%4294967296),t[e+1]=Math.trunc(i/4294967296)},Dfe=(t,e,i)=>{t[e]=Math.trunc(i*1e3%4294967296),t[e+1]=Math.trunc(i*1e3/4294967296)},Pfe=(t,e,i)=>{t[e]=Math.trunc(i*1e6%4294967296),t[e+1]=Math.trunc(i*1e6/4294967296)},v9=(t,e,i,n)=>{if(i+1<e.length){const{[i]:s,[i+1]:a}=e;t.set(n.subarray(0,a-s),s)}},$fe=({offset:t,values:e},i,n)=>{const s=t+i;n?e[s>>3]|=1<<s%8:e[s>>3]&=~(1<<s%8)},zl=({values:t},e,i)=>{t[e]=i},DA=({values:t},e,i)=>{t[e]=i},E9=({values:t},e,i)=>{t[e]=Rfe(i)},Ufe=(t,e,i)=>{switch(t.type.precision){case ms.HALF:return E9(t,e,i);case ms.SINGLE:case ms.DOUBLE:return DA(t,e,i)}},S9=({values:t},e,i)=>{Lfe(t,e,i.valueOf())},x9=({values:t},e,i)=>{LA(t,e*2,i.valueOf())},zfe=({stride:t,values:e},i,n)=>{e.set(n.subarray(0,t),t*i)},jfe=({values:t,valueOffsets:e},i,n)=>v9(t,e,i,n),qfe=({values:t,valueOffsets:e},i,n)=>{v9(t,e,i,AA(n))},Gfe=(t,e,i)=>{t.type.unit===Cl.DAY?S9(t,e,i):x9(t,e,i)},B9=({values:t},e,i)=>LA(t,e*2,i/1e3),I9=({values:t},e,i)=>LA(t,e*2,i),k9=({values:t},e,i)=>Dfe(t,e*2,i),F9=({values:t},e,i)=>Pfe(t,e*2,i),Vfe=(t,e,i)=>{switch(t.type.unit){case qt.SECOND:return B9(t,e,i);case qt.MILLISECOND:return I9(t,e,i);case qt.MICROSECOND:return k9(t,e,i);case qt.NANOSECOND:return F9(t,e,i)}},M9=({values:t},e,i)=>{t[e]=i},A9=({values:t},e,i)=>{t[e]=i},O9=({values:t},e,i)=>{t[e]=i},N9=({values:t},e,i)=>{t[e]=i},Wfe=(t,e,i)=>{switch(t.type.unit){case qt.SECOND:return M9(t,e,i);case qt.MILLISECOND:return A9(t,e,i);case qt.MICROSECOND:return O9(t,e,i);case qt.NANOSECOND:return N9(t,e,i)}},Hfe=({values:t,stride:e},i,n)=>{t.set(n.subarray(0,e),e*i)},Yfe=(t,e,i)=>{const n=t.children[0],s=t.valueOffsets,a=Mr.getVisitFn(n);if(Array.isArray(i))for(let c=-1,d=s[e],f=s[e+1];d<f;)a(n,d++,i[++c]);else for(let c=-1,d=s[e],f=s[e+1];d<f;)a(n,d++,i.get(++c))},Xfe=(t,e,i)=>{const n=t.children[0],{valueOffsets:s}=t,a=Mr.getVisitFn(n);let{[e]:c,[e+1]:d}=s;const f=i instanceof Map?i.entries():Object.entries(i);for(const u of f)if(a(n,c,u),++c>=d)break},Kfe=(t,e)=>(i,n,s,a)=>n&&i(n,t,e[a]),Jfe=(t,e)=>(i,n,s,a)=>n&&i(n,t,e.get(a)),Qfe=(t,e)=>(i,n,s,a)=>n&&i(n,t,e.get(s.name)),Zfe=(t,e)=>(i,n,s,a)=>n&&i(n,t,e[s.name]),eue=(t,e,i)=>{const n=t.type.children.map(a=>Mr.getVisitFn(a.type)),s=i instanceof Map?Qfe(e,i):i instanceof Yt?Jfe(e,i):Array.isArray(i)?Kfe(e,i):Zfe(e,i);t.type.children.forEach((a,c)=>s(n[c],t.children[c],a,c))},tue=(t,e,i)=>{t.type.mode===tr.Dense?C9(t,e,i):R9(t,e,i)},C9=(t,e,i)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],s=t.children[n];Mr.visit(s,t.valueOffsets[e],i)},R9=(t,e,i)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],s=t.children[n];Mr.visit(s,e,i)},iue=(t,e,i)=>{var n;(n=t.dictionary)===null||n===void 0||n.set(t.values[e],i)},nue=(t,e,i)=>{t.type.unit===Vc.DAY_TIME?L9(t,e,i):D9(t,e,i)},L9=({values:t},e,i)=>{t.set(i.subarray(0,2),2*e)},D9=({values:t},e,i)=>{t[e]=i[0]*12+i[1]%12},sue=(t,e,i)=>{const{stride:n}=t,s=t.children[0],a=Mr.getVisitFn(s);if(Array.isArray(i))for(let c=-1,d=e*n;++c<n;)a(s,d+c,i[c]);else for(let c=-1,d=e*n;++c<n;)a(s,d+c,i.get(c))};ut.prototype.visitBool=wt($fe);ut.prototype.visitInt=wt(zl);ut.prototype.visitInt8=wt(zl);ut.prototype.visitInt16=wt(zl);ut.prototype.visitInt32=wt(zl);ut.prototype.visitInt64=wt(zl);ut.prototype.visitUint8=wt(zl);ut.prototype.visitUint16=wt(zl);ut.prototype.visitUint32=wt(zl);ut.prototype.visitUint64=wt(zl);ut.prototype.visitFloat=wt(Ufe);ut.prototype.visitFloat16=wt(E9);ut.prototype.visitFloat32=wt(DA);ut.prototype.visitFloat64=wt(DA);ut.prototype.visitUtf8=wt(qfe);ut.prototype.visitBinary=wt(jfe);ut.prototype.visitFixedSizeBinary=wt(zfe);ut.prototype.visitDate=wt(Gfe);ut.prototype.visitDateDay=wt(S9);ut.prototype.visitDateMillisecond=wt(x9);ut.prototype.visitTimestamp=wt(Vfe);ut.prototype.visitTimestampSecond=wt(B9);ut.prototype.visitTimestampMillisecond=wt(I9);ut.prototype.visitTimestampMicrosecond=wt(k9);ut.prototype.visitTimestampNanosecond=wt(F9);ut.prototype.visitTime=wt(Wfe);ut.prototype.visitTimeSecond=wt(M9);ut.prototype.visitTimeMillisecond=wt(A9);ut.prototype.visitTimeMicrosecond=wt(O9);ut.prototype.visitTimeNanosecond=wt(N9);ut.prototype.visitDecimal=wt(Hfe);ut.prototype.visitList=wt(Yfe);ut.prototype.visitStruct=wt(eue);ut.prototype.visitUnion=wt(tue);ut.prototype.visitDenseUnion=wt(C9);ut.prototype.visitSparseUnion=wt(R9);ut.prototype.visitDictionary=wt(iue);ut.prototype.visitInterval=wt(nue);ut.prototype.visitIntervalDayTime=wt(L9);ut.prototype.visitIntervalYearMonth=wt(D9);ut.prototype.visitFixedSizeList=wt(sue);ut.prototype.visitMap=wt(Xfe);const Mr=new ut,Vr=Symbol.for("parent"),ep=Symbol.for("rowIndex");class PA{constructor(e,i){return this[Vr]=e,this[ep]=i,new Proxy(this,new aue)}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[ep],i=this[Vr],n=i.type.children,s={};for(let a=-1,c=n.length;++a<c;)s[n[a].name]=ks.visit(i.children[a],e);return s}toString(){return`{${[...this].map(([e,i])=>`${Lg(e)}: ${Lg(i)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new rue(this[Vr],this[ep])}}class rue{constructor(e,i){this.childIndex=0,this.children=e.children,this.rowIndex=i,this.childFields=e.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const e=this.childIndex;return e<this.numChildren?(this.childIndex=e+1,{done:!1,value:[this.childFields[e].name,ks.visit(this.children[e],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(PA.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Vr]:{writable:!0,enumerable:!1,configurable:!1,value:null},[ep]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class aue{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[Vr].type.children.map(i=>i.name)}has(e,i){return e[Vr].type.children.findIndex(n=>n.name===i)!==-1}getOwnPropertyDescriptor(e,i){if(e[Vr].type.children.findIndex(n=>n.name===i)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,i){if(Reflect.has(e,i))return e[i];const n=e[Vr].type.children.findIndex(s=>s.name===i);if(n!==-1){const s=ks.visit(e[Vr].children[n],e[ep]);return Reflect.set(e,i,s),s}}set(e,i,n){const s=e[Vr].type.children.findIndex(a=>a.name===i);return s!==-1?(Mr.visit(e[Vr].children[s],e[ep],n),Reflect.set(e,i,n)):Reflect.has(e,i)||typeof i=="symbol"?Reflect.set(e,i,n):!1}}class st extends Nt{}function ht(t){return(e,i)=>e.getValid(i)?t(e,i):null}const oue=(t,e)=>864e5*t[e],$A=(t,e)=>4294967296*t[e+1]+(t[e]>>>0),lue=(t,e)=>4294967296*(t[e+1]/1e3)+(t[e]>>>0)/1e3,cue=(t,e)=>4294967296*(t[e+1]/1e6)+(t[e]>>>0)/1e6,P9=t=>new Date(t),due=(t,e)=>P9(oue(t,e)),fue=(t,e)=>P9($A(t,e)),uue=(t,e)=>null,$9=(t,e,i)=>{if(i+1>=e.length)return null;const n=e[i],s=e[i+1];return t.subarray(n,s)},hue=({offset:t,values:e},i)=>{const n=t+i;return(e[n>>3]&1<<n%8)!==0},U9=({values:t},e)=>due(t,e),z9=({values:t},e)=>fue(t,e*2),wd=({stride:t,values:e},i)=>e[t*i],pue=({stride:t,values:e},i)=>T9(e[t*i]),j9=({values:t},e)=>t[e],_ue=({stride:t,values:e},i)=>e.subarray(t*i,t*(i+1)),yue=({values:t,valueOffsets:e},i)=>$9(t,e,i),gue=({values:t,valueOffsets:e},i)=>{const n=$9(t,e,i);return n!==null?bk(n):null},mue=({values:t},e)=>t[e],wue=({type:t,values:e},i)=>t.precision!==ms.HALF?e[i]:T9(e[i]),bue=(t,e)=>t.type.unit===Cl.DAY?U9(t,e):z9(t,e),q9=({values:t},e)=>1e3*$A(t,e*2),G9=({values:t},e)=>$A(t,e*2),V9=({values:t},e)=>lue(t,e*2),W9=({values:t},e)=>cue(t,e*2),Tue=(t,e)=>{switch(t.type.unit){case qt.SECOND:return q9(t,e);case qt.MILLISECOND:return G9(t,e);case qt.MICROSECOND:return V9(t,e);case qt.NANOSECOND:return W9(t,e)}},H9=({values:t},e)=>t[e],Y9=({values:t},e)=>t[e],X9=({values:t},e)=>t[e],K9=({values:t},e)=>t[e],vue=(t,e)=>{switch(t.type.unit){case qt.SECOND:return H9(t,e);case qt.MILLISECOND:return Y9(t,e);case qt.MICROSECOND:return X9(t,e);case qt.NANOSECOND:return K9(t,e)}},Eue=({values:t,stride:e},i)=>RA.decimal(t.subarray(e*i,e*(i+1))),Sue=(t,e)=>{const{valueOffsets:i,stride:n,children:s}=t,{[e*n]:a,[e*n+1]:c}=i,f=s[0].slice(a,c-a);return new Yt([f])},xue=(t,e)=>{const{valueOffsets:i,children:n}=t,{[e]:s,[e+1]:a}=i,c=n[0];return new UA(c.slice(s,a-s))},Bue=(t,e)=>new PA(t,e),Iue=(t,e)=>t.type.mode===tr.Dense?J9(t,e):Q9(t,e),J9=(t,e)=>{const i=t.type.typeIdToChildIndex[t.typeIds[e]],n=t.children[i];return ks.visit(n,t.valueOffsets[e])},Q9=(t,e)=>{const i=t.type.typeIdToChildIndex[t.typeIds[e]],n=t.children[i];return ks.visit(n,e)},kue=(t,e)=>{var i;return(i=t.dictionary)===null||i===void 0?void 0:i.get(t.values[e])},Fue=(t,e)=>t.type.unit===Vc.DAY_TIME?Z9(t,e):eG(t,e),Z9=({values:t},e)=>t.subarray(2*e,2*(e+1)),eG=({values:t},e)=>{const i=t[e],n=new Int32Array(2);return n[0]=Math.trunc(i/12),n[1]=Math.trunc(i%12),n},Mue=(t,e)=>{const{stride:i,children:n}=t,a=n[0].slice(e*i,i);return new Yt([a])};st.prototype.visitNull=ht(uue);st.prototype.visitBool=ht(hue);st.prototype.visitInt=ht(mue);st.prototype.visitInt8=ht(wd);st.prototype.visitInt16=ht(wd);st.prototype.visitInt32=ht(wd);st.prototype.visitInt64=ht(j9);st.prototype.visitUint8=ht(wd);st.prototype.visitUint16=ht(wd);st.prototype.visitUint32=ht(wd);st.prototype.visitUint64=ht(j9);st.prototype.visitFloat=ht(wue);st.prototype.visitFloat16=ht(pue);st.prototype.visitFloat32=ht(wd);st.prototype.visitFloat64=ht(wd);st.prototype.visitUtf8=ht(gue);st.prototype.visitBinary=ht(yue);st.prototype.visitFixedSizeBinary=ht(_ue);st.prototype.visitDate=ht(bue);st.prototype.visitDateDay=ht(U9);st.prototype.visitDateMillisecond=ht(z9);st.prototype.visitTimestamp=ht(Tue);st.prototype.visitTimestampSecond=ht(q9);st.prototype.visitTimestampMillisecond=ht(G9);st.prototype.visitTimestampMicrosecond=ht(V9);st.prototype.visitTimestampNanosecond=ht(W9);st.prototype.visitTime=ht(vue);st.prototype.visitTimeSecond=ht(H9);st.prototype.visitTimeMillisecond=ht(Y9);st.prototype.visitTimeMicrosecond=ht(X9);st.prototype.visitTimeNanosecond=ht(K9);st.prototype.visitDecimal=ht(Eue);st.prototype.visitList=ht(Sue);st.prototype.visitStruct=ht(Bue);st.prototype.visitUnion=ht(Iue);st.prototype.visitDenseUnion=ht(J9);st.prototype.visitSparseUnion=ht(Q9);st.prototype.visitDictionary=ht(kue);st.prototype.visitInterval=ht(Fue);st.prototype.visitIntervalDayTime=ht(Z9);st.prototype.visitIntervalYearMonth=ht(eG);st.prototype.visitFixedSizeList=ht(Mue);st.prototype.visitMap=ht(xue);const ks=new st,Ya=Symbol.for("keys"),tp=Symbol.for("vals");class UA{constructor(e){return this[Ya]=new Yt([e.children[0]]).memoize(),this[tp]=e.children[1],new Proxy(this,new Oue)}[Symbol.iterator](){return new Aue(this[Ya],this[tp])}get size(){return this[Ya].length}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[Ya],i=this[tp],n={};for(let s=-1,a=e.length;++s<a;)n[e.get(s)]=ks.visit(i,s);return n}toString(){return`{${[...this].map(([e,i])=>`${Lg(e)}: ${Lg(i)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class Aue{constructor(e,i){this.keys=e,this.vals=i,this.keyIndex=0,this.numKeys=e.length}[Symbol.iterator](){return this}next(){const e=this.keyIndex;return e===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(e),ks.visit(this.vals,e)]})}}class Oue{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[Ya].toArray().map(String)}has(e,i){return e[Ya].includes(i)}getOwnPropertyDescriptor(e,i){if(e[Ya].indexOf(i)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,i){if(Reflect.has(e,i))return e[i];const n=e[Ya].indexOf(i);if(n!==-1){const s=ks.visit(Reflect.get(e,tp),n);return Reflect.set(e,i,s),s}}set(e,i,n){const s=e[Ya].indexOf(i);return s!==-1?(Mr.visit(Reflect.get(e,tp),s,n),Reflect.set(e,i,n)):Reflect.has(e,i)?Reflect.set(e,i,n):!1}}Object.defineProperties(UA.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Ya]:{writable:!0,enumerable:!1,configurable:!1,value:null},[tp]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let T4;function tG(t,e,i,n){const{length:s=0}=t;let a=typeof e!="number"?0:e,c=typeof i!="number"?s:i;return a<0&&(a=(a%s+s)%s),c<0&&(c=(c%s+s)%s),c<a&&(T4=a,a=c,c=T4),c>s&&(c=s),n?n(t,a,c):[a,c]}const v4=t=>t!==t;function w_(t){if(typeof t!=="object"||t===null)return v4(t)?v4:i=>i===t;if(t instanceof Date){const i=t.valueOf();return n=>n instanceof Date?n.valueOf()===i:!1}return ArrayBuffer.isView(t)?i=>i?xfe(t,i):!1:t instanceof Map?Cue(t):Array.isArray(t)?Nue(t):t instanceof Yt?Rue(t):Lue(t,!0)}function Nue(t){const e=[];for(let i=-1,n=t.length;++i<n;)e[i]=w_(t[i]);return jE(e)}function Cue(t){let e=-1;const i=[];for(const n of t.values())i[++e]=w_(n);return jE(i)}function Rue(t){const e=[];for(let i=-1,n=t.length;++i<n;)e[i]=w_(t.get(i));return jE(e)}function Lue(t,e=!1){const i=Object.keys(t);if(!e&&i.length===0)return()=>!1;const n=[];for(let s=-1,a=i.length;++s<a;)n[s]=w_(t[i[s]]);return jE(n,i)}function jE(t,e){return i=>{if(!i||typeof i!="object")return!1;switch(i.constructor){case Array:return Due(t,i);case Map:return E4(t,i,i.keys());case UA:case PA:case Object:case void 0:return E4(t,i,e||Object.keys(i))}return i instanceof Yt?Pue(t,i):!1}}function Due(t,e){const i=t.length;if(e.length!==i)return!1;for(let n=-1;++n<i;)if(!t[n](e[n]))return!1;return!0}function Pue(t,e){const i=t.length;if(e.length!==i)return!1;for(let n=-1;++n<i;)if(!t[n](e.get(n)))return!1;return!0}function E4(t,e,i){const n=i[Symbol.iterator](),s=e instanceof Map?e.keys():Object.keys(e)[Symbol.iterator](),a=e instanceof Map?e.values():Object.values(e)[Symbol.iterator]();let c=0;const d=t.length;let f=a.next(),u=n.next(),o=s.next();for(;c<d&&!u.done&&!o.done&&!f.done&&!(u.value!==o.value||!t[c](f.value));++c,u=n.next(),o=s.next(),f=a.next());return c===d&&u.done&&o.done&&f.done?!0:(n.return&&n.return(),s.return&&s.return(),a.return&&a.return(),!1)}function iG(t,e,i,n){return(i&1<<n)!==0}function $ue(t,e,i,n){return(i&1<<n)>>n}function zA(t,e,i){const n=i.byteLength+7&-8;if(t>0||i.byteLength<n){const s=new Uint8Array(n);return s.set(t%8===0?i.subarray(t>>3):G1(new jA(i,t,e,null,iG)).subarray(0,n)),s}return i}function G1(t){const e=[];let i=0,n=0,s=0;for(const c of t)c&&(s|=1<<n),++n===8&&(e[i++]=s,s=n=0);(i===0||n>0)&&(e[i++]=s);const a=new Uint8Array(e.length+7&-8);return a.set(e),a}class jA{constructor(e,i,n,s,a){this.bytes=e,this.length=n,this.context=s,this.get=a,this.bit=i%8,this.byteIndex=i>>3,this.byte=e[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function Sk(t,e,i){if(i-e<=0)return 0;if(i-e<8){let a=0;for(const c of new jA(t,e,i-e,t,$ue))a+=c;return a}const n=i>>3<<3,s=e+(e%8===0?0:8-e%8);return Sk(t,e,s)+Sk(t,n,i)+Uue(t,s>>3,n-s>>3)}function Uue(t,e,i){let n=0,s=Math.trunc(e);const a=new DataView(t.buffer,t.byteOffset,t.byteLength),c=i===void 0?t.byteLength:s+i;for(;c-s>=4;)n+=dB(a.getUint32(s)),s+=4;for(;c-s>=2;)n+=dB(a.getUint16(s)),s+=2;for(;c-s>=1;)n+=dB(a.getUint8(s)),s+=1;return n}function dB(t){let e=Math.trunc(t);return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),(e+(e>>>4)&252645135)*16843009>>>24}const zue=-1;class di{constructor(e,i,n,s,a,c=[],d){this.type=e,this.children=c,this.dictionary=d,this.offset=Math.floor(Math.max(i||0,0)),this.length=Math.floor(Math.max(n||0,0)),this._nullCount=Math.floor(Math.max(s||0,-1));let f;a instanceof di?(this.stride=a.stride,this.values=a.values,this.typeIds=a.typeIds,this.nullBitmap=a.nullBitmap,this.valueOffsets=a.valueOffsets):(this.stride=nl(e),a&&((f=a[0])&&(this.valueOffsets=f),(f=a[1])&&(this.values=f),(f=a[2])&&(this.nullBitmap=f),(f=a[3])&&(this.typeIds=f))),this.nullable=this._nullCount!==0&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let e=0;const{valueOffsets:i,values:n,nullBitmap:s,typeIds:a}=this;return i&&(e+=i.byteLength),n&&(e+=n.byteLength),s&&(e+=s.byteLength),a&&(e+=a.byteLength),this.children.reduce((c,d)=>c+d.byteLength,e)}get nullCount(){let e=this._nullCount,i;return e<=zue&&(i=this.nullBitmap)&&(this._nullCount=e=this.length-Sk(i,this.offset,this.offset+this.length)),e}getValid(e){if(this.nullable&&this.nullCount>0){const i=this.offset+e;return(this.nullBitmap[i>>3]&1<<i%8)!==0}return!0}setValid(e,i){if(!this.nullable)return i;if(!this.nullBitmap||this.nullBitmap.byteLength<=e>>3){const{nullBitmap:f}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:f,_nullCount:0})}const{nullBitmap:n,offset:s}=this,a=s+e>>3,c=(s+e)%8,d=n[a]>>c&1;return i?d===0&&(n[a]|=1<<c,this._nullCount=this.nullCount+1):d===1&&(n[a]&=~(1<<c),this._nullCount=this.nullCount-1),i}clone(e=this.type,i=this.offset,n=this.length,s=this._nullCount,a=this,c=this.children){return new di(e,i,n,s,a,c,this.dictionary)}slice(e,i){const{stride:n,typeId:s,children:a}=this,c=+(this._nullCount===0)-1,d=s===16?n:1,f=this._sliceBuffers(e,i,n,s);return this.clone(this.type,this.offset+e,i,c,f,a.length===0||this.valueOffsets?a:this._sliceChildren(a,d*e,d*i))}_changeLengthAndBackfillNullBitmap(e){if(this.typeId===Q.Null)return this.clone(this.type,0,e,0);const{length:i,nullCount:n}=this,s=new Uint8Array((e+63&-64)>>3).fill(255,0,i>>3);s[i>>3]=(1<<i-(i&-8))-1,n>0&&s.set(zA(this.offset,i,this.nullBitmap),0);const a=this.buffers;return a[il.VALIDITY]=s,this.clone(this.type,0,e,n+(e-i),a)}_sliceBuffers(e,i,n,s){let a;const{buffers:c}=this;return(a=c[il.TYPE])&&(c[il.TYPE]=a.subarray(e,e+i)),(a=c[il.OFFSET])&&(c[il.OFFSET]=a.subarray(e,e+i+1))||(a=c[il.DATA])&&(c[il.DATA]=s===6?a:a.subarray(n*e,n*(e+i))),c}_sliceChildren(e,i,n){return e.map(s=>s.slice(i,n))}}di.prototype.children=Object.freeze([]);class sg extends Nt{visit(e){return this.getVisitFn(e.type).call(this,e)}visitNull(e){const{["type"]:i,["offset"]:n=0,["length"]:s=0}=e;return new di(i,n,s,0)}visitBool(e){const{["type"]:i,["offset"]:n=0}=e,s=jt(e.nullBitmap),a=ai(i.ArrayType,e.data),{["length"]:c=a.length>>3,["nullCount"]:d=e.nullBitmap?-1:0}=e;return new di(i,n,c,d,[void 0,a,s])}visitInt(e){const{["type"]:i,["offset"]:n=0}=e,s=jt(e.nullBitmap),a=ai(i.ArrayType,e.data),{["length"]:c=a.length,["nullCount"]:d=e.nullBitmap?-1:0}=e;return new di(i,n,c,d,[void 0,a,s])}visitFloat(e){const{["type"]:i,["offset"]:n=0}=e,s=jt(e.nullBitmap),a=ai(i.ArrayType,e.data),{["length"]:c=a.length,["nullCount"]:d=e.nullBitmap?-1:0}=e;return new di(i,n,c,d,[void 0,a,s])}visitUtf8(e){const{["type"]:i,["offset"]:n=0}=e,s=jt(e.data),a=jt(e.nullBitmap),c=X_(e.valueOffsets),{["length"]:d=c.length-1,["nullCount"]:f=e.nullBitmap?-1:0}=e;return new di(i,n,d,f,[c,s,a])}visitBinary(e){const{["type"]:i,["offset"]:n=0}=e,s=jt(e.data),a=jt(e.nullBitmap),c=X_(e.valueOffsets),{["length"]:d=c.length-1,["nullCount"]:f=e.nullBitmap?-1:0}=e;return new di(i,n,d,f,[c,s,a])}visitFixedSizeBinary(e){const{["type"]:i,["offset"]:n=0}=e,s=jt(e.nullBitmap),a=ai(i.ArrayType,e.data),{["length"]:c=a.length/nl(i),["nullCount"]:d=e.nullBitmap?-1:0}=e;return new di(i,n,c,d,[void 0,a,s])}visitDate(e){const{["type"]:i,["offset"]:n=0}=e,s=jt(e.nullBitmap),a=ai(i.ArrayType,e.data),{["length"]:c=a.length/nl(i),["nullCount"]:d=e.nullBitmap?-1:0}=e;return new di(i,n,c,d,[void 0,a,s])}visitTimestamp(e){const{["type"]:i,["offset"]:n=0}=e,s=jt(e.nullBitmap),a=ai(i.ArrayType,e.data),{["length"]:c=a.length/nl(i),["nullCount"]:d=e.nullBitmap?-1:0}=e;return new di(i,n,c,d,[void 0,a,s])}visitTime(e){const{["type"]:i,["offset"]:n=0}=e,s=jt(e.nullBitmap),a=ai(i.ArrayType,e.data),{["length"]:c=a.length/nl(i),["nullCount"]:d=e.nullBitmap?-1:0}=e;return new di(i,n,c,d,[void 0,a,s])}visitDecimal(e){const{["type"]:i,["offset"]:n=0}=e,s=jt(e.nullBitmap),a=ai(i.ArrayType,e.data),{["length"]:c=a.length/nl(i),["nullCount"]:d=e.nullBitmap?-1:0}=e;return new di(i,n,c,d,[void 0,a,s])}visitList(e){const{["type"]:i,["offset"]:n=0,["child"]:s}=e,a=jt(e.nullBitmap),c=X_(e.valueOffsets),{["length"]:d=c.length-1,["nullCount"]:f=e.nullBitmap?-1:0}=e;return new di(i,n,d,f,[c,void 0,a],[s])}visitStruct(e){const{["type"]:i,["offset"]:n=0,["children"]:s=[]}=e,a=jt(e.nullBitmap),{length:c=s.reduce((f,{length:u})=>Math.max(f,u),0),nullCount:d=e.nullBitmap?-1:0}=e;return new di(i,n,c,d,[void 0,void 0,a],s)}visitUnion(e){const{["type"]:i,["offset"]:n=0,["children"]:s=[]}=e,a=jt(e.nullBitmap),c=ai(i.ArrayType,e.typeIds),{["length"]:d=c.length,["nullCount"]:f=e.nullBitmap?-1:0}=e;if(Ze.isSparseUnion(i))return new di(i,n,d,f,[void 0,void 0,a,c],s);const u=X_(e.valueOffsets);return new di(i,n,d,f,[u,void 0,a,c],s)}visitDictionary(e){const{["type"]:i,["offset"]:n=0}=e,s=jt(e.nullBitmap),a=ai(i.indices.ArrayType,e.data),{["dictionary"]:c=new Yt([new sg().visit({type:i.dictionary})])}=e,{["length"]:d=a.length,["nullCount"]:f=e.nullBitmap?-1:0}=e;return new di(i,n,d,f,[void 0,a,s],[],c)}visitInterval(e){const{["type"]:i,["offset"]:n=0}=e,s=jt(e.nullBitmap),a=ai(i.ArrayType,e.data),{["length"]:c=a.length/nl(i),["nullCount"]:d=e.nullBitmap?-1:0}=e;return new di(i,n,c,d,[void 0,a,s])}visitFixedSizeList(e){const{["type"]:i,["offset"]:n=0,["child"]:s=new sg().visit({type:i.valueType})}=e,a=jt(e.nullBitmap),{["length"]:c=s.length/nl(i),["nullCount"]:d=e.nullBitmap?-1:0}=e;return new di(i,n,c,d,[void 0,void 0,a],[s])}visitMap(e){const{["type"]:i,["offset"]:n=0,["child"]:s=new sg().visit({type:i.childType})}=e,a=jt(e.nullBitmap),c=X_(e.valueOffsets),{["length"]:d=c.length-1,["nullCount"]:f=e.nullBitmap?-1:0}=e;return new di(i,n,d,f,[c,void 0,a],[s])}}function Ft(t){return new sg().visit(t)}class S4{constructor(e=0,i){this.numChunks=e,this.getChunkIterator=i,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const e=this.chunkIterator.next();if(!e.done)return e;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function nG(t){return t.reduce((e,i)=>e+i.nullCount,0)}function sG(t){return t.reduce((e,i,n)=>(e[n+1]=e[n]+i.length,e),new Uint32Array(t.length+1))}function rG(t,e,i,n){const s=[];for(let a=-1,c=t.length;++a<c;){const d=t[a],f=e[a],{length:u}=d;if(f>=n)break;if(i>=f+u)continue;if(f>=i&&f+u<=n){s.push(d);continue}const o=Math.max(0,i-f),g=Math.min(n-f,u);s.push(d.slice(o,g-o))}return s.length===0&&s.push(t[0].slice(0,0)),s}function qA(t,e,i,n){let s=0,a=0,c=e.length-1;do{if(s>=c-1)return i<e[c]?n(t,s,i-e[s]):null;a=s+Math.trunc((c-s)*.5),i<e[a]?c=a:s=a}while(s<c)}function GA(t,e){return t.getValid(e)}function ip(t){function e(i,n,s){return t(i[n],s)}return function(i){const n=this.data;return qA(n,this._offsets,i,e)}}function aG(t){let e;function i(n,s,a){return t(n[s],a,e)}return function(n,s){const a=this.data;e=s;const c=qA(a,this._offsets,n,i);return e=void 0,c}}function oG(t){let e;function i(n,s,a){let c=a,d=0,f=0;for(let u=s-1,o=n.length;++u<o;){const g=n[u];if(~(d=t(g,e,c)))return f+d;c=0,f+=g.length}return-1}return function(n,s){e=n;const a=this.data,c=typeof s!="number"?i(a,0,0):qA(a,this._offsets,s,i);return e=void 0,c}}class rt extends Nt{}function jue(t,e){return e===null&&t.length>0?0:-1}function que(t,e){const{nullBitmap:i}=t;if(!i||t.nullCount<=0)return-1;let n=0;for(const s of new jA(i,t.offset+(e||0),t.length,i,iG)){if(!s)return n;++n}return-1}function vt(t,e,i){if(e===void 0)return-1;if(e===null)return que(t,i);const n=ks.getVisitFn(t),s=w_(e);for(let a=(i||0)-1,c=t.length;++a<c;)if(s(n(t,a)))return a;return-1}function lG(t,e,i){const n=ks.getVisitFn(t),s=w_(e);for(let a=(i||0)-1,c=t.length;++a<c;)if(s(n(t,a)))return a;return-1}rt.prototype.visitNull=jue;rt.prototype.visitBool=vt;rt.prototype.visitInt=vt;rt.prototype.visitInt8=vt;rt.prototype.visitInt16=vt;rt.prototype.visitInt32=vt;rt.prototype.visitInt64=vt;rt.prototype.visitUint8=vt;rt.prototype.visitUint16=vt;rt.prototype.visitUint32=vt;rt.prototype.visitUint64=vt;rt.prototype.visitFloat=vt;rt.prototype.visitFloat16=vt;rt.prototype.visitFloat32=vt;rt.prototype.visitFloat64=vt;rt.prototype.visitUtf8=vt;rt.prototype.visitBinary=vt;rt.prototype.visitFixedSizeBinary=vt;rt.prototype.visitDate=vt;rt.prototype.visitDateDay=vt;rt.prototype.visitDateMillisecond=vt;rt.prototype.visitTimestamp=vt;rt.prototype.visitTimestampSecond=vt;rt.prototype.visitTimestampMillisecond=vt;rt.prototype.visitTimestampMicrosecond=vt;rt.prototype.visitTimestampNanosecond=vt;rt.prototype.visitTime=vt;rt.prototype.visitTimeSecond=vt;rt.prototype.visitTimeMillisecond=vt;rt.prototype.visitTimeMicrosecond=vt;rt.prototype.visitTimeNanosecond=vt;rt.prototype.visitDecimal=vt;rt.prototype.visitList=vt;rt.prototype.visitStruct=vt;rt.prototype.visitUnion=vt;rt.prototype.visitDenseUnion=lG;rt.prototype.visitSparseUnion=lG;rt.prototype.visitDictionary=vt;rt.prototype.visitInterval=vt;rt.prototype.visitIntervalDayTime=vt;rt.prototype.visitIntervalYearMonth=vt;rt.prototype.visitFixedSizeList=vt;rt.prototype.visitMap=vt;const V1=new rt;class at extends Nt{}function pt(t){const{type:e}=t;if(t.nullCount===0&&t.stride===1&&(e.typeId===Q.Timestamp||e instanceof Hc&&e.bitWidth!==64||e instanceof Ug&&e.bitWidth!==64||e instanceof $g&&e.precision!==ms.HALF))return new S4(t.data.length,n=>{const s=t.data[n];return s.values.subarray(0,s.length)[Symbol.iterator]()});let i=0;return new S4(t.data.length,n=>{const a=t.data[n].length,c=t.slice(i,i+a);return i+=a,new Gue(c)})}class Gue{constructor(e){this.vector=e,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}at.prototype.visitNull=pt;at.prototype.visitBool=pt;at.prototype.visitInt=pt;at.prototype.visitInt8=pt;at.prototype.visitInt16=pt;at.prototype.visitInt32=pt;at.prototype.visitInt64=pt;at.prototype.visitUint8=pt;at.prototype.visitUint16=pt;at.prototype.visitUint32=pt;at.prototype.visitUint64=pt;at.prototype.visitFloat=pt;at.prototype.visitFloat16=pt;at.prototype.visitFloat32=pt;at.prototype.visitFloat64=pt;at.prototype.visitUtf8=pt;at.prototype.visitBinary=pt;at.prototype.visitFixedSizeBinary=pt;at.prototype.visitDate=pt;at.prototype.visitDateDay=pt;at.prototype.visitDateMillisecond=pt;at.prototype.visitTimestamp=pt;at.prototype.visitTimestampSecond=pt;at.prototype.visitTimestampMillisecond=pt;at.prototype.visitTimestampMicrosecond=pt;at.prototype.visitTimestampNanosecond=pt;at.prototype.visitTime=pt;at.prototype.visitTimeSecond=pt;at.prototype.visitTimeMillisecond=pt;at.prototype.visitTimeMicrosecond=pt;at.prototype.visitTimeNanosecond=pt;at.prototype.visitDecimal=pt;at.prototype.visitList=pt;at.prototype.visitStruct=pt;at.prototype.visitUnion=pt;at.prototype.visitDenseUnion=pt;at.prototype.visitSparseUnion=pt;at.prototype.visitDictionary=pt;at.prototype.visitInterval=pt;at.prototype.visitIntervalDayTime=pt;at.prototype.visitIntervalYearMonth=pt;at.prototype.visitFixedSizeList=pt;at.prototype.visitMap=pt;const VA=new at,Vue=(t,e)=>t+e;class bd extends Nt{visitNull(e,i){return 0}visitInt(e,i){return e.type.bitWidth/8}visitFloat(e,i){return e.type.ArrayType.BYTES_PER_ELEMENT}visitBool(e,i){return 1/8}visitDecimal(e,i){return e.type.bitWidth/8}visitDate(e,i){return(e.type.unit+1)*4}visitTime(e,i){return e.type.bitWidth/8}visitTimestamp(e,i){return e.type.unit===qt.SECOND?4:8}visitInterval(e,i){return(e.type.unit+1)*4}visitStruct(e,i){return e.children.reduce((n,s)=>n+Eo.visit(s,i),0)}visitFixedSizeBinary(e,i){return e.type.byteWidth}visitMap(e,i){return 8+e.children.reduce((n,s)=>n+Eo.visit(s,i),0)}visitDictionary(e,i){var n;return e.type.indices.bitWidth/8+(((n=e.dictionary)===null||n===void 0?void 0:n.getByteLength(e.values[i]))||0)}}const Wue=({valueOffsets:t},e)=>8+(t[e+1]-t[e]),Hue=({valueOffsets:t},e)=>8+(t[e+1]-t[e]),Yue=({valueOffsets:t,stride:e,children:i},n)=>{const s=i[0],{[n*e]:a}=t,{[n*e+1]:c}=t,d=Eo.getVisitFn(s.type),f=s.slice(a,c-a);let u=8;for(let o=-1,g=c-a;++o<g;)u+=d(f,o);return u},Xue=({stride:t,children:e},i)=>{const n=e[0],s=n.slice(i*t,t),a=Eo.getVisitFn(n.type);let c=0;for(let d=-1,f=s.length;++d<f;)c+=a(s,d);return c},Kue=(t,e)=>t.type.mode===tr.Dense?cG(t,e):dG(t,e),cG=({type:t,children:e,typeIds:i,valueOffsets:n},s)=>{const a=t.typeIdToChildIndex[i[s]];return 8+Eo.visit(e[a],n[s])},dG=({children:t},e)=>4+Eo.visitMany(t,t.map(()=>e)).reduce(Vue,0);bd.prototype.visitUtf8=Wue;bd.prototype.visitBinary=Hue;bd.prototype.visitList=Yue;bd.prototype.visitFixedSizeList=Xue;bd.prototype.visitUnion=Kue;bd.prototype.visitDenseUnion=cG;bd.prototype.visitSparseUnion=dG;const Eo=new bd;var fG;const uG={},hG={};class Yt{constructor(e){var i,n,s;const a=e[0]instanceof Yt?e.flatMap(d=>d.data):e;if(a.length===0||a.some(d=>!(d instanceof di)))throw new TypeError("Vector constructor expects an Array of Data instances.");const c=(i=a[0])===null||i===void 0?void 0:i.type;switch(a.length){case 0:this._offsets=[0];break;case 1:{const{get:d,set:f,indexOf:u,byteLength:o}=uG[c.typeId],g=a[0];this.isValid=w=>GA(g,w),this.get=w=>d(g,w),this.set=(w,m)=>f(g,w,m),this.indexOf=w=>u(g,w),this.getByteLength=w=>o(g,w),this._offsets=[0,g.length];break}default:Object.setPrototypeOf(this,hG[c.typeId]),this._offsets=sG(a);break}this.data=a,this.type=c,this.stride=nl(c),this.numChildren=(s=(n=c.children)===null||n===void 0?void 0:n.length)!==null&&s!==void 0?s:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return this._byteLength===-1&&(this._byteLength=this.data.reduce((e,i)=>e+i.byteLength,0)),this._byteLength}get nullCount(){return this._nullCount===-1&&(this._nullCount=nG(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${Q[this.type.typeId]}Vector`}isValid(e){return!1}get(e){return null}set(e,i){}indexOf(e,i){return-1}includes(e,i){return this.indexOf(e,i)>0}getByteLength(e){return 0}[Symbol.iterator](){return VA.visit(this)}concat(...e){return new Yt(this.data.concat(e.flatMap(i=>i.data).flat(Number.POSITIVE_INFINITY)))}slice(e,i){return new Yt(tG(this,e,i,({data:n,_offsets:s},a,c)=>rG(n,s,a,c)))}toJSON(){return[...this]}toArray(){const{type:e,data:i,length:n,stride:s,ArrayType:a}=this;switch(e.typeId){case Q.Int:case Q.Float:case Q.Decimal:case Q.Time:case Q.Timestamp:switch(i.length){case 0:return new a;case 1:return i[0].values.subarray(0,n*s);default:return i.reduce((c,{values:d,length:f})=>(c.array.set(d.subarray(0,f*s),c.offset),c.offset+=f*s,c),{array:new a(n*s),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(e){var i;return this.getChildAt((i=this.type.children)===null||i===void 0?void 0:i.findIndex(n=>n.name===e))}getChildAt(e){return e>-1&&e<this.numChildren?new Yt(this.data.map(({children:i})=>i[e])):null}get isMemoized(){return Ze.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(Ze.isDictionary(this.type)){const e=new W1(this.data[0].dictionary),i=this.data.map(n=>{const s=n.clone();return s.dictionary=e,s});return new Yt(i)}return new W1(this)}unmemoize(){if(Ze.isDictionary(this.type)&&this.isMemoized){const e=this.data[0].dictionary.unmemoize(),i=this.data.map(n=>{const s=n.clone();return s.dictionary=e,s});return new Yt(i)}return this}}fG=Symbol.toStringTag;Yt[fG]=(t=>{t.type=Ze.prototype,t.data=[],t.length=0,t.stride=1,t.numChildren=0,t._nullCount=-1,t._byteLength=-1,t._offsets=new Uint32Array([0]),t[Symbol.isConcatSpreadable]=!0;const e=Object.keys(Q).map(i=>Q[i]).filter(i=>typeof i=="number"&&i!==Q.NONE);for(const i of e){const n=ks.getVisitFnByTypeId(i),s=Mr.getVisitFnByTypeId(i),a=V1.getVisitFnByTypeId(i),c=Eo.getVisitFnByTypeId(i);uG[i]={get:n,set:s,indexOf:a,byteLength:c},hG[i]=Object.create(t,{isValid:{value:ip(GA)},get:{value:ip(ks.getVisitFnByTypeId(i))},set:{value:aG(Mr.getVisitFnByTypeId(i))},indexOf:{value:oG(V1.getVisitFnByTypeId(i))},getByteLength:{value:ip(Eo.getVisitFnByTypeId(i))}})}return"Vector"})(Yt.prototype);class W1 extends Yt{constructor(e){super(e.data);const i=this.get,n=this.set,s=this.slice,a=new Array(this.length);Object.defineProperty(this,"get",{value(c){const d=a[c];if(d!==void 0)return d;const f=i.call(this,c);return a[c]=f,f}}),Object.defineProperty(this,"set",{value(c,d){n.call(this,c,d),a[c]=d}}),Object.defineProperty(this,"slice",{value:(c,d)=>new W1(s.call(this,c,d))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new Yt(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}class xk{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(e,i,n,s){return e.prep(8,24),e.writeInt64(s),e.pad(4),e.writeInt32(n),e.writeInt64(i),e.offset()}}const fB=2,Xa=4,ul=4,ci=4,hc=new Int32Array(2),x4=new Float32Array(hc.buffer),B4=new Float64Array(hc.buffer),a0=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;let El=class Bk{constructor(e,i){this.low=e|0,this.high=i|0}static create(e,i){return e==0&&i==0?Bk.ZERO:new Bk(e,i)}toFloat64(){return(this.low>>>0)+this.high*4294967296}equals(e){return this.low==e.low&&this.high==e.high}};El.ZERO=new El(0,0);var Ik;(function(t){t[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING"})(Ik||(Ik={}));let Rp=class pG{constructor(e){this.bytes_=e,this.position_=0}static allocate(e){return new pG(new Uint8Array(e))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(e){this.position_=e}capacity(){return this.bytes_.length}readInt8(e){return this.readUint8(e)<<24>>24}readUint8(e){return this.bytes_[e]}readInt16(e){return this.readUint16(e)<<16>>16}readUint16(e){return this.bytes_[e]|this.bytes_[e+1]<<8}readInt32(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24}readUint32(e){return this.readInt32(e)>>>0}readInt64(e){return new El(this.readInt32(e),this.readInt32(e+4))}readUint64(e){return new El(this.readUint32(e),this.readUint32(e+4))}readFloat32(e){return hc[0]=this.readInt32(e),x4[0]}readFloat64(e){return hc[a0?0:1]=this.readInt32(e),hc[a0?1:0]=this.readInt32(e+4),B4[0]}writeInt8(e,i){this.bytes_[e]=i}writeUint8(e,i){this.bytes_[e]=i}writeInt16(e,i){this.bytes_[e]=i,this.bytes_[e+1]=i>>8}writeUint16(e,i){this.bytes_[e]=i,this.bytes_[e+1]=i>>8}writeInt32(e,i){this.bytes_[e]=i,this.bytes_[e+1]=i>>8,this.bytes_[e+2]=i>>16,this.bytes_[e+3]=i>>24}writeUint32(e,i){this.bytes_[e]=i,this.bytes_[e+1]=i>>8,this.bytes_[e+2]=i>>16,this.bytes_[e+3]=i>>24}writeInt64(e,i){this.writeInt32(e,i.low),this.writeInt32(e+4,i.high)}writeUint64(e,i){this.writeUint32(e,i.low),this.writeUint32(e+4,i.high)}writeFloat32(e,i){x4[0]=i,this.writeInt32(e,hc[0])}writeFloat64(e,i){B4[0]=i,this.writeInt32(e,hc[a0?0:1]),this.writeInt32(e+4,hc[a0?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Xa+ul)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let e="";for(let i=0;i<ul;i++)e+=String.fromCharCode(this.readInt8(this.position_+Xa+i));return e}__offset(e,i){const n=e-this.readInt32(e);return i<this.readInt16(n)?this.readInt16(n+i):0}__union(e,i){return e.bb_pos=i+this.readInt32(i),e.bb=this,e}__string(e,i){e+=this.readInt32(e);const n=this.readInt32(e);let s="",a=0;if(e+=Xa,i===Ik.UTF8_BYTES)return this.bytes_.subarray(e,e+n);for(;a<n;){let c;const d=this.readUint8(e+a++);if(d<192)c=d;else{const f=this.readUint8(e+a++);if(d<224)c=(d&31)<<6|f&63;else{const u=this.readUint8(e+a++);if(d<240)c=(d&15)<<12|(f&63)<<6|u&63;else{const o=this.readUint8(e+a++);c=(d&7)<<18|(f&63)<<12|(u&63)<<6|o&63}}}c<65536?s+=String.fromCharCode(c):(c-=65536,s+=String.fromCharCode((c>>10)+55296,(c&(1<<10)-1)+56320))}return s}__union_with_string(e,i){return typeof e=="string"?this.__string(i):this.__union(e,i)}__indirect(e){return e+this.readInt32(e)}__vector(e){return e+this.readInt32(e)+Xa}__vector_len(e){return this.readInt32(e+this.readInt32(e))}__has_identifier(e){if(e.length!=ul)throw new Error("FlatBuffers: file identifier must be length "+ul);for(let i=0;i<ul;i++)if(e.charCodeAt(i)!=this.readInt8(this.position()+Xa+i))return!1;return!0}createLong(e,i){return El.create(e,i)}createScalarList(e,i){const n=[];for(let s=0;s<i;++s)e(s)!==null&&n.push(e(s));return n}createObjList(e,i){const n=[];for(let s=0;s<i;++s){const a=e(s);a!==null&&n.push(a.unpack())}return n}},_G=class yG{constructor(e){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null;let i;e?i=e:i=1024,this.bb=Rp.allocate(i),this.space=i}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(e){this.force_defaults=e}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(e,i){e>this.minalign&&(this.minalign=e);const n=~(this.bb.capacity()-this.space+i)+1&e-1;for(;this.space<n+e+i;){const s=this.bb.capacity();this.bb=yG.growByteBuffer(this.bb),this.space+=this.bb.capacity()-s}this.pad(n)}pad(e){for(let i=0;i<e;i++)this.bb.writeInt8(--this.space,0)}writeInt8(e){this.bb.writeInt8(this.space-=1,e)}writeInt16(e){this.bb.writeInt16(this.space-=2,e)}writeInt32(e){this.bb.writeInt32(this.space-=4,e)}writeInt64(e){this.bb.writeInt64(this.space-=8,e)}writeFloat32(e){this.bb.writeFloat32(this.space-=4,e)}writeFloat64(e){this.bb.writeFloat64(this.space-=8,e)}addInt8(e){this.prep(1,0),this.writeInt8(e)}addInt16(e){this.prep(2,0),this.writeInt16(e)}addInt32(e){this.prep(4,0),this.writeInt32(e)}addInt64(e){this.prep(8,0),this.writeInt64(e)}addFloat32(e){this.prep(4,0),this.writeFloat32(e)}addFloat64(e){this.prep(8,0),this.writeFloat64(e)}addFieldInt8(e,i,n){(this.force_defaults||i!=n)&&(this.addInt8(i),this.slot(e))}addFieldInt16(e,i,n){(this.force_defaults||i!=n)&&(this.addInt16(i),this.slot(e))}addFieldInt32(e,i,n){(this.force_defaults||i!=n)&&(this.addInt32(i),this.slot(e))}addFieldInt64(e,i,n){(this.force_defaults||!i.equals(n))&&(this.addInt64(i),this.slot(e))}addFieldFloat32(e,i,n){(this.force_defaults||i!=n)&&(this.addFloat32(i),this.slot(e))}addFieldFloat64(e,i,n){(this.force_defaults||i!=n)&&(this.addFloat64(i),this.slot(e))}addFieldOffset(e,i,n){(this.force_defaults||i!=n)&&(this.addOffset(i),this.slot(e))}addFieldStruct(e,i,n){i!=n&&(this.nested(i),this.slot(e))}nested(e){if(e!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(e){this.vtable!==null&&(this.vtable[e]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(e){const i=e.capacity();if(i&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const n=i<<1,s=Rp.allocate(n);return s.setPosition(n-i),s.bytes().set(e.bytes(),n-i),s}addOffset(e){this.prep(Xa,0),this.writeInt32(this.offset()-e+Xa)}startObject(e){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=e;for(let i=0;i<e;i++)this.vtable[i]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const e=this.offset();let i=this.vtable_in_use-1;for(;i>=0&&this.vtable[i]==0;i--);const n=i+1;for(;i>=0;i--)this.addInt16(this.vtable[i]!=0?e-this.vtable[i]:0);const s=2;this.addInt16(e-this.object_start);const a=(n+s)*fB;this.addInt16(a);let c=0;const d=this.space;e:for(i=0;i<this.vtables.length;i++){const f=this.bb.capacity()-this.vtables[i];if(a==this.bb.readInt16(f)){for(let u=fB;u<a;u+=fB)if(this.bb.readInt16(d+u)!=this.bb.readInt16(f+u))continue e;c=this.vtables[i];break}}return c?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,c-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e}finish(e,i,n){const s=n?ci:0;if(i){const a=i;if(this.prep(this.minalign,Xa+ul+s),a.length!=ul)throw new Error("FlatBuffers: file identifier must be length "+ul);for(let c=ul-1;c>=0;c--)this.writeInt8(a.charCodeAt(c))}this.prep(this.minalign,Xa+s),this.addOffset(e),s&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(e,i){this.finish(e,i,!0)}requiredField(e,i){const n=this.bb.capacity()-e,s=n-this.bb.readInt32(n);if(!(this.bb.readInt16(s+i)!=0))throw new Error("FlatBuffers: field "+i+" must be set")}startVector(e,i,n){this.notNested(),this.vector_num_elems=i,this.prep(Xa,e*i),this.prep(n,e*i)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(e){if(!e)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(e))return this.string_maps.get(e);const i=this.createString(e);return this.string_maps.set(e,i),i}createString(e){if(!e)return 0;let i;if(e instanceof Uint8Array)i=e;else{i=[];let n=0;for(;n<e.length;){let s;const a=e.charCodeAt(n++);if(a<55296||a>=56320)s=a;else{const c=e.charCodeAt(n++);s=(a<<10)+c+(65536-(55296<<10)-56320)}s<128?i.push(s):(s<2048?i.push(s>>6&31|192):(s<65536?i.push(s>>12&15|224):i.push(s>>18&7|240,s>>12&63|128),i.push(s>>6&63|128)),i.push(s&63|128))}}this.addInt8(0),this.startVector(1,i.length,1),this.bb.setPosition(this.space-=i.length);for(let n=0,s=this.space,a=this.bb.bytes();n<i.length;n++)a[s++]=i[n];return this.endVector()}createLong(e,i){return El.create(e,i)}createObjectOffset(e){return e===null?0:typeof e=="string"?this.createString(e):e.pack(this)}createObjectOffsetList(e){const i=[];for(let n=0;n<e.length;++n){const s=e[n];if(s!==null)i.push(this.createObjectOffset(s));else throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return i}createStructOffsetList(e,i){return i(this,e.length),this.createObjectOffsetList(e),this.endVector()}};class ji{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsKeyValue(e,i){return(i||new ji).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsKeyValue(e,i){return e.setPosition(e.position()+ci),(i||new ji).__init(e.readInt32(e.position())+e.position(),e)}key(e){const i=this.bb.__offset(this.bb_pos,4);return i?this.bb.__string(this.bb_pos+i,e):null}value(e){const i=this.bb.__offset(this.bb_pos,6);return i?this.bb.__string(this.bb_pos+i,e):null}static startKeyValue(e){e.startObject(2)}static addKey(e,i){e.addFieldOffset(0,i,0)}static addValue(e,i){e.addFieldOffset(1,i,0)}static endKeyValue(e){return e.endObject()}static createKeyValue(e,i,n){return ji.startKeyValue(e),ji.addKey(e,i),ji.addValue(e,n),ji.endKeyValue(e)}}var Lp;(function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"})(Lp||(Lp={}));var Dp;(function(t){t[t.Little=0]="Little",t[t.Big=1]="Big"})(Dp||(Dp={}));var H1;(function(t){t[t.DenseArray=0]="DenseArray"})(H1||(H1={}));class Ys{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsInt(e,i){return(i||new Ys).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInt(e,i){return e.setPosition(e.position()+ci),(i||new Ys).__init(e.readInt32(e.position())+e.position(),e)}bitWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}isSigned(){const e=this.bb.__offset(this.bb_pos,6);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startInt(e){e.startObject(2)}static addBitWidth(e,i){e.addFieldInt32(0,i,0)}static addIsSigned(e,i){e.addFieldInt8(1,+i,0)}static endInt(e){return e.endObject()}static createInt(e,i,n){return Ys.startInt(e),Ys.addBitWidth(e,i),Ys.addIsSigned(e,n),Ys.endInt(e)}}class hl{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsDictionaryEncoding(e,i){return(i||new hl).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryEncoding(e,i){return e.setPosition(e.position()+ci),(i||new hl).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}indexType(e){const i=this.bb.__offset(this.bb_pos,6);return i?(e||new Ys).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}isOrdered(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}dictionaryKind(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt16(this.bb_pos+e):H1.DenseArray}static startDictionaryEncoding(e){e.startObject(4)}static addId(e,i){e.addFieldInt64(0,i,e.createLong(0,0))}static addIndexType(e,i){e.addFieldOffset(1,i,0)}static addIsOrdered(e,i){e.addFieldInt8(2,+i,0)}static addDictionaryKind(e,i){e.addFieldInt16(3,i,H1.DenseArray)}static endDictionaryEncoding(e){return e.endObject()}}class Tf{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsBinary(e,i){return(i||new Tf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBinary(e,i){return e.setPosition(e.position()+ci),(i||new Tf).__init(e.readInt32(e.position())+e.position(),e)}static startBinary(e){e.startObject(0)}static endBinary(e){return e.endObject()}static createBinary(e){return Tf.startBinary(e),Tf.endBinary(e)}}class vf{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsBool(e,i){return(i||new vf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBool(e,i){return e.setPosition(e.position()+ci),(i||new vf).__init(e.readInt32(e.position())+e.position(),e)}static startBool(e){e.startObject(0)}static endBool(e){return e.endObject()}static createBool(e){return vf.startBool(e),vf.endBool(e)}}var Y1;(function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"})(Y1||(Y1={}));let Z0=class xh{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsDate(e,i){return(i||new xh).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDate(e,i){return e.setPosition(e.position()+ci),(i||new xh).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Y1.MILLISECOND}static startDate(e){e.startObject(1)}static addUnit(e,i){e.addFieldInt16(0,i,Y1.MILLISECOND)}static endDate(e){return e.endObject()}static createDate(e,i){return xh.startDate(e),xh.addUnit(e,i),xh.endDate(e)}};class cs{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsDecimal(e,i){return(i||new cs).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDecimal(e,i){return e.setPosition(e.position()+ci),(i||new cs).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}scale(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0}bitWidth(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):128}static startDecimal(e){e.startObject(3)}static addPrecision(e,i){e.addFieldInt32(0,i,0)}static addScale(e,i){e.addFieldInt32(1,i,0)}static addBitWidth(e,i){e.addFieldInt32(2,i,128)}static endDecimal(e){return e.endObject()}static createDecimal(e,i,n,s){return cs.startDecimal(e),cs.addPrecision(e,i),cs.addScale(e,n),cs.addBitWidth(e,s),cs.endDecimal(e)}}var Pp;(function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"})(Pp||(Pp={}));class Ka{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsFixedSizeBinary(e,i){return(i||new Ka).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeBinary(e,i){return e.setPosition(e.position()+ci),(i||new Ka).__init(e.readInt32(e.position())+e.position(),e)}byteWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeBinary(e){e.startObject(1)}static addByteWidth(e,i){e.addFieldInt32(0,i,0)}static endFixedSizeBinary(e){return e.endObject()}static createFixedSizeBinary(e,i){return Ka.startFixedSizeBinary(e),Ka.addByteWidth(e,i),Ka.endFixedSizeBinary(e)}}class Ja{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsFixedSizeList(e,i){return(i||new Ja).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeList(e,i){return e.setPosition(e.position()+ci),(i||new Ja).__init(e.readInt32(e.position())+e.position(),e)}listSize(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeList(e){e.startObject(1)}static addListSize(e,i){e.addFieldInt32(0,i,0)}static endFixedSizeList(e){return e.endObject()}static createFixedSizeList(e,i){return Ja.startFixedSizeList(e),Ja.addListSize(e,i),Ja.endFixedSizeList(e)}}var X1;(function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"})(X1||(X1={}));class Qa{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsFloatingPoint(e,i){return(i||new Qa).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFloatingPoint(e,i){return e.setPosition(e.position()+ci),(i||new Qa).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):X1.HALF}static startFloatingPoint(e){e.startObject(1)}static addPrecision(e,i){e.addFieldInt16(0,i,X1.HALF)}static endFloatingPoint(e){return e.endObject()}static createFloatingPoint(e,i){return Qa.startFloatingPoint(e),Qa.addPrecision(e,i),Qa.endFloatingPoint(e)}}var K1;(function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(K1||(K1={}));class Za{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsInterval(e,i){return(i||new Za).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInterval(e,i){return e.setPosition(e.position()+ci),(i||new Za).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):K1.YEAR_MONTH}static startInterval(e){e.startObject(1)}static addUnit(e,i){e.addFieldInt16(0,i,K1.YEAR_MONTH)}static endInterval(e){return e.endObject()}static createInterval(e,i){return Za.startInterval(e),Za.addUnit(e,i),Za.endInterval(e)}}class Ef{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsList(e,i){return(i||new Ef).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsList(e,i){return e.setPosition(e.position()+ci),(i||new Ef).__init(e.readInt32(e.position())+e.position(),e)}static startList(e){e.startObject(0)}static endList(e){return e.endObject()}static createList(e){return Ef.startList(e),Ef.endList(e)}}let eT=class Bh{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsMap(e,i){return(i||new Bh).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMap(e,i){return e.setPosition(e.position()+ci),(i||new Bh).__init(e.readInt32(e.position())+e.position(),e)}keysSorted(){const e=this.bb.__offset(this.bb_pos,4);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startMap(e){e.startObject(1)}static addKeysSorted(e,i){e.addFieldInt8(0,+i,0)}static endMap(e){return e.endObject()}static createMap(e,i){return Bh.startMap(e),Bh.addKeysSorted(e,i),Bh.endMap(e)}};class Sf{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsNull(e,i){return(i||new Sf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsNull(e,i){return e.setPosition(e.position()+ci),(i||new Sf).__init(e.readInt32(e.position())+e.position(),e)}static startNull(e){e.startObject(0)}static endNull(e){return e.endObject()}static createNull(e){return Sf.startNull(e),Sf.endNull(e)}}class xf{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsStruct_(e,i){return(i||new xf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsStruct_(e,i){return e.setPosition(e.position()+ci),(i||new xf).__init(e.readInt32(e.position())+e.position(),e)}static startStruct_(e){e.startObject(0)}static endStruct_(e){return e.endObject()}static createStruct_(e){return xf.startStruct_(e),xf.endStruct_(e)}}let Ry=class of{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsTime(e,i){return(i||new of).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTime(e,i){return e.setPosition(e.position()+ci),(i||new of).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Pp.MILLISECOND}bitWidth(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):32}static startTime(e){e.startObject(2)}static addUnit(e,i){e.addFieldInt16(0,i,Pp.MILLISECOND)}static addBitWidth(e,i){e.addFieldInt32(1,i,32)}static endTime(e){return e.endObject()}static createTime(e,i,n){return of.startTime(e),of.addUnit(e,i),of.addBitWidth(e,n),of.endTime(e)}};class _r{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsTimestamp(e,i){return(i||new _r).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTimestamp(e,i){return e.setPosition(e.position()+ci),(i||new _r).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Pp.SECOND}timezone(e){const i=this.bb.__offset(this.bb_pos,6);return i?this.bb.__string(this.bb_pos+i,e):null}static startTimestamp(e){e.startObject(2)}static addUnit(e,i){e.addFieldInt16(0,i,Pp.SECOND)}static addTimezone(e,i){e.addFieldOffset(1,i,0)}static endTimestamp(e){return e.endObject()}static createTimestamp(e,i,n){return _r.startTimestamp(e),_r.addUnit(e,i),_r.addTimezone(e,n),_r.endTimestamp(e)}}var J1;(function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"})(J1||(J1={}));let lf=class cf{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsUnion(e,i){return(i||new cf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUnion(e,i){return e.setPosition(e.position()+ci),(i||new cf).__init(e.readInt32(e.position())+e.position(),e)}mode(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):J1.Sparse}typeIds(e){const i=this.bb.__offset(this.bb_pos,6);return i?this.bb.readInt32(this.bb.__vector(this.bb_pos+i)+e*4):0}typeIdsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}typeIdsArray(){const e=this.bb.__offset(this.bb_pos,6);return e?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}static startUnion(e){e.startObject(2)}static addMode(e,i){e.addFieldInt16(0,i,J1.Sparse)}static addTypeIds(e,i){e.addFieldOffset(1,i,0)}static createTypeIdsVector(e,i){e.startVector(4,i.length,4);for(let n=i.length-1;n>=0;n--)e.addInt32(i[n]);return e.endVector()}static startTypeIdsVector(e,i){e.startVector(4,i,4)}static endUnion(e){return e.endObject()}static createUnion(e,i,n){return cf.startUnion(e),cf.addMode(e,i),cf.addTypeIds(e,n),cf.endUnion(e)}};class Bf{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsUtf8(e,i){return(i||new Bf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUtf8(e,i){return e.setPosition(e.position()+ci),(i||new Bf).__init(e.readInt32(e.position())+e.position(),e)}static startUtf8(e){e.startObject(0)}static endUtf8(e){return e.endObject()}static createUtf8(e){return Bf.startUtf8(e),Bf.endUtf8(e)}}var vi;(function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.FloatingPoint=3]="FloatingPoint",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct_=13]="Struct_",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Duration=18]="Duration",t[t.LargeBinary=19]="LargeBinary",t[t.LargeUtf8=20]="LargeUtf8",t[t.LargeList=21]="LargeList"})(vi||(vi={}));let hr=class tT{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsField(e,i){return(i||new tT).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsField(e,i){return e.setPosition(e.position()+ci),(i||new tT).__init(e.readInt32(e.position())+e.position(),e)}name(e){const i=this.bb.__offset(this.bb_pos,4);return i?this.bb.__string(this.bb_pos+i,e):null}nullable(){const e=this.bb.__offset(this.bb_pos,6);return e?!!this.bb.readInt8(this.bb_pos+e):!1}typeType(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):vi.NONE}type(e){const i=this.bb.__offset(this.bb_pos,10);return i?this.bb.__union(e,this.bb_pos+i):null}dictionary(e){const i=this.bb.__offset(this.bb_pos,12);return i?(e||new hl).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}children(e,i){const n=this.bb.__offset(this.bb_pos,14);return n?(i||new tT).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+e*4),this.bb):null}childrenLength(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,i){const n=this.bb.__offset(this.bb_pos,16);return n?(i||new ji).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__vector_len(this.bb_pos+e):0}static startField(e){e.startObject(7)}static addName(e,i){e.addFieldOffset(0,i,0)}static addNullable(e,i){e.addFieldInt8(1,+i,0)}static addTypeType(e,i){e.addFieldInt8(2,i,vi.NONE)}static addType(e,i){e.addFieldOffset(3,i,0)}static addDictionary(e,i){e.addFieldOffset(4,i,0)}static addChildren(e,i){e.addFieldOffset(5,i,0)}static createChildrenVector(e,i){e.startVector(4,i.length,4);for(let n=i.length-1;n>=0;n--)e.addOffset(i[n]);return e.endVector()}static startChildrenVector(e,i){e.startVector(4,i,4)}static addCustomMetadata(e,i){e.addFieldOffset(6,i,0)}static createCustomMetadataVector(e,i){e.startVector(4,i.length,4);for(let n=i.length-1;n>=0;n--)e.addOffset(i[n]);return e.endVector()}static startCustomMetadataVector(e,i){e.startVector(4,i,4)}static endField(e){return e.endObject()}},Da=class el{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsSchema(e,i){return(i||new el).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSchema(e,i){return e.setPosition(e.position()+ci),(i||new el).__init(e.readInt32(e.position())+e.position(),e)}endianness(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Dp.Little}fields(e,i){const n=this.bb.__offset(this.bb_pos,6);return n?(i||new hr).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+e*4),this.bb):null}fieldsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,i){const n=this.bb.__offset(this.bb_pos,8);return n?(i||new ji).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}features(e){const i=this.bb.__offset(this.bb_pos,10);return i?this.bb.readInt64(this.bb.__vector(this.bb_pos+i)+e*8):this.bb.createLong(0,0)}featuresLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}static startSchema(e){e.startObject(4)}static addEndianness(e,i){e.addFieldInt16(0,i,Dp.Little)}static addFields(e,i){e.addFieldOffset(1,i,0)}static createFieldsVector(e,i){e.startVector(4,i.length,4);for(let n=i.length-1;n>=0;n--)e.addOffset(i[n]);return e.endVector()}static startFieldsVector(e,i){e.startVector(4,i,4)}static addCustomMetadata(e,i){e.addFieldOffset(2,i,0)}static createCustomMetadataVector(e,i){e.startVector(4,i.length,4);for(let n=i.length-1;n>=0;n--)e.addOffset(i[n]);return e.endVector()}static startCustomMetadataVector(e,i){e.startVector(4,i,4)}static addFeatures(e,i){e.addFieldOffset(3,i,0)}static createFeaturesVector(e,i){e.startVector(8,i.length,8);for(let n=i.length-1;n>=0;n--)e.addInt64(i[n]);return e.endVector()}static startFeaturesVector(e,i){e.startVector(8,i,8)}static endSchema(e){return e.endObject()}static finishSchemaBuffer(e,i){e.finish(i)}static finishSizePrefixedSchemaBuffer(e,i){e.finish(i,void 0,!0)}static createSchema(e,i,n,s,a){return el.startSchema(e),el.addEndianness(e,i),el.addFields(e,n),el.addCustomMetadata(e,s),el.addFeatures(e,a),el.endSchema(e)}};class qs{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsFooter(e,i){return(i||new qs).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFooter(e,i){return e.setPosition(e.position()+ci),(i||new qs).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Lp.V1}schema(e){const i=this.bb.__offset(this.bb_pos,6);return i?(e||new Da).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}dictionaries(e,i){const n=this.bb.__offset(this.bb_pos,8);return n?(i||new xk).__init(this.bb.__vector(this.bb_pos+n)+e*24,this.bb):null}dictionariesLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}recordBatches(e,i){const n=this.bb.__offset(this.bb_pos,10);return n?(i||new xk).__init(this.bb.__vector(this.bb_pos+n)+e*24,this.bb):null}recordBatchesLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,i){const n=this.bb.__offset(this.bb_pos,12);return n?(i||new ji).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startFooter(e){e.startObject(5)}static addVersion(e,i){e.addFieldInt16(0,i,Lp.V1)}static addSchema(e,i){e.addFieldOffset(1,i,0)}static addDictionaries(e,i){e.addFieldOffset(2,i,0)}static startDictionariesVector(e,i){e.startVector(24,i,8)}static addRecordBatches(e,i){e.addFieldOffset(3,i,0)}static startRecordBatchesVector(e,i){e.startVector(24,i,8)}static addCustomMetadata(e,i){e.addFieldOffset(4,i,0)}static createCustomMetadataVector(e,i){e.startVector(4,i.length,4);for(let n=i.length-1;n>=0;n--)e.addOffset(i[n]);return e.endVector()}static startCustomMetadataVector(e,i){e.startVector(4,i,4)}static endFooter(e){return e.endObject()}static finishFooterBuffer(e,i){e.finish(i)}static finishSizePrefixedFooterBuffer(e,i){e.finish(i,void 0,!0)}}class Xt{constructor(e=[],i,n){this.fields=e||[],this.metadata=i||new Map,n||(n=Fk(e)),this.dictionaries=n}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(e=>e.name)}toString(){return`Schema<{ ${this.fields.map((e,i)=>`${i}: ${e}`).join(", ")} }>`}select(e){const i=new Set(e),n=this.fields.filter(s=>i.has(s.name));return new Xt(n,this.metadata)}selectAt(e){const i=e.map(n=>this.fields[n]).filter(Boolean);return new Xt(i,this.metadata)}assign(...e){const i=e[0]instanceof Xt?e[0]:Array.isArray(e[0])?new Xt(e[0]):new Xt(e),n=[...this.fields],s=o0(o0(new Map,this.metadata),i.metadata),a=i.fields.filter(d=>{const f=n.findIndex(u=>u.name===d.name);return~f?(n[f]=d.clone({metadata:o0(o0(new Map,n[f].metadata),d.metadata)}))&&!1:!0}),c=Fk(a,new Map);return new Xt([...n,...a],s,new Map([...this.dictionaries,...c]))}}Xt.prototype.fields=null;Xt.prototype.metadata=null;Xt.prototype.dictionaries=null;let Mi=class kk{constructor(e,i,n=!1,s){this.name=e,this.type=i,this.nullable=n,this.metadata=s||new Map}static new(...e){let[i,n,s,a]=e;return e[0]&&typeof e[0]=="object"&&({name:i}=e[0],n===void 0&&(n=e[0].type),s===void 0&&(s=e[0].nullable),a===void 0&&(a=e[0].metadata)),new kk(`${i}`,n,s,a)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...e){let[i,n,s,a]=e;return!e[0]||typeof e[0]!="object"?[i=this.name,n=this.type,s=this.nullable,a=this.metadata]=e:{name:i=this.name,type:n=this.type,nullable:s=this.nullable,metadata:a=this.metadata}=e[0],kk.new(i,n,s,a)}};Mi.prototype.type=null;Mi.prototype.name=null;Mi.prototype.nullable=null;Mi.prototype.metadata=null;function o0(t,e){return new Map([...t||new Map,...e||new Map])}function Fk(t,e=new Map){for(let i=-1,n=t.length;++i<n;){const a=t[i].type;if(Ze.isDictionary(a)){if(!e.has(a.id))e.set(a.id,a.dictionary);else if(e.get(a.id)!==a.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}a.children&&a.children.length>0&&Fk(a.children,e)}return e}var I4=El,Jue=_G,Que=Rp;class zg{constructor(e,i=Xs.V4,n,s){this.schema=e,this.version=i,n&&(this._recordBatches=n),s&&(this._dictionaryBatches=s)}static decode(e){e=new Que(jt(e));const i=qs.getRootAsFooter(e),n=Xt.decode(i.schema());return new Zue(n,i)}static encode(e){const i=new Jue,n=Xt.encode(i,e.schema);qs.startRecordBatchesVector(i,e.numRecordBatches);for(const c of[...e.recordBatches()].slice().reverse())Yc.encode(i,c);const s=i.endVector();qs.startDictionariesVector(i,e.numDictionaries);for(const c of[...e.dictionaryBatches()].slice().reverse())Yc.encode(i,c);const a=i.endVector();return qs.startFooter(i),qs.addSchema(i,n),qs.addVersion(i,Xs.V4),qs.addRecordBatches(i,s),qs.addDictionaries(i,a),qs.finishFooterBuffer(i,qs.endFooter(i)),i.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let e,i=-1,n=this.numRecordBatches;++i<n;)(e=this.getRecordBatch(i))&&(yield e)}*dictionaryBatches(){for(let e,i=-1,n=this.numDictionaries;++i<n;)(e=this.getDictionaryBatch(i))&&(yield e)}getRecordBatch(e){return e>=0&&e<this.numRecordBatches&&this._recordBatches[e]||null}getDictionaryBatch(e){return e>=0&&e<this.numDictionaries&&this._dictionaryBatches[e]||null}}class Zue extends zg{constructor(e,i){super(e,i.version()),this._footer=i}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(e){if(e>=0&&e<this.numRecordBatches){const i=this._footer.recordBatches(e);if(i)return Yc.decode(i)}return null}getDictionaryBatch(e){if(e>=0&&e<this.numDictionaries){const i=this._footer.dictionaries(e);if(i)return Yc.decode(i)}return null}}class Yc{constructor(e,i,n){this.metaDataLength=e,this.offset=typeof n=="number"?n:n.low,this.bodyLength=typeof i=="number"?i:i.low}static decode(e){return new Yc(e.metaDataLength(),e.bodyLength(),e.offset())}static encode(e,i){const{metaDataLength:n}=i,s=new I4(i.offset,0),a=new I4(i.bodyLength,0);return xk.createBlock(e,s,n,a)}}const xi=Object.freeze({done:!0,value:void 0});class k4{constructor(e){this._json=e}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class WA{tee(){return this._getDOMStream().tee()}pipe(e,i){return this._getNodeStream().pipe(e,i)}pipeTo(e,i){return this._getDOMStream().pipeTo(e,i)}pipeThrough(e,i){return this._getDOMStream().pipeThrough(e,i)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class ehe extends WA{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(e=>this._closedPromiseResolve=e)}get closed(){return this._closedPromise}cancel(e){return ye(this,void 0,void 0,function*(){yield this.return(e)})}write(e){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(e):this.resolvers.shift().resolve({done:!1,value:e}))}abort(e){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:e}:this.resolvers.shift().reject({done:!0,value:e}))}close(){if(this._closedPromiseResolve){const{resolvers:e}=this;for(;e.length>0;)e.shift().resolve(xi);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(e){return pr.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,e)}toNodeStream(e){return pr.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,e)}throw(e){return ye(this,void 0,void 0,function*(){return yield this.abort(e),xi})}return(e){return ye(this,void 0,void 0,function*(){return yield this.close(),xi})}read(e){return ye(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return ye(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(...e){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((i,n)=>{this.resolvers.push({resolve:i,reject:n})}):Promise.resolve(xi)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class iT extends ehe{write(e){if((e=jt(e)).byteLength>0)return super.write(e)}toString(e=!1){return e?bk(this.toUint8Array(!0)):this.toUint8Array(!1).then(bk)}toUint8Array(e=!1){return e?vo(this._values)[0]:(()=>ye(this,void 0,void 0,function*(){var i,n;const s=[];let a=0;try{for(var c=Qn(this),d;d=yield c.next(),!d.done;){const f=d.value;s.push(f),a+=f.byteLength}}catch(f){i={error:f}}finally{try{d&&!d.done&&(n=c.return)&&(yield n.call(c))}finally{if(i)throw i.error}}return vo(s,a)[0]}))()}}class Q1{constructor(e){e&&(this.source=new the(pr.fromIterable(e)))}[Symbol.iterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class $p{constructor(e){e instanceof $p?this.source=e.source:e instanceof iT?this.source=new Rd(pr.fromAsyncIterable(e)):Q7(e)?this.source=new Rd(pr.fromNodeStream(e)):OA(e)?this.source=new Rd(pr.fromDOMStream(e)):J7(e)?this.source=new Rd(pr.fromDOMStream(e.body)):$m(e)?this.source=new Rd(pr.fromIterable(e)):Kf(e)?this.source=new Rd(pr.fromAsyncIterable(e)):m_(e)&&(this.source=new Rd(pr.fromAsyncIterable(e)))}[Symbol.asyncIterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}get closed(){return this.source.closed}cancel(e){return this.source.cancel(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class the{constructor(e){this.source=e}cancel(e){this.return(e)}peek(e){return this.next(e,"peek").value}read(e){return this.next(e,"read").value}next(e,i="read"){return this.source.next({cmd:i,size:e})}throw(e){return Object.create(this.source.throw&&this.source.throw(e)||xi)}return(e){return Object.create(this.source.return&&this.source.return(e)||xi)}}class Rd{constructor(e){this.source=e,this._closedPromise=new Promise(i=>this._closedPromiseResolve=i)}cancel(e){return ye(this,void 0,void 0,function*(){yield this.return(e)})}get closed(){return this._closedPromise}read(e){return ye(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return ye(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(e,i="read"){return ye(this,void 0,void 0,function*(){return yield this.source.next({cmd:i,size:e})})}throw(e){return ye(this,void 0,void 0,function*(){const i=this.source.throw&&(yield this.source.throw(e))||xi;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(i)})}return(e){return ye(this,void 0,void 0,function*(){const i=this.source.return&&(yield this.source.return(e))||xi;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(i)})}}class F4 extends Q1{constructor(e,i){super(),this.position=0,this.buffer=jt(e),this.size=typeof i>"u"?this.buffer.byteLength:i}readInt32(e){const{buffer:i,byteOffset:n}=this.readAt(e,4);return new DataView(i,n).getInt32(0,!0)}seek(e){return this.position=Math.min(e,this.size),e<this.size}read(e){const{buffer:i,size:n,position:s}=this;return i&&s<n?(typeof e!="number"&&(e=Number.POSITIVE_INFINITY),this.position=Math.min(n,s+Math.min(n-s,e)),i.subarray(s,this.position)):null}readAt(e,i){const n=this.buffer,s=Math.min(this.size,e+i);return n?n.subarray(e,s):new Uint8Array(i)}close(){this.buffer&&(this.buffer=null)}throw(e){return this.close(),{done:!0,value:e}}return(e){return this.close(),{done:!0,value:e}}}class Z1 extends $p{constructor(e,i){super(),this.position=0,this._handle=e,typeof i=="number"?this.size=i:this._pending=(()=>ye(this,void 0,void 0,function*(){this.size=(yield e.stat()).size,delete this._pending}))()}readInt32(e){return ye(this,void 0,void 0,function*(){const{buffer:i,byteOffset:n}=yield this.readAt(e,4);return new DataView(i,n).getInt32(0,!0)})}seek(e){return ye(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(e,this.size),e<this.size})}read(e){return ye(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:i,size:n,position:s}=this;if(i&&s<n){typeof e!="number"&&(e=Number.POSITIVE_INFINITY);let a=s,c=0,d=0;const f=Math.min(n,a+Math.min(n-a,e)),u=new Uint8Array(Math.max(0,(this.position=f)-a));for(;(a+=d)<f&&(c+=d)<u.byteLength;)({bytesRead:d}=yield i.read(u,c,u.byteLength-c,a));return u}return null})}readAt(e,i){return ye(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:n,size:s}=this;if(n&&e+i<s){const a=Math.min(s,e+i),c=new Uint8Array(a-e);return(yield n.read(c,0,i,e)).buffer}return new Uint8Array(i)})}close(){return ye(this,void 0,void 0,function*(){const e=this._handle;this._handle=null,e&&(yield e.close())})}throw(e){return ye(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}return(e){return ye(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}}const ihe=1<<16;function Ch(t){return t<0&&(t=4294967295+t+1),`0x${t.toString(16)}`}const Up=8,HA=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class gG{constructor(e){this.buffer=e}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(e){const i=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),n=new Uint32Array([e.buffer[1]>>>16,e.buffer[1]&65535,e.buffer[0]>>>16,e.buffer[0]&65535]);let s=i[3]*n[3];this.buffer[0]=s&65535;let a=s>>>16;return s=i[2]*n[3],a+=s,s=i[3]*n[2]>>>0,a+=s,this.buffer[0]+=a<<16,this.buffer[1]=a>>>0<s?ihe:0,this.buffer[1]+=a>>>16,this.buffer[1]+=i[1]*n[3]+i[2]*n[2]+i[3]*n[1],this.buffer[1]+=i[0]*n[3]+i[1]*n[2]+i[2]*n[1]+i[3]*n[0]<<16,this}_plus(e){const i=this.buffer[0]+e.buffer[0]>>>0;this.buffer[1]+=e.buffer[1],i<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=i}lessThan(e){return this.buffer[1]<e.buffer[1]||this.buffer[1]===e.buffer[1]&&this.buffer[0]<e.buffer[0]}equals(e){return this.buffer[1]===e.buffer[1]&&this.buffer[0]==e.buffer[0]}greaterThan(e){return e.lessThan(this)}hex(){return`${Ch(this.buffer[1])} ${Ch(this.buffer[0])}`}}class Zt extends gG{times(e){return this._times(e),this}plus(e){return this._plus(e),this}static from(e,i=new Uint32Array(2)){return Zt.fromString(typeof e=="string"?e:e.toString(),i)}static fromNumber(e,i=new Uint32Array(2)){return Zt.fromString(e.toString(),i)}static fromString(e,i=new Uint32Array(2)){const n=e.length,s=new Zt(i);for(let a=0;a<n;){const c=Up<n-a?Up:n-a,d=new Zt(new Uint32Array([Number.parseInt(e.slice(a,a+c),10),0])),f=new Zt(new Uint32Array([HA[c],0]));s.times(f),s.plus(d),a+=c}return s}static convertArray(e){const i=new Uint32Array(e.length*2);for(let n=-1,s=e.length;++n<s;)Zt.from(e[n],new Uint32Array(i.buffer,i.byteOffset+2*n*4,2));return i}static multiply(e,i){return new Zt(new Uint32Array(e.buffer)).times(i)}static add(e,i){return new Zt(new Uint32Array(e.buffer)).plus(i)}}class ls extends gG{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(e){return this._times(e),this}plus(e){return this._plus(e),this}lessThan(e){const i=this.buffer[1]<<0,n=e.buffer[1]<<0;return i<n||i===n&&this.buffer[0]<e.buffer[0]}static from(e,i=new Uint32Array(2)){return ls.fromString(typeof e=="string"?e:e.toString(),i)}static fromNumber(e,i=new Uint32Array(2)){return ls.fromString(e.toString(),i)}static fromString(e,i=new Uint32Array(2)){const n=e.startsWith("-"),s=e.length,a=new ls(i);for(let c=n?1:0;c<s;){const d=Up<s-c?Up:s-c,f=new ls(new Uint32Array([Number.parseInt(e.slice(c,c+d),10),0])),u=new ls(new Uint32Array([HA[d],0]));a.times(u),a.plus(f),c+=d}return n?a.negate():a}static convertArray(e){const i=new Uint32Array(e.length*2);for(let n=-1,s=e.length;++n<s;)ls.from(e[n],new Uint32Array(i.buffer,i.byteOffset+2*n*4,2));return i}static multiply(e,i){return new ls(new Uint32Array(e.buffer)).times(i)}static add(e,i){return new ls(new Uint32Array(e.buffer)).plus(i)}}class Pa{constructor(e){this.buffer=e}high(){return new ls(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new ls(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(e){const i=new Zt(new Uint32Array([this.buffer[3],0])),n=new Zt(new Uint32Array([this.buffer[2],0])),s=new Zt(new Uint32Array([this.buffer[1],0])),a=new Zt(new Uint32Array([this.buffer[0],0])),c=new Zt(new Uint32Array([e.buffer[3],0])),d=new Zt(new Uint32Array([e.buffer[2],0])),f=new Zt(new Uint32Array([e.buffer[1],0])),u=new Zt(new Uint32Array([e.buffer[0],0]));let o=Zt.multiply(a,u);this.buffer[0]=o.low();const g=new Zt(new Uint32Array([o.high(),0]));return o=Zt.multiply(s,u),g.plus(o),o=Zt.multiply(a,f),g.plus(o),this.buffer[1]=g.low(),this.buffer[3]=g.lessThan(o)?1:0,this.buffer[2]=g.high(),new Zt(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(Zt.multiply(n,u)).plus(Zt.multiply(s,f)).plus(Zt.multiply(a,d)),this.buffer[3]+=Zt.multiply(i,u).plus(Zt.multiply(n,f)).plus(Zt.multiply(s,d)).plus(Zt.multiply(a,c)).low(),this}plus(e){const i=new Uint32Array(4);return i[3]=this.buffer[3]+e.buffer[3]>>>0,i[2]=this.buffer[2]+e.buffer[2]>>>0,i[1]=this.buffer[1]+e.buffer[1]>>>0,i[0]=this.buffer[0]+e.buffer[0]>>>0,i[0]<this.buffer[0]>>>0&&++i[1],i[1]<this.buffer[1]>>>0&&++i[2],i[2]<this.buffer[2]>>>0&&++i[3],this.buffer[3]=i[3],this.buffer[2]=i[2],this.buffer[1]=i[1],this.buffer[0]=i[0],this}hex(){return`${Ch(this.buffer[3])} ${Ch(this.buffer[2])} ${Ch(this.buffer[1])} ${Ch(this.buffer[0])}`}static multiply(e,i){return new Pa(new Uint32Array(e.buffer)).times(i)}static add(e,i){return new Pa(new Uint32Array(e.buffer)).plus(i)}static from(e,i=new Uint32Array(4)){return Pa.fromString(typeof e=="string"?e:e.toString(),i)}static fromNumber(e,i=new Uint32Array(4)){return Pa.fromString(e.toString(),i)}static fromString(e,i=new Uint32Array(4)){const n=e.startsWith("-"),s=e.length,a=new Pa(i);for(let c=n?1:0;c<s;){const d=Up<s-c?Up:s-c,f=new Pa(new Uint32Array([Number.parseInt(e.slice(c,c+d),10),0,0,0])),u=new Pa(new Uint32Array([HA[d],0,0,0]));a.times(u),a.plus(f),c+=d}return n?a.negate():a}static convertArray(e){const i=new Uint32Array(e.length*4);for(let n=-1,s=e.length;++n<s;)Pa.from(e[n],new Uint32Array(i.buffer,i.byteOffset+4*4*n,4));return i}}class mG extends Nt{constructor(e,i,n,s){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=e,this.nodes=i,this.buffers=n,this.dictionaries=s}visit(e){return super.visit(e instanceof Mi?e.type:e)}visitNull(e,{length:i}=this.nextFieldNode()){return Ft({type:e,length:i})}visitBool(e,{length:i,nullCount:n}=this.nextFieldNode()){return Ft({type:e,length:i,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitInt(e,{length:i,nullCount:n}=this.nextFieldNode()){return Ft({type:e,length:i,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitFloat(e,{length:i,nullCount:n}=this.nextFieldNode()){return Ft({type:e,length:i,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitUtf8(e,{length:i,nullCount:n}=this.nextFieldNode()){return Ft({type:e,length:i,nullCount:n,nullBitmap:this.readNullBitmap(e,n),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitBinary(e,{length:i,nullCount:n}=this.nextFieldNode()){return Ft({type:e,length:i,nullCount:n,nullBitmap:this.readNullBitmap(e,n),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitFixedSizeBinary(e,{length:i,nullCount:n}=this.nextFieldNode()){return Ft({type:e,length:i,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitDate(e,{length:i,nullCount:n}=this.nextFieldNode()){return Ft({type:e,length:i,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitTimestamp(e,{length:i,nullCount:n}=this.nextFieldNode()){return Ft({type:e,length:i,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitTime(e,{length:i,nullCount:n}=this.nextFieldNode()){return Ft({type:e,length:i,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitDecimal(e,{length:i,nullCount:n}=this.nextFieldNode()){return Ft({type:e,length:i,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitList(e,{length:i,nullCount:n}=this.nextFieldNode()){return Ft({type:e,length:i,nullCount:n,nullBitmap:this.readNullBitmap(e,n),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}visitStruct(e,{length:i,nullCount:n}=this.nextFieldNode()){return Ft({type:e,length:i,nullCount:n,nullBitmap:this.readNullBitmap(e,n),children:this.visitMany(e.children)})}visitUnion(e){return e.mode===tr.Sparse?this.visitSparseUnion(e):this.visitDenseUnion(e)}visitDenseUnion(e,{length:i,nullCount:n}=this.nextFieldNode()){return Ft({type:e,length:i,nullCount:n,nullBitmap:this.readNullBitmap(e,n),typeIds:this.readTypeIds(e),valueOffsets:this.readOffsets(e),children:this.visitMany(e.children)})}visitSparseUnion(e,{length:i,nullCount:n}=this.nextFieldNode()){return Ft({type:e,length:i,nullCount:n,nullBitmap:this.readNullBitmap(e,n),typeIds:this.readTypeIds(e),children:this.visitMany(e.children)})}visitDictionary(e,{length:i,nullCount:n}=this.nextFieldNode()){return Ft({type:e,length:i,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e.indices),dictionary:this.readDictionary(e)})}visitInterval(e,{length:i,nullCount:n}=this.nextFieldNode()){return Ft({type:e,length:i,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitFixedSizeList(e,{length:i,nullCount:n}=this.nextFieldNode()){return Ft({type:e,length:i,nullCount:n,nullBitmap:this.readNullBitmap(e,n),child:this.visit(e.children[0])})}visitMap(e,{length:i,nullCount:n}=this.nextFieldNode()){return Ft({type:e,length:i,nullCount:n,nullBitmap:this.readNullBitmap(e,n),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(e,i,n=this.nextBufferRange()){return i>0&&this.readData(e,n)||new Uint8Array(0)}readOffsets(e,i){return this.readData(e,i)}readTypeIds(e,i){return this.readData(e,i)}readData(e,{length:i,offset:n}=this.nextBufferRange()){return this.bytes.subarray(n,n+i)}readDictionary(e){return this.dictionaries.get(e.id)}}class nhe extends mG{constructor(e,i,n,s){super(new Uint8Array(0),i,n,s),this.sources=e}readNullBitmap(e,i,{offset:n}=this.nextBufferRange()){return i<=0?new Uint8Array(0):G1(this.sources[n])}readOffsets(e,{offset:i}=this.nextBufferRange()){return ai(Uint8Array,ai(Int32Array,this.sources[i]))}readTypeIds(e,{offset:i}=this.nextBufferRange()){return ai(Uint8Array,ai(e.ArrayType,this.sources[i]))}readData(e,{offset:i}=this.nextBufferRange()){const{sources:n}=this;return Ze.isTimestamp(e)||(Ze.isInt(e)||Ze.isTime(e))&&e.bitWidth===64||Ze.isDate(e)&&e.unit===Cl.MILLISECOND?ai(Uint8Array,ls.convertArray(n[i])):Ze.isDecimal(e)?ai(Uint8Array,Pa.convertArray(n[i])):Ze.isBinary(e)||Ze.isFixedSizeBinary(e)?she(n[i]):Ze.isBool(e)?G1(n[i]):Ze.isUtf8(e)?AA(n[i].join("")):ai(Uint8Array,ai(e.ArrayType,n[i].map(s=>+s)))}}function she(t){const e=t.join(""),i=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2)i[n>>1]=Number.parseInt(e.slice(n,n+2),16);return i}class ot extends Nt{compareSchemas(e,i){return e===i||i instanceof e.constructor&&this.compareManyFields(e.fields,i.fields)}compareManyFields(e,i){return e===i||Array.isArray(e)&&Array.isArray(i)&&e.length===i.length&&e.every((n,s)=>this.compareFields(n,i[s]))}compareFields(e,i){return e===i||i instanceof e.constructor&&e.name===i.name&&e.nullable===i.nullable&&this.visit(e.type,i.type)}}function Ls(t,e){return e instanceof t.constructor}function Um(t,e){return t===e||Ls(t,e)}function jl(t,e){return t===e||Ls(t,e)&&t.bitWidth===e.bitWidth&&t.isSigned===e.isSigned}function qE(t,e){return t===e||Ls(t,e)&&t.precision===e.precision}function rhe(t,e){return t===e||Ls(t,e)&&t.byteWidth===e.byteWidth}function YA(t,e){return t===e||Ls(t,e)&&t.unit===e.unit}function zm(t,e){return t===e||Ls(t,e)&&t.unit===e.unit&&t.timezone===e.timezone}function jm(t,e){return t===e||Ls(t,e)&&t.unit===e.unit&&t.bitWidth===e.bitWidth}function ahe(t,e){return t===e||Ls(t,e)&&t.children.length===e.children.length&&Xc.compareManyFields(t.children,e.children)}function ohe(t,e){return t===e||Ls(t,e)&&t.children.length===e.children.length&&Xc.compareManyFields(t.children,e.children)}function XA(t,e){return t===e||Ls(t,e)&&t.mode===e.mode&&t.typeIds.every((i,n)=>i===e.typeIds[n])&&Xc.compareManyFields(t.children,e.children)}function lhe(t,e){return t===e||Ls(t,e)&&t.id===e.id&&t.isOrdered===e.isOrdered&&Xc.visit(t.indices,e.indices)&&Xc.visit(t.dictionary,e.dictionary)}function KA(t,e){return t===e||Ls(t,e)&&t.unit===e.unit}function che(t,e){return t===e||Ls(t,e)&&t.listSize===e.listSize&&t.children.length===e.children.length&&Xc.compareManyFields(t.children,e.children)}function dhe(t,e){return t===e||Ls(t,e)&&t.keysSorted===e.keysSorted&&t.children.length===e.children.length&&Xc.compareManyFields(t.children,e.children)}ot.prototype.visitNull=Um;ot.prototype.visitBool=Um;ot.prototype.visitInt=jl;ot.prototype.visitInt8=jl;ot.prototype.visitInt16=jl;ot.prototype.visitInt32=jl;ot.prototype.visitInt64=jl;ot.prototype.visitUint8=jl;ot.prototype.visitUint16=jl;ot.prototype.visitUint32=jl;ot.prototype.visitUint64=jl;ot.prototype.visitFloat=qE;ot.prototype.visitFloat16=qE;ot.prototype.visitFloat32=qE;ot.prototype.visitFloat64=qE;ot.prototype.visitUtf8=Um;ot.prototype.visitBinary=Um;ot.prototype.visitFixedSizeBinary=rhe;ot.prototype.visitDate=YA;ot.prototype.visitDateDay=YA;ot.prototype.visitDateMillisecond=YA;ot.prototype.visitTimestamp=zm;ot.prototype.visitTimestampSecond=zm;ot.prototype.visitTimestampMillisecond=zm;ot.prototype.visitTimestampMicrosecond=zm;ot.prototype.visitTimestampNanosecond=zm;ot.prototype.visitTime=jm;ot.prototype.visitTimeSecond=jm;ot.prototype.visitTimeMillisecond=jm;ot.prototype.visitTimeMicrosecond=jm;ot.prototype.visitTimeNanosecond=jm;ot.prototype.visitDecimal=Um;ot.prototype.visitList=ahe;ot.prototype.visitStruct=ohe;ot.prototype.visitUnion=XA;ot.prototype.visitDenseUnion=XA;ot.prototype.visitSparseUnion=XA;ot.prototype.visitDictionary=lhe;ot.prototype.visitInterval=KA;ot.prototype.visitIntervalDayTime=KA;ot.prototype.visitIntervalYearMonth=KA;ot.prototype.visitFixedSizeList=che;ot.prototype.visitMap=dhe;const Xc=new ot;function Mk(t,e){return Xc.compareSchemas(t,e)}function uB(t,e){return fhe(t,e.map(i=>i.data.concat()))}function fhe(t,e){const i=[...t.fields],n=[],s={numBatches:e.reduce((g,w)=>Math.max(g,w.length),0)};let a=0,c=0,d=-1;const f=e.length;let u,o=[];for(;s.numBatches-- >0;){for(c=Number.POSITIVE_INFINITY,d=-1;++d<f;)o[d]=u=e[d].shift(),c=Math.min(c,u?u.length:c);Number.isFinite(c)&&(o=uhe(i,c,o,e,s),c>0&&(n[a++]=Ft({type:new Xn(i),length:c,nullCount:0,children:o.slice()})))}return[t=t.assign(i),n.map(g=>new us(t,g))]}function uhe(t,e,i,n,s){var a;const c=(e+63&-64)>>3;for(let d=-1,f=n.length;++d<f;){const u=i[d],o=u==null?void 0:u.length;if(o>=e)o===e?i[d]=u:(i[d]=u.slice(0,e),s.numBatches=Math.max(s.numBatches,n[d].unshift(u.slice(e,o-e))));else{const g=t[d];t[d]=g.clone({nullable:!0}),i[d]=(a=u==null?void 0:u._changeLengthAndBackfillNullBitmap(e))!==null&&a!==void 0?a:Ft({type:g.type,length:e,nullCount:e,nullBitmap:new Uint8Array(c)})}}return i}var wG;class Hn{constructor(...e){var i,n;if(e.length===0)return this.batches=[],this.schema=new Xt([]),this._offsets=[0],this;let s,a;e[0]instanceof Xt&&(s=e.shift()),e[e.length-1]instanceof Uint32Array&&(a=e.pop());const c=f=>{if(f){if(f instanceof us)return[f];if(f instanceof Hn)return f.batches;if(f instanceof di){if(f.type instanceof Xn)return[new us(new Xt(f.type.children),f)]}else{if(Array.isArray(f))return f.flatMap(u=>c(u));if(typeof f[Symbol.iterator]=="function")return[...f].flatMap(u=>c(u));if(typeof f=="object"){const u=Object.keys(f),o=u.map(m=>new Yt([f[m]])),g=new Xt(u.map((m,l)=>new Mi(String(m),o[l].type))),[,w]=uB(g,o);return w.length===0?[new us(f)]:w}}}return[]},d=e.flatMap(f=>c(f));if(s=(n=s??((i=d[0])===null||i===void 0?void 0:i.schema))!==null&&n!==void 0?n:new Xt([]),!(s instanceof Xt))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const f of d){if(!(f instanceof us))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!Mk(s,f.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=s,this.batches=d,this._offsets=a??sG(this.data)}get data(){return this.batches.map(({data:e})=>e)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((e,i)=>e+i.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=nG(this.data)),this._nullCount}isValid(e){return!1}get(e){return null}set(e,i){}indexOf(e,i){return-1}getByteLength(e){return 0}[Symbol.iterator](){return this.batches.length>0?VA.visit(new Yt(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...e){const i=this.schema,n=this.data.concat(e.flatMap(({data:s})=>s));return new Hn(i,n.map(s=>new us(i,s)))}slice(e,i){const n=this.schema;[e,i]=tG({length:this.numRows},e,i);const s=rG(this.data,this._offsets,e,i);return new Hn(n,s.map(a=>new us(n,a)))}getChild(e){return this.getChildAt(this.schema.fields.findIndex(i=>i.name===e))}getChildAt(e){if(e>-1&&e<this.schema.fields.length){const i=this.data.map(n=>n.children[e]);if(i.length===0){const{type:n}=this.schema.fields[e],s=Ft({type:n,length:0,nullCount:0});i.push(s._changeLengthAndBackfillNullBitmap(this.numRows))}return new Yt(i)}return null}setChild(e,i){var n;return this.setChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(s=>s.name===e),i)}setChildAt(e,i){let n=this.schema,s=[...this.batches];if(e>-1&&e<this.numCols){i||(i=new Yt([Ft({type:new Wc,length:this.numRows})]));const a=n.fields.slice(),c=a[e].clone({type:i.type}),d=this.schema.fields.map((f,u)=>this.getChildAt(u));[a[e],d[e]]=[c,i],[n,s]=uB(n,d)}return new Hn(n,s)}select(e){const i=this.schema.fields.reduce((n,s,a)=>n.set(s.name,a),new Map);return this.selectAt(e.map(n=>i.get(n)).filter(n=>n>-1))}selectAt(e){const i=this.schema.selectAt(e),n=this.batches.map(s=>s.selectAt(e));return new Hn(i,n)}assign(e){const i=this.schema.fields,[n,s]=e.schema.fields.reduce((d,f,u)=>{const[o,g]=d,w=i.findIndex(m=>m.name===f.name);return~w?g[w]=u:o.push(u),d},[[],[]]),a=this.schema.assign(e.schema),c=[...i.map((d,f)=>[f,s[f]]).map(([d,f])=>f===void 0?this.getChildAt(d):e.getChildAt(f)),...n.map(d=>e.getChildAt(d))].filter(Boolean);return new Hn(...uB(a,c))}}wG=Symbol.toStringTag;Hn[wG]=(t=>(t.schema=null,t.batches=[],t._offsets=new Uint32Array([0]),t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,t.isValid=ip(GA),t.get=ip(ks.getVisitFn(Q.Struct)),t.set=aG(Mr.getVisitFn(Q.Struct)),t.indexOf=oG(V1.getVisitFn(Q.Struct)),t.getByteLength=ip(Eo.getVisitFn(Q.Struct)),"Table"))(Hn.prototype);var bG;let us=class Ly{constructor(...e){switch(e.length){case 2:{if([this.schema]=e,!(this.schema instanceof Xt))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=Ft({nullCount:0,type:new Xn(this.schema.fields),children:this.schema.fields.map(i=>Ft({type:i.type,nullCount:0}))})]=e,!(this.data instanceof di))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=M4(this.schema,this.data.children);break}case 1:{const[i]=e,{fields:n,children:s,length:a}=Object.keys(i).reduce((f,u,o)=>(f.children[o]=i[u],f.length=Math.max(f.length,i[u].length),f.fields[o]=Mi.new({name:u,type:i[u].type,nullable:!0}),f),{length:0,fields:new Array,children:new Array}),c=new Xt(n),d=Ft({type:new Xn(n),length:a,children:s,nullCount:0});[this.schema,this.data]=M4(c,d.children,a);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=TG(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(e){return this.data.getValid(e)}get(e){return ks.visit(this.data,e)}set(e,i){return Mr.visit(this.data,e,i)}indexOf(e,i){return V1.visit(this.data,e,i)}getByteLength(e){return Eo.visit(this.data,e)}[Symbol.iterator](){return VA.visit(new Yt([this.data]))}toArray(){return[...this]}concat(...e){return new Hn(this.schema,[this,...e])}slice(e,i){const[n]=new Yt([this.data]).slice(e,i).data;return new Ly(this.schema,n)}getChild(e){var i;return this.getChildAt((i=this.schema.fields)===null||i===void 0?void 0:i.findIndex(n=>n.name===e))}getChildAt(e){return e>-1&&e<this.schema.fields.length?new Yt([this.data.children[e]]):null}setChild(e,i){var n;return this.setChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(s=>s.name===e),i)}setChildAt(e,i){let n=this.schema,s=this.data;if(e>-1&&e<this.numCols){i||(i=new Yt([Ft({type:new Wc,length:this.numRows})]));const a=n.fields.slice(),c=s.children.slice(),d=a[e].clone({type:i.type});[a[e],c[e]]=[d,i.data[0]],n=new Xt(a,new Map(this.schema.metadata)),s=Ft({type:new Xn(a),children:c})}return new Ly(n,s)}select(e){const i=this.schema.select(e),n=new Xn(i.fields),s=[];for(const a of e){const c=this.schema.fields.findIndex(d=>d.name===a);~c&&(s[c]=this.data.children[c])}return new Ly(i,Ft({type:n,length:this.numRows,children:s}))}selectAt(e){const i=this.schema.selectAt(e),n=e.map(a=>this.data.children[a]).filter(Boolean),s=Ft({type:new Xn(i.fields),length:this.numRows,children:n});return new Ly(i,s)}};bG=Symbol.toStringTag;us[bG]=(t=>(t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(us.prototype);function M4(t,e,i=e.reduce((n,s)=>Math.max(n,s.length),0)){var n;const s=[...t.fields],a=[...e],c=(i+63&-64)>>3;for(const[d,f]of t.fields.entries()){const u=e[d];(!u||u.length!==i)&&(s[d]=f.clone({nullable:!0}),a[d]=(n=u==null?void 0:u._changeLengthAndBackfillNullBitmap(i))!==null&&n!==void 0?n:Ft({type:f.type,length:i,nullCount:i,nullBitmap:new Uint8Array(c)}))}return[t.assign(s),Ft({type:new Xn(s),length:i,children:a})]}function TG(t,e,i=new Map){for(let n=-1,s=t.length;++n<s;){const c=t[n].type,d=e[n];if(Ze.isDictionary(c)){if(!i.has(c.id))d.dictionary&&i.set(c.id,d.dictionary);else if(i.get(c.id)!==d.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}c.children&&c.children.length>0&&TG(c.children,d.children,i)}return i}class JA extends us{constructor(e){const i=e.fields.map(s=>Ft({type:s.type})),n=Ft({type:new Xn(e.fields),nullCount:0,children:i});super(e,n)}}var ev;(function(t){t[t.BUFFER=0]="BUFFER"})(ev||(ev={}));var tv;(function(t){t[t.LZ4_FRAME=0]="LZ4_FRAME",t[t.ZSTD=1]="ZSTD"})(tv||(tv={}));class pc{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsBodyCompression(e,i){return(i||new pc).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBodyCompression(e,i){return e.setPosition(e.position()+ci),(i||new pc).__init(e.readInt32(e.position())+e.position(),e)}codec(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb_pos+e):tv.LZ4_FRAME}method(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb_pos+e):ev.BUFFER}static startBodyCompression(e){e.startObject(2)}static addCodec(e,i){e.addFieldInt8(0,i,tv.LZ4_FRAME)}static addMethod(e,i){e.addFieldInt8(1,i,ev.BUFFER)}static endBodyCompression(e){return e.endObject()}static createBodyCompression(e,i,n){return pc.startBodyCompression(e),pc.addCodec(e,i),pc.addMethod(e,n),pc.endBodyCompression(e)}}let vG=class{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(e,i,n){return e.prep(8,16),e.writeInt64(n),e.writeInt64(i),e.offset()}},EG=class{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(e,i,n){return e.prep(8,16),e.writeInt64(n),e.writeInt64(i),e.offset()}},sl=class Ak{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsRecordBatch(e,i){return(i||new Ak).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsRecordBatch(e,i){return e.setPosition(e.position()+ci),(i||new Ak).__init(e.readInt32(e.position())+e.position(),e)}length(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}nodes(e,i){const n=this.bb.__offset(this.bb_pos,6);return n?(i||new EG).__init(this.bb.__vector(this.bb_pos+n)+e*16,this.bb):null}nodesLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}buffers(e,i){const n=this.bb.__offset(this.bb_pos,8);return n?(i||new vG).__init(this.bb.__vector(this.bb_pos+n)+e*16,this.bb):null}buffersLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}compression(e){const i=this.bb.__offset(this.bb_pos,10);return i?(e||new pc).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}static startRecordBatch(e){e.startObject(4)}static addLength(e,i){e.addFieldInt64(0,i,e.createLong(0,0))}static addNodes(e,i){e.addFieldOffset(1,i,0)}static startNodesVector(e,i){e.startVector(16,i,8)}static addBuffers(e,i){e.addFieldOffset(2,i,0)}static startBuffersVector(e,i){e.startVector(16,i,8)}static addCompression(e,i){e.addFieldOffset(3,i,0)}static endRecordBatch(e){return e.endObject()}},Ih=class Ok{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsDictionaryBatch(e,i){return(i||new Ok).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryBatch(e,i){return e.setPosition(e.position()+ci),(i||new Ok).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}data(e){const i=this.bb.__offset(this.bb_pos,6);return i?(e||new sl).__init(this.bb.__indirect(this.bb_pos+i),this.bb):null}isDelta(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startDictionaryBatch(e){e.startObject(3)}static addId(e,i){e.addFieldInt64(0,i,e.createLong(0,0))}static addData(e,i){e.addFieldOffset(1,i,0)}static addIsDelta(e,i){e.addFieldInt8(2,+i,0)}static endDictionaryBatch(e){return e.endObject()}};var iv;(function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"})(iv||(iv={}));let sc=class Na{constructor(){this.bb=null,this.bb_pos=0}__init(e,i){return this.bb_pos=e,this.bb=i,this}static getRootAsMessage(e,i){return(i||new Na).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMessage(e,i){return e.setPosition(e.position()+ci),(i||new Na).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Lp.V1}headerType(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):iv.NONE}header(e){const i=this.bb.__offset(this.bb_pos,8);return i?this.bb.__union(e,this.bb_pos+i):null}bodyLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}customMetadata(e,i){const n=this.bb.__offset(this.bb_pos,12);return n?(i||new ji).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startMessage(e){e.startObject(5)}static addVersion(e,i){e.addFieldInt16(0,i,Lp.V1)}static addHeaderType(e,i){e.addFieldInt8(1,i,iv.NONE)}static addHeader(e,i){e.addFieldOffset(2,i,0)}static addBodyLength(e,i){e.addFieldInt64(3,i,e.createLong(0,0))}static addCustomMetadata(e,i){e.addFieldOffset(4,i,0)}static createCustomMetadataVector(e,i){e.startVector(4,i.length,4);for(let n=i.length-1;n>=0;n--)e.addOffset(i[n]);return e.endVector()}static startCustomMetadataVector(e,i){e.startVector(4,i,4)}static endMessage(e){return e.endObject()}static finishMessageBuffer(e,i){e.finish(i)}static finishSizePrefixedMessageBuffer(e,i){e.finish(i,void 0,!0)}static createMessage(e,i,n,s,a,c){return Na.startMessage(e),Na.addVersion(e,i),Na.addHeaderType(e,n),Na.addHeader(e,s),Na.addBodyLength(e,a),Na.addCustomMetadata(e,c),Na.endMessage(e)}};var hhe=El;class phe extends Nt{visit(e,i){return e==null||i==null?void 0:super.visit(e,i)}visitNull(e,i){return Sf.startNull(i),Sf.endNull(i)}visitInt(e,i){return Ys.startInt(i),Ys.addBitWidth(i,e.bitWidth),Ys.addIsSigned(i,e.isSigned),Ys.endInt(i)}visitFloat(e,i){return Qa.startFloatingPoint(i),Qa.addPrecision(i,e.precision),Qa.endFloatingPoint(i)}visitBinary(e,i){return Tf.startBinary(i),Tf.endBinary(i)}visitBool(e,i){return vf.startBool(i),vf.endBool(i)}visitUtf8(e,i){return Bf.startUtf8(i),Bf.endUtf8(i)}visitDecimal(e,i){return cs.startDecimal(i),cs.addScale(i,e.scale),cs.addPrecision(i,e.precision),cs.addBitWidth(i,e.bitWidth),cs.endDecimal(i)}visitDate(e,i){return Z0.startDate(i),Z0.addUnit(i,e.unit),Z0.endDate(i)}visitTime(e,i){return Ry.startTime(i),Ry.addUnit(i,e.unit),Ry.addBitWidth(i,e.bitWidth),Ry.endTime(i)}visitTimestamp(e,i){const n=e.timezone&&i.createString(e.timezone)||void 0;return _r.startTimestamp(i),_r.addUnit(i,e.unit),n!==void 0&&_r.addTimezone(i,n),_r.endTimestamp(i)}visitInterval(e,i){return Za.startInterval(i),Za.addUnit(i,e.unit),Za.endInterval(i)}visitList(e,i){return Ef.startList(i),Ef.endList(i)}visitStruct(e,i){return xf.startStruct_(i),xf.endStruct_(i)}visitUnion(e,i){lf.startTypeIdsVector(i,e.typeIds.length);const n=lf.createTypeIdsVector(i,e.typeIds);return lf.startUnion(i),lf.addMode(i,e.mode),lf.addTypeIds(i,n),lf.endUnion(i)}visitDictionary(e,i){const n=this.visit(e.indices,i);return hl.startDictionaryEncoding(i),hl.addId(i,new hhe(e.id,0)),hl.addIsOrdered(i,e.isOrdered),n!==void 0&&hl.addIndexType(i,n),hl.endDictionaryEncoding(i)}visitFixedSizeBinary(e,i){return Ka.startFixedSizeBinary(i),Ka.addByteWidth(i,e.byteWidth),Ka.endFixedSizeBinary(i)}visitFixedSizeList(e,i){return Ja.startFixedSizeList(i),Ja.addListSize(i,e.listSize),Ja.endFixedSizeList(i)}visitMap(e,i){return eT.startMap(i),eT.addKeysSorted(i,e.keysSorted),eT.endMap(i)}}const hB=new phe;function _he(t,e=new Map){return new Xt(ghe(t,e),nT(t.customMetadata),e)}function SG(t){return new ir(t.count,xG(t.columns),BG(t.columns))}function yhe(t){return new So(SG(t.data),t.id,t.isDelta)}function ghe(t,e){return(t.fields||[]).filter(Boolean).map(i=>Mi.fromJSON(i,e))}function A4(t,e){return(t.children||[]).filter(Boolean).map(i=>Mi.fromJSON(i,e))}function xG(t){return(t||[]).reduce((e,i)=>[...e,new Mu(i.count,mhe(i.VALIDITY)),...xG(i.children)],[])}function BG(t,e=[]){for(let i=-1,n=(t||[]).length;++i<n;){const s=t[i];s.VALIDITY&&e.push(new no(e.length,s.VALIDITY.length)),s.TYPE&&e.push(new no(e.length,s.TYPE.length)),s.OFFSET&&e.push(new no(e.length,s.OFFSET.length)),s.DATA&&e.push(new no(e.length,s.DATA.length)),e=BG(s.children,e)}return e}function mhe(t){return(t||[]).reduce((e,i)=>e+ +(i===0),0)}function whe(t,e){let i,n,s,a,c,d;return!e||!(a=t.dictionary)?(c=N4(t,A4(t,e)),s=new Mi(t.name,c,t.nullable,nT(t.customMetadata))):e.has(i=a.id)?(n=(n=a.indexType)?O4(n):new Pg,d=new Cp(e.get(i),n,i,a.isOrdered),s=new Mi(t.name,d,t.nullable,nT(t.customMetadata))):(n=(n=a.indexType)?O4(n):new Pg,e.set(i,c=N4(t,A4(t,e))),d=new Cp(c,n,i,a.isOrdered),s=new Mi(t.name,d,t.nullable,nT(t.customMetadata))),s||null}function nT(t){return new Map(Object.entries(t||{}))}function O4(t){return new Hc(t.isSigned,t.bitWidth)}function N4(t,e){const i=t.type.name;switch(i){case"NONE":return new Wc;case"null":return new Wc;case"binary":return new O1;case"utf8":return new N1;case"bool":return new C1;case"list":return new $1((e||[])[0]);case"struct":return new Xn(e||[]);case"struct_":return new Xn(e||[])}switch(i){case"int":{const n=t.type;return new Hc(n.isSigned,n.bitWidth)}case"floatingpoint":{const n=t.type;return new $g(ms[n.precision])}case"decimal":{const n=t.type;return new R1(n.scale,n.precision,n.bitWidth)}case"date":{const n=t.type;return new L1(Cl[n.unit])}case"time":{const n=t.type;return new Ug(qt[n.unit],n.bitWidth)}case"timestamp":{const n=t.type;return new D1(qt[n.unit],n.timezone)}case"interval":{const n=t.type;return new P1(Vc[n.unit])}case"union":{const n=t.type;return new U1(tr[n.mode],n.typeIds||[],e||[])}case"fixedsizebinary":{const n=t.type;return new z1(n.byteWidth)}case"fixedsizelist":{const n=t.type;return new j1(n.listSize,(e||[])[0])}case"map":{const n=t.type;return new q1((e||[])[0],n.keysSorted)}}throw new Error(`Unrecognized type: "${i}"`)}var Jf=El,bhe=_G,The=Rp;class Kn{constructor(e,i,n,s){this._version=i,this._headerType=n,this.body=new Uint8Array(0),s&&(this._createHeader=()=>s),this._bodyLength=typeof e=="number"?e:e.low}static fromJSON(e,i){const n=new Kn(0,Xs.V4,i);return n._createHeader=vhe(e,i),n}static decode(e){e=new The(jt(e));const i=sc.getRootAsMessage(e),n=i.bodyLength(),s=i.version(),a=i.headerType(),c=new Kn(n,s,a);return c._createHeader=Ehe(i,a),c}static encode(e){const i=new bhe;let n=-1;return e.isSchema()?n=Xt.encode(i,e.header()):e.isRecordBatch()?n=ir.encode(i,e.header()):e.isDictionaryBatch()&&(n=So.encode(i,e.header())),sc.startMessage(i),sc.addVersion(i,Xs.V4),sc.addHeader(i,n),sc.addHeaderType(i,e.headerType),sc.addBodyLength(i,new Jf(e.bodyLength,0)),sc.finishMessageBuffer(i,sc.endMessage(i)),i.asUint8Array()}static from(e,i=0){if(e instanceof Xt)return new Kn(0,Xs.V4,Ht.Schema,e);if(e instanceof ir)return new Kn(i,Xs.V4,Ht.RecordBatch,e);if(e instanceof So)return new Kn(i,Xs.V4,Ht.DictionaryBatch,e);throw new Error(`Unrecognized Message header: ${e}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Ht.Schema}isRecordBatch(){return this.headerType===Ht.RecordBatch}isDictionaryBatch(){return this.headerType===Ht.DictionaryBatch}}class ir{constructor(e,i,n){this._nodes=i,this._buffers=n,this._length=typeof e=="number"?e:e.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}}class So{constructor(e,i,n=!1){this._data=e,this._isDelta=n,this._id=typeof i=="number"?i:i.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}}class no{constructor(e,i){this.offset=typeof e=="number"?e:e.low,this.length=typeof i=="number"?i:i.low}}class Mu{constructor(e,i){this.length=typeof e=="number"?e:e.low,this.nullCount=typeof i=="number"?i:i.low}}function vhe(t,e){return()=>{switch(e){case Ht.Schema:return Xt.fromJSON(t);case Ht.RecordBatch:return ir.fromJSON(t);case Ht.DictionaryBatch:return So.fromJSON(t)}throw new Error(`Unrecognized Message type: { name: ${Ht[e]}, type: ${e} }`)}}function Ehe(t,e){return()=>{switch(e){case Ht.Schema:return Xt.decode(t.header(new Da));case Ht.RecordBatch:return ir.decode(t.header(new sl),t.version());case Ht.DictionaryBatch:return So.decode(t.header(new Ih),t.version())}throw new Error(`Unrecognized Message type: { name: ${Ht[e]}, type: ${e} }`)}}Mi.encode=Che;Mi.decode=Ohe;Mi.fromJSON=whe;Xt.encode=Nhe;Xt.decode=She;Xt.fromJSON=_he;ir.encode=Rhe;ir.decode=xhe;ir.fromJSON=SG;So.encode=Lhe;So.decode=Bhe;So.fromJSON=yhe;Mu.encode=Dhe;Mu.decode=khe;no.encode=Phe;no.decode=Ihe;function She(t,e=new Map){const i=Ahe(t,e);return new Xt(i,sT(t),e)}function xhe(t,e=Xs.V4){if(t.compression()!==null)throw new Error("Record batch compression not implemented");return new ir(t.length(),Fhe(t),Mhe(t,e))}function Bhe(t,e=Xs.V4){return new So(ir.decode(t.data(),e),t.id(),t.isDelta())}function Ihe(t){return new no(t.offset(),t.length())}function khe(t){return new Mu(t.length(),t.nullCount())}function Fhe(t){const e=[];for(let i,n=-1,s=-1,a=t.nodesLength();++n<a;)(i=t.nodes(n))&&(e[++s]=Mu.decode(i));return e}function Mhe(t,e){const i=[];for(let n,s=-1,a=-1,c=t.buffersLength();++s<c;)(n=t.buffers(s))&&(e<Xs.V4&&(n.bb_pos+=8*(s+1)),i[++a]=no.decode(n));return i}function Ahe(t,e){const i=[];for(let n,s=-1,a=-1,c=t.fieldsLength();++s<c;)(n=t.fields(s))&&(i[++a]=Mi.decode(n,e));return i}function C4(t,e){const i=[];for(let n,s=-1,a=-1,c=t.childrenLength();++s<c;)(n=t.children(s))&&(i[++a]=Mi.decode(n,e));return i}function Ohe(t,e){let i,n,s,a,c,d;return!e||!(d=t.dictionary())?(s=L4(t,C4(t,e)),n=new Mi(t.name(),s,t.nullable(),sT(t))):e.has(i=d.id().low)?(a=(a=d.indexType())?R4(a):new Pg,c=new Cp(e.get(i),a,i,d.isOrdered()),n=new Mi(t.name(),c,t.nullable(),sT(t))):(a=(a=d.indexType())?R4(a):new Pg,e.set(i,s=L4(t,C4(t,e))),c=new Cp(s,a,i,d.isOrdered()),n=new Mi(t.name(),c,t.nullable(),sT(t))),n||null}function sT(t){const e=new Map;if(t)for(let i,n,s=-1,a=Math.trunc(t.customMetadataLength());++s<a;)(i=t.customMetadata(s))&&(n=i.key())!=null&&e.set(n,i.value());return e}function R4(t){return new Hc(t.isSigned(),t.bitWidth())}function L4(t,e){const i=t.typeType();switch(i){case vi.NONE:return new Wc;case vi.Null:return new Wc;case vi.Binary:return new O1;case vi.Utf8:return new N1;case vi.Bool:return new C1;case vi.List:return new $1((e||[])[0]);case vi.Struct_:return new Xn(e||[])}switch(i){case vi.Int:{const n=t.type(new Ys);return new Hc(n.isSigned(),n.bitWidth())}case vi.FloatingPoint:{const n=t.type(new Qa);return new $g(n.precision())}case vi.Decimal:{const n=t.type(new cs);return new R1(n.scale(),n.precision(),n.bitWidth())}case vi.Date:{const n=t.type(new Z0);return new L1(n.unit())}case vi.Time:{const n=t.type(new Ry);return new Ug(n.unit(),n.bitWidth())}case vi.Timestamp:{const n=t.type(new _r);return new D1(n.unit(),n.timezone())}case vi.Interval:{const n=t.type(new Za);return new P1(n.unit())}case vi.Union:{const n=t.type(new lf);return new U1(n.mode(),n.typeIdsArray()||[],e||[])}case vi.FixedSizeBinary:{const n=t.type(new Ka);return new z1(n.byteWidth())}case vi.FixedSizeList:{const n=t.type(new Ja);return new j1(n.listSize(),(e||[])[0])}case vi.Map:{const n=t.type(new eT);return new q1((e||[])[0],n.keysSorted())}}throw new Error(`Unrecognized type: "${vi[i]}" (${i})`)}function Nhe(t,e){const i=e.fields.map(a=>Mi.encode(t,a));Da.startFieldsVector(t,i.length);const n=Da.createFieldsVector(t,i),s=e.metadata&&e.metadata.size>0?Da.createCustomMetadataVector(t,[...e.metadata].map(([a,c])=>{const d=t.createString(`${a}`),f=t.createString(`${c}`);return ji.startKeyValue(t),ji.addKey(t,d),ji.addValue(t,f),ji.endKeyValue(t)})):-1;return Da.startSchema(t),Da.addFields(t,n),Da.addEndianness(t,$he?Dp.Little:Dp.Big),s!==-1&&Da.addCustomMetadata(t,s),Da.endSchema(t)}function Che(t,e){let i=-1,n=-1,s=-1;const a=e.type;let c=e.typeId;Ze.isDictionary(a)?(c=a.dictionary.typeId,s=hB.visit(a,t),n=hB.visit(a.dictionary,t)):n=hB.visit(a,t);const d=(a.children||[]).map(o=>Mi.encode(t,o)),f=hr.createChildrenVector(t,d),u=e.metadata&&e.metadata.size>0?hr.createCustomMetadataVector(t,[...e.metadata].map(([o,g])=>{const w=t.createString(`${o}`),m=t.createString(`${g}`);return ji.startKeyValue(t),ji.addKey(t,w),ji.addValue(t,m),ji.endKeyValue(t)})):-1;return e.name&&(i=t.createString(e.name)),hr.startField(t),hr.addType(t,n),hr.addTypeType(t,c),hr.addChildren(t,f),hr.addNullable(t,!!e.nullable),i!==-1&&hr.addName(t,i),s!==-1&&hr.addDictionary(t,s),u!==-1&&hr.addCustomMetadata(t,u),hr.endField(t)}function Rhe(t,e){const i=e.nodes||[],n=e.buffers||[];sl.startNodesVector(t,i.length);for(const c of i.slice().reverse())Mu.encode(t,c);const s=t.endVector();sl.startBuffersVector(t,n.length);for(const c of n.slice().reverse())no.encode(t,c);const a=t.endVector();return sl.startRecordBatch(t),sl.addLength(t,new Jf(e.length,0)),sl.addNodes(t,s),sl.addBuffers(t,a),sl.endRecordBatch(t)}function Lhe(t,e){const i=ir.encode(t,e.data);return Ih.startDictionaryBatch(t),Ih.addId(t,new Jf(e.id,0)),Ih.addIsDelta(t,e.isDelta),Ih.addData(t,i),Ih.endDictionaryBatch(t)}function Dhe(t,e){return EG.createFieldNode(t,new Jf(e.length,0),new Jf(e.nullCount,0))}function Phe(t,e){return vG.createBuffer(t,new Jf(e.offset,0),new Jf(e.length,0))}const $he=(()=>{const t=new ArrayBuffer(2);return new DataView(t).setInt16(0,256,!0),new Int16Array(t)[0]===256})(),QA=t=>`Expected ${Ht[t]} Message in stream, but was null or length 0.`,ZA=t=>`Header pointer of flatbuffer-encoded ${Ht[t]} Message is null or length 0.`,IG=(t,e)=>`Expected to read ${t} metadata bytes, but only read ${e}.`,kG=(t,e)=>`Expected to read ${t} bytes for message body, but only read ${e}.`;class FG{constructor(e){this.source=e instanceof Q1?e:new Q1(e)}[Symbol.iterator](){return this}next(){let e;return(e=this.readMetadataLength()).done||e.value===-1&&(e=this.readMetadataLength()).done||(e=this.readMetadata(e.value)).done?xi:e}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}readMessage(e){let i;if((i=this.next()).done)return null;if(e!=null&&i.value.headerType!==e)throw new Error(QA(e));return i.value}readMessageBody(e){if(e<=0)return new Uint8Array(0);const i=jt(this.source.read(e));if(i.byteLength<e)throw new Error(kG(e,i.byteLength));return i.byteOffset%8===0&&i.byteOffset+i.byteLength<=i.buffer.byteLength?i:i.slice()}readSchema(e=!1){const i=Ht.Schema,n=this.readMessage(i),s=n==null?void 0:n.header();if(e&&!s)throw new Error(ZA(i));return s}readMetadataLength(){const e=this.source.read(GE),i=e&&new Rp(e),n=(i==null?void 0:i.readInt32(0))||0;return{done:n===0,value:n}}readMetadata(e){const i=this.source.read(e);if(!i)return xi;if(i.byteLength<e)throw new Error(IG(e,i.byteLength));return{done:!1,value:Kn.decode(i)}}}class Uhe{constructor(e,i){this.source=e instanceof $p?e:K7(e)?new Z1(e,i):new $p(e)}[Symbol.asyncIterator](){return this}next(){return ye(this,void 0,void 0,function*(){let e;return(e=yield this.readMetadataLength()).done||e.value===-1&&(e=yield this.readMetadataLength()).done||(e=yield this.readMetadata(e.value)).done?xi:e})}throw(e){return ye(this,void 0,void 0,function*(){return yield this.source.throw(e)})}return(e){return ye(this,void 0,void 0,function*(){return yield this.source.return(e)})}readMessage(e){return ye(this,void 0,void 0,function*(){let i;if((i=yield this.next()).done)return null;if(e!=null&&i.value.headerType!==e)throw new Error(QA(e));return i.value})}readMessageBody(e){return ye(this,void 0,void 0,function*(){if(e<=0)return new Uint8Array(0);const i=jt(yield this.source.read(e));if(i.byteLength<e)throw new Error(kG(e,i.byteLength));return i.byteOffset%8===0&&i.byteOffset+i.byteLength<=i.buffer.byteLength?i:i.slice()})}readSchema(e=!1){return ye(this,void 0,void 0,function*(){const i=Ht.Schema,n=yield this.readMessage(i),s=n==null?void 0:n.header();if(e&&!s)throw new Error(ZA(i));return s})}readMetadataLength(){return ye(this,void 0,void 0,function*(){const e=yield this.source.read(GE),i=e&&new Rp(e),n=(i==null?void 0:i.readInt32(0))||0;return{done:n===0,value:n}})}readMetadata(e){return ye(this,void 0,void 0,function*(){const i=yield this.source.read(e);if(!i)return xi;if(i.byteLength<e)throw new Error(IG(e,i.byteLength));return{done:!1,value:Kn.decode(i)}})}}class zhe extends FG{constructor(e){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=e instanceof k4?e:new k4(e)}next(){const{_json:e}=this;if(!this._schema)return this._schema=!0,{done:!1,value:Kn.fromJSON(e.schema,Ht.Schema)};if(this._dictionaryIndex<e.dictionaries.length){const i=e.dictionaries[this._dictionaryIndex++];return this._body=i.data.columns,{done:!1,value:Kn.fromJSON(i,Ht.DictionaryBatch)}}if(this._batchIndex<e.batches.length){const i=e.batches[this._batchIndex++];return this._body=i.columns,{done:!1,value:Kn.fromJSON(i,Ht.RecordBatch)}}return this._body=[],xi}readMessageBody(e){return i(this._body);function i(n){return(n||[]).reduce((s,a)=>[...s,...a.VALIDITY&&[a.VALIDITY]||[],...a.TYPE&&[a.TYPE]||[],...a.OFFSET&&[a.OFFSET]||[],...a.DATA&&[a.DATA]||[],...i(a.children)],[])}}readMessage(e){let i;if((i=this.next()).done)return null;if(e!=null&&i.value.headerType!==e)throw new Error(QA(e));return i.value}readSchema(){const e=Ht.Schema,i=this.readMessage(e),n=i==null?void 0:i.header();if(!i||!n)throw new Error(ZA(e));return n}}const GE=4,Nk="ARROW1",jg=new Uint8Array(Nk.length);for(let t=0;t<Nk.length;t+=1)jg[t]=Nk.codePointAt(t);function eO(t,e=0){for(let i=-1,n=jg.length;++i<n;)if(jg[i]!==t[e+i])return!1;return!0}const qm=jg.length,MG=qm+GE,jhe=qm*2+GE;class vr extends WA{constructor(e){super(),this._impl=e}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(e){return this._impl.throw(e)}return(e){return this._impl.return(e)}cancel(){return this._impl.cancel()}reset(e){return this._impl.reset(e),this._DOMStream=void 0,this._nodeStream=void 0,this}open(e){const i=this._impl.open(e);return Kf(i)?i.then(()=>this):this}readRecordBatch(e){return this._impl.isFile()?this._impl.readRecordBatch(e):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return pr.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return pr.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,i){throw new Error('"throughDOM" not available in this environment')}static from(e){return e instanceof vr?e:Tk(e)?Whe(e):K7(e)?Xhe(e):Kf(e)?(()=>ye(this,void 0,void 0,function*(){return yield vr.from(yield e)}))():J7(e)||OA(e)||Q7(e)||m_(e)?Yhe(new $p(e)):Hhe(new Q1(e))}static readAll(e){return e instanceof vr?e.isSync()?D4(e):P4(e):Tk(e)||ArrayBuffer.isView(e)||$m(e)||X7(e)?D4(e):P4(e)}}class nv extends vr{constructor(e){super(e),this._impl=e}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return Ri(this,arguments,function*(){yield Be(yield*Mc(Qn(this[Symbol.iterator]())))})}}class sv extends vr{constructor(e){super(e),this._impl=e}readAll(){var e,i;return ye(this,void 0,void 0,function*(){const n=new Array;try{for(var s=Qn(this),a;a=yield s.next(),!a.done;){const c=a.value;n.push(c)}}catch(c){e={error:c}}finally{try{a&&!a.done&&(i=s.return)&&(yield i.call(s))}finally{if(e)throw e.error}}return n})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class AG extends nv{constructor(e){super(e),this._impl=e}}class qhe extends sv{constructor(e){super(e),this._impl=e}}class OG{constructor(e=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=e}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(e){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=e,this.dictionaries=new Map,this}_loadRecordBatch(e,i){const n=this._loadVectors(e,i,this.schema.fields),s=Ft({type:new Xn(this.schema.fields),length:e.length,children:n});return new us(this.schema,s)}_loadDictionaryBatch(e,i){const{id:n,isDelta:s}=e,{dictionaries:a,schema:c}=this,d=a.get(n);if(s||!d){const f=c.dictionaries.get(n),u=this._loadVectors(e.data,i,[f]);return(d&&s?d.concat(new Yt(u)):new Yt(u)).memoize()}return d.memoize()}_loadVectors(e,i,n){return new mG(i,e.nodes,e.buffers,this.dictionaries).visitMany(n)}}class rv extends OG{constructor(e,i){super(i),this._reader=Tk(e)?new zhe(this._handle=e):new FG(this._handle=e)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(e){return this.closed||(this.autoDestroy=CG(this,e),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(e):xi}return(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(e):xi}next(){if(this.closed)return xi;let e;const{_reader:i}=this;for(;e=this._readNextMessageAndValidate();)if(e.isSchema())this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;const n=e.header(),s=i.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(n,s)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;const n=e.header(),s=i.readMessageBody(e.bodyLength),a=this._loadDictionaryBatch(n,s);this.dictionaries.set(n.id,a)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new JA(this.schema)}):this.return()}_readNextMessageAndValidate(e){return this._reader.readMessage(e)}}class av extends OG{constructor(e,i){super(i),this._reader=new Uhe(this._handle=e)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return ye(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(e){return ye(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=CG(this,e),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(e){return ye(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(e):xi})}return(e){return ye(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(e):xi})}next(){return ye(this,void 0,void 0,function*(){if(this.closed)return xi;let e;const{_reader:i}=this;for(;e=yield this._readNextMessageAndValidate();)if(e.isSchema())yield this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;const n=e.header(),s=yield i.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(n,s)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;const n=e.header(),s=yield i.readMessageBody(e.bodyLength),a=this._loadDictionaryBatch(n,s);this.dictionaries.set(n.id,a)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new JA(this.schema)}):yield this.return()})}_readNextMessageAndValidate(e){return ye(this,void 0,void 0,function*(){return yield this._reader.readMessage(e)})}}class NG extends rv{constructor(e,i){super(e instanceof F4?e:new F4(e),i)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(e){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const i of this._footer.dictionaryBatches())i&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(e)}readRecordBatch(e){var i;if(this.closed)return null;this._footer||this.open();const n=(i=this._footer)===null||i===void 0?void 0:i.getRecordBatch(e);if(n&&this._handle.seek(n.offset)){const s=this._reader.readMessage(Ht.RecordBatch);if(s!=null&&s.isRecordBatch()){const a=s.header(),c=this._reader.readMessageBody(s.bodyLength);return this._loadRecordBatch(a,c)}}return null}_readDictionaryBatch(e){var i;const n=(i=this._footer)===null||i===void 0?void 0:i.getDictionaryBatch(e);if(n&&this._handle.seek(n.offset)){const s=this._reader.readMessage(Ht.DictionaryBatch);if(s!=null&&s.isDictionaryBatch()){const a=s.header(),c=this._reader.readMessageBody(s.bodyLength),d=this._loadDictionaryBatch(a,c);this.dictionaries.set(a.id,d)}}}_readFooter(){const{_handle:e}=this,i=e.size-MG,n=e.readInt32(i),s=e.readAt(i-n,n);return zg.decode(s)}_readNextMessageAndValidate(e){var i;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=(i=this._footer)===null||i===void 0?void 0:i.getRecordBatch(this._recordBatchIndex);if(n&&this._handle.seek(n.offset))return this._reader.readMessage(e)}return null}}class Ghe extends av{constructor(e,...i){const n=typeof i[0]!="number"?i.shift():void 0,s=i[0]instanceof Map?i.shift():void 0;super(e instanceof Z1?e:new Z1(e,n),s)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}open(e){const i=Object.create(null,{open:{get:()=>super.open}});return ye(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const n of this._footer.dictionaryBatches())n&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield i.open.call(this,e)})}readRecordBatch(e){var i;return ye(this,void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());const n=(i=this._footer)===null||i===void 0?void 0:i.getRecordBatch(e);if(n&&(yield this._handle.seek(n.offset))){const s=yield this._reader.readMessage(Ht.RecordBatch);if(s!=null&&s.isRecordBatch()){const a=s.header(),c=yield this._reader.readMessageBody(s.bodyLength);return this._loadRecordBatch(a,c)}}return null})}_readDictionaryBatch(e){var i;return ye(this,void 0,void 0,function*(){const n=(i=this._footer)===null||i===void 0?void 0:i.getDictionaryBatch(e);if(n&&(yield this._handle.seek(n.offset))){const s=yield this._reader.readMessage(Ht.DictionaryBatch);if(s!=null&&s.isDictionaryBatch()){const a=s.header(),c=yield this._reader.readMessageBody(s.bodyLength),d=this._loadDictionaryBatch(a,c);this.dictionaries.set(a.id,d)}}})}_readFooter(){return ye(this,void 0,void 0,function*(){const{_handle:e}=this;e._pending&&(yield e._pending);const i=e.size-MG,n=yield e.readInt32(i),s=yield e.readAt(i-n,n);return zg.decode(s)})}_readNextMessageAndValidate(e){return ye(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const i=this._footer.getRecordBatch(this._recordBatchIndex);if(i&&(yield this._handle.seek(i.offset)))return yield this._reader.readMessage(e)}return null})}}class Vhe extends rv{constructor(e,i){super(e,i)}_loadVectors(e,i,n){return new nhe(i,e.nodes,e.buffers,this.dictionaries).visitMany(n)}}function CG(t,e){return e&&typeof e.autoDestroy=="boolean"?e.autoDestroy:t.autoDestroy}function*D4(t){const e=vr.from(t);try{if(!e.open({autoDestroy:!1}).closed)do yield e;while(!e.reset().open().closed)}finally{e.cancel()}}function P4(t){return Ri(this,arguments,function*(){const i=yield Be(vr.from(t));try{if(!(yield Be(i.open({autoDestroy:!1}))).closed)do yield yield Be(i);while(!(yield Be(i.reset().open())).closed)}finally{yield Be(i.cancel())}})}function Whe(t){return new nv(new Vhe(t))}function Hhe(t){const e=t.peek(qm+7&-8);return e&&e.byteLength>=4?eO(e)?new AG(new NG(t.read())):new nv(new rv(t)):new nv(new rv(function*(){}()))}function Yhe(t){return ye(this,void 0,void 0,function*(){const e=yield t.peek(qm+7&-8);return e&&e.byteLength>=4?eO(e)?new AG(new NG(yield t.read())):new sv(new av(t)):new sv(new av(function(){return Ri(this,arguments,function*(){})}()))})}function Xhe(t){return ye(this,void 0,void 0,function*(){const{size:e}=yield t.stat(),i=new Z1(t,e);return e>=jhe&&eO(yield i.readAt(0,qm+7&-8))?new qhe(new Ghe(i)):new sv(new av(i))})}class Li extends Nt{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(...e){const i=s=>s.flatMap(a=>Array.isArray(a)?i(a):a instanceof us?a.data.children:a.data),n=new Li;return n.visitMany(i(e)),n}visit(e){if(e instanceof Yt)return this.visitMany(e.data),this;const{type:i}=e;if(!Ze.isDictionary(i)){const{length:n,nullCount:s}=e;if(n>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");Ze.isNull(i)||ra.call(this,s<=0?new Uint8Array(0):zA(e.offset,n,e.nullBitmap)),this.nodes.push(new Mu(n,s))}return super.visit(e)}visitNull(e){return this}visitDictionary(e){return this.visit(e.clone(e.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function ra(t){const e=t.byteLength+7&-8;return this.buffers.push(t),this.bufferRegions.push(new no(this._byteLength,e)),this._byteLength+=e,this}function Khe(t){const{type:e,length:i,typeIds:n,valueOffsets:s}=t;if(ra.call(this,n),e.mode===tr.Sparse)return Ck.call(this,t);if(e.mode===tr.Dense){if(t.offset<=0)return ra.call(this,s),Ck.call(this,t);{const a=n.reduce((o,g)=>Math.max(o,g),n[0]),c=new Int32Array(a+1),d=new Int32Array(a+1).fill(-1),f=new Int32Array(i),u=CA(-s[0],i,s);for(let o,g,w=-1;++w<i;)(g=d[o=n[w]])===-1&&(g=d[o]=u[o]),f[w]=u[w]-g,++c[o];ra.call(this,f);for(let o,g=-1,w=e.children.length;++g<w;)if(o=t.children[g]){const m=e.typeIds[g],l=Math.min(i,c[m]);this.visit(o.slice(d[m],l))}}}return this}function Jhe(t){let e;return t.nullCount>=t.length?ra.call(this,new Uint8Array(0)):(e=t.values)instanceof Uint8Array?ra.call(this,zA(t.offset,t.length,e)):ra.call(this,G1(t.values))}function Td(t){return ra.call(this,t.values.subarray(0,t.length*t.stride))}function RG(t){const{length:e,values:i,valueOffsets:n}=t,s=n[0],a=n[e],c=Math.min(a-s,i.byteLength-s);return ra.call(this,CA(-n[0],e,n)),ra.call(this,i.subarray(s,s+c)),this}function tO(t){const{length:e,valueOffsets:i}=t;return i&&ra.call(this,CA(i[0],e,i)),this.visit(t.children[0])}function Ck(t){return this.visitMany(t.type.children.map((e,i)=>t.children[i]).filter(Boolean))[0]}Li.prototype.visitBool=Jhe;Li.prototype.visitInt=Td;Li.prototype.visitFloat=Td;Li.prototype.visitUtf8=RG;Li.prototype.visitBinary=RG;Li.prototype.visitFixedSizeBinary=Td;Li.prototype.visitDate=Td;Li.prototype.visitTimestamp=Td;Li.prototype.visitTime=Td;Li.prototype.visitDecimal=Td;Li.prototype.visitList=tO;Li.prototype.visitStruct=Ck;Li.prototype.visitUnion=Khe;Li.prototype.visitInterval=Td;Li.prototype.visitFixedSizeList=tO;Li.prototype.visitMap=tO;class LG extends WA{constructor(e){super(),this._position=0,this._started=!1,this._sink=new iT,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Is(e)||(e={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof e.autoDestroy=="boolean"?e.autoDestroy:!0,this._writeLegacyIpcFormat=typeof e.writeLegacyIpcFormat=="boolean"?e.writeLegacyIpcFormat:!1}static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,i){throw new Error('"throughDOM" not available in this environment')}toString(e=!1){return this._sink.toString(e)}toUint8Array(e=!1){return this._sink.toUint8Array(e)}writeAll(e){return Kf(e)?e.then(i=>this.writeAll(i)):m_(e)?rO(this,e):sO(this,e)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(e){return this._sink.toDOMStream(e)}toNodeStream(e){return this._sink.toNodeStream(e)}close(){return this.reset()._sink.close()}abort(e){return this.reset()._sink.abort(e)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(e=this._sink,i=null){return e===this._sink||e instanceof iT?this._sink=e:(this._sink=new iT,e&&mfe(e)?this.toDOMStream({type:"bytes"}).pipeTo(e):e&&wfe(e)&&this.toNodeStream({objectMode:!1}).pipe(e)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!i||!Mk(i,this._schema))&&(i==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=i,this._writeSchema(i))),this}write(e){let i=null;if(this._sink){if(e==null)return this.finish()&&void 0;if(e instanceof Hn&&!(i=e.schema))return this.finish()&&void 0;if(e instanceof us&&!(i=e.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(i&&!Mk(i,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,i)}e instanceof us?e instanceof JA||this._writeRecordBatch(e):e instanceof Hn?this.writeAll(e.batches):$m(e)&&this.writeAll(e)}_writeMessage(e,i=8){const n=i-1,s=Kn.encode(e),a=s.byteLength,c=this._writeLegacyIpcFormat?4:8,d=a+c+n&~n,f=d-a-c;return e.headerType===Ht.RecordBatch?this._recordBatchBlocks.push(new Yc(d,e.bodyLength,this._position)):e.headerType===Ht.DictionaryBatch&&this._dictionaryBlocks.push(new Yc(d,e.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(d-c)),a>0&&this._write(s),this._writePadding(f)}_write(e){if(this._started){const i=jt(e);i&&i.byteLength>0&&(this._sink.write(i),this._position+=i.byteLength)}return this}_writeSchema(e){return this._writeMessage(Kn.from(e))}_writeFooter(e){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(jg)}_writePadding(e){return e>0?this._write(new Uint8Array(e)):this}_writeRecordBatch(e){const{byteLength:i,nodes:n,bufferRegions:s,buffers:a}=Li.assemble(e),c=new ir(e.numRows,n,s),d=Kn.from(c,i);return this._writeDictionaries(e)._writeMessage(d)._writeBodyBuffers(a)}_writeDictionaryBatch(e,i,n=!1){this._dictionaryDeltaOffsets.set(i,e.length+(this._dictionaryDeltaOffsets.get(i)||0));const{byteLength:s,nodes:a,bufferRegions:c,buffers:d}=Li.assemble(new Yt([e])),f=new ir(e.length,a,c),u=new So(f,i,n),o=Kn.from(u,s);return this._writeMessage(o)._writeBodyBuffers(d)}_writeBodyBuffers(e){let i,n,s;for(let a=-1,c=e.length;++a<c;)(i=e[a])&&(n=i.byteLength)>0&&(this._write(i),(s=(n+7&-8)-n)>0&&this._writePadding(s));return this}_writeDictionaries(e){for(let[i,n]of e.dictionaries){let s=this._dictionaryDeltaOffsets.get(i)||0;if(s===0||(n=n==null?void 0:n.slice(s)).length>0)for(const a of n.data)this._writeDictionaryBatch(a,i,s>0),s+=a.length}return this}}class iO extends LG{static writeAll(e,i){const n=new iO(i);return Kf(e)?e.then(s=>n.writeAll(s)):m_(e)?rO(n,e):sO(n,e)}}class nO extends LG{static writeAll(e){const i=new nO;return Kf(e)?e.then(n=>i.writeAll(n)):m_(e)?rO(i,e):sO(i,e)}constructor(){super(),this._autoDestroy=!0}_writeSchema(e){return this._writeMagic()._writePadding(2)}_writeFooter(e){const i=zg.encode(new zg(e,Xs.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(e)._write(i)._write(Int32Array.of(i.byteLength))._writeMagic()}}function sO(t,e){let i=e;e instanceof Hn&&(i=e.batches,t.reset(void 0,e.schema));for(const n of i)t.write(n);return t.finish()}function rO(t,e){var i,n,s,a;return ye(this,void 0,void 0,function*(){try{for(i=Qn(e);n=yield i.next(),!n.done;){const c=n.value;t.write(c)}}catch(c){s={error:c}}finally{try{n&&!n.done&&(a=i.return)&&(yield a.call(i))}finally{if(s)throw s.error}}return t.finish()})}function Qhe(t,e="stream"){return(e==="stream"?iO:nO).writeAll(t).toUint8Array(!0)}var Zhe=Object.create,DG=Object.defineProperty,epe=Object.getOwnPropertyDescriptor,tpe=Object.getOwnPropertyNames,ipe=Object.getPrototypeOf,npe=Object.prototype.hasOwnProperty,spe=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),rpe=(t,e,i,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of tpe(e))!npe.call(t,s)&&s!==i&&DG(t,s,{get:()=>e[s],enumerable:!(n=epe(e,s))||n.enumerable});return t},ape=(t,e,i)=>(i=t!=null?Zhe(ipe(t)):{},rpe(e||!t||!t.__esModule?DG(i,"default",{value:t,enumerable:!0}):i,t)),ope=spe((t,e)=>{e.exports=Worker}),lpe=(t=>(t[t.NONE=0]="NONE",t[t.DEBUG=1]="DEBUG",t[t.INFO=2]="INFO",t[t.WARNING=3]="WARNING",t[t.ERROR=4]="ERROR",t))(lpe||{}),cpe=(t=>(t[t.NONE=0]="NONE",t[t.CONNECT=1]="CONNECT",t[t.DISCONNECT=2]="DISCONNECT",t[t.OPEN=3]="OPEN",t[t.QUERY=4]="QUERY",t[t.INSTANTIATE=5]="INSTANTIATE",t))(cpe||{}),dpe=(t=>(t[t.NONE=0]="NONE",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR",t[t.START=3]="START",t[t.RUN=4]="RUN",t[t.CAPTURE=5]="CAPTURE",t))(dpe||{}),fpe=(t=>(t[t.NONE=0]="NONE",t[t.WEB_WORKER=1]="WEB_WORKER",t[t.NODE_WORKER=2]="NODE_WORKER",t[t.BINDINGS=3]="BINDINGS",t[t.ASYNC_DUCKDB=4]="ASYNC_DUCKDB",t))(fpe||{}),upe=class{constructor(t=2){this.level=t}log(t){t.level>=this.level&&console.log(t)}},hpe=(t=>(t[t.SUCCESS=0]="SUCCESS",t))(hpe||{}),ppe=class{constructor(t,e){this._bindings=t,this._conn=e}get bindings(){return this._bindings}async close(){return this._bindings.disconnect(this._conn)}useUnsafe(t){return t(this._bindings,this._conn)}async query(t){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:t});let e=await this._bindings.runQuery(this._conn,t),i=vr.from(e);return console.assert(i.isSync(),"Reader is not sync"),console.assert(i.isFile(),"Reader is not file"),new Hn(i)}async send(t){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:t});let e=await this._bindings.startPendingQuery(this._conn,t);for(;e==null;)e=await this._bindings.pollPendingQuery(this._conn);let i=new PG(this._bindings,this._conn,e),n=await vr.from(i);return console.assert(n.isAsync()),console.assert(n.isStream()),n}async cancelSent(){return await this._bindings.cancelPendingQuery(this._conn)}async getTableNames(t){return await this._bindings.getTableNames(this._conn,t)}async prepare(t){let e=await this._bindings.createPrepared(this._conn,t);return new _pe(this._bindings,this._conn,e)}async insertArrowTable(t,e){let i=Qhe(t,"stream");await this.insertArrowFromIPCStream(i,e)}async insertArrowFromIPCStream(t,e){await this._bindings.insertArrowFromIPCStream(this._conn,t,e)}async insertCSVFromPath(t,e){await this._bindings.insertCSVFromPath(this._conn,t,e)}async insertJSONFromPath(t,e){await this._bindings.insertJSONFromPath(this._conn,t,e)}},PG=class{constructor(t,e,i){this.db=t,this.conn=e,this.header=i,this._first=!0,this._depleted=!1,this._inFlight=null}async next(){if(this._first)return this._first=!1,{done:!1,value:this.header};if(this._depleted)return{done:!0,value:null};let t;return this._inFlight!=null?(t=await this._inFlight,this._inFlight=null):t=await this.db.fetchQueryResults(this.conn),this._depleted=t.length==0,this._depleted||(this._inFlight=this.db.fetchQueryResults(this.conn)),{done:this._depleted,value:t}}[Symbol.asyncIterator](){return this}},_pe=class{constructor(e,i,n){this.bindings=e,this.connectionId=i,this.statementId=n}async close(){await this.bindings.closePrepared(this.connectionId,this.statementId)}async query(...e){let i=await this.bindings.runPrepared(this.connectionId,this.statementId,e),n=vr.from(i);return console.assert(n.isSync()),console.assert(n.isFile()),new Hn(n)}async send(...e){let i=await this.bindings.sendPrepared(this.connectionId,this.statementId,e),n=new PG(this.bindings,this.connectionId,i),s=await vr.from(n);return console.assert(s.isAsync()),console.assert(s.isStream()),s}},ype=(t=>(t.CANCEL_PENDING_QUERY="CANCEL_PENDING_QUERY",t.CLOSE_PREPARED="CLOSE_PREPARED",t.COLLECT_FILE_STATISTICS="COLLECT_FILE_STATISTICS",t.CONNECT="CONNECT",t.COPY_FILE_TO_BUFFER="COPY_FILE_TO_BUFFER",t.COPY_FILE_TO_PATH="COPY_FILE_TO_PATH",t.CREATE_PREPARED="CREATE_PREPARED",t.DISCONNECT="DISCONNECT",t.DROP_FILE="DROP_FILE",t.DROP_FILES="DROP_FILES",t.EXPORT_FILE_STATISTICS="EXPORT_FILE_STATISTICS",t.FETCH_QUERY_RESULTS="FETCH_QUERY_RESULTS",t.FLUSH_FILES="FLUSH_FILES",t.GET_FEATURE_FLAGS="GET_FEATURE_FLAGS",t.GET_TABLE_NAMES="GET_TABLE_NAMES",t.GET_VERSION="GET_VERSION",t.GLOB_FILE_INFOS="GLOB_FILE_INFOS",t.INSERT_ARROW_FROM_IPC_STREAM="INSERT_ARROW_FROM_IPC_STREAM",t.INSERT_CSV_FROM_PATH="IMPORT_CSV_FROM_PATH",t.INSERT_JSON_FROM_PATH="IMPORT_JSON_FROM_PATH",t.INSTANTIATE="INSTANTIATE",t.OPEN="OPEN",t.PING="PING",t.POLL_PENDING_QUERY="POLL_PENDING_QUERY",t.REGISTER_FILE_BUFFER="REGISTER_FILE_BUFFER",t.REGISTER_FILE_HANDLE="REGISTER_FILE_HANDLE",t.REGISTER_FILE_URL="REGISTER_FILE_URL",t.RESET="RESET",t.RUN_PREPARED="RUN_PREPARED",t.RUN_QUERY="RUN_QUERY",t.SEND_PREPARED="SEND_PREPARED",t.START_PENDING_QUERY="START_PENDING_QUERY",t.TOKENIZE="TOKENIZE",t))(ype||{}),gpe=(t=>(t.CONNECTION_INFO="CONNECTION_INFO",t.ERROR="ERROR",t.FEATURE_FLAGS="FEATURE_FLAGS",t.FILE_BUFFER="FILE_BUFFER",t.FILE_INFOS="FILE_INFOS",t.FILE_SIZE="FILE_SIZE",t.FILE_STATISTICS="FILE_STATISTICS",t.INSTANTIATE_PROGRESS="INSTANTIATE_PROGRESS",t.LOG="LOG",t.OK="OK",t.PREPARED_STATEMENT_ID="PREPARED_STATEMENT_ID",t.QUERY_PLAN="QUERY_PLAN",t.QUERY_RESULT="QUERY_RESULT",t.QUERY_RESULT_CHUNK="QUERY_RESULT_CHUNK",t.QUERY_RESULT_HEADER="QUERY_RESULT_HEADER",t.QUERY_RESULT_HEADER_OR_NULL="QUERY_RESULT_HEADER_OR_NULL",t.REGISTERED_FILE="REGISTERED_FILE",t.SCRIPT_TOKENS="SCRIPT_TOKENS",t.SUCCESS="SUCCESS",t.TABLE_NAMES="TABLE_NAMES",t.VERSION_STRING="VERSION_STRING",t))(gpe||{}),Rt=class{constructor(t,e){this.promiseResolver=()=>{},this.promiseRejecter=()=>{},this.type=t,this.data=e,this.promise=new Promise((i,n)=>{this.promiseResolver=i,this.promiseRejecter=n})}};function rT(t){switch(t.typeId){case Q.Binary:return{sqlType:"binary"};case Q.Bool:return{sqlType:"bool"};case Q.Date:return{sqlType:"date"};case Q.DateDay:return{sqlType:"date32[d]"};case Q.DateMillisecond:return{sqlType:"date64[ms]"};case Q.Decimal:{let e=t;return{sqlType:"decimal",precision:e.precision,scale:e.scale}}case Q.Float:return{sqlType:"float"};case Q.Float16:return{sqlType:"float16"};case Q.Float32:return{sqlType:"float32"};case Q.Float64:return{sqlType:"float64"};case Q.Int:return{sqlType:"int32"};case Q.Int16:return{sqlType:"int16"};case Q.Int32:return{sqlType:"int32"};case Q.Int64:return{sqlType:"int64"};case Q.Uint16:return{sqlType:"uint16"};case Q.Uint32:return{sqlType:"uint32"};case Q.Uint64:return{sqlType:"uint64"};case Q.Uint8:return{sqlType:"uint8"};case Q.IntervalDayTime:return{sqlType:"interval[dt]"};case Q.IntervalYearMonth:return{sqlType:"interval[m]"};case Q.List:return{sqlType:"list",valueType:rT(t.valueType)};case Q.FixedSizeBinary:return{sqlType:"fixedsizebinary",byteWidth:t.byteWidth};case Q.Null:return{sqlType:"null"};case Q.Utf8:return{sqlType:"utf8"};case Q.Struct:return{sqlType:"struct",fields:t.children.map(e=>Rk(e.name,e.type))};case Q.Map:{let e=t;return{sqlType:"map",keyType:rT(e.keyType),valueType:rT(e.valueType)}}case Q.Time:return{sqlType:"time[s]"};case Q.TimeMicrosecond:return{sqlType:"time[us]"};case Q.TimeMillisecond:return{sqlType:"time[ms]"};case Q.TimeNanosecond:return{sqlType:"time[ns]"};case Q.TimeSecond:return{sqlType:"time[s]"};case Q.Timestamp:return{sqlType:"timestamp",timezone:t.timezone||void 0};case Q.TimestampSecond:return{sqlType:"timestamp[s]",timezone:t.timezone||void 0};case Q.TimestampMicrosecond:return{sqlType:"timestamp[us]",timezone:t.timezone||void 0};case Q.TimestampNanosecond:return{sqlType:"timestamp[ns]",timezone:t.timezone||void 0};case Q.TimestampMillisecond:return{sqlType:"timestamp[ms]",timezone:t.timezone||void 0}}throw new Error(`unsupported arrow type: ${t.toString()}`)}function Rk(t,e){let i=rT(e);return i.name=t,i}var mpe=new TextEncoder,wpe=class{constructor(t,e=null){this._onInstantiationProgress=[],this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{},this._nextMessageId=0,this._pendingRequests=new Map,this._logger=t,this._onMessageHandler=this.onMessage.bind(this),this._onErrorHandler=this.onError.bind(this),this._onCloseHandler=this.onClose.bind(this),e!=null&&this.attach(e)}get logger(){return this._logger}attach(t){this._worker=t,this._worker.addEventListener("message",this._onMessageHandler),this._worker.addEventListener("error",this._onErrorHandler),this._worker.addEventListener("close",this._onCloseHandler),this._workerShutdownPromise=new Promise((e,i)=>{this._workerShutdownResolver=e})}detach(){!this._worker||(this._worker.removeEventListener("message",this._onMessageHandler),this._worker.removeEventListener("error",this._onErrorHandler),this._worker.removeEventListener("close",this._onCloseHandler),this._worker=null,this._workerShutdownResolver(null),this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async terminate(){!this._worker||(this._worker.terminate(),this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async postTask(t,e=[]){if(!this._worker){console.error("cannot send a message since the worker is not set!");return}let i=this._nextMessageId++;return this._pendingRequests.set(i,t),this._worker.postMessage({messageId:i,type:t.type,data:t.data},e),await t.promise}onMessage(t){let e=t.data;switch(e.type){case"LOG":{this._logger.log(e.data);return}case"INSTANTIATE_PROGRESS":{for(let n of this._onInstantiationProgress)n(e.data);return}}let i=this._pendingRequests.get(e.requestId);if(!i){console.warn(`unassociated response: [${e.requestId}, ${e.type.toString()}]`);return}if(this._pendingRequests.delete(e.requestId),e.type=="ERROR"){let n=new Error(e.data.message);n.name=e.data.name,n.stack=e.data.stack,i.promiseRejecter(n);return}switch(i.type){case"CLOSE_PREPARED":case"COLLECT_FILE_STATISTICS":case"COPY_FILE_TO_PATH":case"DISCONNECT":case"DROP_FILE":case"DROP_FILES":case"FLUSH_FILES":case"INSERT_ARROW_FROM_IPC_STREAM":case"IMPORT_CSV_FROM_PATH":case"IMPORT_JSON_FROM_PATH":case"OPEN":case"PING":case"REGISTER_FILE_BUFFER":case"REGISTER_FILE_HANDLE":case"REGISTER_FILE_URL":case"RESET":if(e.type=="OK"){i.promiseResolver(e.data);return}break;case"INSTANTIATE":if(this._onInstantiationProgress=[],e.type=="OK"){i.promiseResolver(e.data);return}break;case"GLOB_FILE_INFOS":if(e.type=="FILE_INFOS"){i.promiseResolver(e.data);return}break;case"GET_VERSION":if(e.type=="VERSION_STRING"){i.promiseResolver(e.data);return}break;case"GET_FEATURE_FLAGS":if(e.type=="FEATURE_FLAGS"){i.promiseResolver(e.data);return}break;case"GET_TABLE_NAMES":if(e.type=="TABLE_NAMES"){i.promiseResolver(e.data);return}break;case"TOKENIZE":if(e.type=="SCRIPT_TOKENS"){i.promiseResolver(e.data);return}break;case"COPY_FILE_TO_BUFFER":if(e.type=="FILE_BUFFER"){i.promiseResolver(e.data);return}break;case"EXPORT_FILE_STATISTICS":if(e.type=="FILE_STATISTICS"){i.promiseResolver(e.data);return}break;case"CONNECT":if(e.type=="CONNECTION_INFO"){i.promiseResolver(e.data);return}break;case"RUN_PREPARED":case"RUN_QUERY":if(e.type=="QUERY_RESULT"){i.promiseResolver(e.data);return}break;case"SEND_PREPARED":if(e.type=="QUERY_RESULT_HEADER"){i.promiseResolver(e.data);return}break;case"START_PENDING_QUERY":if(e.type=="QUERY_RESULT_HEADER_OR_NULL"){i.promiseResolver(e.data);return}break;case"POLL_PENDING_QUERY":if(e.type=="QUERY_RESULT_HEADER_OR_NULL"){i.promiseResolver(e.data);return}break;case"CANCEL_PENDING_QUERY":if(this._onInstantiationProgress=[],e.type=="SUCCESS"){i.promiseResolver(e.data);return}break;case"FETCH_QUERY_RESULTS":if(e.type=="QUERY_RESULT_CHUNK"){i.promiseResolver(e.data);return}break;case"CREATE_PREPARED":if(e.type=="PREPARED_STATEMENT_ID"){i.promiseResolver(e.data);return}break}i.promiseRejecter(new Error(`unexpected response type: ${e.type.toString()}`))}onError(t){console.error(t),console.error(`error in duckdb worker: ${t.message}`),this._pendingRequests.clear()}onClose(){if(this._workerShutdownResolver(null),this._pendingRequests.size!=0){console.warn(`worker terminated with ${this._pendingRequests.size} pending requests`);return}this._pendingRequests.clear()}async reset(){let t=new Rt("RESET",null);return await this.postTask(t)}async ping(){let t=new Rt("PING",null);await this.postTask(t)}async dropFile(t){let e=new Rt("DROP_FILE",t);return await this.postTask(e)}async dropFiles(){let t=new Rt("DROP_FILES",null);return await this.postTask(t)}async flushFiles(){let t=new Rt("FLUSH_FILES",null);return await this.postTask(t)}async instantiate(t,e=null,i=n=>{}){this._onInstantiationProgress.push(i);let n=new Rt("INSTANTIATE",[t,e]);return await this.postTask(n)}async getVersion(){let t=new Rt("GET_VERSION",null);return await this.postTask(t)}async getFeatureFlags(){let t=new Rt("GET_FEATURE_FLAGS",null);return await this.postTask(t)}async open(t){let e=new Rt("OPEN",t);await this.postTask(e)}async tokenize(t){let e=new Rt("TOKENIZE",t);return await this.postTask(e)}async connectInternal(){let t=new Rt("CONNECT",null);return await this.postTask(t)}async connect(){let t=await this.connectInternal();return new ppe(this,t)}async disconnect(t){let e=new Rt("DISCONNECT",t);await this.postTask(e)}async runQuery(t,e){let i=new Rt("RUN_QUERY",[t,e]);return await this.postTask(i)}async startPendingQuery(t,e){let i=new Rt("START_PENDING_QUERY",[t,e]);return await this.postTask(i)}async pollPendingQuery(t){let e=new Rt("POLL_PENDING_QUERY",t);return await this.postTask(e)}async cancelPendingQuery(t){let e=new Rt("CANCEL_PENDING_QUERY",t);return await this.postTask(e)}async fetchQueryResults(t){let e=new Rt("FETCH_QUERY_RESULTS",t);return await this.postTask(e)}async getTableNames(t,e){let i=new Rt("GET_TABLE_NAMES",[t,e]);return await this.postTask(i)}async createPrepared(t,e){let i=new Rt("CREATE_PREPARED",[t,e]);return await this.postTask(i)}async closePrepared(t,e){let i=new Rt("CLOSE_PREPARED",[t,e]);await this.postTask(i)}async runPrepared(t,e,i){let n=new Rt("RUN_PREPARED",[t,e,i]);return await this.postTask(n)}async sendPrepared(t,e,i){let n=new Rt("SEND_PREPARED",[t,e,i]);return await this.postTask(n)}async globFiles(t){let e=new Rt("GLOB_FILE_INFOS",t);return await this.postTask(e)}async registerFileText(t,e){let i=mpe.encode(e);await this.registerFileBuffer(t,i)}async registerFileURL(t,e,i,n){e===void 0&&(e=t);let s=new Rt("REGISTER_FILE_URL",[t,e,i,n]);await this.postTask(s)}async registerEmptyFileBuffer(t){let e=new Rt("REGISTER_FILE_BUFFER",[t,new Uint8Array]);await this.postTask(e)}async registerFileBuffer(t,e){let i=new Rt("REGISTER_FILE_BUFFER",[t,e]);await this.postTask(i,[e.buffer])}async registerFileHandle(t,e,i,n){let s=new Rt("REGISTER_FILE_HANDLE",[t,e,i,n]);await this.postTask(s,[])}async collectFileStatistics(t,e){let i=new Rt("COLLECT_FILE_STATISTICS",[t,e]);await this.postTask(i,[])}async exportFileStatistics(t){let e=new Rt("EXPORT_FILE_STATISTICS",t);return await this.postTask(e,[])}async copyFileToBuffer(t){let e=new Rt("COPY_FILE_TO_BUFFER",t);return await this.postTask(e)}async copyFileToPath(t,e){let i=new Rt("COPY_FILE_TO_PATH",[t,e]);await this.postTask(i)}async insertArrowFromIPCStream(t,e,i){if(e.length==0)return;let n=new Rt("INSERT_ARROW_FROM_IPC_STREAM",[t,e,i]);await this.postTask(n,[e.buffer])}async insertCSVFromPath(t,e,i){if(i.columns!==void 0){let s=[];for(let a in i.columns){let c=i.columns[a];s.push(Rk(a,c))}i.columnsFlat=s,delete i.columns}let n=new Rt("IMPORT_CSV_FROM_PATH",[t,e,i]);await this.postTask(n)}async insertJSONFromPath(t,e,i){if(i.columns!==void 0){let s=[];for(let a in i.columns){let c=i.columns[a];s.push(Rk(a,c))}i.columnsFlat=s,delete i.columns}let n=new Rt("IMPORT_JSON_FROM_PATH",[t,e,i]);await this.postTask(n)}},bpe=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,10,14,1,12,0,65,0,65,0,65,0,252,10,0,0,11])),Tpe=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11])),vpe=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),Epe=()=>(async t=>{try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(t)}catch{return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])),aO={name:"@duckdb/duckdb-wasm",version:"1.25.0",description:"DuckDB powered by WebAssembly",license:"MIT",repository:{type:"git",url:"https://github.com/duckdb/duckdb-wasm.git"},keywords:["sql","duckdb","relational","database","data","query","wasm","analytics","olap","arrow","parquet","json","csv"],dependencies:{"apache-arrow":"^11.0.0"},devDependencies:{"@types/emscripten":"^1.39.6","@types/jasmine":"^4.3.1","@typescript-eslint/eslint-plugin":"^5.53.0","@typescript-eslint/parser":"^5.49.0",esbuild:"^0.15.12",eslint:"^8.35.0","eslint-plugin-jasmine":"^4.1.3","eslint-plugin-react":"^7.32.2","fast-glob":"^3.2.12",jasmine:"^4.5.0","jasmine-core":"^4.3.0","jasmine-spec-reporter":"^7.0.0","js-sha256":"^0.9.0",karma:"^6.4.1","karma-chrome-launcher":"^3.1.1","karma-coverage":"^2.2.0","karma-firefox-launcher":"^2.1.2","karma-jasmine":"^5.1.0","karma-jasmine-html-reporter":"^2.0.0","karma-sourcemap-loader":"^0.3.8","karma-spec-reporter":"^0.0.36","make-dir":"^3.1.0",nyc:"^15.1.0",prettier:"^2.8.4",puppeteer:"^19.7.2",rimraf:"^4.3.0",s3rver:"^3.7.1",typedoc:"^0.23.27",typescript:"^4.8.4","wasm-feature-detect":"^1.4.0","web-worker":"^1.2.0"},scripts:{"build:debug":"node bundle.mjs debug && tsc --emitDeclarationOnly","build:release":"node bundle.mjs release && tsc --emitDeclarationOnly",docs:"typedoc",report:"node ./coverage.mjs","test:node":"node --enable-source-maps --experimental-wasm-eh ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:debug":"node --inspect-brk --enable-source-maps --experimental-wasm-eh ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:coverage":"nyc -r json --report-dir ./coverage/node node --experimental-wasm-eh ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:firefox":"karma start ./karma/tests-firefox.cjs","test:chrome":"karma start ./karma/tests-chrome.cjs","test:chrome:eh":"karma start ./karma/tests-chrome-eh.cjs","test:chrome:coverage":"karma start ./karma/tests-chrome-coverage.cjs","test:browser":"karma start ./karma/tests-all.cjs","test:browser:debug":"karma start ./karma/tests-debug.cjs",test:"npm run test:chrome && npm run test:node","test:coverage":"npm run test:chrome:coverage && npm run test:node:coverage && npm run report",lint:"eslint src test"},files:["dist","!dist/types/test"],main:"dist/duckdb-browser.cjs",module:"dist/duckdb-browser.mjs",types:"dist/duckdb-browser.d.ts",jsdelivr:"dist/duckdb-browser.cjs",unpkg:"dist/duckdb-browser.mjs",sideEffects:!1,browser:{fs:!1,path:!1,perf_hooks:!1,os:!1,worker_threads:!1},exports:{"./dist/duckdb-mvp.wasm":"./dist/duckdb-mvp.wasm","./dist/duckdb-eh.wasm":"./dist/duckdb-eh.wasm","./dist/duckdb-coi.wasm":"./dist/duckdb-coi.wasm","./dist/duckdb-browser":"./dist/duckdb-browser.mjs","./dist/duckdb-browser.cjs":"./dist/duckdb-browser.cjs","./dist/duckdb-browser.mjs":"./dist/duckdb-browser.mjs","./dist/duckdb-browser-blocking":"./dist/duckdb-browser-blocking.mjs","./dist/duckdb-browser-blocking.mjs":"./dist/duckdb-browser-blocking.mjs","./dist/duckdb-browser-blocking.cjs":"./dist/duckdb-browser-blocking.cjs","./dist/duckdb-browser-coi.pthread.worker.js":"./dist/duckdb-browser-coi.pthread.worker.js","./dist/duckdb-browser-coi.worker.js":"./dist/duckdb-browser-coi.worker.js","./dist/duckdb-browser-eh.worker.js":"./dist/duckdb-browser-eh.worker.js","./dist/duckdb-browser-mvp.worker.js":"./dist/duckdb-browser-mvp.worker.js","./dist/duckdb-node":"./dist/duckdb-node.cjs","./dist/duckdb-node.cjs":"./dist/duckdb-node.cjs","./dist/duckdb-node-blocking":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-blocking.cjs":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-eh.worker.cjs":"./dist/duckdb-node-eh.worker.cjs","./dist/duckdb-node-mvp.worker.cjs":"./dist/duckdb-node-mvp.worker.cjs","./blocking":{browser:{types:"./dist/duckdb-browser-blocking.d.ts",import:"./dist/duckdb-browser-blocking.mjs",require:"./dist/duckdb-browser-blocking.cjs"},node:{types:"./dist/duckdb-node-blocking.d.ts",require:"./dist/duckdb-node-blocking.cjs",import:"./dist/duckdb-node-blocking.cjs"},types:"./dist/duckdb-browser-blocking.d.ts",import:"./dist/duckdb-browser-blocking.mjs",require:"./dist/duckdb-browser-blocking.cjs"},".":{browser:{types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"},node:{types:"./dist/duckdb-node.d.ts",import:"./dist/duckdb-node.cjs",require:"./dist/duckdb-node.cjs"},types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"}}},Spe=aO.name,xpe=aO.version,oO=aO.version.split(".");oO[0];oO[1];oO[2];var Bpe=()=>typeof navigator>"u";function Ipe(){let t=`https://cdn.jsdelivr.net/npm/${Spe}@${xpe}/dist/`;return{mvp:{mainModule:`${t}duckdb-mvp.wasm`,mainWorker:`${t}duckdb-browser-mvp.worker.js`},eh:{mainModule:`${t}duckdb-eh.wasm`,mainWorker:`${t}duckdb-browser-eh.worker.js`}}}var pB=null,_B=null,yB=null,gB=null,mB=null;async function kpe(){return pB==null&&(pB=typeof BigInt64Array<"u"),_B==null&&(_B=await Tpe()),yB==null&&(yB=await Epe()),gB==null&&(gB=await vpe()),mB==null&&(mB=await bpe()),{bigInt64Array:pB,crossOriginIsolated:Bpe()||globalThis.crossOriginIsolated||!1,wasmExceptions:_B,wasmSIMD:gB,wasmThreads:yB,wasmBulkMemory:mB}}async function Fpe(t){let e=await kpe();if(e.wasmExceptions){if(e.wasmSIMD&&e.wasmThreads&&e.crossOriginIsolated&&t.coi)return{mainModule:t.coi.mainModule,mainWorker:t.coi.mainWorker,pthreadWorker:t.coi.pthreadWorker};if(t.eh)return{mainModule:t.eh.mainModule,mainWorker:t.eh.mainWorker,pthreadWorker:null}}return{mainModule:t.mvp.mainModule,mainWorker:t.mvp.mainWorker,pthreadWorker:null}}var Mpe=ape(ope());async function Ape(t){let e=new Request(t),i=await fetch(e),n=URL.createObjectURL(await i.blob());return new Mpe.default(n)}function Ope(){let t=new TextDecoder;return e=>(typeof SharedArrayBuffer<"u"&&e.buffer instanceof SharedArrayBuffer&&(e=new Uint8Array(e)),t.decode(e))}Ope();var Npe=(t=>(t[t.BUFFER=0]="BUFFER",t[t.NODE_FS=1]="NODE_FS",t[t.BROWSER_FILEREADER=2]="BROWSER_FILEREADER",t[t.BROWSER_FSACCESS=3]="BROWSER_FSACCESS",t[t.HTTP=4]="HTTP",t[t.S3=5]="S3",t))(Npe||{});class lO extends hfe{constructor(e,i,n){super(i,n),this.db=e}async query(e){const i=performance.now();e=e.replaceAll("count(*)","count(*)::INT");const n=await this.db.connect(),s=await n.query(e);return n.close(),e=ffe(e),console.info(`%c${e}`,"color: #bbb",`
Rows:`,s.numRows,"Execution time:",performance.now()-i,"ms."),s}castTime(e){return`epoch(${e})*1000`}static async fromParquetFile(e,i="data",n,s=!0){const a=await Cpe(i,`CREATE TABLE '${i}' AS SELECT * FROM parquet_scan('${s?Rpe(e):e}')`);return new lO(a,i,n)}}async function Cpe(t,e){const i=Ipe(),n=await Fpe(i),s=await Ape(n.mainWorker),a=new upe,c=new wpe(a,s);await c.instantiate(n.mainModule,n.pthreadWorker);const d=await c.connect();await d.query(e);const f=await d.query(`PRAGMA table_info('${t}')`);return console.table(f.toArray().map(Object.fromEntries)),d.close(),c}function Rpe(t){return`${window.location.href}${t}`}var $G={exports:{}};const Lpe=Ane(Ine);(function(t,e){(function(n,s){t.exports=s(Lpe)})(Mne,function(i){return(()=>{var n={2190:c=>{c.exports=function(f,u,o){if(f.filter)return f.filter(u,o);if(f==null)throw new TypeError;if(typeof u!="function")throw new TypeError;for(var g=[],w=0;w<f.length;w++)if(d.call(f,w)){var m=f[w];u.call(o,m,w,f)&&g.push(m)}return g};var d=Object.prototype.hasOwnProperty},6314:(c,d,f)=>{var u=f(2190);c.exports=function(){return u(["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],function(g){return typeof f.g[g]=="function"})}},7123:(c,d,f)=>{f.r(d),f.d(d,{DbCon:()=>zt,default:()=>_e,Client:()=>b.Client,Processor:()=>b.Processor});var u=f(6729),o=f.n(u),g=f(2003),w=f(9539),m=f.n(w),l=f(2818),T=f(2607),b=f(4221),S=f(9262),x=f(5141),B=f(2033),O={};for(const q in l)["default","DbCon","Client","Processor"].indexOf(q)<0&&(O[q]=()=>l[q]);f.d(d,O);var F=f(4494),O={};for(const q in F)["default","DbCon","Client","Processor"].indexOf(q)<0&&(O[q]=()=>F[q]);f.d(d,O);var I=f(1396),O={};for(const q in I)["default","DbCon","Client","Processor"].indexOf(q)<0&&(O[q]=()=>I[q]);f.d(d,O);var O={};for(const q in T)["default","DbCon","Client","Processor"].indexOf(q)<0&&(O[q]=()=>T[q]);f.d(d,O);var A=f(3962),O={};for(const q in A)["default","DbCon","Client","Processor"].indexOf(q)<0&&(O[q]=()=>A[q]);f.d(d,O);var R=f(8764).Buffer;function D(q,j){var L=Object.keys(q);if(Object.getOwnPropertySymbols){var K=Object.getOwnPropertySymbols(q);j&&(K=K.filter(function(Z){return Object.getOwnPropertyDescriptor(q,Z).enumerable})),L.push.apply(L,K)}return L}function P(q){for(var j=1;j<arguments.length;j++){var L=arguments[j]!=null?arguments[j]:{};j%2?D(Object(L),!0).forEach(function(K){ne(q,K,L[K])}):Object.getOwnPropertyDescriptors?Object.defineProperties(q,Object.getOwnPropertyDescriptors(L)):D(Object(L)).forEach(function(K){Object.defineProperty(q,K,Object.getOwnPropertyDescriptor(L,K))})}return q}function U(q){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?U=function(L){return typeof L}:U=function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},U(q)}function Y(q,j){return J(q)||H(q,j)||W(q,j)||z()}function z(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W(q,j){if(q){if(typeof q=="string")return V(q,j);var L=Object.prototype.toString.call(q).slice(8,-1);if(L==="Object"&&q.constructor&&(L=q.constructor.name),L==="Map"||L==="Set")return Array.from(q);if(L==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(L))return V(q,j)}}function V(q,j){(j==null||j>q.length)&&(j=q.length);for(var L=0,K=new Array(j);L<j;L++)K[L]=q[L];return K}function H(q,j){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(q)))){var L=[],K=!0,Z=!1,oe=void 0;try{for(var re=q[Symbol.iterator](),ge;!(K=(ge=re.next()).done)&&(L.push(ge.value),!(j&&L.length===j));K=!0);}catch(Se){Z=!0,oe=Se}finally{try{!K&&re.return!=null&&re.return()}finally{if(Z)throw oe}}return L}}function J(q){if(Array.isArray(q))return q}function G(q,j){if(!(q instanceof j))throw new TypeError("Cannot call a class as a function")}function le(q,j){for(var L=0;L<j.length;L++){var K=j[L];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(q,K.key,K)}}function pe(q,j,L){return j&&le(q.prototype,j),L&&le(q,L),q}function ne(q,j,L){return j in q?Object.defineProperty(q,j,{value:L,enumerable:!0,configurable:!0,writable:!0}):q[j]=L,q}var Ae=3;function fe(q){return Array.isArray(q)?q:[q]}function Fe(q,j,L){var K=this;S.XHRConnection.call(this,q,j,L),L.headers["Content-Type"]==="application/vnd.apache.thrift.binary"&&(this.flush=function(){if(K.url===void 0||K.url==="")return K.send_buf;var Z=K.getXmlHttpRequestObject();Z.responseType="arraybuffer",Z.onreadystatechange=function(){Z.readyState===4&&Z.status===200&&K.setRecvBuffer(Z.response)},Z.open("POST",K.url,!0),Object.keys(K.headers).forEach(function(oe){Z.setRequestHeader(oe,K.headers[oe])}),Z.send(K.send_buf)})}m().inherits(Fe,S.XHRConnection),Fe.prototype.getXmlHttpRequestObject=function(){var q=S.XHRConnection.prototype.getXmlHttpRequestObject.call(this);return q.withCredentials=Fe.withCredentials,q};function je(){for(var q=arguments.length,j=new Array(q),L=0;L<q;L++)j[L]=arguments[L];S.TJSONProtocol.apply(this,j)}m().inherits(je,S.TJSONProtocol),je.prototype.writeString=function(q){return q instanceof R||(q=String(q)),S.TJSONProtocol.prototype.writeString.call(this,q)},je.prototype.readI64=function(){var q=S.TJSONProtocol.prototype.readI64.call(this);return q.toNumber(!0)},je.prototype.readBinary=function(){return S.TJSONProtocol.prototype.readString.call(this)};function _t(){for(var q=arguments.length,j=new Array(q),L=0;L<q;L++)j[L]=arguments[L];S.TBinaryProtocol.apply(this,j)}m().inherits(_t,S.TBinaryProtocol),_t.prototype.writeString=function(q){return q instanceof R||(q=String(q)),S.TBinaryProtocol.prototype.writeString.call(this,q)},_t.prototype.readI64=function(){var q=S.TBinaryProtocol.prototype.readI64.call(this);return q.toNumber(!0)},_t.prototype.readBinary=function(){return S.TBinaryProtocol.prototype.readBinary.call(this).toString("base64")};function Ct(q,j){var L=new URL(q),K=L.protocol,Z=L.hostname,oe=L.port;oe===""&&(oe=K==="https:"?"443":"80");var re=null;{var ge=new Fe(Z,oe,{transport:S.TBufferedTransport,protocol:j?_t:je,path:"/",headers:{"Content-Type":"application/vnd.apache.thrift.".concat(j?"binary":"json")},https:K==="https:"});ge.on("error",console.error),re=(0,S.createXHRClient)(b,ge)}return re}var zt=function(){function q(){var j=this;return G(this,q),ne(this,"updateQueryTimes",function(L,K,Z,oe){j.queryTimes[K]=oe}),ne(this,"events",new(o())),ne(this,"EVENT_NAMES",{ERROR:"error",METHOD_CALLED:"method-called"}),ne(this,"handleErrors",function(L){return function(){for(var K=arguments.length,Z=new Array(K),oe=0;oe<K;oe++)Z[oe]=arguments[oe];return L.apply(j,Z).catch(function(re){throw j.events.emit(j.EVENT_NAMES.ERROR,re),re})}}),ne(this,"callbackify",function(L,K){return function(){for(var Z=null,oe=arguments.length,re=new Array(oe),ge=0;ge<oe;ge++)re[ge]=arguments[ge];re.length===K+1&&(Z=re.pop());var Se=j[L].apply(j,re);return Z&&Se.catch(function(He){return Z(He)}).then(function(He){return Z(null,He)}),Se}}),ne(this,"overSingleClient","SINGLE_CLIENT"),ne(this,"overAllClients","ALL_CLIENTS"),ne(this,"wrapThrift",function(L,K,Z){return function(){if(j._sessionId){for(var oe=arguments.length,re=new Array(oe),ge=0;ge<oe;ge++)re[ge]=arguments[ge];var Se=Z(re);return j.events.emit(j.EVENT_NAMES.METHOD_CALLED,L),K===j.overSingleClient?j._client[0][L].apply(j._client[0],[j._sessionId[0]].concat(Se)):Promise.all(j._client.map(function(He,pi){return He[L].apply(He,[j._sessionId[pi]].concat(Se))}))}else return Promise.reject(new Error("You are not connected to a server. Try running the connect method first."))}}),ne(this,"connect",this.callbackify("connectAsync",0)),ne(this,"disconnectAsync",this.handleErrors(function(){return Promise.all(j._client.map(function(L,K){return L.disconnect(j._sessionId[K]).catch(function(Z){if(Z&&!j.isTimeoutError(Z))throw Z})})).then(function(){return j._sessionId=null,j._client=null,j._numConnections=0,j.serverPingTimes=null,j})})),ne(this,"disconnect",this.callbackify("disconnectAsync",0)),ne(this,"getStatusAsync",this.handleErrors(this.wrapThrift("get_status",this.overSingleClient,function(L){return L}))),ne(this,"getStatus",this.callbackify("getStatusAsync",0)),ne(this,"getHardwareInfoAsync",this.handleErrors(this.wrapThrift("get_hardware_info",this.overSingleClient,function(L){return L}))),ne(this,"getHardwareInfo",this.callbackify("getHardwareInfoAsync",0)),ne(this,"getFirstGeoFileInArchiveAsync",this.handleErrors(this.wrapThrift("get_first_geo_file_in_archive",this.overSingleClient,function(L){return L}))),ne(this,"getFilesInArchiveAsync",this.handleErrors(this.wrapThrift("get_all_files_in_archive",this.overSingleClient,function(L){return L}))),ne(this,"getUsersAsync",this.handleErrors(this.wrapThrift("get_users",this.overSingleClient,function(L){return L}))),ne(this,"importTableStatusAsync",this.handleErrors(this.wrapThrift("import_table_status",this.overSingleClient,function(L){return L}))),ne(this,"getRolesAsync",this.handleErrors(this.wrapThrift("get_roles",this.overSingleClient,function(L){return L}))),ne(this,"getDashboardsAsync",this.handleErrors(this.wrapThrift("get_dashboards",this.overSingleClient,function(L){return L}))),ne(this,"getDashboardAsync",this.handleErrors(this.wrapThrift("get_dashboard",this.overSingleClient,function(L){return L}))),ne(this,"createDashboardAsync",this.handleErrors(this.wrapThrift("create_dashboard",this.overAllClients,function(L){return L}))),ne(this,"replaceDashboardAsync",this.handleErrors(this.wrapThrift("replace_dashboard",this.overAllClients,function(L){return L}))),ne(this,"deleteDashboardAsync",this.handleErrors(this.wrapThrift("delete_dashboard",this.overAllClients,function(L){return L}))),ne(this,"deleteDashboardsAsync",this.handleErrors(this.wrapThrift("delete_dashboards",this.overAllClients,function(L){return L}))),ne(this,"shareDashboardAsync",this.handleErrors(this.wrapThrift("share_dashboard",this.overAllClients,function(L){var K=Y(L,4),Z=K[0],oe=K[1],re=K[2],ge=K[3];return[Z,oe,re,new T.TDashboardPermissions(ge)]}))),ne(this,"shareDashboardsAsync",this.handleErrors(this.wrapThrift("share_dashboards",this.overAllClients,function(L){var K=Y(L,3),Z=K[0],oe=K[1],re=K[2];return[Z,oe,new T.TDashboardPermissions(re)]}))),ne(this,"unshareDashboardAsync",this.handleErrors(this.wrapThrift("unshare_dashboard",this.overAllClients,function(L){var K=Y(L,4),Z=K[0],oe=K[1],re=K[2],ge=K[3];return[Z,oe,re,new T.TDashboardPermissions(ge)]}))),ne(this,"unshareDashboardsAsync",this.handleErrors(this.wrapThrift("unshare_dashboards",this.overAllClients,function(L){var K=Y(L,3),Z=K[0],oe=K[1],re=K[2];return[Z,oe,new T.TDashboardPermissions(re)]}))),ne(this,"getDashboardGranteesAsync",this.handleErrors(this.wrapThrift("get_dashboard_grantees",this.overSingleClient,function(L){return L}))),ne(this,"getDbObjectsForGranteeAsync",this.handleErrors(this.wrapThrift("get_db_objects_for_grantee",this.overSingleClient,function(L){return L}))),ne(this,"getDbObjectPrivsAsync",this.handleErrors(this.wrapThrift("get_db_object_privs",this.overSingleClient,function(L){var K=Y(L,2),Z=K[0],oe=K[1];return[Z,T.TDBObjectType[oe]]}))),ne(this,"getAllRolesForUserAsync",this.handleErrors(this.wrapThrift("get_all_roles_for_user",this.overSingleClient,function(L){return L}))),ne(this,"getAllEffectiveRolesForUserAsync",this.handleErrors(this.wrapThrift("get_all_effective_roles_for_user",this.overSingleClient,function(L){return L}))),ne(this,"hasObjectPrivilegesAsync",this.handleErrors(this.wrapThrift("has_object_privilege",this.overSingleClient,function(L){return L}))),ne(this,"hasDbPrivilegesAsync",function(L,K,Z){return j.hasObjectPrivilegesAsync(L,K,T.TDBObjectType.DatabaseDBObjectType,new T.TDBObjectPermissions({database_permissions_:new T.TDatabasePermissions(Z)}))}),ne(this,"getSessionInfoAsync",this.handleErrors(this.wrapThrift("get_session_info",this.overSingleClient,function(L){return L}))),ne(this,"createCustomExpressionAsync",this.handleErrors(this.wrapThrift("create_custom_expression",this.overSingleClient,function(L){return L}))),ne(this,"getCustomExpressionsAsync",this.handleErrors(this.wrapThrift("get_custom_expressions",this.overSingleClient,function(L){return L}))),ne(this,"updateCustomExpressionAsync",this.handleErrors(this.wrapThrift("update_custom_expression",this.overSingleClient,function(L){return L}))),ne(this,"deleteCustomExpressionsAsync",this.handleErrors(this.wrapThrift("delete_custom_expressions",this.overSingleClient,function(L){return L}))),ne(this,"detectColumnTypesAsync",this.handleErrors(function(L,K){var Z=j.wrapThrift("detect_column_types",j.overSingleClient,function(){return[L,B.Dq(K)]});return Z().then(function(oe){return j.importerRowDesc=oe.row_set.row_desc,oe})})),ne(this,"queryAsync",this.handleErrors(function(L,K){var Z=!0,oe=!1,re=null,ge=!1,Se=-1,He=(j._nonce++).toString();K&&(Z=K.hasOwnProperty("columnarResults")?K.columnarResults:Z,oe=K.hasOwnProperty("eliminateNullRows")?K.eliminateNullRows:oe,re=K.hasOwnProperty("queryId")?K.queryId:re,ge=K.hasOwnProperty("returnTiming")?K.returnTiming:ge,Se=K.hasOwnProperty("limit")?K.limit:Se,He=K.hasOwnProperty("logValues")?U(K.logValues)==="object"?JSON.stringify(K.logValues):K.logValues:He);var pi=re in j.queryTimes?j.queryTimes[re]:j.DEFAULT_QUERY_TIME,Bi=0,Qt={returnTiming:ge,eliminateNullRows:oe,query:L,queryId:re,conId:Bi,estimatedQueryTime:pi,startTime:Date.now()},$s=-1,lr=j.wrapThrift("sql_execute",j.overSingleClient,function(he){return he}),cr=function he(){return lr(L,Z,He,Se,$s).catch(function(as){if(as.name==="NetworkError"){if(j.removeConnection(0),j._numConnections===0)throw as.msg="No remaining database connections",as;return he()}throw as})};return j.processResults(Qt,cr())})),ne(this,"query",this.callbackify("queryAsync",2)),ne(this,"queryDFAsync",this.handleErrors(function(L,K){var Z=0,oe=-1,re=j.wrapThrift("sql_execute_df",j.overSingleClient,function(){return[L,l.TDeviceType.CPU,Z,oe,T.TArrowTransport.WIRE]});return re().then(function(ge){j._logging&&console.log(L,"on Server",0,"- Execution Time:",ge.execution_time_ms,"ms");var Se=R.from(ge.df_buffer,"base64"),He=(0,g.tableFromIPC)(Se);return K&&K.returnTiming&&(He={results:He,timing:{execution_time_ms:ge.execution_time_ms}}),He})})),ne(this,"queryDF",this.callbackify("queryDFAsync",2)),ne(this,"validateQuery",this.handleErrors(function(L){var K=j.wrapThrift("sql_validate",j.overSingleClient,function(Z){return Z});return K(L).then(function(Z){var oe=Z.reduce(function(re,ge){return re[ge.col_name]=ge,re},{});return j.convertFromThriftTypes(oe)})})),ne(this,"getTablesAsync",this.handleErrors(function(){var L=j.wrapThrift("get_tables",j.overSingleClient,function(K){return K});return L().then(function(K){return K.map(function(Z){return{name:Z,label:"obs"}})})})),ne(this,"getTables",this.callbackify("getTablesAsync",0)),ne(this,"getTablesWithMetaAsync",this.handleErrors(function(){var L=j.wrapThrift("get_tables_meta",j.overSingleClient,function(K){return K});return L().then(function(K){return K.map(function(Z){return{name:Z.table_name,num_cols:Number(Z.num_cols.toString()),col_datum_types:Z.col_types.map(function(oe){return j._datumEnum[oe.type]}),is_view:Z.is_view,is_replicated:Z.is_replicated,shard_count:Number(Z.shard_count.toString()),max_rows:isFinite(Z.max_rows)?Number(Z.max_rows.toString()):-1}})})})),ne(this,"getTablesWithMeta",this.callbackify("getTablesWithMetaAsync",0)),ne(this,"getTablesMetaAsync",this.handleErrors(this.wrapThrift("get_tables_meta",this.overSingleClient,function(L){return L}))),ne(this,"getTablesMeta",this.callbackify("getTablesMetaAsync",0)),ne(this,"getTableEpochByNameAsync",this.handleErrors(this.wrapThrift("get_table_epoch_by_name",this.overSingleClient,function(L){return L}))),ne(this,"getTableEpochByName",this.callbackify("getTableEpochByNameAsync",0)),ne(this,"getTableFunctionNamesAsync",this.handleErrors(this.wrapThrift("get_table_function_names",this.overSingleClient,function(L){return L}))),ne(this,"getTableFunctionNames",this.callbackify("getTableFunctionNamesAsync",0)),ne(this,"getRuntimeTableFunctionNamesAsync",this.handleErrors(this.wrapThrift("get_runtime_table_function_names",this.overSingleClient,function(L){return L}))),ne(this,"getRuntimeTableFunctionNames",this.callbackify("getRuntimeTableFunctionNamesAsync",0)),ne(this,"getTableFunctionDetailsAsync",this.handleErrors(this.wrapThrift("get_table_function_details",this.overSingleClient,function(L){return L}))),ne(this,"getTableFunctionDetails",this.callbackify("getTableFunctionDetailsAsync",0)),ne(this,"getCompletionHintsAsync",this.handleErrors(this.wrapThrift("get_completion_hints",this.overSingleClient,function(L){var K=Y(L,2),Z=K[0],oe=K[1].cursor;return[Z,oe]}))),ne(this,"getCompletionHints",this.callbackify("getCompletionHintsAsync",2)),ne(this,"buildTFileTypeMap",function(){for(var L in T.TFileType)T.TFileType.hasOwnProperty(L)&&(j.TFileTypeMap[T.TFileType[L]]=L)}),ne(this,"buildTImportHeaderRowMap",function(){for(var L in T.TImportHeaderRow)T.TImportHeaderRow.hasOwnProperty(L)&&(j.TImportHeaderRowMap[T.TImportHeaderRow[L]]=L)}),ne(this,"buildTEncodingTypeMap",function(){for(var L in l.TEncodingType)l.TEncodingType.hasOwnProperty(L)&&(j.TEncodingTypeMap[l.TEncodingType[L]]=L)}),ne(this,"buildTRasterPointTypeMap",function(){for(var L in T.TRasterPointType)T.TRasterPointType.hasOwnProperty(L)&&(j.TRasterPointTypeMap[T.TRasterPointType[L]]=L)}),ne(this,"buildTRasterPointTransformMap",function(){for(var L in T.TRasterPointTransform)T.TRasterPointTransform.hasOwnProperty(L)&&(j.TRasterPointTransformMap[T.TRasterPointTransform[L]]=L)}),ne(this,"buildTSourceTypeMap",function(){for(var L in T.TSourceType)T.TSourceType.hasOwnProperty(L)&&(j.TSourceTypeMap[T.TSourceType[L]]=L)}),ne(this,"getFieldsAsync",this.handleErrors(function(L){var K=j.wrapThrift("get_table_details",j.overSingleClient,function(Z){return Z});return K(L).then(function(Z){if(Z){var oe=Z.row_desc.reduce(function(re,ge){return re[ge.col_name]=ge,re},{});return P(P({},Z),{},{columns:j.convertFromThriftTypes(oe)})}else throw new Error("Table (".concat(L,") not found"))})})),ne(this,"getFields",this.callbackify("getFieldsAsync",1)),ne(this,"createTableAsync",this.handleErrors(this.wrapThrift("create_table",this.overAllClients,function(L){var K=Y(L,3),Z=K[0],oe=K[1],re=K[2];return[Z,B.HP(oe,j.importerRowDesc),re]}))),ne(this,"createTable",this.callbackify("createTableAsync",4)),ne(this,"importTableAsync",this.handleErrors(this.wrapThrift("import_table",this.overAllClients,function(L){var K=Y(L,3),Z=K[0],oe=K[1],re=K[2];return[Z,oe,B.Dq(re)]}))),ne(this,"importTableGeoAsync",this.handleErrors(this.wrapThrift("import_geo_table",this.overAllClients,function(L){var K=Y(L,4),Z=K[0],oe=K[1],re=K[2],ge=K[3];return[Z,oe,B.Dq(re),B.HP(ge,j.importerRowDesc),new T.TCreateParams]}))),ne(this,"renderVegaAsync",this.handleErrors(function(L,K,Z){var oe=null,re=Ae;Z&&(oe=Z.hasOwnProperty("queryId")?Z.queryId:oe,re=Z.hasOwnProperty("compressionLevel")?Z.compressionLevel:re);var ge=oe in j.queryTimes?j.queryTimes[oe]:j.DEFAULT_QUERY_TIME,Se=(j._nonce++).toString();Z&&(Se=Z.hasOwnProperty("logValues")?U(Z.logValues)==="object"?JSON.stringify(Z.logValues):Z.logValues:Se);var He=0;j._lastRenderCon=He;var pi={isImage:!0,query:"render: ".concat(K),queryId:oe,conId:He,estimatedQueryTime:ge},Bi=j.wrapThrift("render_vega",j.overSingleClient,function(Qt){return Qt});return j.processResults(pi,Bi(L,K,re,Se))})),ne(this,"renderVega",this.callbackify("renderVegaAsync",3)),ne(this,"getResultRowForPixelAsync",this.handleErrors(function(L,K,Z){var oe=arguments.length>3&&arguments[3]!==void 0?arguments[3]:2;K instanceof T.TPixel||(K=new T.TPixel(K));var re=!0,ge=(j._nonce++).toString();return j._client[j._lastRenderCon].get_result_row_for_pixel(j._sessionId[j._lastRenderCon],L,K,Z,re,oe,ge).then(function(Se){Se=Array.isArray(Se)?Se.pixel_rows:[Se];for(var He={isImage:!1,eliminateNullRows:!1,query:"pixel request",queryId:-2},pi=(0,x.Z)(j._logging,j.updateQueryTimes),Bi=Se.length,Qt=0;Qt<Bi;Qt++)Se[Qt].row_set=pi(He,j._datumEnum,Se[Qt]);return Se})})),ne(this,"getResultRowForPixel",this.callbackify("getResultRowForPixelAsync",4)),this._useBinaryProtocol=!1,this._host=null,this._user=null,this._password=null,this._port=null,this._dbName=null,this._client=null,this._sessionId=null,this._protocol=null,this._disableAutoReconnect=!1,this._datumEnum={},this.TFileTypeMap={},this.TEncodingTypeMap={},this.TImportHeaderRowMap={},this.TRasterPointTypeMap={},this.TRasterPointTransformMap={},this.TSourceTypeMap={},this._logging=!1,this._platform="heavydb",this._nonce=0,this._balanceStrategy="adaptive",this._numConnections=0,this._lastRenderCon=0,this.queryTimes={},this.serverQueueTimes=null,this.serverPingTimes=null,this.pingCount=null,this.DEFAULT_QUERY_TIME=50,this.NUM_PINGS_PER_SERVER=4,this.importerRowDesc=null,this.invertDatumTypes(),this.buildTFileTypeMap(),this.buildTEncodingTypeMap(),this.buildTImportHeaderRowMap(),this.buildTRasterPointTypeMap(),this.buildTRasterPointTransformMap(),this.buildTSourceTypeMap(),this.processResults=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},K=arguments.length>1?arguments[1]:void 0;return K.catch(function(Z){throw j._logging&&L.query&&console.error(L.query,`
`,Z),Z}).then(function(Z){var oe=(0,x.Z)(j._logging,j.updateQueryTimes),re=oe(L,j._datumEnum,Z);return re})},this}return pe(q,[{key:"removeConnection",value:function(L){if(L<0||L>=this.numConnections){var K={msg:"Remove connection id invalid"};throw K}this._client.splice(L,1),this._sessionId.splice(L,1),this._numConnections--}},{key:"xhrWithCredentials",value:function(L){Fe.withCredentials=!!L}},{key:"initClients",value:function(){var L=Array.isArray(this._host)&&Array.isArray(this._port)&&Array.isArray(this._dbName);if(!L)throw new Error("Host, port, and dbName must be arrays.");if(this._client=[],this._sessionId=[],this._host[0]){if(!this._port[0])throw new Error("Please enter a port.")}else throw new Error("Please enter a host name.");var K=this._host.length;if(K<1)throw new Error("Must have at least one server to connect to.");if(K!==this._port.length)throw new Error("Array connection parameters must be of equal length.");this._protocol||(this._protocol=this._host.map(function(){return window.location.protocol.replace(":","")}));for(var Z=this.getEndpoints(),oe=[],re=0;re<K;re++){var ge=Ct(Z[re],this._useBinaryProtocol);oe.push(ge)}return this._client=oe,this._numConnections=this._client.length,this}},{key:"connectAsync",value:function(){var L=this;if(!Array.isArray(this._user)||!Array.isArray(this._password))return Promise.reject("Username and password must be arrays.");if(this._dbName[0])if(this._user[0]){if(!this._password[0])return Promise.reject("Please enter a password.")}else return Promise.reject("Please enter a username.");else return Promise.reject("Please enter a database.");var K=this._host.length;if(K<1)return Promise.reject("Must have at least one server to connect to.");if(K!==this._port.length||K!==this._user.length||K!==this._password.length||K!==this._dbName.length)return Promise.reject("Array connection parameters must be of equal length.");var Z=[];return this.initClients(),Z=this._client,this._client=[],Promise.all(Z.map(function(oe,re){return oe.connect(L._user[re],L._password[re],L._dbName[re]).then(function(ge){return L._client.push(oe),L._sessionId.push(ge),null})})).then(function(){return L})}},{key:"convertFromThriftTypes",value:function(L){var K=[];for(var Z in L)L.hasOwnProperty(Z)&&K.push({name:Z,type:this._datumEnum[L[Z].col_type.type],precision:L[Z].col_type.precision,is_array:L[Z].col_type.is_array,is_dict:L[Z].col_type.encoding===l.TEncodingType.DICT});return K}},{key:"invertDatumTypes",value:function(){var L=l.TDatumType;for(var K in L)L.hasOwnProperty(K)&&(this._datumEnum[L[K]]=K)}},{key:"importTableAsyncWrapper",value:function(L){return L?this.importTableGeoAsync.bind(this):this.importTableAsync.bind(this)}},{key:"importTable",value:function(L,K,Z,oe,re,ge){if(re){var Se=this.callbackify("importTableGeoAsync",4);return Se(L,K,Z,oe,ge)}else{var He=this.callbackify("importTableAsync",3);return He(L,K,Z,ge)}}},{key:"sessionId",value:function(L){return arguments.length?(this._sessionId=fe(L),this):this._sessionId}},{key:"useBinaryProtocol",value:function(L){return arguments.length?(this._useBinaryProtocol=!!L,this):this._useBinaryProtocol}},{key:"host",value:function(L){return arguments.length?(this._host=fe(L),this):this._host}},{key:"port",value:function(L){return arguments.length?(this._port=fe(L),this):this._port}},{key:"user",value:function(L){return arguments.length?(this._user=fe(L),this):this._user}},{key:"password",value:function(L){return arguments.length?(this._password=fe(L),this):this._password}},{key:"dbName",value:function(L){return arguments.length?(this._dbName=fe(L),this):this._dbName}},{key:"logging",value:function(L){if(typeof L>"u")return this._logging;if(typeof L!="boolean")return"logging can only be set with boolean values";this._logging=L;var K=L?"enabled":"disabled";return"SQL logging is now ".concat(K)}},{key:"platform",value:function(L){return arguments.length?(this._platform=L,this):this._platform}},{key:"numConnections",value:function(){return this._numConnections}},{key:"protocol",value:function(L){return arguments.length?(this._protocol=fe(L),this):this._protocol}},{key:"disableAutoReconnect",value:function(L){return arguments.length?(this._disableAutoReconnect=L,this):this._disableAutoReconnect}},{key:"getEndpoints",value:function(){var L=this;return this._host.map(function(K,Z){return"".concat(L._protocol[Z],"://").concat(K,":").concat(L._port[Z])})}},{key:"setLicenseKey",value:function(L,K){var Z=K.protocol,oe=K.host,re=K.port,ge=Array.isArray(this._client)&&this._client[0],Se=this._sessionId&&this._sessionId[0];if(!ge){var He="".concat(Z,"://").concat(oe,":").concat(re);ge=Ct(He,this._useBinaryProtocol),Se=""}return ge.set_license_key(Se,L,this._nonce++)}},{key:"getLicenseClaims",value:function(L){var K=L.protocol,Z=L.host,oe=L.port,re=Array.isArray(this._client)&&this._client[0],ge=this._sessionId&&this._sessionId[0];if(!re){var Se="".concat(K,"://").concat(Z,":").concat(oe);re=Ct(Se,this._useBinaryProtocol),ge=""}return re.get_license_claims(ge,this._nonce++)}},{key:"isTimeoutError",value:function(L){return L instanceof T.TDBException&&(String(L.error_msg).indexOf("Session not valid.")!==-1||String(L.error_msg).indexOf("User should re-authenticate.")!==-1)}}]),q}();const _e=zt},2033:(c,d,f)=>{f.d(d,{Dq:()=>o,HP:()=>g,RK:()=>w,kS:()=>m});var u=f(2607),o=function(T){return new u.TCopyParams(T)},g=function(T,b){return T.forEach(function(S,x){b[x].col_name=S.clean_col_name,b[x].col_type.encoding=S.col_type.encoding,b[x].col_type.precision=S.col_type.precision,b[x].col_type.comp_param=S.col_type.comp_param,b[x].col_type.scale=S.col_type.scale,b[x].col_type.type=S.col_type.type}),b};function w(l,T){var b=Math.pow(10,T-3),S=l/b;return S}function m(l){return l.toNumber?!!l.toNumber(!0):!!l}},5141:(c,d,f)=>{f.d(d,{Z:()=>w});var u=f(2033);function o(m,l,T){var b={fields:[],results:[]},S=m.row_desc.length,x=typeof m.columns[0]>"u"?0:m.columns[0].nulls.length;b.fields=m.row_desc.map(function(J){return{name:J.col_name,type:T[J.col_type.type],is_array:J.col_type.is_array}});for(var B=0;B<x;B++){if(l){for(var F=!1,I=0;I<S;I++)if(m.columns[I].nulls[B]){F=!0;break}if(F)continue}for(var A={},O=0;O<S;O++){var R=b.fields[O].name,D=b.fields[O].type,P=b.fields[O].is_array,U=m.columns[O].nulls[B],Y=m.row_desc[O].col_type.precision;if(U){A[R]=null;continue}if(P){A[R]=[];for(var z=m.columns[O].data.arr_col[B].nulls.length,W=0;W<z;W++){if(m.columns[O].data.arr_col[B].nulls[W]){A[R].push("NULL");continue}switch(D){case"BOOL":A[R].push((0,u.kS)(m.columns[O].data.arr_col[B].data.int_col[W]));break;case"SMALLINT":case"INT":case"BIGINT":case"TINYINT":A[R].push(m.columns[O].data.arr_col[B].data.int_col[W]);break;case"FLOAT":case"DOUBLE":case"DECIMAL":A[R].push(m.columns[O].data.arr_col[B].data.real_col[W]);break;case"STR":A[R].push(m.columns[O].data.arr_col[B].data.str_col[W]);break;case"TIME":case"TIMESTAMP":case"DATE":var V=(0,u.RK)(m.columns[O].data.int_col[B],Y);A[R].push(V);break;default:throw new Error("Unrecognized array field type: ".concat(D))}}}else switch(D){case"BOOL":A[R]=(0,u.kS)(m.columns[O].data.int_col[B]);break;case"SMALLINT":case"INT":case"BIGINT":case"TINYINT":A[R]=m.columns[O].data.int_col[B];break;case"FLOAT":case"DOUBLE":case"DECIMAL":A[R]=m.columns[O].data.real_col[B];break;case"STR":A[R]=m.columns[O].data.str_col[B];break;case"TIME":case"TIMESTAMP":case"DATE":var H=(0,u.RK)(m.columns[O].data.int_col[B],Y);A[R]=new Date(H);break;case"POINT":case"LINESTRING":case"POLYGON":case"MULTIPOLYGON":A[R]=m.columns[O].data.str_col[B];break;default:throw new Error("Unrecognized field type: ".concat(D))}}b.results.push(A)}return b}function g(m,l,T){var b=m.row_desc.length,S={fields:[],results:[]};S.fields=m.row_desc.map(function(G){return{name:G.col_name,type:T[G.col_type.type],is_array:G.col_type.is_array}}),S.results=[];var x=0;typeof m.rows<"u"&&m.rows!==null&&(x=m.rows.length);for(var B=0;B<x;B++){if(l){for(var F=!1,I=0;I<b;I++)if(m.rows[B].columns[I].is_null){F=!0;break}if(F)continue}for(var A={},O=0;O<b;O++){var R=S.fields[O].name,D=S.fields[O].type,P=S.fields[O].is_array,U=m.row_desc[O].col_type.precision;if(P){if(m.rows[B].cols[O].is_null){A[R]="NULL";continue}A[R]=[];for(var Y=m.rows[B].cols[O].val.arr_val.length,z=0;z<Y;z++){var W=m.rows[B].cols[O].val.arr_val[z];if(W.is_null){A[R].push("NULL");continue}switch(D){case"BOOL":A[R].push((0,u.kS)(W.val.int_val));break;case"SMALLINT":case"INT":case"BIGINT":case"TINYINT":A[R].push(W.val.int_val);break;case"FLOAT":case"DOUBLE":case"DECIMAL":A[R].push(W.val.real_val);break;case"STR":A[R].push(W.val.str_val);break;case"TIME":case"TIMESTAMP":case"DATE":var V=(0,u.RK)(W.val.int_val,U);A[R].push(V);break;default:throw new Error("Unrecognized array field type: ".concat(D))}}}else{var H=m.rows[B].cols[O];if(H.is_null){A[R]="NULL";continue}switch(D){case"BOOL":A[R]=(0,u.kS)(H.val.int_val);break;case"SMALLINT":case"INT":case"BIGINT":case"TINYINT":A[R]=H.val.int_val;break;case"FLOAT":case"DOUBLE":case"DECIMAL":A[R]=H.val.real_val;break;case"STR":A[R]=H.val.str_val;break;case"TIME":case"TIMESTAMP":case"DATE":var J=(0,u.RK)(H.val.int_val,U);A[R]=new Date(J);break;case"POINT":case"LINESTRING":case"POLYGON":case"MULTIPOLYGON":A[R]=H.val.str_val;break;default:throw new Error("Unrecognized field type: ".concat(D))}}}S.results.push(A)}return S}function w(m,l){return function(T,b,S){var x=!1,B=!1,F=null,I=null,A=null,O=null;if(typeof T<"u"&&(x=T.isImage?T.isImage:!1,B=T.eliminateNullRows?T.eliminateNullRows:!1,F=T.query?T.query:null,I=T.queryId?T.queryId:null,A=typeof T.conId>"u"?null:T.conId,O=typeof T.estimatedQueryTime>"u"?null:T.estimatedQueryTime),S.execution_time_ms&&A!==null&&O!==null&&l(A,I,O,S.execution_time_ms),m&&S.execution_time_ms&&console.log(F,"on Server",A,"- Execution Time:",S.execution_time_ms,"ms, Total Time:",S.total_time_ms,"ms, Real Time:",T.startTime?Date.now()-T.startTime:void 0,"ms"),x)return S;var R=null;if(!S.row_set)throw new Error("No result to process");return S.row_set.is_columnar?R=o(S.row_set,B,b):R=g(S.row_set,B,b),R.timing={execution_time_ms:S.execution_time_ms,total_time_ms:S.total_time_ms},T.returnTiming?R:R.results}}},9742:(c,d)=>{d.byteLength=T,d.toByteArray=S,d.fromByteArray=F;for(var f=[],u=[],o=typeof Uint8Array<"u"?Uint8Array:Array,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w=0,m=g.length;w<m;++w)f[w]=g[w],u[g.charCodeAt(w)]=w;u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63;function l(I){var A=I.length;if(A%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var O=I.indexOf("=");O===-1&&(O=A);var R=O===A?0:4-O%4;return[O,R]}function T(I){var A=l(I),O=A[0],R=A[1];return(O+R)*3/4-R}function b(I,A,O){return(A+O)*3/4-O}function S(I){var A,O=l(I),R=O[0],D=O[1],P=new o(b(I,R,D)),U=0,Y=D>0?R-4:R,z;for(z=0;z<Y;z+=4)A=u[I.charCodeAt(z)]<<18|u[I.charCodeAt(z+1)]<<12|u[I.charCodeAt(z+2)]<<6|u[I.charCodeAt(z+3)],P[U++]=A>>16&255,P[U++]=A>>8&255,P[U++]=A&255;return D===2&&(A=u[I.charCodeAt(z)]<<2|u[I.charCodeAt(z+1)]>>4,P[U++]=A&255),D===1&&(A=u[I.charCodeAt(z)]<<10|u[I.charCodeAt(z+1)]<<4|u[I.charCodeAt(z+2)]>>2,P[U++]=A>>8&255,P[U++]=A&255),P}function x(I){return f[I>>18&63]+f[I>>12&63]+f[I>>6&63]+f[I&63]}function B(I,A,O){for(var R,D=[],P=A;P<O;P+=3)R=(I[P]<<16&16711680)+(I[P+1]<<8&65280)+(I[P+2]&255),D.push(x(R));return D.join("")}function F(I){for(var A,O=I.length,R=O%3,D=[],P=16383,U=0,Y=O-R;U<Y;U+=P)D.push(B(I,U,U+P>Y?Y:U+P));return R===1?(A=I[O-1],D.push(f[A>>2]+f[A<<4&63]+"==")):R===2&&(A=(I[O-2]<<8)+I[O-1],D.push(f[A>>10]+f[A>>4&63]+f[A<<2&63]+"=")),D.join("")}},3818:(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0});var f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},u=typeof window<"u"&&typeof window.document<"u",o=(typeof self>"u"?"undefined":f(self))==="object"&&self.constructor&&self.constructor.name==="DedicatedWorkerGlobalScope",g=typeof process<"u"&&process.versions!=null&&process.versions.node!=null,w=function(){return typeof window<"u"&&window.name==="nodejs"||navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")};d.isBrowser=u,d.isWebWorker=o,d.isNode=g,d.isJsDom=w},8764:(c,d,f)=>{/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */const u=f(9742),o=f(645),g=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;d.Buffer=T,d.SlowBuffer=P,d.INSPECT_MAX_BYTES=50;const w=2147483647;d.kMaxLength=w,T.TYPED_ARRAY_SUPPORT=m(),!T.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function m(){try{const C=new Uint8Array(1),M={foo:function(){return 42}};return Object.setPrototypeOf(M,Uint8Array.prototype),Object.setPrototypeOf(C,M),C.foo()===42}catch{return!1}}Object.defineProperty(T.prototype,"parent",{enumerable:!0,get:function(){if(T.isBuffer(this))return this.buffer}}),Object.defineProperty(T.prototype,"offset",{enumerable:!0,get:function(){if(T.isBuffer(this))return this.byteOffset}});function l(C){if(C>w)throw new RangeError('The value "'+C+'" is invalid for option "size"');const M=new Uint8Array(C);return Object.setPrototypeOf(M,T.prototype),M}function T(C,M,N){if(typeof C=="number"){if(typeof M=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return B(C)}return b(C,M,N)}T.poolSize=8192;function b(C,M,N){if(typeof C=="string")return F(C,M);if(ArrayBuffer.isView(C))return A(C);if(C==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof C);if(Ki(C,ArrayBuffer)||C&&Ki(C.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ki(C,SharedArrayBuffer)||C&&Ki(C.buffer,SharedArrayBuffer)))return O(C,M,N);if(typeof C=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const $=C.valueOf&&C.valueOf();if($!=null&&$!==C)return T.from($,M,N);const X=R(C);if(X)return X;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof C[Symbol.toPrimitive]=="function")return T.from(C[Symbol.toPrimitive]("string"),M,N);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof C)}T.from=function(C,M,N){return b(C,M,N)},Object.setPrototypeOf(T.prototype,Uint8Array.prototype),Object.setPrototypeOf(T,Uint8Array);function S(C){if(typeof C!="number")throw new TypeError('"size" argument must be of type number');if(C<0)throw new RangeError('The value "'+C+'" is invalid for option "size"')}function x(C,M,N){return S(C),C<=0?l(C):M!==void 0?typeof N=="string"?l(C).fill(M,N):l(C).fill(M):l(C)}T.alloc=function(C,M,N){return x(C,M,N)};function B(C){return S(C),l(C<0?0:D(C)|0)}T.allocUnsafe=function(C){return B(C)},T.allocUnsafeSlow=function(C){return B(C)};function F(C,M){if((typeof M!="string"||M==="")&&(M="utf8"),!T.isEncoding(M))throw new TypeError("Unknown encoding: "+M);const N=U(C,M)|0;let $=l(N);const X=$.write(C,M);return X!==N&&($=$.slice(0,X)),$}function I(C){const M=C.length<0?0:D(C.length)|0,N=l(M);for(let $=0;$<M;$+=1)N[$]=C[$]&255;return N}function A(C){if(Ki(C,Uint8Array)){const M=new Uint8Array(C);return O(M.buffer,M.byteOffset,M.byteLength)}return I(C)}function O(C,M,N){if(M<0||C.byteLength<M)throw new RangeError('"offset" is outside of buffer bounds');if(C.byteLength<M+(N||0))throw new RangeError('"length" is outside of buffer bounds');let $;return M===void 0&&N===void 0?$=new Uint8Array(C):N===void 0?$=new Uint8Array(C,M):$=new Uint8Array(C,M,N),Object.setPrototypeOf($,T.prototype),$}function R(C){if(T.isBuffer(C)){const M=D(C.length)|0,N=l(M);return N.length===0||C.copy(N,0,0,M),N}if(C.length!==void 0)return typeof C.length!="number"||Zl(C.length)?l(0):I(C);if(C.type==="Buffer"&&Array.isArray(C.data))return I(C.data)}function D(C){if(C>=w)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+w.toString(16)+" bytes");return C|0}function P(C){return+C!=C&&(C=0),T.alloc(+C)}T.isBuffer=function(M){return M!=null&&M._isBuffer===!0&&M!==T.prototype},T.compare=function(M,N){if(Ki(M,Uint8Array)&&(M=T.from(M,M.offset,M.byteLength)),Ki(N,Uint8Array)&&(N=T.from(N,N.offset,N.byteLength)),!T.isBuffer(M)||!T.isBuffer(N))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(M===N)return 0;let $=M.length,X=N.length;for(let te=0,se=Math.min($,X);te<se;++te)if(M[te]!==N[te]){$=M[te],X=N[te];break}return $<X?-1:X<$?1:0},T.isEncoding=function(M){switch(String(M).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},T.concat=function(M,N){if(!Array.isArray(M))throw new TypeError('"list" argument must be an Array of Buffers');if(M.length===0)return T.alloc(0);let $;if(N===void 0)for(N=0,$=0;$<M.length;++$)N+=M[$].length;const X=T.allocUnsafe(N);let te=0;for($=0;$<M.length;++$){let se=M[$];if(Ki(se,Uint8Array))te+se.length>X.length?(T.isBuffer(se)||(se=T.from(se)),se.copy(X,te)):Uint8Array.prototype.set.call(X,se,te);else if(T.isBuffer(se))se.copy(X,te);else throw new TypeError('"list" argument must be an Array of Buffers');te+=se.length}return X};function U(C,M){if(T.isBuffer(C))return C.length;if(ArrayBuffer.isView(C)||Ki(C,ArrayBuffer))return C.byteLength;if(typeof C!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof C);const N=C.length,$=arguments.length>2&&arguments[2]===!0;if(!$&&N===0)return 0;let X=!1;for(;;)switch(M){case"ascii":case"latin1":case"binary":return N;case"utf8":case"utf-8":return cr(C).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N*2;case"hex":return N>>>1;case"base64":return Pn(C).length;default:if(X)return $?-1:cr(C).length;M=(""+M).toLowerCase(),X=!0}}T.byteLength=U;function Y(C,M,N){let $=!1;if((M===void 0||M<0)&&(M=0),M>this.length||((N===void 0||N>this.length)&&(N=this.length),N<=0)||(N>>>=0,M>>>=0,N<=M))return"";for(C||(C="utf8");;)switch(C){case"hex":return Ct(this,M,N);case"utf8":case"utf-8":return Ae(this,M,N);case"ascii":return je(this,M,N);case"latin1":case"binary":return _t(this,M,N);case"base64":return ne(this,M,N);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return zt(this,M,N);default:if($)throw new TypeError("Unknown encoding: "+C);C=(C+"").toLowerCase(),$=!0}}T.prototype._isBuffer=!0;function z(C,M,N){const $=C[M];C[M]=C[N],C[N]=$}T.prototype.swap16=function(){const M=this.length;if(M%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let N=0;N<M;N+=2)z(this,N,N+1);return this},T.prototype.swap32=function(){const M=this.length;if(M%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let N=0;N<M;N+=4)z(this,N,N+3),z(this,N+1,N+2);return this},T.prototype.swap64=function(){const M=this.length;if(M%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let N=0;N<M;N+=8)z(this,N,N+7),z(this,N+1,N+6),z(this,N+2,N+5),z(this,N+3,N+4);return this},T.prototype.toString=function(){const M=this.length;return M===0?"":arguments.length===0?Ae(this,0,M):Y.apply(this,arguments)},T.prototype.toLocaleString=T.prototype.toString,T.prototype.equals=function(M){if(!T.isBuffer(M))throw new TypeError("Argument must be a Buffer");return this===M?!0:T.compare(this,M)===0},T.prototype.inspect=function(){let M="";const N=d.INSPECT_MAX_BYTES;return M=this.toString("hex",0,N).replace(/(.{2})/g,"$1 ").trim(),this.length>N&&(M+=" ... "),"<Buffer "+M+">"},g&&(T.prototype[g]=T.prototype.inspect),T.prototype.compare=function(M,N,$,X,te){if(Ki(M,Uint8Array)&&(M=T.from(M,M.offset,M.byteLength)),!T.isBuffer(M))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof M);if(N===void 0&&(N=0),$===void 0&&($=M?M.length:0),X===void 0&&(X=0),te===void 0&&(te=this.length),N<0||$>M.length||X<0||te>this.length)throw new RangeError("out of range index");if(X>=te&&N>=$)return 0;if(X>=te)return-1;if(N>=$)return 1;if(N>>>=0,$>>>=0,X>>>=0,te>>>=0,this===M)return 0;let se=te-X,Oe=$-N;const $e=Math.min(se,Oe),Ue=this.slice(X,te),Ve=M.slice(N,$);for(let We=0;We<$e;++We)if(Ue[We]!==Ve[We]){se=Ue[We],Oe=Ve[We];break}return se<Oe?-1:Oe<se?1:0};function W(C,M,N,$,X){if(C.length===0)return-1;if(typeof N=="string"?($=N,N=0):N>2147483647?N=2147483647:N<-2147483648&&(N=-2147483648),N=+N,Zl(N)&&(N=X?0:C.length-1),N<0&&(N=C.length+N),N>=C.length){if(X)return-1;N=C.length-1}else if(N<0)if(X)N=0;else return-1;if(typeof M=="string"&&(M=T.from(M,$)),T.isBuffer(M))return M.length===0?-1:V(C,M,N,$,X);if(typeof M=="number")return M=M&255,typeof Uint8Array.prototype.indexOf=="function"?X?Uint8Array.prototype.indexOf.call(C,M,N):Uint8Array.prototype.lastIndexOf.call(C,M,N):V(C,[M],N,$,X);throw new TypeError("val must be string, number or Buffer")}function V(C,M,N,$,X){let te=1,se=C.length,Oe=M.length;if($!==void 0&&($=String($).toLowerCase(),$==="ucs2"||$==="ucs-2"||$==="utf16le"||$==="utf-16le")){if(C.length<2||M.length<2)return-1;te=2,se/=2,Oe/=2,N/=2}function $e(Ve,We){return te===1?Ve[We]:Ve.readUInt16BE(We*te)}let Ue;if(X){let Ve=-1;for(Ue=N;Ue<se;Ue++)if($e(C,Ue)===$e(M,Ve===-1?0:Ue-Ve)){if(Ve===-1&&(Ve=Ue),Ue-Ve+1===Oe)return Ve*te}else Ve!==-1&&(Ue-=Ue-Ve),Ve=-1}else for(N+Oe>se&&(N=se-Oe),Ue=N;Ue>=0;Ue--){let Ve=!0;for(let We=0;We<Oe;We++)if($e(C,Ue+We)!==$e(M,We)){Ve=!1;break}if(Ve)return Ue}return-1}T.prototype.includes=function(M,N,$){return this.indexOf(M,N,$)!==-1},T.prototype.indexOf=function(M,N,$){return W(this,M,N,$,!0)},T.prototype.lastIndexOf=function(M,N,$){return W(this,M,N,$,!1)};function H(C,M,N,$){N=Number(N)||0;const X=C.length-N;$?($=Number($),$>X&&($=X)):$=X;const te=M.length;$>te/2&&($=te/2);let se;for(se=0;se<$;++se){const Oe=parseInt(M.substr(se*2,2),16);if(Zl(Oe))return se;C[N+se]=Oe}return se}function J(C,M,N,$){return ka(cr(M,C.length-N),C,N,$)}function G(C,M,N,$){return ka(he(M),C,N,$)}function le(C,M,N,$){return ka(Pn(M),C,N,$)}function pe(C,M,N,$){return ka(as(M,C.length-N),C,N,$)}T.prototype.write=function(M,N,$,X){if(N===void 0)X="utf8",$=this.length,N=0;else if($===void 0&&typeof N=="string")X=N,$=this.length,N=0;else if(isFinite(N))N=N>>>0,isFinite($)?($=$>>>0,X===void 0&&(X="utf8")):(X=$,$=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const te=this.length-N;if(($===void 0||$>te)&&($=te),M.length>0&&($<0||N<0)||N>this.length)throw new RangeError("Attempt to write outside buffer bounds");X||(X="utf8");let se=!1;for(;;)switch(X){case"hex":return H(this,M,N,$);case"utf8":case"utf-8":return J(this,M,N,$);case"ascii":case"latin1":case"binary":return G(this,M,N,$);case"base64":return le(this,M,N,$);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pe(this,M,N,$);default:if(se)throw new TypeError("Unknown encoding: "+X);X=(""+X).toLowerCase(),se=!0}},T.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ne(C,M,N){return M===0&&N===C.length?u.fromByteArray(C):u.fromByteArray(C.slice(M,N))}function Ae(C,M,N){N=Math.min(C.length,N);const $=[];let X=M;for(;X<N;){const te=C[X];let se=null,Oe=te>239?4:te>223?3:te>191?2:1;if(X+Oe<=N){let $e,Ue,Ve,We;switch(Oe){case 1:te<128&&(se=te);break;case 2:$e=C[X+1],($e&192)===128&&(We=(te&31)<<6|$e&63,We>127&&(se=We));break;case 3:$e=C[X+1],Ue=C[X+2],($e&192)===128&&(Ue&192)===128&&(We=(te&15)<<12|($e&63)<<6|Ue&63,We>2047&&(We<55296||We>57343)&&(se=We));break;case 4:$e=C[X+1],Ue=C[X+2],Ve=C[X+3],($e&192)===128&&(Ue&192)===128&&(Ve&192)===128&&(We=(te&15)<<18|($e&63)<<12|(Ue&63)<<6|Ve&63,We>65535&&We<1114112&&(se=We))}}se===null?(se=65533,Oe=1):se>65535&&(se-=65536,$.push(se>>>10&1023|55296),se=56320|se&1023),$.push(se),X+=Oe}return Fe($)}const fe=4096;function Fe(C){const M=C.length;if(M<=fe)return String.fromCharCode.apply(String,C);let N="",$=0;for(;$<M;)N+=String.fromCharCode.apply(String,C.slice($,$+=fe));return N}function je(C,M,N){let $="";N=Math.min(C.length,N);for(let X=M;X<N;++X)$+=String.fromCharCode(C[X]&127);return $}function _t(C,M,N){let $="";N=Math.min(C.length,N);for(let X=M;X<N;++X)$+=String.fromCharCode(C[X]);return $}function Ct(C,M,N){const $=C.length;(!M||M<0)&&(M=0),(!N||N<0||N>$)&&(N=$);let X="";for(let te=M;te<N;++te)X+=ec[C[te]];return X}function zt(C,M,N){const $=C.slice(M,N);let X="";for(let te=0;te<$.length-1;te+=2)X+=String.fromCharCode($[te]+$[te+1]*256);return X}T.prototype.slice=function(M,N){const $=this.length;M=~~M,N=N===void 0?$:~~N,M<0?(M+=$,M<0&&(M=0)):M>$&&(M=$),N<0?(N+=$,N<0&&(N=0)):N>$&&(N=$),N<M&&(N=M);const X=this.subarray(M,N);return Object.setPrototypeOf(X,T.prototype),X};function _e(C,M,N){if(C%1!==0||C<0)throw new RangeError("offset is not uint");if(C+M>N)throw new RangeError("Trying to access beyond buffer length")}T.prototype.readUintLE=T.prototype.readUIntLE=function(M,N,$){M=M>>>0,N=N>>>0,$||_e(M,N,this.length);let X=this[M],te=1,se=0;for(;++se<N&&(te*=256);)X+=this[M+se]*te;return X},T.prototype.readUintBE=T.prototype.readUIntBE=function(M,N,$){M=M>>>0,N=N>>>0,$||_e(M,N,this.length);let X=this[M+--N],te=1;for(;N>0&&(te*=256);)X+=this[M+--N]*te;return X},T.prototype.readUint8=T.prototype.readUInt8=function(M,N){return M=M>>>0,N||_e(M,1,this.length),this[M]},T.prototype.readUint16LE=T.prototype.readUInt16LE=function(M,N){return M=M>>>0,N||_e(M,2,this.length),this[M]|this[M+1]<<8},T.prototype.readUint16BE=T.prototype.readUInt16BE=function(M,N){return M=M>>>0,N||_e(M,2,this.length),this[M]<<8|this[M+1]},T.prototype.readUint32LE=T.prototype.readUInt32LE=function(M,N){return M=M>>>0,N||_e(M,4,this.length),(this[M]|this[M+1]<<8|this[M+2]<<16)+this[M+3]*16777216},T.prototype.readUint32BE=T.prototype.readUInt32BE=function(M,N){return M=M>>>0,N||_e(M,4,this.length),this[M]*16777216+(this[M+1]<<16|this[M+2]<<8|this[M+3])},T.prototype.readBigUInt64LE=Us(function(M){M=M>>>0,Bi(M,"offset");const N=this[M],$=this[M+7];(N===void 0||$===void 0)&&Qt(M,this.length-8);const X=N+this[++M]*2**8+this[++M]*2**16+this[++M]*2**24,te=this[++M]+this[++M]*2**8+this[++M]*2**16+$*2**24;return BigInt(X)+(BigInt(te)<<BigInt(32))}),T.prototype.readBigUInt64BE=Us(function(M){M=M>>>0,Bi(M,"offset");const N=this[M],$=this[M+7];(N===void 0||$===void 0)&&Qt(M,this.length-8);const X=N*2**24+this[++M]*2**16+this[++M]*2**8+this[++M],te=this[++M]*2**24+this[++M]*2**16+this[++M]*2**8+$;return(BigInt(X)<<BigInt(32))+BigInt(te)}),T.prototype.readIntLE=function(M,N,$){M=M>>>0,N=N>>>0,$||_e(M,N,this.length);let X=this[M],te=1,se=0;for(;++se<N&&(te*=256);)X+=this[M+se]*te;return te*=128,X>=te&&(X-=Math.pow(2,8*N)),X},T.prototype.readIntBE=function(M,N,$){M=M>>>0,N=N>>>0,$||_e(M,N,this.length);let X=N,te=1,se=this[M+--X];for(;X>0&&(te*=256);)se+=this[M+--X]*te;return te*=128,se>=te&&(se-=Math.pow(2,8*N)),se},T.prototype.readInt8=function(M,N){return M=M>>>0,N||_e(M,1,this.length),this[M]&128?(255-this[M]+1)*-1:this[M]},T.prototype.readInt16LE=function(M,N){M=M>>>0,N||_e(M,2,this.length);const $=this[M]|this[M+1]<<8;return $&32768?$|4294901760:$},T.prototype.readInt16BE=function(M,N){M=M>>>0,N||_e(M,2,this.length);const $=this[M+1]|this[M]<<8;return $&32768?$|4294901760:$},T.prototype.readInt32LE=function(M,N){return M=M>>>0,N||_e(M,4,this.length),this[M]|this[M+1]<<8|this[M+2]<<16|this[M+3]<<24},T.prototype.readInt32BE=function(M,N){return M=M>>>0,N||_e(M,4,this.length),this[M]<<24|this[M+1]<<16|this[M+2]<<8|this[M+3]},T.prototype.readBigInt64LE=Us(function(M){M=M>>>0,Bi(M,"offset");const N=this[M],$=this[M+7];(N===void 0||$===void 0)&&Qt(M,this.length-8);const X=this[M+4]+this[M+5]*2**8+this[M+6]*2**16+($<<24);return(BigInt(X)<<BigInt(32))+BigInt(N+this[++M]*256+this[++M]*65536+this[++M]*16777216)}),T.prototype.readBigInt64BE=Us(function(M){M=M>>>0,Bi(M,"offset");const N=this[M],$=this[M+7];(N===void 0||$===void 0)&&Qt(M,this.length-8);const X=(N<<24)+this[++M]*2**16+this[++M]*2**8+this[++M];return(BigInt(X)<<BigInt(32))+BigInt(this[++M]*16777216+this[++M]*65536+this[++M]*256+$)}),T.prototype.readFloatLE=function(M,N){return M=M>>>0,N||_e(M,4,this.length),o.read(this,M,!0,23,4)},T.prototype.readFloatBE=function(M,N){return M=M>>>0,N||_e(M,4,this.length),o.read(this,M,!1,23,4)},T.prototype.readDoubleLE=function(M,N){return M=M>>>0,N||_e(M,8,this.length),o.read(this,M,!0,52,8)},T.prototype.readDoubleBE=function(M,N){return M=M>>>0,N||_e(M,8,this.length),o.read(this,M,!1,52,8)};function q(C,M,N,$,X,te){if(!T.isBuffer(C))throw new TypeError('"buffer" argument must be a Buffer instance');if(M>X||M<te)throw new RangeError('"value" argument is out of bounds');if(N+$>C.length)throw new RangeError("Index out of range")}T.prototype.writeUintLE=T.prototype.writeUIntLE=function(M,N,$,X){if(M=+M,N=N>>>0,$=$>>>0,!X){const Oe=Math.pow(2,8*$)-1;q(this,M,N,$,Oe,0)}let te=1,se=0;for(this[N]=M&255;++se<$&&(te*=256);)this[N+se]=M/te&255;return N+$},T.prototype.writeUintBE=T.prototype.writeUIntBE=function(M,N,$,X){if(M=+M,N=N>>>0,$=$>>>0,!X){const Oe=Math.pow(2,8*$)-1;q(this,M,N,$,Oe,0)}let te=$-1,se=1;for(this[N+te]=M&255;--te>=0&&(se*=256);)this[N+te]=M/se&255;return N+$},T.prototype.writeUint8=T.prototype.writeUInt8=function(M,N,$){return M=+M,N=N>>>0,$||q(this,M,N,1,255,0),this[N]=M&255,N+1},T.prototype.writeUint16LE=T.prototype.writeUInt16LE=function(M,N,$){return M=+M,N=N>>>0,$||q(this,M,N,2,65535,0),this[N]=M&255,this[N+1]=M>>>8,N+2},T.prototype.writeUint16BE=T.prototype.writeUInt16BE=function(M,N,$){return M=+M,N=N>>>0,$||q(this,M,N,2,65535,0),this[N]=M>>>8,this[N+1]=M&255,N+2},T.prototype.writeUint32LE=T.prototype.writeUInt32LE=function(M,N,$){return M=+M,N=N>>>0,$||q(this,M,N,4,4294967295,0),this[N+3]=M>>>24,this[N+2]=M>>>16,this[N+1]=M>>>8,this[N]=M&255,N+4},T.prototype.writeUint32BE=T.prototype.writeUInt32BE=function(M,N,$){return M=+M,N=N>>>0,$||q(this,M,N,4,4294967295,0),this[N]=M>>>24,this[N+1]=M>>>16,this[N+2]=M>>>8,this[N+3]=M&255,N+4};function j(C,M,N,$,X){pi(M,$,X,C,N,7);let te=Number(M&BigInt(4294967295));C[N++]=te,te=te>>8,C[N++]=te,te=te>>8,C[N++]=te,te=te>>8,C[N++]=te;let se=Number(M>>BigInt(32)&BigInt(4294967295));return C[N++]=se,se=se>>8,C[N++]=se,se=se>>8,C[N++]=se,se=se>>8,C[N++]=se,N}function L(C,M,N,$,X){pi(M,$,X,C,N,7);let te=Number(M&BigInt(4294967295));C[N+7]=te,te=te>>8,C[N+6]=te,te=te>>8,C[N+5]=te,te=te>>8,C[N+4]=te;let se=Number(M>>BigInt(32)&BigInt(4294967295));return C[N+3]=se,se=se>>8,C[N+2]=se,se=se>>8,C[N+1]=se,se=se>>8,C[N]=se,N+8}T.prototype.writeBigUInt64LE=Us(function(M,N=0){return j(this,M,N,BigInt(0),BigInt("0xffffffffffffffff"))}),T.prototype.writeBigUInt64BE=Us(function(M,N=0){return L(this,M,N,BigInt(0),BigInt("0xffffffffffffffff"))}),T.prototype.writeIntLE=function(M,N,$,X){if(M=+M,N=N>>>0,!X){const $e=Math.pow(2,8*$-1);q(this,M,N,$,$e-1,-$e)}let te=0,se=1,Oe=0;for(this[N]=M&255;++te<$&&(se*=256);)M<0&&Oe===0&&this[N+te-1]!==0&&(Oe=1),this[N+te]=(M/se>>0)-Oe&255;return N+$},T.prototype.writeIntBE=function(M,N,$,X){if(M=+M,N=N>>>0,!X){const $e=Math.pow(2,8*$-1);q(this,M,N,$,$e-1,-$e)}let te=$-1,se=1,Oe=0;for(this[N+te]=M&255;--te>=0&&(se*=256);)M<0&&Oe===0&&this[N+te+1]!==0&&(Oe=1),this[N+te]=(M/se>>0)-Oe&255;return N+$},T.prototype.writeInt8=function(M,N,$){return M=+M,N=N>>>0,$||q(this,M,N,1,127,-128),M<0&&(M=255+M+1),this[N]=M&255,N+1},T.prototype.writeInt16LE=function(M,N,$){return M=+M,N=N>>>0,$||q(this,M,N,2,32767,-32768),this[N]=M&255,this[N+1]=M>>>8,N+2},T.prototype.writeInt16BE=function(M,N,$){return M=+M,N=N>>>0,$||q(this,M,N,2,32767,-32768),this[N]=M>>>8,this[N+1]=M&255,N+2},T.prototype.writeInt32LE=function(M,N,$){return M=+M,N=N>>>0,$||q(this,M,N,4,2147483647,-2147483648),this[N]=M&255,this[N+1]=M>>>8,this[N+2]=M>>>16,this[N+3]=M>>>24,N+4},T.prototype.writeInt32BE=function(M,N,$){return M=+M,N=N>>>0,$||q(this,M,N,4,2147483647,-2147483648),M<0&&(M=4294967295+M+1),this[N]=M>>>24,this[N+1]=M>>>16,this[N+2]=M>>>8,this[N+3]=M&255,N+4},T.prototype.writeBigInt64LE=Us(function(M,N=0){return j(this,M,N,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),T.prototype.writeBigInt64BE=Us(function(M,N=0){return L(this,M,N,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function K(C,M,N,$,X,te){if(N+$>C.length)throw new RangeError("Index out of range");if(N<0)throw new RangeError("Index out of range")}function Z(C,M,N,$,X){return M=+M,N=N>>>0,X||K(C,M,N,4),o.write(C,M,N,$,23,4),N+4}T.prototype.writeFloatLE=function(M,N,$){return Z(this,M,N,!0,$)},T.prototype.writeFloatBE=function(M,N,$){return Z(this,M,N,!1,$)};function oe(C,M,N,$,X){return M=+M,N=N>>>0,X||K(C,M,N,8),o.write(C,M,N,$,52,8),N+8}T.prototype.writeDoubleLE=function(M,N,$){return oe(this,M,N,!0,$)},T.prototype.writeDoubleBE=function(M,N,$){return oe(this,M,N,!1,$)},T.prototype.copy=function(M,N,$,X){if(!T.isBuffer(M))throw new TypeError("argument should be a Buffer");if($||($=0),!X&&X!==0&&(X=this.length),N>=M.length&&(N=M.length),N||(N=0),X>0&&X<$&&(X=$),X===$||M.length===0||this.length===0)return 0;if(N<0)throw new RangeError("targetStart out of bounds");if($<0||$>=this.length)throw new RangeError("Index out of range");if(X<0)throw new RangeError("sourceEnd out of bounds");X>this.length&&(X=this.length),M.length-N<X-$&&(X=M.length-N+$);const te=X-$;return this===M&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(N,$,X):Uint8Array.prototype.set.call(M,this.subarray($,X),N),te},T.prototype.fill=function(M,N,$,X){if(typeof M=="string"){if(typeof N=="string"?(X=N,N=0,$=this.length):typeof $=="string"&&(X=$,$=this.length),X!==void 0&&typeof X!="string")throw new TypeError("encoding must be a string");if(typeof X=="string"&&!T.isEncoding(X))throw new TypeError("Unknown encoding: "+X);if(M.length===1){const se=M.charCodeAt(0);(X==="utf8"&&se<128||X==="latin1")&&(M=se)}}else typeof M=="number"?M=M&255:typeof M=="boolean"&&(M=Number(M));if(N<0||this.length<N||this.length<$)throw new RangeError("Out of range index");if($<=N)return this;N=N>>>0,$=$===void 0?this.length:$>>>0,M||(M=0);let te;if(typeof M=="number")for(te=N;te<$;++te)this[te]=M;else{const se=T.isBuffer(M)?M:T.from(M,X),Oe=se.length;if(Oe===0)throw new TypeError('The value "'+M+'" is invalid for argument "value"');for(te=0;te<$-N;++te)this[te+N]=se[te%Oe]}return this};const re={};function ge(C,M,N){re[C]=class extends N{constructor(){super(),Object.defineProperty(this,"message",{value:M.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${C}]`,this.stack,delete this.name}get code(){return C}set code(X){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:X,writable:!0})}toString(){return`${this.name} [${C}]: ${this.message}`}}}ge("ERR_BUFFER_OUT_OF_BOUNDS",function(C){return C?`${C} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ge("ERR_INVALID_ARG_TYPE",function(C,M){return`The "${C}" argument must be of type number. Received type ${typeof M}`},TypeError),ge("ERR_OUT_OF_RANGE",function(C,M,N){let $=`The value of "${C}" is out of range.`,X=N;return Number.isInteger(N)&&Math.abs(N)>4294967296?X=Se(String(N)):typeof N=="bigint"&&(X=String(N),(N>BigInt(2)**BigInt(32)||N<-(BigInt(2)**BigInt(32)))&&(X=Se(X)),X+="n"),$+=` It must be ${M}. Received ${X}`,$},RangeError);function Se(C){let M="",N=C.length;const $=C[0]==="-"?1:0;for(;N>=$+4;N-=3)M=`_${C.slice(N-3,N)}${M}`;return`${C.slice(0,N)}${M}`}function He(C,M,N){Bi(M,"offset"),(C[M]===void 0||C[M+N]===void 0)&&Qt(M,C.length-(N+1))}function pi(C,M,N,$,X,te){if(C>N||C<M){const se=typeof M=="bigint"?"n":"";let Oe;throw te>3?M===0||M===BigInt(0)?Oe=`>= 0${se} and < 2${se} ** ${(te+1)*8}${se}`:Oe=`>= -(2${se} ** ${(te+1)*8-1}${se}) and < 2 ** ${(te+1)*8-1}${se}`:Oe=`>= ${M}${se} and <= ${N}${se}`,new re.ERR_OUT_OF_RANGE("value",Oe,C)}He($,X,te)}function Bi(C,M){if(typeof C!="number")throw new re.ERR_INVALID_ARG_TYPE(M,"number",C)}function Qt(C,M,N){throw Math.floor(C)!==C?(Bi(C,N),new re.ERR_OUT_OF_RANGE(N||"offset","an integer",C)):M<0?new re.ERR_BUFFER_OUT_OF_BOUNDS:new re.ERR_OUT_OF_RANGE(N||"offset",`>= ${N?1:0} and <= ${M}`,C)}const $s=/[^+/0-9A-Za-z-_]/g;function lr(C){if(C=C.split("=")[0],C=C.trim().replace($s,""),C.length<2)return"";for(;C.length%4!==0;)C=C+"=";return C}function cr(C,M){M=M||1/0;let N;const $=C.length;let X=null;const te=[];for(let se=0;se<$;++se){if(N=C.charCodeAt(se),N>55295&&N<57344){if(!X){if(N>56319){(M-=3)>-1&&te.push(239,191,189);continue}else if(se+1===$){(M-=3)>-1&&te.push(239,191,189);continue}X=N;continue}if(N<56320){(M-=3)>-1&&te.push(239,191,189),X=N;continue}N=(X-55296<<10|N-56320)+65536}else X&&(M-=3)>-1&&te.push(239,191,189);if(X=null,N<128){if((M-=1)<0)break;te.push(N)}else if(N<2048){if((M-=2)<0)break;te.push(N>>6|192,N&63|128)}else if(N<65536){if((M-=3)<0)break;te.push(N>>12|224,N>>6&63|128,N&63|128)}else if(N<1114112){if((M-=4)<0)break;te.push(N>>18|240,N>>12&63|128,N>>6&63|128,N&63|128)}else throw new Error("Invalid code point")}return te}function he(C){const M=[];for(let N=0;N<C.length;++N)M.push(C.charCodeAt(N)&255);return M}function as(C,M){let N,$,X;const te=[];for(let se=0;se<C.length&&!((M-=2)<0);++se)N=C.charCodeAt(se),$=N>>8,X=N%256,te.push(X),te.push($);return te}function Pn(C){return u.toByteArray(lr(C))}function ka(C,M,N,$){let X;for(X=0;X<$&&!(X+N>=M.length||X>=C.length);++X)M[X+N]=C[X];return X}function Ki(C,M){return C instanceof M||C!=null&&C.constructor!=null&&C.constructor.name!=null&&C.constructor.name===M.name}function Zl(C){return C!==C}const ec=function(){const C="0123456789abcdef",M=new Array(256);for(let N=0;N<16;++N){const $=N*16;for(let X=0;X<16;++X)M[$+X]=C[N]+C[X]}return M}();function Us(C){return typeof BigInt>"u"?tc:C}function tc(){throw new Error("BigInt not supported")}},8769:(c,d,f)=>{var u,o=TypeError,g=Object.getOwnPropertyDescriptor;if(g)try{g({},"")}catch{g=null}var w=function(){throw new o},m=g?function(){try{return arguments.callee,w}catch{try{return g(arguments,"callee").get}catch{return w}}}():w,l=f(1405)(),T=Object.getPrototypeOf||function(U){return U.__proto__},b=u,S=u,x=u,B=typeof Uint8Array>"u"?u:T(Uint8Array),F={"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?u:ArrayBuffer,"%ArrayBufferPrototype%":typeof ArrayBuffer>"u"?u:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":l?T([][Symbol.iterator]()):u,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":u,"%AsyncFunction%":S,"%AsyncFunctionPrototype%":u,"%AsyncGenerator%":u,"%AsyncGeneratorFunction%":x,"%AsyncGeneratorPrototype%":u,"%AsyncIteratorPrototype%":u,"%Atomics%":typeof Atomics>"u"?u:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":typeof DataView>"u"?u:DataView,"%DataViewPrototype%":typeof DataView>"u"?u:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":typeof Float32Array>"u"?u:Float32Array,"%Float32ArrayPrototype%":typeof Float32Array>"u"?u:Float32Array.prototype,"%Float64Array%":typeof Float64Array>"u"?u:Float64Array,"%Float64ArrayPrototype%":typeof Float64Array>"u"?u:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":u,"%GeneratorFunction%":b,"%GeneratorPrototype%":u,"%Int8Array%":typeof Int8Array>"u"?u:Int8Array,"%Int8ArrayPrototype%":typeof Int8Array>"u"?u:Int8Array.prototype,"%Int16Array%":typeof Int16Array>"u"?u:Int16Array,"%Int16ArrayPrototype%":typeof Int16Array>"u"?u:Int8Array.prototype,"%Int32Array%":typeof Int32Array>"u"?u:Int32Array,"%Int32ArrayPrototype%":typeof Int32Array>"u"?u:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":l?T(T([][Symbol.iterator]())):u,"%JSON%":typeof JSON=="object"?JSON:u,"%JSONParse%":typeof JSON=="object"?JSON.parse:u,"%Map%":typeof Map>"u"?u:Map,"%MapIteratorPrototype%":typeof Map>"u"||!l?u:T(new Map()[Symbol.iterator]()),"%MapPrototype%":typeof Map>"u"?u:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?u:Promise,"%PromisePrototype%":typeof Promise>"u"?u:Promise.prototype,"%PromiseProto_then%":typeof Promise>"u"?u:Promise.prototype.then,"%Promise_all%":typeof Promise>"u"?u:Promise.all,"%Promise_reject%":typeof Promise>"u"?u:Promise.reject,"%Promise_resolve%":typeof Promise>"u"?u:Promise.resolve,"%Proxy%":typeof Proxy>"u"?u:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":typeof Reflect>"u"?u:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":typeof Set>"u"?u:Set,"%SetIteratorPrototype%":typeof Set>"u"||!l?u:T(new Set()[Symbol.iterator]()),"%SetPrototype%":typeof Set>"u"?u:Set.prototype,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?u:SharedArrayBuffer,"%SharedArrayBufferPrototype%":typeof SharedArrayBuffer>"u"?u:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":l?T(""[Symbol.iterator]()):u,"%StringPrototype%":String.prototype,"%Symbol%":l?Symbol:u,"%SymbolPrototype%":l?Symbol.prototype:u,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":m,"%TypedArray%":B,"%TypedArrayPrototype%":B?B.prototype:u,"%TypeError%":o,"%TypeErrorPrototype%":o.prototype,"%Uint8Array%":typeof Uint8Array>"u"?u:Uint8Array,"%Uint8ArrayPrototype%":typeof Uint8Array>"u"?u:Uint8Array.prototype,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?u:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":typeof Uint8ClampedArray>"u"?u:Uint8ClampedArray.prototype,"%Uint16Array%":typeof Uint16Array>"u"?u:Uint16Array,"%Uint16ArrayPrototype%":typeof Uint16Array>"u"?u:Uint16Array.prototype,"%Uint32Array%":typeof Uint32Array>"u"?u:Uint32Array,"%Uint32ArrayPrototype%":typeof Uint32Array>"u"?u:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":typeof WeakMap>"u"?u:WeakMap,"%WeakMapPrototype%":typeof WeakMap>"u"?u:WeakMap.prototype,"%WeakSet%":typeof WeakSet>"u"?u:WeakSet,"%WeakSetPrototype%":typeof WeakSet>"u"?u:WeakSet.prototype},I=f(8612),A=I.call(Function.call,String.prototype.replace),O=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,R=/\\(\\)?/g,D=function(Y){var z=[];return A(Y,O,function(W,V,H,J){z[z.length]=H?A(J,R,"$1"):V||W}),z},P=function(Y,z){if(!(Y in F))throw new SyntaxError("intrinsic "+Y+" does not exist!");if(typeof F[Y]>"u"&&!z)throw new o("intrinsic "+Y+" exists, but is not available. Please file an issue!");return F[Y]};c.exports=function(Y,z){if(typeof Y!="string"||Y.length===0)throw new TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof z!="boolean")throw new TypeError('"allowMissing" argument must be a boolean');for(var W=D(Y),V=P("%"+(W.length>0?W[0]:"")+"%",z),H=1;H<W.length;H+=1)if(V!=null)if(g&&H+1>=W.length){var J=g(V,W[H]);if(!z&&!(W[H]in V))throw new o("base intrinsic for "+Y+" exists, but the property is not available.");V=J&&"get"in J&&!("originalValue"in J.get)?J.get:V[W[H]]}else V=V[W[H]];return V}},4147:(c,d,f)=>{var u=f(8612),o=f(8769),g=o("%Function.prototype.apply%"),w=o("%Function.prototype.call%"),m=o("%Reflect.apply%",!0)||u.call(w,g),l=o("%Object.defineProperty%",!0);if(l)try{l({},"a",{value:1})}catch{l=null}c.exports=function(){return m(u,w,arguments)};var T=function(){return m(u,g,arguments)};l?l(c.exports,"apply",{value:T}):c.exports.apply=T},8914:(c,d,f)=>{var u=f(8769),o=f(4147),g=o(u("String.prototype.indexOf"));c.exports=function(m,l){var T=u(m,!!l);return typeof T=="function"&&g(m,".prototype.")?o(T):T}},4079:(c,d,f)=>{var u=f(8769),o=u("%Object.getOwnPropertyDescriptor%");if(o)try{o([],"length")}catch{o=null}c.exports=o},6729:c=>{var d=Object.prototype.hasOwnProperty,f="~";function u(){}Object.create&&(u.prototype=Object.create(null),new u().__proto__||(f=!1));function o(l,T,b){this.fn=l,this.context=T,this.once=b||!1}function g(l,T,b,S,x){if(typeof b!="function")throw new TypeError("The listener must be a function");var B=new o(b,S||l,x),F=f?f+T:T;return l._events[F]?l._events[F].fn?l._events[F]=[l._events[F],B]:l._events[F].push(B):(l._events[F]=B,l._eventsCount++),l}function w(l,T){--l._eventsCount===0?l._events=new u:delete l._events[T]}function m(){this._events=new u,this._eventsCount=0}m.prototype.eventNames=function(){var T=[],b,S;if(this._eventsCount===0)return T;for(S in b=this._events)d.call(b,S)&&T.push(f?S.slice(1):S);return Object.getOwnPropertySymbols?T.concat(Object.getOwnPropertySymbols(b)):T},m.prototype.listeners=function(T){var b=f?f+T:T,S=this._events[b];if(!S)return[];if(S.fn)return[S.fn];for(var x=0,B=S.length,F=new Array(B);x<B;x++)F[x]=S[x].fn;return F},m.prototype.listenerCount=function(T){var b=f?f+T:T,S=this._events[b];return S?S.fn?1:S.length:0},m.prototype.emit=function(T,b,S,x,B,F){var I=f?f+T:T;if(!this._events[I])return!1;var A=this._events[I],O=arguments.length,R,D;if(A.fn){switch(A.once&&this.removeListener(T,A.fn,void 0,!0),O){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,b),!0;case 3:return A.fn.call(A.context,b,S),!0;case 4:return A.fn.call(A.context,b,S,x),!0;case 5:return A.fn.call(A.context,b,S,x,B),!0;case 6:return A.fn.call(A.context,b,S,x,B,F),!0}for(D=1,R=new Array(O-1);D<O;D++)R[D-1]=arguments[D];A.fn.apply(A.context,R)}else{var P=A.length,U;for(D=0;D<P;D++)switch(A[D].once&&this.removeListener(T,A[D].fn,void 0,!0),O){case 1:A[D].fn.call(A[D].context);break;case 2:A[D].fn.call(A[D].context,b);break;case 3:A[D].fn.call(A[D].context,b,S);break;case 4:A[D].fn.call(A[D].context,b,S,x);break;default:if(!R)for(U=1,R=new Array(O-1);U<O;U++)R[U-1]=arguments[U];A[D].fn.apply(A[D].context,R)}}return!0},m.prototype.on=function(T,b,S){return g(this,T,b,S,!1)},m.prototype.once=function(T,b,S){return g(this,T,b,S,!0)},m.prototype.removeListener=function(T,b,S,x){var B=f?f+T:T;if(!this._events[B])return this;if(!b)return w(this,B),this;var F=this._events[B];if(F.fn)F.fn===b&&(!x||F.once)&&(!S||F.context===S)&&w(this,B);else{for(var I=0,A=[],O=F.length;I<O;I++)(F[I].fn!==b||x&&!F[I].once||S&&F[I].context!==S)&&A.push(F[I]);A.length?this._events[B]=A.length===1?A[0]:A:w(this,B)}return this},m.prototype.removeAllListeners=function(T){var b;return T?(b=f?f+T:T,this._events[b]&&w(this,b)):(this._events=new u,this._eventsCount=0),this},m.prototype.off=m.prototype.removeListener,m.prototype.addListener=m.prototype.on,m.prefixed=f,m.EventEmitter=m,c.exports=m},7187:c=>{var d=typeof Reflect=="object"?Reflect:null,f=d&&typeof d.apply=="function"?d.apply:function(P,U,Y){return Function.prototype.apply.call(P,U,Y)},u;d&&typeof d.ownKeys=="function"?u=d.ownKeys:Object.getOwnPropertySymbols?u=function(P){return Object.getOwnPropertyNames(P).concat(Object.getOwnPropertySymbols(P))}:u=function(P){return Object.getOwnPropertyNames(P)};function o(D){console&&console.warn&&console.warn(D)}var g=Number.isNaN||function(P){return P!==P};function w(){w.init.call(this)}c.exports=w,c.exports.once=R,w.EventEmitter=w,w.prototype._events=void 0,w.prototype._eventsCount=0,w.prototype._maxListeners=void 0;var m=10;function l(D){if(typeof D!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof D)}Object.defineProperty(w,"defaultMaxListeners",{enumerable:!0,get:function(){return m},set:function(D){if(typeof D!="number"||D<0||g(D))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+D+".");m=D}}),w.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},w.prototype.setMaxListeners=function(P){if(typeof P!="number"||P<0||g(P))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+P+".");return this._maxListeners=P,this};function T(D){return D._maxListeners===void 0?w.defaultMaxListeners:D._maxListeners}w.prototype.getMaxListeners=function(){return T(this)},w.prototype.emit=function(P){for(var U=[],Y=1;Y<arguments.length;Y++)U.push(arguments[Y]);var z=P==="error",W=this._events;if(W!==void 0)z=z&&W.error===void 0;else if(!z)return!1;if(z){var V;if(U.length>0&&(V=U[0]),V instanceof Error)throw V;var H=new Error("Unhandled error."+(V?" ("+V.message+")":""));throw H.context=V,H}var J=W[P];if(J===void 0)return!1;if(typeof J=="function")f(J,this,U);else for(var G=J.length,le=I(J,G),Y=0;Y<G;++Y)f(le[Y],this,U);return!0};function b(D,P,U,Y){var z,W,V;if(l(U),W=D._events,W===void 0?(W=D._events=Object.create(null),D._eventsCount=0):(W.newListener!==void 0&&(D.emit("newListener",P,U.listener?U.listener:U),W=D._events),V=W[P]),V===void 0)V=W[P]=U,++D._eventsCount;else if(typeof V=="function"?V=W[P]=Y?[U,V]:[V,U]:Y?V.unshift(U):V.push(U),z=T(D),z>0&&V.length>z&&!V.warned){V.warned=!0;var H=new Error("Possible EventEmitter memory leak detected. "+V.length+" "+String(P)+" listeners added. Use emitter.setMaxListeners() to increase limit");H.name="MaxListenersExceededWarning",H.emitter=D,H.type=P,H.count=V.length,o(H)}return D}w.prototype.addListener=function(P,U){return b(this,P,U,!1)},w.prototype.on=w.prototype.addListener,w.prototype.prependListener=function(P,U){return b(this,P,U,!0)};function S(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function x(D,P,U){var Y={fired:!1,wrapFn:void 0,target:D,type:P,listener:U},z=S.bind(Y);return z.listener=U,Y.wrapFn=z,z}w.prototype.once=function(P,U){return l(U),this.on(P,x(this,P,U)),this},w.prototype.prependOnceListener=function(P,U){return l(U),this.prependListener(P,x(this,P,U)),this},w.prototype.removeListener=function(P,U){var Y,z,W,V,H;if(l(U),z=this._events,z===void 0)return this;if(Y=z[P],Y===void 0)return this;if(Y===U||Y.listener===U)--this._eventsCount===0?this._events=Object.create(null):(delete z[P],z.removeListener&&this.emit("removeListener",P,Y.listener||U));else if(typeof Y!="function"){for(W=-1,V=Y.length-1;V>=0;V--)if(Y[V]===U||Y[V].listener===U){H=Y[V].listener,W=V;break}if(W<0)return this;W===0?Y.shift():A(Y,W),Y.length===1&&(z[P]=Y[0]),z.removeListener!==void 0&&this.emit("removeListener",P,H||U)}return this},w.prototype.off=w.prototype.removeListener,w.prototype.removeAllListeners=function(P){var U,Y,z;if(Y=this._events,Y===void 0)return this;if(Y.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):Y[P]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete Y[P]),this;if(arguments.length===0){var W=Object.keys(Y),V;for(z=0;z<W.length;++z)V=W[z],V!=="removeListener"&&this.removeAllListeners(V);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(U=Y[P],typeof U=="function")this.removeListener(P,U);else if(U!==void 0)for(z=U.length-1;z>=0;z--)this.removeListener(P,U[z]);return this};function B(D,P,U){var Y=D._events;if(Y===void 0)return[];var z=Y[P];return z===void 0?[]:typeof z=="function"?U?[z.listener||z]:[z]:U?O(z):I(z,z.length)}w.prototype.listeners=function(P){return B(this,P,!0)},w.prototype.rawListeners=function(P){return B(this,P,!1)},w.listenerCount=function(D,P){return typeof D.listenerCount=="function"?D.listenerCount(P):F.call(D,P)},w.prototype.listenerCount=F;function F(D){var P=this._events;if(P!==void 0){var U=P[D];if(typeof U=="function")return 1;if(U!==void 0)return U.length}return 0}w.prototype.eventNames=function(){return this._eventsCount>0?u(this._events):[]};function I(D,P){for(var U=new Array(P),Y=0;Y<P;++Y)U[Y]=D[Y];return U}function A(D,P){for(;P+1<D.length;P++)D[P]=D[P+1];D.pop()}function O(D){for(var P=new Array(D.length),U=0;U<P.length;++U)P[U]=D[U].listener||D[U];return P}function R(D,P){return new Promise(function(U,Y){function z(){W!==void 0&&D.removeListener("error",W),U([].slice.call(arguments))}var W;P!=="error"&&(W=function(H){D.removeListener(P,z),Y(H)},D.once("error",W)),D.once(P,z)})}},9804:c=>{var d=Object.prototype.hasOwnProperty,f=Object.prototype.toString;c.exports=function(o,g,w){if(f.call(g)!=="[object Function]")throw new TypeError("iterator must be a function");var m=o.length;if(m===+m)for(var l=0;l<m;l++)g.call(w,o[l],l,o);else for(var T in o)d.call(o,T)&&g.call(w,o[T],T,o)}},7648:c=>{var d="Function.prototype.bind called on incompatible ",f=Array.prototype.slice,u=Object.prototype.toString,o="[object Function]";c.exports=function(w){var m=this;if(typeof m!="function"||u.call(m)!==o)throw new TypeError(d+m);for(var l=f.call(arguments,1),T,b=function(){if(this instanceof T){var I=m.apply(this,l.concat(f.call(arguments)));return Object(I)===I?I:this}else return m.apply(w,l.concat(f.call(arguments)))},S=Math.max(0,m.length-l.length),x=[],B=0;B<S;B++)x.push("$"+B);if(T=Function("binder","return function ("+x.join(",")+"){ return binder.apply(this,arguments); }")(b),m.prototype){var F=function(){};F.prototype=m.prototype,T.prototype=new F,F.prototype=null}return T}},8612:(c,d,f)=>{var u=f(7648);c.exports=Function.prototype.bind||u},1405:(c,d,f)=>{var u=f.g.Symbol,o=f(5419);c.exports=function(){return typeof u!="function"||typeof Symbol!="function"||typeof u("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:o()}},5419:c=>{c.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var f={},u=Symbol("test"),o=Object(u);if(typeof u=="string"||Object.prototype.toString.call(u)!=="[object Symbol]"||Object.prototype.toString.call(o)!=="[object Symbol]")return!1;var g=42;f[u]=g;for(u in f)return!1;if(typeof Object.keys=="function"&&Object.keys(f).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(f).length!==0)return!1;var w=Object.getOwnPropertySymbols(f);if(w.length!==1||w[0]!==u||!Object.prototype.propertyIsEnumerable.call(f,u))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var m=Object.getOwnPropertyDescriptor(f,u);if(m.value!==g||m.enumerable!==!0)return!1}return!0}},645:(c,d)=>{/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */d.read=function(f,u,o,g,w){var m,l,T=w*8-g-1,b=(1<<T)-1,S=b>>1,x=-7,B=o?w-1:0,F=o?-1:1,I=f[u+B];for(B+=F,m=I&(1<<-x)-1,I>>=-x,x+=T;x>0;m=m*256+f[u+B],B+=F,x-=8);for(l=m&(1<<-x)-1,m>>=-x,x+=g;x>0;l=l*256+f[u+B],B+=F,x-=8);if(m===0)m=1-S;else{if(m===b)return l?NaN:(I?-1:1)*(1/0);l=l+Math.pow(2,g),m=m-S}return(I?-1:1)*l*Math.pow(2,m-g)},d.write=function(f,u,o,g,w,m){var l,T,b,S=m*8-w-1,x=(1<<S)-1,B=x>>1,F=w===23?Math.pow(2,-24)-Math.pow(2,-77):0,I=g?0:m-1,A=g?1:-1,O=u<0||u===0&&1/u<0?1:0;for(u=Math.abs(u),isNaN(u)||u===1/0?(T=isNaN(u)?1:0,l=x):(l=Math.floor(Math.log(u)/Math.LN2),u*(b=Math.pow(2,-l))<1&&(l--,b*=2),l+B>=1?u+=F/b:u+=F*Math.pow(2,1-B),u*b>=2&&(l++,b/=2),l+B>=x?(T=0,l=x):l+B>=1?(T=(u*b-1)*Math.pow(2,w),l=l+B):(T=u*Math.pow(2,B-1)*Math.pow(2,w),l=0));w>=8;f[o+I]=T&255,I+=A,T/=256,w-=8);for(l=l<<w|T,S+=w;S>0;f[o+I]=l&255,I+=A,l/=256,S-=8);f[o+I-A]|=O*128}},5717:c=>{typeof Object.create=="function"?c.exports=function(f,u){u&&(f.super_=u,f.prototype=Object.create(u.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}))}:c.exports=function(f,u){if(u){f.super_=u;var o=function(){};o.prototype=u.prototype,f.prototype=new o,f.prototype.constructor=f}}},2584:c=>{var d=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",f=Object.prototype.toString,u=function(m){return d&&m&&typeof m=="object"&&Symbol.toStringTag in m?!1:f.call(m)==="[object Arguments]"},o=function(m){return u(m)?!0:m!==null&&typeof m=="object"&&typeof m.length=="number"&&m.length>=0&&f.call(m)!=="[object Array]"&&f.call(m.callee)==="[object Function]"},g=function(){return u(arguments)}();u.isLegacyArguments=o,c.exports=g?u:o},8662:c=>{var d=Object.prototype.toString,f=Function.prototype.toString,u=/^\s*(?:function)?\*/,o=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",g=Object.getPrototypeOf,w=function(){if(!o)return!1;try{return Function("return function*() {}")()}catch{}},m=w(),l=m?g(m):{};c.exports=function(b){if(typeof b!="function")return!1;if(u.test(f.call(b)))return!0;if(!o){var S=d.call(b);return S==="[object GeneratorFunction]"}return g(b)===l}},5692:(c,d,f)=>{var u=f(9804),o=f(6314),g=f(8914),w=g("Object.prototype.toString"),m=f(1405)(),l=m&&typeof Symbol.toStringTag=="symbol",T=o(),b=g("Array.prototype.indexOf",!0)||function(O,R){for(var D=0;D<O.length;D+=1)if(O[D]===R)return D;return-1},S=g("String.prototype.slice"),x={},B=f(4079),F=Object.getPrototypeOf;l&&B&&F&&u(T,function(A){var O=new f.g[A];if(!(Symbol.toStringTag in O))throw new EvalError("this engine has support for Symbol.toStringTag, but "+A+" does not have the property! Please report this.");var R=F(O),D=B(R,Symbol.toStringTag);if(!D){var P=F(R);D=B(P,Symbol.toStringTag)}x[A]=D.get});var I=function(O){var R=!1;return u(x,function(D,P){if(!R)try{R=D.call(O)===P}catch{}}),R};c.exports=function(O){if(!O||typeof O!="object")return!1;if(!l){var R=S(w(O),8,-1);return b(T,R)>-1}return B?I(O):!1}},6792:(c,d,f)=>{var u=null;typeof WebSocket<"u"?u=WebSocket:typeof MozWebSocket<"u"?u=MozWebSocket:typeof f.g<"u"?u=f.g.WebSocket||f.g.MozWebSocket:typeof window<"u"?u=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(u=self.WebSocket||self.MozWebSocket),c.exports=u},135:(c,d,f)=>{for(var u=f(8764).Buffer,o=4294967296,g=[],w=0;w<256;w++)g[w]=(w>15?"":"0")+w.toString(16);var m=c.exports=function(l,T){l instanceof u?(this.buffer=l,this.offset=T||0):Object.prototype.toString.call(l)=="[object Uint8Array]"?(this.buffer=new u(l),this.offset=T||0):(this.buffer=this.buffer||new u(8),this.offset=0,this.setValue.apply(this,arguments))};m.MAX_INT=Math.pow(2,53),m.MIN_INT=-Math.pow(2,53),m.prototype={constructor:m,_2scomp:function(){for(var l=this.buffer,T=this.offset,b=1,S=T+7;S>=T;S--){var x=(l[S]^255)+b;l[S]=x&255,b=x>>8}},setValue:function(l,T){var b=!1;if(arguments.length==1)if(typeof l=="number"){if(b=l<0,l=Math.abs(l),T=l%o,l=l/o,l>o)throw new RangeError(l+" is outside Int64 range");l=l|0}else if(typeof l=="string")l=(l+"").replace(/^0x/,""),T=l.substr(-8),l=l.length>8?l.substr(0,l.length-8):"",l=parseInt(l,16),T=parseInt(T,16);else throw new Error(l+" must be a Number or String");for(var S=this.buffer,x=this.offset,B=7;B>=0;B--)S[x+B]=T&255,T=B==4?l:T>>>8;b&&this._2scomp()},toNumber:function(l){for(var T=this.buffer,b=this.offset,S=T[b]&128,x=0,B=1,F=7,I=1;F>=0;F--,I*=256){var A=T[b+F];S&&(A=(A^255)+B,B=A>>8,A=A&255),x+=A*I}return!l&&x>=m.MAX_INT?S?-1/0:1/0:S?-x:x},valueOf:function(){return this.toNumber(!1)},toString:function(l){return this.valueOf().toString(l||10)},toOctetString:function(l){for(var T=new Array(8),b=this.buffer,S=this.offset,x=0;x<8;x++)T[x]=g[b[S+x]];return T.join(l||"")},toBuffer:function(l){if(l&&this.offset===0)return this.buffer;var T=new u(8);return this.buffer.copy(T,0,this.offset,this.offset+8),T},copy:function(l,T){this.buffer.copy(l,T||0,this.offset,this.offset+8)},compare:function(l){if((this.buffer[this.offset]&128)!=(l.buffer[l.offset]&128))return l.buffer[l.offset]-this.buffer[this.offset];for(var T=0;T<8;T++)if(this.buffer[this.offset+T]!==l.buffer[l.offset+T])return this.buffer[this.offset+T]-l.buffer[l.offset+T];return 0},equals:function(l){return this.compare(l)===0},inspect:function(){return"[Int64 value:"+this+" octets:"+this.toOctetString(" ")+"]"}}},8486:c=>{/*!
 *
 * Copyright 2009-2017 Kris Kowal under the terms of the MIT
 * license found at https://github.com/kriskowal/q/blob/v1/LICENSE
 *
 * With parts by Tyler Close
 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
 * at http://www.opensource.org/licenses/mit-license.html
 * Forked at ref_send.js version: 2009-05-11
 *
 * With parts by Mark Miller
 * Copyright (C) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */(function(d){typeof bootstrap=="function"?bootstrap("promise",d):c.exports=d()})(function(){var d=!1;try{throw new Error}catch(C){d=!!C.stack}var f=H(),u,o=function(){},g=function(){var C={task:void 0,next:null},M=C,N=!1,$=void 0,X=!1,te=[];function se(){for(var Ve,We;C.next;)C=C.next,Ve=C.task,C.task=void 0,We=C.domain,We&&(C.domain=void 0,We.enter()),Oe(Ve,We);for(;te.length;)Ve=te.pop(),Oe(Ve);N=!1}function Oe(Ve,We){try{Ve()}catch(ic){if(X)throw We&&We.exit(),setTimeout(se,0),We&&We.enter(),ic;setTimeout(function(){throw ic},0)}We&&We.exit()}if(g=function(Ve){M=M.next={task:Ve,domain:X&&process.domain,next:null},N||(N=!0,$())},typeof process=="object"&&process.toString()==="[object process]"&&process.nextTick)X=!0,$=function(){process.nextTick(se)};else if(typeof setImmediate=="function")typeof window<"u"?$=setImmediate.bind(window,se):$=function(){setImmediate(se)};else if(typeof MessageChannel<"u"){var $e=new MessageChannel;$e.port1.onmessage=function(){$=Ue,$e.port1.onmessage=se,se()};var Ue=function(){$e.port2.postMessage(0)};$=function(){setTimeout(se,0),Ue()}}else $=function(){setTimeout(se,0)};return g.runAfter=function(Ve){te.push(Ve),N||(N=!0,$())},g}(),w=Function.call;function m(C){return function(){return w.apply(C,arguments)}}var l=m(Array.prototype.slice),T=m(Array.prototype.reduce||function(C,M){var N=0,$=this.length;if(arguments.length===1)do{if(N in this){M=this[N++];break}if(++N>=$)throw new TypeError}while(1);for(;N<$;N++)N in this&&(M=C(M,this[N],N));return M}),b=m(Array.prototype.indexOf||function(C){for(var M=0;M<this.length;M++)if(this[M]===C)return M;return-1}),S=m(Array.prototype.map||function(C,M){var N=this,$=[];return T(N,function(X,te,se){$.push(C.call(M,te,se,N))},void 0),$}),x=Object.create||function(C){function M(){}return M.prototype=C,new M},B=Object.defineProperty||function(C,M,N){return C[M]=N.value,C},F=m(Object.prototype.hasOwnProperty),I=Object.keys||function(C){var M=[];for(var N in C)F(C,N)&&M.push(N);return M},A=m(Object.prototype.toString);function O(C){return C===Object(C)}function R(C){return A(C)==="[object StopIteration]"||C instanceof D}var D;typeof ReturnValue<"u"?D=ReturnValue:D=function(C){this.value=C};var P="From previous event:";function U(C,M){if(d&&M.stack&&typeof C=="object"&&C!==null&&C.stack){for(var N=[],$=M;$;$=$.source)$.stack&&(!C.__minimumStackCounter__||C.__minimumStackCounter__>$.stackCounter)&&(B(C,"__minimumStackCounter__",{value:$.stackCounter,configurable:!0}),N.unshift($.stack));N.unshift(C.stack);var X=N.join(`
`+P+`
`),te=Y(X);B(C,"stack",{value:te,configurable:!0})}}function Y(C){for(var M=C.split(`
`),N=[],$=0;$<M.length;++$){var X=M[$];!V(X)&&!z(X)&&X&&N.push(X)}return N.join(`
`)}function z(C){return C.indexOf("(module.js:")!==-1||C.indexOf("(node.js:")!==-1}function W(C){var M=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(C);if(M)return[M[1],Number(M[2])];var N=/at ([^ ]+):(\d+):(?:\d+)$/.exec(C);if(N)return[N[1],Number(N[2])];var $=/.*@(.+):(\d+)$/.exec(C);if($)return[$[1],Number($[2])]}function V(C){var M=W(C);if(!M)return!1;var N=M[0],$=M[1];return N===u&&$>=f&&$<=tc}function H(){if(d)try{throw new Error}catch($){var C=$.stack.split(`
`),M=C[0].indexOf("@")>0?C[1]:C[2],N=W(M);return N?(u=N[0],N[1]):void 0}}function J(C,M,N){return function(){return typeof console<"u"&&typeof console.warn=="function"&&console.warn(M+" is deprecated, use "+N+" instead.",new Error("").stack),C.apply(C,arguments)}}function G(C){return C instanceof fe?C:Ct(C)?pi(C):He(C)}G.resolve=G,G.nextTick=g,G.longStackSupport=!1;var le=1;typeof process=="object"&&process&&{BROWSER:!0}&&{BROWSER:!0}.Q_DEBUG&&(G.longStackSupport=!0),G.defer=pe;function pe(){var C=[],M=[],N,$=x(pe.prototype),X=x(fe.prototype);if(X.promiseDispatch=function(se,Oe,$e){var Ue=l(arguments);C?(C.push(Ue),Oe==="when"&&$e[1]&&M.push($e[1])):G.nextTick(function(){N.promiseDispatch.apply(N,Ue)})},X.valueOf=function(){if(C)return X;var se=je(N);return _t(se)&&(N=se),se},X.inspect=function(){return N?N.inspect():{state:"pending"}},G.longStackSupport&&d)try{throw new Error}catch(se){X.stack=se.stack.substring(se.stack.indexOf(`
`)+1),X.stackCounter=le++}function te(se){N=se,G.longStackSupport&&d&&(X.source=se),T(C,function(Oe,$e){G.nextTick(function(){se.promiseDispatch.apply(se,$e)})},void 0),C=void 0,M=void 0}return $.promise=X,$.resolve=function(se){N||te(G(se))},$.fulfill=function(se){N||te(He(se))},$.reject=function(se){N||te(Se(se))},$.notify=function(se){N||T(M,function(Oe,$e){G.nextTick(function(){$e(se)})},void 0)},$}pe.prototype.makeNodeResolver=function(){var C=this;return function(M,N){M?C.reject(M):arguments.length>2?C.resolve(l(arguments,1)):C.resolve(N)}},G.Promise=ne,G.promise=ne;function ne(C){if(typeof C!="function")throw new TypeError("resolver must be a function.");var M=pe();try{C(M.resolve,M.reject,M.notify)}catch(N){M.reject(N)}return M.promise}ne.race=Ae,ne.all=Pn,ne.reject=Se,ne.resolve=G,G.passByCopy=function(C){return C},fe.prototype.passByCopy=function(){return this},G.join=function(C,M){return G(C).join(M)},fe.prototype.join=function(C){return G([this,C]).spread(function(M,N){if(M===N)return M;throw new Error("Q can't join: not the same: "+M+" "+N)})},G.race=Ae;function Ae(C){return ne(function(M,N){for(var $=0,X=C.length;$<X;$++)G(C[$]).then(M,N)})}fe.prototype.race=function(){return this.then(G.race)},G.makePromise=fe;function fe(C,M,N){M===void 0&&(M=function(te){return Se(new Error("Promise does not support operation: "+te))}),N===void 0&&(N=function(){return{state:"unknown"}});var $=x(fe.prototype);if($.promiseDispatch=function(te,se,Oe){var $e;try{C[se]?$e=C[se].apply($,Oe):$e=M.call($,se,Oe)}catch(Ue){$e=Se(Ue)}te&&te($e)},$.inspect=N,N){var X=N();X.state==="rejected"&&($.exception=X.reason),$.valueOf=function(){var te=N();return te.state==="pending"||te.state==="rejected"?$:te.value}}return $}fe.prototype.toString=function(){return"[object Promise]"},fe.prototype.then=function(C,M,N){var $=this,X=pe(),te=!1;function se(Ue){try{return typeof C=="function"?C(Ue):Ue}catch(Ve){return Se(Ve)}}function Oe(Ue){if(typeof M=="function"){U(Ue,$);try{return M(Ue)}catch(Ve){return Se(Ve)}}return Se(Ue)}function $e(Ue){return typeof N=="function"?N(Ue):Ue}return G.nextTick(function(){$.promiseDispatch(function(Ue){te||(te=!0,X.resolve(se(Ue)))},"when",[function(Ue){te||(te=!0,X.resolve(Oe(Ue)))}])}),$.promiseDispatch(void 0,"when",[void 0,function(Ue){var Ve,We=!1;try{Ve=$e(Ue)}catch(ic){if(We=!0,G.onerror)G.onerror(ic);else throw ic}We||X.notify(Ve)}]),X.promise},G.tap=function(C,M){return G(C).tap(M)},fe.prototype.tap=function(C){return C=G(C),this.then(function(M){return C.fcall(M).thenResolve(M)})},G.when=Fe;function Fe(C,M,N,$){return G(C).then(M,N,$)}fe.prototype.thenResolve=function(C){return this.then(function(){return C})},G.thenResolve=function(C,M){return G(C).thenResolve(M)},fe.prototype.thenReject=function(C){return this.then(function(){throw C})},G.thenReject=function(C,M){return G(C).thenReject(M)},G.nearer=je;function je(C){if(_t(C)){var M=C.inspect();if(M.state==="fulfilled")return M.value}return C}G.isPromise=_t;function _t(C){return C instanceof fe}G.isPromiseAlike=Ct;function Ct(C){return O(C)&&typeof C.then=="function"}G.isPending=zt;function zt(C){return _t(C)&&C.inspect().state==="pending"}fe.prototype.isPending=function(){return this.inspect().state==="pending"},G.isFulfilled=_e;function _e(C){return!_t(C)||C.inspect().state==="fulfilled"}fe.prototype.isFulfilled=function(){return this.inspect().state==="fulfilled"},G.isRejected=q;function q(C){return _t(C)&&C.inspect().state==="rejected"}fe.prototype.isRejected=function(){return this.inspect().state==="rejected"};var j=[],L=[],K=[],Z=!0;function oe(){j.length=0,L.length=0,Z||(Z=!0)}function re(C,M){Z&&(typeof process=="object"&&typeof process.emit=="function"&&G.nextTick.runAfter(function(){b(L,C)!==-1&&(process.emit("unhandledRejection",M,C),K.push(C))}),L.push(C),M&&typeof M.stack<"u"?j.push(M.stack):j.push("(no stack) "+M))}function ge(C){if(Z){var M=b(L,C);M!==-1&&(typeof process=="object"&&typeof process.emit=="function"&&G.nextTick.runAfter(function(){var N=b(K,C);N!==-1&&(process.emit("rejectionHandled",j[M],C),K.splice(N,1))}),L.splice(M,1),j.splice(M,1))}}G.resetUnhandledRejections=oe,G.getUnhandledReasons=function(){return j.slice()},G.stopUnhandledRejectionTracking=function(){oe(),Z=!1},oe(),G.reject=Se;function Se(C){var M=fe({when:function(N){return N&&ge(this),N?N(C):this}},function(){return this},function(){return{state:"rejected",reason:C}});return re(M,C),M}G.fulfill=He;function He(C){return fe({when:function(){return C},get:function(M){return C[M]},set:function(M,N){C[M]=N},delete:function(M){delete C[M]},post:function(M,N){return M==null?C.apply(void 0,N):C[M].apply(C,N)},apply:function(M,N){return C.apply(M,N)},keys:function(){return I(C)}},void 0,function(){return{state:"fulfilled",value:C}})}function pi(C){var M=pe();return G.nextTick(function(){try{C.then(M.resolve,M.reject,M.notify)}catch(N){M.reject(N)}}),M.promise}G.master=Bi;function Bi(C){return fe({isDef:function(){}},function(N,$){return as(C,N,$)},function(){return G(C).inspect()})}G.spread=Qt;function Qt(C,M,N){return G(C).spread(M,N)}fe.prototype.spread=function(C,M){return this.all().then(function(N){return C.apply(void 0,N)},M)},G.async=$s;function $s(C){return function(){function M(te,se){var Oe;if(typeof StopIteration>"u"){try{Oe=N[te](se)}catch($e){return Se($e)}return Oe.done?G(Oe.value):Fe(Oe.value,$,X)}else{try{Oe=N[te](se)}catch($e){return R($e)?G($e.value):Se($e)}return Fe(Oe,$,X)}}var N=C.apply(this,arguments),$=M.bind(M,"next"),X=M.bind(M,"throw");return $()}}G.spawn=lr;function lr(C){G.done(G.async(C)())}G.return=cr;function cr(C){throw new D(C)}G.promised=he;function he(C){return function(){return Qt([this,Pn(arguments)],function(M,N){return C.apply(M,N)})}}G.dispatch=as;function as(C,M,N){return G(C).dispatch(M,N)}fe.prototype.dispatch=function(C,M){var N=this,$=pe();return G.nextTick(function(){N.promiseDispatch($.resolve,C,M)}),$.promise},G.get=function(C,M){return G(C).dispatch("get",[M])},fe.prototype.get=function(C){return this.dispatch("get",[C])},G.set=function(C,M,N){return G(C).dispatch("set",[M,N])},fe.prototype.set=function(C,M){return this.dispatch("set",[C,M])},G.del=G.delete=function(C,M){return G(C).dispatch("delete",[M])},fe.prototype.del=fe.prototype.delete=function(C){return this.dispatch("delete",[C])},G.mapply=G.post=function(C,M,N){return G(C).dispatch("post",[M,N])},fe.prototype.mapply=fe.prototype.post=function(C,M){return this.dispatch("post",[C,M])},G.send=G.mcall=G.invoke=function(C,M){return G(C).dispatch("post",[M,l(arguments,2)])},fe.prototype.send=fe.prototype.mcall=fe.prototype.invoke=function(C){return this.dispatch("post",[C,l(arguments,1)])},G.fapply=function(C,M){return G(C).dispatch("apply",[void 0,M])},fe.prototype.fapply=function(C){return this.dispatch("apply",[void 0,C])},G.try=G.fcall=function(C){return G(C).dispatch("apply",[void 0,l(arguments,1)])},fe.prototype.fcall=function(){return this.dispatch("apply",[void 0,l(arguments)])},G.fbind=function(C){var M=G(C),N=l(arguments,1);return function(){return M.dispatch("apply",[this,N.concat(l(arguments))])}},fe.prototype.fbind=function(){var C=this,M=l(arguments);return function(){return C.dispatch("apply",[this,M.concat(l(arguments))])}},G.keys=function(C){return G(C).dispatch("keys",[])},fe.prototype.keys=function(){return this.dispatch("keys",[])},G.all=Pn;function Pn(C){return Fe(C,function(M){var N=0,$=pe();return T(M,function(X,te,se){var Oe;_t(te)&&(Oe=te.inspect()).state==="fulfilled"?M[se]=Oe.value:(++N,Fe(te,function($e){M[se]=$e,--N===0&&$.resolve(M)},$.reject,function($e){$.notify({index:se,value:$e})}))},void 0),N===0&&$.resolve(M),$.promise})}fe.prototype.all=function(){return Pn(this)},G.any=ka;function ka(C){if(C.length===0)return G.resolve();var M=G.defer(),N=0;return T(C,function($,X,te){var se=C[te];N++,Fe(se,Oe,$e,Ue);function Oe(Ve){M.resolve(Ve)}function $e(Ve){if(N--,N===0){var We=Ve||new Error(""+Ve);We.message="Q can't get fulfillment value from any promise, all promises were rejected. Last error message: "+We.message,M.reject(We)}}function Ue(Ve){M.notify({index:te,value:Ve})}},void 0),M.promise}fe.prototype.any=function(){return ka(this)},G.allResolved=J(Ki,"allResolved","allSettled");function Ki(C){return Fe(C,function(M){return M=S(M,G),Fe(Pn(S(M,function(N){return Fe(N,o,o)})),function(){return M})})}fe.prototype.allResolved=function(){return Ki(this)},G.allSettled=Zl;function Zl(C){return G(C).allSettled()}fe.prototype.allSettled=function(){return this.then(function(C){return Pn(S(C,function(M){M=G(M);function N(){return M.inspect()}return M.then(N,N)}))})},G.fail=G.catch=function(C,M){return G(C).then(void 0,M)},fe.prototype.fail=fe.prototype.catch=function(C){return this.then(void 0,C)},G.progress=ec;function ec(C,M){return G(C).then(void 0,void 0,M)}fe.prototype.progress=function(C){return this.then(void 0,void 0,C)},G.fin=G.finally=function(C,M){return G(C).finally(M)},fe.prototype.fin=fe.prototype.finally=function(C){if(!C||typeof C.apply!="function")throw new Error("Q can't apply finally callback");return C=G(C),this.then(function(M){return C.fcall().then(function(){return M})},function(M){return C.fcall().then(function(){throw M})})},G.done=function(C,M,N,$){return G(C).done(M,N,$)},fe.prototype.done=function(C,M,N){var $=function(te){G.nextTick(function(){if(U(te,X),G.onerror)G.onerror(te);else throw te})},X=C||M||N?this.then(C,M,N):this;typeof process=="object"&&process&&process.domain&&($=process.domain.bind($)),X.then(void 0,$)},G.timeout=function(C,M,N){return G(C).timeout(M,N)},fe.prototype.timeout=function(C,M){var N=pe(),$=setTimeout(function(){(!M||typeof M=="string")&&(M=new Error(M||"Timed out after "+C+" ms"),M.code="ETIMEDOUT"),N.reject(M)},C);return this.then(function(X){clearTimeout($),N.resolve(X)},function(X){clearTimeout($),N.reject(X)},N.notify),N.promise},G.delay=function(C,M){return M===void 0&&(M=C,C=void 0),G(C).delay(M)},fe.prototype.delay=function(C){return this.then(function(M){var N=pe();return setTimeout(function(){N.resolve(M)},C),N.promise})},G.nfapply=function(C,M){return G(C).nfapply(M)},fe.prototype.nfapply=function(C){var M=pe(),N=l(C);return N.push(M.makeNodeResolver()),this.fapply(N).fail(M.reject),M.promise},G.nfcall=function(C){var M=l(arguments,1);return G(C).nfapply(M)},fe.prototype.nfcall=function(){var C=l(arguments),M=pe();return C.push(M.makeNodeResolver()),this.fapply(C).fail(M.reject),M.promise},G.nfbind=G.denodeify=function(C){if(C===void 0)throw new Error("Q can't wrap an undefined function");var M=l(arguments,1);return function(){var N=M.concat(l(arguments)),$=pe();return N.push($.makeNodeResolver()),G(C).fapply(N).fail($.reject),$.promise}},fe.prototype.nfbind=fe.prototype.denodeify=function(){var C=l(arguments);return C.unshift(this),G.denodeify.apply(void 0,C)},G.nbind=function(C,M){var N=l(arguments,2);return function(){var $=N.concat(l(arguments)),X=pe();$.push(X.makeNodeResolver());function te(){return C.apply(M,arguments)}return G(te).fapply($).fail(X.reject),X.promise}},fe.prototype.nbind=function(){var C=l(arguments,0);return C.unshift(this),G.nbind.apply(void 0,C)},G.nmapply=G.npost=function(C,M,N){return G(C).npost(M,N)},fe.prototype.nmapply=fe.prototype.npost=function(C,M){var N=l(M||[]),$=pe();return N.push($.makeNodeResolver()),this.dispatch("post",[C,N]).fail($.reject),$.promise},G.nsend=G.nmcall=G.ninvoke=function(C,M){var N=l(arguments,2),$=pe();return N.push($.makeNodeResolver()),G(C).dispatch("post",[M,N]).fail($.reject),$.promise},fe.prototype.nsend=fe.prototype.nmcall=fe.prototype.ninvoke=function(C){var M=l(arguments,1),N=pe();return M.push(N.makeNodeResolver()),this.dispatch("post",[C,M]).fail(N.reject),N.promise},G.nodeify=Us;function Us(C,M){return G(C).nodeify(M)}fe.prototype.nodeify=function(C){if(C)this.then(function(M){G.nextTick(function(){C(null,M)})},function(M){G.nextTick(function(){C(M)})});else return this},G.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var tc=H();return G})},7533:(c,d)=>{var f=Math.pow(2,8),u=Math.pow(2,16),o=Math.pow(2,24),g=Math.pow(2,32),w=Math.pow(2,40),m=Math.pow(2,48),l=Math.pow(2,52),T=Math.pow(2,1022);d.readByte=function(b){return b>127?b-256:b},d.readI16=function(b,S){S=S||0;var x=b[S+1];return x+=b[S]<<8,b[S]&128&&(x-=u),x},d.readI32=function(b,S){S=S||0;var x=b[S+3];return x+=b[S+2]<<8,x+=b[S+1]<<16,x+=b[S]*o,b[S]&128&&(x-=g),x},d.writeI16=function(b,S){return b[1]=S&255,S>>=8,b[0]=S&255,b},d.writeI32=function(b,S){return b[3]=S&255,S>>=8,b[2]=S&255,S>>=8,b[1]=S&255,S>>=8,b[0]=S&255,b},d.readDouble=function(b,S){S=S||0;var x=b[S]&128,B=(b[S+1]&240)>>4;B+=(b[S]&127)<<4;var F=b[S+7];switch(F+=b[S+6]<<8,F+=b[S+5]<<16,F+=b[S+4]*o,F+=b[S+3]*g,F+=b[S+2]*w,F+=(b[S+1]&15)*m,B){case 0:B=-1022;break;case 2047:return F?NaN:x?-1/0:1/0;default:F+=l,B-=1023}return x&&(F*=-1),F*Math.pow(2,B-52)},d.writeDouble=function(b,S){var x,B,F;return b[0]=S<0?128:0,S=Math.abs(S),S!==S?(x=0x8000000000000,B=2047):S===1/0?(x=0,B=2047):(B=Math.floor(Math.log(S)/Math.LN2),F=Math.pow(2,-B),S*F<1&&(B--,F*=2),B+1023>=2047?(x=0,B=2047):B+1023>=1?(x=(S*F-1)*l,B+=1023):(x=S*T*l,B=0)),b[1]=B<<4&240,b[0]|=B>>4&127,b[7]=x&255,x=Math.floor(x/f),b[6]=x&255,x=Math.floor(x/f),b[5]=x&255,x=Math.floor(x/f),b[4]=x&255,x>>=8,b[3]=x&255,x>>=8,b[2]=x&255,x>>=8,b[1]|=x&15,b}},4711:(c,d,f)=>{var u=f(8764).Buffer,o=f(1291),g=f(7533),w=f(135),m=f(5406),l=m.Type;c.exports=x;var T=-65536,b=-2147418112,S=255;x.VERSION_MASK=T,x.VERSION_1=b,x.TYPE_MASK=S;function x(B,F,I){this.trans=B,this.strictRead=F!==void 0?F:!1,this.strictWrite=I!==void 0?I:!0,this._seqid=null}x.prototype.flush=function(){return this.trans.flush()},x.prototype.writeMessageBegin=function(B,F,I){this.strictWrite?(this.writeI32(b|F),this.writeString(B),this.writeI32(I)):(this.writeString(B),this.writeByte(F),this.writeI32(I)),this._seqid!==null?o.warning("SeqId already set",{name:B}):(this._seqid=I,this.trans.setCurrSeqId(I))},x.prototype.writeMessageEnd=function(){this._seqid!==null?this._seqid=null:o.warning("No seqid to unset")},x.prototype.writeStructBegin=function(B){},x.prototype.writeStructEnd=function(){},x.prototype.writeFieldBegin=function(B,F,I){this.writeByte(F),this.writeI16(I)},x.prototype.writeFieldEnd=function(){},x.prototype.writeFieldStop=function(){this.writeByte(l.STOP)},x.prototype.writeMapBegin=function(B,F,I){this.writeByte(B),this.writeByte(F),this.writeI32(I)},x.prototype.writeMapEnd=function(){},x.prototype.writeListBegin=function(B,F){this.writeByte(B),this.writeI32(F)},x.prototype.writeListEnd=function(){},x.prototype.writeSetBegin=function(B,F){this.writeByte(B),this.writeI32(F)},x.prototype.writeSetEnd=function(){},x.prototype.writeBool=function(B){B?this.writeByte(1):this.writeByte(0)},x.prototype.writeByte=function(B){this.trans.write(new u([B]))},x.prototype.writeI16=function(B){this.trans.write(g.writeI16(new u(2),B))},x.prototype.writeI32=function(B){this.trans.write(g.writeI32(new u(4),B))},x.prototype.writeI64=function(B){B.buffer?this.trans.write(B.buffer):this.trans.write(new w(B).buffer)},x.prototype.writeDouble=function(B){this.trans.write(g.writeDouble(new u(8),B))},x.prototype.writeStringOrBinary=function(B,F,I){if(typeof I=="string")this.writeI32(u.byteLength(I,F)),this.trans.write(new u(I,F));else if(I instanceof u||Object.prototype.toString.call(I)=="[object Uint8Array]")this.writeI32(I.length),this.trans.write(I);else throw new Error(B+" called without a string/Buffer argument: "+I)},x.prototype.writeString=function(B){this.writeStringOrBinary("writeString","utf8",B)},x.prototype.writeBinary=function(B){this.writeStringOrBinary("writeBinary","binary",B)},x.prototype.readMessageBegin=function(){var B=this.readI32(),F,I,A;if(B<0){var O=B&T;if(O!=b)throw new m.TProtocolException(m.TProtocolExceptionType.BAD_VERSION,"Bad version in readMessageBegin: "+B);F=B&S,I=this.readString(),A=this.readI32()}else{if(this.strictRead)throw new m.TProtocolException(m.TProtocolExceptionType.BAD_VERSION,"No protocol version header");I=this.trans.read(B),F=this.readByte(),A=this.readI32()}return{fname:I,mtype:F,rseqid:A}},x.prototype.readMessageEnd=function(){},x.prototype.readStructBegin=function(){return{fname:""}},x.prototype.readStructEnd=function(){},x.prototype.readFieldBegin=function(){var B=this.readByte();if(B==l.STOP)return{fname:null,ftype:B,fid:0};var F=this.readI16();return{fname:null,ftype:B,fid:F}},x.prototype.readFieldEnd=function(){},x.prototype.readMapBegin=function(){var B=this.readByte(),F=this.readByte(),I=this.readI32();return{ktype:B,vtype:F,size:I}},x.prototype.readMapEnd=function(){},x.prototype.readListBegin=function(){var B=this.readByte(),F=this.readI32();return{etype:B,size:F}},x.prototype.readListEnd=function(){},x.prototype.readSetBegin=function(){var B=this.readByte(),F=this.readI32();return{etype:B,size:F}},x.prototype.readSetEnd=function(){},x.prototype.readBool=function(){var B=this.readByte();return B!==0},x.prototype.readByte=function(){return this.trans.readByte()},x.prototype.readI16=function(){return this.trans.readI16()},x.prototype.readI32=function(){return this.trans.readI32()},x.prototype.readI64=function(){var B=this.trans.read(8);return new w(B)},x.prototype.readDouble=function(){return this.trans.readDouble()},x.prototype.readBinary=function(){var B=this.readI32();if(B===0)return new u(0);if(B<0)throw new m.TProtocolException(m.TProtocolExceptionType.NEGATIVE_SIZE,"Negative binary size");return this.trans.read(B)},x.prototype.readString=function(){var B=this.readI32();if(B===0)return"";if(B<0)throw new m.TProtocolException(m.TProtocolExceptionType.NEGATIVE_SIZE,"Negative string size");return this.trans.readString(B)},x.prototype.getTransport=function(){return this.trans},x.prototype.skip=function(B){switch(B){case l.BOOL:this.readBool();break;case l.BYTE:this.readByte();break;case l.I16:this.readI16();break;case l.I32:this.readI32();break;case l.I64:this.readI64();break;case l.DOUBLE:this.readDouble();break;case l.STRING:this.readString();break;case l.STRUCT:for(this.readStructBegin();;){var F=this.readFieldBegin();if(F.ftype===l.STOP)break;this.skip(F.ftype),this.readFieldEnd()}this.readStructEnd();break;case l.MAP:for(var I=this.readMapBegin(),A=0;A<I.size;++A)this.skip(I.ktype),this.skip(I.vtype);this.readMapEnd();break;case l.SET:for(var O=this.readSetBegin(),R=0;R<O.size;++R)this.skip(O.etype);this.readSetEnd();break;case l.LIST:for(var D=this.readListBegin(),P=0;P<D.size;++P)this.skip(D.etype);this.readListEnd();break;default:throw new Error("Invalid type: "+B)}}},9262:(c,d,f)=>{d.Thrift=f(5406);var u=f(5455);d.WSConnection=u.WSConnection,d.createWSConnection=u.createWSConnection,d.createWSClient=u.createWSClient;var o=f(4050);d.XHRConnection=o.XHRConnection,d.createXHRConnection=o.createXHRConnection,d.createXHRClient=o.createXHRClient,d.Int64=f(135),d.Q=f(8486);var g=f(4184);d.Multiplexer=g.Multiplexer,d.TBufferedTransport=f(8869),d.TFramedTransport=f(7584),d.TWebSocketTransport=f(5764),d.Protocol=f(5086),d.TJSONProtocol=f(5086),d.TBinaryProtocol=f(4711),d.TCompactProtocol=f(9277)},8869:(c,d,f)=>{var u=f(8764).Buffer,o=f(7533),g=f(3590),w=f(5190);c.exports=m;function m(l,T){this.defaultReadBufferSize=1024,this.writeBufferSize=512,this.inBuf=new u(this.defaultReadBufferSize),this.readCursor=0,this.writeCursor=0,this.outBuffers=[],this.outCount=0,this.onFlush=T}m.prototype=new w,m.prototype.reset=function(){this.inBuf=new u(this.defaultReadBufferSize),this.readCursor=0,this.writeCursor=0,this.outBuffers=[],this.outCount=0},m.receiver=function(l,T){var b=new m;return function(S){if(b.writeCursor+S.length>b.inBuf.length){var x=new u(b.writeCursor+S.length);b.inBuf.copy(x,0,0,b.writeCursor),b.inBuf=x}S.copy(b.inBuf,b.writeCursor,0),b.writeCursor+=S.length,l(b,T)}},m.prototype.commitPosition=function(){var l=this.writeCursor-this.readCursor,T=l*2>this.defaultReadBufferSize?l*2:this.defaultReadBufferSize,b=new u(T);l>0&&this.inBuf.copy(b,0,this.readCursor,this.writeCursor),this.readCursor=0,this.writeCursor=l,this.inBuf=b},m.prototype.rollbackPosition=function(){this.readCursor=0},m.prototype.isOpen=function(){return!0},m.prototype.open=function(){},m.prototype.close=function(){},m.prototype.setCurrSeqId=function(l){this._seqid=l},m.prototype.ensureAvailable=function(l){if(this.readCursor+l>this.writeCursor)throw new g},m.prototype.read=function(l){this.ensureAvailable(l);var T=new u(l);return this.inBuf.copy(T,0,this.readCursor,this.readCursor+l),this.readCursor+=l,T},m.prototype.readByte=function(){return this.ensureAvailable(1),o.readByte(this.inBuf[this.readCursor++])},m.prototype.readI16=function(){this.ensureAvailable(2);var l=o.readI16(this.inBuf,this.readCursor);return this.readCursor+=2,l},m.prototype.readI32=function(){this.ensureAvailable(4);var l=o.readI32(this.inBuf,this.readCursor);return this.readCursor+=4,l},m.prototype.readDouble=function(){this.ensureAvailable(8);var l=o.readDouble(this.inBuf,this.readCursor);return this.readCursor+=8,l},m.prototype.readString=function(l){this.ensureAvailable(l);var T=this.inBuf.toString("utf8",this.readCursor,this.readCursor+l);return this.readCursor+=l,T},m.prototype.borrow=function(){var l={buf:this.inBuf,readIndex:this.readCursor,writeIndex:this.writeCursor};return l},m.prototype.consume=function(l){this.readCursor+=l},m.prototype.write=function(l){typeof l=="string"&&(l=new u(l,"utf8")),this.outBuffers.push(l),this.outCount+=l.length},m.prototype.flush=function(){var l=this._seqid;if(this._seqid=null,!(this.outCount<1)){var T=new u(this.outCount),b=0;this.outBuffers.forEach(function(S){S.copy(T,b,0),b+=S.length}),this.onFlush&&this.onFlush(T,l),this.outBuffers=[],this.outCount=0}}},9277:(c,d,f)=>{var u=f(8764).Buffer,o=f(1291),g=f(135),w=f(5406),m=w.Type;c.exports=I;var l=Math.pow(2,8),T=Math.pow(2,24),b=Math.pow(2,32),S=Math.pow(2,40),x=Math.pow(2,48),B=Math.pow(2,52),F=Math.pow(2,1022);function I(A){this.trans=A,this.lastField_=[],this.lastFieldId_=0,this.string_limit_=0,this.string_buf_=null,this.string_buf_size_=0,this.container_limit_=0,this.booleanField_={name:null,hasBoolValue:!1},this.boolValue_={hasBoolValue:!1,boolValue:!1}}I.PROTOCOL_ID=-126,I.VERSION_N=1,I.VERSION_MASK=31,I.TYPE_MASK=-32,I.TYPE_BITS=7,I.TYPE_SHIFT_AMOUNT=5,I.Types={CT_STOP:0,CT_BOOLEAN_TRUE:1,CT_BOOLEAN_FALSE:2,CT_BYTE:3,CT_I16:4,CT_I32:5,CT_I64:6,CT_DOUBLE:7,CT_BINARY:8,CT_LIST:9,CT_SET:10,CT_MAP:11,CT_STRUCT:12},I.TTypeToCType=[I.Types.CT_STOP,0,I.Types.CT_BOOLEAN_TRUE,I.Types.CT_BYTE,I.Types.CT_DOUBLE,0,I.Types.CT_I16,0,I.Types.CT_I32,0,I.Types.CT_I64,I.Types.CT_BINARY,I.Types.CT_STRUCT,I.Types.CT_MAP,I.Types.CT_SET,I.Types.CT_LIST],I.prototype.getTransport=function(){return this.trans},I.prototype.getCompactType=function(A){return I.TTypeToCType[A]},I.prototype.getTType=function(A){switch(A){case m.STOP:return m.STOP;case I.Types.CT_BOOLEAN_FALSE:case I.Types.CT_BOOLEAN_TRUE:return m.BOOL;case I.Types.CT_BYTE:return m.BYTE;case I.Types.CT_I16:return m.I16;case I.Types.CT_I32:return m.I32;case I.Types.CT_I64:return m.I64;case I.Types.CT_DOUBLE:return m.DOUBLE;case I.Types.CT_BINARY:return m.STRING;case I.Types.CT_LIST:return m.LIST;case I.Types.CT_SET:return m.SET;case I.Types.CT_MAP:return m.MAP;case I.Types.CT_STRUCT:return m.STRUCT;default:throw new w.TProtocolException(w.TProtocolExceptionType.INVALID_DATA,"Unknown type: "+A)}return m.STOP},I.prototype.flush=function(){return this.trans.flush()},I.prototype.writeMessageBegin=function(A,O,R){this.writeByte(I.PROTOCOL_ID),this.writeByte(I.VERSION_N&I.VERSION_MASK|O<<I.TYPE_SHIFT_AMOUNT&I.TYPE_MASK),this.writeVarint32(R),this.writeString(A),this._seqid?o.warning("SeqId already set",{name:A}):(this._seqid=R,this.trans.setCurrSeqId(R))},I.prototype.writeMessageEnd=function(){},I.prototype.writeStructBegin=function(A){this.lastField_.push(this.lastFieldId_),this.lastFieldId_=0},I.prototype.writeStructEnd=function(){this.lastFieldId_=this.lastField_.pop()},I.prototype.writeFieldBegin=function(A,O,R){if(O!=m.BOOL)return this.writeFieldBeginInternal(A,O,R,-1);this.booleanField_.name=A,this.booleanField_.fieldType=O,this.booleanField_.fieldId=R},I.prototype.writeFieldEnd=function(){},I.prototype.writeFieldStop=function(){this.writeByte(I.Types.CT_STOP)},I.prototype.writeMapBegin=function(A,O,R){R===0?this.writeByte(0):(this.writeVarint32(R),this.writeByte(this.getCompactType(A)<<4|this.getCompactType(O)))},I.prototype.writeMapEnd=function(){},I.prototype.writeListBegin=function(A,O){this.writeCollectionBegin(A,O)},I.prototype.writeListEnd=function(){},I.prototype.writeSetBegin=function(A,O){this.writeCollectionBegin(A,O)},I.prototype.writeSetEnd=function(){},I.prototype.writeBool=function(A){this.booleanField_.name!==null?(this.writeFieldBeginInternal(this.booleanField_.name,this.booleanField_.fieldType,this.booleanField_.fieldId,A?I.Types.CT_BOOLEAN_TRUE:I.Types.CT_BOOLEAN_FALSE),this.booleanField_.name=null):this.writeByte(A?I.Types.CT_BOOLEAN_TRUE:I.Types.CT_BOOLEAN_FALSE)},I.prototype.writeByte=function(A){this.trans.write(new u([A]))},I.prototype.writeI16=function(A){this.writeVarint32(this.i32ToZigzag(A))},I.prototype.writeI32=function(A){this.writeVarint32(this.i32ToZigzag(A))},I.prototype.writeI64=function(A){this.writeVarint64(this.i64ToZigzag(A))},I.prototype.writeDouble=function(A){var O=new u(8),R,D,P;O[7]=A<0?128:0,A=Math.abs(A),A!==A?(R=0x8000000000000,D=2047):A===1/0?(R=0,D=2047):(D=Math.floor(Math.log(A)/Math.LN2),P=Math.pow(2,-D),A*P<1&&(D--,P*=2),D+1023>=2047?(R=0,D=2047):D+1023>=1?(R=(A*P-1)*B,D+=1023):(R=A*F*B,D=0)),O[6]=D<<4&240,O[7]|=D>>4&127,O[0]=R&255,R=Math.floor(R/l),O[1]=R&255,R=Math.floor(R/l),O[2]=R&255,R=Math.floor(R/l),O[3]=R&255,R>>=8,O[4]=R&255,R>>=8,O[5]=R&255,R>>=8,O[6]|=R&15,this.trans.write(O)},I.prototype.writeStringOrBinary=function(A,O,R){if(typeof R=="string")this.writeVarint32(u.byteLength(R,O)),this.trans.write(new u(R,O));else if(R instanceof u||Object.prototype.toString.call(R)=="[object Uint8Array]")this.writeVarint32(R.length),this.trans.write(R);else throw new Error(A+" called without a string/Buffer argument: "+R)},I.prototype.writeString=function(A){this.writeStringOrBinary("writeString","utf8",A)},I.prototype.writeBinary=function(A){this.writeStringOrBinary("writeBinary","binary",A)},I.prototype.writeFieldBeginInternal=function(A,O,R,D){var P=D==-1?this.getCompactType(O):D;R>this.lastFieldId_&&R-this.lastFieldId_<=15?this.writeByte(R-this.lastFieldId_<<4|P):(this.writeByte(P),this.writeI16(R)),this.lastFieldId_=R},I.prototype.writeCollectionBegin=function(A,O){O<=14?this.writeByte(O<<4|this.getCompactType(A)):(this.writeByte(240|this.getCompactType(A)),this.writeVarint32(O))},I.prototype.writeVarint32=function(A){for(var O=new u(5),R=0;;)if(A&-128)O[R++]=A&127|128,A=A>>>7;else{O[R++]=A;break}var D=new u(R);O.copy(D,0,0,R),this.trans.write(D)},I.prototype.writeVarint64=function(A){if(typeof A=="number"&&(A=new g(A)),!(A instanceof g))throw new w.TProtocolException(w.TProtocolExceptionType.INVALID_DATA,"Expected Int64 or Number, found: "+A);for(var O=new u(10),R=0,D=A.buffer.readUInt32BE(0,!0),P=A.buffer.readUInt32BE(4,!0),U=0;;)if(!(P&-128)&&D===0){O[R++]=P;break}else O[R++]=P&127|128,U=D<<25,P=P>>>7,D=D>>>7,P=P|U;var Y=new u(R);O.copy(Y,0,0,R),this.trans.write(Y)},I.prototype.i64ToZigzag=function(A){if(typeof A=="string"?A=new g(parseInt(A,10)):typeof A=="number"&&(A=new g(A)),!(A instanceof g))throw new w.TProtocolException(w.TProtocolExceptionType.INVALID_DATA,"Expected Int64 or Number, found: "+A);var O=A.buffer.readUInt32BE(0,!0),R=A.buffer.readUInt32BE(4,!0),D=O>>>31;return O=(O<<1|R>>>31)^(D?4294967295:0),R=R<<1^(D?4294967295:0),new g(O,R)},I.prototype.i32ToZigzag=function(A){return A<<1^(A&2147483648?4294967295:0)},I.prototype.readMessageBegin=function(){var A=this.trans.readByte();if(A!=I.PROTOCOL_ID)throw new w.TProtocolException(w.TProtocolExceptionType.BAD_VERSION,"Bad protocol identifier "+A);var O=this.trans.readByte(),R=O&I.VERSION_MASK;if(R!=I.VERSION_N)throw new w.TProtocolException(w.TProtocolExceptionType.BAD_VERSION,"Bad protocol version "+R);var D=O>>I.TYPE_SHIFT_AMOUNT&I.TYPE_BITS,P=this.readVarint32(),U=this.readString();return{fname:U,mtype:D,rseqid:P}},I.prototype.readMessageEnd=function(){},I.prototype.readStructBegin=function(){return this.lastField_.push(this.lastFieldId_),this.lastFieldId_=0,{fname:""}},I.prototype.readStructEnd=function(){this.lastFieldId_=this.lastField_.pop()},I.prototype.readFieldBegin=function(){var A=0,O=this.trans.readByte(O),R=O&15;if(R==I.Types.CT_STOP)return{fname:null,ftype:w.Type.STOP,fid:0};var D=(O&240)>>>4;D===0?A=this.readI16():A=this.lastFieldId_+D;var P=this.getTType(R);return(R==I.Types.CT_BOOLEAN_TRUE||R==I.Types.CT_BOOLEAN_FALSE)&&(this.boolValue_.hasBoolValue=!0,this.boolValue_.boolValue=R==I.Types.CT_BOOLEAN_TRUE),this.lastFieldId_=A,{fname:null,ftype:P,fid:A}},I.prototype.readFieldEnd=function(){},I.prototype.readMapBegin=function(){var A=this.readVarint32();if(A<0)throw new w.TProtocolException(w.TProtocolExceptionType.NEGATIVE_SIZE,"Negative map size");var O=0;A!==0&&(O=this.trans.readByte());var R=this.getTType((O&240)>>>4),D=this.getTType(O&15);return{ktype:R,vtype:D,size:A}},I.prototype.readMapEnd=function(){},I.prototype.readListBegin=function(){var A=this.trans.readByte(),O=A>>>4&15;if(O==15&&(O=this.readVarint32()),O<0)throw new w.TProtocolException(w.TProtocolExceptionType.NEGATIVE_SIZE,"Negative list size");var R=this.getTType(A&15);return{etype:R,size:O}},I.prototype.readListEnd=function(){},I.prototype.readSetBegin=function(){return this.readListBegin()},I.prototype.readSetEnd=function(){},I.prototype.readBool=function(){var A=!1;if(this.boolValue_.hasBoolValue===!0)A=this.boolValue_.boolValue,this.boolValue_.hasBoolValue=!1;else{var O=this.trans.readByte();O.rsize,A=O.value==I.Types.CT_BOOLEAN_TRUE}return A},I.prototype.readByte=function(){return this.trans.readByte()},I.prototype.readI16=function(){return this.readI32()},I.prototype.readI32=function(){return this.zigzagToI32(this.readVarint32())},I.prototype.readI64=function(){return this.zigzagToI64(this.readVarint64())},I.prototype.readDouble=function(){var A=this.trans.read(8),O=0,R=A[O+7]&128,D=(A[O+6]&240)>>4;D+=(A[O+7]&127)<<4;var P=A[O];switch(P+=A[O+1]<<8,P+=A[O+2]<<16,P+=A[O+3]*T,P+=A[O+4]*b,P+=A[O+5]*S,P+=(A[O+6]&15)*x,D){case 0:D=-1022;break;case 2047:return P?NaN:R?-1/0:1/0;default:P+=B,D-=1023}return R&&(P*=-1),P*Math.pow(2,D-52)},I.prototype.readBinary=function(){var A=this.readVarint32();if(A===0)return new u(0);if(A<0)throw new w.TProtocolException(w.TProtocolExceptionType.NEGATIVE_SIZE,"Negative binary size");return this.trans.read(A)},I.prototype.readString=function(){var A=this.readVarint32();if(A===0)return"";if(A<0)throw new w.TProtocolException(w.TProtocolExceptionType.NEGATIVE_SIZE,"Negative string size");return this.trans.readString(A)},I.prototype.readVarint32=function(){return this.readVarint64().toNumber()},I.prototype.readVarint64=function(){for(var A=0,O=0,R=0,D=0;;){var P=this.trans.readByte();if(A++,D<=25?O=O|(P&127)<<D:25<D&&D<32?(O=O|(P&127)<<D,R=R|(P&127)>>>32-D):R=R|(P&127)<<D-32,D+=7,!(P&128))break;if(A>=10)throw new w.TProtocolException(w.TProtocolExceptionType.INVALID_DATA,"Variable-length int over 10 bytes.")}return new g(R,O)},I.prototype.zigzagToI32=function(A){return A>>>1^-1*(A&1)},I.prototype.zigzagToI64=function(A){var O=A.buffer.readUInt32BE(0,!0),R=A.buffer.readUInt32BE(4,!0),D=new g(O&0,R&1);D._2scomp();var P=D.buffer.readUInt32BE(0,!0),U=D.buffer.readUInt32BE(4,!0),Y=O<<31;return O=O>>>1^P,R=(R>>>1|Y)^U,new g(O,R)},I.prototype.skip=function(A){switch(A){case m.BOOL:this.readBool();break;case m.BYTE:this.readByte();break;case m.I16:this.readI16();break;case m.I32:this.readI32();break;case m.I64:this.readI64();break;case m.DOUBLE:this.readDouble();break;case m.STRING:this.readString();break;case m.STRUCT:for(this.readStructBegin();;){var O=this.readFieldBegin();if(O.ftype===m.STOP)break;this.skip(O.ftype),this.readFieldEnd()}this.readStructEnd();break;case m.MAP:for(var R=this.readMapBegin(),D=0;D<R.size;++D)this.skip(R.ktype),this.skip(R.vtype);this.readMapEnd();break;case m.SET:for(var P=this.readSetBegin(),U=0;U<P.size;++U)this.skip(P.etype);this.readSetEnd();break;case m.LIST:for(var Y=this.readListBegin(),z=0;z<Y.size;++z)this.skip(Y.etype);this.readListEnd();break;default:throw new Error("Invalid type: "+A)}}},6243:c=>{c.exports=d;function d(f,u){f.Client&&(f=f.Client);var o=function(m,l){u.write(m,l)},g=new u.transport(void 0,o),w=new f(g,u.protocol);return g.client=w,u.client=w,w}},7584:(c,d,f)=>{var u=f(8764).Buffer,o=f(7533),g=f(3590),w=f(5190);c.exports=m;function m(l,T){this.inBuf=l||new u(0),this.outBuffers=[],this.outCount=0,this.readPos=0,this.onFlush=T}m.prototype=new w,m.receiver=function(l,T){var b=null;return function(S){for(b&&(S=u.concat([b,S]),b=null);S.length;){if(S.length<4){b=S;return}var x=o.readI32(S,0);if(S.length<4+x){b=S;return}var B=S.slice(4,4+x);b=S.slice(4+x),l(new m(B),T),S=b,b=null}}},m.prototype.commitPosition=function(){},m.prototype.rollbackPosition=function(){},m.prototype.isOpen=function(){return!0},m.prototype.open=function(){},m.prototype.close=function(){},m.prototype.setCurrSeqId=function(l){this._seqid=l},m.prototype.ensureAvailable=function(l){if(this.readPos+l>this.inBuf.length)throw new g},m.prototype.read=function(l){this.ensureAvailable(l);var T=this.readPos+l;if(this.inBuf.length<T)throw new Error("read("+l+") failed - not enough data");var b=this.inBuf.slice(this.readPos,T);return this.readPos=T,b},m.prototype.readByte=function(){return this.ensureAvailable(1),o.readByte(this.inBuf[this.readPos++])},m.prototype.readI16=function(){this.ensureAvailable(2);var l=o.readI16(this.inBuf,this.readPos);return this.readPos+=2,l},m.prototype.readI32=function(){this.ensureAvailable(4);var l=o.readI32(this.inBuf,this.readPos);return this.readPos+=4,l},m.prototype.readDouble=function(){this.ensureAvailable(8);var l=o.readDouble(this.inBuf,this.readPos);return this.readPos+=8,l},m.prototype.readString=function(l){this.ensureAvailable(l);var T=this.inBuf.toString("utf8",this.readPos,this.readPos+l);return this.readPos+=l,T},m.prototype.borrow=function(){return{buf:this.inBuf,readIndex:this.readPos,writeIndex:this.inBuf.length}},m.prototype.consume=function(l){this.readPos+=l},m.prototype.write=function(l,T){typeof l=="string"&&(l=new u(l,T||"utf8")),this.outBuffers.push(l),this.outCount+=l.length},m.prototype.flush=function(){var l=this._seqid;this._seqid=null;var T=new u(this.outCount),b=0;if(this.outBuffers.forEach(function(x){x.copy(T,b,0),b+=x.length}),this.onFlush){var S=new u(T.length+4);o.writeI32(S,T.length),T.copy(S,4,0,T.length),this.onFlush&&this.onFlush(S,l)}this.outBuffers=[],this.outCount=0}},5190:(c,d,f)=>{var u=f(8764).Buffer,o=f(9539),g=f(9277),w=f(4711),m=f(3590);function l(H){Error.call(this),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.message=H}o.inherits(l,Error),c.exports=U;var T=0,b=1,S=0,x=32/8,B=48/8,F=64/8,I=96/8,A=112/8,O=4095,R=1,D=1073741823;function P(H){var J=f(8869);this.outputBuffer=null;var G=this;this.transport=new J(null,function(le){G.outputBuffer=le}),this.transport.inBuf=H||u.alloc(0),this.transport.writeCursor=this.transport.inBuf.length,this.protocol=new g(this.transport)}P.prototype.readVarint32=function(){return this.protocol.readVarint32()},P.prototype.writeVarint32=function(H){this.protocol.writeVarint32(H)},P.prototype.readString=function(){return this.protocol.readString()},P.prototype.writeString=function(H){this.protocol.writeString(H)},P.prototype.getOutCount=function(){return this.transport.outCount},P.prototype.write=function(H){this.transport.write(H)},P.prototype.toBuffer=function(){return this.transport.flush(),this.outputBuffer},U.SubprotocolId={BINARY:0,JSON:1,COMPACT:2};function U(){this.maxFrameSize=D,this.protocolId=U.SubprotocolId.BINARY,this.rheaders={},this.wheaders={},this.inBuf=u.alloc(0),this.outCount=0,this.flags=null,this.seqid=0,this.shouldWriteHeaders=!0}var Y=function(H,J){if(typeof H!="string"||typeof J!="string")throw new l("Header key and values must be strings")},z=function(H){for(var J=Object.keys(U.SubprotocolId),G=0;G<J.length;G++)if(H===U.SubprotocolId[J[G]])return!0;throw new Error(H+" is not a valid protocol id")};U.prototype.setSeqId=function(H){this.seqid=H},U.prototype.getSeqId=function(H){return this.seqid},U.prototype.setFlags=function(H){this.flags=H},U.prototype.getReadHeaders=function(){return this.rheaders},U.prototype.setReadHeader=function(H,J){Y(H,J),this.rheaders[H]=J},U.prototype.clearReadHeaders=function(){this.rheaders={}},U.prototype.getWriteHeaders=function(){return this.wheaders},U.prototype.setWriteHeader=function(H,J){Y(H,J),this.wheaders[H]=J},U.prototype.clearWriteHeaders=function(){this.wheaders={}},U.prototype.setMaxFrameSize=function(H){this.maxFrameSize=H},U.prototype.setProtocolId=function(H){z(H),this.protocolId=H},U.prototype.getProtocolId=function(){return this.protocolId};var W=function(H){var J=H.readInt32BE();return(J&w.VERSION_MASK)===w.VERSION_1},V=function(H){var J=H.readInt8(T),G=H.readInt8(b);return J===g.PROTOCOL_ID&&(G&g.VERSION_MASK)===g.VERSION_N};U.prototype.readHeaders=function(){var H=this.inBuf,J=!1;if(W(H)&&(this.setProtocolId(U.SubprotocolId.BINARY),J=!0),V(H)&&(this.setProtocolId(U.SubprotocolId.COMPACT),J=!0),J){this.shouldWriteHeaders=!1;return}var G=H.readInt32BE(S);if(G>this.maxFrameSize)throw new l("Frame exceeds maximum frame size");var le=H.readInt16BE(x);if(this.shouldWriteHeaders=le===O,!!this.shouldWriteHeaders){this.setFlags(H.readInt16BE(B)),this.setSeqId(H.readInt32BE(F));var pe=H.readInt16BE(I)*4,ne=A+pe;if(ne>H.length)throw new l("Header size is greater than frame size");var Ae=u.alloc(pe);H.copy(Ae,0,A,ne);var fe=new P(Ae);this.setProtocolId(fe.readVarint32());var Fe=fe.readVarint32();if(Fe>0)throw new l("Transforms are not yet supported");for(;;)try{var je=fe.readVarint32();if(je!==R)break;for(var _t=fe.readVarint32(),Ct=0;Ct<_t;Ct++){var zt=fe.readString(),_e=fe.readString();this.setReadHeader(zt,_e)}}catch(q){if(q instanceof m)break;throw q}return this.read(ne),this.getReadHeaders()}},U.prototype.writeHeaders=function(){if(this.shouldWriteHeaders){var H=this.getWriteHeaders(),J=new P;J.writeVarint32(this.protocolId),J.writeVarint32(0);var G=Object.keys(H);if(G.length>0){J.writeVarint32(R),J.writeVarint32(G.length);for(var le=0;le<G.length;le++){var pe=G[le],ne=H[pe];J.writeString(pe),J.writeString(ne)}}var Ae=J.getOutCount(),fe=(4-Ae%4)%4,Fe=u.alloc(2);Fe.writeInt16BE(Math.floor((Ae+fe)/4));var je=u.alloc(fe);je.fill(0),J.write(je);var _t=J.toBuffer(),Ct=u.alloc(4);Ct.writeInt32BE(10+this.outCount+_t.length);var zt=u.alloc(2);zt.writeInt16BE(O);var _e=u.alloc(2);_e.writeInt16BE(0);var q=u.alloc(4);q.writeInt32BE(this.getSeqId());var j=u.concat([Ct,zt,_e,q,Fe,_t]);this.outBuffers.unshift(j),this.outCount+=j.length}}},3590:(c,d,f)=>{var u=f(9539);c.exports=o;function o(g){Error.call(this),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.message=g}u.inherits(o,Error)},5197:(c,d,f)=>{var u=f(8764).Buffer,o=f(135),g=c.exports={},w=Math.pow(2,24),m=Math.pow(2,31),l=Math.pow(2,32),T=Math.pow(10,11);g.toDecimalString=function(b){var S=b.buffer,x=b.offset;if(!S[x]&&!(S[x+1]&224)||!~S[x]&&!~(S[x+1]&224))return b.toString();var B=S[x]&128;if(B){for(var F=!1,I=new u(8),A=7;A>=0;--A)I[A]=~S[x+A]+(F?0:1)&255,F|=S[x+A];S=I}var O=S[x+1]+(S[x]<<8),R=S[x+7]+(S[x+6]<<8)+(S[x+5]<<16)+S[x+4]*w+(S[x+3]+(S[x+2]<<8))*l+O*74976710656,D=Math.floor(R/T)+O*2814;return R=("00000000000"+String(R%T)).slice(-11),(B?"-":"")+String(D)+R},g.fromDecimalString=function(b){var S=b.charAt(0)==="-";if(b.length<(S?17:16))return new o(+b);if(b.length>(S?20:19))throw new RangeError("Too many digits for Int64: "+b);var x=+b.slice(S?1:0,-15),B=+b.slice(-15)+x*2764472320,F=Math.floor(B/l)+x*232830;if(B=B%l,F>=m&&!(S&&F==m&&B==0))throw new RangeError("The magnitude is too large for Int64.");return S&&(F=~F,B===0?F=F+1&4294967295:B=~B+1,F=2147483648|F),new o(F,B)}},6502:(c,d,f)=>{var u=f(135);f(5197),c.exports=function(){var o,g,w={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},m,l=function(O){throw new SyntaxError(O)},T=function(O){return O&&O!==g&&l("Expected '"+O+"' instead of '"+g+"'"),g=m.charAt(o),o+=1,g},b=function(){var O,R="";for(g==="-"&&(R="-",T("-"));g>="0"&&g<="9";)R+=g,T();if(g===".")for(R+=".";T()&&g>="0"&&g<="9";)R+=g;if(g==="e"||g==="E")for(R+=g,T(),(g==="-"||g==="+")&&(R+=g,T());g>="0"&&g<="9";)R+=g,T();if(O=+R,!isFinite(O))l("Bad number");else return O>=u.MAX_INT||O<=u.MIN_INT?R:O},S=function(){var O,R,D="",P;if(g==='"')for(;T();){if(g==='"')return T(),D;if(g==="\\")if(T(),g==="u"){for(P=0,R=0;R<4&&(O=parseInt(T(),16),!!isFinite(O));R+=1)P=P*16+O;D+=String.fromCharCode(P)}else if(typeof w[g]=="string")D+=w[g];else break;else D+=g}l("Bad string")},x=function(){for(;g&&g<=" ";)T()},B=function(){switch(g){case"t":return T("t"),T("r"),T("u"),T("e"),!0;case"f":return T("f"),T("a"),T("l"),T("s"),T("e"),!1;case"n":return T("n"),T("u"),T("l"),T("l"),null}l("Unexpected '"+g+"'")},F,I=function(){var O=[];if(g==="["){if(T("["),x(),g==="]")return T("]"),O;for(;g;){if(O.push(F()),x(),g==="]")return T("]"),O;T(","),x()}}l("Bad array")},A=function(){var O,R={};if(g==="{"){if(T("{"),x(),g==="}")return T("}"),R;for(;g;){if(O=S(),x(),T(":"),Object.hasOwnProperty.call(R,O)&&l('Duplicate key "'+O+'"'),R[O]=F(),x(),g==="}")return T("}"),R;T(","),x()}}l("Bad object")};return F=function(){switch(x(),g){case"{":return A();case"[":return I();case'"':return S();case"-":return b();default:return g>="0"&&g<="9"?b():B()}},function(O){var R;return m=O,o=0,g=" ",R=F(),x(),g&&l("Syntax error"),R}}()},5086:(c,d,f)=>{var u=f(8764).Buffer,o=f(135),g=f(5406),w=g.Type;f(9539);var m=f(5197),l=f(6502),T=f(3590);c.exports=b;function b(S){this.tstack=[],this.tpos=[],this.trans=S}b.Type={},b.Type[w.BOOL]='"tf"',b.Type[w.BYTE]='"i8"',b.Type[w.I16]='"i16"',b.Type[w.I32]='"i32"',b.Type[w.I64]='"i64"',b.Type[w.DOUBLE]='"dbl"',b.Type[w.STRUCT]='"rec"',b.Type[w.STRING]='"str"',b.Type[w.MAP]='"map"',b.Type[w.LIST]='"lst"',b.Type[w.SET]='"set"',b.RType={},b.RType.tf=w.BOOL,b.RType.i8=w.BYTE,b.RType.i16=w.I16,b.RType.i32=w.I32,b.RType.i64=w.I64,b.RType.dbl=w.DOUBLE,b.RType.rec=w.STRUCT,b.RType.str=w.STRING,b.RType.map=w.MAP,b.RType.lst=w.LIST,b.RType.set=w.SET,b.Version=1,b.prototype.flush=function(){return this.writeToTransportIfStackIsFlushable(),this.trans.flush()},b.prototype.writeToTransportIfStackIsFlushable=function(){this.tstack.length===1&&this.trans.write(this.tstack.pop())},b.prototype.writeMessageBegin=function(S,x,B){this.tstack.push([b.Version,'"'+S+'"',x,B])},b.prototype.writeMessageEnd=function(){var S=this.tstack.pop();this.wobj=this.tstack.pop(),this.wobj.push(S),this.wbuf="["+this.wobj.join(",")+"]",this.trans.write(this.wbuf)},b.prototype.writeStructBegin=function(S){this.tpos.push(this.tstack.length),this.tstack.push({})},b.prototype.writeStructEnd=function(){var S=this.tpos.pop(),x=this.tstack[S],B="{",F=!0;for(var I in x)F?F=!1:B+=",",B+=I+":"+x[I];B+="}",this.tstack[S]=B,this.writeToTransportIfStackIsFlushable()},b.prototype.writeFieldBegin=function(S,x,B){this.tpos.push(this.tstack.length),this.tstack.push({fieldId:'"'+B+'"',fieldType:b.Type[x]})},b.prototype.writeFieldEnd=function(){var S=this.tstack.pop(),x=this.tstack.pop();":"+S==":[object Object]"?this.tstack[this.tstack.length-1][x.fieldId]="{"+x.fieldType+":"+JSON.stringify(S)+"}":this.tstack[this.tstack.length-1][x.fieldId]="{"+x.fieldType+":"+S+"}",this.tpos.pop(),this.writeToTransportIfStackIsFlushable()},b.prototype.writeFieldStop=function(){},b.prototype.writeMapBegin=function(S,x,B){this.tpos.push(this.tstack.length),this.tstack.push([b.Type[S],b.Type[x],0])},b.prototype.writeMapEnd=function(){var S=this.tpos.pop();if(S!=this.tstack.length){(this.tstack.length-S-1)%2!==0&&this.tstack.push("");var x=(this.tstack.length-S-1)/2;this.tstack[S][this.tstack[S].length-1]=x;for(var B="}",F=!0;this.tstack.length>S+1;){var I=this.tstack.pop(),A=this.tstack.pop();F?F=!1:B=","+B,isNaN(A)||(A='"'+A+'"'),B=A+":"+I+B}B="{"+B,this.tstack[S].push(B),this.tstack[S]="["+this.tstack[S].join(",")+"]",this.writeToTransportIfStackIsFlushable()}},b.prototype.writeListBegin=function(S,x){this.tpos.push(this.tstack.length),this.tstack.push([b.Type[S],x])},b.prototype.writeListEnd=function(){for(var S=this.tpos.pop();this.tstack.length>S+1;){var x=this.tstack[S+1];this.tstack.splice(S+1,1),this.tstack[S].push(x)}this.tstack[S]="["+this.tstack[S].join(",")+"]",this.writeToTransportIfStackIsFlushable()},b.prototype.writeSetBegin=function(S,x){this.tpos.push(this.tstack.length),this.tstack.push([b.Type[S],x])},b.prototype.writeSetEnd=function(){for(var S=this.tpos.pop();this.tstack.length>S+1;){var x=this.tstack[S+1];this.tstack.splice(S+1,1),this.tstack[S].push(x)}this.tstack[S]="["+this.tstack[S].join(",")+"]",this.writeToTransportIfStackIsFlushable()},b.prototype.writeBool=function(S){this.tstack.push(S?1:0)},b.prototype.writeByte=function(S){this.tstack.push(S)},b.prototype.writeI16=function(S){this.tstack.push(S)},b.prototype.writeI32=function(S){this.tstack.push(S)},b.prototype.writeI64=function(S){S instanceof o?this.tstack.push(m.toDecimalString(S)):this.tstack.push(S)},b.prototype.writeDouble=function(S){this.tstack.push(S)},b.prototype.writeString=function(S){if(S===null)this.tstack.push(null);else{if(typeof S=="string")var x=S;else if(S instanceof u)var x=S.toString("utf8");else throw new Error("writeString called without a string/Buffer argument: "+S);for(var B="",F=0;F<x.length;F++){var I=x.charAt(F);I==='"'?B+='\\"':I==="\\"?B+="\\\\":I==="\b"?B+="\\b":I==="\f"?B+="\\f":I===`
`?B+="\\n":I==="\r"?B+="\\r":I==="	"?B+="\\t":B+=I}this.tstack.push('"'+B+'"')}},b.prototype.writeBinary=function(S){if(typeof S=="string")var x=new u(S,"binary");else if(S instanceof u||Object.prototype.toString.call(S)=="[object Uint8Array]")var x=S;else throw new Error("writeBinary called without a string/Buffer argument: "+S);this.tstack.push('"'+x.toString("base64")+'"')},b.prototype.readMessageBegin=function(){this.rstack=[],this.rpos=[];var S=this.trans.borrow();if(S.readIndex>=S.writeIndex)throw new T;var x=S.readIndex;if(S.buf[x]!==91)throw new Error("Malformed JSON input, no opening bracket");x++;for(var B=1,F=!1;x<S.writeIndex;x++){var I=S.buf[x];if(F)I===34?F=!1:I===92&&(x+=1);else if(I===91)B+=1;else if(I===93){if(B-=1,B===0)break}else I===34&&(F=!0)}if(B!==0)throw new T;this.robj=l(S.buf.slice(S.readIndex,x+1).toString()),this.trans.consume(x+1-S.readIndex);var A=this.robj.shift();if(A!=b.Version)throw new Error("Wrong thrift protocol version: "+A);var O={};return O.fname=this.robj.shift(),O.mtype=this.robj.shift(),O.rseqid=this.robj.shift(),this.rstack.push(this.robj.shift()),O},b.prototype.readMessageEnd=function(){},b.prototype.readStructBegin=function(){var S={};return S.fname="",this.rstack[this.rstack.length-1]instanceof Array&&this.rstack.push(this.rstack[this.rstack.length-1].shift()),S},b.prototype.readStructEnd=function(){this.rstack.pop()},b.prototype.readFieldBegin=function(){var S={},x=-1,B=w.STOP;for(var F in this.rstack[this.rstack.length-1])if(F!==null){x=parseInt(F,10),this.rpos.push(this.rstack.length);var I=this.rstack[this.rstack.length-1][x];delete this.rstack[this.rstack.length-1][x],this.rstack.push(I);break}if(x!=-1)for(var A in this.rstack[this.rstack.length-1])b.RType[A]!==null&&(B=b.RType[A],this.rstack[this.rstack.length-1]=this.rstack[this.rstack.length-1][A]);return S.fname="",S.ftype=B,S.fid=x,S},b.prototype.readFieldEnd=function(){for(var S=this.rpos.pop();this.rstack.length>S;)this.rstack.pop()},b.prototype.readMapBegin=function(){var S=this.rstack.pop(),x=S.shift();x instanceof Array&&(this.rstack.push(S),S=x,x=S.shift());var B={};return B.ktype=b.RType[x],B.vtype=b.RType[S.shift()],B.size=S.shift(),this.rpos.push(this.rstack.length),this.rstack.push(S.shift()),B},b.prototype.readMapEnd=function(){this.readFieldEnd()},b.prototype.readListBegin=function(){var S=this.rstack[this.rstack.length-1],x={};return x.etype=b.RType[S.shift()],x.size=S.shift(),this.rpos.push(this.rstack.length),this.rstack.push(S.shift()),x},b.prototype.readListEnd=function(){var S=this.rpos.pop()-2,x=this.rstack;x.pop(),x instanceof Array&&x.length>S&&x[S].length>0&&x.push(x[S].shift())},b.prototype.readSetBegin=function(){return this.readListBegin()},b.prototype.readSetEnd=function(){return this.readListEnd()},b.prototype.readBool=function(){return this.readValue()=="1"},b.prototype.readByte=function(){return this.readI32()},b.prototype.readI16=function(){return this.readI32()},b.prototype.readI32=function(S){return+this.readValue()},b.prototype.readValue=function(S){S===void 0&&(S=this.rstack[this.rstack.length-1]);var x={};if(S instanceof Array)S.length===0?x.value=void 0:x.value=S.shift();else if(!(S instanceof o)&&S instanceof Object){for(var B in S)if(B!==null){this.rstack.push(S[B]),delete S[B],x.value=B;break}}else x.value=S,this.rstack.pop();return x.value},b.prototype.readI64=function(){var S=this.readValue();return typeof S=="string"?m.fromDecimalString(S):new o(S)},b.prototype.readDouble=function(){return this.readI32()},b.prototype.readBinary=function(){return new u(this.readValue(),"base64")},b.prototype.readString=function(){return this.readValue()},b.prototype.getTransport=function(){return this.trans},b.prototype.skip=function(S){switch(S){case w.BOOL:this.readBool();break;case w.BYTE:this.readByte();break;case w.I16:this.readI16();break;case w.I32:this.readI32();break;case w.I64:this.readI64();break;case w.DOUBLE:this.readDouble();break;case w.STRING:this.readString();break;case w.STRUCT:for(this.readStructBegin();;){var x=this.readFieldBegin();if(x.ftype===w.STOP)break;this.skip(x.ftype),this.readFieldEnd()}this.readStructEnd();break;case w.MAP:for(var B=this.readMapBegin(),F=0;F<B.size;++F)this.skip(B.ktype),this.skip(B.vtype);this.readMapEnd();break;case w.SET:for(var I=this.readSetBegin(),A=0;A<I.size;++A)this.skip(I.etype);this.readSetEnd();break;case w.LIST:for(var O=this.readListBegin(),R=0;R<O.size;++R)this.skip(O.etype);this.readListEnd();break;default:throw new Error("Invalid type: "+S)}}},1291:(c,d,f)=>{var u=f(9539),o=function(){},g=console.log,w="error";function m(F){return function(){var I=["thrift: ["+F+"] "].concat(Array.from(arguments));return g(u.format.apply(null,I))}}var l=o,T=o,b=o,S=o,x=o;d.setLogFunc=function(F){g=F};var B=d.setLogLevel=function(F){switch(l=T=b=S=x=o,w=F,w){case"trace":l=m("TRACE");case"debug":T=m("DEBUG");case"error":b=m("ERROR");case"warning":S=m("WARN");case"info":x=m("INFO")}};B(w),d.getLogLevel=function(){return w},d.trace=function(){return l.apply(null,arguments)},d.debug=function(){return T.apply(null,arguments)},d.error=function(){return b.apply(null,arguments)},d.warning=function(){return S.apply(null,arguments)},d.info=function(){return x.apply(null,arguments)}},4184:(c,d,f)=>{var u=f(9539),o=f(5406);d.Multiplexer=w;function g(m,l,T){function b(S,x,B){l.call(this,S,x,B)}return u.inherits(b,l),b.prototype.writeMessageBegin=function(S,x,B){x==o.MessageType.CALL||x==o.MessageType.ONEWAY?(T.seqId2Service[B]=m,b.super_.prototype.writeMessageBegin.call(this,m+":"+S,x,B)):b.super_.prototype.writeMessageBegin.call(this,S,x,B)},b}function w(){this.seqid=0}w.prototype.createClient=function(m,l,T){l.Client&&(l=l.Client);var b=function(I,A){T.write(I,A)},S=new T.transport(void 0,b),x=new g(m,T.protocol,T),B=new l(S,x),F=this;return B.new_seqid=function(){return F.seqid+=1,F.seqid},typeof T.client!="object"&&(T.client={}),T.client[m]=B,B}},5406:(c,d,f)=>{var u=f(9539),o=d.Type={STOP:0,VOID:1,BOOL:2,BYTE:3,I08:3,DOUBLE:4,I16:6,I32:8,I64:10,STRING:11,UTF7:11,STRUCT:12,MAP:13,SET:14,LIST:15,UTF8:16,UTF16:17};d.MessageType={CALL:1,REPLY:2,EXCEPTION:3,ONEWAY:4},d.TException=g;function g(S){Error.call(this),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.message=S}u.inherits(g,Error);var w=d.TApplicationExceptionType={UNKNOWN:0,UNKNOWN_METHOD:1,INVALID_MESSAGE_TYPE:2,WRONG_METHOD_NAME:3,BAD_SEQUENCE_ID:4,MISSING_RESULT:5,INTERNAL_ERROR:6,PROTOCOL_ERROR:7,INVALID_TRANSFORM:8,INVALID_PROTOCOL:9,UNSUPPORTED_CLIENT_TYPE:10};d.TApplicationException=m;function m(S,x){g.call(this),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,this.constructor),this.type=S||w.UNKNOWN,this.name=this.constructor.name,this.message=x}u.inherits(m,g),m.prototype.read=function(S){for(var x=S.readStructBegin("TApplicationException");x=S.readFieldBegin(),x.ftype!=o.STOP;){switch(x.fid){case 1:x.ftype==o.STRING?(x=S.readString(),this.message=x):x=S.skip(x.ftype);break;case 2:x.ftype==o.I32?(x=S.readI32(),this.type=x):x=S.skip(x.ftype);break;default:x=S.skip(x.ftype);break}S.readFieldEnd()}S.readStructEnd()},m.prototype.write=function(S){S.writeStructBegin("TApplicationException"),this.message&&(S.writeFieldBegin("message",o.STRING,1),S.writeString(this.message),S.writeFieldEnd()),this.code&&(S.writeFieldBegin("type",o.I32,2),S.writeI32(this.code),S.writeFieldEnd()),S.writeFieldStop(),S.writeStructEnd()},d.TProtocolExceptionType={UNKNOWN:0,INVALID_DATA:1,NEGATIVE_SIZE:2,SIZE_LIMIT:3,BAD_VERSION:4,NOT_IMPLEMENTED:5,DEPTH_LIMIT:6},d.TProtocolException=l;function l(S,x){Error.call(this),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.type=S,this.message=x}u.inherits(l,Error),d.objectLength=function(S){return Object.keys(S).length},d.inherits=function(S,x){u.inherits(S,x)};var T,b;T=function(S,x){if(!S)return S;var B;x.shift===void 0?B=x:B=x[0];var F=B,I=S.length,A=[],O,R;for(O=0;O<I;O++)R=S[O],B===null?A.push(R):B===b||B===T?A.push(B(R,x.slice(1))):A.push(new F(R));return A},b=function(S,x){if(!S)return S;var B;x.shift===void 0?B=x:B=x[0];var F=B,I={},A;for(var O in S)S.hasOwnProperty(O)&&(A=S[O],B===null?I[O]=A:B===b||B===T?I[O]=B(A,x.slice(1)):I[O]=new F(A));return I},c.exports.copyMap=b,c.exports.copyList=T},5455:(c,d,f)=>{var u=f(8764).Buffer,o=f(9539),g=f(6792),w=f(7187).EventEmitter,m=f(5406),l=f(8869),T=f(5086),b=f(3590),S=f(6243),x=f(3818);d.WSConnection=B;function B(F,I,A){w.call(this),this.options=A||{},this.host=F,this.port=I,this.secure=this.options.secure||!1,this.transport=this.options.transport||l,this.protocol=this.options.protocol||T,this.path=this.options.path,this.send_pending=[],this.seqId2Service={},this.wsOptions={host:this.host,port:this.port||80,path:this.options.path||"/",headers:this.options.headers||{}};for(var O in this.options.wsOptions)this.wsOptions[O]=this.options.wsOptions[O]}o.inherits(B,w),B.prototype.__reset=function(){this.socket=null,this.send_pending=[]},B.prototype.__onOpen=function(){this.emit("open"),this.send_pending.length>0&&(this.send_pending.forEach(function(F){this.socket.send(F)},this),this.send_pending=[])},B.prototype.__onClose=function(F){this.emit("close"),this.__reset()},B.prototype.__decodeCallback=function(F){var I=new this.protocol(F);try{for(;;){var A=I.readMessageBegin(),O=A.rseqid*-1,R=this.client,D=this.seqId2Service[A.rseqid];D&&(R=this.client[D],delete this.seqId2Service[A.rseqid]),R._reqs[O]=function(P,U){F.commitPosition();var Y=R._reqs[A.rseqid];delete R._reqs[A.rseqid],Y&&Y(P,U)},R["recv_"+A.fname]?R["recv_"+A.fname](I,A.mtype,O):(delete R._reqs[O],this.emit("error",new m.TApplicationException(m.TApplicationExceptionType.WRONG_METHOD_NAME,"Received a response to an unknown RPC function")))}}catch(P){if(P instanceof b)F.rollbackPosition();else throw P}},B.prototype.__onData=function(F){Object.prototype.toString.call(F)==="[object ArrayBuffer]"&&(F=new Uint8Array(F));var I=new u(F);this.transport.receiver(this.__decodeCallback.bind(this))(I)},B.prototype.__onMessage=function(F){this.__onData(F.data)},B.prototype.__onError=function(F){this.emit("error",F),this.socket.close()},B.prototype.isOpen=function(){return this.socket&&this.socket.readyState===this.socket.OPEN},B.prototype.open=function(){this.socket&&this.socket.readyState!==this.socket.CLOSED||(x.isBrowser?this.socket=new g(this.uri()):this.socket=new g(this.uri(),"",this.wsOptions),this.socket.binaryType="arraybuffer",this.socket.onopen=this.__onOpen.bind(this),this.socket.onmessage=this.__onMessage.bind(this),this.socket.onerror=this.__onError.bind(this),this.socket.onclose=this.__onClose.bind(this))},B.prototype.close=function(){this.socket.close()},B.prototype.uri=function(){var F=this.secure?"wss":"ws",I="",A=this.path||"/",O=this.host;return this.port&&(F==="wss"&&this.port!==443||F==="ws"&&this.port!==80)&&(I=":"+this.port),F+"://"+O+I+A},B.prototype.write=function(F){this.isOpen()?this.socket.send(F):this.send_pending.push(F)},d.createWSConnection=function(F,I,A){return new B(F,I,A)},d.createWSClient=S},5764:(c,d,f)=>{var u=f(1291);c.exports=o;function o(g){this.__reset(g)}o.prototype.__reset=function(g){this.url=g,this.socket=null,this.callbacks=[],this.send_pending=[],this.send_buf="",this.recv_buf="",this.rb_wpos=0,this.rb_rpos=0},o.prototype.flush=function(g,w){var m=this;this.isOpen()?(this.socket.send(this.send_buf),this.callbacks.push(function(){var l=w;return function(T){m.setRecvBuffer(T),l()}}())):this.send_pending.push({buf:this.send_buf,cb:w})},o.prototype.__onOpen=function(){var g=this;this.send_pending.length>0&&(this.send_pending.forEach(function(w){g.socket.send(w.buf),g.callbacks.push(function(){var m=w.cb;return function(l){g.setRecvBuffer(l),m()}}())}),this.send_pending=[])},o.prototype.__onClose=function(g){this.__reset(this.url)},o.prototype.__onMessage=function(g){this.callbacks.length&&this.callbacks.shift()(g.data)},o.prototype.__onError=function(g){u.error("websocket: "+g.toString()),this.socket.close()},o.prototype.setRecvBuffer=function(g){this.recv_buf=g,this.recv_buf_sz=this.recv_buf.length,this.wpos=this.recv_buf.length,this.rpos=0},o.prototype.isOpen=function(){return this.socket&&this.socket.readyState==this.socket.OPEN},o.prototype.open=function(){this.socket&&this.socket.readyState!=this.socket.CLOSED||(this.socket=new WebSocket(this.url),this.socket.onopen=this.__onOpen.bind(this),this.socket.onmessage=this.__onMessage.bind(this),this.socket.onerror=this.__onError.bind(this),this.socket.onclose=this.__onClose.bind(this))},o.prototype.close=function(){this.socket.close()},o.prototype.read=function(g){var w=this.wpos-this.rpos;if(w===0)return"";var m=g;w<g&&(m=w);var l=this.read_buf.substr(this.rpos,m);return this.rpos+=m,l},o.prototype.readAll=function(){return this.recv_buf},o.prototype.write=function(g){this.send_buf=g},o.prototype.getSendBuffer=function(){return this.send_buf}},4050:(c,d,f)=>{var u=f(8764).Buffer,o=f(9539),g=f(7187).EventEmitter,w=f(5406),m=f(8869),l=f(5086),T=f(3590),b=f(6243);d.XHRConnection=S;function S(x,B,F){this.options=F||{},this.wpos=0,this.rpos=0,this.useCORS=F&&F.useCORS,this.send_buf="",this.recv_buf="",this.transport=F.transport||m,this.protocol=F.protocol||l,this.headers=F.headers||{},x=x||window.location.host,B=B||window.location.port;var I=F.https?"https://":"http://",A=F.path||"/";B===""&&(B=void 0),!B||B===80||B==="80"?this.url=I+x+A:this.url=I+x+":"+B+A,this.seqId2Service={}}o.inherits(S,g),S.prototype.getXmlHttpRequestObject=function(){try{return new XMLHttpRequest}catch{}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch{}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch{}throw"Your browser doesn't support XHR."},S.prototype.flush=function(){var x=this;if(this.url===void 0||this.url==="")return this.send_buf;var B=this.getXmlHttpRequestObject();B.overrideMimeType&&B.overrideMimeType("application/json"),B.onreadystatechange=function(){this.readyState==4&&this.status==200&&x.setRecvBuffer(this.responseText)},B.open("POST",this.url,!0),Object.keys(this.headers).forEach(function(F){B.setRequestHeader(F,x.headers[F])}),B.send(this.send_buf)},S.prototype.setRecvBuffer=function(x){if(this.recv_buf=x,this.recv_buf_sz=this.recv_buf.length,this.wpos=this.recv_buf.length,this.rpos=0,Object.prototype.toString.call(x)=="[object ArrayBuffer]")var B=new Uint8Array(x);var F=new u(B||x);this.transport.receiver(this.__decodeCallback.bind(this))(F)},S.prototype.__decodeCallback=function(x){var B=new this.protocol(x);try{for(;;){var F=B.readMessageBegin(),I=F.rseqid*-1,A=this.client,O=this.seqId2Service[F.rseqid];O&&(A=this.client[O],delete this.seqId2Service[F.rseqid]),A._reqs[I]=function(R,D){x.commitPosition();var P=A._reqs[F.rseqid];delete A._reqs[F.rseqid],P&&P(R,D)},A["recv_"+F.fname]?A["recv_"+F.fname](B,F.mtype,I):(delete A._reqs[I],this.emit("error",new w.TApplicationException(w.TApplicationExceptionType.WRONG_METHOD_NAME,"Received a response to an unknown RPC function")))}}catch(R){if(R instanceof T)x.rollbackPosition();else throw R}},S.prototype.isOpen=function(){return!0},S.prototype.open=function(){},S.prototype.close=function(){},S.prototype.read=function(x){var B=this.wpos-this.rpos;if(B===0)return"";var F=x;B<x&&(F=B);var I=this.read_buf.substr(this.rpos,F);return this.rpos+=F,I},S.prototype.readAll=function(){return this.recv_buf},S.prototype.write=function(x){this.send_buf=x,this.flush()},S.prototype.getSendBuffer=function(){return this.send_buf},d.createXHRConnection=function(x,B,F){return new S(x,B,F)},d.createXHRClient=b},384:c=>{c.exports=function(f){return f&&typeof f=="object"&&typeof f.copy=="function"&&typeof f.fill=="function"&&typeof f.readUInt8=="function"}},5955:(c,d,f)=>{var u=f(2584),o=f(8662),g=f(6430),w=f(5692);function m(he){return he.call.bind(he)}var l=typeof BigInt<"u",T=typeof Symbol<"u",b=m(Object.prototype.toString),S=m(Number.prototype.valueOf),x=m(String.prototype.valueOf),B=m(Boolean.prototype.valueOf);if(l)var F=m(BigInt.prototype.valueOf);if(T)var I=m(Symbol.prototype.valueOf);function A(he,as){if(typeof he!="object")return!1;try{return as(he),!0}catch{return!1}}d.isArgumentsObject=u,d.isGeneratorFunction=o,d.isTypedArray=w;function O(he){return typeof Promise<"u"&&he instanceof Promise||he!==null&&typeof he=="object"&&typeof he.then=="function"&&typeof he.catch=="function"}d.isPromise=O;function R(he){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(he):w(he)||j(he)}d.isArrayBufferView=R;function D(he){return g(he)==="Uint8Array"}d.isUint8Array=D;function P(he){return g(he)==="Uint8ClampedArray"}d.isUint8ClampedArray=P;function U(he){return g(he)==="Uint16Array"}d.isUint16Array=U;function Y(he){return g(he)==="Uint32Array"}d.isUint32Array=Y;function z(he){return g(he)==="Int8Array"}d.isInt8Array=z;function W(he){return g(he)==="Int16Array"}d.isInt16Array=W;function V(he){return g(he)==="Int32Array"}d.isInt32Array=V;function H(he){return g(he)==="Float32Array"}d.isFloat32Array=H;function J(he){return g(he)==="Float64Array"}d.isFloat64Array=J;function G(he){return g(he)==="BigInt64Array"}d.isBigInt64Array=G;function le(he){return g(he)==="BigUint64Array"}d.isBigUint64Array=le;function pe(he){return b(he)==="[object Map]"}pe.working=typeof Map<"u"&&pe(new Map);function ne(he){return typeof Map>"u"?!1:pe.working?pe(he):he instanceof Map}d.isMap=ne;function Ae(he){return b(he)==="[object Set]"}Ae.working=typeof Set<"u"&&Ae(new Set);function fe(he){return typeof Set>"u"?!1:Ae.working?Ae(he):he instanceof Set}d.isSet=fe;function Fe(he){return b(he)==="[object WeakMap]"}Fe.working=typeof WeakMap<"u"&&Fe(new WeakMap);function je(he){return typeof WeakMap>"u"?!1:Fe.working?Fe(he):he instanceof WeakMap}d.isWeakMap=je;function _t(he){return b(he)==="[object WeakSet]"}_t.working=typeof WeakSet<"u"&&_t(new WeakSet);function Ct(he){return _t(he)}d.isWeakSet=Ct;function zt(he){return b(he)==="[object ArrayBuffer]"}zt.working=typeof ArrayBuffer<"u"&&zt(new ArrayBuffer);function _e(he){return typeof ArrayBuffer>"u"?!1:zt.working?zt(he):he instanceof ArrayBuffer}d.isArrayBuffer=_e;function q(he){return b(he)==="[object DataView]"}q.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&q(new DataView(new ArrayBuffer(1),0,1));function j(he){return typeof DataView>"u"?!1:q.working?q(he):he instanceof DataView}d.isDataView=j;function L(he){return b(he)==="[object SharedArrayBuffer]"}L.working=typeof SharedArrayBuffer<"u"&&L(new SharedArrayBuffer);function K(he){return typeof SharedArrayBuffer>"u"?!1:L.working?L(he):he instanceof SharedArrayBuffer}d.isSharedArrayBuffer=K;function Z(he){return b(he)==="[object AsyncFunction]"}d.isAsyncFunction=Z;function oe(he){return b(he)==="[object Map Iterator]"}d.isMapIterator=oe;function re(he){return b(he)==="[object Set Iterator]"}d.isSetIterator=re;function ge(he){return b(he)==="[object Generator]"}d.isGeneratorObject=ge;function Se(he){return b(he)==="[object WebAssembly.Module]"}d.isWebAssemblyCompiledModule=Se;function He(he){return A(he,S)}d.isNumberObject=He;function pi(he){return A(he,x)}d.isStringObject=pi;function Bi(he){return A(he,B)}d.isBooleanObject=Bi;function Qt(he){return l&&A(he,F)}d.isBigIntObject=Qt;function $s(he){return T&&A(he,I)}d.isSymbolObject=$s;function lr(he){return He(he)||pi(he)||Bi(he)||Qt(he)||$s(he)}d.isBoxedPrimitive=lr;function cr(he){return typeof Uint8Array<"u"&&(_e(he)||K(he))}d.isAnyArrayBuffer=cr,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(he){Object.defineProperty(d,he,{enumerable:!1,value:function(){throw new Error(he+" is not supported in userland")}})})},9539:(c,d,f)=>{var u=Object.getOwnPropertyDescriptors||function(j){for(var L=Object.keys(j),K={},Z=0;Z<L.length;Z++)K[L[Z]]=Object.getOwnPropertyDescriptor(j,L[Z]);return K},o=/%[sdj%]/g;d.format=function(q){if(!z(q)){for(var j=[],L=0;L<arguments.length;L++)j.push(l(arguments[L]));return j.join(" ")}for(var L=1,K=arguments,Z=K.length,oe=String(q).replace(o,function(ge){if(ge==="%%")return"%";if(L>=Z)return ge;switch(ge){case"%s":return String(K[L++]);case"%d":return Number(K[L++]);case"%j":try{return JSON.stringify(K[L++])}catch{return"[Circular]"}default:return ge}}),re=K[L];L<Z;re=K[++L])P(re)||!J(re)?oe+=" "+re:oe+=" "+l(re);return oe},d.deprecate=function(q,j){if(typeof process<"u"&&process.noDeprecation===!0)return q;if(typeof process>"u")return function(){return d.deprecate(q,j).apply(this,arguments)};var L=!1;function K(){if(!L){if(process.throwDeprecation)throw new Error(j);process.traceDeprecation?console.trace(j):console.error(j),L=!0}return q.apply(this,arguments)}return K};var g={},w=/^$/;if({BROWSER:!0}.NODE_DEBUG){var m={BROWSER:!0}.NODE_DEBUG;m=m.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),w=new RegExp("^"+m+"$","i")}d.debuglog=function(q){if(q=q.toUpperCase(),!g[q])if(w.test(q)){var j=process.pid;g[q]=function(){var L=d.format.apply(d,arguments);console.error("%s %d: %s",q,j,L)}}else g[q]=function(){};return g[q]};function l(q,j){var L={seen:[],stylize:b};return arguments.length>=3&&(L.depth=arguments[2]),arguments.length>=4&&(L.colors=arguments[3]),D(j)?L.showHidden=j:j&&d._extend(L,j),V(L.showHidden)&&(L.showHidden=!1),V(L.depth)&&(L.depth=2),V(L.colors)&&(L.colors=!1),V(L.customInspect)&&(L.customInspect=!0),L.colors&&(L.stylize=T),x(L,q,L.depth)}d.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function T(q,j){var L=l.styles[j];return L?"\x1B["+l.colors[L][0]+"m"+q+"\x1B["+l.colors[L][1]+"m":q}function b(q,j){return q}function S(q){var j={};return q.forEach(function(L,K){j[L]=!0}),j}function x(q,j,L){if(q.customInspect&&j&&pe(j.inspect)&&j.inspect!==d.inspect&&!(j.constructor&&j.constructor.prototype===j)){var K=j.inspect(L,q);return z(K)||(K=x(q,K,L)),K}var Z=B(q,j);if(Z)return Z;var oe=Object.keys(j),re=S(oe);if(q.showHidden&&(oe=Object.getOwnPropertyNames(j)),le(j)&&(oe.indexOf("message")>=0||oe.indexOf("description")>=0))return F(j);if(oe.length===0){if(pe(j)){var ge=j.name?": "+j.name:"";return q.stylize("[Function"+ge+"]","special")}if(H(j))return q.stylize(RegExp.prototype.toString.call(j),"regexp");if(G(j))return q.stylize(Date.prototype.toString.call(j),"date");if(le(j))return F(j)}var Se="",He=!1,pi=["{","}"];if(R(j)&&(He=!0,pi=["[","]"]),pe(j)){var Bi=j.name?": "+j.name:"";Se=" [Function"+Bi+"]"}if(H(j)&&(Se=" "+RegExp.prototype.toString.call(j)),G(j)&&(Se=" "+Date.prototype.toUTCString.call(j)),le(j)&&(Se=" "+F(j)),oe.length===0&&(!He||j.length==0))return pi[0]+Se+pi[1];if(L<0)return H(j)?q.stylize(RegExp.prototype.toString.call(j),"regexp"):q.stylize("[Object]","special");q.seen.push(j);var Qt;return He?Qt=I(q,j,L,re,oe):Qt=oe.map(function($s){return A(q,j,L,re,$s,He)}),q.seen.pop(),O(Qt,Se,pi)}function B(q,j){if(V(j))return q.stylize("undefined","undefined");if(z(j)){var L="'"+JSON.stringify(j).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return q.stylize(L,"string")}if(Y(j))return q.stylize(""+j,"number");if(D(j))return q.stylize(""+j,"boolean");if(P(j))return q.stylize("null","null")}function F(q){return"["+Error.prototype.toString.call(q)+"]"}function I(q,j,L,K,Z){for(var oe=[],re=0,ge=j.length;re<ge;++re)_t(j,String(re))?oe.push(A(q,j,L,K,String(re),!0)):oe.push("");return Z.forEach(function(Se){Se.match(/^\d+$/)||oe.push(A(q,j,L,K,Se,!0))}),oe}function A(q,j,L,K,Z,oe){var re,ge,Se;if(Se=Object.getOwnPropertyDescriptor(j,Z)||{value:j[Z]},Se.get?Se.set?ge=q.stylize("[Getter/Setter]","special"):ge=q.stylize("[Getter]","special"):Se.set&&(ge=q.stylize("[Setter]","special")),_t(K,Z)||(re="["+Z+"]"),ge||(q.seen.indexOf(Se.value)<0?(P(L)?ge=x(q,Se.value,null):ge=x(q,Se.value,L-1),ge.indexOf(`
`)>-1&&(oe?ge=ge.split(`
`).map(function(He){return"  "+He}).join(`
`).substr(2):ge=`
`+ge.split(`
`).map(function(He){return"   "+He}).join(`
`))):ge=q.stylize("[Circular]","special")),V(re)){if(oe&&Z.match(/^\d+$/))return ge;re=JSON.stringify(""+Z),re.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(re=re.substr(1,re.length-2),re=q.stylize(re,"name")):(re=re.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),re=q.stylize(re,"string"))}return re+": "+ge}function O(q,j,L){var K=q.reduce(function(Z,oe){return oe.indexOf(`
`)>=0,Z+oe.replace(/\u001b\[\d\d?m/g,"").length+1},0);return K>60?L[0]+(j===""?"":j+`
 `)+" "+q.join(`,
  `)+" "+L[1]:L[0]+j+" "+q.join(", ")+" "+L[1]}d.types=f(5955);function R(q){return Array.isArray(q)}d.isArray=R;function D(q){return typeof q=="boolean"}d.isBoolean=D;function P(q){return q===null}d.isNull=P;function U(q){return q==null}d.isNullOrUndefined=U;function Y(q){return typeof q=="number"}d.isNumber=Y;function z(q){return typeof q=="string"}d.isString=z;function W(q){return typeof q=="symbol"}d.isSymbol=W;function V(q){return q===void 0}d.isUndefined=V;function H(q){return J(q)&&Ae(q)==="[object RegExp]"}d.isRegExp=H,d.types.isRegExp=H;function J(q){return typeof q=="object"&&q!==null}d.isObject=J;function G(q){return J(q)&&Ae(q)==="[object Date]"}d.isDate=G,d.types.isDate=G;function le(q){return J(q)&&(Ae(q)==="[object Error]"||q instanceof Error)}d.isError=le,d.types.isNativeError=le;function pe(q){return typeof q=="function"}d.isFunction=pe;function ne(q){return q===null||typeof q=="boolean"||typeof q=="number"||typeof q=="string"||typeof q=="symbol"||typeof q>"u"}d.isPrimitive=ne,d.isBuffer=f(384);function Ae(q){return Object.prototype.toString.call(q)}function fe(q){return q<10?"0"+q.toString(10):q.toString(10)}var Fe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function je(){var q=new Date,j=[fe(q.getHours()),fe(q.getMinutes()),fe(q.getSeconds())].join(":");return[q.getDate(),Fe[q.getMonth()],j].join(" ")}d.log=function(){console.log("%s - %s",je(),d.format.apply(d,arguments))},d.inherits=f(5717),d._extend=function(q,j){if(!j||!J(j))return q;for(var L=Object.keys(j),K=L.length;K--;)q[L[K]]=j[L[K]];return q};function _t(q,j){return Object.prototype.hasOwnProperty.call(q,j)}var Ct=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;d.promisify=function(j){if(typeof j!="function")throw new TypeError('The "original" argument must be of type Function');if(Ct&&j[Ct]){var L=j[Ct];if(typeof L!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(L,Ct,{value:L,enumerable:!1,writable:!1,configurable:!0}),L}function L(){for(var K,Z,oe=new Promise(function(Se,He){K=Se,Z=He}),re=[],ge=0;ge<arguments.length;ge++)re.push(arguments[ge]);re.push(function(Se,He){Se?Z(Se):K(He)});try{j.apply(this,re)}catch(Se){Z(Se)}return oe}return Object.setPrototypeOf(L,Object.getPrototypeOf(j)),Ct&&Object.defineProperty(L,Ct,{value:L,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(L,u(j))},d.promisify.custom=Ct;function zt(q,j){if(!q){var L=new Error("Promise was rejected with a falsy value");L.reason=q,q=L}return j(q)}function _e(q){if(typeof q!="function")throw new TypeError('The "original" argument must be of type Function');function j(){for(var L=[],K=0;K<arguments.length;K++)L.push(arguments[K]);var Z=L.pop();if(typeof Z!="function")throw new TypeError("The last argument must be of type Function");var oe=this,re=function(){return Z.apply(oe,arguments)};q.apply(this,L).then(function(ge){process.nextTick(re.bind(null,null,ge))},function(ge){process.nextTick(zt.bind(null,ge,re))})}return Object.setPrototypeOf(j,Object.getPrototypeOf(q)),Object.defineProperties(j,u(q)),j}d.callbackify=_e},6430:(c,d,f)=>{var u=f(9804),o=f(6314),g=f(8914),w=g("Object.prototype.toString"),m=f(1405)(),l=m&&typeof Symbol.toStringTag=="symbol",T=o(),b=g("String.prototype.slice"),S={},x=f(4079),B=Object.getPrototypeOf;l&&x&&B&&u(T,function(A){if(typeof f.g[A]=="function"){var O=new f.g[A];if(!(Symbol.toStringTag in O))throw new EvalError("this engine has support for Symbol.toStringTag, but "+A+" does not have the property! Please report this.");var R=B(O),D=x(R,Symbol.toStringTag);if(!D){var P=B(R);D=x(P,Symbol.toStringTag)}S[A]=D.get}});var F=function(O){var R=!1;return u(S,function(D,P){if(!R)try{var U=D.call(O);U===P&&(R=U)}catch{}}),R},I=f(5692);c.exports=function(O){return I(O)?l?F(O):b(w(O),8,-1):!1}},4221:(c,d,f)=>{const o=f(9262).Thrift;f(135),f(2818);const g=f(4494),w=f(3962),m=f(1396),l=f(2607),T=class{constructor(r){this.user=null,this.passwd=null,this.dbname=null,r&&(r.user!==void 0&&r.user!==null&&(this.user=r.user),r.passwd!==void 0&&r.passwd!==null&&(this.passwd=r.passwd),r.dbname!==void 0&&r.dbname!==null&&(this.dbname=r.dbname))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.user=r.readString():r.skip(p);break;case 2:p==o.Type.STRING?this.passwd=r.readString():r.skip(p);break;case 3:p==o.Type.STRING?this.dbname=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_connect_args"),this.user!==null&&this.user!==void 0&&(r.writeFieldBegin("user",o.Type.STRING,1),r.writeString(this.user),r.writeFieldEnd()),this.passwd!==null&&this.passwd!==void 0&&(r.writeFieldBegin("passwd",o.Type.STRING,2),r.writeString(this.passwd),r.writeFieldEnd()),this.dbname!==null&&this.dbname!==void 0&&(r.writeFieldBegin("dbname",o.Type.STRING,3),r.writeString(this.dbname),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},b=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=r.success),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:p==o.Type.STRING?this.success=r.readString():r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_connect_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",o.Type.STRING,0),r.writeString(this.success),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},S=class{constructor(r){this.inputToken=null,this.dbname=null,r&&(r.inputToken!==void 0&&r.inputToken!==null&&(this.inputToken=r.inputToken),r.dbname!==void 0&&r.dbname!==null&&(this.dbname=r.dbname))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.inputToken=r.readString():r.skip(p);break;case 2:p==o.Type.STRING?this.dbname=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_krb5_connect_args"),this.inputToken!==null&&this.inputToken!==void 0&&(r.writeFieldBegin("inputToken",o.Type.STRING,1),r.writeString(this.inputToken),r.writeFieldEnd()),this.dbname!==null&&this.dbname!==void 0&&(r.writeFieldBegin("dbname",o.Type.STRING,2),r.writeString(this.dbname),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},x=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TKrb5Session(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:p==o.Type.STRUCT?(this.success=new l.TKrb5Session,this.success.read(r)):r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_krb5_connect_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",o.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},B=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_disconnect_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},F=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_disconnect_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},I=class{constructor(r){this.session=null,this.dbname=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.dbname!==void 0&&r.dbname!==null&&(this.dbname=r.dbname))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.STRING?this.dbname=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_switch_database_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.dbname!==null&&this.dbname!==void 0&&(r.writeFieldBegin("dbname",o.Type.STRING,2),r.writeString(this.dbname),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},A=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_switch_database_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},O=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_clone_session_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},R=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=r.success),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:p==o.Type.STRING?this.success=r.readString():r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_clone_session_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",o.Type.STRING,0),r.writeString(this.success),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},D=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_server_status_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},P=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TServerStatus(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:p==o.Type.STRUCT?(this.success=new l.TServerStatus,this.success.read(r)):r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_server_status_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",o.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},U=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_status_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Y=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=o.copyList(r.success,[l.TServerStatus])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:if(p==o.Type.LIST){this.success=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=new l.TServerStatus,k.read(r),this.success.push(k)}r.readListEnd()}else r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_status_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",o.Type.LIST,0),r.writeListBegin(o.Type.STRUCT,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},z=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_hardware_info_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},W=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TClusterHardwareInfo(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:p==o.Type.STRUCT?(this.success=new l.TClusterHardwareInfo,this.success.read(r)):r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_hardware_info_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",o.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},V=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_tables_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},H=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=o.copyList(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:if(p==o.Type.LIST){this.success=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=r.readString(),this.success.push(k)}r.readListEnd()}else r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_tables_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",o.Type.LIST,0),r.writeListBegin(o.Type.STRING,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},J=class{constructor(r){this.session=null,this.database_name=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.database_name!==void 0&&r.database_name!==null&&(this.database_name=r.database_name))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.STRING?this.database_name=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_tables_for_database_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.database_name!==null&&this.database_name!==void 0&&(r.writeFieldBegin("database_name",o.Type.STRING,2),r.writeString(this.database_name),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},G=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=o.copyList(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:if(p==o.Type.LIST){this.success=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=r.readString(),this.success.push(k)}r.readListEnd()}else r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_tables_for_database_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",o.Type.LIST,0),r.writeListBegin(o.Type.STRING,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},le=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_physical_tables_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},pe=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=o.copyList(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:if(p==o.Type.LIST){this.success=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=r.readString(),this.success.push(k)}r.readListEnd()}else r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_physical_tables_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",o.Type.LIST,0),r.writeListBegin(o.Type.STRING,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ne=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_views_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Ae=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=o.copyList(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:if(p==o.Type.LIST){this.success=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=r.readString(),this.success.push(k)}r.readListEnd()}else r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_views_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",o.Type.LIST,0),r.writeListBegin(o.Type.STRING,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},fe=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_tables_meta_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Fe=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=o.copyList(r.success,[l.TTableMeta])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:if(p==o.Type.LIST){this.success=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=new l.TTableMeta,k.read(r),this.success.push(k)}r.readListEnd()}else r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_tables_meta_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",o.Type.LIST,0),r.writeListBegin(o.Type.STRUCT,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},je=class{constructor(r){this.session=null,this.table_name=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.STRING?this.table_name=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_table_details_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",o.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},_t=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TTableDetails(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:p==o.Type.STRUCT?(this.success=new l.TTableDetails,this.success.read(r)):r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_table_details_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",o.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Ct=class{constructor(r){this.session=null,this.table_name=null,this.database_name=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.database_name!==void 0&&r.database_name!==null&&(this.database_name=r.database_name))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.STRING?this.table_name=r.readString():r.skip(p);break;case 3:p==o.Type.STRING?this.database_name=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_table_details_for_database_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",o.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.database_name!==null&&this.database_name!==void 0&&(r.writeFieldBegin("database_name",o.Type.STRING,3),r.writeString(this.database_name),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},zt=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TTableDetails(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:p==o.Type.STRUCT?(this.success=new l.TTableDetails,this.success.read(r)):r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_table_details_for_database_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",o.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},_e=class{constructor(r){this.session=null,this.table_name=null,this.include_system_columns=!0,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.include_system_columns!==void 0&&r.include_system_columns!==null&&(this.include_system_columns=r.include_system_columns))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.STRING?this.table_name=r.readString():r.skip(p);break;case 3:p==o.Type.BOOL?this.include_system_columns=r.readBool():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_internal_table_details_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",o.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.include_system_columns!==null&&this.include_system_columns!==void 0&&(r.writeFieldBegin("include_system_columns",o.Type.BOOL,3),r.writeBool(this.include_system_columns),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},q=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TTableDetails(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:p==o.Type.STRUCT?(this.success=new l.TTableDetails,this.success.read(r)):r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_internal_table_details_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",o.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},j=class{constructor(r){this.session=null,this.table_name=null,this.database_name=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.database_name!==void 0&&r.database_name!==null&&(this.database_name=r.database_name))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.STRING?this.table_name=r.readString():r.skip(p);break;case 3:p==o.Type.STRING?this.database_name=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_internal_table_details_for_database_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",o.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.database_name!==null&&this.database_name!==void 0&&(r.writeFieldBegin("database_name",o.Type.STRING,3),r.writeString(this.database_name),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},L=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TTableDetails(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:p==o.Type.STRUCT?(this.success=new l.TTableDetails,this.success.read(r)):r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_internal_table_details_for_database_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",o.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},K=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_users_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Z=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=o.copyList(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:if(p==o.Type.LIST){this.success=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=r.readString(),this.success.push(k)}r.readListEnd()}else r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_users_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",o.Type.LIST,0),r.writeListBegin(o.Type.STRING,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},oe=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_databases_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},re=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=o.copyList(r.success,[l.TDBInfo])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:if(p==o.Type.LIST){this.success=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=new l.TDBInfo,k.read(r),this.success.push(k)}r.readListEnd()}else r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_databases_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",o.Type.LIST,0),r.writeListBegin(o.Type.STRUCT,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ge=class{constructor(r){}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin().ftype;if(p==o.Type.STOP)break;r.skip(p),r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_version_args"),r.writeFieldStop(),r.writeStructEnd()}},Se=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=r.success),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:p==o.Type.STRING?this.success=r.readString():r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_version_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",o.Type.STRING,0),r.writeString(this.success),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},He=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_start_heap_profile_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},pi=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_start_heap_profile_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Bi=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_stop_heap_profile_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Qt=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_stop_heap_profile_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},$s=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_heap_profile_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},lr=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=r.success),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:p==o.Type.STRING?this.success=r.readString():r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_heap_profile_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",o.Type.STRING,0),r.writeString(this.success),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},cr=class{constructor(r){this.session=null,this.memory_level=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.memory_level!==void 0&&r.memory_level!==null&&(this.memory_level=r.memory_level))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.STRING?this.memory_level=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_memory_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.memory_level!==null&&this.memory_level!==void 0&&(r.writeFieldBegin("memory_level",o.Type.STRING,2),r.writeString(this.memory_level),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},he=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=o.copyList(r.success,[l.TNodeMemoryInfo])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:if(p==o.Type.LIST){this.success=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=new l.TNodeMemoryInfo,k.read(r),this.success.push(k)}r.readListEnd()}else r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_memory_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",o.Type.LIST,0),r.writeListBegin(o.Type.STRUCT,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},as=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_clear_cpu_memory_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Pn=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_clear_cpu_memory_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ka=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_clear_gpu_memory_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Ki=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_clear_gpu_memory_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Zl=class{constructor(r){this.parent_session=null,this.leaf_session=null,this.start_time_str=null,this.label=null,this.for_running_query_kernel=null,r&&(r.parent_session!==void 0&&r.parent_session!==null&&(this.parent_session=r.parent_session),r.leaf_session!==void 0&&r.leaf_session!==null&&(this.leaf_session=r.leaf_session),r.start_time_str!==void 0&&r.start_time_str!==null&&(this.start_time_str=r.start_time_str),r.label!==void 0&&r.label!==null&&(this.label=r.label),r.for_running_query_kernel!==void 0&&r.for_running_query_kernel!==null&&(this.for_running_query_kernel=r.for_running_query_kernel))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.parent_session=r.readString():r.skip(p);break;case 2:p==o.Type.STRING?this.leaf_session=r.readString():r.skip(p);break;case 3:p==o.Type.STRING?this.start_time_str=r.readString():r.skip(p);break;case 4:p==o.Type.STRING?this.label=r.readString():r.skip(p);break;case 5:p==o.Type.BOOL?this.for_running_query_kernel=r.readBool():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_cur_session_args"),this.parent_session!==null&&this.parent_session!==void 0&&(r.writeFieldBegin("parent_session",o.Type.STRING,1),r.writeString(this.parent_session),r.writeFieldEnd()),this.leaf_session!==null&&this.leaf_session!==void 0&&(r.writeFieldBegin("leaf_session",o.Type.STRING,2),r.writeString(this.leaf_session),r.writeFieldEnd()),this.start_time_str!==null&&this.start_time_str!==void 0&&(r.writeFieldBegin("start_time_str",o.Type.STRING,3),r.writeString(this.start_time_str),r.writeFieldEnd()),this.label!==null&&this.label!==void 0&&(r.writeFieldBegin("label",o.Type.STRING,4),r.writeString(this.label),r.writeFieldEnd()),this.for_running_query_kernel!==null&&this.for_running_query_kernel!==void 0&&(r.writeFieldBegin("for_running_query_kernel",o.Type.BOOL,5),r.writeBool(this.for_running_query_kernel),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ec=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_cur_session_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Us=class{constructor(r){this.parent_session=null,this.leaf_session=null,this.start_time_str=null,this.label=null,this.for_running_query_kernel=null,r&&(r.parent_session!==void 0&&r.parent_session!==null&&(this.parent_session=r.parent_session),r.leaf_session!==void 0&&r.leaf_session!==null&&(this.leaf_session=r.leaf_session),r.start_time_str!==void 0&&r.start_time_str!==null&&(this.start_time_str=r.start_time_str),r.label!==void 0&&r.label!==null&&(this.label=r.label),r.for_running_query_kernel!==void 0&&r.for_running_query_kernel!==null&&(this.for_running_query_kernel=r.for_running_query_kernel))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.parent_session=r.readString():r.skip(p);break;case 2:p==o.Type.STRING?this.leaf_session=r.readString():r.skip(p);break;case 3:p==o.Type.STRING?this.start_time_str=r.readString():r.skip(p);break;case 4:p==o.Type.STRING?this.label=r.readString():r.skip(p);break;case 5:p==o.Type.BOOL?this.for_running_query_kernel=r.readBool():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_invalidate_cur_session_args"),this.parent_session!==null&&this.parent_session!==void 0&&(r.writeFieldBegin("parent_session",o.Type.STRING,1),r.writeString(this.parent_session),r.writeFieldEnd()),this.leaf_session!==null&&this.leaf_session!==void 0&&(r.writeFieldBegin("leaf_session",o.Type.STRING,2),r.writeString(this.leaf_session),r.writeFieldEnd()),this.start_time_str!==null&&this.start_time_str!==void 0&&(r.writeFieldBegin("start_time_str",o.Type.STRING,3),r.writeString(this.start_time_str),r.writeFieldEnd()),this.label!==null&&this.label!==void 0&&(r.writeFieldBegin("label",o.Type.STRING,4),r.writeString(this.label),r.writeFieldEnd()),this.for_running_query_kernel!==null&&this.for_running_query_kernel!==void 0&&(r.writeFieldBegin("for_running_query_kernel",o.Type.BOOL,5),r.writeBool(this.for_running_query_kernel),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},tc=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_invalidate_cur_session_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},C=class{constructor(r){this.session=null,this.db_id=null,this.table_id=null,this.new_epoch=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.db_id!==void 0&&r.db_id!==null&&(this.db_id=r.db_id),r.table_id!==void 0&&r.table_id!==null&&(this.table_id=r.table_id),r.new_epoch!==void 0&&r.new_epoch!==null&&(this.new_epoch=r.new_epoch))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.I32?this.db_id=r.readI32():r.skip(p);break;case 3:p==o.Type.I32?this.table_id=r.readI32():r.skip(p);break;case 4:p==o.Type.I32?this.new_epoch=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_table_epoch_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.db_id!==null&&this.db_id!==void 0&&(r.writeFieldBegin("db_id",o.Type.I32,2),r.writeI32(this.db_id),r.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0&&(r.writeFieldBegin("table_id",o.Type.I32,3),r.writeI32(this.table_id),r.writeFieldEnd()),this.new_epoch!==null&&this.new_epoch!==void 0&&(r.writeFieldBegin("new_epoch",o.Type.I32,4),r.writeI32(this.new_epoch),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},M=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_table_epoch_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},N=class{constructor(r){this.session=null,this.table_name=null,this.new_epoch=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.new_epoch!==void 0&&r.new_epoch!==null&&(this.new_epoch=r.new_epoch))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.STRING?this.table_name=r.readString():r.skip(p);break;case 3:p==o.Type.I32?this.new_epoch=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_table_epoch_by_name_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",o.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.new_epoch!==null&&this.new_epoch!==void 0&&(r.writeFieldBegin("new_epoch",o.Type.I32,3),r.writeI32(this.new_epoch),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},$=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_table_epoch_by_name_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},X=class{constructor(r){this.session=null,this.db_id=null,this.table_id=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.db_id!==void 0&&r.db_id!==null&&(this.db_id=r.db_id),r.table_id!==void 0&&r.table_id!==null&&(this.table_id=r.table_id))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.I32?this.db_id=r.readI32():r.skip(p);break;case 3:p==o.Type.I32?this.table_id=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_table_epoch_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.db_id!==null&&this.db_id!==void 0&&(r.writeFieldBegin("db_id",o.Type.I32,2),r.writeI32(this.db_id),r.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0&&(r.writeFieldBegin("table_id",o.Type.I32,3),r.writeI32(this.table_id),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},te=class{constructor(r){this.success=null,r&&r.success!==void 0&&r.success!==null&&(this.success=r.success)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:p==o.Type.I32?this.success=r.readI32():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_table_epoch_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",o.Type.I32,0),r.writeI32(this.success),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},se=class{constructor(r){this.session=null,this.table_name=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.STRING?this.table_name=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_table_epoch_by_name_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",o.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Oe=class{constructor(r){this.success=null,r&&r.success!==void 0&&r.success!==null&&(this.success=r.success)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:p==o.Type.I32?this.success=r.readI32():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_table_epoch_by_name_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",o.Type.I32,0),r.writeI32(this.success),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},$e=class{constructor(r){this.session=null,this.db_id=null,this.table_id=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.db_id!==void 0&&r.db_id!==null&&(this.db_id=r.db_id),r.table_id!==void 0&&r.table_id!==null&&(this.table_id=r.table_id))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.I32?this.db_id=r.readI32():r.skip(p);break;case 3:p==o.Type.I32?this.table_id=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_table_epochs_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.db_id!==null&&this.db_id!==void 0&&(r.writeFieldBegin("db_id",o.Type.I32,2),r.writeI32(this.db_id),r.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0&&(r.writeFieldBegin("table_id",o.Type.I32,3),r.writeI32(this.table_id),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Ue=class{constructor(r){this.success=null,r&&r.success!==void 0&&r.success!==null&&(this.success=o.copyList(r.success,[l.TTableEpochInfo]))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:if(p==o.Type.LIST){this.success=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=new l.TTableEpochInfo,k.read(r),this.success.push(k)}r.readListEnd()}else r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_table_epochs_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",o.Type.LIST,0),r.writeListBegin(o.Type.STRUCT,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}r.writeFieldStop(),r.writeStructEnd()}},Ve=class{constructor(r){this.session=null,this.db_id=null,this.table_epochs=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.db_id!==void 0&&r.db_id!==null&&(this.db_id=r.db_id),r.table_epochs!==void 0&&r.table_epochs!==null&&(this.table_epochs=o.copyList(r.table_epochs,[l.TTableEpochInfo])))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.I32?this.db_id=r.readI32():r.skip(p);break;case 3:if(p==o.Type.LIST){this.table_epochs=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=new l.TTableEpochInfo,k.read(r),this.table_epochs.push(k)}r.readListEnd()}else r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_set_table_epochs_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.db_id!==null&&this.db_id!==void 0&&(r.writeFieldBegin("db_id",o.Type.I32,2),r.writeI32(this.db_id),r.writeFieldEnd()),this.table_epochs!==null&&this.table_epochs!==void 0){r.writeFieldBegin("table_epochs",o.Type.LIST,3),r.writeListBegin(o.Type.STRUCT,this.table_epochs.length);for(let y in this.table_epochs)this.table_epochs.hasOwnProperty(y)&&(y=this.table_epochs[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}r.writeFieldStop(),r.writeStructEnd()}},We=class{constructor(r){}read(r){for(r.readStructBegin();;){const p=r.readFieldBegin().ftype;if(p==o.Type.STOP)break;r.skip(p),r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_table_epochs_result"),r.writeFieldStop(),r.writeStructEnd()}},ic=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_session_info_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Bw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TSessionInfo(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:p==o.Type.STRUCT?(this.success=new l.TSessionInfo,this.success.read(r)):r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_session_info_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",o.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},L3=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_queries_info_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Iw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=o.copyList(r.success,[l.TQueryInfo])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:if(p==o.Type.LIST){this.success=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=new l.TQueryInfo,k.read(r),this.success.push(k)}r.readListEnd()}else r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_queries_info_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",o.Type.LIST,0),r.writeListBegin(o.Type.STRUCT,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},D3=class{constructor(r){this.session=null,this.leaf_info=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.leaf_info!==void 0&&r.leaf_info!==null&&(this.leaf_info=new l.TLeafInfo(r.leaf_info)))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.STRUCT?(this.leaf_info=new l.TLeafInfo,this.leaf_info.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_leaf_info_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.leaf_info!==null&&this.leaf_info!==void 0&&(r.writeFieldBegin("leaf_info",o.Type.STRUCT,2),this.leaf_info.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},kw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_leaf_info_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},P3=class{constructor(r){this.session=null,this.query=null,this.column_format=null,this.nonce=null,this.first_n=-1,this.at_most_n=-1,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.query!==void 0&&r.query!==null&&(this.query=r.query),r.column_format!==void 0&&r.column_format!==null&&(this.column_format=r.column_format),r.nonce!==void 0&&r.nonce!==null&&(this.nonce=r.nonce),r.first_n!==void 0&&r.first_n!==null&&(this.first_n=r.first_n),r.at_most_n!==void 0&&r.at_most_n!==null&&(this.at_most_n=r.at_most_n))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.STRING?this.query=r.readString():r.skip(p);break;case 3:p==o.Type.BOOL?this.column_format=r.readBool():r.skip(p);break;case 4:p==o.Type.STRING?this.nonce=r.readString():r.skip(p);break;case 5:p==o.Type.I32?this.first_n=r.readI32():r.skip(p);break;case 6:p==o.Type.I32?this.at_most_n=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_sql_execute_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.query!==null&&this.query!==void 0&&(r.writeFieldBegin("query",o.Type.STRING,2),r.writeString(this.query),r.writeFieldEnd()),this.column_format!==null&&this.column_format!==void 0&&(r.writeFieldBegin("column_format",o.Type.BOOL,3),r.writeBool(this.column_format),r.writeFieldEnd()),this.nonce!==null&&this.nonce!==void 0&&(r.writeFieldBegin("nonce",o.Type.STRING,4),r.writeString(this.nonce),r.writeFieldEnd()),this.first_n!==null&&this.first_n!==void 0&&(r.writeFieldBegin("first_n",o.Type.I32,5),r.writeI32(this.first_n),r.writeFieldEnd()),this.at_most_n!==null&&this.at_most_n!==void 0&&(r.writeFieldBegin("at_most_n",o.Type.I32,6),r.writeI32(this.at_most_n),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Fw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TQueryResult(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:p==o.Type.STRUCT?(this.success=new l.TQueryResult,this.success.read(r)):r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_sql_execute_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",o.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},$3=class{constructor(r){this.session=null,this.query=null,this.device_type=null,this.device_id=0,this.first_n=-1,this.transport_method=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.query!==void 0&&r.query!==null&&(this.query=r.query),r.device_type!==void 0&&r.device_type!==null&&(this.device_type=r.device_type),r.device_id!==void 0&&r.device_id!==null&&(this.device_id=r.device_id),r.first_n!==void 0&&r.first_n!==null&&(this.first_n=r.first_n),r.transport_method!==void 0&&r.transport_method!==null&&(this.transport_method=r.transport_method))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.STRING?this.query=r.readString():r.skip(p);break;case 3:p==o.Type.I32?this.device_type=r.readI32():r.skip(p);break;case 4:p==o.Type.I32?this.device_id=r.readI32():r.skip(p);break;case 5:p==o.Type.I32?this.first_n=r.readI32():r.skip(p);break;case 6:p==o.Type.I32?this.transport_method=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_sql_execute_df_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.query!==null&&this.query!==void 0&&(r.writeFieldBegin("query",o.Type.STRING,2),r.writeString(this.query),r.writeFieldEnd()),this.device_type!==null&&this.device_type!==void 0&&(r.writeFieldBegin("device_type",o.Type.I32,3),r.writeI32(this.device_type),r.writeFieldEnd()),this.device_id!==null&&this.device_id!==void 0&&(r.writeFieldBegin("device_id",o.Type.I32,4),r.writeI32(this.device_id),r.writeFieldEnd()),this.first_n!==null&&this.first_n!==void 0&&(r.writeFieldBegin("first_n",o.Type.I32,5),r.writeI32(this.first_n),r.writeFieldEnd()),this.transport_method!==null&&this.transport_method!==void 0&&(r.writeFieldBegin("transport_method",o.Type.I32,6),r.writeI32(this.transport_method),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Mw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TDataFrame(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:p==o.Type.STRUCT?(this.success=new l.TDataFrame,this.success.read(r)):r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_sql_execute_df_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",o.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},U3=class{constructor(r){this.session=null,this.query=null,this.device_id=0,this.first_n=-1,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.query!==void 0&&r.query!==null&&(this.query=r.query),r.device_id!==void 0&&r.device_id!==null&&(this.device_id=r.device_id),r.first_n!==void 0&&r.first_n!==null&&(this.first_n=r.first_n))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.STRING?this.query=r.readString():r.skip(p);break;case 3:p==o.Type.I32?this.device_id=r.readI32():r.skip(p);break;case 4:p==o.Type.I32?this.first_n=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_sql_execute_gdf_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.query!==null&&this.query!==void 0&&(r.writeFieldBegin("query",o.Type.STRING,2),r.writeString(this.query),r.writeFieldEnd()),this.device_id!==null&&this.device_id!==void 0&&(r.writeFieldBegin("device_id",o.Type.I32,3),r.writeI32(this.device_id),r.writeFieldEnd()),this.first_n!==null&&this.first_n!==void 0&&(r.writeFieldBegin("first_n",o.Type.I32,4),r.writeI32(this.first_n),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Aw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TDataFrame(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:p==o.Type.STRUCT?(this.success=new l.TDataFrame,this.success.read(r)):r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_sql_execute_gdf_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",o.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},z3=class{constructor(r){this.session=null,this.df=null,this.device_type=null,this.device_id=0,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.df!==void 0&&r.df!==null&&(this.df=new l.TDataFrame(r.df)),r.device_type!==void 0&&r.device_type!==null&&(this.device_type=r.device_type),r.device_id!==void 0&&r.device_id!==null&&(this.device_id=r.device_id))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.STRUCT?(this.df=new l.TDataFrame,this.df.read(r)):r.skip(p);break;case 3:p==o.Type.I32?this.device_type=r.readI32():r.skip(p);break;case 4:p==o.Type.I32?this.device_id=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_deallocate_df_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.df!==null&&this.df!==void 0&&(r.writeFieldBegin("df",o.Type.STRUCT,2),this.df.write(r),r.writeFieldEnd()),this.device_type!==null&&this.device_type!==void 0&&(r.writeFieldBegin("device_type",o.Type.I32,3),r.writeI32(this.device_type),r.writeFieldEnd()),this.device_id!==null&&this.device_id!==void 0&&(r.writeFieldBegin("device_id",o.Type.I32,4),r.writeI32(this.device_id),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Ow=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_deallocate_df_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},j3=class{constructor(r){this.query_session=null,this.interrupt_session=null,r&&(r.query_session!==void 0&&r.query_session!==null&&(this.query_session=r.query_session),r.interrupt_session!==void 0&&r.interrupt_session!==null&&(this.interrupt_session=r.interrupt_session))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.query_session=r.readString():r.skip(p);break;case 2:p==o.Type.STRING?this.interrupt_session=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_interrupt_args"),this.query_session!==null&&this.query_session!==void 0&&(r.writeFieldBegin("query_session",o.Type.STRING,1),r.writeString(this.query_session),r.writeFieldEnd()),this.interrupt_session!==null&&this.interrupt_session!==void 0&&(r.writeFieldBegin("interrupt_session",o.Type.STRING,2),r.writeString(this.interrupt_session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Nw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_interrupt_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},q3=class{constructor(r){this.session=null,this.query=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.query!==void 0&&r.query!==null&&(this.query=r.query))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.STRING?this.query=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_sql_validate_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.query!==null&&this.query!==void 0&&(r.writeFieldBegin("query",o.Type.STRING,2),r.writeString(this.query),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Cw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=o.copyList(r.success,[l.TColumnType])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:if(p==o.Type.LIST){this.success=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=new l.TColumnType,k.read(r),this.success.push(k)}r.readListEnd()}else r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_sql_validate_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",o.Type.LIST,0),r.writeListBegin(o.Type.STRUCT,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},G3=class{constructor(r){this.session=null,this.sql=null,this.cursor=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.sql!==void 0&&r.sql!==null&&(this.sql=r.sql),r.cursor!==void 0&&r.cursor!==null&&(this.cursor=r.cursor))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.STRING?this.sql=r.readString():r.skip(p);break;case 3:p==o.Type.I32?this.cursor=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_completion_hints_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.sql!==null&&this.sql!==void 0&&(r.writeFieldBegin("sql",o.Type.STRING,2),r.writeString(this.sql),r.writeFieldEnd()),this.cursor!==null&&this.cursor!==void 0&&(r.writeFieldBegin("cursor",o.Type.I32,3),r.writeI32(this.cursor),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Rw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=o.copyList(r.success,[g.TCompletionHint])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:if(p==o.Type.LIST){this.success=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=new g.TCompletionHint,k.read(r),this.success.push(k)}r.readListEnd()}else r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_completion_hints_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",o.Type.LIST,0),r.writeListBegin(o.Type.STRUCT,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},V3=class{constructor(r){this.session=null,this.mode=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.mode!==void 0&&r.mode!==null&&(this.mode=r.mode))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.I32?this.mode=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_execution_mode_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.mode!==null&&this.mode!==void 0&&(r.writeFieldBegin("mode",o.Type.I32,2),r.writeI32(this.mode),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Lw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_execution_mode_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},W3=class{constructor(r){this.session=null,this.widget_id=null,this.vega_json=null,this.compression_level=null,this.nonce=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.widget_id!==void 0&&r.widget_id!==null&&(this.widget_id=r.widget_id),r.vega_json!==void 0&&r.vega_json!==null&&(this.vega_json=r.vega_json),r.compression_level!==void 0&&r.compression_level!==null&&(this.compression_level=r.compression_level),r.nonce!==void 0&&r.nonce!==null&&(this.nonce=r.nonce))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.I64?this.widget_id=r.readI64():r.skip(p);break;case 3:p==o.Type.STRING?this.vega_json=r.readString():r.skip(p);break;case 4:p==o.Type.I32?this.compression_level=r.readI32():r.skip(p);break;case 5:p==o.Type.STRING?this.nonce=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_render_vega_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.widget_id!==null&&this.widget_id!==void 0&&(r.writeFieldBegin("widget_id",o.Type.I64,2),r.writeI64(this.widget_id),r.writeFieldEnd()),this.vega_json!==null&&this.vega_json!==void 0&&(r.writeFieldBegin("vega_json",o.Type.STRING,3),r.writeString(this.vega_json),r.writeFieldEnd()),this.compression_level!==null&&this.compression_level!==void 0&&(r.writeFieldBegin("compression_level",o.Type.I32,4),r.writeI32(this.compression_level),r.writeFieldEnd()),this.nonce!==null&&this.nonce!==void 0&&(r.writeFieldBegin("nonce",o.Type.STRING,5),r.writeString(this.nonce),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Dw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TRenderResult(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:p==o.Type.STRUCT?(this.success=new l.TRenderResult,this.success.read(r)):r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_render_vega_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",o.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},H3=class{constructor(r){this.session=null,this.widget_id=null,this.pixel=null,this.table_col_names=null,this.column_format=null,this.pixelRadius=null,this.nonce=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.widget_id!==void 0&&r.widget_id!==null&&(this.widget_id=r.widget_id),r.pixel!==void 0&&r.pixel!==null&&(this.pixel=new l.TPixel(r.pixel)),r.table_col_names!==void 0&&r.table_col_names!==null&&(this.table_col_names=o.copyMap(r.table_col_names,[o.copyList,null])),r.column_format!==void 0&&r.column_format!==null&&(this.column_format=r.column_format),r.pixelRadius!==void 0&&r.pixelRadius!==null&&(this.pixelRadius=r.pixelRadius),r.nonce!==void 0&&r.nonce!==null&&(this.nonce=r.nonce))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.I64?this.widget_id=r.readI64():r.skip(p);break;case 3:p==o.Type.STRUCT?(this.pixel=new l.TPixel,this.pixel.read(r)):r.skip(p);break;case 4:if(p==o.Type.MAP){this.table_col_names={};const _=r.readMapBegin().size||0;for(let E=0;E<_;++E){let k=null,ee=null;k=r.readString(),ee=[];const Ge=r.readListBegin().size||0;for(let _i=0;_i<Ge;++_i){let Vo=null;Vo=r.readString(),ee.push(Vo)}r.readListEnd(),this.table_col_names[k]=ee}r.readMapEnd()}else r.skip(p);break;case 5:p==o.Type.BOOL?this.column_format=r.readBool():r.skip(p);break;case 6:p==o.Type.I32?this.pixelRadius=r.readI32():r.skip(p);break;case 7:p==o.Type.STRING?this.nonce=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_result_row_for_pixel_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.widget_id!==null&&this.widget_id!==void 0&&(r.writeFieldBegin("widget_id",o.Type.I64,2),r.writeI64(this.widget_id),r.writeFieldEnd()),this.pixel!==null&&this.pixel!==void 0&&(r.writeFieldBegin("pixel",o.Type.STRUCT,3),this.pixel.write(r),r.writeFieldEnd()),this.table_col_names!==null&&this.table_col_names!==void 0){r.writeFieldBegin("table_col_names",o.Type.MAP,4),r.writeMapBegin(o.Type.STRING,o.Type.LIST,o.objectLength(this.table_col_names));for(let y in this.table_col_names)if(this.table_col_names.hasOwnProperty(y)){let p=this.table_col_names[y];r.writeString(y),r.writeListBegin(o.Type.STRING,p.length);for(let h in p)p.hasOwnProperty(h)&&(h=p[h],r.writeString(h));r.writeListEnd()}r.writeMapEnd(),r.writeFieldEnd()}this.column_format!==null&&this.column_format!==void 0&&(r.writeFieldBegin("column_format",o.Type.BOOL,5),r.writeBool(this.column_format),r.writeFieldEnd()),this.pixelRadius!==null&&this.pixelRadius!==void 0&&(r.writeFieldBegin("pixelRadius",o.Type.I32,6),r.writeI32(this.pixelRadius),r.writeFieldEnd()),this.nonce!==null&&this.nonce!==void 0&&(r.writeFieldBegin("nonce",o.Type.STRING,7),r.writeString(this.nonce),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Pw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TPixelTableRowResult(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:p==o.Type.STRUCT?(this.success=new l.TPixelTableRowResult,this.success.read(r)):r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_result_row_for_pixel_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",o.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Y3=class{constructor(r){this.session=null,this.custom_expression=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.custom_expression!==void 0&&r.custom_expression!==null&&(this.custom_expression=new l.TCustomExpression(r.custom_expression)))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.STRUCT?(this.custom_expression=new l.TCustomExpression,this.custom_expression.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_create_custom_expression_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.custom_expression!==null&&this.custom_expression!==void 0&&(r.writeFieldBegin("custom_expression",o.Type.STRUCT,2),this.custom_expression.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},$w=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=r.success),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:p==o.Type.I32?this.success=r.readI32():r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_create_custom_expression_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",o.Type.I32,0),r.writeI32(this.success),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},X3=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_custom_expressions_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Uw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=o.copyList(r.success,[l.TCustomExpression])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:if(p==o.Type.LIST){this.success=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=new l.TCustomExpression,k.read(r),this.success.push(k)}r.readListEnd()}else r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_custom_expressions_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",o.Type.LIST,0),r.writeListBegin(o.Type.STRUCT,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},K3=class{constructor(r){this.session=null,this.id=null,this.expression_json=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.id!==void 0&&r.id!==null&&(this.id=r.id),r.expression_json!==void 0&&r.expression_json!==null&&(this.expression_json=r.expression_json))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.I32?this.id=r.readI32():r.skip(p);break;case 3:p==o.Type.STRING?this.expression_json=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_update_custom_expression_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.id!==null&&this.id!==void 0&&(r.writeFieldBegin("id",o.Type.I32,2),r.writeI32(this.id),r.writeFieldEnd()),this.expression_json!==null&&this.expression_json!==void 0&&(r.writeFieldBegin("expression_json",o.Type.STRING,3),r.writeString(this.expression_json),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},zw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_update_custom_expression_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},J3=class{constructor(r){this.session=null,this.custom_expression_ids=null,this.do_soft_delete=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.custom_expression_ids!==void 0&&r.custom_expression_ids!==null&&(this.custom_expression_ids=o.copyList(r.custom_expression_ids,[null])),r.do_soft_delete!==void 0&&r.do_soft_delete!==null&&(this.do_soft_delete=r.do_soft_delete))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:if(p==o.Type.LIST){this.custom_expression_ids=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=r.readI32(),this.custom_expression_ids.push(k)}r.readListEnd()}else r.skip(p);break;case 3:p==o.Type.BOOL?this.do_soft_delete=r.readBool():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_delete_custom_expressions_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.custom_expression_ids!==null&&this.custom_expression_ids!==void 0){r.writeFieldBegin("custom_expression_ids",o.Type.LIST,2),r.writeListBegin(o.Type.I32,this.custom_expression_ids.length);for(let y in this.custom_expression_ids)this.custom_expression_ids.hasOwnProperty(y)&&(y=this.custom_expression_ids[y],r.writeI32(y));r.writeListEnd(),r.writeFieldEnd()}this.do_soft_delete!==null&&this.do_soft_delete!==void 0&&(r.writeFieldBegin("do_soft_delete",o.Type.BOOL,3),r.writeBool(this.do_soft_delete),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},jw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_delete_custom_expressions_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Q3=class{constructor(r){this.session=null,this.dashboard_id=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.dashboard_id!==void 0&&r.dashboard_id!==null&&(this.dashboard_id=r.dashboard_id))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.I32?this.dashboard_id=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_dashboard_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.dashboard_id!==null&&this.dashboard_id!==void 0&&(r.writeFieldBegin("dashboard_id",o.Type.I32,2),r.writeI32(this.dashboard_id),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},qw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TDashboard(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:p==o.Type.STRUCT?(this.success=new l.TDashboard,this.success.read(r)):r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_dashboard_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",o.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Z3=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_dashboards_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Gw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=o.copyList(r.success,[l.TDashboard])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:if(p==o.Type.LIST){this.success=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=new l.TDashboard,k.read(r),this.success.push(k)}r.readListEnd()}else r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_dashboards_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",o.Type.LIST,0),r.writeListBegin(o.Type.STRUCT,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},eL=class{constructor(r){this.session=null,this.dashboard_name=null,this.dashboard_state=null,this.image_hash=null,this.dashboard_metadata=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.dashboard_name!==void 0&&r.dashboard_name!==null&&(this.dashboard_name=r.dashboard_name),r.dashboard_state!==void 0&&r.dashboard_state!==null&&(this.dashboard_state=r.dashboard_state),r.image_hash!==void 0&&r.image_hash!==null&&(this.image_hash=r.image_hash),r.dashboard_metadata!==void 0&&r.dashboard_metadata!==null&&(this.dashboard_metadata=r.dashboard_metadata))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.STRING?this.dashboard_name=r.readString():r.skip(p);break;case 3:p==o.Type.STRING?this.dashboard_state=r.readString():r.skip(p);break;case 4:p==o.Type.STRING?this.image_hash=r.readString():r.skip(p);break;case 5:p==o.Type.STRING?this.dashboard_metadata=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_create_dashboard_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.dashboard_name!==null&&this.dashboard_name!==void 0&&(r.writeFieldBegin("dashboard_name",o.Type.STRING,2),r.writeString(this.dashboard_name),r.writeFieldEnd()),this.dashboard_state!==null&&this.dashboard_state!==void 0&&(r.writeFieldBegin("dashboard_state",o.Type.STRING,3),r.writeString(this.dashboard_state),r.writeFieldEnd()),this.image_hash!==null&&this.image_hash!==void 0&&(r.writeFieldBegin("image_hash",o.Type.STRING,4),r.writeString(this.image_hash),r.writeFieldEnd()),this.dashboard_metadata!==null&&this.dashboard_metadata!==void 0&&(r.writeFieldBegin("dashboard_metadata",o.Type.STRING,5),r.writeString(this.dashboard_metadata),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Vw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=r.success),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:p==o.Type.I32?this.success=r.readI32():r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_create_dashboard_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",o.Type.I32,0),r.writeI32(this.success),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},tL=class{constructor(r){this.session=null,this.dashboard_id=null,this.dashboard_name=null,this.dashboard_owner=null,this.dashboard_state=null,this.image_hash=null,this.dashboard_metadata=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.dashboard_id!==void 0&&r.dashboard_id!==null&&(this.dashboard_id=r.dashboard_id),r.dashboard_name!==void 0&&r.dashboard_name!==null&&(this.dashboard_name=r.dashboard_name),r.dashboard_owner!==void 0&&r.dashboard_owner!==null&&(this.dashboard_owner=r.dashboard_owner),r.dashboard_state!==void 0&&r.dashboard_state!==null&&(this.dashboard_state=r.dashboard_state),r.image_hash!==void 0&&r.image_hash!==null&&(this.image_hash=r.image_hash),r.dashboard_metadata!==void 0&&r.dashboard_metadata!==null&&(this.dashboard_metadata=r.dashboard_metadata))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.I32?this.dashboard_id=r.readI32():r.skip(p);break;case 3:p==o.Type.STRING?this.dashboard_name=r.readString():r.skip(p);break;case 4:p==o.Type.STRING?this.dashboard_owner=r.readString():r.skip(p);break;case 5:p==o.Type.STRING?this.dashboard_state=r.readString():r.skip(p);break;case 6:p==o.Type.STRING?this.image_hash=r.readString():r.skip(p);break;case 7:p==o.Type.STRING?this.dashboard_metadata=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_replace_dashboard_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.dashboard_id!==null&&this.dashboard_id!==void 0&&(r.writeFieldBegin("dashboard_id",o.Type.I32,2),r.writeI32(this.dashboard_id),r.writeFieldEnd()),this.dashboard_name!==null&&this.dashboard_name!==void 0&&(r.writeFieldBegin("dashboard_name",o.Type.STRING,3),r.writeString(this.dashboard_name),r.writeFieldEnd()),this.dashboard_owner!==null&&this.dashboard_owner!==void 0&&(r.writeFieldBegin("dashboard_owner",o.Type.STRING,4),r.writeString(this.dashboard_owner),r.writeFieldEnd()),this.dashboard_state!==null&&this.dashboard_state!==void 0&&(r.writeFieldBegin("dashboard_state",o.Type.STRING,5),r.writeString(this.dashboard_state),r.writeFieldEnd()),this.image_hash!==null&&this.image_hash!==void 0&&(r.writeFieldBegin("image_hash",o.Type.STRING,6),r.writeString(this.image_hash),r.writeFieldEnd()),this.dashboard_metadata!==null&&this.dashboard_metadata!==void 0&&(r.writeFieldBegin("dashboard_metadata",o.Type.STRING,7),r.writeString(this.dashboard_metadata),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Ww=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_replace_dashboard_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},iL=class{constructor(r){this.session=null,this.dashboard_id=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.dashboard_id!==void 0&&r.dashboard_id!==null&&(this.dashboard_id=r.dashboard_id))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.I32?this.dashboard_id=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_delete_dashboard_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.dashboard_id!==null&&this.dashboard_id!==void 0&&(r.writeFieldBegin("dashboard_id",o.Type.I32,2),r.writeI32(this.dashboard_id),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Hw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_delete_dashboard_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},nL=class{constructor(r){this.session=null,this.dashboard_ids=null,this.groups=null,this.permissions=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.dashboard_ids!==void 0&&r.dashboard_ids!==null&&(this.dashboard_ids=o.copyList(r.dashboard_ids,[null])),r.groups!==void 0&&r.groups!==null&&(this.groups=o.copyList(r.groups,[null])),r.permissions!==void 0&&r.permissions!==null&&(this.permissions=new l.TDashboardPermissions(r.permissions)))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:if(p==o.Type.LIST){this.dashboard_ids=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=r.readI32(),this.dashboard_ids.push(k)}r.readListEnd()}else r.skip(p);break;case 3:if(p==o.Type.LIST){this.groups=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=r.readString(),this.groups.push(k)}r.readListEnd()}else r.skip(p);break;case 4:p==o.Type.STRUCT?(this.permissions=new l.TDashboardPermissions,this.permissions.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_share_dashboards_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.dashboard_ids!==null&&this.dashboard_ids!==void 0){r.writeFieldBegin("dashboard_ids",o.Type.LIST,2),r.writeListBegin(o.Type.I32,this.dashboard_ids.length);for(let y in this.dashboard_ids)this.dashboard_ids.hasOwnProperty(y)&&(y=this.dashboard_ids[y],r.writeI32(y));r.writeListEnd(),r.writeFieldEnd()}if(this.groups!==null&&this.groups!==void 0){r.writeFieldBegin("groups",o.Type.LIST,3),r.writeListBegin(o.Type.STRING,this.groups.length);for(let y in this.groups)this.groups.hasOwnProperty(y)&&(y=this.groups[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.permissions!==null&&this.permissions!==void 0&&(r.writeFieldBegin("permissions",o.Type.STRUCT,4),this.permissions.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Yw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_share_dashboards_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},sL=class{constructor(r){this.session=null,this.dashboard_ids=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.dashboard_ids!==void 0&&r.dashboard_ids!==null&&(this.dashboard_ids=o.copyList(r.dashboard_ids,[null])))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:if(p==o.Type.LIST){this.dashboard_ids=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=r.readI32(),this.dashboard_ids.push(k)}r.readListEnd()}else r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_delete_dashboards_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.dashboard_ids!==null&&this.dashboard_ids!==void 0){r.writeFieldBegin("dashboard_ids",o.Type.LIST,2),r.writeListBegin(o.Type.I32,this.dashboard_ids.length);for(let y in this.dashboard_ids)this.dashboard_ids.hasOwnProperty(y)&&(y=this.dashboard_ids[y],r.writeI32(y));r.writeListEnd(),r.writeFieldEnd()}r.writeFieldStop(),r.writeStructEnd()}},Xw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_delete_dashboards_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},rL=class{constructor(r){this.session=null,this.dashboard_id=null,this.groups=null,this.objects=null,this.permissions=null,this.grant_role=!1,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.dashboard_id!==void 0&&r.dashboard_id!==null&&(this.dashboard_id=r.dashboard_id),r.groups!==void 0&&r.groups!==null&&(this.groups=o.copyList(r.groups,[null])),r.objects!==void 0&&r.objects!==null&&(this.objects=o.copyList(r.objects,[null])),r.permissions!==void 0&&r.permissions!==null&&(this.permissions=new l.TDashboardPermissions(r.permissions)),r.grant_role!==void 0&&r.grant_role!==null&&(this.grant_role=r.grant_role))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.I32?this.dashboard_id=r.readI32():r.skip(p);break;case 3:if(p==o.Type.LIST){this.groups=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=r.readString(),this.groups.push(k)}r.readListEnd()}else r.skip(p);break;case 4:if(p==o.Type.LIST){this.objects=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=r.readString(),this.objects.push(k)}r.readListEnd()}else r.skip(p);break;case 5:p==o.Type.STRUCT?(this.permissions=new l.TDashboardPermissions,this.permissions.read(r)):r.skip(p);break;case 6:p==o.Type.BOOL?this.grant_role=r.readBool():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_share_dashboard_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.dashboard_id!==null&&this.dashboard_id!==void 0&&(r.writeFieldBegin("dashboard_id",o.Type.I32,2),r.writeI32(this.dashboard_id),r.writeFieldEnd()),this.groups!==null&&this.groups!==void 0){r.writeFieldBegin("groups",o.Type.LIST,3),r.writeListBegin(o.Type.STRING,this.groups.length);for(let y in this.groups)this.groups.hasOwnProperty(y)&&(y=this.groups[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}if(this.objects!==null&&this.objects!==void 0){r.writeFieldBegin("objects",o.Type.LIST,4),r.writeListBegin(o.Type.STRING,this.objects.length);for(let y in this.objects)this.objects.hasOwnProperty(y)&&(y=this.objects[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.permissions!==null&&this.permissions!==void 0&&(r.writeFieldBegin("permissions",o.Type.STRUCT,5),this.permissions.write(r),r.writeFieldEnd()),this.grant_role!==null&&this.grant_role!==void 0&&(r.writeFieldBegin("grant_role",o.Type.BOOL,6),r.writeBool(this.grant_role),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Kw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_share_dashboard_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},aL=class{constructor(r){this.session=null,this.dashboard_id=null,this.groups=null,this.objects=null,this.permissions=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.dashboard_id!==void 0&&r.dashboard_id!==null&&(this.dashboard_id=r.dashboard_id),r.groups!==void 0&&r.groups!==null&&(this.groups=o.copyList(r.groups,[null])),r.objects!==void 0&&r.objects!==null&&(this.objects=o.copyList(r.objects,[null])),r.permissions!==void 0&&r.permissions!==null&&(this.permissions=new l.TDashboardPermissions(r.permissions)))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.I32?this.dashboard_id=r.readI32():r.skip(p);break;case 3:if(p==o.Type.LIST){this.groups=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=r.readString(),this.groups.push(k)}r.readListEnd()}else r.skip(p);break;case 4:if(p==o.Type.LIST){this.objects=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=r.readString(),this.objects.push(k)}r.readListEnd()}else r.skip(p);break;case 5:p==o.Type.STRUCT?(this.permissions=new l.TDashboardPermissions,this.permissions.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_unshare_dashboard_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.dashboard_id!==null&&this.dashboard_id!==void 0&&(r.writeFieldBegin("dashboard_id",o.Type.I32,2),r.writeI32(this.dashboard_id),r.writeFieldEnd()),this.groups!==null&&this.groups!==void 0){r.writeFieldBegin("groups",o.Type.LIST,3),r.writeListBegin(o.Type.STRING,this.groups.length);for(let y in this.groups)this.groups.hasOwnProperty(y)&&(y=this.groups[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}if(this.objects!==null&&this.objects!==void 0){r.writeFieldBegin("objects",o.Type.LIST,4),r.writeListBegin(o.Type.STRING,this.objects.length);for(let y in this.objects)this.objects.hasOwnProperty(y)&&(y=this.objects[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.permissions!==null&&this.permissions!==void 0&&(r.writeFieldBegin("permissions",o.Type.STRUCT,5),this.permissions.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Jw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_unshare_dashboard_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},oL=class{constructor(r){this.session=null,this.dashboard_ids=null,this.groups=null,this.permissions=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.dashboard_ids!==void 0&&r.dashboard_ids!==null&&(this.dashboard_ids=o.copyList(r.dashboard_ids,[null])),r.groups!==void 0&&r.groups!==null&&(this.groups=o.copyList(r.groups,[null])),r.permissions!==void 0&&r.permissions!==null&&(this.permissions=new l.TDashboardPermissions(r.permissions)))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:if(p==o.Type.LIST){this.dashboard_ids=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=r.readI32(),this.dashboard_ids.push(k)}r.readListEnd()}else r.skip(p);break;case 3:if(p==o.Type.LIST){this.groups=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=r.readString(),this.groups.push(k)}r.readListEnd()}else r.skip(p);break;case 4:p==o.Type.STRUCT?(this.permissions=new l.TDashboardPermissions,this.permissions.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_unshare_dashboards_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.dashboard_ids!==null&&this.dashboard_ids!==void 0){r.writeFieldBegin("dashboard_ids",o.Type.LIST,2),r.writeListBegin(o.Type.I32,this.dashboard_ids.length);for(let y in this.dashboard_ids)this.dashboard_ids.hasOwnProperty(y)&&(y=this.dashboard_ids[y],r.writeI32(y));r.writeListEnd(),r.writeFieldEnd()}if(this.groups!==null&&this.groups!==void 0){r.writeFieldBegin("groups",o.Type.LIST,3),r.writeListBegin(o.Type.STRING,this.groups.length);for(let y in this.groups)this.groups.hasOwnProperty(y)&&(y=this.groups[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.permissions!==null&&this.permissions!==void 0&&(r.writeFieldBegin("permissions",o.Type.STRUCT,4),this.permissions.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Qw=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_unshare_dashboards_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},lL=class{constructor(r){this.session=null,this.dashboard_id=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.dashboard_id!==void 0&&r.dashboard_id!==null&&(this.dashboard_id=r.dashboard_id))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.I32?this.dashboard_id=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_dashboard_grantees_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.dashboard_id!==null&&this.dashboard_id!==void 0&&(r.writeFieldBegin("dashboard_id",o.Type.I32,2),r.writeI32(this.dashboard_id),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Zw=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=o.copyList(r.success,[l.TDashboardGrantees])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:if(p==o.Type.LIST){this.success=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=new l.TDashboardGrantees,k.read(r),this.success.push(k)}r.readListEnd()}else r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_dashboard_grantees_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",o.Type.LIST,0),r.writeListBegin(o.Type.STRUCT,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},cL=class{constructor(r){this.session=null,this.link=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.link!==void 0&&r.link!==null&&(this.link=r.link))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.STRING?this.link=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_link_view_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.link!==null&&this.link!==void 0&&(r.writeFieldBegin("link",o.Type.STRING,2),r.writeString(this.link),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},eb=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TFrontendView(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:p==o.Type.STRUCT?(this.success=new l.TFrontendView,this.success.read(r)):r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_link_view_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",o.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},dL=class{constructor(r){this.session=null,this.view_state=null,this.view_metadata=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.view_state!==void 0&&r.view_state!==null&&(this.view_state=r.view_state),r.view_metadata!==void 0&&r.view_metadata!==null&&(this.view_metadata=r.view_metadata))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.STRING?this.view_state=r.readString():r.skip(p);break;case 3:p==o.Type.STRING?this.view_metadata=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_create_link_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.view_state!==null&&this.view_state!==void 0&&(r.writeFieldBegin("view_state",o.Type.STRING,2),r.writeString(this.view_state),r.writeFieldEnd()),this.view_metadata!==null&&this.view_metadata!==void 0&&(r.writeFieldBegin("view_metadata",o.Type.STRING,3),r.writeString(this.view_metadata),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},tb=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=r.success),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:p==o.Type.STRING?this.success=r.readString():r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_create_link_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",o.Type.STRING,0),r.writeString(this.success),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},fL=class{constructor(r){this.session=null,this.table_name=null,this.rows=null,this.column_names=[],r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.rows!==void 0&&r.rows!==null&&(this.rows=o.copyList(r.rows,[l.TRow])),r.column_names!==void 0&&r.column_names!==null&&(this.column_names=o.copyList(r.column_names,[null])))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.STRING?this.table_name=r.readString():r.skip(p);break;case 3:if(p==o.Type.LIST){this.rows=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=new l.TRow,k.read(r),this.rows.push(k)}r.readListEnd()}else r.skip(p);break;case 4:if(p==o.Type.LIST){this.column_names=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=r.readString(),this.column_names.push(k)}r.readListEnd()}else r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_load_table_binary_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",o.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.rows!==null&&this.rows!==void 0){r.writeFieldBegin("rows",o.Type.LIST,3),r.writeListBegin(o.Type.STRUCT,this.rows.length);for(let y in this.rows)this.rows.hasOwnProperty(y)&&(y=this.rows[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}if(this.column_names!==null&&this.column_names!==void 0){r.writeFieldBegin("column_names",o.Type.LIST,4),r.writeListBegin(o.Type.STRING,this.column_names.length);for(let y in this.column_names)this.column_names.hasOwnProperty(y)&&(y=this.column_names[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}r.writeFieldStop(),r.writeStructEnd()}},ib=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_load_table_binary_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},uL=class{constructor(r){this.session=null,this.table_name=null,this.cols=null,this.column_names=[],r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.cols!==void 0&&r.cols!==null&&(this.cols=o.copyList(r.cols,[l.TColumn])),r.column_names!==void 0&&r.column_names!==null&&(this.column_names=o.copyList(r.column_names,[null])))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.STRING?this.table_name=r.readString():r.skip(p);break;case 3:if(p==o.Type.LIST){this.cols=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=new l.TColumn,k.read(r),this.cols.push(k)}r.readListEnd()}else r.skip(p);break;case 4:if(p==o.Type.LIST){this.column_names=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=r.readString(),this.column_names.push(k)}r.readListEnd()}else r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_load_table_binary_columnar_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",o.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.cols!==null&&this.cols!==void 0){r.writeFieldBegin("cols",o.Type.LIST,3),r.writeListBegin(o.Type.STRUCT,this.cols.length);for(let y in this.cols)this.cols.hasOwnProperty(y)&&(y=this.cols[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}if(this.column_names!==null&&this.column_names!==void 0){r.writeFieldBegin("column_names",o.Type.LIST,4),r.writeListBegin(o.Type.STRING,this.column_names.length);for(let y in this.column_names)this.column_names.hasOwnProperty(y)&&(y=this.column_names[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}r.writeFieldStop(),r.writeStructEnd()}},nb=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_load_table_binary_columnar_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},hL=class{constructor(r){this.session=null,this.table_name=null,this.cols=null,this.column_names=[],this.assign_render_groups=!0,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.cols!==void 0&&r.cols!==null&&(this.cols=o.copyList(r.cols,[l.TColumn])),r.column_names!==void 0&&r.column_names!==null&&(this.column_names=o.copyList(r.column_names,[null])),r.assign_render_groups!==void 0&&r.assign_render_groups!==null&&(this.assign_render_groups=r.assign_render_groups))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.STRING?this.table_name=r.readString():r.skip(p);break;case 3:if(p==o.Type.LIST){this.cols=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=new l.TColumn,k.read(r),this.cols.push(k)}r.readListEnd()}else r.skip(p);break;case 4:if(p==o.Type.LIST){this.column_names=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=r.readString(),this.column_names.push(k)}r.readListEnd()}else r.skip(p);break;case 5:p==o.Type.BOOL?this.assign_render_groups=r.readBool():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_load_table_binary_columnar_polys_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",o.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.cols!==null&&this.cols!==void 0){r.writeFieldBegin("cols",o.Type.LIST,3),r.writeListBegin(o.Type.STRUCT,this.cols.length);for(let y in this.cols)this.cols.hasOwnProperty(y)&&(y=this.cols[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}if(this.column_names!==null&&this.column_names!==void 0){r.writeFieldBegin("column_names",o.Type.LIST,4),r.writeListBegin(o.Type.STRING,this.column_names.length);for(let y in this.column_names)this.column_names.hasOwnProperty(y)&&(y=this.column_names[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.assign_render_groups!==null&&this.assign_render_groups!==void 0&&(r.writeFieldBegin("assign_render_groups",o.Type.BOOL,5),r.writeBool(this.assign_render_groups),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},sb=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_load_table_binary_columnar_polys_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},pL=class{constructor(r){this.session=null,this.table_name=null,this.arrow_stream=null,this.use_column_names=!1,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.arrow_stream!==void 0&&r.arrow_stream!==null&&(this.arrow_stream=r.arrow_stream),r.use_column_names!==void 0&&r.use_column_names!==null&&(this.use_column_names=r.use_column_names))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.STRING?this.table_name=r.readString():r.skip(p);break;case 3:p==o.Type.STRING?this.arrow_stream=r.readBinary():r.skip(p);break;case 4:p==o.Type.BOOL?this.use_column_names=r.readBool():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_load_table_binary_arrow_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",o.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.arrow_stream!==null&&this.arrow_stream!==void 0&&(r.writeFieldBegin("arrow_stream",o.Type.STRING,3),r.writeBinary(this.arrow_stream),r.writeFieldEnd()),this.use_column_names!==null&&this.use_column_names!==void 0&&(r.writeFieldBegin("use_column_names",o.Type.BOOL,4),r.writeBool(this.use_column_names),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},rb=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_load_table_binary_arrow_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},_L=class{constructor(r){this.session=null,this.table_name=null,this.rows=null,this.column_names=[],r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.rows!==void 0&&r.rows!==null&&(this.rows=o.copyList(r.rows,[l.TStringRow])),r.column_names!==void 0&&r.column_names!==null&&(this.column_names=o.copyList(r.column_names,[null])))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.STRING?this.table_name=r.readString():r.skip(p);break;case 3:if(p==o.Type.LIST){this.rows=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=new l.TStringRow,k.read(r),this.rows.push(k)}r.readListEnd()}else r.skip(p);break;case 4:if(p==o.Type.LIST){this.column_names=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=r.readString(),this.column_names.push(k)}r.readListEnd()}else r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_load_table_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",o.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.rows!==null&&this.rows!==void 0){r.writeFieldBegin("rows",o.Type.LIST,3),r.writeListBegin(o.Type.STRUCT,this.rows.length);for(let y in this.rows)this.rows.hasOwnProperty(y)&&(y=this.rows[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}if(this.column_names!==null&&this.column_names!==void 0){r.writeFieldBegin("column_names",o.Type.LIST,4),r.writeListBegin(o.Type.STRING,this.column_names.length);for(let y in this.column_names)this.column_names.hasOwnProperty(y)&&(y=this.column_names[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}r.writeFieldStop(),r.writeStructEnd()}},ab=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_load_table_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},yL=class{constructor(r){this.session=null,this.file_name=null,this.copy_params=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.file_name!==void 0&&r.file_name!==null&&(this.file_name=r.file_name),r.copy_params!==void 0&&r.copy_params!==null&&(this.copy_params=new l.TCopyParams(r.copy_params)))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.STRING?this.file_name=r.readString():r.skip(p);break;case 3:p==o.Type.STRUCT?(this.copy_params=new l.TCopyParams,this.copy_params.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_detect_column_types_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.file_name!==null&&this.file_name!==void 0&&(r.writeFieldBegin("file_name",o.Type.STRING,2),r.writeString(this.file_name),r.writeFieldEnd()),this.copy_params!==null&&this.copy_params!==void 0&&(r.writeFieldBegin("copy_params",o.Type.STRUCT,3),this.copy_params.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ob=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TDetectResult(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:p==o.Type.STRUCT?(this.success=new l.TDetectResult,this.success.read(r)):r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_detect_column_types_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",o.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},gL=class{constructor(r){this.session=null,this.table_name=null,this.row_desc=null,this.create_params=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.row_desc!==void 0&&r.row_desc!==null&&(this.row_desc=o.copyList(r.row_desc,[l.TColumnType])),r.create_params!==void 0&&r.create_params!==null&&(this.create_params=new l.TCreateParams(r.create_params)))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.STRING?this.table_name=r.readString():r.skip(p);break;case 3:if(p==o.Type.LIST){this.row_desc=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=new l.TColumnType,k.read(r),this.row_desc.push(k)}r.readListEnd()}else r.skip(p);break;case 4:p==o.Type.STRUCT?(this.create_params=new l.TCreateParams,this.create_params.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_create_table_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",o.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.row_desc!==null&&this.row_desc!==void 0){r.writeFieldBegin("row_desc",o.Type.LIST,3),r.writeListBegin(o.Type.STRUCT,this.row_desc.length);for(let y in this.row_desc)this.row_desc.hasOwnProperty(y)&&(y=this.row_desc[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.create_params!==null&&this.create_params!==void 0&&(r.writeFieldBegin("create_params",o.Type.STRUCT,4),this.create_params.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},lb=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_create_table_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},mL=class{constructor(r){this.session=null,this.table_name=null,this.file_name=null,this.copy_params=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.file_name!==void 0&&r.file_name!==null&&(this.file_name=r.file_name),r.copy_params!==void 0&&r.copy_params!==null&&(this.copy_params=new l.TCopyParams(r.copy_params)))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.STRING?this.table_name=r.readString():r.skip(p);break;case 3:p==o.Type.STRING?this.file_name=r.readString():r.skip(p);break;case 4:p==o.Type.STRUCT?(this.copy_params=new l.TCopyParams,this.copy_params.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_import_table_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",o.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.file_name!==null&&this.file_name!==void 0&&(r.writeFieldBegin("file_name",o.Type.STRING,3),r.writeString(this.file_name),r.writeFieldEnd()),this.copy_params!==null&&this.copy_params!==void 0&&(r.writeFieldBegin("copy_params",o.Type.STRUCT,4),this.copy_params.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},cb=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_import_table_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},wL=class{constructor(r){this.session=null,this.table_name=null,this.file_name=null,this.copy_params=null,this.row_desc=null,this.create_params=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_name!==void 0&&r.table_name!==null&&(this.table_name=r.table_name),r.file_name!==void 0&&r.file_name!==null&&(this.file_name=r.file_name),r.copy_params!==void 0&&r.copy_params!==null&&(this.copy_params=new l.TCopyParams(r.copy_params)),r.row_desc!==void 0&&r.row_desc!==null&&(this.row_desc=o.copyList(r.row_desc,[l.TColumnType])),r.create_params!==void 0&&r.create_params!==null&&(this.create_params=new l.TCreateParams(r.create_params)))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.STRING?this.table_name=r.readString():r.skip(p);break;case 3:p==o.Type.STRING?this.file_name=r.readString():r.skip(p);break;case 4:p==o.Type.STRUCT?(this.copy_params=new l.TCopyParams,this.copy_params.read(r)):r.skip(p);break;case 5:if(p==o.Type.LIST){this.row_desc=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=new l.TColumnType,k.read(r),this.row_desc.push(k)}r.readListEnd()}else r.skip(p);break;case 6:p==o.Type.STRUCT?(this.create_params=new l.TCreateParams,this.create_params.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_import_geo_table_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(r.writeFieldBegin("table_name",o.Type.STRING,2),r.writeString(this.table_name),r.writeFieldEnd()),this.file_name!==null&&this.file_name!==void 0&&(r.writeFieldBegin("file_name",o.Type.STRING,3),r.writeString(this.file_name),r.writeFieldEnd()),this.copy_params!==null&&this.copy_params!==void 0&&(r.writeFieldBegin("copy_params",o.Type.STRUCT,4),this.copy_params.write(r),r.writeFieldEnd()),this.row_desc!==null&&this.row_desc!==void 0){r.writeFieldBegin("row_desc",o.Type.LIST,5),r.writeListBegin(o.Type.STRUCT,this.row_desc.length);for(let y in this.row_desc)this.row_desc.hasOwnProperty(y)&&(y=this.row_desc[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.create_params!==null&&this.create_params!==void 0&&(r.writeFieldBegin("create_params",o.Type.STRUCT,6),this.create_params.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},db=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_import_geo_table_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},bL=class{constructor(r){this.session=null,this.import_id=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.import_id!==void 0&&r.import_id!==null&&(this.import_id=r.import_id))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.STRING?this.import_id=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_import_table_status_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.import_id!==null&&this.import_id!==void 0&&(r.writeFieldBegin("import_id",o.Type.STRING,2),r.writeString(this.import_id),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},fb=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TImportStatus(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:p==o.Type.STRUCT?(this.success=new l.TImportStatus,this.success.read(r)):r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_import_table_status_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",o.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},TL=class{constructor(r){this.session=null,this.archive_path=null,this.copy_params=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.archive_path!==void 0&&r.archive_path!==null&&(this.archive_path=r.archive_path),r.copy_params!==void 0&&r.copy_params!==null&&(this.copy_params=new l.TCopyParams(r.copy_params)))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.STRING?this.archive_path=r.readString():r.skip(p);break;case 3:p==o.Type.STRUCT?(this.copy_params=new l.TCopyParams,this.copy_params.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_first_geo_file_in_archive_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.archive_path!==null&&this.archive_path!==void 0&&(r.writeFieldBegin("archive_path",o.Type.STRING,2),r.writeString(this.archive_path),r.writeFieldEnd()),this.copy_params!==null&&this.copy_params!==void 0&&(r.writeFieldBegin("copy_params",o.Type.STRUCT,3),this.copy_params.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ub=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=r.success),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:p==o.Type.STRING?this.success=r.readString():r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_first_geo_file_in_archive_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",o.Type.STRING,0),r.writeString(this.success),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},vL=class{constructor(r){this.session=null,this.archive_path=null,this.copy_params=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.archive_path!==void 0&&r.archive_path!==null&&(this.archive_path=r.archive_path),r.copy_params!==void 0&&r.copy_params!==null&&(this.copy_params=new l.TCopyParams(r.copy_params)))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.STRING?this.archive_path=r.readString():r.skip(p);break;case 3:p==o.Type.STRUCT?(this.copy_params=new l.TCopyParams,this.copy_params.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_all_files_in_archive_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.archive_path!==null&&this.archive_path!==void 0&&(r.writeFieldBegin("archive_path",o.Type.STRING,2),r.writeString(this.archive_path),r.writeFieldEnd()),this.copy_params!==null&&this.copy_params!==void 0&&(r.writeFieldBegin("copy_params",o.Type.STRUCT,3),this.copy_params.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},hb=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=o.copyList(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:if(p==o.Type.LIST){this.success=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=r.readString(),this.success.push(k)}r.readListEnd()}else r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_all_files_in_archive_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",o.Type.LIST,0),r.writeListBegin(o.Type.STRING,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},EL=class{constructor(r){this.session=null,this.file_name=null,this.copy_params=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.file_name!==void 0&&r.file_name!==null&&(this.file_name=r.file_name),r.copy_params!==void 0&&r.copy_params!==null&&(this.copy_params=new l.TCopyParams(r.copy_params)))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.STRING?this.file_name=r.readString():r.skip(p);break;case 3:p==o.Type.STRUCT?(this.copy_params=new l.TCopyParams,this.copy_params.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_layers_in_geo_file_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.file_name!==null&&this.file_name!==void 0&&(r.writeFieldBegin("file_name",o.Type.STRING,2),r.writeString(this.file_name),r.writeFieldEnd()),this.copy_params!==null&&this.copy_params!==void 0&&(r.writeFieldBegin("copy_params",o.Type.STRUCT,3),this.copy_params.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},pb=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=o.copyList(r.success,[l.TGeoFileLayerInfo])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:if(p==o.Type.LIST){this.success=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=new l.TGeoFileLayerInfo,k.read(r),this.success.push(k)}r.readListEnd()}else r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_layers_in_geo_file_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",o.Type.LIST,0),r.writeListBegin(o.Type.STRUCT,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},SL=class{constructor(r){this.session=null,this.query=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.query!==void 0&&r.query!==null&&(this.query=r.query))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.STRING?this.query=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_query_get_outer_fragment_count_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.query!==null&&this.query!==void 0&&(r.writeFieldBegin("query",o.Type.STRING,2),r.writeString(this.query),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},_b=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=r.success),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:p==o.Type.I64?this.success=r.readI64():r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_query_get_outer_fragment_count_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",o.Type.I64,0),r.writeI64(this.success),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},xL=class{constructor(r){this.session=null,this.table_id=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_id!==void 0&&r.table_id!==null&&(this.table_id=r.table_id))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.I32?this.table_id=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_check_table_consistency_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0&&(r.writeFieldBegin("table_id",o.Type.I32,2),r.writeI32(this.table_id),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},yb=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TTableMeta(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:p==o.Type.STRUCT?(this.success=new l.TTableMeta,this.success.read(r)):r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_check_table_consistency_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",o.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},BL=class{constructor(r){this.leaf_session=null,this.parent_session=null,this.query_ra=null,this.start_time_str=null,this.just_explain=null,this.outer_fragment_indices=null,r&&(r.leaf_session!==void 0&&r.leaf_session!==null&&(this.leaf_session=r.leaf_session),r.parent_session!==void 0&&r.parent_session!==null&&(this.parent_session=r.parent_session),r.query_ra!==void 0&&r.query_ra!==null&&(this.query_ra=r.query_ra),r.start_time_str!==void 0&&r.start_time_str!==null&&(this.start_time_str=r.start_time_str),r.just_explain!==void 0&&r.just_explain!==null&&(this.just_explain=r.just_explain),r.outer_fragment_indices!==void 0&&r.outer_fragment_indices!==null&&(this.outer_fragment_indices=o.copyList(r.outer_fragment_indices,[null])))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.leaf_session=r.readString():r.skip(p);break;case 2:p==o.Type.STRING?this.parent_session=r.readString():r.skip(p);break;case 3:p==o.Type.STRING?this.query_ra=r.readString():r.skip(p);break;case 4:p==o.Type.STRING?this.start_time_str=r.readString():r.skip(p);break;case 5:p==o.Type.BOOL?this.just_explain=r.readBool():r.skip(p);break;case 6:if(p==o.Type.LIST){this.outer_fragment_indices=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=r.readI64(),this.outer_fragment_indices.push(k)}r.readListEnd()}else r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_start_query_args"),this.leaf_session!==null&&this.leaf_session!==void 0&&(r.writeFieldBegin("leaf_session",o.Type.STRING,1),r.writeString(this.leaf_session),r.writeFieldEnd()),this.parent_session!==null&&this.parent_session!==void 0&&(r.writeFieldBegin("parent_session",o.Type.STRING,2),r.writeString(this.parent_session),r.writeFieldEnd()),this.query_ra!==null&&this.query_ra!==void 0&&(r.writeFieldBegin("query_ra",o.Type.STRING,3),r.writeString(this.query_ra),r.writeFieldEnd()),this.start_time_str!==null&&this.start_time_str!==void 0&&(r.writeFieldBegin("start_time_str",o.Type.STRING,4),r.writeString(this.start_time_str),r.writeFieldEnd()),this.just_explain!==null&&this.just_explain!==void 0&&(r.writeFieldBegin("just_explain",o.Type.BOOL,5),r.writeBool(this.just_explain),r.writeFieldEnd()),this.outer_fragment_indices!==null&&this.outer_fragment_indices!==void 0){r.writeFieldBegin("outer_fragment_indices",o.Type.LIST,6),r.writeListBegin(o.Type.I64,this.outer_fragment_indices.length);for(let y in this.outer_fragment_indices)this.outer_fragment_indices.hasOwnProperty(y)&&(y=this.outer_fragment_indices[y],r.writeI64(y));r.writeListEnd(),r.writeFieldEnd()}r.writeFieldStop(),r.writeStructEnd()}},gb=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TPendingQuery(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:p==o.Type.STRUCT?(this.success=new l.TPendingQuery,this.success.read(r)):r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_start_query_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",o.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},IL=class{constructor(r){this.pending_query=null,this.subquery_id=null,this.start_time_str=null,r&&(r.pending_query!==void 0&&r.pending_query!==null&&(this.pending_query=new l.TPendingQuery(r.pending_query)),r.subquery_id!==void 0&&r.subquery_id!==null&&(this.subquery_id=r.subquery_id),r.start_time_str!==void 0&&r.start_time_str!==null&&(this.start_time_str=r.start_time_str))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRUCT?(this.pending_query=new l.TPendingQuery,this.pending_query.read(r)):r.skip(p);break;case 2:p==o.Type.I64?this.subquery_id=r.readI64():r.skip(p);break;case 3:p==o.Type.STRING?this.start_time_str=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_execute_query_step_args"),this.pending_query!==null&&this.pending_query!==void 0&&(r.writeFieldBegin("pending_query",o.Type.STRUCT,1),this.pending_query.write(r),r.writeFieldEnd()),this.subquery_id!==null&&this.subquery_id!==void 0&&(r.writeFieldBegin("subquery_id",o.Type.I64,2),r.writeI64(this.subquery_id),r.writeFieldEnd()),this.start_time_str!==null&&this.start_time_str!==void 0&&(r.writeFieldBegin("start_time_str",o.Type.STRING,3),r.writeString(this.start_time_str),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},mb=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TStepResult(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:p==o.Type.STRUCT?(this.success=new l.TStepResult,this.success.read(r)):r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_execute_query_step_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",o.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},kL=class{constructor(r){this.serialized_rows=null,this.row_desc=null,this.query_id=null,this.subquery_id=null,this.is_final_subquery_result=null,r&&(r.serialized_rows!==void 0&&r.serialized_rows!==null&&(this.serialized_rows=new w.TSerializedRows(r.serialized_rows)),r.row_desc!==void 0&&r.row_desc!==null&&(this.row_desc=o.copyList(r.row_desc,[l.TColumnType])),r.query_id!==void 0&&r.query_id!==null&&(this.query_id=r.query_id),r.subquery_id!==void 0&&r.subquery_id!==null&&(this.subquery_id=r.subquery_id),r.is_final_subquery_result!==void 0&&r.is_final_subquery_result!==null&&(this.is_final_subquery_result=r.is_final_subquery_result))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRUCT?(this.serialized_rows=new w.TSerializedRows,this.serialized_rows.read(r)):r.skip(p);break;case 2:if(p==o.Type.LIST){this.row_desc=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=new l.TColumnType,k.read(r),this.row_desc.push(k)}r.readListEnd()}else r.skip(p);break;case 3:p==o.Type.I64?this.query_id=r.readI64():r.skip(p);break;case 4:p==o.Type.I64?this.subquery_id=r.readI64():r.skip(p);break;case 5:p==o.Type.BOOL?this.is_final_subquery_result=r.readBool():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_broadcast_serialized_rows_args"),this.serialized_rows!==null&&this.serialized_rows!==void 0&&(r.writeFieldBegin("serialized_rows",o.Type.STRUCT,1),this.serialized_rows.write(r),r.writeFieldEnd()),this.row_desc!==null&&this.row_desc!==void 0){r.writeFieldBegin("row_desc",o.Type.LIST,2),r.writeListBegin(o.Type.STRUCT,this.row_desc.length);for(let y in this.row_desc)this.row_desc.hasOwnProperty(y)&&(y=this.row_desc[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.query_id!==null&&this.query_id!==void 0&&(r.writeFieldBegin("query_id",o.Type.I64,3),r.writeI64(this.query_id),r.writeFieldEnd()),this.subquery_id!==null&&this.subquery_id!==void 0&&(r.writeFieldBegin("subquery_id",o.Type.I64,4),r.writeI64(this.subquery_id),r.writeFieldEnd()),this.is_final_subquery_result!==null&&this.is_final_subquery_result!==void 0&&(r.writeFieldBegin("is_final_subquery_result",o.Type.BOOL,5),r.writeBool(this.is_final_subquery_result),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},wb=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_broadcast_serialized_rows_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},FL=class{constructor(r){this.session=null,this.widget_id=null,this.node_idx=null,this.vega_json=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.widget_id!==void 0&&r.widget_id!==null&&(this.widget_id=r.widget_id),r.node_idx!==void 0&&r.node_idx!==null&&(this.node_idx=r.node_idx),r.vega_json!==void 0&&r.vega_json!==null&&(this.vega_json=r.vega_json))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.I64?this.widget_id=r.readI64():r.skip(p);break;case 3:p==o.Type.I16?this.node_idx=r.readI16():r.skip(p);break;case 4:p==o.Type.STRING?this.vega_json=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_start_render_query_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.widget_id!==null&&this.widget_id!==void 0&&(r.writeFieldBegin("widget_id",o.Type.I64,2),r.writeI64(this.widget_id),r.writeFieldEnd()),this.node_idx!==null&&this.node_idx!==void 0&&(r.writeFieldBegin("node_idx",o.Type.I16,3),r.writeI16(this.node_idx),r.writeFieldEnd()),this.vega_json!==null&&this.vega_json!==void 0&&(r.writeFieldBegin("vega_json",o.Type.STRING,4),r.writeString(this.vega_json),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},bb=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TPendingRenderQuery(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:p==o.Type.STRUCT?(this.success=new l.TPendingRenderQuery,this.success.read(r)):r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_start_render_query_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",o.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},ML=class{constructor(r){this.pending_render=null,this.merged_data=null,r&&(r.pending_render!==void 0&&r.pending_render!==null&&(this.pending_render=new l.TPendingRenderQuery(r.pending_render)),r.merged_data!==void 0&&r.merged_data!==null&&(this.merged_data=o.copyMap(r.merged_data,[o.copyMap,o.copyMap,o.copyMap,o.copyList,l.TRenderDatum])))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRUCT?(this.pending_render=new l.TPendingRenderQuery,this.pending_render.read(r)):r.skip(p);break;case 2:if(p==o.Type.MAP){this.merged_data={};const _=r.readMapBegin().size||0;for(let E=0;E<_;++E){let k=null,ee=null;k=r.readString(),ee={};const Ge=r.readMapBegin().size||0;for(let _i=0;_i<Ge;++_i){let Vo=null,vx=null;Vo=r.readString(),vx={};const IZ=r.readMapBegin().size||0;for(let YL=0;YL<IZ;++YL){let XL=null,Ex=null;XL=r.readString(),Ex={};const kZ=r.readMapBegin().size||0;for(let KL=0;KL<kZ;++KL){let JL=null,Sx=null;JL=r.readString(),Sx=[];const FZ=r.readListBegin().size||0;for(let QL=0;QL<FZ;++QL){let xx=null;xx=new l.TRenderDatum,xx.read(r),Sx.push(xx)}r.readListEnd(),Ex[JL]=Sx}r.readMapEnd(),vx[XL]=Ex}r.readMapEnd(),ee[Vo]=vx}r.readMapEnd(),this.merged_data[k]=ee}r.readMapEnd()}else r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_execute_next_render_step_args"),this.pending_render!==null&&this.pending_render!==void 0&&(r.writeFieldBegin("pending_render",o.Type.STRUCT,1),this.pending_render.write(r),r.writeFieldEnd()),this.merged_data!==null&&this.merged_data!==void 0){r.writeFieldBegin("merged_data",o.Type.MAP,2),r.writeMapBegin(o.Type.STRING,o.Type.MAP,o.objectLength(this.merged_data));for(let y in this.merged_data)if(this.merged_data.hasOwnProperty(y)){let p=this.merged_data[y];r.writeString(y),r.writeMapBegin(o.Type.STRING,o.Type.MAP,o.objectLength(p));for(let h in p)if(p.hasOwnProperty(h)){let v=p[h];r.writeString(h),r.writeMapBegin(o.Type.STRING,o.Type.MAP,o.objectLength(v));for(let _ in v)if(v.hasOwnProperty(_)){let E=v[_];r.writeString(_),r.writeMapBegin(o.Type.STRING,o.Type.LIST,o.objectLength(E));for(let k in E)if(E.hasOwnProperty(k)){let ee=E[k];r.writeString(k),r.writeListBegin(o.Type.STRUCT,ee.length);for(let we in ee)ee.hasOwnProperty(we)&&(we=ee[we],we.write(r));r.writeListEnd()}r.writeMapEnd()}r.writeMapEnd()}r.writeMapEnd()}r.writeMapEnd(),r.writeFieldEnd()}r.writeFieldStop(),r.writeStructEnd()}},Tb=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TRenderStepResult(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:p==o.Type.STRUCT?(this.success=new l.TRenderStepResult,this.success.read(r)):r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_execute_next_render_step_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",o.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},AL=class{constructor(r){this.session=null,this.insert_data=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.insert_data!==void 0&&r.insert_data!==null&&(this.insert_data=new l.TInsertData(r.insert_data)))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.STRUCT?(this.insert_data=new l.TInsertData,this.insert_data.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_insert_data_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.insert_data!==null&&this.insert_data!==void 0&&(r.writeFieldBegin("insert_data",o.Type.STRUCT,2),this.insert_data.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},vb=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_insert_data_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},OL=class{constructor(r){this.session=null,this.insert_chunks=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.insert_chunks!==void 0&&r.insert_chunks!==null&&(this.insert_chunks=new l.TInsertChunks(r.insert_chunks)))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.STRUCT?(this.insert_chunks=new l.TInsertChunks,this.insert_chunks.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_insert_chunks_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.insert_chunks!==null&&this.insert_chunks!==void 0&&(r.writeFieldBegin("insert_chunks",o.Type.STRUCT,2),this.insert_chunks.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Eb=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_insert_chunks_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},NL=class{constructor(r){this.session=null,this.table_id=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.table_id!==void 0&&r.table_id!==null&&(this.table_id=r.table_id))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.I32?this.table_id=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_checkpoint_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0&&(r.writeFieldBegin("table_id",o.Type.I32,2),r.writeI32(this.table_id),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Sb=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_checkpoint_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},CL=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_roles_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},xb=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=o.copyList(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:if(p==o.Type.LIST){this.success=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=r.readString(),this.success.push(k)}r.readListEnd()}else r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_roles_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",o.Type.LIST,0),r.writeListBegin(o.Type.STRING,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},RL=class{constructor(r){this.session=null,this.roleName=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.roleName!==void 0&&r.roleName!==null&&(this.roleName=r.roleName))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.STRING?this.roleName=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_db_objects_for_grantee_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.roleName!==null&&this.roleName!==void 0&&(r.writeFieldBegin("roleName",o.Type.STRING,2),r.writeString(this.roleName),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Bb=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=o.copyList(r.success,[l.TDBObject])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:if(p==o.Type.LIST){this.success=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=new l.TDBObject,k.read(r),this.success.push(k)}r.readListEnd()}else r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_db_objects_for_grantee_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",o.Type.LIST,0),r.writeListBegin(o.Type.STRUCT,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},LL=class{constructor(r){this.session=null,this.objectName=null,this.type=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.objectName!==void 0&&r.objectName!==null&&(this.objectName=r.objectName),r.type!==void 0&&r.type!==null&&(this.type=r.type))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.STRING?this.objectName=r.readString():r.skip(p);break;case 3:p==o.Type.I32?this.type=r.readI32():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_db_object_privs_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.objectName!==null&&this.objectName!==void 0&&(r.writeFieldBegin("objectName",o.Type.STRING,2),r.writeString(this.objectName),r.writeFieldEnd()),this.type!==null&&this.type!==void 0&&(r.writeFieldBegin("type",o.Type.I32,3),r.writeI32(this.type),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Ib=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=o.copyList(r.success,[l.TDBObject])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:if(p==o.Type.LIST){this.success=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=new l.TDBObject,k.read(r),this.success.push(k)}r.readListEnd()}else r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_db_object_privs_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",o.Type.LIST,0),r.writeListBegin(o.Type.STRUCT,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},DL=class{constructor(r){this.session=null,this.userName=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.userName!==void 0&&r.userName!==null&&(this.userName=r.userName))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.STRING?this.userName=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_all_roles_for_user_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.userName!==null&&this.userName!==void 0&&(r.writeFieldBegin("userName",o.Type.STRING,2),r.writeString(this.userName),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},kb=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=o.copyList(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:if(p==o.Type.LIST){this.success=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=r.readString(),this.success.push(k)}r.readListEnd()}else r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_all_roles_for_user_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",o.Type.LIST,0),r.writeListBegin(o.Type.STRING,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},PL=class{constructor(r){this.session=null,this.userName=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.userName!==void 0&&r.userName!==null&&(this.userName=r.userName))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.STRING?this.userName=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_all_effective_roles_for_user_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.userName!==null&&this.userName!==void 0&&(r.writeFieldBegin("userName",o.Type.STRING,2),r.writeString(this.userName),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Fb=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=o.copyList(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:if(p==o.Type.LIST){this.success=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=r.readString(),this.success.push(k)}r.readListEnd()}else r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_all_effective_roles_for_user_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",o.Type.LIST,0),r.writeListBegin(o.Type.STRING,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},$L=class{constructor(r){this.session=null,this.granteeName=null,this.roleName=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.granteeName!==void 0&&r.granteeName!==null&&(this.granteeName=r.granteeName),r.roleName!==void 0&&r.roleName!==null&&(this.roleName=r.roleName))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.STRING?this.granteeName=r.readString():r.skip(p);break;case 3:p==o.Type.STRING?this.roleName=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_has_role_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.granteeName!==null&&this.granteeName!==void 0&&(r.writeFieldBegin("granteeName",o.Type.STRING,2),r.writeString(this.granteeName),r.writeFieldEnd()),this.roleName!==null&&this.roleName!==void 0&&(r.writeFieldBegin("roleName",o.Type.STRING,3),r.writeString(this.roleName),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Mb=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=r.success),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:p==o.Type.BOOL?this.success=r.readBool():r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_has_role_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",o.Type.BOOL,0),r.writeBool(this.success),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},UL=class{constructor(r){this.session=null,this.granteeName=null,this.ObjectName=null,this.objectType=null,this.permissions=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.granteeName!==void 0&&r.granteeName!==null&&(this.granteeName=r.granteeName),r.ObjectName!==void 0&&r.ObjectName!==null&&(this.ObjectName=r.ObjectName),r.objectType!==void 0&&r.objectType!==null&&(this.objectType=r.objectType),r.permissions!==void 0&&r.permissions!==null&&(this.permissions=new l.TDBObjectPermissions(r.permissions)))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.STRING?this.granteeName=r.readString():r.skip(p);break;case 3:p==o.Type.STRING?this.ObjectName=r.readString():r.skip(p);break;case 4:p==o.Type.I32?this.objectType=r.readI32():r.skip(p);break;case 5:p==o.Type.STRUCT?(this.permissions=new l.TDBObjectPermissions,this.permissions.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_has_object_privilege_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.granteeName!==null&&this.granteeName!==void 0&&(r.writeFieldBegin("granteeName",o.Type.STRING,2),r.writeString(this.granteeName),r.writeFieldEnd()),this.ObjectName!==null&&this.ObjectName!==void 0&&(r.writeFieldBegin("ObjectName",o.Type.STRING,3),r.writeString(this.ObjectName),r.writeFieldEnd()),this.objectType!==null&&this.objectType!==void 0&&(r.writeFieldBegin("objectType",o.Type.I32,4),r.writeI32(this.objectType),r.writeFieldEnd()),this.permissions!==null&&this.permissions!==void 0&&(r.writeFieldBegin("permissions",o.Type.STRUCT,5),this.permissions.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Ab=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=r.success),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:p==o.Type.BOOL?this.success=r.readBool():r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_has_object_privilege_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",o.Type.BOOL,0),r.writeBool(this.success),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},zL=class{constructor(r){this.session=null,this.key=null,this.nonce="",r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.key!==void 0&&r.key!==null&&(this.key=r.key),r.nonce!==void 0&&r.nonce!==null&&(this.nonce=r.nonce))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.STRING?this.key=r.readString():r.skip(p);break;case 3:p==o.Type.STRING?this.nonce=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_license_key_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.key!==null&&this.key!==void 0&&(r.writeFieldBegin("key",o.Type.STRING,2),r.writeString(this.key),r.writeFieldEnd()),this.nonce!==null&&this.nonce!==void 0&&(r.writeFieldBegin("nonce",o.Type.STRING,3),r.writeString(this.nonce),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Ob=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TLicenseInfo(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:p==o.Type.STRUCT?(this.success=new l.TLicenseInfo,this.success.read(r)):r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_set_license_key_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",o.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},jL=class{constructor(r){this.session=null,this.nonce="",r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.nonce!==void 0&&r.nonce!==null&&(this.nonce=r.nonce))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:p==o.Type.STRING?this.nonce=r.readString():r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_license_claims_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.nonce!==null&&this.nonce!==void 0&&(r.writeFieldBegin("nonce",o.Type.STRING,2),r.writeString(this.nonce),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Nb=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=new l.TLicenseInfo(r.success)),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:p==o.Type.STRUCT?(this.success=new l.TLicenseInfo,this.success.read(r)):r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_license_claims_result"),this.success!==null&&this.success!==void 0&&(r.writeFieldBegin("success",o.Type.STRUCT,0),this.success.write(r),r.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},qL=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_device_parameters_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Cb=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=o.copyMap(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:if(p==o.Type.MAP){this.success={};const _=r.readMapBegin().size||0;for(let E=0;E<_;++E){let k=null,ee=null;k=r.readString(),ee=r.readString(),this.success[k]=ee}r.readMapEnd()}else r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_device_parameters_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",o.Type.MAP,0),r.writeMapBegin(o.Type.STRING,o.Type.STRING,o.objectLength(this.success));for(let y in this.success)if(this.success.hasOwnProperty(y)){let p=this.success[y];r.writeString(y),r.writeString(p)}r.writeMapEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},GL=class{constructor(r){this.session=null,this.udfs=null,this.udtfs=null,this.device_ir_map=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.udfs!==void 0&&r.udfs!==null&&(this.udfs=o.copyList(r.udfs,[m.TUserDefinedFunction])),r.udtfs!==void 0&&r.udtfs!==null&&(this.udtfs=o.copyList(r.udtfs,[m.TUserDefinedTableFunction])),r.device_ir_map!==void 0&&r.device_ir_map!==null&&(this.device_ir_map=o.copyMap(r.device_ir_map,[null])))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:if(p==o.Type.LIST){this.udfs=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=new m.TUserDefinedFunction,k.read(r),this.udfs.push(k)}r.readListEnd()}else r.skip(p);break;case 3:if(p==o.Type.LIST){this.udtfs=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=new m.TUserDefinedTableFunction,k.read(r),this.udtfs.push(k)}r.readListEnd()}else r.skip(p);break;case 4:if(p==o.Type.MAP){this.device_ir_map={};const _=r.readMapBegin().size||0;for(let E=0;E<_;++E){let k=null,ee=null;k=r.readString(),ee=r.readString(),this.device_ir_map[k]=ee}r.readMapEnd()}else r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_register_runtime_extension_functions_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.udfs!==null&&this.udfs!==void 0){r.writeFieldBegin("udfs",o.Type.LIST,2),r.writeListBegin(o.Type.STRUCT,this.udfs.length);for(let y in this.udfs)this.udfs.hasOwnProperty(y)&&(y=this.udfs[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}if(this.udtfs!==null&&this.udtfs!==void 0){r.writeFieldBegin("udtfs",o.Type.LIST,3),r.writeListBegin(o.Type.STRUCT,this.udtfs.length);for(let y in this.udtfs)this.udtfs.hasOwnProperty(y)&&(y=this.udtfs[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}if(this.device_ir_map!==null&&this.device_ir_map!==void 0){r.writeFieldBegin("device_ir_map",o.Type.MAP,4),r.writeMapBegin(o.Type.STRING,o.Type.STRING,o.objectLength(this.device_ir_map));for(let y in this.device_ir_map)if(this.device_ir_map.hasOwnProperty(y)){let p=this.device_ir_map[y];r.writeString(y),r.writeString(p)}r.writeMapEnd(),r.writeFieldEnd()}r.writeFieldStop(),r.writeStructEnd()}},Rb=class{constructor(r){if(this.e=null,r instanceof l.TDBException){this.e=r;return}r&&r.e!==void 0&&r.e!==null&&(this.e=r.e)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_register_runtime_extension_functions_result"),this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},VL=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_table_function_names_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Lb=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=o.copyList(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:if(p==o.Type.LIST){this.success=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=r.readString(),this.success.push(k)}r.readListEnd()}else r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_table_function_names_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",o.Type.LIST,0),r.writeListBegin(o.Type.STRING,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},WL=class{constructor(r){this.session=null,r&&r.session!==void 0&&r.session!==null&&(this.session=r.session)}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 0:r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){r.writeStructBegin("Heavy_get_runtime_table_function_names_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},Db=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=o.copyList(r.success,[null])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:if(p==o.Type.LIST){this.success=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=r.readString(),this.success.push(k)}r.readListEnd()}else r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_runtime_table_function_names_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",o.Type.LIST,0),r.writeListBegin(o.Type.STRING,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}},HL=class{constructor(r){this.session=null,this.udtf_names=null,r&&(r.session!==void 0&&r.session!==null&&(this.session=r.session),r.udtf_names!==void 0&&r.udtf_names!==null&&(this.udtf_names=o.copyList(r.udtf_names,[null])))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 1:p==o.Type.STRING?this.session=r.readString():r.skip(p);break;case 2:if(p==o.Type.LIST){this.udtf_names=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=r.readString(),this.udtf_names.push(k)}r.readListEnd()}else r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_table_function_details_args"),this.session!==null&&this.session!==void 0&&(r.writeFieldBegin("session",o.Type.STRING,1),r.writeString(this.session),r.writeFieldEnd()),this.udtf_names!==null&&this.udtf_names!==void 0){r.writeFieldBegin("udtf_names",o.Type.LIST,2),r.writeListBegin(o.Type.STRING,this.udtf_names.length);for(let y in this.udtf_names)this.udtf_names.hasOwnProperty(y)&&(y=this.udtf_names[y],r.writeString(y));r.writeListEnd(),r.writeFieldEnd()}r.writeFieldStop(),r.writeStructEnd()}},Pb=class{constructor(r){if(this.success=null,this.e=null,r instanceof l.TDBException){this.e=r;return}r&&(r.success!==void 0&&r.success!==null&&(this.success=o.copyList(r.success,[m.TUserDefinedTableFunction])),r.e!==void 0&&r.e!==null&&(this.e=r.e))}read(r){for(r.readStructBegin();;){const y=r.readFieldBegin(),p=y.ftype,h=y.fid;if(p==o.Type.STOP)break;switch(h){case 0:if(p==o.Type.LIST){this.success=[];const _=r.readListBegin().size||0;for(let E=0;E<_;++E){let k=null;k=new m.TUserDefinedTableFunction,k.read(r),this.success.push(k)}r.readListEnd()}else r.skip(p);break;case 1:p==o.Type.STRUCT?(this.e=new l.TDBException,this.e.read(r)):r.skip(p);break;default:r.skip(p)}r.readFieldEnd()}r.readStructEnd()}write(r){if(r.writeStructBegin("Heavy_get_table_function_details_result"),this.success!==null&&this.success!==void 0){r.writeFieldBegin("success",o.Type.LIST,0),r.writeListBegin(o.Type.STRUCT,this.success.length);for(let y in this.success)this.success.hasOwnProperty(y)&&(y=this.success[y],y.write(r));r.writeListEnd(),r.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(r.writeFieldBegin("e",o.Type.STRUCT,1),this.e.write(r),r.writeFieldEnd()),r.writeFieldStop(),r.writeStructEnd()}};d.Client=class{constructor(y,p){this.output=y,this.pClass=p,this._seqid=0,this._reqs={}}seqid(){return this._seqid}new_seqid(){return this._seqid+=1}connect(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((_,E)=>{v._reqs[v.seqid()]=(k,ee)=>k?E(k):_(ee),v.send_connect(y,p,h)})}send_connect(y,p,h){const v=new this.pClass(this.output),_={user:y,passwd:p,dbname:h},E=new T(_);try{return v.writeMessageBegin("connect",o.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(k){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),k}}recv_connect(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new b;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("connect failed: unknown result")}krb5_connect(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,_)=>{h._reqs[h.seqid()]=(E,k)=>E?_(E):v(k),h.send_krb5_connect(y,p)})}send_krb5_connect(y,p){const h=new this.pClass(this.output),v={inputToken:y,dbname:p},_=new S(v);try{return h.writeMessageBegin("krb5_connect",o.MessageType.CALL,this.seqid()),_.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_krb5_connect(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new x;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("krb5_connect failed: unknown result")}disconnect(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(_,E)=>_?v(_):h(E),p.send_disconnect(y)})}send_disconnect(y){const p=new this.pClass(this.output),h={session:y},v=new B(h);try{return p.writeMessageBegin("disconnect",o.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(_){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),_}}recv_disconnect(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new F;if(_.read(y),y.readMessageEnd(),_.e!==null)return v(_.e);v(null)}switch_database(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,_)=>{h._reqs[h.seqid()]=(E,k)=>E?_(E):v(k),h.send_switch_database(y,p)})}send_switch_database(y,p){const h=new this.pClass(this.output),v={session:y,dbname:p},_=new I(v);try{return h.writeMessageBegin("switch_database",o.MessageType.CALL,this.seqid()),_.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_switch_database(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new A;if(_.read(y),y.readMessageEnd(),_.e!==null)return v(_.e);v(null)}clone_session(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(_,E)=>_?v(_):h(E),p.send_clone_session(y)})}send_clone_session(y){const p=new this.pClass(this.output),h={session:y},v=new O(h);try{return p.writeMessageBegin("clone_session",o.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(_){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),_}}recv_clone_session(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new R;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("clone_session failed: unknown result")}get_server_status(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(_,E)=>_?v(_):h(E),p.send_get_server_status(y)})}send_get_server_status(y){const p=new this.pClass(this.output),h={session:y},v=new D(h);try{return p.writeMessageBegin("get_server_status",o.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(_){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),_}}recv_get_server_status(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new P;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("get_server_status failed: unknown result")}get_status(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(_,E)=>_?v(_):h(E),p.send_get_status(y)})}send_get_status(y){const p=new this.pClass(this.output),h={session:y},v=new U(h);try{return p.writeMessageBegin("get_status",o.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(_){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),_}}recv_get_status(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Y;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("get_status failed: unknown result")}get_hardware_info(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(_,E)=>_?v(_):h(E),p.send_get_hardware_info(y)})}send_get_hardware_info(y){const p=new this.pClass(this.output),h={session:y},v=new z(h);try{return p.writeMessageBegin("get_hardware_info",o.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(_){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),_}}recv_get_hardware_info(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new W;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("get_hardware_info failed: unknown result")}get_tables(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(_,E)=>_?v(_):h(E),p.send_get_tables(y)})}send_get_tables(y){const p=new this.pClass(this.output),h={session:y},v=new V(h);try{return p.writeMessageBegin("get_tables",o.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(_){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),_}}recv_get_tables(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new H;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("get_tables failed: unknown result")}get_tables_for_database(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,_)=>{h._reqs[h.seqid()]=(E,k)=>E?_(E):v(k),h.send_get_tables_for_database(y,p)})}send_get_tables_for_database(y,p){const h=new this.pClass(this.output),v={session:y,database_name:p},_=new J(v);try{return h.writeMessageBegin("get_tables_for_database",o.MessageType.CALL,this.seqid()),_.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_get_tables_for_database(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new G;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("get_tables_for_database failed: unknown result")}get_physical_tables(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(_,E)=>_?v(_):h(E),p.send_get_physical_tables(y)})}send_get_physical_tables(y){const p=new this.pClass(this.output),h={session:y},v=new le(h);try{return p.writeMessageBegin("get_physical_tables",o.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(_){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),_}}recv_get_physical_tables(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new pe;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("get_physical_tables failed: unknown result")}get_views(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(_,E)=>_?v(_):h(E),p.send_get_views(y)})}send_get_views(y){const p=new this.pClass(this.output),h={session:y},v=new ne(h);try{return p.writeMessageBegin("get_views",o.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(_){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),_}}recv_get_views(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Ae;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("get_views failed: unknown result")}get_tables_meta(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(_,E)=>_?v(_):h(E),p.send_get_tables_meta(y)})}send_get_tables_meta(y){const p=new this.pClass(this.output),h={session:y},v=new fe(h);try{return p.writeMessageBegin("get_tables_meta",o.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(_){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),_}}recv_get_tables_meta(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Fe;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("get_tables_meta failed: unknown result")}get_table_details(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,_)=>{h._reqs[h.seqid()]=(E,k)=>E?_(E):v(k),h.send_get_table_details(y,p)})}send_get_table_details(y,p){const h=new this.pClass(this.output),v={session:y,table_name:p},_=new je(v);try{return h.writeMessageBegin("get_table_details",o.MessageType.CALL,this.seqid()),_.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_get_table_details(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new _t;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("get_table_details failed: unknown result")}get_table_details_for_database(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((_,E)=>{v._reqs[v.seqid()]=(k,ee)=>k?E(k):_(ee),v.send_get_table_details_for_database(y,p,h)})}send_get_table_details_for_database(y,p,h){const v=new this.pClass(this.output),_={session:y,table_name:p,database_name:h},E=new Ct(_);try{return v.writeMessageBegin("get_table_details_for_database",o.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(k){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),k}}recv_get_table_details_for_database(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new zt;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("get_table_details_for_database failed: unknown result")}get_internal_table_details(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((_,E)=>{v._reqs[v.seqid()]=(k,ee)=>k?E(k):_(ee),v.send_get_internal_table_details(y,p,h)})}send_get_internal_table_details(y,p,h){const v=new this.pClass(this.output),_={session:y,table_name:p,include_system_columns:h},E=new _e(_);try{return v.writeMessageBegin("get_internal_table_details",o.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(k){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),k}}recv_get_internal_table_details(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new q;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("get_internal_table_details failed: unknown result")}get_internal_table_details_for_database(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((_,E)=>{v._reqs[v.seqid()]=(k,ee)=>k?E(k):_(ee),v.send_get_internal_table_details_for_database(y,p,h)})}send_get_internal_table_details_for_database(y,p,h){const v=new this.pClass(this.output),_={session:y,table_name:p,database_name:h},E=new j(_);try{return v.writeMessageBegin("get_internal_table_details_for_database",o.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(k){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),k}}recv_get_internal_table_details_for_database(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new L;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("get_internal_table_details_for_database failed: unknown result")}get_users(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(_,E)=>_?v(_):h(E),p.send_get_users(y)})}send_get_users(y){const p=new this.pClass(this.output),h={session:y},v=new K(h);try{return p.writeMessageBegin("get_users",o.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(_){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),_}}recv_get_users(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Z;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("get_users failed: unknown result")}get_databases(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(_,E)=>_?v(_):h(E),p.send_get_databases(y)})}send_get_databases(y){const p=new this.pClass(this.output),h={session:y},v=new oe(h);try{return p.writeMessageBegin("get_databases",o.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(_){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),_}}recv_get_databases(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new re;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("get_databases failed: unknown result")}get_version(){this._seqid=this.new_seqid();const y=this;return new Promise((p,h)=>{y._reqs[y.seqid()]=(v,_)=>v?h(v):p(_),y.send_get_version()})}send_get_version(){const y=new this.pClass(this.output),p=new ge;try{return y.writeMessageBegin("get_version",o.MessageType.CALL,this.seqid()),p.write(y),y.writeMessageEnd(),this.output.flush()}catch(h){throw delete this._reqs[this.seqid()],typeof y.reset=="function"&&y.reset(),h}}recv_get_version(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Se;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("get_version failed: unknown result")}start_heap_profile(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(_,E)=>_?v(_):h(E),p.send_start_heap_profile(y)})}send_start_heap_profile(y){const p=new this.pClass(this.output),h={session:y},v=new He(h);try{return p.writeMessageBegin("start_heap_profile",o.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(_){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),_}}recv_start_heap_profile(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new pi;if(_.read(y),y.readMessageEnd(),_.e!==null)return v(_.e);v(null)}stop_heap_profile(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(_,E)=>_?v(_):h(E),p.send_stop_heap_profile(y)})}send_stop_heap_profile(y){const p=new this.pClass(this.output),h={session:y},v=new Bi(h);try{return p.writeMessageBegin("stop_heap_profile",o.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(_){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),_}}recv_stop_heap_profile(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Qt;if(_.read(y),y.readMessageEnd(),_.e!==null)return v(_.e);v(null)}get_heap_profile(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(_,E)=>_?v(_):h(E),p.send_get_heap_profile(y)})}send_get_heap_profile(y){const p=new this.pClass(this.output),h={session:y},v=new $s(h);try{return p.writeMessageBegin("get_heap_profile",o.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(_){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),_}}recv_get_heap_profile(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new lr;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("get_heap_profile failed: unknown result")}get_memory(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,_)=>{h._reqs[h.seqid()]=(E,k)=>E?_(E):v(k),h.send_get_memory(y,p)})}send_get_memory(y,p){const h=new this.pClass(this.output),v={session:y,memory_level:p},_=new cr(v);try{return h.writeMessageBegin("get_memory",o.MessageType.CALL,this.seqid()),_.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_get_memory(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new he;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("get_memory failed: unknown result")}clear_cpu_memory(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(_,E)=>_?v(_):h(E),p.send_clear_cpu_memory(y)})}send_clear_cpu_memory(y){const p=new this.pClass(this.output),h={session:y},v=new as(h);try{return p.writeMessageBegin("clear_cpu_memory",o.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(_){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),_}}recv_clear_cpu_memory(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Pn;if(_.read(y),y.readMessageEnd(),_.e!==null)return v(_.e);v(null)}clear_gpu_memory(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(_,E)=>_?v(_):h(E),p.send_clear_gpu_memory(y)})}send_clear_gpu_memory(y){const p=new this.pClass(this.output),h={session:y},v=new ka(h);try{return p.writeMessageBegin("clear_gpu_memory",o.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(_){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),_}}recv_clear_gpu_memory(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Ki;if(_.read(y),y.readMessageEnd(),_.e!==null)return v(_.e);v(null)}set_cur_session(y,p,h,v,_){this._seqid=this.new_seqid();const E=this;return new Promise((k,ee)=>{E._reqs[E.seqid()]=(we,Ge)=>we?ee(we):k(Ge),E.send_set_cur_session(y,p,h,v,_)})}send_set_cur_session(y,p,h,v,_){const E=new this.pClass(this.output),k={parent_session:y,leaf_session:p,start_time_str:h,label:v,for_running_query_kernel:_},ee=new Zl(k);try{return E.writeMessageBegin("set_cur_session",o.MessageType.CALL,this.seqid()),ee.write(E),E.writeMessageEnd(),this.output.flush()}catch(we){throw delete this._reqs[this.seqid()],typeof E.reset=="function"&&E.reset(),we}}recv_set_cur_session(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new ec;if(_.read(y),y.readMessageEnd(),_.e!==null)return v(_.e);v(null)}invalidate_cur_session(y,p,h,v,_){this._seqid=this.new_seqid();const E=this;return new Promise((k,ee)=>{E._reqs[E.seqid()]=(we,Ge)=>we?ee(we):k(Ge),E.send_invalidate_cur_session(y,p,h,v,_)})}send_invalidate_cur_session(y,p,h,v,_){const E=new this.pClass(this.output),k={parent_session:y,leaf_session:p,start_time_str:h,label:v,for_running_query_kernel:_},ee=new Us(k);try{return E.writeMessageBegin("invalidate_cur_session",o.MessageType.CALL,this.seqid()),ee.write(E),E.writeMessageEnd(),this.output.flush()}catch(we){throw delete this._reqs[this.seqid()],typeof E.reset=="function"&&E.reset(),we}}recv_invalidate_cur_session(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new tc;if(_.read(y),y.readMessageEnd(),_.e!==null)return v(_.e);v(null)}set_table_epoch(y,p,h,v){this._seqid=this.new_seqid();const _=this;return new Promise((E,k)=>{_._reqs[_.seqid()]=(ee,we)=>ee?k(ee):E(we),_.send_set_table_epoch(y,p,h,v)})}send_set_table_epoch(y,p,h,v){const _=new this.pClass(this.output),E={session:y,db_id:p,table_id:h,new_epoch:v},k=new C(E);try{return _.writeMessageBegin("set_table_epoch",o.MessageType.CALL,this.seqid()),k.write(_),_.writeMessageEnd(),this.output.flush()}catch(ee){throw delete this._reqs[this.seqid()],typeof _.reset=="function"&&_.reset(),ee}}recv_set_table_epoch(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new M;if(_.read(y),y.readMessageEnd(),_.e!==null)return v(_.e);v(null)}set_table_epoch_by_name(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((_,E)=>{v._reqs[v.seqid()]=(k,ee)=>k?E(k):_(ee),v.send_set_table_epoch_by_name(y,p,h)})}send_set_table_epoch_by_name(y,p,h){const v=new this.pClass(this.output),_={session:y,table_name:p,new_epoch:h},E=new N(_);try{return v.writeMessageBegin("set_table_epoch_by_name",o.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(k){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),k}}recv_set_table_epoch_by_name(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new $;if(_.read(y),y.readMessageEnd(),_.e!==null)return v(_.e);v(null)}get_table_epoch(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((_,E)=>{v._reqs[v.seqid()]=(k,ee)=>k?E(k):_(ee),v.send_get_table_epoch(y,p,h)})}send_get_table_epoch(y,p,h){const v=new this.pClass(this.output),_={session:y,db_id:p,table_id:h},E=new X(_);try{return v.writeMessageBegin("get_table_epoch",o.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(k){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),k}}recv_get_table_epoch(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new te;return _.read(y),y.readMessageEnd(),_.success!==null?v(null,_.success):v("get_table_epoch failed: unknown result")}get_table_epoch_by_name(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,_)=>{h._reqs[h.seqid()]=(E,k)=>E?_(E):v(k),h.send_get_table_epoch_by_name(y,p)})}send_get_table_epoch_by_name(y,p){const h=new this.pClass(this.output),v={session:y,table_name:p},_=new se(v);try{return h.writeMessageBegin("get_table_epoch_by_name",o.MessageType.CALL,this.seqid()),_.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_get_table_epoch_by_name(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Oe;return _.read(y),y.readMessageEnd(),_.success!==null?v(null,_.success):v("get_table_epoch_by_name failed: unknown result")}get_table_epochs(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((_,E)=>{v._reqs[v.seqid()]=(k,ee)=>k?E(k):_(ee),v.send_get_table_epochs(y,p,h)})}send_get_table_epochs(y,p,h){const v=new this.pClass(this.output),_={session:y,db_id:p,table_id:h},E=new $e(_);try{return v.writeMessageBegin("get_table_epochs",o.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(k){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),k}}recv_get_table_epochs(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Ue;return _.read(y),y.readMessageEnd(),_.success!==null?v(null,_.success):v("get_table_epochs failed: unknown result")}set_table_epochs(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((_,E)=>{v._reqs[v.seqid()]=(k,ee)=>k?E(k):_(ee),v.send_set_table_epochs(y,p,h)})}send_set_table_epochs(y,p,h){const v=new this.pClass(this.output),_={session:y,db_id:p,table_epochs:h},E=new Ve(_);try{return v.writeMessageBegin("set_table_epochs",o.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(k){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),k}}recv_set_table_epochs(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}new We().read(y),y.readMessageEnd(),v(null)}get_session_info(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(_,E)=>_?v(_):h(E),p.send_get_session_info(y)})}send_get_session_info(y){const p=new this.pClass(this.output),h={session:y},v=new ic(h);try{return p.writeMessageBegin("get_session_info",o.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(_){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),_}}recv_get_session_info(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Bw;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("get_session_info failed: unknown result")}get_queries_info(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(_,E)=>_?v(_):h(E),p.send_get_queries_info(y)})}send_get_queries_info(y){const p=new this.pClass(this.output),h={session:y},v=new L3(h);try{return p.writeMessageBegin("get_queries_info",o.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(_){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),_}}recv_get_queries_info(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Iw;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("get_queries_info failed: unknown result")}set_leaf_info(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,_)=>{h._reqs[h.seqid()]=(E,k)=>E?_(E):v(k),h.send_set_leaf_info(y,p)})}send_set_leaf_info(y,p){const h=new this.pClass(this.output),v={session:y,leaf_info:p},_=new D3(v);try{return h.writeMessageBegin("set_leaf_info",o.MessageType.CALL,this.seqid()),_.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_set_leaf_info(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new kw;if(_.read(y),y.readMessageEnd(),_.e!==null)return v(_.e);v(null)}sql_execute(y,p,h,v,_,E){this._seqid=this.new_seqid();const k=this;return new Promise((ee,we)=>{k._reqs[k.seqid()]=(Ge,_i)=>Ge?we(Ge):ee(_i),k.send_sql_execute(y,p,h,v,_,E)})}send_sql_execute(y,p,h,v,_,E){const k=new this.pClass(this.output),ee={session:y,query:p,column_format:h,nonce:v,first_n:_,at_most_n:E},we=new P3(ee);try{return k.writeMessageBegin("sql_execute",o.MessageType.CALL,this.seqid()),we.write(k),k.writeMessageEnd(),this.output.flush()}catch(Ge){throw delete this._reqs[this.seqid()],typeof k.reset=="function"&&k.reset(),Ge}}recv_sql_execute(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Fw;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("sql_execute failed: unknown result")}sql_execute_df(y,p,h,v,_,E){this._seqid=this.new_seqid();const k=this;return new Promise((ee,we)=>{k._reqs[k.seqid()]=(Ge,_i)=>Ge?we(Ge):ee(_i),k.send_sql_execute_df(y,p,h,v,_,E)})}send_sql_execute_df(y,p,h,v,_,E){const k=new this.pClass(this.output),ee={session:y,query:p,device_type:h,device_id:v,first_n:_,transport_method:E},we=new $3(ee);try{return k.writeMessageBegin("sql_execute_df",o.MessageType.CALL,this.seqid()),we.write(k),k.writeMessageEnd(),this.output.flush()}catch(Ge){throw delete this._reqs[this.seqid()],typeof k.reset=="function"&&k.reset(),Ge}}recv_sql_execute_df(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Mw;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("sql_execute_df failed: unknown result")}sql_execute_gdf(y,p,h,v){this._seqid=this.new_seqid();const _=this;return new Promise((E,k)=>{_._reqs[_.seqid()]=(ee,we)=>ee?k(ee):E(we),_.send_sql_execute_gdf(y,p,h,v)})}send_sql_execute_gdf(y,p,h,v){const _=new this.pClass(this.output),E={session:y,query:p,device_id:h,first_n:v},k=new U3(E);try{return _.writeMessageBegin("sql_execute_gdf",o.MessageType.CALL,this.seqid()),k.write(_),_.writeMessageEnd(),this.output.flush()}catch(ee){throw delete this._reqs[this.seqid()],typeof _.reset=="function"&&_.reset(),ee}}recv_sql_execute_gdf(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Aw;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("sql_execute_gdf failed: unknown result")}deallocate_df(y,p,h,v){this._seqid=this.new_seqid();const _=this;return new Promise((E,k)=>{_._reqs[_.seqid()]=(ee,we)=>ee?k(ee):E(we),_.send_deallocate_df(y,p,h,v)})}send_deallocate_df(y,p,h,v){const _=new this.pClass(this.output),E={session:y,df:p,device_type:h,device_id:v},k=new z3(E);try{return _.writeMessageBegin("deallocate_df",o.MessageType.CALL,this.seqid()),k.write(_),_.writeMessageEnd(),this.output.flush()}catch(ee){throw delete this._reqs[this.seqid()],typeof _.reset=="function"&&_.reset(),ee}}recv_deallocate_df(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Ow;if(_.read(y),y.readMessageEnd(),_.e!==null)return v(_.e);v(null)}interrupt(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,_)=>{h._reqs[h.seqid()]=(E,k)=>E?_(E):v(k),h.send_interrupt(y,p)})}send_interrupt(y,p){const h=new this.pClass(this.output),v={query_session:y,interrupt_session:p},_=new j3(v);try{return h.writeMessageBegin("interrupt",o.MessageType.CALL,this.seqid()),_.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_interrupt(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Nw;if(_.read(y),y.readMessageEnd(),_.e!==null)return v(_.e);v(null)}sql_validate(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,_)=>{h._reqs[h.seqid()]=(E,k)=>E?_(E):v(k),h.send_sql_validate(y,p)})}send_sql_validate(y,p){const h=new this.pClass(this.output),v={session:y,query:p},_=new q3(v);try{return h.writeMessageBegin("sql_validate",o.MessageType.CALL,this.seqid()),_.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_sql_validate(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Cw;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("sql_validate failed: unknown result")}get_completion_hints(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((_,E)=>{v._reqs[v.seqid()]=(k,ee)=>k?E(k):_(ee),v.send_get_completion_hints(y,p,h)})}send_get_completion_hints(y,p,h){const v=new this.pClass(this.output),_={session:y,sql:p,cursor:h},E=new G3(_);try{return v.writeMessageBegin("get_completion_hints",o.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(k){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),k}}recv_get_completion_hints(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Rw;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("get_completion_hints failed: unknown result")}set_execution_mode(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,_)=>{h._reqs[h.seqid()]=(E,k)=>E?_(E):v(k),h.send_set_execution_mode(y,p)})}send_set_execution_mode(y,p){const h=new this.pClass(this.output),v={session:y,mode:p},_=new V3(v);try{return h.writeMessageBegin("set_execution_mode",o.MessageType.CALL,this.seqid()),_.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_set_execution_mode(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Lw;if(_.read(y),y.readMessageEnd(),_.e!==null)return v(_.e);v(null)}render_vega(y,p,h,v,_){this._seqid=this.new_seqid();const E=this;return new Promise((k,ee)=>{E._reqs[E.seqid()]=(we,Ge)=>we?ee(we):k(Ge),E.send_render_vega(y,p,h,v,_)})}send_render_vega(y,p,h,v,_){const E=new this.pClass(this.output),k={session:y,widget_id:p,vega_json:h,compression_level:v,nonce:_},ee=new W3(k);try{return E.writeMessageBegin("render_vega",o.MessageType.CALL,this.seqid()),ee.write(E),E.writeMessageEnd(),this.output.flush()}catch(we){throw delete this._reqs[this.seqid()],typeof E.reset=="function"&&E.reset(),we}}recv_render_vega(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Dw;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("render_vega failed: unknown result")}get_result_row_for_pixel(y,p,h,v,_,E,k){this._seqid=this.new_seqid();const ee=this;return new Promise((we,Ge)=>{ee._reqs[ee.seqid()]=(_i,Vo)=>_i?Ge(_i):we(Vo),ee.send_get_result_row_for_pixel(y,p,h,v,_,E,k)})}send_get_result_row_for_pixel(y,p,h,v,_,E,k){const ee=new this.pClass(this.output),we={session:y,widget_id:p,pixel:h,table_col_names:v,column_format:_,pixelRadius:E,nonce:k},Ge=new H3(we);try{return ee.writeMessageBegin("get_result_row_for_pixel",o.MessageType.CALL,this.seqid()),Ge.write(ee),ee.writeMessageEnd(),this.output.flush()}catch(_i){throw delete this._reqs[this.seqid()],typeof ee.reset=="function"&&ee.reset(),_i}}recv_get_result_row_for_pixel(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Pw;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("get_result_row_for_pixel failed: unknown result")}create_custom_expression(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,_)=>{h._reqs[h.seqid()]=(E,k)=>E?_(E):v(k),h.send_create_custom_expression(y,p)})}send_create_custom_expression(y,p){const h=new this.pClass(this.output),v={session:y,custom_expression:p},_=new Y3(v);try{return h.writeMessageBegin("create_custom_expression",o.MessageType.CALL,this.seqid()),_.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_create_custom_expression(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new $w;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("create_custom_expression failed: unknown result")}get_custom_expressions(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(_,E)=>_?v(_):h(E),p.send_get_custom_expressions(y)})}send_get_custom_expressions(y){const p=new this.pClass(this.output),h={session:y},v=new X3(h);try{return p.writeMessageBegin("get_custom_expressions",o.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(_){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),_}}recv_get_custom_expressions(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Uw;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("get_custom_expressions failed: unknown result")}update_custom_expression(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((_,E)=>{v._reqs[v.seqid()]=(k,ee)=>k?E(k):_(ee),v.send_update_custom_expression(y,p,h)})}send_update_custom_expression(y,p,h){const v=new this.pClass(this.output),_={session:y,id:p,expression_json:h},E=new K3(_);try{return v.writeMessageBegin("update_custom_expression",o.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(k){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),k}}recv_update_custom_expression(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new zw;if(_.read(y),y.readMessageEnd(),_.e!==null)return v(_.e);v(null)}delete_custom_expressions(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((_,E)=>{v._reqs[v.seqid()]=(k,ee)=>k?E(k):_(ee),v.send_delete_custom_expressions(y,p,h)})}send_delete_custom_expressions(y,p,h){const v=new this.pClass(this.output),_={session:y,custom_expression_ids:p,do_soft_delete:h},E=new J3(_);try{return v.writeMessageBegin("delete_custom_expressions",o.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(k){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),k}}recv_delete_custom_expressions(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new jw;if(_.read(y),y.readMessageEnd(),_.e!==null)return v(_.e);v(null)}get_dashboard(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,_)=>{h._reqs[h.seqid()]=(E,k)=>E?_(E):v(k),h.send_get_dashboard(y,p)})}send_get_dashboard(y,p){const h=new this.pClass(this.output),v={session:y,dashboard_id:p},_=new Q3(v);try{return h.writeMessageBegin("get_dashboard",o.MessageType.CALL,this.seqid()),_.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_get_dashboard(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new qw;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("get_dashboard failed: unknown result")}get_dashboards(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(_,E)=>_?v(_):h(E),p.send_get_dashboards(y)})}send_get_dashboards(y){const p=new this.pClass(this.output),h={session:y},v=new Z3(h);try{return p.writeMessageBegin("get_dashboards",o.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(_){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),_}}recv_get_dashboards(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Gw;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("get_dashboards failed: unknown result")}create_dashboard(y,p,h,v,_){this._seqid=this.new_seqid();const E=this;return new Promise((k,ee)=>{E._reqs[E.seqid()]=(we,Ge)=>we?ee(we):k(Ge),E.send_create_dashboard(y,p,h,v,_)})}send_create_dashboard(y,p,h,v,_){const E=new this.pClass(this.output),k={session:y,dashboard_name:p,dashboard_state:h,image_hash:v,dashboard_metadata:_},ee=new eL(k);try{return E.writeMessageBegin("create_dashboard",o.MessageType.CALL,this.seqid()),ee.write(E),E.writeMessageEnd(),this.output.flush()}catch(we){throw delete this._reqs[this.seqid()],typeof E.reset=="function"&&E.reset(),we}}recv_create_dashboard(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Vw;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("create_dashboard failed: unknown result")}replace_dashboard(y,p,h,v,_,E,k){this._seqid=this.new_seqid();const ee=this;return new Promise((we,Ge)=>{ee._reqs[ee.seqid()]=(_i,Vo)=>_i?Ge(_i):we(Vo),ee.send_replace_dashboard(y,p,h,v,_,E,k)})}send_replace_dashboard(y,p,h,v,_,E,k){const ee=new this.pClass(this.output),we={session:y,dashboard_id:p,dashboard_name:h,dashboard_owner:v,dashboard_state:_,image_hash:E,dashboard_metadata:k},Ge=new tL(we);try{return ee.writeMessageBegin("replace_dashboard",o.MessageType.CALL,this.seqid()),Ge.write(ee),ee.writeMessageEnd(),this.output.flush()}catch(_i){throw delete this._reqs[this.seqid()],typeof ee.reset=="function"&&ee.reset(),_i}}recv_replace_dashboard(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Ww;if(_.read(y),y.readMessageEnd(),_.e!==null)return v(_.e);v(null)}delete_dashboard(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,_)=>{h._reqs[h.seqid()]=(E,k)=>E?_(E):v(k),h.send_delete_dashboard(y,p)})}send_delete_dashboard(y,p){const h=new this.pClass(this.output),v={session:y,dashboard_id:p},_=new iL(v);try{return h.writeMessageBegin("delete_dashboard",o.MessageType.CALL,this.seqid()),_.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_delete_dashboard(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Hw;if(_.read(y),y.readMessageEnd(),_.e!==null)return v(_.e);v(null)}share_dashboards(y,p,h,v){this._seqid=this.new_seqid();const _=this;return new Promise((E,k)=>{_._reqs[_.seqid()]=(ee,we)=>ee?k(ee):E(we),_.send_share_dashboards(y,p,h,v)})}send_share_dashboards(y,p,h,v){const _=new this.pClass(this.output),E={session:y,dashboard_ids:p,groups:h,permissions:v},k=new nL(E);try{return _.writeMessageBegin("share_dashboards",o.MessageType.CALL,this.seqid()),k.write(_),_.writeMessageEnd(),this.output.flush()}catch(ee){throw delete this._reqs[this.seqid()],typeof _.reset=="function"&&_.reset(),ee}}recv_share_dashboards(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Yw;if(_.read(y),y.readMessageEnd(),_.e!==null)return v(_.e);v(null)}delete_dashboards(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,_)=>{h._reqs[h.seqid()]=(E,k)=>E?_(E):v(k),h.send_delete_dashboards(y,p)})}send_delete_dashboards(y,p){const h=new this.pClass(this.output),v={session:y,dashboard_ids:p},_=new sL(v);try{return h.writeMessageBegin("delete_dashboards",o.MessageType.CALL,this.seqid()),_.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_delete_dashboards(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Xw;if(_.read(y),y.readMessageEnd(),_.e!==null)return v(_.e);v(null)}share_dashboard(y,p,h,v,_,E){this._seqid=this.new_seqid();const k=this;return new Promise((ee,we)=>{k._reqs[k.seqid()]=(Ge,_i)=>Ge?we(Ge):ee(_i),k.send_share_dashboard(y,p,h,v,_,E)})}send_share_dashboard(y,p,h,v,_,E){const k=new this.pClass(this.output),ee={session:y,dashboard_id:p,groups:h,objects:v,permissions:_,grant_role:E},we=new rL(ee);try{return k.writeMessageBegin("share_dashboard",o.MessageType.CALL,this.seqid()),we.write(k),k.writeMessageEnd(),this.output.flush()}catch(Ge){throw delete this._reqs[this.seqid()],typeof k.reset=="function"&&k.reset(),Ge}}recv_share_dashboard(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Kw;if(_.read(y),y.readMessageEnd(),_.e!==null)return v(_.e);v(null)}unshare_dashboard(y,p,h,v,_){this._seqid=this.new_seqid();const E=this;return new Promise((k,ee)=>{E._reqs[E.seqid()]=(we,Ge)=>we?ee(we):k(Ge),E.send_unshare_dashboard(y,p,h,v,_)})}send_unshare_dashboard(y,p,h,v,_){const E=new this.pClass(this.output),k={session:y,dashboard_id:p,groups:h,objects:v,permissions:_},ee=new aL(k);try{return E.writeMessageBegin("unshare_dashboard",o.MessageType.CALL,this.seqid()),ee.write(E),E.writeMessageEnd(),this.output.flush()}catch(we){throw delete this._reqs[this.seqid()],typeof E.reset=="function"&&E.reset(),we}}recv_unshare_dashboard(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Jw;if(_.read(y),y.readMessageEnd(),_.e!==null)return v(_.e);v(null)}unshare_dashboards(y,p,h,v){this._seqid=this.new_seqid();const _=this;return new Promise((E,k)=>{_._reqs[_.seqid()]=(ee,we)=>ee?k(ee):E(we),_.send_unshare_dashboards(y,p,h,v)})}send_unshare_dashboards(y,p,h,v){const _=new this.pClass(this.output),E={session:y,dashboard_ids:p,groups:h,permissions:v},k=new oL(E);try{return _.writeMessageBegin("unshare_dashboards",o.MessageType.CALL,this.seqid()),k.write(_),_.writeMessageEnd(),this.output.flush()}catch(ee){throw delete this._reqs[this.seqid()],typeof _.reset=="function"&&_.reset(),ee}}recv_unshare_dashboards(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Qw;if(_.read(y),y.readMessageEnd(),_.e!==null)return v(_.e);v(null)}get_dashboard_grantees(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,_)=>{h._reqs[h.seqid()]=(E,k)=>E?_(E):v(k),h.send_get_dashboard_grantees(y,p)})}send_get_dashboard_grantees(y,p){const h=new this.pClass(this.output),v={session:y,dashboard_id:p},_=new lL(v);try{return h.writeMessageBegin("get_dashboard_grantees",o.MessageType.CALL,this.seqid()),_.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_get_dashboard_grantees(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Zw;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("get_dashboard_grantees failed: unknown result")}get_link_view(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,_)=>{h._reqs[h.seqid()]=(E,k)=>E?_(E):v(k),h.send_get_link_view(y,p)})}send_get_link_view(y,p){const h=new this.pClass(this.output),v={session:y,link:p},_=new cL(v);try{return h.writeMessageBegin("get_link_view",o.MessageType.CALL,this.seqid()),_.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_get_link_view(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new eb;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("get_link_view failed: unknown result")}create_link(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((_,E)=>{v._reqs[v.seqid()]=(k,ee)=>k?E(k):_(ee),v.send_create_link(y,p,h)})}send_create_link(y,p,h){const v=new this.pClass(this.output),_={session:y,view_state:p,view_metadata:h},E=new dL(_);try{return v.writeMessageBegin("create_link",o.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(k){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),k}}recv_create_link(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new tb;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("create_link failed: unknown result")}load_table_binary(y,p,h,v){this._seqid=this.new_seqid();const _=this;return new Promise((E,k)=>{_._reqs[_.seqid()]=(ee,we)=>ee?k(ee):E(we),_.send_load_table_binary(y,p,h,v)})}send_load_table_binary(y,p,h,v){const _=new this.pClass(this.output),E={session:y,table_name:p,rows:h,column_names:v},k=new fL(E);try{return _.writeMessageBegin("load_table_binary",o.MessageType.CALL,this.seqid()),k.write(_),_.writeMessageEnd(),this.output.flush()}catch(ee){throw delete this._reqs[this.seqid()],typeof _.reset=="function"&&_.reset(),ee}}recv_load_table_binary(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new ib;if(_.read(y),y.readMessageEnd(),_.e!==null)return v(_.e);v(null)}load_table_binary_columnar(y,p,h,v){this._seqid=this.new_seqid();const _=this;return new Promise((E,k)=>{_._reqs[_.seqid()]=(ee,we)=>ee?k(ee):E(we),_.send_load_table_binary_columnar(y,p,h,v)})}send_load_table_binary_columnar(y,p,h,v){const _=new this.pClass(this.output),E={session:y,table_name:p,cols:h,column_names:v},k=new uL(E);try{return _.writeMessageBegin("load_table_binary_columnar",o.MessageType.CALL,this.seqid()),k.write(_),_.writeMessageEnd(),this.output.flush()}catch(ee){throw delete this._reqs[this.seqid()],typeof _.reset=="function"&&_.reset(),ee}}recv_load_table_binary_columnar(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new nb;if(_.read(y),y.readMessageEnd(),_.e!==null)return v(_.e);v(null)}load_table_binary_columnar_polys(y,p,h,v,_){this._seqid=this.new_seqid();const E=this;return new Promise((k,ee)=>{E._reqs[E.seqid()]=(we,Ge)=>we?ee(we):k(Ge),E.send_load_table_binary_columnar_polys(y,p,h,v,_)})}send_load_table_binary_columnar_polys(y,p,h,v,_){const E=new this.pClass(this.output),k={session:y,table_name:p,cols:h,column_names:v,assign_render_groups:_},ee=new hL(k);try{return E.writeMessageBegin("load_table_binary_columnar_polys",o.MessageType.CALL,this.seqid()),ee.write(E),E.writeMessageEnd(),this.output.flush()}catch(we){throw delete this._reqs[this.seqid()],typeof E.reset=="function"&&E.reset(),we}}recv_load_table_binary_columnar_polys(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new sb;if(_.read(y),y.readMessageEnd(),_.e!==null)return v(_.e);v(null)}load_table_binary_arrow(y,p,h,v){this._seqid=this.new_seqid();const _=this;return new Promise((E,k)=>{_._reqs[_.seqid()]=(ee,we)=>ee?k(ee):E(we),_.send_load_table_binary_arrow(y,p,h,v)})}send_load_table_binary_arrow(y,p,h,v){const _=new this.pClass(this.output),E={session:y,table_name:p,arrow_stream:h,use_column_names:v},k=new pL(E);try{return _.writeMessageBegin("load_table_binary_arrow",o.MessageType.CALL,this.seqid()),k.write(_),_.writeMessageEnd(),this.output.flush()}catch(ee){throw delete this._reqs[this.seqid()],typeof _.reset=="function"&&_.reset(),ee}}recv_load_table_binary_arrow(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new rb;if(_.read(y),y.readMessageEnd(),_.e!==null)return v(_.e);v(null)}load_table(y,p,h,v){this._seqid=this.new_seqid();const _=this;return new Promise((E,k)=>{_._reqs[_.seqid()]=(ee,we)=>ee?k(ee):E(we),_.send_load_table(y,p,h,v)})}send_load_table(y,p,h,v){const _=new this.pClass(this.output),E={session:y,table_name:p,rows:h,column_names:v},k=new _L(E);try{return _.writeMessageBegin("load_table",o.MessageType.CALL,this.seqid()),k.write(_),_.writeMessageEnd(),this.output.flush()}catch(ee){throw delete this._reqs[this.seqid()],typeof _.reset=="function"&&_.reset(),ee}}recv_load_table(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new ab;if(_.read(y),y.readMessageEnd(),_.e!==null)return v(_.e);v(null)}detect_column_types(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((_,E)=>{v._reqs[v.seqid()]=(k,ee)=>k?E(k):_(ee),v.send_detect_column_types(y,p,h)})}send_detect_column_types(y,p,h){const v=new this.pClass(this.output),_={session:y,file_name:p,copy_params:h},E=new yL(_);try{return v.writeMessageBegin("detect_column_types",o.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(k){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),k}}recv_detect_column_types(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new ob;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("detect_column_types failed: unknown result")}create_table(y,p,h,v){this._seqid=this.new_seqid();const _=this;return new Promise((E,k)=>{_._reqs[_.seqid()]=(ee,we)=>ee?k(ee):E(we),_.send_create_table(y,p,h,v)})}send_create_table(y,p,h,v){const _=new this.pClass(this.output),E={session:y,table_name:p,row_desc:h,create_params:v},k=new gL(E);try{return _.writeMessageBegin("create_table",o.MessageType.CALL,this.seqid()),k.write(_),_.writeMessageEnd(),this.output.flush()}catch(ee){throw delete this._reqs[this.seqid()],typeof _.reset=="function"&&_.reset(),ee}}recv_create_table(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new lb;if(_.read(y),y.readMessageEnd(),_.e!==null)return v(_.e);v(null)}import_table(y,p,h,v){this._seqid=this.new_seqid();const _=this;return new Promise((E,k)=>{_._reqs[_.seqid()]=(ee,we)=>ee?k(ee):E(we),_.send_import_table(y,p,h,v)})}send_import_table(y,p,h,v){const _=new this.pClass(this.output),E={session:y,table_name:p,file_name:h,copy_params:v},k=new mL(E);try{return _.writeMessageBegin("import_table",o.MessageType.CALL,this.seqid()),k.write(_),_.writeMessageEnd(),this.output.flush()}catch(ee){throw delete this._reqs[this.seqid()],typeof _.reset=="function"&&_.reset(),ee}}recv_import_table(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new cb;if(_.read(y),y.readMessageEnd(),_.e!==null)return v(_.e);v(null)}import_geo_table(y,p,h,v,_,E){this._seqid=this.new_seqid();const k=this;return new Promise((ee,we)=>{k._reqs[k.seqid()]=(Ge,_i)=>Ge?we(Ge):ee(_i),k.send_import_geo_table(y,p,h,v,_,E)})}send_import_geo_table(y,p,h,v,_,E){const k=new this.pClass(this.output),ee={session:y,table_name:p,file_name:h,copy_params:v,row_desc:_,create_params:E},we=new wL(ee);try{return k.writeMessageBegin("import_geo_table",o.MessageType.CALL,this.seqid()),we.write(k),k.writeMessageEnd(),this.output.flush()}catch(Ge){throw delete this._reqs[this.seqid()],typeof k.reset=="function"&&k.reset(),Ge}}recv_import_geo_table(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new db;if(_.read(y),y.readMessageEnd(),_.e!==null)return v(_.e);v(null)}import_table_status(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,_)=>{h._reqs[h.seqid()]=(E,k)=>E?_(E):v(k),h.send_import_table_status(y,p)})}send_import_table_status(y,p){const h=new this.pClass(this.output),v={session:y,import_id:p},_=new bL(v);try{return h.writeMessageBegin("import_table_status",o.MessageType.CALL,this.seqid()),_.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_import_table_status(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new fb;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("import_table_status failed: unknown result")}get_first_geo_file_in_archive(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((_,E)=>{v._reqs[v.seqid()]=(k,ee)=>k?E(k):_(ee),v.send_get_first_geo_file_in_archive(y,p,h)})}send_get_first_geo_file_in_archive(y,p,h){const v=new this.pClass(this.output),_={session:y,archive_path:p,copy_params:h},E=new TL(_);try{return v.writeMessageBegin("get_first_geo_file_in_archive",o.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(k){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),k}}recv_get_first_geo_file_in_archive(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new ub;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("get_first_geo_file_in_archive failed: unknown result")}get_all_files_in_archive(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((_,E)=>{v._reqs[v.seqid()]=(k,ee)=>k?E(k):_(ee),v.send_get_all_files_in_archive(y,p,h)})}send_get_all_files_in_archive(y,p,h){const v=new this.pClass(this.output),_={session:y,archive_path:p,copy_params:h},E=new vL(_);try{return v.writeMessageBegin("get_all_files_in_archive",o.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(k){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),k}}recv_get_all_files_in_archive(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new hb;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("get_all_files_in_archive failed: unknown result")}get_layers_in_geo_file(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((_,E)=>{v._reqs[v.seqid()]=(k,ee)=>k?E(k):_(ee),v.send_get_layers_in_geo_file(y,p,h)})}send_get_layers_in_geo_file(y,p,h){const v=new this.pClass(this.output),_={session:y,file_name:p,copy_params:h},E=new EL(_);try{return v.writeMessageBegin("get_layers_in_geo_file",o.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(k){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),k}}recv_get_layers_in_geo_file(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new pb;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("get_layers_in_geo_file failed: unknown result")}query_get_outer_fragment_count(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,_)=>{h._reqs[h.seqid()]=(E,k)=>E?_(E):v(k),h.send_query_get_outer_fragment_count(y,p)})}send_query_get_outer_fragment_count(y,p){const h=new this.pClass(this.output),v={session:y,query:p},_=new SL(v);try{return h.writeMessageBegin("query_get_outer_fragment_count",o.MessageType.CALL,this.seqid()),_.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_query_get_outer_fragment_count(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new _b;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("query_get_outer_fragment_count failed: unknown result")}check_table_consistency(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,_)=>{h._reqs[h.seqid()]=(E,k)=>E?_(E):v(k),h.send_check_table_consistency(y,p)})}send_check_table_consistency(y,p){const h=new this.pClass(this.output),v={session:y,table_id:p},_=new xL(v);try{return h.writeMessageBegin("check_table_consistency",o.MessageType.CALL,this.seqid()),_.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_check_table_consistency(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new yb;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("check_table_consistency failed: unknown result")}start_query(y,p,h,v,_,E){this._seqid=this.new_seqid();const k=this;return new Promise((ee,we)=>{k._reqs[k.seqid()]=(Ge,_i)=>Ge?we(Ge):ee(_i),k.send_start_query(y,p,h,v,_,E)})}send_start_query(y,p,h,v,_,E){const k=new this.pClass(this.output),ee={leaf_session:y,parent_session:p,query_ra:h,start_time_str:v,just_explain:_,outer_fragment_indices:E},we=new BL(ee);try{return k.writeMessageBegin("start_query",o.MessageType.CALL,this.seqid()),we.write(k),k.writeMessageEnd(),this.output.flush()}catch(Ge){throw delete this._reqs[this.seqid()],typeof k.reset=="function"&&k.reset(),Ge}}recv_start_query(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new gb;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("start_query failed: unknown result")}execute_query_step(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((_,E)=>{v._reqs[v.seqid()]=(k,ee)=>k?E(k):_(ee),v.send_execute_query_step(y,p,h)})}send_execute_query_step(y,p,h){const v=new this.pClass(this.output),_={pending_query:y,subquery_id:p,start_time_str:h},E=new IL(_);try{return v.writeMessageBegin("execute_query_step",o.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(k){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),k}}recv_execute_query_step(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new mb;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("execute_query_step failed: unknown result")}broadcast_serialized_rows(y,p,h,v,_){this._seqid=this.new_seqid();const E=this;return new Promise((k,ee)=>{E._reqs[E.seqid()]=(we,Ge)=>we?ee(we):k(Ge),E.send_broadcast_serialized_rows(y,p,h,v,_)})}send_broadcast_serialized_rows(y,p,h,v,_){const E=new this.pClass(this.output),k={serialized_rows:y,row_desc:p,query_id:h,subquery_id:v,is_final_subquery_result:_},ee=new kL(k);try{return E.writeMessageBegin("broadcast_serialized_rows",o.MessageType.CALL,this.seqid()),ee.write(E),E.writeMessageEnd(),this.output.flush()}catch(we){throw delete this._reqs[this.seqid()],typeof E.reset=="function"&&E.reset(),we}}recv_broadcast_serialized_rows(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new wb;if(_.read(y),y.readMessageEnd(),_.e!==null)return v(_.e);v(null)}start_render_query(y,p,h,v){this._seqid=this.new_seqid();const _=this;return new Promise((E,k)=>{_._reqs[_.seqid()]=(ee,we)=>ee?k(ee):E(we),_.send_start_render_query(y,p,h,v)})}send_start_render_query(y,p,h,v){const _=new this.pClass(this.output),E={session:y,widget_id:p,node_idx:h,vega_json:v},k=new FL(E);try{return _.writeMessageBegin("start_render_query",o.MessageType.CALL,this.seqid()),k.write(_),_.writeMessageEnd(),this.output.flush()}catch(ee){throw delete this._reqs[this.seqid()],typeof _.reset=="function"&&_.reset(),ee}}recv_start_render_query(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new bb;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("start_render_query failed: unknown result")}execute_next_render_step(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,_)=>{h._reqs[h.seqid()]=(E,k)=>E?_(E):v(k),h.send_execute_next_render_step(y,p)})}send_execute_next_render_step(y,p){const h=new this.pClass(this.output),v={pending_render:y,merged_data:p},_=new ML(v);try{return h.writeMessageBegin("execute_next_render_step",o.MessageType.CALL,this.seqid()),_.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_execute_next_render_step(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Tb;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("execute_next_render_step failed: unknown result")}insert_data(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,_)=>{h._reqs[h.seqid()]=(E,k)=>E?_(E):v(k),h.send_insert_data(y,p)})}send_insert_data(y,p){const h=new this.pClass(this.output),v={session:y,insert_data:p},_=new AL(v);try{return h.writeMessageBegin("insert_data",o.MessageType.CALL,this.seqid()),_.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_insert_data(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new vb;if(_.read(y),y.readMessageEnd(),_.e!==null)return v(_.e);v(null)}insert_chunks(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,_)=>{h._reqs[h.seqid()]=(E,k)=>E?_(E):v(k),h.send_insert_chunks(y,p)})}send_insert_chunks(y,p){const h=new this.pClass(this.output),v={session:y,insert_chunks:p},_=new OL(v);try{return h.writeMessageBegin("insert_chunks",o.MessageType.CALL,this.seqid()),_.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_insert_chunks(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Eb;if(_.read(y),y.readMessageEnd(),_.e!==null)return v(_.e);v(null)}checkpoint(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,_)=>{h._reqs[h.seqid()]=(E,k)=>E?_(E):v(k),h.send_checkpoint(y,p)})}send_checkpoint(y,p){const h=new this.pClass(this.output),v={session:y,table_id:p},_=new NL(v);try{return h.writeMessageBegin("checkpoint",o.MessageType.CALL,this.seqid()),_.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_checkpoint(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Sb;if(_.read(y),y.readMessageEnd(),_.e!==null)return v(_.e);v(null)}get_roles(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(_,E)=>_?v(_):h(E),p.send_get_roles(y)})}send_get_roles(y){const p=new this.pClass(this.output),h={session:y},v=new CL(h);try{return p.writeMessageBegin("get_roles",o.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(_){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),_}}recv_get_roles(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new xb;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("get_roles failed: unknown result")}get_db_objects_for_grantee(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,_)=>{h._reqs[h.seqid()]=(E,k)=>E?_(E):v(k),h.send_get_db_objects_for_grantee(y,p)})}send_get_db_objects_for_grantee(y,p){const h=new this.pClass(this.output),v={session:y,roleName:p},_=new RL(v);try{return h.writeMessageBegin("get_db_objects_for_grantee",o.MessageType.CALL,this.seqid()),_.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_get_db_objects_for_grantee(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Bb;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("get_db_objects_for_grantee failed: unknown result")}get_db_object_privs(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((_,E)=>{v._reqs[v.seqid()]=(k,ee)=>k?E(k):_(ee),v.send_get_db_object_privs(y,p,h)})}send_get_db_object_privs(y,p,h){const v=new this.pClass(this.output),_={session:y,objectName:p,type:h},E=new LL(_);try{return v.writeMessageBegin("get_db_object_privs",o.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(k){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),k}}recv_get_db_object_privs(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Ib;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("get_db_object_privs failed: unknown result")}get_all_roles_for_user(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,_)=>{h._reqs[h.seqid()]=(E,k)=>E?_(E):v(k),h.send_get_all_roles_for_user(y,p)})}send_get_all_roles_for_user(y,p){const h=new this.pClass(this.output),v={session:y,userName:p},_=new DL(v);try{return h.writeMessageBegin("get_all_roles_for_user",o.MessageType.CALL,this.seqid()),_.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_get_all_roles_for_user(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new kb;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("get_all_roles_for_user failed: unknown result")}get_all_effective_roles_for_user(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,_)=>{h._reqs[h.seqid()]=(E,k)=>E?_(E):v(k),h.send_get_all_effective_roles_for_user(y,p)})}send_get_all_effective_roles_for_user(y,p){const h=new this.pClass(this.output),v={session:y,userName:p},_=new PL(v);try{return h.writeMessageBegin("get_all_effective_roles_for_user",o.MessageType.CALL,this.seqid()),_.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_get_all_effective_roles_for_user(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Fb;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("get_all_effective_roles_for_user failed: unknown result")}has_role(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((_,E)=>{v._reqs[v.seqid()]=(k,ee)=>k?E(k):_(ee),v.send_has_role(y,p,h)})}send_has_role(y,p,h){const v=new this.pClass(this.output),_={session:y,granteeName:p,roleName:h},E=new $L(_);try{return v.writeMessageBegin("has_role",o.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(k){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),k}}recv_has_role(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Mb;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("has_role failed: unknown result")}has_object_privilege(y,p,h,v,_){this._seqid=this.new_seqid();const E=this;return new Promise((k,ee)=>{E._reqs[E.seqid()]=(we,Ge)=>we?ee(we):k(Ge),E.send_has_object_privilege(y,p,h,v,_)})}send_has_object_privilege(y,p,h,v,_){const E=new this.pClass(this.output),k={session:y,granteeName:p,ObjectName:h,objectType:v,permissions:_},ee=new UL(k);try{return E.writeMessageBegin("has_object_privilege",o.MessageType.CALL,this.seqid()),ee.write(E),E.writeMessageEnd(),this.output.flush()}catch(we){throw delete this._reqs[this.seqid()],typeof E.reset=="function"&&E.reset(),we}}recv_has_object_privilege(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Ab;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("has_object_privilege failed: unknown result")}set_license_key(y,p,h){this._seqid=this.new_seqid();const v=this;return new Promise((_,E)=>{v._reqs[v.seqid()]=(k,ee)=>k?E(k):_(ee),v.send_set_license_key(y,p,h)})}send_set_license_key(y,p,h){const v=new this.pClass(this.output),_={session:y,key:p,nonce:h},E=new zL(_);try{return v.writeMessageBegin("set_license_key",o.MessageType.CALL,this.seqid()),E.write(v),v.writeMessageEnd(),this.output.flush()}catch(k){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),k}}recv_set_license_key(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Ob;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("set_license_key failed: unknown result")}get_license_claims(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,_)=>{h._reqs[h.seqid()]=(E,k)=>E?_(E):v(k),h.send_get_license_claims(y,p)})}send_get_license_claims(y,p){const h=new this.pClass(this.output),v={session:y,nonce:p},_=new jL(v);try{return h.writeMessageBegin("get_license_claims",o.MessageType.CALL,this.seqid()),_.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_get_license_claims(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Nb;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("get_license_claims failed: unknown result")}get_device_parameters(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(_,E)=>_?v(_):h(E),p.send_get_device_parameters(y)})}send_get_device_parameters(y){const p=new this.pClass(this.output),h={session:y},v=new qL(h);try{return p.writeMessageBegin("get_device_parameters",o.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(_){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),_}}recv_get_device_parameters(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Cb;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("get_device_parameters failed: unknown result")}register_runtime_extension_functions(y,p,h,v){this._seqid=this.new_seqid();const _=this;return new Promise((E,k)=>{_._reqs[_.seqid()]=(ee,we)=>ee?k(ee):E(we),_.send_register_runtime_extension_functions(y,p,h,v)})}send_register_runtime_extension_functions(y,p,h,v){const _=new this.pClass(this.output),E={session:y,udfs:p,udtfs:h,device_ir_map:v},k=new GL(E);try{return _.writeMessageBegin("register_runtime_extension_functions",o.MessageType.CALL,this.seqid()),k.write(_),_.writeMessageEnd(),this.output.flush()}catch(ee){throw delete this._reqs[this.seqid()],typeof _.reset=="function"&&_.reset(),ee}}recv_register_runtime_extension_functions(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Rb;if(_.read(y),y.readMessageEnd(),_.e!==null)return v(_.e);v(null)}get_table_function_names(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(_,E)=>_?v(_):h(E),p.send_get_table_function_names(y)})}send_get_table_function_names(y){const p=new this.pClass(this.output),h={session:y},v=new VL(h);try{return p.writeMessageBegin("get_table_function_names",o.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(_){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),_}}recv_get_table_function_names(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Lb;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("get_table_function_names failed: unknown result")}get_runtime_table_function_names(y){this._seqid=this.new_seqid();const p=this;return new Promise((h,v)=>{p._reqs[p.seqid()]=(_,E)=>_?v(_):h(E),p.send_get_runtime_table_function_names(y)})}send_get_runtime_table_function_names(y){const p=new this.pClass(this.output),h={session:y},v=new WL(h);try{return p.writeMessageBegin("get_runtime_table_function_names",o.MessageType.CALL,this.seqid()),v.write(p),p.writeMessageEnd(),this.output.flush()}catch(_){throw delete this._reqs[this.seqid()],typeof p.reset=="function"&&p.reset(),_}}recv_get_runtime_table_function_names(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Db;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("get_runtime_table_function_names failed: unknown result")}get_table_function_details(y,p){this._seqid=this.new_seqid();const h=this;return new Promise((v,_)=>{h._reqs[h.seqid()]=(E,k)=>E?_(E):v(k),h.send_get_table_function_details(y,p)})}send_get_table_function_details(y,p){const h=new this.pClass(this.output),v={session:y,udtf_names:p},_=new HL(v);try{return h.writeMessageBegin("get_table_function_details",o.MessageType.CALL,this.seqid()),_.write(h),h.writeMessageEnd(),this.output.flush()}catch(E){throw delete this._reqs[this.seqid()],typeof h.reset=="function"&&h.reset(),E}}recv_get_table_function_details(y,p,h){const v=this._reqs[h]||function(){};if(delete this._reqs[h],p==o.MessageType.EXCEPTION){const E=new o.TApplicationException;return E.read(y),y.readMessageEnd(),v(E)}const _=new Pb;return _.read(y),y.readMessageEnd(),_.e!==null?v(_.e):_.success!==null?v(null,_.success):v("get_table_function_details failed: unknown result")}},d.Processor=class{constructor(y){this._handler=y}process(y,p){const h=y.readMessageBegin();if(this["process_"+h.fname])return this["process_"+h.fname].call(this,h.rseqid,y,p);{y.skip(o.Type.STRUCT),y.readMessageEnd();const v=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN_METHOD,"Unknown function "+h.fname);p.writeMessageBegin(h.fname,o.MessageType.EXCEPTION,h.rseqid),v.write(p),p.writeMessageEnd(),p.flush()}}process_connect(y,p,h){const v=new T;v.read(p),p.readMessageEnd(),this._handler.connect.length===3?Promise.resolve(this._handler.connect.bind(this._handler)(v.user,v.passwd,v.dbname)).then(_=>{const E=new b({success:_});h.writeMessageBegin("connect",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new b(_),h.writeMessageBegin("connect",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("connect",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.connect(v.user,v.passwd,v.dbname,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new b(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("connect",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("connect",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_krb5_connect(y,p,h){const v=new S;v.read(p),p.readMessageEnd(),this._handler.krb5_connect.length===2?Promise.resolve(this._handler.krb5_connect.bind(this._handler)(v.inputToken,v.dbname)).then(_=>{const E=new x({success:_});h.writeMessageBegin("krb5_connect",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new x(_),h.writeMessageBegin("krb5_connect",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("krb5_connect",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.krb5_connect(v.inputToken,v.dbname,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new x(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("krb5_connect",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("krb5_connect",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_disconnect(y,p,h){const v=new B;v.read(p),p.readMessageEnd(),this._handler.disconnect.length===1?Promise.resolve(this._handler.disconnect.bind(this._handler)(v.session)).then(_=>{const E=new F({success:_});h.writeMessageBegin("disconnect",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new F(_),h.writeMessageBegin("disconnect",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("disconnect",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.disconnect(v.session,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new F(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("disconnect",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("disconnect",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_switch_database(y,p,h){const v=new I;v.read(p),p.readMessageEnd(),this._handler.switch_database.length===2?Promise.resolve(this._handler.switch_database.bind(this._handler)(v.session,v.dbname)).then(_=>{const E=new A({success:_});h.writeMessageBegin("switch_database",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new A(_),h.writeMessageBegin("switch_database",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("switch_database",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.switch_database(v.session,v.dbname,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new A(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("switch_database",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("switch_database",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_clone_session(y,p,h){const v=new O;v.read(p),p.readMessageEnd(),this._handler.clone_session.length===1?Promise.resolve(this._handler.clone_session.bind(this._handler)(v.session)).then(_=>{const E=new R({success:_});h.writeMessageBegin("clone_session",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new R(_),h.writeMessageBegin("clone_session",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("clone_session",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.clone_session(v.session,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new R(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("clone_session",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("clone_session",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_get_server_status(y,p,h){const v=new D;v.read(p),p.readMessageEnd(),this._handler.get_server_status.length===1?Promise.resolve(this._handler.get_server_status.bind(this._handler)(v.session)).then(_=>{const E=new P({success:_});h.writeMessageBegin("get_server_status",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new P(_),h.writeMessageBegin("get_server_status",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_server_status",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_server_status(v.session,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new P(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("get_server_status",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_server_status",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_get_status(y,p,h){const v=new U;v.read(p),p.readMessageEnd(),this._handler.get_status.length===1?Promise.resolve(this._handler.get_status.bind(this._handler)(v.session)).then(_=>{const E=new Y({success:_});h.writeMessageBegin("get_status",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new Y(_),h.writeMessageBegin("get_status",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_status",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_status(v.session,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new Y(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("get_status",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_status",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_get_hardware_info(y,p,h){const v=new z;v.read(p),p.readMessageEnd(),this._handler.get_hardware_info.length===1?Promise.resolve(this._handler.get_hardware_info.bind(this._handler)(v.session)).then(_=>{const E=new W({success:_});h.writeMessageBegin("get_hardware_info",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new W(_),h.writeMessageBegin("get_hardware_info",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_hardware_info",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_hardware_info(v.session,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new W(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("get_hardware_info",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_hardware_info",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_get_tables(y,p,h){const v=new V;v.read(p),p.readMessageEnd(),this._handler.get_tables.length===1?Promise.resolve(this._handler.get_tables.bind(this._handler)(v.session)).then(_=>{const E=new H({success:_});h.writeMessageBegin("get_tables",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new H(_),h.writeMessageBegin("get_tables",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_tables",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_tables(v.session,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new H(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("get_tables",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_tables",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_get_tables_for_database(y,p,h){const v=new J;v.read(p),p.readMessageEnd(),this._handler.get_tables_for_database.length===2?Promise.resolve(this._handler.get_tables_for_database.bind(this._handler)(v.session,v.database_name)).then(_=>{const E=new G({success:_});h.writeMessageBegin("get_tables_for_database",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new G(_),h.writeMessageBegin("get_tables_for_database",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_tables_for_database",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_tables_for_database(v.session,v.database_name,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new G(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("get_tables_for_database",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_tables_for_database",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_get_physical_tables(y,p,h){const v=new le;v.read(p),p.readMessageEnd(),this._handler.get_physical_tables.length===1?Promise.resolve(this._handler.get_physical_tables.bind(this._handler)(v.session)).then(_=>{const E=new pe({success:_});h.writeMessageBegin("get_physical_tables",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new pe(_),h.writeMessageBegin("get_physical_tables",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_physical_tables",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_physical_tables(v.session,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new pe(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("get_physical_tables",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_physical_tables",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_get_views(y,p,h){const v=new ne;v.read(p),p.readMessageEnd(),this._handler.get_views.length===1?Promise.resolve(this._handler.get_views.bind(this._handler)(v.session)).then(_=>{const E=new Ae({success:_});h.writeMessageBegin("get_views",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new Ae(_),h.writeMessageBegin("get_views",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_views",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_views(v.session,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new Ae(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("get_views",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_views",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_get_tables_meta(y,p,h){const v=new fe;v.read(p),p.readMessageEnd(),this._handler.get_tables_meta.length===1?Promise.resolve(this._handler.get_tables_meta.bind(this._handler)(v.session)).then(_=>{const E=new Fe({success:_});h.writeMessageBegin("get_tables_meta",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new Fe(_),h.writeMessageBegin("get_tables_meta",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_tables_meta",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_tables_meta(v.session,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new Fe(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("get_tables_meta",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_tables_meta",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_get_table_details(y,p,h){const v=new je;v.read(p),p.readMessageEnd(),this._handler.get_table_details.length===2?Promise.resolve(this._handler.get_table_details.bind(this._handler)(v.session,v.table_name)).then(_=>{const E=new _t({success:_});h.writeMessageBegin("get_table_details",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new _t(_),h.writeMessageBegin("get_table_details",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_table_details",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_table_details(v.session,v.table_name,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new _t(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("get_table_details",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_table_details",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_get_table_details_for_database(y,p,h){const v=new Ct;v.read(p),p.readMessageEnd(),this._handler.get_table_details_for_database.length===3?Promise.resolve(this._handler.get_table_details_for_database.bind(this._handler)(v.session,v.table_name,v.database_name)).then(_=>{const E=new zt({success:_});h.writeMessageBegin("get_table_details_for_database",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new zt(_),h.writeMessageBegin("get_table_details_for_database",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_table_details_for_database",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_table_details_for_database(v.session,v.table_name,v.database_name,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new zt(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("get_table_details_for_database",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_table_details_for_database",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_get_internal_table_details(y,p,h){const v=new _e;v.read(p),p.readMessageEnd(),this._handler.get_internal_table_details.length===3?Promise.resolve(this._handler.get_internal_table_details.bind(this._handler)(v.session,v.table_name,v.include_system_columns)).then(_=>{const E=new q({success:_});h.writeMessageBegin("get_internal_table_details",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new q(_),h.writeMessageBegin("get_internal_table_details",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_internal_table_details",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_internal_table_details(v.session,v.table_name,v.include_system_columns,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new q(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("get_internal_table_details",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_internal_table_details",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_get_internal_table_details_for_database(y,p,h){const v=new j;v.read(p),p.readMessageEnd(),this._handler.get_internal_table_details_for_database.length===3?Promise.resolve(this._handler.get_internal_table_details_for_database.bind(this._handler)(v.session,v.table_name,v.database_name)).then(_=>{const E=new L({success:_});h.writeMessageBegin("get_internal_table_details_for_database",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new L(_),h.writeMessageBegin("get_internal_table_details_for_database",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_internal_table_details_for_database",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_internal_table_details_for_database(v.session,v.table_name,v.database_name,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new L(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("get_internal_table_details_for_database",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_internal_table_details_for_database",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_get_users(y,p,h){const v=new K;v.read(p),p.readMessageEnd(),this._handler.get_users.length===1?Promise.resolve(this._handler.get_users.bind(this._handler)(v.session)).then(_=>{const E=new Z({success:_});h.writeMessageBegin("get_users",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new Z(_),h.writeMessageBegin("get_users",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_users",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_users(v.session,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new Z(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("get_users",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_users",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_get_databases(y,p,h){const v=new oe;v.read(p),p.readMessageEnd(),this._handler.get_databases.length===1?Promise.resolve(this._handler.get_databases.bind(this._handler)(v.session)).then(_=>{const E=new re({success:_});h.writeMessageBegin("get_databases",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new re(_),h.writeMessageBegin("get_databases",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_databases",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_databases(v.session,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new re(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("get_databases",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_databases",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_get_version(y,p,h){new ge().read(p),p.readMessageEnd(),this._handler.get_version.length===0?Promise.resolve(this._handler.get_version.bind(this._handler)()).then(_=>{const E=new Se({success:_});h.writeMessageBegin("get_version",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new Se(_),h.writeMessageBegin("get_version",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_version",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_version((_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new Se(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("get_version",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_version",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_start_heap_profile(y,p,h){const v=new He;v.read(p),p.readMessageEnd(),this._handler.start_heap_profile.length===1?Promise.resolve(this._handler.start_heap_profile.bind(this._handler)(v.session)).then(_=>{const E=new pi({success:_});h.writeMessageBegin("start_heap_profile",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new pi(_),h.writeMessageBegin("start_heap_profile",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("start_heap_profile",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.start_heap_profile(v.session,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new pi(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("start_heap_profile",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("start_heap_profile",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_stop_heap_profile(y,p,h){const v=new Bi;v.read(p),p.readMessageEnd(),this._handler.stop_heap_profile.length===1?Promise.resolve(this._handler.stop_heap_profile.bind(this._handler)(v.session)).then(_=>{const E=new Qt({success:_});h.writeMessageBegin("stop_heap_profile",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new Qt(_),h.writeMessageBegin("stop_heap_profile",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("stop_heap_profile",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.stop_heap_profile(v.session,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new Qt(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("stop_heap_profile",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("stop_heap_profile",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_get_heap_profile(y,p,h){const v=new $s;v.read(p),p.readMessageEnd(),this._handler.get_heap_profile.length===1?Promise.resolve(this._handler.get_heap_profile.bind(this._handler)(v.session)).then(_=>{const E=new lr({success:_});h.writeMessageBegin("get_heap_profile",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new lr(_),h.writeMessageBegin("get_heap_profile",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_heap_profile",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_heap_profile(v.session,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new lr(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("get_heap_profile",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_heap_profile",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_get_memory(y,p,h){const v=new cr;v.read(p),p.readMessageEnd(),this._handler.get_memory.length===2?Promise.resolve(this._handler.get_memory.bind(this._handler)(v.session,v.memory_level)).then(_=>{const E=new he({success:_});h.writeMessageBegin("get_memory",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new he(_),h.writeMessageBegin("get_memory",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_memory",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_memory(v.session,v.memory_level,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new he(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("get_memory",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_memory",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_clear_cpu_memory(y,p,h){const v=new as;v.read(p),p.readMessageEnd(),this._handler.clear_cpu_memory.length===1?Promise.resolve(this._handler.clear_cpu_memory.bind(this._handler)(v.session)).then(_=>{const E=new Pn({success:_});h.writeMessageBegin("clear_cpu_memory",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new Pn(_),h.writeMessageBegin("clear_cpu_memory",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("clear_cpu_memory",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.clear_cpu_memory(v.session,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new Pn(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("clear_cpu_memory",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("clear_cpu_memory",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_clear_gpu_memory(y,p,h){const v=new ka;v.read(p),p.readMessageEnd(),this._handler.clear_gpu_memory.length===1?Promise.resolve(this._handler.clear_gpu_memory.bind(this._handler)(v.session)).then(_=>{const E=new Ki({success:_});h.writeMessageBegin("clear_gpu_memory",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new Ki(_),h.writeMessageBegin("clear_gpu_memory",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("clear_gpu_memory",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.clear_gpu_memory(v.session,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new Ki(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("clear_gpu_memory",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("clear_gpu_memory",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_set_cur_session(y,p,h){const v=new Zl;v.read(p),p.readMessageEnd(),this._handler.set_cur_session.length===5?Promise.resolve(this._handler.set_cur_session.bind(this._handler)(v.parent_session,v.leaf_session,v.start_time_str,v.label,v.for_running_query_kernel)).then(_=>{const E=new ec({success:_});h.writeMessageBegin("set_cur_session",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new ec(_),h.writeMessageBegin("set_cur_session",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("set_cur_session",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.set_cur_session(v.parent_session,v.leaf_session,v.start_time_str,v.label,v.for_running_query_kernel,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new ec(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("set_cur_session",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("set_cur_session",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_invalidate_cur_session(y,p,h){const v=new Us;v.read(p),p.readMessageEnd(),this._handler.invalidate_cur_session.length===5?Promise.resolve(this._handler.invalidate_cur_session.bind(this._handler)(v.parent_session,v.leaf_session,v.start_time_str,v.label,v.for_running_query_kernel)).then(_=>{const E=new tc({success:_});h.writeMessageBegin("invalidate_cur_session",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new tc(_),h.writeMessageBegin("invalidate_cur_session",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("invalidate_cur_session",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.invalidate_cur_session(v.parent_session,v.leaf_session,v.start_time_str,v.label,v.for_running_query_kernel,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new tc(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("invalidate_cur_session",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("invalidate_cur_session",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_set_table_epoch(y,p,h){const v=new C;v.read(p),p.readMessageEnd(),this._handler.set_table_epoch.length===4?Promise.resolve(this._handler.set_table_epoch.bind(this._handler)(v.session,v.db_id,v.table_id,v.new_epoch)).then(_=>{const E=new M({success:_});h.writeMessageBegin("set_table_epoch",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new M(_),h.writeMessageBegin("set_table_epoch",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("set_table_epoch",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.set_table_epoch(v.session,v.db_id,v.table_id,v.new_epoch,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new M(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("set_table_epoch",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("set_table_epoch",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_set_table_epoch_by_name(y,p,h){const v=new N;v.read(p),p.readMessageEnd(),this._handler.set_table_epoch_by_name.length===3?Promise.resolve(this._handler.set_table_epoch_by_name.bind(this._handler)(v.session,v.table_name,v.new_epoch)).then(_=>{const E=new $({success:_});h.writeMessageBegin("set_table_epoch_by_name",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new $(_),h.writeMessageBegin("set_table_epoch_by_name",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("set_table_epoch_by_name",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.set_table_epoch_by_name(v.session,v.table_name,v.new_epoch,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new $(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("set_table_epoch_by_name",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("set_table_epoch_by_name",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_get_table_epoch(y,p,h){const v=new X;v.read(p),p.readMessageEnd(),this._handler.get_table_epoch.length===3?Promise.resolve(this._handler.get_table_epoch.bind(this._handler)(v.session,v.db_id,v.table_id)).then(_=>{const E=new te({success:_});h.writeMessageBegin("get_table_epoch",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_table_epoch",o.MessageType.EXCEPTION,y),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_table_epoch(v.session,v.db_id,v.table_id,(_,E)=>{let k;_===null||typeof _>"u"?(k=new te(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("get_table_epoch",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_table_epoch",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_get_table_epoch_by_name(y,p,h){const v=new se;v.read(p),p.readMessageEnd(),this._handler.get_table_epoch_by_name.length===2?Promise.resolve(this._handler.get_table_epoch_by_name.bind(this._handler)(v.session,v.table_name)).then(_=>{const E=new Oe({success:_});h.writeMessageBegin("get_table_epoch_by_name",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_table_epoch_by_name",o.MessageType.EXCEPTION,y),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_table_epoch_by_name(v.session,v.table_name,(_,E)=>{let k;_===null||typeof _>"u"?(k=new Oe(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("get_table_epoch_by_name",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_table_epoch_by_name",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_get_table_epochs(y,p,h){const v=new $e;v.read(p),p.readMessageEnd(),this._handler.get_table_epochs.length===3?Promise.resolve(this._handler.get_table_epochs.bind(this._handler)(v.session,v.db_id,v.table_id)).then(_=>{const E=new Ue({success:_});h.writeMessageBegin("get_table_epochs",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_table_epochs",o.MessageType.EXCEPTION,y),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_table_epochs(v.session,v.db_id,v.table_id,(_,E)=>{let k;_===null||typeof _>"u"?(k=new Ue(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("get_table_epochs",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_table_epochs",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_set_table_epochs(y,p,h){const v=new Ve;v.read(p),p.readMessageEnd(),this._handler.set_table_epochs.length===3?Promise.resolve(this._handler.set_table_epochs.bind(this._handler)(v.session,v.db_id,v.table_epochs)).then(_=>{const E=new We({success:_});h.writeMessageBegin("set_table_epochs",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("set_table_epochs",o.MessageType.EXCEPTION,y),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.set_table_epochs(v.session,v.db_id,v.table_epochs,(_,E)=>{let k;_===null||typeof _>"u"?(k=new We(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("set_table_epochs",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("set_table_epochs",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_get_session_info(y,p,h){const v=new ic;v.read(p),p.readMessageEnd(),this._handler.get_session_info.length===1?Promise.resolve(this._handler.get_session_info.bind(this._handler)(v.session)).then(_=>{const E=new Bw({success:_});h.writeMessageBegin("get_session_info",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new Bw(_),h.writeMessageBegin("get_session_info",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_session_info",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_session_info(v.session,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new Bw(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("get_session_info",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_session_info",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_get_queries_info(y,p,h){const v=new L3;v.read(p),p.readMessageEnd(),this._handler.get_queries_info.length===1?Promise.resolve(this._handler.get_queries_info.bind(this._handler)(v.session)).then(_=>{const E=new Iw({success:_});h.writeMessageBegin("get_queries_info",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new Iw(_),h.writeMessageBegin("get_queries_info",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_queries_info",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_queries_info(v.session,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new Iw(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("get_queries_info",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_queries_info",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_set_leaf_info(y,p,h){const v=new D3;v.read(p),p.readMessageEnd(),this._handler.set_leaf_info.length===2?Promise.resolve(this._handler.set_leaf_info.bind(this._handler)(v.session,v.leaf_info)).then(_=>{const E=new kw({success:_});h.writeMessageBegin("set_leaf_info",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new kw(_),h.writeMessageBegin("set_leaf_info",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("set_leaf_info",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.set_leaf_info(v.session,v.leaf_info,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new kw(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("set_leaf_info",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("set_leaf_info",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_sql_execute(y,p,h){const v=new P3;v.read(p),p.readMessageEnd(),this._handler.sql_execute.length===6?Promise.resolve(this._handler.sql_execute.bind(this._handler)(v.session,v.query,v.column_format,v.nonce,v.first_n,v.at_most_n)).then(_=>{const E=new Fw({success:_});h.writeMessageBegin("sql_execute",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new Fw(_),h.writeMessageBegin("sql_execute",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("sql_execute",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.sql_execute(v.session,v.query,v.column_format,v.nonce,v.first_n,v.at_most_n,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new Fw(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("sql_execute",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("sql_execute",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_sql_execute_df(y,p,h){const v=new $3;v.read(p),p.readMessageEnd(),this._handler.sql_execute_df.length===6?Promise.resolve(this._handler.sql_execute_df.bind(this._handler)(v.session,v.query,v.device_type,v.device_id,v.first_n,v.transport_method)).then(_=>{const E=new Mw({success:_});h.writeMessageBegin("sql_execute_df",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new Mw(_),h.writeMessageBegin("sql_execute_df",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("sql_execute_df",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.sql_execute_df(v.session,v.query,v.device_type,v.device_id,v.first_n,v.transport_method,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new Mw(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("sql_execute_df",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("sql_execute_df",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_sql_execute_gdf(y,p,h){const v=new U3;v.read(p),p.readMessageEnd(),this._handler.sql_execute_gdf.length===4?Promise.resolve(this._handler.sql_execute_gdf.bind(this._handler)(v.session,v.query,v.device_id,v.first_n)).then(_=>{const E=new Aw({success:_});h.writeMessageBegin("sql_execute_gdf",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new Aw(_),h.writeMessageBegin("sql_execute_gdf",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("sql_execute_gdf",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.sql_execute_gdf(v.session,v.query,v.device_id,v.first_n,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new Aw(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("sql_execute_gdf",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("sql_execute_gdf",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_deallocate_df(y,p,h){const v=new z3;v.read(p),p.readMessageEnd(),this._handler.deallocate_df.length===4?Promise.resolve(this._handler.deallocate_df.bind(this._handler)(v.session,v.df,v.device_type,v.device_id)).then(_=>{const E=new Ow({success:_});h.writeMessageBegin("deallocate_df",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new Ow(_),h.writeMessageBegin("deallocate_df",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("deallocate_df",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.deallocate_df(v.session,v.df,v.device_type,v.device_id,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new Ow(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("deallocate_df",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("deallocate_df",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_interrupt(y,p,h){const v=new j3;v.read(p),p.readMessageEnd(),this._handler.interrupt.length===2?Promise.resolve(this._handler.interrupt.bind(this._handler)(v.query_session,v.interrupt_session)).then(_=>{const E=new Nw({success:_});h.writeMessageBegin("interrupt",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new Nw(_),h.writeMessageBegin("interrupt",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("interrupt",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.interrupt(v.query_session,v.interrupt_session,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new Nw(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("interrupt",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("interrupt",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_sql_validate(y,p,h){const v=new q3;v.read(p),p.readMessageEnd(),this._handler.sql_validate.length===2?Promise.resolve(this._handler.sql_validate.bind(this._handler)(v.session,v.query)).then(_=>{const E=new Cw({success:_});h.writeMessageBegin("sql_validate",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new Cw(_),h.writeMessageBegin("sql_validate",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("sql_validate",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.sql_validate(v.session,v.query,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new Cw(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("sql_validate",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("sql_validate",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_get_completion_hints(y,p,h){const v=new G3;v.read(p),p.readMessageEnd(),this._handler.get_completion_hints.length===3?Promise.resolve(this._handler.get_completion_hints.bind(this._handler)(v.session,v.sql,v.cursor)).then(_=>{const E=new Rw({success:_});h.writeMessageBegin("get_completion_hints",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new Rw(_),h.writeMessageBegin("get_completion_hints",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_completion_hints",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_completion_hints(v.session,v.sql,v.cursor,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new Rw(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("get_completion_hints",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_completion_hints",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_set_execution_mode(y,p,h){const v=new V3;v.read(p),p.readMessageEnd(),this._handler.set_execution_mode.length===2?Promise.resolve(this._handler.set_execution_mode.bind(this._handler)(v.session,v.mode)).then(_=>{const E=new Lw({success:_});h.writeMessageBegin("set_execution_mode",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new Lw(_),h.writeMessageBegin("set_execution_mode",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("set_execution_mode",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.set_execution_mode(v.session,v.mode,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new Lw(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("set_execution_mode",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("set_execution_mode",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_render_vega(y,p,h){const v=new W3;v.read(p),p.readMessageEnd(),this._handler.render_vega.length===5?Promise.resolve(this._handler.render_vega.bind(this._handler)(v.session,v.widget_id,v.vega_json,v.compression_level,v.nonce)).then(_=>{const E=new Dw({success:_});h.writeMessageBegin("render_vega",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new Dw(_),h.writeMessageBegin("render_vega",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("render_vega",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.render_vega(v.session,v.widget_id,v.vega_json,v.compression_level,v.nonce,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new Dw(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("render_vega",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("render_vega",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_get_result_row_for_pixel(y,p,h){const v=new H3;v.read(p),p.readMessageEnd(),this._handler.get_result_row_for_pixel.length===7?Promise.resolve(this._handler.get_result_row_for_pixel.bind(this._handler)(v.session,v.widget_id,v.pixel,v.table_col_names,v.column_format,v.pixelRadius,v.nonce)).then(_=>{const E=new Pw({success:_});h.writeMessageBegin("get_result_row_for_pixel",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new Pw(_),h.writeMessageBegin("get_result_row_for_pixel",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_result_row_for_pixel",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_result_row_for_pixel(v.session,v.widget_id,v.pixel,v.table_col_names,v.column_format,v.pixelRadius,v.nonce,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new Pw(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("get_result_row_for_pixel",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_result_row_for_pixel",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_create_custom_expression(y,p,h){const v=new Y3;v.read(p),p.readMessageEnd(),this._handler.create_custom_expression.length===2?Promise.resolve(this._handler.create_custom_expression.bind(this._handler)(v.session,v.custom_expression)).then(_=>{const E=new $w({success:_});h.writeMessageBegin("create_custom_expression",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new $w(_),h.writeMessageBegin("create_custom_expression",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("create_custom_expression",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.create_custom_expression(v.session,v.custom_expression,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new $w(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("create_custom_expression",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("create_custom_expression",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_get_custom_expressions(y,p,h){const v=new X3;v.read(p),p.readMessageEnd(),this._handler.get_custom_expressions.length===1?Promise.resolve(this._handler.get_custom_expressions.bind(this._handler)(v.session)).then(_=>{const E=new Uw({success:_});h.writeMessageBegin("get_custom_expressions",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new Uw(_),h.writeMessageBegin("get_custom_expressions",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_custom_expressions",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_custom_expressions(v.session,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new Uw(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("get_custom_expressions",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_custom_expressions",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_update_custom_expression(y,p,h){const v=new K3;v.read(p),p.readMessageEnd(),this._handler.update_custom_expression.length===3?Promise.resolve(this._handler.update_custom_expression.bind(this._handler)(v.session,v.id,v.expression_json)).then(_=>{const E=new zw({success:_});h.writeMessageBegin("update_custom_expression",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new zw(_),h.writeMessageBegin("update_custom_expression",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("update_custom_expression",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.update_custom_expression(v.session,v.id,v.expression_json,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new zw(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("update_custom_expression",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("update_custom_expression",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_delete_custom_expressions(y,p,h){const v=new J3;v.read(p),p.readMessageEnd(),this._handler.delete_custom_expressions.length===3?Promise.resolve(this._handler.delete_custom_expressions.bind(this._handler)(v.session,v.custom_expression_ids,v.do_soft_delete)).then(_=>{const E=new jw({success:_});h.writeMessageBegin("delete_custom_expressions",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new jw(_),h.writeMessageBegin("delete_custom_expressions",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("delete_custom_expressions",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.delete_custom_expressions(v.session,v.custom_expression_ids,v.do_soft_delete,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new jw(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("delete_custom_expressions",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("delete_custom_expressions",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_get_dashboard(y,p,h){const v=new Q3;v.read(p),p.readMessageEnd(),this._handler.get_dashboard.length===2?Promise.resolve(this._handler.get_dashboard.bind(this._handler)(v.session,v.dashboard_id)).then(_=>{const E=new qw({success:_});h.writeMessageBegin("get_dashboard",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new qw(_),h.writeMessageBegin("get_dashboard",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_dashboard",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_dashboard(v.session,v.dashboard_id,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new qw(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("get_dashboard",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_dashboard",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_get_dashboards(y,p,h){const v=new Z3;v.read(p),p.readMessageEnd(),this._handler.get_dashboards.length===1?Promise.resolve(this._handler.get_dashboards.bind(this._handler)(v.session)).then(_=>{const E=new Gw({success:_});h.writeMessageBegin("get_dashboards",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new Gw(_),h.writeMessageBegin("get_dashboards",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_dashboards",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_dashboards(v.session,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new Gw(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("get_dashboards",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_dashboards",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_create_dashboard(y,p,h){const v=new eL;v.read(p),p.readMessageEnd(),this._handler.create_dashboard.length===5?Promise.resolve(this._handler.create_dashboard.bind(this._handler)(v.session,v.dashboard_name,v.dashboard_state,v.image_hash,v.dashboard_metadata)).then(_=>{const E=new Vw({success:_});h.writeMessageBegin("create_dashboard",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new Vw(_),h.writeMessageBegin("create_dashboard",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("create_dashboard",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.create_dashboard(v.session,v.dashboard_name,v.dashboard_state,v.image_hash,v.dashboard_metadata,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new Vw(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("create_dashboard",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("create_dashboard",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_replace_dashboard(y,p,h){const v=new tL;v.read(p),p.readMessageEnd(),this._handler.replace_dashboard.length===7?Promise.resolve(this._handler.replace_dashboard.bind(this._handler)(v.session,v.dashboard_id,v.dashboard_name,v.dashboard_owner,v.dashboard_state,v.image_hash,v.dashboard_metadata)).then(_=>{const E=new Ww({success:_});h.writeMessageBegin("replace_dashboard",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new Ww(_),h.writeMessageBegin("replace_dashboard",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("replace_dashboard",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.replace_dashboard(v.session,v.dashboard_id,v.dashboard_name,v.dashboard_owner,v.dashboard_state,v.image_hash,v.dashboard_metadata,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new Ww(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("replace_dashboard",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("replace_dashboard",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_delete_dashboard(y,p,h){const v=new iL;v.read(p),p.readMessageEnd(),this._handler.delete_dashboard.length===2?Promise.resolve(this._handler.delete_dashboard.bind(this._handler)(v.session,v.dashboard_id)).then(_=>{const E=new Hw({success:_});h.writeMessageBegin("delete_dashboard",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new Hw(_),h.writeMessageBegin("delete_dashboard",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("delete_dashboard",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.delete_dashboard(v.session,v.dashboard_id,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new Hw(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("delete_dashboard",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("delete_dashboard",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_share_dashboards(y,p,h){const v=new nL;v.read(p),p.readMessageEnd(),this._handler.share_dashboards.length===4?Promise.resolve(this._handler.share_dashboards.bind(this._handler)(v.session,v.dashboard_ids,v.groups,v.permissions)).then(_=>{const E=new Yw({success:_});h.writeMessageBegin("share_dashboards",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new Yw(_),h.writeMessageBegin("share_dashboards",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("share_dashboards",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.share_dashboards(v.session,v.dashboard_ids,v.groups,v.permissions,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new Yw(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("share_dashboards",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("share_dashboards",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_delete_dashboards(y,p,h){const v=new sL;v.read(p),p.readMessageEnd(),this._handler.delete_dashboards.length===2?Promise.resolve(this._handler.delete_dashboards.bind(this._handler)(v.session,v.dashboard_ids)).then(_=>{const E=new Xw({success:_});h.writeMessageBegin("delete_dashboards",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new Xw(_),h.writeMessageBegin("delete_dashboards",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("delete_dashboards",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.delete_dashboards(v.session,v.dashboard_ids,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new Xw(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("delete_dashboards",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("delete_dashboards",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_share_dashboard(y,p,h){const v=new rL;v.read(p),p.readMessageEnd(),this._handler.share_dashboard.length===6?Promise.resolve(this._handler.share_dashboard.bind(this._handler)(v.session,v.dashboard_id,v.groups,v.objects,v.permissions,v.grant_role)).then(_=>{const E=new Kw({success:_});h.writeMessageBegin("share_dashboard",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new Kw(_),h.writeMessageBegin("share_dashboard",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("share_dashboard",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.share_dashboard(v.session,v.dashboard_id,v.groups,v.objects,v.permissions,v.grant_role,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new Kw(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("share_dashboard",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("share_dashboard",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_unshare_dashboard(y,p,h){const v=new aL;v.read(p),p.readMessageEnd(),this._handler.unshare_dashboard.length===5?Promise.resolve(this._handler.unshare_dashboard.bind(this._handler)(v.session,v.dashboard_id,v.groups,v.objects,v.permissions)).then(_=>{const E=new Jw({success:_});h.writeMessageBegin("unshare_dashboard",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new Jw(_),h.writeMessageBegin("unshare_dashboard",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("unshare_dashboard",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.unshare_dashboard(v.session,v.dashboard_id,v.groups,v.objects,v.permissions,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new Jw(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("unshare_dashboard",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("unshare_dashboard",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_unshare_dashboards(y,p,h){const v=new oL;v.read(p),p.readMessageEnd(),this._handler.unshare_dashboards.length===4?Promise.resolve(this._handler.unshare_dashboards.bind(this._handler)(v.session,v.dashboard_ids,v.groups,v.permissions)).then(_=>{const E=new Qw({success:_});h.writeMessageBegin("unshare_dashboards",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new Qw(_),h.writeMessageBegin("unshare_dashboards",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("unshare_dashboards",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.unshare_dashboards(v.session,v.dashboard_ids,v.groups,v.permissions,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new Qw(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("unshare_dashboards",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("unshare_dashboards",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_get_dashboard_grantees(y,p,h){const v=new lL;v.read(p),p.readMessageEnd(),this._handler.get_dashboard_grantees.length===2?Promise.resolve(this._handler.get_dashboard_grantees.bind(this._handler)(v.session,v.dashboard_id)).then(_=>{const E=new Zw({success:_});h.writeMessageBegin("get_dashboard_grantees",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new Zw(_),h.writeMessageBegin("get_dashboard_grantees",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_dashboard_grantees",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_dashboard_grantees(v.session,v.dashboard_id,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new Zw(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("get_dashboard_grantees",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_dashboard_grantees",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_get_link_view(y,p,h){const v=new cL;v.read(p),p.readMessageEnd(),this._handler.get_link_view.length===2?Promise.resolve(this._handler.get_link_view.bind(this._handler)(v.session,v.link)).then(_=>{const E=new eb({success:_});h.writeMessageBegin("get_link_view",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new eb(_),h.writeMessageBegin("get_link_view",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_link_view",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_link_view(v.session,v.link,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new eb(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("get_link_view",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_link_view",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_create_link(y,p,h){const v=new dL;v.read(p),p.readMessageEnd(),this._handler.create_link.length===3?Promise.resolve(this._handler.create_link.bind(this._handler)(v.session,v.view_state,v.view_metadata)).then(_=>{const E=new tb({success:_});h.writeMessageBegin("create_link",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new tb(_),h.writeMessageBegin("create_link",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("create_link",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.create_link(v.session,v.view_state,v.view_metadata,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new tb(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("create_link",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("create_link",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_load_table_binary(y,p,h){const v=new fL;v.read(p),p.readMessageEnd(),this._handler.load_table_binary.length===4?Promise.resolve(this._handler.load_table_binary.bind(this._handler)(v.session,v.table_name,v.rows,v.column_names)).then(_=>{const E=new ib({success:_});h.writeMessageBegin("load_table_binary",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new ib(_),h.writeMessageBegin("load_table_binary",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("load_table_binary",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.load_table_binary(v.session,v.table_name,v.rows,v.column_names,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new ib(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("load_table_binary",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("load_table_binary",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_load_table_binary_columnar(y,p,h){const v=new uL;v.read(p),p.readMessageEnd(),this._handler.load_table_binary_columnar.length===4?Promise.resolve(this._handler.load_table_binary_columnar.bind(this._handler)(v.session,v.table_name,v.cols,v.column_names)).then(_=>{const E=new nb({success:_});h.writeMessageBegin("load_table_binary_columnar",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new nb(_),h.writeMessageBegin("load_table_binary_columnar",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("load_table_binary_columnar",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.load_table_binary_columnar(v.session,v.table_name,v.cols,v.column_names,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new nb(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("load_table_binary_columnar",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("load_table_binary_columnar",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_load_table_binary_columnar_polys(y,p,h){const v=new hL;v.read(p),p.readMessageEnd(),this._handler.load_table_binary_columnar_polys.length===5?Promise.resolve(this._handler.load_table_binary_columnar_polys.bind(this._handler)(v.session,v.table_name,v.cols,v.column_names,v.assign_render_groups)).then(_=>{const E=new sb({success:_});h.writeMessageBegin("load_table_binary_columnar_polys",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new sb(_),h.writeMessageBegin("load_table_binary_columnar_polys",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("load_table_binary_columnar_polys",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.load_table_binary_columnar_polys(v.session,v.table_name,v.cols,v.column_names,v.assign_render_groups,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new sb(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("load_table_binary_columnar_polys",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("load_table_binary_columnar_polys",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_load_table_binary_arrow(y,p,h){const v=new pL;v.read(p),p.readMessageEnd(),this._handler.load_table_binary_arrow.length===4?Promise.resolve(this._handler.load_table_binary_arrow.bind(this._handler)(v.session,v.table_name,v.arrow_stream,v.use_column_names)).then(_=>{const E=new rb({success:_});h.writeMessageBegin("load_table_binary_arrow",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new rb(_),h.writeMessageBegin("load_table_binary_arrow",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("load_table_binary_arrow",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.load_table_binary_arrow(v.session,v.table_name,v.arrow_stream,v.use_column_names,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new rb(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("load_table_binary_arrow",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("load_table_binary_arrow",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_load_table(y,p,h){const v=new _L;v.read(p),p.readMessageEnd(),this._handler.load_table.length===4?Promise.resolve(this._handler.load_table.bind(this._handler)(v.session,v.table_name,v.rows,v.column_names)).then(_=>{const E=new ab({success:_});h.writeMessageBegin("load_table",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new ab(_),h.writeMessageBegin("load_table",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("load_table",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.load_table(v.session,v.table_name,v.rows,v.column_names,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new ab(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("load_table",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("load_table",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_detect_column_types(y,p,h){const v=new yL;v.read(p),p.readMessageEnd(),this._handler.detect_column_types.length===3?Promise.resolve(this._handler.detect_column_types.bind(this._handler)(v.session,v.file_name,v.copy_params)).then(_=>{const E=new ob({success:_});h.writeMessageBegin("detect_column_types",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new ob(_),h.writeMessageBegin("detect_column_types",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("detect_column_types",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.detect_column_types(v.session,v.file_name,v.copy_params,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new ob(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("detect_column_types",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("detect_column_types",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_create_table(y,p,h){const v=new gL;v.read(p),p.readMessageEnd(),this._handler.create_table.length===4?Promise.resolve(this._handler.create_table.bind(this._handler)(v.session,v.table_name,v.row_desc,v.create_params)).then(_=>{const E=new lb({success:_});h.writeMessageBegin("create_table",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new lb(_),h.writeMessageBegin("create_table",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("create_table",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.create_table(v.session,v.table_name,v.row_desc,v.create_params,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new lb(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("create_table",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("create_table",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_import_table(y,p,h){const v=new mL;v.read(p),p.readMessageEnd(),this._handler.import_table.length===4?Promise.resolve(this._handler.import_table.bind(this._handler)(v.session,v.table_name,v.file_name,v.copy_params)).then(_=>{const E=new cb({success:_});h.writeMessageBegin("import_table",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new cb(_),h.writeMessageBegin("import_table",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("import_table",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.import_table(v.session,v.table_name,v.file_name,v.copy_params,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new cb(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("import_table",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("import_table",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_import_geo_table(y,p,h){const v=new wL;v.read(p),p.readMessageEnd(),this._handler.import_geo_table.length===6?Promise.resolve(this._handler.import_geo_table.bind(this._handler)(v.session,v.table_name,v.file_name,v.copy_params,v.row_desc,v.create_params)).then(_=>{const E=new db({success:_});h.writeMessageBegin("import_geo_table",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new db(_),h.writeMessageBegin("import_geo_table",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("import_geo_table",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.import_geo_table(v.session,v.table_name,v.file_name,v.copy_params,v.row_desc,v.create_params,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new db(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("import_geo_table",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("import_geo_table",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_import_table_status(y,p,h){const v=new bL;v.read(p),p.readMessageEnd(),this._handler.import_table_status.length===2?Promise.resolve(this._handler.import_table_status.bind(this._handler)(v.session,v.import_id)).then(_=>{const E=new fb({success:_});h.writeMessageBegin("import_table_status",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new fb(_),h.writeMessageBegin("import_table_status",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("import_table_status",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.import_table_status(v.session,v.import_id,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new fb(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("import_table_status",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("import_table_status",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_get_first_geo_file_in_archive(y,p,h){const v=new TL;v.read(p),p.readMessageEnd(),this._handler.get_first_geo_file_in_archive.length===3?Promise.resolve(this._handler.get_first_geo_file_in_archive.bind(this._handler)(v.session,v.archive_path,v.copy_params)).then(_=>{const E=new ub({success:_});h.writeMessageBegin("get_first_geo_file_in_archive",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new ub(_),h.writeMessageBegin("get_first_geo_file_in_archive",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_first_geo_file_in_archive",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_first_geo_file_in_archive(v.session,v.archive_path,v.copy_params,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new ub(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("get_first_geo_file_in_archive",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_first_geo_file_in_archive",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_get_all_files_in_archive(y,p,h){const v=new vL;v.read(p),p.readMessageEnd(),this._handler.get_all_files_in_archive.length===3?Promise.resolve(this._handler.get_all_files_in_archive.bind(this._handler)(v.session,v.archive_path,v.copy_params)).then(_=>{const E=new hb({success:_});h.writeMessageBegin("get_all_files_in_archive",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new hb(_),h.writeMessageBegin("get_all_files_in_archive",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_all_files_in_archive",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_all_files_in_archive(v.session,v.archive_path,v.copy_params,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new hb(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("get_all_files_in_archive",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_all_files_in_archive",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_get_layers_in_geo_file(y,p,h){const v=new EL;v.read(p),p.readMessageEnd(),this._handler.get_layers_in_geo_file.length===3?Promise.resolve(this._handler.get_layers_in_geo_file.bind(this._handler)(v.session,v.file_name,v.copy_params)).then(_=>{const E=new pb({success:_});h.writeMessageBegin("get_layers_in_geo_file",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new pb(_),h.writeMessageBegin("get_layers_in_geo_file",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_layers_in_geo_file",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_layers_in_geo_file(v.session,v.file_name,v.copy_params,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new pb(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("get_layers_in_geo_file",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_layers_in_geo_file",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_query_get_outer_fragment_count(y,p,h){const v=new SL;v.read(p),p.readMessageEnd(),this._handler.query_get_outer_fragment_count.length===2?Promise.resolve(this._handler.query_get_outer_fragment_count.bind(this._handler)(v.session,v.query)).then(_=>{const E=new _b({success:_});h.writeMessageBegin("query_get_outer_fragment_count",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new _b(_),h.writeMessageBegin("query_get_outer_fragment_count",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("query_get_outer_fragment_count",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.query_get_outer_fragment_count(v.session,v.query,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new _b(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("query_get_outer_fragment_count",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("query_get_outer_fragment_count",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_check_table_consistency(y,p,h){const v=new xL;v.read(p),p.readMessageEnd(),this._handler.check_table_consistency.length===2?Promise.resolve(this._handler.check_table_consistency.bind(this._handler)(v.session,v.table_id)).then(_=>{const E=new yb({success:_});h.writeMessageBegin("check_table_consistency",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new yb(_),h.writeMessageBegin("check_table_consistency",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("check_table_consistency",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.check_table_consistency(v.session,v.table_id,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new yb(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("check_table_consistency",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("check_table_consistency",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_start_query(y,p,h){const v=new BL;v.read(p),p.readMessageEnd(),this._handler.start_query.length===6?Promise.resolve(this._handler.start_query.bind(this._handler)(v.leaf_session,v.parent_session,v.query_ra,v.start_time_str,v.just_explain,v.outer_fragment_indices)).then(_=>{const E=new gb({success:_});h.writeMessageBegin("start_query",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new gb(_),h.writeMessageBegin("start_query",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("start_query",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.start_query(v.leaf_session,v.parent_session,v.query_ra,v.start_time_str,v.just_explain,v.outer_fragment_indices,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new gb(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("start_query",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("start_query",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_execute_query_step(y,p,h){const v=new IL;v.read(p),p.readMessageEnd(),this._handler.execute_query_step.length===3?Promise.resolve(this._handler.execute_query_step.bind(this._handler)(v.pending_query,v.subquery_id,v.start_time_str)).then(_=>{const E=new mb({success:_});h.writeMessageBegin("execute_query_step",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new mb(_),h.writeMessageBegin("execute_query_step",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("execute_query_step",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.execute_query_step(v.pending_query,v.subquery_id,v.start_time_str,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new mb(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("execute_query_step",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("execute_query_step",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_broadcast_serialized_rows(y,p,h){const v=new kL;v.read(p),p.readMessageEnd(),this._handler.broadcast_serialized_rows.length===5?Promise.resolve(this._handler.broadcast_serialized_rows.bind(this._handler)(v.serialized_rows,v.row_desc,v.query_id,v.subquery_id,v.is_final_subquery_result)).then(_=>{const E=new wb({success:_});h.writeMessageBegin("broadcast_serialized_rows",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new wb(_),h.writeMessageBegin("broadcast_serialized_rows",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("broadcast_serialized_rows",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.broadcast_serialized_rows(v.serialized_rows,v.row_desc,v.query_id,v.subquery_id,v.is_final_subquery_result,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new wb(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("broadcast_serialized_rows",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("broadcast_serialized_rows",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_start_render_query(y,p,h){const v=new FL;v.read(p),p.readMessageEnd(),this._handler.start_render_query.length===4?Promise.resolve(this._handler.start_render_query.bind(this._handler)(v.session,v.widget_id,v.node_idx,v.vega_json)).then(_=>{const E=new bb({success:_});h.writeMessageBegin("start_render_query",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new bb(_),h.writeMessageBegin("start_render_query",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("start_render_query",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.start_render_query(v.session,v.widget_id,v.node_idx,v.vega_json,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new bb(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("start_render_query",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("start_render_query",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_execute_next_render_step(y,p,h){const v=new ML;v.read(p),p.readMessageEnd(),this._handler.execute_next_render_step.length===2?Promise.resolve(this._handler.execute_next_render_step.bind(this._handler)(v.pending_render,v.merged_data)).then(_=>{const E=new Tb({success:_});h.writeMessageBegin("execute_next_render_step",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new Tb(_),h.writeMessageBegin("execute_next_render_step",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("execute_next_render_step",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.execute_next_render_step(v.pending_render,v.merged_data,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new Tb(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("execute_next_render_step",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("execute_next_render_step",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_insert_data(y,p,h){const v=new AL;v.read(p),p.readMessageEnd(),this._handler.insert_data.length===2?Promise.resolve(this._handler.insert_data.bind(this._handler)(v.session,v.insert_data)).then(_=>{const E=new vb({success:_});h.writeMessageBegin("insert_data",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new vb(_),h.writeMessageBegin("insert_data",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("insert_data",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.insert_data(v.session,v.insert_data,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new vb(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("insert_data",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("insert_data",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_insert_chunks(y,p,h){const v=new OL;v.read(p),p.readMessageEnd(),this._handler.insert_chunks.length===2?Promise.resolve(this._handler.insert_chunks.bind(this._handler)(v.session,v.insert_chunks)).then(_=>{const E=new Eb({success:_});h.writeMessageBegin("insert_chunks",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new Eb(_),h.writeMessageBegin("insert_chunks",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("insert_chunks",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.insert_chunks(v.session,v.insert_chunks,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new Eb(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("insert_chunks",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("insert_chunks",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_checkpoint(y,p,h){const v=new NL;v.read(p),p.readMessageEnd(),this._handler.checkpoint.length===2?Promise.resolve(this._handler.checkpoint.bind(this._handler)(v.session,v.table_id)).then(_=>{const E=new Sb({success:_});h.writeMessageBegin("checkpoint",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new Sb(_),h.writeMessageBegin("checkpoint",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("checkpoint",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.checkpoint(v.session,v.table_id,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new Sb(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("checkpoint",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("checkpoint",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_get_roles(y,p,h){const v=new CL;v.read(p),p.readMessageEnd(),this._handler.get_roles.length===1?Promise.resolve(this._handler.get_roles.bind(this._handler)(v.session)).then(_=>{const E=new xb({success:_});h.writeMessageBegin("get_roles",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new xb(_),h.writeMessageBegin("get_roles",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_roles",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_roles(v.session,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new xb(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("get_roles",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_roles",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_get_db_objects_for_grantee(y,p,h){const v=new RL;v.read(p),p.readMessageEnd(),this._handler.get_db_objects_for_grantee.length===2?Promise.resolve(this._handler.get_db_objects_for_grantee.bind(this._handler)(v.session,v.roleName)).then(_=>{const E=new Bb({success:_});h.writeMessageBegin("get_db_objects_for_grantee",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new Bb(_),h.writeMessageBegin("get_db_objects_for_grantee",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_db_objects_for_grantee",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_db_objects_for_grantee(v.session,v.roleName,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new Bb(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("get_db_objects_for_grantee",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_db_objects_for_grantee",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_get_db_object_privs(y,p,h){const v=new LL;v.read(p),p.readMessageEnd(),this._handler.get_db_object_privs.length===3?Promise.resolve(this._handler.get_db_object_privs.bind(this._handler)(v.session,v.objectName,v.type)).then(_=>{const E=new Ib({success:_});h.writeMessageBegin("get_db_object_privs",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new Ib(_),h.writeMessageBegin("get_db_object_privs",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_db_object_privs",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_db_object_privs(v.session,v.objectName,v.type,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new Ib(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("get_db_object_privs",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_db_object_privs",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_get_all_roles_for_user(y,p,h){const v=new DL;v.read(p),p.readMessageEnd(),this._handler.get_all_roles_for_user.length===2?Promise.resolve(this._handler.get_all_roles_for_user.bind(this._handler)(v.session,v.userName)).then(_=>{const E=new kb({success:_});h.writeMessageBegin("get_all_roles_for_user",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new kb(_),h.writeMessageBegin("get_all_roles_for_user",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_all_roles_for_user",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_all_roles_for_user(v.session,v.userName,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new kb(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("get_all_roles_for_user",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_all_roles_for_user",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_get_all_effective_roles_for_user(y,p,h){const v=new PL;v.read(p),p.readMessageEnd(),this._handler.get_all_effective_roles_for_user.length===2?Promise.resolve(this._handler.get_all_effective_roles_for_user.bind(this._handler)(v.session,v.userName)).then(_=>{const E=new Fb({success:_});h.writeMessageBegin("get_all_effective_roles_for_user",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new Fb(_),h.writeMessageBegin("get_all_effective_roles_for_user",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_all_effective_roles_for_user",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_all_effective_roles_for_user(v.session,v.userName,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new Fb(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("get_all_effective_roles_for_user",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_all_effective_roles_for_user",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_has_role(y,p,h){const v=new $L;v.read(p),p.readMessageEnd(),this._handler.has_role.length===3?Promise.resolve(this._handler.has_role.bind(this._handler)(v.session,v.granteeName,v.roleName)).then(_=>{const E=new Mb({success:_});h.writeMessageBegin("has_role",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new Mb(_),h.writeMessageBegin("has_role",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("has_role",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.has_role(v.session,v.granteeName,v.roleName,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new Mb(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("has_role",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("has_role",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_has_object_privilege(y,p,h){const v=new UL;v.read(p),p.readMessageEnd(),this._handler.has_object_privilege.length===5?Promise.resolve(this._handler.has_object_privilege.bind(this._handler)(v.session,v.granteeName,v.ObjectName,v.objectType,v.permissions)).then(_=>{const E=new Ab({success:_});h.writeMessageBegin("has_object_privilege",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new Ab(_),h.writeMessageBegin("has_object_privilege",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("has_object_privilege",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.has_object_privilege(v.session,v.granteeName,v.ObjectName,v.objectType,v.permissions,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new Ab(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("has_object_privilege",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("has_object_privilege",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_set_license_key(y,p,h){const v=new zL;v.read(p),p.readMessageEnd(),this._handler.set_license_key.length===3?Promise.resolve(this._handler.set_license_key.bind(this._handler)(v.session,v.key,v.nonce)).then(_=>{const E=new Ob({success:_});h.writeMessageBegin("set_license_key",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new Ob(_),h.writeMessageBegin("set_license_key",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("set_license_key",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.set_license_key(v.session,v.key,v.nonce,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new Ob(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("set_license_key",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("set_license_key",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_get_license_claims(y,p,h){const v=new jL;v.read(p),p.readMessageEnd(),this._handler.get_license_claims.length===2?Promise.resolve(this._handler.get_license_claims.bind(this._handler)(v.session,v.nonce)).then(_=>{const E=new Nb({success:_});h.writeMessageBegin("get_license_claims",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new Nb(_),h.writeMessageBegin("get_license_claims",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_license_claims",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_license_claims(v.session,v.nonce,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new Nb(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("get_license_claims",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_license_claims",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_get_device_parameters(y,p,h){const v=new qL;v.read(p),p.readMessageEnd(),this._handler.get_device_parameters.length===1?Promise.resolve(this._handler.get_device_parameters.bind(this._handler)(v.session)).then(_=>{const E=new Cb({success:_});h.writeMessageBegin("get_device_parameters",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new Cb(_),h.writeMessageBegin("get_device_parameters",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_device_parameters",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_device_parameters(v.session,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new Cb(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("get_device_parameters",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_device_parameters",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_register_runtime_extension_functions(y,p,h){const v=new GL;v.read(p),p.readMessageEnd(),this._handler.register_runtime_extension_functions.length===4?Promise.resolve(this._handler.register_runtime_extension_functions.bind(this._handler)(v.session,v.udfs,v.udtfs,v.device_ir_map)).then(_=>{const E=new Rb({success:_});h.writeMessageBegin("register_runtime_extension_functions",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new Rb(_),h.writeMessageBegin("register_runtime_extension_functions",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("register_runtime_extension_functions",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.register_runtime_extension_functions(v.session,v.udfs,v.udtfs,v.device_ir_map,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new Rb(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("register_runtime_extension_functions",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("register_runtime_extension_functions",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_get_table_function_names(y,p,h){const v=new VL;v.read(p),p.readMessageEnd(),this._handler.get_table_function_names.length===1?Promise.resolve(this._handler.get_table_function_names.bind(this._handler)(v.session)).then(_=>{const E=new Lb({success:_});h.writeMessageBegin("get_table_function_names",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new Lb(_),h.writeMessageBegin("get_table_function_names",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_table_function_names",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_table_function_names(v.session,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new Lb(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("get_table_function_names",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_table_function_names",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_get_runtime_table_function_names(y,p,h){const v=new WL;v.read(p),p.readMessageEnd(),this._handler.get_runtime_table_function_names.length===1?Promise.resolve(this._handler.get_runtime_table_function_names.bind(this._handler)(v.session)).then(_=>{const E=new Db({success:_});h.writeMessageBegin("get_runtime_table_function_names",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new Db(_),h.writeMessageBegin("get_runtime_table_function_names",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_runtime_table_function_names",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_runtime_table_function_names(v.session,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new Db(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("get_runtime_table_function_names",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_runtime_table_function_names",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}process_get_table_function_details(y,p,h){const v=new HL;v.read(p),p.readMessageEnd(),this._handler.get_table_function_details.length===2?Promise.resolve(this._handler.get_table_function_details.bind(this._handler)(v.session,v.udtf_names)).then(_=>{const E=new Pb({success:_});h.writeMessageBegin("get_table_function_details",o.MessageType.REPLY,y),E.write(h),h.writeMessageEnd(),h.flush()}).catch(_=>{let E;_ instanceof l.TDBException?(E=new Pb(_),h.writeMessageBegin("get_table_function_details",o.MessageType.REPLY,y)):(E=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_table_function_details",o.MessageType.EXCEPTION,y)),E.write(h),h.writeMessageEnd(),h.flush()}):this._handler.get_table_function_details(v.session,v.udtf_names,(_,E)=>{let k;_===null||typeof _>"u"||_ instanceof l.TDBException?(k=new Pb(_!==null||typeof _>"u"?_:{success:E}),h.writeMessageBegin("get_table_function_details",o.MessageType.REPLY,y)):(k=new o.TApplicationException(o.TApplicationExceptionType.UNKNOWN,_.message),h.writeMessageBegin("get_table_function_details",o.MessageType.EXCEPTION,y)),k.write(h),h.writeMessageEnd(),h.flush()})}}},2818:(c,d,f)=>{const o=f(9262).Thrift;f(135);const g=c.exports={};g.TDeviceType={CPU:0,GPU:1},g.TDatumType={SMALLINT:0,INT:1,BIGINT:2,FLOAT:3,DECIMAL:4,DOUBLE:5,STR:6,TIME:7,TIMESTAMP:8,DATE:9,BOOL:10,INTERVAL_DAY_TIME:11,INTERVAL_YEAR_MONTH:12,POINT:13,LINESTRING:14,POLYGON:15,MULTIPOLYGON:16,TINYINT:17,GEOMETRY:18,GEOGRAPHY:19},g.TEncodingType={NONE:0,FIXED:1,RL:2,DIFF:3,DICT:4,SPARSE:5,GEOINT:6,DATE_IN_DAYS:7},c.exports.TTypeInfo=class{constructor(w){this.type=null,this.encoding=null,this.nullable=null,this.is_array=null,this.precision=null,this.scale=null,this.comp_param=null,this.size=-1,w&&(w.type!==void 0&&w.type!==null&&(this.type=w.type),w.encoding!==void 0&&w.encoding!==null&&(this.encoding=w.encoding),w.nullable!==void 0&&w.nullable!==null&&(this.nullable=w.nullable),w.is_array!==void 0&&w.is_array!==null&&(this.is_array=w.is_array),w.precision!==void 0&&w.precision!==null&&(this.precision=w.precision),w.scale!==void 0&&w.scale!==null&&(this.scale=w.scale),w.comp_param!==void 0&&w.comp_param!==null&&(this.comp_param=w.comp_param),w.size!==void 0&&w.size!==null&&(this.size=w.size))}read(w){for(w.readStructBegin();;){const m=w.readFieldBegin(),l=m.ftype,T=m.fid;if(l==o.Type.STOP)break;switch(T){case 1:l==o.Type.I32?this.type=w.readI32():w.skip(l);break;case 4:l==o.Type.I32?this.encoding=w.readI32():w.skip(l);break;case 2:l==o.Type.BOOL?this.nullable=w.readBool():w.skip(l);break;case 3:l==o.Type.BOOL?this.is_array=w.readBool():w.skip(l);break;case 5:l==o.Type.I32?this.precision=w.readI32():w.skip(l);break;case 6:l==o.Type.I32?this.scale=w.readI32():w.skip(l);break;case 7:l==o.Type.I32?this.comp_param=w.readI32():w.skip(l);break;case 8:l==o.Type.I32?this.size=w.readI32():w.skip(l);break;default:w.skip(l)}w.readFieldEnd()}w.readStructEnd()}write(w){w.writeStructBegin("TTypeInfo"),this.type!==null&&this.type!==void 0&&(w.writeFieldBegin("type",o.Type.I32,1),w.writeI32(this.type),w.writeFieldEnd()),this.encoding!==null&&this.encoding!==void 0&&(w.writeFieldBegin("encoding",o.Type.I32,4),w.writeI32(this.encoding),w.writeFieldEnd()),this.nullable!==null&&this.nullable!==void 0&&(w.writeFieldBegin("nullable",o.Type.BOOL,2),w.writeBool(this.nullable),w.writeFieldEnd()),this.is_array!==null&&this.is_array!==void 0&&(w.writeFieldBegin("is_array",o.Type.BOOL,3),w.writeBool(this.is_array),w.writeFieldEnd()),this.precision!==null&&this.precision!==void 0&&(w.writeFieldBegin("precision",o.Type.I32,5),w.writeI32(this.precision),w.writeFieldEnd()),this.scale!==null&&this.scale!==void 0&&(w.writeFieldBegin("scale",o.Type.I32,6),w.writeI32(this.scale),w.writeFieldEnd()),this.comp_param!==null&&this.comp_param!==void 0&&(w.writeFieldBegin("comp_param",o.Type.I32,7),w.writeI32(this.comp_param),w.writeFieldEnd()),this.size!==null&&this.size!==void 0&&(w.writeFieldBegin("size",o.Type.I32,8),w.writeI32(this.size),w.writeFieldEnd()),w.writeFieldStop(),w.writeStructEnd()}}},4494:(c,d,f)=>{const o=f(9262).Thrift;f(135);const g=c.exports={};g.TCompletionHintType={COLUMN:0,TABLE:1,VIEW:2,SCHEMA:3,CATALOG:4,REPOSITORY:5,FUNCTION:6,KEYWORD:7},c.exports.TCompletionHint=class{constructor(w){this.type=null,this.hints=null,this.replaced=null,w&&(w.type!==void 0&&w.type!==null&&(this.type=w.type),w.hints!==void 0&&w.hints!==null&&(this.hints=o.copyList(w.hints,[null])),w.replaced!==void 0&&w.replaced!==null&&(this.replaced=w.replaced))}read(w){for(w.readStructBegin();;){const m=w.readFieldBegin(),l=m.ftype,T=m.fid;if(l==o.Type.STOP)break;switch(T){case 1:l==o.Type.I32?this.type=w.readI32():w.skip(l);break;case 2:if(l==o.Type.LIST){this.hints=[];const S=w.readListBegin().size||0;for(let x=0;x<S;++x){let B=null;B=w.readString(),this.hints.push(B)}w.readListEnd()}else w.skip(l);break;case 3:l==o.Type.STRING?this.replaced=w.readString():w.skip(l);break;default:w.skip(l)}w.readFieldEnd()}w.readStructEnd()}write(w){if(w.writeStructBegin("TCompletionHint"),this.type!==null&&this.type!==void 0&&(w.writeFieldBegin("type",o.Type.I32,1),w.writeI32(this.type),w.writeFieldEnd()),this.hints!==null&&this.hints!==void 0){w.writeFieldBegin("hints",o.Type.LIST,2),w.writeListBegin(o.Type.STRING,this.hints.length);for(let m in this.hints)this.hints.hasOwnProperty(m)&&(m=this.hints[m],w.writeString(m));w.writeListEnd(),w.writeFieldEnd()}this.replaced!==null&&this.replaced!==void 0&&(w.writeFieldBegin("replaced",o.Type.STRING,3),w.writeString(this.replaced),w.writeFieldEnd()),w.writeFieldStop(),w.writeStructEnd()}}},1396:(c,d,f)=>{const o=f(9262).Thrift;f(135);const g=c.exports={};g.TExtArgumentType={Int8:0,Int16:1,Int32:2,Int64:3,Float:4,Double:5,Void:6,PInt8:7,PInt16:8,PInt32:9,PInt64:10,PFloat:11,PDouble:12,PBool:13,Bool:14,ArrayInt8:15,ArrayInt16:16,ArrayInt32:17,ArrayInt64:18,ArrayFloat:19,ArrayDouble:20,ArrayBool:21,GeoPoint:22,GeoLineString:23,Cursor:24,GeoPolygon:25,GeoMultiPolygon:26,ColumnInt8:27,ColumnInt16:28,ColumnInt32:29,ColumnInt64:30,ColumnFloat:31,ColumnDouble:32,ColumnBool:33,TextEncodingNone:34,TextEncodingDict:35,ColumnListInt8:36,ColumnListInt16:37,ColumnListInt32:38,ColumnListInt64:39,ColumnListFloat:40,ColumnListDouble:41,ColumnListBool:42,ColumnTextEncodingDict:43,ColumnListTextEncodingDict:44,ColumnTimestamp:45,Timestamp:46},g.TOutputBufferSizeType={kConstant:0,kUserSpecifiedConstantParameter:1,kUserSpecifiedRowMultiplier:2,kTableFunctionSpecifiedParameter:3,kPreFlightParameter:4},c.exports.TUserDefinedFunction=class{constructor(w){this.name=null,this.argTypes=null,this.retType=null,w&&(w.name!==void 0&&w.name!==null&&(this.name=w.name),w.argTypes!==void 0&&w.argTypes!==null&&(this.argTypes=o.copyList(w.argTypes,[null])),w.retType!==void 0&&w.retType!==null&&(this.retType=w.retType))}read(w){for(w.readStructBegin();;){const m=w.readFieldBegin(),l=m.ftype,T=m.fid;if(l==o.Type.STOP)break;switch(T){case 1:l==o.Type.STRING?this.name=w.readString():w.skip(l);break;case 2:if(l==o.Type.LIST){this.argTypes=[];const S=w.readListBegin().size||0;for(let x=0;x<S;++x){let B=null;B=w.readI32(),this.argTypes.push(B)}w.readListEnd()}else w.skip(l);break;case 3:l==o.Type.I32?this.retType=w.readI32():w.skip(l);break;default:w.skip(l)}w.readFieldEnd()}w.readStructEnd()}write(w){if(w.writeStructBegin("TUserDefinedFunction"),this.name!==null&&this.name!==void 0&&(w.writeFieldBegin("name",o.Type.STRING,1),w.writeString(this.name),w.writeFieldEnd()),this.argTypes!==null&&this.argTypes!==void 0){w.writeFieldBegin("argTypes",o.Type.LIST,2),w.writeListBegin(o.Type.I32,this.argTypes.length);for(let m in this.argTypes)this.argTypes.hasOwnProperty(m)&&(m=this.argTypes[m],w.writeI32(m));w.writeListEnd(),w.writeFieldEnd()}this.retType!==null&&this.retType!==void 0&&(w.writeFieldBegin("retType",o.Type.I32,3),w.writeI32(this.retType),w.writeFieldEnd()),w.writeFieldStop(),w.writeStructEnd()}},c.exports.TUserDefinedTableFunction=class{constructor(w){this.name=null,this.sizerType=null,this.sizerArgPos=null,this.inputArgTypes=null,this.outputArgTypes=null,this.sqlArgTypes=null,this.annotations=null,w&&(w.name!==void 0&&w.name!==null&&(this.name=w.name),w.sizerType!==void 0&&w.sizerType!==null&&(this.sizerType=w.sizerType),w.sizerArgPos!==void 0&&w.sizerArgPos!==null&&(this.sizerArgPos=w.sizerArgPos),w.inputArgTypes!==void 0&&w.inputArgTypes!==null&&(this.inputArgTypes=o.copyList(w.inputArgTypes,[null])),w.outputArgTypes!==void 0&&w.outputArgTypes!==null&&(this.outputArgTypes=o.copyList(w.outputArgTypes,[null])),w.sqlArgTypes!==void 0&&w.sqlArgTypes!==null&&(this.sqlArgTypes=o.copyList(w.sqlArgTypes,[null])),w.annotations!==void 0&&w.annotations!==null&&(this.annotations=o.copyList(w.annotations,[o.copyMap,null])))}read(w){for(w.readStructBegin();;){const m=w.readFieldBegin(),l=m.ftype,T=m.fid;if(l==o.Type.STOP)break;switch(T){case 1:l==o.Type.STRING?this.name=w.readString():w.skip(l);break;case 2:l==o.Type.I32?this.sizerType=w.readI32():w.skip(l);break;case 3:l==o.Type.I32?this.sizerArgPos=w.readI32():w.skip(l);break;case 4:if(l==o.Type.LIST){this.inputArgTypes=[];const S=w.readListBegin().size||0;for(let x=0;x<S;++x){let B=null;B=w.readI32(),this.inputArgTypes.push(B)}w.readListEnd()}else w.skip(l);break;case 5:if(l==o.Type.LIST){this.outputArgTypes=[];const S=w.readListBegin().size||0;for(let x=0;x<S;++x){let B=null;B=w.readI32(),this.outputArgTypes.push(B)}w.readListEnd()}else w.skip(l);break;case 6:if(l==o.Type.LIST){this.sqlArgTypes=[];const S=w.readListBegin().size||0;for(let x=0;x<S;++x){let B=null;B=w.readI32(),this.sqlArgTypes.push(B)}w.readListEnd()}else w.skip(l);break;case 7:if(l==o.Type.LIST){this.annotations=[];const S=w.readListBegin().size||0;for(let x=0;x<S;++x){let B=null;B={};const I=w.readMapBegin().size||0;for(let A=0;A<I;++A){let O=null,R=null;O=w.readString(),R=w.readString(),B[O]=R}w.readMapEnd(),this.annotations.push(B)}w.readListEnd()}else w.skip(l);break;default:w.skip(l)}w.readFieldEnd()}w.readStructEnd()}write(w){if(w.writeStructBegin("TUserDefinedTableFunction"),this.name!==null&&this.name!==void 0&&(w.writeFieldBegin("name",o.Type.STRING,1),w.writeString(this.name),w.writeFieldEnd()),this.sizerType!==null&&this.sizerType!==void 0&&(w.writeFieldBegin("sizerType",o.Type.I32,2),w.writeI32(this.sizerType),w.writeFieldEnd()),this.sizerArgPos!==null&&this.sizerArgPos!==void 0&&(w.writeFieldBegin("sizerArgPos",o.Type.I32,3),w.writeI32(this.sizerArgPos),w.writeFieldEnd()),this.inputArgTypes!==null&&this.inputArgTypes!==void 0){w.writeFieldBegin("inputArgTypes",o.Type.LIST,4),w.writeListBegin(o.Type.I32,this.inputArgTypes.length);for(let m in this.inputArgTypes)this.inputArgTypes.hasOwnProperty(m)&&(m=this.inputArgTypes[m],w.writeI32(m));w.writeListEnd(),w.writeFieldEnd()}if(this.outputArgTypes!==null&&this.outputArgTypes!==void 0){w.writeFieldBegin("outputArgTypes",o.Type.LIST,5),w.writeListBegin(o.Type.I32,this.outputArgTypes.length);for(let m in this.outputArgTypes)this.outputArgTypes.hasOwnProperty(m)&&(m=this.outputArgTypes[m],w.writeI32(m));w.writeListEnd(),w.writeFieldEnd()}if(this.sqlArgTypes!==null&&this.sqlArgTypes!==void 0){w.writeFieldBegin("sqlArgTypes",o.Type.LIST,6),w.writeListBegin(o.Type.I32,this.sqlArgTypes.length);for(let m in this.sqlArgTypes)this.sqlArgTypes.hasOwnProperty(m)&&(m=this.sqlArgTypes[m],w.writeI32(m));w.writeListEnd(),w.writeFieldEnd()}if(this.annotations!==null&&this.annotations!==void 0){w.writeFieldBegin("annotations",o.Type.LIST,7),w.writeListBegin(o.Type.MAP,this.annotations.length);for(let m in this.annotations)if(this.annotations.hasOwnProperty(m)){m=this.annotations[m],w.writeMapBegin(o.Type.STRING,o.Type.STRING,o.objectLength(m));for(let l in m)if(m.hasOwnProperty(l)){let T=m[l];w.writeString(l),w.writeString(T)}w.writeMapEnd()}w.writeListEnd(),w.writeFieldEnd()}w.writeFieldStop(),w.writeStructEnd()}}},2607:(c,d,f)=>{const o=f(9262).Thrift;f(135);const g=f(2818);f(4494);const w=f(3962);f(1396);const m=c.exports={};m.TExecuteMode={GPU:1,CPU:2},m.TSourceType={DELIMITED_FILE:0,GEO_FILE:1,PARQUET_FILE:2,RASTER_FILE:3,ODBC:4},m.TPartitionDetail={DEFAULT:0,REPLICATED:1,SHARDED:2,OTHER:3},m.TGeoFileLayerContents={EMPTY:0,GEO:1,NON_GEO:2,UNSUPPORTED_GEO:3},m.TImportHeaderRow={AUTODETECT:0,NO_HEADER:1,HAS_HEADER:2},m.TRole={SERVER:0,AGGREGATOR:1,LEAF:2,STRING_DICTIONARY:3},m.TTableType={DEFAULT:0,TEMPORARY:1,FOREIGN:2,VIEW:3},m.TTableRefreshUpdateType={ALL:0,APPEND:1},m.TTableRefreshTimingType={MANUAL:0,SCHEDULED:1},m.TTableRefreshIntervalType={NONE:0,HOUR:1,DAY:2},m.TMergeType={UNION:0,REDUCE:1},m.TRasterPointType={NONE:0,AUTO:1,SMALLINT:2,INT:3,FLOAT:4,DOUBLE:5,POINT:6},m.TRasterPointTransform={NONE:0,AUTO:1,FILE:2,WORLD:3},m.TQueryType={UNKNOWN:0,READ:1,WRITE:2,SCHEMA_READ:3,SCHEMA_WRITE:4},m.TArrowTransport={SHARED_MEMORY:0,WIRE:1},m.TExpressionRangeType={INVALID:0,INTEGER:1,FLOAT:2,DOUBLE:3},m.TDBObjectType={AbstractDBObjectType:0,DatabaseDBObjectType:1,TableDBObjectType:2,DashboardDBObjectType:3,ViewDBObjectType:4,ServerDBObjectType:5},m.TDataSourceType={TABLE:0},c.exports.TDatumVal=class{constructor(l){this.int_val=null,this.real_val=null,this.str_val=null,this.arr_val=null,l&&(l.int_val!==void 0&&l.int_val!==null&&(this.int_val=l.int_val),l.real_val!==void 0&&l.real_val!==null&&(this.real_val=l.real_val),l.str_val!==void 0&&l.str_val!==null&&(this.str_val=l.str_val),l.arr_val!==void 0&&l.arr_val!==null&&(this.arr_val=o.copyList(l.arr_val,[null])))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.I64?this.int_val=l.readI64():l.skip(b);break;case 2:b==o.Type.DOUBLE?this.real_val=l.readDouble():l.skip(b);break;case 3:b==o.Type.STRING?this.str_val=l.readString():l.skip(b);break;case 4:if(b==o.Type.LIST){this.arr_val=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let I=null;I=new m.TDatum,I.read(l),this.arr_val.push(I)}l.readListEnd()}else l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TDatumVal"),this.int_val!==null&&this.int_val!==void 0&&(l.writeFieldBegin("int_val",o.Type.I64,1),l.writeI64(this.int_val),l.writeFieldEnd()),this.real_val!==null&&this.real_val!==void 0&&(l.writeFieldBegin("real_val",o.Type.DOUBLE,2),l.writeDouble(this.real_val),l.writeFieldEnd()),this.str_val!==null&&this.str_val!==void 0&&(l.writeFieldBegin("str_val",o.Type.STRING,3),l.writeString(this.str_val),l.writeFieldEnd()),this.arr_val!==null&&this.arr_val!==void 0){l.writeFieldBegin("arr_val",o.Type.LIST,4),l.writeListBegin(o.Type.STRUCT,this.arr_val.length);for(let T in this.arr_val)this.arr_val.hasOwnProperty(T)&&(T=this.arr_val[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDatum=class{constructor(l){this.val=null,this.is_null=null,l&&(l.val!==void 0&&l.val!==null&&(this.val=new m.TDatumVal(l.val)),l.is_null!==void 0&&l.is_null!==null&&(this.is_null=l.is_null))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.STRUCT?(this.val=new m.TDatumVal,this.val.read(l)):l.skip(b);break;case 2:b==o.Type.BOOL?this.is_null=l.readBool():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TDatum"),this.val!==null&&this.val!==void 0&&(l.writeFieldBegin("val",o.Type.STRUCT,1),this.val.write(l),l.writeFieldEnd()),this.is_null!==null&&this.is_null!==void 0&&(l.writeFieldBegin("is_null",o.Type.BOOL,2),l.writeBool(this.is_null),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TStringValue=class{constructor(l){this.str_val=null,this.is_null=null,l&&(l.str_val!==void 0&&l.str_val!==null&&(this.str_val=l.str_val),l.is_null!==void 0&&l.is_null!==null&&(this.is_null=l.is_null))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.STRING?this.str_val=l.readString():l.skip(b);break;case 2:b==o.Type.BOOL?this.is_null=l.readBool():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TStringValue"),this.str_val!==null&&this.str_val!==void 0&&(l.writeFieldBegin("str_val",o.Type.STRING,1),l.writeString(this.str_val),l.writeFieldEnd()),this.is_null!==null&&this.is_null!==void 0&&(l.writeFieldBegin("is_null",o.Type.BOOL,2),l.writeBool(this.is_null),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TColumnType=class{constructor(l){this.col_name=null,this.col_type=null,this.is_reserved_keyword=null,this.src_name=null,this.is_system=null,this.is_physical=null,this.col_id=null,this.default_value=null,l&&(l.col_name!==void 0&&l.col_name!==null&&(this.col_name=l.col_name),l.col_type!==void 0&&l.col_type!==null&&(this.col_type=new g.TTypeInfo(l.col_type)),l.is_reserved_keyword!==void 0&&l.is_reserved_keyword!==null&&(this.is_reserved_keyword=l.is_reserved_keyword),l.src_name!==void 0&&l.src_name!==null&&(this.src_name=l.src_name),l.is_system!==void 0&&l.is_system!==null&&(this.is_system=l.is_system),l.is_physical!==void 0&&l.is_physical!==null&&(this.is_physical=l.is_physical),l.col_id!==void 0&&l.col_id!==null&&(this.col_id=l.col_id),l.default_value!==void 0&&l.default_value!==null&&(this.default_value=l.default_value))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.STRING?this.col_name=l.readString():l.skip(b);break;case 2:b==o.Type.STRUCT?(this.col_type=new g.TTypeInfo,this.col_type.read(l)):l.skip(b);break;case 3:b==o.Type.BOOL?this.is_reserved_keyword=l.readBool():l.skip(b);break;case 4:b==o.Type.STRING?this.src_name=l.readString():l.skip(b);break;case 5:b==o.Type.BOOL?this.is_system=l.readBool():l.skip(b);break;case 6:b==o.Type.BOOL?this.is_physical=l.readBool():l.skip(b);break;case 7:b==o.Type.I64?this.col_id=l.readI64():l.skip(b);break;case 8:b==o.Type.STRING?this.default_value=l.readString():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TColumnType"),this.col_name!==null&&this.col_name!==void 0&&(l.writeFieldBegin("col_name",o.Type.STRING,1),l.writeString(this.col_name),l.writeFieldEnd()),this.col_type!==null&&this.col_type!==void 0&&(l.writeFieldBegin("col_type",o.Type.STRUCT,2),this.col_type.write(l),l.writeFieldEnd()),this.is_reserved_keyword!==null&&this.is_reserved_keyword!==void 0&&(l.writeFieldBegin("is_reserved_keyword",o.Type.BOOL,3),l.writeBool(this.is_reserved_keyword),l.writeFieldEnd()),this.src_name!==null&&this.src_name!==void 0&&(l.writeFieldBegin("src_name",o.Type.STRING,4),l.writeString(this.src_name),l.writeFieldEnd()),this.is_system!==null&&this.is_system!==void 0&&(l.writeFieldBegin("is_system",o.Type.BOOL,5),l.writeBool(this.is_system),l.writeFieldEnd()),this.is_physical!==null&&this.is_physical!==void 0&&(l.writeFieldBegin("is_physical",o.Type.BOOL,6),l.writeBool(this.is_physical),l.writeFieldEnd()),this.col_id!==null&&this.col_id!==void 0&&(l.writeFieldBegin("col_id",o.Type.I64,7),l.writeI64(this.col_id),l.writeFieldEnd()),this.default_value!==null&&this.default_value!==void 0&&(l.writeFieldBegin("default_value",o.Type.STRING,8),l.writeString(this.default_value),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TRow=class{constructor(l){this.cols=null,l&&l.cols!==void 0&&l.cols!==null&&(this.cols=o.copyList(l.cols,[m.TDatum]))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:if(b==o.Type.LIST){this.cols=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let I=null;I=new m.TDatum,I.read(l),this.cols.push(I)}l.readListEnd()}else l.skip(b);break;case 0:l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TRow"),this.cols!==null&&this.cols!==void 0){l.writeFieldBegin("cols",o.Type.LIST,1),l.writeListBegin(o.Type.STRUCT,this.cols.length);for(let T in this.cols)this.cols.hasOwnProperty(T)&&(T=this.cols[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TColumnData=class{constructor(l){this.int_col=null,this.real_col=null,this.str_col=null,this.arr_col=null,l&&(l.int_col!==void 0&&l.int_col!==null&&(this.int_col=o.copyList(l.int_col,[null])),l.real_col!==void 0&&l.real_col!==null&&(this.real_col=o.copyList(l.real_col,[null])),l.str_col!==void 0&&l.str_col!==null&&(this.str_col=o.copyList(l.str_col,[null])),l.arr_col!==void 0&&l.arr_col!==null&&(this.arr_col=o.copyList(l.arr_col,[null])))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:if(b==o.Type.LIST){this.int_col=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let I=null;I=l.readI64(),this.int_col.push(I)}l.readListEnd()}else l.skip(b);break;case 2:if(b==o.Type.LIST){this.real_col=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let I=null;I=l.readDouble(),this.real_col.push(I)}l.readListEnd()}else l.skip(b);break;case 3:if(b==o.Type.LIST){this.str_col=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let I=null;I=l.readString(),this.str_col.push(I)}l.readListEnd()}else l.skip(b);break;case 4:if(b==o.Type.LIST){this.arr_col=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let I=null;I=new m.TColumn,I.read(l),this.arr_col.push(I)}l.readListEnd()}else l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TColumnData"),this.int_col!==null&&this.int_col!==void 0){l.writeFieldBegin("int_col",o.Type.LIST,1),l.writeListBegin(o.Type.I64,this.int_col.length);for(let T in this.int_col)this.int_col.hasOwnProperty(T)&&(T=this.int_col[T],l.writeI64(T));l.writeListEnd(),l.writeFieldEnd()}if(this.real_col!==null&&this.real_col!==void 0){l.writeFieldBegin("real_col",o.Type.LIST,2),l.writeListBegin(o.Type.DOUBLE,this.real_col.length);for(let T in this.real_col)this.real_col.hasOwnProperty(T)&&(T=this.real_col[T],l.writeDouble(T));l.writeListEnd(),l.writeFieldEnd()}if(this.str_col!==null&&this.str_col!==void 0){l.writeFieldBegin("str_col",o.Type.LIST,3),l.writeListBegin(o.Type.STRING,this.str_col.length);for(let T in this.str_col)this.str_col.hasOwnProperty(T)&&(T=this.str_col[T],l.writeString(T));l.writeListEnd(),l.writeFieldEnd()}if(this.arr_col!==null&&this.arr_col!==void 0){l.writeFieldBegin("arr_col",o.Type.LIST,4),l.writeListBegin(o.Type.STRUCT,this.arr_col.length);for(let T in this.arr_col)this.arr_col.hasOwnProperty(T)&&(T=this.arr_col[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TColumn=class{constructor(l){this.data=null,this.nulls=null,l&&(l.data!==void 0&&l.data!==null&&(this.data=new m.TColumnData(l.data)),l.nulls!==void 0&&l.nulls!==null&&(this.nulls=o.copyList(l.nulls,[null])))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.STRUCT?(this.data=new m.TColumnData,this.data.read(l)):l.skip(b);break;case 2:if(b==o.Type.LIST){this.nulls=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let I=null;I=l.readBool(),this.nulls.push(I)}l.readListEnd()}else l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TColumn"),this.data!==null&&this.data!==void 0&&(l.writeFieldBegin("data",o.Type.STRUCT,1),this.data.write(l),l.writeFieldEnd()),this.nulls!==null&&this.nulls!==void 0){l.writeFieldBegin("nulls",o.Type.LIST,2),l.writeListBegin(o.Type.BOOL,this.nulls.length);for(let T in this.nulls)this.nulls.hasOwnProperty(T)&&(T=this.nulls[T],l.writeBool(T));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TStringRow=class{constructor(l){this.cols=null,l&&l.cols!==void 0&&l.cols!==null&&(this.cols=o.copyList(l.cols,[m.TStringValue]))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:if(b==o.Type.LIST){this.cols=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let I=null;I=new m.TStringValue,I.read(l),this.cols.push(I)}l.readListEnd()}else l.skip(b);break;case 0:l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TStringRow"),this.cols!==null&&this.cols!==void 0){l.writeFieldBegin("cols",o.Type.LIST,1),l.writeListBegin(o.Type.STRUCT,this.cols.length);for(let T in this.cols)this.cols.hasOwnProperty(T)&&(T=this.cols[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TKrb5Session=class{constructor(l){this.sessionId=null,this.krbToken=null,l&&(l.sessionId!==void 0&&l.sessionId!==null&&(this.sessionId=l.sessionId),l.krbToken!==void 0&&l.krbToken!==null&&(this.krbToken=l.krbToken))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.STRING?this.sessionId=l.readString():l.skip(b);break;case 2:b==o.Type.STRING?this.krbToken=l.readString():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TKrb5Session"),this.sessionId!==null&&this.sessionId!==void 0&&(l.writeFieldBegin("sessionId",o.Type.STRING,1),l.writeString(this.sessionId),l.writeFieldEnd()),this.krbToken!==null&&this.krbToken!==void 0&&(l.writeFieldBegin("krbToken",o.Type.STRING,2),l.writeString(this.krbToken),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TStepResult=class{constructor(l){this.serialized_rows=null,this.execution_finished=null,this.merge_type=null,this.sharded=null,this.row_desc=null,this.node_id=null,l&&(l.serialized_rows!==void 0&&l.serialized_rows!==null&&(this.serialized_rows=new w.TSerializedRows(l.serialized_rows)),l.execution_finished!==void 0&&l.execution_finished!==null&&(this.execution_finished=l.execution_finished),l.merge_type!==void 0&&l.merge_type!==null&&(this.merge_type=l.merge_type),l.sharded!==void 0&&l.sharded!==null&&(this.sharded=l.sharded),l.row_desc!==void 0&&l.row_desc!==null&&(this.row_desc=o.copyList(l.row_desc,[m.TColumnType])),l.node_id!==void 0&&l.node_id!==null&&(this.node_id=l.node_id))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.STRUCT?(this.serialized_rows=new w.TSerializedRows,this.serialized_rows.read(l)):l.skip(b);break;case 2:b==o.Type.BOOL?this.execution_finished=l.readBool():l.skip(b);break;case 3:b==o.Type.I32?this.merge_type=l.readI32():l.skip(b);break;case 4:b==o.Type.BOOL?this.sharded=l.readBool():l.skip(b);break;case 5:if(b==o.Type.LIST){this.row_desc=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let I=null;I=new m.TColumnType,I.read(l),this.row_desc.push(I)}l.readListEnd()}else l.skip(b);break;case 6:b==o.Type.I32?this.node_id=l.readI32():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TStepResult"),this.serialized_rows!==null&&this.serialized_rows!==void 0&&(l.writeFieldBegin("serialized_rows",o.Type.STRUCT,1),this.serialized_rows.write(l),l.writeFieldEnd()),this.execution_finished!==null&&this.execution_finished!==void 0&&(l.writeFieldBegin("execution_finished",o.Type.BOOL,2),l.writeBool(this.execution_finished),l.writeFieldEnd()),this.merge_type!==null&&this.merge_type!==void 0&&(l.writeFieldBegin("merge_type",o.Type.I32,3),l.writeI32(this.merge_type),l.writeFieldEnd()),this.sharded!==null&&this.sharded!==void 0&&(l.writeFieldBegin("sharded",o.Type.BOOL,4),l.writeBool(this.sharded),l.writeFieldEnd()),this.row_desc!==null&&this.row_desc!==void 0){l.writeFieldBegin("row_desc",o.Type.LIST,5),l.writeListBegin(o.Type.STRUCT,this.row_desc.length);for(let T in this.row_desc)this.row_desc.hasOwnProperty(T)&&(T=this.row_desc[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}this.node_id!==null&&this.node_id!==void 0&&(l.writeFieldBegin("node_id",o.Type.I32,6),l.writeI32(this.node_id),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TRowSet=class{constructor(l){this.row_desc=null,this.rows=null,this.columns=null,this.is_columnar=null,l&&(l.row_desc!==void 0&&l.row_desc!==null&&(this.row_desc=o.copyList(l.row_desc,[m.TColumnType])),l.rows!==void 0&&l.rows!==null&&(this.rows=o.copyList(l.rows,[m.TRow])),l.columns!==void 0&&l.columns!==null&&(this.columns=o.copyList(l.columns,[m.TColumn])),l.is_columnar!==void 0&&l.is_columnar!==null&&(this.is_columnar=l.is_columnar))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:if(b==o.Type.LIST){this.row_desc=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let I=null;I=new m.TColumnType,I.read(l),this.row_desc.push(I)}l.readListEnd()}else l.skip(b);break;case 2:if(b==o.Type.LIST){this.rows=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let I=null;I=new m.TRow,I.read(l),this.rows.push(I)}l.readListEnd()}else l.skip(b);break;case 3:if(b==o.Type.LIST){this.columns=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let I=null;I=new m.TColumn,I.read(l),this.columns.push(I)}l.readListEnd()}else l.skip(b);break;case 4:b==o.Type.BOOL?this.is_columnar=l.readBool():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TRowSet"),this.row_desc!==null&&this.row_desc!==void 0){l.writeFieldBegin("row_desc",o.Type.LIST,1),l.writeListBegin(o.Type.STRUCT,this.row_desc.length);for(let T in this.row_desc)this.row_desc.hasOwnProperty(T)&&(T=this.row_desc[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}if(this.rows!==null&&this.rows!==void 0){l.writeFieldBegin("rows",o.Type.LIST,2),l.writeListBegin(o.Type.STRUCT,this.rows.length);for(let T in this.rows)this.rows.hasOwnProperty(T)&&(T=this.rows[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}if(this.columns!==null&&this.columns!==void 0){l.writeFieldBegin("columns",o.Type.LIST,3),l.writeListBegin(o.Type.STRUCT,this.columns.length);for(let T in this.columns)this.columns.hasOwnProperty(T)&&(T=this.columns[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}this.is_columnar!==null&&this.is_columnar!==void 0&&(l.writeFieldBegin("is_columnar",o.Type.BOOL,4),l.writeBool(this.is_columnar),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TQueryResult=class{constructor(l){this.row_set=null,this.execution_time_ms=null,this.total_time_ms=null,this.nonce=null,this.debug=null,this.success=!0,this.query_type=0,l&&(l.row_set!==void 0&&l.row_set!==null&&(this.row_set=new m.TRowSet(l.row_set)),l.execution_time_ms!==void 0&&l.execution_time_ms!==null&&(this.execution_time_ms=l.execution_time_ms),l.total_time_ms!==void 0&&l.total_time_ms!==null&&(this.total_time_ms=l.total_time_ms),l.nonce!==void 0&&l.nonce!==null&&(this.nonce=l.nonce),l.debug!==void 0&&l.debug!==null&&(this.debug=l.debug),l.success!==void 0&&l.success!==null&&(this.success=l.success),l.query_type!==void 0&&l.query_type!==null&&(this.query_type=l.query_type))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.STRUCT?(this.row_set=new m.TRowSet,this.row_set.read(l)):l.skip(b);break;case 2:b==o.Type.I64?this.execution_time_ms=l.readI64():l.skip(b);break;case 3:b==o.Type.I64?this.total_time_ms=l.readI64():l.skip(b);break;case 4:b==o.Type.STRING?this.nonce=l.readString():l.skip(b);break;case 5:b==o.Type.STRING?this.debug=l.readString():l.skip(b);break;case 6:b==o.Type.BOOL?this.success=l.readBool():l.skip(b);break;case 7:b==o.Type.I32?this.query_type=l.readI32():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TQueryResult"),this.row_set!==null&&this.row_set!==void 0&&(l.writeFieldBegin("row_set",o.Type.STRUCT,1),this.row_set.write(l),l.writeFieldEnd()),this.execution_time_ms!==null&&this.execution_time_ms!==void 0&&(l.writeFieldBegin("execution_time_ms",o.Type.I64,2),l.writeI64(this.execution_time_ms),l.writeFieldEnd()),this.total_time_ms!==null&&this.total_time_ms!==void 0&&(l.writeFieldBegin("total_time_ms",o.Type.I64,3),l.writeI64(this.total_time_ms),l.writeFieldEnd()),this.nonce!==null&&this.nonce!==void 0&&(l.writeFieldBegin("nonce",o.Type.STRING,4),l.writeString(this.nonce),l.writeFieldEnd()),this.debug!==null&&this.debug!==void 0&&(l.writeFieldBegin("debug",o.Type.STRING,5),l.writeString(this.debug),l.writeFieldEnd()),this.success!==null&&this.success!==void 0&&(l.writeFieldBegin("success",o.Type.BOOL,6),l.writeBool(this.success),l.writeFieldEnd()),this.query_type!==null&&this.query_type!==void 0&&(l.writeFieldBegin("query_type",o.Type.I32,7),l.writeI32(this.query_type),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDataFrame=class{constructor(l){this.sm_handle=null,this.sm_size=null,this.df_handle=null,this.df_size=null,this.execution_time_ms=null,this.arrow_conversion_time_ms=null,this.df_buffer=null,l&&(l.sm_handle!==void 0&&l.sm_handle!==null&&(this.sm_handle=l.sm_handle),l.sm_size!==void 0&&l.sm_size!==null&&(this.sm_size=l.sm_size),l.df_handle!==void 0&&l.df_handle!==null&&(this.df_handle=l.df_handle),l.df_size!==void 0&&l.df_size!==null&&(this.df_size=l.df_size),l.execution_time_ms!==void 0&&l.execution_time_ms!==null&&(this.execution_time_ms=l.execution_time_ms),l.arrow_conversion_time_ms!==void 0&&l.arrow_conversion_time_ms!==null&&(this.arrow_conversion_time_ms=l.arrow_conversion_time_ms),l.df_buffer!==void 0&&l.df_buffer!==null&&(this.df_buffer=l.df_buffer))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.STRING?this.sm_handle=l.readBinary():l.skip(b);break;case 2:b==o.Type.I64?this.sm_size=l.readI64():l.skip(b);break;case 3:b==o.Type.STRING?this.df_handle=l.readBinary():l.skip(b);break;case 4:b==o.Type.I64?this.df_size=l.readI64():l.skip(b);break;case 5:b==o.Type.I64?this.execution_time_ms=l.readI64():l.skip(b);break;case 6:b==o.Type.I64?this.arrow_conversion_time_ms=l.readI64():l.skip(b);break;case 7:b==o.Type.STRING?this.df_buffer=l.readBinary():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TDataFrame"),this.sm_handle!==null&&this.sm_handle!==void 0&&(l.writeFieldBegin("sm_handle",o.Type.STRING,1),l.writeBinary(this.sm_handle),l.writeFieldEnd()),this.sm_size!==null&&this.sm_size!==void 0&&(l.writeFieldBegin("sm_size",o.Type.I64,2),l.writeI64(this.sm_size),l.writeFieldEnd()),this.df_handle!==null&&this.df_handle!==void 0&&(l.writeFieldBegin("df_handle",o.Type.STRING,3),l.writeBinary(this.df_handle),l.writeFieldEnd()),this.df_size!==null&&this.df_size!==void 0&&(l.writeFieldBegin("df_size",o.Type.I64,4),l.writeI64(this.df_size),l.writeFieldEnd()),this.execution_time_ms!==null&&this.execution_time_ms!==void 0&&(l.writeFieldBegin("execution_time_ms",o.Type.I64,5),l.writeI64(this.execution_time_ms),l.writeFieldEnd()),this.arrow_conversion_time_ms!==null&&this.arrow_conversion_time_ms!==void 0&&(l.writeFieldBegin("arrow_conversion_time_ms",o.Type.I64,6),l.writeI64(this.arrow_conversion_time_ms),l.writeFieldEnd()),this.df_buffer!==null&&this.df_buffer!==void 0&&(l.writeFieldBegin("df_buffer",o.Type.STRING,7),l.writeBinary(this.df_buffer),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDBInfo=class{constructor(l){this.db_name=null,this.db_owner=null,l&&(l.db_name!==void 0&&l.db_name!==null&&(this.db_name=l.db_name),l.db_owner!==void 0&&l.db_owner!==null&&(this.db_owner=l.db_owner))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.STRING?this.db_name=l.readString():l.skip(b);break;case 2:b==o.Type.STRING?this.db_owner=l.readString():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TDBInfo"),this.db_name!==null&&this.db_name!==void 0&&(l.writeFieldBegin("db_name",o.Type.STRING,1),l.writeString(this.db_name),l.writeFieldEnd()),this.db_owner!==null&&this.db_owner!==void 0&&(l.writeFieldBegin("db_owner",o.Type.STRING,2),l.writeString(this.db_owner),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDBException=class extends o.TException{constructor(l){super(l),this.name="TDBException",this.error_msg=null,l&&l.error_msg!==void 0&&l.error_msg!==null&&(this.error_msg=l.error_msg)}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.STRING?this.error_msg=l.readString():l.skip(b);break;case 0:l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TDBException"),this.error_msg!==null&&this.error_msg!==void 0&&(l.writeFieldBegin("error_msg",o.Type.STRING,1),l.writeString(this.error_msg),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TCopyParams=class{constructor(l){this.delimiter=null,this.null_str=null,this.has_header=0,this.quoted=null,this.quote=null,this.escape=null,this.line_delim=null,this.array_delim=null,this.array_begin=null,this.array_end=null,this.threads=null,this.source_type=0,this.s3_access_key=null,this.s3_secret_key=null,this.s3_region=null,this.geo_coords_encoding=6,this.geo_coords_comp_param=32,this.geo_coords_type=18,this.geo_coords_srid=4326,this.sanitize_column_names=!0,this.geo_layer_name=null,this.s3_endpoint=null,this.geo_assign_render_groups=!0,this.geo_explode_collections=!1,this.source_srid=0,this.s3_session_token=null,this.raster_point_type=1,this.raster_import_bands=null,this.raster_scanlines_per_thread=null,this.raster_point_transform=1,this.raster_point_compute_angle=!1,this.raster_import_dimensions=null,this.odbc_dsn=null,this.odbc_connection_string=null,this.odbc_sql_select=null,this.odbc_sql_order_by=null,this.odbc_username=null,this.odbc_password=null,this.odbc_credential_string=null,this.add_metadata_columns=null,l&&(l.delimiter!==void 0&&l.delimiter!==null&&(this.delimiter=l.delimiter),l.null_str!==void 0&&l.null_str!==null&&(this.null_str=l.null_str),l.has_header!==void 0&&l.has_header!==null&&(this.has_header=l.has_header),l.quoted!==void 0&&l.quoted!==null&&(this.quoted=l.quoted),l.quote!==void 0&&l.quote!==null&&(this.quote=l.quote),l.escape!==void 0&&l.escape!==null&&(this.escape=l.escape),l.line_delim!==void 0&&l.line_delim!==null&&(this.line_delim=l.line_delim),l.array_delim!==void 0&&l.array_delim!==null&&(this.array_delim=l.array_delim),l.array_begin!==void 0&&l.array_begin!==null&&(this.array_begin=l.array_begin),l.array_end!==void 0&&l.array_end!==null&&(this.array_end=l.array_end),l.threads!==void 0&&l.threads!==null&&(this.threads=l.threads),l.source_type!==void 0&&l.source_type!==null&&(this.source_type=l.source_type),l.s3_access_key!==void 0&&l.s3_access_key!==null&&(this.s3_access_key=l.s3_access_key),l.s3_secret_key!==void 0&&l.s3_secret_key!==null&&(this.s3_secret_key=l.s3_secret_key),l.s3_region!==void 0&&l.s3_region!==null&&(this.s3_region=l.s3_region),l.geo_coords_encoding!==void 0&&l.geo_coords_encoding!==null&&(this.geo_coords_encoding=l.geo_coords_encoding),l.geo_coords_comp_param!==void 0&&l.geo_coords_comp_param!==null&&(this.geo_coords_comp_param=l.geo_coords_comp_param),l.geo_coords_type!==void 0&&l.geo_coords_type!==null&&(this.geo_coords_type=l.geo_coords_type),l.geo_coords_srid!==void 0&&l.geo_coords_srid!==null&&(this.geo_coords_srid=l.geo_coords_srid),l.sanitize_column_names!==void 0&&l.sanitize_column_names!==null&&(this.sanitize_column_names=l.sanitize_column_names),l.geo_layer_name!==void 0&&l.geo_layer_name!==null&&(this.geo_layer_name=l.geo_layer_name),l.s3_endpoint!==void 0&&l.s3_endpoint!==null&&(this.s3_endpoint=l.s3_endpoint),l.geo_assign_render_groups!==void 0&&l.geo_assign_render_groups!==null&&(this.geo_assign_render_groups=l.geo_assign_render_groups),l.geo_explode_collections!==void 0&&l.geo_explode_collections!==null&&(this.geo_explode_collections=l.geo_explode_collections),l.source_srid!==void 0&&l.source_srid!==null&&(this.source_srid=l.source_srid),l.s3_session_token!==void 0&&l.s3_session_token!==null&&(this.s3_session_token=l.s3_session_token),l.raster_point_type!==void 0&&l.raster_point_type!==null&&(this.raster_point_type=l.raster_point_type),l.raster_import_bands!==void 0&&l.raster_import_bands!==null&&(this.raster_import_bands=l.raster_import_bands),l.raster_scanlines_per_thread!==void 0&&l.raster_scanlines_per_thread!==null&&(this.raster_scanlines_per_thread=l.raster_scanlines_per_thread),l.raster_point_transform!==void 0&&l.raster_point_transform!==null&&(this.raster_point_transform=l.raster_point_transform),l.raster_point_compute_angle!==void 0&&l.raster_point_compute_angle!==null&&(this.raster_point_compute_angle=l.raster_point_compute_angle),l.raster_import_dimensions!==void 0&&l.raster_import_dimensions!==null&&(this.raster_import_dimensions=l.raster_import_dimensions),l.odbc_dsn!==void 0&&l.odbc_dsn!==null&&(this.odbc_dsn=l.odbc_dsn),l.odbc_connection_string!==void 0&&l.odbc_connection_string!==null&&(this.odbc_connection_string=l.odbc_connection_string),l.odbc_sql_select!==void 0&&l.odbc_sql_select!==null&&(this.odbc_sql_select=l.odbc_sql_select),l.odbc_sql_order_by!==void 0&&l.odbc_sql_order_by!==null&&(this.odbc_sql_order_by=l.odbc_sql_order_by),l.odbc_username!==void 0&&l.odbc_username!==null&&(this.odbc_username=l.odbc_username),l.odbc_password!==void 0&&l.odbc_password!==null&&(this.odbc_password=l.odbc_password),l.odbc_credential_string!==void 0&&l.odbc_credential_string!==null&&(this.odbc_credential_string=l.odbc_credential_string),l.add_metadata_columns!==void 0&&l.add_metadata_columns!==null&&(this.add_metadata_columns=l.add_metadata_columns))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.STRING?this.delimiter=l.readString():l.skip(b);break;case 2:b==o.Type.STRING?this.null_str=l.readString():l.skip(b);break;case 3:b==o.Type.I32?this.has_header=l.readI32():l.skip(b);break;case 4:b==o.Type.BOOL?this.quoted=l.readBool():l.skip(b);break;case 5:b==o.Type.STRING?this.quote=l.readString():l.skip(b);break;case 6:b==o.Type.STRING?this.escape=l.readString():l.skip(b);break;case 7:b==o.Type.STRING?this.line_delim=l.readString():l.skip(b);break;case 8:b==o.Type.STRING?this.array_delim=l.readString():l.skip(b);break;case 9:b==o.Type.STRING?this.array_begin=l.readString():l.skip(b);break;case 10:b==o.Type.STRING?this.array_end=l.readString():l.skip(b);break;case 11:b==o.Type.I32?this.threads=l.readI32():l.skip(b);break;case 12:b==o.Type.I32?this.source_type=l.readI32():l.skip(b);break;case 13:b==o.Type.STRING?this.s3_access_key=l.readString():l.skip(b);break;case 14:b==o.Type.STRING?this.s3_secret_key=l.readString():l.skip(b);break;case 15:b==o.Type.STRING?this.s3_region=l.readString():l.skip(b);break;case 16:b==o.Type.I32?this.geo_coords_encoding=l.readI32():l.skip(b);break;case 17:b==o.Type.I32?this.geo_coords_comp_param=l.readI32():l.skip(b);break;case 18:b==o.Type.I32?this.geo_coords_type=l.readI32():l.skip(b);break;case 19:b==o.Type.I32?this.geo_coords_srid=l.readI32():l.skip(b);break;case 20:b==o.Type.BOOL?this.sanitize_column_names=l.readBool():l.skip(b);break;case 21:b==o.Type.STRING?this.geo_layer_name=l.readString():l.skip(b);break;case 22:b==o.Type.STRING?this.s3_endpoint=l.readString():l.skip(b);break;case 23:b==o.Type.BOOL?this.geo_assign_render_groups=l.readBool():l.skip(b);break;case 24:b==o.Type.BOOL?this.geo_explode_collections=l.readBool():l.skip(b);break;case 25:b==o.Type.I32?this.source_srid=l.readI32():l.skip(b);break;case 26:b==o.Type.STRING?this.s3_session_token=l.readString():l.skip(b);break;case 27:b==o.Type.I32?this.raster_point_type=l.readI32():l.skip(b);break;case 28:b==o.Type.STRING?this.raster_import_bands=l.readString():l.skip(b);break;case 29:b==o.Type.I32?this.raster_scanlines_per_thread=l.readI32():l.skip(b);break;case 30:b==o.Type.I32?this.raster_point_transform=l.readI32():l.skip(b);break;case 31:b==o.Type.BOOL?this.raster_point_compute_angle=l.readBool():l.skip(b);break;case 32:b==o.Type.STRING?this.raster_import_dimensions=l.readString():l.skip(b);break;case 33:b==o.Type.STRING?this.odbc_dsn=l.readString():l.skip(b);break;case 34:b==o.Type.STRING?this.odbc_connection_string=l.readString():l.skip(b);break;case 35:b==o.Type.STRING?this.odbc_sql_select=l.readString():l.skip(b);break;case 36:b==o.Type.STRING?this.odbc_sql_order_by=l.readString():l.skip(b);break;case 37:b==o.Type.STRING?this.odbc_username=l.readString():l.skip(b);break;case 38:b==o.Type.STRING?this.odbc_password=l.readString():l.skip(b);break;case 39:b==o.Type.STRING?this.odbc_credential_string=l.readString():l.skip(b);break;case 40:b==o.Type.STRING?this.add_metadata_columns=l.readString():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TCopyParams"),this.delimiter!==null&&this.delimiter!==void 0&&(l.writeFieldBegin("delimiter",o.Type.STRING,1),l.writeString(this.delimiter),l.writeFieldEnd()),this.null_str!==null&&this.null_str!==void 0&&(l.writeFieldBegin("null_str",o.Type.STRING,2),l.writeString(this.null_str),l.writeFieldEnd()),this.has_header!==null&&this.has_header!==void 0&&(l.writeFieldBegin("has_header",o.Type.I32,3),l.writeI32(this.has_header),l.writeFieldEnd()),this.quoted!==null&&this.quoted!==void 0&&(l.writeFieldBegin("quoted",o.Type.BOOL,4),l.writeBool(this.quoted),l.writeFieldEnd()),this.quote!==null&&this.quote!==void 0&&(l.writeFieldBegin("quote",o.Type.STRING,5),l.writeString(this.quote),l.writeFieldEnd()),this.escape!==null&&this.escape!==void 0&&(l.writeFieldBegin("escape",o.Type.STRING,6),l.writeString(this.escape),l.writeFieldEnd()),this.line_delim!==null&&this.line_delim!==void 0&&(l.writeFieldBegin("line_delim",o.Type.STRING,7),l.writeString(this.line_delim),l.writeFieldEnd()),this.array_delim!==null&&this.array_delim!==void 0&&(l.writeFieldBegin("array_delim",o.Type.STRING,8),l.writeString(this.array_delim),l.writeFieldEnd()),this.array_begin!==null&&this.array_begin!==void 0&&(l.writeFieldBegin("array_begin",o.Type.STRING,9),l.writeString(this.array_begin),l.writeFieldEnd()),this.array_end!==null&&this.array_end!==void 0&&(l.writeFieldBegin("array_end",o.Type.STRING,10),l.writeString(this.array_end),l.writeFieldEnd()),this.threads!==null&&this.threads!==void 0&&(l.writeFieldBegin("threads",o.Type.I32,11),l.writeI32(this.threads),l.writeFieldEnd()),this.source_type!==null&&this.source_type!==void 0&&(l.writeFieldBegin("source_type",o.Type.I32,12),l.writeI32(this.source_type),l.writeFieldEnd()),this.s3_access_key!==null&&this.s3_access_key!==void 0&&(l.writeFieldBegin("s3_access_key",o.Type.STRING,13),l.writeString(this.s3_access_key),l.writeFieldEnd()),this.s3_secret_key!==null&&this.s3_secret_key!==void 0&&(l.writeFieldBegin("s3_secret_key",o.Type.STRING,14),l.writeString(this.s3_secret_key),l.writeFieldEnd()),this.s3_region!==null&&this.s3_region!==void 0&&(l.writeFieldBegin("s3_region",o.Type.STRING,15),l.writeString(this.s3_region),l.writeFieldEnd()),this.geo_coords_encoding!==null&&this.geo_coords_encoding!==void 0&&(l.writeFieldBegin("geo_coords_encoding",o.Type.I32,16),l.writeI32(this.geo_coords_encoding),l.writeFieldEnd()),this.geo_coords_comp_param!==null&&this.geo_coords_comp_param!==void 0&&(l.writeFieldBegin("geo_coords_comp_param",o.Type.I32,17),l.writeI32(this.geo_coords_comp_param),l.writeFieldEnd()),this.geo_coords_type!==null&&this.geo_coords_type!==void 0&&(l.writeFieldBegin("geo_coords_type",o.Type.I32,18),l.writeI32(this.geo_coords_type),l.writeFieldEnd()),this.geo_coords_srid!==null&&this.geo_coords_srid!==void 0&&(l.writeFieldBegin("geo_coords_srid",o.Type.I32,19),l.writeI32(this.geo_coords_srid),l.writeFieldEnd()),this.sanitize_column_names!==null&&this.sanitize_column_names!==void 0&&(l.writeFieldBegin("sanitize_column_names",o.Type.BOOL,20),l.writeBool(this.sanitize_column_names),l.writeFieldEnd()),this.geo_layer_name!==null&&this.geo_layer_name!==void 0&&(l.writeFieldBegin("geo_layer_name",o.Type.STRING,21),l.writeString(this.geo_layer_name),l.writeFieldEnd()),this.s3_endpoint!==null&&this.s3_endpoint!==void 0&&(l.writeFieldBegin("s3_endpoint",o.Type.STRING,22),l.writeString(this.s3_endpoint),l.writeFieldEnd()),this.geo_assign_render_groups!==null&&this.geo_assign_render_groups!==void 0&&(l.writeFieldBegin("geo_assign_render_groups",o.Type.BOOL,23),l.writeBool(this.geo_assign_render_groups),l.writeFieldEnd()),this.geo_explode_collections!==null&&this.geo_explode_collections!==void 0&&(l.writeFieldBegin("geo_explode_collections",o.Type.BOOL,24),l.writeBool(this.geo_explode_collections),l.writeFieldEnd()),this.source_srid!==null&&this.source_srid!==void 0&&(l.writeFieldBegin("source_srid",o.Type.I32,25),l.writeI32(this.source_srid),l.writeFieldEnd()),this.s3_session_token!==null&&this.s3_session_token!==void 0&&(l.writeFieldBegin("s3_session_token",o.Type.STRING,26),l.writeString(this.s3_session_token),l.writeFieldEnd()),this.raster_point_type!==null&&this.raster_point_type!==void 0&&(l.writeFieldBegin("raster_point_type",o.Type.I32,27),l.writeI32(this.raster_point_type),l.writeFieldEnd()),this.raster_import_bands!==null&&this.raster_import_bands!==void 0&&(l.writeFieldBegin("raster_import_bands",o.Type.STRING,28),l.writeString(this.raster_import_bands),l.writeFieldEnd()),this.raster_scanlines_per_thread!==null&&this.raster_scanlines_per_thread!==void 0&&(l.writeFieldBegin("raster_scanlines_per_thread",o.Type.I32,29),l.writeI32(this.raster_scanlines_per_thread),l.writeFieldEnd()),this.raster_point_transform!==null&&this.raster_point_transform!==void 0&&(l.writeFieldBegin("raster_point_transform",o.Type.I32,30),l.writeI32(this.raster_point_transform),l.writeFieldEnd()),this.raster_point_compute_angle!==null&&this.raster_point_compute_angle!==void 0&&(l.writeFieldBegin("raster_point_compute_angle",o.Type.BOOL,31),l.writeBool(this.raster_point_compute_angle),l.writeFieldEnd()),this.raster_import_dimensions!==null&&this.raster_import_dimensions!==void 0&&(l.writeFieldBegin("raster_import_dimensions",o.Type.STRING,32),l.writeString(this.raster_import_dimensions),l.writeFieldEnd()),this.odbc_dsn!==null&&this.odbc_dsn!==void 0&&(l.writeFieldBegin("odbc_dsn",o.Type.STRING,33),l.writeString(this.odbc_dsn),l.writeFieldEnd()),this.odbc_connection_string!==null&&this.odbc_connection_string!==void 0&&(l.writeFieldBegin("odbc_connection_string",o.Type.STRING,34),l.writeString(this.odbc_connection_string),l.writeFieldEnd()),this.odbc_sql_select!==null&&this.odbc_sql_select!==void 0&&(l.writeFieldBegin("odbc_sql_select",o.Type.STRING,35),l.writeString(this.odbc_sql_select),l.writeFieldEnd()),this.odbc_sql_order_by!==null&&this.odbc_sql_order_by!==void 0&&(l.writeFieldBegin("odbc_sql_order_by",o.Type.STRING,36),l.writeString(this.odbc_sql_order_by),l.writeFieldEnd()),this.odbc_username!==null&&this.odbc_username!==void 0&&(l.writeFieldBegin("odbc_username",o.Type.STRING,37),l.writeString(this.odbc_username),l.writeFieldEnd()),this.odbc_password!==null&&this.odbc_password!==void 0&&(l.writeFieldBegin("odbc_password",o.Type.STRING,38),l.writeString(this.odbc_password),l.writeFieldEnd()),this.odbc_credential_string!==null&&this.odbc_credential_string!==void 0&&(l.writeFieldBegin("odbc_credential_string",o.Type.STRING,39),l.writeString(this.odbc_credential_string),l.writeFieldEnd()),this.add_metadata_columns!==null&&this.add_metadata_columns!==void 0&&(l.writeFieldBegin("add_metadata_columns",o.Type.STRING,40),l.writeString(this.add_metadata_columns),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TCreateParams=class{constructor(l){this.is_replicated=null,l&&l.is_replicated!==void 0&&l.is_replicated!==null&&(this.is_replicated=l.is_replicated)}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.BOOL?this.is_replicated=l.readBool():l.skip(b);break;case 0:l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TCreateParams"),this.is_replicated!==null&&this.is_replicated!==void 0&&(l.writeFieldBegin("is_replicated",o.Type.BOOL,1),l.writeBool(this.is_replicated),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDetectResult=class{constructor(l){this.row_set=null,this.copy_params=null,l&&(l.row_set!==void 0&&l.row_set!==null&&(this.row_set=new m.TRowSet(l.row_set)),l.copy_params!==void 0&&l.copy_params!==null&&(this.copy_params=new m.TCopyParams(l.copy_params)))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.STRUCT?(this.row_set=new m.TRowSet,this.row_set.read(l)):l.skip(b);break;case 2:b==o.Type.STRUCT?(this.copy_params=new m.TCopyParams,this.copy_params.read(l)):l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TDetectResult"),this.row_set!==null&&this.row_set!==void 0&&(l.writeFieldBegin("row_set",o.Type.STRUCT,1),this.row_set.write(l),l.writeFieldEnd()),this.copy_params!==null&&this.copy_params!==void 0&&(l.writeFieldBegin("copy_params",o.Type.STRUCT,2),this.copy_params.write(l),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TImportStatus=class{constructor(l){this.elapsed=null,this.rows_completed=null,this.rows_estimated=null,this.rows_rejected=null,l&&(l.elapsed!==void 0&&l.elapsed!==null&&(this.elapsed=l.elapsed),l.rows_completed!==void 0&&l.rows_completed!==null&&(this.rows_completed=l.rows_completed),l.rows_estimated!==void 0&&l.rows_estimated!==null&&(this.rows_estimated=l.rows_estimated),l.rows_rejected!==void 0&&l.rows_rejected!==null&&(this.rows_rejected=l.rows_rejected))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.I64?this.elapsed=l.readI64():l.skip(b);break;case 2:b==o.Type.I64?this.rows_completed=l.readI64():l.skip(b);break;case 3:b==o.Type.I64?this.rows_estimated=l.readI64():l.skip(b);break;case 4:b==o.Type.I64?this.rows_rejected=l.readI64():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TImportStatus"),this.elapsed!==null&&this.elapsed!==void 0&&(l.writeFieldBegin("elapsed",o.Type.I64,1),l.writeI64(this.elapsed),l.writeFieldEnd()),this.rows_completed!==null&&this.rows_completed!==void 0&&(l.writeFieldBegin("rows_completed",o.Type.I64,2),l.writeI64(this.rows_completed),l.writeFieldEnd()),this.rows_estimated!==null&&this.rows_estimated!==void 0&&(l.writeFieldBegin("rows_estimated",o.Type.I64,3),l.writeI64(this.rows_estimated),l.writeFieldEnd()),this.rows_rejected!==null&&this.rows_rejected!==void 0&&(l.writeFieldBegin("rows_rejected",o.Type.I64,4),l.writeI64(this.rows_rejected),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TFrontendView=class{constructor(l){this.view_name=null,this.view_state=null,this.image_hash=null,this.update_time=null,this.view_metadata=null,l&&(l.view_name!==void 0&&l.view_name!==null&&(this.view_name=l.view_name),l.view_state!==void 0&&l.view_state!==null&&(this.view_state=l.view_state),l.image_hash!==void 0&&l.image_hash!==null&&(this.image_hash=l.image_hash),l.update_time!==void 0&&l.update_time!==null&&(this.update_time=l.update_time),l.view_metadata!==void 0&&l.view_metadata!==null&&(this.view_metadata=l.view_metadata))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.STRING?this.view_name=l.readString():l.skip(b);break;case 2:b==o.Type.STRING?this.view_state=l.readString():l.skip(b);break;case 3:b==o.Type.STRING?this.image_hash=l.readString():l.skip(b);break;case 4:b==o.Type.STRING?this.update_time=l.readString():l.skip(b);break;case 5:b==o.Type.STRING?this.view_metadata=l.readString():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TFrontendView"),this.view_name!==null&&this.view_name!==void 0&&(l.writeFieldBegin("view_name",o.Type.STRING,1),l.writeString(this.view_name),l.writeFieldEnd()),this.view_state!==null&&this.view_state!==void 0&&(l.writeFieldBegin("view_state",o.Type.STRING,2),l.writeString(this.view_state),l.writeFieldEnd()),this.image_hash!==null&&this.image_hash!==void 0&&(l.writeFieldBegin("image_hash",o.Type.STRING,3),l.writeString(this.image_hash),l.writeFieldEnd()),this.update_time!==null&&this.update_time!==void 0&&(l.writeFieldBegin("update_time",o.Type.STRING,4),l.writeString(this.update_time),l.writeFieldEnd()),this.view_metadata!==null&&this.view_metadata!==void 0&&(l.writeFieldBegin("view_metadata",o.Type.STRING,5),l.writeString(this.view_metadata),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TServerStatus=class{constructor(l){this.read_only=null,this.version=null,this.rendering_enabled=null,this.start_time=null,this.edition=null,this.host_name=null,this.poly_rendering_enabled=null,this.role=null,this.renderer_status_json=null,l&&(l.read_only!==void 0&&l.read_only!==null&&(this.read_only=l.read_only),l.version!==void 0&&l.version!==null&&(this.version=l.version),l.rendering_enabled!==void 0&&l.rendering_enabled!==null&&(this.rendering_enabled=l.rendering_enabled),l.start_time!==void 0&&l.start_time!==null&&(this.start_time=l.start_time),l.edition!==void 0&&l.edition!==null&&(this.edition=l.edition),l.host_name!==void 0&&l.host_name!==null&&(this.host_name=l.host_name),l.poly_rendering_enabled!==void 0&&l.poly_rendering_enabled!==null&&(this.poly_rendering_enabled=l.poly_rendering_enabled),l.role!==void 0&&l.role!==null&&(this.role=l.role),l.renderer_status_json!==void 0&&l.renderer_status_json!==null&&(this.renderer_status_json=l.renderer_status_json))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.BOOL?this.read_only=l.readBool():l.skip(b);break;case 2:b==o.Type.STRING?this.version=l.readString():l.skip(b);break;case 3:b==o.Type.BOOL?this.rendering_enabled=l.readBool():l.skip(b);break;case 4:b==o.Type.I64?this.start_time=l.readI64():l.skip(b);break;case 5:b==o.Type.STRING?this.edition=l.readString():l.skip(b);break;case 6:b==o.Type.STRING?this.host_name=l.readString():l.skip(b);break;case 7:b==o.Type.BOOL?this.poly_rendering_enabled=l.readBool():l.skip(b);break;case 8:b==o.Type.I32?this.role=l.readI32():l.skip(b);break;case 9:b==o.Type.STRING?this.renderer_status_json=l.readString():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TServerStatus"),this.read_only!==null&&this.read_only!==void 0&&(l.writeFieldBegin("read_only",o.Type.BOOL,1),l.writeBool(this.read_only),l.writeFieldEnd()),this.version!==null&&this.version!==void 0&&(l.writeFieldBegin("version",o.Type.STRING,2),l.writeString(this.version),l.writeFieldEnd()),this.rendering_enabled!==null&&this.rendering_enabled!==void 0&&(l.writeFieldBegin("rendering_enabled",o.Type.BOOL,3),l.writeBool(this.rendering_enabled),l.writeFieldEnd()),this.start_time!==null&&this.start_time!==void 0&&(l.writeFieldBegin("start_time",o.Type.I64,4),l.writeI64(this.start_time),l.writeFieldEnd()),this.edition!==null&&this.edition!==void 0&&(l.writeFieldBegin("edition",o.Type.STRING,5),l.writeString(this.edition),l.writeFieldEnd()),this.host_name!==null&&this.host_name!==void 0&&(l.writeFieldBegin("host_name",o.Type.STRING,6),l.writeString(this.host_name),l.writeFieldEnd()),this.poly_rendering_enabled!==null&&this.poly_rendering_enabled!==void 0&&(l.writeFieldBegin("poly_rendering_enabled",o.Type.BOOL,7),l.writeBool(this.poly_rendering_enabled),l.writeFieldEnd()),this.role!==null&&this.role!==void 0&&(l.writeFieldBegin("role",o.Type.I32,8),l.writeI32(this.role),l.writeFieldEnd()),this.renderer_status_json!==null&&this.renderer_status_json!==void 0&&(l.writeFieldBegin("renderer_status_json",o.Type.STRING,9),l.writeString(this.renderer_status_json),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TPixel=class{constructor(l){this.x=null,this.y=null,l&&(l.x!==void 0&&l.x!==null&&(this.x=l.x),l.y!==void 0&&l.y!==null&&(this.y=l.y))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.I64?this.x=l.readI64():l.skip(b);break;case 2:b==o.Type.I64?this.y=l.readI64():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TPixel"),this.x!==null&&this.x!==void 0&&(l.writeFieldBegin("x",o.Type.I64,1),l.writeI64(this.x),l.writeFieldEnd()),this.y!==null&&this.y!==void 0&&(l.writeFieldBegin("y",o.Type.I64,2),l.writeI64(this.y),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TPixelTableRowResult=class{constructor(l){this.pixel=null,this.vega_table_name=null,this.table_id=null,this.row_id=null,this.row_set=null,this.nonce=null,l&&(l.pixel!==void 0&&l.pixel!==null&&(this.pixel=new m.TPixel(l.pixel)),l.vega_table_name!==void 0&&l.vega_table_name!==null&&(this.vega_table_name=l.vega_table_name),l.table_id!==void 0&&l.table_id!==null&&(this.table_id=o.copyList(l.table_id,[null])),l.row_id!==void 0&&l.row_id!==null&&(this.row_id=o.copyList(l.row_id,[null])),l.row_set!==void 0&&l.row_set!==null&&(this.row_set=new m.TRowSet(l.row_set)),l.nonce!==void 0&&l.nonce!==null&&(this.nonce=l.nonce))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.STRUCT?(this.pixel=new m.TPixel,this.pixel.read(l)):l.skip(b);break;case 2:b==o.Type.STRING?this.vega_table_name=l.readString():l.skip(b);break;case 3:if(b==o.Type.LIST){this.table_id=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let I=null;I=l.readI64(),this.table_id.push(I)}l.readListEnd()}else l.skip(b);break;case 4:if(b==o.Type.LIST){this.row_id=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let I=null;I=l.readI64(),this.row_id.push(I)}l.readListEnd()}else l.skip(b);break;case 5:b==o.Type.STRUCT?(this.row_set=new m.TRowSet,this.row_set.read(l)):l.skip(b);break;case 6:b==o.Type.STRING?this.nonce=l.readString():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TPixelTableRowResult"),this.pixel!==null&&this.pixel!==void 0&&(l.writeFieldBegin("pixel",o.Type.STRUCT,1),this.pixel.write(l),l.writeFieldEnd()),this.vega_table_name!==null&&this.vega_table_name!==void 0&&(l.writeFieldBegin("vega_table_name",o.Type.STRING,2),l.writeString(this.vega_table_name),l.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0){l.writeFieldBegin("table_id",o.Type.LIST,3),l.writeListBegin(o.Type.I64,this.table_id.length);for(let T in this.table_id)this.table_id.hasOwnProperty(T)&&(T=this.table_id[T],l.writeI64(T));l.writeListEnd(),l.writeFieldEnd()}if(this.row_id!==null&&this.row_id!==void 0){l.writeFieldBegin("row_id",o.Type.LIST,4),l.writeListBegin(o.Type.I64,this.row_id.length);for(let T in this.row_id)this.row_id.hasOwnProperty(T)&&(T=this.row_id[T],l.writeI64(T));l.writeListEnd(),l.writeFieldEnd()}this.row_set!==null&&this.row_set!==void 0&&(l.writeFieldBegin("row_set",o.Type.STRUCT,5),this.row_set.write(l),l.writeFieldEnd()),this.nonce!==null&&this.nonce!==void 0&&(l.writeFieldBegin("nonce",o.Type.STRING,6),l.writeString(this.nonce),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TRenderResult=class{constructor(l){this.image=null,this.nonce=null,this.execution_time_ms=null,this.render_time_ms=null,this.total_time_ms=null,this.vega_metadata=null,l&&(l.image!==void 0&&l.image!==null&&(this.image=l.image),l.nonce!==void 0&&l.nonce!==null&&(this.nonce=l.nonce),l.execution_time_ms!==void 0&&l.execution_time_ms!==null&&(this.execution_time_ms=l.execution_time_ms),l.render_time_ms!==void 0&&l.render_time_ms!==null&&(this.render_time_ms=l.render_time_ms),l.total_time_ms!==void 0&&l.total_time_ms!==null&&(this.total_time_ms=l.total_time_ms),l.vega_metadata!==void 0&&l.vega_metadata!==null&&(this.vega_metadata=l.vega_metadata))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.STRING?this.image=l.readBinary():l.skip(b);break;case 2:b==o.Type.STRING?this.nonce=l.readString():l.skip(b);break;case 3:b==o.Type.I64?this.execution_time_ms=l.readI64():l.skip(b);break;case 4:b==o.Type.I64?this.render_time_ms=l.readI64():l.skip(b);break;case 5:b==o.Type.I64?this.total_time_ms=l.readI64():l.skip(b);break;case 6:b==o.Type.STRING?this.vega_metadata=l.readString():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TRenderResult"),this.image!==null&&this.image!==void 0&&(l.writeFieldBegin("image",o.Type.STRING,1),l.writeBinary(this.image),l.writeFieldEnd()),this.nonce!==null&&this.nonce!==void 0&&(l.writeFieldBegin("nonce",o.Type.STRING,2),l.writeString(this.nonce),l.writeFieldEnd()),this.execution_time_ms!==null&&this.execution_time_ms!==void 0&&(l.writeFieldBegin("execution_time_ms",o.Type.I64,3),l.writeI64(this.execution_time_ms),l.writeFieldEnd()),this.render_time_ms!==null&&this.render_time_ms!==void 0&&(l.writeFieldBegin("render_time_ms",o.Type.I64,4),l.writeI64(this.render_time_ms),l.writeFieldEnd()),this.total_time_ms!==null&&this.total_time_ms!==void 0&&(l.writeFieldBegin("total_time_ms",o.Type.I64,5),l.writeI64(this.total_time_ms),l.writeFieldEnd()),this.vega_metadata!==null&&this.vega_metadata!==void 0&&(l.writeFieldBegin("vega_metadata",o.Type.STRING,6),l.writeString(this.vega_metadata),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TGpuSpecification=class{constructor(l){this.num_sm=null,this.clock_frequency_kHz=null,this.memory=null,this.compute_capability_major=null,this.compute_capability_minor=null,l&&(l.num_sm!==void 0&&l.num_sm!==null&&(this.num_sm=l.num_sm),l.clock_frequency_kHz!==void 0&&l.clock_frequency_kHz!==null&&(this.clock_frequency_kHz=l.clock_frequency_kHz),l.memory!==void 0&&l.memory!==null&&(this.memory=l.memory),l.compute_capability_major!==void 0&&l.compute_capability_major!==null&&(this.compute_capability_major=l.compute_capability_major),l.compute_capability_minor!==void 0&&l.compute_capability_minor!==null&&(this.compute_capability_minor=l.compute_capability_minor))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.I32?this.num_sm=l.readI32():l.skip(b);break;case 2:b==o.Type.I64?this.clock_frequency_kHz=l.readI64():l.skip(b);break;case 3:b==o.Type.I64?this.memory=l.readI64():l.skip(b);break;case 4:b==o.Type.I16?this.compute_capability_major=l.readI16():l.skip(b);break;case 5:b==o.Type.I16?this.compute_capability_minor=l.readI16():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TGpuSpecification"),this.num_sm!==null&&this.num_sm!==void 0&&(l.writeFieldBegin("num_sm",o.Type.I32,1),l.writeI32(this.num_sm),l.writeFieldEnd()),this.clock_frequency_kHz!==null&&this.clock_frequency_kHz!==void 0&&(l.writeFieldBegin("clock_frequency_kHz",o.Type.I64,2),l.writeI64(this.clock_frequency_kHz),l.writeFieldEnd()),this.memory!==null&&this.memory!==void 0&&(l.writeFieldBegin("memory",o.Type.I64,3),l.writeI64(this.memory),l.writeFieldEnd()),this.compute_capability_major!==null&&this.compute_capability_major!==void 0&&(l.writeFieldBegin("compute_capability_major",o.Type.I16,4),l.writeI16(this.compute_capability_major),l.writeFieldEnd()),this.compute_capability_minor!==null&&this.compute_capability_minor!==void 0&&(l.writeFieldBegin("compute_capability_minor",o.Type.I16,5),l.writeI16(this.compute_capability_minor),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.THardwareInfo=class{constructor(l){this.num_gpu_hw=null,this.num_cpu_hw=null,this.num_gpu_allocated=null,this.start_gpu=null,this.host_name=null,this.gpu_info=null,l&&(l.num_gpu_hw!==void 0&&l.num_gpu_hw!==null&&(this.num_gpu_hw=l.num_gpu_hw),l.num_cpu_hw!==void 0&&l.num_cpu_hw!==null&&(this.num_cpu_hw=l.num_cpu_hw),l.num_gpu_allocated!==void 0&&l.num_gpu_allocated!==null&&(this.num_gpu_allocated=l.num_gpu_allocated),l.start_gpu!==void 0&&l.start_gpu!==null&&(this.start_gpu=l.start_gpu),l.host_name!==void 0&&l.host_name!==null&&(this.host_name=l.host_name),l.gpu_info!==void 0&&l.gpu_info!==null&&(this.gpu_info=o.copyList(l.gpu_info,[m.TGpuSpecification])))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.I16?this.num_gpu_hw=l.readI16():l.skip(b);break;case 2:b==o.Type.I16?this.num_cpu_hw=l.readI16():l.skip(b);break;case 3:b==o.Type.I16?this.num_gpu_allocated=l.readI16():l.skip(b);break;case 4:b==o.Type.I16?this.start_gpu=l.readI16():l.skip(b);break;case 5:b==o.Type.STRING?this.host_name=l.readString():l.skip(b);break;case 6:if(b==o.Type.LIST){this.gpu_info=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let I=null;I=new m.TGpuSpecification,I.read(l),this.gpu_info.push(I)}l.readListEnd()}else l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("THardwareInfo"),this.num_gpu_hw!==null&&this.num_gpu_hw!==void 0&&(l.writeFieldBegin("num_gpu_hw",o.Type.I16,1),l.writeI16(this.num_gpu_hw),l.writeFieldEnd()),this.num_cpu_hw!==null&&this.num_cpu_hw!==void 0&&(l.writeFieldBegin("num_cpu_hw",o.Type.I16,2),l.writeI16(this.num_cpu_hw),l.writeFieldEnd()),this.num_gpu_allocated!==null&&this.num_gpu_allocated!==void 0&&(l.writeFieldBegin("num_gpu_allocated",o.Type.I16,3),l.writeI16(this.num_gpu_allocated),l.writeFieldEnd()),this.start_gpu!==null&&this.start_gpu!==void 0&&(l.writeFieldBegin("start_gpu",o.Type.I16,4),l.writeI16(this.start_gpu),l.writeFieldEnd()),this.host_name!==null&&this.host_name!==void 0&&(l.writeFieldBegin("host_name",o.Type.STRING,5),l.writeString(this.host_name),l.writeFieldEnd()),this.gpu_info!==null&&this.gpu_info!==void 0){l.writeFieldBegin("gpu_info",o.Type.LIST,6),l.writeListBegin(o.Type.STRUCT,this.gpu_info.length);for(let T in this.gpu_info)this.gpu_info.hasOwnProperty(T)&&(T=this.gpu_info[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TClusterHardwareInfo=class{constructor(l){this.hardware_info=null,l&&l.hardware_info!==void 0&&l.hardware_info!==null&&(this.hardware_info=o.copyList(l.hardware_info,[m.THardwareInfo]))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:if(b==o.Type.LIST){this.hardware_info=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let I=null;I=new m.THardwareInfo,I.read(l),this.hardware_info.push(I)}l.readListEnd()}else l.skip(b);break;case 0:l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TClusterHardwareInfo"),this.hardware_info!==null&&this.hardware_info!==void 0){l.writeFieldBegin("hardware_info",o.Type.LIST,1),l.writeListBegin(o.Type.STRUCT,this.hardware_info.length);for(let T in this.hardware_info)this.hardware_info.hasOwnProperty(T)&&(T=this.hardware_info[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TMemoryData=class{constructor(l){this.slab=null,this.start_page=null,this.num_pages=null,this.touch=null,this.chunk_key=null,this.buffer_epoch=null,this.is_free=null,l&&(l.slab!==void 0&&l.slab!==null&&(this.slab=l.slab),l.start_page!==void 0&&l.start_page!==null&&(this.start_page=l.start_page),l.num_pages!==void 0&&l.num_pages!==null&&(this.num_pages=l.num_pages),l.touch!==void 0&&l.touch!==null&&(this.touch=l.touch),l.chunk_key!==void 0&&l.chunk_key!==null&&(this.chunk_key=o.copyList(l.chunk_key,[null])),l.buffer_epoch!==void 0&&l.buffer_epoch!==null&&(this.buffer_epoch=l.buffer_epoch),l.is_free!==void 0&&l.is_free!==null&&(this.is_free=l.is_free))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.I64?this.slab=l.readI64():l.skip(b);break;case 2:b==o.Type.I32?this.start_page=l.readI32():l.skip(b);break;case 3:b==o.Type.I64?this.num_pages=l.readI64():l.skip(b);break;case 4:b==o.Type.I32?this.touch=l.readI32():l.skip(b);break;case 5:if(b==o.Type.LIST){this.chunk_key=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let I=null;I=l.readI64(),this.chunk_key.push(I)}l.readListEnd()}else l.skip(b);break;case 6:b==o.Type.I32?this.buffer_epoch=l.readI32():l.skip(b);break;case 7:b==o.Type.BOOL?this.is_free=l.readBool():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TMemoryData"),this.slab!==null&&this.slab!==void 0&&(l.writeFieldBegin("slab",o.Type.I64,1),l.writeI64(this.slab),l.writeFieldEnd()),this.start_page!==null&&this.start_page!==void 0&&(l.writeFieldBegin("start_page",o.Type.I32,2),l.writeI32(this.start_page),l.writeFieldEnd()),this.num_pages!==null&&this.num_pages!==void 0&&(l.writeFieldBegin("num_pages",o.Type.I64,3),l.writeI64(this.num_pages),l.writeFieldEnd()),this.touch!==null&&this.touch!==void 0&&(l.writeFieldBegin("touch",o.Type.I32,4),l.writeI32(this.touch),l.writeFieldEnd()),this.chunk_key!==null&&this.chunk_key!==void 0){l.writeFieldBegin("chunk_key",o.Type.LIST,5),l.writeListBegin(o.Type.I64,this.chunk_key.length);for(let T in this.chunk_key)this.chunk_key.hasOwnProperty(T)&&(T=this.chunk_key[T],l.writeI64(T));l.writeListEnd(),l.writeFieldEnd()}this.buffer_epoch!==null&&this.buffer_epoch!==void 0&&(l.writeFieldBegin("buffer_epoch",o.Type.I32,6),l.writeI32(this.buffer_epoch),l.writeFieldEnd()),this.is_free!==null&&this.is_free!==void 0&&(l.writeFieldBegin("is_free",o.Type.BOOL,7),l.writeBool(this.is_free),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TNodeMemoryInfo=class{constructor(l){this.host_name=null,this.page_size=null,this.max_num_pages=null,this.num_pages_allocated=null,this.is_allocation_capped=null,this.node_memory_data=null,l&&(l.host_name!==void 0&&l.host_name!==null&&(this.host_name=l.host_name),l.page_size!==void 0&&l.page_size!==null&&(this.page_size=l.page_size),l.max_num_pages!==void 0&&l.max_num_pages!==null&&(this.max_num_pages=l.max_num_pages),l.num_pages_allocated!==void 0&&l.num_pages_allocated!==null&&(this.num_pages_allocated=l.num_pages_allocated),l.is_allocation_capped!==void 0&&l.is_allocation_capped!==null&&(this.is_allocation_capped=l.is_allocation_capped),l.node_memory_data!==void 0&&l.node_memory_data!==null&&(this.node_memory_data=o.copyList(l.node_memory_data,[m.TMemoryData])))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.STRING?this.host_name=l.readString():l.skip(b);break;case 2:b==o.Type.I64?this.page_size=l.readI64():l.skip(b);break;case 3:b==o.Type.I64?this.max_num_pages=l.readI64():l.skip(b);break;case 4:b==o.Type.I64?this.num_pages_allocated=l.readI64():l.skip(b);break;case 5:b==o.Type.BOOL?this.is_allocation_capped=l.readBool():l.skip(b);break;case 6:if(b==o.Type.LIST){this.node_memory_data=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let I=null;I=new m.TMemoryData,I.read(l),this.node_memory_data.push(I)}l.readListEnd()}else l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TNodeMemoryInfo"),this.host_name!==null&&this.host_name!==void 0&&(l.writeFieldBegin("host_name",o.Type.STRING,1),l.writeString(this.host_name),l.writeFieldEnd()),this.page_size!==null&&this.page_size!==void 0&&(l.writeFieldBegin("page_size",o.Type.I64,2),l.writeI64(this.page_size),l.writeFieldEnd()),this.max_num_pages!==null&&this.max_num_pages!==void 0&&(l.writeFieldBegin("max_num_pages",o.Type.I64,3),l.writeI64(this.max_num_pages),l.writeFieldEnd()),this.num_pages_allocated!==null&&this.num_pages_allocated!==void 0&&(l.writeFieldBegin("num_pages_allocated",o.Type.I64,4),l.writeI64(this.num_pages_allocated),l.writeFieldEnd()),this.is_allocation_capped!==null&&this.is_allocation_capped!==void 0&&(l.writeFieldBegin("is_allocation_capped",o.Type.BOOL,5),l.writeBool(this.is_allocation_capped),l.writeFieldEnd()),this.node_memory_data!==null&&this.node_memory_data!==void 0){l.writeFieldBegin("node_memory_data",o.Type.LIST,6),l.writeListBegin(o.Type.STRUCT,this.node_memory_data.length);for(let T in this.node_memory_data)this.node_memory_data.hasOwnProperty(T)&&(T=this.node_memory_data[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TTableMeta=class{constructor(l){this.table_name=null,this.num_cols=null,this.is_view=null,this.is_replicated=null,this.shard_count=null,this.max_rows=null,this.table_id=null,this.max_table_id=null,this.col_types=null,this.col_names=null,l&&(l.table_name!==void 0&&l.table_name!==null&&(this.table_name=l.table_name),l.num_cols!==void 0&&l.num_cols!==null&&(this.num_cols=l.num_cols),l.is_view!==void 0&&l.is_view!==null&&(this.is_view=l.is_view),l.is_replicated!==void 0&&l.is_replicated!==null&&(this.is_replicated=l.is_replicated),l.shard_count!==void 0&&l.shard_count!==null&&(this.shard_count=l.shard_count),l.max_rows!==void 0&&l.max_rows!==null&&(this.max_rows=l.max_rows),l.table_id!==void 0&&l.table_id!==null&&(this.table_id=l.table_id),l.max_table_id!==void 0&&l.max_table_id!==null&&(this.max_table_id=l.max_table_id),l.col_types!==void 0&&l.col_types!==null&&(this.col_types=o.copyList(l.col_types,[g.TTypeInfo])),l.col_names!==void 0&&l.col_names!==null&&(this.col_names=o.copyList(l.col_names,[null])))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.STRING?this.table_name=l.readString():l.skip(b);break;case 2:b==o.Type.I64?this.num_cols=l.readI64():l.skip(b);break;case 4:b==o.Type.BOOL?this.is_view=l.readBool():l.skip(b);break;case 5:b==o.Type.BOOL?this.is_replicated=l.readBool():l.skip(b);break;case 6:b==o.Type.I64?this.shard_count=l.readI64():l.skip(b);break;case 7:b==o.Type.I64?this.max_rows=l.readI64():l.skip(b);break;case 8:b==o.Type.I64?this.table_id=l.readI64():l.skip(b);break;case 9:b==o.Type.I64?this.max_table_id=l.readI64():l.skip(b);break;case 10:if(b==o.Type.LIST){this.col_types=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let I=null;I=new g.TTypeInfo,I.read(l),this.col_types.push(I)}l.readListEnd()}else l.skip(b);break;case 11:if(b==o.Type.LIST){this.col_names=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let I=null;I=l.readString(),this.col_names.push(I)}l.readListEnd()}else l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TTableMeta"),this.table_name!==null&&this.table_name!==void 0&&(l.writeFieldBegin("table_name",o.Type.STRING,1),l.writeString(this.table_name),l.writeFieldEnd()),this.num_cols!==null&&this.num_cols!==void 0&&(l.writeFieldBegin("num_cols",o.Type.I64,2),l.writeI64(this.num_cols),l.writeFieldEnd()),this.is_view!==null&&this.is_view!==void 0&&(l.writeFieldBegin("is_view",o.Type.BOOL,4),l.writeBool(this.is_view),l.writeFieldEnd()),this.is_replicated!==null&&this.is_replicated!==void 0&&(l.writeFieldBegin("is_replicated",o.Type.BOOL,5),l.writeBool(this.is_replicated),l.writeFieldEnd()),this.shard_count!==null&&this.shard_count!==void 0&&(l.writeFieldBegin("shard_count",o.Type.I64,6),l.writeI64(this.shard_count),l.writeFieldEnd()),this.max_rows!==null&&this.max_rows!==void 0&&(l.writeFieldBegin("max_rows",o.Type.I64,7),l.writeI64(this.max_rows),l.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0&&(l.writeFieldBegin("table_id",o.Type.I64,8),l.writeI64(this.table_id),l.writeFieldEnd()),this.max_table_id!==null&&this.max_table_id!==void 0&&(l.writeFieldBegin("max_table_id",o.Type.I64,9),l.writeI64(this.max_table_id),l.writeFieldEnd()),this.col_types!==null&&this.col_types!==void 0){l.writeFieldBegin("col_types",o.Type.LIST,10),l.writeListBegin(o.Type.STRUCT,this.col_types.length);for(let T in this.col_types)this.col_types.hasOwnProperty(T)&&(T=this.col_types[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}if(this.col_names!==null&&this.col_names!==void 0){l.writeFieldBegin("col_names",o.Type.LIST,11),l.writeListBegin(o.Type.STRING,this.col_names.length);for(let T in this.col_names)this.col_names.hasOwnProperty(T)&&(T=this.col_names[T],l.writeString(T));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TTableRefreshInfo=class{constructor(l){this.update_type=null,this.timing_type=null,this.start_date_time=null,this.interval_type=null,this.interval_count=null,this.last_refresh_time=null,this.next_refresh_time=null,l&&(l.update_type!==void 0&&l.update_type!==null&&(this.update_type=l.update_type),l.timing_type!==void 0&&l.timing_type!==null&&(this.timing_type=l.timing_type),l.start_date_time!==void 0&&l.start_date_time!==null&&(this.start_date_time=l.start_date_time),l.interval_type!==void 0&&l.interval_type!==null&&(this.interval_type=l.interval_type),l.interval_count!==void 0&&l.interval_count!==null&&(this.interval_count=l.interval_count),l.last_refresh_time!==void 0&&l.last_refresh_time!==null&&(this.last_refresh_time=l.last_refresh_time),l.next_refresh_time!==void 0&&l.next_refresh_time!==null&&(this.next_refresh_time=l.next_refresh_time))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.I32?this.update_type=l.readI32():l.skip(b);break;case 2:b==o.Type.I32?this.timing_type=l.readI32():l.skip(b);break;case 3:b==o.Type.STRING?this.start_date_time=l.readString():l.skip(b);break;case 4:b==o.Type.I32?this.interval_type=l.readI32():l.skip(b);break;case 5:b==o.Type.I64?this.interval_count=l.readI64():l.skip(b);break;case 6:b==o.Type.STRING?this.last_refresh_time=l.readString():l.skip(b);break;case 7:b==o.Type.STRING?this.next_refresh_time=l.readString():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TTableRefreshInfo"),this.update_type!==null&&this.update_type!==void 0&&(l.writeFieldBegin("update_type",o.Type.I32,1),l.writeI32(this.update_type),l.writeFieldEnd()),this.timing_type!==null&&this.timing_type!==void 0&&(l.writeFieldBegin("timing_type",o.Type.I32,2),l.writeI32(this.timing_type),l.writeFieldEnd()),this.start_date_time!==null&&this.start_date_time!==void 0&&(l.writeFieldBegin("start_date_time",o.Type.STRING,3),l.writeString(this.start_date_time),l.writeFieldEnd()),this.interval_type!==null&&this.interval_type!==void 0&&(l.writeFieldBegin("interval_type",o.Type.I32,4),l.writeI32(this.interval_type),l.writeFieldEnd()),this.interval_count!==null&&this.interval_count!==void 0&&(l.writeFieldBegin("interval_count",o.Type.I64,5),l.writeI64(this.interval_count),l.writeFieldEnd()),this.last_refresh_time!==null&&this.last_refresh_time!==void 0&&(l.writeFieldBegin("last_refresh_time",o.Type.STRING,6),l.writeString(this.last_refresh_time),l.writeFieldEnd()),this.next_refresh_time!==null&&this.next_refresh_time!==void 0&&(l.writeFieldBegin("next_refresh_time",o.Type.STRING,7),l.writeString(this.next_refresh_time),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TTableDetails=class{constructor(l){this.row_desc=null,this.fragment_size=null,this.page_size=null,this.max_rows=null,this.view_sql=null,this.shard_count=null,this.key_metainfo=null,this.is_temporary=null,this.partition_detail=null,this.table_type=null,this.refresh_info=null,l&&(l.row_desc!==void 0&&l.row_desc!==null&&(this.row_desc=o.copyList(l.row_desc,[m.TColumnType])),l.fragment_size!==void 0&&l.fragment_size!==null&&(this.fragment_size=l.fragment_size),l.page_size!==void 0&&l.page_size!==null&&(this.page_size=l.page_size),l.max_rows!==void 0&&l.max_rows!==null&&(this.max_rows=l.max_rows),l.view_sql!==void 0&&l.view_sql!==null&&(this.view_sql=l.view_sql),l.shard_count!==void 0&&l.shard_count!==null&&(this.shard_count=l.shard_count),l.key_metainfo!==void 0&&l.key_metainfo!==null&&(this.key_metainfo=l.key_metainfo),l.is_temporary!==void 0&&l.is_temporary!==null&&(this.is_temporary=l.is_temporary),l.partition_detail!==void 0&&l.partition_detail!==null&&(this.partition_detail=l.partition_detail),l.table_type!==void 0&&l.table_type!==null&&(this.table_type=l.table_type),l.refresh_info!==void 0&&l.refresh_info!==null&&(this.refresh_info=new m.TTableRefreshInfo(l.refresh_info)))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:if(b==o.Type.LIST){this.row_desc=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let I=null;I=new m.TColumnType,I.read(l),this.row_desc.push(I)}l.readListEnd()}else l.skip(b);break;case 2:b==o.Type.I64?this.fragment_size=l.readI64():l.skip(b);break;case 3:b==o.Type.I64?this.page_size=l.readI64():l.skip(b);break;case 4:b==o.Type.I64?this.max_rows=l.readI64():l.skip(b);break;case 5:b==o.Type.STRING?this.view_sql=l.readString():l.skip(b);break;case 6:b==o.Type.I64?this.shard_count=l.readI64():l.skip(b);break;case 7:b==o.Type.STRING?this.key_metainfo=l.readString():l.skip(b);break;case 8:b==o.Type.BOOL?this.is_temporary=l.readBool():l.skip(b);break;case 9:b==o.Type.I32?this.partition_detail=l.readI32():l.skip(b);break;case 10:b==o.Type.I32?this.table_type=l.readI32():l.skip(b);break;case 11:b==o.Type.STRUCT?(this.refresh_info=new m.TTableRefreshInfo,this.refresh_info.read(l)):l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TTableDetails"),this.row_desc!==null&&this.row_desc!==void 0){l.writeFieldBegin("row_desc",o.Type.LIST,1),l.writeListBegin(o.Type.STRUCT,this.row_desc.length);for(let T in this.row_desc)this.row_desc.hasOwnProperty(T)&&(T=this.row_desc[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}this.fragment_size!==null&&this.fragment_size!==void 0&&(l.writeFieldBegin("fragment_size",o.Type.I64,2),l.writeI64(this.fragment_size),l.writeFieldEnd()),this.page_size!==null&&this.page_size!==void 0&&(l.writeFieldBegin("page_size",o.Type.I64,3),l.writeI64(this.page_size),l.writeFieldEnd()),this.max_rows!==null&&this.max_rows!==void 0&&(l.writeFieldBegin("max_rows",o.Type.I64,4),l.writeI64(this.max_rows),l.writeFieldEnd()),this.view_sql!==null&&this.view_sql!==void 0&&(l.writeFieldBegin("view_sql",o.Type.STRING,5),l.writeString(this.view_sql),l.writeFieldEnd()),this.shard_count!==null&&this.shard_count!==void 0&&(l.writeFieldBegin("shard_count",o.Type.I64,6),l.writeI64(this.shard_count),l.writeFieldEnd()),this.key_metainfo!==null&&this.key_metainfo!==void 0&&(l.writeFieldBegin("key_metainfo",o.Type.STRING,7),l.writeString(this.key_metainfo),l.writeFieldEnd()),this.is_temporary!==null&&this.is_temporary!==void 0&&(l.writeFieldBegin("is_temporary",o.Type.BOOL,8),l.writeBool(this.is_temporary),l.writeFieldEnd()),this.partition_detail!==null&&this.partition_detail!==void 0&&(l.writeFieldBegin("partition_detail",o.Type.I32,9),l.writeI32(this.partition_detail),l.writeFieldEnd()),this.table_type!==null&&this.table_type!==void 0&&(l.writeFieldBegin("table_type",o.Type.I32,10),l.writeI32(this.table_type),l.writeFieldEnd()),this.refresh_info!==null&&this.refresh_info!==void 0&&(l.writeFieldBegin("refresh_info",o.Type.STRUCT,11),this.refresh_info.write(l),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TColumnRange=class{constructor(l){this.type=null,this.col_id=null,this.table_id=null,this.has_nulls=null,this.int_min=null,this.int_max=null,this.bucket=null,this.fp_min=null,this.fp_max=null,l&&(l.type!==void 0&&l.type!==null&&(this.type=l.type),l.col_id!==void 0&&l.col_id!==null&&(this.col_id=l.col_id),l.table_id!==void 0&&l.table_id!==null&&(this.table_id=l.table_id),l.has_nulls!==void 0&&l.has_nulls!==null&&(this.has_nulls=l.has_nulls),l.int_min!==void 0&&l.int_min!==null&&(this.int_min=l.int_min),l.int_max!==void 0&&l.int_max!==null&&(this.int_max=l.int_max),l.bucket!==void 0&&l.bucket!==null&&(this.bucket=l.bucket),l.fp_min!==void 0&&l.fp_min!==null&&(this.fp_min=l.fp_min),l.fp_max!==void 0&&l.fp_max!==null&&(this.fp_max=l.fp_max))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.I32?this.type=l.readI32():l.skip(b);break;case 2:b==o.Type.I32?this.col_id=l.readI32():l.skip(b);break;case 3:b==o.Type.I32?this.table_id=l.readI32():l.skip(b);break;case 4:b==o.Type.BOOL?this.has_nulls=l.readBool():l.skip(b);break;case 5:b==o.Type.I64?this.int_min=l.readI64():l.skip(b);break;case 6:b==o.Type.I64?this.int_max=l.readI64():l.skip(b);break;case 7:b==o.Type.I64?this.bucket=l.readI64():l.skip(b);break;case 8:b==o.Type.DOUBLE?this.fp_min=l.readDouble():l.skip(b);break;case 9:b==o.Type.DOUBLE?this.fp_max=l.readDouble():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TColumnRange"),this.type!==null&&this.type!==void 0&&(l.writeFieldBegin("type",o.Type.I32,1),l.writeI32(this.type),l.writeFieldEnd()),this.col_id!==null&&this.col_id!==void 0&&(l.writeFieldBegin("col_id",o.Type.I32,2),l.writeI32(this.col_id),l.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0&&(l.writeFieldBegin("table_id",o.Type.I32,3),l.writeI32(this.table_id),l.writeFieldEnd()),this.has_nulls!==null&&this.has_nulls!==void 0&&(l.writeFieldBegin("has_nulls",o.Type.BOOL,4),l.writeBool(this.has_nulls),l.writeFieldEnd()),this.int_min!==null&&this.int_min!==void 0&&(l.writeFieldBegin("int_min",o.Type.I64,5),l.writeI64(this.int_min),l.writeFieldEnd()),this.int_max!==null&&this.int_max!==void 0&&(l.writeFieldBegin("int_max",o.Type.I64,6),l.writeI64(this.int_max),l.writeFieldEnd()),this.bucket!==null&&this.bucket!==void 0&&(l.writeFieldBegin("bucket",o.Type.I64,7),l.writeI64(this.bucket),l.writeFieldEnd()),this.fp_min!==null&&this.fp_min!==void 0&&(l.writeFieldBegin("fp_min",o.Type.DOUBLE,8),l.writeDouble(this.fp_min),l.writeFieldEnd()),this.fp_max!==null&&this.fp_max!==void 0&&(l.writeFieldBegin("fp_max",o.Type.DOUBLE,9),l.writeDouble(this.fp_max),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDictionaryGeneration=class{constructor(l){this.dict_id=null,this.entry_count=null,l&&(l.dict_id!==void 0&&l.dict_id!==null&&(this.dict_id=l.dict_id),l.entry_count!==void 0&&l.entry_count!==null&&(this.entry_count=l.entry_count))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.I32?this.dict_id=l.readI32():l.skip(b);break;case 2:b==o.Type.I64?this.entry_count=l.readI64():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TDictionaryGeneration"),this.dict_id!==null&&this.dict_id!==void 0&&(l.writeFieldBegin("dict_id",o.Type.I32,1),l.writeI32(this.dict_id),l.writeFieldEnd()),this.entry_count!==null&&this.entry_count!==void 0&&(l.writeFieldBegin("entry_count",o.Type.I64,2),l.writeI64(this.entry_count),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TTableGeneration=class{constructor(l){this.table_id=null,this.tuple_count=null,this.start_rowid=null,l&&(l.table_id!==void 0&&l.table_id!==null&&(this.table_id=l.table_id),l.tuple_count!==void 0&&l.tuple_count!==null&&(this.tuple_count=l.tuple_count),l.start_rowid!==void 0&&l.start_rowid!==null&&(this.start_rowid=l.start_rowid))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.I32?this.table_id=l.readI32():l.skip(b);break;case 2:b==o.Type.I64?this.tuple_count=l.readI64():l.skip(b);break;case 3:b==o.Type.I64?this.start_rowid=l.readI64():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TTableGeneration"),this.table_id!==null&&this.table_id!==void 0&&(l.writeFieldBegin("table_id",o.Type.I32,1),l.writeI32(this.table_id),l.writeFieldEnd()),this.tuple_count!==null&&this.tuple_count!==void 0&&(l.writeFieldBegin("tuple_count",o.Type.I64,2),l.writeI64(this.tuple_count),l.writeFieldEnd()),this.start_rowid!==null&&this.start_rowid!==void 0&&(l.writeFieldBegin("start_rowid",o.Type.I64,3),l.writeI64(this.start_rowid),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TPendingQuery=class{constructor(l){this.id=null,this.column_ranges=null,this.dictionary_generations=null,this.table_generations=null,this.parent_session_id=null,l&&(l.id!==void 0&&l.id!==null&&(this.id=l.id),l.column_ranges!==void 0&&l.column_ranges!==null&&(this.column_ranges=o.copyList(l.column_ranges,[m.TColumnRange])),l.dictionary_generations!==void 0&&l.dictionary_generations!==null&&(this.dictionary_generations=o.copyList(l.dictionary_generations,[m.TDictionaryGeneration])),l.table_generations!==void 0&&l.table_generations!==null&&(this.table_generations=o.copyList(l.table_generations,[m.TTableGeneration])),l.parent_session_id!==void 0&&l.parent_session_id!==null&&(this.parent_session_id=l.parent_session_id))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.I64?this.id=l.readI64():l.skip(b);break;case 2:if(b==o.Type.LIST){this.column_ranges=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let I=null;I=new m.TColumnRange,I.read(l),this.column_ranges.push(I)}l.readListEnd()}else l.skip(b);break;case 3:if(b==o.Type.LIST){this.dictionary_generations=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let I=null;I=new m.TDictionaryGeneration,I.read(l),this.dictionary_generations.push(I)}l.readListEnd()}else l.skip(b);break;case 4:if(b==o.Type.LIST){this.table_generations=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let I=null;I=new m.TTableGeneration,I.read(l),this.table_generations.push(I)}l.readListEnd()}else l.skip(b);break;case 5:b==o.Type.STRING?this.parent_session_id=l.readString():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TPendingQuery"),this.id!==null&&this.id!==void 0&&(l.writeFieldBegin("id",o.Type.I64,1),l.writeI64(this.id),l.writeFieldEnd()),this.column_ranges!==null&&this.column_ranges!==void 0){l.writeFieldBegin("column_ranges",o.Type.LIST,2),l.writeListBegin(o.Type.STRUCT,this.column_ranges.length);for(let T in this.column_ranges)this.column_ranges.hasOwnProperty(T)&&(T=this.column_ranges[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}if(this.dictionary_generations!==null&&this.dictionary_generations!==void 0){l.writeFieldBegin("dictionary_generations",o.Type.LIST,3),l.writeListBegin(o.Type.STRUCT,this.dictionary_generations.length);for(let T in this.dictionary_generations)this.dictionary_generations.hasOwnProperty(T)&&(T=this.dictionary_generations[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}if(this.table_generations!==null&&this.table_generations!==void 0){l.writeFieldBegin("table_generations",o.Type.LIST,4),l.writeListBegin(o.Type.STRUCT,this.table_generations.length);for(let T in this.table_generations)this.table_generations.hasOwnProperty(T)&&(T=this.table_generations[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}this.parent_session_id!==null&&this.parent_session_id!==void 0&&(l.writeFieldBegin("parent_session_id",o.Type.STRING,5),l.writeString(this.parent_session_id),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TVarLen=class{constructor(l){this.payload=null,this.is_null=null,l&&(l.payload!==void 0&&l.payload!==null&&(this.payload=l.payload),l.is_null!==void 0&&l.is_null!==null&&(this.is_null=l.is_null))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.STRING?this.payload=l.readBinary():l.skip(b);break;case 2:b==o.Type.BOOL?this.is_null=l.readBool():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TVarLen"),this.payload!==null&&this.payload!==void 0&&(l.writeFieldBegin("payload",o.Type.STRING,1),l.writeBinary(this.payload),l.writeFieldEnd()),this.is_null!==null&&this.is_null!==void 0&&(l.writeFieldBegin("is_null",o.Type.BOOL,2),l.writeBool(this.is_null),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDataBlockPtr=class{constructor(l){this.fixed_len_data=null,this.var_len_data=null,l&&(l.fixed_len_data!==void 0&&l.fixed_len_data!==null&&(this.fixed_len_data=l.fixed_len_data),l.var_len_data!==void 0&&l.var_len_data!==null&&(this.var_len_data=o.copyList(l.var_len_data,[m.TVarLen])))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.STRING?this.fixed_len_data=l.readBinary():l.skip(b);break;case 2:if(b==o.Type.LIST){this.var_len_data=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let I=null;I=new m.TVarLen,I.read(l),this.var_len_data.push(I)}l.readListEnd()}else l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TDataBlockPtr"),this.fixed_len_data!==null&&this.fixed_len_data!==void 0&&(l.writeFieldBegin("fixed_len_data",o.Type.STRING,1),l.writeBinary(this.fixed_len_data),l.writeFieldEnd()),this.var_len_data!==null&&this.var_len_data!==void 0){l.writeFieldBegin("var_len_data",o.Type.LIST,2),l.writeListBegin(o.Type.STRUCT,this.var_len_data.length);for(let T in this.var_len_data)this.var_len_data.hasOwnProperty(T)&&(T=this.var_len_data[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TInsertData=class{constructor(l){this.db_id=null,this.table_id=null,this.column_ids=null,this.data=null,this.num_rows=null,this.is_default=null,l&&(l.db_id!==void 0&&l.db_id!==null&&(this.db_id=l.db_id),l.table_id!==void 0&&l.table_id!==null&&(this.table_id=l.table_id),l.column_ids!==void 0&&l.column_ids!==null&&(this.column_ids=o.copyList(l.column_ids,[null])),l.data!==void 0&&l.data!==null&&(this.data=o.copyList(l.data,[m.TDataBlockPtr])),l.num_rows!==void 0&&l.num_rows!==null&&(this.num_rows=l.num_rows),l.is_default!==void 0&&l.is_default!==null&&(this.is_default=o.copyList(l.is_default,[null])))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.I32?this.db_id=l.readI32():l.skip(b);break;case 2:b==o.Type.I32?this.table_id=l.readI32():l.skip(b);break;case 3:if(b==o.Type.LIST){this.column_ids=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let I=null;I=l.readI32(),this.column_ids.push(I)}l.readListEnd()}else l.skip(b);break;case 4:if(b==o.Type.LIST){this.data=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let I=null;I=new m.TDataBlockPtr,I.read(l),this.data.push(I)}l.readListEnd()}else l.skip(b);break;case 5:b==o.Type.I64?this.num_rows=l.readI64():l.skip(b);break;case 6:if(b==o.Type.LIST){this.is_default=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let I=null;I=l.readBool(),this.is_default.push(I)}l.readListEnd()}else l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TInsertData"),this.db_id!==null&&this.db_id!==void 0&&(l.writeFieldBegin("db_id",o.Type.I32,1),l.writeI32(this.db_id),l.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0&&(l.writeFieldBegin("table_id",o.Type.I32,2),l.writeI32(this.table_id),l.writeFieldEnd()),this.column_ids!==null&&this.column_ids!==void 0){l.writeFieldBegin("column_ids",o.Type.LIST,3),l.writeListBegin(o.Type.I32,this.column_ids.length);for(let T in this.column_ids)this.column_ids.hasOwnProperty(T)&&(T=this.column_ids[T],l.writeI32(T));l.writeListEnd(),l.writeFieldEnd()}if(this.data!==null&&this.data!==void 0){l.writeFieldBegin("data",o.Type.LIST,4),l.writeListBegin(o.Type.STRUCT,this.data.length);for(let T in this.data)this.data.hasOwnProperty(T)&&(T=this.data[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}if(this.num_rows!==null&&this.num_rows!==void 0&&(l.writeFieldBegin("num_rows",o.Type.I64,5),l.writeI64(this.num_rows),l.writeFieldEnd()),this.is_default!==null&&this.is_default!==void 0){l.writeFieldBegin("is_default",o.Type.LIST,6),l.writeListBegin(o.Type.BOOL,this.is_default.length);for(let T in this.is_default)this.is_default.hasOwnProperty(T)&&(T=this.is_default[T],l.writeBool(T));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TChunkData=class{constructor(l){this.data_buffer=null,this.index_buffer=null,l&&(l.data_buffer!==void 0&&l.data_buffer!==null&&(this.data_buffer=l.data_buffer),l.index_buffer!==void 0&&l.index_buffer!==null&&(this.index_buffer=l.index_buffer))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.STRING?this.data_buffer=l.readBinary():l.skip(b);break;case 2:b==o.Type.STRING?this.index_buffer=l.readBinary():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TChunkData"),this.data_buffer!==null&&this.data_buffer!==void 0&&(l.writeFieldBegin("data_buffer",o.Type.STRING,1),l.writeBinary(this.data_buffer),l.writeFieldEnd()),this.index_buffer!==null&&this.index_buffer!==void 0&&(l.writeFieldBegin("index_buffer",o.Type.STRING,2),l.writeBinary(this.index_buffer),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TInsertChunks=class{constructor(l){this.db_id=null,this.table_id=null,this.data=null,this.valid_indices=null,this.num_rows=null,l&&(l.db_id!==void 0&&l.db_id!==null&&(this.db_id=l.db_id),l.table_id!==void 0&&l.table_id!==null&&(this.table_id=l.table_id),l.data!==void 0&&l.data!==null&&(this.data=o.copyList(l.data,[m.TChunkData])),l.valid_indices!==void 0&&l.valid_indices!==null&&(this.valid_indices=o.copyList(l.valid_indices,[null])),l.num_rows!==void 0&&l.num_rows!==null&&(this.num_rows=l.num_rows))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.I32?this.db_id=l.readI32():l.skip(b);break;case 2:b==o.Type.I32?this.table_id=l.readI32():l.skip(b);break;case 3:if(b==o.Type.LIST){this.data=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let I=null;I=new m.TChunkData,I.read(l),this.data.push(I)}l.readListEnd()}else l.skip(b);break;case 4:if(b==o.Type.LIST){this.valid_indices=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let I=null;I=l.readI64(),this.valid_indices.push(I)}l.readListEnd()}else l.skip(b);break;case 5:b==o.Type.I64?this.num_rows=l.readI64():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TInsertChunks"),this.db_id!==null&&this.db_id!==void 0&&(l.writeFieldBegin("db_id",o.Type.I32,1),l.writeI32(this.db_id),l.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0&&(l.writeFieldBegin("table_id",o.Type.I32,2),l.writeI32(this.table_id),l.writeFieldEnd()),this.data!==null&&this.data!==void 0){l.writeFieldBegin("data",o.Type.LIST,3),l.writeListBegin(o.Type.STRUCT,this.data.length);for(let T in this.data)this.data.hasOwnProperty(T)&&(T=this.data[T],T.write(l));l.writeListEnd(),l.writeFieldEnd()}if(this.valid_indices!==null&&this.valid_indices!==void 0){l.writeFieldBegin("valid_indices",o.Type.LIST,4),l.writeListBegin(o.Type.I64,this.valid_indices.length);for(let T in this.valid_indices)this.valid_indices.hasOwnProperty(T)&&(T=this.valid_indices[T],l.writeI64(T));l.writeListEnd(),l.writeFieldEnd()}this.num_rows!==null&&this.num_rows!==void 0&&(l.writeFieldBegin("num_rows",o.Type.I64,5),l.writeI64(this.num_rows),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TPendingRenderQuery=class{constructor(l){this.id=null,l&&l.id!==void 0&&l.id!==null&&(this.id=l.id)}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.I64?this.id=l.readI64():l.skip(b);break;case 0:l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TPendingRenderQuery"),this.id!==null&&this.id!==void 0&&(l.writeFieldBegin("id",o.Type.I64,1),l.writeI64(this.id),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TRenderParseResult=class{constructor(l){this.merge_type=null,this.node_id=null,this.execution_time_ms=null,this.render_time_ms=null,this.total_time_ms=null,l&&(l.merge_type!==void 0&&l.merge_type!==null&&(this.merge_type=l.merge_type),l.node_id!==void 0&&l.node_id!==null&&(this.node_id=l.node_id),l.execution_time_ms!==void 0&&l.execution_time_ms!==null&&(this.execution_time_ms=l.execution_time_ms),l.render_time_ms!==void 0&&l.render_time_ms!==null&&(this.render_time_ms=l.render_time_ms),l.total_time_ms!==void 0&&l.total_time_ms!==null&&(this.total_time_ms=l.total_time_ms))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.I32?this.merge_type=l.readI32():l.skip(b);break;case 2:b==o.Type.I32?this.node_id=l.readI32():l.skip(b);break;case 3:b==o.Type.I64?this.execution_time_ms=l.readI64():l.skip(b);break;case 4:b==o.Type.I64?this.render_time_ms=l.readI64():l.skip(b);break;case 5:b==o.Type.I64?this.total_time_ms=l.readI64():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TRenderParseResult"),this.merge_type!==null&&this.merge_type!==void 0&&(l.writeFieldBegin("merge_type",o.Type.I32,1),l.writeI32(this.merge_type),l.writeFieldEnd()),this.node_id!==null&&this.node_id!==void 0&&(l.writeFieldBegin("node_id",o.Type.I32,2),l.writeI32(this.node_id),l.writeFieldEnd()),this.execution_time_ms!==null&&this.execution_time_ms!==void 0&&(l.writeFieldBegin("execution_time_ms",o.Type.I64,3),l.writeI64(this.execution_time_ms),l.writeFieldEnd()),this.render_time_ms!==null&&this.render_time_ms!==void 0&&(l.writeFieldBegin("render_time_ms",o.Type.I64,4),l.writeI64(this.render_time_ms),l.writeFieldEnd()),this.total_time_ms!==null&&this.total_time_ms!==void 0&&(l.writeFieldBegin("total_time_ms",o.Type.I64,5),l.writeI64(this.total_time_ms),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TRawRenderPassDataResult=class{constructor(l){this.num_pixel_channels=null,this.num_pixel_samples=null,this.pixels=null,this.row_ids_A=null,this.row_ids_B=null,this.table_ids=null,this.accum_data=null,this.accum_depth=null,l&&(l.num_pixel_channels!==void 0&&l.num_pixel_channels!==null&&(this.num_pixel_channels=l.num_pixel_channels),l.num_pixel_samples!==void 0&&l.num_pixel_samples!==null&&(this.num_pixel_samples=l.num_pixel_samples),l.pixels!==void 0&&l.pixels!==null&&(this.pixels=l.pixels),l.row_ids_A!==void 0&&l.row_ids_A!==null&&(this.row_ids_A=l.row_ids_A),l.row_ids_B!==void 0&&l.row_ids_B!==null&&(this.row_ids_B=l.row_ids_B),l.table_ids!==void 0&&l.table_ids!==null&&(this.table_ids=l.table_ids),l.accum_data!==void 0&&l.accum_data!==null&&(this.accum_data=l.accum_data),l.accum_depth!==void 0&&l.accum_depth!==null&&(this.accum_depth=l.accum_depth))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.I32?this.num_pixel_channels=l.readI32():l.skip(b);break;case 2:b==o.Type.I32?this.num_pixel_samples=l.readI32():l.skip(b);break;case 3:b==o.Type.STRING?this.pixels=l.readBinary():l.skip(b);break;case 4:b==o.Type.STRING?this.row_ids_A=l.readBinary():l.skip(b);break;case 5:b==o.Type.STRING?this.row_ids_B=l.readBinary():l.skip(b);break;case 6:b==o.Type.STRING?this.table_ids=l.readBinary():l.skip(b);break;case 7:b==o.Type.STRING?this.accum_data=l.readBinary():l.skip(b);break;case 8:b==o.Type.I32?this.accum_depth=l.readI32():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TRawRenderPassDataResult"),this.num_pixel_channels!==null&&this.num_pixel_channels!==void 0&&(l.writeFieldBegin("num_pixel_channels",o.Type.I32,1),l.writeI32(this.num_pixel_channels),l.writeFieldEnd()),this.num_pixel_samples!==null&&this.num_pixel_samples!==void 0&&(l.writeFieldBegin("num_pixel_samples",o.Type.I32,2),l.writeI32(this.num_pixel_samples),l.writeFieldEnd()),this.pixels!==null&&this.pixels!==void 0&&(l.writeFieldBegin("pixels",o.Type.STRING,3),l.writeBinary(this.pixels),l.writeFieldEnd()),this.row_ids_A!==null&&this.row_ids_A!==void 0&&(l.writeFieldBegin("row_ids_A",o.Type.STRING,4),l.writeBinary(this.row_ids_A),l.writeFieldEnd()),this.row_ids_B!==null&&this.row_ids_B!==void 0&&(l.writeFieldBegin("row_ids_B",o.Type.STRING,5),l.writeBinary(this.row_ids_B),l.writeFieldEnd()),this.table_ids!==null&&this.table_ids!==void 0&&(l.writeFieldBegin("table_ids",o.Type.STRING,6),l.writeBinary(this.table_ids),l.writeFieldEnd()),this.accum_data!==null&&this.accum_data!==void 0&&(l.writeFieldBegin("accum_data",o.Type.STRING,7),l.writeBinary(this.accum_data),l.writeFieldEnd()),this.accum_depth!==null&&this.accum_depth!==void 0&&(l.writeFieldBegin("accum_depth",o.Type.I32,8),l.writeI32(this.accum_depth),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TRawPixelData=class{constructor(l){this.width=null,this.height=null,this.render_pass_map=null,l&&(l.width!==void 0&&l.width!==null&&(this.width=l.width),l.height!==void 0&&l.height!==null&&(this.height=l.height),l.render_pass_map!==void 0&&l.render_pass_map!==null&&(this.render_pass_map=o.copyMap(l.render_pass_map,[m.TRawRenderPassDataResult])))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.I32?this.width=l.readI32():l.skip(b);break;case 2:b==o.Type.I32?this.height=l.readI32():l.skip(b);break;case 3:if(b==o.Type.MAP){this.render_pass_map={};const B=l.readMapBegin().size||0;for(let F=0;F<B;++F){let I=null,A=null;I=l.readI32(),A=new m.TRawRenderPassDataResult,A.read(l),this.render_pass_map[I]=A}l.readMapEnd()}else l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TRawPixelData"),this.width!==null&&this.width!==void 0&&(l.writeFieldBegin("width",o.Type.I32,1),l.writeI32(this.width),l.writeFieldEnd()),this.height!==null&&this.height!==void 0&&(l.writeFieldBegin("height",o.Type.I32,2),l.writeI32(this.height),l.writeFieldEnd()),this.render_pass_map!==null&&this.render_pass_map!==void 0){l.writeFieldBegin("render_pass_map",o.Type.MAP,3),l.writeMapBegin(o.Type.I32,o.Type.STRUCT,o.objectLength(this.render_pass_map));for(let T in this.render_pass_map)if(this.render_pass_map.hasOwnProperty(T)){let b=this.render_pass_map[T];l.writeI32(T),b.write(l)}l.writeMapEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TRenderDatum=class{constructor(l){this.type=null,this.cnt=null,this.value=null,l&&(l.type!==void 0&&l.type!==null&&(this.type=l.type),l.cnt!==void 0&&l.cnt!==null&&(this.cnt=l.cnt),l.value!==void 0&&l.value!==null&&(this.value=l.value))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.I32?this.type=l.readI32():l.skip(b);break;case 2:b==o.Type.I32?this.cnt=l.readI32():l.skip(b);break;case 3:b==o.Type.STRING?this.value=l.readBinary():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TRenderDatum"),this.type!==null&&this.type!==void 0&&(l.writeFieldBegin("type",o.Type.I32,1),l.writeI32(this.type),l.writeFieldEnd()),this.cnt!==null&&this.cnt!==void 0&&(l.writeFieldBegin("cnt",o.Type.I32,2),l.writeI32(this.cnt),l.writeFieldEnd()),this.value!==null&&this.value!==void 0&&(l.writeFieldBegin("value",o.Type.STRING,3),l.writeBinary(this.value),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TRenderStepResult=class{constructor(l){this.merge_data=null,this.raw_pixel_data=null,this.execution_time_ms=null,this.render_time_ms=null,this.total_time_ms=null,l&&(l.merge_data!==void 0&&l.merge_data!==null&&(this.merge_data=o.copyMap(l.merge_data,[o.copyMap,o.copyMap,o.copyMap,o.copyList,m.TRenderDatum])),l.raw_pixel_data!==void 0&&l.raw_pixel_data!==null&&(this.raw_pixel_data=new m.TRawPixelData(l.raw_pixel_data)),l.execution_time_ms!==void 0&&l.execution_time_ms!==null&&(this.execution_time_ms=l.execution_time_ms),l.render_time_ms!==void 0&&l.render_time_ms!==null&&(this.render_time_ms=l.render_time_ms),l.total_time_ms!==void 0&&l.total_time_ms!==null&&(this.total_time_ms=l.total_time_ms))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:if(b==o.Type.MAP){this.merge_data={};const B=l.readMapBegin().size||0;for(let F=0;F<B;++F){let I=null,A=null;I=l.readString(),A={};const R=l.readMapBegin().size||0;for(let D=0;D<R;++D){let P=null,U=null;P=l.readString(),U={};const z=l.readMapBegin().size||0;for(let W=0;W<z;++W){let V=null,H=null;V=l.readString(),H={};const G=l.readMapBegin().size||0;for(let le=0;le<G;++le){let pe=null,ne=null;pe=l.readString(),ne=[];const fe=l.readListBegin().size||0;for(let Fe=0;Fe<fe;++Fe){let je=null;je=new m.TRenderDatum,je.read(l),ne.push(je)}l.readListEnd(),H[pe]=ne}l.readMapEnd(),U[V]=H}l.readMapEnd(),A[P]=U}l.readMapEnd(),this.merge_data[I]=A}l.readMapEnd()}else l.skip(b);break;case 2:b==o.Type.STRUCT?(this.raw_pixel_data=new m.TRawPixelData,this.raw_pixel_data.read(l)):l.skip(b);break;case 3:b==o.Type.I64?this.execution_time_ms=l.readI64():l.skip(b);break;case 4:b==o.Type.I64?this.render_time_ms=l.readI64():l.skip(b);break;case 5:b==o.Type.I64?this.total_time_ms=l.readI64():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TRenderStepResult"),this.merge_data!==null&&this.merge_data!==void 0){l.writeFieldBegin("merge_data",o.Type.MAP,1),l.writeMapBegin(o.Type.STRING,o.Type.MAP,o.objectLength(this.merge_data));for(let T in this.merge_data)if(this.merge_data.hasOwnProperty(T)){let b=this.merge_data[T];l.writeString(T),l.writeMapBegin(o.Type.STRING,o.Type.MAP,o.objectLength(b));for(let S in b)if(b.hasOwnProperty(S)){let x=b[S];l.writeString(S),l.writeMapBegin(o.Type.STRING,o.Type.MAP,o.objectLength(x));for(let B in x)if(x.hasOwnProperty(B)){let F=x[B];l.writeString(B),l.writeMapBegin(o.Type.STRING,o.Type.LIST,o.objectLength(F));for(let I in F)if(F.hasOwnProperty(I)){let A=F[I];l.writeString(I),l.writeListBegin(o.Type.STRUCT,A.length);for(let O in A)A.hasOwnProperty(O)&&(O=A[O],O.write(l));l.writeListEnd()}l.writeMapEnd()}l.writeMapEnd()}l.writeMapEnd()}l.writeMapEnd(),l.writeFieldEnd()}this.raw_pixel_data!==null&&this.raw_pixel_data!==void 0&&(l.writeFieldBegin("raw_pixel_data",o.Type.STRUCT,2),this.raw_pixel_data.write(l),l.writeFieldEnd()),this.execution_time_ms!==null&&this.execution_time_ms!==void 0&&(l.writeFieldBegin("execution_time_ms",o.Type.I64,3),l.writeI64(this.execution_time_ms),l.writeFieldEnd()),this.render_time_ms!==null&&this.render_time_ms!==void 0&&(l.writeFieldBegin("render_time_ms",o.Type.I64,4),l.writeI64(this.render_time_ms),l.writeFieldEnd()),this.total_time_ms!==null&&this.total_time_ms!==void 0&&(l.writeFieldBegin("total_time_ms",o.Type.I64,5),l.writeI64(this.total_time_ms),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDatabasePermissions=class{constructor(l){this.create_=null,this.delete_=null,this.view_sql_editor_=null,this.access_=null,l&&(l.create_!==void 0&&l.create_!==null&&(this.create_=l.create_),l.delete_!==void 0&&l.delete_!==null&&(this.delete_=l.delete_),l.view_sql_editor_!==void 0&&l.view_sql_editor_!==null&&(this.view_sql_editor_=l.view_sql_editor_),l.access_!==void 0&&l.access_!==null&&(this.access_=l.access_))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.BOOL?this.create_=l.readBool():l.skip(b);break;case 2:b==o.Type.BOOL?this.delete_=l.readBool():l.skip(b);break;case 3:b==o.Type.BOOL?this.view_sql_editor_=l.readBool():l.skip(b);break;case 4:b==o.Type.BOOL?this.access_=l.readBool():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TDatabasePermissions"),this.create_!==null&&this.create_!==void 0&&(l.writeFieldBegin("create_",o.Type.BOOL,1),l.writeBool(this.create_),l.writeFieldEnd()),this.delete_!==null&&this.delete_!==void 0&&(l.writeFieldBegin("delete_",o.Type.BOOL,2),l.writeBool(this.delete_),l.writeFieldEnd()),this.view_sql_editor_!==null&&this.view_sql_editor_!==void 0&&(l.writeFieldBegin("view_sql_editor_",o.Type.BOOL,3),l.writeBool(this.view_sql_editor_),l.writeFieldEnd()),this.access_!==null&&this.access_!==void 0&&(l.writeFieldBegin("access_",o.Type.BOOL,4),l.writeBool(this.access_),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TTablePermissions=class{constructor(l){this.create_=null,this.drop_=null,this.select_=null,this.insert_=null,this.update_=null,this.delete_=null,this.truncate_=null,this.alter_=null,l&&(l.create_!==void 0&&l.create_!==null&&(this.create_=l.create_),l.drop_!==void 0&&l.drop_!==null&&(this.drop_=l.drop_),l.select_!==void 0&&l.select_!==null&&(this.select_=l.select_),l.insert_!==void 0&&l.insert_!==null&&(this.insert_=l.insert_),l.update_!==void 0&&l.update_!==null&&(this.update_=l.update_),l.delete_!==void 0&&l.delete_!==null&&(this.delete_=l.delete_),l.truncate_!==void 0&&l.truncate_!==null&&(this.truncate_=l.truncate_),l.alter_!==void 0&&l.alter_!==null&&(this.alter_=l.alter_))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.BOOL?this.create_=l.readBool():l.skip(b);break;case 2:b==o.Type.BOOL?this.drop_=l.readBool():l.skip(b);break;case 3:b==o.Type.BOOL?this.select_=l.readBool():l.skip(b);break;case 4:b==o.Type.BOOL?this.insert_=l.readBool():l.skip(b);break;case 5:b==o.Type.BOOL?this.update_=l.readBool():l.skip(b);break;case 6:b==o.Type.BOOL?this.delete_=l.readBool():l.skip(b);break;case 7:b==o.Type.BOOL?this.truncate_=l.readBool():l.skip(b);break;case 8:b==o.Type.BOOL?this.alter_=l.readBool():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TTablePermissions"),this.create_!==null&&this.create_!==void 0&&(l.writeFieldBegin("create_",o.Type.BOOL,1),l.writeBool(this.create_),l.writeFieldEnd()),this.drop_!==null&&this.drop_!==void 0&&(l.writeFieldBegin("drop_",o.Type.BOOL,2),l.writeBool(this.drop_),l.writeFieldEnd()),this.select_!==null&&this.select_!==void 0&&(l.writeFieldBegin("select_",o.Type.BOOL,3),l.writeBool(this.select_),l.writeFieldEnd()),this.insert_!==null&&this.insert_!==void 0&&(l.writeFieldBegin("insert_",o.Type.BOOL,4),l.writeBool(this.insert_),l.writeFieldEnd()),this.update_!==null&&this.update_!==void 0&&(l.writeFieldBegin("update_",o.Type.BOOL,5),l.writeBool(this.update_),l.writeFieldEnd()),this.delete_!==null&&this.delete_!==void 0&&(l.writeFieldBegin("delete_",o.Type.BOOL,6),l.writeBool(this.delete_),l.writeFieldEnd()),this.truncate_!==null&&this.truncate_!==void 0&&(l.writeFieldBegin("truncate_",o.Type.BOOL,7),l.writeBool(this.truncate_),l.writeFieldEnd()),this.alter_!==null&&this.alter_!==void 0&&(l.writeFieldBegin("alter_",o.Type.BOOL,8),l.writeBool(this.alter_),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDashboardPermissions=class{constructor(l){this.create_=null,this.delete_=null,this.view_=null,this.edit_=null,l&&(l.create_!==void 0&&l.create_!==null&&(this.create_=l.create_),l.delete_!==void 0&&l.delete_!==null&&(this.delete_=l.delete_),l.view_!==void 0&&l.view_!==null&&(this.view_=l.view_),l.edit_!==void 0&&l.edit_!==null&&(this.edit_=l.edit_))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.BOOL?this.create_=l.readBool():l.skip(b);break;case 2:b==o.Type.BOOL?this.delete_=l.readBool():l.skip(b);break;case 3:b==o.Type.BOOL?this.view_=l.readBool():l.skip(b);break;case 4:b==o.Type.BOOL?this.edit_=l.readBool():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TDashboardPermissions"),this.create_!==null&&this.create_!==void 0&&(l.writeFieldBegin("create_",o.Type.BOOL,1),l.writeBool(this.create_),l.writeFieldEnd()),this.delete_!==null&&this.delete_!==void 0&&(l.writeFieldBegin("delete_",o.Type.BOOL,2),l.writeBool(this.delete_),l.writeFieldEnd()),this.view_!==null&&this.view_!==void 0&&(l.writeFieldBegin("view_",o.Type.BOOL,3),l.writeBool(this.view_),l.writeFieldEnd()),this.edit_!==null&&this.edit_!==void 0&&(l.writeFieldBegin("edit_",o.Type.BOOL,4),l.writeBool(this.edit_),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TViewPermissions=class{constructor(l){this.create_=null,this.drop_=null,this.select_=null,this.insert_=null,this.update_=null,this.delete_=null,l&&(l.create_!==void 0&&l.create_!==null&&(this.create_=l.create_),l.drop_!==void 0&&l.drop_!==null&&(this.drop_=l.drop_),l.select_!==void 0&&l.select_!==null&&(this.select_=l.select_),l.insert_!==void 0&&l.insert_!==null&&(this.insert_=l.insert_),l.update_!==void 0&&l.update_!==null&&(this.update_=l.update_),l.delete_!==void 0&&l.delete_!==null&&(this.delete_=l.delete_))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.BOOL?this.create_=l.readBool():l.skip(b);break;case 2:b==o.Type.BOOL?this.drop_=l.readBool():l.skip(b);break;case 3:b==o.Type.BOOL?this.select_=l.readBool():l.skip(b);break;case 4:b==o.Type.BOOL?this.insert_=l.readBool():l.skip(b);break;case 5:b==o.Type.BOOL?this.update_=l.readBool():l.skip(b);break;case 6:b==o.Type.BOOL?this.delete_=l.readBool():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TViewPermissions"),this.create_!==null&&this.create_!==void 0&&(l.writeFieldBegin("create_",o.Type.BOOL,1),l.writeBool(this.create_),l.writeFieldEnd()),this.drop_!==null&&this.drop_!==void 0&&(l.writeFieldBegin("drop_",o.Type.BOOL,2),l.writeBool(this.drop_),l.writeFieldEnd()),this.select_!==null&&this.select_!==void 0&&(l.writeFieldBegin("select_",o.Type.BOOL,3),l.writeBool(this.select_),l.writeFieldEnd()),this.insert_!==null&&this.insert_!==void 0&&(l.writeFieldBegin("insert_",o.Type.BOOL,4),l.writeBool(this.insert_),l.writeFieldEnd()),this.update_!==null&&this.update_!==void 0&&(l.writeFieldBegin("update_",o.Type.BOOL,5),l.writeBool(this.update_),l.writeFieldEnd()),this.delete_!==null&&this.delete_!==void 0&&(l.writeFieldBegin("delete_",o.Type.BOOL,6),l.writeBool(this.delete_),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TServerPermissions=class{constructor(l){this.create_=null,this.drop_=null,this.alter_=null,this.usage_=null,l&&(l.create_!==void 0&&l.create_!==null&&(this.create_=l.create_),l.drop_!==void 0&&l.drop_!==null&&(this.drop_=l.drop_),l.alter_!==void 0&&l.alter_!==null&&(this.alter_=l.alter_),l.usage_!==void 0&&l.usage_!==null&&(this.usage_=l.usage_))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.BOOL?this.create_=l.readBool():l.skip(b);break;case 2:b==o.Type.BOOL?this.drop_=l.readBool():l.skip(b);break;case 3:b==o.Type.BOOL?this.alter_=l.readBool():l.skip(b);break;case 4:b==o.Type.BOOL?this.usage_=l.readBool():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TServerPermissions"),this.create_!==null&&this.create_!==void 0&&(l.writeFieldBegin("create_",o.Type.BOOL,1),l.writeBool(this.create_),l.writeFieldEnd()),this.drop_!==null&&this.drop_!==void 0&&(l.writeFieldBegin("drop_",o.Type.BOOL,2),l.writeBool(this.drop_),l.writeFieldEnd()),this.alter_!==null&&this.alter_!==void 0&&(l.writeFieldBegin("alter_",o.Type.BOOL,3),l.writeBool(this.alter_),l.writeFieldEnd()),this.usage_!==null&&this.usage_!==void 0&&(l.writeFieldBegin("usage_",o.Type.BOOL,4),l.writeBool(this.usage_),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDBObjectPermissions=class{constructor(l){this.database_permissions_=null,this.table_permissions_=null,this.dashboard_permissions_=null,this.view_permissions_=null,this.server_permissions_=null,l&&(l.database_permissions_!==void 0&&l.database_permissions_!==null&&(this.database_permissions_=new m.TDatabasePermissions(l.database_permissions_)),l.table_permissions_!==void 0&&l.table_permissions_!==null&&(this.table_permissions_=new m.TTablePermissions(l.table_permissions_)),l.dashboard_permissions_!==void 0&&l.dashboard_permissions_!==null&&(this.dashboard_permissions_=new m.TDashboardPermissions(l.dashboard_permissions_)),l.view_permissions_!==void 0&&l.view_permissions_!==null&&(this.view_permissions_=new m.TViewPermissions(l.view_permissions_)),l.server_permissions_!==void 0&&l.server_permissions_!==null&&(this.server_permissions_=new m.TServerPermissions(l.server_permissions_)))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.STRUCT?(this.database_permissions_=new m.TDatabasePermissions,this.database_permissions_.read(l)):l.skip(b);break;case 2:b==o.Type.STRUCT?(this.table_permissions_=new m.TTablePermissions,this.table_permissions_.read(l)):l.skip(b);break;case 3:b==o.Type.STRUCT?(this.dashboard_permissions_=new m.TDashboardPermissions,this.dashboard_permissions_.read(l)):l.skip(b);break;case 4:b==o.Type.STRUCT?(this.view_permissions_=new m.TViewPermissions,this.view_permissions_.read(l)):l.skip(b);break;case 5:b==o.Type.STRUCT?(this.server_permissions_=new m.TServerPermissions,this.server_permissions_.read(l)):l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TDBObjectPermissions"),this.database_permissions_!==null&&this.database_permissions_!==void 0&&(l.writeFieldBegin("database_permissions_",o.Type.STRUCT,1),this.database_permissions_.write(l),l.writeFieldEnd()),this.table_permissions_!==null&&this.table_permissions_!==void 0&&(l.writeFieldBegin("table_permissions_",o.Type.STRUCT,2),this.table_permissions_.write(l),l.writeFieldEnd()),this.dashboard_permissions_!==null&&this.dashboard_permissions_!==void 0&&(l.writeFieldBegin("dashboard_permissions_",o.Type.STRUCT,3),this.dashboard_permissions_.write(l),l.writeFieldEnd()),this.view_permissions_!==null&&this.view_permissions_!==void 0&&(l.writeFieldBegin("view_permissions_",o.Type.STRUCT,4),this.view_permissions_.write(l),l.writeFieldEnd()),this.server_permissions_!==null&&this.server_permissions_!==void 0&&(l.writeFieldBegin("server_permissions_",o.Type.STRUCT,5),this.server_permissions_.write(l),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDBObject=class{constructor(l){this.objectName=null,this.objectType=null,this.privs=null,this.grantee=null,this.privilegeObjectType=null,this.objectId=null,l&&(l.objectName!==void 0&&l.objectName!==null&&(this.objectName=l.objectName),l.objectType!==void 0&&l.objectType!==null&&(this.objectType=l.objectType),l.privs!==void 0&&l.privs!==null&&(this.privs=o.copyList(l.privs,[null])),l.grantee!==void 0&&l.grantee!==null&&(this.grantee=l.grantee),l.privilegeObjectType!==void 0&&l.privilegeObjectType!==null&&(this.privilegeObjectType=l.privilegeObjectType),l.objectId!==void 0&&l.objectId!==null&&(this.objectId=l.objectId))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.STRING?this.objectName=l.readString():l.skip(b);break;case 2:b==o.Type.I32?this.objectType=l.readI32():l.skip(b);break;case 3:if(b==o.Type.LIST){this.privs=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let I=null;I=l.readBool(),this.privs.push(I)}l.readListEnd()}else l.skip(b);break;case 4:b==o.Type.STRING?this.grantee=l.readString():l.skip(b);break;case 5:b==o.Type.I32?this.privilegeObjectType=l.readI32():l.skip(b);break;case 6:b==o.Type.I32?this.objectId=l.readI32():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TDBObject"),this.objectName!==null&&this.objectName!==void 0&&(l.writeFieldBegin("objectName",o.Type.STRING,1),l.writeString(this.objectName),l.writeFieldEnd()),this.objectType!==null&&this.objectType!==void 0&&(l.writeFieldBegin("objectType",o.Type.I32,2),l.writeI32(this.objectType),l.writeFieldEnd()),this.privs!==null&&this.privs!==void 0){l.writeFieldBegin("privs",o.Type.LIST,3),l.writeListBegin(o.Type.BOOL,this.privs.length);for(let T in this.privs)this.privs.hasOwnProperty(T)&&(T=this.privs[T],l.writeBool(T));l.writeListEnd(),l.writeFieldEnd()}this.grantee!==null&&this.grantee!==void 0&&(l.writeFieldBegin("grantee",o.Type.STRING,4),l.writeString(this.grantee),l.writeFieldEnd()),this.privilegeObjectType!==null&&this.privilegeObjectType!==void 0&&(l.writeFieldBegin("privilegeObjectType",o.Type.I32,5),l.writeI32(this.privilegeObjectType),l.writeFieldEnd()),this.objectId!==null&&this.objectId!==void 0&&(l.writeFieldBegin("objectId",o.Type.I32,6),l.writeI32(this.objectId),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDashboardGrantees=class{constructor(l){this.name=null,this.is_user=null,this.permissions=null,l&&(l.name!==void 0&&l.name!==null&&(this.name=l.name),l.is_user!==void 0&&l.is_user!==null&&(this.is_user=l.is_user),l.permissions!==void 0&&l.permissions!==null&&(this.permissions=new m.TDashboardPermissions(l.permissions)))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.STRING?this.name=l.readString():l.skip(b);break;case 2:b==o.Type.BOOL?this.is_user=l.readBool():l.skip(b);break;case 3:b==o.Type.STRUCT?(this.permissions=new m.TDashboardPermissions,this.permissions.read(l)):l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TDashboardGrantees"),this.name!==null&&this.name!==void 0&&(l.writeFieldBegin("name",o.Type.STRING,1),l.writeString(this.name),l.writeFieldEnd()),this.is_user!==null&&this.is_user!==void 0&&(l.writeFieldBegin("is_user",o.Type.BOOL,2),l.writeBool(this.is_user),l.writeFieldEnd()),this.permissions!==null&&this.permissions!==void 0&&(l.writeFieldBegin("permissions",o.Type.STRUCT,3),this.permissions.write(l),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDashboard=class{constructor(l){this.dashboard_name=null,this.dashboard_state=null,this.image_hash=null,this.update_time=null,this.dashboard_metadata=null,this.dashboard_id=null,this.dashboard_owner=null,this.is_dash_shared=null,this.dashboard_permissions=null,l&&(l.dashboard_name!==void 0&&l.dashboard_name!==null&&(this.dashboard_name=l.dashboard_name),l.dashboard_state!==void 0&&l.dashboard_state!==null&&(this.dashboard_state=l.dashboard_state),l.image_hash!==void 0&&l.image_hash!==null&&(this.image_hash=l.image_hash),l.update_time!==void 0&&l.update_time!==null&&(this.update_time=l.update_time),l.dashboard_metadata!==void 0&&l.dashboard_metadata!==null&&(this.dashboard_metadata=l.dashboard_metadata),l.dashboard_id!==void 0&&l.dashboard_id!==null&&(this.dashboard_id=l.dashboard_id),l.dashboard_owner!==void 0&&l.dashboard_owner!==null&&(this.dashboard_owner=l.dashboard_owner),l.is_dash_shared!==void 0&&l.is_dash_shared!==null&&(this.is_dash_shared=l.is_dash_shared),l.dashboard_permissions!==void 0&&l.dashboard_permissions!==null&&(this.dashboard_permissions=new m.TDashboardPermissions(l.dashboard_permissions)))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.STRING?this.dashboard_name=l.readString():l.skip(b);break;case 2:b==o.Type.STRING?this.dashboard_state=l.readString():l.skip(b);break;case 3:b==o.Type.STRING?this.image_hash=l.readString():l.skip(b);break;case 4:b==o.Type.STRING?this.update_time=l.readString():l.skip(b);break;case 5:b==o.Type.STRING?this.dashboard_metadata=l.readString():l.skip(b);break;case 6:b==o.Type.I32?this.dashboard_id=l.readI32():l.skip(b);break;case 7:b==o.Type.STRING?this.dashboard_owner=l.readString():l.skip(b);break;case 8:b==o.Type.BOOL?this.is_dash_shared=l.readBool():l.skip(b);break;case 9:b==o.Type.STRUCT?(this.dashboard_permissions=new m.TDashboardPermissions,this.dashboard_permissions.read(l)):l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TDashboard"),this.dashboard_name!==null&&this.dashboard_name!==void 0&&(l.writeFieldBegin("dashboard_name",o.Type.STRING,1),l.writeString(this.dashboard_name),l.writeFieldEnd()),this.dashboard_state!==null&&this.dashboard_state!==void 0&&(l.writeFieldBegin("dashboard_state",o.Type.STRING,2),l.writeString(this.dashboard_state),l.writeFieldEnd()),this.image_hash!==null&&this.image_hash!==void 0&&(l.writeFieldBegin("image_hash",o.Type.STRING,3),l.writeString(this.image_hash),l.writeFieldEnd()),this.update_time!==null&&this.update_time!==void 0&&(l.writeFieldBegin("update_time",o.Type.STRING,4),l.writeString(this.update_time),l.writeFieldEnd()),this.dashboard_metadata!==null&&this.dashboard_metadata!==void 0&&(l.writeFieldBegin("dashboard_metadata",o.Type.STRING,5),l.writeString(this.dashboard_metadata),l.writeFieldEnd()),this.dashboard_id!==null&&this.dashboard_id!==void 0&&(l.writeFieldBegin("dashboard_id",o.Type.I32,6),l.writeI32(this.dashboard_id),l.writeFieldEnd()),this.dashboard_owner!==null&&this.dashboard_owner!==void 0&&(l.writeFieldBegin("dashboard_owner",o.Type.STRING,7),l.writeString(this.dashboard_owner),l.writeFieldEnd()),this.is_dash_shared!==null&&this.is_dash_shared!==void 0&&(l.writeFieldBegin("is_dash_shared",o.Type.BOOL,8),l.writeBool(this.is_dash_shared),l.writeFieldEnd()),this.dashboard_permissions!==null&&this.dashboard_permissions!==void 0&&(l.writeFieldBegin("dashboard_permissions",o.Type.STRUCT,9),this.dashboard_permissions.write(l),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TLicenseInfo=class{constructor(l){this.claims=null,l&&l.claims!==void 0&&l.claims!==null&&(this.claims=o.copyList(l.claims,[null]))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:if(b==o.Type.LIST){this.claims=[];const B=l.readListBegin().size||0;for(let F=0;F<B;++F){let I=null;I=l.readString(),this.claims.push(I)}l.readListEnd()}else l.skip(b);break;case 0:l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TLicenseInfo"),this.claims!==null&&this.claims!==void 0){l.writeFieldBegin("claims",o.Type.LIST,1),l.writeListBegin(o.Type.STRING,this.claims.length);for(let T in this.claims)this.claims.hasOwnProperty(T)&&(T=this.claims[T],l.writeString(T));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TSessionInfo=class{constructor(l){this.user=null,this.database=null,this.start_time=null,this.is_super=null,l&&(l.user!==void 0&&l.user!==null&&(this.user=l.user),l.database!==void 0&&l.database!==null&&(this.database=l.database),l.start_time!==void 0&&l.start_time!==null&&(this.start_time=l.start_time),l.is_super!==void 0&&l.is_super!==null&&(this.is_super=l.is_super))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.STRING?this.user=l.readString():l.skip(b);break;case 2:b==o.Type.STRING?this.database=l.readString():l.skip(b);break;case 3:b==o.Type.I64?this.start_time=l.readI64():l.skip(b);break;case 4:b==o.Type.BOOL?this.is_super=l.readBool():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TSessionInfo"),this.user!==null&&this.user!==void 0&&(l.writeFieldBegin("user",o.Type.STRING,1),l.writeString(this.user),l.writeFieldEnd()),this.database!==null&&this.database!==void 0&&(l.writeFieldBegin("database",o.Type.STRING,2),l.writeString(this.database),l.writeFieldEnd()),this.start_time!==null&&this.start_time!==void 0&&(l.writeFieldBegin("start_time",o.Type.I64,3),l.writeI64(this.start_time),l.writeFieldEnd()),this.is_super!==null&&this.is_super!==void 0&&(l.writeFieldBegin("is_super",o.Type.BOOL,4),l.writeBool(this.is_super),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TGeoFileLayerInfo=class{constructor(l){this.name=null,this.contents=null,l&&(l.name!==void 0&&l.name!==null&&(this.name=l.name),l.contents!==void 0&&l.contents!==null&&(this.contents=l.contents))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.STRING?this.name=l.readString():l.skip(b);break;case 2:b==o.Type.I32?this.contents=l.readI32():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TGeoFileLayerInfo"),this.name!==null&&this.name!==void 0&&(l.writeFieldBegin("name",o.Type.STRING,1),l.writeString(this.name),l.writeFieldEnd()),this.contents!==null&&this.contents!==void 0&&(l.writeFieldBegin("contents",o.Type.I32,2),l.writeI32(this.contents),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TTableEpochInfo=class{constructor(l){this.table_id=null,this.table_epoch=null,this.leaf_index=null,l&&(l.table_id!==void 0&&l.table_id!==null&&(this.table_id=l.table_id),l.table_epoch!==void 0&&l.table_epoch!==null&&(this.table_epoch=l.table_epoch),l.leaf_index!==void 0&&l.leaf_index!==null&&(this.leaf_index=l.leaf_index))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.I32?this.table_id=l.readI32():l.skip(b);break;case 2:b==o.Type.I32?this.table_epoch=l.readI32():l.skip(b);break;case 3:b==o.Type.I32?this.leaf_index=l.readI32():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TTableEpochInfo"),this.table_id!==null&&this.table_id!==void 0&&(l.writeFieldBegin("table_id",o.Type.I32,1),l.writeI32(this.table_id),l.writeFieldEnd()),this.table_epoch!==null&&this.table_epoch!==void 0&&(l.writeFieldBegin("table_epoch",o.Type.I32,2),l.writeI32(this.table_epoch),l.writeFieldEnd()),this.leaf_index!==null&&this.leaf_index!==void 0&&(l.writeFieldBegin("leaf_index",o.Type.I32,3),l.writeI32(this.leaf_index),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TCustomExpression=class{constructor(l){this.id=null,this.name=null,this.expression_json=null,this.data_source_type=null,this.data_source_id=null,this.is_deleted=null,this.data_source_name=null,l&&(l.id!==void 0&&l.id!==null&&(this.id=l.id),l.name!==void 0&&l.name!==null&&(this.name=l.name),l.expression_json!==void 0&&l.expression_json!==null&&(this.expression_json=l.expression_json),l.data_source_type!==void 0&&l.data_source_type!==null&&(this.data_source_type=l.data_source_type),l.data_source_id!==void 0&&l.data_source_id!==null&&(this.data_source_id=l.data_source_id),l.is_deleted!==void 0&&l.is_deleted!==null&&(this.is_deleted=l.is_deleted),l.data_source_name!==void 0&&l.data_source_name!==null&&(this.data_source_name=l.data_source_name))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.I32?this.id=l.readI32():l.skip(b);break;case 2:b==o.Type.STRING?this.name=l.readString():l.skip(b);break;case 4:b==o.Type.STRING?this.expression_json=l.readString():l.skip(b);break;case 5:b==o.Type.I32?this.data_source_type=l.readI32():l.skip(b);break;case 6:b==o.Type.I32?this.data_source_id=l.readI32():l.skip(b);break;case 7:b==o.Type.BOOL?this.is_deleted=l.readBool():l.skip(b);break;case 8:b==o.Type.STRING?this.data_source_name=l.readString():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TCustomExpression"),this.id!==null&&this.id!==void 0&&(l.writeFieldBegin("id",o.Type.I32,1),l.writeI32(this.id),l.writeFieldEnd()),this.name!==null&&this.name!==void 0&&(l.writeFieldBegin("name",o.Type.STRING,2),l.writeString(this.name),l.writeFieldEnd()),this.expression_json!==null&&this.expression_json!==void 0&&(l.writeFieldBegin("expression_json",o.Type.STRING,4),l.writeString(this.expression_json),l.writeFieldEnd()),this.data_source_type!==null&&this.data_source_type!==void 0&&(l.writeFieldBegin("data_source_type",o.Type.I32,5),l.writeI32(this.data_source_type),l.writeFieldEnd()),this.data_source_id!==null&&this.data_source_id!==void 0&&(l.writeFieldBegin("data_source_id",o.Type.I32,6),l.writeI32(this.data_source_id),l.writeFieldEnd()),this.is_deleted!==null&&this.is_deleted!==void 0&&(l.writeFieldBegin("is_deleted",o.Type.BOOL,7),l.writeBool(this.is_deleted),l.writeFieldEnd()),this.data_source_name!==null&&this.data_source_name!==void 0&&(l.writeFieldBegin("data_source_name",o.Type.STRING,8),l.writeString(this.data_source_name),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TQueryInfo=class{constructor(l){this.query_session_id=null,this.query_public_session_id=null,this.current_status=null,this.executor_id=null,this.submitted=null,this.query_str=null,this.login_name=null,this.client_address=null,this.db_name=null,this.exec_device_type=null,l&&(l.query_session_id!==void 0&&l.query_session_id!==null&&(this.query_session_id=l.query_session_id),l.query_public_session_id!==void 0&&l.query_public_session_id!==null&&(this.query_public_session_id=l.query_public_session_id),l.current_status!==void 0&&l.current_status!==null&&(this.current_status=l.current_status),l.executor_id!==void 0&&l.executor_id!==null&&(this.executor_id=l.executor_id),l.submitted!==void 0&&l.submitted!==null&&(this.submitted=l.submitted),l.query_str!==void 0&&l.query_str!==null&&(this.query_str=l.query_str),l.login_name!==void 0&&l.login_name!==null&&(this.login_name=l.login_name),l.client_address!==void 0&&l.client_address!==null&&(this.client_address=l.client_address),l.db_name!==void 0&&l.db_name!==null&&(this.db_name=l.db_name),l.exec_device_type!==void 0&&l.exec_device_type!==null&&(this.exec_device_type=l.exec_device_type))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.STRING?this.query_session_id=l.readString():l.skip(b);break;case 2:b==o.Type.STRING?this.query_public_session_id=l.readString():l.skip(b);break;case 3:b==o.Type.STRING?this.current_status=l.readString():l.skip(b);break;case 4:b==o.Type.I32?this.executor_id=l.readI32():l.skip(b);break;case 5:b==o.Type.STRING?this.submitted=l.readString():l.skip(b);break;case 6:b==o.Type.STRING?this.query_str=l.readString():l.skip(b);break;case 7:b==o.Type.STRING?this.login_name=l.readString():l.skip(b);break;case 8:b==o.Type.STRING?this.client_address=l.readString():l.skip(b);break;case 9:b==o.Type.STRING?this.db_name=l.readString():l.skip(b);break;case 10:b==o.Type.STRING?this.exec_device_type=l.readString():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TQueryInfo"),this.query_session_id!==null&&this.query_session_id!==void 0&&(l.writeFieldBegin("query_session_id",o.Type.STRING,1),l.writeString(this.query_session_id),l.writeFieldEnd()),this.query_public_session_id!==null&&this.query_public_session_id!==void 0&&(l.writeFieldBegin("query_public_session_id",o.Type.STRING,2),l.writeString(this.query_public_session_id),l.writeFieldEnd()),this.current_status!==null&&this.current_status!==void 0&&(l.writeFieldBegin("current_status",o.Type.STRING,3),l.writeString(this.current_status),l.writeFieldEnd()),this.executor_id!==null&&this.executor_id!==void 0&&(l.writeFieldBegin("executor_id",o.Type.I32,4),l.writeI32(this.executor_id),l.writeFieldEnd()),this.submitted!==null&&this.submitted!==void 0&&(l.writeFieldBegin("submitted",o.Type.STRING,5),l.writeString(this.submitted),l.writeFieldEnd()),this.query_str!==null&&this.query_str!==void 0&&(l.writeFieldBegin("query_str",o.Type.STRING,6),l.writeString(this.query_str),l.writeFieldEnd()),this.login_name!==null&&this.login_name!==void 0&&(l.writeFieldBegin("login_name",o.Type.STRING,7),l.writeString(this.login_name),l.writeFieldEnd()),this.client_address!==null&&this.client_address!==void 0&&(l.writeFieldBegin("client_address",o.Type.STRING,8),l.writeString(this.client_address),l.writeFieldEnd()),this.db_name!==null&&this.db_name!==void 0&&(l.writeFieldBegin("db_name",o.Type.STRING,9),l.writeString(this.db_name),l.writeFieldEnd()),this.exec_device_type!==null&&this.exec_device_type!==void 0&&(l.writeFieldBegin("exec_device_type",o.Type.STRING,10),l.writeString(this.exec_device_type),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TLeafInfo=class{constructor(l){this.leaf_id=null,this.num_leaves=null,l&&(l.leaf_id!==void 0&&l.leaf_id!==null&&(this.leaf_id=l.leaf_id),l.num_leaves!==void 0&&l.num_leaves!==null&&(this.num_leaves=l.num_leaves))}read(l){for(l.readStructBegin();;){const T=l.readFieldBegin(),b=T.ftype,S=T.fid;if(b==o.Type.STOP)break;switch(S){case 1:b==o.Type.I32?this.leaf_id=l.readI32():l.skip(b);break;case 2:b==o.Type.I32?this.num_leaves=l.readI32():l.skip(b);break;default:l.skip(b)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TLeafInfo"),this.leaf_id!==null&&this.leaf_id!==void 0&&(l.writeFieldBegin("leaf_id",o.Type.I32,1),l.writeI32(this.leaf_id),l.writeFieldEnd()),this.num_leaves!==null&&this.num_leaves!==void 0&&(l.writeFieldBegin("num_leaves",o.Type.I32,2),l.writeI32(this.num_leaves),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}}},3962:(c,d,f)=>{const o=f(9262).Thrift;f(135);const g=f(2818),w=c.exports={};w.TResultSetLayout={GroupByPerfectHash:0,GroupByBaselineHash:1,Projection:2,NonGroupedAggregate:3},w.TCountDistinctImplType={Invalid:0,Bitmap:1,UnorderedSet:2},w.TAggKind={AVG:0,MIN:1,MAX:2,SUM:3,COUNT:4,APPROX_COUNT_DISTINCT:5,SAMPLE:6,SINGLE_VALUE:7},c.exports.TSlotSize=class{constructor(m){this.padded=null,this.logical=null,m&&(m.padded!==void 0&&m.padded!==null&&(this.padded=m.padded),m.logical!==void 0&&m.logical!==null&&(this.logical=m.logical))}read(m){for(m.readStructBegin();;){const l=m.readFieldBegin(),T=l.ftype,b=l.fid;if(T==o.Type.STOP)break;switch(b){case 1:T==o.Type.I16?this.padded=m.readI16():m.skip(T);break;case 2:T==o.Type.I16?this.logical=m.readI16():m.skip(T);break;default:m.skip(T)}m.readFieldEnd()}m.readStructEnd()}write(m){m.writeStructBegin("TSlotSize"),this.padded!==null&&this.padded!==void 0&&(m.writeFieldBegin("padded",o.Type.I16,1),m.writeI16(this.padded),m.writeFieldEnd()),this.logical!==null&&this.logical!==void 0&&(m.writeFieldBegin("logical",o.Type.I16,2),m.writeI16(this.logical),m.writeFieldEnd()),m.writeFieldStop(),m.writeStructEnd()}},c.exports.TColSlotContext=class{constructor(m){this.slot_sizes=null,this.col_to_slot_map=null,m&&(m.slot_sizes!==void 0&&m.slot_sizes!==null&&(this.slot_sizes=o.copyList(m.slot_sizes,[w.TSlotSize])),m.col_to_slot_map!==void 0&&m.col_to_slot_map!==null&&(this.col_to_slot_map=o.copyList(m.col_to_slot_map,[o.copyList,null])))}read(m){for(m.readStructBegin();;){const l=m.readFieldBegin(),T=l.ftype,b=l.fid;if(T==o.Type.STOP)break;switch(b){case 1:if(T==o.Type.LIST){this.slot_sizes=[];const x=m.readListBegin().size||0;for(let B=0;B<x;++B){let F=null;F=new w.TSlotSize,F.read(m),this.slot_sizes.push(F)}m.readListEnd()}else m.skip(T);break;case 2:if(T==o.Type.LIST){this.col_to_slot_map=[];const x=m.readListBegin().size||0;for(let B=0;B<x;++B){let F=null;F=[];const A=m.readListBegin().size||0;for(let O=0;O<A;++O){let R=null;R=m.readI32(),F.push(R)}m.readListEnd(),this.col_to_slot_map.push(F)}m.readListEnd()}else m.skip(T);break;default:m.skip(T)}m.readFieldEnd()}m.readStructEnd()}write(m){if(m.writeStructBegin("TColSlotContext"),this.slot_sizes!==null&&this.slot_sizes!==void 0){m.writeFieldBegin("slot_sizes",o.Type.LIST,1),m.writeListBegin(o.Type.STRUCT,this.slot_sizes.length);for(let l in this.slot_sizes)this.slot_sizes.hasOwnProperty(l)&&(l=this.slot_sizes[l],l.write(m));m.writeListEnd(),m.writeFieldEnd()}if(this.col_to_slot_map!==null&&this.col_to_slot_map!==void 0){m.writeFieldBegin("col_to_slot_map",o.Type.LIST,2),m.writeListBegin(o.Type.LIST,this.col_to_slot_map.length);for(let l in this.col_to_slot_map)if(this.col_to_slot_map.hasOwnProperty(l)){l=this.col_to_slot_map[l],m.writeListBegin(o.Type.I32,l.length);for(let T in l)l.hasOwnProperty(T)&&(T=l[T],m.writeI32(T));m.writeListEnd()}m.writeListEnd(),m.writeFieldEnd()}m.writeFieldStop(),m.writeStructEnd()}},c.exports.TCountDistinctDescriptor=class{constructor(m){this.impl_type=null,this.min_val=null,this.bitmap_sz_bits=null,this.approximate=null,this.device_type=null,this.sub_bitmap_count=null,m&&(m.impl_type!==void 0&&m.impl_type!==null&&(this.impl_type=m.impl_type),m.min_val!==void 0&&m.min_val!==null&&(this.min_val=m.min_val),m.bitmap_sz_bits!==void 0&&m.bitmap_sz_bits!==null&&(this.bitmap_sz_bits=m.bitmap_sz_bits),m.approximate!==void 0&&m.approximate!==null&&(this.approximate=m.approximate),m.device_type!==void 0&&m.device_type!==null&&(this.device_type=m.device_type),m.sub_bitmap_count!==void 0&&m.sub_bitmap_count!==null&&(this.sub_bitmap_count=m.sub_bitmap_count))}read(m){for(m.readStructBegin();;){const l=m.readFieldBegin(),T=l.ftype,b=l.fid;if(T==o.Type.STOP)break;switch(b){case 1:T==o.Type.I32?this.impl_type=m.readI32():m.skip(T);break;case 2:T==o.Type.I64?this.min_val=m.readI64():m.skip(T);break;case 3:T==o.Type.I64?this.bitmap_sz_bits=m.readI64():m.skip(T);break;case 4:T==o.Type.BOOL?this.approximate=m.readBool():m.skip(T);break;case 5:T==o.Type.I32?this.device_type=m.readI32():m.skip(T);break;case 6:T==o.Type.I64?this.sub_bitmap_count=m.readI64():m.skip(T);break;default:m.skip(T)}m.readFieldEnd()}m.readStructEnd()}write(m){m.writeStructBegin("TCountDistinctDescriptor"),this.impl_type!==null&&this.impl_type!==void 0&&(m.writeFieldBegin("impl_type",o.Type.I32,1),m.writeI32(this.impl_type),m.writeFieldEnd()),this.min_val!==null&&this.min_val!==void 0&&(m.writeFieldBegin("min_val",o.Type.I64,2),m.writeI64(this.min_val),m.writeFieldEnd()),this.bitmap_sz_bits!==null&&this.bitmap_sz_bits!==void 0&&(m.writeFieldBegin("bitmap_sz_bits",o.Type.I64,3),m.writeI64(this.bitmap_sz_bits),m.writeFieldEnd()),this.approximate!==null&&this.approximate!==void 0&&(m.writeFieldBegin("approximate",o.Type.BOOL,4),m.writeBool(this.approximate),m.writeFieldEnd()),this.device_type!==null&&this.device_type!==void 0&&(m.writeFieldBegin("device_type",o.Type.I32,5),m.writeI32(this.device_type),m.writeFieldEnd()),this.sub_bitmap_count!==null&&this.sub_bitmap_count!==void 0&&(m.writeFieldBegin("sub_bitmap_count",o.Type.I64,6),m.writeI64(this.sub_bitmap_count),m.writeFieldEnd()),m.writeFieldStop(),m.writeStructEnd()}},c.exports.TResultSetBufferDescriptor=class{constructor(m){this.layout=null,this.keyless=null,this.entry_count=null,this.idx_target_as_key=null,this.min_val=null,this.max_val=null,this.bucket=null,this.group_col_widths=null,this.key_bytewidth=null,this.col_slot_context=null,this.target_groupby_indices=null,this.count_distinct_descriptors=null,this.force_4byte_float=null,m&&(m.layout!==void 0&&m.layout!==null&&(this.layout=m.layout),m.keyless!==void 0&&m.keyless!==null&&(this.keyless=m.keyless),m.entry_count!==void 0&&m.entry_count!==null&&(this.entry_count=m.entry_count),m.idx_target_as_key!==void 0&&m.idx_target_as_key!==null&&(this.idx_target_as_key=m.idx_target_as_key),m.min_val!==void 0&&m.min_val!==null&&(this.min_val=m.min_val),m.max_val!==void 0&&m.max_val!==null&&(this.max_val=m.max_val),m.bucket!==void 0&&m.bucket!==null&&(this.bucket=m.bucket),m.group_col_widths!==void 0&&m.group_col_widths!==null&&(this.group_col_widths=o.copyList(m.group_col_widths,[null])),m.key_bytewidth!==void 0&&m.key_bytewidth!==null&&(this.key_bytewidth=m.key_bytewidth),m.col_slot_context!==void 0&&m.col_slot_context!==null&&(this.col_slot_context=new w.TColSlotContext(m.col_slot_context)),m.target_groupby_indices!==void 0&&m.target_groupby_indices!==null&&(this.target_groupby_indices=o.copyList(m.target_groupby_indices,[null])),m.count_distinct_descriptors!==void 0&&m.count_distinct_descriptors!==null&&(this.count_distinct_descriptors=o.copyList(m.count_distinct_descriptors,[w.TCountDistinctDescriptor])),m.force_4byte_float!==void 0&&m.force_4byte_float!==null&&(this.force_4byte_float=m.force_4byte_float))}read(m){for(m.readStructBegin();;){const l=m.readFieldBegin(),T=l.ftype,b=l.fid;if(T==o.Type.STOP)break;switch(b){case 1:T==o.Type.I32?this.layout=m.readI32():m.skip(T);break;case 2:T==o.Type.BOOL?this.keyless=m.readBool():m.skip(T);break;case 3:T==o.Type.I32?this.entry_count=m.readI32():m.skip(T);break;case 4:T==o.Type.I32?this.idx_target_as_key=m.readI32():m.skip(T);break;case 5:T==o.Type.I64?this.min_val=m.readI64():m.skip(T);break;case 6:T==o.Type.I64?this.max_val=m.readI64():m.skip(T);break;case 7:T==o.Type.I64?this.bucket=m.readI64():m.skip(T);break;case 8:if(T==o.Type.LIST){this.group_col_widths=[];const x=m.readListBegin().size||0;for(let B=0;B<x;++B){let F=null;F=m.readI16(),this.group_col_widths.push(F)}m.readListEnd()}else m.skip(T);break;case 9:T==o.Type.I16?this.key_bytewidth=m.readI16():m.skip(T);break;case 10:T==o.Type.STRUCT?(this.col_slot_context=new w.TColSlotContext,this.col_slot_context.read(m)):m.skip(T);break;case 11:if(T==o.Type.LIST){this.target_groupby_indices=[];const x=m.readListBegin().size||0;for(let B=0;B<x;++B){let F=null;F=m.readI32(),this.target_groupby_indices.push(F)}m.readListEnd()}else m.skip(T);break;case 12:if(T==o.Type.LIST){this.count_distinct_descriptors=[];const x=m.readListBegin().size||0;for(let B=0;B<x;++B){let F=null;F=new w.TCountDistinctDescriptor,F.read(m),this.count_distinct_descriptors.push(F)}m.readListEnd()}else m.skip(T);break;case 13:T==o.Type.BOOL?this.force_4byte_float=m.readBool():m.skip(T);break;default:m.skip(T)}m.readFieldEnd()}m.readStructEnd()}write(m){if(m.writeStructBegin("TResultSetBufferDescriptor"),this.layout!==null&&this.layout!==void 0&&(m.writeFieldBegin("layout",o.Type.I32,1),m.writeI32(this.layout),m.writeFieldEnd()),this.keyless!==null&&this.keyless!==void 0&&(m.writeFieldBegin("keyless",o.Type.BOOL,2),m.writeBool(this.keyless),m.writeFieldEnd()),this.entry_count!==null&&this.entry_count!==void 0&&(m.writeFieldBegin("entry_count",o.Type.I32,3),m.writeI32(this.entry_count),m.writeFieldEnd()),this.idx_target_as_key!==null&&this.idx_target_as_key!==void 0&&(m.writeFieldBegin("idx_target_as_key",o.Type.I32,4),m.writeI32(this.idx_target_as_key),m.writeFieldEnd()),this.min_val!==null&&this.min_val!==void 0&&(m.writeFieldBegin("min_val",o.Type.I64,5),m.writeI64(this.min_val),m.writeFieldEnd()),this.max_val!==null&&this.max_val!==void 0&&(m.writeFieldBegin("max_val",o.Type.I64,6),m.writeI64(this.max_val),m.writeFieldEnd()),this.bucket!==null&&this.bucket!==void 0&&(m.writeFieldBegin("bucket",o.Type.I64,7),m.writeI64(this.bucket),m.writeFieldEnd()),this.group_col_widths!==null&&this.group_col_widths!==void 0){m.writeFieldBegin("group_col_widths",o.Type.LIST,8),m.writeListBegin(o.Type.I16,this.group_col_widths.length);for(let l in this.group_col_widths)this.group_col_widths.hasOwnProperty(l)&&(l=this.group_col_widths[l],m.writeI16(l));m.writeListEnd(),m.writeFieldEnd()}if(this.key_bytewidth!==null&&this.key_bytewidth!==void 0&&(m.writeFieldBegin("key_bytewidth",o.Type.I16,9),m.writeI16(this.key_bytewidth),m.writeFieldEnd()),this.col_slot_context!==null&&this.col_slot_context!==void 0&&(m.writeFieldBegin("col_slot_context",o.Type.STRUCT,10),this.col_slot_context.write(m),m.writeFieldEnd()),this.target_groupby_indices!==null&&this.target_groupby_indices!==void 0){m.writeFieldBegin("target_groupby_indices",o.Type.LIST,11),m.writeListBegin(o.Type.I32,this.target_groupby_indices.length);for(let l in this.target_groupby_indices)this.target_groupby_indices.hasOwnProperty(l)&&(l=this.target_groupby_indices[l],m.writeI32(l));m.writeListEnd(),m.writeFieldEnd()}if(this.count_distinct_descriptors!==null&&this.count_distinct_descriptors!==void 0){m.writeFieldBegin("count_distinct_descriptors",o.Type.LIST,12),m.writeListBegin(o.Type.STRUCT,this.count_distinct_descriptors.length);for(let l in this.count_distinct_descriptors)this.count_distinct_descriptors.hasOwnProperty(l)&&(l=this.count_distinct_descriptors[l],l.write(m));m.writeListEnd(),m.writeFieldEnd()}this.force_4byte_float!==null&&this.force_4byte_float!==void 0&&(m.writeFieldBegin("force_4byte_float",o.Type.BOOL,13),m.writeBool(this.force_4byte_float),m.writeFieldEnd()),m.writeFieldStop(),m.writeStructEnd()}},c.exports.TTargetInfo=class{constructor(m){this.is_agg=null,this.kind=null,this.type=null,this.arg_type=null,this.skip_nulls=null,this.is_distinct=null,m&&(m.is_agg!==void 0&&m.is_agg!==null&&(this.is_agg=m.is_agg),m.kind!==void 0&&m.kind!==null&&(this.kind=m.kind),m.type!==void 0&&m.type!==null&&(this.type=new g.TTypeInfo(m.type)),m.arg_type!==void 0&&m.arg_type!==null&&(this.arg_type=new g.TTypeInfo(m.arg_type)),m.skip_nulls!==void 0&&m.skip_nulls!==null&&(this.skip_nulls=m.skip_nulls),m.is_distinct!==void 0&&m.is_distinct!==null&&(this.is_distinct=m.is_distinct))}read(m){for(m.readStructBegin();;){const l=m.readFieldBegin(),T=l.ftype,b=l.fid;if(T==o.Type.STOP)break;switch(b){case 1:T==o.Type.BOOL?this.is_agg=m.readBool():m.skip(T);break;case 2:T==o.Type.I32?this.kind=m.readI32():m.skip(T);break;case 3:T==o.Type.STRUCT?(this.type=new g.TTypeInfo,this.type.read(m)):m.skip(T);break;case 4:T==o.Type.STRUCT?(this.arg_type=new g.TTypeInfo,this.arg_type.read(m)):m.skip(T);break;case 5:T==o.Type.BOOL?this.skip_nulls=m.readBool():m.skip(T);break;case 6:T==o.Type.BOOL?this.is_distinct=m.readBool():m.skip(T);break;default:m.skip(T)}m.readFieldEnd()}m.readStructEnd()}write(m){m.writeStructBegin("TTargetInfo"),this.is_agg!==null&&this.is_agg!==void 0&&(m.writeFieldBegin("is_agg",o.Type.BOOL,1),m.writeBool(this.is_agg),m.writeFieldEnd()),this.kind!==null&&this.kind!==void 0&&(m.writeFieldBegin("kind",o.Type.I32,2),m.writeI32(this.kind),m.writeFieldEnd()),this.type!==null&&this.type!==void 0&&(m.writeFieldBegin("type",o.Type.STRUCT,3),this.type.write(m),m.writeFieldEnd()),this.arg_type!==null&&this.arg_type!==void 0&&(m.writeFieldBegin("arg_type",o.Type.STRUCT,4),this.arg_type.write(m),m.writeFieldEnd()),this.skip_nulls!==null&&this.skip_nulls!==void 0&&(m.writeFieldBegin("skip_nulls",o.Type.BOOL,5),m.writeBool(this.skip_nulls),m.writeFieldEnd()),this.is_distinct!==null&&this.is_distinct!==void 0&&(m.writeFieldBegin("is_distinct",o.Type.BOOL,6),m.writeBool(this.is_distinct),m.writeFieldEnd()),m.writeFieldStop(),m.writeStructEnd()}},c.exports.TCountDistinctSetStorage=class{constructor(m){this.bitmap=null,this.sparse_set=null,m&&(m.bitmap!==void 0&&m.bitmap!==null&&(this.bitmap=m.bitmap),m.sparse_set!==void 0&&m.sparse_set!==null&&(this.sparse_set=o.copyList(m.sparse_set,[null])))}read(m){for(m.readStructBegin();;){const l=m.readFieldBegin(),T=l.ftype,b=l.fid;if(T==o.Type.STOP)break;switch(b){case 1:T==o.Type.STRING?this.bitmap=m.readBinary():m.skip(T);break;case 2:if(T==o.Type.SET){this.sparse_set=[];const x=m.readSetBegin().size||0;for(let B=0;B<x;++B){let F=null;F=m.readI64(),this.sparse_set.push(F)}m.readSetEnd()}else m.skip(T);break;default:m.skip(T)}m.readFieldEnd()}m.readStructEnd()}write(m){if(m.writeStructBegin("TCountDistinctSetStorage"),this.bitmap!==null&&this.bitmap!==void 0&&(m.writeFieldBegin("bitmap",o.Type.STRING,1),m.writeBinary(this.bitmap),m.writeFieldEnd()),this.sparse_set!==null&&this.sparse_set!==void 0){m.writeFieldBegin("sparse_set",o.Type.SET,2),m.writeSetBegin(o.Type.I64,this.sparse_set.length);for(let l in this.sparse_set)this.sparse_set.hasOwnProperty(l)&&(l=this.sparse_set[l],m.writeI64(l));m.writeSetEnd(),m.writeFieldEnd()}m.writeFieldStop(),m.writeStructEnd()}},c.exports.TCountDistinctSet=class{constructor(m){this.type=null,this.storage=null,this.remote_ptr=null,m&&(m.type!==void 0&&m.type!==null&&(this.type=m.type),m.storage!==void 0&&m.storage!==null&&(this.storage=new w.TCountDistinctSetStorage(m.storage)),m.remote_ptr!==void 0&&m.remote_ptr!==null&&(this.remote_ptr=m.remote_ptr))}read(m){for(m.readStructBegin();;){const l=m.readFieldBegin(),T=l.ftype,b=l.fid;if(T==o.Type.STOP)break;switch(b){case 1:T==o.Type.I32?this.type=m.readI32():m.skip(T);break;case 2:T==o.Type.STRUCT?(this.storage=new w.TCountDistinctSetStorage,this.storage.read(m)):m.skip(T);break;case 3:T==o.Type.I64?this.remote_ptr=m.readI64():m.skip(T);break;default:m.skip(T)}m.readFieldEnd()}m.readStructEnd()}write(m){m.writeStructBegin("TCountDistinctSet"),this.type!==null&&this.type!==void 0&&(m.writeFieldBegin("type",o.Type.I32,1),m.writeI32(this.type),m.writeFieldEnd()),this.storage!==null&&this.storage!==void 0&&(m.writeFieldBegin("storage",o.Type.STRUCT,2),this.storage.write(m),m.writeFieldEnd()),this.remote_ptr!==null&&this.remote_ptr!==void 0&&(m.writeFieldBegin("remote_ptr",o.Type.I64,3),m.writeI64(this.remote_ptr),m.writeFieldEnd()),m.writeFieldStop(),m.writeStructEnd()}},c.exports.TSerializedRows=class{constructor(m){this.buffers=null,this.buffer_lengths=null,this.buffers_total_size=null,this.total_compression_time_ms=null,this.descriptor=null,this.targets=null,this.target_init_vals=null,this.varlen_buffer=null,this.count_distinct_sets=null,this.explanation=null,m&&(m.buffers!==void 0&&m.buffers!==null&&(this.buffers=o.copyList(m.buffers,[null])),m.buffer_lengths!==void 0&&m.buffer_lengths!==null&&(this.buffer_lengths=o.copyList(m.buffer_lengths,[null])),m.buffers_total_size!==void 0&&m.buffers_total_size!==null&&(this.buffers_total_size=m.buffers_total_size),m.total_compression_time_ms!==void 0&&m.total_compression_time_ms!==null&&(this.total_compression_time_ms=m.total_compression_time_ms),m.descriptor!==void 0&&m.descriptor!==null&&(this.descriptor=new w.TResultSetBufferDescriptor(m.descriptor)),m.targets!==void 0&&m.targets!==null&&(this.targets=o.copyList(m.targets,[w.TTargetInfo])),m.target_init_vals!==void 0&&m.target_init_vals!==null&&(this.target_init_vals=o.copyList(m.target_init_vals,[null])),m.varlen_buffer!==void 0&&m.varlen_buffer!==null&&(this.varlen_buffer=o.copyList(m.varlen_buffer,[null])),m.count_distinct_sets!==void 0&&m.count_distinct_sets!==null&&(this.count_distinct_sets=o.copyList(m.count_distinct_sets,[w.TCountDistinctSet])),m.explanation!==void 0&&m.explanation!==null&&(this.explanation=m.explanation))}read(m){for(m.readStructBegin();;){const l=m.readFieldBegin(),T=l.ftype,b=l.fid;if(T==o.Type.STOP)break;switch(b){case 1:if(T==o.Type.LIST){this.buffers=[];const x=m.readListBegin().size||0;for(let B=0;B<x;++B){let F=null;F=m.readBinary(),this.buffers.push(F)}m.readListEnd()}else m.skip(T);break;case 2:if(T==o.Type.LIST){this.buffer_lengths=[];const x=m.readListBegin().size||0;for(let B=0;B<x;++B){let F=null;F=m.readI64(),this.buffer_lengths.push(F)}m.readListEnd()}else m.skip(T);break;case 3:T==o.Type.I64?this.buffers_total_size=m.readI64():m.skip(T);break;case 4:T==o.Type.I32?this.total_compression_time_ms=m.readI32():m.skip(T);break;case 5:T==o.Type.STRUCT?(this.descriptor=new w.TResultSetBufferDescriptor,this.descriptor.read(m)):m.skip(T);break;case 6:if(T==o.Type.LIST){this.targets=[];const x=m.readListBegin().size||0;for(let B=0;B<x;++B){let F=null;F=new w.TTargetInfo,F.read(m),this.targets.push(F)}m.readListEnd()}else m.skip(T);break;case 7:if(T==o.Type.LIST){this.target_init_vals=[];const x=m.readListBegin().size||0;for(let B=0;B<x;++B){let F=null;F=m.readI64(),this.target_init_vals.push(F)}m.readListEnd()}else m.skip(T);break;case 8:if(T==o.Type.LIST){this.varlen_buffer=[];const x=m.readListBegin().size||0;for(let B=0;B<x;++B){let F=null;F=m.readBinary(),this.varlen_buffer.push(F)}m.readListEnd()}else m.skip(T);break;case 9:if(T==o.Type.LIST){this.count_distinct_sets=[];const x=m.readListBegin().size||0;for(let B=0;B<x;++B){let F=null;F=new w.TCountDistinctSet,F.read(m),this.count_distinct_sets.push(F)}m.readListEnd()}else m.skip(T);break;case 10:T==o.Type.STRING?this.explanation=m.readString():m.skip(T);break;default:m.skip(T)}m.readFieldEnd()}m.readStructEnd()}write(m){if(m.writeStructBegin("TSerializedRows"),this.buffers!==null&&this.buffers!==void 0){m.writeFieldBegin("buffers",o.Type.LIST,1),m.writeListBegin(o.Type.STRING,this.buffers.length);for(let l in this.buffers)this.buffers.hasOwnProperty(l)&&(l=this.buffers[l],m.writeBinary(l));m.writeListEnd(),m.writeFieldEnd()}if(this.buffer_lengths!==null&&this.buffer_lengths!==void 0){m.writeFieldBegin("buffer_lengths",o.Type.LIST,2),m.writeListBegin(o.Type.I64,this.buffer_lengths.length);for(let l in this.buffer_lengths)this.buffer_lengths.hasOwnProperty(l)&&(l=this.buffer_lengths[l],m.writeI64(l));m.writeListEnd(),m.writeFieldEnd()}if(this.buffers_total_size!==null&&this.buffers_total_size!==void 0&&(m.writeFieldBegin("buffers_total_size",o.Type.I64,3),m.writeI64(this.buffers_total_size),m.writeFieldEnd()),this.total_compression_time_ms!==null&&this.total_compression_time_ms!==void 0&&(m.writeFieldBegin("total_compression_time_ms",o.Type.I32,4),m.writeI32(this.total_compression_time_ms),m.writeFieldEnd()),this.descriptor!==null&&this.descriptor!==void 0&&(m.writeFieldBegin("descriptor",o.Type.STRUCT,5),this.descriptor.write(m),m.writeFieldEnd()),this.targets!==null&&this.targets!==void 0){m.writeFieldBegin("targets",o.Type.LIST,6),m.writeListBegin(o.Type.STRUCT,this.targets.length);for(let l in this.targets)this.targets.hasOwnProperty(l)&&(l=this.targets[l],l.write(m));m.writeListEnd(),m.writeFieldEnd()}if(this.target_init_vals!==null&&this.target_init_vals!==void 0){m.writeFieldBegin("target_init_vals",o.Type.LIST,7),m.writeListBegin(o.Type.I64,this.target_init_vals.length);for(let l in this.target_init_vals)this.target_init_vals.hasOwnProperty(l)&&(l=this.target_init_vals[l],m.writeI64(l));m.writeListEnd(),m.writeFieldEnd()}if(this.varlen_buffer!==null&&this.varlen_buffer!==void 0){m.writeFieldBegin("varlen_buffer",o.Type.LIST,8),m.writeListBegin(o.Type.STRING,this.varlen_buffer.length);for(let l in this.varlen_buffer)this.varlen_buffer.hasOwnProperty(l)&&(l=this.varlen_buffer[l],m.writeBinary(l));m.writeListEnd(),m.writeFieldEnd()}if(this.count_distinct_sets!==null&&this.count_distinct_sets!==void 0){m.writeFieldBegin("count_distinct_sets",o.Type.LIST,9),m.writeListBegin(o.Type.STRUCT,this.count_distinct_sets.length);for(let l in this.count_distinct_sets)this.count_distinct_sets.hasOwnProperty(l)&&(l=this.count_distinct_sets[l],l.write(m));m.writeListEnd(),m.writeFieldEnd()}this.explanation!==null&&this.explanation!==void 0&&(m.writeFieldBegin("explanation",o.Type.STRING,10),m.writeString(this.explanation),m.writeFieldEnd()),m.writeFieldStop(),m.writeStructEnd()}}},2003:c=>{c.exports=i}},s={};function a(c){if(s[c])return s[c].exports;var d=s[c]={exports:{}};return n[c](d,d.exports,a),d.exports}return a.n=c=>{var d=c&&c.__esModule?()=>c.default:()=>c;return a.d(d,{a:d}),d},a.d=(c,d)=>{for(var f in d)a.o(d,f)&&!a.o(c,f)&&Object.defineProperty(c,f,{enumerable:!0,get:d[f]})},a.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),a.o=(c,d)=>Object.prototype.hasOwnProperty.call(c,d),a.r=c=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},a(7123)})()})})($G);var Dpe=$G.exports;const Ppe=pd(Dpe);new Ppe;class $pe{constructor(e){this.db=e,this.views=new ufe,this.filters=new Map,this.index=new Map}async view0D(e){await this.assertDataExists();const i=new uc(this);return this.views.add(i),e&&i.addOnChangeListener(e),i}async view1D(e,i){await this.assertDataExists(e);const n=new qa(this,e);return this.views.add(n),i&&n.addOnChangeListener(i),n}async entries({offset:e=0,length:i=1/0}={}){return this.db.entries(e,i,this.filters)}async all(){for(const e of this.views)await e.all()}async link(){const e=this.views.active;e?(await e.computeIndex(!0),await e.select(e.lastFilter,!0)):await this.all()}get passiveFilters(){const e=this.views.active;if(e instanceof uc)throw Error("No filter for 0D view / count");if(e instanceof qa)return g4(this.filters,e.dimension);throw Error("2D view not implemented yet")}otherFilters(e){return g4(this.filters,e.dimension)}async assertDataExists(...e){if(!await this.db.tableExists())throw new Error("Table does not exists in the database");e==null||e.forEach(async n=>{if(n&&!await this.db.dimensionExists(n))throw new Error(`Dimension '${n.name}' does not exist in the data table`)})}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var Upe=globalThis&&globalThis.__extends||function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var a in s)s.hasOwnProperty(a)&&(n[a]=s[a])},t(e,i)};return function(e,i){t(e,i);function n(){this.constructor=e}e.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}(),zpe=Object.prototype.hasOwnProperty;function Lk(t,e){return zpe.call(t,e)}function Dk(t){if(Array.isArray(t)){for(var e=new Array(t.length),i=0;i<e.length;i++)e[i]=""+i;return e}if(Object.keys)return Object.keys(t);var n=[];for(var s in t)Lk(t,s)&&n.push(s);return n}function Qs(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function Pk(t){for(var e=0,i=t.length,n;e<i;){if(n=t.charCodeAt(e),n>=48&&n<=57){e++;continue}return!1}return!0}function df(t){return t.indexOf("/")===-1&&t.indexOf("~")===-1?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function UG(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function $k(t){if(t===void 0)return!0;if(t){if(Array.isArray(t)){for(var e=0,i=t.length;e<i;e++)if($k(t[e]))return!0}else if(typeof t=="object"){for(var n=Dk(t),s=n.length,a=0;a<s;a++)if($k(t[n[a]]))return!0}}return!1}function $4(t,e){var i=[t];for(var n in e){var s=typeof e[n]=="object"?JSON.stringify(e[n],null,2):e[n];typeof s<"u"&&i.push(n+": "+s)}return i.join(`
`)}var zG=function(t){Upe(e,t);function e(i,n,s,a,c){var d=this.constructor,f=t.call(this,$4(i,{name:n,index:s,operation:a,tree:c}))||this;return f.name=n,f.index=s,f.operation=a,f.tree=c,Object.setPrototypeOf(f,d.prototype),f.message=$4(i,{name:n,index:s,operation:a,tree:c}),f}return e}(Error),ki=zG,jpe=Qs,Rh={add:function(t,e,i){return t[e]=this.value,{newDocument:i}},remove:function(t,e,i){var n=t[e];return delete t[e],{newDocument:i,removed:n}},replace:function(t,e,i){var n=t[e];return t[e]=this.value,{newDocument:i,removed:n}},move:function(t,e,i){var n=ov(i,this.path);n&&(n=Qs(n));var s=Nf(i,{op:"remove",path:this.from}).removed;return Nf(i,{op:"add",path:this.path,value:s}),{newDocument:i,removed:n}},copy:function(t,e,i){var n=ov(i,this.from);return Nf(i,{op:"add",path:this.path,value:Qs(n)}),{newDocument:i}},test:function(t,e,i){return{newDocument:i,test:qg(t[e],this.value)}},_get:function(t,e,i){return this.value=t[e],{newDocument:i}}},qpe={add:function(t,e,i){return Pk(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:i,index:e}},remove:function(t,e,i){var n=t.splice(e,1);return{newDocument:i,removed:n[0]}},replace:function(t,e,i){var n=t[e];return t[e]=this.value,{newDocument:i,removed:n}},move:Rh.move,copy:Rh.copy,test:Rh.test,_get:Rh._get};function ov(t,e){if(e=="")return t;var i={op:"_get",path:e};return Nf(t,i),i.value}function Nf(t,e,i,n,s,a){if(i===void 0&&(i=!1),n===void 0&&(n=!0),s===void 0&&(s=!0),a===void 0&&(a=0),i&&(typeof i=="function"?i(e,0,t,e.path):lv(e,0)),e.path===""){var c={newDocument:t};if(e.op==="add")return c.newDocument=e.value,c;if(e.op==="replace")return c.newDocument=e.value,c.removed=t,c;if(e.op==="move"||e.op==="copy")return c.newDocument=ov(t,e.from),e.op==="move"&&(c.removed=t),c;if(e.op==="test"){if(c.test=qg(t,e.value),c.test===!1)throw new ki("Test operation failed","TEST_OPERATION_FAILED",a,e,t);return c.newDocument=t,c}else{if(e.op==="remove")return c.removed=t,c.newDocument=null,c;if(e.op==="_get")return e.value=t,c;if(i)throw new ki("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",a,e,t);return c}}else{n||(t=Qs(t));var d=e.path||"",f=d.split("/"),u=t,o=1,g=f.length,w=void 0,m=void 0,l=void 0;for(typeof i=="function"?l=i:l=lv;;){if(m=f[o],m&&m.indexOf("~")!=-1&&(m=UG(m)),s&&(m=="__proto__"||m=="prototype"&&o>0&&f[o-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(i&&w===void 0&&(u[m]===void 0?w=f.slice(0,o).join("/"):o==g-1&&(w=e.path),w!==void 0&&l(e,0,t,w)),o++,Array.isArray(u)){if(m==="-")m=u.length;else{if(i&&!Pk(m))throw new ki("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a,e,t);Pk(m)&&(m=~~m)}if(o>=g){if(i&&e.op==="add"&&m>u.length)throw new ki("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a,e,t);var c=qpe[e.op].call(e,u,m,t);if(c.test===!1)throw new ki("Test operation failed","TEST_OPERATION_FAILED",a,e,t);return c}}else if(o>=g){var c=Rh[e.op].call(e,u,m,t);if(c.test===!1)throw new ki("Test operation failed","TEST_OPERATION_FAILED",a,e,t);return c}if(u=u[m],i&&o<g&&(!u||typeof u!="object"))throw new ki("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",a,e,t)}}}function VE(t,e,i,n,s){if(n===void 0&&(n=!0),s===void 0&&(s=!0),i&&!Array.isArray(e))throw new ki("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");n||(t=Qs(t));for(var a=new Array(e.length),c=0,d=e.length;c<d;c++)a[c]=Nf(t,e[c],i,!0,s,c),t=a[c].newDocument;return a.newDocument=t,a}function Gpe(t,e,i){var n=Nf(t,e);if(n.test===!1)throw new ki("Test operation failed","TEST_OPERATION_FAILED",i,e,t);return n.newDocument}function lv(t,e,i,n){if(typeof t!="object"||t===null||Array.isArray(t))throw new ki("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,t,i);if(Rh[t.op]){if(typeof t.path!="string")throw new ki("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,t,i);if(t.path.indexOf("/")!==0&&t.path.length>0)throw new ki('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,t,i);if((t.op==="move"||t.op==="copy")&&typeof t.from!="string")throw new ki("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,t,i);if((t.op==="add"||t.op==="replace"||t.op==="test")&&t.value===void 0)throw new ki("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,t,i);if((t.op==="add"||t.op==="replace"||t.op==="test")&&$k(t.value))throw new ki("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,t,i);if(i){if(t.op=="add"){var s=t.path.split("/").length,a=n.split("/").length;if(s!==a+1&&s!==a)throw new ki("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,t,i)}else if(t.op==="replace"||t.op==="remove"||t.op==="_get"){if(t.path!==n)throw new ki("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,t,i)}else if(t.op==="move"||t.op==="copy"){var c={op:"_get",path:t.from,value:void 0},d=jG([c],i);if(d&&d.name==="OPERATION_PATH_UNRESOLVABLE")throw new ki("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,t,i)}}}else throw new ki("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,t,i)}function jG(t,e,i){try{if(!Array.isArray(t))throw new ki("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)VE(Qs(e),Qs(t),i||!0);else{i=i||lv;for(var n=0;n<t.length;n++)i(t[n],n,e,void 0)}}catch(s){if(s instanceof ki)return s;throw s}}function qg(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var i=Array.isArray(t),n=Array.isArray(e),s,a,c;if(i&&n){if(a=t.length,a!=e.length)return!1;for(s=a;s--!==0;)if(!qg(t[s],e[s]))return!1;return!0}if(i!=n)return!1;var d=Object.keys(t);if(a=d.length,a!==Object.keys(e).length)return!1;for(s=a;s--!==0;)if(!e.hasOwnProperty(d[s]))return!1;for(s=a;s--!==0;)if(c=d[s],!qg(t[c],e[c]))return!1;return!0}return t!==t&&e!==e}const Vpe=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:ki,_areEquals:qg,applyOperation:Nf,applyPatch:VE,applyReducer:Gpe,deepClone:jpe,getValueByPointer:ov,validate:jG,validator:lv},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var cO=new WeakMap,Wpe=function(){function t(e){this.observers=new Map,this.obj=e}return t}(),Hpe=function(){function t(e,i){this.callback=e,this.observer=i}return t}();function Ype(t){return cO.get(t)}function Xpe(t,e){return t.observers.get(e)}function Kpe(t,e){t.observers.delete(e.callback)}function Jpe(t,e){e.unobserve()}function Qpe(t,e){var i=[],n,s=Ype(t);if(!s)s=new Wpe(t),cO.set(t,s);else{var a=Xpe(s,e);n=a&&a.observer}if(n)return n;if(n={},s.value=Qs(t),e){n.callback=e,n.next=null;var c=function(){Uk(n)},d=function(){clearTimeout(n.next),n.next=setTimeout(c)};typeof window<"u"&&(window.addEventListener("mouseup",d),window.addEventListener("keyup",d),window.addEventListener("mousedown",d),window.addEventListener("keydown",d),window.addEventListener("change",d))}return n.patches=i,n.object=t,n.unobserve=function(){Uk(n),clearTimeout(n.next),Kpe(s,n),typeof window<"u"&&(window.removeEventListener("mouseup",d),window.removeEventListener("keyup",d),window.removeEventListener("mousedown",d),window.removeEventListener("keydown",d),window.removeEventListener("change",d))},s.observers.set(e,new Hpe(e,n)),n}function Uk(t,e){e===void 0&&(e=!1);var i=cO.get(t.object);dO(i.value,t.object,t.patches,"",e),t.patches.length&&VE(i.value,t.patches);var n=t.patches;return n.length>0&&(t.patches=[],t.callback&&t.callback(n)),n}function dO(t,e,i,n,s){if(e!==t){typeof e.toJSON=="function"&&(e=e.toJSON());for(var a=Dk(e),c=Dk(t),d=!1,f=c.length-1;f>=0;f--){var u=c[f],o=t[u];if(Lk(e,u)&&!(e[u]===void 0&&o!==void 0&&Array.isArray(e)===!1)){var g=e[u];typeof o=="object"&&o!=null&&typeof g=="object"&&g!=null&&Array.isArray(o)===Array.isArray(g)?dO(o,g,i,n+"/"+df(u),s):o!==g&&(s&&i.push({op:"test",path:n+"/"+df(u),value:Qs(o)}),i.push({op:"replace",path:n+"/"+df(u),value:Qs(g)}))}else Array.isArray(t)===Array.isArray(e)?(s&&i.push({op:"test",path:n+"/"+df(u),value:Qs(o)}),i.push({op:"remove",path:n+"/"+df(u)}),d=!0):(s&&i.push({op:"test",path:n,value:t}),i.push({op:"replace",path:n,value:e}))}if(!(!d&&a.length==c.length))for(var f=0;f<a.length;f++){var u=a[f];!Lk(t,u)&&e[u]!==void 0&&i.push({op:"add",path:n+"/"+df(u),value:Qs(e[u])})}}}function Zpe(t,e,i){i===void 0&&(i=!1);var n=[];return dO(t,e,n,"",i),n}const e_e=Object.freeze(Object.defineProperty({__proto__:null,compare:Zpe,generate:Uk,observe:Qpe,unobserve:Jpe},Symbol.toStringTag,{value:"Module"}));Object.assign({},Vpe,e_e,{JsonPatchError:zG,deepClone:Qs,escapePathComponent:df,unescapePathComponent:UG});var t_e=/("(?:[^\\"]|\\.)*")|[:,]/g,i_e=function(e,i){var n,s,a;return i=i||{},n=JSON.stringify([1],void 0,i.indent===void 0?2:i.indent).slice(2,-3),s=n===""?1/0:i.maxLength===void 0?80:i.maxLength,a=i.replacer,function c(d,f,u){var o,g,w,m,l,T,b,S,x,B,F,I;if(d&&typeof d.toJSON=="function"&&(d=d.toJSON()),F=JSON.stringify(d,a),F===void 0)return F;if(b=s-f.length-u,F.length<=b&&(x=F.replace(t_e,function(A,O){return O||A+" "}),x.length<=b))return x;if(a!=null&&(d=JSON.parse(F),a=void 0),typeof d=="object"&&d!==null){if(S=f+n,w=[],g=0,Array.isArray(d))for(B="[",o="]",b=d.length;g<b;g++)w.push(c(d[g],S,g===b-1?0:1)||"null");else for(B="{",o="}",T=Object.keys(d),b=T.length;g<b;g++)m=T[g],l=JSON.stringify(m)+": ",I=c(d[m],S,l.length+(g===b-1?0:1)),I!==void 0&&w.push(l+I);if(w.length>0)return[B,n+w.join(`,
`+S),o].join(`
`+f)}return F}(e,"",0)};const wB=pd(i_e);function Ds(t,e,i){return t.fields=e||[],t.fname=i,t}function Ai(t){return t==null?null:t.fname}function Mn(t){return t==null?null:t.fields}function qG(t){return t.length===1?n_e(t[0]):s_e(t)}const n_e=t=>function(e){return e[t]},s_e=t=>{const e=t.length;return function(i){for(let n=0;n<e;++n)i=i[t[n]];return i}};function de(t){throw Error(t)}function Ro(t){const e=[],i=t.length;let n=null,s=0,a="",c,d,f;t=t+"";function u(){e.push(a+t.substring(c,d)),a="",c=d+1}for(c=d=0;d<i;++d)if(f=t[d],f==="\\")a+=t.substring(c,d++),c=d;else if(f===n)u(),n=null,s=-1;else{if(n)continue;c===s&&f==='"'||c===s&&f==="'"?(c=d+1,n=f):f==="."&&!s?d>c?u():c=d+1:f==="["?(d>c&&u(),s=c=d+1):f==="]"&&(s||de("Access path missing open bracket: "+t),s>0&&u(),s=0,c=d+1)}return s&&de("Access path missing closing bracket: "+t),n&&de("Access path missing closing quote: "+t),d>c&&(d++,u()),e}function Fs(t,e,i){const n=Ro(t);return t=n.length===1?n[0]:t,Ds((i&&i.get||qG)(n),[t],e||t)}const Gm=Fs("id"),Rn=Ds(t=>t,[],"identity"),bc=Ds(()=>0,[],"zero"),b_=Ds(()=>1,[],"one"),Ar=Ds(()=>!0,[],"true"),oc=Ds(()=>!1,[],"false");function r_e(t,e,i){const n=[e].concat([].slice.call(i));console[t].apply(console,n)}const GG=0,fO=1,uO=2,VG=3,WG=4;function hO(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:r_e,n=t||GG;return{level(s){return arguments.length?(n=+s,this):n},error(){return n>=fO&&i(e||"error","ERROR",arguments),this},warn(){return n>=uO&&i(e||"warn","WARN",arguments),this},info(){return n>=VG&&i(e||"log","INFO",arguments),this},debug(){return n>=WG&&i(e||"log","DEBUG",arguments),this}}}var ue=Array.isArray;function Me(t){return t===Object(t)}const U4=t=>t!=="__proto__";function T_(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return e.reduce((n,s)=>{for(const a in s)if(a==="signals")n.signals=a_e(n.signals,s.signals);else{const c=a==="legend"?{layout:1}:a==="style"?!0:null;v_(n,a,s[a],c)}return n},{})}function v_(t,e,i,n){if(!U4(e))return;let s,a;if(Me(i)&&!ue(i)){a=Me(t[e])?t[e]:t[e]={};for(s in i)n&&(n===!0||n[s])?v_(a,s,i[s]):U4(s)&&(a[s]=i[s])}else t[e]=i}function a_e(t,e){if(t==null)return e;const i={},n=[];function s(a){i[a.name]||(i[a.name]=1,n.push(a))}return e.forEach(s),t.forEach(s),n}function At(t){return t[t.length-1]}function In(t){return t==null||t===""?null:+t}const HG=t=>e=>t*Math.exp(e),YG=t=>e=>Math.log(t*e),XG=t=>e=>Math.sign(e)*Math.log1p(Math.abs(e/t)),KG=t=>e=>Math.sign(e)*Math.expm1(Math.abs(e))*t,cv=t=>e=>e<0?-Math.pow(-e,t):Math.pow(e,t);function WE(t,e,i,n){const s=i(t[0]),a=i(At(t)),c=(a-s)*e;return[n(s-c),n(a-c)]}function JG(t,e){return WE(t,e,In,Rn)}function QG(t,e){var i=Math.sign(t[0]);return WE(t,e,YG(i),HG(i))}function ZG(t,e,i){return WE(t,e,cv(i),cv(1/i))}function eV(t,e,i){return WE(t,e,XG(i),KG(i))}function HE(t,e,i,n,s){const a=n(t[0]),c=n(At(t)),d=e!=null?n(e):(a+c)/2;return[s(d+(a-d)*i),s(d+(c-d)*i)]}function pO(t,e,i){return HE(t,e,i,In,Rn)}function _O(t,e,i){const n=Math.sign(t[0]);return HE(t,e,i,YG(n),HG(n))}function dv(t,e,i,n){return HE(t,e,i,cv(n),cv(1/n))}function yO(t,e,i,n){return HE(t,e,i,XG(n),KG(n))}function tV(t){return 1+~~(new Date(t).getMonth()/3)}function iV(t){return 1+~~(new Date(t).getUTCMonth()/3)}function ke(t){return t!=null?ue(t)?t:[t]:[]}function nV(t,e,i){let n=t[0],s=t[1],a;return s<n&&(a=s,s=n,n=a),a=s-n,a>=i-e?[e,i]:[n=Math.min(Math.max(n,e),i-a),n+a]}function gt(t){return typeof t=="function"}const o_e="descending";function gO(t,e,i){i=i||{},e=ke(e)||[];const n=[],s=[],a={},c=i.comparator||l_e;return ke(t).forEach((d,f)=>{d!=null&&(n.push(e[f]===o_e?-1:1),s.push(d=gt(d)?d:Fs(d,null,i)),(Mn(d)||[]).forEach(u=>a[u]=1))}),s.length===0?null:Ds(c(s,n),Object.keys(a))}const YE=(t,e)=>(t<e||t==null)&&e!=null?-1:(t>e||e==null)&&t!=null?1:(e=e instanceof Date?+e:e,(t=t instanceof Date?+t:t)!==t&&e===e?-1:e!==e&&t===t?1:0),l_e=(t,e)=>t.length===1?c_e(t[0],e[0]):d_e(t,e,t.length),c_e=(t,e)=>function(i,n){return YE(t(i),t(n))*e},d_e=(t,e,i)=>(e.push(0),function(n,s){let a,c=0,d=-1;for(;c===0&&++d<i;)a=t[d],c=YE(a(n),a(s));return c*e[d]});function Ln(t){return gt(t)?t:()=>t}function mO(t,e){let i;return n=>{i&&clearTimeout(i),i=setTimeout(()=>(e(n),i=null),t)}}function yt(t){for(let e,i,n=1,s=arguments.length;n<s;++n){e=arguments[n];for(i in e)t[i]=e[i]}return t}function xo(t,e){let i=0,n,s,a,c;if(t&&(n=t.length))if(e==null){for(s=t[i];i<n&&(s==null||s!==s);s=t[++i]);for(a=c=s;i<n;++i)s=t[i],s!=null&&(s<a&&(a=s),s>c&&(c=s))}else{for(s=e(t[i]);i<n&&(s==null||s!==s);s=e(t[++i]));for(a=c=s;i<n;++i)s=e(t[i]),s!=null&&(s<a&&(a=s),s>c&&(c=s))}return[a,c]}function sV(t,e){const i=t.length;let n=-1,s,a,c,d,f;if(e==null){for(;++n<i;)if(a=t[n],a!=null&&a>=a){s=c=a;break}if(n===i)return[-1,-1];for(d=f=n;++n<i;)a=t[n],a!=null&&(s>a&&(s=a,d=n),c<a&&(c=a,f=n))}else{for(;++n<i;)if(a=e(t[n],n,t),a!=null&&a>=a){s=c=a;break}if(n===i)return[-1,-1];for(d=f=n;++n<i;)a=e(t[n],n,t),a!=null&&(s>a&&(s=a,d=n),c<a&&(c=a,f=n))}return[d,f]}const f_e=Object.prototype.hasOwnProperty;function Pe(t,e){return f_e.call(t,e)}const l0={};function E_(t){let e={},i;function n(a){return Pe(e,a)&&e[a]!==l0}const s={size:0,empty:0,object:e,has:n,get(a){return n(a)?e[a]:void 0},set(a,c){return n(a)||(++s.size,e[a]===l0&&--s.empty),e[a]=c,this},delete(a){return n(a)&&(--s.size,++s.empty,e[a]=l0),this},clear(){s.size=s.empty=0,s.object=e={}},test(a){return arguments.length?(i=a,s):i},clean(){const a={};let c=0;for(const d in e){const f=e[d];f!==l0&&(!i||!i(f))&&(a[d]=f,++c)}s.size=c,s.empty=0,s.object=e=a}};return t&&Object.keys(t).forEach(a=>{s.set(a,t[a])}),s}function rV(t,e,i,n,s,a){if(!i&&i!==0)return a;const c=+i;let d=t[0],f=At(t),u;f<d&&(u=d,d=f,f=u),u=Math.abs(e-d);const o=Math.abs(f-e);return u<o&&u<=c?n:o<=c?s:a}function Ee(t,e,i){const n=t.prototype=Object.create(e.prototype);return Object.defineProperty(n,"constructor",{value:t,writable:!0,enumerable:!0,configurable:!0}),yt(n,i)}function Lh(t,e,i,n){let s=e[0],a=e[e.length-1],c;return s>a&&(c=s,s=a,a=c),i=i===void 0||i,n=n===void 0||n,(i?s<=t:s<t)&&(n?t<=a:t<a)}function vd(t){return typeof t=="boolean"}function Oc(t){return Object.prototype.toString.call(t)==="[object Date]"}function aV(t){return t&&gt(t[Symbol.iterator])}function ii(t){return typeof t=="number"}function oV(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function Ie(t){return typeof t=="string"}function wO(t,e,i){t&&(t=e?ke(t).map(d=>d.replace(/\\(.)/g,"$1")):ke(t));const n=t&&t.length,s=i&&i.get||qG,a=d=>s(e?[d]:Ro(d));let c;if(!n)c=function(){return""};else if(n===1){const d=a(t[0]);c=function(f){return""+d(f)}}else{const d=t.map(a);c=function(f){let u=""+d[0](f),o=0;for(;++o<n;)u+="|"+d[o](f);return u}}return Ds(c,t,"key")}function lV(t,e){const i=t[0],n=At(t),s=+e;return s?s===1?n:i+s*(n-i):i}const u_e=1e4;function cV(t){t=+t||u_e;let e,i,n;const s=()=>{e={},i={},n=0},a=(c,d)=>(++n>t&&(i=e,e={},n=1),e[c]=d);return s(),{clear:s,has:c=>Pe(e,c)||Pe(i,c),get:c=>Pe(e,c)?e[c]:Pe(i,c)?a(c,i[c]):void 0,set:(c,d)=>Pe(e,c)?e[c]=d:a(c,d)}}function dV(t,e,i,n){const s=e.length,a=i.length;if(!a)return e;if(!s)return i;const c=n||new e.constructor(s+a);let d=0,f=0,u=0;for(;d<s&&f<a;++u)c[u]=t(e[d],i[f])>0?i[f++]:e[d++];for(;d<s;++d,++u)c[u]=e[d];for(;f<a;++f,++u)c[u]=i[f];return c}function Dy(t,e){let i="";for(;--e>=0;)i+=t;return i}function fV(t,e,i,n){const s=i||" ",a=t+"",c=e-a.length;return c<=0?a:n==="left"?Dy(s,c)+a:n==="center"?Dy(s,~~(c/2))+a+Dy(s,Math.ceil(c/2)):a+Dy(s,c)}function Vm(t){return t&&At(t)-t[0]||0}function ve(t){return ue(t)?"["+t.map(ve)+"]":Me(t)||Ie(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}function bO(t){return t==null||t===""?null:!t||t==="false"||t==="0"?!1:!!t}const h_e=t=>ii(t)||Oc(t)?t:Date.parse(t);function TO(t,e){return e=e||h_e,t==null||t===""?null:e(t)}function vO(t){return t==null||t===""?null:t+""}function ua(t){const e={},i=t.length;for(let n=0;n<i;++n)e[t[n]]=!0;return e}function uV(t,e,i,n){const s=n??"…",a=t+"",c=a.length,d=Math.max(0,e-s.length);return c<=e?a:i==="left"?s+a.slice(c-d):i==="center"?a.slice(0,Math.ceil(d/2))+s+a.slice(c-~~(d/2)):a.slice(0,d)+s}function _c(t,e,i){if(t)if(e){const n=t.length;for(let s=0;s<n;++s){const a=e(t[s]);a&&i(a,s,t)}}else t.forEach(i)}function p_e(t){return t}function __e(t){if(t==null)return p_e;var e,i,n=t.scale[0],s=t.scale[1],a=t.translate[0],c=t.translate[1];return function(d,f){f||(e=i=0);var u=2,o=d.length,g=new Array(o);for(g[0]=(e+=d[0])*n+a,g[1]=(i+=d[1])*s+c;u<o;)g[u]=d[u],++u;return g}}function y_e(t,e){for(var i,n=t.length,s=n-e;s<--n;)i=t[s],t[s++]=t[n],t[n]=i}function g_e(t,e){return typeof e=="string"&&(e=t.objects[e]),e.type==="GeometryCollection"?{type:"FeatureCollection",features:e.geometries.map(function(i){return z4(t,i)})}:z4(t,e)}function z4(t,e){var i=e.id,n=e.bbox,s=e.properties==null?{}:e.properties,a=hV(t,e);return i==null&&n==null?{type:"Feature",properties:s,geometry:a}:n==null?{type:"Feature",id:i,properties:s,geometry:a}:{type:"Feature",id:i,bbox:n,properties:s,geometry:a}}function hV(t,e){var i=__e(t.transform),n=t.arcs;function s(o,g){g.length&&g.pop();for(var w=n[o<0?~o:o],m=0,l=w.length;m<l;++m)g.push(i(w[m],m));o<0&&y_e(g,l)}function a(o){return i(o)}function c(o){for(var g=[],w=0,m=o.length;w<m;++w)s(o[w],g);return g.length<2&&g.push(g[0]),g}function d(o){for(var g=c(o);g.length<4;)g.push(g[0]);return g}function f(o){return o.map(d)}function u(o){var g=o.type,w;switch(g){case"GeometryCollection":return{type:g,geometries:o.geometries.map(u)};case"Point":w=a(o.coordinates);break;case"MultiPoint":w=o.coordinates.map(a);break;case"LineString":w=c(o.arcs);break;case"MultiLineString":w=o.arcs.map(c);break;case"Polygon":w=f(o.arcs);break;case"MultiPolygon":w=o.arcs.map(f);break;default:return null}return{type:g,coordinates:w}}return u(e)}function m_e(t,e){var i={},n={},s={},a=[],c=-1;e.forEach(function(u,o){var g=t.arcs[u<0?~u:u],w;g.length<3&&!g[1][0]&&!g[1][1]&&(w=e[++c],e[c]=u,e[o]=w)}),e.forEach(function(u){var o=d(u),g=o[0],w=o[1],m,l;if(m=s[g])if(delete s[m.end],m.push(u),m.end=w,l=n[w]){delete n[l.start];var T=l===m?m:m.concat(l);n[T.start=m.start]=s[T.end=l.end]=T}else n[m.start]=s[m.end]=m;else if(m=n[w])if(delete n[m.start],m.unshift(u),m.start=g,l=s[g]){delete s[l.end];var b=l===m?m:l.concat(m);n[b.start=l.start]=s[b.end=m.end]=b}else n[m.start]=s[m.end]=m;else m=[u],n[m.start=g]=s[m.end=w]=m});function d(u){var o=t.arcs[u<0?~u:u],g=o[0],w;return t.transform?(w=[0,0],o.forEach(function(m){w[0]+=m[0],w[1]+=m[1]})):w=o[o.length-1],u<0?[w,g]:[g,w]}function f(u,o){for(var g in u){var w=u[g];delete o[w.start],delete w.start,delete w.end,w.forEach(function(m){i[m<0?~m:m]=1}),a.push(w)}}return f(s,n),f(n,s),e.forEach(function(u){i[u<0?~u:u]||a.push([u])}),a}function w_e(t){return hV(t,b_e.apply(this,arguments))}function b_e(t,e,i){var n,s,a;if(arguments.length>1)n=T_e(t,e,i);else for(s=0,n=new Array(a=t.arcs.length);s<a;++s)n[s]=s;return{type:"MultiLineString",arcs:m_e(t,n)}}function T_e(t,e,i){var n=[],s=[],a;function c(g){var w=g<0?~g:g;(s[w]||(s[w]=[])).push({i:g,g:a})}function d(g){g.forEach(c)}function f(g){g.forEach(d)}function u(g){g.forEach(f)}function o(g){switch(a=g,g.type){case"GeometryCollection":g.geometries.forEach(o);break;case"LineString":d(g.arcs);break;case"MultiLineString":case"Polygon":f(g.arcs);break;case"MultiPolygon":u(g.arcs);break}}return o(e),s.forEach(i==null?function(g){n.push(g[0].i)}:function(g){i(g[0].g,g[g.length-1].g)&&n.push(g[0].i)}),n}const yn="year",Ms="quarter",An="month",Gi="week",As="date",Bn="day",Bo="dayofyear",nr="hours",sr="minutes",Or="seconds",ha="milliseconds",EO=[yn,Ms,An,Gi,As,Bn,Bo,nr,sr,Or,ha],bB=EO.reduce((t,e,i)=>(t[e]=1+i,t),{});function SO(t){const e=ke(t).slice(),i={};return e.length||de("Missing time unit."),e.forEach(s=>{Pe(bB,s)?i[s]=1:de(`Invalid time unit: ${s}.`)}),(i[Gi]||i[Bn]?1:0)+(i[Ms]||i[An]||i[As]?1:0)+(i[Bo]?1:0)>1&&de(`Incompatible time units: ${t}`),e.sort((s,a)=>bB[s]-bB[a]),e}const v_e={[yn]:"%Y ",[Ms]:"Q%q ",[An]:"%b ",[As]:"%d ",[Gi]:"W%U ",[Bn]:"%a ",[Bo]:"%j ",[nr]:"%H:00",[sr]:"00:%M",[Or]:":%S",[ha]:".%L",[`${yn}-${An}`]:"%Y-%m ",[`${yn}-${An}-${As}`]:"%Y-%m-%d ",[`${nr}-${sr}`]:"%H:%M"};function pV(t,e){const i=yt({},v_e,e),n=SO(t),s=n.length;let a="",c=0,d,f;for(c=0;c<s;)for(d=n.length;d>c;--d)if(f=n.slice(c,d).join("-"),i[f]!=null){a+=i[f],c=d;break}return a.trim()}const uf=new Date;function xO(t){return uf.setFullYear(t),uf.setMonth(0),uf.setDate(1),uf.setHours(0,0,0,0),uf}function _V(t){return gV(new Date(t))}function yV(t){return zk(new Date(t))}function gV(t){return vl.count(xO(t.getFullYear())-1,t)}function zk(t){return __.count(xO(t.getFullYear())-1,t)}function jk(t){return xO(t).getDay()}function E_e(t,e,i,n,s,a,c){if(0<=t&&t<100){const d=new Date(-1,e,i,n,s,a,c);return d.setFullYear(t),d}return new Date(t,e,i,n,s,a,c)}function mV(t){return bV(new Date(t))}function wV(t){return qk(new Date(t))}function bV(t){const e=Date.UTC(t.getUTCFullYear(),0,1);return Ac.count(e-1,t)}function qk(t){const e=Date.UTC(t.getUTCFullYear(),0,1);return y_.count(e-1,t)}function Gk(t){return uf.setTime(Date.UTC(t,0,1)),uf.getUTCDay()}function S_e(t,e,i,n,s,a,c){if(0<=t&&t<100){const d=new Date(Date.UTC(-1,e,i,n,s,a,c));return d.setUTCFullYear(i.y),d}return new Date(Date.UTC(t,e,i,n,s,a,c))}function TV(t,e,i,n,s){const a=e||1,c=At(t),d=(S,x,B)=>(B=B||S,x_e(i[B],n[B],S===c&&a,x)),f=new Date,u=ua(t),o=u[yn]?d(yn):Ln(2012),g=u[An]?d(An):u[Ms]?d(Ms):bc,w=u[Gi]&&u[Bn]?d(Bn,1,Gi+Bn):u[Gi]?d(Gi,1):u[Bn]?d(Bn,1):u[As]?d(As,1):u[Bo]?d(Bo,1):b_,m=u[nr]?d(nr):bc,l=u[sr]?d(sr):bc,T=u[Or]?d(Or):bc,b=u[ha]?d(ha):bc;return function(S){f.setTime(+S);const x=o(f);return s(x,g(f),w(f,x),m(f),l(f),T(f),b(f))}}function x_e(t,e,i,n){const s=i<=1?t:n?(a,c)=>n+i*Math.floor((t(a,c)-n)/i):(a,c)=>i*Math.floor(t(a,c)/i);return e?(a,c)=>e(s(a,c),c):s}function zp(t,e,i){return e+t*7-(i+6)%7}const B_e={[yn]:t=>t.getFullYear(),[Ms]:t=>Math.floor(t.getMonth()/3),[An]:t=>t.getMonth(),[As]:t=>t.getDate(),[nr]:t=>t.getHours(),[sr]:t=>t.getMinutes(),[Or]:t=>t.getSeconds(),[ha]:t=>t.getMilliseconds(),[Bo]:t=>gV(t),[Gi]:t=>zk(t),[Gi+Bn]:(t,e)=>zp(zk(t),t.getDay(),jk(e)),[Bn]:(t,e)=>zp(1,t.getDay(),jk(e))},I_e={[Ms]:t=>3*t,[Gi]:(t,e)=>zp(t,0,jk(e))};function vV(t,e){return TV(t,e||1,B_e,I_e,E_e)}const k_e={[yn]:t=>t.getUTCFullYear(),[Ms]:t=>Math.floor(t.getUTCMonth()/3),[An]:t=>t.getUTCMonth(),[As]:t=>t.getUTCDate(),[nr]:t=>t.getUTCHours(),[sr]:t=>t.getUTCMinutes(),[Or]:t=>t.getUTCSeconds(),[ha]:t=>t.getUTCMilliseconds(),[Bo]:t=>bV(t),[Gi]:t=>qk(t),[Bn]:(t,e)=>zp(1,t.getUTCDay(),Gk(e)),[Gi+Bn]:(t,e)=>zp(qk(t),t.getUTCDay(),Gk(e))},F_e={[Ms]:t=>3*t,[Gi]:(t,e)=>zp(t,0,Gk(e))};function EV(t,e){return TV(t,e||1,k_e,F_e,S_e)}const M_e={[yn]:bo,[Ms]:Cg.every(3),[An]:Cg,[Gi]:__,[As]:vl,[Bn]:vl,[Bo]:vl,[nr]:FE,[sr]:IE,[Or]:gl,[ha]:Mp},A_e={[yn]:To,[Ms]:Rg.every(3),[An]:Rg,[Gi]:y_,[As]:Ac,[Bn]:Ac,[Bo]:Ac,[nr]:ME,[sr]:kE,[Or]:gl,[ha]:Mp};function S_(t){return M_e[t]}function x_(t){return A_e[t]}function SV(t,e,i){return t?t.offset(e,i):void 0}function xV(t,e,i){return SV(S_(t),e,i)}function BV(t,e,i){return SV(x_(t),e,i)}function IV(t,e,i,n){return t?t.range(e,i,n):void 0}function kV(t,e,i,n){return IV(S_(t),e,i,n)}function FV(t,e,i,n){return IV(x_(t),e,i,n)}const Py=1e3,$y=Py*60,Uy=$y*60,XE=Uy*24,O_e=XE*7,j4=XE*30,Vk=XE*365,MV=[yn,An,As,nr,sr,Or,ha],zy=MV.slice(0,-1),jy=zy.slice(0,-1),qy=jy.slice(0,-1),N_e=qy.slice(0,-1),C_e=[yn,Gi],q4=[yn,An],AV=[yn],K_=[[zy,1,Py],[zy,5,5*Py],[zy,15,15*Py],[zy,30,30*Py],[jy,1,$y],[jy,5,5*$y],[jy,15,15*$y],[jy,30,30*$y],[qy,1,Uy],[qy,3,3*Uy],[qy,6,6*Uy],[qy,12,12*Uy],[N_e,1,XE],[C_e,1,O_e],[q4,1,j4],[q4,3,3*j4],[AV,1,Vk]];function OV(t){const e=t.extent,i=t.maxbins||40,n=Math.abs(Vm(e))/i;let s=Bm(d=>d[2]).right(K_,n),a,c;return s===K_.length?(a=AV,c=jc(e[0]/Vk,e[1]/Vk,i)):s?(s=K_[n/K_[s-1][2]<K_[s][2]/n?s-1:s],a=s[0],c=s[1]):(a=MV,c=Math.max(jc(e[0],e[1],i),1)),{units:a,step:c}}function Gy(t){const e={};return i=>e[i]||(e[i]=t(i))}function R_e(t,e){return i=>{const n=t(i),s=n.indexOf(e);if(s<0)return n;let a=L_e(n,s);const c=a<n.length?n.slice(a):"";for(;--a>s;)if(n[a]!=="0"){++a;break}return n.slice(0,a)+c}}function L_e(t,e){let i=t.lastIndexOf("e"),n;if(i>0)return i;for(i=t.length;--i>e;)if(n=t.charCodeAt(i),n>=48&&n<=57)return i+1}function NV(t){const e=Gy(t.format),i=t.formatPrefix;return{format:e,formatPrefix:i,formatFloat(n){const s=Hf(n||",");if(s.precision==null){switch(s.precision=12,s.type){case"%":s.precision-=2;break;case"e":s.precision-=1;break}return R_e(e(s),e(".1f")(1)[1])}else return e(s)},formatSpan(n,s,a,c){c=Hf(c??",f");const d=jc(n,s,a),f=Math.max(Math.abs(n),Math.abs(s));let u;if(c.precision==null)switch(c.type){case"s":return isNaN(u=J5(d,f))||(c.precision=u),i(c,f);case"":case"e":case"g":case"p":case"r":{isNaN(u=Q5(d,f))||(c.precision=u-(c.type==="e"));break}case"f":case"%":{isNaN(u=K5(d))||(c.precision=u-(c.type==="%")*2);break}}return e(c)}}}let Wk;CV();function CV(){return Wk=NV({format:TE,formatPrefix:UM})}function RV(t){return NV(X5(t))}function fv(t){return arguments.length?Wk=RV(t):Wk}function G4(t,e,i){i=i||{},Me(i)||de(`Invalid time multi-format specifier: ${i}`);const n=e(Or),s=e(sr),a=e(nr),c=e(As),d=e(Gi),f=e(An),u=e(Ms),o=e(yn),g=t(i[ha]||".%L"),w=t(i[Or]||":%S"),m=t(i[sr]||"%I:%M"),l=t(i[nr]||"%I %p"),T=t(i[As]||i[Bn]||"%a %d"),b=t(i[Gi]||"%b %d"),S=t(i[An]||"%B"),x=t(i[Ms]||"%B"),B=t(i[yn]||"%Y");return F=>(n(F)<F?g:s(F)<F?w:a(F)<F?m:c(F)<F?l:f(F)<F?d(F)<F?T:b:o(F)<F?u(F)<F?S:x:B)(F)}function LV(t){const e=Gy(t.format),i=Gy(t.utcFormat);return{timeFormat:n=>Ie(n)?e(n):G4(e,S_,n),utcFormat:n=>Ie(n)?i(n):G4(i,x_,n),timeParse:Gy(t.parse),utcParse:Gy(t.utcParse)}}let Hk;DV();function DV(){return Hk=LV({format:iA,parse:d7,utcFormat:nA,utcParse:f7})}function PV(t){return LV(r7(t))}function Gg(t){return arguments.length?Hk=PV(t):Hk}const Yk=(t,e)=>yt({},t,e);function $V(t,e){const i=t?RV(t):fv(),n=e?PV(e):Gg();return Yk(i,n)}function BO(t,e){const i=arguments.length;return i&&i!==2&&de("defaultLocale expects either zero or two arguments."),i?Yk(fv(t),Gg(e)):Yk(fv(),Gg())}function D_e(){return CV(),DV(),BO()}const P_e=/^(data:|([A-Za-z]+:)?\/\/)/,$_e=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,U_e=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,V4="file://";function z_e(t,e){return i=>({options:i||{},sanitize:q_e,load:j_e,fileAccess:!!e,file:G_e(e),http:W_e(t)})}async function j_e(t,e){const i=await this.sanitize(t,e),n=i.href;return i.localFile?this.file(n):this.http(n,e)}async function q_e(t,e){e=yt({},this.options,e);const i=this.fileAccess,n={href:null};let s,a,c;const d=$_e.test(t.replace(U_e,""));(t==null||typeof t!="string"||!d)&&de("Sanitize failure, invalid URI: "+ve(t));const f=P_e.test(t);return(c=e.baseURL)&&!f&&(!t.startsWith("/")&&!c.endsWith("/")&&(t="/"+t),t=c+t),a=(s=t.startsWith(V4))||e.mode==="file"||e.mode!=="http"&&!f&&i,s?t=t.slice(V4.length):t.startsWith("//")&&(e.defaultProtocol==="file"?(t=t.slice(2),a=!0):t=(e.defaultProtocol||"http")+":"+t),Object.defineProperty(n,"localFile",{value:!!a}),n.href=t,e.target&&(n.target=e.target+""),e.rel&&(n.rel=e.rel+""),e.context==="image"&&e.crossOrigin&&(n.crossOrigin=e.crossOrigin+""),n}function G_e(t){return t?e=>new Promise((i,n)=>{t.readFile(e,(s,a)=>{s?n(s):i(a)})}):V_e}async function V_e(){de("No file system access.")}function W_e(t){return t?async function(e,i){const n=yt({},this.options.http,i),s=i&&i.response,a=await t(e,n);return a.ok?gt(a[s])?a[s]():a.text():de(a.status+""+a.statusText)}:H_e}async function H_e(){de("No HTTP fetch method available.")}const Y_e=t=>t!=null&&t===t,X_e=t=>t==="true"||t==="false"||t===!0||t===!1,K_e=t=>!Number.isNaN(Date.parse(t)),UV=t=>!Number.isNaN(+t)&&!(t instanceof Date),J_e=t=>UV(t)&&Number.isInteger(+t),Xk={boolean:bO,integer:In,number:In,date:TO,string:vO,unknown:Rn},c0=[X_e,J_e,UV,K_e],Q_e=["boolean","integer","number","date"];function zV(t,e){if(!t||!t.length)return"unknown";const i=t.length,n=c0.length,s=c0.map((a,c)=>c+1);for(let a=0,c=0,d,f;a<i;++a)for(f=e?t[a][e]:t[a],d=0;d<n;++d)if(s[d]&&Y_e(f)&&!c0[d](f)&&(s[d]=0,++c,c===c0.length))return"string";return Q_e[s.reduce((a,c)=>a===0?c:a,0)-1]}function jV(t,e){return e.reduce((i,n)=>(i[n]=zV(t,n),i),{})}function W4(t){const e=function(i,n){const s={delimiter:t};return IO(i,n?yt(n,s):s)};return e.responseType="text",e}function IO(t,e){return e.header&&(t=e.header.map(ve).join(e.delimiter)+`
`+t),Gre(e.delimiter).parse(t+"")}IO.responseType="text";function Z_e(t){return typeof Buffer=="function"&&gt(Buffer.isBuffer)?Buffer.isBuffer(t):!1}function kO(t,e){const i=e&&e.property?Fs(e.property):Rn;return Me(t)&&!Z_e(t)?eye(i(t),e):i(JSON.parse(t))}kO.responseType="json";function eye(t,e){return!ue(t)&&aV(t)&&(t=[...t]),e&&e.copy?JSON.parse(JSON.stringify(t)):t}const tye={interior:(t,e)=>t!==e,exterior:(t,e)=>t===e};function qV(t,e){let i,n,s,a;return t=kO(t,e),e&&e.feature?(i=g_e,s=e.feature):e&&e.mesh?(i=w_e,s=e.mesh,a=tye[e.filter]):de("Missing TopoJSON feature or mesh parameter."),n=(n=t.objects[s])?i(t,n,a):de("Invalid TopoJSON object: "+s),n&&n.features||[n]}qV.responseType="json";const aT={dsv:IO,csv:W4(","),tsv:W4("	"),json:kO,topojson:qV};function FO(t,e){return arguments.length>1?(aT[t]=e,this):Pe(aT,t)?aT[t]:null}function GV(t){const e=FO(t);return e&&e.responseType||"text"}function VV(t,e,i,n){e=e||{};const s=FO(e.type||"json");return s||de("Unknown data format type: "+e.type),t=s(t,e),e.parse&&iye(t,e.parse,i,n),Pe(t,"columns")&&delete t.columns,t}function iye(t,e,i,n){if(!t.length)return;const s=Gg();i=i||s.timeParse,n=n||s.utcParse;let a=t.columns||Object.keys(t[0]),c,d,f,u,o,g;e==="auto"&&(e=jV(t,a)),a=Object.keys(e);const w=a.map(m=>{const l=e[m];let T,b;if(l&&(l.startsWith("date:")||l.startsWith("utc:")))return T=l.split(/:(.+)?/,2),b=T[1],(b[0]==="'"&&b[b.length-1]==="'"||b[0]==='"'&&b[b.length-1]==='"')&&(b=b.slice(1,-1)),(T[0]==="utc"?n:i)(b);if(!Xk[l])throw Error("Illegal format pattern: "+m+":"+l);return Xk[l]});for(f=0,o=t.length,g=a.length;f<o;++f)for(c=t[f],u=0;u<g;++u)d=a[u],c[d]=w[u](c[d])}const KE=z_e(typeof fetch<"u"&&fetch,null);function JE(t){const e=t||Rn,i=[],n={};return i.add=s=>{const a=e(s);return n[a]||(n[a]=1,i.push(s)),i},i.remove=s=>{const a=e(s);if(n[a]){n[a]=0;const c=i.indexOf(s);c>=0&&i.splice(c,1)}return i},i}async function oT(t,e){try{await e(t)}catch(i){t.error(i)}}const WV=Symbol("vega_id");let nye=1;function QE(t){return!!(t&&Le(t))}function Le(t){return t[WV]}function HV(t,e){return t[WV]=e,t}function Gt(t){const e=t===Object(t)?t:{data:t};return Le(e)?e:HV(e,nye++)}function MO(t){return ZE(t,Gt({}))}function ZE(t,e){for(const i in t)e[i]=t[i];return e}function YV(t,e){return HV(e,Le(t))}function Au(t,e){return t?e?(i,n)=>t(i,n)||Le(e(i))-Le(e(n)):(i,n)=>t(i,n)||Le(i)-Le(n):null}function XV(t){return t&&t.constructor===Ou}function Ou(){const t=[],e=[],i=[],n=[],s=[];let a=null,c=!1;return{constructor:Ou,insert(d){const f=ke(d),u=f.length;for(let o=0;o<u;++o)t.push(f[o]);return this},remove(d){const f=gt(d)?n:e,u=ke(d),o=u.length;for(let g=0;g<o;++g)f.push(u[g]);return this},modify(d,f,u){const o={field:f,value:Ln(u)};return gt(d)?(o.filter=d,s.push(o)):(o.tuple=d,i.push(o)),this},encode(d,f){return gt(d)?s.push({filter:d,field:f}):i.push({tuple:d,field:f}),this},clean(d){return a=d,this},reflow(){return c=!0,this},pulse(d,f){const u={},o={};let g,w,m,l,T,b;for(g=0,w=f.length;g<w;++g)u[Le(f[g])]=1;for(g=0,w=e.length;g<w;++g)T=e[g],u[Le(T)]=-1;for(g=0,w=n.length;g<w;++g)l=n[g],f.forEach(x=>{l(x)&&(u[Le(x)]=-1)});for(g=0,w=t.length;g<w;++g)T=t[g],b=Le(T),u[b]?u[b]=1:d.add.push(Gt(t[g]));for(g=0,w=f.length;g<w;++g)T=f[g],u[Le(T)]<0&&d.rem.push(T);function S(x,B,F){F?x[B]=F(x):d.encode=B,c||(o[Le(x)]=x)}for(g=0,w=i.length;g<w;++g)m=i[g],T=m.tuple,l=m.field,b=u[Le(T)],b>0&&(S(T,l,m.value),d.modifies(l));for(g=0,w=s.length;g<w;++g)m=s[g],l=m.filter,f.forEach(x=>{l(x)&&u[Le(x)]>0&&S(x,m.field,m.value)}),d.modifies(m.field);if(c)d.mod=e.length||n.length?f.filter(x=>u[Le(x)]>0):f.slice();else for(b in o)d.mod.push(o[b]);return(a||a==null&&(e.length||n.length))&&d.clean(!0),d}}}const lT="_:mod:_";function eS(){Object.defineProperty(this,lT,{writable:!0,value:{}})}eS.prototype={set(t,e,i,n){const s=this,a=s[t],c=s[lT];return e!=null&&e>=0?(a[e]!==i||n)&&(a[e]=i,c[e+":"+t]=-1,c[t]=-1):(a!==i||n)&&(s[t]=i,c[t]=ue(i)?1+i.length:-1),s},modified(t,e){const i=this[lT];if(arguments.length){if(ue(t)){for(let n=0;n<t.length;++n)if(i[t[n]])return!0;return!1}}else{for(const n in i)if(i[n])return!0;return!1}return e!=null&&e>=0?e+1<i[t]||!!i[e+":"+t]:!!i[t]},clear(){return this[lT]={},this}};let sye=0;const rye="pulse",aye=new eS,oye=1,lye=2;function oi(t,e,i,n){this.id=++sye,this.value=t,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,e&&(this._update=e),i&&this.parameters(i,n)}function H4(t){return function(e){const i=this.flags;return arguments.length===0?!!(i&t):(this.flags=e?i|t:i&~t,this)}}oi.prototype={targets(){return this._targets||(this._targets=JE(Gm))},set(t){return this.value!==t?(this.value=t,1):0},skip:H4(oye),modified:H4(lye),parameters(t,e,i){e=e!==!1;const n=this._argval=this._argval||new eS,s=this._argops=this._argops||[],a=[];let c,d,f,u;const o=(g,w,m)=>{m instanceof oi?(m!==this&&(e&&m.targets().add(this),a.push(m)),s.push({op:m,name:g,index:w})):n.set(g,w,m)};for(c in t)if(d=t[c],c===rye)ke(d).forEach(g=>{g instanceof oi?g!==this&&(g.targets().add(this),a.push(g)):de("Pulse parameters must be operator instances.")}),this.source=d;else if(ue(d))for(n.set(c,-1,Array(f=d.length)),u=0;u<f;++u)o(c,u,d[u]);else o(c,-1,d);return this.marshall().clear(),i&&(s.initonly=!0),a},marshall(t){const e=this._argval||aye,i=this._argops;let n,s,a,c;if(i){const d=i.length;for(s=0;s<d;++s)n=i[s],a=n.op,c=a.modified()&&a.stamp===t,e.set(n.name,n.index,a.value,c);if(i.initonly){for(s=0;s<d;++s)n=i[s],n.op.targets().remove(this);this._argops=null,this._update=null}}return e},detach(){const t=this._argops;let e,i,n,s;if(t)for(e=0,i=t.length;e<i;++e)n=t[e],s=n.op,s._targets&&s._targets.remove(this);this.pulse=null,this.source=null},evaluate(t){const e=this._update;if(e){const i=this.marshall(t.stamp),n=e.call(this,i,t);if(i.clear(),n!==this.value)this.value=n;else if(!this.modified())return t.StopPropagation}},run(t){if(t.stamp<this.stamp)return t.StopPropagation;let e;return this.skip()?(this.skip(!1),e=0):e=this.evaluate(t),this.pulse=e||t}};function cye(t,e,i,n){let s=1,a;return t instanceof oi?a=t:t&&t.prototype instanceof oi?a=new t:gt(t)?a=new oi(null,t):(s=0,a=new oi(t,e)),this.rank(a),s&&(n=i,i=e),i&&this.connect(a,a.parameters(i,n)),this.touch(a),a}function dye(t,e){const i=t.rank,n=e.length;for(let s=0;s<n;++s)if(i<e[s].rank){this.rerank(t);return}}let fye=0;function tS(t,e,i){this.id=++fye,this.value=null,i&&(this.receive=i),t&&(this._filter=t),e&&(this._apply=e)}function lc(t,e,i){return new tS(t,e,i)}tS.prototype={_filter:Ar,_apply:Rn,targets(){return this._targets||(this._targets=JE(Gm))},consume(t){return arguments.length?(this._consume=!!t,this):!!this._consume},receive(t){if(this._filter(t)){const e=this.value=this._apply(t),i=this._targets,n=i?i.length:0;for(let s=0;s<n;++s)i[s].receive(e);this._consume&&(t.preventDefault(),t.stopPropagation())}},filter(t){const e=lc(t);return this.targets().add(e),e},apply(t){const e=lc(null,t);return this.targets().add(e),e},merge(){const t=lc();this.targets().add(t);for(let e=0,i=arguments.length;e<i;++e)arguments[e].targets().add(t);return t},throttle(t){let e=-1;return this.filter(()=>{const i=Date.now();return i-e>t?(e=i,1):0})},debounce(t){const e=lc();return this.targets().add(lc(null,null,mO(t,i=>{const n=i.dataflow;e.receive(i),n&&n.run&&n.run()}))),e},between(t,e){let i=!1;return t.targets().add(lc(null,null,()=>i=!0)),e.targets().add(lc(null,null,()=>i=!1)),this.filter(()=>i)},detach(){this._filter=Ar,this._targets=null}};function uye(t,e,i,n){const s=this,a=lc(i,n),c=function(u){u.dataflow=s;try{a.receive(u)}catch(o){s.error(o)}finally{s.run()}};let d;typeof t=="string"&&typeof document<"u"?d=document.querySelectorAll(t):d=ke(t);const f=d.length;for(let u=0;u<f;++u)d[u].addEventListener(e,c);return a}function hye(t,e){const i=this.locale();return VV(t,e,i.timeParse,i.utcParse)}function pye(t,e,i){return e=this.parse(e,i),this.pulse(t,this.changeset().insert(e))}async function _ye(t,e){const i=this;let n=0,s;try{s=await i.loader().load(t,{context:"dataflow",response:GV(e&&e.type)});try{s=i.parse(s,e)}catch(a){n=-2,i.warn("Data ingestion failed",t,a)}}catch(a){n=-1,i.warn("Loading failed",t,a)}return{data:s,status:n}}async function yye(t,e,i){const n=this,s=n._pending||gye(n);s.requests+=1;const a=await n.request(e,i);return n.pulse(t,n.changeset().remove(Ar).insert(a.data||[])),s.done(),a}function gye(t){let e;const i=new Promise(n=>e=n);return i.requests=0,i.done=()=>{--i.requests===0&&(t._pending=null,e(t))},t._pending=i}const mye={skip:!0};function wye(t,e,i,n,s){return(t instanceof oi?Tye:bye)(this,t,e,i,n,s),this}function bye(t,e,i,n,s,a){const c=yt({},a,mye);let d,f;gt(i)||(i=Ln(i)),n===void 0?d=u=>t.touch(i(u)):gt(n)?(f=new oi(null,n,s,!1),d=u=>{f.evaluate(u);const o=i(u),g=f.value;XV(g)?t.pulse(o,g,a):t.update(o,g,c)}):d=u=>t.update(i(u),n,c),e.apply(d)}function Tye(t,e,i,n,s,a){if(n===void 0)e.targets().add(i);else{const c=a||{},d=new oi(null,vye(i,n),s,!1);d.modified(c.force),d.rank=e.rank,e.targets().add(d),i&&(d.skip(!0),d.value=i.value,d.targets().add(i),t.connect(i,[d]))}}function vye(t,e){return e=gt(e)?e:Ln(e),t?function(i,n){const s=e(i,n);return t.skip()||(t.skip(s!==this.value).value=s),s}:e}function Eye(t){t.rank=++this._rank}function Sye(t){const e=[t];let i,n,s;for(;e.length;)if(this.rank(i=e.pop()),n=i._targets)for(s=n.length;--s>=0;)e.push(i=n[s]),i===t&&de("Cycle detected in dataflow graph.")}const uv={},za=1<<0,yc=1<<1,rl=1<<2,xye=za|yc,Y4=za|rl,Ku=za|yc|rl,X4=1<<3,J_=1<<4,K4=1<<5,J4=1<<6;function Nc(t,e,i){this.dataflow=t,this.stamp=e??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=i||null}function TB(t,e){const i=[];return _c(t,e,n=>i.push(n)),i}function Q4(t,e){const i={};return t.visit(e,n=>{i[Le(n)]=1}),n=>i[Le(n)]?null:n}function d0(t,e){return t?(i,n)=>t(i,n)&&e(i,n):e}Nc.prototype={StopPropagation:uv,ADD:za,REM:yc,MOD:rl,ADD_REM:xye,ADD_MOD:Y4,ALL:Ku,REFLOW:X4,SOURCE:J_,NO_SOURCE:K4,NO_FIELDS:J4,fork(t){return new Nc(this.dataflow).init(this,t)},clone(){const t=this.fork(Ku);return t.add=t.add.slice(),t.rem=t.rem.slice(),t.mod=t.mod.slice(),t.source&&(t.source=t.source.slice()),t.materialize(Ku|J_)},addAll(){let t=this;return!t.source||t.add===t.rem||!t.rem.length&&t.source.length===t.add.length||(t=new Nc(this.dataflow).init(this),t.add=t.source,t.rem=[]),t},init(t,e){const i=this;return i.stamp=t.stamp,i.encode=t.encode,t.fields&&!(e&J4)&&(i.fields=t.fields),e&za?(i.addF=t.addF,i.add=t.add):(i.addF=null,i.add=[]),e&yc?(i.remF=t.remF,i.rem=t.rem):(i.remF=null,i.rem=[]),e&rl?(i.modF=t.modF,i.mod=t.mod):(i.modF=null,i.mod=[]),e&K4?(i.srcF=null,i.source=null):(i.srcF=t.srcF,i.source=t.source,t.cleans&&(i.cleans=t.cleans)),i},runAfter(t){this.dataflow.runAfter(t)},changed(t){const e=t||Ku;return e&za&&this.add.length||e&yc&&this.rem.length||e&rl&&this.mod.length},reflow(t){if(t)return this.fork(Ku).reflow();const e=this.add.length,i=this.source&&this.source.length;return i&&i!==e&&(this.mod=this.source,e&&this.filter(rl,Q4(this,za))),this},clean(t){return arguments.length?(this.cleans=!!t,this):this.cleans},modifies(t){const e=this.fields||(this.fields={});return ue(t)?t.forEach(i=>e[i]=!0):e[t]=!0,this},modified(t,e){const i=this.fields;return(e||this.mod.length)&&i?arguments.length?ue(t)?t.some(n=>i[n]):i[t]:!!i:!1},filter(t,e){const i=this;return t&za&&(i.addF=d0(i.addF,e)),t&yc&&(i.remF=d0(i.remF,e)),t&rl&&(i.modF=d0(i.modF,e)),t&J_&&(i.srcF=d0(i.srcF,e)),i},materialize(t){t=t||Ku;const e=this;return t&za&&e.addF&&(e.add=TB(e.add,e.addF),e.addF=null),t&yc&&e.remF&&(e.rem=TB(e.rem,e.remF),e.remF=null),t&rl&&e.modF&&(e.mod=TB(e.mod,e.modF),e.modF=null),t&J_&&e.srcF&&(e.source=e.source.filter(e.srcF),e.srcF=null),e},visit(t,e){const i=this,n=e;if(t&J_)return _c(i.source,i.srcF,n),i;t&za&&_c(i.add,i.addF,n),t&yc&&_c(i.rem,i.remF,n),t&rl&&_c(i.mod,i.modF,n);const s=i.source;if(t&X4&&s){const a=i.add.length+i.mod.length;a===s.length||(a?_c(s,Q4(i,Y4),n):_c(s,i.srcF,n))}return i}};function AO(t,e,i,n){const s=this;let a=0;this.dataflow=t,this.stamp=e,this.fields=null,this.encode=n||null,this.pulses=i;for(const c of i)if(c.stamp===e){if(c.fields){const d=s.fields||(s.fields={});for(const f in c.fields)d[f]=1}c.changed(s.ADD)&&(a|=s.ADD),c.changed(s.REM)&&(a|=s.REM),c.changed(s.MOD)&&(a|=s.MOD)}this.changes=a}Ee(AO,Nc,{fork(t){const e=new Nc(this.dataflow).init(this,t&this.NO_FIELDS);return t!==void 0&&(t&e.ADD&&this.visit(e.ADD,i=>e.add.push(i)),t&e.REM&&this.visit(e.REM,i=>e.rem.push(i)),t&e.MOD&&this.visit(e.MOD,i=>e.mod.push(i))),e},changed(t){return this.changes&t},modified(t){const e=this,i=e.fields;return i&&e.changes&e.MOD?ue(t)?t.some(n=>i[n]):i[t]:0},filter(){de("MultiPulse does not support filtering.")},materialize(){de("MultiPulse does not support materialization.")},visit(t,e){const i=this,n=i.pulses,s=n.length;let a=0;if(t&i.SOURCE)for(;a<s;++a)n[a].visit(t,e);else for(;a<s;++a)n[a].stamp===i.stamp&&n[a].visit(t,e);return i}});async function Bye(t,e,i){const n=this,s=[];if(n._pulse)return KV(n);if(n._pending&&await n._pending,e&&await oT(n,e),!n._touched.length)return n.debug("Dataflow invoked, but nothing to do."),n;const a=++n._clock;n._pulse=new Nc(n,a,t),n._touched.forEach(o=>n._enqueue(o,!0)),n._touched=JE(Gm);let c=0,d,f,u;try{for(;n._heap.size()>0;){if(d=n._heap.pop(),d.rank!==d.qrank){n._enqueue(d,!0);continue}f=d.run(n._getPulse(d,t)),f.then?f=await f:f.async&&(s.push(f.async),f=uv),f!==uv&&d._targets&&d._targets.forEach(o=>n._enqueue(o)),++c}}catch(o){n._heap.clear(),u=o}if(n._input={},n._pulse=null,n.debug(`Pulse ${a}: ${c} operators`),u&&(n._postrun=[],n.error(u)),n._postrun.length){const o=n._postrun.sort((g,w)=>w.priority-g.priority);n._postrun=[];for(let g=0;g<o.length;++g)await oT(n,o[g].callback)}return i&&await oT(n,i),s.length&&Promise.all(s).then(o=>n.runAsync(null,()=>{o.forEach(g=>{try{g(n)}catch(w){n.error(w)}})})),n}async function Iye(t,e,i){for(;this._running;)await this._running;const n=()=>this._running=null;return(this._running=this.evaluate(t,e,i)).then(n,n),this._running}function kye(t,e,i){return this._pulse?KV(this):(this.evaluate(t,e,i),this)}function Fye(t,e,i){if(this._pulse||e)this._postrun.push({priority:i||0,callback:t});else try{t(this)}catch(n){this.error(n)}}function KV(t){return t.error("Dataflow already running. Use runAsync() to chain invocations."),t}function Mye(t,e){const i=t.stamp<this._clock;i&&(t.stamp=this._clock),(i||e)&&(t.qrank=t.rank,this._heap.push(t))}function Aye(t,e){const i=t.source,n=this._clock;return i&&ue(i)?new AO(this,n,i.map(s=>s.pulse),e):this._input[t.id]||Oye(this._pulse,i&&i.pulse)}function Oye(t,e){return e&&e.stamp===t.stamp?e:(t=t.fork(),e&&e!==uv&&(t.source=e.source),t)}const OO={skip:!1,force:!1};function Nye(t,e){const i=e||OO;return this._pulse?this._enqueue(t):this._touched.add(t),i.skip&&t.skip(!0),this}function Cye(t,e,i){const n=i||OO;return(t.set(e)||n.force)&&this.touch(t,n),this}function Rye(t,e,i){this.touch(t,i||OO);const n=new Nc(this,this._clock+(this._pulse?0:1)),s=t.pulse&&t.pulse.source||[];return n.target=t,this._input[t.id]=e.pulse(n,s),this}function Lye(t){let e=[];return{clear:()=>e=[],size:()=>e.length,peek:()=>e[0],push:i=>(e.push(i),JV(e,0,e.length-1,t)),pop:()=>{const i=e.pop();let n;return e.length?(n=e[0],e[0]=i,Dye(e,0,t)):n=i,n}}}function JV(t,e,i,n){let s,a;const c=t[i];for(;i>e;){if(a=i-1>>1,s=t[a],n(c,s)<0){t[i]=s,i=a;continue}break}return t[i]=c}function Dye(t,e,i){const n=e,s=t.length,a=t[e];let c=(e<<1)+1,d;for(;c<s;)d=c+1,d<s&&i(t[c],t[d])>=0&&(c=d),t[e]=t[c],e=c,c=(e<<1)+1;return t[e]=a,JV(t,n,e,i)}function np(){this.logger(hO()),this.logLevel(fO),this._clock=0,this._rank=0,this._locale=BO();try{this._loader=KE()}catch{}this._touched=JE(Gm),this._input={},this._pulse=null,this._heap=Lye((t,e)=>t.qrank-e.qrank),this._postrun=[]}function Q_(t){return function(){return this._log[t].apply(this,arguments)}}np.prototype={stamp(){return this._clock},loader(t){return arguments.length?(this._loader=t,this):this._loader},locale(t){return arguments.length?(this._locale=t,this):this._locale},logger(t){return arguments.length?(this._log=t,this):this._log},error:Q_("error"),warn:Q_("warn"),info:Q_("info"),debug:Q_("debug"),logLevel:Q_("level"),cleanThreshold:1e4,add:cye,connect:dye,rank:Eye,rerank:Sye,pulse:Rye,touch:Nye,update:Cye,changeset:Ou,ingest:pye,parse:hye,preload:yye,request:_ye,events:uye,on:wye,evaluate:Bye,run:kye,runAsync:Iye,runAfter:Fye,_enqueue:Mye,_getPulse:Aye};function ae(t,e){oi.call(this,t,null,e)}Ee(ae,oi,{run(t){if(t.stamp<this.stamp)return t.StopPropagation;let e;return this.skip()?this.skip(!1):e=this.evaluate(t),e=e||t,e.then?e=e.then(i=>this.pulse=i):e!==t.StopPropagation&&(this.pulse=e),e},evaluate(t){const e=this.marshall(t.stamp),i=this.transform(e,t);return e.clear(),i},transform(){}});const jp={};function QV(t){const e=ZV(t);return e&&e.Definition||null}function ZV(t){return t=t&&t.toLowerCase(),Pe(jp,t)?jp[t]:null}function Pye(t){return e=>{const i=t.length;let n=1,s=String(t[0](e));for(;n<i;++n)s+="|"+t[n](e);return s}}function Kk(t){return!t||!t.length?function(){return""}:t.length===1?t[0]:Pye(t)}function eW(t,e,i){return i||t+(e?"_"+e:"")}const vB=()=>{},$ye={init:vB,add:vB,rem:vB,idx:0},Vg={values:{init:t=>t.cell.store=!0,value:t=>t.cell.data.values(),idx:-1},count:{value:t=>t.cell.num},__count__:{value:t=>t.missing+t.valid},missing:{value:t=>t.missing},valid:{value:t=>t.valid},sum:{init:t=>t.sum=0,value:t=>t.sum,add:(t,e)=>t.sum+=+e,rem:(t,e)=>t.sum-=e},product:{init:t=>t.product=1,value:t=>t.valid?t.product:void 0,add:(t,e)=>t.product*=e,rem:(t,e)=>t.product/=e},mean:{init:t=>t.mean=0,value:t=>t.valid?t.mean:void 0,add:(t,e)=>(t.mean_d=e-t.mean,t.mean+=t.mean_d/t.valid),rem:(t,e)=>(t.mean_d=e-t.mean,t.mean-=t.valid?t.mean_d/t.valid:t.mean)},average:{value:t=>t.valid?t.mean:void 0,req:["mean"],idx:1},variance:{init:t=>t.dev=0,value:t=>t.valid>1?t.dev/(t.valid-1):void 0,add:(t,e)=>t.dev+=t.mean_d*(e-t.mean),rem:(t,e)=>t.dev-=t.mean_d*(e-t.mean),req:["mean"],idx:1},variancep:{value:t=>t.valid>1?t.dev/t.valid:void 0,req:["variance"],idx:2},stdev:{value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:t=>t.valid>1?Math.sqrt(t.dev/t.valid):void 0,req:["variance"],idx:2},stderr:{value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid*(t.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:t=>t.cell.data.distinct(t.get),req:["values"],idx:3},ci0:{value:t=>t.cell.data.ci0(t.get),req:["values"],idx:3},ci1:{value:t=>t.cell.data.ci1(t.get),req:["values"],idx:3},median:{value:t=>t.cell.data.q2(t.get),req:["values"],idx:3},q1:{value:t=>t.cell.data.q1(t.get),req:["values"],idx:3},q3:{value:t=>t.cell.data.q3(t.get),req:["values"],idx:3},min:{init:t=>t.min=void 0,value:t=>t.min=Number.isNaN(t.min)?t.cell.data.min(t.get):t.min,add:(t,e)=>{(e<t.min||t.min===void 0)&&(t.min=e)},rem:(t,e)=>{e<=t.min&&(t.min=NaN)},req:["values"],idx:4},max:{init:t=>t.max=void 0,value:t=>t.max=Number.isNaN(t.max)?t.cell.data.max(t.get):t.max,add:(t,e)=>{(e>t.max||t.max===void 0)&&(t.max=e)},rem:(t,e)=>{e>=t.max&&(t.max=NaN)},req:["values"],idx:4},argmin:{init:t=>t.argmin=void 0,value:t=>t.argmin||t.cell.data.argmin(t.get),add:(t,e,i)=>{e<t.min&&(t.argmin=i)},rem:(t,e)=>{e<=t.min&&(t.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:t=>t.argmax=void 0,value:t=>t.argmax||t.cell.data.argmax(t.get),add:(t,e,i)=>{e>t.max&&(t.argmax=i)},rem:(t,e)=>{e>=t.max&&(t.argmax=void 0)},req:["max","values"],idx:3}},Wm=Object.keys(Vg).filter(t=>t!=="__count__");function Uye(t,e){return i=>yt({name:t,out:i||t},$ye,e)}[...Wm,"__count__"].forEach(t=>{Vg[t]=Uye(t,Vg[t])});function tW(t,e){return Vg[t](e)}function iW(t,e){return t.idx-e.idx}function zye(t){const e={};t.forEach(n=>e[n.name]=n);const i=n=>{n.req&&n.req.forEach(s=>{e[s]||i(e[s]=Vg[s]())})};return t.forEach(i),Object.values(e).sort(iW)}function jye(){this.valid=0,this.missing=0,this._ops.forEach(t=>t.init(this))}function qye(t,e){if(t==null||t===""){++this.missing;return}t===t&&(++this.valid,this._ops.forEach(i=>i.add(this,t,e)))}function Gye(t,e){if(t==null||t===""){--this.missing;return}t===t&&(--this.valid,this._ops.forEach(i=>i.rem(this,t,e)))}function Vye(t){return this._out.forEach(e=>t[e.out]=e.value(this)),t}function nW(t,e){const i=e||Rn,n=zye(t),s=t.slice().sort(iW);function a(c){this._ops=n,this._out=s,this.cell=c,this.init()}return a.prototype.init=jye,a.prototype.add=qye,a.prototype.rem=Gye,a.prototype.set=Vye,a.prototype.get=i,a.fields=t.map(c=>c.out),a}function NO(t){this._key=t?Fs(t):Le,this.reset()}const bn=NO.prototype;bn.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};bn.add=function(t){this._add.push(t)};bn.rem=function(t){this._rem.push(t)};bn.values=function(){if(this._get=null,this._rem.length===0)return this._add;const t=this._add,e=this._rem,i=this._key,n=t.length,s=e.length,a=Array(n-s),c={};let d,f,u;for(d=0;d<s;++d)c[i(e[d])]=1;for(d=0,f=0;d<n;++d)c[i(u=t[d])]?c[i(u)]=0:a[f++]=u;return this._rem=[],this._add=a};bn.distinct=function(t){const e=this.values(),i={};let n=e.length,s=0,a;for(;--n>=0;)a=t(e[n])+"",Pe(i,a)||(i[a]=1,++s);return s};bn.extent=function(t){if(this._get!==t||!this._ext){const e=this.values(),i=sV(e,t);this._ext=[e[i[0]],e[i[1]]],this._get=t}return this._ext};bn.argmin=function(t){return this.extent(t)[0]||{}};bn.argmax=function(t){return this.extent(t)[1]||{}};bn.min=function(t){const e=this.extent(t)[0];return e!=null?t(e):void 0};bn.max=function(t){const e=this.extent(t)[1];return e!=null?t(e):void 0};bn.quartile=function(t){return(this._get!==t||!this._q)&&(this._q=pA(this.values(),t),this._get=t),this._q};bn.q1=function(t){return this.quartile(t)[0]};bn.q2=function(t){return this.quartile(t)[1]};bn.q3=function(t){return this.quartile(t)[2]};bn.ci=function(t){return(this._get!==t||!this._ci)&&(this._ci=L7(this.values(),1e3,.05,t),this._get=t),this._ci};bn.ci0=function(t){return this.ci(t)[0]};bn.ci1=function(t){return this.ci(t)[1]};function Kc(t){ae.call(this,null,t),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Kc.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Wm},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};Ee(Kc,ae,{transform(t,e){const i=this,n=e.fork(e.NO_SOURCE|e.NO_FIELDS),s=t.modified();return i.stamp=n.stamp,i.value&&(s||e.modified(i._inputs,!0))?(i._prev=i.value,i.value=s?i.init(t):Object.create(null),e.visit(e.SOURCE,a=>i.add(a))):(i.value=i.value||i.init(t),e.visit(e.REM,a=>i.rem(a)),e.visit(e.ADD,a=>i.add(a))),n.modifies(i._outputs),i._drop=t.drop!==!1,t.cross&&i._dims.length>1&&(i._drop=!1,i.cross()),e.clean()&&i._drop&&n.clean(!0).runAfter(()=>this.clean()),i.changes(n)},cross(){const t=this,e=t.value,i=t._dnames,n=i.map(()=>({})),s=i.length;function a(d){let f,u,o,g;for(f in d)for(o=d[f].tuple,u=0;u<s;++u)n[u][g=o[i[u]]]=g}a(t._prev),a(e);function c(d,f,u){const o=i[u],g=n[u++];for(const w in g){const m=d?d+"|"+w:w;f[o]=g[w],u<s?c(m,f,u):e[m]||t.cell(m,f)}}c("",{},0)},init(t){const e=this._inputs=[],i=this._outputs=[],n={};function s(b){const S=ke(Mn(b)),x=S.length;let B=0,F;for(;B<x;++B)n[F=S[B]]||(n[F]=1,e.push(F))}this._dims=ke(t.groupby),this._dnames=this._dims.map(b=>{const S=Ai(b);return s(b),i.push(S),S}),this.cellkey=t.key?t.key:Kk(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const a=t.fields||[null],c=t.ops||["count"],d=t.as||[],f=a.length,u={};let o,g,w,m,l,T;for(f!==c.length&&de("Unmatched number of fields and aggregate ops."),T=0;T<f;++T){if(o=a[T],g=c[T],o==null&&g!=="count"&&de("Null aggregate field specified."),m=Ai(o),l=eW(g,m,d[T]),i.push(l),g==="count"){this._counts.push(l);continue}w=u[m],w||(s(o),w=u[m]=[],w.field=o,this._measures.push(w)),g!=="count"&&(this._countOnly=!1),w.push(tW(g,l))}return this._measures=this._measures.map(b=>nW(b,b.field)),Object.create(null)},cellkey:Kk(),cell(t,e){let i=this.value[t];return i?i.num===0&&this._drop&&i.stamp<this.stamp?(i.stamp=this.stamp,this._adds[this._alen++]=i):i.stamp<this.stamp&&(i.stamp=this.stamp,this._mods[this._mlen++]=i):(i=this.value[t]=this.newcell(t,e),this._adds[this._alen++]=i),i},newcell(t,e){const i={key:t,num:0,agg:null,tuple:this.newtuple(e,this._prev&&this._prev[t]),stamp:this.stamp,store:!1};if(!this._countOnly){const n=this._measures,s=n.length;i.agg=Array(s);for(let a=0;a<s;++a)i.agg[a]=new n[a](i)}return i.store&&(i.data=new NO),i},newtuple(t,e){const i=this._dnames,n=this._dims,s=n.length,a={};for(let c=0;c<s;++c)a[i[c]]=n[c](t);return e?YV(e.tuple,a):Gt(a)},clean(){const t=this.value;for(const e in t)t[e].num===0&&delete t[e]},add(t){const e=this.cellkey(t),i=this.cell(e,t);if(i.num+=1,this._countOnly)return;i.store&&i.data.add(t);const n=i.agg;for(let s=0,a=n.length;s<a;++s)n[s].add(n[s].get(t),t)},rem(t){const e=this.cellkey(t),i=this.cell(e,t);if(i.num-=1,this._countOnly)return;i.store&&i.data.rem(t);const n=i.agg;for(let s=0,a=n.length;s<a;++s)n[s].rem(n[s].get(t),t)},celltuple(t){const e=t.tuple,i=this._counts;t.store&&t.data.values();for(let n=0,s=i.length;n<s;++n)e[i[n]]=t.num;if(!this._countOnly){const n=t.agg;for(let s=0,a=n.length;s<a;++s)n[s].set(e)}return e},changes(t){const e=this._adds,i=this._mods,n=this._prev,s=this._drop,a=t.add,c=t.rem,d=t.mod;let f,u,o,g;if(n)for(u in n)f=n[u],(!s||f.num)&&c.push(f.tuple);for(o=0,g=this._alen;o<g;++o)a.push(this.celltuple(e[o])),e[o]=null;for(o=0,g=this._mlen;o<g;++o)f=i[o],(f.num===0&&s?c:d).push(this.celltuple(f)),i[o]=null;return this._alen=this._mlen=0,this._prev=null,t}});const Wye=1e-14;function CO(t){ae.call(this,null,t)}CO.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};Ee(CO,ae,{transform(t,e){const i=t.interval!==!1,n=this._bins(t),s=n.start,a=n.step,c=t.as||["bin0","bin1"],d=c[0],f=c[1];let u;return t.modified()?(e=e.reflow(!0),u=e.SOURCE):u=e.modified(Mn(t.field))?e.ADD_MOD:e.ADD,e.visit(u,i?o=>{const g=n(o);o[d]=g,o[f]=g==null?null:s+a*(1+(g-s)/a)}:o=>o[d]=n(o)),e.modifies(i?c:d)},_bins(t){if(this.value&&!t.modified())return this.value;const e=t.field,i=yA(t),n=i.step;let s=i.start,a=s+Math.ceil((i.stop-s)/n)*n,c,d;(c=t.anchor)!=null&&(d=c-(s+n*Math.floor((c-s)/n)),s+=d,a+=d);const f=function(u){let o=In(e(u));return o==null?null:o<s?-1/0:o>a?1/0:(o=Math.max(s,Math.min(o,a-n)),s+n*Math.floor(Wye+(o-s)/n))};return f.start=s,f.stop=i.stop,f.step=n,this.value=Ds(f,Mn(e),t.name||"bin_"+Ai(e))}});function sW(t,e,i){const n=t;let s=e||[],a=i||[],c={},d=0;return{add:f=>a.push(f),remove:f=>c[n(f)]=++d,size:()=>s.length,data:(f,u)=>(d&&(s=s.filter(o=>!c[n(o)]),c={},d=0),u&&f&&s.sort(f),a.length&&(s=f?dV(f,s,a.sort(f)):s.concat(a),a=[]),s)}}function RO(t){ae.call(this,[],t)}RO.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};Ee(RO,ae,{transform(t,e){const i=e.fork(e.ALL),n=sW(Le,this.value,i.materialize(i.ADD).add),s=t.sort,a=e.changed()||s&&(t.modified("sort")||e.modified(s.fields));return i.visit(i.REM,n.remove),this.modified(a),this.value=i.source=n.data(Au(s),a),e.source&&e.source.root&&(this.value.root=e.source.root),i}});function rW(t){oi.call(this,null,Hye,t)}Ee(rW,oi);function Hye(t){return this.value&&!t.modified()?this.value:gO(t.fields,t.orders)}function LO(t){ae.call(this,null,t)}LO.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function Yye(t,e,i){switch(e){case"upper":t=t.toUpperCase();break;case"lower":t=t.toLowerCase();break}return t.match(i)}Ee(LO,ae,{transform(t,e){const i=g=>w=>{for(var m=Yye(d(w),t.case,a)||[],l,T=0,b=m.length;T<b;++T)c.test(l=m[T])||g(l)},n=this._parameterCheck(t,e),s=this._counts,a=this._match,c=this._stop,d=t.field,f=t.as||["text","count"],u=i(g=>s[g]=1+(s[g]||0)),o=i(g=>s[g]-=1);return n?e.visit(e.SOURCE,u):(e.visit(e.ADD,u),e.visit(e.REM,o)),this._finish(e,f)},_parameterCheck(t,e){let i=!1;return(t.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(t.stopwords||"")+"$","i"),i=!0),(t.modified("pattern")||!this._match)&&(this._match=new RegExp(t.pattern||"[\\w']+","g"),i=!0),(t.modified("field")||e.modified(t.field.fields))&&(i=!0),i&&(this._counts={}),i},_finish(t,e){const i=this._counts,n=this._tuples||(this._tuples={}),s=e[0],a=e[1],c=t.fork(t.NO_SOURCE|t.NO_FIELDS);let d,f,u;for(d in i)f=n[d],u=i[d]||0,!f&&u?(n[d]=f=Gt({}),f[s]=d,f[a]=u,c.add.push(f)):u===0?(f&&c.rem.push(f),i[d]=null,n[d]=null):f[a]!==u&&(f[a]=u,c.mod.push(f));return c.modifies(e)}});function DO(t){ae.call(this,null,t)}DO.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};Ee(DO,ae,{transform(t,e){const i=e.fork(e.NO_SOURCE),n=t.as||["a","b"],s=n[0],a=n[1],c=!this.value||e.changed(e.ADD_REM)||t.modified("as")||t.modified("filter");let d=this.value;return c?(d&&(i.rem=d),d=e.materialize(e.SOURCE).source,i.add=this.value=Xye(d,s,a,t.filter||Ar)):i.mod=d,i.source=this.value,i.modifies(n)}});function Xye(t,e,i,n){for(var s=[],a={},c=t.length,d=0,f,u;d<c;++d)for(a[e]=u=t[d],f=0;f<c;++f)a[i]=t[f],n(a)&&(s.push(Gt(a)),a={},a[e]=u);return s}const Z4={kde:wA,mixture:U7,normal:mA,lognormal:$7,uniform:z7},Kye="distributions",e6="function",Jye="field";function aW(t,e){const i=t[e6];Pe(Z4,i)||de("Unknown distribution function: "+i);const n=Z4[i]();for(const s in t)s===Jye?n.data((t.from||e()).map(t[s])):s===Kye?n[s](t[s].map(a=>aW(a,e))):typeof n[s]===e6&&n[s](t[s]);return n}function PO(t){ae.call(this,null,t)}const oW=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],Qye={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:oW},{name:"weights",type:"number",array:!0}]};PO.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:oW.concat(Qye)},{name:"as",type:"string",array:!0,default:["value","density"]}]};Ee(PO,ae,{transform(t,e){const i=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const n=aW(t.distribution,Zye(e)),s=t.steps||t.minsteps||25,a=t.steps||t.maxsteps||200;let c=t.method||"pdf";c!=="pdf"&&c!=="cdf"&&de("Invalid density method: "+c),!t.extent&&!n.data&&de("Missing density extent parameter."),c=n[c];const d=t.as||["value","density"],f=t.extent||xo(n.data()),u=UE(c,f,s,a).map(o=>{const g={};return g[d[0]]=o[0],g[d[1]]=o[1],Gt(g)});this.value&&(i.rem=this.value),this.value=i.add=i.source=u}return i}});function Zye(t){return()=>t.materialize(t.SOURCE).source}function lW(t,e){return t?t.map((i,n)=>e[n]||Ai(i)):null}function $O(t,e,i){const n=[],s=g=>g(f);let a,c,d,f,u,o;if(e==null)n.push(t.map(i));else for(a={},c=0,d=t.length;c<d;++c)f=t[c],u=e.map(s),o=a[u],o||(a[u]=o=[],o.dims=u,n.push(o)),o.push(i(f));return n}const cW="bin";function UO(t){ae.call(this,null,t)}UO.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:cW}]};const ege=(t,e)=>Vm(xo(t,e))/30;Ee(UO,ae,{transform(t,e){if(this.value&&!(t.modified()||e.changed()))return e;const i=e.materialize(e.SOURCE).source,n=$O(e.source,t.groupby,Rn),s=t.smooth||!1,a=t.field,c=t.step||ege(i,a),d=Au((l,T)=>a(l)-a(T)),f=t.as||cW,u=n.length;let o=1/0,g=-1/0,w=0,m;for(;w<u;++w){const l=n[w].sort(d);m=-1;for(const T of D7(l,c,s,a))T<o&&(o=T),T>g&&(g=T),l[++m][f]=T}return this.value={start:o,stop:g,step:c},e.reflow(!0).modifies(f)}});function dW(t){oi.call(this,null,tge,t),this.modified(!0)}Ee(dW,oi);function tge(t){const e=t.expr;return this.value&&!t.modified("expr")?this.value:Ds(i=>e(i,t),Mn(e),Ai(e))}function zO(t){ae.call(this,[void 0,void 0],t)}zO.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};Ee(zO,ae,{transform(t,e){const i=this.value,n=t.field,s=e.changed()||e.modified(n.fields)||t.modified("field");let a=i[0],c=i[1];if((s||a==null)&&(a=1/0,c=-1/0),e.visit(s?e.SOURCE:e.ADD,d=>{const f=In(n(d));f!=null&&(f<a&&(a=f),f>c&&(c=f))}),!Number.isFinite(a)||!Number.isFinite(c)){let d=Ai(n);d&&(d=` for field "${d}"`),e.dataflow.warn(`Infinite extent${d}: [${a}, ${c}]`),a=c=void 0}this.value=[a,c]}});function jO(t,e){oi.call(this,t),this.parent=e,this.count=0}Ee(jO,oi,{connect(t){return this.detachSubflow=t.detachSubflow,this.targets().add(t),t.source=this},add(t){this.count+=1,this.value.add.push(t)},rem(t){this.count-=1,this.value.rem.push(t)},mod(t){this.value.mod.push(t)},init(t){this.value.init(t,t.NO_SOURCE)},evaluate(){return this.value}});function iS(t){ae.call(this,{},t),this._keys=E_();const e=this._targets=[];e.active=0,e.forEach=i=>{for(let n=0,s=e.active;n<s;++n)i(e[n],n,e)}}Ee(iS,ae,{activate(t){this._targets[this._targets.active++]=t},subflow(t,e,i,n){const s=this.value;let a=Pe(s,t)&&s[t],c,d;return a?a.value.stamp<i.stamp&&(a.init(i),this.activate(a)):(d=n||(d=this._group[t])&&d.tuple,c=i.dataflow,a=new jO(i.fork(i.NO_SOURCE),this),c.add(a).connect(e(c,t,d)),s[t]=a,this.activate(a)),a},clean(){const t=this.value;let e=0;for(const i in t)if(t[i].count===0){const n=t[i].detachSubflow;n&&n(),delete t[i],++e}if(e){const i=this._targets.filter(n=>n&&n.count>0);this.initTargets(i)}},initTargets(t){const e=this._targets,i=e.length,n=t?t.length:0;let s=0;for(;s<n;++s)e[s]=t[s];for(;s<i&&e[s]!=null;++s)e[s]=null;e.active=n},transform(t,e){const i=e.dataflow,n=t.key,s=t.subflow,a=this._keys,c=t.modified("key"),d=f=>this.subflow(f,s,e);return this._group=t.group||{},this.initTargets(),e.visit(e.REM,f=>{const u=Le(f),o=a.get(u);o!==void 0&&(a.delete(u),d(o).rem(f))}),e.visit(e.ADD,f=>{const u=n(f);a.set(Le(f),u),d(u).add(f)}),c||e.modified(n.fields)?e.visit(e.MOD,f=>{const u=Le(f),o=a.get(u),g=n(f);o===g?d(g).mod(f):(a.set(u,g),d(o).rem(f),d(g).add(f))}):e.changed(e.MOD)&&e.visit(e.MOD,f=>{d(a.get(Le(f))).mod(f)}),c&&e.visit(e.REFLOW,f=>{const u=Le(f),o=a.get(u),g=n(f);o!==g&&(a.set(u,g),d(o).rem(f),d(g).add(f))}),e.clean()?i.runAfter(()=>{this.clean(),a.clean()}):a.empty>i.cleanThreshold&&i.runAfter(a.clean),e}});function fW(t){oi.call(this,null,ige,t)}Ee(fW,oi);function ige(t){return this.value&&!t.modified()?this.value:ue(t.name)?ke(t.name).map(e=>Fs(e)):Fs(t.name,t.as)}function qO(t){ae.call(this,E_(),t)}qO.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};Ee(qO,ae,{transform(t,e){const i=e.dataflow,n=this.value,s=e.fork(),a=s.add,c=s.rem,d=s.mod,f=t.expr;let u=!0;e.visit(e.REM,g=>{const w=Le(g);n.has(w)?n.delete(w):c.push(g)}),e.visit(e.ADD,g=>{f(g,t)?a.push(g):n.set(Le(g),1)});function o(g){const w=Le(g),m=f(g,t),l=n.get(w);m&&l?(n.delete(w),a.push(g)):!m&&!l?(n.set(w,1),c.push(g)):u&&m&&!l&&d.push(g)}return e.visit(e.MOD,o),t.modified()&&(u=!1,e.visit(e.REFLOW,o)),n.empty>i.cleanThreshold&&i.runAfter(n.clean),s}});function GO(t){ae.call(this,[],t)}GO.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};Ee(GO,ae,{transform(t,e){const i=e.fork(e.NO_SOURCE),n=t.fields,s=lW(n,t.as||[]),a=t.index||null,c=s.length;return i.rem=this.value,e.visit(e.SOURCE,d=>{const f=n.map(l=>l(d)),u=f.reduce((l,T)=>Math.max(l,T.length),0);let o=0,g,w,m;for(;o<u;++o){for(w=MO(d),g=0;g<c;++g)w[s[g]]=(m=f[g][o])==null?null:m;a&&(w[a]=o),i.add.push(w)}}),this.value=i.source=i.add,a&&i.modifies(a),i.modifies(s)}});function VO(t){ae.call(this,[],t)}VO.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};Ee(VO,ae,{transform(t,e){const i=e.fork(e.NO_SOURCE),n=t.fields,s=n.map(Ai),a=t.as||["key","value"],c=a[0],d=a[1],f=n.length;return i.rem=this.value,e.visit(e.SOURCE,u=>{for(let o=0,g;o<f;++o)g=MO(u),g[c]=s[o],g[d]=n[o](u),i.add.push(g)}),this.value=i.source=i.add,i.modifies(a)}});function WO(t){ae.call(this,null,t)}WO.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};Ee(WO,ae,{transform(t,e){const i=t.expr,n=t.as,s=t.modified(),a=t.initonly?e.ADD:s?e.SOURCE:e.modified(i.fields)||e.modified(n)?e.ADD_MOD:e.ADD;return s&&(e=e.materialize().reflow(!0)),t.initonly||e.modifies(n),e.visit(a,c=>c[n]=i(c,t))}});function uW(t){ae.call(this,[],t)}Ee(uW,ae,{transform(t,e){const i=e.fork(e.ALL),n=t.generator;let s=this.value,a=t.size-s.length,c,d,f;if(a>0){for(c=[];--a>=0;)c.push(f=Gt(n(t))),s.push(f);i.add=i.add.length?i.materialize(i.ADD).add.concat(c):c}else d=s.slice(0,-a),i.rem=i.rem.length?i.materialize(i.REM).rem.concat(d):d,s=s.slice(-a);return i.source=this.value=s,i}});const f0={value:"value",median:u5,mean:Sse,min:UI,max:Ff},nge=[];function HO(t){ae.call(this,[],t)}HO.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function sge(t){var e=t.method||f0.value,i;if(f0[e]==null)de("Unrecognized imputation method: "+e);else return e===f0.value?(i=t.value!==void 0?t.value:0,()=>i):f0[e]}function rge(t){const e=t.field;return i=>i?e(i):NaN}Ee(HO,ae,{transform(t,e){var i=e.fork(e.ALL),n=sge(t),s=rge(t),a=Ai(t.field),c=Ai(t.key),d=(t.groupby||[]).map(Ai),f=age(e.source,t.groupby,t.key,t.keyvals),u=[],o=this.value,g=f.domain.length,w,m,l,T,b,S,x,B,F,I;for(b=0,B=f.length;b<B;++b)for(w=f[b],l=w.values,m=NaN,x=0;x<g;++x)if(w[x]==null){for(T=f.domain[x],I={_impute:!0},S=0,F=l.length;S<F;++S)I[d[S]]=l[S];I[c]=T,I[a]=Number.isNaN(m)?m=n(w,s):m,u.push(Gt(I))}return u.length&&(i.add=i.materialize(i.ADD).add.concat(u)),o.length&&(i.rem=i.materialize(i.REM).rem.concat(o)),this.value=u,i}});function age(t,e,i,n){var s=S=>S(b),a=[],c=n?n.slice():[],d={},f={},u,o,g,w,m,l,T,b;for(c.forEach((S,x)=>d[S]=x+1),w=0,T=t.length;w<T;++w)b=t[w],l=i(b),m=d[l]||(d[l]=c.push(l)),o=(u=e?e.map(s):nge)+"",(g=f[o])||(g=f[o]=[],a.push(g),g.values=u),g[m-1]=b;return a.domain=c,a}function YO(t){Kc.call(this,t)}YO.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Wm},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};Ee(YO,Kc,{transform(t,e){const i=this,n=t.modified();let s;return i.value&&(n||e.modified(i._inputs,!0))?(s=i.value=n?i.init(t):{},e.visit(e.SOURCE,a=>i.add(a))):(s=i.value=i.value||this.init(t),e.visit(e.REM,a=>i.rem(a)),e.visit(e.ADD,a=>i.add(a))),i.changes(),e.visit(e.SOURCE,a=>{yt(a,s[i.cellkey(a)].tuple)}),e.reflow(n).modifies(this._outputs)},changes(){const t=this._adds,e=this._mods;let i,n;for(i=0,n=this._alen;i<n;++i)this.celltuple(t[i]),t[i]=null;for(i=0,n=this._mlen;i<n;++i)this.celltuple(e[i]),e[i]=null;this._alen=this._mlen=0}});function XO(t){ae.call(this,null,t)}XO.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};Ee(XO,ae,{transform(t,e){const i=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const n=e.materialize(e.SOURCE).source,s=$O(n,t.groupby,t.field),a=(t.groupby||[]).map(Ai),c=t.bandwidth,d=t.cumulative?"cdf":"pdf",f=t.as||["value","density"],u=[];let o=t.extent,g=t.steps||t.minsteps||25,w=t.steps||t.maxsteps||200;d!=="pdf"&&d!=="cdf"&&de("Invalid density method: "+d),t.resolve==="shared"&&(o||(o=xo(n,t.field)),g=w=t.steps||w),s.forEach(m=>{const l=wA(m,c)[d],T=t.counts?m.length:1,b=o||xo(m);UE(l,b,g,w).forEach(S=>{const x={};for(let B=0;B<a.length;++B)x[a[B]]=m.dims[B];x[f[0]]=S[0],x[f[1]]=S[1]*T,u.push(Gt(x))})}),this.value&&(i.rem=this.value),this.value=i.add=i.source=u}return i}});function hW(t){oi.call(this,null,oge,t)}Ee(hW,oi);function oge(t){return this.value&&!t.modified()?this.value:wO(t.fields,t.flat)}function pW(t){ae.call(this,[],t),this._pending=null}Ee(pW,ae,{transform(t,e){const i=e.dataflow;return this._pending?EB(this,e,this._pending):lge(t)?e.StopPropagation:t.values?EB(this,e,i.parse(t.values,t.format)):t.async?{async:i.request(t.url,t.format).then(s=>(this._pending=ke(s.data),a=>a.touch(this)))}:i.request(t.url,t.format).then(n=>EB(this,e,ke(n.data)))}});function lge(t){return t.modified("async")&&!(t.modified("values")||t.modified("url")||t.modified("format"))}function EB(t,e,i){i.forEach(Gt);const n=e.fork(e.NO_FIELDS&e.NO_SOURCE);return n.rem=t.value,t.value=n.source=n.add=i,t._pending=null,n.rem.length&&n.clean(!0),n}function KO(t){ae.call(this,{},t)}KO.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};Ee(KO,ae,{transform(t,e){const i=t.fields,n=t.index,s=t.values,a=t.default==null?null:t.default,c=t.modified(),d=i.length;let f=c?e.SOURCE:e.ADD,u=e,o=t.as,g,w,m;return s?(w=s.length,d>1&&!o&&de('Multi-field lookup requires explicit "as" parameter.'),o&&o.length!==d*w&&de('The "as" parameter has too few output field names.'),o=o||s.map(Ai),g=function(l){for(var T=0,b=0,S,x;T<d;++T)if(x=n.get(i[T](l)),x==null)for(S=0;S<w;++S,++b)l[o[b]]=a;else for(S=0;S<w;++S,++b)l[o[b]]=s[S](x)}):(o||de("Missing output field names."),g=function(l){for(var T=0,b;T<d;++T)b=n.get(i[T](l)),l[o[T]]=b??a}),c?u=e.reflow(!0):(m=i.some(l=>e.modified(l.fields)),f|=m?e.MOD:0),e.visit(f,g),u.modifies(o)}});function _W(t){oi.call(this,null,cge,t)}Ee(_W,oi);function cge(t){if(this.value&&!t.modified())return this.value;const e=t.extents,i=e.length;let n=1/0,s=-1/0,a,c;for(a=0;a<i;++a)c=e[a],c[0]<n&&(n=c[0]),c[1]>s&&(s=c[1]);return[n,s]}function yW(t){oi.call(this,null,dge,t)}Ee(yW,oi);function dge(t){return this.value&&!t.modified()?this.value:t.values.reduce((e,i)=>e.concat(i),[])}function gW(t){ae.call(this,null,t)}Ee(gW,ae,{transform(t,e){return this.modified(t.modified()),this.value=t,e.fork(e.NO_SOURCE|e.NO_FIELDS)}});function JO(t){Kc.call(this,t)}JO.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Wm,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};Ee(JO,Kc,{_transform:Kc.prototype.transform,transform(t,e){return this._transform(fge(t,e),e)}});function fge(t,e){const i=t.field,n=t.value,s=(t.op==="count"?"__count__":t.op)||"sum",a=Mn(i).concat(Mn(n)),c=hge(i,t.limit||0,e);return e.changed()&&t.set("__pivot__",null,null,!0),{key:t.key,groupby:t.groupby,ops:c.map(()=>s),fields:c.map(d=>uge(d,i,n,a)),as:c.map(d=>d+""),modified:t.modified.bind(t)}}function uge(t,e,i,n){return Ds(s=>e(s)===t?i(s):NaN,n,t+"")}function hge(t,e,i){const n={},s=[];return i.visit(i.SOURCE,a=>{const c=t(a);n[c]||(n[c]=1,s.push(c))}),s.sort(YE),e?s.slice(0,e):s}function mW(t){iS.call(this,t)}Ee(mW,iS,{transform(t,e){const i=t.subflow,n=t.field,s=a=>this.subflow(Le(a),i,e,a);return(t.modified("field")||n&&e.modified(Mn(n)))&&de("PreFacet does not support field modification."),this.initTargets(),n?(e.visit(e.MOD,a=>{const c=s(a);n(a).forEach(d=>c.mod(d))}),e.visit(e.ADD,a=>{const c=s(a);n(a).forEach(d=>c.add(Gt(d)))}),e.visit(e.REM,a=>{const c=s(a);n(a).forEach(d=>c.rem(d))})):(e.visit(e.MOD,a=>s(a).mod(a)),e.visit(e.ADD,a=>s(a).add(a)),e.visit(e.REM,a=>s(a).rem(a))),e.clean()&&e.runAfter(()=>this.clean()),e}});function QO(t){ae.call(this,null,t)}QO.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};Ee(QO,ae,{transform(t,e){const i=e.fork(e.NO_SOURCE),n=t.fields,s=lW(t.fields,t.as||[]),a=n?(d,f)=>pge(d,f,n,s):ZE;let c;return this.value?c=this.value:(e=e.addAll(),c=this.value={}),e.visit(e.REM,d=>{const f=Le(d);i.rem.push(c[f]),c[f]=null}),e.visit(e.ADD,d=>{const f=a(d,Gt({}));c[Le(d)]=f,i.add.push(f)}),e.visit(e.MOD,d=>{i.mod.push(a(d,c[Le(d)]))}),i}});function pge(t,e,i,n){for(let s=0,a=i.length;s<a;++s)e[n[s]]=i[s](t);return e}function wW(t){ae.call(this,null,t)}Ee(wW,ae,{transform(t,e){return this.value=t.value,t.modified("value")?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation}});function ZO(t){ae.call(this,null,t)}ZO.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const _ge=1e-14;Ee(ZO,ae,{transform(t,e){const i=e.fork(e.NO_SOURCE|e.NO_FIELDS),n=t.as||["prob","value"];if(this.value&&!t.modified()&&!e.changed())return i.source=this.value,i;const s=e.materialize(e.SOURCE).source,a=$O(s,t.groupby,t.field),c=(t.groupby||[]).map(Ai),d=[],f=t.step||.01,u=t.probs||Js(f/2,1-_ge,f),o=u.length;return a.forEach(g=>{const w=hA(g,u);for(let m=0;m<o;++m){const l={};for(let T=0;T<c.length;++T)l[c[T]]=g.dims[T];l[n[0]]=u[m],l[n[1]]=w[m],d.push(Gt(l))}}),this.value&&(i.rem=this.value),this.value=i.add=i.source=d,i}});function bW(t){ae.call(this,null,t)}Ee(bW,ae,{transform(t,e){let i,n;return this.value?n=this.value:(i=e=e.addAll(),n=this.value={}),t.derive&&(i=e.fork(e.NO_SOURCE),e.visit(e.REM,s=>{const a=Le(s);i.rem.push(n[a]),n[a]=null}),e.visit(e.ADD,s=>{const a=MO(s);n[Le(s)]=a,i.add.push(a)}),e.visit(e.MOD,s=>{const a=n[Le(s)];for(const c in s)a[c]=s[c],i.modifies(c);i.mod.push(a)})),i}});function eN(t){ae.call(this,[],t),this.count=0}eN.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};Ee(eN,ae,{transform(t,e){const i=e.fork(e.NO_SOURCE),n=t.modified("size"),s=t.size,a=this.value.reduce((o,g)=>(o[Le(g)]=1,o),{});let c=this.value,d=this.count,f=0;function u(o){let g,w;c.length<s?c.push(o):(w=~~((d+1)*Fr()),w<c.length&&w>=f&&(g=c[w],a[Le(g)]&&i.rem.push(g),c[w]=o)),++d}if(e.rem.length&&(e.visit(e.REM,o=>{const g=Le(o);a[g]&&(a[g]=-1,i.rem.push(o)),--d}),c=c.filter(o=>a[Le(o)]!==-1)),(e.rem.length||n)&&c.length<s&&e.source&&(f=d=c.length,e.visit(e.SOURCE,o=>{a[Le(o)]||u(o)}),f=-1),n&&c.length>s){const o=c.length-s;for(let g=0;g<o;++g)a[Le(c[g])]=-1,i.rem.push(c[g]);c=c.slice(o)}return e.mod.length&&e.visit(e.MOD,o=>{a[Le(o)]&&i.mod.push(o)}),e.add.length&&e.visit(e.ADD,u),(e.add.length||f<0)&&(i.add=c.filter(o=>!a[Le(o)])),this.count=d,this.value=i.source=c,i}});function tN(t){ae.call(this,null,t)}tN.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};Ee(tN,ae,{transform(t,e){if(this.value&&!t.modified())return;const i=e.materialize().fork(e.MOD),n=t.as||"data";return i.rem=this.value?e.rem.concat(this.value):e.rem,this.value=Js(t.start,t.stop,t.step||1).map(s=>{const a={};return a[n]=s,Gt(a)}),i.add=e.add.concat(this.value),i}});function TW(t){ae.call(this,null,t),this.modified(!0)}Ee(TW,ae,{transform(t,e){return this.value=e.source,e.changed()?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation}});function iN(t){ae.call(this,null,t)}const vW=["unit0","unit1"];iN.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:EO,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:vW}]};Ee(iN,ae,{transform(t,e){const i=t.field,n=t.interval!==!1,s=t.timezone==="utc",a=this._floor(t,e),c=(s?x_:S_)(a.unit).offset,d=t.as||vW,f=d[0],u=d[1],o=a.step;let g=a.start||1/0,w=a.stop||-1/0,m=e.ADD;return(t.modified()||e.changed(e.REM)||e.modified(Mn(i)))&&(e=e.reflow(!0),m=e.SOURCE,g=1/0,w=-1/0),e.visit(m,l=>{const T=i(l);let b,S;T==null?(l[f]=null,n&&(l[u]=null)):(l[f]=b=S=a(T),n&&(l[u]=S=c(b,o)),b<g&&(g=b),S>w&&(w=S))}),a.start=g,a.stop=w,e.modifies(n?d:f)},_floor(t,e){const i=t.timezone==="utc",{units:n,step:s}=t.units?{units:t.units,step:t.step||1}:OV({extent:t.extent||xo(e.materialize(e.SOURCE).source,t.field),maxbins:t.maxbins}),a=SO(n),c=this.value||{},d=(i?EV:vV)(a,s);return d.unit=At(a),d.units=a,d.step=s,d.start=c.start,d.stop=c.stop,this.value=d}});function EW(t){ae.call(this,E_(),t)}Ee(EW,ae,{transform(t,e){const i=e.dataflow,n=t.field,s=this.value,a=d=>s.set(n(d),d);let c=!0;return t.modified("field")||e.modified(n.fields)?(s.clear(),e.visit(e.SOURCE,a)):e.changed()?(e.visit(e.REM,d=>s.delete(n(d))),e.visit(e.ADD,a)):c=!1,this.modified(c),s.empty>i.cleanThreshold&&i.runAfter(s.clean),e.fork()}});function SW(t){ae.call(this,null,t)}Ee(SW,ae,{transform(t,e){(!this.value||t.modified("field")||t.modified("sort")||e.changed()||t.sort&&e.modified(t.sort.fields))&&(this.value=(t.sort?e.source.slice().sort(Au(t.sort)):e.source).map(t.field))}});function yge(t,e,i,n){const s=Wg[t](e,i);return{init:s.init||bc,update:function(a,c){c[n]=s.next(a)}}}const Wg={row_number:function(){return{next:t=>t.index+1}},rank:function(){let t;return{init:()=>t=1,next:e=>{const i=e.index,n=e.data;return i&&e.compare(n[i-1],n[i])?t=i+1:t}}},dense_rank:function(){let t;return{init:()=>t=1,next:e=>{const i=e.index,n=e.data;return i&&e.compare(n[i-1],n[i])?++t:t}}},percent_rank:function(){const t=Wg.rank(),e=t.next;return{init:t.init,next:i=>(e(i)-1)/(i.data.length-1)}},cume_dist:function(){let t;return{init:()=>t=0,next:e=>{const i=e.data,n=e.compare;let s=e.index;if(t<s){for(;s+1<i.length&&!n(i[s],i[s+1]);)++s;t=s}return(1+t)/i.length}}},ntile:function(t,e){e=+e,e>0||de("ntile num must be greater than zero.");const i=Wg.cume_dist(),n=i.next;return{init:i.init,next:s=>Math.ceil(e*n(s))}},lag:function(t,e){return e=+e||1,{next:i=>{const n=i.index-e;return n>=0?t(i.data[n]):null}}},lead:function(t,e){return e=+e||1,{next:i=>{const n=i.index+e,s=i.data;return n<s.length?t(s[n]):null}}},first_value:function(t){return{next:e=>t(e.data[e.i0])}},last_value:function(t){return{next:e=>t(e.data[e.i1-1])}},nth_value:function(t,e){return e=+e,e>0||de("nth_value nth must be greater than zero."),{next:i=>{const n=i.i0+(e-1);return n<i.i1?t(i.data[n]):null}}},prev_value:function(t){let e;return{init:()=>e=null,next:i=>{const n=t(i.data[i.index]);return n!=null?e=n:e}}},next_value:function(t){let e,i;return{init:()=>(e=null,i=-1),next:n=>{const s=n.data;return n.index<=i?e:(i=gge(t,s,n.index))<0?(i=s.length,e=null):e=t(s[i])}}}};function gge(t,e,i){for(let n=e.length;i<n;++i)if(t(e[i])!=null)return i;return-1}const mge=Object.keys(Wg);function xW(t){const e=ke(t.ops),i=ke(t.fields),n=ke(t.params),s=ke(t.as),a=this.outputs=[],c=this.windows=[],d={},f={},u=[],o=[];let g=!0;function w(m){ke(Mn(m)).forEach(l=>d[l]=1)}w(t.sort),e.forEach((m,l)=>{const T=i[l],b=Ai(T),S=eW(m,b,s[l]);if(w(T),a.push(S),Pe(Wg,m))c.push(yge(m,i[l],n[l],S));else{if(T==null&&m!=="count"&&de("Null aggregate field specified."),m==="count"){u.push(S);return}g=!1;let x=f[b];x||(x=f[b]=[],x.field=T,o.push(x)),x.push(tW(m,S))}}),(u.length||o.length)&&(this.cell=wge(o,u,g)),this.inputs=Object.keys(d)}const BW=xW.prototype;BW.init=function(){this.windows.forEach(t=>t.init()),this.cell&&this.cell.init()};BW.update=function(t,e){const i=this.cell,n=this.windows,s=t.data,a=n&&n.length;let c;if(i){for(c=t.p0;c<t.i0;++c)i.rem(s[c]);for(c=t.p1;c<t.i1;++c)i.add(s[c]);i.set(e)}for(c=0;c<a;++c)n[c].update(t,e)};function wge(t,e,i){t=t.map(f=>nW(f,f.field));const n={num:0,agg:null,store:!1,count:e};if(!i)for(var s=t.length,a=n.agg=Array(s),c=0;c<s;++c)a[c]=new t[c](n);if(n.store)var d=n.data=new NO;return n.add=function(f){if(n.num+=1,!i){d&&d.add(f);for(let u=0;u<s;++u)a[u].add(a[u].get(f),f)}},n.rem=function(f){if(n.num-=1,!i){d&&d.rem(f);for(let u=0;u<s;++u)a[u].rem(a[u].get(f),f)}},n.set=function(f){let u,o;for(d&&d.values(),u=0,o=e.length;u<o;++u)f[e[u]]=n.num;if(!i)for(u=0,o=a.length;u<o;++u)a[u].set(f)},n.init=function(){n.num=0,d&&d.reset();for(let f=0;f<s;++f)a[f].init()},n}function nN(t){ae.call(this,{},t),this._mlen=0,this._mods=[]}nN.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:mge.concat(Wm)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};Ee(nN,ae,{transform(t,e){this.stamp=e.stamp;const i=t.modified(),n=Au(t.sort),s=Kk(t.groupby),a=d=>this.group(s(d));let c=this.state;(!c||i)&&(c=this.state=new xW(t)),i||e.modified(c.inputs)?(this.value={},e.visit(e.SOURCE,d=>a(d).add(d))):(e.visit(e.REM,d=>a(d).remove(d)),e.visit(e.ADD,d=>a(d).add(d)));for(let d=0,f=this._mlen;d<f;++d)bge(this._mods[d],c,n,t);return this._mlen=0,this._mods=[],e.reflow(i).modifies(c.outputs)},group(t){let e=this.value[t];return e||(e=this.value[t]=sW(Le),e.stamp=-1),e.stamp<this.stamp&&(e.stamp=this.stamp,this._mods[this._mlen++]=e),e}});function bge(t,e,i,n){const s=n.sort,a=s&&!n.ignorePeers,c=n.frame||[null,0],d=t.data(i),f=d.length,u=a?Bm(s):null,o={i0:0,i1:0,p0:0,p1:0,index:0,data:d,compare:s||Ln(-1)};e.init();for(let g=0;g<f;++g)Tge(o,c,g,f),a&&vge(o,u),e.update(o,d[g])}function Tge(t,e,i,n){t.p0=t.i0,t.p1=t.i1,t.i0=e[0]==null?0:Math.max(0,i-Math.abs(e[0])),t.i1=e[1]==null?n:Math.min(n,i+Math.abs(e[1])+1),t.index=i}function vge(t,e){const i=t.i0,n=t.i1-1,s=t.compare,a=t.data,c=a.length-1;i>0&&!s(a[i],a[i-1])&&(t.i0=e.left(a,a[i])),n<c&&!s(a[n],a[n+1])&&(t.i1=e.right(a,a[n]))}const Ege=Object.freeze(Object.defineProperty({__proto__:null,aggregate:Kc,bin:CO,collect:RO,compare:rW,countpattern:LO,cross:DO,density:PO,dotbin:UO,expression:dW,extent:zO,facet:iS,field:fW,filter:qO,flatten:GO,fold:VO,formula:WO,generate:uW,impute:HO,joinaggregate:YO,kde:XO,key:hW,load:pW,lookup:KO,multiextent:_W,multivalues:yW,params:gW,pivot:JO,prefacet:mW,project:QO,proxy:wW,quantile:ZO,relay:bW,sample:eN,sequence:tN,sieve:TW,subflow:jO,timeunit:iN,tupleindex:EW,values:SW,window:nN},Symbol.toStringTag,{value:"Module"}));function Hm(t,e){if(typeof document<"u"&&document.createElement){const i=document.createElement("canvas");if(i&&i.getContext)return i.width=t,i.height=e,i}return null}const Sge=()=>typeof Image<"u"?Image:null;function sN(t,e,i){const n=t-e+i*2;return t?n>0?n:1:0}const xge="identity",qp="linear",Rl="log",Ym="pow",Xm="sqrt",nS="symlog",Qf="time",Zf="utc",co="sequential",B_="diverging",Gp="quantile",sS="quantize",rS="threshold",rN="ordinal",Jk="point",IW="band",aN="bin-ordinal",Xi="continuous",Km="discrete",Jm="discretizing",Rr="interpolating",oN="temporal";function Bge(t){return function(e){let i=e[0],n=e[1],s;return n<i&&(s=i,i=n,n=s),[t.invert(i),t.invert(n)]}}function Ige(t){return function(e){const i=t.range();let n=e[0],s=e[1],a=-1,c,d,f,u;for(s<n&&(d=n,n=s,s=d),f=0,u=i.length;f<u;++f)i[f]>=n&&i[f]<=s&&(a<0&&(a=f),c=f);if(!(a<0))return n=t.invertExtent(i[a]),s=t.invertExtent(i[c]),[n[0]===void 0?n[1]:n[0],s[1]===void 0?s[0]:s[1]]}}function lN(){const t=XM().unknown(void 0),e=t.domain,i=t.range;let n=[0,1],s,a,c=!1,d=0,f=0,u=.5;delete t.unknown;function o(){const g=e().length,w=n[1]<n[0],m=n[1-w],l=sN(g,d,f);let T=n[w-0];s=(m-T)/(l||1),c&&(s=Math.floor(s)),T+=(m-T-s*(g-d))*u,a=s*(1-d),c&&(T=Math.round(T),a=Math.round(a));const b=Js(g).map(S=>T+s*S);return i(w?b.reverse():b)}return t.domain=function(g){return arguments.length?(e(g),o()):e()},t.range=function(g){return arguments.length?(n=[+g[0],+g[1]],o()):n.slice()},t.rangeRound=function(g){return n=[+g[0],+g[1]],c=!0,o()},t.bandwidth=function(){return a},t.step=function(){return s},t.round=function(g){return arguments.length?(c=!!g,o()):c},t.padding=function(g){return arguments.length?(f=Math.max(0,Math.min(1,g)),d=f,o()):d},t.paddingInner=function(g){return arguments.length?(d=Math.max(0,Math.min(1,g)),o()):d},t.paddingOuter=function(g){return arguments.length?(f=Math.max(0,Math.min(1,g)),o()):f},t.align=function(g){return arguments.length?(u=Math.max(0,Math.min(1,g)),o()):u},t.invertRange=function(g){if(g[0]==null||g[1]==null)return;const w=n[1]<n[0],m=w?i().reverse():i(),l=m.length-1;let T=+g[0],b=+g[1],S,x,B;if(!(T!==T||b!==b)&&(b<T&&(B=T,T=b,b=B),!(b<m[0]||T>n[1-w])))return S=Math.max(0,jT(m,T)-1),x=T===b?S:jT(m,b)-1,T-m[S]>a+1e-10&&++S,w&&(B=S,S=l-x,x=l-B),S>x?void 0:e().slice(S,x+1)},t.invert=function(g){const w=t.invertRange([g,g]);return w&&w[0]},t.copy=function(){return lN().domain(e()).range(n).round(c).paddingInner(d).paddingOuter(f).align(u)},o()}function kW(t){const e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return kW(e())},t}function kge(){return kW(lN().paddingInner(1))}var Fge=Array.prototype.map;function Mge(t){return Fge.call(t,In)}const Age=Array.prototype.slice;function FW(){let t=[],e=[];function i(n){return n==null||n!==n?void 0:e[(Im(t,n)-1)%e.length]}return i.domain=function(n){return arguments.length?(t=Mge(n),i):t.slice()},i.range=function(n){return arguments.length?(e=Age.call(n),i):e.slice()},i.tickFormat=function(n,s){return Xq(t[0],At(t),n??10,s)},i.copy=function(){return FW().domain(i.domain()).range(i.range())},i}const hv=new Map,MW=Symbol("vega_scale");function AW(t){return t[MW]=!0,t}function Oge(t){return t&&t[MW]===!0}function Nge(t,e,i){const n=function(){const a=e();return a.invertRange||(a.invertRange=a.invert?Bge(a):a.invertExtent?Ige(a):void 0),a.type=t,AW(a)};return n.metadata=ua(ke(i)),n}function $t(t,e,i){return arguments.length>1?(hv.set(t,Nge(t,e,i)),this):OW(t)?hv.get(t):void 0}$t(xge,Kq);$t(qp,KM,Xi);$t(Rl,Qq,[Xi,Rl]);$t(Ym,eA,Xi);$t(Xm,Jle,Xi);$t(nS,Zq,Xi);$t(Qf,u7,[Xi,oN]);$t(Zf,ude,[Xi,oN]);$t(co,rA,[Xi,Rr]);$t(`${co}-${qp}`,rA,[Xi,Rr]);$t(`${co}-${Rl}`,h7,[Xi,Rr,Rl]);$t(`${co}-${Ym}`,aA,[Xi,Rr]);$t(`${co}-${Xm}`,hde,[Xi,Rr]);$t(`${co}-${nS}`,p7,[Xi,Rr]);$t(`${B_}-${qp}`,_7,[Xi,Rr]);$t(`${B_}-${Rl}`,y7,[Xi,Rr,Rl]);$t(`${B_}-${Ym}`,oA,[Xi,Rr]);$t(`${B_}-${Xm}`,pde,[Xi,Rr]);$t(`${B_}-${nS}`,g7,[Xi,Rr]);$t(Gp,e7,[Jm,Gp]);$t(sS,t7,Jm);$t(rS,i7,Jm);$t(aN,FW,[Km,Jm]);$t(rN,XM,Km);$t(IW,lN,Km);$t(Jk,kge,Km);function OW(t){return hv.has(t)}function Nu(t,e){const i=hv.get(t);return i&&i.metadata[e]}function cN(t){return Nu(t,Xi)}function Vp(t){return Nu(t,Km)}function Qk(t){return Nu(t,Jm)}function NW(t){return Nu(t,Rl)}function Cge(t){return Nu(t,oN)}function CW(t){return Nu(t,Rr)}function RW(t){return Nu(t,Gp)}const Rge=["clamp","base","constant","exponent"];function LW(t,e){const i=e[0],n=At(e)-i;return function(s){return t(i+s*n)}}function aS(t,e,i){return NM(dN(e||"rgb",i),t)}function DW(t,e){const i=new Array(e),n=e+1;for(let s=0;s<e;)i[s]=t(++s/n);return i}function PW(t,e,i){const n=i-e;let s,a,c;return!n||!Number.isFinite(n)?Ln(.5):(s=(a=t.type).indexOf("-"),a=s<0?a:a.slice(s+1),c=$t(a)().domain([e,i]).range([0,1]),Rge.forEach(d=>t[d]?c[d](t[d]()):0),c)}function dN(t,e){const i=hre[Lge(t)];return e!=null&&i&&i.gamma?i.gamma(e):i}function Lge(t){return"interpolate"+t.toLowerCase().split("-").map(e=>e[0].toUpperCase()+e.slice(1)).join("")}const Dge={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Pge={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function $W(t){const e=t.length/6|0,i=new Array(e);for(let n=0;n<e;)i[n]="#"+t.slice(n*6,++n*6);return i}function UW(t,e){for(const i in t)fN(i,e(t[i]))}const t6={};UW(Pge,$W);UW(Dge,t=>aS($W(t)));function fN(t,e){return t=t&&t.toLowerCase(),arguments.length>1?(t6[t]=e,this):t6[t]}const cT="symbol",$ge="discrete",Uge="gradient",zge=t=>ue(t)?t.map(e=>String(e)):String(t),jge=(t,e)=>t[1]-e[1],qge=(t,e)=>e[1]-t[1];function uN(t,e,i){let n;return ii(e)&&(t.bins&&(e=Math.max(e,t.bins.length)),i!=null&&(e=Math.min(e,Math.floor(Vm(t.domain())/i||1)))),Me(e)&&(n=e.step,e=e.interval),Ie(e)&&(e=t.type===Qf?S_(e):t.type==Zf?x_(e):de("Only time and utc scales accept interval strings."),n&&(e=e.every(n))),e}function zW(t,e,i){let n=t.range(),s=n[0],a=At(n),c=jge;if(s>a&&(n=a,a=s,s=n,c=qge),s=Math.floor(s),a=Math.ceil(a),e=e.map(d=>[d,t(d)]).filter(d=>s<=d[1]&&d[1]<=a).sort(c).map(d=>d[0]),i>0&&e.length>1){const d=[e[0],At(e)];for(;e.length>i&&e.length>=3;)e=e.filter((f,u)=>!(u%2));e.length<3&&(e=d)}return e}function hN(t,e){return t.bins?zW(t,t.bins):t.ticks?t.ticks(e):t.domain()}function jW(t,e,i,n,s,a){const c=e.type;let d=zge;if(c===Qf||s===Qf)d=t.timeFormat(n);else if(c===Zf||s===Zf)d=t.utcFormat(n);else if(NW(c)){const f=t.formatFloat(n);if(a||e.bins)d=f;else{const u=qW(e,i,!1);d=o=>u(o)?f(o):""}}else if(e.tickFormat){const f=e.domain();d=t.formatSpan(f[0],f[f.length-1],i,n)}else n&&(d=t.format(n));return d}function qW(t,e,i){const n=hN(t,e),s=t.base(),a=Math.log(s),c=Math.max(1,s*e/n.length),d=f=>{let u=f/Math.pow(s,Math.round(Math.log(f)/a));return u*s<s-.5&&(u*=s),u<=c};return i?n.filter(d):d}const Zk={[Gp]:"quantiles",[sS]:"thresholds",[rS]:"domain"},GW={[Gp]:"quantiles",[sS]:"domain"};function VW(t,e){return t.bins?Wge(t.bins):t.type===Rl?qW(t,e,!0):Zk[t.type]?Vge(t[Zk[t.type]]()):hN(t,e)}function Gge(t,e,i){const n=e[GW[e.type]](),s=n.length;let a=s>1?n[1]-n[0]:n[0],c;for(c=1;c<s;++c)a=Math.min(a,n[c]-n[c-1]);return t.formatSpan(0,a,3*10,i)}function Vge(t){const e=[-1/0].concat(t);return e.max=1/0,e}function Wge(t){const e=t.slice(0,-1);return e.max=At(t),e}const Hge=t=>Zk[t.type]||t.bins;function WW(t,e,i,n,s,a,c){const d=GW[e.type]&&a!==Qf&&a!==Zf?Gge(t,e,s):jW(t,e,i,s,a,c);return n===cT&&Hge(e)?Yge(d):n===$ge?Xge(d):Kge(d)}const Yge=t=>(e,i,n)=>{const s=i6(n[i+1],i6(n.max,1/0)),a=n6(e,t),c=n6(s,t);return a&&c?a+" – "+c:c?"< "+c:"≥ "+a},i6=(t,e)=>t??e,Xge=t=>(e,i)=>i?t(e):null,Kge=t=>e=>t(e),n6=(t,e)=>Number.isFinite(t)?e(t):null;function Jge(t){const e=t.domain(),i=e.length-1;let n=+e[0],s=+At(e),a=s-n;if(t.type===rS){const c=i?a/i:.1;n-=c,s+=c,a=s-n}return c=>(c-n)/a}function Qge(t,e,i,n){const s=n||e.type;return Ie(i)&&Cge(s)&&(i=i.replace(/%a/g,"%A").replace(/%b/g,"%B")),!i&&s===Qf?t.timeFormat("%A, %d %B %Y, %X"):!i&&s===Zf?t.utcFormat("%A, %d %B %Y, %X UTC"):WW(t,e,5,null,i,n,!0)}function HW(t,e,i){i=i||{};const n=Math.max(3,i.maxlen||7),s=Qge(t,e,i.format,i.formatType);if(Qk(e.type)){const a=VW(e).slice(1).map(s),c=a.length;return`${c} boundar${c===1?"y":"ies"}: ${a.join(", ")}`}else if(Vp(e.type)){const a=e.domain(),c=a.length,d=c>n?a.slice(0,n-2).map(s).join(", ")+", ending with "+a.slice(-1).map(s):a.map(s).join(", ");return`${c} value${c===1?"":"s"}: ${d}`}else{const a=e.domain();return`values from ${s(a[0])} to ${s(At(a))}`}}let YW=0;function Zge(){YW=0}const pv="p_";function pN(t){return t&&t.gradient}function XW(t,e,i){const n=t.gradient;let s=t.id,a=n==="radial"?pv:"";return s||(s=t.id="gradient_"+YW++,n==="radial"?(t.x1=Aa(t.x1,.5),t.y1=Aa(t.y1,.5),t.r1=Aa(t.r1,0),t.x2=Aa(t.x2,.5),t.y2=Aa(t.y2,.5),t.r2=Aa(t.r2,.5),a=pv):(t.x1=Aa(t.x1,0),t.y1=Aa(t.y1,0),t.x2=Aa(t.x2,1),t.y2=Aa(t.y2,0))),e[s]=t,"url("+(i||"")+"#"+a+s+")"}function Aa(t,e){return t??e}function KW(t,e){var i=[],n;return n={gradient:"linear",x1:t?t[0]:0,y1:t?t[1]:0,x2:e?e[0]:1,y2:e?e[1]:0,stops:i,stop:function(s,a){return i.push({offset:s,color:a}),n}}}const s6={basis:{curve:Bde},"basis-closed":{curve:Ide},"basis-open":{curve:kde},bundle:{curve:Fde,tension:"beta",value:.85},cardinal:{curve:Mde,tension:"tension",value:0},"cardinal-open":{curve:Ode,tension:"tension",value:0},"cardinal-closed":{curve:Ade,tension:"tension",value:0},"catmull-rom":{curve:Nde,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Cde,tension:"alpha",value:.5},"catmull-rom-open":{curve:Rde,tension:"alpha",value:.5},linear:{curve:lA},"linear-closed":{curve:Lde},monotone:{horizontal:Pde,vertical:Dde},natural:{curve:$de},step:{curve:Ude},"step-after":{curve:jde},"step-before":{curve:zde}};function _N(t,e,i){var n=Pe(s6,t)&&s6[t],s=null;return n&&(s=n.curve||n[e||"vertical"],n.tension&&i!=null&&(s=s[n.tension](i))),s}const eme={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},tme=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,ime=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,nme=/^((\s+,?\s*)|(,\s*))/,sme=/^[01]/;function Wp(t){const e=[];return(t.match(tme)||[]).forEach(n=>{let s=n[0];const a=s.toLowerCase(),c=eme[a],d=rme(a,c,n.slice(1).trim()),f=d.length;if(f<c||f&&f%c!==0)throw Error("Invalid SVG path, incorrect parameter count");if(e.push([s,...d.slice(0,c)]),f!==c){a==="m"&&(s=s==="M"?"L":"l");for(let u=c;u<f;u+=c)e.push([s,...d.slice(u,u+c)])}}),e}function rme(t,e,i){const n=[];for(let s=0;e&&s<i.length;)for(let a=0;a<e;++a){const c=t==="a"&&(a===3||a===4)?sme:ime,d=i.slice(s).match(c);if(d===null)throw Error("Invalid SVG path, incorrect parameter type");s+=d[0].length,n.push(+d[0]);const f=i.slice(s).match(nme);f!==null&&(s+=f[0].length)}return n}const Jc=Math.PI/180,ame=1e-14,hf=Math.PI/2,eo=Math.PI*2,Ju=Math.sqrt(3)/2;var SB={},xB={},JW=[].join;function ome(t,e,i,n,s,a,c,d,f){const u=JW.call(arguments);if(SB[u])return SB[u];const o=c*Jc,g=Math.sin(o),w=Math.cos(o);i=Math.abs(i),n=Math.abs(n);const m=w*(d-t)*.5+g*(f-e)*.5,l=w*(f-e)*.5-g*(d-t)*.5;let T=m*m/(i*i)+l*l/(n*n);T>1&&(T=Math.sqrt(T),i*=T,n*=T);const b=w/i,S=g/i,x=-g/n,B=w/n,F=b*d+S*f,I=x*d+B*f,A=b*t+S*e,O=x*t+B*e;let D=1/((A-F)*(A-F)+(O-I)*(O-I))-.25;D<0&&(D=0);let P=Math.sqrt(D);a==s&&(P=-P);const U=.5*(F+A)-P*(O-I),Y=.5*(I+O)+P*(A-F),z=Math.atan2(I-Y,F-U);let V=Math.atan2(O-Y,A-U)-z;V<0&&a===1?V+=eo:V>0&&a===0&&(V-=eo);const H=Math.ceil(Math.abs(V/(hf+.001))),J=[];for(let G=0;G<H;++G){const le=z+G*V/H,pe=z+(G+1)*V/H;J[G]=[U,Y,le,pe,i,n,g,w]}return SB[u]=J}function lme(t){const e=JW.call(t);if(xB[e])return xB[e];var i=t[0],n=t[1],s=t[2],a=t[3],c=t[4],d=t[5],f=t[6],u=t[7];const o=u*c,g=-f*d,w=f*c,m=u*d,l=Math.cos(s),T=Math.sin(s),b=Math.cos(a),S=Math.sin(a),x=.5*(a-s),B=Math.sin(x*.5),F=8/3*B*B/Math.sin(x),I=i+l-F*T,A=n+T+F*l,O=i+b,R=n+S,D=O+F*S,P=R-F*b;return xB[e]=[o*I+g*A,w*I+m*A,o*D+g*P,w*D+m*P,o*O+g*R,w*O+m*R]}const dr=["l",0,0,0,0,0,0,0];function cme(t,e,i){const n=dr[0]=t[0];if(n==="a"||n==="A")dr[1]=e*t[1],dr[2]=i*t[2],dr[3]=t[3],dr[4]=t[4],dr[5]=t[5],dr[6]=e*t[6],dr[7]=i*t[7];else if(n==="h"||n==="H")dr[1]=e*t[1];else if(n==="v"||n==="V")dr[1]=i*t[1];else for(var s=1,a=t.length;s<a;++s)dr[s]=(s%2==1?e:i)*t[s];return dr}function Hg(t,e,i,n,s,a){var c,d=null,f=0,u=0,o=0,g=0,w,m,l,T,b=0,S=0;i==null&&(i=0),n==null&&(n=0),s==null&&(s=1),a==null&&(a=s),t.beginPath&&t.beginPath();for(var x=0,B=e.length;x<B;++x){switch(c=e[x],(s!==1||a!==1)&&(c=cme(c,s,a)),c[0]){case"l":f+=c[1],u+=c[2],t.lineTo(f+i,u+n);break;case"L":f=c[1],u=c[2],t.lineTo(f+i,u+n);break;case"h":f+=c[1],t.lineTo(f+i,u+n);break;case"H":f=c[1],t.lineTo(f+i,u+n);break;case"v":u+=c[1],t.lineTo(f+i,u+n);break;case"V":u=c[1],t.lineTo(f+i,u+n);break;case"m":f+=c[1],u+=c[2],b=f,S=u,t.moveTo(f+i,u+n);break;case"M":f=c[1],u=c[2],b=f,S=u,t.moveTo(f+i,u+n);break;case"c":w=f+c[5],m=u+c[6],o=f+c[3],g=u+c[4],t.bezierCurveTo(f+c[1]+i,u+c[2]+n,o+i,g+n,w+i,m+n),f=w,u=m;break;case"C":f=c[5],u=c[6],o=c[3],g=c[4],t.bezierCurveTo(c[1]+i,c[2]+n,o+i,g+n,f+i,u+n);break;case"s":w=f+c[3],m=u+c[4],o=2*f-o,g=2*u-g,t.bezierCurveTo(o+i,g+n,f+c[1]+i,u+c[2]+n,w+i,m+n),o=f+c[1],g=u+c[2],f=w,u=m;break;case"S":w=c[3],m=c[4],o=2*f-o,g=2*u-g,t.bezierCurveTo(o+i,g+n,c[1]+i,c[2]+n,w+i,m+n),f=w,u=m,o=c[1],g=c[2];break;case"q":w=f+c[3],m=u+c[4],o=f+c[1],g=u+c[2],t.quadraticCurveTo(o+i,g+n,w+i,m+n),f=w,u=m;break;case"Q":w=c[3],m=c[4],t.quadraticCurveTo(c[1]+i,c[2]+n,w+i,m+n),f=w,u=m,o=c[1],g=c[2];break;case"t":w=f+c[1],m=u+c[2],d[0].match(/[QqTt]/)===null?(o=f,g=u):d[0]==="t"?(o=2*f-l,g=2*u-T):d[0]==="q"&&(o=2*f-o,g=2*u-g),l=o,T=g,t.quadraticCurveTo(o+i,g+n,w+i,m+n),f=w,u=m,o=f+c[1],g=u+c[2];break;case"T":w=c[1],m=c[2],o=2*f-o,g=2*u-g,t.quadraticCurveTo(o+i,g+n,w+i,m+n),f=w,u=m;break;case"a":r6(t,f+i,u+n,[c[1],c[2],c[3],c[4],c[5],c[6]+f+i,c[7]+u+n]),f+=c[6],u+=c[7];break;case"A":r6(t,f+i,u+n,[c[1],c[2],c[3],c[4],c[5],c[6]+i,c[7]+n]),f=c[6],u=c[7];break;case"z":case"Z":f=b,u=S,t.closePath();break}d=c}}function r6(t,e,i,n){const s=ome(n[5],n[6],n[0],n[1],n[3],n[4],n[2],e,i);for(let a=0;a<s.length;++a){const c=lme(s[a]);t.bezierCurveTo(c[0],c[1],c[2],c[3],c[4],c[5])}}const a6=.5773502691896257,o6={circle:{draw:function(t,e){const i=Math.sqrt(e)/2;t.moveTo(i,0),t.arc(0,0,i,0,eo)}},cross:{draw:function(t,e){var i=Math.sqrt(e)/2,n=i/2.5;t.moveTo(-i,-n),t.lineTo(-i,n),t.lineTo(-n,n),t.lineTo(-n,i),t.lineTo(n,i),t.lineTo(n,n),t.lineTo(i,n),t.lineTo(i,-n),t.lineTo(n,-n),t.lineTo(n,-i),t.lineTo(-n,-i),t.lineTo(-n,-n),t.closePath()}},diamond:{draw:function(t,e){const i=Math.sqrt(e)/2;t.moveTo(-i,0),t.lineTo(0,-i),t.lineTo(i,0),t.lineTo(0,i),t.closePath()}},square:{draw:function(t,e){var i=Math.sqrt(e),n=-i/2;t.rect(n,n,i,i)}},arrow:{draw:function(t,e){var i=Math.sqrt(e)/2,n=i/7,s=i/2.5,a=i/8;t.moveTo(-n,i),t.lineTo(n,i),t.lineTo(n,-a),t.lineTo(s,-a),t.lineTo(0,-i),t.lineTo(-s,-a),t.lineTo(-n,-a),t.closePath()}},wedge:{draw:function(t,e){var i=Math.sqrt(e)/2,n=Ju*i,s=n-i*a6,a=i/4;t.moveTo(0,-n-s),t.lineTo(-a,n-s),t.lineTo(a,n-s),t.closePath()}},triangle:{draw:function(t,e){var i=Math.sqrt(e)/2,n=Ju*i,s=n-i*a6;t.moveTo(0,-n-s),t.lineTo(-i,n-s),t.lineTo(i,n-s),t.closePath()}},"triangle-up":{draw:function(t,e){var i=Math.sqrt(e)/2,n=Ju*i;t.moveTo(0,-n),t.lineTo(-i,n),t.lineTo(i,n),t.closePath()}},"triangle-down":{draw:function(t,e){var i=Math.sqrt(e)/2,n=Ju*i;t.moveTo(0,n),t.lineTo(-i,-n),t.lineTo(i,-n),t.closePath()}},"triangle-right":{draw:function(t,e){var i=Math.sqrt(e)/2,n=Ju*i;t.moveTo(n,0),t.lineTo(-n,-i),t.lineTo(-n,i),t.closePath()}},"triangle-left":{draw:function(t,e){var i=Math.sqrt(e)/2,n=Ju*i;t.moveTo(-n,0),t.lineTo(n,-i),t.lineTo(n,i),t.closePath()}},stroke:{draw:function(t,e){const i=Math.sqrt(e)/2;t.moveTo(-i,0),t.lineTo(i,0)}}};function QW(t){return Pe(o6,t)?o6[t]:dme(t)}var BB={};function dme(t){if(!Pe(BB,t)){const e=Wp(t);BB[t]={draw:function(i,n){Hg(i,e,0,0,Math.sqrt(n)/2)}}}return BB[t]}const rc=.448084975506;function fme(t){return t.x}function ume(t){return t.y}function hme(t){return t.width}function pme(t){return t.height}function Wo(t){return typeof t=="function"?t:()=>+t}function u0(t,e,i){return Math.max(e,Math.min(t,i))}function ZW(){var t=fme,e=ume,i=hme,n=pme,s=Wo(0),a=s,c=s,d=s,f=null;function u(o,g,w){var m,l=g??+t.call(this,o),T=w??+e.call(this,o),b=+i.call(this,o),S=+n.call(this,o),x=Math.min(b,S)/2,B=u0(+s.call(this,o),0,x),F=u0(+a.call(this,o),0,x),I=u0(+c.call(this,o),0,x),A=u0(+d.call(this,o),0,x);if(f||(f=m=bE()),B<=0&&F<=0&&I<=0&&A<=0)f.rect(l,T,b,S);else{var O=l+b,R=T+S;f.moveTo(l+B,T),f.lineTo(O-F,T),f.bezierCurveTo(O-rc*F,T,O,T+rc*F,O,T+F),f.lineTo(O,R-A),f.bezierCurveTo(O,R-rc*A,O-rc*A,R,O-A,R),f.lineTo(l+I,R),f.bezierCurveTo(l+rc*I,R,l,R-rc*I,l,R-I),f.lineTo(l,T+B),f.bezierCurveTo(l,T+rc*B,l+rc*B,T,l+B,T),f.closePath()}if(m)return f=null,m+""||null}return u.x=function(o){return arguments.length?(t=Wo(o),u):t},u.y=function(o){return arguments.length?(e=Wo(o),u):e},u.width=function(o){return arguments.length?(i=Wo(o),u):i},u.height=function(o){return arguments.length?(n=Wo(o),u):n},u.cornerRadius=function(o,g,w,m){return arguments.length?(s=Wo(o),a=g!=null?Wo(g):s,d=w!=null?Wo(w):s,c=m!=null?Wo(m):a,u):s},u.context=function(o){return arguments.length?(f=o??null,u):f},u}function eH(){var t,e,i,n,s=null,a,c,d,f;function u(g,w,m){const l=m/2;if(a){var T=d-w,b=g-c;if(T||b){var S=Math.sqrt(T*T+b*b),x=(T/=S)*f,B=(b/=S)*f,F=Math.atan2(b,T);s.moveTo(c-x,d-B),s.lineTo(g-T*l,w-b*l),s.arc(g,w,l,F-Math.PI,F),s.lineTo(c+x,d+B),s.arc(c,d,f,F,F+Math.PI)}else s.arc(g,w,l,0,eo);s.closePath()}else a=1;c=g,d=w,f=l}function o(g){var w,m=g.length,l,T=!1,b;for(s==null&&(s=b=bE()),w=0;w<=m;++w)!(w<m&&n(l=g[w],w,g))===T&&(T=!T)&&(a=0),T&&u(+t(l,w,g),+e(l,w,g),+i(l,w,g));if(b)return s=null,b+""||null}return o.x=function(g){return arguments.length?(t=g,o):t},o.y=function(g){return arguments.length?(e=g,o):e},o.size=function(g){return arguments.length?(i=g,o):i},o.defined=function(g){return arguments.length?(n=g,o):n},o.context=function(g){return arguments.length?(g==null?s=null:s=g,o):s},o}function Qm(t,e){return t??e}const Zm=t=>t.x||0,ew=t=>t.y||0,_me=t=>t.width||0,yme=t=>t.height||0,gme=t=>(t.x||0)+(t.width||0),mme=t=>(t.y||0)+(t.height||0),wme=t=>t.startAngle||0,bme=t=>t.endAngle||0,Tme=t=>t.padAngle||0,vme=t=>t.innerRadius||0,Eme=t=>t.outerRadius||0,Sme=t=>t.cornerRadius||0,xme=t=>Qm(t.cornerRadiusTopLeft,t.cornerRadius)||0,Bme=t=>Qm(t.cornerRadiusTopRight,t.cornerRadius)||0,Ime=t=>Qm(t.cornerRadiusBottomRight,t.cornerRadius)||0,kme=t=>Qm(t.cornerRadiusBottomLeft,t.cornerRadius)||0,Fme=t=>Qm(t.size,64),Mme=t=>t.size||1,oS=t=>t.defined!==!1,Ame=t=>QW(t.shape||"circle"),Ome=Ede().startAngle(wme).endAngle(bme).padAngle(Tme).innerRadius(vme).outerRadius(Eme).cornerRadius(Sme),Nme=S7().x(Zm).y1(ew).y0(mme).defined(oS),Cme=S7().y(ew).x1(Zm).x0(gme).defined(oS),Rme=E7().x(Zm).y(ew).defined(oS),Lme=ZW().x(Zm).y(ew).width(_me).height(yme).cornerRadius(xme,Bme,Ime,kme),Dme=xde().type(Ame).size(Fme),Pme=eH().x(Zm).y(ew).defined(oS).size(Mme);function yN(t){return t.cornerRadius||t.cornerRadiusTopLeft||t.cornerRadiusTopRight||t.cornerRadiusBottomRight||t.cornerRadiusBottomLeft}function $me(t,e){return Ome.context(t)(e)}function Ume(t,e){const i=e[0],n=i.interpolate||"linear";return(i.orient==="horizontal"?Cme:Nme).curve(_N(n,i.orient,i.tension)).context(t)(e)}function zme(t,e){const i=e[0],n=i.interpolate||"linear";return Rme.curve(_N(n,i.orient,i.tension)).context(t)(e)}function I_(t,e,i,n){return Lme.context(t)(e,i,n)}function jme(t,e){return(e.mark.shape||e.shape).context(t)(e)}function qme(t,e){return Dme.context(t)(e)}function Gme(t,e){return Pme.context(t)(e)}var tH=1;function iH(){tH=1}function gN(t,e,i){var n=e.clip,s=t._defs,a=e.clip_id||(e.clip_id="clip"+tH++),c=s.clipping[a]||(s.clipping[a]={id:a});return gt(n)?c.path=n(null):yN(i)?c.path=I_(null,i,0,0):(c.width=i.width||0,c.height=i.height||0),"url(#"+a+")"}function Di(t){this.clear(),t&&this.union(t)}Di.prototype={clone(){return new Di(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2},set(t,e,i,n){return i<t?(this.x2=t,this.x1=i):(this.x1=t,this.x2=i),n<e?(this.y2=e,this.y1=n):(this.y1=e,this.y2=n),this},add(t,e){return t<this.x1&&(this.x1=t),e<this.y1&&(this.y1=e),t>this.x2&&(this.x2=t),e>this.y2&&(this.y2=e),this},expand(t){return this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(t){return this.x1*=t,this.y1*=t,this.x2*=t,this.y2*=t,this},translate(t,e){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this},rotate(t,e,i){const n=this.rotatedPoints(t,e,i);return this.clear().add(n[0],n[1]).add(n[2],n[3]).add(n[4],n[5]).add(n[6],n[7])},rotatedPoints(t,e,i){var{x1:n,y1:s,x2:a,y2:c}=this,d=Math.cos(t),f=Math.sin(t),u=e-e*d+i*f,o=i-e*f-i*d;return[d*n-f*s+u,f*n+d*s+o,d*n-f*c+u,f*n+d*c+o,d*a-f*s+u,f*a+d*s+o,d*a-f*c+u,f*a+d*c+o]},union(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this},intersect(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this},encloses(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2},alignsWith(t){return t&&(this.x1==t.x1||this.x2==t.x2||this.y1==t.y1||this.y2==t.y2)},intersects(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)},contains(t,e){return!(t<this.x1||t>this.x2||e<this.y1||e>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function lS(t){this.mark=t,this.bounds=this.bounds||new Di}function cS(t){lS.call(this,t),this.items=this.items||[]}Ee(cS,lS);function mN(t){this._pending=0,this._loader=t||KE()}function l6(t){t._pending+=1}function Z_(t){t._pending-=1}mN.prototype={pending(){return this._pending},sanitizeURL(t){const e=this;return l6(e),e._loader.sanitize(t,{context:"href"}).then(i=>(Z_(e),i)).catch(()=>(Z_(e),null))},loadImage(t){const e=this,i=Sge();return l6(e),e._loader.sanitize(t,{context:"image"}).then(n=>{const s=n.href;if(!s||!i)throw{url:s};const a=new i,c=Pe(n,"crossOrigin")?n.crossOrigin:"anonymous";return c!=null&&(a.crossOrigin=c),a.onload=()=>Z_(e),a.onerror=()=>Z_(e),a.src=s,a}).catch(n=>(Z_(e),{complete:!1,width:0,height:0,src:n&&n.url||""}))},ready(){const t=this;return new Promise(e=>{function i(n){t.pending()?setTimeout(()=>{i(!0)},10):e(n)}i(!1)})}};function ql(t,e,i){if(e.stroke&&e.opacity!==0&&e.strokeOpacity!==0){const n=e.strokeWidth!=null?+e.strokeWidth:1;t.expand(n+(i?Vme(e,n):0))}return t}function Vme(t,e){return t.strokeJoin&&t.strokeJoin!=="miter"?0:e}const Wme=eo-1e-8;let dS,dT,fT,If,eF,uT,tF,iF;const vc=(t,e)=>dS.add(t,e),hT=(t,e)=>vc(dT=t,fT=e),c6=t=>vc(t,dS.y1),d6=t=>vc(dS.x1,t),pf=(t,e)=>eF*t+tF*e,_f=(t,e)=>uT*t+iF*e,IB=(t,e)=>vc(pf(t,e),_f(t,e)),kB=(t,e)=>hT(pf(t,e),_f(t,e));function tw(t,e){return dS=t,e?(If=e*Jc,eF=iF=Math.cos(If),uT=Math.sin(If),tF=-uT):(eF=iF=1,If=uT=tF=0),Hme}const Hme={beginPath(){},closePath(){},moveTo:kB,lineTo:kB,rect(t,e,i,n){If?(IB(t+i,e),IB(t+i,e+n),IB(t,e+n),kB(t,e)):(vc(t+i,e+n),hT(t,e))},quadraticCurveTo(t,e,i,n){const s=pf(t,e),a=_f(t,e),c=pf(i,n),d=_f(i,n);f6(dT,s,c,c6),f6(fT,a,d,d6),hT(c,d)},bezierCurveTo(t,e,i,n,s,a){const c=pf(t,e),d=_f(t,e),f=pf(i,n),u=_f(i,n),o=pf(s,a),g=_f(s,a);u6(dT,c,f,o,c6),u6(fT,d,u,g,d6),hT(o,g)},arc(t,e,i,n,s,a){if(n+=If,s+=If,dT=i*Math.cos(s)+t,fT=i*Math.sin(s)+e,Math.abs(s-n)>Wme)vc(t-i,e-i),vc(t+i,e+i);else{const c=u=>vc(i*Math.cos(u)+t,i*Math.sin(u)+e);let d,f;if(c(n),c(s),s!==n)if(n=n%eo,n<0&&(n+=eo),s=s%eo,s<0&&(s+=eo),s<n&&(a=!a,d=n,n=s,s=d),a)for(s-=eo,d=n-n%hf,f=0;f<4&&d>s;++f,d-=hf)c(d);else for(d=n-n%hf+hf,f=0;f<4&&d<s;++f,d=d+hf)c(d)}}};function f6(t,e,i,n){const s=(t-e)/(t+i-2*e);0<s&&s<1&&n(t+(e-t)*s)}function u6(t,e,i,n,s){const a=n-t+3*e-3*i,c=t+i-2*e,d=t-e;let f=0,u=0,o;Math.abs(a)>ame?(o=c*c+d*a,o>=0&&(o=Math.sqrt(o),f=(-c+o)/a,u=(-c-o)/a)):f=.5*d/c,0<f&&f<1&&s(h6(f,t,e,i,n)),0<u&&u<1&&s(h6(u,t,e,i,n))}function h6(t,e,i,n,s){const a=1-t,c=a*a,d=t*t;return c*a*e+3*c*t*i+3*a*d*n+d*t*s}var Cc=(Cc=Hm(1,1))?Cc.getContext("2d"):null;const nF=new Di;function wN(t){return function(e,i){if(!Cc)return!0;t(Cc,e),nF.clear().union(e.bounds).intersect(i).round();const{x1:n,y1:s,x2:a,y2:c}=nF;for(let d=s;d<=c;++d)for(let f=n;f<=a;++f)if(Cc.isPointInPath(f,d))return!0;return!1}}function bN(t,e){return e.contains(t.x||0,t.y||0)}function nH(t,e){const i=t.x||0,n=t.y||0,s=t.width||0,a=t.height||0;return e.intersects(nF.set(i,n,i+s,n+a))}function sH(t,e){const i=t.x||0,n=t.y||0,s=t.x2!=null?t.x2:i,a=t.y2!=null?t.y2:n;return Dh(e,i,n,s,a)}function Dh(t,e,i,n,s){const{x1:a,y1:c,x2:d,y2:f}=t,u=n-e,o=s-i;let g=0,w=1,m,l,T,b;for(b=0;b<4;++b){if(b===0&&(m=-u,l=-(a-e)),b===1&&(m=u,l=d-e),b===2&&(m=-o,l=-(c-i)),b===3&&(m=o,l=f-i),Math.abs(m)<1e-10&&l<0)return!1;if(T=l/m,m<0){if(T>w)return!1;T>g&&(g=T)}else if(m>0){if(T<g)return!1;T<w&&(w=T)}}return!0}function Hp(t,e){t.globalCompositeOperation=e.blend||"source-over"}function $r(t,e){return t??e}function p6(t,e){const i=e.length;for(let n=0;n<i;++n)t.addColorStop(e[n].offset,e[n].color);return t}function Yme(t,e,i){const n=i.width(),s=i.height();let a;if(e.gradient==="radial")a=t.createRadialGradient(i.x1+$r(e.x1,.5)*n,i.y1+$r(e.y1,.5)*s,Math.max(n,s)*$r(e.r1,0),i.x1+$r(e.x2,.5)*n,i.y1+$r(e.y2,.5)*s,Math.max(n,s)*$r(e.r2,.5));else{const c=$r(e.x1,0),d=$r(e.y1,0),f=$r(e.x2,1),u=$r(e.y2,0);if(c===f||d===u||n===s)a=t.createLinearGradient(i.x1+c*n,i.y1+d*s,i.x1+f*n,i.y1+u*s);else{const o=Hm(Math.ceil(n),Math.ceil(s)),g=o.getContext("2d");return g.scale(n,s),g.fillStyle=p6(g.createLinearGradient(c,d,f,u),e.stops),g.fillRect(0,0,n,s),t.createPattern(o,"no-repeat")}}return p6(a,e.stops)}function rH(t,e,i){return pN(i)?Yme(t,i,e.bounds):i}function _v(t,e,i){return i*=e.fillOpacity==null?1:e.fillOpacity,i>0?(t.globalAlpha=i,t.fillStyle=rH(t,e,e.fill),!0):!1}var Xme=[];function Yp(t,e,i){var n=(n=e.strokeWidth)!=null?n:1;return n<=0?!1:(i*=e.strokeOpacity==null?1:e.strokeOpacity,i>0?(t.globalAlpha=i,t.strokeStyle=rH(t,e,e.stroke),t.lineWidth=n,t.lineCap=e.strokeCap||"butt",t.lineJoin=e.strokeJoin||"miter",t.miterLimit=e.strokeMiterLimit||10,t.setLineDash&&(t.setLineDash(e.strokeDash||Xme),t.lineDashOffset=e.strokeDashOffset||0),!0):!1)}function Kme(t,e){return t.zindex-e.zindex||t.index-e.index}function TN(t){if(!t.zdirty)return t.zitems;var e=t.items,i=[],n,s,a;for(s=0,a=e.length;s<a;++s)n=e[s],n.index=s,n.zindex&&i.push(n);return t.zdirty=!1,t.zitems=i.sort(Kme)}function pa(t,e){var i=t.items,n,s;if(!i||!i.length)return;const a=TN(t);if(a&&a.length){for(n=0,s=i.length;n<s;++n)i[n].zindex||e(i[n]);i=a}for(n=0,s=i.length;n<s;++n)e(i[n])}function yv(t,e){var i=t.items,n,s;if(!i||!i.length)return null;const a=TN(t);for(a&&a.length&&(i=a),s=i.length;--s>=0;)if(n=e(i[s]))return n;if(i===a){for(i=t.items,s=i.length;--s>=0;)if(!i[s].zindex&&(n=e(i[s])))return n}return null}function vN(t){return function(e,i,n){pa(i,s=>{(!n||n.intersects(s.bounds))&&aH(t,e,s,s)})}}function Jme(t){return function(e,i,n){i.items.length&&(!n||n.intersects(i.bounds))&&aH(t,e,i.items[0],i.items)}}function aH(t,e,i,n){var s=i.opacity==null?1:i.opacity;s!==0&&(t(e,n)||(Hp(e,i),i.fill&&_v(e,i,s)&&e.fill(),i.stroke&&Yp(e,i,s)&&e.stroke()))}function fS(t){return t=t||Ar,function(e,i,n,s,a,c){return n*=e.pixelRatio,s*=e.pixelRatio,yv(i,d=>{const f=d.bounds;if(!(f&&!f.contains(a,c)||!f)&&t(e,d,n,s,a,c))return d})}}function iw(t,e){return function(i,n,s,a){var c=Array.isArray(n)?n[0]:n,d=e??c.fill,f=c.stroke&&i.isPointInStroke,u,o;return f&&(u=c.strokeWidth,o=c.strokeCap,i.lineWidth=u??1,i.lineCap=o??"butt"),t(i,n)?!1:d&&i.isPointInPath(s,a)||f&&i.isPointInStroke(s,a)}}function EN(t){return fS(iw(t))}function Cf(t,e){return"translate("+t+","+e+")"}function SN(t){return"rotate("+t+")"}function Qme(t,e){return"scale("+t+","+e+")"}function oH(t){return Cf(t.x||0,t.y||0)}function Zme(t){return Cf(t.x||0,t.y||0)+(t.angle?" "+SN(t.angle):"")}function ewe(t){return Cf(t.x||0,t.y||0)+(t.angle?" "+SN(t.angle):"")+(t.scaleX||t.scaleY?" "+Qme(t.scaleX||1,t.scaleY||1):"")}function xN(t,e,i){function n(c,d){c("transform",Zme(d)),c("d",e(null,d))}function s(c,d){return e(tw(c,d.angle),d),ql(c,d).translate(d.x||0,d.y||0)}function a(c,d){var f=d.x||0,u=d.y||0,o=d.angle||0;c.translate(f,u),o&&c.rotate(o*=Jc),c.beginPath(),e(c,d),o&&c.rotate(-o),c.translate(-f,-u)}return{type:t,tag:"path",nested:!1,attr:n,bound:s,draw:vN(a),pick:EN(a),isect:i||wN(a)}}var twe=xN("arc",$me);function iwe(t,e){for(var i=t[0].orient==="horizontal"?e[1]:e[0],n=t[0].orient==="horizontal"?"y":"x",s=t.length,a=1/0,c,d;--s>=0;)t[s].defined!==!1&&(d=Math.abs(t[s][n]-i),d<a&&(a=d,c=t[s]));return c}function nwe(t,e){for(var i=Math.pow(t[0].strokeWidth||1,2),n=t.length,s,a,c;--n>=0;)if(t[n].defined!==!1&&(s=t[n].x-e[0],a=t[n].y-e[1],c=s*s+a*a,c<i))return t[n];return null}function swe(t,e){for(var i=t.length,n,s,a;--i>=0;)if(t[i].defined!==!1&&(n=t[i].x-e[0],s=t[i].y-e[1],a=n*n+s*s,n=t[i].size||1,a<n*n))return t[i];return null}function BN(t,e,i){function n(f,u){var o=u.mark.items;o.length&&f("d",e(null,o))}function s(f,u){var o=u.items;return o.length===0?f:(e(tw(f),o),ql(f,o[0]))}function a(f,u){f.beginPath(),e(f,u)}const c=iw(a);function d(f,u,o,g,w,m){var l=u.items,T=u.bounds;return!l||!l.length||T&&!T.contains(w,m)?null:(o*=f.pixelRatio,g*=f.pixelRatio,c(f,l,o,g)?l[0]:null)}return{type:t,tag:"path",nested:!0,attr:n,bound:s,draw:Jme(a),pick:d,isect:bN,tip:i}}var rwe=BN("area",Ume,iwe);function awe(t,e){var i=e.clip;t.save(),gt(i)?(t.beginPath(),i(t),t.clip()):lH(t,e.group)}function lH(t,e){t.beginPath(),yN(e)?I_(t,e,0,0):t.rect(0,0,e.width||0,e.height||0),t.clip()}function cH(t){const e=$r(t.strokeWidth,1);return t.strokeOffset!=null?t.strokeOffset:t.stroke&&e>.5&&e<1.5?.5-Math.abs(e-1):0}function owe(t,e){t("transform",oH(e))}function dH(t,e){const i=cH(e);t("d",I_(null,e,i,i))}function lwe(t,e){t("class","background"),t("aria-hidden",!0),dH(t,e)}function cwe(t,e){t("class","foreground"),t("aria-hidden",!0),e.strokeForeground?dH(t,e):t("d","")}function dwe(t,e,i){const n=e.clip?gN(i,e,e):null;t("clip-path",n)}function fwe(t,e){if(!e.clip&&e.items){const i=e.items,n=i.length;for(let s=0;s<n;++s)t.union(i[s].bounds)}return(e.clip||e.width||e.height)&&!e.noBound&&t.add(0,0).add(e.width||0,e.height||0),ql(t,e),t.translate(e.x||0,e.y||0)}function Yg(t,e,i,n){const s=cH(e);t.beginPath(),I_(t,e,(i||0)+s,(n||0)+s)}const uwe=iw(Yg),hwe=iw(Yg,!1),pwe=iw(Yg,!0);function _we(t,e,i){pa(e,n=>{const s=n.x||0,a=n.y||0,c=n.strokeForeground,d=n.opacity==null?1:n.opacity;(n.stroke||n.fill)&&d&&(Yg(t,n,s,a),Hp(t,n),n.fill&&_v(t,n,d)&&t.fill(),n.stroke&&!c&&Yp(t,n,d)&&t.stroke()),t.save(),t.translate(s,a),n.clip&&lH(t,n),i&&i.translate(-s,-a),pa(n,f=>{this.draw(t,f,i)}),i&&i.translate(s,a),t.restore(),c&&n.stroke&&d&&(Yg(t,n,s,a),Hp(t,n),Yp(t,n,d)&&t.stroke())})}function ywe(t,e,i,n,s,a){if(e.bounds&&!e.bounds.contains(s,a)||!e.items)return null;const c=i*t.pixelRatio,d=n*t.pixelRatio;return yv(e,f=>{let u,o,g;const w=f.bounds;if(w&&!w.contains(s,a))return;o=f.x||0,g=f.y||0;const m=o+(f.width||0),l=g+(f.height||0),T=f.clip;if(T&&(s<o||s>m||a<g||a>l))return;if(t.save(),t.translate(o,g),o=s-o,g=a-g,T&&yN(f)&&!pwe(t,f,c,d))return t.restore(),null;const b=f.strokeForeground,S=e.interactive!==!1;return S&&b&&f.stroke&&hwe(t,f,c,d)?(t.restore(),f):(u=yv(f,x=>gwe(x,o,g)?this.pick(x,i,n,o,g):null),!u&&S&&(f.fill||!b&&f.stroke)&&uwe(t,f,c,d)&&(u=f),t.restore(),u||null)})}function gwe(t,e,i){return(t.interactive!==!1||t.marktype==="group")&&t.bounds&&t.bounds.contains(e,i)}var mwe={type:"group",tag:"g",nested:!1,attr:owe,bound:fwe,draw:_we,pick:ywe,isect:nH,content:dwe,background:lwe,foreground:cwe},Xg={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function IN(t,e){var i=t.image;return(!i||t.url&&t.url!==i.url)&&(i={complete:!1,width:0,height:0},e.loadImage(t.url).then(n=>{t.image=n,t.image.url=t.url})),i}function kN(t,e){return t.width!=null?t.width:!e||!e.width?0:t.aspect!==!1&&t.height?t.height*e.width/e.height:e.width}function FN(t,e){return t.height!=null?t.height:!e||!e.height?0:t.aspect!==!1&&t.width?t.width*e.height/e.width:e.height}function uS(t,e){return t==="center"?e/2:t==="right"?e:0}function hS(t,e){return t==="middle"?e/2:t==="bottom"?e:0}function wwe(t,e,i){const n=IN(e,i),s=kN(e,n),a=FN(e,n),c=(e.x||0)-uS(e.align,s),d=(e.y||0)-hS(e.baseline,a),f=!n.src&&n.toDataURL?n.toDataURL():n.src||"";t("href",f,Xg["xmlns:xlink"],"xlink:href"),t("transform",Cf(c,d)),t("width",s),t("height",a),t("preserveAspectRatio",e.aspect===!1?"none":"xMidYMid")}function bwe(t,e){const i=e.image,n=kN(e,i),s=FN(e,i),a=(e.x||0)-uS(e.align,n),c=(e.y||0)-hS(e.baseline,s);return t.set(a,c,a+n,c+s)}function Twe(t,e,i){pa(e,n=>{if(i&&!i.intersects(n.bounds))return;const s=IN(n,this);let a=kN(n,s),c=FN(n,s);if(a===0||c===0)return;let d=(n.x||0)-uS(n.align,a),f=(n.y||0)-hS(n.baseline,c),u,o,g,w;n.aspect!==!1&&(o=s.width/s.height,g=n.width/n.height,o===o&&g===g&&o!==g&&(g<o?(w=a/o,f+=(c-w)/2,c=w):(w=c*o,d+=(a-w)/2,a=w))),(s.complete||s.toDataURL)&&(Hp(t,n),t.globalAlpha=(u=n.opacity)!=null?u:1,t.imageSmoothingEnabled=n.smooth!==!1,t.drawImage(s,d,f,a,c))})}var vwe={type:"image",tag:"image",nested:!1,attr:wwe,bound:bwe,draw:Twe,pick:fS(),isect:Ar,get:IN,xOffset:uS,yOffset:hS},Ewe=BN("line",zme,nwe);function Swe(t,e){var i=e.scaleX||1,n=e.scaleY||1;(i!==1||n!==1)&&t("vector-effect","non-scaling-stroke"),t("transform",ewe(e)),t("d",e.path)}function pT(t,e){var i=e.path;if(i==null)return!0;var n=e.x||0,s=e.y||0,a=e.scaleX||1,c=e.scaleY||1,d=(e.angle||0)*Jc,f=e.pathCache;(!f||f.path!==i)&&((e.pathCache=f=Wp(i)).path=i),d&&t.rotate&&t.translate?(t.translate(n,s),t.rotate(d),Hg(t,f,0,0,a,c),t.rotate(-d),t.translate(-n,-s)):Hg(t,f,n,s,a,c)}function xwe(t,e){return pT(tw(t,e.angle),e)?t.set(0,0,0,0):ql(t,e,!0)}var Bwe={type:"path",tag:"path",nested:!1,attr:Swe,bound:xwe,draw:vN(pT),pick:EN(pT),isect:wN(pT)};function Iwe(t,e){t("d",I_(null,e))}function kwe(t,e){var i,n;return ql(t.set(i=e.x||0,n=e.y||0,i+e.width||0,n+e.height||0),e)}function _6(t,e){t.beginPath(),I_(t,e)}var Fwe={type:"rect",tag:"path",nested:!1,attr:Iwe,bound:kwe,draw:vN(_6),pick:EN(_6),isect:nH};function Mwe(t,e){t("transform",oH(e)),t("x2",e.x2!=null?e.x2-(e.x||0):0),t("y2",e.y2!=null?e.y2-(e.y||0):0)}function Awe(t,e){var i,n;return ql(t.set(i=e.x||0,n=e.y||0,e.x2!=null?e.x2:i,e.y2!=null?e.y2:n),e)}function fH(t,e,i){var n,s,a,c;return e.stroke&&Yp(t,e,i)?(n=e.x||0,s=e.y||0,a=e.x2!=null?e.x2:n,c=e.y2!=null?e.y2:s,t.beginPath(),t.moveTo(n,s),t.lineTo(a,c),!0):!1}function Owe(t,e,i){pa(e,n=>{if(!(i&&!i.intersects(n.bounds))){var s=n.opacity==null?1:n.opacity;s&&fH(t,n,s)&&(Hp(t,n),t.stroke())}})}function Nwe(t,e,i,n){return t.isPointInStroke?fH(t,e,1)&&t.isPointInStroke(i,n):!1}var Cwe={type:"rule",tag:"line",nested:!1,attr:Mwe,bound:Awe,draw:Owe,pick:fS(Nwe),isect:sH},Rwe=xN("shape",jme),Lwe=xN("symbol",qme,bN);const y6=cV();var aa={height:Lo,measureWidth:MN,estimateWidth:sF,width:sF,canvas:uH};uH(!0);function uH(t){aa.width=t&&Cc?MN:sF}function sF(t,e){return hH(Zc(t,e),Lo(t))}function hH(t,e){return~~(.8*t.length*e)}function MN(t,e){return Lo(t)<=0||!(e=Zc(t,e))?0:pH(e,pS(t))}function pH(t,e){const i=`(${e}) ${t}`;let n=y6.get(i);return n===void 0&&(Cc.font=e,n=Cc.measureText(t).width,y6.set(i,n)),n}function Lo(t){return t.fontSize!=null?+t.fontSize||0:11}function Qc(t){return t.lineHeight!=null?t.lineHeight:Lo(t)+2}function Dwe(t){return ue(t)?t.length>1?t:t[0]:t}function nw(t){return Dwe(t.lineBreak&&t.text&&!ue(t.text)?t.text.split(t.lineBreak):t.text)}function AN(t){const e=nw(t);return(ue(e)?e.length-1:0)*Qc(t)}function Zc(t,e){const i=e==null?"":(e+"").trim();return t.limit>0&&i.length?$we(t,i):i}function Pwe(t){if(aa.width===MN){const e=pS(t);return i=>pH(i,e)}else{const e=Lo(t);return i=>hH(i,e)}}function $we(t,e){var i=+t.limit,n=Pwe(t);if(n(e)<i)return e;var s=t.ellipsis||"…",a=t.dir==="rtl",c=0,d=e.length,f;if(i-=n(s),a){for(;c<d;)f=c+d>>>1,n(e.slice(f))>i?c=f+1:d=f;return s+e.slice(c)}else{for(;c<d;)f=1+(c+d>>>1),n(e.slice(0,f))<i?c=f:d=f-1;return e.slice(0,c)+s}}function sw(t,e){var i=t.font;return(e&&i?String(i).replace(/"/g,"'"):i)||"sans-serif"}function pS(t,e){return(t.fontStyle?t.fontStyle+" ":"")+(t.fontVariant?t.fontVariant+" ":"")+(t.fontWeight?t.fontWeight+" ":"")+Lo(t)+"px "+sw(t,e)}function ON(t){var e=t.baseline,i=Lo(t);return Math.round(e==="top"?.79*i:e==="middle"?.3*i:e==="bottom"?-.21*i:e==="line-top"?.29*i+.5*Qc(t):e==="line-bottom"?.29*i-.5*Qc(t):0)}const Uwe={left:"start",center:"middle",right:"end"},rg=new Di;function _S(t){var e=t.x||0,i=t.y||0,n=t.radius||0,s;return n&&(s=(t.theta||0)-hf,e+=n*Math.cos(s),i+=n*Math.sin(s)),rg.x1=e,rg.y1=i,rg}function zwe(t,e){var i=e.dx||0,n=(e.dy||0)+ON(e),s=_S(e),a=s.x1,c=s.y1,d=e.angle||0,f;t("text-anchor",Uwe[e.align]||"start"),d?(f=Cf(a,c)+" "+SN(d),(i||n)&&(f+=" "+Cf(i,n))):f=Cf(a+i,c+n),t("transform",f)}function NN(t,e,i){var n=aa.height(e),s=e.align,a=_S(e),c=a.x1,d=a.y1,f=e.dx||0,u=(e.dy||0)+ON(e)-Math.round(.8*n),o=nw(e),g;if(ue(o)?(n+=Qc(e)*(o.length-1),g=o.reduce((w,m)=>Math.max(w,aa.width(e,m)),0)):g=aa.width(e,o),s==="center"?f-=g/2:s==="right"&&(f-=g),t.set(f+=c,u+=d,f+g,u+n),e.angle&&!i)t.rotate(e.angle*Jc,c,d);else if(i===2)return t.rotatedPoints(e.angle*Jc,c,d);return t}function jwe(t,e,i){pa(e,n=>{var s=n.opacity==null?1:n.opacity,a,c,d,f,u,o,g;if(!(i&&!i.intersects(n.bounds)||s===0||n.fontSize<=0||n.text==null||n.text.length===0)){if(t.font=pS(n),t.textAlign=n.align||"left",a=_S(n),c=a.x1,d=a.y1,n.angle&&(t.save(),t.translate(c,d),t.rotate(n.angle*Jc),c=d=0),c+=n.dx||0,d+=(n.dy||0)+ON(n),o=nw(n),Hp(t,n),ue(o))for(u=Qc(n),f=0;f<o.length;++f)g=Zc(n,o[f]),n.fill&&_v(t,n,s)&&t.fillText(g,c,d),n.stroke&&Yp(t,n,s)&&t.strokeText(g,c,d),d+=u;else g=Zc(n,o),n.fill&&_v(t,n,s)&&t.fillText(g,c,d),n.stroke&&Yp(t,n,s)&&t.strokeText(g,c,d);n.angle&&t.restore()}})}function qwe(t,e,i,n,s,a){if(e.fontSize<=0)return!1;if(!e.angle)return!0;var c=_S(e),d=c.x1,f=c.y1,u=NN(rg,e,1),o=-e.angle*Jc,g=Math.cos(o),w=Math.sin(o),m=g*s-w*a+(d-g*d+w*f),l=w*s+g*a+(f-w*d-g*f);return u.contains(m,l)}function Gwe(t,e){const i=NN(rg,t,2);return Dh(e,i[0],i[1],i[2],i[3])||Dh(e,i[0],i[1],i[4],i[5])||Dh(e,i[4],i[5],i[6],i[7])||Dh(e,i[2],i[3],i[6],i[7])}var Vwe={type:"text",tag:"text",nested:!1,attr:zwe,bound:NN,draw:jwe,pick:fS(qwe),isect:Gwe},Wwe=BN("trail",Gme,swe),rr={arc:twe,area:rwe,group:mwe,image:vwe,line:Ewe,path:Bwe,rect:Fwe,rule:Cwe,shape:Rwe,symbol:Lwe,text:Vwe,trail:Wwe};function rF(t,e,i){var n=rr[t.mark.marktype],s=e||n.bound;return n.nested&&(t=t.mark),s(t.bounds||(t.bounds=new Di),t,i)}var g6={mark:null};function _H(t,e,i){var n=rr[t.marktype],s=n.bound,a=t.items,c=a&&a.length,d,f,u,o;if(n.nested)return c?u=a[0]:(g6.mark=t,u=g6),o=rF(u,s,i),e=e&&e.union(o)||o,e;if(e=e||t.bounds&&t.bounds.clear()||new Di,c)for(d=0,f=a.length;d<f;++d)e.union(rF(a[d],s,i));return t.bounds=e}const Hwe=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function yH(t,e){return JSON.stringify(t,Hwe,e)}function gH(t){const e=typeof t=="string"?JSON.parse(t):t;return mH(e)}function mH(t){var e=t.marktype,i=t.items,n,s,a;if(i)for(s=0,a=i.length;s<a;++s)n=e?"mark":"group",i[s][n]=t,i[s].zindex&&(i[s][n].zdirty=!0),(e||n)==="group"&&mH(i[s]);return e&&_H(t),t}function CN(t){arguments.length?this.root=gH(t):(this.root=wH({marktype:"group",name:"root",role:"frame"}),this.root.items=[new cS(this.root)])}CN.prototype={toJSON(t){return yH(this.root,t||0)},mark(t,e,i){e=e||this.root.items[0];const n=wH(t,e);return e.items[i]=n,n.zindex&&(n.group.zdirty=!0),n}};function wH(t,e){const i={bounds:new Di,clip:!!t.clip,group:e,interactive:t.interactive!==!1,items:[],marktype:t.marktype,name:t.name||void 0,role:t.role||void 0,zindex:t.zindex||0};return t.aria!=null&&(i.aria=t.aria),t.description&&(i.description=t.description),i}function Ec(t,e,i){return!t&&typeof document<"u"&&document.createElement&&(t=document),t?i?t.createElementNS(i,e):t.createElement(e):null}function RN(t,e){e=e.toLowerCase();for(var i=t.childNodes,n=0,s=i.length;n<s;++n)if(i[n].tagName.toLowerCase()===e)return i[n]}function _s(t,e,i,n){var s=t.childNodes[e],a;return(!s||s.tagName.toLowerCase()!==i.toLowerCase())&&(a=s||null,s=Ec(t.ownerDocument,i,n),t.insertBefore(s,a)),s}function Qr(t,e){for(var i=t.childNodes,n=i.length;n>e;)t.removeChild(i[--n]);return t}function bH(t){return"mark-"+t.marktype+(t.role?" role-"+t.role:"")+(t.name?" "+t.name:"")}function yS(t,e){const i=e.getBoundingClientRect();return[t.clientX-i.left-(e.clientLeft||0),t.clientY-i.top-(e.clientTop||0)]}function Ywe(t,e,i,n){var s=t&&t.mark,a,c;if(s&&(a=rr[s.marktype]).tip){for(c=yS(e,i),c[0]-=n[0],c[1]-=n[1];t=t.mark.group;)c[0]-=t.x||0,c[1]-=t.y||0;t=a.tip(s.items,c)}return t}function ed(t,e){this._active=null,this._handlers={},this._loader=t||KE(),this._tooltip=e||Xwe}function Xwe(t,e,i,n){t.element().setAttribute("title",n||"")}ed.prototype={initialize(t,e,i){return this._el=t,this._obj=i||null,this.origin(e)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()},scene(t){return arguments.length?(this._scene=t,this):this._scene},on(){},off(){},_handlerIndex(t,e,i){for(let n=t?t.length:0;--n>=0;)if(t[n].type===e&&(!i||t[n].handler===i))return n;return-1},handlers(t){const e=this._handlers,i=[];if(t)i.push(...e[this.eventName(t)]);else for(const n in e)i.push(...e[n]);return i},eventName(t){const e=t.indexOf(".");return e<0?t:t.slice(0,e)},handleHref(t,e,i){this._loader.sanitize(i,{context:"href"}).then(n=>{const s=new MouseEvent(t.type,t),a=Ec(null,"a");for(const c in n)a.setAttribute(c,n[c]);a.dispatchEvent(s)}).catch(()=>{})},handleTooltip(t,e,i){if(e&&e.tooltip!=null){e=Ywe(e,t,this.canvas(),this._origin);const n=i&&e&&e.tooltip||null;this._tooltip.call(this._obj,this,t,e,n)}},getItemBoundingClientRect(t){const e=this.canvas();if(!e)return;const i=e.getBoundingClientRect(),n=this._origin,s=t.bounds,a=s.width(),c=s.height();let d=s.x1+n[0]+i.left,f=s.y1+n[1]+i.top;for(;t.mark&&(t=t.mark.group);)d+=t.x||0,f+=t.y||0;return{x:d,y:f,width:a,height:c,left:d,top:f,right:d+a,bottom:f+c}}};function Do(t){this._el=null,this._bgcolor=null,this._loader=new mN(t)}Do.prototype={initialize(t,e,i,n,s){return this._el=t,this.resize(e,i,n,s)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)},resize(t,e,i,n){return this._width=t,this._height=e,this._origin=i||[0,0],this._scale=n||1,this},dirty(){},render(t){const e=this;return e._call=function(){e._render(t)},e._call(),e._call=null,e},_render(){},renderAsync(t){const e=this.render(t);return this._ready?this._ready.then(()=>e):Promise.resolve(e)},_load(t,e){var i=this,n=i._loader[t](e);if(!i._ready){const s=i._call;i._ready=i._loader.ready().then(a=>{a&&s(),i._ready=null})}return n},sanitizeURL(t){return this._load("sanitizeURL",t)},loadImage(t){return this._load("loadImage",t)}};const Kwe="keydown",Jwe="keypress",Qwe="keyup",TH="dragenter",_T="dragleave",vH="dragover",aF="mousedown",Zwe="mouseup",gv="mousemove",ag="mouseout",EH="mouseover",mv="click",ebe="dblclick",tbe="wheel",SH="mousewheel",wv="touchstart",bv="touchmove",Tv="touchend",ibe=[Kwe,Jwe,Qwe,TH,_T,vH,aF,Zwe,gv,ag,EH,mv,ebe,tbe,SH,wv,bv,Tv],oF=gv,Kg=ag,lF=mv;function rw(t,e){ed.call(this,t,e),this._down=null,this._touch=null,this._first=!0,this._events={}}const nbe=t=>t===wv||t===bv||t===Tv?[wv,bv,Tv]:[t];function m6(t,e){nbe(e).forEach(i=>sbe(t,i))}function sbe(t,e){const i=t.canvas();i&&!t._events[e]&&(t._events[e]=1,i.addEventListener(e,t[e]?n=>t[e](n):n=>t.fire(e,n)))}function w6(t,e,i){return function(n){const s=this._active,a=this.pickEvent(n);a===s?this.fire(t,n):((!s||!s.exit)&&this.fire(i,n),this._active=a,this.fire(e,n),this.fire(t,n))}}function b6(t){return function(e){this.fire(t,e),this._active=null}}Ee(rw,ed,{initialize(t,e,i){return this._canvas=t&&RN(t,"canvas"),[mv,aF,gv,ag,_T].forEach(n=>m6(this,n)),ed.prototype.initialize.call(this,t,e,i)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:ibe,DOMMouseScroll(t){this.fire(SH,t)},mousemove:w6(gv,EH,ag),dragover:w6(vH,TH,_T),mouseout:b6(ag),dragleave:b6(_T),mousedown(t){this._down=this._active,this.fire(aF,t)},click(t){this._down===this._active&&(this.fire(mv,t),this._down=null)},touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(wv,t,!0)},touchmove(t){this.fire(bv,t,!0)},touchend(t){this.fire(Tv,t,!0),this._touch=null},fire(t,e,i){const n=i?this._touch:this._active,s=this._handlers[t];if(e.vegaType=t,t===lF&&n&&n.href?this.handleHref(e,n,n.href):(t===oF||t===Kg)&&this.handleTooltip(e,n,t!==Kg),s)for(let a=0,c=s.length;a<c;++a)s[a].handler.call(this._obj,e,n)},on(t,e){const i=this.eventName(t),n=this._handlers;return this._handlerIndex(n[i],t,e)<0&&(m6(this,t),(n[i]||(n[i]=[])).push({type:t,handler:e})),this},off(t,e){const i=this.eventName(t),n=this._handlers[i],s=this._handlerIndex(n,t,e);return s>=0&&n.splice(s,1),this},pickEvent(t){const e=yS(t,this._canvas),i=this._origin;return this.pick(this._scene,e[0],e[1],e[0]-i[0],e[1]-i[1])},pick(t,e,i,n,s){const a=this.context();return rr[t.marktype].pick.call(this,a,t,e,i,n,s)}});function rbe(){return typeof window<"u"&&window.devicePixelRatio||1}var abe=rbe();function obe(t,e,i,n,s,a){const c=typeof HTMLElement<"u"&&t instanceof HTMLElement&&t.parentNode!=null,d=t.getContext("2d"),f=c?abe:s;t.width=e*f,t.height=i*f;for(const u in a)d[u]=a[u];return c&&f!==1&&(t.style.width=e+"px",t.style.height=i+"px"),d.pixelRatio=f,d.setTransform(f,0,0,f,f*n[0],f*n[1]),t}function vv(t){Do.call(this,t),this._options={},this._redraw=!1,this._dirty=new Di,this._tempb=new Di}const T6=Do.prototype,lbe=(t,e,i)=>new Di().set(0,0,e,i).translate(-t[0],-t[1]);function cbe(t,e,i){return e.expand(1).round(),t.pixelRatio%1&&e.scale(t.pixelRatio).round().scale(1/t.pixelRatio),e.translate(-(i[0]%1),-(i[1]%1)),t.beginPath(),t.rect(e.x1,e.y1,e.width(),e.height()),t.clip(),e}Ee(vv,Do,{initialize(t,e,i,n,s,a){return this._options=a||{},this._canvas=this._options.externalContext?null:Hm(1,1,this._options.type),t&&this._canvas&&(Qr(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),T6.initialize.call(this,t,e,i,n,s)},resize(t,e,i,n){if(T6.resize.call(this,t,e,i,n),this._canvas)obe(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||de("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(t){const e=this._tempb.clear().union(t.bounds);let i=t.mark.group;for(;i;)e.translate(i.x||0,i.y||0),i=i.mark.group;this._dirty.union(e)},_render(t){const e=this.context(),i=this._origin,n=this._width,s=this._height,a=this._dirty,c=lbe(i,n,s);e.save();const d=this._redraw||a.empty()?(this._redraw=!1,c.expand(1)):cbe(e,c.intersect(a),i);return this.clear(-i[0],-i[1],n,s),this.draw(e,t,d),e.restore(),a.clear(),this},draw(t,e,i){const n=rr[e.marktype];e.clip&&awe(t,e),n.draw.call(this,t,e,i),e.clip&&t.restore()},clear(t,e,i,n){const s=this._options,a=this.context();s.type!=="pdf"&&!s.externalContext&&a.clearRect(t,e,i,n),this._bgcolor!=null&&(a.fillStyle=this._bgcolor,a.fillRect(t,e,i,n))}});function LN(t,e){ed.call(this,t,e);const i=this;i._hrefHandler=cF(i,(n,s)=>{s&&s.href&&i.handleHref(n,s,s.href)}),i._tooltipHandler=cF(i,(n,s)=>{i.handleTooltip(n,s,n.type!==Kg)})}const cF=(t,e)=>i=>{let n=i.target.__data__;n=Array.isArray(n)?n[0]:n,i.vegaType=i.type,e.call(t._obj,i,n)};Ee(LN,ed,{initialize(t,e,i){let n=this._svg;return n&&(n.removeEventListener(lF,this._hrefHandler),n.removeEventListener(oF,this._tooltipHandler),n.removeEventListener(Kg,this._tooltipHandler)),this._svg=n=t&&RN(t,"svg"),n&&(n.addEventListener(lF,this._hrefHandler),n.addEventListener(oF,this._tooltipHandler),n.addEventListener(Kg,this._tooltipHandler)),ed.prototype.initialize.call(this,t,e,i)},canvas(){return this._svg},on(t,e){const i=this.eventName(t),n=this._handlers;if(this._handlerIndex(n[i],t,e)<0){const a={type:t,handler:e,listener:cF(this,e)};(n[i]||(n[i]=[])).push(a),this._svg&&this._svg.addEventListener(i,a.listener)}return this},off(t,e){const i=this.eventName(t),n=this._handlers[i],s=this._handlerIndex(n,t,e);return s>=0&&(this._svg&&this._svg.removeEventListener(i,n[s].listener),n.splice(s,1)),this}});const xH="aria-hidden",DN="aria-label",PN="role",$N="aria-roledescription",BH="graphics-object",UN="graphics-symbol",IH=(t,e,i)=>({[PN]:t,[$N]:e,[DN]:i||void 0}),dbe=ua(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),v6={axis:{desc:"axis",caption:hbe},legend:{desc:"legend",caption:pbe},"title-text":{desc:"title",caption:t=>`Title text '${S6(t)}'`},"title-subtitle":{desc:"subtitle",caption:t=>`Subtitle text '${S6(t)}'`}},E6={ariaRole:PN,ariaRoleDescription:$N,description:DN};function kH(t,e){const i=e.aria===!1;if(t(xH,i||void 0),i||e.description==null)for(const n in E6)t(E6[n],void 0);else{const n=e.mark.marktype;t(DN,e.description),t(PN,e.ariaRole||(n==="group"?BH:UN)),t($N,e.ariaRoleDescription||`${n} mark`)}}function FH(t){return t.aria===!1?{[xH]:!0}:dbe[t.role]?null:v6[t.role]?ube(t,v6[t.role]):fbe(t)}function fbe(t){const e=t.marktype,i=e==="group"||e==="text"||t.items.some(n=>n.description!=null&&n.aria!==!1);return IH(i?BH:UN,`${e} mark container`,t.description)}function ube(t,e){try{const i=t.items[0],n=e.caption||(()=>"");return IH(e.role||UN,e.desc,i.description||n(i))}catch{return null}}function S6(t){return ke(t.text).join(" ")}function hbe(t){const e=t.datum,i=t.orient,n=e.title?MH(t):null,s=t.context,a=s.scales[e.scale].value,c=s.dataflow.locale(),d=a.type;return`${i==="left"||i==="right"?"Y":"X"}-axis`+(n?` titled '${n}'`:"")+` for a ${Vp(d)?"discrete":d} scale with ${HW(c,a,t)}`}function pbe(t){const e=t.datum,i=e.title?MH(t):null,n=`${e.type||""} legend`.trim(),s=e.scales,a=Object.keys(s),c=t.context,d=c.scales[s[a[0]]].value,f=c.dataflow.locale();return ybe(n)+(i?` titled '${i}'`:"")+` for ${_be(a)} with ${HW(f,d,t)}`}function MH(t){try{return ke(At(t.items).items[0].text).join(" ")}catch{return null}}function _be(t){return t=t.map(e=>e+(e==="fill"||e==="stroke"?" color":"")),t.length<2?t[0]:t.slice(0,-1).join(", ")+" and "+At(t)}function ybe(t){return t.length?t[0].toUpperCase()+t.slice(1):t}const AH=t=>(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),gbe=t=>AH(t).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function zN(){let t="",e="",i="";const n=[],s=()=>e=i="",a=f=>{e&&(t+=`${e}>${i}`,s()),n.push(f)},c=(f,u)=>(u!=null&&(e+=` ${f}="${gbe(u)}"`),d),d={open(f){a(f),e="<"+f;for(var u=arguments.length,o=new Array(u>1?u-1:0),g=1;g<u;g++)o[g-1]=arguments[g];for(const w of o)for(const m in w)c(m,w[m]);return d},close(){const f=n.pop();return e?t+=e+(i?`>${i}</${f}>`:"/>"):t+=`</${f}>`,s(),d},attr:c,text:f=>(i+=AH(f),d),toString:()=>t};return d}const OH=t=>NH(zN(),t)+"";function NH(t,e){if(t.open(e.tagName),e.hasAttributes()){const i=e.attributes,n=i.length;for(let s=0;s<n;++s)t.attr(i[s].name,i[s].value)}if(e.hasChildNodes()){const i=e.childNodes;for(const n of i)n.nodeType===3?t.text(n.nodeValue):NH(t,n)}return t.close()}const Ev={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},Sv={blend:"mix-blend-mode"},CH={fill:"none","stroke-miterlimit":10},ey=0,x6="http://www.w3.org/2000/xmlns/",qi=Xg.xmlns;function jN(t){Do.call(this,t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const FB=Do.prototype;Ee(jN,Do,{initialize(t,e,i,n,s){return this._defs={},this._clearDefs(),t&&(this._svg=_s(t,0,"svg",qi),this._svg.setAttributeNS(x6,"xmlns",qi),this._svg.setAttributeNS(x6,"xmlns:xlink",Xg["xmlns:xlink"]),this._svg.setAttribute("version",Xg.version),this._svg.setAttribute("class","marks"),Qr(t,1),this._root=_s(this._svg,ey,"g",qi),Sc(this._root,CH),Qr(this._svg,ey+1)),this.background(this._bgcolor),FB.initialize.call(this,t,e,i,n,s)},background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),FB.background.apply(this,arguments)},resize(t,e,i,n){return FB.resize.call(this,t,e,i,n),this._svg&&(Sc(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this},canvas(){return this._svg},svg(){const t=this._svg,e=this._bgcolor;if(!t)return null;let i;e&&(t.removeAttribute("style"),i=_s(t,ey,"rect",qi),Sc(i,{width:this._width,height:this._height,fill:e}));const n=OH(t);return e&&(t.removeChild(i),this._svg.style.setProperty("background-color",e)),n},_render(t){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t),Qr(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))},isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const e=++this._dirtyID;let i,n,s,a,c,d,f;for(c=0,d=t.length;c<d;++c)if(i=t[c],n=i.mark,n.marktype!==s&&(s=n.marktype,a=rr[s]),n.zdirty&&n.dirty!==e&&(this._dirtyAll=!1,B6(i,e),n.items.forEach(u=>{u.dirty=e})),!n.zdirty){if(i.exit){a.nested&&n.items.length?(f=n.items[0],f._svg&&this._update(a,f._svg,f)):i._svg&&(f=i._svg.parentNode,f&&f.removeChild(i._svg)),i._svg=null;continue}i=a.nested?n.items[0]:i,i._update!==e&&(!i._svg||!i._svg.ownerSVGElement?(this._dirtyAll=!1,B6(i,e)):this._update(a,i._svg,i),i._update=e)}return!this._dirtyAll},mark(t,e,i){if(!this.isDirty(e))return e._svg;const n=this._svg,s=rr[e.marktype],a=e.interactive===!1?"none":null,c=s.tag==="g",d=I6(e,t,i,"g",n);d.setAttribute("class",bH(e));const f=FH(e);for(const w in f)jn(d,w,f[w]);c||jn(d,"pointer-events",a),jn(d,"clip-path",e.clip?gN(this,e,e.group):null);let u=null,o=0;const g=w=>{const m=this.isDirty(w),l=I6(w,d,u,s.tag,n);m&&(this._update(s,l,w),c&&bbe(this,l,w)),u=l,++o};return s.nested?e.items.length&&g(e.items[0]):pa(e,g),Qr(d,o),d},_update(t,e,i){ml=e,xn=e.__values__,kH(og,i),t.attr(og,i,this);const n=vbe[t.type];n&&n.call(this,t,e,i),ml&&this.style(ml,i)},style(t,e){if(e!=null){for(const i in Ev){let n=i==="font"?sw(e):e[i];if(n===xn[i])continue;const s=Ev[i];n==null?t.removeAttribute(s):(pN(n)&&(n=XW(n,this._defs.gradient,RH())),t.setAttribute(s,n+"")),xn[i]=n}for(const i in Sv)yT(t,Sv[i],e[i])}},defs(){const t=this._svg,e=this._defs;let i=e.el,n=0;for(const s in e.gradient)i||(e.el=i=_s(t,ey+1,"defs",qi)),n=mbe(i,e.gradient[s],n);for(const s in e.clipping)i||(e.el=i=_s(t,ey+1,"defs",qi)),n=wbe(i,e.clipping[s],n);i&&(n===0?(t.removeChild(i),e.el=null):Qr(i,n))},_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}});function B6(t,e){for(;t&&t.dirty!==e;t=t.mark.group)if(t.dirty=e,t.mark&&t.mark.dirty!==e)t.mark.dirty=e;else return}function mbe(t,e,i){let n,s,a;if(e.gradient==="radial"){let c=_s(t,i++,"pattern",qi);Sc(c,{id:pv+e.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),c=_s(c,0,"rect",qi),Sc(c,{width:1,height:1,fill:`url(${RH()}#${e.id})`}),t=_s(t,i++,"radialGradient",qi),Sc(t,{id:e.id,fx:e.x1,fy:e.y1,fr:e.r1,cx:e.x2,cy:e.y2,r:e.r2})}else t=_s(t,i++,"linearGradient",qi),Sc(t,{id:e.id,x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2});for(n=0,s=e.stops.length;n<s;++n)a=_s(t,n,"stop",qi),a.setAttribute("offset",e.stops[n].offset),a.setAttribute("stop-color",e.stops[n].color);return Qr(t,n),i}function wbe(t,e,i){let n;return t=_s(t,i,"clipPath",qi),t.setAttribute("id",e.id),e.path?(n=_s(t,0,"path",qi),n.setAttribute("d",e.path)):(n=_s(t,0,"rect",qi),Sc(n,{x:0,y:0,width:e.width,height:e.height})),Qr(t,1),i+1}function bbe(t,e,i){e=e.lastChild.previousSibling;let n,s=0;pa(i,a=>{n=t.mark(e,a,n),++s}),Qr(e,1+s)}function I6(t,e,i,n,s){let a=t._svg,c;if(!a&&(c=e.ownerDocument,a=Ec(c,n,qi),t._svg=a,t.mark&&(a.__data__=t,a.__values__={fill:"default"},n==="g"))){const d=Ec(c,"path",qi);a.appendChild(d),d.__data__=t;const f=Ec(c,"g",qi);a.appendChild(f),f.__data__=t;const u=Ec(c,"path",qi);a.appendChild(u),u.__data__=t,u.__values__={fill:"default"}}return(a.ownerSVGElement!==s||Tbe(a,i))&&e.insertBefore(a,i?i.nextSibling:e.firstChild),a}function Tbe(t,e){return t.parentNode&&t.parentNode.childNodes.length>1&&t.previousSibling!=e}let ml=null,xn=null;const vbe={group(t,e,i){const n=ml=e.childNodes[2];xn=n.__values__,t.foreground(og,i,this),xn=e.__values__,ml=e.childNodes[1],t.content(og,i,this);const s=ml=e.childNodes[0];t.background(og,i,this);const a=i.mark.interactive===!1?"none":null;if(a!==xn.events&&(jn(n,"pointer-events",a),jn(s,"pointer-events",a),xn.events=a),i.strokeForeground&&i.stroke){const c=i.fill;jn(n,"display",null),this.style(s,i),jn(s,"stroke",null),c&&(i.fill=null),xn=n.__values__,this.style(n,i),c&&(i.fill=c),ml=null}else jn(n,"display","none")},image(t,e,i){i.smooth===!1?(yT(e,"image-rendering","optimizeSpeed"),yT(e,"image-rendering","pixelated")):yT(e,"image-rendering",null)},text(t,e,i){const n=nw(i);let s,a,c,d;ue(n)?(a=n.map(f=>Zc(i,f)),s=a.join(`
`),s!==xn.text&&(Qr(e,0),c=e.ownerDocument,d=Qc(i),a.forEach((f,u)=>{const o=Ec(c,"tspan",qi);o.__data__=i,o.textContent=f,u&&(o.setAttribute("x",0),o.setAttribute("dy",d)),e.appendChild(o)}),xn.text=s)):(a=Zc(i,n),a!==xn.text&&(e.textContent=a,xn.text=a)),jn(e,"font-family",sw(i)),jn(e,"font-size",Lo(i)+"px"),jn(e,"font-style",i.fontStyle),jn(e,"font-variant",i.fontVariant),jn(e,"font-weight",i.fontWeight)}};function og(t,e,i){e!==xn[t]&&(i?Ebe(ml,t,e,i):jn(ml,t,e),xn[t]=e)}function yT(t,e,i){i!==xn[e]&&(i==null?t.style.removeProperty(e):t.style.setProperty(e,i+""),xn[e]=i)}function Sc(t,e){for(const i in e)jn(t,i,e[i])}function jn(t,e,i){i!=null?t.setAttribute(e,i):t.removeAttribute(e)}function Ebe(t,e,i,n){i!=null?t.setAttributeNS(n,e,i):t.removeAttributeNS(n,e)}function RH(){let t;return typeof window>"u"?"":(t=window.location).hash?t.href.slice(0,-t.hash.length):t.href}function qN(t){Do.call(this,t),this._text=null,this._defs={gradient:{},clipping:{}}}Ee(qN,Do,{svg(){return this._text},_render(t){const e=zN();e.open("svg",yt({},Xg,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const i=this._bgcolor;return i&&i!=="transparent"&&i!=="none"&&e.open("rect",{width:this._width,height:this._height,fill:i}).close(),e.open("g",CH,{transform:"translate("+this._origin+")"}),this.mark(e,t),e.close(),this.defs(e),this._text=e.close()+"",this},mark(t,e){const i=rr[e.marktype],n=i.tag,s=[kH,i.attr];t.open("g",{class:bH(e),"clip-path":e.clip?gN(this,e,e.group):null},FH(e),{"pointer-events":n!=="g"&&e.interactive===!1?"none":null});const a=c=>{const d=this.href(c);if(d&&t.open("a",d),t.open(n,this.attr(e,c,s,n!=="g"?n:null)),n==="text"){const f=nw(c);if(ue(f)){const u={x:0,dy:Qc(c)};for(let o=0;o<f.length;++o)t.open("tspan",o?u:null).text(Zc(c,f[o])).close()}else t.text(Zc(c,f))}else if(n==="g"){const f=c.strokeForeground,u=c.fill,o=c.stroke;f&&o&&(c.stroke=null),t.open("path",this.attr(e,c,i.background,"bgrect")).close(),t.open("g",this.attr(e,c,i.content)),pa(c,g=>this.mark(t,g)),t.close(),f&&o?(u&&(c.fill=null),c.stroke=o,t.open("path",this.attr(e,c,i.foreground,"bgrect")).close(),u&&(c.fill=u)):t.open("path",this.attr(e,c,i.foreground,"bgfore")).close()}t.close(),d&&t.close()};return i.nested?e.items&&e.items.length&&a(e.items[0]):pa(e,a),t.close()},href(t){const e=t.href;let i;if(e){if(i=this._hrefs&&this._hrefs[e])return i;this.sanitizeURL(e).then(n=>{n["xlink:href"]=n.href,n.href=null,(this._hrefs||(this._hrefs={}))[e]=n})}return null},attr(t,e,i,n){const s={},a=(c,d,f,u)=>{s[u||c]=d};return Array.isArray(i)?i.forEach(c=>c(a,e,this)):i(a,e,this),n&&Sbe(s,e,t,n,this._defs),s},defs(t){const e=this._defs.gradient,i=this._defs.clipping;if(Object.keys(e).length+Object.keys(i).length!==0){t.open("defs");for(const s in e){const a=e[s],c=a.stops;a.gradient==="radial"?(t.open("pattern",{id:pv+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:a.x1,fy:a.y1,fr:a.r1,cx:a.x2,cy:a.y2,r:a.r2})):t.open("linearGradient",{id:s,x1:a.x1,x2:a.x2,y1:a.y1,y2:a.y2});for(let d=0;d<c.length;++d)t.open("stop",{offset:c[d].offset,"stop-color":c[d].color}).close();t.close()}for(const s in i){const a=i[s];t.open("clipPath",{id:s}),a.path?t.open("path",{d:a.path}).close():t.open("rect",{x:0,y:0,width:a.width,height:a.height}).close(),t.close()}t.close()}}});function Sbe(t,e,i,n,s){let a;if(e==null||(n==="bgrect"&&i.interactive===!1&&(t["pointer-events"]="none"),n==="bgfore"&&(i.interactive===!1&&(t["pointer-events"]="none"),t.display="none",e.fill!==null)))return t;n==="image"&&e.smooth===!1&&(a=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),n==="text"&&(t["font-family"]=sw(e),t["font-size"]=Lo(e)+"px",t["font-style"]=e.fontStyle,t["font-variant"]=e.fontVariant,t["font-weight"]=e.fontWeight);for(const c in Ev){let d=e[c];const f=Ev[c];d==="transparent"&&(f==="fill"||f==="stroke")||d!=null&&(pN(d)&&(d=XW(d,s.gradient,"")),t[f]=d)}for(const c in Sv){const d=e[c];d!=null&&(a=a||[],a.push(`${Sv[c]}: ${d};`))}return a&&(t.style=a.join(" ")),t}const LH="canvas",DH="png",PH="svg",$H="none",xc={Canvas:LH,PNG:DH,SVG:PH,None:$H},Xp={};Xp[LH]=Xp[DH]={renderer:vv,headless:vv,handler:rw};Xp[PH]={renderer:jN,headless:qN,handler:LN};Xp[$H]={};function gS(t,e){return t=String(t||"").toLowerCase(),arguments.length>1?(Xp[t]=e,this):Xp[t]}function UH(t,e,i){const n=[],s=new Di().union(e),a=t.marktype;return a?zH(t,s,i,n):a==="group"?jH(t,s,i,n):de("Intersect scene must be mark node or group item.")}function zH(t,e,i,n){if(xbe(t,e,i)){const s=t.items,a=t.marktype,c=s.length;let d=0;if(a==="group")for(;d<c;++d)jH(s[d],e,i,n);else for(const f=rr[a].isect;d<c;++d){const u=s[d];qH(u,e,f)&&n.push(u)}}return n}function xbe(t,e,i){return t.bounds&&e.intersects(t.bounds)&&(t.marktype==="group"||t.interactive!==!1&&(!i||i(t)))}function jH(t,e,i,n){i&&i(t.mark)&&qH(t,e,rr.group.isect)&&n.push(t);const s=t.items,a=s&&s.length;if(a){const c=t.x||0,d=t.y||0;e.translate(-c,-d);for(let f=0;f<a;++f)zH(s[f],e,i,n);e.translate(c,d)}return n}function qH(t,e,i){const n=t.bounds;return e.encloses(n)||e.intersects(n)&&i(t,e)}const MB=new Di;function GH(t){const e=t.clip;if(gt(e))e(tw(MB.clear()));else if(e)MB.set(0,0,t.group.width,t.group.height);else return;t.bounds.intersect(MB)}const Bbe=1e-9;function GN(t,e,i){return t===e?!0:i==="path"?VH(t,e):t instanceof Date&&e instanceof Date?+t==+e:ii(t)&&ii(e)?Math.abs(t-e)<=Bbe:!t||!e||!Me(t)&&!Me(e)?t==e:Ibe(t,e)}function VH(t,e){return GN(Wp(t),Wp(e))}function Ibe(t,e){var i=Object.keys(t),n=Object.keys(e),s,a;if(i.length!==n.length)return!1;for(i.sort(),n.sort(),a=i.length-1;a>=0;a--)if(i[a]!=n[a])return!1;for(a=i.length-1;a>=0;a--)if(s=i[a],!GN(t[s],e[s],s))return!1;return typeof t==typeof e}function kbe(){iH(),Zge()}const Kp="top",Zr="left",ta="right",td="bottom",Fbe="top-left",Mbe="top-right",Abe="bottom-left",Obe="bottom-right",VN="start",dF="middle",qn="end",Nbe="x",Cbe="y",mS="group",WN="axis",HN="title",Rbe="frame",Lbe="scope",YN="legend",WH="row-header",HH="row-footer",YH="row-title",XH="column-header",KH="column-footer",JH="column-title",Dbe="padding",Pbe="symbol",QH="fit",ZH="fit-x",eY="fit-y",$be="pad",XN="none",h0="all",fF="each",KN="flush",Bc="column",Ic="row";function tY(t){ae.call(this,null,t)}Ee(tY,ae,{transform(t,e){const i=e.dataflow,n=t.mark,s=n.marktype,a=rr[s],c=a.bound;let d=n.bounds,f;if(a.nested)n.items.length&&i.dirty(n.items[0]),d=p0(n,c),n.items.forEach(u=>{u.bounds.clear().union(d)});else if(s===mS||t.modified())switch(e.visit(e.MOD,u=>i.dirty(u)),d.clear(),n.items.forEach(u=>d.union(p0(u,c))),n.role){case WN:case YN:case HN:e.reflow()}else f=e.changed(e.REM),e.visit(e.ADD,u=>{d.union(p0(u,c))}),e.visit(e.MOD,u=>{f=f||d.alignsWith(u.bounds),i.dirty(u),d.union(p0(u,c))}),f&&(d.clear(),n.items.forEach(u=>d.union(u.bounds)));return GH(n),e.modifies("bounds")}});function p0(t,e,i){return e(t.bounds.clear(),t,i)}const k6=":vega_identifier:";function JN(t){ae.call(this,0,t)}JN.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};Ee(JN,ae,{transform(t,e){const i=Ube(e.dataflow),n=t.as;let s=i.value;return e.visit(e.ADD,a=>a[n]=a[n]||++s),i.set(this.value=s),e}});function Ube(t){return t._signals[k6]||(t._signals[k6]=t.add(0))}function iY(t){ae.call(this,null,t)}Ee(iY,ae,{transform(t,e){let i=this.value;i||(i=e.dataflow.scenegraph().mark(t.markdef,zbe(t),t.index),i.group.context=t.context,t.context.group||(t.context.group=i.group),i.source=this.source,i.clip=t.clip,i.interactive=t.interactive,this.value=i);const n=i.marktype===mS?cS:lS;return e.visit(e.ADD,s=>n.call(s,i)),(t.modified("clip")||t.modified("interactive"))&&(i.clip=t.clip,i.interactive=!!t.interactive,i.zdirty=!0,e.reflow()),i.items=e.source,e}});function zbe(t){const e=t.groups,i=t.parent;return e&&e.size===1?e.get(Object.keys(e.object)[0]):e&&i?e.lookup(i):null}function nY(t){ae.call(this,null,t)}const F6={parity:t=>t.filter((e,i)=>i%2?e.opacity=0:1),greedy:(t,e)=>{let i;return t.filter((n,s)=>!s||!sY(i.bounds,n.bounds,e)?(i=n,1):n.opacity=0)}},sY=(t,e,i)=>i>Math.max(e.x1-t.x2,t.x1-e.x2,e.y1-t.y2,t.y1-e.y2),M6=(t,e)=>{for(var i=1,n=t.length,s=t[0].bounds,a;i<n;s=a,++i)if(sY(s,a=t[i].bounds,e))return!0},jbe=t=>{const e=t.bounds;return e.width()>1&&e.height()>1},qbe=(t,e,i)=>{var n=t.range(),s=new Di;return e===Kp||e===td?s.set(n[0],-1/0,n[1],1/0):s.set(-1/0,n[0],1/0,n[1]),s.expand(i||1),a=>s.encloses(a.bounds)},A6=t=>(t.forEach(e=>e.opacity=1),t),O6=(t,e)=>t.reflow(e.modified()).modifies("opacity");Ee(nY,ae,{transform(t,e){const i=F6[t.method]||F6.parity,n=t.separation||0;let s=e.materialize(e.SOURCE).source,a,c;if(!s||!s.length)return;if(!t.method)return t.modified("method")&&(A6(s),e=O6(e,t)),e;if(s=s.filter(jbe),!s.length)return;if(t.sort&&(s=s.slice().sort(t.sort)),a=A6(s),e=O6(e,t),a.length>=3&&M6(a,n)){do a=i(a,n);while(a.length>=3&&M6(a,n));a.length<3&&!At(s).opacity&&(a.length>1&&(At(a).opacity=0),At(s).opacity=1)}t.boundScale&&t.boundTolerance>=0&&(c=qbe(t.boundScale,t.boundOrient,+t.boundTolerance),s.forEach(f=>{c(f)||(f.opacity=0)}));const d=a[0].mark.bounds.clear();return s.forEach(f=>{f.opacity&&d.union(f.bounds)}),e}});function rY(t){ae.call(this,null,t)}Ee(rY,ae,{transform(t,e){const i=e.dataflow;if(e.visit(e.ALL,n=>i.dirty(n)),e.fields&&e.fields.zindex){const n=e.source&&e.source[0];n&&(n.mark.zdirty=!0)}}});const Sn=new Di;function Ph(t,e,i){return t[e]===i?0:(t[e]=i,1)}function Gbe(t){var e=t.items[0].orient;return e===Zr||e===ta}function Vbe(t){let e=+t.grid;return[t.ticks?e++:-1,t.labels?e++:-1,e+ +t.domain]}function Wbe(t,e,i,n){var s=e.items[0],a=s.datum,c=s.translate!=null?s.translate:.5,d=s.orient,f=Vbe(a),u=s.range,o=s.offset,g=s.position,w=s.minExtent,m=s.maxExtent,l=a.title&&s.items[f[2]].items[0],T=s.titlePadding,b=s.bounds,S=l&&AN(l),x=0,B=0,F,I;switch(Sn.clear().union(b),b.clear(),(F=f[0])>-1&&b.union(s.items[F].bounds),(F=f[1])>-1&&b.union(s.items[F].bounds),d){case Kp:x=g||0,B=-o,I=Math.max(w,Math.min(m,-b.y1)),b.add(0,-I).add(u,0),l&&_0(t,l,I,T,S,0,-1,b);break;case Zr:x=-o,B=g||0,I=Math.max(w,Math.min(m,-b.x1)),b.add(-I,0).add(0,u),l&&_0(t,l,I,T,S,1,-1,b);break;case ta:x=i+o,B=g||0,I=Math.max(w,Math.min(m,b.x2)),b.add(0,0).add(I,u),l&&_0(t,l,I,T,S,1,1,b);break;case td:x=g||0,B=n+o,I=Math.max(w,Math.min(m,b.y2)),b.add(0,0).add(u,I),l&&_0(t,l,I,T,0,0,1,b);break;default:x=s.x,B=s.y}return ql(b.translate(x,B),s),Ph(s,"x",x+c)|Ph(s,"y",B+c)&&(s.bounds=Sn,t.dirty(s),s.bounds=b,t.dirty(s)),s.mark.bounds.clear().union(b)}function _0(t,e,i,n,s,a,c,d){const f=e.bounds;if(e.auto){const u=c*(i+s+n);let o=0,g=0;t.dirty(e),a?o=(e.x||0)-(e.x=u):g=(e.y||0)-(e.y=u),e.mark.bounds.clear().union(f.translate(-o,-g)),t.dirty(e)}d.union(f)}const N6=(t,e)=>Math.floor(Math.min(t,e)),C6=(t,e)=>Math.ceil(Math.max(t,e));function Hbe(t){var e=t.items,i=e.length,n=0,s,a;const c={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;n<i;++n)if(s=e[n],a=s.items,s.marktype===mS)switch(s.role){case WN:case YN:case HN:break;case WH:c.rowheaders.push(...a);break;case HH:c.rowfooters.push(...a);break;case XH:c.colheaders.push(...a);break;case KH:c.colfooters.push(...a);break;case YH:c.rowtitle=a[0];break;case JH:c.coltitle=a[0];break;default:c.marks.push(...a)}return c}function Ybe(t){return new Di().set(0,0,t.width||0,t.height||0)}function Xbe(t){const e=t.bounds.clone();return e.empty()?e.set(0,0,0,0):e.translate(-(t.x||0),-(t.y||0))}function wi(t,e,i){const n=Me(t)?t[e]:t;return n??(i!==void 0?i:0)}function R6(t){return t<0?Math.ceil(-t):0}function aY(t,e,i){var n=!i.nodirty,s=i.bounds===KN?Ybe:Xbe,a=Sn.set(0,0,0,0),c=wi(i.align,Bc),d=wi(i.align,Ic),f=wi(i.padding,Bc),u=wi(i.padding,Ic),o=i.columns||e.length,g=o<=0?1:Math.ceil(e.length/o),w=e.length,m=Array(w),l=Array(o),T=0,b=Array(w),S=Array(g),x=0,B=Array(w),F=Array(w),I=Array(w),A,O,R,D,P,U,Y,z,W,V,H;for(O=0;O<o;++O)l[O]=0;for(O=0;O<g;++O)S[O]=0;for(O=0;O<w;++O)U=e[O],P=I[O]=s(U),U.x=U.x||0,B[O]=0,U.y=U.y||0,F[O]=0,R=O%o,D=~~(O/o),T=Math.max(T,Y=Math.ceil(P.x2)),x=Math.max(x,z=Math.ceil(P.y2)),l[R]=Math.max(l[R],Y),S[D]=Math.max(S[D],z),m[O]=f+R6(P.x1),b[O]=u+R6(P.y1),n&&t.dirty(e[O]);for(O=0;O<w;++O)O%o===0&&(m[O]=0),O<o&&(b[O]=0);if(c===fF)for(R=1;R<o;++R){for(H=0,O=R;O<w;O+=o)H<m[O]&&(H=m[O]);for(O=R;O<w;O+=o)m[O]=H+l[R-1]}else if(c===h0){for(H=0,O=0;O<w;++O)O%o&&H<m[O]&&(H=m[O]);for(O=0;O<w;++O)O%o&&(m[O]=H+T)}else for(c=!1,R=1;R<o;++R)for(O=R;O<w;O+=o)m[O]+=l[R-1];if(d===fF)for(D=1;D<g;++D){for(H=0,O=D*o,A=O+o;O<A;++O)H<b[O]&&(H=b[O]);for(O=D*o;O<A;++O)b[O]=H+S[D-1]}else if(d===h0){for(H=0,O=o;O<w;++O)H<b[O]&&(H=b[O]);for(O=o;O<w;++O)b[O]=H+x}else for(d=!1,D=1;D<g;++D)for(O=D*o,A=O+o;O<A;++O)b[O]+=S[D-1];for(W=0,O=0;O<w;++O)W=m[O]+(O%o?W:0),B[O]+=W-e[O].x;for(R=0;R<o;++R)for(V=0,O=R;O<w;O+=o)V+=b[O],F[O]+=V-e[O].y;if(c&&wi(i.center,Bc)&&g>1)for(O=0;O<w;++O)P=c===h0?T:l[O%o],W=P-I[O].x2-e[O].x-B[O],W>0&&(B[O]+=W/2);if(d&&wi(i.center,Ic)&&o!==1)for(O=0;O<w;++O)P=d===h0?x:S[~~(O/o)],V=P-I[O].y2-e[O].y-F[O],V>0&&(F[O]+=V/2);for(O=0;O<w;++O)a.union(I[O].translate(B[O],F[O]));switch(W=wi(i.anchor,Nbe),V=wi(i.anchor,Cbe),wi(i.anchor,Bc)){case qn:W-=a.width();break;case dF:W-=a.width()/2}switch(wi(i.anchor,Ic)){case qn:V-=a.height();break;case dF:V-=a.height()/2}for(W=Math.round(W),V=Math.round(V),a.clear(),O=0;O<w;++O)e[O].mark.bounds.clear();for(O=0;O<w;++O)U=e[O],U.x+=B[O]+=W,U.y+=F[O]+=V,a.union(U.mark.bounds.union(U.bounds.translate(B[O],F[O]))),n&&t.dirty(U);return a}function Kbe(t,e,i){var n=Hbe(e),s=n.marks,a=i.bounds===KN?Jbe:Qbe,c=i.offset,d=i.columns||s.length,f=d<=0?1:Math.ceil(s.length/d),u=f*d,o,g,w,m,l,T,b;const S=aY(t,s,i);S.empty()&&S.set(0,0,0,0),n.rowheaders&&(T=wi(i.headerBand,Ic,null),o=y0(t,n.rowheaders,s,d,f,-wi(c,"rowHeader"),N6,0,a,"x1",0,d,1,T)),n.colheaders&&(T=wi(i.headerBand,Bc,null),g=y0(t,n.colheaders,s,d,d,-wi(c,"columnHeader"),N6,1,a,"y1",0,1,d,T)),n.rowfooters&&(T=wi(i.footerBand,Ic,null),w=y0(t,n.rowfooters,s,d,f,wi(c,"rowFooter"),C6,0,a,"x2",d-1,d,1,T)),n.colfooters&&(T=wi(i.footerBand,Bc,null),m=y0(t,n.colfooters,s,d,d,wi(c,"columnFooter"),C6,1,a,"y2",u-d,1,d,T)),n.rowtitle&&(l=wi(i.titleAnchor,Ic),b=wi(c,"rowTitle"),b=l===qn?w+b:o-b,T=wi(i.titleBand,Ic,.5),L6(t,n.rowtitle,b,0,S,T)),n.coltitle&&(l=wi(i.titleAnchor,Bc),b=wi(c,"columnTitle"),b=l===qn?m+b:g-b,T=wi(i.titleBand,Bc,.5),L6(t,n.coltitle,b,1,S,T))}function Jbe(t,e){return e==="x1"?t.x||0:e==="y1"?t.y||0:e==="x2"?(t.x||0)+(t.width||0):e==="y2"?(t.y||0)+(t.height||0):void 0}function Qbe(t,e){return t.bounds[e]}function y0(t,e,i,n,s,a,c,d,f,u,o,g,w,m){var l=i.length,T=0,b=0,S,x,B,F,I,A,O,R,D;if(!l)return T;for(S=o;S<l;S+=g)i[S]&&(T=c(T,f(i[S],u)));if(!e.length)return T;for(e.length>s&&(t.warn("Grid headers exceed limit: "+s),e=e.slice(0,s)),T+=a,x=0,F=e.length;x<F;++x)t.dirty(e[x]),e[x].mark.bounds.clear();for(S=o,x=0,F=e.length;x<F;++x,S+=g){for(A=e[x],I=A.mark.bounds,B=S;B>=0&&(O=i[B])==null;B-=w);d?(R=m==null?O.x:Math.round(O.bounds.x1+m*O.bounds.width()),D=T):(R=T,D=m==null?O.y:Math.round(O.bounds.y1+m*O.bounds.height())),I.union(A.bounds.translate(R-(A.x||0),D-(A.y||0))),A.x=R,A.y=D,t.dirty(A),b=c(b,I[u])}return b}function L6(t,e,i,n,s,a){if(e){t.dirty(e);var c=i,d=i;n?c=Math.round(s.x1+a*s.width()):d=Math.round(s.y1+a*s.height()),e.bounds.translate(c-(e.x||0),d-(e.y||0)),e.mark.bounds.clear().union(e.bounds),e.x=c,e.y=d,t.dirty(e)}}function Zbe(t,e){const i=t[e]||{};return(n,s)=>i[n]!=null?i[n]:t[n]!=null?t[n]:s}function e0e(t,e){let i=-1/0;return t.forEach(n=>{n.offset!=null&&(i=Math.max(i,n.offset))}),i>-1/0?i:e}function t0e(t,e,i,n,s,a,c){const d=Zbe(i,e),f=e0e(t,d("offset",0)),u=d("anchor",VN),o=u===qn?1:u===dF?.5:0,g={align:fF,bounds:d("bounds",KN),columns:d("direction")==="vertical"?1:t.length,padding:d("margin",8),center:d("center"),nodirty:!0};switch(e){case Zr:g.anchor={x:Math.floor(n.x1)-f,column:qn,y:o*(c||n.height()+2*n.y1),row:u};break;case ta:g.anchor={x:Math.ceil(n.x2)+f,y:o*(c||n.height()+2*n.y1),row:u};break;case Kp:g.anchor={y:Math.floor(s.y1)-f,row:qn,x:o*(a||s.width()+2*s.x1),column:u};break;case td:g.anchor={y:Math.ceil(s.y2)+f,x:o*(a||s.width()+2*s.x1),column:u};break;case Fbe:g.anchor={x:f,y:f};break;case Mbe:g.anchor={x:a-f,y:f,column:qn};break;case Abe:g.anchor={x:f,y:c-f,row:qn};break;case Obe:g.anchor={x:a-f,y:c-f,column:qn,row:qn};break}return g}function i0e(t,e){var i=e.items[0],n=i.datum,s=i.orient,a=i.bounds,c=i.x,d=i.y,f,u;return i._bounds?i._bounds.clear().union(a):i._bounds=a.clone(),a.clear(),s0e(t,i,i.items[0].items[0]),a=n0e(i,a),f=2*i.padding,u=2*i.padding,a.empty()||(f=Math.ceil(a.width()+f),u=Math.ceil(a.height()+u)),n.type===Pbe&&r0e(i.items[0].items[0].items[0].items),s!==XN&&(i.x=c=0,i.y=d=0),i.width=f,i.height=u,ql(a.set(c,d,c+f,d+u),i),i.mark.bounds.clear().union(a),i}function n0e(t,e){return t.items.forEach(i=>e.union(i.bounds)),e.x1=t.padding,e.y1=t.padding,e}function s0e(t,e,i){var n=e.padding,s=n-i.x,a=n-i.y;if(!e.datum.title)(s||a)&&ty(t,i,s,a);else{var c=e.items[1].items[0],d=c.anchor,f=e.titlePadding||0,u=n-c.x,o=n-c.y;switch(c.orient){case Zr:s+=Math.ceil(c.bounds.width())+f;break;case ta:case td:break;default:a+=c.bounds.height()+f}switch((s||a)&&ty(t,i,s,a),c.orient){case Zr:o+=Qu(e,i,c,d,1,1);break;case ta:u+=Qu(e,i,c,qn,0,0)+f,o+=Qu(e,i,c,d,1,1);break;case td:u+=Qu(e,i,c,d,0,0),o+=Qu(e,i,c,qn,-1,0,1)+f;break;default:u+=Qu(e,i,c,d,0,0)}(u||o)&&ty(t,c,u,o),(u=Math.round(c.bounds.x1-n))<0&&(ty(t,i,-u,0),ty(t,c,-u,0))}}function Qu(t,e,i,n,s,a,c){const d=t.datum.type!=="symbol",f=i.datum.vgrad,u=d&&(a||!f)&&!c?e.items[0]:e,o=u.bounds[s?"y2":"x2"]-t.padding,g=f&&a?o:0,w=f&&a?0:o,m=s<=0?0:AN(i);return Math.round(n===VN?g:n===qn?w-m:.5*(o-m))}function ty(t,e,i,n){e.x+=i,e.y+=n,e.bounds.translate(i,n),e.mark.bounds.translate(i,n),t.dirty(e)}function r0e(t){const e=t.reduce((i,n)=>(i[n.column]=Math.max(n.bounds.x2-n.x,i[n.column]||0),i),{});t.forEach(i=>{i.width=e[i.column],i.height=i.bounds.y2-i.y})}function a0e(t,e,i,n,s){var a=e.items[0],c=a.frame,d=a.orient,f=a.anchor,u=a.offset,o=a.padding,g=a.items[0].items[0],w=a.items[1]&&a.items[1].items[0],m=d===Zr||d===ta?n:i,l=0,T=0,b=0,S=0,x=0,B;if(c!==mS?d===Zr?(l=s.y2,m=s.y1):d===ta?(l=s.y1,m=s.y2):(l=s.x1,m=s.x2):d===Zr&&(l=n,m=0),B=f===VN?l:f===qn?m:(l+m)/2,w&&w.text){switch(d){case Kp:case td:x=g.bounds.height()+o;break;case Zr:S=g.bounds.width()+o;break;case ta:S=-g.bounds.width()-o;break}Sn.clear().union(w.bounds),Sn.translate(S-(w.x||0),x-(w.y||0)),Ph(w,"x",S)|Ph(w,"y",x)&&(t.dirty(w),w.bounds.clear().union(Sn),w.mark.bounds.clear().union(Sn),t.dirty(w)),Sn.clear().union(w.bounds)}else Sn.clear();switch(Sn.union(g.bounds),d){case Kp:T=B,b=s.y1-Sn.height()-u;break;case Zr:T=s.x1-Sn.width()-u,b=B;break;case ta:T=s.x2+Sn.width()+u,b=B;break;case td:T=B,b=s.y2+u;break;default:T=a.x,b=a.y}return Ph(a,"x",T)|Ph(a,"y",b)&&(Sn.translate(T,b),t.dirty(a),a.bounds.clear().union(Sn),e.bounds.clear().union(Sn),t.dirty(a)),a.bounds}function oY(t){ae.call(this,null,t)}Ee(oY,ae,{transform(t,e){const i=e.dataflow;return t.mark.items.forEach(n=>{t.layout&&Kbe(i,n,t.layout),l0e(i,n,t)}),o0e(t.mark.group)?e.reflow():e}});function o0e(t){return t&&t.mark.role!=="legend-entry"}function l0e(t,e,i){var n=e.items,s=Math.max(0,e.width||0),a=Math.max(0,e.height||0),c=new Di().set(0,0,s,a),d=c.clone(),f=c.clone(),u=[],o,g,w,m,l,T;for(l=0,T=n.length;l<T;++l)switch(g=n[l],g.role){case WN:m=Gbe(g)?d:f,m.union(Wbe(t,g,s,a));break;case HN:o=g;break;case YN:u.push(i0e(t,g));break;case Rbe:case Lbe:case WH:case HH:case YH:case XH:case KH:case JH:d.union(g.bounds),f.union(g.bounds);break;default:c.union(g.bounds)}if(u.length){const b={};u.forEach(S=>{w=S.orient||ta,w!==XN&&(b[w]||(b[w]=[])).push(S)});for(const S in b){const x=b[S];aY(t,x,t0e(x,S,i.legends,d,f,s,a))}u.forEach(S=>{const x=S.bounds;if(x.equals(S._bounds)||(S.bounds=S._bounds,t.dirty(S),S.bounds=x,t.dirty(S)),i.autosize&&(i.autosize.type===QH||i.autosize.type===ZH||i.autosize.type===eY))switch(S.orient){case Zr:case ta:c.add(x.x1,0).add(x.x2,0);break;case Kp:case td:c.add(0,x.y1).add(0,x.y2)}else c.union(x)})}c.union(d).union(f),o&&c.union(a0e(t,o,s,a,c)),e.clip&&c.set(0,0,e.width||0,e.height||0),c0e(t,e,c,i)}function c0e(t,e,i,n){const s=n.autosize||{},a=s.type;if(t._autosize<1||!a)return;let c=t._width,d=t._height,f=Math.max(0,e.width||0),u=Math.max(0,Math.ceil(-i.x1)),o=Math.max(0,e.height||0),g=Math.max(0,Math.ceil(-i.y1));const w=Math.max(0,Math.ceil(i.x2-f)),m=Math.max(0,Math.ceil(i.y2-o));if(s.contains===Dbe){const l=t.padding();c-=l.left+l.right,d-=l.top+l.bottom}a===XN?(u=0,g=0,f=c,o=d):a===QH?(f=Math.max(0,c-u-w),o=Math.max(0,d-g-m)):a===ZH?(f=Math.max(0,c-u-w),d=o+g+m):a===eY?(c=f+u+w,o=Math.max(0,d-g-m)):a===$be&&(c=f+u+w,d=o+g+m),t._resizeView(c,d,f,o,[u,g],s.resize)}const d0e=Object.freeze(Object.defineProperty({__proto__:null,bound:tY,identifier:JN,mark:iY,overlap:nY,render:rY,viewlayout:oY},Symbol.toStringTag,{value:"Module"}));function lY(t){ae.call(this,null,t)}Ee(lY,ae,{transform(t,e){if(this.value&&!t.modified())return e.StopPropagation;var i=e.dataflow.locale(),n=e.fork(e.NO_SOURCE|e.NO_FIELDS),s=this.value,a=t.scale,c=t.count==null?t.values?t.values.length:10:t.count,d=uN(a,c,t.minstep),f=t.format||jW(i,a,d,t.formatSpecifier,t.formatType,!!t.values),u=t.values?zW(a,t.values,d):hN(a,d);return s&&(n.rem=s),s=u.map((o,g)=>Gt({index:g/(u.length-1||1),value:o,label:f(o)})),t.extra&&s.length&&s.push(Gt({index:-1,extra:{value:s[0].value},label:""})),n.source=s,n.add=s,this.value=s,n}});function cY(t){ae.call(this,null,t)}function f0e(){return Gt({})}function u0e(t){const e=E_().test(i=>i.exit);return e.lookup=i=>e.get(t(i)),e}Ee(cY,ae,{transform(t,e){var i=e.dataflow,n=e.fork(e.NO_SOURCE|e.NO_FIELDS),s=t.item||f0e,a=t.key||Le,c=this.value;return ue(n.encode)&&(n.encode=null),c&&(t.modified("key")||e.modified(a))&&de("DataJoin does not support modified key function or fields."),c||(e=e.addAll(),this.value=c=u0e(a)),e.visit(e.ADD,d=>{const f=a(d);let u=c.get(f);u?u.exit?(c.empty--,n.add.push(u)):n.mod.push(u):(u=s(d),c.set(f,u),n.add.push(u)),u.datum=d,u.exit=!1}),e.visit(e.MOD,d=>{const f=a(d),u=c.get(f);u&&(u.datum=d,n.mod.push(u))}),e.visit(e.REM,d=>{const f=a(d),u=c.get(f);d===u.datum&&!u.exit&&(n.rem.push(u),u.exit=!0,++c.empty)}),e.changed(e.ADD_MOD)&&n.modifies("datum"),(e.clean()||t.clean&&c.empty>i.cleanThreshold)&&i.runAfter(c.clean),n}});function dY(t){ae.call(this,null,t)}Ee(dY,ae,{transform(t,e){var i=e.fork(e.ADD_REM),n=t.mod||!1,s=t.encoders,a=e.encode;if(ue(a))if(i.changed()||a.every(g=>s[g]))a=a[0],i.encode=null;else return e.StopPropagation;var c=a==="enter",d=s.update||oc,f=s.enter||oc,u=s.exit||oc,o=(a&&!c?s[a]:d)||oc;if(e.changed(e.ADD)&&(e.visit(e.ADD,g=>{f(g,t),d(g,t)}),i.modifies(f.output),i.modifies(d.output),o!==oc&&o!==d&&(e.visit(e.ADD,g=>{o(g,t)}),i.modifies(o.output))),e.changed(e.REM)&&u!==oc&&(e.visit(e.REM,g=>{u(g,t)}),i.modifies(u.output)),c||o!==oc){const g=e.MOD|(t.modified()?e.REFLOW:0);c?(e.visit(g,w=>{const m=f(w,t)||n;(o(w,t)||m)&&i.mod.push(w)}),i.mod.length&&i.modifies(f.output)):e.visit(g,w=>{(o(w,t)||n)&&i.mod.push(w)}),i.mod.length&&i.modifies(o.output)}return i.changed()?i:e.StopPropagation}});function fY(t){ae.call(this,[],t)}Ee(fY,ae,{transform(t,e){if(this.value!=null&&!t.modified())return e.StopPropagation;var i=e.dataflow.locale(),n=e.fork(e.NO_SOURCE|e.NO_FIELDS),s=this.value,a=t.type||cT,c=t.scale,d=+t.limit,f=uN(c,t.count==null?5:t.count,t.minstep),u=!!t.values||a===cT,o=t.format||WW(i,c,f,a,t.formatSpecifier,t.formatType,u),g=t.values||VW(c,f),w,m,l,T,b;return s&&(n.rem=s),a===cT?(d&&g.length>d?(e.dataflow.warn("Symbol legend count exceeds limit, filtering items."),s=g.slice(0,d-1),b=!0):s=g,gt(l=t.size)?(!t.values&&c(s[0])===0&&(s=s.slice(1)),T=s.reduce((S,x)=>Math.max(S,l(x,t)),0)):l=Ln(T=l||8),s=s.map((S,x)=>Gt({index:x,label:o(S,x,s),value:S,offset:T,size:l(S,t)})),b&&(b=g[s.length],s.push(Gt({index:s.length,label:`…${g.length-s.length} entries`,value:b,offset:T,size:l(b,t)})))):a===Uge?(w=c.domain(),m=PW(c,w[0],At(w)),g.length<3&&!t.values&&w[0]!==At(w)&&(g=[w[0],At(w)]),s=g.map((S,x)=>Gt({index:x,label:o(S,x,g),value:S,perc:m(S)}))):(l=g.length-1,m=Jge(c),s=g.map((S,x)=>Gt({index:x,label:o(S,x,g),value:S,perc:x?m(S):0,perc2:x===l?1:m(g[x+1])}))),n.source=s,n.add=s,this.value=s,n}});const h0e=t=>t.source.x,p0e=t=>t.source.y,_0e=t=>t.target.x,y0e=t=>t.target.y;function QN(t){ae.call(this,{},t)}QN.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};Ee(QN,ae,{transform(t,e){var i=t.sourceX||h0e,n=t.sourceY||p0e,s=t.targetX||_0e,a=t.targetY||y0e,c=t.as||"path",d=t.orient||"vertical",f=t.shape||"line",u=D6.get(f+"-"+d)||D6.get(f);return u||de("LinkPath unsupported type: "+t.shape+(t.orient?"-"+t.orient:"")),e.visit(e.SOURCE,o=>{o[c]=u(i(o),n(o),s(o),a(o))}),e.reflow(t.modified()).modifies(c)}});const uY=(t,e,i,n)=>"M"+t+","+e+"L"+i+","+n,g0e=(t,e,i,n)=>uY(e*Math.cos(t),e*Math.sin(t),n*Math.cos(i),n*Math.sin(i)),hY=(t,e,i,n)=>{var s=i-t,a=n-e,c=Math.hypot(s,a)/2,d=180*Math.atan2(a,s)/Math.PI;return"M"+t+","+e+"A"+c+","+c+" "+d+" 0 1 "+i+","+n},m0e=(t,e,i,n)=>hY(e*Math.cos(t),e*Math.sin(t),n*Math.cos(i),n*Math.sin(i)),pY=(t,e,i,n)=>{const s=i-t,a=n-e,c=.2*(s+a),d=.2*(a-s);return"M"+t+","+e+"C"+(t+c)+","+(e+d)+" "+(i+d)+","+(n-c)+" "+i+","+n},w0e=(t,e,i,n)=>pY(e*Math.cos(t),e*Math.sin(t),n*Math.cos(i),n*Math.sin(i)),b0e=(t,e,i,n)=>"M"+t+","+e+"V"+n+"H"+i,T0e=(t,e,i,n)=>"M"+t+","+e+"H"+i+"V"+n,v0e=(t,e,i,n)=>{const s=Math.cos(t),a=Math.sin(t),c=Math.cos(i),d=Math.sin(i),f=Math.abs(i-t)>Math.PI?i<=t:i>t;return"M"+e*s+","+e*a+"A"+e+","+e+" 0 0,"+(f?1:0)+" "+e*c+","+e*d+"L"+n*c+","+n*d},E0e=(t,e,i,n)=>{const s=(t+i)/2;return"M"+t+","+e+"C"+s+","+e+" "+s+","+n+" "+i+","+n},S0e=(t,e,i,n)=>{const s=(e+n)/2;return"M"+t+","+e+"C"+t+","+s+" "+i+","+s+" "+i+","+n},x0e=(t,e,i,n)=>{const s=Math.cos(t),a=Math.sin(t),c=Math.cos(i),d=Math.sin(i),f=(e+n)/2;return"M"+e*s+","+e*a+"C"+f*s+","+f*a+" "+f*c+","+f*d+" "+n*c+","+n*d},D6=E_({line:uY,"line-radial":g0e,arc:hY,"arc-radial":m0e,curve:pY,"curve-radial":w0e,"orthogonal-horizontal":b0e,"orthogonal-vertical":T0e,"orthogonal-radial":v0e,"diagonal-horizontal":E0e,"diagonal-vertical":S0e,"diagonal-radial":x0e});function ZN(t){ae.call(this,null,t)}ZN.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};Ee(ZN,ae,{transform(t,e){var i=t.as||["startAngle","endAngle"],n=i[0],s=i[1],a=t.field||b_,c=t.startAngle||0,d=t.endAngle!=null?t.endAngle:2*Math.PI,f=e.source,u=f.map(a),o=u.length,g=c,w=(d-c)/p5(u),m=Js(o),l,T,b;for(t.sort&&m.sort((S,x)=>u[S]-u[x]),l=0;l<o;++l)b=u[m[l]],T=f[m[l]],T[n]=g,T[s]=g+=b*w;return this.value=u,e.reflow(t.modified()).modifies(i)}});const B0e=5;function I0e(t){const e=t.type;return!t.bins&&(e===qp||e===Ym||e===Xm)}function _Y(t){return cN(t)&&t!==co}const k0e=ua(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function yY(t){ae.call(this,null,t),this.modified(!0)}Ee(yY,ae,{transform(t,e){var i=e.dataflow,n=this.value,s=F0e(t);(!n||s!==n.type)&&(this.value=n=$t(s)());for(s in t)if(!k0e[s]){if(s==="padding"&&_Y(n.type))continue;gt(n[s])?n[s](t[s]):i.warn("Unsupported scale property: "+s)}return R0e(n,t,C0e(n,t,A0e(n,t,i))),e.fork(e.NO_SOURCE|e.NO_FIELDS)}});function F0e(t){var e=t.type,i="",n;return e===co?co+"-"+qp:(M0e(t)&&(n=t.rawDomain?t.rawDomain.length:t.domain?t.domain.length+ +(t.domainMid!=null):0,i=n===2?co+"-":n===3?B_+"-":""),(i+e||qp).toLowerCase())}function M0e(t){const e=t.type;return cN(e)&&e!==Qf&&e!==Zf&&(t.scheme||t.range&&t.range.length&&t.range.every(Ie))}function A0e(t,e,i){const n=O0e(t,e.domainRaw,i);if(n>-1)return n;var s=e.domain,a=t.type,c=e.zero||e.zero===void 0&&I0e(t),d,f;if(!s)return 0;if(_Y(a)&&e.padding&&s[0]!==At(s)&&(s=N0e(a,s,e.range,e.padding,e.exponent,e.constant)),(c||e.domainMin!=null||e.domainMax!=null||e.domainMid!=null)&&(d=(s=s.slice()).length-1||1,c&&(s[0]>0&&(s[0]=0),s[d]<0&&(s[d]=0)),e.domainMin!=null&&(s[0]=e.domainMin),e.domainMax!=null&&(s[d]=e.domainMax),e.domainMid!=null)){f=e.domainMid;const u=f>s[d]?d+1:f<s[0]?0:d;u!==d&&i.warn("Scale domainMid exceeds domain min or max.",f),s.splice(u,0,f)}return t.domain(gY(a,s,i)),a===rN&&t.unknown(e.domainImplicit?gk:void 0),e.nice&&t.nice&&t.nice(e.nice!==!0&&uN(t,e.nice)||null),s.length}function O0e(t,e,i){return e?(t.domain(gY(t.type,e,i)),e.length):-1}function N0e(t,e,i,n,s,a){var c=Math.abs(At(i)-i[0]),d=c/(c-2*n),f=t===Rl?_O(e,null,d):t===Xm?dv(e,null,d,.5):t===Ym?dv(e,null,d,s||1):t===nS?yO(e,null,d,a||1):pO(e,null,d);return e=e.slice(),e[0]=f[0],e[e.length-1]=f[1],e}function gY(t,e,i){if(NW(t)){var n=Math.abs(e.reduce((s,a)=>s+(a<0?-1:a>0?1:0),0));n!==e.length&&i.warn("Log scale domain includes zero: "+ve(e))}return e}function C0e(t,e,i){let n=e.bins;if(n&&!ue(n)){const s=t.domain(),a=s[0],c=At(s),d=n.step;let f=n.start==null?a:n.start,u=n.stop==null?c:n.stop;d||de("Scale bins parameter missing step property."),f<a&&(f=d*Math.ceil(a/d)),u>c&&(u=d*Math.floor(c/d)),n=Js(f,u+d/2,d)}return n?t.bins=n:t.bins&&delete t.bins,t.type===aN&&(n?!e.domain&&!e.domainRaw&&(t.domain(n),i=n.length):t.bins=t.domain()),i}function R0e(t,e,i){var n=t.type,s=e.round||!1,a=e.range;if(e.rangeStep!=null)a=L0e(n,e,i);else if(e.scheme&&(a=D0e(n,e,i),gt(a))){if(t.interpolator)return t.interpolator(a);de(`Scale type ${n} does not support interpolating color schemes.`)}if(a&&CW(n))return t.interpolator(aS(uF(a,e.reverse),e.interpolate,e.interpolateGamma));a&&e.interpolate&&t.interpolate?t.interpolate(dN(e.interpolate,e.interpolateGamma)):gt(t.round)?t.round(s):gt(t.rangeRound)&&t.interpolate(s?Fm:yd),a&&t.range(uF(a,e.reverse))}function L0e(t,e,i){t!==IW&&t!==Jk&&de("Only band and point scales support rangeStep.");var n=(e.paddingOuter!=null?e.paddingOuter:e.padding)||0,s=t===Jk?1:(e.paddingInner!=null?e.paddingInner:e.padding)||0;return[0,e.rangeStep*sN(i,s,n)]}function D0e(t,e,i){var n=e.schemeExtent,s,a;return ue(e.scheme)?a=aS(e.scheme,e.interpolate,e.interpolateGamma):(s=e.scheme.toLowerCase(),a=fN(s),a||de(`Unrecognized scheme name: ${e.scheme}`)),i=t===rS?i+1:t===aN?i-1:t===Gp||t===sS?+e.schemeCount||B0e:i,CW(t)?P6(a,n,e.reverse):gt(a)?DW(P6(a,n),i):t===rN?a:a.slice(0,i)}function P6(t,e,i){return gt(t)&&(e||i)?LW(t,uF(e||[0,1],i)):t}function uF(t,e){return e?t.slice().reverse():t}function mY(t){ae.call(this,null,t)}Ee(mY,ae,{transform(t,e){const i=t.modified("sort")||e.changed(e.ADD)||e.modified(t.sort.fields)||e.modified("datum");return i&&e.source.sort(Au(t.sort)),this.modified(i),e}});const $6="zero",wY="center",bY="normalize",TY=["y0","y1"];function eC(t){ae.call(this,null,t)}eC.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:$6,values:[$6,wY,bY]},{name:"as",type:"string",array:!0,length:2,default:TY}]};Ee(eC,ae,{transform(t,e){var i=t.as||TY,n=i[0],s=i[1],a=Au(t.sort),c=t.field||b_,d=t.offset===wY?P0e:t.offset===bY?$0e:U0e,f,u,o,g;for(f=z0e(e.source,t.groupby,a,c),u=0,o=f.length,g=f.max;u<o;++u)d(f[u],g,c,n,s);return e.reflow(t.modified()).modifies(i)}});function P0e(t,e,i,n,s){for(var a=(e-t.sum)/2,c=t.length,d=0,f;d<c;++d)f=t[d],f[n]=a,f[s]=a+=Math.abs(i(f))}function $0e(t,e,i,n,s){for(var a=1/t.sum,c=0,d=t.length,f=0,u=0,o;f<d;++f)o=t[f],o[n]=c,o[s]=c=a*(u+=Math.abs(i(o)))}function U0e(t,e,i,n,s){for(var a=0,c=0,d=t.length,f=0,u,o;f<d;++f)o=t[f],u=+i(o),u<0?(o[n]=c,o[s]=c+=u):(o[n]=a,o[s]=a+=u)}function z0e(t,e,i,n){var s=[],a=T=>T(o),c,d,f,u,o,g,w,m,l;if(e==null)s.push(t.slice());else for(c={},d=0,f=t.length;d<f;++d)o=t[d],g=e.map(a),w=c[g],w||(c[g]=w=[],s.push(w)),w.push(o);for(g=0,l=0,u=s.length;g<u;++g){for(w=s[g],d=0,m=0,f=w.length;d<f;++d)m+=Math.abs(n(w[d]));w.sum=m,m>l&&(l=m),i&&w.sort(i)}return s.max=l,s}const j0e=Object.freeze(Object.defineProperty({__proto__:null,axisticks:lY,datajoin:cY,encode:dY,legendentries:fY,linkpath:QN,pie:ZN,scale:yY,sortitems:mY,stack:eC},Symbol.toStringTag,{value:"Module"}));var q0e=Math.abs,hF=Math.cos,xv=Math.sin,G0e=1e-6,vY=Math.PI,pF=vY/2,U6=V0e(2);function z6(t){return t>1?pF:t<-1?-pF:Math.asin(t)}function V0e(t){return t>0?Math.sqrt(t):0}function W0e(t,e){var i=t*xv(e),n=30,s;do e-=s=(e+xv(e)-i)/(1+hF(e));while(q0e(s)>G0e&&--n>0);return e/2}function H0e(t,e,i){function n(s,a){return[t*s*hF(a=W0e(i,a)),e*xv(a)]}return n.invert=function(s,a){return a=z6(a/e),[s/(t*hF(a)),z6((2*a+xv(2*a))/i)]},n}var Y0e=H0e(U6/pF,U6,vY);function X0e(){return No(Y0e).scale(169.529)}const K0e=Iq(),_F=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function J0e(t,e){return function i(){const n=e();return n.type=t,n.path=Iq().projection(n),n.copy=n.copy||function(){const s=i();return _F.forEach(a=>{n[a]&&s[a](n[a]())}),s.path.pointRadius(n.path.pointRadius()),s},AW(n)}}function tC(t,e){if(!t||typeof t!="string")throw new Error("Projection type must be a name string.");return t=t.toLowerCase(),arguments.length>1?(Bv[t]=J0e(t,e),this):Bv[t]||null}function EY(t){return t&&t.path||K0e}const Bv={albers:Fq,albersusa:Eoe,azimuthalequalarea:Soe,azimuthalequidistant:xoe,conicconformal:koe,conicequalarea:E1,conicequidistant:Aoe,equalEarth:Noe,equirectangular:Foe,gnomonic:Coe,identity:Roe,mercator:Boe,mollweide:X0e,naturalEarth1:Loe,orthographic:Doe,stereographic:Poe,transversemercator:$oe};for(const t in Bv)tC(t,Bv[t]);function Q0e(){}const Ho=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function SY(){var t=1,e=1,i=d;function n(f,u){return u.map(o=>s(f,o))}function s(f,u){var o=[],g=[];return a(f,u,w=>{i(w,f,u),Z0e(w)>0?o.push([w]):g.push(w)}),g.forEach(w=>{for(var m=0,l=o.length,T;m<l;++m)if(eTe((T=o[m])[0],w)!==-1){T.push(w);return}}),{type:"MultiPolygon",value:u,coordinates:o}}function a(f,u,o){var g=new Array,w=new Array,m,l,T,b,S,x;for(m=l=-1,b=f[0]>=u,Ho[b<<1].forEach(B);++m<t-1;)T=b,b=f[m+1]>=u,Ho[T|b<<1].forEach(B);for(Ho[b<<0].forEach(B);++l<e-1;){for(m=-1,b=f[l*t+t]>=u,S=f[l*t]>=u,Ho[b<<1|S<<2].forEach(B);++m<t-1;)T=b,b=f[l*t+t+m+1]>=u,x=S,S=f[l*t+m+1]>=u,Ho[T|b<<1|S<<2|x<<3].forEach(B);Ho[b|S<<3].forEach(B)}for(m=-1,S=f[l*t]>=u,Ho[S<<2].forEach(B);++m<t-1;)x=S,S=f[l*t+m+1]>=u,Ho[S<<2|x<<3].forEach(B);Ho[S<<3].forEach(B);function B(F){var I=[F[0][0]+m,F[0][1]+l],A=[F[1][0]+m,F[1][1]+l],O=c(I),R=c(A),D,P;(D=w[O])?(P=g[R])?(delete w[D.end],delete g[P.start],D===P?(D.ring.push(A),o(D.ring)):g[D.start]=w[P.end]={start:D.start,end:P.end,ring:D.ring.concat(P.ring)}):(delete w[D.end],D.ring.push(A),w[D.end=R]=D):(D=g[R])?(P=w[O])?(delete g[D.start],delete w[P.end],D===P?(D.ring.push(A),o(D.ring)):g[P.start]=w[D.end]={start:P.start,end:D.end,ring:P.ring.concat(D.ring)}):(delete g[D.start],D.ring.unshift(I),g[D.start=O]=D):g[O]=w[R]={start:O,end:R,ring:[I,A]}}}function c(f){return f[0]*2+f[1]*(t+1)*4}function d(f,u,o){f.forEach(g=>{var w=g[0],m=g[1],l=w|0,T=m|0,b,S=u[T*t+l];w>0&&w<t&&l===w&&(b=u[T*t+l-1],g[0]=w+(o-b)/(S-b)-.5),m>0&&m<e&&T===m&&(b=u[(T-1)*t+l],g[1]=m+(o-b)/(S-b)-.5)})}return n.contour=s,n.size=function(f){if(!arguments.length)return[t,e];var u=Math.floor(f[0]),o=Math.floor(f[1]);return u>=0&&o>=0||de("invalid size"),t=u,e=o,n},n.smooth=function(f){return arguments.length?(i=f?d:Q0e,n):i===d},n}function Z0e(t){for(var e=0,i=t.length,n=t[i-1][1]*t[0][0]-t[i-1][0]*t[0][1];++e<i;)n+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return n}function eTe(t,e){for(var i=-1,n=e.length,s;++i<n;)if(s=tTe(t,e[i]))return s;return 0}function tTe(t,e){for(var i=e[0],n=e[1],s=-1,a=0,c=t.length,d=c-1;a<c;d=a++){var f=t[a],u=f[0],o=f[1],g=t[d],w=g[0],m=g[1];if(iTe(f,g,e))return 0;o>n!=m>n&&i<(w-u)*(n-o)/(m-o)+u&&(s=-s)}return s}function iTe(t,e,i){var n;return nTe(t,e,i)&&sTe(t[n=+(t[0]===e[0])],i[n],e[n])}function nTe(t,e,i){return(e[0]-t[0])*(i[1]-t[1])===(i[0]-t[0])*(e[1]-t[1])}function sTe(t,e,i){return t<=e&&e<=i||i<=e&&e<=t}function xY(t,e,i){return function(n){var s=xo(n),a=i?Math.min(s[0],0):s[0],c=s[1],d=c-a,f=e?jc(a,c,t):d/(t+1);return Js(a+f,c,f)}}function iC(t){ae.call(this,null,t)}iC.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};Ee(iC,ae,{transform(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var i=e.fork(e.NO_SOURCE|e.NO_FIELDS),n=e.materialize(e.SOURCE).source,s=t.field||Rn,a=SY().smooth(t.smooth!==!1),c=t.thresholds||rTe(n,s,t),d=t.as===null?null:t.as||"contour",f=[];return n.forEach(u=>{const o=s(u),g=a.size([o.width,o.height])(o.values,ue(c)?c:c(o.values));aTe(g,o,u,t),g.forEach(w=>{f.push(ZE(u,Gt(d!=null?{[d]:w}:w)))})}),this.value&&(i.rem=this.value),this.value=i.source=i.add=f,i}});function rTe(t,e,i){const n=xY(i.levels||10,i.nice,i.zero!==!1);return i.resolve!=="shared"?n:n(t.map(s=>Ff(e(s).values)))}function aTe(t,e,i,n){let s=n.scale||e.scale,a=n.translate||e.translate;if(gt(s)&&(s=s(i,n)),gt(a)&&(a=a(i,n)),(s===1||s==null)&&!a)return;const c=(ii(s)?s:s[0])||1,d=(ii(s)?s:s[1])||1,f=a&&a[0]||0,u=a&&a[1]||0;t.forEach(BY(e,c,d,f,u))}function BY(t,e,i,n,s){const a=t.x1||0,c=t.y1||0,d=e*i<0;function f(g){g.forEach(u)}function u(g){d&&g.reverse(),g.forEach(o)}function o(g){g[0]=(g[0]-a)*e+n,g[1]=(g[1]-c)*i+s}return function(g){return g.coordinates.forEach(f),g}}function j6(t,e,i){const n=t>=0?t:_A(e,i);return Math.round((Math.sqrt(4*n*n+1)-1)/2)}function AB(t){return gt(t)?t:Ln(+t)}function IY(){var t=f=>f[0],e=f=>f[1],i=b_,n=[-1,-1],s=960,a=500,c=2;function d(f,u){const o=j6(n[0],f,t)>>c,g=j6(n[1],f,e)>>c,w=o?o+2:0,m=g?g+2:0,l=2*w+(s>>c),T=2*m+(a>>c),b=new Float32Array(l*T),S=new Float32Array(l*T);let x=b;f.forEach(F=>{const I=w+(+t(F)>>c),A=m+(+e(F)>>c);I>=0&&I<l&&A>=0&&A<T&&(b[I+A*l]+=+i(F))}),o>0&&g>0?(Zu(l,T,b,S,o),eh(l,T,S,b,g),Zu(l,T,b,S,o),eh(l,T,S,b,g),Zu(l,T,b,S,o),eh(l,T,S,b,g)):o>0?(Zu(l,T,b,S,o),Zu(l,T,S,b,o),Zu(l,T,b,S,o),x=S):g>0&&(eh(l,T,b,S,g),eh(l,T,S,b,g),eh(l,T,b,S,g),x=S);const B=u?Math.pow(2,-2*c):1/p5(x);for(let F=0,I=l*T;F<I;++F)x[F]*=B;return{values:x,scale:1<<c,width:l,height:T,x1:w,y1:m,x2:w+(s>>c),y2:m+(a>>c)}}return d.x=function(f){return arguments.length?(t=AB(f),d):t},d.y=function(f){return arguments.length?(e=AB(f),d):e},d.weight=function(f){return arguments.length?(i=AB(f),d):i},d.size=function(f){if(!arguments.length)return[s,a];var u=+f[0],o=+f[1];return u>=0&&o>=0||de("invalid size"),s=u,a=o,d},d.cellSize=function(f){return arguments.length?((f=+f)>=1||de("invalid cell size"),c=Math.floor(Math.log(f)/Math.LN2),d):1<<c},d.bandwidth=function(f){return arguments.length?(f=ke(f),f.length===1&&(f=[+f[0],+f[0]]),f.length!==2&&de("invalid bandwidth"),n=f,d):n},d}function Zu(t,e,i,n,s){const a=(s<<1)+1;for(let c=0;c<e;++c)for(let d=0,f=0;d<t+s;++d)d<t&&(f+=i[d+c*t]),d>=s&&(d>=a&&(f-=i[d-a+c*t]),n[d-s+c*t]=f/Math.min(d+1,t-1+a-d,a))}function eh(t,e,i,n,s){const a=(s<<1)+1;for(let c=0;c<t;++c)for(let d=0,f=0;d<e+s;++d)d<e&&(f+=i[c+d*t]),d>=s&&(d>=a&&(f-=i[c+(d-a)*t]),n[c+(d-s)*t]=f/Math.min(d+1,e-1+a-d,a))}function nC(t){ae.call(this,null,t)}nC.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const oTe=["x","y","weight","size","cellSize","bandwidth"];function kY(t,e){return oTe.forEach(i=>e[i]!=null?t[i](e[i]):0),t}Ee(nC,ae,{transform(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var i=e.fork(e.NO_SOURCE|e.NO_FIELDS),n=e.materialize(e.SOURCE).source,s=lTe(n,t.groupby),a=(t.groupby||[]).map(Ai),c=kY(IY(),t),d=t.as||"grid",f=[];function u(o,g){for(let w=0;w<a.length;++w)o[a[w]]=g[w];return o}return f=s.map(o=>Gt(u({[d]:c(o,t.counts)},o.dims))),this.value&&(i.rem=this.value),this.value=i.source=i.add=f,i}});function lTe(t,e){var i=[],n=o=>o(d),s,a,c,d,f,u;if(e==null)i.push(t);else for(s={},a=0,c=t.length;a<c;++a)d=t[a],f=e.map(n),u=s[f],u||(s[f]=u=[],u.dims=f,i.push(u)),u.push(d);return i}function sC(t){ae.call(this,null,t)}sC.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};Ee(sC,ae,{transform(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var i=e.fork(e.NO_SOURCE|e.NO_FIELDS),n=SY().smooth(t.smooth!==!1),s=t.values,a=t.thresholds||xY(t.count||10,t.nice,!!s),c=t.size,d,f;return s||(s=e.materialize(e.SOURCE).source,d=kY(IY(),t)(s,!0),f=BY(d,d.scale||1,d.scale||1,0,0),c=[d.width,d.height],s=d.values),a=ue(a)?a:a(s),s=n.size(c)(s,a),f&&s.forEach(f),this.value&&(i.rem=this.value),this.value=i.source=i.add=(s||[]).map(Gt),i}});const yF="Feature",rC="FeatureCollection",cTe="MultiPoint";function aC(t){ae.call(this,null,t)}aC.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};Ee(aC,ae,{transform(t,e){var i=this._features,n=this._points,s=t.fields,a=s&&s[0],c=s&&s[1],d=t.geojson||!s&&Rn,f=e.ADD,u;u=t.modified()||e.changed(e.REM)||e.modified(Mn(d))||a&&e.modified(Mn(a))||c&&e.modified(Mn(c)),(!this.value||u)&&(f=e.SOURCE,this._features=i=[],this._points=n=[]),d&&e.visit(f,o=>i.push(d(o))),a&&c&&(e.visit(f,o=>{var g=a(o),w=c(o);g!=null&&w!=null&&(g=+g)===g&&(w=+w)===w&&n.push([g,w])}),i=i.concat({type:yF,geometry:{type:cTe,coordinates:n}})),this.value={type:rC,features:i}}});function oC(t){ae.call(this,null,t)}oC.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};Ee(oC,ae,{transform(t,e){var i=e.fork(e.ALL),n=this.value,s=t.field||Rn,a=t.as||"path",c=i.SOURCE;!n||t.modified()?(this.value=n=EY(t.projection),i.materialize().reflow()):c=s===Rn||e.modified(s.fields)?i.ADD_MOD:i.ADD;const d=dTe(n,t.pointRadius);return i.visit(c,f=>f[a]=n(s(f))),n.pointRadius(d),i.modifies(a)}});function dTe(t,e){const i=t.pointRadius();return t.context(null),e!=null&&t.pointRadius(e),i}function lC(t){ae.call(this,null,t)}lC.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};Ee(lC,ae,{transform(t,e){var i=t.projection,n=t.fields[0],s=t.fields[1],a=t.as||["x","y"],c=a[0],d=a[1],f;function u(o){const g=i([n(o),s(o)]);g?(o[c]=g[0],o[d]=g[1]):(o[c]=void 0,o[d]=void 0)}return t.modified()?e=e.materialize().reflow(!0).visit(e.SOURCE,u):(f=e.modified(n.fields)||e.modified(s.fields),e.visit(f?e.ADD_MOD:e.ADD,u)),e.modifies(a)}});function cC(t){ae.call(this,null,t)}cC.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};Ee(cC,ae,{transform(t,e){var i=e.fork(e.ALL),n=this.value,s=t.as||"shape",a=i.ADD;return(!n||t.modified())&&(this.value=n=fTe(EY(t.projection),t.field||Fs("datum"),t.pointRadius),i.materialize().reflow(),a=i.SOURCE),i.visit(a,c=>c[s]=n),i.modifies(s)}});function fTe(t,e,i){const n=i==null?s=>t(e(s)):s=>{var a=t.pointRadius(),c=t.pointRadius(i)(e(s));return t.pointRadius(a),c};return n.context=s=>(t.context(s),n),n}function dC(t){ae.call(this,[],t),this.generator=toe()}dC.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};Ee(dC,ae,{transform(t,e){var i=this.value,n=this.generator,s;if(!i.length||t.modified())for(const a in t)gt(n[a])&&n[a](t[a]);return s=n(),i.length?e.mod.push(YV(i[0],s)):e.add.push(Gt(s)),i[0]=s,e}});function fC(t){ae.call(this,null,t)}fC.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};Ee(fC,ae,{transform(t,e){if(!e.changed()&&!t.modified())return e.StopPropagation;var i=e.materialize(e.SOURCE).source,n=t.resolve==="shared",s=t.field||Rn,a=hTe(t.opacity,t),c=uTe(t.color,t),d=t.as||"image",f={$x:0,$y:0,$value:0,$max:n?Ff(i.map(u=>Ff(s(u).values))):0};return i.forEach(u=>{const o=s(u),g=yt({},u,f);n||(g.$max=Ff(o.values||[])),u[d]=pTe(o,g,c.dep?c:Ln(c(g)),a.dep?a:Ln(a(g)))}),e.reflow(!0).modifies(d)}});function uTe(t,e){let i;return gt(t)?(i=n=>qc(t(n,e)),i.dep=FY(t)):i=Ln(qc(t||"#888")),i}function hTe(t,e){let i;return gt(t)?(i=n=>t(n,e),i.dep=FY(t)):t?i=Ln(t):(i=n=>n.$value/n.$max||0,i.dep=!0),i}function FY(t){if(!gt(t))return!1;const e=ua(Mn(t));return e.$x||e.$y||e.$value||e.$max}function pTe(t,e,i,n){const s=t.width,a=t.height,c=t.x1||0,d=t.y1||0,f=t.x2||s,u=t.y2||a,o=t.values,g=o?b=>o[b]:bc,w=Hm(f-c,u-d),m=w.getContext("2d"),l=m.getImageData(0,0,f-c,u-d),T=l.data;for(let b=d,S=0;b<u;++b){e.$y=b-d;for(let x=c,B=b*s;x<f;++x,S+=4){e.$x=x-c,e.$value=g(x+B);const F=i(e);T[S+0]=F.r,T[S+1]=F.g,T[S+2]=F.b,T[S+3]=~~(255*n(e))}}return m.putImageData(l,0,0),w}function MY(t){ae.call(this,null,t),this.modified(!0)}Ee(MY,ae,{transform(t,e){let i=this.value;return!i||t.modified("type")?(this.value=i=yTe(t.type),_F.forEach(n=>{t[n]!=null&&q6(i,n,t[n])})):_F.forEach(n=>{t.modified(n)&&q6(i,n,t[n])}),t.pointRadius!=null&&i.path.pointRadius(t.pointRadius),t.fit&&_Te(i,t),e.fork(e.NO_SOURCE|e.NO_FIELDS)}});function _Te(t,e){const i=gTe(e.fit);e.extent?t.fitExtent(e.extent,i):e.size&&t.fitSize(e.size,i)}function yTe(t){const e=tC((t||"mercator").toLowerCase());return e||de("Unrecognized projection type: "+t),e()}function q6(t,e,i){gt(t[e])&&t[e](i)}function gTe(t){return t=ke(t),t.length===1?t[0]:{type:rC,features:t.reduce((e,i)=>e.concat(mTe(i)),[])}}function mTe(t){return t.type===rC?t.features:ke(t).filter(e=>e!=null).map(e=>e.type===yF?e:{type:yF,geometry:e})}const wTe=Object.freeze(Object.defineProperty({__proto__:null,contour:sC,geojson:aC,geopath:oC,geopoint:lC,geoshape:cC,graticule:dC,heatmap:fC,isocontour:iC,kde2d:nC,projection:MY},Symbol.toStringTag,{value:"Module"})),G6={center:Vre,collide:dae,nbody:Tae,link:uae,x:vae,y:Eae},Vy="forces",gF=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],bTe=["static","iterations"],AY=["x","y","vx","vy"];function uC(t){ae.call(this,null,t)}uC.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:AY}]};Ee(uC,ae,{transform(t,e){var i=this.value,n=e.changed(e.ADD_REM),s=t.modified(gF),a=t.iterations||300;if(i?(n&&(e.modifies("index"),i.nodes(e.source)),(s||e.changed(e.MOD))&&OY(i,t,0,e)):(this.value=i=vTe(e.source,t),i.on("tick",TTe(e.dataflow,this)),t.static||(n=!0,i.tick()),e.modifies("index")),s||n||t.modified(bTe)||e.changed()&&t.restart){if(i.alpha(Math.max(i.alpha(),t.alpha||1)).alphaDecay(1-Math.pow(i.alphaMin(),1/a)),t.static)for(i.stop();--a>=0;)i.tick();else if(i.stopped()&&i.restart(),!n)return e.StopPropagation}return this.finish(t,e)},finish(t,e){const i=e.dataflow;for(let d=this._argops,f=0,u=d.length,o;f<u;++f)if(o=d[f],!(o.name!==Vy||o.op._argval.force!=="link")){for(var n=o.op._argops,s=0,a=n.length,c;s<a;++s)if(n[s].name==="links"&&(c=n[s].op.source)){i.pulse(c,i.changeset().reflow());break}}return e.reflow(t.modified()).modifies(AY)}});function TTe(t,e){return()=>t.touch(e).run()}function vTe(t,e){const i=bae(t),n=i.stop,s=i.restart;let a=!1;return i.stopped=()=>a,i.restart=()=>(a=!1,s()),i.stop=()=>(a=!0,n()),OY(i,e,!0).on("end",()=>a=!0)}function OY(t,e,i,n){var s=ke(e.forces),a,c,d,f;for(a=0,c=gF.length;a<c;++a)d=gF[a],d!==Vy&&e.modified(d)&&t[d](e[d]);for(a=0,c=s.length;a<c;++a)f=Vy+a,d=i||e.modified(Vy,a)?STe(s[a]):n&&ETe(s[a],n)?t.force(f):null,d&&t.force(f,d);for(c=t.numForces||0;a<c;++a)t.force(Vy+a,null);return t.numForces=s.length,t}function ETe(t,e){var i,n;for(i in t)if(gt(n=t[i])&&e.modified(Mn(n)))return 1;return 0}function STe(t){var e,i;Pe(G6,t.force)||de("Unrecognized force: "+t.force),e=G6[t.force]();for(i in t)gt(e[i])&&xTe(e[i],t[i],t);return e}function xTe(t,e,i){t(gt(e)?n=>e(n,i):e)}const BTe=Object.freeze(Object.defineProperty({__proto__:null,force:uC},Symbol.toStringTag,{value:"Module"}));function mF(t,e,i){const n={};return t.each(s=>{const a=s.data;i(a)&&(n[e(a)]=s)}),t.lookup=n,t}function hC(t){ae.call(this,null,t)}hC.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const ITe=t=>t.values;Ee(hC,ae,{transform(t,e){e.source||de("Nest transform requires an upstream data source.");var i=t.generate,n=t.modified(),s=e.clone(),a=this.value;return(!a||n||e.changed())&&(a&&a.each(c=>{c.children&&QE(c.data)&&s.rem.push(c.data)}),this.value=a=YM({values:ke(t.keys).reduce((c,d)=>(c.key(d),c),kTe()).entries(s.source)},ITe),i&&a.each(c=>{c.children&&(c=Gt(c.data),s.add.push(c),s.source.push(c))}),mF(a,Le,Le)),s.source.root=a,s}});function kTe(){const t=[],e={entries:s=>n(i(s,0),0),key:s=>(t.push(s),e)};function i(s,a){if(a>=t.length)return s;const c=s.length,d=t[a++],f={},u={};let o=-1,g,w,m;for(;++o<c;)g=d(w=s[o])+"",(m=f[g])?m.push(w):f[g]=[w];for(g in f)u[g]=i(f[g],a);return u}function n(s,a){if(++a>t.length)return s;const c=[];for(const d in s)c.push({key:d,values:n(s[d],a)});return c}return e}function Gl(t){ae.call(this,null,t)}const FTe=(t,e)=>t.parent===e.parent?1:2;Ee(Gl,ae,{transform(t,e){(!e.source||!e.source.root)&&de(this.constructor.name+" transform requires a backing tree data source.");const i=this.layout(t.method),n=this.fields,s=e.source.root,a=t.as||n;t.field?s.sum(t.field):s.count(),t.sort&&s.sort(Au(t.sort,c=>c.data)),MTe(i,this.params,t),i.separation&&i.separation(t.separation!==!1?FTe:b_);try{this.value=i(s)}catch(c){de(c)}return s.each(c=>ATe(c,n,a)),e.reflow(t.modified()).modifies(a).modifies("leaf")}});function MTe(t,e,i){for(let n,s=0,a=e.length;s<a;++s)n=e[s],n in i&&t[n](i[n])}function ATe(t,e,i){const n=t.data,s=e.length-1;for(let a=0;a<s;++a)n[i[a]]=t[e[a]];n[i[s]]=t.children?t.children.length:0}const wF=["x","y","r","depth","children"];function pC(t){Gl.call(this,t)}pC.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:wF.length,default:wF}]};Ee(pC,Gl,{layout:Sle,params:["radius","size","padding"],fields:wF});const bF=["x0","y0","x1","y1","depth","children"];function _C(t){Gl.call(this,t)}_C.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:bF.length,default:bF}]};Ee(_C,Gl,{layout:xle,params:["size","round","padding"],fields:bF});function yC(t){ae.call(this,null,t)}yC.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};Ee(yC,ae,{transform(t,e){e.source||de("Stratify transform requires an upstream data source.");let i=this.value;const n=t.modified(),s=e.fork(e.ALL).materialize(e.SOURCE),a=!i||n||e.changed(e.ADD_REM)||e.modified(t.key.fields)||e.modified(t.parentKey.fields);return s.source=s.source.slice(),a&&(i=s.source.length?mF(qP().id(t.key).parentId(t.parentKey)(s.source),t.key,Ar):mF(qP()([{}]),t.key,t.key)),s.source.root=this.value=i,s}});const V6={tidy:Rle,cluster:Hoe},TF=["x","y","depth","children"];function gC(t){Gl.call(this,t)}gC.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:TF.length,default:TF}]};Ee(gC,Gl,{layout(t){const e=t||"tidy";if(Pe(V6,e))return V6[e]();de("Unrecognized Tree layout method: "+e)},params:["size","nodeSize"],fields:TF});function mC(t){ae.call(this,[],t)}mC.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};Ee(mC,ae,{transform(t,e){const i=this.value,n=e.source&&e.source.root,s=e.fork(e.NO_SOURCE),a={};return n||de("TreeLinks transform requires a tree data source."),e.changed(e.ADD_REM)?(s.rem=i,e.visit(e.SOURCE,c=>a[Le(c)]=1),n.each(c=>{const d=c.data,f=c.parent&&c.parent.data;f&&a[Le(d)]&&a[Le(f)]&&s.add.push(Gt({source:f,target:d}))}),this.value=s.add):e.changed(e.MOD)&&(e.visit(e.MOD,c=>a[Le(c)]=1),i.forEach(c=>{(a[Le(c.source)]||a[Le(c.target)])&&s.mod.push(c)})),s}});const W6={binary:Dle,dice:Nm,slice:xE,slicedice:Ple,squarify:Hq,resquarify:$le},vF=["x0","y0","x1","y1","depth","children"];function wC(t){Gl.call(this,t)}wC.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:vF.length,default:vF}]};Ee(wC,Gl,{layout(){const t=Lle();return t.ratio=e=>{const i=t.tile();i.ratio&&t.tile(i.ratio(e))},t.method=e=>{Pe(W6,e)?t.tile(W6[e]):de("Unrecognized Treemap layout method: "+e)},t},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:vF});const OTe=Object.freeze(Object.defineProperty({__proto__:null,nest:hC,pack:pC,partition:_C,stratify:yC,tree:gC,treelinks:mC,treemap:wC},Symbol.toStringTag,{value:"Module"}));function OB(t,e){if(typeof document<"u"&&document.createElement){const i=document.createElement("canvas");if(i&&i.getContext)return i.width=t,i.height=e,i}return null}const NB=4278190080;function NTe(t,e){const i=t.bitmap();return(e||[]).forEach(n=>i.set(t(n.boundary[0]),t(n.boundary[3]))),[i,void 0]}function CTe(t,e,i,n,s){const a=t.width,c=t.height,d=n||s,f=OB(a,c).getContext("2d"),u=OB(a,c).getContext("2d"),o=d&&OB(a,c).getContext("2d");i.forEach(R=>gT(f,R,!1)),gT(u,e,!1),d&&gT(o,e,!0);const g=CB(f,a,c),w=CB(u,a,c),m=d&&CB(o,a,c),l=t.bitmap(),T=d&&t.bitmap();let b,S,x,B,F,I,A,O;for(S=0;S<c;++S)for(b=0;b<a;++b)F=S*a+b,I=g[F]&NB,O=w[F]&NB,A=d&&m[F]&NB,(I||A||O)&&(x=t(b),B=t(S),!s&&(I||O)&&l.set(x,B),d&&(I||A)&&T.set(x,B));return[l,T]}function CB(t,e,i){return new Uint32Array(t.getImageData(0,0,e,i).data.buffer)}function gT(t,e,i){if(!e.length)return;const n=e[0].mark.marktype;n==="group"?e.forEach(s=>{s.items.forEach(a=>gT(t,a.items,i))}):rr[n].draw(t,{items:i?e.map(RTe):e})}function RTe(t){const e=ZE(t,{});return e.stroke&&e.strokeOpacity!==0||e.fill&&e.fillOpacity!==0?{...e,strokeOpacity:1,stroke:"#000",fillOpacity:0}:e}const Yo=5,Un=31,Jg=32,gc=new Uint32Array(Jg+1),Yr=new Uint32Array(Jg+1);Yr[0]=0;gc[0]=~Yr[0];for(let t=1;t<=Jg;++t)Yr[t]=Yr[t-1]<<1|1,gc[t]=~Yr[t];function LTe(t,e){const i=new Uint32Array(~~((t*e+Jg)/Jg));function n(a,c){i[a]|=c}function s(a,c){i[a]&=c}return{array:i,get:(a,c)=>{const d=c*t+a;return i[d>>>Yo]&1<<(d&Un)},set:(a,c)=>{const d=c*t+a;n(d>>>Yo,1<<(d&Un))},clear:(a,c)=>{const d=c*t+a;s(d>>>Yo,~(1<<(d&Un)))},getRange:(a,c,d,f)=>{let u=f,o,g,w,m;for(;u>=c;--u)if(o=u*t+a,g=u*t+d,w=o>>>Yo,m=g>>>Yo,w===m){if(i[w]&gc[o&Un]&Yr[(g&Un)+1])return!0}else{if(i[w]&gc[o&Un]||i[m]&Yr[(g&Un)+1])return!0;for(let l=w+1;l<m;++l)if(i[l])return!0}return!1},setRange:(a,c,d,f)=>{let u,o,g,w,m;for(;c<=f;++c)if(u=c*t+a,o=c*t+d,g=u>>>Yo,w=o>>>Yo,g===w)n(g,gc[u&Un]&Yr[(o&Un)+1]);else for(n(g,gc[u&Un]),n(w,Yr[(o&Un)+1]),m=g+1;m<w;++m)n(m,4294967295)},clearRange:(a,c,d,f)=>{let u,o,g,w,m;for(;c<=f;++c)if(u=c*t+a,o=c*t+d,g=u>>>Yo,w=o>>>Yo,g===w)s(g,Yr[u&Un]|gc[(o&Un)+1]);else for(s(g,Yr[u&Un]),s(w,gc[(o&Un)+1]),m=g+1;m<w;++m)s(m,0)},outOfBounds:(a,c,d,f)=>a<0||c<0||f>=e||d>=t}}function DTe(t,e,i){const n=Math.max(1,Math.sqrt(t*e/1e6)),s=~~((t+2*i+n)/n),a=~~((e+2*i+n)/n),c=d=>~~((d+i)/n);return c.invert=d=>d*n-i,c.bitmap=()=>LTe(s,a),c.ratio=n,c.padding=i,c.width=t,c.height=e,c}function PTe(t,e,i,n){const s=t.width,a=t.height;return function(c){const d=c.datum.datum.items[n].items,f=d.length,u=c.datum.fontSize,o=aa.width(c.datum,c.datum.text);let g=0,w,m,l,T,b,S,x;for(let B=0;B<f;++B)w=d[B].x,l=d[B].y,m=d[B].x2===void 0?w:d[B].x2,T=d[B].y2===void 0?l:d[B].y2,b=(w+m)/2,S=(l+T)/2,x=Math.abs(m-w+T-l),x>=g&&(g=x,c.x=b,c.y=S);return b=o/2,S=u/2,w=c.x-b,m=c.x+b,l=c.y-S,T=c.y+S,c.align="center",w<0&&m<=s?c.align="left":0<=w&&s<m&&(c.align="right"),c.baseline="middle",l<0&&T<=a?c.baseline="top":0<=l&&a<T&&(c.baseline="bottom"),!0}}function Iv(t,e,i,n,s,a){let c=i/2;return t-c<0||t+c>s||e-(c=n/2)<0||e+c>a}function kc(t,e,i,n,s,a,c,d){const f=s*a/(n*2),u=t(e-f),o=t(e+f),g=t(i-(a=a/2)),w=t(i+a);return c.outOfBounds(u,g,o,w)||c.getRange(u,g,o,w)||d&&d.getRange(u,g,o,w)}function $Te(t,e,i,n){const s=t.width,a=t.height,c=e[0],d=e[1];function f(u,o,g,w,m){const l=t.invert(u),T=t.invert(o);let b=g,S=a,x;if(!Iv(l,T,w,m,s,a)&&!kc(t,l,T,m,w,b,c,d)&&!kc(t,l,T,m,w,m,c,null)){for(;S-b>=1;)x=(b+S)/2,kc(t,l,T,m,w,x,c,d)?S=x:b=x;if(b>g)return[l,T,b,!0]}}return function(u){const o=u.datum.datum.items[n].items,g=o.length,w=u.datum.fontSize,m=aa.width(u.datum,u.datum.text);let l=i?w:0,T=!1,b=!1,S=0,x,B,F,I,A,O,R,D,P,U,Y,z,W,V,H,J,G;for(let le=0;le<g;++le){for(x=o[le].x,F=o[le].y,B=o[le].x2===void 0?x:o[le].x2,I=o[le].y2===void 0?F:o[le].y2,x>B&&(G=x,x=B,B=G),F>I&&(G=F,F=I,I=G),P=t(x),Y=t(B),U=~~((P+Y)/2),z=t(F),V=t(I),W=~~((z+V)/2),R=U;R>=P;--R)for(D=W;D>=z;--D)J=f(R,D,l,m,w),J&&([u.x,u.y,l,T]=J);for(R=U;R<=Y;++R)for(D=W;D<=V;++D)J=f(R,D,l,m,w),J&&([u.x,u.y,l,T]=J);!T&&!i&&(H=Math.abs(B-x+I-F),A=(x+B)/2,O=(F+I)/2,H>=S&&!Iv(A,O,m,w,s,a)&&!kc(t,A,O,w,m,w,c,null)&&(S=H,u.x=A,u.y=O,b=!0))}return T||b?(A=m/2,O=w/2,c.setRange(t(u.x-A),t(u.y-O),t(u.x+A),t(u.y+O)),u.align="center",u.baseline="middle",!0):!1}}const UTe=[-1,-1,1,1],zTe=[-1,1,-1,1];function jTe(t,e,i,n){const s=t.width,a=t.height,c=e[0],d=e[1],f=t.bitmap();return function(u){const o=u.datum.datum.items[n].items,g=o.length,w=u.datum.fontSize,m=aa.width(u.datum,u.datum.text),l=[];let T=i?w:0,b=!1,S=!1,x=0,B,F,I,A,O,R,D,P,U,Y,z,W;for(let V=0;V<g;++V){for(B=o[V].x,I=o[V].y,F=o[V].x2===void 0?B:o[V].x2,A=o[V].y2===void 0?I:o[V].y2,l.push([t((B+F)/2),t((I+A)/2)]);l.length;)if([D,P]=l.pop(),!(c.get(D,P)||d.get(D,P)||f.get(D,P))){f.set(D,P);for(let H=0;H<4;++H)O=D+UTe[H],R=P+zTe[H],f.outOfBounds(O,R,O,R)||l.push([O,R]);if(O=t.invert(D),R=t.invert(P),U=T,Y=a,!Iv(O,R,m,w,s,a)&&!kc(t,O,R,w,m,U,c,d)&&!kc(t,O,R,w,m,w,c,null)){for(;Y-U>=1;)z=(U+Y)/2,kc(t,O,R,w,m,z,c,d)?Y=z:U=z;U>T&&(u.x=O,u.y=R,T=U,b=!0)}}!b&&!i&&(W=Math.abs(F-B+A-I),O=(B+F)/2,R=(I+A)/2,W>=x&&!Iv(O,R,m,w,s,a)&&!kc(t,O,R,w,m,w,c,null)&&(x=W,u.x=O,u.y=R,S=!0))}return b||S?(O=m/2,R=w/2,c.setRange(t(u.x-O),t(u.y-R),t(u.x+O),t(u.y+R)),u.align="center",u.baseline="middle",!0):!1}}const qTe=["right","center","left"],GTe=["bottom","middle","top"];function VTe(t,e,i,n){const s=t.width,a=t.height,c=e[0],d=e[1],f=n.length;return function(u){const o=u.boundary,g=u.datum.fontSize;if(o[2]<0||o[5]<0||o[0]>s||o[3]>a)return!1;let w=u.textWidth??0,m,l,T,b,S,x,B,F,I,A,O,R,D,P,U;for(let Y=0;Y<f;++Y){if(m=(i[Y]&3)-1,l=(i[Y]>>>2&3)-1,T=m===0&&l===0||n[Y]<0,b=m&&l?Math.SQRT1_2:1,S=n[Y]<0?-1:1,x=o[1+m]+n[Y]*m*b,O=o[4+l]+S*g*l/2+n[Y]*l*b,F=O-g/2,I=O+g/2,R=t(x),P=t(F),U=t(I),!w)if(H6(R,R,P,U,c,d,x,x,F,I,o,T))w=aa.width(u.datum,u.datum.text);else continue;if(A=x+S*w*m/2,x=A-w/2,B=A+w/2,R=t(x),D=t(B),H6(R,D,P,U,c,d,x,B,F,I,o,T))return u.x=m?m*S<0?B:x:A,u.y=l?l*S<0?I:F:O,u.align=qTe[m*S+1],u.baseline=GTe[l*S+1],c.setRange(R,P,D,U),!0}return!1}}function H6(t,e,i,n,s,a,c,d,f,u,o,g){return!(s.outOfBounds(t,i,e,n)||(g&&a||s).getRange(t,i,e,n))}const RB=0,LB=4,DB=8,PB=0,$B=1,UB=2,WTe={"top-left":RB+PB,top:RB+$B,"top-right":RB+UB,left:LB+PB,middle:LB+$B,right:LB+UB,"bottom-left":DB+PB,bottom:DB+$B,"bottom-right":DB+UB},HTe={naive:PTe,"reduced-search":$Te,floodfill:jTe};function YTe(t,e,i,n,s,a,c,d,f,u,o){if(!t.length)return t;const g=Math.max(n.length,s.length),w=XTe(n,g),m=KTe(s,g),l=JTe(t[0].datum),T=l==="group"&&t[0].datum.items[f].marktype,b=T==="area",S=QTe(l,T,d,f),x=u===null||u===1/0,B=b&&o==="naive";let F=-1,I=-1;const A=t.map(P=>{const U=x?aa.width(P,P.text):void 0;return F=Math.max(F,U),I=Math.max(I,P.fontSize),{datum:P,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:S(P),textWidth:U}});u=u===null||u===1/0?Math.max(F,I)+Math.max(...n):u;const O=DTe(e[0],e[1],u);let R;if(!B){i&&A.sort((Y,z)=>i(Y.datum,z.datum));let P=!1;for(let Y=0;Y<m.length&&!P;++Y)P=m[Y]===5||w[Y]<0;const U=(l&&c||b)&&t.map(Y=>Y.datum);R=a.length||U?CTe(O,U||[],a,P,b):NTe(O,c&&A)}const D=b?HTe[o](O,R,c,f):VTe(O,R,m,w);return A.forEach(P=>P.opacity=+D(P)),A}function XTe(t,e){const i=new Float64Array(e),n=t.length;for(let s=0;s<n;++s)i[s]=t[s]||0;for(let s=n;s<e;++s)i[s]=i[n-1];return i}function KTe(t,e){const i=new Int8Array(e),n=t.length;for(let s=0;s<n;++s)i[s]|=WTe[t[s]];for(let s=n;s<e;++s)i[s]=i[n-1];return i}function JTe(t){return t&&t.mark&&t.mark.marktype}function QTe(t,e,i,n){const s=a=>[a.x,a.x,a.x,a.y,a.y,a.y];return t?t==="line"||t==="area"?a=>s(a.datum):e==="line"?a=>{const c=a.datum.items[n].items;return s(c.length?c[i==="start"?0:c.length-1]:{x:NaN,y:NaN})}:a=>{const c=a.datum.bounds;return[c.x1,(c.x1+c.x2)/2,c.x2,c.y1,(c.y1+c.y2)/2,c.y2]}:s}const EF=["x","y","opacity","align","baseline"],NY=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function bC(t){ae.call(this,null,t)}bC.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:NY},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:EF.length,default:EF}]};Ee(bC,ae,{transform(t,e){function i(a){const c=t[a];return gt(c)&&e.modified(c.fields)}const n=t.modified();if(!(n||e.changed(e.ADD_REM)||i("sort")))return;(!t.size||t.size.length!==2)&&de("Size parameter should be specified as a [width, height] array.");const s=t.as||EF;return YTe(e.materialize(e.SOURCE).source||[],t.size,t.sort,ke(t.offset==null?1:t.offset),ke(t.anchor||NY),t.avoidMarks||[],t.avoidBaseMark!==!1,t.lineAnchor||"end",t.markIndex||0,t.padding===void 0?0:t.padding,t.method||"naive").forEach(a=>{const c=a.datum;c[s[0]]=a.x,c[s[1]]=a.y,c[s[2]]=a.opacity,c[s[3]]=a.align,c[s[4]]=a.baseline}),e.reflow(n).modifies(s)}});const ZTe=Object.freeze(Object.defineProperty({__proto__:null,label:bC},Symbol.toStringTag,{value:"Module"}));function CY(t,e){var i=[],n=function(o){return o(d)},s,a,c,d,f,u;if(e==null)i.push(t);else for(s={},a=0,c=t.length;a<c;++a)d=t[a],f=e.map(n),u=s[f],u||(s[f]=u=[],u.dims=f,i.push(u)),u.push(d);return i}function TC(t){ae.call(this,null,t)}TC.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};Ee(TC,ae,{transform(t,e){const i=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const n=e.materialize(e.SOURCE).source,s=CY(n,t.groupby),a=(t.groupby||[]).map(Ai),c=a.length,d=t.as||[Ai(t.x),Ai(t.y)],f=[];s.forEach(u=>{W7(u,t.x,t.y,t.bandwidth||.3).forEach(o=>{const g={};for(let w=0;w<c;++w)g[a[w]]=u.dims[w];g[d[0]]=o[0],g[d[1]]=o[1],f.push(Gt(g))})}),this.value&&(i.rem=this.value),this.value=i.add=i.source=f}return i}});const SF={constant:kA,linear:FA,log:j7,exp:q7,pow:G7,quad:MA,poly:V7},e1e=(t,e)=>t==="poly"?e:t==="quad"?2:1;function vC(t){ae.call(this,null,t)}vC.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(SF)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};Ee(vC,ae,{transform(t,e){const i=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const n=e.materialize(e.SOURCE).source,s=CY(n,t.groupby),a=(t.groupby||[]).map(Ai),c=t.method||"linear",d=t.order==null?3:t.order,f=e1e(c,d),u=t.as||[Ai(t.x),Ai(t.y)],o=SF[c],g=[];let w=t.extent;Pe(SF,c)||de("Invalid regression method: "+c),w!=null&&c==="log"&&w[0]<=0&&(e.dataflow.warn("Ignoring extent with values <= 0 for log regression."),w=null),s.forEach(m=>{if(m.length<=f){e.dataflow.warn("Skipping regression with more parameters than data points.");return}const T=o(m,t.x,t.y,d);if(t.params){g.push(Gt({keys:m.dims,coef:T.coef,rSquared:T.rSquared}));return}const b=w||xo(m,t.x),S=x=>{const B={};for(let F=0;F<a.length;++F)B[a[F]]=m.dims[F];B[u[0]]=x[0],B[u[1]]=x[1],g.push(Gt(B))};c==="linear"||c==="constant"?b.forEach(x=>S([x,T.predict(x)])):UE(T.predict,b,25,200).forEach(S)}),this.value&&(i.rem=this.value),this.value=i.add=i.source=g}return i}});const t1e=Object.freeze(Object.defineProperty({__proto__:null,loess:TC,regression:vC},Symbol.toStringTag,{value:"Module"}));function EC(t){ae.call(this,null,t)}EC.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const i1e=[-1e5,-1e5,1e5,1e5];Ee(EC,ae,{transform(t,e){const i=t.as||"path",n=e.source;if(!n||!n.length)return e;let s=t.size;s=s?[0,0,s[0],s[1]]:(s=t.extent)?[s[0][0],s[0][1],s[1][0],s[1][1]]:i1e;const a=this.value=LM.from(n,t.x,t.y).voronoi(s);for(let c=0,d=n.length;c<d;++c){const f=a.cellPolygon(c);n[c][i]=f?n1e(f):null}return e.reflow(t.modified()).modifies(i)}});function n1e(t){const e=t[0][0],i=t[0][1];let n=t.length-1;for(;t[n][0]===e&&t[n][1]===i;--n);return"M"+t.slice(0,n+1).join("L")+"Z"}const s1e=Object.freeze(Object.defineProperty({__proto__:null,voronoi:EC},Symbol.toStringTag,{value:"Module"}));var zB=Math.PI/180,Wy=1<<11>>5,mT=1<<11;function r1e(){var t=[256,256],e,i,n,s,a,c,d,f=RY,u=[],o=Math.random,g={};g.layout=function(){for(var l=w(Hm()),T=f1e((t[0]>>5)*t[1]),b=null,S=u.length,x=-1,B=[],F=u.map(A=>({text:e(A),font:i(A),style:s(A),weight:a(A),rotate:c(A),size:~~(n(A)+1e-14),padding:d(A),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:A})).sort((A,O)=>O.size-A.size);++x<S;){var I=F[x];I.x=t[0]*(o()+.5)>>1,I.y=t[1]*(o()+.5)>>1,a1e(l,I,F,x),I.hasText&&m(T,I,b)&&(B.push(I),b?l1e(b,I):b=[{x:I.x+I.x0,y:I.y+I.y0},{x:I.x+I.x1,y:I.y+I.y1}],I.x-=t[0]>>1,I.y-=t[1]>>1)}return B};function w(l){l.width=l.height=1;var T=Math.sqrt(l.getContext("2d").getImageData(0,0,1,1).data.length>>2);l.width=(Wy<<5)/T,l.height=mT/T;var b=l.getContext("2d");return b.fillStyle=b.strokeStyle="red",b.textAlign="center",{context:b,ratio:T}}function m(l,T,b){for(var S=T.x,x=T.y,B=Math.sqrt(t[0]*t[0]+t[1]*t[1]),F=f(t),I=o()<.5?1:-1,A=-I,O,R,D;(O=F(A+=I))&&(R=~~O[0],D=~~O[1],!(Math.min(Math.abs(R),Math.abs(D))>=B));)if(T.x=S+R,T.y=x+D,!(T.x+T.x0<0||T.y+T.y0<0||T.x+T.x1>t[0]||T.y+T.y1>t[1])&&(!b||!o1e(T,l,t[0]))&&(!b||c1e(T,b))){for(var P=T.sprite,U=T.width>>5,Y=t[0]>>5,z=T.x-(U<<4),W=z&127,V=32-W,H=T.y1-T.y0,J=(T.y+T.y0)*Y+(z>>5),G,le=0;le<H;le++){G=0;for(var pe=0;pe<=U;pe++)l[J+pe]|=G<<V|(pe<U?(G=P[le*U+pe])>>>W:0);J+=Y}return T.sprite=null,!0}return!1}return g.words=function(l){return arguments.length?(u=l,g):u},g.size=function(l){return arguments.length?(t=[+l[0],+l[1]],g):t},g.font=function(l){return arguments.length?(i=Ld(l),g):i},g.fontStyle=function(l){return arguments.length?(s=Ld(l),g):s},g.fontWeight=function(l){return arguments.length?(a=Ld(l),g):a},g.rotate=function(l){return arguments.length?(c=Ld(l),g):c},g.text=function(l){return arguments.length?(e=Ld(l),g):e},g.spiral=function(l){return arguments.length?(f=u1e[l]||l,g):f},g.fontSize=function(l){return arguments.length?(n=Ld(l),g):n},g.padding=function(l){return arguments.length?(d=Ld(l),g):d},g.random=function(l){return arguments.length?(o=l,g):o},g}function a1e(t,e,i,n){if(!e.sprite){var s=t.context,a=t.ratio;s.clearRect(0,0,(Wy<<5)/a,mT/a);var c=0,d=0,f=0,u=i.length,o,g,w,m,l;for(--n;++n<u;){if(e=i[n],s.save(),s.font=e.style+" "+e.weight+" "+~~((e.size+1)/a)+"px "+e.font,o=s.measureText(e.text+"m").width*a,w=e.size<<1,e.rotate){var T=Math.sin(e.rotate*zB),b=Math.cos(e.rotate*zB),S=o*b,x=o*T,B=w*b,F=w*T;o=Math.max(Math.abs(S+F),Math.abs(S-F))+31>>5<<5,w=~~Math.max(Math.abs(x+B),Math.abs(x-B))}else o=o+31>>5<<5;if(w>f&&(f=w),c+o>=Wy<<5&&(c=0,d+=f,f=0),d+w>=mT)break;s.translate((c+(o>>1))/a,(d+(w>>1))/a),e.rotate&&s.rotate(e.rotate*zB),s.fillText(e.text,0,0),e.padding&&(s.lineWidth=2*e.padding,s.strokeText(e.text,0,0)),s.restore(),e.width=o,e.height=w,e.xoff=c,e.yoff=d,e.x1=o>>1,e.y1=w>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,c+=o}for(var I=s.getImageData(0,0,(Wy<<5)/a,mT/a).data,A=[];--n>=0;)if(e=i[n],!!e.hasText){for(o=e.width,g=o>>5,w=e.y1-e.y0,m=0;m<w*g;m++)A[m]=0;if(c=e.xoff,c==null)return;d=e.yoff;var O=0,R=-1;for(l=0;l<w;l++){for(m=0;m<o;m++){var D=g*l+(m>>5),P=I[(d+l)*(Wy<<5)+(c+m)<<2]?1<<31-m%32:0;A[D]|=P,O|=P}O?R=l:(e.y0++,w--,l--,d++)}e.y1=e.y0+R,e.sprite=A.slice(0,(e.y1-e.y0)*g)}}}function o1e(t,e,i){i>>=5;for(var n=t.sprite,s=t.width>>5,a=t.x-(s<<4),c=a&127,d=32-c,f=t.y1-t.y0,u=(t.y+t.y0)*i+(a>>5),o,g=0;g<f;g++){o=0;for(var w=0;w<=s;w++)if((o<<d|(w<s?(o=n[g*s+w])>>>c:0))&e[u+w])return!0;u+=i}return!1}function l1e(t,e){var i=t[0],n=t[1];e.x+e.x0<i.x&&(i.x=e.x+e.x0),e.y+e.y0<i.y&&(i.y=e.y+e.y0),e.x+e.x1>n.x&&(n.x=e.x+e.x1),e.y+e.y1>n.y&&(n.y=e.y+e.y1)}function c1e(t,e){return t.x+t.x1>e[0].x&&t.x+t.x0<e[1].x&&t.y+t.y1>e[0].y&&t.y+t.y0<e[1].y}function RY(t){var e=t[0]/t[1];return function(i){return[e*(i*=.1)*Math.cos(i),i*Math.sin(i)]}}function d1e(t){var e=4,i=e*t[0]/t[1],n=0,s=0;return function(a){var c=a<0?-1:1;switch(Math.sqrt(1+4*c*a)-c&3){case 0:n+=i;break;case 1:s+=e;break;case 2:n-=i;break;default:s-=e;break}return[n,s]}}function f1e(t){for(var e=[],i=-1;++i<t;)e[i]=0;return e}function Ld(t){return typeof t=="function"?t:function(){return t}}var u1e={archimedean:RY,rectangular:d1e};const LY=["x","y","font","fontSize","fontStyle","fontWeight","angle"],h1e=["text","font","rotate","fontSize","fontStyle","fontWeight"];function SC(t){ae.call(this,r1e(),t)}SC.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:LY}]};Ee(SC,ae,{transform(t,e){t.size&&!(t.size[0]&&t.size[1])&&de("Wordcloud size dimensions must be non-zero.");function i(l){const T=t[l];return gt(T)&&e.modified(T.fields)}const n=t.modified();if(!(n||e.changed(e.ADD_REM)||h1e.some(i)))return;const s=e.materialize(e.SOURCE).source,a=this.value,c=t.as||LY;let d=t.fontSize||14,f;if(gt(d)?f=t.fontSizeRange:d=Ln(d),f){const l=d,T=$t("sqrt")().domain(xo(s,l)).range(f);d=b=>T(l(b))}s.forEach(l=>{l[c[0]]=NaN,l[c[1]]=NaN,l[c[3]]=0});const u=a.words(s).text(t.text).size(t.size||[500,500]).padding(t.padding||1).spiral(t.spiral||"archimedean").rotate(t.rotate||0).font(t.font||"sans-serif").fontStyle(t.fontStyle||"normal").fontWeight(t.fontWeight||"normal").fontSize(d).random(Fr).layout(),o=a.size(),g=o[0]>>1,w=o[1]>>1,m=u.length;for(let l=0,T,b;l<m;++l)T=u[l],b=T.datum,b[c[0]]=T.x+g,b[c[1]]=T.y+w,b[c[2]]=T.font,b[c[3]]=T.size,b[c[4]]=T.style,b[c[5]]=T.weight,b[c[6]]=T.rotate;return e.reflow(n).modifies(c)}});const p1e=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:SC},Symbol.toStringTag,{value:"Module"})),_1e=t=>new Uint8Array(t),y1e=t=>new Uint16Array(t),lg=t=>new Uint32Array(t);function g1e(){let t=8,e=[],i=lg(0),n=g0(0,t),s=g0(0,t);return{data:()=>e,seen:()=>i=m1e(i,e.length),add(a){for(let c=0,d=e.length,f=a.length,u;c<f;++c)u=a[c],u._index=d++,e.push(u)},remove(a,c){const d=e.length,f=Array(d-a),u=e;let o,g,w;for(g=0;!c[g]&&g<d;++g)f[g]=e[g],u[g]=g;for(w=g;g<d;++g)o=e[g],c[g]?u[g]=-1:(u[g]=w,n[w]=n[g],s[w]=s[g],f[w]=o,o._index=w++),n[g]=0;return e=f,u},size:()=>e.length,curr:()=>n,prev:()=>s,reset:a=>s[a]=n[a],all:()=>t<257?255:t<65537?65535:4294967295,set(a,c){n[a]|=c},clear(a,c){n[a]&=~c},resize(a,c){const d=n.length;(a>d||c>t)&&(t=Math.max(c,t),n=g0(a,t,n),s=g0(a,t))}}}function m1e(t,e,i){return t.length>=e?t:(i=i||new t.constructor(e),i.set(t),i)}function g0(t,e,i){const n=(e<257?_1e:e<65537?y1e:lg)(t);return i&&n.set(i),n}function Y6(t,e,i){const n=1<<e;return{one:n,zero:~n,range:i.slice(),bisect:t.bisect,index:t.index,size:t.size,onAdd(s,a){const c=this,d=c.bisect(c.range,s.value),f=s.index,u=d[0],o=d[1],g=f.length;let w;for(w=0;w<u;++w)a[f[w]]|=n;for(w=o;w<g;++w)a[f[w]]|=n;return c}}}function X6(){let t=lg(0),e=[],i=0;function n(d,f,u){if(!f.length)return[];const o=i,g=f.length,w=lg(g);let m=Array(g),l,T,b;for(b=0;b<g;++b)m[b]=d(f[b]),w[b]=b;if(m=w1e(m,w),o)l=e,T=t,e=Array(o+g),t=lg(o+g),b1e(u,l,T,o,m,w,g,e,t);else{if(u>0)for(b=0;b<g;++b)w[b]+=u;e=m,t=w}return i=o+g,{index:w,value:m}}function s(d,f){const u=i;let o,g,w;for(g=0;!f[t[g]]&&g<u;++g);for(w=g;g<u;++g)f[o=t[g]]||(t[w]=o,e[w]=e[g],++w);i=u-d}function a(d){for(let f=0,u=i;f<u;++f)t[f]=d[t[f]]}function c(d,f){let u;return f?u=f.length:(f=e,u=i),[yse(f,d[0],0,u),jT(f,d[1],0,u)]}return{insert:n,remove:s,bisect:c,reindex:a,index:()=>t,size:()=>i}}function w1e(t,e){return t.sort.call(e,(i,n)=>{const s=t[i],a=t[n];return s<a?-1:s>a?1:0}),wse(t,e)}function b1e(t,e,i,n,s,a,c,d,f){let u=0,o=0,g;for(g=0;u<n&&o<c;++g)e[u]<s[o]?(d[g]=e[u],f[g]=i[u++]):(d[g]=s[o],f[g]=a[o++]+t);for(;u<n;++u,++g)d[g]=e[u],f[g]=i[u];for(;o<c;++o,++g)d[g]=s[o],f[g]=a[o]+t}function xC(t){ae.call(this,g1e(),t),this._indices=null,this._dims=null}xC.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};Ee(xC,ae,{transform(t,e){if(this._dims){var i=t.modified("fields")||t.fields.some(n=>e.modified(n.fields));return i?this.reinit(t,e):this.eval(t,e)}else return this.init(t,e)},init(t,e){const i=t.fields,n=t.query,s=this._indices={},a=this._dims=[],c=n.length;let d=0,f,u;for(;d<c;++d)f=i[d].fname,u=s[f]||(s[f]=X6()),a.push(Y6(u,d,n[d]));return this.eval(t,e)},reinit(t,e){const i=e.materialize().fork(),n=t.fields,s=t.query,a=this._indices,c=this._dims,d=this.value,f=d.curr(),u=d.prev(),o=d.all(),g=i.rem=i.add,w=i.mod,m=s.length,l={};let T,b,S,x,B,F,I,A,O;if(u.set(f),e.rem.length&&(B=this.remove(t,e,i)),e.add.length&&d.add(e.add),e.mod.length)for(F={},x=e.mod,I=0,A=x.length;I<A;++I)F[x[I]._index]=1;for(I=0;I<m;++I)O=n[I],(!c[I]||t.modified("fields",I)||e.modified(O.fields))&&(S=O.fname,(T=l[S])||(a[S]=b=X6(),l[S]=T=b.insert(O,e.source,0)),c[I]=Y6(b,I,s[I]).onAdd(T,f));for(I=0,A=d.data().length;I<A;++I)B[I]||(u[I]!==f[I]?g.push(I):F[I]&&f[I]!==o&&w.push(I));return d.mask=(1<<m)-1,i},eval(t,e){const i=e.materialize().fork(),n=this._dims.length;let s=0;return e.rem.length&&(this.remove(t,e,i),s|=(1<<n)-1),t.modified("query")&&!t.modified("fields")&&(s|=this.update(t,e,i)),e.add.length&&(this.insert(t,e,i),s|=(1<<n)-1),e.mod.length&&(this.modify(e,i),s|=(1<<n)-1),this.value.mask=s,i},insert(t,e,i){const n=e.add,s=this.value,a=this._dims,c=this._indices,d=t.fields,f={},u=i.add,o=s.size()+n.length,g=a.length;let w=s.size(),m,l,T;s.resize(o,g),s.add(n);const b=s.curr(),S=s.prev(),x=s.all();for(m=0;m<g;++m)l=d[m].fname,T=f[l]||(f[l]=c[l].insert(d[m],n,w)),a[m].onAdd(T,b);for(;w<o;++w)S[w]=x,b[w]!==x&&u.push(w)},modify(t,e){const i=e.mod,n=this.value,s=n.curr(),a=n.all(),c=t.mod;let d,f,u;for(d=0,f=c.length;d<f;++d)u=c[d]._index,s[u]!==a&&i.push(u)},remove(t,e,i){const n=this._indices,s=this.value,a=s.curr(),c=s.prev(),d=s.all(),f={},u=i.rem,o=e.rem;let g,w,m,l;for(g=0,w=o.length;g<w;++g)m=o[g]._index,f[m]=1,c[m]=l=a[m],a[m]=d,l!==d&&u.push(m);for(m in n)n[m].remove(w,f);return this.reindex(e,w,f),f},reindex(t,e,i){const n=this._indices,s=this.value;t.runAfter(()=>{const a=s.remove(e,i);for(const c in n)n[c].reindex(a)})},update(t,e,i){const n=this._dims,s=t.query,a=e.stamp,c=n.length;let d=0,f,u;for(i.filters=0,u=0;u<c;++u)t.modified("query",u)&&(f=u,++d);if(d===1)d=n[f].one,this.incrementOne(n[f],s[f],i.add,i.rem);else for(u=0,d=0;u<c;++u)t.modified("query",u)&&(d|=n[u].one,this.incrementAll(n[u],s[u],a,i.add),i.rem=i.add);return d},incrementAll(t,e,i,n){const s=this.value,a=s.seen(),c=s.curr(),d=s.prev(),f=t.index(),u=t.bisect(t.range),o=t.bisect(e),g=o[0],w=o[1],m=u[0],l=u[1],T=t.one;let b,S,x;if(g<m)for(b=g,S=Math.min(m,w);b<S;++b)x=f[b],a[x]!==i&&(d[x]=c[x],a[x]=i,n.push(x)),c[x]^=T;else if(g>m)for(b=m,S=Math.min(g,l);b<S;++b)x=f[b],a[x]!==i&&(d[x]=c[x],a[x]=i,n.push(x)),c[x]^=T;if(w>l)for(b=Math.max(g,l),S=w;b<S;++b)x=f[b],a[x]!==i&&(d[x]=c[x],a[x]=i,n.push(x)),c[x]^=T;else if(w<l)for(b=Math.max(m,w),S=l;b<S;++b)x=f[b],a[x]!==i&&(d[x]=c[x],a[x]=i,n.push(x)),c[x]^=T;t.range=e.slice()},incrementOne(t,e,i,n){const s=this.value,a=s.curr(),c=t.index(),d=t.bisect(t.range),f=t.bisect(e),u=f[0],o=f[1],g=d[0],w=d[1],m=t.one;let l,T,b;if(u<g)for(l=u,T=Math.min(g,o);l<T;++l)b=c[l],a[b]^=m,i.push(b);else if(u>g)for(l=g,T=Math.min(u,w);l<T;++l)b=c[l],a[b]^=m,n.push(b);if(o>w)for(l=Math.max(u,w),T=o;l<T;++l)b=c[l],a[b]^=m,i.push(b);else if(o<w)for(l=Math.max(g,o),T=w;l<T;++l)b=c[l],a[b]^=m,n.push(b);t.range=e.slice()}});function BC(t){ae.call(this,null,t)}BC.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};Ee(BC,ae,{transform(t,e){const i=~(t.ignore||0),n=t.filter,s=n.mask;if(!(s&i))return e.StopPropagation;const a=e.fork(e.ALL),c=n.data(),d=n.curr(),f=n.prev(),u=o=>d[o]&i?null:c[o];return a.filter(a.MOD,u),s&s-1?(a.filter(a.ADD,o=>{const g=d[o]&i;return!g&&g^f[o]&i?c[o]:null}),a.filter(a.REM,o=>{const g=d[o]&i;return g&&!(g^(g^f[o]&i))?c[o]:null})):(a.filter(a.ADD,u),a.filter(a.REM,o=>(d[o]&i)===s?c[o]:null)),a.filter(a.SOURCE,o=>u(o._index))}});const T1e=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:xC,resolvefilter:BC},Symbol.toStringTag,{value:"Module"})),v1e="RawCode",eu="Literal",E1e="Property",S1e="Identifier",x1e="ArrayExpression",B1e="BinaryExpression",DY="CallExpression",I1e="ConditionalExpression",k1e="LogicalExpression",F1e="MemberExpression",M1e="ObjectExpression",A1e="UnaryExpression";function ba(t){this.type=t}ba.prototype.visit=function(t){let e,i,n;if(t(this))return 1;for(e=O1e(this),i=0,n=e.length;i<n;++i)if(e[i].visit(t))return 1};function O1e(t){switch(t.type){case x1e:return t.elements;case B1e:case k1e:return[t.left,t.right];case DY:return[t.callee].concat(t.arguments);case I1e:return[t.test,t.consequent,t.alternate];case F1e:return[t.object,t.property];case M1e:return t.properties;case E1e:return[t.key,t.value];case A1e:return[t.argument];case S1e:case eu:case v1e:default:return[]}}var Po,Ne,ce,On,ei,wS=1,aw=2,tu=3,Ed=4,bS=5,Cu=6,ds=7,ow=8,N1e=9;Po={};Po[wS]="Boolean";Po[aw]="<end>";Po[tu]="Identifier";Po[Ed]="Keyword";Po[bS]="Null";Po[Cu]="Numeric";Po[ds]="Punctuator";Po[ow]="String";Po[N1e]="RegularExpression";var C1e="ArrayExpression",R1e="BinaryExpression",L1e="CallExpression",D1e="ConditionalExpression",PY="Identifier",P1e="Literal",$1e="LogicalExpression",U1e="MemberExpression",z1e="ObjectExpression",j1e="Property",q1e="UnaryExpression",nn="Unexpected token %0",G1e="Unexpected number",V1e="Unexpected string",W1e="Unexpected identifier",H1e="Unexpected reserved word",Y1e="Unexpected end of input",xF="Invalid regular expression",jB="Invalid regular expression: missing /",$Y="Octal literals are not allowed in strict mode.",X1e="Duplicate data property in object literal not allowed in strict mode",_n="ILLEGAL",Qg="Disabled.",K1e=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),J1e=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function TS(t,e){if(!t)throw new Error("ASSERT: "+e)}function ll(t){return t>=48&&t<=57}function IC(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function cg(t){return"01234567".indexOf(t)>=0}function Q1e(t){return t===32||t===9||t===11||t===12||t===160||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function Zg(t){return t===10||t===13||t===8232||t===8233}function lw(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t===92||t>=128&&K1e.test(String.fromCharCode(t))}function kv(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||t===92||t>=128&&J1e.test(String.fromCharCode(t))}const Z1e={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function UY(){for(;ce<On;){const t=Ne.charCodeAt(ce);if(Q1e(t)||Zg(t))++ce;else break}}function BF(t){var e,i,n,s=0;for(i=t==="u"?4:2,e=0;e<i;++e)ce<On&&IC(Ne[ce])?(n=Ne[ce++],s=s*16+"0123456789abcdef".indexOf(n.toLowerCase())):Dt({},nn,_n);return String.fromCharCode(s)}function eve(){var t,e,i,n;for(t=Ne[ce],e=0,t==="}"&&Dt({},nn,_n);ce<On&&(t=Ne[ce++],!!IC(t));)e=e*16+"0123456789abcdef".indexOf(t.toLowerCase());return(e>1114111||t!=="}")&&Dt({},nn,_n),e<=65535?String.fromCharCode(e):(i=(e-65536>>10)+55296,n=(e-65536&1023)+56320,String.fromCharCode(i,n))}function zY(){var t,e;for(t=Ne.charCodeAt(ce++),e=String.fromCharCode(t),t===92&&(Ne.charCodeAt(ce)!==117&&Dt({},nn,_n),++ce,t=BF("u"),(!t||t==="\\"||!lw(t.charCodeAt(0)))&&Dt({},nn,_n),e=t);ce<On&&(t=Ne.charCodeAt(ce),!!kv(t));)++ce,e+=String.fromCharCode(t),t===92&&(e=e.substr(0,e.length-1),Ne.charCodeAt(ce)!==117&&Dt({},nn,_n),++ce,t=BF("u"),(!t||t==="\\"||!kv(t.charCodeAt(0)))&&Dt({},nn,_n),e+=t);return e}function tve(){var t,e;for(t=ce++;ce<On;){if(e=Ne.charCodeAt(ce),e===92)return ce=t,zY();if(kv(e))++ce;else break}return Ne.slice(t,ce)}function ive(){var t,e,i;return t=ce,e=Ne.charCodeAt(ce)===92?zY():tve(),e.length===1?i=tu:Z1e.hasOwnProperty(e)?i=Ed:e==="null"?i=bS:e==="true"||e==="false"?i=wS:i=tu,{type:i,value:e,start:t,end:ce}}function qB(){var t=ce,e=Ne.charCodeAt(ce),i,n=Ne[ce],s,a,c;switch(e){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ce,{type:ds,value:String.fromCharCode(e),start:t,end:ce};default:if(i=Ne.charCodeAt(ce+1),i===61)switch(e){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ce+=2,{type:ds,value:String.fromCharCode(e)+String.fromCharCode(i),start:t,end:ce};case 33:case 61:return ce+=2,Ne.charCodeAt(ce)===61&&++ce,{type:ds,value:Ne.slice(t,ce),start:t,end:ce}}}if(c=Ne.substr(ce,4),c===">>>=")return ce+=4,{type:ds,value:c,start:t,end:ce};if(a=c.substr(0,3),a===">>>"||a==="<<="||a===">>=")return ce+=3,{type:ds,value:a,start:t,end:ce};if(s=a.substr(0,2),n===s[1]&&"+-<>&|".indexOf(n)>=0||s==="=>")return ce+=2,{type:ds,value:s,start:t,end:ce};if(s==="//"&&Dt({},nn,_n),"<>=!+-*%&|^/".indexOf(n)>=0)return++ce,{type:ds,value:n,start:t,end:ce};Dt({},nn,_n)}function nve(t){let e="";for(;ce<On&&IC(Ne[ce]);)e+=Ne[ce++];return e.length===0&&Dt({},nn,_n),lw(Ne.charCodeAt(ce))&&Dt({},nn,_n),{type:Cu,value:parseInt("0x"+e,16),start:t,end:ce}}function sve(t){let e="0"+Ne[ce++];for(;ce<On&&cg(Ne[ce]);)e+=Ne[ce++];return(lw(Ne.charCodeAt(ce))||ll(Ne.charCodeAt(ce)))&&Dt({},nn,_n),{type:Cu,value:parseInt(e,8),octal:!0,start:t,end:ce}}function K6(){var t,e,i;if(i=Ne[ce],TS(ll(i.charCodeAt(0))||i===".","Numeric literal must start with a decimal digit or a decimal point"),e=ce,t="",i!=="."){if(t=Ne[ce++],i=Ne[ce],t==="0"){if(i==="x"||i==="X")return++ce,nve(e);if(cg(i))return sve(e);i&&ll(i.charCodeAt(0))&&Dt({},nn,_n)}for(;ll(Ne.charCodeAt(ce));)t+=Ne[ce++];i=Ne[ce]}if(i==="."){for(t+=Ne[ce++];ll(Ne.charCodeAt(ce));)t+=Ne[ce++];i=Ne[ce]}if(i==="e"||i==="E")if(t+=Ne[ce++],i=Ne[ce],(i==="+"||i==="-")&&(t+=Ne[ce++]),ll(Ne.charCodeAt(ce)))for(;ll(Ne.charCodeAt(ce));)t+=Ne[ce++];else Dt({},nn,_n);return lw(Ne.charCodeAt(ce))&&Dt({},nn,_n),{type:Cu,value:parseFloat(t),start:e,end:ce}}function rve(){var t="",e,i,n,s,a=!1;for(e=Ne[ce],TS(e==="'"||e==='"',"String literal must starts with a quote"),i=ce,++ce;ce<On;)if(n=Ne[ce++],n===e){e="";break}else if(n==="\\")if(n=Ne[ce++],!n||!Zg(n.charCodeAt(0)))switch(n){case"u":case"x":Ne[ce]==="{"?(++ce,t+=eve()):t+=BF(n);break;case"n":t+=`
`;break;case"r":t+="\r";break;case"t":t+="	";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:cg(n)?(s="01234567".indexOf(n),s!==0&&(a=!0),ce<On&&cg(Ne[ce])&&(a=!0,s=s*8+"01234567".indexOf(Ne[ce++]),"0123".indexOf(n)>=0&&ce<On&&cg(Ne[ce])&&(s=s*8+"01234567".indexOf(Ne[ce++]))),t+=String.fromCharCode(s)):t+=n;break}else n==="\r"&&Ne[ce]===`
`&&++ce;else{if(Zg(n.charCodeAt(0)))break;t+=n}return e!==""&&Dt({},nn,_n),{type:ow,value:t,octal:a,start:i,end:ce}}function ave(t,e){let i=t;e.indexOf("u")>=0&&(i=i.replace(/\\u\{([0-9a-fA-F]+)\}/g,(n,s)=>{if(parseInt(s,16)<=1114111)return"x";Dt({},xF)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(i)}catch{Dt({},xF)}try{return new RegExp(t,e)}catch{return null}}function ove(){var t,e,i,n,s;for(t=Ne[ce],TS(t==="/","Regular expression literal must start with a slash"),e=Ne[ce++],i=!1,n=!1;ce<On;)if(t=Ne[ce++],e+=t,t==="\\")t=Ne[ce++],Zg(t.charCodeAt(0))&&Dt({},jB),e+=t;else if(Zg(t.charCodeAt(0)))Dt({},jB);else if(i)t==="]"&&(i=!1);else if(t==="/"){n=!0;break}else t==="["&&(i=!0);return n||Dt({},jB),s=e.substr(1,e.length-2),{value:s,literal:e}}function lve(){var t,e,i;for(e="",i="";ce<On&&(t=Ne[ce],!!kv(t.charCodeAt(0)));)++ce,t==="\\"&&ce<On?Dt({},nn,_n):(i+=t,e+=t);return i.search(/[^gimuy]/g)>=0&&Dt({},xF,i),{value:i,literal:e}}function cve(){var t,e,i,n;return ei=null,UY(),t=ce,e=ove(),i=lve(),n=ave(e.value,i.value),{literal:e.literal+i.literal,value:n,regex:{pattern:e.value,flags:i.value},start:t,end:ce}}function dve(t){return t.type===tu||t.type===Ed||t.type===wS||t.type===bS}function jY(){if(UY(),ce>=On)return{type:aw,start:ce,end:ce};const t=Ne.charCodeAt(ce);return lw(t)?ive():t===40||t===41||t===59?qB():t===39||t===34?rve():t===46?ll(Ne.charCodeAt(ce+1))?K6():qB():ll(t)?K6():qB()}function ys(){const t=ei;return ce=t.end,ei=jY(),ce=t.end,t}function qY(){const t=ce;ei=jY(),ce=t}function fve(t){const e=new ba(C1e);return e.elements=t,e}function J6(t,e,i){const n=new ba(t==="||"||t==="&&"?$1e:R1e);return n.operator=t,n.left=e,n.right=i,n}function uve(t,e){const i=new ba(L1e);return i.callee=t,i.arguments=e,i}function hve(t,e,i){const n=new ba(D1e);return n.test=t,n.consequent=e,n.alternate=i,n}function kC(t){const e=new ba(PY);return e.name=t,e}function Hy(t){const e=new ba(P1e);return e.value=t.value,e.raw=Ne.slice(t.start,t.end),t.regex&&(e.raw==="//"&&(e.raw="/(?:)/"),e.regex=t.regex),e}function Q6(t,e,i){const n=new ba(U1e);return n.computed=t==="[",n.object=e,n.property=i,n.computed||(i.member=!0),n}function pve(t){const e=new ba(z1e);return e.properties=t,e}function Z6(t,e,i){const n=new ba(j1e);return n.key=e,n.value=i,n.kind=t,n}function _ve(t,e){const i=new ba(q1e);return i.operator=t,i.argument=e,i.prefix=!0,i}function Dt(t,e){var i,n=Array.prototype.slice.call(arguments,2),s=e.replace(/%(\d)/g,(a,c)=>(TS(c<n.length,"Message reference must be in range"),n[c]));throw i=new Error(s),i.index=ce,i.description=s,i}function vS(t){t.type===aw&&Dt(t,Y1e),t.type===Cu&&Dt(t,G1e),t.type===ow&&Dt(t,V1e),t.type===tu&&Dt(t,W1e),t.type===Ed&&Dt(t,H1e),Dt(t,nn,t.value)}function Nn(t){const e=ys();(e.type!==ds||e.value!==t)&&vS(e)}function gi(t){return ei.type===ds&&ei.value===t}function GB(t){return ei.type===Ed&&ei.value===t}function yve(){const t=[];for(ce=ei.start,Nn("[");!gi("]");)gi(",")?(ys(),t.push(null)):(t.push(iu()),gi("]")||Nn(","));return ys(),fve(t)}function e$(){ce=ei.start;const t=ys();return t.type===ow||t.type===Cu?(t.octal&&Dt(t,$Y),Hy(t)):kC(t.value)}function gve(){var t,e,i,n;if(ce=ei.start,t=ei,t.type===tu)return i=e$(),Nn(":"),n=iu(),Z6("init",i,n);if(t.type===aw||t.type===ds)vS(t);else return e=e$(),Nn(":"),n=iu(),Z6("init",e,n)}function mve(){var t=[],e,i,n,s={},a=String;for(ce=ei.start,Nn("{");!gi("}");)e=gve(),e.key.type===PY?i=e.key.name:i=a(e.key.value),n="$"+i,Object.prototype.hasOwnProperty.call(s,n)?Dt({},X1e):s[n]=!0,t.push(e),gi("}")||Nn(",");return Nn("}"),pve(t)}function wve(){Nn("(");const t=FC();return Nn(")"),t}const bve={if:1};function Tve(){var t,e,i;if(gi("("))return wve();if(gi("["))return yve();if(gi("{"))return mve();if(t=ei.type,ce=ei.start,t===tu||bve[ei.value])i=kC(ys().value);else if(t===ow||t===Cu)ei.octal&&Dt(ei,$Y),i=Hy(ys());else{if(t===Ed)throw new Error(Qg);t===wS?(e=ys(),e.value=e.value==="true",i=Hy(e)):t===bS?(e=ys(),e.value=null,i=Hy(e)):gi("/")||gi("/=")?(i=Hy(cve()),qY()):vS(ys())}return i}function vve(){const t=[];if(Nn("("),!gi(")"))for(;ce<On&&(t.push(iu()),!gi(")"));)Nn(",");return Nn(")"),t}function Eve(){ce=ei.start;const t=ys();return dve(t)||vS(t),kC(t.value)}function Sve(){return Nn("."),Eve()}function xve(){Nn("[");const t=FC();return Nn("]"),t}function Bve(){var t,e,i;for(t=Tve();;)if(gi("."))i=Sve(),t=Q6(".",t,i);else if(gi("("))e=vve(),t=uve(t,e);else if(gi("["))i=xve(),t=Q6("[",t,i);else break;return t}function t$(){const t=Bve();if(ei.type===ds&&(gi("++")||gi("--")))throw new Error(Qg);return t}function wT(){var t,e;if(ei.type!==ds&&ei.type!==Ed)e=t$();else{if(gi("++")||gi("--"))throw new Error(Qg);if(gi("+")||gi("-")||gi("~")||gi("!"))t=ys(),e=wT(),e=_ve(t.value,e);else{if(GB("delete")||GB("void")||GB("typeof"))throw new Error(Qg);e=t$()}}return e}function i$(t){let e=0;if(t.type!==ds&&t.type!==Ed)return 0;switch(t.value){case"||":e=1;break;case"&&":e=2;break;case"|":e=3;break;case"^":e=4;break;case"&":e=5;break;case"==":case"!=":case"===":case"!==":e=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":e=7;break;case"<<":case">>":case">>>":e=8;break;case"+":case"-":e=9;break;case"*":case"/":case"%":e=11;break}return e}function Ive(){var t,e,i,n,s,a,c,d,f,u;if(t=ei,f=wT(),n=ei,s=i$(n),s===0)return f;for(n.prec=s,ys(),e=[t,ei],c=wT(),a=[f,n,c];(s=i$(ei))>0;){for(;a.length>2&&s<=a[a.length-2].prec;)c=a.pop(),d=a.pop().value,f=a.pop(),e.pop(),i=J6(d,f,c),a.push(i);n=ys(),n.prec=s,a.push(n),e.push(ei),i=wT(),a.push(i)}for(u=a.length-1,i=a[u],e.pop();u>1;)e.pop(),i=J6(a[u-1].value,a[u-2],i),u-=2;return i}function iu(){var t,e,i;return t=Ive(),gi("?")&&(ys(),e=iu(),Nn(":"),i=iu(),t=hve(t,e,i)),t}function FC(){const t=iu();if(gi(","))throw new Error(Qg);return t}function MC(t){Ne=t,ce=0,On=Ne.length,ei=null,qY();const e=FC();if(ei.type!==aw)throw new Error("Unexpect token after expression.");return e}var GY={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function VY(t){function e(c,d,f,u){let o=t(d[0]);return f&&(o=f+"("+o+")",f.lastIndexOf("new ",0)===0&&(o="("+o+")")),o+"."+c+(u<0?"":u===0?"()":"("+d.slice(1).map(t).join(",")+")")}function i(c,d,f){return u=>e(c,u,d,f)}const n="new Date",s="String",a="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(c){c.length<3&&de("Missing arguments to clamp function."),c.length>3&&de("Too many arguments to clamp function.");const d=c.map(t);return"Math.max("+d[1]+", Math.min("+d[2]+","+d[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:n,date:i("getDate",n,0),day:i("getDay",n,0),year:i("getFullYear",n,0),month:i("getMonth",n,0),hours:i("getHours",n,0),minutes:i("getMinutes",n,0),seconds:i("getSeconds",n,0),milliseconds:i("getMilliseconds",n,0),time:i("getTime",n,0),timezoneoffset:i("getTimezoneOffset",n,0),utcdate:i("getUTCDate",n,0),utcday:i("getUTCDay",n,0),utcyear:i("getUTCFullYear",n,0),utcmonth:i("getUTCMonth",n,0),utchours:i("getUTCHours",n,0),utcminutes:i("getUTCMinutes",n,0),utcseconds:i("getUTCSeconds",n,0),utcmilliseconds:i("getUTCMilliseconds",n,0),length:i("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:i("toUpperCase",s,0),lower:i("toLowerCase",s,0),substring:i("substring",s),split:i("split",s),trim:i("trim",s,0),regexp:a,test:i("test",a),if:function(c){c.length<3&&de("Missing arguments to if function."),c.length>3&&de("Too many arguments to if function.");const d=c.map(t);return"("+d[0]+"?"+d[1]+":"+d[2]+")"}}}function kve(t){const e=t&&t.length-1;return e&&(t[0]==='"'&&t[e]==='"'||t[0]==="'"&&t[e]==="'")?t.slice(1,-1):t}function WY(t){t=t||{};const e=t.allowed?ua(t.allowed):{},i=t.forbidden?ua(t.forbidden):{},n=t.constants||GY,s=(t.functions||VY)(g),a=t.globalvar,c=t.fieldvar,d=gt(a)?a:l=>`${a}["${l}"]`;let f={},u={},o=0;function g(l){if(Ie(l))return l;const T=w[l.type];return T==null&&de("Unsupported type: "+l.type),T(l)}const w={Literal:l=>l.raw,Identifier:l=>{const T=l.name;return o>0?T:Pe(i,T)?de("Illegal identifier: "+T):Pe(n,T)?n[T]:Pe(e,T)?T:(f[T]=1,d(T))},MemberExpression:l=>{const T=!l.computed,b=g(l.object);T&&(o+=1);const S=g(l.property);return b===c&&(u[kve(S)]=1),T&&(o-=1),b+(T?"."+S:"["+S+"]")},CallExpression:l=>{l.callee.type!=="Identifier"&&de("Illegal callee type: "+l.callee.type);const T=l.callee.name,b=l.arguments,S=Pe(s,T)&&s[T];return S||de("Unrecognized function: "+T),gt(S)?S(b):S+"("+b.map(g).join(",")+")"},ArrayExpression:l=>"["+l.elements.map(g).join(",")+"]",BinaryExpression:l=>"("+g(l.left)+" "+l.operator+" "+g(l.right)+")",UnaryExpression:l=>"("+l.operator+g(l.argument)+")",ConditionalExpression:l=>"("+g(l.test)+"?"+g(l.consequent)+":"+g(l.alternate)+")",LogicalExpression:l=>"("+g(l.left)+l.operator+g(l.right)+")",ObjectExpression:l=>"{"+l.properties.map(g).join(",")+"}",Property:l=>{o+=1;const T=g(l.key);return o-=1,T+":"+g(l.value)}};function m(l){const T={code:g(l),globals:Object.keys(f),fields:Object.keys(u)};return f={},u={},T}return m.functions=s,m.constants=n,m}function VB(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Fve(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Mve(t){let e,i,n;t.length!==2?(e=VB,i=(d,f)=>VB(t(d),f),n=(d,f)=>t(d)-f):(e=t===VB||t===Fve?t:Ave,i=t,n=t);function s(d,f,u=0,o=d.length){if(u<o){if(e(f,f)!==0)return o;do{const g=u+o>>>1;i(d[g],f)<0?u=g+1:o=g}while(u<o)}return u}function a(d,f,u=0,o=d.length){if(u<o){if(e(f,f)!==0)return o;do{const g=u+o>>>1;i(d[g],f)<=0?u=g+1:o=g}while(u<o)}return u}function c(d,f,u=0,o=d.length){const g=s(d,f,u,o-1);return g>u&&n(d[g-1],f)>-n(d[g],f)?g-1:g}return{left:s,center:c,right:a}}function Ave(){return 0}function Ove(t,...e){t=new qT(t),e=e.map(Nve);e:for(const i of t)for(const n of e)if(!n.has(i)){t.delete(i);continue e}return t}function Nve(t){return t instanceof qT?t:new qT(t)}function Cve(...t){const e=new qT;for(const i of t)for(const n of i)e.add(n);return e}const AC="intersect",n$="union",Rve="vlMulti",Lve="vlPoint",s$="or",Dve="and",Ga="_vgsid_",em=Fs(Ga),Pve="E",$ve="R",Uve="R-E",zve="R-LE",jve="R-RE",Fv="index:unit";function r$(t,e){for(var i=e.fields,n=e.values,s=i.length,a=0,c,d;a<s;++a)if(d=i[a],d.getter=Fs.getter||Fs(d.field),c=d.getter(t),Oc(c)&&(c=In(c)),Oc(n[a])&&(n[a]=In(n[a])),Oc(n[a][0])&&(n[a]=n[a].map(In)),d.type===Pve){if(ue(n[a])?n[a].indexOf(c)<0:c!==n[a])return!1}else if(d.type===$ve){if(!Lh(c,n[a]))return!1}else if(d.type===jve){if(!Lh(c,n[a],!0,!1))return!1}else if(d.type===Uve){if(!Lh(c,n[a],!1,!1))return!1}else if(d.type===zve&&!Lh(c,n[a],!1,!0))return!1;return!0}function qve(t,e,i){for(var n=this.context.data[t],s=n?n.values.value:[],a=n?n[Fv]&&n[Fv].value:void 0,c=i===AC,d=s.length,f=0,u,o,g,w,m;f<d;++f)if(u=s[f],a&&c){if(o=o||{},g=o[w=u.unit]||0,g===-1)continue;if(m=r$(e,u),o[w]=m?-1:++g,m&&a.size===1)return!0;if(!m&&g===a.get(w).count)return!1}else if(m=r$(e,u),c^m)return m;return d&&c}const HY=Mve(em),Gve=HY.left,Vve=HY.right;function Wve(t,e,i){const n=this.context.data[t],s=n?n.values.value:[],a=n?n[Fv]&&n[Fv].value:void 0,c=i===AC,d=em(e),f=Gve(s,d);if(f===s.length||em(s[f])!==d)return!1;if(a&&c){if(a.size===1)return!0;if(Vve(s,d)-f<a.size)return!1}return!0}function Hve(t,e){return t.map(i=>yt(e.fields?{values:e.fields.map(n=>(n.getter||(n.getter=Fs(n.field)))(i.datum))}:{[Ga]:em(i.datum)},e))}function Yve(t,e,i,n){for(var s=this.context.data[t],a=s?s.values.value:[],c={},d={},f={},u,o,g,w,m,l,T,b,S,x,B=a.length,F=0,I,A;F<B;++F)if(u=a[F],w=u.unit,o=u.fields,g=u.values,o&&g){for(I=0,A=o.length;I<A;++I)m=o[I],T=c[m.field]||(c[m.field]={}),b=T[w]||(T[w]=[]),f[m.field]=S=m.type.charAt(0),x=WB[`${S}_union`],T[w]=x(b,ke(g[I]));i&&(b=d[w]||(d[w]=[]),b.push(ke(g).reduce((O,R,D)=>(O[o[D].field]=R,O),{})))}else m=Ga,l=em(u),T=c[m]||(c[m]={}),b=T[w]||(T[w]=[]),b.push(l),i&&(b=d[w]||(d[w]=[]),b.push({[Ga]:l}));if(e=e||n$,c[Ga]?c[Ga]=WB[`${Ga}_${e}`](...Object.values(c[Ga])):Object.keys(c).forEach(O=>{c[O]=Object.keys(c[O]).map(R=>c[O][R]).reduce((R,D)=>R===void 0?D:WB[`${f[O]}_${e}`](R,D))}),a=Object.keys(d),i&&a.length){const O=n?Lve:Rve;c[O]=e===n$?{[s$]:a.reduce((R,D)=>(R.push(...d[D]),R),[])}:{[Dve]:a.map(R=>({[s$]:d[R]}))}}return c}var WB={[`${Ga}_union`]:Cve,[`${Ga}_intersect`]:Ove,E_union:function(t,e){if(!t.length)return e;for(var i=0,n=e.length;i<n;++i)t.indexOf(e[i])<0&&t.push(e[i]);return t},E_intersect:function(t,e){return t.length?t.filter(i=>e.indexOf(i)>=0):e},R_union:function(t,e){var i=In(e[0]),n=In(e[1]);return i>n&&(i=e[1],n=e[0]),t.length?(t[0]>i&&(t[0]=i),t[1]<n&&(t[1]=n),t):[i,n]},R_intersect:function(t,e){var i=In(e[0]),n=In(e[1]);return i>n&&(i=e[1],n=e[0]),t.length?n<t[0]||t[1]<i?[]:(t[0]<i&&(t[0]=i),t[1]>n&&(t[1]=n),t):[i,n]}};const Xve=":",Kve="@";function OC(t,e,i,n){e[0].type!==eu&&de("First argument to selection functions must be a string literal.");const s=e[0].value,a=e.length>=2&&At(e).value,c="unit",d=Kve+c,f=Xve+s;a===AC&&!Pe(n,d)&&(n[d]=i.getData(s).indataRef(i,c)),Pe(n,f)||(n[f]=i.getData(s).tuplesRef())}function YY(t){const e=this.context.data[t];return e?e.values.value:[]}function Jve(t,e,i){const n=this.context.data[t]["index:"+e],s=n?n.value.get(i):void 0;return s&&s.count}function Qve(t,e){const i=this.context.dataflow,n=this.context.data[t],s=n.input;return i.pulse(s,i.changeset().remove(Ar).insert(e)),1}function Zve(t,e,i){if(t){const n=this.context.dataflow,s=t.mark.source;n.pulse(s,n.changeset().encode(t,e))}return i!==void 0?i:t}const cw=t=>function(e,i){return this.context.dataflow.locale()[t](i)(e)},eEe=cw("format"),XY=cw("timeFormat"),tEe=cw("utcFormat"),iEe=cw("timeParse"),nEe=cw("utcParse"),m0=new Date(2e3,0,1);function ES(t,e,i){return!Number.isInteger(t)||!Number.isInteger(e)?"":(m0.setYear(2e3),m0.setMonth(t),m0.setDate(e),XY.call(this,m0,i))}function sEe(t){return ES.call(this,t,1,"%B")}function rEe(t){return ES.call(this,t,1,"%b")}function aEe(t){return ES.call(this,0,2+t,"%A")}function oEe(t){return ES.call(this,0,2+t,"%a")}const lEe=":",cEe="@",IF="%",KY="$";function NC(t,e,i,n){e[0].type!==eu&&de("First argument to data functions must be a string literal.");const s=e[0].value,a=lEe+s;if(!Pe(a,n))try{n[a]=i.getData(s).tuplesRef()}catch{}}function dEe(t,e,i,n){e[0].type!==eu&&de("First argument to indata must be a string literal."),e[1].type!==eu&&de("Second argument to indata must be a string literal.");const s=e[0].value,a=e[1].value,c=cEe+a;Pe(c,n)||(n[c]=i.getData(s).indataRef(i,a))}function ws(t,e,i,n){if(e[0].type===eu)a$(i,n,e[0].value);else for(t in i.scales)a$(i,n,t)}function a$(t,e,i){const n=IF+i;if(!Pe(e,n))try{e[n]=t.scaleRef(i)}catch{}}function Vl(t,e){if(gt(t))return t;if(Ie(t)){const i=e.scales[t];return i&&Oge(i.value)?i.value:void 0}}function fEe(t,e,i){e.__bandwidth=s=>s&&s.bandwidth?s.bandwidth():0,i._bandwidth=ws,i._range=ws,i._scale=ws;const n=s=>"_["+(s.type===eu?ve(IF+s.value):ve(IF)+"+"+t(s))+"]";return{_bandwidth:s=>`this.__bandwidth(${n(s[0])})`,_range:s=>`${n(s[0])}.range()`,_scale:s=>`${n(s[0])}(${t(s[1])})`}}function CC(t,e){return function(i,n,s){if(i){const a=Vl(i,(s||this).context);return a&&a.path[t](n)}else return e(n)}}const uEe=CC("area",Cae),hEe=CC("bounds",Pae),pEe=CC("centroid",Gae);function _Ee(t){const e=this.context.group;let i=!1;if(e)for(;t;){if(t===e){i=!0;break}t=t.mark.group}return i}function RC(t,e,i){try{t[e].apply(t,["EXPRESSION"].concat([].slice.call(i)))}catch(n){t.warn(n)}return i[i.length-1]}function yEe(){return RC(this.context.dataflow,"warn",arguments)}function gEe(){return RC(this.context.dataflow,"info",arguments)}function mEe(){return RC(this.context.dataflow,"debug",arguments)}function HB(t){const e=t/255;return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}function kF(t){const e=qc(t),i=HB(e.r),n=HB(e.g),s=HB(e.b);return .2126*i+.7152*n+.0722*s}function wEe(t,e){const i=kF(t),n=kF(e),s=Math.max(i,n),a=Math.min(i,n);return(s+.05)/(a+.05)}function bEe(){const t=[].slice.call(arguments);return t.unshift({}),yt(...t)}function JY(t,e){return t===e||t!==t&&e!==e?!0:ue(t)?ue(e)&&t.length===e.length?TEe(t,e):!1:Me(t)&&Me(e)?QY(t,e):!1}function TEe(t,e){for(let i=0,n=t.length;i<n;++i)if(!JY(t[i],e[i]))return!1;return!0}function QY(t,e){for(const i in t)if(!JY(t[i],e[i]))return!1;return!0}function o$(t){return e=>QY(t,e)}function vEe(t,e,i,n,s,a){const c=this.context.dataflow,d=this.context.data[t],f=d.input,u=c.stamp();let o=d.changes,g,w;if(c._trigger===!1||!(f.value.length||e||n))return 0;if((!o||o.stamp<u)&&(d.changes=o=c.changeset(),o.stamp=u,c.runAfter(()=>{d.modified=!0,c.pulse(f,o).run()},!0,1)),i&&(g=i===!0?Ar:ue(i)||QE(i)?i:o$(i),o.remove(g)),e&&o.insert(e),n&&(g=o$(n),f.value.some(g)?o.remove(g):o.insert(n)),s)for(w in a)o.modify(s,w,a[w]);return 1}function EEe(t){const e=t.touches,i=e[0].clientX-e[1].clientX,n=e[0].clientY-e[1].clientY;return Math.hypot(i,n)}function SEe(t){const e=t.touches;return Math.atan2(e[0].clientY-e[1].clientY,e[0].clientX-e[1].clientX)}const l$={};function xEe(t,e){const i=l$[e]||(l$[e]=Fs(e));return ue(t)?t.map(i):i(t)}function LC(t){return ue(t)||ArrayBuffer.isView(t)?t:null}function DC(t){return LC(t)||(Ie(t)?t:null)}function BEe(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return LC(t).join(...i)}function IEe(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return DC(t).indexOf(...i)}function kEe(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return DC(t).lastIndexOf(...i)}function FEe(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return DC(t).slice(...i)}function MEe(t,e,i){return gt(i)&&de("Function argument passed to replace."),String(t).replace(e,i)}function AEe(t){return LC(t).slice().reverse()}function OEe(t,e,i){return sN(t||0,e||0,i||0)}function NEe(t,e){const i=Vl(t,(e||this).context);return i&&i.bandwidth?i.bandwidth():0}function CEe(t,e){const i=Vl(t,(e||this).context);return i?i.copy():void 0}function REe(t,e){const i=Vl(t,(e||this).context);return i?i.domain():[]}function LEe(t,e,i){const n=Vl(t,(i||this).context);return n?ue(e)?(n.invertRange||n.invert)(e):(n.invert||n.invertExtent)(e):void 0}function DEe(t,e){const i=Vl(t,(e||this).context);return i&&i.range?i.range():[]}function PEe(t,e,i){const n=Vl(t,(i||this).context);return n?n(e):void 0}function $Ee(t,e,i,n,s){t=Vl(t,(s||this).context);const a=KW(e,i);let c=t.domain(),d=c[0],f=At(c),u=Rn;return f-d?u=PW(t,d,f):t=(t.interpolator?$t("sequential")().interpolator(t.interpolator()):$t("linear")().interpolate(t.interpolate()).range(t.range())).domain([d=0,f=1]),t.ticks&&(c=t.ticks(+n||15),d!==c[0]&&c.unshift(d),f!==At(c)&&c.push(f)),c.forEach(o=>a.stop(u(o),t(o))),a}function UEe(t,e,i){const n=Vl(t,(i||this).context);return function(s){return n?n.path.context(s)(e):""}}function zEe(t){let e=null;return function(i){return i?Hg(i,e=e||Wp(t)):t}}const ZY=t=>t.data;function eX(t,e){const i=YY.call(e,t);return i.root&&i.root.lookup||{}}function jEe(t,e,i){const n=eX(t,this),s=n[e],a=n[i];return s&&a?s.path(a).map(ZY):void 0}function qEe(t,e){const i=eX(t,this)[e];return i?i.ancestors().map(ZY):void 0}const tX=()=>typeof window<"u"&&window||null;function GEe(){const t=tX();return t?t.screen:{}}function VEe(){const t=tX();return t?[t.innerWidth,t.innerHeight]:[void 0,void 0]}function WEe(){const t=this.context.dataflow,e=t.container&&t.container();return e?[e.clientWidth,e.clientHeight]:[void 0,void 0]}function iX(t,e,i){if(!t)return[];const[n,s]=t,a=new Di().set(n[0],n[1],s[0],s[1]),c=i||this.context.dataflow.scenegraph().root;return UH(c,a,HEe(e))}function HEe(t){let e=null;if(t){const i=ke(t.marktype),n=ke(t.markname);e=s=>(!i.length||i.some(a=>s.marktype===a))&&(!n.length||n.some(a=>s.name===a))}return e}function YEe(t,e,i){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;t=ke(t);const s=t[t.length-1];return s===void 0||Math.hypot(s[0]-e,s[1]-i)>n?[...t,[e,i]]:t}function XEe(t){return ke(t).reduce((e,i,n)=>{let[s,a]=i;return e+=n==0?`M ${s},${a} `:n===t.length-1?" Z":`L ${s},${a} `},"")}function KEe(t,e,i){const{x:n,y:s,mark:a}=i,c=new Di().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[f,u]of e)f<c.x1&&(c.x1=f),f>c.x2&&(c.x2=f),u<c.y1&&(c.y1=u),u>c.y2&&(c.y2=u);return c.translate(n,s),iX([[c.x1,c.y1],[c.x2,c.y2]],t,a).filter(f=>JEe(f.x,f.y,e))}function JEe(t,e,i){let n=0;for(let s=0,a=i.length-1;s<i.length;a=s++){const[c,d]=i[a],[f,u]=i[s];u>e!=d>e&&t<(c-f)*(e-u)/(d-u)+f&&n++}return n&1}const tm={random(){return Fr()},cumulativeNormal:DE,cumulativeLogNormal:vA,cumulativeUniform:BA,densityNormal:gA,densityLogNormal:TA,densityUniform:xA,quantileNormal:PE,quantileLogNormal:EA,quantileUniform:IA,sampleNormal:LE,sampleLogNormal:bA,sampleUniform:SA,isArray:ue,isBoolean:vd,isDate:Oc,isDefined(t){return t!==void 0},isNumber:ii,isObject:Me,isRegExp:oV,isString:Ie,isTuple:QE,isValid(t){return t!=null&&t===t},toBoolean:bO,toDate(t){return TO(t)},toNumber:In,toString:vO,indexof:IEe,join:BEe,lastindexof:kEe,replace:MEe,reverse:AEe,slice:FEe,flush:rV,lerp:lV,merge:bEe,pad:fV,peek:At,pluck:xEe,span:Vm,inrange:Lh,truncate:uV,rgb:qc,lab:YT,hcl:XT,hsl:WT,luminance:kF,contrast:wEe,sequence:Js,format:eEe,utcFormat:tEe,utcParse:nEe,utcOffset:BV,utcSequence:FV,timeFormat:XY,timeParse:iEe,timeOffset:xV,timeSequence:kV,timeUnitSpecifier:pV,monthFormat:sEe,monthAbbrevFormat:rEe,dayFormat:aEe,dayAbbrevFormat:oEe,quarter:tV,utcquarter:iV,week:yV,utcweek:wV,dayofyear:_V,utcdayofyear:mV,warn:yEe,info:gEe,debug:mEe,extent(t){return xo(t)},inScope:_Ee,intersect:iX,clampRange:nV,pinchDistance:EEe,pinchAngle:SEe,screen:GEe,containerSize:WEe,windowSize:VEe,bandspace:OEe,setdata:Qve,pathShape:zEe,panLinear:JG,panLog:QG,panPow:ZG,panSymlog:eV,zoomLinear:pO,zoomLog:_O,zoomPow:dv,zoomSymlog:yO,encode:Zve,modify:vEe,lassoAppend:YEe,lassoPath:XEe,intersectLasso:KEe},QEe=["view","item","group","xy","x","y"],ZEe="event.vega.",nX="this.",PC={},sX={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:t=>`_[${ve(KY+t)}]`,functions:eSe,constants:GY,visitors:PC},FF=WY(sX);function eSe(t){const e=VY(t);QEe.forEach(i=>e[i]=ZEe+i);for(const i in tm)e[i]=nX+i;return yt(e,fEe(t,tm,PC)),e}function $i(t,e,i){return arguments.length===1?tm[t]:(tm[t]=e,i&&(PC[t]=i),FF&&(FF.functions[t]=nX+t),this)}$i("bandwidth",NEe,ws);$i("copy",CEe,ws);$i("domain",REe,ws);$i("range",DEe,ws);$i("invert",LEe,ws);$i("scale",PEe,ws);$i("gradient",$Ee,ws);$i("geoArea",uEe,ws);$i("geoBounds",hEe,ws);$i("geoCentroid",pEe,ws);$i("geoShape",UEe,ws);$i("indata",Jve,dEe);$i("data",YY,NC);$i("treePath",jEe,NC);$i("treeAncestors",qEe,NC);$i("vlSelectionTest",qve,OC);$i("vlSelectionIdTest",Wve,OC);$i("vlSelectionResolve",Yve,OC);$i("vlSelectionTuples",Hve);function Io(t,e){const i={};let n;try{t=Ie(t)?t:ve(t)+"",n=MC(t)}catch{de("Expression parse error: "+t)}n.visit(a=>{if(a.type!==DY)return;const c=a.callee.name,d=sX.visitors[c];d&&d(c,a.arguments,e,i)});const s=FF(n);return s.globals.forEach(a=>{const c=KY+a;!Pe(i,c)&&e.getSignal(a)&&(i[c]=e.signalRef(a))}),{$expr:yt({code:s.code},e.options.ast?{ast:n}:null),$fields:s.fields,$params:i}}function tSe(t){const e=this,i=t.operators||[];return t.background&&(e.background=t.background),t.eventConfig&&(e.eventConfig=t.eventConfig),t.locale&&(e.locale=t.locale),i.forEach(n=>e.parseOperator(n)),i.forEach(n=>e.parseOperatorParameters(n)),(t.streams||[]).forEach(n=>e.parseStream(n)),(t.updates||[]).forEach(n=>e.parseUpdate(n)),e.resolve()}const iSe=ua(["rule"]),c$=ua(["group","image","rect"]);function nSe(t,e){let i="";return iSe[e]||(t.x2&&(t.x?(c$[e]&&(i+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),i+="o.width=o.x2-o.x;"):i+="o.x=o.x2-(o.width||0);"),t.xc&&(i+="o.x=o.xc-(o.width||0)/2;"),t.y2&&(t.y?(c$[e]&&(i+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),i+="o.height=o.y2-o.y;"):i+="o.y=o.y2-(o.height||0);"),t.yc&&(i+="o.y=o.yc-(o.height||0)/2;")),i}function $C(t){return(t+"").toLowerCase()}function sSe(t){return $C(t)==="operator"}function rSe(t){return $C(t)==="collect"}function iy(t,e,i){i.endsWith(";")||(i="return("+i+");");const n=Function(...e.concat(i));return t&&t.functions?n.bind(t.functions):n}function aSe(t,e,i,n){return`((u = ${t}) < (v = ${e}) || u == null) && v != null ? ${i}
  : (u > v || v == null) && u != null ? ${n}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${i}
  : v !== v && u === u ? ${n} : `}var oSe={operator:(t,e)=>iy(t,["_"],e.code),parameter:(t,e)=>iy(t,["datum","_"],e.code),event:(t,e)=>iy(t,["event"],e.code),handler:(t,e)=>{const i=`var datum=event.item&&event.item.datum;return ${e.code};`;return iy(t,["_","event"],i)},encode:(t,e)=>{const{marktype:i,channels:n}=e;let s="var o=item,datum=o.datum,m=0,$;";for(const a in n){const c="o["+ve(a)+"]";s+=`$=${n[a].code};if(${c}!==$)${c}=$,m=1;`}return s+=nSe(n,i),s+="return m;",iy(t,["item","_"],s)},codegen:{get(t){const e=`[${t.map(ve).join("][")}]`,i=Function("_",`return _${e};`);return i.path=e,i},comparator(t,e){let i;const n=(a,c)=>{const d=e[c];let f,u;return a.path?(f=`a${a.path}`,u=`b${a.path}`):((i=i||{})["f"+c]=a,f=`this.f${c}(a)`,u=`this.f${c}(b)`),aSe(f,u,-d,d)},s=Function("a","b","var u, v; return "+t.map(n).join("")+"0;");return i?s.bind(i):s}}};function lSe(t){const e=this;sSe(t.type)||!t.type?e.operator(t,t.update?e.operatorExpression(t.update):null):e.transform(t,t.type)}function cSe(t){const e=this;if(t.params){const i=e.get(t.id);i||de("Invalid operator id: "+t.id),e.dataflow.connect(i,i.parameters(e.parseParameters(t.params),t.react,t.initonly))}}function dSe(t,e){e=e||{};const i=this;for(const n in t){const s=t[n];e[n]=ue(s)?s.map(a=>d$(a,i,e)):d$(s,i,e)}return e}function d$(t,e,i){if(!t||!Me(t))return t;for(let n=0,s=f$.length,a;n<s;++n)if(a=f$[n],Pe(t,a.key))return a.parse(t,e,i);return t}var f$=[{key:"$ref",parse:fSe},{key:"$key",parse:hSe},{key:"$expr",parse:uSe},{key:"$field",parse:pSe},{key:"$encode",parse:ySe},{key:"$compare",parse:_Se},{key:"$context",parse:gSe},{key:"$subflow",parse:mSe},{key:"$tupleid",parse:wSe}];function fSe(t,e){return e.get(t.$ref)||de("Operator not defined: "+t.$ref)}function uSe(t,e,i){t.$params&&e.parseParameters(t.$params,i);const n="e:"+t.$expr.code;return e.fn[n]||(e.fn[n]=Ds(e.parameterExpression(t.$expr),t.$fields))}function hSe(t,e){const i="k:"+t.$key+"_"+!!t.$flat;return e.fn[i]||(e.fn[i]=wO(t.$key,t.$flat,e.expr.codegen))}function pSe(t,e){if(!t.$field)return null;const i="f:"+t.$field+"_"+t.$name;return e.fn[i]||(e.fn[i]=Fs(t.$field,t.$name,e.expr.codegen))}function _Se(t,e){const i="c:"+t.$compare+"_"+t.$order,n=ke(t.$compare).map(s=>s&&s.$tupleid?Le:s);return e.fn[i]||(e.fn[i]=gO(n,t.$order,e.expr.codegen))}function ySe(t,e){const i=t.$encode,n={};for(const s in i){const a=i[s];n[s]=Ds(e.encodeExpression(a.$expr),a.$fields),n[s].output=a.$output}return n}function gSe(t,e){return e}function mSe(t,e){const i=t.$subflow;return function(n,s,a){const c=e.fork().parse(i),d=c.get(i.operators[0].id),f=c.signals.parent;return f&&f.set(a),d.detachSubflow=()=>e.detach(c),d}}function wSe(){return Le}function bSe(t){var e=this,i=t.filter!=null?e.eventExpression(t.filter):void 0,n=t.stream!=null?e.get(t.stream):void 0,s;t.source?n=e.events(t.source,t.type,i):t.merge&&(s=t.merge.map(a=>e.get(a)),n=s[0].merge.apply(s[0],s.slice(1))),t.between&&(s=t.between.map(a=>e.get(a)),n=n.between(s[0],s[1])),t.filter&&(n=n.filter(i)),t.throttle!=null&&(n=n.throttle(+t.throttle)),t.debounce!=null&&(n=n.debounce(+t.debounce)),n==null&&de("Invalid stream definition: "+JSON.stringify(t)),t.consume&&n.consume(!0),e.stream(t,n)}function TSe(t){var e=this,i=Me(i=t.source)?i.$ref:i,n=e.get(i),s=null,a=t.update,c=void 0;n||de("Source not defined: "+t.source),s=t.target&&t.target.$expr?e.eventExpression(t.target.$expr):e.get(t.target),a&&a.$expr&&(a.$params&&(c=e.parseParameters(a.$params)),a=e.handlerExpression(a.$expr)),e.update(t,n,s,a,c)}const vSe={skip:!0};function ESe(t){var e=this,i={};if(t.signals){var n=i.signals={};Object.keys(e.signals).forEach(a=>{const c=e.signals[a];t.signals(a,c)&&(n[a]=c.value)})}if(t.data){var s=i.data={};Object.keys(e.data).forEach(a=>{const c=e.data[a];t.data(a,c)&&(s[a]=c.input.value)})}return e.subcontext&&t.recurse!==!1&&(i.subcontext=e.subcontext.map(a=>a.getState(t))),i}function SSe(t){var e=this,i=e.dataflow,n=t.data,s=t.signals;Object.keys(s||{}).forEach(a=>{i.update(e.signals[a],s[a],vSe)}),Object.keys(n||{}).forEach(a=>{i.pulse(e.data[a].input,i.changeset().remove(Ar).insert(n[a]))}),(t.subcontext||[]).forEach((a,c)=>{const d=e.subcontext[c];d&&d.setState(a)})}function rX(t,e,i,n){return new aX(t,e,i,n)}function aX(t,e,i,n){this.dataflow=t,this.transforms=e,this.events=t.events.bind(t),this.expr=n||oSe,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},i&&(this.functions=Object.create(i),this.functions.context=this)}function u$(t){this.dataflow=t.dataflow,this.transforms=t.transforms,this.events=t.events,this.expr=t.expr,this.signals=Object.create(t.signals),this.scales=Object.create(t.scales),this.nodes=Object.create(t.nodes),this.data=Object.create(t.data),this.fn=Object.create(t.fn),t.functions&&(this.functions=Object.create(t.functions),this.functions.context=this)}aX.prototype=u$.prototype={fork(){const t=new u$(this);return(this.subcontext||(this.subcontext=[])).push(t),t},detach(t){this.subcontext=this.subcontext.filter(i=>i!==t);const e=Object.keys(t.nodes);for(const i of e)t.nodes[i]._targets=null;for(const i of e)t.nodes[i].detach();t.nodes=null},get(t){return this.nodes[t]},set(t,e){return this.nodes[t]=e},add(t,e){const i=this,n=i.dataflow,s=t.value;if(i.set(t.id,e),rSe(t.type)&&s&&(s.$ingest?n.ingest(e,s.$ingest,s.$format):s.$request?n.preload(e,s.$request,s.$format):n.pulse(e,n.changeset().insert(s))),t.root&&(i.root=e),t.parent){let a=i.get(t.parent.$ref);a?(n.connect(a,[e]),e.targets().add(a)):(i.unresolved=i.unresolved||[]).push(()=>{a=i.get(t.parent.$ref),n.connect(a,[e]),e.targets().add(a)})}if(t.signal&&(i.signals[t.signal]=e),t.scale&&(i.scales[t.scale]=e),t.data)for(const a in t.data){const c=i.data[a]||(i.data[a]={});t.data[a].forEach(d=>c[d]=e)}},resolve(){return(this.unresolved||[]).forEach(t=>t()),delete this.unresolved,this},operator(t,e){this.add(t,this.dataflow.add(t.value,e))},transform(t,e){this.add(t,this.dataflow.add(this.transforms[$C(e)]))},stream(t,e){this.set(t.id,e)},update(t,e,i,n,s){this.dataflow.on(e,i,n,s,t.options)},operatorExpression(t){return this.expr.operator(this,t)},parameterExpression(t){return this.expr.parameter(this,t)},eventExpression(t){return this.expr.event(this,t)},handlerExpression(t){return this.expr.handler(this,t)},encodeExpression(t){return this.expr.encode(this,t)},parse:tSe,parseOperator:lSe,parseOperatorParameters:cSe,parseParameters:dSe,parseStream:bSe,parseUpdate:TSe,getState:ESe,setState:SSe};function xSe(t){const e=t.container();e&&(e.setAttribute("role","graphics-document"),e.setAttribute("aria-roleDescription","visualization"),oX(e,t.description()))}function oX(t,e){t&&(e==null?t.removeAttribute("aria-label"):t.setAttribute("aria-label",e))}function BSe(t){t.add(null,e=>(t._background=e.bg,t._resize=1,e.bg),{bg:t._signals.background})}const YB="default";function ISe(t){const e=t._signals.cursor||(t._signals.cursor=t.add({user:YB,item:null}));t.on(t.events("view","mousemove"),e,(i,n)=>{const s=e.value,a=s?Ie(s)?s:s.user:YB,c=n.item&&n.item.cursor||null;return s&&a===s.user&&c==s.item?s:{user:a,item:c}}),t.add(null,function(i){let n=i.cursor,s=this.value;return Ie(n)||(s=n.item,n=n.user),MF(t,n&&n!==YB?n:s||n),s},{cursor:e})}function MF(t,e){const i=t.globalCursor()?typeof document<"u"&&document.body:t.container();if(i)return e==null?i.style.removeProperty("cursor"):i.style.cursor=e}function Mv(t,e){var i=t._runtime.data;return Pe(i,e)||de("Unrecognized data set: "+e),i[e]}function kSe(t,e){return arguments.length<2?Mv(this,t).values.value:SS.call(this,t,Ou().remove(Ar).insert(e))}function SS(t,e){XV(e)||de("Second argument to changes must be a changeset.");const i=Mv(this,t);return i.modified=!0,this.pulse(i.input,e)}function FSe(t,e){return SS.call(this,t,Ou().insert(e))}function MSe(t,e){return SS.call(this,t,Ou().remove(e))}function lX(t){var e=t.padding();return Math.max(0,t._viewWidth+e.left+e.right)}function cX(t){var e=t.padding();return Math.max(0,t._viewHeight+e.top+e.bottom)}function xS(t){var e=t.padding(),i=t._origin;return[e.left+i[0],e.top+i[1]]}function ASe(t){var e=xS(t),i=lX(t),n=cX(t);t._renderer.background(t.background()),t._renderer.resize(i,n,e),t._handler.origin(e),t._resizeListeners.forEach(s=>{try{s(i,n)}catch(a){t.error(a)}})}function OSe(t,e,i){var n=t._renderer,s=n&&n.canvas(),a,c,d;return s&&(d=xS(t),c=e.changedTouches?e.changedTouches[0]:e,a=yS(c,s),a[0]-=d[0],a[1]-=d[1]),e.dataflow=t,e.item=i,e.vega=NSe(t,i,a),e}function NSe(t,e,i){const n=e?e.mark.marktype==="group"?e:e.mark.group:null;function s(c){var d=n,f;if(c){for(f=e;f;f=f.mark.group)if(f.mark.name===c){d=f;break}}return d&&d.mark&&d.mark.interactive?d:{}}function a(c){if(!c)return i;Ie(c)&&(c=s(c));const d=i.slice();for(;c;)d[0]-=c.x||0,d[1]-=c.y||0,c=c.mark&&c.mark.group;return d}return{view:Ln(t),item:Ln(e||{}),group:s,xy:a,x:c=>a(c)[0],y:c=>a(c)[1]}}const h$="view",CSe="timer",RSe="window",LSe={trap:!1};function DSe(t){const e=yt({defaults:{}},t),i=(n,s)=>{s.forEach(a=>{ue(n[a])&&(n[a]=ua(n[a]))})};return i(e.defaults,["prevent","allow"]),i(e,["view","window","selector"]),e}function dX(t,e,i,n){t._eventListeners.push({type:i,sources:ke(e),handler:n})}function PSe(t,e){var i=t._eventConfig.defaults,n=i.prevent,s=i.allow;return n===!1||s===!0?!1:n===!0||s===!1?!0:n?n[e]:s?!s[e]:t.preventDefault()}function w0(t,e,i){const n=t._eventConfig&&t._eventConfig[e];return n===!1||Me(n)&&!n[i]?(t.warn(`Blocked ${e} ${i} event listener.`),!1):!0}function $Se(t,e,i){var n=this,s=new tS(i),a=function(u,o){n.runAsync(null,()=>{t===h$&&PSe(n,e)&&u.preventDefault(),s.receive(OSe(n,u,o))})},c;if(t===CSe)w0(n,"timer",e)&&n.timer(a,e);else if(t===h$)w0(n,"view",e)&&n.addEventListener(e,a,LSe);else if(t===RSe?w0(n,"window",e)&&typeof window<"u"&&(c=[window]):typeof document<"u"&&w0(n,"selector",e)&&(c=Array.from(document.querySelectorAll(t))),!c)n.warn("Can not resolve event source: "+t);else{for(var d=0,f=c.length;d<f;++d)c[d].addEventListener(e,a);dX(n,c,e,a)}return s}function p$(t){return t.item}function _$(t){return t.item.mark.source}function y$(t){return function(e,i){return i.vega.view().changeset().encode(i.item,t)}}function USe(t,e){return t=[t||"hover"],e=[e||"update",t[0]],this.on(this.events("view","mouseover",p$),_$,y$(t)),this.on(this.events("view","mouseout",p$),_$,y$(e)),this}function zSe(){var t=this._tooltip,e=this._timers,i=this._eventListeners,n,s,a;for(n=e.length;--n>=0;)e[n].stop();for(n=i.length;--n>=0;)for(a=i[n],s=a.sources.length;--s>=0;)a.sources[s].removeEventListener(a.type,a.handler);return t&&t.call(this,this._handler,null,null,null),this}function Zs(t,e,i){const n=document.createElement(t);for(const s in e)n.setAttribute(s,e[s]);return i!=null&&(n.textContent=i),n}const jSe="vega-bind",qSe="vega-bind-name",GSe="vega-bind-radio";function VSe(t,e,i){if(!e)return;const n=i.param;let s=i.state;return s||(s=i.state={elements:null,active:!1,set:null,update:c=>{c!=t.signal(n.signal)&&t.runAsync(null,()=>{s.source=!0,t.signal(n.signal,c)})}},n.debounce&&(s.update=mO(n.debounce,s.update))),(n.input==null&&n.element?WSe:YSe)(s,e,n,t),s.active||(t.on(t._signals[n.signal],null,()=>{s.source?s.source=!1:s.set(t.signal(n.signal))}),s.active=!0),s}function WSe(t,e,i,n){const s=i.event||"input",a=()=>t.update(e.value);n.signal(i.signal,e.value),e.addEventListener(s,a),dX(n,e,s,a),t.set=c=>{e.value=c,e.dispatchEvent(HSe(s))}}function HSe(t){return typeof Event<"u"?new Event(t):{type:t}}function YSe(t,e,i,n){const s=n.signal(i.signal),a=Zs("div",{class:jSe}),c=i.input==="radio"?a:a.appendChild(Zs("label"));c.appendChild(Zs("span",{class:qSe},i.name||i.signal)),e.appendChild(a);let d=XSe;switch(i.input){case"checkbox":d=KSe;break;case"select":d=JSe;break;case"radio":d=QSe;break;case"range":d=ZSe;break}d(t,c,i,s)}function XSe(t,e,i,n){const s=Zs("input");for(const a in i)a!=="signal"&&a!=="element"&&s.setAttribute(a==="input"?"type":a,i[a]);s.setAttribute("name",i.signal),s.value=n,e.appendChild(s),s.addEventListener("input",()=>t.update(s.value)),t.elements=[s],t.set=a=>s.value=a}function KSe(t,e,i,n){const s={type:"checkbox",name:i.signal};n&&(s.checked=!0);const a=Zs("input",s);e.appendChild(a),a.addEventListener("change",()=>t.update(a.checked)),t.elements=[a],t.set=c=>a.checked=!!c||null}function JSe(t,e,i,n){const s=Zs("select",{name:i.signal}),a=i.labels||[];i.options.forEach((c,d)=>{const f={value:c};Av(c,n)&&(f.selected=!0),s.appendChild(Zs("option",f,(a[d]||c)+""))}),e.appendChild(s),s.addEventListener("change",()=>{t.update(i.options[s.selectedIndex])}),t.elements=[s],t.set=c=>{for(let d=0,f=i.options.length;d<f;++d)if(Av(i.options[d],c)){s.selectedIndex=d;return}}}function QSe(t,e,i,n){const s=Zs("span",{class:GSe}),a=i.labels||[];e.appendChild(s),t.elements=i.options.map((c,d)=>{const f={type:"radio",name:i.signal,value:c};Av(c,n)&&(f.checked=!0);const u=Zs("input",f);u.addEventListener("change",()=>t.update(c));const o=Zs("label",{},(a[d]||c)+"");return o.prepend(u),s.appendChild(o),u}),t.set=c=>{const d=t.elements,f=d.length;for(let u=0;u<f;++u)Av(d[u].value,c)&&(d[u].checked=!0)}}function ZSe(t,e,i,n){n=n!==void 0?n:(+i.max+ +i.min)/2;const s=i.max!=null?i.max:Math.max(100,+n)||100,a=i.min||Math.min(0,s,+n)||0,c=i.step||jc(a,s,100),d=Zs("input",{type:"range",name:i.signal,min:a,max:s,step:c});d.value=n;const f=Zs("span",{},+n);e.appendChild(d),e.appendChild(f);const u=()=>{f.textContent=d.value,t.update(+d.value)};d.addEventListener("input",u),d.addEventListener("change",u),t.elements=[d],t.set=o=>{d.value=o,f.textContent=o}}function Av(t,e){return t===e||t+""==e+""}function fX(t,e,i,n,s,a){return e=e||new n(t.loader()),e.initialize(i,lX(t),cX(t),xS(t),s,a).background(t.background())}function UC(t,e){return e?function(){try{e.apply(this,arguments)}catch(i){t.error(i)}}:null}function exe(t,e,i,n){const s=new n(t.loader(),UC(t,t.tooltip())).scene(t.scenegraph().root).initialize(i,xS(t),t);return e&&e.handlers().forEach(a=>{s.on(a.type,a.handler)}),s}function txe(t,e){const i=this,n=i._renderType,s=i._eventConfig.bind,a=gS(n);t=i._el=t?XB(i,t,!0):null,xSe(i),a||i.error("Unrecognized renderer type: "+n);const c=a.handler||rw,d=t?a.renderer:a.headless;return i._renderer=d?fX(i,i._renderer,t,d):null,i._handler=exe(i,i._handler,t,c),i._redraw=!0,t&&s!=="none"&&(e=e?i._elBind=XB(i,e,!0):t.appendChild(Zs("form",{class:"vega-bindings"})),i._bind.forEach(f=>{f.param.element&&s!=="container"&&(f.element=XB(i,f.param.element,!!f.param.input))}),i._bind.forEach(f=>{VSe(i,f.element||e,f)})),i}function XB(t,e,i){if(typeof e=="string")if(typeof document<"u"){if(e=document.querySelector(e),!e)return t.error("Signal bind element not found: "+e),null}else return t.error("DOM document instance not found."),null;if(e&&i)try{e.textContent=""}catch(n){e=null,t.error(n)}return e}const ny=t=>+t||0,ixe=t=>({top:t,bottom:t,left:t,right:t});function g$(t){return Me(t)?{top:ny(t.top),bottom:ny(t.bottom),left:ny(t.left),right:ny(t.right)}:ixe(ny(t))}async function zC(t,e,i,n){const s=gS(e),a=s&&s.headless;return a||de("Unrecognized renderer type: "+e),await t.runAsync(),fX(t,null,null,a,i,n).renderAsync(t._scenegraph.root)}async function nxe(t,e){t!==xc.Canvas&&t!==xc.SVG&&t!==xc.PNG&&de("Unrecognized image type: "+t);const i=await zC(this,t,e);return t===xc.SVG?sxe(i.svg(),"image/svg+xml"):i.canvas().toDataURL("image/png")}function sxe(t,e){const i=new Blob([t],{type:e});return window.URL.createObjectURL(i)}async function rxe(t,e){return(await zC(this,xc.Canvas,t,e)).canvas()}async function axe(t){return(await zC(this,xc.SVG,t)).svg()}function oxe(t,e,i){return rX(t,jp,tm,i).parse(e)}function lxe(t){var e=this._runtime.scales;return Pe(e,t)||de("Unrecognized scale or projection: "+t),e[t].value}var uX="width",hX="height",jC="padding",m$={skip:!0};function pX(t,e){var i=t.autosize(),n=t.padding();return e-(i&&i.contains===jC?n.left+n.right:0)}function _X(t,e){var i=t.autosize(),n=t.padding();return e-(i&&i.contains===jC?n.top+n.bottom:0)}function cxe(t){var e=t._signals,i=e[uX],n=e[hX],s=e[jC];function a(){t._autosize=t._resize=1}t._resizeWidth=t.add(null,d=>{t._width=d.size,t._viewWidth=pX(t,d.size),a()},{size:i}),t._resizeHeight=t.add(null,d=>{t._height=d.size,t._viewHeight=_X(t,d.size),a()},{size:n});const c=t.add(null,a,{pad:s});t._resizeWidth.rank=i.rank+1,t._resizeHeight.rank=n.rank+1,c.rank=s.rank+1}function dxe(t,e,i,n,s,a){this.runAfter(c=>{let d=0;c._autosize=0,c.width()!==i&&(d=1,c.signal(uX,i,m$),c._resizeWidth.skip(!0)),c.height()!==n&&(d=1,c.signal(hX,n,m$),c._resizeHeight.skip(!0)),c._viewWidth!==t&&(c._resize=1,c._viewWidth=t),c._viewHeight!==e&&(c._resize=1,c._viewHeight=e),(c._origin[0]!==s[0]||c._origin[1]!==s[1])&&(c._resize=1,c._origin=s),d&&c.run("enter"),a&&c.runAfter(f=>f.resize())},!1,1)}function fxe(t){return this._runtime.getState(t||{data:uxe,signals:hxe,recurse:!0})}function uxe(t,e){return e.modified&&ue(e.input.value)&&t.indexOf("_:vega:_")}function hxe(t,e){return!(t==="parent"||e instanceof jp.proxy)}function pxe(t){return this.runAsync(null,e=>{e._trigger=!1,e._runtime.setState(t)},e=>{e._trigger=!0}),this}function _xe(t,e){function i(n){t({timestamp:Date.now(),elapsed:n})}this._timers.push(mre(i,e))}function yxe(t,e,i,n){const s=t.element();s&&s.setAttribute("title",gxe(n))}function gxe(t){return t==null?"":ue(t)?yX(t):Me(t)&&!Oc(t)?mxe(t):t+""}function mxe(t){return Object.keys(t).map(e=>{const i=t[e];return e+": "+(ue(i)?yX(i):gX(i))}).join(`
`)}function yX(t){return"["+t.map(gX).join(", ")+"]"}function gX(t){return ue(t)?"[…]":Me(t)&&!Oc(t)?"{…}":t}function mX(t,e){const i=this;if(e=e||{},np.call(i),e.loader&&i.loader(e.loader),e.logger&&i.logger(e.logger),e.logLevel!=null&&i.logLevel(e.logLevel),e.locale||t.locale){const a=yt({},t.locale,e.locale);i.locale($V(a.number,a.time))}i._el=null,i._elBind=null,i._renderType=e.renderer||xc.Canvas,i._scenegraph=new CN;const n=i._scenegraph.root;i._renderer=null,i._tooltip=e.tooltip||yxe,i._redraw=!0,i._handler=new rw().scene(n),i._globalCursor=!1,i._preventDefault=!1,i._timers=[],i._eventListeners=[],i._resizeListeners=[],i._eventConfig=DSe(t.eventConfig),i.globalCursor(i._eventConfig.globalCursor);const s=oxe(i,t,e.expr);i._runtime=s,i._signals=s.signals,i._bind=(t.bindings||[]).map(a=>({state:null,param:yt({},a)})),s.root&&s.root.set(n),n.source=s.data.root.input,i.pulse(s.data.root.input,i.changeset().insert(n.items)),i._width=i.width(),i._height=i.height(),i._viewWidth=pX(i,i._width),i._viewHeight=_X(i,i._height),i._origin=[0,0],i._resize=0,i._autosize=1,cxe(i),BSe(i),ISe(i),i.description(t.description),e.hover&&i.hover(),e.container&&i.initialize(e.container,e.bind)}function b0(t,e){return Pe(t._signals,e)?t._signals[e]:de("Unrecognized signal name: "+ve(e))}function wX(t,e){const i=(t._targets||[]).filter(n=>n._update&&n._update.handler===e);return i.length?i[0]:null}function w$(t,e,i,n){let s=wX(i,n);return s||(s=UC(t,()=>n(e,i.value)),s.handler=n,t.on(i,null,s)),t}function b$(t,e,i){const n=wX(e,i);return n&&e._targets.remove(n),t}Ee(mX,np,{async evaluate(t,e,i){if(await np.prototype.evaluate.call(this,t,e),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,ASe(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(n){this.error(n)}return i&&oT(this,i),this},dirty(t){this._redraw=!0,this._renderer&&this._renderer.dirty(t)},description(t){if(arguments.length){const e=t!=null?t+"":null;return e!==this._desc&&oX(this._el,this._desc=e),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(t,e,i){const n=b0(this,t);return arguments.length===1?n.value:this.update(n,e,i)},width(t){return arguments.length?this.signal("width",t):this.signal("width")},height(t){return arguments.length?this.signal("height",t):this.signal("height")},padding(t){return arguments.length?this.signal("padding",g$(t)):g$(this.signal("padding"))},autosize(t){return arguments.length?this.signal("autosize",t):this.signal("autosize")},background(t){return arguments.length?this.signal("background",t):this.signal("background")},renderer(t){return arguments.length?(gS(t)||de("Unrecognized renderer type: "+t),t!==this._renderType&&(this._renderType=t,this._resetRenderer()),this):this._renderType},tooltip(t){return arguments.length?(t!==this._tooltip&&(this._tooltip=t,this._resetRenderer()),this):this._tooltip},loader(t){return arguments.length?(t!==this._loader&&(np.prototype.loader.call(this,t),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(b0(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:dxe,addEventListener(t,e,i){let n=e;return i&&i.trap===!1||(n=UC(this,e),n.raw=e),this._handler.on(t,n),this},removeEventListener(t,e){for(var i=this._handler.handlers(t),n=i.length,s,a;--n>=0;)if(a=i[n].type,s=i[n].handler,t===a&&(e===s||e===s.raw)){this._handler.off(a,s);break}return this},addResizeListener(t){const e=this._resizeListeners;return e.indexOf(t)<0&&e.push(t),this},removeResizeListener(t){var e=this._resizeListeners,i=e.indexOf(t);return i>=0&&e.splice(i,1),this},addSignalListener(t,e){return w$(this,t,b0(this,t),e)},removeSignalListener(t,e){return b$(this,b0(this,t),e)},addDataListener(t,e){return w$(this,t,Mv(this,t).values,e)},removeDataListener(t,e){return b$(this,Mv(this,t).values,e)},globalCursor(t){if(arguments.length){if(this._globalCursor!==!!t){const e=MF(this,null);this._globalCursor=!!t,e&&MF(this,e)}return this}else return this._globalCursor},preventDefault(t){return arguments.length?(this._preventDefault=t,this):this._preventDefault},timer:_xe,events:$Se,finalize:zSe,hover:USe,data:kSe,change:SS,insert:FSe,remove:MSe,scale:lxe,initialize:txe,toImageURL:nxe,toCanvas:rxe,toSVG:axe,getState:fxe,setState:pxe});const wxe="view",Ov="[",Nv="]",bX="{",TX="}",bxe=":",vX=",",Txe="@",vxe=">",Exe=/[[\]{}]/,Sxe={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let EX,SX;function Sd(t,e,i){return EX=e||wxe,SX=i||Sxe,xX(t.trim()).map(AF)}function xxe(t){return SX[t]}function dg(t,e,i,n,s){const a=t.length;let c=0,d;for(;e<a;++e){if(d=t[e],!c&&d===i)return e;s&&s.indexOf(d)>=0?--c:n&&n.indexOf(d)>=0&&++c}return e}function xX(t){const e=[],i=t.length;let n=0,s=0;for(;s<i;)s=dg(t,s,vX,Ov+bX,Nv+TX),e.push(t.substring(n,s).trim()),n=++s;if(e.length===0)throw"Empty event selector: "+t;return e}function AF(t){return t[0]==="["?Bxe(t):Ixe(t)}function Bxe(t){const e=t.length;let i=1,n;if(i=dg(t,i,Nv,Ov,Nv),i===e)throw"Empty between selector: "+t;if(n=xX(t.substring(1,i)),n.length!==2)throw"Between selector must have two elements: "+t;if(t=t.slice(i+1).trim(),t[0]!==vxe)throw"Expected '>' after between selector: "+t;n=n.map(AF);const s=AF(t.slice(1).trim());return s.between?{between:n,stream:s}:(s.between=n,s)}function Ixe(t){const e={source:EX},i=[];let n=[0,0],s=0,a=0,c=t.length,d=0,f,u;if(t[c-1]===TX){if(d=t.lastIndexOf(bX),d>=0){try{n=kxe(t.substring(d+1,c-1))}catch{throw"Invalid throttle specification: "+t}t=t.slice(0,d).trim(),c=t.length}else throw"Unmatched right brace: "+t;d=0}if(!c)throw t;if(t[0]===Txe&&(s=++d),f=dg(t,d,bxe),f<c&&(i.push(t.substring(a,f).trim()),a=d=++f),d=dg(t,d,Ov),d===c)i.push(t.substring(a,c).trim());else if(i.push(t.substring(a,d).trim()),u=[],a=++d,a===c)throw"Unmatched left bracket: "+t;for(;d<c;){if(d=dg(t,d,Nv),d===c)throw"Unmatched left bracket: "+t;if(u.push(t.substring(a,d).trim()),d<c-1&&t[++d]!==Ov)throw"Expected left bracket: "+t;a=++d}if(!(c=i.length)||Exe.test(i[c-1]))throw"Invalid event selector: "+t;return c>1?(e.type=i[1],s?e.markname=i[0].slice(1):xxe(i[0])?e.marktype=i[0]:e.source=i[0]):e.type=i[0],e.type.slice(-1)==="!"&&(e.consume=!0,e.type=e.type.slice(0,-1)),u!=null&&(e.filter=u),n[0]&&(e.throttle=n[0]),n[1]&&(e.debounce=n[1]),e}function kxe(t){const e=t.split(vX);if(!t.length||e.length>2)throw t;return e.map(i=>{const n=+i;if(n!==n)throw t;return n})}function Fxe(t){return Me(t)?t:{type:t||"pad"}}const sy=t=>+t||0,Mxe=t=>({top:t,bottom:t,left:t,right:t});function Axe(t){return Me(t)?t.signal?t:{top:sy(t.top),bottom:sy(t.bottom),left:sy(t.left),right:sy(t.right)}:Mxe(sy(t))}const sn=t=>Me(t)&&!ue(t)?yt({},t):{value:t};function T$(t,e,i,n){return i!=null?(Me(i)&&!ue(i)||ue(i)&&i.length&&Me(i[0])?t.update[e]=i:t[n||"enter"][e]={value:i},1):0}function mn(t,e,i){for(const n in e)T$(t,n,e[n]);for(const n in i)T$(t,n,i[n],"update")}function k_(t,e,i){for(const n in e)i&&Pe(i,n)||(t[n]=yt(t[n]||{},e[n]));return t}function kh(t,e){return e&&(e.enter&&e.enter[t]||e.update&&e.update[t])}const qC="mark",GC="frame",VC="scope",Oxe="axis",Nxe="axis-domain",Cxe="axis-grid",Rxe="axis-label",Lxe="axis-tick",Dxe="axis-title",Pxe="legend",$xe="legend-band",Uxe="legend-entry",zxe="legend-gradient",BX="legend-label",jxe="legend-symbol",qxe="legend-title",Gxe="title",Vxe="title-text",Wxe="title-subtitle";function Hxe(t,e,i,n,s){const a={},c={};let d,f,u,o;f="lineBreak",e==="text"&&s[f]!=null&&!kh(f,t)&&KB(a,f,s[f]),(i=="legend"||String(i).startsWith("axis"))&&(i=null),o=i===GC?s.group:i===qC?yt({},s.mark,s[e]):null;for(f in o)u=kh(f,t)||(f==="fill"||f==="stroke")&&(kh("fill",t)||kh("stroke",t)),u||KB(a,f,o[f]);ke(n).forEach(g=>{const w=s.style&&s.style[g];for(const m in w)kh(m,t)||KB(a,m,w[m])}),t=yt({},t);for(f in a)o=a[f],o.signal?(d=d||{})[f]=o:c[f]=o;return t.enter=yt(c,t.enter),d&&(t.update=yt(d,t.update)),t}function KB(t,e,i){t[e]=i&&i.signal?{signal:i.signal}:{value:i}}const IX=t=>Ie(t)?ve(t):t.signal?`(${t.signal})`:kX(t);function BS(t){if(t.gradient!=null)return Xxe(t);let e=t.signal?`(${t.signal})`:t.color?Yxe(t.color):t.field!=null?kX(t.field):t.value!==void 0?ve(t.value):void 0;return t.scale!=null&&(e=Kxe(t,e)),e===void 0&&(e=null),t.exponent!=null&&(e=`pow(${e},${bT(t.exponent)})`),t.mult!=null&&(e+=`*${bT(t.mult)}`),t.offset!=null&&(e+=`+${bT(t.offset)}`),t.round&&(e=`round(${e})`),e}const T0=(t,e,i,n)=>`(${t}(${[e,i,n].map(BS).join(",")})+'')`;function Yxe(t){return t.c?T0("hcl",t.h,t.c,t.l):t.h||t.s?T0("hsl",t.h,t.s,t.l):t.l||t.a?T0("lab",t.l,t.a,t.b):t.r||t.g||t.b?T0("rgb",t.r,t.g,t.b):null}function Xxe(t){const e=[t.start,t.stop,t.count].map(i=>i==null?null:ve(i));for(;e.length&&At(e)==null;)e.pop();return e.unshift(IX(t.gradient)),`gradient(${e.join(",")})`}function bT(t){return Me(t)?"("+BS(t)+")":t}function kX(t){return FX(Me(t)?t:{datum:t})}function FX(t){let e,i,n;if(t.signal)e="datum",n=t.signal;else if(t.group||t.parent){for(i=Math.max(1,t.level||1),e="item";i-- >0;)e+=".mark.group";t.parent?(n=t.parent,e+=".datum"):n=t.group}else t.datum?(e="datum",n=t.datum):de("Invalid field reference: "+ve(t));return t.signal||(n=Ie(n)?Ro(n).map(ve).join("]["):FX(n)),e+"["+n+"]"}function Kxe(t,e){const i=IX(t.scale);return t.range!=null?e=`lerp(_range(${i}), ${+t.range})`:(e!==void 0&&(e=`_scale(${i}, ${e})`),t.band&&(e=(e?e+"+":"")+`_bandwidth(${i})`+(+t.band==1?"":"*"+bT(t.band)),t.extra&&(e=`(datum.extra ? _scale(${i}, datum.extra.value) : ${e})`)),e==null&&(e="0")),e}function Jxe(t){let e="";return t.forEach(i=>{const n=BS(i);e+=i.test?`(${i.test})?${n}:`:n}),At(e)===":"&&(e+="null"),e}function MX(t,e,i,n,s,a){const c={};a=a||{},a.encoders={$encode:c},t=Hxe(t,e,i,n,s.config);for(const d in t)c[d]=Qxe(t[d],e,a,s);return a}function Qxe(t,e,i,n){const s={},a={};for(const c in t)t[c]!=null&&(s[c]=eBe(Zxe(t[c]),n,i,a));return{$expr:{marktype:e,channels:s},$fields:Object.keys(a),$output:Object.keys(t)}}function Zxe(t){return ue(t)?Jxe(t):BS(t)}function eBe(t,e,i,n){const s=Io(t,e);return s.$fields.forEach(a=>n[a]=1),yt(i,s.$params),s.$expr}const tBe="outer",iBe=["value","update","init","react","bind"];function v$(t,e){de(t+' for "outer" push: '+ve(e))}function AX(t,e){const i=t.name;if(t.push===tBe)e.signals[i]||v$("No prior signal definition",i),iBe.forEach(n=>{t[n]!==void 0&&v$("Invalid property ",n)});else{const n=e.addSignal(i,t.value);t.react===!1&&(n.react=!1),t.bind&&e.addBinding(i,t.bind)}}function OF(t,e,i,n){this.id=-1,this.type=t,this.value=e,this.params=i,n&&(this.parent=n)}function IS(t,e,i,n){return new OF(t,e,i,n)}function Cv(t,e){return IS("operator",t,e)}function Re(t){const e={$ref:t.id};return t.id<0&&(t.refs=t.refs||[]).push(e),e}function im(t,e){return e?{$field:t,$name:e}:{$field:t}}const NF=im("key");function E$(t,e){return{$compare:t,$order:e}}function nBe(t,e){const i={$key:t};return e&&(i.$flat=!0),i}const sBe="ascending",rBe="descending";function aBe(t){return Me(t)?(t.order===rBe?"-":"+")+kS(t.op,t.field):""}function kS(t,e){return(t&&t.signal?"$"+t.signal:t||"")+(t&&e?"_":"")+(e&&e.signal?"$"+e.signal:e||"")}const WC="scope",CF="view";function Hi(t){return t&&t.signal}function oBe(t){return t&&t.expr}function TT(t){if(Hi(t))return!0;if(Me(t)){for(const e in t)if(TT(t[e]))return!0}return!1}function Wr(t,e){return t??e}function Rf(t){return t&&t.signal||t}const S$="timer";function nm(t,e){return(t.merge?cBe:t.stream?dBe:t.type?fBe:de("Invalid stream specification: "+ve(t)))(t,e)}function lBe(t){return t===WC?CF:t||CF}function cBe(t,e){const i=t.merge.map(s=>nm(s,e)),n=HC({merge:i},t,e);return e.addStream(n).id}function dBe(t,e){const i=nm(t.stream,e),n=HC({stream:i},t,e);return e.addStream(n).id}function fBe(t,e){let i;t.type===S$?(i=e.event(S$,t.throttle),t={between:t.between,filter:t.filter}):i=e.event(lBe(t.source),t.type);const n=HC({stream:i},t,e);return Object.keys(n).length===1?i:e.addStream(n).id}function HC(t,e,i){let n=e.between;return n&&(n.length!==2&&de('Stream "between" parameter must have 2 entries: '+ve(e)),t.between=[nm(n[0],i),nm(n[1],i)]),n=e.filter?[].concat(e.filter):[],(e.marktype||e.markname||e.markrole)&&n.push(uBe(e.marktype,e.markname,e.markrole)),e.source===WC&&n.push("inScope(event.item)"),n.length&&(t.filter=Io("("+n.join(")&&(")+")",i).$expr),(n=e.throttle)!=null&&(t.throttle=+n),(n=e.debounce)!=null&&(t.debounce=+n),e.consume&&(t.consume=!0),t}function uBe(t,e,i){const n="event.item";return n+(t&&t!=="*"?"&&"+n+".mark.marktype==='"+t+"'":"")+(i?"&&"+n+".mark.role==='"+i+"'":"")+(e?"&&"+n+".mark.name==='"+e+"'":"")}const hBe={code:"_.$value",ast:{type:"Identifier",value:"value"}};function pBe(t,e,i){const n=t.encode,s={target:i};let a=t.events,c=t.update,d=[];a||de("Signal update missing events specification."),Ie(a)&&(a=Sd(a,e.isSubscope()?WC:CF)),a=ke(a).filter(f=>f.signal||f.scale?(d.push(f),0):1),d.length>1&&(d=[yBe(d)]),a.length&&d.push(a.length>1?{merge:a}:a[0]),n!=null&&(c&&de("Signal encode and update are mutually exclusive."),c="encode(item(),"+ve(n)+")"),s.update=Ie(c)?Io(c,e):c.expr!=null?Io(c.expr,e):c.value!=null?c.value:c.signal!=null?{$expr:hBe,$params:{$value:e.signalRef(c.signal)}}:de("Invalid signal update specification."),t.force&&(s.options={force:!0}),d.forEach(f=>e.addUpdate(yt(_Be(f,e),s)))}function _Be(t,e){return{source:t.signal?e.signalRef(t.signal):t.scale?e.scaleRef(t.scale):nm(t,e)}}function yBe(t){return{signal:"["+t.map(e=>e.scale?'scale("'+e.scale+'")':e.signal)+"]"}}function gBe(t,e){const i=e.getSignal(t.name);let n=t.update;t.init&&(n?de("Signals can not include both init and update expressions."):(n=t.init,i.initonly=!0)),n&&(n=Io(n,e),i.update=n.$expr,i.params=n.$params),t.on&&t.on.forEach(s=>pBe(s,e,i.id))}const ni=t=>(e,i,n)=>IS(t,i,e||void 0,n),OX=ni("aggregate"),mBe=ni("axisticks"),NX=ni("bound"),Ta=ni("collect"),x$=ni("compare"),wBe=ni("datajoin"),CX=ni("encode"),bBe=ni("expression"),TBe=ni("facet"),vBe=ni("field"),EBe=ni("key"),SBe=ni("legendentries"),xBe=ni("load"),BBe=ni("mark"),IBe=ni("multiextent"),kBe=ni("multivalues"),FBe=ni("overlap"),MBe=ni("params"),RX=ni("prefacet"),ABe=ni("projection"),OBe=ni("proxy"),NBe=ni("relay"),LX=ni("render"),CBe=ni("scale"),Ru=ni("sieve"),RBe=ni("sortitems"),DX=ni("viewlayout"),LBe=ni("values");let DBe=0;const PX={min:"min",max:"max",count:"sum"};function PBe(t,e){const i=t.type||"linear";OW(i)||de("Unrecognized scale type: "+ve(i)),e.addScale(t.name,{type:i,domain:void 0})}function $Be(t,e){const i=e.getScale(t.name).params;let n;i.domain=$X(t.domain,t,e),t.range!=null&&(i.range=zX(t,e,i)),t.interpolate!=null&&XBe(t.interpolate,i),t.nice!=null&&(i.nice=YBe(t.nice)),t.bins!=null&&(i.bins=HBe(t.bins,e));for(n in t)Pe(i,n)||n==="name"||(i[n]=wr(t[n],e))}function wr(t,e){return Me(t)?t.signal?e.signalRef(t.signal):de("Unsupported object: "+ve(t)):t}function vT(t,e){return t.signal?e.signalRef(t.signal):t.map(i=>wr(i,e))}function FS(t){de("Can not find data set: "+ve(t))}function $X(t,e,i){if(!t){(e.domainMin!=null||e.domainMax!=null)&&de("No scale domain defined for domainMin/domainMax to override.");return}return t.signal?i.signalRef(t.signal):(ue(t)?UBe:t.fields?jBe:zBe)(t,e,i)}function UBe(t,e,i){return t.map(n=>wr(n,i))}function zBe(t,e,i){const n=i.getData(t.data);return n||FS(t.data),Vp(e.type)?n.valuesRef(i,t.field,UX(t.sort,!1)):RW(e.type)?n.domainRef(i,t.field):n.extentRef(i,t.field)}function jBe(t,e,i){const n=t.data,s=t.fields.reduce((a,c)=>(c=Ie(c)?{data:n,field:c}:ue(c)||c.signal?qBe(c,i):c,a.push(c),a),[]);return(Vp(e.type)?GBe:RW(e.type)?VBe:WBe)(t,i,s)}function qBe(t,e){const i="_:vega:_"+DBe++,n=Ta({});if(ue(t))n.value={$ingest:t};else if(t.signal){const s="setdata("+ve(i)+","+t.signal+")";n.params.input=e.signalRef(s)}return e.addDataPipeline(i,[n,Ru({})]),{data:i,field:"data"}}function GBe(t,e,i){const n=UX(t.sort,!0);let s,a;const c=i.map(u=>{const o=e.getData(u.data);return o||FS(u.data),o.countsRef(e,u.field,n)}),d={groupby:NF,pulse:c};n&&(s=n.op||"count",a=n.field?kS(s,n.field):"count",d.ops=[PX[s]],d.fields=[e.fieldRef(a)],d.as=[a]),s=e.add(OX(d));const f=e.add(Ta({pulse:Re(s)}));return a=e.add(LBe({field:NF,sort:e.sortRef(n),pulse:Re(f)})),Re(a)}function UX(t,e){return t&&(!t.field&&!t.op?Me(t)?t.field="key":t={field:"key"}:!t.field&&t.op!=="count"?de("No field provided for sort aggregate op: "+t.op):e&&t.field&&t.op&&!PX[t.op]&&de("Multiple domain scales can not be sorted using "+t.op)),t}function VBe(t,e,i){const n=i.map(s=>{const a=e.getData(s.data);return a||FS(s.data),a.domainRef(e,s.field)});return Re(e.add(kBe({values:n})))}function WBe(t,e,i){const n=i.map(s=>{const a=e.getData(s.data);return a||FS(s.data),a.extentRef(e,s.field)});return Re(e.add(IBe({extents:n})))}function HBe(t,e){return t.signal||ue(t)?vT(t,e):e.objectProperty(t)}function YBe(t){return Me(t)?{interval:wr(t.interval),step:wr(t.step)}:wr(t)}function XBe(t,e){e.interpolate=wr(t.type||t),t.gamma!=null&&(e.interpolateGamma=wr(t.gamma))}function zX(t,e,i){const n=e.config.range;let s=t.range;if(s.signal)return e.signalRef(s.signal);if(Ie(s)){if(n&&Pe(n,s))return t=yt({},t,{range:n[s]}),zX(t,e,i);s==="width"?s=[0,{signal:"width"}]:s==="height"?s=Vp(t.type)?[0,{signal:"height"}]:[{signal:"height"},0]:de("Unrecognized scale range value: "+ve(s))}else if(s.scheme){i.scheme=ue(s.scheme)?vT(s.scheme,e):wr(s.scheme,e),s.extent&&(i.schemeExtent=vT(s.extent,e)),s.count&&(i.schemeCount=wr(s.count,e));return}else if(s.step){i.rangeStep=wr(s.step,e);return}else{if(Vp(t.type)&&!ue(s))return $X(s,t,e);ue(s)||de("Unsupported range type: "+ve(s))}return s.map(a=>(ue(a)?vT:wr)(a,e))}function KBe(t,e){const i=e.config.projection||{},n={};for(const s in t)s!=="name"&&(n[s]=RF(t[s],s,e));for(const s in i)n[s]==null&&(n[s]=RF(i[s],s,e));e.addProjection(t.name,n)}function RF(t,e,i){return ue(t)?t.map(n=>RF(n,e,i)):Me(t)?t.signal?i.signalRef(t.signal):e==="fit"?t:de("Unsupported parameter object: "+ve(t)):t}const va="top",F_="left",M_="right",id="bottom",jX="center",JBe="vertical",QBe="start",ZBe="middle",eIe="end",LF="index",YC="label",tIe="offset",Jp="perc",iIe="perc2",Er="value",dw="guide-label",XC="guide-title",nIe="group-title",sIe="group-subtitle",B$="symbol",ET="gradient",DF="discrete",PF="size",rIe="shape",aIe="fill",oIe="stroke",lIe="strokeWidth",cIe="strokeDash",dIe="opacity",KC=[PF,rIe,aIe,oIe,lIe,cIe,dIe],fw={name:1,style:1,interactive:1},Lt={value:0},Sr={value:1},MS="group",qX="rect",JC="rule",fIe="symbol",Lu="text";function sm(t){return t.type=MS,t.interactive=t.interactive||!1,t}function Ps(t,e){const i=(n,s)=>Wr(t[n],Wr(e[n],s));return i.isVertical=n=>JBe===Wr(t.direction,e.direction||(n?e.symbolDirection:e.gradientDirection)),i.gradientLength=()=>Wr(t.gradientLength,e.gradientLength||e.gradientWidth),i.gradientThickness=()=>Wr(t.gradientThickness,e.gradientThickness||e.gradientHeight),i.entryColumns=()=>Wr(t.columns,Wr(e.columns,+i.isVertical(!0))),i}function GX(t,e){const i=e&&(e.update&&e.update[t]||e.enter&&e.enter[t]);return i&&i.signal?i:i?i.value:null}function uIe(t,e,i){const n=e.config.style[i];return n&&n[t]}function AS(t,e,i){return`item.anchor === '${QBe}' ? ${t} : item.anchor === '${eIe}' ? ${e} : ${i}`}const QC=AS(ve(F_),ve(M_),ve(jX));function hIe(t){const e=t("tickBand");let i=t("tickOffset"),n,s;return e?e.signal?(n={signal:`(${e.signal}) === 'extent' ? 1 : 0.5`},s={signal:`(${e.signal}) === 'extent'`},Me(i)||(i={signal:`(${e.signal}) === 'extent' ? 0 : ${i}`})):e==="extent"?(n=1,s=!0,i=0):(n=.5,s=!1):(n=t("bandPosition"),s=t("tickExtra")),{extra:s,band:n,offset:i}}function VX(t,e){return e?t?Me(t)?Object.assign({},t,{offset:VX(t.offset,e)}):{value:t,offset:e}:e:t}function ar(t,e){return e?(t.name=e.name,t.style=e.style||t.style,t.interactive=!!e.interactive,t.encode=k_(t.encode,e,fw)):t.interactive=!1,t}function pIe(t,e,i,n){const s=Ps(t,i),a=s.isVertical(),c=s.gradientThickness(),d=s.gradientLength();let f,u,o,g,w;a?(u=[0,1],o=[0,0],g=c,w=d):(u=[0,0],o=[1,0],g=d,w=c);const m={enter:f={opacity:Lt,x:Lt,y:Lt,width:sn(g),height:sn(w)},update:yt({},f,{opacity:Sr,fill:{gradient:e,start:u,stop:o}}),exit:{opacity:Lt}};return mn(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),ar({type:qX,role:zxe,encode:m},n)}function _Ie(t,e,i,n,s){const a=Ps(t,i),c=a.isVertical(),d=a.gradientThickness(),f=a.gradientLength();let u,o,g,w,m="";c?(u="y",g="y2",o="x",w="width",m="1-"):(u="x",g="x2",o="y",w="height");const l={opacity:Lt,fill:{scale:e,field:Er}};l[u]={signal:m+"datum."+Jp,mult:f},l[o]=Lt,l[g]={signal:m+"datum."+iIe,mult:f},l[w]=sn(d);const T={enter:l,update:yt({},l,{opacity:Sr}),exit:{opacity:Lt}};return mn(T,{stroke:a("gradientStrokeColor"),strokeWidth:a("gradientStrokeWidth")},{opacity:a("gradientOpacity")}),ar({type:qX,role:$xe,key:Er,from:s,encode:T},n)}const yIe=`datum.${Jp}<=0?"${F_}":datum.${Jp}>=1?"${M_}":"${jX}"`,gIe=`datum.${Jp}<=0?"${id}":datum.${Jp}>=1?"${va}":"${ZBe}"`;function I$(t,e,i,n){const s=Ps(t,e),a=s.isVertical(),c=sn(s.gradientThickness()),d=s.gradientLength();let f=s("labelOverlap"),u,o,g,w,m="";const l={enter:u={opacity:Lt},update:o={opacity:Sr,text:{field:YC}},exit:{opacity:Lt}};return mn(l,{fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:Wr(t.labelLimit,e.gradientLabelLimit)}),a?(u.align={value:"left"},u.baseline=o.baseline={signal:gIe},g="y",w="x",m="1-"):(u.align=o.align={signal:yIe},u.baseline={value:"top"},g="x",w="y"),u[g]=o[g]={signal:m+"datum."+Jp,mult:d},u[w]=o[w]=c,c.offset=Wr(t.labelOffset,e.gradientLabelOffset)||0,f=f?{separation:s("labelSeparation"),method:f,order:"datum."+LF}:void 0,ar({type:Lu,role:BX,style:dw,key:Er,from:n,encode:l,overlap:f},i)}function mIe(t,e,i,n,s){const a=Ps(t,e),c=i.entries,d=!!(c&&c.interactive),f=c?c.name:void 0,u=a("clipHeight"),o=a("symbolOffset"),g={data:"value"},w=`(${s}) ? datum.${tIe} : datum.${PF}`,m=u?sn(u):{field:PF},l=`datum.${LF}`,T=`max(1, ${s})`;let b,S,x,B,F;m.mult=.5,b={enter:S={opacity:Lt,x:{signal:w,mult:.5,offset:o},y:m},update:x={opacity:Sr,x:S.x,y:S.y},exit:{opacity:Lt}};let I=null,A=null;t.fill||(I=e.symbolBaseFillColor,A=e.symbolBaseStrokeColor),mn(b,{fill:a("symbolFillColor",I),shape:a("symbolType"),size:a("symbolSize"),stroke:a("symbolStrokeColor",A),strokeDash:a("symbolDash"),strokeDashOffset:a("symbolDashOffset"),strokeWidth:a("symbolStrokeWidth")},{opacity:a("symbolOpacity")}),KC.forEach(P=>{t[P]&&(x[P]=S[P]={scale:t[P],field:Er})});const O=ar({type:fIe,role:jxe,key:Er,from:g,clip:u?!0:void 0,encode:b},i.symbols),R=sn(o);R.offset=a("labelOffset"),b={enter:S={opacity:Lt,x:{signal:w,offset:R},y:m},update:x={opacity:Sr,text:{field:YC},x:S.x,y:S.y},exit:{opacity:Lt}},mn(b,{align:a("labelAlign"),baseline:a("labelBaseline"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontStyle:a("labelFontStyle"),fontWeight:a("labelFontWeight"),limit:a("labelLimit")});const D=ar({type:Lu,role:BX,style:dw,key:Er,from:g,encode:b},i.labels);return b={enter:{noBound:{value:!u},width:Lt,height:u?sn(u):Lt,opacity:Lt},exit:{opacity:Lt},update:x={opacity:Sr,row:{signal:null},column:{signal:null}}},a.isVertical(!0)?(B=`ceil(item.mark.items.length / ${T})`,x.row.signal=`${l}%${B}`,x.column.signal=`floor(${l} / ${B})`,F={field:["row",l]}):(x.row.signal=`floor(${l} / ${T})`,x.column.signal=`${l} % ${T}`,F={field:l}),x.column.signal=`(${s})?${x.column.signal}:${l}`,n={facet:{data:n,name:"value",groupby:LF}},sm({role:VC,from:n,encode:k_(b,c,fw),marks:[O,D],name:f,interactive:d,sort:F})}function wIe(t,e){const i=Ps(t,e);return{align:i("gridAlign"),columns:i.entryColumns(),center:{row:!0,column:!1},padding:{row:i("rowPadding"),column:i("columnPadding")}}}const ZC='item.orient === "left"',eR='item.orient === "right"',OS=`(${ZC} || ${eR})`,bIe=`datum.vgrad && ${OS}`,TIe=AS('"top"','"bottom"','"middle"'),vIe=AS('"right"','"left"','"center"'),EIe=`datum.vgrad && ${eR} ? (${vIe}) : (${OS} && !(datum.vgrad && ${ZC})) ? "left" : ${QC}`,SIe=`item._anchor || (${OS} ? "middle" : "start")`,xIe=`${bIe} ? (${ZC} ? -90 : 90) : 0`,BIe=`${OS} ? (datum.vgrad ? (${eR} ? "bottom" : "top") : ${TIe}) : "top"`;function IIe(t,e,i,n){const s=Ps(t,e),a={enter:{opacity:Lt},update:{opacity:Sr,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Lt}};return mn(a,{orient:s("titleOrient"),_anchor:s("titleAnchor"),anchor:{signal:SIe},angle:{signal:xIe},align:{signal:EIe},baseline:{signal:BIe},text:t.title,fill:s("titleColor"),fillOpacity:s("titleOpacity"),font:s("titleFont"),fontSize:s("titleFontSize"),fontStyle:s("titleFontStyle"),fontWeight:s("titleFontWeight"),limit:s("titleLimit"),lineHeight:s("titleLineHeight")},{align:s("titleAlign"),baseline:s("titleBaseline")}),ar({type:Lu,role:qxe,style:XC,from:n,encode:a},i)}function kIe(t,e){let i;return Me(t)&&(t.signal?i=t.signal:t.path?i="pathShape("+k$(t.path)+")":t.sphere&&(i="geoShape("+k$(t.sphere)+', {type: "Sphere"})')),i?e.signalRef(i):!!t}function k$(t){return Me(t)&&t.signal?t.signal:ve(t)}function WX(t){const e=t.role||"";return!e.indexOf("axis")||!e.indexOf("legend")||!e.indexOf("title")?e:t.type===MS?VC:e||qC}function FIe(t){return{marktype:t.type,name:t.name||void 0,role:t.role||WX(t),zindex:+t.zindex||void 0,aria:t.aria,description:t.description}}function MIe(t,e){return t&&t.signal?e.signalRef(t.signal):t!==!1}function tR(t,e){const i=QV(t.type);i||de("Unrecognized transform type: "+ve(t.type));const n=IS(i.type.toLowerCase(),null,HX(i,t,e));return t.signal&&e.addSignal(t.signal,e.proxy(n)),n.metadata=i.metadata||{},n}function HX(t,e,i){const n={},s=t.params.length;for(let a=0;a<s;++a){const c=t.params[a];n[c.name]=AIe(c,e,i)}return n}function AIe(t,e,i){const n=t.type,s=e[t.name];if(n==="index")return OIe(t,e,i);if(s===void 0){t.required&&de("Missing required "+ve(e.type)+" parameter: "+ve(t.name));return}else{if(n==="param")return NIe(t,e,i);if(n==="projection")return i.projectionRef(e[t.name])}return t.array&&!Hi(s)?s.map(a=>F$(t,a,i)):F$(t,s,i)}function F$(t,e,i){const n=t.type;if(Hi(e))return A$(n)?de("Expression references can not be signals."):JB(n)?i.fieldRef(e):O$(n)?i.compareRef(e):i.signalRef(e.signal);{const s=t.expr||JB(n);return s&&CIe(e)?i.exprRef(e.expr,e.as):s&&RIe(e)?im(e.field,e.as):A$(n)?Io(e,i):LIe(n)?Re(i.getData(e).values):JB(n)?im(e):O$(n)?i.compareRef(e):e}}function OIe(t,e,i){return Ie(e.from)||de('Lookup "from" parameter must be a string literal.'),i.getData(e.from).lookupRef(i,e.key)}function NIe(t,e,i){const n=e[t.name];return t.array?(ue(n)||de("Expected an array of sub-parameters. Instead: "+ve(n)),n.map(s=>M$(t,s,i))):M$(t,n,i)}function M$(t,e,i){const n=t.params.length;let s;for(let c=0;c<n;++c){s=t.params[c];for(const d in s.key)if(s.key[d]!==e[d]){s=null;break}if(s)break}s||de("Unsupported parameter: "+ve(e));const a=yt(HX(s,e,i),s.key);return Re(i.add(MBe(a)))}const CIe=t=>t&&t.expr,RIe=t=>t&&t.field,LIe=t=>t==="data",A$=t=>t==="expr",JB=t=>t==="field",O$=t=>t==="compare";function DIe(t,e,i){let n,s,a,c,d;return t?(n=t.facet)&&(e||de("Only group marks can be faceted."),n.field!=null?c=d=ST(n,i):(t.data?d=Re(i.getData(t.data).aggregate):(a=tR(yt({type:"aggregate",groupby:ke(n.groupby)},n.aggregate),i),a.params.key=i.keyRef(n.groupby),a.params.pulse=ST(n,i),c=d=Re(i.add(a))),s=i.keyRef(n.groupby,!0))):c=Re(i.add(Ta(null,[{}]))),c||(c=ST(t,i)),{key:s,pulse:c,parent:d}}function ST(t,e){return t.$ref?t:t.data&&t.data.$ref?t.data:Re(e.getData(t.data).output)}function nu(t,e,i,n,s){this.scope=t,this.input=e,this.output=i,this.values=n,this.aggregate=s,this.index={}}nu.fromEntries=function(t,e){const i=e.length,n=e[i-1],s=e[i-2];let a=e[0],c=null,d=1;for(a&&a.type==="load"&&(a=e[1]),t.add(e[0]);d<i;++d)e[d].params.pulse=Re(e[d-1]),t.add(e[d]),e[d].type==="aggregate"&&(c=e[d]);return new nu(t,a,s,n,c)};function YX(t){return Ie(t)?t:null}function N$(t,e,i){const n=kS(i.op,i.field);let s;if(e.ops){for(let a=0,c=e.as.length;a<c;++a)if(e.as[a]===n)return}else e.ops=["count"],e.fields=[null],e.as=["count"];i.op&&(e.ops.push((s=i.op.signal)?t.signalRef(s):i.op),e.fields.push(t.fieldRef(i.field)),e.as.push(n))}function ry(t,e,i,n,s,a,c){const d=e[i]||(e[i]={}),f=aBe(a);let u=YX(s),o,g;if(u!=null&&(t=e.scope,u=u+(f?"|"+f:""),o=d[u]),!o){const w=a?{field:NF,pulse:e.countsRef(t,s,a)}:{field:t.fieldRef(s),pulse:Re(e.output)};f&&(w.sort=t.sortRef(a)),g=t.add(IS(n,void 0,w)),c&&(e.index[s]=g),o=Re(g),u!=null&&(d[u]=o)}return o}nu.prototype={countsRef(t,e,i){const n=this,s=n.counts||(n.counts={}),a=YX(e);let c,d,f;return a!=null&&(t=n.scope,c=s[a]),c?i&&i.field&&N$(t,c.agg.params,i):(f={groupby:t.fieldRef(e,"key"),pulse:Re(n.output)},i&&i.field&&N$(t,f,i),d=t.add(OX(f)),c=t.add(Ta({pulse:Re(d)})),c={agg:d,ref:Re(c)},a!=null&&(s[a]=c)),c.ref},tuplesRef(){return Re(this.values)},extentRef(t,e){return ry(t,this,"extent","extent",e,!1)},domainRef(t,e){return ry(t,this,"domain","values",e,!1)},valuesRef(t,e,i){return ry(t,this,"vals","values",e,i||!0)},lookupRef(t,e){return ry(t,this,"lookup","tupleindex",e,!1)},indataRef(t,e){return ry(t,this,"indata","tupleindex",e,!0,!0)}};function PIe(t,e,i){const n=t.from.facet,s=n.name,a=ST(n,e);let c;n.name||de("Facet must have a name: "+ve(n)),n.data||de("Facet must reference a data set: "+ve(n)),n.field?c=e.add(RX({field:e.fieldRef(n.field),pulse:a})):n.groupby?c=e.add(TBe({key:e.keyRef(n.groupby),group:Re(e.proxy(i.parent)),pulse:a})):de("Facet must specify groupby or field: "+ve(n));const d=e.fork(),f=d.add(Ta()),u=d.add(Ru({pulse:Re(f)}));d.addData(s,new nu(d,f,f,u)),d.addSignal("parent",null),c.params.subflow={$subflow:d.parse(t).toRuntime()}}function $Ie(t,e,i){const n=e.add(RX({pulse:i.pulse})),s=e.fork();s.add(Ru()),s.addSignal("parent",null),n.params.subflow={$subflow:s.parse(t).toRuntime()}}function XX(t,e,i){const n=t.remove,s=t.insert,a=t.toggle,c=t.modify,d=t.values,f=e.add(Cv()),u="if("+t.trigger+',modify("'+i+'",'+[s,n,a,c,d].map(g=>g??"null").join(",")+"),0)",o=Io(u,e);f.update=o.$expr,f.params=o.$params}function NS(t,e){const i=WX(t),n=t.type===MS,s=t.from&&t.from.facet,a=t.overlap;let c=t.layout||i===VC||i===GC,d,f,u,o,g,w,m;const l=i===qC||c||s,T=DIe(t.from,n,e);f=e.add(wBe({key:T.key||(t.key?im(t.key):void 0),pulse:T.pulse,clean:!n}));const b=Re(f);f=u=e.add(Ta({pulse:b})),f=e.add(BBe({markdef:FIe(t),interactive:MIe(t.interactive,e),clip:kIe(t.clip,e),context:{$context:!0},groups:e.lookup(),parent:e.signals.parent?e.signalRef("parent"):null,index:e.markpath(),pulse:Re(f)}));const S=Re(f);f=o=e.add(CX(MX(t.encode,t.type,i,t.style,e,{mod:!1,pulse:S}))),f.params.parent=e.encode(),t.transform&&t.transform.forEach(A=>{const O=tR(A,e),R=O.metadata;(R.generates||R.changes)&&de("Mark transforms should not generate new data."),R.nomod||(o.params.mod=!0),O.params.pulse=Re(f),e.add(f=O)}),t.sort&&(f=e.add(RBe({sort:e.compareRef(t.sort),pulse:Re(f)})));const x=Re(f);(s||c)&&(c=e.add(DX({layout:e.objectProperty(t.layout),legends:e.legends,mark:S,pulse:x})),w=Re(c));const B=e.add(NX({mark:S,pulse:w||x}));m=Re(B),n&&(l&&(d=e.operators,d.pop(),c&&d.pop()),e.pushState(x,w||m,b),s?PIe(t,e,T):l?$Ie(t,e,T):e.parse(t),e.popState(),l&&(c&&d.push(c),d.push(B))),a&&(m=UIe(a,m,e));const F=e.add(LX({pulse:m})),I=e.add(Ru({pulse:Re(F)},void 0,e.parent()));t.name!=null&&(g=t.name,e.addData(g,new nu(e,u,F,I)),t.on&&t.on.forEach(A=>{(A.insert||A.remove||A.toggle)&&de("Marks only support modify triggers."),XX(A,e,g)}))}function UIe(t,e,i){const n=t.method,s=t.bound,a=t.separation,c={separation:Hi(a)?i.signalRef(a.signal):a,method:Hi(n)?i.signalRef(n.signal):n,pulse:e};if(t.order&&(c.sort=i.compareRef({field:t.order})),s){const d=s.tolerance;c.boundTolerance=Hi(d)?i.signalRef(d.signal):+d,c.boundScale=i.scaleRef(s.scale),c.boundOrient=s.orient}return Re(i.add(FBe(c)))}function zIe(t,e){const i=e.config.legend,n=t.encode||{},s=Ps(t,i),a=n.legend||{},c=a.name||void 0,d=a.interactive,f=a.style,u={};let o=0,g,w,m;KC.forEach(B=>t[B]?(u[B]=t[B],o=o||t[B]):0),o||de("Missing valid scale for legend.");const l=jIe(t,e.scaleType(o)),T={title:t.title!=null,scales:u,type:l,vgrad:l!=="symbol"&&s.isVertical()},b=Re(e.add(Ta(null,[T]))),S={enter:{x:{value:0},y:{value:0}}},x=Re(e.add(SBe(w={type:l,scale:e.scaleRef(o),count:e.objectProperty(s("tickCount")),limit:e.property(s("symbolLimit")),values:e.objectProperty(t.values),minstep:e.property(t.tickMinStep),formatType:e.property(t.formatType),formatSpecifier:e.property(t.format)})));return l===ET?(m=[pIe(t,o,i,n.gradient),I$(t,i,n.labels,x)],w.count=w.count||e.signalRef(`max(2,2*floor((${Rf(s.gradientLength())})/100))`)):l===DF?m=[_Ie(t,o,i,n.gradient,x),I$(t,i,n.labels,x)]:(g=wIe(t,i),m=[mIe(t,i,n,x,Rf(g.columns))],w.size=VIe(t,e,m[0].marks)),m=[sm({role:Uxe,from:b,encode:S,marks:m,layout:g,interactive:d})],T.title&&m.push(IIe(t,i,n.title,b)),NS(sm({role:Pxe,from:b,encode:k_(GIe(s,t,i),a,fw),marks:m,aria:s("aria"),description:s("description"),zindex:s("zindex"),name:c,interactive:d,style:f}),e)}function jIe(t,e){let i=t.type||B$;return!t.type&&qIe(t)===1&&(t.fill||t.stroke)&&(i=cN(e)?ET:Qk(e)?DF:B$),i!==ET?i:Qk(e)?DF:ET}function qIe(t){return KC.reduce((e,i)=>e+(t[i]?1:0),0)}function GIe(t,e,i){const n={enter:{},update:{}};return mn(n,{orient:t("orient"),offset:t("offset"),padding:t("padding"),titlePadding:t("titlePadding"),cornerRadius:t("cornerRadius"),fill:t("fillColor"),stroke:t("strokeColor"),strokeWidth:i.strokeWidth,strokeDash:i.strokeDash,x:t("legendX"),y:t("legendY"),format:e.format,formatType:e.formatType}),n}function VIe(t,e,i){const n=Rf(C$("size",t,i)),s=Rf(C$("strokeWidth",t,i)),a=Rf(WIe(i[1].encode,e,dw));return Io(`max(ceil(sqrt(${n})+${s}),${a})`,e)}function C$(t,e,i){return e[t]?`scale("${e[t]}",datum)`:GX(t,i[0].encode)}function WIe(t,e,i){return GX("fontSize",t)||uIe("fontSize",e,i)}const HIe=`item.orient==="${F_}"?-90:item.orient==="${M_}"?90:0`;function YIe(t,e){t=Ie(t)?{text:t}:t;const i=Ps(t,e.config.title),n=t.encode||{},s=n.group||{},a=s.name||void 0,c=s.interactive,d=s.style,f=[],u={},o=Re(e.add(Ta(null,[u])));return f.push(JIe(t,i,XIe(t),o)),t.subtitle&&f.push(QIe(t,i,n.subtitle,o)),NS(sm({role:Gxe,from:o,encode:KIe(i,s),marks:f,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:a,interactive:c,style:d}),e)}function XIe(t){const e=t.encode;return e&&e.title||yt({name:t.name,interactive:t.interactive,style:t.style},e)}function KIe(t,e){const i={enter:{},update:{}};return mn(i,{orient:t("orient"),anchor:t("anchor"),align:{signal:QC},angle:{signal:HIe},limit:t("limit"),frame:t("frame"),offset:t("offset")||0,padding:t("subtitlePadding")}),k_(i,e,fw)}function JIe(t,e,i,n){const s={value:0},a=t.text,c={enter:{opacity:s},update:{opacity:{value:1}},exit:{opacity:s}};return mn(c,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:e("dx"),dy:e("dy"),fill:e("color"),font:e("font"),fontSize:e("fontSize"),fontStyle:e("fontStyle"),fontWeight:e("fontWeight"),lineHeight:e("lineHeight")},{align:e("align"),angle:e("angle"),baseline:e("baseline")}),ar({type:Lu,role:Vxe,style:nIe,from:n,encode:c},i)}function QIe(t,e,i,n){const s={value:0},a=t.subtitle,c={enter:{opacity:s},update:{opacity:{value:1}},exit:{opacity:s}};return mn(c,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:e("dx"),dy:e("dy"),fill:e("subtitleColor"),font:e("subtitleFont"),fontSize:e("subtitleFontSize"),fontStyle:e("subtitleFontStyle"),fontWeight:e("subtitleFontWeight"),lineHeight:e("subtitleLineHeight")},{align:e("align"),angle:e("angle"),baseline:e("baseline")}),ar({type:Lu,role:Wxe,style:sIe,from:n,encode:c},i)}function ZIe(t,e){const i=[];t.transform&&t.transform.forEach(n=>{i.push(tR(n,e))}),t.on&&t.on.forEach(n=>{XX(n,e,t.name)}),e.addDataPipeline(t.name,eke(t,e,i))}function eke(t,e,i){const n=[];let s=null,a=!1,c=!1,d,f,u,o,g;for(t.values?Hi(t.values)||TT(t.format)?(n.push(R$(e,t)),n.push(s=Dd())):n.push(s=Dd({$ingest:t.values,$format:t.format})):t.url?TT(t.url)||TT(t.format)?(n.push(R$(e,t)),n.push(s=Dd())):n.push(s=Dd({$request:t.url,$format:t.format})):t.source&&(s=d=ke(t.source).map(w=>Re(e.getData(w).output)),n.push(null)),f=0,u=i.length;f<u;++f)o=i[f],g=o.metadata,!s&&!g.source&&n.push(s=Dd()),n.push(o),g.generates&&(c=!0),g.modifies&&!c&&(a=!0),g.source?s=o:g.changes&&(s=null);return d&&(u=d.length-1,n[0]=NBe({derive:a,pulse:u?d:d[0]}),(a||u)&&n.splice(1,0,Dd())),s||n.push(Dd()),n.push(Ru({})),n}function Dd(t){const e=Ta({},t);return e.metadata={source:!0},e}function R$(t,e){return xBe({url:e.url?t.property(e.url):void 0,async:e.async?t.property(e.async):void 0,values:e.values?t.property(e.values):void 0,format:t.objectProperty(e.format)})}const KX=t=>t===id||t===va,CS=(t,e,i)=>Hi(t)?ske(t.signal,e,i):t===F_||t===va?e:i,rn=(t,e,i)=>Hi(t)?ike(t.signal,e,i):KX(t)?e:i,oa=(t,e,i)=>Hi(t)?nke(t.signal,e,i):KX(t)?i:e,JX=(t,e,i)=>Hi(t)?rke(t.signal,e,i):t===va?{value:e}:{value:i},tke=(t,e,i)=>Hi(t)?ake(t.signal,e,i):t===M_?{value:e}:{value:i},ike=(t,e,i)=>QX(`${t} === '${va}' || ${t} === '${id}'`,e,i),nke=(t,e,i)=>QX(`${t} !== '${va}' && ${t} !== '${id}'`,e,i),ske=(t,e,i)=>iR(`${t} === '${F_}' || ${t} === '${va}'`,e,i),rke=(t,e,i)=>iR(`${t} === '${va}'`,e,i),ake=(t,e,i)=>iR(`${t} === '${M_}'`,e,i),QX=(t,e,i)=>(e=e!=null?sn(e):e,i=i!=null?sn(i):i,L$(e)&&L$(i)?(e=e?e.signal||ve(e.value):null,i=i?i.signal||ve(i.value):null,{signal:`${t} ? (${e}) : (${i})`}):[yt({test:t},e)].concat(i||[])),L$=t=>t==null||Object.keys(t).length===1,iR=(t,e,i)=>({signal:`${t} ? (${$h(e)}) : (${$h(i)})`}),oke=(t,e,i,n,s)=>({signal:(n!=null?`${t} === '${F_}' ? (${$h(n)}) : `:"")+(i!=null?`${t} === '${id}' ? (${$h(i)}) : `:"")+(s!=null?`${t} === '${M_}' ? (${$h(s)}) : `:"")+(e!=null?`${t} === '${va}' ? (${$h(e)}) : `:"")+"(null)"}),$h=t=>Hi(t)?t.signal:t==null?null:ve(t),lke=(t,e)=>e===0?0:Hi(t)?{signal:`(${t.signal}) * ${e}`}:{value:t*e},sp=(t,e)=>{const i=t.signal;return i&&i.endsWith("(null)")?{signal:i.slice(0,-6)+e.signal}:t};function th(t,e,i,n){let s;if(e&&Pe(e,t))return e[t];if(Pe(i,t))return i[t];if(t.startsWith("title")){switch(t){case"titleColor":s="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":s=t[5].toLowerCase()+t.slice(6)}return n[XC][s]}else if(t.startsWith("label")){switch(t){case"labelColor":s="fill";break;case"labelFont":case"labelFontSize":s=t[5].toLowerCase()+t.slice(6)}return n[dw][s]}return null}function D$(t){const e={};for(const i of t)if(i)for(const n in i)e[n]=1;return Object.keys(e)}function cke(t,e){var i=e.config,n=i.style,s=i.axis,a=e.scaleType(t.scale)==="band"&&i.axisBand,c=t.orient,d,f,u;if(Hi(c)){const g=D$([i.axisX,i.axisY]),w=D$([i.axisTop,i.axisBottom,i.axisLeft,i.axisRight]);d={};for(u of g)d[u]=rn(c,th(u,i.axisX,s,n),th(u,i.axisY,s,n));f={};for(u of w)f[u]=oke(c.signal,th(u,i.axisTop,s,n),th(u,i.axisBottom,s,n),th(u,i.axisLeft,s,n),th(u,i.axisRight,s,n))}else d=c===va||c===id?i.axisX:i.axisY,f=i["axis"+c[0].toUpperCase()+c.slice(1)];return d||f||a?yt({},s,d,f,a):s}function dke(t,e,i,n){const s=Ps(t,e),a=t.orient;let c,d;const f={enter:c={opacity:Lt},update:d={opacity:Sr},exit:{opacity:Lt}};mn(f,{stroke:s("domainColor"),strokeCap:s("domainCap"),strokeDash:s("domainDash"),strokeDashOffset:s("domainDashOffset"),strokeWidth:s("domainWidth"),strokeOpacity:s("domainOpacity")});const u=P$(t,0),o=P$(t,1);return c.x=d.x=rn(a,u,Lt),c.x2=d.x2=rn(a,o),c.y=d.y=oa(a,u,Lt),c.y2=d.y2=oa(a,o),ar({type:JC,role:Nxe,from:n,encode:f},i)}function P$(t,e){return{scale:t.scale,range:e}}function fke(t,e,i,n,s){const a=Ps(t,e),c=t.orient,d=t.gridScale,f=CS(c,1,-1),u=uke(t.offset,f);let o,g,w;const m={enter:o={opacity:Lt},update:w={opacity:Sr},exit:g={opacity:Lt}};mn(m,{stroke:a("gridColor"),strokeCap:a("gridCap"),strokeDash:a("gridDash"),strokeDashOffset:a("gridDashOffset"),strokeOpacity:a("gridOpacity"),strokeWidth:a("gridWidth")});const l={scale:t.scale,field:Er,band:s.band,extra:s.extra,offset:s.offset,round:a("tickRound")},T=rn(c,{signal:"height"},{signal:"width"}),b=d?{scale:d,range:0,mult:f,offset:u}:{value:0,offset:u},S=d?{scale:d,range:1,mult:f,offset:u}:yt(T,{mult:f,offset:u});return o.x=w.x=rn(c,l,b),o.y=w.y=oa(c,l,b),o.x2=w.x2=oa(c,S),o.y2=w.y2=rn(c,S),g.x=rn(c,l),g.y=oa(c,l),ar({type:JC,role:Cxe,key:Er,from:n,encode:m},i)}function uke(t,e){if(e!==1)if(!Me(t))t=Hi(e)?{signal:`(${e.signal}) * (${t||0})`}:e*(t||0);else{let i=t=yt({},t);for(;i.mult!=null;)if(Me(i.mult))i=i.mult=yt({},i.mult);else return i.mult=Hi(e)?{signal:`(${i.mult}) * (${e.signal})`}:i.mult*e,t;i.mult=e}return t}function hke(t,e,i,n,s,a){const c=Ps(t,e),d=t.orient,f=CS(d,-1,1);let u,o,g;const w={enter:u={opacity:Lt},update:g={opacity:Sr},exit:o={opacity:Lt}};mn(w,{stroke:c("tickColor"),strokeCap:c("tickCap"),strokeDash:c("tickDash"),strokeDashOffset:c("tickDashOffset"),strokeOpacity:c("tickOpacity"),strokeWidth:c("tickWidth")});const m=sn(s);m.mult=f;const l={scale:t.scale,field:Er,band:a.band,extra:a.extra,offset:a.offset,round:c("tickRound")};return g.y=u.y=rn(d,Lt,l),g.y2=u.y2=rn(d,m),o.x=rn(d,l),g.x=u.x=oa(d,Lt,l),g.x2=u.x2=oa(d,m),o.y=oa(d,l),ar({type:JC,role:Lxe,key:Er,from:n,encode:w},i)}function QB(t,e,i,n,s){return{signal:'flush(range("'+t+'"), scale("'+t+'", datum.value), '+e+","+i+","+n+","+s+")"}}function pke(t,e,i,n,s,a){const c=Ps(t,e),d=t.orient,f=t.scale,u=CS(d,-1,1),o=Rf(c("labelFlush")),g=Rf(c("labelFlushOffset")),w=c("labelAlign"),m=c("labelBaseline");let l=o===0||!!o,T;const b=sn(s);b.mult=u,b.offset=sn(c("labelPadding")||0),b.offset.mult=u;const S={scale:f,field:Er,band:.5,offset:VX(a.offset,c("labelOffset"))},x=rn(d,l?QB(f,o,'"left"','"right"','"center"'):{value:"center"},tke(d,"left","right")),B=rn(d,JX(d,"bottom","top"),l?QB(f,o,'"top"','"bottom"','"middle"'):{value:"middle"}),F=QB(f,o,`-(${g})`,g,0);l=l&&g;const I={opacity:Lt,x:rn(d,S,b),y:oa(d,S,b)},A={enter:I,update:T={opacity:Sr,text:{field:YC},x:I.x,y:I.y,align:x,baseline:B},exit:{opacity:Lt,x:I.x,y:I.y}};mn(A,{dx:!w&&l?rn(d,F):null,dy:!m&&l?oa(d,F):null}),mn(A,{angle:c("labelAngle"),fill:c("labelColor"),fillOpacity:c("labelOpacity"),font:c("labelFont"),fontSize:c("labelFontSize"),fontWeight:c("labelFontWeight"),fontStyle:c("labelFontStyle"),limit:c("labelLimit"),lineHeight:c("labelLineHeight")},{align:w,baseline:m});const O=c("labelBound");let R=c("labelOverlap");return R=R||O?{separation:c("labelSeparation"),method:R,order:"datum.index",bound:O?{scale:f,orient:d,tolerance:O}:null}:void 0,T.align!==x&&(T.align=sp(T.align,x)),T.baseline!==B&&(T.baseline=sp(T.baseline,B)),ar({type:Lu,role:Rxe,style:dw,key:Er,from:n,encode:A,overlap:R},i)}function _ke(t,e,i,n){const s=Ps(t,e),a=t.orient,c=CS(a,-1,1);let d,f;const u={enter:d={opacity:Lt,anchor:sn(s("titleAnchor",null)),align:{signal:QC}},update:f=yt({},d,{opacity:Sr,text:sn(t.title)}),exit:{opacity:Lt}},o={signal:`lerp(range("${t.scale}"), ${AS(0,1,.5)})`};return f.x=rn(a,o),f.y=oa(a,o),d.angle=rn(a,Lt,lke(c,90)),d.baseline=rn(a,JX(a,id,va),{value:id}),f.angle=d.angle,f.baseline=d.baseline,mn(u,{fill:s("titleColor"),fillOpacity:s("titleOpacity"),font:s("titleFont"),fontSize:s("titleFontSize"),fontStyle:s("titleFontStyle"),fontWeight:s("titleFontWeight"),limit:s("titleLimit"),lineHeight:s("titleLineHeight")},{align:s("titleAlign"),angle:s("titleAngle"),baseline:s("titleBaseline")}),yke(s,a,u,i),u.update.align=sp(u.update.align,d.align),u.update.angle=sp(u.update.angle,d.angle),u.update.baseline=sp(u.update.baseline,d.baseline),ar({type:Lu,role:Dxe,style:XC,from:n,encode:u},i)}function yke(t,e,i,n){const s=(d,f)=>d!=null?(i.update[f]=sp(sn(d),i.update[f]),!1):!kh(f,n),a=s(t("titleX"),"x"),c=s(t("titleY"),"y");i.enter.auto=c===a?sn(c):rn(e,sn(c),sn(a))}function gke(t,e){const i=cke(t,e),n=t.encode||{},s=n.axis||{},a=s.name||void 0,c=s.interactive,d=s.style,f=Ps(t,i),u=hIe(f),o={scale:t.scale,ticks:!!f("ticks"),labels:!!f("labels"),grid:!!f("grid"),domain:!!f("domain"),title:t.title!=null},g=Re(e.add(Ta({},[o]))),w=Re(e.add(mBe({scale:e.scaleRef(t.scale),extra:e.property(u.extra),count:e.objectProperty(t.tickCount),values:e.objectProperty(t.values),minstep:e.property(t.tickMinStep),formatType:e.property(t.formatType),formatSpecifier:e.property(t.format)}))),m=[];let l;return o.grid&&m.push(fke(t,i,n.grid,w,u)),o.ticks&&(l=f("tickSize"),m.push(hke(t,i,n.ticks,w,l,u))),o.labels&&(l=o.ticks?l:0,m.push(pke(t,i,n.labels,w,l,u))),o.domain&&m.push(dke(t,i,n.domain,g)),o.title&&m.push(_ke(t,i,n.title,g)),NS(sm({role:Oxe,from:g,encode:k_(mke(f,t),s,fw),marks:m,aria:f("aria"),description:f("description"),zindex:f("zindex"),name:a,interactive:c,style:d}),e)}function mke(t,e){const i={enter:{},update:{}};return mn(i,{orient:t("orient"),offset:t("offset")||0,position:Wr(e.position,0),titlePadding:t("titlePadding"),minExtent:t("minExtent"),maxExtent:t("maxExtent"),range:{signal:`abs(span(range("${e.scale}")))`},translate:t("translate"),format:e.format,formatType:e.formatType}),i}function ZX(t,e,i){const n=ke(t.signals),s=ke(t.scales);return i||n.forEach(a=>AX(a,e)),ke(t.projections).forEach(a=>KBe(a,e)),s.forEach(a=>PBe(a,e)),ke(t.data).forEach(a=>ZIe(a,e)),s.forEach(a=>$Be(a,e)),(i||n).forEach(a=>gBe(a,e)),ke(t.axes).forEach(a=>gke(a,e)),ke(t.marks).forEach(a=>NS(a,e)),ke(t.legends).forEach(a=>zIe(a,e)),t.title&&YIe(t.title,e),e.parseLambdas(),e}const wke=t=>k_({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},t);function bke(t,e){const i=e.config,n=Re(e.root=e.add(Cv())),s=Tke(t,i);s.forEach(u=>AX(u,e)),e.description=t.description||i.description,e.eventConfig=i.events,e.legends=e.objectProperty(i.legend&&i.legend.layout),e.locale=i.locale;const a=e.add(Ta()),c=e.add(CX(MX(wke(t.encode),MS,GC,t.style,e,{pulse:Re(a)}))),d=e.add(DX({layout:e.objectProperty(t.layout),legends:e.legends,autosize:e.signalRef("autosize"),mark:n,pulse:Re(c)}));e.operators.pop(),e.pushState(Re(c),Re(d),null),ZX(t,e,s),e.operators.push(d);let f=e.add(NX({mark:n,pulse:Re(d)}));return f=e.add(LX({pulse:Re(f)})),f=e.add(Ru({pulse:Re(f)})),e.addData("root",new nu(e,a,a,f)),e}function ay(t,e){return e&&e.signal?{name:t,update:e.signal}:{name:t,value:e}}function Tke(t,e){const i=c=>Wr(t[c],e[c]),n=[ay("background",i("background")),ay("autosize",Fxe(i("autosize"))),ay("padding",Axe(i("padding"))),ay("width",i("width")||0),ay("height",i("height")||0)],s=n.reduce((c,d)=>(c[d.name]=d,c),{}),a={};return ke(t.signals).forEach(c=>{Pe(s,c.name)?c=yt(s[c.name],c):n.push(c),a[c.name]=c}),ke(e.signals).forEach(c=>{!Pe(a,c.name)&&!Pe(s,c.name)&&n.push(c)}),n}function eK(t,e){this.config=t||{},this.options=e||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function $$(t){this.config=t.config,this.options=t.options,this.legends=t.legends,this.field=Object.create(t.field),this.signals=Object.create(t.signals),this.lambdas=Object.create(t.lambdas),this.scales=Object.create(t.scales),this.events=Object.create(t.events),this.data=Object.create(t.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++t._nextsub[0],this._nextsub=t._nextsub,this._parent=t._parent.slice(),this._encode=t._encode.slice(),this._lookup=t._lookup.slice(),this._markpath=t._markpath}eK.prototype=$$.prototype={parse(t){return ZX(t,this)},fork(){return new $$(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(t){return this.operators.push(t),t.id=this.id(),t.refs&&(t.refs.forEach(e=>{e.$ref=t.id}),t.refs=null),t},proxy(t){const e=t instanceof OF?Re(t):t;return this.add(OBe({value:e}))},addStream(t){return this.streams.push(t),t.id=this.id(),t},addUpdate(t){return this.updates.push(t),t},finish(){let t,e;this.root&&(this.root.root=!0);for(t in this.signals)this.signals[t].signal=t;for(t in this.scales)this.scales[t].scale=t;function i(n,s,a){let c,d;n&&(c=n.data||(n.data={}),d=c[s]||(c[s]=[]),d.push(a))}for(t in this.data){e=this.data[t],i(e.input,t,"input"),i(e.output,t,"output"),i(e.values,t,"values");for(const n in e.index)i(e.index[n],t,"index:"+n)}return this},pushState(t,e,i){this._encode.push(Re(this.add(Ru({pulse:t})))),this._parent.push(e),this._lookup.push(i?Re(this.proxy(i)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return At(this._parent)},encode(){return At(this._encode)},lookup(){return At(this._lookup)},markpath(){const t=this._markpath;return++t[t.length-1]},fieldRef(t,e){if(Ie(t))return im(t,e);t.signal||de("Unsupported field reference: "+ve(t));const i=t.signal;let n=this.field[i];if(!n){const s={name:this.signalRef(i)};e&&(s.as=e),this.field[i]=n=Re(this.add(vBe(s)))}return n},compareRef(t){let e=!1;const i=a=>Hi(a)?(e=!0,this.signalRef(a.signal)):oBe(a)?(e=!0,this.exprRef(a.expr)):a,n=ke(t.field).map(i),s=ke(t.order).map(i);return e?Re(this.add(x$({fields:n,orders:s}))):E$(n,s)},keyRef(t,e){let i=!1;const n=a=>Hi(a)?(i=!0,Re(s[a.signal])):a,s=this.signals;return t=ke(t).map(n),i?Re(this.add(EBe({fields:t,flat:e}))):nBe(t,e)},sortRef(t){if(!t)return t;const e=kS(t.op,t.field),i=t.order||sBe;return i.signal?Re(this.add(x$({fields:e,orders:this.signalRef(i.signal)}))):E$(e,i)},event(t,e){const i=t+":"+e;if(!this.events[i]){const n=this.id();this.streams.push({id:n,source:t,type:e}),this.events[i]=n}return this.events[i]},hasOwnSignal(t){return Pe(this.signals,t)},addSignal(t,e){this.hasOwnSignal(t)&&de("Duplicate signal name: "+ve(t));const i=e instanceof OF?e:this.add(Cv(e));return this.signals[t]=i},getSignal(t){return this.signals[t]||de("Unrecognized signal name: "+ve(t)),this.signals[t]},signalRef(t){return this.signals[t]?Re(this.signals[t]):(Pe(this.lambdas,t)||(this.lambdas[t]=this.add(Cv(null))),Re(this.lambdas[t]))},parseLambdas(){const t=Object.keys(this.lambdas);for(let e=0,i=t.length;e<i;++e){const n=t[e],s=Io(n,this),a=this.lambdas[n];a.params=s.$params,a.update=s.$expr}},property(t){return t&&t.signal?this.signalRef(t.signal):t},objectProperty(t){return!t||!Me(t)?t:this.signalRef(t.signal||nR(t))},exprRef(t,e){const i={expr:Io(t,this)};return e&&(i.expr.$name=e),Re(this.add(bBe(i)))},addBinding(t,e){this.bindings||de("Nested signals do not support binding: "+ve(t)),this.bindings.push(yt({signal:t},e))},addScaleProj(t,e){Pe(this.scales,t)&&de("Duplicate scale or projection name: "+ve(t)),this.scales[t]=this.add(e)},addScale(t,e){this.addScaleProj(t,CBe(e))},addProjection(t,e){this.addScaleProj(t,ABe(e))},getScale(t){return this.scales[t]||de("Unrecognized scale name: "+ve(t)),this.scales[t]},scaleRef(t){return Re(this.getScale(t))},scaleType(t){return this.getScale(t).params.type},projectionRef(t){return this.scaleRef(t)},projectionType(t){return this.scaleType(t)},addData(t,e){return Pe(this.data,t)&&de("Duplicate data set name: "+ve(t)),this.data[t]=e},getData(t){return this.data[t]||de("Undefined data set name: "+ve(t)),this.data[t]},addDataPipeline(t,e){return Pe(this.data,t)&&de("Duplicate data set name: "+ve(t)),this.addData(t,nu.fromEntries(this,e))}};function nR(t){return(ue(t)?vke:Eke)(t)}function vke(t){const e=t.length;let i="[";for(let n=0;n<e;++n){const s=t[n];i+=(n>0?",":"")+(Me(s)?s.signal||nR(s):ve(s))}return i+"]"}function Eke(t){let e="{",i=0,n,s;for(n in t)s=t[n],e+=(++i>1?",":"")+ve(n)+":"+(Me(s)?s.signal||nR(s):ve(s));return e+"}"}function Ske(){const t="sans-serif",n="#4c78a8",s="#000",a="#888",c="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:n},area:{fill:n},image:null,line:{stroke:n,strokeWidth:2},path:{stroke:n},rect:{fill:n},rule:{stroke:s},shape:{stroke:n},symbol:{fill:n,size:64},text:{fill:s,font:t,fontSize:11},trail:{fill:n,size:2},style:{"guide-label":{fill:s,font:t,fontSize:10},"guide-title":{fill:s,font:t,fontSize:11,fontWeight:"bold"},"group-title":{fill:s,font:t,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:s,font:t,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:c},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:a,grid:!1,gridWidth:1,gridColor:c,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:a,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:c,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:a,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function xke(t,e,i){return Me(t)||de("Input Vega specification must be an object."),e=T_(Ske(),e,t.config),bke(t,new eK(e,i)).toRuntime()}var Bke="5.25.0";yt(jp,Ege,d0e,j0e,wTe,BTe,ZTe,OTe,t1e,s1e,p1e,T1e);const Ike=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Di,CanvasHandler:rw,CanvasRenderer:vv,DATE:As,DAY:Bn,DAYOFYEAR:Bo,Dataflow:np,Debug:WG,Error:fO,EventStream:tS,Gradient:KW,GroupItem:cS,HOURS:nr,Handler:ed,Info:VG,Item:lS,MILLISECONDS:ha,MINUTES:sr,MONTH:An,Marks:rr,MultiPulse:AO,None:GG,Operator:oi,Parameters:eS,Pulse:Nc,QUARTER:Ms,RenderType:xc,Renderer:Do,ResourceLoader:mN,SECONDS:Or,SVGHandler:LN,SVGRenderer:jN,SVGStringRenderer:qN,Scenegraph:CN,TIME_UNITS:EO,Transform:ae,View:mX,WEEK:Gi,Warn:uO,YEAR:yn,accessor:Ds,accessorFields:Mn,accessorName:Ai,array:ke,ascending:YE,bandwidthNRD:_A,bin:yA,bootstrapCI:L7,boundClip:GH,boundContext:tw,boundItem:rF,boundMark:_H,boundStroke:ql,changeset:Ou,clampRange:nV,codegenExpression:WY,compare:gO,constant:Ln,cumulativeLogNormal:vA,cumulativeNormal:DE,cumulativeUniform:BA,dayofyear:_V,debounce:mO,defaultLocale:BO,definition:QV,densityLogNormal:TA,densityNormal:gA,densityUniform:xA,domChild:_s,domClear:Qr,domCreate:Ec,domFind:RN,dotbin:D7,error:de,expressionFunction:$i,extend:yt,extent:xo,extentIndex:sV,falsy:oc,fastmap:E_,field:Fs,flush:rV,font:pS,fontFamily:sw,fontSize:Lo,format:aT,formatLocale:fv,formats:FO,hasOwnProperty:Pe,id:Gm,identity:Rn,inferType:zV,inferTypes:jV,ingest:Gt,inherits:Ee,inrange:Lh,interpolate:dN,interpolateColors:aS,interpolateRange:LW,intersect:UH,intersectBoxLine:Dh,intersectPath:wN,intersectPoint:bN,intersectRule:sH,isArray:ue,isBoolean:vd,isDate:Oc,isFunction:gt,isIterable:aV,isNumber:ii,isObject:Me,isRegExp:oV,isString:Ie,isTuple:QE,key:wO,lerp:lV,lineHeight:Qc,loader:KE,locale:$V,logger:hO,lruCache:cV,markup:zN,merge:dV,mergeConfig:T_,multiLineOffset:AN,one:b_,pad:fV,panLinear:JG,panLog:QG,panPow:ZG,panSymlog:eV,parse:xke,parseExpression:MC,parseSelector:Sd,path:bE,pathCurves:_N,pathEqual:VH,pathParse:Wp,pathRectangle:ZW,pathRender:Hg,pathSymbols:QW,pathTrail:eH,peek:At,point:yS,projection:tC,quantileLogNormal:EA,quantileNormal:PE,quantileUniform:IA,quantiles:hA,quantizeInterpolator:DW,quarter:tV,quartiles:pA,get random(){return Fr},randomInteger:Wde,randomKDE:wA,randomLCG:Vde,randomLogNormal:$7,randomMixture:U7,randomNormal:mA,randomUniform:z7,read:VV,regressionConstant:kA,regressionExp:q7,regressionLinear:FA,regressionLoess:W7,regressionLog:j7,regressionPoly:V7,regressionPow:G7,regressionQuad:MA,renderModule:gS,repeat:Dy,resetDefaultLocale:D_e,resetSVGClipId:iH,resetSVGDefIds:kbe,responseType:GV,runtimeContext:rX,sampleCurve:UE,sampleLogNormal:bA,sampleNormal:LE,sampleUniform:SA,scale:$t,sceneEqual:GN,sceneFromJSON:gH,scenePickVisit:yv,sceneToJSON:yH,sceneVisit:pa,sceneZOrder:TN,scheme:fN,serializeXML:OH,setRandom:qde,span:Vm,splitAccessPath:Ro,stringValue:ve,textMetrics:aa,timeBin:OV,timeFloor:vV,timeFormatLocale:Gg,timeInterval:S_,timeOffset:xV,timeSequence:kV,timeUnitSpecifier:pV,timeUnits:SO,toBoolean:bO,toDate:TO,toNumber:In,toSet:ua,toString:vO,transform:ZV,transforms:jp,truncate:uV,truthy:Ar,tupleid:Le,typeParsers:Xk,utcFloor:EV,utcInterval:x_,utcOffset:BV,utcSequence:FV,utcdayofyear:mV,utcquarter:iV,utcweek:wV,version:Bke,visitArray:_c,week:yV,writeConfig:v_,zero:bc,zoomLinear:pO,zoomLog:_O,zoomPow:dv,zoomSymlog:yO},Symbol.toStringTag,{value:"Module"}));function kke(t,e,i){let n;e.x2&&(e.x?(i&&t.x>t.x2&&(n=t.x,t.x=t.x2,t.x2=n),t.width=t.x2-t.x):t.x=t.x2-(t.width||0)),e.xc&&(t.x=t.xc-(t.width||0)/2),e.y2&&(e.y?(i&&t.y>t.y2&&(n=t.y,t.y=t.y2,t.y2=n),t.height=t.y2-t.y):t.y=t.y2-(t.height||0)),e.yc&&(t.y=t.yc-(t.height||0)/2)}var Fke={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},Mke={"*":(t,e)=>t*e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,">":(t,e)=>t>e,"<":(t,e)=>t<e,"<=":(t,e)=>t<=e,">=":(t,e)=>t>=e,"==":(t,e)=>t==e,"!=":(t,e)=>t!=e,"===":(t,e)=>t===e,"!==":(t,e)=>t!==e,"&":(t,e)=>t&e,"|":(t,e)=>t|e,"^":(t,e)=>t^e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e},Ake={"+":t=>+t,"-":t=>-t,"~":t=>~t,"!":t=>!t};const Oke=Array.prototype.slice,Pd=(t,e,i)=>{const n=i?i(e[0]):e[0];return n[t].apply(n,Oke.call(e,1))},Nke=(t,e,i,n,s,a,c)=>new Date(t,e||0,i??1,n||0,s||0,a||0,c||0);var Cke={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(t,e,i)=>Math.max(e,Math.min(i,t)),now:Date.now,utc:Date.UTC,datetime:Nke,date:t=>new Date(t).getDate(),day:t=>new Date(t).getDay(),year:t=>new Date(t).getFullYear(),month:t=>new Date(t).getMonth(),hours:t=>new Date(t).getHours(),minutes:t=>new Date(t).getMinutes(),seconds:t=>new Date(t).getSeconds(),milliseconds:t=>new Date(t).getMilliseconds(),time:t=>new Date(t).getTime(),timezoneoffset:t=>new Date(t).getTimezoneOffset(),utcdate:t=>new Date(t).getUTCDate(),utcday:t=>new Date(t).getUTCDay(),utcyear:t=>new Date(t).getUTCFullYear(),utcmonth:t=>new Date(t).getUTCMonth(),utchours:t=>new Date(t).getUTCHours(),utcminutes:t=>new Date(t).getUTCMinutes(),utcseconds:t=>new Date(t).getUTCSeconds(),utcmilliseconds:t=>new Date(t).getUTCMilliseconds(),length:t=>t.length,join:function(){return Pd("join",arguments)},indexof:function(){return Pd("indexOf",arguments)},lastindexof:function(){return Pd("lastIndexOf",arguments)},slice:function(){return Pd("slice",arguments)},reverse:t=>t.slice().reverse(),parseFloat,parseInt,upper:t=>String(t).toUpperCase(),lower:t=>String(t).toLowerCase(),substring:function(){return Pd("substring",arguments,String)},split:function(){return Pd("split",arguments,String)},replace:function(){return Pd("replace",arguments,String)},trim:t=>String(t).trim(),regexp:RegExp,test:(t,e)=>RegExp(t).test(e)};const Rke=["view","item","group","xy","x","y"],$F=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&$F.add(setImmediate);const Lke={Literal:(t,e)=>e.value,Identifier:(t,e)=>{const i=e.name;return t.memberDepth>0?i:i==="datum"?t.datum:i==="event"?t.event:i==="item"?t.item:Fke[i]||t.params["$"+i]},MemberExpression:(t,e)=>{const i=!e.computed,n=t(e.object);i&&(t.memberDepth+=1);const s=t(e.property);if(i&&(t.memberDepth-=1),$F.has(n[s])){console.error(`Prevented interpretation of member "${s}" which could lead to insecure code execution`);return}return n[s]},CallExpression:(t,e)=>{const i=e.arguments;let n=e.callee.name;return n.startsWith("_")&&(n=n.slice(1)),n==="if"?t(i[0])?t(i[1]):t(i[2]):(t.fn[n]||Cke[n]).apply(t.fn,i.map(t))},ArrayExpression:(t,e)=>e.elements.map(t),BinaryExpression:(t,e)=>Mke[e.operator](t(e.left),t(e.right)),UnaryExpression:(t,e)=>Ake[e.operator](t(e.argument)),ConditionalExpression:(t,e)=>t(e.test)?t(e.consequent):t(e.alternate),LogicalExpression:(t,e)=>e.operator==="&&"?t(e.left)&&t(e.right):t(e.left)||t(e.right),ObjectExpression:(t,e)=>e.properties.reduce((i,n)=>{t.memberDepth+=1;const s=t(n.key);return t.memberDepth-=1,$F.has(t(n.value))?console.error(`Prevented interpretation of property "${s}" which could lead to insecure code execution`):i[s]=t(n.value),i},{})};function oy(t,e,i,n,s,a){const c=d=>Lke[d.type](c,d);return c.memberDepth=0,c.fn=Object.create(e),c.params=i,c.datum=n,c.event=s,c.item=a,Rke.forEach(d=>c.fn[d]=function(){return s.vega[d](...arguments)}),c(t)}var Dke={operator(t,e){const i=e.ast,n=t.functions;return s=>oy(i,n,s)},parameter(t,e){const i=e.ast,n=t.functions;return(s,a)=>oy(i,n,a,s)},event(t,e){const i=e.ast,n=t.functions;return s=>oy(i,n,void 0,void 0,s)},handler(t,e){const i=e.ast,n=t.functions;return(s,a)=>{const c=a.item&&a.item.datum;return oy(i,n,s,c,a)}},encode(t,e){const{marktype:i,channels:n}=e,s=t.functions,a=i==="group"||i==="image"||i==="rect";return(c,d)=>{const f=c.datum;let u=0,o;for(const g in n)o=oy(n[g].ast,s,d,f,void 0,c),c[g]!==o&&(c[g]=o,u=1);return i!=="rule"&&kke(c,n,a),u}}};const Pke="vega-lite",$ke='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',Uke="5.9.0",zke=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],jke="https://vega.github.io/vega-lite/",qke="Vega-Lite is a concise high-level language for interactive visualization.",Gke=["vega","chart","visualization"],Vke="build/vega-lite.js",Wke="build/vega-lite.min.js",Hke="build/vega-lite.min.js",Yke="build/src/index",Xke="build/src/index.d.ts",Kke={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},Jke=["bin","build","src","vega-lite*","tsconfig.json"],Qke={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",jest:"NODE_OPTIONS=--experimental-vm-modules npx jest",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk --experimental-vm-modules ./node_modules/.bin/jest --runInBand test","test:runtime":"NODE_OPTIONS=--experimental-vm-modules TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"NODE_OPTIONS=--experimental-vm-modules TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},Zke={type:"git",url:"https://github.com/vega/vega-lite.git"},eFe="BSD-3-Clause",tFe={url:"https://github.com/vega/vega-lite/issues"},iFe={"@babel/core":"^7.21.4","@babel/preset-env":"^7.21.4","@babel/preset-typescript":"^7.21.4","@release-it/conventional-changelog":"^5.1.1","@rollup/plugin-alias":"^5.0.0","@rollup/plugin-babel":"^6.0.3","@rollup/plugin-commonjs":"^24.1.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.2","@rollup/plugin-terser":"^0.4.1","@types/chai":"^4.3.4","@types/d3":"^7.4.0","@types/jest":"^27.4.1","@types/pako":"^2.0.0","@typescript-eslint/eslint-plugin":"^5.59.1","@typescript-eslint/parser":"^5.59.1","ajv-formats":"^2.1.1",ajv:"^8.12.0",chai:"^4.3.7",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^2.2.2",d3:"^7.8.4","del-cli":"^5.0.0","eslint-config-prettier":"^8.8.0","eslint-plugin-jest":"^27.2.1","eslint-plugin-prettier":"^4.2.1",eslint:"^8.39.0","highlight.js":"^11.7.0","jest-dev-server":"^6.1.1",jest:"^27.5.1",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^2.8.8",puppeteer:"^15.0.0","release-it":"^15.10.1","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-sourcemaps":"^0.6.3",rollup:"^3.21.0",serve:"^14.2.0",terser:"^5.17.1","ts-jest":"^29.1.0","ts-json-schema-generator":"^1.2.0",typescript:"~4.9.5","vega-cli":"^5.25.0","vega-datasets":"^2.7.0","vega-embed":"^6.22.1","vega-tooltip":"^0.32.0","yaml-front-matter":"^4.1.1"},nFe={"@types/clone":"~2.1.1",clone:"~2.1.2","fast-deep-equal":"~3.1.3","fast-json-stable-stringify":"~2.1.0","json-stringify-pretty-compact":"~3.0.0",tslib:"~2.5.0","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.1"},sFe={vega:"^5.24.0"},rFe={node:">=16"},aFe={name:Pke,author:$ke,version:Uke,collaborators:zke,homepage:jke,description:qke,keywords:Gke,main:Vke,unpkg:Wke,jsdelivr:Hke,module:Yke,types:Xke,bin:Kke,files:Jke,scripts:Qke,repository:Zke,license:eFe,bugs:tFe,devDependencies:iFe,dependencies:nFe,peerDependencies:sFe,engines:rFe};var tK={exports:{}};(function(t){var e=function(){function i(w,m){return m!=null&&w instanceof m}var n;try{n=Map}catch{n=function(){}}var s;try{s=Set}catch{s=function(){}}var a;try{a=Promise}catch{a=function(){}}function c(w,m,l,T,b){typeof m=="object"&&(l=m.depth,T=m.prototype,b=m.includeNonEnumerable,m=m.circular);var S=[],x=[],B=typeof Buffer<"u";typeof m>"u"&&(m=!0),typeof l>"u"&&(l=1/0);function F(I,A){if(I===null)return null;if(A===0)return I;var O,R;if(typeof I!="object")return I;if(i(I,n))O=new n;else if(i(I,s))O=new s;else if(i(I,a))O=new a(function(J,G){I.then(function(le){J(F(le,A-1))},function(le){G(F(le,A-1))})});else if(c.__isArray(I))O=[];else if(c.__isRegExp(I))O=new RegExp(I.source,g(I)),I.lastIndex&&(O.lastIndex=I.lastIndex);else if(c.__isDate(I))O=new Date(I.getTime());else{if(B&&Buffer.isBuffer(I))return Buffer.allocUnsafe?O=Buffer.allocUnsafe(I.length):O=new Buffer(I.length),I.copy(O),O;i(I,Error)?O=Object.create(I):typeof T>"u"?(R=Object.getPrototypeOf(I),O=Object.create(R)):(O=Object.create(T),R=T)}if(m){var D=S.indexOf(I);if(D!=-1)return x[D];S.push(I),x.push(O)}i(I,n)&&I.forEach(function(J,G){var le=F(G,A-1),pe=F(J,A-1);O.set(le,pe)}),i(I,s)&&I.forEach(function(J){var G=F(J,A-1);O.add(G)});for(var P in I){var U;R&&(U=Object.getOwnPropertyDescriptor(R,P)),!(U&&U.set==null)&&(O[P]=F(I[P],A-1))}if(Object.getOwnPropertySymbols)for(var Y=Object.getOwnPropertySymbols(I),P=0;P<Y.length;P++){var z=Y[P],W=Object.getOwnPropertyDescriptor(I,z);W&&!W.enumerable&&!b||(O[z]=F(I[z],A-1),W.enumerable||Object.defineProperty(O,z,{enumerable:!1}))}if(b)for(var V=Object.getOwnPropertyNames(I),P=0;P<V.length;P++){var H=V[P],W=Object.getOwnPropertyDescriptor(I,H);W&&W.enumerable||(O[H]=F(I[H],A-1),Object.defineProperty(O,H,{enumerable:!1}))}return O}return F(w,l)}c.clonePrototype=function(m){if(m===null)return null;var l=function(){};return l.prototype=m,new l};function d(w){return Object.prototype.toString.call(w)}c.__objToStr=d;function f(w){return typeof w=="object"&&d(w)==="[object Date]"}c.__isDate=f;function u(w){return typeof w=="object"&&d(w)==="[object Array]"}c.__isArray=u;function o(w){return typeof w=="object"&&d(w)==="[object RegExp]"}c.__isRegExp=o;function g(w){var m="";return w.global&&(m+="g"),w.ignoreCase&&(m+="i"),w.multiline&&(m+="m"),m}return c.__getRegExpFlags=g,c}();t.exports&&(t.exports=e)})(tK);var oFe=tK.exports;const lFe=pd(oFe);var cFe=function t(e,i){if(e===i)return!0;if(e&&i&&typeof e=="object"&&typeof i=="object"){if(e.constructor!==i.constructor)return!1;var n,s,a;if(Array.isArray(e)){if(n=e.length,n!=i.length)return!1;for(s=n;s--!==0;)if(!t(e[s],i[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===i.source&&e.flags===i.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===i.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===i.toString();if(a=Object.keys(e),n=a.length,n!==Object.keys(i).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(i,a[s]))return!1;for(s=n;s--!==0;){var c=a[s];if(!t(e[c],i[c]))return!1}return!0}return e!==e&&i!==i};const iK=pd(cFe);var dFe=function(t,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var i=typeof e.cycles=="boolean"?e.cycles:!1,n=e.cmp&&function(a){return function(c){return function(d,f){var u={key:d,value:c[d]},o={key:f,value:c[f]};return a(u,o)}}}(e.cmp),s=[];return function a(c){if(c&&c.toJSON&&typeof c.toJSON=="function"&&(c=c.toJSON()),c!==void 0){if(typeof c=="number")return isFinite(c)?""+c:"null";if(typeof c!="object")return JSON.stringify(c);var d,f;if(Array.isArray(c)){for(f="[",d=0;d<c.length;d++)d&&(f+=","),f+=a(c[d])||"null";return f+"]"}if(c===null)return"null";if(s.indexOf(c)!==-1){if(i)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var u=s.push(c)-1,o=Object.keys(c).sort(n&&n(c));for(f="",d=0;d<o.length;d++){var g=o[d],w=a(c[g]);w&&(f&&(f+=","),f+=JSON.stringify(g)+":"+w)}return s.splice(u,1),"{"+f+"}"}}(t)};const sR=pd(dFe);function rR(t){return!!t.or}function aR(t){return!!t.and}function oR(t){return!!t.not}function xT(t,e){if(oR(t))xT(t.not,e);else if(aR(t))for(const i of t.and)xT(i,e);else if(rR(t))for(const i of t.or)xT(i,e);else e(t)}function rp(t,e){return oR(t)?{not:rp(t.not,e)}:aR(t)?{and:t.and.map(i=>rp(i,e))}:rR(t)?{or:t.or.map(i=>rp(i,e))}:e(t)}const so=iK,Qe=lFe;function nK(t){throw new Error(t)}function Qp(t,e){const i={};for(const n of e)Pe(t,n)&&(i[n]=t[n]);return i}function bs(t,e){const i={...t};for(const n of e)delete i[n];return i}Set.prototype.toJSON=function(){return`Set(${[...this].map(t=>sR(t)).join(",")})`};const ui=sR;function Ot(t){if(ii(t))return t;const e=Ie(t)?t:sR(t);if(e.length<250)return e;let i=0;for(let n=0;n<e.length;n++){const s=e.charCodeAt(n);i=(i<<5)-i+s,i=i&i}return i}function UF(t){return t===!1||t===null}function It(t,e){return t.includes(e)}function su(t,e){let i=0;for(const[n,s]of t.entries())if(e(s,n,i++))return!0;return!1}function lR(t,e){let i=0;for(const[n,s]of t.entries())if(!e(s,n,i++))return!1;return!0}function sK(t,...e){for(const i of e)fFe(t,i??{});return t}function fFe(t,e){for(const i of me(e))v_(t,i,e[i],!0)}function ro(t,e){const i=[],n={};let s;for(const a of t)s=e(a),!(s in n)&&(n[s]=1,i.push(a));return i}function uFe(t,e){const i=me(t),n=me(e);if(i.length!==n.length)return!1;for(const s of i)if(t[s]!==e[s])return!1;return!0}function rK(t,e){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function cR(t,e){for(const i of t)if(e.has(i))return!0;return!1}function zF(t){const e=new Set;for(const i of t){const s=Ro(i).map((c,d)=>d===0?c:`[${c}]`),a=s.map((c,d)=>s.slice(0,d+1).join(""));for(const c of a)e.add(c)}return e}function dR(t,e){return t===void 0||e===void 0?!0:cR(zF(t),zF(e))}function ti(t){return me(t).length===0}const me=Object.keys,gn=Object.values,nd=Object.entries;function rm(t){return t===!0||t===!1}function bi(t){const e=t.replace(/\W/g,"_");return(t.match(/^\d+/)?"_":"")+e}function fg(t,e){return oR(t)?`!(${fg(t.not,e)})`:aR(t)?`(${t.and.map(i=>fg(i,e)).join(") && (")})`:rR(t)?`(${t.or.map(i=>fg(i,e)).join(") || (")})`:e(t)}function Rv(t,e){if(e.length===0)return!0;const i=e.shift();return i in t&&Rv(t[i],e)&&delete t[i],ti(t)}function uw(t){return t.charAt(0).toUpperCase()+t.substr(1)}function fR(t,e="datum"){const i=Ro(t),n=[];for(let s=1;s<=i.length;s++){const a=`[${i.slice(0,s).map(ve).join("][")}]`;n.push(`${e}${a}`)}return n.join(" && ")}function aK(t,e="datum"){return`${e}[${ve(Ro(t).join("."))}]`}function hFe(t){return t.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Nr(t){return`${Ro(t).map(hFe).join("\\.")}`}function ru(t,e,i){return t.replace(new RegExp(e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),i)}function uR(t){return`${Ro(t).join(".")}`}function Zp(t){return t?Ro(t).length:0}function Pi(...t){for(const e of t)if(e!==void 0)return e}let oK=42;function lK(t){const e=++oK;return t?String(t)+e:e}function pFe(){oK=42}function cK(t){return dK(t)?t:`__${t}`}function dK(t){return t.startsWith("__")}function am(t){if(t!==void 0)return(t%360+360)%360}function RS(t){return ii(t)?!0:!isNaN(t)&&!isNaN(parseFloat(t))}const Sl="row",xl="column",LS="facet",Ti="x",ln="y",Ea="x2",$o="y2",xd="xOffset",A_="yOffset",Sa="radius",Wl="radius2",Lr="theta",Hl="theta2",xa="latitude",Ba="longitude",Ia="latitude2",Cr="longitude2",Os="color",Uo="fill",zo="stroke",Ns="shape",Yl="size",Du="angle",Xl="opacity",Bd="fillOpacity",Id="strokeOpacity",kd="strokeWidth",Fd="strokeDash",hw="text",pw="order",_w="detail",DS="key",au="tooltip",PS="href",$S="url",US="description",_Fe={x:1,y:1,x2:1,y2:1},fK={theta:1,theta2:1,radius:1,radius2:1};function uK(t){return t in fK}const hR={longitude:1,longitude2:1,latitude:1,latitude2:1};function hK(t){switch(t){case xa:return"y";case Ia:return"y2";case Ba:return"x";case Cr:return"x2"}}function pK(t){return t in hR}const yFe=me(hR),pR={..._Fe,...fK,...hR,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function ap(t){return t===Os||t===Uo||t===zo}const _K={row:1,column:1,facet:1},br=me(_K),_R={...pR,..._K},gFe=me(_R),{order:B6e,detail:I6e,tooltip:k6e,...mFe}=_R,{row:F6e,column:M6e,facet:A6e,...wFe}=mFe;function bFe(t){return!!wFe[t]}function yK(t){return!!_R[t]}const TFe=[Ea,$o,Ia,Cr,Hl,Wl];function gK(t){return Pu(t)!==t}function Pu(t){switch(t){case Ea:return Ti;case $o:return ln;case Ia:return xa;case Cr:return Ba;case Hl:return Lr;case Wl:return Sa}return t}function sd(t){if(uK(t))switch(t){case Lr:return"startAngle";case Hl:return"endAngle";case Sa:return"outerRadius";case Wl:return"innerRadius"}return t}function jo(t){switch(t){case Ti:return Ea;case ln:return $o;case xa:return Ia;case Ba:return Cr;case Lr:return Hl;case Sa:return Wl}}function Cs(t){switch(t){case Ti:case Ea:return"width";case ln:case $o:return"height"}}function mK(t){switch(t){case Ti:return"xOffset";case ln:return"yOffset";case Ea:return"x2Offset";case $o:return"y2Offset";case Lr:return"thetaOffset";case Sa:return"radiusOffset";case Hl:return"theta2Offset";case Wl:return"radius2Offset"}}function yR(t){switch(t){case Ti:return"xOffset";case ln:return"yOffset"}}function wK(t){switch(t){case"xOffset":return"x";case"yOffset":return"y"}}const vFe=me(pR),{x:O6e,y:N6e,x2:C6e,y2:R6e,xOffset:L6e,yOffset:D6e,latitude:P6e,longitude:$6e,latitude2:U6e,longitude2:z6e,theta:j6e,theta2:q6e,radius:G6e,radius2:V6e,...gR}=pR,EFe=me(gR),mR={x:1,y:1},qo=me(mR);function cn(t){return t in mR}const wR={theta:1,radius:1},SFe=me(wR);function zS(t){return t==="width"?Ti:ln}const bK={xOffset:1,yOffset:1};function O_(t){return t in bK}const{text:W6e,tooltip:H6e,href:Y6e,url:X6e,description:K6e,detail:J6e,key:Q6e,order:Z6e,...TK}=gR,xFe=me(TK);function BFe(t){return!!gR[t]}function IFe(t){switch(t){case Os:case Uo:case zo:case Yl:case Ns:case Xl:case kd:case Fd:return!0;case Bd:case Id:case Du:return!1}}const vK={...mR,...wR,...bK,...TK},jS=me(vK);function Kl(t){return!!vK[t]}function kFe(t,e){return MFe(t)[e]}const EK={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:e$e,...FFe}=EK;function MFe(t){switch(t){case Os:case Uo:case zo:case US:case _w:case DS:case au:case PS:case pw:case Xl:case Bd:case Id:case kd:case LS:case Sl:case xl:return EK;case Ti:case ln:case xd:case A_:case xa:case Ba:return FFe;case Ea:case $o:case Ia:case Cr:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Yl:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Fd:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Ns:return{point:"always",geoshape:"always"};case hw:return{text:"always"};case Du:return{point:"always",square:"always",text:"always"};case $S:return{image:"always"};case Lr:return{text:"always",arc:"always"};case Sa:return{text:"always",arc:"always"};case Hl:case Wl:return{arc:"always"}}}function ZB(t){switch(t){case Ti:case ln:case Lr:case Sa:case xd:case A_:case Yl:case Du:case kd:case Xl:case Bd:case Id:case Ea:case $o:case Hl:case Wl:return;case LS:case Sl:case xl:case Ns:case Fd:case hw:case au:case PS:case $S:case US:return"discrete";case Os:case Uo:case zo:return"flexible";case xa:case Ba:case Ia:case Cr:case _w:case DS:case pw:return}}const AFe={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},OFe={count:1,min:1,max:1};function Ll(t){return!!t&&!!t.argmin}function Md(t){return!!t&&!!t.argmax}function bR(t){return Ie(t)&&!!AFe[t]}const NFe=new Set(["count","valid","missing","distinct"]);function SK(t){return Ie(t)&&NFe.has(t)}function CFe(t){return Ie(t)&&It(["min","max"],t)}const RFe=new Set(["count","sum","distinct","valid","missing"]),LFe=new Set(["mean","average","median","q1","q3","min","max"]);function xK(t){return vd(t)&&(t=ex(t,void 0)),"bin"+me(t).map(e=>qS(t[e])?bi(`_${e}_${nd(t[e])}`):bi(`_${e}_${t[e]}`)).join("")}function hi(t){return t===!0||$u(t)&&!t.binned}function un(t){return t==="binned"||$u(t)&&t.binned===!0}function $u(t){return Me(t)}function qS(t){return t==null?void 0:t.param}function U$(t){switch(t){case Sl:case xl:case Yl:case Os:case Uo:case zo:case kd:case Xl:case Bd:case Id:case Ns:return 6;case Fd:return 4;default:return 10}}function yw(t){return!!(t!=null&&t.expr)}function hs(t){const e=me(t||{}),i={};for(const n of e)i[n]=Ks(t[n]);return i}function BK(t){const{anchor:e,frame:i,offset:n,orient:s,angle:a,limit:c,color:d,subtitleColor:f,subtitleFont:u,subtitleFontSize:o,subtitleFontStyle:g,subtitleFontWeight:w,subtitleLineHeight:m,subtitlePadding:l,...T}=t,b={...T,...d?{fill:d}:{}},S={...e?{anchor:e}:{},...i?{frame:i}:{},...n?{offset:n}:{},...s?{orient:s}:{},...a!==void 0?{angle:a}:{},...c!==void 0?{limit:c}:{}},x={...f?{subtitleColor:f}:{},...u?{subtitleFont:u}:{},...o?{subtitleFontSize:o}:{},...g?{subtitleFontStyle:g}:{},...w?{subtitleFontWeight:w}:{},...m?{subtitleLineHeight:m}:{},...l?{subtitlePadding:l}:{}},B=Qp(t,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:b,subtitleMarkConfig:B,nonMarkTitleProperties:S,subtitle:x}}function mc(t){return Ie(t)||ue(t)&&Ie(t[0])}function Ce(t){return!!(t!=null&&t.signal)}function Ad(t){return!!t.step}function DFe(t){return ue(t)?!1:"fields"in t&&!("data"in t)}function PFe(t){return ue(t)?!1:"fields"in t&&"data"in t}function wl(t){return ue(t)?!1:"field"in t&&"data"in t}const $Fe={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},UFe=me($Fe),zFe={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},jF=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function IK(t){const e=ue(t.condition)?t.condition.map(z$):z$(t.condition);return{...Ks(t),condition:e}}function Ks(t){if(yw(t)){const{expr:e,...i}=t;return{signal:e,...i}}return t}function z$(t){if(yw(t)){const{expr:e,...i}=t;return{signal:e,...i}}return t}function mi(t){if(yw(t)){const{expr:e,...i}=t;return{signal:e,...i}}return Ce(t)?t:t!==void 0?{value:t}:void 0}function jFe(t){return Ce(t)?t.signal:ve(t)}function j$(t){return Ce(t)?t.signal:ve(t.value)}function Bl(t){return Ce(t)?t.signal:t==null?null:ve(t)}function qFe(t,e,i){for(const n of i){const s=ou(n,e.markDef,e.config);s!==void 0&&(t[n]=mi(s))}return t}function kK(t){return[].concat(t.type,t.style??[])}function Kt(t,e,i,n={}){const{vgChannel:s,ignoreVgConfig:a}=n;return s&&e[s]!==void 0?e[s]:e[t]!==void 0?e[t]:a&&(!s||s===t)?void 0:ou(t,e,i,n)}function ou(t,e,i,{vgChannel:n}={}){return Pi(n?Lv(t,e,i.style):void 0,Lv(t,e,i.style),n?i[e.type][n]:void 0,i[e.type][t],n?i.mark[n]:i.mark[t])}function Lv(t,e,i){return FK(t,kK(e),i)}function FK(t,e,i){e=ke(e);let n;for(const s of e){const a=i[s];a&&a[t]!==void 0&&(n=a[t])}return n}function MK(t,e){return ke(t).reduce((i,n)=>(i.field.push(xe(n,e)),i.order.push(n.sort??"ascending"),i),{field:[],order:[]})}function AK(t,e){const i=[...t];return e.forEach(n=>{for(const s of i)if(so(s,n))return;i.push(n)}),i}function OK(t,e){return so(t,e)||!e?t:t?[...ke(t),...ke(e)].join(", "):e}function NK(t,e){const i=t.value,n=e.value;if(i==null||n===null)return{explicit:t.explicit,value:null};if((mc(i)||Ce(i))&&(mc(n)||Ce(n)))return{explicit:t.explicit,value:OK(i,n)};if(mc(i)||Ce(i))return{explicit:t.explicit,value:i};if(mc(n)||Ce(n))return{explicit:t.explicit,value:n};if(!mc(i)&&!Ce(i)&&!mc(n)&&!Ce(n))return{explicit:t.explicit,value:AK(i,n)};throw new Error("It should never reach here")}function TR(t){return`Invalid specification ${ui(t)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const GFe='Autosize "fit" only works for single views and layered views.';function q$(t){return`${t=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function G$(t){const e=t=="width"?"Width":"Height",i=t=="width"?"x":"y";return`${e} "container" only works well with autosize "fit" or "fit-${i}".`}function V$(t){return t?`Dropping "fit-${t}" because spec has discrete ${Cs(t)}.`:'Dropping "fit" because spec has discrete size.'}function vR(t){return`Unknown field for ${t}. Cannot calculate view size.`}function W$(t){return`Cannot project a selection on encoding channel "${t}", which has no field.`}function VFe(t,e){return`Cannot project a selection on encoding channel "${t}" as it uses an aggregate function ("${e}").`}function WFe(t){return`The "nearest" transform is not supported for ${t} marks.`}function CK(t){return`Selection not supported for ${t} yet.`}function HFe(t){return`Cannot find a selection named "${t}".`}const YFe="Scale bindings are currently only supported for scales with unbinned, continuous domains.",XFe="Legend bindings are only supported for selections over an individual field or encoding channel.";function KFe(t){return`Lookups can only be performed on selection parameters. "${t}" is a variable parameter.`}function JFe(t){return`Cannot define and lookup the "${t}" selection in the same view. Try moving the lookup into a second, layered view?`}const QFe="The same selection must be used to override scale domains in a layered view.",ZFe='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function e2e(t){return`Unknown repeated value "${t}".`}function H$(t){return`The "columns" property cannot be used when "${t}" has nested row/column.`}const t2e="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function i2e(t){return`Unrecognized parse "${t}".`}function Y$(t,e,i){return`An ancestor parsed field "${t}" as ${i} but a child wants to parse the field as ${e}.`}const n2e="Attempt to add the same child twice.";function s2e(t){return`Ignoring an invalid transform: ${ui(t)}.`}const r2e='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function X$(t){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${t} are dropped.`}function a2e(t){const{parentProjection:e,projection:i}=t;return`Layer's shared projection ${ui(e)} is overridden by a child projection ${ui(i)}.`}const o2e="Arc marks uses theta channel rather than angle, replacing angle with theta.";function l2e(t){return`${t}Offset dropped because ${t} is continuous`}function c2e(t){return`There is no ${t} encoding. Replacing ${t}Offset encoding as ${t}.`}function d2e(t,e,i){return`Channel ${t} is a ${e}. Converted to {value: ${ui(i)}}.`}function RK(t){return`Invalid field type "${t}".`}function f2e(t,e){return`Invalid field type "${t}" for aggregate: "${e}", using "quantitative" instead.`}function u2e(t){return`Invalid aggregation operator "${t}".`}function LK(t,e){const{fill:i,stroke:n}=e;return`Dropping color ${t} as the plot also has ${i&&n?"fill and stroke":i?"fill":"stroke"}.`}function h2e(t){return`Position range does not support relative band size for ${t}.`}function qF(t,e){return`Dropping ${ui(t)} from channel "${e}" since it does not contain any data field, datum, value, or signal.`}const p2e="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function GS(t,e,i){return`${t} dropped as it is incompatible with "${e}"${i?` when ${i}`:""}.`}function _2e(t){return`${t} encoding has no scale, so specified scale is ignored.`}function y2e(t){return`${t}-encoding is dropped as ${t} is not a valid encoding channel.`}function g2e(t){return`${t} encoding should be discrete (ordinal / nominal / binned).`}function m2e(t){return`${t} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function w2e(t){return`Facet encoding dropped as ${t.join(" and ")} ${t.length>1?"are":"is"} also specified.`}function eI(t,e){return`Using discrete channel "${t}" to encode "${e}" field can be misleading as it does not encode ${e==="ordinal"?"order":"magnitude"}.`}function b2e(t){return`The ${t} for range marks cannot be an expression`}function T2e(t,e){return`Line mark is for continuous lines and thus cannot be used with ${t&&e?"x2 and y2":t?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function v2e(t,e){return`Specified orient "${t}" overridden with "${e}".`}function E2e(t){return`Cannot use the scale property "${t}" with non-color channel.`}function S2e(t){return`Cannot use the relative band size with ${t} scale.`}function x2e(t){return`Using unaggregated domain with raw field has no effect (${ui(t)}).`}function B2e(t){return`Unaggregated domain not applicable for "${t}" since it produces values outside the origin domain of the source data.`}function I2e(t){return`Unaggregated domain is currently unsupported for log scale (${ui(t)}).`}function k2e(t){return`Cannot apply size to non-oriented mark "${t}".`}function F2e(t,e,i){return`Channel "${t}" does not work with "${e}" scale. We are using "${i}" scale instead.`}function M2e(t,e){return`FieldDef does not work with "${t}" scale. We are using "${e}" scale instead.`}function DK(t,e,i){return`${i}-scale's "${e}" is dropped as it does not work with ${t} scale.`}function PK(t){return`The step for "${t}" is dropped because the ${t==="width"?"x":"y"} is continuous.`}function A2e(t,e,i,n){return`Conflicting ${e.toString()} property "${t.toString()}" (${ui(i)} and ${ui(n)}). Using ${ui(i)}.`}function O2e(t,e,i,n){return`Conflicting ${e.toString()} property "${t.toString()}" (${ui(i)} and ${ui(n)}). Using the union of the two domains.`}function N2e(t){return`Setting the scale to be independent for "${t}" means we also have to set the guide (axis or legend) to be independent.`}function C2e(t){return`Dropping sort property ${ui(t)} as unioned domains only support boolean or op "count", "min", and "max".`}const K$="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",R2e="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",L2e="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",D2e="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function P2e(t){return`Cannot stack "${t}" if there is already "${t}2".`}function $2e(t){return`Cannot stack non-linear scale (${t}).`}function U2e(t){return`Stacking is applied even though the aggregate function is non-summative ("${t}").`}function Dv(t,e){return`Invalid ${t}: ${ui(e)}.`}function z2e(t){return`Dropping day from datetime ${ui(t)} as day cannot be combined with other units.`}function j2e(t,e){return`${e?"extent ":""}${e&&t?"and ":""}${t?"center ":""}${e&&t?"are ":"is "}not needed when data are aggregated.`}function q2e(t,e,i){return`${t} is not usually used with ${e} for ${i}.`}function G2e(t,e){return`Continuous axis should not have customized aggregation function ${t}; ${e} already agregates the axis.`}function J$(t){return`1D error band does not support ${t}.`}function $K(t){return`Channel ${t} is required for "binned" bin.`}function V2e(t){return`Channel ${t} should not be used with "binned" bin.`}function W2e(t){return`Domain for ${t} is required for threshold scale.`}globalThis&&globalThis.__classPrivateFieldSet;globalThis&&globalThis.__classPrivateFieldGet;const UK=hO(uO);let e_=UK;function H2e(t){return e_=t,e_}function Y2e(){return e_=UK,e_}function be(...t){e_.warn(...t)}function X2e(...t){e_.debug(...t)}function Uu(t){if(t&&Me(t)){for(const e of SR)if(e in t)return!0}return!1}const zK=["january","february","march","april","may","june","july","august","september","october","november","december"],K2e=zK.map(t=>t.substr(0,3)),jK=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],J2e=jK.map(t=>t.substr(0,3));function Q2e(t){if(RS(t)&&(t=+t),ii(t))return t>4&&be(Dv("quarter",t)),t-1;throw new Error(Dv("quarter",t))}function Z2e(t){if(RS(t)&&(t=+t),ii(t))return t-1;{const e=t.toLowerCase(),i=zK.indexOf(e);if(i!==-1)return i;const n=e.substr(0,3),s=K2e.indexOf(n);if(s!==-1)return s;throw new Error(Dv("month",t))}}function eMe(t){if(RS(t)&&(t=+t),ii(t))return t%7;{const e=t.toLowerCase(),i=jK.indexOf(e);if(i!==-1)return i;const n=e.substr(0,3),s=J2e.indexOf(n);if(s!==-1)return s;throw new Error(Dv("day",t))}}function ER(t,e){const i=[];if(e&&t.day!==void 0&&me(t).length>1&&(be(z2e(t)),t=Qe(t),delete t.day),t.year!==void 0?i.push(t.year):i.push(2012),t.month!==void 0){const n=e?Z2e(t.month):t.month;i.push(n)}else if(t.quarter!==void 0){const n=e?Q2e(t.quarter):t.quarter;i.push(ii(n)?n*3:`${n}*3`)}else i.push(0);if(t.date!==void 0)i.push(t.date);else if(t.day!==void 0){const n=e?eMe(t.day):t.day;i.push(ii(n)?n+1:`${n}+1`)}else i.push(1);for(const n of["hours","minutes","seconds","milliseconds"]){const s=t[n];i.push(typeof s>"u"?0:s)}return i}function lu(t){const i=ER(t,!0).join(", ");return t.utc?`utc(${i})`:`datetime(${i})`}function tMe(t){const i=ER(t,!1).join(", ");return t.utc?`utc(${i})`:`datetime(${i})`}function iMe(t){const e=ER(t,!0);return t.utc?+new Date(Date.UTC(...e)):+new Date(...e)}const qK={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},SR=me(qK);function nMe(t){return!!qK[t]}function xR(t){return t.startsWith("utc")}function sMe(t){return t.substr(3)}const rMe={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function VS(t){return SR.filter(e=>GK(t,e))}function aMe(t){const e=VS(t);return e[e.length-1]}function GK(t,e){const i=t.indexOf(e);return!(i<0||i>0&&e==="seconds"&&t.charAt(i-1)==="i"||t.length>i+3&&e==="day"&&t.charAt(i+3)==="o"||i>0&&e==="year"&&t.charAt(i-1)==="f")}function oMe(t,e,{end:i}={end:!1}){const n=fR(e),s=xR(t)?"utc":"";function a(f){return f==="quarter"?`(${s}quarter(${n})-1)`:`${s}${f}(${n})`}let c;const d={};for(const f of SR)GK(t,f)&&(d[f]=a(f),c=f);return i&&(d[c]+="+1"),tMe(d)}function VK(t){if(!t)return;const e=VS(t);return`timeUnitSpecifier(${ui(e)}, ${ui(rMe)})`}function lMe(t,e,i){if(!t)return;const n=VK(t);return`${i||xR(t)?"utc":"time"}Format(${e}, ${n})`}function wn(t){if(!t)return;let e;return Ie(t)?e={unit:t}:Me(t)&&(e={...t,...t.unit?{unit:t.unit}:{}}),xR(e.unit)&&(e.utc=!0,e.unit=sMe(e.unit)),e}function cMe(t){const{utc:e,...i}=wn(t);return i.unit?(e?"utc":"")+me(i).map(n=>bi(`${n==="unit"?"":`_${n}_`}${i[n]}`)).join(""):(e?"utc":"")+"timeunit"+me(i).map(n=>bi(`_${n}_${i[n]}`)).join("")}function WK(t,e=i=>i){const i=wn(t),n=aMe(i.unit);if(n&&n!=="day"){const s={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},a=i.step||1,c={...s,...n==="quarter"?{month:+s.month+a*3}:{[n]:+s[n]+a}};return`${e(lu(c))} - ${e(lu(s))}`}}function dMe(t){return t==null?void 0:t.param}function BR(t){return!!(t!=null&&t.field)&&t.equal!==void 0}function IR(t){return!!(t!=null&&t.field)&&t.lt!==void 0}function kR(t){return!!(t!=null&&t.field)&&t.lte!==void 0}function FR(t){return!!(t!=null&&t.field)&&t.gt!==void 0}function MR(t){return!!(t!=null&&t.field)&&t.gte!==void 0}function AR(t){if(t!=null&&t.field){if(ue(t.range)&&t.range.length===2)return!0;if(Ce(t.range))return!0}return!1}function OR(t){return!!(t!=null&&t.field)&&(ue(t.oneOf)||ue(t.in))}function fMe(t){return!!(t!=null&&t.field)&&t.valid!==void 0}function HK(t){return OR(t)||BR(t)||AR(t)||IR(t)||FR(t)||kR(t)||MR(t)}function Ca(t,e){return tx(t,{timeUnit:e,wrapTime:!0})}function uMe(t,e){return t.map(i=>Ca(i,e))}function YK(t,e=!0){var a;const{field:i}=t,n=(a=wn(t.timeUnit))==null?void 0:a.unit,s=n?`time(${oMe(n,i)})`:xe(t,{expr:"datum"});if(BR(t))return`${s}===${Ca(t.equal,n)}`;if(IR(t)){const c=t.lt;return`${s}<${Ca(c,n)}`}else if(FR(t)){const c=t.gt;return`${s}>${Ca(c,n)}`}else if(kR(t)){const c=t.lte;return`${s}<=${Ca(c,n)}`}else if(MR(t)){const c=t.gte;return`${s}>=${Ca(c,n)}`}else{if(OR(t))return`indexof([${uMe(t.oneOf,n).join(",")}], ${s}) !== -1`;if(fMe(t))return NR(s,t.valid);if(AR(t)){const{range:c}=t,d=Ce(c)?{signal:`${c.signal}[0]`}:c[0],f=Ce(c)?{signal:`${c.signal}[1]`}:c[1];if(d!==null&&f!==null&&e)return"inrange("+s+", ["+Ca(d,n)+", "+Ca(f,n)+"])";const u=[];return d!==null&&u.push(`${s} >= ${Ca(d,n)}`),f!==null&&u.push(`${s} <= ${Ca(f,n)}`),u.length>0?u.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${ui(t)}`)}function NR(t,e=!0){return e?`isValid(${t}) && isFinite(+${t})`:`!isValid(${t}) || !isFinite(+${t})`}function hMe(t){var e;return HK(t)&&t.timeUnit?{...t,timeUnit:(e=wn(t.timeUnit))==null?void 0:e.unit}:t}const gw={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function pMe(t){return t==="quantitative"||t==="temporal"}function XK(t){return t==="ordinal"||t==="nominal"}const cu=gw.quantitative,CR=gw.ordinal,t_=gw.temporal,RR=gw.nominal,N_=gw.geojson;function _Me(t){if(t)switch(t=t.toLowerCase(),t){case"q":case cu:return"quantitative";case"t":case t_:return"temporal";case"o":case CR:return"ordinal";case"n":case RR:return"nominal";case N_:return"geojson"}}const Ts={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},GF={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function yMe(t,e){const i=GF[t],n=GF[e];return i===n||i==="ordinal-position"&&n==="time"||n==="ordinal-position"&&i==="time"}const gMe={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function Q$(t){return gMe[t]}const KK=new Set(["linear","log","pow","sqrt","symlog"]),JK=new Set([...KK,"time","utc"]);function QK(t){return KK.has(t)}const ZK=new Set(["quantile","quantize","threshold"]),mMe=new Set([...JK,...ZK,"sequential","identity"]),wMe=new Set(["ordinal","bin-ordinal","point","band"]);function dn(t){return wMe.has(t)}function or(t){return mMe.has(t)}function ia(t){return JK.has(t)}function i_(t){return ZK.has(t)}const bMe={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function TMe(t){return!Ie(t)&&!!t.name}function eJ(t){return t==null?void 0:t.param}function vMe(t){return t==null?void 0:t.unionWith}function EMe(t){return Me(t)&&"field"in t}const SMe={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:t$e,domain:i$e,range:n$e,rangeMax:s$e,rangeMin:r$e,scheme:a$e,...xMe}=SMe,BMe=me(xMe);function VF(t,e){switch(e){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(t);case"bins":return!["point","band","identity","ordinal"].includes(t);case"round":return ia(t)||t==="band"||t==="point";case"padding":case"rangeMin":case"rangeMax":return ia(t)||["point","band"].includes(t);case"paddingOuter":case"align":return["point","band"].includes(t);case"paddingInner":return t==="band";case"domainMax":case"domainMid":case"domainMin":case"clamp":return ia(t);case"nice":return ia(t)||t==="quantize"||t==="threshold";case"exponent":return t==="pow";case"base":return t==="log";case"constant":return t==="symlog";case"zero":return or(t)&&!It(["log","time","utc","threshold","quantile"],t)}}function tJ(t,e){switch(e){case"interpolate":case"scheme":case"domainMid":return ap(t)?void 0:E2e(e);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function IMe(t,e){return It([CR,RR],e)?t===void 0||dn(t):e===t_?It([Ts.TIME,Ts.UTC,void 0],t):e===cu?QK(t)||i_(t)||t===void 0:!0}function kMe(t,e,i=!1){if(!Kl(t))return!1;switch(t){case Ti:case ln:case xd:case A_:case Lr:case Sa:return ia(e)||e==="band"?!0:e==="point"?!i:!1;case Yl:case kd:case Xl:case Bd:case Id:case Du:return ia(e)||i_(e)||It(["band","point","ordinal"],e);case Os:case Uo:case zo:return e!=="band";case Fd:case Ns:return e==="ordinal"||i_(e)}}const rs={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},iJ=rs.arc,WS=rs.area,HS=rs.bar,FMe=rs.image,YS=rs.line,XS=rs.point,MMe=rs.rect,Pv=rs.rule,nJ=rs.text,LR=rs.tick,AMe=rs.trail,DR=rs.circle,PR=rs.square,sJ=rs.geoshape;function Od(t){return["line","area","trail"].includes(t)}function rJ(t){return["rect","bar","image","arc"].includes(t)}const OMe=new Set(me(rs));function ko(t){return t.type}const NMe=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],CMe=["fill","fillOpacity"],RMe=[...NMe,...CMe],LMe={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},Z$=me(LMe),DMe={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],tick:["bandSize","thickness"]},PMe={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},$Me={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},aJ=me($Me);function du(t){return t&&t.band!=null}const UMe={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},oJ=5,zMe={binSpacing:1,continuousBandSize:oJ,timeUnitBandPosition:.5},jMe={binSpacing:0,continuousBandSize:oJ,timeUnitBandPosition:.5},qMe={thickness:1};function GMe(t){return ko(t)?t.type:t}function $R(t){const{channel:e,channelDef:i,markDef:n,scale:s,config:a}=t,c=zR(t);return Te(i)&&!SK(i.aggregate)&&s&&ia(s.get("type"))?VMe({fieldDef:i,channel:e,markDef:n,ref:c,config:a}):c}function VMe({fieldDef:t,channel:e,markDef:i,ref:n,config:s}){return Od(i.type)?n:Kt("invalid",i,s)===null?[WMe(t,e),n]:n}function WMe(t,e){const i=UR(t,!0),s=Pu(e)==="y"?{field:{group:"height"}}:{value:0};return{test:i,...s}}function UR(t,e=!0){return NR(Ie(t)?t:xe(t,{expr:"datum"}),!e)}function HMe(t){const{datum:e}=t;return Uu(e)?lu(e):`${ui(e)}`}function Lf(t,e,i,n){const s={};if(e&&(s.scale=e),Go(t)){const{datum:a}=t;Uu(a)?s.signal=lu(a):Ce(a)?s.signal=a.signal:yw(a)?s.signal=a.expr:s.value=a}else s.field=xe(t,i);if(n){const{offset:a,band:c}=n;a&&(s.offset=a),c&&(s.band=c)}return s}function $v({scaleName:t,fieldOrDatumDef:e,fieldOrDatumDef2:i,offset:n,startSuffix:s,bandPosition:a=.5}){const c=0<a&&a<1?"datum":void 0,d=xe(e,{expr:c,suffix:s}),f=i!==void 0?xe(i,{expr:c}):xe(e,{suffix:"end",expr:c}),u={};if(a===0||a===1){u.scale=t;const o=a===0?d:f;u.field=o}else{const o=Ce(a)?`${a.signal} * ${d} + (1-${a.signal}) * ${f}`:`${a} * ${d} + ${1-a} * ${f}`;u.signal=`scale("${t}", ${o})`}return n&&(u.offset=n),u}function zR({channel:t,channelDef:e,channel2Def:i,markDef:n,config:s,scaleName:a,scale:c,stack:d,offset:f,defaultRef:u,bandPosition:o}){if(e){if(Je(e)){const g=c==null?void 0:c.get("type");if(ns(e)){o??(o=_J({fieldDef:e,fieldDef2:i,markDef:n,config:s}));const{bin:w,timeUnit:m,type:l}=e;if(hi(w)||o&&m&&l===t_)return d!=null&&d.impute?Lf(e,a,{binSuffix:"mid"},{offset:f}):o&&!dn(g)?$v({scaleName:a,fieldOrDatumDef:e,bandPosition:o,offset:f}):Lf(e,a,Tw(e,t)?{binSuffix:"range"}:{},{offset:f});if(un(w)){if(Te(i))return $v({scaleName:a,fieldOrDatumDef:e,fieldOrDatumDef2:i,bandPosition:o,offset:f});be($K(t===Ti?Ea:$o))}}return Lf(e,a,dn(g)?{binSuffix:"range"}:{},{offset:f,band:g==="band"?o??e.bandPosition??.5:void 0})}else if(_a(e)){const g=e.value,w=f?{offset:f}:{};return{...ug(t,g),...w}}}return gt(u)&&(u=u()),u&&{...u,...f?{offset:f}:{}}}function ug(t,e){return It(["x","x2"],t)&&e==="width"?{field:{group:"width"}}:It(["y","y2"],t)&&e==="height"?{field:{group:"height"}}:mi(e)}function fu(t){return t&&t!=="number"&&t!=="time"}function lJ(t,e,i){return`${t}(${e}${i?`, ${ui(i)}`:""})`}const YMe=" – ";function jR({fieldOrDatumDef:t,format:e,formatType:i,expr:n,normalizeStack:s,config:a}){var f,u;if(fu(i))return na({fieldOrDatumDef:t,format:e,formatType:i,expr:n,config:a});const c=cJ(t,n,s),d=n_(t);if(e===void 0&&i===void 0&&a.customFormatTypes){if(d==="quantitative"){if(s&&a.normalizedNumberFormatType)return na({fieldOrDatumDef:t,format:a.normalizedNumberFormat,formatType:a.normalizedNumberFormatType,expr:n,config:a});if(a.numberFormatType)return na({fieldOrDatumDef:t,format:a.numberFormat,formatType:a.numberFormatType,expr:n,config:a})}if(d==="temporal"&&a.timeFormatType&&Te(t)&&t.timeUnit===void 0)return na({fieldOrDatumDef:t,format:a.timeFormat,formatType:a.timeFormatType,expr:n,config:a})}if(r_(t)){const o=KMe({field:c,timeUnit:Te(t)?(f=wn(t.timeUnit))==null?void 0:f.unit:void 0,format:e,formatType:a.timeFormatType,rawTimeFormat:a.timeFormat,isUTCScale:zu(t)&&((u=t.scale)==null?void 0:u.type)===Ts.UTC});return o?{signal:o}:void 0}if(e=WF({type:d,specifiedFormat:e,config:a,normalizeStack:s}),Te(t)&&hi(t.bin)){const o=xe(t,{expr:n,binSuffix:"end"});return{signal:mw(c,o,e,i,a)}}else return e||n_(t)==="quantitative"?{signal:`${uJ(c,e)}`}:{signal:`isValid(${c}) ? ${c} : ""+${c}`}}function cJ(t,e,i){return Te(t)?i?`${xe(t,{expr:e,suffix:"end"})}-${xe(t,{expr:e,suffix:"start"})}`:xe(t,{expr:e}):HMe(t)}function na({fieldOrDatumDef:t,format:e,formatType:i,expr:n,normalizeStack:s,config:a,field:c}){if(c??(c=cJ(t,n,s)),c!=="datum.value"&&Te(t)&&hi(t.bin)){const d=xe(t,{expr:n,binSuffix:"end"});return{signal:mw(c,d,e,i,a)}}return{signal:lJ(i,c,e)}}function dJ(t,e,i,n,s,a){var c;if(!(Ie(n)&&fu(n))&&!(i===void 0&&n===void 0&&s.customFormatTypes&&n_(t)==="quantitative"&&(s.normalizedNumberFormatType&&s_(t)&&t.stack==="normalize"||s.numberFormatType))){if(s_(t)&&t.stack==="normalize"&&s.normalizedNumberFormat)return WF({type:"quantitative",config:s,normalizeStack:!0});if(r_(t)){const d=Te(t)?(c=wn(t.timeUnit))==null?void 0:c.unit:void 0;return d===void 0&&s.customFormatTypes&&s.timeFormatType?void 0:XMe({specifiedFormat:i,timeUnit:d,config:s,omitTimeFormatConfig:a})}return WF({type:e,specifiedFormat:i,config:s})}}function fJ(t,e,i){var n;if(t&&(Ce(t)||t==="number"||t==="time"))return t;if(r_(e)&&i!=="time"&&i!=="utc")return Te(e)&&((n=wn(e==null?void 0:e.timeUnit))!=null&&n.utc)?"utc":"time"}function WF({type:t,specifiedFormat:e,config:i,normalizeStack:n}){if(Ie(e))return e;if(t===cu)return n?i.normalizedNumberFormat:i.numberFormat}function XMe({specifiedFormat:t,timeUnit:e,config:i,omitTimeFormatConfig:n}){return t||(e?{signal:VK(e)}:n?void 0:i.timeFormat)}function uJ(t,e){return`format(${t}, "${e||""}")`}function eU(t,e,i,n){return fu(i)?lJ(i,t,e):uJ(t,(Ie(e)?e:void 0)??n.numberFormat)}function mw(t,e,i,n,s){if(i===void 0&&n===void 0&&s.customFormatTypes&&s.numberFormatType)return mw(t,e,s.numberFormat,s.numberFormatType,s);const a=eU(t,i,n,s),c=eU(e,i,n,s);return`${NR(t,!1)} ? "null" : ${a} + "${YMe}" + ${c}`}function KMe({field:t,timeUnit:e,format:i,formatType:n,rawTimeFormat:s,isUTCScale:a}){return!e||i?!e&&n?`${n}(${t}, '${i}')`:(i=Ie(i)?i:s,`${a?"utc":"time"}Format(${t}, '${i}')`):lMe(e,t,a)}const KS="min",JMe={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function tU(t){return t in JMe}function hJ(t){return!!(t!=null&&t.encoding)}function fo(t){return t&&(t.op==="count"||!!t.field)}function pJ(t){return t&&ue(t)}function ww(t){return"row"in t||"column"in t}function qR(t){return!!t&&"header"in t}function JS(t){return"facet"in t}function QMe(t){return t.param}function ZMe(t){return t&&!Ie(t)&&"repeat"in t}function iU(t){const{field:e,timeUnit:i,bin:n,aggregate:s}=t;return{...i?{timeUnit:i}:{},...n?{bin:n}:{},...s?{aggregate:s}:{},field:e}}function GR(t){return"sort"in t}function _J({fieldDef:t,fieldDef2:e,markDef:i,config:n}){if(Je(t)&&t.bandPosition!==void 0)return t.bandPosition;if(Te(t)){const{timeUnit:s,bin:a}=t;if(s&&!e)return rJ(i.type)?0:ou("timeUnitBandPosition",i,n);if(hi(a))return .5}}function yJ({channel:t,fieldDef:e,fieldDef2:i,markDef:n,config:s,scaleType:a,useVlSizeChannel:c}){var u,o,g;const d=Cs(t),f=Kt(c?"size":d,n,s,{vgChannel:d});if(f!==void 0)return f;if(Te(e)){const{timeUnit:w,bin:m}=e;if(w&&!i)return{band:ou("timeUnitBandSize",n,s)};if(hi(m)&&!dn(a))return{band:1}}if(rJ(n.type))return a?dn(a)?((u=s[n.type])==null?void 0:u.discreteBandSize)||{band:1}:(o=s[n.type])==null?void 0:o.continuousBandSize:(g=s[n.type])==null?void 0:g.discreteBandSize}function gJ(t,e,i,n){return hi(t.bin)||t.timeUnit&&ns(t)&&t.type==="temporal"?_J({fieldDef:t,fieldDef2:e,markDef:i,config:n})!==void 0:!1}function QS(t){return t&&"condition"in t}function ZS(t){const e=t==null?void 0:t.condition;return!!e&&!ue(e)&&Te(e)}function bw(t){const e=t==null?void 0:t.condition;return!!e&&!ue(e)&&Je(e)}function eAe(t){const e=t==null?void 0:t.condition;return!!e&&(ue(e)||_a(e))}function Te(t){return t&&(!!t.field||t.aggregate==="count")}function n_(t){return t==null?void 0:t.type}function Go(t){return t&&"datum"in t}function Fc(t){return ns(t)&&!zv(t)||Uv(t)}function nU(t){return ns(t)&&t.type==="quantitative"&&!t.bin||Uv(t)}function Uv(t){return Go(t)&&ii(t.datum)}function Je(t){return Te(t)||Go(t)}function ns(t){return t&&("field"in t||t.aggregate==="count")&&"type"in t}function _a(t){return t&&"value"in t&&"value"in t}function zu(t){return t&&("scale"in t||"sort"in t)}function s_(t){return t&&("axis"in t||"stack"in t||"impute"in t)}function mJ(t){return t&&"legend"in t}function wJ(t){return t&&("format"in t||"formatType"in t)}function tAe(t){return bs(t,["legend","axis","header","scale"])}function iAe(t){return"op"in t}function xe(t,e={}){let i=t.field;const n=e.prefix;let s=e.suffix,a="";if(sAe(t))i=cK("count");else{let c;if(!e.nofn)if(iAe(t))c=t.op;else{const{bin:d,aggregate:f,timeUnit:u}=t;hi(d)?(c=xK(d),s=(e.binSuffix??"")+(e.suffix??"")):f?Md(f)?(a=`["${i}"]`,i=`argmax_${f.argmax}`):Ll(f)?(a=`["${i}"]`,i=`argmin_${f.argmin}`):c=String(f):u&&(c=cMe(u),s=(!["range","mid"].includes(e.binSuffix)&&e.binSuffix||"")+(e.suffix??""))}c&&(i=i?`${c}_${i}`:c)}return s&&(i=`${i}_${s}`),n&&(i=`${n}_${i}`),e.forAs?uR(i):e.expr?aK(i,e.expr)+a:Nr(i)+a}function zv(t){switch(t.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Te(t)&&!!t.bin;case"temporal":return!1}throw new Error(RK(t.type))}function nAe(t){var e;return zu(t)&&i_((e=t.scale)==null?void 0:e.type)}function sAe(t){return t.aggregate==="count"}function rAe(t,e){var c;const{field:i,bin:n,timeUnit:s,aggregate:a}=t;if(a==="count")return e.countTitle;if(hi(n))return`${i} (binned)`;if(s){const d=(c=wn(s))==null?void 0:c.unit;if(d)return`${i} (${VS(d).join("-")})`}else if(a)return Md(a)?`${i} for max ${a.argmax}`:Ll(a)?`${i} for min ${a.argmin}`:`${uw(a)} of ${i}`;return i}function aAe(t){const{aggregate:e,bin:i,timeUnit:n,field:s}=t;if(Md(e))return`${s} for argmax(${e.argmax})`;if(Ll(e))return`${s} for argmin(${e.argmin})`;const a=wn(n),c=e||(a==null?void 0:a.unit)||(a==null?void 0:a.maxbins)&&"timeunit"||hi(i)&&"bin";return c?`${c.toUpperCase()}(${s})`:s}const bJ=(t,e)=>{switch(e.fieldTitle){case"plain":return t.field;case"functional":return aAe(t);default:return rAe(t,e)}};let TJ=bJ;function vJ(t){TJ=t}function oAe(){vJ(bJ)}function op(t,e,{allowDisabling:i,includeDefault:n=!0}){var d;const s=(d=VR(t))==null?void 0:d.title;if(!Te(t))return s??t.title;const a=t,c=n?WR(a,e):void 0;return i?Pi(s,a.title,c):s??a.title??c}function VR(t){if(s_(t)&&t.axis)return t.axis;if(mJ(t)&&t.legend)return t.legend;if(qR(t)&&t.header)return t.header}function WR(t,e){return TJ(t,e)}function jv(t){if(wJ(t)){const{format:e,formatType:i}=t;return{format:e,formatType:i}}else{const e=VR(t)??{},{format:i,formatType:n}=e;return{format:i,formatType:n}}}function lAe(t,e){var a;switch(e){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(GR(t)&&ue(t.sort))return"ordinal";const{aggregate:i,bin:n,timeUnit:s}=t;if(s)return"temporal";if(n||i&&!Md(i)&&!Ll(i))return"quantitative";if(zu(t)&&((a=t.scale)!=null&&a.type))switch(GF[t.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Fo(t){if(Te(t))return t;if(ZS(t))return t.condition}function Vi(t){if(Je(t))return t;if(bw(t))return t.condition}function EJ(t,e,i,n={}){if(Ie(t)||ii(t)||vd(t)){const s=Ie(t)?"string":ii(t)?"number":"boolean";return be(d2e(e,s,t)),{value:t}}return Je(t)?qv(t,e,i,n):bw(t)?{...t,condition:qv(t.condition,e,i,n)}:t}function qv(t,e,i,n){if(wJ(t)){const{format:s,formatType:a,...c}=t;if(fu(a)&&!i.customFormatTypes)return be(X$(e)),qv(c,e,i,n)}else{const s=s_(t)?"axis":mJ(t)?"legend":qR(t)?"header":null;if(s&&t[s]){const{format:a,formatType:c,...d}=t[s];if(fu(c)&&!i.customFormatTypes)return be(X$(e)),qv({...t,[s]:d},e,i,n)}}return Te(t)?HR(t,e,n):cAe(t)}function cAe(t){let e=t.type;if(e)return t;const{datum:i}=t;return e=ii(i)?"quantitative":Ie(i)?"nominal":Uu(i)?"temporal":void 0,{...t,type:e}}function HR(t,e,{compositeMark:i=!1}={}){const{aggregate:n,timeUnit:s,bin:a,field:c}=t,d={...t};if(!i&&n&&!bR(n)&&!Md(n)&&!Ll(n)&&(be(u2e(n)),delete d.aggregate),s&&(d.timeUnit=wn(s)),c&&(d.field=`${c}`),hi(a)&&(d.bin=ex(a,e)),un(a)&&!cn(e)&&be(V2e(e)),ns(d)){const{type:f}=d,u=_Me(f);f!==u&&(d.type=u),f!=="quantitative"&&SK(n)&&(be(f2e(f,n)),d.type="quantitative")}else if(!gK(e)){const f=lAe(d,e);d.type=f}if(ns(d)){const{compatible:f,warning:u}=dAe(d,e)||{};f===!1&&be(u)}if(GR(d)&&Ie(d.sort)){const{sort:f}=d;if(tU(f))return{...d,sort:{encoding:f}};const u=f.substr(1);if(f.charAt(0)==="-"&&tU(u))return{...d,sort:{encoding:u,order:"descending"}}}if(qR(d)){const{header:f}=d;if(f){const{orient:u,...o}=f;if(u)return{...d,header:{...o,labelOrient:f.labelOrient||u,titleOrient:f.titleOrient||u}}}}return d}function ex(t,e){return vd(t)?{maxbins:U$(e)}:t==="binned"?{binned:!0}:!t.maxbins&&!t.step?{...t,maxbins:U$(e)}:t}const ih={compatible:!0};function dAe(t,e){const i=t.type;if(i==="geojson"&&e!=="shape")return{compatible:!1,warning:`Channel ${e} should not be used with a geojson data.`};switch(e){case Sl:case xl:case LS:return zv(t)?ih:{compatible:!1,warning:g2e(e)};case Ti:case ln:case xd:case A_:case Os:case Uo:case zo:case hw:case _w:case DS:case au:case PS:case $S:case Du:case Lr:case Sa:case US:return ih;case Ba:case Cr:case xa:case Ia:return i!==cu?{compatible:!1,warning:`Channel ${e} should be used with a quantitative field only, not ${t.type} field.`}:ih;case Xl:case Bd:case Id:case kd:case Yl:case Hl:case Wl:case Ea:case $o:return i==="nominal"&&!t.sort?{compatible:!1,warning:`Channel ${e} should not be used with an unsorted discrete field.`}:ih;case Ns:case Fd:return!zv(t)&&!nAe(t)?{compatible:!1,warning:m2e(e)}:ih;case pw:return t.type==="nominal"&&!("sort"in t)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:ih}}function r_(t){const{formatType:e}=jv(t);return e==="time"||!e&&fAe(t)}function fAe(t){return t&&(t.type==="temporal"||Te(t)&&!!t.timeUnit)}function tx(t,{timeUnit:e,type:i,wrapTime:n,undefinedIfExprNotRequired:s}){var f;const a=e&&((f=wn(e))==null?void 0:f.unit);let c=a||i==="temporal",d;return yw(t)?d=t.expr:Ce(t)?d=t.signal:Uu(t)?(c=!0,d=lu(t)):(Ie(t)||ii(t))&&c&&(d=`datetime(${ui(t)})`,nMe(a)&&(ii(t)&&t<1e4||Ie(t)&&isNaN(Date.parse(t)))&&(d=lu({[a]:t}))),d?n&&c?`time(${d})`:d:s?void 0:ui(t)}function SJ(t,e){const{type:i}=t;return e.map(n=>{const s=tx(n,{timeUnit:Te(t)?t.timeUnit:void 0,type:i,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:n})}function Tw(t,e){return hi(t.bin)?Kl(e)&&["ordinal","nominal"].includes(t.type):(console.warn("Only call this method for binned field defs."),!1)}const sU={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function vw(t){return t==null?void 0:t.condition}const xJ=["domain","grid","labels","ticks","title"],uAe={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},BJ={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},hAe={...BJ,style:1,labelExpr:1,encoding:1};function rU(t){return!!hAe[t]}const pAe={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},IJ=me(pAe);function Jl(t){return"mark"in t}class ix{constructor(e,i){this.name=e,this.run=i}hasMatchingType(e){return Jl(e)?GMe(e.mark)===this.name:!1}}function Df(t,e){const i=t&&t[e];return i?ue(i)?su(i,n=>!!n.field):Te(i)||ZS(i):!1}function kJ(t,e){const i=t&&t[e];return i?ue(i)?su(i,n=>!!n.field):Te(i)||Go(i)||bw(i):!1}function HF(t,e){if(cn(e)){const i=t[e];if((Te(i)||Go(i))&&(XK(i.type)||Te(i)&&i.timeUnit)){const n=yR(e);return kJ(t,n)}}return!1}function YR(t){return su(gFe,e=>{if(Df(t,e)){const i=t[e];if(ue(i))return su(i,n=>!!n.aggregate);{const n=Fo(i);return n&&!!n.aggregate}}return!1})}function FJ(t,e){const i=[],n=[],s=[],a=[],c={};return XR(t,(d,f)=>{if(Te(d)){const{field:u,aggregate:o,bin:g,timeUnit:w,...m}=d;if(o||w||g){const l=VR(d),T=l==null?void 0:l.title;let b=xe(d,{forAs:!0});const S={...T?[]:{title:op(d,e,{allowDisabling:!0})},...m,field:b};if(o){let x;if(Md(o)?(x="argmax",b=xe({op:"argmax",field:o.argmax},{forAs:!0}),S.field=`${b}.${u}`):Ll(o)?(x="argmin",b=xe({op:"argmin",field:o.argmin},{forAs:!0}),S.field=`${b}.${u}`):o!=="boxplot"&&o!=="errorbar"&&o!=="errorband"&&(x=o),x){const B={op:x,as:b};u&&(B.field=u),a.push(B)}}else if(i.push(b),ns(d)&&hi(g)){if(n.push({bin:g,field:u,as:b}),i.push(xe(d,{binSuffix:"end"})),Tw(d,f)&&i.push(xe(d,{binSuffix:"range"})),cn(f)){const x={field:`${b}_end`};c[`${f}2`]=x}S.bin="binned",gK(f)||(S.type=cu)}else if(w){s.push({timeUnit:w,field:u,as:b});const x=ns(d)&&d.type!==t_&&"time";x&&(f===hw||f===au?S.formatType=x:BFe(f)?S.legend={formatType:x,...S.legend}:cn(f)&&(S.axis={formatType:x,...S.axis}))}c[f]=S}else i.push(u),c[f]=t[f]}else c[f]=t[f]}),{bins:n,timeUnits:s,aggregate:a,groupby:i,encoding:c}}function _Ae(t,e,i){const n=kFe(e,i);if(n){if(n==="binned"){const s=t[e===Ea?Ti:ln];return!!(Te(s)&&Te(t[e])&&un(s.bin))}}else return!1;return!0}function yAe(t,e,i,n){const s={};for(const a of me(t))yK(a)||be(y2e(a));for(let a of vFe){if(!t[a])continue;const c=t[a];if(O_(a)){const d=wK(a),f=s[d];if(Te(f)){if(pMe(f.type)&&Te(c)&&!f.timeUnit){be(l2e(d));continue}}else a=d,be(c2e(d))}if(a==="angle"&&e==="arc"&&!t.theta&&(be(o2e),a=Lr),!_Ae(t,a,e)){be(GS(a,e));continue}if(a===Yl&&e==="line"){const d=Fo(t[a]);if(d!=null&&d.aggregate){be(p2e);continue}}if(a===Os&&(i?"fill"in t:"stroke"in t)){be(LK("encoding",{fill:"fill"in t,stroke:"stroke"in t}));continue}if(a===_w||a===pw&&!ue(c)&&!_a(c)||a===au&&ue(c))c&&(s[a]=ke(c).reduce((d,f)=>(Te(f)?d.push(HR(f,a)):be(qF(f,a)),d),[]));else{if(a===au&&c===null)s[a]=null;else if(!Te(c)&&!Go(c)&&!_a(c)&&!QS(c)&&!Ce(c)){be(qF(c,a));continue}s[a]=EJ(c,a,n)}}return s}function nx(t,e){const i={};for(const n of me(t)){const s=EJ(t[n],n,e,{compositeMark:!0});i[n]=s}return i}function gAe(t){const e=[];for(const i of me(t))if(Df(t,i)){const n=t[i],s=ke(n);for(const a of s)Te(a)?e.push(a):ZS(a)&&e.push(a.condition)}return e}function XR(t,e,i){if(t)for(const n of me(t)){const s=t[n];if(ue(s))for(const a of s)e.call(i,a,n);else e.call(i,s,n)}}function mAe(t,e,i,n){return t?me(t).reduce((s,a)=>{const c=t[a];return ue(c)?c.reduce((d,f)=>e.call(n,d,f,a),s):e.call(n,s,c,a)},i):i}function MJ(t,e){return me(e).reduce((i,n)=>{switch(n){case Ti:case ln:case PS:case US:case $S:case Ea:case $o:case xd:case A_:case Lr:case Hl:case Sa:case Wl:case xa:case Ba:case Ia:case Cr:case hw:case Ns:case Du:case au:return i;case pw:if(t==="line"||t==="trail")return i;case _w:case DS:{const s=e[n];if(ue(s)||Te(s))for(const a of ke(s))a.aggregate||i.push(xe(a,{}));return i}case Yl:if(t==="trail")return i;case Os:case Uo:case zo:case Xl:case Bd:case Id:case Fd:case kd:{const s=Fo(e[n]);return s&&!s.aggregate&&i.push(xe(s,{})),i}}},[])}function wAe(t){const{tooltip:e,...i}=t;if(!e)return{filteredEncoding:i};let n,s;if(ue(e)){for(const a of e)a.aggregate?(n||(n=[]),n.push(a)):(s||(s=[]),s.push(a));n&&(i.tooltip=n)}else e.aggregate?i.tooltip=e:s=e;return ue(s)&&s.length===1&&(s=s[0]),{customTooltipWithoutAggregatedField:s,filteredEncoding:i}}function YF(t,e,i,n=!0){if("tooltip"in i)return{tooltip:i.tooltip};const s=t.map(({fieldPrefix:c,titlePrefix:d})=>{const f=n?` of ${KR(e)}`:"";return{field:c+e.field,type:e.type,title:Ce(d)?{signal:`${d}"${escape(f)}"`}:d+f}}),a=gAe(i).map(tAe);return{tooltip:[...s,...ro(a,Ot)]}}function KR(t){const{title:e,field:i}=t;return Pi(e,i)}function JR(t,e,i,n,s){const{scale:a,axis:c}=i;return({partName:d,mark:f,positionPrefix:u,endPositionPrefix:o=void 0,extraEncoding:g={}})=>{const w=KR(i);return AJ(t,d,s,{mark:f,encoding:{[e]:{field:`${u}_${i.field}`,type:i.type,...w!==void 0?{title:w}:{},...a!==void 0?{scale:a}:{},...c!==void 0?{axis:c}:{}},...Ie(o)?{[`${e}2`]:{field:`${o}_${i.field}`}}:{},...n,...g}})}}function AJ(t,e,i,n){const{clip:s,color:a,opacity:c}=t,d=t.type;return t[e]||t[e]===void 0&&i[e]?[{...n,mark:{...i[e],...s?{clip:s}:{},...a?{color:a}:{},...c?{opacity:c}:{},...ko(n.mark)?n.mark:{type:n.mark},style:`${d}-${String(e)}`,...vd(t[e])?{}:t[e]}}]:[]}function OJ(t,e,i){const{encoding:n}=t,s=e==="vertical"?"y":"x",a=n[s],c=n[`${s}2`],d=n[`${s}Error`],f=n[`${s}Error2`];return{continuousAxisChannelDef:v0(a,i),continuousAxisChannelDef2:v0(c,i),continuousAxisChannelDefError:v0(d,i),continuousAxisChannelDefError2:v0(f,i),continuousAxis:s}}function v0(t,e){if(t!=null&&t.aggregate){const{aggregate:i,...n}=t;return i!==e&&be(G2e(i,e)),n}else return t}function NJ(t,e){const{mark:i,encoding:n}=t,{x:s,y:a}=n;if(ko(i)&&i.orient)return i.orient;if(Fc(s)){if(Fc(a)){const c=Te(s)&&s.aggregate,d=Te(a)&&a.aggregate;if(!c&&d===e)return"vertical";if(!d&&c===e)return"horizontal";if(c===e&&d===e)throw new Error("Both x and y cannot have aggregate");return r_(a)&&!r_(s)?"horizontal":"vertical"}return"horizontal"}else{if(Fc(a))return"vertical";throw new Error(`Need a valid continuous axis for ${e}s`)}}const Gv="boxplot",bAe=["box","median","outliers","rule","ticks"],TAe=new ix(Gv,RJ);function CJ(t){return ii(t)?"tukey":t}function RJ(t,{config:e}){t={...t,encoding:nx(t.encoding,e)};const{mark:i,encoding:n,params:s,projection:a,...c}=t,d=ko(i)?i:{type:i};s&&be(CK("boxplot"));const f=d.extent??e.boxplot.extent,u=Kt("size",d,e),o=d.invalid,g=CJ(f),{bins:w,timeUnits:m,transform:l,continuousAxisChannelDef:T,continuousAxis:b,groupby:S,aggregate:x,encodingWithoutContinuousAxis:B,ticksOrient:F,boxOrient:I,customTooltipWithoutAggregatedField:A}=vAe(t,f,e),{color:O,size:R,...D}=B,P=re=>JR(d,b,T,re,e.boxplot),U=P(D),Y=P(B),z=P({...D,...R?{size:R}:{}}),W=YF([{fieldPrefix:g==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:g==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],T,B),V={type:"tick",color:"black",opacity:1,orient:F,invalid:o,aria:!1},H=g==="min-max"?W:YF([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],T,B),J=[...U({partName:"rule",mark:{type:"rule",invalid:o,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:H}),...U({partName:"rule",mark:{type:"rule",invalid:o,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:H}),...U({partName:"ticks",mark:V,positionPrefix:"lower_whisker",extraEncoding:H}),...U({partName:"ticks",mark:V,positionPrefix:"upper_whisker",extraEncoding:H})],G=[...g!=="tukey"?J:[],...Y({partName:"box",mark:{type:"bar",...u?{size:u}:{},orient:I,invalid:o,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:W}),...z({partName:"median",mark:{type:"tick",invalid:o,...Me(e.boxplot.median)&&e.boxplot.median.color?{color:e.boxplot.median.color}:{},...u?{size:u}:{},orient:F,aria:!1},positionPrefix:"mid_box",extraEncoding:W})];if(g==="min-max")return{...c,transform:(c.transform??[]).concat(l),layer:G};const le=`datum["lower_box_${T.field}"]`,pe=`datum["upper_box_${T.field}"]`,ne=`(${pe} - ${le})`,Ae=`${le} - ${f} * ${ne}`,fe=`${pe} + ${f} * ${ne}`,Fe=`datum["${T.field}"]`,je={joinaggregate:LJ(T.field),groupby:S},_t={transform:[{filter:`(${Ae} <= ${Fe}) && (${Fe} <= ${fe})`},{aggregate:[{op:"min",field:T.field,as:`lower_whisker_${T.field}`},{op:"max",field:T.field,as:`upper_whisker_${T.field}`},{op:"min",field:`lower_box_${T.field}`,as:`lower_box_${T.field}`},{op:"max",field:`upper_box_${T.field}`,as:`upper_box_${T.field}`},...x],groupby:S}],layer:J},{tooltip:Ct,...zt}=D,{scale:_e,axis:q}=T,j=KR(T),L=bs(q,["title"]),K=AJ(d,"outliers",e.boxplot,{transform:[{filter:`(${Fe} < ${Ae}) || (${Fe} > ${fe})`}],mark:"point",encoding:{[b]:{field:T.field,type:T.type,...j!==void 0?{title:j}:{},..._e!==void 0?{scale:_e}:{},...ti(L)?{}:{axis:L}},...zt,...O?{color:O}:{},...A?{tooltip:A}:{}}})[0];let Z;const oe=[...w,...m,je];return K?Z={transform:oe,layer:[K,_t]}:(Z=_t,Z.transform.unshift(...oe)),{...c,layer:[Z,{transform:l,layer:G}]}}function LJ(t){return[{op:"q1",field:t,as:`lower_box_${t}`},{op:"q3",field:t,as:`upper_box_${t}`}]}function vAe(t,e,i){const n=NJ(t,Gv),{continuousAxisChannelDef:s,continuousAxis:a}=OJ(t,n,Gv),c=s.field,d=CJ(e),f=[...LJ(c),{op:"median",field:c,as:`mid_box_${c}`},{op:"min",field:c,as:(d==="min-max"?"lower_whisker_":"min_")+c},{op:"max",field:c,as:(d==="min-max"?"upper_whisker_":"max_")+c}],u=d==="min-max"||d==="tukey"?[]:[{calculate:`datum["upper_box_${c}"] - datum["lower_box_${c}"]`,as:`iqr_${c}`},{calculate:`min(datum["upper_box_${c}"] + datum["iqr_${c}"] * ${e}, datum["max_${c}"])`,as:`upper_whisker_${c}`},{calculate:`max(datum["lower_box_${c}"] - datum["iqr_${c}"] * ${e}, datum["min_${c}"])`,as:`lower_whisker_${c}`}],{[a]:o,...g}=t.encoding,{customTooltipWithoutAggregatedField:w,filteredEncoding:m}=wAe(g),{bins:l,timeUnits:T,aggregate:b,groupby:S,encoding:x}=FJ(m,i),B=n==="vertical"?"horizontal":"vertical",F=n,I=[...l,...T,{aggregate:[...b,...f],groupby:S},...u];return{bins:l,timeUnits:T,transform:I,groupby:S,aggregate:b,continuousAxisChannelDef:s,continuousAxis:a,encodingWithoutContinuousAxis:x,ticksOrient:B,boxOrient:F,customTooltipWithoutAggregatedField:w}}const QR="errorbar",EAe=["ticks","rule"],SAe=new ix(QR,DJ);function DJ(t,{config:e}){t={...t,encoding:nx(t.encoding,e)};const{transform:i,continuousAxisChannelDef:n,continuousAxis:s,encodingWithoutContinuousAxis:a,ticksOrient:c,markDef:d,outerSpec:f,tooltipEncoding:u}=PJ(t,QR,e);delete a.size;const o=JR(d,s,n,a,e.errorbar),g=d.thickness,w=d.size,m={type:"tick",orient:c,aria:!1,...g!==void 0?{thickness:g}:{},...w!==void 0?{size:w}:{}},l=[...o({partName:"ticks",mark:m,positionPrefix:"lower",extraEncoding:u}),...o({partName:"ticks",mark:m,positionPrefix:"upper",extraEncoding:u}),...o({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...g!==void 0?{size:g}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u})];return{...f,transform:i,...l.length>1?{layer:l}:{...l[0]}}}function xAe(t,e){const{encoding:i}=t;if(BAe(i))return{orient:NJ(t,e),inputType:"raw"};const n=IAe(i),s=kAe(i),a=i.x,c=i.y;if(n){if(s)throw new Error(`${e} cannot be both type aggregated-upper-lower and aggregated-error`);const d=i.x2,f=i.y2;if(Je(d)&&Je(f))throw new Error(`${e} cannot have both x2 and y2`);if(Je(d)){if(Fc(a))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${e}`)}else if(Je(f)){if(Fc(c))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${e}`)}throw new Error("No ranged axis")}else{const d=i.xError,f=i.xError2,u=i.yError,o=i.yError2;if(Je(f)&&!Je(d))throw new Error(`${e} cannot have xError2 without xError`);if(Je(o)&&!Je(u))throw new Error(`${e} cannot have yError2 without yError`);if(Je(d)&&Je(u))throw new Error(`${e} cannot have both xError and yError with both are quantiative`);if(Je(d)){if(Fc(a))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Je(u)){if(Fc(c))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function BAe(t){return(Je(t.x)||Je(t.y))&&!Je(t.x2)&&!Je(t.y2)&&!Je(t.xError)&&!Je(t.xError2)&&!Je(t.yError)&&!Je(t.yError2)}function IAe(t){return Je(t.x2)||Je(t.y2)}function kAe(t){return Je(t.xError)||Je(t.xError2)||Je(t.yError)||Je(t.yError2)}function PJ(t,e,i){const{mark:n,encoding:s,params:a,projection:c,...d}=t,f=ko(n)?n:{type:n};a&&be(CK(e));const{orient:u,inputType:o}=xAe(t,e),{continuousAxisChannelDef:g,continuousAxisChannelDef2:w,continuousAxisChannelDefError:m,continuousAxisChannelDefError2:l,continuousAxis:T}=OJ(t,u,e),{errorBarSpecificAggregate:b,postAggregateCalculates:S,tooltipSummary:x,tooltipTitleWithFieldName:B}=FAe(f,g,w,m,l,o,e,i),{[T]:F,[T==="x"?"x2":"y2"]:I,[T==="x"?"xError":"yError"]:A,[T==="x"?"xError2":"yError2"]:O,...R}=s,{bins:D,timeUnits:P,aggregate:U,groupby:Y,encoding:z}=FJ(R,i),W=[...U,...b],V=o!=="raw"?[]:Y,H=YF(x,g,z,B);return{transform:[...d.transform??[],...D,...P,...W.length===0?[]:[{aggregate:W,groupby:V}],...S],groupby:V,continuousAxisChannelDef:g,continuousAxis:T,encodingWithoutContinuousAxis:z,ticksOrient:u==="vertical"?"horizontal":"vertical",markDef:f,outerSpec:d,tooltipEncoding:H}}function FAe(t,e,i,n,s,a,c,d){let f=[],u=[];const o=e.field;let g,w=!1;if(a==="raw"){const m=t.center?t.center:t.extent?t.extent==="iqr"?"median":"mean":d.errorbar.center,l=t.extent?t.extent:m==="mean"?"stderr":"iqr";if(m==="median"!=(l==="iqr")&&be(q2e(m,l,c)),l==="stderr"||l==="stdev")f=[{op:l,field:o,as:`extent_${o}`},{op:m,field:o,as:`center_${o}`}],u=[{calculate:`datum["center_${o}"] + datum["extent_${o}"]`,as:`upper_${o}`},{calculate:`datum["center_${o}"] - datum["extent_${o}"]`,as:`lower_${o}`}],g=[{fieldPrefix:"center_",titlePrefix:uw(m)},{fieldPrefix:"upper_",titlePrefix:aU(m,l,"+")},{fieldPrefix:"lower_",titlePrefix:aU(m,l,"-")}],w=!0;else{let T,b,S;l==="ci"?(T="mean",b="ci0",S="ci1"):(T="median",b="q1",S="q3"),f=[{op:b,field:o,as:`lower_${o}`},{op:S,field:o,as:`upper_${o}`},{op:T,field:o,as:`center_${o}`}],g=[{fieldPrefix:"upper_",titlePrefix:op({field:o,aggregate:S,type:"quantitative"},d,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:op({field:o,aggregate:b,type:"quantitative"},d,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:op({field:o,aggregate:T,type:"quantitative"},d,{allowDisabling:!1})}]}}else{(t.center||t.extent)&&be(j2e(t.center,t.extent)),a==="aggregated-upper-lower"?(g=[],u=[{calculate:`datum["${i.field}"]`,as:`upper_${o}`},{calculate:`datum["${o}"]`,as:`lower_${o}`}]):a==="aggregated-error"&&(g=[{fieldPrefix:"",titlePrefix:o}],u=[{calculate:`datum["${o}"] + datum["${n.field}"]`,as:`upper_${o}`}],s?u.push({calculate:`datum["${o}"] + datum["${s.field}"]`,as:`lower_${o}`}):u.push({calculate:`datum["${o}"] - datum["${n.field}"]`,as:`lower_${o}`}));for(const m of u)g.push({fieldPrefix:m.as.substring(0,6),titlePrefix:ru(ru(m.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:u,errorBarSpecificAggregate:f,tooltipSummary:g,tooltipTitleWithFieldName:w}}function aU(t,e,i){return`${uw(t)} ${i} ${e}`}const ZR="errorband",MAe=["band","borders"],AAe=new ix(ZR,$J);function $J(t,{config:e}){t={...t,encoding:nx(t.encoding,e)};const{transform:i,continuousAxisChannelDef:n,continuousAxis:s,encodingWithoutContinuousAxis:a,markDef:c,outerSpec:d,tooltipEncoding:f}=PJ(t,ZR,e),u=c,o=JR(u,s,n,a,e.errorband),g=t.encoding.x!==void 0&&t.encoding.y!==void 0;let w={type:g?"area":"rect"},m={type:g?"line":"rule"};const l={...u.interpolate?{interpolate:u.interpolate}:{},...u.tension&&u.interpolate?{tension:u.tension}:{}};return g?(w={...w,...l,ariaRoleDescription:"errorband"},m={...m,...l,aria:!1}):u.interpolate?be(J$("interpolate")):u.tension&&be(J$("tension")),{...d,transform:i,layer:[...o({partName:"band",mark:w,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:f}),...o({partName:"borders",mark:m,positionPrefix:"lower",extraEncoding:f}),...o({partName:"borders",mark:m,positionPrefix:"upper",extraEncoding:f})]}}const UJ={};function e3(t,e,i){const n=new ix(t,e);UJ[t]={normalizer:n,parts:i}}function OAe(){return me(UJ)}e3(Gv,RJ,bAe);e3(QR,DJ,EAe);e3(ZR,$J,MAe);const NAe=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],zJ={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},jJ={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},CAe=me(zJ),RAe=me(jJ),LAe={header:1,headerRow:1,headerColumn:1,headerFacet:1},qJ=me(LAe),GJ=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],DAe={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},PAe={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},ya="_vgsid_",$Ae={point:{on:"click",fields:[ya],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function t3(t){return t==="legend"||!!(t!=null&&t.legend)}function tI(t){return t3(t)&&Me(t)}function i3(t){return!!(t!=null&&t.select)}function VJ(t){const e=[];for(const i of t||[]){if(i3(i))continue;const{expr:n,bind:s,...a}=i;if(s&&n){const c={...a,bind:s,init:n};e.push(c)}else{const c={...a,...n?{update:n}:{},...s?{bind:s}:{}};e.push(c)}}return e}function UAe(t){return sx(t)||s3(t)||n3(t)}function n3(t){return"concat"in t}function sx(t){return"vconcat"in t}function s3(t){return"hconcat"in t}function WJ({step:t,offsetIsDiscrete:e}){return e?t.for??"offset":"position"}function Mo(t){return Me(t)&&t.step!==void 0}function oU(t){return t.view||t.width||t.height}const lU=20,zAe={align:1,bounds:1,center:1,columns:1,spacing:1},jAe=me(zAe);function qAe(t,e,i){const n=i[e],s={},{spacing:a,columns:c}=n;a!==void 0&&(s.spacing=a),c!==void 0&&(JS(t)&&!ww(t.facet)||n3(t))&&(s.columns=c),sx(t)&&(s.columns=1);for(const d of jAe)if(t[d]!==void 0)if(d==="spacing"){const f=t[d];s[d]=ii(f)?f:{row:f.row??a,column:f.column??a}}else s[d]=t[d];return s}function XF(t,e){return t[e]??t[e==="width"?"continuousWidth":"continuousHeight"]}function Vv(t,e){const i=Wv(t,e);return Mo(i)?i.step:HJ}function Wv(t,e){const i=t[e]??t[e==="width"?"discreteWidth":"discreteHeight"];return Pi(i,{step:t.step})}const HJ=20,GAe={continuousWidth:200,continuousHeight:200,step:HJ},VAe={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:GAe,mark:PMe,arc:{},area:{},bar:zMe,circle:{},geoshape:{},image:{},line:{},point:{},rect:jMe,rule:{color:"black"},square:{},text:{color:"black"},tick:qMe,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:bMe,projection:{},legend:DAe,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:$Ae,style:{},title:{},facet:{spacing:lU},concat:{spacing:lU},normalizedNumberFormat:".0%"},Xo=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],cU={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},dU={blue:Xo[0],orange:Xo[1],red:Xo[2],teal:Xo[3],green:Xo[4],yellow:Xo[5],purple:Xo[6],pink:Xo[7],brown:Xo[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function WAe(t={}){return{signals:[{name:"color",value:Me(t)?{...dU,...t}:dU}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function HAe(t){return{signals:[{name:"fontSize",value:Me(t)?{...cU,...t}:cU}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function YAe(t){return{text:{font:t},style:{"guide-label":{font:t},"guide-title":{font:t},"group-title":{font:t},"group-subtitle":{font:t}}}}function YJ(t){const e=me(t||{}),i={};for(const n of e){const s=t[n];i[n]=vw(s)?IK(s):Ks(s)}return i}function XAe(t){const e=me(t),i={};for(const n of e)i[n]=YJ(t[n]);return i}const KAe=[...aJ,...IJ,...qJ,"background","padding","legend","lineBreak","scale","style","title","view"];function XJ(t={}){const{color:e,font:i,fontSize:n,selection:s,...a}=t,c=T_({},Qe(VAe),i?YAe(i):{},e?WAe(e):{},n?HAe(n):{},a||{});s&&v_(c,"selection",s,!0);const d=bs(c,KAe);for(const f of["background","lineBreak","padding"])c[f]&&(d[f]=Ks(c[f]));for(const f of aJ)c[f]&&(d[f]=hs(c[f]));for(const f of IJ)c[f]&&(d[f]=YJ(c[f]));for(const f of qJ)c[f]&&(d[f]=hs(c[f]));return c.legend&&(d.legend=hs(c.legend)),c.scale&&(d.scale=hs(c.scale)),c.style&&(d.style=XAe(c.style)),c.title&&(d.title=hs(c.title)),c.view&&(d.view=hs(c.view)),d}const JAe=new Set(["view",...OMe]),QAe=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],ZAe={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...DMe};function eOe(t){t=Qe(t);for(const e of QAe)delete t[e];if(t.axis)for(const e in t.axis)vw(t.axis[e])&&delete t.axis[e];if(t.legend)for(const e of NAe)delete t.legend[e];if(t.mark){for(const e of Z$)delete t.mark[e];t.mark.tooltip&&Me(t.mark.tooltip)&&delete t.mark.tooltip}t.params&&(t.signals=(t.signals||[]).concat(VJ(t.params)),delete t.params);for(const e of JAe){for(const n of Z$)delete t[e][n];const i=ZAe[e];if(i)for(const n of i)delete t[e][n];iOe(t,e)}for(const e of OAe())delete t[e];tOe(t);for(const e in t)Me(t[e])&&ti(t[e])&&delete t[e];return ti(t)?void 0:t}function tOe(t){const{titleMarkConfig:e,subtitleMarkConfig:i,subtitle:n}=BK(t.title);ti(e)||(t.style["group-title"]={...t.style["group-title"],...e}),ti(i)||(t.style["group-subtitle"]={...t.style["group-subtitle"],...i}),ti(n)?delete t.title:t.title=n}function iOe(t,e,i,n){const s=n?t[e][n]:t[e];e==="view"&&(i="cell");const a={...s,...t.style[i??e]};ti(a)||(t.style[i??e]=a),n||delete t[e]}function rx(t){return"layer"in t}function nOe(t){return"repeat"in t}function sOe(t){return!ue(t.repeat)&&t.repeat.layer}class r3{map(e,i){return JS(e)?this.mapFacet(e,i):nOe(e)?this.mapRepeat(e,i):s3(e)?this.mapHConcat(e,i):sx(e)?this.mapVConcat(e,i):n3(e)?this.mapConcat(e,i):this.mapLayerOrUnit(e,i)}mapLayerOrUnit(e,i){if(rx(e))return this.mapLayer(e,i);if(Jl(e))return this.mapUnit(e,i);throw new Error(TR(e))}mapLayer(e,i){return{...e,layer:e.layer.map(n=>this.mapLayerOrUnit(n,i))}}mapHConcat(e,i){return{...e,hconcat:e.hconcat.map(n=>this.map(n,i))}}mapVConcat(e,i){return{...e,vconcat:e.vconcat.map(n=>this.map(n,i))}}mapConcat(e,i){const{concat:n,...s}=e;return{...s,concat:n.map(a=>this.map(a,i))}}mapFacet(e,i){return{...e,spec:this.map(e.spec,i)}}mapRepeat(e,i){return{...e,spec:this.map(e.spec,i)}}}const rOe={zero:1,center:1,normalize:1};function aOe(t){return t in rOe}const oOe=new Set([iJ,HS,WS,Pv,XS,DR,PR,YS,nJ,LR]),lOe=new Set([HS,WS,iJ]);function nh(t){return Te(t)&&n_(t)==="quantitative"&&!t.bin}function fU(t,e,{orient:i,type:n}){const s=e==="x"?"y":"radius",a=e==="x",c=t[e],d=t[s];if(Te(c)&&Te(d))if(nh(c)&&nh(d)){if(c.stack)return e;if(d.stack)return s;const f=Te(c)&&!!c.aggregate,u=Te(d)&&!!d.aggregate;if(f!==u)return f?e:s;if(a&&n==="bar"){if(i==="vertical")return s;if(i==="horizontal")return e}}else{if(nh(c))return e;if(nh(d))return s}else{if(nh(c))return e;if(nh(d))return s}}function cOe(t){switch(t){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function KJ(t,e){var w,m;const i=ko(t)?t:{type:t},n=i.type;if(!oOe.has(n))return null;const s=fU(e,"x",i)||fU(e,"theta",i);if(!s)return null;const a=e[s],c=Te(a)?xe(a,{}):void 0,d=cOe(s),f=[],u=new Set;if(e[d]){const l=e[d],T=Te(l)?xe(l,{}):void 0;T&&T!==c&&(f.push(d),u.add(T));const b=d==="x"?"xOffset":"yOffset",S=e[b],x=Te(S)?xe(S,{}):void 0;x&&x!==c&&(f.push(b),u.add(x))}const o=EFe.reduce((l,T)=>{if(T!=="tooltip"&&Df(e,T)){const b=e[T];for(const S of ke(b)){const x=Fo(S);if(x.aggregate)continue;const B=xe(x,{});(!B||!u.has(B))&&l.push({channel:T,fieldDef:x})}}return l},[]);let g;return a.stack!==void 0?vd(a.stack)?g=a.stack?"zero":null:g=a.stack:lOe.has(n)&&(g="zero"),!g||!aOe(g)||YR(e)&&o.length===0?null:(w=a==null?void 0:a.scale)!=null&&w.type&&((m=a==null?void 0:a.scale)==null?void 0:m.type)!==Ts.LINEAR?(a!=null&&a.stack&&be($2e(a.scale.type)),null):Je(e[jo(s)])?(a.stack!==void 0&&be(P2e(s)),null):(Te(a)&&a.aggregate&&!RFe.has(a.aggregate)&&be(U2e(a.aggregate)),{groupbyChannels:f,groupbyFields:u,fieldChannel:s,impute:a.impute===null?!1:Od(n),stackBy:o,offset:g})}function dOe(t){const{point:e,line:i,...n}=t;return me(n).length>1?n:n.type}function fOe(t){for(const e of["line","area","rule","trail"])t[e]&&(t={...t,[e]:bs(t[e],["point","line"])});return t}function iI(t,e={},i){return t.point==="transparent"?{opacity:0}:t.point?Me(t.point)?t.point:{}:t.point!==void 0?null:e.point||i.shape?Me(e.point)?e.point:{}:void 0}function uU(t,e={}){return t.line?t.line===!0?{}:t.line:t.line!==void 0?null:e.line?e.line===!0?{}:e.line:void 0}class uOe{constructor(){this.name="path-overlay"}hasMatchingType(e,i){if(Jl(e)){const{mark:n,encoding:s}=e,a=ko(n)?n:{type:n};switch(a.type){case"line":case"rule":case"trail":return!!iI(a,i[a.type],s);case"area":return!!iI(a,i[a.type],s)||!!uU(a,i[a.type])}}return!1}run(e,i,n){const{config:s}=i,{params:a,projection:c,mark:d,name:f,encoding:u,...o}=e,g=nx(u,s),w=ko(d)?d:{type:d},m=iI(w,s[w.type],g),l=w.type==="area"&&uU(w,s[w.type]),T=[{name:f,...a?{params:a}:{},mark:dOe({...w.type==="area"&&w.opacity===void 0&&w.fillOpacity===void 0?{opacity:.7}:{},...w}),encoding:bs(g,["shape"])}],b=KJ(w,g);let S=g;if(b){const{fieldChannel:x,offset:B}=b;S={...g,[x]:{...g[x],...B?{stack:B}:{}}}}return S=bs(S,["y2","x2"]),l&&T.push({...c?{projection:c}:{},mark:{type:"line",...Qp(w,["clip","interpolate","tension","tooltip"]),...l},encoding:S}),m&&T.push({...c?{projection:c}:{},mark:{type:"point",opacity:1,filled:!0,...Qp(w,["clip","tooltip"]),...m},encoding:S}),n({...o,layer:T},{...i,config:fOe(s)})}}function hOe(t,e){return e?ww(t)?QJ(t,e):JJ(t,e):t}function nI(t,e){return e?QJ(t,e):t}function KF(t,e,i){const n=e[t];if(ZMe(n)){if(n.repeat in i)return{...e,[t]:i[n.repeat]};be(e2e(n.repeat));return}return e}function JJ(t,e){if(t=KF("field",t,e),t!==void 0){if(t===null)return null;if(GR(t)&&fo(t.sort)){const i=KF("field",t.sort,e);t={...t,...i?{sort:i}:{}}}return t}}function hU(t,e){if(Te(t))return JJ(t,e);{const i=KF("datum",t,e);return i!==t&&!i.type&&(i.type="nominal"),i}}function pU(t,e){if(Je(t)){const i=hU(t,e);if(i)return i;if(QS(t))return{condition:t.condition}}else{if(bw(t)){const i=hU(t.condition,e);if(i)return{...t,condition:i};{const{condition:n,...s}=t;return s}}return t}}function QJ(t,e){const i={};for(const n in t)if(Pe(t,n)){const s=t[n];if(ue(s))i[n]=s.map(a=>pU(a,e)).filter(a=>a);else{const a=pU(s,e);a!==void 0&&(i[n]=a)}}return i}class pOe{constructor(){this.name="RuleForRangedLine"}hasMatchingType(e){if(Jl(e)){const{encoding:i,mark:n}=e;if(n==="line"||ko(n)&&n.type==="line")for(const s of TFe){const a=Pu(s),c=i[a];if(i[s]&&(Te(c)&&!un(c.bin)||Go(c)))return!0}}return!1}run(e,i,n){const{encoding:s,mark:a}=e;return be(T2e(!!s.x2,!!s.y2)),n({...e,mark:Me(a)?{...a,type:"rule"}:"rule"},i)}}class _Oe extends r3{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[TAe,SAe,AAe,new uOe,new pOe]}map(e,i){if(Jl(e)){const n=Df(e.encoding,Sl),s=Df(e.encoding,xl),a=Df(e.encoding,LS);if(n||s||a)return this.mapFacetedUnit(e,i)}return super.map(e,i)}mapUnit(e,i){const{parentEncoding:n,parentProjection:s}=i,a=nI(e.encoding,i.repeater),c={...e,...e.name?{name:[i.repeaterPrefix,e.name].filter(f=>f).join("_")}:{},...a?{encoding:a}:{}};if(n||s)return this.mapUnitWithParentEncodingOrProjection(c,i);const d=this.mapLayerOrUnit.bind(this);for(const f of this.nonFacetUnitNormalizers)if(f.hasMatchingType(c,i.config))return f.run(c,i,d);return c}mapRepeat(e,i){return sOe(e)?this.mapLayerRepeat(e,i):this.mapNonLayerRepeat(e,i)}mapLayerRepeat(e,i){const{repeat:n,spec:s,...a}=e,{row:c,column:d,layer:f}=n,{repeater:u={},repeaterPrefix:o=""}=i;return c||d?this.mapRepeat({...e,repeat:{...c?{row:c}:{},...d?{column:d}:{}},spec:{repeat:{layer:f},spec:s}},i):{...a,layer:f.map(g=>{const w={...u,layer:g},m=`${(s.name?`${s.name}_`:"")+o}child__layer_${bi(g)}`,l=this.mapLayerOrUnit(s,{...i,repeater:w,repeaterPrefix:m});return l.name=m,l})}}mapNonLayerRepeat(e,i){const{repeat:n,spec:s,data:a,...c}=e;!ue(n)&&e.columns&&(e=bs(e,["columns"]),be(H$("repeat")));const d=[],{repeater:f={},repeaterPrefix:u=""}=i,o=!ue(n)&&n.row||[f?f.row:null],g=!ue(n)&&n.column||[f?f.column:null],w=ue(n)&&n||[f?f.repeat:null];for(const l of w)for(const T of o)for(const b of g){const S={repeat:l,row:T,column:b,layer:f.layer},x=(s.name?`${s.name}_`:"")+u+"child__"+(ue(n)?`${bi(l)}`:(n.row?`row_${bi(T)}`:"")+(n.column?`column_${bi(b)}`:"")),B=this.map(s,{...i,repeater:S,repeaterPrefix:x});B.name=x,d.push(bs(B,["data"]))}const m=ue(n)?e.columns:n.column?n.column.length:1;return{data:s.data??a,align:"all",...c,columns:m,concat:d}}mapFacet(e,i){const{facet:n}=e;return ww(n)&&e.columns&&(e=bs(e,["columns"]),be(H$("facet"))),super.mapFacet(e,i)}mapUnitWithParentEncodingOrProjection(e,i){const{encoding:n,projection:s}=e,{parentEncoding:a,parentProjection:c,config:d}=i,f=yU({parentProjection:c,projection:s}),u=_U({parentEncoding:a,encoding:nI(n,i.repeater)});return this.mapUnit({...e,...f?{projection:f}:{},...u?{encoding:u}:{}},{config:d})}mapFacetedUnit(e,i){const{row:n,column:s,facet:a,...c}=e.encoding,{mark:d,width:f,projection:u,height:o,view:g,params:w,encoding:m,...l}=e,{facetMapping:T,layout:b}=this.getFacetMappingAndLayout({row:n,column:s,facet:a},i),S=nI(c,i.repeater);return this.mapFacet({...l,...b,facet:T,spec:{...f?{width:f}:{},...o?{height:o}:{},...g?{view:g}:{},...u?{projection:u}:{},mark:d,encoding:S,...w?{params:w}:{}}},i)}getFacetMappingAndLayout(e,i){const{row:n,column:s,facet:a}=e;if(n||s){a&&be(w2e([...n?[Sl]:[],...s?[xl]:[]]));const c={},d={};for(const f of[Sl,xl]){const u=e[f];if(u){const{align:o,center:g,spacing:w,columns:m,...l}=u;c[f]=l;for(const T of["align","center","spacing"])u[T]!==void 0&&(d[T]??(d[T]={}),d[T][f]=u[T])}}return{facetMapping:c,layout:d}}else{const{align:c,center:d,spacing:f,columns:u,...o}=a;return{facetMapping:hOe(o,i.repeater),layout:{...c?{align:c}:{},...d?{center:d}:{},...f?{spacing:f}:{},...u?{columns:u}:{}}}}}mapLayer(e,{parentEncoding:i,parentProjection:n,...s}){const{encoding:a,projection:c,...d}=e,f={...s,parentEncoding:_U({parentEncoding:i,encoding:a,layer:!0}),parentProjection:yU({parentProjection:n,projection:c})};return super.mapLayer({...d,...e.name?{name:[f.repeaterPrefix,e.name].filter(u=>u).join("_")}:{}},f)}}function _U({parentEncoding:t,encoding:e={},layer:i}){let n={};if(t){const s=new Set([...me(t),...me(e)]);for(const a of s){const c=e[a],d=t[a];if(Je(c)){const f={...d,...c};n[a]=f}else bw(c)?n[a]={...c,condition:{...d,...c.condition}}:c||c===null?n[a]=c:(i||_a(d)||Ce(d)||Je(d)||ue(d))&&(n[a]=d)}}else n=e;return!n||ti(n)?void 0:n}function yU(t){const{parentProjection:e,projection:i}=t;return e&&i&&be(a2e({parentProjection:e,projection:i})),i??e}function a3(t){return"filter"in t}function yOe(t){return(t==null?void 0:t.stop)!==void 0}function ZJ(t){return"lookup"in t}function gOe(t){return"data"in t}function mOe(t){return"param"in t}function wOe(t){return"pivot"in t}function bOe(t){return"density"in t}function TOe(t){return"quantile"in t}function vOe(t){return"regression"in t}function EOe(t){return"loess"in t}function SOe(t){return"sample"in t}function xOe(t){return"window"in t}function BOe(t){return"joinaggregate"in t}function IOe(t){return"flatten"in t}function kOe(t){return"calculate"in t}function eQ(t){return"bin"in t}function FOe(t){return"impute"in t}function MOe(t){return"timeUnit"in t}function AOe(t){return"aggregate"in t}function OOe(t){return"stack"in t}function NOe(t){return"fold"in t}function COe(t){return t.map(e=>a3(e)?{filter:rp(e.filter,hMe)}:e)}class ROe extends r3{map(e,i){return i.emptySelections??(i.emptySelections={}),i.selectionPredicates??(i.selectionPredicates={}),e=gU(e,i),super.map(e,i)}mapLayerOrUnit(e,i){if(e=gU(e,i),e.encoding){const n={};for(const[s,a]of nd(e.encoding))n[s]=tQ(a,i);e={...e,encoding:n}}return super.mapLayerOrUnit(e,i)}mapUnit(e,i){const{selection:n,...s}=e;return n?{...s,params:nd(n).map(([a,c])=>{const{init:d,bind:f,empty:u,...o}=c;o.type==="single"?(o.type="point",o.toggle=!1):o.type==="multi"&&(o.type="point"),i.emptySelections[a]=u!=="none";for(const g of gn(i.selectionPredicates[a]??{}))g.empty=u!=="none";return{name:a,value:d,select:o,bind:f}})}:e}}function gU(t,e){const{transform:i,...n}=t;if(i){const s=i.map(a=>{if(a3(a))return{filter:JF(a,e)};if(eQ(a)&&$u(a.bin))return{...a,bin:iQ(a.bin)};if(ZJ(a)){const{selection:c,...d}=a.from;return c?{...a,from:{param:c,...d}}:a}return a});return{...n,transform:s}}return t}function tQ(t,e){var n,s;const i=Qe(t);if(Te(i)&&$u(i.bin)&&(i.bin=iQ(i.bin)),zu(i)&&((s=(n=i.scale)==null?void 0:n.domain)!=null&&s.selection)){const{selection:a,...c}=i.scale.domain;i.scale.domain={...c,...a?{param:a}:{}}}if(QS(i))if(ue(i.condition))i.condition=i.condition.map(a=>{const{selection:c,param:d,test:f,...u}=a;return d?a:{...u,test:JF(a,e)}});else{const{selection:a,param:c,test:d,...f}=tQ(i.condition,e);i.condition=c?i.condition:{...f,test:JF(i.condition,e)}}return i}function iQ(t){const e=t.extent;if(e!=null&&e.selection){const{selection:i,...n}=e;return{...t,extent:{...n,param:i}}}return t}function JF(t,e){const i=n=>rp(n,s=>{var a;const c=e.emptySelections[s]??!0,d={param:s,empty:c};return(a=e.selectionPredicates)[s]??(a[s]=[]),e.selectionPredicates[s].push(d),d});return t.selection?i(t.selection):rp(t.test||t.filter,n=>n.selection?i(n.selection):n)}class QF extends r3{map(e,i){const n=i.selections??[];if(e.params&&!Jl(e)){const s=[];for(const a of e.params)i3(a)?n.push(a):s.push(a);e.params=s}return i.selections=n,super.map(e,i)}mapUnit(e,i){const n=i.selections;if(!n||!n.length)return e;const s=(i.path??[]).concat(e.name),a=[];for(const c of n)if(!c.views||!c.views.length)a.push(c);else for(const d of c.views)(Ie(d)&&(d===e.name||s.includes(d))||ue(d)&&d.map(f=>s.indexOf(f)).every((f,u,o)=>f!==-1&&(u===0||f>o[u-1])))&&a.push(c);return a.length&&(e.params=a),e}}for(const t of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const e=QF.prototype[t];QF.prototype[t]=function(i,n){return e.call(this,i,LOe(i,n))}}function LOe(t,e){return t.name?{...e,path:(e.path??[]).concat(t.name)}:e}function nQ(t,e){e===void 0&&(e=XJ(t.config));const i=UOe(t,e),{width:n,height:s}=t,a=zOe(i,{width:n,height:s,autosize:t.autosize},e);return{...i,...a?{autosize:a}:{}}}const DOe=new _Oe,POe=new ROe,$Oe=new QF;function UOe(t,e={}){const i={config:e};return $Oe.map(DOe.map(POe.map(t,i),i),i)}function mU(t){return Ie(t)?{type:t}:t??{}}function zOe(t,e,i){let{width:n,height:s}=e;const a=Jl(t)||rx(t),c={};a?n=="container"&&s=="container"?(c.type="fit",c.contains="padding"):n=="container"?(c.type="fit-x",c.contains="padding"):s=="container"&&(c.type="fit-y",c.contains="padding"):(n=="container"&&(be(q$("width")),n=void 0),s=="container"&&(be(q$("height")),s=void 0));const d={type:"pad",...c,...i?mU(i.autosize):{},...mU(t.autosize)};if(d.type==="fit"&&!a&&(be(GFe),d.type="pad"),n=="container"&&!(d.type=="fit"||d.type=="fit-x")&&be(G$("width")),s=="container"&&!(d.type=="fit"||d.type=="fit-y")&&be(G$("height")),!so(d,{type:"pad"}))return d}function jOe(t){return t==="fit"||t==="fit-x"||t==="fit-y"}function qOe(t){return t?`fit-${zS(t)}`:"fit"}const GOe=["background","padding"];function wU(t,e){const i={};for(const n of GOe)t&&t[n]!==void 0&&(i[n]=Ks(t[n]));return e&&(i.params=t.params),i}class Ql{constructor(e={},i={}){this.explicit=e,this.implicit=i}clone(){return new Ql(Qe(this.explicit),Qe(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(e){return Pi(this.explicit[e],this.implicit[e])}getWithExplicit(e){return this.explicit[e]!==void 0?{explicit:!0,value:this.explicit[e]}:this.implicit[e]!==void 0?{explicit:!1,value:this.implicit[e]}:{explicit:!1,value:void 0}}setWithExplicit(e,{value:i,explicit:n}){i!==void 0&&this.set(e,i,n)}set(e,i,n){return delete this[n?"implicit":"explicit"][e],this[n?"explicit":"implicit"][e]=i,this}copyKeyFromSplit(e,{explicit:i,implicit:n}){i[e]!==void 0?this.set(e,i[e],!0):n[e]!==void 0&&this.set(e,n[e],!1)}copyKeyFromObject(e,i){i[e]!==void 0&&this.set(e,i[e],!0)}copyAll(e){for(const i of me(e.combine())){const n=e.getWithExplicit(i);this.setWithExplicit(i,n)}}}function ja(t){return{explicit:!0,value:t}}function zs(t){return{explicit:!1,value:t}}function sQ(t){return(e,i,n,s)=>{const a=t(e.value,i.value);return a>0?e:a<0?i:ax(e,i,n,s)}}function ax(t,e,i,n){return t.explicit&&e.explicit&&be(A2e(i,n,t.value,e.value)),t}function rd(t,e,i,n,s=ax){return t===void 0||t.value===void 0?e:t.explicit&&!e.explicit?t:e.explicit&&!t.explicit?e:so(t.value,e.value)?t:s(t,e,i,n)}class VOe extends Ql{constructor(e={},i={},n=!1){super(e,i),this.explicit=e,this.implicit=i,this.parseNothing=n}clone(){const e=super.clone();return e.parseNothing=this.parseNothing,e}}function a_(t){return"url"in t}function om(t){return"values"in t}function rQ(t){return"name"in t&&!a_(t)&&!om(t)&&!Rc(t)}function Rc(t){return t&&(aQ(t)||oQ(t)||o3(t))}function aQ(t){return"sequence"in t}function oQ(t){return"sphere"in t}function o3(t){return"graticule"in t}var fi;(function(t){t[t.Raw=0]="Raw",t[t.Main=1]="Main",t[t.Row=2]="Row",t[t.Column=3]="Column",t[t.Lookup=4]="Lookup"})(fi||(fi={}));function lQ(t){const{signals:e,hasLegend:i,index:n,...s}=t;return s.field=Nr(s.field),s}function uu(t,e=!0,i=Rn){if(ue(t)){const n=t.map(s=>uu(s,e,i));return e?`[${n.join(", ")}]`:n}else if(Uu(t))return i(e?lu(t):iMe(t));return e?i(ui(t)):t}function WOe(t,e){for(const i of gn(t.component.selection??{})){const n=i.name;let s=`${n}${od}, ${i.resolve==="global"?"true":`{unit: ${Pf(t)}}`}`;for(const a of lx)a.defined(i)&&(a.signals&&(e=a.signals(t,i,e)),a.modifyExpr&&(s=a.modifyExpr(t,i,s)));e.push({name:n+SNe,on:[{events:{signal:i.name+od},update:`modify(${ve(i.name+hu)}, ${s})`}]})}return l3(e)}function HOe(t,e){if(t.component.selection&&me(t.component.selection).length){const i=ve(t.getName("cell"));e.unshift({name:"facet",value:{},on:[{events:Sd("mousemove","scope"),update:`isTuple(facet) ? facet : group(${i}).datum`}]})}return l3(e)}function YOe(t,e){let i=!1;for(const n of gn(t.component.selection??{})){const s=n.name,a=ve(s+hu);if(e.filter(d=>d.name===s).length===0){const d=n.resolve==="global"?"union":n.resolve,f=n.type==="point"?", true, true)":")";e.push({name:n.name,update:`${xQ}(${a}, ${ve(d)}${f}`})}i=!0;for(const d of lx)d.defined(n)&&d.topLevelSignals&&(e=d.topLevelSignals(t,n,e))}return i&&e.filter(s=>s.name==="unit").length===0&&e.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]}),l3(e)}function XOe(t,e){const i=[...e],n=Pf(t,{escape:!1});for(const s of gn(t.component.selection??{})){const a={name:s.name+hu};if(s.project.hasSelectionId&&(a.transform=[{type:"collect",sort:{field:ya}}]),s.init){const d=s.project.items.map(lQ);a.values=s.project.hasSelectionId?s.init.map(f=>({unit:n,[ya]:uu(f,!1)[0]})):s.init.map(f=>({unit:n,fields:d,values:uu(f,!1)}))}i.filter(d=>d.name===s.name+hu).length||i.push(a)}return i}function cQ(t,e){for(const i of gn(t.component.selection??{}))for(const n of lx)n.defined(i)&&n.marks&&(e=n.marks(t,i,e));return e}function KOe(t,e){for(const i of t.children)Ci(i)&&(e=cQ(i,e));return e}function JOe(t,e,i,n){const s=MQ(t,e.param,e);return{signal:or(i.get("type"))&&ue(n)&&n[0]>n[1]?`isValid(${s}) && reverse(${s})`:s}}function l3(t){return t.map(e=>(e.on&&!e.on.length&&delete e.on,e))}class si{constructor(e,i){this.debugName=i,this._children=[],this._parent=null,e&&(this.parent=e)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(e){this._parent=e,e&&e.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(e,i){if(this._children.includes(e)){be(n2e);return}i!==void 0?this._children.splice(i,0,e):this._children.push(e)}removeChild(e){const i=this._children.indexOf(e);return this._children.splice(i,1),i}remove(){let e=this._parent.removeChild(this);for(const i of this._children)i._parent=this._parent,this._parent.addChild(i,e++)}insertAsParentOf(e){const i=e.parent;i.removeChild(this),this.parent=i,e.parent=this}swapWithParent(){const e=this._parent,i=e.parent;for(const s of this._children)s.parent=e;this._children=[],e.removeChild(this);const n=e.parent.removeChild(e);this._parent=i,i.addChild(this,n),e.parent=this}}class es extends si{clone(){const e=new this.constructor;return e.debugName=`clone_${this.debugName}`,e._source=this._source,e._name=`clone_${this._name}`,e.type=this.type,e.refCounts=this.refCounts,e.refCounts[e._name]=0,e}constructor(e,i,n,s){super(e,i),this.type=n,this.refCounts=s,this._source=this._name=i,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${lK()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(e){this._source=e}}class uo extends si{clone(){return new uo(null,Qe(this.formula))}constructor(e,i){super(e),this.formula=i}static makeFromEncoding(e,i){const n=i.reduceFieldDef((s,a)=>{const{field:c,timeUnit:d}=a;if(d){const f=xe(a,{forAs:!0});s[Ot({as:f,field:c,timeUnit:d})]={as:f,field:c,timeUnit:d}}return s},{});return ti(n)?null:new uo(e,n)}static makeFromTransform(e,i){const{timeUnit:n,...s}={...i},a=wn(n),c={...s,timeUnit:a};return new uo(e,{[Ot(c)]:c})}merge(e){this.formula={...this.formula};for(const i in e.formula)this.formula[i]||(this.formula[i]=e.formula[i]);for(const i of e.children)e.removeChild(i),i.parent=this;e.remove()}removeFormulas(e){const i={};for(const[n,s]of nd(this.formula))e.has(s.as)||(i[n]=s);this.formula=i}producedFields(){return new Set(gn(this.formula).map(e=>e.as))}dependentFields(){return new Set(gn(this.formula).map(e=>e.field))}hash(){return`TimeUnit ${Ot(this.formula)}`}assemble(){const e=[];for(const i of gn(this.formula)){const{field:n,as:s,timeUnit:a}=i,{unit:c,utc:d,...f}=wn(a);e.push({field:Nr(n),type:"timeunit",...c?{units:VS(c)}:{},...d?{timezone:"utc"}:{},...f,as:[s,`${s}_end`]})}return e}}const Ew="_tuple_fields";class QOe{constructor(...e){this.items=e,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const ZOe={defined:()=>!0,parse:(t,e,i)=>{const n=e.name,s=e.project??(e.project=new QOe),a={},c={},d=new Set,f=(l,T)=>{const b=T==="visual"?l.channel:l.field;let S=bi(`${n}_${b}`);for(let x=1;d.has(S);x++)S=bi(`${n}_${b}_${x}`);return d.add(S),{[T]:S}},u=e.type,o=t.config.selection[u],g=i.value!==void 0?ke(i.value):null;let{fields:w,encodings:m}=Me(i.select)?i.select:{};if(!w&&!m&&g){for(const l of g)if(Me(l))for(const T of me(l))bFe(T)?(m||(m=[])).push(T):u==="interval"?(be(ZFe),m=o.encodings):(w??(w=[])).push(T)}!w&&!m&&(m=o.encodings,"fields"in o&&(w=o.fields));for(const l of m??[]){const T=t.fieldDef(l);if(T){let b=T.field;if(T.aggregate){be(VFe(l,T.aggregate));continue}else if(!b){be(W$(l));continue}if(T.timeUnit){b=t.vgField(l);const S={timeUnit:T.timeUnit,as:b,field:T.field};c[Ot(S)]=S}if(!a[b]){const S=u==="interval"&&Kl(l)&&or(t.getScaleComponent(l).get("type"))?"R":T.bin?"R-RE":"E",x={field:b,channel:l,type:S,index:s.items.length};x.signals={...f(x,"data"),...f(x,"visual")},s.items.push(a[b]=x),s.hasField[b]=a[b],s.hasSelectionId=s.hasSelectionId||b===ya,pK(l)?(x.geoChannel=l,x.channel=hK(l),s.hasChannel[x.channel]=a[b]):s.hasChannel[l]=a[b]}}else be(W$(l))}for(const l of w??[]){if(s.hasField[l])continue;const T={type:"E",field:l,index:s.items.length};T.signals={...f(T,"data")},s.items.push(T),s.hasField[l]=T,s.hasSelectionId=s.hasSelectionId||l===ya}g&&(e.init=g.map(l=>s.items.map(T=>Me(l)?l[T.geoChannel||T.channel]!==void 0?l[T.geoChannel||T.channel]:l[T.field]:l))),ti(c)||(s.timeUnit=new uo(null,c))},signals:(t,e,i)=>{const n=e.name+Ew;return i.filter(a=>a.name===n).length>0||e.project.hasSelectionId?i:i.concat({name:n,value:e.project.items.map(lQ)})}},Il={defined:t=>t.type==="interval"&&t.resolve==="global"&&t.bind&&t.bind==="scales",parse:(t,e)=>{const i=e.scales=[];for(const n of e.project.items){const s=n.channel;if(!Kl(s))continue;const a=t.getScaleComponent(s),c=a?a.get("type"):void 0;if(!a||!or(c)){be(YFe);continue}a.set("selectionExtent",{param:e.name,field:n.field},!0),i.push(n)}},topLevelSignals:(t,e,i)=>{const n=e.scales.filter(c=>i.filter(d=>d.name===c.signals.data).length===0);if(!t.parent||bU(t)||n.length===0)return i;const s=i.filter(c=>c.name===e.name)[0];let a=s.update;if(a.indexOf(xQ)>=0)s.update=`{${n.map(c=>`${ve(Nr(c.field))}: ${c.signals.data}`).join(", ")}}`;else{for(const c of n){const d=`${ve(Nr(c.field))}: ${c.signals.data}`;a.includes(d)||(a=`${a.substring(0,a.length-1)}, ${d}}`)}s.update=a}return i.concat(n.map(c=>({name:c.signals.data})))},signals:(t,e,i)=>{if(t.parent&&!bU(t))for(const n of e.scales){const s=i.filter(a=>a.name===n.signals.data)[0];s.push="outer",delete s.value,delete s.update}return i}};function ZF(t,e){return`domain(${ve(t.scaleName(e))})`}function bU(t){return t.parent&&P_(t.parent)&&!t.parent.parent}const lp="_brush",dQ="_scale_trigger",ly="geo_interval_init_tick",fQ="_init",eNe="_center",tNe={defined:t=>t.type==="interval",parse:(t,e,i)=>{var n;if(t.hasProjection){const s={...Me(i.select)?i.select:{}};s.fields=[ya],s.encodings||(s.encodings=i.value?me(i.value):[Ba,xa]),i.select={type:"interval",...s}}if(e.translate&&!Il.defined(e)){const s=`!event.item || event.item.mark.name !== ${ve(e.name+lp)}`;for(const a of e.events){if(!a.between){be(`${a} is not an ordered event stream for interval selections.`);continue}const c=ke((n=a.between[0]).filter??(n.filter=[]));c.indexOf(s)<0&&c.push(s)}}},signals:(t,e,i)=>{const n=e.name,s=n+od,a=gn(e.project.hasChannel).filter(d=>d.channel===Ti||d.channel===ln),c=e.init?e.init[0]:null;if(i.push(...a.reduce((d,f)=>d.concat(iNe(t,e,f,c&&c[f.index])),[])),t.hasProjection){const d=ve(t.projectionName()),f=t.projectionName()+eNe,{x:u,y:o}=e.project.hasChannel,g=u&&u.signals.visual,w=o&&o.signals.visual,m=u?c&&c[u.index]:`${f}[0]`,l=o?c&&c[o.index]:`${f}[1]`,T=I=>t.getSizeSignalRef(I).signal,b=`[[${g?g+"[0]":"0"}, ${w?w+"[0]":"0"}],[${g?g+"[1]":T("width")}, ${w?w+"[1]":T("height")}]]`;c&&(i.unshift({name:n+fQ,init:`[scale(${d}, [${u?m[0]:m}, ${o?l[0]:l}]), scale(${d}, [${u?m[1]:m}, ${o?l[1]:l}])]`}),(!u||!o)&&(i.find(A=>A.name===f)||i.unshift({name:f,update:`invert(${d}, [${T("width")}/2, ${T("height")}/2])`})));const S=`intersect(${b}, {markname: ${ve(t.getName("marks"))}}, unit.mark)`,x=`{unit: ${Pf(t)}}`,B=`vlSelectionTuples(${S}, ${x})`,F=a.map(I=>I.signals.visual);return i.concat({name:s,on:[{events:[...F.length?[{signal:F.join(" || ")}]:[],...c?[{signal:ly}]:[]],update:B}]})}else{if(!Il.defined(e)){const u=n+dQ,o=a.map(g=>{const w=g.channel,{data:m,visual:l}=g.signals,T=ve(t.scaleName(w)),b=t.getScaleComponent(w).get("type"),S=or(b)?"+":"";return`(!isArray(${m}) || (${S}invert(${T}, ${l})[0] === ${S}${m}[0] && ${S}invert(${T}, ${l})[1] === ${S}${m}[1]))`});o.length&&i.push({name:u,value:{},on:[{events:a.map(g=>({scale:t.scaleName(g.channel)})),update:o.join(" && ")+` ? ${u} : {}`}]})}const d=a.map(u=>u.signals.data),f=`unit: ${Pf(t)}, fields: ${n+Ew}, values`;return i.concat({name:s,...c?{init:`{${f}: ${uu(c)}}`}:{},...d.length?{on:[{events:[{signal:d.join(" || ")}],update:`${d.join(" && ")} ? {${f}: [${d}]} : null`}]}:{}})}},topLevelSignals:(t,e,i)=>(Ci(t)&&t.hasProjection&&e.init&&(i.filter(s=>s.name===ly).length||i.unshift({name:ly,value:null,on:[{events:"timer{1}",update:`${ly} === null ? {} : ${ly}`}]})),i),marks:(t,e,i)=>{const n=e.name,{x:s,y:a}=e.project.hasChannel,c=s==null?void 0:s.signals.visual,d=a==null?void 0:a.signals.visual,f=`data(${ve(e.name+hu)})`;if(Il.defined(e)||!s&&!a)return i;const u={x:s!==void 0?{signal:`${c}[0]`}:{value:0},y:a!==void 0?{signal:`${d}[0]`}:{value:0},x2:s!==void 0?{signal:`${c}[1]`}:{field:{group:"width"}},y2:a!==void 0?{signal:`${d}[1]`}:{field:{group:"height"}}};if(e.resolve==="global")for(const T of me(u))u[T]=[{test:`${f}.length && ${f}[0].unit === ${Pf(t)}`,...u[T]},{value:0}];const{fill:o,fillOpacity:g,cursor:w,...m}=e.mark,l=me(m).reduce((T,b)=>(T[b]=[{test:[s!==void 0&&`${c}[0] !== ${c}[1]`,a!==void 0&&`${d}[0] !== ${d}[1]`].filter(S=>S).join(" && "),value:m[b]},{value:null}],T),{});return[{name:`${n+lp}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:o},fillOpacity:{value:g}},update:u}},...i,{name:n+lp,type:"rect",clip:!0,encode:{enter:{...w?{cursor:{value:w}}:{},fill:{value:"transparent"}},update:{...u,...l}}}]}};function iNe(t,e,i,n){const s=!t.hasProjection,a=i.channel,c=i.signals.visual,d=ve(s?t.scaleName(a):t.projectionName()),f=w=>`scale(${d}, ${w})`,u=t.getSizeSignalRef(a===Ti?"width":"height").signal,o=`${a}(unit)`,g=e.events.reduce((w,m)=>[...w,{events:m.between[0],update:`[${o}, ${o}]`},{events:m,update:`[${c}[0], clamp(${o}, 0, ${u})]`}],[]);if(s){const w=i.signals.data,m=Il.defined(e),l=t.getScaleComponent(a),T=l?l.get("type"):void 0,b=n?{init:uu(n,!0,f)}:{value:[]};return g.push({events:{signal:e.name+dQ},update:or(T)?`[${f(`${w}[0]`)}, ${f(`${w}[1]`)}]`:"[0, 0]"}),m?[{name:w,on:[]}]:[{name:c,...b,on:g},{name:w,...n?{init:uu(n)}:{},on:[{events:{signal:c},update:`${c}[0] === ${c}[1] ? null : invert(${d}, ${c})`}]}]}else{const w=a===Ti?0:1,m=e.name+fQ,l=n?{init:`[${m}[0][${w}], ${m}[1][${w}]]`}:{value:[]};return[{name:c,...l,on:g}]}}const nNe={defined:t=>t.type==="point",signals:(t,e,i)=>{const n=e.name,s=n+Ew,a=e.project,c="(item().isVoronoi ? datum.datum : datum)",d=gn(t.component.selection??{}).reduce((g,w)=>w.type==="interval"?g.concat(w.name+lp):g,[]).map(g=>`indexof(item().mark.name, '${g}') < 0`).join(" && "),f=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${d?` && ${d}`:""}`;let u=`unit: ${Pf(t)}, `;if(e.project.hasSelectionId)u+=`${ya}: ${c}[${ve(ya)}]`;else{const g=a.items.map(w=>{const m=t.fieldDef(w.channel);return m!=null&&m.bin?`[${c}[${ve(t.vgField(w.channel,{}))}], ${c}[${ve(t.vgField(w.channel,{binSuffix:"end"}))}]]`:`${c}[${ve(w.field)}]`}).join(", ");u+=`fields: ${s}, values: [${g}]`}const o=e.events;return i.concat([{name:n+od,on:o?[{events:o,update:`${f} ? {${u}} : null`,force:!0}]:[]}])}};function C_(t,e,i,n){const s=QS(e)&&e.condition,a=n(e);if(s){const d=ke(s).map(f=>{const u=n(f);if(QMe(f)){const{param:o,empty:g}=f;return{test:FQ(t,{param:o,empty:g}),...u}}else return{test:Xv(t,f.test),...u}});return{[i]:[...d,...a!==void 0?[a]:[]]}}else return a!==void 0?{[i]:a}:{}}function c3(t,e="text"){const i=t.encoding[e];return C_(t,i,e,n=>ox(n,t.config))}function ox(t,e,i="datum"){if(t){if(_a(t))return mi(t.value);if(Je(t)){const{format:n,formatType:s}=jv(t);return jR({fieldOrDatumDef:t,format:n,formatType:s,expr:i,config:e})}}}function uQ(t,e={}){const{encoding:i,markDef:n,config:s,stack:a}=t,c=i.tooltip;if(ue(c))return{tooltip:TU({tooltip:c},a,s,e)};{const d=e.reactiveGeom?"datum.datum":"datum";return C_(t,c,"tooltip",f=>{const u=ox(f,s,d);if(u)return u;if(f===null)return;let o=Kt("tooltip",n,s);if(o===!0&&(o={content:"encoding"}),Ie(o))return{value:o};if(Me(o))return Ce(o)?o:o.content==="encoding"?TU(i,a,s,e):{signal:d}})}}function hQ(t,e,i,{reactiveGeom:n}={}){const s={...i,...i.tooltipFormat},a={},c=n?"datum.datum":"datum",d=[];function f(o,g){const w=Pu(g),m=ns(o)?o:{...o,type:t[w].type},l=m.title||WR(m,s),T=ke(l).join(", ");let b;if(cn(g)){const S=g==="x"?"x2":"y2",x=Fo(t[S]);if(un(m.bin)&&x){const B=xe(m,{expr:c}),F=xe(x,{expr:c}),{format:I,formatType:A}=jv(m);b=mw(B,F,I,A,s),a[S]=!0}}if((cn(g)||g===Lr||g===Sa)&&e&&e.fieldChannel===g&&e.offset==="normalize"){const{format:S,formatType:x}=jv(m);b=jR({fieldOrDatumDef:m,format:S,formatType:x,expr:c,config:s,normalizeStack:!0}).signal}b??(b=ox(m,s,c).signal),d.push({channel:g,key:T,value:b})}XR(t,(o,g)=>{Te(o)?f(o,g):ZS(o)&&f(o.condition,g)});const u={};for(const{channel:o,key:g,value:w}of d)!a[o]&&!u[g]&&(u[g]=w);return u}function TU(t,e,i,{reactiveGeom:n}={}){const s=hQ(t,e,i,{reactiveGeom:n}),a=nd(s).map(([c,d])=>`"${c}": ${d}`);return a.length>0?{signal:`{${a.join(", ")}}`}:void 0}function sNe(t){const{markDef:e,config:i}=t,n=Kt("aria",e,i);return n===!1?{}:{...n?{aria:n}:{},...rNe(t),...aNe(t)}}function rNe(t){const{mark:e,markDef:i,config:n}=t;if(n.aria===!1)return{};const s=Kt("ariaRoleDescription",i,n);return s!=null?{ariaRoleDescription:{value:s}}:e in zFe?{}:{ariaRoleDescription:{value:e}}}function aNe(t){const{encoding:e,markDef:i,config:n,stack:s}=t,a=e.description;if(a)return C_(t,a,"description",f=>ox(f,t.config));const c=Kt("description",i,n);if(c!=null)return{description:mi(c)};if(n.aria===!1)return{};const d=hQ(e,s,n);if(!ti(d))return{description:{signal:nd(d).map(([f,u],o)=>`"${o>0?"; ":""}${f}: " + (${u})`).join(" + ")}}}function Zi(t,e,i={}){const{markDef:n,encoding:s,config:a}=e,{vgChannel:c}=i;let{defaultRef:d,defaultValue:f}=i;d===void 0&&(f??(f=Kt(t,n,a,{vgChannel:c,ignoreVgConfig:!0})),f!==void 0&&(d=mi(f)));const u=s[t];return C_(e,u,c??t,o=>zR({channel:t,channelDef:o,markDef:n,config:a,scaleName:e.scaleName(t),scale:e.getScaleComponent(t),stack:null,defaultRef:d}))}function pQ(t,e={filled:void 0}){const{markDef:i,encoding:n,config:s}=t,{type:a}=i,c=e.filled??Kt("filled",i,s),d=It(["bar","point","circle","square","geoshape"],a)?"transparent":void 0,f=Kt(c===!0?"color":void 0,i,s,{vgChannel:"fill"})??s.mark[c===!0&&"color"]??d,u=Kt(c===!1?"color":void 0,i,s,{vgChannel:"stroke"})??s.mark[c===!1&&"color"],o=c?"fill":"stroke",g={...f?{fill:mi(f)}:{},...u?{stroke:mi(u)}:{}};return i.color&&(c?i.fill:i.stroke)&&be(LK("property",{fill:"fill"in i,stroke:"stroke"in i})),{...g,...Zi("color",t,{vgChannel:o,defaultValue:c?f:u}),...Zi("fill",t,{defaultValue:n.fill?f:void 0}),...Zi("stroke",t,{defaultValue:n.stroke?u:void 0})}}function oNe(t){const{encoding:e,mark:i}=t,n=e.order;return!Od(i)&&_a(n)?C_(t,n,"zindex",s=>mi(s.value)):{}}function lm({channel:t,markDef:e,encoding:i={},model:n,bandPosition:s}){const a=`${t}Offset`,c=e[a],d=i[a];if((a==="xOffset"||a==="yOffset")&&d)return{offsetType:"encoding",offset:zR({channel:a,channelDef:d,markDef:e,config:n==null?void 0:n.config,scaleName:n.scaleName(a),scale:n.getScaleComponent(a),stack:null,defaultRef:mi(c),bandPosition:s})};const f=e[a];return f?{offsetType:"visual",offset:f}:{}}function kn(t,e,{defaultPos:i,vgChannel:n}){const{encoding:s,markDef:a,config:c,stack:d}=e,f=s[t],u=s[jo(t)],o=e.scaleName(t),g=e.getScaleComponent(t),{offset:w,offsetType:m}=lm({channel:t,markDef:a,encoding:s,model:e,bandPosition:.5}),l=d3({model:e,defaultPos:i,channel:t,scaleName:o,scale:g}),T=!f&&cn(t)&&(s.latitude||s.longitude)?{field:e.getName(t)}:lNe({channel:t,channelDef:f,channel2Def:u,markDef:a,config:c,scaleName:o,scale:g,stack:d,offset:w,defaultRef:l,bandPosition:m==="encoding"?0:void 0});return T?{[n||t]:T}:void 0}function lNe(t){const{channel:e,channelDef:i,scaleName:n,stack:s,offset:a,markDef:c}=t;if(Je(i)&&s&&e===s.fieldChannel){if(Te(i)){let d=i.bandPosition;if(d===void 0&&c.type==="text"&&(e==="radius"||e==="theta")&&(d=.5),d!==void 0)return $v({scaleName:n,fieldOrDatumDef:i,startSuffix:"start",bandPosition:d,offset:a})}return Lf(i,n,{suffix:"end"},{offset:a})}return $R(t)}function d3({model:t,defaultPos:e,channel:i,scaleName:n,scale:s}){const{markDef:a,config:c}=t;return()=>{const d=Pu(i),f=sd(i),u=Kt(i,a,c,{vgChannel:f});if(u!==void 0)return ug(i,u);switch(e){case"zeroOrMin":case"zeroOrMax":if(n){const o=s.get("type");if(!It([Ts.LOG,Ts.TIME,Ts.UTC],o)){if(s.domainDefinitelyIncludesZero())return{scale:n,value:0}}}if(e==="zeroOrMin")return d==="y"?{field:{group:"height"}}:{value:0};switch(d){case"radius":return{signal:`min(${t.width.signal},${t.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...t[Cs(i)],mult:.5}}}}const cNe={left:"x",center:"xc",right:"x2"},dNe={top:"y",middle:"yc",bottom:"y2"};function _Q(t,e,i,n="middle"){if(t==="radius"||t==="theta")return sd(t);const s=t==="x"?"align":"baseline",a=Kt(s,e,i);let c;return Ce(a)?(be(b2e(s)),c=void 0):c=a,t==="x"?cNe[c||(n==="top"?"left":"center")]:dNe[c||n]}function Hv(t,e,{defaultPos:i,defaultPos2:n,range:s}){return s?yQ(t,e,{defaultPos:i,defaultPos2:n}):kn(t,e,{defaultPos:i})}function yQ(t,e,{defaultPos:i,defaultPos2:n}){const{markDef:s,config:a}=e,c=jo(t),d=Cs(t),f=fNe(e,n,c),u=f[d]?_Q(t,s,a):sd(t);return{...kn(t,e,{defaultPos:i,vgChannel:u}),...f}}function fNe(t,e,i){const{encoding:n,mark:s,markDef:a,stack:c,config:d}=t,f=Pu(i),u=Cs(i),o=sd(i),g=n[f],w=t.scaleName(f),m=t.getScaleComponent(f),{offset:l}=i in n||i in a?lm({channel:i,markDef:a,encoding:n,model:t}):lm({channel:f,markDef:a,encoding:n,model:t});if(!g&&(i==="x2"||i==="y2")&&(n.latitude||n.longitude)){const b=Cs(i),S=t.markDef[b];return S!=null?{[b]:{value:S}}:{[o]:{field:t.getName(i)}}}const T=uNe({channel:i,channelDef:g,channel2Def:n[i],markDef:a,config:d,scaleName:w,scale:m,stack:c,offset:l,defaultRef:void 0});return T!==void 0?{[o]:T}:E0(i,a)||E0(i,{[i]:Lv(i,a,d.style),[u]:Lv(u,a,d.style)})||E0(i,d[s])||E0(i,d.mark)||{[o]:d3({model:t,defaultPos:e,channel:i,scaleName:w,scale:m})()}}function uNe({channel:t,channelDef:e,channel2Def:i,markDef:n,config:s,scaleName:a,scale:c,stack:d,offset:f,defaultRef:u}){return Je(e)&&d&&t.charAt(0)===d.fieldChannel.charAt(0)?Lf(e,a,{suffix:"start"},{offset:f}):$R({channel:t,channelDef:i,scaleName:a,scale:c,stack:d,markDef:n,config:s,offset:f,defaultRef:u})}function E0(t,e){const i=Cs(t),n=sd(t);if(e[n]!==void 0)return{[n]:ug(t,e[n])};if(e[t]!==void 0)return{[n]:ug(t,e[t])};if(e[i]){const s=e[i];if(du(s))be(h2e(i));else return{[i]:ug(t,s)}}}function ad(t,e){const{config:i,encoding:n,markDef:s}=t,a=s.type,c=jo(e),d=Cs(e),f=n[e],u=n[c],o=t.getScaleComponent(e),g=o?o.get("type"):void 0,w=s.orient,m=n[d]??n.size??Kt("size",s,i,{vgChannel:d}),l=mK(e),T=a==="bar"&&(e==="x"?w==="vertical":w==="horizontal");return Te(f)&&(hi(f.bin)||un(f.bin)||f.timeUnit&&!u)&&!(m&&!du(m))&&!n[l]&&!dn(g)?_Ne({fieldDef:f,fieldDef2:u,channel:e,model:t}):(Je(f)&&dn(g)||T)&&!u?pNe(f,e,t):yQ(e,t,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function hNe(t,e,i,n,s){if(du(s))if(i){const c=i.get("type");if(c==="band"){let d=`bandwidth('${e}')`;return s.band!==1&&(d=`${s.band} * ${d}`),{signal:`max(0.25, ${d})`}}else s.band!==1&&(be(S2e(c)),s=void 0)}else return{mult:s.band,field:{group:t}};else{if(Ce(s))return s;if(s)return{value:s}}if(i){const c=i.get("range");if(Ad(c)&&ii(c.step))return{value:c.step-2}}return{value:Vv(n.view,t)-2}}function pNe(t,e,i){const{markDef:n,encoding:s,config:a,stack:c}=i,d=n.orient,f=i.scaleName(e),u=i.getScaleComponent(e),o=Cs(e),g=jo(e),w=mK(e),m=i.scaleName(w),l=i.getScaleComponent(yR(e)),T=d==="horizontal"&&e==="y"||d==="vertical"&&e==="x";let b;(s.size||n.size)&&(T?b=Zi("size",i,{vgChannel:o,defaultRef:mi(n.size)}):be(k2e(n.type)));const S=!!b,x=yJ({channel:e,fieldDef:t,markDef:n,config:a,scaleType:u==null?void 0:u.get("type"),useVlSizeChannel:T});b=b||{[o]:hNe(o,m||f,l||u,a,x)};const B=(u==null?void 0:u.get("type"))==="band"&&du(x)&&!S?"top":"middle",F=_Q(e,n,a,B),I=F==="xc"||F==="yc",{offset:A,offsetType:O}=lm({channel:e,markDef:n,encoding:s,model:i,bandPosition:I?.5:0}),R=$R({channel:e,channelDef:t,markDef:n,config:a,scaleName:f,scale:u,stack:c,offset:A,defaultRef:d3({model:i,defaultPos:"mid",channel:e,scaleName:f,scale:u}),bandPosition:I?O==="encoding"?0:.5:Ce(x)?{signal:`(1-${x})/2`}:du(x)?(1-x.band)/2:0});if(o)return{[F]:R,...b};{const D=sd(g),P=b[o],U=A?{...P,offset:A}:P;return{[F]:R,[D]:ue(R)?[R[0],{...R[1],offset:U}]:{...R,offset:U}}}}function cy(t,e,i,n,s){if(uK(t))return 0;const a=t==="x"||t==="y2"?-e/2:e/2;if(Ce(i)||Ce(s)||Ce(n)){const c=Bl(i),d=Bl(s),f=Bl(n),u=f?`${f} + `:"",o=c?`(${c} ? -1 : 1) * `:"",g=d?`(${d} + ${a})`:a;return{signal:u+o+g}}else return s=s||0,n+(i?-s-a:+s+a)}function _Ne({fieldDef:t,fieldDef2:e,channel:i,model:n}){var F;const{config:s,markDef:a,encoding:c}=n,d=n.getScaleComponent(i),f=n.scaleName(i),u=d?d.get("type"):void 0,o=d.get("reverse"),g=yJ({channel:i,fieldDef:t,markDef:a,config:s,scaleType:u}),w=(F=n.component.axes[i])==null?void 0:F[0],m=(w==null?void 0:w.get("translate"))??.5,l=cn(i)?Kt("binSpacing",a,s)??0:0,T=jo(i),b=sd(i),S=sd(T),{offset:x}=lm({channel:i,markDef:a,encoding:c,model:n,bandPosition:0}),B=Ce(g)?{signal:`(1-${g.signal})/2`}:du(g)?(1-g.band)/2:.5;if(hi(t.bin)||t.timeUnit)return{[S]:vU({fieldDef:t,scaleName:f,bandPosition:B,offset:cy(T,l,o,m,x)}),[b]:vU({fieldDef:t,scaleName:f,bandPosition:Ce(B)?{signal:`1-${B.signal}`}:1-B,offset:cy(i,l,o,m,x)})};if(un(t.bin)){const I=Lf(t,f,{},{offset:cy(T,l,o,m,x)});if(Te(e))return{[S]:I,[b]:Lf(e,f,{},{offset:cy(i,l,o,m,x)})};if($u(t.bin)&&t.bin.step)return{[S]:I,[b]:{signal:`scale("${f}", ${xe(t,{expr:"datum"})} + ${t.bin.step})`,offset:cy(i,l,o,m,x)}}}be($K(T))}function vU({fieldDef:t,scaleName:e,bandPosition:i,offset:n}){return $v({scaleName:e,fieldOrDatumDef:t,bandPosition:i,offset:n})}const yNe=new Set(["aria","width","height"]);function Dr(t,e){const{fill:i=void 0,stroke:n=void 0}=e.color==="include"?pQ(t):{};return{...gNe(t.markDef,e),...EU(t,"fill",i),...EU(t,"stroke",n),...Zi("opacity",t),...Zi("fillOpacity",t),...Zi("strokeOpacity",t),...Zi("strokeWidth",t),...Zi("strokeDash",t),...oNe(t),...uQ(t),...c3(t,"href"),...sNe(t)}}function EU(t,e,i){const{config:n,mark:s,markDef:a}=t;if(Kt("invalid",a,n)==="hide"&&i&&!Od(s)){const d=mNe(t,{invalid:!0,channels:jS});if(d)return{[e]:[{test:d,value:null},...ke(i)]}}return i?{[e]:i}:{}}function gNe(t,e){return UFe.reduce((i,n)=>(!yNe.has(n)&&t[n]!==void 0&&e[n]!=="ignore"&&(i[n]=mi(t[n])),i),{})}function mNe(t,{invalid:e=!1,channels:i}){const n=i.reduce((a,c)=>{const d=t.getScaleComponent(c);if(d){const f=d.get("type"),u=t.vgField(c,{expr:"datum"});u&&or(f)&&(a[u]=!0)}return a},{}),s=me(n);if(s.length>0){const a=e?"||":"&&";return s.map(c=>UR(c,e)).join(` ${a} `)}}function f3(t){const{config:e,markDef:i}=t;if(Kt("invalid",i,e)){const s=wNe(t,{channels:qo});if(s)return{defined:{signal:s}}}return{}}function wNe(t,{invalid:e=!1,channels:i}){const n=i.reduce((a,c)=>{var f;const d=t.getScaleComponent(c);if(d){const u=d.get("type"),o=t.vgField(c,{expr:"datum",binSuffix:(f=t.stack)!=null&&f.impute?"mid":void 0});o&&or(u)&&(a[o]=!0)}return a},{}),s=me(n);if(s.length>0){const a=e?"||":"&&";return s.map(c=>UR(c,e)).join(` ${a} `)}}function SU(t,e){if(e!==void 0)return{[t]:mi(e)}}const sI="voronoi",gQ={defined:t=>t.type==="point"&&t.nearest,parse:(t,e)=>{if(e.events)for(const i of e.events)i.markname=t.getName(sI)},marks:(t,e,i)=>{const{x:n,y:s}=e.project.hasChannel,a=t.mark;if(Od(a))return be(WFe(a)),i;const c={name:t.getName(sI),type:"path",interactive:!0,from:{data:t.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...uQ(t,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:n||!s?"datum.datum.x || 0":"0"},y:{expr:s||!n?"datum.datum.y || 0":"0"},size:[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")]}]};let d=0,f=!1;return i.forEach((u,o)=>{const g=u.name??"";g===t.component.mark[0].name?d=o:g.indexOf(sI)>=0&&(f=!0)}),f||i.splice(d+1,0,c),i}},mQ={defined:t=>t.type==="point"&&t.resolve==="global"&&t.bind&&t.bind!=="scales"&&!t3(t.bind),parse:(t,e,i)=>BQ(e,i),topLevelSignals:(t,e,i)=>{const n=e.name,s=e.project,a=e.bind,c=e.init&&e.init[0],d=gQ.defined(e)?"(item().isVoronoi ? datum.datum : datum)":"datum";return s.items.forEach((f,u)=>{const o=bi(`${n}_${f.field}`);i.filter(w=>w.name===o).length||i.unshift({name:o,...c?{init:uu(c[u])}:{value:null},on:e.events?[{events:e.events,update:`datum && item().mark.marktype !== 'group' ? ${d}[${ve(f.field)}] : null`}]:[],bind:a[f.field]??a[f.channel]??a})}),i},signals:(t,e,i)=>{const n=e.name,s=e.project,a=i.filter(u=>u.name===n+od)[0],c=n+Ew,d=s.items.map(u=>bi(`${n}_${u.field}`)),f=d.map(u=>`${u} !== null`).join(" && ");return d.length&&(a.update=`${f} ? {fields: ${c}, values: [${d.join(", ")}]} : null`),delete a.value,delete a.on,i}},Yv="_toggle",wQ={defined:t=>t.type==="point"&&!!t.toggle,signals:(t,e,i)=>i.concat({name:e.name+Yv,value:!1,on:[{events:e.events,update:e.toggle}]}),modifyExpr:(t,e)=>{const i=e.name+od,n=e.name+Yv;return`${n} ? null : ${i}, `+(e.resolve==="global"?`${n} ? null : true, `:`${n} ? null : {unit: ${Pf(t)}}, `)+`${n} ? ${i} : null`}},bNe={defined:t=>t.clear!==void 0&&t.clear!==!1,parse:(t,e)=>{e.clear&&(e.clear=Ie(e.clear)?Sd(e.clear,"view"):e.clear)},topLevelSignals:(t,e,i)=>{if(mQ.defined(e))for(const n of e.project.items){const s=i.findIndex(a=>a.name===bi(`${e.name}_${n.field}`));s!==-1&&i[s].on.push({events:e.clear,update:"null"})}return i},signals:(t,e,i)=>{function n(s,a){s!==-1&&i[s].on&&i[s].on.push({events:e.clear,update:a})}if(e.type==="interval")for(const s of e.project.items){const a=i.findIndex(c=>c.name===s.signals.visual);if(n(a,"[0, 0]"),a===-1){const c=i.findIndex(d=>d.name===s.signals.data);n(c,"null")}}else{let s=i.findIndex(a=>a.name===e.name+od);n(s,"null"),wQ.defined(e)&&(s=i.findIndex(a=>a.name===e.name+Yv),n(s,"false"))}return i}},bQ={defined:t=>{const e=t.resolve==="global"&&t.bind&&t3(t.bind),i=t.project.items.length===1&&t.project.items[0].field!==ya;return e&&!i&&be(XFe),e&&i},parse:(t,e,i)=>{const n=Qe(i);if(n.select=Ie(n.select)?{type:n.select,toggle:e.toggle}:{...n.select,toggle:e.toggle},BQ(e,n),Me(i.select)&&(i.select.on||i.select.clear)){const c='event.item && indexof(event.item.mark.role, "legend") < 0';for(const d of e.events)d.filter=ke(d.filter??[]),d.filter.includes(c)||d.filter.push(c)}const s=tI(e.bind)?e.bind.legend:"click",a=Ie(s)?Sd(s,"view"):ke(s);e.bind={legend:{merge:a}}},topLevelSignals:(t,e,i)=>{const n=e.name,s=tI(e.bind)&&e.bind.legend,a=c=>d=>{const f=Qe(d);return f.markname=c,f};for(const c of e.project.items){if(!c.hasLegend)continue;const d=`${bi(c.field)}_legend`,f=`${n}_${d}`;if(i.filter(o=>o.name===f).length===0){const o=s.merge.map(a(`${d}_symbols`)).concat(s.merge.map(a(`${d}_labels`))).concat(s.merge.map(a(`${d}_entries`)));i.unshift({name:f,...e.init?{}:{value:null},on:[{events:o,update:"datum.value || item().items[0].items[0].datum.value",force:!0},{events:s.merge,update:`!event.item || !datum ? null : ${f}`,force:!0}]})}}return i},signals:(t,e,i)=>{const n=e.name,s=e.project,a=i.find(w=>w.name===n+od),c=n+Ew,d=s.items.filter(w=>w.hasLegend).map(w=>bi(`${n}_${bi(w.field)}_legend`)),u=`${d.map(w=>`${w} !== null`).join(" && ")} ? {fields: ${c}, values: [${d.join(", ")}]} : null`;e.events&&d.length>0?a.on.push({events:d.map(w=>({signal:w})),update:u}):d.length>0&&(a.update=u,delete a.value,delete a.on);const o=i.find(w=>w.name===n+Yv),g=tI(e.bind)&&e.bind.legend;return o&&(e.events?o.on.push({...o.on[0],events:g}):o.on[0].events=g),i}};function TNe(t,e,i){var s;const n=(s=t.fieldDef(e))==null?void 0:s.field;for(const a of gn(t.component.selection??{})){const c=a.project.hasField[n]??a.project.hasChannel[e];if(c&&bQ.defined(a)){const d=i.get("selections")??[];d.push(a.name),i.set("selections",d,!1),c.hasLegend=!0}}}const TQ="_translate_anchor",vQ="_translate_delta",vNe={defined:t=>t.type==="interval"&&t.translate,signals:(t,e,i)=>{const n=e.name,s=Il.defined(e),a=n+TQ,{x:c,y:d}=e.project.hasChannel;let f=Sd(e.translate,"scope");return s||(f=f.map(u=>(u.between[0].markname=n+lp,u))),i.push({name:a,value:{},on:[{events:f.map(u=>u.between[0]),update:"{x: x(unit), y: y(unit)"+(c!==void 0?`, extent_x: ${s?ZF(t,Ti):`slice(${c.signals.visual})`}`:"")+(d!==void 0?`, extent_y: ${s?ZF(t,ln):`slice(${d.signals.visual})`}`:"")+"}"}]},{name:n+vQ,value:{},on:[{events:f,update:`{x: ${a}.x - x(unit), y: ${a}.y - y(unit)}`}]}),c!==void 0&&xU(t,e,c,"width",i),d!==void 0&&xU(t,e,d,"height",i),i}};function xU(t,e,i,n,s){const a=e.name,c=a+TQ,d=a+vQ,f=i.channel,u=Il.defined(e),o=s.filter(I=>I.name===i.signals[u?"data":"visual"])[0],g=t.getSizeSignalRef(n).signal,w=t.getScaleComponent(f),m=w&&w.get("type"),l=w&&w.get("reverse"),T=u?f===Ti?l?"":"-":l?"-":"":"",b=`${c}.extent_${f}`,S=`${T}${d}.${f} / ${u?`${g}`:`span(${b})`}`,x=!u||!w?"panLinear":m==="log"?"panLog":m==="symlog"?"panSymlog":m==="pow"?"panPow":"panLinear",B=u?m==="pow"?`, ${w.get("exponent")??1}`:m==="symlog"?`, ${w.get("constant")??1}`:"":"",F=`${x}(${b}, ${S}${B})`;o.on.push({events:{signal:d},update:u?F:`clampRange(${F}, 0, ${g})`})}const EQ="_zoom_anchor",SQ="_zoom_delta",ENe={defined:t=>t.type==="interval"&&t.zoom,signals:(t,e,i)=>{const n=e.name,s=Il.defined(e),a=n+SQ,{x:c,y:d}=e.project.hasChannel,f=ve(t.scaleName(Ti)),u=ve(t.scaleName(ln));let o=Sd(e.zoom,"scope");return s||(o=o.map(g=>(g.markname=n+lp,g))),i.push({name:n+EQ,on:[{events:o,update:s?"{"+[f?`x: invert(${f}, x(unit))`:"",u?`y: invert(${u}, y(unit))`:""].filter(g=>g).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:a,on:[{events:o,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),c!==void 0&&BU(t,e,c,"width",i),d!==void 0&&BU(t,e,d,"height",i),i}};function BU(t,e,i,n,s){const a=e.name,c=i.channel,d=Il.defined(e),f=s.filter(x=>x.name===i.signals[d?"data":"visual"])[0],u=t.getSizeSignalRef(n).signal,o=t.getScaleComponent(c),g=o&&o.get("type"),w=d?ZF(t,c):f.name,m=a+SQ,l=`${a}${EQ}.${c}`,T=!d||!o?"zoomLinear":g==="log"?"zoomLog":g==="symlog"?"zoomSymlog":g==="pow"?"zoomPow":"zoomLinear",b=d?g==="pow"?`, ${o.get("exponent")??1}`:g==="symlog"?`, ${o.get("constant")??1}`:"":"",S=`${T}(${w}, ${l}, ${m}${b})`;f.on.push({events:{signal:m},update:d?S:`clampRange(${S}, 0, ${u})`})}const hu="_store",od="_tuple",SNe="_modify",xQ="vlSelectionResolve",lx=[nNe,tNe,ZOe,wQ,mQ,Il,bQ,bNe,vNe,ENe,gQ];function xNe(t){let e=t.parent;for(;e&&!ca(e);)e=e.parent;return e}function Pf(t,{escape:e}={escape:!0}){let i=e?ve(t.name):t.name;const n=xNe(t);if(n){const{facet:s}=n;for(const a of br)s[a]&&(i+=` + '__facet_${a}_' + (facet[${ve(n.vgField(a))}])`)}return i}function u3(t){return gn(t.component.selection??{}).reduce((e,i)=>e||i.project.hasSelectionId,!1)}function BQ(t,e){(Ie(e.select)||!e.select.on)&&delete t.events,(Ie(e.select)||!e.select.clear)&&delete t.clear,(Ie(e.select)||!e.select.toggle)&&delete t.toggle}function e2(t){const e=[];return t.type==="Identifier"?[t.name]:t.type==="Literal"?[t.value]:(t.type==="MemberExpression"&&(e.push(...e2(t.object)),e.push(...e2(t.property))),e)}function IQ(t){return t.object.type==="MemberExpression"?IQ(t.object):t.object.name==="datum"}function kQ(t){const e=MC(t),i=new Set;return e.visit(n=>{n.type==="MemberExpression"&&IQ(n)&&i.add(e2(n).slice(1).join("."))}),i}class R_ extends si{clone(){return new R_(null,this.model,Qe(this.filter))}constructor(e,i,n){super(e),this.model=i,this.filter=n,this.expr=Xv(this.model,this.filter,this),this._dependentFields=kQ(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function BNe(t,e){const i={},n=t.config.selection;if(!e||!e.length)return i;for(const s of e){const a=bi(s.name),c=s.select,d=Ie(c)?c:c.type,f=Me(c)?Qe(c):{type:d},u=n[d];for(const w in u)w==="fields"||w==="encodings"||(w==="mark"&&(f[w]={...u[w],...f[w]}),(f[w]===void 0||f[w]===!0)&&(f[w]=Qe(u[w]??f[w])));const o=i[a]={...f,name:a,type:d,init:s.value,bind:s.bind,events:Ie(f.on)?Sd(f.on,"scope"):ke(Qe(f.on))},g=Qe(s);for(const w of lx)w.defined(o)&&w.parse&&w.parse(t,o,g)}return i}function FQ(t,e,i,n="datum"){const s=Ie(e)?e:e.param,a=bi(s),c=ve(a+hu);let d;try{d=t.getSelectionComponent(a,s)}catch{return`!!${a}`}if(d.project.timeUnit){const w=i??t.component.data.raw,m=d.project.timeUnit.clone();w.parent?m.insertAsParentOf(w):w.parent=m}const f=d.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",u=d.resolve==="global"?")":`, ${ve(d.resolve)})`,o=`${f}${c}, ${n}${u}`,g=`length(data(${c}))`;return e.empty===!1?`${g} && ${o}`:`!${g} || ${o}`}function MQ(t,e,i){const n=bi(e),s=i.encoding;let a=i.field,c;try{c=t.getSelectionComponent(n,e)}catch{return n}if(!s&&!a)a=c.project.items[0].field,c.project.items.length>1&&be(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${ve(a)}.`);else if(s&&!a){const d=c.project.items.filter(f=>f.channel===s);!d.length||d.length>1?(a=c.project.items[0].field,be((d.length?"Multiple ":"No ")+`matching ${ve(s)} encoding found for selection ${ve(i.param)}. Using "field": ${ve(a)}.`)):a=d[0].field}return`${c.name}[${ve(Nr(a))}]`}function INe(t,e){for(const[i,n]of nd(t.component.selection??{})){const s=t.getName(`lookup_${i}`);t.component.data.outputNodes[s]=n.materialized=new es(new R_(e,t,{param:i}),s,fi.Lookup,t.component.data.outputNodeRefCounts)}}function Xv(t,e,i){return fg(e,n=>Ie(n)?n:dMe(n)?FQ(t,n,i):YK(n))}function kNe(t,e){if(t)return ue(t)&&!mc(t)?t.map(i=>WR(i,e)).join(", "):t}function rI(t,e,i,n){var s,a;t.encode??(t.encode={}),(s=t.encode)[e]??(s[e]={}),(a=t.encode[e]).update??(a.update={}),t.encode[e].update[i]=n}function Yy(t,e,i,n={header:!1}){var g,w;const{disable:s,orient:a,scale:c,labelExpr:d,title:f,zindex:u,...o}=t.combine();if(!s){for(const m in o){const l=uAe[m],T=o[m];if(l&&l!==e&&l!=="both")delete o[m];else if(vw(T)){const{condition:b,...S}=T,x=ke(b),B=sU[m];if(B){const{vgProp:F,part:I}=B,A=[...x.map(O=>{const{test:R,...D}=O;return{test:Xv(null,R),...D}}),S];rI(o,I,F,A),delete o[m]}else if(B===null){const F={signal:x.map(I=>{const{test:A,...O}=I;return`${Xv(null,A)} ? ${j$(O)} : `}).join("")+j$(S)};o[m]=F}}else if(Ce(T)){const b=sU[m];if(b){const{vgProp:S,part:x}=b;rI(o,x,S,T),delete o[m]}}It(["labelAlign","labelBaseline"],m)&&o[m]===null&&delete o[m]}if(e==="grid"){if(!o.grid)return;if(o.encode){const{grid:m}=o.encode;o.encode={...m?{grid:m}:{}},ti(o.encode)&&delete o.encode}return{scale:c,orient:a,...o,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Pi(u,0)}}else{if(!n.header&&t.mainExtracted)return;if(d!==void 0){let l=d;(w=(g=o.encode)==null?void 0:g.labels)!=null&&w.update&&Ce(o.encode.labels.update.text)&&(l=ru(d,"datum.label",o.encode.labels.update.text.signal)),rI(o,"labels","text",{signal:l})}if(o.labelAlign===null&&delete o.labelAlign,o.encode){for(const l of xJ)t.hasAxisPart(l)||delete o.encode[l];ti(o.encode)&&delete o.encode}const m=kNe(f,i);return{scale:c,orient:a,grid:!1,...m?{title:m}:{},...o,...i.aria===!1?{aria:!1}:{},zindex:Pi(u,0)}}}}function AQ(t){const{axes:e}=t.component,i=[];for(const n of qo)if(e[n]){for(const s of e[n])if(!s.get("disable")&&!s.get("gridScale")){const a=n==="x"?"height":"width",c=t.getSizeSignalRef(a).signal;a!==c&&i.push({name:a,update:c})}}return i}function FNe(t,e){const{x:i=[],y:n=[]}=t;return[...i.map(s=>Yy(s,"grid",e)),...n.map(s=>Yy(s,"grid",e)),...i.map(s=>Yy(s,"main",e)),...n.map(s=>Yy(s,"main",e))].filter(s=>s)}function IU(t,e,i,n){return Object.assign.apply(null,[{},...t.map(s=>{if(s==="axisOrient"){const a=i==="x"?"bottom":"left",c=e[i==="x"?"axisBottom":"axisLeft"]||{},d=e[i==="x"?"axisTop":"axisRight"]||{},f=new Set([...me(c),...me(d)]),u={};for(const o of f.values())u[o]={signal:`${n.signal} === "${a}" ? ${Bl(c[o])} : ${Bl(d[o])}`};return u}return e[s]})])}function MNe(t,e,i,n){const s=e==="band"?["axisDiscrete","axisBand"]:e==="point"?["axisDiscrete","axisPoint"]:QK(e)?["axisQuantitative"]:e==="time"||e==="utc"?["axisTemporal"]:[],a=t==="x"?"axisX":"axisY",c=Ce(i)?"axisOrient":`axis${uw(i)}`,d=[...s,...s.map(u=>a+u.substr(4))],f=["axis",c,a];return{vlOnlyAxisConfig:IU(d,n,t,i),vgAxisConfig:IU(f,n,t,i),axisConfigStyle:ANe([...f,...d],n)}}function ANe(t,e){var n;const i=[{}];for(const s of t){let a=(n=e[s])==null?void 0:n.style;if(a){a=ke(a);for(const c of a)i.push(e.style[c])}}return Object.assign.apply(null,i)}function t2(t,e,i,n={}){var a;const s=FK(t,i,e);if(s!==void 0)return{configFrom:"style",configValue:s};for(const c of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((a=n[c])==null?void 0:a[t])!==void 0)return{configFrom:c,configValue:n[c][t]};return{}}const kU={scale:({model:t,channel:e})=>t.scaleName(e),format:({format:t})=>t,formatType:({formatType:t})=>t,grid:({fieldOrDatumDef:t,axis:e,scaleType:i})=>e.grid??ONe(i,t),gridScale:({model:t,channel:e})=>NNe(t,e),labelAlign:({axis:t,labelAngle:e,orient:i,channel:n})=>t.labelAlign||NQ(e,i,n),labelAngle:({labelAngle:t})=>t,labelBaseline:({axis:t,labelAngle:e,orient:i,channel:n})=>t.labelBaseline||OQ(e,i,n),labelFlush:({axis:t,fieldOrDatumDef:e,channel:i})=>t.labelFlush??RNe(e.type,i),labelOverlap:({axis:t,fieldOrDatumDef:e,scaleType:i})=>t.labelOverlap??LNe(e.type,i,Te(e)&&!!e.timeUnit,Te(e)?e.sort:void 0),orient:({orient:t})=>t,tickCount:({channel:t,model:e,axis:i,fieldOrDatumDef:n,scaleType:s})=>{const a=t==="x"?"width":t==="y"?"height":void 0,c=a?e.getSizeSignalRef(a):void 0;return i.tickCount??PNe({fieldOrDatumDef:n,scaleType:s,size:c,values:i.values})},tickMinStep:$Ne,title:({axis:t,model:e,channel:i})=>{if(t.title!==void 0)return t.title;const n=CQ(e,i);if(n!==void 0)return n;const s=e.typedFieldDef(i),a=i==="x"?"x2":"y2",c=e.fieldDef(a);return AK(s?[iU(s)]:[],Te(c)?[iU(c)]:[])},values:({axis:t,fieldOrDatumDef:e})=>UNe(t,e),zindex:({axis:t,fieldOrDatumDef:e,mark:i})=>t.zindex??zNe(i,e)};function ONe(t,e){return!dn(t)&&Te(e)&&!hi(e==null?void 0:e.bin)&&!un(e==null?void 0:e.bin)}function NNe(t,e){const i=e==="x"?"y":"x";if(t.getScaleComponent(i))return t.scaleName(i)}function CNe(t,e,i,n,s){const a=e==null?void 0:e.labelAngle;if(a!==void 0)return Ce(a)?a:am(a);{const{configValue:c}=t2("labelAngle",n,e==null?void 0:e.style,s);return c!==void 0?am(c):i===Ti&&It([RR,CR],t.type)&&!(Te(t)&&t.timeUnit)?270:void 0}}function i2(t){return`(((${t.signal} % 360) + 360) % 360)`}function OQ(t,e,i,n){if(t!==void 0)if(i==="x"){if(Ce(t)){const s=i2(t),a=Ce(e)?`(${e.signal} === "top")`:e==="top";return{signal:`(45 < ${s} && ${s} < 135) || (225 < ${s} && ${s} < 315) ? "middle" :(${s} <= 45 || 315 <= ${s}) === ${a} ? "bottom" : "top"`}}if(45<t&&t<135||225<t&&t<315)return"middle";if(Ce(e)){const s=t<=45||315<=t?"===":"!==";return{signal:`${e.signal} ${s} "top" ? "bottom" : "top"`}}return(t<=45||315<=t)==(e==="top")?"bottom":"top"}else{if(Ce(t)){const s=i2(t),a=Ce(e)?`(${e.signal} === "left")`:e==="left";return{signal:`${s} <= 45 || 315 <= ${s} || (135 <= ${s} && ${s} <= 225) ? ${n?'"middle"':"null"} : (45 <= ${s} && ${s} <= 135) === ${a} ? "top" : "bottom"`}}if(t<=45||315<=t||135<=t&&t<=225)return n?"middle":null;if(Ce(e)){const s=45<=t&&t<=135?"===":"!==";return{signal:`${e.signal} ${s} "left" ? "top" : "bottom"`}}return(45<=t&&t<=135)==(e==="left")?"top":"bottom"}}function NQ(t,e,i){if(t===void 0)return;const n=i==="x",s=n?0:90,a=n?"bottom":"left";if(Ce(t)){const c=i2(t),d=Ce(e)?`(${e.signal} === "${a}")`:e===a;return{signal:`(${s?`(${c} + 90)`:c} % 180 === 0) ? ${n?null:'"center"'} :(${s} < ${c} && ${c} < ${180+s}) === ${d} ? "left" : "right"`}}if((t+s)%180===0)return n?null:"center";if(Ce(e)){const c=s<t&&t<180+s?"===":"!==";return{signal:`${`${e.signal} ${c} "${a}"`} ? "left" : "right"`}}return(s<t&&t<180+s)==(e===a)?"left":"right"}function RNe(t,e){if(e==="x"&&It(["quantitative","temporal"],t))return!0}function LNe(t,e,i,n){if(i&&!Me(n)||t!=="nominal"&&t!=="ordinal")return e==="log"||e==="symlog"?"greedy":!0}function DNe(t){return t==="x"?"bottom":"left"}function PNe({fieldOrDatumDef:t,scaleType:e,size:i,values:n}){var s;if(!n&&!dn(e)&&e!=="log"){if(Te(t)){if(hi(t.bin))return{signal:`ceil(${i.signal}/10)`};if(t.timeUnit&&It(["month","hours","day","quarter"],(s=wn(t.timeUnit))==null?void 0:s.unit))return}return{signal:`ceil(${i.signal}/40)`}}}function $Ne({format:t,fieldOrDatumDef:e}){if(t==="d")return 1;if(Te(e)){const{timeUnit:i}=e;if(i){const n=WK(i);if(n)return{signal:n}}}}function CQ(t,e){const i=e==="x"?"x2":"y2",n=t.fieldDef(e),s=t.fieldDef(i),a=n?n.title:void 0,c=s?s.title:void 0;if(a&&c)return OK(a,c);if(a)return a;if(c)return c;if(a!==void 0)return a;if(c!==void 0)return c}function UNe(t,e){const i=t.values;if(ue(i))return SJ(e,i);if(Ce(i))return i}function zNe(t,e){return t==="rect"&&zv(e)?1:0}class o_ extends si{clone(){return new o_(null,Qe(this.transform))}constructor(e,i){super(e),this.transform=i,this._dependentFields=kQ(this.transform.calculate)}static parseAllForSortIndex(e,i){return i.forEachFieldDef((n,s)=>{if(zu(n)&&pJ(n.sort)){const{field:a,timeUnit:c}=n,d=n.sort,f=d.map((u,o)=>`${YK({field:a,timeUnit:c,equal:u})} ? ${o} : `).join("")+d.length;e=new o_(e,{calculate:f,as:l_(n,s,{forAs:!0})})}}),e}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Ot(this.transform)}`}}function l_(t,e,i){return xe(t,{prefix:e,suffix:"sort_index",...i??{}})}function cx(t,e){return It(["top","bottom"],e)?"column":It(["left","right"],e)||t==="row"?"row":"column"}function c_(t,e,i,n){const s=n==="row"?i.headerRow:n==="column"?i.headerColumn:i.headerFacet;return Pi((e||{})[t],s[t],i.header[t])}function dx(t,e,i,n){const s={};for(const a of t){const c=c_(a,e||{},i,n);c!==void 0&&(s[a]=c)}return s}const h3=["row","column"],p3=["header","footer"];function jNe(t,e){const i=t.component.layoutHeaders[e].title,n=t.config?t.config:void 0,s=t.component.layoutHeaders[e].facetFieldDef?t.component.layoutHeaders[e].facetFieldDef:void 0,{titleAnchor:a,titleAngle:c,titleOrient:d}=dx(["titleAnchor","titleAngle","titleOrient"],s.header,n,e),f=cx(e,d),u=am(c);return{name:`${e}-title`,type:"group",role:`${f}-title`,title:{text:i,...e==="row"?{orient:"left"}:{},style:"guide-title",...LQ(u,f),...RQ(f,u,a),...DQ(n,s,e,CAe,zJ)}}}function RQ(t,e,i="middle"){switch(i){case"start":return{align:"left"};case"end":return{align:"right"}}const n=NQ(e,t==="row"?"left":"top",t==="row"?"y":"x");return n?{align:n}:{}}function LQ(t,e){const i=OQ(t,e==="row"?"left":"top",e==="row"?"y":"x",!0);return i?{baseline:i}:{}}function qNe(t,e){const i=t.component.layoutHeaders[e],n=[];for(const s of p3)if(i[s])for(const a of i[s]){const c=VNe(t,e,s,i,a);c!=null&&n.push(c)}return n}function GNe(t,e){const{sort:i}=t;return fo(i)?{field:xe(i,{expr:"datum"}),order:i.order??"ascending"}:ue(i)?{field:l_(t,e,{expr:"datum"}),order:"ascending"}:{field:xe(t,{expr:"datum"}),order:i??"ascending"}}function n2(t,e,i){const{format:n,formatType:s,labelAngle:a,labelAnchor:c,labelOrient:d,labelExpr:f}=dx(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],t.header,i,e),u=jR({fieldOrDatumDef:t,format:n,formatType:s,expr:"parent",config:i}).signal,o=cx(e,d);return{text:{signal:f?ru(ru(f,"datum.label",u),"datum.value",xe(t,{expr:"parent"})):u},...e==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...LQ(a,o),...RQ(o,a,c),...DQ(i,t,e,RAe,jJ)}}function VNe(t,e,i,n,s){if(s){let a=null;const{facetFieldDef:c}=n,d=t.config?t.config:void 0;if(c&&s.labels){const{labelOrient:g}=dx(["labelOrient"],c.header,d,e);(e==="row"&&!It(["top","bottom"],g)||e==="column"&&!It(["left","right"],g))&&(a=n2(c,e,d))}const f=ca(t)&&!ww(t.facet),u=s.axes,o=(u==null?void 0:u.length)>0;if(a||o){const g=e==="row"?"height":"width";return{name:t.getName(`${e}_${i}`),type:"group",role:`${e}-${i}`,...n.facetFieldDef?{from:{data:t.getName(`${e}_domain`)},sort:GNe(c,e)}:{},...o&&f?{from:{data:t.getName(`facet_domain_${e}`)}}:{},...a?{title:a}:{},...s.sizeSignal?{encode:{update:{[g]:s.sizeSignal}}}:{},...o?{axes:u}:{}}}}return null}const WNe={column:{start:0,end:1},row:{start:1,end:0}};function HNe(t,e){return WNe[e][t]}function YNe(t,e){const i={};for(const n of br){const s=t[n];if(s!=null&&s.facetFieldDef){const{titleAnchor:a,titleOrient:c}=dx(["titleAnchor","titleOrient"],s.facetFieldDef.header,e,n),d=cx(n,c),f=HNe(a,d);f!==void 0&&(i[d]=f)}}return ti(i)?void 0:i}function DQ(t,e,i,n,s){const a={};for(const c of n){if(!s[c])continue;const d=c_(c,e==null?void 0:e.header,t,i);d!==void 0&&(a[s[c]]=d)}return a}function _3(t){return[...S0(t,"width"),...S0(t,"height"),...S0(t,"childWidth"),...S0(t,"childHeight")]}function S0(t,e){const i=e==="width"?"x":"y",n=t.component.layoutSize.get(e);if(!n||n==="merged")return[];const s=t.getSizeSignalRef(e).signal;if(n==="step"){const a=t.getScaleComponent(i);if(a){const c=a.get("type"),d=a.get("range");if(dn(c)&&Ad(d)){const f=t.scaleName(i);return ca(t.parent)&&t.parent.component.resolve.scale[i]==="independent"?[FU(f,d)]:[FU(f,d),{name:s,update:PQ(f,a,`domain('${f}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(n=="container"){const a=s.endsWith("width"),c=a?"containerSize()[0]":"containerSize()[1]",d=XF(t.config.view,a?"width":"height"),f=`isFinite(${c}) ? ${c} : ${d}`;return[{name:s,init:f,on:[{update:f,events:"window:resize"}]}]}else return[{name:s,value:n}]}function FU(t,e){const i=`${t}_step`;return Ce(e.step)?{name:i,update:e.step.signal}:{name:i,value:e.step}}function PQ(t,e,i){const n=e.get("type"),s=e.get("padding"),a=Pi(e.get("paddingOuter"),s);let c=e.get("paddingInner");return c=n==="band"?c!==void 0?c:s:1,`bandspace(${i}, ${Bl(c)}, ${Bl(a)}) * ${t}_step`}function $Q(t){return t==="childWidth"?"width":t==="childHeight"?"height":t}function UQ(t,e){return me(t).reduce((i,n)=>{const s=t[n];return{...i,...C_(e,s,n,a=>mi(a.value))}},{})}function zQ(t,e){if(ca(e))return t==="theta"?"independent":"shared";if(P_(e))return"shared";if(v3(e))return cn(t)||t==="theta"||t==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function y3(t,e){const i=t.scale[e],n=cn(e)?"axis":"legend";return i==="independent"?(t[n][e]==="shared"&&be(N2e(e)),"independent"):t[n][e]||"shared"}const XNe={...PAe,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},jQ=me(XNe);class KNe extends Ql{}const MU={symbols:JNe,gradient:QNe,labels:ZNe,entries:eCe};function JNe(t,{fieldOrDatumDef:e,model:i,channel:n,legendCmpt:s,legendType:a}){if(a!=="symbol")return;const{markDef:c,encoding:d,config:f,mark:u}=i,o=c.filled&&u!=="trail";let g={...qFe({},i,RMe),...pQ(i,{filled:o})};const w=s.get("symbolOpacity")??f.legend.symbolOpacity,m=s.get("symbolFillColor")??f.legend.symbolFillColor,l=s.get("symbolStrokeColor")??f.legend.symbolStrokeColor,T=w===void 0?qQ(d.opacity)??c.opacity:void 0;if(g.fill){if(n==="fill"||o&&n===Os)delete g.fill;else if(g.fill.field)m?delete g.fill:(g.fill=mi(f.legend.symbolBaseFillColor??"black"),g.fillOpacity=mi(T??1));else if(ue(g.fill)){const b=s2(d.fill??d.color)??c.fill??(o&&c.color);b&&(g.fill=mi(b))}}if(g.stroke){if(n==="stroke"||!o&&n===Os)delete g.stroke;else if(g.stroke.field||l)delete g.stroke;else if(ue(g.stroke)){const b=Pi(s2(d.stroke||d.color),c.stroke,o?c.color:void 0);b&&(g.stroke={value:b})}}if(n!==Xl){const b=Te(e)&&VQ(i,s,e);b?g.opacity=[{test:b,...mi(T??1)},mi(f.legend.unselectedOpacity)]:T&&(g.opacity=mi(T))}return g={...g,...t},ti(g)?void 0:g}function QNe(t,{model:e,legendType:i,legendCmpt:n}){if(i!=="gradient")return;const{config:s,markDef:a,encoding:c}=e;let d={};const u=(n.get("gradientOpacity")??s.legend.gradientOpacity)===void 0?qQ(c.opacity)||a.opacity:void 0;return u&&(d.opacity=mi(u)),d={...d,...t},ti(d)?void 0:d}function ZNe(t,{fieldOrDatumDef:e,model:i,channel:n,legendCmpt:s}){const a=i.legend(n)||{},c=i.config,d=Te(e)?VQ(i,s,e):void 0,f=d?[{test:d,value:1},{value:c.legend.unselectedOpacity}]:void 0,{format:u,formatType:o}=a;let g;fu(o)?g=na({fieldOrDatumDef:e,field:"datum.value",format:u,formatType:o,config:c}):u===void 0&&o===void 0&&c.customFormatTypes&&(e.type==="quantitative"&&c.numberFormatType?g=na({fieldOrDatumDef:e,field:"datum.value",format:c.numberFormat,formatType:c.numberFormatType,config:c}):e.type==="temporal"&&c.timeFormatType&&Te(e)&&e.timeUnit===void 0&&(g=na({fieldOrDatumDef:e,field:"datum.value",format:c.timeFormat,formatType:c.timeFormatType,config:c})));const w={...f?{opacity:f}:{},...g?{text:g}:{},...t};return ti(w)?void 0:w}function eCe(t,{legendCmpt:e}){const i=e.get("selections");return i!=null&&i.length?{...t,fill:{value:"transparent"}}:t}function qQ(t){return GQ(t,(e,i)=>Math.max(e,i.value))}function s2(t){return GQ(t,(e,i)=>Pi(e,i.value))}function GQ(t,e){if(eAe(t))return ke(t.condition).reduce(e,t.value);if(_a(t))return t.value}function VQ(t,e,i){const n=e.get("selections");if(!(n!=null&&n.length))return;const s=ve(i.field);return n.map(a=>`(!length(data(${ve(bi(a)+hu)})) || (${a}[${s}] && indexof(${a}[${s}], datum.value) >= 0))`).join(" || ")}const AU={direction:({direction:t})=>t,format:({fieldOrDatumDef:t,legend:e,config:i})=>{const{format:n,formatType:s}=e;return dJ(t,t.type,n,s,i,!1)},formatType:({legend:t,fieldOrDatumDef:e,scaleType:i})=>{const{formatType:n}=t;return fJ(n,e,i)},gradientLength:t=>{const{legend:e,legendConfig:i}=t;return e.gradientLength??i.gradientLength??oCe(t)},labelOverlap:({legend:t,legendConfig:e,scaleType:i})=>t.labelOverlap??e.labelOverlap??lCe(i),symbolType:({legend:t,markDef:e,channel:i,encoding:n})=>t.symbolType??iCe(e.type,i,n.shape,e.shape),title:({fieldOrDatumDef:t,config:e})=>op(t,e,{allowDisabling:!0}),type:({legendType:t,scaleType:e,channel:i})=>{if(ap(i)&&ia(e)){if(t==="gradient")return}else if(t==="symbol")return;return t},values:({fieldOrDatumDef:t,legend:e})=>tCe(e,t)};function tCe(t,e){const i=t.values;if(ue(i))return SJ(e,i);if(Ce(i))return i}function iCe(t,e,i,n){if(e!=="shape"){const s=s2(i)??n;if(s)return s}switch(t){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function nCe(t){const{legend:e}=t;return Pi(e.type,sCe(t))}function sCe({channel:t,timeUnit:e,scaleType:i}){if(ap(t)){if(It(["quarter","month","day"],e))return"symbol";if(ia(i))return"gradient"}return"symbol"}function rCe({legendConfig:t,legendType:e,orient:i,legend:n}){return n.direction??t[e?"gradientDirection":"symbolDirection"]??aCe(i,e)}function aCe(t,e){switch(t){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return e==="gradient"?"horizontal":void 0}}function oCe({legendConfig:t,model:e,direction:i,orient:n,scaleType:s}){const{gradientHorizontalMaxLength:a,gradientHorizontalMinLength:c,gradientVerticalMaxLength:d,gradientVerticalMinLength:f}=t;if(ia(s))return i==="horizontal"?n==="top"||n==="bottom"?OU(e,"width",c,a):c:OU(e,"height",f,d)}function OU(t,e,i,n){return{signal:`clamp(${t.getSizeSignalRef(e).signal}, ${i}, ${n})`}}function lCe(t){if(It(["quantile","threshold","log","symlog"],t))return"greedy"}function WQ(t){const e=Ci(t)?cCe(t):hCe(t);return t.component.legends=e,e}function cCe(t){const{encoding:e}=t,i={};for(const n of[Os,...GJ]){const s=Vi(e[n]);!s||!t.getScaleComponent(n)||n===Ns&&Te(s)&&s.type===N_||(i[n]=uCe(t,n))}return i}function dCe(t,e){const i=t.scaleName(e);if(t.mark==="trail"){if(e==="color")return{stroke:i};if(e==="size")return{strokeWidth:i}}return e==="color"?t.markDef.filled?{fill:i}:{stroke:i}:{[e]:i}}function fCe(t,e,i,n){switch(e){case"disable":return i!==void 0;case"values":return!!(i!=null&&i.values);case"title":if(e==="title"&&t===(n==null?void 0:n.title))return!0}return t===(i||{})[e]}function uCe(t,e){var F;let i=t.legend(e);const{markDef:n,encoding:s,config:a}=t,c=a.legend,d=new KNe({},dCe(t,e));TNe(t,e,d);const f=i!==void 0?!i:c.disable;if(d.set("disable",f,i!==void 0),f)return d;i=i||{};const u=t.getScaleComponent(e).get("type"),o=Vi(s[e]),g=Te(o)?(F=wn(o.timeUnit))==null?void 0:F.unit:void 0,w=i.orient||a.legend.orient||"right",m=nCe({legend:i,channel:e,timeUnit:g,scaleType:u}),l=rCe({legend:i,legendType:m,orient:w,legendConfig:c}),T={legend:i,channel:e,model:t,markDef:n,encoding:s,fieldOrDatumDef:o,legendConfig:c,config:a,scaleType:u,orient:w,legendType:m,direction:l};for(const I of jQ){if(m==="gradient"&&I.startsWith("symbol")||m==="symbol"&&I.startsWith("gradient"))continue;const A=I in AU?AU[I](T):i[I];if(A!==void 0){const O=fCe(A,I,i,t.fieldDef(e));(O||a.legend[I]===void 0)&&d.set(I,A,O)}}const b=(i==null?void 0:i.encoding)??{},S=d.get("selections"),x={},B={fieldOrDatumDef:o,model:t,channel:e,legendCmpt:d,legendType:m};for(const I of["labels","legend","title","symbols","gradient","entries"]){const A=UQ(b[I]??{},t),O=I in MU?MU[I](A,B):A;O!==void 0&&!ti(O)&&(x[I]={...S!=null&&S.length&&Te(o)?{name:`${bi(o.field)}_legend_${I}`}:{},...S!=null&&S.length?{interactive:!!S}:{},update:O})}return ti(x)||d.set("encode",x,!!(i!=null&&i.encoding)),d}function hCe(t){const{legends:e,resolve:i}=t.component;for(const n of t.children){WQ(n);for(const s of me(n.component.legends))i.legend[s]=y3(t.component.resolve,s),i.legend[s]==="shared"&&(e[s]=HQ(e[s],n.component.legends[s]),e[s]||(i.legend[s]="independent",delete e[s]))}for(const n of me(e))for(const s of t.children)s.component.legends[n]&&i.legend[n]==="shared"&&delete s.component.legends[n];return e}function HQ(t,e){var a,c,d,f;if(!t)return e.clone();const i=t.getWithExplicit("orient"),n=e.getWithExplicit("orient");if(i.explicit&&n.explicit&&i.value!==n.value)return;let s=!1;for(const u of jQ){const o=rd(t.getWithExplicit(u),e.getWithExplicit(u),u,"legend",(g,w)=>{switch(u){case"symbolType":return pCe(g,w);case"title":return NK(g,w);case"type":return s=!0,zs("symbol")}return ax(g,w,u,"legend")});t.setWithExplicit(u,o)}return s&&((c=(a=t.implicit)==null?void 0:a.encode)!=null&&c.gradient&&Rv(t.implicit,["encode","gradient"]),(f=(d=t.explicit)==null?void 0:d.encode)!=null&&f.gradient&&Rv(t.explicit,["encode","gradient"])),t}function pCe(t,e){return e.value==="circle"?e:t}function _Ce(t,e,i,n){var s,a;t.encode??(t.encode={}),(s=t.encode)[e]??(s[e]={}),(a=t.encode[e]).update??(a.update={}),t.encode[e].update[i]=n}function YQ(t){const e=t.component.legends,i={};for(const s of me(e)){const a=t.getScaleComponent(s),c=ui(a.get("domains"));if(i[c])for(const d of i[c])HQ(d,e[s])||i[c].push(e[s]);else i[c]=[e[s].clone()]}return gn(i).flat().map(s=>yCe(s,t.config)).filter(s=>s!==void 0)}function yCe(t,e){var c,d,f;const{disable:i,labelExpr:n,selections:s,...a}=t.combine();if(!i){if(e.aria===!1&&a.aria==null&&(a.aria=!1),(c=a.encode)!=null&&c.symbols){const u=a.encode.symbols.update;u.fill&&u.fill.value!=="transparent"&&!u.stroke&&!a.stroke&&(u.stroke={value:"transparent"});for(const o of GJ)a[o]&&delete u[o]}if(a.title||delete a.title,n!==void 0){let u=n;(f=(d=a.encode)==null?void 0:d.labels)!=null&&f.update&&Ce(a.encode.labels.update.text)&&(u=ru(n,"datum.label",a.encode.labels.update.text.signal)),_Ce(a,"labels","text",{signal:u})}return a}}function gCe(t){return P_(t)||v3(t)?mCe(t):XQ(t)}function mCe(t){return t.children.reduce((e,i)=>e.concat(i.assembleProjections()),XQ(t))}function XQ(t){const e=t.component.projection;if(!e||e.merged)return[];const i=e.combine(),{name:n}=i;if(e.data){const s={signal:`[${e.size.map(c=>c.signal).join(", ")}]`},a=e.data.reduce((c,d)=>{const f=Ce(d)?d.signal:`data('${t.lookupDataSource(d)}')`;return It(c,f)||c.push(f),c},[]);if(a.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:n,size:s,fit:{signal:a.length>1?`[${a.join(", ")}]`:a[0]},...i}]}else return[{name:n,translate:{signal:"[width / 2, height / 2]"},...i}]}const wCe=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class KQ extends Ql{constructor(e,i,n,s){super({...i},{name:e}),this.specifiedProjection=i,this.size=n,this.data=s,this.merged=!1}get isFit(){return!!this.data}}function JQ(t){t.component.projection=Ci(t)?bCe(t):ECe(t)}function bCe(t){if(t.hasProjection){const e=hs(t.specifiedProjection),i=!(e&&(e.scale!=null||e.translate!=null)),n=i?[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")]:void 0,s=i?TCe(t):void 0,a=new KQ(t.projectionName(!0),{...hs(t.config.projection)??{},...e??{}},n,s);return a.get("type")||a.set("type","equalEarth",!1),a}}function TCe(t){const e=[],{encoding:i}=t;for(const n of[[Ba,xa],[Cr,Ia]])(Vi(i[n[0]])||Vi(i[n[1]]))&&e.push({signal:t.getName(`geojson_${e.length}`)});return t.channelHasField(Ns)&&t.typedFieldDef(Ns).type===N_&&e.push({signal:t.getName(`geojson_${e.length}`)}),e.length===0&&e.push(t.requestDataName(fi.Main)),e}function vCe(t,e){const i=lR(wCe,s=>!!(!Pe(t.explicit,s)&&!Pe(e.explicit,s)||Pe(t.explicit,s)&&Pe(e.explicit,s)&&so(t.get(s),e.get(s))));if(so(t.size,e.size)){if(i)return t;if(so(t.explicit,{}))return e;if(so(e.explicit,{}))return t}return null}function ECe(t){if(t.children.length===0)return;let e;for(const n of t.children)JQ(n);const i=lR(t.children,n=>{const s=n.component.projection;if(s)if(e){const a=vCe(e,s);return a&&(e=a),!!a}else return e=s,!0;else return!0});if(e&&i){const n=t.projectionName(!0),s=new KQ(n,e.specifiedProjection,e.size,Qe(e.data));for(const a of t.children){const c=a.component.projection;c&&(c.isFit&&s.data.push(...a.component.projection.data),a.renameProjection(c.get("name"),n),c.merged=!0)}return s}}function SCe(t,e,i,n){if(Tw(e,i)){const s=Ci(t)?t.axis(i)??t.legend(i)??{}:{},a=xe(e,{expr:"datum"}),c=xe(e,{expr:"datum",binSuffix:"end"});return{formulaAs:xe(e,{binSuffix:"range",forAs:!0}),formula:mw(a,c,s.format,s.formatType,n)}}return{}}function QQ(t,e){return`${xK(t)}_${e}`}function xCe(t,e){return{signal:t.getName(`${e}_bins`),extentSignal:t.getName(`${e}_extent`)}}function g3(t,e,i){const n=ex(i,void 0)??{},s=QQ(n,e);return t.getName(`${s}_bins`)}function BCe(t){return"as"in t}function NU(t,e,i){let n,s;BCe(t)?n=Ie(t.as)?[t.as,`${t.as}_end`]:[t.as[0],t.as[1]]:n=[xe(t,{forAs:!0}),xe(t,{binSuffix:"end",forAs:!0})];const a={...ex(e,void 0)},c=QQ(a,t.field),{signal:d,extentSignal:f}=xCe(i,c);if(qS(a.extent)){const o=a.extent;s=MQ(i,o.param,o),delete a.extent}const u={bin:a,field:t.field,as:[n],...d?{signal:d}:{},...f?{extentSignal:f}:{},...s?{span:s}:{}};return{key:c,binComponent:u}}class ho extends si{clone(){return new ho(null,Qe(this.bins))}constructor(e,i){super(e),this.bins=i}static makeFromEncoding(e,i){const n=i.reduceFieldDef((s,a,c)=>{if(ns(a)&&hi(a.bin)){const{key:d,binComponent:f}=NU(a,a.bin,i);s[d]={...f,...s[d],...SCe(i,a,c,i.config)}}return s},{});return ti(n)?null:new ho(e,n)}static makeFromTransform(e,i,n){const{key:s,binComponent:a}=NU(i,i.bin,n);return new ho(e,{[s]:a})}merge(e,i){for(const n of me(e.bins))n in this.bins?(i(e.bins[n].signal,this.bins[n].signal),this.bins[n].as=ro([...this.bins[n].as,...e.bins[n].as],Ot)):this.bins[n]=e.bins[n];for(const n of e.children)e.removeChild(n),n.parent=this;e.remove()}producedFields(){return new Set(gn(this.bins).map(e=>e.as).flat(2))}dependentFields(){return new Set(gn(this.bins).map(e=>e.field))}hash(){return`Bin ${Ot(this.bins)}`}assemble(){return gn(this.bins).flatMap(e=>{const i=[],[n,...s]=e.as,{extent:a,...c}=e.bin,d={type:"bin",field:Nr(e.field),as:n,signal:e.signal,...qS(a)?{extent:null}:{extent:a},...e.span?{span:{signal:`span(${e.span})`}}:{},...c};!a&&e.extentSignal&&(i.push({type:"extent",field:Nr(e.field),signal:e.extentSignal}),d.extent={signal:e.extentSignal}),i.push(d);for(const f of s)for(let u=0;u<2;u++)i.push({type:"formula",expr:xe({field:n[u]},{expr:"datum"}),as:f[u]});return e.formula&&i.push({type:"formula",expr:e.formula,as:e.formulaAs}),i})}}function ICe(t,e,i,n){var a;const s=Ci(n)?n.encoding[jo(e)]:void 0;if(ns(i)&&Ci(n)&&gJ(i,s,n.markDef,n.config))t.add(xe(i,{})),t.add(xe(i,{suffix:"end"})),i.bin&&Tw(i,e)&&t.add(xe(i,{binSuffix:"range"}));else if(pK(e)){const c=hK(e);t.add(n.getName(c))}else t.add(xe(i));return zu(i)&&EMe((a=i.scale)==null?void 0:a.range)&&t.add(i.scale.range.field),t}function kCe(t,e){for(const i of me(e)){const n=e[i];for(const s of me(n))i in t?t[i][s]=new Set([...t[i][s]??[],...n[s]]):t[i]={[s]:n[s]}}}class la extends si{clone(){return new la(null,new Set(this.dimensions),Qe(this.measures))}constructor(e,i,n){super(e),this.dimensions=i,this.measures=n}get groupBy(){return this.dimensions}static makeFromEncoding(e,i){let n=!1;i.forEachFieldDef(c=>{c.aggregate&&(n=!0)});const s={},a=new Set;return!n||(i.forEachFieldDef((c,d)=>{const{aggregate:f,field:u}=c;if(f)if(f==="count")s["*"]??(s["*"]={}),s["*"].count=new Set([xe(c,{forAs:!0})]);else{if(Ll(f)||Md(f)){const o=Ll(f)?"argmin":"argmax",g=f[o];s[g]??(s[g]={}),s[g][o]=new Set([xe({op:o,field:g},{forAs:!0})])}else s[u]??(s[u]={}),s[u][f]=new Set([xe(c,{forAs:!0})]);Kl(d)&&i.scaleDomain(d)==="unaggregated"&&(s[u]??(s[u]={}),s[u].min=new Set([xe({field:u,aggregate:"min"},{forAs:!0})]),s[u].max=new Set([xe({field:u,aggregate:"max"},{forAs:!0})]))}else ICe(a,d,c,i)}),a.size+me(s).length===0)?null:new la(e,a,s)}static makeFromTransform(e,i){const n=new Set,s={};for(const a of i.aggregate){const{op:c,field:d,as:f}=a;c&&(c==="count"?(s["*"]??(s["*"]={}),s["*"].count=new Set([f||xe(a,{forAs:!0})])):(s[d]??(s[d]={}),s[d][c]=new Set([f||xe(a,{forAs:!0})])))}for(const a of i.groupby??[])n.add(a);return n.size+me(s).length===0?null:new la(e,n,s)}merge(e){return rK(this.dimensions,e.dimensions)?(kCe(this.measures,e.measures),!0):(X2e("different dimensions, cannot merge"),!1)}addDimensions(e){e.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...me(this.measures)])}producedFields(){const e=new Set;for(const i of me(this.measures))for(const n of me(this.measures[i])){const s=this.measures[i][n];s.size===0?e.add(`${n}_${i}`):s.forEach(e.add,e)}return e}hash(){return`Aggregate ${Ot({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const e=[],i=[],n=[];for(const a of me(this.measures))for(const c of me(this.measures[a]))for(const d of this.measures[a][c])n.push(d),e.push(c),i.push(a==="*"?null:Nr(a));return{type:"aggregate",groupby:[...this.dimensions].map(Nr),ops:e,fields:i,as:n}}}class L_ extends si{constructor(e,i,n,s){super(e),this.model=i,this.name=n,this.data=s;for(const a of br){const c=i.facet[a];if(c){const{bin:d,sort:f}=c;this[a]={name:i.getName(`${a}_domain`),fields:[xe(c),...hi(d)?[xe(c,{binSuffix:"end"})]:[]],...fo(f)?{sortField:f}:ue(f)?{sortIndexField:l_(c,a)}:{}}}}this.childModel=i.child}hash(){let e="Facet";for(const i of br)this[i]&&(e+=` ${i.charAt(0)}:${Ot(this[i])}`);return e}get fields(){var i;const e=[];for(const n of br)(i=this[n])!=null&&i.fields&&e.push(...this[n].fields);return e}dependentFields(){const e=new Set(this.fields);for(const i of br)this[i]&&(this[i].sortField&&e.add(this[i].sortField.field),this[i].sortIndexField&&e.add(this[i].sortIndexField));return e}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const e={};for(const i of qo){const n=this.childModel.component.scales[i];if(n&&!n.merged){const s=n.get("type"),a=n.get("range");if(dn(s)&&Ad(a)){const c=fx(this.childModel,i),d=T3(c);d?e[i]=d:be(vR(i))}}}return e}assembleRowColumnHeaderData(e,i,n){const s={row:"y",column:"x",facet:void 0}[e],a=[],c=[],d=[];s&&n&&n[s]&&(i?(a.push(`distinct_${n[s]}`),c.push("max")):(a.push(n[s]),c.push("distinct")),d.push(`distinct_${n[s]}`));const{sortField:f,sortIndexField:u}=this[e];if(f){const{op:o=KS,field:g}=f;a.push(g),c.push(o),d.push(xe(f,{forAs:!0}))}else u&&(a.push(u),c.push("max"),d.push(u));return{name:this[e].name,source:i??this.data,transform:[{type:"aggregate",groupby:this[e].fields,...a.length?{fields:a,ops:c,as:d}:{}}]}}assembleFacetHeaderData(e){var f;const{columns:i}=this.model.layout,{layoutHeaders:n}=this.model.component,s=[],a={};for(const u of h3){for(const o of p3){const g=(n[u]&&n[u][o])??[];for(const w of g)if(((f=w.axes)==null?void 0:f.length)>0){a[u]=!0;break}}if(a[u]){const o=`length(data("${this.facet.name}"))`,g=u==="row"?i?{signal:`ceil(${o} / ${i})`}:1:i?{signal:`min(${o}, ${i})`}:{signal:o};s.push({name:`${this.facet.name}_${u}`,transform:[{type:"sequence",start:0,stop:g}]})}}const{row:c,column:d}=a;return(c||d)&&s.unshift(this.assembleRowColumnHeaderData("facet",null,e)),s}assemble(){const e=[];let i=null;const n=this.getChildIndependentFieldsWithStep(),{column:s,row:a,facet:c}=this;if(s&&a&&(n.x||n.y)){i=`cross_${this.column.name}_${this.row.name}`;const d=[].concat(n.x??[],n.y??[]),f=d.map(()=>"distinct");e.push({name:i,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:d,ops:f}]})}for(const d of[xl,Sl])this[d]&&e.push(this.assembleRowColumnHeaderData(d,i,n));if(c){const d=this.assembleFacetHeaderData(n);d&&e.push(...d)}return e}}function CU(t){return t.startsWith("'")&&t.endsWith("'")||t.startsWith('"')&&t.endsWith('"')?t.slice(1,-1):t}function FCe(t,e){const i=fR(t);if(e==="number")return`toNumber(${i})`;if(e==="boolean")return`toBoolean(${i})`;if(e==="string")return`toString(${i})`;if(e==="date")return`toDate(${i})`;if(e==="flatten")return i;if(e.startsWith("date:")){const n=CU(e.slice(5,e.length));return`timeParse(${i},'${n}')`}else if(e.startsWith("utc:")){const n=CU(e.slice(4,e.length));return`utcParse(${i},'${n}')`}else return be(i2e(e)),null}function MCe(t){const e={};return xT(t.filter,i=>{if(HK(i)){let n=null;BR(i)?n=Ks(i.equal):kR(i)?n=Ks(i.lte):IR(i)?n=Ks(i.lt):FR(i)?n=Ks(i.gt):MR(i)?n=Ks(i.gte):AR(i)?n=i.range[0]:OR(i)&&(n=(i.oneOf??i.in)[0]),n&&(Uu(n)?e[i.field]="date":ii(n)?e[i.field]="number":Ie(n)&&(e[i.field]="string")),i.timeUnit&&(e[i.field]="date")}}),e}function ACe(t){const e={};function i(n){r_(n)?e[n.field]="date":n.type==="quantitative"&&CFe(n.aggregate)?e[n.field]="number":Zp(n.field)>1?n.field in e||(e[n.field]="flatten"):zu(n)&&fo(n.sort)&&Zp(n.sort.field)>1&&(n.sort.field in e||(e[n.sort.field]="flatten"))}if((Ci(t)||ca(t))&&t.forEachFieldDef((n,s)=>{if(ns(n))i(n);else{const a=Pu(s),c=t.fieldDef(a);i({...n,type:c.type})}}),Ci(t)){const{mark:n,markDef:s,encoding:a}=t;if(Od(n)&&!t.encoding.order){const c=s.orient==="horizontal"?"y":"x",d=a[c];Te(d)&&d.type==="quantitative"&&!(d.field in e)&&(e[d.field]="number")}}return e}function OCe(t){const e={};if(Ci(t)&&t.component.selection)for(const i of me(t.component.selection)){const n=t.component.selection[i];for(const s of n.project.items)!s.channel&&Zp(s.field)>1&&(e[s.field]="flatten")}return e}class Fn extends si{clone(){return new Fn(null,Qe(this._parse))}constructor(e,i){super(e),this._parse=i}hash(){return`Parse ${Ot(this._parse)}`}static makeExplicit(e,i,n){var c;let s={};const a=i.data;return!Rc(a)&&((c=a==null?void 0:a.format)!=null&&c.parse)&&(s=a.format.parse),this.makeWithAncestors(e,s,{},n)}static makeWithAncestors(e,i,n,s){for(const d of me(n)){const f=s.getWithExplicit(d);f.value!==void 0&&(f.explicit||f.value===n[d]||f.value==="derived"||n[d]==="flatten"?delete n[d]:be(Y$(d,n[d],f.value)))}for(const d of me(i)){const f=s.get(d);f!==void 0&&(f===i[d]?delete i[d]:be(Y$(d,i[d],f)))}const a=new Ql(i,n);s.copyAll(a);const c={};for(const d of me(a.combine())){const f=a.get(d);f!==null&&(c[d]=f)}return me(c).length===0||s.parseNothing?null:new Fn(e,c)}get parse(){return this._parse}merge(e){this._parse={...this._parse,...e.parse},e.remove()}assembleFormatParse(){const e={};for(const i of me(this._parse)){const n=this._parse[i];Zp(i)===1&&(e[i]=n)}return e}producedFields(){return new Set(me(this._parse))}dependentFields(){return new Set(me(this._parse))}assembleTransforms(e=!1){return me(this._parse).filter(i=>e?Zp(i)>1:!0).map(i=>{const n=FCe(i,this._parse[i]);return n?{type:"formula",expr:n,as:uR(i)}:null}).filter(i=>i!==null)}}class ld extends si{clone(){return new ld(null)}constructor(e){super(e)}dependentFields(){return new Set}producedFields(){return new Set([ya])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:ya}}}class Sw extends si{clone(){return new Sw(null,this.params)}constructor(e,i){super(e),this.params=i}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Ot(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class xw extends si{clone(){return new xw(null,this.params)}constructor(e,i){super(e),this.params=i}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Ot(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class pu extends si{constructor(e){super(null),e??(e={name:"source"});let i;if(Rc(e)||(i=e.format?{...bs(e.format,["parse"])}:{}),om(e))this._data={values:e.values};else if(a_(e)){if(this._data={url:e.url},!i.type){let n=/(?:\.([^.]+))?$/.exec(e.url)[1];It(["json","csv","tsv","dsv","topojson"],n)||(n="json"),i.type=n}}else oQ(e)?this._data={values:[{type:"Sphere"}]}:(rQ(e)||Rc(e))&&(this._data={});this._generator=Rc(e),e.name&&(this._name=e.name),i&&!ti(i)&&(this._data.format=i)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(e){this._name=e}set parent(e){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var RU=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,i,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,i):s?s.value=i:e.set(t,i),i},NCe=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,i,n){if(i==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?n:i==="a"?n.call(t):n?n.value:e.get(t)},Xy;function m3(t){return t instanceof pu||t instanceof Sw||t instanceof xw}class w3{constructor(){Xy.set(this,void 0),RU(this,Xy,!1,"f")}setModified(){RU(this,Xy,!0,"f")}get modifiedFlag(){return NCe(this,Xy,"f")}}Xy=new WeakMap;class ju extends w3{getNodeDepths(e,i,n){n.set(e,i);for(const s of e.children)this.getNodeDepths(s,i+1,n);return n}optimize(e){const n=[...this.getNodeDepths(e,0,new Map).entries()].sort((s,a)=>a[1]-s[1]);for(const s of n)this.run(s[0]);return this.modifiedFlag}}class b3 extends w3{optimize(e){this.run(e);for(const i of e.children)this.optimize(i);return this.modifiedFlag}}class CCe extends b3{mergeNodes(e,i){const n=i.shift();for(const s of i)e.removeChild(s),s.parent=n,s.remove()}run(e){const i=e.children.map(s=>s.hash()),n={};for(let s=0;s<i.length;s++)n[i[s]]===void 0?n[i[s]]=[e.children[s]]:n[i[s]].push(e.children[s]);for(const s of me(n))n[s].length>1&&(this.setModified(),this.mergeNodes(e,n[s]))}}class RCe extends b3{constructor(e){super(),this.requiresSelectionId=e&&u3(e)}run(e){e instanceof ld&&(this.requiresSelectionId&&(m3(e.parent)||e.parent instanceof la||e.parent instanceof Fn)||(this.setModified(),e.remove()))}}class LCe extends w3{optimize(e){return this.run(e,new Set),this.modifiedFlag}run(e,i){let n=new Set;e instanceof uo&&(n=e.producedFields(),cR(n,i)&&(this.setModified(),e.removeFormulas(i),e.producedFields.length===0&&e.remove()));for(const s of e.children)this.run(s,new Set([...i,...n]))}}class DCe extends b3{constructor(){super()}run(e){e instanceof es&&!e.isRequired()&&(this.setModified(),e.remove())}}class PCe extends ju{run(e){if(!m3(e)&&!(e.numChildren()>1)){for(const i of e.children)if(i instanceof Fn)if(e instanceof Fn)this.setModified(),e.merge(i);else{if(dR(e.producedFields(),i.dependentFields()))continue;this.setModified(),i.swapWithParent()}}}}class $Ce extends ju{run(e){const i=[...e.children],n=e.children.filter(s=>s instanceof Fn);if(e.numChildren()>1&&n.length>=1){const s={},a=new Set;for(const c of n){const d=c.parse;for(const f of me(d))f in s?s[f]!==d[f]&&a.add(f):s[f]=d[f]}for(const c of a)delete s[c];if(!ti(s)){this.setModified();const c=new Fn(e,s);for(const d of i){if(d instanceof Fn)for(const f of me(s))delete d.parse[f];e.removeChild(d),d.parent=c,d instanceof Fn&&me(d.parse).length===0&&d.remove()}}}}}class UCe extends ju{run(e){e instanceof es||e.numChildren()>0||e instanceof L_||e instanceof pu||(this.setModified(),e.remove())}}class zCe extends ju{run(e){const i=e.children.filter(s=>s instanceof uo),n=i.pop();for(const s of i)this.setModified(),n.merge(s)}}class jCe extends ju{run(e){const i=e.children.filter(s=>s instanceof la),n={};for(const s of i){const a=Ot(s.groupBy);a in n||(n[a]=[]),n[a].push(s)}for(const s of me(n)){const a=n[s];if(a.length>1){const c=a.pop();for(const d of a)c.merge(d)&&(e.removeChild(d),d.parent=c,d.remove(),this.setModified())}}}}class qCe extends ju{constructor(e){super(),this.model=e}run(e){const i=!(m3(e)||e instanceof R_||e instanceof Fn||e instanceof ld),n=[],s=[];for(const a of e.children)a instanceof ho&&(i&&!dR(e.producedFields(),a.dependentFields())?n.push(a):s.push(a));if(n.length>0){const a=n.pop();for(const c of n)a.merge(c,this.model.renameSignal.bind(this.model));this.setModified(),e instanceof ho?e.merge(a,this.model.renameSignal.bind(this.model)):a.swapWithParent()}if(s.length>1){const a=s.pop();for(const c of s)a.merge(c,this.model.renameSignal.bind(this.model));this.setModified()}}}class GCe extends ju{run(e){const i=[...e.children];if(!su(i,c=>c instanceof es)||e.numChildren()<=1)return;const s=[];let a;for(const c of i)if(c instanceof es){let d=c;for(;d.numChildren()===1;){const[f]=d.children;if(f instanceof es)d=f;else break}s.push(...d.children),a?(e.removeChild(c),c.parent=a.parent,a.parent.removeChild(a),a.parent=d,this.setModified()):a=d}else s.push(c);if(s.length){this.setModified();for(const c of s)c.parent.removeChild(c),c.parent=a}}}class qu extends si{clone(){return new qu(null,Qe(this.transform))}constructor(e,i){super(e),this.transform=i}addDimensions(e){this.transform.groupby=ro(this.transform.groupby.concat(e),i=>i)}dependentFields(){const e=new Set;return this.transform.groupby&&this.transform.groupby.forEach(e.add,e),this.transform.joinaggregate.map(i=>i.field).filter(i=>i!==void 0).forEach(e.add,e),e}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(e){return e.as??xe(e)}hash(){return`JoinAggregateTransform ${Ot(this.transform)}`}assemble(){const e=[],i=[],n=[];for(const a of this.transform.joinaggregate)i.push(a.op),n.push(this.getDefaultName(a)),e.push(a.field===void 0?null:a.field);const s=this.transform.groupby;return{type:"joinaggregate",as:n,ops:i,fields:e,...s!==void 0?{groupby:s}:{}}}}function VCe(t){return t.stack.stackBy.reduce((e,i)=>{const n=i.fieldDef,s=xe(n);return s&&e.push(s),e},[])}function WCe(t){return ue(t)&&t.every(e=>Ie(e))&&t.length>1}class kl extends si{clone(){return new kl(null,Qe(this._stack))}constructor(e,i){super(e),this._stack=i}static makeFromTransform(e,i){const{stack:n,groupby:s,as:a,offset:c="zero"}=i,d=[],f=[];if(i.sort!==void 0)for(const g of i.sort)d.push(g.field),f.push(Pi(g.order,"ascending"));const u={field:d,order:f};let o;return WCe(a)?o=a:Ie(a)?o=[a,`${a}_end`]:o=[`${i.stack}_start`,`${i.stack}_end`],new kl(e,{dimensionFieldDefs:[],stackField:n,groupby:s,offset:c,sort:u,facetby:[],as:o})}static makeFromEncoding(e,i){const n=i.stack,{encoding:s}=i;if(!n)return null;const{groupbyChannels:a,fieldChannel:c,offset:d,impute:f}=n,u=a.map(m=>{const l=s[m];return Fo(l)}).filter(m=>!!m),o=VCe(i),g=i.encoding.order;let w;return ue(g)||Te(g)?w=MK(g):w=o.reduce((m,l)=>(m.field.push(l),m.order.push(c==="y"?"descending":"ascending"),m),{field:[],order:[]}),new kl(e,{dimensionFieldDefs:u,stackField:i.vgField(c),facetby:[],stackby:o,sort:w,offset:d,impute:f,as:[i.vgField(c,{suffix:"start",forAs:!0}),i.vgField(c,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(e){this._stack.facetby.push(...e)}dependentFields(){const e=new Set;return e.add(this._stack.stackField),this.getGroupbyFields().forEach(e.add,e),this._stack.facetby.forEach(e.add,e),this._stack.sort.field.forEach(e.add,e),e}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Ot(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:e,impute:i,groupby:n}=this._stack;return e.length>0?e.map(s=>s.bin?i?[xe(s,{binSuffix:"mid"})]:[xe(s,{}),xe(s,{binSuffix:"end"})]:[xe(s)]).flat():n??[]}assemble(){const e=[],{facetby:i,dimensionFieldDefs:n,stackField:s,stackby:a,sort:c,offset:d,impute:f,as:u}=this._stack;if(f)for(const o of n){const{bandPosition:g=.5,bin:w}=o;if(w){const m=xe(o,{expr:"datum"}),l=xe(o,{expr:"datum",binSuffix:"end"});e.push({type:"formula",expr:`${g}*${m}+${1-g}*${l}`,as:xe(o,{binSuffix:"mid",forAs:!0})})}e.push({type:"impute",field:s,groupby:[...a,...i],key:xe(o,{binSuffix:"mid"}),method:"value",value:0})}return e.push({type:"stack",groupby:[...this.getGroupbyFields(),...i],field:s,sort:c,as:u,offset:d}),e}}class D_ extends si{clone(){return new D_(null,Qe(this.transform))}constructor(e,i){super(e),this.transform=i}addDimensions(e){this.transform.groupby=ro(this.transform.groupby.concat(e),i=>i)}dependentFields(){const e=new Set;return(this.transform.groupby??[]).forEach(e.add,e),(this.transform.sort??[]).forEach(i=>e.add(i.field)),this.transform.window.map(i=>i.field).filter(i=>i!==void 0).forEach(e.add,e),e}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(e){return e.as??xe(e)}hash(){return`WindowTransform ${Ot(this.transform)}`}assemble(){const e=[],i=[],n=[],s=[];for(const g of this.transform.window)i.push(g.op),n.push(this.getDefaultName(g)),s.push(g.param===void 0?null:g.param),e.push(g.field===void 0?null:g.field);const a=this.transform.frame,c=this.transform.groupby;if(a&&a[0]===null&&a[1]===null&&i.every(g=>bR(g)))return{type:"joinaggregate",as:n,ops:i,fields:e,...c!==void 0?{groupby:c}:{}};const d=[],f=[];if(this.transform.sort!==void 0)for(const g of this.transform.sort)d.push(g.field),f.push(g.order??"ascending");const u={field:d,order:f},o=this.transform.ignorePeers;return{type:"window",params:s,as:n,ops:i,fields:e,sort:u,...o!==void 0?{ignorePeers:o}:{},...c!==void 0?{groupby:c}:{},...a!==void 0?{frame:a}:{}}}}function HCe(t){function e(i){if(!(i instanceof L_)){const n=i.clone();if(n instanceof es){const s=a2+n.getSource();n.setSource(s),t.model.component.data.outputNodes[s]=n}else(n instanceof la||n instanceof kl||n instanceof D_||n instanceof qu)&&n.addDimensions(t.fields);for(const s of i.children.flatMap(e))s.parent=n;return[n]}return i.children.flatMap(e)}return e}function r2(t){if(t instanceof L_)if(t.numChildren()===1&&!(t.children[0]instanceof es)){const e=t.children[0];(e instanceof la||e instanceof kl||e instanceof D_||e instanceof qu)&&e.addDimensions(t.fields),e.swapWithParent(),r2(t)}else{const e=t.model.component.data.main;ZQ(e);const i=HCe(t),n=t.children.map(i).flat();for(const s of n)s.parent=e}else t.children.map(r2)}function ZQ(t){if(t instanceof es&&t.type===fi.Main&&t.numChildren()===1){const e=t.children[0];e instanceof L_||(e.swapWithParent(),ZQ(t))}}const a2="scale_",x0=5;function o2(t){for(const e of t){for(const i of e.children)if(i.parent!==e)return!1;if(!o2(e.children))return!1}return!0}function Pr(t,e){let i=!1;for(const n of e)i=t.optimize(n)||i;return i}function LU(t,e,i){let n=t.sources,s=!1;return s=Pr(new DCe,n)||s,s=Pr(new RCe(e),n)||s,n=n.filter(a=>a.numChildren()>0),s=Pr(new UCe,n)||s,n=n.filter(a=>a.numChildren()>0),i||(s=Pr(new PCe,n)||s,s=Pr(new qCe(e),n)||s,s=Pr(new LCe,n)||s,s=Pr(new $Ce,n)||s,s=Pr(new jCe,n)||s,s=Pr(new zCe,n)||s,s=Pr(new CCe,n)||s,s=Pr(new GCe,n)||s),t.sources=n,s}function YCe(t,e){o2(t.sources);let i=0,n=0;for(let s=0;s<x0&&LU(t,e,!0);s++)i++;t.sources.map(r2);for(let s=0;s<x0&&LU(t,e,!1);s++)n++;o2(t.sources),Math.max(i,n)===x0&&be(`Maximum optimization runs(${x0}) reached.`)}class vs{constructor(e){Object.defineProperty(this,"signal",{enumerable:!0,get:e})}static fromName(e,i){return new vs(()=>e(i))}}function eZ(t){Ci(t)?XCe(t):KCe(t)}function XCe(t){const e=t.component.scales;for(const i of me(e)){const n=QCe(t,i);if(e[i].setWithExplicit("domains",n),eRe(t,i),t.component.data.isFaceted){let a=t;for(;!ca(a)&&a.parent;)a=a.parent;if(a.component.resolve.scale[i]==="shared")for(const d of n.value)wl(d)&&(d.data=a2+d.data.replace(a2,""))}}}function KCe(t){for(const i of t.children)eZ(i);const e=t.component.scales;for(const i of me(e)){let n,s=null;for(const a of t.children){const c=a.component.scales[i];if(c){n===void 0?n=c.getWithExplicit("domains"):n=rd(n,c.getWithExplicit("domains"),"domains","scale",l2);const d=c.get("selectionExtent");s&&d&&s.param!==d.param&&be(QFe),s=d}}e[i].setWithExplicit("domains",n),s&&e[i].set("selectionExtent",s,!0)}}function JCe(t,e,i,n){if(t==="unaggregated"){const{valid:s,reason:a}=DU(e,i);if(!s){be(a);return}}else if(t===void 0&&n.useUnaggregatedDomain){const{valid:s}=DU(e,i);if(s)return"unaggregated"}return t}function QCe(t,e){const i=t.getScaleComponent(e).get("type"),{encoding:n}=t,s=JCe(t.scaleDomain(e),t.typedFieldDef(e),i,t.config.scale);return s!==t.scaleDomain(e)&&(t.specifiedScales[e]={...t.specifiedScales[e],domain:s}),e==="x"&&Vi(n.x2)?Vi(n.x)?rd(cc(i,s,t,"x"),cc(i,s,t,"x2"),"domain","scale",l2):cc(i,s,t,"x2"):e==="y"&&Vi(n.y2)?Vi(n.y)?rd(cc(i,s,t,"y"),cc(i,s,t,"y2"),"domain","scale",l2):cc(i,s,t,"y2"):cc(i,s,t,e)}function ZCe(t,e,i){return t.map(n=>({signal:`{data: ${tx(n,{timeUnit:i,type:e})}}`}))}function aI(t,e,i){var s;const n=(s=wn(i))==null?void 0:s.unit;return e==="temporal"||n?ZCe(t,e,n):[t]}function cc(t,e,i,n){const{encoding:s}=i,a=Vi(s[n]),{type:c}=a,d=a.timeUnit;if(vMe(e)){const g=cc(t,void 0,i,n),w=aI(e.unionWith,c,d);return ja([...w,...g.value])}else{if(Ce(e))return ja([e]);if(e&&e!=="unaggregated"&&!eJ(e))return ja(aI(e,c,d))}const f=i.stack;if(f&&n===f.fieldChannel){if(f.offset==="normalize")return zs([[0,1]]);const g=i.requestDataName(fi.Main);return zs([{data:g,field:i.vgField(n,{suffix:"start"})},{data:g,field:i.vgField(n,{suffix:"end"})}])}const u=Kl(n)&&Te(a)?tRe(i,n,t):void 0;if(Go(a)){const g=aI([a.datum],c,d);return zs(g)}const o=a;if(e==="unaggregated"){const g=i.requestDataName(fi.Main),{field:w}=a;return zs([{data:g,field:xe({field:w,aggregate:"min"})},{data:g,field:xe({field:w,aggregate:"max"})}])}else if(hi(o.bin)){if(dn(t))return zs(t==="bin-ordinal"?[]:[{data:rm(u)?i.requestDataName(fi.Main):i.requestDataName(fi.Raw),field:i.vgField(n,Tw(o,n)?{binSuffix:"range"}:{}),sort:u===!0||!Me(u)?{field:i.vgField(n,{}),op:"min"}:u}]);{const{bin:g}=o;if(hi(g)){const w=g3(i,o.field,g);return zs([new vs(()=>{const m=i.getSignalName(w);return`[${m}.start, ${m}.stop]`})])}else return zs([{data:i.requestDataName(fi.Main),field:i.vgField(n,{})}])}}else if(o.timeUnit&&It(["time","utc"],t)&&gJ(o,Ci(i)?i.encoding[jo(n)]:void 0,i.markDef,i.config)){const g=i.requestDataName(fi.Main);return zs([{data:g,field:i.vgField(n)},{data:g,field:i.vgField(n,{suffix:"end"})}])}else return zs(u?[{data:rm(u)?i.requestDataName(fi.Main):i.requestDataName(fi.Raw),field:i.vgField(n),sort:u}]:[{data:i.requestDataName(fi.Main),field:i.vgField(n)}])}function oI(t,e){const{op:i,field:n,order:s}=t;return{op:i??(e?"sum":KS),...n?{field:Nr(n)}:{},...s?{order:s}:{}}}function eRe(t,e){var d;const i=t.component.scales[e],n=t.specifiedScales[e].domain,s=(d=t.fieldDef(e))==null?void 0:d.bin,a=eJ(n)&&n,c=$u(s)&&qS(s.extent)&&s.extent;(a||c)&&i.set("selectionExtent",a??c,!0)}function tRe(t,e,i){if(!dn(i))return;const n=t.fieldDef(e),s=n.sort;if(pJ(s))return{op:"min",field:l_(n,e),order:"ascending"};const{stack:a}=t,c=a?new Set([...a.groupbyFields,...a.stackBy.map(d=>d.fieldDef.field)]):void 0;if(fo(s)){const d=a&&!c.has(s.field);return oI(s,d)}else if(hJ(s)){const{encoding:d,order:f}=s,u=t.fieldDef(d),{aggregate:o,field:g}=u,w=a&&!c.has(g);if(Ll(o)||Md(o))return oI({field:xe(u),order:f},w);if(bR(o)||!o)return oI({op:o,field:g,order:f},w)}else{if(s==="descending")return{op:"min",field:t.vgField(e),order:"descending"};if(It(["ascending",void 0],s))return!0}}function DU(t,e){const{aggregate:i,type:n}=t;return i?Ie(i)&&!LFe.has(i)?{valid:!1,reason:B2e(i)}:n==="quantitative"&&e==="log"?{valid:!1,reason:I2e(t)}:{valid:!0}:{valid:!1,reason:x2e(t)}}function l2(t,e,i,n){return t.explicit&&e.explicit&&be(O2e(i,n,t.value,e.value)),{explicit:t.explicit,value:[...t.value,...e.value]}}function iRe(t){const e=ro(t.map(c=>{if(wl(c)){const{sort:d,...f}=c;return f}return c}),Ot),i=ro(t.map(c=>{if(wl(c)){const d=c.sort;return d!==void 0&&!rm(d)&&("op"in d&&d.op==="count"&&delete d.field,d.order==="ascending"&&delete d.order),d}}).filter(c=>c!==void 0),Ot);if(e.length===0)return;if(e.length===1){const c=t[0];if(wl(c)&&i.length>0){let d=i[0];if(i.length>1){be(K$);const f=i.filter(u=>Me(u)&&"op"in u&&u.op!=="min");i.every(u=>Me(u)&&"op"in u)&&f.length===1?d=f[0]:d=!0}else if(Me(d)&&"field"in d){const f=d.field;c.field===f&&(d=d.order?{order:d.order}:!0)}return{...c,sort:d}}return c}const n=ro(i.map(c=>rm(c)||!("op"in c)||Ie(c.op)&&c.op in OFe?c:(be(C2e(c)),!0)),Ot);let s;n.length===1?s=n[0]:n.length>1&&(be(K$),s=!0);const a=ro(t.map(c=>wl(c)?c.data:null),c=>c);return a.length===1&&a[0]!==null?{data:a[0],fields:e.map(d=>d.field),...s?{sort:s}:{}}:{fields:e,...s?{sort:s}:{}}}function T3(t){if(wl(t)&&Ie(t.field))return t.field;if(DFe(t)){let e;for(const i of t.fields)if(wl(i)&&Ie(i.field)){if(!e)e=i.field;else if(e!==i.field)return be(R2e),e}return be(L2e),e}else if(PFe(t)){be(D2e);const e=t.fields[0];return Ie(e)?e:void 0}}function fx(t,e){const n=t.component.scales[e].get("domains").map(s=>(wl(s)&&(s.data=t.lookupDataSource(s.data)),s));return iRe(n)}function tZ(t){return P_(t)||v3(t)?t.children.reduce((e,i)=>e.concat(tZ(i)),PU(t)):PU(t)}function PU(t){return me(t.component.scales).reduce((e,i)=>{const n=t.component.scales[i];if(n.merged)return e;const s=n.combine(),{name:a,type:c,selectionExtent:d,domains:f,range:u,reverse:o,...g}=s,w=nRe(s.range,a,i,t),m=fx(t,i),l=d?JOe(t,d,n,m):null;return e.push({name:a,type:c,...m?{domain:m}:{},...l?{domainRaw:l}:{},range:w,...o!==void 0?{reverse:o}:{},...g}),e},[])}function nRe(t,e,i,n){if(cn(i)){if(Ad(t))return{step:{signal:`${e}_step`}}}else if(Me(t)&&wl(t))return{...t,data:n.lookupDataSource(t.data)};return t}class iZ extends Ql{constructor(e,i){super({},{name:e}),this.merged=!1,this.setWithExplicit("type",i)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:su(this.get("domains"),e=>ue(e)&&e.length===2&&e[0]<=0&&e[1]>=0)}}const sRe=["range","scheme"];function rRe(t){const e=t.component.scales;for(const i of jS){const n=e[i];if(!n)continue;const s=aRe(i,t);n.setWithExplicit("range",s)}}function $U(t,e){const i=t.fieldDef(e);if(i!=null&&i.bin){const{bin:n,field:s}=i,a=Cs(e),c=t.getName(a);if(Me(n)&&n.binned&&n.step!==void 0)return new vs(()=>{const d=t.scaleName(e),f=`(domain("${d}")[1] - domain("${d}")[0]) / ${n.step}`;return`${t.getSignalName(c)} / (${f})`});if(hi(n)){const d=g3(t,s,n);return new vs(()=>{const f=t.getSignalName(d),u=`(${f}.stop - ${f}.start) / ${f}.step`;return`${t.getSignalName(c)} / (${u})`})}}}function aRe(t,e){const i=e.specifiedScales[t],{size:n}=e,a=e.getScaleComponent(t).get("type");for(const g of sRe)if(i[g]!==void 0){const w=VF(a,g),m=tJ(t,g);if(!w)be(DK(a,g,t));else if(m)be(m);else switch(g){case"range":{const l=i.range;if(ue(l)){if(cn(t))return ja(l.map(T=>{if(T==="width"||T==="height"){const b=e.getName(T),S=e.getSignalName.bind(e);return vs.fromName(S,b)}return T}))}else if(Me(l))return ja({data:e.requestDataName(fi.Main),field:l.field,sort:{op:"min",field:e.vgField(t)}});return ja(l)}case"scheme":return ja(oRe(i[g]))}}const c=t===Ti||t==="xOffset"?"width":"height",d=n[c];if(Mo(d)){if(cn(t))if(dn(a)){const g=nZ(d,e,t);if(g)return ja({step:g})}else be(PK(c));else if(O_(t)){const g=t===xd?"x":"y";if(e.getScaleComponent(g).get("type")==="band"){const l=sZ(d,a);if(l)return ja(l)}}}const{rangeMin:f,rangeMax:u}=i,o=lRe(t,e);return(f!==void 0||u!==void 0)&&VF(a,"rangeMin")&&ue(o)&&o.length===2?ja([f??o[0],u??o[1]]):zs(o)}function oRe(t){return TMe(t)?{scheme:t.name,...bs(t,["name"])}:{scheme:t}}function lRe(t,e){const{size:i,config:n,mark:s,encoding:a}=e,c=e.getSignalName.bind(e),{type:d}=Vi(a[t]),u=e.getScaleComponent(t).get("type"),{domain:o,domainMid:g}=e.specifiedScales[t];switch(t){case Ti:case ln:{if(It(["point","band"],u)){const l=rZ(t,i,n.view);if(Mo(l))return{step:nZ(l,e,t)}}const w=Cs(t),m=e.getName(w);return t===ln&&or(u)?[vs.fromName(c,m),0]:[0,vs.fromName(c,m)]}case xd:case A_:return cRe(t,e,u);case Yl:{const w=e.component.scales[t].get("zero"),m=aZ(s,w,n),l=uRe(s,i,e,n);return i_(u)?fRe(m,l,dRe(u,n,o,t)):[m,l]}case Lr:return[0,Math.PI*2];case Du:return[0,360];case Sa:return[0,new vs(()=>{const w=e.getSignalName("width"),m=e.getSignalName("height");return`min(${w},${m})/2`})];case kd:return[n.scale.minStrokeWidth,n.scale.maxStrokeWidth];case Fd:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Ns:return"symbol";case Os:case Uo:case zo:return u==="ordinal"?d==="nominal"?"category":"ordinal":g!==void 0?"diverging":s==="rect"||s==="geoshape"?"heatmap":"ramp";case Xl:case Bd:case Id:return[n.scale.minOpacity,n.scale.maxOpacity]}}function nZ(t,e,i){const{encoding:n}=e,s=e.getScaleComponent(i),a=yR(i),c=n[a];if(WJ({step:t,offsetIsDiscrete:Je(c)&&XK(c.type)})==="offset"&&kJ(n,a)){const f=e.getScaleComponent(a);let o=`domain('${e.scaleName(a)}').length`;if(f.get("type")==="band"){const w=f.get("paddingInner")??f.get("padding")??0,m=f.get("paddingOuter")??f.get("padding")??0;o=`bandspace(${o}, ${w}, ${m})`}const g=s.get("paddingInner")??s.get("padding");return{signal:`${t.step} * ${o} / (1-${jFe(g)})`}}else return t.step}function sZ(t,e){if(WJ({step:t,offsetIsDiscrete:dn(e)})==="offset")return{step:t.step}}function cRe(t,e,i){const n=t===xd?"x":"y",a=e.getScaleComponent(n).get("type"),c=e.scaleName(n);if(a==="band"){const d=rZ(n,e.size,e.config.view);if(Mo(d)){const f=sZ(d,i);if(f)return f}return[0,{signal:`bandwidth('${c}')`}]}else{const d=e.encoding[n];return Te(d)&&d.timeUnit?[0,{signal:WK(d.timeUnit,u=>`scale('${c}', ${u})`)}]:nK(`Cannot use ${t} scale if ${n} scale is not discrete.`)}}function rZ(t,e,i){const n=t===Ti?"width":"height",s=e[n];return s||Wv(i,n)}function dRe(t,e,i,n){switch(t){case"quantile":return e.scale.quantileCount;case"quantize":return e.scale.quantizeCount;case"threshold":return i!==void 0&&ue(i)?i.length+1:(be(W2e(n)),3)}}function fRe(t,e,i){const n=()=>{const s=Bl(e),a=Bl(t),c=`(${s} - ${a}) / (${i} - 1)`;return`sequence(${a}, ${s} + ${c}, ${c})`};return Ce(e)?new vs(n):{signal:n()}}function aZ(t,e,i){if(e)return Ce(e)?{signal:`${e.signal} ? 0 : ${aZ(t,!1,i)}`}:0;switch(t){case"bar":case"tick":return i.scale.minBandSize;case"line":case"trail":case"rule":return i.scale.minStrokeWidth;case"text":return i.scale.minFontSize;case"point":case"square":case"circle":return i.scale.minSize}throw new Error(GS("size",t))}const UU=.95;function uRe(t,e,i,n){const s={x:$U(i,"x"),y:$U(i,"y")};switch(t){case"bar":case"tick":{if(n.scale.maxBandSize!==void 0)return n.scale.maxBandSize;const a=zU(e,s,n.view);return ii(a)?a-1:new vs(()=>`${a.signal} - 1`)}case"line":case"trail":case"rule":return n.scale.maxStrokeWidth;case"text":return n.scale.maxFontSize;case"point":case"square":case"circle":{if(n.scale.maxSize)return n.scale.maxSize;const a=zU(e,s,n.view);return ii(a)?Math.pow(UU*a,2):new vs(()=>`pow(${UU} * ${a.signal}, 2)`)}}throw new Error(GS("size",t))}function zU(t,e,i){const n=Mo(t.width)?t.width.step:Vv(i,"width"),s=Mo(t.height)?t.height.step:Vv(i,"height");return e.x||e.y?new vs(()=>`min(${[e.x?e.x.signal:n,e.y?e.y.signal:s].join(", ")})`):Math.min(n,s)}function oZ(t,e){Ci(t)?hRe(t,e):cZ(t,e)}function hRe(t,e){const i=t.component.scales,{config:n,encoding:s,markDef:a,specifiedScales:c}=t;for(const d of me(i)){const f=c[d],u=i[d],o=t.getScaleComponent(d),g=Vi(s[d]),w=f[e],m=o.get("type"),l=o.get("padding"),T=o.get("paddingInner"),b=VF(m,e),S=tJ(d,e);if(w!==void 0&&(b?S&&be(S):be(DK(m,e,d))),b&&S===void 0)if(w!==void 0){const x=g.timeUnit,B=g.type;switch(e){case"domainMax":case"domainMin":Uu(f[e])||B==="temporal"||x?u.set(e,{signal:tx(f[e],{type:B,timeUnit:x})},!0):u.set(e,f[e],!0);break;default:u.copyKeyFromObject(e,f)}}else{const x=e in jU?jU[e]({model:t,channel:d,fieldOrDatumDef:g,scaleType:m,scalePadding:l,scalePaddingInner:T,domain:f.domain,domainMin:f.domainMin,domainMax:f.domainMax,markDef:a,config:n,hasNestedOffsetScale:HF(s,d),hasSecondaryRangeChannel:!!s[jo(d)]}):n.scale[e];x!==void 0&&u.set(e,x,!1)}}}const jU={bins:({model:t,fieldOrDatumDef:e})=>Te(e)?pRe(t,e):void 0,interpolate:({channel:t,fieldOrDatumDef:e})=>_Re(t,e.type),nice:({scaleType:t,channel:e,domain:i,domainMin:n,domainMax:s,fieldOrDatumDef:a})=>yRe(t,e,i,n,s,a),padding:({channel:t,scaleType:e,fieldOrDatumDef:i,markDef:n,config:s})=>gRe(t,e,s.scale,i,n,s.bar),paddingInner:({scalePadding:t,channel:e,markDef:i,scaleType:n,config:s,hasNestedOffsetScale:a})=>mRe(t,e,i.type,n,s.scale,a),paddingOuter:({scalePadding:t,channel:e,scaleType:i,scalePaddingInner:n,config:s,hasNestedOffsetScale:a})=>wRe(t,e,i,n,s.scale,a),reverse:({fieldOrDatumDef:t,scaleType:e,channel:i,config:n})=>{const s=Te(t)?t.sort:void 0;return bRe(e,s,i,n.scale)},zero:({channel:t,fieldOrDatumDef:e,domain:i,markDef:n,scaleType:s,config:a,hasSecondaryRangeChannel:c})=>TRe(t,e,i,n,s,a.scale,c)};function lZ(t){Ci(t)?rRe(t):cZ(t,"range")}function cZ(t,e){const i=t.component.scales;for(const n of t.children)e==="range"?lZ(n):oZ(n,e);for(const n of me(i)){let s;for(const a of t.children){const c=a.component.scales[n];if(c){const d=c.getWithExplicit(e);s=rd(s,d,e,"scale",sQ((f,u)=>{switch(e){case"range":return f.step&&u.step?f.step-u.step:0}return 0}))}}i[n].setWithExplicit(e,s)}}function pRe(t,e){const i=e.bin;if(hi(i)){const n=g3(t,e.field,i);return new vs(()=>t.getSignalName(n))}else if(un(i)&&$u(i)&&i.step!==void 0)return{step:i.step}}function _Re(t,e){if(It([Os,Uo,zo],t)&&e!=="nominal")return"hcl"}function yRe(t,e,i,n,s,a){var c;if(!((c=Fo(a))!=null&&c.bin||ue(i)||s!=null||n!=null||It([Ts.TIME,Ts.UTC],t)))return cn(e)?!0:void 0}function gRe(t,e,i,n,s,a){if(cn(t)){if(ia(e)){if(i.continuousPadding!==void 0)return i.continuousPadding;const{type:c,orient:d}=s;if(c==="bar"&&!(Te(n)&&(n.bin||n.timeUnit))&&(d==="vertical"&&t==="x"||d==="horizontal"&&t==="y"))return a.continuousBandSize}if(e===Ts.POINT)return i.pointPadding}}function mRe(t,e,i,n,s,a=!1){if(t===void 0){if(cn(e)){const{bandPaddingInner:c,barBandPaddingInner:d,rectBandPaddingInner:f,bandWithNestedOffsetPaddingInner:u}=s;return a?u:Pi(c,i==="bar"?d:f)}else if(O_(e)&&n===Ts.BAND)return s.offsetBandPaddingInner}}function wRe(t,e,i,n,s,a=!1){if(t===void 0){if(cn(e)){const{bandPaddingOuter:c,bandWithNestedOffsetPaddingOuter:d}=s;if(a)return d;if(i===Ts.BAND)return Pi(c,Ce(n)?{signal:`${n.signal}/2`}:n/2)}else if(O_(e)){if(i===Ts.POINT)return .5;if(i===Ts.BAND)return s.offsetBandPaddingOuter}}}function bRe(t,e,i,n){if(i==="x"&&n.xReverse!==void 0)return or(t)&&e==="descending"?Ce(n.xReverse)?{signal:`!${n.xReverse.signal}`}:!n.xReverse:n.xReverse;if(or(t)&&e==="descending")return!0}function TRe(t,e,i,n,s,a,c){if(!!i&&i!=="unaggregated"&&or(s)){if(ue(i)){const f=i[0],u=i[i.length-1];if(f<=0&&u>=0)return!0}return!1}if(t==="size"&&e.type==="quantitative"&&!i_(s))return!0;if(!(Te(e)&&e.bin)&&It([...qo,...SFe],t)){const{orient:f,type:u}=n;return It(["bar","area","line","trail"],u)&&(f==="horizontal"&&t==="y"||f==="vertical"&&t==="x")?!1:It(["bar","area"],u)&&!c?!0:a==null?void 0:a.zero}return!1}function vRe(t,e,i,n,s=!1){const a=ERe(e,i,n,s),{type:c}=t;return Kl(e)?c!==void 0?kMe(e,c)?Te(i)&&!IMe(c,i.type)?(be(M2e(c,a)),a):c:(be(F2e(e,c,a)),a):a:null}function ERe(t,e,i,n){var s;switch(e.type){case"nominal":case"ordinal":{if(ap(t)||ZB(t)==="discrete")return t==="shape"&&e.type==="ordinal"&&be(eI(t,"ordinal")),"ordinal";if(cn(t)||O_(t)){if(It(["rect","bar","image","rule"],i.type)||n)return"band"}else if(i.type==="arc"&&t in wR)return"band";const a=i[Cs(t)];return du(a)||s_(e)&&((s=e.axis)!=null&&s.tickBand)?"band":"point"}case"temporal":return ap(t)?"time":ZB(t)==="discrete"?(be(eI(t,"temporal")),"ordinal"):Te(e)&&e.timeUnit&&wn(e.timeUnit).utc?"utc":"time";case"quantitative":return ap(t)?Te(e)&&hi(e.bin)?"bin-ordinal":"linear":ZB(t)==="discrete"?(be(eI(t,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(RK(e.type))}function SRe(t,{ignoreRange:e}={}){dZ(t),eZ(t);for(const i of BMe)oZ(t,i);e||lZ(t)}function dZ(t){Ci(t)?t.component.scales=xRe(t):t.component.scales=IRe(t)}function xRe(t){const{encoding:e,mark:i,markDef:n}=t,s={};for(const a of jS){const c=Vi(e[a]);if(c&&i===sJ&&a===Ns&&c.type===N_)continue;let d=c&&c.scale;if(O_(a)){const f=wK(a);if(!HF(e,f)){d&&be(_2e(a));continue}}if(c&&d!==null&&d!==!1){d??(d={});const f=HF(e,a),u=vRe(d,a,c,n,f);s[a]=new iZ(t.scaleName(`${a}`,!0),{value:u,explicit:d.type===u})}}return s}const BRe=sQ((t,e)=>Q$(t)-Q$(e));function IRe(t){var e;const i=t.component.scales={},n={},s=t.component.resolve;for(const a of t.children){dZ(a);for(const c of me(a.component.scales))if((e=s.scale)[c]??(e[c]=zQ(c,t)),s.scale[c]==="shared"){const d=n[c],f=a.component.scales[c].getWithExplicit("type");d?yMe(d.value,f.value)?n[c]=rd(d,f,"type","scale",BRe):(s.scale[c]="independent",delete n[c]):n[c]=f}}for(const a of me(n)){const c=t.scaleName(a,!0),d=n[a];i[a]=new iZ(c,d);for(const f of t.children){const u=f.component.scales[a];u&&(f.renameScale(u.get("name"),c),u.merged=!0)}}return i}class lI{constructor(){this.nameMap={}}rename(e,i){this.nameMap[e]=i}has(e){return this.nameMap[e]!==void 0}get(e){for(;this.nameMap[e]&&e!==this.nameMap[e];)e=this.nameMap[e];return e}}function Ci(t){return(t==null?void 0:t.type)==="unit"}function ca(t){return(t==null?void 0:t.type)==="facet"}function v3(t){return(t==null?void 0:t.type)==="concat"}function P_(t){return(t==null?void 0:t.type)==="layer"}class E3{constructor(e,i,n,s,a,c,d){this.type=i,this.parent=n,this.config=a,this.correctDataNames=f=>{var u,o,g;return(u=f.from)!=null&&u.data&&(f.from.data=this.lookupDataSource(f.from.data)),(g=(o=f.from)==null?void 0:o.facet)!=null&&g.data&&(f.from.facet.data=this.lookupDataSource(f.from.facet.data)),f},this.parent=n,this.config=a,this.view=hs(d),this.name=e.name??s,this.title=mc(e.title)?{text:e.title}:e.title?hs(e.title):void 0,this.scaleNameMap=n?n.scaleNameMap:new lI,this.projectionNameMap=n?n.projectionNameMap:new lI,this.signalNameMap=n?n.signalNameMap:new lI,this.data=e.data,this.description=e.description,this.transforms=COe(e.transform??[]),this.layout=i==="layer"||i==="unit"?{}:qAe(e,i,a),this.component={data:{sources:n?n.component.data.sources:[],outputNodes:n?n.component.data.outputNodes:{},outputNodeRefCounts:n?n.component.data.outputNodeRefCounts:{},isFaceted:JS(e)||(n==null?void 0:n.component.data.isFaceted)&&e.data===void 0},layoutSize:new Ql,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...c?Qe(c):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){SRe(this)}parseProjection(){JQ(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){WQ(this)}assembleEncodeFromView(e){const{style:i,...n}=e,s={};for(const a of me(n)){const c=n[a];c!==void 0&&(s[a]=mi(c))}return s}assembleGroupEncodeEntry(e){let i={};return this.view&&(i=this.assembleEncodeFromView(this.view)),!e&&(this.description&&(i.description=mi(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...i??{}}:ti(i)?void 0:i}assembleLayout(){if(!this.layout)return;const{spacing:e,...i}=this.layout,{component:n,config:s}=this,a=YNe(n.layoutHeaders,s);return{padding:e,...this.assembleDefaultLayout(),...i,...a?{titleBand:a}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:e}=this.component;let i=[];for(const n of br)e[n].title&&i.push(jNe(this,n));for(const n of h3)i=i.concat(qNe(this,n));return i}assembleAxes(){return FNe(this.component.axes,this.config)}assembleLegends(){return YQ(this)}assembleProjections(){return gCe(this)}assembleTitle(){const{encoding:e,...i}=this.title??{},n={...BK(this.config.title).nonMarkTitleProperties,...i,...e?{encode:{update:e}}:{}};if(n.text)return It(["unit","layer"],this.type)?It(["middle",void 0],n.anchor)&&(n.frame??(n.frame="group")):n.anchor??(n.anchor="start"),ti(n)?void 0:n}assembleGroup(e=[]){const i={};e=e.concat(this.assembleSignals()),e.length>0&&(i.signals=e);const n=this.assembleLayout();n&&(i.layout=n),i.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const s=!this.parent||ca(this.parent)?tZ(this):[];s.length>0&&(i.scales=s);const a=this.assembleAxes();a.length>0&&(i.axes=a);const c=this.assembleLegends();return c.length>0&&(i.legends=c),i}getName(e){return bi((this.name?`${this.name}_`:"")+e)}getDataName(e){return this.getName(fi[e].toLowerCase())}requestDataName(e){const i=this.getDataName(e),n=this.component.data.outputNodeRefCounts;return n[i]=(n[i]||0)+1,i}getSizeSignalRef(e){if(ca(this.parent)){const i=$Q(e),n=zS(i),s=this.component.scales[n];if(s&&!s.merged){const a=s.get("type"),c=s.get("range");if(dn(a)&&Ad(c)){const d=s.get("name"),f=fx(this,n),u=T3(f);if(u){const o=xe({aggregate:"distinct",field:u},{expr:"datum"});return{signal:PQ(d,s,o)}}else return be(vR(n)),null}}}return{signal:this.signalNameMap.get(this.getName(e))}}lookupDataSource(e){const i=this.component.data.outputNodes[e];return i?i.getSource():e}getSignalName(e){return this.signalNameMap.get(e)}renameSignal(e,i){this.signalNameMap.rename(e,i)}renameScale(e,i){this.scaleNameMap.rename(e,i)}renameProjection(e,i){this.projectionNameMap.rename(e,i)}scaleName(e,i){if(i)return this.getName(e);if(yK(e)&&Kl(e)&&this.component.scales[e]||this.scaleNameMap.has(this.getName(e)))return this.scaleNameMap.get(this.getName(e))}projectionName(e){if(e)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(e){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const i=this.component.scales[e];return i&&!i.merged?i:this.parent?this.parent.getScaleComponent(e):void 0}getSelectionComponent(e,i){let n=this.component.selection[e];if(!n&&this.parent&&(n=this.parent.getSelectionComponent(e,i)),!n)throw new Error(HFe(i));return n}hasAxisOrientSignalRef(){var e,i;return((e=this.component.axes.x)==null?void 0:e.some(n=>n.hasOrientSignalRef()))||((i=this.component.axes.y)==null?void 0:i.some(n=>n.hasOrientSignalRef()))}}class fZ extends E3{vgField(e,i={}){const n=this.fieldDef(e);if(n)return xe(n,i)}reduceFieldDef(e,i){return mAe(this.getMapping(),(n,s,a)=>{const c=Fo(s);return c?e(n,c,a):n},i)}forEachFieldDef(e,i){XR(this.getMapping(),(n,s)=>{const a=Fo(n);a&&e(a,s)},i)}}class ux extends si{clone(){return new ux(null,Qe(this.transform))}constructor(e,i){super(e),this.transform=i,this.transform=Qe(i);const n=this.transform.as??[void 0,void 0];this.transform.as=[n[0]??"value",n[1]??"density"],i.groupby&&i.minsteps==null&&i.maxsteps==null&&i.steps==null&&(this.transform.steps=200)}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Ot(this.transform)}`}assemble(){const{density:e,...i}=this.transform;return{type:"kde",field:e,...i}}}class cm extends si{clone(){return new cm(null,{...this.filter})}constructor(e,i){super(e),this.filter=i}static make(e,i){const{config:n,mark:s,markDef:a}=i;if(Kt("invalid",a,n)!=="filter")return null;const d=i.reduceFieldDef((f,u,o)=>{const g=Kl(o)&&i.getScaleComponent(o);if(g){const w=g.get("type");or(w)&&u.aggregate!=="count"&&!Od(s)&&(f[u.field]=u)}return f},{});return me(d).length?new cm(e,d):null}dependentFields(){return new Set(me(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Ot(this.filter)}`}assemble(){const e=me(this.filter).reduce((i,n)=>{const s=this.filter[n],a=xe(s,{expr:"datum"});return s!==null&&(s.type==="temporal"?i.push(`(isDate(${a}) || (isValid(${a}) && isFinite(+${a})))`):s.type==="quantitative"&&(i.push(`isValid(${a})`),i.push(`isFinite(+${a})`))),i},[]);return e.length>0?{type:"filter",expr:e.join(" && ")}:null}}class hx extends si{clone(){return new hx(this.parent,Qe(this.transform))}constructor(e,i){super(e),this.transform=i,this.transform=Qe(i);const{flatten:n,as:s=[]}=this.transform;this.transform.as=n.map((a,c)=>s[c]??a)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Ot(this.transform)}`}assemble(){const{flatten:e,as:i}=this.transform;return{type:"flatten",fields:e,as:i}}}class px extends si{clone(){return new px(null,Qe(this.transform))}constructor(e,i){super(e),this.transform=i,this.transform=Qe(i);const n=this.transform.as??[void 0,void 0];this.transform.as=[n[0]??"key",n[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Ot(this.transform)}`}assemble(){const{fold:e,as:i}=this.transform;return{type:"fold",fields:e,as:i}}}class cp extends si{clone(){return new cp(null,Qe(this.fields),this.geojson,this.signal)}static parseAll(e,i){if(i.component.projection&&!i.component.projection.isFit)return e;let n=0;for(const s of[[Ba,xa],[Cr,Ia]]){const a=s.map(c=>{const d=Vi(i.encoding[c]);return Te(d)?d.field:Go(d)?{expr:`${d.datum}`}:_a(d)?{expr:`${d.value}`}:void 0});(a[0]||a[1])&&(e=new cp(e,a,null,i.getName(`geojson_${n++}`)))}if(i.channelHasField(Ns)){const s=i.typedFieldDef(Ns);s.type===N_&&(e=new cp(e,null,s.field,i.getName(`geojson_${n++}`)))}return e}constructor(e,i,n,s){super(e),this.fields=i,this.geojson=n,this.signal=s}dependentFields(){const e=(this.fields??[]).filter(Ie);return new Set([...this.geojson?[this.geojson]:[],...e])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Ot(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class dm extends si{clone(){return new dm(null,this.projection,Qe(this.fields),Qe(this.as))}constructor(e,i,n,s){super(e),this.projection=i,this.fields=n,this.as=s}static parseAll(e,i){if(!i.projectionName())return e;for(const n of[[Ba,xa],[Cr,Ia]]){const s=n.map(c=>{const d=Vi(i.encoding[c]);return Te(d)?d.field:Go(d)?{expr:`${d.datum}`}:_a(d)?{expr:`${d.value}`}:void 0}),a=n[0]===Cr?"2":"";(s[0]||s[1])&&(e=new dm(e,i.projectionName(),s,[i.getName(`x${a}`),i.getName(`y${a}`)]))}return e}dependentFields(){return new Set(this.fields.filter(Ie))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Ot(this.fields)} ${Ot(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class $f extends si{clone(){return new $f(null,Qe(this.transform))}constructor(e,i){super(e),this.transform=i}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(e){const{start:i=0,stop:n,step:s}=e;return{signal:`sequence(${[i,n,...s?[s]:[]].join(",")})`}}static makeFromTransform(e,i){return new $f(e,i)}static makeFromEncoding(e,i){const n=i.encoding,s=n.x,a=n.y;if(Te(s)&&Te(a)){const c=s.impute?s:a.impute?a:void 0;if(c===void 0)return;const d=s.impute?a:a.impute?s:void 0,{method:f,value:u,frame:o,keyvals:g}=c.impute,w=MJ(i.mark,n);return new $f(e,{impute:c.field,key:d.field,...f?{method:f}:{},...u!==void 0?{value:u}:{},...o?{frame:o}:{},...g!==void 0?{keyvals:g}:{},...w.length?{groupby:w}:{}})}return null}hash(){return`Impute ${Ot(this.transform)}`}assemble(){const{impute:e,key:i,keyvals:n,method:s,groupby:a,value:c,frame:d=[null,null]}=this.transform,f={type:"impute",field:e,key:i,...n?{keyvals:yOe(n)?this.processSequence(n):n}:{},method:"value",...a?{groupby:a}:{},value:!s||s==="value"?c:null};if(s&&s!=="value"){const u={type:"window",as:[`imputed_${e}_value`],ops:[s],fields:[e],frame:d,ignorePeers:!1,...a?{groupby:a}:{}},o={type:"formula",expr:`datum.${e} === null ? datum.imputed_${e}_value : datum.${e}`,as:e};return[f,u,o]}else return[f]}}class _x extends si{clone(){return new _x(null,Qe(this.transform))}constructor(e,i){super(e),this.transform=i,this.transform=Qe(i);const n=this.transform.as??[void 0,void 0];this.transform.as=[n[0]??i.on,n[1]??i.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Ot(this.transform)}`}assemble(){const{loess:e,on:i,...n}=this.transform;return{type:"loess",x:i,y:e,...n}}}class fm extends si{clone(){return new fm(null,Qe(this.transform),this.secondary)}constructor(e,i,n){super(e),this.transform=i,this.secondary=n}static make(e,i,n,s){const a=i.component.data.sources,{from:c}=n;let d=null;if(gOe(c)){let f=pZ(c.data,a);f||(f=new pu(c.data),a.push(f));const u=i.getName(`lookup_${s}`);d=new es(f,u,fi.Lookup,i.component.data.outputNodeRefCounts),i.component.data.outputNodes[u]=d}else if(mOe(c)){const f=c.param;n={as:f,...n};let u;try{u=i.getSelectionComponent(bi(f),f)}catch{throw new Error(KFe(f))}if(d=u.materialized,!d)throw new Error(JFe(f))}return new fm(e,n,d.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?ke(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Ot({transform:this.transform,secondary:this.secondary})}`}assemble(){let e;if(this.transform.from.fields)e={values:this.transform.from.fields,...this.transform.as?{as:ke(this.transform.as)}:{}};else{let i=this.transform.as;Ie(i)||(be(r2e),i="_lookup"),e={as:[i]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...e,...this.transform.default?{default:this.transform.default}:{}}}}class yx extends si{clone(){return new yx(null,Qe(this.transform))}constructor(e,i){super(e),this.transform=i,this.transform=Qe(i);const n=this.transform.as??[void 0,void 0];this.transform.as=[n[0]??"prob",n[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Ot(this.transform)}`}assemble(){const{quantile:e,...i}=this.transform;return{type:"quantile",field:e,...i}}}class gx extends si{clone(){return new gx(null,Qe(this.transform))}constructor(e,i){super(e),this.transform=i,this.transform=Qe(i);const n=this.transform.as??[void 0,void 0];this.transform.as=[n[0]??i.on,n[1]??i.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Ot(this.transform)}`}assemble(){const{regression:e,on:i,...n}=this.transform;return{type:"regression",x:i,y:e,...n}}}class mx extends si{clone(){return new mx(null,Qe(this.transform))}constructor(e,i){super(e),this.transform=i}addDimensions(e){this.transform.groupby=ro((this.transform.groupby??[]).concat(e),i=>i)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Ot(this.transform)}`}assemble(){const{pivot:e,value:i,groupby:n,limit:s,op:a}=this.transform;return{type:"pivot",field:e,value:i,...s!==void 0?{limit:s}:{},...a!==void 0?{op:a}:{},...n!==void 0?{groupby:n}:{}}}}class wx extends si{clone(){return new wx(null,Qe(this.transform))}constructor(e,i){super(e),this.transform=i}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Ot(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function uZ(t){let e=0;function i(n,s){if(n instanceof pu&&!n.isGenerator&&!a_(n.data)&&(t.push(s),s={name:null,source:s.name,transform:[]}),n instanceof Fn&&(n.parent instanceof pu&&!s.source?(s.format={...s.format??{},parse:n.assembleFormatParse()},s.transform.push(...n.assembleTransforms(!0))):s.transform.push(...n.assembleTransforms())),n instanceof L_){s.name||(s.name=`data_${e++}`),!s.source||s.transform.length>0?(t.push(s),n.data=s.name):n.data=s.source,t.push(...n.assemble());return}switch((n instanceof Sw||n instanceof xw||n instanceof cm||n instanceof R_||n instanceof o_||n instanceof dm||n instanceof la||n instanceof fm||n instanceof D_||n instanceof qu||n instanceof px||n instanceof hx||n instanceof ux||n instanceof _x||n instanceof yx||n instanceof gx||n instanceof ld||n instanceof wx||n instanceof mx)&&s.transform.push(n.assemble()),(n instanceof ho||n instanceof uo||n instanceof $f||n instanceof kl||n instanceof cp)&&s.transform.push(...n.assemble()),n instanceof es&&(s.source&&s.transform.length===0?n.setSource(s.source):n.parent instanceof es?n.setSource(s.name):(s.name||(s.name=`data_${e++}`),n.setSource(s.name),n.numChildren()===1&&(t.push(s),s={name:null,source:s.name,transform:[]}))),n.numChildren()){case 0:n instanceof es&&(!s.source||s.transform.length>0)&&t.push(s);break;case 1:i(n.children[0],s);break;default:{s.name||(s.name=`data_${e++}`);let a=s.name;!s.source||s.transform.length>0?t.push(s):a=s.source;for(const c of n.children)i(c,{name:null,source:a,transform:[]});break}}}return i}function kRe(t){const e=[],i=uZ(e);for(const n of t.children)i(n,{source:t.name,name:null,transform:[]});return e}function FRe(t,e){const i=[],n=uZ(i);let s=0;for(const c of t.sources){c.hasName()||(c.dataName=`source_${s++}`);const d=c.assemble();n(c,d)}for(const c of i)c.transform.length===0&&delete c.transform;let a=0;for(const[c,d]of i.entries())(d.transform??[]).length===0&&!d.source&&i.splice(a++,0,i.splice(c,1)[0]);for(const c of i)for(const d of c.transform??[])d.type==="lookup"&&(d.from=t.outputNodes[d.from].getSource());for(const c of i)c.name in e&&(c.values=e[c.name]);return i}function MRe(t){return t==="top"||t==="left"||Ce(t)?"header":"footer"}function ARe(t){for(const e of br)ORe(t,e);qU(t,"x"),qU(t,"y")}function ORe(t,e){var c;const{facet:i,config:n,child:s,component:a}=t;if(t.channelHasField(e)){const d=i[e],f=c_("title",null,n,e);let u=op(d,n,{allowDisabling:!0,includeDefault:f===void 0||!!f});s.component.layoutHeaders[e].title&&(u=ue(u)?u.join(", "):u,u+=` / ${s.component.layoutHeaders[e].title}`,s.component.layoutHeaders[e].title=null);const o=c_("labelOrient",d.header,n,e),g=d.header!==null?Pi((c=d.header)==null?void 0:c.labels,n.header.labels,!0):!1,w=It(["bottom","right"],o)?"footer":"header";a.layoutHeaders[e]={title:d.header!==null?u:null,facetFieldDef:d,[w]:e==="facet"?[]:[hZ(t,e,g)]}}}function hZ(t,e,i){const n=e==="row"?"height":"width";return{labels:i,sizeSignal:t.child.component.layoutSize.get(n)?t.child.getSizeSignalRef(n):void 0,axes:[]}}function qU(t,e){const{child:i}=t;if(i.component.axes[e]){const{layoutHeaders:n,resolve:s}=t.component;if(s.axis[e]=y3(s,e),s.axis[e]==="shared"){const a=e==="x"?"column":"row",c=n[a];for(const d of i.component.axes[e]){const f=MRe(d.get("orient"));c[f]??(c[f]=[hZ(t,a,!1)]);const u=Yy(d,"main",t.config,{header:!0});u&&c[f][0].axes.push(u),d.mainExtracted=!0}}}}function NRe(t){S3(t),Kv(t,"width"),Kv(t,"height")}function CRe(t){S3(t);const e=t.layout.columns===1?"width":"childWidth",i=t.layout.columns===void 0?"height":"childHeight";Kv(t,e),Kv(t,i)}function S3(t){for(const e of t.children)e.parseLayoutSize()}function Kv(t,e){const i=$Q(e),n=zS(i),s=t.component.resolve,a=t.component.layoutSize;let c;for(const d of t.children){const f=d.component.layoutSize.getWithExplicit(i),u=s.scale[n]??zQ(n,t);if(u==="independent"&&f.value==="step"){c=void 0;break}if(c){if(u==="independent"&&c.value!==f.value){c=void 0;break}c=rd(c,f,i,"")}else c=f}if(c){for(const d of t.children)t.renameSignal(d.getName(i),t.getName(e)),d.component.layoutSize.set(i,"merged",!1);a.setWithExplicit(e,c)}else a.setWithExplicit(e,{explicit:!1,value:void 0})}function RRe(t){const{size:e,component:i}=t;for(const n of qo){const s=Cs(n);if(e[s]){const a=e[s];i.layoutSize.set(s,Mo(a)?"step":a,!0)}else{const a=LRe(t,s);i.layoutSize.set(s,a,!1)}}}function LRe(t,e){const i=e==="width"?"x":"y",n=t.config,s=t.getScaleComponent(i);if(s){const a=s.get("type"),c=s.get("range");if(dn(a)){const d=Wv(n.view,e);return Ad(c)||Mo(d)?"step":d}else return XF(n.view,e)}else{if(t.hasProjection||t.mark==="arc")return XF(n.view,e);{const a=Wv(n.view,e);return Mo(a)?a.step:a}}}function c2(t,e,i){return xe(e,{suffix:`by_${xe(t)}`,...i??{}})}class hg extends fZ{constructor(e,i,n,s){super(e,"facet",i,n,s,e.resolve),this.child=F3(e.spec,this,this.getName("child"),void 0,s),this.children=[this.child],this.facet=this.initFacet(e.facet)}initFacet(e){if(!ww(e))return{facet:this.initFacetFieldDef(e,"facet")};const i=me(e),n={};for(const s of i){if(![Sl,xl].includes(s)){be(GS(s,"facet"));break}const a=e[s];if(a.field===void 0){be(qF(a,s));break}n[s]=this.initFacetFieldDef(a,s)}return n}initFacetFieldDef(e,i){const n=HR(e,i);return n.header?n.header=hs(n.header):n.header===null&&(n.header=null),n}channelHasField(e){return!!this.facet[e]}fieldDef(e){return this.facet[e]}parseData(){this.component.data=bx(this),this.child.parseData()}parseLayoutSize(){S3(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),ARe(this)}assembleSelectionTopLevelSignals(e){return this.child.assembleSelectionTopLevelSignals(e)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(e){return this.child.assembleSelectionData(e)}getHeaderLayoutMixins(){const e={};for(const i of br)for(const n of p3){const s=this.component.layoutHeaders[i],a=s[n],{facetFieldDef:c}=s;if(c){const d=c_("titleOrient",c.header,this.config,i);if(["right","bottom"].includes(d)){const f=cx(i,d);e.titleAnchor??(e.titleAnchor={}),e.titleAnchor[f]="end"}}if(a!=null&&a[0]){const d=i==="row"?"height":"width",f=n==="header"?"headerBand":"footerBand";i!=="facet"&&!this.child.component.layoutSize.get(d)&&(e[f]??(e[f]={}),e[f][i]=.5),s.title&&(e.offset??(e.offset={}),e.offset[i==="row"?"rowTitle":"columnTitle"]=10)}}return e}assembleDefaultLayout(){const{column:e,row:i}=this.facet,n=e?this.columnDistinctSignal():i?1:void 0;let s="all";return(!i&&this.component.resolve.scale.x==="independent"||!e&&this.component.resolve.scale.y==="independent")&&(s="none"),{...this.getHeaderLayoutMixins(),...n?{columns:n}:{},bounds:"full",align:s}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof hg))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(e){return this.parent&&this.parent instanceof hg?{...this.channelHasField("column")?{encode:{update:{columns:{field:xe(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(e)}:super.assembleGroup(e)}getCardinalityAggregateForChild(){const e=[],i=[],n=[];if(this.child instanceof hg){if(this.child.channelHasField("column")){const s=xe(this.child.facet.column);e.push(s),i.push("distinct"),n.push(`distinct_${s}`)}}else for(const s of qo){const a=this.child.component.scales[s];if(a&&!a.merged){const c=a.get("type"),d=a.get("range");if(dn(c)&&Ad(d)){const f=fx(this.child,s),u=T3(f);u?(e.push(u),i.push("distinct"),n.push(`distinct_${u}`)):be(vR(s))}}}return{fields:e,ops:i,as:n}}assembleFacet(){const{name:e,data:i}=this.component.data.facetRoot,{row:n,column:s}=this.facet,{fields:a,ops:c,as:d}=this.getCardinalityAggregateForChild(),f=[];for(const o of br){const g=this.facet[o];if(g){f.push(xe(g));const{bin:w,sort:m}=g;if(hi(w)&&f.push(xe(g,{binSuffix:"end"})),fo(m)){const{field:l,op:T=KS}=m,b=c2(g,m);n&&s?(a.push(b),c.push("max"),d.push(b)):(a.push(l),c.push(T),d.push(b))}else if(ue(m)){const l=l_(g,o);a.push(l),c.push("max"),d.push(l)}}}const u=!!n&&!!s;return{name:e,data:i,groupby:f,...u||a.length>0?{aggregate:{...u?{cross:u}:{},...a.length?{fields:a,ops:c,as:d}:{}}}:{}}}facetSortFields(e){const{facet:i}=this,n=i[e];return n?fo(n.sort)?[c2(n,n.sort,{expr:"datum"})]:ue(n.sort)?[l_(n,e,{expr:"datum"})]:[xe(n,{expr:"datum"})]:[]}facetSortOrder(e){const{facet:i}=this,n=i[e];if(n){const{sort:s}=n;return[(fo(s)?s.order:!ue(s)&&s)||"ascending"]}return[]}assembleLabelTitle(){var s;const{facet:e,config:i}=this;if(e.facet)return n2(e.facet,"facet",i);const n={row:["top","bottom"],column:["left","right"]};for(const a of h3)if(e[a]){const c=c_("labelOrient",(s=e[a])==null?void 0:s.header,i,a);if(n[a].includes(c))return n2(e[a],a,i)}}assembleMarks(){const{child:e}=this,i=this.component.data.facetRoot,n=kRe(i),s=e.assembleGroupEncodeEntry(!1),a=this.assembleLabelTitle()||e.assembleTitle(),c=e.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...a?{title:a}:{},...c?{style:c}:{},from:{facet:this.assembleFacet()},sort:{field:br.map(f=>this.facetSortFields(f)).flat(),order:br.map(f=>this.facetSortOrder(f)).flat()},...n.length>0?{data:n}:{},...s?{encode:{update:s}}:{},...e.assembleGroup(HOe(this,[]))}]}getMapping(){return this.facet}}function DRe(t,e){const{row:i,column:n}=e;if(i&&n){let s=null;for(const a of[i,n])if(fo(a.sort)){const{field:c,op:d=KS}=a.sort;t=s=new qu(t,{joinaggregate:[{op:d,field:c,as:c2(a,a.sort,{forAs:!0})}],groupby:[xe(a)]})}return s}return null}function pZ(t,e){var i,n,s,a;for(const c of e){const d=c.data;if(t.name&&c.hasName()&&t.name!==c.dataName)continue;const f=(i=t.format)==null?void 0:i.mesh,u=(n=d.format)==null?void 0:n.feature;if(f&&u)continue;const o=(s=t.format)==null?void 0:s.feature;if((o||u)&&o!==u)continue;const g=(a=d.format)==null?void 0:a.mesh;if(!((f||g)&&f!==g)){if(om(t)&&om(d)){if(so(t.values,d.values))return c}else if(a_(t)&&a_(d)){if(t.url===d.url)return c}else if(rQ(t)&&t.name===c.dataName)return c}}return null}function PRe(t,e){if(t.data||!t.parent){if(t.data===null){const n=new pu({values:[]});return e.push(n),n}const i=pZ(t.data,e);if(i)return Rc(t.data)||(i.data.format=sK({},t.data.format,i.data.format)),!i.hasName()&&t.data.name&&(i.dataName=t.data.name),i;{const n=new pu(t.data);return e.push(n),n}}else return t.parent.component.data.facetRoot?t.parent.component.data.facetRoot:t.parent.component.data.main}function $Re(t,e,i){let n=0;for(const s of e.transforms){let a,c;if(kOe(s))c=t=new o_(t,s),a="derived";else if(a3(s)){const d=MCe(s);c=t=Fn.makeWithAncestors(t,{},d,i)??t,t=new R_(t,e,s.filter)}else if(eQ(s))c=t=ho.makeFromTransform(t,s,e),a="number";else if(MOe(s))a="date",i.getWithExplicit(s.field).value===void 0&&(t=new Fn(t,{[s.field]:a}),i.set(s.field,a,!1)),c=t=uo.makeFromTransform(t,s);else if(AOe(s))c=t=la.makeFromTransform(t,s),a="number",u3(e)&&(t=new ld(t));else if(ZJ(s))c=t=fm.make(t,e,s,n++),a="derived";else if(xOe(s))c=t=new D_(t,s),a="number";else if(BOe(s))c=t=new qu(t,s),a="number";else if(OOe(s))c=t=kl.makeFromTransform(t,s),a="derived";else if(NOe(s))c=t=new px(t,s),a="derived";else if(IOe(s))c=t=new hx(t,s),a="derived";else if(wOe(s))c=t=new mx(t,s),a="derived";else if(SOe(s))t=new wx(t,s);else if(FOe(s))c=t=$f.makeFromTransform(t,s),a="derived";else if(bOe(s))c=t=new ux(t,s),a="derived";else if(TOe(s))c=t=new yx(t,s),a="derived";else if(vOe(s))c=t=new gx(t,s),a="derived";else if(EOe(s))c=t=new _x(t,s),a="derived";else{be(s2e(s));continue}if(c&&a!==void 0)for(const d of c.producedFields()??[])i.set(d,a,!1)}return t}function bx(t){var T;let e=PRe(t,t.component.data.sources);const{outputNodes:i,outputNodeRefCounts:n}=t.component.data,s=t.data,c=!(s&&(Rc(s)||a_(s)||om(s)))&&t.parent?t.parent.component.data.ancestorParse.clone():new VOe;Rc(s)?(aQ(s)?e=new xw(e,s.sequence):o3(s)&&(e=new Sw(e,s.graticule)),c.parseNothing=!0):((T=s==null?void 0:s.format)==null?void 0:T.parse)===null&&(c.parseNothing=!0),e=Fn.makeExplicit(e,t,c)??e,e=new ld(e);const d=t.parent&&P_(t.parent);(Ci(t)||ca(t))&&d&&(e=ho.makeFromEncoding(e,t)??e),t.transforms.length>0&&(e=$Re(e,t,c));const f=OCe(t),u=ACe(t);e=Fn.makeWithAncestors(e,{},{...f,...u},c)??e,Ci(t)&&(e=cp.parseAll(e,t),e=dm.parseAll(e,t)),(Ci(t)||ca(t))&&(d||(e=ho.makeFromEncoding(e,t)??e),e=uo.makeFromEncoding(e,t)??e,e=o_.parseAllForSortIndex(e,t));const o=t.getDataName(fi.Raw),g=new es(e,o,fi.Raw,n);if(i[o]=g,e=g,Ci(t)){const b=la.makeFromEncoding(e,t);b&&(e=b,u3(t)&&(e=new ld(e))),e=$f.makeFromEncoding(e,t)??e,e=kl.makeFromEncoding(e,t)??e}Ci(t)&&(e=cm.make(e,t)??e);const w=t.getDataName(fi.Main),m=new es(e,w,fi.Main,n);i[w]=m,e=m,Ci(t)&&INe(t,m);let l=null;if(ca(t)){const b=t.getName("facet");e=DRe(e,t.facet)??e,l=new L_(e,t,b,m.getSource()),i[b]=l}return{...t.component.data,outputNodes:i,outputNodeRefCounts:n,raw:g,main:m,facetRoot:l,ancestorParse:c}}class URe extends E3{constructor(e,i,n,s){var a,c,d,f;super(e,"concat",i,n,s,e.resolve),(((c=(a=e.resolve)==null?void 0:a.axis)==null?void 0:c.x)==="shared"||((f=(d=e.resolve)==null?void 0:d.axis)==null?void 0:f.y)==="shared")&&be(t2e),this.children=this.getChildren(e).map((u,o)=>F3(u,this,this.getName(`concat_${o}`),void 0,s))}parseData(){this.component.data=bx(this);for(const e of this.children)e.parseData()}parseSelections(){this.component.selection={};for(const e of this.children){e.parseSelections();for(const i of me(e.component.selection))this.component.selection[i]=e.component.selection[i]}}parseMarkGroup(){for(const e of this.children)e.parseMarkGroup()}parseAxesAndHeaders(){for(const e of this.children)e.parseAxesAndHeaders()}getChildren(e){return sx(e)?e.vconcat:s3(e)?e.hconcat:e.concat}parseLayoutSize(){CRe(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(e){return this.children.reduce((i,n)=>n.assembleSelectionTopLevelSignals(i),e)}assembleSignals(){return this.children.forEach(e=>e.assembleSignals()),[]}assembleLayoutSignals(){const e=_3(this);for(const i of this.children)e.push(...i.assembleLayoutSignals());return e}assembleSelectionData(e){return this.children.reduce((i,n)=>n.assembleSelectionData(i),e)}assembleMarks(){return this.children.map(e=>{const i=e.assembleTitle(),n=e.assembleGroupStyle(),s=e.assembleGroupEncodeEntry(!1);return{type:"group",name:e.getName("group"),...i?{title:i}:{},...n?{style:n}:{},...s?{encode:{update:s}}:{},...e.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const e=this.layout.columns;return{...e!=null?{columns:e}:{},bounds:"full",align:"each"}}}function zRe(t){return t===!1||t===null}const jRe={disable:1,gridScale:1,scale:1,...BJ,labelExpr:1,encode:1},_Z=me(jRe);class x3 extends Ql{constructor(e={},i={},n=!1){super(),this.explicit=e,this.implicit=i,this.mainExtracted=n}clone(){return new x3(Qe(this.explicit),Qe(this.implicit),this.mainExtracted)}hasAxisPart(e){return e==="axis"?!0:e==="grid"||e==="title"?!!this.get(e):!zRe(this.get(e))}hasOrientSignalRef(){return Ce(this.explicit.orient)}}function qRe(t,e,i){const{encoding:n,config:s}=t,a=Vi(n[e])??Vi(n[jo(e)]),c=t.axis(e)||{},{format:d,formatType:f}=c;if(fu(f))return{text:na({fieldOrDatumDef:a,field:"datum.value",format:d,formatType:f,config:s}),...i};if(d===void 0&&f===void 0&&s.customFormatTypes){if(n_(a)==="quantitative"){if(s_(a)&&a.stack==="normalize"&&s.normalizedNumberFormatType)return{text:na({fieldOrDatumDef:a,field:"datum.value",format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,config:s}),...i};if(s.numberFormatType)return{text:na({fieldOrDatumDef:a,field:"datum.value",format:s.numberFormat,formatType:s.numberFormatType,config:s}),...i}}if(n_(a)==="temporal"&&s.timeFormatType&&Te(a)&&!a.timeUnit)return{text:na({fieldOrDatumDef:a,field:"datum.value",format:s.timeFormat,formatType:s.timeFormatType,config:s}),...i}}return i}function GRe(t){return qo.reduce((e,i)=>(t.component.scales[i]&&(e[i]=[JRe(i,t)]),e),{})}const VRe={bottom:"top",top:"bottom",left:"right",right:"left"};function WRe(t){const{axes:e,resolve:i}=t.component,n={top:0,bottom:0,right:0,left:0};for(const s of t.children){s.parseAxesAndHeaders();for(const a of me(s.component.axes))i.axis[a]=y3(t.component.resolve,a),i.axis[a]==="shared"&&(e[a]=HRe(e[a],s.component.axes[a]),e[a]||(i.axis[a]="independent",delete e[a]))}for(const s of qo){for(const a of t.children)if(a.component.axes[s]){if(i.axis[s]==="independent"){e[s]=(e[s]??[]).concat(a.component.axes[s]);for(const c of a.component.axes[s]){const{value:d,explicit:f}=c.getWithExplicit("orient");if(!Ce(d)){if(n[d]>0&&!f){const u=VRe[d];n[d]>n[u]&&c.set("orient",u,!1)}n[d]++}}}delete a.component.axes[s]}if(i.axis[s]==="independent"&&e[s]&&e[s].length>1)for(const a of e[s])a.get("grid")&&!a.explicit.grid&&(a.implicit.grid=!1)}}function HRe(t,e){if(t){if(t.length!==e.length)return;const i=t.length;for(let n=0;n<i;n++){const s=t[n],a=e[n];if(!!s!=!!a)return;if(s&&a){const c=s.getWithExplicit("orient"),d=a.getWithExplicit("orient");if(c.explicit&&d.explicit&&c.value!==d.value)return;t[n]=YRe(s,a)}}}else return e.map(i=>i.clone());return t}function YRe(t,e){for(const i of _Z){const n=rd(t.getWithExplicit(i),e.getWithExplicit(i),i,"axis",(s,a)=>{switch(i){case"title":return NK(s,a);case"gridScale":return{explicit:s.explicit,value:Pi(s.value,a.value)}}return ax(s,a,i,"axis")});t.setWithExplicit(i,n)}return t}function XRe(t,e,i,n,s){if(e==="disable")return i!==void 0;switch(i=i||{},e){case"titleAngle":case"labelAngle":return t===(Ce(i.labelAngle)?i.labelAngle:am(i.labelAngle));case"values":return!!i.values;case"encode":return!!i.encoding||!!i.labelAngle;case"title":if(t===CQ(n,s))return!0}return t===i[e]}const KRe=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function JRe(t,e){var S,x;let i=e.axis(t);const n=new x3,s=Vi(e.encoding[t]),{mark:a,config:c}=e,d=(i==null?void 0:i.orient)||((S=c[t==="x"?"axisX":"axisY"])==null?void 0:S.orient)||((x=c.axis)==null?void 0:x.orient)||DNe(t),f=e.getScaleComponent(t).get("type"),u=MNe(t,f,d,e.config),o=i!==void 0?!i:t2("disable",c.style,i==null?void 0:i.style,u).configValue;if(n.set("disable",o,i!==void 0),o)return n;i=i||{};const g=CNe(s,i,t,c.style,u),w=fJ(i.formatType,s,f),m=dJ(s,s.type,i.format,i.formatType,c,!0),l={fieldOrDatumDef:s,axis:i,channel:t,model:e,scaleType:f,orient:d,labelAngle:g,format:m,formatType:w,mark:a,config:c};for(const B of _Z){const F=B in kU?kU[B](l):rU(B)?i[B]:void 0,I=F!==void 0,A=XRe(F,B,i,e,t);if(I&&A)n.set(B,F,A);else{const{configValue:O=void 0,configFrom:R=void 0}=rU(B)&&B!=="values"?t2(B,c.style,i.style,u):{},D=O!==void 0;I&&!D?n.set(B,F,A):(R!=="vgAxisConfig"||KRe.has(B)&&D||vw(O)||Ce(O))&&n.set(B,O,!1)}}const T=i.encoding??{},b=xJ.reduce((B,F)=>{if(!n.hasAxisPart(F))return B;const I=UQ(T[F]??{},e),A=F==="labels"?qRe(e,t,I):I;return A!==void 0&&!ti(A)&&(B[F]={update:A}),B},{});return ti(b)||n.set("encode",b,!!i.encoding||i.labelAngle!==void 0),n}function QRe({encoding:t,size:e}){for(const i of qo){const n=Cs(i);Mo(e[n])&&Fc(t[i])&&(delete e[n],be(PK(n)))}return e}function ZRe(t,e,i){const n=hs(t),s=Kt("orient",n,i);if(n.orient=n3e(n.type,e,s),s!==void 0&&s!==n.orient&&be(v2e(n.orient,s)),n.type==="bar"&&n.orient){const d=Kt("cornerRadiusEnd",n,i);if(d!==void 0){const f=n.orient==="horizontal"&&e.x2||n.orient==="vertical"&&e.y2?["cornerRadius"]:UMe[n.orient];for(const u of f)n[u]=d;n.cornerRadiusEnd!==void 0&&delete n.cornerRadiusEnd}}return Kt("opacity",n,i)===void 0&&(n.opacity=t3e(n.type,e)),Kt("cursor",n,i)===void 0&&(n.cursor=e3e(n,e,i)),n}function e3e(t,e,i){return e.href||t.href||Kt("href",t,i)?"pointer":t.cursor}function t3e(t,e){if(It([XS,LR,DR,PR],t)&&!YR(e))return .7}function i3e(t,e,{graticule:i}){if(i)return!1;const n=ou("filled",t,e),s=t.type;return Pi(n,s!==XS&&s!==YS&&s!==Pv)}function n3e(t,e,i){switch(t){case XS:case DR:case PR:case nJ:case MMe:case FMe:return}const{x:n,y:s,x2:a,y2:c}=e;switch(t){case HS:if(Te(n)&&(un(n.bin)||Te(s)&&s.aggregate&&!n.aggregate))return"vertical";if(Te(s)&&(un(s.bin)||Te(n)&&n.aggregate&&!s.aggregate))return"horizontal";if(c||a){if(i)return i;if(!a)return(Te(n)&&n.type===cu&&!hi(n.bin)||Uv(n))&&Te(s)&&un(s.bin)?"horizontal":"vertical";if(!c)return(Te(s)&&s.type===cu&&!hi(s.bin)||Uv(s))&&Te(n)&&un(n.bin)?"vertical":"horizontal"}case Pv:if(a&&!(Te(n)&&un(n.bin))&&c&&!(Te(s)&&un(s.bin)))return;case WS:if(c)return Te(s)&&un(s.bin)?"horizontal":"vertical";if(a)return Te(n)&&un(n.bin)?"vertical":"horizontal";if(t===Pv){if(n&&!s)return"vertical";if(s&&!n)return"horizontal"}case YS:case LR:{const d=nU(n),f=nU(s);if(i)return i;if(d&&!f)return t!=="tick"?"horizontal":"vertical";if(!d&&f)return t!=="tick"?"vertical":"horizontal";if(d&&f)return"vertical";{const u=ns(n)&&n.type===t_,o=ns(s)&&s.type===t_;if(u&&!o)return"vertical";if(!u&&o)return"horizontal"}return}}return"vertical"}const s3e={vgMark:"arc",encodeEntry:t=>({...Dr(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...kn("x",t,{defaultPos:"mid"}),...kn("y",t,{defaultPos:"mid"}),...ad(t,"radius"),...ad(t,"theta")})},r3e={vgMark:"area",encodeEntry:t=>({...Dr(t,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...Hv("x",t,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:t.markDef.orient==="horizontal"}),...Hv("y",t,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:t.markDef.orient==="vertical"}),...f3(t)})},a3e={vgMark:"rect",encodeEntry:t=>({...Dr(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ad(t,"x"),...ad(t,"y")})},o3e={vgMark:"shape",encodeEntry:t=>({...Dr(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:t=>{const{encoding:e}=t,i=e.shape;return[{type:"geoshape",projection:t.projectionName(),...i&&Te(i)&&i.type===N_?{field:xe(i,{expr:"datum"})}:{}}]}},l3e={vgMark:"image",encodeEntry:t=>({...Dr(t,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...ad(t,"x"),...ad(t,"y"),...c3(t,"url")})},c3e={vgMark:"line",encodeEntry:t=>({...Dr(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...kn("x",t,{defaultPos:"mid"}),...kn("y",t,{defaultPos:"mid"}),...Zi("size",t,{vgChannel:"strokeWidth"}),...f3(t)})},d3e={vgMark:"trail",encodeEntry:t=>({...Dr(t,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...kn("x",t,{defaultPos:"mid"}),...kn("y",t,{defaultPos:"mid"}),...Zi("size",t),...f3(t)})};function B3(t,e){const{config:i}=t;return{...Dr(t,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...kn("x",t,{defaultPos:"mid"}),...kn("y",t,{defaultPos:"mid"}),...Zi("size",t),...Zi("angle",t),...f3e(t,i,e)}}function f3e(t,e,i){return i?{shape:{value:i}}:Zi("shape",t)}const u3e={vgMark:"symbol",encodeEntry:t=>B3(t)},h3e={vgMark:"symbol",encodeEntry:t=>B3(t,"circle")},p3e={vgMark:"symbol",encodeEntry:t=>B3(t,"square")},_3e={vgMark:"rect",encodeEntry:t=>({...Dr(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ad(t,"x"),...ad(t,"y")})},y3e={vgMark:"rule",encodeEntry:t=>{const{markDef:e}=t,i=e.orient;return!t.encoding.x&&!t.encoding.y&&!t.encoding.latitude&&!t.encoding.longitude?{}:{...Dr(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Hv("x",t,{defaultPos:i==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:i!=="vertical"}),...Hv("y",t,{defaultPos:i==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:i!=="horizontal"}),...Zi("size",t,{vgChannel:"strokeWidth"})}}},g3e={vgMark:"text",encodeEntry:t=>{const{config:e,encoding:i}=t;return{...Dr(t,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...kn("x",t,{defaultPos:"mid"}),...kn("y",t,{defaultPos:"mid"}),...c3(t),...Zi("size",t,{vgChannel:"fontSize"}),...Zi("angle",t),...SU("align",m3e(t.markDef,i,e)),...SU("baseline",w3e(t.markDef,i,e)),...kn("radius",t,{defaultPos:null}),...kn("theta",t,{defaultPos:null})}}};function m3e(t,e,i){if(Kt("align",t,i)===void 0)return"center"}function w3e(t,e,i){if(Kt("baseline",t,i)===void 0)return"middle"}const b3e={vgMark:"rect",encodeEntry:t=>{const{config:e,markDef:i}=t,n=i.orient,s=n==="horizontal"?"width":"height",a=n==="horizontal"?"height":"width";return{...Dr(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...kn("x",t,{defaultPos:"mid",vgChannel:"xc"}),...kn("y",t,{defaultPos:"mid",vgChannel:"yc"}),...Zi("size",t,{defaultValue:T3e(t),vgChannel:s}),[a]:mi(Kt("thickness",i,e))}}};function T3e(t){const{config:e,markDef:i}=t,{orient:n}=i,s=n==="horizontal"?"width":"height",a=t.getScaleComponent(n==="horizontal"?"x":"y"),c=Kt("size",i,e,{vgChannel:s})??e.tick.bandSize;if(c!==void 0)return c;{const d=a?a.get("range"):void 0;return d&&Ad(d)&&ii(d.step)?d.step*3/4:Vv(e.view,s)*3/4}}const B0={arc:s3e,area:r3e,bar:a3e,circle:h3e,geoshape:o3e,image:l3e,line:c3e,point:u3e,rect:_3e,rule:y3e,square:p3e,text:g3e,tick:b3e,trail:d3e};function v3e(t){if(It([YS,WS,AMe],t.mark)){const e=MJ(t.mark,t.encoding);if(e.length>0)return E3e(t,e)}else if(t.mark===HS){const e=jF.some(i=>Kt(i,t.markDef,t.config));if(t.stack&&!t.fieldDef("size")&&e)return S3e(t)}return I3(t)}const GU="faceted_path_";function E3e(t,e){return[{name:t.getName("pathgroup"),type:"group",from:{facet:{name:GU+t.requestDataName(fi.Main),data:t.requestDataName(fi.Main),groupby:e}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:I3(t,{fromPrefix:GU})}]}const VU="stack_group_";function S3e(t){var u;const[e]=I3(t,{fromPrefix:VU}),i=t.scaleName(t.stack.fieldChannel),n=(o={})=>t.vgField(t.stack.fieldChannel,o),s=(o,g)=>{const w=[n({prefix:"min",suffix:"start",expr:g}),n({prefix:"max",suffix:"start",expr:g}),n({prefix:"min",suffix:"end",expr:g}),n({prefix:"max",suffix:"end",expr:g})];return`${o}(${w.map(m=>`scale('${i}',${m})`).join(",")})`};let a,c;t.stack.fieldChannel==="x"?(a={...Qp(e.encode.update,["y","yc","y2","height",...jF]),x:{signal:s("min","datum")},x2:{signal:s("max","datum")},clip:{value:!0}},c={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},e.encode.update={...bs(e.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(a={...Qp(e.encode.update,["x","xc","x2","width"]),y:{signal:s("min","datum")},y2:{signal:s("max","datum")},clip:{value:!0}},c={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},e.encode.update={...bs(e.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const o of jF){const g=ou(o,t.markDef,t.config);e.encode.update[o]?(a[o]=e.encode.update[o],delete e.encode.update[o]):g&&(a[o]=mi(g)),g&&(e.encode.update[o]={value:0})}const d=[];if(((u=t.stack.groupbyChannels)==null?void 0:u.length)>0)for(const o of t.stack.groupbyChannels){const g=t.fieldDef(o),w=xe(g);w&&d.push(w),(g!=null&&g.bin||g!=null&&g.timeUnit)&&d.push(xe(g,{binSuffix:"end"}))}return a=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((o,g)=>{if(e.encode.update[g])return{...o,[g]:e.encode.update[g]};{const w=ou(g,t.markDef,t.config);return w!==void 0?{...o,[g]:mi(w)}:o}},a),a.stroke&&(a.strokeForeground={value:!0},a.strokeOffset={value:0}),[{type:"group",from:{facet:{data:t.requestDataName(fi.Main),name:VU+t.requestDataName(fi.Main),groupby:d,aggregate:{fields:[n({suffix:"start"}),n({suffix:"start"}),n({suffix:"end"}),n({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:a},marks:[{type:"group",encode:{update:c},marks:[e]}]}]}function x3e(t){var d;const{encoding:e,stack:i,mark:n,markDef:s,config:a}=t,c=e.order;if(!(!ue(c)&&_a(c)&&UF(c.value)||!c&&UF(Kt("order",s,a)))){if((ue(c)||Te(c))&&!i)return MK(c,{expr:"datum"});if(Od(n)){const f=s.orient==="horizontal"?"y":"x",u=e[f];if(Te(u)){const o=u.sort;if(ue(o))return{field:xe(u,{prefix:f,suffix:"sort_index",expr:"datum"})};if(fo(o))return{field:xe({aggregate:YR(t.encoding)?o.op:void 0,field:o.field},{expr:"datum"})};if(hJ(o)){const g=t.fieldDef(o.encoding);return{field:xe(g,{expr:"datum"}),order:o.order}}else return o===null?void 0:{field:xe(u,{binSuffix:(d=t.stack)!=null&&d.impute?"mid":void 0,expr:"datum"})}}return}}}function I3(t,e={fromPrefix:""}){const{mark:i,markDef:n,encoding:s,config:a}=t,c=Pi(n.clip,B3e(t),I3e(t)),d=kK(n),f=s.key,u=x3e(t),o=k3e(t),g=Kt("aria",n,a),w=B0[i].postEncodingTransform?B0[i].postEncodingTransform(t):null;return[{name:t.getName("marks"),type:B0[i].vgMark,...c?{clip:!0}:{},...d?{style:d}:{},...f?{key:f.field}:{},...u?{sort:u}:{},...o||{},...g===!1?{aria:g}:{},from:{data:e.fromPrefix+t.requestDataName(fi.Main)},encode:{update:B0[i].encodeEntry(t)},...w?{transform:w}:{}}]}function B3e(t){const e=t.getScaleComponent("x"),i=t.getScaleComponent("y");return e!=null&&e.get("selectionExtent")||i!=null&&i.get("selectionExtent")?!0:void 0}function I3e(t){const e=t.component.projection;return e&&!e.isFit?!0:void 0}function k3e(t){if(!t.component.selection)return null;const e=me(t.component.selection).length;let i=e,n=t.parent;for(;n&&i===0;)i=me(n.component.selection).length,n=n.parent;return i?{interactive:e>0||t.mark==="geoshape"||!!t.encoding.tooltip}:null}class yZ extends fZ{constructor(e,i,n,s={},a){super(e,"unit",i,n,a,void 0,oU(e)?e.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const c=ko(e.mark)?{...e.mark}:{type:e.mark},d=c.type;c.filled===void 0&&(c.filled=i3e(c,a,{graticule:e.data&&o3(e.data)}));const f=this.encoding=yAe(e.encoding||{},d,c.filled,a);this.markDef=ZRe(c,f,a),this.size=QRe({encoding:f,size:oU(e)?{...s,...e.width?{width:e.width}:{},...e.height?{height:e.height}:{}}:s}),this.stack=KJ(this.markDef,f),this.specifiedScales=this.initScales(d,f),this.specifiedAxes=this.initAxes(f),this.specifiedLegends=this.initLegends(f),this.specifiedProjection=e.projection,this.selection=(e.params??[]).filter(u=>i3(u))}get hasProjection(){const{encoding:e}=this,i=this.mark===sJ,n=e&&yFe.some(s=>Je(e[s]));return i||n}scaleDomain(e){const i=this.specifiedScales[e];return i?i.domain:void 0}axis(e){return this.specifiedAxes[e]}legend(e){return this.specifiedLegends[e]}initScales(e,i){return jS.reduce((n,s)=>{const a=Vi(i[s]);return a&&(n[s]=this.initScale(a.scale??{})),n},{})}initScale(e){const{domain:i,range:n}=e,s=hs(e);return ue(i)&&(s.domain=i.map(Ks)),ue(n)&&(s.range=n.map(Ks)),s}initAxes(e){return qo.reduce((i,n)=>{const s=e[n];if(Je(s)||n===Ti&&Je(e.x2)||n===ln&&Je(e.y2)){const a=Je(s)?s.axis:void 0;i[n]=a&&this.initAxis({...a})}return i},{})}initAxis(e){const i=me(e),n={};for(const s of i){const a=e[s];n[s]=vw(a)?IK(a):Ks(a)}return n}initLegends(e){return xFe.reduce((i,n)=>{const s=Vi(e[n]);if(s&&IFe(n)){const a=s.legend;i[n]=a&&hs(a)}return i},{})}parseData(){this.component.data=bx(this)}parseLayoutSize(){RRe(this)}parseSelections(){this.component.selection=BNe(this,this.selection)}parseMarkGroup(){this.component.mark=v3e(this)}parseAxesAndHeaders(){this.component.axes=GRe(this)}assembleSelectionTopLevelSignals(e){return YOe(this,e)}assembleSignals(){return[...AQ(this),...WOe(this,[])]}assembleSelectionData(e){return XOe(this,e)}assembleLayout(){return null}assembleLayoutSignals(){return _3(this)}assembleMarks(){let e=this.component.mark??[];return(!this.parent||!P_(this.parent))&&(e=cQ(this,e)),e.map(this.correctDataNames)}assembleGroupStyle(){const{style:e}=this.view||{};return e!==void 0?e:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(e){return Df(this.encoding,e)}fieldDef(e){const i=this.encoding[e];return Fo(i)}typedFieldDef(e){const i=this.fieldDef(e);return ns(i)?i:null}}class k3 extends E3{constructor(e,i,n,s,a){super(e,"layer",i,n,a,e.resolve,e.view);const c={...s,...e.width?{width:e.width}:{},...e.height?{height:e.height}:{}};this.children=e.layer.map((d,f)=>{if(rx(d))return new k3(d,this,this.getName(`layer_${f}`),c,a);if(Jl(d))return new yZ(d,this,this.getName(`layer_${f}`),c,a);throw new Error(TR(d))})}parseData(){this.component.data=bx(this);for(const e of this.children)e.parseData()}parseLayoutSize(){NRe(this)}parseSelections(){this.component.selection={};for(const e of this.children){e.parseSelections();for(const i of me(e.component.selection))this.component.selection[i]=e.component.selection[i]}}parseMarkGroup(){for(const e of this.children)e.parseMarkGroup()}parseAxesAndHeaders(){WRe(this)}assembleSelectionTopLevelSignals(e){return this.children.reduce((i,n)=>n.assembleSelectionTopLevelSignals(i),e)}assembleSignals(){return this.children.reduce((e,i)=>e.concat(i.assembleSignals()),AQ(this))}assembleLayoutSignals(){return this.children.reduce((e,i)=>e.concat(i.assembleLayoutSignals()),_3(this))}assembleSelectionData(e){return this.children.reduce((i,n)=>n.assembleSelectionData(i),e)}assembleGroupStyle(){const e=new Set;for(const n of this.children)for(const s of ke(n.assembleGroupStyle()))e.add(s);const i=Array.from(e);return i.length>1?i:i.length===1?i[0]:void 0}assembleTitle(){let e=super.assembleTitle();if(e)return e;for(const i of this.children)if(e=i.assembleTitle(),e)return e}assembleLayout(){return null}assembleMarks(){return KOe(this,this.children.flatMap(e=>e.assembleMarks()))}assembleLegends(){return this.children.reduce((e,i)=>e.concat(i.assembleLegends()),YQ(this))}}function F3(t,e,i,n,s){if(JS(t))return new hg(t,e,i,s);if(rx(t))return new k3(t,e,i,n,s);if(Jl(t))return new yZ(t,e,i,n,s);if(UAe(t))return new URe(t,e,i,s);throw new Error(TR(t))}function F3e(t,e={}){e.logger&&H2e(e.logger),e.fieldTitle&&vJ(e.fieldTitle);try{const i=XJ(T_(e.config,t.config)),n=nQ(t,i),s=F3(n,null,"",void 0,i);return s.parse(),YCe(s.component.data,s),{spec:A3e(s,M3e(t,n.autosize,i,s),t.datasets,t.usermeta),normalized:n}}finally{e.logger&&Y2e(),e.fieldTitle&&oAe()}}function M3e(t,e,i,n){const s=n.component.layoutSize.get("width"),a=n.component.layoutSize.get("height");if(e===void 0?(e={type:"pad"},n.hasAxisOrientSignalRef()&&(e.resize=!0)):Ie(e)&&(e={type:e}),s&&a&&jOe(e.type)){if(s==="step"&&a==="step")be(V$()),e.type="pad";else if(s==="step"||a==="step"){const c=s==="step"?"width":"height";be(V$(zS(c)));const d=c==="width"?"height":"width";e.type=qOe(d)}}return{...me(e).length===1&&e.type?e.type==="pad"?{}:{autosize:e.type}:{autosize:e},...wU(i,!1),...wU(t,!0)}}function A3e(t,e,i={},n){const s=t.config?eOe(t.config):void 0,a=[].concat(t.assembleSelectionData([]),FRe(t.component.data,i)),c=t.assembleProjections(),d=t.assembleTitle(),f=t.assembleGroupStyle(),u=t.assembleGroupEncodeEntry(!0);let o=t.assembleLayoutSignals();o=o.filter(m=>(m.name==="width"||m.name==="height")&&m.value!==void 0?(e[m.name]=+m.value,!1):!0);const{params:g,...w}=e;return{$schema:"https://vega.github.io/schema/vega/v5.json",...t.description?{description:t.description}:{},...w,...d?{title:d}:{},...f?{style:f}:{},...u?{encode:{update:u}}:{},data:a,...c.length>0?{projections:c}:{},...t.assembleGroup([...o,...t.assembleSelectionTopLevelSignals([]),...VJ(g)]),...s?{config:s}:{},...n?{usermeta:n}:{}}}const O3e=aFe.version,N3e=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:Zp,accessPathWithDatum:fR,compile:F3e,contains:It,deepEqual:so,deleteNestedProperty:Rv,duplicate:Qe,entries:nd,every:lR,fieldIntersection:dR,flatAccessWithDatum:aK,getFirstDefined:Pi,hasIntersection:cR,hash:Ot,internalField:cK,isBoolean:rm,isEmpty:ti,isEqual:uFe,isInternalField:dK,isNullOrFalse:UF,isNumeric:RS,keys:me,logicalExpr:fg,mergeDeep:sK,never:nK,normalize:nQ,normalizeAngle:am,omit:bs,pick:Qp,prefixGenerator:zF,removePathFromField:uR,replaceAll:ru,replacePathInField:Nr,resetIdCounter:pFe,setEqual:rK,some:su,stringify:ui,titleCase:uw,unique:ro,uniqueId:lK,vals:gn,varName:bi,version:O3e},Symbol.toStringTag,{value:"Module"}));function gZ(t){const[e,i]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(t).slice(1,3);return{library:e,version:i}}var C3e="vega-themes",R3e="2.13.0",L3e="Themes for stylized Vega and Vega-Lite visualizations.",D3e=["vega","vega-lite","themes","style"],P3e="BSD-3-Clause",$3e={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},U3e=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],z3e="build/vega-themes.js",M3="build/vega-themes.module.js",j3e="build/vega-themes.min.js",q3e="build/vega-themes.min.js",G3e="build/vega-themes.module.d.ts",V3e={type:"git",url:"https://github.com/vega/vega-themes.git"},W3e=["src","build"],H3e={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},Y3e={"@babel/core":"^7.21.4","@babel/plugin-transform-runtime":"^7.21.4","@babel/preset-env":"^7.21.4","@babel/preset-typescript":"^7.21.4","@release-it/conventional-changelog":"^5.1.1","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.2","@rollup/plugin-terser":"^0.4.1","@typescript-eslint/eslint-plugin":"^5.59.0","@typescript-eslint/parser":"^5.59.0","browser-sync":"^2.29.1",concurrently:"^8.0.1",eslint:"^8.38.0","eslint-config-prettier":"^8.8.0","eslint-plugin-prettier":"^4.2.1","gh-pages":"^5.0.0",prettier:"^2.8.7","release-it":"^15.10.1",rollup:"^3.20.6","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.2.0",typescript:"^5.0.4",vega:"^5.24.0","vega-lite":"^5.7.1"},X3e={vega:"*","vega-lite":"*"},K3e={},J3e={name:C3e,version:R3e,description:L3e,keywords:D3e,license:P3e,author:$3e,contributors:U3e,main:z3e,module:M3,unpkg:j3e,jsdelivr:q3e,types:G3e,repository:V3e,files:W3e,scripts:H3e,devDependencies:Y3e,peerDependencies:X3e,dependencies:K3e};const sh="#fff",WU="#888",Q3e={background:"#333",view:{stroke:WU},title:{color:sh,subtitleColor:sh},style:{"guide-label":{fill:sh},"guide-title":{fill:sh}},axis:{domainColor:sh,gridColor:WU,tickColor:sh}},$d="#4572a7",Z3e={background:"#fff",arc:{fill:$d},area:{fill:$d},line:{stroke:$d,strokeWidth:2},path:{stroke:$d},rect:{fill:$d},shape:{stroke:$d},symbol:{fill:$d,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Ud="#30a2da",cI="#cbcbcb",eLe="#999",tLe="#333",HU="#f0f0f0",YU="#333",iLe={arc:{fill:Ud},area:{fill:Ud},axis:{domainColor:cI,grid:!0,gridColor:cI,gridWidth:1,labelColor:eLe,labelFontSize:10,titleColor:tLe,tickColor:cI,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:HU,group:{fill:HU},legend:{labelColor:YU,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:YU,titleFontSize:14,titlePadding:10},line:{stroke:Ud,strokeWidth:2},path:{stroke:Ud,strokeWidth:.5},rect:{fill:Ud},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Ud},bar:{binSpacing:2,fill:Ud,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},zd="#000",nLe={group:{fill:"#e5e5e5"},arc:{fill:zd},area:{fill:zd},line:{stroke:zd},path:{stroke:zd},rect:{fill:zd},shape:{stroke:zd},symbol:{fill:zd,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},sLe=22,rLe="normal",XU="Benton Gothic, sans-serif",KU=11.5,aLe="normal",jd="#82c6df",dI="Benton Gothic Bold, sans-serif",JU="normal",QU=13,dy={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},oLe={background:"#ffffff",title:{anchor:"start",color:"#000000",font:dI,fontSize:sLe,fontWeight:rLe},arc:{fill:jd},area:{fill:jd},line:{stroke:jd,strokeWidth:2},path:{stroke:jd},rect:{fill:jd},shape:{stroke:jd},symbol:{fill:jd,size:30},axis:{labelFont:XU,labelFontSize:KU,labelFontWeight:aLe,titleFont:dI,titleFontSize:QU,titleFontWeight:JU},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:XU,labelFontSize:KU,symbolType:"square",titleFont:dI,titleFontSize:QU,titleFontWeight:JU},range:{category:dy["category-6"],diverging:dy["fireandice-6"],heatmap:dy["fire-7"],ordinal:dy["fire-7"],ramp:dy["fire-7"]}},qd="#ab5787",I0="#979797",lLe={background:"#f9f9f9",arc:{fill:qd},area:{fill:qd},line:{stroke:qd},path:{stroke:qd},rect:{fill:qd},shape:{stroke:qd},symbol:{fill:qd,size:30},axis:{domainColor:I0,domainWidth:.5,gridWidth:.2,labelColor:I0,tickColor:I0,tickWidth:.2,titleColor:I0},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Gd="#3e5c69",cLe={background:"#fff",arc:{fill:Gd},area:{fill:Gd},line:{stroke:Gd},path:{stroke:Gd},rect:{fill:Gd},shape:{stroke:Gd},symbol:{fill:Gd},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},fr="#1696d2",ZU="#000000",dLe="#FFFFFF",k0="Lato",fI="Lato",fLe="Lato",uLe="#DEDDDD",hLe=18,fy={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},pLe={background:dLe,title:{anchor:"start",fontSize:hLe,font:k0},axisX:{domain:!0,domainColor:ZU,domainWidth:1,grid:!1,labelFontSize:12,labelFont:fI,labelAngle:0,tickColor:ZU,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:k0},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:uLe,gridWidth:1,labelFontSize:12,labelFont:fI,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:k0,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:fI,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:k0,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:fy["six-groups-cat-1"],diverging:fy["diverging-colors"],heatmap:fy["diverging-colors"],ordinal:fy["six-groups-seq"],ramp:fy["shades-blue"]},area:{fill:fr},rect:{fill:fr},line:{color:fr,stroke:fr,strokeWidth:5},trail:{color:fr,stroke:fr,strokeWidth:0,size:1},path:{stroke:fr,strokeWidth:.5},point:{filled:!0},text:{font:fLe,color:fr,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:fr,stroke:null}},arc:{fill:fr},shape:{stroke:fr},symbol:{fill:fr,size:30}},Vd="#3366CC",e8="#ccc",F0="Arial, sans-serif",_Le={arc:{fill:Vd},area:{fill:Vd},path:{stroke:Vd},rect:{fill:Vd},shape:{stroke:Vd},symbol:{stroke:Vd},circle:{fill:Vd},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:F0,fontSize:12},"guide-title":{font:F0,fontSize:12},"group-title":{font:F0,fontSize:12}},title:{font:F0,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:e8,tickColor:e8,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},A3=t=>t*(1/3+1),t8=A3(9),i8=A3(10),n8=A3(12),uy="Segoe UI",s8="wf_standard-font, helvetica, arial, sans-serif",r8="#252423",hy="#605E5C",a8="transparent",yLe="#C8C6C4",Ur="#118DFF",gLe="#12239E",mLe="#E66C37",wLe="#6B007B",bLe="#E044A7",TLe="#744EC2",vLe="#D9B300",ELe="#D64550",mZ=Ur,wZ="#DEEFFF",o8=[wZ,mZ],SLe=[wZ,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",mZ],xLe={view:{stroke:a8},background:a8,font:uy,header:{titleFont:s8,titleFontSize:n8,titleColor:r8,labelFont:uy,labelFontSize:i8,labelColor:hy},axis:{ticks:!1,grid:!1,domain:!1,labelColor:hy,labelFontSize:t8,titleFont:s8,titleColor:r8,titleFontSize:n8,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:yLe,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Ur},line:{stroke:Ur,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:uy,fontSize:t8,fill:hy},arc:{fill:Ur},area:{fill:Ur,line:!0,opacity:.6},path:{stroke:Ur},rect:{fill:Ur},point:{fill:Ur,filled:!0,size:75},shape:{stroke:Ur},symbol:{fill:Ur,strokeWidth:1.5,size:50},legend:{titleFont:uy,titleFontWeight:"bold",titleColor:hy,labelFont:uy,labelFontSize:i8,labelColor:hy,symbolType:"circle",symbolSize:75},range:{category:[Ur,gLe,mLe,wLe,bLe,TLe,vLe,ELe],diverging:o8,heatmap:o8,ordinal:SLe}},BLe=J3e.version,ILe=Object.freeze(Object.defineProperty({__proto__:null,dark:Q3e,excel:Z3e,fivethirtyeight:iLe,ggplot2:nLe,googlecharts:_Le,latimes:oLe,powerbi:xLe,quartz:lLe,urbaninstitute:pLe,version:BLe,vox:cLe},Symbol.toStringTag,{value:"Module"}));function um(t){return um=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},um(t)}function kLe(t,e){if(um(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var n=i.call(t,e||"default");if(um(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function FLe(t){var e=kLe(t,"string");return um(e)==="symbol"?e:String(e)}function MLe(t,e,i){return e=FLe(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function ALe(t,e){if(t==null)return{};var i={},n=Object.keys(t),s,a;for(a=0;a<n.length;a++)s=n[a],!(e.indexOf(s)>=0)&&(i[s]=t[s]);return i}function OLe(t,e){if(t==null)return{};var i=ALe(t,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}const NLe=["title","image"];function CLe(t,e,i){if(ue(t))return`[${t.map(n=>e(Ie(n)?n:l8(n,i))).join(", ")}]`;if(Me(t)){let n="";const s=t,{title:a,image:c}=s,d=OLe(s,NLe);a&&(n+=`<h2>${e(a)}</h2>`),c&&(n+=`<img src="${e(c)}">`);const f=Object.keys(d);if(f.length>0){n+="<table>";for(const u of f){let o=d[u];o!==void 0&&(Me(o)&&(o=l8(o,i)),n+=`<tr><td class="key">${e(u)}:</td><td class="value">${e(o)}</td></tr>`)}n+="</table>"}return n||"{}"}return e(t)}function RLe(t){const e=[];return function(i,n){if(typeof n!="object"||n===null)return n;const s=e.indexOf(this)+1;return e.length=s,e.length>t?"[Object]":e.indexOf(n)>=0?"[Circular]":(e.push(n),n)}}function l8(t,e){return JSON.stringify(t,RLe(e))}var LLe=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const bZ="vg-tooltip-element",DLe={offsetX:10,offsetY:10,id:bZ,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:PLe,maxDepth:2,formatTooltip:CLe};function PLe(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function $Le(t){if(!/^[A-Za-z]+[-:.\w]*$/.test(t))throw new Error("Invalid HTML ID");return LLe.toString().replace(bZ,t)}function ULe(t,e,i,n){let s=t.clientX+i;s+e.width>window.innerWidth&&(s=+t.clientX-i-e.width);let a=t.clientY+n;return a+e.height>window.innerHeight&&(a=+t.clientY-n-e.height),{x:s,y:a}}function c8(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),i.push.apply(i,n)}return i}function d8(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?c8(Object(i),!0).forEach(function(n){MLe(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):c8(Object(i)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}class zLe{constructor(e){this.options=d8(d8({},DLe),e);const i=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const n=document.createElement("style");n.setAttribute("id",this.options.styleId),n.innerHTML=$Le(i);const s=document.head;s.childNodes.length>0?s.insertBefore(n,s.childNodes[0]):s.appendChild(n)}}tooltipHandler(e,i,n,s){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),s==null||s===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(s,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:a,y:c}=ULe(i,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${c}px`,this.el.style.left=`${a}px`}}function hm(t){return hm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hm(t)}function jLe(t,e){if(hm(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var n=i.call(t,e||"default");if(hm(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qLe(t){var e=jLe(t,"string");return hm(e)==="symbol"?e:String(e)}function GLe(t,e,i){return e=qLe(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function VLe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var uI,f8;function WLe(){return f8||(f8=1,uI=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}),uI}var HLe=Ut;Ut.Node=_u;Ut.create=Ut;function Ut(t){var e=this;if(e instanceof Ut||(e=new Ut),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(s){e.push(s)});else if(arguments.length>0)for(var i=0,n=arguments.length;i<n;i++)e.push(arguments[i]);return e}Ut.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,i=t.prev;return e&&(e.prev=i),i&&(i.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=i),t.list.length--,t.next=null,t.prev=null,t.list=null,e};Ut.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};Ut.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};Ut.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)XLe(this,arguments[t]);return this.length};Ut.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)KLe(this,arguments[t]);return this.length};Ut.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};Ut.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};Ut.prototype.forEach=function(t,e){e=e||this;for(var i=this.head,n=0;i!==null;n++)t.call(e,i.value,n,this),i=i.next};Ut.prototype.forEachReverse=function(t,e){e=e||this;for(var i=this.tail,n=this.length-1;i!==null;n--)t.call(e,i.value,n,this),i=i.prev};Ut.prototype.get=function(t){for(var e=0,i=this.head;i!==null&&e<t;e++)i=i.next;if(e===t&&i!==null)return i.value};Ut.prototype.getReverse=function(t){for(var e=0,i=this.tail;i!==null&&e<t;e++)i=i.prev;if(e===t&&i!==null)return i.value};Ut.prototype.map=function(t,e){e=e||this;for(var i=new Ut,n=this.head;n!==null;)i.push(t.call(e,n.value,this)),n=n.next;return i};Ut.prototype.mapReverse=function(t,e){e=e||this;for(var i=new Ut,n=this.tail;n!==null;)i.push(t.call(e,n.value,this)),n=n.prev;return i};Ut.prototype.reduce=function(t,e){var i,n=this.head;if(arguments.length>1)i=e;else if(this.head)n=this.head.next,i=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=0;n!==null;s++)i=t(i,n.value,s),n=n.next;return i};Ut.prototype.reduceReverse=function(t,e){var i,n=this.tail;if(arguments.length>1)i=e;else if(this.tail)n=this.tail.prev,i=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=this.length-1;n!==null;s--)i=t(i,n.value,s),n=n.prev;return i};Ut.prototype.toArray=function(){for(var t=new Array(this.length),e=0,i=this.head;i!==null;e++)t[e]=i.value,i=i.next;return t};Ut.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,i=this.tail;i!==null;e++)t[e]=i.value,i=i.prev;return t};Ut.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var i=new Ut;if(e<t||e<0)return i;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=0,s=this.head;s!==null&&n<t;n++)s=s.next;for(;s!==null&&n<e;n++,s=s.next)i.push(s.value);return i};Ut.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var i=new Ut;if(e<t||e<0)return i;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=this.length,s=this.tail;s!==null&&n>e;n--)s=s.prev;for(;s!==null&&n>t;n--,s=s.prev)i.push(s.value);return i};Ut.prototype.splice=function(t,e,...i){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,s=this.head;s!==null&&n<t;n++)s=s.next;for(var a=[],n=0;s&&n<e;n++)a.push(s.value),s=this.removeNode(s);s===null&&(s=this.tail),s!==this.head&&s!==this.tail&&(s=s.prev);for(var n=0;n<i.length;n++)s=YLe(this,s,i[n]);return a};Ut.prototype.reverse=function(){for(var t=this.head,e=this.tail,i=t;i!==null;i=i.prev){var n=i.prev;i.prev=i.next,i.next=n}return this.head=e,this.tail=t,this};function YLe(t,e,i){var n=e===t.head?new _u(i,null,e,t):new _u(i,e,e.next,t);return n.next===null&&(t.tail=n),n.prev===null&&(t.head=n),t.length++,n}function XLe(t,e){t.tail=new _u(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function KLe(t,e){t.head=new _u(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function _u(t,e,i,n){if(!(this instanceof _u))return new _u(t,e,i,n);this.list=n,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,i?(i.prev=this,this.next=i):this.next=null}try{WLe()(Ut)}catch{}const JLe=HLe,yf=Symbol("max"),cl=Symbol("length"),rh=Symbol("lengthCalculator"),pg=Symbol("allowStale"),kf=Symbol("maxAge"),al=Symbol("dispose"),u8=Symbol("noDisposeOnSet"),Ji=Symbol("lruList"),zr=Symbol("cache"),TZ=Symbol("updateAgeOnGet"),hI=()=>1;class QLe{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");this[yf]=e.max||1/0;const i=e.length||hI;if(this[rh]=typeof i!="function"?hI:i,this[pg]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[kf]=e.maxAge||0,this[al]=e.dispose,this[u8]=e.noDisposeOnSet||!1,this[TZ]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[yf]=e||1/0,py(this)}get max(){return this[yf]}set allowStale(e){this[pg]=!!e}get allowStale(){return this[pg]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[kf]=e,py(this)}get maxAge(){return this[kf]}set lengthCalculator(e){typeof e!="function"&&(e=hI),e!==this[rh]&&(this[rh]=e,this[cl]=0,this[Ji].forEach(i=>{i.length=this[rh](i.value,i.key),this[cl]+=i.length})),py(this)}get lengthCalculator(){return this[rh]}get length(){return this[cl]}get itemCount(){return this[Ji].length}rforEach(e,i){i=i||this;for(let n=this[Ji].tail;n!==null;){const s=n.prev;h8(this,e,n,i),n=s}}forEach(e,i){i=i||this;for(let n=this[Ji].head;n!==null;){const s=n.next;h8(this,e,n,i),n=s}}keys(){return this[Ji].toArray().map(e=>e.key)}values(){return this[Ji].toArray().map(e=>e.value)}reset(){this[al]&&this[Ji]&&this[Ji].length&&this[Ji].forEach(e=>this[al](e.key,e.value)),this[zr]=new Map,this[Ji]=new JLe,this[cl]=0}dump(){return this[Ji].map(e=>Jv(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[Ji]}set(e,i,n){if(n=n||this[kf],n&&typeof n!="number")throw new TypeError("maxAge must be a number");const s=n?Date.now():0,a=this[rh](i,e);if(this[zr].has(e)){if(a>this[yf])return dp(this,this[zr].get(e)),!1;const f=this[zr].get(e).value;return this[al]&&(this[u8]||this[al](e,f.value)),f.now=s,f.maxAge=n,f.value=i,this[cl]+=a-f.length,f.length=a,this.get(e),py(this),!0}const c=new ZLe(e,i,a,s,n);return c.length>this[yf]?(this[al]&&this[al](e,i),!1):(this[cl]+=c.length,this[Ji].unshift(c),this[zr].set(e,this[Ji].head),py(this),!0)}has(e){if(!this[zr].has(e))return!1;const i=this[zr].get(e).value;return!Jv(this,i)}get(e){return pI(this,e,!0)}peek(e){return pI(this,e,!1)}pop(){const e=this[Ji].tail;return e?(dp(this,e),e.value):null}del(e){dp(this,this[zr].get(e))}load(e){this.reset();const i=Date.now();for(let n=e.length-1;n>=0;n--){const s=e[n],a=s.e||0;if(a===0)this.set(s.k,s.v);else{const c=a-i;c>0&&this.set(s.k,s.v,c)}}}prune(){this[zr].forEach((e,i)=>pI(this,i,!1))}}const pI=(t,e,i)=>{const n=t[zr].get(e);if(n){const s=n.value;if(Jv(t,s)){if(dp(t,n),!t[pg])return}else i&&(t[TZ]&&(n.value.now=Date.now()),t[Ji].unshiftNode(n));return s.value}},Jv=(t,e)=>{if(!e||!e.maxAge&&!t[kf])return!1;const i=Date.now()-e.now;return e.maxAge?i>e.maxAge:t[kf]&&i>t[kf]},py=t=>{if(t[cl]>t[yf])for(let e=t[Ji].tail;t[cl]>t[yf]&&e!==null;){const i=e.prev;dp(t,e),e=i}},dp=(t,e)=>{if(e){const i=e.value;t[al]&&t[al](i.key,i.value),t[cl]-=i.length,t[zr].delete(i.key),t[Ji].removeNode(e)}};class ZLe{constructor(e,i,n,s,a){this.key=e,this.value=i,this.length=n,this.now=s,this.maxAge=a||0}}const h8=(t,e,i,n)=>{let s=i.value;Jv(t,s)&&(dp(t,i),t[pg]||(s=void 0)),s&&e.call(n,s.value,s.key,t)};var eDe=QLe;const tDe=Object.freeze({loose:!0}),iDe=Object.freeze({}),nDe=t=>t?typeof t!="object"?tDe:t:iDe;var O3=nDe,d2={exports:{}};const sDe="2.0.0",rDe=256,aDe=Number.MAX_SAFE_INTEGER||9007199254740991,oDe=16,lDe=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var N3={MAX_LENGTH:rDe,MAX_SAFE_COMPONENT_LENGTH:oDe,MAX_SAFE_INTEGER:aDe,RELEASE_TYPES:lDe,SEMVER_SPEC_VERSION:sDe,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const cDe=typeof process=="object"&&process.env&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};var Tx=cDe;(function(t,e){const{MAX_SAFE_COMPONENT_LENGTH:i}=N3,n=Tx;e=t.exports={};const s=e.re=[],a=e.src=[],c=e.t={};let d=0;const f=(u,o,g)=>{const w=d++;n(u,w,o),c[u]=w,a[w]=o,s[w]=new RegExp(o,g?"g":void 0)};f("NUMERICIDENTIFIER","0|[1-9]\\d*"),f("NUMERICIDENTIFIERLOOSE","[0-9]+"),f("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),f("MAINVERSION",`(${a[c.NUMERICIDENTIFIER]})\\.(${a[c.NUMERICIDENTIFIER]})\\.(${a[c.NUMERICIDENTIFIER]})`),f("MAINVERSIONLOOSE",`(${a[c.NUMERICIDENTIFIERLOOSE]})\\.(${a[c.NUMERICIDENTIFIERLOOSE]})\\.(${a[c.NUMERICIDENTIFIERLOOSE]})`),f("PRERELEASEIDENTIFIER",`(?:${a[c.NUMERICIDENTIFIER]}|${a[c.NONNUMERICIDENTIFIER]})`),f("PRERELEASEIDENTIFIERLOOSE",`(?:${a[c.NUMERICIDENTIFIERLOOSE]}|${a[c.NONNUMERICIDENTIFIER]})`),f("PRERELEASE",`(?:-(${a[c.PRERELEASEIDENTIFIER]}(?:\\.${a[c.PRERELEASEIDENTIFIER]})*))`),f("PRERELEASELOOSE",`(?:-?(${a[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${a[c.PRERELEASEIDENTIFIERLOOSE]})*))`),f("BUILDIDENTIFIER","[0-9A-Za-z-]+"),f("BUILD",`(?:\\+(${a[c.BUILDIDENTIFIER]}(?:\\.${a[c.BUILDIDENTIFIER]})*))`),f("FULLPLAIN",`v?${a[c.MAINVERSION]}${a[c.PRERELEASE]}?${a[c.BUILD]}?`),f("FULL",`^${a[c.FULLPLAIN]}$`),f("LOOSEPLAIN",`[v=\\s]*${a[c.MAINVERSIONLOOSE]}${a[c.PRERELEASELOOSE]}?${a[c.BUILD]}?`),f("LOOSE",`^${a[c.LOOSEPLAIN]}$`),f("GTLT","((?:<|>)?=?)"),f("XRANGEIDENTIFIERLOOSE",`${a[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),f("XRANGEIDENTIFIER",`${a[c.NUMERICIDENTIFIER]}|x|X|\\*`),f("XRANGEPLAIN",`[v=\\s]*(${a[c.XRANGEIDENTIFIER]})(?:\\.(${a[c.XRANGEIDENTIFIER]})(?:\\.(${a[c.XRANGEIDENTIFIER]})(?:${a[c.PRERELEASE]})?${a[c.BUILD]}?)?)?`),f("XRANGEPLAINLOOSE",`[v=\\s]*(${a[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[c.XRANGEIDENTIFIERLOOSE]})(?:${a[c.PRERELEASELOOSE]})?${a[c.BUILD]}?)?)?`),f("XRANGE",`^${a[c.GTLT]}\\s*${a[c.XRANGEPLAIN]}$`),f("XRANGELOOSE",`^${a[c.GTLT]}\\s*${a[c.XRANGEPLAINLOOSE]}$`),f("COERCE",`(^|[^\\d])(\\d{1,${i}})(?:\\.(\\d{1,${i}}))?(?:\\.(\\d{1,${i}}))?(?:$|[^\\d])`),f("COERCERTL",a[c.COERCE],!0),f("LONETILDE","(?:~>?)"),f("TILDETRIM",`(\\s*)${a[c.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",f("TILDE",`^${a[c.LONETILDE]}${a[c.XRANGEPLAIN]}$`),f("TILDELOOSE",`^${a[c.LONETILDE]}${a[c.XRANGEPLAINLOOSE]}$`),f("LONECARET","(?:\\^)"),f("CARETTRIM",`(\\s*)${a[c.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",f("CARET",`^${a[c.LONECARET]}${a[c.XRANGEPLAIN]}$`),f("CARETLOOSE",`^${a[c.LONECARET]}${a[c.XRANGEPLAINLOOSE]}$`),f("COMPARATORLOOSE",`^${a[c.GTLT]}\\s*(${a[c.LOOSEPLAIN]})$|^$`),f("COMPARATOR",`^${a[c.GTLT]}\\s*(${a[c.FULLPLAIN]})$|^$`),f("COMPARATORTRIM",`(\\s*)${a[c.GTLT]}\\s*(${a[c.LOOSEPLAIN]}|${a[c.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",f("HYPHENRANGE",`^\\s*(${a[c.XRANGEPLAIN]})\\s+-\\s+(${a[c.XRANGEPLAIN]})\\s*$`),f("HYPHENRANGELOOSE",`^\\s*(${a[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${a[c.XRANGEPLAINLOOSE]})\\s*$`),f("STAR","(<|>)?=?\\s*\\*"),f("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),f("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(d2,d2.exports);var C3=d2.exports;const p8=/^[0-9]+$/,vZ=(t,e)=>{const i=p8.test(t),n=p8.test(e);return i&&n&&(t=+t,e=+e),t===e?0:i&&!n?-1:n&&!i?1:t<e?-1:1},dDe=(t,e)=>vZ(e,t);var fDe={compareIdentifiers:vZ,rcompareIdentifiers:dDe};const M0=Tx,{MAX_LENGTH:_8,MAX_SAFE_INTEGER:A0}=N3,{re:y8,t:g8}=C3,uDe=O3,{compareIdentifiers:ah}=fDe;let hDe=class Ra{constructor(e,i){if(i=uDe(i),e instanceof Ra){if(e.loose===!!i.loose&&e.includePrerelease===!!i.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>_8)throw new TypeError(`version is longer than ${_8} characters`);M0("SemVer",e,i),this.options=i,this.loose=!!i.loose,this.includePrerelease=!!i.includePrerelease;const n=e.trim().match(i.loose?y8[g8.LOOSE]:y8[g8.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>A0||this.major<0)throw new TypeError("Invalid major version");if(this.minor>A0||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>A0||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){const a=+s;if(a>=0&&a<A0)return a}return s}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(M0("SemVer.compare",this.version,this.options,e),!(e instanceof Ra)){if(typeof e=="string"&&e===this.version)return 0;e=new Ra(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof Ra||(e=new Ra(e,this.options)),ah(this.major,e.major)||ah(this.minor,e.minor)||ah(this.patch,e.patch)}comparePre(e){if(e instanceof Ra||(e=new Ra(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let i=0;do{const n=this.prerelease[i],s=e.prerelease[i];if(M0("prerelease compare",i,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return ah(n,s)}while(++i)}compareBuild(e){e instanceof Ra||(e=new Ra(e,this.options));let i=0;do{const n=this.build[i],s=e.build[i];if(M0("prerelease compare",i,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return ah(n,s)}while(++i)}inc(e,i,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",i,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",i,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",i,n),this.inc("pre",i,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",i,n),this.inc("pre",i,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);s===-1&&this.prerelease.push(0)}if(i){const s=Number(n)?1:0;ah(this.prerelease[0],i)===0?isNaN(this.prerelease[1])&&(this.prerelease=[i,s]):this.prerelease=[i,s]}break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}};var R3=hDe;const m8=R3,pDe=(t,e,i)=>new m8(t,i).compare(new m8(e,i));var $_=pDe;const _De=$_,yDe=(t,e,i)=>_De(t,e,i)===0;var gDe=yDe;const mDe=$_,wDe=(t,e,i)=>mDe(t,e,i)!==0;var bDe=wDe;const TDe=$_,vDe=(t,e,i)=>TDe(t,e,i)>0;var EDe=vDe;const SDe=$_,xDe=(t,e,i)=>SDe(t,e,i)>=0;var BDe=xDe;const IDe=$_,kDe=(t,e,i)=>IDe(t,e,i)<0;var FDe=kDe;const MDe=$_,ADe=(t,e,i)=>MDe(t,e,i)<=0;var ODe=ADe;const NDe=gDe,CDe=bDe,RDe=EDe,LDe=BDe,DDe=FDe,PDe=ODe,$De=(t,e,i,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof i=="object"&&(i=i.version),t===i;case"!==":return typeof t=="object"&&(t=t.version),typeof i=="object"&&(i=i.version),t!==i;case"":case"=":case"==":return NDe(t,i,n);case"!=":return CDe(t,i,n);case">":return RDe(t,i,n);case">=":return LDe(t,i,n);case"<":return DDe(t,i,n);case"<=":return PDe(t,i,n);default:throw new TypeError(`Invalid operator: ${e}`)}};var UDe=$De,_I,w8;function zDe(){if(w8)return _I;w8=1;const t=Symbol("SemVer ANY");class e{static get ANY(){return t}constructor(o,g){if(g=i(g),o instanceof e){if(o.loose===!!g.loose)return o;o=o.value}c("comparator",o,g),this.options=g,this.loose=!!g.loose,this.parse(o),this.semver===t?this.value="":this.value=this.operator+this.semver.version,c("comp",this)}parse(o){const g=this.options.loose?n[s.COMPARATORLOOSE]:n[s.COMPARATOR],w=o.match(g);if(!w)throw new TypeError(`Invalid comparator: ${o}`);this.operator=w[1]!==void 0?w[1]:"",this.operator==="="&&(this.operator=""),w[2]?this.semver=new d(w[2],this.options.loose):this.semver=t}toString(){return this.value}test(o){if(c("Comparator.test",o,this.options.loose),this.semver===t||o===t)return!0;if(typeof o=="string")try{o=new d(o,this.options)}catch{return!1}return a(o,this.operator,this.semver,this.options)}intersects(o,g){if(!(o instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new f(o.value,g).test(this.value):o.operator===""?o.value===""?!0:new f(this.value,g).test(o.semver):(g=i(g),g.includePrerelease&&(this.value==="<0.0.0-0"||o.value==="<0.0.0-0")||!g.includePrerelease&&(this.value.startsWith("<0.0.0")||o.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&o.operator.startsWith(">")||this.operator.startsWith("<")&&o.operator.startsWith("<")||this.semver.version===o.semver.version&&this.operator.includes("=")&&o.operator.includes("=")||a(this.semver,"<",o.semver,g)&&this.operator.startsWith(">")&&o.operator.startsWith("<")||a(this.semver,">",o.semver,g)&&this.operator.startsWith("<")&&o.operator.startsWith(">")))}}_I=e;const i=O3,{re:n,t:s}=C3,a=UDe,c=Tx,d=R3,f=EZ();return _I}var yI,b8;function EZ(){if(b8)return yI;b8=1;class t{constructor(W,V){if(V=n(V),W instanceof t)return W.loose===!!V.loose&&W.includePrerelease===!!V.includePrerelease?W:new t(W.raw,V);if(W instanceof s)return this.raw=W.value,this.set=[[W]],this.format(),this;if(this.options=V,this.loose=!!V.loose,this.includePrerelease=!!V.includePrerelease,this.raw=W,this.set=W.split("||").map(H=>this.parseRange(H.trim())).filter(H=>H.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${W}`);if(this.set.length>1){const H=this.set[0];if(this.set=this.set.filter(J=>!l(J[0])),this.set.length===0)this.set=[H];else if(this.set.length>1){for(const J of this.set)if(J.length===1&&T(J[0])){this.set=[J];break}}}this.format()}format(){return this.range=this.set.map(W=>W.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(W){W=W.trim();const H=((this.options.includePrerelease&&w)|(this.options.loose&&m))+":"+W,J=i.get(H);if(J)return J;const G=this.options.loose,le=G?d[f.HYPHENRANGELOOSE]:d[f.HYPHENRANGE];W=W.replace(le,U(this.options.includePrerelease)),a("hyphen replace",W),W=W.replace(d[f.COMPARATORTRIM],u),a("comparator trim",W),W=W.replace(d[f.TILDETRIM],o),W=W.replace(d[f.CARETTRIM],g),W=W.split(/\s+/).join(" ");let pe=W.split(" ").map(Fe=>S(Fe,this.options)).join(" ").split(/\s+/).map(Fe=>P(Fe,this.options));G&&(pe=pe.filter(Fe=>(a("loose invalid filter",Fe,this.options),!!Fe.match(d[f.COMPARATORLOOSE])))),a("range list",pe);const ne=new Map,Ae=pe.map(Fe=>new s(Fe,this.options));for(const Fe of Ae){if(l(Fe))return[Fe];ne.set(Fe.value,Fe)}ne.size>1&&ne.has("")&&ne.delete("");const fe=[...ne.values()];return i.set(H,fe),fe}intersects(W,V){if(!(W instanceof t))throw new TypeError("a Range is required");return this.set.some(H=>b(H,V)&&W.set.some(J=>b(J,V)&&H.every(G=>J.every(le=>G.intersects(le,V)))))}test(W){if(!W)return!1;if(typeof W=="string")try{W=new c(W,this.options)}catch{return!1}for(let V=0;V<this.set.length;V++)if(Y(this.set[V],W,this.options))return!0;return!1}}yI=t;const e=eDe,i=new e({max:1e3}),n=O3,s=zDe(),a=Tx,c=R3,{re:d,t:f,comparatorTrimReplace:u,tildeTrimReplace:o,caretTrimReplace:g}=C3,{FLAG_INCLUDE_PRERELEASE:w,FLAG_LOOSE:m}=N3,l=z=>z.value==="<0.0.0-0",T=z=>z.value==="",b=(z,W)=>{let V=!0;const H=z.slice();let J=H.pop();for(;V&&H.length;)V=H.every(G=>J.intersects(G,W)),J=H.pop();return V},S=(z,W)=>(a("comp",z,W),z=I(z,W),a("caret",z),z=B(z,W),a("tildes",z),z=O(z,W),a("xrange",z),z=D(z,W),a("stars",z),z),x=z=>!z||z.toLowerCase()==="x"||z==="*",B=(z,W)=>z.trim().split(/\s+/).map(V=>F(V,W)).join(" "),F=(z,W)=>{const V=W.loose?d[f.TILDELOOSE]:d[f.TILDE];return z.replace(V,(H,J,G,le,pe)=>{a("tilde",z,H,J,G,le,pe);let ne;return x(J)?ne="":x(G)?ne=`>=${J}.0.0 <${+J+1}.0.0-0`:x(le)?ne=`>=${J}.${G}.0 <${J}.${+G+1}.0-0`:pe?(a("replaceTilde pr",pe),ne=`>=${J}.${G}.${le}-${pe} <${J}.${+G+1}.0-0`):ne=`>=${J}.${G}.${le} <${J}.${+G+1}.0-0`,a("tilde return",ne),ne})},I=(z,W)=>z.trim().split(/\s+/).map(V=>A(V,W)).join(" "),A=(z,W)=>{a("caret",z,W);const V=W.loose?d[f.CARETLOOSE]:d[f.CARET],H=W.includePrerelease?"-0":"";return z.replace(V,(J,G,le,pe,ne)=>{a("caret",z,J,G,le,pe,ne);let Ae;return x(G)?Ae="":x(le)?Ae=`>=${G}.0.0${H} <${+G+1}.0.0-0`:x(pe)?G==="0"?Ae=`>=${G}.${le}.0${H} <${G}.${+le+1}.0-0`:Ae=`>=${G}.${le}.0${H} <${+G+1}.0.0-0`:ne?(a("replaceCaret pr",ne),G==="0"?le==="0"?Ae=`>=${G}.${le}.${pe}-${ne} <${G}.${le}.${+pe+1}-0`:Ae=`>=${G}.${le}.${pe}-${ne} <${G}.${+le+1}.0-0`:Ae=`>=${G}.${le}.${pe}-${ne} <${+G+1}.0.0-0`):(a("no pr"),G==="0"?le==="0"?Ae=`>=${G}.${le}.${pe}${H} <${G}.${le}.${+pe+1}-0`:Ae=`>=${G}.${le}.${pe}${H} <${G}.${+le+1}.0-0`:Ae=`>=${G}.${le}.${pe} <${+G+1}.0.0-0`),a("caret return",Ae),Ae})},O=(z,W)=>(a("replaceXRanges",z,W),z.split(/\s+/).map(V=>R(V,W)).join(" ")),R=(z,W)=>{z=z.trim();const V=W.loose?d[f.XRANGELOOSE]:d[f.XRANGE];return z.replace(V,(H,J,G,le,pe,ne)=>{a("xRange",z,H,J,G,le,pe,ne);const Ae=x(G),fe=Ae||x(le),Fe=fe||x(pe),je=Fe;return J==="="&&je&&(J=""),ne=W.includePrerelease?"-0":"",Ae?J===">"||J==="<"?H="<0.0.0-0":H="*":J&&je?(fe&&(le=0),pe=0,J===">"?(J=">=",fe?(G=+G+1,le=0,pe=0):(le=+le+1,pe=0)):J==="<="&&(J="<",fe?G=+G+1:le=+le+1),J==="<"&&(ne="-0"),H=`${J+G}.${le}.${pe}${ne}`):fe?H=`>=${G}.0.0${ne} <${+G+1}.0.0-0`:Fe&&(H=`>=${G}.${le}.0${ne} <${G}.${+le+1}.0-0`),a("xRange return",H),H})},D=(z,W)=>(a("replaceStars",z,W),z.trim().replace(d[f.STAR],"")),P=(z,W)=>(a("replaceGTE0",z,W),z.trim().replace(d[W.includePrerelease?f.GTE0PRE:f.GTE0],"")),U=z=>(W,V,H,J,G,le,pe,ne,Ae,fe,Fe,je,_t)=>(x(H)?V="":x(J)?V=`>=${H}.0.0${z?"-0":""}`:x(G)?V=`>=${H}.${J}.0${z?"-0":""}`:le?V=`>=${V}`:V=`>=${V}${z?"-0":""}`,x(Ae)?ne="":x(fe)?ne=`<${+Ae+1}.0.0-0`:x(Fe)?ne=`<${Ae}.${+fe+1}.0-0`:je?ne=`<=${Ae}.${fe}.${Fe}-${je}`:z?ne=`<${Ae}.${fe}.${+Fe+1}-0`:ne=`<=${ne}`,`${V} ${ne}`.trim()),Y=(z,W,V)=>{for(let H=0;H<z.length;H++)if(!z[H].test(W))return!1;if(W.prerelease.length&&!V.includePrerelease){for(let H=0;H<z.length;H++)if(a(z[H].semver),z[H].semver!==s.ANY&&z[H].semver.prerelease.length>0){const J=z[H].semver;if(J.major===W.major&&J.minor===W.minor&&J.patch===W.patch)return!0}return!1}return!0};return yI}const jDe=EZ(),qDe=(t,e,i)=>{try{e=new jDe(e,i)}catch{return!1}return e.test(t)};var GDe=qDe,SZ=VLe(GDe);function VDe(t,e,i){const n=t.open(e),s=1e4,a=250,{origin:c}=new URL(e);let d=~~(s/a);function f(o){o.source===n&&(d=0,t.removeEventListener("message",f,!1))}t.addEventListener("message",f,!1);function u(){d<=0||(n.postMessage(i,c),setTimeout(u,a),d-=1)}setTimeout(u,a)}var WDe=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function xZ(t,...e){for(const i of e)HDe(t,i);return t}function HDe(t,e){for(const i of Object.keys(e))v_(t,i,e[i],!0)}function T8(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),i.push.apply(i,n)}return i}function Lc(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?T8(Object(i),!0).forEach(function(n){GLe(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):T8(Object(i)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}const jr=Ike;let pm=N3e;const O0=typeof window<"u"?window:void 0;var F8;pm===void 0&&((F8=O0==null?void 0:O0.vl)!=null&&F8.compile)&&(pm=O0.vl);const YDe={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},XDe={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},Ky={vega:"Vega","vega-lite":"Vega-Lite"},Qv={vega:jr.version,"vega-lite":pm?pm.version:"not available"},KDe={vega:t=>t,"vega-lite":(t,e)=>pm.compile(t,{config:e}).spec},JDe=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,QDe="chart-wrapper";function ZDe(t){return typeof t=="function"}function v8(t,e,i,n){const s=`<html><head>${e}</head><body><pre><code class="json">`,a=`</code></pre>${i}</body></html>`,c=window.open("");c.document.write(s+t+a),c.document.title=`${Ky[n]} JSON Source`}function ePe(t,e){if(t.$schema){const i=gZ(t.$schema);e&&e!==i.library&&console.warn(`The given visualization spec is written in ${Ky[i.library]}, but mode argument sets ${Ky[e]??e}.`);const n=i.library;return SZ(Qv[n],`^${i.version.slice(1)}`)||console.warn(`The input spec uses ${Ky[n]} ${i.version}, but the current version of ${Ky[n]} is v${Qv[n]}.`),n}return"mark"in t||"encoding"in t||"layer"in t||"hconcat"in t||"vconcat"in t||"facet"in t||"repeat"in t?"vega-lite":"marks"in t||"signals"in t||"scales"in t||"axes"in t?"vega":e??"vega"}function tPe(t){return!!(t&&"load"in t)}function E8(t){return tPe(t)?t:jr.loader(t)}function iPe(t){var i;const e=((i=t.usermeta)==null?void 0:i.embedOptions)??{};return Ie(e.defaultStyle)&&(e.defaultStyle=!1),e}async function nPe(t,e,i={}){let n,s;Ie(e)?(s=E8(i.loader),n=JSON.parse(await s.load(e))):n=e;const a=iPe(n),c=a.loader;(!s||c)&&(s=E8(i.loader??c));const d=await S8(a,s),f=await S8(i,s),u=Lc(Lc({},xZ(f,d)),{},{config:T_(f.config??{},d.config??{})});return await rPe(t,n,u,s)}async function S8(t,e){const i=Ie(t.config)?JSON.parse(await e.load(t.config)):t.config??{},n=Ie(t.patch)?JSON.parse(await e.load(t.patch)):t.patch;return Lc(Lc(Lc({},t),n?{patch:n}:{}),i?{config:i}:{})}function sPe(t){const e=t.getRootNode?t.getRootNode():document;return e instanceof ShadowRoot?{root:e,rootContainer:e}:{root:document,rootContainer:document.head??document.body}}async function rPe(t,e,i={},n){const s=i.theme?T_(ILe[i.theme],i.config??{}):i.config,a=vd(i.actions)?i.actions:xZ({},YDe,i.actions??{}),c=Lc(Lc({},XDe),i.i18n),d=i.renderer??"canvas",f=i.logLevel??jr.Warn,u=i.downloadFileName??"visualization",o=typeof t=="string"?document.querySelector(t):t;if(!o)throw new Error(`${t} does not exist`);if(i.defaultStyle!==!1){const I="vega-embed-style",{root:A,rootContainer:O}=sPe(o);if(!A.getElementById(I)){const R=document.createElement("style");R.id=I,R.innerHTML=i.defaultStyle===void 0||i.defaultStyle===!0?WDe.toString():i.defaultStyle,O.appendChild(R)}}const g=ePe(e,i.mode);let w=KDe[g](e,s);if(g==="vega-lite"&&w.$schema){const I=gZ(w.$schema);SZ(Qv.vega,`^${I.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${I.version}, but current version is v${Qv.vega}.`)}o.classList.add("vega-embed"),a&&o.classList.add("has-actions"),o.innerHTML="";let m=o;if(a){const I=document.createElement("div");I.classList.add(QDe),o.appendChild(I),m=I}const l=i.patch;if(l&&(w=l instanceof Function?l(w):VE(w,l,!0,!1).newDocument),i.formatLocale&&jr.formatLocale(i.formatLocale),i.timeFormatLocale&&jr.timeFormatLocale(i.timeFormatLocale),i.expressionFunctions)for(const I in i.expressionFunctions){const A=i.expressionFunctions[I];"fn"in A?jr.expressionFunction(I,A.fn,A.visitor):A instanceof Function&&jr.expressionFunction(I,A)}const{ast:T}=i,b=jr.parse(w,g==="vega-lite"?{}:s,{ast:T}),S=new(i.viewClass||jr.View)(b,Lc({loader:n,logLevel:f,renderer:d},T?{expr:jr.expressionInterpreter??i.expr??Dke}:{}));if(S.addSignalListener("autosize",(I,A)=>{const{type:O}=A;O=="fit-x"?(m.classList.add("fit-x"),m.classList.remove("fit-y")):O=="fit-y"?(m.classList.remove("fit-x"),m.classList.add("fit-y")):O=="fit"?m.classList.add("fit-x","fit-y"):m.classList.remove("fit-x","fit-y")}),i.tooltip!==!1){const I=ZDe(i.tooltip)?i.tooltip:new zLe(i.tooltip===!0?{}:i.tooltip).call;S.tooltip(I)}let{hover:x}=i;if(x===void 0&&(x=g==="vega"),x){const{hoverSet:I,updateSet:A}=typeof x=="boolean"?{}:x;S.hover(I,A)}i&&(i.width!=null&&S.width(i.width),i.height!=null&&S.height(i.height),i.padding!=null&&S.padding(i.padding)),await S.initialize(m,i.bind).runAsync();let B;if(a!==!1){let I=o;if(i.defaultStyle!==!1){const O=document.createElement("details");O.title=c.CLICK_TO_VIEW_ACTIONS,o.append(O),I=O;const R=document.createElement("summary");R.innerHTML=JDe,O.append(R),B=D=>{O.contains(D.target)||O.removeAttribute("open")},document.addEventListener("click",B)}const A=document.createElement("div");if(I.append(A),A.classList.add("vega-actions"),a===!0||a.export!==!1){for(const O of["svg","png"])if(a===!0||a.export===!0||a.export[O]){const R=c[`${O.toUpperCase()}_ACTION`],D=document.createElement("a"),P=Me(i.scaleFactor)?i.scaleFactor[O]:i.scaleFactor;D.text=R,D.href="#",D.target="_blank",D.download=`${u}.${O}`,D.addEventListener("mousedown",async function(U){U.preventDefault();const Y=await S.toImageURL(O,P);this.href=Y}),A.append(D)}}if(a===!0||a.source!==!1){const O=document.createElement("a");O.text=c.SOURCE_ACTION,O.href="#",O.addEventListener("click",function(R){v8(wB(e),i.sourceHeader??"",i.sourceFooter??"",g),R.preventDefault()}),A.append(O)}if(g==="vega-lite"&&(a===!0||a.compiled!==!1)){const O=document.createElement("a");O.text=c.COMPILED_ACTION,O.href="#",O.addEventListener("click",function(R){v8(wB(w),i.sourceHeader??"",i.sourceFooter??"","vega"),R.preventDefault()}),A.append(O)}if(a===!0||a.editor!==!1){const O=i.editorUrl??"https://vega.github.io/editor/",R=document.createElement("a");R.text=c.EDITOR_ACTION,R.href="#",R.addEventListener("click",function(D){VDe(window,O,{config:s,mode:g,renderer:d,spec:wB(e)}),D.preventDefault()}),A.append(R)}}function F(){B&&document.removeEventListener("click",B),S.finalize()}return{view:S,spec:e,vgSpec:w,finalize:F,embedOptions:i}}const aPe=new Set(["width","height"]);function oPe(t,e){for(const[i,n]of Object.entries(e))n&&(n&&{}.toString.call(n)==="[object Function]"?n(t.data(i)):t.change(i,jr.changeset().remove(()=>!0).insert(n)))}function N0(t={},e={},i=new Set){const n=Object.keys(t),s=Object.keys(e);return t===e||n.length===s.length&&n.filter(a=>!i.has(a)).every(a=>t[a]===e[a])}function x8(t,e){const i=Object.keys(e);for(const n of i)try{t.removeSignalListener(n,e[n])}catch(s){console.warn("Cannot remove invalid signal listener.",s)}return i.length>0}function gI(t,e){const i=Object.keys(e);for(const n of i)try{t.addSignalListener(n,e[n])}catch(s){console.warn("Cannot add invalid signal listener.",s)}return i.length>0}function lPe(t){return new Set(t.flatMap(e=>Object.keys(e)))}function cPe(t,e){if(t===e)return!1;const i={width:!1,height:!1,isExpensive:!1},n="width"in t||"width"in e,s="height"in t||"height"in e;return n&&(!("width"in t)||!("width"in e)||t.width!==e.width)&&("width"in t&&typeof t.width=="number"?i.width=t.width:i.isExpensive=!0),s&&(!("height"in t)||!("height"in e)||t.height!==e.height)&&("height"in t&&typeof t.height=="number"?i.height=t.height:i.isExpensive=!0),[...lPe([t,e])].filter(c=>c!=="width"&&c!=="height").some(c=>!(c in t)||!(c in e)||!iK(t[c],e[c]))&&(i.isExpensive=!0),i.width!==!1||i.height!==!1||i.isExpensive?i:!1}function B8(t,e){const{width:i,height:n}=e;return typeof i<"u"&&typeof n<"u"?{...t,width:i,height:n}:typeof i<"u"?{...t,width:i}:typeof n<"u"?{...t,height:n}:t}function dPe(t){let e;return{c(){e=Gs("div")},m(i,n){_m(i,e,n),t[11](e)},p:Uh,i:Uh,o:Uh,d(i){i&&d_(e),t[11](null)}}}function fPe(t,e,i){let{options:n}=e,{spec:s}=e,{view:a}=e,{signalListeners:c={}}=e,{data:d={}}=e;const f=u2();let u,o={},g={},w={},m={},l;DZ(()=>{b()});async function T(){b();try{i(6,u=await nPe(l,s,n)),i(1,a=u.view),gI(a,c)&&a.runAsync(),x(a)}catch(I){S(I)}}function b(){u&&(u.finalize(),i(6,u=void 0),i(1,a=void 0))}function S(I){f("onError",{error:I}),console.warn(I)}function x(I){B(),f("onNewView",{view:I})}async function B(){d&&Object.keys(d).length>0&&u!==void 0&&(i(1,a=u.view),oPe(a,d),await a.resize().runAsync())}function F(I){fp[I?"unshift":"push"](()=>{l=I,i(0,l)})}return t.$$set=I=>{"options"in I&&i(2,n=I.options),"spec"in I&&i(3,s=I.spec),"view"in I&&i(1,a=I.view),"signalListeners"in I&&i(4,c=I.signalListeners),"data"in I&&i(5,d=I.data)},t.$$.update=()=>{if(t.$$.dirty&1056&&(N0(d,m)||B(),i(10,m=d)),t.$$.dirty&991&&l!==void 0){if(!N0(n,o,aPe))T();else{const I=cPe(B8(s,n),B8(w,o)),A=c,O=g;if(I){if(I.isExpensive)T();else if(u!==void 0){const R=!N0(A,O);i(1,a=u.view),I.width!==!1&&a.width(I.width),I.height!==!1&&a.height(I.height),R&&(O&&x8(a,O),A&&gI(a,A)),a.runAsync()}}else!N0(A,O)&&u!==void 0&&(i(1,a=u.view),O&&x8(a,O),A&&gI(a,A),a.runAsync())}i(7,o=n),i(8,g=c),i(9,w=s)}},[l,a,n,s,c,d,u,o,g,w,m,F]}class uPe extends Tu{constructor(e){super(),bu(this,e,fPe,dPe,gu,{options:2,spec:3,view:1,signalListeners:4,data:5})}}function hPe(t){let e,i,n;function s(c){t[6](c)}let a={spec:t[1],data:t[2],signalListeners:t[3],options:t[4]};return t[0]!==void 0&&(a.view=t[0]),e=new uPe({props:a}),fp.push(()=>p2(e,"view",s)),e.$on("onNewView",t[7]),e.$on("onError",t[8]),{c(){f_(e.$$.fragment)},m(c,d){mu(e,c,d),n=!0},p(c,[d]){const f={};d&2&&(f.spec=c[1]),d&4&&(f.data=c[2]),d&8&&(f.signalListeners=c[3]),d&16&&(f.options=c[4]),!i&&d&1&&(i=!0,f.view=c[0],h2(()=>i=!1)),e.$set(f)},i(c){n||(ao(e.$$.fragment,c),n=!0)},o(c){Dc(e.$$.fragment,c),n=!1},d(c){wu(e,c)}}}const pPe="vega-lite";function _Pe(t,e,i){let n,{spec:s}=e,{options:a={}}=e,{data:c={}}=e,{signalListeners:d={}}=e,{view:f=void 0}=e;function u(w){f=w,i(0,f)}function o(w){Tr.call(this,t,w)}function g(w){Tr.call(this,t,w)}return t.$$set=w=>{"spec"in w&&i(1,s=w.spec),"options"in w&&i(5,a=w.options),"data"in w&&i(2,c=w.data),"signalListeners"in w&&i(3,d=w.signalListeners),"view"in w&&i(0,f=w.view)},t.$$.update=()=>{t.$$.dirty&32&&i(4,n={...a,mode:pPe})},[f,s,c,d,n,a,u,o,g]}class BZ extends Tu{constructor(e){super(),bu(this,e,_Pe,hPe,gu,{spec:1,options:5,data:2,signalListeners:3,view:0})}}function yPe(t){let e,i,n,s,a,c;function d(u){t[17](u)}let f={data:t[2],spec:t[1],options:{tooltip:!0,actions:!1,theme:"vox"}};return t[0]!==void 0&&(f.view=t[0]),i=new BZ({props:f}),fp.push(()=>p2(i,"view",d)),{c(){e=Gs("div"),f_(i.$$.fragment),$a(e,"class","container svelte-mufgje")},m(u,o){_m(u,e,o),mu(i,e,null),s=!0,a||(c=[BT(e,"mouseenter",t[15]),BT(e,"mouseleave",t[16])],a=!0)},p(u,[o]){const g={};o&4&&(g.data=u[2]),o&2&&(g.spec=u[1]),!n&&o&1&&(n=!0,g.view=u[0],h2(()=>n=!1)),i.$set(g)},i(u){s||(ao(i.$$.fragment,u),s=!0)},o(u){Dc(i.$$.fragment,u),s=!1},d(u){u&&d_(e),wu(i),a=!1,yu(c)}}}function gPe(t,e,i){let n,s;const a=u2();let{bins:c=[{bin:"chicken",count:200,filteredCount:150},{bin:"dog",count:300,filteredCount:25}]}=e,{title:d=""}=e,{width:f=400}=e,{height:u=125}=e,{countLabel:o="Count"}=e,{dimLabel:g=""}=e,{labelColor:w="hsla(0, 0%, 100%, 0.9)"}=e,{backgroundBarColor:m="hsla(0, 0%, 100%, 0.5)"}=e,{foregroundBarColor:l="hsla(172, 97%, 45%, 0.95)"}=e,{backgroundColor:T="hsl(240,23%,9%)"}=e,{onlyFiltered:b=!1}=e,S,x=!1;function B(A){Tr.call(this,t,A)}function F(A){Tr.call(this,t,A)}function I(A){S=A,i(0,S)}return t.$$set=A=>{"bins"in A&&i(3,c=A.bins),"title"in A&&i(4,d=A.title),"width"in A&&i(5,f=A.width),"height"in A&&i(6,u=A.height),"countLabel"in A&&i(7,o=A.countLabel),"dimLabel"in A&&i(8,g=A.dimLabel),"labelColor"in A&&i(9,w=A.labelColor),"backgroundBarColor"in A&&i(10,m=A.backgroundBarColor),"foregroundBarColor"in A&&i(11,l=A.foregroundBarColor),"backgroundColor"in A&&i(12,T=A.backgroundColor),"onlyFiltered"in A&&i(13,b=A.onlyFiltered)},t.$$.update=()=>{t.$$.dirty&8&&i(2,n={table:c}),t.$$.dirty&16368&&i(1,s={$schema:"https://vega.github.io/schema/vega-lite/v5.json",description:"A categorical bar chart",data:{name:"table"},background:T,width:f,height:u,title:d,layer:[{params:[{name:"select",select:{type:"point",encodings:["x"]}}],mark:{type:"bar",cursor:"pointer"},encoding:{x:{field:"bin",axis:{title:g,titleColor:w,labelColor:w}},y:{field:b?"filteredCount":"count",type:"quantitative",axis:{title:o,titleColor:w,labelColor:w,tickCount:3}},color:{value:m},stroke:{condition:[{param:"select",empty:!1,value:w}],value:"transparent"},strokeWidth:{condition:[{param:"select",empty:!1,value:3}],value:0}},color:{value:l}},{mark:{type:"bar"},encoding:{size:{legend:null},x:{field:"bin",title:""},y:{field:"filteredCount",type:"quantitative",title:""},color:{value:l}}}]}),t.$$.dirty&16385&&S&&!x&&(S.addSignalListener("select",(...A)=>{let O;A[1]&&"bin"in A[1]?O=A[1].bin:O=null,a("select",O)}),i(14,x=!0))},[S,s,n,c,d,f,u,o,g,w,m,l,T,b,x,B,F,I]}class mPe extends Tu{constructor(e){super(),bu(this,e,gPe,yPe,gu,{bins:3,title:4,width:5,height:6,countLabel:7,dimLabel:8,labelColor:9,backgroundBarColor:10,foregroundBarColor:11,backgroundColor:12,onlyFiltered:13})}}function wPe(t){let e,i;return e=new mPe({props:{bins:t[10],title:t[0],width:t[1],height:t[2],countLabel:t[3],dimLabel:t[4],labelColor:t[5],backgroundBarColor:t[6],foregroundBarColor:t[7],backgroundColor:t[8],onlyFiltered:t[9]}}),e.$on("mouseenter",t[12]),e.$on("mouseleave",t[13]),e.$on("select",t[14]),{c(){f_(e.$$.fragment)},m(n,s){mu(e,n,s),i=!0},p(n,[s]){const a={};s&1024&&(a.bins=n[10]),s&1&&(a.title=n[0]),s&2&&(a.width=n[1]),s&4&&(a.height=n[2]),s&8&&(a.countLabel=n[3]),s&16&&(a.dimLabel=n[4]),s&32&&(a.labelColor=n[5]),s&64&&(a.backgroundBarColor=n[6]),s&128&&(a.foregroundBarColor=n[7]),s&256&&(a.backgroundColor=n[8]),s&512&&(a.onlyFiltered=n[9]),e.$set(a)},i(n){i||(ao(e.$$.fragment,n),i=!0)},o(n){Dc(e.$$.fragment,n),i=!1},d(n){wu(e,n)}}}function bPe(t,e,i){let n,{state:s}=e,{title:a=""}=e,{width:c=400}=e,{height:d=125}=e,{countLabel:f="Count"}=e,{dimLabel:u=""}=e,{labelColor:o="hsla(0, 0%, 100%, 0.9)"}=e,{backgroundBarColor:g="hsla(0, 0%, 100%, 0.5)"}=e,{foregroundBarColor:w="hsla(172, 97%, 45%, 0.95)"}=e,{backgroundColor:m="hsl(240,23%,9%)"}=e,{onlyFiltered:l=!1}=e;function T(x){Tr.call(this,t,x)}function b(x){Tr.call(this,t,x)}function S(x){Tr.call(this,t,x)}return t.$$set=x=>{"state"in x&&i(11,s=x.state),"title"in x&&i(0,a=x.title),"width"in x&&i(1,c=x.width),"height"in x&&i(2,d=x.height),"countLabel"in x&&i(3,f=x.countLabel),"dimLabel"in x&&i(4,u=x.dimLabel),"labelColor"in x&&i(5,o=x.labelColor),"backgroundBarColor"in x&&i(6,g=x.backgroundBarColor),"foregroundBarColor"in x&&i(7,w=x.foregroundBarColor),"backgroundColor"in x&&i(8,m=x.backgroundColor),"onlyFiltered"in x&&i(9,l=x.onlyFiltered)},t.$$.update=()=>{var x;t.$$.dirty&2048&&i(10,n=((x=s==null?void 0:s.bin)==null?void 0:x.filter(B=>B!==null).map((B,F)=>({bin:B,count:s.total[F],filteredCount:s.filter[F]})))??[])},[a,c,d,f,u,o,g,w,m,l,n,s,T,b,S]}class TPe extends Tu{constructor(e){super(),bu(this,e,bPe,wPe,gu,{state:11,title:0,width:1,height:2,countLabel:3,dimLabel:4,labelColor:5,backgroundBarColor:6,foregroundBarColor:7,backgroundColor:8,onlyFiltered:9})}}function vPe(t){let e,i,n,s,a,c;function d(u){t[18](u)}let f={data:t[2],spec:t[1],options:{tooltip:!0,actions:!1,theme:"vox"}};return t[0]!==void 0&&(f.view=t[0]),i=new BZ({props:f}),fp.push(()=>p2(i,"view",d)),{c(){e=Gs("div"),f_(i.$$.fragment),$a(e,"class","container svelte-mufgje")},m(u,o){_m(u,e,o),mu(i,e,null),s=!0,a||(c=[BT(e,"mouseenter",t[16]),BT(e,"mouseleave",t[17])],a=!0)},p(u,[o]){const g={};o&4&&(g.data=u[2]),o&2&&(g.spec=u[1]),!n&&o&1&&(n=!0,g.view=u[0],h2(()=>n=!1)),i.$set(g)},i(u){s||(ao(i.$$.fragment,u),s=!0)},o(u){Dc(i.$$.fragment,u),s=!1},d(u){u&&d_(e),wu(i),a=!1,yu(c)}}}function EPe(t,e,i){let n,s;const a=u2();let{bins:c=[{bin:[0,10],count:200,filteredCount:150},{bin:[10,20],count:300,filteredCount:25},{bin:[20,30],count:72,filteredCount:12}]}=e,{title:d=""}=e,{width:f=400}=e,{height:u=125}=e,{countLabel:o="Count"}=e,{dimLabel:g=""}=e,{labelColor:w="hsla(0, 0%, 100%, 0.9)"}=e,{backgroundBarColor:m="hsla(0, 0%, 100%, 0.5)"}=e,{foregroundBarColor:l="hsla(172, 97%, 45%, 0.95)"}=e,{backgroundColor:T="hsl(240,23%,9%)"}=e,{onlyFiltered:b=!1}=e,{type:S="quantitative"}=e,x,B=!1;function F(O){Tr.call(this,t,O)}function I(O){Tr.call(this,t,O)}function A(O){x=O,i(0,x)}return t.$$set=O=>{"bins"in O&&i(3,c=O.bins),"title"in O&&i(4,d=O.title),"width"in O&&i(5,f=O.width),"height"in O&&i(6,u=O.height),"countLabel"in O&&i(7,o=O.countLabel),"dimLabel"in O&&i(8,g=O.dimLabel),"labelColor"in O&&i(9,w=O.labelColor),"backgroundBarColor"in O&&i(10,m=O.backgroundBarColor),"foregroundBarColor"in O&&i(11,l=O.foregroundBarColor),"backgroundColor"in O&&i(12,T=O.backgroundColor),"onlyFiltered"in O&&i(13,b=O.onlyFiltered),"type"in O&&i(14,S=O.type)},t.$$.update=()=>{t.$$.dirty&8&&i(2,n={table:c}),t.$$.dirty&32752&&i(1,s={$schema:"https://vega.github.io/schema/vega-lite/v5.json",description:"A simple bar chart with embedded data.",data:{name:"table"},background:T,width:f,height:u,title:d,layer:[{params:[{name:"select",select:{type:"interval",encodings:["x"]}}],mark:{type:"bar",cursor:"col-resize"},encoding:{x:{field:"bin[0]",bin:{binned:!0},type:S,axis:{title:g,titleColor:w,labelColor:w}},x2:{field:"bin[1]"},y:{field:b?"filteredCount":"count",type:"quantitative",axis:{title:o,titleColor:w,tickCount:3,labelColor:w}},color:{value:m}}},{mark:{type:"bar"},encoding:{size:{legend:null},x:{field:"bin[0]",type:S,bin:{binned:!0},title:""},x2:{field:"bin[1]"},y:{field:"filteredCount",type:"quantitative"},color:{value:l}}}]}),t.$$.dirty&32769&&x&&!B&&(x.addSignalListener("select",(...O)=>{a("select",O[1]["bin\\.0"]??null)}),i(15,B=!0))},[x,s,n,c,d,f,u,o,g,w,m,l,T,b,S,B,F,I,A]}class SPe extends Tu{constructor(e){super(),bu(this,e,EPe,vPe,gu,{bins:3,title:4,width:5,height:6,countLabel:7,dimLabel:8,labelColor:9,backgroundBarColor:10,foregroundBarColor:11,backgroundColor:12,onlyFiltered:13,type:14})}}function xPe(t){let e,i;return e=new SPe({props:{bins:t[7],title:t[0],width:t[1],height:t[2],countLabel:t[3],dimLabel:t[4],onlyFiltered:t[5],type:t[6]}}),e.$on("select",t[9]),e.$on("mouseenter",t[10]),e.$on("mouseleave",t[11]),{c(){f_(e.$$.fragment)},m(n,s){mu(e,n,s),i=!0},p(n,[s]){const a={};s&128&&(a.bins=n[7]),s&1&&(a.title=n[0]),s&2&&(a.width=n[1]),s&4&&(a.height=n[2]),s&8&&(a.countLabel=n[3]),s&16&&(a.dimLabel=n[4]),s&32&&(a.onlyFiltered=n[5]),s&64&&(a.type=n[6]),e.$set(a)},i(n){i||(ao(e.$$.fragment,n),i=!0)},o(n){Dc(e.$$.fragment,n),i=!1},d(n){wu(e,n)}}}function BPe(t){let e=[];if(t)for(let i=0;i<t.bin.length;i++)e.push({bin:[t.bin[i].binStart,t.bin[i].binEnd],count:t.total[i],filteredCount:t.filter[i]});return e}function IPe(t,e,i){let n,{state:s}=e,{title:a=""}=e,{width:c=400}=e,{height:d=125}=e,{countLabel:f="Count"}=e,{dimLabel:u=""}=e,{onlyFiltered:o=!1}=e,{type:g="quantitative"}=e;function w(T){Tr.call(this,t,T)}function m(T){Tr.call(this,t,T)}function l(T){Tr.call(this,t,T)}return t.$$set=T=>{"state"in T&&i(8,s=T.state),"title"in T&&i(0,a=T.title),"width"in T&&i(1,c=T.width),"height"in T&&i(2,d=T.height),"countLabel"in T&&i(3,f=T.countLabel),"dimLabel"in T&&i(4,u=T.dimLabel),"onlyFiltered"in T&&i(5,o=T.onlyFiltered),"type"in T&&i(6,g=T.type)},t.$$.update=()=>{t.$$.dirty&256&&i(7,n=BPe(s))},[a,c,d,f,u,o,g,n,s,w,m,l]}class kPe extends Tu{constructor(e){super(),bu(this,e,IPe,xPe,gu,{state:8,title:0,width:1,height:2,countLabel:3,dimLabel:4,onlyFiltered:5,type:6})}}function I8(t,e,i){const n=t.slice();n[8]=e[i],n[12]=i;const s=n[2][n[12]];n[9]=s;const a=n[8].dimension.type==="continuous"?kPe:TPe;return n[10]=a,n}function k8(t){let e,i,n,s;function a(...d){return t[3](t[8],...d)}function c(){return t[4](t[8])}return i=new t[10]({props:{type:"time"in t[8].dimension?"temporal":"quantitative",state:t[9],dimLabel:t[8].dimension.name.replaceAll("_"," ")}}),i.$on("select",a),i.$on("mouseenter",c),{c(){e=Gs("div"),f_(i.$$.fragment),n=oh(),$a(e,"class","hist-baby")},m(d,f){_m(d,e,f),mu(i,e,null),zn(e,n),s=!0},p(d,f){t=d;const u={};f&2&&(u.type="time"in t[8].dimension?"temporal":"quantitative"),f&4&&(u.state=t[9]),f&2&&(u.dimLabel=t[8].dimension.name.replaceAll("_"," ")),i.$set(u)},i(d){s||(ao(i.$$.fragment,d),s=!0)},o(d){Dc(i.$$.fragment,d),s=!1},d(d){d&&d_(e),wu(i)}}}function FPe(t){var I;let e,i,n,s,a,c,d,f,u,o,g,w,m=((I=t[0])==null?void 0:I.filter.toLocaleString())+"",l,T,b,S,x=t[1],B=[];for(let A=0;A<x.length;A+=1)B[A]=k8(I8(t,x,A));const F=A=>Dc(B[A],1,1,()=>{B[A]=null});return{c(){e=Gs("main"),i=Gs("div"),n=Gs("a"),n.innerHTML='<img src="https://user-images.githubusercontent.com/65095341/224896033-afc8bd8e-d0e0-4031-a7b2-3857bef51327.svg" alt="falcon" width="400px"/>',s=oh(),a=Gs("h3"),a.innerHTML=`<a href="https://github.com/cmudig/falcon" target="_blank" class="svelte-ox9rfp">FalconVis</a>
			cross-filtering with
			<a href="https://vega.github.io/vega-lite/" class="svelte-ox9rfp">Vega Lite</a>
			to explore the
			<a href="https://github.com/vega/vega-datasets/blob/main/data/movies.json" target="_blank" class="svelte-ox9rfp">movies</a> dataset.`,c=oh(),d=Gs("details"),d.innerHTML=`<summary class="svelte-ox9rfp">Instructions</summary> 

			<div class="description"><img src="demo-movies.gif" alt="demo"/></div> 

			<div class="description">Filter a categorical chart by <kbd class="svelte-ox9rfp">click</kbd>ing on a bar or
				selecting multiple by <kbd class="svelte-ox9rfp">shift</kbd> + <kbd class="svelte-ox9rfp">click</kbd>ing.</div> 
			<div class="description">Filter a continuous chart by <kbd class="svelte-ox9rfp">dragging</kbd> across a range
				and by
				<kbd class="svelte-ox9rfp">dragging</kbd> the window around.</div> 
			<div class="description">Reset a filter by <kbd class="svelte-ox9rfp">click</kbd>ing outside the selection.</div>`,f=oh(),u=Gs("h3"),o=Gs("span"),o.textContent="selected",g=oh(),w=Gs("code"),l=O8(m),T=oh(),b=Gs("div");for(let A=0;A<B.length;A+=1)B[A].c();$a(n,"href","https://github.com/cmudig/falcon"),$a(n,"target","_blank"),$a(n,"class","svelte-ox9rfp"),$a(a,"class","description svelte-ox9rfp"),eD(o,"font-weight","250"),eD(w,"color","var(--primary-color)"),$a(w,"class","svelte-ox9rfp"),$a(u,"class","svelte-ox9rfp"),$a(b,"class","hist svelte-ox9rfp")},m(A,O){_m(A,e,O),zn(e,i),zn(i,n),zn(i,s),zn(i,a),zn(i,c),zn(i,d),zn(i,f),zn(i,u),zn(u,o),zn(u,g),zn(u,w),zn(w,l),zn(e,T),zn(e,b);for(let R=0;R<B.length;R+=1)B[R]&&B[R].m(b,null);S=!0},p(A,[O]){var R;if((!S||O&1)&&m!==(m=((R=A[0])==null?void 0:R.filter.toLocaleString())+"")&&CZ(l,m),O&6){x=A[1];let D;for(D=0;D<x.length;D+=1){const P=I8(A,x,D);B[D]?(B[D].p(P,O),ao(B[D],1)):(B[D]=k8(P),B[D].c(),ao(B[D],1),B[D].m(b,null))}for(jZ(),D=x.length;D<B.length;D+=1)F(D);qZ()}},i(A){if(!S){for(let O=0;O<x.length;O+=1)ao(B[O]);S=!0}},o(A){B=B.filter(Boolean);for(let O=0;O<B.length;O+=1)Dc(B[O]);S=!1},d(A){A&&d_(e),OZ(B,A)}}}function MPe(t,e,i){console.warn=()=>{};let n,s,a=[],c=[];LZ(async()=>{await d()});async function d(){const o=await lO.fromParquetFile("movies-3k.parquet");n=new $pe(o);const g=await n.view0D(),w=await n.view1D({type:"categorical",name:"MPAA_Rating"}),m=await n.view1D({type:"continuous",name:"US_Gross",resolution:400,bins:20}),l=await n.view1D({type:"continuous",name:"Worldwide_Gross",resolution:400,bins:20}),T=await n.view1D({type:"continuous",name:"Rotten_Tomatoes_Rating",resolution:400,bins:20}),b=await n.view1D({type:"continuous",name:"IMDB_Rating",resolution:400,bins:20}),S=await n.view1D({type:"continuous",name:"Release_Date",resolution:400,bins:20,time:!0}),x=await n.view1D({type:"continuous",name:"Production_Budget",resolution:400,bins:20}),B=await n.view1D({type:"continuous",name:"Running_Time_min",resolution:400,bins:20}),F=await n.view1D({type:"categorical",name:"Major_Genre",range:["Action","Adventure","Comedy","Drama","Documentary","Horror","Musical","Romantic Comedy","Thriller/Suspense","Western"]}),I=await n.view1D({type:"categorical",name:"Distributor",range:["20th Century Fox","Dreamworks SKG","Focus Features","Fox Searchlight","Lionsgate","MGM","Miramax","New Line","Paramount Pictures","Sony Pictures","Sony Pictures Classics","Universal","Walt Disney Pictures","Warner Bros."]});i(1,a=[w,m,l,b,T,S,x,B,F,I]),i(2,c=new Array(a.length)),a.forEach((A,O)=>{A.onChange(R=>{i(2,c[O]=R,c)})}),g.onChange(A=>{i(0,s=A)}),await n.link()}return[s,a,c,(o,g)=>{const w=g.detail;w!==null?o.select(w):o.select()},async o=>{await o.activate()}]}class APe extends Tu{constructor(e){super(),bu(this,e,MPe,FPe,gu,{})}}new APe({target:document.getElementById("app")})});export default OPe();
